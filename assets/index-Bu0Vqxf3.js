(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function Xl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function FD(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var X6={exports:{}},o2={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RL;function Dae(){if(RL)return o2;RL=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,o){var s=null;if(o!==void 0&&(s=""+o),r.key!==void 0&&(s=""+r.key),"key"in r){o={};for(var a in r)a!=="key"&&(o[a]=r[a])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:s,ref:r!==void 0?r:null,props:o}}return o2.Fragment=e,o2.jsx=t,o2.jsxs=t,o2}var DL;function Pae(){return DL||(DL=1,X6.exports=Dae()),X6.exports}var ie=Pae(),J6={exports:{}},$r={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PL;function Uae(){if(PL)return $r;PL=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),M=Symbol.iterator;function x(we){return we===null||typeof we!="object"?null:(we=M&&we[M]||we["@@iterator"],typeof we=="function"?we:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,F={};function j(we,ze,xe){this.props=we,this.context=ze,this.refs=F,this.updater=xe||k}j.prototype.isReactComponent={},j.prototype.setState=function(we,ze){if(typeof we!="object"&&typeof we!="function"&&we!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,we,ze,"setState")},j.prototype.forceUpdate=function(we){this.updater.enqueueForceUpdate(this,we,"forceUpdate")};function q(){}q.prototype=j.prototype;function V(we,ze,xe){this.props=we,this.context=ze,this.refs=F,this.updater=xe||k}var H=V.prototype=new q;H.constructor=V,P(H,j.prototype),H.isPureReactComponent=!0;var G=Array.isArray;function Y(){}var z={H:null,A:null,T:null,S:null},se=Object.prototype.hasOwnProperty;function le(we,ze,xe){var At=xe.ref;return{$$typeof:n,type:we,key:ze,ref:At!==void 0?At:null,props:xe}}function me(we,ze){return le(we.type,ze,we.props)}function de(we){return typeof we=="object"&&we!==null&&we.$$typeof===n}function be(we){var ze={"=":"=0",":":"=2"};return"$"+we.replace(/[=:]/g,function(xe){return ze[xe]})}var Ee=/\/+/g;function De(we,ze){return typeof we=="object"&&we!==null&&we.key!=null?be(""+we.key):ze.toString(36)}function je(we){switch(we.status){case"fulfilled":return we.value;case"rejected":throw we.reason;default:switch(typeof we.status=="string"?we.then(Y,Y):(we.status="pending",we.then(function(ze){we.status==="pending"&&(we.status="fulfilled",we.value=ze)},function(ze){we.status==="pending"&&(we.status="rejected",we.reason=ze)})),we.status){case"fulfilled":return we.value;case"rejected":throw we.reason}}throw we}function Ie(we,ze,xe,At,it){var bt=typeof we;(bt==="undefined"||bt==="boolean")&&(we=null);var Bt=!1;if(we===null)Bt=!0;else switch(bt){case"bigint":case"string":case"number":Bt=!0;break;case"object":switch(we.$$typeof){case n:case e:Bt=!0;break;case m:return Bt=we._init,Ie(Bt(we._payload),ze,xe,At,it)}}if(Bt)return it=it(we),Bt=At===""?"."+De(we,0):At,G(it)?(xe="",Bt!=null&&(xe=Bt.replace(Ee,"$&/")+"/"),Ie(it,ze,xe,"",function(Se){return Se})):it!=null&&(de(it)&&(it=me(it,xe+(it.key==null||we&&we.key===it.key?"":(""+it.key).replace(Ee,"$&/")+"/")+Bt)),ze.push(it)),1;Bt=0;var Ke=At===""?".":At+":";if(G(we))for(var Te=0;Te<we.length;Te++)At=we[Te],bt=Ke+De(At,Te),Bt+=Ie(At,ze,xe,bt,it);else if(Te=x(we),typeof Te=="function")for(we=Te.call(we),Te=0;!(At=we.next()).done;)At=At.value,bt=Ke+De(At,Te++),Bt+=Ie(At,ze,xe,bt,it);else if(bt==="object"){if(typeof we.then=="function")return Ie(je(we),ze,xe,At,it);throw ze=String(we),Error("Objects are not valid as a React child (found: "+(ze==="[object Object]"?"object with keys {"+Object.keys(we).join(", ")+"}":ze)+"). If you meant to render a collection of children, use an array instead.")}return Bt}function Qe(we,ze,xe){if(we==null)return we;var At=[],it=0;return Ie(we,At,"","",function(bt){return ze.call(xe,bt,it++)}),At}function et(we){if(we._status===-1){var ze=we._result;ze=ze(),ze.then(function(xe){(we._status===0||we._status===-1)&&(we._status=1,we._result=xe)},function(xe){(we._status===0||we._status===-1)&&(we._status=2,we._result=xe)}),we._status===-1&&(we._status=0,we._result=ze)}if(we._status===1)return we._result.default;throw we._result}var dt=typeof reportError=="function"?reportError:function(we){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ze=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof we=="object"&&we!==null&&typeof we.message=="string"?String(we.message):String(we),error:we});if(!window.dispatchEvent(ze))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",we);return}console.error(we)},ke={map:Qe,forEach:function(we,ze,xe){Qe(we,function(){ze.apply(this,arguments)},xe)},count:function(we){var ze=0;return Qe(we,function(){ze++}),ze},toArray:function(we){return Qe(we,function(ze){return ze})||[]},only:function(we){if(!de(we))throw Error("React.Children.only expected to receive a single React element child.");return we}};return $r.Activity=y,$r.Children=ke,$r.Component=j,$r.Fragment=t,$r.Profiler=r,$r.PureComponent=V,$r.StrictMode=i,$r.Suspense=c,$r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,$r.__COMPILER_RUNTIME={__proto__:null,c:function(we){return z.H.useMemoCache(we)}},$r.cache=function(we){return function(){return we.apply(null,arguments)}},$r.cacheSignal=function(){return null},$r.cloneElement=function(we,ze,xe){if(we==null)throw Error("The argument must be a React element, but you passed "+we+".");var At=P({},we.props),it=we.key;if(ze!=null)for(bt in ze.key!==void 0&&(it=""+ze.key),ze)!se.call(ze,bt)||bt==="key"||bt==="__self"||bt==="__source"||bt==="ref"&&ze.ref===void 0||(At[bt]=ze[bt]);var bt=arguments.length-2;if(bt===1)At.children=xe;else if(1<bt){for(var Bt=Array(bt),Ke=0;Ke<bt;Ke++)Bt[Ke]=arguments[Ke+2];At.children=Bt}return le(we.type,it,At)},$r.createContext=function(we){return we={$$typeof:s,_currentValue:we,_currentValue2:we,_threadCount:0,Provider:null,Consumer:null},we.Provider=we,we.Consumer={$$typeof:o,_context:we},we},$r.createElement=function(we,ze,xe){var At,it={},bt=null;if(ze!=null)for(At in ze.key!==void 0&&(bt=""+ze.key),ze)se.call(ze,At)&&At!=="key"&&At!=="__self"&&At!=="__source"&&(it[At]=ze[At]);var Bt=arguments.length-2;if(Bt===1)it.children=xe;else if(1<Bt){for(var Ke=Array(Bt),Te=0;Te<Bt;Te++)Ke[Te]=arguments[Te+2];it.children=Ke}if(we&&we.defaultProps)for(At in Bt=we.defaultProps,Bt)it[At]===void 0&&(it[At]=Bt[At]);return le(we,bt,it)},$r.createRef=function(){return{current:null}},$r.forwardRef=function(we){return{$$typeof:a,render:we}},$r.isValidElement=de,$r.lazy=function(we){return{$$typeof:m,_payload:{_status:-1,_result:we},_init:et}},$r.memo=function(we,ze){return{$$typeof:h,type:we,compare:ze===void 0?null:ze}},$r.startTransition=function(we){var ze=z.T,xe={};z.T=xe;try{var At=we(),it=z.S;it!==null&&it(xe,At),typeof At=="object"&&At!==null&&typeof At.then=="function"&&At.then(Y,dt)}catch(bt){dt(bt)}finally{ze!==null&&xe.types!==null&&(ze.types=xe.types),z.T=ze}},$r.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},$r.use=function(we){return z.H.use(we)},$r.useActionState=function(we,ze,xe){return z.H.useActionState(we,ze,xe)},$r.useCallback=function(we,ze){return z.H.useCallback(we,ze)},$r.useContext=function(we){return z.H.useContext(we)},$r.useDebugValue=function(){},$r.useDeferredValue=function(we,ze){return z.H.useDeferredValue(we,ze)},$r.useEffect=function(we,ze){return z.H.useEffect(we,ze)},$r.useEffectEvent=function(we){return z.H.useEffectEvent(we)},$r.useId=function(){return z.H.useId()},$r.useImperativeHandle=function(we,ze,xe){return z.H.useImperativeHandle(we,ze,xe)},$r.useInsertionEffect=function(we,ze){return z.H.useInsertionEffect(we,ze)},$r.useLayoutEffect=function(we,ze){return z.H.useLayoutEffect(we,ze)},$r.useMemo=function(we,ze){return z.H.useMemo(we,ze)},$r.useOptimistic=function(we,ze){return z.H.useOptimistic(we,ze)},$r.useReducer=function(we,ze,xe){return z.H.useReducer(we,ze,xe)},$r.useRef=function(we){return z.H.useRef(we)},$r.useState=function(we){return z.H.useState(we)},$r.useSyncExternalStore=function(we,ze,xe){return z.H.useSyncExternalStore(we,ze,xe)},$r.useTransition=function(){return z.H.useTransition()},$r.version="19.2.0",$r}var UL;function Ya(){return UL||(UL=1,J6.exports=Uae()),J6.exports}var St=Ya();const On=Xl(St);var HH={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},rx=On.createContext&&On.createContext(HH),Kae=["attr","size","title"];function Lae(n,e){if(n==null)return{};var t=Fae(n,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function Fae(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function kw(){return kw=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},kw.apply(this,arguments)}function KL(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Tw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?KL(Object(t),!0).forEach(function(i){zae(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):KL(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function zae(n,e,t){return e=jae(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jae(n){var e=Nae(n,"string");return typeof e=="symbol"?e:e+""}function Nae(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ZH(n){return n&&n.map((e,t)=>On.createElement(e.tag,Tw({key:t},e.attr),ZH(e.child)))}function To(n){return e=>On.createElement(Gae,kw({attr:Tw({},n.attr)},e),ZH(n.child))}function Gae(n){var e=t=>{var{attr:i,size:r,title:o}=n,s=Lae(n,Kae),a=r||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),On.createElement("svg",kw({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,s,{className:c,style:Tw(Tw({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&On.createElement("title",null,o),n.children)};return rx!==void 0?On.createElement(rx.Consumer,null,t=>e(t)):e(HH)}var eO={exports:{}},s2={},tO={exports:{}},nO={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LL;function Wae(){return LL||(LL=1,(function(n){function e(Ie,Qe){var et=Ie.length;Ie.push(Qe);e:for(;0<et;){var dt=et-1>>>1,ke=Ie[dt];if(0<r(ke,Qe))Ie[dt]=Qe,Ie[et]=ke,et=dt;else break e}}function t(Ie){return Ie.length===0?null:Ie[0]}function i(Ie){if(Ie.length===0)return null;var Qe=Ie[0],et=Ie.pop();if(et!==Qe){Ie[0]=et;e:for(var dt=0,ke=Ie.length,we=ke>>>1;dt<we;){var ze=2*(dt+1)-1,xe=Ie[ze],At=ze+1,it=Ie[At];if(0>r(xe,et))At<ke&&0>r(it,xe)?(Ie[dt]=it,Ie[At]=et,dt=At):(Ie[dt]=xe,Ie[ze]=et,dt=ze);else if(At<ke&&0>r(it,et))Ie[dt]=it,Ie[At]=et,dt=At;else break e}}return Qe}function r(Ie,Qe){var et=Ie.sortIndex-Qe.sortIndex;return et!==0?et:Ie.id-Qe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();n.unstable_now=function(){return s.now()-a}}var c=[],h=[],m=1,y=null,M=3,x=!1,k=!1,P=!1,F=!1,j=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function H(Ie){for(var Qe=t(h);Qe!==null;){if(Qe.callback===null)i(h);else if(Qe.startTime<=Ie)i(h),Qe.sortIndex=Qe.expirationTime,e(c,Qe);else break;Qe=t(h)}}function G(Ie){if(P=!1,H(Ie),!k)if(t(c)!==null)k=!0,Y||(Y=!0,be());else{var Qe=t(h);Qe!==null&&je(G,Qe.startTime-Ie)}}var Y=!1,z=-1,se=5,le=-1;function me(){return F?!0:!(n.unstable_now()-le<se)}function de(){if(F=!1,Y){var Ie=n.unstable_now();le=Ie;var Qe=!0;try{e:{k=!1,P&&(P=!1,q(z),z=-1),x=!0;var et=M;try{t:{for(H(Ie),y=t(c);y!==null&&!(y.expirationTime>Ie&&me());){var dt=y.callback;if(typeof dt=="function"){y.callback=null,M=y.priorityLevel;var ke=dt(y.expirationTime<=Ie);if(Ie=n.unstable_now(),typeof ke=="function"){y.callback=ke,H(Ie),Qe=!0;break t}y===t(c)&&i(c),H(Ie)}else i(c);y=t(c)}if(y!==null)Qe=!0;else{var we=t(h);we!==null&&je(G,we.startTime-Ie),Qe=!1}}break e}finally{y=null,M=et,x=!1}Qe=void 0}}finally{Qe?be():Y=!1}}}var be;if(typeof V=="function")be=function(){V(de)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,De=Ee.port2;Ee.port1.onmessage=de,be=function(){De.postMessage(null)}}else be=function(){j(de,0)};function je(Ie,Qe){z=j(function(){Ie(n.unstable_now())},Qe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Ie){Ie.callback=null},n.unstable_forceFrameRate=function(Ie){0>Ie||125<Ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<Ie?Math.floor(1e3/Ie):5},n.unstable_getCurrentPriorityLevel=function(){return M},n.unstable_next=function(Ie){switch(M){case 1:case 2:case 3:var Qe=3;break;default:Qe=M}var et=M;M=Qe;try{return Ie()}finally{M=et}},n.unstable_requestPaint=function(){F=!0},n.unstable_runWithPriority=function(Ie,Qe){switch(Ie){case 1:case 2:case 3:case 4:case 5:break;default:Ie=3}var et=M;M=Ie;try{return Qe()}finally{M=et}},n.unstable_scheduleCallback=function(Ie,Qe,et){var dt=n.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?dt+et:dt):et=dt,Ie){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=et+ke,Ie={id:m++,callback:Qe,priorityLevel:Ie,startTime:et,expirationTime:ke,sortIndex:-1},et>dt?(Ie.sortIndex=et,e(h,Ie),t(c)===null&&Ie===t(h)&&(P?(q(z),z=-1):P=!0,je(G,et-dt))):(Ie.sortIndex=ke,e(c,Ie),k||x||(k=!0,Y||(Y=!0,be()))),Ie},n.unstable_shouldYield=me,n.unstable_wrapCallback=function(Ie){var Qe=M;return function(){var et=M;M=Qe;try{return Ie.apply(this,arguments)}finally{M=et}}}})(nO)),nO}var FL;function Qae(){return FL||(FL=1,tO.exports=Wae()),tO.exports}var iO={exports:{}},KA={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zL;function qae(){if(zL)return KA;zL=1;var n=Ya();function e(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(c,h,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:c,containerInfo:h,implementation:m}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return KA.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,KA.createPortal=function(c,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(c,h,null,m)},KA.flushSync=function(c){var h=s.T,m=i.p;try{if(s.T=null,i.p=2,c)return c()}finally{s.T=h,i.p=m,i.d.f()}},KA.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(c,h))},KA.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},KA.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var m=h.as,y=a(m,h.crossOrigin),M=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?i.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:y,integrity:M,fetchPriority:x}):m==="script"&&i.d.X(c,{crossOrigin:y,integrity:M,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},KA.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=a(h.as,h.crossOrigin);i.d.M(c,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(c)},KA.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,y=a(m,h.crossOrigin);i.d.L(c,m,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},KA.preloadModule=function(c,h){if(typeof c=="string")if(h){var m=a(h.as,h.crossOrigin);i.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(c)},KA.requestFormReset=function(c){i.d.r(c)},KA.unstable_batchedUpdates=function(c,h){return c(h)},KA.useFormState=function(c,h,m){return s.H.useFormState(c,h,m)},KA.useFormStatus=function(){return s.H.useHostTransitionStatus()},KA.version="19.2.0",KA}var jL;function zD(){if(jL)return iO.exports;jL=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),iO.exports=qae(),iO.exports}var NL;function Yae(){if(NL)return s2;NL=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=Qae(),e=Ya(),t=zD();function i(A){var g="https://react.dev/errors/"+A;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+A+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function o(A){var g=A,_=A;if(A.alternate)for(;g.return;)g=g.return;else{A=g;do g=A,(g.flags&4098)!==0&&(_=g.return),A=g.return;while(A)}return g.tag===3?_:null}function s(A){if(A.tag===13){var g=A.memoizedState;if(g===null&&(A=A.alternate,A!==null&&(g=A.memoizedState)),g!==null)return g.dehydrated}return null}function a(A){if(A.tag===31){var g=A.memoizedState;if(g===null&&(A=A.alternate,A!==null&&(g=A.memoizedState)),g!==null)return g.dehydrated}return null}function c(A){if(o(A)!==A)throw Error(i(188))}function h(A){var g=A.alternate;if(!g){if(g=o(A),g===null)throw Error(i(188));return g!==A?null:A}for(var _=A,O=g;;){var N=_.return;if(N===null)break;var J=N.alternate;if(J===null){if(O=N.return,O!==null){_=O;continue}break}if(N.child===J.child){for(J=N.child;J;){if(J===_)return c(N),A;if(J===O)return c(N),g;J=J.sibling}throw Error(i(188))}if(_.return!==O.return)_=N,O=J;else{for(var Me=!1,Ye=N.child;Ye;){if(Ye===_){Me=!0,_=N,O=J;break}if(Ye===O){Me=!0,O=N,_=J;break}Ye=Ye.sibling}if(!Me){for(Ye=J.child;Ye;){if(Ye===_){Me=!0,_=J,O=N;break}if(Ye===O){Me=!0,O=J,_=N;break}Ye=Ye.sibling}if(!Me)throw Error(i(189))}}if(_.alternate!==O)throw Error(i(190))}if(_.tag!==3)throw Error(i(188));return _.stateNode.current===_?A:g}function m(A){var g=A.tag;if(g===5||g===26||g===27||g===6)return A;for(A=A.child;A!==null;){if(g=m(A),g!==null)return g;A=A.sibling}return null}var y=Object.assign,M=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),V=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),le=Symbol.for("react.activity"),me=Symbol.for("react.memo_cache_sentinel"),de=Symbol.iterator;function be(A){return A===null||typeof A!="object"?null:(A=de&&A[de]||A["@@iterator"],typeof A=="function"?A:null)}var Ee=Symbol.for("react.client.reference");function De(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===Ee?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case P:return"Fragment";case j:return"Profiler";case F:return"StrictMode";case G:return"Suspense";case Y:return"SuspenseList";case le:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case k:return"Portal";case V:return A.displayName||"Context";case q:return(A._context.displayName||"Context")+".Consumer";case H:var g=A.render;return A=A.displayName,A||(A=g.displayName||g.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case z:return g=A.displayName||null,g!==null?g:De(A.type)||"Memo";case se:g=A._payload,A=A._init;try{return De(A(g))}catch{}}return null}var je=Array.isArray,Ie=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Qe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et={pending:!1,data:null,method:null,action:null},dt=[],ke=-1;function we(A){return{current:A}}function ze(A){0>ke||(A.current=dt[ke],dt[ke]=null,ke--)}function xe(A,g){ke++,dt[ke]=A.current,A.current=g}var At=we(null),it=we(null),bt=we(null),Bt=we(null);function Ke(A,g){switch(xe(bt,g),xe(it,A),xe(At,null),g.nodeType){case 9:case 11:A=(A=g.documentElement)&&(A=A.namespaceURI)?RA(A):0;break;default:if(A=g.tagName,g=g.namespaceURI)g=RA(g),A=ac(g,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}ze(At),xe(At,A)}function Te(){ze(At),ze(it),ze(bt)}function Se(A){A.memoizedState!==null&&xe(Bt,A);var g=At.current,_=ac(g,A.type);g!==_&&(xe(it,A),xe(At,_))}function Ne(A){it.current===A&&(ze(At),ze(it)),Bt.current===A&&(ze(Bt),An._currentValue=et)}var ut,rt;function pt(A){if(ut===void 0)try{throw Error()}catch(_){var g=_.stack.trim().match(/\n( *(at )?)/);ut=g&&g[1]||"",rt=-1<_.stack.indexOf(`
    at`)?" (<anonymous>)":-1<_.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ut+A+rt}var Dt=!1;function Ot(A,g){if(!A||Dt)return"";Dt=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var O={DetermineComponentFrameRoot:function(){try{if(g){var mn=function(){throw Error()};if(Object.defineProperty(mn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(mn,[])}catch(rn){var Xt=rn}Reflect.construct(A,[],mn)}else{try{mn.call()}catch(rn){Xt=rn}A.call(mn.prototype)}}else{try{throw Error()}catch(rn){Xt=rn}(mn=A())&&typeof mn.catch=="function"&&mn.catch(function(){})}}catch(rn){if(rn&&Xt&&typeof rn.stack=="string")return[rn.stack,Xt.stack]}return[null,null]}};O.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(O.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(O.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var J=O.DetermineComponentFrameRoot(),Me=J[0],Ye=J[1];if(Me&&Ye){var _t=Me.split(`
`),$t=Ye.split(`
`);for(N=O=0;O<_t.length&&!_t[O].includes("DetermineComponentFrameRoot");)O++;for(;N<$t.length&&!$t[N].includes("DetermineComponentFrameRoot");)N++;if(O===_t.length||N===$t.length)for(O=_t.length-1,N=$t.length-1;1<=O&&0<=N&&_t[O]!==$t[N];)N--;for(;1<=O&&0<=N;O--,N--)if(_t[O]!==$t[N]){if(O!==1||N!==1)do if(O--,N--,0>N||_t[O]!==$t[N]){var ln=`
`+_t[O].replace(" at new "," at ");return A.displayName&&ln.includes("<anonymous>")&&(ln=ln.replace("<anonymous>",A.displayName)),ln}while(1<=O&&0<=N);break}}}finally{Dt=!1,Error.prepareStackTrace=_}return(_=A?A.displayName||A.name:"")?pt(_):""}function Jt(A,g){switch(A.tag){case 26:case 27:case 5:return pt(A.type);case 16:return pt("Lazy");case 13:return A.child!==g&&g!==null?pt("Suspense Fallback"):pt("Suspense");case 19:return pt("SuspenseList");case 0:case 15:return Ot(A.type,!1);case 11:return Ot(A.type.render,!1);case 1:return Ot(A.type,!0);case 31:return pt("Activity");default:return""}}function Tn(A){try{var g="",_=null;do g+=Jt(A,_),_=A,A=A.return;while(A);return g}catch(O){return`
Error generating stack: `+O.message+`
`+O.stack}}var Ln=Object.prototype.hasOwnProperty,ii=n.unstable_scheduleCallback,wn=n.unstable_cancelCallback,Rn=n.unstable_shouldYield,gn=n.unstable_requestPaint,Yn=n.unstable_now,Dn=n.unstable_getCurrentPriorityLevel,Tt=n.unstable_ImmediatePriority,_e=n.unstable_UserBlockingPriority,oe=n.unstable_NormalPriority,ee=n.unstable_LowPriority,ne=n.unstable_IdlePriority,ue=n.log,ye=n.unstable_setDisableYieldValue,Ue=null,Ve=null;function lt(A){if(typeof ue=="function"&&ye(A),Ve&&typeof Ve.setStrictMode=="function")try{Ve.setStrictMode(Ue,A)}catch{}}var ge=Math.clz32?Math.clz32:yt,Be=Math.log,v=Math.LN2;function yt(A){return A>>>=0,A===0?32:31-(Be(A)/v|0)|0}var Mt=256,Pt=262144,st=4194304;function fn(A){var g=A&42;if(g!==0)return g;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return A&261888;case 262144:case 524288:case 1048576:case 2097152:return A&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Fn(A,g,_){var O=A.pendingLanes;if(O===0)return 0;var N=0,J=A.suspendedLanes,Me=A.pingedLanes;A=A.warmLanes;var Ye=O&134217727;return Ye!==0?(O=Ye&~J,O!==0?N=fn(O):(Me&=Ye,Me!==0?N=fn(Me):_||(_=Ye&~A,_!==0&&(N=fn(_))))):(Ye=O&~J,Ye!==0?N=fn(Ye):Me!==0?N=fn(Me):_||(_=O&~A,_!==0&&(N=fn(_)))),N===0?0:g!==0&&g!==N&&(g&J)===0&&(J=N&-N,_=g&-g,J>=_||J===32&&(_&4194048)!==0)?g:N}function pn(A,g){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&g)===0}function $n(A,g){switch(A){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zn(){var A=st;return st<<=1,(st&62914560)===0&&(st=4194304),A}function ai(A){for(var g=[],_=0;31>_;_++)g.push(A);return g}function Hi(A,g){A.pendingLanes|=g,g!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function Ti(A,g,_,O,N,J){var Me=A.pendingLanes;A.pendingLanes=_,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=_,A.entangledLanes&=_,A.errorRecoveryDisabledLanes&=_,A.shellSuspendCounter=0;var Ye=A.entanglements,_t=A.expirationTimes,$t=A.hiddenUpdates;for(_=Me&~_;0<_;){var ln=31-ge(_),mn=1<<ln;Ye[ln]=0,_t[ln]=-1;var Xt=$t[ln];if(Xt!==null)for($t[ln]=null,ln=0;ln<Xt.length;ln++){var rn=Xt[ln];rn!==null&&(rn.lane&=-536870913)}_&=~mn}O!==0&&tr(A,O,0),J!==0&&N===0&&A.tag!==0&&(A.suspendedLanes|=J&~(Me&~g))}function tr(A,g,_){A.pendingLanes|=g,A.suspendedLanes&=~g;var O=31-ge(g);A.entangledLanes|=g,A.entanglements[O]=A.entanglements[O]|1073741824|_&261930}function oi(A,g){var _=A.entangledLanes|=g;for(A=A.entanglements;_;){var O=31-ge(_),N=1<<O;N&g|A[O]&g&&(A[O]|=g),_&=~N}}function Pi(A,g){var _=g&-g;return _=(_&42)!==0?1:Zt(_),(_&(A.suspendedLanes|g))!==0?0:_}function Zt(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function pr(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function Zi(){var A=Qe.p;return A!==0?A:(A=window.event,A===void 0?32:jc(A.type))}function ea(A,g){var _=Qe.p;try{return Qe.p=A,g()}finally{Qe.p=_}}var no=Math.random().toString(36).slice(2),sn="__reactFiber$"+no,Ci="__reactProps$"+no,Ui="__reactContainer$"+no,nr="__reactEvents$"+no,Jl="__reactListeners$"+no,Al="__reactHandles$"+no,Ki="__reactResources$"+no,$a="__reactMarker$"+no;function hl(A){delete A[sn],delete A[Ci],delete A[nr],delete A[Jl],delete A[Al]}function fo(A){var g=A[sn];if(g)return g;for(var _=A.parentNode;_;){if(g=_[Ui]||_[sn]){if(_=g.alternate,g.child!==null||_!==null&&_.child!==null)for(A=BC(A);A!==null;){if(_=A[sn])return _;A=BC(A)}return g}A=_,_=A.parentNode}return null}function Qs(A){if(A=A[sn]||A[Ui]){var g=A.tag;if(g===5||g===6||g===13||g===31||g===26||g===27||g===3)return A}return null}function Kl(A){var g=A.tag;if(g===5||g===26||g===27||g===6)return A.stateNode;throw Error(i(33))}function io(A){var g=A[Ki];return g||(g=A[Ki]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function As(A){A[$a]=!0}var pa=new Set,Dr={};function Ll(A,g){Da(A,g),Da(A+"Capture",g)}function Da(A,g){for(Dr[A]=g,A=0;A<g.length;A++)pa.add(g[A])}var qs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Sl={},eu={};function $A(A){return Ln.call(eu,A)?!0:Ln.call(Sl,A)?!1:qs.test(A)?eu[A]=!0:(Sl[A]=!0,!1)}function Vc(A,g,_){if($A(g))if(_===null)A.removeAttribute(g);else{switch(typeof _){case"undefined":case"function":case"symbol":A.removeAttribute(g);return;case"boolean":var O=g.toLowerCase().slice(0,5);if(O!=="data-"&&O!=="aria-"){A.removeAttribute(g);return}}A.setAttribute(g,""+_)}}function mc(A,g,_){if(_===null)A.removeAttribute(g);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(g);return}A.setAttribute(g,""+_)}}function ma(A,g,_,O){if(O===null)A.removeAttribute(_);else{switch(typeof O){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(_);return}A.setAttributeNS(g,_,""+O)}}function xs(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function gc(A){var g=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function tu(A,g,_){var O=Object.getOwnPropertyDescriptor(A.constructor.prototype,g);if(!A.hasOwnProperty(g)&&typeof O<"u"&&typeof O.get=="function"&&typeof O.set=="function"){var N=O.get,J=O.set;return Object.defineProperty(A,g,{configurable:!0,get:function(){return N.call(this)},set:function(Me){_=""+Me,J.call(this,Me)}}),Object.defineProperty(A,g,{enumerable:O.enumerable}),{getValue:function(){return _},setValue:function(Me){_=""+Me},stopTracking:function(){A._valueTracker=null,delete A[g]}}}}function yc(A){if(!A._valueTracker){var g=gc(A)?"checked":"value";A._valueTracker=tu(A,g,""+A[g])}}function nu(A){if(!A)return!1;var g=A._valueTracker;if(!g)return!0;var _=g.getValue(),O="";return A&&(O=gc(A)?A.checked?"true":"false":A.value),A=O,A!==_?(g.setValue(A),!0):!1}function Fl(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var VA=/[\n"\\]/g;function ga(A){return A.replace(VA,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function iu(A,g,_,O,N,J,Me,Ye){A.name="",Me!=null&&typeof Me!="function"&&typeof Me!="symbol"&&typeof Me!="boolean"?A.type=Me:A.removeAttribute("type"),g!=null?Me==="number"?(g===0&&A.value===""||A.value!=g)&&(A.value=""+xs(g)):A.value!==""+xs(g)&&(A.value=""+xs(g)):Me!=="submit"&&Me!=="reset"||A.removeAttribute("value"),g!=null?Hc(A,Me,xs(g)):_!=null?Hc(A,Me,xs(_)):O!=null&&A.removeAttribute("value"),N==null&&J!=null&&(A.defaultChecked=!!J),N!=null&&(A.checked=N&&typeof N!="function"&&typeof N!="symbol"),Ye!=null&&typeof Ye!="function"&&typeof Ye!="symbol"&&typeof Ye!="boolean"?A.name=""+xs(Ye):A.removeAttribute("name")}function ru(A,g,_,O,N,J,Me,Ye){if(J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"&&(A.type=J),g!=null||_!=null){if(!(J!=="submit"&&J!=="reset"||g!=null)){yc(A);return}_=_!=null?""+xs(_):"",g=g!=null?""+xs(g):_,Ye||g===A.value||(A.value=g),A.defaultValue=g}O=O??N,O=typeof O!="function"&&typeof O!="symbol"&&!!O,A.checked=Ye?A.checked:!!O,A.defaultChecked=!!O,Me!=null&&typeof Me!="function"&&typeof Me!="symbol"&&typeof Me!="boolean"&&(A.name=Me),yc(A)}function Hc(A,g,_){g==="number"&&Fl(A.ownerDocument)===A||A.defaultValue===""+_||(A.defaultValue=""+_)}function Hu(A,g,_,O){if(A=A.options,g){g={};for(var N=0;N<_.length;N++)g["$"+_[N]]=!0;for(_=0;_<A.length;_++)N=g.hasOwnProperty("$"+A[_].value),A[_].selected!==N&&(A[_].selected=N),N&&O&&(A[_].defaultSelected=!0)}else{for(_=""+xs(_),g=null,N=0;N<A.length;N++){if(A[N].value===_){A[N].selected=!0,O&&(A[N].defaultSelected=!0);return}g!==null||A[N].disabled||(g=A[N])}g!==null&&(g.selected=!0)}}function Pa(A,g,_){if(g!=null&&(g=""+xs(g),g!==A.value&&(A.value=g),_==null)){A.defaultValue!==g&&(A.defaultValue=g);return}A.defaultValue=_!=null?""+xs(_):""}function Ds(A,g,_,O){if(g==null){if(O!=null){if(_!=null)throw Error(i(92));if(je(O)){if(1<O.length)throw Error(i(93));O=O[0]}_=O}_==null&&(_=""),g=_}_=xs(g),A.defaultValue=_,O=A.textContent,O===_&&O!==""&&O!==null&&(A.value=O),yc(A)}function qr(A,g){if(g){var _=A.firstChild;if(_&&_===A.lastChild&&_.nodeType===3){_.nodeValue=g;return}}A.textContent=g}var Yi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ou(A,g,_){var O=g.indexOf("--")===0;_==null||typeof _=="boolean"||_===""?O?A.setProperty(g,""):g==="float"?A.cssFloat="":A[g]="":O?A.setProperty(g,_):typeof _!="number"||_===0||Yi.has(g)?g==="float"?A.cssFloat=_:A[g]=(""+_).trim():A[g]=_+"px"}function Vo(A,g,_){if(g!=null&&typeof g!="object")throw Error(i(62));if(A=A.style,_!=null){for(var O in _)!_.hasOwnProperty(O)||g!=null&&g.hasOwnProperty(O)||(O.indexOf("--")===0?A.setProperty(O,""):O==="float"?A.cssFloat="":A[O]="");for(var N in g)O=g[N],g.hasOwnProperty(N)&&_[N]!==O&&ou(A,N,O)}else for(var J in g)g.hasOwnProperty(J)&&ou(A,J,g[J])}function dl(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function El(A){return sr.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}function Va(){}var Go=null;function Ps(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var Ro=null,Eo=null;function Ho(A){var g=Qs(A);if(g&&(A=g.stateNode)){var _=A[Ci]||null;e:switch(A=g.stateNode,g.type){case"input":if(iu(A,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name),g=_.name,_.type==="radio"&&g!=null){for(_=A;_.parentNode;)_=_.parentNode;for(_=_.querySelectorAll('input[name="'+ga(""+g)+'"][type="radio"]'),g=0;g<_.length;g++){var O=_[g];if(O!==A&&O.form===A.form){var N=O[Ci]||null;if(!N)throw Error(i(90));iu(O,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name)}}for(g=0;g<_.length;g++)O=_[g],O.form===A.form&&nu(O)}break e;case"textarea":Pa(A,_.value,_.defaultValue);break e;case"select":g=_.value,g!=null&&Hu(A,!!_.multiple,g,!1)}}}var Pr=!1;function HA(A,g,_){if(Pr)return A(g,_);Pr=!0;try{var O=A(g);return O}finally{if(Pr=!1,(Ro!==null||Eo!==null)&&(J1(),Ro&&(g=Ro,A=Eo,Eo=Ro=null,Ho(g),A)))for(g=0;g<A.length;g++)Ho(A[g])}}function Zo(A,g){var _=A.stateNode;if(_===null)return null;var O=_[Ci]||null;if(O===null)return null;_=O[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(O=!O.disabled)||(A=A.type,O=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!O;break e;default:A=!1}if(A)return null;if(_&&typeof _!="function")throw Error(i(231,g,typeof _));return _}var Wo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ms=!1;if(Wo)try{var lr={};Object.defineProperty(lr,"passive",{get:function(){Ms=!0}}),window.addEventListener("test",lr,lr),window.removeEventListener("test",lr,lr)}catch{Ms=!1}var aa=null,wi=null,Jn=null;function Ur(){if(Jn)return Jn;var A,g=wi,_=g.length,O,N="value"in aa?aa.value:aa.textContent,J=N.length;for(A=0;A<_&&g[A]===N[A];A++);var Me=_-A;for(O=1;O<=Me&&g[_-O]===N[J-O];O++);return Jn=N.slice(A,1<O?1-O:void 0)}function X(A){var g=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&g===13&&(A=13)):A=g,A===10&&(A=13),32<=A||A===13?A:0}function ve(){return!0}function $e(){return!1}function wt(A){function g(_,O,N,J,Me){this._reactName=_,this._targetInst=N,this.type=O,this.nativeEvent=J,this.target=Me,this.currentTarget=null;for(var Ye in A)A.hasOwnProperty(Ye)&&(_=A[Ye],this[Ye]=_?_(J):J[Ye]);return this.isDefaultPrevented=(J.defaultPrevented!=null?J.defaultPrevented:J.returnValue===!1)?ve:$e,this.isPropagationStopped=$e,this}return y(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _=this.nativeEvent;_&&(_.preventDefault?_.preventDefault():typeof _.returnValue!="unknown"&&(_.returnValue=!1),this.isDefaultPrevented=ve)},stopPropagation:function(){var _=this.nativeEvent;_&&(_.stopPropagation?_.stopPropagation():typeof _.cancelBubble!="unknown"&&(_.cancelBubble=!0),this.isPropagationStopped=ve)},persist:function(){},isPersistent:ve}),g}var ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bn=wt(ei),_i=y({},ei,{view:0,detail:0}),zi=wt(_i),Ri,Ii,mr,Tr=y({},_i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ZA,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==mr&&(mr&&A.type==="mousemove"?(Ri=A.screenX-mr.screenX,Ii=A.screenY-mr.screenY):Ii=Ri=0,mr=A),Ri)},movementY:function(A){return"movementY"in A?A.movementY:Ii}}),ji=wt(Tr),ur=y({},Tr,{dataTransfer:0}),Hr=wt(ur),ws=y({},_i,{relatedTarget:0}),gr=wt(ws),Ha=y({},ei,{animationName:0,elapsedTime:0,pseudoElement:0}),vc=wt(Ha),_u=y({},ei,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),ta=wt(_u),Sf=y({},ei,{data:0}),Xo=wt(Sf),yp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kh(A){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(A):(A=bc[A])?!!g[A]:!1}function ZA(){return Kh}var Wr=y({},_i,{key:function(A){if(A.key){var g=yp[A.key]||A.key;if(g!=="Unidentified")return g}return A.type==="keypress"?(A=X(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?Zc[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ZA,charCode:function(A){return A.type==="keypress"?X(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?X(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),XA=wt(Wr),Ef=y({},Tr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_1=wt(Ef),vp=y({},_i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ZA}),fv=wt(vp),pv=y({},ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),ym=wt(pv),vm=y({},Tr,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),mA=wt(vm),Lh=y({},ei,{newState:0,oldState:0}),bm=wt(Lh),Cc=[9,13,27,32],Cm=Wo&&"CompositionEvent"in window,gA=null;Wo&&"documentMode"in document&&(gA=document.documentMode);var Ed=Wo&&"TextEvent"in window&&!gA,Od=Wo&&(!Cm||gA&&8<gA&&11>=gA),x1=" ",Bd=!1;function _m(A,g){switch(A){case"keyup":return Cc.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fh(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var zh=!1;function su(A,g){switch(A){case"compositionend":return Fh(g);case"keypress":return g.which!==32?null:(Bd=!0,x1);case"textInput":return A=g.data,A===x1&&Bd?null:A;default:return null}}function Hg(A,g){if(zh)return A==="compositionend"||!Cm&&_m(A,g)?(A=Ur(),Jn=wi=aa=null,zh=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return Od&&g.locale!=="ko"?null:g.data;default:return null}}var Of={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bp(A){var g=A&&A.nodeName&&A.nodeName.toLowerCase();return g==="input"?!!Of[A.type]:g==="textarea"}function xm(A,g,_,O){Ro?Eo?Eo.push(O):Eo=[O]:Ro=O,g=Up(g,"onChange"),0<g.length&&(_=new Bn("onChange","change",null,_,O),A.push({event:_,listeners:g}))}var jh=null,Bf=null;function M1(A){MC(A,0)}function yA(A){var g=Kl(A);if(nu(g))return A}function Mm(A,g){if(A==="change")return g}var JA=!1;if(Wo){var Id;if(Wo){var Zg="oninput"in document;if(!Zg){var Nh=document.createElement("div");Nh.setAttribute("oninput","return;"),Zg=typeof Nh.oninput=="function"}Id=Zg}else Id=!1;JA=Id&&(!document.documentMode||9<document.documentMode)}function wm(){jh&&(jh.detachEvent("onpropertychange",eh),Bf=jh=null)}function eh(A){if(A.propertyName==="value"&&yA(Bf)){var g=[];xm(g,Bf,A,Ps(A)),HA(M1,g)}}function Cp(A,g,_){A==="focusin"?(wm(),jh=g,Bf=_,jh.attachEvent("onpropertychange",eh)):A==="focusout"&&wm()}function w1(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return yA(Bf)}function Xg(A,g){if(A==="click")return yA(g)}function Jg(A,g){if(A==="input"||A==="change")return yA(g)}function kd(A,g){return A===g&&(A!==0||1/A===1/g)||A!==A&&g!==g}var Ss=typeof Object.is=="function"?Object.is:kd;function xu(A,g){if(Ss(A,g))return!0;if(typeof A!="object"||A===null||typeof g!="object"||g===null)return!1;var _=Object.keys(A),O=Object.keys(g);if(_.length!==O.length)return!1;for(O=0;O<_.length;O++){var N=_[O];if(!Ln.call(g,N)||!Ss(A[N],g[N]))return!1}return!0}function po(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function Sm(A,g){var _=po(A);A=0;for(var O;_;){if(_.nodeType===3){if(O=A+_.textContent.length,A<=g&&O>=g)return{node:_,offset:g-A};A=O}e:{for(;_;){if(_.nextSibling){_=_.nextSibling;break e}_=_.parentNode}_=void 0}_=po(_)}}function Em(A,g){return A&&g?A===g?!0:A&&A.nodeType===3?!1:g&&g.nodeType===3?Em(A,g.parentNode):"contains"in A?A.contains(g):A.compareDocumentPosition?!!(A.compareDocumentPosition(g)&16):!1:!1}function e0(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var g=Fl(A.document);g instanceof A.HTMLIFrameElement;){try{var _=typeof g.contentWindow.location.href=="string"}catch{_=!1}if(_)A=g.contentWindow;else break;g=Fl(A.document)}return g}function _p(A){var g=A&&A.nodeName&&A.nodeName.toLowerCase();return g&&(g==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||g==="textarea"||A.contentEditable==="true")}var _c=Wo&&"documentMode"in document&&11>=document.documentMode,Ut=null,an=null,nn=null,pi=!1;function yr(A,g,_){var O=_.window===_?_.document:_.nodeType===9?_:_.ownerDocument;pi||Ut==null||Ut!==Fl(O)||(O=Ut,"selectionStart"in O&&_p(O)?O={start:O.selectionStart,end:O.selectionEnd}:(O=(O.ownerDocument&&O.ownerDocument.defaultView||window).getSelection(),O={anchorNode:O.anchorNode,anchorOffset:O.anchorOffset,focusNode:O.focusNode,focusOffset:O.focusOffset}),nn&&xu(nn,O)||(nn=O,O=Up(an,"onSelect"),0<O.length&&(g=new Bn("onSelect","select",null,g,_),A.push({event:g,listeners:O}),g.target=Ut)))}function Yr(A,g){var _={};return _[A.toLowerCase()]=g.toLowerCase(),_["Webkit"+A]="webkit"+g,_["Moz"+A]="moz"+g,_}var Ys={animationend:Yr("Animation","AnimationEnd"),animationiteration:Yr("Animation","AnimationIteration"),animationstart:Yr("Animation","AnimationStart"),transitionrun:Yr("Transition","TransitionRun"),transitionstart:Yr("Transition","TransitionStart"),transitioncancel:Yr("Transition","TransitionCancel"),transitionend:Yr("Transition","TransitionEnd")},Qo={},Td={};Wo&&(Td=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function vA(A){if(Qo[A])return Qo[A];if(!Ys[A])return A;var g=Ys[A],_;for(_ in g)if(g.hasOwnProperty(_)&&_ in Td)return Qo[A]=g[_];return A}var zl=vA("animationend"),Rd=vA("animationiteration"),Gh=vA("animationstart"),bA=vA("transitionrun"),th=vA("transitionstart"),au=vA("transitioncancel"),Do=vA("transitionend"),t0=new Map,If="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");If.push("scrollEnd");function Ua(A,g){t0.set(A,g),Ll(g,[A])}var Dd=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},lu=[],CA=0,nh=0;function xc(){for(var A=CA,g=nh=CA=0;g<A;){var _=lu[g];lu[g++]=null;var O=lu[g];lu[g++]=null;var N=lu[g];lu[g++]=null;var J=lu[g];if(lu[g++]=null,O!==null&&N!==null){var Me=O.pending;Me===null?N.next=N:(N.next=Me.next,Me.next=N),O.pending=N}J!==0&&xp(_,N,J)}}function Mc(A,g,_,O){lu[CA++]=A,lu[CA++]=g,lu[CA++]=_,lu[CA++]=O,nh|=O,A.lanes|=O,A=A.alternate,A!==null&&(A.lanes|=O)}function Xc(A,g,_,O){return Mc(A,g,_,O),br(A)}function Jc(A,g){return Mc(A,null,null,g),br(A)}function xp(A,g,_){A.lanes|=_;var O=A.alternate;O!==null&&(O.lanes|=_);for(var N=!1,J=A.return;J!==null;)J.childLanes|=_,O=J.alternate,O!==null&&(O.childLanes|=_),J.tag===22&&(A=J.stateNode,A===null||A._visibility&1||(N=!0)),A=J,J=J.return;return A.tag===3?(J=A.stateNode,N&&g!==null&&(N=31-ge(_),A=J.hiddenUpdates,O=A[N],O===null?A[N]=[g]:O.push(g),g.lane=_|536870912),J):null}function br(A){if(50<Tp)throw Tp=0,qf=null,Error(i(185));for(var g=A.return;g!==null;)A=g,g=A.return;return A.tag===3?A.stateNode:null}var Zu={};function S1(A,g,_,O){this.tag=A,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=O,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fl(A,g,_,O){return new S1(A,g,_,O)}function jl(A){return A=A.prototype,!(!A||!A.isReactComponent)}function Xu(A,g){var _=A.alternate;return _===null?(_=fl(A.tag,g,A.key,A.mode),_.elementType=A.elementType,_.type=A.type,_.stateNode=A.stateNode,_.alternate=A,A.alternate=_):(_.pendingProps=g,_.type=A.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=A.flags&65011712,_.childLanes=A.childLanes,_.lanes=A.lanes,_.child=A.child,_.memoizedProps=A.memoizedProps,_.memoizedState=A.memoizedState,_.updateQueue=A.updateQueue,g=A.dependencies,_.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},_.sibling=A.sibling,_.index=A.index,_.ref=A.ref,_.refCleanup=A.refCleanup,_}function E1(A,g){A.flags&=65011714;var _=A.alternate;return _===null?(A.childLanes=0,A.lanes=g,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=_.childLanes,A.lanes=_.lanes,A.child=_.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=_.memoizedProps,A.memoizedState=_.memoizedState,A.updateQueue=_.updateQueue,A.type=_.type,g=_.dependencies,A.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),A}function Mp(A,g,_,O,N,J){var Me=0;if(O=A,typeof A=="function")jl(A)&&(Me=1);else if(typeof A=="string")Me=Le(A,_,At.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case le:return A=fl(31,_,g,N),A.elementType=le,A.lanes=J,A;case P:return Pd(_.children,N,J,g);case F:Me=8,N|=24;break;case j:return A=fl(12,_,g,N|2),A.elementType=j,A.lanes=J,A;case G:return A=fl(13,_,g,N),A.elementType=G,A.lanes=J,A;case Y:return A=fl(19,_,g,N),A.elementType=Y,A.lanes=J,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case V:Me=10;break e;case q:Me=9;break e;case H:Me=11;break e;case z:Me=14;break e;case se:Me=16,O=null;break e}Me=29,_=Error(i(130,A===null?"null":typeof A,"")),O=null}return g=fl(Me,_,g,N),g.elementType=A,g.type=O,g.lanes=J,g}function Pd(A,g,_,O){return A=fl(7,A,O,g),A.lanes=_,A}function Wh(A,g,_){return A=fl(6,A,null,g),A.lanes=_,A}function Qh(A){var g=fl(18,null,null,0);return g.stateNode=A,g}function ih(A,g,_){return g=fl(4,A.children!==null?A.children:[],A.key,g),g.lanes=_,g.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},g}var kf=new WeakMap;function uu(A,g){if(typeof A=="object"&&A!==null){var _=kf.get(A);return _!==void 0?_:(g={value:A,source:g,stack:Tn(g)},kf.set(A,g),g)}return{value:A,source:g,stack:Tn(g)}}var Ud=[],_A=0,Es=null,$s=0,pl=[],Nl=0,eA=null,Gl=1,Mu="";function Ol(A,g){Ud[_A++]=$s,Ud[_A++]=Es,Es=A,$s=g}function Kd(A,g,_){pl[Nl++]=Gl,pl[Nl++]=Mu,pl[Nl++]=eA,eA=A;var O=Gl;A=Mu;var N=32-ge(O)-1;O&=~(1<<N),_+=1;var J=32-ge(g)+N;if(30<J){var Me=N-N%5;J=(O&(1<<Me)-1).toString(32),O>>=Me,N-=Me,Gl=1<<32-ge(g)+N|_<<N|O,Mu=J+A}else Gl=1<<J|_<<N|O,Mu=A}function xA(A){A.return!==null&&(Ol(A,1),Kd(A,1,0))}function qh(A){for(;A===Es;)Es=Ud[--_A],Ud[_A]=null,$s=Ud[--_A],Ud[_A]=null;for(;A===eA;)eA=pl[--Nl],pl[Nl]=null,Mu=pl[--Nl],pl[Nl]=null,Gl=pl[--Nl],pl[Nl]=null}function Ld(A,g){pl[Nl++]=Gl,pl[Nl++]=Mu,pl[Nl++]=eA,Gl=g.id,Mu=g.overflow,eA=A}var na=null,Oo=null,ro=!1,MA=null,oo=!1,rh=Error(i(519));function Ka(A){var g=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wc(uu(g,A)),rh}function Yh(A){var g=A.stateNode,_=A.type,O=A.memoizedProps;switch(g[sn]=A,g[Ci]=O,_){case"dialog":Zr("cancel",g),Zr("close",g);break;case"iframe":case"object":case"embed":Zr("load",g);break;case"video":case"audio":for(_=0;_<U0.length;_++)Zr(U0[_],g);break;case"source":Zr("error",g);break;case"img":case"image":case"link":Zr("error",g),Zr("load",g);break;case"details":Zr("toggle",g);break;case"input":Zr("invalid",g),ru(g,O.value,O.defaultValue,O.checked,O.defaultChecked,O.type,O.name,!0);break;case"select":Zr("invalid",g);break;case"textarea":Zr("invalid",g),Ds(g,O.value,O.defaultValue,O.children)}_=O.children,typeof _!="string"&&typeof _!="number"&&typeof _!="bigint"||g.textContent===""+_||O.suppressHydrationWarning===!0||zc(g.textContent,_)?(O.popover!=null&&(Zr("beforetoggle",g),Zr("toggle",g)),O.onScroll!=null&&Zr("scroll",g),O.onScrollEnd!=null&&Zr("scrollend",g),O.onClick!=null&&(g.onclick=Va),g=!0):g=!1,g||Ka(A,!0)}function oh(A){for(na=A.return;na;)switch(na.tag){case 5:case 31:case 13:oo=!1;return;case 27:case 3:oo=!0;return;default:na=na.return}}function sh(A){if(A!==na)return!1;if(!ro)return oh(A),ro=!0,!1;var g=A.tag,_;if((_=g!==3&&g!==27)&&((_=g===5)&&(_=A.type,_=!(_!=="form"&&_!=="button")||ef(A.type,A.memoizedProps)),_=!_),_&&Oo&&Ka(A),oh(A),g===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(317));Oo=fy(A)}else if(g===31){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(317));Oo=fy(A)}else g===27?(g=Oo,cr(A.type)?(A=dy,dy=null,Oo=A):Oo=g):Oo=na?lA(A.stateNode.nextSibling):null;return!0}function qe(){Oo=na=null,ro=!1}function wu(){var A=MA;return A!==null&&(hu===null?hu=A:hu.push.apply(hu,A),MA=null),A}function wc(A){MA===null?MA=[A]:MA.push(A)}var Wl=we(null),Er=null,wA=null;function ah(A,g,_){xe(Wl,g._currentValue),g._currentValue=_}function SA(A){A._currentValue=Wl.current,ze(Wl)}function Su(A,g,_){for(;A!==null;){var O=A.alternate;if((A.childLanes&g)!==g?(A.childLanes|=g,O!==null&&(O.childLanes|=g)):O!==null&&(O.childLanes&g)!==g&&(O.childLanes|=g),A===_)break;A=A.return}}function Ju(A,g,_,O){var N=A.child;for(N!==null&&(N.return=A);N!==null;){var J=N.dependencies;if(J!==null){var Me=N.child;J=J.firstContext;e:for(;J!==null;){var Ye=J;J=N;for(var _t=0;_t<g.length;_t++)if(Ye.context===g[_t]){J.lanes|=_,Ye=J.alternate,Ye!==null&&(Ye.lanes|=_),Su(J.return,_,A),O||(Me=null);break e}J=Ye.next}}else if(N.tag===18){if(Me=N.return,Me===null)throw Error(i(341));Me.lanes|=_,J=Me.alternate,J!==null&&(J.lanes|=_),Su(Me,_,A),Me=null}else Me=N.child;if(Me!==null)Me.return=N;else for(Me=N;Me!==null;){if(Me===A){Me=null;break}if(N=Me.sibling,N!==null){N.return=Me.return,Me=N;break}Me=Me.return}N=Me}}function Za(A,g,_,O){A=null;for(var N=g,J=!1;N!==null;){if(!J){if((N.flags&524288)!==0)J=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var Me=N.alternate;if(Me===null)throw Error(i(387));if(Me=Me.memoizedProps,Me!==null){var Ye=N.type;Ss(N.pendingProps.value,Me.value)||(A!==null?A.push(Ye):A=[Ye])}}else if(N===Bt.current){if(Me=N.alternate,Me===null)throw Error(i(387));Me.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(A!==null?A.push(An):A=[An])}N=N.return}A!==null&&Ju(g,A,_,O),g.flags|=262144}function lh(A){for(A=A.firstContext;A!==null;){if(!Ss(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function uh(A){Er=A,wA=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function ml(A){return Fd(Er,A)}function ec(A,g){return Er===null&&uh(A),Fd(A,g)}function Fd(A,g){var _=g._currentValue;if(g={context:g,memoizedValue:_,next:null},wA===null){if(A===null)throw Error(i(308));wA=g,A.dependencies={lanes:0,firstContext:g},A.flags|=524288}else wA=wA.next=g;return _}var n0=typeof AbortController<"u"?AbortController:function(){var A=[],g=this.signal={aborted:!1,addEventListener:function(_,O){A.push(O)}};this.abort=function(){g.aborted=!0,A.forEach(function(_){return _()})}},Om=n.unstable_scheduleCallback,Bm=n.unstable_NormalPriority,ia={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function la(){return{controller:new n0,data:new Map,refCount:0}}function Xa(A){A.refCount--,A.refCount===0&&Om(Bm,function(){A.controller.abort()})}var Tf=null,tc=0,tA=0,EA=null;function zd(A,g){if(Tf===null){var _=Tf=[];tc=0,tA=Kc(),EA={status:"pending",value:void 0,then:function(O){_.push(O)}}}return tc++,g.then(O1,O1),g}function O1(){if(--tc===0&&Tf!==null){EA!==null&&(EA.status="fulfilled");var A=Tf;Tf=null,tA=0,EA=null;for(var g=0;g<A.length;g++)(0,A[g])()}}function Im(A,g){var _=[],O={status:"pending",value:null,reason:null,then:function(N){_.push(N)}};return A.then(function(){O.status="fulfilled",O.value=g;for(var N=0;N<_.length;N++)(0,_[N])(g)},function(N){for(O.status="rejected",O.reason=N,N=0;N<_.length;N++)(0,_[N])(void 0)}),O}var nc=Ie.S;Ie.S=function(A,g){pC=Yn(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&zd(A,g),nc!==null&&nc(A,g)};var ic=we(null);function Eu(){var A=ic.current;return A!==null?A:Bs.pooledCache}function Xn(A,g){g===null?xe(ic,ic.current):xe(ic,g.pool)}function km(){var A=Eu();return A===null?null:{parent:ia._currentValue,pool:A}}var ch=Error(i(460)),Rf=Error(i(474)),nA=Error(i(542)),Ah={then:function(){}};function Tm(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Or(A,g,_){switch(_=A[_],_===void 0?A.push(g):_!==g&&(g.then(Va,Va),g=_),g.status){case"fulfilled":return g.value;case"rejected":throw A=g.reason,Dm(A),A;default:if(typeof g.status=="string")g.then(Va,Va);else{if(A=Bs,A!==null&&100<A.shellSuspendCounter)throw Error(i(482));A=g,A.status="pending",A.then(function(O){if(g.status==="pending"){var N=g;N.status="fulfilled",N.value=O}},function(O){if(g.status==="pending"){var N=g;N.status="rejected",N.reason=O}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw A=g.reason,Dm(A),A}throw iA=g,ch}}function rc(A){try{var g=A._init;return g(A._payload)}catch(_){throw _!==null&&typeof _=="object"&&typeof _.then=="function"?(iA=_,ch):_}}var iA=null;function Rm(){if(iA===null)throw Error(i(459));var A=iA;return iA=null,A}function Dm(A){if(A===ch||A===nA)throw Error(i(483))}var jd=null,Ou=0;function $h(A){var g=Ou;return Ou+=1,jd===null&&(jd=[]),Or(jd,A,g)}function oc(A,g){g=g.props.ref,A.ref=g!==void 0?g:null}function Ql(A,g){throw g.$$typeof===M?Error(i(525)):(A=Object.prototype.toString.call(g),Error(i(31,A==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":A)))}function Pm(A){function g(Lt,kt){if(A){var qt=Lt.deletions;qt===null?(Lt.deletions=[kt],Lt.flags|=16):qt.push(kt)}}function _(Lt,kt){if(!A)return null;for(;kt!==null;)g(Lt,kt),kt=kt.sibling;return null}function O(Lt){for(var kt=new Map;Lt!==null;)Lt.key!==null?kt.set(Lt.key,Lt):kt.set(Lt.index,Lt),Lt=Lt.sibling;return kt}function N(Lt,kt){return Lt=Xu(Lt,kt),Lt.index=0,Lt.sibling=null,Lt}function J(Lt,kt,qt){return Lt.index=qt,A?(qt=Lt.alternate,qt!==null?(qt=qt.index,qt<kt?(Lt.flags|=67108866,kt):qt):(Lt.flags|=67108866,kt)):(Lt.flags|=1048576,kt)}function Me(Lt){return A&&Lt.alternate===null&&(Lt.flags|=67108866),Lt}function Ye(Lt,kt,qt,dn){return kt===null||kt.tag!==6?(kt=Wh(qt,Lt.mode,dn),kt.return=Lt,kt):(kt=N(kt,qt),kt.return=Lt,kt)}function _t(Lt,kt,qt,dn){var er=qt.type;return er===P?ln(Lt,kt,qt.props.children,dn,qt.key):kt!==null&&(kt.elementType===er||typeof er=="object"&&er!==null&&er.$$typeof===se&&rc(er)===kt.type)?(kt=N(kt,qt.props),oc(kt,qt),kt.return=Lt,kt):(kt=Mp(qt.type,qt.key,qt.props,null,Lt.mode,dn),oc(kt,qt),kt.return=Lt,kt)}function $t(Lt,kt,qt,dn){return kt===null||kt.tag!==4||kt.stateNode.containerInfo!==qt.containerInfo||kt.stateNode.implementation!==qt.implementation?(kt=ih(qt,Lt.mode,dn),kt.return=Lt,kt):(kt=N(kt,qt.children||[]),kt.return=Lt,kt)}function ln(Lt,kt,qt,dn,er){return kt===null||kt.tag!==7?(kt=Pd(qt,Lt.mode,dn,er),kt.return=Lt,kt):(kt=N(kt,qt),kt.return=Lt,kt)}function mn(Lt,kt,qt){if(typeof kt=="string"&&kt!==""||typeof kt=="number"||typeof kt=="bigint")return kt=Wh(""+kt,Lt.mode,qt),kt.return=Lt,kt;if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case x:return qt=Mp(kt.type,kt.key,kt.props,null,Lt.mode,qt),oc(qt,kt),qt.return=Lt,qt;case k:return kt=ih(kt,Lt.mode,qt),kt.return=Lt,kt;case se:return kt=rc(kt),mn(Lt,kt,qt)}if(je(kt)||be(kt))return kt=Pd(kt,Lt.mode,qt,null),kt.return=Lt,kt;if(typeof kt.then=="function")return mn(Lt,$h(kt),qt);if(kt.$$typeof===V)return mn(Lt,ec(Lt,kt),qt);Ql(Lt,kt)}return null}function Xt(Lt,kt,qt,dn){var er=kt!==null?kt.key:null;if(typeof qt=="string"&&qt!==""||typeof qt=="number"||typeof qt=="bigint")return er!==null?null:Ye(Lt,kt,""+qt,dn);if(typeof qt=="object"&&qt!==null){switch(qt.$$typeof){case x:return qt.key===er?_t(Lt,kt,qt,dn):null;case k:return qt.key===er?$t(Lt,kt,qt,dn):null;case se:return qt=rc(qt),Xt(Lt,kt,qt,dn)}if(je(qt)||be(qt))return er!==null?null:ln(Lt,kt,qt,dn,null);if(typeof qt.then=="function")return Xt(Lt,kt,$h(qt),dn);if(qt.$$typeof===V)return Xt(Lt,kt,ec(Lt,qt),dn);Ql(Lt,qt)}return null}function rn(Lt,kt,qt,dn,er){if(typeof dn=="string"&&dn!==""||typeof dn=="number"||typeof dn=="bigint")return Lt=Lt.get(qt)||null,Ye(kt,Lt,""+dn,er);if(typeof dn=="object"&&dn!==null){switch(dn.$$typeof){case x:return Lt=Lt.get(dn.key===null?qt:dn.key)||null,_t(kt,Lt,dn,er);case k:return Lt=Lt.get(dn.key===null?qt:dn.key)||null,$t(kt,Lt,dn,er);case se:return dn=rc(dn),rn(Lt,kt,qt,dn,er)}if(je(dn)||be(dn))return Lt=Lt.get(qt)||null,ln(kt,Lt,dn,er,null);if(typeof dn.then=="function")return rn(Lt,kt,qt,$h(dn),er);if(dn.$$typeof===V)return rn(Lt,kt,qt,ec(kt,dn),er);Ql(kt,dn)}return null}function ki(Lt,kt,qt,dn){for(var er=null,hr=null,Ai=kt,vr=kt=0,_r=null;Ai!==null&&vr<qt.length;vr++){Ai.index>vr?(_r=Ai,Ai=null):_r=Ai.sibling;var lo=Xt(Lt,Ai,qt[vr],dn);if(lo===null){Ai===null&&(Ai=_r);break}A&&Ai&&lo.alternate===null&&g(Lt,Ai),kt=J(lo,kt,vr),hr===null?er=lo:hr.sibling=lo,hr=lo,Ai=_r}if(vr===qt.length)return _(Lt,Ai),ro&&Ol(Lt,vr),er;if(Ai===null){for(;vr<qt.length;vr++)Ai=mn(Lt,qt[vr],dn),Ai!==null&&(kt=J(Ai,kt,vr),hr===null?er=Ai:hr.sibling=Ai,hr=Ai);return ro&&Ol(Lt,vr),er}for(Ai=O(Ai);vr<qt.length;vr++)_r=rn(Ai,Lt,vr,qt[vr],dn),_r!==null&&(A&&_r.alternate!==null&&Ai.delete(_r.key===null?vr:_r.key),kt=J(_r,kt,vr),hr===null?er=_r:hr.sibling=_r,hr=_r);return A&&Ai.forEach(function(fu){return g(Lt,fu)}),ro&&Ol(Lt,vr),er}function ir(Lt,kt,qt,dn){if(qt==null)throw Error(i(151));for(var er=null,hr=null,Ai=kt,vr=kt=0,_r=null,lo=qt.next();Ai!==null&&!lo.done;vr++,lo=qt.next()){Ai.index>vr?(_r=Ai,Ai=null):_r=Ai.sibling;var fu=Xt(Lt,Ai,lo.value,dn);if(fu===null){Ai===null&&(Ai=_r);break}A&&Ai&&fu.alternate===null&&g(Lt,Ai),kt=J(fu,kt,vr),hr===null?er=fu:hr.sibling=fu,hr=fu,Ai=_r}if(lo.done)return _(Lt,Ai),ro&&Ol(Lt,vr),er;if(Ai===null){for(;!lo.done;vr++,lo=qt.next())lo=mn(Lt,lo.value,dn),lo!==null&&(kt=J(lo,kt,vr),hr===null?er=lo:hr.sibling=lo,hr=lo);return ro&&Ol(Lt,vr),er}for(Ai=O(Ai);!lo.done;vr++,lo=qt.next())lo=rn(Ai,Lt,vr,lo.value,dn),lo!==null&&(A&&lo.alternate!==null&&Ai.delete(lo.key===null?vr:lo.key),kt=J(lo,kt,vr),hr===null?er=lo:hr.sibling=lo,hr=lo);return A&&Ai.forEach(function(Z6){return g(Lt,Z6)}),ro&&Ol(Lt,vr),er}function ao(Lt,kt,qt,dn){if(typeof qt=="object"&&qt!==null&&qt.type===P&&qt.key===null&&(qt=qt.props.children),typeof qt=="object"&&qt!==null){switch(qt.$$typeof){case x:e:{for(var er=qt.key;kt!==null;){if(kt.key===er){if(er=qt.type,er===P){if(kt.tag===7){_(Lt,kt.sibling),dn=N(kt,qt.props.children),dn.return=Lt,Lt=dn;break e}}else if(kt.elementType===er||typeof er=="object"&&er!==null&&er.$$typeof===se&&rc(er)===kt.type){_(Lt,kt.sibling),dn=N(kt,qt.props),oc(dn,qt),dn.return=Lt,Lt=dn;break e}_(Lt,kt);break}else g(Lt,kt);kt=kt.sibling}qt.type===P?(dn=Pd(qt.props.children,Lt.mode,dn,qt.key),dn.return=Lt,Lt=dn):(dn=Mp(qt.type,qt.key,qt.props,null,Lt.mode,dn),oc(dn,qt),dn.return=Lt,Lt=dn)}return Me(Lt);case k:e:{for(er=qt.key;kt!==null;){if(kt.key===er)if(kt.tag===4&&kt.stateNode.containerInfo===qt.containerInfo&&kt.stateNode.implementation===qt.implementation){_(Lt,kt.sibling),dn=N(kt,qt.children||[]),dn.return=Lt,Lt=dn;break e}else{_(Lt,kt);break}else g(Lt,kt);kt=kt.sibling}dn=ih(qt,Lt.mode,dn),dn.return=Lt,Lt=dn}return Me(Lt);case se:return qt=rc(qt),ao(Lt,kt,qt,dn)}if(je(qt))return ki(Lt,kt,qt,dn);if(be(qt)){if(er=be(qt),typeof er!="function")throw Error(i(150));return qt=er.call(qt),ir(Lt,kt,qt,dn)}if(typeof qt.then=="function")return ao(Lt,kt,$h(qt),dn);if(qt.$$typeof===V)return ao(Lt,kt,ec(Lt,qt),dn);Ql(Lt,qt)}return typeof qt=="string"&&qt!==""||typeof qt=="number"||typeof qt=="bigint"?(qt=""+qt,kt!==null&&kt.tag===6?(_(Lt,kt.sibling),dn=N(kt,qt),dn.return=Lt,Lt=dn):(_(Lt,kt),dn=Wh(qt,Lt.mode,dn),dn.return=Lt,Lt=dn),Me(Lt)):_(Lt,kt)}return function(Lt,kt,qt,dn){try{Ou=0;var er=ao(Lt,kt,qt,dn);return jd=null,er}catch(Ai){if(Ai===ch||Ai===nA)throw Ai;var hr=fl(29,Ai,null,Lt.mode);return hr.lanes=dn,hr.return=Lt,hr}finally{}}}var hh=Pm(!0),Df=Pm(!1),Ja=!1;function Qr(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Um(A,g){A=A.updateQueue,g.updateQueue===A&&(g.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function rA(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function Bu(A,g,_){var O=A.updateQueue;if(O===null)return null;if(O=O.shared,(Yo&2)!==0){var N=O.pending;return N===null?g.next=g:(g.next=N.next,N.next=g),O.pending=g,g=br(A),xp(A,null,_),g}return Mc(A,O,g,_),br(A)}function Nd(A,g,_){if(g=g.updateQueue,g!==null&&(g=g.shared,(_&4194048)!==0)){var O=g.lanes;O&=A.pendingLanes,_|=O,g.lanes=_,oi(A,_)}}function Pf(A,g){var _=A.updateQueue,O=A.alternate;if(O!==null&&(O=O.updateQueue,_===O)){var N=null,J=null;if(_=_.firstBaseUpdate,_!==null){do{var Me={lane:_.lane,tag:_.tag,payload:_.payload,callback:null,next:null};J===null?N=J=Me:J=J.next=Me,_=_.next}while(_!==null);J===null?N=J=g:J=J.next=g}else N=J=g;_={baseState:O.baseState,firstBaseUpdate:N,lastBaseUpdate:J,shared:O.shared,callbacks:O.callbacks},A.updateQueue=_;return}A=_.lastBaseUpdate,A===null?_.firstBaseUpdate=g:A.next=g,_.lastBaseUpdate=g}var La=!1;function Gd(){if(La){var A=EA;if(A!==null)throw A}}function cu(A,g,_,O){La=!1;var N=A.updateQueue;Ja=!1;var J=N.firstBaseUpdate,Me=N.lastBaseUpdate,Ye=N.shared.pending;if(Ye!==null){N.shared.pending=null;var _t=Ye,$t=_t.next;_t.next=null,Me===null?J=$t:Me.next=$t,Me=_t;var ln=A.alternate;ln!==null&&(ln=ln.updateQueue,Ye=ln.lastBaseUpdate,Ye!==Me&&(Ye===null?ln.firstBaseUpdate=$t:Ye.next=$t,ln.lastBaseUpdate=_t))}if(J!==null){var mn=N.baseState;Me=0,ln=$t=_t=null,Ye=J;do{var Xt=Ye.lane&-536870913,rn=Xt!==Ye.lane;if(rn?(_o&Xt)===Xt:(O&Xt)===Xt){Xt!==0&&Xt===tA&&(La=!0),ln!==null&&(ln=ln.next={lane:0,tag:Ye.tag,payload:Ye.payload,callback:null,next:null});e:{var ki=A,ir=Ye;Xt=g;var ao=_;switch(ir.tag){case 1:if(ki=ir.payload,typeof ki=="function"){mn=ki.call(ao,mn,Xt);break e}mn=ki;break e;case 3:ki.flags=ki.flags&-65537|128;case 0:if(ki=ir.payload,Xt=typeof ki=="function"?ki.call(ao,mn,Xt):ki,Xt==null)break e;mn=y({},mn,Xt);break e;case 2:Ja=!0}}Xt=Ye.callback,Xt!==null&&(A.flags|=64,rn&&(A.flags|=8192),rn=N.callbacks,rn===null?N.callbacks=[Xt]:rn.push(Xt))}else rn={lane:Xt,tag:Ye.tag,payload:Ye.payload,callback:Ye.callback,next:null},ln===null?($t=ln=rn,_t=mn):ln=ln.next=rn,Me|=Xt;if(Ye=Ye.next,Ye===null){if(Ye=N.shared.pending,Ye===null)break;rn=Ye,Ye=rn.next,rn.next=null,N.lastBaseUpdate=rn,N.shared.pending=null}}while(!0);ln===null&&(_t=mn),N.baseState=_t,N.firstBaseUpdate=$t,N.lastBaseUpdate=ln,J===null&&(N.shared.lanes=0),Hd|=Me,A.lanes=Me,A.memoizedState=mn}}function Iu(A,g){if(typeof A!="function")throw Error(i(191,A));A.call(g)}function ci(A,g){var _=A.callbacks;if(_!==null)for(A.callbacks=null,A=0;A<_.length;A++)Iu(_[A],g)}var fi=we(null),ku=we(0);function Km(A,g){A=Mh,xe(ku,A),xe(fi,g),Mh=A|g.baseLanes}function Fa(){xe(ku,Mh),xe(fi,fi.current)}function za(){Mh=ku.current,ze(fi),ze(ku)}var Tu=we(null),ua=null;function Ru(A){var g=A.alternate;xe(Us,Us.current&1),xe(Tu,A),ua===null&&(g===null||fi.current!==null||g.memoizedState!==null)&&(ua=A)}function OA(A){xe(Us,Us.current),xe(Tu,A),ua===null&&(ua=A)}function hs(A){A.tag===22?(xe(Us,Us.current),xe(Tu,A),ua===null&&(ua=A)):bo()}function bo(){xe(Us,Us.current),xe(Tu,Tu.current)}function Bl(A){ze(Tu),ua===A&&(ua=null),ze(Us)}var Us=we(0);function BA(A){for(var g=A;g!==null;){if(g.tag===13){var _=g.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||tf(_)||_a(_)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===A)break;for(;g.sibling===null;){if(g.return===null||g.return===A)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var el=0,Cr=null,Po=null,qo=null,Wd=!1,Vh=!1,IA=!1,Uf=0,I=0,l=null,p=0;function C(){throw Error(i(321))}function E(A,g){if(g===null)return!1;for(var _=0;_<g.length&&_<A.length;_++)if(!Ss(A[_],g[_]))return!1;return!0}function T(A,g,_,O,N,J){return el=J,Cr=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Ie.H=A===null||A.memoizedState===null?I1:r0,IA=!1,J=_(O,N),IA=!1,Vh&&(J=Q(g,_,O,N)),U(A),J}function U(A){Ie.H=$d;var g=Po!==null&&Po.next!==null;if(el=0,qo=Po=Cr=null,Wd=!1,I=0,l=null,g)throw Error(i(300));A===null||Os||(A=A.dependencies,A!==null&&lh(A)&&(Os=!0))}function Q(A,g,_,O){Cr=A;var N=0;do{if(Vh&&(l=null),I=0,Vh=!1,25<=N)throw Error(i(301));if(N+=1,qo=Po=null,A.updateQueue!=null){var J=A.updateQueue;J.lastEffect=null,J.events=null,J.stores=null,J.memoCache!=null&&(J.memoCache.index=0)}Ie.H=bh,J=g(_,O)}while(Vh);return J}function Z(){var A=Ie.H,g=A.useState()[0];return g=typeof g.then=="function"?Ze(g):g,A=A.useState()[0],(Po!==null?Po.memoizedState:null)!==A&&(Cr.flags|=1024),g}function ae(){var A=Uf!==0;return Uf=0,A}function ce(A,g,_){g.updateQueue=A.updateQueue,g.flags&=-2053,A.lanes&=~_}function Ce(A){if(Wd){for(A=A.memoizedState;A!==null;){var g=A.queue;g!==null&&(g.pending=null),A=A.next}Wd=!1}el=0,qo=Po=Cr=null,Vh=!1,I=Uf=0,l=null}function fe(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qo===null?Cr.memoizedState=qo=A:qo=qo.next=A,qo}function Re(){if(Po===null){var A=Cr.alternate;A=A!==null?A.memoizedState:null}else A=Po.next;var g=qo===null?Cr.memoizedState:qo.next;if(g!==null)qo=g,Po=A;else{if(A===null)throw Cr.alternate===null?Error(i(467)):Error(i(310));Po=A,A={memoizedState:Po.memoizedState,baseState:Po.baseState,baseQueue:Po.baseQueue,queue:Po.queue,next:null},qo===null?Cr.memoizedState=qo=A:qo=qo.next=A}return qo}function Ge(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ze(A){var g=I;return I+=1,l===null&&(l=[]),A=Or(l,A,g),g=Cr,(qo===null?g.memoizedState:qo.next)===null&&(g=g.alternate,Ie.H=g===null||g.memoizedState===null?I1:r0),A}function Xe(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return Ze(A);if(A.$$typeof===V)return ml(A)}throw Error(i(438,String(A)))}function tt(A){var g=null,_=Cr.updateQueue;if(_!==null&&(g=_.memoCache),g==null){var O=Cr.alternate;O!==null&&(O=O.updateQueue,O!==null&&(O=O.memoCache,O!=null&&(g={data:O.data.map(function(N){return N.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),_===null&&(_=Ge(),Cr.updateQueue=_),_.memoCache=g,_=g.data[g.index],_===void 0)for(_=g.data[g.index]=Array(A),O=0;O<A;O++)_[O]=me;return g.index++,_}function ot(A,g){return typeof g=="function"?g(A):g}function nt(A){var g=Re();return ct(g,Po,A)}function ct(A,g,_){var O=A.queue;if(O===null)throw Error(i(311));O.lastRenderedReducer=_;var N=A.baseQueue,J=O.pending;if(J!==null){if(N!==null){var Me=N.next;N.next=J.next,J.next=Me}g.baseQueue=N=J,O.pending=null}if(J=A.baseState,N===null)A.memoizedState=J;else{g=N.next;var Ye=Me=null,_t=null,$t=g,ln=!1;do{var mn=$t.lane&-536870913;if(mn!==$t.lane?(_o&mn)===mn:(el&mn)===mn){var Xt=$t.revertLane;if(Xt===0)_t!==null&&(_t=_t.next={lane:0,revertLane:0,gesture:null,action:$t.action,hasEagerState:$t.hasEagerState,eagerState:$t.eagerState,next:null}),mn===tA&&(ln=!0);else if((el&Xt)===Xt){$t=$t.next,Xt===tA&&(ln=!0);continue}else mn={lane:0,revertLane:$t.revertLane,gesture:null,action:$t.action,hasEagerState:$t.hasEagerState,eagerState:$t.eagerState,next:null},_t===null?(Ye=_t=mn,Me=J):_t=_t.next=mn,Cr.lanes|=Xt,Hd|=Xt;mn=$t.action,IA&&_(J,mn),J=$t.hasEagerState?$t.eagerState:_(J,mn)}else Xt={lane:mn,revertLane:$t.revertLane,gesture:$t.gesture,action:$t.action,hasEagerState:$t.hasEagerState,eagerState:$t.eagerState,next:null},_t===null?(Ye=_t=Xt,Me=J):_t=_t.next=Xt,Cr.lanes|=mn,Hd|=mn;$t=$t.next}while($t!==null&&$t!==g);if(_t===null?Me=J:_t.next=Ye,!Ss(J,A.memoizedState)&&(Os=!0,ln&&(_=EA,_!==null)))throw _;A.memoizedState=J,A.baseState=Me,A.baseQueue=_t,O.lastRenderedState=J}return N===null&&(O.lanes=0),[A.memoizedState,O.dispatch]}function gt(A){var g=Re(),_=g.queue;if(_===null)throw Error(i(311));_.lastRenderedReducer=A;var O=_.dispatch,N=_.pending,J=g.memoizedState;if(N!==null){_.pending=null;var Me=N=N.next;do J=A(J,Me.action),Me=Me.next;while(Me!==N);Ss(J,g.memoizedState)||(Os=!0),g.memoizedState=J,g.baseQueue===null&&(g.baseState=J),_.lastRenderedState=J}return[J,O]}function xt(A,g,_){var O=Cr,N=Re(),J=ro;if(J){if(_===void 0)throw Error(i(407));_=_()}else _=g();var Me=!Ss((Po||N).memoizedState,_);if(Me&&(N.memoizedState=_,Os=!0),N=N.queue,Sc(Qt.bind(null,O,N,A),[A]),N.getSnapshot!==g||Me||qo!==null&&qo.memoizedState.tag&1){if(O.flags|=2048,so(9,{destroy:void 0},Et.bind(null,O,N,_,g),null),Bs===null)throw Error(i(349));J||(el&127)!==0||ht(O,g,_)}return _}function ht(A,g,_){A.flags|=16384,A={getSnapshot:g,value:_},g=Cr.updateQueue,g===null?(g=Ge(),Cr.updateQueue=g,g.stores=[A]):(_=g.stores,_===null?g.stores=[A]:_.push(A))}function Et(A,g,_,O){g.value=_,g.getSnapshot=O,Kt(g)&&Nt(A)}function Qt(A,g,_){return _(function(){Kt(g)&&Nt(A)})}function Kt(A){var g=A.getSnapshot;A=A.value;try{var _=g();return!Ss(A,_)}catch{return!0}}function Nt(A){var g=Jc(A,2);g!==null&&Dc(g,A,2)}function Wt(A){var g=fe();if(typeof A=="function"){var _=A;if(A=_(),IA){lt(!0);try{_()}finally{lt(!1)}}}return g.memoizedState=g.baseState=A,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ot,lastRenderedState:A},g}function In(A,g,_,O){return A.baseState=_,ct(A,Po,typeof O=="function"?O:ot)}function kn(A,g,_,O,N){if(Zh(A))throw Error(i(485));if(A=g.action,A!==null){var J={payload:N,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Me){J.listeners.push(Me)}};Ie.T!==null?_(!0):J.isTransition=!1,O(J),_=g.pending,_===null?(J.next=g.pending=J,cn(g,J)):(J.next=_.next,g.pending=_.next=J)}}function cn(A,g){var _=g.action,O=g.payload,N=A.state;if(g.isTransition){var J=Ie.T,Me={};Ie.T=Me;try{var Ye=_(N,O),_t=Ie.S;_t!==null&&_t(Me,Ye),Qn(A,g,Ye)}catch($t){mo(A,g,$t)}finally{J!==null&&Me.types!==null&&(J.types=Me.types),Ie.T=J}}else try{J=_(N,O),Qn(A,g,J)}catch($t){mo(A,g,$t)}}function Qn(A,g,_){_!==null&&typeof _=="object"&&typeof _.then=="function"?_.then(function(O){Xi(A,g,O)},function(O){return mo(A,g,O)}):Xi(A,g,_)}function Xi(A,g,_){g.status="fulfilled",g.value=_,os(g),A.state=_,g=A.pending,g!==null&&(_=g.next,_===g?A.pending=null:(_=_.next,g.next=_,cn(A,_)))}function mo(A,g,_){var O=A.pending;if(A.pending=null,O!==null){O=O.next;do g.status="rejected",g.reason=_,os(g),g=g.next;while(g!==O)}A.action=null}function os(A){A=A.listeners;for(var g=0;g<A.length;g++)(0,A[g])()}function Uo(A,g){return g}function ds(A,g){if(ro){var _=Bs.formState;if(_!==null){e:{var O=Cr;if(ro){if(Oo){t:{for(var N=Oo,J=oo;N.nodeType!==8;){if(!J){N=null;break t}if(N=lA(N.nextSibling),N===null){N=null;break t}}J=N.data,N=J==="F!"||J==="F"?N:null}if(N){Oo=lA(N.nextSibling),O=N.data==="F!";break e}}Ka(O)}O=!1}O&&(g=_[0])}}return _=fe(),_.memoizedState=_.baseState=g,O={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:g},_.queue=O,_=oA.bind(null,Cr,O),O.dispatch=_,O=Wt(!1),J=Hh.bind(null,Cr,!1,O.queue),O=fe(),N={state:g,dispatch:null,action:A,pending:null},O.queue=N,_=kn.bind(null,Cr,N,J,_),N.dispatch=_,O.memoizedState=A,[g,_,!1]}function Jo(A){var g=Re();return ya(g,Po,A)}function ya(A,g,_){if(g=ct(A,g,Uo)[0],A=nt(ot)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var O=Ze(g)}catch(Me){throw Me===ch?nA:Me}else O=g;g=Re();var N=g.queue,J=N.dispatch;return _!==g.memoizedState&&(Cr.flags|=2048,so(9,{destroy:void 0},ss.bind(null,N,_),null)),[O,J,A]}function ss(A,g){A.action=g}function Bo(A){var g=Re(),_=Po;if(_!==null)return ya(g,_,A);Re(),g=g.memoizedState,_=Re();var O=_.queue.dispatch;return _.memoizedState=A,[g,O,!1]}function so(A,g,_,O){return A={tag:A,create:_,deps:O,inst:g,next:null},g=Cr.updateQueue,g===null&&(g=Ge(),Cr.updateQueue=g),_=g.lastEffect,_===null?g.lastEffect=A.next=A:(O=_.next,_.next=A,A.next=O,g.lastEffect=A),A}function Br(){return Re().memoizedState}function fs(A,g,_,O){var N=fe();Cr.flags|=A,N.memoizedState=so(1|g,{destroy:void 0},_,O===void 0?null:O)}function sc(A,g,_,O){var N=Re();O=O===void 0?null:O;var J=N.memoizedState.inst;Po!==null&&O!==null&&E(O,Po.memoizedState.deps)?N.memoizedState=so(g,J,_,O):(Cr.flags|=A,N.memoizedState=so(1|g,J,_,O))}function dh(A,g){fs(8390656,8,A,g)}function Sc(A,g){sc(2048,8,A,g)}function Qd(A){Cr.flags|=4;var g=Cr.updateQueue;if(g===null)g=Ge(),Cr.updateQueue=g,g.events=[A];else{var _=g.events;_===null?g.events=[A]:_.push(A)}}function Kf(A){var g=Re().memoizedState;return Qd({ref:g,nextImpl:A}),function(){if((Yo&2)!==0)throw Error(i(440));return g.impl.apply(void 0,arguments)}}function fh(A,g){return sc(4,2,A,g)}function ph(A,g){return sc(4,4,A,g)}function Au(A,g){if(typeof g=="function"){A=A();var _=g(A);return function(){typeof _=="function"?_():g(null)}}if(g!=null)return A=A(),g.current=A,function(){g.current=null}}function mh(A,g,_){_=_!=null?_.concat([A]):null,sc(4,4,Au.bind(null,g,A),_)}function Ec(){}function kA(A,g){var _=Re();g=g===void 0?null:g;var O=_.memoizedState;return g!==null&&E(g,O[1])?O[0]:(_.memoizedState=[A,g],A)}function Co(A,g){var _=Re();g=g===void 0?null:g;var O=_.memoizedState;if(g!==null&&E(g,O[1]))return O[0];if(O=A(),IA){lt(!0);try{A()}finally{lt(!1)}}return _.memoizedState=[O,g],O}function Ko(A,g,_){return _===void 0||(el&1073741824)!==0&&(_o&261930)===0?A.memoizedState=g:(A.memoizedState=_,A=mC(),Cr.lanes|=A,Hd|=A,_)}function ql(A,g,_,O){return Ss(_,g)?_:fi.current!==null?(A=Ko(A,_,O),Ss(A,g)||(Os=!0),A):(el&42)===0||(el&1073741824)!==0&&(_o&261930)===0?(Os=!0,A.memoizedState=_):(A=mC(),Cr.lanes|=A,Hd|=A,g)}function ps(A,g,_,O,N){var J=Qe.p;Qe.p=J!==0&&8>J?J:8;var Me=Ie.T,Ye={};Ie.T=Ye,Hh(A,!1,g,_);try{var _t=N(),$t=Ie.S;if($t!==null&&$t(Ye,_t),_t!==null&&typeof _t=="object"&&typeof _t.then=="function"){var ln=Im(_t,O);yh(A,g,ln,Rc(A))}else yh(A,g,O,Rc(A))}catch(mn){yh(A,g,{then:function(){},status:"rejected",reason:mn},Rc())}finally{Qe.p=J,Me!==null&&Ye.types!==null&&(Me.types=Ye.types),Ie.T=Me}}function qd(){}function gh(A,g,_,O){if(A.tag!==5)throw Error(i(476));var N=Lm(A).queue;ps(A,N,g,et,_===null?qd:function(){return i0(A),_(O)})}function Lm(A){var g=A.memoizedState;if(g!==null)return g;g={memoizedState:et,baseState:et,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ot,lastRenderedState:et},next:null};var _={};return g.next={memoizedState:_,baseState:_,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ot,lastRenderedState:_},next:null},A.memoizedState=g,A=A.alternate,A!==null&&(A.memoizedState=g),g}function i0(A){var g=Lm(A);g.next===null&&(g=A.alternate.memoizedState),yh(A,g.next.queue,{},Rc())}function wp(){return ml(An)}function Yd(){return Re().memoizedState}function tl(){return Re().memoizedState}function Du(A){for(var g=A.return;g!==null;){switch(g.tag){case 24:case 3:var _=Rc();A=rA(_);var O=Bu(g,A,_);O!==null&&(Dc(O,g,_),Nd(O,g,_)),g={cache:la()},A.payload=g;return}g=g.return}}function Oc(A,g,_){var O=Rc();_={lane:O,revertLane:0,gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null},Zh(A)?vh(g,_):(_=Xc(A,g,_,O),_!==null&&(Dc(_,A,O),B1(_,g,O)))}function oA(A,g,_){var O=Rc();yh(A,g,_,O)}function yh(A,g,_,O){var N={lane:O,revertLane:0,gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null};if(Zh(A))vh(g,N);else{var J=A.alternate;if(A.lanes===0&&(J===null||J.lanes===0)&&(J=g.lastRenderedReducer,J!==null))try{var Me=g.lastRenderedState,Ye=J(Me,_);if(N.hasEagerState=!0,N.eagerState=Ye,Ss(Ye,Me))return Mc(A,g,N,0),Bs===null&&xc(),!1}catch{}finally{}if(_=Xc(A,g,N,O),_!==null)return Dc(_,A,O),B1(_,g,O),!0}return!1}function Hh(A,g,_,O){if(O={lane:2,revertLane:Kc(),gesture:null,action:O,hasEagerState:!1,eagerState:null,next:null},Zh(A)){if(g)throw Error(i(479))}else g=Xc(A,_,O,2),g!==null&&Dc(g,A,2)}function Zh(A){var g=A.alternate;return A===Cr||g!==null&&g===Cr}function vh(A,g){Vh=Wd=!0;var _=A.pending;_===null?g.next=g:(g.next=_.next,_.next=g),A.pending=g}function B1(A,g,_){if((_&4194048)!==0){var O=g.lanes;O&=A.pendingLanes,_|=O,g.lanes=_,oi(A,_)}}var $d={readContext:ml,use:Xe,useCallback:C,useContext:C,useEffect:C,useImperativeHandle:C,useLayoutEffect:C,useInsertionEffect:C,useMemo:C,useReducer:C,useRef:C,useState:C,useDebugValue:C,useDeferredValue:C,useTransition:C,useSyncExternalStore:C,useId:C,useHostTransitionStatus:C,useFormState:C,useActionState:C,useOptimistic:C,useMemoCache:C,useCacheRefresh:C};$d.useEffectEvent=C;var I1={readContext:ml,use:Xe,useCallback:function(A,g){return fe().memoizedState=[A,g===void 0?null:g],A},useContext:ml,useEffect:dh,useImperativeHandle:function(A,g,_){_=_!=null?_.concat([A]):null,fs(4194308,4,Au.bind(null,g,A),_)},useLayoutEffect:function(A,g){return fs(4194308,4,A,g)},useInsertionEffect:function(A,g){fs(4,2,A,g)},useMemo:function(A,g){var _=fe();g=g===void 0?null:g;var O=A();if(IA){lt(!0);try{A()}finally{lt(!1)}}return _.memoizedState=[O,g],O},useReducer:function(A,g,_){var O=fe();if(_!==void 0){var N=_(g);if(IA){lt(!0);try{_(g)}finally{lt(!1)}}}else N=g;return O.memoizedState=O.baseState=N,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:N},O.queue=A,A=A.dispatch=Oc.bind(null,Cr,A),[O.memoizedState,A]},useRef:function(A){var g=fe();return A={current:A},g.memoizedState=A},useState:function(A){A=Wt(A);var g=A.queue,_=oA.bind(null,Cr,g);return g.dispatch=_,[A.memoizedState,_]},useDebugValue:Ec,useDeferredValue:function(A,g){var _=fe();return Ko(_,A,g)},useTransition:function(){var A=Wt(!1);return A=ps.bind(null,Cr,A.queue,!0,!1),fe().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,g,_){var O=Cr,N=fe();if(ro){if(_===void 0)throw Error(i(407));_=_()}else{if(_=g(),Bs===null)throw Error(i(349));(_o&127)!==0||ht(O,g,_)}N.memoizedState=_;var J={value:_,getSnapshot:g};return N.queue=J,dh(Qt.bind(null,O,J,A),[A]),O.flags|=2048,so(9,{destroy:void 0},Et.bind(null,O,J,_,g),null),_},useId:function(){var A=fe(),g=Bs.identifierPrefix;if(ro){var _=Mu,O=Gl;_=(O&~(1<<32-ge(O)-1)).toString(32)+_,g="_"+g+"R_"+_,_=Uf++,0<_&&(g+="H"+_.toString(32)),g+="_"}else _=p++,g="_"+g+"r_"+_.toString(32)+"_";return A.memoizedState=g},useHostTransitionStatus:wp,useFormState:ds,useActionState:ds,useOptimistic:function(A){var g=fe();g.memoizedState=g.baseState=A;var _={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=_,g=Hh.bind(null,Cr,!0,_),_.dispatch=g,[A,g]},useMemoCache:tt,useCacheRefresh:function(){return fe().memoizedState=Du.bind(null,Cr)},useEffectEvent:function(A){var g=fe(),_={impl:A};return g.memoizedState=_,function(){if((Yo&2)!==0)throw Error(i(440));return _.impl.apply(void 0,arguments)}}},r0={readContext:ml,use:Xe,useCallback:kA,useContext:ml,useEffect:Sc,useImperativeHandle:mh,useInsertionEffect:fh,useLayoutEffect:ph,useMemo:Co,useReducer:nt,useRef:Br,useState:function(){return nt(ot)},useDebugValue:Ec,useDeferredValue:function(A,g){var _=Re();return ql(_,Po.memoizedState,A,g)},useTransition:function(){var A=nt(ot)[0],g=Re().memoizedState;return[typeof A=="boolean"?A:Ze(A),g]},useSyncExternalStore:xt,useId:Yd,useHostTransitionStatus:wp,useFormState:Jo,useActionState:Jo,useOptimistic:function(A,g){var _=Re();return In(_,Po,A,g)},useMemoCache:tt,useCacheRefresh:tl};r0.useEffectEvent=Kf;var bh={readContext:ml,use:Xe,useCallback:kA,useContext:ml,useEffect:Sc,useImperativeHandle:mh,useInsertionEffect:fh,useLayoutEffect:ph,useMemo:Co,useReducer:gt,useRef:Br,useState:function(){return gt(ot)},useDebugValue:Ec,useDeferredValue:function(A,g){var _=Re();return Po===null?Ko(_,A,g):ql(_,Po.memoizedState,A,g)},useTransition:function(){var A=gt(ot)[0],g=Re().memoizedState;return[typeof A=="boolean"?A:Ze(A),g]},useSyncExternalStore:xt,useId:Yd,useHostTransitionStatus:wp,useFormState:Bo,useActionState:Bo,useOptimistic:function(A,g){var _=Re();return Po!==null?In(_,Po,A,g):(_.baseState=A,[A,_.queue.dispatch])},useMemoCache:tt,useCacheRefresh:tl};bh.useEffectEvent=Kf;function Xh(A,g,_,O){g=A.memoizedState,_=_(O,g),_=_==null?g:y({},g,_),A.memoizedState=_,A.lanes===0&&(A.updateQueue.baseState=_)}var Fm={enqueueSetState:function(A,g,_){A=A._reactInternals;var O=Rc(),N=rA(O);N.payload=g,_!=null&&(N.callback=_),g=Bu(A,N,O),g!==null&&(Dc(g,A,O),Nd(g,A,O))},enqueueReplaceState:function(A,g,_){A=A._reactInternals;var O=Rc(),N=rA(O);N.tag=1,N.payload=g,_!=null&&(N.callback=_),g=Bu(A,N,O),g!==null&&(Dc(g,A,O),Nd(g,A,O))},enqueueForceUpdate:function(A,g){A=A._reactInternals;var _=Rc(),O=rA(_);O.tag=2,g!=null&&(O.callback=g),g=Bu(A,O,_),g!==null&&(Dc(g,A,_),Nd(g,A,_))}};function oC(A,g,_,O,N,J,Me){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(O,J,Me):g.prototype&&g.prototype.isPureReactComponent?!xu(_,O)||!xu(N,J):!0}function o0(A,g,_,O){A=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(_,O),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(_,O),g.state!==A&&Fm.enqueueReplaceState(g,g.state,null)}function Pu(A,g){var _=g;if("ref"in g){_={};for(var O in g)O!=="ref"&&(_[O]=g[O])}if(A=A.defaultProps){_===g&&(_=y({},_));for(var N in A)_[N]===void 0&&(_[N]=A[N])}return _}function zm(A){Dd(A)}function k1(A){console.error(A)}function sC(A){Dd(A)}function Sp(A,g){try{var _=A.onUncaughtError;_(g.value,{componentStack:g.stack})}catch(O){setTimeout(function(){throw O})}}function aC(A,g,_){try{var O=A.onCaughtError;O(_.value,{componentStack:_.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function s0(A,g,_){return _=rA(_),_.tag=3,_.payload={element:null},_.callback=function(){Sp(A,g)},_}function Ch(A){return A=rA(A),A.tag=3,A}function a0(A,g,_,O){var N=_.type.getDerivedStateFromError;if(typeof N=="function"){var J=O.value;A.payload=function(){return N(J)},A.callback=function(){aC(g,_,O)}}var Me=_.stateNode;Me!==null&&typeof Me.componentDidCatch=="function"&&(A.callback=function(){aC(g,_,O),typeof N!="function"&&(Xd===null?Xd=new Set([this]):Xd.add(this));var Ye=O.stack;this.componentDidCatch(O.value,{componentStack:Ye!==null?Ye:""})})}function Lf(A,g,_,O,N){if(_.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){if(g=_.alternate,g!==null&&Za(g,_,N,!0),_=Tu.current,_!==null){switch(_.tag){case 31:case 13:return ua===null?Ym():_.alternate===null&&va===0&&(va=3),_.flags&=-257,_.flags|=65536,_.lanes=N,O===Ah?_.flags|=16384:(g=_.updateQueue,g===null?_.updateQueue=new Set([O]):g.add(O),Tv(A,O,N)),!1;case 22:return _.flags|=65536,O===Ah?_.flags|=16384:(g=_.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([O])},_.updateQueue=g):(_=g.retryQueue,_===null?g.retryQueue=new Set([O]):_.add(O)),Tv(A,O,N)),!1}throw Error(i(435,_.tag))}return Tv(A,O,N),Ym(),!1}if(ro)return g=Tu.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=N,O!==rh&&(A=Error(i(422),{cause:O}),wc(uu(A,_)))):(O!==rh&&(g=Error(i(423),{cause:O}),wc(uu(g,_))),A=A.current.alternate,A.flags|=65536,N&=-N,A.lanes|=N,O=uu(O,_),N=s0(A.stateNode,O,N),Pf(A,N),va!==4&&(va=2)),!1;var J=Error(i(520),{cause:O});if(J=uu(J,_),w0===null?w0=[J]:w0.push(J),va!==4&&(va=2),g===null)return!0;O=uu(O,_),_=g;do{switch(_.tag){case 3:return _.flags|=65536,A=N&-N,_.lanes|=A,A=s0(_.stateNode,O,A),Pf(_,A),!1;case 1:if(g=_.type,J=_.stateNode,(_.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(Xd===null||!Xd.has(J))))return _.flags|=65536,N&=-N,_.lanes|=N,N=Ch(N),a0(N,A,_,O),Pf(_,N),!1}_=_.return}while(_!==null);return!1}var l0=Error(i(461)),Os=!1;function ra(A,g,_,O){g.child=A===null?Df(g,null,_,O):hh(g,A.child,_,O)}function Ji(A,g,_,O,N){_=_.render;var J=g.ref;if("ref"in O){var Me={};for(var Ye in O)Ye!=="ref"&&(Me[Ye]=O[Ye])}else Me=O;return uh(g),O=T(A,g,_,Me,J,N),Ye=ae(),A!==null&&!Os?(ce(A,g,N),Jh(A,g,N)):(ro&&Ye&&xA(g),g.flags|=1,ra(A,g,O,N),g.child)}function u0(A,g,_,O,N){if(A===null){var J=_.type;return typeof J=="function"&&!jl(J)&&J.defaultProps===void 0&&_.compare===null?(g.tag=15,g.type=J,T1(A,g,J,O,N)):(A=Mp(_.type,null,O,g,g.mode,N),A.ref=g.ref,A.return=g,g.child=A)}if(J=A.child,!f0(A,N)){var Me=J.memoizedProps;if(_=_.compare,_=_!==null?_:xu,_(Me,O)&&A.ref===g.ref)return Jh(A,g,N)}return g.flags|=1,A=Xu(J,O),A.ref=g.ref,A.return=g,g.child=A}function T1(A,g,_,O,N){if(A!==null){var J=A.memoizedProps;if(xu(J,O)&&A.ref===g.ref)if(Os=!1,g.pendingProps=O=J,f0(A,N))(A.flags&131072)!==0&&(Os=!0);else return g.lanes=A.lanes,Jh(A,g,N)}return D1(A,g,_,O,N)}function Ff(A,g,_,O){var N=O.children,J=A!==null?A.memoizedState:null;if(A===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),O.mode==="hidden"){if((g.flags&128)!==0){if(J=J!==null?J.baseLanes|_:_,A!==null){for(O=g.child=A.child,N=0;O!==null;)N=N|O.lanes|O.childLanes,O=O.sibling;O=N&~J}else O=0,g.child=null;return A0(A,g,J,_,O)}if((_&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},A!==null&&Xn(g,J!==null?J.cachePool:null),J!==null?Km(g,J):Fa(),hs(g);else return O=g.lanes=536870912,A0(A,g,J!==null?J.baseLanes|_:_,_,O)}else J!==null?(Xn(g,J.cachePool),Km(g,J),bo(),g.memoizedState=null):(A!==null&&Xn(g,null),Fa(),bo());return ra(A,g,N,_),g.child}function c0(A,g){return A!==null&&A.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function A0(A,g,_,O,N){var J=Eu();return J=J===null?null:{parent:ia._currentValue,pool:J},g.memoizedState={baseLanes:_,cachePool:J},A!==null&&Xn(g,null),Fa(),hs(g),A!==null&&Za(A,g,O,!0),g.childLanes=N,null}function Ep(A,g){return g=d0({mode:g.mode,children:g.children},A.mode),g.ref=A.ref,A.child=g,g.return=A,g}function Yl(A,g,_){return hh(g,A.child,null,_),A=Ep(g,g.pendingProps),A.flags|=2,Bl(g),g.memoizedState=null,A}function lC(A,g,_){var O=g.pendingProps,N=(g.flags&128)!==0;if(g.flags&=-129,A===null){if(ro){if(O.mode==="hidden")return A=Ep(g,O),g.lanes=536870912,c0(null,A);if(OA(g),(A=Oo)?(A=OC(A,oo),A=A!==null&&A.data==="&"?A:null,A!==null&&(g.memoizedState={dehydrated:A,treeContext:eA!==null?{id:Gl,overflow:Mu}:null,retryLane:536870912,hydrationErrors:null},_=Qh(A),_.return=g,g.child=_,na=g,Oo=null)):A=null,A===null)throw Ka(g);return g.lanes=536870912,null}return Ep(g,O)}var J=A.memoizedState;if(J!==null){var Me=J.dehydrated;if(OA(g),N)if(g.flags&256)g.flags&=-257,g=Yl(A,g,_);else if(g.memoizedState!==null)g.child=A.child,g.flags|=128,g=null;else throw Error(i(558));else if(Os||Za(A,g,_,!1),N=(_&A.childLanes)!==0,Os||N){if(O=Bs,O!==null&&(Me=Pi(O,_),Me!==0&&Me!==J.retryLane))throw J.retryLane=Me,Jc(A,Me),Dc(O,A,Me),l0;Ym(),g=Yl(A,g,_)}else A=J.treeContext,Oo=lA(Me.nextSibling),na=g,ro=!0,MA=null,oo=!1,A!==null&&Ld(g,A),g=Ep(g,O),g.flags|=4096;return g}return A=Xu(A.child,{mode:O.mode,children:O.children}),A.ref=g.ref,g.child=A,A.return=g,A}function R1(A,g){var _=g.ref;if(_===null)A!==null&&A.ref!==null&&(g.flags|=4194816);else{if(typeof _!="function"&&typeof _!="object")throw Error(i(284));(A===null||A.ref!==_)&&(g.flags|=4194816)}}function D1(A,g,_,O,N){return uh(g),_=T(A,g,_,O,void 0,N),O=ae(),A!==null&&!Os?(ce(A,g,N),Jh(A,g,N)):(ro&&O&&xA(g),g.flags|=1,ra(A,g,_,N),g.child)}function mv(A,g,_,O,N,J){return uh(g),g.updateQueue=null,_=Q(g,O,_,N),U(A),O=ae(),A!==null&&!Os?(ce(A,g,J),Jh(A,g,J)):(ro&&O&&xA(g),g.flags|=1,ra(A,g,_,J),g.child)}function P1(A,g,_,O,N){if(uh(g),g.stateNode===null){var J=Zu,Me=_.contextType;typeof Me=="object"&&Me!==null&&(J=ml(Me)),J=new _(O,J),g.memoizedState=J.state!==null&&J.state!==void 0?J.state:null,J.updater=Fm,g.stateNode=J,J._reactInternals=g,J=g.stateNode,J.props=O,J.state=g.memoizedState,J.refs={},Qr(g),Me=_.contextType,J.context=typeof Me=="object"&&Me!==null?ml(Me):Zu,J.state=g.memoizedState,Me=_.getDerivedStateFromProps,typeof Me=="function"&&(Xh(g,_,Me,O),J.state=g.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof J.getSnapshotBeforeUpdate=="function"||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(Me=J.state,typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount(),Me!==J.state&&Fm.enqueueReplaceState(J,J.state,null),cu(g,O,J,N),Gd(),J.state=g.memoizedState),typeof J.componentDidMount=="function"&&(g.flags|=4194308),O=!0}else if(A===null){J=g.stateNode;var Ye=g.memoizedProps,_t=Pu(_,Ye);J.props=_t;var $t=J.context,ln=_.contextType;Me=Zu,typeof ln=="object"&&ln!==null&&(Me=ml(ln));var mn=_.getDerivedStateFromProps;ln=typeof mn=="function"||typeof J.getSnapshotBeforeUpdate=="function",Ye=g.pendingProps!==Ye,ln||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(Ye||$t!==Me)&&o0(g,J,O,Me),Ja=!1;var Xt=g.memoizedState;J.state=Xt,cu(g,O,J,N),Gd(),$t=g.memoizedState,Ye||Xt!==$t||Ja?(typeof mn=="function"&&(Xh(g,_,mn,O),$t=g.memoizedState),(_t=Ja||oC(g,_,_t,O,Xt,$t,Me))?(ln||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount()),typeof J.componentDidMount=="function"&&(g.flags|=4194308)):(typeof J.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=O,g.memoizedState=$t),J.props=O,J.state=$t,J.context=Me,O=_t):(typeof J.componentDidMount=="function"&&(g.flags|=4194308),O=!1)}else{J=g.stateNode,Um(A,g),Me=g.memoizedProps,ln=Pu(_,Me),J.props=ln,mn=g.pendingProps,Xt=J.context,$t=_.contextType,_t=Zu,typeof $t=="object"&&$t!==null&&(_t=ml($t)),Ye=_.getDerivedStateFromProps,($t=typeof Ye=="function"||typeof J.getSnapshotBeforeUpdate=="function")||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(Me!==mn||Xt!==_t)&&o0(g,J,O,_t),Ja=!1,Xt=g.memoizedState,J.state=Xt,cu(g,O,J,N),Gd();var rn=g.memoizedState;Me!==mn||Xt!==rn||Ja||A!==null&&A.dependencies!==null&&lh(A.dependencies)?(typeof Ye=="function"&&(Xh(g,_,Ye,O),rn=g.memoizedState),(ln=Ja||oC(g,_,ln,O,Xt,rn,_t)||A!==null&&A.dependencies!==null&&lh(A.dependencies))?($t||typeof J.UNSAFE_componentWillUpdate!="function"&&typeof J.componentWillUpdate!="function"||(typeof J.componentWillUpdate=="function"&&J.componentWillUpdate(O,rn,_t),typeof J.UNSAFE_componentWillUpdate=="function"&&J.UNSAFE_componentWillUpdate(O,rn,_t)),typeof J.componentDidUpdate=="function"&&(g.flags|=4),typeof J.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof J.componentDidUpdate!="function"||Me===A.memoizedProps&&Xt===A.memoizedState||(g.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||Me===A.memoizedProps&&Xt===A.memoizedState||(g.flags|=1024),g.memoizedProps=O,g.memoizedState=rn),J.props=O,J.state=rn,J.context=_t,O=ln):(typeof J.componentDidUpdate!="function"||Me===A.memoizedProps&&Xt===A.memoizedState||(g.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||Me===A.memoizedProps&&Xt===A.memoizedState||(g.flags|=1024),O=!1)}return J=O,R1(A,g),O=(g.flags&128)!==0,J||O?(J=g.stateNode,_=O&&typeof _.getDerivedStateFromError!="function"?null:J.render(),g.flags|=1,A!==null&&O?(g.child=hh(g,A.child,null,N),g.child=hh(g,null,_,N)):ra(A,g,_,N),g.memoizedState=J.state,A=g.child):A=Jh(A,g,N),A}function uC(A,g,_,O){return qe(),g.flags|=256,ra(A,g,_,O),g.child}var h0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function U1(A){return{baseLanes:A,cachePool:km()}}function sA(A,g,_){return A=A!==null?A.childLanes&~_:0,g&&(A|=Tc),A}function gl(A,g,_){var O=g.pendingProps,N=!1,J=(g.flags&128)!==0,Me;if((Me=J)||(Me=A!==null&&A.memoizedState===null?!1:(Us.current&2)!==0),Me&&(N=!0,g.flags&=-129),Me=(g.flags&32)!==0,g.flags&=-33,A===null){if(ro){if(N?Ru(g):bo(),(A=Oo)?(A=OC(A,oo),A=A!==null&&A.data!=="&"?A:null,A!==null&&(g.memoizedState={dehydrated:A,treeContext:eA!==null?{id:Gl,overflow:Mu}:null,retryLane:536870912,hydrationErrors:null},_=Qh(A),_.return=g,g.child=_,na=g,Oo=null)):A=null,A===null)throw Ka(g);return _a(A)?g.lanes=32:g.lanes=536870912,null}var Ye=O.children;return O=O.fallback,N?(bo(),N=g.mode,Ye=d0({mode:"hidden",children:Ye},N),O=Pd(O,N,_,null),Ye.return=g,O.return=g,Ye.sibling=O,g.child=Ye,O=g.child,O.memoizedState=U1(_),O.childLanes=sA(A,Me,_),g.memoizedState=h0,c0(null,O)):(Ru(g),Il(g,Ye))}var _t=A.memoizedState;if(_t!==null&&(Ye=_t.dehydrated,Ye!==null)){if(J)g.flags&256?(Ru(g),g.flags&=-257,g=Op(A,g,_)):g.memoizedState!==null?(bo(),g.child=A.child,g.flags|=128,g=null):(bo(),Ye=O.fallback,N=g.mode,O=d0({mode:"visible",children:O.children},N),Ye=Pd(Ye,N,_,null),Ye.flags|=2,O.return=g,Ye.return=g,O.sibling=Ye,g.child=O,hh(g,A.child,null,_),O=g.child,O.memoizedState=U1(_),O.childLanes=sA(A,Me,_),g.memoizedState=h0,g=c0(null,O));else if(Ru(g),_a(Ye)){if(Me=Ye.nextSibling&&Ye.nextSibling.dataset,Me)var $t=Me.dgst;Me=$t,O=Error(i(419)),O.stack="",O.digest=Me,wc({value:O,source:null,stack:null}),g=Op(A,g,_)}else if(Os||Za(A,g,_,!1),Me=(_&A.childLanes)!==0,Os||Me){if(Me=Bs,Me!==null&&(O=Pi(Me,_),O!==0&&O!==_t.retryLane))throw _t.retryLane=O,Jc(A,O),Dc(Me,A,O),l0;tf(Ye)||Ym(),g=Op(A,g,_)}else tf(Ye)?(g.flags|=192,g.child=A.child,g=null):(A=_t.treeContext,Oo=lA(Ye.nextSibling),na=g,ro=!0,MA=null,oo=!1,A!==null&&Ld(g,A),g=Il(g,O.children),g.flags|=4096);return g}return N?(bo(),Ye=O.fallback,N=g.mode,_t=A.child,$t=_t.sibling,O=Xu(_t,{mode:"hidden",children:O.children}),O.subtreeFlags=_t.subtreeFlags&65011712,$t!==null?Ye=Xu($t,Ye):(Ye=Pd(Ye,N,_,null),Ye.flags|=2),Ye.return=g,O.return=g,O.sibling=Ye,g.child=O,c0(null,O),O=g.child,Ye=A.child.memoizedState,Ye===null?Ye=U1(_):(N=Ye.cachePool,N!==null?(_t=ia._currentValue,N=N.parent!==_t?{parent:_t,pool:_t}:N):N=km(),Ye={baseLanes:Ye.baseLanes|_,cachePool:N}),O.memoizedState=Ye,O.childLanes=sA(A,Me,_),g.memoizedState=h0,c0(A.child,O)):(Ru(g),_=A.child,A=_.sibling,_=Xu(_,{mode:"visible",children:O.children}),_.return=g,_.sibling=null,A!==null&&(Me=g.deletions,Me===null?(g.deletions=[A],g.flags|=16):Me.push(A)),g.child=_,g.memoizedState=null,_)}function Il(A,g){return g=d0({mode:"visible",children:g},A.mode),g.return=A,A.child=g}function d0(A,g){return A=fl(22,A,null,g),A.lanes=0,A}function Op(A,g,_){return hh(g,A.child,null,_),A=Il(g,g.pendingProps.children),A.flags|=2,g.memoizedState=null,A}function cC(A,g,_){A.lanes|=g;var O=A.alternate;O!==null&&(O.lanes|=g),Su(A.return,g,_)}function K1(A,g,_,O,N,J){var Me=A.memoizedState;Me===null?A.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:O,tail:_,tailMode:N,treeForkCount:J}:(Me.isBackwards=g,Me.rendering=null,Me.renderingStartTime=0,Me.last=O,Me.tail=_,Me.tailMode=N,Me.treeForkCount=J)}function jm(A,g,_){var O=g.pendingProps,N=O.revealOrder,J=O.tail;O=O.children;var Me=Us.current,Ye=(Me&2)!==0;if(Ye?(Me=Me&1|2,g.flags|=128):Me&=1,xe(Us,Me),ra(A,g,O,_),O=ro?$s:0,!Ye&&A!==null&&(A.flags&128)!==0)e:for(A=g.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&cC(A,_,g);else if(A.tag===19)cC(A,_,g);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===g)break e;for(;A.sibling===null;){if(A.return===null||A.return===g)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}switch(N){case"forwards":for(_=g.child,N=null;_!==null;)A=_.alternate,A!==null&&BA(A)===null&&(N=_),_=_.sibling;_=N,_===null?(N=g.child,g.child=null):(N=_.sibling,_.sibling=null),K1(g,!1,N,_,J,O);break;case"backwards":case"unstable_legacy-backwards":for(_=null,N=g.child,g.child=null;N!==null;){if(A=N.alternate,A!==null&&BA(A)===null){g.child=N;break}A=N.sibling,N.sibling=_,_=N,N=A}K1(g,!0,_,null,J,O);break;case"together":K1(g,!1,null,null,void 0,O);break;default:g.memoizedState=null}return g.child}function Jh(A,g,_){if(A!==null&&(g.dependencies=A.dependencies),Hd|=g.lanes,(_&g.childLanes)===0)if(A!==null){if(Za(A,g,_,!1),(_&g.childLanes)===0)return null}else return null;if(A!==null&&g.child!==A.child)throw Error(i(153));if(g.child!==null){for(A=g.child,_=Xu(A,A.pendingProps),g.child=_,_.return=g;A.sibling!==null;)A=A.sibling,_=_.sibling=Xu(A,A.pendingProps),_.return=g;_.sibling=null}return g.child}function f0(A,g){return(A.lanes&g)!==0?!0:(A=A.dependencies,!!(A!==null&&lh(A)))}function Zx(A,g,_){switch(g.tag){case 3:Ke(g,g.stateNode.containerInfo),ah(g,ia,A.memoizedState.cache),qe();break;case 27:case 5:Se(g);break;case 4:Ke(g,g.stateNode.containerInfo);break;case 10:ah(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,OA(g),null;break;case 13:var O=g.memoizedState;if(O!==null)return O.dehydrated!==null?(Ru(g),g.flags|=128,null):(_&g.child.childLanes)!==0?gl(A,g,_):(Ru(g),A=Jh(A,g,_),A!==null?A.sibling:null);Ru(g);break;case 19:var N=(A.flags&128)!==0;if(O=(_&g.childLanes)!==0,O||(Za(A,g,_,!1),O=(_&g.childLanes)!==0),N){if(O)return jm(A,g,_);g.flags|=128}if(N=g.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),xe(Us,Us.current),O)break;return null;case 22:return g.lanes=0,Ff(A,g,_,g.pendingProps);case 24:ah(g,ia,A.memoizedState.cache)}return Jh(A,g,_)}function L1(A,g,_){if(A!==null)if(A.memoizedProps!==g.pendingProps)Os=!0;else{if(!f0(A,_)&&(g.flags&128)===0)return Os=!1,Zx(A,g,_);Os=(A.flags&131072)!==0}else Os=!1,ro&&(g.flags&1048576)!==0&&Kd(g,$s,g.index);switch(g.lanes=0,g.tag){case 16:e:{var O=g.pendingProps;if(A=rc(g.elementType),g.type=A,typeof A=="function")jl(A)?(O=Pu(A,O),g.tag=1,g=P1(null,g,A,O,_)):(g.tag=0,g=D1(null,g,A,O,_));else{if(A!=null){var N=A.$$typeof;if(N===H){g.tag=11,g=Ji(null,g,A,O,_);break e}else if(N===z){g.tag=14,g=u0(null,g,A,O,_);break e}}throw g=De(A)||A,Error(i(306,g,""))}}return g;case 0:return D1(A,g,g.type,g.pendingProps,_);case 1:return O=g.type,N=Pu(O,g.pendingProps),P1(A,g,O,N,_);case 3:e:{if(Ke(g,g.stateNode.containerInfo),A===null)throw Error(i(387));O=g.pendingProps;var J=g.memoizedState;N=J.element,Um(A,g),cu(g,O,null,_);var Me=g.memoizedState;if(O=Me.cache,ah(g,ia,O),O!==J.cache&&Ju(g,[ia],_,!0),Gd(),O=Me.element,J.isDehydrated)if(J={element:O,isDehydrated:!1,cache:Me.cache},g.updateQueue.baseState=J,g.memoizedState=J,g.flags&256){g=uC(A,g,O,_);break e}else if(O!==N){N=uu(Error(i(424)),g),wc(N),g=uC(A,g,O,_);break e}else{switch(A=g.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(Oo=lA(A.firstChild),na=g,ro=!0,MA=null,oo=!0,_=Df(g,null,O,_),g.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling}else{if(qe(),O===N){g=Jh(A,g,_);break e}ra(A,g,O,_)}g=g.child}return g;case 26:return R1(A,g),A===null?(_=f(g.type,null,g.pendingProps,null))?g.memoizedState=_:ro||(_=g.type,A=g.pendingProps,O=eg(bt.current).createElement(_),O[sn]=g,O[Ci]=A,Ca(O,_,A),As(O),g.stateNode=O):g.memoizedState=f(g.type,A.memoizedProps,g.pendingProps,A.memoizedState),null;case 27:return Se(g),A===null&&ro&&(O=g.stateNode=Wv(g.type,g.pendingProps,bt.current),na=g,oo=!0,N=Oo,cr(g.type)?(dy=N,Oo=lA(O.firstChild)):Oo=N),ra(A,g,g.pendingProps.children,_),R1(A,g),A===null&&(g.flags|=4194304),g.child;case 5:return A===null&&ro&&((N=O=Oo)&&(O=i2(O,g.type,g.pendingProps,oo),O!==null?(g.stateNode=O,na=g,Oo=lA(O.firstChild),oo=!1,N=!0):N=!1),N||Ka(g)),Se(g),N=g.type,J=g.pendingProps,Me=A!==null?A.memoizedProps:null,O=J.children,ef(N,J)?O=null:Me!==null&&ef(N,Me)&&(g.flags|=32),g.memoizedState!==null&&(N=T(A,g,Z,null,null,_),An._currentValue=N),R1(A,g),ra(A,g,O,_),g.child;case 6:return A===null&&ro&&((A=_=Oo)&&(_=ls(_,g.pendingProps,oo),_!==null?(g.stateNode=_,na=g,Oo=null,A=!0):A=!1),A||Ka(g)),null;case 13:return gl(A,g,_);case 4:return Ke(g,g.stateNode.containerInfo),O=g.pendingProps,A===null?g.child=hh(g,null,O,_):ra(A,g,O,_),g.child;case 11:return Ji(A,g,g.type,g.pendingProps,_);case 7:return ra(A,g,g.pendingProps,_),g.child;case 8:return ra(A,g,g.pendingProps.children,_),g.child;case 12:return ra(A,g,g.pendingProps.children,_),g.child;case 10:return O=g.pendingProps,ah(g,g.type,O.value),ra(A,g,O.children,_),g.child;case 9:return N=g.type._context,O=g.pendingProps.children,uh(g),N=ml(N),O=O(N),g.flags|=1,ra(A,g,O,_),g.child;case 14:return u0(A,g,g.type,g.pendingProps,_);case 15:return T1(A,g,g.type,g.pendingProps,_);case 19:return jm(A,g,_);case 31:return lC(A,g,_);case 22:return Ff(A,g,_,g.pendingProps);case 24:return uh(g),O=ml(ia),A===null?(N=Eu(),N===null&&(N=Bs,J=la(),N.pooledCache=J,J.refCount++,J!==null&&(N.pooledCacheLanes|=_),N=J),g.memoizedState={parent:O,cache:N},Qr(g),ah(g,ia,N)):((A.lanes&_)!==0&&(Um(A,g),cu(g,null,null,_),Gd()),N=A.memoizedState,J=g.memoizedState,N.parent!==O?(N={parent:O,cache:O},g.memoizedState=N,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=N),ah(g,ia,O)):(O=J.cache,ah(g,ia,O),O!==N.cache&&Ju(g,[ia],_,!0))),ra(A,g,g.pendingProps.children,_),g.child;case 29:throw g.pendingProps}throw Error(i(156,g.tag))}function ed(A){A.flags|=4}function F1(A,g,_,O,N){if((g=(A.mode&32)!==0)&&(g=!1),g){if(A.flags|=16777216,(N&335544128)===N)if(A.stateNode.complete)A.flags|=8192;else if(E0())A.flags|=8192;else throw iA=Ah,Rf}else A.flags&=-16777217}function gv(A,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!We(g))if(E0())A.flags|=8192;else throw iA=Ah,Rf}function p0(A,g){g!==null&&(A.flags|=4),A.flags&16384&&(g=A.tag!==22?Zn():536870912,A.lanes|=g,Ip|=g)}function m0(A,g){if(!ro)switch(A.tailMode){case"hidden":g=A.tail;for(var _=null;g!==null;)g.alternate!==null&&(_=g),g=g.sibling;_===null?A.tail=null:_.sibling=null;break;case"collapsed":_=A.tail;for(var O=null;_!==null;)_.alternate!==null&&(O=_),_=_.sibling;O===null?g||A.tail===null?A.tail=null:A.tail.sibling=null:O.sibling=null}}function as(A){var g=A.alternate!==null&&A.alternate.child===A.child,_=0,O=0;if(g)for(var N=A.child;N!==null;)_|=N.lanes|N.childLanes,O|=N.subtreeFlags&65011712,O|=N.flags&65011712,N.return=A,N=N.sibling;else for(N=A.child;N!==null;)_|=N.lanes|N.childLanes,O|=N.subtreeFlags,O|=N.flags,N.return=A,N=N.sibling;return A.subtreeFlags|=O,A.childLanes=_,g}function z1(A,g,_){var O=g.pendingProps;switch(qh(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return as(g),null;case 1:return as(g),null;case 3:return _=g.stateNode,O=null,A!==null&&(O=A.memoizedState.cache),g.memoizedState.cache!==O&&(g.flags|=2048),SA(ia),Te(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(A===null||A.child===null)&&(sh(g)?ed(g):A===null||A.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,wu())),as(g),null;case 26:var N=g.type,J=g.memoizedState;return A===null?(ed(g),J!==null?(as(g),gv(g,J)):(as(g),F1(g,N,null,O,_))):J?J!==A.memoizedState?(ed(g),as(g),gv(g,J)):(as(g),g.flags&=-16777217):(A=A.memoizedProps,A!==O&&ed(g),as(g),F1(g,N,A,O,_)),null;case 27:if(Ne(g),_=bt.current,N=g.type,A!==null&&g.stateNode!=null)A.memoizedProps!==O&&ed(g);else{if(!O){if(g.stateNode===null)throw Error(i(166));return as(g),null}A=At.current,sh(g)?Yh(g):(A=Wv(N,O,_),g.stateNode=A,ed(g))}return as(g),null;case 5:if(Ne(g),N=g.type,A!==null&&g.stateNode!=null)A.memoizedProps!==O&&ed(g);else{if(!O){if(g.stateNode===null)throw Error(i(166));return as(g),null}if(J=At.current,sh(g))Yh(g);else{var Me=eg(bt.current);switch(J){case 1:J=Me.createElementNS("http://www.w3.org/2000/svg",N);break;case 2:J=Me.createElementNS("http://www.w3.org/1998/Math/MathML",N);break;default:switch(N){case"svg":J=Me.createElementNS("http://www.w3.org/2000/svg",N);break;case"math":J=Me.createElementNS("http://www.w3.org/1998/Math/MathML",N);break;case"script":J=Me.createElement("div"),J.innerHTML="<script><\/script>",J=J.removeChild(J.firstChild);break;case"select":J=typeof O.is=="string"?Me.createElement("select",{is:O.is}):Me.createElement("select"),O.multiple?J.multiple=!0:O.size&&(J.size=O.size);break;default:J=typeof O.is=="string"?Me.createElement(N,{is:O.is}):Me.createElement(N)}}J[sn]=g,J[Ci]=O;e:for(Me=g.child;Me!==null;){if(Me.tag===5||Me.tag===6)J.appendChild(Me.stateNode);else if(Me.tag!==4&&Me.tag!==27&&Me.child!==null){Me.child.return=Me,Me=Me.child;continue}if(Me===g)break e;for(;Me.sibling===null;){if(Me.return===null||Me.return===g)break e;Me=Me.return}Me.sibling.return=Me.return,Me=Me.sibling}g.stateNode=J;e:switch(Ca(J,N,O),N){case"button":case"input":case"select":case"textarea":O=!!O.autoFocus;break e;case"img":O=!0;break e;default:O=!1}O&&ed(g)}}return as(g),F1(g,g.type,A===null?null:A.memoizedProps,g.pendingProps,_),null;case 6:if(A&&g.stateNode!=null)A.memoizedProps!==O&&ed(g);else{if(typeof O!="string"&&g.stateNode===null)throw Error(i(166));if(A=bt.current,sh(g)){if(A=g.stateNode,_=g.memoizedProps,O=null,N=na,N!==null)switch(N.tag){case 27:case 5:O=N.memoizedProps}A[sn]=g,A=!!(A.nodeValue===_||O!==null&&O.suppressHydrationWarning===!0||zc(A.nodeValue,_)),A||Ka(g,!0)}else A=eg(A).createTextNode(O),A[sn]=g,g.stateNode=A}return as(g),null;case 31:if(_=g.memoizedState,A===null||A.memoizedState!==null){if(O=sh(g),_!==null){if(A===null){if(!O)throw Error(i(318));if(A=g.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(557));A[sn]=g}else qe(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;as(g),A=!1}else _=wu(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=_),A=!0;if(!A)return g.flags&256?(Bl(g),g):(Bl(g),null);if((g.flags&128)!==0)throw Error(i(558))}return as(g),null;case 13:if(O=g.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(N=sh(g),O!==null&&O.dehydrated!==null){if(A===null){if(!N)throw Error(i(318));if(N=g.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(i(317));N[sn]=g}else qe(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;as(g),N=!1}else N=wu(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=N),N=!0;if(!N)return g.flags&256?(Bl(g),g):(Bl(g),null)}return Bl(g),(g.flags&128)!==0?(g.lanes=_,g):(_=O!==null,A=A!==null&&A.memoizedState!==null,_&&(O=g.child,N=null,O.alternate!==null&&O.alternate.memoizedState!==null&&O.alternate.memoizedState.cachePool!==null&&(N=O.alternate.memoizedState.cachePool.pool),J=null,O.memoizedState!==null&&O.memoizedState.cachePool!==null&&(J=O.memoizedState.cachePool.pool),J!==N&&(O.flags|=2048)),_!==A&&_&&(g.child.flags|=8192),p0(g,g.updateQueue),as(g),null);case 4:return Te(),A===null&&ly(g.stateNode.containerInfo),as(g),null;case 10:return SA(g.type),as(g),null;case 19:if(ze(Us),O=g.memoizedState,O===null)return as(g),null;if(N=(g.flags&128)!==0,J=O.rendering,J===null)if(N)m0(O,!1);else{if(va!==0||A!==null&&(A.flags&128)!==0)for(A=g.child;A!==null;){if(J=BA(A),J!==null){for(g.flags|=128,m0(O,!1),A=J.updateQueue,g.updateQueue=A,p0(g,A),g.subtreeFlags=0,A=_,_=g.child;_!==null;)E1(_,A),_=_.sibling;return xe(Us,Us.current&1|2),ro&&Ol(g,O.treeForkCount),g.child}A=A.sibling}O.tail!==null&&Yn()>kp&&(g.flags|=128,N=!0,m0(O,!1),g.lanes=4194304)}else{if(!N)if(A=BA(J),A!==null){if(g.flags|=128,N=!0,A=A.updateQueue,g.updateQueue=A,p0(g,A),m0(O,!0),O.tail===null&&O.tailMode==="hidden"&&!J.alternate&&!ro)return as(g),null}else 2*Yn()-O.renderingStartTime>kp&&_!==536870912&&(g.flags|=128,N=!0,m0(O,!1),g.lanes=4194304);O.isBackwards?(J.sibling=g.child,g.child=J):(A=O.last,A!==null?A.sibling=J:g.child=J,O.last=J)}return O.tail!==null?(A=O.tail,O.rendering=A,O.tail=A.sibling,O.renderingStartTime=Yn(),A.sibling=null,_=Us.current,xe(Us,N?_&1|2:_&1),ro&&Ol(g,O.treeForkCount),A):(as(g),null);case 22:case 23:return Bl(g),za(),O=g.memoizedState!==null,A!==null?A.memoizedState!==null!==O&&(g.flags|=8192):O&&(g.flags|=8192),O?(_&536870912)!==0&&(g.flags&128)===0&&(as(g),g.subtreeFlags&6&&(g.flags|=8192)):as(g),_=g.updateQueue,_!==null&&p0(g,_.retryQueue),_=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(_=A.memoizedState.cachePool.pool),O=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(O=g.memoizedState.cachePool.pool),O!==_&&(g.flags|=2048),A!==null&&ze(ic),null;case 24:return _=null,A!==null&&(_=A.memoizedState.cache),g.memoizedState.cache!==_&&(g.flags|=2048),SA(ia),as(g),null;case 25:return null;case 30:return null}throw Error(i(156,g.tag))}function Nm(A,g){switch(qh(g),g.tag){case 1:return A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 3:return SA(ia),Te(),A=g.flags,(A&65536)!==0&&(A&128)===0?(g.flags=A&-65537|128,g):null;case 26:case 27:case 5:return Ne(g),null;case 31:if(g.memoizedState!==null){if(Bl(g),g.alternate===null)throw Error(i(340));qe()}return A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 13:if(Bl(g),A=g.memoizedState,A!==null&&A.dehydrated!==null){if(g.alternate===null)throw Error(i(340));qe()}return A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 19:return ze(Us),null;case 4:return Te(),null;case 10:return SA(g.type),null;case 22:case 23:return Bl(g),za(),A!==null&&ze(ic),A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 24:return SA(ia),null;case 25:return null;default:return null}}function td(A,g){switch(qh(g),g.tag){case 3:SA(ia),Te();break;case 26:case 27:case 5:Ne(g);break;case 4:Te();break;case 31:g.memoizedState!==null&&Bl(g);break;case 13:Bl(g);break;case 19:ze(Us);break;case 10:SA(g.type);break;case 22:case 23:Bl(g),za(),A!==null&&ze(ic);break;case 24:SA(ia)}}function nd(A,g){try{var _=g.updateQueue,O=_!==null?_.lastEffect:null;if(O!==null){var N=O.next;_=N;do{if((_.tag&A)===A){O=void 0;var J=_.create,Me=_.inst;O=J(),Me.destroy=O}_=_.next}while(_!==N)}}catch(Ye){ys(g,g.return,Ye)}}function Vd(A,g,_){try{var O=g.updateQueue,N=O!==null?O.lastEffect:null;if(N!==null){var J=N.next;O=J;do{if((O.tag&A)===A){var Me=O.inst,Ye=Me.destroy;if(Ye!==void 0){Me.destroy=void 0,N=g;var _t=_,$t=Ye;try{$t()}catch(ln){ys(N,_t,ln)}}}O=O.next}while(O!==J)}}catch(ln){ys(g,g.return,ln)}}function g0(A){var g=A.updateQueue;if(g!==null){var _=A.stateNode;try{ci(g,_)}catch(O){ys(A,A.return,O)}}}function yv(A,g,_){_.props=Pu(A.type,A.memoizedProps),_.state=A.memoizedState;try{_.componentWillUnmount()}catch(O){ys(A,g,O)}}function Bc(A,g){try{var _=A.ref;if(_!==null){switch(A.tag){case 26:case 27:case 5:var O=A.stateNode;break;case 30:O=A.stateNode;break;default:O=A.stateNode}typeof _=="function"?A.refCleanup=_(O):_.current=O}}catch(N){ys(A,g,N)}}function Uu(A,g){var _=A.ref,O=A.refCleanup;if(_!==null)if(typeof O=="function")try{O()}catch(N){ys(A,g,N)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof _=="function")try{_(null)}catch(N){ys(A,g,N)}else _.current=null}function AC(A){var g=A.type,_=A.memoizedProps,O=A.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":_.autoFocus&&O.focus();break e;case"img":_.src?O.src=_.src:_.srcSet&&(O.srcset=_.srcSet)}}catch(N){ys(A,A.return,N)}}function j1(A,g,_){try{var O=A.stateNode;wC(O,A.type,_,g),O[Ci]=g}catch(N){ys(A,A.return,N)}}function N1(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&cr(A.type)||A.tag===4}function vv(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||N1(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&cr(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function G1(A,g,_){var O=A.tag;if(O===5||O===6)A=A.stateNode,g?(_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_).insertBefore(A,g):(g=_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_,g.appendChild(A),_=_._reactRootContainer,_!=null||g.onclick!==null||(g.onclick=Va));else if(O!==4&&(O===27&&cr(A.type)&&(_=A.stateNode,g=null),A=A.child,A!==null))for(G1(A,g,_),A=A.sibling;A!==null;)G1(A,g,_),A=A.sibling}function zf(A,g,_){var O=A.tag;if(O===5||O===6)A=A.stateNode,g?_.insertBefore(A,g):_.appendChild(A);else if(O!==4&&(O===27&&cr(A.type)&&(_=A.stateNode),A=A.child,A!==null))for(zf(A,g,_),A=A.sibling;A!==null;)zf(A,g,_),A=A.sibling}function hC(A){var g=A.stateNode,_=A.memoizedProps;try{for(var O=A.type,N=g.attributes;N.length;)g.removeAttributeNode(N[0]);Ca(g,O,_),g[sn]=A,g[Ci]=_}catch(J){ys(A,A.return,J)}}var es=!1,oa=!1,W1=!1,y0=typeof WeakSet=="function"?WeakSet:Set,nl=null;function v0(A,g){if(A=A.containerInfo,Jm=$i,A=e0(A),_p(A)){if("selectionStart"in A)var _={start:A.selectionStart,end:A.selectionEnd};else e:{_=(_=A.ownerDocument)&&_.defaultView||window;var O=_.getSelection&&_.getSelection();if(O&&O.rangeCount!==0){_=O.anchorNode;var N=O.anchorOffset,J=O.focusNode;O=O.focusOffset;try{_.nodeType,J.nodeType}catch{_=null;break e}var Me=0,Ye=-1,_t=-1,$t=0,ln=0,mn=A,Xt=null;t:for(;;){for(var rn;mn!==_||N!==0&&mn.nodeType!==3||(Ye=Me+N),mn!==J||O!==0&&mn.nodeType!==3||(_t=Me+O),mn.nodeType===3&&(Me+=mn.nodeValue.length),(rn=mn.firstChild)!==null;)Xt=mn,mn=rn;for(;;){if(mn===A)break t;if(Xt===_&&++$t===N&&(Ye=Me),Xt===J&&++ln===O&&(_t=Me),(rn=mn.nextSibling)!==null)break;mn=Xt,Xt=mn.parentNode}mn=rn}_=Ye===-1||_t===-1?null:{start:Ye,end:_t}}else _=null}_=_||{start:0,end:0}}else _=null;for(zv={focusedElem:A,selectionRange:_},$i=!1,nl=g;nl!==null;)if(g=nl,A=g.child,(g.subtreeFlags&1028)!==0&&A!==null)A.return=g,nl=A;else for(;nl!==null;){switch(g=nl,J=g.alternate,A=g.flags,g.tag){case 0:if((A&4)!==0&&(A=g.updateQueue,A=A!==null?A.events:null,A!==null))for(_=0;_<A.length;_++)N=A[_],N.ref.impl=N.nextImpl;break;case 11:case 15:break;case 1:if((A&1024)!==0&&J!==null){A=void 0,_=g,N=J.memoizedProps,J=J.memoizedState,O=_.stateNode;try{var ki=Pu(_.type,N);A=O.getSnapshotBeforeUpdate(ki,J),O.__reactInternalSnapshotBeforeUpdate=A}catch(ir){ys(_,_.return,ir)}}break;case 3:if((A&1024)!==0){if(A=g.stateNode.containerInfo,_=A.nodeType,_===9)Lp(A);else if(_===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":Lp(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(i(163))}if(A=g.sibling,A!==null){A.return=g.return,nl=A;break}nl=g.return}}function Q1(A,g,_){var O=_.flags;switch(_.tag){case 0:case 11:case 15:id(A,_),O&4&&nd(5,_);break;case 1:if(id(A,_),O&4)if(A=_.stateNode,g===null)try{A.componentDidMount()}catch(Me){ys(_,_.return,Me)}else{var N=Pu(_.type,g.memoizedProps);g=g.memoizedState;try{A.componentDidUpdate(N,g,A.__reactInternalSnapshotBeforeUpdate)}catch(Me){ys(_,_.return,Me)}}O&64&&g0(_),O&512&&Bc(_,_.return);break;case 3:if(id(A,_),O&64&&(A=_.updateQueue,A!==null)){if(g=null,_.child!==null)switch(_.child.tag){case 27:case 5:g=_.child.stateNode;break;case 1:g=_.child.stateNode}try{ci(A,g)}catch(Me){ys(_,_.return,Me)}}break;case 27:g===null&&O&4&&hC(_);case 26:case 5:id(A,_),g===null&&O&4&&AC(_),O&512&&Bc(_,_.return);break;case 12:id(A,_);break;case 31:id(A,_),O&4&&jf(A,_);break;case 13:id(A,_),O&4&&Gm(A,_),O&64&&(A=_.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(_=ry.bind(null,_),Gv(A,_))));break;case 22:if(O=_.memoizedState!==null||es,!O){g=g!==null&&g.memoizedState!==null||oa,N=es;var J=oa;es=O,(oa=g)&&!J?rd(A,_,(_.subtreeFlags&8772)!==0):id(A,_),es=N,oa=J}break;case 30:break;default:id(A,_)}}function q1(A){var g=A.alternate;g!==null&&(A.alternate=null,q1(g)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(g=A.stateNode,g!==null&&hl(g)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var ms=null,Ku=!1;function Ic(A,g,_){for(_=_.child;_!==null;)b0(A,g,_),_=_.sibling}function b0(A,g,_){if(Ve&&typeof Ve.onCommitFiberUnmount=="function")try{Ve.onCommitFiberUnmount(Ue,_)}catch{}switch(_.tag){case 26:oa||Uu(_,g),Ic(A,g,_),_.memoizedState?_.memoizedState.count--:_.stateNode&&(_=_.stateNode,_.parentNode.removeChild(_));break;case 27:oa||Uu(_,g);var O=ms,N=Ku;cr(_.type)&&(ms=_.stateNode,Ku=!1),Ic(A,g,_),ng(_.stateNode),ms=O,Ku=N;break;case 5:oa||Uu(_,g);case 6:if(O=ms,N=Ku,ms=null,Ic(A,g,_),ms=O,Ku=N,ms!==null)if(Ku)try{(ms.nodeType===9?ms.body:ms.nodeName==="HTML"?ms.ownerDocument.body:ms).removeChild(_.stateNode)}catch(J){ys(_,g,J)}else try{ms.removeChild(_.stateNode)}catch(J){ys(_,g,J)}break;case 18:ms!==null&&(Ku?(A=ms,tg(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,_.stateNode),rg(A)):tg(ms,_.stateNode));break;case 4:O=ms,N=Ku,ms=_.stateNode.containerInfo,Ku=!0,Ic(A,g,_),ms=O,Ku=N;break;case 0:case 11:case 14:case 15:Vd(2,_,g),oa||Vd(4,_,g),Ic(A,g,_);break;case 1:oa||(Uu(_,g),O=_.stateNode,typeof O.componentWillUnmount=="function"&&yv(_,g,O)),Ic(A,g,_);break;case 21:Ic(A,g,_);break;case 22:oa=(O=oa)||_.memoizedState!==null,Ic(A,g,_),oa=O;break;default:Ic(A,g,_)}}function jf(A,g){if(g.memoizedState===null&&(A=g.alternate,A!==null&&(A=A.memoizedState,A!==null))){A=A.dehydrated;try{rg(A)}catch(_){ys(g,g.return,_)}}}function Gm(A,g){if(g.memoizedState===null&&(A=g.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{rg(A)}catch(_){ys(g,g.return,_)}}function Xx(A){switch(A.tag){case 31:case 13:case 19:var g=A.stateNode;return g===null&&(g=A.stateNode=new y0),g;case 22:return A=A.stateNode,g=A._retryCache,g===null&&(g=A._retryCache=new y0),g;default:throw Error(i(435,A.tag))}}function C0(A,g){var _=Xx(A);g.forEach(function(O){if(!_.has(O)){_.add(O);var N=_C.bind(null,A,O);O.then(N,N)}})}function yl(A,g){var _=g.deletions;if(_!==null)for(var O=0;O<_.length;O++){var N=_[O],J=A,Me=g,Ye=Me;e:for(;Ye!==null;){switch(Ye.tag){case 27:if(cr(Ye.type)){ms=Ye.stateNode,Ku=!1;break e}break;case 5:ms=Ye.stateNode,Ku=!1;break e;case 3:case 4:ms=Ye.stateNode.containerInfo,Ku=!0;break e}Ye=Ye.return}if(ms===null)throw Error(i(160));b0(J,Me,N),ms=null,Ku=!1,J=N.alternate,J!==null&&(J.return=null),N.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)bv(g,A),g=g.sibling}var _h=null;function bv(A,g){var _=A.alternate,O=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:yl(g,A),gs(A),O&4&&(Vd(3,A,A.return),nd(3,A),Vd(5,A,A.return));break;case 1:yl(g,A),gs(A),O&512&&(oa||_===null||Uu(_,_.return)),O&64&&es&&(A=A.updateQueue,A!==null&&(O=A.callbacks,O!==null&&(_=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=_===null?O:_.concat(O))));break;case 26:var N=_h;if(yl(g,A),gs(A),O&512&&(oa||_===null||Uu(_,_.return)),O&4){var J=_!==null?_.memoizedState:null;if(O=A.memoizedState,_===null)if(O===null)if(A.stateNode===null){e:{O=A.type,_=A.memoizedProps,N=N.ownerDocument||N;t:switch(O){case"title":J=N.getElementsByTagName("title")[0],(!J||J[$a]||J[sn]||J.namespaceURI==="http://www.w3.org/2000/svg"||J.hasAttribute("itemprop"))&&(J=N.createElement(O),N.head.insertBefore(J,N.querySelector("head > title"))),Ca(J,O,_),J[sn]=A,As(J),O=J;break e;case"link":var Me=Oe("link","href",N).get(O+(_.href||""));if(Me){for(var Ye=0;Ye<Me.length;Ye++)if(J=Me[Ye],J.getAttribute("href")===(_.href==null||_.href===""?null:_.href)&&J.getAttribute("rel")===(_.rel==null?null:_.rel)&&J.getAttribute("title")===(_.title==null?null:_.title)&&J.getAttribute("crossorigin")===(_.crossOrigin==null?null:_.crossOrigin)){Me.splice(Ye,1);break t}}J=N.createElement(O),Ca(J,O,_),N.head.appendChild(J);break;case"meta":if(Me=Oe("meta","content",N).get(O+(_.content||""))){for(Ye=0;Ye<Me.length;Ye++)if(J=Me[Ye],J.getAttribute("content")===(_.content==null?null:""+_.content)&&J.getAttribute("name")===(_.name==null?null:_.name)&&J.getAttribute("property")===(_.property==null?null:_.property)&&J.getAttribute("http-equiv")===(_.httpEquiv==null?null:_.httpEquiv)&&J.getAttribute("charset")===(_.charSet==null?null:_.charSet)){Me.splice(Ye,1);break t}}J=N.createElement(O),Ca(J,O,_),N.head.appendChild(J);break;default:throw Error(i(468,O))}J[sn]=A,As(J),O=J}A.stateNode=O}else Pe(N,A.type,A.stateNode);else A.stateNode=K(N,O,A.memoizedProps);else J!==O?(J===null?_.stateNode!==null&&(_=_.stateNode,_.parentNode.removeChild(_)):J.count--,O===null?Pe(N,A.type,A.stateNode):K(N,O,A.memoizedProps)):O===null&&A.stateNode!==null&&j1(A,A.memoizedProps,_.memoizedProps)}break;case 27:yl(g,A),gs(A),O&512&&(oa||_===null||Uu(_,_.return)),_!==null&&O&4&&j1(A,A.memoizedProps,_.memoizedProps);break;case 5:if(yl(g,A),gs(A),O&512&&(oa||_===null||Uu(_,_.return)),A.flags&32){N=A.stateNode;try{qr(N,"")}catch(ki){ys(A,A.return,ki)}}O&4&&A.stateNode!=null&&(N=A.memoizedProps,j1(A,N,_!==null?_.memoizedProps:N)),O&1024&&(W1=!0);break;case 6:if(yl(g,A),gs(A),O&4){if(A.stateNode===null)throw Error(i(162));O=A.memoizedProps,_=A.stateNode;try{_.nodeValue=O}catch(ki){ys(A,A.return,ki)}}break;case 3:if(Ae=null,N=_h,_h=ig(g.containerInfo),yl(g,A),_h=N,gs(A),O&4&&_!==null&&_.memoizedState.isDehydrated)try{rg(g.containerInfo)}catch(ki){ys(A,A.return,ki)}W1&&(W1=!1,Y1(A));break;case 4:O=_h,_h=ig(A.stateNode.containerInfo),yl(g,A),gs(A),_h=O;break;case 12:yl(g,A),gs(A);break;case 31:yl(g,A),gs(A),O&4&&(O=A.updateQueue,O!==null&&(A.updateQueue=null,C0(A,O)));break;case 13:yl(g,A),gs(A),A.child.flags&8192&&A.memoizedState!==null!=(_!==null&&_.memoizedState!==null)&&(Qm=Yn()),O&4&&(O=A.updateQueue,O!==null&&(A.updateQueue=null,C0(A,O)));break;case 22:N=A.memoizedState!==null;var _t=_!==null&&_.memoizedState!==null,$t=es,ln=oa;if(es=$t||N,oa=ln||_t,yl(g,A),oa=ln,es=$t,gs(A),O&8192)e:for(g=A.stateNode,g._visibility=N?g._visibility&-2:g._visibility|1,N&&(_===null||_t||es||oa||Nf(A)),_=null,g=A;;){if(g.tag===5||g.tag===26){if(_===null){_t=_=g;try{if(J=_t.stateNode,N)Me=J.style,typeof Me.setProperty=="function"?Me.setProperty("display","none","important"):Me.display="none";else{Ye=_t.stateNode;var mn=_t.memoizedProps.style,Xt=mn!=null&&mn.hasOwnProperty("display")?mn.display:null;Ye.style.display=Xt==null||typeof Xt=="boolean"?"":(""+Xt).trim()}}catch(ki){ys(_t,_t.return,ki)}}}else if(g.tag===6){if(_===null){_t=g;try{_t.stateNode.nodeValue=N?"":_t.memoizedProps}catch(ki){ys(_t,_t.return,ki)}}}else if(g.tag===18){if(_===null){_t=g;try{var rn=_t.stateNode;N?Lu(rn,!0):Lu(_t.stateNode,!1)}catch(ki){ys(_t,_t.return,ki)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===A)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===A)break e;for(;g.sibling===null;){if(g.return===null||g.return===A)break e;_===g&&(_=null),g=g.return}_===g&&(_=null),g.sibling.return=g.return,g=g.sibling}O&4&&(O=A.updateQueue,O!==null&&(_=O.retryQueue,_!==null&&(O.retryQueue=null,C0(A,_))));break;case 19:yl(g,A),gs(A),O&4&&(O=A.updateQueue,O!==null&&(A.updateQueue=null,C0(A,O)));break;case 30:break;case 21:break;default:yl(g,A),gs(A)}}function gs(A){var g=A.flags;if(g&2){try{for(var _,O=A.return;O!==null;){if(N1(O)){_=O;break}O=O.return}if(_==null)throw Error(i(160));switch(_.tag){case 27:var N=_.stateNode,J=vv(A);zf(A,J,N);break;case 5:var Me=_.stateNode;_.flags&32&&(qr(Me,""),_.flags&=-33);var Ye=vv(A);zf(A,Ye,Me);break;case 3:case 4:var _t=_.stateNode.containerInfo,$t=vv(A);G1(A,$t,_t);break;default:throw Error(i(161))}}catch(ln){ys(A,A.return,ln)}A.flags&=-3}g&4096&&(A.flags&=-4097)}function Y1(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var g=A;Y1(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),A=A.sibling}}function id(A,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)Q1(A,g.alternate,g),g=g.sibling}function Nf(A){for(A=A.child;A!==null;){var g=A;switch(g.tag){case 0:case 11:case 14:case 15:Vd(4,g,g.return),Nf(g);break;case 1:Uu(g,g.return);var _=g.stateNode;typeof _.componentWillUnmount=="function"&&yv(g,g.return,_),Nf(g);break;case 27:ng(g.stateNode);case 26:case 5:Uu(g,g.return),Nf(g);break;case 22:g.memoizedState===null&&Nf(g);break;case 30:Nf(g);break;default:Nf(g)}A=A.sibling}}function rd(A,g,_){for(_=_&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var O=g.alternate,N=A,J=g,Me=J.flags;switch(J.tag){case 0:case 11:case 15:rd(N,J,_),nd(4,J);break;case 1:if(rd(N,J,_),O=J,N=O.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch($t){ys(O,O.return,$t)}if(O=J,N=O.updateQueue,N!==null){var Ye=O.stateNode;try{var _t=N.shared.hiddenCallbacks;if(_t!==null)for(N.shared.hiddenCallbacks=null,N=0;N<_t.length;N++)Iu(_t[N],Ye)}catch($t){ys(O,O.return,$t)}}_&&Me&64&&g0(J),Bc(J,J.return);break;case 27:hC(J);case 26:case 5:rd(N,J,_),_&&O===null&&Me&4&&AC(J),Bc(J,J.return);break;case 12:rd(N,J,_);break;case 31:rd(N,J,_),_&&Me&4&&jf(N,J);break;case 13:rd(N,J,_),_&&Me&4&&Gm(N,J);break;case 22:J.memoizedState===null&&rd(N,J,_),Bc(J,J.return);break;case 30:break;default:rd(N,J,_)}g=g.sibling}}function Cv(A,g){var _=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(_=A.memoizedState.cachePool.pool),A=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(A=g.memoizedState.cachePool.pool),A!==_&&(A!=null&&A.refCount++,_!=null&&Xa(_))}function _v(A,g){A=null,g.alternate!==null&&(A=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==A&&(g.refCount++,A!=null&&Xa(A))}function xh(A,g,_,O){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)dC(A,g,_,O),g=g.sibling}function dC(A,g,_,O){var N=g.flags;switch(g.tag){case 0:case 11:case 15:xh(A,g,_,O),N&2048&&nd(9,g);break;case 1:xh(A,g,_,O);break;case 3:xh(A,g,_,O),N&2048&&(A=null,g.alternate!==null&&(A=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==A&&(g.refCount++,A!=null&&Xa(A)));break;case 12:if(N&2048){xh(A,g,_,O),A=g.stateNode;try{var J=g.memoizedProps,Me=J.id,Ye=J.onPostCommit;typeof Ye=="function"&&Ye(Me,g.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(_t){ys(g,g.return,_t)}}else xh(A,g,_,O);break;case 31:xh(A,g,_,O);break;case 13:xh(A,g,_,O);break;case 23:break;case 22:J=g.stateNode,Me=g.alternate,g.memoizedState!==null?J._visibility&2?xh(A,g,_,O):_0(A,g):J._visibility&2?xh(A,g,_,O):(J._visibility|=2,aA(A,g,_,O,(g.subtreeFlags&10256)!==0||!1)),N&2048&&Cv(Me,g);break;case 24:xh(A,g,_,O),N&2048&&_v(g.alternate,g);break;default:xh(A,g,_,O)}}function aA(A,g,_,O,N){for(N=N&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var J=A,Me=g,Ye=_,_t=O,$t=Me.flags;switch(Me.tag){case 0:case 11:case 15:aA(J,Me,Ye,_t,N),nd(8,Me);break;case 23:break;case 22:var ln=Me.stateNode;Me.memoizedState!==null?ln._visibility&2?aA(J,Me,Ye,_t,N):_0(J,Me):(ln._visibility|=2,aA(J,Me,Ye,_t,N)),N&&$t&2048&&Cv(Me.alternate,Me);break;case 24:aA(J,Me,Ye,_t,N),N&&$t&2048&&_v(Me.alternate,Me);break;default:aA(J,Me,Ye,_t,N)}g=g.sibling}}function _0(A,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var _=A,O=g,N=O.flags;switch(O.tag){case 22:_0(_,O),N&2048&&Cv(O.alternate,O);break;case 24:_0(_,O),N&2048&&_v(O.alternate,O);break;default:_0(_,O)}g=g.sibling}}var x0=8192;function Bp(A,g,_){if(A.subtreeFlags&x0)for(A=A.child;A!==null;)fC(A,g,_),A=A.sibling}function fC(A,g,_){switch(A.tag){case 26:Bp(A,g,_),A.flags&x0&&A.memoizedState!==null&&He(_,_h,A.memoizedState,A.memoizedProps);break;case 5:Bp(A,g,_);break;case 3:case 4:var O=_h;_h=ig(A.stateNode.containerInfo),Bp(A,g,_),_h=O;break;case 22:A.memoizedState===null&&(O=A.alternate,O!==null&&O.memoizedState!==null?(O=x0,x0=16777216,Bp(A,g,_),x0=O):Bp(A,g,_));break;default:Bp(A,g,_)}}function xv(A){var g=A.alternate;if(g!==null&&(A=g.child,A!==null)){g.child=null;do g=A.sibling,A.sibling=null,A=g;while(A!==null)}}function M0(A){var g=A.deletions;if((A.flags&16)!==0){if(g!==null)for(var _=0;_<g.length;_++){var O=g[_];nl=O,V1(O,A)}xv(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)$1(A),A=A.sibling}function $1(A){switch(A.tag){case 0:case 11:case 15:M0(A),A.flags&2048&&Vd(9,A,A.return);break;case 3:M0(A);break;case 12:M0(A);break;case 22:var g=A.stateNode;A.memoizedState!==null&&g._visibility&2&&(A.return===null||A.return.tag!==13)?(g._visibility&=-3,Gf(A)):M0(A);break;default:M0(A)}}function Gf(A){var g=A.deletions;if((A.flags&16)!==0){if(g!==null)for(var _=0;_<g.length;_++){var O=g[_];nl=O,V1(O,A)}xv(A)}for(A=A.child;A!==null;){switch(g=A,g.tag){case 0:case 11:case 15:Vd(8,g,g.return),Gf(g);break;case 22:_=g.stateNode,_._visibility&2&&(_._visibility&=-3,Gf(g));break;default:Gf(g)}A=A.sibling}}function V1(A,g){for(;nl!==null;){var _=nl;switch(_.tag){case 0:case 11:case 15:Vd(8,_,g);break;case 23:case 22:if(_.memoizedState!==null&&_.memoizedState.cachePool!==null){var O=_.memoizedState.cachePool.pool;O!=null&&O.refCount++}break;case 24:Xa(_.memoizedState.cache)}if(O=_.child,O!==null)O.return=_,nl=O;else e:for(_=A;nl!==null;){O=nl;var N=O.sibling,J=O.return;if(q1(O),O===_){nl=null;break e}if(N!==null){N.return=J,nl=N;break e}nl=J}}}var Jx={getCacheForType:function(A){var g=ml(ia),_=g.data.get(A);return _===void 0&&(_=A(),g.data.set(A,_)),_},cacheSignal:function(){return ml(ia).controller.signal}},e2=typeof WeakMap=="function"?WeakMap:Map,Yo=0,Bs=null,go=null,_o=0,Lo=0,kc=null,Wf=!1,Wm=!1,Mv=!1,Mh=0,va=0,Hd=0,Zd=0,H1=0,Tc=0,Ip=0,w0=null,hu=null,wv=!1,Qm=0,pC=0,kp=1/0,Z1=null,Xd=null,kl=0,Qf=null,od=null,Is=0,S0=0,X1=null,Sv=null,Tp=0,qf=null;function Rc(){return(Yo&2)!==0&&_o!==0?_o&-_o:Ie.T!==null?Kc():Zi()}function mC(){if(Tc===0)if((_o&536870912)===0||ro){var A=Pt;Pt<<=1,(Pt&3932160)===0&&(Pt=262144),Tc=A}else Tc=536870912;return A=Tu.current,A!==null&&(A.flags|=32),Tc}function Dc(A,g,_){(A===Bs&&(Lo===2||Lo===9)||A.cancelPendingCommit!==null)&&(qm(A,0),Jd(A,_o,Tc,!1)),Hi(A,_),((Yo&2)===0||A!==Bs)&&(A===Bs&&((Yo&2)===0&&(Zd|=_),va===4&&Jd(A,_o,Tc,!1)),TA(A))}function gC(A,g,_){if((Yo&6)!==0)throw Error(i(327));var O=!_&&(g&127)===0&&(g&A.expiredLanes)===0||pn(A,g),N=O?O0(A,g):ey(A,g,!0),J=O;do{if(N===0){Wm&&!O&&Jd(A,g,0,!1);break}else{if(_=A.current.alternate,J&&!vC(_)){N=ey(A,g,!1),J=!1;continue}if(N===2){if(J=g,A.errorRecoveryDisabledLanes&J)var Me=0;else Me=A.pendingLanes&-536870913,Me=Me!==0?Me:Me&536870912?536870912:0;if(Me!==0){g=Me;e:{var Ye=A;N=w0;var _t=Ye.current.memoizedState.isDehydrated;if(_t&&(qm(Ye,Me).flags|=256),Me=ey(Ye,Me,!1),Me!==2){if(Mv&&!_t){Ye.errorRecoveryDisabledLanes|=J,Zd|=J,N=4;break e}J=hu,hu=N,J!==null&&(hu===null?hu=J:hu.push.apply(hu,J))}N=Me}if(J=!1,N!==2)continue}}if(N===1){qm(A,0),Jd(A,g,0,!0);break}e:{switch(O=A,J=N,J){case 0:case 1:throw Error(i(345));case 4:if((g&4194048)!==g)break;case 6:Jd(O,g,Tc,!Wf);break e;case 2:hu=null;break;case 3:case 5:break;default:throw Error(i(329))}if((g&62914560)===g&&(N=Qm+300-Yn(),10<N)){if(Jd(O,g,Tc,!Wf),Fn(O,0,!0)!==0)break e;Is=g,O.timeoutHandle=EC(yC.bind(null,O,_,hu,Z1,wv,g,Tc,Zd,Ip,Wf,J,"Throttled",-0,0),N);break e}yC(O,_,hu,Z1,wv,g,Tc,Zd,Ip,Wf,J,null,-0,0)}}break}while(!0);TA(A)}function yC(A,g,_,O,N,J,Me,Ye,_t,$t,ln,mn,Xt,rn){if(A.timeoutHandle=-1,mn=g.subtreeFlags,mn&8192||(mn&16785408)===16785408){mn={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Va},fC(g,J,mn);var ki=(J&62914560)===J?Qm-Yn():(J&4194048)===J?pC-Yn():0;if(ki=Rt(mn,ki),ki!==null){Is=J,A.cancelPendingCommit=ki(Bv.bind(null,A,g,J,_,O,N,Me,Ye,_t,ln,mn,null,Xt,rn)),Jd(A,J,Me,!$t);return}}Bv(A,g,J,_,O,N,Me,Ye,_t)}function vC(A){for(var g=A;;){var _=g.tag;if((_===0||_===11||_===15)&&g.flags&16384&&(_=g.updateQueue,_!==null&&(_=_.stores,_!==null)))for(var O=0;O<_.length;O++){var N=_[O],J=N.getSnapshot;N=N.value;try{if(!Ss(J(),N))return!1}catch{return!1}}if(_=g.child,g.subtreeFlags&16384&&_!==null)_.return=g,g=_;else{if(g===A)break;for(;g.sibling===null;){if(g.return===null||g.return===A)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Jd(A,g,_,O){g&=~H1,g&=~Zd,A.suspendedLanes|=g,A.pingedLanes&=~g,O&&(A.warmLanes|=g),O=A.expirationTimes;for(var N=g;0<N;){var J=31-ge(N),Me=1<<J;O[J]=-1,N&=~Me}_!==0&&tr(A,_,g)}function J1(){return(Yo&6)===0?(D0(0),!1):!0}function Ev(){if(go!==null){if(Lo===0)var A=go.return;else A=go,wA=Er=null,Ce(A),jd=null,Ou=0,A=go;for(;A!==null;)td(A.alternate,A),A=A.return;go=null}}function qm(A,g){var _=A.timeoutHandle;_!==-1&&(A.timeoutHandle=-1,n2(_)),_=A.cancelPendingCommit,_!==null&&(A.cancelPendingCommit=null,_()),Is=0,Ev(),Bs=A,go=_=Xu(A.current,null),_o=g,Lo=0,kc=null,Wf=!1,Wm=pn(A,g),Mv=!1,Ip=Tc=H1=Zd=Hd=va=0,hu=w0=null,wv=!1,(g&8)!==0&&(g|=g&32);var O=A.entangledLanes;if(O!==0)for(A=A.entanglements,O&=g;0<O;){var N=31-ge(O),J=1<<N;g|=A[N],O&=~J}return Mh=g,xc(),_}function bC(A,g){Cr=null,Ie.H=$d,g===ch||g===nA?(g=Rm(),Lo=3):g===Rf?(g=Rm(),Lo=4):Lo=g===l0?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,kc=g,go===null&&(va=1,Sp(A,uu(g,A.current)))}function E0(){var A=Tu.current;return A===null?!0:(_o&4194048)===_o?ua===null:(_o&62914560)===_o||(_o&536870912)!==0?A===ua:!1}function CC(){var A=Ie.H;return Ie.H=$d,A===null?$d:A}function Ov(){var A=Ie.A;return Ie.A=Jx,A}function Ym(){va=4,Wf||(_o&4194048)!==_o&&Tu.current!==null||(Wm=!0),(Hd&134217727)===0&&(Zd&134217727)===0||Bs===null||Jd(Bs,_o,Tc,!1)}function ey(A,g,_){var O=Yo;Yo|=2;var N=CC(),J=Ov();(Bs!==A||_o!==g)&&(Z1=null,qm(A,g)),g=!1;var Me=va;e:do try{if(Lo!==0&&go!==null){var Ye=go,_t=kc;switch(Lo){case 8:Ev(),Me=6;break e;case 3:case 2:case 9:case 6:Tu.current===null&&(g=!0);var $t=Lo;if(Lo=0,kc=null,Vm(A,Ye,_t,$t),_&&Wm){Me=0;break e}break;default:$t=Lo,Lo=0,kc=null,Vm(A,Ye,_t,$t)}}Yf(),Me=va;break}catch(ln){bC(A,ln)}while(!0);return g&&A.shellSuspendCounter++,wA=Er=null,Yo=O,Ie.H=N,Ie.A=J,go===null&&(Bs=null,_o=0,xc()),Me}function Yf(){for(;go!==null;)B0(go)}function O0(A,g){var _=Yo;Yo|=2;var O=CC(),N=Ov();Bs!==A||_o!==g?(Z1=null,kp=Yn()+500,qm(A,g)):Wm=pn(A,g);e:do try{if(Lo!==0&&go!==null){g=go;var J=kc;t:switch(Lo){case 1:Lo=0,kc=null,Vm(A,g,J,1);break;case 2:case 9:if(Tm(J)){Lo=0,kc=null,I0(g);break}g=function(){Lo!==2&&Lo!==9||Bs!==A||(Lo=7),TA(A)},J.then(g,g);break e;case 3:Lo=7;break e;case 4:Lo=5;break e;case 7:Tm(J)?(Lo=0,kc=null,I0(g)):(Lo=0,kc=null,Vm(A,g,J,7));break;case 5:var Me=null;switch(go.tag){case 26:Me=go.memoizedState;case 5:case 27:var Ye=go;if(Me?We(Me):Ye.stateNode.complete){Lo=0,kc=null;var _t=Ye.sibling;if(_t!==null)go=_t;else{var $t=Ye.return;$t!==null?(go=$t,ty($t)):go=null}break t}}Lo=0,kc=null,Vm(A,g,J,5);break;case 6:Lo=0,kc=null,Vm(A,g,J,6);break;case 8:Ev(),va=6;break e;default:throw Error(i(462))}}$m();break}catch(ln){bC(A,ln)}while(!0);return wA=Er=null,Ie.H=O,Ie.A=N,Yo=_,go!==null?0:(Bs=null,_o=0,xc(),va)}function $m(){for(;go!==null&&!Rn();)B0(go)}function B0(A){var g=L1(A.alternate,A,Mh);A.memoizedProps=A.pendingProps,g===null?ty(A):go=g}function I0(A){var g=A,_=g.alternate;switch(g.tag){case 15:case 0:g=mv(_,g,g.pendingProps,g.type,void 0,_o);break;case 11:g=mv(_,g,g.pendingProps,g.type.render,g.ref,_o);break;case 5:Ce(g);default:td(_,g),g=go=E1(g,Mh),g=L1(_,g,Mh)}A.memoizedProps=A.pendingProps,g===null?ty(A):go=g}function Vm(A,g,_,O){wA=Er=null,Ce(g),jd=null,Ou=0;var N=g.return;try{if(Lf(A,N,g,_,_o)){va=1,Sp(A,uu(_,A.current)),go=null;return}}catch(J){if(N!==null)throw go=N,J;va=1,Sp(A,uu(_,A.current)),go=null;return}g.flags&32768?(ro||O===1?A=!0:Wm||(_o&536870912)!==0?A=!1:(Wf=A=!0,(O===2||O===9||O===3||O===6)&&(O=Tu.current,O!==null&&O.tag===13&&(O.flags|=16384))),Hm(g,A)):ty(g)}function ty(A){var g=A;do{if((g.flags&32768)!==0){Hm(g,Wf);return}A=g.return;var _=z1(g.alternate,g,Mh);if(_!==null){go=_;return}if(g=g.sibling,g!==null){go=g;return}go=g=A}while(g!==null);va===0&&(va=5)}function Hm(A,g){do{var _=Nm(A.alternate,A);if(_!==null){_.flags&=32767,go=_;return}if(_=A.return,_!==null&&(_.flags|=32768,_.subtreeFlags=0,_.deletions=null),!g&&(A=A.sibling,A!==null)){go=A;return}go=A=_}while(A!==null);va=6,go=null}function Bv(A,g,_,O,N,J,Me,Ye,_t){A.cancelPendingCommit=null;do Rp();while(kl!==0);if((Yo&6)!==0)throw Error(i(327));if(g!==null){if(g===A.current)throw Error(i(177));if(J=g.lanes|g.childLanes,J|=nh,Ti(A,_,J,Me,Ye,_t),A===Bs&&(go=Bs=null,_o=0),od=g,Qf=A,Is=_,S0=J,X1=N,Sv=O,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,xC(oe,function(){return kv(),null})):(A.callbackNode=null,A.callbackPriority=0),O=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||O){O=Ie.T,Ie.T=null,N=Qe.p,Qe.p=2,Me=Yo,Yo|=4;try{v0(A,g,_)}finally{Yo=Me,Qe.p=N,Ie.T=O}}kl=1,Iv(),ny(),k0()}}function Iv(){if(kl===1){kl=0;var A=Qf,g=od,_=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||_){_=Ie.T,Ie.T=null;var O=Qe.p;Qe.p=2;var N=Yo;Yo|=4;try{bv(g,A);var J=zv,Me=e0(A.containerInfo),Ye=J.focusedElem,_t=J.selectionRange;if(Me!==Ye&&Ye&&Ye.ownerDocument&&Em(Ye.ownerDocument.documentElement,Ye)){if(_t!==null&&_p(Ye)){var $t=_t.start,ln=_t.end;if(ln===void 0&&(ln=$t),"selectionStart"in Ye)Ye.selectionStart=$t,Ye.selectionEnd=Math.min(ln,Ye.value.length);else{var mn=Ye.ownerDocument||document,Xt=mn&&mn.defaultView||window;if(Xt.getSelection){var rn=Xt.getSelection(),ki=Ye.textContent.length,ir=Math.min(_t.start,ki),ao=_t.end===void 0?ir:Math.min(_t.end,ki);!rn.extend&&ir>ao&&(Me=ao,ao=ir,ir=Me);var Lt=Sm(Ye,ir),kt=Sm(Ye,ao);if(Lt&&kt&&(rn.rangeCount!==1||rn.anchorNode!==Lt.node||rn.anchorOffset!==Lt.offset||rn.focusNode!==kt.node||rn.focusOffset!==kt.offset)){var qt=mn.createRange();qt.setStart(Lt.node,Lt.offset),rn.removeAllRanges(),ir>ao?(rn.addRange(qt),rn.extend(kt.node,kt.offset)):(qt.setEnd(kt.node,kt.offset),rn.addRange(qt))}}}}for(mn=[],rn=Ye;rn=rn.parentNode;)rn.nodeType===1&&mn.push({element:rn,left:rn.scrollLeft,top:rn.scrollTop});for(typeof Ye.focus=="function"&&Ye.focus(),Ye=0;Ye<mn.length;Ye++){var dn=mn[Ye];dn.element.scrollLeft=dn.left,dn.element.scrollTop=dn.top}}$i=!!Jm,zv=Jm=null}finally{Yo=N,Qe.p=O,Ie.T=_}}A.current=g,kl=2}}function ny(){if(kl===2){kl=0;var A=Qf,g=od,_=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||_){_=Ie.T,Ie.T=null;var O=Qe.p;Qe.p=2;var N=Yo;Yo|=4;try{Q1(A,g.alternate,g)}finally{Yo=N,Qe.p=O,Ie.T=_}}kl=3}}function k0(){if(kl===4||kl===3){kl=0,gn();var A=Qf,g=od,_=Is,O=Sv;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?kl=5:(kl=0,od=Qf=null,T0(A,A.pendingLanes));var N=A.pendingLanes;if(N===0&&(Xd=null),pr(_),g=g.stateNode,Ve&&typeof Ve.onCommitFiberRoot=="function")try{Ve.onCommitFiberRoot(Ue,g,void 0,(g.current.flags&128)===128)}catch{}if(O!==null){g=Ie.T,N=Qe.p,Qe.p=2,Ie.T=null;try{for(var J=A.onRecoverableError,Me=0;Me<O.length;Me++){var Ye=O[Me];J(Ye.value,{componentStack:Ye.stack})}}finally{Ie.T=g,Qe.p=N}}(Is&3)!==0&&Rp(),TA(A),N=A.pendingLanes,(_&261930)!==0&&(N&42)!==0?A===qf?Tp++:(Tp=0,qf=A):Tp=0,D0(0)}}function T0(A,g){(A.pooledCacheLanes&=g)===0&&(g=A.pooledCache,g!=null&&(A.pooledCache=null,Xa(g)))}function Rp(){return Iv(),ny(),k0(),kv()}function kv(){if(kl!==5)return!1;var A=Qf,g=S0;S0=0;var _=pr(Is),O=Ie.T,N=Qe.p;try{Qe.p=32>_?32:_,Ie.T=null,_=X1,X1=null;var J=Qf,Me=Is;if(kl=0,od=Qf=null,Is=0,(Yo&6)!==0)throw Error(i(331));var Ye=Yo;if(Yo|=4,$1(J.current),dC(J,J.current,Me,_),Yo=Ye,D0(0,!1),Ve&&typeof Ve.onPostCommitFiberRoot=="function")try{Ve.onPostCommitFiberRoot(Ue,J)}catch{}return!0}finally{Qe.p=N,Ie.T=O,T0(A,g)}}function iy(A,g,_){g=uu(_,g),g=s0(A.stateNode,g,2),A=Bu(A,g,2),A!==null&&(Hi(A,2),TA(A))}function ys(A,g,_){if(A.tag===3)iy(A,A,_);else for(;g!==null;){if(g.tag===3){iy(g,A,_);break}else if(g.tag===1){var O=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof O.componentDidCatch=="function"&&(Xd===null||!Xd.has(O))){A=uu(_,A),_=Ch(2),O=Bu(g,_,2),O!==null&&(a0(_,O,g,A),Hi(O,2),TA(O));break}}g=g.return}}function Tv(A,g,_){var O=A.pingCache;if(O===null){O=A.pingCache=new e2;var N=new Set;O.set(g,N)}else N=O.get(g),N===void 0&&(N=new Set,O.set(g,N));N.has(_)||(Mv=!0,N.add(_),A=t2.bind(null,A,g,_),g.then(A,A))}function t2(A,g,_){var O=A.pingCache;O!==null&&O.delete(g),A.pingedLanes|=A.suspendedLanes&_,A.warmLanes&=~_,Bs===A&&(_o&_)===_&&(va===4||va===3&&(_o&62914560)===_o&&300>Yn()-Qm?(Yo&2)===0&&qm(A,0):H1|=_,Ip===_o&&(Ip=0)),TA(A)}function R0(A,g){g===0&&(g=Zn()),A=Jc(A,g),A!==null&&(Hi(A,g),TA(A))}function ry(A){var g=A.memoizedState,_=0;g!==null&&(_=g.retryLane),R0(A,_)}function _C(A,g){var _=0;switch(A.tag){case 31:case 13:var O=A.stateNode,N=A.memoizedState;N!==null&&(_=N.retryLane);break;case 19:O=A.stateNode;break;case 22:O=A.stateNode._retryCache;break;default:throw Error(i(314))}O!==null&&O.delete(g),R0(A,_)}function xC(A,g){return ii(A,g)}var Pc=null,Uc=null,oy=!1,Zm=!1,Rv=!1,wh=0;function TA(A){A!==Uc&&A.next===null&&(Uc===null?Pc=Uc=A:Uc=Uc.next=A),Zm=!0,oy||(oy=!0,Kv())}function D0(A,g){if(!Rv&&Zm){Rv=!0;do for(var _=!1,O=Pc;O!==null;){if(A!==0){var N=O.pendingLanes;if(N===0)var J=0;else{var Me=O.suspendedLanes,Ye=O.pingedLanes;J=(1<<31-ge(42|A)+1)-1,J&=N&~(Me&~Ye),J=J&201326741?J&201326741|1:J?J|2:0}J!==0&&(_=!0,Uv(O,J))}else J=_o,J=Fn(O,O===Bs?J:0,O.cancelPendingCommit!==null||O.timeoutHandle!==-1),(J&3)===0||pn(O,J)||(_=!0,Uv(O,J));O=O.next}while(_);Rv=!1}}function Dv(){sy()}function sy(){Zm=oy=!1;var A=0;wh!==0&&SC()&&(A=wh);for(var g=Yn(),_=null,O=Pc;O!==null;){var N=O.next,J=Dp(O,g);J===0?(O.next=null,_===null?Pc=N:_.next=N,N===null&&(Uc=_)):(_=O,(A!==0||(J&3)!==0)&&(Zm=!0)),O=N}kl!==0&&kl!==5||D0(A),wh!==0&&(wh=0)}function Dp(A,g){for(var _=A.suspendedLanes,O=A.pingedLanes,N=A.expirationTimes,J=A.pendingLanes&-62914561;0<J;){var Me=31-ge(J),Ye=1<<Me,_t=N[Me];_t===-1?((Ye&_)===0||(Ye&O)!==0)&&(N[Me]=$n(Ye,g)):_t<=g&&(A.expiredLanes|=Ye),J&=~Ye}if(g=Bs,_=_o,_=Fn(A,A===g?_:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),O=A.callbackNode,_===0||A===g&&(Lo===2||Lo===9)||A.cancelPendingCommit!==null)return O!==null&&O!==null&&wn(O),A.callbackNode=null,A.callbackPriority=0;if((_&3)===0||pn(A,_)){if(g=_&-_,g===A.callbackPriority)return g;switch(O!==null&&wn(O),pr(_)){case 2:case 8:_=_e;break;case 32:_=oe;break;case 268435456:_=ne;break;default:_=oe}return O=Pv.bind(null,A),_=ii(_,O),A.callbackPriority=g,A.callbackNode=_,g}return O!==null&&O!==null&&wn(O),A.callbackPriority=2,A.callbackNode=null,2}function Pv(A,g){if(kl!==0&&kl!==5)return A.callbackNode=null,A.callbackPriority=0,null;var _=A.callbackNode;if(Rp()&&A.callbackNode!==_)return null;var O=_o;return O=Fn(A,A===Bs?O:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),O===0?null:(gC(A,O,g),Dp(A,Yn()),A.callbackNode!=null&&A.callbackNode===_?Pv.bind(null,A):null)}function Uv(A,g){if(Rp())return null;gC(A,g,!0)}function Kv(){Nv(function(){(Yo&6)!==0?ii(Tt,Dv):sy()})}function Kc(){if(wh===0){var A=tA;A===0&&(A=Mt,Mt<<=1,(Mt&261888)===0&&(Mt=256)),wh=A}return wh}function P0(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:El(""+A)}function Lv(A,g){var _=g.ownerDocument.createElement("input");return _.name=g.name,_.value=g.value,A.id&&_.setAttribute("form",A.id),g.parentNode.insertBefore(_,g),A=new FormData(A),_.parentNode.removeChild(_),A}function Pp(A,g,_,O,N){if(g==="submit"&&_&&_.stateNode===N){var J=P0((N[Ci]||null).action),Me=O.submitter;Me&&(g=(g=Me[Ci]||null)?P0(g.formAction):Me.getAttribute("formAction"),g!==null&&(J=g,Me=null));var Ye=new Bn("action","action",null,O,N);A.push({event:Ye,listeners:[{instance:null,listener:function(){if(O.defaultPrevented){if(wh!==0){var _t=Me?Lv(N,Me):new FormData(N);gh(_,{pending:!0,data:_t,method:N.method,action:J},null,_t)}}else typeof J=="function"&&(Ye.preventDefault(),_t=Me?Lv(N,Me):new FormData(N),gh(_,{pending:!0,data:_t,method:N.method,action:J},J,_t))},currentTarget:N}]})}}for(var Ir=0;Ir<If.length;Ir++){var ay=If[Ir],Lc=ay.toLowerCase(),il=ay[0].toUpperCase()+ay.slice(1);Ua(Lc,"on"+il)}Ua(zl,"onAnimationEnd"),Ua(Rd,"onAnimationIteration"),Ua(Gh,"onAnimationStart"),Ua("dblclick","onDoubleClick"),Ua("focusin","onFocus"),Ua("focusout","onBlur"),Ua(bA,"onTransitionRun"),Ua(th,"onTransitionStart"),Ua(au,"onTransitionCancel"),Ua(Do,"onTransitionEnd"),Da("onMouseEnter",["mouseout","mouseover"]),Da("onMouseLeave",["mouseout","mouseover"]),Da("onPointerEnter",["pointerout","pointerover"]),Da("onPointerLeave",["pointerout","pointerover"]),Ll("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ll("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ll("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ll("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ll("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ll("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var U0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$f=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(U0));function MC(A,g){g=(g&4)!==0;for(var _=0;_<A.length;_++){var O=A[_],N=O.event;O=O.listeners;e:{var J=void 0;if(g)for(var Me=O.length-1;0<=Me;Me--){var Ye=O[Me],_t=Ye.instance,$t=Ye.currentTarget;if(Ye=Ye.listener,_t!==J&&N.isPropagationStopped())break e;J=Ye,N.currentTarget=$t;try{J(N)}catch(ln){Dd(ln)}N.currentTarget=null,J=_t}else for(Me=0;Me<O.length;Me++){if(Ye=O[Me],_t=Ye.instance,$t=Ye.currentTarget,Ye=Ye.listener,_t!==J&&N.isPropagationStopped())break e;J=Ye,N.currentTarget=$t;try{J(N)}catch(ln){Dd(ln)}N.currentTarget=null,J=_t}}}}function Zr(A,g){var _=g[nr];_===void 0&&(_=g[nr]=new Set);var O=A+"__bubble";_.has(O)||(L0(g,A,2,!1),_.add(O))}function sd(A,g,_){var O=0;g&&(O|=4),L0(_,A,O,g)}var K0="_reactListening"+Math.random().toString(36).slice(2);function ly(A){if(!A[K0]){A[K0]=!0,pa.forEach(function(_){_!=="selectionchange"&&($f.has(_)||sd(_,!1,A),sd(_,!0,A))});var g=A.nodeType===9?A:A.ownerDocument;g===null||g[K0]||(g[K0]=!0,sd("selectionchange",!1,g))}}function L0(A,g,_,O){switch(jc(g)){case 2:var N=Di;break;case 8:N=mi;break;default:N=Kr}_=N.bind(null,g,_,A),N=void 0,!Ms||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(N=!0),O?N!==void 0?A.addEventListener(g,_,{capture:!0,passive:N}):A.addEventListener(g,_,!0):N!==void 0?A.addEventListener(g,_,{passive:N}):A.addEventListener(g,_,!1)}function uy(A,g,_,O,N){var J=O;if((g&1)===0&&(g&2)===0&&O!==null)e:for(;;){if(O===null)return;var Me=O.tag;if(Me===3||Me===4){var Ye=O.stateNode.containerInfo;if(Ye===N)break;if(Me===4)for(Me=O.return;Me!==null;){var _t=Me.tag;if((_t===3||_t===4)&&Me.stateNode.containerInfo===N)return;Me=Me.return}for(;Ye!==null;){if(Me=fo(Ye),Me===null)return;if(_t=Me.tag,_t===5||_t===6||_t===26||_t===27){O=J=Me;continue e}Ye=Ye.parentNode}}O=O.return}HA(function(){var $t=J,ln=Ps(_),mn=[];e:{var Xt=t0.get(A);if(Xt!==void 0){var rn=Bn,ki=A;switch(A){case"keypress":if(X(_)===0)break e;case"keydown":case"keyup":rn=XA;break;case"focusin":ki="focus",rn=gr;break;case"focusout":ki="blur",rn=gr;break;case"beforeblur":case"afterblur":rn=gr;break;case"click":if(_.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rn=ji;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rn=Hr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rn=fv;break;case zl:case Rd:case Gh:rn=vc;break;case Do:rn=ym;break;case"scroll":case"scrollend":rn=zi;break;case"wheel":rn=mA;break;case"copy":case"cut":case"paste":rn=ta;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rn=_1;break;case"toggle":case"beforetoggle":rn=bm}var ir=(g&4)!==0,ao=!ir&&(A==="scroll"||A==="scrollend"),Lt=ir?Xt!==null?Xt+"Capture":null:Xt;ir=[];for(var kt=$t,qt;kt!==null;){var dn=kt;if(qt=dn.stateNode,dn=dn.tag,dn!==5&&dn!==26&&dn!==27||qt===null||Lt===null||(dn=Zo(kt,Lt),dn!=null&&ir.push(Fc(kt,dn,qt))),ao)break;kt=kt.return}0<ir.length&&(Xt=new rn(Xt,ki,null,_,ln),mn.push({event:Xt,listeners:ir}))}}if((g&7)===0){e:{if(Xt=A==="mouseover"||A==="pointerover",rn=A==="mouseout"||A==="pointerout",Xt&&_!==Go&&(ki=_.relatedTarget||_.fromElement)&&(fo(ki)||ki[Ui]))break e;if((rn||Xt)&&(Xt=ln.window===ln?ln:(Xt=ln.ownerDocument)?Xt.defaultView||Xt.parentWindow:window,rn?(ki=_.relatedTarget||_.toElement,rn=$t,ki=ki?fo(ki):null,ki!==null&&(ao=o(ki),ir=ki.tag,ki!==ao||ir!==5&&ir!==27&&ir!==6)&&(ki=null)):(rn=null,ki=$t),rn!==ki)){if(ir=ji,dn="onMouseLeave",Lt="onMouseEnter",kt="mouse",(A==="pointerout"||A==="pointerover")&&(ir=_1,dn="onPointerLeave",Lt="onPointerEnter",kt="pointer"),ao=rn==null?Xt:Kl(rn),qt=ki==null?Xt:Kl(ki),Xt=new ir(dn,kt+"leave",rn,_,ln),Xt.target=ao,Xt.relatedTarget=qt,dn=null,fo(ln)===$t&&(ir=new ir(Lt,kt+"enter",ki,_,ln),ir.target=qt,ir.relatedTarget=ao,dn=ir),ao=dn,rn&&ki)t:{for(ir=F0,Lt=rn,kt=ki,qt=0,dn=Lt;dn;dn=ir(dn))qt++;dn=0;for(var er=kt;er;er=ir(er))dn++;for(;0<qt-dn;)Lt=ir(Lt),qt--;for(;0<dn-qt;)kt=ir(kt),dn--;for(;qt--;){if(Lt===kt||kt!==null&&Lt===kt.alternate){ir=Lt;break t}Lt=ir(Lt),kt=ir(kt)}ir=null}else ir=null;rn!==null&&ks(mn,Xt,rn,ir,!1),ki!==null&&ao!==null&&ks(mn,ao,ki,ir,!0)}}e:{if(Xt=$t?Kl($t):window,rn=Xt.nodeName&&Xt.nodeName.toLowerCase(),rn==="select"||rn==="input"&&Xt.type==="file")var hr=Mm;else if(bp(Xt))if(JA)hr=Jg;else{hr=w1;var Ai=Cp}else rn=Xt.nodeName,!rn||rn.toLowerCase()!=="input"||Xt.type!=="checkbox"&&Xt.type!=="radio"?$t&&dl($t.elementType)&&(hr=Mm):hr=Xg;if(hr&&(hr=hr(A,$t))){xm(mn,hr,_,ln);break e}Ai&&Ai(A,Xt,$t),A==="focusout"&&$t&&Xt.type==="number"&&$t.memoizedProps.value!=null&&Hc(Xt,"number",Xt.value)}switch(Ai=$t?Kl($t):window,A){case"focusin":(bp(Ai)||Ai.contentEditable==="true")&&(Ut=Ai,an=$t,nn=null);break;case"focusout":nn=an=Ut=null;break;case"mousedown":pi=!0;break;case"contextmenu":case"mouseup":case"dragend":pi=!1,yr(mn,_,ln);break;case"selectionchange":if(_c)break;case"keydown":case"keyup":yr(mn,_,ln)}var vr;if(Cm)e:{switch(A){case"compositionstart":var _r="onCompositionStart";break e;case"compositionend":_r="onCompositionEnd";break e;case"compositionupdate":_r="onCompositionUpdate";break e}_r=void 0}else zh?_m(A,_)&&(_r="onCompositionEnd"):A==="keydown"&&_.keyCode===229&&(_r="onCompositionStart");_r&&(Od&&_.locale!=="ko"&&(zh||_r!=="onCompositionStart"?_r==="onCompositionEnd"&&zh&&(vr=Ur()):(aa=ln,wi="value"in aa?aa.value:aa.textContent,zh=!0)),Ai=Up($t,_r),0<Ai.length&&(_r=new Xo(_r,A,null,_,ln),mn.push({event:_r,listeners:Ai}),vr?_r.data=vr:(vr=Fh(_),vr!==null&&(_r.data=vr)))),(vr=Ed?su(A,_):Hg(A,_))&&(_r=Up($t,"onBeforeInput"),0<_r.length&&(Ai=new Xo("onBeforeInput","beforeinput",null,_,ln),mn.push({event:Ai,listeners:_r}),Ai.data=vr)),Pp(mn,A,$t,_,ln)}MC(mn,g)})}function Fc(A,g,_){return{instance:A,listener:g,currentTarget:_}}function Up(A,g){for(var _=g+"Capture",O=[];A!==null;){var N=A,J=N.stateNode;if(N=N.tag,N!==5&&N!==26&&N!==27||J===null||(N=Zo(A,_),N!=null&&O.unshift(Fc(A,N,J)),N=Zo(A,g),N!=null&&O.push(Fc(A,N,J))),A.tag===3)return O;A=A.return}return[]}function F0(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function ks(A,g,_,O,N){for(var J=g._reactName,Me=[];_!==null&&_!==O;){var Ye=_,_t=Ye.alternate,$t=Ye.stateNode;if(Ye=Ye.tag,_t!==null&&_t===O)break;Ye!==5&&Ye!==26&&Ye!==27||$t===null||(_t=$t,N?($t=Zo(_,J),$t!=null&&Me.unshift(Fc(_,$t,_t))):N||($t=Zo(_,J),$t!=null&&Me.push(Fc(_,$t,_t)))),_=_.return}Me.length!==0&&A.push({event:g,listeners:Me})}var ba=/\r\n?/g,cy=/\u0000|\uFFFD/g;function Fv(A){return(typeof A=="string"?A:""+A).replace(ba,`
`).replace(cy,"")}function zc(A,g){return g=Fv(g),Fv(A)===g}function Fo(A,g,_,O,N,J){switch(_){case"children":typeof O=="string"?g==="body"||g==="textarea"&&O===""||qr(A,O):(typeof O=="number"||typeof O=="bigint")&&g!=="body"&&qr(A,""+O);break;case"className":mc(A,"class",O);break;case"tabIndex":mc(A,"tabindex",O);break;case"dir":case"role":case"viewBox":case"width":case"height":mc(A,_,O);break;case"style":Vo(A,O,J);break;case"data":if(g!=="object"){mc(A,"data",O);break}case"src":case"href":if(O===""&&(g!=="a"||_!=="href")){A.removeAttribute(_);break}if(O==null||typeof O=="function"||typeof O=="symbol"||typeof O=="boolean"){A.removeAttribute(_);break}O=El(""+O),A.setAttribute(_,O);break;case"action":case"formAction":if(typeof O=="function"){A.setAttribute(_,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof J=="function"&&(_==="formAction"?(g!=="input"&&Fo(A,g,"name",N.name,N,null),Fo(A,g,"formEncType",N.formEncType,N,null),Fo(A,g,"formMethod",N.formMethod,N,null),Fo(A,g,"formTarget",N.formTarget,N,null)):(Fo(A,g,"encType",N.encType,N,null),Fo(A,g,"method",N.method,N,null),Fo(A,g,"target",N.target,N,null)));if(O==null||typeof O=="symbol"||typeof O=="boolean"){A.removeAttribute(_);break}O=El(""+O),A.setAttribute(_,O);break;case"onClick":O!=null&&(A.onclick=Va);break;case"onScroll":O!=null&&Zr("scroll",A);break;case"onScrollEnd":O!=null&&Zr("scrollend",A);break;case"dangerouslySetInnerHTML":if(O!=null){if(typeof O!="object"||!("__html"in O))throw Error(i(61));if(_=O.__html,_!=null){if(N.children!=null)throw Error(i(60));A.innerHTML=_}}break;case"multiple":A.multiple=O&&typeof O!="function"&&typeof O!="symbol";break;case"muted":A.muted=O&&typeof O!="function"&&typeof O!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(O==null||typeof O=="function"||typeof O=="boolean"||typeof O=="symbol"){A.removeAttribute("xlink:href");break}_=El(""+O),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",_);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":O!=null&&typeof O!="function"&&typeof O!="symbol"?A.setAttribute(_,""+O):A.removeAttribute(_);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":O&&typeof O!="function"&&typeof O!="symbol"?A.setAttribute(_,""):A.removeAttribute(_);break;case"capture":case"download":O===!0?A.setAttribute(_,""):O!==!1&&O!=null&&typeof O!="function"&&typeof O!="symbol"?A.setAttribute(_,O):A.removeAttribute(_);break;case"cols":case"rows":case"size":case"span":O!=null&&typeof O!="function"&&typeof O!="symbol"&&!isNaN(O)&&1<=O?A.setAttribute(_,O):A.removeAttribute(_);break;case"rowSpan":case"start":O==null||typeof O=="function"||typeof O=="symbol"||isNaN(O)?A.removeAttribute(_):A.setAttribute(_,O);break;case"popover":Zr("beforetoggle",A),Zr("toggle",A),Vc(A,"popover",O);break;case"xlinkActuate":ma(A,"http://www.w3.org/1999/xlink","xlink:actuate",O);break;case"xlinkArcrole":ma(A,"http://www.w3.org/1999/xlink","xlink:arcrole",O);break;case"xlinkRole":ma(A,"http://www.w3.org/1999/xlink","xlink:role",O);break;case"xlinkShow":ma(A,"http://www.w3.org/1999/xlink","xlink:show",O);break;case"xlinkTitle":ma(A,"http://www.w3.org/1999/xlink","xlink:title",O);break;case"xlinkType":ma(A,"http://www.w3.org/1999/xlink","xlink:type",O);break;case"xmlBase":ma(A,"http://www.w3.org/XML/1998/namespace","xml:base",O);break;case"xmlLang":ma(A,"http://www.w3.org/XML/1998/namespace","xml:lang",O);break;case"xmlSpace":ma(A,"http://www.w3.org/XML/1998/namespace","xml:space",O);break;case"is":Vc(A,"is",O);break;case"innerText":case"textContent":break;default:(!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(_=Cu.get(_)||_,Vc(A,_,O))}}function Kp(A,g,_,O,N,J){switch(_){case"style":Vo(A,O,J);break;case"dangerouslySetInnerHTML":if(O!=null){if(typeof O!="object"||!("__html"in O))throw Error(i(61));if(_=O.__html,_!=null){if(N.children!=null)throw Error(i(60));A.innerHTML=_}}break;case"children":typeof O=="string"?qr(A,O):(typeof O=="number"||typeof O=="bigint")&&qr(A,""+O);break;case"onScroll":O!=null&&Zr("scroll",A);break;case"onScrollEnd":O!=null&&Zr("scrollend",A);break;case"onClick":O!=null&&(A.onclick=Va);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Dr.hasOwnProperty(_))e:{if(_[0]==="o"&&_[1]==="n"&&(N=_.endsWith("Capture"),g=_.slice(2,N?_.length-7:void 0),J=A[Ci]||null,J=J!=null?J[_]:null,typeof J=="function"&&A.removeEventListener(g,J,N),typeof O=="function")){typeof J!="function"&&J!==null&&(_ in A?A[_]=null:A.hasAttribute(_)&&A.removeAttribute(_)),A.addEventListener(g,O,N);break e}_ in A?A[_]=O:O===!0?A.setAttribute(_,""):Vc(A,_,O)}}}function Ca(A,g,_){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Zr("error",A),Zr("load",A);var O=!1,N=!1,J;for(J in _)if(_.hasOwnProperty(J)){var Me=_[J];if(Me!=null)switch(J){case"src":O=!0;break;case"srcSet":N=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,g));default:Fo(A,g,J,Me,_,null)}}N&&Fo(A,g,"srcSet",_.srcSet,_,null),O&&Fo(A,g,"src",_.src,_,null);return;case"input":Zr("invalid",A);var Ye=J=Me=N=null,_t=null,$t=null;for(O in _)if(_.hasOwnProperty(O)){var ln=_[O];if(ln!=null)switch(O){case"name":N=ln;break;case"type":Me=ln;break;case"checked":_t=ln;break;case"defaultChecked":$t=ln;break;case"value":J=ln;break;case"defaultValue":Ye=ln;break;case"children":case"dangerouslySetInnerHTML":if(ln!=null)throw Error(i(137,g));break;default:Fo(A,g,O,ln,_,null)}}ru(A,J,Ye,_t,$t,Me,N,!1);return;case"select":Zr("invalid",A),O=Me=J=null;for(N in _)if(_.hasOwnProperty(N)&&(Ye=_[N],Ye!=null))switch(N){case"value":J=Ye;break;case"defaultValue":Me=Ye;break;case"multiple":O=Ye;default:Fo(A,g,N,Ye,_,null)}g=J,_=Me,A.multiple=!!O,g!=null?Hu(A,!!O,g,!1):_!=null&&Hu(A,!!O,_,!0);return;case"textarea":Zr("invalid",A),J=N=O=null;for(Me in _)if(_.hasOwnProperty(Me)&&(Ye=_[Me],Ye!=null))switch(Me){case"value":O=Ye;break;case"defaultValue":N=Ye;break;case"children":J=Ye;break;case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(i(91));break;default:Fo(A,g,Me,Ye,_,null)}Ds(A,O,N,J);return;case"option":for(_t in _)if(_.hasOwnProperty(_t)&&(O=_[_t],O!=null))switch(_t){case"selected":A.selected=O&&typeof O!="function"&&typeof O!="symbol";break;default:Fo(A,g,_t,O,_,null)}return;case"dialog":Zr("beforetoggle",A),Zr("toggle",A),Zr("cancel",A),Zr("close",A);break;case"iframe":case"object":Zr("load",A);break;case"video":case"audio":for(O=0;O<U0.length;O++)Zr(U0[O],A);break;case"image":Zr("error",A),Zr("load",A);break;case"details":Zr("toggle",A);break;case"embed":case"source":case"link":Zr("error",A),Zr("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($t in _)if(_.hasOwnProperty($t)&&(O=_[$t],O!=null))switch($t){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,g));default:Fo(A,g,$t,O,_,null)}return;default:if(dl(g)){for(ln in _)_.hasOwnProperty(ln)&&(O=_[ln],O!==void 0&&Kp(A,g,ln,O,_,void 0));return}}for(Ye in _)_.hasOwnProperty(Ye)&&(O=_[Ye],O!=null&&Fo(A,g,Ye,O,_,null))}function wC(A,g,_,O){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var N=null,J=null,Me=null,Ye=null,_t=null,$t=null,ln=null;for(rn in _){var mn=_[rn];if(_.hasOwnProperty(rn)&&mn!=null)switch(rn){case"checked":break;case"value":break;case"defaultValue":_t=mn;default:O.hasOwnProperty(rn)||Fo(A,g,rn,null,O,mn)}}for(var Xt in O){var rn=O[Xt];if(mn=_[Xt],O.hasOwnProperty(Xt)&&(rn!=null||mn!=null))switch(Xt){case"type":J=rn;break;case"name":N=rn;break;case"checked":$t=rn;break;case"defaultChecked":ln=rn;break;case"value":Me=rn;break;case"defaultValue":Ye=rn;break;case"children":case"dangerouslySetInnerHTML":if(rn!=null)throw Error(i(137,g));break;default:rn!==mn&&Fo(A,g,Xt,rn,O,mn)}}iu(A,Me,Ye,_t,$t,ln,J,N);return;case"select":rn=Me=Ye=Xt=null;for(J in _)if(_t=_[J],_.hasOwnProperty(J)&&_t!=null)switch(J){case"value":break;case"multiple":rn=_t;default:O.hasOwnProperty(J)||Fo(A,g,J,null,O,_t)}for(N in O)if(J=O[N],_t=_[N],O.hasOwnProperty(N)&&(J!=null||_t!=null))switch(N){case"value":Xt=J;break;case"defaultValue":Ye=J;break;case"multiple":Me=J;default:J!==_t&&Fo(A,g,N,J,O,_t)}g=Ye,_=Me,O=rn,Xt!=null?Hu(A,!!_,Xt,!1):!!O!=!!_&&(g!=null?Hu(A,!!_,g,!0):Hu(A,!!_,_?[]:"",!1));return;case"textarea":rn=Xt=null;for(Ye in _)if(N=_[Ye],_.hasOwnProperty(Ye)&&N!=null&&!O.hasOwnProperty(Ye))switch(Ye){case"value":break;case"children":break;default:Fo(A,g,Ye,null,O,N)}for(Me in O)if(N=O[Me],J=_[Me],O.hasOwnProperty(Me)&&(N!=null||J!=null))switch(Me){case"value":Xt=N;break;case"defaultValue":rn=N;break;case"children":break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:N!==J&&Fo(A,g,Me,N,O,J)}Pa(A,Xt,rn);return;case"option":for(var ki in _)if(Xt=_[ki],_.hasOwnProperty(ki)&&Xt!=null&&!O.hasOwnProperty(ki))switch(ki){case"selected":A.selected=!1;break;default:Fo(A,g,ki,null,O,Xt)}for(_t in O)if(Xt=O[_t],rn=_[_t],O.hasOwnProperty(_t)&&Xt!==rn&&(Xt!=null||rn!=null))switch(_t){case"selected":A.selected=Xt&&typeof Xt!="function"&&typeof Xt!="symbol";break;default:Fo(A,g,_t,Xt,O,rn)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ir in _)Xt=_[ir],_.hasOwnProperty(ir)&&Xt!=null&&!O.hasOwnProperty(ir)&&Fo(A,g,ir,null,O,Xt);for($t in O)if(Xt=O[$t],rn=_[$t],O.hasOwnProperty($t)&&Xt!==rn&&(Xt!=null||rn!=null))switch($t){case"children":case"dangerouslySetInnerHTML":if(Xt!=null)throw Error(i(137,g));break;default:Fo(A,g,$t,Xt,O,rn)}return;default:if(dl(g)){for(var ao in _)Xt=_[ao],_.hasOwnProperty(ao)&&Xt!==void 0&&!O.hasOwnProperty(ao)&&Kp(A,g,ao,void 0,O,Xt);for(ln in O)Xt=O[ln],rn=_[ln],!O.hasOwnProperty(ln)||Xt===rn||Xt===void 0&&rn===void 0||Kp(A,g,ln,Xt,O,rn);return}}for(var Lt in _)Xt=_[Lt],_.hasOwnProperty(Lt)&&Xt!=null&&!O.hasOwnProperty(Lt)&&Fo(A,g,Lt,null,O,Xt);for(mn in O)Xt=O[mn],rn=_[mn],!O.hasOwnProperty(mn)||Xt===rn||Xt==null&&rn==null||Fo(A,g,mn,Xt,O,rn)}function Ay(A){switch(A){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Xm(){if(typeof performance.getEntriesByType=="function"){for(var A=0,g=0,_=performance.getEntriesByType("resource"),O=0;O<_.length;O++){var N=_[O],J=N.transferSize,Me=N.initiatorType,Ye=N.duration;if(J&&Ye&&Ay(Me)){for(Me=0,Ye=N.responseEnd,O+=1;O<_.length;O++){var _t=_[O],$t=_t.startTime;if($t>Ye)break;var ln=_t.transferSize,mn=_t.initiatorType;ln&&Ay(mn)&&(_t=_t.responseEnd,Me+=ln*(_t<Ye?1:(Ye-$t)/(_t-$t)))}if(--O,g+=8*(J+Me)/(N.duration/1e3),A++,10<A)break}}if(0<A)return g/A/1e6}return navigator.connection&&(A=navigator.connection.downlink,typeof A=="number")?A:5}var Jm=null,zv=null;function eg(A){return A.nodeType===9?A:A.ownerDocument}function RA(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ac(A,g){if(A===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&g==="foreignObject"?0:A}function ef(A,g){return A==="textarea"||A==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var hy=null;function SC(){var A=window.event;return A&&A.type==="popstate"?A===hy?!1:(hy=A,!0):(hy=null,!1)}var EC=typeof setTimeout=="function"?setTimeout:void 0,n2=typeof clearTimeout=="function"?clearTimeout:void 0,jv=typeof Promise=="function"?Promise:void 0,Nv=typeof queueMicrotask=="function"?queueMicrotask:typeof jv<"u"?function(A){return jv.resolve(null).then(A).catch(DA)}:EC;function DA(A){setTimeout(function(){throw A})}function cr(A){return A==="head"}function tg(A,g){var _=g,O=0;do{var N=_.nextSibling;if(A.removeChild(_),N&&N.nodeType===8)if(_=N.data,_==="/$"||_==="/&"){if(O===0){A.removeChild(N),rg(g);return}O--}else if(_==="$"||_==="$?"||_==="$~"||_==="$!"||_==="&")O++;else if(_==="html")ng(A.ownerDocument.documentElement);else if(_==="head"){_=A.ownerDocument.head,ng(_);for(var J=_.firstChild;J;){var Me=J.nextSibling,Ye=J.nodeName;J[$a]||Ye==="SCRIPT"||Ye==="STYLE"||Ye==="LINK"&&J.rel.toLowerCase()==="stylesheet"||_.removeChild(J),J=Me}}else _==="body"&&ng(A.ownerDocument.body);_=N}while(_);rg(g)}function Lu(A,g){var _=A;A=0;do{var O=_.nextSibling;if(_.nodeType===1?g?(_._stashedDisplay=_.style.display,_.style.display="none"):(_.style.display=_._stashedDisplay||"",_.getAttribute("style")===""&&_.removeAttribute("style")):_.nodeType===3&&(g?(_._stashedText=_.nodeValue,_.nodeValue=""):_.nodeValue=_._stashedText||""),O&&O.nodeType===8)if(_=O.data,_==="/$"){if(A===0)break;A--}else _!=="$"&&_!=="$?"&&_!=="$~"&&_!=="$!"||A++;_=O}while(_)}function Lp(A){var g=A.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var _=g;switch(g=g.nextSibling,_.nodeName){case"HTML":case"HEAD":case"BODY":Lp(_),hl(_);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(_.rel.toLowerCase()==="stylesheet")continue}A.removeChild(_)}}function i2(A,g,_,O){for(;A.nodeType===1;){var N=_;if(A.nodeName.toLowerCase()!==g.toLowerCase()){if(!O&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(O){if(!A[$a])switch(g){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(J=A.getAttribute("rel"),J==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(J!==N.rel||A.getAttribute("href")!==(N.href==null||N.href===""?null:N.href)||A.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin)||A.getAttribute("title")!==(N.title==null?null:N.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(J=A.getAttribute("src"),(J!==(N.src==null?null:N.src)||A.getAttribute("type")!==(N.type==null?null:N.type)||A.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin))&&J&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(g==="input"&&A.type==="hidden"){var J=N.name==null?null:""+N.name;if(N.type==="hidden"&&A.getAttribute("name")===J)return A}else return A;if(A=lA(A.nextSibling),A===null)break}return null}function ls(A,g,_){if(g==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!_||(A=lA(A.nextSibling),A===null))return null;return A}function OC(A,g){for(;A.nodeType!==8;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!g||(A=lA(A.nextSibling),A===null))return null;return A}function tf(A){return A.data==="$?"||A.data==="$~"}function _a(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState!=="loading"}function Gv(A,g){var _=A.ownerDocument;if(A.data==="$~")A._reactRetry=g;else if(A.data!=="$?"||_.readyState!=="loading")g();else{var O=function(){g(),_.removeEventListener("DOMContentLoaded",O)};_.addEventListener("DOMContentLoaded",O),A._reactRetry=O}}function lA(A){for(;A!=null;A=A.nextSibling){var g=A.nodeType;if(g===1||g===3)break;if(g===8){if(g=A.data,g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"||g==="F!"||g==="F")break;if(g==="/$"||g==="/&")return null}}return A}var dy=null;function fy(A){A=A.nextSibling;for(var g=0;A;){if(A.nodeType===8){var _=A.data;if(_==="/$"||_==="/&"){if(g===0)return lA(A.nextSibling);g--}else _!=="$"&&_!=="$!"&&_!=="$?"&&_!=="$~"&&_!=="&"||g++}A=A.nextSibling}return null}function BC(A){A=A.previousSibling;for(var g=0;A;){if(A.nodeType===8){var _=A.data;if(_==="$"||_==="$!"||_==="$?"||_==="$~"||_==="&"){if(g===0)return A;g--}else _!=="/$"&&_!=="/&"||g++}A=A.previousSibling}return null}function Wv(A,g,_){switch(g=eg(_),A){case"html":if(A=g.documentElement,!A)throw Error(i(452));return A;case"head":if(A=g.head,!A)throw Error(i(453));return A;case"body":if(A=g.body,!A)throw Error(i(454));return A;default:throw Error(i(451))}}function ng(A){for(var g=A.attributes;g.length;)A.removeAttributeNode(g[0]);hl(A)}var PA=new Map,Qv=new Set;function ig(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var Sh=Qe.d;Qe.d={f:IC,r:z0,D:j0,C:py,L:N0,m:Yv,X:Fu,S:vl,M:r2};function IC(){var A=Sh.f(),g=J1();return A||g}function z0(A){var g=Qs(A);g!==null&&g.tag===5&&g.type==="form"?i0(g):Sh.r(A)}var ad=typeof document>"u"?null:document;function qv(A,g,_){var O=ad;if(O&&typeof g=="string"&&g){var N=ga(g);N='link[rel="'+A+'"][href="'+N+'"]',typeof _=="string"&&(N+='[crossorigin="'+_+'"]'),Qv.has(N)||(Qv.add(N),A={rel:A,crossOrigin:_,href:g},O.querySelector(N)===null&&(g=O.createElement("link"),Ca(g,"link",A),As(g),O.head.appendChild(g)))}}function j0(A){Sh.D(A),qv("dns-prefetch",A,null)}function py(A,g){Sh.C(A,g),qv("preconnect",A,g)}function N0(A,g,_){Sh.L(A,g,_);var O=ad;if(O&&A&&g){var N='link[rel="preload"][as="'+ga(g)+'"]';g==="image"&&_&&_.imageSrcSet?(N+='[imagesrcset="'+ga(_.imageSrcSet)+'"]',typeof _.imageSizes=="string"&&(N+='[imagesizes="'+ga(_.imageSizes)+'"]')):N+='[href="'+ga(A)+'"]';var J=N;switch(g){case"style":J=u(A);break;case"script":J=B(A)}PA.has(J)||(A=y({rel:"preload",href:g==="image"&&_&&_.imageSrcSet?void 0:A,as:g},_),PA.set(J,A),O.querySelector(N)!==null||g==="style"&&O.querySelector(d(J))||g==="script"&&O.querySelector(D(J))||(g=O.createElement("link"),Ca(g,"link",A),As(g),O.head.appendChild(g)))}}function Yv(A,g){Sh.m(A,g);var _=ad;if(_&&A){var O=g&&typeof g.as=="string"?g.as:"script",N='link[rel="modulepreload"][as="'+ga(O)+'"][href="'+ga(A)+'"]',J=N;switch(O){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":J=B(A)}if(!PA.has(J)&&(A=y({rel:"modulepreload",href:A},g),PA.set(J,A),_.querySelector(N)===null)){switch(O){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(_.querySelector(D(J)))return}O=_.createElement("link"),Ca(O,"link",A),As(O),_.head.appendChild(O)}}}function vl(A,g,_){Sh.S(A,g,_);var O=ad;if(O&&A){var N=io(O).hoistableStyles,J=u(A);g=g||"default";var Me=N.get(J);if(!Me){var Ye={loading:0,preload:null};if(Me=O.querySelector(d(J)))Ye.loading=5;else{A=y({rel:"stylesheet",href:A,"data-precedence":g},_),(_=PA.get(J))&&te(A,_);var _t=Me=O.createElement("link");As(_t),Ca(_t,"link",A),_t._p=new Promise(function($t,ln){_t.onload=$t,_t.onerror=ln}),_t.addEventListener("load",function(){Ye.loading|=1}),_t.addEventListener("error",function(){Ye.loading|=2}),Ye.loading|=4,W(Me,g,O)}Me={type:"stylesheet",instance:Me,count:1,state:Ye},N.set(J,Me)}}}function Fu(A,g){Sh.X(A,g);var _=ad;if(_&&A){var O=io(_).hoistableScripts,N=B(A),J=O.get(N);J||(J=_.querySelector(D(N)),J||(A=y({src:A,async:!0},g),(g=PA.get(N))&&re(A,g),J=_.createElement("script"),As(J),Ca(J,"link",A),_.head.appendChild(J)),J={type:"script",instance:J,count:1,state:null},O.set(N,J))}}function r2(A,g){Sh.M(A,g);var _=ad;if(_&&A){var O=io(_).hoistableScripts,N=B(A),J=O.get(N);J||(J=_.querySelector(D(N)),J||(A=y({src:A,async:!0,type:"module"},g),(g=PA.get(N))&&re(A,g),J=_.createElement("script"),As(J),Ca(J,"link",A),_.head.appendChild(J)),J={type:"script",instance:J,count:1,state:null},O.set(N,J))}}function f(A,g,_,O){var N=(N=bt.current)?ig(N):null;if(!N)throw Error(i(446));switch(A){case"meta":case"title":return null;case"style":return typeof _.precedence=="string"&&typeof _.href=="string"?(g=u(_.href),_=io(N).hoistableStyles,O=_.get(g),O||(O={type:"style",instance:null,count:0,state:null},_.set(g,O)),O):{type:"void",instance:null,count:0,state:null};case"link":if(_.rel==="stylesheet"&&typeof _.href=="string"&&typeof _.precedence=="string"){A=u(_.href);var J=io(N).hoistableStyles,Me=J.get(A);if(Me||(N=N.ownerDocument||N,Me={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},J.set(A,Me),(J=N.querySelector(d(A)))&&!J._p&&(Me.instance=J,Me.state.loading=5),PA.has(A)||(_={rel:"preload",as:"style",href:_.href,crossOrigin:_.crossOrigin,integrity:_.integrity,media:_.media,hrefLang:_.hrefLang,referrerPolicy:_.referrerPolicy},PA.set(A,_),J||S(N,A,_,Me.state))),g&&O===null)throw Error(i(528,""));return Me}if(g&&O!==null)throw Error(i(529,""));return null;case"script":return g=_.async,_=_.src,typeof _=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=B(_),_=io(N).hoistableScripts,O=_.get(g),O||(O={type:"script",instance:null,count:0,state:null},_.set(g,O)),O):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,A))}}function u(A){return'href="'+ga(A)+'"'}function d(A){return'link[rel="stylesheet"]['+A+"]"}function b(A){return y({},A,{"data-precedence":A.precedence,precedence:null})}function S(A,g,_,O){A.querySelector('link[rel="preload"][as="style"]['+g+"]")?O.loading=1:(g=A.createElement("link"),O.preload=g,g.addEventListener("load",function(){return O.loading|=1}),g.addEventListener("error",function(){return O.loading|=2}),Ca(g,"link",_),As(g),A.head.appendChild(g))}function B(A){return'[src="'+ga(A)+'"]'}function D(A){return"script[async]"+A}function K(A,g,_){if(g.count++,g.instance===null)switch(g.type){case"style":var O=A.querySelector('style[data-href~="'+ga(_.href)+'"]');if(O)return g.instance=O,As(O),O;var N=y({},_,{"data-href":_.href,"data-precedence":_.precedence,href:null,precedence:null});return O=(A.ownerDocument||A).createElement("style"),As(O),Ca(O,"style",N),W(O,_.precedence,A),g.instance=O;case"stylesheet":N=u(_.href);var J=A.querySelector(d(N));if(J)return g.state.loading|=4,g.instance=J,As(J),J;O=b(_),(N=PA.get(N))&&te(O,N),J=(A.ownerDocument||A).createElement("link"),As(J);var Me=J;return Me._p=new Promise(function(Ye,_t){Me.onload=Ye,Me.onerror=_t}),Ca(J,"link",O),g.state.loading|=4,W(J,_.precedence,A),g.instance=J;case"script":return J=B(_.src),(N=A.querySelector(D(J)))?(g.instance=N,As(N),N):(O=_,(N=PA.get(J))&&(O=y({},_),re(O,N)),A=A.ownerDocument||A,N=A.createElement("script"),As(N),Ca(N,"link",O),A.head.appendChild(N),g.instance=N);case"void":return null;default:throw Error(i(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(O=g.instance,g.state.loading|=4,W(O,_.precedence,A));return g.instance}function W(A,g,_){for(var O=_.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),N=O.length?O[O.length-1]:null,J=N,Me=0;Me<O.length;Me++){var Ye=O[Me];if(Ye.dataset.precedence===g)J=Ye;else if(J!==N)break}J?J.parentNode.insertBefore(A,J.nextSibling):(g=_.nodeType===9?_.head:_,g.insertBefore(A,g.firstChild))}function te(A,g){A.crossOrigin==null&&(A.crossOrigin=g.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=g.referrerPolicy),A.title==null&&(A.title=g.title)}function re(A,g){A.crossOrigin==null&&(A.crossOrigin=g.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=g.referrerPolicy),A.integrity==null&&(A.integrity=g.integrity)}var Ae=null;function Oe(A,g,_){if(Ae===null){var O=new Map,N=Ae=new Map;N.set(_,O)}else N=Ae,O=N.get(_),O||(O=new Map,N.set(_,O));if(O.has(A))return O;for(O.set(A,null),_=_.getElementsByTagName(A),N=0;N<_.length;N++){var J=_[N];if(!(J[$a]||J[sn]||A==="link"&&J.getAttribute("rel")==="stylesheet")&&J.namespaceURI!=="http://www.w3.org/2000/svg"){var Me=J.getAttribute(g)||"";Me=A+Me;var Ye=O.get(Me);Ye?Ye.push(J):O.set(Me,[J])}}return O}function Pe(A,g,_){A=A.ownerDocument||A,A.head.insertBefore(_,g==="title"?A.querySelector("head > title"):null)}function Le(A,g,_){if(_===1||g.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;switch(g.rel){case"stylesheet":return A=g.disabled,typeof g.precedence=="string"&&A==null;default:return!0}case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function We(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}function He(A,g,_,O){if(_.type==="stylesheet"&&(typeof O.media!="string"||matchMedia(O.media).matches!==!1)&&(_.state.loading&4)===0){if(_.instance===null){var N=u(O.href),J=g.querySelector(d(N));if(J){g=J._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(A.count++,A=ft.bind(A),g.then(A,A)),_.state.loading|=4,_.instance=J,As(J);return}J=g.ownerDocument||g,O=b(O),(N=PA.get(N))&&te(O,N),J=J.createElement("link"),As(J);var Me=J;Me._p=new Promise(function(Ye,_t){Me.onload=Ye,Me.onerror=_t}),Ca(J,"link",O),_.instance=J}A.stylesheets===null&&(A.stylesheets=new Map),A.stylesheets.set(_,g),(g=_.state.preload)&&(_.state.loading&3)===0&&(A.count++,_=ft.bind(A),g.addEventListener("load",_),g.addEventListener("error",_))}}var at=0;function Rt(A,g){return A.stylesheets&&A.count===0&&zt(A,A.stylesheets),0<A.count||0<A.imgCount?function(_){var O=setTimeout(function(){if(A.stylesheets&&zt(A,A.stylesheets),A.unsuspend){var J=A.unsuspend;A.unsuspend=null,J()}},6e4+g);0<A.imgBytes&&at===0&&(at=62500*Xm());var N=setTimeout(function(){if(A.waitingForImages=!1,A.count===0&&(A.stylesheets&&zt(A,A.stylesheets),A.unsuspend)){var J=A.unsuspend;A.unsuspend=null,J()}},(A.imgBytes>at?50:800)+g);return A.unsuspend=_,function(){A.unsuspend=null,clearTimeout(O),clearTimeout(N)}}:null}function ft(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zt(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var Ct=null;function zt(A,g){A.stylesheets=null,A.unsuspend!==null&&(A.count++,Ct=new Map,g.forEach(en,A),Ct=null,ft.call(A))}function en(A,g){if(!(g.state.loading&4)){var _=Ct.get(A);if(_)var O=_.get(null);else{_=new Map,Ct.set(A,_);for(var N=A.querySelectorAll("link[data-precedence],style[data-precedence]"),J=0;J<N.length;J++){var Me=N[J];(Me.nodeName==="LINK"||Me.getAttribute("media")!=="not all")&&(_.set(Me.dataset.precedence,Me),O=Me)}O&&_.set(null,O)}N=g.instance,Me=N.getAttribute("data-precedence"),J=_.get(Me)||O,J===O&&_.set(null,N),_.set(Me,N),this.count++,O=ft.bind(this),N.addEventListener("load",O),N.addEventListener("error",O),J?J.parentNode.insertBefore(N,J.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(N,A.firstChild)),g.state.loading|=4}}var An={$$typeof:V,Provider:null,Consumer:null,_currentValue:et,_currentValue2:et,_threadCount:0};function Gn(A,g,_,O,N,J,Me,Ye,_t){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ai(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ai(0),this.hiddenUpdates=ai(null),this.identifierPrefix=O,this.onUncaughtError=N,this.onCaughtError=J,this.onRecoverableError=Me,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_t,this.incompleteTransitions=new Map}function Un(A,g,_,O,N,J,Me,Ye,_t,$t,ln,mn){return A=new Gn(A,g,_,Me,_t,$t,ln,mn,Ye),g=1,J===!0&&(g|=24),J=fl(3,null,null,g),A.current=J,J.stateNode=A,g=la(),g.refCount++,A.pooledCache=g,g.refCount++,J.memoizedState={element:O,isDehydrated:_,cache:g},Qr(J),A}function Nn(A){return A?(A=Zu,A):Zu}function xi(A,g,_,O,N,J){N=Nn(N),O.context===null?O.context=N:O.pendingContext=N,O=rA(g),O.payload={element:_},J=J===void 0?null:J,J!==null&&(O.callback=J),_=Bu(A,O,g),_!==null&&(Dc(_,A,g),Nd(_,A,g))}function zn(A,g){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var _=A.retryLane;A.retryLane=_!==0&&_<g?_:g}}function jn(A,g){zn(A,g),(A=A.alternate)&&zn(A,g)}function on(A){if(A.tag===13||A.tag===31){var g=Jc(A,67108864);g!==null&&Dc(g,A,67108864),jn(A,67108864)}}function Ni(A){if(A.tag===13||A.tag===31){var g=Rc();g=Zt(g);var _=Jc(A,g);_!==null&&Dc(_,A,g),jn(A,g)}}var $i=!0;function Di(A,g,_,O){var N=Ie.T;Ie.T=null;var J=Qe.p;try{Qe.p=2,Kr(A,g,_,O)}finally{Qe.p=J,Ie.T=N}}function mi(A,g,_,O){var N=Ie.T;Ie.T=null;var J=Qe.p;try{Qe.p=8,Kr(A,g,_,O)}finally{Qe.p=J,Ie.T=N}}function Kr(A,g,_,O){if($i){var N=Ks(O);if(N===null)uy(A,g,O,ca,_),rl(A,O);else if(ja(N,A,g,_,O))O.stopPropagation();else if(rl(A,O),g&4&&-1<uA.indexOf(A)){for(;N!==null;){var J=Qs(N);if(J!==null)switch(J.tag){case 3:if(J=J.stateNode,J.current.memoizedState.isDehydrated){var Me=fn(J.pendingLanes);if(Me!==0){var Ye=J;for(Ye.pendingLanes|=2,Ye.entangledLanes|=2;Me;){var _t=1<<31-ge(Me);Ye.entanglements[1]|=_t,Me&=~_t}TA(J),(Yo&6)===0&&(kp=Yn()+500,D0(0))}}break;case 31:case 13:Ye=Jc(J,2),Ye!==null&&Dc(Ye,J,2),J1(),jn(J,2)}if(J=Ks(O),J===null&&uy(A,g,O,ca,_),J===N)break;N=J}N!==null&&O.stopPropagation()}else uy(A,g,O,null,_)}}function Ks(A){return A=Ps(A),bl(A)}var ca=null;function bl(A){if(ca=null,A=fo(A),A!==null){var g=o(A);if(g===null)A=null;else{var _=g.tag;if(_===13){if(A=s(g),A!==null)return A;A=null}else if(_===31){if(A=a(g),A!==null)return A;A=null}else if(_===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;A=null}else g!==A&&(A=null)}}return ca=A,null}function jc(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dn()){case Tt:return 2;case _e:return 8;case oe:case ee:return 32;case ne:return 268435456;default:return 32}default:return 32}}var du=!1,Vs=null,zo=null,Ls=null,xa=new Map,Ma=new Map,wa=[],uA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function rl(A,g){switch(A){case"focusin":case"focusout":Vs=null;break;case"dragenter":case"dragleave":zo=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":xa.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ma.delete(g.pointerId)}}function ol(A,g,_,O,N,J){return A===null||A.nativeEvent!==J?(A={blockedOn:g,domEventName:_,eventSystemFlags:O,nativeEvent:J,targetContainers:[N]},g!==null&&(g=Qs(g),g!==null&&on(g)),A):(A.eventSystemFlags|=O,g=A.targetContainers,N!==null&&g.indexOf(N)===-1&&g.push(N),A)}function ja(A,g,_,O,N){switch(g){case"focusin":return Vs=ol(Vs,A,g,_,O,N),!0;case"dragenter":return zo=ol(zo,A,g,_,O,N),!0;case"mouseover":return Ls=ol(Ls,A,g,_,O,N),!0;case"pointerover":var J=N.pointerId;return xa.set(J,ol(xa.get(J)||null,A,g,_,O,N)),!0;case"gotpointercapture":return J=N.pointerId,Ma.set(J,ol(Ma.get(J)||null,A,g,_,O,N)),!0}return!1}function Na(A){var g=fo(A.target);if(g!==null){var _=o(g);if(_!==null){if(g=_.tag,g===13){if(g=s(_),g!==null){A.blockedOn=g,ea(A.priority,function(){Ni(_)});return}}else if(g===31){if(g=a(_),g!==null){A.blockedOn=g,ea(A.priority,function(){Ni(_)});return}}else if(g===3&&_.stateNode.current.memoizedState.isDehydrated){A.blockedOn=_.tag===3?_.stateNode.containerInfo:null;return}}}A.blockedOn=null}function Sa(A){if(A.blockedOn!==null)return!1;for(var g=A.targetContainers;0<g.length;){var _=Ks(A.nativeEvent);if(_===null){_=A.nativeEvent;var O=new _.constructor(_.type,_);Go=O,_.target.dispatchEvent(O),Go=null}else return g=Qs(_),g!==null&&on(g),A.blockedOn=_,!1;g.shift()}return!0}function Ea(A,g,_){Sa(A)&&_.delete(g)}function Ts(){du=!1,Vs!==null&&Sa(Vs)&&(Vs=null),zo!==null&&Sa(zo)&&(zo=null),Ls!==null&&Sa(Ls)&&(Ls=null),xa.forEach(Ea),Ma.forEach(Ea)}function zu(A,g){A.blockedOn===g&&(A.blockedOn=null,du||(du=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Ts)))}var nf=null;function UA(A){nf!==A&&(nf=A,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){nf===A&&(nf=null);for(var g=0;g<A.length;g+=3){var _=A[g],O=A[g+1],N=A[g+2];if(typeof O!="function"){if(bl(O||_)===null)continue;break}var J=Qs(_);J!==null&&(A.splice(g,3),g-=3,gh(J,{pending:!0,data:N,method:_.method,action:O},O,N))}}))}function rg(A){function g(_t){return zu(_t,A)}Vs!==null&&zu(Vs,A),zo!==null&&zu(zo,A),Ls!==null&&zu(Ls,A),xa.forEach(g),Ma.forEach(g);for(var _=0;_<wa.length;_++){var O=wa[_];O.blockedOn===A&&(O.blockedOn=null)}for(;0<wa.length&&(_=wa[0],_.blockedOn===null);)Na(_),_.blockedOn===null&&wa.shift();if(_=(A.ownerDocument||A).$$reactFormReplay,_!=null)for(O=0;O<_.length;O+=3){var N=_[O],J=_[O+1],Me=N[Ci]||null;if(typeof J=="function")Me||UA(_);else if(Me){var Ye=null;if(J&&J.hasAttribute("formAction")){if(N=J,Me=J[Ci]||null)Ye=Me.formAction;else if(bl(N)!==null)continue}else Ye=Me.action;typeof Ye=="function"?_[O+1]=Ye:(_.splice(O,3),O-=3),UA(_)}}}function Cl(){function A(J){J.canIntercept&&J.info==="react-transition"&&J.intercept({handler:function(){return new Promise(function(Me){return N=Me})},focusReset:"manual",scroll:"manual"})}function g(){N!==null&&(N(),N=null),O||setTimeout(_,20)}function _(){if(!O&&!navigation.transition){var J=navigation.currentEntry;J&&J.url!=null&&navigation.navigate(J.url,{state:J.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var O=!1,N=null;return navigation.addEventListener("navigate",A),navigation.addEventListener("navigatesuccess",g),navigation.addEventListener("navigateerror",g),setTimeout(_,100),function(){O=!0,navigation.removeEventListener("navigate",A),navigation.removeEventListener("navigatesuccess",g),navigation.removeEventListener("navigateerror",g),N!==null&&(N(),N=null)}}}function Eh(A){this._internalRoot=A}rf.prototype.render=Eh.prototype.render=function(A){var g=this._internalRoot;if(g===null)throw Error(i(409));var _=g.current,O=Rc();xi(_,O,A,g,null,null)},rf.prototype.unmount=Eh.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var g=A.containerInfo;xi(A.current,2,null,A,null,null),J1(),g[Ui]=null}};function rf(A){this._internalRoot=A}rf.prototype.unstable_scheduleHydration=function(A){if(A){var g=Zi();A={blockedOn:null,target:A,priority:g};for(var _=0;_<wa.length&&g!==0&&g<wa[_].priority;_++);wa.splice(_,0,A),_===0&&Na(A)}};var Fp=e.version;if(Fp!=="19.2.0")throw Error(i(527,Fp,"19.2.0"));Qe.findDOMNode=function(A){var g=A._reactInternals;if(g===void 0)throw typeof A.render=="function"?Error(i(188)):(A=Object.keys(A).join(","),Error(i(268,A)));return A=h(g),A=A!==null?m(A):null,A=A===null?null:A.stateNode,A};var og={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Ie,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var G0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!G0.isDisabled&&G0.supportsFiber)try{Ue=G0.inject(og),Ve=G0}catch{}}return s2.createRoot=function(A,g){if(!r(A))throw Error(i(299));var _=!1,O="",N=zm,J=k1,Me=sC;return g!=null&&(g.unstable_strictMode===!0&&(_=!0),g.identifierPrefix!==void 0&&(O=g.identifierPrefix),g.onUncaughtError!==void 0&&(N=g.onUncaughtError),g.onCaughtError!==void 0&&(J=g.onCaughtError),g.onRecoverableError!==void 0&&(Me=g.onRecoverableError)),g=Un(A,1,!1,null,null,_,O,null,N,J,Me,Cl),A[Ui]=g.current,ly(A),new Eh(g)},s2.hydrateRoot=function(A,g,_){if(!r(A))throw Error(i(299));var O=!1,N="",J=zm,Me=k1,Ye=sC,_t=null;return _!=null&&(_.unstable_strictMode===!0&&(O=!0),_.identifierPrefix!==void 0&&(N=_.identifierPrefix),_.onUncaughtError!==void 0&&(J=_.onUncaughtError),_.onCaughtError!==void 0&&(Me=_.onCaughtError),_.onRecoverableError!==void 0&&(Ye=_.onRecoverableError),_.formState!==void 0&&(_t=_.formState)),g=Un(A,1,!0,g,_??null,O,N,_t,J,Me,Ye,Cl),g.context=Nn(null),_=g.current,O=Rc(),O=Zt(O),N=rA(O),N.callback=null,Bu(_,N,O),_=O,g.current.lanes=_,Hi(g,_),TA(g),A[Ui]=g.current,ly(A),new rf(g)},s2.version="19.2.0",s2}var GL;function $ae(){if(GL)return eO.exports;GL=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),eO.exports=Yae(),eO.exports}var XH=$ae();const Vae="modulepreload",Hae=function(n){return"/maputnik/"+n},WL={},kC=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let h=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(M=>({status:"fulfilled",value:M}),M=>({status:"rejected",reason:M}))))};var s=h;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");r=h(t.map(m=>{if(m=Hae(m),m in WL)return;WL[m]=!0;const y=m.endsWith(".css"),M=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${M}`))return;const x=document.createElement("link");if(x.rel=y?"stylesheet":Vae,y||(x.as="script"),x.crossOrigin="",x.href=m,c&&x.setAttribute("nonce",c),document.head.appendChild(x),y)return new Promise((k,P)=>{x.addEventListener("load",k),x.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return r.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},Zae=(n,e,t)=>{const i=n[e];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((r,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},Gr=n=>typeof n=="string",a2=()=>{let n,e;const t=new Promise((i,r)=>{n=i,e=r});return t.resolve=n,t.reject=e,t},QL=n=>n==null?"":""+n,Xae=(n,e,t)=>{n.forEach(i=>{e[i]&&(t[i]=e[i])})},Jae=/###/g,qL=n=>n&&n.indexOf("###")>-1?n.replace(Jae,"."):n,YL=n=>!n||Gr(n),i3=(n,e,t)=>{const i=Gr(e)?e.split("."):e;let r=0;for(;r<i.length-1;){if(YL(n))return{};const o=qL(i[r]);!n[o]&&t&&(n[o]=new t),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={},++r}return YL(n)?{}:{obj:n,k:qL(i[r])}},$L=(n,e,t)=>{const{obj:i,k:r}=i3(n,e,Object);if(i!==void 0||e.length===1){i[r]=t;return}let o=e[e.length-1],s=e.slice(0,e.length-1),a=i3(n,s,Object);for(;a.obj===void 0&&s.length;)o=`${s[s.length-1]}.${o}`,s=s.slice(0,s.length-1),a=i3(n,s,Object),a?.obj&&typeof a.obj[`${a.k}.${o}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${o}`]=t},ele=(n,e,t,i)=>{const{obj:r,k:o}=i3(n,e,Object);r[o]=r[o]||[],r[o].push(t)},Rw=(n,e)=>{const{obj:t,k:i}=i3(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i]},tle=(n,e,t)=>{const i=Rw(n,t);return i!==void 0?i:Rw(e,t)},JH=(n,e,t)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in n?Gr(n[i])||n[i]instanceof String||Gr(e[i])||e[i]instanceof String?t&&(n[i]=e[i]):JH(n[i],e[i],t):n[i]=e[i]);return n},TC=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var nle={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const ile=n=>Gr(n)?n.replace(/[&<>"'\/]/g,e=>nle[e]):n;class rle{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const ole=[" ",",","?","!",";"],sle=new rle(20),ale=(n,e,t)=>{e=e||"",t=t||"";const i=ole.filter(s=>e.indexOf(s)<0&&t.indexOf(s)<0);if(i.length===0)return!0;const r=sle.getRegExp(`(${i.map(s=>s==="?"?"\\?":s).join("|")})`);let o=!r.test(n);if(!o){const s=n.indexOf(t);s>0&&!r.test(n.substring(0,s))&&(o=!0)}return o},ZT=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const i=e.split(t);let r=n;for(let o=0;o<i.length;){if(!r||typeof r!="object")return;let s,a="";for(let c=o;c<i.length;++c)if(c!==o&&(a+=t),a+=i[c],s=r[a],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&c<i.length-1)continue;o+=c-o+1;break}r=s}return r},T3=n=>n?.replace("_","-"),lle={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};class Dw{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||lle,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,r){return r&&!this.debug?null:(Gr(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Dw(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Dw(this.logger,e)}}var Cg=new Dw;class rE{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const r=this.observers[i].get(t)||0;this.observers[i].set(t,r+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([r,o])=>{for(let s=0;s<o;s++)r(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,o])=>{for(let s=0;s<o;s++)r.apply(r,[e,...t])})}}class VL extends rE{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i,r={}){const o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,s=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],i&&(Array.isArray(i)?a.push(...i):Gr(i)&&o?a.push(...i.split(o)):a.push(i)));const c=Rw(this.data,a);return!c&&!t&&!i&&e.indexOf(".")>-1&&(e=a[0],t=a[1],i=a.slice(2).join(".")),c||!s||!Gr(i)?c:ZT(this.data?.[e]?.[t],i,o)}addResource(e,t,i,r,o={silent:!1}){const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let a=[e,t];i&&(a=a.concat(s?i.split(s):i)),e.indexOf(".")>-1&&(a=e.split("."),r=t,t=a[1]),this.addNamespaces(t),$L(this.data,a,r),o.silent||this.emit("added",e,t,i,r)}addResources(e,t,i,r={silent:!1}){for(const o in i)(Gr(i[o])||Array.isArray(i[o]))&&this.addResource(e,t,o,i[o],{silent:!0});r.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,r,o,s={silent:!1,skipCopy:!1}){let a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),r=i,i=t,t=a[1]),this.addNamespaces(t);let c=Rw(this.data,a)||{};s.skipCopy||(i=JSON.parse(JSON.stringify(i))),r?JH(c,i,o):c={...c,...i},$L(this.data,a,c),s.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(r=>t[r]&&Object.keys(t[r]).length>0)}toJSON(){return this.data}}var eZ={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,i,r){return n.forEach(o=>{e=this.processors[o]?.process(e,t,i,r)??e}),e}};const tZ=Symbol("i18next/PATH_KEY");function ule(){const n=[],e=Object.create(null);let t;return e.get=(i,r)=>(t?.revoke?.(),r===tZ?n:(n.push(r),t=Proxy.revocable(i,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function XT(n,e){const{[tZ]:t}=n(ule());return t.join(e?.keySeparator??".")}const HL={},ZL=n=>!Gr(n)&&typeof n!="boolean"&&typeof n!="number";class Pw extends rE{constructor(e,t={}){super(),Xae(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Cg.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const i={...t};return e==null?!1:this.resolve(e,i)?.res!==void 0}extractFromKey(e,t){let i=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const r=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const s=i&&e.indexOf(i)>-1,a=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!ale(e,i,r);if(s&&!a){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:Gr(o)?[o]:o};const h=e.split(i);(i!==r||i===r&&this.options.ns.indexOf(h[0])>-1)&&(o=h.shift()),e=h.join(r)}return{key:e,namespaces:Gr(o)?[o]:o}}translate(e,t,i){let r=typeof t=="object"?{...t}:t;if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";typeof e=="function"&&(e=XT(e,{...this.options,...r})),Array.isArray(e)||(e=[String(e)]);const o=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:a,namespaces:c}=this.extractFromKey(e[e.length-1],r),h=c[c.length-1];let m=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;m===void 0&&(m=":");const y=r.lng||this.language,M=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(y?.toLowerCase()==="cimode")return M?o?{res:`${h}${m}${a}`,usedKey:a,exactUsedKey:a,usedLng:y,usedNS:h,usedParams:this.getUsedParamsDetails(r)}:`${h}${m}${a}`:o?{res:a,usedKey:a,exactUsedKey:a,usedLng:y,usedNS:h,usedParams:this.getUsedParamsDetails(r)}:a;const x=this.resolve(e,r);let k=x?.res;const P=x?.usedKey||a,F=x?.exactUsedKey||a,j=["[object Number]","[object Function]","[object RegExp]"],q=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,V=!this.i18nFormat||this.i18nFormat.handleAsObject,H=r.count!==void 0&&!Gr(r.count),G=Pw.hasDefaultValue(r),Y=H?this.pluralResolver.getSuffix(y,r.count,r):"",z=r.ordinal&&H?this.pluralResolver.getSuffix(y,r.count,{ordinal:!1}):"",se=H&&!r.ordinal&&r.count===0,le=se&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${Y}`]||r[`defaultValue${z}`]||r.defaultValue;let me=k;V&&!k&&G&&(me=le);const de=ZL(me),be=Object.prototype.toString.apply(me);if(V&&me&&de&&j.indexOf(be)<0&&!(Gr(q)&&Array.isArray(me))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Ee=this.options.returnedObjectHandler?this.options.returnedObjectHandler(P,me,{...r,ns:c}):`key '${a} (${this.language})' returned an object instead of string.`;return o?(x.res=Ee,x.usedParams=this.getUsedParamsDetails(r),x):Ee}if(s){const Ee=Array.isArray(me),De=Ee?[]:{},je=Ee?F:P;for(const Ie in me)if(Object.prototype.hasOwnProperty.call(me,Ie)){const Qe=`${je}${s}${Ie}`;G&&!k?De[Ie]=this.translate(Qe,{...r,defaultValue:ZL(le)?le[Ie]:void 0,joinArrays:!1,ns:c}):De[Ie]=this.translate(Qe,{...r,joinArrays:!1,ns:c}),De[Ie]===Qe&&(De[Ie]=me[Ie])}k=De}}else if(V&&Gr(q)&&Array.isArray(k))k=k.join(q),k&&(k=this.extendTranslation(k,e,r,i));else{let Ee=!1,De=!1;!this.isValidLookup(k)&&G&&(Ee=!0,k=le),this.isValidLookup(k)||(De=!0,k=a);const Ie=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&De?void 0:k,Qe=G&&le!==k&&this.options.updateMissing;if(De||Ee||Qe){if(this.logger.log(Qe?"updateKey":"missingKey",y,h,a,Qe?le:k),s){const we=this.resolve(a,{...r,keySeparator:!1});we&&we.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let et=[];const dt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&dt&&dt[0])for(let we=0;we<dt.length;we++)et.push(dt[we]);else this.options.saveMissingTo==="all"?et=this.languageUtils.toResolveHierarchy(r.lng||this.language):et.push(r.lng||this.language);const ke=(we,ze,xe)=>{const At=G&&xe!==k?xe:Ie;this.options.missingKeyHandler?this.options.missingKeyHandler(we,h,ze,At,Qe,r):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(we,h,ze,At,Qe,r),this.emit("missingKey",we,h,ze,k)};this.options.saveMissing&&(this.options.saveMissingPlurals&&H?et.forEach(we=>{const ze=this.pluralResolver.getSuffixes(we,r);se&&r[`defaultValue${this.options.pluralSeparator}zero`]&&ze.indexOf(`${this.options.pluralSeparator}zero`)<0&&ze.push(`${this.options.pluralSeparator}zero`),ze.forEach(xe=>{ke([we],a+xe,r[`defaultValue${xe}`]||le)})}):ke(et,a,le))}k=this.extendTranslation(k,e,r,x,i),De&&k===a&&this.options.appendNamespaceToMissingKey&&(k=`${h}${m}${a}`),(De||Ee)&&this.options.parseMissingKeyHandler&&(k=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${m}${a}`:a,Ee?k:void 0,r))}return o?(x.res=k,x.usedParams=this.getUsedParamsDetails(r),x):k}extendTranslation(e,t,i,r,o){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const c=Gr(e)&&(i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(c){const y=e.match(this.interpolator.nestingRegexp);h=y&&y.length}let m=i.replace&&!Gr(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(m={...this.options.interpolation.defaultVariables,...m}),e=this.interpolator.interpolate(e,m,i.lng||this.language||r.usedLng,i),c){const y=e.match(this.interpolator.nestingRegexp),M=y&&y.length;h<M&&(i.nest=!1)}!i.lng&&r&&r.res&&(i.lng=this.language||r.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,(...y)=>o?.[0]===y[0]&&!i.context?(this.logger.warn(`It seems you are nesting recursively key: ${y[0]} in key: ${t[0]}`),null):this.translate(...y,t),i)),i.interpolation&&this.interpolator.reset()}const s=i.postProcess||this.options.postProcess,a=Gr(s)?[s]:s;return e!=null&&a?.length&&i.applyPostProcessor!==!1&&(e=eZ.handle(a,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e,t={}){let i,r,o,s,a;return Gr(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(i))return;const h=this.extractFromKey(c,t),m=h.key;r=m;let y=h.namespaces;this.options.fallbackNS&&(y=y.concat(this.options.fallbackNS));const M=t.count!==void 0&&!Gr(t.count),x=M&&!t.ordinal&&t.count===0,k=t.context!==void 0&&(Gr(t.context)||typeof t.context=="number")&&t.context!=="",P=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);y.forEach(F=>{this.isValidLookup(i)||(a=F,!HL[`${P[0]}-${F}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(a)&&(HL[`${P[0]}-${F}`]=!0,this.logger.warn(`key "${r}" for languages "${P.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),P.forEach(j=>{if(this.isValidLookup(i))return;s=j;const q=[m];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(q,m,j,F,t);else{let H;M&&(H=this.pluralResolver.getSuffix(j,t.count,t));const G=`${this.options.pluralSeparator}zero`,Y=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(M&&(t.ordinal&&H.indexOf(Y)===0&&q.push(m+H.replace(Y,this.options.pluralSeparator)),q.push(m+H),x&&q.push(m+G)),k){const z=`${m}${this.options.contextSeparator||"_"}${t.context}`;q.push(z),M&&(t.ordinal&&H.indexOf(Y)===0&&q.push(z+H.replace(Y,this.options.pluralSeparator)),q.push(z+H),x&&q.push(z+G))}}let V;for(;V=q.pop();)this.isValidLookup(i)||(o=V,i=this.getResource(j,F,V,t))}))})}),{res:i,usedKey:r,exactUsedKey:o,usedLng:s,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,i,r={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,i,r):this.resourceStore.getResource(e,t,i,r)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!Gr(e.replace);let r=i?e.replace:e;if(i&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!i){r={...r};for(const o of t)delete r[o]}return r}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,t.length)&&e[i]!==void 0)return!0;return!1}}class XL{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Cg.create("languageUtils")}getScriptPartFromCode(e){if(e=T3(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=T3(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Gr(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(i=>{if(t)return;const r=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(r))&&(t=r)}),!t&&this.options.supportedLngs&&e.forEach(i=>{if(t)return;const r=this.getScriptPartFromCode(i);if(this.isSupportedCode(r))return t=r;const o=this.getLanguagePartFromCode(i);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(s=>{if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&(s.indexOf("-")>0&&o.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===o||s.indexOf(o)===0&&o.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Gr(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),r=[],o=s=>{s&&(this.isSupportedCode(s)?r.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return Gr(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):Gr(e)&&o(this.formatLanguageCode(e)),i.forEach(s=>{r.indexOf(s)<0&&o(this.formatLanguageCode(s))}),r}}const JL={zero:0,one:1,two:2,few:3,many:4,other:5},eF={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class cle{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Cg.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const i=T3(e==="dev"?"en":e),r=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:i,type:r});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let s;try{s=new Intl.PluralRules(i,{type:r})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),eF;if(!e.match(/-|_/))return eF;const c=this.languageUtils.getLanguagePartFromCode(e);s=this.getRule(c,t)}return this.pluralRulesCache[o]=s,s}needsPlural(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,i={}){return this.getSuffixes(e,i).map(r=>`${t}${r}`)}getSuffixes(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?i.resolvedOptions().pluralCategories.sort((r,o)=>JL[r]-JL[o]).map(r=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(e,t,i={}){const r=this.getRule(e,i);return r?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,i))}}const tF=(n,e,t,i=".",r=!0)=>{let o=tle(n,e,t);return!o&&r&&Gr(t)&&(o=ZT(n,t,i),o===void 0&&(o=ZT(e,t,i))),o},rO=n=>n.replace(/\$/g,"$$$$");class Ale{constructor(e={}){this.logger=Cg.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:i,useRawValueToEscape:r,prefix:o,prefixEscaped:s,suffix:a,suffixEscaped:c,formatSeparator:h,unescapeSuffix:m,unescapePrefix:y,nestingPrefix:M,nestingPrefixEscaped:x,nestingSuffix:k,nestingSuffixEscaped:P,nestingOptionsSeparator:F,maxReplaces:j,alwaysFormat:q}=e.interpolation;this.escape=t!==void 0?t:ile,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=o?TC(o):s||"{{",this.suffix=a?TC(a):c||"}}",this.formatSeparator=h||",",this.unescapePrefix=m?"":y||"-",this.unescapeSuffix=this.unescapePrefix?"":m||"",this.nestingPrefix=M?TC(M):x||TC("$t("),this.nestingSuffix=k?TC(k):P||TC(")"),this.nestingOptionsSeparator=F||",",this.maxReplaces=j||1e3,this.alwaysFormat=q!==void 0?q:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,i)=>t?.source===i?(t.lastIndex=0,t):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,i,r){let o,s,a;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=x=>{if(x.indexOf(this.formatSeparator)<0){const j=tF(t,c,x,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(j,void 0,i,{...r,...t,interpolationkey:x}):j}const k=x.split(this.formatSeparator),P=k.shift().trim(),F=k.join(this.formatSeparator).trim();return this.format(tF(t,c,P,this.options.keySeparator,this.options.ignoreJSONStructure),F,i,{...r,...t,interpolationkey:P})};this.resetRegExp();const m=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,y=r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:x=>rO(x)},{regex:this.regexp,safeValue:x=>this.escapeValue?rO(this.escape(x)):rO(x)}].forEach(x=>{for(a=0;o=x.regex.exec(e);){const k=o[1].trim();if(s=h(k),s===void 0)if(typeof m=="function"){const F=m(e,o,r);s=Gr(F)?F:""}else if(r&&Object.prototype.hasOwnProperty.call(r,k))s="";else if(y){s=o[0];continue}else this.logger.warn(`missed to pass in variable ${k} for interpolating ${e}`),s="";else!Gr(s)&&!this.useRawValueToEscape&&(s=QL(s));const P=x.safeValue(s);if(e=e.replace(o[0],P),y?(x.regex.lastIndex+=s.length,x.regex.lastIndex-=o[0].length):x.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t,i={}){let r,o,s;const a=(c,h)=>{const m=this.nestingOptionsSeparator;if(c.indexOf(m)<0)return c;const y=c.split(new RegExp(`${m}[ ]*{`));let M=`{${y[1]}`;c=y[0],M=this.interpolate(M,s);const x=M.match(/'/g),k=M.match(/"/g);((x?.length??0)%2===0&&!k||k.length%2!==0)&&(M=M.replace(/'/g,'"'));try{s=JSON.parse(M),h&&(s={...h,...s})}catch(P){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,P),`${c}${m}${M}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,c};for(;r=this.nestingRegexp.exec(e);){let c=[];s={...i},s=s.replace&&!Gr(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;const h=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(h!==-1&&(c=r[1].slice(h).split(this.formatSeparator).map(m=>m.trim()).filter(Boolean),r[1]=r[1].slice(0,h)),o=t(a.call(this,r[1].trim(),s),s),o&&r[0]===e&&!Gr(o))return o;Gr(o)||(o=QL(o)),o||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),o=""),c.length&&(o=c.reduce((m,y)=>this.format(m,y,i.lng,{...i,interpolationkey:r[1].trim()}),o.trim())),e=e.replace(r[0],o),this.regexp.lastIndex=0}return e}}const hle=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const i=n.split("(");e=i[0].toLowerCase().trim();const r=i[1].substring(0,i[1].length-1);e==="currency"&&r.indexOf(":")<0?t.currency||(t.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?t.range||(t.range=r.trim()):r.split(";").forEach(s=>{if(s){const[a,...c]=s.split(":"),h=c.join(":").trim().replace(/^'+|'+$/g,""),m=a.trim();t[m]||(t[m]=h),h==="false"&&(t[m]=!1),h==="true"&&(t[m]=!0),isNaN(h)||(t[m]=parseInt(h,10))}})}return{formatName:e,formatOptions:t}},nF=n=>{const e={};return(t,i,r)=>{let o=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(o={...o,[r.interpolationkey]:void 0});const s=i+JSON.stringify(o);let a=e[s];return a||(a=n(T3(i),r),e[s]=a),a(t)}},dle=n=>(e,t,i)=>n(T3(t),i)(e);class fle{constructor(e={}){this.logger=Cg.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const i=t.cacheInBuiltFormats?nF:dle;this.formats={number:i((r,o)=>{const s=new Intl.NumberFormat(r,{...o});return a=>s.format(a)}),currency:i((r,o)=>{const s=new Intl.NumberFormat(r,{...o,style:"currency"});return a=>s.format(a)}),datetime:i((r,o)=>{const s=new Intl.DateTimeFormat(r,{...o});return a=>s.format(a)}),relativetime:i((r,o)=>{const s=new Intl.RelativeTimeFormat(r,{...o});return a=>s.format(a,o.range||"day")}),list:i((r,o)=>{const s=new Intl.ListFormat(r,{...o});return a=>s.format(a)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=nF(t)}format(e,t,i,r={}){const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(a=>a.indexOf(")")>-1)){const a=o.findIndex(c=>c.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,a)].join(this.formatSeparator)}return o.reduce((a,c)=>{const{formatName:h,formatOptions:m}=hle(c);if(this.formats[h]){let y=a;try{const M=r?.formatParams?.[r.interpolationkey]||{},x=M.locale||M.lng||r.locale||r.lng||i;y=this.formats[h](a,x,{...m,...r,...M})}catch(M){this.logger.warn(M)}return y}else this.logger.warn(`there was no format function for ${h}`);return a},e)}}const ple=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class mle extends rE{constructor(e,t,i,r={}){super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=r,this.logger=Cg.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(i,r.backend,r)}queueLoad(e,t,i,r){const o={},s={},a={},c={};return e.forEach(h=>{let m=!0;t.forEach(y=>{const M=`${h}|${y}`;!i.reload&&this.store.hasResourceBundle(h,y)?this.state[M]=2:this.state[M]<0||(this.state[M]===1?s[M]===void 0&&(s[M]=!0):(this.state[M]=1,m=!1,s[M]===void 0&&(s[M]=!0),o[M]===void 0&&(o[M]=!0),c[y]===void 0&&(c[y]=!0)))}),m||(a[h]=!0)}),(Object.keys(o).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(o),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(c)}}loaded(e,t,i){const r=e.split("|"),o=r[0],s=r[1];t&&this.emit("failedLoading",o,s,t),!t&&i&&this.store.addResourceBundle(o,s,i,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&i&&(this.state[e]=0);const a={};this.queue.forEach(c=>{ele(c.loaded,[o],s),ple(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(h=>{a[h]||(a[h]={});const m=c.loaded[h];m.length&&m.forEach(y=>{a[h][y]===void 0&&(a[h][y]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(c=>!c.done)}read(e,t,i,r=0,o=this.retryTimeout,s){if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:i,tried:r,wait:o,callback:s});return}this.readingCalls++;const a=(h,m)=>{if(this.readingCalls--,this.waitingReads.length>0){const y=this.waitingReads.shift();this.read(y.lng,y.ns,y.fcName,y.tried,y.wait,y.callback)}if(h&&m&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,i,r+1,o*2,s)},o);return}s(h,m)},c=this.backend[i].bind(this.backend);if(c.length===2){try{const h=c(e,t);h&&typeof h.then=="function"?h.then(m=>a(null,m)).catch(a):a(null,h)}catch(h){a(h)}return}return c(e,t,a)}prepareLoading(e,t,i={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();Gr(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Gr(t)&&(t=[t]);const o=this.queueLoad(e,t,i,r);if(!o.toLoad.length)return o.pending.length||r(),null;o.toLoad.forEach(s=>{this.loadOne(s)})}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e,t=""){const i=e.split("|"),r=i[0],o=i[1];this.read(r,o,"read",void 0,void 0,(s,a)=>{s&&this.logger.warn(`${t}loading namespace ${o} for language ${r} failed`,s),!s&&a&&this.logger.log(`${t}loaded namespace ${o} for language ${r}`,a),this.loaded(e,s,a)})}saveMissing(e,t,i,r,o,s={},a=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend?.create){const c={...s,isUpdate:o},h=this.backend.create.bind(this.backend);if(h.length<6)try{let m;h.length===5?m=h(e,t,i,r,c):m=h(e,t,i,r),m&&typeof m.then=="function"?m.then(y=>a(null,y)).catch(a):a(null,m)}catch(m){a(m)}else h(e,t,i,r,a,c)}!e||!e[0]||this.store.addResource(e[0],t,i,r)}}}const iF=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Gr(n[1])&&(e.defaultValue=n[1]),Gr(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(i=>{e[i]=t[i]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),rF=n=>(Gr(n.ns)&&(n.ns=[n.ns]),Gr(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Gr(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),P5=()=>{},gle=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class R3 extends rE{constructor(e={},t){if(super(),this.options=rF(e),this.services={},this.logger=Cg,this.modules={external:[]},gle(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Gr(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const i=iF();this.options={...i,...this.options,...rF(e)},this.options.interpolation={...i.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?Cg.init(r(this.modules.logger),this.options):Cg.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=fle;const m=new XL(this.options);this.store=new VL(this.options.resources,this.options);const y=this.services;y.logger=Cg,y.resourceStore=this.store,y.languageUtils=m,y.pluralResolver=new cle(m,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(y.formatter=r(h),y.formatter.init&&y.formatter.init(y,this.options),this.options.interpolation.format=y.formatter.format.bind(y.formatter)),y.interpolator=new Ale(this.options),y.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},y.backendConnector=new mle(r(this.modules.backend),y.resourceStore,y,this.options),y.backendConnector.on("*",(x,...k)=>{this.emit(x,...k)}),this.modules.languageDetector&&(y.languageDetector=r(this.modules.languageDetector),y.languageDetector.init&&y.languageDetector.init(y,this.options.detection,this.options)),this.modules.i18nFormat&&(y.i18nFormat=r(this.modules.i18nFormat),y.i18nFormat.init&&y.i18nFormat.init(this)),this.translator=new Pw(this.services,this.options),this.translator.on("*",(x,...k)=>{this.emit(x,...k)}),this.modules.external.forEach(x=>{x.init&&x.init(this)})}if(this.format=this.options.interpolation.format,t||(t=P5),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...m)=>this.store[h](...m)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...m)=>(this.store[h](...m),this)});const a=a2(),c=()=>{const h=(m,y)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(y),t(m,y)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),a}loadResources(e,t=P5){let i=t;const r=Gr(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(r?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const o=[],s=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(h=>{h!=="cimode"&&o.indexOf(h)<0&&o.push(h)})};r?s(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>s(c)),this.options.preload?.forEach?.(a=>s(a)),this.services.backendConnector.load(o,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(a)})}else i(null)}reloadResources(e,t,i){const r=a2();return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=P5),this.services.backendConnector.reload(e,t,o=>{r.resolve(),i(o)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&eZ.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const i=this.languages[t];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const i=a2();this.emit("languageChanging",e);const r=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},o=(a,c)=>{c?this.isLanguageChangingTo===e&&(r(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve((...h)=>this.t(...h)),t&&t(a,(...h)=>this.t(...h))},s=a=>{!e&&!a&&this.services.languageDetector&&(a=[]);const c=Gr(a)?a:a&&a[0],h=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(Gr(a)?[a]:a);h&&(this.language||r(h),this.translator.language||this.translator.changeLanguage(h),this.services.languageDetector?.cacheUserLanguage?.(h)),this.loadResources(h,m=>{o(m,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),i}getFixedT(e,t,i){const r=(o,s,...a)=>{let c;typeof s!="object"?c=this.options.overloadTranslationOptionHandler([o,s].concat(a)):c={...s},c.lng=c.lng||r.lng,c.lngs=c.lngs||r.lngs,c.ns=c.ns||r.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||i||r.keyPrefix);const h=this.options.keySeparator||".";let m;return c.keyPrefix&&Array.isArray(o)?m=o.map(y=>(typeof y=="function"&&(y=XT(y,{...this.options,...s})),`${c.keyPrefix}${h}${y}`)):(typeof o=="function"&&(o=XT(o,{...this.options,...s})),m=c.keyPrefix?`${c.keyPrefix}${h}${o}`:o),this.t(m,c)};return Gr(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=i,r}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const s=(a,c)=>{const h=this.services.backendConnector.state[`${a}|${c}`];return h===-1||h===0||h===2};if(t.precheck){const a=t.precheck(this,s);if(a!==void 0)return a}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(i,e)&&(!r||s(o,e)))}loadNamespaces(e,t){const i=a2();return this.options.ns?(Gr(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{i.resolve(),t&&t(r)}),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=a2();Gr(e)&&(e=[e]);const r=this.options.preload||[],o=e.filter(s=>r.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return o.length?(this.options.preload=r.concat(o),this.loadResources(s=>{i.resolve(),t&&t(s)}),i):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const r=new Intl.Locale(e);if(r&&r.getTextInfo){const o=r.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services?.languageUtils||new XL(iF());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new R3(e,t)}cloneInstance(e={},t=P5){const i=e.forkResourceStore;i&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},o=new R3(r);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(a=>{o[a]=this[a]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},i){const a=Object.keys(this.store.data).reduce((c,h)=>(c[h]={...this.store.data[h]},c[h]=Object.keys(c[h]).reduce((m,y)=>(m[y]={...c[h][y]},m),c[h]),c),{});o.store=new VL(a,r),o.services.resourceStore=o.store}return o.translator=new Pw(o.services,r),o.translator.on("*",(a,...c)=>{o.emit(a,...c)}),o.init(r,t),o.translator.options=r,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const pA=R3.createInstance();pA.createInstance=R3.createInstance;pA.createInstance;pA.dir;pA.init;pA.loadResources;pA.reloadResources;pA.use;pA.changeLanguage;pA.getFixedT;pA.t;pA.exists;pA.setDefaultNamespace;pA.hasLoadedNamespace;pA.loadNamespaces;pA.loadLanguages;const{slice:yle,forEach:vle}=[];function ble(n){return vle.call(yle.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}function Cle(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(n))}const oF=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,_le=function(n,e){const i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},r=encodeURIComponent(e);let o=`${n}=${r}`;if(i.maxAge>0){const s=i.maxAge-0;if(Number.isNaN(s))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(s)}`}if(i.domain){if(!oF.test(i.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${i.domain}`}if(i.path){if(!oF.test(i.path))throw new TypeError("option path is invalid");o+=`; Path=${i.path}`}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${i.expires.toUTCString()}`}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i.partitioned&&(o+="; Partitioned"),o},sF={create(n,e,t,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+t*60*1e3)),i&&(r.domain=i),document.cookie=_le(n,e,r)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let i=0;i<t.length;i++){let r=t[i];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return r.substring(e.length,r.length)}return null},remove(n,e){this.create(n,"",-1,e)}};var xle={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return sF.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:i,cookieDomain:r,cookieOptions:o}=e;t&&typeof document<"u"&&sF.create(t,n,i,r,o)}},Mle={name:"querystring",lookup(n){let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const o=i.substring(1).split("&");for(let s=0;s<o.length;s++){const a=o[s].indexOf("=");a>0&&o[s].substring(0,a)===e&&(t=o[s].substring(a+1))}}return t}},wle={name:"hash",lookup(n){let{lookupHash:e,lookupFromHashIndex:t}=n,i;if(typeof window<"u"){const{hash:r}=window.location;if(r&&r.length>2){const o=r.substring(1);if(e){const s=o.split("&");for(let a=0;a<s.length;a++){const c=s[a].indexOf("=");c>0&&s[a].substring(0,c)===e&&(i=s[a].substring(c+1))}}if(i)return i;if(!i&&t>-1){const s=r.match(/\/([a-zA-Z-]*)/g);return Array.isArray(s)?s[typeof t=="number"?t:0]?.replace("/",""):void 0}}}return i}};let RC=null;const aF=()=>{if(RC!==null)return RC;try{if(RC=typeof window<"u"&&window.localStorage!==null,!RC)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{RC=!1}return RC};var Sle={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&aF())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&aF()&&window.localStorage.setItem(t,n)}};let DC=null;const lF=()=>{if(DC!==null)return DC;try{if(DC=typeof window<"u"&&window.sessionStorage!==null,!DC)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{DC=!1}return DC};var Ele={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&lF())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&lF()&&window.sessionStorage.setItem(t,n)}},Ole={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:i,language:r}=navigator;if(t)for(let o=0;o<t.length;o++)e.push(t[o]);i&&e.push(i),r&&e.push(r)}return e.length>0?e:void 0}},Ble={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const i=e||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(t=i.getAttribute("lang")),t}},Ile={name:"path",lookup(n){let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?t[typeof e=="number"?e:0]?.replace("/",""):void 0}},kle={name:"subdomain",lookup(n){let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,i=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(i)return i[t]}};let nZ=!1;try{document.cookie,nZ=!0}catch{}const iZ=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];nZ||iZ.splice(1,1);const Tle=()=>({order:iZ,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class rZ{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=ble(t,this.options||{},Tle()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=r=>r.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(xle),this.addDetector(Mle),this.addDetector(Sle),this.addDetector(Ele),this.addDetector(Ole),this.addDetector(Ble),this.addDetector(Ile),this.addDetector(kle),this.addDetector(wle)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(i=>{if(this.detectors[i]){let r=this.detectors[i].lookup(this.options);r&&typeof r=="string"&&(r=[r]),r&&(t=t.concat(r))}}),t=t.filter(i=>i!=null&&!Cle(i)).map(i=>this.options.convertDetectedLanguage(i)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(i=>{this.detectors[i]&&this.detectors[i].cacheUserLanguage(e,this.options)}))}}rZ.type="languageDetector";var Rle=function(e){return{type:"backend",init:function(i,r,o){},read:function(i,r,o){if(typeof e=="function"){if(e.length<3){try{var s=e(i,r);s&&typeof s.then=="function"?s.then(function(a){return o(null,a&&a.default||a)}).catch(o):o(null,s)}catch(a){o(a)}return}e(i,r,o);return}o(null,e&&e[i]&&e[i][r])}}},oO,uF;function Dle(){return uF||(uF=1,oO={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),oO}var Ple=Dle();const Ule=Xl(Ple);var Kle=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function cF(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(Ule[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var i=n.indexOf("-->");return{type:"comment",comment:i!==-1?n.slice(4,i):""}}for(var r=new RegExp(Kle),o=null;(o=r.exec(n))!==null;)if(o[0].trim())if(o[1]){var s=o[1].trim(),a=[s,""];s.indexOf("=")>-1&&(a=s.split("=")),e.attrs[a[0]]=a[1],r.lastIndex--}else o[2]&&(e.attrs[o[2]]=o[3].trim().substring(1,o[3].length-1));return e}var Lle=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,Fle=/^\s*$/,zle=Object.create(null);function oZ(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?(function(t){var i=[];for(var r in t)i.push(r+'="'+t[r]+'"');return i.length?" "+i.join(" "):""})(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(oZ,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var jle={parse:function(n,e){e||(e={}),e.components||(e.components=zle);var t,i=[],r=[],o=-1,s=!1;if(n.indexOf("<")!==0){var a=n.indexOf("<");i.push({type:"text",content:a===-1?n:n.substring(0,a)})}return n.replace(Lle,function(c,h){if(s){if(c!=="</"+t.name+">")return;s=!1}var m,y=c.charAt(1)!=="/",M=c.startsWith("<!--"),x=h+c.length,k=n.charAt(x);if(M){var P=cF(c);return o<0?(i.push(P),i):((m=r[o]).children.push(P),i)}if(y&&(o++,(t=cF(c)).type==="tag"&&e.components[t.name]&&(t.type="component",s=!0),t.voidElement||s||!k||k==="<"||t.children.push({type:"text",content:n.slice(x,n.indexOf("<",x))}),o===0&&i.push(t),(m=r[o-1])&&m.children.push(t),r[o]=t),(!y||t.voidElement)&&(o>-1&&(t.voidElement||t.name===c.slice(2,-1))&&(o--,t=o===-1?i:r[o]),!s&&k!=="<"&&k)){m=o===-1?i:r[o].children;var F=n.indexOf("<",x),j=n.slice(x,F===-1?void 0:F);Fle.test(j)&&(j=" "),(F>-1&&o+m.length>=0||j!==" ")&&m.push({type:"text",content:j})}}),i},stringify:function(n){return n.reduce(function(e,t){return e+oZ("",t)},"")}};const JM=(n,e,t,i)=>{const r=[t,{code:e,...i||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(r,"warn","react-i18next::",!0);_f(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...r):console?.warn&&console.warn(...r)},AF={},D3=(n,e,t,i)=>{_f(t)&&AF[t]||(_f(t)&&(AF[t]=new Date),JM(n,e,t,i))},sZ=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},JT=(n,e,t)=>{n.loadNamespaces(e,sZ(n,t))},hF=(n,e,t,i)=>{if(_f(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return JT(n,t,i);t.forEach(r=>{n.options.ns.indexOf(r)<0&&n.options.ns.push(r)}),n.loadLanguages(e,sZ(n,i))},Nle=(n,e,t={})=>!e.languages||!e.languages.length?(D3(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(i,r)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!r(i.isLanguageChangingTo,n))return!1}}),Gle=n=>n.displayName||n.name||(_f(n)&&n.length>0?n:"Unknown"),_f=n=>typeof n=="string",Py=n=>typeof n=="object"&&n!==null,Wle=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Qle={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},qle=n=>Qle[n],Yle=n=>n.replace(Wle,qle);let e9={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Yle};const $le=(n={})=>{e9={...e9,...n}},aZ=()=>e9;let lZ;const Vle=n=>{lZ=n},jD=()=>lZ,sO=(n,e)=>{if(!n)return!1;const t=n.props?.children??n.children;return e?t.length>0:!!t},aO=n=>{if(!n)return[];const e=n.props?.children??n.children;return n.props?.i18nIsDynamicList?M_(e):e},Hle=n=>Array.isArray(n)&&n.every(St.isValidElement),M_=n=>Array.isArray(n)?n:[n],Zle=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},uZ=(n,e,t,i)=>{if(!n)return"";let r="";const o=M_(n),s=e?.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return o.forEach((a,c)=>{if(_f(a)){r+=`${a}`;return}if(St.isValidElement(a)){const{props:h,type:m}=a,y=Object.keys(h).length,M=s.indexOf(m)>-1,x=h.children;if(!x&&M&&!y){r+=`<${m}/>`;return}if(!x&&(!M||y)||h.i18nIsDynamicList){r+=`<${c}></${c}>`;return}if(M&&y===1&&_f(x)){r+=`<${m}>${x}</${m}>`;return}const k=uZ(x,e,t,i);r+=`<${c}>${k}</${c}>`;return}if(a===null){JM(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:i});return}if(Py(a)){const{format:h,...m}=a,y=Object.keys(m);if(y.length===1){const M=h?`${y[0]}, ${h}`:y[0];r+=`{{${M}}}`;return}JM(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:i,child:a});return}JM(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:i,child:a})}),r},Xle=(n,e,t,i,r,o,s)=>{if(t==="")return[];const a=r.transKeepBasicHtmlNodesFor||[],c=t&&new RegExp(a.map(j=>`<${j}`).join("|")).test(t);if(!n&&!e&&!c&&!s)return[t];const h=e??{},m=j=>{M_(j).forEach(V=>{_f(V)||(sO(V)?m(aO(V)):Py(V)&&!St.isValidElement(V)&&Object.assign(h,V))})};m(n);const y=jle.parse(`<0>${t}</0>`),M={...h,...o},x=(j,q,V)=>{const H=aO(j),G=P(H,q.children,V);return Hle(H)&&G.length===0||j.props?.i18nIsDynamicList?H:G},k=(j,q,V,H,G)=>{j.dummy?(j.children=q,V.push(St.cloneElement(j,{key:H},G?void 0:q))):V.push(...St.Children.map([j],Y=>{const z={...Y.props};return delete z.i18nIsDynamicList,St.createElement(Y.type,{...z,key:H,ref:Y.props.ref??Y.ref},G?null:q)}))},P=(j,q,V)=>{const H=M_(j);return M_(q).reduce((Y,z,se)=>{const le=z.children?.[0]?.content&&i.services.interpolator.interpolate(z.children[0].content,M,i.language);if(z.type==="tag"){let me=H[parseInt(z.name,10)];!me&&e&&(me=e[z.name]),V.length===1&&!me&&(me=V[0][z.name]),me||(me={});const de=Object.keys(z.attrs).length!==0?Zle({props:z.attrs},me):me,be=St.isValidElement(de),Ee=be&&sO(z,!0)&&!z.voidElement,De=c&&Py(de)&&de.dummy&&!be,je=Py(e)&&Object.hasOwnProperty.call(e,z.name);if(_f(de)){const Ie=i.services.interpolator.interpolate(de,M,i.language);Y.push(Ie)}else if(sO(de)||Ee){const Ie=x(de,z,V);k(de,Ie,Y,se)}else if(De){const Ie=P(H,z.children,V);k(de,Ie,Y,se)}else if(Number.isNaN(parseFloat(z.name)))if(je){const Ie=x(de,z,V);k(de,Ie,Y,se,z.voidElement)}else if(r.transSupportBasicHtmlNodes&&a.indexOf(z.name)>-1)if(z.voidElement)Y.push(St.createElement(z.name,{key:`${z.name}-${se}`}));else{const Ie=P(H,z.children,V);Y.push(St.createElement(z.name,{key:`${z.name}-${se}`},Ie))}else if(z.voidElement)Y.push(`<${z.name} />`);else{const Ie=P(H,z.children,V);Y.push(`<${z.name}>${Ie}</${z.name}>`)}else if(Py(de)&&!be){const Ie=z.children[0]?le:null;Ie&&Y.push(Ie)}else k(de,le,Y,se,z.children.length!==1||!le)}else if(z.type==="text"){const me=r.transWrapTextNodes,de=s?r.unescape(i.services.interpolator.interpolate(z.content,M,i.language)):i.services.interpolator.interpolate(z.content,M,i.language);me?Y.push(St.createElement(me,{key:`${z.name}-${se}`},de)):Y.push(de)}return Y},[])},F=P([{dummy:!0,children:n||[]}],y,M_(n||[]));return aO(F[0])},cZ=(n,e,t)=>{const i=n.key||e,r=St.cloneElement(n,{key:i});if(!r.props||!r.props.children||t.indexOf(`${e}/>`)<0&&t.indexOf(`${e} />`)<0)return r;function o(){return St.createElement(St.Fragment,null,r)}return St.createElement(o,{key:i})},Jle=(n,e)=>n.map((t,i)=>cZ(t,i,e)),eue=(n,e)=>{const t={};return Object.keys(n).forEach(i=>{Object.assign(t,{[i]:cZ(n[i],i,e)})}),t},tue=(n,e,t,i)=>n?Array.isArray(n)?Jle(n,e):Py(n)?eue(n,e):(D3(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:i}),null):null,nue=n=>!Py(n)||Array.isArray(n)?!1:Object.keys(n).reduce((e,t)=>e&&Number.isNaN(Number.parseFloat(t)),!0);function iue({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o={},values:s,defaults:a,components:c,ns:h,i18n:m,t:y,shouldUnescape:M,...x}){const k=m||jD();if(!k)return D3(k,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:i}),n;const P=y||k.t.bind(k)||(De=>De),F={...aZ(),...k.options?.react};let j=h||P.ns||k.options?.defaultNS;j=_f(j)?[j]:j||["translation"];const q=uZ(n,F,k,i),V=a||q||F.transEmptyNodeValue||i,{hashTransKey:H}=F,G=i||(H?H(q||V):q||V);k.options?.interpolation?.defaultVariables&&(s=s&&Object.keys(s).length>0?{...s,...k.options.interpolation.defaultVariables}:{...k.options.interpolation.defaultVariables});const Y=s||e!==void 0&&!k.options?.interpolation?.alwaysFormat||!n?o.interpolation:{interpolation:{...o.interpolation,prefix:"#$?",suffix:"?$#"}},z={...o,context:r||o.context,count:e,...s,...Y,defaultValue:V,ns:j},se=G?P(G,z):V,le=tue(c,se,k,i);let me=le||n,de=null;nue(le)&&(de=le,me=n);const be=Xle(me,de,se,k,F,z,M),Ee=t??F.defaultTransParent;return Ee?St.createElement(Ee,x,be):be}const rue={type:"3rdParty",init(n){$le(n.options.react),Vle(n)}},AZ=St.createContext();class oue{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function vb({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o={},values:s,defaults:a,components:c,ns:h,i18n:m,t:y,shouldUnescape:M,...x}){const{i18n:k,defaultNS:P}=St.useContext(AZ)||{},F=m||k||jD(),j=y||F?.t.bind(F);return iue({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o,values:s,defaults:a,components:c,ns:h||j?.ns||P||F?.options?.defaultNS,i18n:F,t:y,shouldUnescape:M,...x})}const sue=(n,e)=>{const t=St.useRef();return St.useEffect(()=>{t.current=n},[n,e]),t.current},hZ=(n,e,t,i)=>n.getFixedT(e,t,i),aue=(n,e,t,i)=>St.useCallback(hZ(n,e,t,i),[n,e,t,i]),lue=(n,e={})=>{const{i18n:t}=e,{i18n:i,defaultNS:r}=St.useContext(AZ)||{},o=t||i||jD();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new oue),!o){D3(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const H=(Y,z)=>_f(z)?z:Py(z)&&_f(z.defaultValue)?z.defaultValue:Array.isArray(Y)?Y[Y.length-1]:Y,G=[H,{},!1];return G.t=H,G.i18n={},G.ready=!1,G}o.options.react?.wait&&D3(o,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...aZ(),...o.options.react,...e},{useSuspense:a,keyPrefix:c}=s;let h=r||o.options?.defaultNS;h=_f(h)?[h]:h||["translation"],o.reportNamespaces.addUsedNamespaces?.(h);const m=(o.isInitialized||o.initializedStoreOnce)&&h.every(H=>Nle(H,o,s)),y=aue(o,e.lng||null,s.nsMode==="fallback"?h:h[0],c),M=()=>y,x=()=>hZ(o,e.lng||null,s.nsMode==="fallback"?h:h[0],c),[k,P]=St.useState(M);let F=h.join();e.lng&&(F=`${e.lng}${F}`);const j=sue(F),q=St.useRef(!0);St.useEffect(()=>{const{bindI18n:H,bindI18nStore:G}=s;q.current=!0,!m&&!a&&(e.lng?hF(o,e.lng,h,()=>{q.current&&P(x)}):JT(o,h,()=>{q.current&&P(x)})),m&&j&&j!==F&&q.current&&P(x);const Y=()=>{q.current&&P(x)};return H&&o?.on(H,Y),G&&o?.store.on(G,Y),()=>{q.current=!1,o&&H&&H?.split(" ").forEach(z=>o.off(z,Y)),G&&o&&G.split(" ").forEach(z=>o.store.off(z,Y))}},[o,F]),St.useEffect(()=>{q.current&&m&&P(M)},[o,c,m]);const V=[k,o,m];if(V.t=k,V.i18n=o,V.ready=m,m||!m&&!a)return V;throw new Promise(H=>{e.lng?hF(o,e.lng,h,()=>H()):JT(o,h,()=>H())})},$o=(n,e={})=>function(i){function r({forwardedRef:s,...a}){const[c,h,m]=lue(n,{...a,keyPrefix:e.keyPrefix}),y={...a,t:c,i18n:h,tReady:m};return e.withRef&&s?y.ref=s:!e.withRef&&s&&(y.forwardedRef=s),St.createElement(i,y)}r.displayName=`withI18nextTranslation(${Gle(i)})`,r.WrappedComponent=i;const o=(s,a)=>St.createElement(r,Object.assign({},s,{forwardedRef:a}));return e.withRef?St.forwardRef(o):r};function ha(){var n="/home/runner/work/maputnik/maputnik/src/i18n.ts",e="529ee327821ff95d86675c5d3e41229f0d9cb0df",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/i18n.ts",statementMap:{0:{start:{line:5,column:34},end:{line:13,column:1}},1:{start:{line:14,column:0},end:{line:40,column:3}},2:{start:{line:16,column:4},end:{line:18,column:5}},3:{start:{line:17,column:6},end:{line:17,column:16}},4:{start:{line:19,column:4},end:{line:19,column:593}},5:{start:{line:19,column:119},end:{line:19,column:158}},6:{start:{line:19,column:198},end:{line:19,column:237}},7:{start:{line:19,column:277},end:{line:19,column:316}},8:{start:{line:19,column:356},end:{line:19,column:395}},9:{start:{line:19,column:435},end:{line:19,column:474}},10:{start:{line:19,column:514},end:{line:19,column:553}},11:{start:{line:35,column:4},end:{line:37,column:5}},12:{start:{line:36,column:6},end:{line:36,column:13}},13:{start:{line:38,column:4},end:{line:38,column:77}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:21},end:{line:15,column:22}},loc:{start:{line:15,column:35},end:{line:20,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:19,column:113},end:{line:19,column:114}},loc:{start:{line:19,column:119},end:{line:19,column:158}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:19,column:192},end:{line:19,column:193}},loc:{start:{line:19,column:198},end:{line:19,column:237}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:271},end:{line:19,column:272}},loc:{start:{line:19,column:277},end:{line:19,column:316}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:19,column:350},end:{line:19,column:351}},loc:{start:{line:19,column:356},end:{line:19,column:395}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:19,column:429},end:{line:19,column:430}},loc:{start:{line:19,column:435},end:{line:19,column:474}},line:19},6:{name:"(anonymous_6)",decl:{start:{line:19,column:508},end:{line:19,column:509}},loc:{start:{line:19,column:514},end:{line:19,column:553}},line:19},7:{name:"(anonymous_7)",decl:{start:{line:34,column:21},end:{line:34,column:22}},loc:{start:{line:34,column:41},end:{line:39,column:3}},line:34}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/i18n.ts"],names:[],mappings:"AAAA,MAAA,CAAA,oCAAA,CAAA,IAAA,CAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA,CAAA,MAAA,CAAO,IAAA,CAAA,IAAA,CAAU,CAAA,OAAA,CAAA;AACjB,MAAA,CAAO,QAAA,CAAA,IAAA,CAAc,CAAA,OAAA,CAAA,OAAA,CAAA,gBAAA,CAAA;AACrB,MAAA,CAAO,kBAAA,CAAA,IAAA,CAAwB,CAAA,OAAA,CAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA;AAC/B,MAAA,CAAA,CAAA,CAAS,gBAAA,CAAA,CAAA,CAAA,IAAA,CAAwB,CAAA,KAAA,CAAA,OAAA,CAAA;AAE1B,MAAA,CAAA,KAAA,CAAM,kBAAA,CAAA,CAAA,CAAqB;AAAA,CAAA,CAChC,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,QAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AACR,CAAA;AAEA,IAAA,CACG,GAAA,CAAI,QAAQ,CAAA,CACZ,GAAA;AAAA,CAAA,CACC,kBAAA,CAAmB,CAAC,IAAA,CAAA,CAAc,EAAA,CAAA,CAAA,CAAA,CAAA,CAAe;AAC/C,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,SAAS,CAAA,EAAA,CAAA,CAAA,CAAM;AAEjB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,CAAC,CAAA;AAAA,CAAA,CAAA,CAAA,CACV;AACA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,oCAAA,CAAA,CAAA,0fAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAA8B;AAAA,CAAA,CACvC,CAAC;AACH,CAAA,CACC,GAAA,CAAI,gBAAgB,CAAA,CACpB,IAAA,CAAK;AAAA,CAAA,CACJ,aAAA,CAAA,CAAe,MAAA,CAAO,IAAA,CAAK,kBAAkB,CAAA;AAAA,CAAA,CAC7C,YAAA,CAAA,CAAc,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACd,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CACb,aAAA,CAAA,CAAe;AAAA,CAAA,CAAA,CAAA,CACb,WAAA,CAAA,CAAa;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACf,CAAA;AAAA,CAAA,CACA,WAAA,CAAA,CAAa,IAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,iBAAA,CAAA,EAAA,CAAA;AAAA,CAAA,CACb,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA,EAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACb,iBAAA,CAAA,CAAmB,CAAC,IAAA,CAAA,CAAM,GAAA,CAAA,CAAK,GAAA,CAAA,CAAA,CAAA,CAAA,CAAQ;AACrC,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,IAAA,CAAK,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAA,EAAA,CAAA,CAAA,CAAM;AAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA;AAAA,CAAA,CAAA,CAAA,CAAQ;AAChC,CAAA,CAAA,CAAA,CAAA,OAAA,CAAQ,IAAA,CAAK,4BAA4B,GAAG,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAS,KAAK,IAAA,CAAK,CAAA,CAAA,CAAA,CAAI,CAAC,CAAA,CAAA,CAAG,CAAA;AAAA,CAAA,CACzE;AACF,CAAC,CAAA;AAEH,MAAA,CAAA,OAAA,CAAe,IAAA;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"529ee327821ff95d86675c5d3e41229f0d9cb0df"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ha=function(){return s},s}ha();const dZ=(ha().s[0]++,{de:"Deutsch",en:"English",fr:"Franais",he:"",it:"Italiano",ja:"",zh:""});ha().s[1]++;pA.use(rZ).use(Rle((n,e)=>(ha().f[0]++,ha().s[2]++,n==="en"?(ha().b[0][0]++,ha().s[3]++,{}):(ha().b[0][1]++,ha().s[4]++,Zae(Object.assign({"./locales/de/translation.json":()=>(ha().f[1]++,ha().s[5]++,kC(()=>import("./translation-CQD4fuPu.js"),[])),"./locales/fr/translation.json":()=>(ha().f[2]++,ha().s[6]++,kC(()=>import("./translation-XoriI0W-.js"),[])),"./locales/he/translation.json":()=>(ha().f[3]++,ha().s[7]++,kC(()=>import("./translation-aD1CAGoy.js"),[])),"./locales/it/translation.json":()=>(ha().f[4]++,ha().s[8]++,kC(()=>import("./translation-CZ64AJ8H.js"),[])),"./locales/ja/translation.json":()=>(ha().f[5]++,ha().s[9]++,kC(()=>import("./translation-BhJ-ufwk.js"),[])),"./locales/zh/translation.json":()=>(ha().f[6]++,ha().s[10]++,kC(()=>import("./translation-BrzYPxJn.js"),[]))}),`./locales/${n}/${e}.json`,4))))).use(rue).init({supportedLngs:Object.keys(dZ),keySeparator:!1,nsSeparator:!1,interpolation:{escapeValue:!1},saveMissing:!0,fallbackLng:!1,missingKeyHandler:(n,e,t)=>{if(ha().f[7]++,ha().s[11]++,n[0]==="en"){ha().b[1][0]++,ha().s[12]++;return}else ha().b[1][1]++;ha().s[13]++,console.warn(`Missing translation for "${t}" in "${n.join(", ")}"`)}});var k2={exports:{}};k2.exports;var dF;function uue(){return dF||(dF=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=9007199254740991,o="[object Arguments]",s="[object Array]",a="[object Boolean]",c="[object Date]",h="[object Error]",m="[object Function]",y="[object GeneratorFunction]",M="[object Map]",x="[object Number]",k="[object Object]",P="[object Promise]",F="[object RegExp]",j="[object Set]",q="[object String]",V="[object Symbol]",H="[object WeakMap]",G="[object ArrayBuffer]",Y="[object DataView]",z="[object Float32Array]",se="[object Float64Array]",le="[object Int8Array]",me="[object Int16Array]",de="[object Int32Array]",be="[object Uint8Array]",Ee="[object Uint8ClampedArray]",De="[object Uint16Array]",je="[object Uint32Array]",Ie=/[\\^$.*+?()[\]{}|]/g,Qe=/\w*$/,et=/^\[object .+?Constructor\]$/,dt=/^(?:0|[1-9]\d*)$/,ke={};ke[o]=ke[s]=ke[G]=ke[Y]=ke[a]=ke[c]=ke[z]=ke[se]=ke[le]=ke[me]=ke[de]=ke[M]=ke[x]=ke[k]=ke[F]=ke[j]=ke[q]=ke[V]=ke[be]=ke[Ee]=ke[De]=ke[je]=!0,ke[h]=ke[m]=ke[H]=!1;var we=typeof window=="object"&&window&&window.Object===Object&&window,ze=typeof self=="object"&&self&&self.Object===Object&&self,xe=we||ze||Function("return this")(),At=e&&!e.nodeType&&e,it=At&&!0&&n&&!n.nodeType&&n,bt=it&&it.exports===At;function Bt(X,ve){return X.set(ve[0],ve[1]),X}function Ke(X,ve){return X.add(ve),X}function Te(X,ve){for(var $e=-1,wt=X?X.length:0;++$e<wt&&ve(X[$e],$e,X)!==!1;);return X}function Se(X,ve){for(var $e=-1,wt=ve.length,ei=X.length;++$e<wt;)X[ei+$e]=ve[$e];return X}function Ne(X,ve,$e,wt){for(var ei=-1,Bn=X?X.length:0;++ei<Bn;)$e=ve($e,X[ei],ei,X);return $e}function ut(X,ve){for(var $e=-1,wt=Array(X);++$e<X;)wt[$e]=ve($e);return wt}function rt(X,ve){return X?.[ve]}function pt(X){var ve=!1;if(X!=null&&typeof X.toString!="function")try{ve=!!(X+"")}catch{}return ve}function Dt(X){var ve=-1,$e=Array(X.size);return X.forEach(function(wt,ei){$e[++ve]=[ei,wt]}),$e}function Ot(X,ve){return function($e){return X(ve($e))}}function Jt(X){var ve=-1,$e=Array(X.size);return X.forEach(function(wt){$e[++ve]=wt}),$e}var Tn=Array.prototype,Ln=Function.prototype,ii=Object.prototype,wn=xe["__core-js_shared__"],Rn=(function(){var X=/[^.]+$/.exec(wn&&wn.keys&&wn.keys.IE_PROTO||"");return X?"Symbol(src)_1."+X:""})(),gn=Ln.toString,Yn=ii.hasOwnProperty,Dn=ii.toString,Tt=RegExp("^"+gn.call(Yn).replace(Ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_e=bt?xe.Buffer:void 0,oe=xe.Symbol,ee=xe.Uint8Array,ne=Ot(Object.getPrototypeOf,Object),ue=Object.create,ye=ii.propertyIsEnumerable,Ue=Tn.splice,Ve=Object.getOwnPropertySymbols,lt=_e?_e.isBuffer:void 0,ge=Ot(Object.keys,Object),Be=Ds(xe,"DataView"),v=Ds(xe,"Map"),yt=Ds(xe,"Promise"),Mt=Ds(xe,"Set"),Pt=Ds(xe,"WeakMap"),st=Ds(Object,"create"),fn=Go(Be),Fn=Go(v),pn=Go(yt),$n=Go(Mt),Zn=Go(Pt),ai=oe?oe.prototype:void 0,Hi=ai?ai.valueOf:void 0;function Ti(X){var ve=-1,$e=X?X.length:0;for(this.clear();++ve<$e;){var wt=X[ve];this.set(wt[0],wt[1])}}function tr(){this.__data__=st?st(null):{}}function oi(X){return this.has(X)&&delete this.__data__[X]}function Pi(X){var ve=this.__data__;if(st){var $e=ve[X];return $e===i?void 0:$e}return Yn.call(ve,X)?ve[X]:void 0}function Zt(X){var ve=this.__data__;return st?ve[X]!==void 0:Yn.call(ve,X)}function pr(X,ve){var $e=this.__data__;return $e[X]=st&&ve===void 0?i:ve,this}Ti.prototype.clear=tr,Ti.prototype.delete=oi,Ti.prototype.get=Pi,Ti.prototype.has=Zt,Ti.prototype.set=pr;function Zi(X){var ve=-1,$e=X?X.length:0;for(this.clear();++ve<$e;){var wt=X[ve];this.set(wt[0],wt[1])}}function ea(){this.__data__=[]}function no(X){var ve=this.__data__,$e=Da(ve,X);if($e<0)return!1;var wt=ve.length-1;return $e==wt?ve.pop():Ue.call(ve,$e,1),!0}function sn(X){var ve=this.__data__,$e=Da(ve,X);return $e<0?void 0:ve[$e][1]}function Ci(X){return Da(this.__data__,X)>-1}function Ui(X,ve){var $e=this.__data__,wt=Da($e,X);return wt<0?$e.push([X,ve]):$e[wt][1]=ve,this}Zi.prototype.clear=ea,Zi.prototype.delete=no,Zi.prototype.get=sn,Zi.prototype.has=Ci,Zi.prototype.set=Ui;function nr(X){var ve=-1,$e=X?X.length:0;for(this.clear();++ve<$e;){var wt=X[ve];this.set(wt[0],wt[1])}}function Jl(){this.__data__={hash:new Ti,map:new(v||Zi),string:new Ti}}function Al(X){return Pa(this,X).delete(X)}function Ki(X){return Pa(this,X).get(X)}function $a(X){return Pa(this,X).has(X)}function hl(X,ve){return Pa(this,X).set(X,ve),this}nr.prototype.clear=Jl,nr.prototype.delete=Al,nr.prototype.get=Ki,nr.prototype.has=$a,nr.prototype.set=hl;function fo(X){this.__data__=new Zi(X)}function Qs(){this.__data__=new Zi}function Kl(X){return this.__data__.delete(X)}function io(X){return this.__data__.get(X)}function As(X){return this.__data__.has(X)}function pa(X,ve){var $e=this.__data__;if($e instanceof Zi){var wt=$e.__data__;if(!v||wt.length<t-1)return wt.push([X,ve]),this;$e=this.__data__=new nr(wt)}return $e.set(X,ve),this}fo.prototype.clear=Qs,fo.prototype.delete=Kl,fo.prototype.get=io,fo.prototype.has=As,fo.prototype.set=pa;function Dr(X,ve){var $e=Ho(X)||Eo(X)?ut(X.length,String):[],wt=$e.length,ei=!!wt;for(var Bn in X)Yn.call(X,Bn)&&!(ei&&(Bn=="length"||Cu(Bn,wt)))&&$e.push(Bn);return $e}function Ll(X,ve,$e){var wt=X[ve];(!(Yn.call(X,ve)&&Ro(wt,$e))||$e===void 0&&!(ve in X))&&(X[ve]=$e)}function Da(X,ve){for(var $e=X.length;$e--;)if(Ro(X[$e][0],ve))return $e;return-1}function qs(X,ve){return X&&ru(ve,wi(ve),X)}function Sl(X,ve,$e,wt,ei,Bn,_i){var zi;if(wt&&(zi=Bn?wt(X,ei,Bn,_i):wt(X)),zi!==void 0)return zi;if(!lr(X))return X;var Ri=Ho(X);if(Ri){if(zi=ou(X),!ve)return iu(X,zi)}else{var Ii=Yi(X),mr=Ii==m||Ii==y;if(Zo(X))return xs(X,ve);if(Ii==k||Ii==o||mr&&!Bn){if(pt(X))return Bn?X:{};if(zi=Vo(mr?{}:X),!ve)return Hc(X,qs(zi,X))}else{if(!ke[Ii])return Bn?X:{};zi=dl(X,Ii,Sl,ve)}}_i||(_i=new fo);var Tr=_i.get(X);if(Tr)return Tr;if(_i.set(X,zi),!Ri)var ji=$e?Hu(X):wi(X);return Te(ji||X,function(ur,Hr){ji&&(Hr=ur,ur=X[Hr]),Ll(zi,Hr,Sl(ur,ve,$e,wt,Hr,X,_i))}),zi}function eu(X){return lr(X)?ue(X):{}}function $A(X,ve,$e){var wt=ve(X);return Ho(X)?wt:Se(wt,$e(X))}function Vc(X){return Dn.call(X)}function mc(X){if(!lr(X)||El(X))return!1;var ve=Wo(X)||pt(X)?Tt:et;return ve.test(Go(X))}function ma(X){if(!Va(X))return ge(X);var ve=[];for(var $e in Object(X))Yn.call(X,$e)&&$e!="constructor"&&ve.push($e);return ve}function xs(X,ve){if(ve)return X.slice();var $e=new X.constructor(X.length);return X.copy($e),$e}function gc(X){var ve=new X.constructor(X.byteLength);return new ee(ve).set(new ee(X)),ve}function tu(X,ve){var $e=ve?gc(X.buffer):X.buffer;return new X.constructor($e,X.byteOffset,X.byteLength)}function yc(X,ve,$e){var wt=ve?$e(Dt(X),!0):Dt(X);return Ne(wt,Bt,new X.constructor)}function nu(X){var ve=new X.constructor(X.source,Qe.exec(X));return ve.lastIndex=X.lastIndex,ve}function Fl(X,ve,$e){var wt=ve?$e(Jt(X),!0):Jt(X);return Ne(wt,Ke,new X.constructor)}function VA(X){return Hi?Object(Hi.call(X)):{}}function ga(X,ve){var $e=ve?gc(X.buffer):X.buffer;return new X.constructor($e,X.byteOffset,X.length)}function iu(X,ve){var $e=-1,wt=X.length;for(ve||(ve=Array(wt));++$e<wt;)ve[$e]=X[$e];return ve}function ru(X,ve,$e,wt){$e||($e={});for(var ei=-1,Bn=ve.length;++ei<Bn;){var _i=ve[ei],zi=void 0;Ll($e,_i,zi===void 0?X[_i]:zi)}return $e}function Hc(X,ve){return ru(X,qr(X),ve)}function Hu(X){return $A(X,wi,qr)}function Pa(X,ve){var $e=X.__data__;return sr(ve)?$e[typeof ve=="string"?"string":"hash"]:$e.map}function Ds(X,ve){var $e=rt(X,ve);return mc($e)?$e:void 0}var qr=Ve?Ot(Ve,Object):Jn,Yi=Vc;(Be&&Yi(new Be(new ArrayBuffer(1)))!=Y||v&&Yi(new v)!=M||yt&&Yi(yt.resolve())!=P||Mt&&Yi(new Mt)!=j||Pt&&Yi(new Pt)!=H)&&(Yi=function(X){var ve=Dn.call(X),$e=ve==k?X.constructor:void 0,wt=$e?Go($e):void 0;if(wt)switch(wt){case fn:return Y;case Fn:return M;case pn:return P;case $n:return j;case Zn:return H}return ve});function ou(X){var ve=X.length,$e=X.constructor(ve);return ve&&typeof X[0]=="string"&&Yn.call(X,"index")&&($e.index=X.index,$e.input=X.input),$e}function Vo(X){return typeof X.constructor=="function"&&!Va(X)?eu(ne(X)):{}}function dl(X,ve,$e,wt){var ei=X.constructor;switch(ve){case G:return gc(X);case a:case c:return new ei(+X);case Y:return tu(X,wt);case z:case se:case le:case me:case de:case be:case Ee:case De:case je:return ga(X,wt);case M:return yc(X,wt,$e);case x:case q:return new ei(X);case F:return nu(X);case j:return Fl(X,wt,$e);case V:return VA(X)}}function Cu(X,ve){return ve=ve??r,!!ve&&(typeof X=="number"||dt.test(X))&&X>-1&&X%1==0&&X<ve}function sr(X){var ve=typeof X;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?X!=="__proto__":X===null}function El(X){return!!Rn&&Rn in X}function Va(X){var ve=X&&X.constructor,$e=typeof ve=="function"&&ve.prototype||ii;return X===$e}function Go(X){if(X!=null){try{return gn.call(X)}catch{}try{return X+""}catch{}}return""}function Ps(X){return Sl(X,!0,!0)}function Ro(X,ve){return X===ve||X!==X&&ve!==ve}function Eo(X){return HA(X)&&Yn.call(X,"callee")&&(!ye.call(X,"callee")||Dn.call(X)==o)}var Ho=Array.isArray;function Pr(X){return X!=null&&Ms(X.length)&&!Wo(X)}function HA(X){return aa(X)&&Pr(X)}var Zo=lt||Ur;function Wo(X){var ve=lr(X)?Dn.call(X):"";return ve==m||ve==y}function Ms(X){return typeof X=="number"&&X>-1&&X%1==0&&X<=r}function lr(X){var ve=typeof X;return!!X&&(ve=="object"||ve=="function")}function aa(X){return!!X&&typeof X=="object"}function wi(X){return Pr(X)?Dr(X):ma(X)}function Jn(){return[]}function Ur(){return!1}n.exports=Ps})(k2,k2.exports)),k2.exports}var cue=uue();const fF=Xl(cue);var lO,pF;function Aue(){if(pF)return lO;pF=1;var n=NaN,e="[object Symbol]",t=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,a=Object.prototype,c=a.toString;function h(P,F,j){return P===P&&(j!==void 0&&(P=P<=j?P:j),F!==void 0&&(P=P>=F?P:F)),P}function m(P){var F=typeof P;return!!P&&(F=="object"||F=="function")}function y(P){return!!P&&typeof P=="object"}function M(P){return typeof P=="symbol"||y(P)&&c.call(P)==e}function x(P){if(typeof P=="number")return P;if(M(P))return n;if(m(P)){var F=typeof P.valueOf=="function"?P.valueOf():P;P=m(F)?F+"":F}if(typeof P!="string")return P===0?P:+P;P=P.replace(t,"");var j=r.test(P);return j||o.test(P)?s(P.slice(2),j?2:8):i.test(P)?n:+P}function k(P,F,j){return j===void 0&&(j=F,F=void 0),j!==void 0&&(j=x(j),j=j===j?j:0),F!==void 0&&(F=x(F),F=F===F?F:0),h(x(P),F,j)}return lO=k,lO}var hue=Aue();const mF=Xl(hue);var uO={},l2={},gF;function due(){if(gF)return l2;gF=1,l2.byteLength=a,l2.toByteArray=h,l2.fromByteArray=M;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,o=i.length;r<o;++r)n[r]=i[r],e[i.charCodeAt(r)]=r;e[45]=62,e[95]=63;function s(x){var k=x.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var P=x.indexOf("=");P===-1&&(P=k);var F=P===k?0:4-P%4;return[P,F]}function a(x){var k=s(x),P=k[0],F=k[1];return(P+F)*3/4-F}function c(x,k,P){return(k+P)*3/4-P}function h(x){var k,P=s(x),F=P[0],j=P[1],q=new t(c(x,F,j)),V=0,H=j>0?F-4:F,G;for(G=0;G<H;G+=4)k=e[x.charCodeAt(G)]<<18|e[x.charCodeAt(G+1)]<<12|e[x.charCodeAt(G+2)]<<6|e[x.charCodeAt(G+3)],q[V++]=k>>16&255,q[V++]=k>>8&255,q[V++]=k&255;return j===2&&(k=e[x.charCodeAt(G)]<<2|e[x.charCodeAt(G+1)]>>4,q[V++]=k&255),j===1&&(k=e[x.charCodeAt(G)]<<10|e[x.charCodeAt(G+1)]<<4|e[x.charCodeAt(G+2)]>>2,q[V++]=k>>8&255,q[V++]=k&255),q}function m(x){return n[x>>18&63]+n[x>>12&63]+n[x>>6&63]+n[x&63]}function y(x,k,P){for(var F,j=[],q=k;q<P;q+=3)F=(x[q]<<16&16711680)+(x[q+1]<<8&65280)+(x[q+2]&255),j.push(m(F));return j.join("")}function M(x){for(var k,P=x.length,F=P%3,j=[],q=16383,V=0,H=P-F;V<H;V+=q)j.push(y(x,V,V+q>H?H:V+q));return F===1?(k=x[P-1],j.push(n[k>>2]+n[k<<4&63]+"==")):F===2&&(k=(x[P-2]<<8)+x[P-1],j.push(n[k>>10]+n[k>>4&63]+n[k<<2&63]+"=")),j.join("")}return l2}var U5={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var yF;function fue(){return yF||(yF=1,U5.read=function(n,e,t,i,r){var o,s,a=r*8-i-1,c=(1<<a)-1,h=c>>1,m=-7,y=t?r-1:0,M=t?-1:1,x=n[e+y];for(y+=M,o=x&(1<<-m)-1,x>>=-m,m+=a;m>0;o=o*256+n[e+y],y+=M,m-=8);for(s=o&(1<<-m)-1,o>>=-m,m+=i;m>0;s=s*256+n[e+y],y+=M,m-=8);if(o===0)o=1-h;else{if(o===c)return s?NaN:(x?-1:1)*(1/0);s=s+Math.pow(2,i),o=o-h}return(x?-1:1)*s*Math.pow(2,o-i)},U5.write=function(n,e,t,i,r,o){var s,a,c,h=o*8-r-1,m=(1<<h)-1,y=m>>1,M=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=i?0:o-1,k=i?1:-1,P=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=m):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+y>=1?e+=M/c:e+=M*Math.pow(2,1-y),e*c>=2&&(s++,c/=2),s+y>=m?(a=0,s=m):s+y>=1?(a=(e*c-1)*Math.pow(2,r),s=s+y):(a=e*Math.pow(2,y-1)*Math.pow(2,r),s=0));r>=8;n[t+x]=a&255,x+=k,a/=256,r-=8);for(s=s<<r|a,h+=r;h>0;n[t+x]=s&255,x+=k,s/=256,h-=8);n[t+x-k]|=P*128}),U5}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var vF;function pue(){return vF||(vF=1,(function(n){const e=due(),t=fue(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=q,n.INSPECT_MAX_BYTES=50;const r=2147483647;n.kMaxLength=r,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const _e=new Uint8Array(1),oe={foo:function(){return 42}};return Object.setPrototypeOf(oe,Uint8Array.prototype),Object.setPrototypeOf(_e,oe),_e.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(_e){if(_e>r)throw new RangeError('The value "'+_e+'" is invalid for option "size"');const oe=new Uint8Array(_e);return Object.setPrototypeOf(oe,a.prototype),oe}function a(_e,oe,ee){if(typeof _e=="number"){if(typeof oe=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(_e)}return c(_e,oe,ee)}a.poolSize=8192;function c(_e,oe,ee){if(typeof _e=="string")return M(_e,oe);if(ArrayBuffer.isView(_e))return k(_e);if(_e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _e);if(Rn(_e,ArrayBuffer)||_e&&Rn(_e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Rn(_e,SharedArrayBuffer)||_e&&Rn(_e.buffer,SharedArrayBuffer)))return P(_e,oe,ee);if(typeof _e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ne=_e.valueOf&&_e.valueOf();if(ne!=null&&ne!==_e)return a.from(ne,oe,ee);const ue=F(_e);if(ue)return ue;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof _e[Symbol.toPrimitive]=="function")return a.from(_e[Symbol.toPrimitive]("string"),oe,ee);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _e)}a.from=function(_e,oe,ee){return c(_e,oe,ee)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function h(_e){if(typeof _e!="number")throw new TypeError('"size" argument must be of type number');if(_e<0)throw new RangeError('The value "'+_e+'" is invalid for option "size"')}function m(_e,oe,ee){return h(_e),_e<=0?s(_e):oe!==void 0?typeof ee=="string"?s(_e).fill(oe,ee):s(_e).fill(oe):s(_e)}a.alloc=function(_e,oe,ee){return m(_e,oe,ee)};function y(_e){return h(_e),s(_e<0?0:j(_e)|0)}a.allocUnsafe=function(_e){return y(_e)},a.allocUnsafeSlow=function(_e){return y(_e)};function M(_e,oe){if((typeof oe!="string"||oe==="")&&(oe="utf8"),!a.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);const ee=V(_e,oe)|0;let ne=s(ee);const ue=ne.write(_e,oe);return ue!==ee&&(ne=ne.slice(0,ue)),ne}function x(_e){const oe=_e.length<0?0:j(_e.length)|0,ee=s(oe);for(let ne=0;ne<oe;ne+=1)ee[ne]=_e[ne]&255;return ee}function k(_e){if(Rn(_e,Uint8Array)){const oe=new Uint8Array(_e);return P(oe.buffer,oe.byteOffset,oe.byteLength)}return x(_e)}function P(_e,oe,ee){if(oe<0||_e.byteLength<oe)throw new RangeError('"offset" is outside of buffer bounds');if(_e.byteLength<oe+(ee||0))throw new RangeError('"length" is outside of buffer bounds');let ne;return oe===void 0&&ee===void 0?ne=new Uint8Array(_e):ee===void 0?ne=new Uint8Array(_e,oe):ne=new Uint8Array(_e,oe,ee),Object.setPrototypeOf(ne,a.prototype),ne}function F(_e){if(a.isBuffer(_e)){const oe=j(_e.length)|0,ee=s(oe);return ee.length===0||_e.copy(ee,0,0,oe),ee}if(_e.length!==void 0)return typeof _e.length!="number"||gn(_e.length)?s(0):x(_e);if(_e.type==="Buffer"&&Array.isArray(_e.data))return x(_e.data)}function j(_e){if(_e>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return _e|0}function q(_e){return+_e!=_e&&(_e=0),a.alloc(+_e)}a.isBuffer=function(oe){return oe!=null&&oe._isBuffer===!0&&oe!==a.prototype},a.compare=function(oe,ee){if(Rn(oe,Uint8Array)&&(oe=a.from(oe,oe.offset,oe.byteLength)),Rn(ee,Uint8Array)&&(ee=a.from(ee,ee.offset,ee.byteLength)),!a.isBuffer(oe)||!a.isBuffer(ee))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(oe===ee)return 0;let ne=oe.length,ue=ee.length;for(let ye=0,Ue=Math.min(ne,ue);ye<Ue;++ye)if(oe[ye]!==ee[ye]){ne=oe[ye],ue=ee[ye];break}return ne<ue?-1:ue<ne?1:0},a.isEncoding=function(oe){switch(String(oe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(oe,ee){if(!Array.isArray(oe))throw new TypeError('"list" argument must be an Array of Buffers');if(oe.length===0)return a.alloc(0);let ne;if(ee===void 0)for(ee=0,ne=0;ne<oe.length;++ne)ee+=oe[ne].length;const ue=a.allocUnsafe(ee);let ye=0;for(ne=0;ne<oe.length;++ne){let Ue=oe[ne];if(Rn(Ue,Uint8Array))ye+Ue.length>ue.length?(a.isBuffer(Ue)||(Ue=a.from(Ue)),Ue.copy(ue,ye)):Uint8Array.prototype.set.call(ue,Ue,ye);else if(a.isBuffer(Ue))Ue.copy(ue,ye);else throw new TypeError('"list" argument must be an Array of Buffers');ye+=Ue.length}return ue};function V(_e,oe){if(a.isBuffer(_e))return _e.length;if(ArrayBuffer.isView(_e)||Rn(_e,ArrayBuffer))return _e.byteLength;if(typeof _e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof _e);const ee=_e.length,ne=arguments.length>2&&arguments[2]===!0;if(!ne&&ee===0)return 0;let ue=!1;for(;;)switch(oe){case"ascii":case"latin1":case"binary":return ee;case"utf8":case"utf-8":return Jt(_e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee*2;case"hex":return ee>>>1;case"base64":return ii(_e).length;default:if(ue)return ne?-1:Jt(_e).length;oe=(""+oe).toLowerCase(),ue=!0}}a.byteLength=V;function H(_e,oe,ee){let ne=!1;if((oe===void 0||oe<0)&&(oe=0),oe>this.length||((ee===void 0||ee>this.length)&&(ee=this.length),ee<=0)||(ee>>>=0,oe>>>=0,ee<=oe))return"";for(_e||(_e="utf8");;)switch(_e){case"hex":return dt(this,oe,ee);case"utf8":case"utf-8":return De(this,oe,ee);case"ascii":return Qe(this,oe,ee);case"latin1":case"binary":return et(this,oe,ee);case"base64":return Ee(this,oe,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ke(this,oe,ee);default:if(ne)throw new TypeError("Unknown encoding: "+_e);_e=(_e+"").toLowerCase(),ne=!0}}a.prototype._isBuffer=!0;function G(_e,oe,ee){const ne=_e[oe];_e[oe]=_e[ee],_e[ee]=ne}a.prototype.swap16=function(){const oe=this.length;if(oe%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ee=0;ee<oe;ee+=2)G(this,ee,ee+1);return this},a.prototype.swap32=function(){const oe=this.length;if(oe%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ee=0;ee<oe;ee+=4)G(this,ee,ee+3),G(this,ee+1,ee+2);return this},a.prototype.swap64=function(){const oe=this.length;if(oe%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ee=0;ee<oe;ee+=8)G(this,ee,ee+7),G(this,ee+1,ee+6),G(this,ee+2,ee+5),G(this,ee+3,ee+4);return this},a.prototype.toString=function(){const oe=this.length;return oe===0?"":arguments.length===0?De(this,0,oe):H.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(oe){if(!a.isBuffer(oe))throw new TypeError("Argument must be a Buffer");return this===oe?!0:a.compare(this,oe)===0},a.prototype.inspect=function(){let oe="";const ee=n.INSPECT_MAX_BYTES;return oe=this.toString("hex",0,ee).replace(/(.{2})/g,"$1 ").trim(),this.length>ee&&(oe+=" ... "),"<Buffer "+oe+">"},i&&(a.prototype[i]=a.prototype.inspect),a.prototype.compare=function(oe,ee,ne,ue,ye){if(Rn(oe,Uint8Array)&&(oe=a.from(oe,oe.offset,oe.byteLength)),!a.isBuffer(oe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof oe);if(ee===void 0&&(ee=0),ne===void 0&&(ne=oe?oe.length:0),ue===void 0&&(ue=0),ye===void 0&&(ye=this.length),ee<0||ne>oe.length||ue<0||ye>this.length)throw new RangeError("out of range index");if(ue>=ye&&ee>=ne)return 0;if(ue>=ye)return-1;if(ee>=ne)return 1;if(ee>>>=0,ne>>>=0,ue>>>=0,ye>>>=0,this===oe)return 0;let Ue=ye-ue,Ve=ne-ee;const lt=Math.min(Ue,Ve),ge=this.slice(ue,ye),Be=oe.slice(ee,ne);for(let v=0;v<lt;++v)if(ge[v]!==Be[v]){Ue=ge[v],Ve=Be[v];break}return Ue<Ve?-1:Ve<Ue?1:0};function Y(_e,oe,ee,ne,ue){if(_e.length===0)return-1;if(typeof ee=="string"?(ne=ee,ee=0):ee>2147483647?ee=2147483647:ee<-2147483648&&(ee=-2147483648),ee=+ee,gn(ee)&&(ee=ue?0:_e.length-1),ee<0&&(ee=_e.length+ee),ee>=_e.length){if(ue)return-1;ee=_e.length-1}else if(ee<0)if(ue)ee=0;else return-1;if(typeof oe=="string"&&(oe=a.from(oe,ne)),a.isBuffer(oe))return oe.length===0?-1:z(_e,oe,ee,ne,ue);if(typeof oe=="number")return oe=oe&255,typeof Uint8Array.prototype.indexOf=="function"?ue?Uint8Array.prototype.indexOf.call(_e,oe,ee):Uint8Array.prototype.lastIndexOf.call(_e,oe,ee):z(_e,[oe],ee,ne,ue);throw new TypeError("val must be string, number or Buffer")}function z(_e,oe,ee,ne,ue){let ye=1,Ue=_e.length,Ve=oe.length;if(ne!==void 0&&(ne=String(ne).toLowerCase(),ne==="ucs2"||ne==="ucs-2"||ne==="utf16le"||ne==="utf-16le")){if(_e.length<2||oe.length<2)return-1;ye=2,Ue/=2,Ve/=2,ee/=2}function lt(Be,v){return ye===1?Be[v]:Be.readUInt16BE(v*ye)}let ge;if(ue){let Be=-1;for(ge=ee;ge<Ue;ge++)if(lt(_e,ge)===lt(oe,Be===-1?0:ge-Be)){if(Be===-1&&(Be=ge),ge-Be+1===Ve)return Be*ye}else Be!==-1&&(ge-=ge-Be),Be=-1}else for(ee+Ve>Ue&&(ee=Ue-Ve),ge=ee;ge>=0;ge--){let Be=!0;for(let v=0;v<Ve;v++)if(lt(_e,ge+v)!==lt(oe,v)){Be=!1;break}if(Be)return ge}return-1}a.prototype.includes=function(oe,ee,ne){return this.indexOf(oe,ee,ne)!==-1},a.prototype.indexOf=function(oe,ee,ne){return Y(this,oe,ee,ne,!0)},a.prototype.lastIndexOf=function(oe,ee,ne){return Y(this,oe,ee,ne,!1)};function se(_e,oe,ee,ne){ee=Number(ee)||0;const ue=_e.length-ee;ne?(ne=Number(ne),ne>ue&&(ne=ue)):ne=ue;const ye=oe.length;ne>ye/2&&(ne=ye/2);let Ue;for(Ue=0;Ue<ne;++Ue){const Ve=parseInt(oe.substr(Ue*2,2),16);if(gn(Ve))return Ue;_e[ee+Ue]=Ve}return Ue}function le(_e,oe,ee,ne){return wn(Jt(oe,_e.length-ee),_e,ee,ne)}function me(_e,oe,ee,ne){return wn(Tn(oe),_e,ee,ne)}function de(_e,oe,ee,ne){return wn(ii(oe),_e,ee,ne)}function be(_e,oe,ee,ne){return wn(Ln(oe,_e.length-ee),_e,ee,ne)}a.prototype.write=function(oe,ee,ne,ue){if(ee===void 0)ue="utf8",ne=this.length,ee=0;else if(ne===void 0&&typeof ee=="string")ue=ee,ne=this.length,ee=0;else if(isFinite(ee))ee=ee>>>0,isFinite(ne)?(ne=ne>>>0,ue===void 0&&(ue="utf8")):(ue=ne,ne=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ye=this.length-ee;if((ne===void 0||ne>ye)&&(ne=ye),oe.length>0&&(ne<0||ee<0)||ee>this.length)throw new RangeError("Attempt to write outside buffer bounds");ue||(ue="utf8");let Ue=!1;for(;;)switch(ue){case"hex":return se(this,oe,ee,ne);case"utf8":case"utf-8":return le(this,oe,ee,ne);case"ascii":case"latin1":case"binary":return me(this,oe,ee,ne);case"base64":return de(this,oe,ee,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,oe,ee,ne);default:if(Ue)throw new TypeError("Unknown encoding: "+ue);ue=(""+ue).toLowerCase(),Ue=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ee(_e,oe,ee){return oe===0&&ee===_e.length?e.fromByteArray(_e):e.fromByteArray(_e.slice(oe,ee))}function De(_e,oe,ee){ee=Math.min(_e.length,ee);const ne=[];let ue=oe;for(;ue<ee;){const ye=_e[ue];let Ue=null,Ve=ye>239?4:ye>223?3:ye>191?2:1;if(ue+Ve<=ee){let lt,ge,Be,v;switch(Ve){case 1:ye<128&&(Ue=ye);break;case 2:lt=_e[ue+1],(lt&192)===128&&(v=(ye&31)<<6|lt&63,v>127&&(Ue=v));break;case 3:lt=_e[ue+1],ge=_e[ue+2],(lt&192)===128&&(ge&192)===128&&(v=(ye&15)<<12|(lt&63)<<6|ge&63,v>2047&&(v<55296||v>57343)&&(Ue=v));break;case 4:lt=_e[ue+1],ge=_e[ue+2],Be=_e[ue+3],(lt&192)===128&&(ge&192)===128&&(Be&192)===128&&(v=(ye&15)<<18|(lt&63)<<12|(ge&63)<<6|Be&63,v>65535&&v<1114112&&(Ue=v))}}Ue===null?(Ue=65533,Ve=1):Ue>65535&&(Ue-=65536,ne.push(Ue>>>10&1023|55296),Ue=56320|Ue&1023),ne.push(Ue),ue+=Ve}return Ie(ne)}const je=4096;function Ie(_e){const oe=_e.length;if(oe<=je)return String.fromCharCode.apply(String,_e);let ee="",ne=0;for(;ne<oe;)ee+=String.fromCharCode.apply(String,_e.slice(ne,ne+=je));return ee}function Qe(_e,oe,ee){let ne="";ee=Math.min(_e.length,ee);for(let ue=oe;ue<ee;++ue)ne+=String.fromCharCode(_e[ue]&127);return ne}function et(_e,oe,ee){let ne="";ee=Math.min(_e.length,ee);for(let ue=oe;ue<ee;++ue)ne+=String.fromCharCode(_e[ue]);return ne}function dt(_e,oe,ee){const ne=_e.length;(!oe||oe<0)&&(oe=0),(!ee||ee<0||ee>ne)&&(ee=ne);let ue="";for(let ye=oe;ye<ee;++ye)ue+=Yn[_e[ye]];return ue}function ke(_e,oe,ee){const ne=_e.slice(oe,ee);let ue="";for(let ye=0;ye<ne.length-1;ye+=2)ue+=String.fromCharCode(ne[ye]+ne[ye+1]*256);return ue}a.prototype.slice=function(oe,ee){const ne=this.length;oe=~~oe,ee=ee===void 0?ne:~~ee,oe<0?(oe+=ne,oe<0&&(oe=0)):oe>ne&&(oe=ne),ee<0?(ee+=ne,ee<0&&(ee=0)):ee>ne&&(ee=ne),ee<oe&&(ee=oe);const ue=this.subarray(oe,ee);return Object.setPrototypeOf(ue,a.prototype),ue};function we(_e,oe,ee){if(_e%1!==0||_e<0)throw new RangeError("offset is not uint");if(_e+oe>ee)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(oe,ee,ne){oe=oe>>>0,ee=ee>>>0,ne||we(oe,ee,this.length);let ue=this[oe],ye=1,Ue=0;for(;++Ue<ee&&(ye*=256);)ue+=this[oe+Ue]*ye;return ue},a.prototype.readUintBE=a.prototype.readUIntBE=function(oe,ee,ne){oe=oe>>>0,ee=ee>>>0,ne||we(oe,ee,this.length);let ue=this[oe+--ee],ye=1;for(;ee>0&&(ye*=256);)ue+=this[oe+--ee]*ye;return ue},a.prototype.readUint8=a.prototype.readUInt8=function(oe,ee){return oe=oe>>>0,ee||we(oe,1,this.length),this[oe]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(oe,ee){return oe=oe>>>0,ee||we(oe,2,this.length),this[oe]|this[oe+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(oe,ee){return oe=oe>>>0,ee||we(oe,2,this.length),this[oe]<<8|this[oe+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(oe,ee){return oe=oe>>>0,ee||we(oe,4,this.length),(this[oe]|this[oe+1]<<8|this[oe+2]<<16)+this[oe+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(oe,ee){return oe=oe>>>0,ee||we(oe,4,this.length),this[oe]*16777216+(this[oe+1]<<16|this[oe+2]<<8|this[oe+3])},a.prototype.readBigUInt64LE=Dn(function(oe){oe=oe>>>0,rt(oe,"offset");const ee=this[oe],ne=this[oe+7];(ee===void 0||ne===void 0)&&pt(oe,this.length-8);const ue=ee+this[++oe]*2**8+this[++oe]*2**16+this[++oe]*2**24,ye=this[++oe]+this[++oe]*2**8+this[++oe]*2**16+ne*2**24;return BigInt(ue)+(BigInt(ye)<<BigInt(32))}),a.prototype.readBigUInt64BE=Dn(function(oe){oe=oe>>>0,rt(oe,"offset");const ee=this[oe],ne=this[oe+7];(ee===void 0||ne===void 0)&&pt(oe,this.length-8);const ue=ee*2**24+this[++oe]*2**16+this[++oe]*2**8+this[++oe],ye=this[++oe]*2**24+this[++oe]*2**16+this[++oe]*2**8+ne;return(BigInt(ue)<<BigInt(32))+BigInt(ye)}),a.prototype.readIntLE=function(oe,ee,ne){oe=oe>>>0,ee=ee>>>0,ne||we(oe,ee,this.length);let ue=this[oe],ye=1,Ue=0;for(;++Ue<ee&&(ye*=256);)ue+=this[oe+Ue]*ye;return ye*=128,ue>=ye&&(ue-=Math.pow(2,8*ee)),ue},a.prototype.readIntBE=function(oe,ee,ne){oe=oe>>>0,ee=ee>>>0,ne||we(oe,ee,this.length);let ue=ee,ye=1,Ue=this[oe+--ue];for(;ue>0&&(ye*=256);)Ue+=this[oe+--ue]*ye;return ye*=128,Ue>=ye&&(Ue-=Math.pow(2,8*ee)),Ue},a.prototype.readInt8=function(oe,ee){return oe=oe>>>0,ee||we(oe,1,this.length),this[oe]&128?(255-this[oe]+1)*-1:this[oe]},a.prototype.readInt16LE=function(oe,ee){oe=oe>>>0,ee||we(oe,2,this.length);const ne=this[oe]|this[oe+1]<<8;return ne&32768?ne|4294901760:ne},a.prototype.readInt16BE=function(oe,ee){oe=oe>>>0,ee||we(oe,2,this.length);const ne=this[oe+1]|this[oe]<<8;return ne&32768?ne|4294901760:ne},a.prototype.readInt32LE=function(oe,ee){return oe=oe>>>0,ee||we(oe,4,this.length),this[oe]|this[oe+1]<<8|this[oe+2]<<16|this[oe+3]<<24},a.prototype.readInt32BE=function(oe,ee){return oe=oe>>>0,ee||we(oe,4,this.length),this[oe]<<24|this[oe+1]<<16|this[oe+2]<<8|this[oe+3]},a.prototype.readBigInt64LE=Dn(function(oe){oe=oe>>>0,rt(oe,"offset");const ee=this[oe],ne=this[oe+7];(ee===void 0||ne===void 0)&&pt(oe,this.length-8);const ue=this[oe+4]+this[oe+5]*2**8+this[oe+6]*2**16+(ne<<24);return(BigInt(ue)<<BigInt(32))+BigInt(ee+this[++oe]*2**8+this[++oe]*2**16+this[++oe]*2**24)}),a.prototype.readBigInt64BE=Dn(function(oe){oe=oe>>>0,rt(oe,"offset");const ee=this[oe],ne=this[oe+7];(ee===void 0||ne===void 0)&&pt(oe,this.length-8);const ue=(ee<<24)+this[++oe]*2**16+this[++oe]*2**8+this[++oe];return(BigInt(ue)<<BigInt(32))+BigInt(this[++oe]*2**24+this[++oe]*2**16+this[++oe]*2**8+ne)}),a.prototype.readFloatLE=function(oe,ee){return oe=oe>>>0,ee||we(oe,4,this.length),t.read(this,oe,!0,23,4)},a.prototype.readFloatBE=function(oe,ee){return oe=oe>>>0,ee||we(oe,4,this.length),t.read(this,oe,!1,23,4)},a.prototype.readDoubleLE=function(oe,ee){return oe=oe>>>0,ee||we(oe,8,this.length),t.read(this,oe,!0,52,8)},a.prototype.readDoubleBE=function(oe,ee){return oe=oe>>>0,ee||we(oe,8,this.length),t.read(this,oe,!1,52,8)};function ze(_e,oe,ee,ne,ue,ye){if(!a.isBuffer(_e))throw new TypeError('"buffer" argument must be a Buffer instance');if(oe>ue||oe<ye)throw new RangeError('"value" argument is out of bounds');if(ee+ne>_e.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(oe,ee,ne,ue){if(oe=+oe,ee=ee>>>0,ne=ne>>>0,!ue){const Ve=Math.pow(2,8*ne)-1;ze(this,oe,ee,ne,Ve,0)}let ye=1,Ue=0;for(this[ee]=oe&255;++Ue<ne&&(ye*=256);)this[ee+Ue]=oe/ye&255;return ee+ne},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(oe,ee,ne,ue){if(oe=+oe,ee=ee>>>0,ne=ne>>>0,!ue){const Ve=Math.pow(2,8*ne)-1;ze(this,oe,ee,ne,Ve,0)}let ye=ne-1,Ue=1;for(this[ee+ye]=oe&255;--ye>=0&&(Ue*=256);)this[ee+ye]=oe/Ue&255;return ee+ne},a.prototype.writeUint8=a.prototype.writeUInt8=function(oe,ee,ne){return oe=+oe,ee=ee>>>0,ne||ze(this,oe,ee,1,255,0),this[ee]=oe&255,ee+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(oe,ee,ne){return oe=+oe,ee=ee>>>0,ne||ze(this,oe,ee,2,65535,0),this[ee]=oe&255,this[ee+1]=oe>>>8,ee+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(oe,ee,ne){return oe=+oe,ee=ee>>>0,ne||ze(this,oe,ee,2,65535,0),this[ee]=oe>>>8,this[ee+1]=oe&255,ee+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(oe,ee,ne){return oe=+oe,ee=ee>>>0,ne||ze(this,oe,ee,4,4294967295,0),this[ee+3]=oe>>>24,this[ee+2]=oe>>>16,this[ee+1]=oe>>>8,this[ee]=oe&255,ee+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(oe,ee,ne){return oe=+oe,ee=ee>>>0,ne||ze(this,oe,ee,4,4294967295,0),this[ee]=oe>>>24,this[ee+1]=oe>>>16,this[ee+2]=oe>>>8,this[ee+3]=oe&255,ee+4};function xe(_e,oe,ee,ne,ue){ut(oe,ne,ue,_e,ee,7);let ye=Number(oe&BigInt(4294967295));_e[ee++]=ye,ye=ye>>8,_e[ee++]=ye,ye=ye>>8,_e[ee++]=ye,ye=ye>>8,_e[ee++]=ye;let Ue=Number(oe>>BigInt(32)&BigInt(4294967295));return _e[ee++]=Ue,Ue=Ue>>8,_e[ee++]=Ue,Ue=Ue>>8,_e[ee++]=Ue,Ue=Ue>>8,_e[ee++]=Ue,ee}function At(_e,oe,ee,ne,ue){ut(oe,ne,ue,_e,ee,7);let ye=Number(oe&BigInt(4294967295));_e[ee+7]=ye,ye=ye>>8,_e[ee+6]=ye,ye=ye>>8,_e[ee+5]=ye,ye=ye>>8,_e[ee+4]=ye;let Ue=Number(oe>>BigInt(32)&BigInt(4294967295));return _e[ee+3]=Ue,Ue=Ue>>8,_e[ee+2]=Ue,Ue=Ue>>8,_e[ee+1]=Ue,Ue=Ue>>8,_e[ee]=Ue,ee+8}a.prototype.writeBigUInt64LE=Dn(function(oe,ee=0){return xe(this,oe,ee,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Dn(function(oe,ee=0){return At(this,oe,ee,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(oe,ee,ne,ue){if(oe=+oe,ee=ee>>>0,!ue){const lt=Math.pow(2,8*ne-1);ze(this,oe,ee,ne,lt-1,-lt)}let ye=0,Ue=1,Ve=0;for(this[ee]=oe&255;++ye<ne&&(Ue*=256);)oe<0&&Ve===0&&this[ee+ye-1]!==0&&(Ve=1),this[ee+ye]=(oe/Ue>>0)-Ve&255;return ee+ne},a.prototype.writeIntBE=function(oe,ee,ne,ue){if(oe=+oe,ee=ee>>>0,!ue){const lt=Math.pow(2,8*ne-1);ze(this,oe,ee,ne,lt-1,-lt)}let ye=ne-1,Ue=1,Ve=0;for(this[ee+ye]=oe&255;--ye>=0&&(Ue*=256);)oe<0&&Ve===0&&this[ee+ye+1]!==0&&(Ve=1),this[ee+ye]=(oe/Ue>>0)-Ve&255;return ee+ne},a.prototype.writeInt8=function(oe,ee,ne){return oe=+oe,ee=ee>>>0,ne||ze(this,oe,ee,1,127,-128),oe<0&&(oe=255+oe+1),this[ee]=oe&255,ee+1},a.prototype.writeInt16LE=function(oe,ee,ne){return oe=+oe,ee=ee>>>0,ne||ze(this,oe,ee,2,32767,-32768),this[ee]=oe&255,this[ee+1]=oe>>>8,ee+2},a.prototype.writeInt16BE=function(oe,ee,ne){return oe=+oe,ee=ee>>>0,ne||ze(this,oe,ee,2,32767,-32768),this[ee]=oe>>>8,this[ee+1]=oe&255,ee+2},a.prototype.writeInt32LE=function(oe,ee,ne){return oe=+oe,ee=ee>>>0,ne||ze(this,oe,ee,4,2147483647,-2147483648),this[ee]=oe&255,this[ee+1]=oe>>>8,this[ee+2]=oe>>>16,this[ee+3]=oe>>>24,ee+4},a.prototype.writeInt32BE=function(oe,ee,ne){return oe=+oe,ee=ee>>>0,ne||ze(this,oe,ee,4,2147483647,-2147483648),oe<0&&(oe=4294967295+oe+1),this[ee]=oe>>>24,this[ee+1]=oe>>>16,this[ee+2]=oe>>>8,this[ee+3]=oe&255,ee+4},a.prototype.writeBigInt64LE=Dn(function(oe,ee=0){return xe(this,oe,ee,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Dn(function(oe,ee=0){return At(this,oe,ee,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function it(_e,oe,ee,ne,ue,ye){if(ee+ne>_e.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("Index out of range")}function bt(_e,oe,ee,ne,ue){return oe=+oe,ee=ee>>>0,ue||it(_e,oe,ee,4),t.write(_e,oe,ee,ne,23,4),ee+4}a.prototype.writeFloatLE=function(oe,ee,ne){return bt(this,oe,ee,!0,ne)},a.prototype.writeFloatBE=function(oe,ee,ne){return bt(this,oe,ee,!1,ne)};function Bt(_e,oe,ee,ne,ue){return oe=+oe,ee=ee>>>0,ue||it(_e,oe,ee,8),t.write(_e,oe,ee,ne,52,8),ee+8}a.prototype.writeDoubleLE=function(oe,ee,ne){return Bt(this,oe,ee,!0,ne)},a.prototype.writeDoubleBE=function(oe,ee,ne){return Bt(this,oe,ee,!1,ne)},a.prototype.copy=function(oe,ee,ne,ue){if(!a.isBuffer(oe))throw new TypeError("argument should be a Buffer");if(ne||(ne=0),!ue&&ue!==0&&(ue=this.length),ee>=oe.length&&(ee=oe.length),ee||(ee=0),ue>0&&ue<ne&&(ue=ne),ue===ne||oe.length===0||this.length===0)return 0;if(ee<0)throw new RangeError("targetStart out of bounds");if(ne<0||ne>=this.length)throw new RangeError("Index out of range");if(ue<0)throw new RangeError("sourceEnd out of bounds");ue>this.length&&(ue=this.length),oe.length-ee<ue-ne&&(ue=oe.length-ee+ne);const ye=ue-ne;return this===oe&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ee,ne,ue):Uint8Array.prototype.set.call(oe,this.subarray(ne,ue),ee),ye},a.prototype.fill=function(oe,ee,ne,ue){if(typeof oe=="string"){if(typeof ee=="string"?(ue=ee,ee=0,ne=this.length):typeof ne=="string"&&(ue=ne,ne=this.length),ue!==void 0&&typeof ue!="string")throw new TypeError("encoding must be a string");if(typeof ue=="string"&&!a.isEncoding(ue))throw new TypeError("Unknown encoding: "+ue);if(oe.length===1){const Ue=oe.charCodeAt(0);(ue==="utf8"&&Ue<128||ue==="latin1")&&(oe=Ue)}}else typeof oe=="number"?oe=oe&255:typeof oe=="boolean"&&(oe=Number(oe));if(ee<0||this.length<ee||this.length<ne)throw new RangeError("Out of range index");if(ne<=ee)return this;ee=ee>>>0,ne=ne===void 0?this.length:ne>>>0,oe||(oe=0);let ye;if(typeof oe=="number")for(ye=ee;ye<ne;++ye)this[ye]=oe;else{const Ue=a.isBuffer(oe)?oe:a.from(oe,ue),Ve=Ue.length;if(Ve===0)throw new TypeError('The value "'+oe+'" is invalid for argument "value"');for(ye=0;ye<ne-ee;++ye)this[ye+ee]=Ue[ye%Ve]}return this};const Ke={};function Te(_e,oe,ee){Ke[_e]=class extends ee{constructor(){super(),Object.defineProperty(this,"message",{value:oe.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${_e}]`,this.stack,delete this.name}get code(){return _e}set code(ue){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ue,writable:!0})}toString(){return`${this.name} [${_e}]: ${this.message}`}}}Te("ERR_BUFFER_OUT_OF_BOUNDS",function(_e){return _e?`${_e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Te("ERR_INVALID_ARG_TYPE",function(_e,oe){return`The "${_e}" argument must be of type number. Received type ${typeof oe}`},TypeError),Te("ERR_OUT_OF_RANGE",function(_e,oe,ee){let ne=`The value of "${_e}" is out of range.`,ue=ee;return Number.isInteger(ee)&&Math.abs(ee)>2**32?ue=Se(String(ee)):typeof ee=="bigint"&&(ue=String(ee),(ee>BigInt(2)**BigInt(32)||ee<-(BigInt(2)**BigInt(32)))&&(ue=Se(ue)),ue+="n"),ne+=` It must be ${oe}. Received ${ue}`,ne},RangeError);function Se(_e){let oe="",ee=_e.length;const ne=_e[0]==="-"?1:0;for(;ee>=ne+4;ee-=3)oe=`_${_e.slice(ee-3,ee)}${oe}`;return`${_e.slice(0,ee)}${oe}`}function Ne(_e,oe,ee){rt(oe,"offset"),(_e[oe]===void 0||_e[oe+ee]===void 0)&&pt(oe,_e.length-(ee+1))}function ut(_e,oe,ee,ne,ue,ye){if(_e>ee||_e<oe){const Ue=typeof oe=="bigint"?"n":"";let Ve;throw oe===0||oe===BigInt(0)?Ve=`>= 0${Ue} and < 2${Ue} ** ${(ye+1)*8}${Ue}`:Ve=`>= -(2${Ue} ** ${(ye+1)*8-1}${Ue}) and < 2 ** ${(ye+1)*8-1}${Ue}`,new Ke.ERR_OUT_OF_RANGE("value",Ve,_e)}Ne(ne,ue,ye)}function rt(_e,oe){if(typeof _e!="number")throw new Ke.ERR_INVALID_ARG_TYPE(oe,"number",_e)}function pt(_e,oe,ee){throw Math.floor(_e)!==_e?(rt(_e,ee),new Ke.ERR_OUT_OF_RANGE("offset","an integer",_e)):oe<0?new Ke.ERR_BUFFER_OUT_OF_BOUNDS:new Ke.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${oe}`,_e)}const Dt=/[^+/0-9A-Za-z-_]/g;function Ot(_e){if(_e=_e.split("=")[0],_e=_e.trim().replace(Dt,""),_e.length<2)return"";for(;_e.length%4!==0;)_e=_e+"=";return _e}function Jt(_e,oe){oe=oe||1/0;let ee;const ne=_e.length;let ue=null;const ye=[];for(let Ue=0;Ue<ne;++Ue){if(ee=_e.charCodeAt(Ue),ee>55295&&ee<57344){if(!ue){if(ee>56319){(oe-=3)>-1&&ye.push(239,191,189);continue}else if(Ue+1===ne){(oe-=3)>-1&&ye.push(239,191,189);continue}ue=ee;continue}if(ee<56320){(oe-=3)>-1&&ye.push(239,191,189),ue=ee;continue}ee=(ue-55296<<10|ee-56320)+65536}else ue&&(oe-=3)>-1&&ye.push(239,191,189);if(ue=null,ee<128){if((oe-=1)<0)break;ye.push(ee)}else if(ee<2048){if((oe-=2)<0)break;ye.push(ee>>6|192,ee&63|128)}else if(ee<65536){if((oe-=3)<0)break;ye.push(ee>>12|224,ee>>6&63|128,ee&63|128)}else if(ee<1114112){if((oe-=4)<0)break;ye.push(ee>>18|240,ee>>12&63|128,ee>>6&63|128,ee&63|128)}else throw new Error("Invalid code point")}return ye}function Tn(_e){const oe=[];for(let ee=0;ee<_e.length;++ee)oe.push(_e.charCodeAt(ee)&255);return oe}function Ln(_e,oe){let ee,ne,ue;const ye=[];for(let Ue=0;Ue<_e.length&&!((oe-=2)<0);++Ue)ee=_e.charCodeAt(Ue),ne=ee>>8,ue=ee%256,ye.push(ue),ye.push(ne);return ye}function ii(_e){return e.toByteArray(Ot(_e))}function wn(_e,oe,ee,ne){let ue;for(ue=0;ue<ne&&!(ue+ee>=oe.length||ue>=_e.length);++ue)oe[ue+ee]=_e[ue];return ue}function Rn(_e,oe){return _e instanceof oe||_e!=null&&_e.constructor!=null&&_e.constructor.name!=null&&_e.constructor.name===oe.name}function gn(_e){return _e!==_e}const Yn=(function(){const _e="0123456789abcdef",oe=new Array(256);for(let ee=0;ee<16;++ee){const ne=ee*16;for(let ue=0;ue<16;++ue)oe[ne+ue]=_e[ee]+_e[ue]}return oe})();function Dn(_e){return typeof BigInt>"u"?Tt:_e}function Tt(){throw new Error("BigInt not supported")}})(uO)),uO}var mue=pue();const gue=Xl(mue);var cO,bF;function yue(){if(bF)return cO;bF=1;var n="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",i="[object GeneratorFunction]",r="[object Symbol]",o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/,a=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=/[\\^$.*+?()[\]{}|]/g,m=/\\(\\)?/g,y=/^\[object .+?Constructor\]$/,M=typeof window=="object"&&window&&window.Object===Object&&window,x=typeof self=="object"&&self&&self.Object===Object&&self,k=M||x||Function("return this")();function P(ge,Be){return ge?.[Be]}function F(ge){var Be=!1;if(ge!=null&&typeof ge.toString!="function")try{Be=!!(ge+"")}catch{}return Be}var j=Array.prototype,q=Function.prototype,V=Object.prototype,H=k["__core-js_shared__"],G=(function(){var ge=/[^.]+$/.exec(H&&H.keys&&H.keys.IE_PROTO||"");return ge?"Symbol(src)_1."+ge:""})(),Y=q.toString,z=V.hasOwnProperty,se=V.toString,le=RegExp("^"+Y.call(z).replace(h,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),me=k.Symbol,de=j.splice,be=ii(k,"Map"),Ee=ii(Object,"create"),De=me?me.prototype:void 0,je=De?De.toString:void 0;function Ie(ge){var Be=-1,v=ge?ge.length:0;for(this.clear();++Be<v;){var yt=ge[Be];this.set(yt[0],yt[1])}}function Qe(){this.__data__=Ee?Ee(null):{}}function et(ge){return this.has(ge)&&delete this.__data__[ge]}function dt(ge){var Be=this.__data__;if(Ee){var v=Be[ge];return v===e?void 0:v}return z.call(Be,ge)?Be[ge]:void 0}function ke(ge){var Be=this.__data__;return Ee?Be[ge]!==void 0:z.call(Be,ge)}function we(ge,Be){var v=this.__data__;return v[ge]=Ee&&Be===void 0?e:Be,this}Ie.prototype.clear=Qe,Ie.prototype.delete=et,Ie.prototype.get=dt,Ie.prototype.has=ke,Ie.prototype.set=we;function ze(ge){var Be=-1,v=ge?ge.length:0;for(this.clear();++Be<v;){var yt=ge[Be];this.set(yt[0],yt[1])}}function xe(){this.__data__=[]}function At(ge){var Be=this.__data__,v=pt(Be,ge);if(v<0)return!1;var yt=Be.length-1;return v==yt?Be.pop():de.call(Be,v,1),!0}function it(ge){var Be=this.__data__,v=pt(Be,ge);return v<0?void 0:Be[v][1]}function bt(ge){return pt(this.__data__,ge)>-1}function Bt(ge,Be){var v=this.__data__,yt=pt(v,ge);return yt<0?v.push([ge,Be]):v[yt][1]=Be,this}ze.prototype.clear=xe,ze.prototype.delete=At,ze.prototype.get=it,ze.prototype.has=bt,ze.prototype.set=Bt;function Ke(ge){var Be=-1,v=ge?ge.length:0;for(this.clear();++Be<v;){var yt=ge[Be];this.set(yt[0],yt[1])}}function Te(){this.__data__={hash:new Ie,map:new(be||ze),string:new Ie}}function Se(ge){return Ln(this,ge).delete(ge)}function Ne(ge){return Ln(this,ge).get(ge)}function ut(ge){return Ln(this,ge).has(ge)}function rt(ge,Be){return Ln(this,ge).set(ge,Be),this}Ke.prototype.clear=Te,Ke.prototype.delete=Se,Ke.prototype.get=Ne,Ke.prototype.has=ut,Ke.prototype.set=rt;function pt(ge,Be){for(var v=ge.length;v--;)if(oe(ge[v][0],Be))return v;return-1}function Dt(ge,Be){Be=wn(Be,ge)?[Be]:Tn(Be);for(var v=0,yt=Be.length;ge!=null&&v<yt;)ge=ge[Dn(Be[v++])];return v&&v==yt?ge:void 0}function Ot(ge){if(!ue(ge)||gn(ge))return!1;var Be=ne(ge)||F(ge)?le:y;return Be.test(Tt(ge))}function Jt(ge){if(typeof ge=="string")return ge;if(Ue(ge))return je?je.call(ge):"";var Be=ge+"";return Be=="0"&&1/ge==-1/0?"-0":Be}function Tn(ge){return ee(ge)?ge:Yn(ge)}function Ln(ge,Be){var v=ge.__data__;return Rn(Be)?v[typeof Be=="string"?"string":"hash"]:v.map}function ii(ge,Be){var v=P(ge,Be);return Ot(v)?v:void 0}function wn(ge,Be){if(ee(ge))return!1;var v=typeof ge;return v=="number"||v=="symbol"||v=="boolean"||ge==null||Ue(ge)?!0:s.test(ge)||!o.test(ge)||Be!=null&&ge in Object(Be)}function Rn(ge){var Be=typeof ge;return Be=="string"||Be=="number"||Be=="symbol"||Be=="boolean"?ge!=="__proto__":ge===null}function gn(ge){return!!G&&G in ge}var Yn=_e(function(ge){ge=Ve(ge);var Be=[];return a.test(ge)&&Be.push(""),ge.replace(c,function(v,yt,Mt,Pt){Be.push(Mt?Pt.replace(m,"$1"):yt||v)}),Be});function Dn(ge){if(typeof ge=="string"||Ue(ge))return ge;var Be=ge+"";return Be=="0"&&1/ge==-1/0?"-0":Be}function Tt(ge){if(ge!=null){try{return Y.call(ge)}catch{}try{return ge+""}catch{}}return""}function _e(ge,Be){if(typeof ge!="function"||Be&&typeof Be!="function")throw new TypeError(n);var v=function(){var yt=arguments,Mt=Be?Be.apply(this,yt):yt[0],Pt=v.cache;if(Pt.has(Mt))return Pt.get(Mt);var st=ge.apply(this,yt);return v.cache=Pt.set(Mt,st),st};return v.cache=new(_e.Cache||Ke),v}_e.Cache=Ke;function oe(ge,Be){return ge===Be||ge!==ge&&Be!==Be}var ee=Array.isArray;function ne(ge){var Be=ue(ge)?se.call(ge):"";return Be==t||Be==i}function ue(ge){var Be=typeof ge;return!!ge&&(Be=="object"||Be=="function")}function ye(ge){return!!ge&&typeof ge=="object"}function Ue(ge){return typeof ge=="symbol"||ye(ge)&&se.call(ge)==r}function Ve(ge){return ge==null?"":Jt(ge)}function lt(ge,Be,v){var yt=ge==null?void 0:Dt(ge,Be);return yt===void 0?v:yt}return cO=lt,cO}var vue=yue();const bue=Xl(vue);var T2={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Cue=T2.exports,CF;function _ue(){return CF||(CF=1,(function(n,e){(function(){var t,i="4.17.21",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",h=500,m="__lodash_placeholder__",y=1,M=2,x=4,k=1,P=2,F=1,j=2,q=4,V=8,H=16,G=32,Y=64,z=128,se=256,le=512,me=30,de="...",be=800,Ee=16,De=1,je=2,Ie=3,Qe=1/0,et=9007199254740991,dt=17976931348623157e292,ke=NaN,we=4294967295,ze=we-1,xe=we>>>1,At=[["ary",z],["bind",F],["bindKey",j],["curry",V],["curryRight",H],["flip",le],["partial",G],["partialRight",Y],["rearg",se]],it="[object Arguments]",bt="[object Array]",Bt="[object AsyncFunction]",Ke="[object Boolean]",Te="[object Date]",Se="[object DOMException]",Ne="[object Error]",ut="[object Function]",rt="[object GeneratorFunction]",pt="[object Map]",Dt="[object Number]",Ot="[object Null]",Jt="[object Object]",Tn="[object Promise]",Ln="[object Proxy]",ii="[object RegExp]",wn="[object Set]",Rn="[object String]",gn="[object Symbol]",Yn="[object Undefined]",Dn="[object WeakMap]",Tt="[object WeakSet]",_e="[object ArrayBuffer]",oe="[object DataView]",ee="[object Float32Array]",ne="[object Float64Array]",ue="[object Int8Array]",ye="[object Int16Array]",Ue="[object Int32Array]",Ve="[object Uint8Array]",lt="[object Uint8ClampedArray]",ge="[object Uint16Array]",Be="[object Uint32Array]",v=/\b__p \+= '';/g,yt=/\b(__p \+=) '' \+/g,Mt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Pt=/&(?:amp|lt|gt|quot|#39);/g,st=/[&<>"']/g,fn=RegExp(Pt.source),Fn=RegExp(st.source),pn=/<%-([\s\S]+?)%>/g,$n=/<%([\s\S]+?)%>/g,Zn=/<%=([\s\S]+?)%>/g,ai=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Hi=/^\w*$/,Ti=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tr=/[\\^$.*+?()[\]{}|]/g,oi=RegExp(tr.source),Pi=/^\s+/,Zt=/\s/,pr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Zi=/\{\n\/\* \[wrapped with (.+)\] \*/,ea=/,? & /,no=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,sn=/[()=,{}\[\]\/\s]/,Ci=/\\(\\)?/g,Ui=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,nr=/\w*$/,Jl=/^[-+]0x[0-9a-f]+$/i,Al=/^0b[01]+$/i,Ki=/^\[object .+?Constructor\]$/,$a=/^0o[0-7]+$/i,hl=/^(?:0|[1-9]\d*)$/,fo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qs=/($^)/,Kl=/['\n\r\u2028\u2029\\]/g,io="\\ud800-\\udfff",As="\\u0300-\\u036f",pa="\\ufe20-\\ufe2f",Dr="\\u20d0-\\u20ff",Ll=As+pa+Dr,Da="\\u2700-\\u27bf",qs="a-z\\xdf-\\xf6\\xf8-\\xff",Sl="\\xac\\xb1\\xd7\\xf7",eu="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",$A="\\u2000-\\u206f",Vc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",mc="A-Z\\xc0-\\xd6\\xd8-\\xde",ma="\\ufe0e\\ufe0f",xs=Sl+eu+$A+Vc,gc="[']",tu="["+io+"]",yc="["+xs+"]",nu="["+Ll+"]",Fl="\\d+",VA="["+Da+"]",ga="["+qs+"]",iu="[^"+io+xs+Fl+Da+qs+mc+"]",ru="\\ud83c[\\udffb-\\udfff]",Hc="(?:"+nu+"|"+ru+")",Hu="[^"+io+"]",Pa="(?:\\ud83c[\\udde6-\\uddff]){2}",Ds="[\\ud800-\\udbff][\\udc00-\\udfff]",qr="["+mc+"]",Yi="\\u200d",ou="(?:"+ga+"|"+iu+")",Vo="(?:"+qr+"|"+iu+")",dl="(?:"+gc+"(?:d|ll|m|re|s|t|ve))?",Cu="(?:"+gc+"(?:D|LL|M|RE|S|T|VE))?",sr=Hc+"?",El="["+ma+"]?",Va="(?:"+Yi+"(?:"+[Hu,Pa,Ds].join("|")+")"+El+sr+")*",Go="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ps="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ro=El+sr+Va,Eo="(?:"+[VA,Pa,Ds].join("|")+")"+Ro,Ho="(?:"+[Hu+nu+"?",nu,Pa,Ds,tu].join("|")+")",Pr=RegExp(gc,"g"),HA=RegExp(nu,"g"),Zo=RegExp(ru+"(?="+ru+")|"+Ho+Ro,"g"),Wo=RegExp([qr+"?"+ga+"+"+dl+"(?="+[yc,qr,"$"].join("|")+")",Vo+"+"+Cu+"(?="+[yc,qr+ou,"$"].join("|")+")",qr+"?"+ou+"+"+dl,qr+"+"+Cu,Ps,Go,Fl,Eo].join("|"),"g"),Ms=RegExp("["+Yi+io+Ll+ma+"]"),lr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,aa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wi=-1,Jn={};Jn[ee]=Jn[ne]=Jn[ue]=Jn[ye]=Jn[Ue]=Jn[Ve]=Jn[lt]=Jn[ge]=Jn[Be]=!0,Jn[it]=Jn[bt]=Jn[_e]=Jn[Ke]=Jn[oe]=Jn[Te]=Jn[Ne]=Jn[ut]=Jn[pt]=Jn[Dt]=Jn[Jt]=Jn[ii]=Jn[wn]=Jn[Rn]=Jn[Dn]=!1;var Ur={};Ur[it]=Ur[bt]=Ur[_e]=Ur[oe]=Ur[Ke]=Ur[Te]=Ur[ee]=Ur[ne]=Ur[ue]=Ur[ye]=Ur[Ue]=Ur[pt]=Ur[Dt]=Ur[Jt]=Ur[ii]=Ur[wn]=Ur[Rn]=Ur[gn]=Ur[Ve]=Ur[lt]=Ur[ge]=Ur[Be]=!0,Ur[Ne]=Ur[ut]=Ur[Dn]=!1;var X={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},ve={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},wt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ei=parseFloat,Bn=parseInt,_i=typeof window=="object"&&window&&window.Object===Object&&window,zi=typeof self=="object"&&self&&self.Object===Object&&self,Ri=_i||zi||Function("return this")(),Ii=e&&!e.nodeType&&e,mr=Ii&&!0&&n&&!n.nodeType&&n,Tr=mr&&mr.exports===Ii,ji=Tr&&_i.process,ur=(function(){try{var Ut=mr&&mr.require&&mr.require("util").types;return Ut||ji&&ji.binding&&ji.binding("util")}catch{}})(),Hr=ur&&ur.isArrayBuffer,ws=ur&&ur.isDate,gr=ur&&ur.isMap,Ha=ur&&ur.isRegExp,vc=ur&&ur.isSet,_u=ur&&ur.isTypedArray;function ta(Ut,an,nn){switch(nn.length){case 0:return Ut.call(an);case 1:return Ut.call(an,nn[0]);case 2:return Ut.call(an,nn[0],nn[1]);case 3:return Ut.call(an,nn[0],nn[1],nn[2])}return Ut.apply(an,nn)}function Sf(Ut,an,nn,pi){for(var yr=-1,Yr=Ut==null?0:Ut.length;++yr<Yr;){var Ys=Ut[yr];an(pi,Ys,nn(Ys),Ut)}return pi}function Xo(Ut,an){for(var nn=-1,pi=Ut==null?0:Ut.length;++nn<pi&&an(Ut[nn],nn,Ut)!==!1;);return Ut}function yp(Ut,an){for(var nn=Ut==null?0:Ut.length;nn--&&an(Ut[nn],nn,Ut)!==!1;);return Ut}function Zc(Ut,an){for(var nn=-1,pi=Ut==null?0:Ut.length;++nn<pi;)if(!an(Ut[nn],nn,Ut))return!1;return!0}function bc(Ut,an){for(var nn=-1,pi=Ut==null?0:Ut.length,yr=0,Yr=[];++nn<pi;){var Ys=Ut[nn];an(Ys,nn,Ut)&&(Yr[yr++]=Ys)}return Yr}function Kh(Ut,an){var nn=Ut==null?0:Ut.length;return!!nn&&Lh(Ut,an,0)>-1}function ZA(Ut,an,nn){for(var pi=-1,yr=Ut==null?0:Ut.length;++pi<yr;)if(nn(an,Ut[pi]))return!0;return!1}function Wr(Ut,an){for(var nn=-1,pi=Ut==null?0:Ut.length,yr=Array(pi);++nn<pi;)yr[nn]=an(Ut[nn],nn,Ut);return yr}function XA(Ut,an){for(var nn=-1,pi=an.length,yr=Ut.length;++nn<pi;)Ut[yr+nn]=an[nn];return Ut}function Ef(Ut,an,nn,pi){var yr=-1,Yr=Ut==null?0:Ut.length;for(pi&&Yr&&(nn=Ut[++yr]);++yr<Yr;)nn=an(nn,Ut[yr],yr,Ut);return nn}function _1(Ut,an,nn,pi){var yr=Ut==null?0:Ut.length;for(pi&&yr&&(nn=Ut[--yr]);yr--;)nn=an(nn,Ut[yr],yr,Ut);return nn}function vp(Ut,an){for(var nn=-1,pi=Ut==null?0:Ut.length;++nn<pi;)if(an(Ut[nn],nn,Ut))return!0;return!1}var fv=gA("length");function pv(Ut){return Ut.split("")}function ym(Ut){return Ut.match(no)||[]}function vm(Ut,an,nn){var pi;return nn(Ut,function(yr,Yr,Ys){if(an(yr,Yr,Ys))return pi=Yr,!1}),pi}function mA(Ut,an,nn,pi){for(var yr=Ut.length,Yr=nn+(pi?1:-1);pi?Yr--:++Yr<yr;)if(an(Ut[Yr],Yr,Ut))return Yr;return-1}function Lh(Ut,an,nn){return an===an?Xg(Ut,an,nn):mA(Ut,Cc,nn)}function bm(Ut,an,nn,pi){for(var yr=nn-1,Yr=Ut.length;++yr<Yr;)if(pi(Ut[yr],an))return yr;return-1}function Cc(Ut){return Ut!==Ut}function Cm(Ut,an){var nn=Ut==null?0:Ut.length;return nn?Bd(Ut,an)/nn:ke}function gA(Ut){return function(an){return an==null?t:an[Ut]}}function Ed(Ut){return function(an){return Ut==null?t:Ut[an]}}function Od(Ut,an,nn,pi,yr){return yr(Ut,function(Yr,Ys,Qo){nn=pi?(pi=!1,Yr):an(nn,Yr,Ys,Qo)}),nn}function x1(Ut,an){var nn=Ut.length;for(Ut.sort(an);nn--;)Ut[nn]=Ut[nn].value;return Ut}function Bd(Ut,an){for(var nn,pi=-1,yr=Ut.length;++pi<yr;){var Yr=an(Ut[pi]);Yr!==t&&(nn=nn===t?Yr:nn+Yr)}return nn}function _m(Ut,an){for(var nn=-1,pi=Array(Ut);++nn<Ut;)pi[nn]=an(nn);return pi}function Fh(Ut,an){return Wr(an,function(nn){return[nn,Ut[nn]]})}function zh(Ut){return Ut&&Ut.slice(0,xu(Ut)+1).replace(Pi,"")}function su(Ut){return function(an){return Ut(an)}}function Hg(Ut,an){return Wr(an,function(nn){return Ut[nn]})}function Of(Ut,an){return Ut.has(an)}function bp(Ut,an){for(var nn=-1,pi=Ut.length;++nn<pi&&Lh(an,Ut[nn],0)>-1;);return nn}function xm(Ut,an){for(var nn=Ut.length;nn--&&Lh(an,Ut[nn],0)>-1;);return nn}function jh(Ut,an){for(var nn=Ut.length,pi=0;nn--;)Ut[nn]===an&&++pi;return pi}var Bf=Ed(X),M1=Ed(ve);function yA(Ut){return"\\"+wt[Ut]}function Mm(Ut,an){return Ut==null?t:Ut[an]}function JA(Ut){return Ms.test(Ut)}function Id(Ut){return lr.test(Ut)}function Zg(Ut){for(var an,nn=[];!(an=Ut.next()).done;)nn.push(an.value);return nn}function Nh(Ut){var an=-1,nn=Array(Ut.size);return Ut.forEach(function(pi,yr){nn[++an]=[yr,pi]}),nn}function wm(Ut,an){return function(nn){return Ut(an(nn))}}function eh(Ut,an){for(var nn=-1,pi=Ut.length,yr=0,Yr=[];++nn<pi;){var Ys=Ut[nn];(Ys===an||Ys===m)&&(Ut[nn]=m,Yr[yr++]=nn)}return Yr}function Cp(Ut){var an=-1,nn=Array(Ut.size);return Ut.forEach(function(pi){nn[++an]=pi}),nn}function w1(Ut){var an=-1,nn=Array(Ut.size);return Ut.forEach(function(pi){nn[++an]=[pi,pi]}),nn}function Xg(Ut,an,nn){for(var pi=nn-1,yr=Ut.length;++pi<yr;)if(Ut[pi]===an)return pi;return-1}function Jg(Ut,an,nn){for(var pi=nn+1;pi--;)if(Ut[pi]===an)return pi;return pi}function kd(Ut){return JA(Ut)?Sm(Ut):fv(Ut)}function Ss(Ut){return JA(Ut)?Em(Ut):pv(Ut)}function xu(Ut){for(var an=Ut.length;an--&&Zt.test(Ut.charAt(an)););return an}var po=Ed($e);function Sm(Ut){for(var an=Zo.lastIndex=0;Zo.test(Ut);)++an;return an}function Em(Ut){return Ut.match(Zo)||[]}function e0(Ut){return Ut.match(Wo)||[]}var _p=(function Ut(an){an=an==null?Ri:_c.defaults(Ri.Object(),an,_c.pick(Ri,aa));var nn=an.Array,pi=an.Date,yr=an.Error,Yr=an.Function,Ys=an.Math,Qo=an.Object,Td=an.RegExp,vA=an.String,zl=an.TypeError,Rd=nn.prototype,Gh=Yr.prototype,bA=Qo.prototype,th=an["__core-js_shared__"],au=Gh.toString,Do=bA.hasOwnProperty,t0=0,If=(function(){var w=/[^.]+$/.exec(th&&th.keys&&th.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""})(),Ua=bA.toString,Dd=au.call(Qo),lu=Ri._,CA=Td("^"+au.call(Do).replace(tr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nh=Tr?an.Buffer:t,xc=an.Symbol,Mc=an.Uint8Array,Xc=nh?nh.allocUnsafe:t,Jc=wm(Qo.getPrototypeOf,Qo),xp=Qo.create,br=bA.propertyIsEnumerable,Zu=Rd.splice,S1=xc?xc.isConcatSpreadable:t,fl=xc?xc.iterator:t,jl=xc?xc.toStringTag:t,Xu=(function(){try{var w=Ff(Qo,"defineProperty");return w({},"",{}),w}catch{}})(),E1=an.clearTimeout!==Ri.clearTimeout&&an.clearTimeout,Mp=pi&&pi.now!==Ri.Date.now&&pi.now,Pd=an.setTimeout!==Ri.setTimeout&&an.setTimeout,Wh=Ys.ceil,Qh=Ys.floor,ih=Qo.getOwnPropertySymbols,kf=nh?nh.isBuffer:t,uu=an.isFinite,Ud=Rd.join,_A=wm(Qo.keys,Qo),Es=Ys.max,$s=Ys.min,pl=pi.now,Nl=an.parseInt,eA=Ys.random,Gl=Rd.reverse,Mu=Ff(an,"DataView"),Ol=Ff(an,"Map"),Kd=Ff(an,"Promise"),xA=Ff(an,"Set"),qh=Ff(an,"WeakMap"),Ld=Ff(Qo,"create"),na=qh&&new qh,Oo={},ro=Uu(Mu),MA=Uu(Ol),oo=Uu(Kd),rh=Uu(xA),Ka=Uu(qh),Yh=xc?xc.prototype:t,oh=Yh?Yh.valueOf:t,sh=Yh?Yh.toString:t;function qe(w){if(ba(w)&&!Ir(w)&&!(w instanceof Er)){if(w instanceof Wl)return w;if(Do.call(w,"__wrapped__"))return j1(w)}return new Wl(w)}var wu=(function(){function w(){}return function(R){if(!ks(R))return{};if(xp)return xp(R);w.prototype=R;var $=new w;return w.prototype=t,$}})();function wc(){}function Wl(w,R){this.__wrapped__=w,this.__actions__=[],this.__chain__=!!R,this.__index__=0,this.__values__=t}qe.templateSettings={escape:pn,evaluate:$n,interpolate:Zn,variable:"",imports:{_:qe}},qe.prototype=wc.prototype,qe.prototype.constructor=qe,Wl.prototype=wu(wc.prototype),Wl.prototype.constructor=Wl;function Er(w){this.__wrapped__=w,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=we,this.__views__=[]}function wA(){var w=new Er(this.__wrapped__);return w.__actions__=Co(this.__actions__),w.__dir__=this.__dir__,w.__filtered__=this.__filtered__,w.__iteratees__=Co(this.__iteratees__),w.__takeCount__=this.__takeCount__,w.__views__=Co(this.__views__),w}function ah(){if(this.__filtered__){var w=new Er(this);w.__dir__=-1,w.__filtered__=!0}else w=this.clone(),w.__dir__*=-1;return w}function SA(){var w=this.__wrapped__.value(),R=this.__dir__,$=Ir(w),he=R<0,Fe=$?w.length:0,Je=lC(0,Fe,this.__views__),vt=Je.start,It=Je.end,jt=It-vt,_n=he?It:vt-1,xn=this.__iteratees__,Kn=xn.length,gi=0,Vi=$s(jt,this.__takeCount__);if(!$||!he&&Fe==jt&&Vi==jt)return ds(w,this.__actions__);var xr=[];e:for(;jt--&&gi<Vi;){_n+=R;for(var xo=-1,Mr=w[_n];++xo<Kn;){var jo=xn[xo],ts=jo.iteratee,of=jo.type,Oh=ts(Mr);if(of==je)Mr=Oh;else if(!Oh){if(of==De)continue e;break e}}xr[gi++]=Mr}return xr}Er.prototype=wu(wc.prototype),Er.prototype.constructor=Er;function Su(w){var R=-1,$=w==null?0:w.length;for(this.clear();++R<$;){var he=w[R];this.set(he[0],he[1])}}function Ju(){this.__data__=Ld?Ld(null):{},this.size=0}function Za(w){var R=this.has(w)&&delete this.__data__[w];return this.size-=R?1:0,R}function lh(w){var R=this.__data__;if(Ld){var $=R[w];return $===c?t:$}return Do.call(R,w)?R[w]:t}function uh(w){var R=this.__data__;return Ld?R[w]!==t:Do.call(R,w)}function ml(w,R){var $=this.__data__;return this.size+=this.has(w)?0:1,$[w]=Ld&&R===t?c:R,this}Su.prototype.clear=Ju,Su.prototype.delete=Za,Su.prototype.get=lh,Su.prototype.has=uh,Su.prototype.set=ml;function ec(w){var R=-1,$=w==null?0:w.length;for(this.clear();++R<$;){var he=w[R];this.set(he[0],he[1])}}function Fd(){this.__data__=[],this.size=0}function n0(w){var R=this.__data__,$=iA(R,w);if($<0)return!1;var he=R.length-1;return $==he?R.pop():Zu.call(R,$,1),--this.size,!0}function Om(w){var R=this.__data__,$=iA(R,w);return $<0?t:R[$][1]}function Bm(w){return iA(this.__data__,w)>-1}function ia(w,R){var $=this.__data__,he=iA($,w);return he<0?(++this.size,$.push([w,R])):$[he][1]=R,this}ec.prototype.clear=Fd,ec.prototype.delete=n0,ec.prototype.get=Om,ec.prototype.has=Bm,ec.prototype.set=ia;function la(w){var R=-1,$=w==null?0:w.length;for(this.clear();++R<$;){var he=w[R];this.set(he[0],he[1])}}function Xa(){this.size=0,this.__data__={hash:new Su,map:new(Ol||ec),string:new Su}}function Tf(w){var R=u0(this,w).delete(w);return this.size-=R?1:0,R}function tc(w){return u0(this,w).get(w)}function tA(w){return u0(this,w).has(w)}function EA(w,R){var $=u0(this,w),he=$.size;return $.set(w,R),this.size+=$.size==he?0:1,this}la.prototype.clear=Xa,la.prototype.delete=Tf,la.prototype.get=tc,la.prototype.has=tA,la.prototype.set=EA;function zd(w){var R=-1,$=w==null?0:w.length;for(this.__data__=new la;++R<$;)this.add(w[R])}function O1(w){return this.__data__.set(w,c),this}function Im(w){return this.__data__.has(w)}zd.prototype.add=zd.prototype.push=O1,zd.prototype.has=Im;function nc(w){var R=this.__data__=new ec(w);this.size=R.size}function ic(){this.__data__=new ec,this.size=0}function Eu(w){var R=this.__data__,$=R.delete(w);return this.size=R.size,$}function Xn(w){return this.__data__.get(w)}function km(w){return this.__data__.has(w)}function ch(w,R){var $=this.__data__;if($ instanceof ec){var he=$.__data__;if(!Ol||he.length<r-1)return he.push([w,R]),this.size=++$.size,this;$=this.__data__=new la(he)}return $.set(w,R),this.size=$.size,this}nc.prototype.clear=ic,nc.prototype.delete=Eu,nc.prototype.get=Xn,nc.prototype.has=km,nc.prototype.set=ch;function Rf(w,R){var $=Ir(w),he=!$&&Pp(w),Fe=!$&&!he&&$f(w),Je=!$&&!he&&!Fe&&ef(w),vt=$||he||Fe||Je,It=vt?_m(w.length,vA):[],jt=It.length;for(var _n in w)(R||Do.call(w,_n))&&!(vt&&(_n=="length"||Fe&&(_n=="offset"||_n=="parent")||Je&&(_n=="buffer"||_n=="byteLength"||_n=="byteOffset")||sA(_n,jt)))&&It.push(_n);return It}function nA(w){var R=w.length;return R?w[Xe(0,R-1)]:t}function Ah(w,R){return g0(Co(w),oc(R,0,w.length))}function Tm(w){return g0(Co(w))}function Or(w,R,$){($!==t&&!Kc(w[R],$)||$===t&&!(R in w))&&Ou(w,R,$)}function rc(w,R,$){var he=w[R];(!(Do.call(w,R)&&Kc(he,$))||$===t&&!(R in w))&&Ou(w,R,$)}function iA(w,R){for(var $=w.length;$--;)if(Kc(w[$][0],R))return $;return-1}function Rm(w,R,$,he){return Qr(w,function(Fe,Je,vt){R(he,Fe,$(Fe),vt)}),he}function Dm(w,R){return w&&Ko(R,vl(R),w)}function jd(w,R){return w&&Ko(R,Fu(R),w)}function Ou(w,R,$){R=="__proto__"&&Xu?Xu(w,R,{configurable:!0,enumerable:!0,value:$,writable:!0}):w[R]=$}function $h(w,R){for(var $=-1,he=R.length,Fe=nn(he),Je=w==null;++$<he;)Fe[$]=Je?t:ad(w,R[$]);return Fe}function oc(w,R,$){return w===w&&($!==t&&(w=w<=$?w:$),R!==t&&(w=w>=R?w:R)),w}function Ql(w,R,$,he,Fe,Je){var vt,It=R&y,jt=R&M,_n=R&x;if($&&(vt=Fe?$(w,he,Fe,Je):$(w)),vt!==t)return vt;if(!ks(w))return w;var xn=Ir(w);if(xn){if(vt=mv(w),!It)return Co(w,vt)}else{var Kn=Yl(w),gi=Kn==ut||Kn==rt;if($f(w))return dh(w,It);if(Kn==Jt||Kn==it||gi&&!Fe){if(vt=jt||gi?{}:P1(w),!It)return jt?ps(w,jd(vt,w)):ql(w,Dm(vt,w))}else{if(!Ur[Kn])return Fe?w:{};vt=uC(w,Kn,It)}}Je||(Je=new nc);var Vi=Je.get(w);if(Vi)return Vi;Je.set(w,vt),eg(w)?w.forEach(function(Mr){vt.add(Ql(Mr,R,$,Mr,w,Je))}):cy(w)&&w.forEach(function(Mr,jo){vt.set(jo,Ql(Mr,R,$,jo,w,Je))});var xr=_n?jt?Lf:a0:jt?Fu:vl,xo=xn?t:xr(w);return Xo(xo||w,function(Mr,jo){xo&&(jo=Mr,Mr=w[jo]),rc(vt,jo,Ql(Mr,R,$,jo,w,Je))}),vt}function Pm(w){var R=vl(w);return function($){return hh($,w,R)}}function hh(w,R,$){var he=$.length;if(w==null)return!he;for(w=Qo(w);he--;){var Fe=$[he],Je=R[Fe],vt=w[Fe];if(vt===t&&!(Fe in w)||!Je(vt))return!1}return!0}function Df(w,R,$){if(typeof w!="function")throw new zl(s);return Nm(function(){w.apply(t,$)},R)}function Ja(w,R,$,he){var Fe=-1,Je=Kh,vt=!0,It=w.length,jt=[],_n=R.length;if(!It)return jt;$&&(R=Wr(R,su($))),he?(Je=ZA,vt=!1):R.length>=r&&(Je=Of,vt=!1,R=new zd(R));e:for(;++Fe<It;){var xn=w[Fe],Kn=$==null?xn:$(xn);if(xn=he||xn!==0?xn:0,vt&&Kn===Kn){for(var gi=_n;gi--;)if(R[gi]===Kn)continue e;jt.push(xn)}else Je(R,Kn,he)||jt.push(xn)}return jt}var Qr=Lm(Iu),Um=Lm(ci,!0);function rA(w,R){var $=!0;return Qr(w,function(he,Fe,Je){return $=!!R(he,Fe,Je),$}),$}function Bu(w,R,$){for(var he=-1,Fe=w.length;++he<Fe;){var Je=w[he],vt=R(Je);if(vt!=null&&(It===t?vt===vt&&!ac(vt):$(vt,It)))var It=vt,jt=Je}return jt}function Nd(w,R,$,he){var Fe=w.length;for($=cr($),$<0&&($=-$>Fe?0:Fe+$),he=he===t||he>Fe?Fe:cr(he),he<0&&(he+=Fe),he=$>he?0:tg(he);$<he;)w[$++]=R;return w}function Pf(w,R){var $=[];return Qr(w,function(he,Fe,Je){R(he,Fe,Je)&&$.push(he)}),$}function La(w,R,$,he,Fe){var Je=-1,vt=w.length;for($||($=U1),Fe||(Fe=[]);++Je<vt;){var It=w[Je];R>0&&$(It)?R>1?La(It,R-1,$,he,Fe):XA(Fe,It):he||(Fe[Fe.length]=It)}return Fe}var Gd=i0(),cu=i0(!0);function Iu(w,R){return w&&Gd(w,R,vl)}function ci(w,R){return w&&cu(w,R,vl)}function fi(w,R){return bc(R,function($){return Fc(w[$])})}function ku(w,R){R=so(R,w);for(var $=0,he=R.length;w!=null&&$<he;)w=w[Bc(R[$++])];return $&&$==he?w:t}function Km(w,R,$){var he=R(w);return Ir(w)?he:XA(he,$(w))}function Fa(w){return w==null?w===t?Yn:Ot:jl&&jl in Qo(w)?c0(w):F1(w)}function za(w,R){return w>R}function Tu(w,R){return w!=null&&Do.call(w,R)}function ua(w,R){return w!=null&&R in Qo(w)}function Ru(w,R,$){return w>=$s(R,$)&&w<Es(R,$)}function OA(w,R,$){for(var he=$?ZA:Kh,Fe=w[0].length,Je=w.length,vt=Je,It=nn(Je),jt=1/0,_n=[];vt--;){var xn=w[vt];vt&&R&&(xn=Wr(xn,su(R))),jt=$s(xn.length,jt),It[vt]=!$&&(R||Fe>=120&&xn.length>=120)?new zd(vt&&xn):t}xn=w[0];var Kn=-1,gi=It[0];e:for(;++Kn<Fe&&_n.length<jt;){var Vi=xn[Kn],xr=R?R(Vi):Vi;if(Vi=$||Vi!==0?Vi:0,!(gi?Of(gi,xr):he(_n,xr,$))){for(vt=Je;--vt;){var xo=It[vt];if(!(xo?Of(xo,xr):he(w[vt],xr,$)))continue e}gi&&gi.push(xr),_n.push(Vi)}}return _n}function hs(w,R,$,he){return Iu(w,function(Fe,Je,vt){R(he,$(Fe),Je,vt)}),he}function bo(w,R,$){R=so(R,w),w=p0(w,R);var he=w==null?w:w[Bc(gs(R))];return he==null?t:ta(he,w,$)}function Bl(w){return ba(w)&&Fa(w)==it}function Us(w){return ba(w)&&Fa(w)==_e}function BA(w){return ba(w)&&Fa(w)==Te}function el(w,R,$,he,Fe){return w===R?!0:w==null||R==null||!ba(w)&&!ba(R)?w!==w&&R!==R:Cr(w,R,$,he,el,Fe)}function Cr(w,R,$,he,Fe,Je){var vt=Ir(w),It=Ir(R),jt=vt?bt:Yl(w),_n=It?bt:Yl(R);jt=jt==it?Jt:jt,_n=_n==it?Jt:_n;var xn=jt==Jt,Kn=_n==Jt,gi=jt==_n;if(gi&&$f(w)){if(!$f(R))return!1;vt=!0,xn=!1}if(gi&&!xn)return Je||(Je=new nc),vt||ef(w)?Sp(w,R,$,he,Fe,Je):aC(w,R,jt,$,he,Fe,Je);if(!($&k)){var Vi=xn&&Do.call(w,"__wrapped__"),xr=Kn&&Do.call(R,"__wrapped__");if(Vi||xr){var xo=Vi?w.value():w,Mr=xr?R.value():R;return Je||(Je=new nc),Fe(xo,Mr,$,he,Je)}}return gi?(Je||(Je=new nc),s0(w,R,$,he,Fe,Je)):!1}function Po(w){return ba(w)&&Yl(w)==pt}function qo(w,R,$,he){var Fe=$.length,Je=Fe,vt=!he;if(w==null)return!Je;for(w=Qo(w);Fe--;){var It=$[Fe];if(vt&&It[2]?It[1]!==w[It[0]]:!(It[0]in w))return!1}for(;++Fe<Je;){It=$[Fe];var jt=It[0],_n=w[jt],xn=It[1];if(vt&&It[2]){if(_n===t&&!(jt in w))return!1}else{var Kn=new nc;if(he)var gi=he(_n,xn,jt,w,R,Kn);if(!(gi===t?el(xn,_n,k|P,he,Kn):gi))return!1}}return!0}function Wd(w){if(!ks(w)||cC(w))return!1;var R=Fc(w)?CA:Ki;return R.test(Uu(w))}function Vh(w){return ba(w)&&Fa(w)==ii}function IA(w){return ba(w)&&Yl(w)==wn}function Uf(w){return ba(w)&&F0(w.length)&&!!Jn[Fa(w)]}function I(w){return typeof w=="function"?w:w==null?Cl:typeof w=="object"?Ir(w)?U(w[0],w[1]):T(w):Ye(w)}function l(w){if(!jm(w))return _A(w);var R=[];for(var $ in Qo(w))Do.call(w,$)&&$!="constructor"&&R.push($);return R}function p(w){if(!ks(w))return ed(w);var R=jm(w),$=[];for(var he in w)he=="constructor"&&(R||!Do.call(w,he))||$.push(he);return $}function C(w,R){return w<R}function E(w,R){var $=-1,he=Lc(w)?nn(w.length):[];return Qr(w,function(Fe,Je,vt){he[++$]=R(Fe,Je,vt)}),he}function T(w){var R=T1(w);return R.length==1&&R[0][2]?f0(R[0][0],R[0][1]):function($){return $===w||qo($,w,R)}}function U(w,R){return Il(w)&&Jh(R)?f0(Bc(w),R):function($){var he=ad($,w);return he===t&&he===R?j0($,w):el(R,he,k|P)}}function Q(w,R,$,he,Fe){w!==R&&Gd(R,function(Je,vt){if(Fe||(Fe=new nc),ks(Je))Z(w,R,vt,$,Q,he,Fe);else{var It=he?he(as(w,vt),Je,vt+"",w,R,Fe):t;It===t&&(It=Je),Or(w,vt,It)}},Fu)}function Z(w,R,$,he,Fe,Je,vt){var It=as(w,$),jt=as(R,$),_n=vt.get(jt);if(_n){Or(w,$,_n);return}var xn=Je?Je(It,jt,$+"",w,R,vt):t,Kn=xn===t;if(Kn){var gi=Ir(jt),Vi=!gi&&$f(jt),xr=!gi&&!Vi&&ef(jt);xn=jt,gi||Vi||xr?Ir(It)?xn=It:il(It)?xn=Co(It):Vi?(Kn=!1,xn=dh(jt,!0)):xr?(Kn=!1,xn=ph(jt,!0)):xn=[]:Xm(jt)||Pp(jt)?(xn=It,Pp(It)?xn=Lp(It):(!ks(It)||Fc(It))&&(xn=P1(jt))):Kn=!1}Kn&&(vt.set(jt,xn),Fe(xn,jt,he,Je,vt),vt.delete(jt)),Or(w,$,xn)}function ae(w,R){var $=w.length;if($)return R+=R<0?$:0,sA(R,$)?w[R]:t}function ce(w,R,$){R.length?R=Wr(R,function(Je){return Ir(Je)?function(vt){return ku(vt,Je.length===1?Je[0]:Je)}:Je}):R=[Cl];var he=-1;R=Wr(R,su(Ji()));var Fe=E(w,function(Je,vt,It){var jt=Wr(R,function(_n){return _n(Je)});return{criteria:jt,index:++he,value:Je}});return x1(Fe,function(Je,vt){return mh(Je,vt,$)})}function Ce(w,R){return fe(w,R,function($,he){return j0(w,he)})}function fe(w,R,$){for(var he=-1,Fe=R.length,Je={};++he<Fe;){var vt=R[he],It=ku(w,vt);$(It,vt)&&xt(Je,so(vt,w),It)}return Je}function Re(w){return function(R){return ku(R,w)}}function Ge(w,R,$,he){var Fe=he?bm:Lh,Je=-1,vt=R.length,It=w;for(w===R&&(R=Co(R)),$&&(It=Wr(w,su($)));++Je<vt;)for(var jt=0,_n=R[Je],xn=$?$(_n):_n;(jt=Fe(It,xn,jt,he))>-1;)It!==w&&Zu.call(It,jt,1),Zu.call(w,jt,1);return w}function Ze(w,R){for(var $=w?R.length:0,he=$-1;$--;){var Fe=R[$];if($==he||Fe!==Je){var Je=Fe;sA(Fe)?Zu.call(w,Fe,1):mo(w,Fe)}}return w}function Xe(w,R){return w+Qh(eA()*(R-w+1))}function tt(w,R,$,he){for(var Fe=-1,Je=Es(Wh((R-w)/($||1)),0),vt=nn(Je);Je--;)vt[he?Je:++Fe]=w,w+=$;return vt}function ot(w,R){var $="";if(!w||R<1||R>et)return $;do R%2&&($+=w),R=Qh(R/2),R&&(w+=w);while(R);return $}function nt(w,R){return td(gv(w,R,Cl),w+"")}function ct(w){return nA(He(w))}function gt(w,R){var $=He(w);return g0($,oc(R,0,$.length))}function xt(w,R,$,he){if(!ks(w))return w;R=so(R,w);for(var Fe=-1,Je=R.length,vt=Je-1,It=w;It!=null&&++Fe<Je;){var jt=Bc(R[Fe]),_n=$;if(jt==="__proto__"||jt==="constructor"||jt==="prototype")return w;if(Fe!=vt){var xn=It[jt];_n=he?he(xn,jt,It):t,_n===t&&(_n=ks(xn)?xn:sA(R[Fe+1])?[]:{})}rc(It,jt,_n),It=It[jt]}return w}var ht=na?function(w,R){return na.set(w,R),w}:Cl,Et=Xu?function(w,R){return Xu(w,"toString",{configurable:!0,enumerable:!1,value:zu(R),writable:!0})}:Cl;function Qt(w){return g0(He(w))}function Kt(w,R,$){var he=-1,Fe=w.length;R<0&&(R=-R>Fe?0:Fe+R),$=$>Fe?Fe:$,$<0&&($+=Fe),Fe=R>$?0:$-R>>>0,R>>>=0;for(var Je=nn(Fe);++he<Fe;)Je[he]=w[he+R];return Je}function Nt(w,R){var $;return Qr(w,function(he,Fe,Je){return $=R(he,Fe,Je),!$}),!!$}function Wt(w,R,$){var he=0,Fe=w==null?he:w.length;if(typeof R=="number"&&R===R&&Fe<=xe){for(;he<Fe;){var Je=he+Fe>>>1,vt=w[Je];vt!==null&&!ac(vt)&&($?vt<=R:vt<R)?he=Je+1:Fe=Je}return Fe}return In(w,R,Cl,$)}function In(w,R,$,he){var Fe=0,Je=w==null?0:w.length;if(Je===0)return 0;R=$(R);for(var vt=R!==R,It=R===null,jt=ac(R),_n=R===t;Fe<Je;){var xn=Qh((Fe+Je)/2),Kn=$(w[xn]),gi=Kn!==t,Vi=Kn===null,xr=Kn===Kn,xo=ac(Kn);if(vt)var Mr=he||xr;else _n?Mr=xr&&(he||gi):It?Mr=xr&&gi&&(he||!Vi):jt?Mr=xr&&gi&&!Vi&&(he||!xo):Vi||xo?Mr=!1:Mr=he?Kn<=R:Kn<R;Mr?Fe=xn+1:Je=xn}return $s(Je,ze)}function kn(w,R){for(var $=-1,he=w.length,Fe=0,Je=[];++$<he;){var vt=w[$],It=R?R(vt):vt;if(!$||!Kc(It,jt)){var jt=It;Je[Fe++]=vt===0?0:vt}}return Je}function cn(w){return typeof w=="number"?w:ac(w)?ke:+w}function Qn(w){if(typeof w=="string")return w;if(Ir(w))return Wr(w,Qn)+"";if(ac(w))return sh?sh.call(w):"";var R=w+"";return R=="0"&&1/w==-Qe?"-0":R}function Xi(w,R,$){var he=-1,Fe=Kh,Je=w.length,vt=!0,It=[],jt=It;if($)vt=!1,Fe=ZA;else if(Je>=r){var _n=R?null:oC(w);if(_n)return Cp(_n);vt=!1,Fe=Of,jt=new zd}else jt=R?[]:It;e:for(;++he<Je;){var xn=w[he],Kn=R?R(xn):xn;if(xn=$||xn!==0?xn:0,vt&&Kn===Kn){for(var gi=jt.length;gi--;)if(jt[gi]===Kn)continue e;R&&jt.push(Kn),It.push(xn)}else Fe(jt,Kn,$)||(jt!==It&&jt.push(Kn),It.push(xn))}return It}function mo(w,R){return R=so(R,w),w=p0(w,R),w==null||delete w[Bc(gs(R))]}function os(w,R,$,he){return xt(w,R,$(ku(w,R)),he)}function Uo(w,R,$,he){for(var Fe=w.length,Je=he?Fe:-1;(he?Je--:++Je<Fe)&&R(w[Je],Je,w););return $?Kt(w,he?0:Je,he?Je+1:Fe):Kt(w,he?Je+1:0,he?Fe:Je)}function ds(w,R){var $=w;return $ instanceof Er&&($=$.value()),Ef(R,function(he,Fe){return Fe.func.apply(Fe.thisArg,XA([he],Fe.args))},$)}function Jo(w,R,$){var he=w.length;if(he<2)return he?Xi(w[0]):[];for(var Fe=-1,Je=nn(he);++Fe<he;)for(var vt=w[Fe],It=-1;++It<he;)It!=Fe&&(Je[Fe]=Ja(Je[Fe]||vt,w[It],R,$));return Xi(La(Je,1),R,$)}function ya(w,R,$){for(var he=-1,Fe=w.length,Je=R.length,vt={};++he<Fe;){var It=he<Je?R[he]:t;$(vt,w[he],It)}return vt}function ss(w){return il(w)?w:[]}function Bo(w){return typeof w=="function"?w:Cl}function so(w,R){return Ir(w)?w:Il(w,R)?[w]:yv(ls(w))}var Br=nt;function fs(w,R,$){var he=w.length;return $=$===t?he:$,!R&&$>=he?w:Kt(w,R,$)}var sc=E1||function(w){return Ri.clearTimeout(w)};function dh(w,R){if(R)return w.slice();var $=w.length,he=Xc?Xc($):new w.constructor($);return w.copy(he),he}function Sc(w){var R=new w.constructor(w.byteLength);return new Mc(R).set(new Mc(w)),R}function Qd(w,R){var $=R?Sc(w.buffer):w.buffer;return new w.constructor($,w.byteOffset,w.byteLength)}function Kf(w){var R=new w.constructor(w.source,nr.exec(w));return R.lastIndex=w.lastIndex,R}function fh(w){return oh?Qo(oh.call(w)):{}}function ph(w,R){var $=R?Sc(w.buffer):w.buffer;return new w.constructor($,w.byteOffset,w.length)}function Au(w,R){if(w!==R){var $=w!==t,he=w===null,Fe=w===w,Je=ac(w),vt=R!==t,It=R===null,jt=R===R,_n=ac(R);if(!It&&!_n&&!Je&&w>R||Je&&vt&&jt&&!It&&!_n||he&&vt&&jt||!$&&jt||!Fe)return 1;if(!he&&!Je&&!_n&&w<R||_n&&$&&Fe&&!he&&!Je||It&&$&&Fe||!vt&&Fe||!jt)return-1}return 0}function mh(w,R,$){for(var he=-1,Fe=w.criteria,Je=R.criteria,vt=Fe.length,It=$.length;++he<vt;){var jt=Au(Fe[he],Je[he]);if(jt){if(he>=It)return jt;var _n=$[he];return jt*(_n=="desc"?-1:1)}}return w.index-R.index}function Ec(w,R,$,he){for(var Fe=-1,Je=w.length,vt=$.length,It=-1,jt=R.length,_n=Es(Je-vt,0),xn=nn(jt+_n),Kn=!he;++It<jt;)xn[It]=R[It];for(;++Fe<vt;)(Kn||Fe<Je)&&(xn[$[Fe]]=w[Fe]);for(;_n--;)xn[It++]=w[Fe++];return xn}function kA(w,R,$,he){for(var Fe=-1,Je=w.length,vt=-1,It=$.length,jt=-1,_n=R.length,xn=Es(Je-It,0),Kn=nn(xn+_n),gi=!he;++Fe<xn;)Kn[Fe]=w[Fe];for(var Vi=Fe;++jt<_n;)Kn[Vi+jt]=R[jt];for(;++vt<It;)(gi||Fe<Je)&&(Kn[Vi+$[vt]]=w[Fe++]);return Kn}function Co(w,R){var $=-1,he=w.length;for(R||(R=nn(he));++$<he;)R[$]=w[$];return R}function Ko(w,R,$,he){var Fe=!$;$||($={});for(var Je=-1,vt=R.length;++Je<vt;){var It=R[Je],jt=he?he($[It],w[It],It,$,w):t;jt===t&&(jt=w[It]),Fe?Ou($,It,jt):rc($,It,jt)}return $}function ql(w,R){return Ko(w,A0(w),R)}function ps(w,R){return Ko(w,Ep(w),R)}function qd(w,R){return function($,he){var Fe=Ir($)?Sf:Rm,Je=R?R():{};return Fe($,w,Ji(he,2),Je)}}function gh(w){return nt(function(R,$){var he=-1,Fe=$.length,Je=Fe>1?$[Fe-1]:t,vt=Fe>2?$[2]:t;for(Je=w.length>3&&typeof Je=="function"?(Fe--,Je):t,vt&&gl($[0],$[1],vt)&&(Je=Fe<3?t:Je,Fe=1),R=Qo(R);++he<Fe;){var It=$[he];It&&w(R,It,he,Je)}return R})}function Lm(w,R){return function($,he){if($==null)return $;if(!Lc($))return w($,he);for(var Fe=$.length,Je=R?Fe:-1,vt=Qo($);(R?Je--:++Je<Fe)&&he(vt[Je],Je,vt)!==!1;);return $}}function i0(w){return function(R,$,he){for(var Fe=-1,Je=Qo(R),vt=he(R),It=vt.length;It--;){var jt=vt[w?It:++Fe];if($(Je[jt],jt,Je)===!1)break}return R}}function wp(w,R,$){var he=R&F,Fe=Du(w);function Je(){var vt=this&&this!==Ri&&this instanceof Je?Fe:w;return vt.apply(he?$:this,arguments)}return Je}function Yd(w){return function(R){R=ls(R);var $=JA(R)?Ss(R):t,he=$?$[0]:R.charAt(0),Fe=$?fs($,1).join(""):R.slice(1);return he[w]()+Fe}}function tl(w){return function(R){return Ef(ja(An(R).replace(Pr,"")),w,"")}}function Du(w){return function(){var R=arguments;switch(R.length){case 0:return new w;case 1:return new w(R[0]);case 2:return new w(R[0],R[1]);case 3:return new w(R[0],R[1],R[2]);case 4:return new w(R[0],R[1],R[2],R[3]);case 5:return new w(R[0],R[1],R[2],R[3],R[4]);case 6:return new w(R[0],R[1],R[2],R[3],R[4],R[5]);case 7:return new w(R[0],R[1],R[2],R[3],R[4],R[5],R[6])}var $=wu(w.prototype),he=w.apply($,R);return ks(he)?he:$}}function Oc(w,R,$){var he=Du(w);function Fe(){for(var Je=arguments.length,vt=nn(Je),It=Je,jt=ra(Fe);It--;)vt[It]=arguments[It];var _n=Je<3&&vt[0]!==jt&&vt[Je-1]!==jt?[]:eh(vt,jt);if(Je-=_n.length,Je<$)return Xh(w,R,Hh,Fe.placeholder,t,vt,_n,t,t,$-Je);var xn=this&&this!==Ri&&this instanceof Fe?he:w;return ta(xn,this,vt)}return Fe}function oA(w){return function(R,$,he){var Fe=Qo(R);if(!Lc(R)){var Je=Ji($,3);R=vl(R),$=function(It){return Je(Fe[It],It,Fe)}}var vt=w(R,$,he);return vt>-1?Fe[Je?R[vt]:vt]:t}}function yh(w){return Ch(function(R){var $=R.length,he=$,Fe=Wl.prototype.thru;for(w&&R.reverse();he--;){var Je=R[he];if(typeof Je!="function")throw new zl(s);if(Fe&&!vt&&Os(Je)=="wrapper")var vt=new Wl([],!0)}for(he=vt?he:$;++he<$;){Je=R[he];var It=Os(Je),jt=It=="wrapper"?l0(Je):t;jt&&Op(jt[0])&&jt[1]==(z|V|G|se)&&!jt[4].length&&jt[9]==1?vt=vt[Os(jt[0])].apply(vt,jt[3]):vt=Je.length==1&&Op(Je)?vt[It]():vt.thru(Je)}return function(){var _n=arguments,xn=_n[0];if(vt&&_n.length==1&&Ir(xn))return vt.plant(xn).value();for(var Kn=0,gi=$?R[Kn].apply(this,_n):xn;++Kn<$;)gi=R[Kn].call(this,gi);return gi}})}function Hh(w,R,$,he,Fe,Je,vt,It,jt,_n){var xn=R&z,Kn=R&F,gi=R&j,Vi=R&(V|H),xr=R&le,xo=gi?t:Du(w);function Mr(){for(var jo=arguments.length,ts=nn(jo),of=jo;of--;)ts[of]=arguments[of];if(Vi)var Oh=ra(Mr),sf=jh(ts,Oh);if(he&&(ts=Ec(ts,he,Fe,Vi)),Je&&(ts=kA(ts,Je,vt,Vi)),jo-=sf,Vi&&jo<_n){var pu=eh(ts,Oh);return Xh(w,R,Hh,Mr.placeholder,$,ts,pu,It,jt,_n-jo)}var zp=Kn?$:this,W0=gi?zp[w]:w;return jo=ts.length,It?ts=m0(ts,It):xr&&jo>1&&ts.reverse(),xn&&jt<jo&&(ts.length=jt),this&&this!==Ri&&this instanceof Mr&&(W0=xo||Du(W0)),W0.apply(zp,ts)}return Mr}function Zh(w,R){return function($,he){return hs($,w,R(he),{})}}function vh(w,R){return function($,he){var Fe;if($===t&&he===t)return R;if($!==t&&(Fe=$),he!==t){if(Fe===t)return he;typeof $=="string"||typeof he=="string"?($=Qn($),he=Qn(he)):($=cn($),he=cn(he)),Fe=w($,he)}return Fe}}function B1(w){return Ch(function(R){return R=Wr(R,su(Ji())),nt(function($){var he=this;return w(R,function(Fe){return ta(Fe,he,$)})})})}function $d(w,R){R=R===t?" ":Qn(R);var $=R.length;if($<2)return $?ot(R,w):R;var he=ot(R,Wh(w/kd(R)));return JA(R)?fs(Ss(he),0,w).join(""):he.slice(0,w)}function I1(w,R,$,he){var Fe=R&F,Je=Du(w);function vt(){for(var It=-1,jt=arguments.length,_n=-1,xn=he.length,Kn=nn(xn+jt),gi=this&&this!==Ri&&this instanceof vt?Je:w;++_n<xn;)Kn[_n]=he[_n];for(;jt--;)Kn[_n++]=arguments[++It];return ta(gi,Fe?$:this,Kn)}return vt}function r0(w){return function(R,$,he){return he&&typeof he!="number"&&gl(R,$,he)&&($=he=t),R=DA(R),$===t?($=R,R=0):$=DA($),he=he===t?R<$?1:-1:DA(he),tt(R,$,he,w)}}function bh(w){return function(R,$){return typeof R=="string"&&typeof $=="string"||(R=Lu(R),$=Lu($)),w(R,$)}}function Xh(w,R,$,he,Fe,Je,vt,It,jt,_n){var xn=R&V,Kn=xn?vt:t,gi=xn?t:vt,Vi=xn?Je:t,xr=xn?t:Je;R|=xn?G:Y,R&=~(xn?Y:G),R&q||(R&=-4);var xo=[w,R,Fe,Vi,Kn,xr,gi,It,jt,_n],Mr=$.apply(t,xo);return Op(w)&&z1(Mr,xo),Mr.placeholder=he,nd(Mr,w,R)}function Fm(w){var R=Ys[w];return function($,he){if($=Lu($),he=he==null?0:$s(cr(he),292),he&&uu($)){var Fe=(ls($)+"e").split("e"),Je=R(Fe[0]+"e"+(+Fe[1]+he));return Fe=(ls(Je)+"e").split("e"),+(Fe[0]+"e"+(+Fe[1]-he))}return R($)}}var oC=xA&&1/Cp(new xA([,-0]))[1]==Qe?function(w){return new xA(w)}:_;function o0(w){return function(R){var $=Yl(R);return $==pt?Nh(R):$==wn?w1(R):Fh(R,w(R))}}function Pu(w,R,$,he,Fe,Je,vt,It){var jt=R&j;if(!jt&&typeof w!="function")throw new zl(s);var _n=he?he.length:0;if(_n||(R&=-97,he=Fe=t),vt=vt===t?vt:Es(cr(vt),0),It=It===t?It:cr(It),_n-=Fe?Fe.length:0,R&Y){var xn=he,Kn=Fe;he=Fe=t}var gi=jt?t:l0(w),Vi=[w,R,$,he,Fe,xn,Kn,Je,vt,It];if(gi&&L1(Vi,gi),w=Vi[0],R=Vi[1],$=Vi[2],he=Vi[3],Fe=Vi[4],It=Vi[9]=Vi[9]===t?jt?0:w.length:Es(Vi[9]-_n,0),!It&&R&(V|H)&&(R&=-25),!R||R==F)var xr=wp(w,R,$);else R==V||R==H?xr=Oc(w,R,It):(R==G||R==(F|G))&&!Fe.length?xr=I1(w,R,$,he):xr=Hh.apply(t,Vi);var xo=gi?ht:z1;return nd(xo(xr,Vi),w,R)}function zm(w,R,$,he){return w===t||Kc(w,bA[$])&&!Do.call(he,$)?R:w}function k1(w,R,$,he,Fe,Je){return ks(w)&&ks(R)&&(Je.set(R,w),Q(w,R,t,k1,Je),Je.delete(R)),w}function sC(w){return Xm(w)?t:w}function Sp(w,R,$,he,Fe,Je){var vt=$&k,It=w.length,jt=R.length;if(It!=jt&&!(vt&&jt>It))return!1;var _n=Je.get(w),xn=Je.get(R);if(_n&&xn)return _n==R&&xn==w;var Kn=-1,gi=!0,Vi=$&P?new zd:t;for(Je.set(w,R),Je.set(R,w);++Kn<It;){var xr=w[Kn],xo=R[Kn];if(he)var Mr=vt?he(xo,xr,Kn,R,w,Je):he(xr,xo,Kn,w,R,Je);if(Mr!==t){if(Mr)continue;gi=!1;break}if(Vi){if(!vp(R,function(jo,ts){if(!Of(Vi,ts)&&(xr===jo||Fe(xr,jo,$,he,Je)))return Vi.push(ts)})){gi=!1;break}}else if(!(xr===xo||Fe(xr,xo,$,he,Je))){gi=!1;break}}return Je.delete(w),Je.delete(R),gi}function aC(w,R,$,he,Fe,Je,vt){switch($){case oe:if(w.byteLength!=R.byteLength||w.byteOffset!=R.byteOffset)return!1;w=w.buffer,R=R.buffer;case _e:return!(w.byteLength!=R.byteLength||!Je(new Mc(w),new Mc(R)));case Ke:case Te:case Dt:return Kc(+w,+R);case Ne:return w.name==R.name&&w.message==R.message;case ii:case Rn:return w==R+"";case pt:var It=Nh;case wn:var jt=he&k;if(It||(It=Cp),w.size!=R.size&&!jt)return!1;var _n=vt.get(w);if(_n)return _n==R;he|=P,vt.set(w,R);var xn=Sp(It(w),It(R),he,Fe,Je,vt);return vt.delete(w),xn;case gn:if(oh)return oh.call(w)==oh.call(R)}return!1}function s0(w,R,$,he,Fe,Je){var vt=$&k,It=a0(w),jt=It.length,_n=a0(R),xn=_n.length;if(jt!=xn&&!vt)return!1;for(var Kn=jt;Kn--;){var gi=It[Kn];if(!(vt?gi in R:Do.call(R,gi)))return!1}var Vi=Je.get(w),xr=Je.get(R);if(Vi&&xr)return Vi==R&&xr==w;var xo=!0;Je.set(w,R),Je.set(R,w);for(var Mr=vt;++Kn<jt;){gi=It[Kn];var jo=w[gi],ts=R[gi];if(he)var of=vt?he(ts,jo,gi,R,w,Je):he(jo,ts,gi,w,R,Je);if(!(of===t?jo===ts||Fe(jo,ts,$,he,Je):of)){xo=!1;break}Mr||(Mr=gi=="constructor")}if(xo&&!Mr){var Oh=w.constructor,sf=R.constructor;Oh!=sf&&"constructor"in w&&"constructor"in R&&!(typeof Oh=="function"&&Oh instanceof Oh&&typeof sf=="function"&&sf instanceof sf)&&(xo=!1)}return Je.delete(w),Je.delete(R),xo}function Ch(w){return td(gv(w,t,ms),w+"")}function a0(w){return Km(w,vl,A0)}function Lf(w){return Km(w,Fu,Ep)}var l0=na?function(w){return na.get(w)}:_;function Os(w){for(var R=w.name+"",$=Oo[R],he=Do.call(Oo,R)?$.length:0;he--;){var Fe=$[he],Je=Fe.func;if(Je==null||Je==w)return Fe.name}return R}function ra(w){var R=Do.call(qe,"placeholder")?qe:w;return R.placeholder}function Ji(){var w=qe.iteratee||Eh;return w=w===Eh?I:w,arguments.length?w(arguments[0],arguments[1]):w}function u0(w,R){var $=w.__data__;return d0(R)?$[typeof R=="string"?"string":"hash"]:$.map}function T1(w){for(var R=vl(w),$=R.length;$--;){var he=R[$],Fe=w[he];R[$]=[he,Fe,Jh(Fe)]}return R}function Ff(w,R){var $=Mm(w,R);return Wd($)?$:t}function c0(w){var R=Do.call(w,jl),$=w[jl];try{w[jl]=t;var he=!0}catch{}var Fe=Ua.call(w);return he&&(R?w[jl]=$:delete w[jl]),Fe}var A0=ih?function(w){return w==null?[]:(w=Qo(w),bc(ih(w),function(R){return br.call(w,R)}))}:mn,Ep=ih?function(w){for(var R=[];w;)XA(R,A0(w)),w=Jc(w);return R}:mn,Yl=Fa;(Mu&&Yl(new Mu(new ArrayBuffer(1)))!=oe||Ol&&Yl(new Ol)!=pt||Kd&&Yl(Kd.resolve())!=Tn||xA&&Yl(new xA)!=wn||qh&&Yl(new qh)!=Dn)&&(Yl=function(w){var R=Fa(w),$=R==Jt?w.constructor:t,he=$?Uu($):"";if(he)switch(he){case ro:return oe;case MA:return pt;case oo:return Tn;case rh:return wn;case Ka:return Dn}return R});function lC(w,R,$){for(var he=-1,Fe=$.length;++he<Fe;){var Je=$[he],vt=Je.size;switch(Je.type){case"drop":w+=vt;break;case"dropRight":R-=vt;break;case"take":R=$s(R,w+vt);break;case"takeRight":w=Es(w,R-vt);break}}return{start:w,end:R}}function R1(w){var R=w.match(Zi);return R?R[1].split(ea):[]}function D1(w,R,$){R=so(R,w);for(var he=-1,Fe=R.length,Je=!1;++he<Fe;){var vt=Bc(R[he]);if(!(Je=w!=null&&$(w,vt)))break;w=w[vt]}return Je||++he!=Fe?Je:(Fe=w==null?0:w.length,!!Fe&&F0(Fe)&&sA(vt,Fe)&&(Ir(w)||Pp(w)))}function mv(w){var R=w.length,$=new w.constructor(R);return R&&typeof w[0]=="string"&&Do.call(w,"index")&&($.index=w.index,$.input=w.input),$}function P1(w){return typeof w.constructor=="function"&&!jm(w)?wu(Jc(w)):{}}function uC(w,R,$){var he=w.constructor;switch(R){case _e:return Sc(w);case Ke:case Te:return new he(+w);case oe:return Qd(w,$);case ee:case ne:case ue:case ye:case Ue:case Ve:case lt:case ge:case Be:return ph(w,$);case pt:return new he;case Dt:case Rn:return new he(w);case ii:return Kf(w);case wn:return new he;case gn:return fh(w)}}function h0(w,R){var $=R.length;if(!$)return w;var he=$-1;return R[he]=($>1?"& ":"")+R[he],R=R.join($>2?", ":" "),w.replace(pr,`{
/* [wrapped with `+R+`] */
`)}function U1(w){return Ir(w)||Pp(w)||!!(S1&&w&&w[S1])}function sA(w,R){var $=typeof w;return R=R??et,!!R&&($=="number"||$!="symbol"&&hl.test(w))&&w>-1&&w%1==0&&w<R}function gl(w,R,$){if(!ks($))return!1;var he=typeof R;return(he=="number"?Lc($)&&sA(R,$.length):he=="string"&&R in $)?Kc($[R],w):!1}function Il(w,R){if(Ir(w))return!1;var $=typeof w;return $=="number"||$=="symbol"||$=="boolean"||w==null||ac(w)?!0:Hi.test(w)||!ai.test(w)||R!=null&&w in Qo(R)}function d0(w){var R=typeof w;return R=="string"||R=="number"||R=="symbol"||R=="boolean"?w!=="__proto__":w===null}function Op(w){var R=Os(w),$=qe[R];if(typeof $!="function"||!(R in Er.prototype))return!1;if(w===$)return!0;var he=l0($);return!!he&&w===he[0]}function cC(w){return!!If&&If in w}var K1=th?Fc:Xt;function jm(w){var R=w&&w.constructor,$=typeof R=="function"&&R.prototype||bA;return w===$}function Jh(w){return w===w&&!ks(w)}function f0(w,R){return function($){return $==null?!1:$[w]===R&&(R!==t||w in Qo($))}}function Zx(w){var R=R0(w,function(he){return $.size===h&&$.clear(),he}),$=R.cache;return R}function L1(w,R){var $=w[1],he=R[1],Fe=$|he,Je=Fe<(F|j|z),vt=he==z&&$==V||he==z&&$==se&&w[7].length<=R[8]||he==(z|se)&&R[7].length<=R[8]&&$==V;if(!(Je||vt))return w;he&F&&(w[2]=R[2],Fe|=$&F?0:q);var It=R[3];if(It){var jt=w[3];w[3]=jt?Ec(jt,It,R[4]):It,w[4]=jt?eh(w[3],m):R[4]}return It=R[5],It&&(jt=w[5],w[5]=jt?kA(jt,It,R[6]):It,w[6]=jt?eh(w[5],m):R[6]),It=R[7],It&&(w[7]=It),he&z&&(w[8]=w[8]==null?R[8]:$s(w[8],R[8])),w[9]==null&&(w[9]=R[9]),w[0]=R[0],w[1]=Fe,w}function ed(w){var R=[];if(w!=null)for(var $ in Qo(w))R.push($);return R}function F1(w){return Ua.call(w)}function gv(w,R,$){return R=Es(R===t?w.length-1:R,0),function(){for(var he=arguments,Fe=-1,Je=Es(he.length-R,0),vt=nn(Je);++Fe<Je;)vt[Fe]=he[R+Fe];Fe=-1;for(var It=nn(R+1);++Fe<R;)It[Fe]=he[Fe];return It[R]=$(vt),ta(w,this,It)}}function p0(w,R){return R.length<2?w:ku(w,Kt(R,0,-1))}function m0(w,R){for(var $=w.length,he=$s(R.length,$),Fe=Co(w);he--;){var Je=R[he];w[he]=sA(Je,$)?Fe[Je]:t}return w}function as(w,R){if(!(R==="constructor"&&typeof w[R]=="function")&&R!="__proto__")return w[R]}var z1=Vd(ht),Nm=Pd||function(w,R){return Ri.setTimeout(w,R)},td=Vd(Et);function nd(w,R,$){var he=R+"";return td(w,h0(he,AC(R1(he),$)))}function Vd(w){var R=0,$=0;return function(){var he=pl(),Fe=Ee-(he-$);if($=he,Fe>0){if(++R>=be)return arguments[0]}else R=0;return w.apply(t,arguments)}}function g0(w,R){var $=-1,he=w.length,Fe=he-1;for(R=R===t?he:R;++$<R;){var Je=Xe($,Fe),vt=w[Je];w[Je]=w[$],w[$]=vt}return w.length=R,w}var yv=Zx(function(w){var R=[];return w.charCodeAt(0)===46&&R.push(""),w.replace(Ti,function($,he,Fe,Je){R.push(Fe?Je.replace(Ci,"$1"):he||$)}),R});function Bc(w){if(typeof w=="string"||ac(w))return w;var R=w+"";return R=="0"&&1/w==-Qe?"-0":R}function Uu(w){if(w!=null){try{return au.call(w)}catch{}try{return w+""}catch{}}return""}function AC(w,R){return Xo(At,function($){var he="_."+$[0];R&$[1]&&!Kh(w,he)&&w.push(he)}),w.sort()}function j1(w){if(w instanceof Er)return w.clone();var R=new Wl(w.__wrapped__,w.__chain__);return R.__actions__=Co(w.__actions__),R.__index__=w.__index__,R.__values__=w.__values__,R}function N1(w,R,$){($?gl(w,R,$):R===t)?R=1:R=Es(cr(R),0);var he=w==null?0:w.length;if(!he||R<1)return[];for(var Fe=0,Je=0,vt=nn(Wh(he/R));Fe<he;)vt[Je++]=Kt(w,Fe,Fe+=R);return vt}function vv(w){for(var R=-1,$=w==null?0:w.length,he=0,Fe=[];++R<$;){var Je=w[R];Je&&(Fe[he++]=Je)}return Fe}function G1(){var w=arguments.length;if(!w)return[];for(var R=nn(w-1),$=arguments[0],he=w;he--;)R[he-1]=arguments[he];return XA(Ir($)?Co($):[$],La(R,1))}var zf=nt(function(w,R){return il(w)?Ja(w,La(R,1,il,!0)):[]}),hC=nt(function(w,R){var $=gs(R);return il($)&&($=t),il(w)?Ja(w,La(R,1,il,!0),Ji($,2)):[]}),es=nt(function(w,R){var $=gs(R);return il($)&&($=t),il(w)?Ja(w,La(R,1,il,!0),t,$):[]});function oa(w,R,$){var he=w==null?0:w.length;return he?(R=$||R===t?1:cr(R),Kt(w,R<0?0:R,he)):[]}function W1(w,R,$){var he=w==null?0:w.length;return he?(R=$||R===t?1:cr(R),R=he-R,Kt(w,0,R<0?0:R)):[]}function y0(w,R){return w&&w.length?Uo(w,Ji(R,3),!0,!0):[]}function nl(w,R){return w&&w.length?Uo(w,Ji(R,3),!0):[]}function v0(w,R,$,he){var Fe=w==null?0:w.length;return Fe?($&&typeof $!="number"&&gl(w,R,$)&&($=0,he=Fe),Nd(w,R,$,he)):[]}function Q1(w,R,$){var he=w==null?0:w.length;if(!he)return-1;var Fe=$==null?0:cr($);return Fe<0&&(Fe=Es(he+Fe,0)),mA(w,Ji(R,3),Fe)}function q1(w,R,$){var he=w==null?0:w.length;if(!he)return-1;var Fe=he-1;return $!==t&&(Fe=cr($),Fe=$<0?Es(he+Fe,0):$s(Fe,he-1)),mA(w,Ji(R,3),Fe,!0)}function ms(w){var R=w==null?0:w.length;return R?La(w,1):[]}function Ku(w){var R=w==null?0:w.length;return R?La(w,Qe):[]}function Ic(w,R){var $=w==null?0:w.length;return $?(R=R===t?1:cr(R),La(w,R)):[]}function b0(w){for(var R=-1,$=w==null?0:w.length,he={};++R<$;){var Fe=w[R];he[Fe[0]]=Fe[1]}return he}function jf(w){return w&&w.length?w[0]:t}function Gm(w,R,$){var he=w==null?0:w.length;if(!he)return-1;var Fe=$==null?0:cr($);return Fe<0&&(Fe=Es(he+Fe,0)),Lh(w,R,Fe)}function Xx(w){var R=w==null?0:w.length;return R?Kt(w,0,-1):[]}var C0=nt(function(w){var R=Wr(w,ss);return R.length&&R[0]===w[0]?OA(R):[]}),yl=nt(function(w){var R=gs(w),$=Wr(w,ss);return R===gs($)?R=t:$.pop(),$.length&&$[0]===w[0]?OA($,Ji(R,2)):[]}),_h=nt(function(w){var R=gs(w),$=Wr(w,ss);return R=typeof R=="function"?R:t,R&&$.pop(),$.length&&$[0]===w[0]?OA($,t,R):[]});function bv(w,R){return w==null?"":Ud.call(w,R)}function gs(w){var R=w==null?0:w.length;return R?w[R-1]:t}function Y1(w,R,$){var he=w==null?0:w.length;if(!he)return-1;var Fe=he;return $!==t&&(Fe=cr($),Fe=Fe<0?Es(he+Fe,0):$s(Fe,he-1)),R===R?Jg(w,R,Fe):mA(w,Cc,Fe,!0)}function id(w,R){return w&&w.length?ae(w,cr(R)):t}var Nf=nt(rd);function rd(w,R){return w&&w.length&&R&&R.length?Ge(w,R):w}function Cv(w,R,$){return w&&w.length&&R&&R.length?Ge(w,R,Ji($,2)):w}function _v(w,R,$){return w&&w.length&&R&&R.length?Ge(w,R,t,$):w}var xh=Ch(function(w,R){var $=w==null?0:w.length,he=$h(w,R);return Ze(w,Wr(R,function(Fe){return sA(Fe,$)?+Fe:Fe}).sort(Au)),he});function dC(w,R){var $=[];if(!(w&&w.length))return $;var he=-1,Fe=[],Je=w.length;for(R=Ji(R,3);++he<Je;){var vt=w[he];R(vt,he,w)&&($.push(vt),Fe.push(he))}return Ze(w,Fe),$}function aA(w){return w==null?w:Gl.call(w)}function _0(w,R,$){var he=w==null?0:w.length;return he?($&&typeof $!="number"&&gl(w,R,$)?(R=0,$=he):(R=R==null?0:cr(R),$=$===t?he:cr($)),Kt(w,R,$)):[]}function x0(w,R){return Wt(w,R)}function Bp(w,R,$){return In(w,R,Ji($,2))}function fC(w,R){var $=w==null?0:w.length;if($){var he=Wt(w,R);if(he<$&&Kc(w[he],R))return he}return-1}function xv(w,R){return Wt(w,R,!0)}function M0(w,R,$){return In(w,R,Ji($,2),!0)}function $1(w,R){var $=w==null?0:w.length;if($){var he=Wt(w,R,!0)-1;if(Kc(w[he],R))return he}return-1}function Gf(w){return w&&w.length?kn(w):[]}function V1(w,R){return w&&w.length?kn(w,Ji(R,2)):[]}function Jx(w){var R=w==null?0:w.length;return R?Kt(w,1,R):[]}function e2(w,R,$){return w&&w.length?(R=$||R===t?1:cr(R),Kt(w,0,R<0?0:R)):[]}function Yo(w,R,$){var he=w==null?0:w.length;return he?(R=$||R===t?1:cr(R),R=he-R,Kt(w,R<0?0:R,he)):[]}function Bs(w,R){return w&&w.length?Uo(w,Ji(R,3),!1,!0):[]}function go(w,R){return w&&w.length?Uo(w,Ji(R,3)):[]}var _o=nt(function(w){return Xi(La(w,1,il,!0))}),Lo=nt(function(w){var R=gs(w);return il(R)&&(R=t),Xi(La(w,1,il,!0),Ji(R,2))}),kc=nt(function(w){var R=gs(w);return R=typeof R=="function"?R:t,Xi(La(w,1,il,!0),t,R)});function Wf(w){return w&&w.length?Xi(w):[]}function Wm(w,R){return w&&w.length?Xi(w,Ji(R,2)):[]}function Mv(w,R){return R=typeof R=="function"?R:t,w&&w.length?Xi(w,t,R):[]}function Mh(w){if(!(w&&w.length))return[];var R=0;return w=bc(w,function($){if(il($))return R=Es($.length,R),!0}),_m(R,function($){return Wr(w,gA($))})}function va(w,R){if(!(w&&w.length))return[];var $=Mh(w);return R==null?$:Wr($,function(he){return ta(R,t,he)})}var Hd=nt(function(w,R){return il(w)?Ja(w,R):[]}),Zd=nt(function(w){return Jo(bc(w,il))}),H1=nt(function(w){var R=gs(w);return il(R)&&(R=t),Jo(bc(w,il),Ji(R,2))}),Tc=nt(function(w){var R=gs(w);return R=typeof R=="function"?R:t,Jo(bc(w,il),t,R)}),Ip=nt(Mh);function w0(w,R){return ya(w||[],R||[],rc)}function hu(w,R){return ya(w||[],R||[],xt)}var wv=nt(function(w){var R=w.length,$=R>1?w[R-1]:t;return $=typeof $=="function"?(w.pop(),$):t,va(w,$)});function Qm(w){var R=qe(w);return R.__chain__=!0,R}function pC(w,R){return R(w),w}function kp(w,R){return R(w)}var Z1=Ch(function(w){var R=w.length,$=R?w[0]:0,he=this.__wrapped__,Fe=function(Je){return $h(Je,w)};return R>1||this.__actions__.length||!(he instanceof Er)||!sA($)?this.thru(Fe):(he=he.slice($,+$+(R?1:0)),he.__actions__.push({func:kp,args:[Fe],thisArg:t}),new Wl(he,this.__chain__).thru(function(Je){return R&&!Je.length&&Je.push(t),Je}))});function Xd(){return Qm(this)}function kl(){return new Wl(this.value(),this.__chain__)}function Qf(){this.__values__===t&&(this.__values__=Nv(this.value()));var w=this.__index__>=this.__values__.length,R=w?t:this.__values__[this.__index__++];return{done:w,value:R}}function od(){return this}function Is(w){for(var R,$=this;$ instanceof wc;){var he=j1($);he.__index__=0,he.__values__=t,R?Fe.__wrapped__=he:R=he;var Fe=he;$=$.__wrapped__}return Fe.__wrapped__=w,R}function S0(){var w=this.__wrapped__;if(w instanceof Er){var R=w;return this.__actions__.length&&(R=new Er(this)),R=R.reverse(),R.__actions__.push({func:kp,args:[aA],thisArg:t}),new Wl(R,this.__chain__)}return this.thru(aA)}function X1(){return ds(this.__wrapped__,this.__actions__)}var Sv=qd(function(w,R,$){Do.call(w,$)?++w[$]:Ou(w,$,1)});function Tp(w,R,$){var he=Ir(w)?Zc:rA;return $&&gl(w,R,$)&&(R=t),he(w,Ji(R,3))}function qf(w,R){var $=Ir(w)?bc:Pf;return $(w,Ji(R,3))}var Rc=oA(Q1),mC=oA(q1);function Dc(w,R){return La(E0(w,R),1)}function gC(w,R){return La(E0(w,R),Qe)}function yC(w,R,$){return $=$===t?1:cr($),La(E0(w,R),$)}function vC(w,R){var $=Ir(w)?Xo:Qr;return $(w,Ji(R,3))}function Jd(w,R){var $=Ir(w)?yp:Um;return $(w,Ji(R,3))}var J1=qd(function(w,R,$){Do.call(w,$)?w[$].push(R):Ou(w,$,[R])});function Ev(w,R,$,he){w=Lc(w)?w:He(w),$=$&&!he?cr($):0;var Fe=w.length;return $<0&&($=Es(Fe+$,0)),RA(w)?$<=Fe&&w.indexOf(R,$)>-1:!!Fe&&Lh(w,R,$)>-1}var qm=nt(function(w,R,$){var he=-1,Fe=typeof R=="function",Je=Lc(w)?nn(w.length):[];return Qr(w,function(vt){Je[++he]=Fe?ta(R,vt,$):bo(vt,R,$)}),Je}),bC=qd(function(w,R,$){Ou(w,$,R)});function E0(w,R){var $=Ir(w)?Wr:E;return $(w,Ji(R,3))}function CC(w,R,$,he){return w==null?[]:(Ir(R)||(R=R==null?[]:[R]),$=he?t:$,Ir($)||($=$==null?[]:[$]),ce(w,R,$))}var Ov=qd(function(w,R,$){w[$?0:1].push(R)},function(){return[[],[]]});function Ym(w,R,$){var he=Ir(w)?Ef:Od,Fe=arguments.length<3;return he(w,Ji(R,4),$,Fe,Qr)}function ey(w,R,$){var he=Ir(w)?_1:Od,Fe=arguments.length<3;return he(w,Ji(R,4),$,Fe,Um)}function Yf(w,R){var $=Ir(w)?bc:Pf;return $(w,ry(Ji(R,3)))}function O0(w){var R=Ir(w)?nA:ct;return R(w)}function $m(w,R,$){($?gl(w,R,$):R===t)?R=1:R=cr(R);var he=Ir(w)?Ah:gt;return he(w,R)}function B0(w){var R=Ir(w)?Tm:Qt;return R(w)}function I0(w){if(w==null)return 0;if(Lc(w))return RA(w)?kd(w):w.length;var R=Yl(w);return R==pt||R==wn?w.size:l(w).length}function Vm(w,R,$){var he=Ir(w)?vp:Nt;return $&&gl(w,R,$)&&(R=t),he(w,Ji(R,3))}var ty=nt(function(w,R){if(w==null)return[];var $=R.length;return $>1&&gl(w,R[0],R[1])?R=[]:$>2&&gl(R[0],R[1],R[2])&&(R=[R[0]]),ce(w,La(R,1),[])}),Hm=Mp||function(){return Ri.Date.now()};function Bv(w,R){if(typeof R!="function")throw new zl(s);return w=cr(w),function(){if(--w<1)return R.apply(this,arguments)}}function Iv(w,R,$){return R=$?t:R,R=w&&R==null?w.length:R,Pu(w,z,t,t,t,t,R)}function ny(w,R){var $;if(typeof R!="function")throw new zl(s);return w=cr(w),function(){return--w>0&&($=R.apply(this,arguments)),w<=1&&(R=t),$}}var k0=nt(function(w,R,$){var he=F;if($.length){var Fe=eh($,ra(k0));he|=G}return Pu(w,he,R,$,Fe)}),T0=nt(function(w,R,$){var he=F|j;if($.length){var Fe=eh($,ra(T0));he|=G}return Pu(R,he,w,$,Fe)});function Rp(w,R,$){R=$?t:R;var he=Pu(w,V,t,t,t,t,t,R);return he.placeholder=Rp.placeholder,he}function kv(w,R,$){R=$?t:R;var he=Pu(w,H,t,t,t,t,t,R);return he.placeholder=kv.placeholder,he}function iy(w,R,$){var he,Fe,Je,vt,It,jt,_n=0,xn=!1,Kn=!1,gi=!0;if(typeof w!="function")throw new zl(s);R=Lu(R)||0,ks($)&&(xn=!!$.leading,Kn="maxWait"in $,Je=Kn?Es(Lu($.maxWait)||0,R):Je,gi="trailing"in $?!!$.trailing:gi);function Vi(pu){var zp=he,W0=Fe;return he=Fe=t,_n=pu,vt=w.apply(W0,zp),vt}function xr(pu){return _n=pu,It=Nm(jo,R),xn?Vi(pu):vt}function xo(pu){var zp=pu-jt,W0=pu-_n,TL=R-zp;return Kn?$s(TL,Je-W0):TL}function Mr(pu){var zp=pu-jt,W0=pu-_n;return jt===t||zp>=R||zp<0||Kn&&W0>=Je}function jo(){var pu=Hm();if(Mr(pu))return ts(pu);It=Nm(jo,xo(pu))}function ts(pu){return It=t,gi&&he?Vi(pu):(he=Fe=t,vt)}function of(){It!==t&&sc(It),_n=0,he=jt=Fe=It=t}function Oh(){return It===t?vt:ts(Hm())}function sf(){var pu=Hm(),zp=Mr(pu);if(he=arguments,Fe=this,jt=pu,zp){if(It===t)return xr(jt);if(Kn)return sc(It),It=Nm(jo,R),Vi(jt)}return It===t&&(It=Nm(jo,R)),vt}return sf.cancel=of,sf.flush=Oh,sf}var ys=nt(function(w,R){return Df(w,1,R)}),Tv=nt(function(w,R,$){return Df(w,Lu(R)||0,$)});function t2(w){return Pu(w,le)}function R0(w,R){if(typeof w!="function"||R!=null&&typeof R!="function")throw new zl(s);var $=function(){var he=arguments,Fe=R?R.apply(this,he):he[0],Je=$.cache;if(Je.has(Fe))return Je.get(Fe);var vt=w.apply(this,he);return $.cache=Je.set(Fe,vt)||Je,vt};return $.cache=new(R0.Cache||la),$}R0.Cache=la;function ry(w){if(typeof w!="function")throw new zl(s);return function(){var R=arguments;switch(R.length){case 0:return!w.call(this);case 1:return!w.call(this,R[0]);case 2:return!w.call(this,R[0],R[1]);case 3:return!w.call(this,R[0],R[1],R[2])}return!w.apply(this,R)}}function _C(w){return ny(2,w)}var xC=Br(function(w,R){R=R.length==1&&Ir(R[0])?Wr(R[0],su(Ji())):Wr(La(R,1),su(Ji()));var $=R.length;return nt(function(he){for(var Fe=-1,Je=$s(he.length,$);++Fe<Je;)he[Fe]=R[Fe].call(this,he[Fe]);return ta(w,this,he)})}),Pc=nt(function(w,R){var $=eh(R,ra(Pc));return Pu(w,G,t,R,$)}),Uc=nt(function(w,R){var $=eh(R,ra(Uc));return Pu(w,Y,t,R,$)}),oy=Ch(function(w,R){return Pu(w,se,t,t,t,R)});function Zm(w,R){if(typeof w!="function")throw new zl(s);return R=R===t?R:cr(R),nt(w,R)}function Rv(w,R){if(typeof w!="function")throw new zl(s);return R=R==null?0:Es(cr(R),0),nt(function($){var he=$[R],Fe=fs($,0,R);return he&&XA(Fe,he),ta(w,this,Fe)})}function wh(w,R,$){var he=!0,Fe=!0;if(typeof w!="function")throw new zl(s);return ks($)&&(he="leading"in $?!!$.leading:he,Fe="trailing"in $?!!$.trailing:Fe),iy(w,R,{leading:he,maxWait:R,trailing:Fe})}function TA(w){return Iv(w,1)}function D0(w,R){return Pc(Bo(R),w)}function Dv(){if(!arguments.length)return[];var w=arguments[0];return Ir(w)?w:[w]}function sy(w){return Ql(w,x)}function Dp(w,R){return R=typeof R=="function"?R:t,Ql(w,x,R)}function Pv(w){return Ql(w,y|x)}function Uv(w,R){return R=typeof R=="function"?R:t,Ql(w,y|x,R)}function Kv(w,R){return R==null||hh(w,R,vl(R))}function Kc(w,R){return w===R||w!==w&&R!==R}var P0=bh(za),Lv=bh(function(w,R){return w>=R}),Pp=Bl((function(){return arguments})())?Bl:function(w){return ba(w)&&Do.call(w,"callee")&&!br.call(w,"callee")},Ir=nn.isArray,ay=Hr?su(Hr):Us;function Lc(w){return w!=null&&F0(w.length)&&!Fc(w)}function il(w){return ba(w)&&Lc(w)}function U0(w){return w===!0||w===!1||ba(w)&&Fa(w)==Ke}var $f=kf||Xt,MC=ws?su(ws):BA;function Zr(w){return ba(w)&&w.nodeType===1&&!Xm(w)}function sd(w){if(w==null)return!0;if(Lc(w)&&(Ir(w)||typeof w=="string"||typeof w.splice=="function"||$f(w)||ef(w)||Pp(w)))return!w.length;var R=Yl(w);if(R==pt||R==wn)return!w.size;if(jm(w))return!l(w).length;for(var $ in w)if(Do.call(w,$))return!1;return!0}function K0(w,R){return el(w,R)}function ly(w,R,$){$=typeof $=="function"?$:t;var he=$?$(w,R):t;return he===t?el(w,R,t,$):!!he}function L0(w){if(!ba(w))return!1;var R=Fa(w);return R==Ne||R==Se||typeof w.message=="string"&&typeof w.name=="string"&&!Xm(w)}function uy(w){return typeof w=="number"&&uu(w)}function Fc(w){if(!ks(w))return!1;var R=Fa(w);return R==ut||R==rt||R==Bt||R==Ln}function Up(w){return typeof w=="number"&&w==cr(w)}function F0(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=et}function ks(w){var R=typeof w;return w!=null&&(R=="object"||R=="function")}function ba(w){return w!=null&&typeof w=="object"}var cy=gr?su(gr):Po;function Fv(w,R){return w===R||qo(w,R,T1(R))}function zc(w,R,$){return $=typeof $=="function"?$:t,qo(w,R,T1(R),$)}function Fo(w){return Ay(w)&&w!=+w}function Kp(w){if(K1(w))throw new yr(o);return Wd(w)}function Ca(w){return w===null}function wC(w){return w==null}function Ay(w){return typeof w=="number"||ba(w)&&Fa(w)==Dt}function Xm(w){if(!ba(w)||Fa(w)!=Jt)return!1;var R=Jc(w);if(R===null)return!0;var $=Do.call(R,"constructor")&&R.constructor;return typeof $=="function"&&$ instanceof $&&au.call($)==Dd}var Jm=Ha?su(Ha):Vh;function zv(w){return Up(w)&&w>=-et&&w<=et}var eg=vc?su(vc):IA;function RA(w){return typeof w=="string"||!Ir(w)&&ba(w)&&Fa(w)==Rn}function ac(w){return typeof w=="symbol"||ba(w)&&Fa(w)==gn}var ef=_u?su(_u):Uf;function hy(w){return w===t}function SC(w){return ba(w)&&Yl(w)==Dn}function EC(w){return ba(w)&&Fa(w)==Tt}var n2=bh(C),jv=bh(function(w,R){return w<=R});function Nv(w){if(!w)return[];if(Lc(w))return RA(w)?Ss(w):Co(w);if(fl&&w[fl])return Zg(w[fl]());var R=Yl(w),$=R==pt?Nh:R==wn?Cp:He;return $(w)}function DA(w){if(!w)return w===0?w:0;if(w=Lu(w),w===Qe||w===-Qe){var R=w<0?-1:1;return R*dt}return w===w?w:0}function cr(w){var R=DA(w),$=R%1;return R===R?$?R-$:R:0}function tg(w){return w?oc(cr(w),0,we):0}function Lu(w){if(typeof w=="number")return w;if(ac(w))return ke;if(ks(w)){var R=typeof w.valueOf=="function"?w.valueOf():w;w=ks(R)?R+"":R}if(typeof w!="string")return w===0?w:+w;w=zh(w);var $=Al.test(w);return $||$a.test(w)?Bn(w.slice(2),$?2:8):Jl.test(w)?ke:+w}function Lp(w){return Ko(w,Fu(w))}function i2(w){return w?oc(cr(w),-et,et):w===0?w:0}function ls(w){return w==null?"":Qn(w)}var OC=gh(function(w,R){if(jm(R)||Lc(R)){Ko(R,vl(R),w);return}for(var $ in R)Do.call(R,$)&&rc(w,$,R[$])}),tf=gh(function(w,R){Ko(R,Fu(R),w)}),_a=gh(function(w,R,$,he){Ko(R,Fu(R),w,he)}),Gv=gh(function(w,R,$,he){Ko(R,vl(R),w,he)}),lA=Ch($h);function dy(w,R){var $=wu(w);return R==null?$:Dm($,R)}var fy=nt(function(w,R){w=Qo(w);var $=-1,he=R.length,Fe=he>2?R[2]:t;for(Fe&&gl(R[0],R[1],Fe)&&(he=1);++$<he;)for(var Je=R[$],vt=Fu(Je),It=-1,jt=vt.length;++It<jt;){var _n=vt[It],xn=w[_n];(xn===t||Kc(xn,bA[_n])&&!Do.call(w,_n))&&(w[_n]=Je[_n])}return w}),BC=nt(function(w){return w.push(t,k1),ta(d,t,w)});function Wv(w,R){return vm(w,Ji(R,3),Iu)}function ng(w,R){return vm(w,Ji(R,3),ci)}function PA(w,R){return w==null?w:Gd(w,Ji(R,3),Fu)}function Qv(w,R){return w==null?w:cu(w,Ji(R,3),Fu)}function ig(w,R){return w&&Iu(w,Ji(R,3))}function Sh(w,R){return w&&ci(w,Ji(R,3))}function IC(w){return w==null?[]:fi(w,vl(w))}function z0(w){return w==null?[]:fi(w,Fu(w))}function ad(w,R,$){var he=w==null?t:ku(w,R);return he===t?$:he}function qv(w,R){return w!=null&&D1(w,R,Tu)}function j0(w,R){return w!=null&&D1(w,R,ua)}var py=Zh(function(w,R,$){R!=null&&typeof R.toString!="function"&&(R=Ua.call(R)),w[R]=$},zu(Cl)),N0=Zh(function(w,R,$){R!=null&&typeof R.toString!="function"&&(R=Ua.call(R)),Do.call(w,R)?w[R].push($):w[R]=[$]},Ji),Yv=nt(bo);function vl(w){return Lc(w)?Rf(w):l(w)}function Fu(w){return Lc(w)?Rf(w,!0):p(w)}function r2(w,R){var $={};return R=Ji(R,3),Iu(w,function(he,Fe,Je){Ou($,R(he,Fe,Je),he)}),$}function f(w,R){var $={};return R=Ji(R,3),Iu(w,function(he,Fe,Je){Ou($,Fe,R(he,Fe,Je))}),$}var u=gh(function(w,R,$){Q(w,R,$)}),d=gh(function(w,R,$,he){Q(w,R,$,he)}),b=Ch(function(w,R){var $={};if(w==null)return $;var he=!1;R=Wr(R,function(Je){return Je=so(Je,w),he||(he=Je.length>1),Je}),Ko(w,Lf(w),$),he&&($=Ql($,y|M|x,sC));for(var Fe=R.length;Fe--;)mo($,R[Fe]);return $});function S(w,R){return D(w,ry(Ji(R)))}var B=Ch(function(w,R){return w==null?{}:Ce(w,R)});function D(w,R){if(w==null)return{};var $=Wr(Lf(w),function(he){return[he]});return R=Ji(R),fe(w,$,function(he,Fe){return R(he,Fe[0])})}function K(w,R,$){R=so(R,w);var he=-1,Fe=R.length;for(Fe||(Fe=1,w=t);++he<Fe;){var Je=w==null?t:w[Bc(R[he])];Je===t&&(he=Fe,Je=$),w=Fc(Je)?Je.call(w):Je}return w}function W(w,R,$){return w==null?w:xt(w,R,$)}function te(w,R,$,he){return he=typeof he=="function"?he:t,w==null?w:xt(w,R,$,he)}var re=o0(vl),Ae=o0(Fu);function Oe(w,R,$){var he=Ir(w),Fe=he||$f(w)||ef(w);if(R=Ji(R,4),$==null){var Je=w&&w.constructor;Fe?$=he?new Je:[]:ks(w)?$=Fc(Je)?wu(Jc(w)):{}:$={}}return(Fe?Xo:Iu)(w,function(vt,It,jt){return R($,vt,It,jt)}),$}function Pe(w,R){return w==null?!0:mo(w,R)}function Le(w,R,$){return w==null?w:os(w,R,Bo($))}function We(w,R,$,he){return he=typeof he=="function"?he:t,w==null?w:os(w,R,Bo($),he)}function He(w){return w==null?[]:Hg(w,vl(w))}function at(w){return w==null?[]:Hg(w,Fu(w))}function Rt(w,R,$){return $===t&&($=R,R=t),$!==t&&($=Lu($),$=$===$?$:0),R!==t&&(R=Lu(R),R=R===R?R:0),oc(Lu(w),R,$)}function ft(w,R,$){return R=DA(R),$===t?($=R,R=0):$=DA($),w=Lu(w),Ru(w,R,$)}function Ct(w,R,$){if($&&typeof $!="boolean"&&gl(w,R,$)&&(R=$=t),$===t&&(typeof R=="boolean"?($=R,R=t):typeof w=="boolean"&&($=w,w=t)),w===t&&R===t?(w=0,R=1):(w=DA(w),R===t?(R=w,w=0):R=DA(R)),w>R){var he=w;w=R,R=he}if($||w%1||R%1){var Fe=eA();return $s(w+Fe*(R-w+ei("1e-"+((Fe+"").length-1))),R)}return Xe(w,R)}var zt=tl(function(w,R,$){return R=R.toLowerCase(),w+($?en(R):R)});function en(w){return ol(ls(w).toLowerCase())}function An(w){return w=ls(w),w&&w.replace(fo,Bf).replace(HA,"")}function Gn(w,R,$){w=ls(w),R=Qn(R);var he=w.length;$=$===t?he:oc(cr($),0,he);var Fe=$;return $-=R.length,$>=0&&w.slice($,Fe)==R}function Un(w){return w=ls(w),w&&Fn.test(w)?w.replace(st,M1):w}function Nn(w){return w=ls(w),w&&oi.test(w)?w.replace(tr,"\\$&"):w}var xi=tl(function(w,R,$){return w+($?"-":"")+R.toLowerCase()}),zn=tl(function(w,R,$){return w+($?" ":"")+R.toLowerCase()}),jn=Yd("toLowerCase");function on(w,R,$){w=ls(w),R=cr(R);var he=R?kd(w):0;if(!R||he>=R)return w;var Fe=(R-he)/2;return $d(Qh(Fe),$)+w+$d(Wh(Fe),$)}function Ni(w,R,$){w=ls(w),R=cr(R);var he=R?kd(w):0;return R&&he<R?w+$d(R-he,$):w}function $i(w,R,$){w=ls(w),R=cr(R);var he=R?kd(w):0;return R&&he<R?$d(R-he,$)+w:w}function Di(w,R,$){return $||R==null?R=0:R&&(R=+R),Nl(ls(w).replace(Pi,""),R||0)}function mi(w,R,$){return($?gl(w,R,$):R===t)?R=1:R=cr(R),ot(ls(w),R)}function Kr(){var w=arguments,R=ls(w[0]);return w.length<3?R:R.replace(w[1],w[2])}var Ks=tl(function(w,R,$){return w+($?"_":"")+R.toLowerCase()});function ca(w,R,$){return $&&typeof $!="number"&&gl(w,R,$)&&(R=$=t),$=$===t?we:$>>>0,$?(w=ls(w),w&&(typeof R=="string"||R!=null&&!Jm(R))&&(R=Qn(R),!R&&JA(w))?fs(Ss(w),0,$):w.split(R,$)):[]}var bl=tl(function(w,R,$){return w+($?" ":"")+ol(R)});function jc(w,R,$){return w=ls(w),$=$==null?0:oc(cr($),0,w.length),R=Qn(R),w.slice($,$+R.length)==R}function du(w,R,$){var he=qe.templateSettings;$&&gl(w,R,$)&&(R=t),w=ls(w),R=_a({},R,he,zm);var Fe=_a({},R.imports,he.imports,zm),Je=vl(Fe),vt=Hg(Fe,Je),It,jt,_n=0,xn=R.interpolate||Qs,Kn="__p += '",gi=Td((R.escape||Qs).source+"|"+xn.source+"|"+(xn===Zn?Ui:Qs).source+"|"+(R.evaluate||Qs).source+"|$","g"),Vi="//# sourceURL="+(Do.call(R,"sourceURL")?(R.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++wi+"]")+`
`;w.replace(gi,function(Mr,jo,ts,of,Oh,sf){return ts||(ts=of),Kn+=w.slice(_n,sf).replace(Kl,yA),jo&&(It=!0,Kn+=`' +
__e(`+jo+`) +
'`),Oh&&(jt=!0,Kn+=`';
`+Oh+`;
__p += '`),ts&&(Kn+=`' +
((__t = (`+ts+`)) == null ? '' : __t) +
'`),_n=sf+Mr.length,Mr}),Kn+=`';
`;var xr=Do.call(R,"variable")&&R.variable;if(!xr)Kn=`with (obj) {
`+Kn+`
}
`;else if(sn.test(xr))throw new yr(a);Kn=(jt?Kn.replace(v,""):Kn).replace(yt,"$1").replace(Mt,"$1;"),Kn="function("+(xr||"obj")+`) {
`+(xr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(It?", __e = _.escape":"")+(jt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Kn+`return __p
}`;var xo=Na(function(){return Yr(Je,Vi+"return "+Kn).apply(t,vt)});if(xo.source=Kn,L0(xo))throw xo;return xo}function Vs(w){return ls(w).toLowerCase()}function zo(w){return ls(w).toUpperCase()}function Ls(w,R,$){if(w=ls(w),w&&($||R===t))return zh(w);if(!w||!(R=Qn(R)))return w;var he=Ss(w),Fe=Ss(R),Je=bp(he,Fe),vt=xm(he,Fe)+1;return fs(he,Je,vt).join("")}function xa(w,R,$){if(w=ls(w),w&&($||R===t))return w.slice(0,xu(w)+1);if(!w||!(R=Qn(R)))return w;var he=Ss(w),Fe=xm(he,Ss(R))+1;return fs(he,0,Fe).join("")}function Ma(w,R,$){if(w=ls(w),w&&($||R===t))return w.replace(Pi,"");if(!w||!(R=Qn(R)))return w;var he=Ss(w),Fe=bp(he,Ss(R));return fs(he,Fe).join("")}function wa(w,R){var $=me,he=de;if(ks(R)){var Fe="separator"in R?R.separator:Fe;$="length"in R?cr(R.length):$,he="omission"in R?Qn(R.omission):he}w=ls(w);var Je=w.length;if(JA(w)){var vt=Ss(w);Je=vt.length}if($>=Je)return w;var It=$-kd(he);if(It<1)return he;var jt=vt?fs(vt,0,It).join(""):w.slice(0,It);if(Fe===t)return jt+he;if(vt&&(It+=jt.length-It),Jm(Fe)){if(w.slice(It).search(Fe)){var _n,xn=jt;for(Fe.global||(Fe=Td(Fe.source,ls(nr.exec(Fe))+"g")),Fe.lastIndex=0;_n=Fe.exec(xn);)var Kn=_n.index;jt=jt.slice(0,Kn===t?It:Kn)}}else if(w.indexOf(Qn(Fe),It)!=It){var gi=jt.lastIndexOf(Fe);gi>-1&&(jt=jt.slice(0,gi))}return jt+he}function uA(w){return w=ls(w),w&&fn.test(w)?w.replace(Pt,po):w}var rl=tl(function(w,R,$){return w+($?" ":"")+R.toUpperCase()}),ol=Yd("toUpperCase");function ja(w,R,$){return w=ls(w),R=$?t:R,R===t?Id(w)?e0(w):ym(w):w.match(R)||[]}var Na=nt(function(w,R){try{return ta(w,t,R)}catch($){return L0($)?$:new yr($)}}),Sa=Ch(function(w,R){return Xo(R,function($){$=Bc($),Ou(w,$,k0(w[$],w))}),w});function Ea(w){var R=w==null?0:w.length,$=Ji();return w=R?Wr(w,function(he){if(typeof he[1]!="function")throw new zl(s);return[$(he[0]),he[1]]}):[],nt(function(he){for(var Fe=-1;++Fe<R;){var Je=w[Fe];if(ta(Je[0],this,he))return ta(Je[1],this,he)}})}function Ts(w){return Pm(Ql(w,y))}function zu(w){return function(){return w}}function nf(w,R){return w==null||w!==w?R:w}var UA=yh(),rg=yh(!0);function Cl(w){return w}function Eh(w){return I(typeof w=="function"?w:Ql(w,y))}function rf(w){return T(Ql(w,y))}function Fp(w,R){return U(w,Ql(R,y))}var og=nt(function(w,R){return function($){return bo($,w,R)}}),G0=nt(function(w,R){return function($){return bo(w,$,R)}});function A(w,R,$){var he=vl(R),Fe=fi(R,he);$==null&&!(ks(R)&&(Fe.length||!he.length))&&($=R,R=w,w=this,Fe=fi(R,vl(R)));var Je=!(ks($)&&"chain"in $)||!!$.chain,vt=Fc(w);return Xo(Fe,function(It){var jt=R[It];w[It]=jt,vt&&(w.prototype[It]=function(){var _n=this.__chain__;if(Je||_n){var xn=w(this.__wrapped__),Kn=xn.__actions__=Co(this.__actions__);return Kn.push({func:jt,args:arguments,thisArg:w}),xn.__chain__=_n,xn}return jt.apply(w,XA([this.value()],arguments))})}),w}function g(){return Ri._===this&&(Ri._=lu),this}function _(){}function O(w){return w=cr(w),nt(function(R){return ae(R,w)})}var N=B1(Wr),J=B1(Zc),Me=B1(vp);function Ye(w){return Il(w)?gA(Bc(w)):Re(w)}function _t(w){return function(R){return w==null?t:ku(w,R)}}var $t=r0(),ln=r0(!0);function mn(){return[]}function Xt(){return!1}function rn(){return{}}function ki(){return""}function ir(){return!0}function ao(w,R){if(w=cr(w),w<1||w>et)return[];var $=we,he=$s(w,we);R=Ji(R),w-=we;for(var Fe=_m(he,R);++$<w;)R($);return Fe}function Lt(w){return Ir(w)?Wr(w,Bc):ac(w)?[w]:Co(yv(ls(w)))}function kt(w){var R=++t0;return ls(w)+R}var qt=vh(function(w,R){return w+R},0),dn=Fm("ceil"),er=vh(function(w,R){return w/R},1),hr=Fm("floor");function Ai(w){return w&&w.length?Bu(w,Cl,za):t}function vr(w,R){return w&&w.length?Bu(w,Ji(R,2),za):t}function _r(w){return Cm(w,Cl)}function lo(w,R){return Cm(w,Ji(R,2))}function fu(w){return w&&w.length?Bu(w,Cl,C):t}function Z6(w,R){return w&&w.length?Bu(w,Ji(R,2),C):t}var Bae=vh(function(w,R){return w*R},1),Iae=Fm("round"),kae=vh(function(w,R){return w-R},0);function Tae(w){return w&&w.length?Bd(w,Cl):0}function Rae(w,R){return w&&w.length?Bd(w,Ji(R,2)):0}return qe.after=Bv,qe.ary=Iv,qe.assign=OC,qe.assignIn=tf,qe.assignInWith=_a,qe.assignWith=Gv,qe.at=lA,qe.before=ny,qe.bind=k0,qe.bindAll=Sa,qe.bindKey=T0,qe.castArray=Dv,qe.chain=Qm,qe.chunk=N1,qe.compact=vv,qe.concat=G1,qe.cond=Ea,qe.conforms=Ts,qe.constant=zu,qe.countBy=Sv,qe.create=dy,qe.curry=Rp,qe.curryRight=kv,qe.debounce=iy,qe.defaults=fy,qe.defaultsDeep=BC,qe.defer=ys,qe.delay=Tv,qe.difference=zf,qe.differenceBy=hC,qe.differenceWith=es,qe.drop=oa,qe.dropRight=W1,qe.dropRightWhile=y0,qe.dropWhile=nl,qe.fill=v0,qe.filter=qf,qe.flatMap=Dc,qe.flatMapDeep=gC,qe.flatMapDepth=yC,qe.flatten=ms,qe.flattenDeep=Ku,qe.flattenDepth=Ic,qe.flip=t2,qe.flow=UA,qe.flowRight=rg,qe.fromPairs=b0,qe.functions=IC,qe.functionsIn=z0,qe.groupBy=J1,qe.initial=Xx,qe.intersection=C0,qe.intersectionBy=yl,qe.intersectionWith=_h,qe.invert=py,qe.invertBy=N0,qe.invokeMap=qm,qe.iteratee=Eh,qe.keyBy=bC,qe.keys=vl,qe.keysIn=Fu,qe.map=E0,qe.mapKeys=r2,qe.mapValues=f,qe.matches=rf,qe.matchesProperty=Fp,qe.memoize=R0,qe.merge=u,qe.mergeWith=d,qe.method=og,qe.methodOf=G0,qe.mixin=A,qe.negate=ry,qe.nthArg=O,qe.omit=b,qe.omitBy=S,qe.once=_C,qe.orderBy=CC,qe.over=N,qe.overArgs=xC,qe.overEvery=J,qe.overSome=Me,qe.partial=Pc,qe.partialRight=Uc,qe.partition=Ov,qe.pick=B,qe.pickBy=D,qe.property=Ye,qe.propertyOf=_t,qe.pull=Nf,qe.pullAll=rd,qe.pullAllBy=Cv,qe.pullAllWith=_v,qe.pullAt=xh,qe.range=$t,qe.rangeRight=ln,qe.rearg=oy,qe.reject=Yf,qe.remove=dC,qe.rest=Zm,qe.reverse=aA,qe.sampleSize=$m,qe.set=W,qe.setWith=te,qe.shuffle=B0,qe.slice=_0,qe.sortBy=ty,qe.sortedUniq=Gf,qe.sortedUniqBy=V1,qe.split=ca,qe.spread=Rv,qe.tail=Jx,qe.take=e2,qe.takeRight=Yo,qe.takeRightWhile=Bs,qe.takeWhile=go,qe.tap=pC,qe.throttle=wh,qe.thru=kp,qe.toArray=Nv,qe.toPairs=re,qe.toPairsIn=Ae,qe.toPath=Lt,qe.toPlainObject=Lp,qe.transform=Oe,qe.unary=TA,qe.union=_o,qe.unionBy=Lo,qe.unionWith=kc,qe.uniq=Wf,qe.uniqBy=Wm,qe.uniqWith=Mv,qe.unset=Pe,qe.unzip=Mh,qe.unzipWith=va,qe.update=Le,qe.updateWith=We,qe.values=He,qe.valuesIn=at,qe.without=Hd,qe.words=ja,qe.wrap=D0,qe.xor=Zd,qe.xorBy=H1,qe.xorWith=Tc,qe.zip=Ip,qe.zipObject=w0,qe.zipObjectDeep=hu,qe.zipWith=wv,qe.entries=re,qe.entriesIn=Ae,qe.extend=tf,qe.extendWith=_a,A(qe,qe),qe.add=qt,qe.attempt=Na,qe.camelCase=zt,qe.capitalize=en,qe.ceil=dn,qe.clamp=Rt,qe.clone=sy,qe.cloneDeep=Pv,qe.cloneDeepWith=Uv,qe.cloneWith=Dp,qe.conformsTo=Kv,qe.deburr=An,qe.defaultTo=nf,qe.divide=er,qe.endsWith=Gn,qe.eq=Kc,qe.escape=Un,qe.escapeRegExp=Nn,qe.every=Tp,qe.find=Rc,qe.findIndex=Q1,qe.findKey=Wv,qe.findLast=mC,qe.findLastIndex=q1,qe.findLastKey=ng,qe.floor=hr,qe.forEach=vC,qe.forEachRight=Jd,qe.forIn=PA,qe.forInRight=Qv,qe.forOwn=ig,qe.forOwnRight=Sh,qe.get=ad,qe.gt=P0,qe.gte=Lv,qe.has=qv,qe.hasIn=j0,qe.head=jf,qe.identity=Cl,qe.includes=Ev,qe.indexOf=Gm,qe.inRange=ft,qe.invoke=Yv,qe.isArguments=Pp,qe.isArray=Ir,qe.isArrayBuffer=ay,qe.isArrayLike=Lc,qe.isArrayLikeObject=il,qe.isBoolean=U0,qe.isBuffer=$f,qe.isDate=MC,qe.isElement=Zr,qe.isEmpty=sd,qe.isEqual=K0,qe.isEqualWith=ly,qe.isError=L0,qe.isFinite=uy,qe.isFunction=Fc,qe.isInteger=Up,qe.isLength=F0,qe.isMap=cy,qe.isMatch=Fv,qe.isMatchWith=zc,qe.isNaN=Fo,qe.isNative=Kp,qe.isNil=wC,qe.isNull=Ca,qe.isNumber=Ay,qe.isObject=ks,qe.isObjectLike=ba,qe.isPlainObject=Xm,qe.isRegExp=Jm,qe.isSafeInteger=zv,qe.isSet=eg,qe.isString=RA,qe.isSymbol=ac,qe.isTypedArray=ef,qe.isUndefined=hy,qe.isWeakMap=SC,qe.isWeakSet=EC,qe.join=bv,qe.kebabCase=xi,qe.last=gs,qe.lastIndexOf=Y1,qe.lowerCase=zn,qe.lowerFirst=jn,qe.lt=n2,qe.lte=jv,qe.max=Ai,qe.maxBy=vr,qe.mean=_r,qe.meanBy=lo,qe.min=fu,qe.minBy=Z6,qe.stubArray=mn,qe.stubFalse=Xt,qe.stubObject=rn,qe.stubString=ki,qe.stubTrue=ir,qe.multiply=Bae,qe.nth=id,qe.noConflict=g,qe.noop=_,qe.now=Hm,qe.pad=on,qe.padEnd=Ni,qe.padStart=$i,qe.parseInt=Di,qe.random=Ct,qe.reduce=Ym,qe.reduceRight=ey,qe.repeat=mi,qe.replace=Kr,qe.result=K,qe.round=Iae,qe.runInContext=Ut,qe.sample=O0,qe.size=I0,qe.snakeCase=Ks,qe.some=Vm,qe.sortedIndex=x0,qe.sortedIndexBy=Bp,qe.sortedIndexOf=fC,qe.sortedLastIndex=xv,qe.sortedLastIndexBy=M0,qe.sortedLastIndexOf=$1,qe.startCase=bl,qe.startsWith=jc,qe.subtract=kae,qe.sum=Tae,qe.sumBy=Rae,qe.template=du,qe.times=ao,qe.toFinite=DA,qe.toInteger=cr,qe.toLength=tg,qe.toLower=Vs,qe.toNumber=Lu,qe.toSafeInteger=i2,qe.toString=ls,qe.toUpper=zo,qe.trim=Ls,qe.trimEnd=xa,qe.trimStart=Ma,qe.truncate=wa,qe.unescape=uA,qe.uniqueId=kt,qe.upperCase=rl,qe.upperFirst=ol,qe.each=vC,qe.eachRight=Jd,qe.first=jf,A(qe,(function(){var w={};return Iu(qe,function(R,$){Do.call(qe.prototype,$)||(w[$]=R)}),w})(),{chain:!1}),qe.VERSION=i,Xo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(w){qe[w].placeholder=qe}),Xo(["drop","take"],function(w,R){Er.prototype[w]=function($){$=$===t?1:Es(cr($),0);var he=this.__filtered__&&!R?new Er(this):this.clone();return he.__filtered__?he.__takeCount__=$s($,he.__takeCount__):he.__views__.push({size:$s($,we),type:w+(he.__dir__<0?"Right":"")}),he},Er.prototype[w+"Right"]=function($){return this.reverse()[w]($).reverse()}}),Xo(["filter","map","takeWhile"],function(w,R){var $=R+1,he=$==De||$==Ie;Er.prototype[w]=function(Fe){var Je=this.clone();return Je.__iteratees__.push({iteratee:Ji(Fe,3),type:$}),Je.__filtered__=Je.__filtered__||he,Je}}),Xo(["head","last"],function(w,R){var $="take"+(R?"Right":"");Er.prototype[w]=function(){return this[$](1).value()[0]}}),Xo(["initial","tail"],function(w,R){var $="drop"+(R?"":"Right");Er.prototype[w]=function(){return this.__filtered__?new Er(this):this[$](1)}}),Er.prototype.compact=function(){return this.filter(Cl)},Er.prototype.find=function(w){return this.filter(w).head()},Er.prototype.findLast=function(w){return this.reverse().find(w)},Er.prototype.invokeMap=nt(function(w,R){return typeof w=="function"?new Er(this):this.map(function($){return bo($,w,R)})}),Er.prototype.reject=function(w){return this.filter(ry(Ji(w)))},Er.prototype.slice=function(w,R){w=cr(w);var $=this;return $.__filtered__&&(w>0||R<0)?new Er($):(w<0?$=$.takeRight(-w):w&&($=$.drop(w)),R!==t&&(R=cr(R),$=R<0?$.dropRight(-R):$.take(R-w)),$)},Er.prototype.takeRightWhile=function(w){return this.reverse().takeWhile(w).reverse()},Er.prototype.toArray=function(){return this.take(we)},Iu(Er.prototype,function(w,R){var $=/^(?:filter|find|map|reject)|While$/.test(R),he=/^(?:head|last)$/.test(R),Fe=qe[he?"take"+(R=="last"?"Right":""):R],Je=he||/^find/.test(R);Fe&&(qe.prototype[R]=function(){var vt=this.__wrapped__,It=he?[1]:arguments,jt=vt instanceof Er,_n=It[0],xn=jt||Ir(vt),Kn=function(jo){var ts=Fe.apply(qe,XA([jo],It));return he&&gi?ts[0]:ts};xn&&$&&typeof _n=="function"&&_n.length!=1&&(jt=xn=!1);var gi=this.__chain__,Vi=!!this.__actions__.length,xr=Je&&!gi,xo=jt&&!Vi;if(!Je&&xn){vt=xo?vt:new Er(this);var Mr=w.apply(vt,It);return Mr.__actions__.push({func:kp,args:[Kn],thisArg:t}),new Wl(Mr,gi)}return xr&&xo?w.apply(this,It):(Mr=this.thru(Kn),xr?he?Mr.value()[0]:Mr.value():Mr)})}),Xo(["pop","push","shift","sort","splice","unshift"],function(w){var R=Rd[w],$=/^(?:push|sort|unshift)$/.test(w)?"tap":"thru",he=/^(?:pop|shift)$/.test(w);qe.prototype[w]=function(){var Fe=arguments;if(he&&!this.__chain__){var Je=this.value();return R.apply(Ir(Je)?Je:[],Fe)}return this[$](function(vt){return R.apply(Ir(vt)?vt:[],Fe)})}}),Iu(Er.prototype,function(w,R){var $=qe[R];if($){var he=$.name+"";Do.call(Oo,he)||(Oo[he]=[]),Oo[he].push({name:R,func:$})}}),Oo[Hh(t,j).name]=[{name:"wrapper",func:t}],Er.prototype.clone=wA,Er.prototype.reverse=ah,Er.prototype.value=SA,qe.prototype.at=Z1,qe.prototype.chain=Xd,qe.prototype.commit=kl,qe.prototype.next=Qf,qe.prototype.plant=Is,qe.prototype.reverse=S0,qe.prototype.toJSON=qe.prototype.valueOf=qe.prototype.value=X1,qe.prototype.first=qe.prototype.head,fl&&(qe.prototype[fl]=od),qe}),_c=_p();mr?((mr.exports=_c)._=_c,Ii._=_c):Ri._=_c}).call(Cue)})(T2,T2.exports)),T2.exports}var W4=_ue();const t9=Xl(W4);function xue(n,e,t){const i=e<0?n.length+e:e;if(i>=0&&i<n.length){const r=t<0?n.length+t:t,[o]=n.splice(e,1);n.splice(r,0,o)}}var AO,_F;function Mue(){if(_F)return AO;_F=1;function n(e){for(var t=5381,i=e.length;i;)t=t*33^e.charCodeAt(--i);return t>>>0}return AO=n,AO}var wue=Mue();const xF=Xl(wue);var ff=Uint8Array,w_=Uint16Array,Sue=Int32Array,fZ=new ff([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),pZ=new ff([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Eue=new ff([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),mZ=function(n,e){for(var t=new w_(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new Sue(t[30]),i=1;i<30;++i)for(var o=t[i];o<t[i+1];++o)r[o]=o-t[i]<<5|i;return{b:t,r}},gZ=mZ(fZ,2),yZ=gZ.b,Oue=gZ.r;yZ[28]=258,Oue[258]=28;var Bue=mZ(pZ,0),Iue=Bue.b,n9=new w_(32768);for(var ul=0;ul<32768;++ul){var my=(ul&43690)>>1|(ul&21845)<<1;my=(my&52428)>>2|(my&13107)<<2,my=(my&61680)>>4|(my&3855)<<4,n9[ul]=((my&65280)>>8|(my&255)<<8)>>1}var r3=(function(n,e,t){for(var i=n.length,r=0,o=new w_(e);r<i;++r)n[r]&&++o[n[r]-1];var s=new w_(e);for(r=1;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var a;if(t){a=new w_(1<<e);var c=15-e;for(r=0;r<i;++r)if(n[r])for(var h=r<<4|n[r],m=e-n[r],y=s[n[r]-1]++<<m,M=y|(1<<m)-1;y<=M;++y)a[n9[y]>>c]=h}else for(a=new w_(i),r=0;r<i;++r)n[r]&&(a[r]=n9[s[n[r]-1]++]>>15-n[r]);return a}),Q4=new ff(288);for(var ul=0;ul<144;++ul)Q4[ul]=8;for(var ul=144;ul<256;++ul)Q4[ul]=9;for(var ul=256;ul<280;++ul)Q4[ul]=7;for(var ul=280;ul<288;++ul)Q4[ul]=8;var vZ=new ff(32);for(var ul=0;ul<32;++ul)vZ[ul]=5;var kue=r3(Q4,9,1),Tue=r3(vZ,5,1),hO=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},jp=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},dO=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Rue=function(n){return(n+7)/8|0},Due=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new ff(n.subarray(e,t))},Pue=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],cf=function(n,e,t){var i=new Error(e||Pue[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,cf),!t)throw i;return i},ND=function(n,e,t,i){var r=n.length,o=0;if(!r||e.f&&!e.l)return t||new ff(0);var s=!t,a=s||e.i!=2,c=e.i;s&&(t=new ff(r*3));var h=function(Ne){var ut=t.length;if(Ne>ut){var rt=new ff(Math.max(ut*2,Ne));rt.set(t),t=rt}},m=e.f||0,y=e.p||0,M=e.b||0,x=e.l,k=e.d,P=e.m,F=e.n,j=r*8;do{if(!x){m=jp(n,y,1);var q=jp(n,y+1,3);if(y+=3,q)if(q==1)x=kue,k=Tue,P=9,F=5;else if(q==2){var Y=jp(n,y,31)+257,z=jp(n,y+10,15)+4,se=Y+jp(n,y+5,31)+1;y+=14;for(var le=new ff(se),me=new ff(19),de=0;de<z;++de)me[Eue[de]]=jp(n,y+de*3,7);y+=z*3;for(var be=hO(me),Ee=(1<<be)-1,De=r3(me,be,1),de=0;de<se;){var je=De[jp(n,y,Ee)];y+=je&15;var V=je>>4;if(V<16)le[de++]=V;else{var Ie=0,Qe=0;for(V==16?(Qe=3+jp(n,y,3),y+=2,Ie=le[de-1]):V==17?(Qe=3+jp(n,y,7),y+=3):V==18&&(Qe=11+jp(n,y,127),y+=7);Qe--;)le[de++]=Ie}}var et=le.subarray(0,Y),dt=le.subarray(Y);P=hO(et),F=hO(dt),x=r3(et,P,1),k=r3(dt,F,1)}else cf(1);else{var V=Rue(y)+4,H=n[V-4]|n[V-3]<<8,G=V+H;if(G>r){c&&cf(0);break}a&&h(M+H),t.set(n.subarray(V,G),M),e.b=M+=H,e.p=y=G*8,e.f=m;continue}if(y>j){c&&cf(0);break}}a&&h(M+131072);for(var ke=(1<<P)-1,we=(1<<F)-1,ze=y;;ze=y){var Ie=x[dO(n,y)&ke],xe=Ie>>4;if(y+=Ie&15,y>j){c&&cf(0);break}if(Ie||cf(2),xe<256)t[M++]=xe;else if(xe==256){ze=y,x=null;break}else{var At=xe-254;if(xe>264){var de=xe-257,it=fZ[de];At=jp(n,y,(1<<it)-1)+yZ[de],y+=it}var bt=k[dO(n,y)&we],Bt=bt>>4;bt||cf(3),y+=bt&15;var dt=Iue[Bt];if(Bt>3){var it=pZ[Bt];dt+=dO(n,y)&(1<<it)-1,y+=it}if(y>j){c&&cf(0);break}a&&h(M+131072);var Ke=M+At;if(M<dt){var Te=o-dt,Se=Math.min(dt,Ke);for(Te+M<0&&cf(3);M<Se;++M)t[M]=i[Te+M]}for(;M<Ke;++M)t[M]=t[M-dt]}}e.l=x,e.p=ze,e.b=M,e.f=m,x&&(m=1,e.m=P,e.d=k,e.n=F)}while(!m);return M!=t.length&&s?Due(t,0,M):t.subarray(0,M)},Uue=new ff(0),Kue=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&cf(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var i=(e>>3&1)+(e>>4&1);i>0;i-=!n[t++]);return t+(e&2)},Lue=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},Fue=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&cf(6,"invalid zlib data"),(n[1]>>5&1)==1&&cf(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function zue(n,e){return ND(n,{i:2},e,e)}function jue(n,e){var t=Kue(n);return t+8>n.length&&cf(6,"invalid gzip data"),ND(n.subarray(t,-8),{i:2},new ff(Lue(n)),e)}function Nue(n,e){return ND(n.subarray(Fue(n),-4),{i:2},e,e)}function Gue(n,e){return n[0]==31&&n[1]==139&&n[2]==8?jue(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?zue(n,e):Nue(n,e)}var Wue=typeof TextDecoder<"u"&&new TextDecoder,Que=0;try{Wue.decode(Uue,{stream:!0}),Que=1}catch{}var que=Object.defineProperty,o3=Math.pow,da=(n,e)=>que(n,"name",{value:e,configurable:!0}),Qc=(n,e,t)=>new Promise((i,r)=>{var o=c=>{try{a(t.next(c))}catch(h){r(h)}},s=c=>{try{a(t.throw(c))}catch(h){r(h)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});da((n,e)=>{let t=!1,i="",r=L.GridLayer.extend({createTile:da((o,s)=>{let a=document.createElement("img"),c=new AbortController,h=c.signal;return a.cancel=()=>{c.abort()},t||(n.getHeader().then(m=>{m.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):m.tileType===2?i="image/png":m.tileType===3?i="image/jpeg":m.tileType===4?i="image/webp":m.tileType===5&&(i="image/avif")}),t=!0),n.getZxy(o.z,o.x,o.y,h).then(m=>{if(m){let y=new Blob([m.data],{type:i}),M=window.URL.createObjectURL(y);a.src=M,a.cancel=void 0,s(void 0,a)}}).catch(m=>{if(m.name!=="AbortError")throw m}),a},"createTile"),_removeTile:da(function(o){let s=this._tiles[o];s&&(s.el.cancel&&s.el.cancel(),s.el.width=0,s.el.height=0,s.el.deleted=!0,L.DomUtil.remove(s.el),delete this._tiles[o],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(o)}))},"_removeTile")});return new r(e)},"leafletRasterLayer");var Yue=da(n=>(e,t)=>{if(t instanceof AbortController)return n(e,t);let i=new AbortController;return n(e,i).then(r=>t(void 0,r.data,r.cacheControl||"",r.expires||""),r=>t(r)).catch(r=>t(r)),{cancel:da(()=>i.abort(),"cancel")}},"v3compat"),bZ=class{constructor(e){this.tilev4=da((t,i)=>Qc(this,null,function*(){if(t.type==="json"){let x=t.url.substr(10),k=this.tiles.get(x);if(k||(k=new r9(x),this.tiles.set(x,k)),this.metadata)return{data:yield k.getTileJson(t.url)};let P=yield k.getHeader();return(P.minLon>=P.maxLon||P.minLat>=P.maxLat)&&console.error(`Bounds of PMTiles archive ${P.minLon},${P.minLat},${P.maxLon},${P.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:P.minZoom,maxzoom:P.maxZoom,bounds:[P.minLon,P.minLat,P.maxLon,P.maxLat]}}}let r=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),o=t.url.match(r);if(!o)throw new Error("Invalid PMTiles protocol URL");let s=o[1],a=this.tiles.get(s);a||(a=new r9(s),this.tiles.set(s,a));let c=o[2],h=o[3],m=o[4],y=yield a.getHeader(),M=yield a?.getZxy(+c,+h,+m,i.signal);if(M)return{data:new Uint8Array(M.data),cacheControl:M.cacheControl,expires:M.expires};if(y.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=Yue(this.tilev4),this.tiles=new Map,this.metadata=e?.metadata||!1,this.errorOnMissingTile=e?.errorOnMissingTile||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};da(bZ,"Protocol");var $ue=bZ;function CZ(n,e){return(e>>>0)*4294967296+(n>>>0)}da(CZ,"toNum");function _Z(n,e){let t=e.buf,i=t[e.pos++],r=(i&112)>>4;if(i<128||(i=t[e.pos++],r|=(i&127)<<3,i<128)||(i=t[e.pos++],r|=(i&127)<<10,i<128)||(i=t[e.pos++],r|=(i&127)<<17,i<128)||(i=t[e.pos++],r|=(i&127)<<24,i<128)||(i=t[e.pos++],r|=(i&1)<<31,i<128))return CZ(n,r);throw new Error("Expected varint not more than 10 bytes")}da(_Z,"readVarintRemainder");function A_(n){let e=n.buf,t=e[n.pos++],i=t&127;return t<128||(t=e[n.pos++],i|=(t&127)<<7,t<128)||(t=e[n.pos++],i|=(t&127)<<14,t<128)||(t=e[n.pos++],i|=(t&127)<<21,t<128)?i:(t=e[n.pos],i|=(t&15)<<28,_Z(i,n))}da(A_,"readVarint");function GD(n,e,t,i){if(i===0){t===1&&(e[0]=n-1-e[0],e[1]=n-1-e[1]);let r=e[0];e[0]=e[1],e[1]=r}}da(GD,"rotate");function xZ(n,e){let t=o3(2,n),i=e,r=e,o=e,s=[0,0],a=1;for(;a<t;)i=1&o/2,r=1&(o^i),GD(a,s,i,r),s[0]+=a*i,s[1]+=a*r,o=o/4,a*=2;return[n,s[0],s[1]]}da(xZ,"idOnLevel");var Vue=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function MZ(n,e,t){if(n>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>o3(2,n)-1||t>o3(2,n)-1)throw new Error("tile x/y outside zoom level bounds");let i=Vue[n],r=o3(2,n),o=0,s=0,a=0,c=[e,t],h=r/2;for(;h>0;)o=(c[0]&h)>0?1:0,s=(c[1]&h)>0?1:0,a+=h*h*(3*o^s),GD(h,c,o,s),h=h/2;return i+a}da(MZ,"zxyToTileId");function Hue(n){let e=0;for(let t=0;t<27;t++){let i=(1<<t)*(1<<t);if(e+i>n)return xZ(t,n-e);e+=i}throw new Error("Tile zoom level exceeds max safe number limit (26)")}da(Hue,"tileIdToZxy");var Zue=(n=>(n[n.Unknown=0]="Unknown",n[n.None=1]="None",n[n.Gzip=2]="Gzip",n[n.Brotli=3]="Brotli",n[n.Zstd=4]="Zstd",n))(Zue||{});function oE(n,e){return Qc(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream>"u")return Gue(new Uint8Array(n));let t=new Response(n).body;if(!t)throw new Error("Failed to read response stream");let i=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(i).arrayBuffer()}throw new Error("Compression method not supported")})}da(oE,"defaultDecompress");var Xue=(n=>(n[n.Unknown=0]="Unknown",n[n.Mvt=1]="Mvt",n[n.Png=2]="Png",n[n.Jpeg=3]="Jpeg",n[n.Webp=4]="Webp",n[n.Avif=5]="Avif",n))(Xue||{});function wZ(n){return n===1?".mvt":n===2?".png":n===3?".jpg":n===4?".webp":n===5?".avif":""}da(wZ,"tileTypeExt");var Jue=127;function SZ(n,e){let t=0,i=n.length-1;for(;t<=i;){let r=i+t>>1,o=e-n[r].tileId;if(o>0)t=r+1;else if(o<0)i=r-1;else return n[r]}return i>=0&&(n[i].runLength===0||e-n[i].tileId<n[i].runLength)?n[i]:null}da(SZ,"findTile");var ece=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return Qc(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};da(ece,"FileSource");var EZ=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let i="";"navigator"in globalThis&&(i=globalThis.navigator.userAgent||"");let r=i.indexOf("Windows")>-1,o=/Chrome|Chromium|Edg|OPR|Brave/.test(i);this.chromeWindowsNoCache=!1,r&&o&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,i,r){return Qc(this,null,function*(){let o,s;i?s=i:(o=new AbortController,s=o.signal);let a=new Headers(this.customHeaders);a.set("range",`bytes=${e}-${e+t-1}`);let c;this.mustReload?c="reload":this.chromeWindowsNoCache&&(c="no-store");let h=yield fetch(this.url,{signal:s,cache:c,headers:a});if(e===0&&h.status===416){let M=h.headers.get("Content-Range");if(!M||!M.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let x=+M.substr(8);h=yield fetch(this.url,{signal:s,cache:"reload",headers:{range:`bytes=0-${x-1}`}})}let m=h.headers.get("Etag");if(m!=null&&m.startsWith("W/")&&(m=null),h.status===416||r&&m&&m!==r)throw this.mustReload=!0,new i9(`Server returned non-matching ETag ${r} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(h.status>=300)throw new Error(`Bad response code: ${h.status}`);let y=h.headers.get("Content-Length");if(h.status===200&&(!y||+y>t))throw o&&o.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield h.arrayBuffer(),etag:m||void 0,cacheControl:h.headers.get("Cache-Control")||void 0,expires:h.headers.get("Expires")||void 0}})}};da(EZ,"FetchSource");var tce=EZ;function Hf(n,e){let t=n.getUint32(e+4,!0),i=n.getUint32(e+0,!0);return t*o3(2,32)+i}da(Hf,"getUint64");function OZ(n,e){let t=new DataView(n),i=t.getUint8(7);if(i>3)throw new Error(`Archive is spec version ${i} but this library supports up to spec version 3`);return{specVersion:i,rootDirectoryOffset:Hf(t,8),rootDirectoryLength:Hf(t,16),jsonMetadataOffset:Hf(t,24),jsonMetadataLength:Hf(t,32),leafDirectoryOffset:Hf(t,40),leafDirectoryLength:Hf(t,48),tileDataOffset:Hf(t,56),tileDataLength:Hf(t,64),numAddressedTiles:Hf(t,72),numTileEntries:Hf(t,80),numTileContents:Hf(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}da(OZ,"bytesToHeader");function WD(n){let e={buf:new Uint8Array(n),pos:0},t=A_(e),i=[],r=0;for(let o=0;o<t;o++){let s=A_(e);i.push({tileId:r+s,offset:0,length:0,runLength:1}),r+=s}for(let o=0;o<t;o++)i[o].runLength=A_(e);for(let o=0;o<t;o++)i[o].length=A_(e);for(let o=0;o<t;o++){let s=A_(e);s===0&&o>0?i[o].offset=i[o-1].offset+i[o-1].length:i[o].offset=s-1}return i}da(WD,"deserializeIndex");var BZ=class extends Error{};da(BZ,"EtagMismatch");var i9=BZ;function QD(n,e){return Qc(this,null,function*(){let t=yield n.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let i=t.data.slice(0,Jue),r=OZ(i,t.etag),o=t.data.slice(r.rootDirectoryOffset,r.rootDirectoryOffset+r.rootDirectoryLength),s=`${n.getKey()}|${r.etag||""}|${r.rootDirectoryOffset}|${r.rootDirectoryLength}`,a=WD(yield e(o,r.internalCompression));return[r,[s,a.length,a]]})}da(QD,"getHeaderAndRoot");function qD(n,e,t,i,r){return Qc(this,null,function*(){let o=yield n.getBytes(t,i,void 0,r.etag),s=yield e(o.data,r.internalCompression),a=WD(s);if(a.length===0)throw new Error("Empty directory is invalid");return a})}da(qD,"getDirectory");var nce=class{constructor(e=100,t=!0,i=oE){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=i}getHeader(e){return Qc(this,null,function*(){let t=e.getKey(),i=this.cache.get(t);if(i)return i.lastUsed=this.counter++,i.data;let r=yield QD(e,this.decompress);return r[1]&&this.cache.set(r[1][0],{lastUsed:this.counter++,data:r[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:r[0]}),this.prune(),r[0]})}getDirectory(e,t,i,r){return Qc(this,null,function*(){let o=`${e.getKey()}|${r.etag||""}|${t}|${i}`,s=this.cache.get(o);if(s)return s.lastUsed=this.counter++,s.data;let a=yield qD(e,this.decompress,t,i,r);return this.cache.set(o,{lastUsed:this.counter++,data:a}),this.prune(),a})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((i,r)=>{i.lastUsed<e&&(e=i.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e){return Qc(this,null,function*(){this.cache.delete(e.getKey())})}};da(nce,"ResolvedValueCache");var IZ=class{constructor(e=100,t=!0,i=oE){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=i}getHeader(e){return Qc(this,null,function*(){let t=e.getKey(),i=this.cache.get(t);if(i)return i.lastUsed=this.counter++,yield i.data;let r=new Promise((o,s)=>{QD(e,this.decompress).then(a=>{a[1]&&this.cache.set(a[1][0],{lastUsed:this.counter++,data:Promise.resolve(a[1][2])}),o(a[0]),this.prune()}).catch(a=>{s(a)})});return this.cache.set(t,{lastUsed:this.counter++,data:r}),r})}getDirectory(e,t,i,r){return Qc(this,null,function*(){let o=`${e.getKey()}|${r.etag||""}|${t}|${i}`,s=this.cache.get(o);if(s)return s.lastUsed=this.counter++,yield s.data;let a=new Promise((c,h)=>{qD(e,this.decompress,t,i,r).then(m=>{c(m),this.prune()}).catch(m=>{h(m)})});return this.cache.set(o,{lastUsed:this.counter++,data:a}),a})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((i,r)=>{i.lastUsed<e&&(e=i.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e){return Qc(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let i=new Promise((r,o)=>{this.getHeader(e).then(s=>{r(),this.invalidations.delete(t)}).catch(s=>{o(s)})});this.invalidations.set(t,i)})}};da(IZ,"SharedPromiseCache");var ice=IZ,kZ=class{constructor(e,t,i){typeof e=="string"?this.source=new tce(e):this.source=e,i?this.decompress=i:this.decompress=oE,t?this.cache=t:this.cache=new ice}getHeader(){return Qc(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,i,r){return Qc(this,null,function*(){let o=MZ(e,t,i),s=yield this.cache.getHeader(this.source);if(e<s.minZoom||e>s.maxZoom)return;let a=s.rootDirectoryOffset,c=s.rootDirectoryLength;for(let h=0;h<=3;h++){let m=yield this.cache.getDirectory(this.source,a,c,s),y=SZ(m,o);if(y){if(y.runLength>0){let M=yield this.source.getBytes(s.tileDataOffset+y.offset,y.length,r,s.etag);return{data:yield this.decompress(M.data,s.tileCompression),cacheControl:M.cacheControl,expires:M.expires}}a=s.leafDirectoryOffset+y.offset,c=y.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,i,r){return Qc(this,null,function*(){try{return yield this.getZxyAttempt(e,t,i,r)}catch(o){if(o instanceof i9)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,i,r);throw o}})}getMetadataAttempt(){return Qc(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),i=yield this.decompress(t.data,e.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(i))})}getMetadata(){return Qc(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof i9)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return Qc(this,null,function*(){let t=yield this.getHeader(),i=yield this.getMetadata(),r=wZ(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${r}`],vector_layers:i.vector_layers,attribution:i.attribution,description:i.description,name:i.name,version:i.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};da(kZ,"PMTiles");var r9=kZ,rce=8,oce={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sce={"*":{type:"source"}},ace=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],lce={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},uce={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},cce={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Ace={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},hce={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},dce={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},fce={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},pce=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],mce={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},gce={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},yce={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},vce={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},bce={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Cce={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},_ce={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},xce={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Mce={type:"array",value:"*"},wce={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},Sce={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},Ece={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Oce={type:"array",value:"*",minimum:1},Bce={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Ice={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},kce={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},Tce={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},Rce=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],Dce={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},Pce={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Uce={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Kce={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Lce={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Fce={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},zce={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},jce={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Nce={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},Gce={"*":{type:"string"}},us={$version:rce,$root:oce,sources:sce,source:ace,source_vector:lce,source_raster:uce,source_raster_dem:cce,source_geojson:Ace,source_video:hce,source_image:dce,layer:fce,layout:pce,layout_background:mce,layout_fill:gce,layout_circle:yce,layout_heatmap:vce,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:bce,layout_symbol:Cce,layout_raster:_ce,layout_hillshade:xce,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:Mce,filter_operator:wce,geometry_type:Sce,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:Ece,expression:Oce,light:Bce,sky:Ice,terrain:kce,projection:Tce,paint:Rce,paint_fill:Dce,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:Pce,paint_circle:Uce,paint_heatmap:Kce,paint_symbol:Lce,paint_raster:Fce,paint_hillshade:zce,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:jce,transition:Nce,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:Gce};const Wce=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Qce(n,e){const t={};for(const i in n)i!=="ref"&&(t[i]=n[i]);return Wce.forEach(i=>{i in e&&(t[i]=e[i])}),t}function qce(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=Qce(n[t],e[n[t].ref]));return n}function js(n,e){if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!js(n[t],e[t]))return!1;return!0}if(typeof n=="object"&&n!==null&&e!==null){if(typeof e!="object"||Object.keys(n).length!==Object.keys(e).length)return!1;for(const i in n)if(!js(n[i],e[i]))return!1;return!0}return n===e}function Xf(n,e){n.push(e)}function TZ(n,e,t){Xf(t,{command:"addSource",args:[n,e[n]]})}function RZ(n,e,t){Xf(e,{command:"removeSource",args:[n]}),t[n]=!0}function Yce(n,e,t,i){RZ(n,t,i),TZ(n,e,t)}function $ce(n,e,t){let i;for(i in n[t])if(Object.prototype.hasOwnProperty.call(n[t],i)&&i!=="data"&&!js(n[t][i],e[t][i]))return!1;for(i in e[t])if(Object.prototype.hasOwnProperty.call(e[t],i)&&i!=="data"&&!js(n[t][i],e[t][i]))return!1;return!0}function Vce(n,e,t,i){n=n||{},e=e||{};let r;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(Object.prototype.hasOwnProperty.call(e,r)||RZ(r,t,i));for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(Object.prototype.hasOwnProperty.call(n,r)?js(n[r],e[r])||(n[r].type==="geojson"&&e[r].type==="geojson"&&$ce(n,e,r)?Xf(t,{command:"setGeoJSONSourceData",args:[r,e[r].data]}):Yce(r,e,t,i)):TZ(r,e,t))}function K5(n,e,t,i,r,o){n=n||{},e=e||{};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(js(n[s],e[s])||t.push({command:o,args:[i,s,e[s],r]}));for(const s in e)!Object.prototype.hasOwnProperty.call(e,s)||Object.prototype.hasOwnProperty.call(n,s)||js(n[s],e[s])||t.push({command:o,args:[i,s,e[s],r]})}function MF(n){return n.id}function wF(n,e){return n[e.id]=e,n}function Hce(n,e,t){n=n||[],e=e||[];const i=n.map(MF),r=e.map(MF),o=n.reduce(wF,{}),s=e.reduce(wF,{}),a=i.slice(),c=Object.create(null);let h,m,y,M,x;for(let k=0,P=0;k<i.length;k++)h=i[k],Object.prototype.hasOwnProperty.call(s,h)?P++:(Xf(t,{command:"removeLayer",args:[h]}),a.splice(a.indexOf(h,P),1));for(let k=0,P=0;k<r.length;k++)h=r[r.length-1-k],a[a.length-1-k]!==h&&(Object.prototype.hasOwnProperty.call(o,h)?(Xf(t,{command:"removeLayer",args:[h]}),a.splice(a.lastIndexOf(h,a.length-P),1)):P++,M=a[a.length-k],Xf(t,{command:"addLayer",args:[s[h],M]}),a.splice(a.length-k,0,h),c[h]=!0);for(let k=0;k<r.length;k++)if(h=r[k],m=o[h],y=s[h],!(c[h]||js(m,y))){if(!js(m.source,y.source)||!js(m["source-layer"],y["source-layer"])||!js(m.type,y.type)){Xf(t,{command:"removeLayer",args:[h]}),M=a[a.lastIndexOf(h)+1],Xf(t,{command:"addLayer",args:[y,M]});continue}K5(m.layout,y.layout,t,h,null,"setLayoutProperty"),K5(m.paint,y.paint,t,h,null,"setPaintProperty"),js(m.filter,y.filter)||Xf(t,{command:"setFilter",args:[h,y.filter]}),(!js(m.minzoom,y.minzoom)||!js(m.maxzoom,y.maxzoom))&&Xf(t,{command:"setLayerZoomRange",args:[h,y.minzoom,y.maxzoom]});for(x in m)Object.prototype.hasOwnProperty.call(m,x)&&(x==="layout"||x==="paint"||x==="filter"||x==="metadata"||x==="minzoom"||x==="maxzoom"||(x.indexOf("paint.")===0?K5(m[x],y[x],t,h,x.slice(6),"setPaintProperty"):js(m[x],y[x])||Xf(t,{command:"setLayerProperty",args:[h,x,y[x]]})));for(x in y)!Object.prototype.hasOwnProperty.call(y,x)||Object.prototype.hasOwnProperty.call(m,x)||x==="layout"||x==="paint"||x==="filter"||x==="metadata"||x==="minzoom"||x==="maxzoom"||(x.indexOf("paint.")===0?K5(m[x],y[x],t,h,x.slice(6),"setPaintProperty"):js(m[x],y[x])||Xf(t,{command:"setLayerProperty",args:[h,x,y[x]]}))}}function Zce(n,e){if(!n)return[{command:"setStyle",args:[e]}];let t=[];try{if(!js(n.version,e.version))return[{command:"setStyle",args:[e]}];js(n.center,e.center)||t.push({command:"setCenter",args:[e.center]}),js(n.state,e.state)||t.push({command:"setGlobalState",args:[e.state]}),js(n.centerAltitude,e.centerAltitude)||t.push({command:"setCenterAltitude",args:[e.centerAltitude]}),js(n.zoom,e.zoom)||t.push({command:"setZoom",args:[e.zoom]}),js(n.bearing,e.bearing)||t.push({command:"setBearing",args:[e.bearing]}),js(n.pitch,e.pitch)||t.push({command:"setPitch",args:[e.pitch]}),js(n.roll,e.roll)||t.push({command:"setRoll",args:[e.roll]}),js(n.sprite,e.sprite)||t.push({command:"setSprite",args:[e.sprite]}),js(n.glyphs,e.glyphs)||t.push({command:"setGlyphs",args:[e.glyphs]}),js(n.transition,e.transition)||t.push({command:"setTransition",args:[e.transition]}),js(n.light,e.light)||t.push({command:"setLight",args:[e.light]}),js(n.terrain,e.terrain)||t.push({command:"setTerrain",args:[e.terrain]}),js(n.sky,e.sky)||t.push({command:"setSky",args:[e.sky]}),js(n.projection,e.projection)||t.push({command:"setProjection",args:[e.projection]});const i={},r=[];Vce(n.sources,e.sources,r,i);const o=[];n.layers&&n.layers.forEach(s=>{"source"in s&&i[s.source]?t.push({command:"removeLayer",args:[s.id]}):o.push(s)}),t=t.concat(r),Hce(o,e.layers,t)}catch(i){console.warn("Unable to compute style diff:",i),t=[{command:"setStyle",args:[e]}]}return t}class qn{constructor(e,t,i,r){this.message=(e?`${e}: `:"")+i,r&&(this.identifier=r),t!=null&&t.__line__&&(this.line=t.__line__)}}function ox(n,...e){for(const t of e)for(const i in t)n[i]=t[i];return n}let pg=class extends Error{constructor(e,t){super(t),this.message=t,this.key=e}},Xce=class DZ{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[i,r]of t)this.bindings[i]=r}concat(e){return new DZ(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}};const sE={kind:"null"},ti={kind:"number"},Mo={kind:"string"},co={kind:"boolean"},Bg={kind:"color"},aE={kind:"projectionDefinition"},bb={kind:"object"},eo={kind:"value"},Jce={kind:"error"},lE={kind:"collator"},uE={kind:"formatted"},cE={kind:"padding"},P3={kind:"colorArray"},AE={kind:"numberArray"},q4={kind:"resolvedImage"},hE={kind:"variableAnchorOffsetCollection"};function pf(n,e){return{kind:"array",itemType:n,N:e}}function xl(n){if(n.kind==="array"){const e=xl(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const eAe=[sE,ti,Mo,co,Bg,aE,uE,bb,pf(eo),cE,AE,P3,q4,hE];function U3(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!U3(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of eAe)if(!U3(t,e))return null}}return`Expected ${xl(n)} but found ${xl(e)} instead.`}function YD(n,e){return e.some(t=>t.kind===n.kind)}function Cb(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function gy(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const PZ=.96422,UZ=1,KZ=.82521,LZ=4/29,U_=6/29,FZ=3*U_*U_,tAe=U_*U_*U_,nAe=Math.PI/180,iAe=180/Math.PI;function zZ(n){return n=n%360,n<0&&(n+=360),n}function jZ([n,e,t,i]){n=fO(n),e=fO(e),t=fO(t);let r,o;const s=pO((.2225045*n+.7168786*e+.0606169*t)/UZ);n===e&&e===t?r=o=s:(r=pO((.4360747*n+.3850649*e+.1430804*t)/PZ),o=pO((.0139322*n+.0971045*e+.7141733*t)/KZ));const a=116*s-16;return[a<0?0:a,500*(r-s),200*(s-o),i]}function fO(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function pO(n){return n>tAe?Math.pow(n,1/3):n/FZ+LZ}function NZ([n,e,t,i]){let r=(n+16)/116,o=isNaN(e)?r:r+e/500,s=isNaN(t)?r:r-t/200;return r=UZ*gO(r),o=PZ*gO(o),s=KZ*gO(s),[mO(3.1338561*o-1.6168667*r-.4906146*s),mO(-.9787684*o+1.9161415*r+.033454*s),mO(.0719453*o-.2289914*r+1.4052427*s),i]}function mO(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function gO(n){return n>U_?n*n*n:FZ*(n-LZ)}function rAe(n){const[e,t,i,r]=jZ(n),o=Math.sqrt(t*t+i*i);return[Math.round(o*1e4)?zZ(Math.atan2(i,t)*iAe):NaN,o,e,r]}function oAe([n,e,t,i]){return n=isNaN(n)?0:n*nAe,NZ([t,Math.cos(n)*e,Math.sin(n)*e,i])}function sAe([n,e,t,i]){n=zZ(n),e/=100,t/=100;function r(o){const s=(o+n/30)%12,a=e*Math.min(t,1-t);return t-a*Math.max(-1,Math.min(s-3,9-s,1))}return[r(0),r(8),r(4),i]}const aAe=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function s3(n,e){return aAe(n,e)?n[e]:void 0}function lAe(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=s3(uAe,n);if(e){const[r,o,s]=e;return[r/255,o/255,s/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const o=n.length<6?1:2;let s=1;return[L5(n.slice(s,s+=o)),L5(n.slice(s,s+=o)),L5(n.slice(s,s+=o)),L5(n.slice(s,s+o)||"ff")]}if(n.startsWith("rgb")){const r=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=n.match(r);if(o){const[s,a,c,h,m,y,M,x,k,P,F,j]=o,q=[h||" ",M||" ",P].join("");if(q==="  "||q==="  /"||q===",,"||q===",,,"){const V=[c,y,k].join(""),H=V==="%%%"?100:V===""?255:0;if(H){const G=[h_(+a/H,0,1),h_(+m/H,0,1),h_(+x/H,0,1),F?SF(+F,j):1];if(EF(G))return G}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=n.match(t);if(i){const[r,o,s,a,c,h,m,y,M]=i,x=[s||" ",c||" ",m].join("");if(x==="  "||x==="  /"||x===",,"||x===",,,"){const k=[+o,h_(+a,0,100),h_(+h,0,100),y?SF(+y,M):1];if(EF(k))return sAe(k)}}}function L5(n){return parseInt(n.padEnd(2,n),16)/255}function SF(n,e){return h_(e?n/100:n,0,1)}function h_(n,e,t){return Math.min(Math.max(e,n),t)}function EF(n){return!n.some(Number.isNaN)}const uAe={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Yy(n,e,t){return n+t*(e-n)}function sx(n,e,t){return n.map((i,r)=>Yy(i,e[r],t))}function cAe(n){return n==="rgb"||n==="hcl"||n==="lab"}let fa=class d_{constructor(e,t,i,r=1,o=!0){this.r=e,this.g=t,this.b=i,this.a=r,o||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[e,t,i,r]))}static parse(e){if(e instanceof d_)return e;if(typeof e!="string")return;const t=lAe(e);if(t)return new d_(...t,!1)}get rgb(){const{r:e,g:t,b:i,a:r}=this,o=r||1/0;return this.overwriteGetter("rgb",[e/o,t/o,i/o,r])}get hcl(){return this.overwriteGetter("hcl",rAe(this.rgb))}get lab(){return this.overwriteGetter("lab",jZ(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,i,r]=this.rgb;return`rgba(${[e,t,i].map(o=>Math.round(o*255)).join(",")},${r})`}static interpolate(e,t,i,r="rgb"){switch(r){case"rgb":{const[o,s,a,c]=sx(e.rgb,t.rgb,i);return new d_(o,s,a,c,!1)}case"hcl":{const[o,s,a,c]=e.hcl,[h,m,y,M]=t.hcl;let x,k;if(!isNaN(o)&&!isNaN(h)){let V=h-o;h>o&&V>180?V-=360:h<o&&o-h>180&&(V+=360),x=o+i*V}else isNaN(o)?isNaN(h)?x=NaN:(x=h,(a===1||a===0)&&(k=m)):(x=o,(y===1||y===0)&&(k=s));const[P,F,j,q]=oAe([x,k??Yy(s,m,i),Yy(a,y,i),Yy(c,M,i)]);return new d_(P,F,j,q,!1)}case"lab":{const[o,s,a,c]=NZ(sx(e.lab,t.lab,i));return new d_(o,s,a,c,!1)}}}};fa.black=new fa(0,0,0,1);fa.white=new fa(1,1,1,1);fa.transparent=new fa(0,0,0,0);fa.red=new fa(1,0,0,1);let $D=class{constructor(e,t,i){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}};const AAe=["bottom","center","top"];let o9=class{constructor(e,t,i,r,o,s){this.text=e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=o,this.verticalAlign=s}},Bx=class ew{constructor(e){this.sections=e}static fromString(e){return new ew([new o9(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof ew?e:ew.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}},Qg=class R2{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof R2)return e;if(typeof e=="number")return new R2([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new R2(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new R2(sx(e.values,t.values,i))}},qg=class D2{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof D2)return e;if(typeof e=="number")return new D2([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new D2(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new D2(sx(e.values,t.values,i))}},cp=class P2{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof P2)return e;if(typeof e=="string"){const i=fa.parse(e);return i?new P2([i]):void 0}if(!Array.isArray(e))return;const t=[];for(const i of e){if(typeof i!="string")return;const r=fa.parse(i);if(!r)return;t.push(r)}return new P2(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i,r="rgb"){const o=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let s=0;s<e.values.length;s++)o.push(fa.interpolate(e.values[s],t.values[s],i,r));return new P2(o)}},Rl=class extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}};const hAe=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);let lv=class tw{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof tw)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const i=e[t],r=e[t+1];if(typeof i!="string"||!hAe.has(i)||!Array.isArray(r)||r.length!==2||typeof r[0]!="number"||typeof r[1]!="number")return}return new tw(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){const r=e.values,o=t.values;if(r.length!==o.length)throw new Rl(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const s=[];for(let a=0;a<r.length;a+=2){if(r[a]!==o[a])throw new Rl(`Cannot interpolate values containing mismatched anchors. from[${a}]: ${r[a]}, to[${a}]: ${o[a]}`);s.push(r[a]);const[c,h]=r[a+1],[m,y]=o[a+1];s.push([Yy(c,m,i),Yy(h,y,i)])}return new tw(s)}},Yb=class GZ{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new GZ({name:e,available:!1}):null}},Ix=class f_{constructor(e,t,i){this.from=e,this.to=t,this.transition=i}static interpolate(e,t,i){return new f_(e,t,i)}static parse(e){if(e instanceof f_)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new f_(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new f_(e.from,e.to,e.transition);if(typeof e=="string")return new f_(e,e,1)}};function WZ(n,e,t,i){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[n,e,t,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[n,e,t,i]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function K3(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof Ix||n instanceof fa||n instanceof $D||n instanceof Bx||n instanceof Qg||n instanceof qg||n instanceof cp||n instanceof lv||n instanceof Yb)return!0;if(Array.isArray(n)){for(const e of n)if(!K3(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!K3(n[e]))return!1;return!0}else return!1}function qu(n){if(n===null)return sE;if(typeof n=="string")return Mo;if(typeof n=="boolean")return co;if(typeof n=="number")return ti;if(n instanceof fa)return Bg;if(n instanceof Ix)return aE;if(n instanceof $D)return lE;if(n instanceof Bx)return uE;if(n instanceof Qg)return cE;if(n instanceof qg)return AE;if(n instanceof cp)return P3;if(n instanceof lv)return hE;if(n instanceof Yb)return q4;if(Array.isArray(n)){const e=n.length;let t;for(const i of n){const r=qu(i);if(!t)t=r;else{if(t===r)continue;t=eo;break}}return pf(t||eo,e)}else return bb}function a3(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof fa||n instanceof Ix||n instanceof Bx||n instanceof Qg||n instanceof qg||n instanceof cp||n instanceof lv||n instanceof Yb?n.toString():JSON.stringify(n)}let Uw=class QZ{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!K3(e[1]))return t.error("invalid value");const i=e[1];let r=qu(i);const o=t.expectedType;return r.kind==="array"&&r.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(r=o),new QZ(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}};const F5={string:Mo,number:ti,boolean:co,object:bb};let e1=class qZ{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=1,r;const o=e[0];if(o==="array"){let a;if(e.length>2){const h=e[1];if(typeof h!="string"||!(h in F5)||h==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=F5[h],i++}else a=eo;let c;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);c=e[2],i++}r=pf(a,c)}else{if(!F5[o])throw new Error(`Types doesn't contain name = ${o}`);r=F5[o]}const s=[];for(;i<e.length;i++){const a=t.parse(e[i],i,eo);if(!a)return null;s.push(a)}return new qZ(r,s)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(U3(this.type,qu(i))){if(t===this.args.length-1)throw new Rl(`Expected value to be of type ${xl(this.type)}, but found ${xl(qu(i))} instead.`)}else return i}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const OF={"to-boolean":co,"to-color":Bg,"to-number":ti,"to-string":Mo};let S_=class YZ{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(!OF[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");const r=OF[i],o=[];for(let s=1;s<e.length;s++){const a=t.parse(e[s],s,eo);if(!a)return null;o.push(a)}return new YZ(r,o)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,i;for(const r of this.args){if(t=r.evaluate(e),i=null,t instanceof fa)return t;if(typeof t=="string"){const o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&(t.length<3||t.length>4?i=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:i=WZ(t[0],t[1],t[2],t[3]),!i))return new fa(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Rl(i||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const i of this.args){t=i.evaluate(e);const r=Qg.parse(t);if(r)return r}throw new Rl(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=qg.parse(t);if(r)return r}throw new Rl(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=cp.parse(t);if(r)return r}throw new Rl(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const i of this.args){t=i.evaluate(e);const r=lv.parse(t);if(r)return r}throw new Rl(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const i of this.args){if(t=i.evaluate(e),t===null)return 0;const r=Number(t);if(!isNaN(r))return r}throw new Rl(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return Bx.fromString(a3(this.args[0].evaluate(e)));case"resolvedImage":return Yb.fromString(a3(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return a3(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const dAe=["Unknown","Point","LineString","Polygon"];let $Z=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?dAe[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=fa.parse(e),this._parseColorCache.set(e,t)),t}},VZ=class HZ{constructor(e,t,i=[],r,o=new Xce,s=[]){this.registry=e,this.path=i,this.key=i.map(a=>`[${a}]`).join(""),this.scope=o,this.errors=s,this.expectedType=r,this._isConstant=t}parse(e,t,i,r,o={}){return t?this.concat(t,i,r)._parse(e,o):this._parse(e,o)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function i(r,o,s){return s==="assert"?new e1(o,[r]):s==="coerce"?new S_(o,[r]):r}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[r];if(o){let s=o.parse(e,this);if(!s)return null;if(this.expectedType){const a=this.expectedType,c=s.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&c.kind==="value")s=i(s,a,t.typeAnnotation||"assert");else if(a.kind==="projectionDefinition"&&["string","array"].includes(c.kind)||["color","formatted","resolvedImage"].includes(a.kind)&&["value","string"].includes(c.kind)||["padding","numberArray"].includes(a.kind)&&["value","number","array"].includes(c.kind)||a.kind==="colorArray"&&["value","string","array"].includes(c.kind)||a.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(c.kind))s=i(s,a,t.typeAnnotation||"coerce");else if(this.checkSubtype(a,c))return null}if(!(s instanceof Uw)&&s.type.kind!=="resolvedImage"&&this._isConstant(s)){const a=new $Z;try{s=new Uw(s.type,s.evaluate(a))}catch(c){return this.error(c.message),null}}return s}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const r=typeof e=="number"?this.path.concat(e):this.path,o=i?this.scope.concat(i):this.scope;return new HZ(this.registry,this._isConstant,r,t||null,o,this.errors)}error(e,...t){const i=`${this.key}${t.map(r=>`[${r}]`).join("")}`;this.errors.push(new pg(i,e))}checkSubtype(e,t){const i=U3(e,t);return i&&this.error(i),i}},ZZ=class XZ{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let o=1;o<e.length-1;o+=2){const s=e[o];if(typeof s!="string")return t.error(`Expected string, but found ${typeof s} instead.`,o);if(/[^a-zA-Z0-9_]/.test(s))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const a=t.parse(e[o+1],o+1);if(!a)return null;i.push([s,a])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return r?new XZ(i,r):null}outputDefined(){return this.result.outputDefined()}},JZ=class eX{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new eX(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}},fAe=class tX{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,ti),r=t.parse(e[2],2,pf(t.expectedType||eo));if(!i||!r)return null;const o=r.type;return new tX(o.itemType,i,r)}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new Rl(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new Rl(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new Rl(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}},pAe=class nX{constructor(e,t){this.type=co,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,eo),r=t.parse(e[2],2,eo);return!i||!r?null:YD(i.type,[co,Mo,ti,sE,eo])?new nX(i,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${xl(i.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!Cb(t,["boolean","string","number","null"]))throw new Rl(`Expected first argument to be of type boolean, string, number or null, but found ${xl(qu(t))} instead.`);if(!Cb(i,["string","array"]))throw new Rl(`Expected second argument to be of type array or string, but found ${xl(qu(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}},mAe=class s9{constructor(e,t,i){this.type=ti,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,eo),r=t.parse(e[2],2,eo);if(!i||!r)return null;if(!YD(i.type,[co,Mo,ti,sE,eo]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${xl(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,ti);return o?new s9(i,r,o):null}else return new s9(i,r)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!Cb(t,["boolean","string","number","null"]))throw new Rl(`Expected first argument to be of type boolean, string, number or null, but found ${xl(qu(t))} instead.`);let r;if(this.fromIndex&&(r=this.fromIndex.evaluate(e)),Cb(i,["string"])){const o=i.indexOf(t,r);return o===-1?-1:[...i.slice(0,o)].length}else{if(Cb(i,["array"]))return i.indexOf(t,r);throw new Rl(`Expected second argument to be of type array or string, but found ${xl(qu(i))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}},gAe=class iX{constructor(e,t,i,r,o,s){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=o,this.otherwise=s}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let i,r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const o={},s=[];for(let h=2;h<e.length-1;h+=2){let m=e[h];const y=e[h+1];Array.isArray(m)||(m=[m]);const M=t.concat(h);if(m.length===0)return M.error("Expected at least one branch label.");for(const k of m){if(typeof k!="number"&&typeof k!="string")return M.error("Branch labels must be numbers or strings.");if(typeof k=="number"&&Math.abs(k)>Number.MAX_SAFE_INTEGER)return M.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof k=="number"&&Math.floor(k)!==k)return M.error("Numeric branch labels must be integer values.");if(!i)i=qu(k);else if(M.checkSubtype(i,qu(k)))return null;if(typeof o[String(k)]<"u")return M.error("Branch labels must be unique.");o[String(k)]=s.length}const x=t.parse(y,h,r);if(!x)return null;r=r||x.type,s.push(x)}const a=t.parse(e[1],1,eo);if(!a)return null;const c=t.parse(e[e.length-1],e.length-1,r);return!c||a.type.kind!=="value"&&t.concat(1).checkSubtype(i,a.type)?null:new iX(i,r,a,o,s,c)}evaluate(e){const t=this.input.evaluate(e);return(qu(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}},yAe=class rX{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const r=[];for(let s=1;s<e.length-1;s+=2){const a=t.parse(e[s],s,co);if(!a)return null;const c=t.parse(e[s+1],s+1,i);if(!c)return null;r.push([a,c]),i=i||c.type}const o=t.parse(e[e.length-1],e.length-1,i);if(!o)return null;if(!i)throw new Error("Can't infer output type");return new rX(i,r,o)}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}},vAe=class a9{constructor(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,eo),r=t.parse(e[2],2,ti);if(!i||!r)return null;if(!YD(i.type,[pf(eo),Mo,eo]))return t.error(`Expected first argument to be of type array or string, but found ${xl(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,ti);return o?new a9(i.type,i,r,o):null}else return new a9(i.type,i,r)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);let r;if(this.endIndex&&(r=this.endIndex.evaluate(e)),Cb(t,["string"]))return[...t].slice(i,r).join("");if(Cb(t,["array"]))return t.slice(i,r);throw new Rl(`Expected first argument to be of type array or string, but found ${xl(qu(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}};function dE(n,e){const t=n.length-1;let i=0,r=t,o=0,s,a;for(;i<=r;)if(o=Math.floor((i+r)/2),s=n[o],a=n[o+1],s<=e){if(o===t||e<a)return o;i=o+1}else if(s>e)r=o-1;else throw new Rl("Input is not a number.");return 0}let oX=class sX{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,o]of i)this.labels.push(r),this.outputs.push(o)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,ti);if(!i)return null;const r=[];let o=null;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);for(let s=1;s<e.length;s+=2){const a=s===1?-1/0:e[s],c=e[s+1],h=s,m=s+1;if(typeof a!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(r.length&&r[r.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',h);const y=t.parse(c,m,o);if(!y)return null;o=o||y.type,r.push([a,y])}return new sX(o,i,r)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=dE(t,r);return i[s].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function bAe(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yO,BF;function CAe(){if(BF)return yO;BF=1,yO=n;function n(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=r}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,r=0;r<8;r++){var o=this.sampleCurveX(i)-e;if(Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i=i-o/s}var a=0,c=1;for(i=e,r=0;r<20&&(o=this.sampleCurveX(i),!(Math.abs(o-e)<t));r++)e>o?a=i:c=i,i=(c-a)*.5+a;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},yO}var _Ae=CAe(),xAe=bAe(_Ae);let i1=class l9{constructor(e,t,i,r,o){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[s,a]of o)this.labels.push(s),this.outputs.push(a)}static interpolationFactor(e,t,i,r){let o=0;if(e.name==="exponential")o=vO(t,e.base,i,r);else if(e.name==="linear")o=vO(t,1,i,r);else if(e.name==="cubic-bezier"){const s=e.controlPoints;o=new xAe(s[0],s[1],s[2],s[3]).solve(vO(t,1,i,r))}return o}static parse(e,t){let[i,r,o,...s]=e;if(!Array.isArray(r)||r.length===0)return t.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const h=r[1];if(typeof h!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:h}}else if(r[0]==="cubic-bezier"){const h=r.slice(1);if(h.length!==4||h.some(m=>typeof m!="number"||m<0||m>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:h}}else return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(o=t.parse(o,2,ti),!o)return null;const a=[];let c=null;(i==="interpolate-hcl"||i==="interpolate-lab")&&t.expectedType!=P3?c=Bg:t.expectedType&&t.expectedType.kind!=="value"&&(c=t.expectedType);for(let h=0;h<s.length;h+=2){const m=s[h],y=s[h+1],M=h+3,x=h+4;if(typeof m!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(a.length&&a[a.length-1][0]>=m)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',M);const k=t.parse(y,x,c);if(!k)return null;c=c||k.type,a.push([m,k])}return!gy(c,ti)&&!gy(c,aE)&&!gy(c,Bg)&&!gy(c,cE)&&!gy(c,AE)&&!gy(c,P3)&&!gy(c,hE)&&!gy(c,pf(ti))?t.error(`Type ${xl(c)} is not interpolatable.`):new l9(c,i,r,o,a)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=dE(t,r),a=t[s],c=t[s+1],h=l9.interpolationFactor(this.interpolation,r,a,c),m=i[s].evaluate(e),y=i[s+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Yy(m,y,h);case"color":return fa.interpolate(m,y,h);case"padding":return Qg.interpolate(m,y,h);case"colorArray":return cp.interpolate(m,y,h);case"numberArray":return qg.interpolate(m,y,h);case"variableAnchorOffsetCollection":return lv.interpolate(m,y,h);case"array":return sx(m,y,h);case"projectionDefinition":return Ix.interpolate(m,y,h)}case"interpolate-hcl":switch(this.type.kind){case"color":return fa.interpolate(m,y,h,"hcl");case"colorArray":return cp.interpolate(m,y,h,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return fa.interpolate(m,y,h,"lab");case"colorArray":return cp.interpolate(m,y,h,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function vO(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}const MAe={color:fa.interpolate,number:Yy,padding:Qg.interpolate,numberArray:qg.interpolate,colorArray:cp.interpolate,variableAnchorOffsetCollection:lv.interpolate,array:sx};let aX=class u9{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=null;const r=t.expectedType;r&&r.kind!=="value"&&(i=r);const o=[];for(const a of e.slice(1)){const c=t.parse(a,1+o.length,i,void 0,{typeAnnotation:"omit"});if(!c)return null;i=i||c.type,o.push(c)}if(!i)throw new Error("No output type");return r&&o.some(a=>U3(r,a.type))?new u9(eo,o):new u9(i,o)}evaluate(e){let t=null,i=0,r;for(const o of this.args)if(i++,t=o.evaluate(e),t&&t instanceof Yb&&!t.available&&(r||(r=t.name),t=null,i===this.args.length&&(t=r)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};function IF(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function wAe(n,e,t){return e===t}function SAe(n,e,t){return e!==t}function EAe(n,e,t){return e<t}function OAe(n,e,t){return e>t}function BAe(n,e,t){return e<=t}function IAe(n,e,t){return e>=t}function lX(n,e,t,i){return i.compare(e,t)===0}function kAe(n,e,t,i){return!lX(n,e,t,i)}function TAe(n,e,t,i){return i.compare(e,t)<0}function RAe(n,e,t,i){return i.compare(e,t)>0}function DAe(n,e,t,i){return i.compare(e,t)<=0}function PAe(n,e,t,i){return i.compare(e,t)>=0}function kx(n,e,t){const i=n!=="=="&&n!=="!=";return class uX{constructor(o,s,a){this.type=co,this.lhs=o,this.rhs=s,this.collator=a,this.hasUntypedArgument=o.type.kind==="value"||s.type.kind==="value"}static parse(o,s){if(o.length!==3&&o.length!==4)return s.error("Expected two or three arguments.");const a=o[0];let c=s.parse(o[1],1,eo);if(!c)return null;if(!IF(a,c.type))return s.concat(1).error(`"${a}" comparisons are not supported for type '${xl(c.type)}'.`);let h=s.parse(o[2],2,eo);if(!h)return null;if(!IF(a,h.type))return s.concat(2).error(`"${a}" comparisons are not supported for type '${xl(h.type)}'.`);if(c.type.kind!==h.type.kind&&c.type.kind!=="value"&&h.type.kind!=="value")return s.error(`Cannot compare types '${xl(c.type)}' and '${xl(h.type)}'.`);i&&(c.type.kind==="value"&&h.type.kind!=="value"?c=new e1(h.type,[c]):c.type.kind!=="value"&&h.type.kind==="value"&&(h=new e1(c.type,[h])));let m=null;if(o.length===4){if(c.type.kind!=="string"&&h.type.kind!=="string"&&c.type.kind!=="value"&&h.type.kind!=="value")return s.error("Cannot use collator to compare non-string types.");if(m=s.parse(o[3],3,lE),!m)return null}return new uX(c,h,m)}evaluate(o){const s=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(i&&this.hasUntypedArgument){const c=qu(s),h=qu(a);if(c.kind!==h.kind||!(c.kind==="string"||c.kind==="number"))throw new Rl(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${c.kind}, ${h.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const c=qu(s),h=qu(a);if(c.kind!=="string"||h.kind!=="string")return e(o,s,a)}return this.collator?t(o,s,a,this.collator.evaluate(o)):e(o,s,a)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}}}const UAe=kx("==",wAe,lX),KAe=kx("!=",SAe,kAe),LAe=kx("<",EAe,TAe),FAe=kx(">",OAe,RAe),zAe=kx("<=",BAe,DAe),jAe=kx(">=",IAe,PAe);let cX=class AX{constructor(e,t,i){this.type=lE,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");const r=t.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,co);if(!r)return null;const o=t.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,co);if(!o)return null;let s=null;return i.locale&&(s=t.parse(i.locale,1,Mo),!s)?null:new AX(r,o,s)}evaluate(e){return new $D(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}},NAe=class hX{constructor(e,t,i,r,o){this.type=Mo,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=o}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const i=t.parse(e[1],1,ti);if(!i)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let o=null;if(r.locale&&(o=t.parse(r.locale,1,Mo),!o))return null;let s=null;if(r.currency&&(s=t.parse(r.currency,1,Mo),!s))return null;let a=null;if(r["min-fraction-digits"]&&(a=t.parse(r["min-fraction-digits"],1,ti),!a))return null;let c=null;return r["max-fraction-digits"]&&(c=t.parse(r["max-fraction-digits"],1,ti),!c)?null:new hX(i,o,s,a,c)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}},GAe=class dX{constructor(e){this.type=uE,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");const r=[];let o=!1;for(let s=1;s<=e.length-1;++s){const a=e[s];if(o&&typeof a=="object"&&!Array.isArray(a)){o=!1;let c=null;if(a["font-scale"]&&(c=t.parse(a["font-scale"],1,ti),!c))return null;let h=null;if(a["text-font"]&&(h=t.parse(a["text-font"],1,pf(Mo)),!h))return null;let m=null;if(a["text-color"]&&(m=t.parse(a["text-color"],1,Bg),!m))return null;let y=null;if(a["vertical-align"]){if(typeof a["vertical-align"]=="string"&&!AAe.includes(a["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${a["vertical-align"]}' instead.`);if(y=t.parse(a["vertical-align"],1,Mo),!y)return null}const M=r[r.length-1];M.scale=c,M.font=h,M.textColor=m,M.verticalAlign=y}else{const c=t.parse(e[s],1,eo);if(!c)return null;const h=c.type.kind;if(h!=="string"&&h!=="value"&&h!=="null"&&h!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,r.push({content:c,scale:null,font:null,textColor:null,verticalAlign:null})}}return new dX(r)}evaluate(e){const t=i=>{const r=i.content.evaluate(e);return qu(r)===q4?new o9("",r,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(e):null):new o9(a3(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null,i.verticalAlign?i.verticalAlign.evaluate(e):null)};return new Bx(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}},WAe=class fX{constructor(e){this.type=q4,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const i=t.parse(e[1],1,Mo);return i?new fX(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=Yb.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}},QAe=class pX{constructor(e){this.type=ti,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${xl(i.type)} instead.`):new pX(i):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new Rl(`Expected value to be of type string or array, but found ${xl(qu(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}};const Ig=8192;function qAe(n,e){const t=YAe(n[0]),i=VAe(n[1]),r=Math.pow(2,e.z);return[Math.round(t*r*Ig),Math.round(i*r*Ig)]}function VD(n,e){const t=Math.pow(2,e.z),i=(n[0]/Ig+e.x)/t,r=(n[1]/Ig+e.y)/t;return[$Ae(i),HAe(r)]}function YAe(n){return(180+n)/360}function $Ae(n){return n*360-180}function VAe(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function HAe(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function Y4(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function L3(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function ZAe(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function XAe(n,e,t){const i=n[0]-e[0],r=n[1]-e[1],o=n[0]-t[0],s=n[1]-t[1];return i*s-o*r===0&&i*o<=0&&r*s<=0}function fE(n,e,t,i){const r=[e[0]-n[0],e[1]-n[1]],o=[i[0]-t[0],i[1]-t[1]];return nhe(o,r)===0?!1:!!(kF(n,e,t,i)&&kF(t,i,n,e))}function JAe(n,e,t){for(const i of t)for(let r=0;r<i.length-1;++r)if(fE(n,e,i[r],i[r+1]))return!0;return!1}function Tx(n,e,t=!1){let i=!1;for(const r of e)for(let o=0;o<r.length-1;o++){if(XAe(n,r[o],r[o+1]))return t;ZAe(n,r[o],r[o+1])&&(i=!i)}return i}function ehe(n,e){for(const t of e)if(Tx(n,t))return!0;return!1}function mX(n,e){for(const t of n)if(!Tx(t,e))return!1;for(let t=0;t<n.length-1;++t)if(JAe(n[t],n[t+1],e))return!1;return!0}function the(n,e){for(const t of e)if(mX(n,t))return!0;return!1}function nhe(n,e){return n[0]*e[1]-n[1]*e[0]}function kF(n,e,t,i){const r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1],c=i[0]-t[0],h=i[1]-t[1],m=r*h-c*o,y=s*h-c*a;return m>0&&y<0||m<0&&y>0}function HD(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=[];for(let s=0;s<n[r].length;s++){const a=qAe(n[r][s],t);Y4(e,a),o.push(a)}i.push(o)}return i}function gX(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=HD(n[r],e,t);i.push(o)}return i}function yX(n,e,t,i){if(n[0]<t[0]||n[0]>t[2]){const r=i*.5;let o=n[0]-t[0]>r?-i:t[0]-n[0]>r?i:0;o===0&&(o=n[0]-t[2]>r?-i:t[2]-n[0]>r?i:0),n[0]+=o}Y4(e,n)}function ihe(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function TF(n,e,t,i){const r=Math.pow(2,i.z)*Ig,o=[i.x*Ig,i.y*Ig],s=[];for(const a of n)for(const c of a){const h=[c.x+o[0],c.y+o[1]];yX(h,e,t,r),s.push(h)}return s}function RF(n,e,t,i){const r=Math.pow(2,i.z)*Ig,o=[i.x*Ig,i.y*Ig],s=[];for(const a of n){const c=[];for(const h of a){const m=[h.x+o[0],h.y+o[1]];Y4(e,m),c.push(m)}s.push(c)}if(e[2]-e[0]<=r/2){ihe(e);for(const a of s)for(const c of a)yX(c,e,t,r)}return s}function rhe(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=HD(e.coordinates,i,r),s=TF(n.geometry(),t,i,r);if(!L3(t,i))return!1;for(const a of s)if(!Tx(a,o))return!1}if(e.type==="MultiPolygon"){const o=gX(e.coordinates,i,r),s=TF(n.geometry(),t,i,r);if(!L3(t,i))return!1;for(const a of s)if(!ehe(a,o))return!1}return!0}function ohe(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=HD(e.coordinates,i,r),s=RF(n.geometry(),t,i,r);if(!L3(t,i))return!1;for(const a of s)if(!mX(a,o))return!1}if(e.type==="MultiPolygon"){const o=gX(e.coordinates,i,r),s=RF(n.geometry(),t,i,r);if(!L3(t,i))return!1;for(const a of s)if(!the(a,o))return!1}return!0}let ZD=class nw{constructor(e,t){this.type=co,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(K3(e[1])){const i=e[1];if(i.type==="FeatureCollection"){const r=[];for(const o of i.features){const{type:s,coordinates:a}=o.geometry;s==="Polygon"&&r.push(a),s==="MultiPolygon"&&r.push(...a)}if(r.length){const o={type:"MultiPolygon",coordinates:r};return new nw(i,o)}}else if(i.type==="Feature"){const r=i.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new nw(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new nw(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return rhe(e,this.geometries);if(e.geometryType()==="LineString")return ohe(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}},vX=class{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const o=e-1>>1,s=t[o];if(i(r,s)>=0)break;t[e]=s,e=o}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,o=t[e];for(;e<r;){let s=(e<<1)+1;const a=s+1;if(a<this.length&&i(t[a],t[s])<0&&(s=a),i(t[s],o)>=0)break;t[e]=t[s],e=s}t[e]=o}};function she(n,e){if(n.length<=1)return[n];const i=[];let r,o;for(const s of n){const a=ahe(s);a!==0&&(s.area=Math.abs(a),o===void 0&&(o=a<0),o===a<0?(r&&i.push(r),r=[s]):r.push(s))}return r&&i.push(r),i}function ahe(n){let e=0;for(let t=0,i=n.length,r=i-1,o,s;t<i;r=t++)o=n[t],s=n[r],e+=(s.x-o.x)*(o.y+s.y);return e}const lhe=6378.137,DF=1/298.257223563,PF=DF*(2-DF),UF=Math.PI/180;let XD=class{constructor(e){const t=UF*lhe*1e3,i=Math.cos(e*UF),r=1/(1-PF*(1-i*i)),o=Math.sqrt(r);this.kx=t*o*i,this.ky=t*o*r*(1-PF)}distance(e,t){const i=this.wrap(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.sqrt(i*i+r*r)}pointOnLine(e,t){let i=1/0,r,o,s,a;for(let c=0;c<e.length-1;c++){let h=e[c][0],m=e[c][1],y=this.wrap(e[c+1][0]-h)*this.kx,M=(e[c+1][1]-m)*this.ky,x=0;(y!==0||M!==0)&&(x=(this.wrap(t[0]-h)*this.kx*y+(t[1]-m)*this.ky*M)/(y*y+M*M),x>1?(h=e[c+1][0],m=e[c+1][1]):x>0&&(h+=y/this.kx*x,m+=M/this.ky*x)),y=this.wrap(t[0]-h)*this.kx,M=(t[1]-m)*this.ky;const k=y*y+M*M;k<i&&(i=k,r=h,o=m,s=c,a=x)}return{point:[r,o],index:s,t:Math.max(0,Math.min(1,a))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}};const c9=100,A9=50;function bX(n,e){return e[0]-n[0]}function Kw(n){return n[1]-n[0]+1}function u1(n,e){return n[1]>=n[0]&&n[1]<e}function h9(n,e){if(n[0]>n[1])return[null,null];const t=Kw(n);if(e){if(t===2)return[n,null];const r=Math.floor(t/2);return[[n[0],n[0]+r],[n[0]+r,n[1]]]}if(t===1)return[n,null];const i=Math.floor(t/2)-1;return[[n[0],n[0]+i],[n[0]+i+1,n[1]]]}function d9(n,e){if(!u1(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let i=e[0];i<=e[1];++i)Y4(t,n[i]);return t}function f9(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const i of t)Y4(e,i);return e}function KF(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function JD(n,e,t){if(!KF(n)||!KF(e))return NaN;let i=0,r=0;return n[2]<e[0]&&(i=e[0]-n[2]),n[0]>e[2]&&(i=n[0]-e[2]),n[1]>e[3]&&(r=n[1]-e[3]),n[3]<e[1]&&(r=e[1]-n[3]),t.distance([0,0],[i,r])}function cb(n,e,t){const i=t.pointOnLine(e,n);return t.distance(n,i.point)}function eP(n,e,t,i,r){const o=Math.min(cb(n,[t,i],r),cb(e,[t,i],r)),s=Math.min(cb(t,[n,e],r),cb(i,[n,e],r));return Math.min(o,s)}function uhe(n,e,t,i,r){if(!(u1(e,n.length)&&u1(i,t.length)))return 1/0;let s=1/0;for(let a=e[0];a<e[1];++a){const c=n[a],h=n[a+1];for(let m=i[0];m<i[1];++m){const y=t[m],M=t[m+1];if(fE(c,h,y,M))return 0;s=Math.min(s,eP(c,h,y,M,r))}}return s}function che(n,e,t,i,r){if(!(u1(e,n.length)&&u1(i,t.length)))return NaN;let s=1/0;for(let a=e[0];a<=e[1];++a)for(let c=i[0];c<=i[1];++c)if(s=Math.min(s,r.distance(n[a],t[c])),s===0)return s;return s}function Ahe(n,e,t){if(Tx(n,e,!0))return 0;let i=1/0;for(const r of e){const o=r[0],s=r[r.length-1];if(o!==s&&(i=Math.min(i,cb(n,[s,o],t)),i===0))return i;const a=t.pointOnLine(r,n);if(i=Math.min(i,t.distance(n,a.point)),i===0)return i}return i}function hhe(n,e,t,i){if(!u1(e,n.length))return NaN;for(let o=e[0];o<=e[1];++o)if(Tx(n[o],t,!0))return 0;let r=1/0;for(let o=e[0];o<e[1];++o){const s=n[o],a=n[o+1];for(const c of t)for(let h=0,m=c.length,y=m-1;h<m;y=h++){const M=c[y],x=c[h];if(fE(s,a,M,x))return 0;r=Math.min(r,eP(s,a,M,x,i))}}return r}function LF(n,e){for(const t of n)for(const i of t)if(Tx(i,e,!0))return!0;return!1}function dhe(n,e,t,i=1/0){const r=f9(n),o=f9(e);if(i!==1/0&&JD(r,o,t)>=i)return i;if(L3(r,o)){if(LF(n,e))return 0}else if(LF(e,n))return 0;let s=1/0;for(const a of n)for(let c=0,h=a.length,m=h-1;c<h;m=c++){const y=a[m],M=a[c];for(const x of e)for(let k=0,P=x.length,F=P-1;k<P;F=k++){const j=x[F],q=x[k];if(fE(y,M,j,q))return 0;s=Math.min(s,eP(y,M,j,q,t))}}return s}function FF(n,e,t,i,r,o){if(!o)return;const s=JD(d9(i,o),r,t);s<e&&n.push([s,o,[0,0]])}function z5(n,e,t,i,r,o,s){if(!o||!s)return;const a=JD(d9(i,o),d9(r,s),t);a<e&&n.push([a,o,s])}function Lw(n,e,t,i,r=1/0){let o=Math.min(i.distance(n[0],t[0][0]),r);if(o===0)return o;const s=new vX([[0,[0,n.length-1],[0,0]]],bX),a=f9(t);for(;s.length>0;){const c=s.pop();if(c[0]>=o)continue;const h=c[1],m=e?A9:c9;if(Kw(h)<=m){if(!u1(h,n.length))return NaN;if(e){const y=hhe(n,h,t,i);if(isNaN(y)||y===0)return y;o=Math.min(o,y)}else for(let y=h[0];y<=h[1];++y){const M=Ahe(n[y],t,i);if(o=Math.min(o,M),o===0)return 0}}else{const y=h9(h,e);FF(s,o,i,n,a,y[0]),FF(s,o,i,n,a,y[1])}}return o}function Fw(n,e,t,i,r,o=1/0){let s=Math.min(o,r.distance(n[0],t[0]));if(s===0)return s;const a=new vX([[0,[0,n.length-1],[0,t.length-1]]],bX);for(;a.length>0;){const c=a.pop();if(c[0]>=s)continue;const h=c[1],m=c[2],y=e?A9:c9,M=i?A9:c9;if(Kw(h)<=y&&Kw(m)<=M){if(!u1(h,n.length)&&u1(m,t.length))return NaN;let x;if(e&&i)x=uhe(n,h,t,m,r),s=Math.min(s,x);else if(e&&!i){const k=n.slice(h[0],h[1]+1);for(let P=m[0];P<=m[1];++P)if(x=cb(t[P],k,r),s=Math.min(s,x),s===0)return s}else if(!e&&i){const k=t.slice(m[0],m[1]+1);for(let P=h[0];P<=h[1];++P)if(x=cb(n[P],k,r),s=Math.min(s,x),s===0)return s}else x=che(n,h,t,m,r),s=Math.min(s,x)}else{const x=h9(h,e),k=h9(m,i);z5(a,s,r,n,t,x[0],k[0]),z5(a,s,r,n,t,x[0],k[1]),z5(a,s,r,n,t,x[1],k[0]),z5(a,s,r,n,t,x[1],k[1])}}return s}function fhe(n,e){const t=n.geometry(),i=t.flat().map(s=>VD([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new XD(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,Fw(i,!1,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,Fw(i,!1,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,Lw(i,!1,s.coordinates,r,o));break}if(o===0)return o}return o}function phe(n,e){const t=n.geometry(),i=t.flat().map(s=>VD([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new XD(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,Fw(i,!0,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,Fw(i,!0,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,Lw(i,!0,s.coordinates,r,o));break}if(o===0)return o}return o}function mhe(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const i=she(t).map(s=>s.map(a=>a.map(c=>VD([c.x,c.y],n.canonical)))),r=new XD(i[0][0][0][1]);let o=1/0;for(const s of e)for(const a of i){switch(s.type){case"Point":o=Math.min(o,Lw([s.coordinates],!1,a,r,o));break;case"LineString":o=Math.min(o,Lw(s.coordinates,!0,a,r,o));break;case"Polygon":o=Math.min(o,dhe(a,s.coordinates,r,o));break}if(o===0)return o}return o}function bO(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}let tP=class iw{constructor(e,t){this.type=ti,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(K3(e[1])){const i=e[1];if(i.type==="FeatureCollection")return new iw(i,i.features.map(r=>bO(r.geometry)).flat());if(i.type==="Feature")return new iw(i,bO(i.geometry));if("type"in i&&"coordinates"in i)return new iw(i,bO(i))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return fhe(e,this.geometries);if(e.geometryType()==="LineString")return phe(e,this.geometries);if(e.geometryType()==="Polygon")return mhe(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}},nP=class CX{constructor(e){this.type=eo,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=e[1];return i==null?t.error("Global state property must be defined."):typeof i!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new CX(i)}evaluate(e){var t;const i=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!i||Object.keys(i).length===0?null:s3(i,this.key)}eachChild(){}outputDefined(){return!1}};const iP={"==":UAe,"!=":KAe,">":FAe,"<":LAe,">=":jAe,"<=":zAe,array:e1,at:fAe,boolean:e1,case:yAe,coalesce:aX,collator:cX,format:GAe,image:WAe,in:pAe,"index-of":mAe,interpolate:i1,"interpolate-hcl":i1,"interpolate-lab":i1,length:QAe,let:ZZ,literal:Uw,match:gAe,number:e1,"number-format":NAe,object:e1,slice:vAe,step:oX,string:e1,"to-boolean":S_,"to-color":S_,"to-number":S_,"to-string":S_,var:JZ,within:ZD,distance:tP,"global-state":nP};let Rx=class U2{constructor(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const i=e[0],r=U2.definitions[i];if(!r)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(r)?r[0]:r.type,s=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=s.filter(([h])=>!Array.isArray(h)||h.length===e.length-1);let c=null;for(const[h,m]of a){c=new VZ(t.registry,zw,t.path,null,t.scope);const y=[];let M=!1;for(let x=1;x<e.length;x++){const k=e[x],P=Array.isArray(h)?h[x-1]:h.type,F=c.parse(k,1+y.length,P);if(!F){M=!0;break}y.push(F)}if(!M){if(Array.isArray(h)&&h.length!==y.length){c.error(`Expected ${h.length} arguments, but found ${y.length} instead.`);continue}for(let x=0;x<y.length;x++){const k=Array.isArray(h)?h[x]:h.type,P=y[x];c.concat(x+1).checkSubtype(k,P.type)}if(c.errors.length===0)return new U2(i,o,m,y)}}if(a.length===1)t.errors.push(...c.errors);else{const m=(a.length?a:s).map(([M])=>yhe(M)).join(" | "),y=[];for(let M=1;M<e.length;M++){const x=t.parse(e[M],1+y.length);if(!x)return null;y.push(xl(x.type))}t.error(`Expected arguments of type ${m}, but found (${y.join(", ")}) instead.`)}return null}static register(e,t){U2.definitions=t;for(const i in t)e[i]=U2}};function zF(n,[e,t,i,r]){e=e.evaluate(n),t=t.evaluate(n),i=i.evaluate(n);const o=r?r.evaluate(n):1,s=WZ(e,t,i,o);if(s)throw new Rl(s);return new fa(e/255,t/255,i/255,o,!1)}function jF(n,e){return n in e}function CO(n,e){const t=e[n];return typeof t>"u"?null:t}function ghe(n,e,t,i){for(;t<=i;){const r=t+i>>1;if(e[r]===n)return!0;e[r]>n?i=r-1:t=r+1}return!1}function $v(n){return{type:n}}Rx.register(iP,{error:[Jce,[Mo],(n,[e])=>{throw new Rl(e.evaluate(n))}],typeof:[Mo,[eo],(n,[e])=>xl(qu(e.evaluate(n)))],"to-rgba":[pf(ti,4),[Bg],(n,[e])=>{const[t,i,r,o]=e.evaluate(n).rgb;return[t*255,i*255,r*255,o]}],rgb:[Bg,[ti,ti,ti],zF],rgba:[Bg,[ti,ti,ti,ti],zF],has:{type:co,overloads:[[[Mo],(n,[e])=>jF(e.evaluate(n),n.properties())],[[Mo,bb],(n,[e,t])=>jF(e.evaluate(n),t.evaluate(n))]]},get:{type:eo,overloads:[[[Mo],(n,[e])=>CO(e.evaluate(n),n.properties())],[[Mo,bb],(n,[e,t])=>CO(e.evaluate(n),t.evaluate(n))]]},"feature-state":[eo,[Mo],(n,[e])=>CO(e.evaluate(n),n.featureState||{})],properties:[bb,[],n=>n.properties()],"geometry-type":[Mo,[],n=>n.geometryType()],id:[eo,[],n=>n.id()],zoom:[ti,[],n=>n.globals.zoom],"heatmap-density":[ti,[],n=>n.globals.heatmapDensity||0],elevation:[ti,[],n=>n.globals.elevation||0],"line-progress":[ti,[],n=>n.globals.lineProgress||0],accumulated:[eo,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[ti,$v(ti),(n,e)=>{let t=0;for(const i of e)t+=i.evaluate(n);return t}],"*":[ti,$v(ti),(n,e)=>{let t=1;for(const i of e)t*=i.evaluate(n);return t}],"-":{type:ti,overloads:[[[ti,ti],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[ti],(n,[e])=>-e.evaluate(n)]]},"/":[ti,[ti,ti],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[ti,[ti,ti],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[ti,[],()=>Math.LN2],pi:[ti,[],()=>Math.PI],e:[ti,[],()=>Math.E],"^":[ti,[ti,ti],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[ti,[ti],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[ti,[ti],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[ti,[ti],(n,[e])=>Math.log(e.evaluate(n))],log2:[ti,[ti],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[ti,[ti],(n,[e])=>Math.sin(e.evaluate(n))],cos:[ti,[ti],(n,[e])=>Math.cos(e.evaluate(n))],tan:[ti,[ti],(n,[e])=>Math.tan(e.evaluate(n))],asin:[ti,[ti],(n,[e])=>Math.asin(e.evaluate(n))],acos:[ti,[ti],(n,[e])=>Math.acos(e.evaluate(n))],atan:[ti,[ti],(n,[e])=>Math.atan(e.evaluate(n))],min:[ti,$v(ti),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[ti,$v(ti),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[ti,[ti],(n,[e])=>Math.abs(e.evaluate(n))],round:[ti,[ti],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[ti,[ti],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[ti,[ti],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[co,[Mo,eo],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[co,[eo],(n,[e])=>n.id()===e.value],"filter-type-==":[co,[Mo],(n,[e])=>n.geometryType()===e.value],"filter-<":[co,[Mo,eo],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<r}],"filter-id-<":[co,[eo],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<i}],"filter->":[co,[Mo,eo],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>r}],"filter-id->":[co,[eo],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>i}],"filter-<=":[co,[Mo,eo],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[co,[eo],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<=i}],"filter->=":[co,[Mo,eo],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[co,[eo],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>=i}],"filter-has":[co,[eo],(n,[e])=>e.value in n.properties()],"filter-has-id":[co,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[co,[pf(Mo)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[co,[pf(eo)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[co,[Mo,pf(eo)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[co,[Mo,pf(eo)],(n,[e,t])=>ghe(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:co,overloads:[[[co,co],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[$v(co),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:co,overloads:[[[co,co],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[$v(co),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[co,[co],(n,[e])=>!e.evaluate(n)],"is-supported-script":[co,[Mo],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[Mo,[Mo],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[Mo,[Mo],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[Mo,$v(eo),(n,e)=>e.map(t=>a3(t.evaluate(n))).join("")],"resolved-locale":[Mo,[lE],(n,[e])=>e.evaluate(n).resolvedLocale()]});function yhe(n){return Array.isArray(n)?`(${n.map(xl).join(", ")})`:`(${xl(n.type)}...)`}function zw(n){if(n instanceof JZ)return zw(n.boundExpression);if(n instanceof Rx&&n.name==="error")return!1;if(n instanceof cX)return!1;if(n instanceof ZD)return!1;if(n instanceof tP)return!1;if(n instanceof nP)return!1;const e=n instanceof S_||n instanceof e1;let t=!0;return n.eachChild(i=>{e?t=t&&zw(i):t=t&&i instanceof Uw}),t?pE(n)&&mE(n,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function pE(n){if(n instanceof Rx){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof ZD||n instanceof tP)return!1;let e=!0;return n.eachChild(t=>{e&&!pE(t)&&(e=!1)}),e}function F3(n){if(n instanceof Rx&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!F3(t)&&(e=!1)}),e}function mE(n,e){if(n instanceof Rx&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(i=>{t&&!mE(i,e)&&(t=!1)}),t}function p9(n){return{result:"success",value:n}}function p_(n){return{result:"error",value:n}}function jw(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function _X(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function rP(n){return!!n.expression&&n.expression.interpolated}function So(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function $4(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&qu(n)===bb}function vhe(n){return n}function bhe(n){switch(n.type){case"color":return fa.parse;case"padding":return Qg.parse;case"numberArray":return qg.parse;case"colorArray":return cp.parse;default:return null}}function Che(n){switch(n){case"exponential":return xX;case"interval":return xhe;case"categorical":return _he;case"identity":return Mhe;default:throw new Error(`Unknown function type "${n}"`)}}function oP(n,e){const t=n.stops&&typeof n.stops[0][0]=="object",i=t||n.property!==void 0,r=t||!i,o=n.type||(rP(e)?"exponential":"interval"),s=bhe(e);if(s&&(n=ox({},n),n.stops&&(n.stops=n.stops.map(m=>[m[0],s(m[1])])),n.default?n.default=s(n.default):n.default=s(e.default)),n.colorSpace&&!cAe(n.colorSpace))throw new Error(`Unknown color space: "${n.colorSpace}"`);const a=Che(o);let c,h;if(o==="categorical"){c=Object.create(null);for(const m of n.stops)c[m[0]]=m[1];h=typeof n.stops[0][0]}if(t){const m={},y=[];for(let k=0;k<n.stops.length;k++){const P=n.stops[k],F=P[0].zoom;m[F]===void 0&&(m[F]={zoom:F,type:n.type,property:n.property,default:n.default,stops:[]},y.push(F)),m[F].stops.push([P[0].value,P[1]])}const M=[];for(const k of y)M.push([m[k].zoom,oP(m[k],e)]);const x={name:"linear"};return{kind:"composite",interpolationType:x,interpolationFactor:i1.interpolationFactor.bind(void 0,x),zoomStops:M.map(k=>k[0]),evaluate({zoom:k},P){return xX({stops:M,base:n.base},e,k).evaluate(k,P)}}}else if(r){const m=o==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:m,interpolationFactor:i1.interpolationFactor.bind(void 0,m),zoomStops:n.stops.map(y=>y[0]),evaluate:({zoom:y})=>a(n,e,y,c,h)}}else return{kind:"source",evaluate(m,y){const M=y&&y.properties?y.properties[n.property]:void 0;return M===void 0?V4(n.default,e.default):a(n,e,M,c,h)}}}function V4(n,e,t){if(n!==void 0)return n;if(e!==void 0)return e;if(t!==void 0)return t}function _he(n,e,t,i,r){const o=typeof t===r?i[t]:void 0;return V4(o,n.default,e.default)}function xhe(n,e,t){if(So(t)!=="number")return V4(n.default,e.default);const i=n.stops.length;if(i===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[i-1][0])return n.stops[i-1][1];const r=dE(n.stops.map(o=>o[0]),t);return n.stops[r][1]}function xX(n,e,t){const i=n.base!==void 0?n.base:1;if(So(t)!=="number")return V4(n.default,e.default);const r=n.stops.length;if(r===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[r-1][0])return n.stops[r-1][1];const o=dE(n.stops.map(m=>m[0]),t),s=whe(t,i,n.stops[o][0],n.stops[o+1][0]),a=n.stops[o][1],c=n.stops[o+1][1],h=MAe[e.type]||vhe;return typeof a.evaluate=="function"?{evaluate(...m){const y=a.evaluate.apply(void 0,m),M=c.evaluate.apply(void 0,m);if(!(y===void 0||M===void 0))return h(y,M,s,n.colorSpace)}}:h(a,c,s,n.colorSpace)}function Mhe(n,e,t){switch(e.type){case"color":t=fa.parse(t);break;case"formatted":t=Bx.fromString(t.toString());break;case"resolvedImage":t=Yb.fromString(t.toString());break;case"padding":t=Qg.parse(t);break;case"colorArray":t=cp.parse(t);break;case"numberArray":t=qg.parse(t);break;default:So(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0)}return V4(t,n.default,e.default)}function whe(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}let MX=class{constructor(e,t,i){this.expression=e,this._warningHistory={},this._evaluator=new $Z,this._defaultValue=t?Bhe(t):null,this._enumValues=t&&t.type==="enum"?t.values:null,this._globalState=i}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=ax(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,r,o,s){this._globalState&&(e=ax(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{const a=this.expression.evaluate(this._evaluator);if(a==null||typeof a=="number"&&a!==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new Rl(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,typeof console<"u"&&console.warn(a.message)),this._defaultValue}}};function H4(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in iP}function sP(n,e,t){const i=new VZ(iP,zw,[],e?Ohe(e):void 0),r=i.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?p9(new MX(r,e,t)):p_(i.errors)}let m9=class{constructor(e,t,i){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!F3(t.expression),this.globalStateRefs=lP(t.expression),this._globalState=i}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=ax(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._globalState&&(e=ax(e,this._globalState)),this._styleExpression.evaluate(e,t,i,r,o,s)}},g9=class{constructor(e,t,i,r,o){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!F3(t.expression),this.globalStateRefs=lP(t.expression),this.interpolationType=r,this._globalState=o}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=ax(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._globalState&&(e=ax(e,this._globalState)),this._styleExpression.evaluate(e,t,i,r,o,s)}interpolationFactor(e,t,i){return this.interpolationType?i1.interpolationFactor(this.interpolationType,e,t,i):0}};function She(n){return n._styleExpression!==void 0}function aP(n,e,t){const i=sP(n,e,t);if(i.result==="error")return i;const r=i.value.expression,o=pE(r);if(!o&&!jw(e))return p_([new pg("","data expressions not supported")]);const s=mE(r,["zoom"]);if(!s&&!_X(e))return p_([new pg("","zoom expressions not supported")]);const a=rw(r);if(!a&&!s)return p_([new pg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(a instanceof pg)return p_([a]);if(a instanceof i1&&!rP(e))return p_([new pg("",'"interpolate" expressions cannot be used with this property')]);if(!a)return p9(o?new m9("constant",i.value,t):new m9("source",i.value,t));const c=a instanceof i1?a.interpolation:void 0;return p9(o?new g9("camera",i.value,a.labels,c,t):new g9("composite",i.value,a.labels,c,t))}class gE{constructor(e,t){this._parameters=e,this._specification=t,ox(this,oP(this._parameters,this._specification))}static deserialize(e){return new gE(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Ehe(n,e,t){if($4(n))return new gE(n,e);if(H4(n)){const i=aP(n,e,t);if(i.result==="error")throw new Error(i.value.map(r=>`${r.key}: ${r.message}`).join(", "));return i.value}else{let i=n;return e.type==="color"&&typeof n=="string"?i=fa.parse(n):e.type==="padding"&&(typeof n=="number"||Array.isArray(n))?i=Qg.parse(n):e.type==="numberArray"&&(typeof n=="number"||Array.isArray(n))?i=qg.parse(n):e.type==="colorArray"&&(typeof n=="string"||Array.isArray(n))?i=cp.parse(n):e.type==="variableAnchorOffsetCollection"&&Array.isArray(n)?i=lv.parse(n):e.type==="projectionDefinition"&&typeof n=="string"&&(i=Ix.parse(n)),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>i}}}function rw(n){let e=null;if(n instanceof ZZ)e=rw(n.result);else if(n instanceof aX){for(const t of n.args)if(e=rw(t),e)break}else(n instanceof oX||n instanceof i1)&&n.input instanceof Rx&&n.input.name==="zoom"&&(e=n);return e instanceof pg||n.eachChild(t=>{const i=rw(t);i instanceof pg?e=i:!e&&i?e=new pg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new pg("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function lP(n,e=new Set){return n instanceof nP&&e.add(n.key),n.eachChild(t=>{lP(t,e)}),e}function Ohe(n){const e={color:Bg,string:Mo,number:ti,enum:Mo,boolean:co,formatted:uE,padding:cE,numberArray:AE,colorArray:P3,projectionDefinition:aE,resolvedImage:q4,variableAnchorOffsetCollection:hE};return n.type==="array"?pf(e[n.value]||eo,n.length):e[n.type]}function Bhe(n){if(n.type==="color"&&$4(n.default))return new fa(0,0,0,0);switch(n.type){case"color":return fa.parse(n.default)||null;case"padding":return Qg.parse(n.default)||null;case"numberArray":return qg.parse(n.default)||null;case"colorArray":return cp.parse(n.default)||null;case"variableAnchorOffsetCollection":return lv.parse(n.default)||null;case"projectionDefinition":return Ix.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function ax(n,e){const{zoom:t,heatmapDensity:i,elevation:r,lineProgress:o,isSupportedScript:s,accumulated:a}=n??{};return{zoom:t,heatmapDensity:i,elevation:r,lineProgress:o,isSupportedScript:s,accumulated:a,globalState:e}}function yE(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!yE(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function l3(n,e={}){if(yE(n))return n;if(!n)return!0;const t=n,i=t[0];if(n.length<=1)return i!=="any";switch(i){case"==":case"!=":case"<":case">":case"<=":case">=":{const[,r,o]=n;return khe(r,o,i,e)}case"any":{const[,...r]=t;return["any",...r.map(s=>{const a={},c=l3(s,a),h=Ihe(a);return h===!0?c:["case",h,c,!1]})]}case"all":{const[,...r]=t,o=r.map(s=>l3(s,e));return o.length>1?["all",...o]:o[0]}case"none":{const[,...r]=t;return["!",l3(["any",...r],{})]}case"in":{const[,r,...o]=t;return NF(r,o)}case"!in":{const[,r,...o]=t;return NF(r,o,!0)}case"has":return GF(t[1]);case"!has":return["!",GF(t[1])];default:return!0}}function Ihe(n){const e=[];for(const t in n){const i=t==="$id"?["id"]:["get",t];e.push(["==",["typeof",i],n[t]])}return e.length===0?!0:e.length===1?e[0]:["all",...e]}function khe(n,e,t,i){let r;if(n==="$type")return[t,["geometry-type"],e];if(n==="$id"?r=["id"]:r=["get",n],i&&e!==null){const o=typeof e;i[n]=o}return t==="=="&&n!=="$id"&&e===null?["all",["has",n],["==",r,null]]:t==="!="&&n!=="$id"&&e===null?["any",["!",["has",n]],["!=",r,null]]:[t,r,e]}function NF(n,e,t=!1){if(e.length===0)return t;let i;n==="$type"?i=["geometry-type"]:n==="$id"?i=["id"]:i=["get",n];let r=!0;const o=typeof e[0];for(const s of e)if(typeof s!==o){r=!1;break}if(r&&(o==="string"||o==="number")){const s=e.sort().filter((a,c)=>c===0||e[c-1]!==a);return["match",i,s,!t,t]}return t?["all",...e.map(s=>["!=",i,s])]:["any",...e.map(s=>["==",i,s])]}function GF(n){return n==="$type"?!0:n==="$id"?["!=",["id"],null]:["has",n]}function z3(n){return typeof n=="object"?["literal",n]:n}function wX(n,e){let t=n.stops;if(!t)return The(n,e);const i=t&&typeof t[0][0]=="object",r=i||n.property!==void 0,o=i||!r;return t=t.map(s=>!r&&e.tokens&&typeof s[1]=="string"?[s[0],SX(s[1])]:[s[0],z3(s[1])]),i?Rhe(n,e,t):o?Phe(n,e,t):y9(n,e,t)}function The(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const i=[e.type==="color"?"to-color":e.type,t,z3(n.default)];return e.type==="array"&&i.splice(1,0,e.value,e.length||null),i}}function uP(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Rhe(n,e,t){const i={},r={},o=[];for(let a=0;a<t.length;a++){const c=t[a],h=c[0].zoom;i[h]===void 0&&(i[h]={zoom:h,type:n.type,property:n.property,default:n.default},r[h]=[],o.push(h)),r[h].push([c[0].value,c[1]])}if(AP({},e)==="exponential"){const a=[uP(n),["linear"],["zoom"]];for(const c of o){const h=y9(i[c],e,r[c]);K_(a,c,h,!1)}return a}else{const a=["step",["zoom"]];for(const c of o){const h=y9(i[c],e,r[c]);K_(a,c,h,!0)}return cP(a),a}}function Dhe(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function WF(n,e){const t=z3(Dhe(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function y9(n,e,t){const i=AP(n,e),r=["get",n.property];if(i==="categorical"&&typeof t[0][0]=="boolean"){const o=["case"];for(const s of t)o.push(["==",r,s[0]],s[1]);return o.push(WF(n,e)),o}else if(i==="categorical"){const o=["match",r];for(const s of t)K_(o,s[0],s[1],!1);return o.push(WF(n,e)),o}else if(i==="interval"){const o=["step",["number",r]];for(const s of t)K_(o,s[0],s[1],!0);return cP(o),n.default===void 0?o:["case",["==",["typeof",r],"number"],o,z3(n.default)]}else if(i==="exponential"){const o=n.base!==void 0?n.base:1,s=[uP(n),o===1?["linear"]:["exponential",o],["number",r]];for(const a of t)K_(s,a[0],a[1],!1);return n.default===void 0?s:["case",["==",["typeof",r],"number"],s,z3(n.default)]}else throw new Error(`Unknown property function type ${i}`)}function Phe(n,e,t,i=["zoom"]){const r=AP(n,e);let o,s=!1;if(r==="interval")o=["step",i],s=!0;else if(r==="exponential"){const a=n.base!==void 0?n.base:1;o=[uP(n),a===1?["linear"]:["exponential",a],i]}else throw new Error(`Unknown zoom function type "${r}"`);for(const a of t)K_(o,a[0],a[1],s);return cP(o),o}function cP(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function K_(n,e,t,i){n.length>3&&e===n[n.length-2]||(i&&n.length===2||n.push(e),n.push(t))}function AP(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function SX(n){const e=["concat"],t=/{([^{}]+)}/g;let i=0;for(let r=t.exec(n);r!==null;r=t.exec(n)){const o=n.slice(i,t.lastIndex-r[0].length);i=t.lastIndex,o.length>0&&e.push(o),e.push(["get",r[1]])}if(e.length===1)return n;if(i<n.length)e.push(n.slice(i));else if(e.length===2)return["to-string",e[1]];return e}function Uhe(n){for(let e=0;e<us.layout.length;e++)for(const t in us[us.layout[e]])if(t===n)return us[us.layout[e]][t];for(let e=0;e<us.paint.length;e++)for(const t in us[us.paint[e]])if(t===n)return us[us.paint[e]][t];return null}function Khe(n,e){for(const t in n.sources)e(n.sources[t])}function u3(n,e){for(const t of n.layers)e(t)}function hP(n,e,t){function i(r,o){const s=r[o];s&&Object.keys(s).forEach(a=>{t({path:[r.id,o,a],key:a,value:s[a],reference:Uhe(a),set(c){s[a]=c}})})}u3(n,r=>{e.paint&&i(r,"paint"),e.layout&&i(r,"layout")})}function EX(n){const e=n.key,t=n.value;return t?[new qn(e,t,"constants have been deprecated as of v8")]:[]}function Hl(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Db(n){if(Array.isArray(n))return n.map(Db);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=Db(n[t]);return e}return Hl(n)}function op(n){const e=n.key,t=n.value,i=n.valueSpec||{},r=n.objectElementValidators||{},o=n.style,s=n.styleSpec,a=n.validateSpec;let c=[];const h=So(t);if(h!=="object")return[new qn(e,t,`object expected, ${h} found`)];for(const m in t){const y=m.split(".")[0],M=s3(i,y)||i["*"];let x;if(s3(r,y))x=r[y];else if(s3(i,y))x=a;else if(r["*"])x=r["*"];else if(i["*"])x=a;else{c.push(new qn(e,t[m],`unknown property "${m}"`));continue}c=c.concat(x({key:(e&&`${e}.`)+m,value:t[m],valueSpec:M,style:o,styleSpec:s,object:t,objectKey:m,validateSpec:a},t))}for(const m in i)r[m]||i[m].required&&i[m].default===void 0&&t[m]===void 0&&c.push(new qn(e,t,`missing required property "${m}"`));return c}function dP(n){const e=n.value,t=n.valueSpec,i=n.validateSpec,r=n.style,o=n.styleSpec,s=n.key,a=n.arrayElementValidator||i;if(So(e)!=="array")return[new qn(s,e,`array expected, ${So(e)} found`)];if(t.length&&e.length!==t.length)return[new qn(s,e,`array length ${t.length} expected, length ${e.length} found`)];if(t["min-length"]&&e.length<t["min-length"])return[new qn(s,e,`array length at least ${t["min-length"]} expected, length ${e.length} found`)];let c={type:t.value,values:t.values};o.$version<7&&(c.function=t.function),So(t.value)==="object"&&(c=t.value);let h=[];for(let m=0;m<e.length;m++)h=h.concat(a({array:e,arrayIndex:m,value:e[m],valueSpec:c,validateSpec:n.validateSpec,style:r,styleSpec:o,key:`${s}[${m}]`}));return h}function vE(n){const e=n.key,t=n.value,i=n.valueSpec;let r=So(t);return r==="number"&&t!==t&&(r="NaN"),r!=="number"?[new qn(e,t,`number expected, ${r} found`)]:"minimum"in i&&t<i.minimum?[new qn(e,t,`${t} is less than the minimum value ${i.minimum}`)]:"maximum"in i&&t>i.maximum?[new qn(e,t,`${t} is greater than the maximum value ${i.maximum}`)]:[]}function OX(n){const e=n.valueSpec,t=Hl(n.value.type);let i,r={},o,s;const a=t!=="categorical"&&n.value.property===void 0,c=!a,h=So(n.value.stops)==="array"&&So(n.value.stops[0])==="array"&&So(n.value.stops[0][0])==="object",m=op({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:y,default:k}});return t==="identity"&&a&&m.push(new qn(n.key,n.value,'missing required property "property"')),t!=="identity"&&!n.value.stops&&m.push(new qn(n.key,n.value,'missing required property "stops"')),t==="exponential"&&n.valueSpec.expression&&!rP(n.valueSpec)&&m.push(new qn(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(c&&!jw(n.valueSpec)?m.push(new qn(n.key,n.value,"property functions not supported")):a&&!_X(n.valueSpec)&&m.push(new qn(n.key,n.value,"zoom functions not supported"))),(t==="categorical"||h)&&n.value.property===void 0&&m.push(new qn(n.key,n.value,'"property" property is required')),m;function y(P){if(t==="identity")return[new qn(P.key,P.value,'identity function may not have a "stops" property')];let F=[];const j=P.value;return F=F.concat(dP({key:P.key,value:j,valueSpec:P.valueSpec,validateSpec:P.validateSpec,style:P.style,styleSpec:P.styleSpec,arrayElementValidator:M})),So(j)==="array"&&j.length===0&&F.push(new qn(P.key,j,"array must have at least one stop")),F}function M(P){let F=[];const j=P.value,q=P.key;if(So(j)!=="array")return[new qn(q,j,`array expected, ${So(j)} found`)];if(j.length!==2)return[new qn(q,j,`array length 2 expected, length ${j.length} found`)];if(h){if(So(j[0])!=="object")return[new qn(q,j,`object expected, ${So(j[0])} found`)];if(j[0].zoom===void 0)return[new qn(q,j,"object stop key must have zoom")];if(j[0].value===void 0)return[new qn(q,j,"object stop key must have value")];if(s&&s>Hl(j[0].zoom))return[new qn(q,j[0].zoom,"stop zoom values must appear in ascending order")];Hl(j[0].zoom)!==s&&(s=Hl(j[0].zoom),o=void 0,r={}),F=F.concat(op({key:`${q}[0]`,value:j[0],valueSpec:{zoom:{}},validateSpec:P.validateSpec,style:P.style,styleSpec:P.styleSpec,objectElementValidators:{zoom:vE,value:x}}))}else F=F.concat(x({key:`${q}[0]`,value:j[0],validateSpec:P.validateSpec,style:P.style,styleSpec:P.styleSpec},j));return H4(Db(j[1]))?F.concat([new qn(`${q}[1]`,j[1],"expressions are not allowed in function stops.")]):F.concat(P.validateSpec({key:`${q}[1]`,value:j[1],valueSpec:e,validateSpec:P.validateSpec,style:P.style,styleSpec:P.styleSpec}))}function x(P,F){const j=So(P.value),q=Hl(P.value),V=P.value!==null?P.value:F;if(!i)i=j;else if(j!==i)return[new qn(P.key,V,`${j} stop domain type must match previous stop domain type ${i}`)];if(j!=="number"&&j!=="string"&&j!=="boolean")return[new qn(P.key,V,"stop domain value must be a number, string, or boolean")];if(j!=="number"&&t!=="categorical"){let H=`number expected, ${j} found`;return jw(e)&&t===void 0&&(H+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new qn(P.key,V,H)]}return t==="categorical"&&j==="number"&&(!isFinite(q)||Math.floor(q)!==q)?[new qn(P.key,V,`integer expected, found ${q}`)]:t!=="categorical"&&j==="number"&&o!==void 0&&q<o?[new qn(P.key,V,"stop domain values must appear in ascending order")]:(o=q,t==="categorical"&&q in r?[new qn(P.key,V,"stop domain values must be unique")]:(r[q]=!0,[]))}function k(P){return P.validateSpec({key:P.key,value:P.value,valueSpec:e,validateSpec:P.validateSpec,style:P.style,styleSpec:P.styleSpec})}}function lx(n){const e=(n.expressionContext==="property"?aP:sP)(Db(n.value),n.valueSpec);if(e.result==="error")return e.value.map(i=>new qn(`${n.key}${i.key}`,n.value,i.message));const t=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!t.outputDefined())return[new qn(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!F3(t))return[new qn(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!F3(t))return[new qn(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!mE(t,["zoom","feature-state"]))return[new qn(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!pE(t))return[new qn(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Lhe(n){const e=n.value,t=n.key,i=So(e);return i!=="boolean"?[new qn(t,e,`boolean expected, ${i} found`)]:[]}function v9(n){const e=n.key,t=n.value,i=So(t);return i!=="string"?[new qn(e,t,`color expected, ${i} found`)]:fa.parse(String(t))?[]:[new qn(e,t,`color expected, "${t}" found`)]}function j3(n){const e=n.key,t=n.value,i=n.valueSpec,r=[];return Array.isArray(i.values)?i.values.indexOf(Hl(t))===-1&&r.push(new qn(e,t,`expected one of [${i.values.join(", ")}], ${JSON.stringify(t)} found`)):Object.keys(i.values).indexOf(Hl(t))===-1&&r.push(new qn(e,t,`expected one of [${Object.keys(i.values).join(", ")}], ${JSON.stringify(t)} found`)),r}function fP(n){return yE(Db(n.value))?lx(ox({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):BX(n)}function BX(n){const e=n.value,t=n.key;if(So(e)!=="array")return[new qn(t,e,`array expected, ${So(e)} found`)];const i=n.styleSpec;let r,o=[];if(e.length<1)return[new qn(t,e,"filter array must have at least 1 element")];switch(o=o.concat(j3({key:`${t}[0]`,value:e[0],valueSpec:i.filter_operator,style:n.style,styleSpec:n.styleSpec})),Hl(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Hl(e[1])==="$type"&&o.push(new qn(t,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&o.push(new qn(t,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(r=So(e[1]),r!=="string"&&o.push(new qn(`${t}[1]`,e[1],`string expected, ${r} found`)));for(let s=2;s<e.length;s++)r=So(e[s]),Hl(e[1])==="$type"?o=o.concat(j3({key:`${t}[${s}]`,value:e[s],valueSpec:i.geometry_type,style:n.style,styleSpec:n.styleSpec})):r!=="string"&&r!=="number"&&r!=="boolean"&&o.push(new qn(`${t}[${s}]`,e[s],`string, number, or boolean expected, ${r} found`));break;case"any":case"all":case"none":for(let s=1;s<e.length;s++)o=o.concat(BX({key:`${t}[${s}]`,value:e[s],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":r=So(e[1]),e.length!==2?o.push(new qn(t,e,`filter array for "${e[0]}" operator must have 2 elements`)):r!=="string"&&o.push(new qn(`${t}[1]`,e[1],`string expected, ${r} found`));break}return o}function IX(n,e){const t=n.key,i=n.validateSpec,r=n.style,o=n.styleSpec,s=n.value,a=n.objectKey,c=o[`${e}_${n.layerType}`];if(!c)return[];const h=a.match(/^(.*)-transition$/);if(e==="paint"&&h&&c[h[1]]&&c[h[1]].transition)return i({key:t,value:s,valueSpec:o.transition,style:r,styleSpec:o});const m=n.valueSpec||c[a];if(!m)return[new qn(t,s,`unknown property "${a}"`)];let y;if(So(s)==="string"&&jw(m)&&!m.tokens&&(y=/^{([^}]+)}$/.exec(s)))return[new qn(t,s,`"${a}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(y[1])} }\`.`)];const M=[];return n.layerType==="symbol"&&(a==="text-field"&&r&&!r.glyphs&&M.push(new qn(t,s,'use of "text-field" requires a style "glyphs" property')),a==="text-font"&&$4(Db(s))&&Hl(s.type)==="identity"&&M.push(new qn(t,s,'"text-font" does not support identity functions'))),M.concat(i({key:n.key,value:s,valueSpec:m,style:r,styleSpec:o,expressionContext:"property",propertyType:e,propertyKey:a}))}function kX(n){return IX(n,"paint")}function TX(n){return IX(n,"layout")}function RX(n){let e=[];const t=n.value,i=n.key,r=n.style,o=n.styleSpec;if(So(t)!=="object")return[new qn(i,t,`object expected, ${So(t)} found`)];!t.type&&!t.ref&&e.push(new qn(i,t,'either "type" or "ref" is required'));let s=Hl(t.type);const a=Hl(t.ref);if(t.id){const c=Hl(t.id);for(let h=0;h<n.arrayIndex;h++){const m=r.layers[h];Hl(m.id)===c&&e.push(new qn(i,t.id,`duplicate layer id "${t.id}", previously used at line ${m.id.__line__}`))}}if("ref"in t){["type","source","source-layer","filter","layout"].forEach(h=>{h in t&&e.push(new qn(i,t[h],`"${h}" is prohibited for ref layers`))});let c;r.layers.forEach(h=>{Hl(h.id)===a&&(c=h)}),c?c.ref?e.push(new qn(i,t.ref,"ref cannot reference another ref layer")):s=Hl(c.type):e.push(new qn(i,t.ref,`ref layer "${a}" not found`))}else if(s!=="background")if(!t.source)e.push(new qn(i,t,'missing required property "source"'));else{const c=r.sources&&r.sources[t.source],h=c&&Hl(c.type);c?h==="vector"&&s==="raster"?e.push(new qn(i,t.source,`layer "${t.id}" requires a raster source`)):h!=="raster-dem"&&s==="hillshade"?e.push(new qn(i,t.source,`layer "${t.id}" requires a raster-dem source`)):h!=="raster-dem"&&s==="color-relief"?e.push(new qn(i,t.source,`layer "${t.id}" requires a raster-dem source`)):h==="raster"&&s!=="raster"?e.push(new qn(i,t.source,`layer "${t.id}" requires a vector source`)):h==="vector"&&!t["source-layer"]?e.push(new qn(i,t,`layer "${t.id}" must specify a "source-layer"`)):h==="raster-dem"&&s!=="hillshade"&&s!=="color-relief"?e.push(new qn(i,t.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):s==="line"&&t.paint&&t.paint["line-gradient"]&&(h!=="geojson"||!c.lineMetrics)&&e.push(new qn(i,t,`layer "${t.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new qn(i,t.source,`source "${t.source}" not found`))}return e=e.concat(op({key:i,value:t,valueSpec:o.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*"(){return[]},type(){return n.validateSpec({key:`${i}.type`,value:t.type,valueSpec:o.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:t,objectKey:"type"})},filter:fP,layout(c){return op({layer:t,key:c.key,value:c.value,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*"(h){return TX(ox({layerType:s},h))}}})},paint(c){return op({layer:t,key:c.key,value:c.value,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*"(h){return kX(ox({layerType:s},h))}}})}}})),e}function Pb(n){const e=n.value,t=n.key,i=So(e);return i!=="string"?[new qn(t,e,`string expected, ${i} found`)]:[]}function Fhe(n){var e;const t=(e=n.sourceName)!==null&&e!==void 0?e:"",i=n.value,r=n.styleSpec,o=r.source_raster_dem,s=n.style;let a=[];const c=So(i);if(i===void 0)return a;if(c!=="object")return a.push(new qn("source_raster_dem",i,`object expected, ${c} found`)),a;const m=Hl(i.encoding)==="custom",y=["redFactor","greenFactor","blueFactor","baseShift"],M=n.value.encoding?`"${n.value.encoding}"`:"Default";for(const x in i)!m&&y.includes(x)?a.push(new qn(x,i[x],`In "${t}": "${x}" is only valid when "encoding" is set to "custom". ${M} encoding found`)):o[x]?a=a.concat(n.validateSpec({key:x,value:i[x],valueSpec:o[x],validateSpec:n.validateSpec,style:s,styleSpec:r})):a.push(new qn(x,i[x],`unknown property "${x}"`));return a}const QF={promoteId:zhe};function DX(n){const e=n.value,t=n.key,i=n.styleSpec,r=n.style,o=n.validateSpec;if(!e.type)return[new qn(t,e,'"type" is required')];const s=Hl(e.type);let a;switch(s){case"vector":case"raster":return a=op({key:t,value:e,valueSpec:i[`source_${s.replace("-","_")}`],style:n.style,styleSpec:i,objectElementValidators:QF,validateSpec:o}),a;case"raster-dem":return a=Fhe({sourceName:t,value:e,style:n.style,styleSpec:i,validateSpec:o}),a;case"geojson":if(a=op({key:t,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i,validateSpec:o,objectElementValidators:QF}),e.cluster)for(const c in e.clusterProperties){const[h,m]=e.clusterProperties[c],y=typeof h=="string"?[h,["accumulated"],["get",c]]:h;a.push(...lx({key:`${t}.${c}.map`,value:m,expressionContext:"cluster-map"})),a.push(...lx({key:`${t}.${c}.reduce`,value:y,expressionContext:"cluster-reduce"}))}return a;case"video":return op({key:t,value:e,valueSpec:i.source_video,style:r,validateSpec:o,styleSpec:i});case"image":return op({key:t,value:e,valueSpec:i.source_image,style:r,validateSpec:o,styleSpec:i});case"canvas":return[new qn(t,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return j3({key:`${t}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function zhe({key:n,value:e}){if(So(e)==="string")return Pb({key:n,value:e});{const t=[];for(const i in e)t.push(...Pb({key:`${n}.${i}`,value:e[i]}));return t}}function PX(n){const e=n.value,t=n.styleSpec,i=t.light,r=n.style;let o=[];const s=So(e);if(e===void 0)return o;if(s!=="object")return o=o.concat([new qn("light",e,`object expected, ${s} found`)]),o;for(const a in e){const c=a.match(/^(.*)-transition$/);c&&i[c[1]]&&i[c[1]].transition?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:t.transition,validateSpec:n.validateSpec,style:r,styleSpec:t})):i[a]?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],validateSpec:n.validateSpec,style:r,styleSpec:t})):o=o.concat([new qn(a,e[a],`unknown property "${a}"`)])}return o}function UX(n){const e=n.value,t=n.styleSpec,i=t.sky,r=n.style,o=So(e);if(e===void 0)return[];if(o!=="object")return[new qn("sky",e,`object expected, ${o} found`)];let s=[];for(const a in e)i[a]?s=s.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],style:r,styleSpec:t})):s=s.concat([new qn(a,e[a],`unknown property "${a}"`)]);return s}function KX(n){const e=n.value,t=n.styleSpec,i=t.terrain,r=n.style;let o=[];const s=So(e);if(e===void 0)return o;if(s!=="object")return o=o.concat([new qn("terrain",e,`object expected, ${s} found`)]),o;for(const a in e)i[a]?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],validateSpec:n.validateSpec,style:r,styleSpec:t})):o=o.concat([new qn(a,e[a],`unknown property "${a}"`)]);return o}function jhe(n){return Pb(n).length===0?[]:lx(n)}function Nhe(n){return Pb(n).length===0?[]:lx(n)}function Ghe(n){const e=n.key,t=n.value;if(So(t)==="array"){if(t.length<1||t.length>4)return[new qn(e,t,`padding requires 1 to 4 values; ${t.length} values found`)];const r={type:"number"};let o=[];for(let s=0;s<t.length;s++)o=o.concat(n.validateSpec({key:`${e}[${s}]`,value:t[s],validateSpec:n.validateSpec,valueSpec:r}));return o}else return vE({key:e,value:t,valueSpec:{}})}function Whe(n){const e=n.key,t=n.value;if(So(t)==="array"){const r={type:"number"};if(t.length<1)return[new qn(e,t,"array length at least 1 expected, length 0 found")];let o=[];for(let s=0;s<t.length;s++)o=o.concat(n.validateSpec({key:`${e}[${s}]`,value:t[s],validateSpec:n.validateSpec,valueSpec:r}));return o}else return vE({key:e,value:t,valueSpec:{}})}function Qhe(n){const e=n.key,t=n.value;if(So(t)==="array"){if(t.length<1)return[new qn(e,t,"array length at least 1 expected, length 0 found")];let r=[];for(let o=0;o<t.length;o++)r=r.concat(v9({key:`${e}[${o}]`,value:t[o]}));return r}else return v9({key:e,value:t})}function qhe(n){const e=n.key,t=n.value,i=So(t),r=n.styleSpec;if(i!=="array"||t.length<1||t.length%2!==0)return[new qn(e,t,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let s=0;s<t.length;s+=2)o=o.concat(j3({key:`${e}[${s}]`,value:t[s],valueSpec:r.layout_symbol["text-anchor"]})),o=o.concat(dP({key:`${e}[${s+1}]`,value:t[s+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:r}));return o}function LX(n){let e=[];const t=n.value,i=n.key;if(Array.isArray(t)){const r=[],o=[];for(const s in t){t[s].id&&r.includes(t[s].id)&&e.push(new qn(i,t,`all the sprites' ids must be unique, but ${t[s].id} is duplicated`)),r.push(t[s].id),t[s].url&&o.includes(t[s].url)&&e.push(new qn(i,t,`all the sprites' URLs must be unique, but ${t[s].url} is duplicated`)),o.push(t[s].url);const a={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(op({key:`${i}[${s}]`,value:t[s],valueSpec:a,validateSpec:n.validateSpec}))}return e}else return Pb({key:i,value:t})}function Yhe(n){const e=n.value,t=n.styleSpec,i=t.projection,r=n.style,o=So(e);if(e===void 0)return[];if(o!=="object")return[new qn("projection",e,`object expected, ${o} found`)];let s=[];for(const a in e)i[a]?s=s.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],style:r,styleSpec:t})):s=s.concat([new qn(a,e[a],`unknown property "${a}"`)]);return s}function $he(n){const e=n.key;let t=n.value;t=t instanceof String?t.valueOf():t;const i=So(t);return i==="array"&&!Hhe(t)&&!Vhe(t)?[new qn(e,t,`projection expected, invalid array ${JSON.stringify(t)} found`)]:["array","string"].includes(i)?[]:[new qn(e,t,`projection expected, invalid type "${i}" found`)]}function Vhe(n){return!!["interpolate","step","literal"].includes(n[0])}function Hhe(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"}function Zhe(n){return!!n&&n.constructor===Object}function FX(n){return Zhe(n.value)?[]:[new qn(n.key,n.value,`object expected, ${So(n.value)} found`)]}const qF={"*"(){return[]},array:dP,boolean:Lhe,number:vE,color:v9,constants:EX,enum:j3,filter:fP,function:OX,layer:RX,object:op,source:DX,light:PX,sky:UX,terrain:KX,projection:Yhe,projectionDefinition:$he,string:Pb,formatted:jhe,resolvedImage:Nhe,padding:Ghe,numberArray:Whe,colorArray:Qhe,variableAnchorOffsetCollection:qhe,sprite:LX,state:FX};function Nw(n){const e=n.value,t=n.valueSpec,i=n.styleSpec;return n.validateSpec=Nw,t.expression&&$4(Hl(e))?OX(n):t.expression&&H4(Db(e))?lx(n):t.type&&qF[t.type]?qF[t.type](n):op(ox({},n,{valueSpec:t.type?i[t.type]:t}))}function zX(n){const e=n.value,t=n.key,i=Pb(n);return i.length||(e.indexOf("{fontstack}")===-1&&i.push(new qn(t,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&i.push(new qn(t,e,'"glyphs" url must include a "{range}" token'))),i}function Md(n,e=us){let t=[];return t=t.concat(Nw({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,validateSpec:Nw,objectElementValidators:{glyphs:zX,"*"(){return[]}}})),n.constants&&(t=t.concat(EX({key:"constants",value:n.constants}))),jX(t)}Md.source=Am(cm(DX));Md.sprite=Am(cm(LX));Md.glyphs=Am(cm(zX));Md.light=Am(cm(PX));Md.sky=Am(cm(UX));Md.terrain=Am(cm(KX));Md.state=Am(cm(FX));Md.layer=Am(cm(RX));Md.filter=Am(cm(fP));Md.paintProperty=Am(cm(kX));Md.layoutProperty=Am(cm(TX));function cm(n){return function(e){return n(Object.assign({},e,{validateSpec:Nw}))}}function jX(n){return[].concat(n).sort((e,t)=>e.line-t.line)}function Am(n){return function(...e){return jX(n.apply(this,e))}}const Xhe=/("(?:[^\\"]|\\.)*")|[:,]/g;function Jhe(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),i=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:r}=e;return(function o(s,a,c){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const h=JSON.stringify(s,r);if(h===void 0)return h;const m=i-a.length-c;if(h.length<=m){const y=h.replace(Xhe,(M,x)=>x||`${M} `);if(y.length<=m)return y}if(r!=null&&(s=JSON.parse(h),r=void 0),typeof s=="object"&&s!==null){const y=a+t,M=[];let x=0,k,P;if(Array.isArray(s)){k="[",P="]";const{length:F}=s;for(;x<F;x++)M.push(o(s[x],y,x===F-1?0:1)||"null")}else{k="{",P="}";const F=Object.keys(s),{length:j}=F;for(;x<j;x++){const q=F[x],V=`${JSON.stringify(q)}: `,H=o(s[q],y,V.length+(x===j-1?0:1));H!==void 0&&M.push(V+H)}}if(M.length>0)return[k,t+M.join(`,
${y}`),P].join(`
${a}`)}return h})(n,"",0)}function YF(n,e){const t={};for(const i in e)n[i]!==void 0&&(t[i]=n[i]);for(const i in n)t[i]===void 0&&(t[i]=n[i]);return t}function ede(n,e=2){return n=YF(n,us.$root),n.layers&&(n.layers=n.layers.map(t=>YF(t,us.layer))),Jhe(n,{indent:e})}function _O(n,e){for(const t in n)t.indexOf("layout")===0&&e(n[t],t)}function $F(n,e){for(const t in n)t.indexOf("paint")===0&&e(n[t],t)}function b9(n,e){return typeof e=="string"&&e[0]==="@"?b9(n,n.constants[e]):e}function tde(n){return Array.isArray(n.stops)}function u2(n,e,t){n[t]=n[e],delete n[e]}function nde(n){n.version=8,Khe(n,r=>{r.type==="video"&&r.url!==void 0&&u2(r,"url","urls"),r.type==="video"&&r.coordinates.forEach(o=>o.reverse())}),u3(n,r=>{_O(r,o=>{o["symbol-min-distance"]!==void 0&&u2(o,"symbol-min-distance","symbol-spacing")}),$F(r,o=>{o["background-image"]!==void 0&&u2(o,"background-image","background-pattern"),o["line-image"]!==void 0&&u2(o,"line-image","line-pattern"),o["fill-image"]!==void 0&&u2(o,"fill-image","fill-pattern")})}),hP(n,{paint:!0,layout:!0},r=>{const o=b9(n,r.value);tde(o)&&o.stops.forEach(s=>{s[1]=b9(n,s[1])}),r.set(o)}),delete n.constants,u3(n,r=>{_O(r,o=>{delete o["text-max-size"],delete o["icon-max-size"]}),$F(r,o=>{o["text-size"]&&(r.layout||(r.layout={}),r.layout["text-size"]=o["text-size"],delete o["text-size"]),o["icon-size"]&&(r.layout||(r.layout={}),r.layout["icon-size"]=o["icon-size"],delete o["icon-size"])})});function e(r){function o(s){return s.split(",").map(a=>a.trim())}if(Array.isArray(r))return r;if(typeof r=="string")return o(r);if(typeof r=="object")return r.stops.forEach(s=>{s[1]=o(s[1])}),r;throw new Error("unexpected font value")}u3(n,r=>{_O(r,o=>{o["text-font"]&&(o["text-font"]=e(o["text-font"]))})});let t=0;for(let r=n.layers.length-1;r>=0;r--)if(n.layers[r].type!=="symbol"){t=r+1;break}const i=n.layers.splice(t);return i.reverse(),n.layers=n.layers.concat(i),n}function ide(n){const e=[];return u3(n,t=>{t.filter&&(t.filter=l3(t.filter))}),hP(n,{paint:!0,layout:!0},({path:t,key:i,value:r,reference:o,set:s})=>{H4(r)||i.endsWith("-transition")||o===null||(typeof r=="object"&&!Array.isArray(r)?(s(wX(r,o)),e.push(t.join("."))):o.tokens&&typeof r=="string"&&s(SX(r)))}),n}function rde(n){return JSON.parse(ode(JSON.stringify(n)))}function ode(n){return n.replace(/"hsla?\((.+?)\)"/gi,(e,t)=>{const i=t.match(/^(.+?)\s*,\s*(.+?)\s*,\s*(.+?)(?:\s*,\s*(.+))?$/i);if(i){let[r,o,s,a]=i.slice(1);return[o,s]=[o,s].map(c=>c.endsWith("%")?c:`${parseFloat(c)*100}%`),`"hsl${typeof a=="string"?"a":""}(${[r,o,s,a].filter(Boolean).join(",")})"`}return e})}function sde(n){let e=!1;if(n.version===7&&(n=nde(n),e=!0),n.version===8&&(e=!!ide(n),e=!0),hP(n,{paint:!0,layout:!0},({value:t,reference:i,set:r})=>{i?.type==="color"&&r(rde(t))}),!e)throw new Error(`Cannot migrate from ${n.version}`);return n}const rp=us,ade={StyleExpression:MX,StylePropertyFunction:gE,ZoomConstantExpression:m9,ZoomDependentExpression:g9,createExpression:sP,createPropertyExpression:aP,isExpression:H4,isExpressionFilter:yE,isZoomExpression:She,normalizePropertyExpression:Ehe},lde={convertFunction:wX,createFunction:oP,isFunction:$4},ude=8,cde=JSON.parse('{"version":{"required":true,"type":"enum","values":[8],"doc":"Style specification version number. Must be 8.","example":8},"name":{"type":"string","doc":"A human-readable name for the style.","example":"Bright"},"metadata":{"type":"*","doc":"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like \'maplibre:\'.","example":{"styleeditor:slimmode":true,"styleeditor:comment":"Style generated 1677776383","styleeditor:version":"3.14.159265","example:object":{"String":"one","Number":2,"Boolean":false}}},"center":{"type":"array","value":"number","doc":"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":[-73.9749,40.7736]},"centerAltitude":{"type":"number","doc":"Default map center altitude in meters above sea level. The style center altitude defines the altitude where the camera is looking at and will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":123.4,"sdk-support":{"basic functionality":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/2980","ios":"https://github.com/maplibre/maplibre-native/issues/2980"}}},"zoom":{"type":"number","doc":"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":12.5},"bearing":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Default bearing, in degrees. The bearing is the compass direction that is \\"up\\"; for example, a bearing of 90 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":29},"pitch":{"type":"number","default":0,"units":"degrees","doc":"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":50,"sdk-support":{"0-60 degrees":{"js":"0.8.0","android":"1.0.0","ios":"1.0.0"},"0-85 degrees":{"js":"2.0.0","android":"https://github.com/maplibre/maplibre-native/issues/1909","ios":"https://github.com/maplibre/maplibre-native/issues/1909"},"0-180 degrees":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/1909","ios":"https://github.com/maplibre/maplibre-native/issues/1909"}}},"roll":{"type":"number","default":0,"units":"degrees","doc":"Default roll, in degrees. The roll angle is measured counterclockwise about the camera boresight. The style roll will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":45,"sdk-support":{"basic functionality":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/2941","ios":"https://github.com/maplibre/maplibre-native/issues/2941"}}},"state":{"type":"state","default":{},"doc":"An object used to define default values when using the [`global-state`](https://maplibre.org/maplibre-style-spec/expressions/#global-state) expression.","example":{"chargerType":{"default":["CCS","CHAdeMO","Type2"]},"minPreferredChargingSpeed":{"default":50}},"sdk-support":{"basic functionality":{"js":"5.6.0","android":"https://github.com/maplibre/maplibre-native/issues/3302","ios":"https://github.com/maplibre/maplibre-native/issues/3302"}}},"light":{"type":"light","doc":"The global light source.","example":{"anchor":"viewport","color":"white","intensity":0.4}},"sky":{"type":"sky","doc":"The map\'s sky configuration. **Note:** this definition is still experimental and is under development in maplibre-gl-js.","example":{"sky-color":"#199EF3","sky-horizon-blend":0.5,"horizon-color":"#ffffff","horizon-fog-blend":0.5,"fog-color":"#0000ff","fog-ground-blend":0.5,"atmosphere-blend":["interpolate",["linear"],["zoom"],0,1,10,1,12,0]}},"projection":{"type":"projection","doc":"The projection configuration","example":{"type":["interpolate",["linear"],["zoom"],10,"vertical-perspective",12,"mercator"]}},"terrain":{"type":"terrain","doc":"The terrain configuration.","example":{"source":"raster-dem-source","exaggeration":0.5}},"sources":{"required":true,"type":"sources","doc":"Sources state which data the map should display. Specify the type of source with the `type` property. Adding a source isn\'t enough to make data appear on the map because sources don\'t contain styling details like color or width. Layers refer to a source and give it a visual representation. This makes it possible to style the same source in different ways, like differentiating between types of roads in a highways layer.\\n\\nTiled sources (vector and raster) must specify their details according to the [TileJSON specification](https://github.com/mapbox/tilejson-spec).","example":{"maplibre-demotiles":{"type":"vector","url":"https://demotiles.maplibre.org/tiles/tiles.json"},"maplibre-tilejson":{"type":"vector","url":"http://api.example.com/tilejson.json"},"maplibre-streets":{"type":"vector","tiles":["http://a.example.com/tiles/{z}/{x}/{y}.pbf","http://b.example.com/tiles/{z}/{x}/{y}.pbf"],"maxzoom":14},"wms-imagery":{"type":"raster","tiles":["http://a.example.com/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&width=256&height=256&layers=example"],"tileSize":256}}},"sprite":{"type":"sprite","doc":"An array of `{id: \'my-sprite\', url: \'https://example.com/sprite\'}` objects. Each object should represent a unique URL to load a sprite from and and a unique ID to use as a prefix when referencing images from that sprite (i.e. \'my-sprite:image\'). All the URLs are internally extended to load both .json and .png files. If the `id` field is equal to \'default\', the prefix is omitted (just \'image\' instead of \'default:image\'). All the IDs and URLs must be unique. For backwards compatibility, instead of an array, one can also provide a single string that represent a URL to load the sprite from. The images in this case won\'t be prefixed.","example":"https://demotiles.maplibre.org/styles/osm-bright-gl-style/sprite"},"glyphs":{"type":"string","doc":"A URL template for loading signed-distance-field glyph sets in PBF format.\\n\\nIf this property is set, any text in the `text-field` layout property is displayed in the font stack named by the `text-font` layout property based on glyphs located at the URL specified by this property. Otherwise, font faces will be determined by the `text-font` property based on the local environment.\\n\\nThe URL must include:\\n\\n - `{fontstack}` - When requesting glyphs, this token is replaced with a comma separated list of fonts from a font stack specified in the `text-font` property of a symbol layer. \\n\\n - `{range}` - When requesting glyphs, this token is replaced with a range of 256 Unicode code points. For example, to load glyphs for the Unicode Basic Latin and Basic Latin-1 Supplement blocks, the range would be 0-255. The actual ranges that are loaded are determined at runtime based on what text needs to be displayed.\\n\\nThe URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).","example":"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf","sdk-support":{"basic functionality":{"js":"0.0.16","android":"0.1.1","ios":"0.1.0"},"omit to use local fonts":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/3302","android":"https://github.com/maplibre/maplibre-native/issues/165","ios":"https://github.com/maplibre/maplibre-native/issues/165"}}},"font-faces":{"type":"array","value":"fontFaces","doc":"The `font-faces` property can be used to specify what font files to use for rendering text. Font faces contain information needed to render complex texts such as [Devanagari](https://en.wikipedia.org/wiki/Devanagari), [Khmer](https://en.wikipedia.org/wiki/Khmer_script) among many others.<h2>Unicode range</h2>The optional `unicode-range` property can be used to only use a particular font file for characters within the specified unicode range(s). Its value should be an array of strings, each indicating a start and end of a unicode range, similar to the [CSS descriptor with the same name](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/unicode-range). This allows specifying multiple non-consecutive unicode ranges. When not specified, the default value is `U+0-10FFFF`, meaning the font file will be used for all unicode characters.\\n\\nRefer to the [Unicode Character Code Charts](https://www.unicode.org/charts/) to see ranges for scripts supported by Unicode. To see what unicode code-points are available in a font, use a tool like [FontDrop](https://fontdrop.info/).\\n\\n<h2>Font Resolution</h2>For every name in a symbol layers [`text-font`](./layers.md/#text-font) array, characters are matched if they are covered one of the by the font files in the corresponding entry of the `font-faces` map. Any still-unmatched characters then fall back to the [`glyphs`](./glyphs.md) URL if provided.\\n\\n<h2>Supported Fonts</h2>What type of fonts are supported is implementation-defined. Unsupported fonts are ignored.","example":{"Noto Sans Regular":[{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansKhmer/hinted/ttf/NotoSansKhmer-Regular.ttf","unicode-range":["U+1780-17FF"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansDevanagari/hinted/ttf/NotoSansDevanagari-Regular.ttf","unicode-range":["U+0900-097F"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansMyanmar/hinted/ttf/NotoSansMyanmar-Regular.ttf","unicode-range":["U+1000-109F"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansEthiopic/hinted/ttf/NotoSansEthiopic-Regular.ttf","unicode-range":["U+1200-137F"]}],"Unifont":"https://ftp.gnu.org/gnu/unifont/unifont-15.0.01/unifont-15.0.01.ttf"},"sdk-support":{"basic functionality":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/50","android":"11.13.0","ios":"6.18.0"}}},"transition":{"type":"transition","doc":"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style\'s `transition` property.","example":{"duration":300,"delay":0}},"layers":{"required":true,"type":"array","value":"layer","doc":"A style\'s `layers` property lists all the layers available in that style. The type of layer is specified by the `type` property, and must be one of `background`, `fill`, `line`, `symbol`, `raster`, `circle`, `fill-extrusion`, `heatmap`, `hillshade`, `color-relief`.\\n\\nExcept for layers of the `background` type, each layer needs to refer to a source. Layers take the data that they get from a source, optionally filter features, and then define how those features are styled.","example":[{"id":"coastline","source":"maplibre","source-layer":"countries","type":"line","paint":{"line-color":"#198EC8"}}]}}'),Ade={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},hde=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],dde={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},fde={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},pde={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."},custom:{doc:"Decodes tiles using the redFactor, blueFactor, greenFactor, baseShift parameters."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default.","sdk-support":{"mapbox, terrarium":{js:"0.43.0",ios:"6.0.0",android:"6.0.0"},custom:{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},redFactor:{type:"number",default:1,doc:"Value that will be multiplied by the red channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},blueFactor:{type:"number",default:1,doc:"Value that will be multiplied by the blue channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},greenFactor:{type:"number",default:1,doc:"Value that will be multiplied by the green channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2358",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},baseShift:{type:"number",default:0,doc:"Value that will be added to the encoding mix when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},mde={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{required:!0,type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n\n * `cluster` Is `true` if the point is a cluster \n\n * `cluster_id` A unique id for the cluster to be used in conjunction with the [cluster inspection methods](https://maplibre.org/maplibre-gl-js/docs/API/classes/GeoJSONSource/#getclusterexpansionzoom)\n\n * `point_count` Number of original points grouped into this cluster\n\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`)  it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},gde={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},yde={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},vde={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},"additional methods":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}}},"color-relief":{doc:"Client-side elevation coloring based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"source:comment":"Hydrology FCCODE 460 - Narrow wash"}},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},bde=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],Cde={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},_de={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},xde={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Mde={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},wde={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Sde=JSON.parse('{"symbol-placement":{"type":"enum","values":{"point":{"doc":"The label is placed at the point where the geometry is located."},"line":{"doc":"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{"doc":"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},"default":"point","doc":"Label placement relative to its geometry.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`line-center` value":{"js":"0.47.0","android":"6.4.0","ios":"4.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","doc":"Distance between two symbol anchors.","requires":[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"doc":"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don\'t have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like MapLibre GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","doc":"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"},"data-driven styling":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{"doc":"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"source":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},"default":"auto","doc":"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{"js":"0.49.0","android":"6.6.0","ios":"4.5.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the icon will be visible even if it collides with other previously drawn symbols.","requires":["icon-image",{"!":"icon-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-overlap":{"type":"enum","values":{"never":{"doc":"The icon will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The icon will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the icon collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new icon is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new icon is visible."}},"doc":"Allows for control over whether to show an icon when it overlaps other symbols on the map. If `icon-overlap` is not set, `icon-allow-overlap` is used instead.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the icon.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"doc":"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},"viewport":{"doc":"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of icons.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","doc":"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{"doc":"The icon is displayed at its intrinsic aspect ratio."},"width":{"doc":"The icon is scaled in the x-dimension to fit the width of the text."},"height":{"doc":"The icon is scaled in the y-dimension to fit the height of the text."},"both":{"doc":"The icon is scaled in both x- and y-dimensions."}},"default":"none","doc":"Scales the icon to fit around the associated text.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"stretchable icons":{"js":"1.6.0","android":"9.2.0","ios":"5.8.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","doc":"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","doc":"Name of image in sprite to use for drawing an image background.","tokens":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the icon clockwise.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.21.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"padding","default":[2],"units":"pixels","doc":"Size of additional area round the icon bounding box used for detecting symbol collisions.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"2.2.0","android":"https://github.com/maplibre/maplibre-native/issues/2754","ios":"https://github.com/maplibre/maplibre-native/issues/2754"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{"type":"boolean","default":false,"doc":"If true, the icon may be flipped to prevent it from being rendered upside-down.","requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"doc":"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{"doc":"The center of the icon is placed closest to the anchor."},"left":{"doc":"The left side of the icon is placed closest to the anchor."},"right":{"doc":"The right side of the icon is placed closest to the anchor."},"top":{"doc":"The top of the icon is placed closest to the anchor."},"bottom":{"doc":"The bottom of the icon is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the icon is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the icon is placed closest to the anchor."}},"default":"center","doc":"Part of the icon placed closest to the anchor.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The icon is aligned to the plane of the map."},"viewport":{"doc":"The icon is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `icon-rotation-alignment`."}},"default":"auto","doc":"Orientation of icon when map is pitched.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The text is aligned to the plane of the map."},"viewport":{"doc":"The text is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `text-rotation-alignment`."}},"default":"auto","doc":"Orientation of text when map is pitched.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},"viewport":{"doc":"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"viewport-glyph":{"doc":"When `symbol-placement` is set to `point`, aligns text to the x-axis of the viewport. When `symbol-placement` is set to `line` or `line-center`, aligns glyphs to the x-axis of the viewport and places them along the line."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"},"`viewport-glyph` value":{"js":"2.1.8","android":"https://github.com/maplibre/maplibre-native/issues/250","ios":"https://github.com/maplibre/maplibre-native/issues/250"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"doc":"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"doc":"Fonts to use for displaying text. If the `glyphs` root property is specified, this array is joined together and interpreted as a font stack name. Otherwise, it is interpreted as a cascading fallback list of local font names.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"},"local fonts":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/3302","android":"https://github.com/maplibre/maplibre-native/issues/165","ios":"https://github.com/maplibre/maplibre-native/issues/165"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","doc":"Font size.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","doc":"The maximum line width for text wrapping.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","doc":"Text leading value for multi-line text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","doc":"Text tracking amount.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{"doc":"The text is aligned towards the anchor position."},"left":{"doc":"The text is aligned to the left."},"center":{"doc":"The text is centered."},"right":{"doc":"The text is aligned to the right."}},"default":"center","doc":"Text justification options.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"},"auto":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"doc":"Radial offset of text, in the direction of the symbol\'s anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"},"data-driven styling":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{"type":"variableAnchorOffsetCollection","requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations, each paired with an offset value. The renderer will attempt to place the label at each location, in order, before moving on to the next location+offset. Use `text-justify: auto` to choose justification based on anchor position. \\n\\n The length of the array must be even, and must alternate between enum and point entries. i.e., each anchor location must be accompanied by a point, and that point defines the offset when the corresponding anchor location is used. Positive offset values indicate right and down, while negative values indicate left and up. Anchor locations may repeat, allowing the renderer to try multiple offsets to try and place a label using the same anchor. \\n\\n When present, this property takes precedence over `text-anchor`, `text-variable-anchor`, `text-offset`, and `text-radial-offset`. \\n\\n ```json \\n\\n { \\"text-variable-anchor-offset\\": [\\"top\\", [0, 4], \\"left\\", [3,0], \\"bottom\\", [1, 1]] } \\n\\n ``` \\n\\n When the renderer chooses the `top` anchor, `[0, 4]` will be used for `text-offset`; the text will be shifted down by 4 ems. \\n\\n When the renderer chooses the `left` anchor, `[3, 0]` will be used for `text-offset`; the text will be shifted right by 3 ems.","sdk-support":{"basic functionality":{"js":"3.3.0","ios":"6.8.0","android":"11.6.0"},"data-driven styling":{"js":"3.3.0","ios":"https://github.com/maplibre/maplibre-native/issues/2358","android":"https://github.com/maplibre/maplibre-native/issues/2358"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{"type":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"default":"center","doc":"Part of the text placed closest to the anchor.","requires":["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","doc":"Maximum angle change between adjacent characters.","requires":["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{"doc":"If a text\'s language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},"vertical":{"doc":"If a text\'s language supports vertical writing mode, symbols with point placement would be laid out vertically."}},"doc":"The property allows control over a symbol\'s orientation. Note that the property values act as a hint, so that a symbol whose language doesnt support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single \'vertical\' enum value. The order of elements in an array define priority order for the placement of an orientation variant.","requires":["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{"js":"1.3.0","android":"8.3.0","ios":"5.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the text clockwise.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","doc":"Size of the additional area around the text bounding box used for detecting symbol collisions.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"doc":"If true, the text may be flipped vertically to prevent it from being rendered upside-down.","requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{"doc":"The text is not altered."},"uppercase":{"doc":"Forces all letters to be displayed in uppercase."},"lowercase":{"doc":"Forces all letters to be displayed in lowercase."}},"default":"none","doc":"Specifies how to capitalize text, similar to the CSS `text-transform` property.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","doc":"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the text will be visible even if it collides with other previously drawn symbols.","requires":["text-field",{"!":"text-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-overlap":{"type":"enum","values":{"never":{"doc":"The text will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The text will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the text collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new text is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new text is visible."}},"doc":"Allows for control over whether to show symbol text when it overlaps other symbols on the map. If `text-overlap` is not set, `text-allow-overlap` is used instead","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"doc":"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.","requires":["text-field","icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"property-type":"constant"}}'),Ede={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Ode={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},Bde={type:"array",value:"*",doc:"A filter selects specific features from a layer."},Ide={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key]  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key]  value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key]  value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key]  {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key]  {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0  ...  fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0  ...  fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `f0  ...  fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'}},doc:"The filter operator."},kde={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},Tde={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},Rde={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},Dde=JSON.parse('{"doc":"","type":"enum","values":{"let":{"doc":"Binds expressions to named variables, which can then be referenced in the result expression using `[\\"var\\", \\"variable_name\\"]`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["var_1_name","var_1_value","...","var_n_name","var_n_value","expression"],"output-type":"any"}],"parameters":[{"name":"var_i_name","type":"string literal","description":"The name of the i-th variable."},{"name":"var_i_value","type":"any","description":"The value of the i-th variable."},{"name":"expression","type":"any","description":"The expression within which the named variables can be referenced."}]},"example":["let","someNumber",500,["interpolate",["linear"],["var","someNumber"],274,"#edf8e9",1551,"#006d2c"]],"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"var":{"doc":"References variable bound using `let`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["var_name"],"output-type":"any"}],"parameters":[{"name":"var_name","type":"string literal","description":"The name of the variable bound using `let`."}]},"example":["var","density"],"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"literal":{"doc":"Provides a literal array or object value.\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","syntax":{"overloads":[{"parameters":["json_object"],"output-type":"object"},{"parameters":["json_array"],"output-type":"array"}],"parameters":[{"name":"json_object","type":"JSON object"},{"name":"json_array","type":"JSON array"}]},"example":["literal",["DIN Offc Pro Italic","Arial Unicode MS Regular"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"array":{"doc":"Asserts that the input is an array (optionally with a specific item type and length). If, when the input expression is evaluated, it is not of the asserted type or length, then this assertion will cause the whole expression to be aborted.","syntax":{"overloads":[{"parameters":["value"],"output-type":"array"},{"parameters":["type","value"],"output-type":"array<type>"},{"parameters":["type","length","value"],"output-type":"array<type, length>"}],"parameters":[{"name":"value","type":"any"},{"name":"type","type":"\\"string\\" | \\"number\\" | \\"boolean\\"","description":"The asserted type of the input array."},{"name":"length","type":"number literal","description":"The asserted length of the input array."}]},"example":["array","string",3,["literal",["a","b","c"]]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"at":{"doc":"Retrieves an item from an array.","syntax":{"overloads":[{"parameters":["index","array"],"output-type":"T"}],"parameters":[{"name":"index","type":"number","description":"The index into `array`."},{"name":"array","type":"array<T>","description":"The array of items to retrieve the specified item from."}]},"example":["at",1,["literal",["a","b","c"]]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"in":{"doc":"Determines whether an item exists in an array or a substring exists in a string.\\n\\n - [Measure distances](https://maplibre.org/maplibre-gl-js/docs/examples/measure-distances/)","syntax":{"overloads":[{"parameters":["item","array"],"output-type":"boolean"},{"parameters":["substring","string"],"output-type":"boolean"}],"parameters":[{"name":"item","type":"T","description":"The needle to search for within `array`."},{"name":"array","type":"array<T>","description":"The haystack through which to search for `item`."},{"name":"substring","type":"string","description":"The needle to search for within `string`."},{"name":"string","type":"string","description":"The haystack through which to search for `substring`."}]},"example":["in","$type","Point"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.6.0","android":"9.1.0","ios":"5.8.0"}}},"index-of":{"doc":"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["item","array","from_index?"],"output-type":"number"},{"parameters":["substring","string","from_index?"],"output-type":"number"}],"parameters":[{"name":"item","type":"T","description":"The needle to search for within `array`."},{"name":"array","type":"array<T>","description":"The haystack through which to search for `item`."},{"name":"substring","type":"string","description":"The needle to search for within `string`."},{"name":"string","type":"string","description":"The haystack through which to search for `substring`."},{"name":"from_index","type":"number","description":"The index from where to begin the search."}]},"example":["index-of","foo",["baz","bar","hello","foo","world"]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"slice":{"doc":"Returns a subarray from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["array","start_index","end_index?"],"output-type":"array<T>"},{"parameters":["string","start_index","end_index?"],"output-type":"string"}],"parameters":[{"name":"array","type":"array<T>","description":"The original array from which to extract the subarray."},{"name":"string","type":"string","description":"The original string from which to extract the substring."},{"name":"start_index","type":"number","description":"The inclusive index from which `slice` extracts items or characters from the subarray or substring."},{"name":"end_index","type":"number","description":"The non-inclusive index up to which `slice` extracts items or characters from the subarray or substring."}]},"example":["slice",["get","name"],0,3],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"case":{"doc":"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["condition_1","output_1","...","condition_n","output_n","fallback"],"output-type":"any"}],"parameters":[{"name":"condition_i","type":"boolean"},{"name":"output_i","type":"any"},{"name":"fallback","type":"any","description":"The result when no condition evaluates to true."}]},"example":["case",["boolean",["feature-state","hover"],false],1,0.5],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"match":{"doc":"Selects the output whose label value matches the input value, or the fallback value if no match is found. The input can be any expression (e.g. `[\\"get\\", \\"building_type\\"]`). Each label must be either:\\n\\n - a single literal value; or\\n\\n - an array of literal values, whose values must be all strings or all numbers (e.g. `[100, 101]` or `[\\"c\\", \\"b\\"]`). The input matches if any of the values in the array matches, similar to the `\\"in\\"` operator.\\n\\nEach label must be unique. If the input type does not match the type of the labels, the result will be the fallback value.","syntax":{"overloads":[{"parameters":["input","label_1","output_1","...","label_n","output_n","fallback"],"output-type":"any"}],"parameters":[{"name":"input","type":"string | number","description":"Any expression."},{"name":"label_i","type":"string literal | number literal | array<string literal> | array<number literal>","description":"The i-th literal value or array of literal values to match the input against."},{"name":"output_i","type":"any","description":"The result when the i-th label is the first label to match the input."},{"name":"fallback","type":"any","description":"The result when no label matches the input."}]},"example":["match",["get","building_type"],"residential","#f00","commercial","#0f0","#000"],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"coalesce":{"doc":"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/use-a-fallback-image/)","syntax":{"overloads":[{"parameters":["expression_1","...","expression_n"],"output-type":"any"}],"parameters":[{"name":"expression_i","type":"any"}]},"example":["coalesce",["image",["concat",["get","icon"],"_15"]],["image","marker_15"]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"step":{"doc":"Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order.\\n\\nReturns the output value of the stop just less than the input, or the first output if the input is less than the first stop.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["input","output_0","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"any"}],"parameters":[{"name":"input","type":"number","description":"Any numeric expression."},{"name":"output_0","type":"any","description":"The result when the `input` is less than the first stop."},{"name":"stop_i_input","type":"number literal","description":"The value of the i-th stop against which the `input` is compared."},{"name":"stop_i_output","type":"any","description":"The result when the i-th stop is the last stop less than the `input`."}]},"example":["step",["get","point_count"],20,100,30,750,40],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, `color`, `array<color>`, or `projection`.\\n\\nInterpolation types:\\n\\n- `[\\"linear\\"]`, or an expression returning one of those types: Interpolates linearly between the pair of stops just less than and just greater than the input.\\n\\n- `[\\"exponential\\", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\\n\\n- `[\\"cubic-bezier\\", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.\\n\\n - [Animate map camera around a point](https://maplibre.org/maplibre-gl-js/docs/examples/animate-camera-around-point/)\\n\\n - [Change building color based on zoom level](https://maplibre.org/maplibre-gl-js/docs/examples/change-building-color-based-on-zoom-level/)\\n\\n - [Create a heatmap layer](https://maplibre.org/maplibre-gl-js/docs/examples/heatmap-layer/)\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"number | array<number> | color | array<color> | projection"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","description":"The interpolation type."},{"name":"input","type":"number","description":"Any numeric expression."},{"name":"stop_i_input","type":"number literal","description":"The value of the i-th stop against which the `input` is compared."},{"name":"stop_i_output","type":"number | array<number> | color | array<color> | projection","description":"The output value corresponding to the i-th stop."}]},"example":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate-hcl":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color` or `array<color>`, and the interpolation is performed in the Hue-Chroma-Luminance color space.","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"color | array<color>"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]"},{"name":"input","type":"number"},{"name":"stop_i_input","type":"number literal"},{"name":"stop_i_output","type":"color | array<color>"}]},"example":["interpolate-hcl",["linear"],["zoom"],15,"#f00",15.05,"#00f"],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"interpolate-lab":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color` or `array<color>`, and the interpolation is performed in the CIELAB color space.","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"color | array<color>"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]"},{"name":"input","type":"number"},{"name":"stop_i_input","type":"number literal"},{"name":"stop_i_output","type":"color | array<color>"}]},"example":["interpolate-lab",["linear"],["zoom"],15,"#f00",15.05,"#00f"],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"ln2":{"doc":"Returns the mathematical constant ln(2).","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["ln2"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"pi":{"doc":"Returns the mathematical constant pi.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["pi"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"e":{"doc":"Returns the mathematical constant e.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["e"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"typeof":{"doc":"Returns a string describing the type of the given value.","syntax":{"overloads":[{"parameters":["value"],"output-type":"string"}],"parameters":[{"name":"value","type":"any"}]},"example":["typeof",["get","name"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"string":{"doc":"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"string"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["string",["get","name"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"number":{"doc":"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"number"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["number",["get","population"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"boolean":{"doc":"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"boolean"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["boolean",["feature-state","hover"],false],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"object":{"doc":"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"object"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["object",["get","some-property"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"collator":{"doc":"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.","syntax":{"overloads":[{"parameters":["options"],"output-type":"collator"}],"parameters":[{"name":"options","type":"{ \\"case-sensitive\\"?: boolean, \\"diacritic-sensitive\\"?: boolean, \\"locale\\"?: string }"}]},"example":["collator",{"case-sensitive":true,"diacritic-sensitive":true,"locale":"fr"}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"format":{"doc":"Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#image) expression. Strings may be followed by a style override object that supports the following properties:\\n\\n- `\\"text-font\\"`: Overrides the font stack specified by the root layout property.\\n\\n- `\\"text-color\\"`: Overrides the color specified by the root paint property.\\n\\n- `\\"font-scale\\"`: Applies a scaling factor on `text-size` as specified by the root layout property.\\n\\n- `\\"vertical-align\\"`: Aligns vertically text section or image in relation to the row it belongs to. Possible values are: \\n\\t- `\\"bottom\\"` *default*: align the bottom of this section with the bottom of other sections.\\n<img alt=\\"Visual representation of bottom alignment\\" src=\\"https://github.com/user-attachments/assets/0474a2fd-a4b2-417c-9187-7a13a28695bc\\"/>\\n\\t- `\\"center\\"`: align the center of this section with the center of other sections.\\n<img alt=\\"Visual representation of center alignment\\" src=\\"https://github.com/user-attachments/assets/92237455-be6d-4c5d-b8f6-8127effc1950\\"/>\\n\\t- `\\"top\\"`: align the top of this section with the top of other sections.\\n<img alt=\\"Visual representation of top alignment\\" src=\\"https://github.com/user-attachments/assets/45dccb28-d977-4abb-a006-4ea9792b7c53\\"/>\\n\\t- Refer to [the design proposal](https://github.com/maplibre/maplibre-style-spec/issues/832) for more details.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","syntax":{"overloads":[{"parameters":["input_1","style_overrides_1?","...","input_n","style_overrides_n?"],"output-type":"formatted"}],"parameters":[{"name":"input_i","type":"string | image"},{"name":"style_overrides_i","type":"{ \\"text-font\\"?: string, \\"text-color\\"?: color, \\"font-scale\\"?: number, \\"vertical-align\\"?: \\"bottom\\" | \\"center\\" | \\"top\\" }"}]},"example":["format",["upcase",["get","FacilityName"]],{"font-scale":0.8},"\\n\\n",{},["downcase",["get","Comments"]],{"font-scale":0.6,"vertical-align":"center"}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-font":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"font-scale":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-color":{"js":"1.3.0","android":"7.3.0","ios":"4.10.0"},"vertical-align":{"js":"5.1.0","android":"https://github.com/maplibre/maplibre-native/issues/3055","ios":"https://github.com/maplibre/maplibre-native/issues/3055"},"image":{"js":"1.6.0","android":"8.6.0","ios":"5.7.0"}}},"image":{"doc":"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/use-a-fallback-image/)","syntax":{"overloads":[{"parameters":["image_name"],"output-type":"image"}],"parameters":[{"name":"image_name","type":"string"}]},"example":["image","marker_15"],"group":"Types","sdk-support":{"basic functionality":{"js":"1.4.0","android":"8.6.0","ios":"5.7.0"}}},"global-state":{"doc":"Retrieves a property value from global state that can be set with platform-specific APIs. Defaults can be provided using the [`state`](https://maplibre.org/maplibre-style-spec/root/#state) root property. Returns `null` if no value nor default value is set for the retrieved property.","group":"Lookup","syntax":{"overloads":[{"parameters":["property_name"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string literal","description":"The name of the global state property to retrieve."}]},"example":["global-state","someProperty"],"sdk-support":{"basic functionality":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/4964","android":"https://github.com/maplibre/maplibre-native/issues/3302","ios":"https://github.com/maplibre/maplibre-native/issues/3302"}}},"number-format":{"doc":"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input","format_options"],"output-type":"string"}],"parameters":[{"name":"input","type":"number"},{"name":"format_options","type":"{ \\"locale\\"?: string, \\"currency\\"?: string, \\"min-fraction-digits\\"?: number, \\"max-fraction-digits\\"?: number }"}]},"example":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.54.0","android":"8.4.0","ios":"supported"}}},"to-string":{"doc":"Converts the input value to a string. If the input is `null`, the result is `\\"\\"`. If the input is a boolean, the result is `\\"true\\"` or `\\"false\\"`. If the input is a number, it is converted to a string as specified by the [\\"NumberToString\\" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `\\"rgba(r,g,b,a)\\"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-time-slider/)","syntax":{"overloads":[{"parameters":["value"],"output-type":"string"}],"parameters":[{"name":"value","type":"any"}]},"example":["to-string",["get","mag"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-number":{"doc":"Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the [\\"ToNumber Applied to the String Type\\" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"number"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["to-number","someProperty"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-boolean":{"doc":"Converts the input value to a boolean. The result is `false` when the input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.","syntax":{"overloads":[{"parameters":["value"],"output-type":"boolean"}],"parameters":[{"name":"value","type":"any"}]},"example":["to-boolean","someProperty"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-rgba":{"doc":"Returns a four-element array containing the input color\'s red, green, blue, and alpha components, in that order.","syntax":{"overloads":[{"parameters":["color"],"output-type":"array"}],"parameters":[{"name":"color","type":"color"}]},"example":["to-rgba","#ff0000"],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-color":{"doc":"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"color"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["to-color","#edf8e9"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgb":{"doc":"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.","syntax":{"overloads":[{"parameters":["red","green","blue"],"output-type":"color"}],"parameters":[{"name":"red","type":"number"},{"name":"green","type":"number"},{"name":"blue","type":"number"}]},"example":["rgb",255,0,0],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgba":{"doc":"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.","syntax":{"overloads":[{"parameters":["red","green","blue","alpha"],"output-type":"color"}],"parameters":[{"name":"red","type":"number"},{"name":"green","type":"number"},{"name":"blue","type":"number"},{"name":"alpha","type":"number"}]},"example":["rgba",255,0,0,1],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"get":{"doc":"Retrieves a property value from the current feature\'s properties, or from another object if a second argument is provided. Returns null if the requested property is missing.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)\\n\\n - [Extrude polygons for 3D indoor mapping](https://maplibre.org/maplibre-gl-js/docs/examples/extrude-polygons-for-3d-indoor-mapping/)","syntax":{"overloads":[{"parameters":["property_name","object?"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string","description":"The name of the property to retrieve the value of."},{"name":"object","type":"object","description":"The object to retrieve the value from."}]},"example":["get","someProperty"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"has":{"doc":"Tests for the presence of a property value in the current feature\'s properties, or from another object if a second argument is provided.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["property_name","object?"],"output-type":"boolean"}],"parameters":[{"name":"property_name","type":"string","description":"The name of the property to test for the presence of."},{"name":"object","type":"object","description":"The object in which to test for the presence of the `property_name` property."}]},"example":["has","someProperty"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"length":{"doc":"Gets the length of an array or string. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["array_or_string"],"output-type":"number"}],"parameters":[{"name":"array_or_string","type":"array | string"}]},"example":["length",["get","myArray"]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"properties":{"doc":"Gets the feature properties object.  Note that in some cases, it may be more efficient to use [\\"get\\", \\"property_name\\"] directly.","syntax":{"overloads":[{"parameters":[],"output-type":"object"}]},"example":["properties"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"feature-state":{"doc":"Retrieves a property value from the current feature\'s state. Returns null if the requested property is not present on the feature\'s state. A feature\'s state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. When `source.promoteId` is not provided, features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. When `source.promoteId` is provided, features are identified by their `promoteId` property, which may be a number, string, or any primitive data type. Note that [\\"feature-state\\"] can only be used with paint properties that support data-driven styling.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)","syntax":{"overloads":[{"parameters":["property_name"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string"}]},"example":["feature-state","hover"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.46.0","ios":"https://github.com/maplibre/maplibre-native/issues/1698","android":"https://github.com/maplibre/maplibre-native/issues/1698"}}},"geometry-type":{"doc":"Returns the feature\'s simple geometry type: `Point`, `LineString`, or `Polygon`. `MultiPoint`, `MultiLineString`, and `MultiPolygon` are returned as `Point`, `LineString`, and `Polygon`, respectively.","syntax":{"overloads":[{"parameters":[],"output-type":"string"}]},"example":["==",["geometry-type"],"Polygon"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"id":{"doc":"Gets the feature\'s id, if it has one.","syntax":{"overloads":[{"parameters":[],"output-type":"any"}]},"example":["id"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"zoom":{"doc":"Gets the current zoom level.  Note that in style layout and paint properties, [\\"zoom\\"] may only appear as the input to a top-level \\"step\\" or \\"interpolate\\" expression.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"group":"Zoom","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"heatmap-density":{"doc":"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["heatmap-density"],"group":"Heatmap","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"elevation":{"doc":"Gets the elevation of a pixel (in meters above the vertical datum reference of the `raster-dem` tiles) from a `raster-dem` source. Can only be used in the `color-relief-color` property of a `color-relief` layer.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["elevation"],"group":"Color Relief","sdk-support":{"basic functionality":{"js":"5.6.0","android":"https://github.com/maplibre/maplibre-native/issues/3408","ios":"https://github.com/maplibre/maplibre-native/issues/3408"}}},"line-progress":{"doc":"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["line-progress"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.6.0"}}},"accumulated":{"doc":"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.","syntax":{"overloads":[{"parameters":[],"output-type":"any"}]},"example":["accumulated"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.53.0","ios":"supported","android":"supported"}}},"+":{"doc":"Returns the sum of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["+",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"*":{"doc":"Returns the product of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["*",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"-":{"doc":"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"},{"parameters":["single_input"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The number from which to subtract `input_2`."},{"name":"input_2","type":"number","description":"The number to subtract from `input_1`."},{"name":"single_input","type":"number","description":"The number to subtract from 0."}]},"example":["-",10],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"/":{"doc":"Returns the result of floating point division of the first input by the second.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The dividend."},{"name":"input_2","type":"number","description":"The divisor."}]},"example":["/",["get","population"],["get","sq-km"]],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"%":{"doc":"Returns the remainder after integer division of the first input by the second.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The dividend."},{"name":"input_2","type":"number","description":"The divisor."}]},"example":["%",10,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"^":{"doc":"Returns the result of raising the first input to the power specified by the second.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The base."},{"name":"input_2","type":"number","description":"The exponent."}]},"example":["^",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sqrt":{"doc":"Returns the square root of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number","description":"The radicand."}]},"example":["sqrt",9],"group":"Math","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"log10":{"doc":"Returns the base-ten logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["log10",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"ln":{"doc":"Returns the natural logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["ln",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"log2":{"doc":"Returns the base-two logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["log2",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sin":{"doc":"Returns the sine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["sin",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"cos":{"doc":"Returns the cosine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["cos",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"tan":{"doc":"Returns the tangent of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["tan",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"asin":{"doc":"Returns the arcsine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["asin",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"acos":{"doc":"Returns the arccosine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["acos",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"atan":{"doc":"Returns the arctangent of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["atan",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"min":{"doc":"Returns the minimum value of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["min",1,2],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"max":{"doc":"Returns the maximum value of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["max",1,2],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"round":{"doc":"Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `[\\"round\\", -1.5]` evaluates to -2.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["round",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"abs":{"doc":"Returns the absolute value of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["abs",-1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"ceil":{"doc":"Returns the smallest integer that is greater than or equal to the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["ceil",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"floor":{"doc":"Returns the largest integer that is less than or equal to the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["floor",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"distance":{"doc":"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.","syntax":{"overloads":[{"parameters":["geojson"],"output-type":"number"}],"parameters":[{"name":"geojson","type":"GeoJSON object"}]},"example":["distance",{"type":"Point","coordinates":[0,0]}],"group":"Math","sdk-support":{"basic functionality":{"js":"4.2.0","android":"9.2.0","ios":"5.9.0"}}},"==":{"doc":"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Add multiple geometries from one GeoJSON source](https://maplibre.org/maplibre-gl-js/docs/examples/multiple-geometries/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Display buildings in 3D](https://maplibre.org/maplibre-gl-js/docs/examples/display-buildings-in-3d/)\\n\\n - [Filter symbols by toggling a list](https://maplibre.org/maplibre-gl-js/docs/examples/filter-symbols-by-toggling-a-list/)","syntax":{"overloads":[{"parameters":["input_1","input_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"input_1","type":"any"},{"name":"input_2","type":"any"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["==","$type","Polygon"],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"!=":{"doc":"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input_1","input_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"input_1","type":"any"},{"name":"input_2","type":"any"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["!=","cluster",true],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">":{"doc":"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":[">",["get","mag"],2],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<":{"doc":"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["<",["get","mag"],2],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">=":{"doc":"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":[">=",["get","mag"],6],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<=":{"doc":"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["<=",["get","mag"],6],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"all":{"doc":"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"boolean"}],"parameters":[{"name":"input_i","type":"boolean"}]},"example":["all",[">=",["get","mag"],4],["<",["get","mag"],5]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"any":{"doc":"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"boolean"}],"parameters":[{"name":"input_i","type":"boolean"}]},"example":["any",[">=",["get","mag"],4],["<",["get","mag"],5]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"!":{"doc":"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"boolean"}],"parameters":[{"name":"input","type":"boolean"}]},"example":["!",["has","point_count"]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"within":{"doc":"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\\n\\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\\n\\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line\'s endpoint is on the boundary.","syntax":{"overloads":[{"parameters":["geojson"],"output-type":"boolean"}],"parameters":[{"name":"geojson","type":"GeoJSON object"}]},"example":["within",{"type":"Polygon","coordinates":[[[0,0],[0,5],[5,5],[5,0],[0,0]]]}],"group":"Decision","sdk-support":{"basic functionality":{"js":"1.9.0","android":"9.1.0","ios":"5.8.0"}}},"is-supported-script":{"doc":"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the `mapbox-gl-rtl-text` plugin is not in use in MapLibre GL JS).","syntax":{"overloads":[{"parameters":["input"],"output-type":"boolean"}],"parameters":[{"name":"input","type":"string"}]},"example":["is-supported-script",""],"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.6.0","ios":"supported"}}},"upcase":{"doc":"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"string"}],"parameters":[{"name":"input","type":"string"}]},"example":["upcase",["get","name"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"downcase":{"doc":"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"string"}],"parameters":[{"name":"input","type":"string"}]},"example":["downcase",["get","name"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"concat":{"doc":"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.\\n\\n - [Add a generated icon to the map](https://maplibre.org/maplibre-gl-js/docs/examples/add-a-generated-icon-to-the-map/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-time-slider/)\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)\\n\\n - [Variable label placement](https://maplibre.org/maplibre-gl-js/docs/examples/variable-label-placement/)","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"string"}],"parameters":[{"name":"input_i","type":"any"}]},"example":["concat","square-rgb-",["get","color"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"resolved-locale":{"doc":"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.","syntax":{"overloads":[{"parameters":["collator"],"output-type":"string"}],"parameters":[{"name":"collator","type":"collator"}]},"example":["resolved-locale",["collator",{"case-sensitive":true,"diacritic-sensitive":false,"locale":"de"}]],"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}}}}'),Pde={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0 (0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0, directly above, to 180, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}}},Ude={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the sky."},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color at the horizon."},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the fog. Requires 3D terrain."},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog over the 3D terrain. Where 0 is the map center and 1 is the horizon."},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog color and the horizon color. Where 0 is using the horizon color only and 1 is using the fog color only."},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the sky color and the horizon color. Where 1 is blending the color at the middle of the sky and 0 is not blending at all and using the sky color only."},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the atmosphere. Where 1 is visible atmosphere and 0 is hidden. It is best to interpolate this expression when using globe projection."}},Kde={source:{type:"string",doc:"The source for the terrain data.",required:!0,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}},exaggeration:{type:"number",minimum:0,doc:"The exaggeration of the terrain - how high it will look.",default:1,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}}},Lde={type:{type:"projectionDefinition",doc:"The projection definition type. Can be specified as a string, a transition state, or an expression.",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},Fde=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],zde={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},jde={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:'Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. GeoJSON sources with `lineMetrics: true` specified won\'t render dashed lines to the expected scale. Zoom-dependent expressions will be evaluated only at integer zoom levels. The only way to create an array value is using `["literal", [...]]`; arrays cannot be read from or derived from feature properties.',minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"https://github.com/maplibre/maplibre-gl-js/issues/1235",ios:"https://github.com/maplibre/maplibre-native/issues/744",android:"https://github.com/maplibre/maplibre-native/issues/744"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Nde={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Gde={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Wde={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline. \n\nThe unit is in pixels only for SDF sprites that were created with a blur radius of 8, multiplied by the display density. I.e., the radius needs to be 16 for `@2x` sprites, etc.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Qde={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added, or when a video is started or its coordinates are updated.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},qde={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,doc:"The direction of the light source(s) used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`. Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,doc:"The altitude of the light source(s) used to generate the hillshading with 0 as sunset and 90 as noon. Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!1,"sdk-support":{"basic functionality":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",doc:"The shading color of areas that face away from the light source(s). Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source(s). Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{doc:"The legacy hillshade method."},basic:{doc:"Basic hillshade. Uses a simple physics model where the reflected light intensity is proportional to the cosine of the angle between the incident light and the surface normal. Similar to GDAL's `gdaldem` default algorithm."},combined:{doc:"Hillshade algorithm whose intensity scales with slope. Similar to GDAL's `gdaldem` with `-combined` option."},igor:{doc:"Hillshade algorithm which tries to minimize effects on other map features beneath. Similar to GDAL's `gdaldem` with `-igor` option."},multidirectional:{doc:"Hillshade with multiple illumination directions. Uses the basic hillshade model with multiple independent light sources."}},default:"standard",doc:"The hillshade algorithm to use, one of `standard`, `basic`, `combined`, `igor`, or `multidirectional`. ![image](assets/hillshade_methods.png)","sdk-support":{"basic functionality":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Yde={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},$de={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},Vde={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},Jr={$version:ude,$root:cde,sources:Ade,source:hde,source_vector:dde,source_raster:fde,source_raster_dem:pde,source_geojson:mde,source_video:gde,source_image:yde,layer:vde,layout:bde,layout_background:Cde,layout_fill:_de,layout_circle:xde,layout_heatmap:Mde,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},"property-type":"constant"}},layout_line:wde,layout_symbol:Sde,layout_raster:Ede,layout_hillshade:Ode,"layout_color-relief":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{}},"property-type":"constant"}},filter:Bde,filter_operator:Ide,geometry_type:kde,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:

* In categorical functions, when the feature value does not match any of the stop domain values.

* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.

* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).

* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.

If no default is provided, the style property's default is used in these circumstances.`}},function_stop:Tde,expression:Rde,expression_name:Dde,light:Pde,sky:Ude,terrain:Kde,projection:Lde,paint:Fde,paint_fill:zde,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",android:"7.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:jde,paint_circle:Nde,paint_heatmap:Gde,paint_symbol:Wde,paint_raster:Qde,paint_hillshade:qde,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the color-relief will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",doc:'Defines the color of each pixel based on its elevation. Should be an expression that uses `["elevation"]` as input.',example:["interpolate",["linear"],["elevation"],0,"black",8849,"white"],transition:!1,"sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:Yde,transition:$de,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:Vde};var ow={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.8.0/LICENSE.txt
 */var Hde=ow.exports,VF;function Zde(){return VF||(VF=1,(function(n,e){(function(t,i){n.exports=i()})(Hde,(function(){var t={},i={};function r(s,a,c){if(i[s]=c,s==="index"){var h="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",m={};return i.shared(m),i.index(t,m),typeof window<"u"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([h],{type:"text/javascript"}))),t}}r("shared",["exports"],(function(s){function a(f,u,d,b){return new(d||(d=Promise))((function(S,B){function D(te){try{W(b.next(te))}catch(re){B(re)}}function K(te){try{W(b.throw(te))}catch(re){B(re)}}function W(te){var re;te.done?S(te.value):(re=te.value,re instanceof d?re:new d((function(Ae){Ae(re)}))).then(D,K)}W((b=b.apply(f,u||[])).next())}))}function c(f,u){this.x=f,this.y=u}function h(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var m,y;typeof SuppressedError=="function"&&SuppressedError,c.prototype={clone(){return new c(this.x,this.y)},add(f){return this.clone()._add(f)},sub(f){return this.clone()._sub(f)},multByPoint(f){return this.clone()._multByPoint(f)},divByPoint(f){return this.clone()._divByPoint(f)},mult(f){return this.clone()._mult(f)},div(f){return this.clone()._div(f)},rotate(f){return this.clone()._rotate(f)},rotateAround(f,u){return this.clone()._rotateAround(f,u)},matMult(f){return this.clone()._matMult(f)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(f){return this.x===f.x&&this.y===f.y},dist(f){return Math.sqrt(this.distSqr(f))},distSqr(f){const u=f.x-this.x,d=f.y-this.y;return u*u+d*d},angle(){return Math.atan2(this.y,this.x)},angleTo(f){return Math.atan2(this.y-f.y,this.x-f.x)},angleWith(f){return this.angleWithSep(f.x,f.y)},angleWithSep(f,u){return Math.atan2(this.x*u-this.y*f,this.x*f+this.y*u)},_matMult(f){const u=f[2]*this.x+f[3]*this.y;return this.x=f[0]*this.x+f[1]*this.y,this.y=u,this},_add(f){return this.x+=f.x,this.y+=f.y,this},_sub(f){return this.x-=f.x,this.y-=f.y,this},_mult(f){return this.x*=f,this.y*=f,this},_div(f){return this.x/=f,this.y/=f,this},_multByPoint(f){return this.x*=f.x,this.y*=f.y,this},_divByPoint(f){return this.x/=f.x,this.y/=f.y,this},_unit(){return this._div(this.mag()),this},_perp(){const f=this.y;return this.y=this.x,this.x=-f,this},_rotate(f){const u=Math.cos(f),d=Math.sin(f),b=d*this.x+u*this.y;return this.x=u*this.x-d*this.y,this.y=b,this},_rotateAround(f,u){const d=Math.cos(f),b=Math.sin(f),S=u.y+b*(this.x-u.x)+d*(this.y-u.y);return this.x=u.x+d*(this.x-u.x)-b*(this.y-u.y),this.y=S,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:c},c.convert=function(f){if(f instanceof c)return f;if(Array.isArray(f))return new c(+f[0],+f[1]);if(f.x!==void 0&&f.y!==void 0)return new c(+f.x,+f.y);throw new Error("Expected [x, y] or {x, y} point format")};var M=(function(){if(y)return m;function f(u,d,b,S){this.cx=3*u,this.bx=3*(b-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(S-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=d,this.p2x=b,this.p2y=S}return y=1,m=f,f.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,d){if(d===void 0&&(d=1e-6),u<0)return 0;if(u>1)return 1;for(var b=u,S=0;S<8;S++){var B=this.sampleCurveX(b)-u;if(Math.abs(B)<d)return b;var D=this.sampleCurveDerivativeX(b);if(Math.abs(D)<1e-6)break;b-=B/D}var K=0,W=1;for(b=u,S=0;S<20&&(B=this.sampleCurveX(b),!(Math.abs(B-u)<d));S++)u>B?K=b:W=b,b=.5*(W-K)+K;return b},solve:function(u,d){return this.sampleCurveY(this.solveCurveX(u,d))}},m})(),x=h(M);let k,P;function F(){return k==null&&(k=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),k}function j(){if(P==null&&(P=!1,F())){const u=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(u){for(let b=0;b<25;b++){const S=4*b;u.fillStyle=`rgb(${S},${S+1},${S+2})`,u.fillRect(b%5,Math.floor(b/5),1,1)}const d=u.getImageData(0,0,5,5).data;for(let b=0;b<100;b++)if(b%4!=3&&d[b]!==b){P=!0;break}}}return P||!1}var q=1e-6,V=typeof Float32Array<"u"?Float32Array:Array;function H(){var f=new V(9);return V!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function G(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function Y(){var f=new V(3);return V!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function z(f){var u=f[0],d=f[1],b=f[2];return Math.sqrt(u*u+d*d+b*b)}function se(f,u,d){var b=new V(3);return b[0]=f,b[1]=u,b[2]=d,b}function le(f,u,d){return f[0]=u[0]+d[0],f[1]=u[1]+d[1],f[2]=u[2]+d[2],f}function me(f,u,d){return f[0]=u[0]*d,f[1]=u[1]*d,f[2]=u[2]*d,f}function de(f,u,d){var b=u[0],S=u[1],B=u[2],D=d[0],K=d[1],W=d[2];return f[0]=S*W-B*K,f[1]=B*D-b*W,f[2]=b*K-S*D,f}var be,Ee=z;function De(f,u,d){var b=u[0],S=u[1],B=u[2],D=u[3];return f[0]=d[0]*b+d[4]*S+d[8]*B+d[12]*D,f[1]=d[1]*b+d[5]*S+d[9]*B+d[13]*D,f[2]=d[2]*b+d[6]*S+d[10]*B+d[14]*D,f[3]=d[3]*b+d[7]*S+d[11]*B+d[15]*D,f}function je(){var f=new V(4);return V!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f[3]=1,f}function Ie(f,u,d,b){var S=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",B=Math.PI/360;u*=B,b*=B,d*=B;var D=Math.sin(u),K=Math.cos(u),W=Math.sin(d),te=Math.cos(d),re=Math.sin(b),Ae=Math.cos(b);switch(S){case"xyz":f[0]=D*te*Ae+K*W*re,f[1]=K*W*Ae-D*te*re,f[2]=K*te*re+D*W*Ae,f[3]=K*te*Ae-D*W*re;break;case"xzy":f[0]=D*te*Ae-K*W*re,f[1]=K*W*Ae-D*te*re,f[2]=K*te*re+D*W*Ae,f[3]=K*te*Ae+D*W*re;break;case"yxz":f[0]=D*te*Ae+K*W*re,f[1]=K*W*Ae-D*te*re,f[2]=K*te*re-D*W*Ae,f[3]=K*te*Ae+D*W*re;break;case"yzx":f[0]=D*te*Ae+K*W*re,f[1]=K*W*Ae+D*te*re,f[2]=K*te*re-D*W*Ae,f[3]=K*te*Ae-D*W*re;break;case"zxy":f[0]=D*te*Ae-K*W*re,f[1]=K*W*Ae+D*te*re,f[2]=K*te*re+D*W*Ae,f[3]=K*te*Ae-D*W*re;break;case"zyx":f[0]=D*te*Ae-K*W*re,f[1]=K*W*Ae+D*te*re,f[2]=K*te*re-D*W*Ae,f[3]=K*te*Ae+D*W*re;break;default:throw new Error("Unknown angle order "+S)}return f}function Qe(){var f=new V(2);return V!=Float32Array&&(f[0]=0,f[1]=0),f}function et(f,u){var d=new V(2);return d[0]=f,d[1]=u,d}Y(),be=new V(4),V!=Float32Array&&(be[0]=0,be[1]=0,be[2]=0,be[3]=0),Y(),se(1,0,0),se(0,1,0),je(),je(),H(),Qe();const dt=8192;function ke(f,u,d){return u*(dt/(f.tileSize*Math.pow(2,d-f.tileID.overscaledZ)))}function we(f,u){return(f%u+u)%u}function ze(f,u,d){return f*(1-d)+u*d}function xe(f){if(f<=0)return 0;if(f>=1)return 1;const u=f*f,d=u*f;return 4*(f<.5?d:3*(f-u)+d-.75)}function At(f,u,d,b){const S=new x(f,u,d,b);return B=>S.solve(B)}const it=At(.25,.1,.25,1);function bt(f,u,d){return Math.min(d,Math.max(u,f))}function Bt(f,u,d){const b=d-u,S=((f-u)%b+b)%b+u;return S===u?d:S}function Ke(f,...u){for(const d of u)for(const b in d)f[b]=d[b];return f}let Te=1;function Se(f,u,d){const b={};for(const S in f)b[S]=u.call(this,f[S],S,f);return b}function Ne(f,u,d){const b={};for(const S in f)u.call(this,f[S],S,f)&&(b[S]=f[S]);return b}function ut(f){return Array.isArray(f)?f.map(ut):typeof f=="object"&&f?Se(f,ut):f}const rt={};function pt(f){rt[f]||(typeof console<"u"&&console.warn(f),rt[f]=!0)}function Dt(f,u,d){return(d.y-f.y)*(u.x-f.x)>(u.y-f.y)*(d.x-f.x)}function Ot(f){return typeof WorkerGlobalScope<"u"&&f!==void 0&&f instanceof WorkerGlobalScope}let Jt=null;function Tn(f){return typeof ImageBitmap<"u"&&f instanceof ImageBitmap}const Ln="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ii(f,u,d,b,S){return a(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const B=new VideoFrame(f,{timestamp:0});try{const D=B?.format;if(!D||!D.startsWith("BGR")&&!D.startsWith("RGB"))throw new Error(`Unrecognized format ${D}`);const K=D.startsWith("BGR"),W=new Uint8ClampedArray(b*S*4);if(yield B.copyTo(W,(function(te,re,Ae,Oe,Pe){const Le=4*Math.max(-re,0),We=(Math.max(0,Ae)-Ae)*Oe*4+Le,He=4*Oe,at=Math.max(0,re),Rt=Math.max(0,Ae);return{rect:{x:at,y:Rt,width:Math.min(te.width,re+Oe)-at,height:Math.min(te.height,Ae+Pe)-Rt},layout:[{offset:We,stride:He}]}})(f,u,d,b,S)),K)for(let te=0;te<W.length;te+=4){const re=W[te];W[te]=W[te+2],W[te+2]=re}return W}finally{B.close()}}))}let wn,Rn;function gn(f,u,d,b){return f.addEventListener(u,d,b),{unsubscribe:()=>{f.removeEventListener(u,d,b)}}}function Yn(f){return f*Math.PI/180}function Dn(f){return f/Math.PI*180}const Tt={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},_e={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},oe="AbortError";function ee(){return new Error(oe)}const ne={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ue(f){return ne.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}const ye="global-dispatcher";class Ue extends Error{constructor(u,d,b,S){super(`AJAXError: ${d} (${u}): ${b}`),this.status=u,this.statusText=d,this.url=b,this.body=S}}const Ve=()=>Ot(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,lt=function(f,u){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){const b=ue(f.url);if(b)return b(f,u);if(Ot(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:ye},u)}if(!(/^file:/.test(d=f.url)||/^file:/.test(Ve())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(b,S){return a(this,void 0,void 0,(function*(){const B=new Request(b.url,{method:b.method||"GET",body:b.body,credentials:b.credentials,headers:b.headers,cache:b.cache,referrer:Ve(),signal:S.signal});let D,K;b.type!=="json"||B.headers.has("Accept")||B.headers.set("Accept","application/json");try{D=yield fetch(B)}catch(te){throw new Ue(0,te.message,b.url,new Blob)}if(!D.ok){const te=yield D.blob();throw new Ue(D.status,D.statusText,b.url,te)}K=b.type==="arrayBuffer"||b.type==="image"?D.arrayBuffer():b.type==="json"?D.json():D.text();const W=yield K;if(S.signal.aborted)throw ee();return{data:W,cacheControl:D.headers.get("Cache-Control"),expires:D.headers.get("Expires")}}))})(f,u);if(Ot(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:ye},u)}var d;return(function(b,S){return new Promise(((B,D)=>{var K;const W=new XMLHttpRequest;W.open(b.method||"GET",b.url,!0),b.type!=="arrayBuffer"&&b.type!=="image"||(W.responseType="arraybuffer");for(const te in b.headers)W.setRequestHeader(te,b.headers[te]);b.type==="json"&&(W.responseType="text",!((K=b.headers)===null||K===void 0)&&K.Accept||W.setRequestHeader("Accept","application/json")),W.withCredentials=b.credentials==="include",W.onerror=()=>{D(new Error(W.statusText))},W.onload=()=>{if(!S.signal.aborted)if((W.status>=200&&W.status<300||W.status===0)&&W.response!==null){let te=W.response;if(b.type==="json")try{te=JSON.parse(W.response)}catch(re){return void D(re)}B({data:te,cacheControl:W.getResponseHeader("Cache-Control"),expires:W.getResponseHeader("Expires")})}else{const te=new Blob([W.response],{type:W.getResponseHeader("Content-Type")});D(new Ue(W.status,W.statusText,b.url,te))}},S.signal.addEventListener("abort",(()=>{W.abort(),D(ee())})),W.send(b.body)}))})(f,u)};function ge(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;const u=new URL(f),d=window.location;return u.protocol===d.protocol&&u.host===d.host}function Be(f,u,d){d[f]&&d[f].indexOf(u)!==-1||(d[f]=d[f]||[],d[f].push(u))}function v(f,u,d){if(d&&d[f]){const b=d[f].indexOf(u);b!==-1&&d[f].splice(b,1)}}class yt{constructor(u,d={}){Ke(this,d),this.type=u}}class Mt extends yt{constructor(u,d={}){super("error",Ke({error:u},d))}}class Pt{on(u,d){return this._listeners=this._listeners||{},Be(u,d,this._listeners),{unsubscribe:()=>{this.off(u,d)}}}off(u,d){return v(u,d,this._listeners),v(u,d,this._oneTimeListeners),this}once(u,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},Be(u,d,this._oneTimeListeners),this):new Promise((b=>this.once(u,b)))}fire(u,d){typeof u=="string"&&(u=new yt(u,d||{}));const b=u.type;if(this.listens(b)){u.target=this;const S=this._listeners&&this._listeners[b]?this._listeners[b].slice():[];for(const K of S)K.call(this,u);const B=this._oneTimeListeners&&this._oneTimeListeners[b]?this._oneTimeListeners[b].slice():[];for(const K of B)v(b,K,this._oneTimeListeners),K.call(this,u);const D=this._eventedParent;D&&(Ke(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),D.fire(u))}else u instanceof Mt&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,d){return this._eventedParent=u,this._eventedParentData=d,this}}var st={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const fn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Fn(f,u){const d={};for(const b in f)b!=="ref"&&(d[b]=f[b]);return fn.forEach((b=>{b in u&&(d[b]=u[b])})),d}function pn(f,u){if(Array.isArray(f)){if(!Array.isArray(u)||f.length!==u.length)return!1;for(let d=0;d<f.length;d++)if(!pn(f[d],u[d]))return!1;return!0}if(typeof f=="object"&&f!==null&&u!==null){if(typeof u!="object"||Object.keys(f).length!==Object.keys(u).length)return!1;for(const d in f)if(!pn(f[d],u[d]))return!1;return!0}return f===u}function $n(f,u){f.push(u)}function Zn(f,u,d){$n(d,{command:"addSource",args:[f,u[f]]})}function ai(f,u,d){$n(u,{command:"removeSource",args:[f]}),d[f]=!0}function Hi(f,u,d,b){ai(f,d,b),Zn(f,u,d)}function Ti(f,u,d){let b;for(b in f[d])if(Object.prototype.hasOwnProperty.call(f[d],b)&&b!=="data"&&!pn(f[d][b],u[d][b]))return!1;for(b in u[d])if(Object.prototype.hasOwnProperty.call(u[d],b)&&b!=="data"&&!pn(f[d][b],u[d][b]))return!1;return!0}function tr(f,u,d,b,S,B){f=f||{},u=u||{};for(const D in f)Object.prototype.hasOwnProperty.call(f,D)&&(pn(f[D],u[D])||d.push({command:B,args:[b,D,u[D],S]}));for(const D in u)Object.prototype.hasOwnProperty.call(u,D)&&!Object.prototype.hasOwnProperty.call(f,D)&&(pn(f[D],u[D])||d.push({command:B,args:[b,D,u[D],S]}))}function oi(f){return f.id}function Pi(f,u){return f[u.id]=u,f}class Zt{constructor(u,d,b,S){this.message=(u?`${u}: `:"")+b,S&&(this.identifier=S),d!=null&&d.__line__&&(this.line=d.__line__)}}function pr(f,...u){for(const d of u)for(const b in d)f[b]=d[b];return f}class Zi extends Error{constructor(u,d){super(d),this.message=d,this.key=u}}class ea{constructor(u,d=[]){this.parent=u,this.bindings={};for(const[b,S]of d)this.bindings[b]=S}concat(u){return new ea(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(`${u} not found in scope.`)}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const no={kind:"null"},sn={kind:"number"},Ci={kind:"string"},Ui={kind:"boolean"},nr={kind:"color"},Jl={kind:"projectionDefinition"},Al={kind:"object"},Ki={kind:"value"},$a={kind:"collator"},hl={kind:"formatted"},fo={kind:"padding"},Qs={kind:"colorArray"},Kl={kind:"numberArray"},io={kind:"resolvedImage"},As={kind:"variableAnchorOffsetCollection"};function pa(f,u){return{kind:"array",itemType:f,N:u}}function Dr(f){if(f.kind==="array"){const u=Dr(f.itemType);return typeof f.N=="number"?`array<${u}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${u}>`}return f.kind}const Ll=[no,sn,Ci,Ui,nr,Jl,hl,Al,pa(Ki),fo,Kl,Qs,io,As];function Da(f,u){if(u.kind==="error")return null;if(f.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!Da(f.itemType,u.itemType))&&(typeof f.N!="number"||f.N===u.N))return null}else{if(f.kind===u.kind)return null;if(f.kind==="value"){for(const d of Ll)if(!Da(d,u))return null}}return`Expected ${Dr(f)} but found ${Dr(u)} instead.`}function qs(f,u){return u.some((d=>d.kind===f.kind))}function Sl(f,u){return u.some((d=>d==="null"?f===null:d==="array"?Array.isArray(f):d==="object"?f&&!Array.isArray(f)&&typeof f=="object":d===typeof f))}function eu(f,u){return f.kind==="array"&&u.kind==="array"?f.itemType.kind===u.itemType.kind&&typeof f.N=="number":f.kind===u.kind}const $A=.96422,Vc=.82521,mc=4/29,ma=6/29,xs=3*ma*ma,gc=ma*ma*ma,tu=Math.PI/180,yc=180/Math.PI;function nu(f){return(f%=360)<0&&(f+=360),f}function Fl([f,u,d,b]){let S,B;const D=ga((.2225045*(f=VA(f))+.7168786*(u=VA(u))+.0606169*(d=VA(d)))/1);f===u&&u===d?S=B=D:(S=ga((.4360747*f+.3850649*u+.1430804*d)/$A),B=ga((.0139322*f+.0971045*u+.7141733*d)/Vc));const K=116*D-16;return[K<0?0:K,500*(S-D),200*(D-B),b]}function VA(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function ga(f){return f>gc?Math.pow(f,1/3):f/xs+mc}function iu([f,u,d,b]){let S=(f+16)/116,B=isNaN(u)?S:S+u/500,D=isNaN(d)?S:S-d/200;return S=1*Hc(S),B=$A*Hc(B),D=Vc*Hc(D),[ru(3.1338561*B-1.6168667*S-.4906146*D),ru(-.9787684*B+1.9161415*S+.033454*D),ru(.0719453*B-.2289914*S+1.4052427*D),b]}function ru(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function Hc(f){return f>ma?f*f*f:xs*(f-mc)}const Hu=Object.hasOwn||function(f,u){return Object.prototype.hasOwnProperty.call(f,u)};function Pa(f,u){return Hu(f,u)?f[u]:void 0}function Ds(f){return parseInt(f.padEnd(2,f),16)/255}function qr(f,u){return Yi(u?f/100:f,0,1)}function Yi(f,u,d){return Math.min(Math.max(u,f),d)}function ou(f){return!f.some(Number.isNaN)}const Vo={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function dl(f,u,d){return f+d*(u-f)}function Cu(f,u,d){return f.map(((b,S)=>dl(b,u[S],d)))}class sr{constructor(u,d,b,S=1,B=!0){this.r=u,this.g=d,this.b=b,this.a=S,B||(this.r*=S,this.g*=S,this.b*=S,S||this.overwriteGetter("rgb",[u,d,b,S]))}static parse(u){if(u instanceof sr)return u;if(typeof u!="string")return;const d=(function(b){if((b=b.toLowerCase().trim())==="transparent")return[0,0,0,0];const S=Pa(Vo,b);if(S){const[D,K,W]=S;return[D/255,K/255,W/255,1]}if(b.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(b)){const D=b.length<6?1:2;let K=1;return[Ds(b.slice(K,K+=D)),Ds(b.slice(K,K+=D)),Ds(b.slice(K,K+=D)),Ds(b.slice(K,K+D)||"ff")]}if(b.startsWith("rgb")){const D=b.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(D){const[K,W,te,re,Ae,Oe,Pe,Le,We,He,at,Rt]=D,ft=[re||" ",Pe||" ",He].join("");if(ft==="  "||ft==="  /"||ft===",,"||ft===",,,"){const Ct=[te,Oe,We].join(""),zt=Ct==="%%%"?100:Ct===""?255:0;if(zt){const en=[Yi(+W/zt,0,1),Yi(+Ae/zt,0,1),Yi(+Le/zt,0,1),at?qr(+at,Rt):1];if(ou(en))return en}}return}}const B=b.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(B){const[D,K,W,te,re,Ae,Oe,Pe,Le]=B,We=[W||" ",re||" ",Oe].join("");if(We==="  "||We==="  /"||We===",,"||We===",,,"){const He=[+K,Yi(+te,0,100),Yi(+Ae,0,100),Pe?qr(+Pe,Le):1];if(ou(He))return(function([at,Rt,ft,Ct]){function zt(en){const An=(en+at/30)%12,Gn=Rt*Math.min(ft,1-ft);return ft-Gn*Math.max(-1,Math.min(An-3,9-An,1))}return at=nu(at),Rt/=100,ft/=100,[zt(0),zt(8),zt(4),Ct]})(He)}}})(u);return d?new sr(...d,!1):void 0}get rgb(){const{r:u,g:d,b,a:S}=this,B=S||1/0;return this.overwriteGetter("rgb",[u/B,d/B,b/B,S])}get hcl(){return this.overwriteGetter("hcl",(function(u){const[d,b,S,B]=Fl(u),D=Math.sqrt(b*b+S*S);return[Math.round(1e4*D)?nu(Math.atan2(S,b)*yc):NaN,D,d,B]})(this.rgb))}get lab(){return this.overwriteGetter("lab",Fl(this.rgb))}overwriteGetter(u,d){return Object.defineProperty(this,u,{value:d}),d}toString(){const[u,d,b,S]=this.rgb;return`rgba(${[u,d,b].map((B=>Math.round(255*B))).join(",")},${S})`}static interpolate(u,d,b,S="rgb"){switch(S){case"rgb":{const[B,D,K,W]=Cu(u.rgb,d.rgb,b);return new sr(B,D,K,W,!1)}case"hcl":{const[B,D,K,W]=u.hcl,[te,re,Ae,Oe]=d.hcl;let Pe,Le;if(isNaN(B)||isNaN(te))isNaN(B)?isNaN(te)?Pe=NaN:(Pe=te,K!==1&&K!==0||(Le=re)):(Pe=B,Ae!==1&&Ae!==0||(Le=D));else{let ft=te-B;te>B&&ft>180?ft-=360:te<B&&B-te>180&&(ft+=360),Pe=B+b*ft}const[We,He,at,Rt]=(function([ft,Ct,zt,en]){return ft=isNaN(ft)?0:ft*tu,iu([zt,Math.cos(ft)*Ct,Math.sin(ft)*Ct,en])})([Pe,Le??dl(D,re,b),dl(K,Ae,b),dl(W,Oe,b)]);return new sr(We,He,at,Rt,!1)}case"lab":{const[B,D,K,W]=iu(Cu(u.lab,d.lab,b));return new sr(B,D,K,W,!1)}}}}sr.black=new sr(0,0,0,1),sr.white=new sr(1,1,1,1),sr.transparent=new sr(0,0,0,0),sr.red=new sr(1,0,0,1);class El{constructor(u,d,b){this.sensitivity=u?d?"variant":"case":d?"accent":"base",this.locale=b,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,d){return this.collator.compare(u,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Va=["bottom","center","top"];class Go{constructor(u,d,b,S,B,D){this.text=u,this.image=d,this.scale=b,this.fontStack=S,this.textColor=B,this.verticalAlign=D}}class Ps{constructor(u){this.sections=u}static fromString(u){return new Ps([new Go(u,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((u=>u.text.length!==0||u.image&&u.image.name.length!==0))}static factory(u){return u instanceof Ps?u:Ps.fromString(u)}toString(){return this.sections.length===0?"":this.sections.map((u=>u.text)).join("")}}class Ro{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Ro)return u;if(typeof u=="number")return new Ro([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||u.length>4)){for(const d of u)if(typeof d!="number")return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new Ro(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,d,b){return new Ro(Cu(u.values,d.values,b))}}class Eo{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Eo)return u;if(typeof u=="number")return new Eo([u]);if(Array.isArray(u)){for(const d of u)if(typeof d!="number")return;return new Eo(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,d,b){return new Eo(Cu(u.values,d.values,b))}}class Ho{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Ho)return u;if(typeof u=="string"){const b=sr.parse(u);return b?new Ho([b]):void 0}if(!Array.isArray(u))return;const d=[];for(const b of u){if(typeof b!="string")return;const S=sr.parse(b);if(!S)return;d.push(S)}return new Ho(d)}toString(){return JSON.stringify(this.values)}static interpolate(u,d,b,S="rgb"){const B=[];if(u.values.length!=d.values.length)throw new Error(`colorArray: Arrays have mismatched length (${u.values.length} vs. ${d.values.length}), cannot interpolate.`);for(let D=0;D<u.values.length;D++)B.push(sr.interpolate(u.values[D],d.values[D],b,S));return new Ho(B)}}class Pr extends Error{constructor(u){super(u),this.name="RuntimeError"}toJSON(){return this.message}}const HA=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Zo{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Zo)return u;if(Array.isArray(u)&&!(u.length<1)&&u.length%2==0){for(let d=0;d<u.length;d+=2){const b=u[d],S=u[d+1];if(typeof b!="string"||!HA.has(b)||!Array.isArray(S)||S.length!==2||typeof S[0]!="number"||typeof S[1]!="number")return}return new Zo(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,d,b){const S=u.values,B=d.values;if(S.length!==B.length)throw new Pr(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${d.toString()}`);const D=[];for(let K=0;K<S.length;K+=2){if(S[K]!==B[K])throw new Pr(`Cannot interpolate values containing mismatched anchors. from[${K}]: ${S[K]}, to[${K}]: ${B[K]}`);D.push(S[K]);const[W,te]=S[K+1],[re,Ae]=B[K+1];D.push([dl(W,re,b),dl(te,Ae,b)])}return new Zo(D)}}class Wo{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new Wo({name:u,available:!1}):null}}class Ms{constructor(u,d,b){this.from=u,this.to=d,this.transition=b}static interpolate(u,d,b){return new Ms(u,d,b)}static parse(u){return u instanceof Ms?u:Array.isArray(u)&&u.length===3&&typeof u[0]=="string"&&typeof u[1]=="string"&&typeof u[2]=="number"?new Ms(u[0],u[1],u[2]):typeof u=="object"&&typeof u.from=="string"&&typeof u.to=="string"&&typeof u.transition=="number"?new Ms(u.from,u.to,u.transition):typeof u=="string"?new Ms(u,u,1):void 0}}function lr(f,u,d,b){return typeof f=="number"&&f>=0&&f<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof d=="number"&&d>=0&&d<=255?b===void 0||typeof b=="number"&&b>=0&&b<=1?null:`Invalid rgba value [${[f,u,d,b].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof b=="number"?[f,u,d,b]:[f,u,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function aa(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof Ms||f instanceof sr||f instanceof El||f instanceof Ps||f instanceof Ro||f instanceof Eo||f instanceof Ho||f instanceof Zo||f instanceof Wo)return!0;if(Array.isArray(f)){for(const u of f)if(!aa(u))return!1;return!0}if(typeof f=="object"){for(const u in f)if(!aa(f[u]))return!1;return!0}return!1}function wi(f){if(f===null)return no;if(typeof f=="string")return Ci;if(typeof f=="boolean")return Ui;if(typeof f=="number")return sn;if(f instanceof sr)return nr;if(f instanceof Ms)return Jl;if(f instanceof El)return $a;if(f instanceof Ps)return hl;if(f instanceof Ro)return fo;if(f instanceof Eo)return Kl;if(f instanceof Ho)return Qs;if(f instanceof Zo)return As;if(f instanceof Wo)return io;if(Array.isArray(f)){const u=f.length;let d;for(const b of f){const S=wi(b);if(d){if(d===S)continue;d=Ki;break}d=S}return pa(d||Ki,u)}return Al}function Jn(f){const u=typeof f;return f===null?"":u==="string"||u==="number"||u==="boolean"?String(f):f instanceof sr||f instanceof Ms||f instanceof Ps||f instanceof Ro||f instanceof Eo||f instanceof Ho||f instanceof Zo||f instanceof Wo?f.toString():JSON.stringify(f)}class Ur{constructor(u,d){this.type=u,this.value=d}static parse(u,d){if(u.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!aa(u[1]))return d.error("invalid value");const b=u[1];let S=wi(b);const B=d.expectedType;return S.kind!=="array"||S.N!==0||!B||B.kind!=="array"||typeof B.N=="number"&&B.N!==0||(S=B),new Ur(S,b)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const X={string:Ci,number:sn,boolean:Ui,object:Al};class ve{constructor(u,d){this.type=u,this.args=d}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");let b,S=1;const B=u[0];if(B==="array"){let K,W;if(u.length>2){const te=u[1];if(typeof te!="string"||!(te in X)||te==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);K=X[te],S++}else K=Ki;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return d.error('The length argument to "array" must be a positive integer literal',2);W=u[2],S++}b=pa(K,W)}else{if(!X[B])throw new Error(`Types doesn't contain name = ${B}`);b=X[B]}const D=[];for(;S<u.length;S++){const K=d.parse(u[S],S,Ki);if(!K)return null;D.push(K)}return new ve(b,D)}evaluate(u){for(let d=0;d<this.args.length;d++){const b=this.args[d].evaluate(u);if(!Da(this.type,wi(b)))return b;if(d===this.args.length-1)throw new Pr(`Expected value to be of type ${Dr(this.type)}, but found ${Dr(wi(b))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}const $e={"to-boolean":Ui,"to-color":nr,"to-number":sn,"to-string":Ci};class wt{constructor(u,d){this.type=u,this.args=d}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");const b=u[0];if(!$e[b])throw new Error(`Can't parse ${b} as it is not part of the known types`);if((b==="to-boolean"||b==="to-string")&&u.length!==2)return d.error("Expected one argument.");const S=$e[b],B=[];for(let D=1;D<u.length;D++){const K=d.parse(u[D],D,Ki);if(!K)return null;B.push(K)}return new wt(S,B)}evaluate(u){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(u);case"color":{let d,b;for(const S of this.args){if(d=S.evaluate(u),b=null,d instanceof sr)return d;if(typeof d=="string"){const B=u.parseColor(d);if(B)return B}else if(Array.isArray(d)&&(b=d.length<3||d.length>4?`Invalid rgba value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:lr(d[0],d[1],d[2],d[3]),!b))return new sr(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new Pr(b||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"padding":{let d;for(const b of this.args){d=b.evaluate(u);const S=Ro.parse(d);if(S)return S}throw new Pr(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"numberArray":{let d;for(const b of this.args){d=b.evaluate(u);const S=Eo.parse(d);if(S)return S}throw new Pr(`Could not parse numberArray from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"colorArray":{let d;for(const b of this.args){d=b.evaluate(u);const S=Ho.parse(d);if(S)return S}throw new Pr(`Could not parse colorArray from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"variableAnchorOffsetCollection":{let d;for(const b of this.args){d=b.evaluate(u);const S=Zo.parse(d);if(S)return S}throw new Pr(`Could not parse variableAnchorOffsetCollection from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"number":{let d=null;for(const b of this.args){if(d=b.evaluate(u),d===null)return 0;const S=Number(d);if(!isNaN(S))return S}throw new Pr(`Could not convert ${JSON.stringify(d)} to number.`)}case"formatted":return Ps.fromString(Jn(this.args[0].evaluate(u)));case"resolvedImage":return Wo.fromString(Jn(this.args[0].evaluate(u)));case"projectionDefinition":return this.args[0].evaluate(u);default:return Jn(this.args[0].evaluate(u))}}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}const ei=["Unknown","Point","LineString","Polygon"];class Bn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ei[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){let d=this._parseColorCache.get(u);return d||(d=sr.parse(u),this._parseColorCache.set(u,d)),d}}class _i{constructor(u,d,b=[],S,B=new ea,D=[]){this.registry=u,this.path=b,this.key=b.map((K=>`[${K}]`)).join(""),this.scope=B,this.errors=D,this.expectedType=S,this._isConstant=d}parse(u,d,b,S,B={}){return d?this.concat(d,b,S)._parse(u,B):this._parse(u,B)}_parse(u,d){function b(S,B,D){return D==="assert"?new ve(B,[S]):D==="coerce"?new wt(B,[S]):S}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const S=u[0];if(typeof S!="string")return this.error(`Expression name must be a string, but found ${typeof S} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const B=this.registry[S];if(B){let D=B.parse(u,this);if(!D)return null;if(this.expectedType){const K=this.expectedType,W=D.type;if(K.kind!=="string"&&K.kind!=="number"&&K.kind!=="boolean"&&K.kind!=="object"&&K.kind!=="array"||W.kind!=="value"){if(K.kind==="projectionDefinition"&&["string","array"].includes(W.kind)||["color","formatted","resolvedImage"].includes(K.kind)&&["value","string"].includes(W.kind)||["padding","numberArray"].includes(K.kind)&&["value","number","array"].includes(W.kind)||K.kind==="colorArray"&&["value","string","array"].includes(W.kind)||K.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(W.kind))D=b(D,K,d.typeAnnotation||"coerce");else if(this.checkSubtype(K,W))return null}else D=b(D,K,d.typeAnnotation||"assert")}if(!(D instanceof Ur)&&D.type.kind!=="resolvedImage"&&this._isConstant(D)){const K=new Bn;try{D=new Ur(D.type,D.evaluate(K))}catch(W){return this.error(W.message),null}}return D}return this.error(`Unknown expression "${S}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,d,b){const S=typeof u=="number"?this.path.concat(u):this.path,B=b?this.scope.concat(b):this.scope;return new _i(this.registry,this._isConstant,S,d||null,B,this.errors)}error(u,...d){const b=`${this.key}${d.map((S=>`[${S}]`)).join("")}`;this.errors.push(new Zi(b,u))}checkSubtype(u,d){const b=Da(u,d);return b&&this.error(b),b}}class zi{constructor(u,d){this.type=d.type,this.bindings=[].concat(u),this.result=d}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const d of this.bindings)u(d[1]);u(this.result)}static parse(u,d){if(u.length<4)return d.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);const b=[];for(let B=1;B<u.length-1;B+=2){const D=u[B];if(typeof D!="string")return d.error(`Expected string, but found ${typeof D} instead.`,B);if(/[^a-zA-Z0-9_]/.test(D))return d.error("Variable names must contain only alphanumeric characters or '_'.",B);const K=d.parse(u[B+1],B+1);if(!K)return null;b.push([D,K])}const S=d.parse(u[u.length-1],u.length-1,d.expectedType,b);return S?new zi(b,S):null}outputDefined(){return this.result.outputDefined()}}class Ri{constructor(u,d){this.type=d.type,this.name=u,this.boundExpression=d}static parse(u,d){if(u.length!==2||typeof u[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const b=u[1];return d.scope.has(b)?new Ri(b,d.scope.get(b)):d.error(`Unknown variable "${b}". Make sure "${b}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class Ii{constructor(u,d,b){this.type=u,this.index=d,this.input=b}static parse(u,d){if(u.length!==3)return d.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const b=d.parse(u[1],1,sn),S=d.parse(u[2],2,pa(d.expectedType||Ki));return b&&S?new Ii(S.type.itemType,b,S):null}evaluate(u){const d=this.index.evaluate(u),b=this.input.evaluate(u);if(d<0)throw new Pr(`Array index out of bounds: ${d} < 0.`);if(d>=b.length)throw new Pr(`Array index out of bounds: ${d} > ${b.length-1}.`);if(d!==Math.floor(d))throw new Pr(`Array index must be an integer, but found ${d} instead.`);return b[d]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}}class mr{constructor(u,d){this.type=Ui,this.needle=u,this.haystack=d}static parse(u,d){if(u.length!==3)return d.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const b=d.parse(u[1],1,Ki),S=d.parse(u[2],2,Ki);return b&&S?qs(b.type,[Ui,Ci,sn,no,Ki])?new mr(b,S):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${Dr(b.type)} instead`):null}evaluate(u){const d=this.needle.evaluate(u),b=this.haystack.evaluate(u);if(!b)return!1;if(!Sl(d,["boolean","string","number","null"]))throw new Pr(`Expected first argument to be of type boolean, string, number or null, but found ${Dr(wi(d))} instead.`);if(!Sl(b,["string","array"]))throw new Pr(`Expected second argument to be of type array or string, but found ${Dr(wi(b))} instead.`);return b.indexOf(d)>=0}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}}class Tr{constructor(u,d,b){this.type=sn,this.needle=u,this.haystack=d,this.fromIndex=b}static parse(u,d){if(u.length<=2||u.length>=5)return d.error(`Expected 2 or 3 arguments, but found ${u.length-1} instead.`);const b=d.parse(u[1],1,Ki),S=d.parse(u[2],2,Ki);if(!b||!S)return null;if(!qs(b.type,[Ui,Ci,sn,no,Ki]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${Dr(b.type)} instead`);if(u.length===4){const B=d.parse(u[3],3,sn);return B?new Tr(b,S,B):null}return new Tr(b,S)}evaluate(u){const d=this.needle.evaluate(u),b=this.haystack.evaluate(u);if(!Sl(d,["boolean","string","number","null"]))throw new Pr(`Expected first argument to be of type boolean, string, number or null, but found ${Dr(wi(d))} instead.`);let S;if(this.fromIndex&&(S=this.fromIndex.evaluate(u)),Sl(b,["string"])){const B=b.indexOf(d,S);return B===-1?-1:[...b.slice(0,B)].length}if(Sl(b,["array"]))return b.indexOf(d,S);throw new Pr(`Expected second argument to be of type array or string, but found ${Dr(wi(b))} instead.`)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}}class ji{constructor(u,d,b,S,B,D){this.inputType=u,this.type=d,this.input=b,this.cases=S,this.outputs=B,this.otherwise=D}static parse(u,d){if(u.length<5)return d.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return d.error("Expected an even number of arguments.");let b,S;d.expectedType&&d.expectedType.kind!=="value"&&(S=d.expectedType);const B={},D=[];for(let te=2;te<u.length-1;te+=2){let re=u[te];const Ae=u[te+1];Array.isArray(re)||(re=[re]);const Oe=d.concat(te);if(re.length===0)return Oe.error("Expected at least one branch label.");for(const Le of re){if(typeof Le!="number"&&typeof Le!="string")return Oe.error("Branch labels must be numbers or strings.");if(typeof Le=="number"&&Math.abs(Le)>Number.MAX_SAFE_INTEGER)return Oe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Le=="number"&&Math.floor(Le)!==Le)return Oe.error("Numeric branch labels must be integer values.");if(b){if(Oe.checkSubtype(b,wi(Le)))return null}else b=wi(Le);if(B[String(Le)]!==void 0)return Oe.error("Branch labels must be unique.");B[String(Le)]=D.length}const Pe=d.parse(Ae,te,S);if(!Pe)return null;S=S||Pe.type,D.push(Pe)}const K=d.parse(u[1],1,Ki);if(!K)return null;const W=d.parse(u[u.length-1],u.length-1,S);return W?K.type.kind!=="value"&&d.concat(1).checkSubtype(b,K.type)?null:new ji(b,S,K,B,D,W):null}evaluate(u){const d=this.input.evaluate(u);return(wi(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))&&this.otherwise.outputDefined()}}class ur{constructor(u,d,b){this.type=u,this.branches=d,this.otherwise=b}static parse(u,d){if(u.length<4)return d.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return d.error("Expected an odd number of arguments.");let b;d.expectedType&&d.expectedType.kind!=="value"&&(b=d.expectedType);const S=[];for(let D=1;D<u.length-1;D+=2){const K=d.parse(u[D],D,Ui);if(!K)return null;const W=d.parse(u[D+1],D+1,b);if(!W)return null;S.push([K,W]),b=b||W.type}const B=d.parse(u[u.length-1],u.length-1,b);if(!B)return null;if(!b)throw new Error("Can't infer output type");return new ur(b,S,B)}evaluate(u){for(const[d,b]of this.branches)if(d.evaluate(u))return b.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(const[d,b]of this.branches)u(d),u(b);u(this.otherwise)}outputDefined(){return this.branches.every((([u,d])=>d.outputDefined()))&&this.otherwise.outputDefined()}}class Hr{constructor(u,d,b,S){this.type=u,this.input=d,this.beginIndex=b,this.endIndex=S}static parse(u,d){if(u.length<=2||u.length>=5)return d.error(`Expected 2 or 3 arguments, but found ${u.length-1} instead.`);const b=d.parse(u[1],1,Ki),S=d.parse(u[2],2,sn);if(!b||!S)return null;if(!qs(b.type,[pa(Ki),Ci,Ki]))return d.error(`Expected first argument to be of type array or string, but found ${Dr(b.type)} instead`);if(u.length===4){const B=d.parse(u[3],3,sn);return B?new Hr(b.type,b,S,B):null}return new Hr(b.type,b,S)}evaluate(u){const d=this.input.evaluate(u),b=this.beginIndex.evaluate(u);let S;if(this.endIndex&&(S=this.endIndex.evaluate(u)),Sl(d,["string"]))return[...d].slice(b,S).join("");if(Sl(d,["array"]))return d.slice(b,S);throw new Pr(`Expected first argument to be of type array or string, but found ${Dr(wi(d))} instead.`)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}}function ws(f,u){const d=f.length-1;let b,S,B=0,D=d,K=0;for(;B<=D;)if(K=Math.floor((B+D)/2),b=f[K],S=f[K+1],b<=u){if(K===d||u<S)return K;B=K+1}else{if(!(b>u))throw new Pr("Input is not a number.");D=K-1}return 0}class gr{constructor(u,d,b){this.type=u,this.input=d,this.labels=[],this.outputs=[];for(const[S,B]of b)this.labels.push(S),this.outputs.push(B)}static parse(u,d){if(u.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return d.error("Expected an even number of arguments.");const b=d.parse(u[1],1,sn);if(!b)return null;const S=[];let B=null;d.expectedType&&d.expectedType.kind!=="value"&&(B=d.expectedType);for(let D=1;D<u.length;D+=2){const K=D===1?-1/0:u[D],W=u[D+1],te=D,re=D+1;if(typeof K!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',te);if(S.length&&S[S.length-1][0]>=K)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',te);const Ae=d.parse(W,re,B);if(!Ae)return null;B=B||Ae.type,S.push([K,Ae])}return new gr(B,b,S)}evaluate(u){const d=this.labels,b=this.outputs;if(d.length===1)return b[0].evaluate(u);const S=this.input.evaluate(u);if(S<=d[0])return b[0].evaluate(u);const B=d.length;return S>=d[B-1]?b[B-1].evaluate(u):b[ws(d,S)].evaluate(u)}eachChild(u){u(this.input);for(const d of this.outputs)u(d)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))}}function Ha(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var vc,_u,ta=(function(){if(_u)return vc;function f(u,d,b,S){this.cx=3*u,this.bx=3*(b-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(S-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=d,this.p2x=b,this.p2y=S}return _u=1,vc=f,f.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,d){if(d===void 0&&(d=1e-6),u<0)return 0;if(u>1)return 1;for(var b=u,S=0;S<8;S++){var B=this.sampleCurveX(b)-u;if(Math.abs(B)<d)return b;var D=this.sampleCurveDerivativeX(b);if(Math.abs(D)<1e-6)break;b-=B/D}var K=0,W=1;for(b=u,S=0;S<20&&(B=this.sampleCurveX(b),!(Math.abs(B-u)<d));S++)u>B?K=b:W=b,b=.5*(W-K)+K;return b},solve:function(u,d){return this.sampleCurveY(this.solveCurveX(u,d))}},vc})(),Sf=Ha(ta);class Xo{constructor(u,d,b,S,B){this.type=u,this.operator=d,this.interpolation=b,this.input=S,this.labels=[],this.outputs=[];for(const[D,K]of B)this.labels.push(D),this.outputs.push(K)}static interpolationFactor(u,d,b,S){let B=0;if(u.name==="exponential")B=yp(d,u.base,b,S);else if(u.name==="linear")B=yp(d,1,b,S);else if(u.name==="cubic-bezier"){const D=u.controlPoints;B=new Sf(D[0],D[1],D[2],D[3]).solve(yp(d,1,b,S))}return B}static parse(u,d){let[b,S,B,...D]=u;if(!Array.isArray(S)||S.length===0)return d.error("Expected an interpolation type expression.",1);if(S[0]==="linear")S={name:"linear"};else if(S[0]==="exponential"){const te=S[1];if(typeof te!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);S={name:"exponential",base:te}}else{if(S[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(S[0])}`,1,0);{const te=S.slice(1);if(te.length!==4||te.some((re=>typeof re!="number"||re<0||re>1)))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);S={name:"cubic-bezier",controlPoints:te}}}if(u.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(B=d.parse(B,2,sn),!B)return null;const K=[];let W=null;b!=="interpolate-hcl"&&b!=="interpolate-lab"||d.expectedType==Qs?d.expectedType&&d.expectedType.kind!=="value"&&(W=d.expectedType):W=nr;for(let te=0;te<D.length;te+=2){const re=D[te],Ae=D[te+1],Oe=te+3,Pe=te+4;if(typeof re!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Oe);if(K.length&&K[K.length-1][0]>=re)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Oe);const Le=d.parse(Ae,Pe,W);if(!Le)return null;W=W||Le.type,K.push([re,Le])}return eu(W,sn)||eu(W,Jl)||eu(W,nr)||eu(W,fo)||eu(W,Kl)||eu(W,Qs)||eu(W,As)||eu(W,pa(sn))?new Xo(W,b,S,B,K):d.error(`Type ${Dr(W)} is not interpolatable.`)}evaluate(u){const d=this.labels,b=this.outputs;if(d.length===1)return b[0].evaluate(u);const S=this.input.evaluate(u);if(S<=d[0])return b[0].evaluate(u);const B=d.length;if(S>=d[B-1])return b[B-1].evaluate(u);const D=ws(d,S),K=Xo.interpolationFactor(this.interpolation,S,d[D],d[D+1]),W=b[D].evaluate(u),te=b[D+1].evaluate(u);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return dl(W,te,K);case"color":return sr.interpolate(W,te,K);case"padding":return Ro.interpolate(W,te,K);case"colorArray":return Ho.interpolate(W,te,K);case"numberArray":return Eo.interpolate(W,te,K);case"variableAnchorOffsetCollection":return Zo.interpolate(W,te,K);case"array":return Cu(W,te,K);case"projectionDefinition":return Ms.interpolate(W,te,K)}case"interpolate-hcl":switch(this.type.kind){case"color":return sr.interpolate(W,te,K,"hcl");case"colorArray":return Ho.interpolate(W,te,K,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return sr.interpolate(W,te,K,"lab");case"colorArray":return Ho.interpolate(W,te,K,"lab")}}}eachChild(u){u(this.input);for(const d of this.outputs)u(d)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))}}function yp(f,u,d,b){const S=b-d,B=f-d;return S===0?0:u===1?B/S:(Math.pow(u,B)-1)/(Math.pow(u,S)-1)}const Zc={color:sr.interpolate,number:dl,padding:Ro.interpolate,numberArray:Eo.interpolate,colorArray:Ho.interpolate,variableAnchorOffsetCollection:Zo.interpolate,array:Cu};class bc{constructor(u,d){this.type=u,this.args=d}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");let b=null;const S=d.expectedType;S&&S.kind!=="value"&&(b=S);const B=[];for(const K of u.slice(1)){const W=d.parse(K,1+B.length,b,void 0,{typeAnnotation:"omit"});if(!W)return null;b=b||W.type,B.push(W)}if(!b)throw new Error("No output type");const D=S&&B.some((K=>Da(S,K.type)));return new bc(D?Ki:b,B)}evaluate(u){let d,b=null,S=0;for(const B of this.args)if(S++,b=B.evaluate(u),b&&b instanceof Wo&&!b.available&&(d||(d=b.name),b=null,S===this.args.length&&(b=d)),b!==null)break;return b}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}function Kh(f,u){return f==="=="||f==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function ZA(f,u,d,b){return b.compare(u,d)===0}function Wr(f,u,d){const b=f!=="=="&&f!=="!=";return class NX{constructor(B,D,K){this.type=Ui,this.lhs=B,this.rhs=D,this.collator=K,this.hasUntypedArgument=B.type.kind==="value"||D.type.kind==="value"}static parse(B,D){if(B.length!==3&&B.length!==4)return D.error("Expected two or three arguments.");const K=B[0];let W=D.parse(B[1],1,Ki);if(!W)return null;if(!Kh(K,W.type))return D.concat(1).error(`"${K}" comparisons are not supported for type '${Dr(W.type)}'.`);let te=D.parse(B[2],2,Ki);if(!te)return null;if(!Kh(K,te.type))return D.concat(2).error(`"${K}" comparisons are not supported for type '${Dr(te.type)}'.`);if(W.type.kind!==te.type.kind&&W.type.kind!=="value"&&te.type.kind!=="value")return D.error(`Cannot compare types '${Dr(W.type)}' and '${Dr(te.type)}'.`);b&&(W.type.kind==="value"&&te.type.kind!=="value"?W=new ve(te.type,[W]):W.type.kind!=="value"&&te.type.kind==="value"&&(te=new ve(W.type,[te])));let re=null;if(B.length===4){if(W.type.kind!=="string"&&te.type.kind!=="string"&&W.type.kind!=="value"&&te.type.kind!=="value")return D.error("Cannot use collator to compare non-string types.");if(re=D.parse(B[3],3,$a),!re)return null}return new NX(W,te,re)}evaluate(B){const D=this.lhs.evaluate(B),K=this.rhs.evaluate(B);if(b&&this.hasUntypedArgument){const W=wi(D),te=wi(K);if(W.kind!==te.kind||W.kind!=="string"&&W.kind!=="number")throw new Pr(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${W.kind}, ${te.kind}) instead.`)}if(this.collator&&!b&&this.hasUntypedArgument){const W=wi(D),te=wi(K);if(W.kind!=="string"||te.kind!=="string")return u(B,D,K)}return this.collator?d(B,D,K,this.collator.evaluate(B)):u(B,D,K)}eachChild(B){B(this.lhs),B(this.rhs),this.collator&&B(this.collator)}outputDefined(){return!0}}}const XA=Wr("==",(function(f,u,d){return u===d}),ZA),Ef=Wr("!=",(function(f,u,d){return u!==d}),(function(f,u,d,b){return!ZA(0,u,d,b)})),_1=Wr("<",(function(f,u,d){return u<d}),(function(f,u,d,b){return b.compare(u,d)<0})),vp=Wr(">",(function(f,u,d){return u>d}),(function(f,u,d,b){return b.compare(u,d)>0})),fv=Wr("<=",(function(f,u,d){return u<=d}),(function(f,u,d,b){return b.compare(u,d)<=0})),pv=Wr(">=",(function(f,u,d){return u>=d}),(function(f,u,d,b){return b.compare(u,d)>=0}));class ym{constructor(u,d,b){this.type=$a,this.locale=b,this.caseSensitive=u,this.diacriticSensitive=d}static parse(u,d){if(u.length!==2)return d.error("Expected one argument.");const b=u[1];if(typeof b!="object"||Array.isArray(b))return d.error("Collator options argument must be an object.");const S=d.parse(b["case-sensitive"]!==void 0&&b["case-sensitive"],1,Ui);if(!S)return null;const B=d.parse(b["diacritic-sensitive"]!==void 0&&b["diacritic-sensitive"],1,Ui);if(!B)return null;let D=null;return b.locale&&(D=d.parse(b.locale,1,Ci),!D)?null:new ym(S,B,D)}evaluate(u){return new El(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}class vm{constructor(u,d,b,S,B){this.type=Ci,this.number=u,this.locale=d,this.currency=b,this.minFractionDigits=S,this.maxFractionDigits=B}static parse(u,d){if(u.length!==3)return d.error("Expected two arguments.");const b=d.parse(u[1],1,sn);if(!b)return null;const S=u[2];if(typeof S!="object"||Array.isArray(S))return d.error("NumberFormat options argument must be an object.");let B=null;if(S.locale&&(B=d.parse(S.locale,1,Ci),!B))return null;let D=null;if(S.currency&&(D=d.parse(S.currency,1,Ci),!D))return null;let K=null;if(S["min-fraction-digits"]&&(K=d.parse(S["min-fraction-digits"],1,sn),!K))return null;let W=null;return S["max-fraction-digits"]&&(W=d.parse(S["max-fraction-digits"],1,sn),!W)?null:new vm(b,B,D,K,W)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}}class mA{constructor(u){this.type=hl,this.sections=u}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");const b=u[1];if(!Array.isArray(b)&&typeof b=="object")return d.error("First argument must be an image or text section.");const S=[];let B=!1;for(let D=1;D<=u.length-1;++D){const K=u[D];if(B&&typeof K=="object"&&!Array.isArray(K)){B=!1;let W=null;if(K["font-scale"]&&(W=d.parse(K["font-scale"],1,sn),!W))return null;let te=null;if(K["text-font"]&&(te=d.parse(K["text-font"],1,pa(Ci)),!te))return null;let re=null;if(K["text-color"]&&(re=d.parse(K["text-color"],1,nr),!re))return null;let Ae=null;if(K["vertical-align"]){if(typeof K["vertical-align"]=="string"&&!Va.includes(K["vertical-align"]))return d.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${K["vertical-align"]}' instead.`);if(Ae=d.parse(K["vertical-align"],1,Ci),!Ae)return null}const Oe=S[S.length-1];Oe.scale=W,Oe.font=te,Oe.textColor=re,Oe.verticalAlign=Ae}else{const W=d.parse(u[D],1,Ki);if(!W)return null;const te=W.type.kind;if(te!=="string"&&te!=="value"&&te!=="null"&&te!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");B=!0,S.push({content:W,scale:null,font:null,textColor:null,verticalAlign:null})}}return new mA(S)}evaluate(u){return new Ps(this.sections.map((d=>{const b=d.content.evaluate(u);return wi(b)===io?new Go("",b,null,null,null,d.verticalAlign?d.verticalAlign.evaluate(u):null):new Go(Jn(b),null,d.scale?d.scale.evaluate(u):null,d.font?d.font.evaluate(u).join(","):null,d.textColor?d.textColor.evaluate(u):null,d.verticalAlign?d.verticalAlign.evaluate(u):null)})))}eachChild(u){for(const d of this.sections)u(d.content),d.scale&&u(d.scale),d.font&&u(d.font),d.textColor&&u(d.textColor),d.verticalAlign&&u(d.verticalAlign)}outputDefined(){return!1}}class Lh{constructor(u){this.type=io,this.input=u}static parse(u,d){if(u.length!==2)return d.error("Expected two arguments.");const b=d.parse(u[1],1,Ci);return b?new Lh(b):d.error("No image name provided.")}evaluate(u){const d=this.input.evaluate(u),b=Wo.fromString(d);return b&&u.availableImages&&(b.available=u.availableImages.indexOf(d)>-1),b}eachChild(u){u(this.input)}outputDefined(){return!1}}class bm{constructor(u){this.type=sn,this.input=u}static parse(u,d){if(u.length!==2)return d.error(`Expected 1 argument, but found ${u.length-1} instead.`);const b=d.parse(u[1],1);return b?b.type.kind!=="array"&&b.type.kind!=="string"&&b.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${Dr(b.type)} instead.`):new bm(b):null}evaluate(u){const d=this.input.evaluate(u);if(typeof d=="string")return[...d].length;if(Array.isArray(d))return d.length;throw new Pr(`Expected value to be of type string or array, but found ${Dr(wi(d))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}}const Cc=8192;function Cm(f,u){const d=(180+f[0])/360,b=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,S=Math.pow(2,u.z);return[Math.round(d*S*Cc),Math.round(b*S*Cc)]}function gA(f,u){const d=Math.pow(2,u.z);return[(S=(f[0]/Cc+u.x)/d,360*S-180),(b=(f[1]/Cc+u.y)/d,360/Math.PI*Math.atan(Math.exp((180-360*b)*Math.PI/180))-90)];var b,S}function Ed(f,u){f[0]=Math.min(f[0],u[0]),f[1]=Math.min(f[1],u[1]),f[2]=Math.max(f[2],u[0]),f[3]=Math.max(f[3],u[1])}function Od(f,u){return!(f[0]<=u[0]||f[2]>=u[2]||f[1]<=u[1]||f[3]>=u[3])}function x1(f,u,d){const b=f[0]-u[0],S=f[1]-u[1],B=f[0]-d[0],D=f[1]-d[1];return b*D-B*S==0&&b*B<=0&&S*D<=0}function Bd(f,u,d,b){return(S=[b[0]-d[0],b[1]-d[1]])[0]*(B=[u[0]-f[0],u[1]-f[1]])[1]-S[1]*B[0]!=0&&!(!Of(f,u,d,b)||!Of(d,b,f,u));var S,B}function _m(f,u,d){for(const b of d)for(let S=0;S<b.length-1;++S)if(Bd(f,u,b[S],b[S+1]))return!0;return!1}function Fh(f,u,d=!1){let b=!1;for(const K of u)for(let W=0;W<K.length-1;W++){if(x1(f,K[W],K[W+1]))return d;(B=K[W])[1]>(S=f)[1]!=(D=K[W+1])[1]>S[1]&&S[0]<(D[0]-B[0])*(S[1]-B[1])/(D[1]-B[1])+B[0]&&(b=!b)}var S,B,D;return b}function zh(f,u){for(const d of u)if(Fh(f,d))return!0;return!1}function su(f,u){for(const d of f)if(!Fh(d,u))return!1;for(let d=0;d<f.length-1;++d)if(_m(f[d],f[d+1],u))return!1;return!0}function Hg(f,u){for(const d of u)if(su(f,d))return!0;return!1}function Of(f,u,d,b){const S=b[0]-d[0],B=b[1]-d[1],D=(f[0]-d[0])*B-S*(f[1]-d[1]),K=(u[0]-d[0])*B-S*(u[1]-d[1]);return D>0&&K<0||D<0&&K>0}function bp(f,u,d){const b=[];for(let S=0;S<f.length;S++){const B=[];for(let D=0;D<f[S].length;D++){const K=Cm(f[S][D],d);Ed(u,K),B.push(K)}b.push(B)}return b}function xm(f,u,d){const b=[];for(let S=0;S<f.length;S++){const B=bp(f[S],u,d);b.push(B)}return b}function jh(f,u,d,b){if(f[0]<d[0]||f[0]>d[2]){const S=.5*b;let B=f[0]-d[0]>S?-b:d[0]-f[0]>S?b:0;B===0&&(B=f[0]-d[2]>S?-b:d[2]-f[0]>S?b:0),f[0]+=B}Ed(u,f)}function Bf(f,u,d,b){const S=Math.pow(2,b.z)*Cc,B=[b.x*Cc,b.y*Cc],D=[];for(const K of f)for(const W of K){const te=[W.x+B[0],W.y+B[1]];jh(te,u,d,S),D.push(te)}return D}function M1(f,u,d,b){const S=Math.pow(2,b.z)*Cc,B=[b.x*Cc,b.y*Cc],D=[];for(const W of f){const te=[];for(const re of W){const Ae=[re.x+B[0],re.y+B[1]];Ed(u,Ae),te.push(Ae)}D.push(te)}if(u[2]-u[0]<=S/2){(K=u)[0]=K[1]=1/0,K[2]=K[3]=-1/0;for(const W of D)for(const te of W)jh(te,u,d,S)}var K;return D}class yA{constructor(u,d){this.type=Ui,this.geojson=u,this.geometries=d}static parse(u,d){if(u.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if(aa(u[1])){const b=u[1];if(b.type==="FeatureCollection"){const S=[];for(const B of b.features){const{type:D,coordinates:K}=B.geometry;D==="Polygon"&&S.push(K),D==="MultiPolygon"&&S.push(...K)}if(S.length)return new yA(b,{type:"MultiPolygon",coordinates:S})}else if(b.type==="Feature"){const S=b.geometry.type;if(S==="Polygon"||S==="MultiPolygon")return new yA(b,b.geometry)}else if(b.type==="Polygon"||b.type==="MultiPolygon")return new yA(b,b)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return(function(d,b){const S=[1/0,1/0,-1/0,-1/0],B=[1/0,1/0,-1/0,-1/0],D=d.canonicalID();if(b.type==="Polygon"){const K=bp(b.coordinates,B,D),W=Bf(d.geometry(),S,B,D);if(!Od(S,B))return!1;for(const te of W)if(!Fh(te,K))return!1}if(b.type==="MultiPolygon"){const K=xm(b.coordinates,B,D),W=Bf(d.geometry(),S,B,D);if(!Od(S,B))return!1;for(const te of W)if(!zh(te,K))return!1}return!0})(u,this.geometries);if(u.geometryType()==="LineString")return(function(d,b){const S=[1/0,1/0,-1/0,-1/0],B=[1/0,1/0,-1/0,-1/0],D=d.canonicalID();if(b.type==="Polygon"){const K=bp(b.coordinates,B,D),W=M1(d.geometry(),S,B,D);if(!Od(S,B))return!1;for(const te of W)if(!su(te,K))return!1}if(b.type==="MultiPolygon"){const K=xm(b.coordinates,B,D),W=M1(d.geometry(),S,B,D);if(!Od(S,B))return!1;for(const te of W)if(!Hg(te,K))return!1}return!0})(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Mm=class{constructor(f=[],u=(d,b)=>d<b?-1:d>b?1:0){if(this.data=f,this.length=this.data.length,this.compare=u,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(f){this.data.push(f),this._up(this.length++)}pop(){if(this.length===0)return;const f=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),f}peek(){return this.data[0]}_up(f){const{data:u,compare:d}=this,b=u[f];for(;f>0;){const S=f-1>>1,B=u[S];if(d(b,B)>=0)break;u[f]=B,f=S}u[f]=b}_down(f){const{data:u,compare:d}=this,b=this.length>>1,S=u[f];for(;f<b;){let B=1+(f<<1);const D=B+1;if(D<this.length&&d(u[D],u[B])<0&&(B=D),d(u[B],S)>=0)break;u[f]=u[B],f=B}u[f]=S}};function JA(f,u,d=0,b=f.length-1,S=Zg){for(;b>d;){if(b-d>600){const W=b-d+1,te=u-d+1,re=Math.log(W),Ae=.5*Math.exp(2*re/3),Oe=.5*Math.sqrt(re*Ae*(W-Ae)/W)*(te-W/2<0?-1:1);JA(f,u,Math.max(d,Math.floor(u-te*Ae/W+Oe)),Math.min(b,Math.floor(u+(W-te)*Ae/W+Oe)),S)}const B=f[u];let D=d,K=b;for(Id(f,d,u),S(f[b],B)>0&&Id(f,d,b);D<K;){for(Id(f,D,K),D++,K--;S(f[D],B)<0;)D++;for(;S(f[K],B)>0;)K--}S(f[d],B)===0?Id(f,d,K):(K++,Id(f,K,b)),K<=u&&(d=K+1),u<=K&&(b=K-1)}}function Id(f,u,d){const b=f[u];f[u]=f[d],f[d]=b}function Zg(f,u){return f<u?-1:f>u?1:0}function Nh(f,u){if(f.length<=1)return[f];const d=[];let b,S;for(const B of f){const D=eh(B);D!==0&&(B.area=Math.abs(D),S===void 0&&(S=D<0),S===D<0?(b&&d.push(b),b=[B]):b.push(B))}if(b&&d.push(b),u>1)for(let B=0;B<d.length;B++)d[B].length<=u||(JA(d[B],u,1,d[B].length-1,wm),d[B]=d[B].slice(0,u));return d}function wm(f,u){return u.area-f.area}function eh(f){let u=0;for(let d,b,S=0,B=f.length,D=B-1;S<B;D=S++)d=f[S],b=f[D],u+=(b.x-d.x)*(d.y+b.y);return u}const Cp=1/298.257223563,w1=Cp*(2-Cp),Xg=Math.PI/180;class Jg{constructor(u){const d=6378.137*Xg*1e3,b=Math.cos(u*Xg),S=1/(1-w1*(1-b*b)),B=Math.sqrt(S);this.kx=d*B*b,this.ky=d*B*S*(1-w1)}distance(u,d){const b=this.wrap(u[0]-d[0])*this.kx,S=(u[1]-d[1])*this.ky;return Math.sqrt(b*b+S*S)}pointOnLine(u,d){let b,S,B,D,K=1/0;for(let W=0;W<u.length-1;W++){let te=u[W][0],re=u[W][1],Ae=this.wrap(u[W+1][0]-te)*this.kx,Oe=(u[W+1][1]-re)*this.ky,Pe=0;Ae===0&&Oe===0||(Pe=(this.wrap(d[0]-te)*this.kx*Ae+(d[1]-re)*this.ky*Oe)/(Ae*Ae+Oe*Oe),Pe>1?(te=u[W+1][0],re=u[W+1][1]):Pe>0&&(te+=Ae/this.kx*Pe,re+=Oe/this.ky*Pe)),Ae=this.wrap(d[0]-te)*this.kx,Oe=(d[1]-re)*this.ky;const Le=Ae*Ae+Oe*Oe;Le<K&&(K=Le,b=te,S=re,B=W,D=Pe)}return{point:[b,S],index:B,t:Math.max(0,Math.min(1,D))}}wrap(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}}function kd(f,u){return u[0]-f[0]}function Ss(f){return f[1]-f[0]+1}function xu(f,u){return f[1]>=f[0]&&f[1]<u}function po(f,u){if(f[0]>f[1])return[null,null];const d=Ss(f);if(u){if(d===2)return[f,null];const S=Math.floor(d/2);return[[f[0],f[0]+S],[f[0]+S,f[1]]]}if(d===1)return[f,null];const b=Math.floor(d/2)-1;return[[f[0],f[0]+b],[f[0]+b+1,f[1]]]}function Sm(f,u){if(!xu(u,f.length))return[1/0,1/0,-1/0,-1/0];const d=[1/0,1/0,-1/0,-1/0];for(let b=u[0];b<=u[1];++b)Ed(d,f[b]);return d}function Em(f){const u=[1/0,1/0,-1/0,-1/0];for(const d of f)for(const b of d)Ed(u,b);return u}function e0(f){return f[0]!==-1/0&&f[1]!==-1/0&&f[2]!==1/0&&f[3]!==1/0}function _p(f,u,d){if(!e0(f)||!e0(u))return NaN;let b=0,S=0;return f[2]<u[0]&&(b=u[0]-f[2]),f[0]>u[2]&&(b=f[0]-u[2]),f[1]>u[3]&&(S=f[1]-u[3]),f[3]<u[1]&&(S=u[1]-f[3]),d.distance([0,0],[b,S])}function _c(f,u,d){const b=d.pointOnLine(u,f);return d.distance(f,b.point)}function Ut(f,u,d,b,S){const B=Math.min(_c(f,[d,b],S),_c(u,[d,b],S)),D=Math.min(_c(d,[f,u],S),_c(b,[f,u],S));return Math.min(B,D)}function an(f,u,d,b,S){if(!xu(u,f.length)||!xu(b,d.length))return 1/0;let B=1/0;for(let D=u[0];D<u[1];++D){const K=f[D],W=f[D+1];for(let te=b[0];te<b[1];++te){const re=d[te],Ae=d[te+1];if(Bd(K,W,re,Ae))return 0;B=Math.min(B,Ut(K,W,re,Ae,S))}}return B}function nn(f,u,d,b,S){if(!xu(u,f.length)||!xu(b,d.length))return NaN;let B=1/0;for(let D=u[0];D<=u[1];++D)for(let K=b[0];K<=b[1];++K)if(B=Math.min(B,S.distance(f[D],d[K])),B===0)return B;return B}function pi(f,u,d){if(Fh(f,u,!0))return 0;let b=1/0;for(const S of u){const B=S[0],D=S[S.length-1];if(B!==D&&(b=Math.min(b,_c(f,[D,B],d)),b===0))return b;const K=d.pointOnLine(S,f);if(b=Math.min(b,d.distance(f,K.point)),b===0)return b}return b}function yr(f,u,d,b){if(!xu(u,f.length))return NaN;for(let B=u[0];B<=u[1];++B)if(Fh(f[B],d,!0))return 0;let S=1/0;for(let B=u[0];B<u[1];++B){const D=f[B],K=f[B+1];for(const W of d)for(let te=0,re=W.length,Ae=re-1;te<re;Ae=te++){const Oe=W[Ae],Pe=W[te];if(Bd(D,K,Oe,Pe))return 0;S=Math.min(S,Ut(D,K,Oe,Pe,b))}}return S}function Yr(f,u){for(const d of f)for(const b of d)if(Fh(b,u,!0))return!0;return!1}function Ys(f,u,d,b=1/0){const S=Em(f),B=Em(u);if(b!==1/0&&_p(S,B,d)>=b)return b;if(Od(S,B)){if(Yr(f,u))return 0}else if(Yr(u,f))return 0;let D=1/0;for(const K of f)for(let W=0,te=K.length,re=te-1;W<te;re=W++){const Ae=K[re],Oe=K[W];for(const Pe of u)for(let Le=0,We=Pe.length,He=We-1;Le<We;He=Le++){const at=Pe[He],Rt=Pe[Le];if(Bd(Ae,Oe,at,Rt))return 0;D=Math.min(D,Ut(Ae,Oe,at,Rt,d))}}return D}function Qo(f,u,d,b,S,B){if(!B)return;const D=_p(Sm(b,B),S,d);D<u&&f.push([D,B,[0,0]])}function Td(f,u,d,b,S,B,D){if(!B||!D)return;const K=_p(Sm(b,B),Sm(S,D),d);K<u&&f.push([K,B,D])}function vA(f,u,d,b,S=1/0){let B=Math.min(b.distance(f[0],d[0][0]),S);if(B===0)return B;const D=new Mm([[0,[0,f.length-1],[0,0]]],kd),K=Em(d);for(;D.length>0;){const W=D.pop();if(W[0]>=B)continue;const te=W[1],re=u?50:100;if(Ss(te)<=re){if(!xu(te,f.length))return NaN;if(u){const Ae=yr(f,te,d,b);if(isNaN(Ae)||Ae===0)return Ae;B=Math.min(B,Ae)}else for(let Ae=te[0];Ae<=te[1];++Ae){const Oe=pi(f[Ae],d,b);if(B=Math.min(B,Oe),B===0)return 0}}else{const Ae=po(te,u);Qo(D,B,b,f,K,Ae[0]),Qo(D,B,b,f,K,Ae[1])}}return B}function zl(f,u,d,b,S,B=1/0){let D=Math.min(B,S.distance(f[0],d[0]));if(D===0)return D;const K=new Mm([[0,[0,f.length-1],[0,d.length-1]]],kd);for(;K.length>0;){const W=K.pop();if(W[0]>=D)continue;const te=W[1],re=W[2],Ae=u?50:100,Oe=b?50:100;if(Ss(te)<=Ae&&Ss(re)<=Oe){if(!xu(te,f.length)&&xu(re,d.length))return NaN;let Pe;if(u&&b)Pe=an(f,te,d,re,S),D=Math.min(D,Pe);else if(u&&!b){const Le=f.slice(te[0],te[1]+1);for(let We=re[0];We<=re[1];++We)if(Pe=_c(d[We],Le,S),D=Math.min(D,Pe),D===0)return D}else if(!u&&b){const Le=d.slice(re[0],re[1]+1);for(let We=te[0];We<=te[1];++We)if(Pe=_c(f[We],Le,S),D=Math.min(D,Pe),D===0)return D}else Pe=nn(f,te,d,re,S),D=Math.min(D,Pe)}else{const Pe=po(te,u),Le=po(re,b);Td(K,D,S,f,d,Pe[0],Le[0]),Td(K,D,S,f,d,Pe[0],Le[1]),Td(K,D,S,f,d,Pe[1],Le[0]),Td(K,D,S,f,d,Pe[1],Le[1])}}return D}function Rd(f){return f.type==="MultiPolygon"?f.coordinates.map((u=>({type:"Polygon",coordinates:u}))):f.type==="MultiLineString"?f.coordinates.map((u=>({type:"LineString",coordinates:u}))):f.type==="MultiPoint"?f.coordinates.map((u=>({type:"Point",coordinates:u}))):[f]}class Gh{constructor(u,d){this.type=sn,this.geojson=u,this.geometries=d}static parse(u,d){if(u.length!==2)return d.error(`'distance' expression requires exactly one argument, but found ${u.length-1} instead.`);if(aa(u[1])){const b=u[1];if(b.type==="FeatureCollection")return new Gh(b,b.features.map((S=>Rd(S.geometry))).flat());if(b.type==="Feature")return new Gh(b,Rd(b.geometry));if("type"in b&&"coordinates"in b)return new Gh(b,Rd(b))}return d.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return(function(d,b){const S=d.geometry(),B=S.flat().map((W=>gA([W.x,W.y],d.canonical)));if(S.length===0)return NaN;const D=new Jg(B[0][1]);let K=1/0;for(const W of b){switch(W.type){case"Point":K=Math.min(K,zl(B,!1,[W.coordinates],!1,D,K));break;case"LineString":K=Math.min(K,zl(B,!1,W.coordinates,!0,D,K));break;case"Polygon":K=Math.min(K,vA(B,!1,W.coordinates,D,K))}if(K===0)return K}return K})(u,this.geometries);if(u.geometryType()==="LineString")return(function(d,b){const S=d.geometry(),B=S.flat().map((W=>gA([W.x,W.y],d.canonical)));if(S.length===0)return NaN;const D=new Jg(B[0][1]);let K=1/0;for(const W of b){switch(W.type){case"Point":K=Math.min(K,zl(B,!0,[W.coordinates],!1,D,K));break;case"LineString":K=Math.min(K,zl(B,!0,W.coordinates,!0,D,K));break;case"Polygon":K=Math.min(K,vA(B,!0,W.coordinates,D,K))}if(K===0)return K}return K})(u,this.geometries);if(u.geometryType()==="Polygon")return(function(d,b){const S=d.geometry();if(S.length===0||S[0].length===0)return NaN;const B=Nh(S,0).map((W=>W.map((te=>te.map((re=>gA([re.x,re.y],d.canonical))))))),D=new Jg(B[0][0][0][1]);let K=1/0;for(const W of b)for(const te of B){switch(W.type){case"Point":K=Math.min(K,vA([W.coordinates],!1,te,D,K));break;case"LineString":K=Math.min(K,vA(W.coordinates,!0,te,D,K));break;case"Polygon":K=Math.min(K,Ys(te,W.coordinates,D,K))}if(K===0)return K}return K})(u,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class bA{constructor(u){this.type=Ki,this.key=u}static parse(u,d){if(u.length!==2)return d.error(`Expected 1 argument, but found ${u.length-1} instead.`);const b=u[1];return b==null?d.error("Global state property must be defined."):typeof b!="string"?d.error(`Global state property must be string, but found ${typeof u[1]} instead.`):new bA(b)}evaluate(u){var d;const b=(d=u.globals)===null||d===void 0?void 0:d.globalState;return b&&Object.keys(b).length!==0?Pa(b,this.key):null}eachChild(){}outputDefined(){return!1}}const th={"==":XA,"!=":Ef,">":vp,"<":_1,">=":pv,"<=":fv,array:ve,at:Ii,boolean:ve,case:ur,coalesce:bc,collator:ym,format:mA,image:Lh,in:mr,"index-of":Tr,interpolate:Xo,"interpolate-hcl":Xo,"interpolate-lab":Xo,length:bm,let:zi,literal:Ur,match:ji,number:ve,"number-format":vm,object:ve,slice:Hr,step:gr,string:ve,"to-boolean":wt,"to-color":wt,"to-number":wt,"to-string":wt,var:Ri,within:yA,distance:Gh,"global-state":bA};class au{constructor(u,d,b,S){this.name=u,this.type=d,this._evaluate=b,this.args=S}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,d){const b=u[0],S=au.definitions[b];if(!S)return d.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0);const B=Array.isArray(S)?S[0]:S.type,D=Array.isArray(S)?[[S[1],S[2]]]:S.overloads,K=D.filter((([te])=>!Array.isArray(te)||te.length===u.length-1));let W=null;for(const[te,re]of K){W=new _i(d.registry,Dd,d.path,null,d.scope);const Ae=[];let Oe=!1;for(let Pe=1;Pe<u.length;Pe++){const Le=u[Pe],We=Array.isArray(te)?te[Pe-1]:te.type,He=W.parse(Le,1+Ae.length,We);if(!He){Oe=!0;break}Ae.push(He)}if(!Oe)if(Array.isArray(te)&&te.length!==Ae.length)W.error(`Expected ${te.length} arguments, but found ${Ae.length} instead.`);else{for(let Pe=0;Pe<Ae.length;Pe++){const Le=Array.isArray(te)?te[Pe]:te.type,We=Ae[Pe];W.concat(Pe+1).checkSubtype(Le,We.type)}if(W.errors.length===0)return new au(b,B,re,Ae)}}if(K.length===1)d.errors.push(...W.errors);else{const te=(K.length?K:D).map((([Ae])=>{return Oe=Ae,Array.isArray(Oe)?`(${Oe.map(Dr).join(", ")})`:`(${Dr(Oe.type)}...)`;var Oe})).join(" | "),re=[];for(let Ae=1;Ae<u.length;Ae++){const Oe=d.parse(u[Ae],1+re.length);if(!Oe)return null;re.push(Dr(Oe.type))}d.error(`Expected arguments of type ${te}, but found (${re.join(", ")}) instead.`)}return null}static register(u,d){au.definitions=d;for(const b in d)u[b]=au}}function Do(f,[u,d,b,S]){u=u.evaluate(f),d=d.evaluate(f),b=b.evaluate(f);const B=S?S.evaluate(f):1,D=lr(u,d,b,B);if(D)throw new Pr(D);return new sr(u/255,d/255,b/255,B,!1)}function t0(f,u){return f in u}function If(f,u){const d=u[f];return d===void 0?null:d}function Ua(f){return{type:f}}function Dd(f){if(f instanceof Ri)return Dd(f.boundExpression);if(f instanceof au&&f.name==="error"||f instanceof ym||f instanceof yA||f instanceof Gh||f instanceof bA)return!1;const u=f instanceof wt||f instanceof ve;let d=!0;return f.eachChild((b=>{d=u?d&&Dd(b):d&&b instanceof Ur})),!!d&&lu(f)&&nh(f,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function lu(f){if(f instanceof au&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof yA||f instanceof Gh)return!1;let u=!0;return f.eachChild((d=>{u&&!lu(d)&&(u=!1)})),u}function CA(f){if(f instanceof au&&f.name==="feature-state")return!1;let u=!0;return f.eachChild((d=>{u&&!CA(d)&&(u=!1)})),u}function nh(f,u){if(f instanceof au&&u.indexOf(f.name)>=0)return!1;let d=!0;return f.eachChild((b=>{d&&!nh(b,u)&&(d=!1)})),d}function xc(f){return{result:"success",value:f}}function Mc(f){return{result:"error",value:f}}function Xc(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function Jc(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function xp(f){return!!f.expression&&f.expression.interpolated}function br(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function Zu(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)&&wi(f)===Al}function S1(f){return f}function fl(f,u){const d=f.stops&&typeof f.stops[0][0]=="object",b=d||!(d||f.property!==void 0),S=f.type||(xp(u)?"exponential":"interval"),B=(function(re){switch(re.type){case"color":return sr.parse;case"padding":return Ro.parse;case"numberArray":return Eo.parse;case"colorArray":return Ho.parse;default:return null}})(u);if(B&&((f=pr({},f)).stops&&(f.stops=f.stops.map((re=>[re[0],B(re[1])]))),f.default=B(f.default?f.default:u.default)),f.colorSpace&&(D=f.colorSpace)!=="rgb"&&D!=="hcl"&&D!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var D;const K=(function(re){switch(re){case"exponential":return Mp;case"interval":return E1;case"categorical":return Xu;case"identity":return Pd;default:throw new Error(`Unknown function type "${re}"`)}})(S);let W,te;if(S==="categorical"){W=Object.create(null);for(const re of f.stops)W[re[0]]=re[1];te=typeof f.stops[0][0]}if(d){const re={},Ae=[];for(let Le=0;Le<f.stops.length;Le++){const We=f.stops[Le],He=We[0].zoom;re[He]===void 0&&(re[He]={zoom:He,type:f.type,property:f.property,default:f.default,stops:[]},Ae.push(He)),re[He].stops.push([We[0].value,We[1]])}const Oe=[];for(const Le of Ae)Oe.push([re[Le].zoom,fl(re[Le],u)]);const Pe={name:"linear"};return{kind:"composite",interpolationType:Pe,interpolationFactor:Xo.interpolationFactor.bind(void 0,Pe),zoomStops:Oe.map((Le=>Le[0])),evaluate:({zoom:Le},We)=>Mp({stops:Oe,base:f.base},u,Le).evaluate(Le,We)}}if(b){const re=S==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:re,interpolationFactor:Xo.interpolationFactor.bind(void 0,re),zoomStops:f.stops.map((Ae=>Ae[0])),evaluate:({zoom:Ae})=>K(f,u,Ae,W,te)}}return{kind:"source",evaluate(re,Ae){const Oe=Ae&&Ae.properties?Ae.properties[f.property]:void 0;return Oe===void 0?jl(f.default,u.default):K(f,u,Oe,W,te)}}}function jl(f,u,d){return f!==void 0?f:u!==void 0?u:d!==void 0?d:void 0}function Xu(f,u,d,b,S){return jl(typeof d===S?b[d]:void 0,f.default,u.default)}function E1(f,u,d){if(br(d)!=="number")return jl(f.default,u.default);const b=f.stops.length;if(b===1||d<=f.stops[0][0])return f.stops[0][1];if(d>=f.stops[b-1][0])return f.stops[b-1][1];const S=ws(f.stops.map((B=>B[0])),d);return f.stops[S][1]}function Mp(f,u,d){const b=f.base!==void 0?f.base:1;if(br(d)!=="number")return jl(f.default,u.default);const S=f.stops.length;if(S===1||d<=f.stops[0][0])return f.stops[0][1];if(d>=f.stops[S-1][0])return f.stops[S-1][1];const B=ws(f.stops.map((re=>re[0])),d),D=(function(re,Ae,Oe,Pe){const Le=Pe-Oe,We=re-Oe;return Le===0?0:Ae===1?We/Le:(Math.pow(Ae,We)-1)/(Math.pow(Ae,Le)-1)})(d,b,f.stops[B][0],f.stops[B+1][0]),K=f.stops[B][1],W=f.stops[B+1][1],te=Zc[u.type]||S1;return typeof K.evaluate=="function"?{evaluate(...re){const Ae=K.evaluate.apply(void 0,re),Oe=W.evaluate.apply(void 0,re);if(Ae!==void 0&&Oe!==void 0)return te(Ae,Oe,D,f.colorSpace)}}:te(K,W,D,f.colorSpace)}function Pd(f,u,d){switch(u.type){case"color":d=sr.parse(d);break;case"formatted":d=Ps.fromString(d.toString());break;case"resolvedImage":d=Wo.fromString(d.toString());break;case"padding":d=Ro.parse(d);break;case"colorArray":d=Ho.parse(d);break;case"numberArray":d=Eo.parse(d);break;default:br(d)===u.type||u.type==="enum"&&u.values[d]||(d=void 0)}return jl(d,f.default,u.default)}au.register(th,{error:[{kind:"error"},[Ci],(f,[u])=>{throw new Pr(u.evaluate(f))}],typeof:[Ci,[Ki],(f,[u])=>Dr(wi(u.evaluate(f)))],"to-rgba":[pa(sn,4),[nr],(f,[u])=>{const[d,b,S,B]=u.evaluate(f).rgb;return[255*d,255*b,255*S,B]}],rgb:[nr,[sn,sn,sn],Do],rgba:[nr,[sn,sn,sn,sn],Do],has:{type:Ui,overloads:[[[Ci],(f,[u])=>t0(u.evaluate(f),f.properties())],[[Ci,Al],(f,[u,d])=>t0(u.evaluate(f),d.evaluate(f))]]},get:{type:Ki,overloads:[[[Ci],(f,[u])=>If(u.evaluate(f),f.properties())],[[Ci,Al],(f,[u,d])=>If(u.evaluate(f),d.evaluate(f))]]},"feature-state":[Ki,[Ci],(f,[u])=>If(u.evaluate(f),f.featureState||{})],properties:[Al,[],f=>f.properties()],"geometry-type":[Ci,[],f=>f.geometryType()],id:[Ki,[],f=>f.id()],zoom:[sn,[],f=>f.globals.zoom],"heatmap-density":[sn,[],f=>f.globals.heatmapDensity||0],elevation:[sn,[],f=>f.globals.elevation||0],"line-progress":[sn,[],f=>f.globals.lineProgress||0],accumulated:[Ki,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[sn,Ua(sn),(f,u)=>{let d=0;for(const b of u)d+=b.evaluate(f);return d}],"*":[sn,Ua(sn),(f,u)=>{let d=1;for(const b of u)d*=b.evaluate(f);return d}],"-":{type:sn,overloads:[[[sn,sn],(f,[u,d])=>u.evaluate(f)-d.evaluate(f)],[[sn],(f,[u])=>-u.evaluate(f)]]},"/":[sn,[sn,sn],(f,[u,d])=>u.evaluate(f)/d.evaluate(f)],"%":[sn,[sn,sn],(f,[u,d])=>u.evaluate(f)%d.evaluate(f)],ln2:[sn,[],()=>Math.LN2],pi:[sn,[],()=>Math.PI],e:[sn,[],()=>Math.E],"^":[sn,[sn,sn],(f,[u,d])=>Math.pow(u.evaluate(f),d.evaluate(f))],sqrt:[sn,[sn],(f,[u])=>Math.sqrt(u.evaluate(f))],log10:[sn,[sn],(f,[u])=>Math.log(u.evaluate(f))/Math.LN10],ln:[sn,[sn],(f,[u])=>Math.log(u.evaluate(f))],log2:[sn,[sn],(f,[u])=>Math.log(u.evaluate(f))/Math.LN2],sin:[sn,[sn],(f,[u])=>Math.sin(u.evaluate(f))],cos:[sn,[sn],(f,[u])=>Math.cos(u.evaluate(f))],tan:[sn,[sn],(f,[u])=>Math.tan(u.evaluate(f))],asin:[sn,[sn],(f,[u])=>Math.asin(u.evaluate(f))],acos:[sn,[sn],(f,[u])=>Math.acos(u.evaluate(f))],atan:[sn,[sn],(f,[u])=>Math.atan(u.evaluate(f))],min:[sn,Ua(sn),(f,u)=>Math.min(...u.map((d=>d.evaluate(f))))],max:[sn,Ua(sn),(f,u)=>Math.max(...u.map((d=>d.evaluate(f))))],abs:[sn,[sn],(f,[u])=>Math.abs(u.evaluate(f))],round:[sn,[sn],(f,[u])=>{const d=u.evaluate(f);return d<0?-Math.round(-d):Math.round(d)}],floor:[sn,[sn],(f,[u])=>Math.floor(u.evaluate(f))],ceil:[sn,[sn],(f,[u])=>Math.ceil(u.evaluate(f))],"filter-==":[Ui,[Ci,Ki],(f,[u,d])=>f.properties()[u.value]===d.value],"filter-id-==":[Ui,[Ki],(f,[u])=>f.id()===u.value],"filter-type-==":[Ui,[Ci],(f,[u])=>f.geometryType()===u.value],"filter-<":[Ui,[Ci,Ki],(f,[u,d])=>{const b=f.properties()[u.value],S=d.value;return typeof b==typeof S&&b<S}],"filter-id-<":[Ui,[Ki],(f,[u])=>{const d=f.id(),b=u.value;return typeof d==typeof b&&d<b}],"filter->":[Ui,[Ci,Ki],(f,[u,d])=>{const b=f.properties()[u.value],S=d.value;return typeof b==typeof S&&b>S}],"filter-id->":[Ui,[Ki],(f,[u])=>{const d=f.id(),b=u.value;return typeof d==typeof b&&d>b}],"filter-<=":[Ui,[Ci,Ki],(f,[u,d])=>{const b=f.properties()[u.value],S=d.value;return typeof b==typeof S&&b<=S}],"filter-id-<=":[Ui,[Ki],(f,[u])=>{const d=f.id(),b=u.value;return typeof d==typeof b&&d<=b}],"filter->=":[Ui,[Ci,Ki],(f,[u,d])=>{const b=f.properties()[u.value],S=d.value;return typeof b==typeof S&&b>=S}],"filter-id->=":[Ui,[Ki],(f,[u])=>{const d=f.id(),b=u.value;return typeof d==typeof b&&d>=b}],"filter-has":[Ui,[Ki],(f,[u])=>u.value in f.properties()],"filter-has-id":[Ui,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[Ui,[pa(Ci)],(f,[u])=>u.value.indexOf(f.geometryType())>=0],"filter-id-in":[Ui,[pa(Ki)],(f,[u])=>u.value.indexOf(f.id())>=0],"filter-in-small":[Ui,[Ci,pa(Ki)],(f,[u,d])=>d.value.indexOf(f.properties()[u.value])>=0],"filter-in-large":[Ui,[Ci,pa(Ki)],(f,[u,d])=>(function(b,S,B,D){for(;B<=D;){const K=B+D>>1;if(S[K]===b)return!0;S[K]>b?D=K-1:B=K+1}return!1})(f.properties()[u.value],d.value,0,d.value.length-1)],all:{type:Ui,overloads:[[[Ui,Ui],(f,[u,d])=>u.evaluate(f)&&d.evaluate(f)],[Ua(Ui),(f,u)=>{for(const d of u)if(!d.evaluate(f))return!1;return!0}]]},any:{type:Ui,overloads:[[[Ui,Ui],(f,[u,d])=>u.evaluate(f)||d.evaluate(f)],[Ua(Ui),(f,u)=>{for(const d of u)if(d.evaluate(f))return!0;return!1}]]},"!":[Ui,[Ui],(f,[u])=>!u.evaluate(f)],"is-supported-script":[Ui,[Ci],(f,[u])=>{const d=f.globals&&f.globals.isSupportedScript;return!d||d(u.evaluate(f))}],upcase:[Ci,[Ci],(f,[u])=>u.evaluate(f).toUpperCase()],downcase:[Ci,[Ci],(f,[u])=>u.evaluate(f).toLowerCase()],concat:[Ci,Ua(Ki),(f,u)=>u.map((d=>Jn(d.evaluate(f)))).join("")],"resolved-locale":[Ci,[$a],(f,[u])=>u.evaluate(f).resolvedLocale()]});class Wh{constructor(u,d,b){this.expression=u,this._warningHistory={},this._evaluator=new Bn,this._defaultValue=d?(function(S){if(S.type==="color"&&Zu(S.default))return new sr(0,0,0,0);switch(S.type){case"color":return sr.parse(S.default)||null;case"padding":return Ro.parse(S.default)||null;case"numberArray":return Eo.parse(S.default)||null;case"colorArray":return Ho.parse(S.default)||null;case"variableAnchorOffsetCollection":return Zo.parse(S.default)||null;case"projectionDefinition":return Ms.parse(S.default)||null;default:return S.default===void 0?null:S.default}})(d):null,this._enumValues=d&&d.type==="enum"?d.values:null,this._globalState=b}evaluateWithoutErrorHandling(u,d,b,S,B,D){return this._globalState&&(u=pl(u,this._globalState)),this._evaluator.globals=u,this._evaluator.feature=d,this._evaluator.featureState=b,this._evaluator.canonical=S,this._evaluator.availableImages=B||null,this._evaluator.formattedSection=D,this.expression.evaluate(this._evaluator)}evaluate(u,d,b,S,B,D){this._globalState&&(u=pl(u,this._globalState)),this._evaluator.globals=u,this._evaluator.feature=d||null,this._evaluator.featureState=b||null,this._evaluator.canonical=S,this._evaluator.availableImages=B||null,this._evaluator.formattedSection=D||null;try{const K=this.expression.evaluate(this._evaluator);if(K==null||typeof K=="number"&&K!=K)return this._defaultValue;if(this._enumValues&&!(K in this._enumValues))throw new Pr(`Expected value to be one of ${Object.keys(this._enumValues).map((W=>JSON.stringify(W))).join(", ")}, but found ${JSON.stringify(K)} instead.`);return K}catch(K){return this._warningHistory[K.message]||(this._warningHistory[K.message]=!0,typeof console<"u"&&console.warn(K.message)),this._defaultValue}}}function Qh(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in th}function ih(f,u,d){const b=new _i(th,Dd,[],u?(function(B){const D={color:nr,string:Ci,number:sn,enum:Ci,boolean:Ui,formatted:hl,padding:fo,numberArray:Kl,colorArray:Qs,projectionDefinition:Jl,resolvedImage:io,variableAnchorOffsetCollection:As};return B.type==="array"?pa(D[B.value]||Ki,B.length):D[B.type]})(u):void 0),S=b.parse(f,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return S?xc(new Wh(S,u,d)):Mc(b.errors)}class kf{constructor(u,d,b){this.kind=u,this._styleExpression=d,this.isStateDependent=u!=="constant"&&!CA(d.expression),this.globalStateRefs=$s(d.expression),this._globalState=b}evaluateWithoutErrorHandling(u,d,b,S,B,D){return this._globalState&&(u=pl(u,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(u,d,b,S,B,D)}evaluate(u,d,b,S,B,D){return this._globalState&&(u=pl(u,this._globalState)),this._styleExpression.evaluate(u,d,b,S,B,D)}}class uu{constructor(u,d,b,S,B){this.kind=u,this.zoomStops=b,this._styleExpression=d,this.isStateDependent=u!=="camera"&&!CA(d.expression),this.globalStateRefs=$s(d.expression),this.interpolationType=S,this._globalState=B}evaluateWithoutErrorHandling(u,d,b,S,B,D){return this._globalState&&(u=pl(u,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(u,d,b,S,B,D)}evaluate(u,d,b,S,B,D){return this._globalState&&(u=pl(u,this._globalState)),this._styleExpression.evaluate(u,d,b,S,B,D)}interpolationFactor(u,d,b){return this.interpolationType?Xo.interpolationFactor(this.interpolationType,u,d,b):0}}function Ud(f,u,d){const b=ih(f,u,d);if(b.result==="error")return b;const S=b.value.expression,B=lu(S);if(!B&&!Xc(u))return Mc([new Zi("","data expressions not supported")]);const D=nh(S,["zoom"]);if(!D&&!Jc(u))return Mc([new Zi("","zoom expressions not supported")]);const K=Es(S);return K||D?K instanceof Zi?Mc([K]):K instanceof Xo&&!xp(u)?Mc([new Zi("",'"interpolate" expressions cannot be used with this property')]):xc(K?new uu(B?"camera":"composite",b.value,K.labels,K instanceof Xo?K.interpolation:void 0,d):new kf(B?"constant":"source",b.value,d)):Mc([new Zi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class _A{constructor(u,d){this._parameters=u,this._specification=d,pr(this,fl(this._parameters,this._specification))}static deserialize(u){return new _A(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function Es(f){let u=null;if(f instanceof zi)u=Es(f.result);else if(f instanceof bc){for(const d of f.args)if(u=Es(d),u)break}else(f instanceof gr||f instanceof Xo)&&f.input instanceof au&&f.input.name==="zoom"&&(u=f);return u instanceof Zi||f.eachChild((d=>{const b=Es(d);b instanceof Zi?u=b:!u&&b?u=new Zi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&b&&u!==b&&(u=new Zi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),u}function $s(f,u=new Set){return f instanceof bA&&u.add(f.key),f.eachChild((d=>{$s(d,u)})),u}function pl(f,u){const{zoom:d,heatmapDensity:b,elevation:S,lineProgress:B,isSupportedScript:D,accumulated:K}=f??{};return{zoom:d,heatmapDensity:b,elevation:S,lineProgress:B,isSupportedScript:D,accumulated:K,globalState:u}}function Nl(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const u of f.slice(1))if(!Nl(u)&&typeof u!="boolean")return!1;return!0;default:return!0}}const eA={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Gl(f,u){if(f==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Nl(f)||(f=Kd(f));const d=ih(f,eA,u);if(d.result==="error")throw new Error(d.value.map((b=>`${b.key}: ${b.message}`)).join(", "));return{filter:(b,S,B)=>d.value.evaluate(b,S,{},B),needGeometry:Ol(f),getGlobalStateRefs:()=>$s(d.value.expression)}}function Mu(f,u){return f<u?-1:f>u?1:0}function Ol(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let u=1;u<f.length;u++)if(Ol(f[u]))return!0;return!1}function Kd(f){if(!f)return!0;const u=f[0];return f.length<=1?u!=="any":u==="=="?xA(f[1],f[2],"=="):u==="!="?na(xA(f[1],f[2],"==")):u==="<"||u===">"||u==="<="||u===">="?xA(f[1],f[2],u):u==="any"?(d=f.slice(1),["any"].concat(d.map(Kd))):u==="all"?["all"].concat(f.slice(1).map(Kd)):u==="none"?["all"].concat(f.slice(1).map(Kd).map(na)):u==="in"?qh(f[1],f.slice(2)):u==="!in"?na(qh(f[1],f.slice(2))):u==="has"?Ld(f[1]):u!=="!has"||na(Ld(f[1]));var d}function xA(f,u,d){switch(f){case"$type":return[`filter-type-${d}`,u];case"$id":return[`filter-id-${d}`,u];default:return[`filter-${d}`,f,u]}}function qh(f,u){if(u.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some((d=>typeof d!=typeof u[0]))?["filter-in-large",f,["literal",u.sort(Mu)]]:["filter-in-small",f,["literal",u]]}}function Ld(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function na(f){return["!",f]}function Oo(f){const u=typeof f;if(u==="number"||u==="boolean"||u==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let S="[";for(const B of f)S+=`${Oo(B)},`;return`${S}]`}const d=Object.keys(f).sort();let b="{";for(let S=0;S<d.length;S++)b+=`${JSON.stringify(d[S])}:${Oo(f[d[S]])},`;return`${b}}`}function ro(f){let u="";for(const d of fn)u+=`/${Oo(f[d])}`;return u}function MA(f){const u=f.value;return u?[new Zt(f.key,u,"constants have been deprecated as of v8")]:[]}function oo(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function rh(f){if(Array.isArray(f))return f.map(rh);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const u={};for(const d in f)u[d]=rh(f[d]);return u}return oo(f)}function Ka(f){const u=f.key,d=f.value,b=f.valueSpec||{},S=f.objectElementValidators||{},B=f.style,D=f.styleSpec,K=f.validateSpec;let W=[];const te=br(d);if(te!=="object")return[new Zt(u,d,`object expected, ${te} found`)];for(const re in d){const Ae=re.split(".")[0],Oe=Pa(b,Ae)||b["*"];let Pe;if(Pa(S,Ae))Pe=S[Ae];else if(Pa(b,Ae))Pe=K;else if(S["*"])Pe=S["*"];else{if(!b["*"]){W.push(new Zt(u,d[re],`unknown property "${re}"`));continue}Pe=K}W=W.concat(Pe({key:(u&&`${u}.`)+re,value:d[re],valueSpec:Oe,style:B,styleSpec:D,object:d,objectKey:re,validateSpec:K},d))}for(const re in b)S[re]||b[re].required&&b[re].default===void 0&&d[re]===void 0&&W.push(new Zt(u,d,`missing required property "${re}"`));return W}function Yh(f){const u=f.value,d=f.valueSpec,b=f.style,S=f.styleSpec,B=f.key,D=f.arrayElementValidator||f.validateSpec;if(br(u)!=="array")return[new Zt(B,u,`array expected, ${br(u)} found`)];if(d.length&&u.length!==d.length)return[new Zt(B,u,`array length ${d.length} expected, length ${u.length} found`)];if(d["min-length"]&&u.length<d["min-length"])return[new Zt(B,u,`array length at least ${d["min-length"]} expected, length ${u.length} found`)];let K={type:d.value,values:d.values};S.$version<7&&(K.function=d.function),br(d.value)==="object"&&(K=d.value);let W=[];for(let te=0;te<u.length;te++)W=W.concat(D({array:u,arrayIndex:te,value:u[te],valueSpec:K,validateSpec:f.validateSpec,style:b,styleSpec:S,key:`${B}[${te}]`}));return W}function oh(f){const u=f.key,d=f.value,b=f.valueSpec;let S=br(d);return S==="number"&&d!=d&&(S="NaN"),S!=="number"?[new Zt(u,d,`number expected, ${S} found`)]:"minimum"in b&&d<b.minimum?[new Zt(u,d,`${d} is less than the minimum value ${b.minimum}`)]:"maximum"in b&&d>b.maximum?[new Zt(u,d,`${d} is greater than the maximum value ${b.maximum}`)]:[]}function sh(f){const u=f.valueSpec,d=oo(f.value.type);let b,S,B,D={};const K=d!=="categorical"&&f.value.property===void 0,W=!K,te=br(f.value.stops)==="array"&&br(f.value.stops[0])==="array"&&br(f.value.stops[0][0])==="object",re=Ka({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(Pe){if(d==="identity")return[new Zt(Pe.key,Pe.value,'identity function may not have a "stops" property')];let Le=[];const We=Pe.value;return Le=Le.concat(Yh({key:Pe.key,value:We,valueSpec:Pe.valueSpec,validateSpec:Pe.validateSpec,style:Pe.style,styleSpec:Pe.styleSpec,arrayElementValidator:Ae})),br(We)==="array"&&We.length===0&&Le.push(new Zt(Pe.key,We,"array must have at least one stop")),Le},default:function(Pe){return Pe.validateSpec({key:Pe.key,value:Pe.value,valueSpec:u,validateSpec:Pe.validateSpec,style:Pe.style,styleSpec:Pe.styleSpec})}}});return d==="identity"&&K&&re.push(new Zt(f.key,f.value,'missing required property "property"')),d==="identity"||f.value.stops||re.push(new Zt(f.key,f.value,'missing required property "stops"')),d==="exponential"&&f.valueSpec.expression&&!xp(f.valueSpec)&&re.push(new Zt(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(W&&!Xc(f.valueSpec)?re.push(new Zt(f.key,f.value,"property functions not supported")):K&&!Jc(f.valueSpec)&&re.push(new Zt(f.key,f.value,"zoom functions not supported"))),d!=="categorical"&&!te||f.value.property!==void 0||re.push(new Zt(f.key,f.value,'"property" property is required')),re;function Ae(Pe){let Le=[];const We=Pe.value,He=Pe.key;if(br(We)!=="array")return[new Zt(He,We,`array expected, ${br(We)} found`)];if(We.length!==2)return[new Zt(He,We,`array length 2 expected, length ${We.length} found`)];if(te){if(br(We[0])!=="object")return[new Zt(He,We,`object expected, ${br(We[0])} found`)];if(We[0].zoom===void 0)return[new Zt(He,We,"object stop key must have zoom")];if(We[0].value===void 0)return[new Zt(He,We,"object stop key must have value")];if(B&&B>oo(We[0].zoom))return[new Zt(He,We[0].zoom,"stop zoom values must appear in ascending order")];oo(We[0].zoom)!==B&&(B=oo(We[0].zoom),S=void 0,D={}),Le=Le.concat(Ka({key:`${He}[0]`,value:We[0],valueSpec:{zoom:{}},validateSpec:Pe.validateSpec,style:Pe.style,styleSpec:Pe.styleSpec,objectElementValidators:{zoom:oh,value:Oe}}))}else Le=Le.concat(Oe({key:`${He}[0]`,value:We[0],validateSpec:Pe.validateSpec,style:Pe.style,styleSpec:Pe.styleSpec},We));return Qh(rh(We[1]))?Le.concat([new Zt(`${He}[1]`,We[1],"expressions are not allowed in function stops.")]):Le.concat(Pe.validateSpec({key:`${He}[1]`,value:We[1],valueSpec:u,validateSpec:Pe.validateSpec,style:Pe.style,styleSpec:Pe.styleSpec}))}function Oe(Pe,Le){const We=br(Pe.value),He=oo(Pe.value),at=Pe.value!==null?Pe.value:Le;if(b){if(We!==b)return[new Zt(Pe.key,at,`${We} stop domain type must match previous stop domain type ${b}`)]}else b=We;if(We!=="number"&&We!=="string"&&We!=="boolean")return[new Zt(Pe.key,at,"stop domain value must be a number, string, or boolean")];if(We!=="number"&&d!=="categorical"){let Rt=`number expected, ${We} found`;return Xc(u)&&d===void 0&&(Rt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Zt(Pe.key,at,Rt)]}return d!=="categorical"||We!=="number"||isFinite(He)&&Math.floor(He)===He?d!=="categorical"&&We==="number"&&S!==void 0&&He<S?[new Zt(Pe.key,at,"stop domain values must appear in ascending order")]:(S=He,d==="categorical"&&He in D?[new Zt(Pe.key,at,"stop domain values must be unique")]:(D[He]=!0,[])):[new Zt(Pe.key,at,`integer expected, found ${He}`)]}}function qe(f){const u=(f.expressionContext==="property"?Ud:ih)(rh(f.value),f.valueSpec);if(u.result==="error")return u.value.map((b=>new Zt(`${f.key}${b.key}`,f.value,b.message)));const d=u.value.expression||u.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!d.outputDefined())return[new Zt(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!CA(d))return[new Zt(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter"&&!CA(d))return[new Zt(f.key,f.value,'"feature-state" data expressions are not supported with filters.')];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!nh(d,["zoom","feature-state"]))return[new Zt(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!lu(d))return[new Zt(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function wu(f){const u=f.key,d=f.value,b=br(d);return b!=="string"?[new Zt(u,d,`color expected, ${b} found`)]:sr.parse(String(d))?[]:[new Zt(u,d,`color expected, "${d}" found`)]}function wc(f){const u=f.key,d=f.value,b=f.valueSpec,S=[];return Array.isArray(b.values)?b.values.indexOf(oo(d))===-1&&S.push(new Zt(u,d,`expected one of [${b.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(b.values).indexOf(oo(d))===-1&&S.push(new Zt(u,d,`expected one of [${Object.keys(b.values).join(", ")}], ${JSON.stringify(d)} found`)),S}function Wl(f){return Nl(rh(f.value))?qe(pr({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Er(f)}function Er(f){const u=f.value,d=f.key;if(br(u)!=="array")return[new Zt(d,u,`array expected, ${br(u)} found`)];const b=f.styleSpec;let S,B=[];if(u.length<1)return[new Zt(d,u,"filter array must have at least 1 element")];switch(B=B.concat(wc({key:`${d}[0]`,value:u[0],valueSpec:b.filter_operator,style:f.style,styleSpec:f.styleSpec})),oo(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&oo(u[1])==="$type"&&B.push(new Zt(d,u,`"$type" cannot be use with operator "${u[0]}"`));case"==":case"!=":u.length!==3&&B.push(new Zt(d,u,`filter array for operator "${u[0]}" must have 3 elements`));case"in":case"!in":u.length>=2&&(S=br(u[1]),S!=="string"&&B.push(new Zt(`${d}[1]`,u[1],`string expected, ${S} found`)));for(let D=2;D<u.length;D++)S=br(u[D]),oo(u[1])==="$type"?B=B.concat(wc({key:`${d}[${D}]`,value:u[D],valueSpec:b.geometry_type,style:f.style,styleSpec:f.styleSpec})):S!=="string"&&S!=="number"&&S!=="boolean"&&B.push(new Zt(`${d}[${D}]`,u[D],`string, number, or boolean expected, ${S} found`));break;case"any":case"all":case"none":for(let D=1;D<u.length;D++)B=B.concat(Er({key:`${d}[${D}]`,value:u[D],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":S=br(u[1]),u.length!==2?B.push(new Zt(d,u,`filter array for "${u[0]}" operator must have 2 elements`)):S!=="string"&&B.push(new Zt(`${d}[1]`,u[1],`string expected, ${S} found`))}return B}function wA(f,u){const d=f.key,b=f.validateSpec,S=f.style,B=f.styleSpec,D=f.value,K=f.objectKey,W=B[`${u}_${f.layerType}`];if(!W)return[];const te=K.match(/^(.*)-transition$/);if(u==="paint"&&te&&W[te[1]]&&W[te[1]].transition)return b({key:d,value:D,valueSpec:B.transition,style:S,styleSpec:B});const re=f.valueSpec||W[K];if(!re)return[new Zt(d,D,`unknown property "${K}"`)];let Ae;if(br(D)==="string"&&Xc(re)&&!re.tokens&&(Ae=/^{([^}]+)}$/.exec(D)))return[new Zt(d,D,`"${K}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Ae[1])} }\`.`)];const Oe=[];return f.layerType==="symbol"&&(K==="text-field"&&S&&!S.glyphs&&Oe.push(new Zt(d,D,'use of "text-field" requires a style "glyphs" property')),K==="text-font"&&Zu(rh(D))&&oo(D.type)==="identity"&&Oe.push(new Zt(d,D,'"text-font" does not support identity functions'))),Oe.concat(b({key:f.key,value:D,valueSpec:re,style:S,styleSpec:B,expressionContext:"property",propertyType:u,propertyKey:K}))}function ah(f){return wA(f,"paint")}function SA(f){return wA(f,"layout")}function Su(f){let u=[];const d=f.value,b=f.key,S=f.style,B=f.styleSpec;if(br(d)!=="object")return[new Zt(b,d,`object expected, ${br(d)} found`)];d.type||d.ref||u.push(new Zt(b,d,'either "type" or "ref" is required'));let D=oo(d.type);const K=oo(d.ref);if(d.id){const W=oo(d.id);for(let te=0;te<f.arrayIndex;te++){const re=S.layers[te];oo(re.id)===W&&u.push(new Zt(b,d.id,`duplicate layer id "${d.id}", previously used at line ${re.id.__line__}`))}}if("ref"in d){let W;["type","source","source-layer","filter","layout"].forEach((te=>{te in d&&u.push(new Zt(b,d[te],`"${te}" is prohibited for ref layers`))})),S.layers.forEach((te=>{oo(te.id)===K&&(W=te)})),W?W.ref?u.push(new Zt(b,d.ref,"ref cannot reference another ref layer")):D=oo(W.type):u.push(new Zt(b,d.ref,`ref layer "${K}" not found`))}else if(D!=="background")if(d.source){const W=S.sources&&S.sources[d.source],te=W&&oo(W.type);W?te==="vector"&&D==="raster"?u.push(new Zt(b,d.source,`layer "${d.id}" requires a raster source`)):te!=="raster-dem"&&D==="hillshade"||te!=="raster-dem"&&D==="color-relief"?u.push(new Zt(b,d.source,`layer "${d.id}" requires a raster-dem source`)):te==="raster"&&D!=="raster"?u.push(new Zt(b,d.source,`layer "${d.id}" requires a vector source`)):te!=="vector"||d["source-layer"]?te==="raster-dem"&&D!=="hillshade"&&D!=="color-relief"?u.push(new Zt(b,d.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):D!=="line"||!d.paint||!d.paint["line-gradient"]||te==="geojson"&&W.lineMetrics||u.push(new Zt(b,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new Zt(b,d,`layer "${d.id}" must specify a "source-layer"`)):u.push(new Zt(b,d.source,`source "${d.source}" not found`))}else u.push(new Zt(b,d,'missing required property "source"'));return u=u.concat(Ka({key:b,value:d,valueSpec:B.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${b}.type`,value:d.type,valueSpec:B.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:d,objectKey:"type"}),filter:Wl,layout:W=>Ka({layer:d,key:W.key,value:W.value,style:W.style,styleSpec:W.styleSpec,validateSpec:W.validateSpec,objectElementValidators:{"*":te=>SA(pr({layerType:D},te))}}),paint:W=>Ka({layer:d,key:W.key,value:W.value,style:W.style,styleSpec:W.styleSpec,validateSpec:W.validateSpec,objectElementValidators:{"*":te=>ah(pr({layerType:D},te))}})}})),u}function Ju(f){const u=f.value,d=f.key,b=br(u);return b!=="string"?[new Zt(d,u,`string expected, ${b} found`)]:[]}const Za={promoteId:function({key:f,value:u}){if(br(u)==="string")return Ju({key:f,value:u});{const d=[];for(const b in u)d.push(...Ju({key:`${f}.${b}`,value:u[b]}));return d}}};function lh(f){const u=f.value,d=f.key,b=f.styleSpec,S=f.style,B=f.validateSpec;if(!u.type)return[new Zt(d,u,'"type" is required')];const D=oo(u.type);let K;switch(D){case"vector":case"raster":return K=Ka({key:d,value:u,valueSpec:b[`source_${D.replace("-","_")}`],style:f.style,styleSpec:b,objectElementValidators:Za,validateSpec:B}),K;case"raster-dem":return K=(function(W){var te;const re=(te=W.sourceName)!==null&&te!==void 0?te:"",Ae=W.value,Oe=W.styleSpec,Pe=Oe.source_raster_dem,Le=W.style;let We=[];const He=br(Ae);if(Ae===void 0)return We;if(He!=="object")return We.push(new Zt("source_raster_dem",Ae,`object expected, ${He} found`)),We;const at=oo(Ae.encoding)==="custom",Rt=["redFactor","greenFactor","blueFactor","baseShift"],ft=W.value.encoding?`"${W.value.encoding}"`:"Default";for(const Ct in Ae)!at&&Rt.includes(Ct)?We.push(new Zt(Ct,Ae[Ct],`In "${re}": "${Ct}" is only valid when "encoding" is set to "custom". ${ft} encoding found`)):Pe[Ct]?We=We.concat(W.validateSpec({key:Ct,value:Ae[Ct],valueSpec:Pe[Ct],validateSpec:W.validateSpec,style:Le,styleSpec:Oe})):We.push(new Zt(Ct,Ae[Ct],`unknown property "${Ct}"`));return We})({sourceName:d,value:u,style:f.style,styleSpec:b,validateSpec:B}),K;case"geojson":if(K=Ka({key:d,value:u,valueSpec:b.source_geojson,style:S,styleSpec:b,validateSpec:B,objectElementValidators:Za}),u.cluster)for(const W in u.clusterProperties){const[te,re]=u.clusterProperties[W],Ae=typeof te=="string"?[te,["accumulated"],["get",W]]:te;K.push(...qe({key:`${d}.${W}.map`,value:re,expressionContext:"cluster-map"})),K.push(...qe({key:`${d}.${W}.reduce`,value:Ae,expressionContext:"cluster-reduce"}))}return K;case"video":return Ka({key:d,value:u,valueSpec:b.source_video,style:S,validateSpec:B,styleSpec:b});case"image":return Ka({key:d,value:u,valueSpec:b.source_image,style:S,validateSpec:B,styleSpec:b});case"canvas":return[new Zt(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return wc({key:`${d}.type`,value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function uh(f){const u=f.value,d=f.styleSpec,b=d.light,S=f.style;let B=[];const D=br(u);if(u===void 0)return B;if(D!=="object")return B=B.concat([new Zt("light",u,`object expected, ${D} found`)]),B;for(const K in u){const W=K.match(/^(.*)-transition$/);B=B.concat(W&&b[W[1]]&&b[W[1]].transition?f.validateSpec({key:K,value:u[K],valueSpec:d.transition,validateSpec:f.validateSpec,style:S,styleSpec:d}):b[K]?f.validateSpec({key:K,value:u[K],valueSpec:b[K],validateSpec:f.validateSpec,style:S,styleSpec:d}):[new Zt(K,u[K],`unknown property "${K}"`)])}return B}function ml(f){const u=f.value,d=f.styleSpec,b=d.sky,S=f.style,B=br(u);if(u===void 0)return[];if(B!=="object")return[new Zt("sky",u,`object expected, ${B} found`)];let D=[];for(const K in u)D=D.concat(b[K]?f.validateSpec({key:K,value:u[K],valueSpec:b[K],style:S,styleSpec:d}):[new Zt(K,u[K],`unknown property "${K}"`)]);return D}function ec(f){const u=f.value,d=f.styleSpec,b=d.terrain,S=f.style;let B=[];const D=br(u);if(u===void 0)return B;if(D!=="object")return B=B.concat([new Zt("terrain",u,`object expected, ${D} found`)]),B;for(const K in u)B=B.concat(b[K]?f.validateSpec({key:K,value:u[K],valueSpec:b[K],validateSpec:f.validateSpec,style:S,styleSpec:d}):[new Zt(K,u[K],`unknown property "${K}"`)]);return B}function Fd(f){let u=[];const d=f.value,b=f.key;if(Array.isArray(d)){const S=[],B=[];for(const D in d)d[D].id&&S.includes(d[D].id)&&u.push(new Zt(b,d,`all the sprites' ids must be unique, but ${d[D].id} is duplicated`)),S.push(d[D].id),d[D].url&&B.includes(d[D].url)&&u.push(new Zt(b,d,`all the sprites' URLs must be unique, but ${d[D].url} is duplicated`)),B.push(d[D].url),u=u.concat(Ka({key:`${b}[${D}]`,value:d[D],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return u}return Ju({key:b,value:d})}function n0(f){return u=f.value,u&&u.constructor===Object?[]:[new Zt(f.key,f.value,`object expected, ${br(f.value)} found`)];var u}const Om={"*":()=>[],array:Yh,boolean:function(f){const u=f.value,d=f.key,b=br(u);return b!=="boolean"?[new Zt(d,u,`boolean expected, ${b} found`)]:[]},number:oh,color:wu,constants:MA,enum:wc,filter:Wl,function:sh,layer:Su,object:Ka,source:lh,light:uh,sky:ml,terrain:ec,projection:function(f){const u=f.value,d=f.styleSpec,b=d.projection,S=f.style,B=br(u);if(u===void 0)return[];if(B!=="object")return[new Zt("projection",u,`object expected, ${B} found`)];let D=[];for(const K in u)D=D.concat(b[K]?f.validateSpec({key:K,value:u[K],valueSpec:b[K],style:S,styleSpec:d}):[new Zt(K,u[K],`unknown property "${K}"`)]);return D},projectionDefinition:function(f){const u=f.key;let d=f.value;d=d instanceof String?d.valueOf():d;const b=br(d);return b!=="array"||(function(S){return Array.isArray(S)&&S.length===3&&typeof S[0]=="string"&&typeof S[1]=="string"&&typeof S[2]=="number"})(d)||(function(S){return!!["interpolate","step","literal"].includes(S[0])})(d)?["array","string"].includes(b)?[]:[new Zt(u,d,`projection expected, invalid type "${b}" found`)]:[new Zt(u,d,`projection expected, invalid array ${JSON.stringify(d)} found`)]},string:Ju,formatted:function(f){return Ju(f).length===0?[]:qe(f)},resolvedImage:function(f){return Ju(f).length===0?[]:qe(f)},padding:function(f){const u=f.key,d=f.value;if(br(d)==="array"){if(d.length<1||d.length>4)return[new Zt(u,d,`padding requires 1 to 4 values; ${d.length} values found`)];const b={type:"number"};let S=[];for(let B=0;B<d.length;B++)S=S.concat(f.validateSpec({key:`${u}[${B}]`,value:d[B],validateSpec:f.validateSpec,valueSpec:b}));return S}return oh({key:u,value:d,valueSpec:{}})},numberArray:function(f){const u=f.key,d=f.value;if(br(d)==="array"){const b={type:"number"};if(d.length<1)return[new Zt(u,d,"array length at least 1 expected, length 0 found")];let S=[];for(let B=0;B<d.length;B++)S=S.concat(f.validateSpec({key:`${u}[${B}]`,value:d[B],validateSpec:f.validateSpec,valueSpec:b}));return S}return oh({key:u,value:d,valueSpec:{}})},colorArray:function(f){const u=f.key,d=f.value;if(br(d)==="array"){if(d.length<1)return[new Zt(u,d,"array length at least 1 expected, length 0 found")];let b=[];for(let S=0;S<d.length;S++)b=b.concat(wu({key:`${u}[${S}]`,value:d[S]}));return b}return wu({key:u,value:d})},variableAnchorOffsetCollection:function(f){const u=f.key,d=f.value,b=br(d),S=f.styleSpec;if(b!=="array"||d.length<1||d.length%2!=0)return[new Zt(u,d,"variableAnchorOffsetCollection requires a non-empty array of even length")];let B=[];for(let D=0;D<d.length;D+=2)B=B.concat(wc({key:`${u}[${D}]`,value:d[D],valueSpec:S.layout_symbol["text-anchor"]})),B=B.concat(Yh({key:`${u}[${D+1}]`,value:d[D+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:S}));return B},sprite:Fd,state:n0};function Bm(f){const u=f.value,d=f.valueSpec,b=f.styleSpec;return f.validateSpec=Bm,d.expression&&Zu(oo(u))?sh(f):d.expression&&Qh(rh(u))?qe(f):d.type&&Om[d.type]?Om[d.type](f):Ka(pr({},f,{valueSpec:d.type?b[d.type]:d}))}function ia(f){const u=f.value,d=f.key,b=Ju(f);return b.length||(u.indexOf("{fontstack}")===-1&&b.push(new Zt(d,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&b.push(new Zt(d,u,'"glyphs" url must include a "{range}" token'))),b}function la(f,u=st){let d=[];return d=d.concat(Bm({key:"",value:f,valueSpec:u.$root,styleSpec:u,style:f,validateSpec:Bm,objectElementValidators:{glyphs:ia,"*":()=>[]}})),f.constants&&(d=d.concat(MA({key:"constants",value:f.constants}))),Tf(d)}function Xa(f){return function(u){return f(Object.assign({},u,{validateSpec:Bm}))}}function Tf(f){return[].concat(f).sort(((u,d)=>u.line-d.line))}function tc(f){return function(...u){return Tf(f.apply(this,u))}}la.source=tc(Xa(lh)),la.sprite=tc(Xa(Fd)),la.glyphs=tc(Xa(ia)),la.light=tc(Xa(uh)),la.sky=tc(Xa(ml)),la.terrain=tc(Xa(ec)),la.state=tc(Xa(n0)),la.layer=tc(Xa(Su)),la.filter=tc(Xa(Wl)),la.paintProperty=tc(Xa(ah)),la.layoutProperty=tc(Xa(SA));const tA=la,EA=tA.light,zd=tA.sky,O1=tA.paintProperty,Im=tA.layoutProperty;function nc(f,u){let d=!1;if(u&&u.length)for(const b of u)f.fire(new Mt(new Error(b.message))),d=!0;return d}class ic{constructor(u,d,b){const S=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;const D=new Int32Array(this.arrayBuffer);u=D[0],this.d=(d=D[1])+2*(b=D[2]);for(let W=0;W<this.d*this.d;W++){const te=D[3+W],re=D[3+W+1];S.push(te===re?null:D.subarray(te,re))}const K=D[3+S.length+1];this.keys=D.subarray(D[3+S.length],K),this.bboxes=D.subarray(K),this.insert=this._insertReadonly}else{this.d=d+2*b;for(let D=0;D<this.d*this.d;D++)S.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=u,this.padding=b,this.scale=d/u,this.uid=0;const B=b/d*u;this.min=-B,this.max=u+B}insert(u,d,b,S,B){this._forEachCell(d,b,S,B,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(d),this.bboxes.push(b),this.bboxes.push(S),this.bboxes.push(B)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,d,b,S,B,D){this.cells[B].push(D)}query(u,d,b,S,B){const D=this.min,K=this.max;if(u<=D&&d<=D&&K<=b&&K<=S&&!B)return Array.prototype.slice.call(this.keys);{const W=[];return this._forEachCell(u,d,b,S,this._queryCell,W,{},B),W}}_queryCell(u,d,b,S,B,D,K,W){const te=this.cells[B];if(te!==null){const re=this.keys,Ae=this.bboxes;for(let Oe=0;Oe<te.length;Oe++){const Pe=te[Oe];if(K[Pe]===void 0){const Le=4*Pe;(W?W(Ae[Le+0],Ae[Le+1],Ae[Le+2],Ae[Le+3]):u<=Ae[Le+2]&&d<=Ae[Le+3]&&b>=Ae[Le+0]&&S>=Ae[Le+1])?(K[Pe]=!0,D.push(re[Pe])):K[Pe]=!1}}}}_forEachCell(u,d,b,S,B,D,K,W){const te=this._convertToCellCoord(u),re=this._convertToCellCoord(d),Ae=this._convertToCellCoord(b),Oe=this._convertToCellCoord(S);for(let Pe=te;Pe<=Ae;Pe++)for(let Le=re;Le<=Oe;Le++){const We=this.d*Le+Pe;if((!W||W(this._convertFromCellCoord(Pe),this._convertFromCellCoord(Le),this._convertFromCellCoord(Pe+1),this._convertFromCellCoord(Le+1)))&&B.call(this,u,d,b,S,We,D,K,W))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const u=this.cells,d=3+this.cells.length+1+1;let b=0;for(let D=0;D<this.cells.length;D++)b+=this.cells[D].length;const S=new Int32Array(d+b+this.keys.length+this.bboxes.length);S[0]=this.extent,S[1]=this.n,S[2]=this.padding;let B=d;for(let D=0;D<u.length;D++){const K=u[D];S[3+D]=B,S.set(K,B),B+=K.length}return S[3+u.length]=B,S.set(this.keys,B),B+=this.keys.length,S[3+u.length+1]=B,S.set(this.bboxes,B),B+=this.bboxes.length,S.buffer}static serialize(u,d){const b=u.toArrayBuffer();return d&&d.push(b),{buffer:b}}static deserialize(u){return new ic(u.buffer)}}const Eu={};function Xn(f,u,d={}){if(Eu[f])throw new Error(`${f} is already registered.`);Object.defineProperty(u,"_classRegistryKey",{value:f,writeable:!1}),Eu[f]={klass:u,omit:d.omit||[],shallow:d.shallow||[]}}Xn("Object",Object),Xn("Set",Set),Xn("TransferableGridIndex",ic),Xn("Color",sr),Xn("Error",Error),Xn("AJAXError",Ue),Xn("ResolvedImage",Wo),Xn("StylePropertyFunction",_A),Xn("StyleExpression",Wh,{omit:["_evaluator"]}),Xn("ZoomDependentExpression",uu),Xn("ZoomConstantExpression",kf),Xn("CompoundExpression",au,{omit:["_evaluate"]});for(const f in th)th[f]._classRegistryKey||Xn(`Expression_${f}`,th[f]);function km(f){return f&&typeof ArrayBuffer<"u"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function ch(f){return f.$name||f.constructor._classRegistryKey}function Rf(f){return!(function(u){if(u===null||typeof u!="object")return!1;const d=ch(u);return!(!d||d==="Object")})(f)&&(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||km(f)||Tn(f)||ArrayBuffer.isView(f)||f instanceof ImageData)}function nA(f,u){if(Rf(f))return(km(f)||Tn(f))&&u&&u.push(f),ArrayBuffer.isView(f)&&u&&u.push(f.buffer),f instanceof ImageData&&u&&u.push(f.data.buffer),f;if(Array.isArray(f)){const B=[];for(const D of f)B.push(nA(D,u));return B}if(typeof f!="object")throw new Error("can't serialize object of type "+typeof f);const d=ch(f);if(!d)throw new Error(`can't serialize object of unregistered class ${f.constructor.name}`);if(!Eu[d])throw new Error(`${d} is not registered.`);const{klass:b}=Eu[d],S=b.serialize?b.serialize(f,u):{};if(b.serialize){if(u&&S===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const B in f){if(!f.hasOwnProperty(B)||Eu[d].omit.indexOf(B)>=0)continue;const D=f[B];S[B]=Eu[d].shallow.indexOf(B)>=0?D:nA(D,u)}f instanceof Error&&(S.message=f.message)}if(S.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(S.$name=d),S}function Ah(f){if(Rf(f))return f;if(Array.isArray(f))return f.map(Ah);if(typeof f!="object")throw new Error("can't deserialize object of type "+typeof f);const u=ch(f)||"Object";if(!Eu[u])throw new Error(`can't deserialize unregistered class ${u}`);const{klass:d}=Eu[u];if(!d)throw new Error(`can't deserialize unregistered class ${u}`);if(d.deserialize)return d.deserialize(f);const b=Object.create(d.prototype);for(const S of Object.keys(f)){if(S==="$name")continue;const B=f[S];b[S]=Eu[u].shallow.indexOf(S)>=0?B:Ah(B)}return b}class Tm{constructor(){this.first=!0}update(u,d){const b=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=b,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=b,!0):(this.lastFloorZoom>b?(this.lastIntegerZoom=b+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<b&&(this.lastIntegerZoom=b,this.lastIntegerZoomTime=d),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=b,!0))}}const Or={"Latin-1 Supplement":f=>f>=128&&f<=255,"Hangul Jamo":f=>f>=4352&&f<=4607,Khmer:f=>f>=6016&&f<=6143,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Hiragana:f=>f>=12352&&f<=12447,Katakana:f=>f>=12448&&f<=12543,Kanbun:f=>f>=12688&&f<=12703,"CJK Strokes":f=>f>=12736&&f<=12783,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"CJK Unified Ideographs":f=>f>=19968&&f<=40959,"Hangul Syllables":f=>f>=44032&&f<=55215,"Private Use Area":f=>f>=57344&&f<=63743,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function rc(f){for(const u of f)if($h(u.charCodeAt(0)))return!0;return!1}function iA(f){for(const u of f)if(!jd(u.charCodeAt(0)))return!1;return!0}function Rm(f){const u=f.map((d=>{try{return new RegExp(`\\p{sc=${d}}`,"u").source}catch{return null}})).filter((d=>d));return new RegExp(u.join("|"),"u")}const Dm=Rm(["Arab","Dupl","Mong","Ougr","Syrc"]);function jd(f){return!Dm.test(String.fromCodePoint(f))}const Ou=Rm(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function $h(f){return!(f!==746&&f!==747&&(f<4352||!(Or["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||Or["CJK Compatibility"](f)||Or["CJK Strokes"](f)||!(!Or["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||Or["Enclosed CJK Letters and Months"](f)||Or["Ideographic Description Characters"](f)||Or.Kanbun(f)||Or.Katakana(f)&&f!==12540||!(!Or["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!Or["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||Or["Vertical Forms"](f)||Or["Yijing Hexagram Symbols"](f)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(f))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(f))||Ou.test(String.fromCodePoint(f)))))}function oc(f){return!($h(f)||(function(u){return!!(Or["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||Or["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||Or["Letterlike Symbols"](u)||Or["Number Forms"](u)||Or["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||Or["Control Pictures"](u)&&u!==9251||Or["Optical Character Recognition"](u)||Or["Enclosed Alphanumerics"](u)||Or["Geometric Shapes"](u)||Or["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||Or["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||Or["CJK Symbols and Punctuation"](u)||Or.Katakana(u)||Or["Private Use Area"](u)||Or["CJK Compatibility Forms"](u)||Or["Small Form Variants"](u)||Or["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)})(f))}const Ql=Rm(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Pm(f){return Ql.test(String.fromCodePoint(f))}function hh(f,u){return!(!u&&Pm(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||Or.Khmer(f))}function Df(f){for(const u of f)if(Pm(u.charCodeAt(0)))return!0;return!1}const Ja=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){if(Ja.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(f,u){return a(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(f.pluginStatus!=="loading")return this.setState(f),f;const d=f.pluginURL,b=new Promise((B=>{this.loadScriptResolve=B}));u(d);const S=new Promise((B=>setTimeout((()=>B()),this.TIMEOUT)));if(yield Promise.race([b,S]),this.isParsed()){const B={pluginStatus:"loaded",pluginURL:d};return this.setState(B),B}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${d}`)}))}};class Qr{constructor(u,d){this.isSupportedScript=Um,this.zoom=u,d?(this.now=d.now||0,this.fadeDuration=d.fadeDuration||0,this.zoomHistory=d.zoomHistory||new Tm,this.transition=d.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Tm,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const u=this.zoom,d=u-Math.floor(u),b=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*b}:{fromScale:.5,toScale:1,t:1-(1-b)*d}}}function Um(f){return(function(u,d){for(const b of u)if(!hh(b.charCodeAt(0),d))return!1;return!0})(f,Ja.getRTLTextPluginStatus()==="loaded")}class rA{constructor(u,d,b){this.property=u,this.value=d,this.expression=(function(S,B,D){if(Zu(S))return new _A(S,B);if(Qh(S)){const K=Ud(S,B,D);if(K.result==="error")throw new Error(K.value.map((W=>`${W.key}: ${W.message}`)).join(", "));return K.value}{let K=S;return B.type==="color"&&typeof S=="string"?K=sr.parse(S):B.type!=="padding"||typeof S!="number"&&!Array.isArray(S)?B.type!=="numberArray"||typeof S!="number"&&!Array.isArray(S)?B.type!=="colorArray"||typeof S!="string"&&!Array.isArray(S)?B.type==="variableAnchorOffsetCollection"&&Array.isArray(S)?K=Zo.parse(S):B.type==="projectionDefinition"&&typeof S=="string"&&(K=Ms.parse(S)):K=Ho.parse(S):K=Eo.parse(S):K=Ro.parse(S),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>K}}})(d===void 0?u.specification.default:d,u.specification,b)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(u,d,b){return this.property.possiblyEvaluate(this,u,d,b)}}class Bu{constructor(u,d){this.property=u,this.value=new rA(u,void 0,d)}transitioned(u,d){return new Pf(this.property,this.value,d,Ke({},u.transition,this.transition),u.now)}untransitioned(){return new Pf(this.property,this.value,null,{},0)}}class Nd{constructor(u,d){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues),this._globalState=d}getValue(u){return ut(this._values[u].value.value)}setValue(u,d){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Bu(this._values[u].property,this._globalState)),this._values[u].value=new rA(this._values[u].property,d===null?void 0:ut(d),this._globalState)}getTransition(u){return ut(this._values[u].transition)}setTransition(u,d){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Bu(this._values[u].property,this._globalState)),this._values[u].transition=ut(d)||void 0}serialize(){const u={};for(const d of Object.keys(this._values)){const b=this.getValue(d);b!==void 0&&(u[d]=b);const S=this.getTransition(d);S!==void 0&&(u[`${d}-transition`]=S)}return u}transitioned(u,d){const b=new La(this._properties);for(const S of Object.keys(this._values))b._values[S]=this._values[S].transitioned(u,d._values[S]);return b}untransitioned(){const u=new La(this._properties);for(const d of Object.keys(this._values))u._values[d]=this._values[d].untransitioned();return u}}class Pf{constructor(u,d,b,S,B){this.property=u,this.value=d,this.begin=B+S.delay||0,this.end=this.begin+S.duration||0,u.specification.transition&&(S.delay||S.duration)&&(this.prior=b)}possiblyEvaluate(u,d,b){const S=u.now||0,B=this.value.possiblyEvaluate(u,d,b),D=this.prior;if(D){if(S>this.end)return this.prior=null,B;if(this.value.isDataDriven())return this.prior=null,B;if(S<this.begin)return D.possiblyEvaluate(u,d,b);{const K=(S-this.begin)/(this.end-this.begin);return this.property.interpolate(D.possiblyEvaluate(u,d,b),B,xe(K))}}return B}}class La{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,d,b){const S=new Iu(this._properties);for(const B of Object.keys(this._values))S._values[B]=this._values[B].possiblyEvaluate(u,d,b);return S}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class Gd{constructor(u,d){this._properties=u,this._values=Object.create(u.defaultPropertyValues),this._globalState=d}hasValue(u){return this._values[u].value!==void 0}getValue(u){return ut(this._values[u].value)}setValue(u,d){this._values[u]=new rA(this._values[u].property,d===null?void 0:ut(d),this._globalState)}serialize(){const u={};for(const d of Object.keys(this._values)){const b=this.getValue(d);b!==void 0&&(u[d]=b)}return u}possiblyEvaluate(u,d,b){const S=new Iu(this._properties);for(const B of Object.keys(this._values))S._values[B]=this._values[B].possiblyEvaluate(u,d,b);return S}}class cu{constructor(u,d,b){this.property=u,this.value=d,this.parameters=b}isConstant(){return this.value.kind==="constant"}constantOr(u){return this.value.kind==="constant"?this.value.value:u}evaluate(u,d,b,S){return this.property.evaluate(this.value,this.parameters,u,d,b,S)}}class Iu{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class ci{constructor(u){this.specification=u}possiblyEvaluate(u,d){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(d)}interpolate(u,d,b){const S=Zc[this.specification.type];return S?S(u,d,b):u}}class fi{constructor(u,d){this.specification=u,this.overrides=d}possiblyEvaluate(u,d,b,S){return new cu(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(d,null,{},b,S)}:u.expression,d)}interpolate(u,d,b){if(u.value.kind!=="constant"||d.value.kind!=="constant")return u;if(u.value.value===void 0||d.value.value===void 0)return new cu(this,{kind:"constant",value:void 0},u.parameters);const S=Zc[this.specification.type];if(S){const B=S(u.value.value,d.value.value,b);return new cu(this,{kind:"constant",value:B},u.parameters)}return u}evaluate(u,d,b,S,B,D){return u.kind==="constant"?u.value:u.evaluate(d,b,S,B,D)}}class ku extends fi{possiblyEvaluate(u,d,b,S){if(u.value===void 0)return new cu(this,{kind:"constant",value:void 0},d);if(u.expression.kind==="constant"){const B=u.expression.evaluate(d,null,{},b,S),D=u.property.specification.type==="resolvedImage"&&typeof B!="string"?B.name:B,K=this._calculate(D,D,D,d);return new cu(this,{kind:"constant",value:K},d)}if(u.expression.kind==="camera"){const B=this._calculate(u.expression.evaluate({zoom:d.zoom-1}),u.expression.evaluate({zoom:d.zoom}),u.expression.evaluate({zoom:d.zoom+1}),d);return new cu(this,{kind:"constant",value:B},d)}return new cu(this,u.expression,d)}evaluate(u,d,b,S,B,D){if(u.kind==="source"){const K=u.evaluate(d,b,S,B,D);return this._calculate(K,K,K,d)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(d.zoom)-1},b,S),u.evaluate({zoom:Math.floor(d.zoom)},b,S),u.evaluate({zoom:Math.floor(d.zoom)+1},b,S),d):u.value}_calculate(u,d,b,S){return S.zoom>S.zoomHistory.lastIntegerZoom?{from:u,to:d}:{from:b,to:d}}interpolate(u){return u}}class Km{constructor(u){this.specification=u}possiblyEvaluate(u,d,b,S){if(u.value!==void 0){if(u.expression.kind==="constant"){const B=u.expression.evaluate(d,null,{},b,S);return this._calculate(B,B,B,d)}return this._calculate(u.expression.evaluate(new Qr(Math.floor(d.zoom-1),d)),u.expression.evaluate(new Qr(Math.floor(d.zoom),d)),u.expression.evaluate(new Qr(Math.floor(d.zoom+1),d)),d)}}_calculate(u,d,b,S){return S.zoom>S.zoomHistory.lastIntegerZoom?{from:u,to:d}:{from:b,to:d}}interpolate(u){return u}}class Fa{constructor(u){this.specification=u}possiblyEvaluate(u,d,b,S){return!!u.expression.evaluate(d,null,{},b,S)}interpolate(){return!1}}class za{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in u){const b=u[d];b.specification.overridable&&this.overridableProperties.push(d);const S=this.defaultPropertyValues[d]=new rA(b,void 0,void 0),B=this.defaultTransitionablePropertyValues[d]=new Bu(b,void 0);this.defaultTransitioningPropertyValues[d]=B.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=S.possiblyEvaluate({})}}}Xn("DataDrivenProperty",fi),Xn("DataConstantProperty",ci),Xn("CrossFadedDataDrivenProperty",ku),Xn("CrossFadedProperty",Km),Xn("ColorRampProperty",Fa);const Tu="-transition";class ua extends Pt{constructor(u,d,b){if(super(),this.id=u.id,this.type=u.type,this._globalState=b,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},u.type!=="custom"&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter,this._featureFilter=Gl(u.filter,b)),d.layout&&(this._unevaluatedLayout=new Gd(d.layout,b)),d.paint)){this._transitionablePaint=new Nd(d.paint,b);for(const S in u.paint)this.setPaintProperty(S,u.paint[S],{validate:!1});for(const S in u.layout)this.setLayoutProperty(S,u.layout[S],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Iu(d.paint)}}setFilter(u){this.filter=u,this._featureFilter=Gl(u,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)}getLayoutAffectingGlobalStateRefs(){const u=new Set;if(this._unevaluatedLayout)for(const d in this._unevaluatedLayout._values){const b=this._unevaluatedLayout._values[d];for(const S of b.getGlobalStateRefs())u.add(S)}for(const d of this._featureFilter.getGlobalStateRefs())u.add(d);return u}getPaintAffectingGlobalStateRefs(){var u;const d=new globalThis.Map;if(this._transitionablePaint)for(const b in this._transitionablePaint._values){const S=this._transitionablePaint._values[b].value;for(const B of S.getGlobalStateRefs()){const D=(u=d.get(B))!==null&&u!==void 0?u:[];D.push({name:b,value:S.value}),d.set(B,D)}}return d}setLayoutProperty(u,d,b={}){d!=null&&this._validate(Im,`layers.${this.id}.layout.${u}`,u,d,b)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,d):this.visibility=d)}getPaintProperty(u){return u.endsWith(Tu)?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)}setPaintProperty(u,d,b={}){if(d!=null&&this._validate(O1,`layers.${this.id}.paint.${u}`,u,d,b))return!1;if(u.endsWith(Tu))return this._transitionablePaint.setTransition(u.slice(0,-11),d||void 0),!1;{const S=this._transitionablePaint._values[u],B=S.property.specification["property-type"]==="cross-faded-data-driven",D=S.value.isDataDriven(),K=S.value;this._transitionablePaint.setValue(u,d),this._handleSpecialPaintPropertyUpdate(u);const W=this._transitionablePaint._values[u].value;return W.isDataDriven()||D||B||this._handleOverridablePaintPropertyUpdate(u,K,W)}}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,d,b){return!1}isHidden(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,d){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,d)}serialize(){const u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),Ne(u,((d,b)=>!(d===void 0||b==="layout"&&!Object.keys(d).length||b==="paint"&&!Object.keys(d).length)))}_validate(u,d,b,S,B={}){return(!B||B.validate!==!1)&&nc(this,u.call(tA,{key:d,layerType:this.type,objectKey:b,value:S,styleSpec:st,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const u in this.paint._values){const d=this.paint.get(u);if(d instanceof cu&&Xc(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}const Ru={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class OA{constructor(u,d){this._structArray=u,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class hs{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,d){return u._trim(),d&&(u.isTransferred=!0,d.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){const d=Object.create(this.prototype);return d.arrayBuffer=u.arrayBuffer,d.length=u.length,d.capacity=u.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function bo(f,u=1){let d=0,b=0;return{members:f.map((S=>{const B=Ru[S.type].BYTES_PER_ELEMENT,D=d=Bl(d,Math.max(u,B)),K=S.components||1;return b=Math.max(b,B),d+=B*K,{name:S.name,type:S.type,components:K,offset:D}})),size:Bl(d,Math.max(b,u)),alignment:u}}function Bl(f,u){return Math.ceil(f/u)*u}class Us extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d){const b=this.length;return this.resize(b+1),this.emplace(b,u,d)}emplace(u,d,b){const S=2*u;return this.int16[S+0]=d,this.int16[S+1]=b,u}}Us.prototype.bytesPerElement=4,Xn("StructArrayLayout2i4",Us);class BA extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b){const S=this.length;return this.resize(S+1),this.emplace(S,u,d,b)}emplace(u,d,b,S){const B=3*u;return this.int16[B+0]=d,this.int16[B+1]=b,this.int16[B+2]=S,u}}BA.prototype.bytesPerElement=6,Xn("StructArrayLayout3i6",BA);class el extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,S){const B=this.length;return this.resize(B+1),this.emplace(B,u,d,b,S)}emplace(u,d,b,S,B){const D=4*u;return this.int16[D+0]=d,this.int16[D+1]=b,this.int16[D+2]=S,this.int16[D+3]=B,u}}el.prototype.bytesPerElement=8,Xn("StructArrayLayout4i8",el);class Cr extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,S,B,D){const K=this.length;return this.resize(K+1),this.emplace(K,u,d,b,S,B,D)}emplace(u,d,b,S,B,D,K){const W=6*u;return this.int16[W+0]=d,this.int16[W+1]=b,this.int16[W+2]=S,this.int16[W+3]=B,this.int16[W+4]=D,this.int16[W+5]=K,u}}Cr.prototype.bytesPerElement=12,Xn("StructArrayLayout2i4i12",Cr);class Po extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,S,B,D){const K=this.length;return this.resize(K+1),this.emplace(K,u,d,b,S,B,D)}emplace(u,d,b,S,B,D,K){const W=4*u,te=8*u;return this.int16[W+0]=d,this.int16[W+1]=b,this.uint8[te+4]=S,this.uint8[te+5]=B,this.uint8[te+6]=D,this.uint8[te+7]=K,u}}Po.prototype.bytesPerElement=8,Xn("StructArrayLayout2i4ub8",Po);class qo extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d){const b=this.length;return this.resize(b+1),this.emplace(b,u,d)}emplace(u,d,b){const S=2*u;return this.float32[S+0]=d,this.float32[S+1]=b,u}}qo.prototype.bytesPerElement=8,Xn("StructArrayLayout2f8",qo);class Wd extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b,S,B,D,K,W,te,re){const Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,u,d,b,S,B,D,K,W,te,re)}emplace(u,d,b,S,B,D,K,W,te,re,Ae){const Oe=10*u;return this.uint16[Oe+0]=d,this.uint16[Oe+1]=b,this.uint16[Oe+2]=S,this.uint16[Oe+3]=B,this.uint16[Oe+4]=D,this.uint16[Oe+5]=K,this.uint16[Oe+6]=W,this.uint16[Oe+7]=te,this.uint16[Oe+8]=re,this.uint16[Oe+9]=Ae,u}}Wd.prototype.bytesPerElement=20,Xn("StructArrayLayout10ui20",Wd);class Vh extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b,S,B,D,K,W){const te=this.length;return this.resize(te+1),this.emplace(te,u,d,b,S,B,D,K,W)}emplace(u,d,b,S,B,D,K,W,te){const re=8*u;return this.uint16[re+0]=d,this.uint16[re+1]=b,this.uint16[re+2]=S,this.uint16[re+3]=B,this.uint16[re+4]=D,this.uint16[re+5]=K,this.uint16[re+6]=W,this.uint16[re+7]=te,u}}Vh.prototype.bytesPerElement=16,Xn("StructArrayLayout8ui16",Vh);class IA extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b,S,B,D,K,W,te,re,Ae,Oe){const Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,u,d,b,S,B,D,K,W,te,re,Ae,Oe)}emplace(u,d,b,S,B,D,K,W,te,re,Ae,Oe,Pe){const Le=12*u;return this.int16[Le+0]=d,this.int16[Le+1]=b,this.int16[Le+2]=S,this.int16[Le+3]=B,this.uint16[Le+4]=D,this.uint16[Le+5]=K,this.uint16[Le+6]=W,this.uint16[Le+7]=te,this.int16[Le+8]=re,this.int16[Le+9]=Ae,this.int16[Le+10]=Oe,this.int16[Le+11]=Pe,u}}IA.prototype.bytesPerElement=24,Xn("StructArrayLayout4i4ui4i24",IA);class Uf extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b){const S=this.length;return this.resize(S+1),this.emplace(S,u,d,b)}emplace(u,d,b,S){const B=3*u;return this.float32[B+0]=d,this.float32[B+1]=b,this.float32[B+2]=S,u}}Uf.prototype.bytesPerElement=12,Xn("StructArrayLayout3f12",Uf);class I extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){const d=this.length;return this.resize(d+1),this.emplace(d,u)}emplace(u,d){return this.uint32[1*u+0]=d,u}}I.prototype.bytesPerElement=4,Xn("StructArrayLayout1ul4",I);class l extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b,S,B,D,K,W,te){const re=this.length;return this.resize(re+1),this.emplace(re,u,d,b,S,B,D,K,W,te)}emplace(u,d,b,S,B,D,K,W,te,re){const Ae=10*u,Oe=5*u;return this.int16[Ae+0]=d,this.int16[Ae+1]=b,this.int16[Ae+2]=S,this.int16[Ae+3]=B,this.int16[Ae+4]=D,this.int16[Ae+5]=K,this.uint32[Oe+3]=W,this.uint16[Ae+8]=te,this.uint16[Ae+9]=re,u}}l.prototype.bytesPerElement=20,Xn("StructArrayLayout6i1ul2ui20",l);class p extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,S,B,D){const K=this.length;return this.resize(K+1),this.emplace(K,u,d,b,S,B,D)}emplace(u,d,b,S,B,D,K){const W=6*u;return this.int16[W+0]=d,this.int16[W+1]=b,this.int16[W+2]=S,this.int16[W+3]=B,this.int16[W+4]=D,this.int16[W+5]=K,u}}p.prototype.bytesPerElement=12,Xn("StructArrayLayout2i2i2i12",p);class C extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,S,B){const D=this.length;return this.resize(D+1),this.emplace(D,u,d,b,S,B)}emplace(u,d,b,S,B,D){const K=4*u,W=8*u;return this.float32[K+0]=d,this.float32[K+1]=b,this.float32[K+2]=S,this.int16[W+6]=B,this.int16[W+7]=D,u}}C.prototype.bytesPerElement=16,Xn("StructArrayLayout2f1f2i16",C);class E extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,S,B,D){const K=this.length;return this.resize(K+1),this.emplace(K,u,d,b,S,B,D)}emplace(u,d,b,S,B,D,K){const W=16*u,te=4*u,re=8*u;return this.uint8[W+0]=d,this.uint8[W+1]=b,this.float32[te+1]=S,this.float32[te+2]=B,this.int16[re+6]=D,this.int16[re+7]=K,u}}E.prototype.bytesPerElement=16,Xn("StructArrayLayout2ub2f2i16",E);class T extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b){const S=this.length;return this.resize(S+1),this.emplace(S,u,d,b)}emplace(u,d,b,S){const B=3*u;return this.uint16[B+0]=d,this.uint16[B+1]=b,this.uint16[B+2]=S,u}}T.prototype.bytesPerElement=6,Xn("StructArrayLayout3ui6",T);class U extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b,S,B,D,K,W,te,re,Ae,Oe,Pe,Le,We,He,at){const Rt=this.length;return this.resize(Rt+1),this.emplace(Rt,u,d,b,S,B,D,K,W,te,re,Ae,Oe,Pe,Le,We,He,at)}emplace(u,d,b,S,B,D,K,W,te,re,Ae,Oe,Pe,Le,We,He,at,Rt){const ft=24*u,Ct=12*u,zt=48*u;return this.int16[ft+0]=d,this.int16[ft+1]=b,this.uint16[ft+2]=S,this.uint16[ft+3]=B,this.uint32[Ct+2]=D,this.uint32[Ct+3]=K,this.uint32[Ct+4]=W,this.uint16[ft+10]=te,this.uint16[ft+11]=re,this.uint16[ft+12]=Ae,this.float32[Ct+7]=Oe,this.float32[Ct+8]=Pe,this.uint8[zt+36]=Le,this.uint8[zt+37]=We,this.uint8[zt+38]=He,this.uint32[Ct+10]=at,this.int16[ft+22]=Rt,u}}U.prototype.bytesPerElement=48,Xn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",U);class Q extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b,S,B,D,K,W,te,re,Ae,Oe,Pe,Le,We,He,at,Rt,ft,Ct,zt,en,An,Gn,Un,Nn,xi,zn){const jn=this.length;return this.resize(jn+1),this.emplace(jn,u,d,b,S,B,D,K,W,te,re,Ae,Oe,Pe,Le,We,He,at,Rt,ft,Ct,zt,en,An,Gn,Un,Nn,xi,zn)}emplace(u,d,b,S,B,D,K,W,te,re,Ae,Oe,Pe,Le,We,He,at,Rt,ft,Ct,zt,en,An,Gn,Un,Nn,xi,zn,jn){const on=32*u,Ni=16*u;return this.int16[on+0]=d,this.int16[on+1]=b,this.int16[on+2]=S,this.int16[on+3]=B,this.int16[on+4]=D,this.int16[on+5]=K,this.int16[on+6]=W,this.int16[on+7]=te,this.uint16[on+8]=re,this.uint16[on+9]=Ae,this.uint16[on+10]=Oe,this.uint16[on+11]=Pe,this.uint16[on+12]=Le,this.uint16[on+13]=We,this.uint16[on+14]=He,this.uint16[on+15]=at,this.uint16[on+16]=Rt,this.uint16[on+17]=ft,this.uint16[on+18]=Ct,this.uint16[on+19]=zt,this.uint16[on+20]=en,this.uint16[on+21]=An,this.uint16[on+22]=Gn,this.uint32[Ni+12]=Un,this.float32[Ni+13]=Nn,this.float32[Ni+14]=xi,this.uint16[on+30]=zn,this.uint16[on+31]=jn,u}}Q.prototype.bytesPerElement=64,Xn("StructArrayLayout8i15ui1ul2f2ui64",Q);class Z extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){const d=this.length;return this.resize(d+1),this.emplace(d,u)}emplace(u,d){return this.float32[1*u+0]=d,u}}Z.prototype.bytesPerElement=4,Xn("StructArrayLayout1f4",Z);class ae extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b){const S=this.length;return this.resize(S+1),this.emplace(S,u,d,b)}emplace(u,d,b,S){const B=3*u;return this.uint16[6*u+0]=d,this.float32[B+1]=b,this.float32[B+2]=S,u}}ae.prototype.bytesPerElement=12,Xn("StructArrayLayout1ui2f12",ae);class ce extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b){const S=this.length;return this.resize(S+1),this.emplace(S,u,d,b)}emplace(u,d,b,S){const B=4*u;return this.uint32[2*u+0]=d,this.uint16[B+2]=b,this.uint16[B+3]=S,u}}ce.prototype.bytesPerElement=8,Xn("StructArrayLayout1ul2ui8",ce);class Ce extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d){const b=this.length;return this.resize(b+1),this.emplace(b,u,d)}emplace(u,d,b){const S=2*u;return this.uint16[S+0]=d,this.uint16[S+1]=b,u}}Ce.prototype.bytesPerElement=4,Xn("StructArrayLayout2ui4",Ce);class fe extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){const d=this.length;return this.resize(d+1),this.emplace(d,u)}emplace(u,d){return this.uint16[1*u+0]=d,u}}fe.prototype.bytesPerElement=2,Xn("StructArrayLayout1ui2",fe);class Re extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b,S){const B=this.length;return this.resize(B+1),this.emplace(B,u,d,b,S)}emplace(u,d,b,S,B){const D=4*u;return this.float32[D+0]=d,this.float32[D+1]=b,this.float32[D+2]=S,this.float32[D+3]=B,u}}Re.prototype.bytesPerElement=16,Xn("StructArrayLayout4f16",Re);class Ge extends OA{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new c(this.anchorPointX,this.anchorPointY)}}Ge.prototype.size=20;class Ze extends l{get(u){return new Ge(this,u)}}Xn("CollisionBoxArray",Ze);class Xe extends OA{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Xe.prototype.size=48;class tt extends U{get(u){return new Xe(this,u)}}Xn("PlacedSymbolArray",tt);class ot extends OA{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ot.prototype.size=64;class nt extends Q{get(u){return new ot(this,u)}}Xn("SymbolInstanceArray",nt);class ct extends Z{getoffsetX(u){return this.float32[1*u+0]}}Xn("GlyphOffsetArray",ct);class gt extends BA{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}Xn("SymbolLineVertexArray",gt);class xt extends OA{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}xt.prototype.size=12;class ht extends ae{get(u){return new xt(this,u)}}Xn("TextAnchorOffsetArray",ht);class Et extends OA{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Et.prototype.size=8;class Qt extends ce{get(u){return new Et(this,u)}}Xn("FeatureIndexArray",Qt);class Kt extends Us{}class Nt extends Us{}class Wt extends Us{}class In extends Cr{}class kn extends Po{}class cn extends qo{}class Qn extends Wd{}class Xi extends Vh{}class mo extends IA{}class os extends Uf{}class Uo extends I{}class ds extends p{}class Jo extends E{}class ya extends T{}class ss extends Ce{}const Bo=bo([{name:"a_pos",components:2,type:"Int16"}],4),{members:so}=Bo;class Br{constructor(u=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=u}prepareSegment(u,d,b,S){const B=this.segments[this.segments.length-1];return u>Br.MAX_VERTEX_ARRAY_LENGTH&&pt(`Max vertices per segment is ${Br.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${u}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Br.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!B||B.vertexLength+u>Br.MAX_VERTEX_ARRAY_LENGTH||B.sortKey!==S?this.createNewSegment(d,b,S):B}createNewSegment(u,d,b){const S={vertexOffset:u.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0,vaos:{}};return b!==void 0&&(S.sortKey=b),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(S),S}getOrCreateLatestSegment(u,d,b){return this.prepareSegment(0,u,d,b)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const u of this.segments)for(const d in u.vaos)u.vaos[d].destroy()}static simpleSegment(u,d,b,S){return new Br([{vertexOffset:u,primitiveOffset:d,vertexLength:b,primitiveLength:S,vaos:{},sortKey:0}])}}function fs(f,u){return 256*(f=bt(Math.floor(f),0,255))+bt(Math.floor(u),0,255)}Br.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Xn("SegmentVector",Br);const sc=bo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),dh=bo([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var Sc,Qd,Kf,fh={exports:{}},ph={exports:{}},Au={exports:{}},mh=(function(){if(Kf)return fh.exports;Kf=1;var f=(Sc||(Sc=1,ph.exports=function(d,b){var S,B,D,K,W,te,re,Ae;for(B=d.length-(S=3&d.length),D=b,W=3432918353,te=461845907,Ae=0;Ae<B;)re=255&d.charCodeAt(Ae)|(255&d.charCodeAt(++Ae))<<8|(255&d.charCodeAt(++Ae))<<16|(255&d.charCodeAt(++Ae))<<24,++Ae,D=27492+(65535&(K=5*(65535&(D=(D^=re=(65535&(re=(re=(65535&re)*W+(((re>>>16)*W&65535)<<16)&4294967295)<<15|re>>>17))*te+(((re>>>16)*te&65535)<<16)&4294967295)<<13|D>>>19))+((5*(D>>>16)&65535)<<16)&4294967295))+((58964+(K>>>16)&65535)<<16);switch(re=0,S){case 3:re^=(255&d.charCodeAt(Ae+2))<<16;case 2:re^=(255&d.charCodeAt(Ae+1))<<8;case 1:D^=re=(65535&(re=(re=(65535&(re^=255&d.charCodeAt(Ae)))*W+(((re>>>16)*W&65535)<<16)&4294967295)<<15|re>>>17))*te+(((re>>>16)*te&65535)<<16)&4294967295}return D^=d.length,D=2246822507*(65535&(D^=D>>>16))+((2246822507*(D>>>16)&65535)<<16)&4294967295,D=3266489909*(65535&(D^=D>>>13))+((3266489909*(D>>>16)&65535)<<16)&4294967295,(D^=D>>>16)>>>0}),ph.exports),u=(Qd||(Qd=1,Au.exports=function(d,b){for(var S,B=d.length,D=b^B,K=0;B>=4;)S=1540483477*(65535&(S=255&d.charCodeAt(K)|(255&d.charCodeAt(++K))<<8|(255&d.charCodeAt(++K))<<16|(255&d.charCodeAt(++K))<<24))+((1540483477*(S>>>16)&65535)<<16),D=1540483477*(65535&D)+((1540483477*(D>>>16)&65535)<<16)^(S=1540483477*(65535&(S^=S>>>24))+((1540483477*(S>>>16)&65535)<<16)),B-=4,++K;switch(B){case 3:D^=(255&d.charCodeAt(K+2))<<16;case 2:D^=(255&d.charCodeAt(K+1))<<8;case 1:D=1540483477*(65535&(D^=255&d.charCodeAt(K)))+((1540483477*(D>>>16)&65535)<<16)}return D=1540483477*(65535&(D^=D>>>13))+((1540483477*(D>>>16)&65535)<<16),(D^=D>>>15)>>>0}),Au.exports);return fh.exports=f,fh.exports.murmur3=f,fh.exports.murmur2=u,fh.exports})(),Ec=h(mh);class kA{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,d,b,S){this.ids.push(Co(u)),this.positions.push(d,b,S)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=Co(u);let b=0,S=this.ids.length-1;for(;b<S;){const D=b+S>>1;this.ids[D]>=d?S=D:b=D+1}const B=[];for(;this.ids[b]===d;)B.push({index:this.positions[3*b],start:this.positions[3*b+1],end:this.positions[3*b+2]}),b++;return B}static serialize(u,d){const b=new Float64Array(u.ids),S=new Uint32Array(u.positions);return Ko(b,S,0,b.length-1),d&&d.push(b.buffer,S.buffer),{ids:b,positions:S}}static deserialize(u){const d=new kA;return d.ids=u.ids,d.positions=u.positions,d.indexed=!0,d}}function Co(f){const u=+f;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:Ec(String(f))}function Ko(f,u,d,b){for(;d<b;){const S=f[d+b>>1];let B=d-1,D=b+1;for(;;){do B++;while(f[B]<S);do D--;while(f[D]>S);if(B>=D)break;ql(f,B,D),ql(u,3*B,3*D),ql(u,3*B+1,3*D+1),ql(u,3*B+2,3*D+2)}D-d<b-D?(Ko(f,u,d,D),d=D+1):(Ko(f,u,D+1,b),b=D)}}function ql(f,u,d){const b=f[u];f[u]=f[d],f[d]=b}Xn("FeaturePositionMap",kA);class ps{constructor(u,d){this.gl=u.gl,this.location=d}}class qd extends ps{constructor(u,d){super(u,d),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class gh extends ps{constructor(u,d){super(u,d),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class Lm extends ps{constructor(u,d){super(u,d),this.current=sr.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const i0=new Float32Array(16);function wp(f){return[fs(255*f.r,255*f.g),fs(255*f.b,255*f.a)]}class Yd{constructor(u,d,b){this.value=u,this.uniformNames=d.map((S=>`u_${S}`)),this.type=b}setUniform(u,d,b){u.set(b.constantOr(this.value))}getBinding(u,d,b){return this.type==="color"?new Lm(u,d):new qd(u,d)}}class tl{constructor(u,d){this.uniformNames=d.map((b=>`u_${b}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=u.tlbr}setConstantDashPositions(u,d){this.dashTo=[0,u.y,u.height,u.width],this.dashFrom=[0,d.y,d.height,d.width]}setUniform(u,d,b,S){let B=null;S==="u_pattern_to"?B=this.patternTo:S==="u_pattern_from"?B=this.patternFrom:S==="u_dasharray_to"?B=this.dashTo:S==="u_dasharray_from"?B=this.dashFrom:S==="u_pixel_ratio_to"?B=this.pixelRatioTo:S==="u_pixel_ratio_from"&&(B=this.pixelRatioFrom),B!==null&&u.set(B)}getBinding(u,d,b){return b.substr(0,9)==="u_pattern"||b.substr(0,12)==="u_dasharray_"?new gh(u,d):new qd(u,d)}}class Du{constructor(u,d,b,S){this.expression=u,this.type=b,this.maxValue=0,this.paintVertexAttributes=d.map((B=>({name:`a_${B}`,type:"Float32",components:b==="color"?2:1,offset:0}))),this.paintVertexArray=new S}populatePaintArray(u,d,b){const S=this.paintVertexArray.length,B=this.expression.evaluate(new Qr(0,b),d,{},b.canonical,[],b.formattedSection);this.paintVertexArray.resize(u),this._setPaintValue(S,u,B)}updatePaintArray(u,d,b,S,B){const D=this.expression.evaluate(new Qr(0,B),b,S);this._setPaintValue(u,d,D)}_setPaintValue(u,d,b){if(this.type==="color"){const S=wp(b);for(let B=u;B<d;B++)this.paintVertexArray.emplace(B,S[0],S[1])}else{for(let S=u;S<d;S++)this.paintVertexArray.emplace(S,b);this.maxValue=Math.max(this.maxValue,Math.abs(b))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Oc{constructor(u,d,b,S,B,D){this.expression=u,this.uniformNames=d.map((K=>`u_${K}_t`)),this.type=b,this.useIntegerZoom=S,this.zoom=B,this.maxValue=0,this.paintVertexAttributes=d.map((K=>({name:`a_${K}`,type:"Float32",components:b==="color"?4:2,offset:0}))),this.paintVertexArray=new D}populatePaintArray(u,d,b){const S=this.expression.evaluate(new Qr(this.zoom,b),d,{},b.canonical,[],b.formattedSection),B=this.expression.evaluate(new Qr(this.zoom+1,b),d,{},b.canonical,[],b.formattedSection),D=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(D,u,S,B)}updatePaintArray(u,d,b,S,B){const D=this.expression.evaluate(new Qr(this.zoom,B),b,S),K=this.expression.evaluate(new Qr(this.zoom+1,B),b,S);this._setPaintValue(u,d,D,K)}_setPaintValue(u,d,b,S){if(this.type==="color"){const B=wp(b),D=wp(S);for(let K=u;K<d;K++)this.paintVertexArray.emplace(K,B[0],B[1],D[0],D[1])}else{for(let B=u;B<d;B++)this.paintVertexArray.emplace(B,b,S);this.maxValue=Math.max(this.maxValue,Math.abs(b),Math.abs(S))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,d){const b=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,S=bt(this.expression.interpolationFactor(b,this.zoom,this.zoom+1),0,1);u.set(S)}getBinding(u,d,b){return new qd(u,d)}}class oA{constructor(u,d,b,S,B,D){this.expression=u,this.type=d,this.useIntegerZoom=b,this.zoom=S,this.layerId=D,this.zoomInPaintVertexArray=new B,this.zoomOutPaintVertexArray=new B}populatePaintArray(u,d,b){const S=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(S,u,this.getPositionIds(d),b)}updatePaintArray(u,d,b,S,B){this._setPaintValues(u,d,this.getPositionIds(b),B)}_setPaintValues(u,d,b,S){const B=this.getPositions(S);if(!B||!b)return;const D=B[b.min],K=B[b.mid],W=B[b.max];if(D&&K&&W)for(let te=u;te<d;te++)this.emplace(this.zoomInPaintVertexArray,te,K,D),this.emplace(this.zoomOutPaintVertexArray,te,K,W)}upload(u){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const d=this.getVertexAttributes();this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,d,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,d,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class yh extends oA{getPositions(u){return u.imagePositions}getPositionIds(u){return u.patterns&&u.patterns[this.layerId]}getVertexAttributes(){return sc.members}emplace(u,d,b,S){u.emplace(d,b.tlbr[0],b.tlbr[1],b.tlbr[2],b.tlbr[3],S.tlbr[0],S.tlbr[1],S.tlbr[2],S.tlbr[3],b.pixelRatio,S.pixelRatio)}}class Hh extends oA{getPositions(u){return u.dashPositions}getPositionIds(u){return u.dashes&&u.dashes[this.layerId]}getVertexAttributes(){return dh.members}emplace(u,d,b,S){u.emplace(d,0,b.y,b.height,b.width,0,S.y,S.height,S.width)}}class Zh{constructor(u,d,b){this.binders={},this._buffers=[];const S=[];for(const B in u.paint._values){if(!b(B))continue;const D=u.paint.get(B);if(!(D instanceof cu&&Xc(D.property.specification)))continue;const K=B1(B,u.type),W=D.value,te=D.property.specification.type,re=D.property.useIntegerZoom,Ae=D.property.specification["property-type"],Oe=Ae==="cross-faded"||Ae==="cross-faded-data-driven";if(W.kind==="constant")this.binders[B]=Oe?new tl(W.value,K):new Yd(W.value,K,te),S.push(`/u_${B}`);else if(W.kind==="source"||Oe){const Pe=$d(B,te,"source");this.binders[B]=Oe?B==="line-dasharray"?new Hh(W,te,re,d,Pe,u.id):new yh(W,te,re,d,Pe,u.id):new Du(W,K,te,Pe),S.push(`/a_${B}`)}else{const Pe=$d(B,te,"composite");this.binders[B]=new Oc(W,K,te,re,d,Pe),S.push(`/z_${B}`)}}this.cacheKey=S.sort().join("")}getMaxValue(u){const d=this.binders[u];return d instanceof Du||d instanceof Oc?d.maxValue:0}populatePaintArrays(u,d,b){for(const S in this.binders){const B=this.binders[S];(B instanceof Du||B instanceof Oc||B instanceof oA)&&B.populatePaintArray(u,d,b)}}setConstantPatternPositions(u,d){for(const b in this.binders){const S=this.binders[b];S instanceof tl&&S.setConstantPatternPositions(u,d)}}setConstantDashPositions(u,d){for(const b in this.binders){const S=this.binders[b];S instanceof tl&&S.setConstantDashPositions(u,d)}}updatePaintArrays(u,d,b,S,B){let D=!1;for(const K in u){const W=d.getPositions(K);for(const te of W){const re=b.feature(te.index);for(const Ae in this.binders){const Oe=this.binders[Ae];if((Oe instanceof Du||Oe instanceof Oc||Oe instanceof oA)&&Oe.expression.isStateDependent===!0){const Pe=S.paint.get(Ae);Oe.expression=Pe.value,Oe.updatePaintArray(te.start,te.end,re,u[K],B),D=!0}}}}return D}defines(){const u=[];for(const d in this.binders){const b=this.binders[d];(b instanceof Yd||b instanceof tl)&&u.push(...b.uniformNames.map((S=>`#define HAS_UNIFORM_${S}`)))}return u}getBinderAttributes(){const u=[];for(const d in this.binders){const b=this.binders[d];if(b instanceof Du||b instanceof Oc)for(let S=0;S<b.paintVertexAttributes.length;S++)u.push(b.paintVertexAttributes[S].name);else if(b instanceof oA){const S=b.getVertexAttributes();for(const B of S)u.push(B.name)}}return u}getBinderUniforms(){const u=[];for(const d in this.binders){const b=this.binders[d];if(b instanceof Yd||b instanceof tl||b instanceof Oc)for(const S of b.uniformNames)u.push(S)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,d){const b=[];for(const S in this.binders){const B=this.binders[S];if(B instanceof Yd||B instanceof tl||B instanceof Oc){for(const D of B.uniformNames)if(d[D]){const K=B.getBinding(u,d[D],D);b.push({name:D,property:S,binding:K})}}}return b}setUniforms(u,d,b,S){for(const{name:B,property:D,binding:K}of d)this.binders[D].setUniform(K,S,b.get(D),B)}updatePaintBuffers(u){this._buffers=[];for(const d in this.binders){const b=this.binders[d];if(u&&b instanceof oA){const S=u.fromScale===2?b.zoomInPaintVertexBuffer:b.zoomOutPaintVertexBuffer;S&&this._buffers.push(S)}else(b instanceof Du||b instanceof Oc)&&b.paintVertexBuffer&&this._buffers.push(b.paintVertexBuffer)}}upload(u){for(const d in this.binders){const b=this.binders[d];(b instanceof Du||b instanceof Oc||b instanceof oA)&&b.upload(u)}this.updatePaintBuffers()}destroy(){for(const u in this.binders){const d=this.binders[u];(d instanceof Du||d instanceof Oc||d instanceof oA)&&d.destroy()}}}class vh{constructor(u,d,b=()=>!0){this.programConfigurations={};for(const S of u)this.programConfigurations[S.id]=new Zh(S,d,b);this.needsUpload=!1,this._featureMap=new kA,this._bufferOffset=0}populatePaintArrays(u,d,b,S){for(const B in this.programConfigurations)this.programConfigurations[B].populatePaintArrays(u,d,S);d.id!==void 0&&this._featureMap.add(d.id,b,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,d,b,S){for(const B of b)this.needsUpload=this.programConfigurations[B.id].updatePaintArrays(u,this._featureMap,d,B,S)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function B1(f,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${u}-`,"").replace(/-/g,"_")]}function $d(f,u,d){const b={color:{source:qo,composite:Re},number:{source:Z,composite:qo}},S=(function(B){return{"line-pattern":{source:Qn,composite:Qn},"fill-pattern":{source:Qn,composite:Qn},"fill-extrusion-pattern":{source:Qn,composite:Qn},"line-dasharray":{source:Xi,composite:Xi}}[B]})(f);return S&&S[d]||b[u][d]}Xn("ConstantBinder",Yd),Xn("CrossFadedConstantBinder",tl),Xn("SourceExpressionBinder",Du),Xn("CrossFadedPatternBinder",yh),Xn("CrossFadedDasharrayBinder",Hh),Xn("CompositeExpressionBinder",Oc),Xn("ProgramConfiguration",Zh,{omit:["_buffers"]}),Xn("ProgramConfigurationSet",vh);const I1=Math.pow(2,14)-1,r0=-I1-1;function bh(f){const u=dt/f.extent,d=f.loadGeometry();for(let b=0;b<d.length;b++){const S=d[b];for(let B=0;B<S.length;B++){const D=S[B],K=Math.round(D.x*u),W=Math.round(D.y*u);D.x=bt(K,r0,I1),D.y=bt(W,r0,I1),(K<D.x||K>D.x+1||W<D.y||W>D.y+1)&&pt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function Xh(f,u){return{type:f.type,id:f.id,properties:f.properties,geometry:u?bh(f):[]}}const Fm=-32768;function oC(f,u,d,b,S){f.emplaceBack(Fm+8*u+b,Fm+8*d+S)}class o0{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasDependencies=!1,this.layoutVertexArray=new Nt,this.indexArray=new ya,this.segments=new Br,this.programConfigurations=new vh(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,b){const S=this.layers[0],B=[];let D=null,K=!1,W=S.type==="heatmap";if(S.type==="circle"){const re=S;D=re.layout.get("circle-sort-key"),K=!D.isConstant(),W=W||re.paint.get("circle-pitch-alignment")==="map"}const te=W?d.subdivisionGranularity.circle:1;for(const{feature:re,id:Ae,index:Oe,sourceLayerIndex:Pe}of u){const Le=this.layers[0]._featureFilter.needGeometry,We=Xh(re,Le);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),We,b))continue;const He=K?D.evaluate(We,{},b):void 0,at={id:Ae,properties:re.properties,type:re.type,sourceLayerIndex:Pe,index:Oe,geometry:Le?We.geometry:bh(re),patterns:{},sortKey:He};B.push(at)}K&&B.sort(((re,Ae)=>re.sortKey-Ae.sortKey));for(const re of B){const{geometry:Ae,index:Oe,sourceLayerIndex:Pe}=re,Le=u[Oe].feature;this.addFeature(re,Ae,Oe,b,te),d.featureIndex.insert(Le,Ae,Oe,Pe,this.index)}}update(u,d,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:b})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,so),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,d,b,S,B=1){let D;switch(B){case 1:D=[0,7];break;case 3:D=[0,2,5,7];break;case 5:D=[0,1,3,4,6,7];break;case 7:D=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${B}; valid values are 1, 3, 5, 7.`)}const K=D.length;for(const W of d)for(const te of W){const re=te.x,Ae=te.y;if(re<0||re>=dt||Ae<0||Ae>=dt)continue;const Oe=this.segments.prepareSegment(K*K,this.layoutVertexArray,this.indexArray,u.sortKey),Pe=Oe.vertexLength;for(let Le=0;Le<K;Le++)for(let We=0;We<K;We++)oC(this.layoutVertexArray,re,Ae,D[We],D[Le]);for(let Le=0;Le<K-1;Le++)for(let We=0;We<K-1;We++){const He=Pe+Le*K+We,at=Pe+(Le+1)*K+We;this.indexArray.emplaceBack(He,at+1,He+1),this.indexArray.emplaceBack(He,at,at+1)}Oe.vertexLength+=K*K,Oe.primitiveLength+=(K-1)*(K-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,{imagePositions:{},canonical:S})}}function Pu(f,u){for(let d=0;d<f.length;d++)if(Lf(u,f[d]))return!0;for(let d=0;d<u.length;d++)if(Lf(f,u[d]))return!0;return!!Sp(f,u)}function zm(f,u,d){return!!Lf(f,u)||!!s0(u,f,d)}function k1(f,u){if(f.length===1)return a0(u,f[0]);for(let d=0;d<u.length;d++){const b=u[d];for(let S=0;S<b.length;S++)if(Lf(f,b[S]))return!0}for(let d=0;d<f.length;d++)if(a0(u,f[d]))return!0;for(let d=0;d<u.length;d++)if(Sp(f,u[d]))return!0;return!1}function sC(f,u,d){if(f.length>1){if(Sp(f,u))return!0;for(let b=0;b<u.length;b++)if(s0(u[b],f,d))return!0}for(let b=0;b<f.length;b++)if(s0(f[b],u,d))return!0;return!1}function Sp(f,u){if(f.length===0||u.length===0)return!1;for(let d=0;d<f.length-1;d++){const b=f[d],S=f[d+1];for(let B=0;B<u.length-1;B++)if(aC(b,S,u[B],u[B+1]))return!0}return!1}function aC(f,u,d,b){return Dt(f,d,b)!==Dt(u,d,b)&&Dt(f,u,d)!==Dt(f,u,b)}function s0(f,u,d){const b=d*d;if(u.length===1)return f.distSqr(u[0])<b;for(let S=1;S<u.length;S++)if(Ch(f,u[S-1],u[S])<b)return!0;return!1}function Ch(f,u,d){const b=u.distSqr(d);if(b===0)return f.distSqr(u);const S=((f.x-u.x)*(d.x-u.x)+(f.y-u.y)*(d.y-u.y))/b;return f.distSqr(S<0?u:S>1?d:d.sub(u)._mult(S)._add(u))}function a0(f,u){let d,b,S,B=!1;for(let D=0;D<f.length;D++){d=f[D];for(let K=0,W=d.length-1;K<d.length;W=K++)b=d[K],S=d[W],b.y>u.y!=S.y>u.y&&u.x<(S.x-b.x)*(u.y-b.y)/(S.y-b.y)+b.x&&(B=!B)}return B}function Lf(f,u){let d=!1;for(let b=0,S=f.length-1;b<f.length;S=b++){const B=f[b],D=f[S];B.y>u.y!=D.y>u.y&&u.x<(D.x-B.x)*(u.y-B.y)/(D.y-B.y)+B.x&&(d=!d)}return d}function l0(f,u,d){const b=d[0],S=d[2];if(f.x<b.x&&u.x<b.x||f.x>S.x&&u.x>S.x||f.y<b.y&&u.y<b.y||f.y>S.y&&u.y>S.y)return!1;const B=Dt(f,u,d[0]);return B!==Dt(f,u,d[1])||B!==Dt(f,u,d[2])||B!==Dt(f,u,d[3])}function Os(f,u,d){const b=u.paint.get(f).value;return b.kind==="constant"?b.value:d.programConfigurations.get(u.id).getMaxValue(f)}function ra(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function Ji(f,u,d,b,S){if(!u[0]&&!u[1])return f;const B=c.convert(u)._mult(S);d==="viewport"&&B._rotate(-b);const D=[];for(let K=0;K<f.length;K++)D.push(f[K].sub(B));return D}function u0({queryGeometry:f,size:u},d){return zm(f,d,u)}function T1({queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:S},B){return zm(f,B,u*(d.projectTileCoordinates(B.x,B.y,b,S).signedDistanceFromCamera/d.cameraToCenterDistance))}function Ff({queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:S},B){const D=d.projectTileCoordinates(B.x,B.y,b,S).signedDistanceFromCamera,K=u*(d.cameraToCenterDistance/D);return zm(f,Ep(B,d,b,S),K)}function c0({queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:S},B){return zm(f,Ep(B,d,b,S),u)}function A0({queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:S,pitchAlignment:B="map",pitchScale:D="map"},K){const W=B==="map"?D==="map"?u0:T1:D==="map"?Ff:c0,te={queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:S};for(const re of K)for(const Ae of re)if(W(te,Ae))return!0;return!1}function Ep(f,u,d,b){const S=u.projectTileCoordinates(f.x,f.y,d,b).point;return new c((.5*S.x+.5)*u.width,(.5*-S.y+.5)*u.height)}let Yl,lC;Xn("CircleBucket",o0,{omit:["layers"]});var R1={get paint(){return lC=lC||new za({"circle-radius":new fi(st.paint_circle["circle-radius"]),"circle-color":new fi(st.paint_circle["circle-color"]),"circle-blur":new fi(st.paint_circle["circle-blur"]),"circle-opacity":new fi(st.paint_circle["circle-opacity"]),"circle-translate":new ci(st.paint_circle["circle-translate"]),"circle-translate-anchor":new ci(st.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ci(st.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ci(st.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new fi(st.paint_circle["circle-stroke-width"]),"circle-stroke-color":new fi(st.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new fi(st.paint_circle["circle-stroke-opacity"])})},get layout(){return Yl=Yl||new za({"circle-sort-key":new fi(st.layout_circle["circle-sort-key"])})}};class D1 extends ua{constructor(u,d){super(u,R1,d)}createBucket(u){return new o0(u)}queryRadius(u){const d=u;return Os("circle-radius",this,d)+Os("circle-stroke-width",this,d)+ra(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:b,geometry:S,transform:B,pixelsToTileUnits:D,unwrappedTileID:K,getElevation:W}){const te=Ji(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-B.bearingInRadians,D),re=this.paint.get("circle-radius").evaluate(d,b)+this.paint.get("circle-stroke-width").evaluate(d,b),Ae=this.paint.get("circle-pitch-scale"),Oe=this.paint.get("circle-pitch-alignment");let Pe,Le;return Oe==="map"?(Pe=te,Le=re*D):(Pe=(function(We,He,at,Rt){return We.map((ft=>Ep(ft,He,at,Rt)))})(te,B,K,W),Le=re),A0({queryGeometry:Pe,size:Le,transform:B,unwrappedTileID:K,getElevation:W,pitchAlignment:Oe,pitchScale:Ae},S)}}class mv extends o0{}let P1;Xn("HeatmapBucket",mv,{omit:["layers"]});var uC={get paint(){return P1=P1||new za({"heatmap-radius":new fi(st.paint_heatmap["heatmap-radius"]),"heatmap-weight":new fi(st.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ci(st.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Fa(st.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ci(st.paint_heatmap["heatmap-opacity"])})}};function h0(f,{width:u,height:d},b,S){if(S){if(S instanceof Uint8ClampedArray)S=new Uint8Array(S.buffer);else if(S.length!==u*d*b)throw new RangeError(`mismatched image size. expected: ${S.length} but got: ${u*d*b}`)}else S=new Uint8Array(u*d*b);return f.width=u,f.height=d,f.data=S,f}function U1(f,{width:u,height:d},b){if(u===f.width&&d===f.height)return;const S=h0({},{width:u,height:d},b);sA(f,S,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,u),height:Math.min(f.height,d)},b),f.width=u,f.height=d,f.data=S.data}function sA(f,u,d,b,S,B){if(S.width===0||S.height===0)return u;if(S.width>f.width||S.height>f.height||d.x>f.width-S.width||d.y>f.height-S.height)throw new RangeError("out of range source coordinates for image copy");if(S.width>u.width||S.height>u.height||b.x>u.width-S.width||b.y>u.height-S.height)throw new RangeError("out of range destination coordinates for image copy");const D=f.data,K=u.data;if(D===K)throw new Error("srcData equals dstData, so image is already copied");for(let W=0;W<S.height;W++){const te=((d.y+W)*f.width+d.x)*B,re=((b.y+W)*u.width+b.x)*B;for(let Ae=0;Ae<S.width*B;Ae++)K[re+Ae]=D[te+Ae]}return u}class gl{constructor(u,d){h0(this,u,1,d)}resize(u){U1(this,u,1)}clone(){return new gl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,d,b,S,B){sA(u,d,b,S,B,1)}}class Il{constructor(u,d){h0(this,u,4,d)}resize(u){U1(this,u,4)}replace(u,d){d?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new Il({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,d,b,S,B){sA(u,d,b,S,B,4)}setPixel(u,d,b){const S=4*(u*this.width+d);this.data[S+0]=Math.round(255*b.r/b.a),this.data[S+1]=Math.round(255*b.g/b.a),this.data[S+2]=Math.round(255*b.b/b.a),this.data[S+3]=Math.round(255*b.a)}}function d0(f){const u={},d=f.resolution||256,b=f.clips?f.clips.length:1,S=f.image||new Il({width:d,height:b});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const B=(D,K,W)=>{u[f.evaluationKey]=W;const te=f.expression.evaluate(u);S.setPixel(D/4/d,K/4,te)};if(f.clips)for(let D=0,K=0;D<b;++D,K+=4*d)for(let W=0,te=0;W<d;W++,te+=4){const re=W/(d-1),{start:Ae,end:Oe}=f.clips[D];B(K,te,Ae*(1-re)+Oe*re)}else for(let D=0,K=0;D<d;D++,K+=4)B(0,K,D/(d-1));return S}Xn("AlphaImage",gl),Xn("RGBAImage",Il);const Op="big-fb";class cC extends ua{createBucket(u){return new mv(u)}constructor(u,d){super(u,uC,d),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=d0({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Op)&&this.heatmapFbos.delete(Op)}queryRadius(u){return Os("heatmap-radius",this,u)}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:b,geometry:S,transform:B,pixelsToTileUnits:D,unwrappedTileID:K,getElevation:W}){return A0({queryGeometry:u,size:this.paint.get("heatmap-radius").evaluate(d,b)*D,transform:B,unwrappedTileID:K,getElevation:W},S)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let K1;var jm={get paint(){return K1=K1||new za({"hillshade-illumination-direction":new ci(st.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new ci(st.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new ci(st.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ci(st.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ci(st.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ci(st.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ci(st.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new ci(st.paint_hillshade["hillshade-method"])})}};class Jh extends ua{constructor(u,d){super(u,jm,d),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let u=this.paint.get("hillshade-illumination-direction").values,d=this.paint.get("hillshade-illumination-altitude").values,b=this.paint.get("hillshade-highlight-color").values,S=this.paint.get("hillshade-shadow-color").values;const B=Math.max(u.length,d.length,b.length,S.length);u=u.concat(Array(B-u.length).fill(u.at(-1))),d=d.concat(Array(B-d.length).fill(d.at(-1))),b=b.concat(Array(B-b.length).fill(b.at(-1))),S=S.concat(Array(B-S.length).fill(S.at(-1)));const D=d.map(Yn);return{directionRadians:u.map(Yn),altitudeRadians:D,shadowColor:S,highlightColor:b}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let f0;var Zx={get paint(){return f0=f0||new za({"color-relief-opacity":new ci(st["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Fa(st["paint_color-relief"]["color-relief-color"])})}};class L1{constructor(u,d,b,S){this.context=u,this.format=b,this.texture=u.gl.createTexture(),this.update(d,S)}update(u,d,b){const{width:S,height:B}=u,D=!(this.size&&this.size[0]===S&&this.size[1]===B||b),{context:K}=this,{gl:W}=K;if(this.useMipmap=!!(d&&d.useMipmap),W.bindTexture(W.TEXTURE_2D,this.texture),K.pixelStoreUnpackFlipY.set(!1),K.pixelStoreUnpack.set(1),K.pixelStoreUnpackPremultiplyAlpha.set(this.format===W.RGBA&&(!d||d.premultiply!==!1)),D)this.size=[S,B],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||Tn(u)?W.texImage2D(W.TEXTURE_2D,0,this.format,this.format,W.UNSIGNED_BYTE,u):W.texImage2D(W.TEXTURE_2D,0,this.format,S,B,0,this.format,W.UNSIGNED_BYTE,u.data);else{const{x:te,y:re}=b||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||Tn(u)?W.texSubImage2D(W.TEXTURE_2D,0,te,re,W.RGBA,W.UNSIGNED_BYTE,u):W.texSubImage2D(W.TEXTURE_2D,0,te,re,S,B,W.RGBA,W.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&W.generateMipmap(W.TEXTURE_2D),K.pixelStoreUnpackFlipY.setDefault(),K.pixelStoreUnpack.setDefault(),K.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(u,d,b){const{context:S}=this,{gl:B}=S;B.bindTexture(B.TEXTURE_2D,this.texture),b!==B.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(b=B.LINEAR),u!==this.filter&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,u),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,b||u),this.filter=u),d!==this.wrap&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,d),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}class ed{constructor(u,d,b,S=1,B=1,D=1,K=0){if(this.uid=u,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(b&&!["mapbox","terrarium","custom"].includes(b))return void pt(`"${b}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=d.height;const W=this.dim=d.height-2;switch(this.data=new Uint32Array(d.data.buffer),b){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=S,this.greenFactor=B,this.blueFactor=D,this.baseShift=K;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let te=0;te<W;te++)this.data[this._idx(-1,te)]=this.data[this._idx(0,te)],this.data[this._idx(W,te)]=this.data[this._idx(W-1,te)],this.data[this._idx(te,-1)]=this.data[this._idx(te,0)],this.data[this._idx(te,W)]=this.data[this._idx(te,W-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(W,-1)]=this.data[this._idx(W-1,0)],this.data[this._idx(-1,W)]=this.data[this._idx(0,W-1)],this.data[this._idx(W,W)]=this.data[this._idx(W-1,W-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let te=0;te<W;te++)for(let re=0;re<W;re++){const Ae=this.get(te,re);Ae>this.max&&(this.max=Ae),Ae<this.min&&(this.min=Ae)}}get(u,d){const b=new Uint8Array(this.data.buffer),S=4*this._idx(u,d);return this.unpack(b[S],b[S+1],b[S+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(u,d){if(u<-1||u>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(u+1)}unpack(u,d,b){return u*this.redFactor+d*this.greenFactor+b*this.blueFactor-this.baseShift}pack(u){return F1(u,this.getUnpackVector())}getPixels(){return new Il({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,d,b){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let S=d*this.dim,B=d*this.dim+this.dim,D=b*this.dim,K=b*this.dim+this.dim;switch(d){case-1:S=B-1;break;case 1:B=S+1}switch(b){case-1:D=K-1;break;case 1:K=D+1}const W=-d*this.dim,te=-b*this.dim;for(let re=D;re<K;re++)for(let Ae=S;Ae<B;Ae++)this.data[this._idx(Ae,re)]=u.data[this._idx(Ae+W,re+te)]}}function F1(f,u){const d=u[0],b=u[1],S=u[2],B=u[3],D=Math.min(d,b,S),K=Math.round((f+B)/D);return{r:Math.floor(K*D/d)%256,g:Math.floor(K*D/b)%256,b:Math.floor(K*D/S)%256}}Xn("DEMData",ed);class gv extends ua{constructor(u,d){super(u,Zx,d)}_createColorRamp(u){const d={elevationStops:[],colorStops:[]},b=this._transitionablePaint._values["color-relief-color"].value.expression;if(b instanceof kf&&b._styleExpression.expression instanceof Xo){this.colorRampExpression=b;const D=b._styleExpression.expression;d.elevationStops=D.labels,d.colorStops=[];for(const K of d.elevationStops)d.colorStops.push(D.evaluate({globals:{elevation:K}}))}if(d.elevationStops.length<1&&(d.elevationStops=[0],d.colorStops=[sr.transparent]),d.elevationStops.length<2&&(d.elevationStops.push(d.elevationStops[0]+1),d.colorStops.push(d.colorStops[0])),d.elevationStops.length<=u)return d;const S={elevationStops:[],colorStops:[]},B=(d.elevationStops.length-1)/(u-1);for(let D=0;D<d.elevationStops.length-.5;D+=B)S.elevationStops.push(d.elevationStops[Math.round(D)]),S.colorStops.push(d.colorStops[Math.round(D)]);return pt(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),S}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(u,d,b){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const S=this._createColorRamp(d),B=new Il({width:S.colorStops.length,height:1}),D=new Il({width:S.colorStops.length,height:1});for(let K=0;K<S.elevationStops.length;K++){const W=F1(S.elevationStops[K],b);D.setPixel(0,K,new sr(W.r/255,W.g/255,W.b/255,1)),B.setPixel(0,K,S.colorStops[K])}return this.colorRampTextures={elevationTexture:new L1(u,D,u.gl.RGBA),colorTexture:new L1(u,B,u.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const p0=bo([{name:"a_pos",components:2,type:"Int16"}],4),{members:m0}=p0;function as(f,u,d){const b=d.patternDependencies;let S=!1;for(const B of u){const D=B.paint.get(`${f}-pattern`);D.isConstant()||(S=!0);const K=D.constantOr(null);K&&(S=!0,b[K.to]=!0,b[K.from]=!0)}return S}function z1(f,u,d,b,S){const{zoom:B}=b,D=S.patternDependencies;for(const K of u){const W=K.paint.get(`${f}-pattern`).value;if(W.kind!=="constant"){let te=W.evaluate({zoom:B-1},d,{},S.availableImages),re=W.evaluate({zoom:B},d,{},S.availableImages),Ae=W.evaluate({zoom:B+1},d,{},S.availableImages);te=te&&te.name?te.name:te,re=re&&re.name?re.name:re,Ae=Ae&&Ae.name?Ae.name:Ae,D[te]=!0,D[re]=!0,D[Ae]=!0,d.patterns[K.id]={min:te,mid:re,max:Ae}}}return d}function Nm(f,u,d,b,S){let B;if(S===(function(D,K,W,te){let re=0;for(let Ae=K,Oe=W-te;Ae<W;Ae+=te)re+=(D[Oe]-D[Ae])*(D[Ae+1]+D[Oe+1]),Oe=Ae;return re})(f,u,d,b)>0)for(let D=u;D<d;D+=b)B=q1(D/b|0,f[D],f[D+1],B);else for(let D=d-b;D>=u;D-=b)B=q1(D/b|0,f[D],f[D+1],B);return B&&oa(B,B.next)&&(ms(B),B=B.next),B}function td(f,u){if(!f)return f;u||(u=f);let d,b=f;do if(d=!1,b.steiner||!oa(b,b.next)&&es(b.prev,b,b.next)!==0)b=b.next;else{if(ms(b),b=u=b.prev,b===b.next)break;d=!0}while(d||b!==u);return u}function nd(f,u,d,b,S,B,D){if(!f)return;!D&&B&&(function(W,te,re,Ae){let Oe=W;do Oe.z===0&&(Oe.z=N1(Oe.x,Oe.y,te,re,Ae)),Oe.prevZ=Oe.prev,Oe.nextZ=Oe.next,Oe=Oe.next;while(Oe!==W);Oe.prevZ.nextZ=null,Oe.prevZ=null,(function(Pe){let Le,We=1;do{let He,at=Pe;Pe=null;let Rt=null;for(Le=0;at;){Le++;let ft=at,Ct=0;for(let en=0;en<We&&(Ct++,ft=ft.nextZ,ft);en++);let zt=We;for(;Ct>0||zt>0&&ft;)Ct!==0&&(zt===0||!ft||at.z<=ft.z)?(He=at,at=at.nextZ,Ct--):(He=ft,ft=ft.nextZ,zt--),Rt?Rt.nextZ=He:Pe=He,He.prevZ=Rt,Rt=He;at=ft}Rt.nextZ=null,We*=2}while(Le>1)})(Oe)})(f,b,S,B);let K=f;for(;f.prev!==f.next;){const W=f.prev,te=f.next;if(B?g0(f,b,S,B):Vd(f))u.push(W.i,f.i,te.i),ms(f),f=te.next,K=te.next;else if((f=te)===K){D?D===1?nd(f=yv(td(f),u),u,d,b,S,B,2):D===2&&Bc(f,u,d,b,S,B):nd(td(f),u,d,b,S,B,1);break}}}function Vd(f){const u=f.prev,d=f,b=f.next;if(es(u,d,b)>=0)return!1;const S=u.x,B=d.x,D=b.x,K=u.y,W=d.y,te=b.y,re=Math.min(S,B,D),Ae=Math.min(K,W,te),Oe=Math.max(S,B,D),Pe=Math.max(K,W,te);let Le=b.next;for(;Le!==u;){if(Le.x>=re&&Le.x<=Oe&&Le.y>=Ae&&Le.y<=Pe&&zf(S,K,B,W,D,te,Le.x,Le.y)&&es(Le.prev,Le,Le.next)>=0)return!1;Le=Le.next}return!0}function g0(f,u,d,b){const S=f.prev,B=f,D=f.next;if(es(S,B,D)>=0)return!1;const K=S.x,W=B.x,te=D.x,re=S.y,Ae=B.y,Oe=D.y,Pe=Math.min(K,W,te),Le=Math.min(re,Ae,Oe),We=Math.max(K,W,te),He=Math.max(re,Ae,Oe),at=N1(Pe,Le,u,d,b),Rt=N1(We,He,u,d,b);let ft=f.prevZ,Ct=f.nextZ;for(;ft&&ft.z>=at&&Ct&&Ct.z<=Rt;){if(ft.x>=Pe&&ft.x<=We&&ft.y>=Le&&ft.y<=He&&ft!==S&&ft!==D&&zf(K,re,W,Ae,te,Oe,ft.x,ft.y)&&es(ft.prev,ft,ft.next)>=0||(ft=ft.prevZ,Ct.x>=Pe&&Ct.x<=We&&Ct.y>=Le&&Ct.y<=He&&Ct!==S&&Ct!==D&&zf(K,re,W,Ae,te,Oe,Ct.x,Ct.y)&&es(Ct.prev,Ct,Ct.next)>=0))return!1;Ct=Ct.nextZ}for(;ft&&ft.z>=at;){if(ft.x>=Pe&&ft.x<=We&&ft.y>=Le&&ft.y<=He&&ft!==S&&ft!==D&&zf(K,re,W,Ae,te,Oe,ft.x,ft.y)&&es(ft.prev,ft,ft.next)>=0)return!1;ft=ft.prevZ}for(;Ct&&Ct.z<=Rt;){if(Ct.x>=Pe&&Ct.x<=We&&Ct.y>=Le&&Ct.y<=He&&Ct!==S&&Ct!==D&&zf(K,re,W,Ae,te,Oe,Ct.x,Ct.y)&&es(Ct.prev,Ct,Ct.next)>=0)return!1;Ct=Ct.nextZ}return!0}function yv(f,u){let d=f;do{const b=d.prev,S=d.next.next;!oa(b,S)&&W1(b,d,d.next,S)&&v0(b,S)&&v0(S,b)&&(u.push(b.i,d.i,S.i),ms(d),ms(d.next),d=f=S),d=d.next}while(d!==f);return td(d)}function Bc(f,u,d,b,S,B){let D=f;do{let K=D.next.next;for(;K!==D.prev;){if(D.i!==K.i&&hC(D,K)){let W=Q1(D,K);return D=td(D,D.next),W=td(W,W.next),nd(D,u,d,b,S,B,0),void nd(W,u,d,b,S,B,0)}K=K.next}D=D.next}while(D!==f)}function Uu(f,u){let d=f.x-u.x;return d===0&&(d=f.y-u.y,d===0)&&(d=(f.next.y-f.y)/(f.next.x-f.x)-(u.next.y-u.y)/(u.next.x-u.x)),d}function AC(f,u){const d=(function(S,B){let D=B;const K=S.x,W=S.y;let te,re=-1/0;if(oa(S,D))return D;do{if(oa(S,D.next))return D.next;if(W<=D.y&&W>=D.next.y&&D.next.y!==D.y){const We=D.x+(W-D.y)*(D.next.x-D.x)/(D.next.y-D.y);if(We<=K&&We>re&&(re=We,te=D.x<D.next.x?D:D.next,We===K))return te}D=D.next}while(D!==B);if(!te)return null;const Ae=te,Oe=te.x,Pe=te.y;let Le=1/0;D=te;do{if(K>=D.x&&D.x>=Oe&&K!==D.x&&G1(W<Pe?K:re,W,Oe,Pe,W<Pe?re:K,W,D.x,D.y)){const We=Math.abs(W-D.y)/(K-D.x);v0(D,S)&&(We<Le||We===Le&&(D.x>te.x||D.x===te.x&&j1(te,D)))&&(te=D,Le=We)}D=D.next}while(D!==Ae);return te})(f,u);if(!d)return u;const b=Q1(d,f);return td(b,b.next),td(d,d.next)}function j1(f,u){return es(f.prev,f,u.prev)<0&&es(u.next,f,f.next)<0}function N1(f,u,d,b,S){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-d)*S|0)|f<<8))|f<<4))|f<<2))|f<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-b)*S|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function vv(f){let u=f,d=f;do(u.x<d.x||u.x===d.x&&u.y<d.y)&&(d=u),u=u.next;while(u!==f);return d}function G1(f,u,d,b,S,B,D,K){return(S-D)*(u-K)>=(f-D)*(B-K)&&(f-D)*(b-K)>=(d-D)*(u-K)&&(d-D)*(B-K)>=(S-D)*(b-K)}function zf(f,u,d,b,S,B,D,K){return!(f===D&&u===K)&&G1(f,u,d,b,S,B,D,K)}function hC(f,u){return f.next.i!==u.i&&f.prev.i!==u.i&&!(function(d,b){let S=d;do{if(S.i!==d.i&&S.next.i!==d.i&&S.i!==b.i&&S.next.i!==b.i&&W1(S,S.next,d,b))return!0;S=S.next}while(S!==d);return!1})(f,u)&&(v0(f,u)&&v0(u,f)&&(function(d,b){let S=d,B=!1;const D=(d.x+b.x)/2,K=(d.y+b.y)/2;do S.y>K!=S.next.y>K&&S.next.y!==S.y&&D<(S.next.x-S.x)*(K-S.y)/(S.next.y-S.y)+S.x&&(B=!B),S=S.next;while(S!==d);return B})(f,u)&&(es(f.prev,f,u.prev)||es(f,u.prev,u))||oa(f,u)&&es(f.prev,f,f.next)>0&&es(u.prev,u,u.next)>0)}function es(f,u,d){return(u.y-f.y)*(d.x-u.x)-(u.x-f.x)*(d.y-u.y)}function oa(f,u){return f.x===u.x&&f.y===u.y}function W1(f,u,d,b){const S=nl(es(f,u,d)),B=nl(es(f,u,b)),D=nl(es(d,b,f)),K=nl(es(d,b,u));return S!==B&&D!==K||!(S!==0||!y0(f,d,u))||!(B!==0||!y0(f,b,u))||!(D!==0||!y0(d,f,b))||!(K!==0||!y0(d,u,b))}function y0(f,u,d){return u.x<=Math.max(f.x,d.x)&&u.x>=Math.min(f.x,d.x)&&u.y<=Math.max(f.y,d.y)&&u.y>=Math.min(f.y,d.y)}function nl(f){return f>0?1:f<0?-1:0}function v0(f,u){return es(f.prev,f,f.next)<0?es(f,u,f.next)>=0&&es(f,f.prev,u)>=0:es(f,u,f.prev)<0||es(f,f.next,u)<0}function Q1(f,u){const d=Ku(f.i,f.x,f.y),b=Ku(u.i,u.x,u.y),S=f.next,B=u.prev;return f.next=u,u.prev=f,d.next=S,S.prev=d,b.next=d,d.prev=b,B.next=b,b.prev=B,b}function q1(f,u,d,b){const S=Ku(f,u,d);return b?(S.next=b.next,S.prev=b,b.next.prev=S,b.next=S):(S.prev=S,S.next=S),S}function ms(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function Ku(f,u,d){return{i:f,x:u,y:d,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Ic{constructor(u,d){if(d>u)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=u,this._minGranularity=d}getGranularityForZoomLevel(u){return Math.max(Math.floor(this._baseZoomGranularity/(1<<u)),this._minGranularity,1)}}class b0{constructor(u){this.fill=u.fill,this.line=u.line,this.tile=u.tile,this.stencil=u.stencil,this.circle=u.circle}}b0.noSubdivision=new b0({fill:new Ic(0,0),line:new Ic(0,0),tile:new Ic(0,0),stencil:new Ic(0,0),circle:1}),Xn("SubdivisionGranularityExpression",Ic),Xn("SubdivisionGranularitySetting",b0);const jf=-32768,Gm=32767;class Xx{constructor(u,d){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=u,this._granularityCellSize=dt/u,this._canonical=d}_getKey(u,d){return(u+=32768)<<16|d+32768}_vertexToIndex(u,d){if(u<-32768||d<-32768||u>32767||d>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const b=0|Math.round(u),S=0|Math.round(d),B=this._getKey(b,S);if(this._vertexDictionary.has(B))return this._vertexDictionary.get(B);const D=this._vertexBuffer.length/2;return this._vertexDictionary.set(B,D),this._vertexBuffer.push(b,S),D}_subdivideTrianglesScanline(u){if(this._granularity<2)return(function(S,B){const D=[];for(let K=0;K<B.length;K+=3){const W=B[K],te=B[K+1],re=B[K+2],Ae=S[2*W],Oe=S[2*W+1];(S[2*te]-Ae)*(S[2*re+1]-Oe)-(S[2*te+1]-Oe)*(S[2*re]-Ae)>0?(D.push(W),D.push(re),D.push(te)):(D.push(W),D.push(te),D.push(re))}return D})(this._vertexBuffer,u);const d=[],b=u.length;for(let S=0;S<b;S+=3){const B=[u[S+0],u[S+1],u[S+2]],D=[this._vertexBuffer[2*u[S+0]+0],this._vertexBuffer[2*u[S+0]+1],this._vertexBuffer[2*u[S+1]+0],this._vertexBuffer[2*u[S+1]+1],this._vertexBuffer[2*u[S+2]+0],this._vertexBuffer[2*u[S+2]+1]];let K=1/0,W=1/0,te=-1/0,re=-1/0;for(let We=0;We<3;We++){const He=D[2*We],at=D[2*We+1];K=Math.min(K,He),te=Math.max(te,He),W=Math.min(W,at),re=Math.max(re,at)}if(K===te||W===re)continue;const Ae=Math.floor(K/this._granularityCellSize),Oe=Math.ceil(te/this._granularityCellSize),Pe=Math.floor(W/this._granularityCellSize),Le=Math.ceil(re/this._granularityCellSize);if(Ae!==Oe||Pe!==Le)for(let We=Pe;We<Le;We++){const He=this._scanlineGenerateVertexRingForCellRow(We,D,B);_h(this._vertexBuffer,He,d)}else d.push(...B)}return d}_scanlineGenerateVertexRingForCellRow(u,d,b){const S=u*this._granularityCellSize,B=S+this._granularityCellSize,D=[];for(let K=0;K<3;K++){const W=d[2*K],te=d[2*K+1],re=d[2*(K+1)%6],Ae=d[(2*(K+1)+1)%6],Oe=d[2*(K+2)%6],Pe=d[(2*(K+2)+1)%6],Le=re-W,We=Ae-te,He=Le===0,at=We===0,Rt=(S-te)/We,ft=(B-te)/We,Ct=Math.min(Rt,ft),zt=Math.max(Rt,ft);if(!at&&(Ct>=1||zt<=0)||at&&(te<S||te>B)){Ae>=S&&Ae<=B&&D.push(b[(K+1)%3]);continue}!at&&Ct>0&&D.push(this._vertexToIndex(W+Le*Ct,te+We*Ct));const en=W+Le*Math.max(Ct,0),An=W+Le*Math.min(zt,1);He||this._generateIntraEdgeVertices(D,W,te,re,Ae,en,An),!at&&zt<1&&D.push(this._vertexToIndex(W+Le*zt,te+We*zt)),(at||Ae>=S&&Ae<=B)&&D.push(b[(K+1)%3]),!at&&(Ae<=S||Ae>=B)&&this._generateInterEdgeVertices(D,W,te,re,Ae,Oe,Pe,An,S,B)}return D}_generateIntraEdgeVertices(u,d,b,S,B,D,K){const W=S-d,te=B-b,re=te===0,Ae=re?Math.min(d,S):Math.min(D,K),Oe=re?Math.max(d,S):Math.max(D,K),Pe=Math.floor(Ae/this._granularityCellSize)+1,Le=Math.ceil(Oe/this._granularityCellSize)-1;if(re?d<S:D<K)for(let We=Pe;We<=Le;We++){const He=We*this._granularityCellSize;u.push(this._vertexToIndex(He,b+te*(He-d)/W))}else for(let We=Le;We>=Pe;We--){const He=We*this._granularityCellSize;u.push(this._vertexToIndex(He,b+te*(He-d)/W))}}_generateInterEdgeVertices(u,d,b,S,B,D,K,W,te,re){const Ae=B-b,Oe=D-S,Pe=K-B,Le=(te-B)/Pe,We=(re-B)/Pe,He=Math.min(Le,We),at=Math.max(Le,We),Rt=S+Oe*He;let ft=Math.floor(Math.min(Rt,W)/this._granularityCellSize)+1,Ct=Math.ceil(Math.max(Rt,W)/this._granularityCellSize)-1,zt=W<Rt;const en=Pe===0;if(en&&(K===te||K===re))return;if(en||He>=1||at<=0){const Gn=b-K,Un=D+(d-D)*Math.min((te-K)/Gn,(re-K)/Gn);ft=Math.floor(Math.min(Un,W)/this._granularityCellSize)+1,Ct=Math.ceil(Math.max(Un,W)/this._granularityCellSize)-1,zt=W<Un}const An=Ae>0?re:te;if(zt)for(let Gn=ft;Gn<=Ct;Gn++)u.push(this._vertexToIndex(Gn*this._granularityCellSize,An));else for(let Gn=Ct;Gn>=ft;Gn--)u.push(this._vertexToIndex(Gn*this._granularityCellSize,An))}_generateOutline(u){const d=[];for(const b of u){const S=yl(b,this._granularity,!0),B=this._pointArrayToIndices(S),D=[];for(let K=1;K<B.length;K++)D.push(B[K-1]),D.push(B[K]);d.push(D)}return d}_handlePoles(u){let d=!1,b=!1;this._canonical&&(this._canonical.y===0&&(d=!0),this._canonical.y===(1<<this._canonical.z)-1&&(b=!0)),(d||b)&&this._fillPoles(u,d,b)}_ensureNoPoleVertices(){const u=this._vertexBuffer;for(let d=0;d<u.length;d+=2){const b=u[d+1];b===jf&&(u[d+1]=-32767),b===Gm&&(u[d+1]=32766)}}_generatePoleQuad(u,d,b,S,B,D){S>B!=(D===jf)?(u.push(d),u.push(b),u.push(this._vertexToIndex(S,D)),u.push(b),u.push(this._vertexToIndex(B,D)),u.push(this._vertexToIndex(S,D))):(u.push(b),u.push(d),u.push(this._vertexToIndex(S,D)),u.push(this._vertexToIndex(B,D)),u.push(b),u.push(this._vertexToIndex(S,D)))}_fillPoles(u,d,b){const S=this._vertexBuffer,B=dt,D=u.length;for(let K=2;K<D;K+=3){const W=u[K-2],te=u[K-1],re=u[K],Ae=S[2*W],Oe=S[2*W+1],Pe=S[2*te],Le=S[2*te+1],We=S[2*re],He=S[2*re+1];d&&(Oe===0&&Le===0&&this._generatePoleQuad(u,W,te,Ae,Pe,jf),Le===0&&He===0&&this._generatePoleQuad(u,te,re,Pe,We,jf),He===0&&Oe===0&&this._generatePoleQuad(u,re,W,We,Ae,jf)),b&&(Oe===B&&Le===B&&this._generatePoleQuad(u,W,te,Ae,Pe,Gm),Le===B&&He===B&&this._generatePoleQuad(u,te,re,Pe,We,Gm),He===B&&Oe===B&&this._generatePoleQuad(u,re,W,We,Ae,Gm))}}_initializeVertices(u){for(let d=0;d<u.length;d+=2)this._vertexToIndex(u[d],u[d+1])}subdividePolygonInternal(u,d){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:b,holeIndices:S}=(function(K){const W=[],te=[];for(const re of K)if(re.length!==0){re!==K[0]&&W.push(te.length/2);for(let Ae=0;Ae<re.length;Ae++)te.push(re[Ae].x),te.push(re[Ae].y)}return{flattened:te,holeIndices:W}})(u);let B;this._initializeVertices(b);try{const K=(function(te,re,Ae=2){const Oe=re&&re.length,Pe=Oe?re[0]*Ae:te.length;let Le=Nm(te,0,Pe,Ae,!0);const We=[];if(!Le||Le.next===Le.prev)return We;let He,at,Rt;if(Oe&&(Le=(function(ft,Ct,zt,en){const An=[];for(let Gn=0,Un=Ct.length;Gn<Un;Gn++){const Nn=Nm(ft,Ct[Gn]*en,Gn<Un-1?Ct[Gn+1]*en:ft.length,en,!1);Nn===Nn.next&&(Nn.steiner=!0),An.push(vv(Nn))}An.sort(Uu);for(let Gn=0;Gn<An.length;Gn++)zt=AC(An[Gn],zt);return zt})(te,re,Le,Ae)),te.length>80*Ae){He=te[0],at=te[1];let ft=He,Ct=at;for(let zt=Ae;zt<Pe;zt+=Ae){const en=te[zt],An=te[zt+1];en<He&&(He=en),An<at&&(at=An),en>ft&&(ft=en),An>Ct&&(Ct=An)}Rt=Math.max(ft-He,Ct-at),Rt=Rt!==0?32767/Rt:0}return nd(Le,We,Ae,He,at,Rt,0),We})(b,S),W=this._convertIndices(b,K);B=this._subdivideTrianglesScanline(W)}catch(K){console.error(K)}let D=[];return d&&(D=this._generateOutline(u)),this._ensureNoPoleVertices(),this._handlePoles(B),{verticesFlattened:this._vertexBuffer,indicesTriangles:B,indicesLineList:D}}_convertIndices(u,d){const b=[];for(let S=0;S<d.length;S++)b.push(this._vertexToIndex(u[2*d[S]],u[2*d[S]+1]));return b}_pointArrayToIndices(u){const d=[];for(let b=0;b<u.length;b++){const S=u[b];d.push(this._vertexToIndex(S.x,S.y))}return d}}function C0(f,u,d,b=!0){return new Xx(d,u).subdividePolygonInternal(f,b)}function yl(f,u,d=!1){if(!f||f.length<1)return[];if(f.length<2)return[];const b=f[0],S=f[f.length-1],B=d&&(b.x!==S.x||b.y!==S.y);if(u<2)return B?[...f,f[0]]:[...f];const D=Math.floor(dt/u),K=[];K.push(new c(f[0].x,f[0].y));const W=f.length,te=B?W:W-1;for(let re=0;re<te;re++){const Ae=f[re],Oe=re<W-1?f[re+1]:f[0],Pe=Ae.x,Le=Ae.y,We=Oe.x,He=Oe.y,at=Pe!==We,Rt=Le!==He;if(!at&&!Rt)continue;const ft=We-Pe,Ct=He-Le,zt=Math.abs(ft),en=Math.abs(Ct);let An=Pe,Gn=Le;for(;;){const Nn=ft>0?(Math.floor(An/D)+1)*D:(Math.ceil(An/D)-1)*D,xi=Ct>0?(Math.floor(Gn/D)+1)*D:(Math.ceil(Gn/D)-1)*D,zn=Math.abs(An-Nn),jn=Math.abs(Gn-xi),on=Math.abs(An-We),Ni=Math.abs(Gn-He),$i=at?zn/zt:Number.POSITIVE_INFINITY,Di=Rt?jn/en:Number.POSITIVE_INFINITY;if((on<=zn||!at)&&(Ni<=jn||!Rt))break;if($i<Di&&at||!Rt){An=Nn,Gn+=Ct*$i;const mi=new c(An,Math.round(Gn));K[K.length-1].x===mi.x&&K[K.length-1].y===mi.y||K.push(mi)}else{An+=ft*Di,Gn=xi;const mi=new c(Math.round(An),Gn);K[K.length-1].x===mi.x&&K[K.length-1].y===mi.y||K.push(mi)}}const Un=new c(We,He);K[K.length-1].x===Un.x&&K[K.length-1].y===Un.y||K.push(Un)}return K}function _h(f,u,d){if(u.length===0)throw new Error("Subdivision vertex ring is empty.");let b=0,S=f[2*u[0]];for(let W=1;W<u.length;W++){const te=f[2*u[W]];te<S&&(S=te,b=W)}const B=u.length;let D=b,K=(D+1)%B;for(;;){const W=D-1>=0?D-1:B-1,te=(K+1)%B,re=f[2*u[W]],Ae=f[2*u[te]],Oe=f[2*u[D]],Pe=f[2*u[D]+1],Le=f[2*u[K]+1];let We=!1;if(re<Ae)We=!0;else if(re>Ae)We=!1;else{const He=Le-Pe,at=-(f[2*u[K]]-Oe),Rt=Pe<Le?1:-1;((re-Oe)*He+(f[2*u[W]+1]-Pe)*at)*Rt>((Ae-Oe)*He+(f[2*u[te]+1]-Pe)*at)*Rt&&(We=!0)}if(We){const He=u[W],at=u[D],Rt=u[K];He!==at&&He!==Rt&&at!==Rt&&d.push(Rt,at,He),D--,D<0&&(D=B-1)}else{const He=u[te],at=u[D],Rt=u[K];He!==at&&He!==Rt&&at!==Rt&&d.push(Rt,at,He),K++,K>=B&&(K=0)}if(W===te)break}}function bv(f,u,d,b,S,B,D,K,W){const te=S.length/2,re=D&&K&&W;if(te<Br.MAX_VERTEX_ARRAY_LENGTH){const Ae=u.prepareSegment(te,d,b),Oe=Ae.vertexLength;for(let We=0;We<B.length;We+=3)b.emplaceBack(Oe+B[We],Oe+B[We+1],Oe+B[We+2]);let Pe,Le;Ae.vertexLength+=te,Ae.primitiveLength+=B.length/3,re&&(Le=D.prepareSegment(te,d,K),Pe=Le.vertexLength,Le.vertexLength+=te);for(let We=0;We<S.length;We+=2)f(S[We],S[We+1]);if(re)for(let We=0;We<W.length;We++){const He=W[We];for(let at=1;at<He.length;at+=2)K.emplaceBack(Pe+He[at-1],Pe+He[at]);Le.primitiveLength+=He.length/2}}else(function(Ae,Oe,Pe,Le,We,He){const at=[];for(let en=0;en<Le.length/2;en++)at.push(-1);const Rt={count:0};let ft=0,Ct=Ae.getOrCreateLatestSegment(Oe,Pe),zt=Ct.vertexLength;for(let en=2;en<We.length;en+=3){const An=We[en-2],Gn=We[en-1],Un=We[en];let Nn=at[An]<ft,xi=at[Gn]<ft,zn=at[Un]<ft;Ct.vertexLength+((Nn?1:0)+(xi?1:0)+(zn?1:0))>Br.MAX_VERTEX_ARRAY_LENGTH&&(Ct=Ae.createNewSegment(Oe,Pe),ft=Rt.count,Nn=!0,xi=!0,zn=!0,zt=0);const jn=gs(at,Le,He,Rt,An,Nn,Ct),on=gs(at,Le,He,Rt,Gn,xi,Ct),Ni=gs(at,Le,He,Rt,Un,zn,Ct);Pe.emplaceBack(zt+jn-ft,zt+on-ft,zt+Ni-ft),Ct.primitiveLength++}})(u,d,b,S,B,f),re&&(function(Ae,Oe,Pe,Le,We,He){const at=[];for(let en=0;en<Le.length/2;en++)at.push(-1);const Rt={count:0};let ft=0,Ct=Ae.getOrCreateLatestSegment(Oe,Pe),zt=Ct.vertexLength;for(let en=0;en<We.length;en++){const An=We[en];for(let Gn=1;Gn<We[en].length;Gn+=2){const Un=An[Gn-1],Nn=An[Gn];let xi=at[Un]<ft,zn=at[Nn]<ft;Ct.vertexLength+((xi?1:0)+(zn?1:0))>Br.MAX_VERTEX_ARRAY_LENGTH&&(Ct=Ae.createNewSegment(Oe,Pe),ft=Rt.count,xi=!0,zn=!0,zt=0);const jn=gs(at,Le,He,Rt,Un,xi,Ct),on=gs(at,Le,He,Rt,Nn,zn,Ct);Pe.emplaceBack(zt+jn-ft,zt+on-ft),Ct.primitiveLength++}}})(D,d,K,S,W,f),u.forceNewSegmentOnNextPrepare(),D?.forceNewSegmentOnNextPrepare()}function gs(f,u,d,b,S,B,D){if(B){const K=b.count;return d(u[2*S],u[2*S+1]),f[S]=b.count,b.count++,D.vertexLength++,K}return f[S]}class Y1{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new Wt,this.indexArray=new ya,this.indexArray2=new ss,this.programConfigurations=new vh(u.layers,u.zoom),this.segments=new Br,this.segments2=new Br,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,b){this.hasDependencies=as("fill",this.layers,d);const S=this.layers[0].layout.get("fill-sort-key"),B=!S.isConstant(),D=[];for(const{feature:K,id:W,index:te,sourceLayerIndex:re}of u){const Ae=this.layers[0]._featureFilter.needGeometry,Oe=Xh(K,Ae);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),Oe,b))continue;const Pe=B?S.evaluate(Oe,{},b,d.availableImages):void 0,Le={id:W,properties:K.properties,type:K.type,sourceLayerIndex:re,index:te,geometry:Ae?Oe.geometry:bh(K),patterns:{},sortKey:Pe};D.push(Le)}B&&D.sort(((K,W)=>K.sortKey-W.sortKey));for(const K of D){const{geometry:W,index:te,sourceLayerIndex:re}=K;if(this.hasDependencies){const Ae=z1("fill",this.layers,K,{zoom:this.zoom},d);this.patternFeatures.push(Ae)}else this.addFeature(K,W,te,b,{},d.subdivisionGranularity);d.featureIndex.insert(u[te].feature,W,te,re,this.index)}}update(u,d,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:b})}addFeatures(u,d,b){for(const S of this.patternFeatures)this.addFeature(S,S.geometry,S.index,d,b,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,m0),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,d,b,S,B,D){for(const K of Nh(d,500)){const W=C0(K,S,D.fill.getGranularityForZoomLevel(S.z)),te=this.layoutVertexArray;bv(((re,Ae)=>{te.emplaceBack(re,Ae)}),this.segments,this.layoutVertexArray,this.indexArray,W.verticesFlattened,W.indicesTriangles,this.segments2,this.indexArray2,W.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,{imagePositions:B,canonical:S})}}let id,Nf;Xn("FillBucket",Y1,{omit:["layers","patternFeatures"]});var rd={get paint(){return Nf=Nf||new za({"fill-antialias":new ci(st.paint_fill["fill-antialias"]),"fill-opacity":new fi(st.paint_fill["fill-opacity"]),"fill-color":new fi(st.paint_fill["fill-color"]),"fill-outline-color":new fi(st.paint_fill["fill-outline-color"]),"fill-translate":new ci(st.paint_fill["fill-translate"]),"fill-translate-anchor":new ci(st.paint_fill["fill-translate-anchor"]),"fill-pattern":new ku(st.paint_fill["fill-pattern"])})},get layout(){return id=id||new za({"fill-sort-key":new fi(st.layout_fill["fill-sort-key"])})}};class Cv extends ua{constructor(u,d){super(u,rd,d)}recalculate(u,d){super.recalculate(u,d);const b=this.paint._values["fill-outline-color"];b.value.kind==="constant"&&b.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new Y1(u)}queryRadius(){return ra(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:u,geometry:d,transform:b,pixelsToTileUnits:S}){return k1(Ji(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-b.bearingInRadians,S),d)}isTileClipped(){return!0}}const _v=bo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),xh=bo([{name:"a_centroid",components:2,type:"Int16"}],4),{members:dC}=_v;class aA{constructor(u,d,b,S,B){this.properties={},this.extent=b,this.type=0,this.id=void 0,this._pbf=u,this._geometry=-1,this._keys=S,this._values=B,u.readFields(_0,this,d)}loadGeometry(){const u=this._pbf;u.pos=this._geometry;const d=u.readVarint()+u.pos,b=[];let S,B=1,D=0,K=0,W=0;for(;u.pos<d;){if(D<=0){const te=u.readVarint();B=7&te,D=te>>3}if(D--,B===1||B===2)K+=u.readSVarint(),W+=u.readSVarint(),B===1&&(S&&b.push(S),S=[]),S&&S.push(new c(K,W));else{if(B!==7)throw new Error(`unknown command ${B}`);S&&S.push(S[0].clone())}}return S&&b.push(S),b}bbox(){const u=this._pbf;u.pos=this._geometry;const d=u.readVarint()+u.pos;let b=1,S=0,B=0,D=0,K=1/0,W=-1/0,te=1/0,re=-1/0;for(;u.pos<d;){if(S<=0){const Ae=u.readVarint();b=7&Ae,S=Ae>>3}if(S--,b===1||b===2)B+=u.readSVarint(),D+=u.readSVarint(),B<K&&(K=B),B>W&&(W=B),D<te&&(te=D),D>re&&(re=D);else if(b!==7)throw new Error(`unknown command ${b}`)}return[K,te,W,re]}toGeoJSON(u,d,b){const S=this.extent*Math.pow(2,b),B=this.extent*u,D=this.extent*d,K=this.loadGeometry();function W(Oe){return[360*(Oe.x+B)/S-180,360/Math.PI*Math.atan(Math.exp((1-2*(Oe.y+D)/S)*Math.PI))-90]}function te(Oe){return Oe.map(W)}let re;if(this.type===1){const Oe=[];for(const Le of K)Oe.push(Le[0]);const Pe=te(Oe);re=Oe.length===1?{type:"Point",coordinates:Pe[0]}:{type:"MultiPoint",coordinates:Pe}}else if(this.type===2){const Oe=K.map(te);re=Oe.length===1?{type:"LineString",coordinates:Oe[0]}:{type:"MultiLineString",coordinates:Oe}}else{if(this.type!==3)throw new Error("unknown feature type");{const Oe=(function(Le){const We=Le.length;if(We<=1)return[Le];const He=[];let at,Rt;for(let ft=0;ft<We;ft++){const Ct=x0(Le[ft]);Ct!==0&&(Rt===void 0&&(Rt=Ct<0),Rt===Ct<0?(at&&He.push(at),at=[Le[ft]]):at&&at.push(Le[ft]))}return at&&He.push(at),He})(K),Pe=[];for(const Le of Oe)Pe.push(Le.map(te));re=Pe.length===1?{type:"Polygon",coordinates:Pe[0]}:{type:"MultiPolygon",coordinates:Pe}}}const Ae={type:"Feature",geometry:re,properties:this.properties};return this.id!=null&&(Ae.id=this.id),Ae}}function _0(f,u,d){f===1?u.id=d.readVarint():f===2?(function(b,S){const B=b.readVarint()+b.pos;for(;b.pos<B;){const D=S._keys[b.readVarint()],K=S._values[b.readVarint()];S.properties[D]=K}})(d,u):f===3?u.type=d.readVarint():f===4&&(u._geometry=d.pos)}function x0(f){let u=0;for(let d,b,S=0,B=f.length,D=B-1;S<B;D=S++)d=f[S],b=f[D],u+=(b.x-d.x)*(d.y+b.y);return u}aA.types=["Unknown","Point","LineString","Polygon"];class Bp{constructor(u,d){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(fC,this,d),this.length=this._features.length}feature(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];const d=this._pbf.readVarint()+this._pbf.pos;return new aA(this._pbf,d,this.extent,this._keys,this._values)}}function fC(f,u,d){f===15?u.version=d.readVarint():f===1?u.name=d.readString():f===5?u.extent=d.readVarint():f===2?u._features.push(d.pos):f===3?u._keys.push(d.readString()):f===4&&u._values.push((function(b){let S=null;const B=b.readVarint()+b.pos;for(;b.pos<B;){const D=b.readVarint()>>3;S=D===1?b.readString():D===2?b.readFloat():D===3?b.readDouble():D===4?b.readVarint64():D===5?b.readVarint():D===6?b.readSVarint():D===7?b.readBoolean():null}if(S==null)throw new Error("unknown feature value");return S})(d))}class xv{constructor(u,d){this.layers=u.readFields(M0,{},d)}}function M0(f,u,d){if(f===3){const b=new Bp(d,d.readVarint()+d.pos);b.length&&(u[b.name]=b)}}const $1=Math.pow(2,13);function Gf(f,u,d,b,S,B,D,K){f.emplaceBack(u,d,2*Math.floor(b*$1)+D,S*$1*2,B*$1*2,Math.round(K))}class V1{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasDependencies=!1,this.layoutVertexArray=new In,this.centroidVertexArray=new Kt,this.indexArray=new ya,this.programConfigurations=new vh(u.layers,u.zoom),this.segments=new Br,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,b){this.features=[],this.hasDependencies=as("fill-extrusion",this.layers,d);for(const{feature:S,id:B,index:D,sourceLayerIndex:K}of u){const W=this.layers[0]._featureFilter.needGeometry,te=Xh(S,W);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),te,b))continue;const re={id:B,sourceLayerIndex:K,index:D,geometry:W?te.geometry:bh(S),properties:S.properties,type:S.type,patterns:{}};this.hasDependencies?this.features.push(z1("fill-extrusion",this.layers,re,{zoom:this.zoom},d)):this.addFeature(re,re.geometry,D,b,{},d.subdivisionGranularity),d.featureIndex.insert(S,re.geometry,D,K,this.index,!0)}}addFeatures(u,d,b){for(const S of this.features){const{geometry:B}=S;this.addFeature(S,B,S.index,d,b,u.subdivisionGranularity)}}update(u,d,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:b})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,dC),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,xh.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,d,b,S,B,D){for(const K of Nh(d,500)){const W={x:0,y:0,sampleCount:0},te=this.layoutVertexArray.length;this.processPolygon(W,S,u,K,D);const re=this.layoutVertexArray.length-te,Ae=Math.floor(W.x/W.sampleCount),Oe=Math.floor(W.y/W.sampleCount);for(let Pe=0;Pe<re;Pe++)this.centroidVertexArray.emplaceBack(Ae,Oe)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,{imagePositions:B,canonical:S})}processPolygon(u,d,b,S,B){if(S.length<1||Yo(S[0]))return;for(const Ae of S)Ae.length!==0&&Jx(u,Ae);const D={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},K=B.fill.getGranularityForZoomLevel(d.z),W=aA.types[b.type]==="Polygon";for(const Ae of S){if(Ae.length===0||Yo(Ae))continue;const Oe=yl(Ae,K,W);this._generateSideFaces(Oe,D)}if(!W)return;const te=C0(S,d,K,!1),re=this.layoutVertexArray;bv(((Ae,Oe)=>{Gf(re,Ae,Oe,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,te.verticesFlattened,te.indicesTriangles)}_generateSideFaces(u,d){let b=0;for(let S=1;S<u.length;S++){const B=u[S],D=u[S-1];if(e2(B,D))continue;d.segment.vertexLength+4>Br.MAX_VERTEX_ARRAY_LENGTH&&(d.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const K=B.sub(D)._perp()._unit(),W=D.dist(B);b+W>32768&&(b=0),Gf(this.layoutVertexArray,B.x,B.y,K.x,K.y,0,0,b),Gf(this.layoutVertexArray,B.x,B.y,K.x,K.y,0,1,b),b+=W,Gf(this.layoutVertexArray,D.x,D.y,K.x,K.y,0,0,b),Gf(this.layoutVertexArray,D.x,D.y,K.x,K.y,0,1,b);const te=d.segment.vertexLength;this.indexArray.emplaceBack(te,te+2,te+1),this.indexArray.emplaceBack(te+1,te+2,te+3),d.segment.vertexLength+=4,d.segment.primitiveLength+=2}}}function Jx(f,u){for(let d=0;d<u.length;d++){const b=u[d];d===u.length-1&&u[0].x===b.x&&u[0].y===b.y||(f.x+=b.x,f.y+=b.y,f.sampleCount++)}}function e2(f,u){return f.x===u.x&&(f.x<0||f.x>dt)||f.y===u.y&&(f.y<0||f.y>dt)}function Yo(f){return f.every((u=>u.x<0))||f.every((u=>u.x>dt))||f.every((u=>u.y<0))||f.every((u=>u.y>dt))}let Bs;Xn("FillExtrusionBucket",V1,{omit:["layers","features"]});var go={get paint(){return Bs=Bs||new za({"fill-extrusion-opacity":new ci(st["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new fi(st["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ci(st["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ci(st["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ku(st["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new fi(st["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new fi(st["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ci(st["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class _o extends ua{constructor(u,d){super(u,go,d)}createBucket(u){return new V1(u)}queryRadius(){return ra(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:b,geometry:S,transform:B,pixelsToTileUnits:D,pixelPosMatrix:K}){const W=Ji(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-B.bearingInRadians,D),te=this.paint.get("fill-extrusion-height").evaluate(d,b),re=this.paint.get("fill-extrusion-base").evaluate(d,b),Ae=(function(Pe,Le){const We=[];for(const He of Pe){const at=[He.x,He.y,0,1];De(at,at,Le),We.push(new c(at[0]/at[3],at[1]/at[3]))}return We})(W,K),Oe=(function(Pe,Le,We,He){const at=[],Rt=[],ft=He[8]*Le,Ct=He[9]*Le,zt=He[10]*Le,en=He[11]*Le,An=He[8]*We,Gn=He[9]*We,Un=He[10]*We,Nn=He[11]*We;for(const xi of Pe){const zn=[],jn=[];for(const on of xi){const Ni=on.x,$i=on.y,Di=He[0]*Ni+He[4]*$i+He[12],mi=He[1]*Ni+He[5]*$i+He[13],Kr=He[2]*Ni+He[6]*$i+He[14],Ks=He[3]*Ni+He[7]*$i+He[15],ca=Kr+zt,bl=Ks+en,jc=Di+An,du=mi+Gn,Vs=Kr+Un,zo=Ks+Nn,Ls=new c((Di+ft)/bl,(mi+Ct)/bl);Ls.z=ca/bl,zn.push(Ls);const xa=new c(jc/zo,du/zo);xa.z=Vs/zo,jn.push(xa)}at.push(zn),Rt.push(jn)}return[at,Rt]})(S,re,te,K);return(function(Pe,Le,We){let He=1/0;k1(We,Le)&&(He=kc(We,Le[0]));for(let at=0;at<Le.length;at++){const Rt=Le[at],ft=Pe[at];for(let Ct=0;Ct<Rt.length-1;Ct++){const zt=Rt[Ct],en=[zt,Rt[Ct+1],ft[Ct+1],ft[Ct],zt];Pu(We,en)&&(He=Math.min(He,kc(We,en)))}}return He!==1/0&&He})(Oe[0],Oe[1],Ae)}}function Lo(f,u){return f.x*u.x+f.y*u.y}function kc(f,u){if(f.length===1){let d=0;const b=u[d++];let S;for(;!S||b.equals(S);)if(S=u[d++],!S)return 1/0;for(;d<u.length;d++){const B=u[d],D=f[0],K=S.sub(b),W=B.sub(b),te=D.sub(b),re=Lo(K,K),Ae=Lo(K,W),Oe=Lo(W,W),Pe=Lo(te,K),Le=Lo(te,W),We=re*Oe-Ae*Ae,He=(Oe*Pe-Ae*Le)/We,at=(re*Le-Ae*Pe)/We,Rt=b.z*(1-He-at)+S.z*He+B.z*at;if(isFinite(Rt))return Rt}return 1/0}{let d=1/0;for(const b of u)d=Math.min(d,b.z);return d}}const Wf=bo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Wm}=Wf,Mv=bo([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Mh}=Mv,va=Math.cos(Math.PI/180*37.5),Hd=Math.pow(2,14)/.5;class Zd{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((d=>{this.gradients[d.id]={}})),this.layoutVertexArray=new kn,this.layoutVertexArray2=new cn,this.indexArray=new ya,this.programConfigurations=new vh(u.layers,u.zoom),this.segments=new Br,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,b){this.hasDependencies=as("line",this.layers,d)||this.hasLineDasharray(this.layers);const S=this.layers[0].layout.get("line-sort-key"),B=!S.isConstant(),D=[];for(const{feature:K,id:W,index:te,sourceLayerIndex:re}of u){const Ae=this.layers[0]._featureFilter.needGeometry,Oe=Xh(K,Ae);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),Oe,b))continue;const Pe=B?S.evaluate(Oe,{},b):void 0,Le={id:W,properties:K.properties,type:K.type,sourceLayerIndex:re,index:te,geometry:Ae?Oe.geometry:bh(K),patterns:{},dashes:{},sortKey:Pe};D.push(Le)}B&&D.sort(((K,W)=>K.sortKey-W.sortKey));for(const K of D){const{geometry:W,index:te,sourceLayerIndex:re}=K;this.hasDependencies?(as("line",this.layers,d)?z1("line",this.layers,K,{zoom:this.zoom},d):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,K,this.zoom,d),this.patternFeatures.push(K)):this.addFeature(K,W,te,b,{},{},d.subdivisionGranularity),d.featureIndex.insert(u[te].feature,W,te,re,this.index)}}update(u,d,b,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:b,dashPositions:S})}addFeatures(u,d,b,S){for(const B of this.patternFeatures)this.addFeature(B,B.geometry,B.index,d,b,S,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,Mh)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Wm),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,d,b,S,B,D,K){const W=this.layers[0].layout,te=W.get("line-join").evaluate(u,{}),re=W.get("line-cap"),Ae=W.get("line-miter-limit"),Oe=W.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const Pe of d)this.addLine(Pe,u,te,re,Ae,Oe,S,K);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,{imagePositions:B,dashPositions:D,canonical:S})}addLine(u,d,b,S,B,D,K,W){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,u=yl(u,K?W.line.getGranularityForZoomLevel(K.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ft=0;ft<u.length-1;ft++)this.totalDistance+=u[ft].dist(u[ft+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const te=aA.types[d.type]==="Polygon";let re=u.length;for(;re>=2&&u[re-1].equals(u[re-2]);)re--;let Ae=0;for(;Ae<re-1&&u[Ae].equals(u[Ae+1]);)Ae++;if(re<(te?3:2))return;b==="bevel"&&(B=1.05);const Oe=this.overscaling<=16?122880/(512*this.overscaling):0,Pe=this.segments.prepareSegment(10*re,this.layoutVertexArray,this.indexArray);let Le,We,He,at,Rt;this.e1=this.e2=-1,te&&(Le=u[re-2],Rt=u[Ae].sub(Le)._unit()._perp());for(let ft=Ae;ft<re;ft++){if(He=ft===re-1?te?u[Ae+1]:void 0:u[ft+1],He&&u[ft].equals(He))continue;Rt&&(at=Rt),Le&&(We=Le),Le=u[ft],Rt=He?He.sub(Le)._unit()._perp():at,at=at||Rt;let Ct=at.add(Rt);Ct.x===0&&Ct.y===0||Ct._unit();const zt=at.x*Rt.x+at.y*Rt.y,en=Ct.x*Rt.x+Ct.y*Rt.y,An=en!==0?1/en:1/0,Gn=2*Math.sqrt(2-2*en),Un=en<va&&We&&He,Nn=at.x*Rt.y-at.y*Rt.x>0;if(Un&&ft>Ae){const jn=Le.dist(We);if(jn>2*Oe){const on=Le.sub(Le.sub(We)._mult(Oe/jn)._round());this.updateDistance(We,on),this.addCurrentVertex(on,at,0,0,Pe),We=on}}const xi=We&&He;let zn=xi?b:te?"butt":S;if(xi&&zn==="round"&&(An<D?zn="miter":An<=2&&(zn="fakeround")),zn==="miter"&&An>B&&(zn="bevel"),zn==="bevel"&&(An>2&&(zn="flipbevel"),An<B&&(zn="miter")),We&&this.updateDistance(We,Le),zn==="miter")Ct._mult(An),this.addCurrentVertex(Le,Ct,0,0,Pe);else if(zn==="flipbevel"){if(An>100)Ct=Rt.mult(-1);else{const jn=An*at.add(Rt).mag()/at.sub(Rt).mag();Ct._perp()._mult(jn*(Nn?-1:1))}this.addCurrentVertex(Le,Ct,0,0,Pe),this.addCurrentVertex(Le,Ct.mult(-1),0,0,Pe)}else if(zn==="bevel"||zn==="fakeround"){const jn=-Math.sqrt(An*An-1),on=Nn?jn:0,Ni=Nn?0:jn;if(We&&this.addCurrentVertex(Le,at,on,Ni,Pe),zn==="fakeround"){const $i=Math.round(180*Gn/Math.PI/20);for(let Di=1;Di<$i;Di++){let mi=Di/$i;if(mi!==.5){const Ks=mi-.5;mi+=mi*Ks*(mi-1)*((1.0904+zt*(zt*(3.55645-1.43519*zt)-3.2452))*Ks*Ks+(.848013+zt*(.215638*zt-1.06021)))}const Kr=Rt.sub(at)._mult(mi)._add(at)._unit()._mult(Nn?-1:1);this.addHalfVertex(Le,Kr.x,Kr.y,!1,Nn,0,Pe)}}He&&this.addCurrentVertex(Le,Rt,-on,-Ni,Pe)}else if(zn==="butt")this.addCurrentVertex(Le,Ct,0,0,Pe);else if(zn==="square"){const jn=We?1:-1;this.addCurrentVertex(Le,Ct,jn,jn,Pe)}else zn==="round"&&(We&&(this.addCurrentVertex(Le,at,0,0,Pe),this.addCurrentVertex(Le,at,1,1,Pe,!0)),He&&(this.addCurrentVertex(Le,Rt,-1,-1,Pe,!0),this.addCurrentVertex(Le,Rt,0,0,Pe)));if(Un&&ft<re-1){const jn=Le.dist(He);if(jn>2*Oe){const on=Le.add(He.sub(Le)._mult(Oe/jn)._round());this.updateDistance(Le,on),this.addCurrentVertex(on,Rt,0,0,Pe),Le=on}}}}addCurrentVertex(u,d,b,S,B,D=!1){const K=d.y*S-d.x,W=-d.y-d.x*S;this.addHalfVertex(u,d.x+d.y*b,d.y-d.x*b,D,!1,b,B),this.addHalfVertex(u,K,W,D,!0,-S,B),this.distance>Hd/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(u,d,b,S,B,D))}addHalfVertex({x:u,y:d},b,S,B,D,K,W){const te=.5*(this.lineClips?this.scaledDistance*(Hd-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(B?1:0),(d<<1)+(D?1:0),Math.round(63*b)+128,Math.round(63*S)+128,1+(K===0?0:K<0?-1:1)|(63&te)<<2,te>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const re=W.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,re,this.e2),W.primitiveLength++),D?this.e2=re:this.e1=re}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,d){this.distance+=u.dist(d),this.updateScaledDistance()}hasLineDasharray(u){for(const d of u){const b=d.paint.get("line-dasharray");if(b&&!b.isConstant())return!0}return!1}addLineDashDependencies(u,d,b,S){for(const B of u){const D=B.paint.get("line-dasharray");if(!D||D.value.kind==="constant")continue;const K=B.layout.get("line-cap")==="round",W={dasharray:D.value.evaluate({zoom:b-1},d,{}),round:K},te={dasharray:D.value.evaluate({zoom:b},d,{}),round:K},re={dasharray:D.value.evaluate({zoom:b+1},d,{}),round:K},Ae=`${W.dasharray.join(",")},${W.round}`,Oe=`${te.dasharray.join(",")},${te.round}`,Pe=`${re.dasharray.join(",")},${re.round}`;S.dashDependencies[Ae]=W,S.dashDependencies[Oe]=te,S.dashDependencies[Pe]=re,d.dashes[B.id]={min:Ae,mid:Oe,max:Pe}}}}let H1,Tc;Xn("LineBucket",Zd,{omit:["layers","patternFeatures"]});var Ip={get paint(){return Tc=Tc||new za({"line-opacity":new fi(st.paint_line["line-opacity"]),"line-color":new fi(st.paint_line["line-color"]),"line-translate":new ci(st.paint_line["line-translate"]),"line-translate-anchor":new ci(st.paint_line["line-translate-anchor"]),"line-width":new fi(st.paint_line["line-width"]),"line-gap-width":new fi(st.paint_line["line-gap-width"]),"line-offset":new fi(st.paint_line["line-offset"]),"line-blur":new fi(st.paint_line["line-blur"]),"line-dasharray":new ku(st.paint_line["line-dasharray"]),"line-pattern":new ku(st.paint_line["line-pattern"]),"line-gradient":new Fa(st.paint_line["line-gradient"])})},get layout(){return H1=H1||new za({"line-cap":new ci(st.layout_line["line-cap"]),"line-join":new fi(st.layout_line["line-join"]),"line-miter-limit":new ci(st.layout_line["line-miter-limit"]),"line-round-limit":new ci(st.layout_line["line-round-limit"]),"line-sort-key":new fi(st.layout_line["line-sort-key"])})}};class w0 extends fi{possiblyEvaluate(u,d){return d=new Qr(Math.floor(d.zoom),{now:d.now,fadeDuration:d.fadeDuration,zoomHistory:d.zoomHistory,transition:d.transition}),super.possiblyEvaluate(u,d)}evaluate(u,d,b,S){return d=Ke({},d,{zoom:Math.floor(d.zoom)}),super.evaluate(u,d,b,S)}}let hu;class wv extends ua{constructor(u,d){super(u,Ip,d),this.gradientVersion=0,hu||(hu=new w0(Ip.paint.properties["line-width"].specification),hu.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const d=this.gradientExpression();this.stepInterpolant=!!(function(b){return b._styleExpression!==void 0})(d)&&d._styleExpression.expression instanceof gr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,d){super.recalculate(u,d),this.paint._values["line-floorwidth"]=hu.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new Zd(u)}queryRadius(u){const d=u,b=Qm(Os("line-width",this,d),Os("line-gap-width",this,d)),S=Os("line-offset",this,d);return b/2+Math.abs(S)+ra(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:b,geometry:S,transform:B,pixelsToTileUnits:D}){const K=Ji(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-B.bearingInRadians,D),W=D/2*Qm(this.paint.get("line-width").evaluate(d,b),this.paint.get("line-gap-width").evaluate(d,b)),te=this.paint.get("line-offset").evaluate(d,b);return te&&(S=(function(re,Ae){const Oe=[];for(let Pe=0;Pe<re.length;Pe++){const Le=re[Pe],We=[];for(let He=0;He<Le.length;He++){const at=Le[He-1],Rt=Le[He],ft=Le[He+1],Ct=He===0?new c(0,0):Rt.sub(at)._unit()._perp(),zt=He===Le.length-1?new c(0,0):ft.sub(Rt)._unit()._perp(),en=Ct._add(zt)._unit(),An=en.x*zt.x+en.y*zt.y;An!==0&&en._mult(1/An),We.push(en._mult(Ae)._add(Rt))}Oe.push(We)}return Oe})(S,te*D)),(function(re,Ae,Oe){for(let Pe=0;Pe<Ae.length;Pe++){const Le=Ae[Pe];if(re.length>=3){for(let We=0;We<Le.length;We++)if(Lf(re,Le[We]))return!0}if(sC(re,Le,Oe))return!0}return!1})(K,S,W)}isTileClipped(){return!0}}function Qm(f,u){return u>0?u+2*f:f}const pC=bo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),kp=bo([{name:"a_projected_pos",components:3,type:"Float32"}],4);bo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Z1=bo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);bo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Xd=bo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),kl=bo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Qf(f,u,d){return f.sections.forEach((b=>{b.text=(function(S,B,D){const K=B.layout.get("text-transform").evaluate(D,{});return K==="uppercase"?S=S.toLocaleUpperCase():K==="lowercase"&&(S=S.toLocaleLowerCase()),Ja.applyArabicShaping&&(S=Ja.applyArabicShaping(S)),S})(b.text,u,d)})),f}bo([{name:"triangle",components:3,type:"Uint16"}]),bo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),bo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),bo([{type:"Float32",name:"offsetX"}]),bo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),bo([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const od={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Is=24;const S0=4294967296,X1=1/S0,Sv=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Tp{constructor(u=new Uint8Array(16)){this.buf=ArrayBuffer.isView(u)?u:new Uint8Array(u),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(u,d,b=this.length){for(;this.pos<b;){const S=this.readVarint(),B=S>>3,D=this.pos;this.type=7&S,u(B,d,this),this.pos===D&&this.skip(S)}return d}readMessage(u,d){return this.readFields(u,d,this.readVarint()+this.pos)}readFixed32(){const u=this.dataView.getUint32(this.pos,!0);return this.pos+=4,u}readSFixed32(){const u=this.dataView.getInt32(this.pos,!0);return this.pos+=4,u}readFixed64(){const u=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*S0;return this.pos+=8,u}readSFixed64(){const u=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*S0;return this.pos+=8,u}readFloat(){const u=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,u}readDouble(){const u=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,u}readVarint(u){const d=this.buf;let b,S;return S=d[this.pos++],b=127&S,S<128?b:(S=d[this.pos++],b|=(127&S)<<7,S<128?b:(S=d[this.pos++],b|=(127&S)<<14,S<128?b:(S=d[this.pos++],b|=(127&S)<<21,S<128?b:(S=d[this.pos],b|=(15&S)<<28,(function(B,D,K){const W=K.buf;let te,re;if(re=W[K.pos++],te=(112&re)>>4,re<128||(re=W[K.pos++],te|=(127&re)<<3,re<128)||(re=W[K.pos++],te|=(127&re)<<10,re<128)||(re=W[K.pos++],te|=(127&re)<<17,re<128)||(re=W[K.pos++],te|=(127&re)<<24,re<128)||(re=W[K.pos++],te|=(1&re)<<31,re<128))return qf(B,te,D);throw new Error("Expected varint not more than 10 bytes")})(b,u,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const u=this.readVarint();return u%2==1?(u+1)/-2:u/2}readBoolean(){return!!this.readVarint()}readString(){const u=this.readVarint()+this.pos,d=this.pos;return this.pos=u,u-d>=12&&Sv?Sv.decode(this.buf.subarray(d,u)):(function(b,S,B){let D="",K=S;for(;K<B;){const W=b[K];let te,re,Ae,Oe=null,Pe=W>239?4:W>223?3:W>191?2:1;if(K+Pe>B)break;Pe===1?W<128&&(Oe=W):Pe===2?(te=b[K+1],(192&te)==128&&(Oe=(31&W)<<6|63&te,Oe<=127&&(Oe=null))):Pe===3?(te=b[K+1],re=b[K+2],(192&te)==128&&(192&re)==128&&(Oe=(15&W)<<12|(63&te)<<6|63&re,(Oe<=2047||Oe>=55296&&Oe<=57343)&&(Oe=null))):Pe===4&&(te=b[K+1],re=b[K+2],Ae=b[K+3],(192&te)==128&&(192&re)==128&&(192&Ae)==128&&(Oe=(15&W)<<18|(63&te)<<12|(63&re)<<6|63&Ae,(Oe<=65535||Oe>=1114112)&&(Oe=null))),Oe===null?(Oe=65533,Pe=1):Oe>65535&&(Oe-=65536,D+=String.fromCharCode(Oe>>>10&1023|55296),Oe=56320|1023&Oe),D+=String.fromCharCode(Oe),K+=Pe}return D})(this.buf,d,u)}readBytes(){const u=this.readVarint()+this.pos,d=this.buf.subarray(this.pos,u);return this.pos=u,d}readPackedVarint(u=[],d){const b=this.readPackedEnd();for(;this.pos<b;)u.push(this.readVarint(d));return u}readPackedSVarint(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readSVarint());return u}readPackedBoolean(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readBoolean());return u}readPackedFloat(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readFloat());return u}readPackedDouble(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readDouble());return u}readPackedFixed32(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readFixed32());return u}readPackedSFixed32(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readSFixed32());return u}readPackedFixed64(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readFixed64());return u}readPackedSFixed64(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readSFixed64());return u}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(u){const d=7&u;if(d===0)for(;this.buf[this.pos++]>127;);else if(d===2)this.pos=this.readVarint()+this.pos;else if(d===5)this.pos+=4;else{if(d!==1)throw new Error(`Unimplemented type: ${d}`);this.pos+=8}}writeTag(u,d){this.writeVarint(u<<3|d)}realloc(u){let d=this.length||16;for(;d<this.pos+u;)d*=2;if(d!==this.length){const b=new Uint8Array(d);b.set(this.buf),this.buf=b,this.dataView=new DataView(b.buffer),this.length=d}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(u){this.realloc(4),this.dataView.setInt32(this.pos,u,!0),this.pos+=4}writeSFixed32(u){this.realloc(4),this.dataView.setInt32(this.pos,u,!0),this.pos+=4}writeFixed64(u){this.realloc(8),this.dataView.setInt32(this.pos,-1&u,!0),this.dataView.setInt32(this.pos+4,Math.floor(u*X1),!0),this.pos+=8}writeSFixed64(u){this.realloc(8),this.dataView.setInt32(this.pos,-1&u,!0),this.dataView.setInt32(this.pos+4,Math.floor(u*X1),!0),this.pos+=8}writeVarint(u){(u=+u||0)>268435455||u<0?(function(d,b){let S,B;if(d>=0?(S=d%4294967296|0,B=d/4294967296|0):(S=~(-d%4294967296),B=~(-d/4294967296),4294967295^S?S=S+1|0:(S=0,B=B+1|0)),d>=18446744073709552e3||d<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");b.realloc(10),(function(D,K,W){W.buf[W.pos++]=127&D|128,D>>>=7,W.buf[W.pos++]=127&D|128,D>>>=7,W.buf[W.pos++]=127&D|128,D>>>=7,W.buf[W.pos++]=127&D|128,W.buf[W.pos]=127&(D>>>=7)})(S,0,b),(function(D,K){const W=(7&D)<<4;K.buf[K.pos++]|=W|((D>>>=3)?128:0),D&&(K.buf[K.pos++]=127&D|((D>>>=7)?128:0),D&&(K.buf[K.pos++]=127&D|((D>>>=7)?128:0),D&&(K.buf[K.pos++]=127&D|((D>>>=7)?128:0),D&&(K.buf[K.pos++]=127&D|((D>>>=7)?128:0),D&&(K.buf[K.pos++]=127&D)))))})(B,b)})(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))}writeSVarint(u){this.writeVarint(u<0?2*-u-1:2*u)}writeBoolean(u){this.writeVarint(+u)}writeString(u){u=String(u),this.realloc(4*u.length),this.pos++;const d=this.pos;this.pos=(function(S,B,D){for(let K,W,te=0;te<B.length;te++){if(K=B.charCodeAt(te),K>55295&&K<57344){if(!W){K>56319||te+1===B.length?(S[D++]=239,S[D++]=191,S[D++]=189):W=K;continue}if(K<56320){S[D++]=239,S[D++]=191,S[D++]=189,W=K;continue}K=W-55296<<10|K-56320|65536,W=null}else W&&(S[D++]=239,S[D++]=191,S[D++]=189,W=null);K<128?S[D++]=K:(K<2048?S[D++]=K>>6|192:(K<65536?S[D++]=K>>12|224:(S[D++]=K>>18|240,S[D++]=K>>12&63|128),S[D++]=K>>6&63|128),S[D++]=63&K|128)}return D})(this.buf,u,this.pos);const b=this.pos-d;b>=128&&Rc(d,b,this),this.pos=d-1,this.writeVarint(b),this.pos+=b}writeFloat(u){this.realloc(4),this.dataView.setFloat32(this.pos,u,!0),this.pos+=4}writeDouble(u){this.realloc(8),this.dataView.setFloat64(this.pos,u,!0),this.pos+=8}writeBytes(u){const d=u.length;this.writeVarint(d),this.realloc(d);for(let b=0;b<d;b++)this.buf[this.pos++]=u[b]}writeRawMessage(u,d){this.pos++;const b=this.pos;u(d,this);const S=this.pos-b;S>=128&&Rc(b,S,this),this.pos=b-1,this.writeVarint(S),this.pos+=S}writeMessage(u,d,b){this.writeTag(u,2),this.writeRawMessage(d,b)}writePackedVarint(u,d){d.length&&this.writeMessage(u,mC,d)}writePackedSVarint(u,d){d.length&&this.writeMessage(u,Dc,d)}writePackedBoolean(u,d){d.length&&this.writeMessage(u,vC,d)}writePackedFloat(u,d){d.length&&this.writeMessage(u,gC,d)}writePackedDouble(u,d){d.length&&this.writeMessage(u,yC,d)}writePackedFixed32(u,d){d.length&&this.writeMessage(u,Jd,d)}writePackedSFixed32(u,d){d.length&&this.writeMessage(u,J1,d)}writePackedFixed64(u,d){d.length&&this.writeMessage(u,Ev,d)}writePackedSFixed64(u,d){d.length&&this.writeMessage(u,qm,d)}writeBytesField(u,d){this.writeTag(u,2),this.writeBytes(d)}writeFixed32Field(u,d){this.writeTag(u,5),this.writeFixed32(d)}writeSFixed32Field(u,d){this.writeTag(u,5),this.writeSFixed32(d)}writeFixed64Field(u,d){this.writeTag(u,1),this.writeFixed64(d)}writeSFixed64Field(u,d){this.writeTag(u,1),this.writeSFixed64(d)}writeVarintField(u,d){this.writeTag(u,0),this.writeVarint(d)}writeSVarintField(u,d){this.writeTag(u,0),this.writeSVarint(d)}writeStringField(u,d){this.writeTag(u,2),this.writeString(d)}writeFloatField(u,d){this.writeTag(u,5),this.writeFloat(d)}writeDoubleField(u,d){this.writeTag(u,1),this.writeDouble(d)}writeBooleanField(u,d){this.writeVarintField(u,+d)}}function qf(f,u,d){return d?4294967296*u+(f>>>0):4294967296*(u>>>0)+(f>>>0)}function Rc(f,u,d){const b=u<=16383?1:u<=2097151?2:u<=268435455?3:Math.floor(Math.log(u)/(7*Math.LN2));d.realloc(b);for(let S=d.pos-1;S>=f;S--)d.buf[S+b]=d.buf[S]}function mC(f,u){for(let d=0;d<f.length;d++)u.writeVarint(f[d])}function Dc(f,u){for(let d=0;d<f.length;d++)u.writeSVarint(f[d])}function gC(f,u){for(let d=0;d<f.length;d++)u.writeFloat(f[d])}function yC(f,u){for(let d=0;d<f.length;d++)u.writeDouble(f[d])}function vC(f,u){for(let d=0;d<f.length;d++)u.writeBoolean(f[d])}function Jd(f,u){for(let d=0;d<f.length;d++)u.writeFixed32(f[d])}function J1(f,u){for(let d=0;d<f.length;d++)u.writeSFixed32(f[d])}function Ev(f,u){for(let d=0;d<f.length;d++)u.writeFixed64(f[d])}function qm(f,u){for(let d=0;d<f.length;d++)u.writeSFixed64(f[d])}function bC(f,u,d){f===1&&d.readMessage(E0,u)}function E0(f,u,d){if(f===3){const{id:b,bitmap:S,width:B,height:D,left:K,top:W,advance:te}=d.readMessage(CC,{});u.push({id:b,bitmap:new gl({width:B+6,height:D+6},S),metrics:{width:B,height:D,left:K,top:W,advance:te}})}}function CC(f,u,d){f===1?u.id=d.readVarint():f===2?u.bitmap=d.readBytes():f===3?u.width=d.readVarint():f===4?u.height=d.readVarint():f===5?u.left=d.readSVarint():f===6?u.top=d.readSVarint():f===7&&(u.advance=d.readVarint())}function Ov(f){let u=0,d=0;for(const D of f)u+=D.w*D.h,d=Math.max(d,D.w);f.sort(((D,K)=>K.h-D.h));const b=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),d),h:1/0}];let S=0,B=0;for(const D of f)for(let K=b.length-1;K>=0;K--){const W=b[K];if(!(D.w>W.w||D.h>W.h)){if(D.x=W.x,D.y=W.y,B=Math.max(B,D.y+D.h),S=Math.max(S,D.x+D.w),D.w===W.w&&D.h===W.h){const te=b.pop();te&&K<b.length&&(b[K]=te)}else D.h===W.h?(W.x+=D.w,W.w-=D.w):D.w===W.w?(W.y+=D.h,W.h-=D.h):(b.push({x:W.x+D.w,y:W.y,w:W.w-D.w,h:D.h}),W.y+=D.h,W.h-=D.h);break}}return{w:S,h:B,fill:u/(S*B)||0}}class Ym{constructor(u,{pixelRatio:d,version:b,stretchX:S,stretchY:B,content:D,textFitWidth:K,textFitHeight:W}){this.paddedRect=u,this.pixelRatio=d,this.stretchX=S,this.stretchY=B,this.content=D,this.version=b,this.textFitWidth=K,this.textFitHeight=W}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class ey{constructor(u,d){const b={},S={};this.haveRenderCallbacks=[];const B=[];this.addImages(u,b,B),this.addImages(d,S,B);const{w:D,h:K}=Ov(B),W=new Il({width:D||1,height:K||1});for(const te in u){const re=u[te],Ae=b[te].paddedRect;Il.copy(re.data,W,{x:0,y:0},{x:Ae.x+1,y:Ae.y+1},re.data)}for(const te in d){const re=d[te],Ae=S[te].paddedRect,Oe=Ae.x+1,Pe=Ae.y+1,Le=re.data.width,We=re.data.height;Il.copy(re.data,W,{x:0,y:0},{x:Oe,y:Pe},re.data),Il.copy(re.data,W,{x:0,y:We-1},{x:Oe,y:Pe-1},{width:Le,height:1}),Il.copy(re.data,W,{x:0,y:0},{x:Oe,y:Pe+We},{width:Le,height:1}),Il.copy(re.data,W,{x:Le-1,y:0},{x:Oe-1,y:Pe},{width:1,height:We}),Il.copy(re.data,W,{x:0,y:0},{x:Oe+Le,y:Pe},{width:1,height:We})}this.image=W,this.iconPositions=b,this.patternPositions=S}addImages(u,d,b){for(const S in u){const B=u[S],D={x:0,y:0,w:B.data.width+2,h:B.data.height+2};b.push(D),d[S]=new Ym(D,B),B.hasRenderCallback&&this.haveRenderCallbacks.push(S)}}patchUpdatedImages(u,d){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const b in u.updatedImages)this.patchUpdatedImage(this.iconPositions[b],u.getImage(b),d),this.patchUpdatedImage(this.patternPositions[b],u.getImage(b),d)}patchUpdatedImage(u,d,b){if(!u||!d||u.version===d.version)return;u.version=d.version;const[S,B]=u.tl;b.update(d.data,void 0,{x:S,y:B})}}var Yf;Xn("ImagePosition",Ym),Xn("ImageAtlas",ey),s.ao=void 0,(Yf=s.ao||(s.ao={}))[Yf.none=0]="none",Yf[Yf.horizontal=1]="horizontal",Yf[Yf.vertical=2]="vertical",Yf[Yf.horizontalOnly=3]="horizontalOnly";class O0{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(u,d,b){const S=new O0;return S.scale=u||1,S.fontStack=d,S.verticalAlign=b||"bottom",S}static forImage(u,d){const b=new O0;return b.imageName=u,b.verticalAlign=d||"bottom",b}}class $m{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,d){const b=new $m;for(let S=0;S<u.sections.length;S++){const B=u.sections[S];B.image?b.addImageSection(B):b.addTextSection(B,d)}return b}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=(function(u){let d="";for(let b=0;b<u.length;b++){const S=u.charCodeAt(b+1)||null,B=u.charCodeAt(b-1)||null;d+=S&&oc(S)&&!od[u[b+1]]||B&&oc(B)&&!od[u[b-1]]||!od[u[b]]?u[b]:od[u[b]]}return d})(this.text)}trim(){let u=0;for(let b=0;b<this.text.length&&I0[this.text.charCodeAt(b)];b++)u++;let d=this.text.length;for(let b=this.text.length-1;b>=0&&b>=u&&I0[this.text.charCodeAt(b)];b--)d--;this.text=this.text.substring(u,d),this.sectionIndex=this.sectionIndex.slice(u,d)}substring(u,d){const b=new $m;return b.text=this.text.substring(u,d),b.sectionIndex=this.sectionIndex.slice(u,d),b.sections=this.sections,b}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((u,d)=>Math.max(u,this.sections[d].scale)),0)}getMaxImageSize(u){let d=0,b=0;for(let S=0;S<this.length();S++){const B=this.getSection(S);if(B.imageName){const D=u[B.imageName];if(!D)continue;const K=D.displaySize;d=Math.max(d,K[0]),b=Math.max(b,K[1])}}return{maxImageWidth:d,maxImageHeight:b}}addTextSection(u,d){this.text+=u.text,this.sections.push(O0.forText(u.scale,u.fontStack||d,u.verticalAlign));const b=this.sections.length-1;for(let S=0;S<u.text.length;++S)this.sectionIndex.push(b)}addImageSection(u){const d=u.image?u.image.name:"";if(d.length===0)return void pt("Can't add FormattedSection with an empty image.");const b=this.getNextImageSectionCharCode();b?(this.text+=String.fromCharCode(b),this.sections.push(O0.forImage(d,u.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):pt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function B0(f,u,d,b,S,B,D,K,W,te,re,Ae,Oe,Pe,Le){const We=$m.fromFeature(f,S);let He;Ae===s.ao.vertical&&We.verticalizePunctuation();const{processBidirectionalText:at,processStyledBidirectionalText:Rt}=Ja;if(at&&We.sections.length===1){He=[];const zt=at(We.toString(),T0(We,te,B,u,b,Pe));for(const en of zt){const An=new $m;An.text=en,An.sections=We.sections;for(let Gn=0;Gn<en.length;Gn++)An.sectionIndex.push(0);He.push(An)}}else if(Rt){He=[];const zt=Rt(We.text,We.sectionIndex,T0(We,te,B,u,b,Pe));for(const en of zt){const An=new $m;An.text=en[0],An.sectionIndex=en[1],An.sections=We.sections,He.push(An)}}else He=(function(zt,en){const An=[],Gn=zt.text;let Un=0;for(const Nn of en)An.push(zt.substring(Un,Nn)),Un=Nn;return Un<Gn.length&&An.push(zt.substring(Un,Gn.length)),An})(We,T0(We,te,B,u,b,Pe));const ft=[],Ct={positionedLines:ft,text:We.toString(),top:re[1],bottom:re[1],left:re[0],right:re[0],writingMode:Ae,iconsInText:!1,verticalizable:!1};return(function(zt,en,An,Gn,Un,Nn,xi,zn,jn,on,Ni,$i){let Di=0,mi=0,Kr=0,Ks=0;const ca=zn==="right"?1:zn==="left"?0:.5,bl=Is/$i;let jc=0;for(const zo of Un){zo.trim();const Ls=zo.getMaxScale(),xa={positionedGlyphs:[],lineOffset:0};zt.positionedLines[jc]=xa;const Ma=xa.positionedGlyphs;let wa=0;if(!zo.length()){mi+=Nn,++jc;continue}const uA=kv(Gn,zo,bl);for(let ol=0;ol<zo.length();ol++){const ja=zo.getSection(ol),Na=zo.getSectionIndex(ol),Sa=zo.getCharCode(ol),Ea=ys(jn,Ni,Sa);let Ts;if(ja.imageName){if(zt.iconsInText=!0,ja.scale=ja.scale*bl,Ts=t2(ja,Ea,Ls,uA,Gn),!Ts)continue;wa=Math.max(wa,Ts.imageOffset)}else if(Ts=Tv(ja,Sa,Ea,uA,en,An),!Ts)continue;const{rect:zu,metrics:nf,baselineOffset:UA}=Ts;Ma.push({glyph:Sa,imageName:ja.imageName,x:Di,y:mi+UA+-17,vertical:Ea,scale:ja.scale,fontStack:ja.fontStack,sectionIndex:Na,metrics:nf,rect:zu}),Ea?(zt.verticalizable=!0,Di+=(ja.imageName?nf.advance:Is)*ja.scale+on):Di+=nf.advance*ja.scale+on}Ma.length!==0&&(Kr=Math.max(Di-on,Kr),R0(Ma,0,Ma.length-1,ca)),Di=0,xa.lineOffset=Math.max(wa,(Ls-1)*Is);const rl=Nn*Ls+wa;mi+=rl,Ks=Math.max(rl,Ks),++jc}const{horizontalAlign:du,verticalAlign:Vs}=Rp(xi);(function(zo,Ls,xa,Ma,wa,uA,rl,ol,ja){const Na=(Ls-xa)*wa;let Sa=0;Sa=uA!==rl?-ol*Ma- -17:-Ma*ja*rl+.5*rl;for(const Ea of zo)for(const Ts of Ea.positionedGlyphs)Ts.x+=Na,Ts.y+=Sa})(zt.positionedLines,ca,du,Vs,Kr,Ks,Nn,mi,Un.length),zt.top+=-Vs*mi,zt.bottom=zt.top+mi,zt.left+=-du*Kr,zt.right=zt.left+Kr})(Ct,u,d,b,He,D,K,W,Ae,te,Oe,Le),!(function(zt){for(const en of zt)if(en.positionedGlyphs.length!==0)return!1;return!0})(ft)&&Ct}const I0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Vm={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},ty={40:!0};function Hm(f,u,d,b,S,B){if(u.imageName){const D=b[u.imageName];return D?D.displaySize[0]*u.scale*Is/B+S:0}{const D=d[u.fontStack],K=D&&D[f];return K?K.metrics.advance*u.scale+S:0}}function Bv(f,u,d,b){const S=Math.pow(f-u,2);return b?f<u?S/2:2*S:S+Math.abs(d)*d}function Iv(f,u,d){let b=0;return f===10&&(b-=1e4),d&&(b+=150),f!==40&&f!==65288||(b+=50),u!==41&&u!==65289||(b+=50),b}function ny(f,u,d,b,S,B){let D=null,K=Bv(u,d,S,B);for(const W of b){const te=Bv(u-W.x,d,S,B)+W.badness;te<=K&&(D=W,K=te)}return{index:f,x:u,priorBreak:D,badness:K}}function k0(f){return f?k0(f.priorBreak).concat(f.index):[]}function T0(f,u,d,b,S,B){if(!f)return[];const D=[],K=(function(Ae,Oe,Pe,Le,We,He){let at=0;for(let Rt=0;Rt<Ae.length();Rt++){const ft=Ae.getSection(Rt);at+=Hm(Ae.getCharCode(Rt),ft,Le,We,Oe,He)}return at/Math.max(1,Math.ceil(at/Pe))})(f,u,d,b,S,B),W=f.text.indexOf("")>=0;let te=0;for(let Ae=0;Ae<f.length();Ae++){const Oe=f.getSection(Ae),Pe=f.getCharCode(Ae);if(I0[Pe]||(te+=Hm(Pe,Oe,b,S,u,B)),Ae<f.length()-1){const Le=!((re=Pe)<11904)&&(!!Or["CJK Compatibility Forms"](re)||!!Or["CJK Compatibility"](re)||!!Or["CJK Strokes"](re)||!!Or["CJK Symbols and Punctuation"](re)||!!Or["Enclosed CJK Letters and Months"](re)||!!Or["Halfwidth and Fullwidth Forms"](re)||!!Or["Ideographic Description Characters"](re)||!!Or["Vertical Forms"](re)||Ou.test(String.fromCodePoint(re)));(Vm[Pe]||Le||Oe.imageName||Ae!==f.length()-2&&ty[f.getCharCode(Ae+1)])&&D.push(ny(Ae+1,te,K,D,Iv(Pe,f.getCharCode(Ae+1),Le&&W),!1))}}var re;return k0(ny(f.length(),te,K,D,0,!0))}function Rp(f){let u=.5,d=.5;switch(f){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:u,verticalAlign:d}}function kv(f,u,d){const b=u.getMaxScale()*Is,{maxImageWidth:S,maxImageHeight:B}=u.getMaxImageSize(f),D=Math.max(b,B*d);return{verticalLineContentWidth:Math.max(b,S*d),horizontalLineContentHeight:D}}function iy(f){switch(f){case"top":return 0;case"center":return .5;default:return 1}}function ys(f,u,d){return!(f===s.ao.horizontal||!u&&!$h(d)||u&&(I0[d]||(b=d,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(b)))));var b}function Tv(f,u,d,b,S,B){const D=B[f.fontStack],K=(function(te,re,Ae,Oe){if(te&&te.rect)return te;const Pe=re[Ae.fontStack],Le=Pe&&Pe[Oe];return Le?{rect:null,metrics:Le.metrics}:null})(D&&D[u],S,f,u);if(K===null)return null;let W;if(d)W=b.verticalLineContentWidth-f.scale*Is;else{const te=iy(f.verticalAlign);W=(b.horizontalLineContentHeight-f.scale*Is)*te}return{rect:K.rect,metrics:K.metrics,baselineOffset:W}}function t2(f,u,d,b,S){const B=S[f.imageName];if(!B)return null;const D=B.paddedRect,K=B.displaySize,W={width:K[0],height:K[1],left:1,top:-3,advance:u?K[1]:K[0]};let te;if(u)te=b.verticalLineContentWidth-K[1]*f.scale;else{const re=iy(f.verticalAlign);te=(b.horizontalLineContentHeight-K[1]*f.scale)*re}return{rect:D,metrics:W,baselineOffset:te,imageOffset:(u?K[0]:K[1])*f.scale-Is*d}}function R0(f,u,d,b){if(b===0)return;const S=f[d],B=(f[d].x+S.metrics.advance*S.scale)*b;for(let D=u;D<=d;D++)f[D].x-=B}function ry(f,u,d){const{horizontalAlign:b,verticalAlign:S}=Rp(d),B=u[0]-f.displaySize[0]*b,D=u[1]-f.displaySize[1]*S;return{image:f,top:D,bottom:D+f.displaySize[1],left:B,right:B+f.displaySize[0]}}function _C(f){var u,d;let b=f.left,S=f.top,B=f.right-b,D=f.bottom-S;const K=(u=f.image.textFitWidth)!==null&&u!==void 0?u:"stretchOrShrink",W=(d=f.image.textFitHeight)!==null&&d!==void 0?d:"stretchOrShrink",te=(f.image.content[2]-f.image.content[0])/(f.image.content[3]-f.image.content[1]);if(W==="proportional"){if(K==="stretchOnly"&&B/D<te||K==="proportional"){const re=Math.ceil(D*te);b*=re/B,B=re}}else if(K==="proportional"&&W==="stretchOnly"&&te!==0&&B/D>te){const re=Math.ceil(B/te);S*=re/D,D=re}return{x1:b,y1:S,x2:b+B,y2:S+D}}function xC(f,u,d,b,S,B){const D=f.image;let K;if(D.content){const He=D.content,at=D.pixelRatio||1;K=[He[0]/at,He[1]/at,D.displaySize[0]-He[2]/at,D.displaySize[1]-He[3]/at]}const W=u.left*B,te=u.right*B;let re,Ae,Oe,Pe;d==="width"||d==="both"?(Pe=S[0]+W-b[3],Ae=S[0]+te+b[1]):(Pe=S[0]+(W+te-D.displaySize[0])/2,Ae=Pe+D.displaySize[0]);const Le=u.top*B,We=u.bottom*B;return d==="height"||d==="both"?(re=S[1]+Le-b[0],Oe=S[1]+We+b[2]):(re=S[1]+(Le+We-D.displaySize[1])/2,Oe=re+D.displaySize[1]),{image:D,top:re,right:Ae,bottom:Oe,left:Pe,collisionPadding:K}}const Pc=128,Uc=32640;function oy(f,u){const{expression:d}=u;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new Qr(f+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:b,interpolationType:S}=d;let B=0;for(;B<b.length&&b[B]<=f;)B++;B=Math.max(0,B-1);let D=B;for(;D<b.length&&b[D]<f+1;)D++;D=Math.min(b.length-1,D);const K=b[B],W=b[D];return d.kind==="composite"?{kind:"composite",minZoom:K,maxZoom:W,interpolationType:S}:{kind:"camera",minZoom:K,maxZoom:W,minSize:d.evaluate(new Qr(K)),maxSize:d.evaluate(new Qr(W)),interpolationType:S}}}function Zm(f,u,d){let b="never";const S=f.get(u);return S?b=S:f.get(d)&&(b="always"),b}const Rv=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function wh(f,u,d,b,S,B,D,K,W,te,re,Ae,Oe){const Pe=K?Math.min(Uc,Math.round(K[0])):0,Le=K?Math.min(Uc,Math.round(K[1])):0;f.emplaceBack(u,d,Math.round(32*b),Math.round(32*S),B,D,(Pe<<1)+(W?1:0),Le,16*te,16*re,256*Ae,256*Oe)}function TA(f,u,d){f.emplaceBack(u.x,u.y,d),f.emplaceBack(u.x,u.y,d),f.emplaceBack(u.x,u.y,d),f.emplaceBack(u.x,u.y,d)}function D0(f){for(const u of f.sections)if(Df(u.text))return!0;return!1}class Dv{constructor(u){this.layoutVertexArray=new mo,this.indexArray=new ya,this.programConfigurations=u,this.segments=new Br,this.dynamicLayoutVertexArray=new os,this.opacityVertexArray=new Uo,this.hasVisibleVertices=!1,this.placedSymbolArray=new tt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(u,d,b,S){this.isEmpty()||(b&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,pC.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,kp.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,Rv,!0),this.opacityVertexBuffer.itemSize=1),(b||S)&&this.programConfigurations.upload(u))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Xn("SymbolBuffers",Dv);class sy{constructor(u,d,b){this.layoutVertexArray=new u,this.layoutAttributes=d,this.indexArray=new b,this.segments=new Br,this.collisionVertexArray=new Jo}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,Z1.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Xn("CollisionBuffers",sy);class Dp{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((D=>D.id)),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=oy(this.zoom,d["text-size"]),this.iconSizeData=oy(this.zoom,d["icon-size"]);const b=this.layers[0].layout,S=b.get("symbol-sort-key"),B=b.get("symbol-z-order");this.canOverlap=Zm(b,"text-overlap","text-allow-overlap")!=="never"||Zm(b,"icon-overlap","icon-allow-overlap")!=="never"||b.get("text-ignore-placement")||b.get("icon-ignore-placement"),this.sortFeaturesByKey=B!=="viewport-y"&&!S.isConstant(),this.sortFeaturesByY=(B==="viewport-y"||B==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,b.get("symbol-placement")==="point"&&(this.writingModes=b.get("text-writing-mode").map((D=>s.ao[D]))),this.stateDependentLayerIds=this.layers.filter((D=>D.isStateDependent())).map((D=>D.id)),this.sourceID=u.sourceID}createArrays(){this.text=new Dv(new vh(this.layers,this.zoom,(u=>/^text/.test(u)))),this.icon=new Dv(new vh(this.layers,this.zoom,(u=>/^icon/.test(u)))),this.glyphOffsetArray=new ct,this.lineVertexArray=new gt,this.symbolInstances=new nt,this.textAnchorOffsets=new ht}calculateGlyphDependencies(u,d,b,S,B){for(let D=0;D<u.length;D++)if(d[u.charCodeAt(D)]=!0,(b||S)&&B){const K=od[u.charAt(D)];K&&(d[K.charCodeAt(0)]=!0)}}populate(u,d,b){const S=this.layers[0],B=S.layout,D=B.get("text-font"),K=B.get("text-field"),W=B.get("icon-image"),te=(K.value.kind!=="constant"||K.value.value instanceof Ps&&!K.value.value.isEmpty()||K.value.value.toString().length>0)&&(D.value.kind!=="constant"||D.value.value.length>0),re=W.value.kind!=="constant"||!!W.value.value||Object.keys(W.parameters).length>0,Ae=B.get("symbol-sort-key");if(this.features=[],!te&&!re)return;const Oe=d.iconDependencies,Pe=d.glyphDependencies,Le=d.availableImages,We=new Qr(this.zoom);for(const{feature:He,id:at,index:Rt,sourceLayerIndex:ft}of u){const Ct=S._featureFilter.needGeometry,zt=Xh(He,Ct);if(!S._featureFilter.filter(We,zt,b))continue;let en,An;if(Ct||(zt.geometry=bh(He)),te){const Un=S.getValueAndResolveTokens("text-field",zt,b,Le),Nn=Ps.factory(Un),xi=this.hasRTLText=this.hasRTLText||D0(Nn);(!xi||Ja.getRTLTextPluginStatus()==="unavailable"||xi&&Ja.isParsed())&&(en=Qf(Nn,S,zt))}if(re){const Un=S.getValueAndResolveTokens("icon-image",zt,b,Le);An=Un instanceof Wo?Un:Wo.fromString(Un)}if(!en&&!An)continue;const Gn=this.sortFeaturesByKey?Ae.evaluate(zt,{},b):void 0;if(this.features.push({id:at,text:en,icon:An,index:Rt,sourceLayerIndex:ft,geometry:zt.geometry,properties:He.properties,type:aA.types[He.type],sortKey:Gn}),An&&(Oe[An.name]=!0),en){const Un=D.evaluate(zt,{},b).join(","),Nn=B.get("text-rotation-alignment")!=="viewport"&&B.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(s.ao.vertical)>=0;for(const xi of en.sections)if(xi.image)Oe[xi.image.name]=!0;else{const zn=rc(en.toString()),jn=xi.fontStack||Un,on=Pe[jn]=Pe[jn]||{};this.calculateGlyphDependencies(xi.text,on,Nn,this.allowVerticalPlacement,zn)}}}B.get("symbol-placement")==="line"&&(this.features=(function(He){const at={},Rt={},ft=[];let Ct=0;function zt(Un){ft.push(He[Un]),Ct++}function en(Un,Nn,xi){const zn=Rt[Un];return delete Rt[Un],Rt[Nn]=zn,ft[zn].geometry[0].pop(),ft[zn].geometry[0]=ft[zn].geometry[0].concat(xi[0]),zn}function An(Un,Nn,xi){const zn=at[Nn];return delete at[Nn],at[Un]=zn,ft[zn].geometry[0].shift(),ft[zn].geometry[0]=xi[0].concat(ft[zn].geometry[0]),zn}function Gn(Un,Nn,xi){const zn=xi?Nn[0][Nn[0].length-1]:Nn[0][0];return`${Un}:${zn.x}:${zn.y}`}for(let Un=0;Un<He.length;Un++){const Nn=He[Un],xi=Nn.geometry,zn=Nn.text?Nn.text.toString():null;if(!zn){zt(Un);continue}const jn=Gn(zn,xi),on=Gn(zn,xi,!0);if(jn in Rt&&on in at&&Rt[jn]!==at[on]){const Ni=An(jn,on,xi),$i=en(jn,on,ft[Ni].geometry);delete at[jn],delete Rt[on],Rt[Gn(zn,ft[$i].geometry,!0)]=$i,ft[Ni].geometry=null}else jn in Rt?en(jn,on,xi):on in at?An(jn,on,xi):(zt(Un),at[jn]=Ct-1,Rt[on]=Ct-1)}return ft.filter((Un=>Un.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((He,at)=>He.sortKey-at.sortKey))}update(u,d,b){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,d,this.layers,{imagePositions:b}),this.icon.programConfigurations.updatePaintArrays(u,d,this.layers,{imagePositions:b}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,d){const b=this.lineVertexArray.length;if(u.segment!==void 0){let S=u.dist(d[u.segment+1]),B=u.dist(d[u.segment]);const D={};for(let K=u.segment+1;K<d.length;K++)D[K]={x:d[K].x,y:d[K].y,tileUnitDistanceFromAnchor:S},K<d.length-1&&(S+=d[K+1].dist(d[K]));for(let K=u.segment||0;K>=0;K--)D[K]={x:d[K].x,y:d[K].y,tileUnitDistanceFromAnchor:B},K>0&&(B+=d[K-1].dist(d[K]));for(let K=0;K<d.length;K++){const W=D[K];this.lineVertexArray.emplaceBack(W.x,W.y,W.tileUnitDistanceFromAnchor)}}return{lineStartIndex:b,lineLength:this.lineVertexArray.length-b}}addSymbols(u,d,b,S,B,D,K,W,te,re,Ae,Oe){const Pe=u.indexArray,Le=u.layoutVertexArray,We=u.segments.prepareSegment(4*d.length,Le,Pe,this.canOverlap?D.sortKey:void 0),He=this.glyphOffsetArray.length,at=We.vertexLength,Rt=this.allowVerticalPlacement&&K===s.ao.vertical?Math.PI/2:0,ft=D.text&&D.text.sections;for(let Ct=0;Ct<d.length;Ct++){const{tl:zt,tr:en,bl:An,br:Gn,tex:Un,pixelOffsetTL:Nn,pixelOffsetBR:xi,minFontScaleX:zn,minFontScaleY:jn,glyphOffset:on,isSDF:Ni,sectionIndex:$i}=d[Ct],Di=We.vertexLength,mi=on[1];wh(Le,W.x,W.y,zt.x,mi+zt.y,Un.x,Un.y,b,Ni,Nn.x,Nn.y,zn,jn),wh(Le,W.x,W.y,en.x,mi+en.y,Un.x+Un.w,Un.y,b,Ni,xi.x,Nn.y,zn,jn),wh(Le,W.x,W.y,An.x,mi+An.y,Un.x,Un.y+Un.h,b,Ni,Nn.x,xi.y,zn,jn),wh(Le,W.x,W.y,Gn.x,mi+Gn.y,Un.x+Un.w,Un.y+Un.h,b,Ni,xi.x,xi.y,zn,jn),TA(u.dynamicLayoutVertexArray,W,Rt),Pe.emplaceBack(Di,Di+2,Di+1),Pe.emplaceBack(Di+1,Di+2,Di+3),We.vertexLength+=4,We.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(on[0]),Ct!==d.length-1&&$i===d[Ct+1].sectionIndex||u.programConfigurations.populatePaintArrays(Le.length,D,D.index,{imagePositions:{},canonical:Oe,formattedSection:ft&&ft[$i]})}u.placedSymbolArray.emplaceBack(W.x,W.y,He,this.glyphOffsetArray.length-He,at,te,re,W.segment,b?b[0]:0,b?b[1]:0,S[0],S[1],K,0,!1,0,Ae)}_addCollisionDebugVertex(u,d,b,S,B,D){return d.emplaceBack(0,0),u.emplaceBack(b.x,b.y,S,B,Math.round(D.x),Math.round(D.y))}addCollisionDebugVertices(u,d,b,S,B,D,K){const W=B.segments.prepareSegment(4,B.layoutVertexArray,B.indexArray),te=W.vertexLength,re=B.layoutVertexArray,Ae=B.collisionVertexArray,Oe=K.anchorX,Pe=K.anchorY;this._addCollisionDebugVertex(re,Ae,D,Oe,Pe,new c(u,d)),this._addCollisionDebugVertex(re,Ae,D,Oe,Pe,new c(b,d)),this._addCollisionDebugVertex(re,Ae,D,Oe,Pe,new c(b,S)),this._addCollisionDebugVertex(re,Ae,D,Oe,Pe,new c(u,S)),W.vertexLength+=4;const Le=B.indexArray;Le.emplaceBack(te,te+1),Le.emplaceBack(te+1,te+2),Le.emplaceBack(te+2,te+3),Le.emplaceBack(te+3,te),W.primitiveLength+=4}addDebugCollisionBoxes(u,d,b,S){for(let B=u;B<d;B++){const D=this.collisionBoxArray.get(B);this.addCollisionDebugVertices(D.x1,D.y1,D.x2,D.y2,S?this.textCollisionBox:this.iconCollisionBox,D.anchorPoint,b)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new sy(ds,Xd.members,ss),this.iconCollisionBox=new sy(ds,Xd.members,ss);for(let u=0;u<this.symbolInstances.length;u++){const d=this.symbolInstances.get(u);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(u,d,b,S,B,D,K,W,te){const re={};for(let Ae=d;Ae<b;Ae++){const Oe=u.get(Ae);re.textBox={x1:Oe.x1,y1:Oe.y1,x2:Oe.x2,y2:Oe.y2,anchorPointX:Oe.anchorPointX,anchorPointY:Oe.anchorPointY},re.textFeatureIndex=Oe.featureIndex;break}for(let Ae=S;Ae<B;Ae++){const Oe=u.get(Ae);re.verticalTextBox={x1:Oe.x1,y1:Oe.y1,x2:Oe.x2,y2:Oe.y2,anchorPointX:Oe.anchorPointX,anchorPointY:Oe.anchorPointY},re.verticalTextFeatureIndex=Oe.featureIndex;break}for(let Ae=D;Ae<K;Ae++){const Oe=u.get(Ae);re.iconBox={x1:Oe.x1,y1:Oe.y1,x2:Oe.x2,y2:Oe.y2,anchorPointX:Oe.anchorPointX,anchorPointY:Oe.anchorPointY},re.iconFeatureIndex=Oe.featureIndex;break}for(let Ae=W;Ae<te;Ae++){const Oe=u.get(Ae);re.verticalIconBox={x1:Oe.x1,y1:Oe.y1,x2:Oe.x2,y2:Oe.y2,anchorPointX:Oe.anchorPointX,anchorPointY:Oe.anchorPointY},re.verticalIconFeatureIndex=Oe.featureIndex;break}return re}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const b=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,b.textBoxStartIndex,b.textBoxEndIndex,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b.iconBoxStartIndex,b.iconBoxEndIndex,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(u,d){const b=u.placedSymbolArray.get(d),S=b.vertexStartIndex+4*b.numGlyphs;for(let B=b.vertexStartIndex;B<S;B+=4)u.indexArray.emplaceBack(B,B+2,B+1),u.indexArray.emplaceBack(B+1,B+2,B+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(u),b=Math.cos(u),S=[],B=[],D=[];for(let K=0;K<this.symbolInstances.length;++K){D.push(K);const W=this.symbolInstances.get(K);S.push(0|Math.round(d*W.anchorX+b*W.anchorY)),B.push(W.featureIndex)}return D.sort(((K,W)=>S[K]-S[W]||B[W]-B[K])),D}addToSortKeyRanges(u,d){const b=this.sortKeyRanges[this.sortKeyRanges.length-1];b&&b.sortKey===d?b.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const b=this.symbolInstances.get(d);this.featureSortOrder.push(b.featureIndex),[b.rightJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.leftJustifiedTextSymbolIndex].forEach(((S,B,D)=>{S>=0&&D.indexOf(S)===B&&this.addIndicesForPlacedSymbol(this.text,S)})),b.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,b.verticalPlacedTextSymbolIndex),b.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,b.placedIconSymbolIndex),b.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,b.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Pv,Uv;Xn("SymbolBucket",Dp,{omit:["layers","collisionBoxArray","features","compareText"]}),Dp.MAX_GLYPHS=65535,Dp.addDynamicAttributes=TA;var Kv={get paint(){return Uv=Uv||new za({"icon-opacity":new fi(st.paint_symbol["icon-opacity"]),"icon-color":new fi(st.paint_symbol["icon-color"]),"icon-halo-color":new fi(st.paint_symbol["icon-halo-color"]),"icon-halo-width":new fi(st.paint_symbol["icon-halo-width"]),"icon-halo-blur":new fi(st.paint_symbol["icon-halo-blur"]),"icon-translate":new ci(st.paint_symbol["icon-translate"]),"icon-translate-anchor":new ci(st.paint_symbol["icon-translate-anchor"]),"text-opacity":new fi(st.paint_symbol["text-opacity"]),"text-color":new fi(st.paint_symbol["text-color"],{runtimeType:nr,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new fi(st.paint_symbol["text-halo-color"]),"text-halo-width":new fi(st.paint_symbol["text-halo-width"]),"text-halo-blur":new fi(st.paint_symbol["text-halo-blur"]),"text-translate":new ci(st.paint_symbol["text-translate"]),"text-translate-anchor":new ci(st.paint_symbol["text-translate-anchor"])})},get layout(){return Pv=Pv||new za({"symbol-placement":new ci(st.layout_symbol["symbol-placement"]),"symbol-spacing":new ci(st.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ci(st.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new fi(st.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ci(st.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ci(st.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ci(st.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ci(st.layout_symbol["icon-ignore-placement"]),"icon-optional":new ci(st.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ci(st.layout_symbol["icon-rotation-alignment"]),"icon-size":new fi(st.layout_symbol["icon-size"]),"icon-text-fit":new ci(st.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ci(st.layout_symbol["icon-text-fit-padding"]),"icon-image":new fi(st.layout_symbol["icon-image"]),"icon-rotate":new fi(st.layout_symbol["icon-rotate"]),"icon-padding":new fi(st.layout_symbol["icon-padding"]),"icon-keep-upright":new ci(st.layout_symbol["icon-keep-upright"]),"icon-offset":new fi(st.layout_symbol["icon-offset"]),"icon-anchor":new fi(st.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ci(st.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ci(st.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ci(st.layout_symbol["text-rotation-alignment"]),"text-field":new fi(st.layout_symbol["text-field"]),"text-font":new fi(st.layout_symbol["text-font"]),"text-size":new fi(st.layout_symbol["text-size"]),"text-max-width":new fi(st.layout_symbol["text-max-width"]),"text-line-height":new ci(st.layout_symbol["text-line-height"]),"text-letter-spacing":new fi(st.layout_symbol["text-letter-spacing"]),"text-justify":new fi(st.layout_symbol["text-justify"]),"text-radial-offset":new fi(st.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ci(st.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new fi(st.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new fi(st.layout_symbol["text-anchor"]),"text-max-angle":new ci(st.layout_symbol["text-max-angle"]),"text-writing-mode":new ci(st.layout_symbol["text-writing-mode"]),"text-rotate":new fi(st.layout_symbol["text-rotate"]),"text-padding":new ci(st.layout_symbol["text-padding"]),"text-keep-upright":new ci(st.layout_symbol["text-keep-upright"]),"text-transform":new fi(st.layout_symbol["text-transform"]),"text-offset":new fi(st.layout_symbol["text-offset"]),"text-allow-overlap":new ci(st.layout_symbol["text-allow-overlap"]),"text-overlap":new ci(st.layout_symbol["text-overlap"]),"text-ignore-placement":new ci(st.layout_symbol["text-ignore-placement"]),"text-optional":new ci(st.layout_symbol["text-optional"])})}};class Kc{constructor(u){if(u.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:no,this.defaultValue=u}evaluate(u){if(u.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(u.formattedSection))return d.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Xn("FormatSectionOverride",Kc,{omit:["defaultValue"]});class P0 extends ua{constructor(u,d){super(u,Kv,d)}recalculate(u,d){if(super.recalculate(u,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const b=this.layout.get("text-writing-mode");if(b){const S=[];for(const B of b)S.indexOf(B)<0&&S.push(B);this.layout._values["text-writing-mode"]=S}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(u,d,b,S){const B=this.layout.get(u).evaluate(d,{},b,S),D=this._unevaluatedLayout._values[u];return D.isDataDriven()||Qh(D.value)||!B?B:(function(K,W){return W.replace(/{([^{}]+)}/g,((te,re)=>K&&re in K?String(K[re]):""))})(d.properties,B)}createBucket(u){return new Dp(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const u of Kv.paint.overridableProperties){if(!P0.hasPaintOverride(this.layout,u))continue;const d=this.paint.get(u),b=new Kc(d),S=new Wh(b,d.property.specification);let B=null;B=d.value.kind==="constant"||d.value.kind==="source"?new kf("source",S):new uu("composite",S,d.value.zoomStops),this.paint._values[u]=new cu(d.property,B,d.parameters)}}_handleOverridablePaintPropertyUpdate(u,d,b){return!(!this.layout||d.isDataDriven()||b.isDataDriven())&&P0.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,d){const b=u.get("text-field"),S=Kv.paint.properties[d];let B=!1;const D=K=>{for(const W of K)if(S.overrides&&S.overrides.hasOverride(W))return void(B=!0)};if(b.value.kind==="constant"&&b.value.value instanceof Ps)D(b.value.value.sections);else if(b.value.kind==="source"||b.value.kind==="composite"){const K=te=>{B||(te instanceof Ur&&wi(te.value)===hl?D(te.value.sections):te instanceof mA?D(te.sections):te.eachChild(K))},W=b.value;W._styleExpression&&K(W._styleExpression.expression)}return B}}let Lv;var Pp={get paint(){return Lv=Lv||new za({"background-color":new ci(st.paint_background["background-color"]),"background-pattern":new Km(st.paint_background["background-pattern"]),"background-opacity":new ci(st.paint_background["background-opacity"])})}};class Ir extends ua{constructor(u,d){super(u,Pp,d)}}let ay;var Lc={get paint(){return ay=ay||new za({"raster-opacity":new ci(st.paint_raster["raster-opacity"]),"raster-hue-rotate":new ci(st.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ci(st.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ci(st.paint_raster["raster-brightness-max"]),"raster-saturation":new ci(st.paint_raster["raster-saturation"]),"raster-contrast":new ci(st.paint_raster["raster-contrast"]),"raster-resampling":new ci(st.paint_raster["raster-resampling"]),"raster-fade-duration":new ci(st.paint_raster["raster-fade-duration"])})}};class il extends ua{constructor(u,d){super(u,Lc,d)}}class U0 extends ua{constructor(u,d){super(u,{},d),this.onAdd=b=>{this.implementation.onAdd&&this.implementation.onAdd(b,b.painter.context.gl)},this.onRemove=b=>{this.implementation.onRemove&&this.implementation.onRemove(b,b.painter.context.gl)},this.implementation=u}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class $f{constructor(u){this._methodToThrottle=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const MC={once:!0},Zr=63710088e-1;class sd{constructor(u,d){if(isNaN(u)||isNaN(d))throw new Error(`Invalid LngLat object: (${u}, ${d})`);if(this.lng=+u,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new sd(Bt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){const d=Math.PI/180,b=this.lat*d,S=u.lat*d,B=Math.sin(b)*Math.sin(S)+Math.cos(b)*Math.cos(S)*Math.cos((u.lng-this.lng)*d);return Zr*Math.acos(Math.min(B,1))}static convert(u){if(u instanceof sd)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new sd(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new sd(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const K0=2*Math.PI*Zr;function ly(f){return K0*Math.cos(f*Math.PI/180)}function L0(f){return(180+f)/360}function uy(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function Fc(f,u){return f/ly(u)}function Up(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}function F0(f,u){return f*ly(Up(u))}class ks{constructor(u,d,b=0){this.x=+u,this.y=+d,this.z=+b}static fromLngLat(u,d=0){const b=sd.convert(u);return new ks(L0(b.lng),uy(b.lat),Fc(d,b.lat))}toLngLat(){return new sd(360*this.x-180,Up(this.y))}toAltitude(){return F0(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/K0*(u=Up(this.y),1/Math.cos(u*Math.PI/180));var u}}function ba(f,u,d){var b=2*Math.PI*6378137/256/Math.pow(2,d);return[f*b-2*Math.PI*6378137/2,u*b-2*Math.PI*6378137/2]}class cy{constructor(u,d,b){if(!(function(S,B,D){return!(S<0||S>25||D<0||D>=Math.pow(2,S)||B<0||B>=Math.pow(2,S))})(u,d,b))throw new Error(`x=${d}, y=${b}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=d,this.y=b,this.key=Fo(0,u,u,d,b)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,d,b){const S=(D=this.y,K=this.z,W=ba(256*(B=this.x),256*(D=Math.pow(2,K)-D-1),K),te=ba(256*(B+1),256*(D+1),K),W[0]+","+W[1]+","+te[0]+","+te[1]);var B,D,K,W,te;const re=(function(Ae,Oe,Pe){let Le,We="";for(let He=Ae;He>0;He--)Le=1<<He-1,We+=(Oe&Le?1:0)+(Pe&Le?2:0);return We})(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(b==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,re).replace(/{bbox-epsg-3857}/g,S)}isChildOf(u){const d=this.z-u.z;return d>0&&u.x===this.x>>d&&u.y===this.y>>d}getTilePoint(u){const d=Math.pow(2,this.z);return new c((u.x*d-this.x)*dt,(u.y*d-this.y)*dt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Fv{constructor(u,d){this.wrap=u,this.canonical=d,this.key=Fo(u,d.z,d.z,d.x,d.y)}}class zc{constructor(u,d,b,S,B){if(this.terrainRttPosMatrix32f=null,u<b)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = ${b}`);this.overscaledZ=u,this.wrap=d,this.canonical=new cy(b,+S,+B),this.key=Fo(d,u,b,S,B)}clone(){return new zc(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-u;return u>this.canonical.z?new zc(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new zc(u,this.wrap,u,this.canonical.x>>d,this.canonical.y>>d)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(u,d){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const b=this.canonical.z-u;return u>this.canonical.z?Fo(this.wrap*+d,u,this.canonical.z,this.canonical.x,this.canonical.y):Fo(this.wrap*+d,u,u,this.canonical.x>>b,this.canonical.y>>b)}isChildOf(u){if(u.wrap!==this.wrap||this.overscaledZ-u.overscaledZ<=0)return!1;if(u.overscaledZ===0)return this.overscaledZ>0;const d=this.canonical.z-u.canonical.z;return!(d<0)&&u.canonical.x===this.canonical.x>>d&&u.canonical.y===this.canonical.y>>d}children(u){if(this.overscaledZ>=u)return[new zc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,b=2*this.canonical.x,S=2*this.canonical.y;return[new zc(d,this.wrap,d,b,S),new zc(d,this.wrap,d,b+1,S),new zc(d,this.wrap,d,b,S+1),new zc(d,this.wrap,d,b+1,S+1)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new zc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new zc(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Fv(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(u){return this.canonical.getTilePoint(new ks(u.x-this.wrap,u.y))}}function Fo(f,u,d,b,S){(f*=2)<0&&(f=-1*f-1);const B=1<<d;return(B*B*f+B*S+b).toString(36)+d.toString(36)+u.toString(36)}function Kp(f,u){return u?f.properties[u]:f.id}Xn("CanonicalTileID",cy),Xn("OverscaledTileID",zc,{omit:["terrainRttPosMatrix32f"]});class Ca{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(u){return this.minX=Math.min(this.minX,u.x),this.minY=Math.min(this.minY,u.y),this.maxX=Math.max(this.maxX,u.x),this.maxY=Math.max(this.maxY,u.y),this}expandBy(u){return this.minX-=u,this.minY-=u,this.maxX+=u,this.maxY+=u,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(u){return this.expandBy(-u)}map(u){const d=new Ca;return d.extend(u(new c(this.minX,this.minY))),d.extend(u(new c(this.maxX,this.minY))),d.extend(u(new c(this.minX,this.maxY))),d.extend(u(new c(this.maxX,this.maxY))),d}static fromPoints(u){const d=new Ca;for(const b of u)d.extend(b);return d}contains(u){return u.x>=this.minX&&u.x<=this.maxX&&u.y>=this.minY&&u.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(u){return!this.empty()&&!u.empty()&&u.minX>=this.minX&&u.maxX<=this.maxX&&u.minY>=this.minY&&u.maxY<=this.maxY}intersects(u){return!this.empty()&&!u.empty()&&u.minX<=this.maxX&&u.maxX>=this.minX&&u.minY<=this.maxY&&u.maxY>=this.minY}}class wC{constructor(u){this._stringToNumber={},this._numberToString=[];for(let d=0;d<u.length;d++){const b=u[d];this._stringToNumber[b]=d,this._numberToString[d]=b}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[u]}}class Ay{constructor(u,d,b,S,B){this.type="Feature",this._vectorTileFeature=u,u._z=d,u._x=b,u._y=S,this.properties=u.properties,this.id=B}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){const u={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(u[d]=this[d]);return u}}class Xm{constructor(u,d){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new ic(dt,16,0),this.grid3D=new ic(dt,16,0),this.featureIndexArray=new Qt,this.promoteId=d}insert(u,d,b,S,B,D){const K=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(b,S,B);const W=D?this.grid3D:this.grid;for(let te=0;te<d.length;te++){const re=d[te],Ae=[1/0,1/0,-1/0,-1/0];for(let Oe=0;Oe<re.length;Oe++){const Pe=re[Oe];Ae[0]=Math.min(Ae[0],Pe.x),Ae[1]=Math.min(Ae[1],Pe.y),Ae[2]=Math.max(Ae[2],Pe.x),Ae[3]=Math.max(Ae[3],Pe.y)}Ae[0]<dt&&Ae[1]<dt&&Ae[2]>=0&&Ae[3]>=0&&W.insert(K,Ae[0],Ae[1],Ae[2],Ae[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new xv(new Tp(this.rawTileData)).layers,this.sourceLayerCoder=new wC(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,d,b,S){this.loadVTLayers();const B=u.params,D=dt/u.tileSize/u.scale,K=Gl(B.filter,B.globalState),W=u.queryGeometry,te=u.queryPadding*D,re=Ca.fromPoints(W),Ae=this.grid.query(re.minX-te,re.minY-te,re.maxX+te,re.maxY+te),Oe=Ca.fromPoints(u.cameraQueryGeometry).expandBy(te),Pe=this.grid3D.query(Oe.minX,Oe.minY,Oe.maxX,Oe.maxY,((He,at,Rt,ft)=>(function(Ct,zt,en,An,Gn){for(const Nn of Ct)if(zt<=Nn.x&&en<=Nn.y&&An>=Nn.x&&Gn>=Nn.y)return!0;const Un=[new c(zt,en),new c(zt,Gn),new c(An,Gn),new c(An,en)];if(Ct.length>2){for(const Nn of Un)if(Lf(Ct,Nn))return!0}for(let Nn=0;Nn<Ct.length-1;Nn++)if(l0(Ct[Nn],Ct[Nn+1],Un))return!0;return!1})(u.cameraQueryGeometry,He-te,at-te,Rt+te,ft+te)));for(const He of Pe)Ae.push(He);Ae.sort(zv);const Le={};let We;for(let He=0;He<Ae.length;He++){const at=Ae[He];if(at===We)continue;We=at;const Rt=this.featureIndexArray.get(at);let ft=null;this.loadMatchingFeature(Le,Rt.bucketIndex,Rt.sourceLayerIndex,Rt.featureIndex,K,B.layers,B.availableImages,d,b,S,((Ct,zt,en)=>(ft||(ft=bh(Ct)),zt.queryIntersectsFeature({queryGeometry:W,feature:Ct,featureState:en,geometry:ft,zoom:this.z,transform:u.transform,pixelsToTileUnits:D,pixelPosMatrix:u.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:u.getElevation}))))}return Le}loadMatchingFeature(u,d,b,S,B,D,K,W,te,re,Ae){const Oe=this.bucketLayerIDs[d];if(D&&!Oe.some((He=>D.has(He))))return;const Pe=this.sourceLayerCoder.decode(b),Le=this.vtLayers[Pe].feature(S);if(B.needGeometry){const He=Xh(Le,!0);if(!B.filter(new Qr(this.tileID.overscaledZ),He,this.tileID.canonical))return}else if(!B.filter(new Qr(this.tileID.overscaledZ),Le))return;const We=this.getId(Le,Pe);for(let He=0;He<Oe.length;He++){const at=Oe[He];if(D&&!D.has(at))continue;const Rt=W[at];if(!Rt)continue;let ft={};We&&re&&(ft=re.getState(Rt.sourceLayer||"_geojsonTileLayer",We));const Ct=Ke({},te[at]);Ct.paint=Jm(Ct.paint,Rt.paint,Le,ft,K),Ct.layout=Jm(Ct.layout,Rt.layout,Le,ft,K);const zt=!Ae||Ae(Le,Rt,ft);if(!zt)continue;const en=new Ay(Le,this.z,this.x,this.y,We);en.layer=Ct;let An=u[at];An===void 0&&(An=u[at]=[]),An.push({featureIndex:S,feature:en,intersectionZ:zt})}}lookupSymbolFeatures(u,d,b,S,B,D,K,W){const te={};this.loadVTLayers();const re=Gl(B.filterSpec,B.globalState);for(const Ae of u)this.loadMatchingFeature(te,b,S,Ae,re,D,K,W,d);return te}hasLayer(u){for(const d of this.bucketLayerIDs)for(const b of d)if(u===b)return!0;return!1}getId(u,d){var b;let S=u.id;return this.promoteId&&(S=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof S=="boolean"&&(S=Number(S)),S===void 0&&(!((b=u.properties)===null||b===void 0)&&b.cluster)&&this.promoteId&&(S=Number(u.properties.cluster_id))),S}}function Jm(f,u,d,b,S){return Se(f,((B,D)=>{const K=u instanceof Iu?u.get(D):null;return K&&K.evaluate?K.evaluate(d,b,S):K}))}function zv(f,u){return u-f}function eg(f,u,d,b,S){const B=[];for(let D=0;D<f.length;D++){const K=f[D];let W;for(let te=0;te<K.length-1;te++){let re=K[te],Ae=K[te+1];re.x<u&&Ae.x<u||(re.x<u?re=new c(u,re.y+(u-re.x)/(Ae.x-re.x)*(Ae.y-re.y))._round():Ae.x<u&&(Ae=new c(u,re.y+(u-re.x)/(Ae.x-re.x)*(Ae.y-re.y))._round()),re.y<d&&Ae.y<d||(re.y<d?re=new c(re.x+(d-re.y)/(Ae.y-re.y)*(Ae.x-re.x),d)._round():Ae.y<d&&(Ae=new c(re.x+(d-re.y)/(Ae.y-re.y)*(Ae.x-re.x),d)._round()),re.x>=b&&Ae.x>=b||(re.x>=b?re=new c(b,re.y+(b-re.x)/(Ae.x-re.x)*(Ae.y-re.y))._round():Ae.x>=b&&(Ae=new c(b,re.y+(b-re.x)/(Ae.x-re.x)*(Ae.y-re.y))._round()),re.y>=S&&Ae.y>=S||(re.y>=S?re=new c(re.x+(S-re.y)/(Ae.y-re.y)*(Ae.x-re.x),S)._round():Ae.y>=S&&(Ae=new c(re.x+(S-re.y)/(Ae.y-re.y)*(Ae.x-re.x),S)._round()),W&&re.equals(W[W.length-1])||(W=[re],B.push(W)),W.push(Ae)))))}}return B}Xn("FeatureIndex",Xm,{omit:["rawTileData","sourceLayerCoder"]});class RA extends c{constructor(u,d,b,S){super(u,d),this.angle=b,S!==void 0&&(this.segment=S)}clone(){return new RA(this.x,this.y,this.angle,this.segment)}}function ac(f,u,d,b,S){if(u.segment===void 0||d===0)return!0;let B=u,D=u.segment+1,K=0;for(;K>-d/2;){if(D--,D<0)return!1;K-=f[D].dist(B),B=f[D]}K+=f[D].dist(f[D+1]),D++;const W=[];let te=0;for(;K<d/2;){const re=f[D],Ae=f[D+1];if(!Ae)return!1;let Oe=f[D-1].angleTo(re)-re.angleTo(Ae);for(Oe=Math.abs((Oe+3*Math.PI)%(2*Math.PI)-Math.PI),W.push({distance:K,angleDelta:Oe}),te+=Oe;K-W[0].distance>b;)te-=W.shift().angleDelta;if(te>S)return!1;D++,K+=re.dist(Ae)}return!0}function ef(f){let u=0;for(let d=0;d<f.length-1;d++)u+=f[d].dist(f[d+1]);return u}function hy(f,u,d){return f?.6*u*d:0}function SC(f,u){return Math.max(f?f.right-f.left:0,u?u.right-u.left:0)}function EC(f,u,d,b,S,B){const D=hy(d,S,B),K=SC(d,b)*B;let W=0;const te=ef(f)/2;for(let re=0;re<f.length-1;re++){const Ae=f[re],Oe=f[re+1],Pe=Ae.dist(Oe);if(W+Pe>te){const Le=(te-W)/Pe,We=Zc.number(Ae.x,Oe.x,Le),He=Zc.number(Ae.y,Oe.y,Le),at=new RA(We,He,Oe.angleTo(Ae),re);return at._round(),!D||ac(f,at,K,D,u)?at:void 0}W+=Pe}}function n2(f,u,d,b,S,B,D,K,W){const te=hy(b,B,D),re=SC(b,S),Ae=re*D,Oe=f[0].x===0||f[0].x===W||f[0].y===0||f[0].y===W;return u-Ae<u/4&&(u=Ae+u/4),jv(f,Oe?u/2*K%u:(re/2+2*B)*D*K%u,u,te,d,Ae,Oe,!1,W)}function jv(f,u,d,b,S,B,D,K,W){const te=B/2,re=ef(f);let Ae=0,Oe=u-d,Pe=[];for(let Le=0;Le<f.length-1;Le++){const We=f[Le],He=f[Le+1],at=We.dist(He),Rt=He.angleTo(We);for(;Oe+d<Ae+at;){Oe+=d;const ft=(Oe-Ae)/at,Ct=Zc.number(We.x,He.x,ft),zt=Zc.number(We.y,He.y,ft);if(Ct>=0&&Ct<W&&zt>=0&&zt<W&&Oe-te>=0&&Oe+te<=re){const en=new RA(Ct,zt,Rt,Le);en._round(),b&&!ac(f,en,B,b,S)||Pe.push(en)}}Ae+=at}return K||Pe.length||D||(Pe=jv(f,Ae/2,d,b,S,B,D,!0,W)),Pe}function Nv(f,u,d,b){const S=[],B=f.image,D=B.pixelRatio,K=B.paddedRect.w-2,W=B.paddedRect.h-2;let te={x1:f.left,y1:f.top,x2:f.right,y2:f.bottom};const re=B.stretchX||[[0,K]],Ae=B.stretchY||[[0,W]],Oe=(on,Ni)=>on+Ni[1]-Ni[0],Pe=re.reduce(Oe,0),Le=Ae.reduce(Oe,0),We=K-Pe,He=W-Le;let at=0,Rt=Pe,ft=0,Ct=Le,zt=0,en=We,An=0,Gn=He;if(B.content&&b){const on=B.content,Ni=on[2]-on[0],$i=on[3]-on[1];(B.textFitWidth||B.textFitHeight)&&(te=_C(f)),at=DA(re,0,on[0]),ft=DA(Ae,0,on[1]),Rt=DA(re,on[0],on[2]),Ct=DA(Ae,on[1],on[3]),zt=on[0]-at,An=on[1]-ft,en=Ni-Rt,Gn=$i-Ct}const Un=te.x1,Nn=te.y1,xi=te.x2-Un,zn=te.y2-Nn,jn=(on,Ni,$i,Di)=>{const mi=tg(on.stretch-at,Rt,xi,Un),Kr=Lu(on.fixed-zt,en,on.stretch,Pe),Ks=tg(Ni.stretch-ft,Ct,zn,Nn),ca=Lu(Ni.fixed-An,Gn,Ni.stretch,Le),bl=tg($i.stretch-at,Rt,xi,Un),jc=Lu($i.fixed-zt,en,$i.stretch,Pe),du=tg(Di.stretch-ft,Ct,zn,Nn),Vs=Lu(Di.fixed-An,Gn,Di.stretch,Le),zo=new c(mi,Ks),Ls=new c(bl,Ks),xa=new c(bl,du),Ma=new c(mi,du),wa=new c(Kr/D,ca/D),uA=new c(jc/D,Vs/D),rl=u*Math.PI/180;if(rl){const Na=Math.sin(rl),Sa=Math.cos(rl),Ea=[Sa,-Na,Na,Sa];zo._matMult(Ea),Ls._matMult(Ea),Ma._matMult(Ea),xa._matMult(Ea)}const ol=on.stretch+on.fixed,ja=Ni.stretch+Ni.fixed;return{tl:zo,tr:Ls,bl:Ma,br:xa,tex:{x:B.paddedRect.x+1+ol,y:B.paddedRect.y+1+ja,w:$i.stretch+$i.fixed-ol,h:Di.stretch+Di.fixed-ja},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:wa,pixelOffsetBR:uA,minFontScaleX:en/D/xi,minFontScaleY:Gn/D/zn,isSDF:d}};if(b&&(B.stretchX||B.stretchY)){const on=cr(re,We,Pe),Ni=cr(Ae,He,Le);for(let $i=0;$i<on.length-1;$i++){const Di=on[$i],mi=on[$i+1];for(let Kr=0;Kr<Ni.length-1;Kr++)S.push(jn(Di,Ni[Kr],mi,Ni[Kr+1]))}}else S.push(jn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:K+1},{fixed:0,stretch:W+1}));return S}function DA(f,u,d){let b=0;for(const S of f)b+=Math.max(u,Math.min(d,S[1]))-Math.max(u,Math.min(d,S[0]));return b}function cr(f,u,d){const b=[{fixed:-1,stretch:0}];for(const[S,B]of f){const D=b[b.length-1];b.push({fixed:S-D.stretch,stretch:D.stretch}),b.push({fixed:S-D.stretch,stretch:D.stretch+(B-S)})}return b.push({fixed:u+1,stretch:d}),b}function tg(f,u,d,b){return f/u*d+b}function Lu(f,u,d,b){return f-u*d/b}Xn("Anchor",RA);class Lp{constructor(u,d,b,S,B,D,K,W,te,re){var Ae;if(this.boxStartIndex=u.length,te){let Oe=D.top,Pe=D.bottom;const Le=D.collisionPadding;Le&&(Oe-=Le[1],Pe+=Le[3]);let We=Pe-Oe;We>0&&(We=Math.max(10,We),this.circleDiameter=We)}else{const Oe=!((Ae=D.image)===null||Ae===void 0)&&Ae.content&&(D.image.textFitWidth||D.image.textFitHeight)?_C(D):{x1:D.left,y1:D.top,x2:D.right,y2:D.bottom};Oe.y1=Oe.y1*K-W[0],Oe.y2=Oe.y2*K+W[2],Oe.x1=Oe.x1*K-W[3],Oe.x2=Oe.x2*K+W[1];const Pe=D.collisionPadding;if(Pe&&(Oe.x1-=Pe[0]*K,Oe.y1-=Pe[1]*K,Oe.x2+=Pe[2]*K,Oe.y2+=Pe[3]*K),re){const Le=new c(Oe.x1,Oe.y1),We=new c(Oe.x2,Oe.y1),He=new c(Oe.x1,Oe.y2),at=new c(Oe.x2,Oe.y2),Rt=re*Math.PI/180;Le._rotate(Rt),We._rotate(Rt),He._rotate(Rt),at._rotate(Rt),Oe.x1=Math.min(Le.x,We.x,He.x,at.x),Oe.x2=Math.max(Le.x,We.x,He.x,at.x),Oe.y1=Math.min(Le.y,We.y,He.y,at.y),Oe.y2=Math.max(Le.y,We.y,He.y,at.y)}u.emplaceBack(d.x,d.y,Oe.x1,Oe.y1,Oe.x2,Oe.y2,b,S,B)}this.boxEndIndex=u.length}}class i2{constructor(u=[],d=(b,S)=>b<S?-1:b>S?1:0){if(this.data=u,this.length=this.data.length,this.compare=d,this.length>0)for(let b=(this.length>>1)-1;b>=0;b--)this._down(b)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],d=this.data.pop();return--this.length>0&&(this.data[0]=d,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:d,compare:b}=this,S=d[u];for(;u>0;){const B=u-1>>1,D=d[B];if(b(S,D)>=0)break;d[u]=D,u=B}d[u]=S}_down(u){const{data:d,compare:b}=this,S=this.length>>1,B=d[u];for(;u<S;){let D=1+(u<<1);const K=D+1;if(K<this.length&&b(d[K],d[D])<0&&(D=K),b(d[D],B)>=0)break;d[u]=d[D],u=D}d[u]=B}}function ls(f,u=1,d=!1){const b=Ca.fromPoints(f[0]),S=Math.min(b.width(),b.height());let B=S/2;const D=new i2([],OC),{minX:K,minY:W,maxX:te,maxY:re}=b;if(S===0)return new c(K,W);for(let Pe=K;Pe<te;Pe+=S)for(let Le=W;Le<re;Le+=S)D.push(new tf(Pe+B,Le+B,B,f));let Ae=(function(Pe){let Le=0,We=0,He=0;const at=Pe[0];for(let Rt=0,ft=at.length,Ct=ft-1;Rt<ft;Ct=Rt++){const zt=at[Rt],en=at[Ct],An=zt.x*en.y-en.x*zt.y;We+=(zt.x+en.x)*An,He+=(zt.y+en.y)*An,Le+=3*An}return new tf(We/Le,He/Le,0,Pe)})(f),Oe=D.length;for(;D.length;){const Pe=D.pop();(Pe.d>Ae.d||!Ae.d)&&(Ae=Pe,d&&console.log("found best %d after %d probes",Math.round(1e4*Pe.d)/1e4,Oe)),Pe.max-Ae.d<=u||(B=Pe.h/2,D.push(new tf(Pe.p.x-B,Pe.p.y-B,B,f)),D.push(new tf(Pe.p.x+B,Pe.p.y-B,B,f)),D.push(new tf(Pe.p.x-B,Pe.p.y+B,B,f)),D.push(new tf(Pe.p.x+B,Pe.p.y+B,B,f)),Oe+=4)}return d&&(console.log(`num probes: ${Oe}`),console.log(`best distance: ${Ae.d}`)),Ae.p}function OC(f,u){return u.max-f.max}function tf(f,u,d,b){this.p=new c(f,u),this.h=d,this.d=(function(S,B){let D=!1,K=1/0;for(let W=0;W<B.length;W++){const te=B[W];for(let re=0,Ae=te.length,Oe=Ae-1;re<Ae;Oe=re++){const Pe=te[re],Le=te[Oe];Pe.y>S.y!=Le.y>S.y&&S.x<(Le.x-Pe.x)*(S.y-Pe.y)/(Le.y-Pe.y)+Pe.x&&(D=!D),K=Math.min(K,Ch(S,Pe,Le))}}return(D?1:-1)*Math.sqrt(K)})(this.p,b),this.max=this.d+this.h*Math.SQRT2}var _a;s.aE=void 0,(_a=s.aE||(s.aE={}))[_a.center=1]="center",_a[_a.left=2]="left",_a[_a.right=3]="right",_a[_a.top=4]="top",_a[_a.bottom=5]="bottom",_a[_a["top-left"]=6]="top-left",_a[_a["top-right"]=7]="top-right",_a[_a["bottom-left"]=8]="bottom-left",_a[_a["bottom-right"]=9]="bottom-right";const Gv=Number.POSITIVE_INFINITY;function lA(f,u){return u[1]!==Gv?(function(d,b,S){let B=0,D=0;switch(b=Math.abs(b),S=Math.abs(S),d){case"top-right":case"top-left":case"top":D=S-7;break;case"bottom-right":case"bottom-left":case"bottom":D=7-S}switch(d){case"top-right":case"bottom-right":case"right":B=-b;break;case"top-left":case"bottom-left":case"left":B=b}return[B,D]})(f,u[0],u[1]):(function(d,b){let S=0,B=0;b<0&&(b=0);const D=b/Math.SQRT2;switch(d){case"top-right":case"top-left":B=D-7;break;case"bottom-right":case"bottom-left":B=7-D;break;case"bottom":B=7-b;break;case"top":B=b-7}switch(d){case"top-right":case"bottom-right":S=-D;break;case"top-left":case"bottom-left":S=D;break;case"left":S=b;break;case"right":S=-b}return[S,B]})(f,u[0])}function dy(f,u,d){var b;const S=f.layout,B=(b=S.get("text-variable-anchor-offset"))===null||b===void 0?void 0:b.evaluate(u,{},d);if(B){const K=B.values,W=[];for(let te=0;te<K.length;te+=2){const re=W[te]=K[te],Ae=K[te+1].map((Oe=>Oe*Is));re.startsWith("top")?Ae[1]-=7:re.startsWith("bottom")&&(Ae[1]+=7),W[te+1]=Ae}return new Zo(W)}const D=S.get("text-variable-anchor");if(D){let K;K=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[S.get("text-radial-offset").evaluate(u,{},d)*Is,Gv]:S.get("text-offset").evaluate(u,{},d).map((te=>te*Is));const W=[];for(const te of D)W.push(te,lA(te,K));return new Zo(W)}return null}function fy(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function BC(f,u,d,b,S,B,D,K,W,te,re,Ae){let Oe=B.textMaxSize.evaluate(u,{});Oe===void 0&&(Oe=D);const Pe=f.layers[0].layout,Le=Pe.get("icon-offset").evaluate(u,{},re),We=ng(d.horizontal),He=D/24,at=f.tilePixelRatio*He,Rt=f.tilePixelRatio*Oe/24,ft=f.tilePixelRatio*K,Ct=f.tilePixelRatio*Pe.get("symbol-spacing"),zt=Pe.get("text-padding")*f.tilePixelRatio,en=(function($i,Di,mi,Kr=1){const Ks=$i.get("icon-padding").evaluate(Di,{},mi),ca=Ks&&Ks.values;return[ca[0]*Kr,ca[1]*Kr,ca[2]*Kr,ca[3]*Kr]})(Pe,u,re,f.tilePixelRatio),An=Pe.get("text-max-angle")/180*Math.PI,Gn=Pe.get("text-rotation-alignment")!=="viewport"&&Pe.get("symbol-placement")!=="point",Un=Pe.get("icon-rotation-alignment")==="map"&&Pe.get("symbol-placement")!=="point",Nn=Pe.get("symbol-placement"),xi=Ct/2,zn=Pe.get("icon-text-fit");let jn;b&&zn!=="none"&&(f.allowVerticalPlacement&&d.vertical&&(jn=xC(b,d.vertical,zn,Pe.get("icon-text-fit-padding"),Le,He)),We&&(b=xC(b,We,zn,Pe.get("icon-text-fit-padding"),Le,He)));const on=re?Ae.line.getGranularityForZoomLevel(re.z):1,Ni=($i,Di)=>{Di.x<0||Di.x>=dt||Di.y<0||Di.y>=dt||(function(mi,Kr,Ks,ca,bl,jc,du,Vs,zo,Ls,xa,Ma,wa,uA,rl,ol,ja,Na,Sa,Ea,Ts,zu,nf,UA,rg){const Cl=mi.addToLineVertexArray(Kr,Ks);let Eh,rf,Fp,og,G0=0,A=0,g=0,_=0,O=-1,N=-1;const J={};let Me=Ec("");if(mi.allowVerticalPlacement&&ca.vertical){const hr=Vs.layout.get("text-rotate").evaluate(Ts,{},UA)+90;Fp=new Lp(zo,Kr,Ls,xa,Ma,ca.vertical,wa,uA,rl,hr),du&&(og=new Lp(zo,Kr,Ls,xa,Ma,du,ja,Na,rl,hr))}if(bl){const hr=Vs.layout.get("icon-rotate").evaluate(Ts,{}),Ai=Vs.layout.get("icon-text-fit")!=="none",vr=Nv(bl,hr,nf,Ai),_r=du?Nv(du,hr,nf,Ai):void 0;rf=new Lp(zo,Kr,Ls,xa,Ma,bl,ja,Na,!1,hr),G0=4*vr.length;const lo=mi.iconSizeData;let fu=null;lo.kind==="source"?(fu=[Pc*Vs.layout.get("icon-size").evaluate(Ts,{})],fu[0]>Uc&&pt(`${mi.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):lo.kind==="composite"&&(fu=[Pc*zu.compositeIconSizes[0].evaluate(Ts,{},UA),Pc*zu.compositeIconSizes[1].evaluate(Ts,{},UA)],(fu[0]>Uc||fu[1]>Uc)&&pt(`${mi.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),mi.addSymbols(mi.icon,vr,fu,Ea,Sa,Ts,s.ao.none,Kr,Cl.lineStartIndex,Cl.lineLength,-1,UA),O=mi.icon.placedSymbolArray.length-1,_r&&(A=4*_r.length,mi.addSymbols(mi.icon,_r,fu,Ea,Sa,Ts,s.ao.vertical,Kr,Cl.lineStartIndex,Cl.lineLength,-1,UA),N=mi.icon.placedSymbolArray.length-1)}const Ye=Object.keys(ca.horizontal);for(const hr of Ye){const Ai=ca.horizontal[hr];if(!Eh){Me=Ec(Ai.text);const _r=Vs.layout.get("text-rotate").evaluate(Ts,{},UA);Eh=new Lp(zo,Kr,Ls,xa,Ma,Ai,wa,uA,rl,_r)}const vr=Ai.positionedLines.length===1;if(g+=Wv(mi,Kr,Ai,jc,Vs,rl,Ts,ol,Cl,ca.vertical?s.ao.horizontal:s.ao.horizontalOnly,vr?Ye:[hr],J,O,zu,UA),vr)break}ca.vertical&&(_+=Wv(mi,Kr,ca.vertical,jc,Vs,rl,Ts,ol,Cl,s.ao.vertical,["vertical"],J,N,zu,UA));const _t=Eh?Eh.boxStartIndex:mi.collisionBoxArray.length,$t=Eh?Eh.boxEndIndex:mi.collisionBoxArray.length,ln=Fp?Fp.boxStartIndex:mi.collisionBoxArray.length,mn=Fp?Fp.boxEndIndex:mi.collisionBoxArray.length,Xt=rf?rf.boxStartIndex:mi.collisionBoxArray.length,rn=rf?rf.boxEndIndex:mi.collisionBoxArray.length,ki=og?og.boxStartIndex:mi.collisionBoxArray.length,ir=og?og.boxEndIndex:mi.collisionBoxArray.length;let ao=-1;const Lt=(hr,Ai)=>hr&&hr.circleDiameter?Math.max(hr.circleDiameter,Ai):Ai;ao=Lt(Eh,ao),ao=Lt(Fp,ao),ao=Lt(rf,ao),ao=Lt(og,ao);const kt=ao>-1?1:0;kt&&(ao*=rg/Is),mi.glyphOffsetArray.length>=Dp.MAX_GLYPHS&&pt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ts.sortKey!==void 0&&mi.addToSortKeyRanges(mi.symbolInstances.length,Ts.sortKey);const qt=dy(Vs,Ts,UA),[dn,er]=(function(hr,Ai){const vr=hr.length,_r=Ai?.values;if(_r?.length>0)for(let lo=0;lo<_r.length;lo+=2){const fu=_r[lo+1];hr.emplaceBack(s.aE[_r[lo]],fu[0],fu[1])}return[vr,hr.length]})(mi.textAnchorOffsets,qt);mi.symbolInstances.emplaceBack(Kr.x,Kr.y,J.right>=0?J.right:-1,J.center>=0?J.center:-1,J.left>=0?J.left:-1,J.vertical||-1,O,N,Me,_t,$t,ln,mn,Xt,rn,ki,ir,Ls,g,_,G0,A,kt,0,wa,ao,dn,er)})(f,Di,$i,d,b,S,jn,f.layers[0],f.collisionBoxArray,u.index,u.sourceLayerIndex,f.index,at,[zt,zt,zt,zt],Gn,W,ft,en,Un,Le,u,B,te,re,D)};if(Nn==="line")for(const $i of eg(u.geometry,0,0,dt,dt)){const Di=yl($i,on),mi=n2(Di,Ct,An,d.vertical||We,b,24,Rt,f.overscaling,dt);for(const Kr of mi)We&&PA(f,We.text,xi,Kr)||Ni(Di,Kr)}else if(Nn==="line-center"){for(const $i of u.geometry)if($i.length>1){const Di=yl($i,on),mi=EC(Di,An,d.vertical||We,b,24,Rt);mi&&Ni(Di,mi)}}else if(u.type==="Polygon")for(const $i of Nh(u.geometry,0)){const Di=ls($i,16);Ni(yl($i[0],on,!0),new RA(Di.x,Di.y,0))}else if(u.type==="LineString")for(const $i of u.geometry){const Di=yl($i,on);Ni(Di,new RA(Di[0].x,Di[0].y,0))}else if(u.type==="Point")for(const $i of u.geometry)for(const Di of $i)Ni([Di],new RA(Di.x,Di.y,0))}function Wv(f,u,d,b,S,B,D,K,W,te,re,Ae,Oe,Pe,Le){const We=(function(Rt,ft,Ct,zt,en,An,Gn,Un){const Nn=zt.layout.get("text-rotate").evaluate(An,{})*Math.PI/180,xi=[];for(const zn of ft.positionedLines)for(const jn of zn.positionedGlyphs){if(!jn.rect)continue;const on=jn.rect||{};let Ni=4,$i=!0,Di=1,mi=0;const Kr=(en||Un)&&jn.vertical,Ks=jn.metrics.advance*jn.scale/2;if(Un&&ft.verticalizable&&(mi=zn.lineOffset/2-(jn.imageName?-(Is-jn.metrics.width*jn.scale)/2:(jn.scale-1)*Is)),jn.imageName){const Na=Gn[jn.imageName];$i=Na.sdf,Di=Na.pixelRatio,Ni=1/Di}const ca=en?[jn.x+Ks,jn.y]:[0,0];let bl=en?[0,0]:[jn.x+Ks+Ct[0],jn.y+Ct[1]-mi],jc=[0,0];Kr&&(jc=bl,bl=[0,0]);const du=jn.metrics.isDoubleResolution?2:1,Vs=(jn.metrics.left-Ni)*jn.scale-Ks+bl[0],zo=(-jn.metrics.top-Ni)*jn.scale+bl[1],Ls=Vs+on.w/du*jn.scale/Di,xa=zo+on.h/du*jn.scale/Di,Ma=new c(Vs,zo),wa=new c(Ls,zo),uA=new c(Vs,xa),rl=new c(Ls,xa);if(Kr){const Na=new c(-Ks,Ks- -17),Sa=-Math.PI/2,Ea=12-Ks,Ts=new c(22-Ea,-(jn.imageName?Ea:0)),zu=new c(...jc);Ma._rotateAround(Sa,Na)._add(Ts)._add(zu),wa._rotateAround(Sa,Na)._add(Ts)._add(zu),uA._rotateAround(Sa,Na)._add(Ts)._add(zu),rl._rotateAround(Sa,Na)._add(Ts)._add(zu)}if(Nn){const Na=Math.sin(Nn),Sa=Math.cos(Nn),Ea=[Sa,-Na,Na,Sa];Ma._matMult(Ea),wa._matMult(Ea),uA._matMult(Ea),rl._matMult(Ea)}const ol=new c(0,0),ja=new c(0,0);xi.push({tl:Ma,tr:wa,bl:uA,br:rl,tex:on,writingMode:ft.writingMode,glyphOffset:ca,sectionIndex:jn.sectionIndex,isSDF:$i,pixelOffsetTL:ol,pixelOffsetBR:ja,minFontScaleX:0,minFontScaleY:0})}return xi})(0,d,K,S,B,D,b,f.allowVerticalPlacement),He=f.textSizeData;let at=null;He.kind==="source"?(at=[Pc*S.layout.get("text-size").evaluate(D,{})],at[0]>Uc&&pt(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):He.kind==="composite"&&(at=[Pc*Pe.compositeTextSizes[0].evaluate(D,{},Le),Pc*Pe.compositeTextSizes[1].evaluate(D,{},Le)],(at[0]>Uc||at[1]>Uc)&&pt(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),f.addSymbols(f.text,We,at,K,B,D,te,u,W.lineStartIndex,W.lineLength,Oe,Le);for(const Rt of re)Ae[Rt]=f.text.placedSymbolArray.length-1;return 4*We.length}function ng(f){for(const u in f)return f[u];return null}function PA(f,u,d,b){const S=f.compareText;if(u in S){const B=S[u];for(let D=B.length-1;D>=0;D--)if(b.dist(B[D])<d)return!0}else S[u]=[];return S[u].push(b),!1}const Qv=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class ig{static from(u){if(!(u instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,b]=new Uint8Array(u,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const S=b>>4;if(S!==1)throw new Error(`Got v${S} data when expected v1.`);const B=Qv[15&b];if(!B)throw new Error("Unrecognized array type.");const[D]=new Uint16Array(u,2,1),[K]=new Uint32Array(u,4,1);return new ig(K,D,B,u)}constructor(u,d=64,b=Float64Array,S){if(isNaN(u)||u<0)throw new Error(`Unpexpected numItems value: ${u}.`);this.numItems=+u,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=b,this.IndexArrayType=u<65536?Uint16Array:Uint32Array;const B=Qv.indexOf(this.ArrayType),D=2*u*this.ArrayType.BYTES_PER_ELEMENT,K=u*this.IndexArrayType.BYTES_PER_ELEMENT,W=(8-K%8)%8;if(B<0)throw new Error(`Unexpected typed array class: ${b}.`);S&&S instanceof ArrayBuffer?(this.data=S,this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+K+W,2*u),this._pos=2*u,this._finished=!0):(this.data=new ArrayBuffer(8+D+K+W),this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+K+W,2*u),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+B]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=u)}add(u,d){const b=this._pos>>1;return this.ids[b]=b,this.coords[this._pos++]=u,this.coords[this._pos++]=d,b}finish(){const u=this._pos>>1;if(u!==this.numItems)throw new Error(`Added ${u} items when expected ${this.numItems}.`);return Sh(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(u,d,b,S){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:B,coords:D,nodeSize:K}=this,W=[0,B.length-1,0],te=[];for(;W.length;){const re=W.pop()||0,Ae=W.pop()||0,Oe=W.pop()||0;if(Ae-Oe<=K){for(let He=Oe;He<=Ae;He++){const at=D[2*He],Rt=D[2*He+1];at>=u&&at<=b&&Rt>=d&&Rt<=S&&te.push(B[He])}continue}const Pe=Oe+Ae>>1,Le=D[2*Pe],We=D[2*Pe+1];Le>=u&&Le<=b&&We>=d&&We<=S&&te.push(B[Pe]),(re===0?u<=Le:d<=We)&&(W.push(Oe),W.push(Pe-1),W.push(1-re)),(re===0?b>=Le:S>=We)&&(W.push(Pe+1),W.push(Ae),W.push(1-re))}return te}within(u,d,b){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:S,coords:B,nodeSize:D}=this,K=[0,S.length-1,0],W=[],te=b*b;for(;K.length;){const re=K.pop()||0,Ae=K.pop()||0,Oe=K.pop()||0;if(Ae-Oe<=D){for(let He=Oe;He<=Ae;He++)qv(B[2*He],B[2*He+1],u,d)<=te&&W.push(S[He]);continue}const Pe=Oe+Ae>>1,Le=B[2*Pe],We=B[2*Pe+1];qv(Le,We,u,d)<=te&&W.push(S[Pe]),(re===0?u-b<=Le:d-b<=We)&&(K.push(Oe),K.push(Pe-1),K.push(1-re)),(re===0?u+b>=Le:d+b>=We)&&(K.push(Pe+1),K.push(Ae),K.push(1-re))}return W}}function Sh(f,u,d,b,S,B){if(S-b<=d)return;const D=b+S>>1;IC(f,u,D,b,S,B),Sh(f,u,d,b,D-1,1-B),Sh(f,u,d,D+1,S,1-B)}function IC(f,u,d,b,S,B){for(;S>b;){if(S-b>600){const te=S-b+1,re=d-b+1,Ae=Math.log(te),Oe=.5*Math.exp(2*Ae/3),Pe=.5*Math.sqrt(Ae*Oe*(te-Oe)/te)*(re-te/2<0?-1:1);IC(f,u,d,Math.max(b,Math.floor(d-re*Oe/te+Pe)),Math.min(S,Math.floor(d+(te-re)*Oe/te+Pe)),B)}const D=u[2*d+B];let K=b,W=S;for(z0(f,u,b,d),u[2*S+B]>D&&z0(f,u,b,S);K<W;){for(z0(f,u,K,W),K++,W--;u[2*K+B]<D;)K++;for(;u[2*W+B]>D;)W--}u[2*b+B]===D?z0(f,u,b,W):(W++,z0(f,u,W,S)),W<=d&&(b=W+1),d<=W&&(S=W-1)}}function z0(f,u,d,b){ad(f,d,b),ad(u,2*d,2*b),ad(u,2*d+1,2*b+1)}function ad(f,u,d){const b=f[u];f[u]=f[d],f[d]=b}function qv(f,u,d,b){const S=f-d,B=u-b;return S*S+B*B}var j0;s.cx=void 0,(j0=s.cx||(s.cx={})).create="create",j0.load="load",j0.fullLoad="fullLoad";let py=null,N0=[];const Yv=1e3/60,vl="loadTime",Fu="fullLoadTime",r2={mark(f){performance.mark(f)},frame(f){const u=f;py!=null&&N0.push(u-py),py=u},clearMetrics(){py=null,N0=[],performance.clearMeasures(vl),performance.clearMeasures(Fu);for(const f in s.cx)performance.clearMarks(s.cx[f])},getPerformanceMetrics(){performance.measure(vl,s.cx.create,s.cx.load),performance.measure(Fu,s.cx.create,s.cx.fullLoad);const f=performance.getEntriesByName(vl)[0].duration,u=performance.getEntriesByName(Fu)[0].duration,d=N0.length,b=1/(N0.reduce(((B,D)=>B+D),0)/d/1e3),S=N0.filter((B=>B>Yv)).reduce(((B,D)=>B+(D-Yv)/Yv),0);return{loadTime:f,fullLoadTime:u,fps:b,percentDroppedFrames:S/(d+S)*100,totalFrames:d}}};s.$=dt,s.A=V,s.B=function([f,u,d]){return u+=90,u*=Math.PI/180,d*=Math.PI/180,{x:f*Math.cos(u)*Math.sin(d),y:f*Math.sin(u)*Math.sin(d),z:f*Math.cos(d)}},s.C=Zc,s.D=ci,s.E=Pt,s.F=Qr,s.G=zd,s.H=function(f){if(Jt==null){const u=f.navigator?f.navigator.userAgent:null;Jt=!!f.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return Jt},s.I=Ym,s.J=class{constructor(f,u){this.target=f,this.mapId=u,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new $f((()=>this.process())),this.subscription=gn(this.target,"message",(d=>this.receive(d)),!1),this.globalScope=Ot(self)?f:window}registerMessageHandler(f,u){this.messageHandlers[f]=u}sendAsync(f,u){return new Promise(((d,b)=>{const S=Math.round(1e18*Math.random()).toString(36).substring(0,10),B=u?gn(u.signal,"abort",(()=>{B?.unsubscribe(),delete this.resolveRejects[S];const W={id:S,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage(W)}),MC):null;this.resolveRejects[S]={resolve:W=>{B?.unsubscribe(),d(W)},reject:W=>{B?.unsubscribe(),b(W)}};const D=[],K=Object.assign(Object.assign({},f),{id:S,sourceMapId:this.mapId,origin:location.origin,data:nA(f.data,D)});this.target.postMessage(K,{transfer:D})}))}receive(f){const u=f.data,d=u.id;if(!(u.origin!=="file://"&&location.origin!=="file://"&&u.origin!=="resource://android"&&location.origin!=="resource://android"&&u.origin!==location.origin||u.targetMapId&&this.mapId!==u.targetMapId)){if(u.type==="<cancel>"){delete this.tasks[d];const b=this.abortControllers[d];return delete this.abortControllers[d],void(b&&b.abort())}if(Ot(self)||u.mustQueue)return this.tasks[d]=u,this.taskQueue.push(d),void this.invoker.trigger();this.processTask(d,u)}}process(){if(this.taskQueue.length===0)return;const f=this.taskQueue.shift(),u=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),u&&this.processTask(f,u)}processTask(f,u){return a(this,void 0,void 0,(function*(){if(u.type==="<response>"){const S=this.resolveRejects[f];return delete this.resolveRejects[f],S?void(u.error?S.reject(Ah(u.error)):S.resolve(Ah(u.data))):void 0}if(!this.messageHandlers[u.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${u.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const d=Ah(u.data),b=new AbortController;this.abortControllers[f]=b;try{const S=yield this.messageHandlers[u.type](u.sourceMapId,d,b);this.completeTask(f,null,S)}catch(S){this.completeTask(f,S)}}))}completeTask(f,u,d){const b=[];delete this.abortControllers[f];const S={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:u?nA(u):null,data:nA(d,b)};this.target.postMessage(S,{transfer:b})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},s.K=ye,s.L=function(){var f=new V(16);return V!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},s.M=function(f,u,d){var b,S,B,D,K,W,te,re,Ae,Oe,Pe,Le,We=d[0],He=d[1],at=d[2];return u===f?(f[12]=u[0]*We+u[4]*He+u[8]*at+u[12],f[13]=u[1]*We+u[5]*He+u[9]*at+u[13],f[14]=u[2]*We+u[6]*He+u[10]*at+u[14],f[15]=u[3]*We+u[7]*He+u[11]*at+u[15]):(S=u[1],B=u[2],D=u[3],K=u[4],W=u[5],te=u[6],re=u[7],Ae=u[8],Oe=u[9],Pe=u[10],Le=u[11],f[0]=b=u[0],f[1]=S,f[2]=B,f[3]=D,f[4]=K,f[5]=W,f[6]=te,f[7]=re,f[8]=Ae,f[9]=Oe,f[10]=Pe,f[11]=Le,f[12]=b*We+K*He+Ae*at+u[12],f[13]=S*We+W*He+Oe*at+u[13],f[14]=B*We+te*He+Pe*at+u[14],f[15]=D*We+re*He+Le*at+u[15]),f},s.N=function(f,u,d){var b=d[0],S=d[1],B=d[2];return f[0]=u[0]*b,f[1]=u[1]*b,f[2]=u[2]*b,f[3]=u[3]*b,f[4]=u[4]*S,f[5]=u[5]*S,f[6]=u[6]*S,f[7]=u[7]*S,f[8]=u[8]*B,f[9]=u[9]*B,f[10]=u[10]*B,f[11]=u[11]*B,f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},s.O=function(f,u,d){var b=u[0],S=u[1],B=u[2],D=u[3],K=u[4],W=u[5],te=u[6],re=u[7],Ae=u[8],Oe=u[9],Pe=u[10],Le=u[11],We=u[12],He=u[13],at=u[14],Rt=u[15],ft=d[0],Ct=d[1],zt=d[2],en=d[3];return f[0]=ft*b+Ct*K+zt*Ae+en*We,f[1]=ft*S+Ct*W+zt*Oe+en*He,f[2]=ft*B+Ct*te+zt*Pe+en*at,f[3]=ft*D+Ct*re+zt*Le+en*Rt,f[4]=(ft=d[4])*b+(Ct=d[5])*K+(zt=d[6])*Ae+(en=d[7])*We,f[5]=ft*S+Ct*W+zt*Oe+en*He,f[6]=ft*B+Ct*te+zt*Pe+en*at,f[7]=ft*D+Ct*re+zt*Le+en*Rt,f[8]=(ft=d[8])*b+(Ct=d[9])*K+(zt=d[10])*Ae+(en=d[11])*We,f[9]=ft*S+Ct*W+zt*Oe+en*He,f[10]=ft*B+Ct*te+zt*Pe+en*at,f[11]=ft*D+Ct*re+zt*Le+en*Rt,f[12]=(ft=d[12])*b+(Ct=d[13])*K+(zt=d[14])*Ae+(en=d[15])*We,f[13]=ft*S+Ct*W+zt*Oe+en*He,f[14]=ft*B+Ct*te+zt*Pe+en*at,f[15]=ft*D+Ct*re+zt*Le+en*Rt,f},s.P=c,s.Q=function(f,u){const d={};for(let b=0;b<u.length;b++){const S=u[b];S in f&&(d[S]=f[S])}return d},s.R=Il,s.S=sd,s.T=L1,s.U=uy,s.V=L0,s.W=F,s.X=j,s.Y=ii,s.Z=zc,s._=a,s.a=ne,s.a$=Ee,s.a0=function(f,u){var d,b,S,B,D;if(!f)return u??{};if(!u)return f;let K=Object.assign({},f);if(u.removeAll&&(K={removeAll:!0}),u.remove){const W=new Set(u.remove);K.add&&(K.add=K.add.filter((re=>!W.has(re.id)))),K.update&&(K.update=K.update.filter((re=>!W.has(re.id))));const te=new Set(((d=f.add)!==null&&d!==void 0?d:[]).map((re=>re.id)));u.remove=u.remove.filter((re=>!te.has(re)))}if(u.remove){const W=new Set(K.remove?K.remove.concat(u.remove):u.remove);K.remove=Array.from(W.values())}if(u.add){const W=K.add?K.add.concat(u.add):u.add,te=new Map(W.map((re=>[re.id,re])));K.add=Array.from(te.values())}if(u.update){const W=new Map((b=K.update)===null||b===void 0?void 0:b.map((te=>[te.id,te])));for(const te of u.update){const re=(S=W.get(te.id))!==null&&S!==void 0?S:{id:te.id};te.newGeometry&&(re.newGeometry=te.newGeometry),te.addOrUpdateProperties&&(re.addOrUpdateProperties=((B=re.addOrUpdateProperties)!==null&&B!==void 0?B:[]).concat(te.addOrUpdateProperties)),te.removeProperties&&(re.removeProperties=((D=re.removeProperties)!==null&&D!==void 0?D:[]).concat(te.removeProperties)),te.removeAllProperties&&(re.removeAllProperties=!0),W.set(te.id,re)}K.update=Array.from(W.values())}return K.remove&&K.add&&(K.remove=K.remove.filter((W=>K.add.findIndex((te=>te.id===W))===-1))),K},s.a1=ks,s.a2=Ca,s.a3=25,s.a4=cy,s.a5=f=>{const u=window.document.createElement("video");return u.muted=!0,new Promise((d=>{u.onloadstart=()=>{d(u)};for(const b of f){const S=window.document.createElement("source");ge(b)||(u.crossOrigin="Anonymous"),S.src=b,u.appendChild(S)}}))},s.a6=Zt,s.a7=function(){return Te++},s.a8=Ze,s.a9=Dp,s.aA=function(f){let u=1/0,d=1/0,b=-1/0,S=-1/0;for(const B of f)u=Math.min(u,B.x),d=Math.min(d,B.y),b=Math.max(b,B.x),S=Math.max(S,B.y);return[u,d,b,S]},s.aB=Is,s.aC=ke,s.aD=function(f,u,d,b,S=!1){if(!d[0]&&!d[1])return[0,0];const B=S?b==="map"?-f.bearingInRadians:0:b==="viewport"?f.bearingInRadians:0;if(B){const D=Math.sin(B),K=Math.cos(B);d=[d[0]*K-d[1]*D,d[0]*D+d[1]*K]}return[S?d[0]:ke(u,d[0],f.zoom),S?d[1]:ke(u,d[1],f.zoom)]},s.aF=Zm,s.aG=fy,s.aH=Rp,s.aI=ig,s.aJ=bo,s.aK=b0,s.aL=Kt,s.aM=Br,s.aN=ya,s.aO=Bt,s.aP=Dn,s.aQ=F0,s.aR=me,s.aS=le,s.aT=function(f){var u=new V(3);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u},s.aU=function(f,u,d){return f[0]=u[0]-d[0],f[1]=u[1]-d[1],f[2]=u[2]-d[2],f},s.aV=function(f,u){var d=u[0],b=u[1],S=u[2],B=d*d+b*b+S*S;return B>0&&(B=1/Math.sqrt(B)),f[0]=u[0]*B,f[1]=u[1]*B,f[2]=u[2]*B,f},s.aW=de,s.aX=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]},s.aY=function(f,u,d){return f[0]=u[0]*d[0],f[1]=u[1]*d[1],f[2]=u[2]*d[2],f[3]=u[3]*d[3],f},s.aZ=z,s.a_=function(f,u,d){const b=u[0]*d[0]+u[1]*d[1]+u[2]*d[2];return b===0?null:(-(f[0]*d[0]+f[1]*d[1]+f[2]*d[2])-d[3])/b},s.aa=Gl,s.ab=Xh,s.ac=Ay,s.ad=function(f){const u={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((d,b,S,B)=>{const D=S||B;return u[b]=!D||D.toLowerCase(),""})),u["max-age"]){const d=parseInt(u["max-age"],10);isNaN(d)?delete u["max-age"]:u["max-age"]=d}return u},s.ae=Yn,s.af=function(f){return Math.pow(2,f)},s.ag=G,s.ah=bt,s.ai=85.051129,s.aj=Fc,s.ak=function(f){return Math.log(f)/Math.LN2},s.al=function(f){var u=f[0],d=f[1];return u*u+d*d},s.am=function(f,u){const d=[];for(const b in f)b in u||d.push(b);return d},s.an=function(f,u){let d=0,b=0;if(f.kind==="constant")b=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:S,minZoom:B,maxZoom:D}=f,K=S?bt(Xo.interpolationFactor(S,u,B,D),0,1):0;f.kind==="camera"?b=Zc.number(f.minSize,f.maxSize,K):d=K}return{uSizeT:d,uSize:b}},s.ap=function(f,{uSize:u,uSizeT:d},{lowerSize:b,upperSize:S}){return f.kind==="source"?b/Pc:f.kind==="composite"?Zc.number(b/Pc,S/Pc,d):u},s.aq=function(f,u){var d=u[0],b=u[1],S=u[2],B=u[3],D=u[4],K=u[5],W=u[6],te=u[7],re=u[8],Ae=u[9],Oe=u[10],Pe=u[11],Le=u[12],We=u[13],He=u[14],at=u[15],Rt=d*K-b*D,ft=d*W-S*D,Ct=d*te-B*D,zt=b*W-S*K,en=b*te-B*K,An=S*te-B*W,Gn=re*We-Ae*Le,Un=re*He-Oe*Le,Nn=re*at-Pe*Le,xi=Ae*He-Oe*We,zn=Ae*at-Pe*We,jn=Oe*at-Pe*He,on=Rt*jn-ft*zn+Ct*xi+zt*Nn-en*Un+An*Gn;return on?(f[0]=(K*jn-W*zn+te*xi)*(on=1/on),f[1]=(S*zn-b*jn-B*xi)*on,f[2]=(We*An-He*en+at*zt)*on,f[3]=(Oe*en-Ae*An-Pe*zt)*on,f[4]=(W*Nn-D*jn-te*Un)*on,f[5]=(d*jn-S*Nn+B*Un)*on,f[6]=(He*Ct-Le*An-at*ft)*on,f[7]=(re*An-Oe*Ct+Pe*ft)*on,f[8]=(D*zn-K*Nn+te*Gn)*on,f[9]=(b*Nn-d*zn-B*Gn)*on,f[10]=(Le*en-We*Ct+at*Rt)*on,f[11]=(Ae*Ct-re*en-Pe*Rt)*on,f[12]=(K*Un-D*xi-W*Gn)*on,f[13]=(d*xi-b*Un+S*Gn)*on,f[14]=(We*ft-Le*zt-He*Rt)*on,f[15]=(re*zt-Ae*ft+Oe*Rt)*on,f):null},s.ar=Qe,s.as=function(f){var u=f[0],d=f[1];return Math.sqrt(u*u+d*d)},s.at=function(f){return f[0]=0,f[1]=0,f},s.au=function(f,u,d){return f[0]=u[0]*d,f[1]=u[1]*d,f},s.av=TA,s.aw=De,s.ax=function(f,u,d,b){const S=u.y-f.y,B=u.x-f.x,D=b.y-d.y,K=b.x-d.x,W=D*B-K*S;if(W===0)return null;const te=(K*(f.y-d.y)-D*(f.x-d.x))/W;return new c(f.x+te*B,f.y+te*S)},s.ay=eg,s.az=Pu,s.b=Tn,s.b$=class extends C{},s.b0=function(f,u,d){return f[0]=u[0]*d,f[1]=u[1]*d,f[2]=u[2]*d,f[3]=u[3]*d,f},s.b1=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]+f[3]},s.b2=Fv,s.b3=Fo,s.b4=function(f,u,d,b,S){var B=1/Math.tan(u/2);if(f[0]=B/d,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=B,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,S!=null&&S!==1/0){var D=1/(b-S);f[10]=(S+b)*D,f[14]=2*S*b*D}else f[10]=-1,f[14]=-2*b;return f},s.b5=function(f){var u=new V(16);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=f[6],u[7]=f[7],u[8]=f[8],u[9]=f[9],u[10]=f[10],u[11]=f[11],u[12]=f[12],u[13]=f[13],u[14]=f[14],u[15]=f[15],u},s.b6=function(f,u,d){var b=Math.sin(d),S=Math.cos(d),B=u[0],D=u[1],K=u[2],W=u[3],te=u[4],re=u[5],Ae=u[6],Oe=u[7];return u!==f&&(f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=B*S+te*b,f[1]=D*S+re*b,f[2]=K*S+Ae*b,f[3]=W*S+Oe*b,f[4]=te*S-B*b,f[5]=re*S-D*b,f[6]=Ae*S-K*b,f[7]=Oe*S-W*b,f},s.b7=function(f,u,d){var b=Math.sin(d),S=Math.cos(d),B=u[4],D=u[5],K=u[6],W=u[7],te=u[8],re=u[9],Ae=u[10],Oe=u[11];return u!==f&&(f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[4]=B*S+te*b,f[5]=D*S+re*b,f[6]=K*S+Ae*b,f[7]=W*S+Oe*b,f[8]=te*S-B*b,f[9]=re*S-D*b,f[10]=Ae*S-K*b,f[11]=Oe*S-W*b,f},s.b8=function(){const f=new Float32Array(16);return G(f),f},s.b9=function(){const f=new Float64Array(16);return G(f),f},s.bA=function(f,u){const d=we(f,360),b=we(u,360),S=b-d,B=b>d?S-360:S+360;return Math.abs(S)<Math.abs(B)?S:B},s.bB=function(f){return f[0]=0,f[1]=0,f[2]=0,f},s.bC=function(f,u,d,b){const S=Math.sqrt(f*f+u*u),B=Math.sqrt(d*d+b*b);f/=S,u/=S,d/=B,b/=B;const D=Math.acos(f*d+u*b);return-u*d+f*b>0?D:-D},s.bD=function(f,u){const d=we(f,2*Math.PI),b=we(u,2*Math.PI);return Math.min(Math.abs(d-b),Math.abs(d-b+2*Math.PI),Math.abs(d-b-2*Math.PI))},s.bE=function(){const f={},u=st.$version;for(const d in st.$root){const b=st.$root[d];if(b.required){let S=null;S=d==="version"?u:b.type==="array"?[]:{},S!=null&&(f[d]=S)}}return f},s.bF=Tm,s.bG=Ve,s.bH=function f(u,d){if(Array.isArray(u)){if(!Array.isArray(d)||u.length!==d.length)return!1;for(let b=0;b<u.length;b++)if(!f(u[b],d[b]))return!1;return!0}if(typeof u=="object"&&u!==null&&d!==null){if(typeof d!="object"||Object.keys(u).length!==Object.keys(d).length)return!1;for(const b in u)if(!f(u[b],d[b]))return!1;return!0}return u===d},s.bI=function(f){f=f.slice();const u=Object.create(null);for(let d=0;d<f.length;d++)u[f[d].id]=f[d];for(let d=0;d<f.length;d++)"ref"in f[d]&&(f[d]=Fn(f[d],u[f[d].ref]));return f},s.bJ=function(f,u){if(f.type==="custom")return new U0(f,u);switch(f.type){case"background":return new Ir(f,u);case"circle":return new D1(f,u);case"color-relief":return new gv(f,u);case"fill":return new Cv(f,u);case"fill-extrusion":return new _o(f,u);case"heatmap":return new cC(f,u);case"hillshade":return new Jh(f,u);case"line":return new wv(f,u);case"raster":return new il(f,u);case"symbol":return new P0(f,u)}},s.bK=ut,s.bL=function(f,u){if(!f)return[{command:"setStyle",args:[u]}];let d=[];try{if(!pn(f.version,u.version))return[{command:"setStyle",args:[u]}];pn(f.center,u.center)||d.push({command:"setCenter",args:[u.center]}),pn(f.state,u.state)||d.push({command:"setGlobalState",args:[u.state]}),pn(f.centerAltitude,u.centerAltitude)||d.push({command:"setCenterAltitude",args:[u.centerAltitude]}),pn(f.zoom,u.zoom)||d.push({command:"setZoom",args:[u.zoom]}),pn(f.bearing,u.bearing)||d.push({command:"setBearing",args:[u.bearing]}),pn(f.pitch,u.pitch)||d.push({command:"setPitch",args:[u.pitch]}),pn(f.roll,u.roll)||d.push({command:"setRoll",args:[u.roll]}),pn(f.sprite,u.sprite)||d.push({command:"setSprite",args:[u.sprite]}),pn(f.glyphs,u.glyphs)||d.push({command:"setGlyphs",args:[u.glyphs]}),pn(f.transition,u.transition)||d.push({command:"setTransition",args:[u.transition]}),pn(f.light,u.light)||d.push({command:"setLight",args:[u.light]}),pn(f.terrain,u.terrain)||d.push({command:"setTerrain",args:[u.terrain]}),pn(f.sky,u.sky)||d.push({command:"setSky",args:[u.sky]}),pn(f.projection,u.projection)||d.push({command:"setProjection",args:[u.projection]});const b={},S=[];(function(D,K,W,te){let re;for(re in K=K||{},D=D||{})Object.prototype.hasOwnProperty.call(D,re)&&(Object.prototype.hasOwnProperty.call(K,re)||ai(re,W,te));for(re in K)Object.prototype.hasOwnProperty.call(K,re)&&(Object.prototype.hasOwnProperty.call(D,re)?pn(D[re],K[re])||(D[re].type==="geojson"&&K[re].type==="geojson"&&Ti(D,K,re)?$n(W,{command:"setGeoJSONSourceData",args:[re,K[re].data]}):Hi(re,K,W,te)):Zn(re,K,W))})(f.sources,u.sources,S,b);const B=[];f.layers&&f.layers.forEach((D=>{"source"in D&&b[D.source]?d.push({command:"removeLayer",args:[D.id]}):B.push(D)})),d=d.concat(S),(function(D,K,W){K=K||[];const te=(D=D||[]).map(oi),re=K.map(oi),Ae=D.reduce(Pi,{}),Oe=K.reduce(Pi,{}),Pe=te.slice(),Le=Object.create(null);let We,He,at,Rt,ft;for(let Ct=0,zt=0;Ct<te.length;Ct++)We=te[Ct],Object.prototype.hasOwnProperty.call(Oe,We)?zt++:($n(W,{command:"removeLayer",args:[We]}),Pe.splice(Pe.indexOf(We,zt),1));for(let Ct=0,zt=0;Ct<re.length;Ct++)We=re[re.length-1-Ct],Pe[Pe.length-1-Ct]!==We&&(Object.prototype.hasOwnProperty.call(Ae,We)?($n(W,{command:"removeLayer",args:[We]}),Pe.splice(Pe.lastIndexOf(We,Pe.length-zt),1)):zt++,Rt=Pe[Pe.length-Ct],$n(W,{command:"addLayer",args:[Oe[We],Rt]}),Pe.splice(Pe.length-Ct,0,We),Le[We]=!0);for(let Ct=0;Ct<re.length;Ct++)if(We=re[Ct],He=Ae[We],at=Oe[We],!Le[We]&&!pn(He,at))if(pn(He.source,at.source)&&pn(He["source-layer"],at["source-layer"])&&pn(He.type,at.type)){for(ft in tr(He.layout,at.layout,W,We,null,"setLayoutProperty"),tr(He.paint,at.paint,W,We,null,"setPaintProperty"),pn(He.filter,at.filter)||$n(W,{command:"setFilter",args:[We,at.filter]}),pn(He.minzoom,at.minzoom)&&pn(He.maxzoom,at.maxzoom)||$n(W,{command:"setLayerZoomRange",args:[We,at.minzoom,at.maxzoom]}),He)Object.prototype.hasOwnProperty.call(He,ft)&&ft!=="layout"&&ft!=="paint"&&ft!=="filter"&&ft!=="metadata"&&ft!=="minzoom"&&ft!=="maxzoom"&&(ft.indexOf("paint.")===0?tr(He[ft],at[ft],W,We,ft.slice(6),"setPaintProperty"):pn(He[ft],at[ft])||$n(W,{command:"setLayerProperty",args:[We,ft,at[ft]]}));for(ft in at)Object.prototype.hasOwnProperty.call(at,ft)&&!Object.prototype.hasOwnProperty.call(He,ft)&&ft!=="layout"&&ft!=="paint"&&ft!=="filter"&&ft!=="metadata"&&ft!=="minzoom"&&ft!=="maxzoom"&&(ft.indexOf("paint.")===0?tr(He[ft],at[ft],W,We,ft.slice(6),"setPaintProperty"):pn(He[ft],at[ft])||$n(W,{command:"setLayerProperty",args:[We,ft,at[ft]]}))}else $n(W,{command:"removeLayer",args:[We]}),Rt=Pe[Pe.lastIndexOf(We)+1],$n(W,{command:"addLayer",args:[at,Rt]})})(B,u.layers,d)}catch(b){console.warn("Unable to compute style diff:",b),d=[{command:"setStyle",args:[u]}]}return d},s.bM=function(f){const u=[],d=f.id;return d===void 0&&u.push({message:`layers.${d}: missing required property "id"`}),f.render===void 0&&u.push({message:`layers.${d}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&u.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),u},s.bN=Se,s.bO=Ne,s.bP=class extends ps{constructor(f,u){super(f,u),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},s.bQ=Lm,s.bR=class extends ps{constructor(f,u){super(f,u),this.current=i0}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let u=1;u<16;u++)if(f[u]!==this.current[u]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},s.bS=gh,s.bT=class extends ps{constructor(f,u){super(f,u),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},s.bU=class extends ps{constructor(f,u){super(f,u),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},s.bV=H,s.bW=function(f,u){var d=Math.sin(u),b=Math.cos(u);return f[0]=b,f[1]=d,f[2]=0,f[3]=-d,f[4]=b,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},s.bX=function(f,u,d){var b=u[0],S=u[1],B=u[2];return f[0]=b*d[0]+S*d[3]+B*d[6],f[1]=b*d[1]+S*d[4]+B*d[7],f[2]=b*d[2]+S*d[5]+B*d[8],f},s.bY=function(f,u,d,b,S,B,D){var K=1/(u-d),W=1/(b-S),te=1/(B-D);return f[0]=-2*K,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*W,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*te,f[11]=0,f[12]=(u+d)*K,f[13]=(S+b)*W,f[14]=(D+B)*te,f[15]=1,f},s.bZ=class extends ps{constructor(f,u){super(f,u),this.current=new Array}set(f){if(f!=this.current){this.current=f;const u=new Float32Array(4*f.length);for(let d=0;d<f.length;d++)u[4*d]=f[d].r,u[4*d+1]=f[d].g,u[4*d+2]=f[d].b,u[4*d+3]=f[d].a;this.gl.uniform4fv(this.location,u)}}},s.b_=class extends ps{constructor(f,u){super(f,u),this.current=new Array}set(f){if(f!=this.current){this.current=f;const u=new Float32Array(f);this.gl.uniform1fv(this.location,u)}}},s.ba=function(){return new Float64Array(16)},s.bb=function(f,u,d){const b=new Float64Array(4);return Ie(b,f,u-90,d),b},s.bc=function(f,u,d,b){var S,B,D,K,W,te=u[0],re=u[1],Ae=u[2],Oe=u[3],Pe=d[0],Le=d[1],We=d[2],He=d[3];return(B=te*Pe+re*Le+Ae*We+Oe*He)<0&&(B=-B,Pe=-Pe,Le=-Le,We=-We,He=-He),1-B>q?(S=Math.acos(B),D=Math.sin(S),K=Math.sin((1-b)*S)/D,W=Math.sin(b*S)/D):(K=1-b,W=b),f[0]=K*te+W*Pe,f[1]=K*re+W*Le,f[2]=K*Ae+W*We,f[3]=K*Oe+W*He,f},s.bd=function(f){const u=new Float64Array(9);var d,b,S,B,D,K,W,te,re,Ae,Oe,Pe,Le,We,He,at,Rt,ft;Ae=(S=(b=f)[0])*(W=S+S),Oe=(B=b[1])*W,Le=(D=b[2])*W,We=D*(te=B+B),at=(K=b[3])*W,Rt=K*te,ft=K*(re=D+D),(d=u)[0]=1-(Pe=B*te)-(He=D*re),d[3]=Oe-ft,d[6]=Le+Rt,d[1]=Oe+ft,d[4]=1-Ae-He,d[7]=We-at,d[2]=Le-Rt,d[5]=We+at,d[8]=1-Ae-Pe;const Ct=Dn(-Math.asin(bt(u[2],-1,1)));let zt,en;return Math.hypot(u[5],u[8])<.001?(zt=0,en=-Dn(Math.atan2(u[3],u[4]))):(zt=Dn(u[5]===0&&u[8]===0?0:Math.atan2(u[5],u[8])),en=Dn(u[1]===0&&u[0]===0?0:Math.atan2(u[1],u[0]))),{roll:zt,pitch:Ct+90,bearing:en}},s.be=function(f,u){return f.roll==u.roll&&f.pitch==u.pitch&&f.bearing==u.bearing},s.bf=sr,s.bg=qd,s.bh=jf,s.bi=Gm,s.bj=Ic,s.bk=ze,s.bl=xe,s.bm=Ms,s.bn=function(f,u,d,b,S){return ze(b,S,bt((f-u)/(d-u),0,1))},s.bo=we,s.bp=function(){return new Float64Array(3)},s.bq=function(f,u,d,b){return f[0]=u[0]+d[0]*b,f[1]=u[1]+d[1]*b,f[2]=u[2]+d[2]*b,f},s.br=Ie,s.bs=function(f,u,d){var b=d[0],S=d[1],B=d[2],D=d[3],K=u[0],W=u[1],te=u[2],re=S*te-B*W,Ae=B*K-b*te,Oe=b*W-S*K;return f[0]=K+D*(re+=re)+S*(Oe+=Oe)-B*(Ae+=Ae),f[1]=W+D*Ae+B*re-b*Oe,f[2]=te+D*Oe+b*Ae-S*re,f},s.bt=function(f,u,d){const b=(S=[f[0],f[1],f[2],u[0],u[1],u[2],d[0],d[1],d[2]])[0]*((re=S[8])*(D=S[4])-(K=S[5])*(te=S[7]))+S[1]*(-re*(B=S[3])+K*(W=S[6]))+S[2]*(te*B-D*W);var S,B,D,K,W,te,re;if(b===0)return null;const Ae=de([],[u[0],u[1],u[2]],[d[0],d[1],d[2]]),Oe=de([],[d[0],d[1],d[2]],[f[0],f[1],f[2]]),Pe=de([],[f[0],f[1],f[2]],[u[0],u[1],u[2]]),Le=me([],Ae,-f[3]);return le(Le,Le,me([],Oe,-u[3])),le(Le,Le,me([],Pe,-d[3])),me(Le,Le,1/b),Le},s.bu=Zr,s.bv=function(){return new Float64Array(4)},s.bw=function(f,u,d,b){var S=[],B=[];return S[0]=u[0]-d[0],S[1]=u[1]-d[1],S[2]=u[2]-d[2],B[0]=S[0]*Math.cos(b)-S[1]*Math.sin(b),B[1]=S[0]*Math.sin(b)+S[1]*Math.cos(b),B[2]=S[2],f[0]=B[0]+d[0],f[1]=B[1]+d[1],f[2]=B[2]+d[2],f},s.bx=function(f,u,d,b){var S=[],B=[];return S[0]=u[0]-d[0],S[1]=u[1]-d[1],S[2]=u[2]-d[2],B[0]=S[0],B[1]=S[1]*Math.cos(b)-S[2]*Math.sin(b),B[2]=S[1]*Math.sin(b)+S[2]*Math.cos(b),f[0]=B[0]+d[0],f[1]=B[1]+d[1],f[2]=B[2]+d[2],f},s.by=function(f,u,d,b){var S=[],B=[];return S[0]=u[0]-d[0],S[1]=u[1]-d[1],S[2]=u[2]-d[2],B[0]=S[2]*Math.sin(b)+S[0]*Math.cos(b),B[1]=S[1],B[2]=S[2]*Math.cos(b)-S[0]*Math.sin(b),f[0]=B[0]+d[0],f[1]=B[1]+d[1],f[2]=B[2]+d[2],f},s.bz=function(f,u,d){var b=Math.sin(d),S=Math.cos(d),B=u[0],D=u[1],K=u[2],W=u[3],te=u[8],re=u[9],Ae=u[10],Oe=u[11];return u!==f&&(f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=B*S-te*b,f[1]=D*S-re*b,f[2]=K*S-Ae*b,f[3]=W*S-Oe*b,f[8]=B*b+te*S,f[9]=D*b+re*S,f[10]=K*b+Ae*S,f[11]=W*b+Oe*S,f},s.c=ee,s.c0=kl,s.c1=class extends T{},s.c2=Op,s.c3=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},s.c4=d0,s.c5=function(f,u,d){var b=u[0],S=u[1],B=u[2],D=d[3]*b+d[7]*S+d[11]*B+d[15];return f[0]=(d[0]*b+d[4]*S+d[8]*B+d[12])/(D=D||1),f[1]=(d[1]*b+d[5]*S+d[9]*B+d[13])/D,f[2]=(d[2]*b+d[6]*S+d[10]*B+d[14])/D,f},s.c6=class extends el{},s.c7=class extends fe{},s.c8=function(f,u){return f[0]===u[0]&&f[1]===u[1]&&f[2]===u[2]&&f[3]===u[3]&&f[4]===u[4]&&f[5]===u[5]&&f[6]===u[6]&&f[7]===u[7]&&f[8]===u[8]&&f[9]===u[9]&&f[10]===u[10]&&f[11]===u[11]&&f[12]===u[12]&&f[13]===u[13]&&f[14]===u[14]&&f[15]===u[15]},s.c9=function(f,u){var d=f[0],b=f[1],S=f[2],B=f[3],D=f[4],K=f[5],W=f[6],te=f[7],re=f[8],Ae=f[9],Oe=f[10],Pe=f[11],Le=f[12],We=f[13],He=f[14],at=f[15],Rt=u[0],ft=u[1],Ct=u[2],zt=u[3],en=u[4],An=u[5],Gn=u[6],Un=u[7],Nn=u[8],xi=u[9],zn=u[10],jn=u[11],on=u[12],Ni=u[13],$i=u[14],Di=u[15];return Math.abs(d-Rt)<=q*Math.max(1,Math.abs(d),Math.abs(Rt))&&Math.abs(b-ft)<=q*Math.max(1,Math.abs(b),Math.abs(ft))&&Math.abs(S-Ct)<=q*Math.max(1,Math.abs(S),Math.abs(Ct))&&Math.abs(B-zt)<=q*Math.max(1,Math.abs(B),Math.abs(zt))&&Math.abs(D-en)<=q*Math.max(1,Math.abs(D),Math.abs(en))&&Math.abs(K-An)<=q*Math.max(1,Math.abs(K),Math.abs(An))&&Math.abs(W-Gn)<=q*Math.max(1,Math.abs(W),Math.abs(Gn))&&Math.abs(te-Un)<=q*Math.max(1,Math.abs(te),Math.abs(Un))&&Math.abs(re-Nn)<=q*Math.max(1,Math.abs(re),Math.abs(Nn))&&Math.abs(Ae-xi)<=q*Math.max(1,Math.abs(Ae),Math.abs(xi))&&Math.abs(Oe-zn)<=q*Math.max(1,Math.abs(Oe),Math.abs(zn))&&Math.abs(Pe-jn)<=q*Math.max(1,Math.abs(Pe),Math.abs(jn))&&Math.abs(Le-on)<=q*Math.max(1,Math.abs(Le),Math.abs(on))&&Math.abs(We-Ni)<=q*Math.max(1,Math.abs(We),Math.abs(Ni))&&Math.abs(He-$i)<=q*Math.max(1,Math.abs(He),Math.abs($i))&&Math.abs(at-Di)<=q*Math.max(1,Math.abs(at),Math.abs(Di))},s.cA=function(f,u){ne.REGISTERED_PROTOCOLS[f]=u},s.cB=function(f){delete ne.REGISTERED_PROTOCOLS[f]},s.cC=function(f,u){const d={};for(let S=0;S<f.length;S++){const B=u&&u[f[S].id]||ro(f[S]);u&&(u[f[S].id]=B);let D=d[B];D||(D=d[B]=[]),D.push(f[S])}const b=[];for(const S in d)b.push(d[S]);return b},s.cD=Xn,s.cE=wC,s.cF=Xm,s.cG=ey,s.cH=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=dt/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;const u=f.bucket.layers[0],d=u.layout,b=u._unevaluatedLayout._values,S={layoutIconSize:b["icon-size"].possiblyEvaluate(new Qr(f.bucket.zoom+1),f.canonical),layoutTextSize:b["text-size"].possiblyEvaluate(new Qr(f.bucket.zoom+1),f.canonical),textMaxSize:b["text-size"].possiblyEvaluate(new Qr(18))};if(f.bucket.textSizeData.kind==="composite"){const{minZoom:te,maxZoom:re}=f.bucket.textSizeData;S.compositeTextSizes=[b["text-size"].possiblyEvaluate(new Qr(te),f.canonical),b["text-size"].possiblyEvaluate(new Qr(re),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){const{minZoom:te,maxZoom:re}=f.bucket.iconSizeData;S.compositeIconSizes=[b["icon-size"].possiblyEvaluate(new Qr(te),f.canonical),b["icon-size"].possiblyEvaluate(new Qr(re),f.canonical)]}const B=d.get("text-line-height")*Is,D=d.get("text-rotation-alignment")!=="viewport"&&d.get("symbol-placement")!=="point",K=d.get("text-keep-upright"),W=d.get("text-size");for(const te of f.bucket.features){const re=d.get("text-font").evaluate(te,{},f.canonical).join(","),Ae=W.evaluate(te,{},f.canonical),Oe=S.layoutTextSize.evaluate(te,{},f.canonical),Pe=S.layoutIconSize.evaluate(te,{},f.canonical),Le={horizontal:{},vertical:void 0},We=te.text;let He,at=[0,0];if(We){const Ct=We.toString(),zt=d.get("text-letter-spacing").evaluate(te,{},f.canonical)*Is,en=iA(Ct)?zt:0,An=d.get("text-anchor").evaluate(te,{},f.canonical),Gn=dy(u,te,f.canonical);if(!Gn){const zn=d.get("text-radial-offset").evaluate(te,{},f.canonical);at=zn?lA(An,[zn*Is,Gv]):d.get("text-offset").evaluate(te,{},f.canonical).map((jn=>jn*Is))}let Un=D?"center":d.get("text-justify").evaluate(te,{},f.canonical);const Nn=d.get("symbol-placement")==="point"?d.get("text-max-width").evaluate(te,{},f.canonical)*Is:1/0,xi=()=>{f.bucket.allowVerticalPlacement&&rc(Ct)&&(Le.vertical=B0(We,f.glyphMap,f.glyphPositions,f.imagePositions,re,Nn,B,An,"left",en,at,s.ao.vertical,!0,Oe,Ae))};if(!D&&Gn){const zn=new Set;if(Un==="auto")for(let on=0;on<Gn.values.length;on+=2)zn.add(fy(Gn.values[on]));else zn.add(Un);let jn=!1;for(const on of zn)if(!Le.horizontal[on])if(jn)Le.horizontal[on]=Le.horizontal[0];else{const Ni=B0(We,f.glyphMap,f.glyphPositions,f.imagePositions,re,Nn,B,"center",on,en,at,s.ao.horizontal,!1,Oe,Ae);Ni&&(Le.horizontal[on]=Ni,jn=Ni.positionedLines.length===1)}xi()}else{Un==="auto"&&(Un=fy(An));const zn=B0(We,f.glyphMap,f.glyphPositions,f.imagePositions,re,Nn,B,An,Un,en,at,s.ao.horizontal,!1,Oe,Ae);zn&&(Le.horizontal[Un]=zn),xi(),rc(Ct)&&D&&K&&(Le.vertical=B0(We,f.glyphMap,f.glyphPositions,f.imagePositions,re,Nn,B,An,Un,en,at,s.ao.vertical,!1,Oe,Ae))}}let Rt=!1;if(te.icon&&te.icon.name){const Ct=f.imageMap[te.icon.name];Ct&&(He=ry(f.imagePositions[te.icon.name],d.get("icon-offset").evaluate(te,{},f.canonical),d.get("icon-anchor").evaluate(te,{},f.canonical)),Rt=!!Ct.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=Rt:f.bucket.sdfIcons!==Rt&&pt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ct.pixelRatio!==f.bucket.pixelRatio||d.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}const ft=ng(Le.horizontal)||Le.vertical;f.bucket.iconsInText=!!ft&&ft.iconsInText,(ft||He)&&BC(f.bucket,te,Le,He,f.imageMap,S,Oe,Pe,at,Rt,f.canonical,f.subdivisionGranularity)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},s.cI=Y1,s.cJ=V1,s.cK=Zd,s.cL=xv,s.cM=Tp,s.cN=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},s.cO=function(f,u,d,b,S){return a(this,void 0,void 0,(function*(){if(j())try{return yield ii(f,u,d,b,S)}catch{}return(function(B,D,K,W,te){const re=B.width,Ae=B.height;wn&&Rn||(wn=new OffscreenCanvas(re,Ae),Rn=wn.getContext("2d",{willReadFrequently:!0})),wn.width=re,wn.height=Ae,Rn.drawImage(B,0,0,re,Ae);const Oe=Rn.getImageData(D,K,W,te);return Rn.clearRect(0,0,re,Ae),Oe.data})(f,u,d,b,S)}))},s.cP=ed,s.cQ=h,s.cR=Bp,s.cS=aA,s.cT=ih,s.cU=function(f,u){const d=new Map;if(f!=null)if(f.type==="Feature")d.set(Kp(f,u),f);else for(const b of f.features)d.set(Kp(b,u),b);return d},s.cV=function(f,u){if(f==null)return!0;if(f.type==="Feature")return Kp(f,u)!=null;if(f.type==="FeatureCollection"){const d=new Set;for(const b of f.features){const S=Kp(b,u);if(S==null||d.has(S))return!1;d.add(S)}return!0}return!1},s.cW=function(f,u,d){var b,S,B,D;if(u.removeAll&&f.clear(),u.remove)for(const K of u.remove)f.delete(K);if(u.add)for(const K of u.add){const W=Kp(K,d);W!=null&&f.set(W,K)}if(u.update)for(const K of u.update){let W=f.get(K.id);if(W==null)continue;const te=!K.removeAllProperties&&(((b=K.removeProperties)===null||b===void 0?void 0:b.length)>0||((S=K.addOrUpdateProperties)===null||S===void 0?void 0:S.length)>0);if((K.newGeometry||K.removeAllProperties||te)&&(W=Object.assign({},W),f.set(K.id,W),te&&(W.properties=Object.assign({},W.properties))),K.newGeometry&&(W.geometry=K.newGeometry),K.removeAllProperties)W.properties={};else if(((B=K.removeProperties)===null||B===void 0?void 0:B.length)>0)for(const re of K.removeProperties)Object.prototype.hasOwnProperty.call(W.properties,re)&&delete W.properties[re];if(((D=K.addOrUpdateProperties)===null||D===void 0?void 0:D.length)>0)for(const{key:re,value:Ae}of K.addOrUpdateProperties)W.properties[re]=Ae}},s.cX=Ja,s.ca=function(f,u){return f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},s.cb=f=>f.type==="symbol",s.cc=f=>f.type==="circle",s.cd=f=>f.type==="heatmap",s.ce=f=>f.type==="line",s.cf=f=>f.type==="fill",s.cg=f=>f.type==="fill-extrusion",s.ch=f=>f.type==="hillshade",s.ci=f=>f.type==="color-relief",s.cj=f=>f.type==="raster",s.ck=f=>f.type==="background",s.cl=f=>f.type==="custom",s.cm=At,s.cn=function(f,u,d){const b=et(u.x-d.x,u.y-d.y),S=et(f.x-d.x,f.y-d.y);var B,D;return Dn(Math.atan2(b[0]*S[1]-b[1]*S[0],(B=b)[0]*(D=S)[0]+B[1]*D[1]))},s.co=it,s.cp=function(f,u){return _e[u]&&(f instanceof MouseEvent||f instanceof WheelEvent)},s.cq=function(f,u){return Tt[u]&&"touches"in f},s.cr=function(f){return Tt[f]||_e[f]},s.cs=function(f,u,d){var b=u[0],S=u[1];return f[0]=d[0]*b+d[4]*S+d[12],f[1]=d[1]*b+d[5]*S+d[13],f},s.ct=function(f,u){const{x:d,y:b}=ks.fromLngLat(u);return!(f<0||f>25||b<0||b>=1||d<0||d>=1)},s.cu=function(f,u){return f[0]=u[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=u[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=u[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},s.cv=class extends BA{},s.cw=r2,s.cy=function(f){return f.message===oe},s.cz=Ue,s.d=ge,s.e=Ke,s.f=f=>a(void 0,void 0,void 0,(function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));const u=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(u)}catch(d){throw new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),s.g=ue,s.h=f=>new Promise(((u,d)=>{const b=new Image;b.onload=()=>{u(b),URL.revokeObjectURL(b.src),b.onload=null,window.requestAnimationFrame((()=>{b.src=Ln}))},b.onerror=()=>d(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const S=new Blob([new Uint8Array(f)],{type:"image/png"});b.src=f.byteLength?URL.createObjectURL(S):Ln})),s.i=Ot,s.j=(f,u)=>lt(Ke(f,{type:"json"}),u),s.k=Mt,s.l=yt,s.m=lt,s.n=(f,u)=>lt(Ke(f,{type:"arrayBuffer"}),u),s.o=function(f){return new Tp(f).readFields(bC,[])},s.p=Ov,s.q=gl,s.r=za,s.s=gn,s.t=Nd,s.u=Or,s.v=st,s.w=pt,s.x=EA,s.y=nc,s.z=tA})),r("worker",["./shared"],(function(s){class a{constructor(ne,ue){this.keyCache={},ne&&this.replace(ne,ue)}replace(ne,ue){this._layerConfigs={},this._layers={},this.update(ne,[],ue)}update(ne,ue,ye){for(const Ve of ne){this._layerConfigs[Ve.id]=Ve;const lt=this._layers[Ve.id]=s.bJ(Ve,ye);lt._featureFilter=s.aa(lt.filter,ye),this.keyCache[Ve.id]&&delete this.keyCache[Ve.id]}for(const Ve of ue)delete this.keyCache[Ve],delete this._layerConfigs[Ve],delete this._layers[Ve];this.familiesBySource={};const Ue=s.cC(Object.values(this._layerConfigs),this.keyCache);for(const Ve of Ue){const lt=Ve.map((Pt=>this._layers[Pt.id])),ge=lt[0];if(ge.visibility==="none")continue;const Be=ge.source||"";let v=this.familiesBySource[Be];v||(v=this.familiesBySource[Be]={});const yt=ge.sourceLayer||"_geojsonTileLayer";let Mt=v[yt];Mt||(Mt=v[yt]=[]),Mt.push(lt)}}}class c{constructor(ne){const ue={},ye=[];for(const ge in ne){const Be=ne[ge],v=ue[ge]={};for(const yt in Be){const Mt=Be[+yt];if(!Mt||Mt.bitmap.width===0||Mt.bitmap.height===0)continue;const Pt={x:0,y:0,w:Mt.bitmap.width+2,h:Mt.bitmap.height+2};ye.push(Pt),v[yt]={rect:Pt,metrics:Mt.metrics}}}const{w:Ue,h:Ve}=s.p(ye),lt=new s.q({width:Ue||1,height:Ve||1});for(const ge in ne){const Be=ne[ge];for(const v in Be){const yt=Be[+v];if(!yt||yt.bitmap.width===0||yt.bitmap.height===0)continue;const Mt=ue[ge][v].rect;s.q.copy(yt.bitmap,lt,{x:0,y:0},{x:Mt.x+1,y:Mt.y+1},yt.bitmap)}}this.image=lt,this.positions=ue}}s.cD("GlyphAtlas",c);class h{constructor(ne){this.tileID=new s.Z(ne.tileID.overscaledZ,ne.tileID.wrap,ne.tileID.canonical.z,ne.tileID.canonical.x,ne.tileID.canonical.y),this.uid=ne.uid,this.zoom=ne.zoom,this.pixelRatio=ne.pixelRatio,this.tileSize=ne.tileSize,this.source=ne.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ne.showCollisionBoxes,this.collectResourceTiming=!!ne.collectResourceTiming,this.returnDependencies=!!ne.returnDependencies,this.promoteId=ne.promoteId,this.inFlightDependencies=[]}parse(ne,ue,ye,Ue,Ve){return s._(this,void 0,void 0,(function*(){this.status="parsing",this.data=ne,this.collisionBoxArray=new s.a8;const lt=new s.cE(Object.keys(ne.layers).sort()),ge=new s.cF(this.tileID,this.promoteId);ge.bucketLayerIDs=[];const Be={},v={featureIndex:ge,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:ye,subdivisionGranularity:Ve},yt=ue.familiesBySource[this.source];for(const Zt in yt){const pr=ne.layers[Zt];if(!pr)continue;pr.version===1&&s.w(`Vector tile source "${this.source}" layer "${Zt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Zi=lt.encode(Zt),ea=[];for(let no=0;no<pr.length;no++){const sn=pr.feature(no),Ci=ge.getId(sn,Zt);ea.push({feature:sn,id:Ci,index:no,sourceLayerIndex:Zi})}for(const no of yt[Zt]){const sn=no[0];sn.source!==this.source&&s.w(`layer.source = ${sn.source} does not equal this.source = ${this.source}`),sn.minzoom&&this.zoom<Math.floor(sn.minzoom)||sn.maxzoom&&this.zoom>=sn.maxzoom||sn.visibility!=="none"&&(m(no,this.zoom,ye),(Be[sn.id]=sn.createBucket({index:ge.bucketLayerIDs.length,layers:no,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Zi,sourceID:this.source})).populate(ea,v,this.tileID.canonical),ge.bucketLayerIDs.push(no.map((Ci=>Ci.id))))}}const Mt=s.bN(v.glyphDependencies,(Zt=>Object.keys(Zt).map(Number)));this.inFlightDependencies.forEach((Zt=>Zt?.abort())),this.inFlightDependencies=[];let Pt=Promise.resolve({});if(Object.keys(Mt).length){const Zt=new AbortController;this.inFlightDependencies.push(Zt),Pt=Ue.sendAsync({type:"GG",data:{stacks:Mt,source:this.source,tileID:this.tileID,type:"glyphs"}},Zt)}const st=Object.keys(v.iconDependencies);let fn=Promise.resolve({});if(st.length){const Zt=new AbortController;this.inFlightDependencies.push(Zt),fn=Ue.sendAsync({type:"GI",data:{icons:st,source:this.source,tileID:this.tileID,type:"icons"}},Zt)}const Fn=Object.keys(v.patternDependencies);let pn=Promise.resolve({});if(Fn.length){const Zt=new AbortController;this.inFlightDependencies.push(Zt),pn=Ue.sendAsync({type:"GI",data:{icons:Fn,source:this.source,tileID:this.tileID,type:"patterns"}},Zt)}const $n=v.dashDependencies;let Zn=Promise.resolve({});if(Object.keys($n).length){const Zt=new AbortController;this.inFlightDependencies.push(Zt),Zn=Ue.sendAsync({type:"GDA",data:{dashes:$n}},Zt)}const[ai,Hi,Ti,tr]=yield Promise.all([Pt,fn,pn,Zn]),oi=new c(ai),Pi=new s.cG(Hi,Ti);for(const Zt in Be){const pr=Be[Zt];pr instanceof s.a9?(m(pr.layers,this.zoom,ye),s.cH({bucket:pr,glyphMap:ai,glyphPositions:oi.positions,imageMap:Hi,imagePositions:Pi.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:v.subdivisionGranularity})):pr.hasDependencies&&(pr instanceof s.cI||pr instanceof s.cJ||pr instanceof s.cK)&&(m(pr.layers,this.zoom,ye),pr.addFeatures(v,this.tileID.canonical,Pi.patternPositions,tr))}return this.status="done",{buckets:Object.values(Be).filter((Zt=>!Zt.isEmpty())),featureIndex:ge,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:oi.image,imageAtlas:Pi,dashPositions:tr,glyphMap:this.returnDependencies?ai:null,iconMap:this.returnDependencies?Hi:null,glyphPositions:this.returnDependencies?oi.positions:null}}))}}function m(ee,ne,ue){const ye=new s.F(ne);for(const Ue of ee)Ue.recalculate(ye,ue)}class y{constructor(ne,ue,ye){this.actor=ne,this.layerIndex=ue,this.availableImages=ye,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ne,ue){return s._(this,void 0,void 0,(function*(){const ye=yield s.n(ne.request,ue);try{return{vectorTile:new s.cL(new s.cM(ye.data)),rawData:ye.data,cacheControl:ye.cacheControl,expires:ye.expires}}catch(Ue){const Ve=new Uint8Array(ye.data);let lt=`Unable to parse the tile at ${ne.request.url}, `;throw lt+=Ve[0]===31&&Ve[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ue.message}`,new Error(lt)}}))}loadTile(ne){return s._(this,void 0,void 0,(function*(){const ue=ne.uid,ye=!!(ne&&ne.request&&ne.request.collectResourceTiming)&&new s.cN(ne.request),Ue=new h(ne);this.loading[ue]=Ue;const Ve=new AbortController;Ue.abort=Ve;try{const lt=yield this.loadVectorTile(ne,Ve);if(delete this.loading[ue],!lt)return null;const ge=lt.rawData,Be={};lt.expires&&(Be.expires=lt.expires),lt.cacheControl&&(Be.cacheControl=lt.cacheControl);const v={};if(ye){const Mt=ye.finish();Mt&&(v.resourceTiming=JSON.parse(JSON.stringify(Mt)))}Ue.vectorTile=lt.vectorTile;const yt=Ue.parse(lt.vectorTile,this.layerIndex,this.availableImages,this.actor,ne.subdivisionGranularity);this.loaded[ue]=Ue,this.fetching[ue]={rawTileData:ge,cacheControl:Be,resourceTiming:v};try{const Mt=yield yt;return s.e({rawTileData:ge.slice(0)},Mt,Be,v)}finally{delete this.fetching[ue]}}catch(lt){throw delete this.loading[ue],Ue.status="done",this.loaded[ue]=Ue,lt}}))}reloadTile(ne){return s._(this,void 0,void 0,(function*(){const ue=ne.uid;if(!this.loaded||!this.loaded[ue])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ye=this.loaded[ue];if(ye.showCollisionBoxes=ne.showCollisionBoxes,ye.status==="parsing"){const Ue=yield ye.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor,ne.subdivisionGranularity);let Ve;if(this.fetching[ue]){const{rawTileData:lt,cacheControl:ge,resourceTiming:Be}=this.fetching[ue];delete this.fetching[ue],Ve=s.e({rawTileData:lt.slice(0)},Ue,ge,Be)}else Ve=Ue;return Ve}if(ye.status==="done"&&ye.vectorTile)return ye.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor,ne.subdivisionGranularity)}))}abortTile(ne){return s._(this,void 0,void 0,(function*(){const ue=this.loading,ye=ne.uid;ue&&ue[ye]&&ue[ye].abort&&(ue[ye].abort.abort(),delete ue[ye])}))}removeTile(ne){return s._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[ne.uid]&&delete this.loaded[ne.uid]}))}}class M{constructor(){this.loaded={}}loadTile(ne){return s._(this,void 0,void 0,(function*(){const{uid:ue,encoding:ye,rawImageData:Ue,redFactor:Ve,greenFactor:lt,blueFactor:ge,baseShift:Be}=ne,v=Ue.width+2,yt=Ue.height+2,Mt=s.b(Ue)?new s.R({width:v,height:yt},yield s.cO(Ue,-1,-1,v,yt)):Ue,Pt=new s.cP(ue,Mt,ye,Ve,lt,ge,Be);return this.loaded=this.loaded||{},this.loaded[ue]=Pt,Pt}))}removeTile(ne){const ue=this.loaded,ye=ne.uid;ue&&ue[ye]&&delete ue[ye]}}var x,k,P=(function(){if(k)return x;function ee(ue,ye){if(ue.length!==0){ne(ue[0],ye);for(var Ue=1;Ue<ue.length;Ue++)ne(ue[Ue],!ye)}}function ne(ue,ye){for(var Ue=0,Ve=0,lt=0,ge=ue.length,Be=ge-1;lt<ge;Be=lt++){var v=(ue[lt][0]-ue[Be][0])*(ue[Be][1]+ue[lt][1]),yt=Ue+v;Ve+=Math.abs(Ue)>=Math.abs(v)?Ue-yt+v:v-yt+Ue,Ue=yt}Ue+Ve>=0!=!!ye&&ue.reverse()}return k=1,x=function ue(ye,Ue){var Ve,lt=ye&&ye.type;if(lt==="FeatureCollection")for(Ve=0;Ve<ye.features.length;Ve++)ue(ye.features[Ve],Ue);else if(lt==="GeometryCollection")for(Ve=0;Ve<ye.geometries.length;Ve++)ue(ye.geometries[Ve],Ue);else if(lt==="Feature")ue(ye.geometry,Ue);else if(lt==="Polygon")ee(ye.coordinates,Ue);else if(lt==="MultiPolygon")for(Ve=0;Ve<ye.coordinates.length;Ve++)ee(ye.coordinates[Ve],Ue);return ye}})(),F=s.cQ(P);class j extends s.cS{constructor(ne,ue){super(new s.cM,0,ue,[],[]),this.feature=ne,this.type=ne.type,this.properties=ne.tags?ne.tags:{},"id"in ne&&(typeof ne.id=="string"?this.id=parseInt(ne.id,10):typeof ne.id!="number"||isNaN(ne.id)||(this.id=ne.id))}loadGeometry(){const ne=[],ue=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const ye of ue){const Ue=[];for(const Ve of ye)Ue.push(new s.P(Ve[0],Ve[1]));ne.push(Ue)}return ne}}class q extends s.cR{constructor(ne,ue){super(new s.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=ue?ue.version:1,this.extent=ue?ue.extent:4096,this.length=ne.length,this.features=ne}feature(ne){return new j(this.features[ne],this.extent)}}function V(ee,ne){ne.writeVarintField(15,ee.version||1),ne.writeStringField(1,ee.name||""),ne.writeVarintField(5,ee.extent||4096);const ue={keys:[],values:[],keycache:{},valuecache:{}};for(let Ve=0;Ve<ee.length;Ve++)ue.feature=ee.feature(Ve),ne.writeMessage(2,H,ue);const ye=ue.keys;for(const Ve of ye)ne.writeStringField(3,Ve);const Ue=ue.values;for(const Ve of Ue)ne.writeMessage(4,le,Ve)}function H(ee,ne){if(!ee.feature)return;const ue=ee.feature;ue.id!==void 0&&ne.writeVarintField(1,ue.id),ne.writeMessage(2,G,ee),ne.writeVarintField(3,ue.type),ne.writeMessage(4,se,ue)}function G(ee,ne){for(const ue in ee.feature?.properties){let ye=ee.feature.properties[ue],Ue=ee.keycache[ue];if(ye===null)continue;Ue===void 0&&(ee.keys.push(ue),Ue=ee.keys.length-1,ee.keycache[ue]=Ue),ne.writeVarint(Ue),typeof ye!="string"&&typeof ye!="boolean"&&typeof ye!="number"&&(ye=JSON.stringify(ye));const Ve=typeof ye+":"+ye;let lt=ee.valuecache[Ve];lt===void 0&&(ee.values.push(ye),lt=ee.values.length-1,ee.valuecache[Ve]=lt),ne.writeVarint(lt)}}function Y(ee,ne){return(ne<<3)+(7&ee)}function z(ee){return ee<<1^ee>>31}function se(ee,ne){const ue=ee.loadGeometry(),ye=ee.type;let Ue=0,Ve=0;for(const lt of ue){let ge=1;ye===1&&(ge=lt.length),ne.writeVarint(Y(1,ge));const Be=ye===3?lt.length-1:lt.length;for(let v=0;v<Be;v++){v===1&&ye!==1&&ne.writeVarint(Y(2,Be-1));const yt=lt[v].x-Ue,Mt=lt[v].y-Ve;ne.writeVarint(z(yt)),ne.writeVarint(z(Mt)),Ue+=yt,Ve+=Mt}ee.type===3&&ne.writeVarint(Y(7,1))}}function le(ee,ne){const ue=typeof ee;ue==="string"?ne.writeStringField(1,ee):ue==="boolean"?ne.writeBooleanField(7,ee):ue==="number"&&(ee%1!=0?ne.writeDoubleField(3,ee):ee<0?ne.writeSVarintField(6,ee):ne.writeVarintField(5,ee))}const me={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ee=>ee},de=Math.fround||(be=new Float32Array(1),ee=>(be[0]=+ee,be[0]));var be;class Ee{constructor(ne){this.options=Object.assign(Object.create(me),ne),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ne){const{log:ue,minZoom:ye,maxZoom:Ue}=this.options;ue&&console.time("total time");const Ve=`prepare ${ne.length} points`;ue&&console.time(Ve),this.points=ne;const lt=[];for(let Be=0;Be<ne.length;Be++){const v=ne[Be];if(!v.geometry)continue;const[yt,Mt]=v.geometry.coordinates,Pt=de(Ie(yt)),st=de(Qe(Mt));lt.push(Pt,st,1/0,Be,-1,1),this.options.reduce&&lt.push(0)}let ge=this.trees[Ue+1]=this._createTree(lt);ue&&console.timeEnd(Ve);for(let Be=Ue;Be>=ye;Be--){const v=+Date.now();ge=this.trees[Be]=this._createTree(this._cluster(ge,Be)),ue&&console.log("z%d: %d clusters in %dms",Be,ge.numItems,+Date.now()-v)}return ue&&console.timeEnd("total time"),this}getClusters(ne,ue){let ye=((ne[0]+180)%360+360)%360-180;const Ue=Math.max(-90,Math.min(90,ne[1]));let Ve=ne[2]===180?180:((ne[2]+180)%360+360)%360-180;const lt=Math.max(-90,Math.min(90,ne[3]));if(ne[2]-ne[0]>=360)ye=-180,Ve=180;else if(ye>Ve){const Mt=this.getClusters([ye,Ue,180,lt],ue),Pt=this.getClusters([-180,Ue,Ve,lt],ue);return Mt.concat(Pt)}const ge=this.trees[this._limitZoom(ue)],Be=ge.range(Ie(ye),Qe(lt),Ie(Ve),Qe(Ue)),v=ge.data,yt=[];for(const Mt of Be){const Pt=this.stride*Mt;yt.push(v[Pt+5]>1?De(v,Pt,this.clusterProps):this.points[v[Pt+3]])}return yt}getChildren(ne){const ue=this._getOriginId(ne),ye=this._getOriginZoom(ne),Ue="No cluster with the specified id.",Ve=this.trees[ye];if(!Ve)throw new Error(Ue);const lt=Ve.data;if(ue*this.stride>=lt.length)throw new Error(Ue);const ge=this.options.radius/(this.options.extent*Math.pow(2,ye-1)),Be=Ve.within(lt[ue*this.stride],lt[ue*this.stride+1],ge),v=[];for(const yt of Be){const Mt=yt*this.stride;lt[Mt+4]===ne&&v.push(lt[Mt+5]>1?De(lt,Mt,this.clusterProps):this.points[lt[Mt+3]])}if(v.length===0)throw new Error(Ue);return v}getLeaves(ne,ue,ye){const Ue=[];return this._appendLeaves(Ue,ne,ue=ue||10,ye=ye||0,0),Ue}getTile(ne,ue,ye){const Ue=this.trees[this._limitZoom(ne)],Ve=Math.pow(2,ne),{extent:lt,radius:ge}=this.options,Be=ge/lt,v=(ye-Be)/Ve,yt=(ye+1+Be)/Ve,Mt={features:[]};return this._addTileFeatures(Ue.range((ue-Be)/Ve,v,(ue+1+Be)/Ve,yt),Ue.data,ue,ye,Ve,Mt),ue===0&&this._addTileFeatures(Ue.range(1-Be/Ve,v,1,yt),Ue.data,Ve,ye,Ve,Mt),ue===Ve-1&&this._addTileFeatures(Ue.range(0,v,Be/Ve,yt),Ue.data,-1,ye,Ve,Mt),Mt.features.length?Mt:null}getClusterExpansionZoom(ne){let ue=this._getOriginZoom(ne)-1;for(;ue<=this.options.maxZoom;){const ye=this.getChildren(ne);if(ue++,ye.length!==1)break;ne=ye[0].properties.cluster_id}return ue}_appendLeaves(ne,ue,ye,Ue,Ve){const lt=this.getChildren(ue);for(const ge of lt){const Be=ge.properties;if(Be&&Be.cluster?Ve+Be.point_count<=Ue?Ve+=Be.point_count:Ve=this._appendLeaves(ne,Be.cluster_id,ye,Ue,Ve):Ve<Ue?Ve++:ne.push(ge),ne.length===ye)break}return Ve}_createTree(ne){const ue=new s.aI(ne.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ye=0;ye<ne.length;ye+=this.stride)ue.add(ne[ye],ne[ye+1]);return ue.finish(),ue.data=ne,ue}_addTileFeatures(ne,ue,ye,Ue,Ve,lt){for(const ge of ne){const Be=ge*this.stride,v=ue[Be+5]>1;let yt,Mt,Pt;if(v)yt=je(ue,Be,this.clusterProps),Mt=ue[Be],Pt=ue[Be+1];else{const Fn=this.points[ue[Be+3]];yt=Fn.properties;const[pn,$n]=Fn.geometry.coordinates;Mt=Ie(pn),Pt=Qe($n)}const st={type:1,geometry:[[Math.round(this.options.extent*(Mt*Ve-ye)),Math.round(this.options.extent*(Pt*Ve-Ue))]],tags:yt};let fn;fn=v||this.options.generateId?ue[Be+3]:this.points[ue[Be+3]].id,fn!==void 0&&(st.id=fn),lt.features.push(st)}}_limitZoom(ne){return Math.max(this.options.minZoom,Math.min(Math.floor(+ne),this.options.maxZoom+1))}_cluster(ne,ue){const{radius:ye,extent:Ue,reduce:Ve,minPoints:lt}=this.options,ge=ye/(Ue*Math.pow(2,ue)),Be=ne.data,v=[],yt=this.stride;for(let Mt=0;Mt<Be.length;Mt+=yt){if(Be[Mt+2]<=ue)continue;Be[Mt+2]=ue;const Pt=Be[Mt],st=Be[Mt+1],fn=ne.within(Be[Mt],Be[Mt+1],ge),Fn=Be[Mt+5];let pn=Fn;for(const $n of fn){const Zn=$n*yt;Be[Zn+2]>ue&&(pn+=Be[Zn+5])}if(pn>Fn&&pn>=lt){let $n,Zn=Pt*Fn,ai=st*Fn,Hi=-1;const Ti=(Mt/yt<<5)+(ue+1)+this.points.length;for(const tr of fn){const oi=tr*yt;if(Be[oi+2]<=ue)continue;Be[oi+2]=ue;const Pi=Be[oi+5];Zn+=Be[oi]*Pi,ai+=Be[oi+1]*Pi,Be[oi+4]=Ti,Ve&&($n||($n=this._map(Be,Mt,!0),Hi=this.clusterProps.length,this.clusterProps.push($n)),Ve($n,this._map(Be,oi)))}Be[Mt+4]=Ti,v.push(Zn/pn,ai/pn,1/0,Ti,-1,pn),Ve&&v.push(Hi)}else{for(let $n=0;$n<yt;$n++)v.push(Be[Mt+$n]);if(pn>1)for(const $n of fn){const Zn=$n*yt;if(!(Be[Zn+2]<=ue)){Be[Zn+2]=ue;for(let ai=0;ai<yt;ai++)v.push(Be[Zn+ai])}}}}return v}_getOriginId(ne){return ne-this.points.length>>5}_getOriginZoom(ne){return(ne-this.points.length)%32}_map(ne,ue,ye){if(ne[ue+5]>1){const lt=this.clusterProps[ne[ue+6]];return ye?Object.assign({},lt):lt}const Ue=this.points[ne[ue+3]].properties,Ve=this.options.map(Ue);return ye&&Ve===Ue?Object.assign({},Ve):Ve}}function De(ee,ne,ue){return{type:"Feature",id:ee[ne+3],properties:je(ee,ne,ue),geometry:{type:"Point",coordinates:[(ye=ee[ne],360*(ye-.5)),et(ee[ne+1])]}};var ye}function je(ee,ne,ue){const ye=ee[ne+5],Ue=ye>=1e4?`${Math.round(ye/1e3)}k`:ye>=1e3?Math.round(ye/100)/10+"k":ye,Ve=ee[ne+6],lt=Ve===-1?{}:Object.assign({},ue[Ve]);return Object.assign(lt,{cluster:!0,cluster_id:ee[ne+3],point_count:ye,point_count_abbreviated:Ue})}function Ie(ee){return ee/360+.5}function Qe(ee){const ne=Math.sin(ee*Math.PI/180),ue=.5-.25*Math.log((1+ne)/(1-ne))/Math.PI;return ue<0?0:ue>1?1:ue}function et(ee){const ne=(180-360*ee)*Math.PI/180;return 360*Math.atan(Math.exp(ne))/Math.PI-90}function dt(ee,ne,ue,ye){let Ue=ye;const Ve=ne+(ue-ne>>1);let lt,ge=ue-ne;const Be=ee[ne],v=ee[ne+1],yt=ee[ue],Mt=ee[ue+1];for(let Pt=ne+3;Pt<ue;Pt+=3){const st=ke(ee[Pt],ee[Pt+1],Be,v,yt,Mt);if(st>Ue)lt=Pt,Ue=st;else if(st===Ue){const fn=Math.abs(Pt-Ve);fn<ge&&(lt=Pt,ge=fn)}}Ue>ye&&(lt-ne>3&&dt(ee,ne,lt,ye),ee[lt+2]=Ue,ue-lt>3&&dt(ee,lt,ue,ye))}function ke(ee,ne,ue,ye,Ue,Ve){let lt=Ue-ue,ge=Ve-ye;if(lt!==0||ge!==0){const Be=((ee-ue)*lt+(ne-ye)*ge)/(lt*lt+ge*ge);Be>1?(ue=Ue,ye=Ve):Be>0&&(ue+=lt*Be,ye+=ge*Be)}return lt=ee-ue,ge=ne-ye,lt*lt+ge*ge}function we(ee,ne,ue,ye){const Ue={id:ee??null,type:ne,geometry:ue,tags:ye,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ne==="Point"||ne==="MultiPoint"||ne==="LineString")ze(Ue,ue);else if(ne==="Polygon")ze(Ue,ue[0]);else if(ne==="MultiLineString")for(const Ve of ue)ze(Ue,Ve);else if(ne==="MultiPolygon")for(const Ve of ue)ze(Ue,Ve[0]);return Ue}function ze(ee,ne){for(let ue=0;ue<ne.length;ue+=3)ee.minX=Math.min(ee.minX,ne[ue]),ee.minY=Math.min(ee.minY,ne[ue+1]),ee.maxX=Math.max(ee.maxX,ne[ue]),ee.maxY=Math.max(ee.maxY,ne[ue+1])}function xe(ee,ne,ue,ye){if(!ne.geometry)return;const Ue=ne.geometry.coordinates;if(Ue&&Ue.length===0)return;const Ve=ne.geometry.type,lt=Math.pow(ue.tolerance/((1<<ue.maxZoom)*ue.extent),2);let ge=[],Be=ne.id;if(ue.promoteId?Be=ne.properties[ue.promoteId]:ue.generateId&&(Be=ye||0),Ve==="Point")At(Ue,ge);else if(Ve==="MultiPoint")for(const v of Ue)At(v,ge);else if(Ve==="LineString")it(Ue,ge,lt,!1);else if(Ve==="MultiLineString"){if(ue.lineMetrics){for(const v of Ue)ge=[],it(v,ge,lt,!1),ee.push(we(Be,"LineString",ge,ne.properties));return}bt(Ue,ge,lt,!1)}else if(Ve==="Polygon")bt(Ue,ge,lt,!0);else{if(Ve!=="MultiPolygon"){if(Ve==="GeometryCollection"){for(const v of ne.geometry.geometries)xe(ee,{id:Be,geometry:v,properties:ne.properties},ue,ye);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const v of Ue){const yt=[];bt(v,yt,lt,!0),ge.push(yt)}}ee.push(we(Be,Ve,ge,ne.properties))}function At(ee,ne){ne.push(Bt(ee[0]),Ke(ee[1]),0)}function it(ee,ne,ue,ye){let Ue,Ve,lt=0;for(let Be=0;Be<ee.length;Be++){const v=Bt(ee[Be][0]),yt=Ke(ee[Be][1]);ne.push(v,yt,0),Be>0&&(lt+=ye?(Ue*yt-v*Ve)/2:Math.sqrt(Math.pow(v-Ue,2)+Math.pow(yt-Ve,2))),Ue=v,Ve=yt}const ge=ne.length-3;ne[2]=1,dt(ne,0,ge,ue),ne[ge+2]=1,ne.size=Math.abs(lt),ne.start=0,ne.end=ne.size}function bt(ee,ne,ue,ye){for(let Ue=0;Ue<ee.length;Ue++){const Ve=[];it(ee[Ue],Ve,ue,ye),ne.push(Ve)}}function Bt(ee){return ee/360+.5}function Ke(ee){const ne=Math.sin(ee*Math.PI/180),ue=.5-.25*Math.log((1+ne)/(1-ne))/Math.PI;return ue<0?0:ue>1?1:ue}function Te(ee,ne,ue,ye,Ue,Ve,lt,ge){if(ye/=ne,Ve>=(ue/=ne)&&lt<ye)return ee;if(lt<ue||Ve>=ye)return null;const Be=[];for(const v of ee){const yt=v.geometry;let Mt=v.type;const Pt=Ue===0?v.minX:v.minY,st=Ue===0?v.maxX:v.maxY;if(Pt>=ue&&st<ye){Be.push(v);continue}if(st<ue||Pt>=ye)continue;let fn=[];if(Mt==="Point"||Mt==="MultiPoint")Se(yt,fn,ue,ye,Ue);else if(Mt==="LineString")Ne(yt,fn,ue,ye,Ue,!1,ge.lineMetrics);else if(Mt==="MultiLineString")rt(yt,fn,ue,ye,Ue,!1);else if(Mt==="Polygon")rt(yt,fn,ue,ye,Ue,!0);else if(Mt==="MultiPolygon")for(const Fn of yt){const pn=[];rt(Fn,pn,ue,ye,Ue,!0),pn.length&&fn.push(pn)}if(fn.length){if(ge.lineMetrics&&Mt==="LineString"){for(const Fn of fn)Be.push(we(v.id,Mt,Fn,v.tags));continue}Mt!=="LineString"&&Mt!=="MultiLineString"||(fn.length===1?(Mt="LineString",fn=fn[0]):Mt="MultiLineString"),Mt!=="Point"&&Mt!=="MultiPoint"||(Mt=fn.length===3?"Point":"MultiPoint"),Be.push(we(v.id,Mt,fn,v.tags))}}return Be.length?Be:null}function Se(ee,ne,ue,ye,Ue){for(let Ve=0;Ve<ee.length;Ve+=3){const lt=ee[Ve+Ue];lt>=ue&&lt<=ye&&pt(ne,ee[Ve],ee[Ve+1],ee[Ve+2])}}function Ne(ee,ne,ue,ye,Ue,Ve,lt){let ge=ut(ee);const Be=Ue===0?Dt:Ot;let v,yt,Mt=ee.start;for(let pn=0;pn<ee.length-3;pn+=3){const $n=ee[pn],Zn=ee[pn+1],ai=ee[pn+2],Hi=ee[pn+3],Ti=ee[pn+4],tr=Ue===0?$n:Zn,oi=Ue===0?Hi:Ti;let Pi=!1;lt&&(v=Math.sqrt(Math.pow($n-Hi,2)+Math.pow(Zn-Ti,2))),tr<ue?oi>ue&&(yt=Be(ge,$n,Zn,Hi,Ti,ue),lt&&(ge.start=Mt+v*yt)):tr>ye?oi<ye&&(yt=Be(ge,$n,Zn,Hi,Ti,ye),lt&&(ge.start=Mt+v*yt)):pt(ge,$n,Zn,ai),oi<ue&&tr>=ue&&(yt=Be(ge,$n,Zn,Hi,Ti,ue),Pi=!0),oi>ye&&tr<=ye&&(yt=Be(ge,$n,Zn,Hi,Ti,ye),Pi=!0),!Ve&&Pi&&(lt&&(ge.end=Mt+v*yt),ne.push(ge),ge=ut(ee)),lt&&(Mt+=v)}let Pt=ee.length-3;const st=ee[Pt],fn=ee[Pt+1],Fn=Ue===0?st:fn;Fn>=ue&&Fn<=ye&&pt(ge,st,fn,ee[Pt+2]),Pt=ge.length-3,Ve&&Pt>=3&&(ge[Pt]!==ge[0]||ge[Pt+1]!==ge[1])&&pt(ge,ge[0],ge[1],ge[2]),ge.length&&ne.push(ge)}function ut(ee){const ne=[];return ne.size=ee.size,ne.start=ee.start,ne.end=ee.end,ne}function rt(ee,ne,ue,ye,Ue,Ve){for(const lt of ee)Ne(lt,ne,ue,ye,Ue,Ve,!1)}function pt(ee,ne,ue,ye){ee.push(ne,ue,ye)}function Dt(ee,ne,ue,ye,Ue,Ve){const lt=(Ve-ne)/(ye-ne);return pt(ee,Ve,ue+(Ue-ue)*lt,1),lt}function Ot(ee,ne,ue,ye,Ue,Ve){const lt=(Ve-ue)/(Ue-ue);return pt(ee,ne+(ye-ne)*lt,Ve,1),lt}function Jt(ee,ne){const ue=[];for(let ye=0;ye<ee.length;ye++){const Ue=ee[ye],Ve=Ue.type;let lt;if(Ve==="Point"||Ve==="MultiPoint"||Ve==="LineString")lt=Tn(Ue.geometry,ne);else if(Ve==="MultiLineString"||Ve==="Polygon"){lt=[];for(const ge of Ue.geometry)lt.push(Tn(ge,ne))}else if(Ve==="MultiPolygon"){lt=[];for(const ge of Ue.geometry){const Be=[];for(const v of ge)Be.push(Tn(v,ne));lt.push(Be)}}ue.push(we(Ue.id,Ve,lt,Ue.tags))}return ue}function Tn(ee,ne){const ue=[];ue.size=ee.size,ee.start!==void 0&&(ue.start=ee.start,ue.end=ee.end);for(let ye=0;ye<ee.length;ye+=3)ue.push(ee[ye]+ne,ee[ye+1],ee[ye+2]);return ue}function Ln(ee,ne){if(ee.transformed)return ee;const ue=1<<ee.z,ye=ee.x,Ue=ee.y;for(const Ve of ee.features){const lt=Ve.geometry,ge=Ve.type;if(Ve.geometry=[],ge===1)for(let Be=0;Be<lt.length;Be+=2)Ve.geometry.push(ii(lt[Be],lt[Be+1],ne,ue,ye,Ue));else for(let Be=0;Be<lt.length;Be++){const v=[];for(let yt=0;yt<lt[Be].length;yt+=2)v.push(ii(lt[Be][yt],lt[Be][yt+1],ne,ue,ye,Ue));Ve.geometry.push(v)}}return ee.transformed=!0,ee}function ii(ee,ne,ue,ye,Ue,Ve){return[Math.round(ue*(ee*ye-Ue)),Math.round(ue*(ne*ye-Ve))]}function wn(ee,ne,ue,ye,Ue){const Ve=ne===Ue.maxZoom?0:Ue.tolerance/((1<<ne)*Ue.extent),lt={features:[],numPoints:0,numSimplified:0,numFeatures:ee.length,source:null,x:ue,y:ye,z:ne,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ge of ee)Rn(lt,ge,Ve,Ue);return lt}function Rn(ee,ne,ue,ye){const Ue=ne.geometry,Ve=ne.type,lt=[];if(ee.minX=Math.min(ee.minX,ne.minX),ee.minY=Math.min(ee.minY,ne.minY),ee.maxX=Math.max(ee.maxX,ne.maxX),ee.maxY=Math.max(ee.maxY,ne.maxY),Ve==="Point"||Ve==="MultiPoint")for(let ge=0;ge<Ue.length;ge+=3)lt.push(Ue[ge],Ue[ge+1]),ee.numPoints++,ee.numSimplified++;else if(Ve==="LineString")gn(lt,Ue,ee,ue,!1,!1);else if(Ve==="MultiLineString"||Ve==="Polygon")for(let ge=0;ge<Ue.length;ge++)gn(lt,Ue[ge],ee,ue,Ve==="Polygon",ge===0);else if(Ve==="MultiPolygon")for(let ge=0;ge<Ue.length;ge++){const Be=Ue[ge];for(let v=0;v<Be.length;v++)gn(lt,Be[v],ee,ue,!0,v===0)}if(lt.length){let ge=ne.tags||null;if(Ve==="LineString"&&ye.lineMetrics){ge={};for(const v in ne.tags)ge[v]=ne.tags[v];ge.mapbox_clip_start=Ue.start/Ue.size,ge.mapbox_clip_end=Ue.end/Ue.size}const Be={geometry:lt,type:Ve==="Polygon"||Ve==="MultiPolygon"?3:Ve==="LineString"||Ve==="MultiLineString"?2:1,tags:ge};ne.id!==null&&(Be.id=ne.id),ee.features.push(Be)}}function gn(ee,ne,ue,ye,Ue,Ve){const lt=ye*ye;if(ye>0&&ne.size<(Ue?lt:ye))return void(ue.numPoints+=ne.length/3);const ge=[];for(let Be=0;Be<ne.length;Be+=3)(ye===0||ne[Be+2]>lt)&&(ue.numSimplified++,ge.push(ne[Be],ne[Be+1])),ue.numPoints++;Ue&&(function(Be,v){let yt=0;for(let Mt=0,Pt=Be.length,st=Pt-2;Mt<Pt;st=Mt,Mt+=2)yt+=(Be[Mt]-Be[st])*(Be[Mt+1]+Be[st+1]);if(yt>0===v)for(let Mt=0,Pt=Be.length;Mt<Pt/2;Mt+=2){const st=Be[Mt],fn=Be[Mt+1];Be[Mt]=Be[Pt-2-Mt],Be[Mt+1]=Be[Pt-1-Mt],Be[Pt-2-Mt]=st,Be[Pt-1-Mt]=fn}})(ge,Ve),ee.push(ge)}const Yn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Dn{constructor(ne,ue){const ye=(ue=this.options=(function(Ve,lt){for(const ge in lt)Ve[ge]=lt[ge];return Ve})(Object.create(Yn),ue)).debug;if(ye&&console.time("preprocess data"),ue.maxZoom<0||ue.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ue.promoteId&&ue.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ue=(function(Ve,lt){const ge=[];if(Ve.type==="FeatureCollection")for(let Be=0;Be<Ve.features.length;Be++)xe(ge,Ve.features[Be],lt,Be);else xe(ge,Ve.type==="Feature"?Ve:{geometry:Ve},lt);return ge})(ne,ue);this.tiles={},this.tileCoords=[],ye&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ue.indexMaxZoom,ue.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ue=(function(Ve,lt){const ge=lt.buffer/lt.extent;let Be=Ve;const v=Te(Ve,1,-1-ge,ge,0,-1,2,lt),yt=Te(Ve,1,1-ge,2+ge,0,-1,2,lt);return(v||yt)&&(Be=Te(Ve,1,-ge,1+ge,0,-1,2,lt)||[],v&&(Be=Jt(v,1).concat(Be)),yt&&(Be=Be.concat(Jt(yt,-1)))),Be})(Ue,ue),Ue.length&&this.splitTile(Ue,0,0,0),ye&&(Ue.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ne,ue,ye,Ue,Ve,lt,ge){const Be=[ne,ue,ye,Ue],v=this.options,yt=v.debug;for(;Be.length;){Ue=Be.pop(),ye=Be.pop(),ue=Be.pop(),ne=Be.pop();const Mt=1<<ue,Pt=Tt(ue,ye,Ue);let st=this.tiles[Pt];if(!st&&(yt>1&&console.time("creation"),st=this.tiles[Pt]=wn(ne,ue,ye,Ue,v),this.tileCoords.push({z:ue,x:ye,y:Ue}),yt)){yt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ue,ye,Ue,st.numFeatures,st.numPoints,st.numSimplified),console.timeEnd("creation"));const Pi=`z${ue}`;this.stats[Pi]=(this.stats[Pi]||0)+1,this.total++}if(st.source=ne,Ve==null){if(ue===v.indexMaxZoom||st.numPoints<=v.indexMaxPoints)continue}else{if(ue===v.maxZoom||ue===Ve)continue;if(Ve!=null){const Pi=Ve-ue;if(ye!==lt>>Pi||Ue!==ge>>Pi)continue}}if(st.source=null,ne.length===0)continue;yt>1&&console.time("clipping");const fn=.5*v.buffer/v.extent,Fn=.5-fn,pn=.5+fn,$n=1+fn;let Zn=null,ai=null,Hi=null,Ti=null,tr=Te(ne,Mt,ye-fn,ye+pn,0,st.minX,st.maxX,v),oi=Te(ne,Mt,ye+Fn,ye+$n,0,st.minX,st.maxX,v);ne=null,tr&&(Zn=Te(tr,Mt,Ue-fn,Ue+pn,1,st.minY,st.maxY,v),ai=Te(tr,Mt,Ue+Fn,Ue+$n,1,st.minY,st.maxY,v),tr=null),oi&&(Hi=Te(oi,Mt,Ue-fn,Ue+pn,1,st.minY,st.maxY,v),Ti=Te(oi,Mt,Ue+Fn,Ue+$n,1,st.minY,st.maxY,v),oi=null),yt>1&&console.timeEnd("clipping"),Be.push(Zn||[],ue+1,2*ye,2*Ue),Be.push(ai||[],ue+1,2*ye,2*Ue+1),Be.push(Hi||[],ue+1,2*ye+1,2*Ue),Be.push(Ti||[],ue+1,2*ye+1,2*Ue+1)}}getTile(ne,ue,ye){ne=+ne,ue=+ue,ye=+ye;const Ue=this.options,{extent:Ve,debug:lt}=Ue;if(ne<0||ne>24)return null;const ge=1<<ne,Be=Tt(ne,ue=ue+ge&ge-1,ye);if(this.tiles[Be])return Ln(this.tiles[Be],Ve);lt>1&&console.log("drilling down to z%d-%d-%d",ne,ue,ye);let v,yt=ne,Mt=ue,Pt=ye;for(;!v&&yt>0;)yt--,Mt>>=1,Pt>>=1,v=this.tiles[Tt(yt,Mt,Pt)];return v&&v.source?(lt>1&&(console.log("found parent tile z%d-%d-%d",yt,Mt,Pt),console.time("drilling down")),this.splitTile(v.source,yt,Mt,Pt,ne,ue,ye),lt>1&&console.timeEnd("drilling down"),this.tiles[Be]?Ln(this.tiles[Be],Ve):null):null}}function Tt(ee,ne,ue){return 32*((1<<ee)*ue+ne)+ee}class _e extends y{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ne,ue){return s._(this,void 0,void 0,(function*(){const ye=ne.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ue=this._geoJSONIndex.getTile(ye.z,ye.x,ye.y);if(!Ue)return null;const Ve=new q(Ue.features,{version:2,extent:s.$});let lt=(function(ge){const Be=new s.cM;return(function(v,yt){for(const Mt in v.layers)yt.writeMessage(3,V,v.layers[Mt])})(ge,Be),Be.finish()})(Ve);return lt.byteOffset===0&&lt.byteLength===lt.buffer.byteLength||(lt=new Uint8Array(lt)),{vectorTile:Ve,rawData:lt.buffer}}))}loadData(ne){return s._(this,void 0,void 0,(function*(){var ue;(ue=this._pendingRequest)===null||ue===void 0||ue.abort();const ye=!!(ne&&ne.request&&ne.request.collectResourceTiming)&&new s.cN(ne.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ne,this._pendingRequest);const Ue=yield this._pendingData;this._geoJSONIndex=ne.cluster?new Ee((function({superclusterOptions:lt,clusterProperties:ge}){if(!ge||!lt)return lt;const Be={},v={},yt={accumulated:null,zoom:0},Mt={properties:null},Pt=Object.keys(ge);for(const st of Pt){const[fn,Fn]=ge[st],pn=s.cT(Fn),$n=s.cT(typeof fn=="string"?[fn,["accumulated"],["get",st]]:fn);Be[st]=pn.value,v[st]=$n.value}return lt.map=st=>{Mt.properties=st;const fn={};for(const Fn of Pt)fn[Fn]=Be[Fn].evaluate(yt,Mt);return fn},lt.reduce=(st,fn)=>{Mt.properties=fn;for(const Fn of Pt)yt.accumulated=st[Fn],st[Fn]=v[Fn].evaluate(yt,Mt)},lt})(ne)).load(Ue.features):(function(lt,ge){return new Dn(lt,ge)})(Ue,ne.geojsonVtOptions),this.loaded={};const Ve={data:Ue};if(ye){const lt=ye.finish();lt&&(Ve.resourceTiming={},Ve.resourceTiming[ne.source]=JSON.parse(JSON.stringify(lt)))}return Ve}catch(Ue){if(delete this._pendingRequest,s.cy(Ue))return{abandoned:!0};throw Ue}}))}getData(){return s._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(ne){const ue=this.loaded;return ue&&ue[ne.uid]?super.reloadTile(ne):this.loadTile(ne)}loadAndProcessGeoJSON(ne,ue){return s._(this,void 0,void 0,(function*(){let ye=yield this.loadGeoJSON(ne,ue);if(delete this._pendingRequest,typeof ye!="object")throw new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`);if(F(ye,!0),ne.filter){const Ue=s.cT(ne.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ue.result==="error")throw new Error(Ue.value.map((lt=>`${lt.key}: ${lt.message}`)).join(", "));ye={type:"FeatureCollection",features:ye.features.filter((lt=>Ue.value.evaluate({zoom:0},lt)))}}return ye}))}loadGeoJSON(ne,ue){return s._(this,void 0,void 0,(function*(){const{promoteId:ye}=ne;if(ne.request){const Ue=yield s.j(ne.request,ue);return this._dataUpdateable=s.cV(Ue.data,ye)?s.cU(Ue.data,ye):void 0,Ue.data}if(typeof ne.data=="string")try{const Ue=JSON.parse(ne.data);return this._dataUpdateable=s.cV(Ue,ye)?s.cU(Ue,ye):void 0,Ue}catch{throw new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`)}if(!ne.dataDiff)throw new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ne.source}`);return s.cW(this._dataUpdateable,ne.dataDiff,ye),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(ne){return s._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(ne){return this._geoJSONIndex.getClusterExpansionZoom(ne.clusterId)}getClusterChildren(ne){return this._geoJSONIndex.getChildren(ne.clusterId)}getClusterLeaves(ne){return this._geoJSONIndex.getLeaves(ne.clusterId,ne.limit,ne.offset)}}class oe{constructor(ne){this.self=ne,this.actor=new s.J(ne),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(ue,ye)=>{if(this.externalWorkerSourceTypes[ue])throw new Error(`Worker source with name "${ue}" already registered.`);this.externalWorkerSourceTypes[ue]=ye},this.self.addProtocol=s.cA,this.self.removeProtocol=s.cB,this.self.registerRTLTextPlugin=ue=>{s.cX.setMethods(ue)},this.actor.registerMessageHandler("LDT",((ue,ye)=>this._getDEMWorkerSource(ue,ye.source).loadTile(ye))),this.actor.registerMessageHandler("RDT",((ue,ye)=>s._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(ue,ye.source).removeTile(ye)})))),this.actor.registerMessageHandler("GCEZ",((ue,ye)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(ue,ye.type,ye.source).getClusterExpansionZoom(ye)})))),this.actor.registerMessageHandler("GCC",((ue,ye)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(ue,ye.type,ye.source).getClusterChildren(ye)})))),this.actor.registerMessageHandler("GCL",((ue,ye)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(ue,ye.type,ye.source).getClusterLeaves(ye)})))),this.actor.registerMessageHandler("LD",((ue,ye)=>this._getWorkerSource(ue,ye.type,ye.source).loadData(ye))),this.actor.registerMessageHandler("GD",((ue,ye)=>this._getWorkerSource(ue,ye.type,ye.source).getData())),this.actor.registerMessageHandler("LT",((ue,ye)=>this._getWorkerSource(ue,ye.type,ye.source).loadTile(ye))),this.actor.registerMessageHandler("RT",((ue,ye)=>this._getWorkerSource(ue,ye.type,ye.source).reloadTile(ye))),this.actor.registerMessageHandler("AT",((ue,ye)=>this._getWorkerSource(ue,ye.type,ye.source).abortTile(ye))),this.actor.registerMessageHandler("RMT",((ue,ye)=>this._getWorkerSource(ue,ye.type,ye.source).removeTile(ye))),this.actor.registerMessageHandler("RS",((ue,ye)=>s._(this,void 0,void 0,(function*(){if(!this.workerSources[ue]||!this.workerSources[ue][ye.type]||!this.workerSources[ue][ye.type][ye.source])return;const Ue=this.workerSources[ue][ye.type][ye.source];delete this.workerSources[ue][ye.type][ye.source],Ue.removeSource!==void 0&&Ue.removeSource(ye)})))),this.actor.registerMessageHandler("RM",(ue=>s._(this,void 0,void 0,(function*(){delete this.layerIndexes[ue],delete this.availableImages[ue],delete this.workerSources[ue],delete this.demWorkerSources[ue],this.globalStates.delete(ue)})))),this.actor.registerMessageHandler("SR",((ue,ye)=>s._(this,void 0,void 0,(function*(){this.referrer=ye})))),this.actor.registerMessageHandler("SRPS",((ue,ye)=>this._syncRTLPluginState(ue,ye))),this.actor.registerMessageHandler("IS",((ue,ye)=>s._(this,void 0,void 0,(function*(){this.self.importScripts(ye)})))),this.actor.registerMessageHandler("SI",((ue,ye)=>this._setImages(ue,ye))),this.actor.registerMessageHandler("UL",((ue,ye)=>s._(this,void 0,void 0,(function*(){this._getLayerIndex(ue).update(ye.layers,ye.removedIds,this._getGlobalState(ue))})))),this.actor.registerMessageHandler("UGS",((ue,ye)=>s._(this,void 0,void 0,(function*(){const Ue=this._getGlobalState(ue);for(const Ve in ye)Ue[Ve]=ye[Ve]})))),this.actor.registerMessageHandler("SL",((ue,ye)=>s._(this,void 0,void 0,(function*(){this._getLayerIndex(ue).replace(ye,this._getGlobalState(ue))}))))}_getGlobalState(ne){let ue=this.globalStates.get(ne);return ue||(ue={},this.globalStates.set(ne,ue)),ue}_setImages(ne,ue){return s._(this,void 0,void 0,(function*(){this.availableImages[ne]=ue;for(const ye in this.workerSources[ne]){const Ue=this.workerSources[ne][ye];for(const Ve in Ue)Ue[Ve].availableImages=ue}}))}_syncRTLPluginState(ne,ue){return s._(this,void 0,void 0,(function*(){return yield s.cX.syncState(ue,this.self.importScripts)}))}_getAvailableImages(ne){let ue=this.availableImages[ne];return ue||(ue=[]),ue}_getLayerIndex(ne){let ue=this.layerIndexes[ne];return ue||(ue=this.layerIndexes[ne]=new a),ue}_getWorkerSource(ne,ue,ye){if(this.workerSources[ne]||(this.workerSources[ne]={}),this.workerSources[ne][ue]||(this.workerSources[ne][ue]={}),!this.workerSources[ne][ue][ye]){const Ue={sendAsync:(Ve,lt)=>(Ve.targetMapId=ne,this.actor.sendAsync(Ve,lt))};switch(ue){case"vector":this.workerSources[ne][ue][ye]=new y(Ue,this._getLayerIndex(ne),this._getAvailableImages(ne));break;case"geojson":this.workerSources[ne][ue][ye]=new _e(Ue,this._getLayerIndex(ne),this._getAvailableImages(ne));break;default:this.workerSources[ne][ue][ye]=new this.externalWorkerSourceTypes[ue](Ue,this._getLayerIndex(ne),this._getAvailableImages(ne))}}return this.workerSources[ne][ue][ye]}_getDEMWorkerSource(ne,ue){return this.demWorkerSources[ne]||(this.demWorkerSources[ne]={}),this.demWorkerSources[ne][ue]||(this.demWorkerSources[ne][ue]=new M),this.demWorkerSources[ne][ue]}}return s.i(self)&&(self.worker=new oe(self)),oe})),r("index",["exports","./shared"],(function(s,a){var c="5.8.0";function h(){var I=new a.A(4);return a.A!=Float32Array&&(I[1]=0,I[2]=0),I[0]=1,I[3]=1,I}let m,y;const M={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(I,l,p){const C=requestAnimationFrame((T=>{E(),l(T)})),{unsubscribe:E}=a.s(I.signal,"abort",(()=>{E(),cancelAnimationFrame(C),p(a.c())}),!1)},frameAsync(I){return new Promise(((l,p)=>{this.frame(I,l,p)}))},getImageData(I,l=0){return this.getImageCanvasContext(I).getImageData(-l,-l,I.width+2*l,I.height+2*l)},getImageCanvasContext(I){const l=window.document.createElement("canvas"),p=l.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return l.width=I.width,l.height=I.height,p.drawImage(I,0,0,I.width,I.height),p},resolveURL:I=>(m||(m=document.createElement("a")),m.href=I,m.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(y==null&&(y=matchMedia("(prefers-reduced-motion: reduce)")),y.matches)}};class x{static testProp(l){if(!x.docStyle)return l[0];for(let p=0;p<l.length;p++)if(l[p]in x.docStyle)return l[p];return l[0]}static create(l,p,C){const E=window.document.createElement(l);return p!==void 0&&(E.className=p),C&&C.appendChild(E),E}static createNS(l,p){return window.document.createElementNS(l,p)}static disableDrag(){x.docStyle&&x.selectProp&&(x.userSelect=x.docStyle[x.selectProp],x.docStyle[x.selectProp]="none")}static enableDrag(){x.docStyle&&x.selectProp&&(x.docStyle[x.selectProp]=x.userSelect)}static setTransform(l,p){l.style[x.transformProp]=p}static addEventListener(l,p,C,E={}){l.addEventListener(p,C,"passive"in E?E:E.capture)}static removeEventListener(l,p,C,E={}){l.removeEventListener(p,C,"passive"in E?E:E.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",x.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",x.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",x.suppressClickInternal,!0)}),0)}static getScale(l){const p=l.getBoundingClientRect();return{x:p.width/l.offsetWidth||1,y:p.height/l.offsetHeight||1,boundingClientRect:p}}static getPoint(l,p,C){const E=p.boundingClientRect;return new a.P((C.clientX-E.left)/p.x-l.clientLeft,(C.clientY-E.top)/p.y-l.clientTop)}static mousePos(l,p){const C=x.getScale(l);return x.getPoint(l,C,p)}static touchPos(l,p){const C=[],E=x.getScale(l);for(let T=0;T<p.length;T++)C.push(x.getPoint(l,E,p[T]));return C}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}static sanitize(l){const p=new DOMParser().parseFromString(l,"text/html").body||document.createElement("body"),C=p.querySelectorAll("script");for(const E of C)E.remove();return x.clean(p),p.innerHTML}static isPossiblyDangerous(l,p){const C=p.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(l)||!C.includes("javascript:")&&!C.includes("data:"))||!!l.startsWith("on")||void 0}static clean(l){const p=l.children;for(const C of p)x.removeAttributes(C),x.clean(C)}static removeAttributes(l){for(const{name:p,value:C}of l.attributes)x.isPossiblyDangerous(p,C)&&l.removeAttribute(p)}}x.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,x.selectProp=x.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),x.transformProp=x.testProp(["transform","WebkitTransform"]);const k={supported:!1,testSupport:function(I){!j&&F&&(q?V(I):P=I)}};let P,F,j=!1,q=!1;function V(I){const l=I.createTexture();I.bindTexture(I.TEXTURE_2D,l);try{if(I.texImage2D(I.TEXTURE_2D,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,F),I.isContextLost())return;k.supported=!0}catch{}I.deleteTexture(l),j=!0}var H;typeof document<"u"&&(F=document.createElement("img"),F.onload=()=>{P&&V(P),P=null,q=!0},F.onerror=()=>{j=!0,P=null},F.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(I){let l,p,C,E;I.resetRequestQueue=()=>{l=[],p=0,C=0,E={}},I.addThrottleControl=Z=>{const ae=C++;return E[ae]=Z,ae},I.removeThrottleControl=Z=>{delete E[Z],U()},I.getImage=(Z,ae,ce=!0)=>new Promise(((Ce,fe)=>{k.supported&&(Z.headers||(Z.headers={}),Z.headers.accept="image/webp,*/*"),a.e(Z,{type:"image"}),l.push({abortController:ae,requestParameters:Z,supportImageRefresh:ce,state:"queued",onError:Re=>{fe(Re)},onSuccess:Re=>{Ce(Re)}}),U()}));const T=Z=>a._(this,void 0,void 0,(function*(){Z.state="running";const{requestParameters:ae,supportImageRefresh:ce,onError:Ce,onSuccess:fe,abortController:Re}=Z,Ge=ce===!1&&!a.i(self)&&!a.g(ae.url)&&(!ae.headers||Object.keys(ae.headers).reduce(((tt,ot)=>tt&&ot==="accept"),!0));p++;const Ze=Ge?Q(ae,Re):a.m(ae,Re);try{const tt=yield Ze;delete Z.abortController,Z.state="completed",tt.data instanceof HTMLImageElement||a.b(tt.data)?fe(tt):tt.data&&fe({data:yield(Xe=tt.data,typeof createImageBitmap=="function"?a.f(Xe):a.h(Xe)),cacheControl:tt.cacheControl,expires:tt.expires})}catch(tt){delete Z.abortController,Ce(tt)}finally{p--,U()}var Xe})),U=()=>{const Z=(()=>{for(const ae of Object.keys(E))if(E[ae]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let ae=p;ae<Z&&l.length>0;ae++){const ce=l.shift();ce.abortController.signal.aborted?ae--:T(ce)}},Q=(Z,ae)=>new Promise(((ce,Ce)=>{const fe=new Image,Re=Z.url,Ge=Z.credentials;Ge&&Ge==="include"?fe.crossOrigin="use-credentials":(Ge&&Ge==="same-origin"||!a.d(Re))&&(fe.crossOrigin="anonymous"),ae.signal.addEventListener("abort",(()=>{fe.src="",Ce(a.c())})),fe.fetchPriority="high",fe.onload=()=>{fe.onerror=fe.onload=null,ce({data:fe})},fe.onerror=()=>{fe.onerror=fe.onload=null,ae.signal.aborted||Ce(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},fe.src=Re}))})(H||(H={})),H.resetRequestQueue();class G{constructor(l){this._transformRequestFn=l??null}transformRequest(l,p){return this._transformRequestFn&&this._transformRequestFn(l,p)||{url:l}}setTransformRequest(l){this._transformRequestFn=l}}function Y(I){const l=[];if(typeof I=="string")l.push({id:"default",url:I});else if(I&&I.length>0){const p=[];for(const{id:C,url:E}of I){const T=`${C}${E}`;p.indexOf(T)===-1&&(p.push(T),l.push({id:C,url:E}))}}return l}function z(I,l,p){try{const C=new URL(I);return C.pathname+=`${l}${p}`,C.toString()}catch{throw new Error(`Invalid sprite URL "${I}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function se(I){const{userImage:l}=I;return!!(l&&l.render&&l.render())&&(I.data.replace(new Uint8Array(l.data.buffer)),!0)}class le extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:p,promiseResolve:C}of this.requestors)C(this._getImagesForIds(p));this.requestors=[]}}getImage(l){const p=this.images[l];if(p&&!p.data&&p.spriteData){const C=p.spriteData;p.data=new a.R({width:C.width,height:C.height},C.context.getImageData(C.x,C.y,C.width,C.height).data),p.spriteData=null}return p}addImage(l,p){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,p)&&(this.images[l]=p)}_validate(l,p){let C=!0;const E=p.data||p.spriteData;return this._validateStretch(p.stretchX,E&&E.width)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "stretchX" value`))),C=!1),this._validateStretch(p.stretchY,E&&E.height)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "stretchY" value`))),C=!1),this._validateContent(p.content,p)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "content" value`))),C=!1),C}_validateStretch(l,p){if(!l)return!0;let C=0;for(const E of l){if(E[0]<C||E[1]<E[0]||p<E[1])return!1;C=E[1]}return!0}_validateContent(l,p){if(!l)return!0;if(l.length!==4)return!1;const C=p.spriteData,E=C&&C.width||p.data.width,T=C&&C.height||p.data.height;return!(l[0]<0||E<l[0]||l[1]<0||T<l[1]||l[2]<0||E<l[2]||l[3]<0||T<l[3]||l[2]<l[0]||l[3]<l[1])}updateImage(l,p,C=!0){const E=this.getImage(l);if(C&&(E.data.width!==p.data.width||E.data.height!==p.data.height))throw new Error(`size mismatch between old image (${E.data.width}x${E.data.height}) and new image (${p.data.width}x${p.data.height}).`);p.version=E.version+1,this.images[l]=p,this.updatedImages[l]=!0}removeImage(l){const p=this.images[l];delete this.images[l],delete this.patterns[l],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l){return new Promise(((p,C)=>{let E=!0;if(!this.isLoaded())for(const T of l)this.images[T]||(E=!1);this.isLoaded()||E?p(this._getImagesForIds(l)):this.requestors.push({ids:l,promiseResolve:p})}))}_getImagesForIds(l){const p={};for(const C of l){let E=this.getImage(C);E||(this.fire(new a.l("styleimagemissing",{id:C})),E=this.getImage(C)),E?p[C]={data:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,textFitWidth:E.textFitWidth,textFitHeight:E.textFitHeight,hasRenderCallback:!!(E.userImage&&E.userImage.render)}:a.w(`Image "${C}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return p}getPixelSize(){const{width:l,height:p}=this.atlasImage;return{width:l,height:p}}getPattern(l){const p=this.patterns[l],C=this.getImage(l);if(!C)return null;if(p&&p.position.version===C.version)return p.position;if(p)p.position.version=C.version;else{const E={w:C.data.width+2,h:C.data.height+2,x:0,y:0},T=new a.I(E,C);this.patterns[l]={bin:E,position:T}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const p=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(l,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const T in this.patterns)l.push(this.patterns[T].bin);const{w:p,h:C}=a.p(l),E=this.atlasImage;E.resize({width:p||1,height:C||1});for(const T in this.patterns){const{bin:U}=this.patterns[T],Q=U.x+1,Z=U.y+1,ae=this.getImage(T).data,ce=ae.width,Ce=ae.height;a.R.copy(ae,E,{x:0,y:0},{x:Q,y:Z},{width:ce,height:Ce}),a.R.copy(ae,E,{x:0,y:Ce-1},{x:Q,y:Z-1},{width:ce,height:1}),a.R.copy(ae,E,{x:0,y:0},{x:Q,y:Z+Ce},{width:ce,height:1}),a.R.copy(ae,E,{x:ce-1,y:0},{x:Q-1,y:Z},{width:1,height:Ce}),a.R.copy(ae,E,{x:0,y:0},{x:Q+ce,y:Z},{width:1,height:Ce})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const p of l){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const C=this.getImage(p);C||a.w(`Image with ID: "${p}" was not found`),se(C)&&this.updateImage(p,C)}}}const me=1e20;function de(I,l,p,C,E,T,U,Q,Z){for(let ae=l;ae<l+C;ae++)be(I,p*T+ae,T,E,U,Q,Z);for(let ae=p;ae<p+E;ae++)be(I,ae*T+l,1,C,U,Q,Z)}function be(I,l,p,C,E,T,U){T[0]=0,U[0]=-me,U[1]=me,E[0]=I[l];for(let Q=1,Z=0,ae=0;Q<C;Q++){E[Q]=I[l+Q*p];const ce=Q*Q;do{const Ce=T[Z];ae=(E[Q]-E[Ce]+ce-Ce*Ce)/(Q-Ce)/2}while(ae<=U[Z]&&--Z>-1);Z++,T[Z]=Q,U[Z]=ae,U[Z+1]=me}for(let Q=0,Z=0;Q<C;Q++){for(;U[Z+1]<Q;)Z++;const ae=T[Z],ce=Q-ae;I[l+Q*p]=E[ae]+ce*ce}}class Ee{constructor(l,p,C){this.requestManager=l,this.localIdeographFontFamily=p,this.entries={},this.lang=C}setURL(l){this.url=l}getGlyphs(l){return a._(this,void 0,void 0,(function*(){const p=[];for(const T in l)for(const U of l[T])p.push(this._getAndCacheGlyphsPromise(T,U));const C=yield Promise.all(p),E={};for(const{stack:T,id:U,glyph:Q}of C)E[T]||(E[T]={}),E[T][U]=Q&&{id:Q.id,bitmap:Q.bitmap.clone(),metrics:Q.metrics};return E}))}_getAndCacheGlyphsPromise(l,p){return a._(this,void 0,void 0,(function*(){let C=this.entries[l];C||(C=this.entries[l]={glyphs:{},requests:{},ranges:{}});let E=C.glyphs[p];if(E!==void 0)return{stack:l,id:p,glyph:E};if(E=this._tinySDF(C,l,p),E)return C.glyphs[p]=E,{stack:l,id:p,glyph:E};const T=Math.floor(p/256);if(256*T>65535)throw new Error("glyphs > 65535 not supported");if(C.ranges[T])return{stack:l,id:p,glyph:E};if(!this.url)throw new Error("glyphsUrl is not set");if(!C.requests[T]){const Q=Ee.loadGlyphRange(l,T,this.url,this.requestManager);C.requests[T]=Q}const U=yield C.requests[T];for(const Q in U)this._doesCharSupportLocalGlyph(+Q)||(C.glyphs[+Q]=U[+Q]);return C.ranges[T]=!0,{stack:l,id:p,glyph:U[p]||null}}))}_doesCharSupportLocalGlyph(l){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(l))||a.u["CJK Unified Ideographs"](l)||a.u["Hangul Syllables"](l)||a.u.Hiragana(l)||a.u.Katakana(l)||a.u["CJK Symbols and Punctuation"](l)||a.u["Halfwidth and Fullwidth Forms"](l))}_tinySDF(l,p,C){const E=this.localIdeographFontFamily;if(!E||!this._doesCharSupportLocalGlyph(C))return;let T=l.tinySDF;if(!T){let Q="400";/bold/i.test(p)?Q="900":/medium/i.test(p)?Q="500":/light/i.test(p)&&(Q="200"),T=l.tinySDF=new Ee.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:E,fontWeight:Q})}const U=T.draw(String.fromCharCode(C));return{id:C,bitmap:new a.q({width:U.width||60,height:U.height||60},U.data),metrics:{width:U.glyphWidth/2||24,height:U.glyphHeight/2||24,left:U.glyphLeft/2+.5||0,top:U.glyphTop/2-27.5||-8,advance:U.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ee.loadGlyphRange=function(I,l,p,C){return a._(this,void 0,void 0,(function*(){const E=256*l,T=E+255,U=C.transformRequest(p.replace("{fontstack}",I).replace("{range}",`${E}-${T}`),"Glyphs"),Q=yield a.n(U,new AbortController);if(!Q||!Q.data)throw new Error(`Could not load glyph range. range: ${l}, ${E}-${T}`);const Z={};for(const ae of a.o(Q.data))Z[ae.id]=ae;return Z}))},Ee.TinySDF=class{constructor({fontSize:I=24,buffer:l=3,radius:p=8,cutoff:C=.25,fontFamily:E="sans-serif",fontWeight:T="normal",fontStyle:U="normal",lang:Q=null}={}){this.buffer=l,this.cutoff=C,this.radius=p,this.lang=Q;const Z=this.size=I+4*l,ae=this._createCanvas(Z),ce=this.ctx=ae.getContext("2d",{willReadFrequently:!0});ce.font=`${U} ${T} ${I}px ${E}`,ce.textBaseline="alphabetic",ce.textAlign="left",ce.fillStyle="black",this.gridOuter=new Float64Array(Z*Z),this.gridInner=new Float64Array(Z*Z),this.f=new Float64Array(Z),this.z=new Float64Array(Z+1),this.v=new Uint16Array(Z)}_createCanvas(I){const l=document.createElement("canvas");return l.width=l.height=I,l}draw(I){const{width:l,actualBoundingBoxAscent:p,actualBoundingBoxDescent:C,actualBoundingBoxLeft:E,actualBoundingBoxRight:T}=this.ctx.measureText(I),U=Math.ceil(p),Q=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(T-E))),Z=Math.min(this.size-this.buffer,U+Math.ceil(C)),ae=Q+2*this.buffer,ce=Z+2*this.buffer,Ce=Math.max(ae*ce,0),fe=new Uint8ClampedArray(Ce),Re={data:fe,width:ae,height:ce,glyphWidth:Q,glyphHeight:Z,glyphTop:U,glyphLeft:0,glyphAdvance:l};if(Q===0||Z===0)return Re;const{ctx:Ge,buffer:Ze,gridInner:Xe,gridOuter:tt}=this;this.lang&&(Ge.lang=this.lang),Ge.clearRect(Ze,Ze,Q,Z),Ge.fillText(I,Ze,Ze+U);const ot=Ge.getImageData(Ze,Ze,Q,Z);tt.fill(me,0,Ce),Xe.fill(0,0,Ce);for(let nt=0;nt<Z;nt++)for(let ct=0;ct<Q;ct++){const gt=ot.data[4*(nt*Q+ct)+3]/255;if(gt===0)continue;const xt=(nt+Ze)*ae+ct+Ze;if(gt===1)tt[xt]=0,Xe[xt]=me;else{const ht=.5-gt;tt[xt]=ht>0?ht*ht:0,Xe[xt]=ht<0?ht*ht:0}}de(tt,0,0,ae,ce,ae,this.f,this.v,this.z),de(Xe,Ze,Ze,Q,Z,ae,this.f,this.v,this.z);for(let nt=0;nt<Ce;nt++){const ct=Math.sqrt(tt[nt])-Math.sqrt(Xe[nt]);fe[nt]=Math.round(255-255*(ct/this.radius+this.cutoff))}return Re}};class De{constructor(){this.specification=a.v.light.position}possiblyEvaluate(l,p){return a.B(l.expression.evaluate(p))}interpolate(l,p,C){return{x:a.C.number(l.x,p.x,C),y:a.C.number(l.y,p.y,C),z:a.C.number(l.z,p.z,C)}}}let je;class Ie extends a.E{constructor(l){super(),je=je||new a.r({anchor:new a.D(a.v.light.anchor),position:new De,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.t(je,void 0),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,p={}){if(!this._validate(a.x,l,p))for(const C in l){const E=l[C];C.endsWith("-transition")?this._transitionable.setTransition(C.slice(0,-11),E):this._transitionable.setValue(C,E)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,p,C){return(!C||C.validate!==!1)&&a.y(this,l.call(a.z,{value:p,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const Qe=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class et extends a.E{constructor(l){super(),this._transitionable=new a.t(Qe,void 0),this.setSky(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0))}setSky(l,p={}){if(!this._validate(a.G,l,p)){l||(l={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const C in l){const E=l[C];C.endsWith("-transition")?this._transitionable.setTransition(C.slice(0,-11),E):this._transitionable.setValue(C,E)}}}getSky(){return this._transitionable.serialize()}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,p,C={}){return C?.validate!==!1&&a.y(this,l.call(a.z,a.e({value:p,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(l){return l<60?0:l<70?(l-60)/10:1}}class dt{constructor(l,p){this.width=l,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,p){const C=l.join(",")+String(p);return this.dashEntry[C]||(this.dashEntry[C]=this.addDash(l,p)),this.dashEntry[C]}getDashRanges(l,p,C){const E=[];let T=l.length%2==1?-l[l.length-1]*C:0,U=l[0]*C,Q=!0;E.push({left:T,right:U,isDash:Q,zeroLength:l[0]===0});let Z=l[0];for(let ae=1;ae<l.length;ae++){Q=!Q;const ce=l[ae];T=Z*C,Z+=ce,U=Z*C,E.push({left:T,right:U,isDash:Q,zeroLength:ce===0})}return E}addRoundDash(l,p,C){const E=p/2;for(let T=-C;T<=C;T++){const U=this.width*(this.nextRow+C+T);let Q=0,Z=l[Q];for(let ae=0;ae<this.width;ae++){ae/Z.right>1&&(Z=l[++Q]);const ce=Math.abs(ae-Z.left),Ce=Math.abs(ae-Z.right),fe=Math.min(ce,Ce);let Re;const Ge=T/C*(E+1);if(Z.isDash){const Ze=E-Math.abs(Ge);Re=Math.sqrt(fe*fe+Ze*Ze)}else Re=E-Math.sqrt(fe*fe+Ge*Ge);this.data[U+ae]=Math.max(0,Math.min(255,Re+128))}}}addRegularDash(l){for(let Q=l.length-1;Q>=0;--Q){const Z=l[Q],ae=l[Q+1];Z.zeroLength?l.splice(Q,1):ae&&ae.isDash===Z.isDash&&(ae.left=Z.left,l.splice(Q,1))}const p=l[0],C=l[l.length-1];p.isDash===C.isDash&&(p.left=C.left-this.width,C.right=p.right+this.width);const E=this.width*this.nextRow;let T=0,U=l[T];for(let Q=0;Q<this.width;Q++){Q/U.right>1&&(U=l[++T]);const Z=Math.abs(Q-U.left),ae=Math.abs(Q-U.right),ce=Math.min(Z,ae);this.data[E+Q]=Math.max(0,Math.min(255,(U.isDash?ce:-ce)+128))}}addDash(l,p){const C=p?7:0,E=2*C+1;if(this.nextRow+E>this.height)return a.w("LineAtlas out of space"),null;let T=0;for(let Q=0;Q<l.length;Q++)T+=l[Q];if(T!==0){const Q=this.width/T,Z=this.getDashRanges(l,this.width,Q);p?this.addRoundDash(Z,Q,C):this.addRegularDash(Z)}const U={y:this.nextRow+C,height:2*C,width:T};return this.nextRow+=E,this.dirty=!0,U}bind(l){const p=l.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))}}const ke="maplibre_preloaded_worker_pool";class we{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<we.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach((p=>{p.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[ke]}numActive(){return Object.keys(this.active).length}}const ze=Math.floor(M.hardwareConcurrency/2);let xe,At;function it(){return xe||(xe=new we),xe}we.workerCount=a.H(globalThis)?Math.max(Math.min(ze,3),1):1;class bt{constructor(l,p){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=p;const C=this.workerPool.acquire(p);for(let E=0;E<C.length;E++){const T=new a.J(C[E],p);T.name=`Worker ${E}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,p){const C=[];for(const E of this.actors)C.push(E.sendAsync({type:l,data:p}));return Promise.all(C)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(l=!0){this.actors.forEach((p=>{p.remove()})),this.actors=[],l&&this.workerPool.release(this.id)}registerMessageHandler(l,p){for(const C of this.actors)C.registerMessageHandler(l,p)}}function Bt(){return At||(At=new bt(it(),a.K),At.registerMessageHandler("GR",((I,l,p)=>a.m(l,p)))),At}function Ke(I,l){const p=a.L();return a.M(p,p,[1,1,0]),a.N(p,p,[.5*I.width,.5*I.height,1]),I.calculatePosMatrix?a.O(p,p,I.calculatePosMatrix(l.toUnwrapped())):p}function Te(I,l,p,C,E,T,U){var Q;const Z=(function(fe,Re,Ge){if(fe)for(const Ze of fe){const Xe=Re[Ze];if(Xe&&Xe.source===Ge&&Xe.type==="fill-extrusion")return!0}else for(const Ze in Re){const Xe=Re[Ze];if(Xe.source===Ge&&Xe.type==="fill-extrusion")return!0}return!1})((Q=E?.layers)!==null&&Q!==void 0?Q:null,l,I.id),ae=T.maxPitchScaleFactor(),ce=I.tilesIn(C,ae,Z);ce.sort(Se);const Ce=[];for(const fe of ce)Ce.push({wrappedTileID:fe.tileID.wrapped().key,queryResults:fe.tile.queryRenderedFeatures(l,p,I._state,fe.queryGeometry,fe.cameraQueryGeometry,fe.scale,E,T,ae,Ke(I.transform,fe.tileID),U?(Re,Ge)=>U(fe.tileID,Re,Ge):void 0)});return(function(fe,Re){for(const Ge in fe)for(const Ze of fe[Ge])Ne(Ze,Re);return fe})((function(fe){const Re={},Ge={};for(const Ze of fe){const Xe=Ze.queryResults,tt=Ze.wrappedTileID,ot=Ge[tt]=Ge[tt]||{};for(const nt in Xe){const ct=Xe[nt],gt=ot[nt]=ot[nt]||{},xt=Re[nt]=Re[nt]||[];for(const ht of ct)gt[ht.featureIndex]||(gt[ht.featureIndex]=!0,xt.push(ht))}}return Re})(Ce),I)}function Se(I,l){const p=I.tileID,C=l.tileID;return p.overscaledZ-C.overscaledZ||p.canonical.y-C.canonical.y||p.wrap-C.wrap||p.canonical.x-C.canonical.x}function Ne(I,l){const p=I.feature,C=l.getFeatureState(p.layer["source-layer"],p.id);p.source=p.layer.source,p.layer["source-layer"]&&(p.sourceLayer=p.layer["source-layer"]),p.state=C}function ut(I,l,p){return a._(this,void 0,void 0,(function*(){let C=I;if(I.url?C=(yield a.j(l.transformRequest(I.url,"Source"),p)).data:yield M.frameAsync(p),!C)return null;const E=a.Q(a.e(C,I),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in C&&C.vector_layers&&(E.vectorLayerIds=C.vector_layers.map((T=>T.id))),E}))}class rt{constructor(l,p){l&&(p?this.setSouthWest(l).setNorthEast(p):Array.isArray(l)&&(l.length===4?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1])))}setNorthEast(l){return this._ne=l instanceof a.S?new a.S(l.lng,l.lat):a.S.convert(l),this}setSouthWest(l){return this._sw=l instanceof a.S?new a.S(l.lng,l.lat):a.S.convert(l),this}extend(l){const p=this._sw,C=this._ne;let E,T;if(l instanceof a.S)E=l,T=l;else{if(!(l instanceof rt))return Array.isArray(l)?l.length===4||l.every(Array.isArray)?this.extend(rt.convert(l)):this.extend(a.S.convert(l)):l&&("lng"in l||"lon"in l)&&"lat"in l?this.extend(a.S.convert(l)):this;if(E=l._sw,T=l._ne,!E||!T)return this}return p||C?(p.lng=Math.min(E.lng,p.lng),p.lat=Math.min(E.lat,p.lat),C.lng=Math.max(T.lng,C.lng),C.lat=Math.max(T.lat,C.lat)):(this._sw=new a.S(E.lng,E.lat),this._ne=new a.S(T.lng,T.lat)),this}getCenter(){return new a.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.S(this.getWest(),this.getNorth())}getSouthEast(){return new a.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(l){const{lng:p,lat:C}=a.S.convert(l);let E=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(E=this._sw.lng>=p&&p>=this._ne.lng),this._sw.lat<=C&&C<=this._ne.lat&&E}static convert(l){return l instanceof rt?l:l&&new rt(l)}static fromLngLat(l,p=0){const C=360*p/40075017,E=C/Math.cos(Math.PI/180*l.lat);return new rt(new a.S(l.lng-E,l.lat-C),new a.S(l.lng+E,l.lat+C))}adjustAntiMeridian(){const l=new a.S(this._sw.lng,this._sw.lat),p=new a.S(this._ne.lng,this._ne.lat);return new rt(l,l.lng>p.lng?new a.S(p.lng+360,p.lat):p)}}class pt{constructor(l,p,C){this.bounds=rt.convert(this.validateBounds(l)),this.minzoom=p||0,this.maxzoom=C||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const p=Math.pow(2,l.z),C=Math.floor(a.V(this.bounds.getWest())*p),E=Math.floor(a.U(this.bounds.getNorth())*p),T=Math.ceil(a.V(this.bounds.getEast())*p),U=Math.ceil(a.U(this.bounds.getSouth())*p);return l.x>=C&&l.x<T&&l.y>=E&&l.y<U}}class Dt extends a.E{constructor(l,p,C,E){if(super(),this.id=l,this.dispatcher=C,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.Q(p,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(E)}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield ut(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),l&&(a.e(this,l),l.bounds&&(this.tileBounds=new pt(l.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(l){this._tileJSONRequest=null,this._loaded=!0,this.fire(new a.k(l))}}))}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.abort(),l(),this.load()}setTiles(l){return this.setSourceProperty((()=>{this._options.tiles=l})),this}setUrl(l){return this.setSourceProperty((()=>{this.url=l,this._options.url=l})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(l){return a._(this,void 0,void 0,(function*(){const p=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C={request:this.map._requestManager.transformRequest(p,"Tile"),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};C.request.collectResourceTiming=this._collectResourceTiming;let E="RT";if(l.actor&&l.state!=="expired"){if(l.state==="loading")return new Promise(((T,U)=>{l.reloadPromise={resolve:T,reject:U}}))}else l.actor=this.dispatcher.getActor(),E="LT";l.abortController=new AbortController;try{const T=yield l.actor.sendAsync({type:E,data:C},l.abortController);if(delete l.abortController,l.aborted)return;this._afterTileLoadWorkerResponse(l,T)}catch(T){if(delete l.abortController,l.aborted)return;if(T&&T.status!==404)throw T;this._afterTileLoadWorkerResponse(l,null)}}))}_afterTileLoadWorkerResponse(l,p){if(p&&p.resourceTiming&&(l.resourceTiming=p.resourceTiming),p&&this.map._refreshExpiredTiles&&l.setExpiryData(p),l.loadVectorData(p,this.map.painter),l.reloadPromise){const C=l.reloadPromise;l.reloadPromise=null,this.loadTile(l).then(C.resolve).catch(C.reject)}}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.actor&&(yield l.actor.sendAsync({type:"AT",data:{uid:l.uid,type:this.type,source:this.id}}))}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.unloadVectorData(),l.actor&&(yield l.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Ot extends a.E{constructor(l,p,C,E){super(),this.id=l,this.dispatcher=C,this.setEventedParent(E),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},p),a.e(this,a.Q(p,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,(function*(l=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const p=yield ut(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,p&&(a.e(this,p),p.bounds&&(this.tileBounds=new pt(p.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:l})))}catch(p){this._tileJSONRequest=null,this._loaded=!0,this.fire(new a.k(p))}}))}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(l){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),l(),this.load(!0)}setTiles(l){return this.setSourceProperty((()=>{this._options.tiles=l})),this}setUrl(l){return this.setSourceProperty((()=>{this.url=l,this._options.url=l})),this}serialize(){return a.e({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l){return a._(this,void 0,void 0,(function*(){const p=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.abortController=new AbortController;try{const C=yield H.getImage(this.map._requestManager.transformRequest(p,"Tile"),l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(C&&C.data){this.map._refreshExpiredTiles&&(C.cacheControl||C.expires)&&l.setExpiryData({cacheControl:C.cacheControl,expires:C.expires});const E=this.map.painter.context,T=E.gl,U=C.data;l.texture=this.map.painter.getTileTexture(U.width),l.texture?l.texture.update(U,{useMipmap:!0}):(l.texture=new a.T(E,U,T.RGBA,{useMipmap:!0}),l.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST)),l.state="loaded"}}catch(C){if(delete l.abortController,l.aborted)l.state="unloaded";else if(C)throw l.state="errored",C}}))}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController)}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.texture&&this.map.painter.saveTileTexture(l.texture)}))}hasTransition(){return!1}}class Jt extends Ot{constructor(l,p,C,E){super(l,p,C,E),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox",this.redFactor=p.redFactor,this.greenFactor=p.greenFactor,this.blueFactor=p.blueFactor,this.baseShift=p.baseShift}loadTile(l){return a._(this,void 0,void 0,(function*(){const p=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C=this.map._requestManager.transformRequest(p,"Tile");l.neighboringTiles=this._getNeighboringTiles(l.tileID),l.abortController=new AbortController;try{const E=yield H.getImage(C,l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(E&&E.data){const T=E.data;this.map._refreshExpiredTiles&&(E.cacheControl||E.expires)&&l.setExpiryData({cacheControl:E.cacheControl,expires:E.expires});const U=a.b(T)&&a.W()?T:yield this.readImageNow(T),Q={type:this.type,uid:l.uid,source:this.id,rawImageData:U,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!l.actor||l.state==="expired"){l.actor=this.dispatcher.getActor();const Z=yield l.actor.sendAsync({type:"LDT",data:Q});l.dem=Z,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded"}}}catch(E){if(delete l.abortController,l.aborted)l.state="unloaded";else if(E)throw l.state="errored",E}}))}readImageNow(l){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&a.X()){const p=l.width+2,C=l.height+2;try{return new a.R({width:p,height:C},yield a.Y(l,-1,-1,p,C))}catch{}}return M.getImageData(l,1)}))}_getNeighboringTiles(l){const p=l.canonical,C=Math.pow(2,p.z),E=(p.x-1+C)%C,T=p.x===0?l.wrap-1:l.wrap,U=(p.x+1+C)%C,Q=p.x+1===C?l.wrap+1:l.wrap,Z={};return Z[new a.Z(l.overscaledZ,T,p.z,E,p.y).key]={backfilled:!1},Z[new a.Z(l.overscaledZ,Q,p.z,U,p.y).key]={backfilled:!1},p.y>0&&(Z[new a.Z(l.overscaledZ,T,p.z,E,p.y-1).key]={backfilled:!1},Z[new a.Z(l.overscaledZ,l.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},Z[new a.Z(l.overscaledZ,Q,p.z,U,p.y-1).key]={backfilled:!1}),p.y+1<C&&(Z[new a.Z(l.overscaledZ,T,p.z,E,p.y+1).key]={backfilled:!1},Z[new a.Z(l.overscaledZ,l.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},Z[new a.Z(l.overscaledZ,Q,p.z,U,p.y+1).key]={backfilled:!1}),Z}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&(yield l.actor.sendAsync({type:"RDT",data:{type:this.type,uid:l.uid,source:this.id}}))}))}}class Tn extends a.E{constructor(l,p,C,E){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:p.data},this.actor=C.getActor(),this.setEventedParent(E),this._data=p.data,this._options=a.e({},p),this._collectResourceTiming=p.collectResourceTiming,p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId,p.clusterMaxZoom!==void 0&&this.maxzoom<=p.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${p.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(p.buffer!==void 0?p.buffer:128),tolerance:this._pixelsToTileUnits(p.tolerance!==void 0?p.tolerance:.375),extent:a.$,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(p.clusterMaxZoom),minPoints:Math.max(2,p.clusterMinPoints||2),extent:a.$,radius:this._pixelsToTileUnits(p.clusterRadius||50),log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(l){return l*(a.$/this.tileSize)}_getClusterMaxZoom(l){const p=l?Math.round(l):this.maxzoom-1;return Number.isInteger(l)||l===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${l}" rounded to "${p}"`),p}load(){return a._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._pendingWorkerUpdate={data:l},this._updateWorkerData(),this}updateData(l){return this._pendingWorkerUpdate.diff=a.a0(this._pendingWorkerUpdate.diff,l),this._updateWorkerData(),this}getData(){return a._(this,void 0,void 0,(function*(){const l=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:l})}))}getCoordinatesFromGeometry(l){return l.type==="GeometryCollection"?l.geometries.map((p=>p.coordinates)).flat(1/0):l.coordinates.flat(1/0)}getBounds(){return a._(this,void 0,void 0,(function*(){const l=new rt,p=yield this.getData();let C;switch(p.type){case"FeatureCollection":C=p.features.map((E=>this.getCoordinatesFromGeometry(E.geometry))).flat(1/0);break;case"Feature":C=this.getCoordinatesFromGeometry(p.geometry);break;default:C=this.getCoordinatesFromGeometry(p)}if(C.length==0)return l;for(let E=0;E<C.length-1;E+=2)l.extend([C[E],C[E+1]]);return l}))}setClusterOptions(l){return this.workerOptions.cluster=l.cluster,l&&(l.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(l.clusterRadius)),l.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(l.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(l){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:l,source:this.id}})}getClusterChildren(l){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:l,source:this.id}})}getClusterLeaves(l,p,C){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:l,limit:p,offset:C}})}_updateWorkerData(){return a._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;const{data:l,diff:p}=this._pendingWorkerUpdate;if(!l&&!p)return void a.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const C=a.e({type:this.type},this.workerOptions);l?(typeof l=="string"?(C.request=this.map._requestManager.transformRequest(M.resolveURL(l),"Source"),C.request.collectResourceTiming=this._collectResourceTiming):C.data=JSON.stringify(l),this._pendingWorkerUpdate.data=void 0):p&&(C.dataDiff=p,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new a.l("dataloading",{dataType:"source"}));try{const E=yield this.actor.sendAsync({type:"LD",data:C});if(this._isUpdatingWorker=!1,this._removed||E.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));this._data=E.data;let T=null;E.resourceTiming&&E.resourceTiming[this.id]&&(T=E.resourceTiming[this.id].slice(0));const U={dataType:"source"};this._collectResourceTiming&&T&&T.length>0&&a.e(U,{resourceTiming:T}),this.fire(new a.l("data",Object.assign(Object.assign({},U),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},U),{sourceDataType:"content"})))}catch(E){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(E))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}}))}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(l){return a._(this,void 0,void 0,(function*(){const p=l.actor?"RT":"LT";l.actor=this.actor;const C={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};l.abortController=new AbortController;const E=yield this.actor.sendAsync({type:p,data:C},l.abortController);delete l.abortController,l.unloadVectorData(),l.aborted||l.loadVectorData(E,this.map.painter,p==="RT")}))}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.aborted=!0}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Ln extends a.E{constructor(l,p,C,E){super(),this.flippedWindingOrder=!1,this.id=l,this.dispatcher=C,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(E),this.options=p}load(l){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const p=yield H.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,p&&p.data&&(this.image=p.data,l&&(this.coordinates=l),this._finishLoading())}catch(p){this._request=null,this._loaded=!0,this.fire(new a.k(p))}}))}loaded(){return this._loaded}updateImage(l){return l.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=l.url,this.load(l.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(l){this.coordinates=l;const p=l.map(a.a1.fromLngLat);var C;return this.tileID=(function(E){const T=a.a2.fromPoints(E),U=T.width(),Q=T.height(),Z=Math.max(U,Q),ae=Math.max(0,Math.floor(-Math.log(Z)/Math.LN2)),ce=Math.pow(2,ae);return new a.a4(ae,Math.floor((T.minX+T.maxX)/2*ce),Math.floor((T.minY+T.maxY)/2*ce))})(p),this.terrainTileRanges=this._getOverlappingTileRanges(p),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=p.map((E=>this.tileID.getTilePoint(E)._round())),this.flippedWindingOrder=((C=this.tileCoords)[1].x-C[0].x)*(C[2].y-C[0].y)-(C[1].y-C[0].y)*(C[2].x-C[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,p=l.gl;this.texture||(this.texture=new a.T(l,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let C=!1;for(const E in this.tiles){const T=this.tiles[E];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,C=!0)}C&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(l){return a._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={}):l.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(l){const{minX:p,minY:C,maxX:E,maxY:T}=a.a2.fromPoints(l),U={};for(let Q=0;Q<=a.a3;Q++){const Z=Math.pow(2,Q),ae=Math.floor(p*Z),ce=Math.floor(C*Z),Ce=Math.floor(E*Z),fe=Math.floor(T*Z);U[Q]={minTileX:ae,minTileY:ce,maxTileX:Ce,maxTileY:fe}}return U}}class ii extends Ln{constructor(l,p,C,E){super(l,p,C,E),this.roundZoom=!0,this.type="video",this.options=p}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1;const l=this.options;this.urls=[];for(const p of l.urls)this.urls.push(this.map._requestManager.transformRequest(p,"Source").url);try{const p=yield a.a5(this.urls);if(this._loaded=!0,!p)return;this.video=p,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(p){this.fire(new a.k(p))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const p=this.video.seekable;l<p.start(0)||l>p.end(0)?this.fire(new a.k(new a.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${p.start(0)} and ${p.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,p=l.gl;this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(l,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let C=!1;for(const E in this.tiles){const T=this.tiles[E];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,C=!0)}C&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class wn extends Ln{constructor(l,p,C,E){super(l,p,C,E),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some((T=>!Array.isArray(T)||T.length!==2||T.some((U=>typeof U!="number"))))||this.fire(new a.k(new a.a6(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.a6(`sources.${l}`,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new a.k(new a.a6(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a6(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.a6(`sources.${l}`,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const p=this.map.painter.context,C=p.gl;this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(p,this.canvas,C.RGBA,{premultiply:!0});let E=!1;for(const T in this.tiles){const U=this.tiles[T];U.state!=="loaded"&&(U.state="loaded",U.texture=this.texture,E=!0)}E&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const Rn={},gn=I=>{switch(I){case"geojson":return Tn;case"image":return Ln;case"raster":return Ot;case"raster-dem":return Jt;case"vector":return Dt;case"video":return ii;case"canvas":return wn}return Rn[I]},Yn="RTLPluginLoaded";class Dn extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Bt()}_syncState(l){return this.status=l,this.dispatcher.broadcast("SRPS",{pluginStatus:l,pluginURL:this.url}).catch((p=>{throw this.status="error",p}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(l){return a._(this,arguments,void 0,(function*(p,C=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=M.resolveURL(p),!this.url)throw new Error(`requested url ${p} is invalid`);if(this.status==="unavailable"){if(!C)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return a._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(Yn))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Tt=null;function _e(){return Tt||(Tt=new Dn),Tt}class oe{constructor(l,p){this.timeAdded=0,this.fadeEndTime=0,this.tileID=l,this.uid=a.a7(),this.uses=0,this.tileSize=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(l){const p=l+this.timeAdded;p<this.fadeEndTime||(this.fadeEndTime=p)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(l,p,C){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=(function(E,T){const U={};if(!T)return U;for(const Q of E){const Z=Q.layerIds.map((ae=>T.getLayer(ae))).filter(Boolean);if(Z.length!==0){Q.layers=Z,Q.stateDependentLayerIds&&(Q.stateDependentLayers=Q.stateDependentLayerIds.map((ae=>Z.filter((ce=>ce.id===ae))[0])));for(const ae of Z)U[ae.id]=Q}}return U})(l.buckets,p?.style),this.hasSymbolBuckets=!1;for(const E in this.buckets){const T=this.buckets[E];if(T instanceof a.a9){if(this.hasSymbolBuckets=!0,!C)break;T.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const E in this.buckets){const T=this.buckets[E];if(T instanceof a.a9&&T.hasRTLText){this.hasRTLText=!0,_e().lazyLoad();break}}this.queryPadding=0;for(const E in this.buckets){const T=this.buckets[E];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(E).queryRadius(T))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage),this.dashPositions=l.dashPositions}else this.collisionBoxArray=new a.a8}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const C in this.buckets){const E=this.buckets[C];E.uploadPending()&&E.upload(l)}const p=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(l,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(l,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,p,C,E,T,U,Q,Z,ae,ce,Ce){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:E,cameraQueryGeometry:T,scale:U,tileSize:this.tileSize,pixelPosMatrix:ce,transform:Z,params:Q,queryPadding:this.queryPadding*ae,getElevation:Ce},l,p,C):{}}querySourceFeatures(l,p){const C=this.latestFeatureIndex;if(!C||!C.rawTileData)return;const E=C.loadVTLayers(),T=p&&p.sourceLayer?p.sourceLayer:"",U=E._geojsonTileLayer||E[T];if(!U)return;const Q=a.aa(p?.filter,p?.globalState),{z:Z,x:ae,y:ce}=this.tileID.canonical,Ce={z:Z,x:ae,y:ce};for(let fe=0;fe<U.length;fe++){const Re=U.feature(fe);if(Q.needGeometry){const Xe=a.ab(Re,!0);if(!Q.filter(new a.F(this.tileID.overscaledZ),Xe,this.tileID.canonical))continue}else if(!Q.filter(new a.F(this.tileID.overscaledZ),Re))continue;const Ge=C.getId(Re,T),Ze=new a.ac(Re,Z,ae,ce,Ge);Ze.tile=Ce,l.push(Ze)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const p=this.expirationTime;if(l.cacheControl){const C=a.ad(l.cacheControl);C["max-age"]&&(this.expirationTime=Date.now()+1e3*C["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const C=Date.now();let E=!1;if(this.expirationTime>C)E=!1;else if(p)if(this.expirationTime<p)E=!0;else{const T=this.expirationTime-p;T?this.expirationTime=C+Math.max(T,3e4):E=!0}else E=!0;E?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,p){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const C=this.latestFeatureIndex.loadVTLayers();for(const E in this.buckets){if(!p.style.hasLayer(E))continue;const T=this.buckets[E],U=T.layers[0].sourceLayer||"_geojsonTileLayer",Q=C[U],Z=l[U];if(!Q||!Z||Object.keys(Z).length===0)continue;T.update(Z,Q,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const ae=p&&p.style&&p.style.getLayer(E);ae&&(this.queryPadding=Math.max(this.queryPadding,ae.queryRadius(T)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<M.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=M.now()+l}setDependencies(l,p){const C={};for(const E of p)C[E]=!0;this.dependencies[l]=C}hasDependency(l,p){for(const C of l){const E=this.dependencies[C];if(E){for(const T of p)if(E[T])return!0}}return!1}}class ee{constructor(l,p){this.max=l,this.onRemove=p,this.reset()}reset(){for(const l in this.data)for(const p of this.data[l])p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value);return this.data={},this.order=[],this}add(l,p,C){const E=l.wrapped().key;this.data[E]===void 0&&(this.data[E]=[]);const T={value:p,timeout:void 0};if(C!==void 0&&(T.timeout=setTimeout((()=>{this.remove(l,T)}),C)),this.data[E].push(T),this.order.push(E),this.order.length>this.max){const U=this._getAndRemoveByKey(this.order[0]);U&&this.onRemove(U)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const p=this.data[l].shift();return p.timeout&&clearTimeout(p.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),p.value}getByKey(l){const p=this.data[l];return p?p[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,p){if(!this.has(l))return this;const C=l.wrapped().key,E=p===void 0?0:this.data[C].indexOf(p),T=this.data[C][E];return this.data[C].splice(E,1),T.timeout&&clearTimeout(T.timeout),this.data[C].length===0&&delete this.data[C],this.onRemove(T.value),this.order.splice(this.order.indexOf(C),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this}filter(l){const p=[];for(const C in this.data)for(const E of this.data[C])l(E.value)||p.push(E);for(const C of p)this.remove(C.value.tileID,C)}}class ne{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,p,C){const E=String(p);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][E]=this.stateChanges[l][E]||{},a.e(this.stateChanges[l][E],C),this.deletedStates[l]===null){this.deletedStates[l]={};for(const T in this.state[l])T!==E&&(this.deletedStates[l][T]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][E]===null){this.deletedStates[l][E]={};for(const T in this.state[l][E])C[T]||(this.deletedStates[l][E][T]=null)}else for(const T in C)this.deletedStates[l]&&this.deletedStates[l][E]&&this.deletedStates[l][E][T]===null&&delete this.deletedStates[l][E][T]}removeFeatureState(l,p,C){if(this.deletedStates[l]===null)return;const E=String(p);if(this.deletedStates[l]=this.deletedStates[l]||{},C&&p!==void 0)this.deletedStates[l][E]!==null&&(this.deletedStates[l][E]=this.deletedStates[l][E]||{},this.deletedStates[l][E][C]=null);else if(p!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][E])for(C in this.deletedStates[l][E]={},this.stateChanges[l][E])this.deletedStates[l][E][C]=null;else this.deletedStates[l][E]=null;else this.deletedStates[l]=null}getState(l,p){const C=String(p),E=a.e({},(this.state[l]||{})[C],(this.stateChanges[l]||{})[C]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const T=this.deletedStates[l][p];if(T===null)return{};for(const U in T)delete E[U]}return E}initializeTileState(l,p){l.setFeatureState(this.state,p)}coalesceChanges(l,p){const C={};for(const E in this.stateChanges){this.state[E]=this.state[E]||{};const T={};for(const U in this.stateChanges[E])this.state[E][U]||(this.state[E][U]={}),a.e(this.state[E][U],this.stateChanges[E][U]),T[U]=this.state[E][U];C[E]=T}for(const E in this.deletedStates){this.state[E]=this.state[E]||{};const T={};if(this.deletedStates[E]===null)for(const U in this.state[E])T[U]={},this.state[E][U]={};else for(const U in this.deletedStates[E]){if(this.deletedStates[E][U]===null)this.state[E][U]={};else for(const Q of Object.keys(this.deletedStates[E][U]))delete this.state[E][U][Q];T[U]=this.state[E][U]}C[E]=C[E]||{},a.e(C[E],T)}if(this.stateChanges={},this.deletedStates={},Object.keys(C).length!==0)for(const E in l)l[E].setFeatureState(C,p)}}const ue=89.25;function ye(I,l){const p=a.ah(l.lat,-a.ai,a.ai);return new a.P(a.V(l.lng)*I,a.U(p)*I)}function Ue(I,l){return new a.a1(l.x/I,l.y/I).toLngLat()}function Ve(I){return I.cameraToCenterDistance*Math.min(.85*Math.tan(a.ae(90-I.pitch)),Math.tan(a.ae(ue-I.pitch)))}function lt(I,l){const p=I.canonical,C=l/a.af(p.z),E=p.x+Math.pow(2,p.z)*I.wrap,T=a.ag(new Float64Array(16));return a.M(T,T,[E*C,p.y*C,0]),a.N(T,T,[C/a.$,C/a.$,1]),T}function ge(I,l,p,C,E){const T=a.a1.fromLngLat(I,l),U=E*a.aj(1,I.lat),Q=U*Math.cos(a.ae(p)),Z=Math.sqrt(U*U-Q*Q),ae=Z*Math.sin(a.ae(-C)),ce=Z*Math.cos(a.ae(-C));return new a.a1(T.x+ae,T.y+ce,T.z+Q)}function Be(I,l,p){const C=l.intersectsFrustum(I);if(!p||C===0)return C;const E=l.intersectsPlane(p);return E===0?0:C===2&&E===2?2:1}function v(I,l,p){let C=0;const E=(p-l)/10;for(let T=0;T<10;T++)C+=E*Math.pow(Math.cos(l+(T+.5)/10*(p-l)),I);return C}function yt(I,l){return function(p,C,E,T,U){const Q=2*((I-1)/a.ak(Math.cos(a.ae(ue-U))/Math.cos(a.ae(ue)))-1),Z=Math.acos(E/T),ae=2*v(Q-1,0,a.ae(U/2)),ce=Math.min(a.ae(ue),Z+a.ae(U/2)),Ce=v(Q-1,Math.min(ce,Z-a.ae(U/2)),ce),fe=Math.atan(C/E),Re=Math.hypot(C,E);let Ge=p;return Ge+=a.ak(T/Re/Math.max(.5,Math.cos(a.ae(U/2)))),Ge+=Q*a.ak(Math.cos(fe))/2,Ge-=a.ak(Math.max(1,Ce/ae/l))/2,Ge}}const Mt=yt(9.314,3);function Pt(I,l){const p=(l.roundZoom?Math.round:Math.floor)(I.zoom+a.ak(I.tileSize/l.tileSize));return Math.max(0,p)}function st(I,l){const p=I.getCameraFrustum(),C=I.getClippingPlane(),E=I.screenPointToMercatorCoordinate(I.getCameraPoint()),T=a.a1.fromLngLat(I.center,I.elevation);E.z=T.z+Math.cos(I.pitchInRadians)*I.cameraToCenterDistance/I.worldSize;const U=I.getCoveringTilesDetailsProvider(),Q=U.allowVariableZoom(I,l),Z=Pt(I,l),ae=l.minzoom||0,ce=l.maxzoom!==void 0?l.maxzoom:I.maxZoom,Ce=Math.min(Math.max(0,Z),ce),fe=Math.pow(2,Ce),Re=[fe*E.x,fe*E.y,0],Ge=[fe*T.x,fe*T.y,0],Ze=Math.hypot(T.x-E.x,T.y-E.y),Xe=Math.abs(T.z-E.z),tt=Math.hypot(Ze,Xe),ot=gt=>({zoom:0,x:0,y:0,wrap:gt,fullyVisible:!1}),nt=[],ct=[];if(I.renderWorldCopies&&U.allowWorldCopies())for(let gt=1;gt<=3;gt++)nt.push(ot(-gt)),nt.push(ot(gt));for(nt.push(ot(0));nt.length>0;){const gt=nt.pop(),xt=gt.x,ht=gt.y;let Et=gt.fullyVisible;const Qt={x:xt,y:ht,z:gt.zoom},Kt=U.getTileBoundingVolume(Qt,gt.wrap,I.elevation,l);if(!Et){const kn=Be(p,Kt,C);if(kn===0)continue;Et=kn===2}const Nt=U.distanceToTile2d(E.x,E.y,Qt,Kt);let Wt=Z;Q&&(Wt=(l.calculateTileZoom||Mt)(I.zoom+a.ak(I.tileSize/l.tileSize),Nt,Xe,tt,I.fov)),Wt=(l.roundZoom?Math.round:Math.floor)(Wt),Wt=Math.max(0,Wt);const In=Math.min(Wt,ce);if(gt.wrap=U.getWrap(T,Qt,gt.wrap),gt.zoom>=In){if(gt.zoom<ae)continue;const kn=Ce-gt.zoom,cn=Re[0]-.5-(xt<<kn),Qn=Re[1]-.5-(ht<<kn),Xi=l.reparseOverscaled?Math.max(gt.zoom,Wt):gt.zoom;ct.push({tileID:new a.Z(gt.zoom===ce?Xi:gt.zoom,gt.wrap,gt.zoom,xt,ht),distanceSq:a.al([Ge[0]-.5-xt,Ge[1]-.5-ht]),tileDistanceToCamera:Math.sqrt(cn*cn+Qn*Qn)})}else for(let kn=0;kn<4;kn++)nt.push({zoom:gt.zoom+1,x:(xt<<1)+kn%2,y:(ht<<1)+(kn>>1),wrap:gt.wrap,fullyVisible:Et})}return ct.sort(((gt,xt)=>gt.distanceSq-xt.distanceSq)).map((gt=>gt.tileID))}const fn=a.a2.fromPoints([new a.P(0,0),new a.P(a.$,a.$)]);class Fn extends a.E{constructor(l,p,C){super(),this.id=l,this.dispatcher=C,this.on("data",(E=>this._dataHandler(E))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((E,T,U,Q)=>{const Z=new(gn(T.type))(E,T,U,Q);if(Z.id!==E)throw new Error(`Expected Source id to be ${E} instead of ${Z.id}`);return Z})(l,p,C,this),this._tiles={},this._cache=new ee(0,(E=>this._unloadTile(E))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ne,this._didEmitContent=!1,this._updated=!1}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._maxTileCacheZoomLevels=l?l._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const l in this._tiles){const p=this._tiles[l];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,p,C){return a._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(l),this._tileLoaded(l,p,C)}catch(E){l.state="errored",E.status!==404?this._source.fire(new a.k(E,{tile:l})):this.update(this.transform,this.terrain)}}))}_unloadTile(l){this._source.unloadTile&&this._source.unloadTile(l)}_abortTile(l){this._source.abortTile&&this._source.abortTile(l),this._source.fire(new a.l("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const p in this._tiles){const C=this._tiles[p];C.upload(l),C.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((l=>l.tileID)).sort(pn).map((l=>l.key))}getRenderableIds(l){const p=[];for(const C in this._tiles)this._isIdRenderable(C,l)&&p.push(this._tiles[C]);return l?p.sort(((C,E)=>{const T=C.tileID,U=E.tileID,Q=new a.P(T.canonical.x,T.canonical.y)._rotate(-this.transform.bearingInRadians),Z=new a.P(U.canonical.x,U.canonical.y)._rotate(-this.transform.bearingInRadians);return T.overscaledZ-U.overscaledZ||Z.y-Q.y||Z.x-Q.x})).map((C=>C.tileID.key)):p.map((C=>C.tileID)).sort(pn).map((C=>C.key))}hasRenderableParent(l){const p=this.findLoadedParent(l,0);return!!p&&this._isIdRenderable(p.tileID.key)}_isIdRenderable(l,p){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(p||!this._tiles[l].holdingForFade())}reload(l){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const p in this._tiles)l?this._reloadTile(p,"expired"):this._tiles[p].state!=="errored"&&this._reloadTile(p,"reloading")}}_reloadTile(l,p){return a._(this,void 0,void 0,(function*(){const C=this._tiles[l];C&&(C.state!=="loading"&&(C.state=p),yield this._loadTile(C,l,p))}))}_tileLoaded(l,p,C){l.timeAdded=M.now(),C==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(p,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const p=this.getRenderableIds();for(let E=0;E<p.length;E++){const T=p[E];if(l.neighboringTiles&&l.neighboringTiles[T]){const U=this.getTileByID(T);C(l,U),C(U,l)}}function C(E,T){E.needsHillshadePrepare=!0,E.needsTerrainPrepare=!0;let U=T.tileID.canonical.x-E.tileID.canonical.x;const Q=T.tileID.canonical.y-E.tileID.canonical.y,Z=Math.pow(2,E.tileID.canonical.z),ae=T.tileID.key;U===0&&Q===0||Math.abs(Q)>1||(Math.abs(U)>1&&(Math.abs(U+Z)===1?U+=Z:Math.abs(U-Z)===1&&(U-=Z)),T.dem&&E.dem&&(E.dem.backfillBorder(T.dem,U,Q),E.neighboringTiles&&E.neighboringTiles[ae]&&(E.neighboringTiles[ae].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,p){const C=Object.values(l),E=this._getLoadedDescendents(C),T={};for(const U of C){const Q=E[U.key];if(!Q?.length){T[U.key]=U;continue}const Z=U.overscaledZ+Fn.maxUnderzooming,ae=Q.filter((fe=>fe.tileID.overscaledZ<=Z));if(!ae.length){T[U.key]=U;continue}const ce=Math.min(...ae.map((fe=>fe.tileID.overscaledZ))),Ce=ae.filter((fe=>fe.tileID.overscaledZ===ce)).map((fe=>fe.tileID));for(const fe of Ce)p[fe.key]=fe;this._areDescendentsComplete(Ce,ce,U.overscaledZ)||(T[U.key]=U)}return T}_getLoadedDescendents(l){var p;const C={};for(const E in this._tiles){const T=this._tiles[E];if(T.hasData())for(const U of l)T.tileID.isChildOf(U)&&(C[p=U.key]||(C[p]=[])).push(T)}return C}_areDescendentsComplete(l,p,C){return l.length===1&&l[0].isOverscaled()?l[0].overscaledZ===p:Math.pow(4,p-C)===l.length}findLoadedParent(l,p){if(l.key in this._loadedParentTiles){const C=this._loadedParentTiles[l.key];return C&&C.tileID.overscaledZ>=p?C:null}for(let C=l.overscaledZ-1;C>=p;C--){const E=l.scaledTo(C),T=this._getLoadedTile(E);if(T)return T}}findLoadedSibling(l){return this._getLoadedTile(l)}_getLoadedTile(l){const p=this._tiles[l.key];return p&&p.hasData()?p:this._cache.getByKey(l.wrapped().key)}updateCacheSize(l){const p=Math.ceil(l.width/this._source.tileSize)+1,C=Math.ceil(l.height/this._source.tileSize)+1,E=Math.floor(p*C*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),T=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,E):E;this._cache.setMaxSize(T)}handleWrapJump(l){const p=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,p){const C={};for(const E in this._tiles){const T=this._tiles[E];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+p),C[T.tileID.key]=T}this._tiles=C;for(const E in this._timers)clearTimeout(this._timers[E]),delete this._timers[E];for(const E in this._tiles)this._setTileReloadTimer(E,this._tiles[E])}}update(l,p){if(!this._sourceLoaded||this._paused)return;let C;this.transform=l,this.terrain=p,this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?C=l.getVisibleUnwrappedCoordinates(this._source.tileID).map((ae=>new a.Z(ae.canonical.z,ae.wrap,ae.canonical.z,ae.canonical.x,ae.canonical.y))):(C=st(l,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:p,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(C=C.filter((ae=>this._source.hasTile(ae))))):C=[],this.usedForTerrain&&(C=this._addTerrainIdealTiles(C));const E=Pt(l,this._source),T=Math.max(E-Fn.maxOverzooming,this._source.minzoom),U=C.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,U&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const Q=this._updateRetainedTiles(C,E);$n(this._source.type)&&!p&&this._updateFadingTiles(Q,T);for(const ae in Q)this._tiles[ae].clearFadeHold();const Z=a.am(this._tiles,Q);for(const ae of Z){const ce=this._tiles[ae];ce.hasSymbolBuckets&&!ce.holdingForFade()?ce.setHoldDuration(this.map._fadeDuration):ce.hasSymbolBuckets&&!ce.symbolFadeFinished()||this._removeTile(ae)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}_addTerrainIdealTiles(l){const p=[];for(const C of l)if(C.canonical.z>this._source.minzoom){const E=C.scaledTo(C.canonical.z-1);p.push(E);const T=C.scaledTo(Math.max(this._source.minzoom,Math.min(C.canonical.z,5)));p.push(T)}return l.concat(p)}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(l)}_updateRetainedTiles(l,p){var C;const E={},T={},U=Math.max(p-Fn.maxOverzooming,this._source.minzoom);let Q={};for(const Z of l){const ae=this._addTile(Z);E[Z.key]=Z,ae.hasData()||(Q[Z.key]=Z)}Q=this._retainLoadedChildren(Q,E);for(const Z in Q){const ae=Q[Z];let ce=this._tiles[Z],Ce=ce?.wasRequested();for(let fe=ae.overscaledZ-1;fe>=U;--fe){const Re=ae.scaledTo(fe);if(T[Re.key])break;if(T[Re.key]=!0,ce=this.getTile(Re),!ce&&Ce&&(ce=this._addTile(Re)),ce){const Ge=ce.hasData();if((Ge||!(!((C=this.map)===null||C===void 0)&&C.cancelPendingTileRequestsWhileZooming)||Ce)&&(E[Re.key]=Re),Ce=ce.wasRequested(),Ge)break}}}return E}_updateFadingTiles(l,p){const C={},E={},T=Object.keys(l),U=M.now();for(const Q of T){const Z=l[Q],ae=this._tiles[Q];if(!ae||ae.fadeEndTime!==0&&ae.fadeEndTime<=U)continue;const ce=this.findLoadedParent(Z,p),Ce=this.findLoadedSibling(Z),fe=ce||Ce||null;fe&&(this._addTile(fe.tileID),C[fe.tileID.key]=fe.tileID),E[Q]=Z}this._retainLoadedChildren(E,l);for(const Q in C)l[Q]||(this._coveredTiles[Q]=!0,l[Q]=C[Q])}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const p=[];let C,E=this._tiles[l].tileID;for(;E.overscaledZ>0;){if(E.key in this._loadedParentTiles){C=this._loadedParentTiles[E.key];break}p.push(E.key);const T=E.scaledTo(E.overscaledZ-1);if(C=this._getLoadedTile(T),C)break;E=T}for(const T of p)this._loadedParentTiles[T]=C}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const l in this._tiles){const p=this._tiles[l].tileID,C=this._getLoadedTile(p);this._loadedSiblingTiles[p.key]=C}}_addTile(l){let p=this._tiles[l.key];if(p)return p;p=this._cache.getAndRemove(l),p&&(this._setTileReloadTimer(l.key,p),p.tileID=l,this._state.initializeTileState(p,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,p)));const C=p;return p||(p=new oe(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(p,l.key,p.state)),p.uses++,this._tiles[l.key]=p,C||this._source.fire(new a.l("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p}_setTileReloadTimer(l,p){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const C=p.getExpiryTimeout();C&&(this._timers[l]=setTimeout((()=>{this._reloadTile(l,"expired"),delete this._timers[l]}),C))}refreshTiles(l){for(const p in this._tiles)(this._isIdRenderable(p)||this._tiles[p].state=="errored")&&l.some((C=>C.equals(this._tiles[p].tileID.canonical)))&&this._reloadTile(p,"expired")}_removeTile(l){const p=this._tiles[l];p&&(p.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))}_dataHandler(l){const p=l.sourceDataType;l.dataType==="source"&&p==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&l.dataType==="source"&&p==="content"&&(this.reload(l.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,p,C){const E=[],T=this.transform;if(!T)return E;const U=T.getCoveringTilesDetailsProvider().allowWorldCopies(),Q=C?T.getCameraQueryGeometry(l):l,Z=Re=>T.screenPointToMercatorCoordinate(Re,this.terrain),ae=this.transformBbox(l,Z,!U),ce=this.transformBbox(Q,Z,!U),Ce=this.getIds(),fe=a.a2.fromPoints(ce);for(let Re=0;Re<Ce.length;Re++){const Ge=this._tiles[Ce[Re]];if(Ge.holdingForFade())continue;const Ze=U?[Ge.tileID]:[Ge.tileID.unwrapTo(-1),Ge.tileID.unwrapTo(0)],Xe=Math.pow(2,T.zoom-Ge.tileID.overscaledZ),tt=p*Ge.queryPadding*a.$/Ge.tileSize/Xe;for(const ot of Ze){const nt=fe.map((ct=>ot.getTilePoint(new a.a1(ct.x,ct.y))));if(nt.expandBy(tt),nt.intersects(fn)){const ct=ae.map((xt=>ot.getTilePoint(xt))),gt=ce.map((xt=>ot.getTilePoint(xt)));E.push({tile:Ge,tileID:U?ot:ot.unwrapTo(0),queryGeometry:ct,cameraQueryGeometry:gt,scale:Xe})}}}return E}transformBbox(l,p,C){let E=l.map(p);if(C){const T=a.a2.fromPoints(l);T.shrinkBy(.001*Math.min(T.width(),T.height()));const U=T.map(p);a.a2.fromPoints(E).covers(U)||(E=E.map((Q=>Q.x>.5?new a.a1(Q.x-1,Q.y,Q.z):Q)))}return E}getVisibleCoordinates(l){const p=this.getRenderableIds(l).map((C=>this._tiles[C].tileID));return this.transform&&this.transform.populateCache(p),p}hasTransition(){if(this._source.hasTransition())return!0;if($n(this._source.type)){const l=M.now();for(const p in this._tiles)if(this._tiles[p].fadeEndTime>=l)return!0}return!1}setFeatureState(l,p,C){this._state.updateState(l=l||"_geojsonTileLayer",p,C)}removeFeatureState(l,p,C){this._state.removeFeatureState(l=l||"_geojsonTileLayer",p,C)}getFeatureState(l,p){return this._state.getState(l=l||"_geojsonTileLayer",p)}setDependencies(l,p,C){const E=this._tiles[l];E&&E.setDependencies(p,C)}reloadTilesForDependencies(l,p){for(const C in this._tiles)this._tiles[C].hasDependency(l,p)&&this._reloadTile(C,"reloading");this._cache.filter((C=>!C.hasDependency(l,p)))}}function pn(I,l){const p=Math.abs(2*I.wrap)-+(I.wrap<0),C=Math.abs(2*l.wrap)-+(l.wrap<0);return I.overscaledZ-l.overscaledZ||C-p||l.canonical.y-I.canonical.y||l.canonical.x-I.canonical.x}function $n(I){return I==="raster"||I==="image"||I==="video"}Fn.maxOverzooming=10,Fn.maxUnderzooming=3;class Zn{constructor(l,p){this.reset(l,p)}reset(l,p){this.points=l||[],this._distances=[0];for(let C=1;C<this.points.length;C++)this._distances[C]=this._distances[C-1]+this.points[C].dist(this.points[C-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=a.ah(l,0,1);let p=1,C=this._distances[p];const E=l*this.paddedLength+this.padding;for(;C<E&&p<this._distances.length;)C=this._distances[++p];const T=p-1,U=this._distances[T],Q=C-U,Z=Q>0?(E-U)/Q:0;return this.points[T].mult(1-Z).add(this.points[p].mult(Z))}}function ai(I,l){let p=!0;return I==="always"||I!=="never"&&l!=="never"||(p=!1),p}class Hi{constructor(l,p,C){const E=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(l/C),this.yCellCount=Math.ceil(p/C);for(let U=0;U<this.xCellCount*this.yCellCount;U++)E.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=p,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,p,C,E,T){this._forEachCell(p,C,E,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(p),this.bboxes.push(C),this.bboxes.push(E),this.bboxes.push(T)}insertCircle(l,p,C,E){this._forEachCell(p-E,C-E,p+E,C+E,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(p),this.circles.push(C),this.circles.push(E)}_insertBoxCell(l,p,C,E,T,U){this.boxCells[T].push(U)}_insertCircleCell(l,p,C,E,T,U){this.circleCells[T].push(U)}_query(l,p,C,E,T,U,Q){if(C<0||l>this.width||E<0||p>this.height)return[];const Z=[];if(l<=0&&p<=0&&this.width<=C&&this.height<=E){if(T)return[{key:null,x1:l,y1:p,x2:C,y2:E}];for(let ae=0;ae<this.boxKeys.length;ae++)Z.push({key:this.boxKeys[ae],x1:this.bboxes[4*ae],y1:this.bboxes[4*ae+1],x2:this.bboxes[4*ae+2],y2:this.bboxes[4*ae+3]});for(let ae=0;ae<this.circleKeys.length;ae++){const ce=this.circles[3*ae],Ce=this.circles[3*ae+1],fe=this.circles[3*ae+2];Z.push({key:this.circleKeys[ae],x1:ce-fe,y1:Ce-fe,x2:ce+fe,y2:Ce+fe})}}else this._forEachCell(l,p,C,E,this._queryCell,Z,{hitTest:T,overlapMode:U,seenUids:{box:{},circle:{}}},Q);return Z}query(l,p,C,E){return this._query(l,p,C,E,!1,null)}hitTest(l,p,C,E,T,U){return this._query(l,p,C,E,!0,T,U).length>0}hitTestCircle(l,p,C,E,T){const U=l-C,Q=l+C,Z=p-C,ae=p+C;if(Q<0||U>this.width||ae<0||Z>this.height)return!1;const ce=[];return this._forEachCell(U,Z,Q,ae,this._queryCellCircle,ce,{hitTest:!0,overlapMode:E,circle:{x:l,y:p,radius:C},seenUids:{box:{},circle:{}}},T),ce.length>0}_queryCell(l,p,C,E,T,U,Q,Z){const{seenUids:ae,hitTest:ce,overlapMode:Ce}=Q,fe=this.boxCells[T];if(fe!==null){const Ge=this.bboxes;for(const Ze of fe)if(!ae.box[Ze]){ae.box[Ze]=!0;const Xe=4*Ze,tt=this.boxKeys[Ze];if(l<=Ge[Xe+2]&&p<=Ge[Xe+3]&&C>=Ge[Xe+0]&&E>=Ge[Xe+1]&&(!Z||Z(tt))&&(!ce||!ai(Ce,tt.overlapMode))&&(U.push({key:tt,x1:Ge[Xe],y1:Ge[Xe+1],x2:Ge[Xe+2],y2:Ge[Xe+3]}),ce))return!0}}const Re=this.circleCells[T];if(Re!==null){const Ge=this.circles;for(const Ze of Re)if(!ae.circle[Ze]){ae.circle[Ze]=!0;const Xe=3*Ze,tt=this.circleKeys[Ze];if(this._circleAndRectCollide(Ge[Xe],Ge[Xe+1],Ge[Xe+2],l,p,C,E)&&(!Z||Z(tt))&&(!ce||!ai(Ce,tt.overlapMode))){const ot=Ge[Xe],nt=Ge[Xe+1],ct=Ge[Xe+2];if(U.push({key:tt,x1:ot-ct,y1:nt-ct,x2:ot+ct,y2:nt+ct}),ce)return!0}}}return!1}_queryCellCircle(l,p,C,E,T,U,Q,Z){const{circle:ae,seenUids:ce,overlapMode:Ce}=Q,fe=this.boxCells[T];if(fe!==null){const Ge=this.bboxes;for(const Ze of fe)if(!ce.box[Ze]){ce.box[Ze]=!0;const Xe=4*Ze,tt=this.boxKeys[Ze];if(this._circleAndRectCollide(ae.x,ae.y,ae.radius,Ge[Xe+0],Ge[Xe+1],Ge[Xe+2],Ge[Xe+3])&&(!Z||Z(tt))&&!ai(Ce,tt.overlapMode))return U.push(!0),!0}}const Re=this.circleCells[T];if(Re!==null){const Ge=this.circles;for(const Ze of Re)if(!ce.circle[Ze]){ce.circle[Ze]=!0;const Xe=3*Ze,tt=this.circleKeys[Ze];if(this._circlesCollide(Ge[Xe],Ge[Xe+1],Ge[Xe+2],ae.x,ae.y,ae.radius)&&(!Z||Z(tt))&&!ai(Ce,tt.overlapMode))return U.push(!0),!0}}}_forEachCell(l,p,C,E,T,U,Q,Z){const ae=this._convertToXCellCoord(l),ce=this._convertToYCellCoord(p),Ce=this._convertToXCellCoord(C),fe=this._convertToYCellCoord(E);for(let Re=ae;Re<=Ce;Re++)for(let Ge=ce;Ge<=fe;Ge++)if(T.call(this,l,p,C,E,this.xCellCount*Ge+Re,U,Q,Z))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,p,C,E,T,U){const Q=E-l,Z=T-p,ae=C+U;return ae*ae>Q*Q+Z*Z}_circleAndRectCollide(l,p,C,E,T,U,Q){const Z=(U-E)/2,ae=Math.abs(l-(E+Z));if(ae>Z+C)return!1;const ce=(Q-T)/2,Ce=Math.abs(p-(T+ce));if(Ce>ce+C)return!1;if(ae<=Z||Ce<=ce)return!0;const fe=ae-Z,Re=Ce-ce;return fe*fe+Re*Re<=C*C}}function Ti(I,l,p){const C=a.L();if(!I){const{vecSouth:Ce,vecEast:fe}=oi(l),Re=h();Re[0]=fe[0],Re[1]=fe[1],Re[2]=Ce[0],Re[3]=Ce[1],E=Re,(ce=(U=(T=Re)[0])*(ae=T[3])-(Z=T[2])*(Q=T[1]))&&(E[0]=ae*(ce=1/ce),E[1]=-Q*ce,E[2]=-Z*ce,E[3]=U*ce),C[0]=Re[0],C[1]=Re[1],C[4]=Re[2],C[5]=Re[3]}var E,T,U,Q,Z,ae,ce;return a.N(C,C,[1/p,1/p,1]),C}function tr(I,l,p,C){if(I){const E=a.L();if(!l){const{vecSouth:T,vecEast:U}=oi(p);E[0]=U[0],E[1]=U[1],E[4]=T[0],E[5]=T[1]}return a.N(E,E,[C,C,1]),E}return p.pixelsToClipSpaceMatrix}function oi(I){const l=Math.cos(I.rollInRadians),p=Math.sin(I.rollInRadians),C=Math.cos(I.pitchInRadians),E=Math.cos(I.bearingInRadians),T=Math.sin(I.bearingInRadians),U=a.ar();U[0]=-E*C*p-T*l,U[1]=-T*C*p+E*l;const Q=a.as(U);Q<1e-9?a.at(U):a.au(U,U,1/Q);const Z=a.ar();Z[0]=E*C*l-T*p,Z[1]=T*C*l+E*p;const ae=a.as(Z);return ae<1e-9?a.at(Z):a.au(Z,Z,1/ae),{vecEast:Z,vecSouth:U}}function Pi(I,l,p,C){let E;C?(E=[I,l,C(I,l),1],a.aw(E,E,p)):(E=[I,l,0,1],Kl(E,E,p));const T=E[3];return{point:new a.P(E[0]/T,E[1]/T),signedDistanceFromCamera:T,isOccluded:!1}}function Zt(I,l){return .5+I/l*.5}function pr(I,l){return I.x>=-l[0]&&I.x<=l[0]&&I.y>=-l[1]&&I.y<=l[1]}function Zi(I,l,p,C,E,T,U,Q,Z,ae,ce,Ce,fe){const Re=p?I.textSizeData:I.iconSizeData,Ge=a.an(Re,l.transform.zoom),Ze=[256/l.width*2+1,256/l.height*2+1],Xe=p?I.text.dynamicLayoutVertexArray:I.icon.dynamicLayoutVertexArray;Xe.clear();const tt=I.lineVertexArray,ot=p?I.text.placedSymbolArray:I.icon.placedSymbolArray,nt=l.transform.width/l.transform.height;let ct=!1;for(let gt=0;gt<ot.length;gt++){const xt=ot.get(gt);if(xt.hidden||xt.writingMode===a.ao.vertical&&!ct){Qs(xt.numGlyphs,Xe);continue}ct=!1;const ht=new a.P(xt.anchorX,xt.anchorY),Et={getElevation:fe,pitchedLabelPlaneMatrix:C,lineVertexArray:tt,pitchWithMap:T,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:l.transform,tileAnchorPoint:ht,unwrappedTileID:Z,width:ae,height:ce,translation:Ce},Qt=Al(xt.anchorX,xt.anchorY,Et);if(!pr(Qt.point,Ze)){Qs(xt.numGlyphs,Xe);continue}const Kt=Zt(l.transform.cameraToCenterDistance,Qt.signedDistanceFromCamera),Nt=a.ap(Re,Ge,xt),Wt=T?Nt*l.transform.getPitchedTextCorrection(xt.anchorX,xt.anchorY,Z)/Kt:Nt*Kt,In=sn({projectionContext:Et,pitchedLabelPlaneMatrixInverse:E,symbol:xt,fontSize:Wt,flip:!1,keepUpright:U,glyphOffsetArray:I.glyphOffsetArray,dynamicLayoutVertexArray:Xe,aspectRatio:nt,rotateToLine:Q});ct=In.useVertical,(In.notEnoughRoom||ct||In.needsFlipping&&sn({projectionContext:Et,pitchedLabelPlaneMatrixInverse:E,symbol:xt,fontSize:Wt,flip:!0,keepUpright:U,glyphOffsetArray:I.glyphOffsetArray,dynamicLayoutVertexArray:Xe,aspectRatio:nt,rotateToLine:Q}).notEnoughRoom)&&Qs(xt.numGlyphs,Xe)}p?I.text.dynamicLayoutVertexBuffer.updateData(Xe):I.icon.dynamicLayoutVertexBuffer.updateData(Xe)}function ea(I,l,p,C,E,T,U,Q){const Z=T.glyphStartIndex+T.numGlyphs,ae=T.lineStartIndex,ce=T.lineStartIndex+T.lineLength,Ce=l.getoffsetX(T.glyphStartIndex),fe=l.getoffsetX(Z-1),Re=hl(I*Ce,p,C,E,T.segment,ae,ce,Q,U);if(!Re)return null;const Ge=hl(I*fe,p,C,E,T.segment,ae,ce,Q,U);return Ge?Q.projectionCache.anyProjectionOccluded?null:{first:Re,last:Ge}:null}function no(I,l,p,C){return I===a.ao.horizontal&&Math.abs(p.y-l.y)>Math.abs(p.x-l.x)*C?{useVertical:!0}:(I===a.ao.vertical?l.y<p.y:l.x>p.x)?{needsFlipping:!0}:null}function sn(I){const{projectionContext:l,pitchedLabelPlaneMatrixInverse:p,symbol:C,fontSize:E,flip:T,keepUpright:U,glyphOffsetArray:Q,dynamicLayoutVertexArray:Z,aspectRatio:ae,rotateToLine:ce}=I,Ce=E/24,fe=C.lineOffsetX*Ce,Re=C.lineOffsetY*Ce;let Ge;if(C.numGlyphs>1){const Ze=C.glyphStartIndex+C.numGlyphs,Xe=C.lineStartIndex,tt=C.lineStartIndex+C.lineLength,ot=ea(Ce,Q,fe,Re,T,C,ce,l);if(!ot)return{notEnoughRoom:!0};const nt=Jl(ot.first.point.x,ot.first.point.y,l,p),ct=Jl(ot.last.point.x,ot.last.point.y,l,p);if(U&&!T){const gt=no(C.writingMode,nt,ct,ae);if(gt)return gt}Ge=[ot.first];for(let gt=C.glyphStartIndex+1;gt<Ze-1;gt++){const xt=hl(Ce*Q.getoffsetX(gt),fe,Re,T,C.segment,Xe,tt,l,ce);if(!xt)return{notEnoughRoom:!0};Ge.push(xt)}Ge.push(ot.last)}else{if(U&&!T){const Xe=nr(l.tileAnchorPoint.x,l.tileAnchorPoint.y,l).point,tt=C.lineStartIndex+C.segment+1,ot=new a.P(l.lineVertexArray.getx(tt),l.lineVertexArray.gety(tt)),nt=nr(ot.x,ot.y,l),ct=nt.signedDistanceFromCamera>0?nt.point:Ci(l.tileAnchorPoint,ot,Xe,1,l),gt=Jl(Xe.x,Xe.y,l,p),xt=Jl(ct.x,ct.y,l,p),ht=no(C.writingMode,gt,xt,ae);if(ht)return ht}const Ze=hl(Ce*Q.getoffsetX(C.glyphStartIndex),fe,Re,T,C.segment,C.lineStartIndex,C.lineStartIndex+C.lineLength,l,ce);if(!Ze||l.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Ge=[Ze]}for(const Ze of Ge)a.av(Z,Ze.point,Ze.angle);return{}}function Ci(I,l,p,C,E){const T=I.add(I.sub(l)._unit()),U=nr(T.x,T.y,E).point,Q=p.sub(U);return p.add(Q._mult(C/Q.mag()))}function Ui(I,l,p){const C=l.projectionCache;if(C.projections[I])return C.projections[I];const E=new a.P(l.lineVertexArray.getx(I),l.lineVertexArray.gety(I)),T=nr(E.x,E.y,l);if(T.signedDistanceFromCamera>0)return C.projections[I]=T.point,C.anyProjectionOccluded=C.anyProjectionOccluded||T.isOccluded,T.point;const U=I-p.direction;return Ci(p.distanceFromAnchor===0?l.tileAnchorPoint:new a.P(l.lineVertexArray.getx(U),l.lineVertexArray.gety(U)),E,p.previousVertex,p.absOffsetX-p.distanceFromAnchor+1,l)}function nr(I,l,p){const C=I+p.translation[0],E=l+p.translation[1];let T;return p.pitchWithMap?(T=Pi(C,E,p.pitchedLabelPlaneMatrix,p.getElevation),T.isOccluded=!1):(T=p.transform.projectTileCoordinates(C,E,p.unwrappedTileID,p.getElevation),T.point.x=(.5*T.point.x+.5)*p.width,T.point.y=(.5*-T.point.y+.5)*p.height),T}function Jl(I,l,p,C){if(p.pitchWithMap){const E=[I,l,0,1];return a.aw(E,E,C),p.transform.projectTileCoordinates(E[0]/E[3],E[1]/E[3],p.unwrappedTileID,p.getElevation).point}return{x:I/p.width*2-1,y:1-l/p.height*2}}function Al(I,l,p){return p.transform.projectTileCoordinates(I,l,p.unwrappedTileID,p.getElevation)}function Ki(I,l,p){return I._unit()._perp()._mult(l*p)}function $a(I,l,p,C,E,T,U,Q,Z){if(Q.projectionCache.offsets[I])return Q.projectionCache.offsets[I];const ae=p.add(l);if(I+Z.direction<C||I+Z.direction>=E)return Q.projectionCache.offsets[I]=ae,ae;const ce=Ui(I+Z.direction,Q,Z),Ce=Ki(ce.sub(p),U,Z.direction),fe=p.add(Ce),Re=ce.add(Ce);return Q.projectionCache.offsets[I]=a.ax(T,ae,fe,Re)||ae,Q.projectionCache.offsets[I]}function hl(I,l,p,C,E,T,U,Q,Z){const ae=C?I-l:I+l;let ce=ae>0?1:-1,Ce=0;C&&(ce*=-1,Ce=Math.PI),ce<0&&(Ce+=Math.PI);let fe,Re=ce>0?T+E:T+E+1;Q.projectionCache.cachedAnchorPoint?fe=Q.projectionCache.cachedAnchorPoint:(fe=nr(Q.tileAnchorPoint.x,Q.tileAnchorPoint.y,Q).point,Q.projectionCache.cachedAnchorPoint=fe);let Ge,Ze,Xe=fe,tt=fe,ot=0,nt=0;const ct=Math.abs(ae),gt=[];let xt;for(;ot+nt<=ct;){if(Re+=ce,Re<T||Re>=U)return null;ot+=nt,tt=Xe,Ze=Ge;const Qt={absOffsetX:ct,direction:ce,distanceFromAnchor:ot,previousVertex:tt};if(Xe=Ui(Re,Q,Qt),p===0)gt.push(tt),xt=Xe.sub(tt);else{let Kt;const Nt=Xe.sub(tt);Kt=Nt.mag()===0?Ki(Ui(Re+ce,Q,Qt).sub(Xe),p,ce):Ki(Nt,p,ce),Ze||(Ze=tt.add(Kt)),Ge=$a(Re,Kt,Xe,T,U,Ze,p,Q,Qt),gt.push(Ze),xt=Ge.sub(Ze)}nt=xt.mag()}const ht=xt._mult((ct-ot)/nt)._add(Ze||tt),Et=Ce+Math.atan2(Xe.y-tt.y,Xe.x-tt.x);return gt.push(ht),{point:ht,angle:Z?Et:0,path:gt}}const fo=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Qs(I,l){for(let p=0;p<I;p++){const C=l.length;l.resize(C+4),l.float32.set(fo,3*C)}}function Kl(I,l,p){const C=l[0],E=l[1];return I[0]=p[0]*C+p[4]*E+p[12],I[1]=p[1]*C+p[5]*E+p[13],I[3]=p[3]*C+p[7]*E+p[15],I}const io=100;class As{constructor(l,p=new Hi(l.width+200,l.height+200,25),C=new Hi(l.width+200,l.height+200,25)){this.transform=l,this.grid=p,this.ignoredGrid=C,this.pitchFactor=Math.cos(l.pitch*Math.PI/180)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+io,this.screenBottomBoundary=l.height+io,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,p,C,E,T,U,Q,Z,ae,ce,Ce,fe){const Re=this.projectAndGetPerspectiveRatio(l.anchorPointX+Z[0],l.anchorPointY+Z[1],T,ce,fe),Ge=C*Re.perspectiveRatio;let Ze;if(U||Q)Ze=this._projectCollisionBox(l,Ge,E,T,U,Q,Z,Re,ce,Ce,fe);else{const xt=Re.x+(Ce?Ce.x*Ge:0),ht=Re.y+(Ce?Ce.y*Ge:0);Ze={allPointsOccluded:!1,box:[xt+l.x1*Ge,ht+l.y1*Ge,xt+l.x2*Ge,ht+l.y2*Ge]}}const[Xe,tt,ot,nt]=Ze.box,ct=U?Ze.allPointsOccluded:Re.isOccluded;let gt=ct;return gt||(gt=Re.perspectiveRatio<this.perspectiveRatioCutoff),gt||(gt=!this.isInsideGrid(Xe,tt,ot,nt)),gt||p!=="always"&&this.grid.hitTest(Xe,tt,ot,nt,p,ae)?{box:[Xe,tt,ot,nt],placeable:!1,offscreen:!1,occluded:ct}:{box:[Xe,tt,ot,nt],placeable:!0,offscreen:this.isOffscreen(Xe,tt,ot,nt),occluded:ct}}placeCollisionCircles(l,p,C,E,T,U,Q,Z,ae,ce,Ce,fe,Re,Ge){const Ze=[],Xe=new a.P(p.anchorX,p.anchorY),tt=this.getPerspectiveRatio(Xe.x,Xe.y,U,Ge),ot=(ae?T*this.transform.getPitchedTextCorrection(p.anchorX,p.anchorY,U)/tt:T*tt)/a.aB,nt={getElevation:Ge,pitchedLabelPlaneMatrix:Q,lineVertexArray:C,pitchWithMap:ae,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Xe,unwrappedTileID:U,width:this.transform.width,height:this.transform.height,translation:Re},ct=ea(ot,E,p.lineOffsetX*ot,p.lineOffsetY*ot,!1,p,!1,nt);let gt=!1,xt=!1,ht=!0;if(ct){const Et=.5*Ce*tt+fe,Qt=new a.P(-100,-100),Kt=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Nt=new Zn,Wt=ct.first,In=ct.last;let kn=[];for(let Xi=Wt.path.length-1;Xi>=1;Xi--)kn.push(Wt.path[Xi]);for(let Xi=1;Xi<In.path.length;Xi++)kn.push(In.path[Xi]);const cn=2.5*Et;if(ae){const Xi=this.projectPathToScreenSpace(kn,nt);kn=Xi.some((mo=>mo.signedDistanceFromCamera<=0))?[]:Xi.map((mo=>mo.point))}let Qn=[];if(kn.length>0){const Xi=kn[0].clone(),mo=kn[0].clone();for(let os=1;os<kn.length;os++)Xi.x=Math.min(Xi.x,kn[os].x),Xi.y=Math.min(Xi.y,kn[os].y),mo.x=Math.max(mo.x,kn[os].x),mo.y=Math.max(mo.y,kn[os].y);Qn=Xi.x>=Qt.x&&mo.x<=Kt.x&&Xi.y>=Qt.y&&mo.y<=Kt.y?[kn]:mo.x<Qt.x||Xi.x>Kt.x||mo.y<Qt.y||Xi.y>Kt.y?[]:a.ay([kn],Qt.x,Qt.y,Kt.x,Kt.y)}for(const Xi of Qn){Nt.reset(Xi,.25*Et);let mo=0;mo=Nt.length<=.5*Et?1:Math.ceil(Nt.paddedLength/cn)+1;for(let os=0;os<mo;os++){const Uo=os/Math.max(mo-1,1),ds=Nt.lerp(Uo),Jo=ds.x+io,ya=ds.y+io;Ze.push(Jo,ya,Et,0);const ss=Jo-Et,Bo=ya-Et,so=Jo+Et,Br=ya+Et;if(ht=ht&&this.isOffscreen(ss,Bo,so,Br),xt=xt||this.isInsideGrid(ss,Bo,so,Br),l!=="always"&&this.grid.hitTestCircle(Jo,ya,Et,l,ce)&&(gt=!0,!Z))return{circles:[],offscreen:!1,collisionDetected:gt}}}}return{circles:!Z&&gt||!xt||tt<this.perspectiveRatioCutoff?[]:Ze,offscreen:ht,collisionDetected:gt}}projectPathToScreenSpace(l,p){const C=(function(E,T){const U=a.L();return a.aq(U,T.pitchedLabelPlaneMatrix),E.map((Q=>{const Z=Pi(Q.x,Q.y,U,T.getElevation),ae=T.transform.projectTileCoordinates(Z.point.x,Z.point.y,T.unwrappedTileID,T.getElevation);return ae.point.x=(.5*ae.point.x+.5)*T.width,ae.point.y=(.5*-ae.point.y+.5)*T.height,ae}))})(l,p);return(function(E){let T=0,U=0,Q=0,Z=0;for(let ae=0;ae<E.length;ae++)E[ae].isOccluded?(Q=ae+1,Z=0):(Z++,Z>U&&(U=Z,T=Q));return E.slice(T,T+U)})(C)}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[],C=new a.a2;for(const Ce of l){const fe=new a.P(Ce.x+io,Ce.y+io);C.extend(fe),p.push(fe)}const{minX:E,minY:T,maxX:U,maxY:Q}=C,Z=this.grid.query(E,T,U,Q).concat(this.ignoredGrid.query(E,T,U,Q)),ae={},ce={};for(const Ce of Z){const fe=Ce.key;if(ae[fe.bucketInstanceId]===void 0&&(ae[fe.bucketInstanceId]={}),ae[fe.bucketInstanceId][fe.featureIndex])continue;const Re=[new a.P(Ce.x1,Ce.y1),new a.P(Ce.x2,Ce.y1),new a.P(Ce.x2,Ce.y2),new a.P(Ce.x1,Ce.y2)];a.az(p,Re)&&(ae[fe.bucketInstanceId][fe.featureIndex]=!0,ce[fe.bucketInstanceId]===void 0&&(ce[fe.bucketInstanceId]=[]),ce[fe.bucketInstanceId].push(fe.featureIndex))}return ce}insertCollisionBox(l,p,C,E,T,U){(C?this.ignoredGrid:this.grid).insert({bucketInstanceId:E,featureIndex:T,collisionGroupID:U,overlapMode:p},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,p,C,E,T,U){const Q=C?this.ignoredGrid:this.grid,Z={bucketInstanceId:E,featureIndex:T,collisionGroupID:U,overlapMode:p};for(let ae=0;ae<l.length;ae+=4)Q.insertCircle(Z,l[ae],l[ae+1],l[ae+2])}projectAndGetPerspectiveRatio(l,p,C,E,T){if(T){let U;E?(U=[l,p,E(l,p),1],a.aw(U,U,T)):(U=[l,p,0,1],Kl(U,U,T));const Q=U[3];return{x:(U[0]/Q+1)/2*this.transform.width+io,y:(-U[1]/Q+1)/2*this.transform.height+io,perspectiveRatio:.5+this.transform.cameraToCenterDistance/Q*.5,isOccluded:!1,signedDistanceFromCamera:Q}}{const U=this.transform.projectTileCoordinates(l,p,C,E);return{x:(U.point.x+1)/2*this.transform.width+io,y:(1-U.point.y)/2*this.transform.height+io,perspectiveRatio:.5+this.transform.cameraToCenterDistance/U.signedDistanceFromCamera*.5,isOccluded:U.isOccluded,signedDistanceFromCamera:U.signedDistanceFromCamera}}}getPerspectiveRatio(l,p,C,E){const T=this.transform.projectTileCoordinates(l,p,C,E);return .5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5}isOffscreen(l,p,C,E){return C<io||l>=this.screenRightBoundary||E<io||p>this.screenBottomBoundary}isInsideGrid(l,p,C,E){return C>=0&&l<this.gridRightBoundary&&E>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const l=a.ag([]);return a.M(l,l,[-100,-100,0]),l}_projectCollisionBox(l,p,C,E,T,U,Q,Z,ae,ce,Ce){let fe=1,Re=0,Ge=0,Ze=1;const Xe=l.anchorPointX+Q[0],tt=l.anchorPointY+Q[1];if(U&&!T){const kn=this.projectAndGetPerspectiveRatio(Xe+1,tt,E,ae,Ce),cn=kn.x-Z.x,Qn=Math.atan((kn.y-Z.y)/cn)+(cn<0?Math.PI:0),Xi=Math.sin(Qn),mo=Math.cos(Qn);fe=mo,Re=Xi,Ge=-Xi,Ze=mo}else if(!U&&T){const kn=oi(this.transform);fe=kn.vecEast[0],Re=kn.vecEast[1],Ge=kn.vecSouth[0],Ze=kn.vecSouth[1]}let ot=Z.x,nt=Z.y,ct=p;T&&(ot=Xe,nt=tt,ct=Math.pow(2,-(this.transform.zoom-C.overscaledZ)),ct*=this.transform.getPitchedTextCorrection(Xe,tt,E),ce||(ct*=a.ah(.5+Z.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),ce&&(ot+=fe*ce.x*ct+Ge*ce.y*ct,nt+=Re*ce.x*ct+Ze*ce.y*ct);const gt=l.x1*ct,xt=l.x2*ct,ht=(gt+xt)/2,Et=l.y1*ct,Qt=l.y2*ct,Kt=(Et+Qt)/2,Nt=[{offsetX:gt,offsetY:Et},{offsetX:ht,offsetY:Et},{offsetX:xt,offsetY:Et},{offsetX:xt,offsetY:Kt},{offsetX:xt,offsetY:Qt},{offsetX:ht,offsetY:Qt},{offsetX:gt,offsetY:Qt},{offsetX:gt,offsetY:Kt}];let Wt=[];for(const{offsetX:kn,offsetY:cn}of Nt)Wt.push(new a.P(ot+fe*kn+Ge*cn,nt+Re*kn+Ze*cn));let In=!1;if(T){const kn=Wt.map((cn=>this.projectAndGetPerspectiveRatio(cn.x,cn.y,E,ae,Ce)));In=kn.some((cn=>!cn.isOccluded)),Wt=kn.map((cn=>new a.P(cn.x,cn.y)))}else In=!0;return{box:a.aA(Wt),allPointsOccluded:!In}}}class pa{constructor(l,p,C,E){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?p:-p))):E&&C?1:0,this.placed=C}isHidden(){return this.opacity===0&&!this.placed}}class Dr{constructor(l,p,C,E,T){this.text=new pa(l?l.text:null,p,C,T),this.icon=new pa(l?l.icon:null,p,E,T)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ll{constructor(l,p,C){this.text=l,this.icon=p,this.skipFade=C}}class Da{constructor(l,p,C,E,T){this.bucketInstanceId=l,this.featureIndex=p,this.sourceLayerIndex=C,this.bucketIndex=E,this.tileID=T}}class qs{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const p=++this.maxGroupID;this.collisionGroups[l]={ID:p,predicate:C=>C.collisionGroupID===p}}return this.collisionGroups[l]}}function Sl(I,l,p,C,E){const{horizontalAlign:T,verticalAlign:U}=a.aH(I);return new a.P(-(T-.5)*l+C[0]*E,-(U-.5)*p+C[1]*E)}class eu{constructor(l,p,C,E,T){this.transform=l.clone(),this.terrain=p,this.collisionIndex=new As(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=C,this.retainedQueryData={},this.collisionGroups=new qs(E),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(l){const p=this.terrain;return p?(C,E)=>p.getElevation(l,C,E):null}getBucketParts(l,p,C,E){const T=C.getBucket(p),U=C.latestFeatureIndex;if(!T||!U||p.id!==T.layerIds[0])return;const Q=C.collisionBoxArray,Z=T.layers[0].layout,ae=T.layers[0].paint,ce=Math.pow(2,this.transform.zoom-C.tileID.overscaledZ),Ce=C.tileSize/a.$,fe=C.tileID.toUnwrapped(),Re=Z.get("text-rotation-alignment")==="map",Ge=a.aC(C,1,this.transform.zoom),Ze=a.aD(this.collisionIndex.transform,C,ae.get("text-translate"),ae.get("text-translate-anchor")),Xe=a.aD(this.collisionIndex.transform,C,ae.get("icon-translate"),ae.get("icon-translate-anchor")),tt=Ti(Re,this.transform,Ge);this.retainedQueryData[T.bucketInstanceId]=new Da(T.bucketInstanceId,U,T.sourceLayerIndex,T.index,C.tileID);const ot={bucket:T,layout:Z,translationText:Ze,translationIcon:Xe,unwrappedTileID:fe,pitchedLabelPlaneMatrix:tt,scale:ce,textPixelRatio:Ce,holdingForFade:C.holdingForFade(),collisionBoxArray:Q,partiallyEvaluatedTextSize:a.an(T.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(E)for(const nt of T.sortKeyRanges){const{sortKey:ct,symbolInstanceStart:gt,symbolInstanceEnd:xt}=nt;l.push({sortKey:ct,symbolInstanceStart:gt,symbolInstanceEnd:xt,parameters:ot})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:ot})}attemptAnchorPlacement(l,p,C,E,T,U,Q,Z,ae,ce,Ce,fe,Re,Ge,Ze,Xe,tt,ot,nt,ct){const gt=a.aE[l.textAnchor],xt=[l.textOffset0,l.textOffset1],ht=Sl(gt,C,E,xt,T),Et=this.collisionIndex.placeCollisionBox(p,fe,Z,ae,ce,Q,U,Xe,Ce.predicate,nt,ht,ct);if((!ot||this.collisionIndex.placeCollisionBox(ot,fe,Z,ae,ce,Q,U,tt,Ce.predicate,nt,ht,ct).placeable)&&Et.placeable){let Qt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Re.crossTileID]&&this.prevPlacement.placements[Re.crossTileID]&&this.prevPlacement.placements[Re.crossTileID].text&&(Qt=this.prevPlacement.variableOffsets[Re.crossTileID].anchor),Re.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Re.crossTileID]={textOffset:xt,width:C,height:E,anchor:gt,textBoxScale:T,prevAnchor:Qt},this.markUsedJustification(Ge,gt,Re,Ze),Ge.allowVerticalPlacement&&(this.markUsedOrientation(Ge,Ze,Re),this.placedOrientations[Re.crossTileID]=Ze),{shift:ht,placedGlyphBoxes:Et}}}placeLayerBucketPart(l,p,C){const{bucket:E,layout:T,translationText:U,translationIcon:Q,unwrappedTileID:Z,pitchedLabelPlaneMatrix:ae,textPixelRatio:ce,holdingForFade:Ce,collisionBoxArray:fe,partiallyEvaluatedTextSize:Re,collisionGroup:Ge}=l.parameters,Ze=T.get("text-optional"),Xe=T.get("icon-optional"),tt=a.aF(T,"text-overlap","text-allow-overlap"),ot=tt==="always",nt=a.aF(T,"icon-overlap","icon-allow-overlap"),ct=nt==="always",gt=T.get("text-rotation-alignment")==="map",xt=T.get("text-pitch-alignment")==="map",ht=T.get("icon-text-fit")!=="none",Et=T.get("symbol-z-order")==="viewport-y",Qt=ot&&(ct||!E.hasIconData()||Xe),Kt=ct&&(ot||!E.hasTextData()||Ze);!E.collisionArrays&&fe&&E.deserializeCollisionBoxes(fe);const Nt=this.retainedQueryData[E.bucketInstanceId].tileID,Wt=this._getTerrainElevationFunc(Nt),In=this.transform.getFastPathSimpleProjectionMatrix(Nt),kn=(cn,Qn,Xi)=>{var mo,os;if(p[cn.crossTileID])return;if(Ce)return void(this.placements[cn.crossTileID]=new Ll(!1,!1,!1));let Uo=!1,ds=!1,Jo=!0,ya=null,ss={box:null,placeable:!1,offscreen:null,occluded:!1},Bo={placeable:!1},so=null,Br=null,fs=null,sc=0,dh=0,Sc=0;Qn.textFeatureIndex?sc=Qn.textFeatureIndex:cn.useRuntimeCollisionCircles&&(sc=cn.featureIndex),Qn.verticalTextFeatureIndex&&(dh=Qn.verticalTextFeatureIndex);const Qd=Qn.textBox;if(Qd){const Au=Co=>{let Ko=a.ao.horizontal;if(E.allowVerticalPlacement&&!Co&&this.prevPlacement){const ql=this.prevPlacement.placedOrientations[cn.crossTileID];ql&&(this.placedOrientations[cn.crossTileID]=ql,Ko=ql,this.markUsedOrientation(E,Ko,cn))}return Ko},mh=(Co,Ko)=>{if(E.allowVerticalPlacement&&cn.numVerticalGlyphVertices>0&&Qn.verticalTextBox){for(const ql of E.writingModes)if(ql===a.ao.vertical?(ss=Ko(),Bo=ss):ss=Co(),ss&&ss.placeable)break}else ss=Co()},Ec=cn.textAnchorOffsetStartIndex,kA=cn.textAnchorOffsetEndIndex;if(kA===Ec){const Co=(Ko,ql)=>{const ps=this.collisionIndex.placeCollisionBox(Ko,tt,ce,Nt,Z,xt,gt,U,Ge.predicate,Wt,void 0,In);return ps&&ps.placeable&&(this.markUsedOrientation(E,ql,cn),this.placedOrientations[cn.crossTileID]=ql),ps};mh((()=>Co(Qd,a.ao.horizontal)),(()=>{const Ko=Qn.verticalTextBox;return E.allowVerticalPlacement&&cn.numVerticalGlyphVertices>0&&Ko?Co(Ko,a.ao.vertical):{box:null,offscreen:null}})),Au(ss&&ss.placeable)}else{let Co=a.aE[(os=(mo=this.prevPlacement)===null||mo===void 0?void 0:mo.variableOffsets[cn.crossTileID])===null||os===void 0?void 0:os.anchor];const Ko=(ps,qd,gh)=>{const Lm=ps.x2-ps.x1,i0=ps.y2-ps.y1,wp=cn.textBoxScale,Yd=ht&&nt==="never"?qd:null;let tl=null,Du=tt==="never"?1:2,Oc="never";Co&&Du++;for(let oA=0;oA<Du;oA++){for(let yh=Ec;yh<kA;yh++){const Hh=E.textAnchorOffsets.get(yh);if(Co&&Hh.textAnchor!==Co)continue;const Zh=this.attemptAnchorPlacement(Hh,ps,Lm,i0,wp,gt,xt,ce,Nt,Z,Ge,Oc,cn,E,gh,U,Q,Yd,Wt);if(Zh&&(tl=Zh.placedGlyphBoxes,tl&&tl.placeable))return Uo=!0,ya=Zh.shift,tl}Co?Co=null:Oc=tt}return C&&!tl&&(tl={box:this.collisionIndex.placeCollisionBox(Qd,"always",ce,Nt,Z,xt,gt,U,Ge.predicate,Wt,void 0,In).box,offscreen:!1,placeable:!1,occluded:!1}),tl};mh((()=>Ko(Qd,Qn.iconBox,a.ao.horizontal)),(()=>{const ps=Qn.verticalTextBox;return E.allowVerticalPlacement&&(!ss||!ss.placeable)&&cn.numVerticalGlyphVertices>0&&ps?Ko(ps,Qn.verticalIconBox,a.ao.vertical):{box:null,occluded:!0,offscreen:null}})),ss&&(Uo=ss.placeable,Jo=ss.offscreen);const ql=Au(ss&&ss.placeable);if(!Uo&&this.prevPlacement){const ps=this.prevPlacement.variableOffsets[cn.crossTileID];ps&&(this.variableOffsets[cn.crossTileID]=ps,this.markUsedJustification(E,ps.anchor,cn,ql))}}}if(so=ss,Uo=so&&so.placeable,Jo=so&&so.offscreen,cn.useRuntimeCollisionCircles&&cn.centerJustifiedTextSymbolIndex>=0){const Au=E.text.placedSymbolArray.get(cn.centerJustifiedTextSymbolIndex),mh=a.ap(E.textSizeData,Re,Au),Ec=T.get("text-padding");Br=this.collisionIndex.placeCollisionCircles(tt,Au,E.lineVertexArray,E.glyphOffsetArray,mh,Z,ae,C,xt,Ge.predicate,cn.collisionCircleDiameter,Ec,U,Wt),Br.circles.length&&Br.collisionDetected&&!C&&a.w("Collisions detected, but collision boxes are not shown"),Uo=ot||Br.circles.length>0&&!Br.collisionDetected,Jo=Jo&&Br.offscreen}if(Qn.iconFeatureIndex&&(Sc=Qn.iconFeatureIndex),Qn.iconBox){const Au=mh=>this.collisionIndex.placeCollisionBox(mh,nt,ce,Nt,Z,xt,gt,Q,Ge.predicate,Wt,ht&&ya?ya:void 0,In);Bo&&Bo.placeable&&Qn.verticalIconBox?(fs=Au(Qn.verticalIconBox),ds=fs.placeable):(fs=Au(Qn.iconBox),ds=fs.placeable),Jo=Jo&&fs.offscreen}const Kf=Ze||cn.numHorizontalGlyphVertices===0&&cn.numVerticalGlyphVertices===0,fh=Xe||cn.numIconVertices===0;Kf||fh?fh?Kf||(ds=ds&&Uo):Uo=ds&&Uo:ds=Uo=ds&&Uo;const ph=ds&&fs.placeable;if(Uo&&so.placeable&&this.collisionIndex.insertCollisionBox(so.box,tt,T.get("text-ignore-placement"),E.bucketInstanceId,Bo&&Bo.placeable&&dh?dh:sc,Ge.ID),ph&&this.collisionIndex.insertCollisionBox(fs.box,nt,T.get("icon-ignore-placement"),E.bucketInstanceId,Sc,Ge.ID),Br&&Uo&&this.collisionIndex.insertCollisionCircles(Br.circles,tt,T.get("text-ignore-placement"),E.bucketInstanceId,sc,Ge.ID),C&&this.storeCollisionData(E.bucketInstanceId,Xi,Qn,so,fs,Br),cn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(E.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[cn.crossTileID]=new Ll((Uo||Qt)&&!so?.occluded,(ds||Kt)&&!fs?.occluded,Jo||E.justReloaded),p[cn.crossTileID]=!0};if(Et){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const cn=E.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Qn=cn.length-1;Qn>=0;--Qn){const Xi=cn[Qn];kn(E.symbolInstances.get(Xi),E.collisionArrays[Xi],Xi)}}else for(let cn=l.symbolInstanceStart;cn<l.symbolInstanceEnd;cn++)kn(E.symbolInstances.get(cn),E.collisionArrays[cn],cn);E.justReloaded=!1}storeCollisionData(l,p,C,E,T,U){if(C.textBox||C.iconBox){let Q,Z;this.collisionBoxArrays.has(l)?Q=this.collisionBoxArrays.get(l):(Q=new Map,this.collisionBoxArrays.set(l,Q)),Q.has(p)?Z=Q.get(p):(Z={text:null,icon:null},Q.set(p,Z)),C.textBox&&(Z.text=E.box),C.iconBox&&(Z.icon=T.box)}if(U){let Q=this.collisionCircleArrays[l];Q===void 0&&(Q=this.collisionCircleArrays[l]=[]);for(let Z=0;Z<U.circles.length;Z+=4)Q.push(U.circles[Z+0]-io),Q.push(U.circles[Z+1]-io),Q.push(U.circles[Z+2]),Q.push(U.collisionDetected?1:0)}}markUsedJustification(l,p,C,E){let T;T=E===a.ao.vertical?C.verticalPlacedTextSymbolIndex:{left:C.leftJustifiedTextSymbolIndex,center:C.centerJustifiedTextSymbolIndex,right:C.rightJustifiedTextSymbolIndex}[a.aG(p)];const U=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex,C.verticalPlacedTextSymbolIndex];for(const Q of U)Q>=0&&(l.text.placedSymbolArray.get(Q).crossTileID=T>=0&&Q!==T?0:C.crossTileID)}markUsedOrientation(l,p,C){const E=p===a.ao.horizontal||p===a.ao.horizontalOnly?p:0,T=p===a.ao.vertical?p:0,U=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex];for(const Q of U)l.text.placedSymbolArray.get(Q).placedOrientation=E;C.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(C.verticalPlacedTextSymbolIndex).placedOrientation=T)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let C=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const E=p?p.symbolFadeChange(l):1,T=p?p.opacities:{},U=p?p.variableOffsets:{},Q=p?p.placedOrientations:{};for(const Z in this.placements){const ae=this.placements[Z],ce=T[Z];ce?(this.opacities[Z]=new Dr(ce,E,ae.text,ae.icon),C=C||ae.text!==ce.text.placed||ae.icon!==ce.icon.placed):(this.opacities[Z]=new Dr(null,E,ae.text,ae.icon,ae.skipFade),C=C||ae.text||ae.icon)}for(const Z in T){const ae=T[Z];if(!this.opacities[Z]){const ce=new Dr(ae,E,!1,!1);ce.isHidden()||(this.opacities[Z]=ce,C=C||ae.text.placed||ae.icon.placed)}}for(const Z in U)this.variableOffsets[Z]||!this.opacities[Z]||this.opacities[Z].isHidden()||(this.variableOffsets[Z]=U[Z]);for(const Z in Q)this.placedOrientations[Z]||!this.opacities[Z]||this.opacities[Z].isHidden()||(this.placedOrientations[Z]=Q[Z]);if(p&&p.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");C?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:l)}updateLayerOpacities(l,p){const C={};for(const E of p){const T=E.getBucket(l);T&&E.latestFeatureIndex&&l.id===T.layerIds[0]&&this.updateBucketOpacities(T,E.tileID,C,E.collisionBoxArray)}}updateBucketOpacities(l,p,C,E){l.hasTextData()&&(l.text.opacityVertexArray.clear(),l.text.hasVisibleVertices=!1),l.hasIconData()&&(l.icon.opacityVertexArray.clear(),l.icon.hasVisibleVertices=!1),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const T=l.layers[0],U=T.layout,Q=new Dr(null,0,!1,!1,!0),Z=U.get("text-allow-overlap"),ae=U.get("icon-allow-overlap"),ce=T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ce=U.get("text-rotation-alignment")==="map",fe=U.get("text-pitch-alignment")==="map",Re=U.get("icon-text-fit")!=="none",Ge=new Dr(null,0,Z&&(ae||!l.hasIconData()||U.get("icon-optional")),ae&&(Z||!l.hasTextData()||U.get("text-optional")),!0);!l.collisionArrays&&E&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(E);const Ze=(tt,ot,nt)=>{for(let ct=0;ct<ot/4;ct++)tt.opacityVertexArray.emplaceBack(nt);tt.hasVisibleVertices=tt.hasVisibleVertices||nt!==Fl},Xe=this.collisionBoxArrays.get(l.bucketInstanceId);for(let tt=0;tt<l.symbolInstances.length;tt++){const ot=l.symbolInstances.get(tt),{numHorizontalGlyphVertices:nt,numVerticalGlyphVertices:ct,crossTileID:gt}=ot;let xt=this.opacities[gt];C[gt]?xt=Q:xt||(xt=Ge,this.opacities[gt]=xt),C[gt]=!0;const ht=ot.numIconVertices>0,Et=this.placedOrientations[ot.crossTileID],Qt=Et===a.ao.vertical,Kt=Et===a.ao.horizontal||Et===a.ao.horizontalOnly;if(nt>0||ct>0){const Wt=nu(xt.text);Ze(l.text,nt,Qt?Fl:Wt),Ze(l.text,ct,Kt?Fl:Wt);const In=xt.text.isHidden();[ot.rightJustifiedTextSymbolIndex,ot.centerJustifiedTextSymbolIndex,ot.leftJustifiedTextSymbolIndex].forEach((Qn=>{Qn>=0&&(l.text.placedSymbolArray.get(Qn).hidden=In||Qt?1:0)})),ot.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(ot.verticalPlacedTextSymbolIndex).hidden=In||Kt?1:0);const kn=this.variableOffsets[ot.crossTileID];kn&&this.markUsedJustification(l,kn.anchor,ot,Et);const cn=this.placedOrientations[ot.crossTileID];cn&&(this.markUsedJustification(l,"left",ot,cn),this.markUsedOrientation(l,cn,ot))}if(ht){const Wt=nu(xt.icon),In=!(Re&&ot.verticalPlacedIconSymbolIndex&&Qt);ot.placedIconSymbolIndex>=0&&(Ze(l.icon,ot.numIconVertices,In?Wt:Fl),l.icon.placedSymbolArray.get(ot.placedIconSymbolIndex).hidden=xt.icon.isHidden()),ot.verticalPlacedIconSymbolIndex>=0&&(Ze(l.icon,ot.numVerticalIconVertices,In?Fl:Wt),l.icon.placedSymbolArray.get(ot.verticalPlacedIconSymbolIndex).hidden=xt.icon.isHidden())}const Nt=Xe&&Xe.has(tt)?Xe.get(tt):{text:null,icon:null};if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const Wt=l.collisionArrays[tt];if(Wt){let In=new a.P(0,0);if(Wt.textBox||Wt.verticalTextBox){let kn=!0;if(ce){const cn=this.variableOffsets[gt];cn?(In=Sl(cn.anchor,cn.width,cn.height,cn.textOffset,cn.textBoxScale),Ce&&In._rotate(fe?-this.transform.bearingInRadians:this.transform.bearingInRadians)):kn=!1}if(Wt.textBox||Wt.verticalTextBox){let cn;Wt.textBox&&(cn=Qt),Wt.verticalTextBox&&(cn=Kt),$A(l.textCollisionBox.collisionVertexArray,xt.text.placed,!kn||cn,Nt.text,In.x,In.y)}}if(Wt.iconBox||Wt.verticalIconBox){const kn=!!(!Kt&&Wt.verticalIconBox);let cn;Wt.iconBox&&(cn=kn),Wt.verticalIconBox&&(cn=!kn),$A(l.iconCollisionBox.collisionVertexArray,xt.icon.placed,cn,Nt.icon,Re?In.x:0,Re?In.y:0)}}}}if(l.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);l.bucketInstanceId in this.collisionCircleArrays&&(l.collisionCircleArray=this.collisionCircleArrays[l.bucketInstanceId],delete this.collisionCircleArrays[l.bucketInstanceId])}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,p){const C=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*C>l}setStale(){this.stale=!0}}function $A(I,l,p,C,E,T){C&&C.length!==0||(C=[0,0,0,0]);const U=C[0]-io,Q=C[1]-io,Z=C[2]-io,ae=C[3]-io;I.emplaceBack(l?1:0,p?1:0,E||0,T||0,U,Q),I.emplaceBack(l?1:0,p?1:0,E||0,T||0,Z,Q),I.emplaceBack(l?1:0,p?1:0,E||0,T||0,Z,ae),I.emplaceBack(l?1:0,p?1:0,E||0,T||0,U,ae)}const Vc=Math.pow(2,25),mc=Math.pow(2,24),ma=Math.pow(2,17),xs=Math.pow(2,16),gc=Math.pow(2,9),tu=Math.pow(2,8),yc=Math.pow(2,1);function nu(I){if(I.opacity===0&&!I.placed)return 0;if(I.opacity===1&&I.placed)return 4294967295;const l=I.placed?1:0,p=Math.floor(127*I.opacity);return p*Vc+l*mc+p*ma+l*xs+p*gc+l*tu+p*yc+l}const Fl=0;class VA{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,p,C,E,T){const U=this._bucketParts;for(;this._currentTileIndex<l.length;)if(p.getBucketParts(U,E,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,U.sort(((Q,Z)=>Q.sortKey-Z.sortKey)));this._currentPartIndex<U.length;)if(p.placeLayerBucketPart(U[this._currentPartIndex],this._seenCrossTileIDs,C),this._currentPartIndex++,T())return!0;return!1}}class ga{constructor(l,p,C,E,T,U,Q,Z){this.placement=new eu(l,p,U,Q,Z),this._currentPlacementIndex=C.length-1,this._forceFullPlacement=E,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(l,p,C){const E=M.now(),T=()=>!this._forceFullPlacement&&M.now()-E>2;for(;this._currentPlacementIndex>=0;){const U=p[l[this._currentPlacementIndex]],Q=this.placement.collisionIndex.transform.zoom;if(U.type==="symbol"&&(!U.minzoom||U.minzoom<=Q)&&(!U.maxzoom||U.maxzoom>Q)){if(this._inProgressLayer||(this._inProgressLayer=new VA(U)),this._inProgressLayer.continuePlacement(C[U.source],this.placement,this._showCollisionBoxes,U,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const iu=512/a.$/2;class ru{constructor(l,p,C){this.tileID=l,this.bucketInstanceId=C,this._symbolsByKey={};const E=new Map;for(let T=0;T<p.length;T++){const U=p.get(T),Q=U.key,Z=E.get(Q);Z?Z.push(U):E.set(Q,[U])}for(const[T,U]of E){const Q={positions:U.map((Z=>({x:Math.floor(Z.anchorX*iu),y:Math.floor(Z.anchorY*iu)}))),crossTileIDs:U.map((Z=>Z.crossTileID))};if(Q.positions.length>128){const Z=new a.aI(Q.positions.length,16,Uint16Array);for(const{x:ae,y:ce}of Q.positions)Z.add(ae,ce);Z.finish(),delete Q.positions,Q.index=Z}this._symbolsByKey[T]=Q}}getScaledCoordinates(l,p){const{x:C,y:E,z:T}=this.tileID.canonical,{x:U,y:Q,z:Z}=p.canonical,ae=iu/Math.pow(2,Z-T),ce=(Q*a.$+l.anchorY)*ae,Ce=E*a.$*iu;return{x:Math.floor((U*a.$+l.anchorX)*ae-C*a.$*iu),y:Math.floor(ce-Ce)}}findMatches(l,p,C){const E=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let T=0;T<l.length;T++){const U=l.get(T);if(U.crossTileID)continue;const Q=this._symbolsByKey[U.key];if(!Q)continue;const Z=this.getScaledCoordinates(U,p);if(Q.index){const ae=Q.index.range(Z.x-E,Z.y-E,Z.x+E,Z.y+E).sort();for(const ce of ae){const Ce=Q.crossTileIDs[ce];if(!C[Ce]){C[Ce]=!0,U.crossTileID=Ce;break}}}else if(Q.positions)for(let ae=0;ae<Q.positions.length;ae++){const ce=Q.positions[ae],Ce=Q.crossTileIDs[ae];if(Math.abs(ce.x-Z.x)<=E&&Math.abs(ce.y-Z.y)<=E&&!C[Ce]){C[Ce]=!0,U.crossTileID=Ce;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:l})=>l))}}class Hc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Hu{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const p=Math.round((l-this.lng)/360);if(p!==0)for(const C in this.indexes){const E=this.indexes[C],T={};for(const U in E){const Q=E[U];Q.tileID=Q.tileID.unwrapTo(Q.tileID.wrap+p),T[Q.tileID.key]=Q}this.indexes[C]=T}this.lng=l}addBucket(l,p,C){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let T=0;T<p.symbolInstances.length;T++)p.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const E=this.usedCrossTileIDs[l.overscaledZ];for(const T in this.indexes){const U=this.indexes[T];if(Number(T)>l.overscaledZ)for(const Q in U){const Z=U[Q];Z.tileID.isChildOf(l)&&Z.findMatches(p.symbolInstances,l,E)}else{const Q=U[l.scaledTo(Number(T)).key];Q&&Q.findMatches(p.symbolInstances,l,E)}}for(let T=0;T<p.symbolInstances.length;T++){const U=p.symbolInstances.get(T);U.crossTileID||(U.crossTileID=C.generate(),E[U.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new ru(l,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(l,p){for(const C of p.getCrossTileIDsLists())for(const E of C)delete this.usedCrossTileIDs[l][E]}removeStaleBuckets(l){let p=!1;for(const C in this.indexes){const E=this.indexes[C];for(const T in E)l[E[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(C,E[T]),delete E[T],p=!0)}return p}}class Pa{constructor(){this.layerIndexes={},this.crossTileIDs=new Hc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,p,C){let E=this.layerIndexes[l.id];E===void 0&&(E=this.layerIndexes[l.id]=new Hu);let T=!1;const U={};E.handleWrapJump(C);for(const Q of p){const Z=Q.getBucket(l);Z&&l.id===Z.layerIds[0]&&(Z.bucketInstanceId||(Z.bucketInstanceId=++this.maxBucketInstanceId),E.addBucket(Q.tileID,Z,this.crossTileIDs)&&(T=!0),U[Z.bucketInstanceId]=!0)}return E.removeStaleBuckets(U)&&(T=!0),T}pruneUnusedLayers(l){const p={};l.forEach((C=>{p[C]=!0}));for(const C in this.layerIndexes)p[C]||delete this.layerIndexes[C]}}var Ds="void main() {fragColor=vec4(1.0);}";const qr={prelude:Yi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Yi("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Yi("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Yi(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Yi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Yi(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Yi(Ds,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Yi(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Yi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Yi("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Yi("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Yi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Yi("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Yi(Ds,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Yi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Yi(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Yi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Yi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Yi(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Yi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Yi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Yi(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Yi(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Yi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Yi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Yi(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:Yi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Yi(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Yi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Yi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Yi("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Yi("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Yi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Yi("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Yi(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Yi("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Yi(I,l){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,C=l.match(/in ([\w]+) ([\w]+)/g),E=I.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),U=T?T.concat(E):E,Q={};return{fragmentSource:I=I.replace(p,((Z,ae,ce,Ce,fe)=>(Q[fe]=!0,ae==="define"?`
#ifndef HAS_UNIFORM_u_${fe}
in ${ce} ${Ce} ${fe};
#else
uniform ${ce} ${Ce} u_${fe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${fe}
    ${ce} ${Ce} ${fe} = u_${fe};
#endif
`))),vertexSource:l=l.replace(p,((Z,ae,ce,Ce,fe)=>{const Re=Ce==="float"?"vec2":"vec4",Ge=fe.match(/color/)?"color":Re;return Q[fe]?ae==="define"?`
#ifndef HAS_UNIFORM_u_${fe}
uniform lowp float u_${fe}_t;
in ${ce} ${Re} a_${fe};
out ${ce} ${Ce} ${fe};
#else
uniform ${ce} ${Ce} u_${fe};
#endif
`:Ge==="vec4"?`
#ifndef HAS_UNIFORM_u_${fe}
    ${fe} = a_${fe};
#else
    ${ce} ${Ce} ${fe} = u_${fe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${fe}
    ${fe} = unpack_mix_${Ge}(a_${fe}, u_${fe}_t);
#else
    ${ce} ${Ce} ${fe} = u_${fe};
#endif
`:ae==="define"?`
#ifndef HAS_UNIFORM_u_${fe}
uniform lowp float u_${fe}_t;
in ${ce} ${Re} a_${fe};
#else
uniform ${ce} ${Ce} u_${fe};
#endif
`:Ge==="vec4"?`
#ifndef HAS_UNIFORM_u_${fe}
    ${ce} ${Ce} ${fe} = a_${fe};
#else
    ${ce} ${Ce} ${fe} = u_${fe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${fe}
    ${ce} ${Ce} ${fe} = unpack_mix_${Ge}(a_${fe}, u_${fe}_t);
#else
    ${ce} ${Ce} ${fe} = u_${fe};
#endif
`})),staticAttributes:C,staticUniforms:U}}class ou{constructor(l,p,C){this.vertexBuffer=l,this.indexBuffer=p,this.segments=C}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Vo=a.aJ([{name:"a_pos",type:"Int16",components:2}]);const dl="#define PROJECTION_MERCATOR",Cu="mercator";class sr{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Cu}get shaderDefine(){return dl}get shaderPreludeCode(){return qr.projectionMercator}get vertexShaderPreludeCode(){return qr.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(l){}getMeshFromTileID(l,p,C,E,T){if(this._cachedMesh)return this._cachedMesh;const U=new a.aL;U.emplaceBack(0,0),U.emplaceBack(a.$,0),U.emplaceBack(0,a.$),U.emplaceBack(a.$,a.$);const Q=l.createVertexBuffer(U,Vo.members),Z=a.aM.simpleSegment(0,0,4,2),ae=new a.aN;ae.emplaceBack(1,0,2),ae.emplaceBack(1,2,3);const ce=l.createIndexBuffer(ae);return this._cachedMesh=new ou(Q,ce,Z),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(l){}}class El{constructor(l=0,p=0,C=0,E=0){if(isNaN(l)||l<0||isNaN(p)||p<0||isNaN(C)||C<0||isNaN(E)||E<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=p,this.left=C,this.right=E}interpolate(l,p,C){return p.top!=null&&l.top!=null&&(this.top=a.C.number(l.top,p.top,C)),p.bottom!=null&&l.bottom!=null&&(this.bottom=a.C.number(l.bottom,p.bottom,C)),p.left!=null&&l.left!=null&&(this.left=a.C.number(l.left,p.left,C)),p.right!=null&&l.right!=null&&(this.right=a.C.number(l.right,p.right,C)),this}getCenter(l,p){const C=a.ah((this.left+l-this.right)/2,0,l),E=a.ah((this.top+p-this.bottom)/2,0,p);return new a.P(C,E)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new El(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Va(I,l){if(!I.renderWorldCopies||I.lngRange)return;const p=l.lng-I.center.lng;l.lng+=p>180?-360:p<-180?360:0}function Go(I){return Math.max(0,Math.floor(I))}class Ps{constructor(l,p,C,E,T,U){this._callbacks=l,this._tileSize=512,this._renderWorldCopies=U===void 0||!!U,this._minZoom=p||0,this._maxZoom=C||22,this._minPitch=E??0,this._maxPitch=T??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Go(this._zoom),this._scale=a.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new El,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(l,p,C){this._latRange=l.latRange,this._lngRange=l.lngRange,this._width=l.width,this._height=l.height,this._center=l.center,this._elevation=l.elevation,this._minElevationForCurrentTile=l.minElevationForCurrentTile,this._zoom=l.zoom,this._tileZoom=Go(this._zoom),this._scale=a.af(this._zoom),this._bearingInRadians=l.bearingInRadians,this._fovInRadians=l.fovInRadians,this._pitchInRadians=l.pitchInRadians,this._rollInRadians=l.rollInRadians,this._unmodified=l.unmodified,this._edgeInsets=new El(l.padding.top,l.padding.bottom,l.padding.left,l.padding.right),this._minZoom=l.minZoom,this._maxZoom=l.maxZoom,this._minPitch=l.minPitch,this._maxPitch=l.maxPitch,this._renderWorldCopies=l.renderWorldCopies,this._cameraToCenterDistance=l.cameraToCenterDistance,this._nearZ=l.nearZ,this._farZ=l.farZ,this._autoCalculateNearFarZ=!C&&l.autoCalculateNearFarZ,p&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(l){this._minElevationForCurrentTile=l}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(l){this._minZoom!==l&&(this._minZoom=l,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(l){this._minPitch!==l&&(this._minPitch=l,this.setPitch(Math.max(this.pitch,l)))}get maxPitch(){return this._maxPitch}setMaxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.setPitch(Math.min(this.pitch,l)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(l){const p=a.aO(l,-180,180)*Math.PI/180;var C,E,T,U,Q,Z,ae,ce,Ce;this._bearingInRadians!==p&&(this._unmodified=!1,this._bearingInRadians=p,this._calcMatrices(),this._rotationMatrix=h(),C=this._rotationMatrix,T=-this._bearingInRadians,U=(E=this._rotationMatrix)[0],Q=E[1],Z=E[2],ae=E[3],ce=Math.sin(T),Ce=Math.cos(T),C[0]=U*Ce+Z*ce,C[1]=Q*Ce+ae*ce,C[2]=U*-ce+Z*Ce,C[3]=Q*-ce+ae*Ce)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(l){const p=a.ah(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==p&&(this._unmodified=!1,this._pitchInRadians=p,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(l){const p=l/180*Math.PI;this._rollInRadians!==p&&(this._unmodified=!1,this._rollInRadians=p,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aP(this._fovInRadians)}setFov(l){l=a.ah(l,.1,150),this.fov!==l&&(this._unmodified=!1,this._fovInRadians=a.ae(l),this._calcMatrices())}get zoom(){return this._zoom}setZoom(l){const p=this.getConstrained(this._center,l).zoom;this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this._tileZoom=Math.max(0,Math.floor(p)),this._scale=a.af(p),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(l){l!==this._elevation&&(this._elevation=l,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(l,p){this._autoCalculateNearFarZ=!1,this._nearZ=l,this._farZ=p,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,p,C){this._unmodified=!1,this._edgeInsets.interpolate(l,p,C),this._constrain(),this._calcMatrices()}resize(l,p,C=!0){this._width=l,this._height=p,C&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new rt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(l){l?(this._lngRange=[l.getWest(),l.getEast()],this._latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-a.ai,a.ai])}getConstrained(l,p){return this._callbacks.getConstrained(l,p)}getCameraQueryGeometry(l,p){if(p.length===1)return[p[0],l];{const{minX:C,minY:E,maxX:T,maxY:U}=a.a2.fromPoints(p).extend(l);return[new a.P(C,E),new a.P(T,E),new a.P(T,U),new a.P(C,U),new a.P(C,E)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const l=this._unmodified,{center:p,zoom:C}=this.getConstrained(this.center,this.zoom);this.setCenter(p),this.setZoom(C),this._unmodified=l,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let l=a.ag(new Float64Array(16));a.N(l,l,[this._width/2,-this._height/2,1]),a.M(l,l,[1,-1,0]),this._clipSpaceToPixelsMatrix=l,l=a.ag(new Float64Array(16)),a.N(l,l,[1,-1,1]),a.M(l,l,[-1,-1,0]),a.N(l,l,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=l,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(l,p,C,E){const T=C!==void 0?C:this.bearing,U=E=E!==void 0?E:this.pitch,Q=a.a1.fromLngLat(l,p),Z=-Math.cos(a.ae(U)),ae=Math.sin(a.ae(U)),ce=ae*Math.sin(a.ae(T)),Ce=-ae*Math.cos(a.ae(T));let fe=this.elevation;const Re=p-fe;let Ge;Z*Re>=0||Math.abs(Z)<.1?(Ge=1e4,fe=p+Ge*Z):Ge=-Re/Z;let Ze,Xe,tt=a.aQ(1,Q.y),ot=0;do{if(ot+=1,ot>10)break;Xe=Ge/tt,Ze=new a.a1(Q.x+ce*Xe,Q.y+Ce*Xe),tt=1/Ze.meterInMercatorCoordinateUnits()}while(Math.abs(Ge-Xe*tt)>1e-12);return{center:Ze.toLngLat(),elevation:fe,zoom:a.ak(this.height/2/Math.tan(this.fovInRadians/2)/Xe/this.tileSize)}}recalculateZoomAndCenter(l){if(this.elevation-l==0)return;const p=a.aj(1,this.center.lat)*this.worldSize,C=this.cameraToCenterDistance/p,E=a.a1.fromLngLat(this.center,this.elevation),T=ge(this.center,this.elevation,this.pitch,this.bearing,C);this._elevation=l;const U=this.calculateCenterFromCameraLngLatAlt(T.toLngLat(),a.aQ(T.z,E.y),this.bearing,this.pitch);this._elevation=U.elevation,this._center=U.center,this.setZoom(U.zoom)}getCameraPoint(){const l=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(l*Math.sin(this.rollInRadians),l*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const l=a.aj(1,this.center.lat)*this.worldSize;return ge(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/l).toLngLat()}getMercatorTileCoordinates(l){if(!l)return[0,0,1,1];const p=l.canonical.z>=0?1<<l.canonical.z:Math.pow(2,l.canonical.z);return[l.canonical.x/p,l.canonical.y/p,1/p/a.$,1/p/a.$]}}class Ro{constructor(l,p){this.min=l,this.max=p,this.center=a.aR([],a.aS([],this.min,this.max),.5)}quadrant(l){const p=[l%2==0,l<2],C=a.aT(this.min),E=a.aT(this.max);for(let T=0;T<p.length;T++)C[T]=p[T]?this.min[T]:this.center[T],E[T]=p[T]?this.center[T]:this.max[T];return E[2]=this.max[2],new Ro(C,E)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersectsFrustum(l){let p=!0;for(let C=0;C<l.planes.length;C++){const E=this.intersectsPlane(l.planes[C]);if(E===0)return 0;E===1&&(p=!1)}return p?2:l.aabb.min[0]>this.max[0]||l.aabb.min[1]>this.max[1]||l.aabb.min[2]>this.max[2]||l.aabb.max[0]<this.min[0]||l.aabb.max[1]<this.min[1]||l.aabb.max[2]<this.min[2]?0:1}intersectsPlane(l){let p=l[3],C=l[3];for(let E=0;E<3;E++)l[E]>0?(p+=l[E]*this.min[E],C+=l[E]*this.max[E]):(C+=l[E]*this.min[E],p+=l[E]*this.max[E]);return p>=0?2:C<0?0:1}}class Eo{distanceToTile2d(l,p,C,E){const T=E.distanceX([l,p]),U=E.distanceY([l,p]);return Math.hypot(T,U)}getWrap(l,p,C){return C}getTileBoundingVolume(l,p,C,E){var T,U;let Q=0,Z=0;if(E?.terrain){const ce=new a.Z(l.z,p,l.z,l.x,l.y),Ce=E.terrain.getMinMaxElevation(ce);Q=(T=Ce.minElevation)!==null&&T!==void 0?T:Math.min(0,C),Z=(U=Ce.maxElevation)!==null&&U!==void 0?U:Math.max(0,C)}const ae=1<<l.z;return new Ro([p+l.x/ae,l.y/ae,Q],[p+(l.x+1)/ae,(l.y+1)/ae,Z])}allowVariableZoom(l,p){const C=l.fov*(Math.abs(Math.cos(l.rollInRadians))*l.height+Math.abs(Math.sin(l.rollInRadians))*l.width)/l.height,E=a.ah(78.5-C/2,0,60);return!!p.terrain||l.pitch>E}allowWorldCopies(){return!0}prepareNextFrame(){}}class Ho{constructor(l,p,C){this.points=l,this.planes=p,this.aabb=C}static fromInvProjectionMatrix(l,p=1,C=0,E,T){const U=T?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],Q=Math.pow(2,C),Z=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((fe=>(function(Re,Ge,Ze,Xe){const tt=a.aw([],Re,Ge),ot=1/tt[3]/Ze*Xe;return a.aY(tt,tt,[ot,ot,1/tt[3],ot])})(fe,l,p,Q)));E&&(function(fe,Re,Ge,Ze){const Xe=Ze?4:0,tt=Ze?0:4;let ot=0;const nt=[],ct=[];for(let ht=0;ht<4;ht++){const Et=a.aU([],fe[ht+tt],fe[ht+Xe]),Qt=a.aZ(Et);a.aR(Et,Et,1/Qt),nt.push(Qt),ct.push(Et)}for(let ht=0;ht<4;ht++){const Et=a.a_(fe[ht+Xe],ct[ht],Ge);ot=Et!==null&&Et>=0?Math.max(ot,Et):Math.max(ot,nt[ht])}const gt=(function(ht,Et){const Qt=a.aU([],ht[Et[0]],ht[Et[1]]),Kt=a.aU([],ht[Et[2]],ht[Et[1]]),Nt=[0,0,0,0];return a.aV(Nt,a.aW([],Qt,Kt)),Nt[3]=-a.aX(Nt,ht[Et[0]]),Nt})(fe,Re),xt=(function(ht,Et){const Qt=a.a$(ht),Kt=a.b0([],ht,1/Qt),Nt=a.aU([],Et,a.aR([],Kt,a.aX(Et,Kt))),Wt=a.a$(Nt);if(Wt>0){const In=Math.sqrt(1-Kt[3]*Kt[3]),kn=a.aR([],Kt,-Kt[3]),cn=a.aS([],kn,a.aR([],Nt,In/Wt));return a.b1(Et,cn)}return null})(Ge,gt);if(xt!==null){const ht=xt/a.aX(ct[0],gt);ot=Math.min(ot,ht)}for(let ht=0;ht<4;ht++){const Et=Math.min(ot,nt[ht]);fe[ht+tt]=[fe[ht+Xe][0]+ct[ht][0]*Et,fe[ht+Xe][1]+ct[ht][1]*Et,fe[ht+Xe][2]+ct[ht][2]*Et,1]}})(Z,U[0],E,T);const ae=U.map((fe=>{const Re=a.aU([],Z[fe[0]],Z[fe[1]]),Ge=a.aU([],Z[fe[2]],Z[fe[1]]),Ze=a.aV([],a.aW([],Re,Ge)),Xe=-a.aX(Ze,Z[fe[1]]);return Ze.concat(Xe)})),ce=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Ce=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const fe of Z)for(let Re=0;Re<3;Re++)ce[Re]=Math.min(ce[Re],fe[Re]),Ce[Re]=Math.max(Ce[Re],fe[Re]);return new Ho(Z,ae,new Ro(ce,Ce))}}class Pr{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,p,C){return this._helper.interpolatePadding(l,p,C)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,p,C=!0){this._helper.resize(l,p,C)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,p){this._helper.overrideNearFarZ(l,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l,p){}constructor(l,p,C,E,T){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Ps({calcMatrices:()=>{this._calcMatrices()},getConstrained:(U,Q)=>this.getConstrained(U,Q)},l,p,C,E,T),this._coveringTilesDetailsProvider=new Eo}clone(){const l=new Pr;return l.apply(this),l}apply(l,p,C){this._helper.apply(l,p,C)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(l){const p=[new a.b2(0,l)];if(this._helper._renderWorldCopies){const C=this.screenPointToMercatorCoordinate(new a.P(0,0)),E=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),T=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),U=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),Q=Math.floor(Math.min(C.x,E.x,T.x,U.x)),Z=Math.floor(Math.max(C.x,E.x,T.x,U.x)),ae=1;for(let ce=Q-ae;ce<=Z+ae;ce++)ce!==0&&p.push(new a.b2(ce,l))}return p}getCameraFrustum(){return Ho.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){const p=this.screenPointToLocation(this.centerPoint,l),C=l?l.getElevationForLngLatZoom(p,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(C)}setLocationAtPoint(l,p){const C=a.aj(this.elevation,this.center.lat),E=this.screenPointToMercatorCoordinateAtZ(p,C),T=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,C),U=a.a1.fromLngLat(l),Q=new a.a1(U.x-(E.x-T.x),U.y-(E.y-T.y));this.setCenter(Q?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(l,p){return p?this.coordinatePoint(a.a1.fromLngLat(l),p.getElevationForLngLatZoom(l,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.a1.fromLngLat(l))}screenPointToLocation(l,p){var C;return(C=this.screenPointToMercatorCoordinate(l,p))===null||C===void 0?void 0:C.toLngLat()}screenPointToMercatorCoordinate(l,p){if(p){const C=p.pointCoordinate(l);if(C!=null)return C}return this.screenPointToMercatorCoordinateAtZ(l)}screenPointToMercatorCoordinateAtZ(l,p){const C=p||0,E=[l.x,l.y,0,1],T=[l.x,l.y,1,1];a.aw(E,E,this._pixelMatrixInverse),a.aw(T,T,this._pixelMatrixInverse);const U=E[3],Q=T[3],Z=E[1]/U,ae=T[1]/Q,ce=E[2]/U,Ce=T[2]/Q,fe=ce===Ce?0:(C-ce)/(Ce-ce);return new a.a1(a.C.number(E[0]/U,T[0]/Q,fe)/this.worldSize,a.C.number(Z,ae,fe)/this.worldSize,C)}coordinatePoint(l,p=0,C=this._pixelMatrix){const E=[l.x*this.worldSize,l.y*this.worldSize,p,1];return a.aw(E,E,C),new a.P(E[0]/E[3],E[1]/E[3])}getBounds(){const l=Math.max(0,this._helper._height/2-Ve(this));return new rt().extend(this.screenPointToLocation(new a.P(0,l))).extend(this.screenPointToLocation(new a.P(this._helper._width,l))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(l,p){return p?p.pointCoordinate(l)!=null:l.y>this.height/2-Ve(this)}calculatePosMatrix(l,p=!1,C){var E;const T=(E=l.key)!==null&&E!==void 0?E:a.b3(l.wrap,l.canonical.z,l.canonical.z,l.canonical.x,l.canonical.y),U=p?this._alignedPosMatrixCache:this._posMatrixCache;if(U.has(T)){const ae=U.get(T);return C?ae.f32:ae.f64}const Q=lt(l,this.worldSize);a.O(Q,p?this._alignedProjMatrix:this._viewProjMatrix,Q);const Z={f64:Q,f32:new Float32Array(Q)};return U.set(T,Z),C?Z.f32:Z.f64}calculateFogMatrix(l){const p=l.key,C=this._fogMatrixCacheF32;if(C.has(p))return C.get(p);const E=lt(l,this.worldSize);return a.O(E,this._fogMatrix,E),C.set(p,new Float32Array(E)),C.get(p)}getConstrained(l,p){p=a.ah(+p,this.minZoom,this.maxZoom);const C={center:new a.S(l.lng,l.lat),zoom:p};let E=this._helper._lngRange;if(!this._helper._renderWorldCopies&&E===null){const nt=179.9999999999;E=[-nt,nt]}const T=this.tileSize*a.af(C.zoom);let U=0,Q=T,Z=0,ae=T,ce=0,Ce=0;const{x:fe,y:Re}=this.size;if(this._helper._latRange){const nt=this._helper._latRange;U=a.U(nt[1])*T,Q=a.U(nt[0])*T,Q-U<Re&&(ce=Re/(Q-U))}E&&(Z=a.aO(a.V(E[0])*T,0,T),ae=a.aO(a.V(E[1])*T,0,T),ae<Z&&(ae+=T),ae-Z<fe&&(Ce=fe/(ae-Z)));const{x:Ge,y:Ze}=ye(T,l);let Xe,tt;const ot=Math.max(Ce||0,ce||0);if(ot){const nt=new a.P(Ce?(ae+Z)/2:Ge,ce?(Q+U)/2:Ze);return C.center=Ue(T,nt).wrap(),C.zoom+=a.ak(ot),C}if(this._helper._latRange){const nt=Re/2;Ze-nt<U&&(tt=U+nt),Ze+nt>Q&&(tt=Q-nt)}if(E){const nt=(Z+ae)/2;let ct=Ge;this._helper._renderWorldCopies&&(ct=a.aO(Ge,nt-T/2,nt+T/2));const gt=fe/2;ct-gt<Z&&(Xe=Z+gt),ct+gt>ae&&(Xe=ae-gt)}if(Xe!==void 0||tt!==void 0){const nt=new a.P(Xe??Ge,tt??Ze);C.center=Ue(T,nt).wrap()}return C}calculateCenterFromCameraLngLatAlt(l,p,C,E){return this._helper.calculateCenterFromCameraLngLatAlt(l,p,C,E)}_calculateNearFarZIfNeeded(l,p,C){if(!this._helper.autoCalculateNearFarZ)return;const E=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),T=l-E*this._helper._pixelPerMeter/Math.cos(p),U=E<0?T:l,Q=Math.PI/2+this.pitchInRadians,Z=a.ae(this.fov)*(Math.abs(Math.cos(a.ae(this.roll)))*this.height+Math.abs(Math.sin(a.ae(this.roll)))*this.width)/this.height*(.5+C.y/this.height),ae=Math.sin(Z)*U/Math.sin(a.ah(Math.PI-Q-Z,.01,Math.PI-.01)),ce=Ve(this),Ce=Math.atan(ce/this._helper.cameraToCenterDistance),fe=a.ae(.75),Re=Ce>fe?2*Ce*(.5+C.y/(2*ce)):fe,Ge=Math.sin(Re)*U/Math.sin(a.ah(Math.PI-Q-Re,.01,Math.PI-.01)),Ze=Math.min(ae,Ge);this._helper._farZ=1.01*(Math.cos(Math.PI/2-p)*Ze+U),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const l=this.centerOffset,p=ye(this.worldSize,this.center),C=p.x,E=p.y;this._helper._pixelPerMeter=a.aj(1,this.center.lat)*this.worldSize;const T=a.ae(Math.min(this.pitch,ue)),U=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(T));let Q;this._calculateNearFarZIfNeeded(U,T,l),Q=new Float64Array(16),a.b4(Q,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.aq(this._invProjMatrix,Q),Q[8]=2*-l.x/this._helper._width,Q[9]=2*l.y/this._helper._height,this._projectionMatrix=a.b5(Q),a.N(Q,Q,[1,-1,1]),a.M(Q,Q,[0,0,-this._helper.cameraToCenterDistance]),a.b6(Q,Q,-this.rollInRadians),a.b7(Q,Q,this.pitchInRadians),a.b6(Q,Q,-this.bearingInRadians),a.M(Q,Q,[-C,-E,0]),this._mercatorMatrix=a.N([],Q,[this.worldSize,this.worldSize,this.worldSize]),a.N(Q,Q,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,Q),a.M(Q,Q,[0,0,-this.elevation]),this._viewProjMatrix=Q,this._invViewProjMatrix=a.aq([],Q);const Z=[0,0,-1,1];a.aw(Z,Z,this._invViewProjMatrix),this._cameraPosition=[Z[0]/Z[3],Z[1]/Z[3],Z[2]/Z[3]],this._fogMatrix=new Float64Array(16),a.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,U,this._helper._farZ),this._fogMatrix[8]=2*-l.x/this.width,this._fogMatrix[9]=2*l.y/this.height,a.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.M(this._fogMatrix,this._fogMatrix,[-C,-E,0]),a.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,Q);const ae=this._helper._width%2/2,ce=this._helper._height%2/2,Ce=Math.cos(this.bearingInRadians),fe=Math.sin(-this.bearingInRadians),Re=C-Math.round(C)+Ce*ae+fe*ce,Ge=E-Math.round(E)+Ce*ce+fe*ae,Ze=new Float64Array(Q);if(a.M(Ze,Ze,[Re>.5?Re-1:Re,Ge>.5?Ge-1:Ge,0]),this._alignedProjMatrix=Ze,Q=a.aq(new Float64Array(16),this._pixelMatrix),!Q)throw new Error("failed to invert matrix");this._pixelMatrixInverse=Q,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const l=this.screenPointToMercatorCoordinate(new a.P(0,0)),p=[l.x*this.worldSize,l.y*this.worldSize,0,1];return a.aw(p,p,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const l=a.aj(1,this.center.lat)*this.worldSize;return ge(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/l).toLngLat()}lngLatToCameraDepth(l,p){const C=a.a1.fromLngLat(l),E=[C.x*this.worldSize,C.y*this.worldSize,p,1];return a.aw(E,E,this._viewProjMatrix),E[2]/E[3]}getProjectionData(l){const{overscaledTileID:p,aligned:C,applyTerrainMatrix:E}=l,T=this._helper.getMercatorTileCoordinates(p),U=p?this.calculatePosMatrix(p,C,!0):null;let Q;return Q=p&&p.terrainRttPosMatrix32f&&E?p.terrainRttPosMatrix32f:U||a.b8(),{mainMatrix:Q,tileMercatorCoords:T,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:Q}}isLocationOccluded(l){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(l,p,C){return 1}transformLightDirection(l){return a.aT(l)}getRayDirectionFromPixel(l){throw new Error("Not implemented.")}projectTileCoordinates(l,p,C,E){const T=this.calculatePosMatrix(C);let U;E?(U=[l,p,E(l,p),1],a.aw(U,U,T)):(U=[l,p,0,1],Kl(U,U,T));const Q=U[3];return{point:new a.P(U[0]/Q,U[1]/Q),signedDistanceFromCamera:Q,isOccluded:!1}}populateCache(l){for(const p of l)this.calculatePosMatrix(p)}getMatrixForModel(l,p){const C=a.a1.fromLngLat(l,p),E=C.meterInMercatorCoordinateUnits(),T=a.b9();return a.M(T,T,[C.x,C.y,C.z]),a.b6(T,T,Math.PI),a.b7(T,T,Math.PI/2),a.N(T,T,[-E,E,E]),T}getProjectionDataForCustomLayer(l=!0){const p=new a.Z(0,0,0,0,0),C=this.getProjectionData({overscaledTileID:p,applyGlobeMatrix:l}),E=lt(p,this.worldSize);a.O(E,this._viewProjMatrix,E),C.tileMercatorCoords=[0,0,1,1];const T=[a.$,a.$,this.worldSize/this._helper.pixelsPerMeter],U=a.ba();return a.N(U,E,T),C.fallbackMatrix=U,C.mainMatrix=U,C}getFastPathSimpleProjectionMatrix(l){return this.calculatePosMatrix(l)}}function HA(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Zo(I){if(I.useSlerp)if(I.k<1){const l=a.bb(I.startEulerAngles.roll,I.startEulerAngles.pitch,I.startEulerAngles.bearing),p=a.bb(I.endEulerAngles.roll,I.endEulerAngles.pitch,I.endEulerAngles.bearing),C=new Float64Array(4);a.bc(C,l,p,I.k);const E=a.bd(C);I.tr.setRoll(E.roll),I.tr.setPitch(E.pitch),I.tr.setBearing(E.bearing)}else I.tr.setRoll(I.endEulerAngles.roll),I.tr.setPitch(I.endEulerAngles.pitch),I.tr.setBearing(I.endEulerAngles.bearing);else I.tr.setRoll(a.C.number(I.startEulerAngles.roll,I.endEulerAngles.roll,I.k)),I.tr.setPitch(a.C.number(I.startEulerAngles.pitch,I.endEulerAngles.pitch,I.k)),I.tr.setBearing(a.C.number(I.startEulerAngles.bearing,I.endEulerAngles.bearing,I.k))}function Wo(I,l,p,C,E){const T=E.padding,U=ye(E.worldSize,p.getNorthWest()),Q=ye(E.worldSize,p.getNorthEast()),Z=ye(E.worldSize,p.getSouthEast()),ae=ye(E.worldSize,p.getSouthWest()),ce=a.ae(-C),Ce=U.rotate(ce),fe=Q.rotate(ce),Re=Z.rotate(ce),Ge=ae.rotate(ce),Ze=new a.P(Math.max(Ce.x,fe.x,Ge.x,Re.x),Math.max(Ce.y,fe.y,Ge.y,Re.y)),Xe=new a.P(Math.min(Ce.x,fe.x,Ge.x,Re.x),Math.min(Ce.y,fe.y,Ge.y,Re.y)),tt=Ze.sub(Xe),ot=(E.width-(T.left+T.right+l.left+l.right))/tt.x,nt=(E.height-(T.top+T.bottom+l.top+l.bottom))/tt.y;if(nt<0||ot<0)return void HA();const ct=Math.min(a.ak(E.scale*Math.min(ot,nt)),I.maxZoom),gt=a.P.convert(I.offset),xt=new a.P((l.left-l.right)/2,(l.top-l.bottom)/2).rotate(a.ae(C)),ht=gt.add(xt).mult(E.scale/a.af(ct));return{center:Ue(E.worldSize,U.add(Z).div(2).sub(ht)),zoom:ct,bearing:C}}class Ms{get useGlobeControls(){return!1}handlePanInertia(l,p){const C=l.mag(),E=Math.abs(Ve(p));return{easingOffset:l.mult(Math.min(.75*E/C,1)),easingCenter:p.center}}handleMapControlsRollPitchBearingZoom(l,p){l.bearingDelta&&p.setBearing(p.bearing+l.bearingDelta),l.pitchDelta&&p.setPitch(p.pitch+l.pitchDelta),l.rollDelta&&p.setRoll(p.roll+l.rollDelta),l.zoomDelta&&p.setZoom(p.zoom+l.zoomDelta)}handleMapControlsPan(l,p,C){l.around.distSqr(p.centerPoint)<.01||p.setLocationAtPoint(C,l.around)}cameraForBoxAndBearing(l,p,C,E,T){return Wo(l,p,C,E,T)}handleJumpToCenterZoom(l,p){l.zoom!==(p.zoom!==void 0?+p.zoom:l.zoom)&&l.setZoom(+p.zoom),p.center!==void 0&&l.setCenter(a.S.convert(p.center))}handleEaseTo(l,p){const C=l.zoom,E=l.padding,T={roll:l.roll,pitch:l.pitch,bearing:l.bearing},U={roll:p.roll===void 0?l.roll:p.roll,pitch:p.pitch===void 0?l.pitch:p.pitch,bearing:p.bearing===void 0?l.bearing:p.bearing},Q=p.zoom!==void 0,Z=!l.isPaddingEqual(p.padding);let ae=!1;const ce=Q?+p.zoom:l.zoom;let Ce=l.centerPoint.add(p.offsetAsPoint);const fe=l.screenPointToLocation(Ce),{center:Re,zoom:Ge}=l.getConstrained(a.S.convert(p.center||fe),ce??C);Va(l,Re);const Ze=ye(l.worldSize,fe),Xe=ye(l.worldSize,Re).sub(Ze),tt=a.af(Ge-C);return ae=Ge!==C,{easeFunc:ot=>{if(ae&&l.setZoom(a.C.number(C,Ge,ot)),a.be(T,U)||Zo({startEulerAngles:T,endEulerAngles:U,tr:l,k:ot,useSlerp:T.roll!=U.roll}),Z&&(l.interpolatePadding(E,p.padding,ot),Ce=l.centerPoint.add(p.offsetAsPoint)),p.around)l.setLocationAtPoint(p.around,p.aroundPoint);else{const nt=a.af(l.zoom-C),ct=Ge>C?Math.min(2,tt):Math.max(.5,tt),gt=Math.pow(ct,1-ot),xt=Ue(l.worldSize,Ze.add(Xe.mult(ot*gt)).mult(nt));l.setLocationAtPoint(l.renderWorldCopies?xt.wrap():xt,Ce)}},isZooming:ae,elevationCenter:Re}}handleFlyTo(l,p){const C=p.zoom!==void 0,E=l.zoom,T=l.getConstrained(a.S.convert(p.center||p.locationAtOffset),C?+p.zoom:E),U=T.center,Q=T.zoom;Va(l,U);const Z=ye(l.worldSize,p.locationAtOffset),ae=ye(l.worldSize,U).sub(Z),ce=ae.mag(),Ce=a.af(Q-E);let fe;if(p.minZoom!==void 0){const Re=Math.min(+p.minZoom,E,Q),Ge=l.getConstrained(U,Re).zoom;fe=a.af(Ge-E)}return{easeFunc:(Re,Ge,Ze,Xe)=>{l.setZoom(Re===1?Q:E+a.ak(Ge));const tt=Re===1?U:Ue(l.worldSize,Z.add(ae.mult(Ze)).mult(Ge));l.setLocationAtPoint(l.renderWorldCopies?tt.wrap():tt,Xe)},scaleOfZoom:Ce,targetCenter:U,scaleOfMinZoom:fe,pixelPathLength:ce}}}class lr{constructor(l,p,C){this.blendFunction=l,this.blendColor=p,this.mask=C}}lr.Replace=[1,0],lr.disabled=new lr(lr.Replace,a.bf.transparent,[!1,!1,!1,!1]),lr.unblended=new lr(lr.Replace,a.bf.transparent,[!0,!0,!0,!0]),lr.alphaBlended=new lr([1,771],a.bf.transparent,[!0,!0,!0,!0]);const aa=2305;class wi{constructor(l,p,C){this.enable=l,this.mode=p,this.frontFace=C}}wi.disabled=new wi(!1,1029,aa),wi.backCCW=new wi(!0,1029,aa),wi.frontCCW=new wi(!0,1028,aa);class Jn{constructor(l,p,C){this.func=l,this.mask=p,this.range=C}}Jn.ReadOnly=!1,Jn.ReadWrite=!0,Jn.disabled=new Jn(519,Jn.ReadOnly,[0,1]);const Ur=7680;class X{constructor(l,p,C,E,T,U){this.test=l,this.ref=p,this.mask=C,this.fail=E,this.depthFail=T,this.pass=U}}X.disabled=new X({func:519,mask:0},0,0,Ur,Ur,Ur);const ve=new WeakMap;function $e(I){var l;if(ve.has(I))return ve.get(I);{const p=(l=I.getParameter(I.VERSION))===null||l===void 0?void 0:l.startsWith("WebGL 2.0");return ve.set(I,p),p}}class wt{get awaitingQuery(){return!!this._readbackQueue}constructor(l){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=l;const p=l.context,C=p.gl;this._texFormat=C.RGBA,this._texType=C.UNSIGNED_BYTE;const E=new a.aL;E.emplaceBack(-1,-1),E.emplaceBack(2,-1),E.emplaceBack(-1,2);const T=new a.aN;T.emplaceBack(0,1,2),this._fullscreenTriangle=new ou(p.createVertexBuffer(E,Vo.members),p.createIndexBuffer(T),a.aM.simpleSegment(0,0,E.length,T.length)),this._resultBuffer=new Uint8Array(4),p.activeTexture.set(C.TEXTURE1);const U=C.createTexture();C.bindTexture(C.TEXTURE_2D,U),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.NEAREST),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.NEAREST),C.texImage2D(C.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=p.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(U),$e(C)&&(this._pbo=C.createBuffer(),C.bindBuffer(C.PIXEL_PACK_BUFFER,this._pbo),C.bufferData(C.PIXEL_PACK_BUFFER,4,C.STREAM_READ),C.bindBuffer(C.PIXEL_PACK_BUFFER,null))}destroy(){const l=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),l.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(l,p){const C=this._updateCount;return this._readbackQueue?C>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():C>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(l,p),this._updateCount++,this._measuredError}_bindFramebuffer(){const l=this._cachedRenderContext.context,p=l.gl;l.activeTexture.set(p.TEXTURE1),p.bindTexture(p.TEXTURE_2D,this._fbo.colorAttachment.get()),l.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(l,p){const C=this._cachedRenderContext.context,E=C.gl;if(this._bindFramebuffer(),C.viewport.set([0,0,this._texWidth,this._texHeight]),C.clear({color:a.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(C,E.TRIANGLES,Jn.disabled,X.disabled,lr.unblended,wi.disabled,((T,U)=>({u_input:T,u_output_expected:U}))(l,p),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&$e(E)){E.bindBuffer(E.PIXEL_PACK_BUFFER,this._pbo),E.readBuffer(E.COLOR_ATTACHMENT0),E.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),E.bindBuffer(E.PIXEL_PACK_BUFFER,null);const T=E.fenceSync(E.SYNC_GPU_COMMANDS_COMPLETE,0);E.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:T}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const l=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&$e(l)){const p=l.clientWaitSync(this._readbackQueue.sync,0,0);if(p===l.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(p===l.TIMEOUT_EXPIRED)return;l.bindBuffer(l.PIXEL_PACK_BUFFER,this._pbo),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),l.bindBuffer(l.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),l.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=wt._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(l){let p=0;return p+=l[0]/256,p+=l[1]/65536,p+=l[2]/16777216,l[3]<127&&(p=-p),p/128}}const ei=a.$/128;function Bn(I,l){const p=I.granularity!==void 0?Math.max(I.granularity,1):1,C=p+(I.generateBorders?2:0),E=p+(I.extendToNorthPole||I.generateBorders?1:0)+(I.extendToSouthPole||I.generateBorders?1:0),T=C+1,U=E+1,Q=I.generateBorders?-1:0,Z=I.generateBorders||I.extendToNorthPole?-1:0,ae=p+(I.generateBorders?1:0),ce=p+(I.generateBorders||I.extendToSouthPole?1:0),Ce=T*U,fe=C*E*6,Re=T*U>65536;if(Re&&l==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Ge=Re||l==="32bit",Ze=new Int16Array(2*Ce);let Xe=0;for(let nt=Z;nt<=ce;nt++)for(let ct=Q;ct<=ae;ct++){let gt=ct/p*a.$;ct===-1&&(gt=-ei),ct===p+1&&(gt=a.$+ei);let xt=nt/p*a.$;nt===-1&&(xt=I.extendToNorthPole?a.bh:-ei),nt===p+1&&(xt=I.extendToSouthPole?a.bi:a.$+ei),Ze[Xe++]=gt,Ze[Xe++]=xt}const tt=Ge?new Uint32Array(fe):new Uint16Array(fe);let ot=0;for(let nt=0;nt<E;nt++)for(let ct=0;ct<C;ct++){const gt=ct+1+nt*T,xt=ct+(nt+1)*T,ht=ct+1+(nt+1)*T;tt[ot++]=ct+nt*T,tt[ot++]=xt,tt[ot++]=gt,tt[ot++]=gt,tt[ot++]=xt,tt[ot++]=ht}return{vertices:Ze.buffer.slice(0),indices:tt.buffer.slice(0),uses32bitIndices:Ge}}const _i=new a.aK({fill:new a.bj(128,2),line:new a.bj(512,0),tile:new a.bj(128,32),stencil:new a.bj(128,1),circle:3});class zi{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return qr.projectionGlobe}get vertexShaderPreludeCode(){return qr.projectionMercator.vertexSource}get subdivisionGranularity(){return _i}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(l){this._errorMeasurement||(this._errorMeasurement=new wt(l));const p=a.U(this._errorQueryLatitudeDegrees),C=2*Math.atan(Math.exp(Math.PI-p*Math.PI*2))-.5*Math.PI,E=this._errorMeasurement.updateErrorLoop(p,C),T=M.now();E!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=E,this._errorMeasurementLastChangeTime=T);const U=Math.min(Math.max((T-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bl(U))}_getMeshKey(l){return`${l.granularity.toString(36)}_${l.generateBorders?"b":""}${l.extendToNorthPole?"n":""}${l.extendToSouthPole?"s":""}`}getMeshFromTileID(l,p,C,E,T){const U=(T==="stencil"?_i.stencil:_i.tile).getGranularityForZoomLevel(p.z);return this._getMesh(l,{granularity:U,generateBorders:C,extendToNorthPole:p.y===0&&E,extendToSouthPole:p.y===(1<<p.z)-1&&E})}_getMesh(l,p){const C=this._getMeshKey(p);if(C in this._tileMeshCache)return this._tileMeshCache[C];const E=(function(T,U){const Q=Bn(U,"16bit"),Z=a.aL.deserialize({arrayBuffer:Q.vertices,length:Q.vertices.byteLength/2/2}),ae=a.aN.deserialize({arrayBuffer:Q.indices,length:Q.indices.byteLength/2/3});return new ou(T.createVertexBuffer(Z,Vo.members),T.createIndexBuffer(ae),a.aM.simpleSegment(0,0,Z.length,ae.length))})(l,p);return this._tileMeshCache[C]=E,E}recalculate(l){}hasTransition(){const l=M.now();let p=!1;return p=p||(l-this._errorMeasurementLastChangeTime)/1e3<.7,p=p||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,p}setErrorQueryLatitudeDegrees(l){this._errorQueryLatitudeDegrees=l}}const Ri=new a.r({type:new a.D(a.v.projection.type)});class Ii extends a.E{constructor(l){super(),this._transitionable=new a.t(Ri,void 0),this.setProjection(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0)),this._mercatorProjection=new sr,this._verticalPerspectiveProjection=new zi}get transitionState(){const l=this.properties.get("type");if(typeof l=="string"&&l==="mercator")return 0;if(typeof l=="string"&&l==="vertical-perspective")return 1;if(l instanceof a.bm){if(l.from==="vertical-perspective"&&l.to==="mercator")return 1-l.transition;if(l.from==="mercator"&&l.to==="vertical-perspective")return l.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(l){this._mercatorProjection.updateGPUdependent(l),this._verticalPerspectiveProjection.updateGPUdependent(l)}getMeshFromTileID(l,p,C,E,T){return this.currentProjection.getMeshFromTileID(l,p,C,E,T)}setProjection(l){this._transitionable.setValue("type",l?.type||"mercator")}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}setErrorQueryLatitudeDegrees(l){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(l),this._mercatorProjection.setErrorQueryLatitudeDegrees(l)}}function mr(I){const l=ur(I.worldSize,I.center.lat);return 2*Math.PI*l}function Tr(I,l,p,C,E){const T=1/(1<<E),U=l/a.$*T+C*T,Q=a.bo((I/a.$*T+p*T)*Math.PI*2+Math.PI,2*Math.PI),Z=2*Math.atan(Math.exp(Math.PI-U*Math.PI*2))-.5*Math.PI,ae=Math.cos(Z),ce=new Float64Array(3);return ce[0]=Math.sin(Q)*ae,ce[1]=Math.sin(Z),ce[2]=Math.cos(Q)*ae,ce}function ji(I){return(function(l,p){const C=Math.cos(p),E=new Float64Array(3);return E[0]=Math.sin(l)*C,E[1]=Math.sin(p),E[2]=Math.cos(l)*C,E})(I.lng*Math.PI/180,I.lat*Math.PI/180)}function ur(I,l){return I/(2*Math.PI)/Math.cos(l*Math.PI/180)}function Hr(I){const l=Math.asin(I[1])/Math.PI*180,p=Math.sqrt(I[0]*I[0]+I[2]*I[2]);if(p>1e-6){const C=I[0]/p,E=Math.acos(I[2]/p),T=(C>0?E:-E)/Math.PI*180;return new a.S(a.aO(T,-180,180),l)}return new a.S(0,l)}function ws(I){return Math.cos(I*Math.PI/180)}function gr(I,l){const p=ws(I),C=ws(l);return a.ak(C/p)}function Ha(I,l){const p=I.rotate(l.bearingInRadians),C=l.zoom+gr(l.center.lat,0),E=a.bk(1/ws(l.center.lat),1/ws(Math.min(Math.abs(l.center.lat),60)),a.bn(C,7,3,0,1)),T=360/mr({worldSize:l.worldSize,center:{lat:l.center.lat}});return new a.S(l.center.lng-p.x*T*E,a.ah(l.center.lat+p.y*T,-a.ai,a.ai))}function vc(I){const l=.5*I,p=Math.sin(l),C=Math.cos(l);return Math.log(p+C)-Math.log(C-p)}function _u(I,l,p,C){const E=I.lat+p*C;if(Math.abs(p)>1){const T=(Math.sign(I.lat+p)!==Math.sign(I.lat)?-Math.abs(I.lat):Math.abs(I.lat))*Math.PI/180,U=Math.abs(I.lat+p)*Math.PI/180,Q=vc(T+C*(U-T)),Z=vc(T),ae=vc(U);return new a.S(I.lng+l*((Q-Z)/(ae-Z)),E)}return new a.S(I.lng+l*C,E)}class ta{constructor(l){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=l}swapBuffers(){if(!this._hadAnyChanges)return;const l=this._cachePrevious;this._cachePrevious=this._cache,this._cache=l,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(l,p,C,E){const T=`${l.z}_${l.x}_${l.y}_${E?.terrain?"t":""}`,U=this._cache.get(T);if(U)return U;const Q=this._cachePrevious.get(T);if(Q)return this._cache.set(T,Q),Q;const Z=this._boundingVolumeFactory(l,p,C,E);return this._cache.set(T,Z),this._hadAnyChanges=!0,Z}}class Sf{constructor(l,p,C,E){this.min=C,this.max=E,this.points=l,this.planes=p}static fromAabb(l,p){const C=[];for(let E=0;E<8;E++)C.push([1&~E?l[0]:p[0],(E>>1&1)==1?p[1]:l[1],(E>>2&1)==1?p[2]:l[2]]);return new Sf(C,[[-1,0,0,p[0]],[1,0,0,-l[0]],[0,-1,0,p[1]],[0,1,0,-l[1]],[0,0,-1,p[2]],[0,0,1,-l[2]]],l,p)}static fromCenterSizeAngles(l,p,C){const E=a.br([],C[0],C[1],C[2]),T=a.bs([],[p[0],0,0],E),U=a.bs([],[0,p[1],0],E),Q=a.bs([],[0,0,p[2]],E),Z=[...l],ae=[...l];for(let Ce=0;Ce<8;Ce++)for(let fe=0;fe<3;fe++){const Re=l[fe]+T[fe]*(1&~Ce?-1:1)+U[fe]*((Ce>>1&1)==1?1:-1)+Q[fe]*((Ce>>2&1)==1?1:-1);Z[fe]=Math.min(Z[fe],Re),ae[fe]=Math.max(ae[fe],Re)}const ce=[];for(let Ce=0;Ce<8;Ce++){const fe=[...l];a.aS(fe,fe,a.aR([],T,1&~Ce?-1:1)),a.aS(fe,fe,a.aR([],U,(Ce>>1&1)==1?1:-1)),a.aS(fe,fe,a.aR([],Q,(Ce>>2&1)==1?1:-1)),ce.push(fe)}return new Sf(ce,[[...T,-a.aX(T,ce[0])],[...U,-a.aX(U,ce[0])],[...Q,-a.aX(Q,ce[0])],[-T[0],-T[1],-T[2],-a.aX(T,ce[7])],[-U[0],-U[1],-U[2],-a.aX(U,ce[7])],[-Q[0],-Q[1],-Q[2],-a.aX(Q,ce[7])]],Z,ae)}intersectsFrustum(l){let p=!0;const C=this.points.length,E=this.planes.length,T=l.planes.length,U=l.points.length;for(let Q=0;Q<T;Q++){const Z=l.planes[Q];let ae=0;for(let ce=0;ce<C;ce++){const Ce=this.points[ce];Z[0]*Ce[0]+Z[1]*Ce[1]+Z[2]*Ce[2]+Z[3]>=0&&ae++}if(ae===0)return 0;ae<C&&(p=!1)}if(p)return 2;for(let Q=0;Q<E;Q++){const Z=this.planes[Q];let ae=0;for(let ce=0;ce<U;ce++){const Ce=l.points[ce];Z[0]*Ce[0]+Z[1]*Ce[1]+Z[2]*Ce[2]+Z[3]>=0&&ae++}if(ae===0)return 0}return 1}intersectsPlane(l){const p=this.points.length;let C=0;for(let E=0;E<p;E++){const T=this.points[E];l[0]*T[0]+l[1]*T[1]+l[2]*T[2]+l[3]>=0&&C++}return C===p?2:C===0?0:1}}function Xo(I,l,p){const C=I-l;return C<0?-C:Math.max(0,C-p)}function yp(I,l,p,C,E){const T=I-p;let U;return U=T<0?Math.min(-T,1+T-E):T>1?Math.min(Math.max(T-E,0),1-T):0,Math.max(U,Xo(l,C,E))}class Zc{constructor(){this._boundingVolumeCache=new ta(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(l,p,C,E){const T=1<<C.z,U=1/T,Q=C.x/T,Z=C.y/T;let ae=2;return ae=Math.min(ae,yp(l,p,Q,Z,U)),ae=Math.min(ae,yp(l,p,Q+.5,-Z-U,U)),ae=Math.min(ae,yp(l,p,Q+.5,2-Z-U,U)),ae}getWrap(l,p,C){const E=1<<p.z,T=1/E,U=p.x/E,Q=Xo(l.x,U,T),Z=Xo(l.x,U-1,T),ae=Xo(l.x,U+1,T),ce=Math.min(Q,Z,ae);return ce===ae?1:ce===Z?-1:0}allowVariableZoom(l,p){return Pt(l,p)>4}allowWorldCopies(){return!1}getTileBoundingVolume(l,p,C,E){return this._boundingVolumeCache.getTileBoundingVolume(l,p,C,E)}_computeTileBoundingVolume(l,p,C,E){var T,U;let Q=0,Z=0;if(E?.terrain){const ae=new a.Z(l.z,p,l.z,l.x,l.y),ce=E.terrain.getMinMaxElevation(ae);Q=(T=ce.minElevation)!==null&&T!==void 0?T:Math.min(0,C),Z=(U=ce.maxElevation)!==null&&U!==void 0?U:Math.max(0,C)}if(Q/=a.bu,Z/=a.bu,Q+=1,Z+=1,l.z<=0)return Sf.fromAabb([-Z,-Z,-Z],[Z,Z,Z]);if(l.z===1)return Sf.fromAabb([l.x===0?-Z:0,l.y===0?0:-Z,-Z],[l.x===0?0:Z,l.y===0?Z:0,Z]);{const ae=[Tr(0,0,l.x,l.y,l.z),Tr(a.$,0,l.x,l.y,l.z),Tr(a.$,a.$,l.x,l.y,l.z),Tr(0,a.$,l.x,l.y,l.z)],ce=[];for(const Nt of ae)ce.push(a.aR([],Nt,Z));if(Z!==Q)for(const Nt of ae)ce.push(a.aR([],Nt,Q));l.y===0&&ce.push([0,1,0]),l.y===(1<<l.z)-1&&ce.push([0,-1,0]);const Ce=[1,1,1],fe=[-1,-1,-1];for(const Nt of ce)for(let Wt=0;Wt<3;Wt++)Ce[Wt]=Math.min(Ce[Wt],Nt[Wt]),fe[Wt]=Math.max(fe[Wt],Nt[Wt]);const Re=Tr(a.$/2,a.$/2,l.x,l.y,l.z),Ge=a.aW([],[0,1,0],Re);a.aV(Ge,Ge);const Ze=a.aW([],Re,Ge);a.aV(Ze,Ze);const Xe=a.aW([],ae[2],ae[1]);a.aV(Xe,Xe);const tt=a.aW([],ae[0],ae[3]);a.aV(tt,tt),ce.push(a.aR([],Re,Z)),l.y>=(1<<l.z)/2&&ce.push(a.aR([],Tr(a.$/2,0,l.x,l.y,l.z),Z)),l.y<(1<<l.z)/2&&ce.push(a.aR([],Tr(a.$/2,a.$,l.x,l.y,l.z),Z));const ot=bc(Re,ce),nt=bc(Ze,ce),ct=[-Re[0],-Re[1],-Re[2],ot.max],gt=[Re[0],Re[1],Re[2],-ot.min],xt=[-Ze[0],-Ze[1],-Ze[2],nt.max],ht=[Ze[0],Ze[1],Ze[2],-nt.min],Et=[...Xe,0],Qt=[...tt,0],Kt=[];return l.y===0?Kt.push(a.bt(Qt,Et,ct),a.bt(Qt,Et,gt)):Kt.push(a.bt(xt,Et,ct),a.bt(xt,Et,gt),a.bt(xt,Qt,ct),a.bt(xt,Qt,gt)),l.y===(1<<l.z)-1?Kt.push(a.bt(Qt,Et,ct),a.bt(Qt,Et,gt)):Kt.push(a.bt(ht,Et,ct),a.bt(ht,Et,gt),a.bt(ht,Qt,ct),a.bt(ht,Qt,gt)),new Sf(Kt,[ct,gt,xt,ht,Et,Qt],Ce,fe)}}}function bc(I,l){let p=1/0,C=-1/0;for(const E of l){const T=a.aX(I,E);p=Math.min(p,T),C=Math.max(C,T)}return{min:p,max:C}}class Kh{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,p,C){return this._helper.interpolatePadding(l,p,C)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,p){this._helper.resize(l,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,p){this._helper.overrideNearFarZ(l,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l){}constructor(){this._cachedClippingPlane=a.bv(),this._projectionMatrix=a.b9(),this._globeViewProjMatrix32f=a.b8(),this._globeViewProjMatrixNoCorrection=a.b9(),this._globeViewProjMatrixNoCorrectionInverted=a.b9(),this._globeProjMatrixInverted=a.b9(),this._cameraPosition=a.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Ps({calcMatrices:()=>{this._calcMatrices()},getConstrained:(l,p)=>this.getConstrained(l,p)}),this._coveringTilesDetailsProvider=new Zc}clone(){const l=new Kh;return l.apply(this),l}apply(l,p){this._globeLatitudeErrorCorrectionRadians=p||0,this._helper.apply(l)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const l=a.bp();return l[0]=this._cameraPosition[0],l[1]=this._cameraPosition[1],l[2]=this._cameraPosition[2],l}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(l){const{overscaledTileID:p,applyGlobeMatrix:C}=l,E=this._helper.getMercatorTileCoordinates(p);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:E,clippingPlane:this._cachedClippingPlane,projectionTransition:C?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(l){const p=this.pitchInRadians,C=this.cameraToCenterDistance/l,E=Math.sin(p)*C,T=Math.cos(p)*C+1,U=1/Math.sqrt(E*E+T*T)*1;let Q=-E,Z=T;const ae=Math.sqrt(Q*Q+Z*Z);Q/=ae,Z/=ae;const ce=[0,Q,Z];a.bw(ce,ce,[0,0,0],-this.bearingInRadians),a.bx(ce,ce,[0,0,0],-1*this.center.lat*Math.PI/180),a.by(ce,ce,[0,0,0],this.center.lng*Math.PI/180);const Ce=1/a.aZ(ce);return a.aR(ce,ce,Ce),[...ce,-U*Ce]}isLocationOccluded(l){return!this.isSurfacePointVisible(ji(l))}transformLightDirection(l){const p=this._helper._center.lng*Math.PI/180,C=this._helper._center.lat*Math.PI/180,E=Math.cos(C),T=[Math.sin(p)*E,Math.sin(C),Math.cos(p)*E],U=[T[2],0,-T[0]],Q=[0,0,0];a.aW(Q,U,T),a.aV(U,U),a.aV(Q,Q);const Z=[0,0,0];return a.aV(Z,[U[0]*l[0]+Q[0]*l[1]+T[0]*l[2],U[1]*l[0]+Q[1]*l[1]+T[1]*l[2],U[2]*l[0]+Q[2]*l[1]+T[2]*l[2]]),Z}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(l,p,C){const E=(function(Q,Z,ae){const ce=1/(1<<ae.z);return new a.a1(Q/a.$*ce+ae.x*ce,Z/a.$*ce+ae.y*ce)})(l,p,C.canonical),T=(U=E.y,[a.bo(E.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-U*Math.PI*2))-.5*Math.PI]);var U;return this.getCircleRadiusCorrection()/Math.cos(T[1])}projectTileCoordinates(l,p,C,E){const T=C.canonical,U=Tr(l,p,T.x,T.y,T.z),Q=1+(E?E(l,p):0)/a.bu,Z=[U[0]*Q,U[1]*Q,U[2]*Q,1];a.aw(Z,Z,this._globeViewProjMatrixNoCorrection);const ae=this._cachedClippingPlane,ce=ae[0]*U[0]+ae[1]*U[1]+ae[2]*U[2]+ae[3]<0;return{point:new a.P(Z[0]/Z[3],Z[1]/Z[3]),signedDistanceFromCamera:Z[3],isOccluded:ce}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const l=ur(this.worldSize,this.center.lat),p=a.ba(),C=a.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*l),a.b4(p,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const E=this.centerOffset;p[8]=2*-E.x/this._helper._width,p[9]=2*E.y/this._helper._height,this._projectionMatrix=a.b5(p),this._globeProjMatrixInverted=a.ba(),a.aq(this._globeProjMatrixInverted,p),a.M(p,p,[0,0,-this.cameraToCenterDistance]),a.b6(p,p,this.rollInRadians),a.b7(p,p,-this.pitchInRadians),a.b6(p,p,this.bearingInRadians),a.M(p,p,[0,0,-l]);const T=a.bp();T[0]=l,T[1]=l,T[2]=l,a.b7(C,p,this.center.lat*Math.PI/180),a.bz(C,C,-this.center.lng*Math.PI/180),a.N(C,C,T),this._globeViewProjMatrixNoCorrection=C,a.b7(p,p,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bz(p,p,-this.center.lng*Math.PI/180),a.N(p,p,T),this._globeViewProjMatrix32f=new Float32Array(p),this._globeViewProjMatrixNoCorrectionInverted=a.ba(),a.aq(this._globeViewProjMatrixNoCorrectionInverted,C);const U=a.bp();this._cameraPosition=a.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/l,a.bw(this._cameraPosition,this._cameraPosition,U,-this.rollInRadians),a.bx(this._cameraPosition,this._cameraPosition,U,this.pitchInRadians),a.bw(this._cameraPosition,this._cameraPosition,U,-this.bearingInRadians),a.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bx(this._cameraPosition,this._cameraPosition,U,-this.center.lat*Math.PI/180),a.by(this._cameraPosition,this._cameraPosition,U,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(l);const Q=a.b5(this._globeViewProjMatrixNoCorrectionInverted);a.N(Q,Q,[1,1,-1]),this._cachedFrustum=Ho.fromInvProjectionMatrix(Q,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(l){a.w("calculateFogMatrix is not supported on globe projection.");const p=a.ba();return a.ag(p),p}getVisibleUnwrappedCoordinates(l){return[new a.b2(0,l)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){l&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,p){if(!this._globeViewProjMatrixNoCorrection)return 1;const C=ji(l);a.aR(C,C,1+p/a.bu);const E=a.bv();return a.aw(E,[C[0],C[1],C[2],1],this._globeViewProjMatrixNoCorrection),E[2]/E[3]}populateCache(l){}getBounds(){const l=.5*this.width,p=.5*this.height,C=[new a.P(0,0),new a.P(l,0),new a.P(this.width,0),new a.P(this.width,p),new a.P(this.width,this.height),new a.P(l,this.height),new a.P(0,this.height),new a.P(0,p)],E=[];for(const Ce of C)E.push(this.unprojectScreenPoint(Ce));let T=0,U=0,Q=0,Z=0;const ae=this.center;for(const Ce of E){const fe=a.bA(ae.lng,Ce.lng),Re=a.bA(ae.lat,Ce.lat);fe<U&&(U=fe),fe>T&&(T=fe),Re<Z&&(Z=Re),Re>Q&&(Q=Re)}const ce=[ae.lng+U,ae.lat+Z,ae.lng+T,ae.lat+Q];return this.isSurfacePointOnScreen([0,1,0])&&(ce[3]=90,ce[0]=-180,ce[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(ce[1]=-90,ce[0]=-180,ce[2]=180),new rt(ce)}getConstrained(l,p){const C=a.ah(l.lat,-a.ai,a.ai),E=a.ah(+p,this.minZoom+gr(0,C),this.maxZoom);return{center:new a.S(l.lng,C),zoom:E}}calculateCenterFromCameraLngLatAlt(l,p,C,E){return this._helper.calculateCenterFromCameraLngLatAlt(l,p,C,E)}setLocationAtPoint(l,p){const C=ji(this.unprojectScreenPoint(p)),E=ji(l),T=a.bp();a.bB(T);const U=a.bp();a.by(U,C,T,-this.center.lng*Math.PI/180),a.bx(U,U,T,this.center.lat*Math.PI/180);const Q=E[0]*E[0]+E[2]*E[2],Z=U[0]*U[0];if(Q<Z)return;const ae=Math.sqrt(Q-Z),ce=-ae,Ce=a.bC(E[0],E[2],U[0],ae),fe=a.bC(E[0],E[2],U[0],ce),Re=a.bp();a.by(Re,E,T,-Ce);const Ge=a.bC(Re[1],Re[2],U[1],U[2]),Ze=a.bp();a.by(Ze,E,T,-fe);const Xe=a.bC(Ze[1],Ze[2],U[1],U[2]),tt=.5*Math.PI,ot=Ge>=-tt&&Ge<=tt,nt=Xe>=-tt&&Xe<=tt;let ct,gt;if(ot&&nt){const Qt=this.center.lng*Math.PI/180,Kt=this.center.lat*Math.PI/180;a.bD(Ce,Qt)+a.bD(Ge,Kt)<a.bD(fe,Qt)+a.bD(Xe,Kt)?(ct=Ce,gt=Ge):(ct=fe,gt=Xe)}else if(ot)ct=Ce,gt=Ge;else{if(!nt)return;ct=fe,gt=Xe}const xt=ct/Math.PI*180,ht=gt/Math.PI*180,Et=this.center.lat;this.setCenter(new a.S(xt,a.ah(ht,-90,90))),this.setZoom(this.zoom+gr(Et,this.center.lat))}locationToScreenPoint(l,p){const C=ji(l);if(p){const E=p.getElevationForLngLatZoom(l,this._helper._tileZoom);a.aR(C,C,1+E/a.bu)}return this._projectSurfacePointToScreen(C)}_projectSurfacePointToScreen(l){const p=a.bv();return a.aw(p,[...l,1],this._globeViewProjMatrixNoCorrection),p[0]/=p[3],p[1]/=p[3],new a.P((.5*p[0]+.5)*this.width,(.5*-p[1]+.5)*this.height)}screenPointToMercatorCoordinate(l,p){if(p){const C=p.pointCoordinate(l);if(C)return C}return a.a1.fromLngLat(this.unprojectScreenPoint(l))}screenPointToLocation(l,p){var C;return(C=this.screenPointToMercatorCoordinate(l,p))===null||C===void 0?void 0:C.toLngLat()}isPointOnMapSurface(l,p){const C=this._cameraPosition,E=this.getRayDirectionFromPixel(l);return!!this.rayPlanetIntersection(C,E)}getRayDirectionFromPixel(l){const p=a.bv();p[0]=l.x/this.width*2-1,p[1]=-1*(l.y/this.height*2-1),p[2]=1,p[3]=1,a.aw(p,p,this._globeViewProjMatrixNoCorrectionInverted),p[0]/=p[3],p[1]/=p[3],p[2]/=p[3];const C=a.bp();C[0]=p[0]-this._cameraPosition[0],C[1]=p[1]-this._cameraPosition[1],C[2]=p[2]-this._cameraPosition[2];const E=a.bp();return a.aV(E,C),E}isSurfacePointVisible(l){const p=this._cachedClippingPlane;return p[0]*l[0]+p[1]*l[1]+p[2]*l[2]+p[3]>=0}isSurfacePointOnScreen(l){if(!this.isSurfacePointVisible(l))return!1;const p=a.bv();return a.aw(p,[...l,1],this._globeViewProjMatrixNoCorrection),p[0]/=p[3],p[1]/=p[3],p[2]/=p[3],p[0]>-1&&p[0]<1&&p[1]>-1&&p[1]<1&&p[2]>-1&&p[2]<1}rayPlanetIntersection(l,p){const C=a.aX(l,p),E=a.bp(),T=a.bp();a.aR(T,p,C),a.aU(E,l,T);const U=1-a.aX(E,E);if(U<0)return null;const Q=a.aX(l,l)-1,Z=-C+(C<0?1:-1)*Math.sqrt(U),ae=Q/Z,ce=Z;return{tMin:Math.min(ae,ce),tMax:Math.max(ae,ce)}}unprojectScreenPoint(l){const p=this._cameraPosition,C=this.getRayDirectionFromPixel(l),E=this.rayPlanetIntersection(p,C);if(E){const ce=a.bp();a.aS(ce,p,[C[0]*E.tMin,C[1]*E.tMin,C[2]*E.tMin]);const Ce=a.bp();return a.aV(Ce,ce),Hr(Ce)}const T=this._cachedClippingPlane,U=T[0]*C[0]+T[1]*C[1]+T[2]*C[2],Q=-a.b1(T,p)/U,Z=a.bp();if(Q>0)a.aS(Z,p,[C[0]*Q,C[1]*Q,C[2]*Q]);else{const ce=a.bp();a.aS(ce,p,[2*C[0],2*C[1],2*C[2]]);const Ce=a.b1(this._cachedClippingPlane,ce);a.aU(Z,ce,[this._cachedClippingPlane[0]*Ce,this._cachedClippingPlane[1]*Ce,this._cachedClippingPlane[2]*Ce])}const ae=(function(ce){const Ce=a.bp();return Ce[0]=ce[0]*-ce[3],Ce[1]=ce[1]*-ce[3],Ce[2]=ce[2]*-ce[3],{center:Ce,radius:Math.sqrt(1-ce[3]*ce[3])}})(T);return Hr((function(ce,Ce,fe){const Re=a.bp();a.aU(Re,fe,ce);const Ge=a.bp();return a.bq(Ge,ce,Re,Ce/a.a$(Re)),Ge})(ae.center,ae.radius,Z))}getMatrixForModel(l,p){const C=a.S.convert(l),E=1/a.bu,T=a.b9();return a.bz(T,T,C.lng/180*Math.PI),a.b7(T,T,-C.lat/180*Math.PI),a.M(T,T,[0,0,1+p/a.bu]),a.b7(T,T,.5*Math.PI),a.N(T,T,[E,E,E]),T}getProjectionDataForCustomLayer(l=!0){const p=this.getProjectionData({overscaledTileID:new a.Z(0,0,0,0,0),applyGlobeMatrix:l});return p.tileMercatorCoords=[0,0,1,1],p}getFastPathSimpleProjectionMatrix(l){}}class ZA{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,p,C){return this._helper.interpolatePadding(l,p,C)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,p,C=!0){this._helper.resize(l,p,C)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,p){this._helper.overrideNearFarZ(l,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(l,p){this._globeness=l,this._globeLatitudeErrorCorrectionRadians=p,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Ps({calcMatrices:()=>{this._calcMatrices()},getConstrained:(l,p)=>this.getConstrained(l,p)}),this._globeness=1,this._mercatorTransform=new Pr,this._verticalPerspectiveTransform=new Kh}clone(){const l=new ZA;return l._globeness=this._globeness,l._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,l.apply(this),l}apply(l){this._helper.apply(l),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(l){const p=this._mercatorTransform.getProjectionData(l),C=this._verticalPerspectiveTransform.getProjectionData(l);return{mainMatrix:this.isGlobeRendering?C.mainMatrix:p.mainMatrix,clippingPlane:C.clippingPlane,tileMercatorCoords:C.tileMercatorCoords,projectionTransition:l.applyGlobeMatrix?this._globeness:0,fallbackMatrix:p.fallbackMatrix}}isLocationOccluded(l){return this.currentTransform.isLocationOccluded(l)}transformLightDirection(l){return this.currentTransform.transformLightDirection(l)}getPixelScale(){return a.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(l,p,C){const E=this._mercatorTransform.getPitchedTextCorrection(l,p,C),T=this._verticalPerspectiveTransform.getPitchedTextCorrection(l,p,C);return a.bk(E,T,this._globeness)}projectTileCoordinates(l,p,C,E){return this.currentTransform.projectTileCoordinates(l,p,C,E)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(l){return this.currentTransform.calculateFogMatrix(l)}getVisibleUnwrappedCoordinates(l){return this.currentTransform.getVisibleUnwrappedCoordinates(l)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(l){this._mercatorTransform.recalculateZoomAndCenter(l),this._verticalPerspectiveTransform.recalculateZoomAndCenter(l)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,p){return this.currentTransform.lngLatToCameraDepth(l,p)}populateCache(l){this._mercatorTransform.populateCache(l),this._verticalPerspectiveTransform.populateCache(l)}getBounds(){return this.currentTransform.getBounds()}getConstrained(l,p){return this.currentTransform.getConstrained(l,p)}calculateCenterFromCameraLngLatAlt(l,p,C,E){return this._helper.calculateCenterFromCameraLngLatAlt(l,p,C,E)}setLocationAtPoint(l,p){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(l,p),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(l,p),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(l,p){return this.currentTransform.locationToScreenPoint(l,p)}screenPointToMercatorCoordinate(l,p){return this.currentTransform.screenPointToMercatorCoordinate(l,p)}screenPointToLocation(l,p){return this.currentTransform.screenPointToLocation(l,p)}isPointOnMapSurface(l,p){return this.currentTransform.isPointOnMapSurface(l,p)}getRayDirectionFromPixel(l){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(l)}getMatrixForModel(l,p){return this.currentTransform.getMatrixForModel(l,p)}getProjectionDataForCustomLayer(l=!0){const p=this._mercatorTransform.getProjectionDataForCustomLayer(l);if(!this.isGlobeRendering)return p;const C=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(l);return C.fallbackMatrix=p.mainMatrix,C}getFastPathSimpleProjectionMatrix(l){return this.currentTransform.getFastPathSimpleProjectionMatrix(l)}}class Wr{get useGlobeControls(){return!0}handlePanInertia(l,p){const C=Ha(l,p);return Math.abs(C.lng-p.center.lng)>180&&(C.lng=p.center.lng+179.5*Math.sign(C.lng-p.center.lng)),{easingCenter:C,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(l,p){const C=l.around,E=p.screenPointToLocation(C);l.bearingDelta&&p.setBearing(p.bearing+l.bearingDelta),l.pitchDelta&&p.setPitch(p.pitch+l.pitchDelta),l.rollDelta&&p.setRoll(p.roll+l.rollDelta);const T=p.zoom;l.zoomDelta&&p.setZoom(p.zoom+l.zoomDelta);const U=p.zoom-T;if(U===0)return;const Q=a.bA(p.center.lng,E.lng),Z=Q/(Math.abs(Q/180)+1),ae=a.bA(p.center.lat,E.lat),ce=p.getRayDirectionFromPixel(C),Ce=p.cameraPosition,fe=-1*a.aX(Ce,ce),Re=a.bp();a.aS(Re,Ce,[ce[0]*fe,ce[1]*fe,ce[2]*fe]);const Ge=a.aZ(Re)-1,Ze=Math.exp(.5*-Math.max(Ge-.3,0)),Xe=ur(p.worldSize,p.center.lat)/Math.min(p.width,p.height),tt=a.bn(Xe,.9,.5,1,.25),ot=(1-a.af(-U))*Math.min(Ze,tt),nt=p.center.lat,ct=p.zoom,gt=new a.S(p.center.lng+Z*ot,a.ah(p.center.lat+ae*ot,-a.ai,a.ai));p.setLocationAtPoint(E,C);const xt=p.center,ht=a.bn(Math.abs(Q),45,85,0,1),Et=a.bn(Xe,.75,.35,0,1),Qt=Math.pow(Math.max(ht,Et),.25),Kt=a.bA(xt.lng,gt.lng),Nt=a.bA(xt.lat,gt.lat);p.setCenter(new a.S(xt.lng+Kt*Qt,xt.lat+Nt*Qt).wrap()),p.setZoom(ct+gr(nt,p.center.lat))}handleMapControlsPan(l,p,C){if(!l.panDelta)return;const E=p.center.lat,T=p.zoom;p.setCenter(Ha(l.panDelta,p).wrap()),p.setZoom(T+gr(E,p.center.lat))}cameraForBoxAndBearing(l,p,C,E,T){const U=Wo(l,p,C,E,T),Q=p.left/T.width*2-1,Z=(T.width-p.right)/T.width*2-1,ae=p.top/T.height*-2+1,ce=(T.height-p.bottom)/T.height*-2+1,Ce=a.bA(C.getWest(),C.getEast())<0,fe=Ce?C.getEast():C.getWest(),Re=Ce?C.getWest():C.getEast(),Ge=Math.max(C.getNorth(),C.getSouth()),Ze=Math.min(C.getNorth(),C.getSouth()),Xe=fe+.5*a.bA(fe,Re),tt=Ge+.5*a.bA(Ge,Ze),ot=T.clone();ot.setCenter(U.center),ot.setBearing(U.bearing),ot.setPitch(0),ot.setRoll(0),ot.setZoom(U.zoom);const nt=ot.modelViewProjectionMatrix,ct=[ji(C.getNorthWest()),ji(C.getNorthEast()),ji(C.getSouthWest()),ji(C.getSouthEast()),ji(new a.S(Re,tt)),ji(new a.S(fe,tt)),ji(new a.S(Xe,Ge)),ji(new a.S(Xe,Ze))],gt=ji(U.center);let xt=Number.POSITIVE_INFINITY;for(const ht of ct)Q<0&&(xt=Wr.getLesserNonNegativeNonNull(xt,Wr.solveVectorScale(ht,gt,nt,"x",Q))),Z>0&&(xt=Wr.getLesserNonNegativeNonNull(xt,Wr.solveVectorScale(ht,gt,nt,"x",Z))),ae>0&&(xt=Wr.getLesserNonNegativeNonNull(xt,Wr.solveVectorScale(ht,gt,nt,"y",ae))),ce<0&&(xt=Wr.getLesserNonNegativeNonNull(xt,Wr.solveVectorScale(ht,gt,nt,"y",ce)));if(Number.isFinite(xt)&&xt!==0)return U.zoom=ot.zoom+a.ak(xt),U;HA()}handleJumpToCenterZoom(l,p){const C=l.center.lat,E=l.getConstrained(p.center?a.S.convert(p.center):l.center,l.zoom).center;l.setCenter(E.wrap());const T=p.zoom!==void 0?+p.zoom:l.zoom+gr(C,E.lat);l.zoom!==T&&l.setZoom(T)}handleEaseTo(l,p){const C=l.zoom,E=l.center,T=l.padding,U={roll:l.roll,pitch:l.pitch,bearing:l.bearing},Q={roll:p.roll===void 0?l.roll:p.roll,pitch:p.pitch===void 0?l.pitch:p.pitch,bearing:p.bearing===void 0?l.bearing:p.bearing},Z=p.zoom!==void 0,ae=!l.isPaddingEqual(p.padding);let ce=!1;const Ce=p.center?a.S.convert(p.center):E,fe=l.getConstrained(Ce,C).center;Va(l,fe);const Re=l.clone();Re.setCenter(fe),Re.setZoom(Z?+p.zoom:C+gr(E.lat,Ce.lat)),Re.setBearing(p.bearing);const Ge=new a.P(a.ah(l.centerPoint.x+p.offsetAsPoint.x,0,l.width),a.ah(l.centerPoint.y+p.offsetAsPoint.y,0,l.height));Re.setLocationAtPoint(fe,Ge);const Ze=(p.offset&&p.offsetAsPoint.mag())>0?Re.center:fe,Xe=Z?+p.zoom:C+gr(E.lat,Ze.lat),tt=C+gr(E.lat,0),ot=Xe+gr(Ze.lat,0),nt=a.bA(E.lng,Ze.lng),ct=a.bA(E.lat,Ze.lat),gt=a.af(ot-tt);return ce=Xe!==C,{easeFunc:xt=>{if(a.be(U,Q)||Zo({startEulerAngles:U,endEulerAngles:Q,tr:l,k:xt,useSlerp:U.roll!=Q.roll}),ae&&l.interpolatePadding(T,p.padding,xt),p.around)a.w("Easing around a point is not supported under globe projection."),l.setLocationAtPoint(p.around,p.aroundPoint);else{const ht=ot>tt?Math.min(2,gt):Math.max(.5,gt),Et=Math.pow(ht,1-xt),Qt=_u(E,nt,ct,xt*Et);l.setCenter(Qt.wrap())}if(ce){const ht=a.C.number(tt,ot,xt)+gr(0,l.center.lat);l.setZoom(ht)}},isZooming:ce,elevationCenter:Ze}}handleFlyTo(l,p){const C=p.zoom!==void 0,E=l.center,T=l.zoom,U=l.padding,Q=!l.isPaddingEqual(p.padding),Z=l.getConstrained(a.S.convert(p.center||p.locationAtOffset),T).center,ae=C?+p.zoom:l.zoom+gr(l.center.lat,Z.lat),ce=l.clone();ce.setCenter(Z),ce.setZoom(ae),ce.setBearing(p.bearing);const Ce=new a.P(a.ah(l.centerPoint.x+p.offsetAsPoint.x,0,l.width),a.ah(l.centerPoint.y+p.offsetAsPoint.y,0,l.height));ce.setLocationAtPoint(Z,Ce);const fe=ce.center;Va(l,fe);const Re=(function(ct,gt,xt){const ht=ji(gt),Et=ji(xt),Qt=a.aX(ht,Et),Kt=Math.acos(Qt),Nt=mr(ct);return Kt/(2*Math.PI)*Nt})(l,E,fe),Ge=T+gr(E.lat,0),Ze=ae+gr(fe.lat,0),Xe=a.af(Ze-Ge);let tt;if(typeof p.minZoom=="number"){const ct=+p.minZoom+gr(fe.lat,0),gt=Math.min(ct,Ge,Ze)+gr(0,fe.lat),xt=l.getConstrained(fe,gt).zoom+gr(fe.lat,0);tt=a.af(xt-Ge)}const ot=a.bA(E.lng,fe.lng),nt=a.bA(E.lat,fe.lat);return{easeFunc:(ct,gt,xt,ht)=>{const Et=_u(E,ot,nt,xt);Q&&l.interpolatePadding(U,p.padding,ct);const Qt=ct===1?fe:Et;l.setCenter(Qt.wrap());const Kt=Ge+a.ak(gt);l.setZoom(ct===1?ae:Kt+gr(0,Qt.lat))},scaleOfZoom:Xe,targetCenter:fe,scaleOfMinZoom:tt,pixelPathLength:Re}}static solveVectorScale(l,p,C,E,T){const U=E==="x"?[C[0],C[4],C[8],C[12]]:[C[1],C[5],C[9],C[13]],Q=[C[3],C[7],C[11],C[15]],Z=l[0]*U[0]+l[1]*U[1]+l[2]*U[2],ae=l[0]*Q[0]+l[1]*Q[1]+l[2]*Q[2],ce=p[0]*U[0]+p[1]*U[1]+p[2]*U[2],Ce=p[0]*Q[0]+p[1]*Q[1]+p[2]*Q[2];return ce+T*ae===Z+T*Ce||Q[3]*(Z-ce)+U[3]*(Ce-ae)+Z*Ce==ce*ae?null:(ce+U[3]-T*Ce-T*Q[3])/(ce-Z-T*Ce+T*ae)}static getLesserNonNegativeNonNull(l,p){return p!==null&&p>=0&&p<l?p:l}}class XA{constructor(l){this._globe=l,this._mercatorCameraHelper=new Ms,this._verticalPerspectiveCameraHelper=new Wr}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(l,p){return this.currentHelper.handlePanInertia(l,p)}handleMapControlsRollPitchBearingZoom(l,p){return this.currentHelper.handleMapControlsRollPitchBearingZoom(l,p)}handleMapControlsPan(l,p,C){this.currentHelper.handleMapControlsPan(l,p,C)}cameraForBoxAndBearing(l,p,C,E,T){return this.currentHelper.cameraForBoxAndBearing(l,p,C,E,T)}handleJumpToCenterZoom(l,p){this.currentHelper.handleJumpToCenterZoom(l,p)}handleEaseTo(l,p){return this.currentHelper.handleEaseTo(l,p)}handleFlyTo(l,p){return this.currentHelper.handleFlyTo(l,p)}}const Ef=(I,l)=>a.y(I,l&&l.filter((p=>p.identifier!=="source.canvas"))),_1=a.bE();class vp extends a.E{constructor(l,p={}){var C,E;super(),this._rtlPluginLoaded=()=>{for(const U in this.sourceCaches){const Q=this.sourceCaches[U].getSource().type;Q!=="vector"&&Q!=="geojson"||this.sourceCaches[U].reload()}},this.map=l,this.dispatcher=new bt(it(),l._getMapId()),this.dispatcher.registerMessageHandler("GG",((U,Q)=>this.getGlyphs(U,Q))),this.dispatcher.registerMessageHandler("GI",((U,Q)=>this.getImages(U,Q))),this.dispatcher.registerMessageHandler("GDA",((U,Q)=>this.getDashes(U,Q))),this.imageManager=new le,this.imageManager.setEventedParent(this);const T=((C=l._container)===null||C===void 0?void 0:C.lang)||typeof document<"u"&&((E=document.documentElement)===null||E===void 0?void 0:E.lang)||void 0;this.glyphManager=new Ee(l._requestManager,p.localIdeographFontFamily,T),this.lineAtlas=new dt(256,512),this.crossTileSymbolIndex=new Pa,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",a.bG()),_e().on(Yn,this._rtlPluginLoaded),this.on("data",(U=>{if(U.dataType!=="source"||U.sourceDataType!=="metadata")return;const Q=this.sourceCaches[U.sourceId];if(!Q)return;const Z=Q.getSource();if(Z&&Z.vectorLayerIds)for(const ae in this._layers){const ce=this._layers[ae];ce.source===Z.id&&this._validateLayer(ce)}}))}setGlobalStateProperty(l,p){var C,E,T;this._checkLoaded();const U=p===null?(T=(E=(C=this.stylesheet.state)===null||C===void 0?void 0:C[l])===null||E===void 0?void 0:E.default)!==null&&T!==void 0?T:null:p;if(a.bH(U,this._globalState[l]))return this;this._globalState[l]=U,this._applyGlobalStateChanges([l])}getGlobalState(){return this._globalState}setGlobalState(l){this._checkLoaded();const p=[];for(const C in l)!a.bH(this._globalState[C],l[C].default)&&(p.push(C),this._globalState[C]=l[C].default);this._applyGlobalStateChanges(p)}_applyGlobalStateChanges(l){if(l.length===0)return;const p=new Set,C={};for(const E of l){C[E]=this._globalState[E];for(const T in this._layers){const U=this._layers[T],Q=U.getLayoutAffectingGlobalStateRefs(),Z=U.getPaintAffectingGlobalStateRefs();if(Q.has(E)&&p.add(U.source),Z.has(E))for(const{name:ae,value:ce}of Z.get(E))this._updatePaintProperty(U,ae,ce)}}this.dispatcher.broadcast("UGS",C);for(const E in this.sourceCaches)p.has(E)&&(this._reloadSource(E),this._changed=!0)}loadURL(l,p={},C){this.fire(new a.l("dataloading",{dataType:"style"})),p.validate=typeof p.validate!="boolean"||p.validate;const E=this.map._requestManager.transformRequest(l,"Style");this._loadStyleRequest=new AbortController;const T=this._loadStyleRequest;a.j(E,this._loadStyleRequest).then((U=>{this._loadStyleRequest=null,this._load(U.data,p,C)})).catch((U=>{this._loadStyleRequest=null,U&&!T.signal.aborted&&this.fire(new a.k(U))}))}loadJSON(l,p={},C){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,M.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,p.validate=p.validate!==!1,this._load(l,p,C)})).catch((()=>{}))}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(_1,{validate:!1})}_load(l,p,C){var E,T;let U=p.transformStyle?p.transformStyle(C,l):l;if(!p.validate||!Ef(this,a.z(U))){U=Object.assign({},U),this._loaded=!0,this.stylesheet=U;for(const Q in U.sources)this.addSource(Q,U.sources[Q],{validate:!1});U.sprite?this._loadSprite(U.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(U.glyphs),this._createLayers(),this.light=new Ie(this.stylesheet.light),this._setProjectionInternal(((E=this.stylesheet.projection)===null||E===void 0?void 0:E.type)||"mercator"),this.sky=new et(this.stylesheet.sky),this.map.setTerrain((T=this.stylesheet.terrain)!==null&&T!==void 0?T:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){var l;const p=a.bI(this.stylesheet.layers);this.setGlobalState((l=this.stylesheet.state)!==null&&l!==void 0?l:null),this.dispatcher.broadcast("SL",p),this._order=p.map((C=>C.id)),this._layers={},this._serializedLayers=null;for(const C of p){const E=a.bJ(C,this._globalState);E.setEventedParent(this,{layer:{id:C.id}}),this._layers[C.id]=E}}_loadSprite(l,p=!1,C=void 0){let E;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(T,U,Q,Z){return a._(this,void 0,void 0,(function*(){const ae=Y(T),ce=Q>1?"@2x":"",Ce={},fe={};for(const{id:Re,url:Ge}of ae){const Ze=U.transformRequest(z(Ge,ce,".json"),"SpriteJSON");Ce[Re]=a.j(Ze,Z);const Xe=U.transformRequest(z(Ge,ce,".png"),"SpriteImage");fe[Re]=H.getImage(Xe,Z)}return yield Promise.all([...Object.values(Ce),...Object.values(fe)]),(function(Re,Ge){return a._(this,void 0,void 0,(function*(){const Ze={};for(const Xe in Re){Ze[Xe]={};const tt=M.getImageCanvasContext((yield Ge[Xe]).data),ot=(yield Re[Xe]).data;for(const nt in ot){const{width:ct,height:gt,x:xt,y:ht,sdf:Et,pixelRatio:Qt,stretchX:Kt,stretchY:Nt,content:Wt,textFitWidth:In,textFitHeight:kn}=ot[nt];Ze[Xe][nt]={data:null,pixelRatio:Qt,sdf:Et,stretchX:Kt,stretchY:Nt,content:Wt,textFitWidth:In,textFitHeight:kn,spriteData:{width:ct,height:gt,x:xt,y:ht,context:tt}}}}return Ze}))})(Ce,fe)}))})(l,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((T=>{if(this._spriteRequest=null,T)for(const U in T){this._spritesImagesIds[U]=[];const Q=this._spritesImagesIds[U]?this._spritesImagesIds[U].filter((Z=>!(Z in T))):[];for(const Z of Q)this.imageManager.removeImage(Z),this._changedImages[Z]=!0;for(const Z in T[U]){const ae=U==="default"?Z:`${U}:${Z}`;this._spritesImagesIds[U].push(ae),ae in this.imageManager.images?this.imageManager.updateImage(ae,T[U][Z],!1):this.imageManager.addImage(ae,T[U][Z]),p&&(this._changedImages[ae]=!0)}}})).catch((T=>{this._spriteRequest=null,E=T,this.fire(new a.k(E))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),p&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),C&&C(E)}))}_unloadSprite(){for(const l of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(l),this._changedImages[l]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(l){const p=this.sourceCaches[l.source];if(!p)return;const C=l.sourceLayer;if(!C)return;const E=p.getSource();(E.type==="geojson"||E.vectorLayerIds&&E.vectorLayerIds.indexOf(C)===-1)&&this.fire(new a.k(new Error(`Source layer "${C}" does not exist on source "${E.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.sourceCaches)if(!this.sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(l,p=!1){const C=this._serializedAllLayers();if(!l||l.length===0)return Object.values(p?a.bK(C):C);const E=[];for(const T of l)if(C[T]){const U=p?a.bK(C[T]):C[T];E.push(U)}return E}_serializedAllLayers(){let l=this._serializedLayers;if(l)return l;l=this._serializedLayers={};const p=Object.keys(this._layers);for(const C of p){const E=this._layers[C];E.type!=="custom"&&(l[C]=E.serialize())}return l}hasTransitions(){var l,p,C;if(!((l=this.light)===null||l===void 0)&&l.hasTransition()||!((p=this.sky)===null||p===void 0)&&p.hasTransition()||!((C=this.projection)===null||C===void 0)&&C.hasTransition())return!0;for(const E in this.sourceCaches)if(this.sourceCaches[E].hasTransition())return!0;for(const E in this._layers)if(this._layers[E].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const p=this._changed;if(p){const E=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);(E.length||T.length)&&this._updateWorkerLayers(E,T);for(const U in this._updatedSources){const Q=this._updatedSources[U];if(Q==="reload")this._reloadSource(U);else{if(Q!=="clear")throw new Error(`Invalid action ${Q}`);this._clearSource(U)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const U in this._updatedPaintProps)this._layers[U].updateTransitions(l);this.light.updateTransitions(l),this.sky.updateTransitions(l),this._resetUpdates()}const C={};for(const E in this.sourceCaches){const T=this.sourceCaches[E];C[E]=T.used,T.used=!1}for(const E of this._order){const T=this._layers[E];T.recalculate(l,this._availableImages),!T.isHidden(l.zoom)&&T.source&&(this.sourceCaches[T.source].used=!0)}for(const E in C){const T=this.sourceCaches[E];!!C[E]!=!!T.used&&T.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:E}))}this.light.recalculate(l),this.sky.recalculate(l),this.projection.recalculate(l),this.z=l.zoom,p&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(l,p){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(l,!1),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(l,p={}){var C;this._checkLoaded();const E=this.serialize();if(l=p.transformStyle?p.transformStyle(E,l):l,((C=p.validate)===null||C===void 0||C)&&Ef(this,a.z(l)))return!1;(l=a.bK(l)).layers=a.bI(l.layers);const T=a.bL(E,l),U=this._getOperationsToPerform(T);if(U.unimplemented.length>0)throw new Error(`Unimplemented: ${U.unimplemented.join(", ")}.`);if(U.operations.length===0)return!1;for(const Q of U.operations)Q();return this.stylesheet=l,this._serializedLayers=null,!0}_getOperationsToPerform(l){const p=[],C=[];for(const E of l)switch(E.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":p.push((()=>this.addLayer.apply(this,E.args)));break;case"removeLayer":p.push((()=>this.removeLayer.apply(this,E.args)));break;case"setPaintProperty":p.push((()=>this.setPaintProperty.apply(this,E.args)));break;case"setLayoutProperty":p.push((()=>this.setLayoutProperty.apply(this,E.args)));break;case"setFilter":p.push((()=>this.setFilter.apply(this,E.args)));break;case"addSource":p.push((()=>this.addSource.apply(this,E.args)));break;case"removeSource":p.push((()=>this.removeSource.apply(this,E.args)));break;case"setLayerZoomRange":p.push((()=>this.setLayerZoomRange.apply(this,E.args)));break;case"setLight":p.push((()=>this.setLight.apply(this,E.args)));break;case"setGeoJSONSourceData":p.push((()=>this.setGeoJSONSourceData.apply(this,E.args)));break;case"setGlyphs":p.push((()=>this.setGlyphs.apply(this,E.args)));break;case"setSprite":p.push((()=>this.setSprite.apply(this,E.args)));break;case"setTerrain":p.push((()=>this.map.setTerrain.apply(this,E.args)));break;case"setSky":p.push((()=>this.setSky.apply(this,E.args)));break;case"setProjection":this.setProjection.apply(this,E.args);break;case"setGlobalState":p.push((()=>this.setGlobalState.apply(this,E.args)));break;case"setTransition":p.push((()=>{}));break;default:C.push(E.command)}return{operations:p,unimplemented:C}}addImage(l,p){if(this.getImage(l))return this.fire(new a.k(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,p),this._afterImageUpdated(l)}updateImage(l,p){this.imageManager.updateImage(l,p)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new a.k(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,p,C={}){if(this._checkLoaded(),this.sourceCaches[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(a.z.source,`sources.${l}`,p,null,C))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const E=this.sourceCaches[l]=new Fn(l,p,this.dispatcher);E.style=this,E.setEventedParent(this,(()=>({isSourceLoaded:E.loaded(),source:E.serialize(),sourceId:l}))),E.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error("There is no source with this ID");for(const C in this._layers)if(this._layers[C].source===l)return this.fire(new a.k(new Error(`Source "${l}" cannot be removed while layer "${C}" is using it.`)));const p=this.sourceCaches[l];delete this.sourceCaches[l],delete this._updatedSources[l],p.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),p.setEventedParent(null),p.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,p){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const C=this.sourceCaches[l].getSource();if(C.type!=="geojson")throw new Error(`geojsonSource.type is ${C.type}, which is !== 'geojson`);C.setData(p),this._changed=!0}getSource(l){return this.sourceCaches[l]&&this.sourceCaches[l].getSource()}addLayer(l,p,C={}){this._checkLoaded();const E=l.id;if(this.getLayer(E))return void this.fire(new a.k(new Error(`Layer "${E}" already exists on this map.`)));let T;if(l.type==="custom"){if(Ef(this,a.bM(l)))return;T=a.bJ(l,this._globalState)}else{if("source"in l&&typeof l.source=="object"&&(this.addSource(E,l.source),l=a.bK(l),l=a.e(l,{source:E})),this._validate(a.z.layer,`layers.${E}`,l,{arrayIndex:-1},C))return;T=a.bJ(l,this._globalState),this._validateLayer(T),T.setEventedParent(this,{layer:{id:E}})}const U=p?this._order.indexOf(p):this._order.length;if(p&&U===-1)this.fire(new a.k(new Error(`Cannot add layer "${E}" before non-existing layer "${p}".`)));else{if(this._order.splice(U,0,E),this._layerOrderChanged=!0,this._layers[E]=T,this._removedLayers[E]&&T.source&&T.type!=="custom"){const Q=this._removedLayers[E];delete this._removedLayers[E],Q.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",this.sourceCaches[T.source].pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map)}}moveLayer(l,p){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new a.k(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===p)return;const C=this._order.indexOf(l);this._order.splice(C,1);const E=p?this._order.indexOf(p):this._order.length;p&&E===-1?this.fire(new a.k(new Error(`Cannot move layer "${l}" before non-existing layer "${p}".`))):(this._order.splice(E,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const p=this._layers[l];if(!p)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${l}".`)));p.setEventedParent(null);const C=this._order.indexOf(l);this._order.splice(C,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=p,delete this._layers[l],this._serializedLayers&&delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],p.onRemove&&p.onRemove(this.map)}getLayer(l){return this._layers[l]}getLayersOrder(){return[...this._order]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,p,C){this._checkLoaded();const E=this.getLayer(l);E?E.minzoom===p&&E.maxzoom===C||(p!=null&&(E.minzoom=p),C!=null&&(E.maxzoom=C),this._updateLayer(E)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,p,C={}){this._checkLoaded();const E=this.getLayer(l);if(E){if(!a.bH(E.filter,p))return p==null?(E.setFilter(void 0),void this._updateLayer(E)):void(this._validate(a.z.filter,`layers.${E.id}.filter`,p,null,C)||(E.setFilter(a.bK(p)),this._updateLayer(E)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return a.bK(this.getLayer(l).filter)}setLayoutProperty(l,p,C,E={}){this._checkLoaded();const T=this.getLayer(l);T?a.bH(T.getLayoutProperty(p),C)||(T.setLayoutProperty(p,C,E),this._updateLayer(T)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,p){const C=this.getLayer(l);if(C)return C.getLayoutProperty(p);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,p,C,E={}){this._checkLoaded();const T=this.getLayer(l);T?a.bH(T.getPaintProperty(p),C)||this._updatePaintProperty(T,p,C,E):this.fire(new a.k(new Error(`Cannot style non-existing layer "${l}".`)))}_updatePaintProperty(l,p,C,E={}){l.setPaintProperty(p,C,E)&&this._updateLayer(l),this._changed=!0,this._updatedPaintProps[l.id]=!0,this._serializedLayers=null}getPaintProperty(l,p){return this.getLayer(l).getPaintProperty(p)}setFeatureState(l,p){this._checkLoaded();const C=l.source,E=l.sourceLayer,T=this.sourceCaches[C];if(T===void 0)return void this.fire(new a.k(new Error(`The source '${C}' does not exist in the map's style.`)));const U=T.getSource().type;U==="geojson"&&E?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):U!=="vector"||E?(l.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),T.setFeatureState(E,l.id,p)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,p){this._checkLoaded();const C=l.source,E=this.sourceCaches[C];if(E===void 0)return void this.fire(new a.k(new Error(`The source '${C}' does not exist in the map's style.`)));const T=E.getSource().type,U=T==="vector"?l.sourceLayer:void 0;T!=="vector"||U?p&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):E.removeFeatureState(U,l.id,p):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const p=l.source,C=l.sourceLayer,E=this.sourceCaches[p];if(E!==void 0)return E.getSource().type!=="vector"||C?(l.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),E.getFeatureState(C,l.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const l=a.bN(this.sourceCaches,(T=>T.serialize())),p=this._serializeByIds(this._order,!0),C=this.map.getTerrain()||void 0,E=this.stylesheet;return a.bO({version:E.version,name:E.name,metadata:E.metadata,light:E.light,sky:E.sky,center:E.center,zoom:E.zoom,bearing:E.bearing,pitch:E.pitch,sprite:E.sprite,glyphs:E.glyphs,transition:E.transition,projection:E.projection,sources:l,layers:p,terrain:C},(T=>T!==void 0))}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.sourceCaches[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.sourceCaches[l.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(l){const p=U=>this._layers[U].type==="fill-extrusion",C={},E=[];for(let U=this._order.length-1;U>=0;U--){const Q=this._order[U];if(p(Q)){C[Q]=U;for(const Z of l){const ae=Z[Q];if(ae)for(const ce of ae)E.push(ce)}}}E.sort(((U,Q)=>Q.intersectionZ-U.intersectionZ));const T=[];for(let U=this._order.length-1;U>=0;U--){const Q=this._order[U];if(p(Q))for(let Z=E.length-1;Z>=0;Z--){const ae=E[Z].feature;if(C[ae.layer.id]<U)break;T.push(ae),E.pop()}else for(const Z of l){const ae=Z[Q];if(ae)for(const ce of ae)T.push(ce.feature)}}return T}queryRenderedFeatures(l,p,C){p&&p.filter&&this._validate(a.z.filter,"queryRenderedFeatures.filter",p.filter,null,p);const E={};if(p&&p.layers){if(!(Array.isArray(p.layers)||p.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const ae of p.layers){const ce=this._layers[ae];if(!ce)return this.fire(new a.k(new Error(`The layer '${ae}' does not exist in the map's style and cannot be queried for features.`))),[];E[ce.source]=!0}}const T=[];p.availableImages=this._availableImages;const U=this._serializedAllLayers(),Q=p.layers instanceof Set?p.layers:Array.isArray(p.layers)?new Set(p.layers):null,Z=Object.assign(Object.assign({},p),{layers:Q,globalState:this._globalState});for(const ae in this.sourceCaches)p.layers&&!E[ae]||T.push(Te(this.sourceCaches[ae],this._layers,U,l,Z,C,this.map.terrain?(ce,Ce,fe)=>this.map.terrain.getElevation(ce,Ce,fe):void 0));return this.placement&&T.push((function(ae,ce,Ce,fe,Re,Ge,Ze){const Xe={},tt=Ge.queryRenderedSymbols(fe),ot=[];for(const nt of Object.keys(tt).map(Number))ot.push(Ze[nt]);ot.sort(Se);for(const nt of ot){const ct=nt.featureIndex.lookupSymbolFeatures(tt[nt.bucketInstanceId],ce,nt.bucketIndex,nt.sourceLayerIndex,{filterSpec:Re.filter,globalState:Re.globalState},Re.layers,Re.availableImages,ae);for(const gt in ct){const xt=Xe[gt]=Xe[gt]||[],ht=ct[gt];ht.sort(((Et,Qt)=>{const Kt=nt.featureSortOrder;if(Kt){const Nt=Kt.indexOf(Et.featureIndex);return Kt.indexOf(Qt.featureIndex)-Nt}return Qt.featureIndex-Et.featureIndex}));for(const Et of ht)xt.push(Et)}}return(function(nt,ct,gt){for(const xt in nt)for(const ht of nt[xt])Ne(ht,gt[ct[xt].source]);return nt})(Xe,ae,Ce)})(this._layers,U,this.sourceCaches,l,Z,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(T)}querySourceFeatures(l,p){p?.filter&&this._validate(a.z.filter,"querySourceFeatures.filter",p.filter,null,p);const C=this.sourceCaches[l];return C?(function(E,T){const U=E.getRenderableIds().map((ae=>E.getTileByID(ae))),Q=[],Z={};for(let ae=0;ae<U.length;ae++){const ce=U[ae],Ce=ce.tileID.canonical.key;Z[Ce]||(Z[Ce]=!0,ce.querySourceFeatures(Q,T))}return Q})(C,p?Object.assign(Object.assign({},p),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(l,p={}){this._checkLoaded();const C=this.light.getLight();let E=!1;for(const U in l)if(!a.bH(l[U],C[U])){E=!0;break}if(!E)return;const T={now:M.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,p),this.light.updateTransitions(T)}getProjection(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.projection}setProjection(l){if(this._checkLoaded(),this.projection){if(this.projection.name===l.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=l,this._setProjectionInternal(l.type)}getSky(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.sky}setSky(l,p={}){this._checkLoaded();const C=this.getSky();let E=!1;if(!l&&!C)return;if(l&&!C)E=!0;else if(!l&&C)E=!0;else for(const U in l)if(!a.bH(l[U],C[U])){E=!0;break}if(!E)return;const T={now:M.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=l,this.sky.setSky(l,p),this.sky.updateTransitions(T)}_setProjectionInternal(l){const p=(function(C){if(Array.isArray(C)){const E=new Ii({type:C});return{projection:E,transform:new ZA,cameraHelper:new XA(E)}}switch(C){case"mercator":return{projection:new sr,transform:new Pr,cameraHelper:new Ms};case"globe":{const E=new Ii({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:E,transform:new ZA,cameraHelper:new XA(E)}}case"vertical-perspective":return{projection:new zi,transform:new Kh,cameraHelper:new Wr};default:return a.w(`Unknown projection name: ${C}. Falling back to mercator projection.`),{projection:new sr,transform:new Pr,cameraHelper:new Ms}}})(l);this.projection=p.projection,this.map.migrateProjection(p.transform,p.cameraHelper);for(const C in this.sourceCaches)this.sourceCaches[C].reload()}_validate(l,p,C,E,T={}){return(!T||T.validate!==!1)&&Ef(this,l.call(a.z,a.e({key:p,style:this.serialize(),value:C,styleSpec:a.v},E)))}_remove(l=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),_e().off(Yn,this._rtlPluginLoaded);for(const p in this._layers)this._layers[p].setEventedParent(null);for(const p in this.sourceCaches){const C=this.sourceCaches[p];C.setEventedParent(null),C.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),l&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(l)}_clearSource(l){this.sourceCaches[l].clearTiles()}_reloadSource(l){this.sourceCaches[l].resume(),this.sourceCaches[l].reload()}_updateSources(l){for(const p in this.sourceCaches)this.sourceCaches[p].update(l,this.map.terrain)}_generateCollisionBoxes(){for(const l in this.sourceCaches)this._reloadSource(l)}_updatePlacement(l,p,C,E,T=!1){let U=!1,Q=!1;const Z={};for(const ae of this._order){const ce=this._layers[ae];if(ce.type!=="symbol")continue;if(!Z[ce.source]){const fe=this.sourceCaches[ce.source];Z[ce.source]=fe.getRenderableIds(!0).map((Re=>fe.getTileByID(Re))).sort(((Re,Ge)=>Ge.tileID.overscaledZ-Re.tileID.overscaledZ||(Re.tileID.isLessThan(Ge.tileID)?-1:1)))}const Ce=this.crossTileSymbolIndex.addLayer(ce,Z[ce.source],l.center.lng);U=U||Ce}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((T=T||this._layerOrderChanged||C===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(M.now(),l.zoom))&&(this.pauseablePlacement=new ga(l,this.map.terrain,this._order,T,p,C,E,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(M.now()),Q=!0),U&&this.pauseablePlacement.placement.setStale()),Q||U)for(const ae of this._order){const ce=this._layers[ae];ce.type==="symbol"&&this.placement.updateLayerOpacities(ce,Z[ce.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(M.now())}_releaseSymbolFadeTiles(){for(const l in this.sourceCaches)this.sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,p){return a._(this,void 0,void 0,(function*(){const C=yield this.imageManager.getImages(p.icons);this._updateTilesForChangedImages();const E=this.sourceCaches[p.source];return E&&E.setDependencies(p.tileID.key,p.type,p.icons),C}))}getGlyphs(l,p){return a._(this,void 0,void 0,(function*(){const C=yield this.glyphManager.getGlyphs(p.stacks),E=this.sourceCaches[p.source];return E&&E.setDependencies(p.tileID.key,p.type,[""]),C}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(l,p={}){this._checkLoaded(),l&&this._validate(a.z.glyphs,"glyphs",l,null,p)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=l,this.glyphManager.entries={},this.glyphManager.setURL(l))}getDashes(l,p){return a._(this,void 0,void 0,(function*(){const C={};for(const[E,T]of Object.entries(p.dashes))C[E]=this.lineAtlas.getDash(T.dasharray,T.round);return C}))}addSprite(l,p,C={},E){this._checkLoaded();const T=[{id:l,url:p}],U=[...Y(this.stylesheet.sprite),...T];this._validate(a.z.sprite,"sprite",U,null,C)||(this.stylesheet.sprite=U,this._loadSprite(T,!0,E))}removeSprite(l){this._checkLoaded();const p=Y(this.stylesheet.sprite);if(p.find((C=>C.id===l))){if(this._spritesImagesIds[l])for(const C of this._spritesImagesIds[l])this.imageManager.removeImage(C),this._changedImages[C]=!0;p.splice(p.findIndex((C=>C.id===l)),1),this.stylesheet.sprite=p.length>0?p:void 0,delete this._spritesImagesIds[l],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${l}" doesn't exists on this map.`)))}getSprite(){return Y(this.stylesheet.sprite)}setSprite(l,p={},C){this._checkLoaded(),l&&this._validate(a.z.sprite,"sprite",l,null,p)||(this.stylesheet.sprite=l,l?this._loadSprite(l,!0,C):(this._unloadSprite(),C&&C(null)))}}var fv=a.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class pv{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,p,C,E,T,U,Q,Z,ae){this.context=l;let ce=this.boundPaintVertexBuffers.length!==E.length;for(let Ce=0;!ce&&Ce<E.length;Ce++)this.boundPaintVertexBuffers[Ce]!==E[Ce]&&(ce=!0);!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==C||ce||this.boundIndexBuffer!==T||this.boundVertexOffset!==U||this.boundDynamicVertexBuffer!==Q||this.boundDynamicVertexBuffer2!==Z||this.boundDynamicVertexBuffer3!==ae?this.freshBind(p,C,E,T,U,Q,Z,ae):(l.bindVertexArray.set(this.vao),Q&&Q.bind(),T&&T.dynamicDraw&&T.bind(),Z&&Z.bind(),ae&&ae.bind())}freshBind(l,p,C,E,T,U,Q,Z){const ae=l.numAttributes,ce=this.context,Ce=ce.gl;this.vao&&this.destroy(),this.vao=ce.createVertexArray(),ce.bindVertexArray.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=C,this.boundIndexBuffer=E,this.boundVertexOffset=T,this.boundDynamicVertexBuffer=U,this.boundDynamicVertexBuffer2=Q,this.boundDynamicVertexBuffer3=Z,p.enableAttributes(Ce,l);for(const fe of C)fe.enableAttributes(Ce,l);U&&U.enableAttributes(Ce,l),Q&&Q.enableAttributes(Ce,l),Z&&Z.enableAttributes(Ce,l),p.bind(),p.setVertexAttribPointers(Ce,l,T);for(const fe of C)fe.bind(),fe.setVertexAttribPointers(Ce,l,T);U&&(U.bind(),U.setVertexAttribPointers(Ce,l,T)),E&&E.bind(),Q&&(Q.bind(),Q.setVertexAttribPointers(Ce,l,T)),Z&&(Z.bind(),Z.setVertexAttribPointers(Ce,l,T)),ce.currentNumAttributes=ae}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const ym=(I,l,p,C,E)=>({u_texture:0,u_ele_delta:I,u_fog_matrix:l,u_fog_color:p?p.properties.get("fog-color"):a.bf.white,u_fog_ground_blend:p?p.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:E?0:p?p.calculateFogBlendOpacity(C):0,u_horizon_color:p?p.properties.get("horizon-color"):a.bf.white,u_horizon_fog_blend:p?p.properties.get("horizon-fog-blend"):1,u_is_globe_mode:E?1:0}),vm={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function mA(I){const l=[];for(let p=0;p<I.length;p++){if(I[p]===null)continue;const C=I[p].split(" ");l.push(C.pop())}return l}class Lh{constructor(l,p,C,E,T,U,Q,Z,ae=[]){const ce=l.gl;this.program=ce.createProgram();const Ce=mA(p.staticAttributes),fe=C?C.getBinderAttributes():[],Re=Ce.concat(fe),Ge=qr.prelude.staticUniforms?mA(qr.prelude.staticUniforms):[],Ze=Q.staticUniforms?mA(Q.staticUniforms):[],Xe=p.staticUniforms?mA(p.staticUniforms):[],tt=C?C.getBinderUniforms():[],ot=Ge.concat(Ze).concat(Xe).concat(tt),nt=[];for(const Kt of ot)nt.indexOf(Kt)<0&&nt.push(Kt);const ct=C?C.defines():[];$e(ce)&&ct.unshift("#version 300 es"),T&&ct.push("#define OVERDRAW_INSPECTOR;"),U&&ct.push("#define TERRAIN3D;"),Z&&ct.push(Z),ae&&ct.push(...ae);let gt=ct.concat(qr.prelude.fragmentSource,Q.fragmentSource,p.fragmentSource).join(`
`),xt=ct.concat(qr.prelude.vertexSource,Q.vertexSource,p.vertexSource).join(`
`);$e(ce)||(gt=(function(Kt){return Kt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(gt),xt=(function(Kt){return Kt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(xt));const ht=ce.createShader(ce.FRAGMENT_SHADER);if(ce.isContextLost())return void(this.failedToCreate=!0);if(ce.shaderSource(ht,gt),ce.compileShader(ht),!ce.getShaderParameter(ht,ce.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${ce.getShaderInfoLog(ht)}`);ce.attachShader(this.program,ht);const Et=ce.createShader(ce.VERTEX_SHADER);if(ce.isContextLost())return void(this.failedToCreate=!0);if(ce.shaderSource(Et,xt),ce.compileShader(Et),!ce.getShaderParameter(Et,ce.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${ce.getShaderInfoLog(Et)}`);ce.attachShader(this.program,Et),this.attributes={};const Qt={};this.numAttributes=Re.length;for(let Kt=0;Kt<this.numAttributes;Kt++)Re[Kt]&&(ce.bindAttribLocation(this.program,Kt,Re[Kt]),this.attributes[Re[Kt]]=Kt);if(ce.linkProgram(this.program),!ce.getProgramParameter(this.program,ce.LINK_STATUS))throw new Error(`Program failed to link: ${ce.getProgramInfoLog(this.program)}`);ce.deleteShader(Et),ce.deleteShader(ht);for(let Kt=0;Kt<nt.length;Kt++){const Nt=nt[Kt];if(Nt&&!Qt[Nt]){const Wt=ce.getUniformLocation(this.program,Nt);Wt&&(Qt[Nt]=Wt)}}this.fixedUniforms=E(l,Qt),this.terrainUniforms=((Kt,Nt)=>({u_depth:new a.bP(Kt,Nt.u_depth),u_terrain:new a.bP(Kt,Nt.u_terrain),u_terrain_dim:new a.bg(Kt,Nt.u_terrain_dim),u_terrain_matrix:new a.bR(Kt,Nt.u_terrain_matrix),u_terrain_unpack:new a.bS(Kt,Nt.u_terrain_unpack),u_terrain_exaggeration:new a.bg(Kt,Nt.u_terrain_exaggeration)}))(l,Qt),this.projectionUniforms=((Kt,Nt)=>({u_projection_matrix:new a.bR(Kt,Nt.u_projection_matrix),u_projection_tile_mercator_coords:new a.bS(Kt,Nt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bS(Kt,Nt.u_projection_clipping_plane),u_projection_transition:new a.bg(Kt,Nt.u_projection_transition),u_projection_fallback_matrix:new a.bR(Kt,Nt.u_projection_fallback_matrix)}))(l,Qt),this.binderUniforms=C?C.getUniforms(l,Qt):[]}draw(l,p,C,E,T,U,Q,Z,ae,ce,Ce,fe,Re,Ge,Ze,Xe,tt,ot,nt){const ct=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(C),l.setStencilMode(E),l.setColorMode(T),l.setCullFace(U),Z){l.activeTexture.set(ct.TEXTURE2),ct.bindTexture(ct.TEXTURE_2D,Z.depthTexture),l.activeTexture.set(ct.TEXTURE3),ct.bindTexture(ct.TEXTURE_2D,Z.texture);for(const xt in this.terrainUniforms)this.terrainUniforms[xt].set(Z[xt])}if(ae)for(const xt in ae)this.projectionUniforms[vm[xt]].set(ae[xt]);if(Q)for(const xt in this.fixedUniforms)this.fixedUniforms[xt].set(Q[xt]);Xe&&Xe.setUniforms(l,this.binderUniforms,Ge,{zoom:Ze});let gt=0;switch(p){case ct.LINES:gt=2;break;case ct.TRIANGLES:gt=3;break;case ct.LINE_STRIP:gt=1}for(const xt of Re.get()){const ht=xt.vaos||(xt.vaos={});(ht[ce]||(ht[ce]=new pv)).bind(l,this,Ce,Xe?Xe.getPaintVertexBuffers():[],fe,xt.vertexOffset,tt,ot,nt),ct.drawElements(p,xt.primitiveLength*gt,ct.UNSIGNED_SHORT,xt.primitiveOffset*gt*2)}}}function bm(I,l,p){const C=1/a.aC(p,1,l.transform.tileZoom),E=Math.pow(2,p.tileID.overscaledZ),T=p.tileSize*Math.pow(2,l.transform.tileZoom)/E,U=T*(p.tileID.canonical.x+p.tileID.wrap*E),Q=T*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[C,I.fromScale,I.toScale],u_fade:I.t,u_pixel_coord_upper:[U>>16,Q>>16],u_pixel_coord_lower:[65535&U,65535&Q]}}const Cc=(I,l,p,C)=>{const E=I.style.light,T=E.properties.get("position"),U=[T.x,T.y,T.z],Q=a.bV();E.properties.get("anchor")==="viewport"&&a.bW(Q,I.transform.bearingInRadians),a.bX(U,U,Q);const Z=I.transform.transformLightDirection(U),ae=E.properties.get("color");return{u_lightpos:U,u_lightpos_globe:Z,u_lightintensity:E.properties.get("intensity"),u_lightcolor:[ae.r,ae.g,ae.b],u_vertical_gradient:+l,u_opacity:p,u_fill_translate:C}},Cm=(I,l,p,C,E,T,U)=>a.e(Cc(I,l,p,C),bm(T,I,U),{u_height_factor:-Math.pow(2,E.overscaledZ)/U.tileSize/8}),gA=(I,l,p,C)=>a.e(bm(l,I,p),{u_fill_translate:C}),Ed=(I,l)=>({u_world:I,u_fill_translate:l}),Od=(I,l,p,C,E)=>a.e(gA(I,l,p,E),{u_world:C}),x1=(I,l,p,C,E)=>{const T=I.transform;let U,Q,Z=0;if(p.paint.get("circle-pitch-alignment")==="map"){const ae=a.aC(l,1,T.zoom);U=!0,Q=[ae,ae],Z=ae/(a.$*Math.pow(2,l.tileID.overscaledZ))*2*Math.PI*E}else U=!1,Q=T.pixelsToGLUnits;return{u_camera_to_center_distance:T.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+U,u_device_pixel_ratio:I.pixelRatio,u_extrude_scale:Q,u_globe_extrude_scale:Z,u_translate:C}},Bd=I=>({u_pixel_extrude_scale:[1/I.width,1/I.height]}),_m=I=>({u_viewport_size:[I.width,I.height]}),Fh=(I,l=1)=>({u_color:I,u_overlay:0,u_overlay_scale:l}),zh=(I,l,p,C)=>{const E=a.aC(I,1,l)/(a.$*Math.pow(2,I.tileID.overscaledZ))*2*Math.PI*C;return{u_extrude_scale:a.aC(I,1,l),u_intensity:p,u_globe_extrude_scale:E}},su=(I,l,p,C)=>{const E=a.L();a.bY(E,0,I.width,I.height,0,0,1);const T=I.context.gl;return{u_matrix:E,u_world:[T.drawingBufferWidth,T.drawingBufferHeight],u_image:p,u_color_ramp:C,u_opacity:l.paint.get("heatmap-opacity")}},Hg=(I,l,p)=>{const C=p.paint.get("hillshade-accent-color");let E;switch(p.paint.get("hillshade-method")){case"basic":E=4;break;case"combined":E=1;break;case"igor":E=2;break;case"multidirectional":E=3;break;default:E=0}const T=p.getIlluminationProperties();for(let U=0;U<T.directionRadians.length;U++)p.paint.get("hillshade-illumination-anchor")==="viewport"&&(T.directionRadians[U]+=I.transform.bearingInRadians);return{u_image:0,u_latrange:bp(0,l.tileID),u_exaggeration:p.paint.get("hillshade-exaggeration"),u_altitudes:T.altitudeRadians,u_azimuths:T.directionRadians,u_accent:C,u_method:E,u_highlights:T.highlightColor,u_shadows:T.shadowColor}},Of=(I,l)=>{const p=l.stride,C=a.L();return a.bY(C,0,a.$,-a.$,0,0,1),a.M(C,C,[0,-a.$,0]),{u_matrix:C,u_image:1,u_dimension:[p,p],u_zoom:I.overscaledZ,u_unpack:l.getUnpackVector()}};function bp(I,l){const p=Math.pow(2,l.canonical.z),C=l.canonical.y;return[new a.a1(0,C/p).toLngLat().lat,new a.a1(0,(C+1)/p).toLngLat().lat]}const xm=(I,l,p=0)=>({u_image:0,u_unpack:l.getUnpackVector(),u_dimension:[l.stride,l.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:p,u_opacity:I.paint.get("color-relief-opacity")}),jh=(I,l,p,C)=>{const E=I.transform;return{u_translation:JA(I,l,p),u_ratio:C/a.aC(l,1,E.zoom),u_device_pixel_ratio:I.pixelRatio,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},Bf=(I,l,p,C,E)=>a.e(jh(I,l,p,C),{u_image:0,u_image_height:E}),M1=(I,l,p,C,E)=>{const T=I.transform,U=Mm(l,T);return{u_translation:JA(I,l,p),u_texsize:l.imageAtlasTexture.size,u_ratio:C/a.aC(l,1,T.zoom),u_device_pixel_ratio:I.pixelRatio,u_image:0,u_scale:[U,E.fromScale,E.toScale],u_fade:E.t,u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]]}},yA=(I,l,p,C,E)=>{const T=Mm(l,I.transform);return a.e(jh(I,l,p,C),{u_tileratio:T,u_crossfade_from:E.fromScale,u_crossfade_to:E.toScale,u_image:0,u_mix:E.t,u_lineatlas_width:I.lineAtlas.width,u_lineatlas_height:I.lineAtlas.height})};function Mm(I,l){return 1/a.aC(I,1,l.tileZoom)}function JA(I,l,p){return a.aD(I.transform,l,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}const Id=(I,l,p,C,E)=>{return{u_tl_parent:I,u_scale_parent:l,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*C.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:C.paint.get("raster-brightness-min"),u_brightness_high:C.paint.get("raster-brightness-max"),u_saturation_factor:(U=C.paint.get("raster-saturation"),U>0?1-1/(1.001-U):-U),u_contrast_factor:(T=C.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:Zg(C.paint.get("raster-hue-rotate")),u_coords_top:[E[0].x,E[0].y,E[1].x,E[1].y],u_coords_bottom:[E[3].x,E[3].y,E[2].x,E[2].y]};var T,U};function Zg(I){I*=Math.PI/180;const l=Math.sin(I),p=Math.cos(I);return[(2*p+1)/3,(-Math.sqrt(3)*l-p+1)/3,(Math.sqrt(3)*l-p+1)/3]}const Nh=(I,l,p,C,E,T,U,Q,Z,ae,ce,Ce,fe)=>{const Re=U.transform;return{u_is_size_zoom_constant:+(I==="constant"||I==="source"),u_is_size_feature_constant:+(I==="constant"||I==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:Re.cameraToCenterDistance,u_pitch:Re.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:Re.width/Re.height,u_fade_change:U.options.fadeDuration?U.symbolFadeChange:1,u_label_plane_matrix:Q,u_coord_matrix:Z,u_is_text:+ce,u_pitch_with_map:+C,u_is_along_line:E,u_is_variable_anchor:T,u_texsize:Ce,u_texture:0,u_translation:ae,u_pitched_scale:fe}},wm=(I,l,p,C,E,T,U,Q,Z,ae,ce,Ce,fe,Re)=>{const Ge=U.transform;return a.e(Nh(I,l,p,C,E,T,U,Q,Z,ae,ce,Ce,Re),{u_gamma_scale:C?Math.cos(Ge.pitch*Math.PI/180)*Ge.cameraToCenterDistance:1,u_device_pixel_ratio:U.pixelRatio,u_is_halo:1})},eh=(I,l,p,C,E,T,U,Q,Z,ae,ce,Ce,fe)=>a.e(wm(I,l,p,C,E,T,U,Q,Z,ae,!0,ce,0,fe),{u_texsize_icon:Ce,u_texture_icon:1}),Cp=(I,l)=>({u_opacity:I,u_color:l}),w1=(I,l,p,C,E)=>a.e((function(T,U,Q,Z){const ae=Q.imageManager.getPattern(T.from.toString()),ce=Q.imageManager.getPattern(T.to.toString()),{width:Ce,height:fe}=Q.imageManager.getPixelSize(),Re=Math.pow(2,Z.tileID.overscaledZ),Ge=Z.tileSize*Math.pow(2,Q.transform.tileZoom)/Re,Ze=Ge*(Z.tileID.canonical.x+Z.tileID.wrap*Re),Xe=Ge*Z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ae.tl,u_pattern_br_a:ae.br,u_pattern_tl_b:ce.tl,u_pattern_br_b:ce.br,u_texsize:[Ce,fe],u_mix:U.t,u_pattern_size_a:ae.displaySize,u_pattern_size_b:ce.displaySize,u_scale_a:U.fromScale,u_scale_b:U.toScale,u_tile_units_to_pixels:1/a.aC(Z,1,Q.transform.tileZoom),u_pixel_coord_upper:[Ze>>16,Xe>>16],u_pixel_coord_lower:[65535&Ze,65535&Xe]}})(p,E,l,C),{u_opacity:I}),Xg=(I,l)=>{},Jg={fillExtrusion:(I,l)=>({u_lightpos:new a.bT(I,l.u_lightpos),u_lightpos_globe:new a.bT(I,l.u_lightpos_globe),u_lightintensity:new a.bg(I,l.u_lightintensity),u_lightcolor:new a.bT(I,l.u_lightcolor),u_vertical_gradient:new a.bg(I,l.u_vertical_gradient),u_opacity:new a.bg(I,l.u_opacity),u_fill_translate:new a.bU(I,l.u_fill_translate)}),fillExtrusionPattern:(I,l)=>({u_lightpos:new a.bT(I,l.u_lightpos),u_lightpos_globe:new a.bT(I,l.u_lightpos_globe),u_lightintensity:new a.bg(I,l.u_lightintensity),u_lightcolor:new a.bT(I,l.u_lightcolor),u_vertical_gradient:new a.bg(I,l.u_vertical_gradient),u_height_factor:new a.bg(I,l.u_height_factor),u_opacity:new a.bg(I,l.u_opacity),u_fill_translate:new a.bU(I,l.u_fill_translate),u_image:new a.bP(I,l.u_image),u_texsize:new a.bU(I,l.u_texsize),u_pixel_coord_upper:new a.bU(I,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(I,l.u_pixel_coord_lower),u_scale:new a.bT(I,l.u_scale),u_fade:new a.bg(I,l.u_fade)}),fill:(I,l)=>({u_fill_translate:new a.bU(I,l.u_fill_translate)}),fillPattern:(I,l)=>({u_image:new a.bP(I,l.u_image),u_texsize:new a.bU(I,l.u_texsize),u_pixel_coord_upper:new a.bU(I,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(I,l.u_pixel_coord_lower),u_scale:new a.bT(I,l.u_scale),u_fade:new a.bg(I,l.u_fade),u_fill_translate:new a.bU(I,l.u_fill_translate)}),fillOutline:(I,l)=>({u_world:new a.bU(I,l.u_world),u_fill_translate:new a.bU(I,l.u_fill_translate)}),fillOutlinePattern:(I,l)=>({u_world:new a.bU(I,l.u_world),u_image:new a.bP(I,l.u_image),u_texsize:new a.bU(I,l.u_texsize),u_pixel_coord_upper:new a.bU(I,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(I,l.u_pixel_coord_lower),u_scale:new a.bT(I,l.u_scale),u_fade:new a.bg(I,l.u_fade),u_fill_translate:new a.bU(I,l.u_fill_translate)}),circle:(I,l)=>({u_camera_to_center_distance:new a.bg(I,l.u_camera_to_center_distance),u_scale_with_map:new a.bP(I,l.u_scale_with_map),u_pitch_with_map:new a.bP(I,l.u_pitch_with_map),u_extrude_scale:new a.bU(I,l.u_extrude_scale),u_device_pixel_ratio:new a.bg(I,l.u_device_pixel_ratio),u_globe_extrude_scale:new a.bg(I,l.u_globe_extrude_scale),u_translate:new a.bU(I,l.u_translate)}),collisionBox:(I,l)=>({u_pixel_extrude_scale:new a.bU(I,l.u_pixel_extrude_scale)}),collisionCircle:(I,l)=>({u_viewport_size:new a.bU(I,l.u_viewport_size)}),debug:(I,l)=>({u_color:new a.bQ(I,l.u_color),u_overlay:new a.bP(I,l.u_overlay),u_overlay_scale:new a.bg(I,l.u_overlay_scale)}),depth:Xg,clippingMask:Xg,heatmap:(I,l)=>({u_extrude_scale:new a.bg(I,l.u_extrude_scale),u_intensity:new a.bg(I,l.u_intensity),u_globe_extrude_scale:new a.bg(I,l.u_globe_extrude_scale)}),heatmapTexture:(I,l)=>({u_matrix:new a.bR(I,l.u_matrix),u_world:new a.bU(I,l.u_world),u_image:new a.bP(I,l.u_image),u_color_ramp:new a.bP(I,l.u_color_ramp),u_opacity:new a.bg(I,l.u_opacity)}),hillshade:(I,l)=>({u_image:new a.bP(I,l.u_image),u_latrange:new a.bU(I,l.u_latrange),u_exaggeration:new a.bg(I,l.u_exaggeration),u_altitudes:new a.b_(I,l.u_altitudes),u_azimuths:new a.b_(I,l.u_azimuths),u_accent:new a.bQ(I,l.u_accent),u_method:new a.bP(I,l.u_method),u_shadows:new a.bZ(I,l.u_shadows),u_highlights:new a.bZ(I,l.u_highlights)}),hillshadePrepare:(I,l)=>({u_matrix:new a.bR(I,l.u_matrix),u_image:new a.bP(I,l.u_image),u_dimension:new a.bU(I,l.u_dimension),u_zoom:new a.bg(I,l.u_zoom),u_unpack:new a.bS(I,l.u_unpack)}),colorRelief:(I,l)=>({u_image:new a.bP(I,l.u_image),u_unpack:new a.bS(I,l.u_unpack),u_dimension:new a.bU(I,l.u_dimension),u_elevation_stops:new a.bP(I,l.u_elevation_stops),u_color_stops:new a.bP(I,l.u_color_stops),u_color_ramp_size:new a.bP(I,l.u_color_ramp_size),u_opacity:new a.bg(I,l.u_opacity)}),line:(I,l)=>({u_translation:new a.bU(I,l.u_translation),u_ratio:new a.bg(I,l.u_ratio),u_device_pixel_ratio:new a.bg(I,l.u_device_pixel_ratio),u_units_to_pixels:new a.bU(I,l.u_units_to_pixels)}),lineGradient:(I,l)=>({u_translation:new a.bU(I,l.u_translation),u_ratio:new a.bg(I,l.u_ratio),u_device_pixel_ratio:new a.bg(I,l.u_device_pixel_ratio),u_units_to_pixels:new a.bU(I,l.u_units_to_pixels),u_image:new a.bP(I,l.u_image),u_image_height:new a.bg(I,l.u_image_height)}),linePattern:(I,l)=>({u_translation:new a.bU(I,l.u_translation),u_texsize:new a.bU(I,l.u_texsize),u_ratio:new a.bg(I,l.u_ratio),u_device_pixel_ratio:new a.bg(I,l.u_device_pixel_ratio),u_image:new a.bP(I,l.u_image),u_units_to_pixels:new a.bU(I,l.u_units_to_pixels),u_scale:new a.bT(I,l.u_scale),u_fade:new a.bg(I,l.u_fade)}),lineSDF:(I,l)=>({u_translation:new a.bU(I,l.u_translation),u_ratio:new a.bg(I,l.u_ratio),u_device_pixel_ratio:new a.bg(I,l.u_device_pixel_ratio),u_units_to_pixels:new a.bU(I,l.u_units_to_pixels),u_image:new a.bP(I,l.u_image),u_mix:new a.bg(I,l.u_mix),u_tileratio:new a.bg(I,l.u_tileratio),u_crossfade_from:new a.bg(I,l.u_crossfade_from),u_crossfade_to:new a.bg(I,l.u_crossfade_to),u_lineatlas_width:new a.bg(I,l.u_lineatlas_width),u_lineatlas_height:new a.bg(I,l.u_lineatlas_height)}),raster:(I,l)=>({u_tl_parent:new a.bU(I,l.u_tl_parent),u_scale_parent:new a.bg(I,l.u_scale_parent),u_buffer_scale:new a.bg(I,l.u_buffer_scale),u_fade_t:new a.bg(I,l.u_fade_t),u_opacity:new a.bg(I,l.u_opacity),u_image0:new a.bP(I,l.u_image0),u_image1:new a.bP(I,l.u_image1),u_brightness_low:new a.bg(I,l.u_brightness_low),u_brightness_high:new a.bg(I,l.u_brightness_high),u_saturation_factor:new a.bg(I,l.u_saturation_factor),u_contrast_factor:new a.bg(I,l.u_contrast_factor),u_spin_weights:new a.bT(I,l.u_spin_weights),u_coords_top:new a.bS(I,l.u_coords_top),u_coords_bottom:new a.bS(I,l.u_coords_bottom)}),symbolIcon:(I,l)=>({u_is_size_zoom_constant:new a.bP(I,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bP(I,l.u_is_size_feature_constant),u_size_t:new a.bg(I,l.u_size_t),u_size:new a.bg(I,l.u_size),u_camera_to_center_distance:new a.bg(I,l.u_camera_to_center_distance),u_pitch:new a.bg(I,l.u_pitch),u_rotate_symbol:new a.bP(I,l.u_rotate_symbol),u_aspect_ratio:new a.bg(I,l.u_aspect_ratio),u_fade_change:new a.bg(I,l.u_fade_change),u_label_plane_matrix:new a.bR(I,l.u_label_plane_matrix),u_coord_matrix:new a.bR(I,l.u_coord_matrix),u_is_text:new a.bP(I,l.u_is_text),u_pitch_with_map:new a.bP(I,l.u_pitch_with_map),u_is_along_line:new a.bP(I,l.u_is_along_line),u_is_variable_anchor:new a.bP(I,l.u_is_variable_anchor),u_texsize:new a.bU(I,l.u_texsize),u_texture:new a.bP(I,l.u_texture),u_translation:new a.bU(I,l.u_translation),u_pitched_scale:new a.bg(I,l.u_pitched_scale)}),symbolSDF:(I,l)=>({u_is_size_zoom_constant:new a.bP(I,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bP(I,l.u_is_size_feature_constant),u_size_t:new a.bg(I,l.u_size_t),u_size:new a.bg(I,l.u_size),u_camera_to_center_distance:new a.bg(I,l.u_camera_to_center_distance),u_pitch:new a.bg(I,l.u_pitch),u_rotate_symbol:new a.bP(I,l.u_rotate_symbol),u_aspect_ratio:new a.bg(I,l.u_aspect_ratio),u_fade_change:new a.bg(I,l.u_fade_change),u_label_plane_matrix:new a.bR(I,l.u_label_plane_matrix),u_coord_matrix:new a.bR(I,l.u_coord_matrix),u_is_text:new a.bP(I,l.u_is_text),u_pitch_with_map:new a.bP(I,l.u_pitch_with_map),u_is_along_line:new a.bP(I,l.u_is_along_line),u_is_variable_anchor:new a.bP(I,l.u_is_variable_anchor),u_texsize:new a.bU(I,l.u_texsize),u_texture:new a.bP(I,l.u_texture),u_gamma_scale:new a.bg(I,l.u_gamma_scale),u_device_pixel_ratio:new a.bg(I,l.u_device_pixel_ratio),u_is_halo:new a.bP(I,l.u_is_halo),u_translation:new a.bU(I,l.u_translation),u_pitched_scale:new a.bg(I,l.u_pitched_scale)}),symbolTextAndIcon:(I,l)=>({u_is_size_zoom_constant:new a.bP(I,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bP(I,l.u_is_size_feature_constant),u_size_t:new a.bg(I,l.u_size_t),u_size:new a.bg(I,l.u_size),u_camera_to_center_distance:new a.bg(I,l.u_camera_to_center_distance),u_pitch:new a.bg(I,l.u_pitch),u_rotate_symbol:new a.bP(I,l.u_rotate_symbol),u_aspect_ratio:new a.bg(I,l.u_aspect_ratio),u_fade_change:new a.bg(I,l.u_fade_change),u_label_plane_matrix:new a.bR(I,l.u_label_plane_matrix),u_coord_matrix:new a.bR(I,l.u_coord_matrix),u_is_text:new a.bP(I,l.u_is_text),u_pitch_with_map:new a.bP(I,l.u_pitch_with_map),u_is_along_line:new a.bP(I,l.u_is_along_line),u_is_variable_anchor:new a.bP(I,l.u_is_variable_anchor),u_texsize:new a.bU(I,l.u_texsize),u_texsize_icon:new a.bU(I,l.u_texsize_icon),u_texture:new a.bP(I,l.u_texture),u_texture_icon:new a.bP(I,l.u_texture_icon),u_gamma_scale:new a.bg(I,l.u_gamma_scale),u_device_pixel_ratio:new a.bg(I,l.u_device_pixel_ratio),u_is_halo:new a.bP(I,l.u_is_halo),u_translation:new a.bU(I,l.u_translation),u_pitched_scale:new a.bg(I,l.u_pitched_scale)}),background:(I,l)=>({u_opacity:new a.bg(I,l.u_opacity),u_color:new a.bQ(I,l.u_color)}),backgroundPattern:(I,l)=>({u_opacity:new a.bg(I,l.u_opacity),u_image:new a.bP(I,l.u_image),u_pattern_tl_a:new a.bU(I,l.u_pattern_tl_a),u_pattern_br_a:new a.bU(I,l.u_pattern_br_a),u_pattern_tl_b:new a.bU(I,l.u_pattern_tl_b),u_pattern_br_b:new a.bU(I,l.u_pattern_br_b),u_texsize:new a.bU(I,l.u_texsize),u_mix:new a.bg(I,l.u_mix),u_pattern_size_a:new a.bU(I,l.u_pattern_size_a),u_pattern_size_b:new a.bU(I,l.u_pattern_size_b),u_scale_a:new a.bg(I,l.u_scale_a),u_scale_b:new a.bg(I,l.u_scale_b),u_pixel_coord_upper:new a.bU(I,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(I,l.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bg(I,l.u_tile_units_to_pixels)}),terrain:(I,l)=>({u_texture:new a.bP(I,l.u_texture),u_ele_delta:new a.bg(I,l.u_ele_delta),u_fog_matrix:new a.bR(I,l.u_fog_matrix),u_fog_color:new a.bQ(I,l.u_fog_color),u_fog_ground_blend:new a.bg(I,l.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bg(I,l.u_fog_ground_blend_opacity),u_horizon_color:new a.bQ(I,l.u_horizon_color),u_horizon_fog_blend:new a.bg(I,l.u_horizon_fog_blend),u_is_globe_mode:new a.bg(I,l.u_is_globe_mode)}),terrainDepth:(I,l)=>({u_ele_delta:new a.bg(I,l.u_ele_delta)}),terrainCoords:(I,l)=>({u_texture:new a.bP(I,l.u_texture),u_terrain_coords_id:new a.bg(I,l.u_terrain_coords_id),u_ele_delta:new a.bg(I,l.u_ele_delta)}),projectionErrorMeasurement:(I,l)=>({u_input:new a.bg(I,l.u_input),u_output_expected:new a.bg(I,l.u_output_expected)}),atmosphere:(I,l)=>({u_sun_pos:new a.bT(I,l.u_sun_pos),u_atmosphere_blend:new a.bg(I,l.u_atmosphere_blend),u_globe_position:new a.bT(I,l.u_globe_position),u_globe_radius:new a.bg(I,l.u_globe_radius),u_inv_proj_matrix:new a.bR(I,l.u_inv_proj_matrix)}),sky:(I,l)=>({u_sky_color:new a.bQ(I,l.u_sky_color),u_horizon_color:new a.bQ(I,l.u_horizon_color),u_horizon:new a.bU(I,l.u_horizon),u_horizon_normal:new a.bU(I,l.u_horizon_normal),u_sky_horizon_blend:new a.bg(I,l.u_sky_horizon_blend),u_sky_blend:new a.bg(I,l.u_sky_blend)})};class kd{constructor(l,p,C){this.context=l;const E=l.gl;this.buffer=E.createBuffer(),this.dynamicDraw=!!C,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),E.bufferData(E.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const p=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ss={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class xu{constructor(l,p,C,E){this.length=p.length,this.attributes=C,this.itemSize=p.bytesPerElement,this.dynamicDraw=E,this.context=l;const T=l.gl;this.buffer=T.createBuffer(),l.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,p){for(let C=0;C<this.attributes.length;C++){const E=p.attributes[this.attributes[C].name];E!==void 0&&l.enableVertexAttribArray(E)}}setVertexAttribPointers(l,p,C){for(let E=0;E<this.attributes.length;E++){const T=this.attributes[E],U=p.attributes[T.name];U!==void 0&&l.vertexAttribPointer(U,T.components,l[Ss[T.type]],!1,this.itemSize,T.offset+this.itemSize*(C||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class po{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Sm extends po{getDefault(){return a.bf.transparent}set(l){const p=this.current;(l.r!==p.r||l.g!==p.g||l.b!==p.b||l.a!==p.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Em extends po{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class e0 extends po{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class _p extends po{getDefault(){return[!0,!0,!0,!0]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||l[3]!==p[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class _c extends po{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class Ut extends po{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class an extends po{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const p=this.current;(l.func!==p.func||l.ref!==p.ref||l.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class nn extends po{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class pi extends po{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=l,this.dirty=!1}}class yr extends po{getDefault(){return[0,1]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Yr extends po{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=l,this.dirty=!1}}class Ys extends po{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class Qo extends po{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.BLEND):p.disable(p.BLEND),this.current=l,this.dirty=!1}}class Td extends po{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class vA extends po{getDefault(){return a.bf.transparent}set(l){const p=this.current;(l.r!==p.r||l.g!==p.g||l.b!==p.b||l.a!==p.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class zl extends po{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class Rd extends po{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=l,this.dirty=!1}}class Gh extends po{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class bA extends po{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class th extends po{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class au extends po{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Do extends po{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||l[3]!==p[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class t0 extends po{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class If extends po{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Ua extends po{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class Dd extends po{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class lu extends po{getDefault(){return null}set(l){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class CA extends po{getDefault(){return null}set(l){var p;if(l===this.current&&!this.dirty)return;const C=this.gl;$e(C)?C.bindVertexArray(l):(p=C.getExtension("OES_vertex_array_object"))===null||p===void 0||p.bindVertexArrayOES(l),this.current=l,this.dirty=!1}}class nh extends po{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class xc extends po{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class Mc extends po{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class Xc extends po{constructor(l,p){super(l),this.context=l,this.parent=p}getDefault(){return null}}class Jc extends Xc{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class xp extends Xc{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class br extends Xc{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}const Zu="Framebuffer is not complete";class S1{constructor(l,p,C,E,T){this.context=l,this.width=p,this.height=C;const U=l.gl,Q=this.framebuffer=U.createFramebuffer();if(this.colorAttachment=new Jc(l,Q),E)this.depthAttachment=T?new br(l,Q):new xp(l,Q);else if(T)throw new Error("Stencil cannot be set without depth");if(U.checkFramebufferStatus(U.FRAMEBUFFER)!==U.FRAMEBUFFER_COMPLETE)throw new Error(Zu)}destroy(){const l=this.context.gl,p=this.colorAttachment.get();if(p&&l.deleteTexture(p),this.depthAttachment){const C=this.depthAttachment.get();C&&l.deleteRenderbuffer(C)}l.deleteFramebuffer(this.framebuffer)}}class fl{constructor(l){var p,C;if(this.gl=l,this.clearColor=new Sm(this),this.clearDepth=new Em(this),this.clearStencil=new e0(this),this.colorMask=new _p(this),this.depthMask=new _c(this),this.stencilMask=new Ut(this),this.stencilFunc=new an(this),this.stencilOp=new nn(this),this.stencilTest=new pi(this),this.depthRange=new yr(this),this.depthTest=new Yr(this),this.depthFunc=new Ys(this),this.blend=new Qo(this),this.blendFunc=new Td(this),this.blendColor=new vA(this),this.blendEquation=new zl(this),this.cullFace=new Rd(this),this.cullFaceSide=new Gh(this),this.frontFace=new bA(this),this.program=new th(this),this.activeTexture=new au(this),this.viewport=new Do(this),this.bindFramebuffer=new t0(this),this.bindRenderbuffer=new If(this),this.bindTexture=new Ua(this),this.bindVertexBuffer=new Dd(this),this.bindElementBuffer=new lu(this),this.bindVertexArray=new CA(this),this.pixelStoreUnpack=new nh(this),this.pixelStoreUnpackPremultiplyAlpha=new xc(this),this.pixelStoreUnpackFlipY=new Mc(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),$e(l)){this.HALF_FLOAT=l.HALF_FLOAT;const E=l.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(p=l.RGBA16F)!==null&&p!==void 0?p:E?.RGBA16F_EXT,this.RGB16F=(C=l.RGB16F)!==null&&C!==void 0?C:E?.RGB16F_EXT,l.getExtension("EXT_color_buffer_float")}else{l.getExtension("EXT_color_buffer_half_float"),l.getExtension("OES_texture_half_float_linear");const E=l.getExtension("OES_texture_half_float");this.HALF_FLOAT=E?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,p){return new kd(this,l,p)}createVertexBuffer(l,p,C){return new xu(this,l,p,C)}createRenderbuffer(l,p,C){const E=this.gl,T=E.createRenderbuffer();return this.bindRenderbuffer.set(T),E.renderbufferStorage(E.RENDERBUFFER,l,p,C),this.bindRenderbuffer.set(null),T}createFramebuffer(l,p,C,E){return new S1(this,l,p,C,E)}clear({color:l,depth:p,stencil:C}){const E=this.gl;let T=0;l&&(T|=E.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(T|=E.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),C!==void 0&&(T|=E.STENCIL_BUFFER_BIT,this.clearStencil.set(C),this.stencilMask.set(255)),E.clear(T)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){a.bH(l.blendFunction,lr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}createVertexArray(){var l;return $e(this.gl)?this.gl.createVertexArray():(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.createVertexArrayOES()}deleteVertexArray(l){var p;return $e(this.gl)?this.gl.deleteVertexArray(l):(p=this.gl.getExtension("OES_vertex_array_object"))===null||p===void 0?void 0:p.deleteVertexArrayOES(l)}unbindVAO(){this.bindVertexArray.set(null)}}let jl;function Xu(I,l,p,C,E){const T=I.context,U=I.transform,Q=T.gl,Z=I.useProgram("collisionBox"),ae=[];let ce=0,Ce=0;for(let tt=0;tt<C.length;tt++){const ot=C[tt],nt=l.getTile(ot).getBucket(p);if(!nt)continue;const ct=E?nt.textCollisionBox:nt.iconCollisionBox,gt=nt.collisionCircleArray;gt.length>0&&(ae.push({circleArray:gt,circleOffset:Ce,coord:ot}),ce+=gt.length/4,Ce=ce),ct&&Z.draw(T,Q.LINES,Jn.disabled,X.disabled,I.colorModeForRenderPass(),wi.disabled,Bd(I.transform),I.style.map.terrain&&I.style.map.terrain.getTerrainData(ot),U.getProjectionData({overscaledTileID:ot,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),p.id,ct.layoutVertexBuffer,ct.indexBuffer,ct.segments,null,I.transform.zoom,null,null,ct.collisionVertexBuffer)}if(!E||!ae.length)return;const fe=I.useProgram("collisionCircle"),Re=new a.b$;Re.resize(4*ce),Re._trim();let Ge=0;for(const tt of ae)for(let ot=0;ot<tt.circleArray.length/4;ot++){const nt=4*ot,ct=tt.circleArray[nt+0],gt=tt.circleArray[nt+1],xt=tt.circleArray[nt+2],ht=tt.circleArray[nt+3];Re.emplace(Ge++,ct,gt,xt,ht,0),Re.emplace(Ge++,ct,gt,xt,ht,1),Re.emplace(Ge++,ct,gt,xt,ht,2),Re.emplace(Ge++,ct,gt,xt,ht,3)}(!jl||jl.length<2*ce)&&(jl=(function(tt){const ot=2*tt,nt=new a.c1;nt.resize(ot),nt._trim();for(let ct=0;ct<ot;ct++){const gt=6*ct;nt.uint16[gt+0]=4*ct+0,nt.uint16[gt+1]=4*ct+1,nt.uint16[gt+2]=4*ct+2,nt.uint16[gt+3]=4*ct+2,nt.uint16[gt+4]=4*ct+3,nt.uint16[gt+5]=4*ct+0}return nt})(ce));const Ze=T.createIndexBuffer(jl,!0),Xe=T.createVertexBuffer(Re,a.c0.members,!0);for(const tt of ae){const ot=_m(I.transform);fe.draw(T,Q.TRIANGLES,Jn.disabled,X.disabled,I.colorModeForRenderPass(),wi.disabled,ot,I.style.map.terrain&&I.style.map.terrain.getTerrainData(tt.coord),null,p.id,Xe,Ze,a.aM.simpleSegment(0,2*tt.circleOffset,tt.circleArray.length,tt.circleArray.length/2),null,I.transform.zoom,null,null,null)}Xe.destroy(),Ze.destroy()}const E1=a.ag(new Float32Array(16));function Mp(I,l,p,C,E,T){const{horizontalAlign:U,verticalAlign:Q}=a.aH(I);return new a.P((-(U-.5)*l/E+C[0])*T,(-(Q-.5)*p/E+C[1])*T)}function Pd(I,l,p,C,E,T){const U=l.tileAnchorPoint.add(new a.P(l.translation[0],l.translation[1]));if(l.pitchWithMap){let Q=C.mult(T);p||(Q=Q.rotate(-E));const Z=U.add(Q);return Pi(Z.x,Z.y,l.pitchedLabelPlaneMatrix,l.getElevation).point}if(p){const Q=nr(l.tileAnchorPoint.x+1,l.tileAnchorPoint.y,l).point.sub(I),Z=Math.atan(Q.y/Q.x)+(Q.x<0?Math.PI:0);return I.add(C.rotate(Z))}return I.add(C)}function Wh(I,l,p,C,E,T,U,Q,Z,ae,ce,Ce){const fe=I.text.placedSymbolArray,Re=I.text.dynamicLayoutVertexArray,Ge=I.icon.dynamicLayoutVertexArray,Ze={};Re.clear();for(let Xe=0;Xe<fe.length;Xe++){const tt=fe.get(Xe),ot=tt.hidden||!tt.crossTileID||I.allowVerticalPlacement&&!tt.placedOrientation?null:C[tt.crossTileID];if(ot){const nt=new a.P(tt.anchorX,tt.anchorY),ct={getElevation:Ce,width:E.width,height:E.height,pitchedLabelPlaneMatrix:T,pitchWithMap:p,transform:E,tileAnchorPoint:nt,translation:ae,unwrappedTileID:ce},gt=p?Al(nt.x,nt.y,ct):nr(nt.x,nt.y,ct),xt=Zt(E.cameraToCenterDistance,gt.signedDistanceFromCamera);let ht=a.ap(I.textSizeData,Q,tt)*xt/a.aB;p&&(ht*=I.tilePixelRatio/U);const{width:Et,height:Qt,anchor:Kt,textOffset:Nt,textBoxScale:Wt}=ot,In=Mp(Kt,Et,Qt,Nt,Wt,ht),kn=E.getPitchedTextCorrection(nt.x+ae[0],nt.y+ae[1],ce),cn=Pd(gt.point,ct,l,In,-E.bearingInRadians,kn),Qn=I.allowVerticalPlacement&&tt.placedOrientation===a.ao.vertical?Math.PI/2:0;for(let Xi=0;Xi<tt.numGlyphs;Xi++)a.av(Re,cn,Qn);Z&&tt.associatedIconIndex>=0&&(Ze[tt.associatedIconIndex]={shiftedAnchor:cn,angle:Qn})}else Qs(tt.numGlyphs,Re)}if(Z){Ge.clear();const Xe=I.icon.placedSymbolArray;for(let tt=0;tt<Xe.length;tt++){const ot=Xe.get(tt);if(ot.hidden)Qs(ot.numGlyphs,Ge);else{const nt=Ze[tt];if(nt)for(let ct=0;ct<ot.numGlyphs;ct++)a.av(Ge,nt.shiftedAnchor,nt.angle);else Qs(ot.numGlyphs,Ge)}}I.icon.dynamicLayoutVertexBuffer.updateData(Ge)}I.text.dynamicLayoutVertexBuffer.updateData(Re)}function Qh(I,l,p){return p.iconsInText&&l?"symbolTextAndIcon":I?"symbolSDF":"symbolIcon"}function ih(I,l,p,C,E,T,U,Q,Z,ae,ce,Ce,fe){const Re=I.context,Ge=Re.gl,Ze=I.transform,Xe=Q==="map",tt=Z==="map",ot=Q!=="viewport"&&p.layout.get("symbol-placement")!=="point",nt=Xe&&!tt&&!ot,ct=!p.layout.get("symbol-sort-key").isConstant();let gt=!1;const xt=I.getDepthModeForSublayer(0,Jn.ReadOnly),ht=p._unevaluatedLayout.hasValue("text-variable-anchor")||p._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Et=[],Qt=Ze.getCircleRadiusCorrection();for(const Kt of C){const Nt=l.getTile(Kt),Wt=Nt.getBucket(p);if(!Wt)continue;const In=E?Wt.text:Wt.icon;if(!In||!In.segments.get().length||!In.hasVisibleVertices)continue;const kn=In.programConfigurations.get(p.id),cn=E||Wt.sdfIcons,Qn=E?Wt.textSizeData:Wt.iconSizeData,Xi=tt||Ze.pitch!==0,mo=I.useProgram(Qh(cn,E,Wt),kn),os=a.an(Qn,Ze.zoom),Uo=I.style.map.terrain&&I.style.map.terrain.getTerrainData(Kt);let ds,Jo,ya,ss,Bo=[0,0],so=null;if(E)Jo=Nt.glyphAtlasTexture,ya=Ge.LINEAR,ds=Nt.glyphAtlasTexture.size,Wt.iconsInText&&(Bo=Nt.imageAtlasTexture.size,so=Nt.imageAtlasTexture,ss=Xi||I.options.rotating||I.options.zooming||Qn.kind==="composite"||Qn.kind==="camera"?Ge.LINEAR:Ge.NEAREST);else{const Co=p.layout.get("icon-size").constantOr(0)!==1||Wt.iconsNeedLinear;Jo=Nt.imageAtlasTexture,ya=cn||I.options.rotating||I.options.zooming||Co||Xi?Ge.LINEAR:Ge.NEAREST,ds=Nt.imageAtlasTexture.size}const Br=a.aC(Nt,1,I.transform.zoom),fs=Ti(Xe,I.transform,Br),sc=a.L();a.aq(sc,fs);const dh=tr(tt,Xe,I.transform,Br),Sc=a.aD(Ze,Nt,T,U),Qd=Ze.getProjectionData({overscaledTileID:Kt,applyGlobeMatrix:!fe,applyTerrainMatrix:!0}),Kf=ht&&Wt.hasTextData(),fh=p.layout.get("icon-text-fit")!=="none"&&Kf&&Wt.hasIconData();if(ot){const Co=I.style.map.terrain?(ql,ps)=>I.style.map.terrain.getElevation(Kt,ql,ps):null,Ko=p.layout.get("text-rotation-alignment")==="map";Zi(Wt,I,E,fs,sc,tt,ae,Ko,Kt.toUnwrapped(),Ze.width,Ze.height,Sc,Co)}const ph=E&&ht||fh,Au=ot||ph?E1:tt?fs:I.transform.clipSpaceToPixelsMatrix,mh=cn&&p.paint.get(E?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ec;Ec=cn?Wt.iconsInText?eh(Qn.kind,os,nt,tt,ot,ph,I,Au,dh,Sc,ds,Bo,Qt):wm(Qn.kind,os,nt,tt,ot,ph,I,Au,dh,Sc,E,ds,0,Qt):Nh(Qn.kind,os,nt,tt,ot,ph,I,Au,dh,Sc,E,ds,Qt);const kA={program:mo,buffers:In,uniformValues:Ec,projectionData:Qd,atlasTexture:Jo,atlasTextureIcon:so,atlasInterpolation:ya,atlasInterpolationIcon:ss,isSDF:cn,hasHalo:mh};if(ct&&Wt.canOverlap){gt=!0;const Co=In.segments.get();for(const Ko of Co)Et.push({segments:new a.aM([Ko]),sortKey:Ko.sortKey,state:kA,terrainData:Uo})}else Et.push({segments:In.segments,sortKey:0,state:kA,terrainData:Uo})}gt&&Et.sort(((Kt,Nt)=>Kt.sortKey-Nt.sortKey));for(const Kt of Et){const Nt=Kt.state;if(Re.activeTexture.set(Ge.TEXTURE0),Nt.atlasTexture.bind(Nt.atlasInterpolation,Ge.CLAMP_TO_EDGE),Nt.atlasTextureIcon&&(Re.activeTexture.set(Ge.TEXTURE1),Nt.atlasTextureIcon&&Nt.atlasTextureIcon.bind(Nt.atlasInterpolationIcon,Ge.CLAMP_TO_EDGE)),Nt.isSDF){const Wt=Nt.uniformValues;Nt.hasHalo&&(Wt.u_is_halo=1,kf(Nt.buffers,Kt.segments,p,I,Nt.program,xt,ce,Ce,Wt,Nt.projectionData,Kt.terrainData)),Wt.u_is_halo=0}kf(Nt.buffers,Kt.segments,p,I,Nt.program,xt,ce,Ce,Nt.uniformValues,Nt.projectionData,Kt.terrainData)}}function kf(I,l,p,C,E,T,U,Q,Z,ae,ce){const Ce=C.context;E.draw(Ce,Ce.gl.TRIANGLES,T,U,Q,wi.backCCW,Z,ce,ae,p.id,I.layoutVertexBuffer,I.indexBuffer,l,p.paint,C.transform.zoom,I.programConfigurations.get(p.id),I.dynamicLayoutVertexBuffer,I.opacityVertexBuffer)}function uu(I,l,p,C,E){const T=I.context,U=T.gl,Q=X.disabled,Z=new lr([U.ONE,U.ONE],a.bf.transparent,[!0,!0,!0,!0]),ae=l.getBucket(p);if(!ae)return;const ce=C.key;let Ce=p.heatmapFbos.get(ce);Ce||(Ce=_A(T,l.tileSize,l.tileSize),p.heatmapFbos.set(ce,Ce)),T.bindFramebuffer.set(Ce.framebuffer),T.viewport.set([0,0,l.tileSize,l.tileSize]),T.clear({color:a.bf.transparent});const fe=ae.programConfigurations.get(p.id),Re=I.useProgram("heatmap",fe,!E),Ge=I.transform.getProjectionData({overscaledTileID:l.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ze=I.style.map.terrain.getTerrainData(C);Re.draw(T,U.TRIANGLES,Jn.disabled,Q,Z,wi.disabled,zh(l,I.transform.zoom,p.paint.get("heatmap-intensity"),1),Ze,Ge,p.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,p.paint,I.transform.zoom,fe)}function Ud(I,l,p,C,E){const T=I.context,U=T.gl,Q=I.transform;T.setColorMode(I.colorModeForRenderPass());const Z=Es(T,l),ae=p.key,ce=l.heatmapFbos.get(ae);if(!ce)return;T.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,ce.colorAttachment.get()),T.activeTexture.set(U.TEXTURE1),Z.bind(U.LINEAR,U.CLAMP_TO_EDGE);const Ce=Q.getProjectionData({overscaledTileID:p,applyTerrainMatrix:E,applyGlobeMatrix:!C});I.useProgram("heatmapTexture").draw(T,U.TRIANGLES,Jn.disabled,X.disabled,I.colorModeForRenderPass(),wi.disabled,su(I,l,0,1),null,Ce,l.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments,l.paint,Q.zoom),ce.destroy(),l.heatmapFbos.delete(ae)}function _A(I,l,p){var C,E;const T=I.gl,U=T.createTexture();T.bindTexture(T.TEXTURE_2D,U),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.LINEAR);const Q=(C=I.HALF_FLOAT)!==null&&C!==void 0?C:T.UNSIGNED_BYTE,Z=(E=I.RGBA16F)!==null&&E!==void 0?E:T.RGBA;T.texImage2D(T.TEXTURE_2D,0,Z,l,p,0,T.RGBA,Q,null);const ae=I.createFramebuffer(l,p,!1,!1);return ae.colorAttachment.set(U),ae}function Es(I,l){return l.colorRampTexture||(l.colorRampTexture=new a.T(I,l.colorRamp,I.gl.RGBA)),l.colorRampTexture}function $s(I,l,p,C,E){if(!p||!C||!C.imageAtlas)return;const T=C.imageAtlas.patternPositions;let U=T[p.to.toString()],Q=T[p.from.toString()];if(!U&&Q&&(U=Q),!Q&&U&&(Q=U),!U||!Q){const Z=E.getPaintProperty(l);U=T[Z],Q=T[Z]}U&&Q&&I.setConstantPatternPositions(U,Q)}function pl(I,l,p,C,E,T,U,Q){const Z=I.context.gl,ae="fill-pattern",ce=p.paint.get(ae),Ce=ce&&ce.constantOr(1),fe=p.getCrossfadeParameters();let Re,Ge,Ze,Xe,tt;const ot=I.transform,nt=p.paint.get("fill-translate"),ct=p.paint.get("fill-translate-anchor");U?(Ge=Ce&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Re=Z.LINES):(Ge=Ce?"fillPattern":"fill",Re=Z.TRIANGLES);const gt=ce.constantOr(null);for(const xt of C){const ht=l.getTile(xt);if(Ce&&!ht.patternsLoaded())continue;const Et=ht.getBucket(p);if(!Et)continue;const Qt=Et.programConfigurations.get(p.id),Kt=I.useProgram(Ge,Qt),Nt=I.style.map.terrain&&I.style.map.terrain.getTerrainData(xt);Ce&&(I.context.activeTexture.set(Z.TEXTURE0),ht.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),Qt.updatePaintBuffers(fe)),$s(Qt,ae,gt,ht,p);const Wt=ot.getProjectionData({overscaledTileID:xt,applyGlobeMatrix:!Q,applyTerrainMatrix:!0}),In=a.aD(ot,ht,nt,ct);if(U){Xe=Et.indexBuffer2,tt=Et.segments2;const cn=[Z.drawingBufferWidth,Z.drawingBufferHeight];Ze=Ge==="fillOutlinePattern"&&Ce?Od(I,fe,ht,cn,In):Ed(cn,In)}else Xe=Et.indexBuffer,tt=Et.segments,Ze=Ce?gA(I,fe,ht,In):{u_fill_translate:In};const kn=I.stencilModeForClipping(xt);Kt.draw(I.context,Re,E,kn,T,wi.backCCW,Ze,Nt,Wt,p.id,Et.layoutVertexBuffer,Xe,tt,p.paint,I.transform.zoom,Qt)}}function Nl(I,l,p,C,E,T,U,Q){const Z=I.context,ae=Z.gl,ce="fill-extrusion-pattern",Ce=p.paint.get(ce),fe=Ce.constantOr(1),Re=p.getCrossfadeParameters(),Ge=p.paint.get("fill-extrusion-opacity"),Ze=Ce.constantOr(null),Xe=I.transform;for(const tt of C){const ot=l.getTile(tt),nt=ot.getBucket(p);if(!nt)continue;const ct=I.style.map.terrain&&I.style.map.terrain.getTerrainData(tt),gt=nt.programConfigurations.get(p.id),xt=I.useProgram(fe?"fillExtrusionPattern":"fillExtrusion",gt);fe&&(I.context.activeTexture.set(ae.TEXTURE0),ot.imageAtlasTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),gt.updatePaintBuffers(Re));const ht=Xe.getProjectionData({overscaledTileID:tt,applyGlobeMatrix:!Q,applyTerrainMatrix:!0});$s(gt,ce,Ze,ot,p);const Et=a.aD(Xe,ot,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),Qt=p.paint.get("fill-extrusion-vertical-gradient"),Kt=fe?Cm(I,Qt,Ge,Et,tt,Re,ot):Cc(I,Qt,Ge,Et);xt.draw(Z,Z.gl.TRIANGLES,E,T,U,wi.backCCW,Kt,ct,ht,p.id,nt.layoutVertexBuffer,nt.indexBuffer,nt.segments,p.paint,I.transform.zoom,gt,I.style.map.terrain&&nt.centroidVertexBuffer)}}function eA(I,l,p,C,E,T,U,Q,Z){var ae;const ce=I.style.projection,Ce=I.context,fe=I.transform,Re=Ce.gl,Ge=[`#define NUM_ILLUMINATION_SOURCES ${p.paint.get("hillshade-highlight-color").values.length}`],Ze=I.useProgram("hillshade",null,!1,Ge),Xe=!I.options.moving;for(const tt of C){const ot=l.getTile(tt),nt=ot.fbo;if(!nt)continue;const ct=ce.getMeshFromTileID(Ce,tt.canonical,Q,!0,"raster"),gt=(ae=I.style.map.terrain)===null||ae===void 0?void 0:ae.getTerrainData(tt);Ce.activeTexture.set(Re.TEXTURE0),Re.bindTexture(Re.TEXTURE_2D,nt.colorAttachment.get());const xt=fe.getProjectionData({overscaledTileID:tt,aligned:Xe,applyGlobeMatrix:!Z,applyTerrainMatrix:!0});Ze.draw(Ce,Re.TRIANGLES,T,E[tt.overscaledZ],U,wi.backCCW,Hg(I,ot,p),gt,xt,p.id,ct.vertexBuffer,ct.indexBuffer,ct.segments)}}function Gl(I,l,p,C,E,T,U,Q,Z){var ae;const ce=I.style.projection,Ce=I.context,fe=I.transform,Re=Ce.gl,Ge=I.useProgram("colorRelief"),Ze=!I.options.moving;let Xe=!0,tt=0;for(const ot of C){const nt=l.getTile(ot),ct=nt.dem;if(Xe){const Kt=Re.getParameter(Re.MAX_TEXTURE_SIZE),{elevationTexture:Nt,colorTexture:Wt}=p.getColorRampTextures(Ce,Kt,ct.getUnpackVector());Ce.activeTexture.set(Re.TEXTURE1),Nt.bind(Re.NEAREST,Re.CLAMP_TO_EDGE),Ce.activeTexture.set(Re.TEXTURE4),Wt.bind(Re.LINEAR,Re.CLAMP_TO_EDGE),Xe=!1,tt=Nt.size[0]}if(!ct||!ct.data)continue;const gt=ct.stride,xt=ct.getPixels();if(Ce.activeTexture.set(Re.TEXTURE0),Ce.pixelStoreUnpackPremultiplyAlpha.set(!1),nt.demTexture=nt.demTexture||I.getTileTexture(gt),nt.demTexture){const Kt=nt.demTexture;Kt.update(xt,{premultiply:!1}),Kt.bind(Re.LINEAR,Re.CLAMP_TO_EDGE)}else nt.demTexture=new a.T(Ce,xt,Re.RGBA,{premultiply:!1}),nt.demTexture.bind(Re.LINEAR,Re.CLAMP_TO_EDGE);const ht=ce.getMeshFromTileID(Ce,ot.canonical,Q,!0,"raster"),Et=(ae=I.style.map.terrain)===null||ae===void 0?void 0:ae.getTerrainData(ot),Qt=fe.getProjectionData({overscaledTileID:ot,aligned:Ze,applyGlobeMatrix:!Z,applyTerrainMatrix:!0});Ge.draw(Ce,Re.TRIANGLES,T,E[ot.overscaledZ],U,wi.backCCW,xm(p,nt.dem,tt),Et,Qt,p.id,ht.vertexBuffer,ht.indexBuffer,ht.segments)}}const Mu=[new a.P(0,0),new a.P(a.$,0),new a.P(a.$,a.$),new a.P(0,a.$)];function Ol(I,l,p,C,E,T,U,Q,Z=!1,ae=!1){const ce=C[C.length-1].overscaledZ,Ce=I.context,fe=Ce.gl,Re=I.useProgram("raster"),Ge=I.transform,Ze=I.style.projection,Xe=I.colorModeForRenderPass(),tt=!I.options.moving;for(const ot of C){const nt=I.getDepthModeForSublayer(ot.overscaledZ-ce,p.paint.get("raster-opacity")===1?Jn.ReadWrite:Jn.ReadOnly,fe.LESS),ct=l.getTile(ot);ct.registerFadeDuration(p.paint.get("raster-fade-duration"));const gt=l.findLoadedParent(ot,0),xt=l.findLoadedSibling(ot),ht=Kd(ct,gt||xt||null,l,p,I.transform,I.style.map.terrain);let Et,Qt;const Kt=p.paint.get("raster-resampling")==="nearest"?fe.NEAREST:fe.LINEAR;Ce.activeTexture.set(fe.TEXTURE0),ct.texture.bind(Kt,fe.CLAMP_TO_EDGE,fe.LINEAR_MIPMAP_NEAREST),Ce.activeTexture.set(fe.TEXTURE1),gt?(gt.texture.bind(Kt,fe.CLAMP_TO_EDGE,fe.LINEAR_MIPMAP_NEAREST),Et=Math.pow(2,gt.tileID.overscaledZ-ct.tileID.overscaledZ),Qt=[ct.tileID.canonical.x*Et%1,ct.tileID.canonical.y*Et%1]):ct.texture.bind(Kt,fe.CLAMP_TO_EDGE,fe.LINEAR_MIPMAP_NEAREST),ct.texture.useMipmap&&Ce.extTextureFilterAnisotropic&&I.transform.pitch>20&&fe.texParameterf(fe.TEXTURE_2D,Ce.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ce.extTextureFilterAnisotropicMax);const Nt=I.style.map.terrain&&I.style.map.terrain.getTerrainData(ot),Wt=Ge.getProjectionData({overscaledTileID:ot,aligned:tt,applyGlobeMatrix:!ae,applyTerrainMatrix:!0}),In=Id(Qt||[0,0],Et||1,ht,p,Q),kn=Ze.getMeshFromTileID(Ce,ot.canonical,T,U,"raster");Re.draw(Ce,fe.TRIANGLES,nt,E?E[ot.overscaledZ]:X.disabled,Xe,Z?wi.frontCCW:wi.backCCW,In,Nt,Wt,p.id,kn.vertexBuffer,kn.indexBuffer,kn.segments)}}function Kd(I,l,p,C,E,T){const U=C.paint.get("raster-fade-duration");if(!T&&U>0){const Q=M.now(),Z=(Q-I.timeAdded)/U,ae=l?(Q-l.timeAdded)/U:-1,ce=p.getSource(),Ce=Pt(E,{tileSize:ce.tileSize,roundZoom:ce.roundZoom}),fe=!l||Math.abs(l.tileID.overscaledZ-Ce)>Math.abs(I.tileID.overscaledZ-Ce),Re=fe&&I.refreshedUponExpiration?1:a.ah(fe?Z:1-ae,0,1);return I.refreshedUponExpiration&&Z>=1&&(I.refreshedUponExpiration=!1),l?{opacity:1,mix:1-Re}:{opacity:Re,mix:0}}return{opacity:1,mix:0}}const xA=new a.bf(1,0,0,1),qh=new a.bf(0,1,0,1),Ld=new a.bf(0,0,1,1),na=new a.bf(1,0,1,1),Oo=new a.bf(0,1,1,1);function ro(I,l,p,C){oo(I,0,l+p/2,I.transform.width,p,C)}function MA(I,l,p,C){oo(I,l-p/2,0,p,I.transform.height,C)}function oo(I,l,p,C,E,T){const U=I.context,Q=U.gl;Q.enable(Q.SCISSOR_TEST),Q.scissor(l*I.pixelRatio,p*I.pixelRatio,C*I.pixelRatio,E*I.pixelRatio),U.clear({color:T}),Q.disable(Q.SCISSOR_TEST)}function rh(I,l,p){const C=I.context,E=C.gl,T=I.useProgram("debug"),U=Jn.disabled,Q=X.disabled,Z=I.colorModeForRenderPass(),ae="$debug",ce=I.style.map.terrain&&I.style.map.terrain.getTerrainData(p);C.activeTexture.set(E.TEXTURE0);const Ce=l.getTileByID(p.key).latestRawTileData,fe=Math.floor((Ce&&Ce.byteLength||0)/1024),Re=l.getTile(p).tileSize,Ge=512/Math.min(Re,512)*(p.overscaledZ/I.transform.zoom)*.5;let Ze=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(Ze+=` => ${p.overscaledZ}`),(function(tt,ot){tt.initDebugOverlayCanvas();const nt=tt.debugOverlayCanvas,ct=tt.context.gl,gt=tt.debugOverlayCanvas.getContext("2d");gt.clearRect(0,0,nt.width,nt.height),gt.shadowColor="white",gt.shadowBlur=2,gt.lineWidth=1.5,gt.strokeStyle="white",gt.textBaseline="top",gt.font="bold 36px Open Sans, sans-serif",gt.fillText(ot,5,5),gt.strokeText(ot,5,5),tt.debugOverlayTexture.update(nt),tt.debugOverlayTexture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE)})(I,`${Ze} ${fe}kB`);const Xe=I.transform.getProjectionData({overscaledTileID:p,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(C,E.TRIANGLES,U,Q,lr.alphaBlended,wi.disabled,Fh(a.bf.transparent,Ge),null,Xe,ae,I.debugBuffer,I.quadTriangleIndexBuffer,I.debugSegments),T.draw(C,E.LINE_STRIP,U,Q,Z,wi.disabled,Fh(a.bf.red),ce,Xe,ae,I.debugBuffer,I.tileBorderIndexBuffer,I.debugSegments)}function Ka(I,l,p,C){const{isRenderingGlobe:E}=C,T=I.context,U=T.gl,Q=I.transform,Z=I.colorModeForRenderPass(),ae=I.getDepthModeFor3D(),ce=I.useProgram("terrain");T.bindFramebuffer.set(null),T.viewport.set([0,0,I.width,I.height]);for(const Ce of p){const fe=l.getTerrainMesh(Ce.tileID),Re=I.renderToTexture.getTexture(Ce),Ge=l.getTerrainData(Ce.tileID);T.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,Re.texture);const Ze=l.getMeshFrameDelta(Q.zoom),Xe=Q.calculateFogMatrix(Ce.tileID.toUnwrapped()),tt=ym(Ze,Xe,I.style.sky,Q.pitch,E),ot=Q.getProjectionData({overscaledTileID:Ce.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ce.draw(T,U.TRIANGLES,ae,X.disabled,Z,wi.backCCW,tt,Ge,ot,"terrain",fe.vertexBuffer,fe.indexBuffer,fe.segments)}}function Yh(I,l){if(!l.mesh){const p=new a.aL;p.emplaceBack(-1,-1),p.emplaceBack(1,-1),p.emplaceBack(1,1),p.emplaceBack(-1,1);const C=new a.aN;C.emplaceBack(0,1,2),C.emplaceBack(0,2,3),l.mesh=new ou(I.createVertexBuffer(p,Vo.members),I.createIndexBuffer(C),a.aM.simpleSegment(0,0,p.length,C.length))}return l.mesh}class oh{constructor(l,p){this.context=new fl(l),this.transform=p,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Fn.maxUnderzooming+Fn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Pa}resize(l,p,C){if(this.width=Math.floor(l*C),this.height=Math.floor(p*C),this.pixelRatio=C,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const E of this.style._order)this.style._layers[E].resize()}setup(){const l=this.context,p=new a.aL;p.emplaceBack(0,0),p.emplaceBack(a.$,0),p.emplaceBack(0,a.$),p.emplaceBack(a.$,a.$),this.tileExtentBuffer=l.createVertexBuffer(p,Vo.members),this.tileExtentSegments=a.aM.simpleSegment(0,0,4,2);const C=new a.aL;C.emplaceBack(0,0),C.emplaceBack(a.$,0),C.emplaceBack(0,a.$),C.emplaceBack(a.$,a.$),this.debugBuffer=l.createVertexBuffer(C,Vo.members),this.debugSegments=a.aM.simpleSegment(0,0,4,5);const E=new a.c6;E.emplaceBack(0,0,0,0),E.emplaceBack(a.$,0,a.$,0),E.emplaceBack(0,a.$,0,a.$),E.emplaceBack(a.$,a.$,a.$,a.$),this.rasterBoundsBuffer=l.createVertexBuffer(E,fv.members),this.rasterBoundsSegments=a.aM.simpleSegment(0,0,4,2);const T=new a.aL;T.emplaceBack(0,0),T.emplaceBack(a.$,0),T.emplaceBack(0,a.$),T.emplaceBack(a.$,a.$),this.rasterBoundsBufferPosOnly=l.createVertexBuffer(T,Vo.members),this.rasterBoundsSegmentsPosOnly=a.aM.simpleSegment(0,0,4,5);const U=new a.aL;U.emplaceBack(0,0),U.emplaceBack(1,0),U.emplaceBack(0,1),U.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(U,Vo.members),this.viewportSegments=a.aM.simpleSegment(0,0,4,2);const Q=new a.c7;Q.emplaceBack(0),Q.emplaceBack(1),Q.emplaceBack(3),Q.emplaceBack(2),Q.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(Q);const Z=new a.aN;Z.emplaceBack(1,0,2),Z.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(Z);const ae=this.context.gl;this.stencilClearMode=new X({func:ae.ALWAYS,mask:0},0,255,ae.ZERO,ae.ZERO,ae.ZERO),this.tileExtentMesh=new ou(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const l=this.context,p=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const C=a.L();a.bY(C,0,this.width,this.height,0,0,1),a.N(C,C,[p.drawingBufferWidth,p.drawingBufferHeight,0]);const E={mainMatrix:C,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:C};this.useProgram("clippingMask",null,!0).draw(l,p.TRIANGLES,Jn.disabled,this.stencilClearMode,lr.disabled,wi.disabled,null,null,E,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,p,C){if(this.currentStencilSource===l.source||!l.isTileClipped()||!p||!p.length)return;this.currentStencilSource=l.source,this.nextStencilID+p.length>256&&this.clearStencil();const E=this.context;E.setColorMode(lr.disabled),E.setDepthMode(Jn.disabled);const T={};for(const U of p)T[U.key]=this.nextStencilID++;this._renderTileMasks(T,p,C,!0),this._renderTileMasks(T,p,C,!1),this._tileClippingMaskIDs=T}_renderTileMasks(l,p,C,E){const T=this.context,U=T.gl,Q=this.style.projection,Z=this.transform,ae=this.useProgram("clippingMask");for(const ce of p){const Ce=l[ce.key],fe=this.style.map.terrain&&this.style.map.terrain.getTerrainData(ce),Re=Q.getMeshFromTileID(this.context,ce.canonical,E,!0,"stencil"),Ge=Z.getProjectionData({overscaledTileID:ce,applyGlobeMatrix:!C,applyTerrainMatrix:!0});ae.draw(T,U.TRIANGLES,Jn.disabled,new X({func:U.ALWAYS,mask:0},Ce,255,U.KEEP,U.KEEP,U.REPLACE),lr.disabled,C?wi.disabled:wi.backCCW,null,fe,Ge,"$clipping",Re.vertexBuffer,Re.indexBuffer,Re.segments)}}_renderTilesDepthBuffer(){const l=this.context,p=l.gl,C=this.style.projection,E=this.transform,T=this.useProgram("depth"),U=this.getDepthModeFor3D(),Q=st(E,{tileSize:E.tileSize});for(const Z of Q){const ae=this.style.map.terrain&&this.style.map.terrain.getTerrainData(Z),ce=C.getMeshFromTileID(this.context,Z.canonical,!0,!0,"raster"),Ce=E.getProjectionData({overscaledTileID:Z,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(l,p.TRIANGLES,U,X.disabled,lr.disabled,wi.backCCW,null,ae,Ce,"$clipping",ce.vertexBuffer,ce.indexBuffer,ce.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,p=this.context.gl;return new X({func:p.NOTEQUAL,mask:255},l,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(l){const p=this.context.gl;return new X({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,p.KEEP,p.KEEP,p.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(l){const p=this.context.gl,C=l.sort(((U,Q)=>Q.overscaledZ-U.overscaledZ)),E=C[C.length-1].overscaledZ,T=C[0].overscaledZ-E+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();const U={};for(let Q=0;Q<T;Q++)U[Q+E]=new X({func:p.GEQUAL,mask:255},Q+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=T,[U,C]}return[{[E]:X.disabled},C]}stencilConfigForOverlapTwoPass(l){const p=this.context.gl,C=l.sort(((U,Q)=>Q.overscaledZ-U.overscaledZ)),E=C[C.length-1].overscaledZ,T=C[0].overscaledZ-E+1;if(this.clearStencil(),T>1){const U={},Q={};for(let Z=0;Z<T;Z++)U[Z+E]=new X({func:p.GREATER,mask:255},T+1+Z,255,p.KEEP,p.KEEP,p.REPLACE),Q[Z+E]=new X({func:p.GREATER,mask:255},1+Z,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID=2*T+1,[U,Q,C]}return this.nextStencilID=3,[{[E]:new X({func:p.GREATER,mask:255},2,255,p.KEEP,p.KEEP,p.REPLACE)},{[E]:new X({func:p.GREATER,mask:255},1,255,p.KEEP,p.KEEP,p.REPLACE)},C]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new lr([l.CONSTANT_COLOR,l.ONE],new a.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?lr.unblended:lr.alphaBlended}getDepthModeForSublayer(l,p,C){if(!this.opaquePassEnabledForLayer())return Jn.disabled;const E=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new Jn(C||this.context.gl.LEQUAL,p,[E,E])}getDepthModeFor3D(){return new Jn(this.context.gl.LEQUAL,Jn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,p){var C,E;this.style=l,this.options=p,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(M.now()),this.imageManager.beginFrame();const T=this.style._order,U=this.style.sourceCaches,Q={},Z={},ae={},ce={isRenderingToTexture:!1,isRenderingGlobe:((C=l.projection)===null||C===void 0?void 0:C.transitionState)>0};for(const fe in U){const Re=U[fe];Re.used&&Re.prepare(this.context),Q[fe]=Re.getVisibleCoordinates(!1),Z[fe]=Q[fe].slice().reverse(),ae[fe]=Re.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let fe=0;fe<T.length;fe++)if(this.style._layers[T[fe]].is3D()){this.opaquePassCutoff=fe;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const fe of T){const Re=this.style._layers[fe];if(!Re.hasOffscreenPass()||Re.isHidden(this.transform.zoom))continue;const Ge=Z[Re.source];(Re.type==="custom"||Ge.length)&&this.renderLayer(this,U[Re.source],Re,Ge,ce)}if((E=this.style.projection)===null||E===void 0||E.updateGPUdependent({context:this.context,useProgram:fe=>this.useProgram(fe)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?a.bf.black:a.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(fe,Re){const Ge=fe.context,Ze=Ge.gl,Xe=((xt,ht,Et)=>{const Qt=Math.cos(ht.rollInRadians),Kt=Math.sin(ht.rollInRadians),Nt=Ve(ht),Wt=ht.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:xt.properties.get("sky-color"),u_horizon_color:xt.properties.get("horizon-color"),u_horizon:[(ht.width/2-Nt*Kt)*Et,(ht.height/2+Nt*Qt)*Et],u_horizon_normal:[-Kt,Qt],u_sky_horizon_blend:xt.properties.get("sky-horizon-blend")*ht.height/2*Et,u_sky_blend:Wt}})(Re,fe.style.map.transform,fe.pixelRatio),tt=new Jn(Ze.LEQUAL,Jn.ReadWrite,[0,1]),ot=X.disabled,nt=fe.colorModeForRenderPass(),ct=fe.useProgram("sky"),gt=Yh(Ge,Re);ct.draw(Ge,Ze.TRIANGLES,tt,ot,nt,wi.disabled,Xe,null,void 0,"sky",gt.vertexBuffer,gt.indexBuffer,gt.segments)})(this,this.style.sky),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){const fe=this.style._layers[T[this.currentLayer]],Re=U[fe.source],Ge=Q[fe.source];this._renderTileClippingMasks(fe,Ge,!1),this.renderLayer(this,Re,fe,Ge,ce)}this.renderPass="translucent";let Ce=!1;for(this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){const fe=this.style._layers[T[this.currentLayer]],Re=U[fe.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(fe,ce))continue;this.opaquePassEnabledForLayer()||Ce||(Ce=!0,ce.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Ge=(fe.type==="symbol"?ae:Z)[fe.source];this._renderTileClippingMasks(fe,Q[fe.source],!!this.renderToTexture),this.renderLayer(this,Re,fe,Ge,ce)}if(ce.isRenderingGlobe&&(function(fe,Re,Ge){const Ze=fe.context,Xe=Ze.gl,tt=fe.useProgram("atmosphere"),ot=new Jn(Xe.LEQUAL,Jn.ReadOnly,[0,1]),nt=fe.transform,ct=(function(Wt,In){const kn=Wt.properties.get("position"),cn=[-kn.x,-kn.y,-kn.z],Qn=a.ag(new Float64Array(16));return Wt.properties.get("anchor")==="map"&&(a.b6(Qn,Qn,In.rollInRadians),a.b7(Qn,Qn,-In.pitchInRadians),a.b6(Qn,Qn,In.bearingInRadians),a.b7(Qn,Qn,In.center.lat*Math.PI/180),a.bz(Qn,Qn,-In.center.lng*Math.PI/180)),a.c5(cn,cn,Qn),cn})(Ge,fe.transform),gt=nt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),xt=Re.properties.get("atmosphere-blend")*gt.projectionTransition;if(xt===0)return;const ht=ur(nt.worldSize,nt.center.lat),Et=nt.inverseProjectionMatrix,Qt=new Float64Array(4);Qt[3]=1,a.aw(Qt,Qt,nt.modelViewProjectionMatrix),Qt[0]/=Qt[3],Qt[1]/=Qt[3],Qt[2]/=Qt[3],Qt[3]=1,a.aw(Qt,Qt,Et),Qt[0]/=Qt[3],Qt[1]/=Qt[3],Qt[2]/=Qt[3],Qt[3]=1;const Kt=((Wt,In,kn,cn,Qn)=>({u_sun_pos:Wt,u_atmosphere_blend:In,u_globe_position:kn,u_globe_radius:cn,u_inv_proj_matrix:Qn}))(ct,xt,[Qt[0],Qt[1],Qt[2]],ht,Et),Nt=Yh(Ze,Re);tt.draw(Ze,Xe.TRIANGLES,ot,X.disabled,lr.alphaBlended,wi.disabled,Kt,null,null,"atmosphere",Nt.vertexBuffer,Nt.indexBuffer,Nt.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const fe=(function(Re,Ge){let Ze=null;const Xe=Object.values(Re._layers).flatMap((ct=>ct.source&&!ct.isHidden(Ge)?[Re.sourceCaches[ct.source]]:[])),tt=Xe.filter((ct=>ct.getSource().type==="vector")),ot=Xe.filter((ct=>ct.getSource().type!=="vector")),nt=ct=>{(!Ze||Ze.getSource().maxzoom<ct.getSource().maxzoom)&&(Ze=ct)};return tt.forEach((ct=>nt(ct))),Ze||ot.forEach((ct=>nt(ct))),Ze})(this.style,this.transform.zoom);fe&&(function(Re,Ge,Ze){for(let Xe=0;Xe<Ze.length;Xe++)rh(Re,Ge,Ze[Xe])})(this,fe,fe.getVisibleCoordinates())}this.options.showPadding&&(function(fe){const Re=fe.transform.padding;ro(fe,fe.transform.height-(Re.top||0),3,xA),ro(fe,Re.bottom||0,3,qh),MA(fe,Re.left||0,3,Ld),MA(fe,fe.transform.width-(Re.right||0),3,na);const Ge=fe.transform.centerPoint;(function(Ze,Xe,tt,ot){oo(Ze,Xe-1,tt-10,2,20,ot),oo(Ze,Xe-10,tt-1,20,2,ot)})(fe,Ge.x,fe.transform.height-Ge.y,Oo)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(l){if(!this.style||!this.style.map||!this.style.map.terrain)return;const p=this.terrainFacilitator.matrix,C=this.transform.modelViewProjectionMatrix;let E=this.terrainFacilitator.dirty;E||(E=l?!a.c8(p,C):!a.c9(p,C)),E||(E=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),E&&(a.ca(p,C),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(T,U){const Q=T.context,Z=Q.gl,ae=T.transform,ce=lr.unblended,Ce=new Jn(Z.LEQUAL,Jn.ReadWrite,[0,1]),fe=U.sourceCache.getRenderableTiles(),Re=T.useProgram("terrainDepth");Q.bindFramebuffer.set(U.getFramebuffer("depth").framebuffer),Q.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),Q.clear({color:a.bf.transparent,depth:1});for(const Ge of fe){const Ze=U.getTerrainMesh(Ge.tileID),Xe=U.getTerrainData(Ge.tileID),tt=ae.getProjectionData({overscaledTileID:Ge.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),ot={u_ele_delta:U.getMeshFrameDelta(ae.zoom)};Re.draw(Q,Z.TRIANGLES,Ce,X.disabled,ce,wi.backCCW,ot,Xe,tt,"terrain",Ze.vertexBuffer,Ze.indexBuffer,Ze.segments)}Q.bindFramebuffer.set(null),Q.viewport.set([0,0,T.width,T.height])})(this,this.style.map.terrain),(function(T,U){const Q=T.context,Z=Q.gl,ae=T.transform,ce=lr.unblended,Ce=new Jn(Z.LEQUAL,Jn.ReadWrite,[0,1]),fe=U.getCoordsTexture(),Re=U.sourceCache.getRenderableTiles(),Ge=T.useProgram("terrainCoords");Q.bindFramebuffer.set(U.getFramebuffer("coords").framebuffer),Q.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),Q.clear({color:a.bf.transparent,depth:1}),U.coordsIndex=[];for(const Ze of Re){const Xe=U.getTerrainMesh(Ze.tileID),tt=U.getTerrainData(Ze.tileID);Q.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,fe.texture);const ot={u_terrain_coords_id:(255-U.coordsIndex.length)/255,u_texture:0,u_ele_delta:U.getMeshFrameDelta(ae.zoom)},nt=ae.getProjectionData({overscaledTileID:Ze.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Ge.draw(Q,Z.TRIANGLES,Ce,X.disabled,ce,wi.backCCW,ot,tt,nt,"terrain",Xe.vertexBuffer,Xe.indexBuffer,Xe.segments),U.coordsIndex.push(Ze.tileID.key)}Q.bindFramebuffer.set(null),Q.viewport.set([0,0,T.width,T.height])})(this,this.style.map.terrain))}renderLayer(l,p,C,E,T){C.isHidden(this.transform.zoom)||(C.type==="background"||C.type==="custom"||(E||[]).length)&&(this.id=C.id,a.cb(C)?(function(U,Q,Z,ae,ce,Ce){if(U.renderPass!=="translucent")return;const{isRenderingToTexture:fe}=Ce,Re=X.disabled,Ge=U.colorModeForRenderPass();(Z._unevaluatedLayout.hasValue("text-variable-anchor")||Z._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(Ze,Xe,tt,ot,nt,ct,gt,xt,ht){const Et=Xe.transform,Qt=Xe.style.map.terrain,Kt=nt==="map",Nt=ct==="map";for(const Wt of Ze){const In=ot.getTile(Wt),kn=In.getBucket(tt);if(!kn||!kn.text||!kn.text.segments.get().length)continue;const cn=a.an(kn.textSizeData,Et.zoom),Qn=a.aC(In,1,Xe.transform.zoom),Xi=Ti(Kt,Xe.transform,Qn),mo=tt.layout.get("icon-text-fit")!=="none"&&kn.hasIconData();if(cn){const os=Math.pow(2,Et.zoom-In.tileID.overscaledZ),Uo=Qt?(ds,Jo)=>Qt.getElevation(Wt,ds,Jo):null;Wh(kn,Kt,Nt,ht,Et,Xi,os,cn,mo,a.aD(Et,In,gt,xt),Wt.toUnwrapped(),Uo)}}})(ae,U,Z,Q,Z.layout.get("text-rotation-alignment"),Z.layout.get("text-pitch-alignment"),Z.paint.get("text-translate"),Z.paint.get("text-translate-anchor"),ce),Z.paint.get("icon-opacity").constantOr(1)!==0&&ih(U,Q,Z,ae,!1,Z.paint.get("icon-translate"),Z.paint.get("icon-translate-anchor"),Z.layout.get("icon-rotation-alignment"),Z.layout.get("icon-pitch-alignment"),Z.layout.get("icon-keep-upright"),Re,Ge,fe),Z.paint.get("text-opacity").constantOr(1)!==0&&ih(U,Q,Z,ae,!0,Z.paint.get("text-translate"),Z.paint.get("text-translate-anchor"),Z.layout.get("text-rotation-alignment"),Z.layout.get("text-pitch-alignment"),Z.layout.get("text-keep-upright"),Re,Ge,fe),Q.map.showCollisionBoxes&&(Xu(U,Q,Z,ae,!0),Xu(U,Q,Z,ae,!1))})(l,p,C,E,this.style.placement.variableOffsets,T):a.cc(C)?(function(U,Q,Z,ae,ce){if(U.renderPass!=="translucent")return;const{isRenderingToTexture:Ce}=ce,fe=Z.paint.get("circle-opacity"),Re=Z.paint.get("circle-stroke-width"),Ge=Z.paint.get("circle-stroke-opacity"),Ze=!Z.layout.get("circle-sort-key").isConstant();if(fe.constantOr(1)===0&&(Re.constantOr(1)===0||Ge.constantOr(1)===0))return;const Xe=U.context,tt=Xe.gl,ot=U.transform,nt=U.getDepthModeForSublayer(0,Jn.ReadOnly),ct=X.disabled,gt=U.colorModeForRenderPass(),xt=[],ht=ot.getCircleRadiusCorrection();for(let Et=0;Et<ae.length;Et++){const Qt=ae[Et],Kt=Q.getTile(Qt),Nt=Kt.getBucket(Z);if(!Nt)continue;const Wt=Z.paint.get("circle-translate"),In=Z.paint.get("circle-translate-anchor"),kn=a.aD(ot,Kt,Wt,In),cn=Nt.programConfigurations.get(Z.id),Qn=U.useProgram("circle",cn),Xi=Nt.layoutVertexBuffer,mo=Nt.indexBuffer,os=U.style.map.terrain&&U.style.map.terrain.getTerrainData(Qt),Uo={programConfiguration:cn,program:Qn,layoutVertexBuffer:Xi,indexBuffer:mo,uniformValues:x1(U,Kt,Z,kn,ht),terrainData:os,projectionData:ot.getProjectionData({overscaledTileID:Qt,applyGlobeMatrix:!Ce,applyTerrainMatrix:!0})};if(Ze){const ds=Nt.segments.get();for(const Jo of ds)xt.push({segments:new a.aM([Jo]),sortKey:Jo.sortKey,state:Uo})}else xt.push({segments:Nt.segments,sortKey:0,state:Uo})}Ze&&xt.sort(((Et,Qt)=>Et.sortKey-Qt.sortKey));for(const Et of xt){const{programConfiguration:Qt,program:Kt,layoutVertexBuffer:Nt,indexBuffer:Wt,uniformValues:In,terrainData:kn,projectionData:cn}=Et.state;Kt.draw(Xe,tt.TRIANGLES,nt,ct,gt,wi.backCCW,In,kn,cn,Z.id,Nt,Wt,Et.segments,Z.paint,U.transform.zoom,Qt)}})(l,p,C,E,T):a.cd(C)?(function(U,Q,Z,ae,ce){if(Z.paint.get("heatmap-opacity")===0)return;const Ce=U.context,{isRenderingToTexture:fe,isRenderingGlobe:Re}=ce;if(U.style.map.terrain){for(const Ge of ae){const Ze=Q.getTile(Ge);Q.hasRenderableParent(Ge)||(U.renderPass==="offscreen"?uu(U,Ze,Z,Ge,Re):U.renderPass==="translucent"&&Ud(U,Z,Ge,fe,Re))}Ce.viewport.set([0,0,U.width,U.height])}else U.renderPass==="offscreen"?(function(Ge,Ze,Xe,tt){const ot=Ge.context,nt=ot.gl,ct=Ge.transform,gt=X.disabled,xt=new lr([nt.ONE,nt.ONE],a.bf.transparent,[!0,!0,!0,!0]);(function(ht,Et,Qt){const Kt=ht.gl;ht.activeTexture.set(Kt.TEXTURE1),ht.viewport.set([0,0,Et.width/4,Et.height/4]);let Nt=Qt.heatmapFbos.get(a.c2);Nt?(Kt.bindTexture(Kt.TEXTURE_2D,Nt.colorAttachment.get()),ht.bindFramebuffer.set(Nt.framebuffer)):(Nt=_A(ht,Et.width/4,Et.height/4),Qt.heatmapFbos.set(a.c2,Nt))})(ot,Ge,Xe),ot.clear({color:a.bf.transparent});for(let ht=0;ht<tt.length;ht++){const Et=tt[ht];if(Ze.hasRenderableParent(Et))continue;const Qt=Ze.getTile(Et),Kt=Qt.getBucket(Xe);if(!Kt)continue;const Nt=Kt.programConfigurations.get(Xe.id),Wt=Ge.useProgram("heatmap",Nt),In=ct.getProjectionData({overscaledTileID:Et,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),kn=ct.getCircleRadiusCorrection();Wt.draw(ot,nt.TRIANGLES,Jn.disabled,gt,xt,wi.backCCW,zh(Qt,ct.zoom,Xe.paint.get("heatmap-intensity"),kn),null,In,Xe.id,Kt.layoutVertexBuffer,Kt.indexBuffer,Kt.segments,Xe.paint,ct.zoom,Nt)}ot.viewport.set([0,0,Ge.width,Ge.height])})(U,Q,Z,ae):U.renderPass==="translucent"&&(function(Ge,Ze){const Xe=Ge.context,tt=Xe.gl;Xe.setColorMode(Ge.colorModeForRenderPass());const ot=Ze.heatmapFbos.get(a.c2);ot&&(Xe.activeTexture.set(tt.TEXTURE0),tt.bindTexture(tt.TEXTURE_2D,ot.colorAttachment.get()),Xe.activeTexture.set(tt.TEXTURE1),Es(Xe,Ze).bind(tt.LINEAR,tt.CLAMP_TO_EDGE),Ge.useProgram("heatmapTexture").draw(Xe,tt.TRIANGLES,Jn.disabled,X.disabled,Ge.colorModeForRenderPass(),wi.disabled,su(Ge,Ze,0,1),null,null,Ze.id,Ge.viewportBuffer,Ge.quadTriangleIndexBuffer,Ge.viewportSegments,Ze.paint,Ge.transform.zoom))})(U,Z)})(l,p,C,E,T):a.ce(C)?(function(U,Q,Z,ae,ce){if(U.renderPass!=="translucent")return;const{isRenderingToTexture:Ce}=ce,fe=Z.paint.get("line-opacity"),Re=Z.paint.get("line-width");if(fe.constantOr(1)===0||Re.constantOr(1)===0)return;const Ge=U.getDepthModeForSublayer(0,Jn.ReadOnly),Ze=U.colorModeForRenderPass(),Xe=Z.paint.get("line-dasharray"),tt=Xe.constantOr(1),ot=Z.paint.get("line-pattern"),nt=ot.constantOr(1),ct=Z.paint.get("line-gradient"),gt=Z.getCrossfadeParameters(),xt=nt?"linePattern":tt?"lineSDF":ct?"lineGradient":"line",ht=U.context,Et=ht.gl,Qt=U.transform;let Kt=!0;for(const Nt of ae){const Wt=Q.getTile(Nt);if(nt&&!Wt.patternsLoaded())continue;const In=Wt.getBucket(Z);if(!In)continue;const kn=In.programConfigurations.get(Z.id),cn=U.context.program.get(),Qn=U.useProgram(xt,kn),Xi=Kt||Qn.program!==cn,mo=U.style.map.terrain&&U.style.map.terrain.getTerrainData(Nt),os=ot.constantOr(null),Uo=Xe&&Xe.constantOr(null);if(os&&Wt.imageAtlas){const Bo=Wt.imageAtlas,so=Bo.patternPositions[os.to.toString()],Br=Bo.patternPositions[os.from.toString()];so&&Br&&kn.setConstantPatternPositions(so,Br)}else if(Uo){const Bo=Z.layout.get("line-cap")==="round",so=U.lineAtlas.getDash(Uo.to,Bo),Br=U.lineAtlas.getDash(Uo.from,Bo);kn.setConstantDashPositions(so,Br)}const ds=Qt.getProjectionData({overscaledTileID:Nt,applyGlobeMatrix:!Ce,applyTerrainMatrix:!0}),Jo=Qt.getPixelScale(),ya=nt?M1(U,Wt,Z,Jo,gt):tt?yA(U,Wt,Z,Jo,gt):ct?Bf(U,Wt,Z,Jo,In.lineClipsArray.length):jh(U,Wt,Z,Jo);if(nt)ht.activeTexture.set(Et.TEXTURE0),Wt.imageAtlasTexture.bind(Et.LINEAR,Et.CLAMP_TO_EDGE),kn.updatePaintBuffers(gt);else if(tt)(Xi||U.lineAtlas.dirty)&&(ht.activeTexture.set(Et.TEXTURE0),U.lineAtlas.bind(ht)),kn.updatePaintBuffers(gt);else if(ct){const Bo=In.gradients[Z.id];let so=Bo.texture;if(Z.gradientVersion!==Bo.version){let Br=256;if(Z.stepInterpolant){const fs=Q.getSource().maxzoom,sc=Nt.canonical.z===fs?Math.ceil(1<<U.transform.maxZoom-Nt.canonical.z):1;Br=a.ah(a.c3(In.maxLineLength/a.$*1024*sc),256,ht.maxTextureSize)}Bo.gradient=a.c4({expression:Z.gradientExpression(),evaluationKey:"lineProgress",resolution:Br,image:Bo.gradient||void 0,clips:In.lineClipsArray}),Bo.texture?Bo.texture.update(Bo.gradient):Bo.texture=new a.T(ht,Bo.gradient,Et.RGBA),Bo.version=Z.gradientVersion,so=Bo.texture}ht.activeTexture.set(Et.TEXTURE0),so.bind(Z.stepInterpolant?Et.NEAREST:Et.LINEAR,Et.CLAMP_TO_EDGE)}const ss=U.stencilModeForClipping(Nt);Qn.draw(ht,Et.TRIANGLES,Ge,ss,Ze,wi.disabled,ya,mo,ds,Z.id,In.layoutVertexBuffer,In.indexBuffer,In.segments,Z.paint,U.transform.zoom,kn,In.layoutVertexBuffer2),Kt=!1}})(l,p,C,E,T):a.cf(C)?(function(U,Q,Z,ae,ce){const Ce=Z.paint.get("fill-color"),fe=Z.paint.get("fill-opacity");if(fe.constantOr(1)===0)return;const{isRenderingToTexture:Re}=ce,Ge=U.colorModeForRenderPass(),Ze=Z.paint.get("fill-pattern"),Xe=U.opaquePassEnabledForLayer()&&!Ze.constantOr(1)&&Ce.constantOr(a.bf.transparent).a===1&&fe.constantOr(0)===1?"opaque":"translucent";if(U.renderPass===Xe){const tt=U.getDepthModeForSublayer(1,U.renderPass==="opaque"?Jn.ReadWrite:Jn.ReadOnly);pl(U,Q,Z,ae,tt,Ge,!1,Re)}if(U.renderPass==="translucent"&&Z.paint.get("fill-antialias")){const tt=U.getDepthModeForSublayer(Z.getPaintProperty("fill-outline-color")?2:0,Jn.ReadOnly);pl(U,Q,Z,ae,tt,Ge,!0,Re)}})(l,p,C,E,T):a.cg(C)?(function(U,Q,Z,ae,ce){const Ce=Z.paint.get("fill-extrusion-opacity");if(Ce===0)return;const{isRenderingToTexture:fe}=ce;if(U.renderPass==="translucent"){const Re=new Jn(U.context.gl.LEQUAL,Jn.ReadWrite,U.depthRangeFor3D);if(Ce!==1||Z.paint.get("fill-extrusion-pattern").constantOr(1))Nl(U,Q,Z,ae,Re,X.disabled,lr.disabled,fe),Nl(U,Q,Z,ae,Re,U.stencilModeFor3D(),U.colorModeForRenderPass(),fe);else{const Ge=U.colorModeForRenderPass();Nl(U,Q,Z,ae,Re,X.disabled,Ge,fe)}}})(l,p,C,E,T):a.ch(C)?(function(U,Q,Z,ae,ce){if(U.renderPass!=="offscreen"&&U.renderPass!=="translucent")return;const{isRenderingToTexture:Ce}=ce,fe=U.context,Re=U.style.projection.useSubdivision,Ge=U.getDepthModeForSublayer(0,Jn.ReadOnly),Ze=U.colorModeForRenderPass();if(U.renderPass==="offscreen")(function(Xe,tt,ot,nt,ct,gt,xt){const ht=Xe.context,Et=ht.gl;for(const Qt of ot){const Kt=tt.getTile(Qt),Nt=Kt.dem;if(!Nt||!Nt.data||!Kt.needsHillshadePrepare)continue;const Wt=Nt.dim,In=Nt.stride,kn=Nt.getPixels();if(ht.activeTexture.set(Et.TEXTURE1),ht.pixelStoreUnpackPremultiplyAlpha.set(!1),Kt.demTexture=Kt.demTexture||Xe.getTileTexture(In),Kt.demTexture){const Qn=Kt.demTexture;Qn.update(kn,{premultiply:!1}),Qn.bind(Et.NEAREST,Et.CLAMP_TO_EDGE)}else Kt.demTexture=new a.T(ht,kn,Et.RGBA,{premultiply:!1}),Kt.demTexture.bind(Et.NEAREST,Et.CLAMP_TO_EDGE);ht.activeTexture.set(Et.TEXTURE0);let cn=Kt.fbo;if(!cn){const Qn=new a.T(ht,{width:Wt,height:Wt,data:null},Et.RGBA);Qn.bind(Et.LINEAR,Et.CLAMP_TO_EDGE),cn=Kt.fbo=ht.createFramebuffer(Wt,Wt,!0,!1),cn.colorAttachment.set(Qn.texture)}ht.bindFramebuffer.set(cn.framebuffer),ht.viewport.set([0,0,Wt,Wt]),Xe.useProgram("hillshadePrepare").draw(ht,Et.TRIANGLES,ct,gt,xt,wi.disabled,Of(Kt.tileID,Nt),null,null,nt.id,Xe.rasterBoundsBuffer,Xe.quadTriangleIndexBuffer,Xe.rasterBoundsSegments),Kt.needsHillshadePrepare=!1}})(U,Q,ae,Z,Ge,X.disabled,Ze),fe.viewport.set([0,0,U.width,U.height]);else if(U.renderPass==="translucent")if(Re){const[Xe,tt,ot]=U.stencilConfigForOverlapTwoPass(ae);eA(U,Q,Z,ot,Xe,Ge,Ze,!1,Ce),eA(U,Q,Z,ot,tt,Ge,Ze,!0,Ce)}else{const[Xe,tt]=U.getStencilConfigForOverlapAndUpdateStencilID(ae);eA(U,Q,Z,tt,Xe,Ge,Ze,!1,Ce)}})(l,p,C,E,T):a.ci(C)?(function(U,Q,Z,ae,ce){if(U.renderPass!=="translucent"||!ae.length)return;const{isRenderingToTexture:Ce}=ce,fe=U.style.projection.useSubdivision,Re=U.getDepthModeForSublayer(0,Jn.ReadOnly),Ge=U.colorModeForRenderPass();if(fe){const[Ze,Xe,tt]=U.stencilConfigForOverlapTwoPass(ae);Gl(U,Q,Z,tt,Ze,Re,Ge,!1,Ce),Gl(U,Q,Z,tt,Xe,Re,Ge,!0,Ce)}else{const[Ze,Xe]=U.getStencilConfigForOverlapAndUpdateStencilID(ae);Gl(U,Q,Z,Xe,Ze,Re,Ge,!1,Ce)}})(l,p,C,E,T):a.cj(C)?(function(U,Q,Z,ae,ce){if(U.renderPass!=="translucent"||Z.paint.get("raster-opacity")===0||!ae.length)return;const{isRenderingToTexture:Ce}=ce,fe=Q.getSource(),Re=U.style.projection.useSubdivision;if(fe instanceof Ln)Ol(U,Q,Z,ae,null,!1,!1,fe.tileCoords,fe.flippedWindingOrder,Ce);else if(Re){const[Ge,Ze,Xe]=U.stencilConfigForOverlapTwoPass(ae);Ol(U,Q,Z,Xe,Ge,!1,!0,Mu,!1,Ce),Ol(U,Q,Z,Xe,Ze,!0,!0,Mu,!1,Ce)}else{const[Ge,Ze]=U.getStencilConfigForOverlapAndUpdateStencilID(ae);Ol(U,Q,Z,Ze,Ge,!1,!0,Mu,!1,Ce)}})(l,p,C,E,T):a.ck(C)?(function(U,Q,Z,ae,ce){const Ce=Z.paint.get("background-color"),fe=Z.paint.get("background-opacity");if(fe===0)return;const{isRenderingToTexture:Re}=ce,Ge=U.context,Ze=Ge.gl,Xe=U.style.projection,tt=U.transform,ot=tt.tileSize,nt=Z.paint.get("background-pattern");if(U.isPatternMissing(nt))return;const ct=!nt&&Ce.a===1&&fe===1&&U.opaquePassEnabledForLayer()?"opaque":"translucent";if(U.renderPass!==ct)return;const gt=X.disabled,xt=U.getDepthModeForSublayer(0,ct==="opaque"?Jn.ReadWrite:Jn.ReadOnly),ht=U.colorModeForRenderPass(),Et=U.useProgram(nt?"backgroundPattern":"background"),Qt=ae||st(tt,{tileSize:ot,terrain:U.style.map.terrain});nt&&(Ge.activeTexture.set(Ze.TEXTURE0),U.imageManager.bind(U.context));const Kt=Z.getCrossfadeParameters();for(const Nt of Qt){const Wt=tt.getProjectionData({overscaledTileID:Nt,applyGlobeMatrix:!Re,applyTerrainMatrix:!0}),In=nt?w1(fe,U,nt,{tileID:Nt,tileSize:ot},Kt):Cp(fe,Ce),kn=U.style.map.terrain&&U.style.map.terrain.getTerrainData(Nt),cn=Xe.getMeshFromTileID(Ge,Nt.canonical,!1,!0,"raster");Et.draw(Ge,Ze.TRIANGLES,xt,gt,ht,wi.backCCW,In,kn,Wt,Z.id,cn.vertexBuffer,cn.indexBuffer,cn.segments)}})(l,0,C,E,T):a.cl(C)&&(function(U,Q,Z,ae){const{isRenderingGlobe:ce}=ae,Ce=U.context,fe=Z.implementation,Re=U.style.projection,Ge=U.transform,Ze=Ge.getProjectionDataForCustomLayer(ce),Xe={farZ:Ge.farZ,nearZ:Ge.nearZ,fov:Ge.fov*Math.PI/180,modelViewProjectionMatrix:Ge.modelViewProjectionMatrix,projectionMatrix:Ge.projectionMatrix,shaderData:{variantName:Re.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Re.shaderPreludeCode.vertexSource}`,define:Re.shaderDefine},defaultProjectionData:Ze},tt=fe.renderingMode?fe.renderingMode:"2d";if(U.renderPass==="offscreen"){const ot=fe.prerender;ot&&(U.setCustomLayerDefaults(),Ce.setColorMode(U.colorModeForRenderPass()),ot.call(fe,Ce.gl,Xe),Ce.setDirty(),U.setBaseState())}else if(U.renderPass==="translucent"){U.setCustomLayerDefaults(),Ce.setColorMode(U.colorModeForRenderPass()),Ce.setStencilMode(X.disabled);const ot=tt==="3d"?U.getDepthModeFor3D():U.getDepthModeForSublayer(0,Jn.ReadOnly);Ce.setDepthMode(ot),fe.render(Ce.gl,Xe),Ce.setDirty(),U.setBaseState(),Ce.bindFramebuffer.set(null)}})(l,0,C,T))}saveTileTexture(l){const p=this._tileTextures[l.size[0]];p?p.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const p=this._tileTextures[l];return p&&p.length>0?p.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const p=this.imageManager.getPattern(l.from.toString()),C=this.imageManager.getPattern(l.to.toString());return!p||!C}useProgram(l,p,C=!1,E=[]){this.cache=this.cache||{};const T=!!this.style.map.terrain,U=this.style.projection,Q=C?qr.projectionMercator:U.shaderPreludeCode,Z=C?dl:U.shaderDefine,ae=l+(p?p.cacheKey:"")+`/${C?Cu:U.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(T?"/terrain":"")+(E?`/${E.join("/")}`:"");return this.cache[ae]||(this.cache[ae]=new Lh(this.context,qr[l],p,Jg[l],this._showOverdrawInspector,T,Q,Z,E)),this.cache[ae]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:l,drawingBufferHeight:p}=this.context.gl;return this.width!==l||this.height!==p}}function sh(I,l){let p,C=!1,E=null,T=null;const U=()=>{E=null,C&&(I.apply(T,p),E=setTimeout(U,l),C=!1)};return(...Q)=>(C=!0,T=this,p=Q,E||U(),E)}class qe{constructor(l){this._getCurrentHash=()=>{const p=window.location.hash.replace("#","");if(this._hashName){let C;return p.split("&").map((E=>E.split("="))).forEach((E=>{E[0]===this._hashName&&(C=E)})),(C&&C[1]||"").split("/")}return p.split("/")},this._onHashChange=()=>{const p=this._getCurrentHash();if(!this._isValidHash(p))return!1;const C=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:C,pitch:+(p[4]||0)}),!0},this._updateHashUnthrottled=()=>{const p=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,p)},this._removeHash=()=>{const p=this._getCurrentHash();if(p.length===0)return;const C=p.join("/");let E=C;E.split("&").length>0&&(E=E.split("&")[0]),this._hashName&&(E=`${this._hashName}=${C}`);let T=window.location.hash.replace(E,"");T.startsWith("#&")?T=T.slice(0,1)+T.slice(2):T==="#"&&(T="");let U=window.location.href.replace(/(#.+)?$/,T);U=U.replace("&&","&"),window.history.replaceState(window.history.state,null,U)},this._updateHash=sh(this._updateHashUnthrottled,300),this._hashName=l&&encodeURIComponent(l)}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(l){const p=this._map.getCenter(),C=Math.round(100*this._map.getZoom())/100,E=Math.ceil((C*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,E),U=Math.round(p.lng*T)/T,Q=Math.round(p.lat*T)/T,Z=this._map.getBearing(),ae=this._map.getPitch();let ce="";if(ce+=l?`/${U}/${Q}/${C}`:`${C}/${Q}/${U}`,(Z||ae)&&(ce+="/"+Math.round(10*Z)/10),ae&&(ce+=`/${Math.round(ae)}`),this._hashName){const Ce=this._hashName;let fe=!1;const Re=window.location.hash.slice(1).split("&").map((Ge=>{const Ze=Ge.split("=")[0];return Ze===Ce?(fe=!0,`${Ze}=${ce}`):Ge})).filter((Ge=>Ge));return fe||Re.push(`${Ce}=${ce}`),`#${Re.join("&")}`}return`#${ce}`}_isValidHash(l){if(l.length<3||l.some(isNaN))return!1;try{new a.S(+l[2],+l[1])}catch{return!1}const p=+l[0],C=+(l[3]||0),E=+(l[4]||0);return p>=this._map.getMinZoom()&&p<=this._map.getMaxZoom()&&C>=-180&&C<=180&&E>=this._map.getMinPitch()&&E<=this._map.getMaxPitch()}}const wu={linearity:.3,easing:a.cm(0,0,.3,1)},wc=a.e({deceleration:2500,maxSpeed:1400},wu),Wl=a.e({deceleration:20,maxSpeed:1400},wu),Er=a.e({deceleration:1e3,maxSpeed:360},wu),wA=a.e({deceleration:1e3,maxSpeed:90},wu),ah=a.e({deceleration:1e3,maxSpeed:360},wu);class SA{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:M.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,p=M.now();for(;l.length>0&&p-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const p={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:T}of this._inertiaBuffer)p.zoom+=T.zoomDelta||0,p.bearing+=T.bearingDelta||0,p.pitch+=T.pitchDelta||0,p.roll+=T.rollDelta||0,T.panDelta&&p.pan._add(T.panDelta),T.around&&(p.around=T.around),T.pinchAround&&(p.pinchAround=T.pinchAround);const C=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(p.pan.mag()){const T=Ju(p.pan.mag(),C,a.e({},wc,l||{})),U=p.pan.mult(T.amount/p.pan.mag()),Q=this._map.cameraHelper.handlePanInertia(U,this._map.transform);E.center=Q.easingCenter,E.offset=Q.easingOffset,Su(E,T)}if(p.zoom){const T=Ju(p.zoom,C,Wl);E.zoom=this._map.transform.zoom+T.amount,Su(E,T)}if(p.bearing){const T=Ju(p.bearing,C,Er);E.bearing=this._map.transform.bearing+a.ah(T.amount,-179,179),Su(E,T)}if(p.pitch){const T=Ju(p.pitch,C,wA);E.pitch=this._map.transform.pitch+T.amount,Su(E,T)}if(p.roll){const T=Ju(p.roll,C,ah);E.roll=this._map.transform.roll+a.ah(T.amount,-179,179),Su(E,T)}if(E.zoom||E.bearing){const T=p.pinchAround===void 0?p.around:p.pinchAround;E.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),a.e(E,{noMoveStart:!0})}}function Su(I,l){(!I.duration||I.duration<l.duration)&&(I.duration=l.duration,I.easing=l.easing)}function Ju(I,l,p){const{maxSpeed:C,linearity:E,deceleration:T}=p,U=a.ah(I*E/(l/1e3),-C,C),Q=Math.abs(U)/(T*E);return{easing:p.easing,duration:1e3*Q,amount:U*(Q/2)}}class Za extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,p,C,E={}){C=C instanceof MouseEvent?C:new MouseEvent(l,C);const T=x.mousePos(p.getCanvas(),C),U=p.unproject(T);super(l,a.e({point:T,lngLat:U,originalEvent:C},E)),this._defaultPrevented=!1,this.target=p}}class lh extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,p,C){const E=l==="touchend"?C.changedTouches:C.touches,T=x.touchPos(p.getCanvasContainer(),E),U=T.map((Z=>p.unproject(Z))),Q=T.reduce(((Z,ae,ce,Ce)=>Z.add(ae.div(Ce.length))),new a.P(0,0));super(l,{points:T,point:Q,lngLats:U,lngLat:p.unproject(Q),originalEvent:C}),this._defaultPrevented=!1}}class uh extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,p,C){super(l,{originalEvent:C}),this._defaultPrevented=!1}}class ml{constructor(l,p){this._map=l,this._clickTolerance=p.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new uh(l.type,this._map,l))}mousedown(l,p){return this._mousedownPos=p,this._firePreventable(new Za(l.type,this._map,l))}mouseup(l){this._map.fire(new Za(l.type,this._map,l))}click(l,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new Za(l.type,this._map,l))}dblclick(l){return this._firePreventable(new Za(l.type,this._map,l))}mouseover(l){this._map.fire(new Za(l.type,this._map,l))}mouseout(l){this._map.fire(new Za(l.type,this._map,l))}touchstart(l){return this._firePreventable(new lh(l.type,this._map,l))}touchmove(l){this._map.fire(new lh(l.type,this._map,l))}touchend(l){this._map.fire(new lh(l.type,this._map,l))}touchcancel(l){this._map.fire(new lh(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ec{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new Za(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Za("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new Za(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Fd{constructor(l){this._map=l}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(l){return this.transform.screenPointToLocation(a.P.convert(l),this._map.terrain)}}class n0{constructor(l,p){this._map=l,this._tr=new Fd(l),this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,p){this.isEnabled()&&l.shiftKey&&l.button===0&&(x.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(l,p){if(!this._active)return;const C=p;if(this._lastPos.equals(C)||!this._box&&C.dist(this._startPos)<this._clickTolerance)return;const E=this._startPos;this._lastPos=C,this._box||(this._box=x.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",l));const T=Math.min(E.x,C.x),U=Math.max(E.x,C.x),Q=Math.min(E.y,C.y),Z=Math.max(E.y,C.y);x.setTransform(this._box,`translate(${T}px,${Q}px)`),this._box.style.width=U-T+"px",this._box.style.height=Z-Q+"px"}mouseupWindow(l,p){if(!this._active||l.button!==0)return;const C=this._startPos,E=p;if(this.reset(),x.suppressClick(),C.x!==E.x||C.y!==E.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:l})),{cameraAnimation:T=>T.fitScreenCoordinates(C,E,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(x.remove(this._box),this._box=null),x.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,p){return this._map.fire(new a.l(l,{originalEvent:p}))}}function Om(I,l){if(I.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${I.length}, points ${l.length}`);const p={};for(let C=0;C<I.length;C++)p[I[C].identifier]=l[C];return p}class Bm{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,p,C){(this.centroid||C.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),C.length===this.numTouches&&(this.centroid=(function(E){const T=new a.P(0,0);for(const U of E)T._add(U);return T.div(E.length)})(p),this.touches=Om(C,p)))}touchmove(l,p,C){if(this.aborted||!this.centroid)return;const E=Om(C,p);for(const T in this.touches){const U=E[T];(!U||U.dist(this.touches[T])>30)&&(this.aborted=!0)}}touchend(l,p,C){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),C.length===0){const E=!this.aborted&&this.centroid;if(this.reset(),E)return E}}}class ia{constructor(l){this.singleTap=new Bm(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,p,C){this.singleTap.touchstart(l,p,C)}touchmove(l,p,C){this.singleTap.touchmove(l,p,C)}touchend(l,p,C){const E=this.singleTap.touchend(l,p,C);if(E){const T=l.timeStamp-this.lastTime<500,U=!this.lastTap||this.lastTap.dist(E)<30;if(T&&U||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=E,this.count===this.numTaps)return this.reset(),E}}}class la{constructor(l){this._tr=new Fd(l),this._zoomIn=new ia({numTouches:1,numTaps:2}),this._zoomOut=new ia({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,p,C){this._zoomIn.touchstart(l,p,C),this._zoomOut.touchstart(l,p,C)}touchmove(l,p,C){this._zoomIn.touchmove(l,p,C),this._zoomOut.touchmove(l,p,C)}touchend(l,p,C){const E=this._zoomIn.touchend(l,p,C),T=this._zoomOut.touchend(l,p,C),U=this._tr;return E?(this._active=!0,l.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:Q=>Q.easeTo({duration:300,zoom:U.zoom+1,around:U.unproject(E)},{originalEvent:l})}):T?(this._active=!0,l.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:Q=>Q.easeTo({duration:300,zoom:U.zoom-1,around:U.unproject(T)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xa{constructor(l){this._enabled=!!l.enable,this._moveStateManager=l.moveStateManager,this._clickTolerance=l.clickTolerance||1,this._moveFunction=l.move,this._activateOnStart=!!l.activateOnStart,l.assignEvents(this),this.reset()}reset(l){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(l)}_move(...l){const p=this._moveFunction(...l);if(p.bearingDelta||p.pitchDelta||p.rollDelta||p.around||p.panDelta)return this._active=!0,p}dragStart(l,p){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(l)&&(this._moveStateManager.startMove(l),this._lastPoint=Array.isArray(p)?p[0]:p,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(l,p){if(!this.isEnabled())return;const C=this._lastPoint;if(!C)return;if(l.preventDefault(),!this._moveStateManager.isValidMoveEvent(l))return void this.reset(l);const E=Array.isArray(p)?p[0]:p;return!this._moved&&E.dist(C)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=E,this._move(C,E))}dragEnd(l){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(l)&&(this._moved&&x.suppressClick(),this.reset(l))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Tf=0,tc=2,tA={[Tf]:1,[tc]:2};class EA{constructor(l){this._correctEvent=l.checkCorrectEvent}startMove(l){const p=x.mouseButton(l);this._eventButton=p}endMove(l){delete this._eventButton}isValidStartEvent(l){return this._correctEvent(l)}isValidMoveEvent(l){return!(function(p,C){const E=tA[C];return p.buttons===void 0||(p.buttons&E)!==E})(l,this._eventButton)}isValidEndEvent(l){return x.mouseButton(l)===this._eventButton}}class zd{constructor(){this._firstTouch=void 0}_isOneFingerTouch(l){return l.targetTouches.length===1}_isSameTouchEvent(l){return l.targetTouches[0].identifier===this._firstTouch}startMove(l){this._firstTouch=l.targetTouches[0].identifier}endMove(l){delete this._firstTouch}isValidStartEvent(l){return this._isOneFingerTouch(l)}isValidMoveEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}isValidEndEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}}class O1{constructor(l=new EA({checkCorrectEvent:()=>!0}),p=new zd){this.mouseMoveStateManager=l,this.oneFingerTouchMoveStateManager=p}_executeRelevantHandler(l,p,C){return l instanceof MouseEvent?p(l):typeof TouchEvent<"u"&&l instanceof TouchEvent?C(l):void 0}startMove(l){this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.startMove(p)),(p=>this.oneFingerTouchMoveStateManager.startMove(p)))}endMove(l){this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.endMove(p)),(p=>this.oneFingerTouchMoveStateManager.endMove(p)))}isValidStartEvent(l){return this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.isValidStartEvent(p)),(p=>this.oneFingerTouchMoveStateManager.isValidStartEvent(p)))}isValidMoveEvent(l){return this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.isValidMoveEvent(p)),(p=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(p)))}isValidEndEvent(l){return this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.isValidEndEvent(p)),(p=>this.oneFingerTouchMoveStateManager.isValidEndEvent(p)))}}const Im=I=>{I.mousedown=I.dragStart,I.mousemoveWindow=I.dragMove,I.mouseup=I.dragEnd,I.contextmenu=l=>{l.preventDefault()}};class nc{constructor(l,p){this._clickTolerance=l.clickTolerance||1,this._map=p,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(l){return l<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(l,p,C){return this._calculateTransform(l,p,C)}touchmove(l,p,C){if(this._active){if(!this._shouldBePrevented(C.length))return l.preventDefault(),this._calculateTransform(l,p,C);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",l)}}touchend(l,p,C){this._calculateTransform(l,p,C),this._active&&this._shouldBePrevented(C.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,p,C){C.length>0&&(this._active=!0);const E=Om(C,p),T=new a.P(0,0),U=new a.P(0,0);let Q=0;for(const ae in E){const ce=E[ae],Ce=this._touches[ae];Ce&&(T._add(ce),U._add(ce.sub(Ce)),Q++,E[ae]=ce)}if(this._touches=E,this._shouldBePrevented(Q)||!U.mag())return;const Z=U.div(Q);return this._sum._add(Z),this._sum.mag()<this._clickTolerance?void 0:{around:T.div(Q),panDelta:Z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ic{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(l,p,C){this._firstTwoTouches||C.length<2||(this._firstTwoTouches=[C[0].identifier,C[1].identifier],this._start([p[0],p[1]]))}touchmove(l,p,C){if(!this._firstTwoTouches)return;l.preventDefault();const[E,T]=this._firstTwoTouches,U=Eu(C,p,E),Q=Eu(C,p,T);if(!U||!Q)return;const Z=this._aroundCenter?null:U.add(Q).div(2);return this._move([U,Q],Z,l)}touchend(l,p,C){if(!this._firstTwoTouches)return;const[E,T]=this._firstTwoTouches,U=Eu(C,p,E),Q=Eu(C,p,T);U&&Q||(this._active&&x.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Eu(I,l,p){for(let C=0;C<I.length;C++)if(I[C].identifier===p)return l[C]}function Xn(I,l){return Math.log(I/l)/Math.LN2}class km extends ic{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,p){const C=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(Xn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Xn(this._distance,C),pinchAround:p}}}function ch(I,l){return 180*I.angleWith(l)/Math.PI}class Rf extends ic{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,p,C){const E=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ch(this._vector,E),pinchAround:p}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const p=25/(Math.PI*this._minDiameter)*360,C=ch(l,this._startVector);return Math.abs(C)<p}}function nA(I){return Math.abs(I.y)>Math.abs(I.x)}class Ah extends ic{constructor(l){super(),this._currentTouchCount=0,this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,p,C){super.touchstart(l,p,C),this._currentTouchCount=C.length}_start(l){this._lastPoints=l,nA(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,p,C){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const E=l[0].sub(this._lastPoints[0]),T=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(E,T,C.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(E.y+T.y)/2*-.5}):void 0}gestureBeginsVertically(l,p,C){if(this._valid!==void 0)return this._valid;const E=l.mag()>=2,T=p.mag()>=2;if(!E&&!T)return;if(!E||!T)return this._firstMove===void 0&&(this._firstMove=C),C-this._firstMove<100&&void 0;const U=l.y>0==p.y>0;return nA(l)&&nA(p)&&U}}const Tm={panStep:100,bearingStep:15,pitchStep:10};class Or{constructor(l){this._tr=new Fd(l);const p=Tm;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let p=0,C=0,E=0,T=0,U=0;switch(l.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:l.shiftKey?C=-1:(l.preventDefault(),T=-1);break;case 39:l.shiftKey?C=1:(l.preventDefault(),T=1);break;case 38:l.shiftKey?E=1:(l.preventDefault(),U=-1);break;case 40:l.shiftKey?E=-1:(l.preventDefault(),U=1);break;default:return}return this._rotationDisabled&&(C=0,E=0),{cameraAnimation:Q=>{const Z=this._tr;Q.easeTo({duration:300,easeId:"keyboardHandler",easing:rc,zoom:p?Math.round(Z.zoom)+p*(l.shiftKey?2:1):Z.zoom,bearing:Z.bearing+C*this._bearingStep,pitch:Z.pitch+E*this._pitchStep,offset:[-T*this._panStep,-U*this._panStep],center:Z.center},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function rc(I){return I*(2-I)}const iA=4.000244140625,Rm=1/450;class Dm{constructor(l,p){this._onTimeout=C=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(C)},this._map=l,this._tr=new Fd(l),this._triggerRenderFrame=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Rm}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(l){return!!this._map.cooperativeGestures.isEnabled()&&!(l.ctrlKey||this._map.cooperativeGestures.isBypassed(l))}wheel(l){if(!this.isEnabled())return;if(this._shouldBePrevented(l))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",l);let p=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const C=M.now(),E=C-(this._lastWheelEventTime||0);this._lastWheelEventTime=C,p!==0&&p%iA==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":E>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(E*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),l.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=l,this._delta-=p,this._active||this._start(l)),l.preventDefault()}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=x.mousePos(this._map.getCanvas(),l),C=this._tr;this._aroundPoint=this._aroundCenter?C.transform.locationToScreenPoint(a.S.convert(C.center)):p,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const Q=l.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=Q),typeof this._targetZoom=="number"&&(this._targetZoom+=Q)}if(this._delta!==0){const Q=this._type==="wheel"&&Math.abs(this._delta)>iA?this._wheelZoomRate:this._defaultZoomRate;let Z=2/(1+Math.exp(-Math.abs(this._delta*Q)));this._delta<0&&Z!==0&&(Z=1/Z);const ae=typeof this._targetZoom!="number"?l.scale:a.af(this._targetZoom);this._targetZoom=l.getConstrained(l.getCameraLngLat(),a.ak(ae*Z)).zoom,this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom!="number"?l.zoom:this._targetZoom,C=this._startZoom,E=this._easing;let T,U=!1;if(this._type==="wheel"&&C&&E){const Q=M.now()-this._lastWheelEventTime,Z=Math.min((Q+5)/200,1),ae=E(Z);T=a.C.number(C,p,ae),Z<1?this._frameId||(this._frameId=!0):U=!0}else T=p,U=!0;return this._active=!0,U&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=T,{noInertia:!0,needsRenderFrame:!U,zoomDelta:T-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let p=a.co;if(this._prevEase){const C=this._prevEase,E=(M.now()-C.start)/C.duration,T=C.easing(E+.01)-C.easing(E),U=.27/Math.sqrt(T*T+1e-4)*.01,Q=Math.sqrt(.0729-U*U);p=a.cm(U,Q,.25,1)}return this._prevEase={start:M.now(),duration:l,easing:p},p}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class jd{constructor(l,p){this._clickZoom=l,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ou{constructor(l){this._tr=new Fd(l),this.reset()}reset(){this._active=!1}dblclick(l,p){return l.preventDefault(),{cameraAnimation:C=>{C.easeTo({duration:300,zoom:this._tr.zoom+(l.shiftKey?-1:1),around:this._tr.unproject(p)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $h{constructor(){this._tap=new ia({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(l,p,C){if(!this._swipePoint)if(this._tapTime){const E=p[0],T=l.timeStamp-this._tapTime<500,U=this._tapPoint.dist(E)<30;T&&U?C.length>0&&(this._swipePoint=E,this._swipeTouch=C[0].identifier):this.reset()}else this._tap.touchstart(l,p,C)}touchmove(l,p,C){if(this._tapTime){if(this._swipePoint){if(C[0].identifier!==this._swipeTouch)return;const E=p[0],T=E.y-this._swipePoint.y;return this._swipePoint=E,l.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(l,p,C)}touchend(l,p,C){if(this._tapTime)this._swipePoint&&C.length===0&&this.reset();else{const E=this._tap.touchend(l,p,C);E&&(this._tapTime=l.timeStamp,this._tapPoint=E)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class oc{constructor(l,p,C){this._el=l,this._mousePan=p,this._touchPan=C}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ql{constructor(l,p,C,E){this._pitchWithRotate=l.pitchWithRotate,this._rollEnabled=l.rollEnabled,this._mouseRotate=p,this._mousePitch=C,this._mouseRoll=E}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Pm{constructor(l,p,C,E){this._el=l,this._touchZoom=p,this._touchRotate=C,this._tapDragZoom=E,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class hh{constructor(l,p){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=l,this._options=p,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const l=this._map.getCanvasContainer();l.classList.add("maplibregl-cooperative-gestures"),this._container=x.create("div","maplibregl-cooperative-gesture-screen",l);let p=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(p=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const C=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),E=document.createElement("div");E.className="maplibregl-desktop-message",E.textContent=p,this._container.appendChild(E);const T=document.createElement("div");T.className="maplibregl-mobile-message",T.textContent=C,this._container.appendChild(T),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(x.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(l){return l[this._bypassKey]}notifyGestureBlocked(l,p){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:l,originalEvent:p})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Df=I=>I.zoom||I.drag||I.roll||I.pitch||I.rotate;class Ja extends a.l{}function Qr(I){return I.panDelta&&I.panDelta.mag()||I.zoomDelta||I.bearingDelta||I.pitchDelta||I.rollDelta}class Um{constructor(l,p){this.handleWindowEvent=E=>{this.handleEvent(E,`${E.type}Window`)},this.handleEvent=(E,T)=>{if(E.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const U=E.type==="renderFrame"?void 0:E,Q={needsRenderFrame:!1},Z={},ae={};for(const{handlerName:fe,handler:Re,allowed:Ge}of this._handlers){if(!Re.isEnabled())continue;let Ze;if(this._blockedByActive(ae,Ge,fe))Re.reset();else if(Re[T||E.type]){if(a.cp(E,T||E.type)){const Xe=x.mousePos(this._map.getCanvas(),E);Ze=Re[T||E.type](E,Xe)}else if(a.cq(E,T||E.type)){const Xe=this._getMapTouches(E.touches),tt=x.touchPos(this._map.getCanvas(),Xe);Ze=Re[T||E.type](E,tt,Xe)}else a.cr(T||E.type)||(Ze=Re[T||E.type](E));this.mergeHandlerResult(Q,Z,Ze,fe,U),Ze&&Ze.needsRenderFrame&&this._triggerRenderFrame()}(Ze||Re.isActive())&&(ae[fe]=Re)}const ce={};for(const fe in this._previousActiveHandlers)ae[fe]||(ce[fe]=U);this._previousActiveHandlers=ae,(Object.keys(ce).length||Qr(Q))&&(this._changes.push([Q,Z,ce]),this._triggerRenderFrame()),(Object.keys(ae).length||Qr(Q))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ce}=Q;Ce&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ce(this._map))},this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new SA(l),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p);const C=this._el;this._listeners=[[C,"touchstart",{passive:!0}],[C,"touchmove",{passive:!1}],[C,"touchend",void 0],[C,"touchcancel",void 0],[C,"mousedown",void 0],[C,"mousemove",void 0],[C,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[C,"mouseover",void 0],[C,"mouseout",void 0],[C,"dblclick",void 0],[C,"click",void 0],[C,"keydown",{capture:!1}],[C,"keyup",void 0],[C,"wheel",{passive:!1}],[C,"contextmenu",void 0],[window,"blur",void 0]];for(const[E,T,U]of this._listeners)x.addEventListener(E,T,E===document?this.handleWindowEvent:this.handleEvent,U)}destroy(){for(const[l,p,C]of this._listeners)x.removeEventListener(l,p,l===document?this.handleWindowEvent:this.handleEvent,C)}_addDefaultHandlers(l){const p=this._map,C=p.getCanvasContainer();this._add("mapEvent",new ml(p,l));const E=p.boxZoom=new n0(p,l);this._add("boxZoom",E),l.interactive&&l.boxZoom&&E.enable();const T=p.cooperativeGestures=new hh(p,l.cooperativeGestures);this._add("cooperativeGestures",T),l.cooperativeGestures&&T.enable();const U=new la(p),Q=new Ou(p);p.doubleClickZoom=new jd(Q,U),this._add("tapZoom",U),this._add("clickZoom",Q),l.interactive&&l.doubleClickZoom&&p.doubleClickZoom.enable();const Z=new $h;this._add("tapDragZoom",Z);const ae=p.touchPitch=new Ah(p);this._add("touchPitch",ae),l.interactive&&l.touchPitch&&p.touchPitch.enable(l.touchPitch);const ce=()=>p.project(p.getCenter()),Ce=(function({enable:ct,clickTolerance:gt,aroundCenter:xt=!0,minPixelCenterThreshold:ht=100,rotateDegreesPerPixelMoved:Et=.8},Qt){const Kt=new EA({checkCorrectEvent:Nt=>x.mouseButton(Nt)===0&&Nt.ctrlKey||x.mouseButton(Nt)===2&&!Nt.ctrlKey});return new Xa({clickTolerance:gt,move:(Nt,Wt)=>{const In=Qt();if(xt&&Math.abs(In.y-Nt.y)>ht)return{bearingDelta:a.cn(new a.P(Nt.x,Wt.y),Wt,In)};let kn=(Wt.x-Nt.x)*Et;return xt&&Wt.y<In.y&&(kn=-kn),{bearingDelta:kn}},moveStateManager:Kt,enable:ct,assignEvents:Im})})(l,ce),fe=(function({enable:ct,clickTolerance:gt,pitchDegreesPerPixelMoved:xt=-.5}){const ht=new EA({checkCorrectEvent:Et=>x.mouseButton(Et)===0&&Et.ctrlKey||x.mouseButton(Et)===2});return new Xa({clickTolerance:gt,move:(Et,Qt)=>({pitchDelta:(Qt.y-Et.y)*xt}),moveStateManager:ht,enable:ct,assignEvents:Im})})(l),Re=(function({enable:ct,clickTolerance:gt,rollDegreesPerPixelMoved:xt=.3},ht){const Et=new EA({checkCorrectEvent:Qt=>x.mouseButton(Qt)===2&&Qt.ctrlKey});return new Xa({clickTolerance:gt,move:(Qt,Kt)=>{const Nt=ht();let Wt=(Kt.x-Qt.x)*xt;return Kt.y<Nt.y&&(Wt=-Wt),{rollDelta:Wt}},moveStateManager:Et,enable:ct,assignEvents:Im})})(l,ce);p.dragRotate=new Ql(l,Ce,fe,Re),this._add("mouseRotate",Ce,["mousePitch"]),this._add("mousePitch",fe,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Re,["mousePitch"]),l.interactive&&l.dragRotate&&p.dragRotate.enable();const Ge=(function({enable:ct,clickTolerance:gt}){const xt=new EA({checkCorrectEvent:ht=>x.mouseButton(ht)===0&&!ht.ctrlKey});return new Xa({clickTolerance:gt,move:(ht,Et)=>({around:Et,panDelta:Et.sub(ht)}),activateOnStart:!0,moveStateManager:xt,enable:ct,assignEvents:Im})})(l),Ze=new nc(l,p);p.dragPan=new oc(C,Ge,Ze),this._add("mousePan",Ge),this._add("touchPan",Ze,["touchZoom","touchRotate"]),l.interactive&&l.dragPan&&p.dragPan.enable(l.dragPan);const Xe=new Rf,tt=new km;p.touchZoomRotate=new Pm(C,tt,Xe,Z),this._add("touchRotate",Xe,["touchPan","touchZoom"]),this._add("touchZoom",tt,["touchPan","touchRotate"]),l.interactive&&l.touchZoomRotate&&p.touchZoomRotate.enable(l.touchZoomRotate);const ot=p.scrollZoom=new Dm(p,(()=>this._triggerRenderFrame()));this._add("scrollZoom",ot,["mousePan"]),l.interactive&&l.scrollZoom&&p.scrollZoom.enable(l.scrollZoom);const nt=p.keyboard=new Or(p);this._add("keyboard",nt),l.interactive&&l.keyboard&&p.keyboard.enable(),this._add("blockableMapEvent",new ec(p))}_add(l,p,C){this._handlers.push({handlerName:l,handler:p,allowed:C}),this._handlersById[l]=p}stop(l){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Df(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,p,C){for(const E in l)if(E!==C&&(!p||p.indexOf(E)<0))return!0;return!1}_getMapTouches(l){const p=[];for(const C of l)this._el.contains(C.target)&&p.push(C);return p}mergeHandlerResult(l,p,C,E,T){if(!C)return;a.e(l,C);const U={handlerName:E,originalEvent:C.originalEvent||T};C.zoomDelta!==void 0&&(p.zoom=U),C.panDelta!==void 0&&(p.drag=U),C.rollDelta!==void 0&&(p.roll=U),C.pitchDelta!==void 0&&(p.pitch=U),C.bearingDelta!==void 0&&(p.rotate=U)}_applyChanges(){const l={},p={},C={};for(const[E,T,U]of this._changes)E.panDelta&&(l.panDelta=(l.panDelta||new a.P(0,0))._add(E.panDelta)),E.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+E.pitchDelta),E.rollDelta&&(l.rollDelta=(l.rollDelta||0)+E.rollDelta),E.around!==void 0&&(l.around=E.around),E.pinchAround!==void 0&&(l.pinchAround=E.pinchAround),E.noInertia&&(l.noInertia=E.noInertia),a.e(p,T),a.e(C,U);this._updateMapTransform(l,p,C),this._changes=[]}_updateMapTransform(l,p,C){const E=this._map,T=E._getTransformForUpdate(),U=E.terrain;if(!(Qr(l)||U&&this._terrainMovement))return this._fireEvents(p,C,!0);E._stop(!0);let{panDelta:Q,zoomDelta:Z,bearingDelta:ae,pitchDelta:ce,rollDelta:Ce,around:fe,pinchAround:Re}=l;Re!==void 0&&(fe=Re),fe=fe||E.transform.centerPoint,U&&!T.isPointOnMapSurface(fe)&&(fe=T.centerPoint);const Ge={panDelta:Q,zoomDelta:Z,rollDelta:Ce,pitchDelta:ce,bearingDelta:ae,around:fe};this._map.cameraHelper.useGlobeControls&&!T.isPointOnMapSurface(fe)&&(fe=T.centerPoint);const Ze=fe.distSqr(T.centerPoint)<.01?T.center:T.screenPointToLocation(Q?fe.sub(Q):fe);this._handleMapControls({terrain:U,tr:T,deltasForHelper:Ge,preZoomAroundLoc:Ze,combinedEventsInProgress:p,panDelta:Q}),E._applyUpdatedTransform(T),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(p,C,!0)}_handleMapControls({terrain:l,tr:p,deltasForHelper:C,preZoomAroundLoc:E,combinedEventsInProgress:T,panDelta:U}){const Q=this._map.cameraHelper;if(Q.handleMapControlsRollPitchBearingZoom(C,p),l)return Q.useGlobeControls?(this._terrainMovement||!T.drag&&!T.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void Q.handleMapControlsPan(C,p,E)):this._terrainMovement||!T.drag&&!T.zoom?void(T.drag&&this._terrainMovement&&U?p.setCenter(p.screenPointToLocation(p.centerPoint.sub(U))):Q.handleMapControlsPan(C,p,E)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void Q.handleMapControlsPan(C,p,E));Q.handleMapControlsPan(C,p,E)}_fireEvents(l,p,C){const E=Df(this._eventsInProgress),T=Df(l),U={};for(const Ce in l){const{originalEvent:fe}=l[Ce];this._eventsInProgress[Ce]||(U[`${Ce}start`]=fe),this._eventsInProgress[Ce]=l[Ce]}!E&&T&&this._fireEvent("movestart",T.originalEvent);for(const Ce in U)this._fireEvent(Ce,U[Ce]);T&&this._fireEvent("move",T.originalEvent);for(const Ce in l){const{originalEvent:fe}=l[Ce];this._fireEvent(Ce,fe)}const Q={};let Z;for(const Ce in this._eventsInProgress){const{handlerName:fe,originalEvent:Re}=this._eventsInProgress[Ce];this._handlersById[fe].isActive()||(delete this._eventsInProgress[Ce],Z=p[fe]||Re,Q[`${Ce}end`]=Z)}for(const Ce in Q)this._fireEvent(Ce,Q[Ce]);const ae=Df(this._eventsInProgress),ce=(E||T)&&!ae;if(ce&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Ce=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Ce.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Ce)}if(C&&ce){this._updatingCamera=!0;const Ce=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),fe=Re=>Re!==0&&-this._bearingSnap<Re&&Re<this._bearingSnap;!Ce||!Ce.essential&&M.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:Z})),fe(this._map.getBearing())&&this._map.resetNorth()):(fe(Ce.bearing||this._map.getBearing())&&(Ce.bearing=0),Ce.freezeElevation=!0,this._map.easeTo(Ce,{originalEvent:Z})),this._updatingCamera=!1}}_fireEvent(l,p){this._map.fire(new a.l(l,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((l=>{delete this._frameId,this.handleEvent(new Ja("renderFrame",{timeStamp:l})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class rA extends a.E{constructor(l,p,C){super(),this._renderFrameCallback=()=>{const E=Math.min((M.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(E)),E<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=C.bearingSnap,this.cameraHelper=p,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(l,p){l.apply(this.transform),this.transform=l,this.cameraHelper=p}getCenter(){return new a.S(this.transform.center.lng,this.transform.center.lat)}setCenter(l,p){return this.jumpTo({center:l},p)}getCenterElevation(){return this.transform.elevation}setCenterElevation(l,p){return this.jumpTo({elevation:l},p),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(l){this._centerClampedToGround=l}panBy(l,p,C){return l=a.P.convert(l).mult(-1),this.panTo(this.transform.center,a.e({offset:l},p),C)}panTo(l,p,C){return this.easeTo(a.e({center:l},p),C)}getZoom(){return this.transform.zoom}setZoom(l,p){return this.jumpTo({zoom:l},p),this}zoomTo(l,p,C){return this.easeTo(a.e({zoom:l},p),C)}zoomIn(l,p){return this.zoomTo(this.getZoom()+1,l,p),this}zoomOut(l,p){return this.zoomTo(this.getZoom()-1,l,p),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(l,p){return l!=this.transform.fov&&(this.transform.setFov(l),this.fire(new a.l("movestart",p)).fire(new a.l("move",p)).fire(new a.l("moveend",p))),this}getBearing(){return this.transform.bearing}setBearing(l,p){return this.jumpTo({bearing:l},p),this}getPadding(){return this.transform.padding}setPadding(l,p){return this.jumpTo({padding:l},p),this}rotateTo(l,p,C){return this.easeTo(a.e({bearing:l},p),C)}resetNorth(l,p){return this.rotateTo(0,a.e({duration:1e3},l),p),this}resetNorthPitch(l,p){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},l),p),this}snapToNorth(l,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,p):this}getPitch(){return this.transform.pitch}setPitch(l,p){return this.jumpTo({pitch:l},p),this}getRoll(){return this.transform.roll}setRoll(l,p){return this.jumpTo({roll:l},p),this}cameraForBounds(l,p){l=rt.convert(l).adjustAntiMeridian();const C=p&&p.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),C,p)}_cameraForBoxAndBearing(l,p,C,E){const T={top:0,bottom:0,right:0,left:0};if(typeof(E=a.e({padding:T,offset:[0,0],maxZoom:this.transform.maxZoom},E)).padding=="number"){const ae=E.padding;E.padding={top:ae,bottom:ae,right:ae,left:ae}}const U=a.e(T,E.padding);E.padding=U;const Q=this.transform,Z=new rt(l,p);return this.cameraHelper.cameraForBoxAndBearing(E,U,Z,C,Q)}fitBounds(l,p,C){return this._fitInternal(this.cameraForBounds(l,p),p,C)}fitScreenCoordinates(l,p,C,E,T){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(l)),this.transform.screenPointToLocation(a.P.convert(p)),C,E),E,T)}_fitInternal(l,p,C){return l?(delete(p=a.e(l,p)).padding,p.linear?this.easeTo(p,C):this.flyTo(p,C)):this}jumpTo(l,p){this.stop();const C=this._getTransformForUpdate();let E=!1,T=!1,U=!1;const Q=C.zoom;this.cameraHelper.handleJumpToCenterZoom(C,l);const Z=C.zoom!==Q;return"elevation"in l&&C.elevation!==+l.elevation&&C.setElevation(+l.elevation),"bearing"in l&&C.bearing!==+l.bearing&&(E=!0,C.setBearing(+l.bearing)),"pitch"in l&&C.pitch!==+l.pitch&&(T=!0,C.setPitch(+l.pitch)),"roll"in l&&C.roll!==+l.roll&&(U=!0,C.setRoll(+l.roll)),l.padding==null||C.isPaddingEqual(l.padding)||C.setPadding(l.padding),this._applyUpdatedTransform(C),this.fire(new a.l("movestart",p)).fire(new a.l("move",p)),Z&&this.fire(new a.l("zoomstart",p)).fire(new a.l("zoom",p)).fire(new a.l("zoomend",p)),E&&this.fire(new a.l("rotatestart",p)).fire(new a.l("rotate",p)).fire(new a.l("rotateend",p)),T&&this.fire(new a.l("pitchstart",p)).fire(new a.l("pitch",p)).fire(new a.l("pitchend",p)),U&&this.fire(new a.l("rollstart",p)).fire(new a.l("roll",p)).fire(new a.l("rollend",p)),this.fire(new a.l("moveend",p))}calculateCameraOptionsFromTo(l,p,C,E=0){const T=a.a1.fromLngLat(l,p),U=a.a1.fromLngLat(C,E),Q=U.x-T.x,Z=U.y-T.y,ae=U.z-T.z,ce=Math.hypot(Q,Z,ae);if(ce===0)throw new Error("Can't calculate camera options with same From and To");const Ce=Math.hypot(Q,Z),fe=a.ak(this.transform.cameraToCenterDistance/ce/this.transform.tileSize),Re=180*Math.atan2(Q,-Z)/Math.PI;let Ge=180*Math.acos(Ce/ce)/Math.PI;return Ge=ae<0?90-Ge:90+Ge,{center:U.toLngLat(),elevation:E,zoom:fe,pitch:Ge,bearing:Re}}calculateCameraOptionsFromCameraLngLatAltRotation(l,p,C,E,T){const U=this.transform.calculateCenterFromCameraLngLatAlt(l,p,C,E);return{center:U.center,elevation:U.elevation,zoom:U.zoom,bearing:C,pitch:E,roll:T}}easeTo(l,p){this._stop(!1,l.easeId),((l=a.e({offset:[0,0],duration:500,easing:a.co},l)).animate===!1||!l.essential&&M.prefersReducedMotion)&&(l.duration=0);const C=this._getTransformForUpdate(),E=this.getBearing(),T=C.pitch,U=C.roll,Q="bearing"in l?this._normalizeBearing(l.bearing,E):E,Z="pitch"in l?+l.pitch:T,ae="roll"in l?this._normalizeBearing(l.roll,U):U,ce="padding"in l?l.padding:C.padding,Ce=a.P.convert(l.offset);let fe,Re;l.around&&(fe=a.S.convert(l.around),Re=C.locationToScreenPoint(fe));const Ge={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Ze=this.cameraHelper.handleEaseTo(C,{bearing:Q,pitch:Z,roll:ae,padding:ce,around:fe,aroundPoint:Re,offsetAsPoint:Ce,offset:l.offset,zoom:l.zoom,center:l.center});return this._rotating=this._rotating||E!==Q,this._pitching=this._pitching||Z!==T,this._rolling=this._rolling||ae!==U,this._padding=!C.isPaddingEqual(ce),this._zooming=this._zooming||Ze.isZooming,this._easeId=l.easeId,this._prepareEase(p,l.noMoveStart,Ge),this.terrain&&this._prepareElevation(Ze.elevationCenter),this._ease((Xe=>{Ze.easeFunc(Xe),this.terrain&&!l.freezeElevation&&this._updateElevation(Xe),this._applyUpdatedTransform(C),this._fireMoveEvents(p)}),(Xe=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(p,Xe)}),l),this}_prepareEase(l,p,C={}){this._moving=!0,p||C.moving||this.fire(new a.l("movestart",l)),this._zooming&&!C.zooming&&this.fire(new a.l("zoomstart",l)),this._rotating&&!C.rotating&&this.fire(new a.l("rotatestart",l)),this._pitching&&!C.pitching&&this.fire(new a.l("pitchstart",l)),this._rolling&&!C.rolling&&this.fire(new a.l("rollstart",l))}_prepareElevation(l){this._elevationCenter=l,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(l){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const p=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(l<1&&p!==this._elevationTarget){const C=this._elevationTarget-this._elevationStart;this._elevationStart+=l*(C-(p-(C*l+this._elevationStart))/(1-l)),this._elevationTarget=p}this.transform.setElevation(a.C.number(this._elevationStart,this._elevationTarget,l))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(l){if(!this.terrain&&l.elevation>=0&&l.pitch<=90)return{};const p=l.getCameraLngLat(),C=l.getCameraAltitude(),E=this.terrain?this.terrain.getElevationForLngLatZoom(p,l.zoom):0;if(C<E){const T=this.calculateCameraOptionsFromTo(p,E,l.center,l.elevation);return{pitch:T.pitch,zoom:T.zoom}}return{}}_applyUpdatedTransform(l){const p=[];if(p.push((E=>this._elevateCameraIfInsideTerrain(E))),this.transformCameraUpdate&&p.push((E=>this.transformCameraUpdate(E))),!p.length)return;const C=l.clone();for(const E of p){const T=C.clone(),{center:U,zoom:Q,roll:Z,pitch:ae,bearing:ce,elevation:Ce}=E(T);U&&T.setCenter(U),Ce!==void 0&&T.setElevation(Ce),Q!==void 0&&T.setZoom(Q),Z!==void 0&&T.setRoll(Z),ae!==void 0&&T.setPitch(ae),ce!==void 0&&T.setBearing(ce),C.apply(T)}this.transform.apply(C)}_fireMoveEvents(l){this.fire(new a.l("move",l)),this._zooming&&this.fire(new a.l("zoom",l)),this._rotating&&this.fire(new a.l("rotate",l)),this._pitching&&this.fire(new a.l("pitch",l)),this._rolling&&this.fire(new a.l("roll",l))}_afterEase(l,p){if(this._easeId&&p&&this._easeId===p)return;delete this._easeId;const C=this._zooming,E=this._rotating,T=this._pitching,U=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,C&&this.fire(new a.l("zoomend",l)),E&&this.fire(new a.l("rotateend",l)),T&&this.fire(new a.l("pitchend",l)),U&&this.fire(new a.l("rollend",l)),this.fire(new a.l("moveend",l))}flyTo(l,p){if(!l.essential&&M.prefersReducedMotion){const Wt=a.Q(l,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Wt,p)}this.stop(),l=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.co},l);const C=this._getTransformForUpdate(),E=C.bearing,T=C.pitch,U=C.roll,Q=C.padding,Z="bearing"in l?this._normalizeBearing(l.bearing,E):E,ae="pitch"in l?+l.pitch:T,ce="roll"in l?this._normalizeBearing(l.roll,U):U,Ce="padding"in l?l.padding:C.padding,fe=a.P.convert(l.offset);let Re=C.centerPoint.add(fe);const Ge=C.screenPointToLocation(Re),Ze=this.cameraHelper.handleFlyTo(C,{bearing:Z,pitch:ae,roll:ce,padding:Ce,locationAtOffset:Ge,offsetAsPoint:fe,center:l.center,minZoom:l.minZoom,zoom:l.zoom});let Xe=l.curve;const tt=Math.max(C.width,C.height),ot=tt/Ze.scaleOfZoom,nt=Ze.pixelPathLength;typeof Ze.scaleOfMinZoom=="number"&&(Xe=Math.sqrt(tt/Ze.scaleOfMinZoom/nt*2));const ct=Xe*Xe;function gt(Wt){const In=(ot*ot-tt*tt+(Wt?-1:1)*ct*ct*nt*nt)/(2*(Wt?ot:tt)*ct*nt);return Math.log(Math.sqrt(In*In+1)-In)}function xt(Wt){return(Math.exp(Wt)-Math.exp(-Wt))/2}function ht(Wt){return(Math.exp(Wt)+Math.exp(-Wt))/2}const Et=gt(!1);let Qt=function(Wt){return ht(Et)/ht(Et+Xe*Wt)},Kt=function(Wt){return tt*((ht(Et)*(xt(In=Et+Xe*Wt)/ht(In))-xt(Et))/ct)/nt;var In},Nt=(gt(!0)-Et)/Xe;if(Math.abs(nt)<2e-6||!isFinite(Nt)){if(Math.abs(tt-ot)<1e-6)return this.easeTo(l,p);const Wt=ot<tt?-1:1;Nt=Math.abs(Math.log(ot/tt))/Xe,Kt=()=>0,Qt=In=>Math.exp(Wt*Xe*In)}return l.duration="duration"in l?+l.duration:1e3*Nt/("screenSpeed"in l?+l.screenSpeed/Xe:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=E!==Z,this._pitching=ae!==T,this._rolling=ce!==U,this._padding=!C.isPaddingEqual(Ce),this._prepareEase(p,!1),this.terrain&&this._prepareElevation(Ze.targetCenter),this._ease((Wt=>{const In=Wt*Nt,kn=1/Qt(In),cn=Kt(In);this._rotating&&C.setBearing(a.C.number(E,Z,Wt)),this._pitching&&C.setPitch(a.C.number(T,ae,Wt)),this._rolling&&C.setRoll(a.C.number(U,ce,Wt)),this._padding&&(C.interpolatePadding(Q,Ce,Wt),Re=C.centerPoint.add(fe)),Ze.easeFunc(Wt,kn,cn,Re),this.terrain&&!l.freezeElevation&&this._updateElevation(Wt),this._applyUpdatedTransform(C),this._fireMoveEvents(p)}),(()=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(p)}),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,p){var C;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const E=this._onEaseEnd;delete this._onEaseEnd,E.call(this,p)}return l||(C=this.handlers)===null||C===void 0||C.stop(!1),this}_ease(l,p,C){C.animate===!1||C.duration===0?(l(1),p()):(this._easeStart=M.now(),this._easeOptions=C,this._onEaseFrame=l,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(l,p){l=a.aO(l,-180,180);const C=Math.abs(l-p);return Math.abs(l-360-p)<C&&(l-=360),Math.abs(l+360-p)<C&&(l+=360),l}queryTerrainElevation(l){return this.terrain?this.terrain.getElevationForLngLatZoom(a.S.convert(l),this.transform.tileZoom):null}}const Bu={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Nd{constructor(l=Bu){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=p=>{!p||p.sourceDataType!=="metadata"&&p.sourceDataType!=="visibility"&&p.dataType!=="style"&&p.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=l}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options.compact,this._container=x.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=x.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=x.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){x.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(l,p){const C=this._map._getUIString(`AttributionControl.${p}`);l.title=C,l.setAttribute("aria-label",C)}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map((E=>typeof E!="string"?"":E))):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const E=this._map.style.stylesheet;this.styleOwner=E.owner,this.styleId=E.id}const p=this._map.style.sourceCaches;for(const E in p){const T=p[E];if(T.used||T.usedForTerrain){const U=T.getSource();U.attribution&&l.indexOf(U.attribution)<0&&l.push(U.attribution)}}l=l.filter((E=>String(E).trim())),l.sort(((E,T)=>E.length-T.length)),l=l.filter(((E,T)=>{for(let U=T+1;U<l.length;U++)if(l[U].indexOf(E)>=0)return!1;return!0}));const C=l.join(" | ");C!==this._attribHTML&&(this._attribHTML=C,l.length?(this._innerContainer.innerHTML=x.sanitize(C),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Pf{constructor(l={}){this._updateCompact=()=>{const p=this._container.children;if(p.length){const C=p[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&C.classList.add("maplibregl-compact"):C.classList.remove("maplibregl-compact")}},this.options=l}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=x.create("div","maplibregl-ctrl");const p=x.create("a","maplibregl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){x.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class La{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const p=++this._id;return this._queue.push({callback:l,id:p,cancelled:!1}),p}remove(l){const p=this._currentlyRunning,C=p?this._queue.concat(p):this._queue;for(const E of C)if(E.id===l)return void(E.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const p=this._currentlyRunning=this._queue;this._queue=[];for(const C of p)if(!C.cancelled&&(C.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Gd=a.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class cu extends a.E{constructor(l){super(),this._lastTilesetChange=M.now(),this.sourceCache=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=l._source.tileSize*2**this.deltaZoom,l.usedForTerrain=!0,l.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(l,p){this.sourceCache.update(l,p),this._renderableTilesKeys=[];const C={};for(const E of st(l,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:p,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))C[E.key]=!0,this._renderableTilesKeys.push(E.key),this._tiles[E.key]||(E.terrainRttPosMatrix32f=new Float64Array(16),a.bY(E.terrainRttPosMatrix32f,0,a.$,a.$,0,0,1),this._tiles[E.key]=new oe(E,this.tileSize),this._lastTilesetChange=M.now());for(const E in this._tiles)C[E]||delete this._tiles[E]}freeRtt(l){for(const p in this._tiles){const C=this._tiles[p];(!l||C.tileID.equals(l)||C.tileID.isChildOf(l)||l.isChildOf(C.tileID))&&(C.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((l=>this.getTileByID(l)))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l,p){return p?this._getTerrainCoordsForTileRanges(l,p):this._getTerrainCoordsForRegularTile(l)}_getTerrainCoordsForRegularTile(l){const p={};for(const C of this._renderableTilesKeys){const E=this._tiles[C].tileID,T=l.clone(),U=a.ba();if(E.canonical.equals(l.canonical))a.bY(U,0,a.$,a.$,0,0,1);else if(E.canonical.isChildOf(l.canonical)){const Q=E.canonical.z-l.canonical.z,Z=E.canonical.x-(E.canonical.x>>Q<<Q),ae=E.canonical.y-(E.canonical.y>>Q<<Q),ce=a.$>>Q;a.bY(U,0,ce,ce,0,0,1),a.M(U,U,[-Z*ce,-ae*ce,0])}else{if(!l.canonical.isChildOf(E.canonical))continue;{const Q=l.canonical.z-E.canonical.z,Z=l.canonical.x-(l.canonical.x>>Q<<Q),ae=l.canonical.y-(l.canonical.y>>Q<<Q),ce=a.$>>Q;a.bY(U,0,a.$,a.$,0,0,1),a.M(U,U,[Z*ce,ae*ce,0]),a.N(U,U,[1/2**Q,1/2**Q,0])}}T.terrainRttPosMatrix32f=new Float32Array(U),p[C]=T}return p}_getTerrainCoordsForTileRanges(l,p){const C={};for(const E of this._renderableTilesKeys){const T=this._tiles[E].tileID;if(!this._isWithinTileRanges(T,p))continue;const U=l.clone(),Q=a.ba();if(T.canonical.z===l.canonical.z){const Z=l.canonical.x-T.canonical.x,ae=l.canonical.y-T.canonical.y;a.bY(Q,0,a.$,a.$,0,0,1),a.M(Q,Q,[Z*a.$,ae*a.$,0])}else if(T.canonical.z>l.canonical.z){const Z=T.canonical.z-l.canonical.z,ae=T.canonical.x-(T.canonical.x>>Z<<Z),ce=T.canonical.y-(T.canonical.y>>Z<<Z),Ce=l.canonical.x-(T.canonical.x>>Z),fe=l.canonical.y-(T.canonical.y>>Z),Re=a.$>>Z;a.bY(Q,0,Re,Re,0,0,1),a.M(Q,Q,[-ae*Re+Ce*a.$,-ce*Re+fe*a.$,0])}else{const Z=l.canonical.z-T.canonical.z,ae=l.canonical.x-(l.canonical.x>>Z<<Z),ce=l.canonical.y-(l.canonical.y>>Z<<Z),Ce=(l.canonical.x>>Z)-T.canonical.x,fe=(l.canonical.y>>Z)-T.canonical.y,Re=a.$<<Z;a.bY(Q,0,Re,Re,0,0,1),a.M(Q,Q,[ae*a.$+Ce*Re,ce*a.$+fe*Re,0])}U.terrainRttPosMatrix32f=new Float32Array(Q),C[E]=U}return C}getSourceTile(l,p){const C=this.sourceCache._source;let E=l.overscaledZ-this.deltaZoom;if(E>C.maxzoom&&(E=C.maxzoom),E<C.minzoom)return null;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(E).key);let T=this.sourceCache.getTileByID(this._sourceTileCache[l.key]);if((!T||!T.dem)&&p)for(;E>=C.minzoom&&(!T||!T.dem);)T=this.sourceCache.getTileByID(l.scaledTo(E--).key);return T}anyTilesAfterTime(l=Date.now()){return this._lastTilesetChange>=l}_isWithinTileRanges(l,p){return p[l.canonical.z]&&l.canonical.x>=p[l.canonical.z].minTileX&&l.canonical.x<=p[l.canonical.z].maxTileX&&l.canonical.y>=p[l.canonical.z].minTileY&&l.canonical.y<=p[l.canonical.z].maxTileY}}class Iu{constructor(l,p,C){this._meshCache={},this.painter=l,this.sourceCache=new cu(p),this.options=C,this.exaggeration=typeof C.exaggeration=="number"?C.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(l,p,C,E=a.$){var T;if(!(p>=0&&p<E&&C>=0&&C<E))return 0;const U=this.getTerrainData(l),Q=(T=U.tile)===null||T===void 0?void 0:T.dem;if(!Q)return 0;const Z=a.cs([],[p/E*a.$,C/E*a.$],U.u_terrain_matrix),ae=[Z[0]*Q.dim,Z[1]*Q.dim],ce=Math.floor(ae[0]),Ce=Math.floor(ae[1]),fe=ae[0]-ce,Re=ae[1]-Ce;return Q.get(ce,Ce)*(1-fe)*(1-Re)+Q.get(ce+1,Ce)*fe*(1-Re)+Q.get(ce,Ce+1)*(1-fe)*Re+Q.get(ce+1,Ce+1)*fe*Re}getElevationForLngLatZoom(l,p){if(!a.ct(p,l.wrap()))return 0;const{tileID:C,mercatorX:E,mercatorY:T}=this._getOverscaledTileIDFromLngLatZoom(l,p);return this.getElevation(C,E%a.$,T%a.$,a.$)}getElevation(l,p,C,E=a.$){return this.getDEMElevation(l,p,C,E)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const E=this.painter.context,T=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(E,T,E.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(E,new a.R({width:1,height:1}),E.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(E.gl.NEAREST,E.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ag([])}const p=this.sourceCache.getSourceTile(l,!0);if(p&&p.dem&&(!p.demTexture||p.needsTerrainPrepare)){const E=this.painter.context;p.demTexture=this.painter.getTileTexture(p.dem.stride),p.demTexture?p.demTexture.update(p.dem.getPixels(),{premultiply:!1}):p.demTexture=new a.T(E,p.dem.getPixels(),E.gl.RGBA,{premultiply:!1}),p.demTexture.bind(E.gl.NEAREST,E.gl.CLAMP_TO_EDGE),p.needsTerrainPrepare=!1}const C=p&&p+p.tileID.key+l.key;if(C&&!this._demMatrixCache[C]){const E=this.sourceCache.sourceCache._source.maxzoom;let T=l.canonical.z-p.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=E?T=l.canonical.z-E:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const U=l.canonical.x-(l.canonical.x>>T<<T),Q=l.canonical.y-(l.canonical.y>>T<<T),Z=a.cu(new Float64Array(16),[1/(a.$<<T),1/(a.$<<T),0]);a.M(Z,Z,[U*a.$,Q*a.$,0]),this._demMatrixCache[l.key]={matrix:Z,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:p&&p.dem&&p.dem.dim||1,u_terrain_matrix:C?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:p&&p.dem&&p.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(p&&p.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:p}}getFramebuffer(l){const p=this.painter,C=p.width/devicePixelRatio,E=p.height/devicePixelRatio;return!this._fbo||this._fbo.width===C&&this._fbo.height===E||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(p.context,{width:C,height:E,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(p.context,{width:C,height:E,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=p.context.createFramebuffer(C,E,!0,!1),this._fbo.depthAttachment.set(p.context.createRenderbuffer(p.context.gl.DEPTH_COMPONENT16,C,E))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const p=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let T=0,U=0;T<this._coordsTextureSize;T++)for(let Q=0;Q<this._coordsTextureSize;Q++,U+=4)p[U+0]=255&Q,p[U+1]=255&T,p[U+2]=Q>>8<<4|T>>8,p[U+3]=0;const C=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(p.buffer)),E=new a.T(l,C,l.gl.RGBA,{premultiply:!1});return E.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=E,E}pointCoordinate(l){this.painter.maybeDrawDepthAndCoords(!0);const p=new Uint8Array(4),C=this.painter.context,E=C.gl,T=Math.round(l.x*this.painter.pixelRatio/devicePixelRatio),U=Math.round(l.y*this.painter.pixelRatio/devicePixelRatio),Q=Math.round(this.painter.height/devicePixelRatio);C.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),E.readPixels(T,Q-U-1,1,1,E.RGBA,E.UNSIGNED_BYTE,p),C.bindFramebuffer.set(null);const Z=p[0]+(p[2]>>4<<8),ae=p[1]+((15&p[2])<<8),ce=this.coordsIndex[255-p[3]],Ce=ce&&this.sourceCache.getTileByID(ce);if(!Ce)return null;const fe=this._coordsTextureSize,Re=(1<<Ce.tileID.canonical.z)*fe;return new a.a1((Ce.tileID.canonical.x*fe+Z)/Re+Ce.tileID.wrap,(Ce.tileID.canonical.y*fe+ae)/Re,this.getElevation(Ce.tileID,Z,ae,fe))}depthAtPoint(l){const p=new Uint8Array(4),C=this.painter.context,E=C.gl;return C.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),E.readPixels(l.x,this.painter.height/devicePixelRatio-l.y-1,1,1,E.RGBA,E.UNSIGNED_BYTE,p),C.bindFramebuffer.set(null),(p[0]/16777216+p[1]/65536+p[2]/256+p[3])/256}getTerrainMesh(l){var p;const C=((p=this.painter.style.projection)===null||p===void 0?void 0:p.transitionState)>0,E=C&&l.canonical.y===0,T=C&&l.canonical.y===(1<<l.canonical.z)-1,U=`m_${E?"n":""}_${T?"s":""}`;if(this._meshCache[U])return this._meshCache[U];const Q=this.painter.context,Z=new a.cv,ae=new a.aN,ce=this.meshSize,Ce=a.$/ce,fe=ce*ce;for(let ht=0;ht<=ce;ht++)for(let Et=0;Et<=ce;Et++)Z.emplaceBack(Et*Ce,ht*Ce,0);for(let ht=0;ht<fe;ht+=ce+1)for(let Et=0;Et<ce;Et++)ae.emplaceBack(Et+ht,ce+Et+ht+1,ce+Et+ht+2),ae.emplaceBack(Et+ht,ce+Et+ht+2,Et+ht+1);const Re=Z.length,Ge=Re+(ce+1),Ze=(ce+1)*ce,Xe=E?a.bh:0,tt=E?0:1,ot=T?a.bi:a.$,nt=T?0:1;for(let ht=0;ht<=ce;ht++)Z.emplaceBack(ht*Ce,Xe,tt);for(let ht=0;ht<=ce;ht++)Z.emplaceBack(ht*Ce,ot,nt);for(let ht=0;ht<ce;ht++)ae.emplaceBack(Ze+ht,Ge+ht,Ge+ht+1),ae.emplaceBack(Ze+ht,Ge+ht+1,Ze+ht+1),ae.emplaceBack(0+ht,Re+ht+1,Re+ht),ae.emplaceBack(0+ht,0+ht+1,Re+ht+1);const ct=Z.length,gt=ct+2*(ce+1);for(const ht of[0,1])for(let Et=0;Et<=ce;Et++)for(const Qt of[0,1])Z.emplaceBack(ht*a.$,Et*Ce,Qt);for(let ht=0;ht<2*ce;ht+=2)ae.emplaceBack(ct+ht,ct+ht+1,ct+ht+3),ae.emplaceBack(ct+ht,ct+ht+3,ct+ht+2),ae.emplaceBack(gt+ht,gt+ht+3,gt+ht+1),ae.emplaceBack(gt+ht,gt+ht+2,gt+ht+3);const xt=new ou(Q.createVertexBuffer(Z,Gd.members),Q.createIndexBuffer(ae),a.aM.simpleSegment(0,0,Z.length,ae.length));return this._meshCache[U]=xt,xt}getMeshFrameDelta(l){return 2*Math.PI*a.bu/Math.pow(2,Math.max(l,0))/5}getMinTileElevationForLngLatZoom(l,p){var C;const{tileID:E}=this._getOverscaledTileIDFromLngLatZoom(l,p);return(C=this.getMinMaxElevation(E).minElevation)!==null&&C!==void 0?C:0}getMinMaxElevation(l){const p=this.getTerrainData(l).tile,C={minElevation:null,maxElevation:null};return p&&p.dem&&(C.minElevation=p.dem.min*this.exaggeration,C.maxElevation=p.dem.max*this.exaggeration),C}_getOverscaledTileIDFromLngLatZoom(l,p){const C=a.a1.fromLngLat(l.wrap()),E=(1<<p)*a.$,T=C.x*E,U=C.y*E,Q=Math.floor(T/a.$),Z=Math.floor(U/a.$);return{tileID:new a.Z(p,0,p,Q,Z),mercatorX:T,mercatorY:U}}}class ci{constructor(l,p,C){this._context=l,this._size=p,this._tileSize=C,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const l of this._objects)l.texture.destroy(),l.fbo.destroy()}_createObject(l){const p=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),C=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return C.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),p.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),p.colorAttachment.set(C.texture),{id:l,fbo:p,texture:C,stamp:-1,inUse:!1}}getObjectForId(l){return this._objects[l]}useObject(l){l.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((p=>l.id!==p)),this._recentlyUsed.push(l.id)}stampObject(l){l.stamp=++this._stamp}getOrCreateFreeObject(){for(const p of this._recentlyUsed)if(!this._objects[p].inUse)return this._objects[p];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const l=this._createObject(this._objects.length);return this._objects.push(l),l}freeObject(l){l.inUse=!1}freeAllObjects(){for(const l of this._objects)this.freeObject(l)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((l=>!l.inUse))===!1}}const fi={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class ku{constructor(l,p){this.painter=l,this.terrain=p,this.pool=new ci(l.context,30,p.sourceCache.tileSize*p.qualityFactor)}destruct(){this.pool.destruct()}getTexture(l){return this.pool.getObjectForId(l.rtt[this._stacks.length-1].id).texture}prepareForRender(l,p){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=l._order.filter((C=>!l._layers[C].isHidden(p))),this._coordsAscending={};for(const C in l.sourceCaches){this._coordsAscending[C]={};const E=l.sourceCaches[C].getVisibleCoordinates(),T=l.sourceCaches[C].getSource(),U=T instanceof Ln?T.terrainTileRanges:null;for(const Q of E){const Z=this.terrain.sourceCache.getTerrainCoords(Q,U);for(const ae in Z)this._coordsAscending[C][ae]||(this._coordsAscending[C][ae]=[]),this._coordsAscending[C][ae].push(Z[ae])}}this._coordsAscendingStr={};for(const C of l._order){const E=l._layers[C],T=E.source;if(fi[E.type]&&!this._coordsAscendingStr[T]){this._coordsAscendingStr[T]={};for(const U in this._coordsAscending[T])this._coordsAscendingStr[T][U]=this._coordsAscending[T][U].map((Q=>Q.key)).sort().join()}}for(const C of this._renderableTiles)for(const E in this._coordsAscendingStr){const T=this._coordsAscendingStr[E][C.tileID.key];T&&T!==C.rttCoords[E]&&(C.rtt=[])}}renderLayer(l,p){if(l.isHidden(this.painter.transform.zoom))return!1;const C=Object.assign(Object.assign({},p),{isRenderingToTexture:!0}),E=l.type,T=this.painter,U=this._renderableLayerIds[this._renderableLayerIds.length-1]===l.id;if(fi[E]&&(this._prevType&&fi[this._prevType]||this._stacks.push([]),this._prevType=E,this._stacks[this._stacks.length-1].push(l.id),!U))return!0;if(fi[this._prevType]||fi[E]&&U){this._prevType=E;const Q=this._stacks.length-1,Z=this._stacks[Q]||[];for(const ae of this._renderableTiles){if(this.pool.isFull()&&(Ka(this.painter,this.terrain,this._rttTiles,C),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(ae),ae.rtt[Q]){const Ce=this.pool.getObjectForId(ae.rtt[Q].id);if(Ce.stamp===ae.rtt[Q].stamp){this.pool.useObject(Ce);continue}}const ce=this.pool.getOrCreateFreeObject();this.pool.useObject(ce),this.pool.stampObject(ce),ae.rtt[Q]={id:ce.id,stamp:ce.stamp},T.context.bindFramebuffer.set(ce.fbo.framebuffer),T.context.clear({color:a.bf.transparent,stencil:0}),T.currentStencilSource=void 0;for(let Ce=0;Ce<Z.length;Ce++){const fe=T.style._layers[Z[Ce]],Re=fe.source?this._coordsAscending[fe.source][ae.tileID.key]:[ae.tileID];T.context.viewport.set([0,0,ce.fbo.width,ce.fbo.height]),T._renderTileClippingMasks(fe,Re,!0),T.renderLayer(T,T.style.sourceCaches[fe.source],fe,Re,C),fe.source&&(ae.rttCoords[fe.source]=this._coordsAscendingStr[fe.source][ae.tileID.key])}}return Ka(this.painter,this.terrain,this._rttTiles,C),this._rttTiles=[],this.pool.freeAllObjects(),fi[E]}return!1}}const Km={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Fa=c,za={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Bu,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Tu={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class ua{constructor(l,p,C=!1){this.mousedown=T=>{this.startMove(T,x.mousePos(this.element,T)),x.addEventListener(window,"mousemove",this.mousemove),x.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.move(T,x.mousePos(this.element,T))},this.mouseup=T=>{this._rotatePitchHandler.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=x.touchPos(this.element,T.targetTouches)[0],this.startMove(T,this._startPos),x.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),x.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=x.touchPos(this.element,T.targetTouches)[0],this.move(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=p;const E=new O1;this._rotatePitchHandler=new Xa({clickTolerance:3,move:(T,U)=>{const Q=p.getBoundingClientRect(),Z=new a.P((Q.bottom-Q.top)/2,(Q.right-Q.left)/2);return{bearingDelta:a.cn(new a.P(T.x,U.y),U,Z),pitchDelta:C?-.5*(U.y-T.y):void 0}},moveStateManager:E,enable:!0,assignEvents:()=>{}}),this.map=l,x.addEventListener(p,"mousedown",this.mousedown),x.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),x.addEventListener(p,"touchcancel",this.reset)}startMove(l,p){this._rotatePitchHandler.dragStart(l,p),x.disableDrag()}move(l,p){const C=this.map,{bearingDelta:E,pitchDelta:T}=this._rotatePitchHandler.dragMove(l,p)||{};E&&C.setBearing(C.getBearing()+E),T&&C.setPitch(C.getPitch()+T)}off(){const l=this.element;x.removeEventListener(l,"mousedown",this.mousedown),x.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),x.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),x.removeEventListener(window,"touchend",this.touchend),x.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){x.enableDrag(),x.removeEventListener(window,"mousemove",this.mousemove),x.removeEventListener(window,"mouseup",this.mouseup),x.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),x.removeEventListener(window,"touchend",this.touchend)}}let Ru;function OA(I,l,p,C=!1){if(C||!p.getCoveringTilesDetailsProvider().allowWorldCopies())return I?.wrap();const E=new a.S(I.lng,I.lat);if(I=new a.S(I.lng,I.lat),l){const T=new a.S(I.lng-360,I.lat),U=new a.S(I.lng+360,I.lat),Q=p.locationToScreenPoint(I).distSqr(l);p.locationToScreenPoint(T).distSqr(l)<Q?I=T:p.locationToScreenPoint(U).distSqr(l)<Q&&(I=U)}for(;Math.abs(I.lng-p.center.lng)>180;){const T=p.locationToScreenPoint(I);if(T.x>=0&&T.y>=0&&T.x<=p.width&&T.y<=p.height)break;I.lng>p.center.lng?I.lng-=360:I.lng+=360}return I.lng!==E.lng&&p.isPointOnMapSurface(p.locationToScreenPoint(I))?I:E}const hs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function bo(I,l,p){const C=I.classList;for(const E in hs)C.remove(`maplibregl-${p}-anchor-${E}`);C.add(`maplibregl-${p}-anchor-${l}`)}class Bl extends a.E{constructor(l){if(super(),this._onKeyPress=p=>{const C=p.code,E=p.charCode||p.keyCode;C!=="Space"&&C!=="Enter"&&E!==32&&E!==13||this.togglePopup()},this._onMapClick=p=>{const C=p.originalEvent.target,E=this._element;this._popup&&(C===E||E.contains(C))&&this.togglePopup()},this._update=p=>{if(!this._map)return;const C=this._map.loaded()&&!this._map.isMoving();(p?.type==="terrain"||p?.type==="render"&&!C)&&this._map.once("render",this._update),this._lngLat=OA(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let E="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?E=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(E=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let T="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?T="rotateX(0deg)":this._pitchAlignment==="map"&&(T=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||p&&p.type!=="moveend"||(this._pos=this._pos.round()),x.setTransform(this._element,`${hs[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${T} ${E}`),M.frameAsync(new AbortController).then((()=>{this._updateOpacity(p&&p.type==="moveend")})).catch((()=>{}))},this._onMove=p=>{if(!this._isDragging){const C=this._clickTolerance||this._map._clickTolerance;this._isDragging=p.point.dist(this._pointerdownPos)>=C}this._isDragging&&(this._pos=p.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=p=>{this._element.contains(p.originalEvent.target)&&(p.preventDefault(),this._positionDelta=p.point.sub(this._pos).add(this._offset),this._pointerdownPos=p.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._subpixelPositioning=l&&l.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,this.setOpacity(l?.opacity,l?.opacityWhenCovered),l&&l.element)this._element=l.element,this._offset=a.P.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=x.create("div");const p=x.createNS("http://www.w3.org/2000/svg","svg"),C=41,E=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${C}px`),p.setAttributeNS(null,"width",`${E}px`),p.setAttributeNS(null,"viewBox",`0 0 ${E} ${C}`);const T=x.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");const U=x.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"fill-rule","nonzero");const Q=x.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Q.setAttributeNS(null,"fill","#000000");const Z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const tt of Z){const ot=x.createNS("http://www.w3.org/2000/svg","ellipse");ot.setAttributeNS(null,"opacity","0.04"),ot.setAttributeNS(null,"cx","10.5"),ot.setAttributeNS(null,"cy","5.80029008"),ot.setAttributeNS(null,"rx",tt.rx),ot.setAttributeNS(null,"ry",tt.ry),Q.appendChild(ot)}const ae=x.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"fill",this._color);const ce=x.createNS("http://www.w3.org/2000/svg","path");ce.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ae.appendChild(ce);const Ce=x.createNS("http://www.w3.org/2000/svg","g");Ce.setAttributeNS(null,"opacity","0.25"),Ce.setAttributeNS(null,"fill","#000000");const fe=x.createNS("http://www.w3.org/2000/svg","path");fe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ce.appendChild(fe);const Re=x.createNS("http://www.w3.org/2000/svg","g");Re.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Re.setAttributeNS(null,"fill","#FFFFFF");const Ge=x.createNS("http://www.w3.org/2000/svg","g");Ge.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ze=x.createNS("http://www.w3.org/2000/svg","circle");Ze.setAttributeNS(null,"fill","#000000"),Ze.setAttributeNS(null,"opacity","0.25"),Ze.setAttributeNS(null,"cx","5.5"),Ze.setAttributeNS(null,"cy","5.5"),Ze.setAttributeNS(null,"r","5.4999962");const Xe=x.createNS("http://www.w3.org/2000/svg","circle");Xe.setAttributeNS(null,"fill","#FFFFFF"),Xe.setAttributeNS(null,"cx","5.5"),Xe.setAttributeNS(null,"cy","5.5"),Xe.setAttributeNS(null,"r","5.4999962"),Ge.appendChild(Ze),Ge.appendChild(Xe),U.appendChild(Q),U.appendChild(ae),U.appendChild(Ce),U.appendChild(Re),U.appendChild(Ge),p.appendChild(U),p.setAttributeNS(null,"height",C*this._scale+"px"),p.setAttributeNS(null,"width",E*this._scale+"px"),this._element.appendChild(p),this._offset=a.P.convert(l&&l.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(p=>{p.preventDefault()})),this._element.addEventListener("mousedown",(p=>{p.preventDefault()})),bo(this._element,this._anchor,"marker"),l&&l.className)for(const p of l.className.split(" "))this._element.classList.add(p);this._popup=null}addTo(l){return this.remove(),this._map=l,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",l._getUIString("Marker.Title")),l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),l.on("terrain",this._update),l.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),x.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=a.S.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const E=Math.abs(13.5)/Math.SQRT2;l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[E,-1*(38.1-13.5+E)],"bottom-right":[-E,-1*(38.1-13.5+E)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(l){return this._subpixelPositioning=l,this}getPopup(){return this._popup}togglePopup(){const l=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:l?(l.isOpen()?l.remove():(l.setLngLat(this._lngLat),l.addTo(this._map)),this):this}_updateOpacity(l=!1){var p,C;const E=(p=this._map)===null||p===void 0?void 0:p.terrain,T=this._map.transform.isLocationOccluded(this._lngLat);if(!E||T){const Re=T?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Re&&(this._element.style.opacity=Re))}if(l)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const U=this._map,Q=U.terrain.depthAtPoint(this._pos),Z=U.terrain.getElevationForLngLatZoom(this._lngLat,U.transform.tileZoom);if(U.transform.lngLatToCameraDepth(this._lngLat,Z)-Q<.006)return void(this._element.style.opacity=this._opacity);const ae=-this._offset.y/U.transform.pixelsPerMeter,ce=Math.sin(U.getPitch()*Math.PI/180)*ae,Ce=U.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),fe=U.transform.lngLatToCameraDepth(this._lngLat,Z+ce)-Ce>.006;!((C=this._popup)===null||C===void 0)&&C.isOpen()&&fe&&this._popup.remove(),this._element.style.opacity=fe?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(l){return this._offset=a.P.convert(l),this._update(),this}addClassName(l){this._element.classList.add(l)}removeClassName(l){this._element.classList.remove(l)}toggleClassName(l){return this._element.classList.toggle(l)}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(l,p){return(this._opacity===void 0||l===void 0&&p===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),l!==void 0&&(this._opacity=l),p!==void 0&&(this._opacityWhenCovered=p),this._map&&this._updateOpacity(!0),this}}const Us={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let BA=0,el=!1;const Cr={maxWidth:100,unit:"metric"};function Po(I,l,p){const C=p&&p.maxWidth||100,E=I._container.clientHeight/2,T=I._container.clientWidth/2,U=I.unproject([T-C/2,E]),Q=I.unproject([T+C/2,E]),Z=Math.round(I.project(Q).x-I.project(U).x),ae=Math.min(C,Z,I._container.clientWidth),ce=U.distanceTo(Q);if(p&&p.unit==="imperial"){const Ce=3.2808*ce;Ce>5280?qo(l,ae,Ce/5280,I._getUIString("ScaleControl.Miles")):qo(l,ae,Ce,I._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?qo(l,ae,ce/1852,I._getUIString("ScaleControl.NauticalMiles")):ce>=1e3?qo(l,ae,ce/1e3,I._getUIString("ScaleControl.Kilometers")):qo(l,ae,ce,I._getUIString("ScaleControl.Meters"))}function qo(I,l,p,C){const E=(function(T){const U=Math.pow(10,`${Math.floor(T)}`.length-1);let Q=T/U;return Q=Q>=10?10:Q>=5?5:Q>=3?3:Q>=2?2:Q>=1?1:(function(Z){const ae=Math.pow(10,Math.ceil(-Math.log(Z)/Math.LN10));return Math.round(Z*ae)/ae})(Q),U*Q})(p);I.style.width=l*(E/p)+"px",I.innerHTML=`${E}&nbsp;${C}`}const Wd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Vh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function IA(I){if(I){if(typeof I=="number"){const l=Math.round(Math.abs(I)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,I),"top-left":new a.P(l,l),"top-right":new a.P(-l,l),bottom:new a.P(0,-I),"bottom-left":new a.P(l,-l),"bottom-right":new a.P(-l,-l),left:new a.P(I,0),right:new a.P(-I,0)}}if(I instanceof a.P||Array.isArray(I)){const l=a.P.convert(I);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:a.P.convert(I.center||[0,0]),top:a.P.convert(I.top||[0,0]),"top-left":a.P.convert(I["top-left"]||[0,0]),"top-right":a.P.convert(I["top-right"]||[0,0]),bottom:a.P.convert(I.bottom||[0,0]),"bottom-left":a.P.convert(I["bottom-left"]||[0,0]),"bottom-right":a.P.convert(I["bottom-right"]||[0,0]),left:a.P.convert(I.left||[0,0]),right:a.P.convert(I.right||[0,0])}}return IA(new a.P(0,0))}const Uf=c;s.AJAXError=a.cz,s.Event=a.l,s.Evented=a.E,s.LngLat=a.S,s.MercatorCoordinate=a.a1,s.Point=a.P,s.addProtocol=a.cA,s.config=a.a,s.removeProtocol=a.cB,s.AttributionControl=Nd,s.BoxZoomHandler=n0,s.CanvasSource=wn,s.CooperativeGesturesHandler=hh,s.DoubleClickZoomHandler=jd,s.DragPanHandler=oc,s.DragRotateHandler=Ql,s.EdgeInsets=El,s.FullscreenControl=class extends a.E{constructor(I={}){super(),this._onFullscreenChange=()=>{var l;let p=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((l=p?.shadowRoot)===null||l===void 0)&&l.fullscreenElement;)p=p.shadowRoot.fullscreenElement;p===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,I&&I.container&&(I.container instanceof HTMLElement?this._container=I.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(I){return this._map=I,this._container||(this._container=this._map.getContainer()),this._controlContainer=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){x.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const I=this._fullscreenButton=x.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);x.create("span","maplibregl-ctrl-icon",I).setAttribute("aria-hidden","true"),I.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const I=this._getTitle();this._fullscreenButton.setAttribute("aria-label",I),this._fullscreenButton.title=I}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},s.GeoJSONSource=Tn,s.GeolocateControl=class extends a.E{constructor(I){super(),this._onSuccess=l=>{if(this._map){if(this._isOutOfMapMaxBounds(l))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",l)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=l,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(l),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(l),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",l)),this._finish()}},this._updateCamera=l=>{const p=new a.S(l.coords.longitude,l.coords.latitude),C=l.coords.accuracy,E=this._map.getBearing(),T=a.e({bearing:E},this.options.fitBoundsOptions),U=rt.fromLngLat(p,C);this._map.fitBounds(U,T,{geolocateSource:!0})},this._updateMarker=l=>{if(l){const p=new a.S(l.coords.longitude,l.coords.latitude);this._accuracyCircleMarker.setLngLat(p).addTo(this._map),this._userLocationDotMarker.setLngLat(p).addTo(this._map),this._accuracy=l.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=l=>{if(this._map){if(l.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(l.code===3&&el)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",l)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(l=>l.preventDefault())),this._geolocateButton=x.create("button","maplibregl-ctrl-geolocate",this._container),x.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=l=>{if(this._map){if(l===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}else{const p=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=x.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Bl({element:this._dotElement}),this._circleElement=x.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Bl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(p=>{const C=p?.[0]instanceof ResizeObserverEntry;p.geolocateSource||this._watchState!=="ACTIVE_LOCK"||C||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))}))}},this.options=a.e({},Us,I)}onAdd(I){return this._map=I,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return a._(this,arguments,void 0,(function*(l=!1){if(Ru!==void 0&&!l)return Ru;if(window.navigator.permissions===void 0)return Ru=!!window.navigator.geolocation,Ru;try{Ru=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ru=!!window.navigator.geolocation}return Ru}))})().then((l=>this._finishSetupUI(l))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),x.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,BA=0,el=!1}_isOutOfMapMaxBounds(I){const l=this._map.getMaxBounds(),p=I.coords;return l&&(p.longitude<l.getWest()||p.longitude>l.getEast()||p.latitude<l.getSouth()||p.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const I=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&I))return;const l=this._map.project(I),p=this._map.unproject([l.x+100,l.y]),C=I.distanceTo(p)/100,E=2*this._accuracy/C;this._circleElement.style.width=`${E.toFixed(2)}px`,this._circleElement.style.height=`${E.toFixed(2)}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":BA--,el=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let I;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),BA++,BA>1?(I={maximumAge:6e5,timeout:0},el=!0):(I=this.options.positionOptions,el=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,I)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},s.GlobeControl=class{constructor(){this._toggleProjection=()=>{var I;const l=(I=this._map.getProjection())===null||I===void 0?void 0:I.type;this._map.setProjection(l!=="mercator"&&l?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var I;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((I=this._map.getProjection())===null||I===void 0?void 0:I.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(I){return this._map=I,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=x.create("button","maplibregl-ctrl-globe",this._container),x.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){x.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},s.Hash=qe,s.ImageSource=Ln,s.KeyboardHandler=Or,s.LngLatBounds=rt,s.LogoControl=Pf,s.Map=class extends rA{constructor(I){var l,p;a.cw.mark(a.cx.create);const C=Object.assign(Object.assign(Object.assign({},za),I),{canvasContextAttributes:Object.assign(Object.assign({},za.canvasContextAttributes),I.canvasContextAttributes)});if(C.minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const E=new Pr,T=new Ms;if(C.minZoom!==void 0&&E.setMinZoom(C.minZoom),C.maxZoom!==void 0&&E.setMaxZoom(C.maxZoom),C.minPitch!==void 0&&E.setMinPitch(C.minPitch),C.maxPitch!==void 0&&E.setMaxPitch(C.maxPitch),C.renderWorldCopies!==void 0&&E.setRenderWorldCopies(C.renderWorldCopies),super(E,T,{bearingSnap:C.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new La,this._controls=[],this._mapId=a.a7(),this._contextLost=Q=>{Q.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:Q}))},this._contextRestored=Q=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:Q}))},this._onMapScroll=Q=>{if(Q.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=C.interactive,this._maxTileCacheSize=C.maxTileCacheSize,this._maxTileCacheZoomLevels=C.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},C.canvasContextAttributes),this._trackResize=C.trackResize===!0,this._bearingSnap=C.bearingSnap,this._centerClampedToGround=C.centerClampedToGround,this._refreshExpiredTiles=C.refreshExpiredTiles===!0,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions===!0,this._collectResourceTiming=C.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Km),C.locale),this._clickTolerance=C.clickTolerance,this._overridePixelRatio=C.pixelRatio,this._maxCanvasSize=C.maxCanvasSize,this.transformCameraUpdate=C.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=C.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=H.addThrottleControl((()=>this.isMoving())),this._requestManager=new G(C.transformRequest),typeof C.container=="string"){if(this._container=document.getElementById(C.container),!this._container)throw new Error(`Container '${C.container}' not found.`)}else{if(!(C.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let Q=!1;const Z=sh((ae=>{this._trackResize&&!this._removed&&(this.resize(ae),this.redraw())}),50);this._resizeObserver=new ResizeObserver((ae=>{Q?Z(ae):Q=!0})),this._resizeObserver.observe(this._container)}this.handlers=new Um(this,C),this._hash=C.hash&&new qe(typeof C.hash=="string"&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,elevation:C.elevation,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch,roll:C.roll}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,a.e({},C.fitBoundsOptions,{duration:0}))));const U=typeof C.style=="string"||((p=(l=C.style)===null||l===void 0?void 0:l.projection)===null||p===void 0?void 0:p.type)!=="globe";this.resize(null,U),this._localIdeographFontFamily=C.localIdeographFontFamily,this._validateStyle=C.validateStyle,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new Nd(typeof C.attributionControl=="boolean"?void 0:C.attributionControl)),C.maplibreLogo&&this.addControl(new Pf,C.logoPosition),this.on("style.load",(()=>{if(U||this._resizeTransform(),this.transform.unmodified){const Q=a.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(Q)}})),this.on("data",(Q=>{this._update(Q.dataType==="style"),this.fire(new a.l(`${Q.dataType}data`,Q))})),this.on("dataloading",(Q=>{this.fire(new a.l(`${Q.dataType}dataloading`,Q))})),this.on("dataabort",(Q=>{this.fire(new a.l("sourcedataabort",Q))}))}_getMapId(){return this._mapId}setGlobalStateProperty(I,l){return this.style.setGlobalStateProperty(I,l),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(I,l){if(l===void 0&&(l=I.getDefaultPosition?I.getDefaultPosition():"top-right"),!I||!I.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=I.onAdd(this);this._controls.push(I);const C=this._controlPositions[l];return l.indexOf("bottom")!==-1?C.insertBefore(p,C.firstChild):C.appendChild(p),this}removeControl(I){if(!I||!I.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(I);return l>-1&&this._controls.splice(l,1),I.onRemove(this),this}hasControl(I){return this._controls.indexOf(I)>-1}coveringTiles(I){return st(this.transform,I)}calculateCameraOptionsFromTo(I,l,p,C){return C==null&&this.terrain&&(C=this.terrain.getElevationForLngLatZoom(p,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(I,l,p,C)}resize(I,l=!0){const[p,C]=this._containerDimensions(),E=this._getClampedPixelRatio(p,C);if(this._resizeCanvas(p,C,E),this.painter.resize(p,C,E),this.painter.overLimit()){const U=this.painter.context.gl;this._maxCanvasSize=[U.drawingBufferWidth,U.drawingBufferHeight];const Q=this._getClampedPixelRatio(p,C);this._resizeCanvas(p,C,Q),this.painter.resize(p,C,Q)}this._resizeTransform(l);const T=!this._moving;return T&&(this.stop(),this.fire(new a.l("movestart",I)).fire(new a.l("move",I))),this.fire(new a.l("resize",I)),T&&this.fire(new a.l("moveend",I)),this}_resizeTransform(I=!0){var l;const[p,C]=this._containerDimensions();this.transform.resize(p,C,I),(l=this._requestedCameraState)===null||l===void 0||l.resize(p,C,I)}_getClampedPixelRatio(I,l){const{0:p,1:C}=this._maxCanvasSize,E=this.getPixelRatio(),T=I*E,U=l*E;return Math.min(T>p?p/T:1,U>C?C/U:1)*E}getPixelRatio(){var I;return(I=this._overridePixelRatio)!==null&&I!==void 0?I:devicePixelRatio}setPixelRatio(I){this._overridePixelRatio=I,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(I){return this.transform.setMaxBounds(rt.convert(I)),this._update()}setMinZoom(I){if((I=I??-2)>=-2&&I<=this.transform.maxZoom)return this.transform.setMinZoom(I),this._update(),this.getZoom()<I&&this.setZoom(I),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(I){if((I=I??22)>=this.transform.minZoom)return this.transform.setMaxZoom(I),this._update(),this.getZoom()>I&&this.setZoom(I),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(I){if((I=I??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(I>=0&&I<=this.transform.maxPitch)return this.transform.setMinPitch(I),this._update(),this.getPitch()<I&&this.setPitch(I),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(I){if((I=I??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(I>=this.transform.minPitch)return this.transform.setMaxPitch(I),this._update(),this.getPitch()>I&&this.setPitch(I),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(I){return this.transform.setRenderWorldCopies(I),this._update()}project(I){return this.transform.locationToScreenPoint(a.S.convert(I),this.style&&this.terrain)}unproject(I){return this.transform.screenPointToLocation(a.P.convert(I),this.terrain)}isMoving(){var I;return this._moving||((I=this.handlers)===null||I===void 0?void 0:I.isMoving())}isZooming(){var I;return this._zooming||((I=this.handlers)===null||I===void 0?void 0:I.isZooming())}isRotating(){var I;return this._rotating||((I=this.handlers)===null||I===void 0?void 0:I.isRotating())}_createDelegatedListener(I,l,p){if(I==="mouseenter"||I==="mouseover"){let C=!1;return{layers:l,listener:p,delegates:{mousemove:T=>{const U=l.filter((Z=>this.getLayer(Z))),Q=U.length!==0?this.queryRenderedFeatures(T.point,{layers:U}):[];Q.length?C||(C=!0,p.call(this,new Za(I,this,T.originalEvent,{features:Q}))):C=!1},mouseout:()=>{C=!1}}}}if(I==="mouseleave"||I==="mouseout"){let C=!1;return{layers:l,listener:p,delegates:{mousemove:U=>{const Q=l.filter((Z=>this.getLayer(Z)));(Q.length!==0?this.queryRenderedFeatures(U.point,{layers:Q}):[]).length?C=!0:C&&(C=!1,p.call(this,new Za(I,this,U.originalEvent)))},mouseout:U=>{C&&(C=!1,p.call(this,new Za(I,this,U.originalEvent)))}}}}{const C=E=>{const T=l.filter((Q=>this.getLayer(Q))),U=T.length!==0?this.queryRenderedFeatures(E.point,{layers:T}):[];U.length&&(E.features=U,p.call(this,E),delete E.features)};return{layers:l,listener:p,delegates:{[I]:C}}}}_saveDelegatedListener(I,l){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[I]=this._delegatedListeners[I]||[],this._delegatedListeners[I].push(l)}_removeDelegatedListener(I,l,p){if(!this._delegatedListeners||!this._delegatedListeners[I])return;const C=this._delegatedListeners[I];for(let E=0;E<C.length;E++){const T=C[E];if(T.listener===p&&T.layers.length===l.length&&T.layers.every((U=>l.includes(U)))){for(const U in T.delegates)this.off(U,T.delegates[U]);return void C.splice(E,1)}}}on(I,l,p){if(p===void 0)return super.on(I,l);const C=typeof l=="string"?[l]:l,E=this._createDelegatedListener(I,C,p);this._saveDelegatedListener(I,E);for(const T in E.delegates)this.on(T,E.delegates[T]);return{unsubscribe:()=>{this._removeDelegatedListener(I,C,p)}}}once(I,l,p){if(p===void 0)return super.once(I,l);const C=typeof l=="string"?[l]:l,E=this._createDelegatedListener(I,C,p);for(const T in E.delegates){const U=E.delegates[T];E.delegates[T]=(...Q)=>{this._removeDelegatedListener(I,C,p),U(...Q)}}this._saveDelegatedListener(I,E);for(const T in E.delegates)this.once(T,E.delegates[T]);return this}off(I,l,p){return p===void 0?super.off(I,l):(this._removeDelegatedListener(I,typeof l=="string"?[l]:l,p),this)}queryRenderedFeatures(I,l){if(!this.style)return[];let p;const C=I instanceof a.P||Array.isArray(I),E=C?I:[[0,0],[this.transform.width,this.transform.height]];if(l=l||(C?{}:I)||{},E instanceof a.P||typeof E[0]=="number")p=[a.P.convert(E)];else{const T=a.P.convert(E[0]),U=a.P.convert(E[1]);p=[T,new a.P(U.x,T.y),U,new a.P(T.x,U.y),T]}return this.style.queryRenderedFeatures(p,l,this.transform)}querySourceFeatures(I,l){return this.style.querySourceFeatures(I,l)}setStyle(I,l){return(l=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&I?(this._diffStyle(I,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(I,l))}setTransformRequest(I){return this._requestManager.setTransformRequest(I),this}_getUIString(I){const l=this._locale[I];if(l==null)throw new Error(`Missing UI string '${I}'`);return l}_updateStyle(I,l){var p,C;if(l.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(I,l)));const E=this.style&&l.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!I)),I?(this.style=new vp(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof I=="string"?this.style.loadURL(I,l,E):this.style.loadJSON(I,l,E),this):((C=(p=this.style)===null||p===void 0?void 0:p.projection)===null||C===void 0||C.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new vp(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(I,l){if(typeof I=="string"){const p=this._requestManager.transformRequest(I,"Style");a.j(p,new AbortController).then((C=>{this._updateDiff(C.data,l)})).catch((C=>{C&&this.fire(new a.k(C))}))}else typeof I=="object"&&this._updateDiff(I,l)}_updateDiff(I,l){try{this.style.setState(I,l)&&this._update(!0)}catch(p){a.w(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(I,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(I,l){return this._lazyInitEmptyStyle(),this.style.addSource(I,l),this._update(!0)}isSourceLoaded(I){const l=this.style&&this.style.sourceCaches[I];if(l!==void 0)return l.loaded();this.fire(new a.k(new Error(`There is no source with ID '${I}'`)))}setTerrain(I){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),I){const l=this.style.sourceCaches[I.source];if(!l)throw new Error(`cannot load terrain, because there exists no source with ID: ${I.source}`);this.terrain===null&&l.reload();for(const p in this.style._layers){const C=this.style._layers[p];C.type==="hillshade"&&C.source===I.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),C.type==="color-relief"&&C.source===I.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Iu(this.painter,l,I),this.painter.renderToTexture=new ku(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=p=>{var C;p.dataType==="style"?this.terrain.sourceCache.freeRtt():p.dataType==="source"&&p.tile&&(p.sourceId!==I.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((C=p.source)===null||C===void 0?void 0:C.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(p.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:I})),this}getTerrain(){var I,l;return(l=(I=this.terrain)===null||I===void 0?void 0:I.options)!==null&&l!==void 0?l:null}areTilesLoaded(){const I=this.style&&this.style.sourceCaches;for(const l in I){const p=I[l]._tiles;for(const C in p){const E=p[C];if(E.state!=="loaded"&&E.state!=="errored")return!1}}return!0}removeSource(I){return this.style.removeSource(I),this._update(!0)}getSource(I){return this.style.getSource(I)}setSourceTileLodParams(I,l,p){if(p){const C=this.getSource(p);if(!C)throw new Error(`There is no source with ID "${p}", cannot set LOD parameters`);C.calculateTileZoom=yt(Math.max(1,I),Math.max(1,l))}else for(const C in this.style.sourceCaches)this.style.sourceCaches[C].getSource().calculateTileZoom=yt(Math.max(1,I),Math.max(1,l));return this._update(!0),this}refreshTiles(I,l){const p=this.style.sourceCaches[I];if(!p)throw new Error(`There is no source cache with ID "${I}", cannot refresh tile`);l===void 0?p.reload(!0):p.refreshTiles(l.map((C=>new a.a4(C.z,C.x,C.y))))}addImage(I,l,p={}){const{pixelRatio:C=1,sdf:E=!1,stretchX:T,stretchY:U,content:Q,textFitWidth:Z,textFitHeight:ae}=p;if(this._lazyInitEmptyStyle(),!(l instanceof HTMLImageElement||a.b(l))){if(l.width===void 0||l.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ce,height:Ce,data:fe}=l,Re=l;return this.style.addImage(I,{data:new a.R({width:ce,height:Ce},new Uint8Array(fe)),pixelRatio:C,stretchX:T,stretchY:U,content:Q,textFitWidth:Z,textFitHeight:ae,sdf:E,version:0,userImage:Re}),Re.onAdd&&Re.onAdd(this,I),this}}{const{width:ce,height:Ce,data:fe}=M.getImageData(l);this.style.addImage(I,{data:new a.R({width:ce,height:Ce},fe),pixelRatio:C,stretchX:T,stretchY:U,content:Q,textFitWidth:Z,textFitHeight:ae,sdf:E,version:0})}}updateImage(I,l){const p=this.style.getImage(I);if(!p)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const C=l instanceof HTMLImageElement||a.b(l)?M.getImageData(l):l,{width:E,height:T,data:U}=C;if(E===void 0||T===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(E!==p.data.width||T!==p.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const Q=!(l instanceof HTMLImageElement||a.b(l));return p.data.replace(U,Q),this.style.updateImage(I,p),this}getImage(I){return this.style.getImage(I)}hasImage(I){return I?!!this.style.getImage(I):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(I){this.style.removeImage(I)}loadImage(I){return H.getImage(this._requestManager.transformRequest(I,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(I,l){return this._lazyInitEmptyStyle(),this.style.addLayer(I,l),this._update(!0)}moveLayer(I,l){return this.style.moveLayer(I,l),this._update(!0)}removeLayer(I){return this.style.removeLayer(I),this._update(!0)}getLayer(I){return this.style.getLayer(I)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(I,l,p){return this.style.setLayerZoomRange(I,l,p),this._update(!0)}setFilter(I,l,p={}){return this.style.setFilter(I,l,p),this._update(!0)}getFilter(I){return this.style.getFilter(I)}setPaintProperty(I,l,p,C={}){return this.style.setPaintProperty(I,l,p,C),this._update(!0)}getPaintProperty(I,l){return this.style.getPaintProperty(I,l)}setLayoutProperty(I,l,p,C={}){return this.style.setLayoutProperty(I,l,p,C),this._update(!0)}getLayoutProperty(I,l){return this.style.getLayoutProperty(I,l)}setGlyphs(I,l={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(I,l),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(I,l,p={}){return this._lazyInitEmptyStyle(),this.style.addSprite(I,l,p,(C=>{C||this._update(!0)})),this}removeSprite(I){return this._lazyInitEmptyStyle(),this.style.removeSprite(I),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(I,l={}){return this._lazyInitEmptyStyle(),this.style.setSprite(I,l,(p=>{p||this._update(!0)})),this}setLight(I,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(I,l),this._update(!0)}getLight(){return this.style.getLight()}setSky(I,l={}){return this._lazyInitEmptyStyle(),this.style.setSky(I,l),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(I,l){return this.style.setFeatureState(I,l),this._update()}removeFeatureState(I,l){return this.style.removeFeatureState(I,l),this._update()}getFeatureState(I){return this.style.getFeatureState(I)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let I=0,l=0;return this._container&&(I=this._container.clientWidth||400,l=this._container.clientHeight||300),[I,l]}_setupContainer(){const I=this._container;I.classList.add("maplibregl-map");const l=this._canvasContainer=x.create("div","maplibregl-canvas-container",I);this._interactive&&l.classList.add("maplibregl-interactive"),this._canvas=x.create("canvas","maplibregl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const p=this._containerDimensions(),C=this._getClampedPixelRatio(p[0],p[1]);this._resizeCanvas(p[0],p[1],C);const E=this._controlContainer=x.create("div","maplibregl-control-container",I),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((U=>{T[U]=x.create("div",`maplibregl-ctrl-${U} `,E)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(I,l,p){this._canvas.width=Math.floor(p*I),this._canvas.height=Math.floor(p*l),this._canvas.style.width=`${I}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const I=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let l=null;this._canvas.addEventListener("webglcontextcreationerror",(C=>{l={requestedAttributes:I},C&&(l.statusMessage=C.statusMessage,l.type=C.type)}),{once:!0});let p=null;if(p=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,I):this._canvas.getContext("webgl2",I)||this._canvas.getContext("webgl",I),!p){const C="Failed to initialize WebGL";throw l?(l.message=C,new Error(JSON.stringify(l))):new Error(C)}this.painter=new oh(p,this.transform),k.testSupport(p)}migrateProjection(I,l){super.migrateProjection(I,l),this.painter.transform=I,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(I){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||I,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(I){return this._update(),this._renderTaskQueue.add(I)}_cancelRenderFrame(I){this._renderTaskQueue.remove(I)}_render(I){var l,p,C,E,T;const U=this._idleTriggered?this._fadeDuration:0,Q=((l=this.style.projection)===null||l===void 0?void 0:l.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(I),this._removed)return;let Z=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Ce=this.transform.zoom,fe=M.now();this.style.zoomHistory.update(Ce,fe);const Re=new a.F(Ce,{now:fe,fadeDuration:U,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ge=Re.crossFadingFactor();Ge===1&&Ge===this._crossFadingFactor||(Z=!0,this._crossFadingFactor=Ge),this.style.update(Re)}const ae=((p=this.style.projection)===null||p===void 0?void 0:p.transitionState)>0!==Q;(C=this.style.projection)===null||C===void 0||C.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((E=this.style.projection)===null||E===void 0?void 0:E.transitionState,(T=this.style.projection)===null||T===void 0?void 0:T.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||ae)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,U,this._crossSourceCollisions,ae),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:U,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cw.mark(a.cx.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||Z)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const ce=this._sourcesDirty||this._styleDirty||this._placementDirty;return ce||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||ce||(this._fullyLoaded=!0,a.cw.mark(a.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var I;this._hash&&this._hash.remove();for(const p of this._controls)p.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),H.removeThrottleControl(this._imageQueueHandle),(I=this._resizeObserver)===null||I===void 0||I.disconnect();const l=this.painter.context.gl.getExtension("WEBGL_lose_context");l?.loseContext&&l.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),x.remove(this._canvasContainer),x.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cw.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,M.frame(this._frameRequest,(I=>{a.cw.frame(I),this._frameRequest=null;try{this._render(I)}catch(l){if(!a.cy(l)&&!(function(p){return p.message===Zu})(l))throw l}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(I){this._showTileBoundaries!==I&&(this._showTileBoundaries=I,this._update())}get showPadding(){return!!this._showPadding}set showPadding(I){this._showPadding!==I&&(this._showPadding=I,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(I){this._showCollisionBoxes!==I&&(this._showCollisionBoxes=I,I?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(I){this._showOverdrawInspector!==I&&(this._showOverdrawInspector=I,this._update())}get repaint(){return!!this._repaint}set repaint(I){this._repaint!==I&&(this._repaint=I,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(I){this._vertices=I,this._update()}get version(){return Fa}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(I){return this._lazyInitEmptyStyle(),this.style.setProjection(I),this._update(!0)}},s.MapMouseEvent=Za,s.MapTouchEvent=lh,s.MapWheelEvent=uh,s.Marker=Bl,s.NavigationControl=class{constructor(I){this._updateZoomButtons=()=>{const l=this._map.getZoom(),p=l===this._map.getMaxZoom(),C=l===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=C,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",C.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(l,p)=>{const C=this._map._getUIString(`NavigationControl.${p}`);l.title=C,l.setAttribute("aria-label",C)},this.options=a.e({},Tu,I),this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(l=>l.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(l=>this._map.zoomIn({},{originalEvent:l}))),x.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(l=>this._map.zoomOut({},{originalEvent:l}))),x.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})})),this._compassIcon=x.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(I){return this._map=I,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ua(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){x.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(I,l){const p=x.create("button",I,this._container);return p.type="button",p.addEventListener("click",l),p}},s.Popup=class extends a.E{constructor(I){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&x.remove(this._content),this._container&&(x.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=l=>{this._update(l.point)},this._onMouseMove=l=>{this._update(l.point)},this._onDrag=l=>{this._update(l.point)},this._update=l=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=x.create("div","maplibregl-popup",this._map.getContainer()),this._tip=x.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const U of this.options.className.split(" "))this._container.classList.add(U);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=OA(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!l)return;const p=this._flatPos=this._pos=this._trackPointer&&l?l:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&l?l:this._map.transform.locationToScreenPoint(this._lngLat));let C=this.options.anchor;const E=IA(this.options.offset);if(!C){const U=this._container.offsetWidth,Q=this._container.offsetHeight;let Z;Z=p.y+E.bottom.y<Q?["top"]:p.y>this._map.transform.height-Q?["bottom"]:[],p.x<U/2?Z.push("left"):p.x>this._map.transform.width-U/2&&Z.push("right"),C=Z.length===0?"bottom":Z.join("-")}let T=p.add(E[C]);this.options.subpixelPositioning||(T=T.round()),x.setTransform(this._container,`${hs[C]} translate(${T.x}px,${T.y}px)`),bo(this._container,C,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(Wd),I)}addTo(I){return this._map&&this.remove(),this._map=I,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(I){return this._lngLat=a.S.convert(I),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(I){return this.setDOMContent(document.createTextNode(I))}setHTML(I){const l=document.createDocumentFragment(),p=document.createElement("body");let C;for(p.innerHTML=I;C=p.firstChild,C;)l.appendChild(C);return this.setDOMContent(l)}getMaxWidth(){var I;return(I=this._container)===null||I===void 0?void 0:I.style.maxWidth}setMaxWidth(I){return this.options.maxWidth=I,this._update(),this}setDOMContent(I){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=x.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(I),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(I){return this._container&&this._container.classList.add(I),this}removeClassName(I){return this._container&&this._container.classList.remove(I),this}setOffset(I){return this.options.offset=I,this._update(),this}toggleClassName(I){if(this._container)return this._container.classList.toggle(I)}setSubpixelPositioning(I){this.options.subpixelPositioning=I}_createCloseButton(){this.options.closeButton&&(this._closeButton=x.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const I=this._container.querySelector(Vh);I&&I.focus()}},s.RasterDEMTileSource=Jt,s.RasterTileSource=Ot,s.ScaleControl=class{constructor(I){this._onMove=()=>{Po(this._map,this._container,this.options)},this.setUnit=l=>{this.options.unit=l,Po(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Cr),I)}getDefaultPosition(){return"bottom-left"}onAdd(I){return this._map=I,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-scale",I.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){x.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},s.ScrollZoomHandler=Dm,s.Style=vp,s.TerrainControl=class{constructor(I){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=I}onAdd(I){return this._map=I,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=x.create("button","maplibregl-ctrl-terrain",this._container),x.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){x.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},s.TwoFingersTouchPitchHandler=Ah,s.TwoFingersTouchRotateHandler=Rf,s.TwoFingersTouchZoomHandler=km,s.TwoFingersTouchZoomRotateHandler=Pm,s.VectorTileSource=Dt,s.VideoSource=ii,s.addSourceType=(I,l)=>a._(void 0,void 0,void 0,(function*(){if(gn(I))throw new Error(`A source type called "${I}" already exists.`);((p,C)=>{Rn[p]=C})(I,l)})),s.clearPrewarmedResources=function(){const I=xe;I&&(I.isPreloaded()&&I.numActive()===1?(I.release(ke),xe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},s.createTileMesh=Bn,s.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},s.getRTLTextPluginStatus=function(){return _e().getRTLTextPluginStatus()},s.getVersion=function(){return Uf},s.getWorkerCount=function(){return we.workerCount},s.getWorkerUrl=function(){return a.a.WORKER_URL},s.importScriptInWorkers=function(I){return Bt().broadcast("IS",I)},s.prewarm=function(){it().acquire(ke)},s.setMaxParallelImageRequests=function(I){a.a.MAX_PARALLEL_IMAGE_REQUESTS=I},s.setRTLTextPlugin=function(I,l){return _e().setRTLTextPlugin(I,l)},s.setWorkerCount=function(I){we.workerCount=I},s.setWorkerUrl=function(I){a.a.WORKER_URL=I}}));var o=t;return o}))})(ow)),ow.exports}var Xde=Zde();const m_=Xl(Xde);var j5=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function GX(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var K2={exports:{}};K2.exports;var HF;function Jde(){return HF||(HF=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=1,o=2,s=9007199254740991,a="[object Arguments]",c="[object Array]",h="[object AsyncFunction]",m="[object Boolean]",y="[object Date]",M="[object Error]",x="[object Function]",k="[object GeneratorFunction]",P="[object Map]",F="[object Number]",j="[object Null]",q="[object Object]",V="[object Promise]",H="[object Proxy]",G="[object RegExp]",Y="[object Set]",z="[object String]",se="[object Symbol]",le="[object Undefined]",me="[object WeakMap]",de="[object ArrayBuffer]",be="[object DataView]",Ee="[object Float32Array]",De="[object Float64Array]",je="[object Int8Array]",Ie="[object Int16Array]",Qe="[object Int32Array]",et="[object Uint8Array]",dt="[object Uint8ClampedArray]",ke="[object Uint16Array]",we="[object Uint32Array]",ze=/[\\^$.*+?()[\]{}|]/g,xe=/^\[object .+?Constructor\]$/,At=/^(?:0|[1-9]\d*)$/,it={};it[Ee]=it[De]=it[je]=it[Ie]=it[Qe]=it[et]=it[dt]=it[ke]=it[we]=!0,it[a]=it[c]=it[de]=it[m]=it[be]=it[y]=it[M]=it[x]=it[P]=it[F]=it[q]=it[G]=it[Y]=it[z]=it[me]=!1;var bt=typeof j5=="object"&&j5&&j5.Object===Object&&j5,Bt=typeof self=="object"&&self&&self.Object===Object&&self,Ke=bt||Bt||Function("return this")(),Te=e&&!e.nodeType&&e,Se=Te&&!0&&n&&!n.nodeType&&n,Ne=Se&&Se.exports===Te,ut=Ne&&bt.process,rt=(function(){try{return ut&&ut.binding&&ut.binding("util")}catch{}})(),pt=rt&&rt.isTypedArray;function Dt(X,ve){for(var $e=-1,wt=X==null?0:X.length,ei=0,Bn=[];++$e<wt;){var _i=X[$e];ve(_i,$e,X)&&(Bn[ei++]=_i)}return Bn}function Ot(X,ve){for(var $e=-1,wt=ve.length,ei=X.length;++$e<wt;)X[ei+$e]=ve[$e];return X}function Jt(X,ve){for(var $e=-1,wt=X==null?0:X.length;++$e<wt;)if(ve(X[$e],$e,X))return!0;return!1}function Tn(X,ve){for(var $e=-1,wt=Array(X);++$e<X;)wt[$e]=ve($e);return wt}function Ln(X){return function(ve){return X(ve)}}function ii(X,ve){return X.has(ve)}function wn(X,ve){return X?.[ve]}function Rn(X){var ve=-1,$e=Array(X.size);return X.forEach(function(wt,ei){$e[++ve]=[ei,wt]}),$e}function gn(X,ve){return function($e){return X(ve($e))}}function Yn(X){var ve=-1,$e=Array(X.size);return X.forEach(function(wt){$e[++ve]=wt}),$e}var Dn=Array.prototype,Tt=Function.prototype,_e=Object.prototype,oe=Ke["__core-js_shared__"],ee=Tt.toString,ne=_e.hasOwnProperty,ue=(function(){var X=/[^.]+$/.exec(oe&&oe.keys&&oe.keys.IE_PROTO||"");return X?"Symbol(src)_1."+X:""})(),ye=_e.toString,Ue=RegExp("^"+ee.call(ne).replace(ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ve=Ne?Ke.Buffer:void 0,lt=Ke.Symbol,ge=Ke.Uint8Array,Be=_e.propertyIsEnumerable,v=Dn.splice,yt=lt?lt.toStringTag:void 0,Mt=Object.getOwnPropertySymbols,Pt=Ve?Ve.isBuffer:void 0,st=gn(Object.keys,Object),fn=qr(Ke,"DataView"),Fn=qr(Ke,"Map"),pn=qr(Ke,"Promise"),$n=qr(Ke,"Set"),Zn=qr(Ke,"WeakMap"),ai=qr(Object,"create"),Hi=Go(fn),Ti=Go(Fn),tr=Go(pn),oi=Go($n),Pi=Go(Zn),Zt=lt?lt.prototype:void 0,pr=Zt?Zt.valueOf:void 0;function Zi(X){var ve=-1,$e=X==null?0:X.length;for(this.clear();++ve<$e;){var wt=X[ve];this.set(wt[0],wt[1])}}function ea(){this.__data__=ai?ai(null):{},this.size=0}function no(X){var ve=this.has(X)&&delete this.__data__[X];return this.size-=ve?1:0,ve}function sn(X){var ve=this.__data__;if(ai){var $e=ve[X];return $e===i?void 0:$e}return ne.call(ve,X)?ve[X]:void 0}function Ci(X){var ve=this.__data__;return ai?ve[X]!==void 0:ne.call(ve,X)}function Ui(X,ve){var $e=this.__data__;return this.size+=this.has(X)?0:1,$e[X]=ai&&ve===void 0?i:ve,this}Zi.prototype.clear=ea,Zi.prototype.delete=no,Zi.prototype.get=sn,Zi.prototype.has=Ci,Zi.prototype.set=Ui;function nr(X){var ve=-1,$e=X==null?0:X.length;for(this.clear();++ve<$e;){var wt=X[ve];this.set(wt[0],wt[1])}}function Jl(){this.__data__=[],this.size=0}function Al(X){var ve=this.__data__,$e=xs(ve,X);if($e<0)return!1;var wt=ve.length-1;return $e==wt?ve.pop():v.call(ve,$e,1),--this.size,!0}function Ki(X){var ve=this.__data__,$e=xs(ve,X);return $e<0?void 0:ve[$e][1]}function $a(X){return xs(this.__data__,X)>-1}function hl(X,ve){var $e=this.__data__,wt=xs($e,X);return wt<0?(++this.size,$e.push([X,ve])):$e[wt][1]=ve,this}nr.prototype.clear=Jl,nr.prototype.delete=Al,nr.prototype.get=Ki,nr.prototype.has=$a,nr.prototype.set=hl;function fo(X){var ve=-1,$e=X==null?0:X.length;for(this.clear();++ve<$e;){var wt=X[ve];this.set(wt[0],wt[1])}}function Qs(){this.size=0,this.__data__={hash:new Zi,map:new(Fn||nr),string:new Zi}}function Kl(X){var ve=Ds(this,X).delete(X);return this.size-=ve?1:0,ve}function io(X){return Ds(this,X).get(X)}function As(X){return Ds(this,X).has(X)}function pa(X,ve){var $e=Ds(this,X),wt=$e.size;return $e.set(X,ve),this.size+=$e.size==wt?0:1,this}fo.prototype.clear=Qs,fo.prototype.delete=Kl,fo.prototype.get=io,fo.prototype.has=As,fo.prototype.set=pa;function Dr(X){var ve=-1,$e=X==null?0:X.length;for(this.__data__=new fo;++ve<$e;)this.add(X[ve])}function Ll(X){return this.__data__.set(X,i),this}function Da(X){return this.__data__.has(X)}Dr.prototype.add=Dr.prototype.push=Ll,Dr.prototype.has=Da;function qs(X){var ve=this.__data__=new nr(X);this.size=ve.size}function Sl(){this.__data__=new nr,this.size=0}function eu(X){var ve=this.__data__,$e=ve.delete(X);return this.size=ve.size,$e}function $A(X){return this.__data__.get(X)}function Vc(X){return this.__data__.has(X)}function mc(X,ve){var $e=this.__data__;if($e instanceof nr){var wt=$e.__data__;if(!Fn||wt.length<t-1)return wt.push([X,ve]),this.size=++$e.size,this;$e=this.__data__=new fo(wt)}return $e.set(X,ve),this.size=$e.size,this}qs.prototype.clear=Sl,qs.prototype.delete=eu,qs.prototype.get=$A,qs.prototype.has=Vc,qs.prototype.set=mc;function ma(X,ve){var $e=Eo(X),wt=!$e&&Ro(X),ei=!$e&&!wt&&Pr(X),Bn=!$e&&!wt&&!ei&&aa(X),_i=$e||wt||ei||Bn,zi=_i?Tn(X.length,String):[],Ri=zi.length;for(var Ii in X)ne.call(X,Ii)&&!(_i&&(Ii=="length"||ei&&(Ii=="offset"||Ii=="parent")||Bn&&(Ii=="buffer"||Ii=="byteLength"||Ii=="byteOffset")||dl(Ii,Ri)))&&zi.push(Ii);return zi}function xs(X,ve){for(var $e=X.length;$e--;)if(Ps(X[$e][0],ve))return $e;return-1}function gc(X,ve,$e){var wt=ve(X);return Eo(X)?wt:Ot(wt,$e(X))}function tu(X){return X==null?X===void 0?le:j:yt&&yt in Object(X)?Yi(X):Va(X)}function yc(X){return lr(X)&&tu(X)==a}function nu(X,ve,$e,wt,ei){return X===ve?!0:X==null||ve==null||!lr(X)&&!lr(ve)?X!==X&&ve!==ve:Fl(X,ve,$e,wt,nu,ei)}function Fl(X,ve,$e,wt,ei,Bn){var _i=Eo(X),zi=Eo(ve),Ri=_i?c:Vo(X),Ii=zi?c:Vo(ve);Ri=Ri==a?q:Ri,Ii=Ii==a?q:Ii;var mr=Ri==q,Tr=Ii==q,ji=Ri==Ii;if(ji&&Pr(X)){if(!Pr(ve))return!1;_i=!0,mr=!1}if(ji&&!mr)return Bn||(Bn=new qs),_i||aa(X)?ru(X,ve,$e,wt,ei,Bn):Hc(X,ve,Ri,$e,wt,ei,Bn);if(!($e&r)){var ur=mr&&ne.call(X,"__wrapped__"),Hr=Tr&&ne.call(ve,"__wrapped__");if(ur||Hr){var ws=ur?X.value():X,gr=Hr?ve.value():ve;return Bn||(Bn=new qs),ei(ws,gr,$e,wt,Bn)}}return ji?(Bn||(Bn=new qs),Hu(X,ve,$e,wt,ei,Bn)):!1}function VA(X){if(!Ms(X)||sr(X))return!1;var ve=Zo(X)?Ue:xe;return ve.test(Go(X))}function ga(X){return lr(X)&&Wo(X.length)&&!!it[tu(X)]}function iu(X){if(!El(X))return st(X);var ve=[];for(var $e in Object(X))ne.call(X,$e)&&$e!="constructor"&&ve.push($e);return ve}function ru(X,ve,$e,wt,ei,Bn){var _i=$e&r,zi=X.length,Ri=ve.length;if(zi!=Ri&&!(_i&&Ri>zi))return!1;var Ii=Bn.get(X);if(Ii&&Bn.get(ve))return Ii==ve;var mr=-1,Tr=!0,ji=$e&o?new Dr:void 0;for(Bn.set(X,ve),Bn.set(ve,X);++mr<zi;){var ur=X[mr],Hr=ve[mr];if(wt)var ws=_i?wt(Hr,ur,mr,ve,X,Bn):wt(ur,Hr,mr,X,ve,Bn);if(ws!==void 0){if(ws)continue;Tr=!1;break}if(ji){if(!Jt(ve,function(gr,Ha){if(!ii(ji,Ha)&&(ur===gr||ei(ur,gr,$e,wt,Bn)))return ji.push(Ha)})){Tr=!1;break}}else if(!(ur===Hr||ei(ur,Hr,$e,wt,Bn))){Tr=!1;break}}return Bn.delete(X),Bn.delete(ve),Tr}function Hc(X,ve,$e,wt,ei,Bn,_i){switch($e){case be:if(X.byteLength!=ve.byteLength||X.byteOffset!=ve.byteOffset)return!1;X=X.buffer,ve=ve.buffer;case de:return!(X.byteLength!=ve.byteLength||!Bn(new ge(X),new ge(ve)));case m:case y:case F:return Ps(+X,+ve);case M:return X.name==ve.name&&X.message==ve.message;case G:case z:return X==ve+"";case P:var zi=Rn;case Y:var Ri=wt&r;if(zi||(zi=Yn),X.size!=ve.size&&!Ri)return!1;var Ii=_i.get(X);if(Ii)return Ii==ve;wt|=o,_i.set(X,ve);var mr=ru(zi(X),zi(ve),wt,ei,Bn,_i);return _i.delete(X),mr;case se:if(pr)return pr.call(X)==pr.call(ve)}return!1}function Hu(X,ve,$e,wt,ei,Bn){var _i=$e&r,zi=Pa(X),Ri=zi.length,Ii=Pa(ve),mr=Ii.length;if(Ri!=mr&&!_i)return!1;for(var Tr=Ri;Tr--;){var ji=zi[Tr];if(!(_i?ji in ve:ne.call(ve,ji)))return!1}var ur=Bn.get(X);if(ur&&Bn.get(ve))return ur==ve;var Hr=!0;Bn.set(X,ve),Bn.set(ve,X);for(var ws=_i;++Tr<Ri;){ji=zi[Tr];var gr=X[ji],Ha=ve[ji];if(wt)var vc=_i?wt(Ha,gr,ji,ve,X,Bn):wt(gr,Ha,ji,X,ve,Bn);if(!(vc===void 0?gr===Ha||ei(gr,Ha,$e,wt,Bn):vc)){Hr=!1;break}ws||(ws=ji=="constructor")}if(Hr&&!ws){var _u=X.constructor,ta=ve.constructor;_u!=ta&&"constructor"in X&&"constructor"in ve&&!(typeof _u=="function"&&_u instanceof _u&&typeof ta=="function"&&ta instanceof ta)&&(Hr=!1)}return Bn.delete(X),Bn.delete(ve),Hr}function Pa(X){return gc(X,wi,ou)}function Ds(X,ve){var $e=X.__data__;return Cu(ve)?$e[typeof ve=="string"?"string":"hash"]:$e.map}function qr(X,ve){var $e=wn(X,ve);return VA($e)?$e:void 0}function Yi(X){var ve=ne.call(X,yt),$e=X[yt];try{X[yt]=void 0;var wt=!0}catch{}var ei=ye.call(X);return wt&&(ve?X[yt]=$e:delete X[yt]),ei}var ou=Mt?function(X){return X==null?[]:(X=Object(X),Dt(Mt(X),function(ve){return Be.call(X,ve)}))}:Jn,Vo=tu;(fn&&Vo(new fn(new ArrayBuffer(1)))!=be||Fn&&Vo(new Fn)!=P||pn&&Vo(pn.resolve())!=V||$n&&Vo(new $n)!=Y||Zn&&Vo(new Zn)!=me)&&(Vo=function(X){var ve=tu(X),$e=ve==q?X.constructor:void 0,wt=$e?Go($e):"";if(wt)switch(wt){case Hi:return be;case Ti:return P;case tr:return V;case oi:return Y;case Pi:return me}return ve});function dl(X,ve){return ve=ve??s,!!ve&&(typeof X=="number"||At.test(X))&&X>-1&&X%1==0&&X<ve}function Cu(X){var ve=typeof X;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?X!=="__proto__":X===null}function sr(X){return!!ue&&ue in X}function El(X){var ve=X&&X.constructor,$e=typeof ve=="function"&&ve.prototype||_e;return X===$e}function Va(X){return ye.call(X)}function Go(X){if(X!=null){try{return ee.call(X)}catch{}try{return X+""}catch{}}return""}function Ps(X,ve){return X===ve||X!==X&&ve!==ve}var Ro=yc((function(){return arguments})())?yc:function(X){return lr(X)&&ne.call(X,"callee")&&!Be.call(X,"callee")},Eo=Array.isArray;function Ho(X){return X!=null&&Wo(X.length)&&!Zo(X)}var Pr=Pt||Ur;function HA(X,ve){return nu(X,ve)}function Zo(X){if(!Ms(X))return!1;var ve=tu(X);return ve==x||ve==k||ve==h||ve==H}function Wo(X){return typeof X=="number"&&X>-1&&X%1==0&&X<=s}function Ms(X){var ve=typeof X;return X!=null&&(ve=="object"||ve=="function")}function lr(X){return X!=null&&typeof X=="object"}var aa=pt?Ln(pt):ga;function wi(X){return Ho(X)?ma(X):iu(X)}function Jn(){return[]}function Ur(){return!1}n.exports=HA})(K2,K2.exports)),K2.exports}var efe=Jde(),tfe=GX(efe);function C9(n,e,t){const i={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(i["source-layer"]=t),i}function _9(n,e,t,i){const r={id:[t,i,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return i&&(r["source-layer"]=i),r}function x9(n,e,t){const i={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(i["source-layer"]=t),i}function nfe(n,e){const t=[],i=[],r=[];function o(s){return{circle:e(s,.8),line:e(s,.6),polygon:e(s,.3),polygonOutline:e(s,.6),default:e(s,1)}}return Object.keys(n).forEach(s=>{const a=n[s];if(!a||a.length===0){const c=o(s);i.push(C9(c.circle,s)),r.push(x9(c.line,s)),t.push(_9(c.polygon,c.polygonOutline,s))}else a.forEach(c=>{const h=o(c);i.push(C9(h.circle,s,c)),r.push(x9(h.line,s,c)),t.push(_9(h.polygon,h.polygonOutline,s,c))})}),t.concat(r).concat(i)}function ife(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const i={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},r={};return Object.keys(n.sources).forEach(o=>{const s=n.sources[o];(s.type==="vector"||s.type==="geojson")&&(r[o]=s)}),Object.assign(n,{layers:[i].concat(e),sources:r})}var ZF={polygonLayer:_9,lineLayer:x9,circleLayer:C9,generateInspectStyle:ife,generateColoredLayers:nfe};class rfe{constructor(e){e=Object.assign({show:!0,onToggle(){}},e),this._btn=this.createButton(),this._btn.onclick=e.onToggle,this.elem=this.createContainer(this._btn,e.show)}createButton(){const e=document.createElement("button");return e.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect",e.type="button",e.title="Toggle Inspect",e.setAttribute("aria-label","Toggle Inspect"),e}createContainer(e,t){const i=document.createElement("div");return i.className="maplibregl-ctrl maplibregl-ctrl-group",i.appendChild(e),t||(i.style.display="none"),i}setInspectIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect"}setMapIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-map"}}function ofe(n){return typeof n>"u"||n===null?n:n instanceof Date?n.toLocaleString():typeof n=="object"||typeof n=="number"||typeof n=="string"?n.toString():n}function xO(n,e){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${n}</div><div class="maplibregl-inspect_property-value">${ofe(e)}</div></div>`}function sfe(n){return`<div class="maplibregl-inspect_layer">${n}</div>`}function afe(n){const e=sfe(n.layer["source-layer"]||n.layer.source),t=xO("$id",n.id),i=xO("$type",n.geometry.type),r=Object.keys(n.properties).map(o=>xO(o,n.properties[o]));return[e,t,i].concat(r).join("")}function lfe(n){return n.map(e=>`<div class="maplibregl-inspect_feature">${afe(e)}</div>`).join("")}function ufe(n){return`<div class="maplibregl-inspect_popup">${lfe(n)}</div>`}var L2={exports:{}},cfe=L2.exports,XF;function Afe(){return XF||(XF=1,(function(n,e){(function(t,i){{var r=i();n.exports&&(e=n.exports=r),e.randomColor=r}})(cfe,function(){var t=null,i={};j();var r=[],o=function(z){if(z=z||{},z.seed!==void 0&&z.seed!==null&&z.seed===parseInt(z.seed,10))t=z.seed;else if(typeof z.seed=="string")t=G(z.seed);else{if(z.seed!==void 0&&z.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var se,le,me;if(z.count!==null&&z.count!==void 0){for(var de=z.count,be=[],Ee=0;Ee<z.count;Ee++)r.push(!1);for(z.count=null;de>be.length;){var De=o(z);t!==null&&(z.seed=t),be.push(De)}return z.count=de,be}return se=s(z),le=a(se,z),me=c(se,le,z),h([se,le,me],z)};function s(z){if(r.length>0){var se=Y(z.hue),le=k(se),me=(se[1]-se[0])/r.length,de=parseInt((le-se[0])/me);r[de]===!0?de=(de+2)%r.length:r[de]=!0;var be=(se[0]+de*me)%359,Ee=(se[0]+(de+1)*me)%359;return se=[be,Ee],le=k(se),le<0&&(le=360+le),le}else{var se=y(z.hue);return le=k(se),le<0&&(le=360+le),le}}function a(z,se){if(se.hue==="monochrome")return 0;if(se.luminosity==="random")return k([0,100]);var le=M(z),me=le[0],de=le[1];switch(se.luminosity){case"bright":me=55;break;case"dark":me=de-10;break;case"light":de=55;break}return k([me,de])}function c(z,se,le){var me=m(z,se),de=100;switch(le.luminosity){case"dark":de=me+20;break;case"light":me=(de+me)/2;break;case"random":me=0,de=100;break}return k([me,de])}function h(z,se){switch(se.format){case"hsvArray":return z;case"hslArray":return H(z);case"hsl":var le=H(z);return"hsl("+le[0]+", "+le[1]+"%, "+le[2]+"%)";case"hsla":var me=H(z),Ee=se.alpha||Math.random();return"hsla("+me[0]+", "+me[1]+"%, "+me[2]+"%, "+Ee+")";case"rgbArray":return q(z);case"rgb":var de=q(z);return"rgb("+de.join(", ")+")";case"rgba":var be=q(z),Ee=se.alpha||Math.random();return"rgba("+be.join(", ")+", "+Ee+")";default:return P(z)}}function m(z,se){for(var le=x(z).lowerBounds,me=0;me<le.length-1;me++){var de=le[me][0],be=le[me][1],Ee=le[me+1][0],De=le[me+1][1];if(se>=de&&se<=Ee){var je=(De-be)/(Ee-de),Ie=be-je*de;return je*se+Ie}}return 0}function y(z){if(typeof parseInt(z)=="number"){var se=parseInt(z);if(se<360&&se>0)return[se,se]}if(typeof z=="string"){if(i[z]){var le=i[z];if(le.hueRange)return le.hueRange}else if(z.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var me=V(z)[0];return[me,me]}}return[0,360]}function M(z){return x(z).saturationRange}function x(z){z>=334&&z<=360&&(z-=360);for(var se in i){var le=i[se];if(le.hueRange&&z>=le.hueRange[0]&&z<=le.hueRange[1])return i[se]}return"Color not found"}function k(z){if(t===null){var se=.618033988749895,le=Math.random();return le+=se,le%=1,Math.floor(z[0]+le*(z[1]+1-z[0]))}else{var me=z[1]||1,de=z[0]||0;t=(t*9301+49297)%233280;var be=t/233280;return Math.floor(de+be*(me-de))}}function P(z){var se=q(z);function le(de){var be=de.toString(16);return be.length==1?"0"+be:be}var me="#"+le(se[0])+le(se[1])+le(se[2]);return me}function F(z,se,le){var me=le[0][0],de=le[le.length-1][0],be=le[le.length-1][1],Ee=le[0][1];i[z]={hueRange:se,lowerBounds:le,saturationRange:[me,de],brightnessRange:[be,Ee]}}function j(){F("monochrome",null,[[0,0],[100,0]]),F("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),F("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),F("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),F("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),F("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),F("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),F("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function q(z){var se=z[0];se===0&&(se=1),se===360&&(se=359),se=se/360;var le=z[1]/100,me=z[2]/100,de=Math.floor(se*6),be=se*6-de,Ee=me*(1-le),De=me*(1-be*le),je=me*(1-(1-be)*le),Ie=256,Qe=256,et=256;switch(de){case 0:Ie=me,Qe=je,et=Ee;break;case 1:Ie=De,Qe=me,et=Ee;break;case 2:Ie=Ee,Qe=me,et=je;break;case 3:Ie=Ee,Qe=De,et=me;break;case 4:Ie=je,Qe=Ee,et=me;break;case 5:Ie=me,Qe=Ee,et=De;break}var dt=[Math.floor(Ie*255),Math.floor(Qe*255),Math.floor(et*255)];return dt}function V(z){z=z.replace(/^#/,""),z=z.length===3?z.replace(/(.)/g,"$1$1"):z;var se=parseInt(z.substr(0,2),16)/255,le=parseInt(z.substr(2,2),16)/255,me=parseInt(z.substr(4,2),16)/255,de=Math.max(se,le,me),be=de-Math.min(se,le,me),Ee=de?be/de:0;switch(de){case se:return[60*((le-me)/be%6)||0,Ee,de];case le:return[60*((me-se)/be+2)||0,Ee,de];case me:return[60*((se-le)/be+4)||0,Ee,de]}}function H(z){var se=z[0],le=z[1]/100,me=z[2]/100,de=(2-le)*me;return[se,Math.round(le*me/(de<1?de:2-de)*1e4)/100,de/2*100]}function G(z){for(var se=0,le=0;le!==z.length&&!(se>=Number.MAX_SAFE_INTEGER);le++)se+=z.charCodeAt(le);return se}function Y(z){if(isNaN(z)){if(typeof z=="string"){if(i[z]){var le=i[z];if(le.hueRange)return le.hueRange}else if(z.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var me=V(z)[0];return x(me).hueRange}}}else{var se=parseInt(z);if(se<360&&se>0)return x(z).hueRange}return[0,360]}return o})})(L2,L2.exports)),L2.exports}var hfe=Afe(),dfe=GX(hfe);function ffe(n,e){let t="bright",i;return/water|ocean|lake|sea|river/.test(n)&&(i="blue"),/state|country|place/.test(n)&&(i="pink"),/road|highway|transport|streets/.test(n)&&(i="orange"),/contour|building|earth/.test(n)&&(i="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(i="green"),`rgba(${dfe({luminosity:t,hue:i,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}var pfe={brightColor:ffe};function mfe(n){return n.metadata&&n.metadata["maplibregl-inspect:inspect"]}function gfe(n){return Object.assign(n,{metadata:Object.assign({},n.metadata,{"maplibregl-inspect:inspect":!0})})}class pP{constructor(e){if(this._onSourceChange=i=>{if(i.sourceDataType==="visibility"||!i.isSourceLoaded)return;const r=Object.assign({},this.sources);this._setSourcesFromMap(),!tfe(r,this.sources)&&Object.keys(this.sources).length>0&&setTimeout(()=>this.render(),1e3)},this._onStyleChange=()=>{const i=this._map.getStyle();mfe(i)||(this._originalStyle=i)},this._onRightClick=()=>{!this.options.showMapPopupOnHover&&!this.options.showInspectMapPopupOnHover&&!this.options.blockHoverPopupOnClick&&this._popup&&this._popup.remove()},this._onMousemove=i=>{if(this._showInspectMap){if(!this.options.showInspectMapPopup||i.type==="mousemove"&&!this.options.showInspectMapPopupOnHover)return;i.type==="click"&&this.options.showInspectMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}else{if(!this.options.showMapPopup||i.type==="mousemove"&&!this.options.showMapPopupOnHover)return;i.type==="click"&&this.options.showMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}if(!this._popupBlocked&&this._popup){let r;this.options.selectThreshold===0?r=i.point:r=[[i.point.x-this.options.selectThreshold,i.point.y+this.options.selectThreshold],[i.point.x+this.options.selectThreshold,i.point.y-this.options.selectThreshold]];const o=this._map.queryRenderedFeatures(r,this.options.queryParameters)||[];if(this._map.getCanvas().style.cursor=o.length?"pointer":"",!o.length)this._popup.remove();else{this._popup.setLngLat(i.lngLat);const s=this.options.renderPopup(o);typeof s=="string"?this._popup.setHTML(s):this._popup.setDOMContent(s),this._popup.addTo(this._map)}}},!(this instanceof pP))throw new Error("MaplibreInspect needs to be called with the new keyword");let t=null;window.maplibregl?t=new window.maplibregl.Popup({closeButton:!1,closeOnClick:!1}):e.popup||console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis."),this.options=Object.assign({showInspectMap:!1,showInspectButton:!0,showInspectMapPopup:!0,showMapPopup:!1,showMapPopupOnHover:!0,showInspectMapPopupOnHover:!0,blockHoverPopupOnClick:!1,backgroundColor:"#fff",assignLayerColor:pfe.brightColor,buildInspectStyle:ZF.generateInspectStyle,renderPopup:ufe,popup:t,selectThreshold:5,useInspectStyle:!0,queryParameters:{},sources:{},toggleCallback(){},manageStyleOutside:!1},e),this.sources=this.options.sources,this.assignLayerColor=this.options.assignLayerColor,this._popup=this.options.popup,this._popupBlocked=!1,this._showInspectMap=this.options.showInspectMap,this._toggle=new rfe({show:this.options.showInspectButton,onToggle:()=>this.toggleInspector()})}toggleInspector(){this._showInspectMap=!this._showInspectMap,this._popupBlocked=!1,this.options.toggleCallback(this._showInspectMap),this.render()}_inspectStyle(){const e=ZF.generateColoredLayers(this.sources,this.assignLayerColor);return this.options.buildInspectStyle(this._map.getStyle(),e,{backgroundColor:this.options.backgroundColor})}render(){this._showInspectMap?(this.options.useInspectStyle&&this._map.setStyle(gfe(this._inspectStyle())),this._toggle.setMapIcon()):this._originalStyle&&(this._popup&&this._popup.remove(),this.options.useInspectStyle&&this._map.setStyle(this._originalStyle),this._toggle.setInspectIcon())}_setSourcesFromMap(){const e=Object.keys(this._map.getStyle().sources);Object.keys(this._map.style.sourceCaches).forEach(t=>{const i=this._map.style.sourceCaches[t]||{_source:{}},r=i._source.vectorLayerIds;r?this.sources[t]=r:i._source.type==="geojson"&&(this.sources[t]=[])}),Object.keys(this.sources).forEach(t=>{e.indexOf(t)===-1&&delete this.sources[t]})}setOriginalStyle(e){this._originalStyle=e,this._setSourcesFromMap()}onAdd(e){return this._map=e,Object.keys(this.sources).length===0&&(e.on("tiledata",this._onSourceChange),e.on("sourcedata",this._onSourceChange)),e.on("styledata",this._onStyleChange),e.on("load",this._onStyleChange),e.on("mousemove",this._onMousemove),e.on("click",this._onMousemove),e.on("contextmenu",this._onRightClick),this._toggle.elem}onRemove(){this._map.off("styledata",this._onStyleChange),this._map.off("load",this._onStyleChange),this._map.off("tiledata",this._onSourceChange),this._map.off("sourcedata",this._onSourceChange),this._map.off("mousemove",this._onMousemove),this._map.off("click",this._onMousemove),this._map.off("contextmenu",this._onRightClick);const e=this._toggle.elem;e.parentNode.removeChild(e),this._map=void 0}}var F2={exports:{}},yfe=F2.exports,JF;function vfe(){return JF||(JF=1,(function(n,e){(function(t,i){{var r=i();n&&n.exports&&(e=n.exports=r),e.randomColor=r}})(yfe,function(){var t=null,i={};j();var r=[],o=function(z){if(z=z||{},z.seed!==void 0&&z.seed!==null&&z.seed===parseInt(z.seed,10))t=z.seed;else if(typeof z.seed=="string")t=G(z.seed);else{if(z.seed!==void 0&&z.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var se,le,me;if(z.count!==null&&z.count!==void 0){for(var de=z.count,be=[],Ee=0;Ee<z.count;Ee++)r.push(!1);for(z.count=null;de>be.length;){var De=o(z);t!==null&&(z.seed=t),be.push(De)}return z.count=de,be}return se=s(z),le=a(se,z),me=c(se,le,z),h([se,le,me],z)};function s(z){if(r.length>0){var se=Y(z.hue),le=k(se),me=(se[1]-se[0])/r.length,de=parseInt((le-se[0])/me);r[de]===!0?de=(de+2)%r.length:r[de]=!0;var be=(se[0]+de*me)%359,Ee=(se[0]+(de+1)*me)%359;return se=[be,Ee],le=k(se),le<0&&(le=360+le),le}else{var se=y(z.hue);return le=k(se),le<0&&(le=360+le),le}}function a(z,se){if(se.hue==="monochrome")return 0;if(se.luminosity==="random")return k([0,100]);var le=M(z),me=le[0],de=le[1];switch(se.luminosity){case"bright":me=55;break;case"dark":me=de-10;break;case"light":de=55;break}return k([me,de])}function c(z,se,le){var me=m(z,se),de=100;switch(le.luminosity){case"dark":de=me+20;break;case"light":me=(de+me)/2;break;case"random":me=0,de=100;break}return k([me,de])}function h(z,se){switch(se.format){case"hsvArray":return z;case"hslArray":return H(z);case"hsl":var le=H(z);return"hsl("+le[0]+", "+le[1]+"%, "+le[2]+"%)";case"hsla":var me=H(z),Ee=se.alpha||Math.random();return"hsla("+me[0]+", "+me[1]+"%, "+me[2]+"%, "+Ee+")";case"rgbArray":return q(z);case"rgb":var de=q(z);return"rgb("+de.join(", ")+")";case"rgba":var be=q(z),Ee=se.alpha||Math.random();return"rgba("+be.join(", ")+", "+Ee+")";default:return P(z)}}function m(z,se){for(var le=x(z).lowerBounds,me=0;me<le.length-1;me++){var de=le[me][0],be=le[me][1],Ee=le[me+1][0],De=le[me+1][1];if(se>=de&&se<=Ee){var je=(De-be)/(Ee-de),Ie=be-je*de;return je*se+Ie}}return 0}function y(z){if(typeof parseInt(z)=="number"){var se=parseInt(z);if(se<360&&se>0)return[se,se]}if(typeof z=="string"){if(i[z]){var le=i[z];if(le.hueRange)return le.hueRange}else if(z.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var me=V(z)[0];return[me,me]}}return[0,360]}function M(z){return x(z).saturationRange}function x(z){z>=334&&z<=360&&(z-=360);for(var se in i){var le=i[se];if(le.hueRange&&z>=le.hueRange[0]&&z<=le.hueRange[1])return i[se]}return"Color not found"}function k(z){if(t===null){var se=.618033988749895,le=Math.random();return le+=se,le%=1,Math.floor(z[0]+le*(z[1]+1-z[0]))}else{var me=z[1]||1,de=z[0]||0;t=(t*9301+49297)%233280;var be=t/233280;return Math.floor(de+be*(me-de))}}function P(z){var se=q(z);function le(de){var be=de.toString(16);return be.length==1?"0"+be:be}var me="#"+le(se[0])+le(se[1])+le(se[2]);return me}function F(z,se,le){var me=le[0][0],de=le[le.length-1][0],be=le[le.length-1][1],Ee=le[0][1];i[z]={hueRange:se,lowerBounds:le,saturationRange:[me,de],brightnessRange:[be,Ee]}}function j(){F("monochrome",null,[[0,0],[100,0]]),F("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),F("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),F("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),F("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),F("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),F("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),F("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function q(z){var se=z[0];se===0&&(se=1),se===360&&(se=359),se=se/360;var le=z[1]/100,me=z[2]/100,de=Math.floor(se*6),be=se*6-de,Ee=me*(1-le),De=me*(1-be*le),je=me*(1-(1-be)*le),Ie=256,Qe=256,et=256;switch(de){case 0:Ie=me,Qe=je,et=Ee;break;case 1:Ie=De,Qe=me,et=Ee;break;case 2:Ie=Ee,Qe=me,et=je;break;case 3:Ie=Ee,Qe=De,et=me;break;case 4:Ie=je,Qe=Ee,et=me;break;case 5:Ie=me,Qe=Ee,et=De;break}var dt=[Math.floor(Ie*255),Math.floor(Qe*255),Math.floor(et*255)];return dt}function V(z){z=z.replace(/^#/,""),z=z.length===3?z.replace(/(.)/g,"$1$1"):z;var se=parseInt(z.substr(0,2),16)/255,le=parseInt(z.substr(2,2),16)/255,me=parseInt(z.substr(4,2),16)/255,de=Math.max(se,le,me),be=de-Math.min(se,le,me),Ee=de?be/de:0;switch(de){case se:return[60*((le-me)/be%6)||0,Ee,de];case le:return[60*((me-se)/be+2)||0,Ee,de];case me:return[60*((se-le)/be+4)||0,Ee,de]}}function H(z){var se=z[0],le=z[1]/100,me=z[2]/100,de=(2-le)*me;return[se,Math.round(le*me/(de<1?de:2-de)*1e4)/100,de/2*100]}function G(z){for(var se=0,le=0;le!==z.length&&!(se>=Number.MAX_SAFE_INTEGER);le++)se+=z.charCodeAt(le);return se}function Y(z){if(isNaN(z)){if(typeof z=="string"){if(i[z]){var le=i[z];if(le.hueRange)return le.hueRange}else if(z.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var me=V(z)[0];return x(me).hueRange}}}else{var se=parseInt(z);if(se<360&&se>0)return x(z).hueRange}return[0,360]}return o})})(F2,F2.exports)),F2.exports}var bfe=vfe();const Cfe=Xl(bfe);function _fe(n,e){let t="bright",i;return/water|ocean|lake|sea|river/.test(n)&&(i="blue"),/state|country|place/.test(n)&&(i="pink"),/road|highway|transport|streets/.test(n)&&(i="orange"),/contour|building|earth/.test(n)&&(i="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(i="green"),`rgba(${Cfe({luminosity:t,hue:i,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}const WX={brightColor:_fe};function xfe(n){return To({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1z"},child:[]}]})(n)}function Mfe(n){return To({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6.95.435c.58-.58 1.52-.58 2.1 0l6.515 6.516c.58.58.58 1.519 0 2.098L9.05 15.565c-.58.58-1.519.58-2.098 0L.435 9.05a1.48 1.48 0 0 1 0-2.098z"},child:[]}]})(n)}function wfe(n){return To({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708"},child:[]}]})(n)}function Sfe(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(n)}function $b(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function Efe(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(n)}function Ofe(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(n)}function Bfe(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function Ife(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function kfe(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(n)}function Tfe(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2zm-7 6-4 4h3v6h2v-6h3l-4-4z"},child:[]}]})(n)}function Rfe(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function Dfe(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"},child:[]}]})(n)}function Pfe(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"},child:[]}]})(n)}function QX(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function Ufe(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(n)}function M9(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(n)}function Kfe(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(n)}function Lfe(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"7.2",cy:"14.4",r:"3.2"},child:[]},{tag:"circle",attr:{cx:"14.8",cy:"18",r:"2"},child:[]},{tag:"circle",attr:{cx:"15.2",cy:"8.8",r:"4.8"},child:[]}]})(n)}function ez(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"},child:[]}]})(n)}function Ffe(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}function tz(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"},child:[]}]})(n)}function zfe(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"},child:[]}]})(n)}function jfe(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(n)}function Nfe(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"},child:[]}]})(n)}function Gfe(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 1.74.5 3.37 1.41 4.84.95 1.54 2.2 2.86 3.16 4.4.47.75.81 1.45 1.17 2.26.26.55.47 1.5 1.26 1.5s1-.95 1.25-1.5c.37-.81.7-1.51 1.17-2.26.96-1.53 2.21-2.85 3.16-4.4C18.5 12.37 19 10.74 19 9c0-3.87-3.13-7-7-7zm0 9.75a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(n)}function Wfe(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"},child:[]}]})(n)}function qX(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(n)}function YX(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 14 5-5 5 5z"},child:[]}]})(n)}function Qfe(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function qfe(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function Yfe(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"2"},child:[]},{tag:"path",attr:{d:"M10 3h4v12h-4z"},child:[]}]})(n)}function $fe(n){return To({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"},child:[]}]})(n)}function Vfe(n){return To({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m344 280 88-88m-200 24 64 64M80 320l104-104"},child:[]},{tag:"circle",attr:{cx:"456",cy:"168",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"320",cy:"304",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"208",cy:"192",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"56",cy:"344",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]}]})(n)}function Hfe(n){return To({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M467.3 168.1c-1.8 0-3.5.3-5.1 1l-177.6 92.1h-.1c-7.6 4.7-12.5 12.5-12.5 21.4v185.9c0 6.4 5.6 11.5 12.7 11.5 2.2 0 4.3-.5 6.1-1.4.2-.1.4-.2.5-.3L466 385.6l.3-.1c8.2-4.5 13.7-12.7 13.7-22.1V179.6c0-6.4-5.7-11.5-12.7-11.5zM454.3 118.5L272.6 36.8S261.9 32 256 32c-5.9 0-16.5 4.8-16.5 4.8L57.6 118.5s-8 3.3-8 9.5c0 6.6 8.3 11.5 8.3 11.5l185.5 97.8c3.8 1.7 8.1 2.6 12.6 2.6 4.6 0 8.9-1 12.7-2.7l185.4-97.9s7.5-4 7.5-11.5c.1-6.3-7.3-9.3-7.3-9.3zM227.5 261.2L49.8 169c-1.5-.6-3.3-1-5.1-1-7 0-12.7 5.1-12.7 11.5v183.8c0 9.4 5.5 17.6 13.7 22.1l.2.1 174.7 92.7c1.9 1.1 4.2 1.7 6.6 1.7 7 0 12.7-5.2 12.7-11.5V282.6c.1-8.9-4.9-16.8-12.4-21.4z"},child:[]}]})(n)}function Zfe(n){return To({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M634.92 462.7l-288-448C341.03 5.54 330.89 0 320 0s-21.03 5.54-26.92 14.7l-288 448a32.001 32.001 0 0 0-1.17 32.64A32.004 32.004 0 0 0 32 512h576c11.71 0 22.48-6.39 28.09-16.67a31.983 31.983 0 0 0-1.17-32.63zM320 91.18L405.39 224H320l-64 64-38.06-38.06L320 91.18z"},child:[]}]})(n)}function Aa(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",e="0b6460c942a48f834d2809c818afa5c72625023a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",statementMap:{0:{start:{line:7,column:18},end:{line:33,column:1}},1:{start:{line:8,column:20},end:{line:8,column:42}},2:{start:{line:9,column:2},end:{line:32,column:3}},3:{start:{line:11,column:6},end:{line:11,column:61}},4:{start:{line:13,column:6},end:{line:13,column:60}},5:{start:{line:15,column:6},end:{line:15,column:62}},6:{start:{line:17,column:6},end:{line:17,column:63}},7:{start:{line:19,column:6},end:{line:19,column:66}},8:{start:{line:21,column:6},end:{line:21,column:66}},9:{start:{line:23,column:6},end:{line:23,column:59}},10:{start:{line:25,column:6},end:{line:25,column:71}},11:{start:{line:27,column:6},end:{line:27,column:66}},12:{start:{line:29,column:6},end:{line:29,column:61}},13:{start:{line:31,column:6},end:{line:31,column:67}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:29},end:{line:33,column:1}},line:7}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:32,column:3}},type:"switch",locations:[{start:{line:10,column:4},end:{line:11,column:61}},{start:{line:12,column:4},end:{line:13,column:60}},{start:{line:14,column:4},end:{line:15,column:62}},{start:{line:16,column:4},end:{line:17,column:63}},{start:{line:18,column:4},end:{line:19,column:66}},{start:{line:20,column:4},end:{line:21,column:66}},{start:{line:22,column:4},end:{line:23,column:59}},{start:{line:24,column:4},end:{line:25,column:71}},{start:{line:26,column:4},end:{line:27,column:66}},{start:{line:28,column:4},end:{line:29,column:61}},{start:{line:30,column:4},end:{line:31,column:67}}],line:9}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx"],names:[],mappings:"AAkBkC;AAflC,SAAS,QAAQ,eAAe,iBAAiB;AACjD,SAAS,eAAe,UAAU,eAAe,SAAS,sBAAsB;AAChF,SAAS,0BAA0B;AACnC,SAAS,gBAAgB;AACzB,SAAS,kBAAkB;AAQ3B,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,YAAY,EAAE,OAAO,MAAM,MAAM;AACvC,UAAO,MAAM,MAAM;AAAA,IACjB,KAAK;AAAkB,aAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,IACvD,KAAK;AAAU,aAAO,oBAAC,WAAS,GAAG,WAAW;AAAA,IAC9C,KAAK;AAAa,aAAO,oBAAC,aAAW,GAAG,WAAW;AAAA,IACnD,KAAK;AAAgB,aAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,IACvD,KAAK;AAAW,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IACrD,KAAK;AAAQ,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IAClD,KAAK;AAAc,aAAO,oBAAC,UAAQ,GAAG,WAAW;AAAA,IACjD,KAAK;AAAQ,aAAO,oBAAC,sBAAoB,GAAG,WAAW;AAAA,IACvD,KAAK;AAAU,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IACpD,KAAK;AAAU,aAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,IAC/C;AAAS,aAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,EACjD;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0b6460c942a48f834d2809c818afa5c72625023a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Aa=function(){return s},s}Aa();Aa().s[0]++;const $X=n=>{Aa().f[0]++;const e=(Aa().s[1]++,{style:n.style});switch(Aa().s[2]++,n.type){case"fill-extrusion":return Aa().b[0][0]++,Aa().s[3]++,ie.jsx(Hfe,{...e});case"raster":return Aa().b[0][1]++,Aa().s[4]++,ie.jsx(jfe,{...e});case"hillshade":return Aa().b[0][2]++,Aa().s[5]++,ie.jsx(wfe,{...e});case"color-relief":return Aa().b[0][3]++,Aa().s[6]++,ie.jsx(Zfe,{...e});case"heatmap":return Aa().b[0][4]++,Aa().s[7]++,ie.jsx(Lfe,{...e});case"fill":return Aa().b[0][5]++,Aa().s[8]++,ie.jsx(Mfe,{...e});case"background":return Aa().b[0][6]++,Aa().s[9]++,ie.jsx(xfe,{...e});case"line":return Aa().b[0][7]++,Aa().s[10]++,ie.jsx(Vfe,{...e});case"symbol":return Aa().b[0][8]++,Aa().s[11]++,ie.jsx(Gfe,{...e});case"circle":return Aa().b[0][9]++,Aa().s[12]++,ie.jsx(zfe,{...e});default:return Aa().b[0][10]++,Aa().s[13]++,ie.jsx(Yfe,{...e})}};function Mi(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",e="6d83428b3c695d7740365dc3cc3e42bdf4d49028",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:20}},1:{start:{line:6,column:27},end:{line:6,column:29}},2:{start:{line:7,column:2},end:{line:18,column:5}},3:{start:{line:8,column:22},end:{line:8,column:51}},4:{start:{line:9,column:4},end:{line:17,column:5}},5:{start:{line:10,column:6},end:{line:10,column:43}},6:{start:{line:11,column:28},end:{line:11,column:91}},7:{start:{line:11,column:59},end:{line:11,column:90}},8:{start:{line:12,column:6},end:{line:12,column:65}},9:{start:{line:14,column:6},end:{line:14,column:52}},10:{start:{line:15,column:6},end:{line:15,column:39}},11:{start:{line:16,column:6},end:{line:16,column:45}},12:{start:{line:19,column:2},end:{line:19,column:17}},13:{start:{line:23,column:4},end:{line:25,column:5}},14:{start:{line:24,column:6},end:{line:24,column:13}},15:{start:{line:26,column:4},end:{line:44,column:5}},16:{start:{line:27,column:25},end:{line:27,column:44}},17:{start:{line:28,column:6},end:{line:30,column:7}},18:{start:{line:29,column:8},end:{line:29,column:48}},19:{start:{line:31,column:6},end:{line:33,column:7}},20:{start:{line:32,column:8},end:{line:32,column:48}},21:{start:{line:34,column:6},end:{line:36,column:7}},22:{start:{line:35,column:8},end:{line:35,column:48}},23:{start:{line:37,column:6},end:{line:39,column:7}},24:{start:{line:38,column:8},end:{line:38,column:58}},25:{start:{line:40,column:6},end:{line:40,column:21}},26:{start:{line:42,column:6},end:{line:42,column:63}},27:{start:{line:43,column:6},end:{line:43,column:21}},28:{start:{line:47,column:20},end:{line:47,column:67}},29:{start:{line:48,column:18},end:{line:93,column:6}},30:{start:{line:49,column:21},end:{line:88,column:8}},31:{start:{line:50,column:29},end:{line:50,column:76}},32:{start:{line:51,column:8},end:{line:87,column:10}},33:{start:{line:68,column:20},end:{line:68,column:63}},34:{start:{line:89,column:6},end:{line:92,column:26}},35:{start:{line:94,column:4},end:{line:94,column:152}}},fnMap:{0:{name:"groupFeaturesBySourceLayer",decl:{start:{line:4,column:9},end:{line:4,column:35}},loc:{start:{line:4,column:46},end:{line:20,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:32},end:{line:18,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:11,column:52},end:{line:11,column:53}},loc:{start:{line:11,column:59},end:{line:11,column:90}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:35},end:{line:45,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:11},end:{line:95,column:3}},line:46},5:{name:"(anonymous_5)",decl:{start:{line:48,column:43},end:{line:48,column:44}},loc:{start:{line:48,column:62},end:{line:93,column:5}},line:48},6:{name:"(anonymous_6)",decl:{start:{line:49,column:48},end:{line:49,column:49}},loc:{start:{line:49,column:66},end:{line:88,column:7}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:67,column:27},end:{line:67,column:28}},loc:{start:{line:67,column:33},end:{line:69,column:19}},line:67}},branchMap:{0:{loc:{start:{line:9,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:9,column:4},end:{line:17,column:5}},{start:{line:13,column:11},end:{line:17,column:5}}],line:9},1:{loc:{start:{line:14,column:27},end:{line:14,column:51}},type:"binary-expr",locations:[{start:{line:14,column:27},end:{line:14,column:45}},{start:{line:14,column:49},end:{line:14,column:51}}],line:14},2:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:28,column:6},end:{line:30,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:30,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:28,column:10},end:{line:28,column:64}},type:"binary-expr",locations:[{start:{line:28,column:10},end:{line:28,column:36}},{start:{line:28,column:40},end:{line:28,column:64}}],line:28},5:{loc:{start:{line:31,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:31,column:6},end:{line:33,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},6:{loc:{start:{line:31,column:10},end:{line:31,column:64}},type:"binary-expr",locations:[{start:{line:31,column:10},end:{line:31,column:36}},{start:{line:31,column:40},end:{line:31,column:64}}],line:31},7:{loc:{start:{line:34,column:6},end:{line:36,column:7}},type:"if",locations:[{start:{line:34,column:6},end:{line:36,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},8:{loc:{start:{line:34,column:10},end:{line:34,column:64}},type:"binary-expr",locations:[{start:{line:34,column:10},end:{line:34,column:36}},{start:{line:34,column:40},end:{line:34,column:64}}],line:34},9:{loc:{start:{line:37,column:6},end:{line:39,column:7}},type:"if",locations:[{start:{line:37,column:6},end:{line:39,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},10:{loc:{start:{line:37,column:10},end:{line:37,column:84}},type:"binary-expr",locations:[{start:{line:37,column:10},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:84}}],line:37},11:{loc:{start:{line:71,column:20},end:{line:75,column:24}},type:"binary-expr",locations:[{start:{line:71,column:20},end:{line:71,column:38}},{start:{line:71,column:58},end:{line:75,column:24}}],line:71},12:{loc:{start:{line:77,column:20},end:{line:80,column:24}},type:"binary-expr",locations:[{start:{line:77,column:20},end:{line:77,column:35}},{start:{line:77,column:55},end:{line:80,column:24}}],line:77}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx"],names:[],mappings:"AA8EU,cAkBsB,YAlBtB;AA9EV,OAAO,WAAW;AAClB,OAAO,eAAe;AAGtB,SAAS,2BAA2B,UAA4B;AAC9D,QAAM,UAA6C,CAAC;AAEpD,QAAM,mBAA4C,CAAC;AAEnD,WAAS,QAAQ,aAAW;AAC1B,UAAM,YAAY,QAAQ,MAAM,cAAc;AAC9C,QAAG,OAAO,UAAU,eAAe,KAAK,kBAAkB,QAAQ,MAAM,EAAE,GAAG;AAC3E,uBAAiB,QAAQ,MAAM,EAAE;AAEjC,YAAM,gBAAgB,QAAQ,SAAS,EAAE,KAAK,CAAC,MAAsB,EAAE,MAAM,OAAO,QAAQ,MAAM,EAAE;AAEpG,oBAAe,UAAU,iBAAiB,QAAQ,MAAM,EAAE;AAAA,IAC5D,OAAO;AACL,cAAQ,SAAS,IAAI,QAAQ,SAAS,KAAK,CAAC;AAC5C,cAAQ,SAAS,EAAE,KAAK,OAAO;AAE/B,uBAAiB,QAAQ,MAAM,EAAE,IAAI;AAAA,IACvC;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAQA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,iBAAiB,SAAyB,OAAgB;AAExD,QAAI,CAAC,QAAQ,MAAM,OAAO;AACxB;AAAA,IACF;AAEA,QAAI;AACF,YAAM,aAAa,QAAQ,MAAM;AAEjC,UAAG,gBAAgB,cAAc,WAAW,YAAY,GAAG;AACzD,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,0BAA0B,cAAc,WAAW,sBAAsB,GAAG;AAC9E,eAAO,OAAO,WAAW,sBAAsB,CAAC;AAAA,MAClD;AAEA,aAAO;AAAA,IACT,SAGO,KAAK;AACV,cAAQ,KAAK,uCAAuC,GAAG;AACvD,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,UAAU,2BAA2B,KAAK,MAAM,QAAQ;AAE9D,UAAM,QAAQ,OAAO,KAAK,OAAO,EAAE,IAAI,mBAAiB;AACtD,YAAM,SAAS,QAAQ,aAAa,EAAE,IAAI,CAAC,SAAyB,QAAgB;AAClF,cAAM,eAAe,KAAK,iBAAiB,SAAS,KAAK,MAAM,IAAI;AAEnE,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,WAAU;AAAA,YAEV;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,OAAO,EAAC,YAAY,aAAY;AAAA;AAAA,cACjC;AAAA,cACD;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,MAAM;AACb,yBAAK,MAAM,cAAc,QAAQ,MAAM,EAAE;AAAA,kBAC3C;AAAA,kBAEC;AAAA,4BAAQ,MAAM,QACb,oBAAC,aAAU,MAAM,QAAQ,MAAM,MAAM,OAAO;AAAA,sBAC1C,OAAO;AAAA,sBACP,QAAQ;AAAA,sBACR,cAAc;AAAA,oBAChB,GAAE;AAAA,oBAEH,QAAQ,MAAM;AAAA,oBACd,QAAQ,WAAW,qBAAC,UAAK;AAAA;AAAA,sBAAI,QAAQ;AAAA,uBAAQ;AAAA;AAAA;AAAA,cAChD;AAAA;AAAA;AAAA,UAtBK;AAAA,QAuBP;AAAA,MACF,CAAC;AACD,aAAO,qBAAC,SACN;AAAA,4BAAC,SAAI,WAAU,2BAA2B,yBAAc;AAAA,QACvD;AAAA,WAFc,aAGjB;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,gCAA+B,eAAY,uBAAsB,KAAI,OACxF,iBACH;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6d83428b3c695d7740365dc3cc3e42bdf4d49028"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Mi=function(){return s},s}Mi();function Xfe(n){Mi().f[0]++;const e=(Mi().s[0]++,{}),t=(Mi().s[1]++,{});return Mi().s[2]++,n.forEach(i=>{Mi().f[1]++;const r=(Mi().s[3]++,i.layer["source-layer"]);if(Mi().s[4]++,Object.prototype.hasOwnProperty.call(t,i.layer.id)){Mi().b[0][0]++,Mi().s[5]++,t[i.layer.id]++;const o=(Mi().s[6]++,e[r].find(s=>(Mi().f[2]++,Mi().s[7]++,s.layer.id===i.layer.id)));Mi().s[8]++,o.counter=t[i.layer.id]}else Mi().b[0][1]++,Mi().s[9]++,e[r]=(Mi().b[1][0]++,e[r]||(Mi().b[1][1]++,[])),Mi().s[10]++,e[r].push(i),Mi().s[11]++,t[i.layer.id]=1}),Mi().s[12]++,e}class VX extends On.Component{_getFeatureColor(e,t){if(Mi().f[3]++,Mi().s[13]++,e.layer.paint)Mi().b[2][1]++;else{Mi().b[2][0]++,Mi().s[14]++;return}Mi().s[15]++;try{const i=(Mi().s[16]++,e.layer.paint);return Mi().s[17]++,Mi().b[4][0]++,"text-color"in i&&(Mi().b[4][1]++,i["text-color"])?(Mi().b[3][0]++,Mi().s[18]++,String(i["text-color"])):(Mi().b[3][1]++,Mi().s[19]++,Mi().b[6][0]++,"fill-color"in i&&(Mi().b[6][1]++,i["fill-color"])?(Mi().b[5][0]++,Mi().s[20]++,String(i["fill-color"])):(Mi().b[5][1]++,Mi().s[21]++,Mi().b[8][0]++,"line-color"in i&&(Mi().b[8][1]++,i["line-color"])?(Mi().b[7][0]++,Mi().s[22]++,String(i["line-color"])):(Mi().b[7][1]++,Mi().s[23]++,Mi().b[10][0]++,"fill-extrusion-color"in i&&(Mi().b[10][1]++,i["fill-extrusion-color"])?(Mi().b[9][0]++,Mi().s[24]++,String(i["fill-extrusion-color"])):(Mi().b[9][1]++,Mi().s[25]++,"black"))))}catch(i){return Mi().s[26]++,console.warn("Unable to get feature color, error:",i),Mi().s[27]++,"black"}}render(){Mi().f[4]++;const e=(Mi().s[28]++,Xfe(this.props.features)),t=(Mi().s[29]++,Object.keys(e).map(i=>{Mi().f[5]++;const r=(Mi().s[30]++,e[i].map((o,s)=>{Mi().f[6]++;const a=(Mi().s[31]++,this._getFeatureColor(o,this.props.zoom));return Mi().s[32]++,ie.jsxs("div",{className:"maputnik-popup-layer",children:[ie.jsx("div",{className:"maputnik-popup-layer__swatch",style:{background:a}}),ie.jsxs("label",{className:"maputnik-popup-layer__label",onClick:()=>{Mi().f[7]++,Mi().s[33]++,this.props.onLayerSelect(o.layer.id)},children:[(Mi().b[11][0]++,o.layer.type&&(Mi().b[11][1]++,ie.jsx($X,{type:o.layer.type,style:{width:14,height:14,paddingRight:3}}))),o.layer.id,(Mi().b[12][0]++,o.counter&&(Mi().b[12][1]++,ie.jsxs("span",{children:["  ",o.counter]})))]})]},s)}));return Mi().s[34]++,ie.jsxs("div",{children:[ie.jsx("div",{className:"maputnik-popup-layer-id",children:i}),r]},i)}));return Mi().s[35]++,ie.jsx("div",{className:"maputnik-feature-layer-popup","data-wd-key":"feature-layer-popup",dir:"ltr",children:t})}}function fr(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",e="1e4c480681bcaba84c2c41960b73ded2066b54bc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",statementMap:{0:{start:{line:4,column:2},end:{line:4,column:67}},1:{start:{line:4,column:54},end:{line:4,column:67}},2:{start:{line:5,column:2},end:{line:5,column:59}},3:{start:{line:5,column:29},end:{line:5,column:59}},4:{start:{line:6,column:2},end:{line:6,column:115}},5:{start:{line:6,column:91},end:{line:6,column:115}},6:{start:{line:7,column:2},end:{line:7,column:15}},7:{start:{line:10,column:2},end:{line:13,column:12}},8:{start:{line:16,column:2},end:{line:32,column:12}},9:{start:{line:29,column:23},end:{line:29,column:55}},10:{start:{line:30,column:6},end:{line:30,column:74}},11:{start:{line:35,column:25},end:{line:35,column:27}},12:{start:{line:36,column:2},end:{line:49,column:5}},13:{start:{line:37,column:25},end:{line:39,column:6}},14:{start:{line:38,column:6},end:{line:38,column:156}},15:{start:{line:40,column:4},end:{line:48,column:5}},16:{start:{line:41,column:6},end:{line:41,column:35}},17:{start:{line:43,column:6},end:{line:47,column:7}},18:{start:{line:44,column:8},end:{line:44,column:58}},19:{start:{line:46,column:8},end:{line:46,column:60}},20:{start:{line:50,column:2},end:{line:50,column:24}},21:{start:{line:54,column:21},end:{line:54,column:66}},22:{start:{line:55,column:4},end:{line:55,column:303}}},fnMap:{0:{name:"displayValue",decl:{start:{line:3,column:9},end:{line:3,column:21}},loc:{start:{line:3,column:29},end:{line:8,column:1}},line:3},1:{name:"renderKeyValueTableRow",decl:{start:{line:9,column:9},end:{line:9,column:31}},loc:{start:{line:9,column:44},end:{line:14,column:1}},line:9},2:{name:"renderFeature",decl:{start:{line:15,column:9},end:{line:15,column:22}},loc:{start:{line:15,column:37},end:{line:33,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:28,column:40},end:{line:28,column:41}},loc:{start:{line:28,column:58},end:{line:31,column:5}},line:28},4:{name:"removeDuplicatedFeatures",decl:{start:{line:34,column:9},end:{line:34,column:33}},loc:{start:{line:34,column:44},end:{line:51,column:1}},line:34},5:{name:"(anonymous_5)",decl:{start:{line:36,column:19},end:{line:36,column:20}},loc:{start:{line:36,column:32},end:{line:49,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:50},end:{line:37,column:51}},loc:{start:{line:37,column:64},end:{line:39,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:56,column:3}},line:53}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:4,column:67}},type:"if",locations:[{start:{line:4,column:2},end:{line:4,column:67}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:4},1:{loc:{start:{line:4,column:6},end:{line:4,column:52}},type:"binary-expr",locations:[{start:{line:4,column:6},end:{line:4,column:34}},{start:{line:4,column:38},end:{line:4,column:52}}],line:4},2:{loc:{start:{line:5,column:2},end:{line:5,column:59}},type:"if",locations:[{start:{line:5,column:2},end:{line:5,column:59}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},3:{loc:{start:{line:6,column:2},end:{line:6,column:115}},type:"if",locations:[{start:{line:6,column:2},end:{line:6,column:115}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},4:{loc:{start:{line:6,column:6},end:{line:6,column:89}},type:"binary-expr",locations:[{start:{line:6,column:6},end:{line:6,column:31}},{start:{line:6,column:35},end:{line:6,column:60}},{start:{line:6,column:64},end:{line:6,column:89}}],line:6},5:{loc:{start:{line:21,column:6},end:{line:24,column:10}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:32}},{start:{line:21,column:52},end:{line:24,column:10}}],line:21},6:{loc:{start:{line:38,column:13},end:{line:38,column:155}},type:"binary-expr",locations:[{start:{line:38,column:13},end:{line:38,column:77}},{start:{line:38,column:81},end:{line:38,column:155}}],line:38},7:{loc:{start:{line:40,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:48,column:5}},{start:{line:42,column:11},end:{line:48,column:5}}],line:40},8:{loc:{start:{line:43,column:6},end:{line:47,column:7}},type:"if",locations:[{start:{line:43,column:6},end:{line:47,column:7}},{start:{line:45,column:13},end:{line:47,column:7}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx"],names:[],mappings:"AAkBS,SACL,KADK;AAlBT,OAAO,WAAW;AAQlB,SAAS,aAAa,OAAoD;AACxE,MAAI,OAAO,UAAU,eAAe,UAAU,KAAM,QAAO;AAC3D,MAAI,iBAAiB,KAAM,QAAO,MAAM,eAAe;AACvD,MAAI,OAAO,UAAU,YACb,OAAO,UAAU,YACjB,OAAO,UAAU,SAAU,QAAO,MAAM,SAAS;AACzD,SAAO;AACT;AAEA,SAAS,uBAAuB,KAAa,OAA2B;AACtE,SAAO,qBAAC,QACN;AAAA,wBAAC,QAAG,WAAU,6BAA6B,eAAI;AAAA,IAC/C,oBAAC,QAAG,WAAU,6BAA6B,iBAAM;AAAA,OAFnC,GAGhB;AACF;AAEA,SAAS,cAAc,SAAyB,KAAa;AAC3D,SAAO,qBAAC,MAAM,UAAN,EACN;AAAA,wBAAC,QACC,+BAAC,QAAG,SAAS,GAAG,WAAU,2BAA2B;AAAA,cAAQ,MAAM,QAAQ;AAAA,MAAE;AAAA,MAAG,QAAQ,MAAM,cAAc;AAAA,MAAG,QAAQ,sBAAsB,qBAAC,UAAK;AAAA;AAAA,QAAI,QAAQ;AAAA,SAAmB;AAAA,OAAQ,GAC5L;AAAA,IACC,uBAAuB,SAAS,QAAQ,SAAS,IAAI;AAAA,IACrD,uBAAuB,OAAO,aAAa,QAAQ,EAAE,CAAC;AAAA,IACtD,OAAO,KAAK,QAAQ,UAAU,EAAE,IAAI,kBAAgB;AACnD,YAAM,WAAW,QAAQ,WAAW,YAAY;AAChD,aAAO,uBAAuB,cAAc,aAAa,QAAQ,CAAC;AAAA,IACpE,CAAC;AAAA,OATyB,GAU5B;AACF;AAEA,SAAS,yBAAyB,UAA4B;AAC5D,QAAM,iBAAmC,CAAC;AAE1C,WAAS,QAAQ,aAAW;AAC1B,UAAM,eAAe,eAAe,UAAU,cAAY;AACxD,aAAO,QAAQ,MAAM,cAAc,MAAM,SAAS,MAAM,cAAc,KACjE,KAAK,UAAU,QAAQ,UAAU,MAAM,KAAK,UAAU,SAAS,UAAU;AAAA,IAChF,CAAC;AAED,QAAG,iBAAiB,IAAI;AACtB,qBAAe,KAAK,OAAO;AAAA,IAC7B,OAAO;AACL,UAAG,wBAAwB,eAAe,YAAY,GAAG;AACvD,uBAAe,YAAY,EAAE;AAAA,MAC/B,OAAO;AACL,uBAAe,YAAY,EAAE,qBAAqB;AAAA,MACpD;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAMA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,WAAW,yBAAyB,KAAK,MAAM,QAAQ;AAC7D,WAAO,oBAAC,SAAI,WAAU,mCAAkC,KAAI,OAAM,eAAY,0BAC5E,8BAAC,WAAM,WAAU,wBACf,8BAAC,WACE,mBAAS,IAAI,aAAa,GAC7B,GACF,GACF;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1e4c480681bcaba84c2c41960b73ded2066b54bc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return fr=function(){return s},s}fr();function nz(n){return fr().f[0]++,fr().s[0]++,fr().b[1][0]++,typeof n>"u"||(fr().b[1][1]++,n===null)?(fr().b[0][0]++,fr().s[1]++,n):(fr().b[0][1]++,fr().s[2]++,n instanceof Date?(fr().b[2][0]++,fr().s[3]++,n.toLocaleString()):(fr().b[2][1]++,fr().s[4]++,fr().b[4][0]++,typeof n=="object"||(fr().b[4][1]++,typeof n=="number")||(fr().b[4][2]++,typeof n=="string")?(fr().b[3][0]++,fr().s[5]++,n.toString()):(fr().b[3][1]++,fr().s[6]++,n)))}function MO(n,e){return fr().f[1]++,fr().s[7]++,ie.jsxs("tr",{children:[ie.jsx("td",{className:"maputnik-popup-table-cell",children:n}),ie.jsx("td",{className:"maputnik-popup-table-cell",children:e})]},n)}function Jfe(n,e){return fr().f[2]++,fr().s[8]++,ie.jsxs(On.Fragment,{children:[ie.jsx("tr",{children:ie.jsxs("td",{colSpan:2,className:"maputnik-popup-layer-id",children:[n.layer.source,": ",n.layer["source-layer"],(fr().b[5][0]++,n.inspectModeCounter&&(fr().b[5][1]++,ie.jsxs("span",{children:["  ",n.inspectModeCounter]})))]})}),MO("$type",n.geometry.type),MO("$id",nz(n.id)),Object.keys(n.properties).map(t=>{fr().f[3]++;const i=(fr().s[9]++,n.properties[t]);return fr().s[10]++,MO(t,nz(i))})]},e)}function epe(n){fr().f[4]++;const e=(fr().s[11]++,[]);return fr().s[12]++,n.forEach(t=>{fr().f[5]++;const i=(fr().s[13]++,e.findIndex(r=>(fr().f[6]++,fr().s[14]++,fr().b[6][0]++,t.layer["source-layer"]===r.layer["source-layer"]&&(fr().b[6][1]++,JSON.stringify(t.properties)===JSON.stringify(r.properties)))));fr().s[15]++,i===-1?(fr().b[7][0]++,fr().s[16]++,e.push(t)):(fr().b[7][1]++,fr().s[17]++,"inspectModeCounter"in e[i]?(fr().b[8][0]++,fr().s[18]++,e[i].inspectModeCounter++):(fr().b[8][1]++,fr().s[19]++,e[i].inspectModeCounter=2))}),fr().s[20]++,e}class tpe extends On.Component{render(){fr().f[7]++;const e=(fr().s[21]++,epe(this.props.features));return fr().s[22]++,ie.jsx("div",{className:"maputnik-feature-property-popup",dir:"ltr","data-wd-key":"feature-property-popup",children:ie.jsx("table",{className:"maputnik-popup-table",children:ie.jsx("tbody",{children:e.map(Jfe)})})})}}const c3={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},HX=Object.create(null);for(const n in c3)Object.hasOwn(c3,n)&&(HX[c3[n]]=n);const dc={to:{},get:{}};dc.get=function(n){const e=n.slice(0,3).toLowerCase();let t,i;switch(e){case"hsl":{t=dc.get.hsl(n),i="hsl";break}case"hwb":{t=dc.get.hwb(n),i="hwb";break}default:{t=dc.get.rgb(n),i="rgb";break}}return t?{model:i,value:t}:null};dc.get.rgb=function(n){if(!n)return null;const e=/^#([a-f\d]{3,4})$/i,t=/^#([a-f\d]{6})([a-f\d]{2})?$/i,i=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,r=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,o=/^(\w+)$/;let s=[0,0,0,1],a,c,h;if(a=n.match(t)){for(h=a[2],a=a[1],c=0;c<3;c++){const m=c*2;s[c]=Number.parseInt(a.slice(m,m+2),16)}h&&(s[3]=Number.parseInt(h,16)/255)}else if(a=n.match(e)){for(a=a[1],h=a[3],c=0;c<3;c++)s[c]=Number.parseInt(a[c]+a[c],16);h&&(s[3]=Number.parseInt(h+h,16)/255)}else if(a=n.match(i)){for(c=0;c<3;c++)s[c]=Number.parseInt(a[c+1],10);a[4]&&(s[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else if(a=n.match(r)){for(c=0;c<3;c++)s[c]=Math.round(Number.parseFloat(a[c+1])*2.55);a[4]&&(s[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else return(a=n.match(o))?a[1]==="transparent"?[0,0,0,0]:Object.hasOwn(c3,a[1])?(s=c3[a[1]],s[3]=1,s):null:null;for(c=0;c<3;c++)s[c]=$y(s[c],0,255);return s[3]=$y(s[3],0,1),s};dc.get.hsl=function(n){if(!n)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const i=Number.parseFloat(t[4]),r=(Number.parseFloat(t[1])%360+360)%360,o=$y(Number.parseFloat(t[2]),0,100),s=$y(Number.parseFloat(t[3]),0,100),a=$y(Number.isNaN(i)?1:i,0,1);return[r,o,s,a]}return null};dc.get.hwb=function(n){if(!n)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*[\s,]\s*([+-]?[\d.]+)%\s*[\s,]\s*([+-]?[\d.]+)%\s*(?:[\s,]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const i=Number.parseFloat(t[4]),r=(Number.parseFloat(t[1])%360+360)%360,o=$y(Number.parseFloat(t[2]),0,100),s=$y(Number.parseFloat(t[3]),0,100),a=$y(Number.isNaN(i)?1:i,0,1);return[r,o,s,a]}return null};dc.to.hex=function(...n){return"#"+N5(n[0])+N5(n[1])+N5(n[2])+(n[3]<1?N5(Math.round(n[3]*255)):"")};dc.to.rgb=function(...n){return n.length<4||n[3]===1?"rgb("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+")":"rgba("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+", "+n[3]+")"};dc.to.rgb.percent=function(...n){const e=Math.round(n[0]/255*100),t=Math.round(n[1]/255*100),i=Math.round(n[2]/255*100);return n.length<4||n[3]===1?"rgb("+e+"%, "+t+"%, "+i+"%)":"rgba("+e+"%, "+t+"%, "+i+"%, "+n[3]+")"};dc.to.hsl=function(...n){return n.length<4||n[3]===1?"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)":"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+n[3]+")"};dc.to.hwb=function(...n){let e="";return n.length>=4&&n[3]!==1&&(e=", "+n[3]),"hwb("+n[0]+", "+n[1]+"%, "+n[2]+"%"+e+")"};dc.to.keyword=function(...n){return HX[n.slice(0,3)]};function $y(n,e,t){return Math.min(Math.max(e,n),t)}function N5(n){const e=Math.round(n).toString(16).toUpperCase();return e.length<2?"0"+e:e}const N3={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ZX={};for(const n of Object.keys(N3))ZX[N3[n]]=n;const bi={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},r1=(6/29)**3;function L_(n){const e=n>.0031308?1.055*n**.4166666666666667-.055:n*12.92;return Math.min(Math.max(0,e),1)}function F_(n){return n>.04045?((n+.055)/1.055)**2.4:n/12.92}for(const n of Object.keys(bi)){if(!("channels"in bi[n]))throw new Error("missing channels property: "+n);if(!("labels"in bi[n]))throw new Error("missing channel labels property: "+n);if(bi[n].labels.length!==bi[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=bi[n];delete bi[n].channels,delete bi[n].labels,Object.defineProperty(bi[n],"channels",{value:e}),Object.defineProperty(bi[n],"labels",{value:t})}bi.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(e,t,i),o=Math.max(e,t,i),s=o-r;let a,c;switch(o){case r:{a=0;break}case e:{a=(t-i)/s;break}case t:{a=2+(i-e)/s;break}case i:{a=4+(e-t)/s;break}}a=Math.min(a*60,360),a<0&&(a+=360);const h=(r+o)/2;return o===r?c=0:h<=.5?c=s/(o+r):c=s/(2-o-r),[a,c*100,h*100]};bi.rgb.hsv=function(n){let e,t,i,r,o;const s=n[0]/255,a=n[1]/255,c=n[2]/255,h=Math.max(s,a,c),m=h-Math.min(s,a,c),y=function(M){return(h-M)/6/m+1/2};if(m===0)r=0,o=0;else{switch(o=m/h,e=y(s),t=y(a),i=y(c),h){case s:{r=i-t;break}case a:{r=1/3+e-i;break}case c:{r=2/3+t-e;break}}r<0?r+=1:r>1&&(r-=1)}return[r*360,o*100,h*100]};bi.rgb.hwb=function(n){const e=n[0],t=n[1];let i=n[2];const r=bi.rgb.hsl(n)[0],o=1/255*Math.min(e,Math.min(t,i));return i=1-1/255*Math.max(e,Math.max(t,i)),[r,o*100,i*100]};bi.rgb.oklab=function(n){const e=F_(n[0]/255),t=F_(n[1]/255),i=F_(n[2]/255),r=Math.cbrt(.4122214708*e+.5363325363*t+.0514459929*i),o=Math.cbrt(.2119034982*e+.6806995451*t+.1073969566*i),s=Math.cbrt(.0883024619*e+.2817188376*t+.6299787005*i),a=.2104542553*r+.793617785*o-.0040720468*s,c=1.9779984951*r-2.428592205*o+.4505937099*s,h=.0259040371*r+.7827717662*o-.808675766*s;return[a*100,c*100,h*100]};bi.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(1-e,1-t,1-i),o=(1-e-r)/(1-r)||0,s=(1-t-r)/(1-r)||0,a=(1-i-r)/(1-r)||0;return[o*100,s*100,a*100,r*100]};function npe(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}bi.rgb.keyword=function(n){const e=ZX[n];if(e)return e;let t=Number.POSITIVE_INFINITY,i;for(const r of Object.keys(N3)){const o=N3[r],s=npe(n,o);s<t&&(t=s,i=r)}return i};bi.keyword.rgb=function(n){return N3[n]};bi.rgb.xyz=function(n){const e=F_(n[0]/255),t=F_(n[1]/255),i=F_(n[2]/255),r=e*.4124564+t*.3575761+i*.1804375,o=e*.2126729+t*.7151522+i*.072175,s=e*.0193339+t*.119192+i*.9503041;return[r*100,o*100,s*100]};bi.rgb.lab=function(n){const e=bi.rgb.xyz(n);let t=e[0],i=e[1],r=e[2];t/=95.047,i/=100,r/=108.883,t=t>r1?t**(1/3):7.787*t+16/116,i=i>r1?i**(1/3):7.787*i+16/116,r=r>r1?r**(1/3):7.787*r+16/116;const o=116*i-16,s=500*(t-i),a=200*(i-r);return[o,s,a]};bi.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;let r,o;if(t===0)return o=i*255,[o,o,o];const s=i<.5?i*(1+t):i+t-i*t,a=2*i-s,c=[0,0,0];for(let h=0;h<3;h++)r=e+1/3*-(h-1),r<0&&r++,r>1&&r--,6*r<1?o=a+(s-a)*6*r:2*r<1?o=s:3*r<2?o=a+(s-a)*(2/3-r)*6:o=a,c[h]=o*255;return c};bi.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,i=n[2]/100,r=t;const o=Math.max(i,.01);i*=2,t*=i<=1?i:2-i,r*=o<=1?o:2-o;const s=(i+t)/2,a=i===0?2*r/(o+r):2*t/(i+t);return[e,a*100,s*100]};bi.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let i=n[2]/100;const r=Math.floor(e)%6,o=e-Math.floor(e),s=255*i*(1-t),a=255*i*(1-t*o),c=255*i*(1-t*(1-o));switch(i*=255,r){case 0:return[i,c,s];case 1:return[a,i,s];case 2:return[s,i,c];case 3:return[s,a,i];case 4:return[c,s,i];case 5:return[i,s,a]}};bi.hsv.hsl=function(n){const e=n[0],t=n[1]/100,i=n[2]/100,r=Math.max(i,.01);let o,s;s=(2-t)*i;const a=(2-t)*r;return o=t*r,o/=a<=1?a:2-a,o=o||0,s/=2,[e,o*100,s*100]};bi.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,i=n[2]/100;const r=t+i;let o;r>1&&(t/=r,i/=r);const s=Math.floor(6*e),a=1-i;o=6*e-s,(s&1)!==0&&(o=1-o);const c=t+o*(a-t);let h,m,y;switch(s){default:case 6:case 0:{h=a,m=c,y=t;break}case 1:{h=c,m=a,y=t;break}case 2:{h=t,m=a,y=c;break}case 3:{h=t,m=c,y=a;break}case 4:{h=c,m=t,y=a;break}case 5:{h=a,m=t,y=c;break}}return[h*255,m*255,y*255]};bi.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=n[3]/100,o=1-Math.min(1,e*(1-r)+r),s=1-Math.min(1,t*(1-r)+r),a=1-Math.min(1,i*(1-r)+r);return[o*255,s*255,a*255]};bi.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100;let r,o,s;return r=e*3.2404542+t*-1.5371385+i*-.4985314,o=e*-.969266+t*1.8760108+i*.041556,s=e*.0556434+t*-.2040259+i*1.0572252,r=L_(r),o=L_(o),s=L_(s),[r*255,o*255,s*255]};bi.xyz.lab=function(n){let e=n[0],t=n[1],i=n[2];e/=95.047,t/=100,i/=108.883,e=e>r1?e**(1/3):7.787*e+16/116,t=t>r1?t**(1/3):7.787*t+16/116,i=i>r1?i**(1/3):7.787*i+16/116;const r=116*t-16,o=500*(e-t),s=200*(t-i);return[r,o,s]};bi.xyz.oklab=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=Math.cbrt(.8189330101*e+.3618667424*t-.1288597137*i),o=Math.cbrt(.0329845436*e+.9293118715*t+.0361456387*i),s=Math.cbrt(.0482003018*e+.2643662691*t+.633851707*i),a=.2104542553*r+.793617785*o-.0040720468*s,c=1.9779984951*r-2.428592205*o+.4505937099*s,h=.0259040371*r+.7827717662*o-.808675766*s;return[a*100,c*100,h*100]};bi.oklab.oklch=function(n){return bi.lab.lch(n)};bi.oklab.xyz=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=(.999999998*e+.396337792*t+.215803758*i)**3,o=(1.000000008*e-.105561342*t-.063854175*i)**3,s=(1.000000055*e-.089484182*t-1.291485538*i)**3,a=1.227013851*r-.55779998*o+.281256149*s,c=-.040580178*r+1.11225687*o-.071676679*s,h=-.076381285*r-.421481978*o+1.58616322*s;return[a*100,c*100,h*100]};bi.oklab.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=(e+.3963377774*t+.2158037573*i)**3,o=(e-.1055613458*t-.0638541728*i)**3,s=(e-.0894841775*t-1.291485548*i)**3,a=L_(4.0767416621*r-3.3077115913*o+.2309699292*s),c=L_(-1.2684380046*r+2.6097574011*o-.3413193965*s),h=L_(-.0041960863*r-.7034186147*o+1.707614701*s);return[a*255,c*255,h*255]};bi.oklch.oklab=function(n){return bi.lch.lab(n)};bi.lab.xyz=function(n){const e=n[0],t=n[1],i=n[2];let r,o,s;o=(e+16)/116,r=t/500+o,s=o-i/200;const a=o**3,c=r**3,h=s**3;return o=a>r1?a:(o-16/116)/7.787,r=c>r1?c:(r-16/116)/7.787,s=h>r1?h:(s-16/116)/7.787,r*=95.047,o*=100,s*=108.883,[r,o,s]};bi.lab.lch=function(n){const e=n[0],t=n[1],i=n[2];let r;r=Math.atan2(i,t)*360/2/Math.PI,r<0&&(r+=360);const s=Math.sqrt(t*t+i*i);return[e,s,r]};bi.lch.lab=function(n){const e=n[0],t=n[1],r=n[2]/360*2*Math.PI,o=t*Math.cos(r),s=t*Math.sin(r);return[e,o,s]};bi.rgb.ansi16=function(n,e=null){const[t,i,r]=n;let o=e===null?bi.rgb.hsv(n)[2]:e;if(o=Math.round(o/50),o===0)return 30;let s=30+(Math.round(r/255)<<2|Math.round(i/255)<<1|Math.round(t/255));return o===2&&(s+=60),s};bi.hsv.ansi16=function(n){return bi.rgb.ansi16(bi.hsv.rgb(n),n[2])};bi.rgb.ansi256=function(n){const e=n[0],t=n[1],i=n[2];return e>>4===t>>4&&t>>4===i>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(i/255*5)};bi.ansi16.rgb=function(n){n=n[0];let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(Math.trunc(n>50)+1)*.5,i=(e&1)*t*255,r=(e>>1&1)*t*255,o=(e>>2&1)*t*255;return[i,r,o]};bi.ansi256.rgb=function(n){if(n=n[0],n>=232){const o=(n-232)*10+8;return[o,o,o]}n-=16;let e;const t=Math.floor(n/36)/5*255,i=Math.floor((e=n%36)/6)/5*255,r=e%6/5*255;return[t,i,r]};bi.rgb.hex=function(n){const t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".slice(t.length)+t};bi.hex.rgb=function(n){const e=n.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=[...t].map(a=>a+a).join(""));const i=Number.parseInt(t,16),r=i>>16&255,o=i>>8&255,s=i&255;return[r,o,s]};bi.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.max(Math.max(e,t),i),o=Math.min(Math.min(e,t),i),s=r-o;let a;const c=s<1?o/(1-s):0;return s<=0?a=0:r===e?a=(t-i)/s%6:r===t?a=2+(i-e)/s:a=4+(e-t)/s,a/=6,a%=1,[a*360,s*100,c*100]};bi.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=t<.5?2*e*t:2*e*(1-t);let r=0;return i<1&&(r=(t-.5*i)/(1-i)),[n[0],i*100,r*100]};bi.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=e*t;let r=0;return i<1&&(r=(t-i)/(1-i)),[n[0],i*100,r*100]};bi.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;if(t===0)return[i*255,i*255,i*255];const r=[0,0,0],o=e%1*6,s=o%1,a=1-s;let c=0;switch(Math.floor(o)){case 0:{r[0]=1,r[1]=s,r[2]=0;break}case 1:{r[0]=a,r[1]=1,r[2]=0;break}case 2:{r[0]=0,r[1]=1,r[2]=s;break}case 3:{r[0]=0,r[1]=a,r[2]=1;break}case 4:{r[0]=s,r[1]=0,r[2]=1;break}default:r[0]=1,r[1]=0,r[2]=a}return c=(1-t)*i,[(t*r[0]+c)*255,(t*r[1]+c)*255,(t*r[2]+c)*255]};bi.hcg.hsv=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);let r=0;return i>0&&(r=e/i),[n[0],r*100,i*100]};bi.hcg.hsl=function(n){const e=n[1]/100,i=n[2]/100*(1-e)+.5*e;let r=0;return i>0&&i<.5?r=e/(2*i):i>=.5&&i<1&&(r=e/(2*(1-i))),[n[0],r*100,i*100]};bi.hcg.hwb=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);return[n[0],(i-e)*100,(1-i)*100]};bi.hwb.hcg=function(n){const e=n[1]/100,i=1-n[2]/100,r=i-e;let o=0;return r<1&&(o=(i-r)/(1-r)),[n[0],r*100,o*100]};bi.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};bi.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};bi.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};bi.gray.hsl=function(n){return[0,0,n[0]]};bi.gray.hsv=bi.gray.hsl;bi.gray.hwb=function(n){return[0,100,n[0]]};bi.gray.cmyk=function(n){return[0,0,0,n[0]]};bi.gray.lab=function(n){return[n[0],0,0]};bi.gray.hex=function(n){const e=Math.round(n[0]/100*255)&255,i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(i.length)+i};bi.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};function ipe(){const n={},e=Object.keys(bi);for(let{length:t}=e,i=0;i<t;i++)n[e[i]]={distance:-1,parent:null};return n}function rpe(n){const e=ipe(),t=[n];for(e[n].distance=0;t.length>0;){const i=t.pop(),r=Object.keys(bi[i]);for(let{length:o}=r,s=0;s<o;s++){const a=r[s],c=e[a];c.distance===-1&&(c.distance=e[i].distance+1,c.parent=i,t.unshift(a))}}return e}function ope(n,e){return function(t){return e(n(t))}}function spe(n,e){const t=[e[n].parent,n];let i=bi[e[n].parent][n],r=e[n].parent;for(;e[r].parent;)t.unshift(e[r].parent),i=ope(bi[e[r].parent][r],i),r=e[r].parent;return i.conversion=t,i}function ape(n){const e=rpe(n),t={},i=Object.keys(e);for(let{length:r}=i,o=0;o<r;o++){const s=i[o];e[s].parent!==null&&(t[s]=spe(s,e))}return t}const Yc={},lpe=Object.keys(bi);function upe(n){const e=function(...t){const i=t[0];return i==null?i:(i.length>1&&(t=i),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function cpe(n){const e=function(...t){const i=t[0];if(i==null)return i;i.length>1&&(t=i);const r=n(t);if(typeof r=="object")for(let{length:o}=r,s=0;s<o;s++)r[s]=Math.round(r[s]);return r};return"conversion"in n&&(e.conversion=n.conversion),e}for(const n of lpe){Yc[n]={},Object.defineProperty(Yc[n],"channels",{value:bi[n].channels}),Object.defineProperty(Yc[n],"labels",{value:bi[n].labels});const e=ape(n),t=Object.keys(e);for(const i of t){const r=e[i];Yc[n][i]=cpe(r),Yc[n][i].raw=upe(r)}}const XX=["keyword","gray","hex"],w9={};for(const n of Object.keys(Yc))w9[[...Yc[n].labels].sort().join("")]=n;const S9={};function Wu(n,e){if(!(this instanceof Wu))return new Wu(n,e);if(e&&e in XX&&(e=null),e&&!(e in Yc))throw new Error("Unknown model: "+e);let t,i;if(n==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(n instanceof Wu)this.model=n.model,this.color=[...n.color],this.valpha=n.valpha;else if(typeof n=="string"){const r=dc.get(n);if(r===null)throw new Error("Unable to parse color from string: "+n);this.model=r.model,i=Yc[this.model].channels,this.color=r.value.slice(0,i),this.valpha=typeof r.value[i]=="number"?r.value[i]:1}else if(n.length>0){this.model=e||"rgb",i=Yc[this.model].channels;const r=Array.prototype.slice.call(n,0,i);this.color=E9(r,i),this.valpha=typeof n[i]=="number"?n[i]:1}else if(typeof n=="number")this.model="rgb",this.color=[n>>16&255,n>>8&255,n&255],this.valpha=1;else{this.valpha=1;const r=Object.keys(n);"alpha"in n&&(r.splice(r.indexOf("alpha"),1),this.valpha=typeof n.alpha=="number"?n.alpha:0);const o=r.sort().join("");if(!(o in w9))throw new Error("Unable to parse color from object: "+JSON.stringify(n));this.model=w9[o];const{labels:s}=Yc[this.model],a=[];for(t=0;t<s.length;t++)a.push(n[s[t]]);this.color=E9(a)}if(S9[this.model])for(i=Yc[this.model].channels,t=0;t<i;t++){const r=S9[this.model][t];r&&(this.color[t]=r(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Wu.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(n){let e=this.model in dc.to?this:this.rgb();e=e.round(typeof n=="number"?n:1);const t=e.valpha===1?e.color:[...e.color,this.valpha];return dc.to[e.model](...t)},percentString(n){const e=this.rgb().round(typeof n=="number"?n:1),t=e.valpha===1?e.color:[...e.color,this.valpha];return dc.to.rgb.percent(...t)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const n={},{channels:e}=Yc[this.model],{labels:t}=Yc[this.model];for(let i=0;i<e;i++)n[t[i]]=this.color[i];return this.valpha!==1&&(n.alpha=this.valpha),n},unitArray(){const n=this.rgb().color;return n[0]/=255,n[1]/=255,n[2]/=255,this.valpha!==1&&n.push(this.valpha),n},unitObject(){const n=this.rgb().object();return n.r/=255,n.g/=255,n.b/=255,this.valpha!==1&&(n.alpha=this.valpha),n},round(n){return n=Math.max(n||0,0),new Wu([...this.color.map(hpe(n)),this.valpha],this.model)},alpha(n){return n!==void 0?new Wu([...this.color,Math.max(0,Math.min(1,n))],this.model):this.valpha},red:$l("rgb",0,lc(255)),green:$l("rgb",1,lc(255)),blue:$l("rgb",2,lc(255)),hue:$l(["hsl","hsv","hsl","hwb","hcg"],0,n=>(n%360+360)%360),saturationl:$l("hsl",1,lc(100)),lightness:$l("hsl",2,lc(100)),saturationv:$l("hsv",1,lc(100)),value:$l("hsv",2,lc(100)),chroma:$l("hcg",1,lc(100)),gray:$l("hcg",2,lc(100)),white:$l("hwb",1,lc(100)),wblack:$l("hwb",2,lc(100)),cyan:$l("cmyk",0,lc(100)),magenta:$l("cmyk",1,lc(100)),yellow:$l("cmyk",2,lc(100)),black:$l("cmyk",3,lc(100)),x:$l("xyz",0,lc(95.047)),y:$l("xyz",1,lc(100)),z:$l("xyz",2,lc(108.833)),l:$l("lab",0,lc(100)),a:$l("lab",1),b:$l("lab",2),keyword(n){return n!==void 0?new Wu(n):Yc[this.model].keyword(this.color)},hex(n){return n!==void 0?new Wu(n):dc.to.hex(...this.rgb().round().color)},hexa(n){if(n!==void 0)return new Wu(n);const e=this.rgb().round().color;let t=Math.round(this.valpha*255).toString(16).toUpperCase();return t.length===1&&(t="0"+t),dc.to.hex(...e)+t},rgbNumber(){const n=this.rgb().color;return(n[0]&255)<<16|(n[1]&255)<<8|n[2]&255},luminosity(){const n=this.rgb().color,e=[];for(const[t,i]of n.entries()){const r=i/255;e[t]=r<=.04045?r/12.92:((r+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(n){const e=this.luminosity(),t=n.luminosity();return e>t?(e+.05)/(t+.05):(t+.05)/(e+.05)},level(n){const e=this.contrast(n);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const n=this.rgb().color;return(n[0]*2126+n[1]*7152+n[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const n=this.rgb();for(let e=0;e<3;e++)n.color[e]=255-n.color[e];return n},lighten(n){const e=this.hsl();return e.color[2]+=e.color[2]*n,e},darken(n){const e=this.hsl();return e.color[2]-=e.color[2]*n,e},saturate(n){const e=this.hsl();return e.color[1]+=e.color[1]*n,e},desaturate(n){const e=this.hsl();return e.color[1]-=e.color[1]*n,e},whiten(n){const e=this.hwb();return e.color[1]+=e.color[1]*n,e},blacken(n){const e=this.hwb();return e.color[2]+=e.color[2]*n,e},grayscale(){const n=this.rgb().color,e=n[0]*.3+n[1]*.59+n[2]*.11;return Wu.rgb(e,e,e)},fade(n){return this.alpha(this.valpha-this.valpha*n)},opaquer(n){return this.alpha(this.valpha+this.valpha*n)},rotate(n){const e=this.hsl();let t=e.color[0];return t=(t+n)%360,t=t<0?360+t:t,e.color[0]=t,e},mix(n,e){if(!n||!n.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof n);const t=n.rgb(),i=this.rgb(),r=e===void 0?.5:e,o=2*r-1,s=t.alpha()-i.alpha(),a=((o*s===-1?o:(o+s)/(1+o*s))+1)/2,c=1-a;return Wu.rgb(a*t.red()+c*i.red(),a*t.green()+c*i.green(),a*t.blue()+c*i.blue(),t.alpha()*r+i.alpha()*(1-r))}};for(const n of Object.keys(Yc)){if(XX.includes(n))continue;const{channels:e}=Yc[n];Wu.prototype[n]=function(...t){return this.model===n?new Wu(this):t.length>0?new Wu(t,n):new Wu([...dpe(Yc[this.model][n].raw(this.color)),this.valpha],n)},Wu[n]=function(...t){let i=t[0];return typeof i=="number"&&(i=E9(t,e)),new Wu(i,n)}}function Ape(n,e){return Number(n.toFixed(e))}function hpe(n){return function(e){return Ape(e,n)}}function $l(n,e,t){n=Array.isArray(n)?n:[n];for(const i of n)(S9[i]||=[])[e]=t;return n=n[0],function(i){let r;return i!==void 0?(t&&(i=t(i)),r=this[n](),r.color[e]=i,r):(r=this[n]().color[e],t&&(r=t(r)),r)}}function lc(n){return function(e){return Math.max(0,Math.min(n,e))}}function dpe(n){return Array.isArray(n)?n:[n]}function E9(n,e){for(let t=0;t<e;t++)typeof n[t]!="number"&&(n[t]=0);return n}function vs(){var n="/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",e="9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",statementMap:{0:{start:{line:2,column:9},end:{line:2,column:15}},1:{start:{line:3,column:15},end:{line:3,column:21}},2:{start:{line:4,column:12},end:{line:4,column:16}},3:{start:{line:8,column:4},end:{line:8,column:20}},4:{start:{line:9,column:4},end:{line:9,column:52}},5:{start:{line:10,column:4},end:{line:10,column:93}},6:{start:{line:11,column:4},end:{line:11,column:70}},7:{start:{line:12,column:4},end:{line:12,column:27}},8:{start:{line:13,column:4},end:{line:13,column:29}},9:{start:{line:14,column:4},end:{line:14,column:27}},10:{start:{line:17,column:4},end:{line:17,column:60}},11:{start:{line:20,column:4},end:{line:22,column:6}},12:{start:{line:23,column:4},end:{line:23,column:57}},13:{start:{line:24,column:4},end:{line:24,column:27}},14:{start:{line:27,column:4},end:{line:27,column:57}},15:{start:{line:27,column:33},end:{line:27,column:55}},16:{start:{line:28,column:4},end:{line:28,column:57}},17:{start:{line:28,column:33},end:{line:28,column:55}},18:{start:{line:29,column:4},end:{line:29,column:58}},19:{start:{line:29,column:34},end:{line:29,column:56}},20:{start:{line:32,column:4},end:{line:32,column:60}},21:{start:{line:33,column:4},end:{line:33,column:23}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:16},end:{line:6,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:13},end:{line:15,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:20},end:{line:18,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:18},end:{line:25,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:22},end:{line:30,column:3}},line:26},5:{name:"(anonymous_5)",decl:{start:{line:27,column:27},end:{line:27,column:28}},loc:{start:{line:27,column:33},end:{line:27,column:55}},line:27},6:{name:"(anonymous_6)",decl:{start:{line:28,column:27},end:{line:28,column:28}},loc:{start:{line:28,column:33},end:{line:28,column:55}},line:28},7:{name:"(anonymous_7)",decl:{start:{line:29,column:28},end:{line:29,column:29}},loc:{start:{line:29,column:34},end:{line:29,column:56}},line:29},8:{name:"(anonymous_8)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:13},end:{line:34,column:3}},line:31}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts"],names:[],mappings:"AAEA,qBAAqB,YAAY;AAAA,EAC/B,OAAuB;AAAA,EACvB,aAAyC;AAAA,EACzC,UAAkC;AAAA,EAElC,cAAc;AAAA,EAAC;AAAA,EAEf,MAAM,KAAU;AACd,SAAK,OAAO;AACZ,SAAK,aAAa,SAAS,cAAc,KAAK;AAC9C,SAAK,WAAW,YAAY;AAC5B,SAAK,WAAW,aAAa,eAAe,oBAAoB;AAChE,SAAK,SAAS,OAAO;AACrB,SAAK,kBAAkB;AAEvB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,kBAAkB;AAChB,SAAK,QAAS,YAAY,KAAK,KAAM,QAAQ,EAAE,QAAQ,CAAC;AAAA,EAC1D;AAAA,EAEA,SAAS,OAAe;AACtB,SAAK,WAAY,YAAY;AAAA,QACzB,KAAK;AAAA;AAET,SAAK,UAAU,KAAK,WAAY,cAAc,MAAM;AACpD,SAAK,gBAAgB;AAAA,EACvB;AAAA,EAEA,oBAAoB;AAClB,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,WAAW,MAAM,KAAK,gBAAgB,CAAC;AAAA,EACvD;AAAA,EAEA,WAAW;AACT,SAAK,WAAY,WAAY,YAAY,KAAK,UAAW;AACzD,SAAK,OAAO;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return vs=function(){return s},s}vs();class fpe{_map=(vs().s[0]++,void 0);_container=(vs().s[1]++,void 0);_textEl=(vs().s[2]++,null);constructor(){vs().f[0]++}onAdd(e){return vs().f[1]++,vs().s[3]++,this._map=e,vs().s[4]++,this._container=document.createElement("div"),vs().s[5]++,this._container.className="maplibregl-ctrl maplibregl-ctrl-group maplibregl-ctrl-zoom",vs().s[6]++,this._container.setAttribute("data-wd-key","maplibre:ctrl-zoom"),vs().s[7]++,this.setLabel("Zoom:"),vs().s[8]++,this.addEventListeners(),vs().s[9]++,this._container}updateZoomLevel(){vs().f[2]++,vs().s[10]++,this._textEl.innerHTML=this._map.getZoom().toFixed(2)}setLabel(e){vs().f[3]++,vs().s[11]++,this._container.innerHTML=`
      ${e} <span></span>
    `,vs().s[12]++,this._textEl=this._container.querySelector("span"),vs().s[13]++,this.updateZoomLevel()}addEventListeners(){vs().f[4]++,vs().s[14]++,this._map.on("render",()=>(vs().f[5]++,vs().s[15]++,this.updateZoomLevel())),vs().s[16]++,this._map.on("zoomIn",()=>(vs().f[6]++,vs().s[17]++,this.updateZoomLevel())),vs().s[18]++,this._map.on("zoomOut",()=>(vs().f[7]++,vs().s[19]++,this.updateZoomLevel()))}onRemove(){vs().f[8]++,vs().s[20]++,this._container.parentNode.removeChild(this._container),vs().s[21]++,this._map=void 0}}function O9(n,e,t){const i={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(i["source-layer"]=t),i}function B9(n,e,t,i){const r={id:[t,i,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return i&&(r["source-layer"]=i),r}function I9(n,e,t){const i={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(i["source-layer"]=t),i}function ppe(n,e){const t=[],i=[],r=[];function o(s){return{circle:e(s,.8),line:e(s,.6),polygon:e(s,.3),polygonOutline:e(s,.6),default:e(s,1)}}return Object.keys(n).forEach(s=>{const a=n[s];if(!a||a.length===0){const c=o(s);i.push(O9(c.circle,s)),r.push(I9(c.line,s)),t.push(B9(c.polygon,c.polygonOutline,s))}else a.forEach(c=>{const h=o(c);i.push(O9(h.circle,s,c)),r.push(I9(h.line,s,c)),t.push(B9(h.polygon,h.polygonOutline,s,c))})}),t.concat(r).concat(i)}function mpe(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const i={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},r={};return Object.keys(n.sources).forEach(o=>{const s=n.sources[o];(s.type==="vector"||s.type==="geojson")&&(r[o]=s)}),Object.assign(n,{layers:[i].concat(e),sources:r})}const wO={polygonLayer:B9,lineLayer:I9,circleLayer:O9,generateInspectStyle:mpe,generateColoredLayers:ppe};function Fr(){var n="/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",e="aec0f701e803624fae461cc89b5fc887ff556587",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",statementMap:{0:{start:{line:4,column:2},end:{line:8,column:3}},1:{start:{line:5,column:4},end:{line:5,column:33}},2:{start:{line:6,column:9},end:{line:8,column:3}},3:{start:{line:7,column:4},end:{line:7,column:30}},4:{start:{line:9,column:2},end:{line:13,column:3}},5:{start:{line:10,column:4},end:{line:10,column:28}},6:{start:{line:12,column:4},end:{line:12,column:23}},7:{start:{line:14,column:2},end:{line:14,column:29}},8:{start:{line:15,column:2},end:{line:15,column:11}},9:{start:{line:18,column:2},end:{line:18,column:84}},10:{start:{line:18,column:72},end:{line:18,column:84}},11:{start:{line:19,column:24},end:{line:19,column:51}},12:{start:{line:20,column:16},end:{line:20,column:52}},13:{start:{line:21,column:2},end:{line:23,column:3}},14:{start:{line:22,column:4},end:{line:22,column:104}},15:{start:{line:24,column:2},end:{line:26,column:3}},16:{start:{line:25,column:4},end:{line:25,column:96}},17:{start:{line:27,column:2},end:{line:29,column:3}},18:{start:{line:28,column:4},end:{line:28,column:94}},19:{start:{line:30,column:2},end:{line:30,column:14}}},fnMap:{0:{name:"changeLayer",decl:{start:{line:3,column:9},end:{line:3,column:20}},loc:{start:{line:3,column:31},end:{line:16,column:1}},line:3},1:{name:"colorHighlightedLayer",decl:{start:{line:17,column:16},end:{line:17,column:37}},loc:{start:{line:17,column:45},end:{line:31,column:1}},line:17}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:8,column:3}},{start:{line:6,column:9},end:{line:8,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:8,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},2:{loc:{start:{line:9,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:13,column:3}},{start:{line:11,column:9},end:{line:13,column:3}}],line:9},3:{loc:{start:{line:18,column:2},end:{line:18,column:84}},type:"if",locations:[{start:{line:18,column:2},end:{line:18,column:84}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},4:{loc:{start:{line:18,column:6},end:{line:18,column:70}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:12}},{start:{line:18,column:16},end:{line:18,column:43}},{start:{line:18,column:47},end:{line:18,column:70}}],line:18},5:{loc:{start:{line:19,column:24},end:{line:19,column:51}},type:"binary-expr",locations:[{start:{line:19,column:24},end:{line:19,column:45}},{start:{line:19,column:49},end:{line:19,column:51}}],line:19},6:{loc:{start:{line:21,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:23,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},7:{loc:{start:{line:21,column:6},end:{line:21,column:62}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:27}},{start:{line:21,column:31},end:{line:21,column:62}}],line:21},8:{loc:{start:{line:24,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},9:{loc:{start:{line:24,column:6},end:{line:24,column:56}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:56}}],line:24},10:{loc:{start:{line:27,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:27,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:27}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/highlight.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,YAAY;AAKnB,SAAS,YAAY,GAAqB,OAA2B;AACnE,MAAG,EAAE,SAAS,UAAU;AACtB,MAAE,MAAO,eAAe,IAAI;AAAA,EAC9B,WAAU,EAAE,SAAS,QAAQ;AAC3B,MAAE,MAAO,YAAY,IAAI;AAAA,EAC3B;AAEA,MAAG,YAAY,OAAO;AACpB,MAAE,SAAS,MAAM;AAAA,EACnB,OAAO;AACL,WAAO,EAAE,QAAQ;AAAA,EACnB;AACA,IAAE,KAAK,EAAE,KAAK;AACd,SAAO;AACT;AAEO,gBAAS,sBAAsB,OAAqD;AACzF,MAAG,CAAC,SAAS,MAAM,SAAS,gBAAgB,MAAM,SAAS,SAAU,QAAO;AAE5E,QAAM,gBAAgB,MAAM,cAAc,KAAK;AAC/C,QAAM,QAAQ,OAAO,YAAY,eAAe,CAAC;AAEjD,MAAG,MAAM,SAAS,UAAU,MAAM,SAAS,kBAAkB;AAC3D,WAAO,YAAY,SAAS,aAAa,OAAO,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EACpG;AAEA,MAAG,MAAM,SAAS,YAAY,MAAM,SAAS,UAAU;AACrD,WAAO,YAAY,SAAS,YAAY,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC5F;AAEA,MAAG,MAAM,SAAS,QAAQ;AACxB,WAAO,YAAY,SAAS,UAAU,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC1F;AAEA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aec0f701e803624fae461cc89b5fc887ff556587"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Fr=function(){return s},s}Fr();function SO(n,e){return Fr().f[0]++,Fr().s[0]++,n.type==="circle"?(Fr().b[0][0]++,Fr().s[1]++,n.paint["circle-radius"]=3):(Fr().b[0][1]++,Fr().s[2]++,n.type==="line"?(Fr().b[1][0]++,Fr().s[3]++,n.paint["line-width"]=2):Fr().b[1][1]++),Fr().s[4]++,"filter"in e?(Fr().b[2][0]++,Fr().s[5]++,n.filter=e.filter):(Fr().b[2][1]++,Fr().s[6]++,delete n.filter),Fr().s[7]++,n.id=n.id+"_highlight",Fr().s[8]++,n}function gpe(n){if(Fr().f[1]++,Fr().s[9]++,Fr().b[4][0]++,!n||(Fr().b[4][1]++,n.type==="background")||(Fr().b[4][2]++,n.type==="raster"))return Fr().b[3][0]++,Fr().s[10]++,null;Fr().b[3][1]++;const e=(Fr().s[11]++,Fr().b[5][0]++,n["source-layer"]||(Fr().b[5][1]++,"")),t=(Fr().s[12]++,WX.brightColor(e,1));return Fr().s[13]++,Fr().b[7][0]++,n.type==="fill"||(Fr().b[7][1]++,n.type==="fill-extrusion")?(Fr().b[6][0]++,Fr().s[14]++,SO(wO.polygonLayer(t,t,n.source,n["source-layer"]),n)):(Fr().b[6][1]++,Fr().s[15]++,Fr().b[9][0]++,n.type==="symbol"||(Fr().b[9][1]++,n.type==="circle")?(Fr().b[8][0]++,Fr().s[16]++,SO(wO.circleLayer(t,n.source,n["source-layer"]),n)):(Fr().b[8][1]++,Fr().s[17]++,n.type==="line"?(Fr().b[10][0]++,Fr().s[18]++,SO(wO.lineLayer(t,n.source,n["source-layer"]),n)):(Fr().b[10][1]++,Fr().s[19]++,null)))}function mP(){var n="/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",e="a9dc98f82c73787713de0672aff7a601bfeb069d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:115}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,WAAW,iBAAiB,gFAAgF,KAAK;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a9dc98f82c73787713de0672aff7a601bfeb069d"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return mP=function(){return s},s}mP();mP().s[0]++;m_.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",!1);function EO(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(m){try{h(i.next(m))}catch(y){s(y)}}function c(m){try{h(i.throw(m))}catch(y){s(y)}}function h(m){m.done?o(m.value):r(m.value).then(a,c)}h((i=i.apply(n,e||[])).next())})}var G5=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function bE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var OO,iz;function JX(){if(iz)return OO;iz=1,OO=e;var n=Object.prototype.hasOwnProperty;function e(){for(var t={},i=0;i<arguments.length;i++){var r=arguments[i];for(var o in r)n.call(r,o)&&(t[o]=r[o])}return t}return OO}var BO={exports:{}},rz;function ype(){return rz||(rz=1,(function(n,e){(function(){var t={};n.exports=t,t.simpleFilter=function(i,r){return r.filter(function(o){return t.test(i,o)})},t.test=function(i,r){return t.match(i,r)!==null},t.match=function(i,r,o){o=o||{};var s=0,a=[],c=r.length,h=0,m=0,y=o.pre||"",M=o.post||"",x=o.caseSensitive&&r||r.toLowerCase(),k;i=o.caseSensitive&&i||i.toLowerCase();for(var P=0;P<c;P++)k=r[P],x[P]===i[s]?(k=y+k+M,s+=1,m+=1+m):m=0,h+=m,a[a.length]=k;return s===i.length?(h=x===i?1/0:h,{rendered:a.join(""),score:h}):null},t.filter=function(i,r,o){return!r||r.length===0?[]:typeof i!="string"?r:(o=o||{},r.reduce(function(s,a,c,h){var m=a;o.extract&&(m=o.extract(a));var y=t.match(i,m,o);return y!=null&&(s[s.length]={string:y.rendered,score:y.score,index:c,original:a}),s},[]).sort(function(s,a){var c=a.score-s.score;return c||s.index-a.index}))}})()})(BO)),BO.exports}var IO,oz;function vpe(){if(oz)return IO;oz=1;var n=function(e){return this.component=e,this.items=[],this.active=e.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};return n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(e){this.items.push(e)},n.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.isVisible=function(){return this.element.style.display==="block"},n.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()},n.prototype.drawItem=function(e,t){var i=document.createElement("li"),r=document.createElement("a");t&&(i.className+=" active"),r.innerHTML=e.string,i.appendChild(r),this.element.appendChild(i),i.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),i.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,e)}).bind(this))},n.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},n.prototype.move=function(e){this.active=e,this.draw()},n.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},n.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},IO=n,IO}var kO,sz;function bpe(){if(sz)return kO;sz=1;var n=JX(),e=ype(),t=vpe(),i=function(r,o,s){return s=s||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},s),this.el=r,this.data=o||[],this.list=new t(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(a){this.handleKeyUp(a.keyCode,a)}).bind(this),!1),this.el.addEventListener("keydown",(function(a){this.handleKeyDown(a)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(a){this.handlePaste(a)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return i.prototype.handleKeyUp=function(r,o){if(!(r===40||r===38||r===27||r===9)){if(r===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),o.stopPropagation());return}this.handleInputChange(this.el.value)}},i.prototype.handleKeyDown=function(r){switch(r.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&r.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},i.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},i.prototype.handlePaste=function(r){if(r.clipboardData)this.handleInputChange(r.clipboardData.getData("Text"));else{var o=this;setTimeout(function(){o.handleInputChange(r.target.value)},100)}},i.prototype.handleInputChange=function(r){if(this.query=this.normalize(r),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(o){for(var s=0;s<o.length&&(this.list.add(o[s]),s!==this.options.limit-1);s++);this.list.draw()}).bind(this))},i.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},i.prototype.update=function(r){this.data=r,this.handleKeyUp()},i.prototype.clear=function(){this.data=[],this.list.clear()},i.prototype.normalize=function(r){return r=r.toLowerCase(),r},i.prototype.match=function(r,o){return r.indexOf(o)>-1},i.prototype.value=function(r){if(this.selected=r,this.el.value=this.getItemValue(r||{place_name:this.query}),document.createEvent){var o=document.createEvent("HTMLEvents");o.initEvent("change",!0,!1),this.el.dispatchEvent(o)}else this.el.fireEvent("onchange")},i.prototype.getCandidates=function(r){var o={pre:"<strong>",post:"</strong>",extract:(function(a){return this.getItemValue(a)}).bind(this)},s;this.options.filter?(s=e.filter(this.query,this.data,o),s=s.map((function(a){return{original:a.original,string:this.render(a.original,a.string)}}).bind(this))):s=this.data.map((function(a){var c=this.render(a);return{original:a,string:c}}).bind(this)),r(s)},i.prototype.getItemValue=function(r){return r},i.prototype.render=function(r,o){if(o)return o;for(var s=r.original?this.getItemValue(r.original):this.getItemValue(r),a=this.normalize(s),c=a.lastIndexOf(this.query);c>-1;){var h=c+this.query.length;s=s.slice(0,c)+"<strong>"+s.slice(c,h)+"</strong>"+s.slice(h),c=a.slice(0,c).lastIndexOf(this.query)}return s},i.prototype.renderError=function(r){this.list.drawError(r)},kO=i,kO}var TO,az;function Cpe(){if(az)return TO;az=1;var n=bpe();return TO=n,typeof window<"u"&&(window.Suggestions=n),TO}var _pe=Cpe(),xpe=bE(_pe),sw={exports:{}},Mpe=sw.exports,lz;function wpe(){return lz||(lz=1,(function(n){(function(e,t,i){n.exports?n.exports=i():e[t]=i()})(Mpe,"subtag",function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function i(c){return c.match(t)||[]}function r(c){return i(c).filter(function(h,m){return h&&m})}function o(c){return c=i(c),{language:c[1]||e,extlang:c[2]||e,script:c[3]||e,region:c[4]||e}}function s(c,h,m){Object.defineProperty(c,h,{value:m,enumerable:!0})}function a(c,h,m){function y(M){return i(M)[c]||e}s(y,"pattern",h),s(o,m,y)}return a(1,/^[a-zA-Z]{2,3}$/,"language"),a(2,/^[a-zA-Z]{3}$/,"extlang"),a(3,/^[a-zA-Z]{4}$/,"script"),a(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),s(o,"split",r),o})})(sw)),sw.exports}var Spe=wpe(),Epe=bE(Spe),RO,uz;function Ope(){if(uz)return RO;uz=1;var n="Expected a function",e=NaN,t="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,c=typeof G5=="object"&&G5&&G5.Object===Object&&G5,h=typeof self=="object"&&self&&self.Object===Object&&self,m=c||h||Function("return this")(),y=Object.prototype,M=y.toString,x=Math.max,k=Math.min,P=function(){return m.Date.now()};function F(G,Y,z){var se,le,me,de,be,Ee,De=0,je=!1,Ie=!1,Qe=!0;if(typeof G!="function")throw new TypeError(n);Y=H(Y)||0,j(z)&&(je=!!z.leading,Ie="maxWait"in z,me=Ie?x(H(z.maxWait)||0,Y):me,Qe="trailing"in z?!!z.trailing:Qe);function et(Bt){var Ke=se,Te=le;return se=le=void 0,De=Bt,de=G.apply(Te,Ke),de}function dt(Bt){return De=Bt,be=setTimeout(ze,Y),je?et(Bt):de}function ke(Bt){var Ke=Bt-Ee,Te=Bt-De,Se=Y-Ke;return Ie?k(Se,me-Te):Se}function we(Bt){var Ke=Bt-Ee,Te=Bt-De;return Ee===void 0||Ke>=Y||Ke<0||Ie&&Te>=me}function ze(){var Bt=P();if(we(Bt))return xe(Bt);be=setTimeout(ze,ke(Bt))}function xe(Bt){return be=void 0,Qe&&se?et(Bt):(se=le=void 0,de)}function At(){be!==void 0&&clearTimeout(be),De=0,se=Ee=le=be=void 0}function it(){return be===void 0?de:xe(P())}function bt(){var Bt=P(),Ke=we(Bt);if(se=arguments,le=this,Ee=Bt,Ke){if(be===void 0)return dt(Ee);if(Ie)return be=setTimeout(ze,Y),et(Ee)}return be===void 0&&(be=setTimeout(ze,Y)),de}return bt.cancel=At,bt.flush=it,bt}function j(G){var Y=typeof G;return!!G&&(Y=="object"||Y=="function")}function q(G){return!!G&&typeof G=="object"}function V(G){return typeof G=="symbol"||q(G)&&M.call(G)==t}function H(G){if(typeof G=="number")return G;if(V(G))return e;if(j(G)){var Y=typeof G.valueOf=="function"?G.valueOf():G;G=j(Y)?Y+"":Y}if(typeof G!="string")return G===0?G:+G;G=G.replace(i,"");var z=o.test(G);return z||s.test(G)?a(G.slice(2),z?2:8):r.test(G)?e:+G}return RO=F,RO}var Bpe=Ope(),Ipe=bE(Bpe),kpe=JX(),Np=bE(kpe),W5={exports:{}},cz;function Tpe(){if(cz)return W5.exports;cz=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(G,Y,z){return Function.prototype.apply.call(G,Y,z)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(G){return Object.getOwnPropertyNames(G).concat(Object.getOwnPropertySymbols(G))}:t=function(G){return Object.getOwnPropertyNames(G)};function i(H){console&&console.warn&&console.warn(H)}var r=Number.isNaN||function(G){return G!==G};function o(){o.init.call(this)}W5.exports=o,W5.exports.once=j,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(H){if(typeof H!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof H)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(H){if(typeof H!="number"||H<0||r(H))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+H+".");s=H}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(G){if(typeof G!="number"||G<0||r(G))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+G+".");return this._maxListeners=G,this};function c(H){return H._maxListeners===void 0?o.defaultMaxListeners:H._maxListeners}o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(G){for(var Y=[],z=1;z<arguments.length;z++)Y.push(arguments[z]);var se=G==="error",le=this._events;if(le!==void 0)se=se&&le.error===void 0;else if(!se)return!1;if(se){var me;if(Y.length>0&&(me=Y[0]),me instanceof Error)throw me;var de=new Error("Unhandled error."+(me?" ("+me.message+")":""));throw de.context=me,de}var be=le[G];if(be===void 0)return!1;if(typeof be=="function")e(be,this,Y);else for(var Ee=be.length,De=k(be,Ee),z=0;z<Ee;++z)e(De[z],this,Y);return!0};function h(H,G,Y,z){var se,le,me;if(a(Y),le=H._events,le===void 0?(le=H._events=Object.create(null),H._eventsCount=0):(le.newListener!==void 0&&(H.emit("newListener",G,Y.listener?Y.listener:Y),le=H._events),me=le[G]),me===void 0)me=le[G]=Y,++H._eventsCount;else if(typeof me=="function"?me=le[G]=z?[Y,me]:[me,Y]:z?me.unshift(Y):me.push(Y),se=c(H),se>0&&me.length>se&&!me.warned){me.warned=!0;var de=new Error("Possible EventEmitter memory leak detected. "+me.length+" "+String(G)+" listeners added. Use emitter.setMaxListeners() to increase limit");de.name="MaxListenersExceededWarning",de.emitter=H,de.type=G,de.count=me.length,i(de)}return H}o.prototype.addListener=function(G,Y){return h(this,G,Y,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(G,Y){return h(this,G,Y,!0)};function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(H,G,Y){var z={fired:!1,wrapFn:void 0,target:H,type:G,listener:Y},se=m.bind(z);return se.listener=Y,z.wrapFn=se,se}o.prototype.once=function(G,Y){return a(Y),this.on(G,y(this,G,Y)),this},o.prototype.prependOnceListener=function(G,Y){return a(Y),this.prependListener(G,y(this,G,Y)),this},o.prototype.removeListener=function(G,Y){var z,se,le,me,de;if(a(Y),se=this._events,se===void 0)return this;if(z=se[G],z===void 0)return this;if(z===Y||z.listener===Y)--this._eventsCount===0?this._events=Object.create(null):(delete se[G],se.removeListener&&this.emit("removeListener",G,z.listener||Y));else if(typeof z!="function"){for(le=-1,me=z.length-1;me>=0;me--)if(z[me]===Y||z[me].listener===Y){de=z[me].listener,le=me;break}if(le<0)return this;le===0?z.shift():P(z,le),z.length===1&&(se[G]=z[0]),se.removeListener!==void 0&&this.emit("removeListener",G,de||Y)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(G){var Y,z,se;if(z=this._events,z===void 0)return this;if(z.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):z[G]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete z[G]),this;if(arguments.length===0){var le=Object.keys(z),me;for(se=0;se<le.length;++se)me=le[se],me!=="removeListener"&&this.removeAllListeners(me);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(Y=z[G],typeof Y=="function")this.removeListener(G,Y);else if(Y!==void 0)for(se=Y.length-1;se>=0;se--)this.removeListener(G,Y[se]);return this};function M(H,G,Y){var z=H._events;if(z===void 0)return[];var se=z[G];return se===void 0?[]:typeof se=="function"?Y?[se.listener||se]:[se]:Y?F(se):k(se,se.length)}o.prototype.listeners=function(G){return M(this,G,!0)},o.prototype.rawListeners=function(G){return M(this,G,!1)},o.listenerCount=function(H,G){return typeof H.listenerCount=="function"?H.listenerCount(G):x.call(H,G)},o.prototype.listenerCount=x;function x(H){var G=this._events;if(G!==void 0){var Y=G[H];if(typeof Y=="function")return 1;if(Y!==void 0)return Y.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function k(H,G){for(var Y=new Array(G),z=0;z<G;++z)Y[z]=H[z];return Y}function P(H,G){for(;G+1<H.length;G++)H[G]=H[G+1];H.pop()}function F(H){for(var G=new Array(H.length),Y=0;Y<G.length;++Y)G[Y]=H[Y].listener||H[Y];return G}function j(H,G){return new Promise(function(Y,z){function se(me){H.removeListener(G,le),z(me)}function le(){typeof H.removeListener=="function"&&H.removeListener("error",se),Y([].slice.call(arguments))}V(H,G,le,{once:!0}),G!=="error"&&q(H,se,{once:!0})})}function q(H,G,Y){typeof H.on=="function"&&V(H,"error",G,Y)}function V(H,G,Y,z){if(typeof H.on=="function")z.once?H.once(G,Y):H.on(G,Y);else if(typeof H.addEventListener=="function")H.addEventListener(G,function se(le){z.once&&H.removeEventListener(G,se),Y(le)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof H)}return W5.exports}var Rpe=Tpe();const Az={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},Dpe={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:"",es:"Buscar"},Ppe={en:"No results found",de:"Keine Ergebnisse gefunden",es:"No hay resultados",fr:"Aucun rsultat trouv"},Upe={en:"There was an error reaching the server",de:"Verbindung fehlgeschlagen",es:"Error al conectarse al servidor",fr:"Une erreur est survenue lors de la connexion au serveur"};var c2={placeholder:Dpe,errorNoResults:Ppe,errorConnectionFailed:Upe};const Kpe=/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;class Lpe{constructor(e,t){this.options={zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:void 0,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,proximityMinZoom:9,getItemValue:i=>i.text!==void 0?i.text:i.place_name,render:function(i){if(!i.geometry){const o=i.text,s=o.toLowerCase().indexOf(this.query.toLowerCase()),a=this.query.length,c=o.substring(0,s),h=o.substring(s,s+a),m=o.substring(s+a);return'<div class="maplibregl-ctrl-geocoder--suggestion"><svg class="maplibregl-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="maplibregl-ctrl-geocoder--suggestion-info"><div class="maplibregl-ctrl-geocoder--suggestion-title">'+c+'<span class="maplibregl-ctrl-geocoder--suggestion-match">'+h+"</span>"+m+"</div></div></div>"}const r=i.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--result"><svg class="maplibregl-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="maplibregl-ctrl-geocoder--result-title">'+r[0]+'</div><div class="maplibregl-ctrl-geocoder--result-address">'+r.splice(1,r.length).join(",")+"</div></div></div>"},popupRender:i=>{const r=i.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--suggestion popup-suggestion"><div class="maplibregl-ctrl-geocoder--suggestion-title popup-suggestion-title">'+r[0]+'</div><div class="maplibregl-ctrl-geocoder--suggestion-address popup-suggestion-address">'+r.splice(1,r.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},this._eventEmitter=new Rpe.EventEmitter,this.options=Np({},this.options,t),this.fresh=!0,this.lastSelected=null,this.geocoderApi=e}addTo(e){function t(i,r){if(!document.body.contains(r))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const o=i.onAdd();r.appendChild(o)}if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const i=document.querySelectorAll(e);if(i.length===0)throw new Error("Element "+e+"not found.");if(i.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,i[0])}else if("addControl"in e)e.addControl(this);else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")}onAdd(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);const t=this.container=document.createElement("div");t.className="maplibregl-ctrl-geocoder maplibregl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";const i=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="search",this._inputEl.className="maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",Ipe(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);const r=document.createElement("div");r.classList.add("maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("type","button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="maplibregl-ctrl-geocoder--button";const o=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(o),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),r.appendChild(this._clearEl),r.appendChild(this._loadingEl),t.appendChild(i),t.appendChild(this._inputEl),t.appendChild(r),this._typeahead=new xpe(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.container.addEventListener("click",()=>{this._typeahead.update(this._typeahead.data)}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),t}createIcon(e,t){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");if(i.setAttribute("class","maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+e),i.setAttribute("viewBox","0 0 18 18"),i.setAttribute("xml:space","preserve"),i.setAttribute("width","18"),i.setAttribute("height","18"),"innerHTML"in i)i.innerHTML=t;else{const r=document.createElement("div");r.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";const o=r.firstChild,s=o.firstChild;i.appendChild(s)}return i}onRemove(){return this.container.remove(),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this}_onPaste(e){const t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}_onKeyDown(e){if(e.keyCode===27&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();const o=this._inputEl.value;if(!o)return this.fresh=!0,e.keyCode!==9&&this.clear(e),this._clearEl.style.display="none";if(!(e.metaKey||[9,27,37,39,38,40].indexOf(e.keyCode)!==-1)){if(e.keyCode===13)if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(o);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(o,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}o.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(o)}}_showButton(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")}_hideButton(){this._typeahead.selected&&(this._clearEl.style.display="none")}_onBlur(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()}_onChange(){const e=this._typeahead.selected;if(e&&!e.geometry)e.placeId?this._geocode(e.placeId,!0,!0):this._geocode(e.text,!0);else if(e&&JSON.stringify(e)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){let t;if(this._removeResultMarkers(),e.properties&&Az[e.properties.short_code])t=Np({},this.options.flyTo),this._map&&this._map.fitBounds(Az[e.properties.short_code].bbox,t);else if(e.bbox){const i=e.bbox;t=Np({},this.options.flyTo),this._map&&this._map.fitBounds([[i[0],i[1]],[i[2],i[3]]],t)}else{const i={zoom:this.options.zoom};t=Np({},i,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}}this.options.marker&&this._maplibregl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:e})}}_getConfigForRequest(){return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((i,r)=>(this.options[r]&&(["countries","types","language"].indexOf(r)>-1?i[r]=this.options[r].split(/[\s,]+/):i[r]=this.options[r],r==="proximity"&&this.options[r]&&typeof this.options[r].longitude=="number"&&typeof this.options[r].latitude=="number"&&(i[r]=[this.options[r].longitude,this.options[r].latitude])),i),{})}_geocode(e){return EO(this,arguments,void 0,function*(t,i=!1,r=!1){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});const o=this._getConfigForRequest(),s=this._createGeocodeRequest(o,t,i,r),a=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[];try{const c=yield s;yield this._handleGeocodeResponse(c,o,t,i,a)}catch(c){this._handleGeocodeErrorResponse(c,a)}return s})}_createGeocodeRequest(e,t,i,r){return this.options.localGeocoderOnly?Promise.resolve({}):this.options.reverseGeocode&&Kpe.test(t)?this._createReverseGeocodeRequest(t,e):(e.query=t,this.geocoderApi.getSuggestions?i?this.geocoderApi.searchByPlaceId&&r?this.geocoderApi.searchByPlaceId(e):this.geocoderApi.forwardGeocode(e):this.geocoderApi.getSuggestions(e):this.geocoderApi.forwardGeocode(e))}_createReverseGeocodeRequest(e,t){const i=e.split(/[\s(,)?]+/).map(r=>parseFloat(r)).reverse();return t.query=i,t.limit=1,"proximity"in t&&delete t.proximity,this.geocoderApi.reverseGeocode(t)}_handleGeocodeResponse(e,t,i,r,o){return EO(this,void 0,void 0,function*(){this._loadingEl.style.display="none";let s={};e?s=e:s={type:"FeatureCollection",features:[]},s.config=t,this.fresh&&(this.fresh=!1),s.features=s.features?o.concat(s.features):o;const a=this.options.externalGeocoder?this.options.externalGeocoder(i,s.features,t)||Promise.resolve([]):Promise.resolve([]);try{const h=yield a;s.features=s.features?h.concat(s.features):h}catch{}this.options.filter&&s.features.length&&(s.features=s.features.filter(this.options.filter));let c=[];"suggestions"in s?c=s.suggestions:"place"in s?c=[s.place]:c=s.features,c.length?(this._clearEl.style.display="block",this._typeahead.update(c),(!this.options.showResultsWhileTyping||r)&&this.options.showResultMarkers&&(s.features.length>0||"place"in s)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",s)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",s))})}_handleGeocodeErrorResponse(e,t){this._loadingEl.style.display="none",t.length&&this.options.localGeocoder?(this._clearEl.style.display="block",this._typeahead.update(t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:t}),this._eventEmitter.emit("error",{error:e})}_clear(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0}clear(e){this._clear(e),this._inputEl.focus()}_clearOnBlur(e){e.relatedTarget&&this._clear(e)}_onQueryResult(e){if(!("features"in e)||!e.features.length)return;const t=e.features[0];this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange()}_updateProximity(){if(this._map)if(this._map.getZoom()>this.options.proximityMinZoom){const e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)}_collapse(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("maplibregl-ctrl-geocoder--collapsed")}_unCollapse(){this.container.classList.remove("maplibregl-ctrl-geocoder--collapsed")}query(e){return EO(this,void 0,void 0,function*(){const t=yield this._geocode(e);this._onQueryResult(t)})}_renderError(){const e=`<div class='maplibre-gl-geocoder--error'>${this._localize("errorConnectionFailed")}</div>`;this._renderMessage(e)}_renderNoResults(){const e=`<div class='maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>
        ${this._localize("errorNoResults")}</div>`;this._renderMessage(e)}_renderMessage(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)}_localize(e){const t=Epe.language(this.options.language.split(",")[0]);return this.options.language&&c2?.[e][t]?c2[e][t]:c2[e].en}_fitBoundsForMarkers(){if(this._typeahead.data.length<1)return;const e=this._typeahead.data.filter(t=>typeof t!="string").slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){const i=Np({},{padding:100},this.options.flyTo),r=new this._maplibregl.LngLatBounds;for(const o of e)r.extend(o.geometry.coordinates);this._map.fitBounds(r,i)}return e.length>0&&this._maplibregl&&this._handleResultMarkers(e),this}setInput(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e),this}setProximity(e){return this.options.proximity=e,this}getProximity(){return this.options.proximity}setRenderFunction(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this}getRenderFunction(){return this._typeahead.render}setLanguage(e){return this.options.language=e||this.options.language||navigator.language,this}getLanguage(){return this.options.language}getZoom(){return this.options.zoom}setZoom(e){return this.options.zoom=e,this}getFlyTo(){return this.options.flyTo}setFlyTo(e){return this.options.flyTo=e,this}getPlaceholder(){return this.options.placeholder}setPlaceholder(e){return this.placeholder=e||this.options.placeholder||this._localize("placeholder"),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this}getBbox(){return this.options.bbox}setBbox(e){return this.options.bbox=e,this}getCountries(){return this.options.countries}setCountries(e){return this.options.countries=e,this}getTypes(){return this.options.types}setTypes(e){return this.options.types=e,this}getMinLength(){return this.options.minLength}setMinLength(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this}getLimit(){return this.options.limit}setLimit(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this}getFilter(){return this.options.filter}setFilter(e){return this.options.filter=e,this}setGeocoderApi(e){return this.geocoderApi=e,this}getGeocoderApi(){return this.geocoderApi}_handleMarker(e){if(!this._map)return;this._removeMarker();const i=Np({},{color:"#4668F2"},this.options.marker);this.mapMarker=new this._maplibregl.Marker(i);let r;if(this.options.popup){const s=Np({},{},this.options.popup);r=new this._maplibregl.Popup(s).setHTML(this.options.popupRender(e))}return e.center?(this.mapMarker.setLngLat(e.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(r)):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(r)),this}_removeMarker(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)}_handleResultMarkers(e){if(!this._map)return;this._removeResultMarkers();let i=Np({},{color:"#4668F2"},this.options.showResultMarkers);for(const r of e){let o;if(this.options.showResultMarkers){this.options.showResultMarkers&&this.options.showResultMarkers.element&&(o=this.options.showResultMarkers.element.cloneNode(!0),i=Np(i,{element:o}));const s=new this._maplibregl.Marker(Np({},i,{element:o}));let a;if(this.options.popup){const h=Np({},{},this.options.popup);a=new this._maplibregl.Popup(h).setHTML(this.options.popupRender(r))}r.center?(s.setLngLat(r.center).addTo(this._map),this.options.popup&&s.setPopup(a)):r.geometry&&r.geometry.type&&r.geometry.type==="Point"&&r.geometry.coordinates&&(s.setLngLat(r.geometry.coordinates).addTo(this._map),this.options.popup&&s.setPopup(a)),this.resultMarkers.push(s)}}return this}_removeResultMarkers(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(e){e.remove()}),this.resultMarkers=[])}on(e,t){return this._eventEmitter.on(e,t),this}once(e){return new Promise(t=>{this._eventEmitter.once(e,t)})}off(e,t){return this._eventEmitter.removeListener(e,t),this}}function tn(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",e="1655c5d10102378b1e2627d777374c6f3c3f21a7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",statementMap:{0:{start:{line:21,column:26},end:{line:27,column:3}},1:{start:{line:28,column:16},end:{line:28,column:55}},2:{start:{line:29,column:2},end:{line:31,column:3}},3:{start:{line:30,column:4},end:{line:30,column:30}},4:{start:{line:32,column:18},end:{line:32,column:20}},5:{start:{line:33,column:2},end:{line:38,column:5}},6:{start:{line:34,column:19},end:{line:34,column:53}},7:{start:{line:35,column:4},end:{line:37,column:5}},8:{start:{line:36,column:6},end:{line:36,column:33}},9:{start:{line:39,column:23},end:{line:43,column:3}},10:{start:{line:44,column:2},end:{line:44,column:22}},11:{start:{line:47,column:24},end:{line:57,column:3}},12:{start:{line:58,column:14},end:{line:58,column:18}},13:{start:{line:60,column:4},end:{line:60,column:17}},14:{start:{line:61,column:4},end:{line:66,column:6}},15:{start:{line:67,column:4},end:{line:69,column:7}},16:{start:{line:68,column:6},end:{line:68,column:25}},17:{start:{line:72,column:17},end:{line:72,column:22}},18:{start:{line:73,column:4},end:{line:76,column:5}},19:{start:{line:74,column:6},end:{line:74,column:132}},20:{start:{line:77,column:4},end:{line:77,column:18}},21:{start:{line:80,column:16},end:{line:80,column:30}},22:{start:{line:81,column:28},end:{line:81,column:79}},23:{start:{line:82,column:4},end:{line:87,column:5}},24:{start:{line:83,column:6},end:{line:83,column:52}},25:{start:{line:84,column:6},end:{line:84,column:70}},26:{start:{line:85,column:6},end:{line:85,column:70}},27:{start:{line:86,column:6},end:{line:86,column:76}},28:{start:{line:88,column:4},end:{line:90,column:5}},29:{start:{line:89,column:6},end:{line:89,column:43}},30:{start:{line:91,column:4},end:{line:96,column:5}},31:{start:{line:92,column:6},end:{line:92,column:59}},32:{start:{line:93,column:6},end:{line:95,column:14}},33:{start:{line:94,column:8},end:{line:94,column:36}},34:{start:{line:99,column:20},end:{line:108,column:5}},35:{start:{line:109,column:21},end:{line:109,column:53}},36:{start:{line:110,column:4},end:{line:110,column:53}},37:{start:{line:111,column:16},end:{line:111,column:43}},38:{start:{line:112,column:26},end:{line:116,column:5}},39:{start:{line:113,column:21},end:{line:113,column:36}},40:{start:{line:114,column:19},end:{line:114,column:32}},41:{start:{line:115,column:6},end:{line:115,column:44}},42:{start:{line:117,column:4},end:{line:117,column:20}},43:{start:{line:118,column:4},end:{line:118,column:56}},44:{start:{line:119,column:4},end:{line:119,column:56}},45:{start:{line:120,column:4},end:{line:120,column:62}},46:{start:{line:121,column:21},end:{line:121,column:43}},47:{start:{line:122,column:24},end:{line:122,column:41}},48:{start:{line:123,column:4},end:{line:123,column:45}},49:{start:{line:124,column:16},end:{line:124,column:74}},50:{start:{line:125,column:4},end:{line:125,column:37}},51:{start:{line:126,column:20},end:{line:126,column:49}},52:{start:{line:127,column:17},end:{line:127,column:36}},53:{start:{line:128,column:25},end:{line:130,column:6}},54:{start:{line:131,column:20},end:{line:162,column:6}},55:{start:{line:139,column:8},end:{line:139,column:82}},56:{start:{line:141,column:62},end:{line:141,column:141}},57:{start:{line:143,column:8},end:{line:160,column:9}},58:{start:{line:144,column:10},end:{line:146,column:13}},59:{start:{line:145,column:12},end:{line:145,column:94}},60:{start:{line:147,column:10},end:{line:147,column:25}},61:{start:{line:149,column:10},end:{line:158,column:13}},62:{start:{line:150,column:12},end:{line:157,column:15}},63:{start:{line:159,column:10},end:{line:159,column:25}},64:{start:{line:163,column:4},end:{line:163,column:28}},65:{start:{line:164,column:4},end:{line:172,column:7}},66:{start:{line:165,column:6},end:{line:171,column:9}},67:{start:{line:173,column:4},end:{line:178,column:7}},68:{start:{line:174,column:6},end:{line:174,column:40}},69:{start:{line:174,column:33},end:{line:174,column:40}},70:{start:{line:175,column:6},end:{line:177,column:9}},71:{start:{line:179,column:4},end:{line:181,column:7}},72:{start:{line:180,column:6},end:{line:180,column:30}},73:{start:{line:182,column:4},end:{line:186,column:7}},74:{start:{line:183,column:6},end:{line:185,column:9}},75:{start:{line:187,column:4},end:{line:187,column:37}},76:{start:{line:188,column:4},end:{line:188,column:37}},77:{start:{line:190,column:22},end:{line:193,column:3}},78:{start:{line:191,column:18},end:{line:191,column:82}},79:{start:{line:191,column:66},end:{line:191,column:81}},80:{start:{line:192,column:4},end:{line:192,column:36}},81:{start:{line:195,column:27},end:{line:228,column:5}},82:{start:{line:197,column:25},end:{line:197,column:27}},83:{start:{line:198,column:8},end:{line:223,column:9}},84:{start:{line:199,column:26},end:{line:199,column:138}},85:{start:{line:200,column:27},end:{line:200,column:47}},86:{start:{line:201,column:26},end:{line:201,column:47}},87:{start:{line:202,column:10},end:{line:220,column:11}},88:{start:{line:203,column:27},end:{line:206,column:13}},89:{start:{line:207,column:26},end:{line:218,column:13}},90:{start:{line:219,column:12},end:{line:219,column:33}},91:{start:{line:222,column:10},end:{line:222,column:69}},92:{start:{line:224,column:8},end:{line:226,column:10}},93:{start:{line:229,column:21},end:{line:232,column:6}},94:{start:{line:233,column:4},end:{line:233,column:41}},95:{start:{line:234,column:4},end:{line:234,column:20}},96:{start:{line:237,column:14},end:{line:237,column:26}},97:{start:{line:238,column:4},end:{line:238,column:53}},98:{start:{line:239,column:4},end:{line:239,column:49}},99:{start:{line:240,column:4},end:{line:251,column:6}},100:{start:{line:247,column:10},end:{line:247,column:29}},101:{start:{line:254,column:22},end:{line:254,column:62}}},fnMap:{0:{name:"buildInspectStyle",decl:{start:{line:20,column:9},end:{line:20,column:26}},loc:{start:{line:20,column:78},end:{line:45,column:1}},line:20},1:{name:"(anonymous_1)",decl:{start:{line:33,column:48},end:{line:33,column:49}},loc:{start:{line:33,column:62},end:{line:38,column:3}},line:33},2:{name:"(anonymous_2)",decl:{start:{line:48,column:17},end:{line:48,column:18}},loc:{start:{line:48,column:23},end:{line:49,column:5}},line:48},3:{name:"(anonymous_3)",decl:{start:{line:50,column:18},end:{line:50,column:19}},loc:{start:{line:50,column:24},end:{line:51,column:5}},line:50},4:{name:"(anonymous_4)",decl:{start:{line:52,column:19},end:{line:52,column:20}},loc:{start:{line:52,column:25},end:{line:53,column:5}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:54,column:14},end:{line:54,column:15}},loc:{start:{line:54,column:20},end:{line:55,column:5}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:21},end:{line:70,column:3}},line:59},7:{name:"(anonymous_7)",decl:{start:{line:67,column:34},end:{line:67,column:35}},loc:{start:{line:67,column:40},end:{line:69,column:5}},line:67},8:{name:"(anonymous_8)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:46},end:{line:78,column:3}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:79,column:2},end:{line:79,column:3}},loc:{start:{line:79,column:23},end:{line:97,column:3}},line:79},10:{name:"(anonymous_10)",decl:{start:{line:93,column:17},end:{line:93,column:18}},loc:{start:{line:93,column:23},end:{line:95,column:7}},line:93},11:{name:"(anonymous_11)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:22},end:{line:189,column:3}},line:98},12:{name:"(anonymous_12)",decl:{start:{line:112,column:26},end:{line:112,column:27}},loc:{start:{line:112,column:32},end:{line:116,column:5}},line:112},13:{name:"(anonymous_13)",decl:{start:{line:138,column:24},end:{line:138,column:25}},loc:{start:{line:138,column:44},end:{line:140,column:7}},line:138},14:{name:"(anonymous_14)",decl:{start:{line:141,column:25},end:{line:141,column:26}},loc:{start:{line:141,column:62},end:{line:141,column:141}},line:141},15:{name:"(anonymous_15)",decl:{start:{line:142,column:19},end:{line:142,column:20}},loc:{start:{line:142,column:33},end:{line:161,column:7}},line:142},16:{name:"(anonymous_16)",decl:{start:{line:144,column:36},end:{line:144,column:37}},loc:{start:{line:144,column:42},end:{line:146,column:11}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:149,column:36},end:{line:149,column:37}},loc:{start:{line:149,column:42},end:{line:158,column:11}},line:149},18:{name:"(anonymous_18)",decl:{start:{line:164,column:25},end:{line:164,column:26}},loc:{start:{line:164,column:31},end:{line:172,column:5}},line:164},19:{name:"(anonymous_19)",decl:{start:{line:173,column:19},end:{line:173,column:20}},loc:{start:{line:173,column:26},end:{line:178,column:5}},line:173},20:{name:"(anonymous_20)",decl:{start:{line:179,column:20},end:{line:179,column:21}},loc:{start:{line:179,column:27},end:{line:181,column:5}},line:179},21:{name:"(anonymous_21)",decl:{start:{line:182,column:19},end:{line:182,column:20}},loc:{start:{line:182,column:27},end:{line:186,column:5}},line:182},22:{name:"(anonymous_22)",decl:{start:{line:190,column:22},end:{line:190,column:23}},loc:{start:{line:190,column:30},end:{line:193,column:3}},line:190},23:{name:"(anonymous_23)",decl:{start:{line:191,column:55},end:{line:191,column:56}},loc:{start:{line:191,column:66},end:{line:191,column:81}},line:191},24:{name:"(anonymous_24)",decl:{start:{line:194,column:2},end:{line:194,column:3}},loc:{start:{line:194,column:20},end:{line:235,column:3}},line:194},25:{name:"(anonymous_25)",decl:{start:{line:196,column:22},end:{line:196,column:23}},loc:{start:{line:196,column:40},end:{line:227,column:7}},line:196},26:{name:"(anonymous_26)",decl:{start:{line:236,column:2},end:{line:236,column:3}},loc:{start:{line:236,column:11},end:{line:252,column:3}},line:236},27:{name:"(anonymous_27)",decl:{start:{line:246,column:13},end:{line:246,column:14}},loc:{start:{line:246,column:20},end:{line:248,column:9}},line:246}},branchMap:{0:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},2:{loc:{start:{line:35,column:8},end:{line:35,column:64}},type:"binary-expr",locations:[{start:{line:35,column:8},end:{line:35,column:32}},{start:{line:35,column:36},end:{line:35,column:64}}],line:35},3:{loc:{start:{line:74,column:15},end:{line:74,column:131}},type:"binary-expr",locations:[{start:{line:74,column:15},end:{line:74,column:71}},{start:{line:74,column:75},end:{line:74,column:131}}],line:74},4:{loc:{start:{line:82,column:4},end:{line:87,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:87,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:82},5:{loc:{start:{line:88,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:88,column:4},end:{line:90,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:88},6:{loc:{start:{line:88,column:8},end:{line:88,column:98}},type:"binary-expr",locations:[{start:{line:88,column:8},end:{line:88,column:26}},{start:{line:88,column:30},end:{line:88,column:98}}],line:88},7:{loc:{start:{line:91,column:4},end:{line:96,column:5}},type:"if",locations:[{start:{line:91,column:4},end:{line:96,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:91},8:{loc:{start:{line:91,column:8},end:{line:91,column:59}},type:"binary-expr",locations:[{start:{line:91,column:8},end:{line:91,column:26}},{start:{line:91,column:30},end:{line:91,column:59}}],line:91},9:{loc:{start:{line:143,column:8},end:{line:160,column:9}},type:"if",locations:[{start:{line:143,column:8},end:{line:160,column:9}},{start:{line:148,column:15},end:{line:160,column:9}}],line:143},10:{loc:{start:{line:174,column:6},end:{line:174,column:40}},type:"if",locations:[{start:{line:174,column:6},end:{line:174,column:40}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:174}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx"],names:[],mappings:"AA8LwB;AA9LxB,OAAO,WAAW;AAClB,SAAQ,kBAAiB;AACzB,OAAO,gBAAsI;AAC7I,OAAO,qBAAqB;AAC5B,OAAO,YAAY;AACnB,OAAO,6BAA6B;AACpC,OAAO,uCAAgE;AACvE,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAAgC,6BAA6B;AAC7D,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,sBAAoF;AAC3F,OAAO;AACP,SAAS,uBAA6C;AACtD,OAAO,aAAa;AACpB,SAAS,gBAAgB;AAEzB,SAAS,kBAAkB,kBAAsC,eAAmC,kBAAqC;AACvI,QAAM,kBAAkB;AAAA,IACtB,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,oBAAoB;AAAA,IACtB;AAAA,EACF;AAEA,QAAM,QAAQ,sBAAsB,gBAAgB;AACpD,MAAG,OAAO;AACR,kBAAc,KAAK,KAAK;AAAA,EAC1B;AAEA,QAAM,UAA+C,CAAC;AAEtD,SAAO,KAAK,iBAAiB,OAAO,EAAE,QAAQ,cAAY;AACxD,UAAM,SAAS,iBAAiB,QAAQ,QAAQ;AAChD,QAAG,OAAO,SAAS,YAAY,OAAO,SAAS,cAAc;AAC3D,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAAA,EACF,CAAC;AAED,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH;AAAA,IACA,QAAQ,CAAC,eAAe,EAAE,OAAO,aAAqC;AAAA,EACxE;AACA,SAAO;AACT;AAyBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EACA,YAAmC;AAAA,EAEnC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,MACV,aAAa;AAAA,IACf;AACA,YAAQ,GAAG,mBAAmB,MAAM;AAClC,WAAK,YAAY;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAGA,sBAAsB,WAAuC,WAA+B;AAC1F,QAAI,SAAS;AACb,QAAI;AACF,eAAS,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS;AAAA,IAC9H,SAAQ,IAAI;AAAA,IAEZ;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB;AACnB,UAAM,MAAM,KAAK,MAAM;AAEvB,UAAM,kBAAkB,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAC1E,QAAI,KAAK;AAIP,UAAI,SAAS,iBAAiB,EAAC,MAAM,KAAI,CAAC;AAC1C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,wBAAwB,KAAK,MAAM,SAAS;AAAA,IAClD;AAEA,QAAG,KAAK,MAAM,WAAW,KAAK,MAAM,uBAAuB,KAAK,MAAM,QAAQ,iBAAiB;AAC7F,WAAK,MAAM,QAAQ,gBAAgB;AAAA,IACrC;AACA,QAAI,KAAK,MAAM,WAAW,KAAK,MAAM,oBAAoB;AACvD,WAAK,MAAM,QAAQ,iBAAiB,eAAe;AAEnD,iBAAW,MAAM;AACf,aAAK,MAAM,QAAS,OAAO;AAAA,MAC7B,GAAG,GAAG;AAAA,IACR;AAAA,EAEF;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM;AAAA,MACd,WAAW,KAAK;AAAA,MAChB,OAAO,KAAK,MAAM;AAAA,MAClB,MAAM;AAAA,MACN,SAAS;AAAA;AAAA;AAAA,MAGT,0BAA0B;AAAA,IAC5B;AAEA,UAAM,WAAW,IAAI,SAAS,EAAC,UAAU,KAAI,CAAC;AAC9C,eAAW,YAAY,WAAU,SAAS,IAAI;AAC9C,UAAM,MAAM,IAAI,WAAW,IAAI,OAAO;AAEtC,UAAM,gBAAgB,MAAM;AAC1B,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,OAAO,IAAI,QAAQ;AACzB,WAAK,MAAM,SAAS,EAAC,QAAQ,KAAI,CAAC;AAAA,IACpC;AACA,kBAAc;AAEd,QAAI,qBAAqB,QAAQ;AACjC,QAAI,qBAAqB,QAAQ;AACjC,QAAI,wBAAwB,QAAQ;AAEpC,UAAM,WAAW,KAAK,aAAa,GAAG;AAEtC,UAAM,cAAc,IAAI,YAAY;AACpC,QAAI,WAAW,aAAa,WAAW;AAEvC,UAAM,MAAM,IAAI,WAAW,kBAAkB,EAAC,gBAAe,KAAI,CAAC;AAClE,QAAI,WAAW,KAAK,WAAW;AAE/B,UAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,UAAM,OAAO,WAAW,OAAO;AAE/B,UAAM,eAAe,IAAI,WAAW,MAAM;AAAA,MACxC,cAAc;AAAA,IAChB,CAAC;AAED,UAAM,UAAU,IAAI,gBAAgB;AAAA,MAClC,OAAO;AAAA,MACP,cAAc;AAAA,MACd,qBAAqB;AAAA,MACrB,4BAA4B;AAAA,MAC5B,mBAAmB;AAAA,MACnB,wBAAwB;AAAA,MACxB,kBAAkB,CAAC,SAAiB,UAAkB;AACpD,eAAO,MAAM,OAAO,YAAY,SAAS,KAAK,CAAC,EAAE,WAAW,GAAG,EAAE,OAAO;AAAA,MAC1E;AAAA,MACA,mBAAmB,CAAC,kBAAsC,kBAAsC,kBAAkB,kBAAkB,eAAe,KAAK,MAAM,gBAAgB;AAAA,MAC9K,aAAa,CAAC,aAA+B;AAC3C,YAAG,KAAK,MAAM,oBAAoB;AAChC,uBAAa,KAAK,QAAQ,MAAM;AAC9B,iBAAK,OAAO,oBAAC,qCAAkC,UAAoB,CAAE;AAAA,UACvE,CAAC;AACD,iBAAO;AAAA,QACT,OAAO;AACL,uBAAa,KAAK,QAAQ,MAAM;AAC9B,iBAAK,OAAO;AAAA,cAAC;AAAA;AAAA,gBACX;AAAA,gBACA,eAAe,KAAK;AAAA,gBACpB,MAAM,KAAK,MAAM;AAAA;AAAA,YACnB,CAAG;AAAA,UACL,CAAC;AACD,iBAAO;AAAA,QACT;AAAA,MACF;AAAA,IACF,CAAC;AACD,QAAI,WAAW,OAAO;AAEtB,QAAI,GAAG,cAAc,MAAM;AACzB,WAAK,SAAS;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,QAAQ,OAAK;AAClB,UAAG,EAAE,aAAa,OAAQ;AAC1B,WAAK,MAAM,aAAc;AAAA,QACvB,KAAK,KAAK,MAAM;AAAA,MAClB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,SAAS,OAAK;AACnB,cAAQ,IAAI,SAAS,CAAC;AAAA,IACxB,CAAC;AAED,QAAI,GAAG,QAAQ,QAAM;AACnB,WAAK,SAAS;AAAA,QACZ,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,WAAW,aAAa;AAC/B,QAAI,GAAG,WAAW,aAAa;AAAA,EACjC;AAAA,EAEA,oBAAoB,CAAC,OAAe;AAClC,UAAM,QAAQ,KAAK,MAAM,SAAS,OAAO,UAAU,WAAS,MAAM,OAAO,EAAE;AAC3E,SAAK,MAAM,cAAc,KAAK;AAAA,EAChC;AAAA,EAEA,aAAa,KAAU;AACrB,UAAM,iBAAiB;AAAA,MACrB,gBAAgB,OAAO,WAAsC;AAC3D,cAAM,WAAW,CAAC;AAClB,YAAI;AACF,gBAAM,UAAU,gDAAgD,OAAO,KAAK;AAC5E,gBAAM,WAAW,MAAM,MAAM,OAAO;AACpC,gBAAM,UAAU,MAAM,SAAS,KAAK;AACpC,qBAAW,WAAW,QAAQ,UAAU;AACtC,kBAAM,SAAS;AAAA,cACb,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,cAC1C,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,YAC5C;AACA,kBAAM,QAAQ;AAAA,cACZ,MAAM;AAAA,cACN,UAAU;AAAA,gBACR,MAAM;AAAA,gBACN,aAAa;AAAA,cACf;AAAA,cACA,YAAY,QAAQ,WAAW;AAAA,cAC/B,YAAY,QAAQ;AAAA,cACpB,MAAM,QAAQ,WAAW;AAAA,cACzB,YAAY,CAAC,OAAO;AAAA,cACpB;AAAA,YACF;AACA,qBAAS,KAAK,KAAK;AAAA,UACrB;AAAA,QACF,SAAS,GAAG;AACV,kBAAQ,MAAM,wCAAwC,CAAC,EAAE;AAAA,QAC3D;AACA,eAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,UAAM,WAAW,IAAI,iBAAiB,gBAAgB;AAAA,MACpD,aAAa,KAAK,MAAM,EAAE,QAAQ;AAAA,MAClC,YAAY;AAAA,IACd,CAAC;AACD,QAAI,WAAW,UAAU,UAAU;AACnC,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,SAAK,MAAM,UAAU,eAAe,EAAE,QAAQ,CAAC;AAC/C,SAAK,MAAM,aAAa,SAAS,EAAE,OAAO,CAAC;AAC3C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,UAAU;AAAA,QACxB,KAAK,OAAK;AAAC,eAAK,YAAY;AAAA,QAAE;AAAA,QAC9B,eAAY;AAAA;AAAA,IACb;AAAA,EACH;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1655c5d10102378b1e2627d777374c6f3c3f21a7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return tn=function(){return s},s}tn();function Fpe(n,e,t){tn().f[0]++;const i=(tn().s[0]++,{id:"background",type:"background",paint:{"background-color":"#1c1f24"}}),r=(tn().s[1]++,gpe(t));tn().s[2]++,r?(tn().b[0][0]++,tn().s[3]++,e.push(r)):tn().b[0][1]++;const o=(tn().s[4]++,{});tn().s[5]++,Object.keys(n.sources).forEach(a=>{tn().f[1]++;const c=(tn().s[6]++,n.sources[a]);tn().s[7]++,tn().b[2][0]++,c.type!=="raster"&&(tn().b[2][1]++,c.type!=="raster-dem")?(tn().b[1][0]++,tn().s[8]++,o[a]=c):tn().b[1][1]++});const s=(tn().s[9]++,{...n,sources:o,layers:[i].concat(e)});return tn().s[10]++,s}class zpe extends On.Component{static defaultProps=(tn().s[11]++,{onMapLoaded:()=>{tn().f[2]++},onDataChange:()=>{tn().f[3]++},onLayerSelect:()=>{tn().f[4]++},onChange:()=>{tn().f[5]++},options:{}});container=(tn().s[12]++,null);constructor(e){tn().f[6]++,tn().s[13]++,super(e),tn().s[14]++,this.state={map:null,inspect:null,geocoder:null,zoomControl:null},tn().s[15]++,pA.on("languageChanged",()=>{tn().f[7]++,tn().s[16]++,this.forceUpdate()})}shouldComponentUpdate(e,t){tn().f[8]++;let i=(tn().s[17]++,!1);tn().s[18]++;try{tn().s[19]++,i=(tn().b[3][0]++,JSON.stringify(this.props)!==JSON.stringify(e)||(tn().b[3][1]++,JSON.stringify(this.state)!==JSON.stringify(t)))}catch{}return tn().s[20]++,i}componentDidUpdate(){tn().f[9]++;const e=(tn().s[21]++,this.state.map),t=(tn().s[22]++,this.props.replaceAccessTokens(this.props.mapStyle));tn().s[23]++,e?(tn().b[4][0]++,tn().s[24]++,e.setStyle(t,{diff:!0}),tn().s[25]++,e.showTileBoundaries=this.props.options?.showTileBoundaries,tn().s[26]++,e.showCollisionBoxes=this.props.options?.showCollisionBoxes,tn().s[27]++,e.showOverdrawInspector=this.props.options?.showOverdrawInspector):tn().b[4][1]++,tn().s[28]++,tn().b[6][0]++,this.state.inspect&&(tn().b[6][1]++,this.props.inspectModeEnabled!==this.state.inspect._showInspectMap)?(tn().b[5][0]++,tn().s[29]++,this.state.inspect.toggleInspector()):tn().b[5][1]++,tn().s[30]++,tn().b[8][0]++,this.state.inspect&&(tn().b[8][1]++,this.props.inspectModeEnabled)?(tn().b[7][0]++,tn().s[31]++,this.state.inspect.setOriginalStyle(t),tn().s[32]++,setTimeout(()=>{tn().f[10]++,tn().s[33]++,this.state.inspect.render()},500)):tn().b[7][1]++}componentDidMount(){tn().f[11]++;const e=(tn().s[34]++,{...this.props.options,container:this.container,style:this.props.mapStyle,hash:!0,maxZoom:24,localIdeographFontFamily:!1}),t=(tn().s[35]++,new $ue({metadata:!0}));tn().s[36]++,m_.addProtocol("pmtiles",t.tile);const i=(tn().s[37]++,new m_.Map(e));tn().s[38]++;const r=()=>{tn().f[12]++;const M=(tn().s[39]++,i.getCenter()),x=(tn().s[40]++,i.getZoom());tn().s[41]++,this.props.onChange({center:M,zoom:x})};tn().s[42]++,r(),tn().s[43]++,i.showTileBoundaries=e.showTileBoundaries,tn().s[44]++,i.showCollisionBoxes=e.showCollisionBoxes,tn().s[45]++,i.showOverdrawInspector=e.showOverdrawInspector;const o=(tn().s[46]++,this.initGeocoder(i)),s=(tn().s[47]++,new fpe);tn().s[48]++,i.addControl(s,"top-right");const a=(tn().s[49]++,new m_.NavigationControl({visualizePitch:!0}));tn().s[50]++,i.addControl(a,"top-right");const c=(tn().s[51]++,document.createElement("div")),h=(tn().s[52]++,XH.createRoot(c)),m=(tn().s[53]++,new m_.Popup({closeOnClick:!1})),y=(tn().s[54]++,new pP({popup:m,showMapPopup:!0,showMapPopupOnHover:!1,showInspectMapPopupOnHover:!0,showInspectButton:!1,blockHoverPopupOnClick:!0,assignLayerColor:(M,x)=>(tn().f[13]++,tn().s[55]++,Wu(WX.brightColor(M,x)).desaturate(.5).string()),buildInspectStyle:(M,x)=>(tn().f[14]++,tn().s[56]++,Fpe(M,x,this.props.highlightedLayer)),renderPopup:M=>(tn().f[15]++,tn().s[57]++,this.props.inspectModeEnabled?(tn().b[9][0]++,tn().s[58]++,m.once("open",()=>{tn().f[16]++,tn().s[59]++,h.render(ie.jsx(tpe,{features:M}))}),tn().s[60]++,c):(tn().b[9][1]++,tn().s[61]++,m.once("open",()=>{tn().f[17]++,tn().s[62]++,h.render(ie.jsx(VX,{features:M,onLayerSelect:this.onLayerSelectById,zoom:this.state.zoom}))}),tn().s[63]++,c))}));tn().s[64]++,i.addControl(y),tn().s[65]++,i.on("style.load",()=>{tn().f[18]++,tn().s[66]++,this.setState({map:i,inspect:y,geocoder:o,zoomControl:s,zoom:i.getZoom()})}),tn().s[67]++,i.on("data",M=>{if(tn().f[19]++,tn().s[68]++,M.dataType!=="tile"){tn().b[10][0]++,tn().s[69]++;return}else tn().b[10][1]++;tn().s[70]++,this.props.onDataChange({map:this.state.map})}),tn().s[71]++,i.on("error",M=>{tn().f[20]++,tn().s[72]++,console.log("ERROR",M)}),tn().s[73]++,i.on("zoom",M=>{tn().f[21]++,tn().s[74]++,this.setState({zoom:i.getZoom()})}),tn().s[75]++,i.on("dragend",r),tn().s[76]++,i.on("zoomend",r)}onLayerSelectById=(tn().s[77]++,e=>{tn().f[22]++;const t=(tn().s[78]++,this.props.mapStyle.layers.findIndex(i=>(tn().f[23]++,tn().s[79]++,i.id===e)));tn().s[80]++,this.props.onLayerSelect(t)});initGeocoder(e){tn().f[24]++;const t=(tn().s[81]++,{forwardGeocode:async r=>{tn().f[25]++;const o=(tn().s[82]++,[]);tn().s[83]++;try{const s=(tn().s[84]++,`https://nominatim.openstreetmap.org/search?q=${r.query}&format=geojson&polygon_geojson=1&addressdetails=1`),a=(tn().s[85]++,await fetch(s)),c=(tn().s[86]++,await a.json());tn().s[87]++;for(const h of c.features){const m=(tn().s[88]++,[h.bbox[0]+(h.bbox[2]-h.bbox[0])/2,h.bbox[1]+(h.bbox[3]-h.bbox[1])/2]),y=(tn().s[89]++,{type:"Feature",geometry:{type:"Point",coordinates:m},place_name:h.properties.display_name,properties:h.properties,text:h.properties.display_name,place_type:["place"],center:m});tn().s[90]++,o.push(y)}}catch(s){tn().s[91]++,console.error(`Failed to forwardGeocode with error: ${s}`)}return tn().s[92]++,{features:o}}}),i=(tn().s[93]++,new Lpe(t,{placeholder:this.props.t("Search"),maplibregl:m_}));return tn().s[94]++,e.addControl(i,"top-left"),tn().s[95]++,i}render(){tn().f[26]++;const e=(tn().s[96]++,this.props.t);return tn().s[97]++,this.state.geocoder?.setPlaceholder(e("Search")),tn().s[98]++,this.state.zoomControl?.setLabel(e("Zoom:")),tn().s[99]++,ie.jsx("div",{className:"maputnik-map__map",role:"region","aria-label":e("Map view"),ref:t=>{tn().f[27]++,tn().s[100]++,this.container=t},"data-wd-key":"maplibre:map"})}}const jpe=(tn().s[101]++,$o()(zpe));var Npe=8,Gpe={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Wpe={"*":{type:"source"}},Qpe=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],qpe={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Ype={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},$pe={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Vpe={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Hpe={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Zpe={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Xpe={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Jpe=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],eme={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},tme={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},nme={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ime={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},rme={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ome={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},sme={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ame={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},lme={type:"array",value:"*"},ume={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},cme={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},Ame={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},hme={type:"array",value:"*",minimum:1},dme={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},fme={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},pme={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},mme={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},gme=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],yme={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},vme={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},bme={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Cme={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},_me={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},xme={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Mme={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},wme={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Sme={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},Eme={"*":{type:"string"}},Ome={$version:Npe,$root:Gpe,sources:Wpe,source:Qpe,source_vector:qpe,source_raster:Ype,source_raster_dem:$pe,source_geojson:Vpe,source_video:Hpe,source_image:Zpe,layer:Xpe,layout:Jpe,layout_background:eme,layout_fill:tme,layout_circle:nme,layout_heatmap:ime,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:rme,layout_symbol:ome,layout_raster:sme,layout_hillshade:ame,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:lme,filter_operator:ume,geometry_type:cme,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:Ame,expression:hme,light:dme,sky:fme,terrain:pme,projection:mme,paint:gme,paint_fill:yme,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:vme,paint_circle:bme,paint_heatmap:Cme,paint_symbol:_me,paint_raster:xme,paint_hillshade:Mme,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:wme,transition:Sme,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:Eme};const Bme=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ime(n,e){const t={};for(const i in n)i!=="ref"&&(t[i]=n[i]);return Bme.forEach(i=>{i in e&&(t[i]=e[i])}),t}function eJ(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=Ime(n[t],e[n[t].ref]));return n}class mg extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class gP{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[i,r]of t)this.bindings[i]=r}concat(e){return new gP(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const CE={kind:"null"},ni={kind:"number"},wo={kind:"string"},Ao={kind:"boolean"},kg={kind:"color"},_E={kind:"projectionDefinition"},_b={kind:"object"},to={kind:"value"},kme={kind:"error"},xE={kind:"collator"},ME={kind:"formatted"},wE={kind:"padding"},G3={kind:"colorArray"},SE={kind:"numberArray"},Z4={kind:"resolvedImage"},EE={kind:"variableAnchorOffsetCollection"};function mf(n,e){return{kind:"array",itemType:n,N:e}}function Ml(n){if(n.kind==="array"){const e=Ml(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const Tme=[CE,ni,wo,Ao,kg,_E,ME,_b,mf(to),wE,SE,G3,Z4,EE];function W3(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!W3(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of Tme)if(!W3(t,e))return null}}return`Expected ${Ml(n)} but found ${Ml(e)} instead.`}function yP(n,e){return e.some(t=>t.kind===n.kind)}function xb(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function yy(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const tJ=.96422,nJ=1,iJ=.82521,rJ=4/29,z_=6/29,oJ=3*z_*z_,Rme=z_*z_*z_,Dme=Math.PI/180,Pme=180/Math.PI;function sJ(n){return n=n%360,n<0&&(n+=360),n}function aJ([n,e,t,i]){n=DO(n),e=DO(e),t=DO(t);let r,o;const s=PO((.2225045*n+.7168786*e+.0606169*t)/nJ);n===e&&e===t?r=o=s:(r=PO((.4360747*n+.3850649*e+.1430804*t)/tJ),o=PO((.0139322*n+.0971045*e+.7141733*t)/iJ));const a=116*s-16;return[a<0?0:a,500*(r-s),200*(s-o),i]}function DO(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function PO(n){return n>Rme?Math.pow(n,1/3):n/oJ+rJ}function lJ([n,e,t,i]){let r=(n+16)/116,o=isNaN(e)?r:r+e/500,s=isNaN(t)?r:r-t/200;return r=nJ*KO(r),o=tJ*KO(o),s=iJ*KO(s),[UO(3.1338561*o-1.6168667*r-.4906146*s),UO(-.9787684*o+1.9161415*r+.033454*s),UO(.0719453*o-.2289914*r+1.4052427*s),i]}function UO(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function KO(n){return n>z_?n*n*n:oJ*(n-rJ)}function Ume(n){const[e,t,i,r]=aJ(n),o=Math.sqrt(t*t+i*i);return[Math.round(o*1e4)?sJ(Math.atan2(i,t)*Pme):NaN,o,e,r]}function Kme([n,e,t,i]){return n=isNaN(n)?0:n*Dme,lJ([t,Math.cos(n)*e,Math.sin(n)*e,i])}function Lme([n,e,t,i]){n=sJ(n),e/=100,t/=100;function r(o){const s=(o+n/30)%12,a=e*Math.min(t,1-t);return t-a*Math.max(-1,Math.min(s-3,9-s,1))}return[r(0),r(8),r(4),i]}const Fme=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function uJ(n,e){return Fme(n,e)?n[e]:void 0}function zme(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=uJ(jme,n);if(e){const[r,o,s]=e;return[r/255,o/255,s/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const o=n.length<6?1:2;let s=1;return[Q5(n.slice(s,s+=o)),Q5(n.slice(s,s+=o)),Q5(n.slice(s,s+=o)),Q5(n.slice(s,s+o)||"ff")]}if(n.startsWith("rgb")){const r=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=n.match(r);if(o){const[s,a,c,h,m,y,M,x,k,P,F,j]=o,q=[h||" ",M||" ",P].join("");if(q==="  "||q==="  /"||q===",,"||q===",,,"){const V=[c,y,k].join(""),H=V==="%%%"?100:V===""?255:0;if(H){const G=[g_(+a/H,0,1),g_(+m/H,0,1),g_(+x/H,0,1),F?hz(+F,j):1];if(dz(G))return G}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=n.match(t);if(i){const[r,o,s,a,c,h,m,y,M]=i,x=[s||" ",c||" ",m].join("");if(x==="  "||x==="  /"||x===",,"||x===",,,"){const k=[+o,g_(+a,0,100),g_(+h,0,100),y?hz(+y,M):1];if(dz(k))return Lme(k)}}}function Q5(n){return parseInt(n.padEnd(2,n),16)/255}function hz(n,e){return g_(e?n/100:n,0,1)}function g_(n,e,t){return Math.min(Math.max(e,n),t)}function dz(n){return!n.some(Number.isNaN)}const jme={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Mb(n,e,t){return n+t*(e-n)}function Q3(n,e,t){return n.map((i,r)=>Mb(i,e[r],t))}class Zs{constructor(e,t,i,r=1,o=!0){this.r=e,this.g=t,this.b=i,this.a=r,o||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[e,t,i,r]))}static parse(e){if(e instanceof Zs)return e;if(typeof e!="string")return;const t=zme(e);if(t)return new Zs(...t,!1)}get rgb(){const{r:e,g:t,b:i,a:r}=this,o=r||1/0;return this.overwriteGetter("rgb",[e/o,t/o,i/o,r])}get hcl(){return this.overwriteGetter("hcl",Ume(this.rgb))}get lab(){return this.overwriteGetter("lab",aJ(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,i,r]=this.rgb;return`rgba(${[e,t,i].map(o=>Math.round(o*255)).join(",")},${r})`}static interpolate(e,t,i,r="rgb"){switch(r){case"rgb":{const[o,s,a,c]=Q3(e.rgb,t.rgb,i);return new Zs(o,s,a,c,!1)}case"hcl":{const[o,s,a,c]=e.hcl,[h,m,y,M]=t.hcl;let x,k;if(!isNaN(o)&&!isNaN(h)){let V=h-o;h>o&&V>180?V-=360:h<o&&o-h>180&&(V+=360),x=o+i*V}else isNaN(o)?isNaN(h)?x=NaN:(x=h,(a===1||a===0)&&(k=m)):(x=o,(y===1||y===0)&&(k=s));const[P,F,j,q]=Kme([x,k??Mb(s,m,i),Mb(a,y,i),Mb(c,M,i)]);return new Zs(P,F,j,q,!1)}case"lab":{const[o,s,a,c]=lJ(Q3(e.lab,t.lab,i));return new Zs(o,s,a,c,!1)}}}}Zs.black=new Zs(0,0,0,1);Zs.white=new Zs(1,1,1,1);Zs.transparent=new Zs(0,0,0,0);Zs.red=new Zs(1,0,0,1);class vP{constructor(e,t,i){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Nme=["bottom","center","top"];class k9{constructor(e,t,i,r,o,s){this.text=e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=o,this.verticalAlign=s}}class o1{constructor(e){this.sections=e}static fromString(e){return new o1([new k9(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof o1?e:o1.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class em{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof em)return e;if(typeof e=="number")return new em([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new em(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new em(Q3(e.values,t.values,i))}}class tm{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof tm)return e;if(typeof e=="number")return new tm([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new tm(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new tm(Q3(e.values,t.values,i))}}class yf{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof yf)return e;if(typeof e=="string"){const i=Zs.parse(e);return i?new yf([i]):void 0}if(!Array.isArray(e))return;const t=[];for(const i of e){if(typeof i!="string")return;const r=Zs.parse(i);if(!r)return;t.push(r)}return new yf(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i,r="rgb"){const o=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let s=0;s<e.values.length;s++)o.push(Zs.interpolate(e.values[s],t.values[s],i,r));return new yf(o)}}class Dl extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const Gme=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Tg{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Tg)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const i=e[t],r=e[t+1];if(typeof i!="string"||!Gme.has(i)||!Array.isArray(r)||r.length!==2||typeof r[0]!="number"||typeof r[1]!="number")return}return new Tg(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){const r=e.values,o=t.values;if(r.length!==o.length)throw new Dl(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const s=[];for(let a=0;a<r.length;a+=2){if(r[a]!==o[a])throw new Dl(`Cannot interpolate values containing mismatched anchors. from[${a}]: ${r[a]}, to[${a}]: ${o[a]}`);s.push(r[a]);const[c,h]=r[a+1],[m,y]=o[a+1];s.push([Mb(c,m,i),Mb(h,y,i)])}return new Tg(s)}}class uv{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new uv({name:e,available:!1}):null}}class Vp{constructor(e,t,i){this.from=e,this.to=t,this.transition=i}static interpolate(e,t,i){return new Vp(e,t,i)}static parse(e){if(e instanceof Vp)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new Vp(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new Vp(e.from,e.to,e.transition);if(typeof e=="string")return new Vp(e,e,1)}}function cJ(n,e,t,i){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[n,e,t,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[n,e,t,i]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function q3(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof Vp||n instanceof Zs||n instanceof vP||n instanceof o1||n instanceof em||n instanceof tm||n instanceof yf||n instanceof Tg||n instanceof uv)return!0;if(Array.isArray(n)){for(const e of n)if(!q3(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!q3(n[e]))return!1;return!0}else return!1}function Yu(n){if(n===null)return CE;if(typeof n=="string")return wo;if(typeof n=="boolean")return Ao;if(typeof n=="number")return ni;if(n instanceof Zs)return kg;if(n instanceof Vp)return _E;if(n instanceof vP)return xE;if(n instanceof o1)return ME;if(n instanceof em)return wE;if(n instanceof tm)return SE;if(n instanceof yf)return G3;if(n instanceof Tg)return EE;if(n instanceof uv)return Z4;if(Array.isArray(n)){const e=n.length;let t;for(const i of n){const r=Yu(i);if(!t)t=r;else{if(t===r)continue;t=to;break}}return mf(t||to,e)}else return _b}function A3(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof Zs||n instanceof Vp||n instanceof o1||n instanceof em||n instanceof tm||n instanceof yf||n instanceof Tg||n instanceof uv?n.toString():JSON.stringify(n)}class ux{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!q3(e[1]))return t.error("invalid value");const i=e[1];let r=Yu(i);const o=t.expectedType;return r.kind==="array"&&r.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(r=o),new ux(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const q5={string:wo,number:ni,boolean:Ao,object:_b};class Hp{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=1,r;const o=e[0];if(o==="array"){let a;if(e.length>2){const h=e[1];if(typeof h!="string"||!(h in q5)||h==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=q5[h],i++}else a=to;let c;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);c=e[2],i++}r=mf(a,c)}else{if(!q5[o])throw new Error(`Types doesn't contain name = ${o}`);r=q5[o]}const s=[];for(;i<e.length;i++){const a=t.parse(e[i],i,to);if(!a)return null;s.push(a)}return new Hp(r,s)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(W3(this.type,Yu(i))){if(t===this.args.length-1)throw new Dl(`Expected value to be of type ${Ml(this.type)}, but found ${Ml(Yu(i))} instead.`)}else return i}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const fz={"to-boolean":Ao,"to-color":kg,"to-number":ni,"to-string":wo};class Uy{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(!fz[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");const r=fz[i],o=[];for(let s=1;s<e.length;s++){const a=t.parse(e[s],s,to);if(!a)return null;o.push(a)}return new Uy(r,o)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,i;for(const r of this.args){if(t=r.evaluate(e),i=null,t instanceof Zs)return t;if(typeof t=="string"){const o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&(t.length<3||t.length>4?i=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:i=cJ(t[0],t[1],t[2],t[3]),!i))return new Zs(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Dl(i||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const i of this.args){t=i.evaluate(e);const r=em.parse(t);if(r)return r}throw new Dl(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=tm.parse(t);if(r)return r}throw new Dl(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=yf.parse(t);if(r)return r}throw new Dl(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const i of this.args){t=i.evaluate(e);const r=Tg.parse(t);if(r)return r}throw new Dl(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const i of this.args){if(t=i.evaluate(e),t===null)return 0;const r=Number(t);if(!isNaN(r))return r}throw new Dl(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return o1.fromString(A3(this.args[0].evaluate(e)));case"resolvedImage":return uv.fromString(A3(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return A3(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Wme=["Unknown","Point","LineString","Polygon"];class AJ{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Wme[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=Zs.parse(e),this._parseColorCache.set(e,t)),t}}class OE{constructor(e,t,i=[],r,o=new gP,s=[]){this.registry=e,this.path=i,this.key=i.map(a=>`[${a}]`).join(""),this.scope=o,this.errors=s,this.expectedType=r,this._isConstant=t}parse(e,t,i,r,o={}){return t?this.concat(t,i,r)._parse(e,o):this._parse(e,o)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function i(r,o,s){return s==="assert"?new Hp(o,[r]):s==="coerce"?new Uy(o,[r]):r}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[r];if(o){let s=o.parse(e,this);if(!s)return null;if(this.expectedType){const a=this.expectedType,c=s.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&c.kind==="value")s=i(s,a,t.typeAnnotation||"assert");else if(a.kind==="projectionDefinition"&&["string","array"].includes(c.kind)||["color","formatted","resolvedImage"].includes(a.kind)&&["value","string"].includes(c.kind)||["padding","numberArray"].includes(a.kind)&&["value","number","array"].includes(c.kind)||a.kind==="colorArray"&&["value","string","array"].includes(c.kind)||a.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(c.kind))s=i(s,a,t.typeAnnotation||"coerce");else if(this.checkSubtype(a,c))return null}if(!(s instanceof ux)&&s.type.kind!=="resolvedImage"&&this._isConstant(s)){const a=new AJ;try{s=new ux(s.type,s.evaluate(a))}catch(c){return this.error(c.message),null}}return s}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const r=typeof e=="number"?this.path.concat(e):this.path,o=i?this.scope.concat(i):this.scope;return new OE(this.registry,this._isConstant,r,t||null,o,this.errors)}error(e,...t){const i=`${this.key}${t.map(r=>`[${r}]`).join("")}`;this.errors.push(new mg(i,e))}checkSubtype(e,t){const i=W3(e,t);return i&&this.error(i),i}}class BE{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let o=1;o<e.length-1;o+=2){const s=e[o];if(typeof s!="string")return t.error(`Expected string, but found ${typeof s} instead.`,o);if(/[^a-zA-Z0-9_]/.test(s))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const a=t.parse(e[o+1],o+1);if(!a)return null;i.push([s,a])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return r?new BE(i,r):null}outputDefined(){return this.result.outputDefined()}}class IE{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new IE(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class bP{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,ni),r=t.parse(e[2],2,mf(t.expectedType||to));if(!i||!r)return null;const o=r.type;return new bP(o.itemType,i,r)}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new Dl(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new Dl(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new Dl(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class CP{constructor(e,t){this.type=Ao,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,to),r=t.parse(e[2],2,to);return!i||!r?null:yP(i.type,[Ao,wo,ni,CE,to])?new CP(i,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ml(i.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!xb(t,["boolean","string","number","null"]))throw new Dl(`Expected first argument to be of type boolean, string, number or null, but found ${Ml(Yu(t))} instead.`);if(!xb(i,["string","array"]))throw new Dl(`Expected second argument to be of type array or string, but found ${Ml(Yu(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class Gw{constructor(e,t,i){this.type=ni,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,to),r=t.parse(e[2],2,to);if(!i||!r)return null;if(!yP(i.type,[Ao,wo,ni,CE,to]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ml(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,ni);return o?new Gw(i,r,o):null}else return new Gw(i,r)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!xb(t,["boolean","string","number","null"]))throw new Dl(`Expected first argument to be of type boolean, string, number or null, but found ${Ml(Yu(t))} instead.`);let r;if(this.fromIndex&&(r=this.fromIndex.evaluate(e)),xb(i,["string"])){const o=i.indexOf(t,r);return o===-1?-1:[...i.slice(0,o)].length}else{if(xb(i,["array"]))return i.indexOf(t,r);throw new Dl(`Expected second argument to be of type array or string, but found ${Ml(Yu(i))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class _P{constructor(e,t,i,r,o,s){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=o,this.otherwise=s}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let i,r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const o={},s=[];for(let h=2;h<e.length-1;h+=2){let m=e[h];const y=e[h+1];Array.isArray(m)||(m=[m]);const M=t.concat(h);if(m.length===0)return M.error("Expected at least one branch label.");for(const k of m){if(typeof k!="number"&&typeof k!="string")return M.error("Branch labels must be numbers or strings.");if(typeof k=="number"&&Math.abs(k)>Number.MAX_SAFE_INTEGER)return M.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof k=="number"&&Math.floor(k)!==k)return M.error("Numeric branch labels must be integer values.");if(!i)i=Yu(k);else if(M.checkSubtype(i,Yu(k)))return null;if(typeof o[String(k)]<"u")return M.error("Branch labels must be unique.");o[String(k)]=s.length}const x=t.parse(y,h,r);if(!x)return null;r=r||x.type,s.push(x)}const a=t.parse(e[1],1,to);if(!a)return null;const c=t.parse(e[e.length-1],e.length-1,r);return!c||a.type.kind!=="value"&&t.concat(1).checkSubtype(i,a.type)?null:new _P(i,r,a,o,s,c)}evaluate(e){const t=this.input.evaluate(e);return(Yu(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class xP{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const r=[];for(let s=1;s<e.length-1;s+=2){const a=t.parse(e[s],s,Ao);if(!a)return null;const c=t.parse(e[s+1],s+1,i);if(!c)return null;r.push([a,c]),i=i||c.type}const o=t.parse(e[e.length-1],e.length-1,i);if(!o)return null;if(!i)throw new Error("Can't infer output type");return new xP(i,r,o)}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class Ww{constructor(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,to),r=t.parse(e[2],2,ni);if(!i||!r)return null;if(!yP(i.type,[mf(to),wo,to]))return t.error(`Expected first argument to be of type array or string, but found ${Ml(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,ni);return o?new Ww(i.type,i,r,o):null}else return new Ww(i.type,i,r)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);let r;if(this.endIndex&&(r=this.endIndex.evaluate(e)),xb(t,["string"]))return[...t].slice(i,r).join("");if(xb(t,["array"]))return t.slice(i,r);throw new Dl(`Expected first argument to be of type array or string, but found ${Ml(Yu(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function hJ(n,e){const t=n.length-1;let i=0,r=t,o=0,s,a;for(;i<=r;)if(o=Math.floor((i+r)/2),s=n[o],a=n[o+1],s<=e){if(o===t||e<a)return o;i=o+1}else if(s>e)r=o-1;else throw new Dl("Input is not a number.");return 0}class kE{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,o]of i)this.labels.push(r),this.outputs.push(o)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,ni);if(!i)return null;const r=[];let o=null;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);for(let s=1;s<e.length;s+=2){const a=s===1?-1/0:e[s],c=e[s+1],h=s,m=s+1;if(typeof a!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(r.length&&r[r.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',h);const y=t.parse(c,m,o);if(!y)return null;o=o||y.type,r.push([a,y])}return new kE(o,i,r)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=hJ(t,r);return i[s].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function Qme(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var LO,pz;function qme(){if(pz)return LO;pz=1,LO=n;function n(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=r}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,r=0;r<8;r++){var o=this.sampleCurveX(i)-e;if(Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i=i-o/s}var a=0,c=1;for(i=e,r=0;r<20&&(o=this.sampleCurveX(i),!(Math.abs(o-e)<t));r++)e>o?a=i:c=i,i=(c-a)*.5+a;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},LO}var Yme=qme(),$me=Qme(Yme);class Rg{constructor(e,t,i,r,o){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[s,a]of o)this.labels.push(s),this.outputs.push(a)}static interpolationFactor(e,t,i,r){let o=0;if(e.name==="exponential")o=FO(t,e.base,i,r);else if(e.name==="linear")o=FO(t,1,i,r);else if(e.name==="cubic-bezier"){const s=e.controlPoints;o=new $me(s[0],s[1],s[2],s[3]).solve(FO(t,1,i,r))}return o}static parse(e,t){let[i,r,o,...s]=e;if(!Array.isArray(r)||r.length===0)return t.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const h=r[1];if(typeof h!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:h}}else if(r[0]==="cubic-bezier"){const h=r.slice(1);if(h.length!==4||h.some(m=>typeof m!="number"||m<0||m>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:h}}else return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(o=t.parse(o,2,ni),!o)return null;const a=[];let c=null;(i==="interpolate-hcl"||i==="interpolate-lab")&&t.expectedType!=G3?c=kg:t.expectedType&&t.expectedType.kind!=="value"&&(c=t.expectedType);for(let h=0;h<s.length;h+=2){const m=s[h],y=s[h+1],M=h+3,x=h+4;if(typeof m!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(a.length&&a[a.length-1][0]>=m)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',M);const k=t.parse(y,x,c);if(!k)return null;c=c||k.type,a.push([m,k])}return!yy(c,ni)&&!yy(c,_E)&&!yy(c,kg)&&!yy(c,wE)&&!yy(c,SE)&&!yy(c,G3)&&!yy(c,EE)&&!yy(c,mf(ni))?t.error(`Type ${Ml(c)} is not interpolatable.`):new Rg(c,i,r,o,a)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=hJ(t,r),a=t[s],c=t[s+1],h=Rg.interpolationFactor(this.interpolation,r,a,c),m=i[s].evaluate(e),y=i[s+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Mb(m,y,h);case"color":return Zs.interpolate(m,y,h);case"padding":return em.interpolate(m,y,h);case"colorArray":return yf.interpolate(m,y,h);case"numberArray":return tm.interpolate(m,y,h);case"variableAnchorOffsetCollection":return Tg.interpolate(m,y,h);case"array":return Q3(m,y,h);case"projectionDefinition":return Vp.interpolate(m,y,h)}case"interpolate-hcl":switch(this.type.kind){case"color":return Zs.interpolate(m,y,h,"hcl");case"colorArray":return yf.interpolate(m,y,h,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Zs.interpolate(m,y,h,"lab");case"colorArray":return yf.interpolate(m,y,h,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function FO(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}class Y3{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=null;const r=t.expectedType;r&&r.kind!=="value"&&(i=r);const o=[];for(const a of e.slice(1)){const c=t.parse(a,1+o.length,i,void 0,{typeAnnotation:"omit"});if(!c)return null;i=i||c.type,o.push(c)}if(!i)throw new Error("No output type");return r&&o.some(a=>W3(r,a.type))?new Y3(to,o):new Y3(i,o)}evaluate(e){let t=null,i=0,r;for(const o of this.args)if(i++,t=o.evaluate(e),t&&t instanceof uv&&!t.available&&(r||(r=t.name),t=null,i===this.args.length&&(t=r)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function mz(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Vme(n,e,t){return e===t}function Hme(n,e,t){return e!==t}function Zme(n,e,t){return e<t}function Xme(n,e,t){return e>t}function Jme(n,e,t){return e<=t}function ege(n,e,t){return e>=t}function dJ(n,e,t,i){return i.compare(e,t)===0}function tge(n,e,t,i){return!dJ(n,e,t,i)}function nge(n,e,t,i){return i.compare(e,t)<0}function ige(n,e,t,i){return i.compare(e,t)>0}function rge(n,e,t,i){return i.compare(e,t)<=0}function oge(n,e,t,i){return i.compare(e,t)>=0}function Dx(n,e,t){const i=n!=="=="&&n!=="!=";return class fJ{constructor(o,s,a){this.type=Ao,this.lhs=o,this.rhs=s,this.collator=a,this.hasUntypedArgument=o.type.kind==="value"||s.type.kind==="value"}static parse(o,s){if(o.length!==3&&o.length!==4)return s.error("Expected two or three arguments.");const a=o[0];let c=s.parse(o[1],1,to);if(!c)return null;if(!mz(a,c.type))return s.concat(1).error(`"${a}" comparisons are not supported for type '${Ml(c.type)}'.`);let h=s.parse(o[2],2,to);if(!h)return null;if(!mz(a,h.type))return s.concat(2).error(`"${a}" comparisons are not supported for type '${Ml(h.type)}'.`);if(c.type.kind!==h.type.kind&&c.type.kind!=="value"&&h.type.kind!=="value")return s.error(`Cannot compare types '${Ml(c.type)}' and '${Ml(h.type)}'.`);i&&(c.type.kind==="value"&&h.type.kind!=="value"?c=new Hp(h.type,[c]):c.type.kind!=="value"&&h.type.kind==="value"&&(h=new Hp(c.type,[h])));let m=null;if(o.length===4){if(c.type.kind!=="string"&&h.type.kind!=="string"&&c.type.kind!=="value"&&h.type.kind!=="value")return s.error("Cannot use collator to compare non-string types.");if(m=s.parse(o[3],3,xE),!m)return null}return new fJ(c,h,m)}evaluate(o){const s=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(i&&this.hasUntypedArgument){const c=Yu(s),h=Yu(a);if(c.kind!==h.kind||!(c.kind==="string"||c.kind==="number"))throw new Dl(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${c.kind}, ${h.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const c=Yu(s),h=Yu(a);if(c.kind!=="string"||h.kind!=="string")return e(o,s,a)}return this.collator?t(o,s,a,this.collator.evaluate(o)):e(o,s,a)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}}}const sge=Dx("==",Vme,dJ),age=Dx("!=",Hme,tge),lge=Dx("<",Zme,nge),uge=Dx(">",Xme,ige),cge=Dx("<=",Jme,rge),Age=Dx(">=",ege,oge);class TE{constructor(e,t,i){this.type=xE,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");const r=t.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,Ao);if(!r)return null;const o=t.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,Ao);if(!o)return null;let s=null;return i.locale&&(s=t.parse(i.locale,1,wo),!s)?null:new TE(r,o,s)}evaluate(e){return new vP(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class MP{constructor(e,t,i,r,o){this.type=wo,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=o}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const i=t.parse(e[1],1,ni);if(!i)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let o=null;if(r.locale&&(o=t.parse(r.locale,1,wo),!o))return null;let s=null;if(r.currency&&(s=t.parse(r.currency,1,wo),!s))return null;let a=null;if(r["min-fraction-digits"]&&(a=t.parse(r["min-fraction-digits"],1,ni),!a))return null;let c=null;return r["max-fraction-digits"]&&(c=t.parse(r["max-fraction-digits"],1,ni),!c)?null:new MP(i,o,s,a,c)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class wP{constructor(e){this.type=ME,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");const r=[];let o=!1;for(let s=1;s<=e.length-1;++s){const a=e[s];if(o&&typeof a=="object"&&!Array.isArray(a)){o=!1;let c=null;if(a["font-scale"]&&(c=t.parse(a["font-scale"],1,ni),!c))return null;let h=null;if(a["text-font"]&&(h=t.parse(a["text-font"],1,mf(wo)),!h))return null;let m=null;if(a["text-color"]&&(m=t.parse(a["text-color"],1,kg),!m))return null;let y=null;if(a["vertical-align"]){if(typeof a["vertical-align"]=="string"&&!Nme.includes(a["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${a["vertical-align"]}' instead.`);if(y=t.parse(a["vertical-align"],1,wo),!y)return null}const M=r[r.length-1];M.scale=c,M.font=h,M.textColor=m,M.verticalAlign=y}else{const c=t.parse(e[s],1,to);if(!c)return null;const h=c.type.kind;if(h!=="string"&&h!=="value"&&h!=="null"&&h!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,r.push({content:c,scale:null,font:null,textColor:null,verticalAlign:null})}}return new wP(r)}evaluate(e){const t=i=>{const r=i.content.evaluate(e);return Yu(r)===Z4?new k9("",r,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(e):null):new k9(A3(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null,i.verticalAlign?i.verticalAlign.evaluate(e):null)};return new o1(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class SP{constructor(e){this.type=Z4,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const i=t.parse(e[1],1,wo);return i?new SP(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=uv.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}}class EP{constructor(e){this.type=ni,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${Ml(i.type)} instead.`):new EP(i):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new Dl(`Expected value to be of type string or array, but found ${Ml(Yu(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Dg=8192;function hge(n,e){const t=dge(n[0]),i=pge(n[1]),r=Math.pow(2,e.z);return[Math.round(t*r*Dg),Math.round(i*r*Dg)]}function OP(n,e){const t=Math.pow(2,e.z),i=(n[0]/Dg+e.x)/t,r=(n[1]/Dg+e.y)/t;return[fge(i),mge(r)]}function dge(n){return(180+n)/360}function fge(n){return n*360-180}function pge(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function mge(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function X4(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function $3(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function gge(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function yge(n,e,t){const i=n[0]-e[0],r=n[1]-e[1],o=n[0]-t[0],s=n[1]-t[1];return i*s-o*r===0&&i*o<=0&&r*s<=0}function RE(n,e,t,i){const r=[e[0]-n[0],e[1]-n[1]],o=[i[0]-t[0],i[1]-t[1]];return _ge(o,r)===0?!1:!!(gz(n,e,t,i)&&gz(t,i,n,e))}function vge(n,e,t){for(const i of t)for(let r=0;r<i.length-1;++r)if(RE(n,e,i[r],i[r+1]))return!0;return!1}function Px(n,e,t=!1){let i=!1;for(const r of e)for(let o=0;o<r.length-1;o++){if(yge(n,r[o],r[o+1]))return t;gge(n,r[o],r[o+1])&&(i=!i)}return i}function bge(n,e){for(const t of e)if(Px(n,t))return!0;return!1}function pJ(n,e){for(const t of n)if(!Px(t,e))return!1;for(let t=0;t<n.length-1;++t)if(vge(n[t],n[t+1],e))return!1;return!0}function Cge(n,e){for(const t of e)if(pJ(n,t))return!0;return!1}function _ge(n,e){return n[0]*e[1]-n[1]*e[0]}function gz(n,e,t,i){const r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1],c=i[0]-t[0],h=i[1]-t[1],m=r*h-c*o,y=s*h-c*a;return m>0&&y<0||m<0&&y>0}function BP(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=[];for(let s=0;s<n[r].length;s++){const a=hge(n[r][s],t);X4(e,a),o.push(a)}i.push(o)}return i}function mJ(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=BP(n[r],e,t);i.push(o)}return i}function gJ(n,e,t,i){if(n[0]<t[0]||n[0]>t[2]){const r=i*.5;let o=n[0]-t[0]>r?-i:t[0]-n[0]>r?i:0;o===0&&(o=n[0]-t[2]>r?-i:t[2]-n[0]>r?i:0),n[0]+=o}X4(e,n)}function xge(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function yz(n,e,t,i){const r=Math.pow(2,i.z)*Dg,o=[i.x*Dg,i.y*Dg],s=[];for(const a of n)for(const c of a){const h=[c.x+o[0],c.y+o[1]];gJ(h,e,t,r),s.push(h)}return s}function vz(n,e,t,i){const r=Math.pow(2,i.z)*Dg,o=[i.x*Dg,i.y*Dg],s=[];for(const a of n){const c=[];for(const h of a){const m=[h.x+o[0],h.y+o[1]];X4(e,m),c.push(m)}s.push(c)}if(e[2]-e[0]<=r/2){xge(e);for(const a of s)for(const c of a)gJ(c,e,t,r)}return s}function Mge(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=BP(e.coordinates,i,r),s=yz(n.geometry(),t,i,r);if(!$3(t,i))return!1;for(const a of s)if(!Px(a,o))return!1}if(e.type==="MultiPolygon"){const o=mJ(e.coordinates,i,r),s=yz(n.geometry(),t,i,r);if(!$3(t,i))return!1;for(const a of s)if(!bge(a,o))return!1}return!0}function wge(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=BP(e.coordinates,i,r),s=vz(n.geometry(),t,i,r);if(!$3(t,i))return!1;for(const a of s)if(!pJ(a,o))return!1}if(e.type==="MultiPolygon"){const o=mJ(e.coordinates,i,r),s=vz(n.geometry(),t,i,r);if(!$3(t,i))return!1;for(const a of s)if(!Cge(a,o))return!1}return!0}class wb{constructor(e,t){this.type=Ao,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(q3(e[1])){const i=e[1];if(i.type==="FeatureCollection"){const r=[];for(const o of i.features){const{type:s,coordinates:a}=o.geometry;s==="Polygon"&&r.push(a),s==="MultiPolygon"&&r.push(...a)}if(r.length){const o={type:"MultiPolygon",coordinates:r};return new wb(i,o)}}else if(i.type==="Feature"){const r=i.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new wb(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new wb(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Mge(e,this.geometries);if(e.geometryType()==="LineString")return wge(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class yJ{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const o=e-1>>1,s=t[o];if(i(r,s)>=0)break;t[e]=s,e=o}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,o=t[e];for(;e<r;){let s=(e<<1)+1;const a=s+1;if(a<this.length&&i(t[a],t[s])<0&&(s=a),i(t[s],o)>=0)break;t[e]=t[s],e=s}t[e]=o}}function Sge(n,e){if(n.length<=1)return[n];const i=[];let r,o;for(const s of n){const a=Ege(s);a!==0&&(s.area=Math.abs(a),o===void 0&&(o=a<0),o===a<0?(r&&i.push(r),r=[s]):r.push(s))}return r&&i.push(r),i}function Ege(n){let e=0;for(let t=0,i=n.length,r=i-1,o,s;t<i;r=t++)o=n[t],s=n[r],e+=(s.x-o.x)*(o.y+s.y);return e}const Oge=6378.137,bz=1/298.257223563,Cz=bz*(2-bz),_z=Math.PI/180;class IP{constructor(e){const t=_z*Oge*1e3,i=Math.cos(e*_z),r=1/(1-Cz*(1-i*i)),o=Math.sqrt(r);this.kx=t*o*i,this.ky=t*o*r*(1-Cz)}distance(e,t){const i=this.wrap(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.sqrt(i*i+r*r)}pointOnLine(e,t){let i=1/0,r,o,s,a;for(let c=0;c<e.length-1;c++){let h=e[c][0],m=e[c][1],y=this.wrap(e[c+1][0]-h)*this.kx,M=(e[c+1][1]-m)*this.ky,x=0;(y!==0||M!==0)&&(x=(this.wrap(t[0]-h)*this.kx*y+(t[1]-m)*this.ky*M)/(y*y+M*M),x>1?(h=e[c+1][0],m=e[c+1][1]):x>0&&(h+=y/this.kx*x,m+=M/this.ky*x)),y=this.wrap(t[0]-h)*this.kx,M=(t[1]-m)*this.ky;const k=y*y+M*M;k<i&&(i=k,r=h,o=m,s=c,a=x)}return{point:[r,o],index:s,t:Math.max(0,Math.min(1,a))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const T9=100,R9=50;function vJ(n,e){return e[0]-n[0]}function Qw(n){return n[1]-n[0]+1}function c1(n,e){return n[1]>=n[0]&&n[1]<e}function D9(n,e){if(n[0]>n[1])return[null,null];const t=Qw(n);if(e){if(t===2)return[n,null];const r=Math.floor(t/2);return[[n[0],n[0]+r],[n[0]+r,n[1]]]}if(t===1)return[n,null];const i=Math.floor(t/2)-1;return[[n[0],n[0]+i],[n[0]+i+1,n[1]]]}function P9(n,e){if(!c1(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let i=e[0];i<=e[1];++i)X4(t,n[i]);return t}function U9(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const i of t)X4(e,i);return e}function xz(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function kP(n,e,t){if(!xz(n)||!xz(e))return NaN;let i=0,r=0;return n[2]<e[0]&&(i=e[0]-n[2]),n[0]>e[2]&&(i=n[0]-e[2]),n[1]>e[3]&&(r=n[1]-e[3]),n[3]<e[1]&&(r=e[1]-n[3]),t.distance([0,0],[i,r])}function Ab(n,e,t){const i=t.pointOnLine(e,n);return t.distance(n,i.point)}function TP(n,e,t,i,r){const o=Math.min(Ab(n,[t,i],r),Ab(e,[t,i],r)),s=Math.min(Ab(t,[n,e],r),Ab(i,[n,e],r));return Math.min(o,s)}function Bge(n,e,t,i,r){if(!(c1(e,n.length)&&c1(i,t.length)))return 1/0;let s=1/0;for(let a=e[0];a<e[1];++a){const c=n[a],h=n[a+1];for(let m=i[0];m<i[1];++m){const y=t[m],M=t[m+1];if(RE(c,h,y,M))return 0;s=Math.min(s,TP(c,h,y,M,r))}}return s}function Ige(n,e,t,i,r){if(!(c1(e,n.length)&&c1(i,t.length)))return NaN;let s=1/0;for(let a=e[0];a<=e[1];++a)for(let c=i[0];c<=i[1];++c)if(s=Math.min(s,r.distance(n[a],t[c])),s===0)return s;return s}function kge(n,e,t){if(Px(n,e,!0))return 0;let i=1/0;for(const r of e){const o=r[0],s=r[r.length-1];if(o!==s&&(i=Math.min(i,Ab(n,[s,o],t)),i===0))return i;const a=t.pointOnLine(r,n);if(i=Math.min(i,t.distance(n,a.point)),i===0)return i}return i}function Tge(n,e,t,i){if(!c1(e,n.length))return NaN;for(let o=e[0];o<=e[1];++o)if(Px(n[o],t,!0))return 0;let r=1/0;for(let o=e[0];o<e[1];++o){const s=n[o],a=n[o+1];for(const c of t)for(let h=0,m=c.length,y=m-1;h<m;y=h++){const M=c[y],x=c[h];if(RE(s,a,M,x))return 0;r=Math.min(r,TP(s,a,M,x,i))}}return r}function Mz(n,e){for(const t of n)for(const i of t)if(Px(i,e,!0))return!0;return!1}function Rge(n,e,t,i=1/0){const r=U9(n),o=U9(e);if(i!==1/0&&kP(r,o,t)>=i)return i;if($3(r,o)){if(Mz(n,e))return 0}else if(Mz(e,n))return 0;let s=1/0;for(const a of n)for(let c=0,h=a.length,m=h-1;c<h;m=c++){const y=a[m],M=a[c];for(const x of e)for(let k=0,P=x.length,F=P-1;k<P;F=k++){const j=x[F],q=x[k];if(RE(y,M,j,q))return 0;s=Math.min(s,TP(y,M,j,q,t))}}return s}function wz(n,e,t,i,r,o){if(!o)return;const s=kP(P9(i,o),r,t);s<e&&n.push([s,o,[0,0]])}function Y5(n,e,t,i,r,o,s){if(!o||!s)return;const a=kP(P9(i,o),P9(r,s),t);a<e&&n.push([a,o,s])}function qw(n,e,t,i,r=1/0){let o=Math.min(i.distance(n[0],t[0][0]),r);if(o===0)return o;const s=new yJ([[0,[0,n.length-1],[0,0]]],vJ),a=U9(t);for(;s.length>0;){const c=s.pop();if(c[0]>=o)continue;const h=c[1],m=e?R9:T9;if(Qw(h)<=m){if(!c1(h,n.length))return NaN;if(e){const y=Tge(n,h,t,i);if(isNaN(y)||y===0)return y;o=Math.min(o,y)}else for(let y=h[0];y<=h[1];++y){const M=kge(n[y],t,i);if(o=Math.min(o,M),o===0)return 0}}else{const y=D9(h,e);wz(s,o,i,n,a,y[0]),wz(s,o,i,n,a,y[1])}}return o}function Yw(n,e,t,i,r,o=1/0){let s=Math.min(o,r.distance(n[0],t[0]));if(s===0)return s;const a=new yJ([[0,[0,n.length-1],[0,t.length-1]]],vJ);for(;a.length>0;){const c=a.pop();if(c[0]>=s)continue;const h=c[1],m=c[2],y=e?R9:T9,M=i?R9:T9;if(Qw(h)<=y&&Qw(m)<=M){if(!c1(h,n.length)&&c1(m,t.length))return NaN;let x;if(e&&i)x=Bge(n,h,t,m,r),s=Math.min(s,x);else if(e&&!i){const k=n.slice(h[0],h[1]+1);for(let P=m[0];P<=m[1];++P)if(x=Ab(t[P],k,r),s=Math.min(s,x),s===0)return s}else if(!e&&i){const k=t.slice(m[0],m[1]+1);for(let P=h[0];P<=h[1];++P)if(x=Ab(n[P],k,r),s=Math.min(s,x),s===0)return s}else x=Ige(n,h,t,m,r),s=Math.min(s,x)}else{const x=D9(h,e),k=D9(m,i);Y5(a,s,r,n,t,x[0],k[0]),Y5(a,s,r,n,t,x[0],k[1]),Y5(a,s,r,n,t,x[1],k[0]),Y5(a,s,r,n,t,x[1],k[1])}}return s}function Dge(n,e){const t=n.geometry(),i=t.flat().map(s=>OP([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new IP(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,Yw(i,!1,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,Yw(i,!1,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,qw(i,!1,s.coordinates,r,o));break}if(o===0)return o}return o}function Pge(n,e){const t=n.geometry(),i=t.flat().map(s=>OP([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new IP(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,Yw(i,!0,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,Yw(i,!0,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,qw(i,!0,s.coordinates,r,o));break}if(o===0)return o}return o}function Uge(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const i=Sge(t).map(s=>s.map(a=>a.map(c=>OP([c.x,c.y],n.canonical)))),r=new IP(i[0][0][0][1]);let o=1/0;for(const s of e)for(const a of i){switch(s.type){case"Point":o=Math.min(o,qw([s.coordinates],!1,a,r,o));break;case"LineString":o=Math.min(o,qw(s.coordinates,!0,a,r,o));break;case"Polygon":o=Math.min(o,Rge(a,s.coordinates,r,o));break}if(o===0)return o}return o}function zO(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class Sb{constructor(e,t){this.type=ni,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(q3(e[1])){const i=e[1];if(i.type==="FeatureCollection")return new Sb(i,i.features.map(r=>zO(r.geometry)).flat());if(i.type==="Feature")return new Sb(i,zO(i.geometry));if("type"in i&&"coordinates"in i)return new Sb(i,zO(i))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Dge(e,this.geometries);if(e.geometryType()==="LineString")return Pge(e,this.geometries);if(e.geometryType()==="Polygon")return Uge(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class J4{constructor(e){this.type=to,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=e[1];return i==null?t.error("Global state property must be defined."):typeof i!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new J4(i)}evaluate(e){var t;const i=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!i||Object.keys(i).length===0?null:uJ(i,this.key)}eachChild(){}outputDefined(){return!1}}const DE={"==":sge,"!=":age,">":uge,"<":lge,">=":Age,"<=":cge,array:Hp,at:bP,boolean:Hp,case:xP,coalesce:Y3,collator:TE,format:wP,image:SP,in:CP,"index-of":Gw,interpolate:Rg,"interpolate-hcl":Rg,"interpolate-lab":Rg,length:EP,let:BE,literal:ux,match:_P,number:Hp,"number-format":MP,object:Hp,slice:Ww,step:kE,string:Hp,"to-boolean":Uy,"to-color":Uy,"to-number":Uy,"to-string":Uy,var:IE,within:wb,distance:Sb,"global-state":J4};class vf{constructor(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const i=e[0],r=vf.definitions[i];if(!r)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(r)?r[0]:r.type,s=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=s.filter(([h])=>!Array.isArray(h)||h.length===e.length-1);let c=null;for(const[h,m]of a){c=new OE(t.registry,$w,t.path,null,t.scope);const y=[];let M=!1;for(let x=1;x<e.length;x++){const k=e[x],P=Array.isArray(h)?h[x-1]:h.type,F=c.parse(k,1+y.length,P);if(!F){M=!0;break}y.push(F)}if(!M){if(Array.isArray(h)&&h.length!==y.length){c.error(`Expected ${h.length} arguments, but found ${y.length} instead.`);continue}for(let x=0;x<y.length;x++){const k=Array.isArray(h)?h[x]:h.type,P=y[x];c.concat(x+1).checkSubtype(k,P.type)}if(c.errors.length===0)return new vf(i,o,m,y)}}if(a.length===1)t.errors.push(...c.errors);else{const m=(a.length?a:s).map(([M])=>Lge(M)).join(" | "),y=[];for(let M=1;M<e.length;M++){const x=t.parse(e[M],1+y.length);if(!x)return null;y.push(Ml(x.type))}t.error(`Expected arguments of type ${m}, but found (${y.join(", ")}) instead.`)}return null}static register(e,t){vf.definitions=t;for(const i in t)e[i]=vf}}function Sz(n,[e,t,i,r]){e=e.evaluate(n),t=t.evaluate(n),i=i.evaluate(n);const o=r?r.evaluate(n):1,s=cJ(e,t,i,o);if(s)throw new Dl(s);return new Zs(e/255,t/255,i/255,o,!1)}function Ez(n,e){return n in e}function jO(n,e){const t=e[n];return typeof t>"u"?null:t}function Kge(n,e,t,i){for(;t<=i;){const r=t+i>>1;if(e[r]===n)return!0;e[r]>n?i=r-1:t=r+1}return!1}function Vv(n){return{type:n}}vf.register(DE,{error:[kme,[wo],(n,[e])=>{throw new Dl(e.evaluate(n))}],typeof:[wo,[to],(n,[e])=>Ml(Yu(e.evaluate(n)))],"to-rgba":[mf(ni,4),[kg],(n,[e])=>{const[t,i,r,o]=e.evaluate(n).rgb;return[t*255,i*255,r*255,o]}],rgb:[kg,[ni,ni,ni],Sz],rgba:[kg,[ni,ni,ni,ni],Sz],has:{type:Ao,overloads:[[[wo],(n,[e])=>Ez(e.evaluate(n),n.properties())],[[wo,_b],(n,[e,t])=>Ez(e.evaluate(n),t.evaluate(n))]]},get:{type:to,overloads:[[[wo],(n,[e])=>jO(e.evaluate(n),n.properties())],[[wo,_b],(n,[e,t])=>jO(e.evaluate(n),t.evaluate(n))]]},"feature-state":[to,[wo],(n,[e])=>jO(e.evaluate(n),n.featureState||{})],properties:[_b,[],n=>n.properties()],"geometry-type":[wo,[],n=>n.geometryType()],id:[to,[],n=>n.id()],zoom:[ni,[],n=>n.globals.zoom],"heatmap-density":[ni,[],n=>n.globals.heatmapDensity||0],elevation:[ni,[],n=>n.globals.elevation||0],"line-progress":[ni,[],n=>n.globals.lineProgress||0],accumulated:[to,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[ni,Vv(ni),(n,e)=>{let t=0;for(const i of e)t+=i.evaluate(n);return t}],"*":[ni,Vv(ni),(n,e)=>{let t=1;for(const i of e)t*=i.evaluate(n);return t}],"-":{type:ni,overloads:[[[ni,ni],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[ni],(n,[e])=>-e.evaluate(n)]]},"/":[ni,[ni,ni],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[ni,[ni,ni],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[ni,[],()=>Math.LN2],pi:[ni,[],()=>Math.PI],e:[ni,[],()=>Math.E],"^":[ni,[ni,ni],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[ni,[ni],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[ni,[ni],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[ni,[ni],(n,[e])=>Math.log(e.evaluate(n))],log2:[ni,[ni],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[ni,[ni],(n,[e])=>Math.sin(e.evaluate(n))],cos:[ni,[ni],(n,[e])=>Math.cos(e.evaluate(n))],tan:[ni,[ni],(n,[e])=>Math.tan(e.evaluate(n))],asin:[ni,[ni],(n,[e])=>Math.asin(e.evaluate(n))],acos:[ni,[ni],(n,[e])=>Math.acos(e.evaluate(n))],atan:[ni,[ni],(n,[e])=>Math.atan(e.evaluate(n))],min:[ni,Vv(ni),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[ni,Vv(ni),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[ni,[ni],(n,[e])=>Math.abs(e.evaluate(n))],round:[ni,[ni],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[ni,[ni],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[ni,[ni],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[Ao,[wo,to],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[Ao,[to],(n,[e])=>n.id()===e.value],"filter-type-==":[Ao,[wo],(n,[e])=>n.geometryType()===e.value],"filter-<":[Ao,[wo,to],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<r}],"filter-id-<":[Ao,[to],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<i}],"filter->":[Ao,[wo,to],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>r}],"filter-id->":[Ao,[to],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>i}],"filter-<=":[Ao,[wo,to],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[Ao,[to],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<=i}],"filter->=":[Ao,[wo,to],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[Ao,[to],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>=i}],"filter-has":[Ao,[to],(n,[e])=>e.value in n.properties()],"filter-has-id":[Ao,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[Ao,[mf(wo)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[Ao,[mf(to)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[Ao,[wo,mf(to)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[Ao,[wo,mf(to)],(n,[e,t])=>Kge(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:Ao,overloads:[[[Ao,Ao],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[Vv(Ao),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:Ao,overloads:[[[Ao,Ao],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[Vv(Ao),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[Ao,[Ao],(n,[e])=>!e.evaluate(n)],"is-supported-script":[Ao,[wo],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[wo,[wo],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[wo,[wo],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[wo,Vv(to),(n,e)=>e.map(t=>A3(t.evaluate(n))).join("")],"resolved-locale":[wo,[xE],(n,[e])=>e.evaluate(n).resolvedLocale()]});function Lge(n){return Array.isArray(n)?`(${n.map(Ml).join(", ")})`:`(${Ml(n.type)}...)`}function $w(n){if(n instanceof IE)return $w(n.boundExpression);if(n instanceof vf&&n.name==="error")return!1;if(n instanceof TE)return!1;if(n instanceof wb)return!1;if(n instanceof Sb)return!1;if(n instanceof J4)return!1;const e=n instanceof Uy||n instanceof Hp;let t=!0;return n.eachChild(i=>{e?t=t&&$w(i):t=t&&i instanceof ux}),t?RP(n)&&PP(n,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function RP(n){if(n instanceof vf){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof wb||n instanceof Sb)return!1;let e=!0;return n.eachChild(t=>{e&&!RP(t)&&(e=!1)}),e}function DP(n){if(n instanceof vf&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!DP(t)&&(e=!1)}),e}function PP(n,e){if(n instanceof vf&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(i=>{t&&!PP(i,e)&&(t=!1)}),t}function K9(n){return{result:"success",value:n}}function y_(n){return{result:"error",value:n}}function Fge(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function zge(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function jge(n){return!!n.expression&&n.expression.interpolated}function bJ(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&Yu(n)===_b}class Nge{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new AJ,this._defaultValue=t?qge(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,r,o,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{const a=this.expression.evaluate(this._evaluator);if(a==null||typeof a=="number"&&a!==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new Dl(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,typeof console<"u"&&console.warn(a.message)),this._defaultValue}}}function Gge(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in DE}function CJ(n,e){const t=new OE(DE,$w,[],e?Qge(e):void 0),i=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return i?K9(new Nge(i,e)):y_(t.errors)}class Oz{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!DP(t.expression),this.globalStateRefs=PE(t.expression)}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._styleExpression.evaluate(e,t,i,r,o,s)}}class Bz{constructor(e,t,i,r){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!DP(t.expression),this.globalStateRefs=PE(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._styleExpression.evaluate(e,t,i,r,o,s)}interpolationFactor(e,t,i){return this.interpolationType?Rg.interpolationFactor(this.interpolationType,e,t,i):0}}function Wge(n,e){const t=CJ(n,e);if(t.result==="error")return t;const i=t.value.expression,r=RP(i);if(!r&&!Fge(e))return y_([new mg("","data expressions not supported")]);const o=PP(i,["zoom"]);if(!o&&!zge(e))return y_([new mg("","zoom expressions not supported")]);const s=aw(i);if(!s&&!o)return y_([new mg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof mg)return y_([s]);if(s instanceof Rg&&!jge(e))return y_([new mg("",'"interpolate" expressions cannot be used with this property')]);if(!s)return K9(r?new Oz("constant",t.value):new Oz("source",t.value));const a=s instanceof Rg?s.interpolation:void 0;return K9(r?new Bz("camera",t.value,s.labels,a):new Bz("composite",t.value,s.labels,a))}function aw(n){let e=null;if(n instanceof BE)e=aw(n.result);else if(n instanceof Y3){for(const t of n.args)if(e=aw(t),e)break}else(n instanceof kE||n instanceof Rg)&&n.input instanceof vf&&n.input.name==="zoom"&&(e=n);return e instanceof mg||n.eachChild(t=>{const i=aw(t);i instanceof mg?e=i:!e&&i?e=new mg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new mg("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function PE(n,e=new Set){return n instanceof J4&&e.add(n.key),n.eachChild(t=>{PE(t,e)}),e}function Qge(n){const e={color:kg,string:wo,number:ni,enum:wo,boolean:Ao,formatted:ME,padding:wE,numberArray:SE,colorArray:G3,projectionDefinition:_E,resolvedImage:Z4,variableAnchorOffsetCollection:EE};return n.type==="array"?mf(e[n.value]||to,n.length):e[n.type]}function qge(n){if(n.type==="color"&&bJ(n.default))return new Zs(0,0,0,0);switch(n.type){case"color":return Zs.parse(n.default)||null;case"padding":return em.parse(n.default)||null;case"numberArray":return tm.parse(n.default)||null;case"colorArray":return yf.parse(n.default)||null;case"variableAnchorOffsetCollection":return Tg.parse(n.default)||null;case"projectionDefinition":return Vp.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function _J(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!_J(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const Yge={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function $ge(n){if(n==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};_J(n)||(n=Vw(n));const e=CJ(n,Yge);if(e.result==="error")throw new Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));{const t=xJ(n);return{filter:(i,r,o)=>e.value.evaluate(i,r,{},o),needGeometry:t,getGlobalStateRefs:()=>PE(e.value.expression)}}}function Vge(n,e){return n<e?-1:n>e?1:0}function xJ(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let e=1;e<n.length;e++)if(xJ(n[e]))return!0;return!1}function Vw(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?NO(n[1],n[2],"=="):e==="!="?$5(NO(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?NO(n[1],n[2],e):e==="any"?Hge(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map(Vw)):e==="none"?["all"].concat(n.slice(1).map(Vw).map($5)):e==="in"?Iz(n[1],n.slice(2)):e==="!in"?$5(Iz(n[1],n.slice(2))):e==="has"?kz(n[1]):e==="!has"?$5(kz(n[1])):!0}function NO(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function Hge(n){return["any"].concat(n.map(Vw))}function Iz(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(Vge)]]:["filter-in-small",n,["literal",e]]}}function kz(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function $5(n){return["!",n]}function V3(n){return typeof n=="object"?["literal",n]:n}function Zge(n,e){let t=n.stops;if(!t)return Xge(n,e);const i=t&&typeof t[0][0]=="object",r=i||n.property!==void 0,o=i||!r;return t=t.map(s=>!r&&e.tokens&&typeof s[1]=="string"?[s[0],n0e(s[1])]:[s[0],V3(s[1])]),i?Jge(n,e,t):o?t0e(n,e,t):L9(n,e,t)}function Xge(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const i=[e.type==="color"?"to-color":e.type,t,V3(n.default)];return e.type==="array"&&i.splice(1,0,e.value,e.length||null),i}}function UP(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Jge(n,e,t){const i={},r={},o=[];for(let a=0;a<t.length;a++){const c=t[a],h=c[0].zoom;i[h]===void 0&&(i[h]={zoom:h,type:n.type,property:n.property,default:n.default},r[h]=[],o.push(h)),r[h].push([c[0].value,c[1]])}if(LP({},e)==="exponential"){const a=[UP(n),["linear"],["zoom"]];for(const c of o){const h=L9(i[c],e,r[c]);j_(a,c,h,!1)}return a}else{const a=["step",["zoom"]];for(const c of o){const h=L9(i[c],e,r[c]);j_(a,c,h,!0)}return KP(a),a}}function e0e(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function Tz(n,e){const t=V3(e0e(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function L9(n,e,t){const i=LP(n,e),r=["get",n.property];if(i==="categorical"&&typeof t[0][0]=="boolean"){const o=["case"];for(const s of t)o.push(["==",r,s[0]],s[1]);return o.push(Tz(n,e)),o}else if(i==="categorical"){const o=["match",r];for(const s of t)j_(o,s[0],s[1],!1);return o.push(Tz(n,e)),o}else if(i==="interval"){const o=["step",["number",r]];for(const s of t)j_(o,s[0],s[1],!0);return KP(o),n.default===void 0?o:["case",["==",["typeof",r],"number"],o,V3(n.default)]}else if(i==="exponential"){const o=n.base!==void 0?n.base:1,s=[UP(n),o===1?["linear"]:["exponential",o],["number",r]];for(const a of t)j_(s,a[0],a[1],!1);return n.default===void 0?s:["case",["==",["typeof",r],"number"],s,V3(n.default)]}else throw new Error(`Unknown property function type ${i}`)}function t0e(n,e,t,i=["zoom"]){const r=LP(n,e);let o,s=!1;if(r==="interval")o=["step",i],s=!0;else if(r==="exponential"){const a=n.base!==void 0?n.base:1;o=[UP(n),a===1?["linear"]:["exponential",a],i]}else throw new Error(`Unknown zoom function type "${r}"`);for(const a of t)j_(o,a[0],a[1],s);return KP(o),o}function KP(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function j_(n,e,t,i){n.length>3&&e===n[n.length-2]||(i&&n.length===2||n.push(e),n.push(t))}function LP(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function n0e(n){const e=["concat"],t=/{([^{}]+)}/g;let i=0;for(let r=t.exec(n);r!==null;r=t.exec(n)){const o=n.slice(i,t.lastIndex-r[0].length);i=t.lastIndex,o.length>0&&e.push(o),e.push(["get",r[1]])}if(e.length===1)return n;if(i<n.length)e.push(n.slice(i));else if(e.length===2)return["to-string",e[1]];return e}const i0e=Ome;var Rz={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},A2=" ",Dz=/(italic|oblique)$/i,Pz={};function F9(n,e,t){var i=Pz[n];if(!i){Array.isArray(n)||(n=[n]);for(var r=400,o="normal",s=[],a,c,h=0,m=n.length;h<m;++h){var y=n[h],M=y.split(" "),x=M[M.length-1].toLowerCase();x=="normal"||x=="italic"||x=="oblique"?(o=c?o:x,c=!0,M.pop(),x=M[M.length-1].toLowerCase()):Dz.test(x)&&(x=x.replace(Dz,""),o=c?o:M[M.length-1].replace(x,""),c=!0);for(var k in Rz){var P=M.length>1?M[M.length-2].toLowerCase():"";if(x==k||x==k.replace("-","")||P+"-"+x==k){r=a?r:Rz[k],M.pop(),P&&k.startsWith(P)&&M.pop();break}}!a&&typeof x=="number"&&(r=x,a=!0);var F=M.join(A2).replace("Klokantech Noto Sans","Noto Sans").replace("DIN Pro","Barlow").replace("Arial Unicode MS","Arial");F.indexOf(A2)!==-1&&(F='"'+F+'"'),s.push(F)}i=Pz[n]=[o,r,s]}return i[0]+A2+i[1]+A2+e+"px"+(t?"/"+t:"")+A2+i[2]}const hd={ADD:"add",REMOVE:"remove"},cx={PROPERTYCHANGE:"propertychange"},Rr={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class e5{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function r0e(n,e,t){let i,r;t=t||Pg;let o=0,s=n.length,a=!1;for(;o<s;)i=o+(s-o>>1),r=+t(n[i],e),r<0?o=i+1:(s=i,a=!r);return a?o:~o}function Pg(n,e){return n>e?1:n<e?-1:0}function o0e(n,e){return n<e?1:n>e?-1:0}function UE(n,e,t){if(n[0]<=e)return 0;const i=n.length;if(e<=n[i-1])return i-1;if(typeof t=="function"){for(let r=1;r<i;++r){const o=n[r];if(o===e)return r;if(o<e)return t(e,n[r-1],o)>0?r-1:r}return i-1}if(t>0){for(let r=1;r<i;++r)if(n[r]<e)return r-1;return i-1}if(t<0){for(let r=1;r<i;++r)if(n[r]<=e)return r;return i-1}for(let r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return n[r-1]-e<e-n[r]?r-1:r}return i-1}function s0e(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function Ug(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function cv(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function a0e(n,e,t){const i=e||Pg;return n.every(function(r,o){if(o===0)return!0;const s=i(n[o-1],r);return!(s>0||s===0)})}function H3(){return!0}function KE(){return!1}function Z3(){}function MJ(n){let e,t,i;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==i||!cv(r,t))&&(i=this,t=r,e=n.apply(this,arguments)),e}}function Ax(n){function e(){let t;try{t=n()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function t5(n){for(const e in n)delete n[e]}function tv(n){let e;for(e in n)return!1;return!e}class hm{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class n5 extends e5{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const o=t?new hm(e):e;o.target||(o.target=this.eventTarget_||this);const s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in s||(s[i]=0,a[i]=0),++s[i];let c;for(let h=0,m=r.length;h<m;++h)if("handleEvent"in r[h]?c=r[h].handleEvent(o):c=r[h].call(this,o),c===!1||o.propagationStopped){c=!1;break}if(--s[i]===0){let h=a[i];for(delete a[i];h--;)this.removeEventListener(i,Z3);delete s[i]}return c}disposeInternal(){this.listeners_&&t5(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const r=i.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=Z3,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}function is(n,e,t,i,r){if(r){const s=t;t=function(a){return n.removeEventListener(e,t),s.call(i??this,a)}}else i&&i!==n&&(t=t.bind(i));const o={target:n,type:e,listener:t};return n.addEventListener(e,t),o}function Hw(n,e,t,i){return is(n,e,t,i,!0)}function Ra(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),t5(n))}class i5 extends n5{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Rr.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=is(this,e[o],t);return r}return is(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let o=0;o<r;++o)i[o]=Hw(this,e[o],t)}else i=Hw(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)l0e(i);else if(Array.isArray(e))for(let r=0,o=e.length;r<o;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}i5.prototype.on;i5.prototype.once;i5.prototype.un;function l0e(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Ra(n[e]);else Ra(n)}function zr(){throw new Error("Unimplemented abstract method.")}let u0e=0;function Vr(n){return n.ol_uid||(n.ol_uid=String(++u0e))}class Uz extends hm{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class dm extends i5{constructor(e){super(),this.on,this.once,this.un,Vr(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new Uz(i,e,t)),i=cx.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Uz(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const o=r[e];r[e]=t,o!==t&&this.notify(e,o)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],tv(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const Kz={LENGTH:"length"};class V5 extends hm{constructor(e,t,i){super(e),this.element=t,this.index=i}}class _g extends dm{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Kz.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new V5(hd.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new V5(hd.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new V5(hd.REMOVE,r,e)),this.dispatchEvent(new V5(hd.ADD,t,e))}updateLength_(){this.set(Kz.LENGTH,this.array_.length)}assertUnique_(e,t){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}}class v_ extends hm{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}class Sy extends v_{constructor(e,t,i,r,o,s){super(e,t,o),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Vl={SINGLECLICK:"singleclick",CLICK:Rr.CLICK,DBLCLICK:Rr.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Ub=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",c0e=Ub.includes("safari")&&!Ub.includes("chrom");c0e&&(Ub.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Ub));const A0e=Ub.includes("webkit")&&!Ub.includes("edge"),wJ=Ub.includes("macintosh"),h0e=typeof devicePixelRatio<"u"?devicePixelRatio:1,FP=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,SJ=typeof Image<"u"&&Image.prototype.decode,d0e=typeof createImageBitmap=="function",EJ=(function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n})(),z9={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class f0e extends n5{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=is(i,z9.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=is(i,z9.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Rr.TOUCHMOVE,this.boundHandleTouchMove_,EJ?{passive:!1}:!1)}emulateClick_(e){let t=new Sy(Vl.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Sy(Vl.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new Sy(Vl.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Vl.POINTERUP||t.type==Vl.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==Vl.POINTERDOWN||t.type==Vl.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Sy(Vl.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Ra),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Sy(Vl.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(is(i,Vl.POINTERMOVE,this.handlePointerMove_,this),is(i,Vl.POINTERUP,this.handlePointerUp_,this),is(this.element_,Vl.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(is(this.element_.getRootNode(),Vl.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Sy(Vl.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Sy(Vl.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Ra(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Rr.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ra(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ra),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Z0={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},FA={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},ri={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Rs(n,e){if(!n)throw new Error(e)}const Zw=1/0;class p0e{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,t5(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){Rs(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=Zw?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,o=t[e],s=i[e],a=e;for(;e<r>>1;){const c=this.getLeftChildIndex_(e),h=this.getRightChildIndex_(e),m=h<r&&i[h]<i[c]?h:c;t[e]=t[m],i[e]=i[m],e=m}t[e]=o,i[e]=s,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,o=i[t],s=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(r[a]>s)i[t]=i[a],r[t]=r[a],t=a;else break}i[t]=o,r[t]=s}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const o=t.length;let s,a,c;for(a=0;a<o;++a)s=t[a],c=e(s),c==Zw?delete this.queuedElements_[this.keyFunction_(s)]:(i[r]=c,t[r++]=s);t.length=r,i.length=r,this.heapify_()}}class OJ extends p0e{constructor(e,t){super(i=>e.apply(null,i),i=>i[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Rr.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===ri.LOADED||i===ri.ERROR||i===ri.EMPTY){i!==ri.ERROR&&t.removeEventListener(Rr.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;){const r=this.dequeue()[0],o=r.getKey();r.getState()===ri.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,r.load())}}}function m0e(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return Zw;const o=n.viewState.center,s=i[0]-o[0],a=i[1]-o[1];return 65536*Math.log(r)+Math.sqrt(s*s+a*a)/r}const _l={ANIMATING:0,INTERACTING:1},Gp={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Pl(n,e,t){return Math.min(Math.max(n,e),t)}function g0e(n,e,t,i,r,o){const s=r-t,a=o-i;if(s!==0||a!==0){const c=((n-t)*s+(e-i)*a)/(s*s+a*a);c>1?(t=r,i=o):c>0&&(t+=s*c,i+=a*c)}return Eb(n,e,t,i)}function Eb(n,e,t,i){const r=t-n,o=i-e;return r*r+o*o}function y0e(n){const e=n.length;for(let i=0;i<e;i++){let r=i,o=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const c=Math.abs(n[a][i]);c>o&&(o=c,r=a)}if(o===0)return null;const s=n[r];n[r]=n[i],n[i]=s;for(let a=i+1;a<e;a++){const c=-n[a][i]/n[i][i];for(let h=i;h<e+1;h++)i==h?n[a][h]=0:n[a][h]+=c*n[i][h]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}function Lz(n){return n*180/Math.PI}function Vy(n){return n*Math.PI/180}function Ob(n,e){const t=n%e;return t*e<0?t+e:t}function hf(n,e,t){return n+t*(e-n)}function LE(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function H5(n,e){return Math.floor(LE(n,e))}function Ky(n,e){return Math.ceil(LE(n,e))}function j9(n,e,t){if(n>=e&&n<t)return n;const i=t-e;return((n-e)%i+i)%i+e}function Fz(n,e,t){return(function(i,r,o,s,a){if(!i)return;if(!r&&!e)return i;const c=e?0:o[0]*r,h=e?0:o[1]*r,m=a?a[0]:0,y=a?a[1]:0;let M=n[0]+c/2+m,x=n[2]-c/2+m,k=n[1]+h/2+y,P=n[3]-h/2+y;M>x&&(M=(x+M)/2,x=M),k>P&&(k=(P+k)/2,P=k);let F=Pl(i[0],M,x),j=Pl(i[1],k,P);if(s&&t&&r){const q=30*r;F+=-q*Math.log(1+Math.max(0,M-i[0])/q)+q*Math.log(1+Math.max(0,i[0]-x)/q),j+=-q*Math.log(1+Math.max(0,k-i[1])/q)+q*Math.log(1+Math.max(0,i[1]-P)/q)}return[F,j]})}function v0e(n){return n}const Gc={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function N9(n){const e=fp();for(let t=0,i=n.length;t<i;++t)h3(e,n[t]);return e}function b0e(n,e,t){const i=Math.min.apply(null,n),r=Math.min.apply(null,e),o=Math.max.apply(null,n),s=Math.max.apply(null,e);return A1(i,r,o,s,t)}function Hy(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function BJ(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function Vb(n,e,t){let i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function Kb(n,e){return zP(n,e[0],e[1])}function xg(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function zP(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function G9(n,e){const t=n[0],i=n[1],r=n[2],o=n[3],s=e[0],a=e[1];let c=Gc.UNKNOWN;return s<t?c=c|Gc.LEFT:s>r&&(c=c|Gc.RIGHT),a<i?c=c|Gc.BELOW:a>o&&(c=c|Gc.ABOVE),c===Gc.UNKNOWN&&(c=Gc.INTERSECTING),c}function fp(){return[1/0,1/0,-1/0,-1/0]}function A1(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function Ux(n){return A1(1/0,1/0,-1/0,-1/0,n)}function IJ(n,e){const t=n[0],i=n[1];return A1(t,i,t,i,e)}function jP(n,e,t,i,r){const o=Ux(r);return TJ(o,n,e,t,i)}function h1(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function kJ(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function h3(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function TJ(n,e,t,i,r){for(;t<i;t+=r)C0e(n,e[t],e[t+1]);return n}function C0e(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function RJ(n,e){let t;return t=e(FE(n)),t||(t=e(zE(n)),t)||(t=e(jE(n)),t)||(t=e(g1(n)),t)?t:!1}function W9(n){let e=0;return Hb(n)||(e=cs(n)*$u(n)),e}function FE(n){return[n[0],n[1]]}function zE(n){return[n[2],n[1]]}function Mf(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function _0e(n,e){let t;if(e==="bottom-left")t=FE(n);else if(e==="bottom-right")t=zE(n);else if(e==="top-left")t=g1(n);else if(e==="top-right")t=jE(n);else throw new Error("Invalid corner");return t}function Xw(n,e,t,i,r){const[o,s,a,c,h,m,y,M]=DJ(n,e,t,i);return A1(Math.min(o,a,h,y),Math.min(s,c,m,M),Math.max(o,a,h,y),Math.max(s,c,m,M),r)}function DJ(n,e,t,i){const r=e*i[0]/2,o=e*i[1]/2,s=Math.cos(t),a=Math.sin(t),c=r*s,h=r*a,m=o*s,y=o*a,M=n[0],x=n[1];return[M-c+y,x-h-m,M-c-y,x-h+m,M+c-y,x+h+m,M+c+y,x+h-m,M-c+y,x-h-m]}function $u(n){return n[3]-n[1]}function rm(n,e,t){const i=t||fp();return Zl(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):Ux(i),i}function g1(n){return[n[0],n[3]]}function jE(n){return[n[2],n[3]]}function cs(n){return n[2]-n[0]}function Zl(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function Hb(n){return n[2]<n[0]||n[3]<n[1]}function x0e(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function M0e(n,e,t){let i=!1;const r=G9(n,e),o=G9(n,t);if(r===Gc.INTERSECTING||o===Gc.INTERSECTING)i=!0;else{const s=n[0],a=n[1],c=n[2],h=n[3],m=e[0],y=e[1],M=t[0],x=t[1],k=(x-y)/(M-m);let P,F;o&Gc.ABOVE&&!(r&Gc.ABOVE)&&(P=M-(x-h)/k,i=P>=s&&P<=c),!i&&o&Gc.RIGHT&&!(r&Gc.RIGHT)&&(F=x-(M-c)*k,i=F>=a&&F<=h),!i&&o&Gc.BELOW&&!(r&Gc.BELOW)&&(P=M-(x-a)/k,i=P>=s&&P<=c),!i&&o&Gc.LEFT&&!(r&Gc.LEFT)&&(F=x-(M-s)*k,i=F>=a&&F<=h)}return i}function w0e(n,e,t,i){if(Hb(n))return Ux(t);let r=[];r=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],e(r,r,2);const o=[],s=[];for(let a=0,c=r.length;a<c;a+=2)o.push(r[a]),s.push(r[a+1]);return b0e(o,s,t)}function PJ(n,e){const t=e.getExtent(),i=Mf(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=cs(t),s=Math.floor((i[0]-t[0])/r)*r;n[0]-=s,n[2]-=s}return n}function UJ(n,e,t){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[i[0],n[1],i[2],n[3]]];PJ(n,e);const r=cs(i);if(cs(n)>r&&!t)return[[i[0],n[1],i[2],n[3]]];if(n[0]<i[0])return[[n[0]+r,n[1],i[2],n[3]],[i[0],n[1],n[2],n[3]]];if(n[2]>i[2])return[[n[0],n[1],i[2],n[3]],[i[0],n[1],n[2]-r,n[3]]]}return[n]}function S0e(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function Jw(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function NP(n,e){const t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,o=n[1]*t+n[0]*i;return n[0]=r,n[1]=o,n}function E0e(n,e){return n[0]*=e,n[1]*=e,n}function O0e(n,e){const t=n[0]-e[0],i=n[1]-e[1];return t*t+i*i}function B0e(n,e){return Math.sqrt(O0e(n,e))}function GP(n,e){if(e.canWrapX()){const t=cs(e.getExtent()),i=I0e(n,e,t);i&&(n[0]-=i*t)}return n}function I0e(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||cs(i),r=Math.floor((n[0]-i[0])/t)),r}function KJ(n){return Math.pow(n,3)}function Kx(n){return 1-KJ(1-n)}function k0e(n){return 3*n*n-2*n*n*n}function T0e(n){return n}const R0e=63710088e-1;function zz(n,e,t){t=t||R0e;const i=Vy(n[1]),r=Vy(e[1]),o=(r-i)/2,s=Vy(e[0]-n[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function LJ(...n){console.warn(...n)}const nv={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class NE{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||nv[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const r5=6378137,E_=Math.PI*r5,D0e=[-E_,-E_,E_,E_],P0e=[-180,-85,180,85],Z5=r5*Math.log(Math.tan(Math.PI/2));class PC extends NE{constructor(e){super({code:e,units:"m",extent:D0e,global:!0,worldExtent:P0e,getPointResolution:function(t,i){return t/Math.cosh(i[1]/r5)}})}}const jz=[new PC("EPSG:3857"),new PC("EPSG:102100"),new PC("EPSG:102113"),new PC("EPSG:900913"),new PC("http://www.opengis.net/def/crs/EPSG/0/3857"),new PC("http://www.opengis.net/gml/srs/epsg.xml#3857")];function U0e(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let o=0;o<r;o+=i){e[o]=E_*n[o]/180;let s=r5*Math.log(Math.tan(Math.PI*(+n[o+1]+90)/360));s>Z5?s=Z5:s<-Z5&&(s=-Z5),e[o+1]=s}return e}function K0e(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let o=0;o<r;o+=i)e[o]=180*n[o]/E_,e[o+1]=360*Math.atan(Math.exp(n[o+1]/r5))/Math.PI-90;return e}const L0e=6378137,Nz=[-180,-90,180,90],F0e=Math.PI*L0e/180;class Hv extends NE{constructor(e,t){super({code:e,units:"degrees",extent:Nz,axisOrientation:t,global:!0,metersPerUnit:F0e,worldExtent:Nz})}}const Gz=[new Hv("CRS:84"),new Hv("EPSG:4326","neu"),new Hv("urn:ogc:def:crs:OGC:1.3:CRS84"),new Hv("urn:ogc:def:crs:OGC:2:84"),new Hv("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Hv("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Hv("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Q9={};function z0e(n){return Q9[n]||Q9[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function j0e(n,e){Q9[n]=e}let N_={};function X3(n,e,t){const i=n.getCode(),r=e.getCode();i in N_||(N_[i]={}),N_[i][r]=t}function GO(n,e){return n in N_&&e in N_[n]?N_[n][e]:null}const eS=.9996,Ap=.00669438,GE=Ap*Ap,WE=GE*Ap,hb=Ap/(1-Ap),Wz=Math.sqrt(1-Ap),hx=(1-Wz)/(1+Wz),FJ=hx*hx,WP=FJ*hx,QP=WP*hx,zJ=QP*hx,jJ=1-Ap/4-3*GE/64-5*WE/256,N0e=3*Ap/8+3*GE/32+45*WE/1024,G0e=15*GE/256+45*WE/1024,W0e=35*WE/3072,Q0e=3/2*hx-27/32*WP+269/512*zJ,q0e=21/16*FJ-55/32*QP,Y0e=151/96*WP-417/128*zJ,$0e=1097/512*QP,tS=6378137;function V0e(n,e,t){const i=n-5e5,s=(t.north?e:e-1e7)/eS/(tS*jJ),a=s+Q0e*Math.sin(2*s)+q0e*Math.sin(4*s)+Y0e*Math.sin(6*s)+$0e*Math.sin(8*s),c=Math.sin(a),h=c*c,m=Math.cos(a),y=c/m,M=y*y,x=M*M,k=1-Ap*h,P=Math.sqrt(1-Ap*h),F=tS/P,j=(1-Ap)/k,q=hb*m**2,V=q*q,H=i/(F*eS),G=H*H,Y=G*H,z=Y*H,se=z*H,le=se*H,me=a-y/j*(G/2-z/24*(5+3*M+10*q-4*V-9*hb))+le/720*(61+90*M+298*q+45*x-252*hb-3*V);let de=(H-Y/6*(1+2*M+q)+se/120*(5-2*q+28*M-3*V+8*hb+24*x))/m;return de=j9(de+Vy(NJ(t.number)),-Math.PI,Math.PI),[Lz(de),Lz(me)]}const Qz=-80,qz=84,H0e=-180,Z0e=180;function X0e(n,e,t){n=j9(n,H0e,Z0e),e<Qz?e=Qz:e>qz&&(e=qz);const i=Vy(e),r=Math.sin(i),o=Math.cos(i),s=r/o,a=s*s,c=a*a,h=Vy(n),m=NJ(t.number),y=Vy(m),M=tS/Math.sqrt(1-Ap*r**2),x=hb*o**2,k=o*j9(h-y,-Math.PI,Math.PI),P=k*k,F=P*k,j=F*k,q=j*k,V=q*k,H=tS*(jJ*i-N0e*Math.sin(2*i)+G0e*Math.sin(4*i)-W0e*Math.sin(6*i)),G=eS*M*(k+F/6*(1-a+x)+q/120*(5-18*a+c+72*x-58*hb))+5e5;let Y=eS*(H+M*s*(P/2+j/24*(5-a+9*x+4*x**2)+V/720*(61-58*a+c+600*x-330*hb)));return t.north||(Y+=1e7),[G,Y]}function NJ(n){return(n-1)*6-180+3}const J0e=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function GJ(n){let e=0;for(const r of J0e){const o=n.match(r);if(o){e=parseInt(o[1]);break}}if(!e)return null;let t=0,i=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(i=!0,t=e-32600),t?{number:t,north:i}:null}function Yz(n,e){return function(t,i,r,o){const s=t.length;r=r>1?r:2,o=o??r,i||(r>2?i=t.slice():i=new Array(s));for(let a=0;a<s;a+=o){const c=t[a],h=t[a+1],m=n(c,h,e);i[a]=m[0],i[a+1]=m[1]}return i}}function e1e(n){return GJ(n)?new NE({code:n,units:"m"}):null}function t1e(n){const e=GJ(n.getCode());return e?{forward:Yz(X0e,e),inverse:Yz(V0e,e)}:null}const n1e=[t1e],i1e=[e1e];let q9=!0;function WJ(n){q9=!1}function qP(n,e){if(e!==void 0){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];e=e}else e=n.slice();return e}function Y9(n){j0e(n.getCode(),n),X3(n,n,qP)}function r1e(n){n.forEach(Y9)}function Xs(n){if(typeof n!="string")return n;const e=z0e(n);if(e)return e;for(const t of i1e){const i=t(n);if(i)return i}return null}function $9(n,e,t,i){n=Xs(n);let r;const o=n.getPointResolutionFunc();if(o){if(r=o(e,t),i&&i!==n.getUnits()){const s=n.getMetersPerUnit();s&&(r=r*s/nv[i])}}else{const s=n.getUnits();if(s=="degrees"&&!i||i=="degrees")r=e;else{const a=o5(n,Xs("EPSG:4326"));if(!a&&s!=="degrees")r=e*n.getMetersPerUnit();else{let h=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];h=a(h,h,2);const m=zz(h.slice(0,2),h.slice(2,4)),y=zz(h.slice(4,6),h.slice(6,8));r=(m+y)/2}const c=i?nv[i]:n.getMetersPerUnit();c!==void 0&&(r/=c)}}return r}function $z(n){r1e(n),n.forEach(function(e){n.forEach(function(t){e!==t&&X3(e,t,qP)})})}function o1e(n,e,t,i){n.forEach(function(r){e.forEach(function(o){X3(r,o,t),X3(o,r,i)})})}function YP(n,e){return n?typeof n=="string"?Xs(n):n:Xs(e)}function s1e(n){return(function(e,t,i,r){const o=e.length;i=i!==void 0?i:2,r=r??i,t=t!==void 0?t:new Array(o);for(let s=0;s<o;s+=r){const a=n(e.slice(s,s+i)),c=a.length;for(let h=0,m=r;h<m;++h)t[s+h]=h>=c?e[s+h]:a[h]}return t})}function V9(n,e){return WJ(),QE(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function WO(n,e){const t=QE(n,"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=Ob(i+180,360)-180),t}function Zy(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||o5(n,e)===qP)&&t}function o5(n,e){const t=n.getCode(),i=e.getCode();let r=GO(t,i);if(r)return r;let o=null,s=null;for(const c of n1e)o||(o=c(n)),s||(s=c(e));if(!o&&!s)return null;const a="EPSG:4326";if(s)if(o)r=QO(o.inverse,s.forward);else{const c=GO(t,a);c&&(r=QO(c,s.forward))}else{const c=GO(a,i);c&&(r=QO(o.inverse,c))}return r&&(Y9(n),Y9(e),X3(n,e,r)),r}function QO(n,e){return function(t,i,r,o){return i=n(t,i,r,o),e(i,i,r,o)}}function J3(n,e){const t=Xs(n),i=Xs(e);return o5(t,i)}function QE(n,e,t){const i=J3(e,t);if(!i){const r=Xs(e).getCode(),o=Xs(t).getCode();throw new Error(`No transform available between ${r} and ${o}`)}return i(n,void 0,n.length)}let a1e=null;function l1e(){return a1e}function H9(n,e){return n}function H0(n,e){return q9&&!Jw(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(q9=!1,LJ("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function $P(n,e){return n}function Mg(n,e){return n}function u1e(){$z(jz),$z(Gz),o1e(Gz,jz,U0e,K0e)}u1e();const QJ=new Array(6);function bd(){return[1,0,0,1,0,0]}function Vz(n){return HP(n,1,0,0,1,0,0)}function VP(n,e){const t=n[0],i=n[1],r=n[2],o=n[3],s=n[4],a=n[5],c=e[0],h=e[1],m=e[2],y=e[3],M=e[4],x=e[5];return n[0]=t*c+r*h,n[1]=i*c+o*h,n[2]=t*m+r*y,n[3]=i*m+o*y,n[4]=t*M+r*x+s,n[5]=i*M+o*x+a,n}function HP(n,e,t,i,r,o,s){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=o,n[5]=s,n}function c1e(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Qu(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function qO(n,e,t){return VP(n,HP(QJ,e,0,0,t,0,0))}function A1e(n,e,t){return VP(n,HP(QJ,1,0,0,1,e,t))}function Fg(n,e,t,i,r,o,s,a){const c=Math.sin(o),h=Math.cos(o);return n[0]=i*h,n[1]=r*c,n[2]=-i*c,n[3]=r*h,n[4]=s*i*h-a*i*c+e,n[5]=s*r*c+a*r*h+t,n}function qJ(n,e){const t=h1e(e);Rs(t!==0,"Transformation matrix cannot be inverted");const i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5];return n[0]=s/t,n[1]=-r/t,n[2]=-o/t,n[3]=i/t,n[4]=(o*c-s*a)/t,n[5]=-(i*c-r*a)/t,n}function h1e(n){return n[0]*n[3]-n[1]*n[2]}const d1e=[1e5,1e5,1e5,1e5,2,2];function f1e(n){return"matrix("+n.join(", ")+")"}function Hz(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function p1e(n,e){const t=Hz(n),i=Hz(e);for(let r=0;r<6;++r)if(Math.round((t[r]-i[r])*d1e[r])!==0)return!1;return!0}function Xy(n,e,t,i,r,o,s){o=o||[],s=s||2;let a=0;for(let c=e;c<t;c+=i){const h=n[c],m=n[c+1];o[a++]=r[0]*h+r[2]*m+r[4],o[a++]=r[1]*h+r[3]*m+r[5];for(let y=2;y<s;y++)o[a++]=n[c+y]}return o&&o.length!=a&&(o.length=a),o}function YJ(n,e,t,i,r,o,s){s=s||[];const a=Math.cos(r),c=Math.sin(r),h=o[0],m=o[1];let y=0;for(let M=e;M<t;M+=i){const x=n[M]-h,k=n[M+1]-m;s[y++]=h+x*a-k*c,s[y++]=m+x*c+k*a;for(let P=M+2;P<M+i;++P)s[y++]=n[P]}return s&&s.length!=y&&(s.length=y),s}function m1e(n,e,t,i,r,o,s,a){a=a||[];const c=s[0],h=s[1];let m=0;for(let y=e;y<t;y+=i){const M=n[y]-c,x=n[y+1]-h;a[m++]=c+r*M,a[m++]=h+o*x;for(let k=y+2;k<y+i;++k)a[m++]=n[k]}return a&&a.length!=m&&(a.length=m),a}function g1e(n,e,t,i,r,o,s){s=s||[];let a=0;for(let c=e;c<t;c+=i){s[a++]=n[c]+r,s[a++]=n[c+1]+o;for(let h=c+2;h<c+i;++h)s[a++]=n[h]}return s&&s.length!=a&&(s.length=a),s}const Zz=bd(),y1e=[NaN,NaN];class $J extends dm{constructor(){super(),this.extent_=fp(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=MJ((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return zr()}closestPointXY(e,t,i,r){return zr()}containsXY(e,t){return this.closestPointXY(e,t,y1e,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return zr()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Ux(t),this.extentRevision_=this.getRevision()}return x0e(this.extent_,e)}rotate(e,t){zr()}scale(e,t,i){zr()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return zr()}getType(){return zr()}applyTransform(e){zr()}intersectsExtent(e){return zr()}translate(e,t){zr()}transform(e,t){const i=Xs(e),r=i.getUnits()=="tile-pixels"?function(o,s,a){const c=i.getExtent(),h=i.getWorldExtent(),m=$u(h)/$u(c);Fg(Zz,h[0],h[3],m,-m,0,0,0);const y=Xy(o,0,o.length,a,Zz,s),M=J3(i,t);return M?M(y,y,a):y}:J3(i,t);return this.applyTransform(r),this}}class Zb extends $J{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return jP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return zr()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Xz(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){zr()}setLayout(e,t,i){let r;if(e)r=Xz(e);else{for(let o=0;o<i;++o){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=Xb(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();YJ(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=Mf(this.getExtent()));const r=this.getFlatCoordinates();if(r){const o=this.getStride();m1e(r,0,r.length,o,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();g1e(i,0,i.length,r,e,t,i),this.changed()}}}function Xb(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function Xz(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function v1e(n,e,t){const i=n.getFlatCoordinates();if(!i)return null;const r=n.getStride();return Xy(i,0,i.length,r,e,t)}function VJ(n,e,t,i){let r=0;const o=n[t-i],s=n[t-i+1];let a=0,c=0;for(;e<t;e+=i){const h=n[e]-o,m=n[e+1]-s;r+=c*h-a*m,a=h,c=m}return r/2}function HJ(n,e,t,i){let r=0;for(let o=0,s=t.length;o<s;++o){const a=t[o];r+=VJ(n,e,a,i),e=a}return r}function b1e(n,e,t,i){let r=0;for(let o=0,s=t.length;o<s;++o){const a=t[o];r+=HJ(n,e,a,i),e=a[a.length-1]}return r}function Jz(n,e,t,i,r,o,s){const a=n[e],c=n[e+1],h=n[t]-a,m=n[t+1]-c;let y;if(h===0&&m===0)y=e;else{const M=((r-a)*h+(o-c)*m)/(h*h+m*m);if(M>1)y=t;else if(M>0){for(let x=0;x<i;++x)s[x]=hf(n[e+x],n[t+x],M);s.length=i;return}else y=e}for(let M=0;M<i;++M)s[M]=n[y+M];s.length=i}function ZP(n,e,t,i,r){let o=n[e],s=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],c=n[e+1],h=Eb(o,s,a,c);h>r&&(r=h),o=a,s=c}return r}function XP(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];r=ZP(n,e,a,i,r),e=a}return r}function C1e(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];r=XP(n,e,a,i,r),e=a[a.length-1]}return r}function JP(n,e,t,i,r,o,s,a,c,h,m){if(e==t)return h;let y,M;if(r===0){if(M=Eb(s,a,n[e],n[e+1]),M<h){for(y=0;y<i;++y)c[y]=n[e+y];return c.length=i,M}return h}m=m||[NaN,NaN];let x=e+i;for(;x<t;)if(Jz(n,x-i,x,i,s,a,m),M=Eb(s,a,m[0],m[1]),M<h){for(h=M,y=0;y<i;++y)c[y]=m[y];c.length=i,x+=i}else x+=i*Math.max((Math.sqrt(M)-Math.sqrt(h))/r|0,1);if(o&&(Jz(n,t-i,e,i,s,a,m),M=Eb(s,a,m[0],m[1]),M<h)){for(h=M,y=0;y<i;++y)c[y]=m[y];c.length=i}return h}function eU(n,e,t,i,r,o,s,a,c,h,m){m=m||[NaN,NaN];for(let y=0,M=t.length;y<M;++y){const x=t[y];h=JP(n,e,x,i,r,o,s,a,c,h,m),e=x}return h}function _1e(n,e,t,i,r,o,s,a,c,h,m){m=m||[NaN,NaN];for(let y=0,M=t.length;y<M;++y){const x=t[y];h=eU(n,e,x,i,r,o,s,a,c,h,m),e=x[x.length-1]}return h}function x1e(n,e,t,i){for(let r=0,o=t.length;r<o;++r)n[e++]=t[r];return e}function qE(n,e,t,i){for(let r=0,o=t.length;r<o;++r){const s=t[r];for(let a=0;a<i;++a)n[e++]=s[a]}return e}function s5(n,e,t,i,r){r=r||[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=qE(n,e,t[s],i);r[o++]=c,e=c}return r.length=o,r}function ZJ(n,e,t,i,r){r=r||[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=s5(n,e,t[s],i,r[o]);c.length===0&&(c[0]=e),r[o++]=c,e=c[c.length-1]}return r.length=o,r}function Ly(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=e;s<t;s+=i)r[o++]=n.slice(s,s+i);return r.length=o,r}function e4(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s];r[o++]=Ly(n,e,c,i,r[o]),e=c}return r.length=o,r}function Z9(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s];r[o++]=c.length===1&&c[0]===e?[]:e4(n,e,c,i,r[o]),e=c[c.length-1]}return r.length=o,r}function YE(n,e,t,i,r,o,s){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)o[s++]=n[e],o[s++]=n[e+1];return s}const c=new Array(a);c[0]=1,c[a-1]=1;const h=[e,t-i];let m=0;for(;h.length>0;){const y=h.pop(),M=h.pop();let x=0;const k=n[M],P=n[M+1],F=n[y],j=n[y+1];for(let q=M+i;q<y;q+=i){const V=n[q],H=n[q+1],G=g0e(V,H,k,P,F,j);G>x&&(m=q,x=G)}x>r&&(c[(m-e)/i]=1,M+i<m&&h.push(M,m),m+i<y&&h.push(m,y))}for(let y=0;y<a;++y)c[y]&&(o[s++]=n[e+y*i],o[s++]=n[e+y*i+1]);return s}function XJ(n,e,t,i,r,o,s,a){for(let c=0,h=t.length;c<h;++c){const m=t[c];s=YE(n,e,m,i,r,o,s),a.push(s),e=m}return s}function ib(n,e){return e*Math.round(n/e)}function M1e(n,e,t,i,r,o,s){if(e==t)return s;let a=ib(n[e],r),c=ib(n[e+1],r);e+=i,o[s++]=a,o[s++]=c;let h,m;do if(h=ib(n[e],r),m=ib(n[e+1],r),e+=i,e==t)return o[s++]=h,o[s++]=m,s;while(h==a&&m==c);for(;e<t;){const y=ib(n[e],r),M=ib(n[e+1],r);if(e+=i,y==h&&M==m)continue;const x=h-a,k=m-c,P=y-a,F=M-c;if(x*F==k*P&&(x<0&&P<x||x==P||x>0&&P>x)&&(k<0&&F<k||k==F||k>0&&F>k)){h=y,m=M;continue}o[s++]=h,o[s++]=m,a=h,c=m,h=y,m=M}return o[s++]=h,o[s++]=m,s}function tU(n,e,t,i,r,o,s,a){for(let c=0,h=t.length;c<h;++c){const m=t[c];s=M1e(n,e,m,i,r,o,s),a.push(s),e=m}return s}function w1e(n,e,t,i,r,o,s,a){for(let c=0,h=t.length;c<h;++c){const m=t[c],y=[];s=tU(n,e,m,i,r,o,s,y),a.push(y),e=m[m.length-1]}return s}class t4 extends Zb{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new t4(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<Vb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ZP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),JP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return VJ(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Ly(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=YE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new t4(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=qE(this.flatCoordinates,0,e,this.stride),this.changed()}}class Lb extends Zb{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Lb(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const o=this.flatCoordinates,s=Eb(e,t,o[0],o[1]);if(s<r){const a=this.stride;for(let c=0;c<a;++c)i[c]=o[c];return i.length=a,s}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return IJ(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return zP(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=x1e(this.flatCoordinates,0,e,this.stride),this.changed()}}function S1e(n,e,t,i,r){return!RJ(r,function(s){return!db(n,e,t,i,s[0],s[1])})}function db(n,e,t,i,r,o){let s=0,a=n[t-i],c=n[t-i+1];for(;e<t;e+=i){const h=n[e],m=n[e+1];c<=o?m>o&&(h-a)*(o-c)-(r-a)*(m-c)>0&&s++:m<=o&&(h-a)*(o-c)-(r-a)*(m-c)<0&&s--,a=h,c=m}return s!==0}function nU(n,e,t,i,r,o){if(t.length===0||!db(n,e,t[0],i,r,o))return!1;for(let s=1,a=t.length;s<a;++s)if(db(n,t[s-1],t[s],i,r,o))return!1;return!0}function E1e(n,e,t,i,r,o){if(t.length===0)return!1;for(let s=0,a=t.length;s<a;++s){const c=t[s];if(nU(n,e,c,i,r,o))return!0;e=c[c.length-1]}return!1}function iU(n,e,t,i,r,o,s){let a,c,h,m,y,M,x;const k=r[o+1],P=[];for(let q=0,V=t.length;q<V;++q){const H=t[q];for(m=n[H-i],M=n[H-i+1],a=e;a<H;a+=i)y=n[a],x=n[a+1],(k<=M&&x<=k||M<=k&&k<=x)&&(h=(k-M)/(x-M)*(y-m)+m,P.push(h)),m=y,M=x}let F=NaN,j=-1/0;for(P.sort(Pg),m=P[0],a=1,c=P.length;a<c;++a){y=P[a];const q=Math.abs(y-m);q>j&&(h=(m+y)/2,nU(n,e,t,i,h,k)&&(F=h,j=q)),m=y}return isNaN(F)&&(F=r[o]),s?(s.push(F,k,j),s):[F,k,j]}function JJ(n,e,t,i,r){let o=[];for(let s=0,a=t.length;s<a;++s){const c=t[s];o=iU(n,e,c,i,r,2*s,o),e=c[c.length-1]}return o}function eee(n,e,t,i,r){let o;for(e+=i;e<t;e+=i)if(o=r(n.slice(e-i,e),n.slice(e,e+i)),o)return o;return!1}function $E(n,e,t,i,r,o){return o=o??TJ(fp(),n,e,t,i),Zl(r,o)?o[0]>=r[0]&&o[2]<=r[2]||o[1]>=r[1]&&o[3]<=r[3]?!0:eee(n,e,t,i,function(s,a){return M0e(r,s,a)}):!1}function O1e(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){if($E(n,e,t[o],i,r))return!0;e=t[o]}return!1}function tee(n,e,t,i,r){return!!($E(n,e,t,i,r)||db(n,e,t,i,r[0],r[1])||db(n,e,t,i,r[0],r[3])||db(n,e,t,i,r[2],r[1])||db(n,e,t,i,r[2],r[3]))}function nee(n,e,t,i,r){if(!tee(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(let o=1,s=t.length;o<s;++o)if(S1e(n,t[o-1],t[o],i,r)&&!$E(n,t[o-1],t[o],i,r))return!1;return!0}function B1e(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];if(nee(n,e,a,i,r))return!0;e=a[a.length-1]}return!1}function I1e(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const o=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=o}e+=i,t-=i}}function rU(n,e,t,i){let r=0,o=n[t-i],s=n[t-i+1];for(;e<t;e+=i){const a=n[e],c=n[e+1];r+=(a-o)*(c+s),o=a,s=c}return r===0?void 0:r>0}function oU(n,e,t,i,r){r=r!==void 0?r:!1;for(let o=0,s=t.length;o<s;++o){const a=t[o],c=rU(n,e,a,i);if(o===0){if(r&&c||!r&&!c)return!1}else if(r&&!c||!r&&c)return!1;e=a}return!0}function iee(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];if(!oU(n,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}function nS(n,e,t,i,r){r=r!==void 0?r:!1;for(let o=0,s=t.length;o<s;++o){const a=t[o],c=rU(n,e,a,i);(o===0?r&&c||!r&&!c:r&&!c||!r&&c)&&I1e(n,e,a,i),e=a}return e}function X9(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o)e=nS(n,e,t[o],i,r);return e}function ree(n,e){const t=[];let i=0,r=0,o;for(let s=0,a=e.length;s<a;++s){const c=e[s],h=rU(n,i,c,2);if(o===void 0&&(o=h),h===o)t.push(e.slice(r,s+1));else{if(t.length===0)continue;t[t.length-1].push(e[r])}r=s+1,i=c}return t}class d1 extends Zb{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Ug(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new d1(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<Vb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(XP(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),eU(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return nU(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return HJ(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),nS(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,e4(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Mf(this.getExtent());this.flatInteriorPoint_=iU(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Lb(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new t4(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let o=0;for(let s=0,a=i.length;s<a;++s){const c=i[s],h=new t4(t.slice(o,c),e);r.push(h),o=c}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;oU(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=nS(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=tU(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new d1(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return nee(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=s5(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function ej(n){if(Hb(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],i=n[2],r=n[3],o=[e,t,e,r,i,r,i,t,e,t];return new d1(o,"XY",[o.length])}function sU(n,e,t,i){const r=cs(e)/t[0],o=$u(e)/t[1];return i?Math.min(n,Math.max(r,o)):Math.min(n,Math.min(r,o))}function aU(n,e,t){let i=Math.min(n,e);const r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),Pl(i,t/2,e*2)}function k1e(n,e,t,i){return e=e!==void 0?e:!0,(function(r,o,s,a){if(r!==void 0){const c=n[0],h=n[n.length-1],m=t?sU(c,t,s,i):c;if(a)return e?aU(r,m,h):Pl(r,h,m);const y=Math.min(m,r),M=Math.floor(UE(n,y,o));return n[M]>m&&M<n.length-1?n[M+1]:n[M]}})}function T1e(n,e,t,i,r,o){return i=i!==void 0?i:!0,t=t!==void 0?t:0,(function(s,a,c,h){if(s!==void 0){const m=r?sU(e,r,c,o):e;if(h)return i?aU(s,m,t):Pl(s,t,m);const y=1e-9,M=Math.ceil(Math.log(e/m)/Math.log(n)-y),x=-a*(.5-y)+.5,k=Math.min(m,s),P=Math.floor(Math.log(e/k)/Math.log(n)+x),F=Math.max(M,P),j=e/Math.pow(n,F);return Pl(j,t,m)}})}function tj(n,e,t,i,r){return t=t!==void 0?t:!0,(function(o,s,a,c){if(o!==void 0){const h=i?sU(n,i,a,r):n;return!t||!c?Pl(o,e,h):aU(o,h,e)}})}function lU(n){if(n!==void 0)return 0}function nj(n){if(n!==void 0)return n}function R1e(n){const e=2*Math.PI/n;return(function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function D1e(n){const e=Vy(5);return(function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t})}const oee=42,uU=256,YO=0;class Zp extends dm{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=YP(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&WJ(),e.center&&(e.center=H0(e.center,this.projection_)),e.extent&&(e.extent=Mg(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in Gp)delete t[a];this.setProperties(t,!0);const i=U1e(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=P1e(e),o=i.constraint,s=K1e(e);this.constraints_={center:r,resolution:o,rotation:s},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const o=this.getResolution(),s=o/2*(r[3]-t[3]+t[1]-r[1]),a=o/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([i[0]+s,i[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=H0(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=H0(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const m=arguments[r];m.center&&this.setCenterInternal(m.center),m.zoom!==void 0?this.setZoom(m.zoom):m.resolution&&this.setResolution(m.resolution),m.rotation!==void 0&&this.setRotation(m.rotation)}if(r===t){i&&X5(i,!0);return}let o=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,c=this.targetRotation_;const h=[];for(;r<t;++r){const m=arguments[r],y={start:o,complete:!1,anchor:m.anchor,duration:m.duration!==void 0?m.duration:1e3,easing:m.easing||k0e,callback:i};if(m.center&&(y.sourceCenter=s,y.targetCenter=m.center.slice(),s=y.targetCenter),m.zoom!==void 0?(y.sourceResolution=a,y.targetResolution=this.getResolutionForZoom(m.zoom),a=y.targetResolution):m.resolution&&(y.sourceResolution=a,y.targetResolution=m.resolution,a=y.targetResolution),m.rotation!==void 0){y.sourceRotation=c;const M=Ob(m.rotation-c+Math.PI,2*Math.PI)-Math.PI;y.targetRotation=c+M,c=y.targetRotation}L1e(y)?y.complete=!0:o+=y.duration,h.push(y)}this.animations_.push(h),this.setHint(_l.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[_l.ANIMATING]>0}getInteracting(){return this.hints_[_l.INTERACTING]>0}cancelAnimations(){this.setHint(_l.ANIMATING,-this.hints_[_l.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&X5(r[0].callback,!1),!e)for(let o=0,s=r.length;o<s;++o){const a=r[o];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let o=!0;for(let s=0,a=r.length;s<a;++s){const c=r[s];if(c.complete)continue;const h=e-c.start;let m=c.duration>0?h/c.duration:1;m>=1?(c.complete=!0,m=1):o=!1;const y=c.easing(m);if(c.sourceCenter){const M=c.sourceCenter[0],x=c.sourceCenter[1],k=c.targetCenter[0],P=c.targetCenter[1];this.nextCenter_=c.targetCenter;const F=M+y*(k-M),j=x+y*(P-x);this.targetCenter_=[F,j]}if(c.sourceResolution&&c.targetResolution){const M=y===1?c.targetResolution:c.sourceResolution+y*(c.targetResolution-c.sourceResolution);if(c.anchor){const x=this.getViewportSize_(this.getRotation()),k=this.constraints_.resolution(M,0,x,!0);this.targetCenter_=this.calculateCenterZoom(k,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=M,this.applyTargetState_(!0)}if(c.sourceRotation!==void 0&&c.targetRotation!==void 0){const M=y===1?Ob(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+y*(c.targetRotation-c.sourceRotation);if(c.anchor){const x=this.constraints_.rotation(M,!0);this.targetCenter_=this.calculateCenterRotate(x,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=M}if(this.applyTargetState_(!0),t=!0,!c.complete)break}if(o){this.animations_[i]=null,this.setHint(_l.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const s=r[0].callback;s&&X5(s,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-t[0],r[1]-t[1]],NP(i,e-this.getRotation()),S0e(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),o=this.getResolution();if(r!==void 0&&o!==void 0){const s=t[0]-e*(t[0]-r[0])/o,a=t[1]-e*(t[1]-r[1])/o;i=[s,a]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&H9(e,this.getProjection())}getCenterInternal(){return this.get(Gp.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return $P(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Rs(t,"The view center is not defined");const i=this.getResolution();Rs(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return Rs(r!==void 0,"The view rotation is not defined"),Xw(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Gp.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Mg(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=cs(e)/t[0],r=$u(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(t/i)/Math.log(e);return(function(o){return t/Math.pow(e,o*r)})}getRotation(){return this.get(Gp.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,o=Math.log(i/r)/t;return(function(s){return Math.log(i/s)/t/o})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const o=this.padding_;if(o){const s=this.getViewportSizeMinusPadding_();r=$O(r,this.getViewportSize_(),[s[0]/2+o[3],s[1]/2+o[0]],t,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,r;if(this.resolutions_){const o=UE(this.resolutions_,e,1);t=o,i=this.resolutions_[o],o==this.resolutions_.length-1?r=2:r=i/this.resolutions_[o+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=Pl(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,Pl(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(Rs(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Rs(!Hb(e),"Cannot fit empty extent provided as `geometry`");const r=Mg(e,this.getProjection());i=ej(r)}else if(e.getType()==="Circle"){const r=Mg(e.getExtent(),this.getProjection());i=ej(r),i.rotate(this.getRotation(),Mf(r))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),o=e.getFlatCoordinates(),s=e.getStride();let a=1/0,c=1/0,h=-1/0,m=-1/0;for(let y=0,M=o.length;y<M;y+=s){const x=o[y]*i-o[y+1]*r,k=o[y]*r+o[y+1]*i;a=Math.min(a,x),c=Math.min(c,k),h=Math.max(h,x),m=Math.max(m,k)}return[a,c,h,m]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],o=t.nearest!==void 0?t.nearest:!1;let s;t.minResolution!==void 0?s=t.minResolution:t.maxZoom!==void 0?s=this.getResolutionForZoom(t.maxZoom):s=0;const a=this.rotatedExtentForGeometry(e);let c=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);c=isNaN(c)?s:Math.max(c,s),c=this.getConstrainedResolution(c,o?0:1);const h=this.getRotation(),m=Math.sin(h),y=Math.cos(h),M=Mf(a);M[0]+=(r[1]-r[3])/2*c,M[1]+=(r[0]-r[2])/2*c;const x=M[0]*y-M[1]*m,k=M[1]*y+M[0]*m,P=this.getConstrainedCenter([x,k],c),F=t.callback?t.callback:Z3;t.duration!==void 0?this.animateInternal({resolution:c,center:P,duration:t.duration,easing:t.easing},F):(this.targetResolution_=c,this.targetCenter_=P,this.applyTargetState_(!1,!0),X5(F,!0))}centerOn(e,t,i){this.centerOnInternal(H0(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal($O(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let o;const s=this.padding_;if(s&&e){const a=this.getViewportSizeMinusPadding_(-i),c=$O(e,r,[a[0]/2+s[3],a[1]/2+s[0]],t,i);o=[e[0]-c[0],e[1]-c[1]]}return o}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=H9(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&H0(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(o,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=H0(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&H0(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),o=this.getViewportSize_(r),s=this.constraints_.resolution(this.targetResolution_,0,o,i),a=this.constraints_.center(this.targetCenter_,s,o,i,this.calculateCenterShift(this.targetCenter_,s,r,o));this.get(Gp.ROTATION)!==r&&this.set(Gp.ROTATION,r),this.get(Gp.RESOLUTION)!==s&&(this.set(Gp.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Gp.CENTER)||!Jw(this.get(Gp.CENTER),a))&&this.set(Gp.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const r=t||0,o=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(o),a=this.constraints_.resolution(this.targetResolution_,r,s),c=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,o,s));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=o,this.targetCenter_=c,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==o||!this.getCenterInternal()||!Jw(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:c,resolution:a,duration:e,easing:Kx,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(_l.INTERACTING,1)}endInteraction(e,t,i){i=i&&H0(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(_l.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function X5(n,e){setTimeout(function(){n(e)},0)}function P1e(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return Fz(n.extent,n.constrainOnlyCenter,t)}const e=YP(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Fz(t,!1,!1)}return v0e}function U1e(n){let e,t,i,s=n.minZoom!==void 0?n.minZoom:YO,a=n.maxZoom!==void 0?n.maxZoom:28;const c=n.zoomFactor!==void 0?n.zoomFactor:2,h=n.multiWorld!==void 0?n.multiWorld:!1,m=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,y=n.showFullExtent!==void 0?n.showFullExtent:!1,M=YP(n.projection,"EPSG:3857"),x=M.getExtent();let k=n.constrainOnlyCenter,P=n.extent;if(!h&&!P&&M.isGlobal()&&(k=!1,P=x),n.resolutions!==void 0){const F=n.resolutions;t=F[s],i=F[a]!==void 0?F[a]:F[F.length-1],n.constrainResolution?e=k1e(F,m,!k&&P,y):e=tj(t,i,m,!k&&P,y)}else{const j=(x?Math.max(cs(x),$u(x)):360*nv.degrees/M.getMetersPerUnit())/uU/Math.pow(2,YO),q=j/Math.pow(2,28-YO);t=n.maxResolution,t!==void 0?s=0:t=j/Math.pow(c,s),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(c,a):i=j/Math.pow(c,a):i=q),a=s+Math.floor(Math.log(t/i)/Math.log(c)),i=t/Math.pow(c,a-s),n.constrainResolution?e=T1e(c,t,i,m,!k&&P,y):e=tj(t,i,m,!k&&P,y)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:s,zoomFactor:c}}function K1e(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?D1e():t===!1?nj:typeof t=="number"?R1e(t):nj}return lU}function L1e(n){return!(n.sourceCenter&&n.targetCenter&&!Jw(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function $O(n,e,t,i,r){const o=Math.cos(-r);let s=Math.sin(-r),a=n[0]*o-n[1]*s,c=n[1]*o+n[0]*s;a+=(e[0]/2-t[0])*i,c+=(t[1]-e[1]/2)*i,s=-s;const h=a*o-c*s,m=c*o+a*s;return[h,m]}const J5="ol-hidden",F1e="ol-selectable",VE="ol-unselectable",cU="ol-control",ij="ol-collapsed",z1e=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),rj=["style","variant","weight","size","lineHeight","family"],J9={normal:400,bold:700},eR=function(n){const e=n.match(z1e);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let i=0,r=rj.length;i<r;++i){const o=e[i+1];o!==void 0&&(t[rj[i]]=typeof o=="string"?o.trim():o)}return isNaN(Number(t.weight))&&t.weight in J9&&(t.weight=J9[t.weight]),t.families=t.family.split(/,\s?/).map(i=>i.trim().replace(/^['"]|['"]$/g,"")),t};function Ul(n,e,t,i){let r;return t&&t.length?r=t.shift():FP?r=new OffscreenCanvas(n||300,e||300):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}let VO;function iS(){return VO||(VO=Ul(1,1)),VO}function a5(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function j1e(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function N1e(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function oj(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function see(n){for(;n.lastChild;)n.lastChild.remove()}function G1e(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],o=e[i];if(!r&&!o)break;if(r!==o){if(!r){n.appendChild(o);continue}if(!o){n.removeChild(r),--i;continue}n.insertBefore(o,r)}}}class AU extends dm{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,i=this.listenerKeys.length;t<i;++t)Ra(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==Z3&&this.listenerKeys.push(is(e,Z0.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class W1e extends AU{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",o=e.collapseLabel!==void 0?e.collapseLabel:"",s=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=s):this.collapseLabel_=o;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener(Rr.CLICK,this.handleClick_.bind(this),!1);const h=t+" "+VE+" "+cU+(this.collapsed_&&this.collapsible_?" "+ij:"")+(this.collapsible_?"":" ol-uncollapsible"),m=this.element;m.className=h,m.appendChild(this.toggleButton_),m.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),i=new Set(t.flatMap(r=>r.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>i.add(r)):i.add(this.attributions_)),!this.overrideCollapsible_){const r=!t.some(o=>o.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(r)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(r=>Ax(()=>r))),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!cv(t,this.renderedAttributions_)){see(this.ulElement_);for(let r=0,o=t.length;r<o;++r){const s=document.createElement("li");s.innerHTML=t[r],this.ulElement_.appendChild(s)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(ij),this.collapsed_?oj(this.collapseLabel_,this.label_):oj(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Q1e extends AU{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const o=e.tipLabel?e.tipLabel:"Reset rotation",s=document.createElement("button");s.className=t+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),s.addEventListener(Rr.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+VE+" "+cU,c=this.element;c.className=a,c.appendChild(s),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(J5)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Kx}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const o=this.element.classList.contains(J5);!o&&i===0?this.element.classList.add(J5):o&&i!==0&&this.element.classList.remove(J5)}this.label_.style.transform=r}this.rotation_=i}}class q1e extends AU{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",o=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",s=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",c=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",h=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",m=document.createElement("button");m.className=r,m.setAttribute("type","button"),m.title=c,m.appendChild(typeof s=="string"?document.createTextNode(s):s),m.addEventListener(Rr.CLICK,this.handleClick_.bind(this,i),!1);const y=document.createElement("button");y.className=o,y.setAttribute("type","button"),y.title=h,y.appendChild(typeof a=="string"?document.createTextNode(a):a),y.addEventListener(Rr.CLICK,this.handleClick_.bind(this,-i),!1);const M=t+" "+VE+" "+cU,x=this.element;x.className=M,x.appendChild(m),x.appendChild(y),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const o=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:o,duration:this.duration_,easing:Kx})):i.setZoom(o)}}}function Y1e(n){n=n||{};const e=new _g;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new q1e(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new Q1e(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new W1e(n.attributionOptions)),e}class $1e{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const o=this.points_[t]-this.points_[i],s=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(s,o),this.initialVelocity_=Math.sqrt(o*o+s*s)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const sj={ACTIVE:"active"};class l5 extends dm{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(sj.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(sj.ACTIVE,e)}setMap(e){this.map_=e}}function V1e(n,e,t){const i=n.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:T0e,center:n.getConstrainedCenter(r)})}}function hU(n,e,t,i){const r=n.getZoom();if(r===void 0)return;const o=n.getConstrainedZoom(r+e),s=n.getResolutionForZoom(o);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:s,anchor:t,duration:i!==void 0?i:250,easing:Kx})}class H1e extends l5{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Vl.DBLCLICK){const i=e.originalEvent,r=e.map,o=e.coordinate,s=i.shiftKey?-this.delta_:this.delta_,a=r.getView();hU(a,s,o,this.duration_),i.preventDefault(),t=!0}return!t}}function tR(n){const e=arguments;return function(t){let i=!0;for(let r=0,o=e.length;r<o&&(i=i&&e[r](t),!!i);++r);return i}}const Z1e=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},X1e=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),i=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(i):e.contains(i)},aee=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?X1e(n):!0},J1e=H3,lee=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(A0e&&wJ&&e.ctrlKey)},uee=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},eye=function(n){const e=n.originalEvent;return wJ?e.metaKey:e.ctrlKey},tye=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},cee=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},HO=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},nye=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class u5 extends l5{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Vl.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Vl.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Vl.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Vl.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function dU(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return{clientX:t/e,clientY:i/e}}class iye extends u5{constructor(e){super({stopDown:KE}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:tR(uee,nye);this.condition_=e.onFocusOnly?tR(aee,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,r=t.getEventPixel(dU(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const o=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();E0e(o,a.getResolution()),NP(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(s),c=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(o),a[1]-r*Math.sin(o)]);i.animateInternal({center:i.getConstrainedCenter(c),duration:500,easing:Kx})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class rye extends u5{constructor(e){e=e||{},super({stopDown:KE}),this.condition_=e.condition?e.condition:Z1e,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!HO(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===lU)return;const r=t.getSize(),o=e.pixel,s=Math.atan2(r[1]/2-o[1],o[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=s-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=s}handleUpEvent(e){return HO(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return HO(e)&&lee(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class oye extends e5{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new d1([r])}getGeometry(){return this.geometry_}}const UC={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class h2 extends hm{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class sye extends u5{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new oye(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??lee,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],o=i[1]-t[1];return r*r+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new h2(UC.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new h2(t?UC.BOXEND:UC.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new h2(UC.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new h2(UC.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new h2(UC.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class aye extends sye{constructor(e){e=e||{};const t=e.condition?e.condition:tye;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const o=i.rotatedExtentForGeometry(r),s=i.getResolutionForExtentInternal(o),a=i.getResolution()/s;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:Kx})}}const Zv={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class lye extends l5{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return uee(t)&&cee(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Rr.KEYDOWN){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==Zv.DOWN||r==Zv.LEFT||r==Zv.RIGHT||r==Zv.UP)){const s=e.map.getView(),a=s.getResolution()*this.pixelDelta_;let c=0,h=0;r==Zv.DOWN?h=-a:r==Zv.LEFT?c=-a:r==Zv.RIGHT?c=a:h=a;const m=[c,h];NP(m,s.getRotation()),V1e(s,m,this.duration_),i.preventDefault(),t=!0}}return!t}}class uye extends l5{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!eye(t)&&cee(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Rr.KEYDOWN||e.type==Rr.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const o=e.map,s=r==="+"?this.delta_:-this.delta_,a=o.getView();hU(a,s,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}const cye=40,Aye=300;class hye extends l5{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:J1e;this.condition_=e.onFocusOnly?tR(aee,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Rr.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let o=r.deltaY;switch(r.deltaMode){case WheelEvent.DOM_DELTA_LINE:o*=cye;break;case WheelEvent.DOM_DELTA_PAGE:o*=Aye;break}if(o===0)return!1;this.lastDelta_=o;const s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=s,!1;this.totalDelta_+=o;const c=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),c),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Pl(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),hU(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class dye extends u5{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=KE),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],o=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const c=o-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=c}this.lastAngle_=o;const s=e.map,a=s.getView();a.getConstraints().rotation!==lU&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(dU(this.targetPointers))),this.rotating_&&(s.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class fye extends u5{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=KE),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],o=i.clientX-r.clientX,s=i.clientY-r.clientY,a=Math.sqrt(o*o+s*s);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const c=e.map,h=c.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel(dU(this.targetPointers))),c.render(),h.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function pye(n){n=n||{};const e=new _g,t=new $1e(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new rye),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new H1e({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new iye({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new dye),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new fye({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new lye),e.push(new uye({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new hye({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new aye({duration:n.zoomDuration})),e}const sa={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Aee extends dm{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[sa.OPACITY]=e.opacity!==void 0?e.opacity:1,Rs(typeof t[sa.OPACITY]=="number","Layer opacity must be a number"),t[sa.VISIBLE]=e.visible!==void 0?e.visible:!0,t[sa.Z_INDEX]=e.zIndex,t[sa.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[sa.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[sa.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[sa.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=Pl(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return zr()}getLayerStatesArray(e){return zr()}getExtent(){return this.get(sa.EXTENT)}getMaxResolution(){return this.get(sa.MAX_RESOLUTION)}getMinResolution(){return this.get(sa.MIN_RESOLUTION)}getMinZoom(){return this.get(sa.MIN_ZOOM)}getMaxZoom(){return this.get(sa.MAX_ZOOM)}getOpacity(){return this.get(sa.OPACITY)}getSourceState(){return zr()}getVisible(){return this.get(sa.VISIBLE)}getZIndex(){return this.get(sa.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(sa.EXTENT,e)}setMaxResolution(e){this.set(sa.MAX_RESOLUTION,e)}setMinResolution(e){this.set(sa.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(sa.MAX_ZOOM,e)}setMinZoom(e){this.set(sa.MIN_ZOOM,e)}setOpacity(e){Rs(typeof e=="number","Layer opacity must be a number"),this.set(sa.OPACITY,e)}setVisible(e){this.set(sa.VISIBLE,e)}setZIndex(e){this.set(sa.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class Oy extends hm{constructor(e,t){super(e),this.layer=t}}const ZO={LAYERS:"layers"};class Lx extends Aee{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(ZO.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new _g(i.slice(),{unique:!0}):Rs(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new _g(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Ra),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(is(e,hd.ADD,this.handleLayersAdd_,this),is(e,hd.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Ra);t5(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const o=t[i];this.registerLayerListeners_(o),this.dispatchEvent(new Oy("addlayer",o))}this.changed()}registerLayerListeners_(e){const t=[is(e,cx.PROPERTYCHANGE,this.handleLayerChange_,this),is(e,Rr.CHANGE,this.handleLayerChange_,this)];e instanceof Lx&&t.push(is(e,"addlayer",this.handleLayerGroupAdd_,this),is(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Vr(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Oy("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Oy("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Oy("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=Vr(t);this.listenerKeys_[i].forEach(Ra),delete this.listenerKeys_[i],this.dispatchEvent(new Oy("removelayer",t)),this.changed()}getLayers(){return this.get(ZO.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,o=i.length;r<o;++r)this.dispatchEvent(new Oy("removelayer",i[r]))}this.set(ZO.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(s){s.getLayerStatesArray(t)});const r=this.getLayerState();let o=r.zIndex;!e&&r.zIndex===void 0&&(o=0);for(let s=i,a=t.length;s<a;s++){const c=t[s];c.opacity*=r.opacity,c.visible=c.visible&&r.visible,c.maxResolution=Math.min(c.maxResolution,r.maxResolution),c.minResolution=Math.max(c.minResolution,r.minResolution),c.minZoom=Math.max(c.minZoom,r.minZoom),c.maxZoom=Math.min(c.maxZoom,r.maxZoom),r.extent!==void 0&&(c.extent!==void 0?c.extent=rm(c.extent,r.extent):c.extent=r.extent),c.zIndex===void 0&&(c.zIndex=o)}return t}getSourceState(){return"ready"}}const sp={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class Fx extends Aee{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(sa.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(sa.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Ra(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=is(e,Rr.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof Zp?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;if(t.layerStatesArray){if(r=t.layerStatesArray.find(s=>s.layer===this),!r)return!1}else r=this.getLayerState();const o=this.getExtent();return fU(r,t.viewState)&&(!o||Zl(o,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const i=e instanceof Zp?e.getViewStateAndExtent():e;let r=t(i);return Array.isArray(r)||(r=[r]),r}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(sa.MAP,e)}getMapInternal(){return this.get(sa.MAP)}setMap(e){this.mapPrecomposeKey_&&(Ra(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Ra(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=is(e,sp.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=is(this,Rr.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,i=this.getLayerState(!1);Rs(!t.some(r=>r.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(i)}setSource(e){this.set(sa.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function fU(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}function hee(n,e,t=0,i=n.length-1,r=mye){for(;i>t;){if(i-t>600){const c=i-t+1,h=e-t+1,m=Math.log(c),y=.5*Math.exp(2*m/3),M=.5*Math.sqrt(m*y*(c-y)/c)*(h-c/2<0?-1:1),x=Math.max(t,Math.floor(e-h*y/c+M)),k=Math.min(i,Math.floor(e+(c-h)*y/c+M));hee(n,e,x,k,r)}const o=n[e];let s=t,a=i;for(d2(n,t,e),r(n[i],o)>0&&d2(n,t,i);s<a;){for(d2(n,s,a),s++,a--;r(n[s],o)<0;)s++;for(;r(n[a],o)>0;)a--}r(n[t],o)===0?d2(n,t,a):(a++,d2(n,a,i)),a<=e&&(t=a+1),e<=a&&(i=a-1)}}function d2(n,e,t){const i=n[e];n[e]=n[t],n[t]=i}function mye(n,e){return n<e?-1:n>e?1:0}let dee=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!tM(e,t))return i;const r=this.toBBox,o=[];for(;t;){for(let s=0;s<t.children.length;s++){const a=t.children[s],c=t.leaf?r(a):a;tM(e,c)&&(t.leaf?i.push(a):JO(e,c)?this._all(a,i):o.push(a))}t=o.pop()}return i}collides(e){let t=this.data;if(!tM(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const o=t.children[r],s=t.leaf?this.toBBox(o):o;if(tM(e,s)){if(t.leaf||JO(e,s))return!0;i.push(o)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=b_([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),o=[],s=[];let a,c,h;for(;i||o.length;){if(i||(i=o.pop(),c=o[o.length-1],a=s.pop(),h=!0),i.leaf){const m=gye(e,i.children,t);if(m!==-1)return i.children.splice(m,1),o.push(i),this._condense(o),this}!h&&!i.leaf&&JO(i,r)?(o.push(i),s.push(a),a=0,c=i,i=i.children[0]):c?(a++,i=c.children[a],h=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const o=i-t+1;let s=this._maxEntries,a;if(o<=s)return a=b_(e.slice(t,i+1)),KC(a,this.toBBox),a;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),a=b_([]),a.leaf=!1,a.height=r;const c=Math.ceil(o/s),h=c*Math.ceil(Math.sqrt(s));aj(e,t,i,h,this.compareMinX);for(let m=t;m<=i;m+=h){const y=Math.min(m+h-1,i);aj(e,m,y,c,this.compareMinY);for(let M=m;M<=y;M+=c){const x=Math.min(M+c-1,y);a.children.push(this._build(e,M,x,r-1))}}return KC(a,this.toBBox),a}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let o=1/0,s=1/0,a;for(let c=0;c<t.children.length;c++){const h=t.children[c],m=XO(h),y=bye(e,h)-m;y<s?(s=y,o=m<o?m:o,a=h):y===s&&m<o&&(o=m,a=h)}t=a||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),o=[],s=this._chooseSubtree(r,this.data,t,o);for(s.children.push(e),j2(s,r);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(r,o,t)}_split(e,t){const i=e[t],r=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,r);const s=this._chooseSplitIndex(i,o,r),a=b_(i.children.splice(s,i.children.length-s));a.height=i.height,a.leaf=i.leaf,KC(i,this.toBBox),KC(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,t){this.data=b_([e,t]),this.data.height=e.height+1,this.data.leaf=!1,KC(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,o=1/0,s=1/0;for(let a=t;a<=i-t;a++){const c=z2(e,0,a,this.toBBox),h=z2(e,a,i,this.toBBox),m=Cye(c,h),y=XO(c)+XO(h);m<o?(o=m,r=a,s=y<s?y:s):m===o&&y<s&&(s=y,r=a)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:yye,o=e.leaf?this.compareMinY:vye,s=this._allDistMargin(e,t,i,r),a=this._allDistMargin(e,t,i,o);s<a&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const o=this.toBBox,s=z2(e,0,t,o),a=z2(e,i-t,i,o);let c=eM(s)+eM(a);for(let h=t;h<i-t;h++){const m=e.children[h];j2(s,e.leaf?o(m):m),c+=eM(s)}for(let h=i-t-1;h>=t;h--){const m=e.children[h];j2(a,e.leaf?o(m):m),c+=eM(a)}return c}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)j2(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():KC(e[t],this.toBBox)}};function gye(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function KC(n,e){z2(n,0,n.children.length,e,n)}function z2(n,e,t,i,r){r||(r=b_(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let o=e;o<t;o++){const s=n.children[o];j2(r,n.leaf?i(s):s)}return r}function j2(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function yye(n,e){return n.minX-e.minX}function vye(n,e){return n.minY-e.minY}function XO(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function eM(n){return n.maxX-n.minX+(n.maxY-n.minY)}function bye(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function Cye(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),o=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,o-i)}function JO(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function tM(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function b_(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function aj(n,e,t,i,r){const o=[e,t];for(;o.length;){if(t=o.pop(),e=o.pop(),t-e<=i)continue;const s=e+Math.ceil((t-e)/i/2)*i;hee(n,s,e,t,r),o.push(e,s,s,t)}}const pU=[NaN,NaN,NaN,0];let eB;function _ye(){return eB||(eB=Ul(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),eB}const xye=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Mye=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,wye=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Sye=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function nM(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function d3(n){throw new Error('failed to parse "'+n+'" as color')}function fee(n){if(n.toLowerCase().startsWith("rgb")){const o=n.match(Mye)||n.match(xye)||n.match(wye);if(o){const s=o[4],a=100/255;return[Pl(nM(o[1],a)+.5|0,0,255),Pl(nM(o[2],a)+.5|0,0,255),Pl(nM(o[3],a)+.5|0,0,255),s!==void 0?Pl(nM(s,100),0,1):1]}d3(n)}if(n.startsWith("#")){if(Sye.test(n)){const o=n.substring(1),s=o.length<=4?1:2,a=[0,0,0,255];for(let c=0,h=o.length;c<h;c+=s){let m=parseInt(o.substring(c,c+s),16);s===1&&(m+=m<<4),a[c/s]=m}return a[3]=a[3]/255,a}d3(n)}const e=_ye();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&d3(n));const i=e.fillStyle;if(i.startsWith("#")||i.startsWith("rgba"))return fee(i);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const r=Array.from(e.getImageData(0,0,1,1).data);return r[3]=LE(r[3]/255,3),r}function Eye(n){return typeof n=="string"?n:gU(n)}const Oye=1024,f2={};let tB=0;function Bye(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function nB(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function iB(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function rB(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function oB(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function lj(n){const e=rB(n[0]),t=rB(n[1]),i=rB(n[2]),r=oB(e*.222488403+t*.716873169+i*.06060791),o=500*(oB(e*.452247074+t*.399439023+i*.148375274)-r),s=200*(r-oB(e*.016863605+t*.117638439+i*.865350722)),a=Math.atan2(s,o)*(180/Math.PI);return[116*r-16,Math.sqrt(o*o+s*s),a<0?a+360:a,n[3]]}function Iye(n){const e=(n[0]+16)/116,t=n[1],i=n[2]*Math.PI/180,r=iB(e),o=iB(e+t/500*Math.cos(i)),s=iB(e-t/200*Math.sin(i)),a=nB(o*3.021973625-r*1.617392459-s*.404875592),c=nB(o*-.943766287+r*1.916279586+s*.027607165),h=nB(o*.069407491-r*.22898585+s*1.159737864);return[Pl(a+.5|0,0,255),Pl(c+.5|0,0,255),Pl(h+.5|0,0,255),n[3]]}function mU(n){if(n==="none")return pU;if(f2.hasOwnProperty(n))return f2[n];if(tB>=Oye){let t=0;for(const i in f2)(t++&3)===0&&(delete f2[i],--tB)}const e=fee(n);e.length!==4&&d3(n);for(const t of e)isNaN(t)&&d3(n);return f2[n]=e,++tB,e}function dx(n){return Array.isArray(n)?n:mU(n)}function gU(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const r=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+i+","+r+")"}function uj(n){return n[0]>0&&n[1]>0}function kye(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function WA(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}let Jb=0;const kh=1<<Jb++,ns=1<<Jb++,dd=1<<Jb++,Xp=1<<Jb++,Fb=1<<Jb++,N2=1<<Jb++,iM=Math.pow(2,Jb)-1,yU={[kh]:"boolean",[ns]:"number",[dd]:"string",[Xp]:"color",[Fb]:"number[]",[N2]:"size"},Tye=Object.keys(yU).map(Number).sort(Pg);function Rye(n){return n in yU}function G2(n){const e=[];for(const t of Tye)W2(n,t)&&e.push(yU[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function W2(n,e){return(n&e)===e}function vy(n,e){return n===e}class uc{constructor(e,t){if(!Rye(e))throw new Error(`literal expressions must have a specific type, got ${G2(e)}`);this.type=e,this.value=t}}class Dye{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function pee(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function dA(n,e,t){switch(typeof n){case"boolean":{if(vy(e,dd))return new uc(dd,n?"true":"false");if(!W2(e,kh))throw new Error(`got a boolean, but expected ${G2(e)}`);return new uc(kh,n)}case"number":{if(vy(e,N2))return new uc(N2,WA(n));if(vy(e,kh))return new uc(kh,!!n);if(vy(e,dd))return new uc(dd,n.toString());if(!W2(e,ns))throw new Error(`got a number, but expected ${G2(e)}`);return new uc(ns,n)}case"string":{if(vy(e,Xp))return new uc(Xp,mU(n));if(vy(e,kh))return new uc(kh,!!n);if(!W2(e,dd))throw new Error(`got a string, but expected ${G2(e)}`);return new uc(dd,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return Qye(n,e,t);for(const i of n)if(typeof i!="number")throw new Error("expected an array of numbers");if(vy(e,N2)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new uc(N2,n)}if(vy(e,Xp)){if(n.length===3)return new uc(Xp,[...n,1]);if(n.length===4)return new uc(Xp,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!W2(e,Fb))throw new Error(`got an array of numbers, but expected ${G2(e)}`);return new uc(Fb,n)}const yn={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},Pye={[yn.Get]:Lr(yo(1,1/0),cj),[yn.Var]:Lr(yo(1,1),Uye),[yn.Has]:Lr(yo(1,1/0),cj),[yn.Id]:Lr(Kye,LC),[yn.Concat]:Lr(yo(2,1/0),Fs(dd)),[yn.GeometryType]:Lr(Lye,LC),[yn.LineMetric]:Lr(LC),[yn.Resolution]:Lr(sB,LC),[yn.Zoom]:Lr(sB,LC),[yn.Time]:Lr(sB,LC),[yn.Any]:Lr(yo(2,1/0),Fs(kh)),[yn.All]:Lr(yo(2,1/0),Fs(kh)),[yn.Not]:Lr(yo(1,1),Fs(kh)),[yn.Equal]:Lr(yo(2,2),Fs(iM)),[yn.NotEqual]:Lr(yo(2,2),Fs(iM)),[yn.GreaterThan]:Lr(yo(2,2),Fs(ns)),[yn.GreaterThanOrEqualTo]:Lr(yo(2,2),Fs(ns)),[yn.LessThan]:Lr(yo(2,2),Fs(ns)),[yn.LessThanOrEqualTo]:Lr(yo(2,2),Fs(ns)),[yn.Multiply]:Lr(yo(2,1/0),Aj),[yn.Coalesce]:Lr(yo(2,1/0),Aj),[yn.Divide]:Lr(yo(2,2),Fs(ns)),[yn.Add]:Lr(yo(2,1/0),Fs(ns)),[yn.Subtract]:Lr(yo(2,2),Fs(ns)),[yn.Clamp]:Lr(yo(3,3),Fs(ns)),[yn.Mod]:Lr(yo(2,2),Fs(ns)),[yn.Pow]:Lr(yo(2,2),Fs(ns)),[yn.Abs]:Lr(yo(1,1),Fs(ns)),[yn.Floor]:Lr(yo(1,1),Fs(ns)),[yn.Ceil]:Lr(yo(1,1),Fs(ns)),[yn.Round]:Lr(yo(1,1),Fs(ns)),[yn.Sin]:Lr(yo(1,1),Fs(ns)),[yn.Cos]:Lr(yo(1,1),Fs(ns)),[yn.Atan]:Lr(yo(1,2),Fs(ns)),[yn.Sqrt]:Lr(yo(1,1),Fs(ns)),[yn.Match]:Lr(yo(4,1/0),hj,zye),[yn.Between]:Lr(yo(3,3),Fs(ns)),[yn.Interpolate]:Lr(yo(6,1/0),hj,jye),[yn.Case]:Lr(yo(3,1/0),Fye,Nye),[yn.In]:Lr(yo(2,2),Gye),[yn.Number]:Lr(yo(1,1/0),Fs(iM)),[yn.String]:Lr(yo(1,1/0),Fs(iM)),[yn.Array]:Lr(yo(1,1/0),Fs(ns)),[yn.Color]:Lr(yo(1,4),Fs(ns)),[yn.Band]:Lr(yo(1,3),Fs(ns)),[yn.Palette]:Lr(yo(2,2),Wye),[yn.ToString]:Lr(yo(1,1),Fs(kh|ns|dd|Xp))};function cj(n,e,t){const i=n.length-1,r=new Array(i);for(let o=0;o<i;++o){const s=n[o+1];switch(typeof s){case"number":{r[o]=new uc(ns,s);break}case"string":{r[o]=new uc(dd,s);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${s}`)}o===0&&t.properties.add(String(s))}return r}function Uye(n,e,t){const i=n[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return t.variables.add(i),[new uc(dd,i)]}function Kye(n,e,t){t.featureId=!0}function Lye(n,e,t){t.geometryType=!0}function sB(n,e,t){t.mapState=!0}function LC(n,e,t){const i=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function yo(n,e){return function(t,i,r){const o=t[0],s=t.length-1;if(n===e){if(s!==n){const a=n===1?"":"s";throw new Error(`expected ${n} argument${a} for ${o}, got ${s}`)}}else if(s<n||s>e){const a=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${a} arguments for ${o}, got ${s}`)}}}function Aj(n,e,t){const i=n.length-1,r=new Array(i);for(let o=0;o<i;++o){const s=dA(n[o+1],e,t);r[o]=s}return r}function Fs(n){return function(e,t,i){const r=e.length-1,o=new Array(r);for(let s=0;s<r;++s){const a=dA(e[s+1],n,i);o[s]=a}return o}}function Fye(n,e,t){const i=n[0],r=n.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${r} instead`)}function hj(n,e,t){const i=n[0],r=n.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${r} instead`)}function zye(n,e,t){const i=n.length-1,r=dd|ns|kh,o=dA(n[1],r,t),s=dA(n[n.length-1],e,t),a=new Array(i-2);for(let c=0;c<i-2;c+=2){try{const h=dA(n[c+2],o.type,t);a[c]=h}catch(h){throw new Error(`failed to parse argument ${c+1} of match expression: ${h.message}`)}try{const h=dA(n[c+3],s.type,t);a[c+1]=h}catch(h){throw new Error(`failed to parse argument ${c+2} of match expression: ${h.message}`)}}return[o,...a,s]}function jye(n,e,t){const i=n[1];let r;switch(i[0]){case"linear":r=1;break;case"exponential":const c=i[1];if(typeof c!="number"||c<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(c)} instead`);r=c;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const o=new uc(ns,r);let s;try{s=dA(n[2],ns,t)}catch(c){throw new Error(`failed to parse argument 1 in interpolate expression: ${c.message}`)}const a=new Array(n.length-3);for(let c=0;c<a.length;c+=2){try{const h=dA(n[c+3],ns,t);a[c]=h}catch(h){throw new Error(`failed to parse argument ${c+2} for interpolate expression: ${h.message}`)}try{const h=dA(n[c+4],e,t);a[c+1]=h}catch(h){throw new Error(`failed to parse argument ${c+3} for interpolate expression: ${h.message}`)}}return[o,s,...a]}function Nye(n,e,t){const i=dA(n[n.length-1],e,t),r=new Array(n.length-1);for(let o=0;o<r.length-1;o+=2){try{const s=dA(n[o+1],kh,t);r[o]=s}catch(s){throw new Error(`failed to parse argument ${o} of case expression: ${s.message}`)}try{const s=dA(n[o+2],i.type,t);r[o+1]=s}catch(s){throw new Error(`failed to parse argument ${o+1} of case expression: ${s.message}`)}}return r[r.length-1]=i,r}function Gye(n,e,t){let i=n[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],r=dd}else r=ns;const o=new Array(i.length);for(let a=0;a<o.length;a++)try{const c=dA(i[a],r,t);o[a]=c}catch(c){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${c.message}`)}return[dA(n[1],r,t),...o]}function Wye(n,e,t){let i;try{i=dA(n[1],ns,t)}catch(s){throw new Error(`failed to parse first argument in palette expression: ${s.message}`)}const r=n[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const o=new Array(r.length);for(let s=0;s<o.length;s++){let a;try{a=dA(r[s],Xp,t)}catch(c){throw new Error(`failed to parse color at index ${s} in palette expression: ${c.message}`)}if(!(a instanceof uc))throw new Error(`the palette color at index ${s} must be a literal value`);o[s]=a}return[i,...o]}function Lr(...n){return function(e,t,i){const r=e[0];let o;for(let s=0;s<n.length;s++){const a=n[s](e,t,i);if(s==n.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");o=a}}return new Dye(t,r,...o)}}function Qye(n,e,t){const i=n[0],r=Pye[i];if(!r)throw new Error(`unknown operator: ${i}`);return r(n,e,t)}function mee(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return mee(n.getGeometries()[0]);default:return""}}function gee(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function y1(n,e,t){const i=dA(n,e,t);return om(i)}function om(n,e){if(n instanceof uc){if(n.type===Xp&&typeof n.value=="string"){const i=mU(n.value);return function(){return i}}return function(){return n.value}}const t=n.operator;switch(t){case yn.Number:case yn.String:case yn.Coalesce:return qye(n);case yn.Get:case yn.Var:case yn.Has:return Yye(n);case yn.Id:return i=>i.featureId;case yn.GeometryType:return i=>i.geometryType;case yn.Concat:{const i=n.args.map(r=>om(r));return r=>"".concat(...i.map(o=>o(r).toString()))}case yn.Resolution:return i=>i.resolution;case yn.Any:case yn.All:case yn.Between:case yn.In:case yn.Not:return Vye(n);case yn.Equal:case yn.NotEqual:case yn.LessThan:case yn.LessThanOrEqualTo:case yn.GreaterThan:case yn.GreaterThanOrEqualTo:return $ye(n);case yn.Multiply:case yn.Divide:case yn.Add:case yn.Subtract:case yn.Clamp:case yn.Mod:case yn.Pow:case yn.Abs:case yn.Floor:case yn.Ceil:case yn.Round:case yn.Sin:case yn.Cos:case yn.Atan:case yn.Sqrt:return Hye(n);case yn.Case:return Zye(n);case yn.Match:return Xye(n);case yn.Interpolate:return Jye(n);case yn.ToString:return eve(n);default:throw new Error(`Unsupported operator ${t}`)}}function qye(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=om(n.args[o]);switch(t){case yn.Coalesce:return o=>{for(let s=0;s<i;++s){const a=r[s](o);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case yn.Number:case yn.String:return o=>{for(let s=0;s<i;++s){const a=r[s](o);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function Yye(n,e){const i=n.args[0].value;switch(n.operator){case yn.Get:return r=>{const o=n.args;let s=r.properties[i];for(let a=1,c=o.length;a<c;++a){const m=o[a].value;s=s[m]}return s};case yn.Var:return r=>r.variables[i];case yn.Has:return r=>{const o=n.args;if(!(i in r.properties))return!1;let s=r.properties[i];for(let a=1,c=o.length;a<c;++a){const m=o[a].value;if(!s||!Object.hasOwn(s,m))return!1;s=s[m]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function $ye(n,e){const t=n.operator,i=om(n.args[0]),r=om(n.args[1]);switch(t){case yn.Equal:return o=>i(o)===r(o);case yn.NotEqual:return o=>i(o)!==r(o);case yn.LessThan:return o=>i(o)<r(o);case yn.LessThanOrEqualTo:return o=>i(o)<=r(o);case yn.GreaterThan:return o=>i(o)>r(o);case yn.GreaterThanOrEqualTo:return o=>i(o)>=r(o);default:throw new Error(`Unsupported comparison operator ${t}`)}}function Vye(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=om(n.args[o]);switch(t){case yn.Any:return o=>{for(let s=0;s<i;++s)if(r[s](o))return!0;return!1};case yn.All:return o=>{for(let s=0;s<i;++s)if(!r[s](o))return!1;return!0};case yn.Between:return o=>{const s=r[0](o),a=r[1](o),c=r[2](o);return s>=a&&s<=c};case yn.In:return o=>{const s=r[0](o);for(let a=1;a<i;++a)if(s===r[a](o))return!0;return!1};case yn.Not:return o=>!r[0](o);default:throw new Error(`Unsupported logical operator ${t}`)}}function Hye(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=om(n.args[o]);switch(t){case yn.Multiply:return o=>{let s=1;for(let a=0;a<i;++a)s*=r[a](o);return s};case yn.Divide:return o=>r[0](o)/r[1](o);case yn.Add:return o=>{let s=0;for(let a=0;a<i;++a)s+=r[a](o);return s};case yn.Subtract:return o=>r[0](o)-r[1](o);case yn.Clamp:return o=>{const s=r[0](o),a=r[1](o);if(s<a)return a;const c=r[2](o);return s>c?c:s};case yn.Mod:return o=>r[0](o)%r[1](o);case yn.Pow:return o=>Math.pow(r[0](o),r[1](o));case yn.Abs:return o=>Math.abs(r[0](o));case yn.Floor:return o=>Math.floor(r[0](o));case yn.Ceil:return o=>Math.ceil(r[0](o));case yn.Round:return o=>Math.round(r[0](o));case yn.Sin:return o=>Math.sin(r[0](o));case yn.Cos:return o=>Math.cos(r[0](o));case yn.Atan:return i===2?o=>Math.atan2(r[0](o),r[1](o)):o=>Math.atan(r[0](o));case yn.Sqrt:return o=>Math.sqrt(r[0](o));default:throw new Error(`Unsupported numeric operator ${t}`)}}function Zye(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=om(n.args[r]);return r=>{for(let o=0;o<t-1;o+=2)if(i[o](r))return i[o+1](r);return i[t-1](r)}}function Xye(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=om(n.args[r]);return r=>{const o=i[0](r);for(let s=1;s<t-1;s+=2)if(o===i[s](r))return i[s+1](r);return i[t-1](r)}}function Jye(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=om(n.args[r]);return r=>{const o=i[0](r),s=i[1](r);let a,c;for(let h=2;h<t;h+=2){const m=i[h](r);let y=i[h+1](r);const M=Array.isArray(y);if(M&&(y=Bye(y)),m>=s)return h===2?y:M?tve(o,s,a,c,m,y):Q2(o,s,a,c,m,y);a=m,c=y}return c}}function eve(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=om(n.args[o]);switch(t){case yn.ToString:return o=>{const s=r[0](o);return n.args[0].type===Xp?gU(s):s.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Q2(n,e,t,i,r,o){const s=r-t;if(s===0)return i;const a=e-t,c=n===1?a/s:(Math.pow(n,a)-1)/(Math.pow(n,s)-1);return i+c*(o-i)}function tve(n,e,t,i,r,o){if(r-t===0)return i;const a=lj(i),c=lj(o);let h=c[2]-a[2];h>180?h-=360:h<-180&&(h+=360);const m=[Q2(n,e,t,a[0],r,c[0]),Q2(n,e,t,a[1],r,c[1]),a[2]+Q2(n,e,t,0,r,h),Q2(n,e,t,i[3],r,o[3])];return Iye(m)}const Fi={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class vU extends n5{constructor(e,t,i,r){super(),this.extent=e,this.pixelRatio_=i,this.resolution=t,this.state=typeof r=="function"?Fi.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(Rr.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Fi.IDLE&&this.loader){this.state=Fi.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;Ax(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||d0e&&i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=Fi.LOADED}).catch(i=>{this.state=Fi.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function nve(n,e,t){const i=n;let r=!0,o=!1,s=!1;const a=[Hw(i,Rr.LOAD,function(){s=!0,o||e()})];return i.src&&SJ?(o=!0,i.decode().then(function(){r&&e()}).catch(function(c){r&&(s?e():t())})):a.push(Hw(i,Rr.ERROR,t)),function(){r=!1,a.forEach(Ra)}}function ive(n,e){return new Promise((t,i)=>{function r(){s(),t(n)}function o(){s(),i(new Error("Image load error"))}function s(){n.removeEventListener("load",r),n.removeEventListener("error",o)}n.addEventListener("load",r),n.addEventListener("error",o)})}function rve(n,e){return e&&(n.src=e),n.src&&SJ?new Promise((t,i)=>n.decode().then(()=>t(n)).catch(r=>n.complete&&n.width?t(n):i(r))):ive(n)}class ove{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];(e++&3)===0&&!i.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,i){const r=aB(e,t,i);return r in this.cache_?this.cache_[r]:null}getPattern(e,t,i){const r=aB(e,t,i);return r in this.patternCache_?this.patternCache_[r]:null}set(e,t,i,r,o){const s=aB(e,t,i),a=s in this.cache_;this.cache_[s]=r,o&&(r.getImageState()===Fi.IDLE&&r.load(),r.getImageState()===Fi.LOADING?r.ready().then(()=>{this.patternCache_[s]=iS().createPattern(r.getImage(1),"repeat")}):this.patternCache_[s]=iS().createPattern(r.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function aB(n,e,t){const i=t?dx(t):"null";return e+":"+n+":"+i}const ap=new ove;let p2=null;class yee extends n5{constructor(e,t,i,r,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=o,this.imageState_=r===void 0?Fi.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Fi.LOADED){p2||(p2=Ul(1,1,void 0,{willReadFrequently:!0})),p2.drawImage(this.image_,0,0);try{p2.getImageData(0,0,1,1),this.tainted_=!1}catch{p2=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Rr.CHANGE)}handleImageError_(){this.imageState_=Fi.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Fi.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=Ul(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Fi.IDLE){this.image_||this.initializeImage_(),this.imageState_=Fi.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&rve(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Fi.LOADED)return;const t=this.image_,i=Ul(Math.ceil(t.width*e),Math.ceil(t.height*e)),r=i.canvas;i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=Eye(this.color_),i.fillRect(0,0,r.width/e,r.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Fi.LOADED||this.imageState_===Fi.ERROR)e();else{const t=()=>{(this.imageState_===Fi.LOADED||this.imageState_===Fi.ERROR)&&(this.removeEventListener(Rr.CHANGE,t),e())};this.addEventListener(Rr.CHANGE,t)}})),this.ready_}}function bU(n,e,t,i,r,o){let s=e===void 0?void 0:ap.get(e,t,r);return s||(s=new yee(n,n&&"src"in n?n.src||void 0:e,t,i,r),ap.set(e,t,r,s,o)),o&&s&&!ap.getPattern(e,t,r)&&ap.set(e,t,r,s,o),s}function wg(n){return n?Array.isArray(n)?gU(n):typeof n=="object"&&"src"in n?sve(n):n:null}function sve(n){if(!n.offset||!n.size)return ap.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=ap.getPattern(e,void 0,n.color);if(t)return t;const i=ap.get(n.src,"anonymous",null);if(i.getImageState()!==Fi.LOADED)return null;const r=Ul(n.size[0],n.size[1]);return r.drawImage(i.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),bU(r.canvas,e,void 0,Fi.LOADED,n.color,!0),ap.getPattern(e,void 0,n.color)}const vee="10px sans-serif",fd="#000",fx="round",s1=[],a1=0,px="round",n4=10,i4="#000",r4="center",rS="middle",fb=[0,0,0,0],o4=1,ob=new dm;let m2=null,dj;const nR={},ave=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function lve(n,e,t){return`${n} ${e} 16px "${t}"`}const uve=(function(){let e,t;async function i(o){await t.ready;const s=await t.load(o);if(s.length===0)return!1;const a=eR(o),c=a.families[0].toLowerCase(),h=a.weight;return s.some(m=>{const y=m.family.replace(/^['"]|['"]$/g,"").toLowerCase(),M=J9[m.weight]||m.weight;return y===c&&m.style===a.style&&M==h})}async function r(){await t.ready;let o=!0;const s=ob.getProperties(),a=Object.keys(s).filter(c=>s[c]<100);for(let c=a.length-1;c>=0;--c){const h=a[c];let m=s[h];m<100&&(await i(h)?(t5(nR),ob.set(h,100)):(m+=10,ob.set(h,m,!0),m<100&&(o=!1)))}e=void 0,o||(e=setTimeout(r,100))}return async function(o){t||(t=FP?self.fonts:document.fonts);const s=eR(o);if(!s)return;const a=s.families;let c=!1;for(const h of a){if(ave.has(h))continue;const m=lve(s.style,s.weight,h);ob.get(m)===void 0&&(ob.set(m,0,!0),c=!0)}c&&(clearTimeout(e),e=setTimeout(r,100))}})(),cve=(function(){let n;return function(e){let t=nR[e];if(t==null){if(FP){const i=eR(e),r=bee(e,"g");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);nR[e]=t}return t}})();function bee(n,e){return m2||(m2=Ul(1,1)),n!=dj&&(m2.font=n,dj=m2.font),m2.measureText(e)}function Cee(n,e){return bee(n,e).width}function fj(n,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((r,o)=>Math.max(r,Cee(n,o)),0);return t[e]=i,i}function Ave(n,e){const t=[],i=[],r=[];let o=0,s=0,a=0,c=0;for(let h=0,m=e.length;h<=m;h+=2){const y=e[h];if(y===`
`||h===m){o=Math.max(o,s),r.push(s),s=0,a+=c,c=0;continue}const M=e[h+1]||n.font,x=Cee(M,y);t.push(x),s+=x;const k=cve(M);i.push(k),c=Math.max(c,k)}return{width:o,height:a,widths:t,heights:i,lineWidths:r}}function hve(n,e,t,i,r,o,s,a,c,h,m){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=y=>y.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),i.contextInstructions?(n.translate(c,h),n.scale(m[0],m[1]),dve(i,n)):m[0]<0||m[1]<0?(n.translate(c,h),n.scale(m[0],m[1]),n.drawImage(i,r,o,s,a,0,0,s,a)):n.drawImage(i,r,o,s,a,c,h,s*m[0],a*m[1]),n.restore()}function dve(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class HE{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=WA(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new HE({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return zr()}getImage(e){return zr()}getHitDetectionImage(){return zr()}getPixelRatio(e){return 1}getImageState(){return zr()}getImageSize(){return zr()}getOrigin(){return zr()}getSize(){return zr()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=WA(e)}listenImageChange(e){zr()}load(){zr()}unlistenImageChange(e){zr()}ready(){return Promise.resolve()}}class ZE extends HE{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Fi.LOADING:Fi.LOADED,this.imageState_===Fi.LOADING&&this.ready().then(()=>this.imageState_=Fi.LOADED),this.render()}clone(){const e=this.getScale(),t=new ZE({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let r=ap.get(i,null,null)?.getImage(1);if(!r){const o=this.renderOptions_,s=Math.ceil(o.size*e),a=Ul(s,s);this.draw_(o,a,e),r=a.canvas,ap.set(i,null,null,new yee(r,void 0,null,Fi.LOADED,null))}return r}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius,o=this.radius2_===void 0?r:this.radius2_;if(r<o){const Y=r;r=o,o=Y}const s=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/s,c=o*Math.sin(a),h=Math.sqrt(o*o-c*c),m=r-h,y=Math.sqrt(c*c+m*m),M=y/c;if(e==="miter"&&M<=i)return M*t;const x=t/2/M,k=t/2*(m/y),F=Math.sqrt((r+x)*(r+x)+k*k)-r;if(this.radius2_===void 0||e==="bevel")return F*2;const j=r*Math.sin(a),q=Math.sqrt(r*r-j*j),V=o-q,G=Math.sqrt(j*j+V*V)/j;if(G<=i){const Y=G*t/2-o-r;return 2*Math.max(F,Y)}return F*2}createRenderOptions(){let e=fx,t=px,i=0,r=null,o=0,s,a=0;this.stroke_&&(s=wg(this.stroke_.getColor()??i4),a=this.stroke_.getWidth()??o4,r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??px,e=this.stroke_.getLineCap()??fx,i=this.stroke_.getMiterLimit()??n4);const c=this.calculateLineJoinSize_(t,a,i),h=Math.max(this.radius,this.radius2_||0),m=Math.ceil(2*h+c);return{strokeStyle:s,strokeWidth:a,size:m,lineCap:e,lineDash:r,lineDashOffset:o,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=fd),t.fillStyle=wg(r),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),r=0;typeof i=="string"&&(i=dx(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0&&(t=Ul(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const o=this.angle_-Math.PI/2,s=2*Math.PI/t;for(let a=0;a<t;a++){const c=o+a*s,h=a%2===0?i:r;e.lineTo(h*Math.cos(c),h*Math.sin(c))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=fd,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class c5 extends ZE{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new c5({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class n1{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new n1({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=bU(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===Fi.IDLE&&t.load(),t.getImageState()===Fi.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Vr(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:dx(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function pj(n,e,t,i){return t!==void 0&&i!==void 0?[t/n,i/e]:t!==void 0?t/n:i!==void 0?i/e:1}class mx extends HE{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,o=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:o,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const s=e.img!==void 0?e.img:null;let a=e.src;Rs(!(a!==void 0&&s),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&s&&(a=s.src||Vr(s)),Rs(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Rs(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let c;if(e.src!==void 0?c=Fi.IDLE:s!==void 0&&("complete"in s?s.complete?c=s.src?Fi.LOADED:Fi.IDLE:c=Fi.LOADING:c=Fi.LOADED),this.color_=e.color!==void 0?dx(e.color):null,this.iconImage_=bU(s,a,this.crossOrigin_,c,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let h,m;if(e.size)[h,m]=e.size;else{const y=this.getImage(1);if(y.width&&y.height)h=y.width,m=y.height;else if(y instanceof HTMLImageElement){this.initialOptions_=e;const M=()=>{if(this.unlistenImageChange(M),!this.initialOptions_)return;const x=this.iconImage_.getSize();this.setScale(pj(x[0],x[1],e.width,e.height))};this.listenImageChange(M);return}}h!==void 0&&this.setScale(pj(h,m,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new mx({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Fi.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Fi.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Rr.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Rr.CHANGE,e)}ready(){return this.iconImage_.ready()}}class Fy{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Fy({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class df{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=mj,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new df({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=mj,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function fve(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(Rs(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let lB=null;function _ee(n,e){if(!lB){const t=new n1({color:"rgba(255,255,255,0.4)"}),i=new Fy({color:"#3399CC",width:1.25});lB=[new df({image:new c5({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return lB}function mj(n){return n.getGeometry()}const pve="#333";let xee=class Mee{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=WA(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new n1({color:pve}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Mee({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=WA(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}};function mve(n){return!0}function gve(n){const e=pee(),t=yve(n,e),i=gee();return function(r,o){if(i.properties=r.getPropertiesInternal(),i.resolution=o,e.featureId){const s=r.getId();s!==void 0?i.featureId=s:i.featureId=null}return e.geometryType&&(i.geometryType=mee(r.getGeometry())),t(i)}}function gj(n){const e=pee(),t=n.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=iR(n[s],e);const r=gee(),o=new Array(t);return function(s,a){if(r.properties=s.getPropertiesInternal(),r.resolution=a,e.featureId){const h=s.getId();h!==void 0?r.featureId=h:r.featureId=null}let c=0;for(let h=0;h<t;++h){const m=i[h](r);m&&(o[c]=m,c+=1)}return o.length=c,o}}function yve(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r){const o=n[r],s="filter"in o?y1(o.filter,kh,e):mve;let a;if(Array.isArray(o.style)){const c=o.style.length;a=new Array(c);for(let h=0;h<c;++h)a[h]=iR(o.style[h],e)}else a=[iR(o.style,e)];i[r]={filter:s,styles:a}}return function(r){const o=[];let s=!1;for(let a=0;a<t;++a){const c=i[a].filter;if(c(r)&&!(n[a].else&&s)){s=!0;for(const h of i[a].styles){const m=h(r);m&&o.push(m)}}}return o}}function iR(n,e){const t=s4(n,"",e),i=a4(n,"",e),r=vve(n,e),o=bve(n,e),s=yd(n,"z-index",e);if(!t&&!i&&!r&&!o&&!tv(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const a=new df;return function(c){let h=!0;if(t){const m=t(c);m&&(h=!1),a.setFill(m)}if(i){const m=i(c);m&&(h=!1),a.setStroke(m)}if(r){const m=r(c);m&&(h=!1),a.setText(m)}if(o){const m=o(c);m&&(h=!1),a.setImage(m)}return s&&a.setZIndex(s(c)),h?null:a}}function s4(n,e,t){let i;if(e+"fill-pattern-src"in n)i=Mve(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return o=>null;i=CU(n,e+"fill-color",t)}if(!i)return null;const r=new n1;return function(o){const s=i(o);return s===pU?null:(r.setColor(s),r)}}function a4(n,e,t){const i=yd(n,e+"stroke-width",t),r=CU(n,e+"stroke-color",t);if(!i&&!r)return null;const o=X0(n,e+"stroke-line-cap",t),s=X0(n,e+"stroke-line-join",t),a=wee(n,e+"stroke-line-dash",t),c=yd(n,e+"stroke-line-dash-offset",t),h=yd(n,e+"stroke-miter-limit",t),m=new Fy;return function(y){if(r){const M=r(y);if(M===pU)return null;m.setColor(M)}if(i&&m.setWidth(i(y)),o){const M=o(y);if(M!=="butt"&&M!=="round"&&M!=="square")throw new Error("Expected butt, round, or square line cap");m.setLineCap(M)}if(s){const M=s(y);if(M!=="bevel"&&M!=="round"&&M!=="miter")throw new Error("Expected bevel, round, or miter line join");m.setLineJoin(M)}return a&&m.setLineDash(a(y)),c&&m.setLineDashOffset(c(y)),h&&m.setMiterLimit(h(y)),m}}function vve(n,e){const t="text-",i=X0(n,t+"value",e);if(!i)return null;const r=s4(n,t,e),o=s4(n,t+"background-",e),s=a4(n,t,e),a=a4(n,t+"background-",e),c=X0(n,t+"font",e),h=yd(n,t+"max-angle",e),m=yd(n,t+"offset-x",e),y=yd(n,t+"offset-y",e),M=G_(n,t+"overflow",e),x=X0(n,t+"placement",e),k=yd(n,t+"repeat",e),P=XE(n,t+"scale",e),F=G_(n,t+"rotate-with-view",e),j=yd(n,t+"rotation",e),q=X0(n,t+"align",e),V=X0(n,t+"justify",e),H=X0(n,t+"baseline",e),G=G_(n,t+"keep-upright",e),Y=wee(n,t+"padding",e),z=JE(n,t+"declutter-mode"),se=new xee({declutterMode:z});return function(le){if(se.setText(i(le)),r&&se.setFill(r(le)),o&&se.setBackgroundFill(o(le)),s&&se.setStroke(s(le)),a&&se.setBackgroundStroke(a(le)),c&&se.setFont(c(le)),h&&se.setMaxAngle(h(le)),m&&se.setOffsetX(m(le)),y&&se.setOffsetY(y(le)),M&&se.setOverflow(M(le)),x){const me=x(le);if(me!=="point"&&me!=="line")throw new Error("Expected point or line for text-placement");se.setPlacement(me)}if(k&&se.setRepeat(k(le)),P&&se.setScale(P(le)),F&&se.setRotateWithView(F(le)),j&&se.setRotation(j(le)),q){const me=q(le);if(me!=="left"&&me!=="center"&&me!=="right"&&me!=="end"&&me!=="start")throw new Error("Expected left, right, center, start, or end for text-align");se.setTextAlign(me)}if(V){const me=V(le);if(me!=="left"&&me!=="right"&&me!=="center")throw new Error("Expected left, right, or center for text-justify");se.setJustify(me)}if(H){const me=H(le);if(me!=="bottom"&&me!=="top"&&me!=="middle"&&me!=="alphabetic"&&me!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");se.setTextBaseline(me)}return Y&&se.setPadding(Y(le)),G&&se.setKeepUpright(G(le)),se}}function bve(n,e){return"icon-src"in n?Cve(n,e):"shape-points"in n?_ve(n,e):"circle-radius"in n?xve(n,e):null}function Cve(n,e){const t="icon-",i=t+"src",r=See(n[i],i),o=oS(n,t+"anchor",e),s=XE(n,t+"scale",e),a=yd(n,t+"opacity",e),c=oS(n,t+"displacement",e),h=yd(n,t+"rotation",e),m=G_(n,t+"rotate-with-view",e),y=vj(n,t+"anchor-origin"),M=bj(n,t+"anchor-x-units"),x=bj(n,t+"anchor-y-units"),k=Ove(n,t+"color"),P=Sve(n,t+"cross-origin"),F=Eve(n,t+"offset"),j=vj(n,t+"offset-origin"),q=sS(n,t+"width"),V=sS(n,t+"height"),H=wve(n,t+"size"),G=JE(n,t+"declutter-mode"),Y=new mx({src:r,anchorOrigin:y,anchorXUnits:M,anchorYUnits:x,color:k,crossOrigin:P,offset:F,offsetOrigin:j,height:V,width:q,size:H,declutterMode:G});return function(z){return a&&Y.setOpacity(a(z)),c&&Y.setDisplacement(c(z)),h&&Y.setRotation(h(z)),m&&Y.setRotateWithView(m(z)),s&&Y.setScale(s(z)),o&&Y.setAnchor(o(z)),Y}}function _ve(n,e){const t="shape-",i=t+"points",r=t+"radius",o=rR(n[i],i),s=rR(n[r],r),a=s4(n,t,e),c=a4(n,t,e),h=XE(n,t+"scale",e),m=oS(n,t+"displacement",e),y=yd(n,t+"rotation",e),M=G_(n,t+"rotate-with-view",e),x=sS(n,t+"radius2"),k=sS(n,t+"angle"),P=JE(n,t+"declutter-mode"),F=new ZE({points:o,radius:s,radius2:x,angle:k,declutterMode:P});return function(j){return a&&F.setFill(a(j)),c&&F.setStroke(c(j)),m&&F.setDisplacement(m(j)),y&&F.setRotation(y(j)),M&&F.setRotateWithView(M(j)),h&&F.setScale(h(j)),F}}function xve(n,e){const t="circle-",i=s4(n,t,e),r=a4(n,t,e),o=yd(n,t+"radius",e),s=XE(n,t+"scale",e),a=oS(n,t+"displacement",e),c=yd(n,t+"rotation",e),h=G_(n,t+"rotate-with-view",e),m=JE(n,t+"declutter-mode"),y=new c5({radius:5,declutterMode:m});return function(M){return o&&y.setRadius(o(M)),i&&y.setFill(i(M)),r&&y.setStroke(r(M)),a&&y.setDisplacement(a(M)),c&&y.setRotation(c(M)),h&&y.setRotateWithView(h(M)),s&&y.setScale(s(M)),y}}function yd(n,e,t){if(!(e in n))return;const i=y1(n[e],ns,t);return function(r){return rR(i(r),e)}}function X0(n,e,t){if(!(e in n))return null;const i=y1(n[e],dd,t);return function(r){return See(i(r),e)}}function Mve(n,e,t){const i=X0(n,e+"pattern-src",t),r=yj(n,e+"pattern-offset",t),o=yj(n,e+"pattern-size",t),s=CU(n,e+"color",t);return function(a){return{src:i(a),offset:r&&r(a),size:o&&o(a),color:s&&s(a)}}}function G_(n,e,t){if(!(e in n))return null;const i=y1(n[e],kh,t);return function(r){const o=i(r);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${e}`);return o}}function CU(n,e,t){if(!(e in n))return null;const i=y1(n[e],Xp,t);return function(r){return Eee(i(r),e)}}function wee(n,e,t){if(!(e in n))return null;const i=y1(n[e],Fb,t);return function(r){return A5(i(r),e)}}function oS(n,e,t){if(!(e in n))return null;const i=y1(n[e],Fb,t);return function(r){const o=A5(i(r),e);if(o.length!==2)throw new Error(`Expected two numbers for ${e}`);return o}}function yj(n,e,t){if(!(e in n))return null;const i=y1(n[e],Fb,t);return function(r){return Oee(i(r),e)}}function XE(n,e,t){if(!(e in n))return null;const i=y1(n[e],Fb|ns,t);return function(r){return Bve(i(r),e)}}function sS(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function wve(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return WA(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function Sve(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function vj(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function bj(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function Eve(n,e){const t=n[e];if(t!==void 0)return A5(t,e)}function JE(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function Ove(n,e){const t=n[e];if(t!==void 0)return Eee(t,e)}function A5(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let i=0;i<t;++i)if(typeof n[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function See(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function rR(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function Eee(n,e){if(typeof n=="string")return n;const t=A5(n,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function Oee(n,e){const t=A5(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function Bve(n,e){return typeof n=="number"?n:Oee(n,e)}const Cj={RENDER_ORDER:"renderOrder"};class _U extends Fx{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Cj.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new dee(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Cj.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?_ee:e;const t=Ive(e);this.styleFunction_=e===null?void 0:fve(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function Ive(n){if(n===void 0)return _ee;if(!n)return null;if(typeof n=="function"||n instanceof df)return n;if(!Array.isArray(n))return gj([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof df){const r=new Array(e);for(let o=0;o<e;++o){const s=n[o];if(!(s instanceof df))throw new Error("Expected a list of style instances");r[o]=s}return r}if("style"in t){const r=new Array(e);for(let o=0;o<e;++o){const s=n[o];if(!("style"in s))throw new Error("Expected a list of rules with a style property");r[o]=s}return gve(r)}return gj(n)}class Bee extends hm{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}}class kve extends e5{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){zr()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Fg(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),qJ(r,i)}forEachFeatureAtCoordinate(e,t,i,r,o,s,a,c){let h;const m=t.viewState;function y(H,G,Y,z){return o.call(s,G,H?Y:null,z)}const M=m.projection,x=GP(e.slice(),M),k=[[0,0]];if(M.canWrapX()&&r){const H=M.getExtent(),G=cs(H);k.push([-G,0],[G,0])}const P=t.layerStatesArray,F=P.length,j=[],q=[];for(let H=0;H<k.length;H++)for(let G=F-1;G>=0;--G){const Y=P[G],z=Y.layer;if(z.hasRenderer()&&fU(Y,m)&&a.call(c,z)){const se=z.getRenderer(),le=z.getSource();if(se&&le){const me=le.getWrapX()?x:e,de=y.bind(null,Y.managed);q[0]=me[0]+k[H][0],q[1]=me[1]+k[H][1],h=se.forEachFeatureAtCoordinate(q,t,i,de,j)}if(h)return h}}if(j.length===0)return;const V=1/j.length;return j.forEach((H,G)=>H.distanceSq+=G*V),j.sort((H,G)=>H.distanceSq-G.distanceSq),j.some(H=>h=H.callback(H.feature,H.layer,H.geometry)),h}hasFeatureAtCoordinate(e,t,i,r,o,s){return this.forEachFeatureAtCoordinate(e,t,i,r,H3,this,o,s)!==void 0}getMap(){return this.map_}renderFrame(e){zr()}scheduleExpireIconCache(e){ap.canExpireCache()&&e.postRenderFunctions.push(Tve)}}function Tve(n,e){ap.expire()}class Rve extends kve{constructor(e){super(e),this.fontChangeListenerKey_=is(ob,cx.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=VE+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new Bee(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){Ra(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(sp.PRECOMPOSE,e);const t=e.layerStatesArray.sort((a,c)=>a.zIndex-c.zIndex);t.some(a=>a.layer instanceof _U&&a.layer.getDeclutter())&&(e.declutter={});const r=e.viewState;this.children_.length=0;const o=[];let s=null;for(let a=0,c=t.length;a<c;++a){const h=t[a];e.layerIndex=a;const m=h.layer,y=m.getSourceState();if(!fU(h,r)||y!="ready"&&y!="undefined"){m.unrender();continue}const M=m.render(e,s);M&&(M!==s&&(this.children_.push(M),s=M),o.push(h))}this.declutter(e,o),G1e(this.element_,this.children_),this.dispatchRenderEvent(sp.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let i=t.length-1;i>=0;--i){const r=t[i],o=r.layer;o.getDeclutter()&&o.renderDeclutter(e,r)}t.forEach(i=>i.layer.renderDeferred(e))}}}function Iee(n){if(n instanceof Fx){n.setMapInternal(null);return}n instanceof Lx&&n.getLayers().forEach(Iee)}function kee(n,e){if(n instanceof Fx){n.setMapInternal(e);return}if(n instanceof Lx){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)kee(t[i],e)}}let e6=class extends dm{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=Dve(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:h0e,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=bd(),this.pixelToCoordinateTransform_=bd(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||Y1e(),this.interactions=t.interactions||pye({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new OJ(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(FA.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(FA.VIEW,this.handleViewChanged_),this.addChangeListener(FA.SIZE,this.handleSizeChanged_),this.addChangeListener(FA.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof Zp)&&e.view.then(function(r){i.setView(new Zp(r))}),this.controls.addEventListener(hd.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(hd.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(hd.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(hd.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(hd.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(hd.REMOVE,r=>{const o=r.element.getId();o!==void 0&&delete this.overlayIdIndex_[o.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){kee(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const o=i.hitTolerance!==void 0?i.hitTolerance:0,s=i.layerFilter!==void 0?i.layerFilter:H3,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,o,a,t,null,s,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(r){r instanceof Lx?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:H3,o=t.hitTolerance!==void 0?t.hitTolerance:0,s=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,o,s,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),o=i.width/r[0],s=i.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/o,(a.clientY-i.top)/s]}getTarget(){return this.get(FA.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return H9(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Qu(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(FA.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof _g){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const o=r.layer.getRenderer();if(o&&!o.ready)return!0;const s=r.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(e){const t=H0(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Qu(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(FA.SIZE)}getView(){return this.get(FA.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return m0e(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){t=t||e.type;const i=new Sy(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===z9.POINTERDOWN||i===Rr.WHEEL||i===Rr.KEYDOWN){const r=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():r,s=t.target,a=o instanceof ShadowRoot?o.host===s?o.host.ownerDocument:o:o===r?r.documentElement:o;if(this.overlayContainerStopEvent_.contains(s)||!a.contains(s))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let o=r.length-1;o>=0;o--){const s=r[o];if(s.getMap()!==this||!s.getActive()||!this.getTargetElement())continue;if(!s.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,o=r;if(e){const s=e.viewHints;if(s[_l.ANIMATING]||s[_l.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,o=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,o))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(sp.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(sp.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new v_(Z0.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new v_(Z0.LOADSTART,this,e))));const i=this.postRenderFunctions_;if(e)for(let r=0,o=i.length;r<o;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)Ra(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Rr.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Rr.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Rve(this)),this.mapBrowserEventHandler_=new f0e(this,this.moveTolerance_);for(const o in Vl)this.mapBrowserEventHandler_.addEventListener(Vl[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Rr.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Rr.WHEEL,this.boundHandleBrowserEvent_,EJ?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const o=t.getRootNode();i=o instanceof ShadowRoot?o.host:t}this.targetChangeHandlerKeys_=[is(i,Rr.KEYDOWN,this.handleBrowserEvent,this),is(i,Rr.KEYPRESS,this.handleBrowserEvent,this)];const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Ra(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ra(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=is(e,cx.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=is(e,Rr.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ra),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Oy("addlayer",e)),this.layerGroupPropertyListenerKeys_=[is(e,cx.PROPERTYCHANGE,this.render,this),is(e,Rr.CHANGE,this.render,this),is(e,"addlayer",this.handleLayerAdd_,this),is(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Iee(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let o=null;if(t!==void 0&&uj(t)&&i&&i.isDef()){const s=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Xw(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:s,wantedTiles:{},mapId:Vr(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const c=isNaN(a.nextRotation)?a.rotation:a.nextRotation;o.nextExtent=Xw(a.nextCenter,a.nextResolution,c,t)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),r&&(!this.previousExtent_||!Hb(this.previousExtent_)&&!h1(o.extent,this.previousExtent_))&&(this.dispatchEvent(new v_(Z0.MOVESTART,this,r)),this.previousExtent_=Ux(this.previousExtent_)),this.previousExtent_&&!o.viewHints[_l.ANIMATING]&&!o.viewHints[_l.INTERACTING]&&!h1(o.extent,this.previousExtent_)&&(this.dispatchEvent(new v_(Z0.MOVEEND,this,o)),BJ(o.extent,this.previousExtent_))),this.dispatchEvent(new v_(Z0.POSTRENDER,this,o)),this.renderComplete_=(this.hasListener(Z0.LOADSTART)||this.hasListener(Z0.LOADEND)||this.hasListener(sp.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Oy("removelayer",t)),this.set(FA.LAYERGROUP,e)}setSize(e){this.set(FA.SIZE,e)}setTarget(e){this.set(FA.TARGET,e)}setView(e){if(!e||e instanceof Zp){this.set(FA.VIEW,e);return}this.set(FA.VIEW,new Zp);const t=this;e.then(function(i){t.setView(new Zp(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const r=getComputedStyle(e),o=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),s=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(o)&&!isNaN(s)&&(t=[Math.max(0,o),Math.max(0,s)],!uj(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&LJ("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!cv(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function Dve(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Lx({layers:n.layers});t[FA.LAYERGROUP]=i,t[FA.TARGET]=n.target,t[FA.VIEW]=n.view instanceof Zp?n.view:new Zp;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new _g(n.controls.slice()):(Rs(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=n.controls));let o;n.interactions!==void 0&&(Array.isArray(n.interactions)?o=new _g(n.interactions.slice()):(Rs(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),o=n.interactions));let s;return n.overlays!==void 0?Array.isArray(n.overlays)?s=new _g(n.overlays.slice()):(Rs(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),s=n.overlays):s=new _g,{controls:r,interactions:o,keyboardEventTarget:e,overlays:s,values:t}}class t6 extends dm{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new t6(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ra(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=is(e,Rr.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Pve(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function Pve(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(Rs(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}function Tee(n,e,t,i){const r=[];let o=fp();for(let s=0,a=t.length;s<a;++s){const c=t[s];o=jP(n,e,c[0],i),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=c[c.length-1]}return r}function aS(n,e,t,i,r,o,s){let a,c;const h=(t-e)/i;if(h===1)a=e;else if(h===2)a=e,c=r;else if(h!==0){let m=n[e],y=n[e+1],M=0;const x=[0];for(let F=e+i;F<t;F+=i){const j=n[F],q=n[F+1];M+=Math.sqrt((j-m)*(j-m)+(q-y)*(q-y)),x.push(M),m=j,y=q}const k=r*M,P=r0e(x,k);P<0?(c=(k-x[-P-2])/(x[-P-1]-x[-P-2]),a=e+(-P-2)*i):a=e+P*i}s=s>1?s:2,o=o||new Array(s);for(let m=0;m<s;++m)o[m]=a===void 0?NaN:c===void 0?n[a+m]:hf(n[a+m],n[a+i+m],c);return o}function oR(n,e,t,i,r,o){if(t==e)return null;let s;if(r<n[e+i-1])return o?(s=n.slice(e,e+i),s[i-1]=r,s):null;if(n[t-1]<r)return o?(s=n.slice(t-i,t),s[i-1]=r,s):null;if(r==n[e+i-1])return n.slice(e,e+i);let a=e/i,c=t/i;for(;a<c;){const M=a+c>>1;r<n[(M+1)*i-1]?c=M:a=M+1}const h=n[a*i-1];if(r==h)return n.slice((a-1)*i,(a-1)*i+i);const m=n[(a+1)*i-1],y=(r-h)/(m-h);s=[];for(let M=0;M<i-1;++M)s.push(hf(n[(a-1)*i+M],n[a*i+M],y));return s.push(r),s}function Uve(n,e,t,i,r,o,s){if(s)return oR(n,e,t[t.length-1],i,r,o);let a;if(r<n[i-1])return o?(a=n.slice(0,i),a[i-1]=r,a):null;if(n[n.length-1]<r)return o?(a=n.slice(n.length-i),a[i-1]=r,a):null;for(let c=0,h=t.length;c<h;++c){const m=t[c];if(e!=m){if(r<n[e+i-1])return null;if(r<=n[m-1])return oR(n,e,m,i,r,!1);e=m}}return null}class lS extends $J{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Ra),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,i=e.length;t<i;++t)this.changeEventsKeys_.push(is(e[t],Rr.CHANGE,this.changed,this))}clone(){const e=new lS(uB(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<Vb(this.getExtent(),e,t))return r;const o=this.geometries_;for(let s=0,a=o.length;s<a;++s)r=o[s].closestPointXY(e,t,i,r);return r}containsXY(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)if(i[r].containsXY(e,t))return!0;return!1}computeExtent(e){Ux(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)kJ(e,t[i].getExtent());return e}getGeometries(){return uB(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let r=!1;for(let o=0,s=i.length;o<s;++o){const a=i[o],c=a.getSimplifiedGeometry(e);t.push(c),c!==a&&(r=!0)}return r?new lS(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].rotate(e,t);this.changed()}scale(e,t,i){i||(i=Mf(this.getExtent()));const r=this.geometries_;for(let o=0,s=r.length;o<s;++o)r[o].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(uB(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function uB(n){return n.map(e=>e.clone())}function xU(n,e,t,i){let r=n[e],o=n[e+1],s=0;for(let a=e+i;a<t;a+=i){const c=n[a],h=n[a+1];s+=Math.sqrt((c-r)*(c-r)+(h-o)*(h-o)),r=c,o=h}return s}class zb extends Zb{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Ug(this.flatCoordinates,e),this.changed()}clone(){const e=new zb(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<Vb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ZP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),JP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return eee(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,oR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Ly(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return aS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return xU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=YE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new zb(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return $E(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=qE(this.flatCoordinates,0,e,this.stride),this.changed()}}class l4 extends Zb{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{const r=e,o=[],s=[];for(let c=0,h=r.length;c<h;++c){const m=r[c];Ug(o,m.getFlatCoordinates()),s.push(o.length)}const a=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(a,o),this.ends_=s}}appendLineString(e){Ug(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new l4(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<Vb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(XP(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),eU(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,r))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,Uve(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return e4(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new zb(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,r=[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s],h=new zb(e.slice(o,c),i);r.push(h),o=c}return r}getLength(){const e=this.ends_;let t=0,i=0;for(let r=0,o=e.length;r<o;++r)i+=xU(this.flatCoordinates,t,e[r],this.stride),t=e[r];return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const r=this.ends_,o=this.stride;for(let s=0,a=r.length;s<a;++s){const c=r[s],h=aS(t,i,c,o,.5);Ug(e,h),i=c}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=XJ(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new l4(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return O1e(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=s5(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class h5 extends Zb{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Ug(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new h5(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<Vb(this.getExtent(),e,t))return r;const o=this.flatCoordinates,s=this.stride;for(let a=0,c=o.length;a<c;a+=s){const h=Eb(e,t,o[a],o[a+1]);if(h<r){r=h;for(let m=0;m<s;++m)i[m]=o[a+m];i.length=s}}return r}getCoordinates(){return Ly(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Lb(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,r=[];for(let o=0,s=e.length;o<s;o+=i){const a=new Lb(e.slice(o,o+i),t);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let r=0,o=t.length;r<o;r+=i){const s=t[r],a=t[r+1];if(zP(e,s,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=qE(this.flatCoordinates,0,e,this.stride),this.changed()}}class u4 extends Zb{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){const r=e,o=[],s=[];for(let a=0,c=r.length;a<c;++a){const h=r[a],m=o.length,y=h.getEnds();for(let M=0,x=y.length;M<x;++M)y[M]+=m;Ug(o,h.getFlatCoordinates()),s.push(y)}t=r.length===0?this.getLayout():r[0].getLayout(),e=o,i=s}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Ug(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,o=t.length;r<o;++r)t[r]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const i=new u4(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,r){return r<Vb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(C1e(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_1e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return E1e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return b1e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),X9(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,Z9(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=Tee(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=JJ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new h5(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;iee(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=X9(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=w1e(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new u4(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const o=this.endss_[e-1];t=o[o.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(t!==0)for(let o=0,s=i.length;o<s;++o)i[o]-=t;return new d1(this.flatCoordinates.slice(t,r),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,r=[];let o=0;for(let s=0,a=i.length;s<a;++s){const c=i[s].slice(),h=c[c.length-1];if(o!==0)for(let y=0,M=c.length;y<M;++y)c[y]-=o;const m=new d1(t.slice(o,h),e,c);r.push(m),o=h}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return B1e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=ZJ(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const _j=bd();class NA{constructor(e,t,i,r,o,s){this.styleFunction,this.extent_,this.id_=s,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=o,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?IJ(this.flatCoordinates_):jP(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Mf(this.getExtent());this.flatInteriorPoints_=iU(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=ree(this.flatCoordinates_,this.ends_),t=Tee(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=JJ(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=aS(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let r=0,o=i.length;r<o;++r){const s=i[r],a=aS(e,t,s,2,.5);Ug(this.flatMidpoints_,a),t=s}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Xs(e);const t=e.getExtent(),i=e.getWorldExtent();if(t&&i){const r=$u(i)/$u(t);Fg(_j,i[0],i[3],r,-r,0,0,0),Xy(this.flatCoordinates_,0,this.flatCoordinates_.length,2,_j,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new NA(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=MJ((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":i.length=YE(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),r=[i.length];break;case"MultiLineString":r=[],i.length=XJ(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,r);break;case"Polygon":r=[],i.length=tU(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,r);break}return r&&(this.simplifiedGeometry_=new NA(this.type_,i,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}NA.prototype.getFlatCoordinates=NA.prototype.getOrientedFlatCoordinates;class Ree{drawCustom(e,t,i,r,o){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,i){}drawFeature(e,t,i){}drawGeometryCollection(e,t,i){}drawLineString(e,t,i){}drawMultiLineString(e,t,i){}drawMultiPoint(e,t,i){}drawMultiPolygon(e,t,i){}drawPoint(e,t,i){}drawPolygon(e,t,i){}drawText(e,t,i){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class Kve extends Ree{constructor(e,t,i,r,o,s,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.transformRotation_=r?LE(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=s,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=bd()}drawImages_(e,t,i,r){if(!this.image_)return;const o=Xy(e,t,i,r,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.tmpLocalTransform_,c=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=c*this.imageOpacity_);let h=this.imageRotation_;this.transformRotation_===0&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let m=0,y=o.length;m<y;m+=2){const M=o[m]-this.imageAnchorX_,x=o[m+1]-this.imageAnchorY_;if(h!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const k=M+this.imageAnchorX_,P=x+this.imageAnchorY_;Fg(a,k,P,1,1,h,-k,-P),s.save(),s.transform.apply(s,a),s.translate(k,P),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.restore()}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,M,x,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=c)}drawText_(e,t,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const o=Xy(e,t,i,r,this.transform_,this.pixelCoordinates_),s=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=r){const c=o[t]+this.textOffsetX_,h=o[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(s.save(),s.translate(c-this.textOffsetX_,h-this.textOffsetY_),s.rotate(a),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.restore()):(this.textStrokeState_&&s.strokeText(this.text_,c,h),this.textFillState_&&s.fillText(this.text_,c,h))}}moveToLineTo_(e,t,i,r,o){const s=this.context_,a=Xy(e,t,i,r,this.transform_,this.pixelCoordinates_);s.moveTo(a[0],a[1]);let c=a.length;o&&(c-=2);for(let h=2;h<c;h+=2)s.lineTo(a[h],a[h+1]);return o&&s.closePath(),i}drawRings_(e,t,i,r){for(let o=0,s=i.length;o<s;++o)t=this.moveToLineTo_(e,t,i[o],r,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Zl(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=v1e(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],o=Math.sqrt(i*i+r*r),s=this.context_;s.beginPath(),s.arc(t[0],t[1],o,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Zl(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Zl(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let o=0;const s=e.getEnds(),a=e.getStride();i.beginPath();for(let c=0,h=s.length;c<h;++c)o=this.moveToLineTo_(r,o,s[c],a,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Zl(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Zl(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const o=e.getEndss(),s=e.getStride();t.beginPath();for(let a=0,c=o.length;a<c;++a){const h=o[a];r=this.drawRings_(i,r,h,s)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),cv(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:r4;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:wg(i||fd)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),r=t.getLineCap(),o=t.getLineDash(),s=t.getLineDashOffset(),a=t.getLineJoin(),c=t.getWidth(),h=t.getMiterLimit(),m=o||s1;this.strokeState_={lineCap:r!==void 0?r:fx,lineDash:this.pixelRatio_===1?m:m.map(y=>y*this.pixelRatio_),lineDashOffset:(s||a1)*this.pixelRatio_,lineJoin:a!==void 0?a:px,lineWidth:(c!==void 0?c:o4)*this.pixelRatio_,miterLimit:h!==void 0?h:n4,strokeStyle:wg(i||i4)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),o=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const s=e.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/i,s[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const x=t.getColor();this.textFillState_={fillStyle:wg(x||fd)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const x=i.getColor(),k=i.getLineCap(),P=i.getLineDash(),F=i.getLineDashOffset(),j=i.getLineJoin(),q=i.getWidth(),V=i.getMiterLimit();this.textStrokeState_={lineCap:k!==void 0?k:fx,lineDash:P||s1,lineDashOffset:F||a1,lineJoin:j!==void 0?j:px,lineWidth:q!==void 0?q:o4,miterLimit:V!==void 0?V:n4,strokeStyle:wg(x||i4)}}const r=e.getFont(),o=e.getOffsetX(),s=e.getOffsetY(),a=e.getRotateWithView(),c=e.getRotation(),h=e.getScaleArray(),m=e.getText(),y=e.getTextAlign(),M=e.getTextBaseline();this.textState_={font:r!==void 0?r:vee,textAlign:y!==void 0?y:r4,textBaseline:M!==void 0?M:rS},this.text_=m!==void 0?Array.isArray(m)?m.reduce((x,k,P)=>x+=P%2?" ":k,""):m:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=s!==void 0?this.pixelRatio_*s:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=c!==void 0?c:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}}}const Lve=.5,Dee={Point:qve,LineString:Gve,Polygon:$ve,MultiPoint:Yve,MultiLineString:Wve,MultiPolygon:Qve,GeometryCollection:Nve,Circle:zve};function Fve(n,e){return parseInt(Vr(n),10)-parseInt(Vr(e),10)}function sR(n,e){const t=Pee(n,e);return t*t}function Pee(n,e){return Lve*n/e}function zve(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(o||s){const c=n.getBuilder(t.getZIndex(),"Circle");c.setFillStrokeStyle(o,s),c.drawCircle(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}}function uS(n,e,t,i,r,o,s,a){const c=[],h=t.getImage();if(h){let M=!0;const x=h.getImageState();x==Fi.LOADED||x==Fi.ERROR?M=!1:x==Fi.IDLE&&h.load(),M&&c.push(h.ready())}const m=t.getFill();m&&m.loading()&&c.push(m.ready());const y=c.length>0;return y&&Promise.all(c).then(()=>r(null)),jve(n,e,t,i,o,s,a),y}function jve(n,e,t,i,r,o,s){const a=t.getGeometryFunction()(e);if(!a)return;const c=a.simplifyTransformed(i,r);if(t.getRenderer())Uee(n,c,t,e,s);else{const m=Dee[c.getType()];m(n,c,t,e,s,o)}}function Uee(n,e,t,i,r){if(e.getType()=="GeometryCollection"){const s=e.getGeometries();for(let a=0,c=s.length;a<c;++a)Uee(n,s[a],t,i,r);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer(),r)}function Nve(n,e,t,i,r,o){const s=e.getGeometriesArray();let a,c;for(a=0,c=s.length;a<c;++a){const h=Dee[s[a].getType()];h(n,s[a],t,i,r,o)}}function Gve(n,e,t,i,r){const o=t.getStroke();if(o){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(e,i,r)}const s=t.getText();if(s&&s.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,i,r)}}function Wve(n,e,t,i,r){const o=t.getStroke();if(o){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,i,r)}const s=t.getText();if(s&&s.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,i,r)}}function Qve(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(s||o){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(o,s),c.drawMultiPolygon(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i,r)}}function qve(n,e,t,i,r,o){const s=t.getImage(),a=t.getText(),c=a&&a.getText(),h=o&&s&&c?{}:void 0;if(s){if(s.getImageState()!=Fi.LOADED)return;const m=n.getBuilder(t.getZIndex(),"Image");m.setImageStyle(s,h),m.drawPoint(e,i,r)}if(c){const m=n.getBuilder(t.getZIndex(),"Text");m.setTextStyle(a,h),m.drawText(e,i,r)}}function Yve(n,e,t,i,r,o){const s=t.getImage(),a=s&&s.getOpacity()!==0,c=t.getText(),h=c&&c.getText(),m=o&&a&&h?{}:void 0;if(a){if(s.getImageState()!=Fi.LOADED)return;const y=n.getBuilder(t.getZIndex(),"Image");y.setImageStyle(s,m),y.drawMultiPoint(e,i,r)}if(h){const y=n.getBuilder(t.getZIndex(),"Text");y.setTextStyle(c,m),y.drawText(e,i,r)}}function $ve(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(o||s){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(o,s),c.drawPolygon(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i,r)}}let Vve=!1;function Kee(n,e,t,i,r,o,s){const a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(t,i,r):n,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=Vve,a.onload=function(c){if(!a.status||a.status>=200&&a.status<300){const h=e.getType();try{let m;h=="text"||h=="json"?m=a.responseText:h=="xml"?m=a.responseXML||a.responseText:h=="arraybuffer"&&(m=a.response),m?o(e.readFeatures(m,{extent:t,featureProjection:r}),e.readProjection(m)):s()}catch{s()}}else s()},a.onerror=s,a.send()}function xj(n,e){return function(t,i,r,o,s){Kee(n,e,t,i,r,(a,c)=>{this.addFeatures(a),o!==void 0&&o(a)},()=>{this.changed(),s!==void 0&&s()})}}function Hve(n,e){return[[-1/0,-1/0,1/0,1/0]]}function Zve(n,e){return[n]}class Mj{constructor(e){this.rbush_=new dee(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[Vr(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,o=t.length;r<o;r++){const s=e[r],a=t[r],c={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};i[r]=c,this.items_[Vr(a)]=c}this.rbush_.load(i)}remove(e){const t=Vr(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[Vr(t)],r=[i.minX,i.minY,i.maxX,i.maxY];h1(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,o=e.length;r<o;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return tv(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return A1(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class zx extends dm{constructor(e){super(),this.projection=Xs(e.projection),this.attributions_=wj(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=wj(e),this.changed()}setState(e){this.state_=e,this.changed()}}function wj(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const Vf={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class by extends hm{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class lw extends zx{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Z3,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Rs(this.format_,"`format` must be set when `url` is set"),this.loader_=xj(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Hve;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Mj:null,this.loadedExtentsRtree_=new Mj,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&i===void 0&&(i=new _g(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Vr(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new by(Vf.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof NA||(this.featureChangeKeys_[e]=[is(t,Rr.CHANGE,this.handleFeatureChange_,this),is(t,cx.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(t.getId()!==void 0){const r=String(t.getId());if(!(r in this.idIndex_))this.idIndex_[r]=t;else if(t instanceof NA){const o=this.idIndex_[r];o instanceof NA?Array.isArray(o)?o.push(t):this.idIndex_[r]=[o,t]:i=!1}else i=!1}return i&&(Rs(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let o=0,s=e.length;o<s;o++){const a=e[o],c=Vr(a);this.addToIndex_(c,a)&&i.push(a)}for(let o=0,s=i.length;o<s;o++){const a=i[o],c=Vr(a);this.setupChangeEvents_(c,a);const h=a.getGeometry();if(h){const m=h.getExtent();t.push(m),r.push(a)}else this.nullGeometryFeatures_[c]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(Vf.ADDFEATURE))for(let o=0,s=i.length;o<s;o++)this.dispatchEvent(new by(Vf.ADDFEATURE,i[o]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Vf.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(Vf.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(hd.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(hd.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Ra);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new by(Vf.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){const o=r.getGeometry();if(o instanceof NA||o.intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){const r=i.getGeometry();if(r instanceof NA||r.intersectsExtent(e)){const o=t(i);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),tv(this.nullGeometryFeatures_)||Ug(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=UJ(e,t);return[].concat(...r.map(o=>this.featuresRtree_.getInExtent(o)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let o=null;const s=[NaN,NaN];let a=1/0;const c=[-1/0,-1/0,1/0,1/0];return t=t||H3,this.featuresRtree_.forEachInExtent(c,function(h){if(t(h)){const m=h.getGeometry(),y=a;if(a=m instanceof NA?0:m.closestPointXY(i,r,s,a),a<y){o=h;const M=Math.sqrt(a);c[0]=i-M,c[1]=r-M,c[2]=i+M,c[3]=r+M}}}),o}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=Vr(t),r=t.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const s=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(s,t)):this.featuresRtree_&&this.featuresRtree_.update(s,t)}const o=t.getId();if(o!==void 0){const s=o.toString();this.idIndex_[s]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[s]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new by(Vf.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Vr(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&tv(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,o=this.strategy_(e,t,i);for(let s=0,a=o.length;s<a;++s){const c=o[s];r.forEachInExtent(c,function(m){return xg(m.extent,c)})||(++this.loadingExtentsCount_,this.dispatchEvent(new by(Vf.FEATURESLOADSTART)),this.loader_.call(this,c,t,i,m=>{--this.loadingExtentsCount_,this.dispatchEvent(new by(Vf.FEATURESLOADEND,void 0,m))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new by(Vf.FEATURESLOADERROR))}),r.insert(c,{extent:c.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,i=t.forEachInExtent(e,function(r){if(h1(r.extent,e))return r});i&&t.remove(i)}removeFeatures(e){let t=!1;for(let i=0,r=e.length;i<r;++i)t=this.removeFeatureInternal(e[i])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Vr(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(Ra),delete this.featureChangeKeys_[t];const r=e.getId();if(r!==void 0){const o=r.toString(),s=this.idIndex_[o];s===e?delete this.idIndex_[o]:Array.isArray(s)&&(s.splice(s.indexOf(e),1),s.length===1&&(this.idIndex_[o]=s[0]))}return delete this.uidIndex_[t],this.hasListener(Vf.REMOVEFEATURE)&&this.dispatchEvent(new by(Vf.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){Rs(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(xj(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const Ar={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},rM=[Ar.FILL],zy=[Ar.STROKE],pb=[Ar.BEGIN_PATH],Sj=[Ar.CLOSE_PATH];class d5 extends Ree{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,o=this.coordinates;let s=o.length;for(let a=0,c=e.length;a<c;a+=t)r[0]=e[a],r[1]=e[a+1],Kb(i,r)&&(o[s++]=r[0],o[s++]=r[1]);return s}appendFlatLineCoordinates(e,t,i,r,o,s){const a=this.coordinates;let c=a.length;const h=this.getBufferedMaxExtent();s&&(t+=r);let m=e[t],y=e[t+1];const M=this.tmpCoordinate_;let x=!0,k,P,F;for(k=t+r;k<i;k+=r)M[0]=e[k],M[1]=e[k+1],F=G9(h,M),F!==P?(x&&(a[c++]=m,a[c++]=y,x=!1),a[c++]=M[0],a[c++]=M[1]):F===Gc.INTERSECTING?(a[c++]=M[0],a[c++]=M[1],x=!1):x=!0,m=M[0],y=M[1],P=F;return(o&&x||k===t+r)&&(a[c++]=m,a[c++]=y),c}drawCustomCoordinates_(e,t,i,r,o){for(let s=0,a=i.length;s<a;++s){const c=i[s],h=this.appendFlatLineCoordinates(e,t,c,r,!1,!1);o.push(h),t=c}return t}drawCustom(e,t,i,r,o){this.beginGeometry(e,t,o);const s=e.getType(),a=e.getStride(),c=this.coordinates.length;let h,m,y,M,x;switch(s){case"MultiPolygon":h=e.getOrientedFlatCoordinates(),M=[];const k=e.getEndss();x=0;for(let P=0,F=k.length;P<F;++P){const j=[];x=this.drawCustomCoordinates_(h,x,k[P],a,j),M.push(j)}this.instructions.push([Ar.CUSTOM,c,M,e,i,Z9,o]),this.hitDetectionInstructions.push([Ar.CUSTOM,c,M,e,r||i,Z9,o]);break;case"Polygon":case"MultiLineString":y=[],h=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),x=this.drawCustomCoordinates_(h,0,e.getEnds(),a,y),this.instructions.push([Ar.CUSTOM,c,y,e,i,e4,o]),this.hitDetectionInstructions.push([Ar.CUSTOM,c,y,e,r||i,e4,o]);break;case"LineString":case"Circle":h=e.getFlatCoordinates(),m=this.appendFlatLineCoordinates(h,0,h.length,a,!1,!1),this.instructions.push([Ar.CUSTOM,c,m,e,i,Ly,o]),this.hitDetectionInstructions.push([Ar.CUSTOM,c,m,e,r||i,Ly,o]);break;case"MultiPoint":h=e.getFlatCoordinates(),m=this.appendFlatPointCoordinates(h,a),m>c&&(this.instructions.push([Ar.CUSTOM,c,m,e,i,Ly,o]),this.hitDetectionInstructions.push([Ar.CUSTOM,c,m,e,r||i,Ly,o]));break;case"Point":h=e.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),m=this.coordinates.length,this.instructions.push([Ar.CUSTOM,c,m,e,i,void 0,o]),this.hitDetectionInstructions.push([Ar.CUSTOM,c,m,e,r||i,void 0,o]);break}this.endGeometry(t)}beginGeometry(e,t,i){this.beginGeometryInstruction1_=[Ar.BEGIN_GEOMETRY,t,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Ar.BEGIN_GEOMETRY,t,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let r,o,s=-1;for(t=0;t<i;++t)r=e[t],o=r[0],o==Ar.END_GEOMETRY?s=t:o==Ar.BEGIN_GEOMETRY&&(r[2]=t,s0e(this.hitDetectionInstructions,s,t),s=-1)}fillStyleToState(e,t={}){if(e){const i=e.getColor();t.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,t.fillStyle=wg(i||fd)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const i=e.getColor();t.strokeStyle=wg(i||i4);const r=e.getLineCap();t.lineCap=r!==void 0?r:fx;const o=e.getLineDash();t.lineDash=o?o.slice():s1;const s=e.getLineDashOffset();t.lineDashOffset=s||a1;const a=e.getLineJoin();t.lineJoin=a!==void 0?a:px;const c=e.getWidth();t.lineWidth=c!==void 0?c:o4;const h=e.getMiterLimit();t.miterLimit=h!==void 0?h:n4,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const i=this.state;this.fillStyleToState(e,i),this.strokeStyleToState(t,i)}createFill(e){const t=e.fillStyle,i=[Ar.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Ar.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,o=e.lineDash,s=e.lineDashOffset,a=e.lineJoin,c=e.lineWidth,h=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||o!=e.currentLineDash&&!cv(e.currentLineDash,o)||e.currentLineDashOffset!=s||e.currentLineJoin!=a||e.currentLineWidth!=c||e.currentMiterLimit!=h)&&(t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=o,e.currentLineDashOffset=s,e.currentLineJoin=a,e.currentLineWidth=c,e.currentMiterLimit=h)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Ar.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=BJ(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Hy(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class Xve extends d5{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,i){if(!this.image_||this.maxExtent&&!Kb(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),o=e.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(r,o);this.instructions.push([Ar.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Ar.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,i){if(!this.image_)return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),o=[];for(let c=0,h=r.length;c<h;c+=e.getStride())(!this.maxExtent||Kb(this.maxExtent,r.slice(c,c+2)))&&o.push(r[c],r[c+1]);const s=this.coordinates.length,a=this.appendFlatPointCoordinates(o,2);this.instructions.push([Ar.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Ar.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),o=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class Jve extends d5{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const o=this.coordinates.length,s=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),a=[Ar.MOVE_TO_LINE_TO,o,s];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t,i){const r=this.state,o=r.strokeStyle,s=r.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([Ar.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,s1,a1],pb);const a=e.getFlatCoordinates(),c=e.getStride();this.drawFlatCoordinates_(a,0,a.length,c),this.hitDetectionInstructions.push(zy),this.endGeometry(t)}drawMultiLineString(e,t,i){const r=this.state,o=r.strokeStyle,s=r.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([Ar.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,s1,a1],pb);const a=e.getEnds(),c=e.getFlatCoordinates(),h=e.getStride();let m=0;for(let y=0,M=a.length;y<M;++y)m=this.drawFlatCoordinates_(c,m,a[y],h);this.hitDetectionInstructions.push(zy),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(zy),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(zy),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(pb)}}class Ej extends d5{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const o=this.state,s=o.fillStyle!==void 0,a=o.strokeStyle!==void 0,c=i.length;this.instructions.push(pb),this.hitDetectionInstructions.push(pb);for(let h=0;h<c;++h){const m=i[h],y=this.coordinates.length,M=this.appendFlatLineCoordinates(e,t,m,r,!0,!a),x=[Ar.MOVE_TO_LINE_TO,y,M];this.instructions.push(x),this.hitDetectionInstructions.push(x),a&&(this.instructions.push(Sj),this.hitDetectionInstructions.push(Sj)),t=m}return s&&(this.instructions.push(rM),this.hitDetectionInstructions.push(rM)),a&&(this.instructions.push(zy),this.hitDetectionInstructions.push(zy)),t}drawCircle(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Ar.SET_FILL_STYLE,fd]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Ar.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,s1,a1]);const a=e.getFlatCoordinates(),c=e.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,c,!1,!1);const m=[Ar.CIRCLE,h];this.instructions.push(pb,m),this.hitDetectionInstructions.push(pb,m),r.fillStyle!==void 0&&(this.instructions.push(rM),this.hitDetectionInstructions.push(rM)),r.strokeStyle!==void 0&&(this.instructions.push(zy),this.hitDetectionInstructions.push(zy)),this.endGeometry(t)}drawPolygon(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Ar.SET_FILL_STYLE,fd]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Ar.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,s1,a1]);const a=e.getEnds(),c=e.getOrientedFlatCoordinates(),h=e.getStride();this.drawFlatCoordinatess_(c,0,a,h),this.endGeometry(t)}drawMultiPolygon(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Ar.SET_FILL_STYLE,fd]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Ar.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,s1,a1]);const a=e.getEndss(),c=e.getOrientedFlatCoordinates(),h=e.getStride();let m=0;for(let y=0,M=a.length;y<M;++y)m=this.drawFlatCoordinatess_(c,m,a[y],h);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=ib(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function ebe(n,e,t,i,r){const o=[];let s=t,a=0,c=e.slice(t,2);for(;a<n&&s+r<i;){const[h,m]=c.slice(-2),y=e[s+r],M=e[s+r+1],x=Math.sqrt((y-h)*(y-h)+(M-m)*(M-m));if(a+=x,a>=n){const k=(n-a+x)/x,P=hf(h,y,k),F=hf(m,M,k);c.push(P,F),o.push(c),c=[P,F],a==n&&(s+=r),a=0}else if(a<n)c.push(e[s+r],e[s+r+1]),s+=r;else{const k=x-a,P=hf(h,y,k/x),F=hf(m,M,k/x);c.push(P,F),o.push(c),c=[P,F],a=0,s+=r}}return a>0&&o.push(c),o}function tbe(n,e,t,i,r){let o=t,s=t,a=0,c=0,h=t,m,y,M,x,k,P,F,j,q,V;for(y=t;y<i;y+=r){const H=e[y],G=e[y+1];k!==void 0&&(q=H-k,V=G-P,x=Math.sqrt(q*q+V*V),F!==void 0&&(c+=M,m=Math.acos((F*q+j*V)/(M*x)),m>n&&(c>a&&(a=c,o=h,s=y),c=0,h=y-r)),M=x,F=q,j=V),k=H,P=G}return c+=x,c>a?[h,y]:[o,s]}const cS={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class nbe extends d5{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[fd]={fillStyle:fd},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,i){const r=this.textFillState_,o=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!r&&!o)return;const a=this.coordinates;let c=a.length;const h=e.getType();let m=null,y=e.getStride();if(s.placement==="line"&&(h=="LineString"||h=="MultiLineString"||h=="Polygon"||h=="MultiPolygon")){if(!Zl(this.maxExtent,e.getExtent()))return;let M;if(m=e.getFlatCoordinates(),h=="LineString")M=[m.length];else if(h=="MultiLineString")M=e.getEnds();else if(h=="Polygon")M=e.getEnds().slice(0,1);else if(h=="MultiPolygon"){const F=e.getEndss();M=[];for(let j=0,q=F.length;j<q;++j)M.push(F[j][0])}this.beginGeometry(e,t,i);const x=s.repeat,k=x?void 0:s.textAlign;let P=0;for(let F=0,j=M.length;F<j;++F){let q;x?q=ebe(x*this.resolution,m,P,M[F],y):q=[m.slice(P,M[F])];for(let V=0,H=q.length;V<H;++V){const G=q[V];let Y=0,z=G.length;if(k==null){const le=tbe(s.maxAngle,G,0,G.length,2);Y=le[0],z=le[1]}for(let le=Y;le<z;le+=y)a.push(G[le],G[le+1]);const se=a.length;P=M[F],this.drawChars_(c,se),c=se}}this.endGeometry(t)}else{let M=s.overflow?null:[];switch(h){case"Point":case"MultiPoint":m=e.getFlatCoordinates();break;case"LineString":m=e.getFlatMidpoint();break;case"Circle":m=e.getCenter();break;case"MultiLineString":m=e.getFlatMidpoints(),y=2;break;case"Polygon":m=e.getFlatInteriorPoint(),s.overflow||M.push(m[2]/this.resolution),y=3;break;case"MultiPolygon":const H=e.getFlatInteriorPoints();m=[];for(let G=0,Y=H.length;G<Y;G+=3)s.overflow||M.push(H[G+2]/this.resolution),m.push(H[G],H[G+1]);if(m.length===0)return;y=2;break}const x=this.appendFlatPointCoordinates(m,y);if(x===c)return;if(M&&(x-c)/2!==m.length/y){let H=c/2;M=M.filter((G,Y)=>{const z=a[(H+Y)*2]===m[Y*y]&&a[(H+Y)*2+1]===m[Y*y+1];return z||--H,z})}this.saveTextStates_();const k=s.backgroundFill?this.createFill(this.fillStyleToState(s.backgroundFill)):null,P=s.backgroundStroke?this.createStroke(this.strokeStyleToState(s.backgroundStroke)):null;this.beginGeometry(e,t,i);let F=s.padding;if(F!=fb&&(s.scale[0]<0||s.scale[1]<0)){let H=s.padding[0],G=s.padding[1],Y=s.padding[2],z=s.padding[3];s.scale[0]<0&&(G=-G,z=-z),s.scale[1]<0&&(H=-H,Y=-Y),F=[H,G,Y,z]}const j=this.pixelRatio;this.instructions.push([Ar.DRAW_IMAGE,c,x,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,F==fb?fb:F.map(function(H){return H*j}),k,P,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,M]);const q=1/j,V=k?k.slice(0):null;V&&(V[1]=fd),this.hitDetectionInstructions.push([Ar.DRAW_IMAGE,c,x,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[q,q],NaN,this.declutterMode_,this.declutterImageWithText_,F,V,P,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?fd:this.fillKey_,this.textOffsetX_,this.textOffsetY_,M]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const o=this.textKey_;o in this.textStates||(this.textStates[o]={font:t.font,textAlign:t.textAlign||r4,justify:t.justify,textBaseline:t.textBaseline||rS,scale:t.scale});const s=this.fillKey_;i&&(s in this.fillStates||(this.fillStates[s]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,o=this.strokeKey_,s=this.textKey_,a=this.fillKey_;this.saveTextStates_();const c=this.pixelRatio,h=cS[r.textBaseline],m=this.textOffsetY_*c,y=this.text_,M=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Ar.DRAW_CHARS,e,t,h,r.overflow,a,r.maxAngle,c,m,o,M*c,y,s,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Ar.DRAW_CHARS,e,t,h,r.overflow,a&&fd,r.maxAngle,c,m,o,M*c,y,s,1/c,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let i,r,o;if(!e)this.text_="";else{const s=e.getFill();s?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=wg(s.getColor()||fd)):(r=null,this.textFillState_=r);const a=e.getStroke();if(!a)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);const P=a.getLineDash(),F=a.getLineDashOffset(),j=a.getWidth(),q=a.getMiterLimit();o.lineCap=a.getLineCap()||fx,o.lineDash=P?P.slice():s1,o.lineDashOffset=F===void 0?a1:F,o.lineJoin=a.getLineJoin()||px,o.lineWidth=j===void 0?o4:j,o.miterLimit=q===void 0?n4:q,o.strokeStyle=wg(a.getColor()||i4)}i=this.textState_;const c=e.getFont()||vee;uve(c);const h=e.getScaleArray();i.overflow=e.getOverflow(),i.font=c,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||rS,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||fb,i.scale=h===void 0?[1,1]:h;const m=e.getOffsetX(),y=e.getOffsetY(),M=e.getRotateWithView(),x=e.getKeepUpright(),k=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=m===void 0?0:m,this.textOffsetY_=y===void 0?0:y,this.textRotateWithView_=M===void 0?!1:M,this.textKeepUpright_=x===void 0?!0:x,this.textRotation_=k===void 0?0:k,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:Vr(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+Vr(r.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const ibe={Circle:Ej,Default:d5,Image:Xve,LineString:Jve,Polygon:Ej,Text:nbe};class Lee{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const o=i[r].finish();e[t][r]=o}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let o=r[t];if(o===void 0){const s=ibe[t];o=new s(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=o}return o}}function rbe(n,e,t,i,r,o,s,a,c,h,m,y,M=!0){let x=n[e],k=n[e+1],P=0,F=0,j=0,q=0;function V(){P=x,F=k,e+=i,x=n[e],k=n[e+1],q+=j,j=Math.sqrt((x-P)*(x-P)+(k-F)*(k-F))}do V();while(e<t-i&&q+j<o);let H=j===0?0:(o-q)/j;const G=hf(P,x,H),Y=hf(F,k,H),z=e-i,se=q,le=o+a*c(h,r,m);for(;e<t-i&&q+j<le;)V();H=j===0?0:(le-q)/j;const me=hf(P,x,H),de=hf(F,k,H);let be=!1;if(M)if(y){const Qe=[G,Y,me,de];YJ(Qe,0,4,2,y,Qe,Qe),be=Qe[0]>Qe[2]}else be=G>me;const Ee=Math.PI,De=[],je=z+i===e;e=z,j=0,q=se,x=n[e],k=n[e+1];let Ie;if(je){V(),Ie=Math.atan2(k-F,x-P),be&&(Ie+=Ie>0?-Ee:Ee);const Qe=(me+G)/2,et=(de+Y)/2;return De[0]=[Qe,et,(le-o)/2,Ie,r],De}r=r.replace(/\n/g," ");for(let Qe=0,et=r.length;Qe<et;){V();let dt=Math.atan2(k-F,x-P);if(be&&(dt+=dt>0?-Ee:Ee),Ie!==void 0){let it=dt-Ie;if(it+=it>Ee?-2*Ee:it<-Ee?2*Ee:0,Math.abs(it)>s)return null}Ie=dt;const ke=Qe;let we=0;for(;Qe<et;++Qe){const it=be?et-Qe-1:Qe,bt=a*c(h,r[it],m);if(e+i<t&&q+j<o+we+bt/2)break;we+=bt}if(Qe===ke)continue;const ze=be?r.substring(et-ke,et-Qe):r.substring(ke,Qe);H=j===0?0:(o+we/2-q)/j;const xe=hf(P,x,H),At=hf(F,k,H);De.push([xe,At,we/2,dt,ze]),o+=we}return De}class MU{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(iS(),{get:(e,t)=>{if(typeof iS()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,i)=>(this.push_(t,i),!0)})}push_(...e){const t=this.instructions_,i=this.zIndex+this.offset_;t[i]||(t[i]=[]),t[i].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let i=0,r=t.length;i<r;++i){const o=t[i];if(typeof o=="function"){o(e);continue}const s=t[++i];if(typeof e[o]=="function")e[o](...s);else{if(typeof s=="function"){e[o]=s(e);continue}e[o]=s}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const FC=fp(),Cy=[],Q0=[],q0=[],_y=[];function Oj(n){return n[3].declutterBox}const Bj=new RegExp("[-----]");function cB(n,e){return e==="start"?e=Bj.test(n)?"right":"left":e==="end"&&(e=Bj.test(n)?"left":"right"),cS[e]}function obe(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function sbe(n,e,t){return t%2===0&&(n+=e),n}class abe{constructor(e,t,i,r,o){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=bd(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new MU:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,i,r){const o=e+t+i+r;if(this.labels_[o])return this.labels_[o];const s=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,c=this.textStates[t],h=this.pixelRatio,m=[c.scale[0]*h,c.scale[1]*h],y=c.justify?cS[c.justify]:cB(Array.isArray(e)?e[0]:e,c.textAlign||r4),M=r&&s.lineWidth?s.lineWidth:0,x=Array.isArray(e)?e:String(e).split(`
`).reduce(obe,[]),{width:k,height:P,widths:F,heights:j,lineWidths:q}=Ave(c,x),V=k+M,H=[],G=(V+2)*m[0],Y=(P+M)*m[1],z={width:G<0?Math.floor(G):Math.ceil(G),height:Y<0?Math.floor(Y):Math.ceil(Y),contextInstructions:H};(m[0]!=1||m[1]!=1)&&H.push("scale",m),r&&(H.push("strokeStyle",s.strokeStyle),H.push("lineWidth",M),H.push("lineCap",s.lineCap),H.push("lineJoin",s.lineJoin),H.push("miterLimit",s.miterLimit),H.push("setLineDash",[s.lineDash]),H.push("lineDashOffset",s.lineDashOffset)),i&&H.push("fillStyle",a.fillStyle),H.push("textBaseline","middle"),H.push("textAlign","center");const se=.5-y;let le=y*V+se*M;const me=[],de=[];let be=0,Ee=0,De=0,je=0,Ie;for(let Qe=0,et=x.length;Qe<et;Qe+=2){const dt=x[Qe];if(dt===`
`){Ee+=be,be=0,le=y*V+se*M,++je;continue}const ke=x[Qe+1]||c.font;ke!==Ie&&(r&&me.push("font",ke),i&&de.push("font",ke),Ie=ke),be=Math.max(be,j[De]);const we=[dt,le+se*F[De]+y*(F[De]-q[je]),.5*(M+be)+Ee];le+=F[De],r&&me.push("strokeText",we),i&&de.push("fillText",we),++De}return Array.prototype.push.apply(H,me),Array.prototype.push.apply(H,de),this.labels_[o]=z,z}replayTextBackground_(e,t,i,r,o,s,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,o),e.lineTo.apply(e,t),s&&(this.alignAndScaleFill_=s[2],e.fillStyle=s[1],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,o,s,a,c,h,m,y,M,x,k,P,F){a*=M[0],c*=M[1];let j=i-a,q=r-c;const V=o+h>e?e-h:o,H=s+m>t?t-m:s,G=k[3]+V*M[0]+k[1],Y=k[0]+H*M[1]+k[2],z=j-k[3],se=q-k[0];(P||y!==0)&&(Cy[0]=z,_y[0]=z,Cy[1]=se,Q0[1]=se,Q0[0]=z+G,q0[0]=Q0[0],q0[1]=se+Y,_y[1]=q0[1]);let le;return y!==0?(le=Fg(bd(),i,r,1,1,y,-i,-r),Qu(le,Cy),Qu(le,Q0),Qu(le,q0),Qu(le,_y),A1(Math.min(Cy[0],Q0[0],q0[0],_y[0]),Math.min(Cy[1],Q0[1],q0[1],_y[1]),Math.max(Cy[0],Q0[0],q0[0],_y[0]),Math.max(Cy[1],Q0[1],q0[1],_y[1]),FC)):A1(Math.min(z,z+G),Math.min(se,se+Y),Math.max(z,z+G),Math.max(se,se+Y),FC),x&&(j=Math.round(j),q=Math.round(q)),{drawImageX:j,drawImageY:q,drawImageW:V,drawImageH:H,originX:h,originY:m,declutterBox:{minX:FC[0],minY:FC[1],maxX:FC[2],maxY:FC[3],value:F},canvasTransform:le,scale:M}}replayImageOrLabel_(e,t,i,r,o,s,a){const c=!!(s||a),h=r.declutterBox,m=a?a[2]*r.scale[0]/2:0;return h.minX-m<=t[0]&&h.maxX+m>=0&&h.minY-m<=t[1]&&h.maxY+m>=0&&(c&&this.replayTextBackground_(e,Cy,Q0,q0,_y,s,a),hve(e,r.canvasTransform,o,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const i=Qu(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(i[0]%r,i[1]%r),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,i,r){const o=this.textStates[t],s=this.createLabel(e,t,r,i),a=this.strokeStates[i],c=this.pixelRatio,h=cB(Array.isArray(e)?e[0]:e,o.textAlign||r4),m=cS[o.textBaseline||rS],y=a&&a.lineWidth?a.lineWidth:0,M=s.width/c-2*o.scale[0],x=h*M+2*(.5-h)*y,k=m*s.height/c+2*(.5-m)*y;return{label:s,anchorX:x,anchorY:k}}execute_(e,t,i,r,o,s,a,c){const h=this.zIndexContext_;let m;this.pixelCoordinates_&&cv(i,this.renderedTransform_)?m=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),m=Xy(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),c1e(this.renderedTransform_,i));let y=0;const M=r.length;let x=0,k,P,F,j,q,V,H,G,Y,z,se,le,me,de=0,be=0;const Ee=this.coordinateCache_,De=this.viewRotation_,je=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,Ie={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:De},Qe=this.instructions!=r||this.overlaps?0:200;let et,dt,ke,we;for(;y<M;){const ze=r[y];switch(ze[0]){case Ar.BEGIN_GEOMETRY:et=ze[1],we=ze[3],et.getGeometry()?a!==void 0&&!Zl(a,we.getExtent())?y=ze[2]+1:++y:y=ze[2],h&&(h.zIndex=ze[4]);break;case Ar.BEGIN_PATH:de>Qe&&(this.fill_(e),de=0),be>Qe&&(e.stroke(),be=0),!de&&!be&&(e.beginPath(),q=NaN,V=NaN),++y;break;case Ar.CIRCLE:x=ze[1];const At=m[x],it=m[x+1],bt=m[x+2],Bt=m[x+3],Ke=bt-At,Te=Bt-it,Se=Math.sqrt(Ke*Ke+Te*Te);e.moveTo(At+Se,it),e.arc(At,it,Se,0,2*Math.PI,!0),++y;break;case Ar.CLOSE_PATH:e.closePath(),++y;break;case Ar.CUSTOM:x=ze[1],k=ze[2];const Ne=ze[3],ut=ze[4],rt=ze[5];Ie.geometry=Ne,Ie.feature=et,y in Ee||(Ee[y]=[]);const pt=Ee[y];rt?rt(m,x,k,2,pt):(pt[0]=m[x],pt[1]=m[x+1],pt.length=2),h&&(h.zIndex=ze[6]),ut(pt,Ie),++y;break;case Ar.DRAW_IMAGE:x=ze[1],k=ze[2],Y=ze[3],P=ze[4],F=ze[5];let Dt=ze[6];const Ot=ze[7],Jt=ze[8],Tn=ze[9],Ln=ze[10];let ii=ze[11];const wn=ze[12];let Rn=ze[13];j=ze[14]||"declutter";const gn=ze[15];if(!Y&&ze.length>=20){z=ze[19],se=ze[20],le=ze[21],me=ze[22];const pn=this.drawLabelWithPointPlacement_(z,se,le,me);Y=pn.label,ze[3]=Y;const $n=ze[23];P=(pn.anchorX-$n)*this.pixelRatio,ze[4]=P;const Zn=ze[24];F=(pn.anchorY-Zn)*this.pixelRatio,ze[5]=F,Dt=Y.height,ze[6]=Dt,Rn=Y.width,ze[13]=Rn}let Yn;ze.length>25&&(Yn=ze[25]);let Dn,Tt,_e;ze.length>17?(Dn=ze[16],Tt=ze[17],_e=ze[18]):(Dn=fb,Tt=null,_e=null),Ln&&je?ii+=De:!Ln&&!je&&(ii-=De);let oe=0;for(;x<k;x+=2){if(Yn&&Yn[oe++]<Rn/this.pixelRatio)continue;const pn=this.calculateImageOrLabelDimensions_(Y.width,Y.height,m[x],m[x+1],Rn,Dt,P,F,Jt,Tn,ii,wn,o,Dn,!!Tt||!!_e,et),$n=[e,t,Y,pn,Ot,Tt,_e];if(c){let Zn,ai,Hi;if(gn){const oi=k-x;if(!gn[oi]){gn[oi]={args:$n,declutterMode:j};continue}const Pi=gn[oi];Zn=Pi.args,ai=Pi.declutterMode,delete gn[oi],Hi=Oj(Zn)}let Ti,tr;if(Zn&&(ai!=="declutter"||!c.collides(Hi))&&(Ti=!0),(j!=="declutter"||!c.collides(pn.declutterBox))&&(tr=!0),ai==="declutter"&&j==="declutter"){const oi=Ti&&tr;Ti=oi,tr=oi}Ti&&(ai!=="none"&&c.insert(Hi),this.replayImageOrLabel_.apply(this,Zn)),tr&&(j!=="none"&&c.insert(pn.declutterBox),this.replayImageOrLabel_.apply(this,$n))}else this.replayImageOrLabel_.apply(this,$n)}++y;break;case Ar.DRAW_CHARS:const ee=ze[1],ne=ze[2],ue=ze[3],ye=ze[4];me=ze[5];const Ue=ze[6],Ve=ze[7],lt=ze[8];le=ze[9];const ge=ze[10];z=ze[11],Array.isArray(z)&&(z=z.reduce(sbe,"")),se=ze[12];const Be=[ze[13],ze[13]];j=ze[14]||"declutter";const v=ze[15],yt=this.textStates[se],Mt=yt.font,Pt=[yt.scale[0]*Ve,yt.scale[1]*Ve];let st;Mt in this.widths_?st=this.widths_[Mt]:(st={},this.widths_[Mt]=st);const fn=xU(m,ee,ne,2),Fn=Math.abs(Pt[0])*fj(Mt,z,st);if(ye||Fn<=fn){const pn=this.textStates[se].textAlign,$n=(fn-Fn)*cB(z,pn),Zn=rbe(m,ee,ne,2,z,$n,Ue,Math.abs(Pt[0]),fj,Mt,st,je?0:this.viewRotation_,v);e:if(Zn){const ai=[];let Hi,Ti,tr,oi,Pi;if(le)for(Hi=0,Ti=Zn.length;Hi<Ti;++Hi){Pi=Zn[Hi],tr=Pi[4],oi=this.createLabel(tr,se,"",le),P=Pi[2]+(Pt[0]<0?-ge:ge),F=ue*oi.height+(.5-ue)*2*ge*Pt[1]/Pt[0]-lt;const Zt=this.calculateImageOrLabelDimensions_(oi.width,oi.height,Pi[0],Pi[1],oi.width,oi.height,P,F,0,0,Pi[3],Be,!1,fb,!1,et);if(c&&j==="declutter"&&c.collides(Zt.declutterBox))break e;ai.push([e,t,oi,Zt,1,null,null])}if(me)for(Hi=0,Ti=Zn.length;Hi<Ti;++Hi){Pi=Zn[Hi],tr=Pi[4],oi=this.createLabel(tr,se,me,""),P=Pi[2],F=ue*oi.height-lt;const Zt=this.calculateImageOrLabelDimensions_(oi.width,oi.height,Pi[0],Pi[1],oi.width,oi.height,P,F,0,0,Pi[3],Be,!1,fb,!1,et);if(c&&j==="declutter"&&c.collides(Zt.declutterBox))break e;ai.push([e,t,oi,Zt,1,null,null])}c&&j!=="none"&&c.load(ai.map(Oj));for(let Zt=0,pr=ai.length;Zt<pr;++Zt)this.replayImageOrLabel_.apply(this,ai[Zt])}}++y;break;case Ar.END_GEOMETRY:if(s!==void 0){et=ze[1];const pn=s(et,we,j);if(pn)return pn}++y;break;case Ar.FILL:Qe?de++:this.fill_(e),++y;break;case Ar.MOVE_TO_LINE_TO:for(x=ze[1],k=ze[2],dt=m[x],ke=m[x+1],e.moveTo(dt,ke),q=dt+.5|0,V=ke+.5|0,x+=2;x<k;x+=2)dt=m[x],ke=m[x+1],H=dt+.5|0,G=ke+.5|0,(x==k-2||H!==q||G!==V)&&(e.lineTo(dt,ke),q=H,V=G);++y;break;case Ar.SET_FILL_STYLE:this.alignAndScaleFill_=ze[2],de&&(this.fill_(e),de=0,be&&(e.stroke(),be=0)),e.fillStyle=ze[1],++y;break;case Ar.SET_STROKE_STYLE:be&&(e.stroke(),be=0),this.setStrokeStyle_(e,ze),++y;break;case Ar.STROKE:Qe?be++:e.stroke(),++y;break;default:++y;break}}de&&this.fill_(e),be&&e.stroke()}execute(e,t,i,r,o,s){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,o,void 0,void 0,s)}executeHitDetection(e,t,i,r,o){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,r,o)}}const sb=["Polygon","Circle","LineString","Image","Text","Default"],AS=["Image","Text"],lbe=sb.filter(n=>!AS.includes(n));class Fee{constructor(e,t,i,r,o,s,a){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=bd(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,a)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,t){for(const i in e){let r=this.executorsByZIndex_[i];r===void 0&&(r={},this.executorsByZIndex_[i]=r);const o=e[i];for(const s in o){const a=o[s];r[s]=new abe(this.resolution_,this.pixelRatio_,this.overlaps_,a,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,o=e.length;r<o;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,o,s){r=Math.round(r);const a=r*2+1,c=Fg(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=Ul(a,a));const m=this.hitDetectionContext_;m.canvas.width!==a||m.canvas.height!==a?(m.canvas.width=a,m.canvas.height=a):h||m.clearRect(0,0,a,a);let y;this.renderBuffer_!==void 0&&(y=fp(),h3(y,e),Hy(y,t*(this.renderBuffer_+r),y));const M=ube(r);let x;function k(G,Y,z){const se=m.getImageData(0,0,a,a).data;for(let le=0,me=M.length;le<me;le++)if(se[M[le]]>0){if(!s||z==="none"||x!=="Image"&&x!=="Text"||s.includes(G)){const de=(M[le]-3)/4,be=r-de%a,Ee=r-(de/a|0),De=o(G,Y,be*be+Ee*Ee);if(De)return De}m.clearRect(0,0,a,a);break}}const P=Object.keys(this.executorsByZIndex_).map(Number);P.sort(Pg);let F,j,q,V,H;for(F=P.length-1;F>=0;--F){const G=P[F].toString();for(q=this.executorsByZIndex_[G],j=sb.length-1;j>=0;--j)if(x=sb[j],V=q[x],V!==void 0&&(H=V.executeHitDetection(m,c,i,k,y),H))return H}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],o=t[2],s=t[3],a=[i,r,i,s,o,s,o,r];return Xy(a,0,8,2,e,a),a}isEmpty(){return tv(this.executorsByZIndex_)}execute(e,t,i,r,o,s,a){const c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(a?o0e:Pg),s=s||sb;const h=sb.length;for(let m=0,y=c.length;m<y;++m){const M=c[m].toString(),x=this.executorsByZIndex_[M];for(let k=0,P=s.length;k<P;++k){const F=s[k],j=x[F];if(j!==void 0){const q=a===null?void 0:j.getZIndexContext(),V=q?q.getContext():e,H=this.maxExtent_&&F!=="Image"&&F!=="Text";if(H&&(V.save(),this.clip(V,i)),!q||F==="Text"||F==="Image"?j.execute(V,t,i,r,o,a):q.pushFunction(G=>j.execute(G,t,i,r,o,a)),H&&V.restore(),q){q.offset();const G=c[m]*h+sb.indexOf(F);this.deferredZIndexContexts_[G]||(this.deferredZIndexContexts_[G]=[]),this.deferredZIndexContexts_[G].push(q)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Pg);for(let i=0,r=t.length;i<r;++i)e[t[i]].forEach(o=>{o.draw(this.renderedContext_),o.clear()}),e[t[i]].length=0}}const AB={};function ube(n){if(AB[n]!==void 0)return AB[n];const e=n*2+1,t=n*n,i=new Array(t+1);for(let o=0;o<=n;++o)for(let s=0;s<=n;++s){const a=o*o+s*s;if(a>t)break;let c=i[a];c||(c=[],i[a]=c),c.push(((n+o)*e+(n+s))*4+3),o>0&&c.push(((n-o)*e+(n+s))*4+3),s>0&&(c.push(((n+o)*e+(n-s))*4+3),o>0&&c.push(((n-o)*e+(n-s))*4+3))}const r=[];for(let o=0,s=i.length;o<s;++o)i[o]&&r.push(...i[o]);return AB[n]=r,r}const gf=.5;function zee(n,e,t,i,r,o,s,a,c){const h=c?$P(r):r,m=n[0]*gf,y=n[1]*gf,M=Ul(m,y);M.imageSmoothingEnabled=!1;const x=M.canvas,k=new Kve(M,gf,r,null,s,a,c?o5(l1e(),c):null),P=t.length,F=Math.floor((256*256*256-1)/P),j={};for(let V=1;V<=P;++V){const H=t[V-1],G=H.getStyleFunction()||i;if(!G)continue;let Y=G(H,o);if(!Y)continue;Array.isArray(Y)||(Y=[Y]);const se=(V*F).toString(16).padStart(7,"#00000");for(let le=0,me=Y.length;le<me;++le){const de=Y[le],be=de.getGeometryFunction()(H);if(!be||!Zl(h,be.getExtent()))continue;const Ee=de.clone(),De=Ee.getFill();De&&De.setColor(se);const je=Ee.getStroke();je&&(je.setColor(se),je.setLineDash(null)),Ee.setText(void 0);const Ie=de.getImage();if(Ie){const ke=Ie.getImageSize();if(!ke)continue;const we=Ul(ke[0],ke[1],void 0,{alpha:!1}),ze=we.canvas;we.fillStyle=se,we.fillRect(0,0,ze.width,ze.height),Ee.setImage(new mx({img:ze,anchor:Ie.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Ie.getOrigin(),opacity:1,size:Ie.getSize(),scale:Ie.getScale(),rotation:Ie.getRotation(),rotateWithView:Ie.getRotateWithView()}))}const Qe=Ee.getZIndex()||0;let et=j[Qe];et||(et={},j[Qe]=et,et.Polygon=[],et.Circle=[],et.LineString=[],et.Point=[]);const dt=be.getType();if(dt==="GeometryCollection"){const ke=be.getGeometriesArrayRecursive();for(let we=0,ze=ke.length;we<ze;++we){const xe=ke[we];et[xe.getType().replace("Multi","")].push(xe,Ee)}}else et[dt.replace("Multi","")].push(be,Ee)}}const q=Object.keys(j).map(Number).sort(Pg);for(let V=0,H=q.length;V<H;++V){const G=j[q[V]];for(const Y in G){const z=G[Y];for(let se=0,le=z.length;se<le;se+=2){k.setStyle(z[se+1]);for(let me=0,de=e.length;me<de;++me)k.setTransform(e[me]),k.drawGeometry(z[se])}}}return M.getImageData(0,0,x.width,x.height)}function jee(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*gf),o=Math.floor(Math.round(n[1])*gf),s=(Pl(r,0,t.width-1)+Pl(o,0,t.height-1)*t.width)*4,a=t.data[s],c=t.data[s+1],m=t.data[s+2]+256*(c+256*a),y=Math.floor((256*256*256-1)/e.length);m&&m%y===0&&i.push(e[m/y-1])}return i}const cbe=5;class Abe extends i5{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=cbe}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return zr()}getData(e){return null}prepareFrame(e){return zr()}renderFrame(e,t){return zr()}forEachFeatureAtCoordinate(e,t,i,r,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===Fi.LOADED||t.getState()===Fi.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Fi.LOADED&&t!=Fi.ERROR&&e.addEventListener(Rr.CHANGE,this.boundHandleImageChange_),t==Fi.IDLE&&(e.load(),t=e.getState()),t==Fi.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const Ij=[];let C_=null;function hbe(){C_=Ul(1,1,void 0,{willReadFrequently:!0})}class wU extends Abe{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=bd(),this.pixelTransform=bd(),this.inversePixelTransform=bd(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,i){C_||hbe(),C_.clearRect(0,0,1,1);let r;try{C_.drawImage(e,t,i,1,1,0,0,1,1),r=C_.getImageData(0,0,1,1).data}catch{return C_=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let o,s;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&cv(dx(e.style.backgroundColor),dx(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(s=a.getContext("2d"))}if(s&&p1e(s.canvas.style.transform,t)?(this.container=e,this.context=s,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=document.createElement("div"),o.className=r;let a=o.style;a.position="absolute",a.width="100%",a.height="100%",s=Ul();const c=s.canvas;o.appendChild(c),a=c.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=o,this.context=s}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=g1(i),o=jE(i),s=zE(i),a=FE(i);Qu(t.coordinateToPixelTransform,r),Qu(t.coordinateToPixelTransform,o),Qu(t.coordinateToPixelTransform,s),Qu(t.coordinateToPixelTransform,a);const c=this.inversePixelTransform;Qu(c,r),Qu(c,o),Qu(c,s),Qu(c,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,t){const i=e.extent,r=e.viewState.resolution,o=e.viewState.rotation,s=e.pixelRatio,a=Math.round(cs(i)/r*s),c=Math.round($u(i)/r*s);Fg(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/s,1/s,o,-a/2,-c/2),qJ(this.inversePixelTransform,this.pixelTransform);const h=f1e(this.pixelTransform);if(this.useContainer(t,h,this.getBackground(e)),!this.containerReused){const m=this.context.canvas;m.width!=a||m.height!=c?(m.width=a,m.height=c):this.context.clearRect(0,0,a,c),h!==m.style.transform&&(m.style.transform=h)}}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const o=new Bee(e,this.inversePixelTransform,i,t);r.dispatchEvent(o)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(sp.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(sp.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new MU),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(sp.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(sp.POSTRENDER,this.context,e))}getRenderTransform(e,t,i,r,o,s,a){const c=o/2,h=s/2,m=r/t,y=-m,M=-e[0]+a,x=-e[1];return Fg(this.tempTransform,c,h,m,y,-i,M,x)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class dbe extends wU{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=fp(),this.wrappedRenderedExtent_=fp(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,o=t.viewState,s=o.center,a=o.resolution,c=o.projection,h=o.rotation,m=c.getExtent(),y=this.getLayer().getSource(),M=this.getLayer().getDeclutter(),x=t.pixelRatio,k=t.viewHints,P=!(k[_l.ANIMATING]||k[_l.INTERACTING]),F=this.context,j=Math.round(cs(r)/a*x),q=Math.round($u(r)/a*x),V=y.getWrapX()&&c.canWrapX(),H=V?cs(m):null,G=V?Math.ceil((r[2]-m[2])/H)+1:1;let Y=V?Math.floor((r[0]-m[0])/H):0;do{let z=this.getRenderTransform(s,a,0,x,j,q,Y*H);t.declutter&&(z=z.slice(0)),e.execute(F,[F.canvas.width,F.canvas.height],z,h,P,i===void 0?sb:i?AS:lbe,i?M&&t.declutter[M]:void 0)}while(++Y<G)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Ul(this.context.canvas.width,this.context.canvas.height,Ij))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,a5(this.context),Ij.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const r=e.viewState;this.prepareContainer(e,t);const o=this.context,s=this.replayGroup_;let a=s&&!s.isEmpty();if(!a&&!(this.getLayer().hasListener(sp.PRERENDER)||this.getLayer().hasListener(sp.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(o,e),r.projection,this.clipped_=!1,a&&i.extent&&this.clipping){const c=Mg(i.extent);a=Zl(c,e.extent),this.clipped_=a&&!xg(c,e.extent),this.clipped_&&this.clipUnrotated(o,e,c)}return a&&this.renderWorlds(s,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&o.restore(),this.postRender(o,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),r=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,a=this.renderedProjection_,c=this.wrappedRenderedExtent_,h=this.getLayer(),m=[],y=i[0]*gf,M=i[1]*gf;m.push(this.getRenderTransform(r,o,s,gf,y,M,0).slice());const x=h.getSource(),k=a.getExtent();if(x.getWrapX()&&a.canWrapX()&&!xg(k,c)){let P=c[0];const F=cs(k);let j=0,q;for(;P<k[0];)--j,q=F*j,m.push(this.getRenderTransform(r,o,s,gf,y,M,q).slice()),P+=F;for(j=0,P=c[2];P>k[2];)++j,q=F*j,m.push(this.getRenderTransform(r,o,s,gf,y,M,q).slice()),P-=F}this.hitDetectionImageData_=zee(i,m,this.renderedFeatures_,h.getStyleFunction(),c,o,s,sR(o,this.renderedPixelRatio_),null)}t(jee(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,r,o){if(!this.replayGroup_)return;const s=t.viewState.resolution,a=t.viewState.rotation,c=this.getLayer(),h={},m=function(M,x,k){const P=Vr(M),F=h[P];if(F){if(F!==!0&&k<F.distanceSq){if(k===0)return h[P]=!0,o.splice(o.lastIndexOf(F),1),r(M,c,x);F.geometry=x,F.distanceSq=k}}else{if(k===0)return h[P]=!0,r(M,c,x);o.push(h[P]={feature:M,layer:c,geometry:x,distanceSq:k,callback:r})}},y=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,s,a,i,m,y?t.declutter?.[y]?.all().map(M=>M.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[_l.ANIMATING],o=e.viewHints[_l.INTERACTING],s=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!s&&r||!a&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const c=e.extent,h=e.viewState,m=h.projection,y=h.resolution,M=e.pixelRatio,x=t.getRevision(),k=t.getRenderBuffer();let P=t.getRenderOrder();P===void 0&&(P=Fve);const F=h.center.slice(),j=Hy(c,k*y),q=j.slice(),V=[j.slice()],H=m.getExtent();if(i.getWrapX()&&m.canWrapX()&&!xg(H,e.extent)){const De=cs(H),je=Math.max(cs(j)/2,De);j[0]=H[0]-je,j[2]=H[2]+je,GP(F,m);const Ie=PJ(V[0],m);Ie[0]<H[0]&&Ie[2]<H[2]?V.push([Ie[0]+De,Ie[1],Ie[2]+De,Ie[3]]):Ie[0]>H[0]&&Ie[2]>H[2]&&V.push([Ie[0]-De,Ie[1],Ie[2]-De,Ie[3]])}if(this.ready&&this.renderedResolution_==y&&this.renderedRevision_==x&&this.renderedRenderOrder_==P&&this.renderedFrameDeclutter_===!!e.declutter&&xg(this.wrappedRenderedExtent_,j))return cv(this.renderedExtent_,q)||(this.hitDetectionImageData_=null,this.renderedExtent_=q),this.renderedCenter_=F,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const G=new Lee(Pee(y,M),j,y,M);let Y;for(let De=0,je=V.length;De<je;++De)i.loadFeatures(V[De],y,m);const z=sR(y,M);let se=!0;const le=((De,je)=>{let Ie;const Qe=De.getStyleFunction()||t.getStyleFunction();if(Qe&&(Ie=Qe(De,y)),Ie){const et=this.renderFeature(De,z,Ie,G,Y,this.getLayer().getDeclutter(),je);se=se&&!et}}),me=$P(j),de=i.getFeaturesInExtent(me);P&&de.sort(P);for(let De=0,je=de.length;De<je;++De)le(de[De],De);this.renderedFeatures_=de,this.ready=se;const be=G.finish(),Ee=new Fee(j,y,M,i.getOverlaps(),be,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=y,this.renderedRevision_=x,this.renderedRenderOrder_=P,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=q,this.wrappedRenderedExtent_=j,this.renderedCenter_=F,this.renderedProjection_=m,this.renderedPixelRatio_=M,this.replayGroup_=Ee,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,o,s,a){if(!i)return!1;let c=!1;if(Array.isArray(i))for(let h=0,m=i.length;h<m;++h)c=uS(r,e,i[h],t,this.boundHandleStyleImageChange_,o,s,a)||c;else c=uS(r,e,i,t,this.boundHandleStyleImageChange_,o,s,a);return c}}class SU extends _U{constructor(e){super(e)}createRenderer(){return new dbe(this)}}class fbe extends vU{constructor(e,t,i,r,o){const s=o!==void 0?Fi.IDLE:Fi.LOADED;super(e,t,i,s),this.loader_=o!==void 0?o:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=Fi.ERROR):this.state=Fi.LOADED,this.changed()}load(){this.state==Fi.IDLE&&(this.state=Fi.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}class f5 extends n5{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(Rr.CHANGE)}release(){this.setState(ri.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==ri.EMPTY){if(this.state!==ri.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){zr()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=t-i+1e3/60;return r>=this.transition_?1:KJ(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class Nee extends f5{constructor(e,t,i,r,o,s){super(e,t,s),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(e){this.image_=e,this.state=ri.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=ri.ERROR,this.unlistenImage_(),this.image_=pbe(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=ri.LOADED:this.state=ri.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==ri.ERROR&&(this.state=ri.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ri.IDLE&&(this.state=ri.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=nve(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function pbe(){const n=Ul(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}const LA={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class mbe extends dm{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+F1e,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(LA.ELEMENT,this.handleElementChanged),this.addChangeListener(LA.MAP,this.handleMapChanged),this.addChangeListener(LA.OFFSET,this.handleOffsetChanged),this.addChangeListener(LA.POSITION,this.handlePositionChanged),this.addChangeListener(LA.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(LA.ELEMENT)}getId(){return this.id}getMap(){return this.get(LA.MAP)||null}getOffset(){return this.get(LA.OFFSET)}getPosition(){return this.get(LA.POSITION)}getPositioning(){return this.get(LA.POSITIONING)}handleElementChanged(){see(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),Ra(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=is(e,Z0.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(LA.ELEMENT,e)}setMap(e){this.set(LA.MAP,e)}setOffset(e){this.set(LA.OFFSET,e)}setPosition(e){this.set(LA.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(LA.POSITION))return;const i=this.getRect(t.getTargetElement(),t.getSize()),r=this.getElement(),o=this.getRect(r,[j1e(r),N1e(r)]);e=e||{};const s=e.margin===void 0?20:e.margin;if(!xg(i,o)){const a=o[0]-i[0],c=i[2]-o[2],h=o[1]-i[1],m=i[3]-o[3],y=[0,0];if(a<0?y[0]=a-s:c<0&&(y[0]=Math.abs(c)+s),h<0?y[1]=h-s:m<0&&(y[1]=Math.abs(m)+s),y[0]!==0||y[1]!==0){const M=t.getView().getCenterInternal(),x=t.getPixelFromCoordinateInternal(M);if(!x)return;const k=[x[0]+y[0],x[1]+y[1]],P=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(k),duration:P.duration,easing:P.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),r=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[r,o,r+t[0],o+t[1]]}setPositioning(e){this.set(LA.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const i=e.getPixelFromCoordinate(t),r=e.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(e,t){const i=this.element.style,r=this.getOffset(),o=this.getPositioning();this.setVisible(!0);const s=`${e[0]+r[0]}px`,a=`${e[1]+r[1]}px`;let c="0%",h="0%";o=="bottom-right"||o=="center-right"||o=="top-right"?c="-100%":(o=="bottom-center"||o=="center-center"||o=="top-center")&&(c="-50%"),o=="bottom-left"||o=="bottom-center"||o=="bottom-right"?h="-100%":(o=="center-left"||o=="center-center"||o=="center-right")&&(h="-50%");const m=`translate(${c}, ${h}) translate(${s}, ${a})`;this.rendered.transform_!=m&&(this.rendered.transform_=m,i.transform=m)}getOptions(){return this.options}}class EU{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function zC(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new EU(n,e,t,i)}const kj=[];class gbe extends f5{constructor(e,t,i,r,o){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.removeSourceTiles_=o,this.wrappedTileCoord=i}getContext(){return this.context_||(this.context_=Ul(1,1,kj)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=Vr(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(a5(this.context_),kj.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let Gee=class extends f5{constructor(e,t,i,r,o,s){super(e,t,s),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=o,this.url_=i,this.key=i}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==ri.IDLE&&(this.setState(ri.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(ri.ERROR)}setFeatures(e){this.features_=e,this.setState(ri.LOADED)}setLoader(e){this.loader_=e}};const Wee="https://api.mapbox.com";function OU(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function ybe(n,e,t){if(typeof n=="string")return[{id:"default",url:Tj(n,e,t)}];for(const i of n)i.url=Tj(i.url,e,t);return n}function Tj(n,e,t){const i=OU(n);if(!i)return decodeURI(new URL(n,t).href);const r="sprites/";if(i.indexOf(r)!==0)throw new Error(`unexpected sprites url: ${n}`);const o=i.slice(r.length);return`${Wee}/styles/v1/${o}/sprite?access_token=${e}`}function hS(n,e){const t=OU(n);if(!t)return decodeURI(new URL(n,location.href).href);const i="styles/";if(t.indexOf(i)!==0)throw new Error(`unexpected style url: ${n}`);const r=t.slice(i.length);return`${Wee}/styles/v1/${r}?&access_token=${e}`}const vbe=["a","b","c","d"];function uw(n,e,t,i){const r=new URL(n,i||location.href),o=OU(n);if(!o)return e?(r.searchParams.has(t)||r.searchParams.set(t,e),[decodeURI(r.href)]):[decodeURI(r.href)];if(o==="mapbox.satellite"){const s=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${o}/{z}/{x}/{y}${s}.webp?access_token=${e}`]}return vbe.map(s=>`https://${s}.tiles.mapbox.com/v4/${o}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const Jp=Object.freeze({}),Rj={},Dj={};let bbe=0;function BU(n){return n.id||(n.id=bbe++),n.id}function Cbe(n,e){return BU(n)+"."+Vr(e)}function Qee(n){let e=Rj[n.id];return e||(e={},Rj[BU(n)]=e),e}function _be(n){let e=Dj[n.id];return e||(e={},Dj[BU(n)]=e),e}function hB(n){return n*Math.PI/180}const Kg=(function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n})();function n6(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function IU(n,e){let t=0;const i=e.length;for(;t<i;++t)if(e[t]<n&&t+1<i){const o=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(o)}return i-1}function q2(n,e){const t=Math.floor(n),i=Math.pow(2,n-t);return e[t]/i}const jC={};function gx(n,e,t={},i){if(e in jC)return i&&(i.url=jC[e][0].url),jC[e][1];const r=t.transformRequest&&t.transformRequest(e,n)||e,o=function(c){return delete jC[e],Promise.reject(new Error("Error fetching source "+e))},s=function(c){return delete jC[e],c.ok?c.json():Promise.reject(new Error("Error fetching source "+e))},a=Ax(()=>r).then(c=>c instanceof Response?(i&&(i.url=c.url),s(c)):(c instanceof Request||(c=new Request(c)),c.headers.get("Accept")||c.headers.set("Accept","application/json"),i&&(i.url=c.url),fetch(c).then(s).catch(o))).catch(o);return jC[e]=[r,a],a}function qee(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=hS(n,e.accessToken),gx("Style",n,e);else return Promise.resolve(n)}const Pj={};function Yee(n,e,t={}){const i=[e,JSON.stringify(n)].toString();let r=Pj[i];if(!r||t.transformRequest){let o;t.transformRequest&&(o=(a,c)=>{const h=t.transformRequest&&t.transformRequest(c,"Tiles")||c;if(a instanceof Gee)a.setLoader((m,y,M)=>{const x=function(k){k.arrayBuffer().then(P=>{const j=a.getFormat().readFeatures(P,{extent:m,featureProjection:M});a.setFeatures(j)})};Ax(()=>h).then(k=>{if(k instanceof Response)return x(k);fetch(k).then(x).catch(P=>a.setState(ri.ERROR))}).catch(k=>a.setState(ri.ERROR))});else{const m=a.getImage();Ax(()=>h).then(y=>{if(typeof y=="string"){m.src=y;return}const M=x=>x.blob().then(k=>{const P=URL.createObjectURL(k);m.addEventListener("load",()=>URL.revokeObjectURL(P)),m.addEventListener("error",()=>URL.revokeObjectURL(P)),m.src=P});if(y instanceof Response)return M(y);fetch(y).then(M).catch(x=>a.setState(ri.ERROR))}).catch(y=>a.setState(ri.ERROR))}});const s=n.url;if(s&&!n.tiles){const a=uw(s,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(s.startsWith("mapbox://"))r=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:a}),tileLoadFunction:o});else{const c={};r=gx("Source",a[0],t,c).then(function(h){return h.tiles=h.tiles.map(function(m){return h.scheme==="tms"&&(m=m.replace("{y}","{-y}")),uw(m,t.accessToken,t.accessTokenParam||"access_token",c.url)[0]}),Promise.resolve({tileJson:h,tileLoadFunction:o})})}}else n.tiles?(n=Object.assign({},n,{tiles:n.tiles.map(function(a){return n.scheme==="tms"&&(a=a.replace("{y}","{-y}")),uw(a,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),r=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:o})):r=Promise.reject(new Error("source has no `tiles` nor `url`"));Pj[i]=r}return r}function Uj(n,e,t,i){const r=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],o=n6(r[0],r[1]),s=o.getContext("2d");s.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const a=s.getImageData(0,0,r[0],r[1]);s.globalCompositeOperation="destination-over",s.fillStyle=`rgba(${i.r*255},${i.g*255},${i.b*255},${i.a})`;const c=a.data;for(let h=0,m=a.width;h<m;++h)for(let y=0,M=a.height;y<M;++y){const x=(y*m+h)*4;c[x+3]>0&&s.arc(h,y,t*e.pixelRatio,0,2*Math.PI)}return s.fill(),o}function xbe(n,e,t){const i=Math.max(0,Math.min(1,(t-n)/(e-n)));return i*i*(3-2*i)}function Kj(n,e,t){const i=n6(e.width,e.height),r=i.getContext("2d");r.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const o=r.getImageData(0,0,e.width,e.height),s=o.data;for(let a=0,c=o.width;a<c;++a)for(let h=0,m=o.height;h<m;++h){const y=(h*c+a)*4,M=s[y+3]/255,x=.75,k=.1,P=xbe(x-k,x+k,M);P>0?(s[y+0]=Math.round(255*t.r*P),s[y+1]=Math.round(255*t.g*P),s[y+2]=Math.round(255*t.b*P),s[y+3]=Math.round(255*P)):s[y+3]=0}return r.putImageData(o,0,0),i}const Mbe=Array(256).join("");function aR(n,e){if(e>=.05){let t="";const i=n.split(`
`),r=Mbe.slice(0,Math.round(e/.1));for(let o=0,s=i.length;o<s;++o)o>0&&(t+=`
`),t+=i[o].split("").join(r);return t}return n}let dB;function $ee(){return dB||(dB=n6(1,1).getContext("2d")),dB}function Xv(n,e){return $ee().measureText(n).width+(n.length-1)*e}const dS={};ob.on("propertychange",()=>{for(const n in dS)delete dS[n]});function lR(n,e,t,i){if(n.indexOf(`
`)!==-1){const s=n.split(`
`),a=[];for(let c=0,h=s.length;c<h;++c)a.push(lR(s[c],e,t,i));return a.join(`
`)}const r=t+","+e+","+n+","+i;let o=dS[r];if(!o){const s=n.split(" ");if(s.length>1){const a=$ee();a.font=e;const h=a.measureText("M").width*t;let m="";const y=[];for(let M=0,x=s.length;M<x;++M){const k=s[M],P=m+(m?" ":"")+k;Xv(P,i)<=h?m=P:(m&&y.push(m),m=k)}m&&y.push(m);for(let M=0,x=y.length;M<x&&x>1;++M){const k=y[M];if(Xv(k,i)<h*.35){const P=M>0?Xv(y[M-1],i):1/0,F=M<x-1?Xv(y[M+1],i):1/0;y.splice(M,1),x-=1,P<F?(y[M-1]+=" "+k,M-=1):y[M]=k+" "+y[M]}}for(let M=0,x=y.length-1;M<x;++M){const k=y[M],P=y[M+1];if(Xv(k,i)>h*.7&&Xv(P,i)<h*.6){const F=k.split(" "),j=F.pop();Xv(j,i)<h*.2&&(y[M]=F.join(" "),y[M+1]=j+" "+P),x-=1}}o=y.join(`
`)}else o=n;o=aR(o,i),dS[r]=o}return o}const wbe=["Arial","Courier New","Times New Roman","Verdana","sans-serif","serif","monospace","cursive","fantasy"],Lj={};function Sbe(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){let t;for(let i=0,r=n.length;i<r;++i){const o=n[i];if(o in Lj)continue;Lj[o]=!0;const a=F9(o,16).split(" ");t||(t=[]),t.push([a.slice(3).join(" ").replace(/"/g,""),a[1],a[0]])}return t&&(async()=>{await document.fonts.ready;for(let i=0,r=t.length;i<r;++i){const o=t[i],s=o[0];if(wbe.includes(s))continue;const a=o[1],c=o[2];if(!(await document.fonts.load(`${c} ${a} 16px "${s}"`)).some(m=>m.family.replace(/^['"]|['"]$/g,"").toLowerCase()===s.toLowerCase()&&m.weight==a&&m.style===c)){const m=e.replace("{font-family}",s.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",s.replace(/ /g,"+")).replace("{fontweight}",a).replace("{-fontstyle}",c.replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",c);if(!document.querySelector('link[href="'+m+'"]')){const y=document.createElement("link");y.href=m,y.rel="stylesheet",document.head.appendChild(y)}}}})(),n}const Ebe={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},Obe={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},Bbe=function(n,e){const t=Wge(n,e);if(t.result==="error")throw new Error(t.value.map(i=>`${i.key}: ${i.message}`).join(", "));return t.value},xf={zoom:0,distanceFromCenter:0};vf.register(DE,{...vf.definitions,pitch:[{kind:"number"},[],n=>xf.pitch||90],"distance-from-center":[{kind:"number"},[],n=>xf.distanceFromCenter||0]});let oM,fB;function Qi(n,e,t,i,r,o){const s=n.id;r||(r={},console.warn("No functionCache provided to getValue()")),r[s]||(r[s]={});const a=r[s];if(!a[t]){let c=(n[e]||Jp)[t];const h=i0e[`${e}_${n.type}`][t];c===void 0&&(c=h.default);let m=Gge(c);if(!m&&bJ(c)&&(c=Zge(c,h),m=!0),m){const y=Bbe(c,h);a[t]=y.evaluate.bind(y)}else h.type=="color"&&(c=Zs.parse(c)),a[t]=function(){return c}}return a[t](xf,i,o)}function Fj(n,e,t,i){return Qi(n,"layout",`${t}-allow-overlap`,e,i)?Qi(n,"layout",`${t}-ignore-placement`,e,i)?"none":"obstacle":"declutter"}function Ibe(n,e,t,i){if(i||console.warn("No filterCache provided to evaluateFilter()"),!(n in i))try{i[n]=$ge(e).filter}catch(r){console.warn("Filter will evaluate to false: "+r.message),i[n]=function(){return!1}}return i[n](xf,t)}function Ey(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const kbe=/\{[^{}}]*\}/g;function pB(n,e){return n.replace(kbe,function(t){return e[t.slice(1,-1)]||""})}function zj(n,e){let t=n.split(":")[0];return t===n&&(t="default"),e[t]}const Tbe={};function Rbe(n,e,t,i=Kg,r=void 0,o=void 0,s=void 0,a=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");Tbe[Cbe(e,n)]=Array.from(arguments);const c={};(typeof o=="string"||o instanceof Request||o instanceof Response||o instanceof Promise)&&(o={default:o});for(const G in o){const Y=o[G];Ax(()=>Y).then(async z=>{let se;if(typeof Image<"u"){const le=new Image;if(typeof z=="string")le.crossOrigin="anonymous",le.src=z;else{let me;z instanceof Request?me=await fetch(z):z instanceof Response&&(me=z);const de=await me.blob();se=URL.createObjectURL(de),le.src=se}le.addEventListener("load",function me(){le.removeEventListener("load",me),c[G]={image:le,size:[le.width,le.height]},n.changed(),se&&URL.revokeObjectURL(se)}),le.addEventListener("error",function me(){URL.revokeObjectURL(se),le.removeEventListener("error",me)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const le=self;le.postMessage({action:"loadImage",src:z}),le.addEventListener("message",function(de){de.data.action==="imageLoaded"&&de.data.src===z&&(c[G]={image:de.data.image,size:[de.data.image.width,de.data.image.height]})})}})}const h=eJ(e.layers),m={},y=[],M={},x={},k=Qee(e),P=_be(e);let F;for(let G=0,Y=h.length;G<Y;++G){const z=h[G],se=z.id;if(typeof t=="string"&&z.source==t||Array.isArray(t)&&t.indexOf(se)!==-1){const le=z["source-layer"];if(F){if(z.source!==F)throw new Error(`Layer "${se}" does not use source "${F}`)}else{F=z.source;const de=e.sources[F];if(!de)throw new Error(`Source "${F}" is not defined`);const be=de.type;if(be!=="vector"&&be!=="geojson")throw new Error(`Source "${F}" is not of type "vector" or "geojson", but "${be}"`)}let me=m[le];me||(me=[],m[le]=me),me.push({layer:z,index:G}),y.push(se)}}const j=new Fy,q=new n1,V=[],H=function(G,Y,z){const se=n.getSource?.()?.format_?.layerName_??"mvt:layer",le=G.getProperties(),me=m[le[se]];if(!me)return;let de=i.indexOf(Y);de==-1&&(de=IU(Y,i)),xf.zoom=de,xf.distanceFromCenter=0;const be=G.getGeometry(),Ee=Ebe[be.getType()],De=n.get("map");if(De&&De instanceof e6&&Ee===1){const et=De.getSize();if(et){const dt=De.getView().getCenter(),ke=Mf(be.getExtent());xf.distanceFromCenter=B0e(dt,ke)/Y/et[1]}}const je={id:G.getId(),properties:le,type:Ee},Ie=n.get("mapbox-featurestate")[G.getId()];let Qe=-1;for(let et=0,dt=me.length;et<dt;++et){const ke=me[et],we=ke.layer,ze=we.id;if(z!==void 0&&z!==ze)continue;const xe=we.layout||Jp,At=we.paint||Jp;if(xe.visibility==="none"||"minzoom"in we&&de<we.minzoom||"maxzoom"in we&&de>=we.maxzoom)continue;const it=we.filter;if(!it||Ibe(ze,it,je,P)){let bt,Bt,Ke,Te,Se,Ne;const ut=ke.index;if(Ee==3&&(we.type=="fill"||we.type=="fill-extrusion"))if(Bt=Qi(we,"paint",we.type+"-opacity",je,k,Ie),we.type+"-pattern"in At){const Dn=Qi(we,"paint",we.type+"-pattern",je,k,Ie);if(Dn){const Tt=typeof Dn=="string"?pB(Dn,le):Dn.toString(),_e=zj(Tt,c);if(r&&r[Tt]&&_e){++Qe,Ne=V[Qe],(!Ne||!Ne.getFill()||Ne.getStroke()||Ne.getText())&&(Ne=new df({fill:new n1}),V[Qe]=Ne),Ke=Ne.getFill(),Ne.setZIndex(ut);const oe=Tt+"."+Bt;let ee=x[oe];if(!ee){const ne=r[Tt],ue=n6(ne.width,ne.height),ye=ue.getContext("2d");ye.globalAlpha=Bt,ye.drawImage(_e.image,ne.x,ne.y,ne.width,ne.height,0,0,ne.width,ne.height),ee=ye.createPattern(ue,"repeat"),x[oe]=ee}Ke.setColor(ee)}}}else bt=Ey(Qi(we,"paint",we.type+"-color",je,k,Ie),Bt),we.type+"-outline-color"in At&&(Se=Ey(Qi(we,"paint",we.type+"-outline-color",je,k,Ie),Bt)),Se||(Se=bt),(bt||Se)&&(++Qe,Ne=V[Qe],(!Ne||bt&&!Ne.getFill()||!bt&&Ne.getFill()||Se&&!Ne.getStroke()||!Se&&Ne.getStroke()||Ne.getText())&&(Ne=new df({fill:bt?new n1:void 0,stroke:Se?new Fy:void 0}),V[Qe]=Ne),bt&&(Ke=Ne.getFill(),Ke.setColor(bt)),Se&&(Te=Ne.getStroke(),Te.setColor(Se),Te.setWidth(.5)),Ne.setZIndex(ut));if(Ee!=1&&we.type=="line"){"line-pattern"in At?bt=void 0:bt=Ey(Qi(we,"paint","line-color",je,k,Ie),Qi(we,"paint","line-opacity",je,k,Ie));const Dn=Qi(we,"paint","line-width",je,k,Ie);bt&&Dn>0&&(++Qe,Ne=V[Qe],(!Ne||!Ne.getStroke()||Ne.getFill()||Ne.getText())&&(Ne=new df({stroke:new Fy}),V[Qe]=Ne),Te=Ne.getStroke(),Te.setLineCap(Qi(we,"layout","line-cap",je,k,Ie)),Te.setLineJoin(Qi(we,"layout","line-join",je,k,Ie)),Te.setMiterLimit(Qi(we,"layout","line-miter-limit",je,k,Ie)),Te.setColor(bt),Te.setWidth(Dn),Te.setLineDash(At["line-dasharray"]?Qi(we,"paint","line-dasharray",je,k,Ie).map(function(Tt){return Tt*Dn}):null),Ne.setZIndex(ut))}let rt=!1,pt=null,Dt=0,Ot,Jt,Tn;if((Ee==1||Ee==2)&&"icon-image"in xe){const Dn=Qi(we,"layout","icon-image",je,k,Ie);if(Dn){Ot=typeof Dn=="string"?pB(Dn,le):Dn.toString();let Tt;const _e=a?a(n,Ot):void 0,oe=zj(Ot,c);if(r&&r[Ot]&&oe||_e){const ee=Qi(we,"layout","icon-rotation-alignment",je,k,Ie);if(Ee==2){const ne=G.getGeometry();if(ne.getFlatMidpoint||ne.getFlatMidpoints){const ue=ne.getExtent();if(Math.sqrt(Math.max(Math.pow((ue[2]-ue[0])/Y,2),Math.pow((ue[3]-ue[1])/Y,2)))>150){const Ue=ne.getType()==="MultiLineString"?ne.getFlatMidpoints():ne.getFlatMidpoint();if(fB||(oM=[NaN,NaN],fB=new NA("Point",oM,[],2,{},void 0)),Tt=fB,oM[0]=Ue[0],oM[1]=Ue[1],Qi(we,"layout","symbol-placement",je,k,Ie)==="line"&&ee==="map"){const lt=ne.getStride(),ge=ne.getFlatCoordinates();for(let Be=0,v=ge.length-lt;Be<v;Be+=lt){const yt=ge[Be],Mt=ge[Be+1],Pt=ge[Be+lt],st=ge[Be+lt+1],fn=Math.min(yt,Pt),Fn=Math.max(yt,Pt),pn=Ue[0],$n=Ue[1],Zn=(st-Mt)*(pn-yt)-(Pt-yt)*($n-Mt);if(Math.abs(Zn)<.001&&pn<=Fn&&pn>=fn){Dt=Math.atan2(Mt-st,Pt-yt);break}}}}}}if(Ee!==2||Tt){const ne=Qi(we,"layout","icon-size",je,k,Ie),ue=At["icon-color"]!==void 0?Qi(we,"paint","icon-color",je,k,Ie):null;if(!ue||ue.a!==0){const ye=Qi(we,"paint","icon-halo-color",je,k,Ie),Ue=Qi(we,"paint","icon-halo-width",je,k,Ie);let Ve=`${Ot}.${ne}.${Ue}.${ye}`;if(ue!==null&&(Ve+=`.${ue}`),Jt=M[Ve],!Jt){const lt=Fj(we,je,"icon",k);let ge;"icon-offset"in xe&&(ge=Qi(we,"layout","icon-offset",je,k,Ie).slice(0),ge[0]*=ne,ge[1]*=-ne);let Be=ue?[ue.r*255,ue.g*255,ue.b*255,ue.a]:void 0;if(_e){const v={color:Be,rotateWithView:ee==="map",displacement:ge,declutterMode:lt,scale:ne};typeof _e=="string"?v.src=_e:(v.img=_e,v.imgSize=[_e.width,_e.height]),Jt=new mx(v)}else{const v=r[Ot];let yt,Mt,Pt;if(Ue)v.sdf?(yt=Uj(Kj(oe.image,v,ue||[0,0,0,1]),{x:0,y:0,width:v.width,height:v.height,pixelRatio:v.pixelRatio},Ue,ye),Be=void 0):yt=Uj(oe.image,v,Ue,ye);else{if(v.sdf&&!oe.unSDFed){const st=Kj(oe.image,{x:0,y:0,width:oe.size[0],height:oe.size[1]},{r:1,g:1,b:1});oe.image=st,oe.unSDFed=!0}yt=oe.image,Mt=[v.width,v.height],Pt=[v.x,v.y]}Jt=new mx({color:Be,img:yt,imgSize:oe.size,size:Mt,offset:Pt,rotateWithView:ee==="map",scale:ne/v.pixelRatio,displacement:ge,declutterMode:lt})}M[Ve]=Jt}}Jt&&(++Qe,Ne=V[Qe],(!Ne||!Ne.getImage()||Ne.getFill()||Ne.getStroke())&&(Ne=new df,V[Qe]=Ne),Ne.setGeometry(Tt),Jt.setRotation(Dt+hB(Qi(we,"layout","icon-rotate",je,k,Ie))),Jt.setOpacity(Qi(we,"paint","icon-opacity",je,k,Ie)),Jt.setAnchor(Obe[Qi(we,"layout","icon-anchor",je,k,Ie)]),Ne.setImage(Jt),pt=Ne.getText(),Ne.setText(void 0),Ne.setZIndex(ut),rt=!0,Tn=!1)}else Tn=!0}}}if(Ee==1&&we.type==="circle"){++Qe,Ne=V[Qe],(!Ne||!Ne.getImage()||Ne.getFill()||Ne.getStroke())&&(Ne=new df,V[Qe]=Ne);const Dn="circle-radius"in At?Qi(we,"paint","circle-radius",je,k,Ie):5,Tt=Ey(Qi(we,"paint","circle-stroke-color",je,k,Ie),Qi(we,"paint","circle-stroke-opacity",je,k,Ie)),_e=Qi(we,"paint","circle-translate",je,k,Ie),oe=Ey(Qi(we,"paint","circle-color",je,k,Ie),Qi(we,"paint","circle-opacity",je,k,Ie)),ee=Qi(we,"paint","circle-stroke-width",je,k,Ie),ne=Dn+"."+Tt+"."+oe+"."+ee+"."+_e[0]+"."+_e[1];Jt=M[ne],Jt||(Jt=new c5({radius:Dn,displacement:[_e[0],-_e[1]],stroke:Tt&&ee>0?new Fy({width:ee,color:Tt}):void 0,fill:oe?new n1({color:oe}):void 0,declutterMode:"none"}),M[ne]=Jt),Ne.setImage(Jt),pt=Ne.getText(),Ne.setText(void 0),Ne.setGeometry(void 0),Ne.setZIndex(ut),rt=!0}let Ln,ii,wn,Rn,gn,Yn;if("text-field"in xe){Rn=Math.round(Qi(we,"layout","text-size",je,k,Ie));const Dn=Qi(we,"layout","text-font",je,k,Ie);wn=Qi(we,"layout","text-line-height",je,k,Ie),ii=F9(s?s(Dn,e.metadata?e.metadata["ol:webfonts"]:void 0):Dn,Rn,wn),ii.includes("sans-serif")||(ii+=",sans-serif"),gn=Qi(we,"layout","text-letter-spacing",je,k,Ie),Yn=Qi(we,"layout","text-max-width",je,k,Ie);const Tt=Qi(we,"layout","text-field",je,k,Ie);typeof Tt=="object"&&Tt.sections?Tt.sections.length===1?Ln=Tt.toString():Ln=Tt.sections.reduce((_e,oe,ee)=>{const ne=oe.fontStack?oe.fontStack.split(","):Dn,ue=F9(s?s(ne):ne,Rn*(oe.scale||1),wn);let ye=oe.text;if(ye===`
`)return _e.push(`
`,""),_e;if(Ee==2)return _e.push(aR(ye,gn),ue),_e;ye=lR(ye,ue,Yn,gn).split(`
`);for(let Ue=0,Ve=ye.length;Ue<Ve;++Ue)Ue>0&&_e.push(`
`,""),_e.push(ye[Ue],ue);return _e},[]):Ln=pB(Tt,le).trim(),Bt=Qi(we,"paint","text-opacity",je,k,Ie)}if(Ln&&Bt&&!Tn){rt||(++Qe,Ne=V[Qe],(!Ne||!Ne.getText()||Ne.getFill()||Ne.getStroke())&&(Ne=new df,V[Qe]=Ne),Ne.setImage(void 0),Ne.setGeometry(void 0));const Dn=Fj(we,je,"text",k);Ne.getText()||Ne.setText(pt),pt=Ne.getText(),(!pt||"getDeclutterMode"in pt&&pt.getDeclutterMode()!==Dn)&&(pt=new xee({padding:[2,2,2,2],declutterMode:Dn}),Ne.setText(pt));const Tt=Qi(we,"layout","text-transform",je,k,Ie);Tt=="uppercase"?Ln=Array.isArray(Ln)?Ln.map((Pt,st)=>st%2?Pt:Pt.toUpperCase()):Ln.toUpperCase():Tt=="lowercase"&&(Ln=Array.isArray(Ln)?Ln.map((Pt,st)=>st%2?Pt:Pt.toLowerCase()):Ln.toLowerCase());const _e=Array.isArray(Ln)?Ln:Ee==2?aR(Ln,gn):lR(Ln,ii,Yn,gn);if(pt.setText(_e),pt.setFont(ii),pt.setRotation(hB(Qi(we,"layout","text-rotate",je,k,Ie))),typeof pt.setKeepUpright=="function"){const Pt=Qi(we,"layout","text-keep-upright",je,k,Ie);pt.setKeepUpright(Pt)}const oe=Qi(we,"layout","text-anchor",je,k,Ie),ee=rt||Ee==1?"point":Qi(we,"layout","symbol-placement",je,k,Ie);let ne;if(ee==="line-center"?(pt.setPlacement("line"),ne="center"):pt.setPlacement(ee),ee==="line"&&typeof pt.setRepeat=="function"){const Pt=Qi(we,"layout","symbol-spacing",je,k,Ie);pt.setRepeat(Pt*2)}pt.setOverflow(ee==="point");let ue=Qi(we,"paint","text-halo-width",je,k,Ie);const ye=Qi(we,"layout","text-offset",je,k,Ie),Ue=Qi(we,"paint","text-translate",je,k,Ie);let Ve=0,lt=0;if(ee=="point"){ne="center",oe.indexOf("left")!==-1?(ne="left",lt=ue):oe.indexOf("right")!==-1&&(ne="right",lt=-ue);const Pt=Qi(we,"layout","text-rotation-alignment",je,k,Ie);pt.setRotateWithView(Pt=="map")}else pt.setMaxAngle(hB(Qi(we,"layout","text-max-angle",je,k,Ie))*Ln.length/_e.length),pt.setRotateWithView(!1);pt.setTextAlign(ne);let ge="middle";oe.indexOf("bottom")==0?(ge="bottom",Ve=-ue-.5*(wn-1)*Rn):oe.indexOf("top")==0&&(ge="top",Ve=ue+.5*(wn-1)*Rn),pt.setTextBaseline(ge);const Be=Qi(we,"layout","text-justify",je,k,Ie);pt.setJustify(Be==="auto"?void 0:Be),pt.setOffsetX(ye[0]*Rn+lt+Ue[0]),pt.setOffsetY(ye[1]*Rn+Ve+Ue[1]),q.setColor(Ey(Qi(we,"paint","text-color",je,k,Ie),Bt)),pt.setFill(q);const v=Ey(Qi(we,"paint","text-halo-color",je,k,Ie),Bt);if(v&&ue>0){j.setColor(v),ue*=2;const Pt=.5*Rn;j.setWidth(ue<=Pt?ue:Pt),pt.setStroke(j)}else pt.setStroke(void 0);const yt=Qi(we,"layout","text-padding",je,k,Ie),Mt=pt.getPadding();yt!==Mt[0]&&(Mt[0]=yt,Mt[1]=yt,Mt[2]=yt,Mt[3]=yt),Ne.setZIndex(ut)}}}if(Qe>-1)return V.length=Qe+1,V};return n.setStyle(H),n.set("mapbox-layers",y),n.set("mapbox-source",F),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),H}class Vee{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=t6,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?Xs(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Xs(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return zr()}readFeature(e,t){return zr()}readFeatures(e,t){return zr()}readGeometry(e,t){return zr()}readProjection(e){return zr()}writeFeature(e,t){return zr()}writeFeatures(e,t){return zr()}writeGeometry(e,t){return zr()}}function i6(n,e,t){const i=t?Xs(t.featureProjection):null,r=t?Xs(t.dataProjection):null;let o=n;if(i&&r&&!Zy(i,r)){e&&(o=n.clone());const s=e?i:r,a=e?r:i;s.getUnits()==="tile-pixels"?o.transform(s,a):o.applyTransform(J3(s,a))}if(e&&t&&t.decimals!==void 0){const s=Math.pow(10,t.decimals),a=function(c){for(let h=0,m=c.length;h<m;++h)c[h]=Math.round(c[h]*s)/s;return c};o===n&&(o=n.clone()),o.applyTransform(a)}return o}const Dbe={Point:Lb,LineString:zb,Polygon:d1,MultiPoint:h5,MultiLineString:l4,MultiPolygon:u4};function Pbe(n,e,t){return Array.isArray(e[0])?(iee(n,0,e,t)||(n=n.slice(),X9(n,0,e,t)),n):(oU(n,0,e,t)||(n=n.slice(),nS(n,0,e,t)),n)}function Hee(n,e){const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>Hee({...n,geometry:o})).flat();const i=t.type==="MultiPolygon"?"Polygon":t.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const r=t.layout.length;return i6(new NA(i,i==="Polygon"?Pbe(t.flatCoordinates,t.ends,r):t.flatCoordinates,t.ends?.flat(),r,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function kU(n,e){if(!n)return null;if(Array.isArray(n)){const i=n.map(r=>kU(r,e));return new lS(i)}const t=Dbe[n.type];return i6(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class Ube extends Vee{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(sM(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(sM(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return zr()}readFeaturesFromObject(e,t){return zr()}readGeometry(e,t){return this.readGeometryFromObject(sM(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return zr()}readProjection(e){return this.readProjectionFromObject(sM(e))}readProjectionFromObject(e){return zr()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return zr()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return zr()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return zr()}}function sM(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class jj extends Ube{constructor(e){e=e||{},super(),this.dataProjection=Xs(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Xs(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const r=TU(i.geometry);if(this.featureClass===NA)return Hee({geometry:r,id:i.id,properties:i.properties},t);const o=new t6;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&o.setGeometryName(i.geometry_name),o.setGeometry(kU(r,t)),"id"in i&&o.setId(i.id),i.properties&&o.setProperties(i.properties,!0),o}readFeaturesFromObject(e,t){const i=e;let r=null;if(i.type==="FeatureCollection"){const o=e;r=[];const s=o.features;for(let a=0,c=s.length;a<c;++a){const h=this.readFeatureFromObject(s[a],t);h&&r.push(h)}}else r=[this.readFeatureFromObject(e,t)];return r.flat()}readGeometryFromObject(e,t){return Kbe(e,t)}readProjectionFromObject(e){const t=e.crs;let i;if(t)if(t.type=="name")i=Xs(t.properties.name);else if(t.type==="EPSG")i=Xs("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(i.id=r),!e.hasProperties())return i;const o=e.getProperties(),s=e.getGeometry();return s&&(i.geometry=uR(s,t),delete o[e.getGeometryName()]),tv(o)||(i.properties=o),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let r=0,o=e.length;r<o;++r)i.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return uR(e,this.adaptOptions(t))}}function TU(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=Fbe(n);break}case"LineString":{t=zbe(n);break}case"Polygon":{t=Wbe(n);break}case"MultiPoint":{t=Nbe(n);break}case"MultiLineString":{t=jbe(n);break}case"MultiPolygon":{t=Gbe(n);break}case"GeometryCollection":{t=Lbe(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function Kbe(n,e){const t=TU(n);return kU(t,e)}function Lbe(n,e){return n.geometries.map(function(i){return TU(i)})}function Fbe(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:Xb(e.length)}}function zbe(n){const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:Xb(e[0]?.length||2)}}function jbe(n){const e=n.coordinates,t=e[0]?.[0]?.length||2,i=[],r=s5(i,0,e,t);return{type:"MultiLineString",flatCoordinates:i,ends:r,layout:Xb(t)}}function Nbe(n){const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:Xb(e[0]?.length||2)}}function Gbe(n){const e=n.coordinates,t=[],i=e[0]?.[0]?.[0].length||2,r=ZJ(t,0,e,i);return{type:"MultiPolygon",flatCoordinates:t,ends:r,layout:Xb(i)}}function Wbe(n){const e=n.coordinates,t=[],i=e[0]?.[0]?.length,r=s5(t,0,e,i);return{type:"Polygon",flatCoordinates:t,ends:r,layout:Xb(i)}}function uR(n,e){n=i6(n,!0,e);const t=n.getType();let i;switch(t){case"Point":{i=Hbe(n);break}case"LineString":{i=qbe(n);break}case"Polygon":{i=Zbe(n,e);break}case"MultiPoint":{i=$be(n);break}case"MultiLineString":{i=Ybe(n);break}case"MultiPolygon":{i=Vbe(n,e);break}case"GeometryCollection":{i=Qbe(n,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function Qbe(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(i){return uR(i,e)})}}function qbe(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function Ybe(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function $be(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function Vbe(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function Hbe(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function Zbe(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const cR=65536*65536,Nj=1/cR,Xbe=12,Gj=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),mB=0,aM=1,g2=2,lM=5;class Jbe{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,i=this.length){for(;this.pos<i;){const r=this.readVarint(),o=r>>3,s=this.pos;this.type=r&7,e(o,t,this),this.pos===s&&this.skip(r)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*cR;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*cR;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let i,r;return r=t[this.pos++],i=r&127,r<128||(r=t[this.pos++],i|=(r&127)<<7,r<128)||(r=t[this.pos++],i|=(r&127)<<14,r<128)||(r=t[this.pos++],i|=(r&127)<<21,r<128)?i:(r=t[this.pos],i|=(r&15)<<28,eCe(i,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=Xbe&&Gj?Gj.decode(this.buf.subarray(t,e)):dCe(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===g2?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===mB)for(;this.buf[this.pos++]>127;);else if(t===g2)this.pos=this.readVarint()+this.pos;else if(t===lM)this.pos+=4;else if(t===aM)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.dataView=new DataView(i.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Nj),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Nj),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){tCe(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=fCe(this.buf,e,this.pos);const i=this.pos-t;i>=128&&Wj(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let i=0;i<t;i++)this.buf[this.pos++]=e[i]}writeRawMessage(e,t){this.pos++;const i=this.pos;e(t,this);const r=this.pos-i;r>=128&&Wj(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r}writeMessage(e,t,i){this.writeTag(e,g2),this.writeRawMessage(t,i)}writePackedVarint(e,t){t.length&&this.writeMessage(e,rCe,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,oCe,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,lCe,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,sCe,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,aCe,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,uCe,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,cCe,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,ACe,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,hCe,t)}writeBytesField(e,t){this.writeTag(e,g2),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,lM),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,lM),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,aM),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,aM),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,mB),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,mB),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,g2),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,lM),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,aM),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function eCe(n,e,t){const i=t.buf;let r,o;if(o=i[t.pos++],r=(o&112)>>4,o<128||(o=i[t.pos++],r|=(o&127)<<3,o<128)||(o=i[t.pos++],r|=(o&127)<<10,o<128)||(o=i[t.pos++],r|=(o&127)<<17,o<128)||(o=i[t.pos++],r|=(o&127)<<24,o<128)||(o=i[t.pos++],r|=(o&1)<<31,o<128))return NC(n,r,e);throw new Error("Expected varint not more than 10 bytes")}function NC(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function tCe(n,e){let t,i;if(n>=0?(t=n%4294967296|0,i=n/4294967296|0):(t=~(-n%4294967296),i=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,i=i+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),nCe(t,i,e),iCe(i,e)}function nCe(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function iCe(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function Wj(n,e,t){const i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(i);for(let r=t.pos-1;r>=n;r--)t.buf[r+i]=t.buf[r]}function rCe(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function oCe(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function sCe(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function aCe(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function lCe(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function uCe(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function cCe(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function ACe(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function hCe(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function dCe(n,e,t){let i="",r=e;for(;r<t;){const o=n[r];let s=null,a=o>239?4:o>223?3:o>191?2:1;if(r+a>t)break;let c,h,m;a===1?o<128&&(s=o):a===2?(c=n[r+1],(c&192)===128&&(s=(o&31)<<6|c&63,s<=127&&(s=null))):a===3?(c=n[r+1],h=n[r+2],(c&192)===128&&(h&192)===128&&(s=(o&15)<<12|(c&63)<<6|h&63,(s<=2047||s>=55296&&s<=57343)&&(s=null))):a===4&&(c=n[r+1],h=n[r+2],m=n[r+3],(c&192)===128&&(h&192)===128&&(m&192)===128&&(s=(o&15)<<18|(c&63)<<12|(h&63)<<6|m&63,(s<=65535||s>=1114112)&&(s=null))),s===null?(s=65533,a=1):s>65535&&(s-=65536,i+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),i+=String.fromCharCode(s),r+=a}return i}function fCe(n,e,t){for(let i=0,r,o;i<e.length;i++){if(r=e.charCodeAt(i),r>55295&&r<57344)if(o)if(r<56320){n[t++]=239,n[t++]=191,n[t++]=189,o=r;continue}else r=o-55296<<10|r-56320|65536,o=null;else{r>56319||i+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):o=r;continue}else o&&(n[t++]=239,n[t++]=191,n[t++]=189,o=null);r<128?n[t++]=r:(r<2048?n[t++]=r>>6|192:(r<65536?n[t++]=r>>12|224:(n[t++]=r>>18|240,n[t++]=r>>12&63|128),n[t++]=r>>6&63|128),n[t++]=r&63|128)}return t}class Zee extends Vee{constructor(e){super(),e=e||{},this.dataProjection=new NE({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:NA,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,i,r){e.pos=t.geometry;const o=e.readVarint()+e.pos;let s=1,a=0,c=0,h=0,m=0,y=0;for(;e.pos<o;){if(!a){const M=e.readVarint();s=M&7,a=M>>3}if(a--,s===1||s===2)c+=e.readSVarint(),h+=e.readSVarint(),s===1&&m>y&&(r.push(m),y=m),i.push(c,h),m+=2;else if(s===7)m>y&&(i.push(i[y],i[y+1]),m+=2);else throw new Error("Invalid command found in the PBF")}m>y&&(r.push(m),y=m)}createFeature_(e,t,i){const r=t.type;if(r===0)return null;let o;const s=t.properties;let a;this.idProperty_?(a=s[this.idProperty_],delete s[this.idProperty_]):a=t.id,s[this.layerName_]=t.layer.name;const c=[],h=[];this.readRawGeometry_(e,t,c,h);const m=vCe(r,h.length);if(this.featureClass===NA)o=new this.featureClass(m,c,h,2,s,a),o.transform(i.dataProjection);else{let y;if(m=="Polygon"){const k=ree(c,h);y=k.length>1?new u4(c,"XY",k):new d1(c,"XY",h)}else y=m==="Point"?new Lb(c,"XY"):m==="LineString"?new zb(c,"XY"):m==="MultiPoint"?new h5(c,"XY"):m==="MultiLineString"?new l4(c,"XY",h):null;const M=this.featureClass;o=new M,this.geometryName_&&o.setGeometryName(this.geometryName_);const x=i6(y,!1,i);o.setGeometry(x),a!==void 0&&o.setId(a),o.setProperties(s,!0)}return o}getType(){return"arraybuffer"}readFeatures(e,t){const i=this.layers_;t=this.adaptOptions(t);const r=Xs(t.dataProjection);r.setWorldExtent(t.extent),t.dataProjection=r;const o=new Jbe(e),s=o.readFields(pCe,{}),a=[];for(const c in s){if(i&&!i.includes(c))continue;const h=s[c],m=h?[0,0,h.extent,h.extent]:null;r.setExtent(m);for(let y=0,M=h.length;y<M;++y){const x=yCe(o,h,y),k=this.createFeature_(o,x,t);k!==null&&a.push(k)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function pCe(n,e,t){if(n===3){const i={keys:[],values:[],features:[]},r=t.readVarint()+t.pos;t.readFields(mCe,i,r),i.length=i.features.length,i.length&&(e[i.name]=i)}}function mCe(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let i=null;const r=t.readVarint()+t.pos;for(;t.pos<r;)n=t.readVarint()>>3,i=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(i)}}function gCe(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const i=t.readVarint()+t.pos;for(;t.pos<i;){const r=e.layer.keys[t.readVarint()],o=e.layer.values[t.readVarint()];e.properties[r]=o}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function yCe(n,e,t){n.pos=e.features[t];const i=n.readVarint()+n.pos,r={layer:e,type:0,properties:{}};return n.readFields(gCe,r,i),r}function vCe(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}class bCe extends wU{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],i=e.pixelRatio,r=e.viewState,o=r.resolution,s=this.getLayer().getSource(),a=e.viewHints;let c=e.extent;if(t.extent!==void 0&&(c=rm(c,Mg(t.extent,r.projection))),!a[_l.ANIMATING]&&!a[_l.INTERACTING]&&!Hb(c))if(s){const h=r.projection,m=s.getImage(c,o,i,h);m&&(this.loadImage(m)?this.image=m:m.getState()===Fi.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=Qu(t.pixelToCoordinateTransform,e.slice()),o=i.getExtent();if(o&&!Kb(o,r))return null;const s=this.image.getExtent(),a=this.image.getImage(),c=cs(s),h=Math.floor(a.width*((r[0]-s[0])/c));if(h<0||h>=a.width)return null;const m=$u(s),y=Math.floor(a.height*((s[3]-r[1])/m));return y<0||y>=a.height?null:this.getImageData(a,h,y)}renderFrame(e,t){const i=this.image,r=i.getExtent(),o=i.getResolution(),[s,a]=Array.isArray(o)?o:[o,o],c=i.getPixelRatio(),h=e.layerStatesArray[e.layerIndex],m=e.pixelRatio,y=e.viewState,M=y.center,x=y.resolution,k=m*s/(x*c),P=m*a/(x*c);this.prepareContainer(e,t);const F=this.context.canvas.width,j=this.context.canvas.height,q=this.getRenderContext(e);let V=!1,H=!0;if(h.extent){const le=Mg(h.extent,y.projection);H=Zl(le,e.extent),V=H&&!xg(le,e.extent),V&&this.clipUnrotated(q,e,le)}const G=i.getImage(),Y=Fg(this.tempTransform,F/2,j/2,k,P,0,c*(r[0]-M[0])/s,c*(M[1]-r[3])/a);this.renderedResolution=a*m/c;const z=G.width*Y[0],se=G.height*Y[3];if(this.getLayer().getSource().getInterpolate()||(q.imageSmoothingEnabled=!1),this.preRender(q,e),H&&z>=.5&&se>=.5){const le=Y[4],me=Y[5],de=h.opacity;de!==1&&(q.save(),q.globalAlpha=de),q.drawImage(G,0,0,+G.width,+G.height,le,me,z,se),de!==1&&q.restore()}return this.postRender(this.context,e),V&&q.restore(),q.imageSmoothingEnabled=!0,this.container}}class CCe extends Fx{constructor(e){e=e||{},super(e)}}class Xee extends CCe{constructor(e){super(e)}createRenderer(){return new bCe(this)}getData(e){return super.getData(e)}}function AR(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const _Ce=new Error("disposed"),xCe=[256,256];class Qj extends f5{constructor(e){const t=ri.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=AR(this.data_);return e?[e.width,e.height]:xCe}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==ri.IDLE&&this.state!==ri.ERROR)return;this.state=ri.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=ri.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=ri.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(_Ce),this.controller_=null),super.disposeInternal()}}let gB;const W_=[];function qj(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function yB(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function MCe(){if(gB===void 0){const n=Ul(6,6,W_);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",qj(n,4,5,4,0),qj(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;gB=yB(e,0)||yB(e,4)||yB(e,8),a5(n),W_.push(n.canvas)}return gB}function hR(n,e,t,i){const r=QE(t,e,n);let o=$9(e,i,t);const s=e.getMetersPerUnit();s!==void 0&&(o*=s);const a=n.getMetersPerUnit();a!==void 0&&(o/=a);const c=n.getExtent();if(!c||Kb(c,r)){const h=$9(n,o,r)/o;isFinite(h)&&h>0&&(o/=h)}return o}function wCe(n,e,t,i){const r=Mf(t);let o=hR(n,e,r,i);return(!isFinite(o)||o<=0)&&RJ(t,function(s){return o=hR(n,e,s,i),isFinite(o)&&o>0}),o}function Jee(n,e,t,i,r,o,s,a,c,h,m,y,M,x){const k=Ul(Math.round(t*n),Math.round(t*e),W_);if(y||(k.imageSmoothingEnabled=!1),c.length===0)return k.canvas;k.scale(t,t);function P(G){return Math.round(G*t)/t}k.globalCompositeOperation="lighter";const F=fp();c.forEach(function(G,Y,z){kJ(F,G.extent)});let j;const q=t/i,V=(y?1:1+Math.pow(2,-24))/q;(!M||c.length!==1||h!==0)&&(j=Ul(Math.round(cs(F)*q),Math.round($u(F)*q),W_),y||(j.imageSmoothingEnabled=!1),c.forEach(function(G,Y,z){if(G.image.width>0&&G.image.height>0){if(G.clipExtent){j.save();const be=(G.clipExtent[0]-F[0])*q,Ee=-(G.clipExtent[3]-F[3])*q,De=cs(G.clipExtent)*q,je=$u(G.clipExtent)*q;j.rect(y?be:Math.round(be),y?Ee:Math.round(Ee),y?De:Math.round(be+De)-Math.round(be),y?je:Math.round(Ee+je)-Math.round(Ee)),j.clip()}const se=(G.extent[0]-F[0])*q,le=-(G.extent[3]-F[3])*q,me=cs(G.extent)*q,de=$u(G.extent)*q;j.drawImage(G.image,h,h,G.image.width-2*h,G.image.height-2*h,y?se:Math.round(se),y?le:Math.round(le),y?me:Math.round(se+me)-Math.round(se),y?de:Math.round(le+de)-Math.round(le)),G.clipExtent&&j.restore()}}));const H=g1(s);return a.getTriangles().forEach(function(G,Y,z){const se=G.source,le=G.target;let me=se[0][0],de=se[0][1],be=se[1][0],Ee=se[1][1],De=se[2][0],je=se[2][1];const Ie=P((le[0][0]-H[0])/o),Qe=P(-(le[0][1]-H[1])/o),et=P((le[1][0]-H[0])/o),dt=P(-(le[1][1]-H[1])/o),ke=P((le[2][0]-H[0])/o),we=P(-(le[2][1]-H[1])/o),ze=me,xe=de;me=0,de=0,be-=ze,Ee-=xe,De-=ze,je-=xe;const At=[[be,Ee,0,0,et-Ie],[De,je,0,0,ke-Ie],[0,0,be,Ee,dt-Qe],[0,0,De,je,we-Qe]],it=y0e(At);if(!it)return;if(k.save(),k.beginPath(),MCe()||!y){k.moveTo(et,dt);const Bt=4,Ke=Ie-et,Te=Qe-dt;for(let Se=0;Se<Bt;Se++)k.lineTo(et+P((Se+1)*Ke/Bt),dt+P(Se*Te/(Bt-1))),Se!=Bt-1&&k.lineTo(et+P((Se+1)*Ke/Bt),dt+P((Se+1)*Te/(Bt-1)));k.lineTo(ke,we)}else k.moveTo(et,dt),k.lineTo(Ie,Qe),k.lineTo(ke,we);k.clip(),k.transform(it[0],it[2],it[1],it[3],Ie,Qe),k.translate(F[0]-ze,F[3]-xe);let bt;if(j)bt=j.canvas,k.scale(V,-V);else{const Bt=c[0],Ke=Bt.extent;bt=Bt.image,k.scale(cs(Ke)/bt.width,-$u(Ke)/bt.height)}k.drawImage(bt,0,0),k.restore()}),j&&(a5(j),W_.push(j.canvas)),m&&(k.save(),k.globalCompositeOperation="source-over",k.strokeStyle="black",k.lineWidth=1,a.getTriangles().forEach(function(G,Y,z){const se=G.target,le=(se[0][0]-H[0])/o,me=-(se[0][1]-H[1])/o,de=(se[1][0]-H[0])/o,be=-(se[1][1]-H[1])/o,Ee=(se[2][0]-H[0])/o,De=-(se[2][1]-H[1])/o;k.beginPath(),k.moveTo(de,be),k.lineTo(le,me),k.lineTo(Ee,De),k.closePath(),k.stroke()}),k.restore()),k.canvas}const SCe=10,Yj=.25;class ete{constructor(e,t,i,r,o,s,a){this.sourceProj_=e,this.targetProj_=t;let c={};const h=a?s1e(V=>Qu(a,QE(V,this.targetProj_,this.sourceProj_))):J3(this.targetProj_,this.sourceProj_);this.transformInv_=function(V){const H=V[0]+"/"+V[1];return c[H]||(c[H]=h(V)),c[H]},this.maxSourceExtent_=r,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&cs(r)>=cs(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?cs(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?cs(this.targetProj_.getExtent()):null;const m=g1(i),y=jE(i),M=zE(i),x=FE(i),k=this.transformInv_(m),P=this.transformInv_(y),F=this.transformInv_(M),j=this.transformInv_(x),q=SCe+(s?Math.max(0,Math.ceil(Math.log2(W9(i)/(s*s*256*256)))):0);if(this.addQuad_(m,y,M,x,k,P,F,j,q),this.wrapsXInSource_){let V=1/0;this.triangles_.forEach(function(H,G,Y){V=Math.min(V,H.source[0][0],H.source[1][0],H.source[2][0])}),this.triangles_.forEach(H=>{if(Math.max(H.source[0][0],H.source[1][0],H.source[2][0])-V>this.sourceWorldWidth_/2){const G=[[H.source[0][0],H.source[0][1]],[H.source[1][0],H.source[1][1]],[H.source[2][0],H.source[2][1]]];G[0][0]-V>this.sourceWorldWidth_/2&&(G[0][0]-=this.sourceWorldWidth_),G[1][0]-V>this.sourceWorldWidth_/2&&(G[1][0]-=this.sourceWorldWidth_),G[2][0]-V>this.sourceWorldWidth_/2&&(G[2][0]-=this.sourceWorldWidth_);const Y=Math.min(G[0][0],G[1][0],G[2][0]);Math.max(G[0][0],G[1][0],G[2][0])-Y<this.sourceWorldWidth_/2&&(H.source=G)}})}c={}}addTriangle_(e,t,i,r,o,s){this.triangles_.push({source:[r,o,s],target:[e,t,i]})}addQuad_(e,t,i,r,o,s,a,c,h){const m=N9([o,s,a,c]),y=this.sourceWorldWidth_?cs(m)/this.sourceWorldWidth_:null,M=this.sourceWorldWidth_,x=this.sourceProj_.canWrapX()&&y>.5&&y<1;let k=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const F=N9([e,t,i,r]);k=cs(F)/this.targetWorldWidth_>Yj||k}!x&&this.sourceProj_.isGlobal()&&y&&(k=y>Yj||k)}if(!k&&this.maxSourceExtent_&&isFinite(m[0])&&isFinite(m[1])&&isFinite(m[2])&&isFinite(m[3])&&!Zl(m,this.maxSourceExtent_))return;let P=0;if(!k&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(c[0])||!isFinite(c[1]))){if(h>0)k=!0;else if(P=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(s[0])||!isFinite(s[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(c[0])||!isFinite(c[1])?1:0),P!=1&&P!=2&&P!=4&&P!=8)return}if(h>0){if(!k){const F=[(e[0]+i[0])/2,(e[1]+i[1])/2],j=this.transformInv_(F);let q;x?q=(Ob(o[0],M)+Ob(a[0],M))/2-Ob(j[0],M):q=(o[0]+a[0])/2-j[0];const V=(o[1]+a[1])/2-j[1];k=q*q+V*V>this.errorThresholdSquared_}if(k){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const F=[(t[0]+i[0])/2,(t[1]+i[1])/2],j=this.transformInv_(F),q=[(r[0]+e[0])/2,(r[1]+e[1])/2],V=this.transformInv_(q);this.addQuad_(e,t,F,q,o,s,j,V,h-1),this.addQuad_(q,F,i,r,V,j,a,c,h-1)}else{const F=[(e[0]+t[0])/2,(e[1]+t[1])/2],j=this.transformInv_(F),q=[(i[0]+r[0])/2,(i[1]+r[1])/2],V=this.transformInv_(q);this.addQuad_(e,F,q,r,o,j,V,c,h-1),this.addQuad_(F,t,i,q,j,s,a,V,h-1)}return}}if(x){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(P&11)==0&&this.addTriangle_(e,i,r,o,a,c),(P&14)==0&&this.addTriangle_(e,i,t,o,a,s),P&&((P&13)==0&&this.addTriangle_(t,r,e,s,c,o),(P&7)==0&&this.addTriangle_(t,r,i,s,c,a))}calculateSourceExtent(){const e=fp();return this.triangles_.forEach(function(t,i,r){const o=t.source;h3(e,o[0]),h3(e,o[1]),h3(e,o[2])}),e}getTriangles(){return this.triangles_}}const tte=.5;class nte extends f5{constructor(e,t,i,r,o,s,a,c,h,m,y,M){super(o,ri.IDLE,M),this.renderEdges_=y!==void 0?y:!1,this.pixelRatio_=a,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=s||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const x=r.getTileCoordExtent(this.wrappedTileCoord_),k=this.targetTileGrid_.getExtent();let P=this.sourceTileGrid_.getExtent();const F=k?rm(x,k):x;if(W9(F)===0){this.state=ri.EMPTY;return}const j=e.getExtent();j&&(P?P=rm(P,j):P=j);const q=r.getResolution(this.wrappedTileCoord_[0]),V=wCe(e,i,F,q);if(!isFinite(V)||V<=0){this.state=ri.EMPTY;return}const H=m!==void 0?m:tte;if(this.triangulation_=new ete(e,i,F,P,V*H,q),this.triangulation_.getTriangles().length===0){this.state=ri.EMPTY;return}this.sourceZ_=t.getZForResolution(V);let G=this.triangulation_.calculateSourceExtent();if(P&&(e.canWrapX()?(G[1]=Pl(G[1],P[1],P[3]),G[3]=Pl(G[3],P[1],P[3])):G=rm(G,P)),!W9(G))this.state=ri.EMPTY;else{let Y=0,z=0;e.canWrapX()&&(Y=cs(j),z=Math.floor((G[0]-j[0])/Y)),UJ(G.slice(),e,!0).forEach(le=>{const me=t.getTileRangeForExtentAndZ(le,this.sourceZ_);for(let de=me.minX;de<=me.maxX;de++)for(let be=me.minY;be<=me.maxY;be++){const Ee=h(this.sourceZ_,de,be,a);if(Ee){const De=z*Y;this.sourceTiles_.push({tile:Ee,offset:De})}}++z}),this.sourceTiles_.length===0&&(this.state=ri.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const i=t.tile;if(i&&i.getState()==ri.LOADED){const r=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);r[0]+=t.offset,r[2]+=t.offset;const o=this.clipExtent_?.slice();o&&(o[0]+=t.offset,o[2]+=t.offset),e.push({extent:r,clipExtent:o,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=ri.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r=typeof i=="number"?i:i[0],o=typeof i=="number"?i:i[1],s=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Jee(r,o,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,c,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=ri.LOADED}this.changed()}load(){if(this.state==ri.IDLE){this.state=ri.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i==ri.IDLE||i==ri.LOADING){e++;const r=is(t,Rr.CHANGE,o=>{const s=t.getState();(s==ri.LOADED||s==ri.ERROR||s==ri.EMPTY)&&(Ra(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},i,r){t.getState()==ri.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ra),this.sourcesListenerKeys_=null}release(){this.canvas_&&(a5(this.canvas_.getContext("2d")),W_.push(this.canvas_),this.canvas_=null),super.release()}}class ECe{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof e5&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return Rs(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return Rs(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Rs(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function fS(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function OCe(n,e,t){return n+"/"+e+"/"+t}function BCe(n){return ICe(n[0],n[1],n[2])}function ICe(n,e,t){return(e<<n)+t}function kCe(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const o=e.getFullTileRange(t);return o?o.containsXY(i,r):!0}function vB(n,e,t,i,r){return`${Vr(n)},${e},${OCe(t,i,r)}`}function bB(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const i=n[t],r=i.has(e);return r||i.add(e),!r}function TCe(n,e,t){const i=n[t];return i?i.delete(e):!1}function $j(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=rm(e,Mg(t.extent,n.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const r=i.getTileGridForProjection(n.viewState.projection).getExtent();r&&(e=rm(e,r))}return e}class ite extends wU{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=fp(),this.tempTileRange_=new EU(0,0,0,0),this.tempTileCoord_=fS(0,0,0);const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new ECe(i),this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,i,r){const o=this.tileCache_,a=this.getLayer().getSource(),c=vB(a,a.getKey(),e,t,i);let h;if(o.containsKey(c))h=o.get(c);else{if(h=a.getTile(e,t,i,r.pixelRatio,r.viewState.projection),!h)return null;o.set(c,h)}return h}getTile(e,t,i,r){const o=this.getOrCreateTile(e,t,i,r);return o||null}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=Qu(t.pixelToCoordinateTransform,e.slice()),o=i.getExtent();if(o&&!Kb(o,r))return null;const s=t.viewState,a=i.getRenderSource(),c=a.getTileGridForProjection(s.projection),h=a.getTilePixelRatio(t.pixelRatio);for(let m=c.getZForResolution(s.resolution);m>=c.getMinZoom();--m){const y=c.getTileCoordForCoordAndZ(r,m),M=this.getTile(m,y[1],y[2],t);if(!M||M.getState()!==ri.LOADED)continue;const x=c.getOrigin(m),k=WA(c.getTileSize(m)),P=c.getResolution(m);let F;if(M instanceof Nee||M instanceof nte)F=M.getImage();else if(M instanceof Qj){if(F=AR(M.getData()),!F)continue}else continue;const j=Math.floor(h*((r[0]-x[0])/P-y[1]*k[0])),q=Math.floor(h*((x[1]-r[1])/P-y[2]*k[1])),V=Math.round(h*a.getGutterForProjection(s.projection));return this.getImageData(F,j+V,q+V)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const i=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==i&&(this.renderedSourceRevision_=i,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=i,!0}enqueueTiles(e,t,i,r,o){const s=e.viewState,a=this.getLayer(),c=a.getRenderSource(),h=c.getTileGridForProjection(s.projection),m=Vr(c);m in e.wantedTiles||(e.wantedTiles[m]={});const y=e.wantedTiles[m],M=a.getMapInternal(),x=Math.max(i-o,h.getMinZoom(),h.getZForResolution(Math.min(a.getMaxResolution(),M?M.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):h.getResolution(0)),c.zDirection)),k=s.rotation,P=k?DJ(s.center,s.resolution,k,e.size):void 0;for(let F=i;F>=x;--F){const j=h.getTileRangeForExtentAndZ(t,F,this.tempTileRange_),q=h.getResolution(F);for(let V=j.minX;V<=j.maxX;++V)for(let H=j.minY;H<=j.maxY;++H){if(k&&!h.tileCoordIntersectsViewport([F,V,H],P))continue;const G=this.getTile(F,V,H,e);if(!G||!bB(r,G,F))continue;const z=G.getKey();if(y[z]=!0,G.getState()===ri.IDLE&&!e.tileQueue.isKeyQueued(z)){const se=fS(F,V,H,this.tempTileCoord_);e.tileQueue.enqueue([G,m,h.getTileCoordCenter(se),q])}}}}findStaleTile_(e,t){const i=this.tileCache_,r=e[0],o=e[1],s=e[2],a=this.getStaleKeys();for(let c=0;c<a.length;++c){const h=vB(this.getLayer().getSource(),a[c],r,o,s);if(i.containsKey(h)){const m=i.peek(h);if(m.getState()===ri.LOADED)return m.endTransition(Vr(this)),bB(t,m,r),!0}}return!1}findAltTiles_(e,t,i,r){const o=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!o)return!1;let s=!0;const a=this.tileCache_,c=this.getLayer().getRenderSource(),h=c.getKey();for(let m=o.minX;m<=o.maxX;++m)for(let y=o.minY;y<=o.maxY;++y){const M=vB(c,h,i,m,y);let x=!1;if(a.containsKey(M)){const k=a.peek(M);k.getState()===ri.LOADED&&(bB(r,k,i),x=!0)}x||(s=!1)}return s}renderFrame(e,t){this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],r=e.viewState,o=r.projection,s=r.resolution,a=r.center,c=e.pixelRatio,h=this.getLayer(),m=h.getSource(),y=m.getTileGridForProjection(o),M=y.getZForResolution(s,m.zDirection),x=y.getResolution(M),k=m.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==k&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=k):this.renderedSourceKey_=k;let P=e.extent;const F=m.getTilePixelRatio(c);this.prepareContainer(e,t);const j=this.context.canvas.width,q=this.context.canvas.height,V=i.extent&&Mg(i.extent);V&&(P=rm(P,Mg(i.extent)));const H=x*j/2/F,G=x*q/2/F,Y=[a[0]-H,a[1]-G,a[0]+H,a[1]+G],z={};this.renderedTiles.length=0;const se=h.getPreload();if(e.nextExtent){const et=y.getZForResolution(r.nextResolution,m.zDirection),dt=$j(e,e.nextExtent);this.enqueueTiles(e,dt,et,z,se)}const le=$j(e,P);if(this.enqueueTiles(e,le,M,z,0),se>0&&setTimeout(()=>{this.enqueueTiles(e,le,M-1,z,se-1)},0),!(M in z))return this.container;const me=Vr(this),de=e.time;for(const et of z[M]){const dt=et.getState();if(dt===ri.EMPTY)continue;const ke=et.tileCoord;if(dt===ri.LOADED&&et.getAlpha(me,de)===1){et.endTransition(me);continue}if(dt!==ri.ERROR&&(this.renderComplete=!1),this.findStaleTile_(ke,z)){TCe(z,et,M),e.animate=!0;continue}if(this.findAltTiles_(y,ke,M+1,z))continue;const xe=y.getMinZoom();for(let At=M-1;At>=xe&&!this.findAltTiles_(y,ke,At,z);--At);}const be=x/s*c/F,Ee=this.getRenderContext(e);Fg(this.tempTransform,j/2,q/2,be,be,0,-j/2,-q/2),i.extent&&this.clipUnrotated(Ee,e,V),m.getInterpolate()||(Ee.imageSmoothingEnabled=!1),this.preRender(Ee,e);const De=Object.keys(z).map(Number);De.sort(Pg);let je;const Ie=[],Qe=[];for(let et=De.length-1;et>=0;--et){const dt=De[et],ke=m.getTilePixelSize(dt,c,o),ze=y.getResolution(dt)/x,xe=ke[0]*ze*be,At=ke[1]*ze*be,it=y.getTileCoordForCoordAndZ(g1(Y),dt),bt=y.getTileCoordExtent(it),Bt=Qu(this.tempTransform,[F*(bt[0]-Y[0])/x,F*(Y[3]-bt[3])/x]),Ke=F*m.getGutterForProjection(o);for(const Te of z[dt]){if(Te.getState()!==ri.LOADED)continue;const Se=Te.tileCoord,Ne=it[1]-Se[1],ut=Math.round(Bt[0]-(Ne-1)*xe),rt=it[2]-Se[2],pt=Math.round(Bt[1]-(rt-1)*At),Dt=Math.round(Bt[0]-Ne*xe),Ot=Math.round(Bt[1]-rt*At),Jt=ut-Dt,Tn=pt-Ot,Ln=De.length===1;let ii=!1;je=[Dt,Ot,Dt+Jt,Ot,Dt+Jt,Ot+Tn,Dt,Ot+Tn];for(let wn=0,Rn=Ie.length;wn<Rn;++wn)if(!Ln&&dt<Qe[wn]){const gn=Ie[wn];Zl([Dt,Ot,Dt+Jt,Ot+Tn],[gn[0],gn[3],gn[4],gn[7]])&&(ii||(Ee.save(),ii=!0),Ee.beginPath(),Ee.moveTo(je[0],je[1]),Ee.lineTo(je[2],je[3]),Ee.lineTo(je[4],je[5]),Ee.lineTo(je[6],je[7]),Ee.moveTo(gn[6],gn[7]),Ee.lineTo(gn[4],gn[5]),Ee.lineTo(gn[2],gn[3]),Ee.lineTo(gn[0],gn[1]),Ee.clip())}Ie.push(je),Qe.push(dt),this.drawTile(Te,e,Dt,Ot,Jt,Tn,Ke,Ln),ii&&Ee.restore(),this.renderedTiles.unshift(Te),this.updateUsedTiles(e.usedTiles,m,Te)}}if(this.renderedResolution=x,this.extentChanged=!this.renderedExtent_||!h1(this.renderedExtent_,Y),this.renderedExtent_=Y,this.renderedPixelRatio=c,this.postRender(this.context,e),i.extent&&Ee.restore(),Ee.imageSmoothingEnabled=!0,this.renderComplete){const et=(dt,ke)=>{const we=Vr(m),ze=ke.wantedTiles[we],xe=ze?Object.keys(ze).length:0;this.updateCacheSize(xe),this.tileCache_.expireCache()};e.postRenderFunctions.push(et)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,i,r,o,s,a,c){let h;if(e instanceof Qj){if(h=AR(e.getData()),!h)throw new Error("Rendering array data is not yet supported")}else h=this.getTileImage(e);if(!h)return;const m=this.getRenderContext(t),y=Vr(this),M=t.layerStatesArray[t.layerIndex],x=M.opacity*(c?e.getAlpha(y,t.time):1),k=x!==m.globalAlpha;k&&(m.save(),m.globalAlpha=x),m.drawImage(h,a,a,h.width-2*a,h.height-2*a,i,r,o,s),k&&m.restore(),x!==M.opacity?t.animate=!0:c&&e.endTransition(y)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,i){const r=Vr(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}}const jy={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class RCe extends Fx{constructor(e){e=e||{};const t=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(jy.PRELOAD)}setPreload(e){this.set(jy.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(jy.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(jy.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class rte extends RCe{constructor(e){super(e)}createRenderer(){return new ite(this,{cacheSize:this.getCacheSize()})}}const DCe={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},Vj={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class PCe extends ite{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=bd(),this.tileClipContexts_=null}drawTile(e,t,i,r,o,s,a,c){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,i,r,o,s,a,c)}getTile(e,t,i,r){const o=this.getOrCreateTile(e,t,i,r);if(!o)return null;const a=r.viewState.resolution,c=r.viewHints;return(!(c[_l.ANIMATING]||c[_l.INTERACTING])||!o.wantedResolution)&&(o.wantedResolution=a),o}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,i){const r=this.getLayer(),o=r.getRevision(),s=r.getRenderOrder()||null,a=e.wantedResolution,c=e.getReplayState(r);if(!c.dirty&&c.renderedResolution===a&&c.renderedRevision==o&&c.renderedRenderOrder==s)return;const h=r.getSource(),m=!!r.getDeclutter(),y=h.getTileGrid(),x=h.getTileGridForProjection(i).getTileCoordExtent(e.wrappedTileCoord),k=h.getSourceTiles(t,i,e),P=Vr(r);delete e.hitDetectionImageData[P],e.executorGroups[P]=[],c.dirty=!1;for(let F=0,j=k.length;F<j;++F){const q=k[F];if(q.getState()!=ri.LOADED)continue;const V=q.tileCoord,H=y.getTileCoordExtent(V),G=rm(x,H),Y=Hy(G,r.getRenderBuffer()*a,this.tempExtent),z=h1(H,G)?null:Y,se=new Lee(0,G,a,t),le=sR(a,t),me=function(je,Ie){let Qe;const et=je.getStyleFunction()||r.getStyleFunction();if(et&&(Qe=et(je,a)),Qe){const dt=this.renderFeature(je,le,Qe,se,m,Ie);c.dirty=c.dirty||dt}},de=q.getFeatures();s&&s!==c.renderedRenderOrder&&de.sort(s);for(let je=0,Ie=de.length;je<Ie;++je){const Qe=de[je];(!z||Zl(z,Qe.getGeometry().getExtent()))&&me.call(this,Qe,je)}const be=se.finish(),Ee=r.getRenderMode()!=="vector"&&m&&k.length===1?null:G,De=new Fee(Ee,a,t,h.getOverlaps(),be,r.getRenderBuffer(),!0);e.executorGroups[P].push(De)}c.renderedRevision=o,c.renderedRenderOrder=s,c.renderedResolution=a}forEachFeatureAtCoordinate(e,t,i,r,o){const s=t.viewState.resolution,a=t.viewState.rotation;i=i??0;const c=this.getLayer(),m=c.getSource().getTileGridForProjection(t.viewState.projection),y=N9([e]);Hy(y,s*i,y);const M={},x=function(V,H,G){let Y=V.getId();Y===void 0&&(Y=Vr(V));const z=M[Y];if(z){if(z!==!0&&G<z.distanceSq){if(G===0)return M[Y]=!0,o.splice(o.lastIndexOf(z),1),r(V,c,H);z.geometry=H,z.distanceSq=G}}else{if(G===0)return M[Y]=!0,r(V,c,H);o.push(M[Y]={feature:V,layer:c,geometry:H,distanceSq:G,callback:r})}},k=this.renderedTiles,P=Vr(c),F=c.getDeclutter(),j=F?t.declutter?.[F]?.all().map(V=>V.value):null;let q;e:for(let V=0,H=k.length;V<H;++V){const G=k[V],Y=m.getTileCoordExtent(G.wrappedTileCoord);if(!Zl(Y,y))continue;const z=G.executorGroups[P];for(let se=0,le=z.length;se<le;++se)if(q=z[se].forEachFeatureAtCoordinate(e,s,a,i,x,j),q)break e}return q}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,i)=>{const r=this.getLayer(),o=r.getSource(),s=this.renderedProjection,a=s.getExtent(),c=this.renderedResolution,h=o.getTileGridForProjection(s),m=Qu(this.renderedPixelToCoordinateTransform_,e.slice()),y=h.getTileCoordForCoordAndResolution(m,c).toString(),M=this.renderedTiles.find(V=>V.tileCoord.toString()===y&&V.getState()===ri.LOADED);if(!M||M.loadingSourceTiles>0){t([]);return}o.getWrapX()&&s.canWrapX()&&!xg(a,h.getTileCoordExtent(M.tileCoord))&&GP(m,s);const x=Vr(r),k=h.getTileCoordExtent(M.wrappedTileCoord),P=g1(k),F=[(m[0]-P[0])/c,(P[1]-m[1])/c],j=M.getSourceTiles().reduce((V,H)=>V.concat(H.getFeatures()),[]);let q=M.hitDetectionImageData[x];if(!q){const V=WA(h.getTileSize(h.getZForResolution(c,o.zDirection))),H=this.renderedRotation_,G=[this.getRenderTransform(h.getTileCoordCenter(M.wrappedTileCoord),c,0,gf,V[0]*gf,V[1]*gf,0)];q=zee(V,G,j,r.getStyleFunction(),h.getTileCoordExtent(M.wrappedTileCoord),M.getReplayState(r).renderedResolution,H),M.hitDetectionImageData[x]=q}t(jee(F,j,q))})}getFeaturesInExtent(e){const t=[],i=this.getTileCache();if(i.getCount()===0)return t;const o=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),s=o.getZForResolution(this.renderedResolution),a={};return i.forEach(c=>{if(c.tileCoord[0]!==s||c.getState()!==ri.LOADED)return;const h=c.getSourceTiles();for(let m=0,y=h.length;m<y;++m){const M=h[m],x=M.getKey();if(x in a)continue;a[x]=!0;const k=M.tileCoord;if(Zl(e,o.getTileCoordExtent(k))){const P=M.getFeatures();if(P)for(let F=0,j=P.length;F<j;++F){const q=P[F],V=q.getGeometry();Zl(e,V.getExtent())&&t.push(q)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const i=this.context,r=i.globalAlpha;i.globalAlpha=t.opacity;const o=e.viewHints,s=!(o[_l.ANIMATING]||o[_l.INTERACTING]),a=[this.context.canvas.width,this.context.canvas.height],c=this.getLayer().getDeclutter(),h=c?e.declutter?.[c]:void 0,m=Vr(this.getLayer()),y=this.renderedTiles;for(let M=0,x=y.length;M<x;++M){const k=y[M],P=k.executorGroups[m];if(P)for(let F=P.length-1;F>=0;--F)P[F].execute(this.context,a,this.getTileRenderTransform(k,e),e.viewState.rotation,s,AS,h)}i.globalAlpha=r}renderDeferredInternal(e){const t=this.renderedTiles,i=Vr(this.getLayer()),r=t.reduce((c,h,m)=>(h.executorGroups[i].forEach(y=>c.push({executorGroup:y,index:m})),c),[]),o=r.map(({executorGroup:c})=>c.getDeferredZIndexContexts()),s={};for(let c=0,h=r.length;c<h;++c){const m=r[c].executorGroup.getDeferredZIndexContexts();for(const y in m)s[y]=!0}Object.keys(s).map(Number).sort(Pg).forEach(c=>{o.forEach((h,m)=>{h[c]&&(h[c].forEach(y=>{const{executorGroup:M,index:x}=r[m],k=M.getRenderedContext(),P=k.globalAlpha;k.globalAlpha=this.renderedOpacity_;const F=this.tileClipContexts_[x];F&&F.draw(k),y.draw(k),F&&k.restore(),k.globalAlpha=P,y.clear()}),h[c].length=0)})})}getTileRenderTransform(e,t){const i=t.pixelRatio,r=t.viewState,o=r.center,s=r.resolution,a=r.rotation,c=t.size,h=Math.round(c[0]*i),m=Math.round(c[1]*i),M=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),x=e.tileCoord,k=M.getTileCoordExtent(e.wrappedTileCoord),P=M.getTileCoordExtent(x,this.tempExtent)[0]-k[0];return VP(qO(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(o,s,a,i,h,m,P))}postRender(e,t){const i=t.viewHints,r=!(i[_l.ANIMATING]||i[_l.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const o=this.getLayer(),s=o.getRenderMode(),a=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const c=o.getDeclutter(),h=c?Vj[s].filter(G=>!AS.includes(G)):Vj[s],m=t.viewState,y=m.rotation,M=o.getSource(),k=M.getTileGridForProjection(m.projection).getZForResolution(m.resolution,M.zDirection),P=this.renderedTiles,F=[],j=[],q=[],V=Vr(o);let H=!0;for(let G=P.length-1;G>=0;--G){const Y=P[G];H=H&&!Y.getReplayState(o).dirty;const z=Y.executorGroups[V].filter(De=>De.hasExecutors(h));if(z.length===0)continue;const se=this.getTileRenderTransform(Y,t),le=Y.tileCoord[0];let me=!1;const de=z[0].getClipCoords(se);let be=e,Ee;if(de){Ee=new MU,be=Ee.getContext();for(let De=0,je=F.length;De<je;++De)if(k!==le&&le<j[De]){const Ie=F[De];Zl([de[0],de[3],de[4],de[7]],[Ie[0],Ie[3],Ie[4],Ie[7]])&&(me||(be.save(),me=!0),be.beginPath(),be.moveTo(de[0],de[1]),be.lineTo(de[2],de[3]),be.lineTo(de[4],de[5]),be.lineTo(de[6],de[7]),be.moveTo(Ie[6],Ie[7]),be.lineTo(Ie[4],Ie[5]),be.lineTo(Ie[2],Ie[3]),be.lineTo(Ie[0],Ie[1]),be.clip())}F.push(de),j.push(le)}for(let De=0,je=z.length;De<je;++De)z[De].execute(e,[e.canvas.width,e.canvas.height],se,y,r,h,t.declutter?.[c]);me&&(be===e?be.restore():q[G]=Ee)}e.globalAlpha=a,this.ready=H,this.tileClipContexts_=q,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,i,r,o,s){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let c=0,h=i.length;c<h;++c)a=uS(r,e,i[c],t,this.boundHandleStyleImageChange_,void 0,o,s)||a;else a=uS(r,e,i,t,this.boundHandleStyleImageChange_,void 0,o,s);return a}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const i=e.getReplayState(t),r=t.getRevision(),o=e.wantedResolution;return i.renderedTileResolution!==o||i.renderedTileRevision!==r}renderTileImage_(e,t){const i=this.getLayer(),r=e.getReplayState(i),o=i.getRevision(),s=e.executorGroups[Vr(i)];r.renderedTileRevision=o;const a=e.wrappedTileCoord,c=a[0],h=i.getSource();let m=t.pixelRatio;const M=t.viewState.projection,x=h.getTileGridForProjection(M),k=x.getResolution(e.tileCoord[0]),P=t.pixelRatio/e.wantedResolution*k,F=x.getResolution(c),j=e.getContext();m=Math.round(Math.max(m,P/m));const q=h.getTilePixelSize(c,m,M);j.canvas.width=q[0],j.canvas.height=q[1];const V=m/P;if(V!==1){const z=Vz(this.tmpTransform_);qO(z,V,V),j.setTransform.apply(j,z)}const H=x.getTileCoordExtent(a,this.tempExtent),G=P/F,Y=Vz(this.tmpTransform_);qO(Y,G,-G),A1e(Y,-H[0],-H[3]);for(let z=0,se=s.length;z<se;++z)s[z].execute(j,[j.canvas.width*V,j.canvas.height*V],Y,0,!0,DCe[i.getRenderMode()],null);r.renderedTileResolution=e.wantedResolution}}class f3 extends _U{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const i=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i;const r=e.renderMode||"hybrid";Rs(r=="hybrid"||r=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=r,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new PCe(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(jy.PRELOAD)}getUseInterimTilesOnError(){return this.get(jy.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(jy.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(jy.USE_INTERIM_TILES_ON_ERROR,e)}}function dR(n){return Array.isArray(n)?Math.min(...n):n}class UCe extends vU{constructor(e,t,i,r,o,s,a){let c=e.getExtent();c&&e.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);let h=t.getExtent();h&&t.canWrapX()&&(h=h.slice(),h[0]=-1/0,h[2]=1/0);const m=h?rm(i,h):i,y=Mf(m),M=hR(e,t,y,r),x=tte,k=new ete(e,t,m,c,M*x,r),P=k.calculateSourceExtent(),F=Hb(P)?null:s(P,M,o),j=F?Fi.IDLE:Fi.EMPTY,q=F?F.getPixelRatio():1;super(i,r,q,j),this.targetProj_=t,this.maxSourceExtent_=c,this.triangulation_=k,this.targetResolution_=r,this.targetExtent_=i,this.sourceImage_=F,this.sourcePixelRatio_=q,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Fi.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==Fi.LOADED){const t=cs(this.targetExtent_)/this.targetResolution_,i=$u(this.targetExtent_)/this.targetResolution_;this.canvas_=Jee(t,i,this.sourcePixelRatio_,dR(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==Fi.IDLE){this.state=Fi.LOADING,this.changed();const e=this.sourceImage_.getState();e==Fi.LOADED||e==Fi.ERROR?this.reproject_():(this.sourceListenerKey_=is(this.sourceImage_,Rr.CHANGE,t=>{const i=this.sourceImage_.getState();(i==Fi.LOADED||i==Fi.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Ra(this.sourceListenerKey_),this.sourceListenerKey_=null}}const uM=4,CB={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class KCe extends hm{constructor(e,t){super(e),this.image=t}}class ote extends zx{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const i=UE(t,e,0);e=t[i]}return e}getImage(e,t,i,r){const o=this.getProjection();if(!o||!r||Zy(o,r))return o&&(r=o),this.getImageInternal(e,t,i,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Zy(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==t&&h1(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new UCe(o,r,e,t,i,(s,a,c)=>this.getImageInternal(s,a,c,o),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,i,r){if(this.loader){const o=LCe(e,t,i,1),s=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===r&&(this.wantedExtent_&&xg(this.wantedExtent_,o)||xg(this.image.getExtent(),o))&&(this.wantedResolution_&&dR(this.wantedResolution_)===s||dR(this.image.getResolution())===s)))return this.image;this.wantedProjection_=r,this.wantedExtent_=o,this.wantedResolution_=s,this.image=new vU(o,s,i,this.loader),this.image.addEventListener(Rr.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let i;switch(t.getState()){case Fi.LOADING:this.loading=!0,i=CB.IMAGELOADSTART;break;case Fi.LOADED:this.loading=!1,i=CB.IMAGELOADEND;break;case Fi.ERROR:this.loading=!1,i=CB.IMAGELOADERROR;break;default:return}this.hasListener(i)&&this.dispatchEvent(new KCe(i,t))}}function LCe(n,e,t,i){const r=e/t,o=Mf(n),s=Ky(cs(n)/r,uM),a=Ky($u(n)/r,uM),c=Ky((i-1)*s/2,uM),h=s+2*c,m=Ky((i-1)*a/2,uM),y=a+2*m;return Xw(o,r,0,[h,y])}const GC=[0,0,0],xy=5;class r6{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Rs(a0e(this.resolutions_,(r,o)=>o-r),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let r=0,o=this.resolutions_.length-1;r<o;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Rs(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=g1(i)),Rs(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Rs(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:uU,Rs(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,o)=>{const s=new EU(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,o);s.minX=Math.max(a.minX,s.minX),s.maxX=Math.min(a.maxX,s.maxX),s.minY=Math.max(a.minY,s.minY),s.maxY=Math.min(a.maxY,s.maxY)}return s}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let o=r.minX,s=r.maxX;o<=s;++o)for(let a=r.minY,c=r.maxY;a<=c;++a)i([t,o,a])}forEachTileCoordParentTileRange(e,t,i,r){let o,s,a,c=null,h=e[0]-1;for(this.zoomFactor_===2?(s=e[1],a=e[2]):c=this.getTileCoordExtent(e,r);h>=this.minZoom;){if(s!==void 0&&a!==void 0?(s=Math.floor(s/2),a=Math.floor(a/2),o=zC(s,s,a,a,i)):o=this.getTileRangeForExtentAndZ(c,h,i),t(h,o))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const o=e[1]*2,s=e[2]*2;return zC(o,o+1,s,s+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],o=e[1],s=e[2];if(t===r)return zC(o,s,o,s,i);if(this.zoomFactor_){const c=Math.pow(this.zoomFactor_,t-r),h=Math.floor(o*c),m=Math.floor(s*c);if(t<r)return zC(h,h,m,m,i);const y=Math.floor(c*(o+1))-1,M=Math.floor(c*(s+1))-1;return zC(h,y,m,M,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,GC);const r=GC[1],o=GC[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,GC);const s=GC[1],a=GC[2];return zC(r,s,o,a,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=WA(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),o=WA(this.getTileSize(e[0]),this.tmpSize_),s=i[0]+e[1]*o[0]*r,a=i[1]-(e[2]+1)*o[1]*r,c=s+o[0]*r,h=a+o[1]*r;return A1(s,a,c,h,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,o){const s=this.getZForResolution(i),a=i/this.getResolution(s),c=this.getOrigin(s),h=WA(this.getTileSize(s),this.tmpSize_);let m=a*(e-c[0])/i/h[0],y=a*(c[1]-t)/i/h[1];return r?(m=Ky(m,xy)-1,y=Ky(y,xy)-1):(m=H5(m,xy),y=H5(y,xy)),fS(s,m,y,o)}getTileCoordForXYAndZ_(e,t,i,r,o){const s=this.getOrigin(i),a=this.getResolution(i),c=WA(this.getTileSize(i),this.tmpSize_);let h=(e-s[0])/a/c[0],m=(s[1]-t)/a/c[1];return r?(h=Ky(h,xy)-1,m=Ky(m,xy)-1):(h=H5(h,xy),m=H5(m,xy)),fS(i,h,m,o)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=UE(this.resolutions_,e,t||0);return Pl(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return tee(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}function ste(n){let e=n.getDefaultTileGrid();return e||(e=jCe(n),n.setDefaultTileGrid(e)),e}function FCe(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),o=o6(t);if(!Kb(o,r)){const s=cs(o),a=Math.ceil((o[0]-r[0])/s);return r[0]+=s*a,n.getTileCoordForCoordAndZ(r,i)}return e}function zCe(n,e,t,i){i=i!==void 0?i:"top-left";const r=ate(n,e,t);return new r6({extent:n,origin:_0e(n,i),resolutions:r,tileSize:t})}function RU(n){const e=n||{},t=e.extent||Xs("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:ate(t,e.maxZoom,e.tileSize,e.maxResolution)};return new r6(i)}function ate(n,e,t,i){e=e!==void 0?e:oee,t=WA(t!==void 0?t:uU);const r=$u(n),o=cs(n);i=i>0?i:Math.max(o/t[0],r/t[1]);const s=e+1,a=new Array(s);for(let c=0;c<s;++c)a[c]=i/Math.pow(2,c);return a}function jCe(n,e,t,i){const r=o6(n);return zCe(r,e,t,i)}function o6(n){n=Xs(n);let e=n.getExtent();if(!e){const t=180*nv.degrees/n.getMetersPerUnit();e=A1(-t,-t,t,t)}return e}class lte extends zx{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&WA(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Vr(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,r,o){return zr()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:ste(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),o=this.getTilePixelRatio(t),s=WA(r.getTileSize(e),this.tmpSize);return o==1?s:kye(s,o,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const i=t!==void 0?t:this.getProjection(),r=t!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=FCe(r,e,i)),kCe(e,r)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class NCe extends hm{constructor(e,t){super(e),this.tile=t}}function ute(n){return function(e){const t=e.buffers,i=e.meta,r=e.imageOps,o=e.width,s=e.height,a=t.length,c=t[0].byteLength;if(r){const M=new Array(a);for(let k=0;k<a;++k)M[k]=new ImageData(new Uint8ClampedArray(t[k]),o,s);return n(M,i).data.buffer}const h=new Uint8ClampedArray(c),m=new Array(a),y=new Array(a);for(let M=0;M<a;++M)m[M]=new Uint8ClampedArray(t[M]),y[M]=[0,0,0,0];for(let M=0;M<c;M+=4){for(let k=0;k<a;++k){const P=m[k];y[k][0]=P[M],y[k][1]=P[M+1],y[k][2]=P[M+2],y[k][3]=P[M+3]}const x=n(y,i);h[M]=x[0],h[M+1]=x[1],h[M+2]=x[2],h[M+3]=x[3]}return h.buffer}}function GCe(n,e){const i=Object.keys(n.lib||{}).map(function(o){return"const "+o+" = "+n.lib[o].toString()+";"}).concat(["const __minion__ = ("+ute.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(i.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(i,{type:"text/javascript"})));return r.addEventListener("message",e),r}function WCe(n,e){const t=ute(n.operation);let i=!1;return{postMessage:function(r){setTimeout(function(){i||e({data:{buffer:t(r),meta:r.meta}})},0)},terminate:function(){i=!0}}}let QCe=class extends e5{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const i=new Array(t);if(t)for(let r=0;r<t;++r)i[r]=GCe(e,this.onWorkerMessage_.bind(this,r));else i[0]=WCe(e,this.onWorkerMessage_.bind(this,0));this.workers_=i,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,i){this.enqueue_({inputs:e,meta:t,callback:i}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,i=e.inputs[0].height,r=e.inputs.map(function(c){return c.data.buffer}),o=this.workers_.length;if(this.running_=o,o===1){this.workers_[0].postMessage({buffers:r,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},r);return}const s=e.inputs[0].data.length,a=4*Math.ceil(s/4/o);for(let c=0;c<o;++c){const h=c*a,m=[];for(let y=0,M=r.length;y<M;++y)m.push(r[y].slice(h,h+a));this.workers_[c].postMessage({buffers:m,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},m)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let i,r;if(t===1)i=new Uint8ClampedArray(this.dataLookup_[0].buffer),r=this.dataLookup_[0].meta;else{const o=e.inputs[0].data.length;i=new Uint8ClampedArray(o),r=new Array(t);const s=4*Math.ceil(o/4/t);for(let a=0;a<t;++a){const c=this.dataLookup_[a].buffer,h=a*s;i.set(new Uint8ClampedArray(c),h),r[a]=this.dataLookup_[a].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(i,e.inputs[0].width,e.inputs[0].height),r),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}};const Hj={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class Zj extends hm{constructor(e,t,i){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=i}}class cte extends ote{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=$Ce(e.sources);const t=this.changed.bind(this);for(let i=0,r=this.layers_.length;i<r;++i)this.layers_[i].addEventListener(Rr.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new OJ(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:bd(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:YCe(this.layers_),pixelRatio:1,pixelToCoordinateTransform:bd(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Vr(this),renderTargets:{}},this.setAttributions(function(i){const r=[];for(let o=0,s=e.sources.length;o<s;++o){const a=e.sources[o],c=a instanceof zx?a:a.getSource();if(!c)continue;const h=c.getAttributions()?.(i);typeof h=="string"?r.push(h):h!==void 0&&r.push(...h)}return r}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new QCe({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,i){const r=Object.assign({},this.frameState_);r.viewState=Object.assign({},r.viewState);const o=Mf(e);r.size[0]=Math.ceil(cs(e)/t),r.size[1]=Math.ceil($u(e)/t),r.extent=[o[0]-r.size[0]*t/2,o[1]-r.size[1]*t/2,o[0]+r.size[0]*t/2,o[1]+r.size[1]*t/2],r.time=Date.now();const s=r.viewState;return s.center=o,s.projection=i,s.resolution=t,r}allSourcesReady_(){let e=!0,t;for(let i=0,r=this.layers_.length;i<r;++i)if(t=this.layers_[i].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,i,r){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const o=this.updateFrameState_(e,t,r);if(this.requestedFrameState_=o,this.renderedImageCanvas_){const s=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();(t!==s||!h1(o.extent,a))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),o.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,i=new Array(t);for(let o=0;o<t;++o){e.layerIndex=o,e.renderTargets={};const s=qCe(this.layers_[o],e);if(s)i[o]=s;else return}const r={};this.dispatchEvent(new Zj(Hj.BEFOREOPERATIONS,e,r)),this.processor_.process(i,r,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,i,r){if(t||!i)return;const o=e.extent,s=e.viewState.resolution;if(s!==this.requestedFrameState_.viewState.resolution||!h1(o,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const c=Math.round(cs(o)/s),h=Math.round($u(o)/s);a=Ul(c,h),this.renderedImageCanvas_=new fbe(o,s,1,a.canvas)}a.putImageData(i,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new Zj(Hj.AFTEROPERATIONS,e,r))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let i=0,r=this.layers_.length;i<r&&(t=this.layers_[i].getSource().getResolutions(e),!t);++i);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}cte.prototype.dispose;let Jv=null;function qCe(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const i=e.size[0],r=e.size[1];if(i===0||r===0)return null;const o=t.renderFrame(e,null);let s;if(o instanceof HTMLCanvasElement)s=o;else{if(o&&(s=o.firstElementChild),!(s instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+s);if(s.width===i&&s.height===r)return s.getContext("2d").getImageData(0,0,i,r)}if(!Jv)Jv=Ul(i,r,void 0,{willReadFrequently:!0});else{const a=Jv.canvas;a.width!==i||a.height!==r?Jv=Ul(i,r,void 0,{willReadFrequently:!0}):Jv.clearRect(0,0,i,r)}return Jv.drawImage(s,0,0,i,r),Jv.getImageData(0,0,i,r)}function YCe(n){return n.map(function(e){return e.getLayerState()})}function $Ce(n){const e=n.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=VCe(n[i]);return t}function VCe(n){let e;return n instanceof zx?n instanceof lte?e=new rte({source:n}):n instanceof ote&&(e=new Xee({source:n})):e=n,e}function HCe(n,e,t,i){const r=document.createElement("script"),o="olc_"+Vr(e);function s(){delete window[o],r.parentNode.removeChild(r)}r.async=!0,r.src=n+(n.includes("?")?"&":"?")+"callback="+o;const a=setTimeout(function(){s(),t&&t()},1e4);window[o]=function(c){clearTimeout(a),s(),e(c)},document.head.appendChild(r)}const ZCe=/\{z\}/g,XCe=/\{x\}/g,JCe=/\{y\}/g,e_e=/\{-y\}/g;function t_e(n,e,t,i,r){return n.replace(ZCe,e.toString()).replace(XCe,t.toString()).replace(JCe,i.toString()).replace(e_e,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-i).toString()})}function n_e(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let o;for(o=i;o<=r;++o)e.push(n.replace(t[0],String.fromCharCode(o)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}function i_e(n,e){return(function(t,i,r){if(!t)return;let o;const s=t[0];if(e){const a=e.getFullTileRange(s);a&&(o=a.getHeight()-1)}return t_e(n,s,t[1],t[2],o)})}function Ate(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=i_e(n[r],e);return r_e(i)}function r_e(n){return n.length===1?n[0]:(function(e,t,i){if(!e)return;const r=BCe(e),o=Ob(r,n.length);return n[o](e,t,i)})}const _B={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class s6 extends lte{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===s6.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=Vr(t),r=t.getState();let o;r==ri.LOADING?(this.tileLoadingKeys_[i]=!0,o=_B.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],o=r==ri.ERROR?_B.TILELOADERROR:r==ri.LOADED?_B.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new NCe(o,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=n_e(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Ate(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}}class o_e extends s6{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:s_e,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Nee,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Zy(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Zy(t,e)))return this.tileGrid;const i=Vr(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=ste(e)),this.tileGridForProjection[i]}createTile_(e,t,i,r,o,s){const a=[e,t,i],c=this.getTileCoordForTileUrlFunction(a,o),h=c?this.tileUrlFunction(c,r,o):void 0,m=new this.tileClass(a,h!==void 0?ri.IDLE:ri.EMPTY,h!==void 0?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return m.key=s,m.addEventListener(Rr.CHANGE,this.handleTileChange.bind(this)),m}getTile(e,t,i,r,o){const s=this.getProjection();if(!s||!o||Zy(s,o))return this.getTileInternal(e,t,i,r,s||o);const a=[e,t,i],c=this.getKey(),h=this.getTileGridForProjection(s),m=this.getTileGridForProjection(o),y=this.getTileCoordForTileUrlFunction(a,o),M=new nte(s,h,o,m,a,y,this.getTilePixelRatio(r),this.getGutter(),(x,k,P,F)=>this.getTileInternal(x,k,P,F,s),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return M.key=c,M}getTileInternal(e,t,i,r,o){const s=this.getKey();return this.createTile_(e,t,i,r,o,s)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const i=Xs(e);if(i){const r=Vr(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}}function s_e(n,e){n.getImage().src=e}class hte extends o_e{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Xs("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)HCe(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let i;try{i=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(i)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=Xs("EPSG:4326"),i=this.getProjection();let r;if(e.bounds!==void 0){const h=o5(t,i);r=w0e(e.bounds,h)}const o=o6(i),s=e.minzoom||0,a=e.maxzoom||22,c=RU({extent:o,maxZoom:a,minZoom:s,tileSize:this.tileSize_});if(this.tileGrid=c,this.tileUrlFunction=Ate(e.tiles,c),e.attribution&&!this.getAttributions()){const h=r!==void 0?r:o;this.setAttributions(function(m){return Zl(h,m.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class DU extends s6{constructor(e){const t=e.projection||"EPSG:3857",i=e.extent||o6(t),r=e.tileGrid||RU({extent:i,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:r,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:dte,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:Gee,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,i){if(i.getState()===ri.IDLE){i.setState(ri.LOADING);const r=i.wrappedTileCoord,o=this.getTileGridForProjection(t),s=o.getTileCoordExtent(r),a=r[0],c=o.getResolution(a);Hy(s,-c,s);const h=this.tileGrid,m=h.getExtent();m&&rm(s,m,s);const y=h.getZForResolution(c,this.zDirection);h.forEachTileCoord(s,y,M=>{const x=this.tileUrlFunction(M,e,t);this.sourceTiles_[x]||(this.sourceTiles_[x]=new this.tileClass(M,x?ri.IDLE:ri.EMPTY,x,this.format_,this.tileLoadFunction));const k=this.sourceTiles_[x];i.sourceTiles.push(k),this.tileKeysBySourceTileUrl_[x]||(this.tileKeysBySourceTileUrl_[x]=[]),this.tileKeysBySourceTileUrl_[x].push(i.getKey());const P=k.getState();if(P<ri.LOADED){const F=j=>{this.handleTileChange(j);const q=k.getState();if(q===ri.LOADED||q===ri.ERROR){const V=k.getKey();V in i.errorTileKeys?k.getState()===ri.LOADED&&delete i.errorTileKeys[V]:i.loadingSourceTiles--,q===ri.ERROR?i.errorTileKeys[V]=!0:k.removeEventListener(Rr.CHANGE,F),i.loadingSourceTiles===0&&i.setState(tv(i.errorTileKeys)?ri.LOADED:ri.ERROR)}};k.addEventListener(Rr.CHANGE,F),i.loadingSourceTiles++}P===ri.IDLE&&(k.extent=h.getTileCoordExtent(M),k.projection=t,k.resolution=h.getResolution(M[0]),k.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(M=>M.getState()===ri.ERROR)?ri.ERROR:ri.LOADED)}return i.sourceTiles}removeSourceTiles(e){const t=e.getKey(),i=e.sourceTiles;for(let r=0,o=i.length;r<o;++r){const s=i[r].getTileUrl();if(!this.tileKeysBySourceTileUrl_[s])return;const a=this.tileKeysBySourceTileUrl_[s].indexOf(t);a!==-1&&(this.tileKeysBySourceTileUrl_[s].splice(a,1),this.tileKeysBySourceTileUrl_[s].length===0&&(delete this.tileKeysBySourceTileUrl_[s],delete this.sourceTiles_[s]))}}getTile(e,t,i,r,o){const s=[e,t,i];let a=this.getTileCoordForTileUrlFunction(s,o);const c=this.getTileGrid().getExtent(),h=this.getTileGridForProjection(o);if(a&&c){const M=h.getTileCoordExtent(a);Hy(M,-h.getResolution(e),M),Zl(c,M)||(a=null)}let m=!0;if(a!==null){const M=this.tileGrid,x=h.getResolution(e),k=M.getZForResolution(x,1),P=h.getTileCoordExtent(a);Hy(P,-x,P),M.forEachTileCoord(P,k,F=>{m=m&&!this.tileUrlFunction(F,r,o)})}const y=new gbe(s,m?ri.EMPTY:ri.IDLE,a,this.getSourceTiles.bind(this,r,o),this.removeSourceTiles.bind(this));return y.key=this.getKey(),y}getTileGridForProjection(e){const t=e.getCode();let i=this.tileGrids_[t];if(!i){const r=this.getProjection();Rs(r===null||Zy(r,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection.");const o=this.tileGrid,s=o.getResolutions().slice(),a=s.map(function(m,y){return o.getOrigin(y)}),c=s.map(function(m,y){return o.getTileSize(y)}),h=oee+1;for(let m=s.length;m<h;++m)s.push(s[m-1]/2),a.push(a[m-1]),c.push(c[m-1]);i=new r6({extent:o.getExtent(),origins:a,resolutions:s,tileSizes:c}),this.tileGrids_[t]=i}return i}getTilePixelRatio(e){return e}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),o=WA(r.getTileSize(e),this.tmpSize);return[Math.round(o[0]*t),Math.round(o[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function dte(n,e){n.setLoader(function(t,i,r){Kee(e,n.getFormat(),t,i,r,n.onLoad.bind(n),n.onError.bind(n))})}function a_e(n,e){const t=n[0],i=t.width,r=t.height,o=t.data,s=new Uint8ClampedArray(o.length),a=e.resolution*2,c=i-1,h=r-1,m=[0,0,0,0],y=2*Math.PI,M=Math.PI/2,x=Math.PI*e.sunEl/180,k=Math.PI*e.sunAz/180,P=Math.cos(x),F=Math.sin(x),j=e.highlightColor,q=e.shadowColor,V=e.accentColor,H=e.encoding;let G,Y,z,se,le,me,de,be,Ee,De,je,Ie,Qe,et,dt,ke,we,ze,xe,At,it,bt;function Bt(Ke,Te="mapbox"){if(Te==="mapbox")return(Ke[0]*256*256+Ke[1]*256+Ke[2])*.1-1e4;if(Te==="terrarium")return Ke[0]*256+Ke[1]+Ke[2]/256-32768}for(Y=0;Y<=h;++Y)for(le=Y===0?0:Y-1,me=Y===h?h:Y+1,G=0;G<=c;++G)z=G===0?0:G-1,se=G===c?c:G+1,de=(Y*i+z)*4,m[0]=o[de],m[1]=o[de+1],m[2]=o[de+2],m[3]=o[de+3],be=e.vert*Bt(m,H),de=(Y*i+se)*4,m[0]=o[de],m[1]=o[de+1],m[2]=o[de+2],m[3]=o[de+3],Ee=e.vert*Bt(m,H),De=(Ee-be)/a,de=(le*i+G)*4,m[0]=o[de],m[1]=o[de+1],m[2]=o[de+2],m[3]=o[de+3],be=e.vert*Bt(m,H),de=(me*i+G)*4,m[0]=o[de],m[1]=o[de+1],m[2]=o[de+2],m[3]=o[de+3],Ee=e.vert*Bt(m,H),je=(Ee-be)/a,Qe=Math.atan2(je,-De),Qe<0?Qe=M-Qe:Qe>M?Qe=y-Qe+M:Qe=M-Qe,Ie=Math.atan(Math.sqrt(De*De+je*je)),bt=F*Math.cos(Ie)+P*Math.sin(Ie)*Math.cos(k-Qe),et=Math.cos(Ie),dt=255*bt,xe=Math.min(Math.max(2*e.sunEl,0),1),At=1.875-e.opacity*1.75,it=e.opacity!==.5?M*((Math.pow(At,Ie)-1)/(Math.pow(At,M)-1)):Ie,we={r:(1-et)*V.r*xe*255,g:(1-et)*V.g*xe*255,b:(1-et)*V.b*xe*255,a:(1-et)*V.a*xe*255},ke=Math.abs(((Qe+k)/Math.PI+.5)%2-1),ze={r:(j.r*(1-ke)+q.r*ke)*dt,g:(j.g*(1-ke)+q.g*ke)*dt,b:(j.b*(1-ke)+q.b*ke)*dt,a:(j.a*(1-ke)+q.a*ke)*dt},de=(Y*i+G)*4,s[de]=we.r*(1-ke)+ze.r,s[de+1]=we.g*(1-ke)+ze.g,s[de+2]=we.b*(1-ke)+ze.b,s[de+3]=o[de+3]*e.opacity*xe*Math.sin(it);return new ImageData(s,i,r)}function l_e(n,e=512){return n.getExtent()?RU({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():Kg}function fte(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((i,r)=>{e.accessToken=i,e.accessTokenParam=r})),e}function u_e(n,e,t="",i={},r=void 0){let o,s,a,c,h=!0;return typeof t!="string"&&!Array.isArray(t)?(a=t,c=a.source||a.layers,i=a):c=t,typeof i=="string"?(o=i,a={}):(o=i.styleUrl,a=i),a.updateSource===!1&&(h=!1),r||(r=a.resolutions),!o&&typeof e=="string"&&!e.trim().startsWith("{")&&(o=e),o&&(o=o.startsWith("data:")?location.href:hS(o,a.accessToken),a=fte(o,a)),new Promise(function(m,y){qee(e,a).then(function(M){if(M.version!=8)return y(new Error("glStyle version 8 required."));if(!(n instanceof SU||n instanceof f3))return y(new Error("Can only apply to VectorLayer or VectorTileLayer"));const x=n instanceof f3?"vector":"geojson";if(c?Array.isArray(c)?s=M.layers.find(function(H){return H.id===c[0]}).source:s=c:(s=M.layers.find(function(H){return H.source&&M.sources[H.source].type===x}).source,c=s),!s)return y(new Error(`No ${x} source found in the glStyle.`));function k(){if(!h)return Promise.resolve();if(n instanceof f3)return gte(M.sources[s],o,a).then(function(z){const se=n.getSource();se?z!==se&&(se.setTileUrlFunction(z.getTileUrlFunction()),typeof se.setUrls=="function"&&typeof z.getUrls=="function"&&se.setUrls(z.getUrls()),se.format_||(se.format_=z.format_),se.getAttributions()||se.setAttributions(z.getAttributions()),se.getTileLoadFunction()===dte&&se.setTileLoadFunction(z.getTileLoadFunction()),Zy(se.getProjection(),z.getProjection())&&(se.tileGrid=z.getTileGrid())):n.setSource(z);const le=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&le.getMinZoom()>0&&n.setMaxResolution(q2(Math.max(0,le.getMinZoom()-1e-12),le.getResolutions()))});const H=M.sources[s];let G=n.getSource();(!G||G.get("mapbox-source")!==H)&&(G=bte(H,o,a));const Y=n.getSource();return Y?G!==Y&&(Y.getAttributions()||Y.setAttributions(G.getAttributions()),Y.format_||(Y.format_=G.getFormat()),Y.url_=G.getUrl()):n.setSource(G),Promise.resolve()}let P,F;const j={},q={};function V(){if(!F&&(!M.sprite||j)){if(a.projection&&!r){const z=Xs(a.projection).getUnits();z!=="m"&&(r=Kg.map(se=>se/nv[z]))}let H;const G=n.getSource();G instanceof DU&&G.format_ instanceof Zee&&(H=G.format_.layerName_),F=Rbe(n,M,c,r,j,q,(Y,z=a.webfonts)=>Sbe(Y,z),a.getImage,H),n.getStyle()?k().then(m).catch(y):y(new Error(`Nothing to show for source [${s}]`))}else F?(n.setStyle(F),k().then(m).catch(y)):y(new Error("Something went wrong trying to apply style."))}if(M.sprite){const H=ybe(M.sprite,a.accessToken,o||location.href);P=window.devicePixelRatio>=1.5?.5:1;const G=P==.5?"@2x":"";Promise.all(H.map(function(Y){const z=new URL(Y.url);let se=z.origin+z.pathname+G+".json"+z.search;return new Promise(function(le,me){gx("Sprite",se,a).then(le).catch(function(de){se=z.origin+z.pathname+".json"+z.search,gx("Sprite",se,a).then(le).catch(me)})}).then(function(le){le===void 0&&y(new Error("No sprites found."));let me;if(me=z.origin+z.pathname+G+".png"+z.search,a.transformRequest){const de=a.transformRequest(me,"SpriteImage")||me;(de instanceof Request||de instanceof Promise)&&(me=de)}q[Y.id]=me;for(const de in le){const be=Y.id=="default"?de:`${Y.id}:${de}`;j[be]=le[de]}}).catch(function(le){y(new Error(`Sprites cannot be loaded: ${se}: ${le.message}`))})})).then(V).catch(y)}else V()}).catch(y)})}function pte(n,e){let t;return n.some(function(i){if(i.id==e)return t=i.source,!0}),t}function c_e(n,e){const t=n.bounds;if(t){const i=V9([t[0],t[1]],e),r=V9([t[2],t[3]],e);return[i[0],i[1],r[0],r[1]]}return Xs(e).getExtent()}function mte(n,e,t){const i=new hte({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),r=i.getTileJSON(),o=i.getTileGrid(),s=Xs(t.projection||"EPSG:3857"),a=c_e(r,s),c=s.getExtent(),h=r.minzoom||0,m=r.maxzoom||22,y={attributions:i.getAttributions(),projection:s,tileGrid:new r6({origin:c?g1(c):o.getOrigin(0),extent:a||o.getExtent(),minZoom:h,resolutions:l_e(s,e.tileSize).slice(0,m+1),tileSize:o.getTileSize(0)})};return Array.isArray(r.tiles)?y.urls=r.tiles:y.url=r.tiles,y}function A_e(n,e,t,i){const r={id:n.id,type:n.type},o=n.layout||{},s=n.paint||{};r.paint=s,xf.zoom=IU(e,t.resolutions||Kg),xf.distanceFromCenter=0;let a;const c=Qi(r,"paint","background-color",Jp,i);return s["background-opacity"]!==void 0&&(a=Qi(r,"paint","background-opacity",Jp,i)),o.visibility=="none"?void 0:Ey(c,a)}function h_e(n,e,t){const i=document.createElement("div");return i.className="ol-mapbox-style-background",i.style.position="absolute",i.style.width="100%",i.style.height="100%",new Fx({source:new zx({}),render(r){const o=A_e(n,r.viewState.resolution,e,t);return i.style.backgroundColor=o,i}})}function gte(n,e,t){return new Promise(function(i,r){Yee(n,e,t).then(function({tileJson:o,tileLoadFunction:s}){const a=mte(n,o,t);a.tileLoadFunction=s,a.format=new Zee({layerName:"mvt:layer"});const c=new DU(a);c.set("mapbox-source",n),i(c)}).catch(r)})}function d_e(n,e,t){const i=new f3({declutter:!0,visible:!1});return gte(n,e,t).then(function(r){i.setSource(r)}).catch(function(r){i.setSource(void 0)}),i}function yte(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function f_e(n,e,t){return new Promise(function(i,r){Yee(n,e,t).then(function({tileJson:o,tileLoadFunction:s}){const a=new hte({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:o});a.tileGrid=mte(n,o,t).tileGrid,t.projection&&(a.projection=Xs(t.projection));const c=a.getTileUrlFunction();s&&a.setTileLoadFunction(s),a.setTileUrlFunction(function(h,m,y){const M=yte(y);let x=c(h,m,y);if(x.indexOf(M)!=-1){const k=a.getTileGrid().getTileCoordExtent(h);x=x.replace(M,k.toString())}return x}),a.set("mapbox-source",n),i(a)}).catch(function(o){r(o)})})}function vte(n,e,t){const i=new rte;return f_e(n,e,t).then(function(r){i.setSource(r)}).catch(function(){i.setSource(void 0)}),i}function p_e(n,e,t){const i=vte(n,e,t);return new Xee({source:new cte({operationType:"image",operation:a_e,sources:[i]})})}function bte(n,e,t){const i=t.projection?new jj({dataProjection:t.projection}):new jj,r=n.data,o={};if(typeof r=="string"){const[a]=uw(r,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(a)){const h=(y,M,x)=>{const k=yte(x);return a.replace(k,`${y.join(",")}`)},m=new lw({attributions:n.attribution,format:i,loader:(y,M,x,k,P)=>{const F=typeof h=="function"?h(y,M,x):h;gx("GeoJSON",F,t).then(j=>{const q=m.getFormat().readFeatures(j,{featureProjection:x});m.addFeatures(q),k(q)}).catch(j=>{m.removeLoadedExtent(y),P()})},strategy:Zve});return m.set("mapbox-source",n),m}const c=new lw({attributions:n.attribution,format:i,url:a,loader:(h,m,y,M,x)=>{gx("GeoJSON",a,t).then(k=>{const P=c.getFormat().readFeatures(k,{featureProjection:y});c.addFeatures(P),M(P)}).catch(k=>{c.removeLoadedExtent(h),x()})}});return c}o.features=i.readFeatures(r,{featureProjection:"EPSG:3857"});const s=new lw(Object.assign({attributions:n.attribution,format:i},o));return s.set("mapbox-source",n),s}function m_e(n,e,t){return new SU({declutter:!0,source:bte(n,e,t),visible:!1})}function g_e(n,e,t){let i=null;return function(r){n.paint&&"raster-opacity"in n.paint&&r.frameState.viewState.zoom!==i&&(i=r.frameState.viewState.zoom,delete t[n.id],y_e(n,e,i,t))}}function y_e(n,e,t,i){xf.zoom=t,xf.distanceFromCenter=0;const r=Qi(n,"paint","raster-opacity",Jp,i);e.setOpacity(r)}function v_e(n,e){function t(){const i=e.get("mapbox-style");if(!i)return;const r=eJ(i.layers),o=n.get("mapbox-layers"),s=r.filter(function(a){return o.includes(a.id)}).some(function(a){return!a.layout||!a.layout.visibility||a.layout.visibility==="visible"});n.get("visible")!==s&&n.setVisible(s)}n.on("change",t),t()}function b_e(n,e,t,i){const r=Qee(n),o=n.layers,s=t.type,a=t.source||pte(o,t.ref),c=n.sources[a];let h;if(s=="background")h=h_e(t,i,r);else if(c.type=="vector")h=d_e(c,e,i);else if(c.type=="raster")h=vte(c,e,i),h.setVisible(t.layout?t.layout.visibility!=="none":!0),h.on("prerender",g_e(t,h,r));else if(c.type=="geojson")h=m_e(c,e,i);else if(c.type=="raster-dem"&&t.type=="hillshade"){const y=p_e(c,e,i);h=y,y.getSource().on("beforeoperations",function(M){const x=M.data;x.resolution=$9(i.projection||"EPSG:3857",M.resolution,Mf(M.extent),"m"),xf.zoom=IU(M.resolution,i.resolutions||Kg),xf.distanceFromCenter=0,x.encoding=c.encoding,x.vert=5*Qi(t,"paint","hillshade-exaggeration",Jp,r),x.sunAz=Qi(t,"paint","hillshade-illumination-direction",Jp,r),x.sunEl=35,x.opacity=.3,x.highlightColor=Qi(t,"paint","hillshade-highlight-color",Jp,r),x.shadowColor=Qi(t,"paint","hillshade-shadow-color",Jp,r),x.accentColor=Qi(t,"paint","hillshade-accent-color",Jp,r)}),h.setVisible(t.layout?t.layout.visibility!=="none":!0)}const m=a;return h&&h.set("mapbox-source",m),h}function Xj(n,e,t,i){const r=[];let o=null;if(e instanceof e6){if(o=e.getView(),!o.isDef()&&!o.getRotation()&&!o.getResolutions()){const y=i.projection?Xs(i.projection):o.getProjection();o=new Zp(Object.assign(o.getProperties(),{maxResolution:Kg[0]/nv[y.getUnits()],projection:i.projection||o.getProjection()})),e.setView(o)}"center"in n&&!o.getCenter()&&o.setCenter(V9(n.center,o.getProjection())),"zoom"in n&&o.getZoom()===void 0&&o.setResolution(Kg[0]/nv[o.getProjection().getUnits()]/Math.pow(2,n.zoom)),(!o.getCenter()||o.getZoom()===void 0)&&o.fit(o.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",n),e.set("mapbox-metadata",{styleUrl:t,options:i});const s=n.layers;let a=[],c,h,m;for(let y=0,M=s.length;y<M;++y){const x=s[y],k=x.type;if(k=="heatmap"){console.debug(`layers[${y}].type "${k}" not supported`);continue}else m=x.source||pte(s,x.ref),(!m||m!=h)&&(a.length&&(r.push(Jj(c,a,n,t,e,i)),a=[]),c=b_e(n,t,x,i),c instanceof SU||c instanceof f3||(a=[]),h=c.get("mapbox-source")),a.push(x.id)}return r.push(Jj(c,a,n,t,e,i)),Promise.all(r)}function C_e(n,e,t={}){let i,r;if(typeof n=="string"||n instanceof HTMLElement?r=new e6({target:n}):r=n,typeof e=="string"){const o=e.startsWith("data:")?location.href:hS(e,t.accessToken);t=fte(o,t),i=new Promise(function(s,a){qee(e,t).then(function(c){Xj(c,r,o,t).then(function(){s(r)}).catch(a)}).catch(function(c){a(new Error(`Could not load ${e}: ${c.message}`))})})}else i=new Promise(function(o,s){Xj(e,r,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:hS(t.styleUrl,t.accessToken),t).then(function(){o(r)}).catch(s)});return i}function Jj(n,e,t,i,r,o={}){let s=24,a=0;const c=t.layers;for(let h=0,m=c.length;h<m;++h){const y=c[h];e.indexOf(y.id)!==-1&&(s=Math.min("minzoom"in y?y.minzoom:0,s),a=Math.max("maxzoom"in y?y.maxzoom:24,a))}return new Promise(function(h,m){const y=function(){const x=n.getSource();if(!x||x.getState()==="error"){m(new Error("Error accessing data for source "+n.get("mapbox-source")));return}if("getTileGrid"in x){const k=x.getTileGrid();if(k){const P=k.getMinZoom();(s>0||P>0)&&n.setMaxResolution(Math.min(q2(Math.max(0,s-1e-12),Kg),q2(Math.max(0,P-1e-12),k.getResolutions()))),a<24&&n.setMinResolution(q2(a,Kg))}}else s>0&&n.setMaxResolution(q2(Math.max(0,s-1e-12),Kg));x instanceof lw||x instanceof DU?u_e(n,t,e,Object.assign({styleUrl:i},o)).then(function(){v_e(n,r),h()}).catch(m):h()};n.set("mapbox-layers",e);const M=r.getLayers();M.getArray().indexOf(n)===-1&&M.push(n),n.getSource()?y():n.once("change:source",y)})}function Oi(){var n="/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",e="5f4719fc476214e7aff32d9043337b9c97544cf9",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",statementMap:{0:{start:{line:11,column:2},end:{line:15,column:3}},1:{start:{line:12,column:4},end:{line:12,column:16}},2:{start:{line:14,column:4},end:{line:14,column:149}},3:{start:{line:14,column:103},end:{line:14,column:133}},4:{start:{line:18,column:24},end:{line:25,column:3}},5:{start:{line:28,column:14},end:{line:28,column:18}},6:{start:{line:30,column:19},end:{line:30,column:23}},7:{start:{line:32,column:4},end:{line:32,column:17}},8:{start:{line:33,column:4},end:{line:38,column:6}},9:{start:{line:39,column:4},end:{line:39,column:67}},10:{start:{line:42,column:4},end:{line:42,column:26}},11:{start:{line:42,column:19},end:{line:42,column:26}},12:{start:{line:43,column:4},end:{line:43,column:33}},13:{start:{line:44,column:4},end:{line:44,column:33}},14:{start:{line:47,column:4},end:{line:51,column:5}},15:{start:{line:48,column:6},end:{line:50,column:8}},16:{start:{line:54,column:4},end:{line:61,column:7}},17:{start:{line:62,column:16},end:{line:69,column:6}},18:{start:{line:70,column:4},end:{line:78,column:7}},19:{start:{line:71,column:21},end:{line:71,column:45}},20:{start:{line:72,column:6},end:{line:77,column:9}},21:{start:{line:79,column:22},end:{line:89,column:5}},22:{start:{line:80,column:19},end:{line:80,column:42}},23:{start:{line:81,column:21},end:{line:81,column:56}},24:{start:{line:82,column:6},end:{line:88,column:9}},25:{start:{line:90,column:4},end:{line:90,column:16}},26:{start:{line:91,column:4},end:{line:91,column:33}},27:{start:{line:92,column:4},end:{line:102,column:7}},28:{start:{line:93,column:21},end:{line:93,column:56}},29:{start:{line:94,column:6},end:{line:101,column:9}},30:{start:{line:103,column:4},end:{line:103,column:19}},31:{start:{line:104,column:4},end:{line:106,column:6}},32:{start:{line:108,column:17},end:{line:111,column:3}},33:{start:{line:109,column:4},end:{line:109,column:20}},34:{start:{line:110,column:4},end:{line:110,column:37}},35:{start:{line:113,column:14},end:{line:113,column:26}},36:{start:{line:114,column:4},end:{line:185,column:9}},37:{start:{line:119,column:12},end:{line:119,column:36}},38:{start:{line:176,column:12},end:{line:176,column:31}},39:{start:{line:188,column:22},end:{line:188,column:62}}},fnMap:{0:{name:"renderCoords",decl:{start:{line:10,column:9},end:{line:10,column:21}},loc:{start:{line:10,column:30},end:{line:16,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:14,column:92},end:{line:14,column:93}},loc:{start:{line:14,column:103},end:{line:14,column:133}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:20,column:5}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:21,column:18},end:{line:21,column:19}},loc:{start:{line:21,column:24},end:{line:22,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:24,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:21},end:{line:40,column:3}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:28},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:32},end:{line:52,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:22},end:{line:107,column:3}},line:53},9:{name:"(anonymous_9)",decl:{start:{line:70,column:26},end:{line:70,column:27}},loc:{start:{line:70,column:35},end:{line:78,column:5}},line:70},10:{name:"(anonymous_10)",decl:{start:{line:79,column:22},end:{line:79,column:23}},loc:{start:{line:79,column:28},end:{line:89,column:5}},line:79},11:{name:"(anonymous_11)",decl:{start:{line:92,column:25},end:{line:92,column:26}},loc:{start:{line:92,column:33},end:{line:102,column:5}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:108,column:17},end:{line:108,column:18}},loc:{start:{line:108,column:24},end:{line:111,column:3}},line:108},13:{name:"(anonymous_13)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:11},end:{line:186,column:3}},line:112},14:{name:"(anonymous_14)",decl:{start:{line:118,column:15},end:{line:118,column:16}},loc:{start:{line:118,column:22},end:{line:120,column:11}},line:118},15:{name:"(anonymous_15)",decl:{start:{line:175,column:15},end:{line:175,column:16}},loc:{start:{line:175,column:22},end:{line:177,column:11}},line:175}},branchMap:{0:{loc:{start:{line:11,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:11,column:2},end:{line:15,column:3}},{start:{line:13,column:9},end:{line:15,column:3}}],line:11},1:{loc:{start:{line:11,column:6},end:{line:11,column:34}},type:"binary-expr",locations:[{start:{line:11,column:6},end:{line:11,column:13}},{start:{line:11,column:17},end:{line:11,column:34}}],line:11},2:{loc:{start:{line:42,column:4},end:{line:42,column:26}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},3:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},4:{loc:{start:{line:136,column:26},end:{line:136,column:59}},type:"binary-expr",locations:[{start:{line:136,column:26},end:{line:136,column:53}},{start:{line:136,column:57},end:{line:136,column:59}}],line:136},5:{loc:{start:{line:148,column:6},end:{line:170,column:10}},type:"binary-expr",locations:[{start:{line:148,column:6},end:{line:148,column:29}},{start:{line:148,column:49},end:{line:170,column:10}}],line:148}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx"],names:[],mappings:"AAoBW,cAyIL,YAzIK;AApBX,OAAO,WAAW;AAClB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAEtD,OAAO,6BAA6B;AAEpC,OAAO;AAEP,SAAQ,aAAY;AACpB,SAAQ,KAAK,MAAM,eAAc;AAEjC,SAAQ,gBAAe;AAIvB,SAAS,aAAc,QAAkB;AACvC,MAAI,CAAC,UAAU,OAAO,SAAS,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO,oBAAC,UAAK,WAAU,mBACpB,iBAAO,IAAI,CAAC,UAAU,OAAO,KAAK,EAAE,SAAS,GAAG,GAAQ,CAAC,EAAE,KAAK,IAAI,GACvE;AAAA,EACF;AACF;AAqBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAmC;AAAA,EACnC;AAAA,EACA,iBAAqC;AAAA,EAErC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU;AAAA,MACV,QAAQ,CAAC;AAAA,MACT,QAAQ,CAAC;AAAA,IACX;AACA,SAAK,cAAc,SAAS,KAAK,aAAa,KAAK,IAAI,GAAG,GAAG;AAAA,EAC/D;AAAA,EAEA,aAAa,aAAiC;AAC5C,QAAG,CAAC,KAAK,IAAK;AAGd,SAAK,IAAI,UAAU,EAAE,MAAM;AAC3B,UAAM,KAAK,KAAK,WAAW;AAAA,EAC7B;AAAA,EAEA,mBAAmB,WAAuC;AACxD,QAAI,KAAK,MAAM,aAAa,UAAU,UAAU;AAC9C,WAAK;AAAA,QACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,UAAU,IAAI,QAAQ;AAAA,MACzB,SAAS,KAAK;AAAA,MACd,SAAS;AAAA,QACP,WAAW;AAAA,UACT,UAAU;AAAA,QACZ;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,MAAM,IAAI,IAAI;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,UAAU,CAAC,KAAK,OAAO;AAAA,MACvB,MAAM,IAAI,KAAK;AAAA,QACb,MAAM;AAAA,QACN,QAAQ,CAAC,KAAK,GAAG;AAAA,MACnB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,eAAe,CAAC,QAAQ;AAC7B,YAAM,SAAS,SAAS,IAAI,UAAU;AACtC,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,UAAM,YAAY,MAAM;AACtB,YAAM,OAAO,IAAI,QAAQ,EAAE,QAAQ;AACnC,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAElD,WAAK,MAAM,SAAS;AAAA,QAClB;AAAA,QACA,QAAQ;AAAA,UACN,KAAK,OAAO,CAAC;AAAA,UACb,KAAK,OAAO,CAAC;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH;AAEA,cAAU;AACV,QAAI,GAAG,WAAW,SAAS;AAE3B,QAAI,GAAG,cAAc,CAAC,OAAO;AAC3B,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAClD,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,QACA,UAAU,IAAI,QAAQ,EAAE,YAAY,EAAE,QAAQ,CAAC;AAAA,QAC/C,MAAM,IAAI,QAAQ,EAAE,QAAQ,EAAG,QAAQ,CAAC;AAAA,MAC1C,CAAC;AAAA,IACH,CAAC;AAID,SAAK,MAAM;AACX,SAAK;AAAA,MACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,eAAe,CAAC,MAAW;AACzB,MAAE,OAAO,KAAK;AACd,SAAK,QAAS,YAAY,MAAS;AAAA,EACrC;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,yBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,KAAK,OAAK;AAAC,iBAAK,iBAAiB;AAAA,UAAE;AAAA,UACnC,OAAO,EAAC,YAAY,QAAO;AAAA,UAC3B,WAAU;AAAA,UAEV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,cAAY,EAAE,aAAa;AAAA,gBAC5B;AAAA;AAAA,YAED;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,UAAU,KAAK,MAAM,oBAAoB,CAAC;AAAA,gBAC1C,eAAe,KAAK,MAAM;AAAA;AAAA,YAC5B;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,oBACZ;AAAA,UAAE,OAAO;AAAA,QAAE;AAAA,QAAE,KAAK,MAAM;AAAA,SAC3B;AAAA,MACC,KAAK,MAAM,gBACV,qBAAC,SAAI,WAAU,qBACb;AAAA,6BAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,WAAW;AAAA,YAAE;AAAA,aAAC;AAAA,UACxB,oBAAC,UAAM,eAAK,MAAM,UAAS;AAAA,WAC7B;AAAA,SACF;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,KAAK,OAAK;AAAC,iBAAK,YAAY;AAAA,UAAE;AAAA,UAC9B,MAAK;AAAA,UACL,cAAY,EAAE,UAAU;AAAA,UACxB,OAAO;AAAA,YACL,GAAG,KAAK,MAAM;AAAA,UAChB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5f4719fc476214e7aff32d9043337b9c97544cf9"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Oi=function(){return s},s}Oi();function eN(n){return Oi().f[0]++,Oi().s[0]++,Oi().b[1][0]++,!n||(Oi().b[1][1]++,n.length<2)?(Oi().b[0][0]++,Oi().s[1]++,null):(Oi().b[0][1]++,Oi().s[2]++,ie.jsx("span",{className:"maputnik-coords",children:n.map(e=>(Oi().f[1]++,Oi().s[3]++,String(e).padStart(7,""))).join(", ")}))}class __e extends On.Component{static defaultProps=(Oi().s[4]++,{onMapLoaded:()=>{Oi().f[2]++},onDataChange:()=>{Oi().f[3]++},onLayerSelect:()=>{Oi().f[4]++}});updateStyle;map;container=(Oi().s[5]++,null);overlay;popupContainer=(Oi().s[6]++,null);constructor(e){Oi().f[5]++,Oi().s[7]++,super(e),Oi().s[8]++,this.state={zoom:"0",rotation:"0",cursor:[],center:[]},Oi().s[9]++,this.updateStyle=W4.throttle(this._updateStyle.bind(this),200)}_updateStyle(e){if(Oi().f[6]++,Oi().s[10]++,this.map)Oi().b[2][1]++;else{Oi().b[2][0]++,Oi().s[11]++;return}Oi().s[12]++,this.map.getLayers().clear(),Oi().s[13]++,C_e(this.map,e)}componentDidUpdate(e){Oi().f[7]++,Oi().s[14]++,this.props.mapStyle!==e.mapStyle?(Oi().b[3][0]++,Oi().s[15]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))):Oi().b[3][1]++}componentDidMount(){Oi().f[8]++,Oi().s[16]++,this.overlay=new mbe({element:this.popupContainer,autoPan:{animation:{duration:250}}});const e=(Oi().s[17]++,new e6({target:this.container,overlays:[this.overlay],view:new Zp({zoom:1,center:[180,-90]})}));Oi().s[18]++,e.on("pointermove",i=>{Oi().f[9]++;const r=(Oi().s[19]++,WO(i.coordinate));Oi().s[20]++,this.setState({cursor:[r[0].toFixed(2),r[1].toFixed(2)]})}),Oi().s[21]++;const t=()=>{Oi().f[10]++;const i=(Oi().s[22]++,e.getView().getZoom()),r=(Oi().s[23]++,WO(e.getView().getCenter()));Oi().s[24]++,this.props.onChange({zoom:i,center:{lng:r[0],lat:r[1]}})};Oi().s[25]++,t(),Oi().s[26]++,e.on("moveend",t),Oi().s[27]++,e.on("postrender",i=>{Oi().f[11]++;const r=(Oi().s[28]++,WO(e.getView().getCenter()));Oi().s[29]++,this.setState({center:[r[0].toFixed(2),r[1].toFixed(2)],rotation:e.getView().getRotation().toFixed(2),zoom:e.getView().getZoom().toFixed(2)})}),Oi().s[30]++,this.map=e,Oi().s[31]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))}closeOverlay=(Oi().s[32]++,e=>{Oi().f[12]++,Oi().s[33]++,e.target.blur(),Oi().s[34]++,this.overlay.setPosition(void 0)});render(){Oi().f[13]++;const e=(Oi().s[35]++,this.props.t);return Oi().s[36]++,ie.jsxs("div",{className:"maputnik-ol-container",children:[ie.jsxs("div",{ref:t=>{Oi().f[14]++,Oi().s[37]++,this.popupContainer=t},style:{background:"black"},className:"maputnik-popup",children:[ie.jsx("button",{className:"maplibregl-popup-close-button",onClick:this.closeOverlay,"aria-label":e("Close popup"),children:""}),ie.jsx(VX,{features:(Oi().b[4][0]++,this.state.selectedFeatures||(Oi().b[4][1]++,[])),onLayerSelect:this.props.onLayerSelect})]}),ie.jsxs("div",{className:"maputnik-ol-zoom",children:[e("Zoom:")," ",this.state.zoom]}),(Oi().b[5][0]++,this.props.debugToolbox&&(Oi().b[5][1]++,ie.jsxs("div",{className:"maputnik-ol-debug",children:[ie.jsxs("div",{children:[ie.jsxs("label",{children:[e("cursor:")," "]}),ie.jsx("span",{children:eN(this.state.cursor)})]}),ie.jsxs("div",{children:[ie.jsxs("label",{children:[e("center:")," "]}),ie.jsx("span",{children:eN(this.state.center)})]}),ie.jsxs("div",{children:[ie.jsxs("label",{children:[e("rotation:")," "]}),ie.jsx("span",{children:this.state.rotation})]})]}))),ie.jsx("div",{className:"maputnik-ol",ref:t=>{Oi().f[15]++,Oi().s[38]++,this.container=t},role:"region","aria-label":e("Map view"),style:{...this.props.style}})]})}}const x_e=(Oi().s[39]++,$o()(__e));var xB={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var tN;function M_e(){return tN||(tN=1,(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(o=r(o,i(a)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var a in o)e.call(o,a)&&o[a]&&(s=r(s,a));return s}function r(o,s){return s?o?o+" "+s:o+s:o}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(xB)),xB.exports}var w_e=M_e();const Yg=Xl(w_e),S_e=/("(?:[^\\"]|\\.)*")|[:,]/g;function E_e(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),i=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:r}=e;return(function o(s,a,c){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const h=JSON.stringify(s,r);if(h===void 0)return h;const m=i-a.length-c;if(h.length<=m){const y=h.replace(S_e,(M,x)=>x||`${M} `);if(y.length<=m)return y}if(r!=null&&(s=JSON.parse(h),r=void 0),typeof s=="object"&&s!==null){const y=a+t,M=[];let x=0,k,P;if(Array.isArray(s)){k="[",P="]";const{length:F}=s;for(;x<F;x++)M.push(o(s[x],y,x===F-1?0:1)||"null")}else{k="{",P="}";const F=Object.keys(s),{length:j}=F;for(;x<j;x++){const q=F[x],V=`${JSON.stringify(q)}: `,H=o(s[q],y,V.length+(x===j-1?0:1));H!==void 0&&M.push(V+H)}}if(M.length>0)return[k,t+M.join(`,
${y}`),P].join(`
${a}`)}return h})(n,"",0)}let fR=[],Cte=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?Cte:fR).push(t=t+n[e])})();function O_e(n){if(n<768)return!1;for(let e=0,t=fR.length;;){let i=e+t>>1;if(n<fR[i])t=i;else if(n>=Cte[i])e=i+1;else return!0;if(e==t)return!1}}function nN(n){return n>=127462&&n<=127487}const iN=8205;function B_e(n,e,t=!0,i=!0){return(t?_te:I_e)(n,e,i)}function _te(n,e,t){if(e==n.length)return e;e&&xte(n.charCodeAt(e))&&Mte(n.charCodeAt(e-1))&&e--;let i=MB(n,e);for(e+=rN(i);e<n.length;){let r=MB(n,e);if(i==iN||r==iN||t&&O_e(r))e+=rN(r),i=r;else if(nN(r)){let o=0,s=e-2;for(;s>=0&&nN(MB(n,s));)o++,s-=2;if(o%2==0)break;e+=2}else break}return e}function I_e(n,e,t){for(;e>0;){let i=_te(n,e-2,t);if(i<e)return i;e--}return 0}function MB(n,e){let t=n.charCodeAt(e);if(!Mte(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return xte(i)?(t-55296<<10)+(i-56320)+65536:t}function xte(n){return n>=56320&&n<57344}function Mte(n){return n>=55296&&n<56320}function rN(n){return n<65536?1:2}class _s{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=yx(this,e,t);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(t,this.length,r,1),gg.from(r,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=yx(this,e,t);let i=[];return this.decompose(e,t,i,0),gg.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new p3(this),o=new p3(e);for(let s=t,a=t;;){if(r.next(s),o.next(s),s=0,r.lineBreak!=o.lineBreak||r.done!=o.done||r.value!=o.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new p3(this,e)}iterRange(e,t=this.length){return new wte(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Ste(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?_s.empty:e.length<=32?new vu(e):gg.from(vu.split(e,[]))}}class vu extends _s{constructor(e,t=k_e(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,r){for(let o=0;;o++){let s=this.text[o],a=r+s.length;if((t?i:a)>=e)return new T_e(r,a,i,s);r=a+1,i++}}decompose(e,t,i,r){let o=e<=0&&t>=this.length?this:new vu(oN(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let s=i.pop(),a=cw(o.text,s.text.slice(),0,o.length);if(a.length<=32)i.push(new vu(a,s.length+o.length));else{let c=a.length>>1;i.push(new vu(a.slice(0,c)),new vu(a.slice(c)))}}else i.push(o)}replace(e,t,i){if(!(i instanceof vu))return super.replace(e,t,i);[e,t]=yx(this,e,t);let r=cw(this.text,cw(i.text,oN(this.text,0,e)),t),o=this.length+i.length-(t-e);return r.length<=32?new vu(r,o):gg.from(vu.split(r,[]),o)}sliceString(e,t=this.length,i=`
`){[e,t]=yx(this,e,t);let r="";for(let o=0,s=0;o<=t&&s<this.text.length;s++){let a=this.text[s],c=o+a.length;o>e&&s&&(r+=i),e<c&&t>o&&(r+=a.slice(Math.max(0,e-o),t-o)),o=c+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],r=-1;for(let o of e)i.push(o),r+=o.length+1,i.length==32&&(t.push(new vu(i,r)),i=[],r=-1);return r>-1&&t.push(new vu(i,r)),t}}class gg extends _s{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,r){for(let o=0;;o++){let s=this.children[o],a=r+s.length,c=i+s.lines-1;if((t?c:a)>=e)return s.lineInner(e,t,i,r);r=a+1,i=c+1}}decompose(e,t,i,r){for(let o=0,s=0;s<=t&&o<this.children.length;o++){let a=this.children[o],c=s+a.length;if(e<=c&&t>=s){let h=r&((s<=e?1:0)|(c>=t?2:0));s>=e&&c<=t&&!h?i.push(a):a.decompose(e-s,t-s,i,h)}s=c+1}}replace(e,t,i){if([e,t]=yx(this,e,t),i.lines<this.lines)for(let r=0,o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.length;if(e>=o&&t<=a){let c=s.replace(e-o,t-o,i),h=this.lines-s.lines+c.lines;if(c.lines<h>>4&&c.lines>h>>6){let m=this.children.slice();return m[r]=c,new gg(m,this.length-(t-e)+i.length)}return super.replace(o,a,c)}o=a+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=yx(this,e,t);let r="";for(let o=0,s=0;o<this.children.length&&s<=t;o++){let a=this.children[o],c=s+a.length;s>e&&o&&(r+=i),e<c&&t>s&&(r+=a.sliceString(e-s,t-s,i)),s=c+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof gg))return 0;let i=0,[r,o,s,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,o+=t){if(r==s||o==a)return i;let c=this.children[r],h=e.children[o];if(c!=h)return i+c.scanIdentical(h,t);i+=c.length+1}}static from(e,t=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let x of e)i+=x.lines;if(i<32){let x=[];for(let k of e)k.flatten(x);return new vu(x,t)}let r=Math.max(32,i>>5),o=r<<1,s=r>>1,a=[],c=0,h=-1,m=[];function y(x){let k;if(x.lines>o&&x instanceof gg)for(let P of x.children)y(P);else x.lines>s&&(c>s||!c)?(M(),a.push(x)):x instanceof vu&&c&&(k=m[m.length-1])instanceof vu&&x.lines+k.lines<=32?(c+=x.lines,h+=x.length+1,m[m.length-1]=new vu(k.text.concat(x.text),k.length+1+x.length)):(c+x.lines>r&&M(),c+=x.lines,h+=x.length+1,m.push(x))}function M(){c!=0&&(a.push(m.length==1?m[0]:gg.from(m,h)),h=-1,c=m.length=0)}for(let x of e)y(x);return M(),a.length==1?a[0]:new gg(a,t)}}_s.empty=new vu([""],0);function k_e(n){let e=-1;for(let t of n)e+=t.length+1;return e}function cw(n,e,t=0,i=1e9){for(let r=0,o=0,s=!0;o<n.length&&r<=i;o++){let a=n[o],c=r+a.length;c>=t&&(c>i&&(a=a.slice(0,i-r)),r<t&&(a=a.slice(t-r)),s?(e[e.length-1]+=a,s=!1):e.push(a)),r=c+1}return e}function oN(n,e,t){return cw(n,[""],e,t)}class p3{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof vu?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],o=this.offsets[i],s=o>>1,a=r instanceof vu?r.text.length:r.children.length;if(s==(t>0?a:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof vu){let c=r.text[s+(t<0?-1:0)];if(this.offsets[i]+=t,c.length>Math.max(0,e))return this.value=e==0?c:t>0?c.slice(e):c.slice(0,c.length-e),this;e-=c.length}else{let c=r.children[s+(t<0?-1:0)];e>c.length?(e-=c.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(c),this.offsets.push(t>0?1:(c instanceof vu?c.text.length:c.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class wte{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new p3(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=i?r:t<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Ste{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(_s.prototype[Symbol.iterator]=function(){return this.iter()},p3.prototype[Symbol.iterator]=wte.prototype[Symbol.iterator]=Ste.prototype[Symbol.iterator]=function(){return this});class T_e{constructor(e,t,i,r){this.from=e,this.to=t,this.number=i,this.text=r}get length(){return this.to-this.from}}function yx(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function fA(n,e,t=!0,i=!0){return B_e(n,e,t,i)}function R_e(n){return n>=56320&&n<57344}function D_e(n){return n>=55296&&n<56320}function pd(n,e){let t=n.charCodeAt(e);if(!D_e(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return R_e(i)?(t-55296<<10)+(i-56320)+65536:t}function PU(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function yg(n){return n<65536?1:2}const pR=/\r\n?|\n/;var Th=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(Th||(Th={}));class Lg{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,r=0;t<this.sections.length;){let o=this.sections[t++],s=this.sections[t++];s<0?(e(i,r,o),r+=o):r+=s,i+=o}}iterChangedRanges(e,t=!1){mR(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];r<0?e.push(i,r):e.push(r,i)}return new Lg(e)}composeDesc(e){return this.empty?e:e.empty?this:Ete(this,e)}mapDesc(e,t=!1){return e.empty?this:gR(this,e,t)}mapPos(e,t=-1,i=Th.Simple){let r=0,o=0;for(let s=0;s<this.sections.length;){let a=this.sections[s++],c=this.sections[s++],h=r+a;if(c<0){if(h>e)return o+(e-r);o+=a}else{if(i!=Th.Simple&&h>=e&&(i==Th.TrackDel&&r<e&&h>e||i==Th.TrackBefore&&r<e||i==Th.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!a)return e==r||t<0?o:o+c;o+=c}r=h}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return o}touchesRange(e,t=e){for(let i=0,r=0;i<this.sections.length&&r<=t;){let o=this.sections[i++],s=this.sections[i++],a=r+o;if(s>=0&&r<=t&&a>=e)return r<e&&a>t?"cover":!0;r=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Lg(e)}static create(e){return new Lg(e)}}class Ac extends Lg{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return mR(this,(t,i,r,o,s)=>e=e.replace(r,r+(i-t),s),!1),e}mapDesc(e,t=!1){return gR(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let r=0,o=0;r<t.length;r+=2){let s=t[r],a=t[r+1];if(a>=0){t[r]=a,t[r+1]=s;let c=r>>1;for(;i.length<c;)i.push(_s.empty);i.push(s?e.slice(o,o+s):_s.empty)}o+=s}return new Ac(t,i)}compose(e){return this.empty?e:e.empty?this:Ete(this,e,!0)}map(e,t=!1){return e.empty?this:gR(this,e,t,!0)}iterChanges(e,t=!1){mR(this,e,t)}get desc(){return Lg.create(this.sections)}filter(e){let t=[],i=[],r=[],o=new c4(this);e:for(let s=0,a=0;;){let c=s==e.length?1e9:e[s++];for(;a<c||a==c&&o.len==0;){if(o.done)break e;let m=Math.min(o.len,c-a);jA(r,m,-1);let y=o.ins==-1?-1:o.off==0?o.ins:0;jA(t,m,y),y>0&&Ny(i,t,o.text),o.forward(m),a+=m}let h=e[s++];for(;a<h;){if(o.done)break e;let m=Math.min(o.len,h-a);jA(t,m,-1),jA(r,m,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(m),a+=m}}return{changes:new Ac(t,i),filtered:Lg.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],r=this.sections[t+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let r=[],o=[],s=0,a=null;function c(m=!1){if(!m&&!r.length)return;s<t&&jA(r,t-s,-1);let y=new Ac(r,o);a=a?a.compose(y.map(a)):y,r=[],o=[],s=0}function h(m){if(Array.isArray(m))for(let y of m)h(y);else if(m instanceof Ac){if(m.length!=t)throw new RangeError(`Mismatched change set length (got ${m.length}, expected ${t})`);c(),a=a?a.compose(m.map(a)):m}else{let{from:y,to:M=y,insert:x}=m;if(y>M||y<0||M>t)throw new RangeError(`Invalid change range ${y} to ${M} (in doc of length ${t})`);let k=x?typeof x=="string"?_s.of(x.split(i||pR)):x:_s.empty,P=k.length;if(y==M&&P==0)return;y<s&&c(),y>s&&jA(r,y-s,-1),jA(r,M-y,P),Ny(o,r,k),s=M}}return h(e),c(!a),a}static empty(e){return new Ac(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let r=0;r<e.length;r++){let o=e[r];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,a)=>a&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;i.length<r;)i.push(_s.empty);i[r]=_s.of(o.slice(1)),t.push(o[0],i[r].length)}}}return new Ac(t,i)}static createSet(e,t){return new Ac(e,t)}}function jA(n,e,t,i=!1){if(e==0&&t<=0)return;let r=n.length-2;r>=0&&t<=0&&t==n[r+1]?n[r]+=e:r>=0&&e==0&&n[r]==0?n[r+1]+=t:i?(n[r]+=e,n[r+1]+=t):n.push(e,t)}function Ny(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(_s.empty);n.push(t)}}function mR(n,e,t){let i=n.inserted;for(let r=0,o=0,s=0;s<n.sections.length;){let a=n.sections[s++],c=n.sections[s++];if(c<0)r+=a,o+=a;else{let h=r,m=o,y=_s.empty;for(;h+=a,m+=c,c&&i&&(y=y.append(i[s-2>>1])),!(t||s==n.sections.length||n.sections[s+1]<0);)a=n.sections[s++],c=n.sections[s++];e(r,h,o,m,y),r=h,o=m}}}function gR(n,e,t,i=!1){let r=[],o=i?[]:null,s=new c4(n),a=new c4(e);for(let c=-1;;){if(s.done&&a.len||a.done&&s.len)throw new Error("Mismatched change set lengths");if(s.ins==-1&&a.ins==-1){let h=Math.min(s.len,a.len);jA(r,h,-1),s.forward(h),a.forward(h)}else if(a.ins>=0&&(s.ins<0||c==s.i||s.off==0&&(a.len<s.len||a.len==s.len&&!t))){let h=a.len;for(jA(r,a.ins,-1);h;){let m=Math.min(s.len,h);s.ins>=0&&c<s.i&&s.len<=m&&(jA(r,0,s.ins),o&&Ny(o,r,s.text),c=s.i),s.forward(m),h-=m}a.next()}else if(s.ins>=0){let h=0,m=s.len;for(;m;)if(a.ins==-1){let y=Math.min(m,a.len);h+=y,m-=y,a.forward(y)}else if(a.ins==0&&a.len<m)m-=a.len,a.next();else break;jA(r,h,c<s.i?s.ins:0),o&&c<s.i&&Ny(o,r,s.text),c=s.i,s.forward(s.len-m)}else{if(s.done&&a.done)return o?Ac.createSet(r,o):Lg.create(r);throw new Error("Mismatched change set lengths")}}}function Ete(n,e,t=!1){let i=[],r=t?[]:null,o=new c4(n),s=new c4(e);for(let a=!1;;){if(o.done&&s.done)return r?Ac.createSet(i,r):Lg.create(i);if(o.ins==0)jA(i,o.len,0,a),o.next();else if(s.len==0&&!s.done)jA(i,0,s.ins,a),r&&Ny(r,i,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let c=Math.min(o.len2,s.len),h=i.length;if(o.ins==-1){let m=s.ins==-1?-1:s.off?0:s.ins;jA(i,c,m,a),r&&m&&Ny(r,i,s.text)}else s.ins==-1?(jA(i,o.off?0:o.len,c,a),r&&Ny(r,i,o.textBit(c))):(jA(i,o.off?0:o.len,s.off?0:s.ins,a),r&&!s.off&&Ny(r,i,s.text));a=(o.ins>c||s.ins>=0&&s.len>c)&&(a||i.length>h),o.forward2(c),s.forward(c)}}}}class c4{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?_s.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?_s.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class mb{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new mb(i,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Sn.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Sn.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Sn.range(e.anchor,e.head)}static create(e,t,i){return new mb(e,t,i)}}class Sn{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Sn.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Sn([this.main],0)}addRange(e,t=!0){return Sn.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,Sn.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Sn(e.ranges.map(t=>mb.fromJSON(t)),e.main)}static single(e,t=e){return new Sn([Sn.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let o=e[r];if(o.empty?o.from<=i:o.from<i)return Sn.normalized(e.slice(),t);i=o.to}return new Sn(e,t)}static cursor(e,t=0,i,r){return mb.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,t,i,r){let o=(i??16777215)<<6|(r==null?7:Math.min(6,r));return t<e?mb.create(t,e,48|o):mb.create(e,t,(t>e?8:0)|o)}static normalized(e,t=0){let i=e[t];e.sort((r,o)=>r.from-o.from),t=e.indexOf(i);for(let r=1;r<e.length;r++){let o=e[r],s=e[r-1];if(o.empty?o.from<=s.to:o.from<s.to){let a=s.from,c=Math.max(o.to,s.to);r<=t&&t--,e.splice(--r,2,o.anchor>o.head?Sn.range(c,a):Sn.range(a,c))}}return new Sn(e,t)}}function Ote(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let UU=0;class Bi{constructor(e,t,i,r,o){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=r,this.id=UU++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new Bi(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:KU),!!e.static,e.enables)}of(e){return new Aw([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Aw(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Aw(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function KU(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class Aw{constructor(e,t,i,r){this.dependencies=e,this.facet=t,this.type=i,this.value=r,this.id=UU++}dynamicSlot(e){var t;let i=this.value,r=this.facet.compareInput,o=this.id,s=e[o]>>1,a=this.type==2,c=!1,h=!1,m=[];for(let y of this.dependencies)y=="doc"?c=!0:y=="selection"?h=!0:(((t=e[y.id])!==null&&t!==void 0?t:1)&1)==0&&m.push(e[y.id]);return{create(y){return y.values[s]=i(y),1},update(y,M){if(c&&M.docChanged||h&&(M.docChanged||M.selection)||yR(y,m)){let x=i(y);if(a?!sN(x,y.values[s],r):!r(x,y.values[s]))return y.values[s]=x,1}return 0},reconfigure:(y,M)=>{let x,k=M.config.address[o];if(k!=null){let P=mS(M,k);if(this.dependencies.every(F=>F instanceof Bi?M.facet(F)===y.facet(F):F instanceof pc?M.field(F,!1)==y.field(F,!1):!0)||(a?sN(x=i(y),P,r):r(x=i(y),P)))return y.values[s]=P,0}else x=i(y);return y.values[s]=x,1}}}}function sN(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function yR(n,e){let t=!1;for(let i of e)m3(n,i)&1&&(t=!0);return t}function P_e(n,e,t){let i=t.map(c=>n[c.id]),r=t.map(c=>c.type),o=i.filter(c=>!(c&1)),s=n[e.id]>>1;function a(c){let h=[];for(let m=0;m<i.length;m++){let y=mS(c,i[m]);if(r[m]==2)for(let M of y)h.push(M);else h.push(y)}return e.combine(h)}return{create(c){for(let h of i)m3(c,h);return c.values[s]=a(c),1},update(c,h){if(!yR(c,o))return 0;let m=a(c);return e.compare(m,c.values[s])?0:(c.values[s]=m,1)},reconfigure(c,h){let m=yR(c,i),y=h.config.facets[e.id],M=h.facet(e);if(y&&!m&&KU(t,y))return c.values[s]=M,0;let x=a(c);return e.compare(x,M)?(c.values[s]=M,0):(c.values[s]=x,1)}}}const cM=Bi.define({static:!0});class pc{constructor(e,t,i,r,o){this.id=e,this.createF=t,this.updateF=i,this.compareF=r,this.spec=o,this.provides=void 0}static define(e){let t=new pc(UU++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(cM).find(i=>i.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,r)=>{let o=i.values[t],s=this.updateF(o,r);return this.compareF(o,s)?0:(i.values[t]=s,1)},reconfigure:(i,r)=>{let o=i.facet(cM),s=r.facet(cM),a;return(a=o.find(c=>c.field==this))&&a!=s.find(c=>c.field==this)?(i.values[t]=a.create(i),1):r.config.address[this.id]!=null?(i.values[t]=r.field(this),0):(i.values[t]=this.create(i),1)}}}init(e){return[this,cM.of({field:this,create:e})]}get extension(){return this}}const ab={lowest:4,low:3,default:2,high:1,highest:0};function y2(n){return e=>new Bte(e,n)}const eC={highest:y2(ab.highest),high:y2(ab.high),default:y2(ab.default),low:y2(ab.low),lowest:y2(ab.lowest)};class Bte{constructor(e,t){this.inner=e,this.prec=t}}class p5{of(e){return new vR(this,e)}reconfigure(e){return p5.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class vR{constructor(e,t){this.compartment=e,this.inner=t}}class pS{constructor(e,t,i,r,o,s){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=r,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let r=[],o=Object.create(null),s=new Map;for(let M of U_e(e,t,s))M instanceof pc?r.push(M):(o[M.facet.id]||(o[M.facet.id]=[])).push(M);let a=Object.create(null),c=[],h=[];for(let M of r)a[M.id]=h.length<<1,h.push(x=>M.slot(x));let m=i?.config.facets;for(let M in o){let x=o[M],k=x[0].facet,P=m&&m[M]||[];if(x.every(F=>F.type==0))if(a[k.id]=c.length<<1|1,KU(P,x))c.push(i.facet(k));else{let F=k.combine(x.map(j=>j.value));c.push(i&&k.compare(F,i.facet(k))?i.facet(k):F)}else{for(let F of x)F.type==0?(a[F.id]=c.length<<1|1,c.push(F.value)):(a[F.id]=h.length<<1,h.push(j=>F.dynamicSlot(j)));a[k.id]=h.length<<1,h.push(F=>P_e(F,k,x))}}let y=h.map(M=>M(a));return new pS(e,s,y,a,c,o)}}function U_e(n,e,t){let i=[[],[],[],[],[]],r=new Map;function o(s,a){let c=r.get(s);if(c!=null){if(c<=a)return;let h=i[c].indexOf(s);h>-1&&i[c].splice(h,1),s instanceof vR&&t.delete(s.compartment)}if(r.set(s,a),Array.isArray(s))for(let h of s)o(h,a);else if(s instanceof vR){if(t.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(s.compartment)||s.inner;t.set(s.compartment,h),o(h,a)}else if(s instanceof Bte)o(s.inner,s.prec);else if(s instanceof pc)i[a].push(s),s.provides&&o(s.provides,a);else if(s instanceof Aw)i[a].push(s),s.facet.extensions&&o(s.facet.extensions,ab.default);else{let h=s.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(h,a)}}return o(n,ab.default),i.reduce((s,a)=>s.concat(a))}function m3(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let r=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|r}function mS(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const Ite=Bi.define(),bR=Bi.define({combine:n=>n.some(e=>e),static:!0}),kte=Bi.define({combine:n=>n.length?n[0]:void 0,static:!0}),Tte=Bi.define(),Rte=Bi.define(),Dte=Bi.define(),Pte=Bi.define({combine:n=>n.length?n[0]:!1});class v1{constructor(e,t){this.type=e,this.value=t}static define(){return new K_e}}class K_e{of(e){return new v1(this,e)}}class L_e{constructor(e){this.map=e}of(e){return new ho(this,e)}}class ho{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new ho(this.type,t)}is(e){return this.type==e}static define(e={}){return new L_e(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let r of e){let o=r.map(t);o&&i.push(o)}return i}}ho.reconfigure=ho.define();ho.appendConfig=ho.define();class fc{constructor(e,t,i,r,o,s){this.startState=e,this.changes=t,this.selection=i,this.effects=r,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,i&&Ote(i,t.newLength),o.some(a=>a.type==fc.time)||(this.annotations=o.concat(fc.time.of(Date.now())))}static create(e,t,i,r,o,s){return new fc(e,t,i,r,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(fc.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}fc.time=v1.define();fc.userEvent=v1.define();fc.addToHistory=v1.define();fc.remote=v1.define();function F_e(n,e){let t=[];for(let i=0,r=0;;){let o,s;if(i<n.length&&(r==e.length||e[r]>=n[i]))o=n[i++],s=n[i++];else if(r<e.length)o=e[r++],s=e[r++];else return t;!t.length||t[t.length-1]<o?t.push(o,s):t[t.length-1]<s&&(t[t.length-1]=s)}}function Ute(n,e,t){var i;let r,o,s;return t?(r=e.changes,o=Ac.empty(e.changes.length),s=n.changes.compose(e.changes)):(r=e.changes.map(n.changes),o=n.changes.mapDesc(e.changes,!0),s=n.changes.compose(r)),{changes:s,selection:e.selection?e.selection.map(o):(i=n.selection)===null||i===void 0?void 0:i.map(r),effects:ho.mapEffects(n.effects,r).concat(ho.mapEffects(e.effects,o)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function CR(n,e,t){let i=e.selection,r=Q_(e.annotations);return e.userEvent&&(r=r.concat(fc.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ac?e.changes:Ac.of(e.changes||[],t,n.facet(kte)),selection:i&&(i instanceof Sn?i:Sn.single(i.anchor,i.head)),effects:Q_(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function Kte(n,e,t){let i=CR(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let s=!!e[o].sequential;i=Ute(i,CR(n,e[o],s?i.changes.newLength:n.doc.length),s)}let r=fc.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return j_e(t?z_e(r):r)}function z_e(n){let e=n.startState,t=!0;for(let r of e.facet(Tte)){let o=r(n);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:F_e(t,o))}if(t!==!0){let r,o;if(t===!1)o=n.changes.invertedDesc,r=Ac.empty(e.doc.length);else{let s=n.changes.filter(t);r=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}n=fc.create(e,r,n.selection&&n.selection.map(o),ho.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let i=e.facet(Rte);for(let r=i.length-1;r>=0;r--){let o=i[r](n);o instanceof fc?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof fc?n=o[0]:n=Kte(e,Q_(o),!1)}return n}function j_e(n){let e=n.startState,t=e.facet(Dte),i=n;for(let r=t.length-1;r>=0;r--){let o=t[r](n);o&&Object.keys(o).length&&(i=Ute(i,CR(e,o,n.changes.newLength),!0))}return i==n?n:fc.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const N_e=[];function Q_(n){return n==null?N_e:Array.isArray(n)?n:[n]}var wl=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(wl||(wl={}));const G_e=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let _R;try{_R=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function W_e(n){if(_R)return _R.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||G_e.test(t)))return!0}return!1}function Q_e(n){return e=>{if(!/\S/.test(e))return wl.Space;if(W_e(e))return wl.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return wl.Word;return wl.Other}}class Cs{constructor(e,t,i,r,o,s){this.config=e,this.doc=t,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)m3(this,a<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return m3(this,i),mS(this,i)}update(...e){return Kte(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:r}=t;for(let a of e.effects)a.is(p5.reconfigure)?(t&&(r=new Map,t.compartments.forEach((c,h)=>r.set(h,c)),t=null),r.set(a.value.compartment,a.value.extension)):a.is(ho.reconfigure)?(t=null,i=a.value):a.is(ho.appendConfig)&&(t=null,i=Q_(i).concat(a.value));let o;t?o=e.startState.values.slice():(t=pS.resolve(i,r,this),o=new Cs(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(c,h)=>h.reconfigure(c,this),null).values);let s=e.startState.facet(bR)?e.newSelection:e.newSelection.asSingle();new Cs(t,e.newDoc,s,o,(a,c)=>c.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:Sn.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),r=this.changes(i.changes),o=[i.range],s=Q_(i.effects);for(let a=1;a<t.ranges.length;a++){let c=e(t.ranges[a]),h=this.changes(c.changes),m=h.map(r);for(let M=0;M<a;M++)o[M]=o[M].map(m);let y=r.mapDesc(h,!0);o.push(c.range.map(y)),r=r.compose(m),s=ho.mapEffects(s,m).concat(ho.mapEffects(Q_(c.effects),y))}return{changes:r,selection:Sn.create(o,t.mainIndex),effects:s}}changes(e=[]){return e instanceof Ac?e:Ac.of(e,this.doc.length,this.facet(Cs.lineSeparator))}toText(e){return _s.of(e.split(this.facet(Cs.lineSeparator)||pR))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(m3(this,t),mS(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof pc&&this.config.address[r.id]!=null&&(t[i]=r.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(e,o)){let s=i[o],a=e[o];r.push(s.init(c=>s.spec.fromJSON(a,c)))}}return Cs.create({doc:e.doc,selection:Sn.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=pS.resolve(e.extensions||[],new Map),i=e.doc instanceof _s?e.doc:_s.of((e.doc||"").split(t.staticFacet(Cs.lineSeparator)||pR)),r=e.selection?e.selection instanceof Sn?e.selection:Sn.single(e.selection.anchor,e.selection.head):Sn.single(0);return Ote(r,i.length),t.staticFacet(bR)||(r=r.asSingle()),new Cs(t,i,r,t.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet(Cs.tabSize)}get lineBreak(){return this.facet(Cs.lineSeparator)||`
`}get readOnly(){return this.facet(Pte)}phrase(e,...t){for(let i of this.facet(Cs.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let o=+(r||1);return!o||o>t.length?i:t[o-1]})),e}languageDataAt(e,t,i=-1){let r=[];for(let o of this.facet(Ite))for(let s of o(this,t,i))Object.prototype.hasOwnProperty.call(s,e)&&r.push(s[e]);return r}charCategorizer(e){return Q_e(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:r}=this.doc.lineAt(e),o=this.charCategorizer(e),s=e-i,a=e-i;for(;s>0;){let c=fA(t,s,!1);if(o(t.slice(c,s))!=wl.Word)break;s=c}for(;a<r;){let c=fA(t,a);if(o(t.slice(a,c))!=wl.Word)break;a=c}return s==a?null:Sn.range(s+i,a+i)}}Cs.allowMultipleSelections=bR;Cs.tabSize=Bi.define({combine:n=>n.length?n[0]:4});Cs.lineSeparator=kte;Cs.readOnly=Pte;Cs.phrases=Bi.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(r=>n[r]==e[r])}});Cs.languageData=Ite;Cs.changeFilter=Tte;Cs.transactionFilter=Rte;Cs.transactionExtender=Dte;p5.reconfigure=ho.define();function fm(n,e,t={}){let i={};for(let r of n)for(let o of Object.keys(r)){let s=r[o],a=i[o];if(a===void 0)i[o]=s;else if(!(a===s||s===void 0))if(Object.hasOwnProperty.call(t,o))i[o]=t[o](a,s);else throw new Error("Config merge conflict for field "+o)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class jb{eq(e){return this==e}range(e,t=e){return xR.create(e,t,this)}}jb.prototype.startSide=jb.prototype.endSide=0;jb.prototype.point=!1;jb.prototype.mapMode=Th.TrackDel;let xR=class Lte{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new Lte(e,t,i)}};function MR(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class LU{constructor(e,t,i,r){this.from=e,this.to=t,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,r=0){let o=i?this.to:this.from;for(let s=r,a=o.length;;){if(s==a)return s;let c=s+a>>1,h=o[c]-e||(i?this.value[c].endSide:this.value[c].startSide)-t;if(c==s)return h>=0?s:a;h>=0?a=c:s=c+1}}between(e,t,i,r){for(let o=this.findIndex(t,-1e9,!0),s=this.findIndex(i,1e9,!1,o);o<s;o++)if(r(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let i=[],r=[],o=[],s=-1,a=-1;for(let c=0;c<this.value.length;c++){let h=this.value[c],m=this.from[c]+e,y=this.to[c]+e,M,x;if(m==y){let k=t.mapPos(m,h.startSide,h.mapMode);if(k==null||(M=x=k,h.startSide!=h.endSide&&(x=t.mapPos(m,h.endSide),x<M)))continue}else if(M=t.mapPos(m,h.startSide),x=t.mapPos(y,h.endSide),M>x||M==x&&h.startSide>0&&h.endSide<=0)continue;(x-M||h.endSide-h.startSide)<0||(s<0&&(s=M),h.point&&(a=Math.max(a,x-M)),i.push(h),r.push(M-s),o.push(x-s))}return{mapped:i.length?new LU(r,o,i,a):null,pos:s}}}class rs{constructor(e,t,i,r){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=r}static create(e,t,i,r){return new rs(e,t,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:r=0,filterTo:o=this.length}=e,s=e.filter;if(t.length==0&&!s)return this;if(i&&(t=t.slice().sort(MR)),this.isEmpty)return t.length?rs.of(t):this;let a=new Fte(this,null,-1).goto(0),c=0,h=[],m=new f1;for(;a.value||c<t.length;)if(c<t.length&&(a.from-t[c].from||a.startSide-t[c].value.startSide)>=0){let y=t[c++];m.addInner(y.from,y.to,y.value)||h.push(y)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(c==t.length||this.chunkEnd(a.chunkIndex)<t[c].from)&&(!s||r>this.chunkEnd(a.chunkIndex)||o<this.chunkPos[a.chunkIndex])&&m.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!s||r>a.to||o<a.from||s(a.from,a.to,a.value))&&(m.addInner(a.from,a.to,a.value)||h.push(xR.create(a.from,a.to,a.value))),a.next());return m.finishInner(this.nextLayer.isEmpty&&!h.length?rs.empty:this.nextLayer.update({add:h,filter:s,filterFrom:r,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],r=-1;for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],c=this.chunk[s],h=e.touchesRange(a,a+c.length);if(h===!1)r=Math.max(r,c.maxPoint),t.push(c),i.push(e.mapPos(a));else if(h===!0){let{mapped:m,pos:y}=c.map(a,e);m&&(r=Math.max(r,m.maxPoint),t.push(m),i.push(y))}}let o=this.nextLayer.map(e);return t.length==0?o:new rs(i,t,o||rs.empty,r)}between(e,t,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],s=this.chunk[r];if(t>=o&&e<=o+s.length&&s.between(o,e-o,t-o,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return A4.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return A4.from(e).goto(t)}static compare(e,t,i,r,o=-1){let s=e.filter(y=>y.maxPoint>0||!y.isEmpty&&y.maxPoint>=o),a=t.filter(y=>y.maxPoint>0||!y.isEmpty&&y.maxPoint>=o),c=aN(s,a,i),h=new v2(s,c,o),m=new v2(a,c,o);i.iterGaps((y,M,x)=>lN(h,y,m,M,x,r)),i.empty&&i.length==0&&lN(h,0,m,0,0,r)}static eq(e,t,i=0,r){r==null&&(r=999999999);let o=e.filter(m=>!m.isEmpty&&t.indexOf(m)<0),s=t.filter(m=>!m.isEmpty&&e.indexOf(m)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let a=aN(o,s),c=new v2(o,a,0).goto(i),h=new v2(s,a,0).goto(i);for(;;){if(c.to!=h.to||!wR(c.active,h.active)||c.point&&(!h.point||!c.point.eq(h.point)))return!1;if(c.to>r)return!0;c.next(),h.next()}}static spans(e,t,i,r,o=-1){let s=new v2(e,null,o).goto(t),a=t,c=s.openStart;for(;;){let h=Math.min(s.to,i);if(s.point){let m=s.activeForPoint(s.to),y=s.pointFrom<t?m.length+1:s.point.startSide<0?m.length:Math.min(m.length,c);r.point(a,h,s.point,m,y,s.pointRank),c=Math.min(s.openEnd(h),m.length)}else h>a&&(r.span(a,h,s.active,c),c=s.openEnd(h));if(s.to>i)return c+(s.point&&s.to>i?1:0);a=s.to,s.next()}}static of(e,t=!1){let i=new f1;for(let r of e instanceof xR?[e]:t?q_e(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return rs.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=rs.empty;r=r.nextLayer)t=new rs(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}rs.empty=new rs([],[],null,-1);function q_e(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(MR(e,i)>0)return n.slice().sort(MR);e=i}return n}rs.empty.nextLayer=rs.empty;class f1{finishChunk(e){this.chunks.push(new LU(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new f1)).add(e,t,i)}addInner(e,t,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(rs.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=rs.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function aN(n,e,t){let i=new Map;for(let o of n)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&i.set(o.chunk[s],o.chunkPos[s]);let r=new Set;for(let o of e)for(let s=0;s<o.chunk.length;s++){let a=i.get(o.chunk[s]);a!=null&&(t?t.mapPos(a):a)==o.chunkPos[s]&&!t?.touchesRange(a,a+o.chunk[s].length)&&r.add(o.chunk[s])}return r}class Fte{constructor(e,t,i,r=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class A4{constructor(e){this.heap=e}static from(e,t=null,i=-1){let r=[];for(let o=0;o<e.length;o++)for(let s=e[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=i&&r.push(new Fte(s,t,i,o));return r.length==1?r[0]:new A4(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)wB(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)wB(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),wB(this.heap,0)}}}function wB(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let r=n[i];if(i+1<n.length&&r.compare(n[i+1])>=0&&(r=n[i+1],i++),t.compare(r)<0)break;n[i]=t,n[e]=r,e=i}}class v2{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=A4.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){AM(this.active,e),AM(this.activeTo,e),AM(this.activeRank,e),this.minActive=uN(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:r,rank:o}=this.cursor;for(;t<this.activeRank.length&&(o-this.activeRank[t]||r-this.activeTo[t])>0;)t++;hM(this.active,t,i),hM(this.activeTo,t,r),hM(this.activeRank,t,o),e&&hM(e,t,this.cursor.from),this.minActive=uN(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&AM(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function lN(n,e,t,i,r,o){n.goto(e),t.goto(i);let s=i+r,a=i,c=i-e;for(;;){let h=n.to+c-t.to,m=h||n.endSide-t.endSide,y=m<0?n.to+c:t.to,M=Math.min(y,s);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&wR(n.activeForPoint(n.to),t.activeForPoint(t.to))||o.comparePoint(a,M,n.point,t.point):M>a&&!wR(n.active,t.active)&&o.compareRange(a,M,n.active,t.active),y>s)break;(h||n.openEnd!=t.openEnd)&&o.boundChange&&o.boundChange(y),a=y,m<=0&&n.next(),m>=0&&t.next()}}function wR(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function AM(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function hM(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function uN(n,e){let t=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||n[r].endSide-n[t].endSide)<0&&(t=r,i=e[r]);return t}function jx(n,e,t=n.length){let i=0;for(let r=0;r<t&&r<n.length;)n.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=fA(n,r));return i}function SR(n,e,t,i){for(let r=0,o=0;;){if(o>=e)return r;if(r==n.length)break;o+=n.charCodeAt(r)==9?t-o%t:1,r=fA(n,r)}return i===!0?-1:n.length}const ER="",cN=typeof Symbol>"u"?"__"+ER:Symbol.for(ER),OR=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),AN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class iv{constructor(e,t){this.rules=[];let{finish:i}=t||{};function r(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,a,c,h){let m=[],y=/^@(\w+)\b/.exec(s[0]),M=y&&y[1]=="keyframes";if(y&&a==null)return c.push(s[0]+";");for(let x in a){let k=a[x];if(/&/.test(x))o(x.split(/,\s*/).map(P=>s.map(F=>P.replace(/&/,F))).reduce((P,F)=>P.concat(F)),k,c);else if(k&&typeof k=="object"){if(!y)throw new RangeError("The value of a property ("+x+") should be a primitive value.");o(r(x),k,m,M)}else k!=null&&m.push(x.replace(/_.*/,"").replace(/[A-Z]/g,P=>"-"+P.toLowerCase())+": "+k+";")}(m.length||M)&&c.push((i&&!y&&!h?s.map(i):s).join(", ")+" {"+m.join(" ")+"}")}for(let s in e)o(r(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=AN[cN]||1;return AN[cN]=e+1,ER+e.toString(36)}static mount(e,t,i){let r=e[OR],o=i&&i.nonce;r?o&&r.setNonce(o):r=new Y_e(e,o),r.mount(Array.isArray(t)?t:[t],e)}}let hN=new Map;class Y_e{constructor(e,t){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let o=hN.get(i);if(o)return e[OR]=o;this.sheet=new r.CSSStyleSheet,hN.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[OR]=this}mount(e,t){let i=this.sheet,r=0,o=0;for(let s=0;s<e.length;s++){let a=e[s],c=this.modules.indexOf(a);if(c<o&&c>-1&&(this.modules.splice(c,1),o--,c=-1),c==-1){if(this.modules.splice(o++,0,a),i)for(let h=0;h<a.rules.length;h++)i.insertRule(a.rules[h],r++)}else{for(;o<c;)r+=this.modules[o++].rules.length;r+=a.rules.length,o++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let s="";for(let c=0;c<this.modules.length;c++)s+=this.modules[c].getRules()+`
`;this.styleTag.textContent=s;let a=t.head||t;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var rv={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},h4={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},$_e=typeof navigator<"u"&&/Mac/.test(navigator.platform),V_e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var hA=0;hA<10;hA++)rv[48+hA]=rv[96+hA]=String(hA);for(var hA=1;hA<=24;hA++)rv[hA+111]="F"+hA;for(var hA=65;hA<=90;hA++)rv[hA]=String.fromCharCode(hA+32),h4[hA]=String.fromCharCode(hA);for(var SB in rv)h4.hasOwnProperty(SB)||(h4[SB]=rv[SB]);function H_e(n){var e=$_e&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||V_e&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?h4:rv)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function Ia(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i];typeof r=="string"?n.setAttribute(i,r):r!=null&&(n[i]=r)}e++}for(;e<arguments.length;e++)zte(n,arguments[e]);return n}function zte(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)zte(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}function d4(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function BR(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function hw(n,e){if(!e.anchorNode)return!1;try{return BR(n,e.anchorNode)}catch{return!1}}function f4(n){return n.nodeType==3?Gb(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function g3(n,e,t,i){return t?dN(n,e,t,i,-1)||dN(n,e,t,i,1):!1}function Nb(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function gS(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function dN(n,e,t,i,r){for(;;){if(n==t&&e==i)return!0;if(e==(r<0?0:zg(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;e=Nb(n)+(r<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(r<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=r<0?zg(n):0}else return!1}}function zg(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function a6(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function Z_e(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function jte(n,e){let t=e.width/n.offsetWidth,i=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-n.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function X_e(n,e,t,i,r,o,s,a){let c=n.ownerDocument,h=c.defaultView||window;for(let m=n,y=!1;m&&!y;)if(m.nodeType==1){let M,x=m==c.body,k=1,P=1;if(x)M=Z_e(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(m).position)&&(y=!0),m.scrollHeight<=m.clientHeight&&m.scrollWidth<=m.clientWidth){m=m.assignedSlot||m.parentNode;continue}let q=m.getBoundingClientRect();({scaleX:k,scaleY:P}=jte(m,q)),M={left:q.left,right:q.left+m.clientWidth*k,top:q.top,bottom:q.top+m.clientHeight*P}}let F=0,j=0;if(r=="nearest")e.top<M.top?(j=e.top-(M.top+s),t>0&&e.bottom>M.bottom+j&&(j=e.bottom-M.bottom+s)):e.bottom>M.bottom&&(j=e.bottom-M.bottom+s,t<0&&e.top-j<M.top&&(j=e.top-(M.top+s)));else{let q=e.bottom-e.top,V=M.bottom-M.top;j=(r=="center"&&q<=V?e.top+q/2-V/2:r=="start"||r=="center"&&t<0?e.top-s:e.bottom-V+s)-M.top}if(i=="nearest"?e.left<M.left?(F=e.left-(M.left+o),t>0&&e.right>M.right+F&&(F=e.right-M.right+o)):e.right>M.right&&(F=e.right-M.right+o,t<0&&e.left<M.left+F&&(F=e.left-(M.left+o))):F=(i=="center"?e.left+(e.right-e.left)/2-(M.right-M.left)/2:i=="start"==a?e.left-o:e.right-(M.right-M.left)+o)-M.left,F||j)if(x)h.scrollBy(F,j);else{let q=0,V=0;if(j){let H=m.scrollTop;m.scrollTop+=j/P,V=(m.scrollTop-H)*P}if(F){let H=m.scrollLeft;m.scrollLeft+=F/k,q=(m.scrollLeft-H)*k}e={left:e.left-q,top:e.top-V,right:e.right-q,bottom:e.bottom-V},q&&Math.abs(q-F)<1&&(i="nearest"),V&&Math.abs(V-j)<1&&(r="nearest")}if(x)break;(e.top<M.top||e.bottom>M.bottom||e.left<M.left||e.right>M.right)&&(e={left:Math.max(e.left,M.left),right:Math.min(e.right,M.right),top:Math.max(e.top,M.top),bottom:Math.min(e.bottom,M.bottom)}),m=m.assignedSlot||m.parentNode}else if(m.nodeType==11)m=m.host;else break}function J_e(n){let e=n.ownerDocument,t,i;for(let r=n.parentNode;r&&!(r==e.body||t&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!t&&r.scrollWidth>r.clientWidth&&(t=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:t,y:i}}class exe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?zg(t):0),i,Math.min(e.focusOffset,i?zg(i):0))}set(e,t,i,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=r}}let WC=null;function Nte(n){if(n.setActive)return n.setActive();if(WC)return n.focus(WC);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(WC==null?{get preventScroll(){return WC={preventScroll:!0},!0}}:void 0),!WC){WC=!1;for(let t=0;t<e.length;){let i=e[t++],r=e[t++],o=e[t++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let fN;function Gb(n,e,t=e){let i=fN||(fN=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function q_(n,e,t,i){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,n.dispatchEvent(o);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,n.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function txe(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function Gte(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function nxe(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,zg(t));;)if(i){if(t.nodeType!=1)return!1;let r=t.childNodes[i-1];r.contentEditable=="false"?i--:(t=r,i=zg(t))}else{if(t==n)return!0;i=Nb(t),t=t.parentNode}}function Wte(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Qte(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=zg(t)}else if(t.parentNode&&!gS(t))i=Nb(t),t=t.parentNode;else return null}}function qte(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!gS(t))i=Nb(t)+1,t=t.parentNode;else return null}}class GA{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new GA(e.parentNode,Nb(e),t)}static after(e,t){return new GA(e.parentNode,Nb(e)+1,t)}}const FU=[];class Ta{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,r=null,o;for(let s of this.children){if(s.flags&7){if(!s.dom&&(o=r?r.nextSibling:i.firstChild)){let a=Ta.get(o);(!a||!a.parent&&a.canReuseDOM(s))&&s.reuseDOM(o)}s.sync(e,t),s.flags&=-8}if(o=r?r.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&o!=s.dom&&(t.written=!0),s.dom.parentNode==i)for(;o&&o!=s.dom;)o=pN(o);else i.insertBefore(s.dom,o);r=s.dom}for(o=r?r.nextSibling:i.firstChild,o&&t&&t.node==i&&(t.written=!0);o;)o=pN(o)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let r=zg(e)==0?0:t==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;r==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?r=-1:r=1),e=o}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Ta.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,o=0;;r++){let s=this.children[r];if(s.dom==i)return o;o+=s.length+s.breakAfter}}domBoundsAround(e,t,i=0){let r=-1,o=-1,s=-1,a=-1;for(let c=0,h=i,m=i;c<this.children.length;c++){let y=this.children[c],M=h+y.length;if(h<e&&M>t)return y.domBoundsAround(e,t,h);if(M>=e&&r==-1&&(r=c,o=h),h>t&&y.dom.parentNode==this.dom){s=c,a=m;break}m=M,h=M+y.breakAfter}return{from:o,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=FU){this.markDirty();for(let r=e;r<t;r++){let o=this.children[r];o.parent==this&&i.indexOf(o)<0&&o.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Yte(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,r,o,s){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Ta.prototype.breakAfter=0;function pN(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Yte{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function $te(n,e,t,i,r,o,s,a,c){let{children:h}=n,m=h.length?h[e]:null,y=o.length?o[o.length-1]:null,M=y?y.breakAfter:s;if(!(e==i&&m&&!s&&!M&&o.length<2&&m.merge(t,r,o.length?y:null,t==0,a,c))){if(i<h.length){let x=h[i];x&&(r<x.length||x.breakAfter&&y?.breakAfter)?(e==i&&(x=x.split(r),r=0),!M&&y&&x.merge(0,r,y,!0,0,c)?o[o.length-1]=x:((r||x.children.length&&!x.children[0].length)&&x.merge(0,r,null,!1,0,c),o.push(x))):x?.breakAfter&&(y?y.breakAfter=1:s=1),i++}for(m&&(m.breakAfter=s,t>0&&(!s&&o.length&&m.merge(t,m.length,o[0],!1,a,0)?m.breakAfter=o.shift().breakAfter:(t<m.length||m.children.length&&m.children[m.children.length-1].length==0)&&m.merge(t,m.length,null,!1,a,0),e++));e<i&&o.length;)if(h[i-1].become(o[o.length-1]))i--,o.pop(),c=o.length?0:a;else if(h[e].become(o[0]))e++,o.shift(),a=o.length?0:c;else break;!o.length&&e&&i<h.length&&!h[e-1].breakAfter&&h[i].merge(0,0,h[e-1],!1,a,c)&&e--,(e<i||o.length)&&n.replaceChildren(e,i,o)}}function Vte(n,e,t,i,r,o){let s=n.childCursor(),{i:a,off:c}=s.findPos(t,1),{i:h,off:m}=s.findPos(e,-1),y=e-t;for(let M of i)y+=M.length;n.length+=y,$te(n,h,m,a,c,i,0,r,o)}let md=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},IR=typeof document<"u"?document:{documentElement:{style:{}}};const kR=/Edge\/(\d+)/.exec(md.userAgent),Hte=/MSIE \d/.test(md.userAgent),TR=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(md.userAgent),l6=!!(Hte||TR||kR),mN=!l6&&/gecko\/(\d+)/i.test(md.userAgent),EB=!l6&&/Chrome\/(\d+)/.exec(md.userAgent),ixe="webkitFontSmoothing"in IR.documentElement.style,Zte=!l6&&/Apple Computer/.test(md.vendor),gN=Zte&&(/Mobile\/\w+/.test(md.userAgent)||md.maxTouchPoints>2);var Si={mac:gN||/Mac/.test(md.platform),windows:/Win/.test(md.platform),linux:/Linux|X11/.test(md.platform),ie:l6,ie_version:Hte?IR.documentMode||6:TR?+TR[1]:kR?+kR[1]:0,gecko:mN,gecko_version:mN?+(/Firefox\/(\d+)/.exec(md.userAgent)||[0,0])[1]:0,chrome:!!EB,chrome_version:EB?+EB[1]:0,ios:gN,android:/Android\b/.test(md.userAgent),safari:Zte,webkit_version:ixe?+(/\bAppleWebKit\/(\d+)/.exec(md.userAgent)||[0,0])[1]:0,tabSize:IR.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const rxe=256;class sm extends Ta{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof sm)||this.length-(t-e)+i.length>rxe||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new sm(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new GA(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return oxe(this.dom,e,t)}}class p1 extends Ta{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let r of t)r.setParent(this)}setAttrs(e){if(Gte(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,r,o,s){return i&&(!(i instanceof p1&&i.mark.eq(this.mark))||e&&o<=0||t<this.length&&s<=0)?!1:(Vte(this,e,t,i?i.children.slice():[],o-1,s-1),this.markDirty(),!0)}split(e){let t=[],i=0,r=-1,o=0;for(let a of this.children){let c=i+a.length;c>e&&t.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=o),i=c,o++}let s=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new p1(this.mark,t,s)}domAtPos(e){return Xte(this,e)}coordsAt(e,t){return ene(this,e,t)}}function oxe(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let r=e,o=e,s=0;e==0&&t<0||e==i&&t>=0?Si.chrome||Si.gecko||(e?(r--,s=1):o<i&&(o++,s=-1)):t<0?r--:o<i&&o++;let a=Gb(n,r,o).getClientRects();if(!a.length)return null;let c=a[(s?s<0:t>=0)?0:a.length-1];return Si.safari&&!s&&c.width==0&&(c=Array.prototype.find.call(a,h=>h.width)||c),s?a6(c,s<0):c||null}class Gy extends Ta{static create(e,t,i){return new Gy(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=Gy.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,r,o,s){return i&&(!(i instanceof Gy)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof Gy&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return _s.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):_s.empty}domAtPos(e){return(this.length?e==0:this.side>0)?GA.before(this.dom):GA.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let r=this.dom.getClientRects(),o=null;if(!r.length)return null;let s=this.side?this.side<0:e>0;for(let a=s?r.length-1:0;o=r[a],!(e>0?a==0:a==r.length-1||o.top<o.bottom);a+=s?-1:1);return a6(o,!s)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class vx extends Ta{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof vx&&e.side==this.side}split(){return new vx(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?GA.before(this.dom):GA.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return _s.empty}get isHidden(){return!0}}sm.prototype.children=Gy.prototype.children=vx.prototype.children=FU;function Xte(n,e){let t=n.dom,{children:i}=n,r=0;for(let o=0;r<i.length;r++){let s=i[r],a=o+s.length;if(!(a==o&&s.getSide()<=0)){if(e>o&&e<a&&s.dom.parentNode==t)return s.domAtPos(e-o);if(e<=o)break;o=a}}for(let o=r;o>0;o--){let s=i[o-1];if(s.dom.parentNode==t)return s.domAtPos(s.length)}for(let o=r;o<i.length;o++){let s=i[o];if(s.dom.parentNode==t)return s.domAtPos(0)}return new GA(t,0)}function Jte(n,e,t){let i,{children:r}=n;t>0&&e instanceof p1&&r.length&&(i=r[r.length-1])instanceof p1&&i.mark.eq(e.mark)?Jte(i,e.children[0],t-1):(r.push(e),e.setParent(n)),n.length+=e.length}function ene(n,e,t){let i=null,r=-1,o=null,s=-1;function a(h,m){for(let y=0,M=0;y<h.children.length&&M<=m;y++){let x=h.children[y],k=M+x.length;k>=m&&(x.children.length?a(x,m-M):(!o||o.isHidden&&(t>0||axe(o,x)))&&(k>m||M==k&&x.getSide()>0)?(o=x,s=m-M):(M<m||M==k&&x.getSide()<0&&!x.isHidden)&&(i=x,r=m-M)),M=k}}a(n,e);let c=(t<0?i:o)||i||o;return c?c.coordsAt(Math.max(0,c==i?r:s),t):sxe(n)}function sxe(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=f4(e);return t[t.length-1]||null}function axe(n,e){let t=n.coordsAt(0,1),i=e.coordsAt(0,1);return t&&i&&i.top<t.bottom}function RR(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const yN=Object.create(null);function yS(n,e,t){if(n==e)return!0;n||(n=yN),e||(e=yN);let i=Object.keys(n),r=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=r.length-(t&&r.indexOf(t)>-1?1:0))return!1;for(let o of i)if(o!=t&&(r.indexOf(o)==-1||n[o]!==e[o]))return!1;return!0}function DR(n,e,t){let i=!1;if(e)for(let r in e)t&&r in t||(i=!0,r=="style"?n.style.cssText="":n.removeAttribute(r));if(t)for(let r in t)e&&e[r]==t[r]||(i=!0,r=="style"?n.style.cssText=t[r]:n.setAttribute(r,t[r]));return i}function lxe(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}class Av{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Ph=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(Ph||(Ph={}));class kr extends jb{constructor(e,t,i,r){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new m5(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new ov(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:o,end:s}=tne(e,t);i=(o?t?-3e8:-1:5e8)-1,r=(s?t?2e8:1:-6e8)+1}return new ov(e,i,r,t,e.widget||null,!0)}static line(e){return new g5(e)}static set(e,t=!1){return rs.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}kr.none=rs.empty;class m5 extends kr{constructor(e){let{start:t,end:i}=tne(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof m5&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&yS(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}m5.prototype.point=!1;class g5 extends kr{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof g5&&this.spec.class==e.spec.class&&yS(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}g5.prototype.mapMode=Th.TrackBefore;g5.prototype.point=!0;class ov extends kr{constructor(e,t,i,r,o,s){super(t,i,o,e),this.block=r,this.isReplace=s,this.mapMode=r?t<=0?Th.TrackBefore:Th.TrackAfter:Th.TrackDel}get type(){return this.startSide!=this.endSide?Ph.WidgetRange:this.startSide<=0?Ph.WidgetBefore:Ph.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ov&&uxe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}ov.prototype.point=!0;function tne(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function uxe(n,e){return n==e||!!(n&&e&&n.compare(e))}function dw(n,e,t,i=0){let r=t.length-1;r>=0&&t[r]+i>=n?t[r]=Math.max(t[r],e):t.push(n,e)}class Gu extends Ta{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,r,o,s){if(i){if(!(i instanceof Gu))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),Vte(this,e,t,i?i.children.slice():[],o,s),!0}split(e){let t=new Gu;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:r}=this.childPos(e);r&&(t.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let o=i;o<this.children.length;o++)t.append(this.children[o],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){yS(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Jte(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=RR(t,this.attrs||{})),i&&(this.attrs=RR({class:i},this.attrs||{}))}domAtPos(e){return Xte(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(Gte(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(DR(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&Ta.get(r)instanceof p1;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Ta.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!Si.ios||!this.children.some(o=>o instanceof sm))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof sm)||/[^ -~]/.test(i.text))return null;let r=f4(i.dom);if(r.length!=1)return null;e+=r[0].width,t=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=ene(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,o=i.bottom-i.top;if(Math.abs(o-r.lineHeight)<2&&r.textHeight<o){let s=(o-r.textHeight)/2;return{top:i.top+s,bottom:i.bottom-s,left:i.left,right:i.left}}}return i}become(e){return e instanceof Gu&&this.children.length==0&&e.children.length==0&&yS(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,r=0;i<e.children.length;i++){let o=e.children[i],s=r+o.length;if(s>=t){if(o instanceof Gu)return o;if(s>t)break}r=s+o.breakAfter}return null}}class l1 extends Ta{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,r,o,s){return i&&(!(i instanceof l1)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?GA.before(this.dom):GA.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new l1(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return FU}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):_s.empty}domBoundsAround(){return null}become(e){return e instanceof l1&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof PR?null:a6(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class PR extends Av{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class y3{constructor(e,t,i,r){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof l1&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Gu),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(dM(new vx(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof l1)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:a,done:c}=this.cursor.next(this.skip);if(this.skip=0,c)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e),o=Math.min(r,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(dM(new sm(this.text.slice(this.textOff,this.textOff+o)),t),i),this.atCursorPos=!0,this.textOff+=o,e-=o,i=r<=o?0:t.length}}span(e,t,i,r){this.buildText(t-e,i,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,i,r,o,s){if(this.disallowBlockEffectsFor[s]&&i instanceof ov){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(i instanceof ov)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new l1(i.widget||bx.block,a,i));else{let c=Gy.create(i.widget||bx.inline,a,a?0:i.startSide),h=this.atCursorPos&&!c.isEditable&&o<=r.length&&(e<t||i.startSide>0),m=!c.isEditable&&(e<t||o>r.length||i.startSide<=0),y=this.getLine();this.pendingBuffer==2&&!h&&!c.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),h&&(y.append(dM(new vx(1),r),o),o=r.length+Math.max(0,o-r.length)),y.append(dM(c,r),o),this.atCursorPos=m,this.pendingBuffer=m?e<t||o>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,i,r,o){let s=new y3(e,t,i,o);return s.openEnd=rs.spans(r,t,i,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function dM(n,e){for(let t of e)n=new p1(t,[n],n.length);return n}class bx extends Av{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}bx.inline=new bx("span");bx.block=new bx("div");var cl=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(cl||(cl={}));const Wb=cl.LTR,zU=cl.RTL;function nne(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const cxe=nne("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Axe=nne("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),UR=Object.create(null),sg=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);UR[e]=t,UR[t]=-e}function ine(n){return n<=247?cxe[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?Axe[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const hxe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Wy{get dir(){return this.level%2?zU:Wb}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,r){let o=-1;for(let s=0;s<e.length;s++){let a=e[s];if(a.from<=t&&a.to>=t){if(a.level==i)return s;(o<0||(r!=0?r<0?a.from<t:a.to>t:e[o].level>a.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}}function rne(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let i=n[t],r=e[t];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!rne(i.inner,r.inner))return!1}return!0}const ka=[];function dxe(n,e,t,i,r){for(let o=0;o<=i.length;o++){let s=o?i[o-1].to:e,a=o<i.length?i[o].from:t,c=o?256:r;for(let h=s,m=c,y=c;h<a;h++){let M=ine(n.charCodeAt(h));M==512?M=m:M==8&&y==4&&(M=16),ka[h]=M==4?2:M,M&7&&(y=M),m=M}for(let h=s,m=c,y=c;h<a;h++){let M=ka[h];if(M==128)h<a-1&&m==ka[h+1]&&m&24?M=ka[h]=m:ka[h]=256;else if(M==64){let x=h+1;for(;x<a&&ka[x]==64;)x++;let k=h&&m==8||x<t&&ka[x]==8?y==1?1:8:256;for(let P=h;P<x;P++)ka[P]=k;h=x-1}else M==8&&y==1&&(ka[h]=1);m=M,M&7&&(y=M)}}}function fxe(n,e,t,i,r){let o=r==1?2:1;for(let s=0,a=0,c=0;s<=i.length;s++){let h=s?i[s-1].to:e,m=s<i.length?i[s].from:t;for(let y=h,M,x,k;y<m;y++)if(x=UR[M=n.charCodeAt(y)])if(x<0){for(let P=a-3;P>=0;P-=3)if(sg[P+1]==-x){let F=sg[P+2],j=F&2?r:F&4?F&1?o:r:0;j&&(ka[y]=ka[sg[P]]=j),a=P;break}}else{if(sg.length==189)break;sg[a++]=y,sg[a++]=M,sg[a++]=c}else if((k=ka[y])==2||k==1){let P=k==r;c=P?0:1;for(let F=a-3;F>=0;F-=3){let j=sg[F+2];if(j&2)break;if(P)sg[F+2]|=2;else{if(j&4)break;sg[F+2]|=4}}}}}function pxe(n,e,t,i){for(let r=0,o=i;r<=t.length;r++){let s=r?t[r-1].to:n,a=r<t.length?t[r].from:e;for(let c=s;c<a;){let h=ka[c];if(h==256){let m=c+1;for(;;)if(m==a){if(r==t.length)break;m=t[r++].to,a=r<t.length?t[r].from:e}else if(ka[m]==256)m++;else break;let y=o==1,M=(m<e?ka[m]:i)==1,x=y==M?y?1:2:i;for(let k=m,P=r,F=P?t[P-1].to:n;k>c;)k==F&&(k=t[--P].from,F=P?t[P-1].to:n),ka[--k]=x;c=m}else o=h,c++}}}function KR(n,e,t,i,r,o,s){let a=i%2?2:1;if(i%2==r%2)for(let c=e,h=0;c<t;){let m=!0,y=!1;if(h==o.length||c<o[h].from){let P=ka[c];P!=a&&(m=!1,y=P==16)}let M=!m&&a==1?[]:null,x=m?i:i+1,k=c;e:for(;;)if(h<o.length&&k==o[h].from){if(y)break e;let P=o[h];if(!m)for(let F=P.to,j=h+1;;){if(F==t)break e;if(j<o.length&&o[j].from==F)F=o[j++].to;else{if(ka[F]==a)break e;break}}if(h++,M)M.push(P);else{P.from>c&&s.push(new Wy(c,P.from,x));let F=P.direction==Wb!=!(x%2);LR(n,F?i+1:i,r,P.inner,P.from,P.to,s),c=P.to}k=P.to}else{if(k==t||(m?ka[k]!=a:ka[k]==a))break;k++}M?KR(n,c,k,i+1,r,M,s):c<k&&s.push(new Wy(c,k,x)),c=k}else for(let c=t,h=o.length;c>e;){let m=!0,y=!1;if(!h||c>o[h-1].to){let P=ka[c-1];P!=a&&(m=!1,y=P==16)}let M=!m&&a==1?[]:null,x=m?i:i+1,k=c;e:for(;;)if(h&&k==o[h-1].to){if(y)break e;let P=o[--h];if(!m)for(let F=P.from,j=h;;){if(F==e)break e;if(j&&o[j-1].to==F)F=o[--j].from;else{if(ka[F-1]==a)break e;break}}if(M)M.push(P);else{P.to<c&&s.push(new Wy(P.to,c,x));let F=P.direction==Wb!=!(x%2);LR(n,F?i+1:i,r,P.inner,P.from,P.to,s),c=P.from}k=P.from}else{if(k==e||(m?ka[k-1]!=a:ka[k-1]==a))break;k--}M?KR(n,k,c,i+1,r,M,s):k<c&&s.push(new Wy(k,c,x)),c=k}}function LR(n,e,t,i,r,o,s){let a=e%2?2:1;dxe(n,r,o,i,a),fxe(n,r,o,i,a),pxe(r,o,i,a),KR(n,r,o,e,t,i,s)}function mxe(n,e,t){if(!n)return[new Wy(0,0,e==zU?1:0)];if(e==Wb&&!t.length&&!hxe.test(n))return one(n.length);if(t.length)for(;n.length>ka.length;)ka[ka.length]=256;let i=[],r=e==Wb?0:1;return LR(n,r,r,t,0,n.length,i),i}function one(n){return[new Wy(0,n,0)]}let sne="";function gxe(n,e,t,i,r){var o;let s=i.head-n.from,a=Wy.find(e,s,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc),c=e[a],h=c.side(r,t);if(s==h){let M=a+=r?1:-1;if(M<0||M>=e.length)return null;c=e[a=M],s=c.side(!r,t),h=c.side(r,t)}let m=fA(n.text,s,c.forward(r,t));(m<c.from||m>c.to)&&(m=h),sne=n.text.slice(Math.min(s,m),Math.max(s,m));let y=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return y&&m==h&&y.level+(r?0:1)<c.level?Sn.cursor(y.side(!r,t)+n.from,y.forward(r,t)?1:-1,y.level):Sn.cursor(m+n.from,c.forward(r,t)?-1:1,c.level)}function yxe(n,e,t){for(let i=e;i<t;i++){let r=ine(n.charCodeAt(i));if(r==1)return Wb;if(r==2||r==4)return zU}return Wb}const ane=Bi.define(),lne=Bi.define(),une=Bi.define(),cne=Bi.define(),FR=Bi.define(),Ane=Bi.define(),hne=Bi.define(),jU=Bi.define(),NU=Bi.define(),dne=Bi.define({combine:n=>n.some(e=>e)}),fne=Bi.define({combine:n=>n.some(e=>e)}),pne=Bi.define();class Y_{constructor(e,t="nearest",i="nearest",r=5,o=5,s=!1){this.range=e,this.y=t,this.x=i,this.yMargin=r,this.xMargin=o,this.isSnapshot=s}map(e){return e.empty?this:new Y_(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Y_(Sn.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const fM=ho.define({map:(n,e)=>n.map(e)}),mne=ho.define();function Dh(n,e,t){let i=n.facet(cne);i.length?i[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const t1=Bi.define({combine:n=>n.length?n[0]:!0});let vxe=0;const O_=Bi.define({combine(n){return n.filter((e,t)=>{for(let i=0;i<t;i++)if(n[i].plugin==e.plugin)return!1;return!0})}});class bu{constructor(e,t,i,r,o){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(O_.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(O_.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:i,eventObservers:r,provide:o,decorations:s}=t||{};return new bu(vxe++,e,i,r,a=>{let c=[];return s&&c.push(p4.of(h=>{let m=h.plugin(a);return m?s(m):kr.none})),o&&c.push(o(a)),c})}static fromClass(e,t){return bu.define((i,r)=>new e(i,r),t)}}class OB{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Dh(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){Dh(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Dh(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const gne=Bi.define(),GU=Bi.define(),p4=Bi.define(),yne=Bi.define(),y5=Bi.define(),vne=Bi.define();function vN(n,e){let t=n.state.facet(vne);if(!t.length)return t;let i=t.map(o=>o instanceof Function?o(n):o),r=[];return rs.spans(i,e.from,e.to,{point(){},span(o,s,a,c){let h=o-e.from,m=s-e.from,y=r;for(let M=a.length-1;M>=0;M--,c--){let x=a[M].spec.bidiIsolate,k;if(x==null&&(x=yxe(e.text,h,m)),c>0&&y.length&&(k=y[y.length-1]).to==h&&k.direction==x)k.to=m,y=k.inner;else{let P={from:h,to:m,direction:x,inner:[]};y.push(P),y=P.inner}}}}),r}const bne=Bi.define();function WU(n){let e=0,t=0,i=0,r=0;for(let o of n.state.facet(bne)){let s=o(n);s&&(s.left!=null&&(e=Math.max(e,s.left)),s.right!=null&&(t=Math.max(t,s.right)),s.top!=null&&(i=Math.max(i,s.top)),s.bottom!=null&&(r=Math.max(r,s.bottom)))}return{left:e,right:t,top:i,bottom:r}}const Y2=Bi.define();class hp{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}join(e){return new hp(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let r=0,o=0,s=0,a=0;;r++){let c=r==e.length?null:e[r],h=s-a,m=c?c.fromB:1e9;for(;o<t.length&&t[o]<m;){let y=t[o],M=t[o+1],x=Math.max(a,y),k=Math.min(m,M);if(x<=k&&new hp(x+h,k+h,x,k).addToSet(i),M>m)break;o+=2}if(!c)return i;new hp(c.fromA,c.toA,c.fromB,c.toB).addToSet(i),s=c.toA,a=c.toB}}}class vS{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Ac.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let r=[];this.changes.iterChangedRanges((o,s,a,c)=>r.push(new hp(o,s,a,c))),this.changedRanges=r}static create(e,t,i){return new vS(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class bN extends Ta{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=kr.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Gu],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new hp(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:h,toA:m})=>m<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?r=this.domChanged.newSel.head:!Sxe(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let o=r>-1?Cxe(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:h,to:m}=this.hasComposition;i=new hp(h,m,e.changes.mapPos(h,-1),e.changes.mapPos(m,1)).addToSet(i.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(Si.ie||Si.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=this.decorations,a=this.updateDeco(),c=Mxe(s,a,e.changes);return i=hp.extendWithRanges(i,c),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=Si.chrome||Si.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,s),this.flags&=-8,s&&(s.written||r.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(s=>s.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof l1&&s.widget instanceof PR&&o.push(s.dom);r.updateGaps(o)}updateChildren(e,t,i){let r=i?i.range.addToSet(e.slice()):e,o=this.childCursor(t);for(let s=r.length-1;;s--){let a=s>=0?r[s]:null;if(!a)break;let{fromA:c,toA:h,fromB:m,toB:y}=a,M,x,k,P;if(i&&i.range.fromB<y&&i.range.toB>m){let H=y3.build(this.view.state.doc,m,i.range.fromB,this.decorations,this.dynamicDecorationMap),G=y3.build(this.view.state.doc,i.range.toB,y,this.decorations,this.dynamicDecorationMap);x=H.breakAtStart,k=H.openStart,P=G.openEnd;let Y=this.compositionView(i);G.breakAtStart?Y.breakAfter=1:G.content.length&&Y.merge(Y.length,Y.length,G.content[0],!1,G.openStart,0)&&(Y.breakAfter=G.content[0].breakAfter,G.content.shift()),H.content.length&&Y.merge(0,0,H.content[H.content.length-1],!0,0,H.openEnd)&&H.content.pop(),M=H.content.concat(Y).concat(G.content)}else({content:M,breakAtStart:x,openStart:k,openEnd:P}=y3.build(this.view.state.doc,m,y,this.decorations,this.dynamicDecorationMap));let{i:F,off:j}=o.findPos(h,1),{i:q,off:V}=o.findPos(c,-1);$te(this,q,V,F,j,M,x,k,P)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(mne)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new sm(e.text.nodeValue);t.flags|=8;for(let{deco:r}of e.marks)t=new p1(r,[t],t.length);let i=new Gu;return i.append(t,0),i}fixCompositionDOM(e){let t=(o,s)=>{s.flags|=8|(s.children.some(c=>c.flags&7)?1:0),this.markedForComposition.add(s);let a=Ta.get(o);a&&a!=s&&(a.dom=null),s.setDOM(o)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];t(e.line,r);for(let o=e.marks.length-1;o>=-1;o--)i=r.childPos(i.off,1),r=r.children[i.i],t(o>=0?e.marks[o].node:e.text,r)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,o=!r&&!(this.view.state.facet(t1)||this.dom.tabIndex>-1)&&hw(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||t||o))return;let s=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,c=this.moveToLine(this.domAtPos(a.anchor)),h=a.empty?c:this.moveToLine(this.domAtPos(a.head));if(Si.gecko&&a.empty&&!this.hasComposition&&bxe(c)){let y=document.createTextNode("");this.view.observer.ignore(()=>c.node.insertBefore(y,c.node.childNodes[c.offset]||null)),c=h=new GA(y,0),s=!0}let m=this.view.observer.selectionRange;(s||!m.focusNode||(!g3(c.node,c.offset,m.anchorNode,m.anchorOffset)||!g3(h.node,h.offset,m.focusNode,m.focusOffset))&&!this.suppressWidgetCursorChange(m,a))&&(this.view.observer.ignore(()=>{Si.android&&Si.chrome&&this.dom.contains(m.focusNode)&&wxe(m.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let y=d4(this.view.root);if(y)if(a.empty){if(Si.gecko){let M=_xe(c.node,c.offset);if(M&&M!=3){let x=(M==1?Qte:qte)(c.node,c.offset);x&&(c=new GA(x.node,x.offset))}}y.collapse(c.node,c.offset),a.bidiLevel!=null&&y.caretBidiLevel!==void 0&&(y.caretBidiLevel=a.bidiLevel)}else if(y.extend){y.collapse(c.node,c.offset);try{y.extend(h.node,h.offset)}catch{}}else{let M=document.createRange();a.anchor>a.head&&([c,h]=[h,c]),M.setEnd(h.node,h.offset),M.setStart(c.node,c.offset),y.removeAllRanges(),y.addRange(M)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(c,h)),this.impreciseAnchor=c.precise?null:new GA(m.anchorNode,m.anchorOffset),this.impreciseHead=h.precise?null:new GA(m.focusNode,m.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&g3(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=d4(e.root),{anchorNode:r,anchorOffset:o}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let s=Gu.find(this,t.head);if(!s)return;let a=s.posAtStart;if(t.head==a||t.head==a+s.length)return;let c=this.coordsAt(t.head,-1),h=this.coordsAt(t.head,1);if(!c||!h||c.bottom>h.top)return;let m=this.domAtPos(t.head+t.assoc);i.collapse(m.node,m.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let y=e.observer.selectionRange;e.docView.posFromDOM(y.anchorNode,y.anchorOffset)!=t.from&&i.collapse(r,o)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let r=e.offset;!i&&r<t.childNodes.length;r++){let o=Ta.get(t.childNodes[r]);o instanceof Gu&&(i=o.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let o=Ta.get(t.childNodes[r]);o instanceof Gu&&(i=o.domAtPos(o.length))}return i?new GA(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=Ta.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let r=this.children[t];if(i<r.length||r instanceof Gu)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,r=0;for(let o=this.length,s=this.children.length-1;s>=0;s--){let a=this.children[s],c=o-a.breakAfter,h=c-a.length;if(c<e)break;if(h<=e&&(h<e||a.covers(-1))&&(c>e||a.covers(1))&&(!i||a instanceof Gu&&!(i instanceof Gu&&t>=0)))i=a,r=h;else if(i&&h==e&&c==e&&a instanceof l1&&Math.abs(t)<2){if(a.deco.startSide<0)break;s&&(i=null)}o=h}return i?i.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),r=this.children[t];if(!(r instanceof Gu))return null;for(;r.children.length;){let{i:a,off:c}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=c}if(!(r instanceof sm))return null;let o=fA(r.text,i);if(o==i)return null;let s=Gb(r.dom,i,o).getClientRects();for(let a=0;a<s.length;a++){let c=s[a];if(a==s.length-1||c.top<c.bottom&&c.left<c.right)return c}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:r}=e,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,c=this.view.textDirection==cl.LTR;for(let h=0,m=0;m<this.children.length;m++){let y=this.children[m],M=h+y.length;if(M>r)break;if(h>=i){let x=y.dom.getBoundingClientRect();if(t.push(x.height),s){let k=y.dom.lastChild,P=k?f4(k):[];if(P.length){let F=P[P.length-1],j=c?F.right-x.left:x.right-F.left;j>a&&(a=j,this.minWidth=o,this.minWidthFrom=h,this.minWidthTo=M)}}}h=M+y.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?cl.RTL:cl.LTR}measureTextSize(){for(let o of this.children)if(o instanceof Gu){let s=o.measureTextSize();if(s)return s}let e=document.createElement("div"),t,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=f4(e.firstChild)[0];t=e.getBoundingClientRect().height,i=o?o.width/27:7,r=o?o.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Yte(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,r=0;;r++){let o=r==t.viewports.length?null:t.viewports[r],s=o?o.from-1:this.length;if(s>i){let a=(t.lineBlockAt(s).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(kr.replace({widget:new PR(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,s))}if(!o)break;i=o.to+1}return kr.set(e)}updateDeco(){let e=1,t=this.view.state.facet(p4).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),i=!1,r=this.view.state.facet(yne).map((o,s)=>{let a=typeof o=="function";return a&&(i=!0),a?o(this.view):o});for(r.length&&(this.dynamicDecorationMap[e++]=i,t.push(rs.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet(pne))try{if(h(this.view,e.range,e))return!0}catch(m){Dh(this.view.state,m,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!i)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let o=WU(this.view),s={left:i.left-o.left,top:i.top-o.top,right:i.right+o.right,bottom:i.bottom+o.bottom},{offsetWidth:a,offsetHeight:c}=this.view.scrollDOM;X_e(this.view.scrollDOM,s,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,c),-c),this.view.textDirection==cl.LTR)}}function bxe(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function Cne(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let i=Qte(t.focusNode,t.focusOffset),r=qte(t.focusNode,t.focusOffset),o=i||r;if(r&&i&&r.node!=i.node){let a=Ta.get(r.node);if(!a||a instanceof sm&&a.text!=r.node.nodeValue)o=r;else if(n.docView.lastCompositionAfterCursor){let c=Ta.get(i.node);!c||c instanceof sm&&c.text!=i.node.nodeValue||(o=r)}}if(n.docView.lastCompositionAfterCursor=o!=i,!o)return null;let s=e-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}function Cxe(n,e,t){let i=Cne(n,t);if(!i)return null;let{node:r,from:o,to:s}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||n.state.doc.sliceString(i.from,i.to)!=a)return null;let c=e.invertedDesc,h=new hp(c.mapPos(o),c.mapPos(s),o,s),m=[];for(let y=r.parentNode;;y=y.parentNode){let M=Ta.get(y);if(M instanceof p1)m.push({node:y,deco:M.mark});else{if(M instanceof Gu||y.nodeName=="DIV"&&y.parentNode==n.contentDOM)return{range:h,text:r,marks:m,line:y};if(y!=n.contentDOM)m.push({node:y,deco:new m5({inclusive:!0,attributes:lxe(y),tagName:y.tagName.toLowerCase()})});else return null}}}function _xe(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let xxe=class{constructor(){this.changes=[]}compareRange(e,t){dw(e,t,this.changes)}comparePoint(e,t){dw(e,t,this.changes)}boundChange(e){dw(e,e,this.changes)}};function Mxe(n,e,t){let i=new xxe;return rs.compare(n,e,t,i),i.changes}function wxe(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function Sxe(n,e){let t=!1;return e&&n.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(t=!0)}),t}function Exe(n,e,t=1){let i=n.charCategorizer(e),r=n.doc.lineAt(e),o=e-r.from;if(r.length==0)return Sn.cursor(e);o==0?t=1:o==r.length&&(t=-1);let s=o,a=o;t<0?s=fA(r.text,o,!1):a=fA(r.text,o);let c=i(r.text.slice(s,a));for(;s>0;){let h=fA(r.text,s,!1);if(i(r.text.slice(h,s))!=c)break;s=h}for(;a<r.length;){let h=fA(r.text,a);if(i(r.text.slice(a,h))!=c)break;a=h}return Sn.range(s+r.from,a+r.from)}function Oxe(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function Bxe(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function BB(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function CN(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function _N(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function zR(n,e,t){let i,r,o,s,a=!1,c,h,m,y;for(let k=n.firstChild;k;k=k.nextSibling){let P=f4(k);for(let F=0;F<P.length;F++){let j=P[F];r&&BB(r,j)&&(j=CN(_N(j,r.bottom),r.top));let q=Oxe(e,j),V=Bxe(t,j);if(q==0&&V==0)return k.nodeType==3?xN(k,e,t):zR(k,e,t);(!i||s>V||s==V&&o>q)&&(i=k,r=j,o=q,s=V,a=q?e<j.left?F>0:F<P.length-1:!0),q==0?t>j.bottom&&(!m||m.bottom<j.bottom)?(c=k,m=j):t<j.top&&(!y||y.top>j.top)&&(h=k,y=j):m&&BB(m,j)?m=_N(m,j.bottom):y&&BB(y,j)&&(y=CN(y,j.top))}}if(m&&m.bottom>=t?(i=c,r=m):y&&y.top<=t&&(i=h,r=y),!i)return{node:n,offset:0};let M=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return xN(i,M,t);if(a&&i.contentEditable!="false")return zR(i,M,t);let x=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:n,offset:x}}function xN(n,e,t){let i=n.nodeValue.length,r=-1,o=1e9,s=0;for(let a=0;a<i;a++){let c=Gb(n,a,a+1).getClientRects();for(let h=0;h<c.length;h++){let m=c[h];if(m.top==m.bottom)continue;s||(s=e-m.left);let y=(m.top>t?m.top-t:t-m.bottom)-1;if(m.left-1<=e&&m.right+1>=e&&y<o){let M=e>=(m.left+m.right)/2,x=M;if((Si.chrome||Si.gecko)&&Gb(n,a).getBoundingClientRect().left==m.right&&(x=!M),y<=0)return{node:n,offset:a+(x?1:0)};r=a+(x?1:0),o=y}}}return{node:n,offset:r>-1?r:s>0?n.nodeValue.length:0}}function _ne(n,e,t,i=-1){var r,o;let s=n.contentDOM.getBoundingClientRect(),a=s.top+n.viewState.paddingTop,c,{docHeight:h}=n.viewState,{x:m,y}=e,M=y-a;if(M<0)return 0;if(M>h)return n.state.doc.length;for(let H=n.viewState.heightOracle.textHeight/2,G=!1;c=n.elementAtHeight(M),c.type!=Ph.Text;)for(;M=i>0?c.bottom+H:c.top-H,!(M>=0&&M<=h);){if(G)return t?null:0;G=!0,i=-i}y=a+M;let x=c.from;if(x<n.viewport.from)return n.viewport.from==0?0:t?null:MN(n,s,c,m,y);if(x>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:MN(n,s,c,m,y);let k=n.dom.ownerDocument,P=n.root.elementFromPoint?n.root:k,F=P.elementFromPoint(m,y);F&&!n.contentDOM.contains(F)&&(F=null),F||(m=Math.max(s.left+1,Math.min(s.right-1,m)),F=P.elementFromPoint(m,y),F&&!n.contentDOM.contains(F)&&(F=null));let j,q=-1;if(F&&((r=n.docView.nearest(F))===null||r===void 0?void 0:r.isEditable)!=!1){if(k.caretPositionFromPoint){let H=k.caretPositionFromPoint(m,y);H&&({offsetNode:j,offset:q}=H)}else if(k.caretRangeFromPoint){let H=k.caretRangeFromPoint(m,y);H&&({startContainer:j,startOffset:q}=H)}j&&(!n.contentDOM.contains(j)||Si.safari&&Ixe(j,q,m)||Si.chrome&&kxe(j,q,m))&&(j=void 0),j&&(q=Math.min(zg(j),q))}if(!j||!n.docView.dom.contains(j)){let H=Gu.find(n.docView,x);if(!H)return M>c.top+c.height/2?c.to:c.from;({node:j,offset:q}=zR(H.dom,m,y))}let V=n.docView.nearest(j);if(!V)return null;if(V.isWidget&&((o=V.dom)===null||o===void 0?void 0:o.nodeType)==1){let H=V.dom.getBoundingClientRect();return e.y<H.top||e.y<=H.bottom&&e.x<=(H.left+H.right)/2?V.posAtStart:V.posAtEnd}else return V.localPosFromDOM(j,q)+V.posAtStart}function MN(n,e,t,i,r){let o=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,c=Math.floor((r-t.top-(n.defaultLineHeight-a)*.5)/a);o+=c*n.viewState.heightOracle.lineLength}let s=n.state.sliceDoc(t.from,t.to);return t.from+SR(s,o,n.state.tabSize)}function xne(n,e,t){let i,r=n;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(;;){let o=r.nextSibling;if(o){if(o.nodeName=="BR")break;return!1}else{let s=r.parentNode;if(!s||s.nodeName=="DIV")break;r=s}}return Gb(n,i-1,i).getBoundingClientRect().right>t}function Ixe(n,e,t){return xne(n,e,t)}function kxe(n,e,t){if(e!=0)return xne(n,e,t);for(let r=n;;){let o=r.parentNode;if(!o||o.nodeType!=1||o.firstChild!=r)return!1;if(o.classList.contains("cm-line"))break;r=o}let i=n.nodeType==1?n.getBoundingClientRect():Gb(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function jR(n,e,t){let i=n.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let o of i.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!r||o.type==Ph.Text&&(r.type!=o.type||(t<0?o.from<e:o.to>e)))&&(r=o)}}return r||i}return i}function Txe(n,e,t,i){let r=jR(n,e.head,e.assoc||-1),o=!i||r.type!=Ph.Text||!(n.lineWrapping||r.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(o){let s=n.dom.getBoundingClientRect(),a=n.textDirectionAt(r.from),c=n.posAtCoords({x:t==(a==cl.LTR)?s.right-1:s.left+1,y:(o.top+o.bottom)/2});if(c!=null)return Sn.cursor(c,t?-1:1)}return Sn.cursor(t?r.to:r.from,t?-1:1)}function wN(n,e,t,i){let r=n.state.doc.lineAt(e.head),o=n.bidiSpans(r),s=n.textDirectionAt(r.from);for(let a=e,c=null;;){let h=gxe(r,o,s,a,t),m=sne;if(!h){if(r.number==(t?n.state.doc.lines:1))return a;m=`
`,r=n.state.doc.line(r.number+(t?1:-1)),o=n.bidiSpans(r),h=n.visualLineSide(r,!t)}if(c){if(!c(m))return a}else{if(!i)return h;c=i(m)}a=h}}function Rxe(n,e,t){let i=n.state.charCategorizer(e),r=i(t);return o=>{let s=i(o);return r==wl.Space&&(r=s),r==s}}function Dxe(n,e,t,i){let r=e.head,o=t?1:-1;if(r==(t?n.state.doc.length:0))return Sn.cursor(r,e.assoc);let s=e.goalColumn,a,c=n.contentDOM.getBoundingClientRect(),h=n.coordsAtPos(r,e.assoc||-1),m=n.documentTop;if(h)s==null&&(s=h.left-c.left),a=o<0?h.top:h.bottom;else{let x=n.viewState.lineBlockAt(r);s==null&&(s=Math.min(c.right-c.left,n.defaultCharacterWidth*(r-x.from))),a=(o<0?x.top:x.bottom)+m}let y=c.left+s,M=i??n.viewState.heightOracle.textHeight>>1;for(let x=0;;x+=10){let k=a+(M+x)*o,P=_ne(n,{x:y,y:k},!1,o);if(k<c.top||k>c.bottom||(o<0?P<r:P>r)){let F=n.docView.coordsForChar(P),j=!F||k<F.top?-1:1;return Sn.cursor(P,j,void 0,s)}}}function v3(n,e,t){for(;;){let i=0;for(let r of n)r.between(e-1,e+1,(o,s,a)=>{if(e>o&&e<s){let c=i||t||(e-o<s-e?-1:1);e=c<0?o:s,i=c}});if(!i)return e}}function Mne(n,e){let t=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],o=null;if(r.empty){let s=v3(n,r.from,0);s!=r.from&&(o=Sn.cursor(s,-1))}else{let s=v3(n,r.from,-1),a=v3(n,r.to,1);(s!=r.from||a!=r.to)&&(o=Sn.range(r.from==r.anchor?s:a,r.from==r.head?s:a))}o&&(t||(t=e.ranges.slice()),t[i]=o)}return t?Sn.create(t,e.mainIndex):e}function IB(n,e,t){let i=v3(n.state.facet(y5).map(r=>r(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:Sn.cursor(i,i<t.from?1:-1)}const $2="";class Pxe{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Cs.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=$2}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let o=this.text.length;this.readNode(r);let s=r.nextSibling;if(s==t)break;let a=Ta.get(r),c=Ta.get(s);(a&&c?a.breakAfter:(a?a.breakAfter:gS(r))||gS(s)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>o)&&this.lineBreak(),r=s}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,a;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,i),s=this.lineSeparator.length):(a=r.exec(t))&&(o=a.index,s=a[0].length),this.append(t.slice(i,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let c of this.points)c.node==e&&c.pos>this.text.length&&(c.pos-=s-1);i=o+s}}readNode(e){if(e.cmIgnore)return;let t=Ta.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(Uxe(e,i.node,i.offset)?t:0))}}function Uxe(n,e,t){for(;;){if(!e||t<zg(e))return!1;if(e==n)return!0;t=Nb(e)+1,e=e.parentNode}}class SN{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Kxe{constructor(e,t,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let a=o||s?[]:zxe(e),c=new Pxe(a,e.state);c.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=c.text,this.newSel=jxe(a,this.bounds.from)}else{let a=e.observer.selectionRange,c=o&&o.node==a.focusNode&&o.offset==a.focusOffset||!BR(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),h=s&&s.node==a.anchorNode&&s.offset==a.anchorOffset||!BR(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),m=e.viewport;if((Si.ios||Si.chrome)&&e.state.selection.main.empty&&c!=h&&(m.from>0||m.to<e.state.doc.length)){let y=Math.min(c,h),M=Math.max(c,h),x=m.from-y,k=m.to-M;(x==0||x==1||y==0)&&(k==0||k==-1||M==e.state.doc.length)&&(c=0,h=e.state.doc.length)}this.newSel=Sn.single(h,c)}}}function wne(n,e){let t,{newSel:i}=e,r=n.state.selection.main,o=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:s,to:a}=e.bounds,c=r.from,h=null;(o===8||Si.android&&e.text.length<a-s)&&(c=r.to,h="end");let m=Fxe(n.state.doc.sliceString(s,a,$2),e.text,c-s,h);m&&(Si.chrome&&o==13&&m.toB==m.from+2&&e.text.slice(m.from,m.toB)==$2+$2&&m.toB--,t={from:s+m.from,to:s+m.toA,insert:_s.of(e.text.slice(m.from,m.toB).split($2))})}else i&&(!n.hasFocus&&n.state.facet(t1)||i.main.eq(r))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!r.empty&&i&&i.main.empty?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,r.to)}:(Si.mac||Si.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=Sn.single(i.main.anchor-1,i.main.head-1)),t={from:t.from,to:t.to,insert:_s.of([t.insert.toString().replace("."," ")])}):t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,r.to))}:Si.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=Sn.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:_s.of([" "])}),t)return QU(n,t,i,o);if(i&&!i.main.eq(r)){let s=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(s=!0),a=n.inputState.lastSelectionOrigin,a=="select.pointer"&&(i=Mne(n.state.facet(y5).map(c=>c(n)),i))),n.dispatch({selection:i,scrollIntoView:s,userEvent:a}),!0}else return!1}function QU(n,e,t,i=-1){if(Si.ios&&n.inputState.flushIOSKey(e))return!0;let r=n.state.selection.main;if(Si.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&n.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&q_(n.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&q_(n.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&q_(n.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let s,a=()=>s||(s=Lxe(n,e,t));return n.state.facet(Ane).some(c=>c(n,e.from,e.to,o,a))||n.dispatch(a()),!0}function Lxe(n,e,t){let i,r=n.state,o=r.selection.main,s=-1;if(e.from==e.to&&e.from<o.from||e.from>o.to){let c=e.from<o.from?-1:1,h=c<0?o.from:o.to,m=v3(r.facet(y5).map(y=>y(n)),h,c);e.from==m&&(s=m)}if(s>-1)i={changes:e,selection:Sn.cursor(e.from+e.insert.length,-1)};else if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let c=o.from<e.from?r.sliceDoc(o.from,e.from):"",h=o.to>e.to?r.sliceDoc(e.to,o.to):"";i=r.replaceSelection(n.state.toText(c+e.insert.sliceString(0,void 0,n.state.lineBreak)+h))}else{let c=r.changes(e),h=t&&t.main.to<=c.newLength?t.main:void 0;if(r.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let m=n.state.sliceDoc(e.from,e.to),y,M=t&&Cne(n,t.main.head);if(M){let P=e.insert.length-(e.to-e.from);y={from:M.from,to:M.to-P}}else y=n.state.doc.lineAt(o.head);let x=o.to-e.to,k=o.to-o.from;i=r.changeByRange(P=>{if(P.from==o.from&&P.to==o.to)return{changes:c,range:h||P.map(c)};let F=P.to-x,j=F-m.length;if(P.to-P.from!=k||n.state.sliceDoc(j,F)!=m||P.to>=y.from&&P.from<=y.to)return{range:P};let q=r.changes({from:j,to:F,insert:e.insert}),V=P.to-o.to;return{changes:q,range:h?Sn.range(Math.max(0,h.anchor+V),Math.max(0,h.head+V)):P.map(q)}})}else i={changes:c,selection:h&&r.selection.replaceRange(h)}}let a="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,a+=".compose",n.inputState.compositionFirstChange&&(a+=".start",n.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:a,scrollIntoView:!0})}function Fxe(n,e,t,i){let r=Math.min(n.length,e.length),o=0;for(;o<r&&n.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&n.length==e.length)return null;let s=n.length,a=e.length;for(;s>0&&a>0&&n.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;if(i=="end"){let c=Math.max(0,o-Math.min(s,a));t-=s+c-o}if(s<o&&n.length<e.length){let c=t<=o&&t>=s?o-t:0;o-=c,a=o+(a-s),s=o}else if(a<o){let c=t<=o&&t>=a?o-t:0;o-=c,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}function zxe(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:o}=n.observer.selectionRange;return t&&(e.push(new SN(t,i)),(r!=t||o!=i)&&e.push(new SN(r,o))),e}function jxe(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?Sn.single(t+e,i+e):null}class Nxe{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Si.safari&&e.contentDOM.addEventListener("input",()=>null),Si.gecko&&r2e(e.contentDOM.ownerDocument)}handleEvent(e){!Hxe(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,t);for(let r of i.handlers){if(t.defaultPrevented)break;if(r(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=Gxe(e),i=this.handlers,r=this.view.contentDOM;for(let o in t)if(o!="scroll"){let s=!t[o].handlers.length,a=i[o];a&&s!=!a.handlers.length&&(r.removeEventListener(o,this.handleEvent),a=null),a||r.addEventListener(o,this.handleEvent,{passive:s})}for(let o in i)o!="scroll"&&!t[o]&&r.removeEventListener(o,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Ene.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Si.android&&Si.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Si.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=Sne.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||Wxe.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,q_(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Si.safari&&!Si.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function EN(n,e){return(t,i)=>{try{return e.call(n,i,t)}catch(r){Dh(t.state,r)}}}function Gxe(n){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of n){let r=i.spec,o=r&&r.plugin.domEventHandlers,s=r&&r.plugin.domEventObservers;if(o)for(let a in o){let c=o[a];c&&t(a).handlers.push(EN(i.value,c))}if(s)for(let a in s){let c=s[a];c&&t(a).observers.push(EN(i.value,c))}}for(let i in am)t(i).handlers.push(am[i]);for(let i in pp)t(i).observers.push(pp[i]);return e}const Sne=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Wxe="dthko",Ene=[16,17,18,20,91,92,224,225],pM=6;function mM(n){return Math.max(0,n)*.7+8}function Qxe(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class qxe{constructor(e,t,i,r){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=J_e(e.contentDOM),this.atoms=e.state.facet(y5).map(s=>s(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Cs.allowMultipleSelections)&&Yxe(e,t),this.dragging=Vxe(e,t)&&Ine(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Qxe(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,r=0,o=0,s=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:a}=this.scrollParents.y.getBoundingClientRect());let c=WU(this.view);e.clientX-c.left<=r+pM?t=-mM(r-e.clientX):e.clientX+c.right>=s-pM&&(t=mM(e.clientX-s)),e.clientY-c.top<=o+pM?i=-mM(o-e.clientY):e.clientY+c.bottom>=a-pM&&(i=mM(e.clientY-a)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,i=Mne(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Yxe(n,e){let t=n.state.facet(ane);return t.length?t[0](e):Si.mac?e.metaKey:e.ctrlKey}function $xe(n,e){let t=n.state.facet(lne);return t.length?t[0](e):Si.mac?!e.altKey:!e.ctrlKey}function Vxe(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=d4(n.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let o=0;o<r.length;o++){let s=r[o];if(s.left<=e.clientX&&s.right>=e.clientX&&s.top<=e.clientY&&s.bottom>=e.clientY)return!0}return!1}function Hxe(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=Ta.get(t))&&i.ignoreEvent(e))return!1;return!0}const am=Object.create(null),pp=Object.create(null),One=Si.ie&&Si.ie_version<15||Si.ios&&Si.webkit_version<604;function Zxe(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),Bne(n,t.value)},50)}function u6(n,e,t){for(let i of n.facet(e))t=i(t,n);return t}function Bne(n,e){e=u6(n.state,jU,e);let{state:t}=n,i,r=1,o=t.toText(e),s=o.lines==t.selection.ranges.length;if(NR!=null&&t.selection.ranges.every(c=>c.empty)&&NR==o.toString()){let c=-1;i=t.changeByRange(h=>{let m=t.doc.lineAt(h.from);if(m.from==c)return{range:h};c=m.from;let y=t.toText((s?o.line(r++).text:e)+t.lineBreak);return{changes:{from:m.from,insert:y},range:Sn.cursor(h.from+y.length)}})}else s?i=t.changeByRange(c=>{let h=o.line(r++);return{changes:{from:c.from,to:c.to,insert:h.text},range:Sn.cursor(c.from+h.length)}}):i=t.replaceSelection(o);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}pp.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};am.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);pp.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};pp.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};am.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of n.state.facet(une))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=e2e(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new qxe(n,e,t,i)),i&&n.observer.ignore(()=>{Nte(n.contentDOM);let o=n.root.activeElement;o&&!o.contains(n.contentDOM)&&o.blur()});let r=n.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function ON(n,e,t,i){if(i==1)return Sn.cursor(e,t);if(i==2)return Exe(n.state,e,t);{let r=Gu.find(n.docView,e),o=n.state.doc.lineAt(r?r.posAtEnd:e),s=r?r.posAtStart:o.from,a=r?r.posAtEnd:o.to;return a<n.state.doc.length&&a==o.to&&a++,Sn.range(s,a)}}let BN=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function Xxe(n,e,t,i){let r=Gu.find(n.docView,e);if(!r)return 1;let o=e-r.posAtStart;if(o==0)return 1;if(o==r.length)return-1;let s=r.coordsAt(o,-1);if(s&&BN(t,i,s))return-1;let a=r.coordsAt(o,1);return a&&BN(t,i,a)?1:s&&s.bottom>=i?-1:1}function IN(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:Xxe(n,t,e.clientX,e.clientY)}}const Jxe=Si.ie&&Si.ie_version<=11;let kN=null,TN=0,RN=0;function Ine(n){if(!Jxe)return n.detail;let e=kN,t=RN;return kN=n,RN=Date.now(),TN=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(TN+1)%3:1}function e2e(n,e){let t=IN(n,e),i=Ine(e),r=n.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),r=r.map(o.changes))},get(o,s,a){let c=IN(n,o),h,m=ON(n,c.pos,c.bias,i);if(t.pos!=c.pos&&!s){let y=ON(n,t.pos,t.bias,i),M=Math.min(y.from,m.from),x=Math.max(y.to,m.to);m=M<m.from?Sn.range(M,x):Sn.range(x,M)}return s?r.replaceRange(r.main.extend(m.from,m.to)):a&&i==1&&r.ranges.length>1&&(h=t2e(r,c.pos))?h:a?r.addRange(m):Sn.create([m])}}}function t2e(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:r}=n.ranges[t];if(i<=e&&r>=e)return Sn.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}am.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let r=n.docView.nearest(e.target);if(r&&r.isWidget){let o=r.posAtStart,s=o+r.length;(o>=t.to||s<=t.from)&&(t=Sn.range(o,s))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",u6(n.state,NU,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};am.dragend=n=>(n.inputState.draggedContent=null,!1);function DN(n,e,t,i){if(t=u6(n.state,jU,t),!t)return;let r=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=n.inputState,s=i&&o&&$xe(n,e)?{from:o.from,to:o.to}:null,a={from:r,insert:t},c=n.state.changes(s?[s,a]:a);n.focus(),n.dispatch({changes:c,selection:{anchor:c.mapPos(r,-1),head:c.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"}),n.inputState.draggedContent=null}am.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),r=0,o=()=>{++r==t.length&&DN(n,e,i.filter(s=>s!=null).join(n.state.lineBreak),!1)};for(let s=0;s<t.length;s++){let a=new FileReader;a.onerror=o,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[s]=a.result),o()},a.readAsText(t[s])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return DN(n,e,i,!0),!0}return!1};am.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=One?null:e.clipboardData;return t?(Bne(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(Zxe(n),!1)};function n2e(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function i2e(n){let e=[],t=[],i=!1;for(let r of n.selection.ranges)r.empty||(e.push(n.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:o}of n.selection.ranges){let s=n.doc.lineAt(o);s.number>r&&(e.push(s.text),t.push({from:s.from,to:Math.min(n.doc.length,s.to+1)})),r=s.number}i=!0}return{text:u6(n,NU,e.join(n.lineBreak)),ranges:t,linewise:i}}let NR=null;am.copy=am.cut=(n,e)=>{let{text:t,ranges:i,linewise:r}=i2e(n.state);if(!t&&!r)return!1;NR=r?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=One?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",t),!0):(n2e(n,t),!1)};const kne=v1.define();function Tne(n,e){let t=[];for(let i of n.facet(hne)){let r=i(n,e);r&&t.push(r)}return t.length?n.update({effects:t,annotations:kne.of(!0)}):null}function Rne(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=Tne(n.state,e);t?n.dispatch(t):n.update([])}},10)}pp.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),Rne(n)};pp.blur=n=>{n.observer.clearSelectionRange(),Rne(n)};pp.compositionstart=pp.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};pp.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,Si.chrome&&Si.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};pp.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};am.beforeinput=(n,e)=>{var t,i;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let o=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),s=e.getTargetRanges();if(o&&s.length){let a=s[0],c=n.posAtDOM(a.startContainer,a.startOffset),h=n.posAtDOM(a.endContainer,a.endOffset);return QU(n,{from:c,to:h,insert:n.state.toText(o)},null),!0}}let r;if(Si.chrome&&Si.android&&(r=Sne.find(o=>o.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let o=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return Si.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),Si.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>pp.compositionend(n,e),20),!1};const PN=new Set;function r2e(n){PN.has(n)||(PN.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const UN=["pre-wrap","normal","pre-line","break-spaces"];let Cx=!1;function KN(){Cx=!1}class o2e{constructor(e){this.lineWrapping=e,this.doc=_s.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return UN.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,i,r,o,s){let a=UN.indexOf(e)>-1,c=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=i,this.textHeight=r,this.lineLength=o,c){this.heightSamples={};for(let h=0;h<s.length;h++){let m=s[h];m<0?h++:this.heightSamples[Math.floor(m*10)]=!0}}return c}}class s2e{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class vg{constructor(e,t,i,r,o){this.from=e,this.length=t,this.top=i,this.height=r,this._content=o}get type(){return typeof this._content=="number"?Ph.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ov?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new vg(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var ll=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(ll||(ll={}));const fw=.001;class Uh{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>fw&&(Cx=!0),this.height=e)}replace(e,t,i){return Uh.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,r){let o=this,s=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:c,toA:h,fromB:m,toB:y}=r[a],M=o.lineAt(c,ll.ByPosNoHeight,i.setDoc(t),0,0),x=M.to>=h?M:o.lineAt(h,ll.ByPosNoHeight,i,0,0);for(y+=x.to-h,h=x.to;a>0&&M.from<=r[a-1].toA;)c=r[a-1].fromA,m=r[a-1].fromB,a--,c<M.from&&(M=o.lineAt(c,ll.ByPosNoHeight,i,0,0));m+=M.from-c,c=M.from;let k=qU.build(i.setDoc(s),e,m,y);o=bS(o,o.replace(c,h,k))}return o.updateHeight(i,0)}static empty(){return new Af(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,r=0,o=0;for(;;)if(t==i)if(r>o*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(o>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,o-=a.size}else break;else if(r<o){let a=e[t++];a&&(r+=a.size)}else{let a=e[--i];a&&(o+=a.size)}let s=0;return e[t-1]==null?(s=1,t--):e[t]==null&&(s=1,i++),new a2e(Uh.of(e.slice(0,t)),s,Uh.of(e.slice(i)))}}function bS(n,e){return n==e?n:(n.constructor!=e.constructor&&(Cx=!0),e)}Uh.prototype.size=1;class Dne extends Uh{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,r){return new vg(r,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,r,o){return this.blockAt(0,i,r,o)}forEachLine(e,t,i,r,o,s){e<=o+this.length&&t>=o&&s(this.blockAt(0,i,r,o))}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Af extends Dne{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,r){return new vg(r,this.length,i,this.height,this.breaks)}replace(e,t,i){let r=i[0];return i.length==1&&(r instanceof Af||r instanceof AA&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof AA?r=new Af(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Uh.of(i)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class AA extends Uh{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,o=r-i+1,s,a=0;if(e.lineWrapping){let c=Math.min(this.height,e.lineHeight*o);s=c/o,this.length>o+1&&(a=(this.height-c)/(this.length-o-1))}else s=this.height/o;return{firstLine:i,lastLine:r,perLine:s,perChar:a}}blockAt(e,t,i,r){let{firstLine:o,lastLine:s,perLine:a,perChar:c}=this.heightMetrics(t,r);if(t.lineWrapping){let h=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),m=t.doc.lineAt(h),y=a+m.length*c,M=Math.max(i,e-y/2);return new vg(m.from,m.length,M,y,0)}else{let h=Math.max(0,Math.min(s-o,Math.floor((e-i)/a))),{from:m,length:y}=t.doc.line(o+h);return new vg(m,y,i+a*h,a,0)}}lineAt(e,t,i,r,o){if(t==ll.ByHeight)return this.blockAt(e,i,r,o);if(t==ll.ByPosNoHeight){let{from:x,to:k}=i.doc.lineAt(e);return new vg(x,k-x,0,0,0)}let{firstLine:s,perLine:a,perChar:c}=this.heightMetrics(i,o),h=i.doc.lineAt(e),m=a+h.length*c,y=h.number-s,M=r+a*y+c*(h.from-o-y);return new vg(h.from,h.length,Math.max(r,Math.min(M,r+this.height-m)),m,0)}forEachLine(e,t,i,r,o,s){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:a,perLine:c,perChar:h}=this.heightMetrics(i,o);for(let m=e,y=r;m<=t;){let M=i.doc.lineAt(m);if(m==e){let k=M.number-a;y+=c*k+h*(e-o-k)}let x=c+h*M.length;s(new vg(M.from,M.length,y,x,0)),y+=x,m=M.to+1}}replace(e,t,i){let r=this.length-t;if(r>0){let o=i[i.length-1];o instanceof AA?i[i.length-1]=new AA(o.length+r):i.push(null,new AA(r-1))}if(e>0){let o=i[0];o instanceof AA?i[0]=new AA(e+o.length):i.unshift(new AA(e-1),null)}return Uh.of(i)}decomposeLeft(e,t){t.push(new AA(e-1),null)}decomposeRight(e,t){t.push(null,new AA(this.length-e-1))}updateHeight(e,t=0,i=!1,r){let o=t+this.length;if(r&&r.from<=t+this.length&&r.more){let s=[],a=Math.max(t,r.from),c=-1;for(r.from>t&&s.push(new AA(r.from-t-1).updateHeight(e,t));a<=o&&r.more;){let m=e.doc.lineAt(a).length;s.length&&s.push(null);let y=r.heights[r.index++];c==-1?c=y:Math.abs(y-c)>=fw&&(c=-2);let M=new Af(m,y);M.outdated=!1,s.push(M),a+=m+1}a<=o&&s.push(null,new AA(o-a).updateHeight(e,a));let h=Uh.of(s);return(c<0||Math.abs(h.height-this.height)>=fw||Math.abs(c-this.heightMetrics(e,t).perLine)>=fw)&&(Cx=!0),bS(this,h)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class a2e extends Uh{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,r){let o=i+this.left.height;return e<o?this.left.blockAt(e,t,i,r):this.right.blockAt(e,t,o,r+this.left.length+this.break)}lineAt(e,t,i,r,o){let s=r+this.left.height,a=o+this.left.length+this.break,c=t==ll.ByHeight?e<s:e<a,h=c?this.left.lineAt(e,t,i,r,o):this.right.lineAt(e,t,i,s,a);if(this.break||(c?h.to<a:h.from>a))return h;let m=t==ll.ByPosNoHeight?ll.ByPosNoHeight:ll.ByPos;return c?h.join(this.right.lineAt(a,m,i,s,a)):this.left.lineAt(a,m,i,r,o).join(h)}forEachLine(e,t,i,r,o,s){let a=r+this.left.height,c=o+this.left.length+this.break;if(this.break)e<c&&this.left.forEachLine(e,t,i,r,o,s),t>=c&&this.right.forEachLine(e,t,i,a,c,s);else{let h=this.lineAt(c,ll.ByPos,i,r,o);e<h.from&&this.left.forEachLine(e,h.from-1,i,r,o,s),h.to>=e&&h.from<=t&&s(h),t>h.to&&this.right.forEachLine(h.to+1,t,i,a,c,s)}}replace(e,t,i){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,i));let o=[];e>0&&this.decomposeLeft(e,o);let s=o.length;for(let a of i)o.push(a);if(e>0&&LN(o,s-1),t<this.length){let a=o.length;this.decomposeRight(t,o),LN(o,a)}return Uh.of(o)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Uh.of(this.break?[e,null,t]:[e,t]):(this.left=bS(this.left,e),this.right=bS(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,r){let{left:o,right:s}=this,a=t+o.length+this.break,c=null;return r&&r.from<=t+o.length&&r.more?c=o=o.updateHeight(e,t,i,r):o.updateHeight(e,t,i),r&&r.from<=a+s.length&&r.more?c=s=s.updateHeight(e,a,i,r):s.updateHeight(e,a,i),c?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function LN(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof AA&&(i=n[e+1])instanceof AA&&n.splice(e-1,3,new AA(t.length+1+i.length))}const l2e=5;class qU{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Af?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Af(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,o=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let s=t-e;i.block?this.addBlock(new Dne(s,r,i)):(s||o||r>=l2e)&&this.addLineDeco(r,o,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Af(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new AA(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Af)return e;let t=new Af(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Af)&&!this.isCovered?this.nodes.push(new Af(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof Af&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,t,i,r){let o=new qU(i,e);return rs.spans(t,i,r,o,0),o.finish(i)}}function u2e(n,e,t){let i=new c2e;return rs.compare(n,e,t,i,0),i.changes}class c2e{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,r){(e<t||i&&i.heightRelevant||r&&r.heightRelevant)&&dw(e,t,this.changes,5)}}function A2e(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,r=i.defaultView||window,o=Math.max(0,t.left),s=Math.min(r.innerWidth,t.right),a=Math.max(0,t.top),c=Math.min(r.innerHeight,t.bottom);for(let h=n.parentNode;h&&h!=i.body;)if(h.nodeType==1){let m=h,y=window.getComputedStyle(m);if((m.scrollHeight>m.clientHeight||m.scrollWidth>m.clientWidth)&&y.overflow!="visible"){let M=m.getBoundingClientRect();o=Math.max(o,M.left),s=Math.min(s,M.right),a=Math.max(a,M.top),c=Math.min(h==n.parentNode?r.innerHeight:c,M.bottom)}h=y.position=="absolute"||y.position=="fixed"?m.offsetParent:m.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:o-t.left,right:Math.max(o,s)-t.left,top:a-(t.top+e),bottom:Math.max(a,c)-(t.top+e)}}function h2e(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function d2e(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class kB{constructor(e,t,i,r){this.from=e,this.to=t,this.size=i,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=t[i];if(r.from!=o.from||r.to!=o.to||r.size!=o.size)return!1}return!0}draw(e,t){return kr.replace({widget:new f2e(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class f2e extends Av{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class FN{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=zN,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=cl.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(GU).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new o2e(t),this.stateDeco=e.facet(p4).filter(i=>typeof i!="function"),this.heightMap=Uh.empty().applyChanges(this.stateDeco,_s.empty,this.heightOracle.setDoc(e.doc),[new hp(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=kr.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let r=i?t.head:t.anchor;if(!e.some(({from:o,to:s})=>r>=o&&r<=s)){let{from:o,to:s}=this.lineBlockAt(r);e.push(new gM(o,s))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?zN:new YU(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(V2(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(p4).filter(m=>typeof m!="function");let r=e.changedRanges,o=hp.extendWithRanges(r,u2e(i,this.stateDeco,e?e.changes:Ac.empty(this.state.doc.length))),s=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);KN(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=s||Cx)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=s);let c=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<c.from||t.range.head>c.to)||!this.viewportIsAppropriate(c))&&(c=this.getViewport(0,t));let h=c.from!=this.viewport.from||c.to!=this.viewport.to;this.viewport=c,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(fne)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),r=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?cl.RTL:cl.LTR;let s=this.heightOracle.mustRefreshForWrapping(o),a=t.getBoundingClientRect(),c=s||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let h=0,m=0;if(a.width&&a.height){let{scaleX:H,scaleY:G}=jte(t,a);(H>.005&&Math.abs(this.scaleX-H)>.005||G>.005&&Math.abs(this.scaleY-G)>.005)&&(this.scaleX=H,this.scaleY=G,h|=16,s=c=!0)}let y=(parseInt(i.paddingTop)||0)*this.scaleY,M=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=y||this.paddingBottom!=M)&&(this.paddingTop=y,this.paddingBottom=M,h|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(c=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=16);let x=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=x&&(this.scrollAnchorHeight=-1,this.scrollTop=x),this.scrolledToBottom=Wte(e.scrollDOM);let k=(this.printing?d2e:A2e)(t,this.paddingTop),P=k.top-this.pixelViewport.top,F=k.bottom-this.pixelViewport.bottom;this.pixelViewport=k;let j=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(j!=this.inView&&(this.inView=j,j&&(c=!0)),!this.inView&&!this.scrollTarget&&!h2e(e.dom))return 0;let q=a.width;if((this.contentDOMWidth!=q||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,h|=16),c){let H=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(H)&&(s=!0),s||r.lineWrapping&&Math.abs(q-this.contentDOMWidth)>r.charWidth){let{lineHeight:G,charWidth:Y,textHeight:z}=e.docView.measureTextSize();s=G>0&&r.refresh(o,G,Y,z,Math.max(5,q/Y),H),s&&(e.docView.minWidth=0,h|=16)}P>0&&F>0?m=Math.max(P,F):P<0&&F<0&&(m=Math.min(P,F)),KN();for(let G of this.viewports){let Y=G.from==this.viewport.from?H:e.docView.measureVisibleLineHeights(G);this.heightMap=(s?Uh.empty().applyChanges(this.stateDeco,_s.empty,this.heightOracle,[new hp(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,s,new s2e(G.from,Y))}Cx&&(h|=2)}let V=!this.viewportIsAppropriate(this.viewport,m)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return V&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(m,this.scrollTarget),h|=this.updateForViewport()),(h&2||V)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,o=this.heightOracle,{visibleTop:s,visibleBottom:a}=this,c=new gM(r.lineAt(s-i*1e3,ll.ByHeight,o,0,0).from,r.lineAt(a+(1-i)*1e3,ll.ByHeight,o,0,0).to);if(t){let{head:h}=t.range;if(h<c.from||h>c.to){let m=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),y=r.lineAt(h,ll.ByPos,o,0,0),M;t.y=="center"?M=(y.top+y.bottom)/2-m/2:t.y=="start"||t.y=="nearest"&&h<c.from?M=y.top:M=y.bottom-m,c=new gM(r.lineAt(M-1e3/2,ll.ByHeight,o,0,0).from,r.lineAt(M+m+1e3/2,ll.ByHeight,o,0,0).to)}}return c}mapViewport(e,t){let i=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new gM(this.heightMap.lineAt(i,ll.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,ll.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,ll.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,ll.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:a}=this;return(e==0||r<=s-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||o>=a+Math.max(10,Math.min(i,250)))&&r>s-2*1e3&&o<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let r of e)t.touchesRange(r.from,r.to)||i.push(new kB(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,o=r>>1,s=r<<1;if(this.defaultTextDirection!=cl.LTR&&!i)return[];let a=[],c=(m,y,M,x)=>{if(y-m<o)return;let k=this.state.selection.main,P=[k.from];k.empty||P.push(k.to);for(let j of P)if(j>m&&j<y){c(m,j-10,M,x),c(j+10,y,M,x);return}let F=m2e(e,j=>j.from>=M.from&&j.to<=M.to&&Math.abs(j.from-m)<o&&Math.abs(j.to-y)<o&&!P.some(q=>j.from<q&&j.to>q));if(!F){if(y<M.to&&t&&i&&t.visibleRanges.some(V=>V.from<=y&&V.to>=y)){let V=t.moveToLineBoundary(Sn.cursor(y),!1,!0).head;V>m&&(y=V)}let j=this.gapSize(M,m,y,x),q=i||j<2e6?j:2e6;F=new kB(m,y,j,q)}a.push(F)},h=m=>{if(m.length<s||m.type!=Ph.Text)return;let y=p2e(m.from,m.to,this.stateDeco);if(y.total<s)return;let M=this.scrollTarget?this.scrollTarget.range.head:null,x,k;if(i){let P=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,F,j;if(M!=null){let q=vM(y,M),V=((this.visibleBottom-this.visibleTop)/2+P)/m.height;F=q-V,j=q+V}else F=(this.visibleTop-m.top-P)/m.height,j=(this.visibleBottom-m.top+P)/m.height;x=yM(y,F),k=yM(y,j)}else{let P=y.total*this.heightOracle.charWidth,F=r*this.heightOracle.charWidth,j=0;if(P>2e6)for(let Y of e)Y.from>=m.from&&Y.from<m.to&&Y.size!=Y.displaySize&&Y.from*this.heightOracle.charWidth+j<this.pixelViewport.left&&(j=Y.size-Y.displaySize);let q=this.pixelViewport.left+j,V=this.pixelViewport.right+j,H,G;if(M!=null){let Y=vM(y,M),z=((V-q)/2+F)/P;H=Y-z,G=Y+z}else H=(q-F)/P,G=(V+F)/P;x=yM(y,H),k=yM(y,G)}x>m.from&&c(m.from,x,m,y),k<m.to&&c(k,m.to,m,y)};for(let m of this.viewportLines)Array.isArray(m.type)?m.type.forEach(h):h(m);return a}gapSize(e,t,i,r){let o=vM(r,i)-vM(r,t);return this.heightOracle.lineWrapping?e.height*o:r.total*this.heightOracle.charWidth*o}updateLineGaps(e){kB.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=kr.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];rs.spans(t,this.viewport.from,this.viewport.to,{span(o,s){i.push({from:o,to:s})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let o=0;o<i.length&&!(r&8);o++){let s=this.visibleRanges[o],a=i[o];(s.from!=a.from||s.to!=a.to)&&(r|=4,e&&e.mapPos(s.from,-1)==a.from&&e.mapPos(s.to,1)==a.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||V2(this.heightMap.lineAt(e,ll.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||V2(this.heightMap.lineAt(this.scaler.fromDOM(e),ll.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return V2(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class gM{constructor(e,t){this.from=e,this.to=t}}function p2e(n,e,t){let i=[],r=n,o=0;return rs.spans(t,n,e,{span(){},point(s,a){s>r&&(i.push({from:r,to:s}),o+=s-r),r=a}},20),r<e&&(i.push({from:r,to:e}),o+=e-r),{total:o,ranges:i}}function yM({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let r=0;;r++){let{from:o,to:s}=e[r],a=s-o;if(i<=a)return o+i;i-=a}}function vM(n,e){let t=0;for(let{from:i,to:r}of n.ranges){if(e<=r){t+=e-i;break}t+=r-i}return t/n.total}function m2e(n,e){for(let t of n)if(e(t))return t}const zN={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class YU{constructor(e,t,i){let r=0,o=0,s=0;this.viewports=i.map(({from:a,to:c})=>{let h=t.lineAt(a,ll.ByPos,e,0,0).top,m=t.lineAt(c,ll.ByPos,e,0,0).bottom;return r+=m-h,{from:a,to:c,top:h,bottom:m,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let a of this.viewports)a.domTop=s+(a.top-o)*this.scale,s=a.domBottom=a.domTop+(a.bottom-a.top),o=a.bottom}toDOM(e){for(let t=0,i=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return r+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,r=o.domBottom}}fromDOM(e){for(let t=0,i=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return i+(e-r)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,r=o.domBottom}}eq(e){return e instanceof YU?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function V2(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new vg(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(r=>V2(r,e)):n._content)}const bM=Bi.define({combine:n=>n.join(" ")}),GR=Bi.define({combine:n=>n.indexOf(!0)>-1}),WR=iv.newName(),Pne=iv.newName(),Une=iv.newName(),Kne={"&light":"."+Pne,"&dark":"."+Une};function QR(n,e,t){return new iv(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return n;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):n+" "+i}})}const g2e=QR("."+WR,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Kne),y2e={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},TB=Si.ie&&Si.ie_version<=11;class v2e{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new exe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(Si.ie&&Si.ie_version<=11||Si.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Si.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Si.chrome&&Si.chrome_version<126)&&(this.editContext=new C2e(e),e.state.facet(t1)&&(e.contentDOM.editContext=this.editContext.editContext)),TB&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(t1)?i.root.activeElement!=this.dom:!hw(this.dom,r))return;let o=r.anchorNode&&i.docView.nearest(r.anchorNode);if(o&&o.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Si.ie&&Si.ie_version<=11||Si.android&&Si.chrome)&&!i.state.selection.main.empty&&r.focusNode&&g3(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=d4(e.root);if(!t)return!1;let i=Si.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&b2e(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let r=hw(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&nxe(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,y2e),TB&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),TB&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let r=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&q_(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,r=!1;for(let o of e){let s=this.readMutation(o);s&&(s.typeOver&&(r=!0),t==-1?{from:t,to:i}=s:(t=Math.min(s.from,t),i=Math.max(s.to,i)))}return{from:t,to:i,typeOver:r}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),r=this.selectionChanged&&hw(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new Kxe(this.view,e,t,i);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,r=wne(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=jN(t,e.previousSibling||e.target.previousSibling,-1),r=jN(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(t1)!=e.state.facet(t1)&&(e.view.contentDOM.editContext=e.state.facet(t1)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function jN(n,e,t){for(;e;){let i=Ta.get(e);if(i&&i.parent==n)return i;let r=e.parentNode;e=r!=n.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function NN(n,e){let t=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,s=n.docView.domAtPos(n.state.selection.main.anchor);return g3(s.node,s.offset,r,o)&&([t,i,r,o]=[r,o,t,i]),{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:o}}function b2e(n,e){if(e.getComposedRanges){let r=e.getComposedRanges(n.root)[0];if(r)return NN(n,r)}let t=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),t?NN(n,t):null}class C2e{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:o,head:s}=r,a=this.toEditorPos(i.updateRangeStart),c=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let h={from:a,to:c,insert:_s.of(i.text.split(`
`))};if(h.from==this.from&&o<this.from?h.from=o:h.to==this.to&&o>this.to&&(h.to=o),h.from==h.to&&!h.insert.length){let m=Sn.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));m.main.eq(r)||e.dispatch({selection:m,userEvent:"select"});return}if((Si.mac||Si.android)&&h.from==s-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(h={from:a,to:c,insert:_s.of([i.text.replace("."," ")])}),this.pendingContextChange=h,!e.state.readOnly){let m=this.to-this.from+(h.to-h.from+h.insert.length);QU(e,h,Sn.single(this.toEditorPos(i.selectionStart,m),this.toEditorPos(i.selectionEnd,m)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),h.from<h.to&&!h.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(t.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let r=[],o=null;for(let s=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);s<a;s++){let c=e.coordsForChar(s);o=c&&new DOMRect(c.left,c.top,c.right-c.left,c.bottom-c.top)||o||new DOMRect,r.push(o)}t.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let o of i.getTextFormats()){let s=o.underlineStyle,a=o.underlineThickness;if(!/none/i.test(s)&&!/none/i.test(a)){let c=this.toEditorPos(o.rangeStart),h=this.toEditorPos(o.rangeEnd);if(c<h){let m=`text-decoration: underline ${/^[a-z]/.test(s)?s+" ":s=="Dashed"?"dashed ":s=="Squiggle"?"wavy ":""}${/thin/i.test(a)?1:2}px`;r.push(kr.mark({attributes:{style:m}}).range(c,h))}}}e.dispatch({effects:mne.of(kr.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=d4(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((o,s,a,c,h)=>{if(i)return;let m=h.length-(s-o);if(r&&s>=r.to)if(r.from==o&&r.to==s&&r.insert.eq(h)){r=this.pendingContextChange=null,t+=m,this.to+=m;return}else r=null,this.revertPending(e.state);if(o+=t,s+=t,s<=this.from)this.from+=m,this.to+=m;else if(o<this.to){if(o<this.from||s>this.to||this.to-this.from+h.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(s),h.toString()),this.to+=m}t+=m}),r&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Ei{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(o=>i(o,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||txe(e.parent)||document,this.viewState=new FN(e.state||Cs.create(e)),e.scrollTo&&e.scrollTo.is(fM)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(O_).map(r=>new OB(r));for(let r of this.plugins)r.update(this);this.observer=new v2e(this),this.inputState=new Nxe(this),this.inputState.ensureHandlers(this.plugins),this.docView=new bN(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof fc?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,r,o=this.state;for(let M of e){if(M.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=M.state}if(this.destroyed){this.viewState.state=o;return}let s=this.hasFocus,a=0,c=null;e.some(M=>M.annotation(kne))?(this.inputState.notifiedFocused=s,a=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,c=Tne(o,s),c||(a=1));let h=this.observer.delayedAndroidKey,m=null;if(h?(this.observer.clearDelayedAndroidKey(),m=this.observer.readChange(),(m&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(m=null)):this.observer.clear(),o.facet(Cs.phrases)!=this.state.facet(Cs.phrases))return this.setState(o);r=vS.create(this,o,e),r.flags|=a;let y=this.viewState.scrollTarget;try{this.updateState=2;for(let M of e){if(y&&(y=y.map(M.changes)),M.scrollIntoView){let{main:x}=M.state.selection;y=new Y_(x.empty?x:Sn.cursor(x.head,x.head>x.anchor?-1:1))}for(let x of M.effects)x.is(fM)&&(y=x.value.clip(this.state))}this.viewState.update(r,y),this.bidiCache=CS.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(Y2)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(M=>M.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(bM)!=r.state.facet(bM)&&(this.viewState.mustMeasureContent=!0),(t||i||y||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!r.empty)for(let M of this.state.facet(FR))try{M(r)}catch(x){Dh(this.state,x,"update listener")}(c||m)&&Promise.resolve().then(()=>{c&&this.state==c.startState&&this.dispatch(c),m&&!wne(this,m)&&h.force&&q_(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new FN(e),this.plugins=e.facet(O_).map(i=>new OB(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new bN(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(O_),i=e.state.facet(O_);if(t!=i){let r=[];for(let o of i){let s=t.indexOf(o);if(s<0)r.push(new OB(o));else{let a=this.plugins[s];a.mustUpdate=e,r.push(a)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){Dh(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:s}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(s=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(s<0)if(Wte(i))o=-1,s=this.viewState.heightMap.height;else{let x=this.viewState.scrollAnchorAt(r);o=x.from,s=x.top}this.updateState=1;let c=this.viewState.measure(this);if(!c&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];c&4||([this.measureRequests,h]=[h,this.measureRequests]);let m=h.map(x=>{try{return x.read(this)}catch(k){return Dh(this.state,k),GN}}),y=vS.create(this,this.state,[]),M=!1;y.flags|=c,t?t.flags|=c:t=y,this.updateState=2,y.empty||(this.updatePlugins(y),this.inputState.update(y),this.updateAttrs(),M=this.docView.update(y),M&&this.docViewUpdate());for(let x=0;x<h.length;x++)if(m[x]!=GN)try{let k=h[x];k.write&&k.write(m[x],this)}catch(k){Dh(this.state,k)}if(M&&this.docView.updateSelection(!0),!y.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,s=-1;continue}else{let k=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-s;if(k>1||k<-1){r=r+k,i.scrollTop=r/this.scaleY,s=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(FR))a(t)}get themeClasses(){return WR+" "+(this.state.facet(GR)?Une:Pne)+" "+this.state.facet(bM)}updateAttrs(){let e=WN(this,gne,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(t1)?"true":"false",class:"cm-content",style:`${Si.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),WN(this,GU,t);let i=this.observer.ignore(()=>{let r=DR(this.contentDOM,this.contentAttrs,t),o=DR(this.dom,this.editorAttrs,e);return r||o});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let r of i.effects)if(r.is(Ei.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(Y2);let e=this.state.facet(Ei.cspNonce);iv.mount(this.root,this.styleModules.concat(g2e).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return IB(this,e,wN(this,e,t,i))}moveByGroup(e,t){return IB(this,e,wN(this,e,t,i=>Rxe(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),o=i[t?i.length-1:0];return Sn.cursor(o.side(t,r)+e.from,o.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,i=!0){return Txe(this,e,t,i)}moveVertically(e,t,i){return IB(this,e,Dxe(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),_ne(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),o=this.bidiSpans(r),s=o[Wy.find(o,e-r.from,-1,t)];return a6(i,s.dir==cl.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(dne)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>_2e)return one(e.length);let t=this.textDirectionAt(e.from),i;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t&&(o.fresh||rne(o.isolates,i=vN(this,e))))return o.order;i||(i=vN(this,e));let r=mxe(e.text,t,i);return this.bidiCache.push(new CS(e.from,e.to,t,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Si.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Nte(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return fM.of(new Y_(typeof e=="number"?Sn.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return fM.of(new Y_(Sn.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return bu.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return bu.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=iv.newName(),r=[bM.of(i),Y2.of(QR(`.${i}`,e))];return t&&t.dark&&r.push(GR.of(!0)),r}static baseTheme(e){return eC.lowest(Y2.of(QR("."+WR,e,Kne)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),r=i&&Ta.get(i)||Ta.get(e);return((t=r?.rootView)===null||t===void 0?void 0:t.view)||null}}Ei.styleModule=Y2;Ei.inputHandler=Ane;Ei.clipboardInputFilter=jU;Ei.clipboardOutputFilter=NU;Ei.scrollHandler=pne;Ei.focusChangeEffect=hne;Ei.perLineTextDirection=dne;Ei.exceptionSink=cne;Ei.updateListener=FR;Ei.editable=t1;Ei.mouseSelectionStyle=une;Ei.dragMovesSelection=lne;Ei.clickAddsSelectionRange=ane;Ei.decorations=p4;Ei.outerDecorations=yne;Ei.atomicRanges=y5;Ei.bidiIsolatedRanges=vne;Ei.scrollMargins=bne;Ei.darkTheme=GR;Ei.cspNonce=Bi.define({combine:n=>n.length?n[0]:""});Ei.contentAttributes=GU;Ei.editorAttributes=gne;Ei.lineWrapping=Ei.contentAttributes.of({class:"cm-lineWrapping"});Ei.announce=ho.define();const _2e=4096,GN={};class CS{constructor(e,t,i,r,o,s){this.from=e,this.to=t,this.dir=i,this.isolates=r,this.fresh=o,this.order=s}static update(e,t){if(t.empty&&!e.some(o=>o.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:cl.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let s=e[o];s.dir==r&&!t.touchesRange(s.from,s.to)&&i.push(new CS(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return i}}function WN(n,e,t){for(let i=n.state.facet(e),r=i.length-1;r>=0;r--){let o=i[r],s=typeof o=="function"?o(n):o;s&&RR(s,t)}return t}const x2e=Si.mac?"mac":Si.windows?"win":Si.linux?"linux":"key";function M2e(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let r,o,s,a;for(let c=0;c<t.length-1;++c){const h=t[c];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))r=!0;else if(/^(c|ctrl|control)$/i.test(h))o=!0;else if(/^s(hift)?$/i.test(h))s=!0;else if(/^mod$/i.test(h))e=="mac"?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+h)}return r&&(i="Alt-"+i),o&&(i="Ctrl-"+i),a&&(i="Meta-"+i),s&&(i="Shift-"+i),i}function CM(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const w2e=eC.default(Ei.domEventHandlers({keydown(n,e){return Fne(Lne(e.state),n,e,"editor")}})),$U=Bi.define({enables:w2e}),QN=new WeakMap;function Lne(n){let e=n.facet($U),t=QN.get(e);return t||QN.set(e,t=O2e(e.reduce((i,r)=>i.concat(r),[]))),t}function S2e(n,e,t){return Fne(Lne(n.state),e,n,t)}let Ty=null;const E2e=4e3;function O2e(n,e=x2e){let t=Object.create(null),i=Object.create(null),r=(s,a)=>{let c=i[s];if(c==null)i[s]=a;else if(c!=a)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,a,c,h,m)=>{var y,M;let x=t[s]||(t[s]=Object.create(null)),k=a.split(/ (?!$)/).map(j=>M2e(j,e));for(let j=1;j<k.length;j++){let q=k.slice(0,j).join(" ");r(q,!0),x[q]||(x[q]={preventDefault:!0,stopPropagation:!1,run:[V=>{let H=Ty={view:V,prefix:q,scope:s};return setTimeout(()=>{Ty==H&&(Ty=null)},E2e),!0}]})}let P=k.join(" ");r(P,!1);let F=x[P]||(x[P]={preventDefault:!1,stopPropagation:!1,run:((M=(y=x._any)===null||y===void 0?void 0:y.run)===null||M===void 0?void 0:M.slice())||[]});c&&F.run.push(c),h&&(F.preventDefault=!0),m&&(F.stopPropagation=!0)};for(let s of n){let a=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let h of a){let m=t[h]||(t[h]=Object.create(null));m._any||(m._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:y}=s;for(let M in m)m[M].run.push(x=>y(x,qR))}let c=s[e]||s.key;if(c)for(let h of a)o(h,c,s.run,s.preventDefault,s.stopPropagation),s.shift&&o(h,"Shift-"+c,s.shift,s.preventDefault,s.stopPropagation)}return t}let qR=null;function Fne(n,e,t,i){qR=e;let r=H_e(e),o=pd(r,0),s=yg(o)==r.length&&r!=" ",a="",c=!1,h=!1,m=!1;Ty&&Ty.view==t&&Ty.scope==i&&(a=Ty.prefix+" ",Ene.indexOf(e.keyCode)<0&&(h=!0,Ty=null));let y=new Set,M=F=>{if(F){for(let j of F.run)if(!y.has(j)&&(y.add(j),j(t)))return F.stopPropagation&&(m=!0),!0;F.preventDefault&&(F.stopPropagation&&(m=!0),h=!0)}return!1},x=n[i],k,P;return x&&(M(x[a+CM(r,e,!s)])?c=!0:s&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Si.windows&&e.ctrlKey&&e.altKey)&&!(Si.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(k=rv[e.keyCode])&&k!=r?(M(x[a+CM(k,e,!0)])||e.shiftKey&&(P=h4[e.keyCode])!=r&&P!=k&&M(x[a+CM(P,e,!1)]))&&(c=!0):s&&e.shiftKey&&M(x[a+CM(r,e,!0)])&&(c=!0),!c&&M(x._any)&&(c=!0)),h&&(c=!0),c&&m&&e.stopPropagation(),qR=null,c}class v5{constructor(e,t,i,r,o){this.className=e,this.left=t,this.top=i,this.width=r,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let o=zne(e);return[new v5(t,r.left-o.left,r.top-o.top,null,r.bottom-r.top)]}else return B2e(e,t,i)}}function zne(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==cl.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function qN(n,e,t,i){let r=n.coordsAtPos(e,t*2);if(!r)return i;let o=n.dom.getBoundingClientRect(),s=(r.top+r.bottom)/2,a=n.posAtCoords({x:o.left+1,y:s}),c=n.posAtCoords({x:o.right-1,y:s});return a==null||c==null?i:{from:Math.max(i.from,Math.min(a,c)),to:Math.min(i.to,Math.max(a,c))}}function B2e(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),r=Math.min(t.to,n.viewport.to),o=n.textDirection==cl.LTR,s=n.contentDOM,a=s.getBoundingClientRect(),c=zne(n),h=s.querySelector(".cm-line"),m=h&&window.getComputedStyle(h),y=a.left+(m?parseInt(m.paddingLeft)+Math.min(0,parseInt(m.textIndent)):0),M=a.right-(m?parseInt(m.paddingRight):0),x=jR(n,i,1),k=jR(n,r,-1),P=x.type==Ph.Text?x:null,F=k.type==Ph.Text?k:null;if(P&&(n.lineWrapping||x.widgetLineBreaks)&&(P=qN(n,i,1,P)),F&&(n.lineWrapping||k.widgetLineBreaks)&&(F=qN(n,r,-1,F)),P&&F&&P.from==F.from&&P.to==F.to)return q(V(t.from,t.to,P));{let G=P?V(t.from,null,P):H(x,!1),Y=F?V(null,t.to,F):H(k,!0),z=[];return(P||x).to<(F||k).from-(P&&F?1:0)||x.widgetLineBreaks>1&&G.bottom+n.defaultLineHeight/2<Y.top?z.push(j(y,G.bottom,M,Y.top)):G.bottom<Y.top&&n.elementAtHeight((G.bottom+Y.top)/2).type==Ph.Text&&(G.bottom=Y.top=(G.bottom+Y.top)/2),q(G).concat(z).concat(q(Y))}function j(G,Y,z,se){return new v5(e,G-c.left,Y-c.top,z-G,se-Y)}function q({top:G,bottom:Y,horizontal:z}){let se=[];for(let le=0;le<z.length;le+=2)se.push(j(z[le],G,z[le+1],Y));return se}function V(G,Y,z){let se=1e9,le=-1e9,me=[];function de(De,je,Ie,Qe,et){let dt=n.coordsAtPos(De,De==z.to?-2:2),ke=n.coordsAtPos(Ie,Ie==z.from?2:-2);!dt||!ke||(se=Math.min(dt.top,ke.top,se),le=Math.max(dt.bottom,ke.bottom,le),et==cl.LTR?me.push(o&&je?y:dt.left,o&&Qe?M:ke.right):me.push(!o&&Qe?y:ke.left,!o&&je?M:dt.right))}let be=G??z.from,Ee=Y??z.to;for(let De of n.visibleRanges)if(De.to>be&&De.from<Ee)for(let je=Math.max(De.from,be),Ie=Math.min(De.to,Ee);;){let Qe=n.state.doc.lineAt(je);for(let et of n.bidiSpans(Qe)){let dt=et.from+Qe.from,ke=et.to+Qe.from;if(dt>=Ie)break;ke>je&&de(Math.max(dt,je),G==null&&dt<=be,Math.min(ke,Ie),Y==null&&ke>=Ee,et.dir)}if(je=Qe.to+1,je>=Ie)break}return me.length==0&&de(be,G==null,Ee,Y==null,n.textDirection),{top:se,bottom:le,horizontal:me}}function H(G,Y){let z=a.top+(Y?G.top:G.bottom);return{top:z,bottom:z,horizontal:[]}}}function I2e(n,e){return n.constructor==e.constructor&&n.eq(e)}class k2e{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(pw)!=e.state.facet(pw)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(pw);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!I2e(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[i].constructor&&r.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(r.draw(),t);for(;t;){let r=t.nextSibling;t.remove(),t=r}this.drawn=e,Si.ios&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const pw=Bi.define();function jne(n){return[bu.define(e=>new k2e(e,n)),pw.of(n)]}const m4=Bi.define({combine(n){return fm(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function T2e(n={}){return[m4.of(n),R2e,D2e,P2e,fne.of(!0)]}function Nne(n){return n.startState.facet(m4)!=n.state.facet(m4)}const R2e=jne({above:!0,markers(n){let{state:e}=n,t=e.facet(m4),i=[];for(let r of e.selection.ranges){let o=r==e.selection.main;if(r.empty||t.drawRangeCursor){let s=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:Sn.cursor(r.head,r.head>r.anchor?-1:1);for(let c of v5.forRange(n,s,a))i.push(c)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Nne(n);return t&&YN(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){YN(e.state,n)},class:"cm-cursorLayer"});function YN(n,e){e.style.animationDuration=n.facet(m4).cursorBlinkRate+"ms"}const D2e=jne({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:v5.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||Nne(n)},class:"cm-selectionLayer"}),P2e=eC.highest(Ei.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),Gne=ho.define({map(n,e){return n==null?null:e.mapPos(n)}}),H2=pc.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(Gne)?i.value:t,n)}}),U2e=bu.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(H2);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(H2)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(H2),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(H2)!=n&&this.view.dispatch({effects:Gne.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function K2e(){return[H2,U2e]}function $N(n,e,t,i,r){e.lastIndex=0;for(let o=n.iterRange(t,i),s=t,a;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;a=e.exec(o.value);)r(s+a.index,a)}function L2e(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:r,to:o}of t)r=Math.max(n.state.doc.lineAt(r).from,r-e),o=Math.min(n.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=o:i.push({from:r,to:o});return i}class F2e{constructor(e){const{regexp:t,decoration:i,decorate:r,boundary:o,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(a,c,h,m)=>r(m,h,h+a[0].length,a,c);else if(typeof i=="function")this.addMatch=(a,c,h,m)=>{let y=i(a,c,h);y&&m(h,h+a[0].length,y)};else if(i)this.addMatch=(a,c,h,m)=>m(h,h+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(e){let t=new f1,i=t.add.bind(t);for(let{from:r,to:o}of L2e(e,this.maxLength))$N(e.state.doc,this.regexp,r,o,(s,a)=>this.addMatch(a,e,s,i));return t.finish()}updateDeco(e,t){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((o,s,a,c)=>{c>=e.view.viewport.from&&a<=e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(c,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),i,r):t}updateRange(e,t,i,r){for(let o of e.visibleRanges){let s=Math.max(o.from,i),a=Math.min(o.to,r);if(a>=s){let c=e.state.doc.lineAt(s),h=c.to<a?e.state.doc.lineAt(a):c,m=Math.max(o.from,c.from),y=Math.min(o.to,h.to);if(this.boundary){for(;s>c.from;s--)if(this.boundary.test(c.text[s-1-c.from])){m=s;break}for(;a<h.to;a++)if(this.boundary.test(h.text[a-h.from])){y=a;break}}let M=[],x,k=(P,F,j)=>M.push(j.range(P,F));if(c==h)for(this.regexp.lastIndex=m-c.from;(x=this.regexp.exec(c.text))&&x.index<y-c.from;)this.addMatch(x,e,x.index+c.from,k);else $N(e.state.doc,this.regexp,m,y,(P,F)=>this.addMatch(F,e,P,k));t=t.update({filterFrom:m,filterTo:y,filter:(P,F)=>P<m||F>y,add:M})}}return t}}const YR=/x/.unicode!=null?"gu":"g",z2e=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,YR),j2e={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let RB=null;function N2e(){var n;if(RB==null&&typeof document<"u"&&document.body){let e=document.body.style;RB=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return RB||!1}const mw=Bi.define({combine(n){let e=fm(n,{render:null,specialChars:z2e,addSpecialChars:null});return(e.replaceTabs=!N2e())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,YR)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,YR)),e}});function G2e(n={}){return[mw.of(n),W2e()]}let VN=null;function W2e(){return VN||(VN=bu.fromClass(class{constructor(n){this.view=n,this.decorations=kr.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(mw)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new F2e({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:r}=t.state,o=pd(e[0],0);if(o==9){let s=r.lineAt(i),a=t.state.tabSize,c=jx(s.text,a,i-s.from);return kr.replace({widget:new $2e((a-c%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=kr.replace({widget:new Y2e(n,o)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(mw);n.startState.facet(mw)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const Q2e="";function q2e(n){return n>=32?Q2e:n==10?"":String.fromCharCode(9216+n)}class Y2e extends Av{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=q2e(this.code),i=e.state.phrase("Control character")+" "+(j2e[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,t);if(r)return r;let o=document.createElement("span");return o.textContent=t,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class $2e extends Av{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function V2e(){return Z2e}const H2e=kr.line({class:"cm-activeLine"}),Z2e=bu.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let r=n.lineBlockAt(i.head);r.from>e&&(t.push(H2e.range(r.from)),e=r.from)}return kr.set(t)}},{decorations:n=>n.decorations}),$R=2e3;function X2e(n,e,t){let i=Math.min(e.line,t.line),r=Math.max(e.line,t.line),o=[];if(e.off>$R||t.off>$R||e.col<0||t.col<0){let s=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let c=i;c<=r;c++){let h=n.doc.line(c);h.length<=a&&o.push(Sn.range(h.from+s,h.to+a))}}else{let s=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let c=i;c<=r;c++){let h=n.doc.line(c),m=SR(h.text,s,n.tabSize,!0);if(m<0)o.push(Sn.cursor(h.to));else{let y=SR(h.text,a,n.tabSize);o.push(Sn.range(h.from+m,h.from+y))}}}return o}function J2e(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function HN(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),r=t-i.from,o=r>$R?-1:r==i.length?J2e(n,e.clientX):jx(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:o,off:r}}function e3e(n,e){let t=HN(n,e),i=n.state.selection;return t?{update(r){if(r.docChanged){let o=r.changes.mapPos(r.startState.doc.line(t.line).from),s=r.state.doc.lineAt(o);t={line:s.number,col:t.col,off:Math.min(t.off,s.length)},i=i.map(r.changes)}},get(r,o,s){let a=HN(n,r);if(!a)return i;let c=X2e(n.state,t,a);return c.length?s?Sn.create(c.concat(i.ranges)):Sn.create(c):i}}:null}function t3e(n){let e=(t=>t.altKey&&t.button==0);return Ei.mouseSelectionStyle.of((t,i)=>e(i)?e3e(t,i):null)}const n3e={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},i3e={style:"cursor: crosshair"};function r3e(n={}){let[e,t]=n3e[n.key||"Alt"],i=bu.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)},mousemove(r){this.set(t(r))}}});return[i,Ei.contentAttributes.of(r=>{var o;return!((o=r.plugin(i))===null||o===void 0)&&o.isDown?i3e:null})]}const b2="-10000px";class Wne{constructor(e,t,i,r){this.facet=t,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(s=>s);let o=null;this.tooltipViews=this.tooltips.map(s=>o=i(s,o))}update(e,t){var i;let r=e.state.facet(this.facet),o=r.filter(c=>c);if(r===this.input){for(let c of this.tooltipViews)c.update&&c.update(e);return!1}let s=[],a=t?[]:null;for(let c=0;c<o.length;c++){let h=o[c],m=-1;if(h){for(let y=0;y<this.tooltips.length;y++){let M=this.tooltips[y];M&&M.create==h.create&&(m=y)}if(m<0)s[c]=this.createTooltipView(h,c?s[c-1]:null),a&&(a[c]=!!h.above);else{let y=s[c]=this.tooltipViews[m];a&&(a[c]=t[m]),y.update&&y.update(e)}}}for(let c of this.tooltipViews)s.indexOf(c)<0&&(this.removeTooltipView(c),(i=c.destroy)===null||i===void 0||i.call(c));return t&&(a.forEach((c,h)=>t[h]=c),t.length=a.length),this.input=r,this.tooltips=o,this.tooltipViews=s,!0}}function o3e(n){let e=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const DB=Bi.define({combine:n=>{var e,t,i;return{position:Si.ios?"absolute":((e=n.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||o3e}}}),ZN=new WeakMap,VU=bu.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(DB);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Wne(n,c6,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(DB);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",t.dom.appendChild(r)}return t.dom.style.position=this.position,t.dom.style.top=b2,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(Si.gecko)t=o.offsetParent!=this.container.ownerDocument.body;else if(o.style.top==b2&&o.style.left=="0px"){let s=o.getBoundingClientRect();t=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}}if(t||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(n=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=WU(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,s)=>{let a=this.manager.tooltipViews[s];return a.getCoords?a.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(DB).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:t,space:i,scaleX:r,scaleY:o}=n,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let c=this.manager.tooltips[a],h=this.manager.tooltipViews[a],{dom:m}=h,y=n.pos[a],M=n.size[a];if(!y||c.clip!==!1&&(y.bottom<=Math.max(t.top,i.top)||y.top>=Math.min(t.bottom,i.bottom)||y.right<Math.max(t.left,i.left)-.1||y.left>Math.min(t.right,i.right)+.1)){m.style.top=b2;continue}let x=c.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,k=x?7:0,P=M.right-M.left,F=(e=ZN.get(h))!==null&&e!==void 0?e:M.bottom-M.top,j=h.offset||a3e,q=this.view.textDirection==cl.LTR,V=M.width>i.right-i.left?q?i.left:i.right-M.width:q?Math.max(i.left,Math.min(y.left-(x?14:0)+j.x,i.right-P)):Math.min(Math.max(i.left,y.left-P+(x?14:0)-j.x),i.right-P),H=this.above[a];!c.strictSide&&(H?y.top-F-k-j.y<i.top:y.bottom+F+k+j.y>i.bottom)&&H==i.bottom-y.bottom>y.top-i.top&&(H=this.above[a]=!H);let G=(H?y.top-i.top:i.bottom-y.bottom)-k;if(G<F&&h.resize!==!1){if(G<this.view.defaultLineHeight){m.style.top=b2;continue}ZN.set(h,F),m.style.height=(F=G)/o+"px"}else m.style.height&&(m.style.height="");let Y=H?y.top-F-k-j.y:y.bottom+k+j.y,z=V+P;if(h.overlap!==!0)for(let se of s)se.left<z&&se.right>V&&se.top<Y+F&&se.bottom>Y&&(Y=H?se.top-F-2-k:se.bottom+k+2);if(this.position=="absolute"?(m.style.top=(Y-n.parent.top)/o+"px",XN(m,(V-n.parent.left)/r)):(m.style.top=Y/o+"px",XN(m,V/r)),x){let se=y.left+(q?j.x:-j.x)-(V+14-7);x.style.left=se/r+"px"}h.overlap!==!0&&s.push({left:V,top:Y,right:z,bottom:Y+F}),m.classList.toggle("cm-tooltip-above",H),m.classList.toggle("cm-tooltip-below",!H),h.positioned&&h.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=b2}},{eventObservers:{scroll(){this.maybeMeasure()}}});function XN(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}const s3e=Ei.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),a3e={x:0,y:0},c6=Bi.define({enables:[VU,s3e]}),_S=Bi.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class A6{static create(e){return new A6(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Wne(e,_S,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(t===void 0)t=r;else if(t!==r)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const l3e=c6.compute([_S],n=>{let e=n.facet(_S);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:A6.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class u3e{constructor(e,t,i,r,o){this.view=e,this.source=t,this.field=i,this.setHover=r,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let r,o=1;if(i instanceof Gy)r=i.posAtStart;else{if(r=e.posAtCoords(t),r==null)return;let a=e.coordsAtPos(r);if(!a||t.y<a.top||t.y>a.bottom||t.x<a.left-e.defaultCharacterWidth||t.x>a.right+e.defaultCharacterWidth)return;let c=e.bidiSpans(e.state.doc.lineAt(r)).find(m=>m.from<=r&&m.to>=r),h=c&&c.dir==cl.RTL?-1:1;o=t.x<a.left?-h:h}let s=this.source(e,r,o);if(s?.then){let a=this.pending={pos:r};s.then(c=>{this.pending==a&&(this.pending=null,c&&!(Array.isArray(c)&&!c.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(c)?c:[c])}))},c=>Dh(e.state,c,"hover tooltip"))}else s&&!(Array.isArray(s)&&!s.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(s)?s:[s])})}get tooltip(){let e=this.view.plugin(VU),t=e?e.manager.tooltips.findIndex(i=>i.create==A6.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:o}=this;if(r.length&&o&&!c3e(o.dom,e)||this.pending){let{pos:s}=r[0]||this.pending,a=(i=(t=r[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:s;(s==a?this.view.posAtCoords(this.lastMove)!=s:!A3e(this.view,s,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const _M=4;function c3e(n,e){let{left:t,right:i,top:r,bottom:o}=n.getBoundingClientRect(),s;if(s=n.querySelector(".cm-tooltip-arrow")){let a=s.getBoundingClientRect();r=Math.min(a.top,r),o=Math.max(a.bottom,o)}return e.clientX>=t-_M&&e.clientX<=i+_M&&e.clientY>=r-_M&&e.clientY<=o+_M}function A3e(n,e,t,i,r,o){let s=n.scrollDOM.getBoundingClientRect(),a=n.documentTop+n.documentPadding.top+n.contentHeight;if(s.left>i||s.right<i||s.top>r||Math.min(s.bottom,a)<r)return!1;let c=n.posAtCoords({x:i,y:r},!1);return c>=e&&c<=t}function h3e(n,e={}){let t=ho.define(),i=pc.define({create(){return[]},update(r,o){if(r.length&&(e.hideOnChange&&(o.docChanged||o.selection)?r=[]:e.hideOn&&(r=r.filter(s=>!e.hideOn(o,s))),o.docChanged)){let s=[];for(let a of r){let c=o.changes.mapPos(a.pos,-1,Th.TrackDel);if(c!=null){let h=Object.assign(Object.create(null),a);h.pos=c,h.end!=null&&(h.end=o.changes.mapPos(h.end)),s.push(h)}}r=s}for(let s of o.effects)s.is(t)&&(r=s.value),s.is(d3e)&&(r=[]);return r},provide:r=>_S.from(r)});return{active:i,extension:[i,bu.define(r=>new u3e(r,n,i,t,e.hoverTime||300)),l3e]}}function Qne(n,e){let t=n.plugin(VU);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const d3e=ho.define(),JN=Bi.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function g4(n,e){let t=n.plugin(qne),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const qne=bu.fromClass(class{constructor(n){this.input=n.state.facet(y4),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(JN);this.top=new xM(n,!0,e.topContainer),this.bottom=new xM(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(JN);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new xM(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new xM(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(y4);if(t!=this.input){let i=t.filter(c=>c),r=[],o=[],s=[],a=[];for(let c of i){let h=this.specs.indexOf(c),m;h<0?(m=c(n.view),a.push(m)):(m=this.panels[h],m.update&&m.update(n)),r.push(m),(m.top?o:s).push(m)}this.specs=i,this.panels=r,this.top.sync(o),this.bottom.sync(s);for(let c of a)c.dom.classList.add("cm-panel"),c.mount&&c.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>Ei.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class xM{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=eG(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=eG(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function eG(n){let e=n.nextSibling;return n.remove(),e}const y4=Bi.define({enables:qne});class jg extends jb{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}jg.prototype.elementClass="";jg.prototype.toDOM=void 0;jg.prototype.mapMode=Th.TrackBefore;jg.prototype.startSide=jg.prototype.endSide=-1;jg.prototype.point=!0;const gw=Bi.define(),f3e=Bi.define(),p3e={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>rs.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},b3=Bi.define();function Yne(n){return[$ne(),b3.of({...p3e,...n})]}const tG=Bi.define({combine:n=>n.some(e=>e)});function $ne(n){return[m3e]}const m3e=bu.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(b3).map(e=>new iG(n,e)),this.fixed=!n.state.facet(tG);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(tG)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=rs.iter(this.view.state.facet(gw),this.view.viewport.from),i=[],r=this.gutters.map(o=>new g3e(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(o.type)){let s=!0;for(let a of o.type)if(a.type==Ph.Text&&s){VR(t,i,a.from);for(let c of r)c.line(this.view,a,i);s=!1}else if(a.widget)for(let c of r)c.widget(this.view,a)}else if(o.type==Ph.Text){VR(t,i,o.from);for(let s of r)s.line(this.view,o,i)}else if(o.widget)for(let s of r)s.widget(this.view,o);for(let o of r)o.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet(b3),t=n.state.facet(b3),i=n.docChanged||n.heightChanged||n.viewportChanged||!rs.eq(n.startState.facet(gw),n.state.facet(gw),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(n)&&(i=!0);else{i=!0;let r=[];for(let o of t){let s=e.indexOf(o);s<0?r.push(new iG(this.view,o)):(this.gutters[s].update(n),r.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),r.indexOf(o)<0&&o.destroy();for(let o of r)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=r}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>Ei.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let i=t.dom.offsetWidth*e.scaleX,r=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==cl.LTR?{left:i,right:r}:{right:i,left:r}})});function nG(n){return Array.isArray(n)?n:[n]}function VR(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class g3e{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=rs.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:r}=this,o=(t.top-this.height)/e.scaleY,s=t.height/e.scaleY;if(this.i==r.elements.length){let a=new Vne(e,s,o,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,s,o,i);this.height=t.bottom,this.i++}line(e,t,i){let r=[];VR(this.cursor,r,t.from),i.length&&(r=r.concat(i));let o=this.gutter.config.lineMarker(e,t,r);o&&r.unshift(o);let s=this.gutter;r.length==0&&!s.config.renderEmptyElements||this.addElement(e,t,r)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),r=i?[i]:null;for(let o of e.state.facet(f3e)){let s=o(e,t.widget,t);s&&(r||(r=[])).push(s)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class iG{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,r=>{let o=r.target,s;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let c=o.getBoundingClientRect();s=(c.top+c.bottom)/2}else s=r.clientY;let a=e.lineBlockAtHeight(s-e.documentTop);t.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=nG(t.markers(e)),t.initialSpacer&&(this.spacer=new Vne(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=nG(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!rs.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Vne{constructor(e,t,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,r)}update(e,t,i,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),y3e(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let i="cm-gutterElement",r=this.dom.firstChild;for(let o=0,s=0;;){let a=s,c=o<t.length?t[o++]:null,h=!1;if(c){let m=c.elementClass;m&&(i+=" "+m);for(let y=s;y<this.markers.length;y++)if(this.markers[y].compare(c)){a=y,h=!0;break}}else a=this.markers.length;for(;s<a;){let m=this.markers[s++];if(m.toDOM){m.destroy(r);let y=r.nextSibling;r.remove(),r=y}}if(!c)break;c.toDOM&&(h?r=r.nextSibling:this.dom.insertBefore(c.toDOM(e),r)),h&&s++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function y3e(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const v3e=Bi.define(),b3e=Bi.define(),B_=Bi.define({combine(n){return fm(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let r in t){let o=i[r],s=t[r];i[r]=o?(a,c,h)=>o(a,c,h)||s(a,c,h):s}return i}})}});class PB extends jg{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function UB(n,e){return n.state.facet(B_).formatNumber(e,n.state)}const C3e=b3.compute([B_],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(v3e)},lineMarker(e,t,i){return i.some(r=>r.toDOM)?null:new PB(UB(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let r of e.state.facet(b3e)){let o=r(e,t,i);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(B_)!=e.state.facet(B_),initialSpacer(e){return new PB(UB(e,rG(e.state.doc.lines)))},updateSpacer(e,t){let i=UB(t.view,rG(t.view.state.doc.lines));return i==e.number?e:new PB(i)},domEventHandlers:n.facet(B_).domEventHandlers,side:"before"}));function _3e(n={}){return[B_.of(n),$ne(),C3e]}function rG(n){let e=9;for(;e<n;)e=e*10+9;return e}const x3e=new class extends jg{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},M3e=gw.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.head).from;r>t&&(t=r,e.push(x3e.range(r)))}return rs.of(e)});function w3e(){return M3e}const Hne=1024;let S3e=0;class KB{constructor(e,t){this.from=e,this.to=t}}class ko{constructor(e={}){this.id=S3e++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=xd.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}ko.closedBy=new ko({deserialize:n=>n.split(" ")});ko.openedBy=new ko({deserialize:n=>n.split(" ")});ko.group=new ko({deserialize:n=>n.split(" ")});ko.isolate=new ko({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});ko.contextHash=new ko({perNode:!0});ko.lookAhead=new ko({perNode:!0});ko.mounted=new ko({perNode:!0});class xS{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[ko.mounted.id]}}const E3e=Object.create(null);class xd{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):E3e,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new xd(e.name||"",t,e.id,i);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(r)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(ko.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return i=>{for(let r=i.prop(ko.group),o=-1;o<(r?r.length:0);o++){let s=t[o<0?i.name:r[o]];if(s)return s}}}}xd.none=new xd("",Object.create(null),0,8);class HU{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let r=null;for(let o of e){let s=o(i);s&&(r||(r=Object.assign({},i.props)),r[s[0].id]=s[1])}t.push(r?new xd(i.name,r,i.id,i.flags):i)}return new HU(t)}}const MM=new WeakMap,oG=new WeakMap;var qc;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(qc||(qc={}));class Vu{constructor(e,t,i,r,o){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,a]of o)this.props[typeof s=="number"?s:s.id]=a}}toString(){let e=xS.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let r=i.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new ZR(this.topNode,e)}cursorAt(e,t=0,i=0){let r=MM.get(this)||this.topNode,o=new ZR(r);return o.moveTo(e,t),MM.set(this,o._tree),o}get topNode(){return new dp(this,0,0,null)}resolve(e,t=0){let i=v4(MM.get(this)||this.topNode,e,t,!1);return MM.set(this,i),i}resolveInner(e,t=0){let i=v4(oG.get(this)||this.topNode,e,t,!0);return oG.set(this,i),i}resolveStack(e,t=0){return I3e(this,e,t)}iterate(e){let{enter:t,leave:i,from:r=0,to:o=this.length}=e,s=e.mode||0,a=(s&qc.IncludeAnonymous)>0;for(let c=this.cursor(s|qc.IncludeAnonymous);;){let h=!1;if(c.from<=o&&c.to>=r&&(!a&&c.type.isAnonymous||t(c)!==!1)){if(c.firstChild())continue;h=!0}for(;h&&i&&(a||!c.type.isAnonymous)&&i(c),!c.nextSibling();){if(!c.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:JU(xd.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,r)=>new Vu(this.type,t,i,r,this.propValues),e.makeTree||((t,i,r)=>new Vu(xd.none,t,i,r)))}static build(e){return k3e(e)}}Vu.empty=new Vu(xd.none,[],[],0);class ZU{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new ZU(this.buffer,this.index)}}class sv{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return xd.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],o=r.name;if(/\W/.test(o)&&!r.isError&&(o=JSON.stringify(o)),e+=4,i==e)return o;let s=[];for(;e<i;)s.push(this.childString(e)),e=this.buffer[e+3];return o+"("+s.join(",")+")"}findChild(e,t,i,r,o){let{buffer:s}=this,a=-1;for(let c=e;c!=t&&!(Zne(o,r,s[c+1],s[c+2])&&(a=c,i>0));c=s[c+3]);return a}slice(e,t,i){let r=this.buffer,o=new Uint16Array(t-e),s=0;for(let a=e,c=0;a<t;){o[c++]=r[a++],o[c++]=r[a++]-i;let h=o[c++]=r[a++]-i;o[c++]=r[a++]-e,s=Math.max(s,h)}return new sv(o,s,this.set)}}function Zne(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function v4(n,e,t,i){for(var r;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let s=!i&&n instanceof dp&&n.index<0?null:n.parent;if(!s)return n;n=s}let o=i?0:qc.IgnoreOverlays;if(i)for(let s=n,a=s.parent;a;s=a,a=s.parent)s instanceof dp&&s.index<0&&((r=a.enter(e,t,o))===null||r===void 0?void 0:r.from)!=s.from&&(n=a);for(;;){let s=n.enter(e,t,o);if(!s)return n;n=s}}class Xne{cursor(e=0){return new ZR(this,e)}getChild(e,t=null,i=null){let r=sG(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return sG(this,e,t,i)}resolve(e,t=0){return v4(this,e,t,!1)}resolveInner(e,t=0){return v4(this,e,t,!0)}matchContext(e){return HR(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(i=t,t=r.prevSibling):t=r}return i}get node(){return this}get next(){return this.parent}}class dp extends Xne{constructor(e,t,i,r){super(),this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,o=0){for(let s=this;;){for(let{children:a,positions:c}=s._tree,h=t>0?a.length:-1;e!=h;e+=t){let m=a[e],y=c[e]+s.from;if(Zne(r,i,y,y+m.length)){if(m instanceof sv){if(o&qc.ExcludeBuffers)continue;let M=m.findChild(0,m.buffer.length,t,i-y,r);if(M>-1)return new Qy(new O3e(s,m,e,y),null,M)}else if(o&qc.IncludeAnonymous||!m.type.isAnonymous||XU(m)){let M;if(!(o&qc.IgnoreMounts)&&(M=xS.get(m))&&!M.overlay)return new dp(M.tree,y,e,s);let x=new dp(m,y,e,s);return o&qc.IncludeAnonymous||!x.type.isAnonymous?x:x.nextChild(t<0?m.children.length-1:0,t,i,r)}}}if(o&qc.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+t:e=t<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let r;if(!(i&qc.IgnoreOverlays)&&(r=xS.get(this._tree))&&r.overlay){let o=e-this.from;for(let{from:s,to:a}of r.overlay)if((t>0?s<=o:s<o)&&(t<0?a>=o:a>o))return new dp(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function sG(n,e,t,i){let r=n.cursor(),o=[];if(!r.firstChild())return o;if(t!=null){for(let s=!1;!s;)if(s=r.type.is(t),!r.nextSibling())return o}for(;;){if(i!=null&&r.type.is(i))return o;if(r.type.is(e)&&o.push(r.node),!r.nextSibling())return i==null?o:[]}}function HR(n,e,t=e.length-1){for(let i=n;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class O3e{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}}class Qy extends Xne{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return o<0?null:new Qy(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&qc.ExcludeBuffers)return null;let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new Qy(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Qy(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Qy(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,o=i.buffer[this.index+3];if(o>r){let s=i.buffer[this.index+1];e.push(i.slice(r,o,s)),t.push(0)}return new Vu(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Jne(n){if(!n.length)return null;let e=0,t=n[0];for(let o=1;o<n.length;o++){let s=n[o];(s.from>t.from||s.to<t.to)&&(t=s,e=o)}let i=t instanceof dp&&t.index<0?null:t.parent,r=n.slice();return i?r[e]=i:r.splice(e,1),new B3e(r,t)}class B3e{constructor(e,t){this.heads=e,this.node=t}get next(){return Jne(this.heads)}}function I3e(n,e,t){let i=n.resolveInner(e,t),r=null;for(let o=i instanceof dp?i:i.context.parent;o;o=o.parent)if(o.index<0){let s=o.parent;(r||(r=[i])).push(s.resolve(e,t)),o=s}else{let s=xS.get(o.tree);if(s&&s.overlay&&s.overlay[0].from<=e&&s.overlay[s.overlay.length-1].to>=e){let a=new dp(s.tree,s.overlay[0].from+o.from,-1,o);(r||(r=[i])).push(v4(a,e,t,!1))}}return r?Jne(r):i}class ZR{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof dp)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof dp?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&qc.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&qc.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&qc.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(r.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let o=t+e,s=e<0?-1:i._tree.children.length;o!=s;o+=e){let a=i._tree.children[o];if(this.mode&qc.IncludeAnonymous||a instanceof sv||!a.type.isAnonymous||XU(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,o=this.stack.length;o>=0;){for(let s=e;s;s=s._parent)if(s.index==r){if(r==this.index)return s;t=s,i=o+1;break e}r=this.stack[--o]}for(let r=i;r<this.stack.length;r++)t=new Qy(this.buffer,t,this.stack[r]);return this.bufferNode=new Qy(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return HR(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,o=this.stack.length-1;r>=0;o--){if(o<0)return HR(this._tree,e,r);let s=i[t.buffer[this.stack[o]]];if(!s.isAnonymous){if(e[r]&&e[r]!=s.name)return!1;r--}}return!0}}function XU(n){return n.children.some(e=>e instanceof sv||!e.type.isAnonymous||XU(e))}function k3e(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:r=Hne,reused:o=[],minRepeatType:s=i.types.length}=n,a=Array.isArray(t)?new ZU(t,t.length):t,c=i.types,h=0,m=0;function y(G,Y,z,se,le,me){let{id:de,start:be,end:Ee,size:De}=a,je=m,Ie=h;for(;De<0;)if(a.next(),De==-1){let we=o[de];z.push(we),se.push(be-G);return}else if(De==-3){h=de;return}else if(De==-4){m=de;return}else throw new RangeError(`Unrecognized record size: ${De}`);let Qe=c[de],et,dt,ke=be-G;if(Ee-be<=r&&(dt=F(a.pos-Y,le))){let we=new Uint16Array(dt.size-dt.skip),ze=a.pos-dt.size,xe=we.length;for(;a.pos>ze;)xe=j(dt.start,we,xe);et=new sv(we,Ee-dt.start,i),ke=dt.start-G}else{let we=a.pos-De;a.next();let ze=[],xe=[],At=de>=s?de:-1,it=0,bt=Ee;for(;a.pos>we;)At>=0&&a.id==At&&a.size>=0?(a.end<=bt-r&&(k(ze,xe,be,it,a.end,bt,At,je,Ie),it=ze.length,bt=a.end),a.next()):me>2500?M(be,we,ze,xe):y(be,we,ze,xe,At,me+1);if(At>=0&&it>0&&it<ze.length&&k(ze,xe,be,it,be,bt,At,je,Ie),ze.reverse(),xe.reverse(),At>-1&&it>0){let Bt=x(Qe,Ie);et=JU(Qe,ze,xe,0,ze.length,0,Ee-be,Bt,Bt)}else et=P(Qe,ze,xe,Ee-be,je-Ee,Ie)}z.push(et),se.push(ke)}function M(G,Y,z,se){let le=[],me=0,de=-1;for(;a.pos>Y;){let{id:be,start:Ee,end:De,size:je}=a;if(je>4)a.next();else{if(de>-1&&Ee<de)break;de<0&&(de=De-r),le.push(be,Ee,De),me++,a.next()}}if(me){let be=new Uint16Array(me*4),Ee=le[le.length-2];for(let De=le.length-3,je=0;De>=0;De-=3)be[je++]=le[De],be[je++]=le[De+1]-Ee,be[je++]=le[De+2]-Ee,be[je++]=je;z.push(new sv(be,le[2]-Ee,i)),se.push(Ee-G)}}function x(G,Y){return(z,se,le)=>{let me=0,de=z.length-1,be,Ee;if(de>=0&&(be=z[de])instanceof Vu){if(!de&&be.type==G&&be.length==le)return be;(Ee=be.prop(ko.lookAhead))&&(me=se[de]+be.length+Ee)}return P(G,z,se,le,me,Y)}}function k(G,Y,z,se,le,me,de,be,Ee){let De=[],je=[];for(;G.length>se;)De.push(G.pop()),je.push(Y.pop()+z-le);G.push(P(i.types[de],De,je,me-le,be-me,Ee)),Y.push(le-z)}function P(G,Y,z,se,le,me,de){if(me){let be=[ko.contextHash,me];de=de?[be].concat(de):[be]}if(le>25){let be=[ko.lookAhead,le];de=de?[be].concat(de):[be]}return new Vu(G,Y,z,se,de)}function F(G,Y){let z=a.fork(),se=0,le=0,me=0,de=z.end-r,be={size:0,start:0,skip:0};e:for(let Ee=z.pos-G;z.pos>Ee;){let De=z.size;if(z.id==Y&&De>=0){be.size=se,be.start=le,be.skip=me,me+=4,se+=4,z.next();continue}let je=z.pos-De;if(De<0||je<Ee||z.start<de)break;let Ie=z.id>=s?4:0,Qe=z.start;for(z.next();z.pos>je;){if(z.size<0)if(z.size==-3)Ie+=4;else break e;else z.id>=s&&(Ie+=4);z.next()}le=Qe,se+=De,me+=Ie}return(Y<0||se==G)&&(be.size=se,be.start=le,be.skip=me),be.size>4?be:void 0}function j(G,Y,z){let{id:se,start:le,end:me,size:de}=a;if(a.next(),de>=0&&se<s){let be=z;if(de>4){let Ee=a.pos-(de-4);for(;a.pos>Ee;)z=j(G,Y,z)}Y[--z]=be,Y[--z]=me-G,Y[--z]=le-G,Y[--z]=se}else de==-3?h=se:de==-4&&(m=se);return z}let q=[],V=[];for(;a.pos>0;)y(n.start||0,n.bufferStart||0,q,V,-1,0);let H=(e=n.length)!==null&&e!==void 0?e:q.length?V[0]+q[0].length:0;return new Vu(c[n.topID],q.reverse(),V.reverse(),H)}const aG=new WeakMap;function yw(n,e){if(!n.isAnonymous||e instanceof sv||e.type!=n)return 1;let t=aG.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof Vu)){t=1;break}t+=yw(n,i)}aG.set(e,t)}return t}function JU(n,e,t,i,r,o,s,a,c){let h=0;for(let k=i;k<r;k++)h+=yw(n,e[k]);let m=Math.ceil(h*1.5/8),y=[],M=[];function x(k,P,F,j,q){for(let V=F;V<j;){let H=V,G=P[V],Y=yw(n,k[V]);for(V++;V<j;V++){let z=yw(n,k[V]);if(Y+z>=m)break;Y+=z}if(V==H+1){if(Y>m){let z=k[H];x(z.children,z.positions,0,z.children.length,P[H]+q);continue}y.push(k[H])}else{let z=P[V-1]+k[V-1].length-G;y.push(JU(n,k,P,H,V,G,z,null,c))}M.push(G+q-o)}}return x(e,t,i,r,0),(a||c)(y,M,s)}class Bb{constructor(e,t,i,r,o=!1,s=!1){this.from=e,this.to=t,this.tree=i,this.offset=r,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let r=[new Bb(0,e.length,e,0,!1,i)];for(let o of t)o.to>e.length&&r.push(o);return r}static applyChanges(e,t,i=128){if(!t.length)return e;let r=[],o=1,s=e.length?e[0]:null;for(let a=0,c=0,h=0;;a++){let m=a<t.length?t[a]:null,y=m?m.fromA:1e9;if(y-c>=i)for(;s&&s.from<y;){let M=s;if(c>=M.from||y<=M.to||h){let x=Math.max(M.from,c)-h,k=Math.min(M.to,y)-h;M=x>=k?null:new Bb(x,k,M.tree,M.offset+h,a>0,!!m)}if(M&&r.push(M),s.to>y)break;s=o<e.length?e[o++]:null}if(!m)break;c=m.toA,h=m.toA-m.toB}return r}}class eie{startParse(e,t,i){return typeof e=="string"&&(e=new T3e(e)),i=i?i.length?i.map(r=>new KB(r.from,r.to)):[new KB(0,0)]:[new KB(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let o=r.advance();if(o)return o}}}class T3e{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new ko({perNode:!0});let R3e=0;class np{constructor(e,t,i,r){this.name=e,this.set=t,this.base=i,this.modified=r,this.id=R3e++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof np&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let r=new np(i,[],null,[]);if(r.set.push(r),t)for(let o of t.set)r.set.push(o);return r}static defineModifier(e){let t=new MS(e);return i=>i.modified.indexOf(t)>-1?i:MS.get(i.base||i,i.modified.concat(t).sort((r,o)=>r.id-o.id))}}let D3e=0;class MS{constructor(e){this.name=e,this.instances=[],this.id=D3e++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(a=>a.base==e&&P3e(t,a.modified));if(i)return i;let r=[],o=new np(e.name,r,e,t);for(let a of t)a.instances.push(o);let s=U3e(t);for(let a of e.set)if(!a.modified.length)for(let c of s)r.push(MS.get(a,c));return o}}function P3e(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function U3e(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function tie(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let r of t.split(" "))if(r){let o=[],s=2,a=r;for(let y=0;;){if(a=="..."&&y>0&&y+3==r.length){s=1;break}let M=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!M)throw new RangeError("Invalid path: "+r);if(o.push(M[0]=="*"?"":M[0][0]=='"'?JSON.parse(M[0]):M[0]),y+=M[0].length,y==r.length)break;let x=r[y++];if(y==r.length&&x=="!"){s=0;break}if(x!="/")throw new RangeError("Invalid path: "+r);a=r.slice(y)}let c=o.length-1,h=o[c];if(!h)throw new RangeError("Invalid path: "+r);let m=new wS(i,s,c>0?o.slice(0,c):null);e[h]=m.sort(e[h])}}return nie.add(e)}const nie=new ko;class wS{constructor(e,t,i,r){this.tags=e,this.mode=t,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}wS.empty=new wS([],2,null);function iie(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let s of o.tag)t[s.id]=o.class;let{scope:i,all:r=null}=e||{};return{style:o=>{let s=r;for(let a of o)for(let c of a.set){let h=t[c.id];if(h){s=s?s+" "+h:h;break}}return s},scope:i}}function K3e(n,e){let t=null;for(let i of n){let r=i.style(e);r&&(t=t?t+" "+r:r)}return t}function L3e(n,e,t,i=0,r=n.length){let o=new F3e(i,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),i,r,"",o.highlighters),o.flush(r)}class F3e{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,r,o){let{type:s,from:a,to:c}=e;if(a>=i||c<=t)return;s.isTop&&(o=this.highlighters.filter(x=>!x.scope||x.scope(s)));let h=r,m=z3e(e)||wS.empty,y=K3e(o,m.tags);if(y&&(h&&(h+=" "),h+=y,m.mode==1&&(r+=(r?" ":"")+y)),this.startSpan(Math.max(t,a),h),m.opaque)return;let M=e.tree&&e.tree.prop(ko.mounted);if(M&&M.overlay){let x=e.node.enter(M.overlay[0].from+a,1),k=this.highlighters.filter(F=>!F.scope||F.scope(M.tree.type)),P=e.firstChild();for(let F=0,j=a;;F++){let q=F<M.overlay.length?M.overlay[F]:null,V=q?q.from+a:c,H=Math.max(t,j),G=Math.min(i,V);if(H<G&&P)for(;e.from<G&&(this.highlightRange(e,H,G,r,o),this.startSpan(Math.min(G,e.to),h),!(e.to>=V||!e.nextSibling())););if(!q||V>i)break;j=q.to+a,j>t&&(this.highlightRange(x.cursor(),Math.max(t,q.from+a),Math.min(i,j),"",k),this.startSpan(Math.min(i,j),h))}P&&e.parent()}else if(e.firstChild()){M&&(r="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,r,o),this.startSpan(Math.min(i,e.to),h)}while(e.nextSibling());e.parent()}}}function z3e(n){let e=n.type.prop(nie);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const ui=np.define,wM=ui(),By=ui(),lG=ui(By),uG=ui(By),Iy=ui(),SM=ui(Iy),LB=ui(Iy),ug=ui(),eb=ui(ug),ag=ui(),lg=ui(),XR=ui(),C2=ui(XR),EM=ui(),un={comment:wM,lineComment:ui(wM),blockComment:ui(wM),docComment:ui(wM),name:By,variableName:ui(By),typeName:lG,tagName:ui(lG),propertyName:uG,attributeName:ui(uG),className:ui(By),labelName:ui(By),namespace:ui(By),macroName:ui(By),literal:Iy,string:SM,docString:ui(SM),character:ui(SM),attributeValue:ui(SM),number:LB,integer:ui(LB),float:ui(LB),bool:ui(Iy),regexp:ui(Iy),escape:ui(Iy),color:ui(Iy),url:ui(Iy),keyword:ag,self:ui(ag),null:ui(ag),atom:ui(ag),unit:ui(ag),modifier:ui(ag),operatorKeyword:ui(ag),controlKeyword:ui(ag),definitionKeyword:ui(ag),moduleKeyword:ui(ag),operator:lg,derefOperator:ui(lg),arithmeticOperator:ui(lg),logicOperator:ui(lg),bitwiseOperator:ui(lg),compareOperator:ui(lg),updateOperator:ui(lg),definitionOperator:ui(lg),typeOperator:ui(lg),controlOperator:ui(lg),punctuation:XR,separator:ui(XR),bracket:C2,angleBracket:ui(C2),squareBracket:ui(C2),paren:ui(C2),brace:ui(C2),content:ug,heading:eb,heading1:ui(eb),heading2:ui(eb),heading3:ui(eb),heading4:ui(eb),heading5:ui(eb),heading6:ui(eb),contentSeparator:ui(ug),list:ui(ug),quote:ui(ug),emphasis:ui(ug),strong:ui(ug),link:ui(ug),monospace:ui(ug),strikethrough:ui(ug),inserted:ui(),deleted:ui(),changed:ui(),invalid:ui(),meta:EM,documentMeta:ui(EM),annotation:ui(EM),processingInstruction:ui(EM),definition:np.defineModifier("definition"),constant:np.defineModifier("constant"),function:np.defineModifier("function"),standard:np.defineModifier("standard"),local:np.defineModifier("local"),special:np.defineModifier("special")};for(let n in un){let e=un[n];e instanceof np&&(e.name=n)}iie([{tag:un.link,class:"tok-link"},{tag:un.heading,class:"tok-heading"},{tag:un.emphasis,class:"tok-emphasis"},{tag:un.strong,class:"tok-strong"},{tag:un.keyword,class:"tok-keyword"},{tag:un.atom,class:"tok-atom"},{tag:un.bool,class:"tok-bool"},{tag:un.url,class:"tok-url"},{tag:un.labelName,class:"tok-labelName"},{tag:un.inserted,class:"tok-inserted"},{tag:un.deleted,class:"tok-deleted"},{tag:un.literal,class:"tok-literal"},{tag:un.string,class:"tok-string"},{tag:un.number,class:"tok-number"},{tag:[un.regexp,un.escape,un.special(un.string)],class:"tok-string2"},{tag:un.variableName,class:"tok-variableName"},{tag:un.local(un.variableName),class:"tok-variableName tok-local"},{tag:un.definition(un.variableName),class:"tok-variableName tok-definition"},{tag:un.special(un.variableName),class:"tok-variableName2"},{tag:un.definition(un.propertyName),class:"tok-propertyName tok-definition"},{tag:un.typeName,class:"tok-typeName"},{tag:un.namespace,class:"tok-namespace"},{tag:un.className,class:"tok-className"},{tag:un.macroName,class:"tok-macroName"},{tag:un.propertyName,class:"tok-propertyName"},{tag:un.operator,class:"tok-operator"},{tag:un.comment,class:"tok-comment"},{tag:un.meta,class:"tok-meta"},{tag:un.invalid,class:"tok-invalid"},{tag:un.punctuation,class:"tok-punctuation"}]);var FB;const I_=new ko;function j3e(n){return Bi.define({combine:n?e=>e.concat(n):void 0})}const N3e=new ko;class nm{constructor(e,t,i=[],r=""){this.data=e,this.name=r,Cs.prototype.hasOwnProperty("tree")||Object.defineProperty(Cs.prototype,"tree",{get(){return QA(this)}}),this.parser=t,this.extension=[av.of(this),Cs.languageData.of((o,s,a)=>{let c=cG(o,s,a),h=c.type.prop(I_);if(!h)return[];let m=o.facet(h),y=c.type.prop(N3e);if(y){let M=c.resolve(s-c.from,a);for(let x of y)if(x.test(M,o)){let k=o.facet(x.facet);return x.type=="replace"?k:k.concat(m)}}return m})].concat(i)}isActiveAt(e,t,i=-1){return cG(e,t,i).type.prop(I_)==this.data}findRegions(e){let t=e.facet(av);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=(o,s)=>{if(o.prop(I_)==this.data){i.push({from:s,to:s+o.length});return}let a=o.prop(ko.mounted);if(a){if(a.tree.prop(I_)==this.data){if(a.overlay)for(let c of a.overlay)i.push({from:c.from+s,to:c.to+s});else i.push({from:s,to:s+o.length});return}else if(a.overlay){let c=i.length;if(r(a.tree,a.overlay[0].from+s),i.length>c)return}}for(let c=0;c<o.children.length;c++){let h=o.children[c];h instanceof Vu&&r(h,o.positions[c]+s)}};return r(QA(e),0),i}get allowsNesting(){return!0}}nm.setState=ho.define();function cG(n,e,t){let i=n.facet(av),r=QA(n).topNode;if(!i||i.allowsNesting)for(let o=r;o;o=o.enter(e,t,qc.ExcludeBuffers))o.type.isTop&&(r=o);return r}class SS extends nm{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=j3e(e.languageData);return new SS(t,e.parser.configure({props:[I_.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new SS(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function QA(n){let e=n.field(nm.state,!1);return e?e.tree:Vu.empty}class G3e{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let _2=null;class ES{constructor(e,t,i=[],r,o,s,a,c){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=o,this.viewport=s,this.skipped=a,this.scheduleOn=c,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new ES(e,t,[],Vu.empty,0,i,[],null)}startParse(){return this.parser.startParse(new G3e(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Vu.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Bb.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Bb.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=_2;_2=this;try{return e()}finally{_2=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=AG(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:o,viewport:s,skipped:a}=this;if(this.takeTree(),!e.empty){let c=[];if(e.iterChangedRanges((h,m,y,M)=>c.push({fromA:h,toA:m,fromB:y,toB:M})),i=Bb.applyChanges(i,c),r=Vu.empty,o=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){a=[];for(let h of this.skipped){let m=e.mapPos(h.from,1),y=e.mapPos(h.to,-1);m<y&&a.push({from:m,to:y})}}}return new ES(this.parser,t,i,r,o,s,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:o}=this.skipped[i];r<e.to&&o>e.from&&(this.fragments=AG(this.fragments,r,o),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends eie{createParse(t,i,r){let o=r[0].from,s=r[r.length-1].to;return{parsedPos:o,advance(){let c=_2;if(c){for(let h of r)c.tempSkipped.push(h);e&&(c.scheduleOn=c.scheduleOn?Promise.all([c.scheduleOn,e]):e)}return this.parsedPos=s,new Vu(xd.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return _2}}function AG(n,e,t){return Bb.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class _x{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new _x(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=ES.create(e.facet(av).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new _x(i)}}nm.state=pc.define({create:_x.init,update(n,e){for(let t of e.effects)if(t.is(nm.setState))return t.value;return e.startState.facet(av)!=e.state.facet(av)?_x.init(e.state):n.apply(e)}});let rie=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(rie=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const zB=typeof navigator<"u"&&(!((FB=navigator.scheduling)===null||FB===void 0)&&FB.isInputPending)?()=>navigator.scheduling.isInputPending():null,W3e=bu.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(nm.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(nm.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=rie(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,o=i.field(nm.state);if(o.tree==o.context.tree&&o.context.isDone(r+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!zB?Math.max(25,e.timeRemaining()-5):1e9),a=o.context.treeLen<r&&i.doc.length>r+1e3,c=o.context.work(()=>zB&&zB()||Date.now()>s,r+(a?0:1e5));this.chunkBudget-=Date.now()-t,(c||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:nm.setState.of(new _x(o.context))})),this.chunkBudget>0&&!(c&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Dh(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),av=Bi.define({combine(n){return n.length?n[0]:null},enables:n=>[nm.state,W3e,Ei.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class Q3e{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const q3e=Bi.define(),eK=Bi.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function OS(n){let e=n.facet(eK);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function b4(n,e){let t="",i=n.tabSize,r=n.facet(eK)[0];if(r=="	"){for(;e>=i;)t+="	",e-=i;r=" "}for(let o=0;o<e;o++)t+=r;return t}function tK(n,e){n instanceof Cs&&(n=new h6(n));for(let i of n.state.facet(q3e)){let r=i(n,e);if(r!==void 0)return r}let t=QA(n.state);return t.length>=e?Y3e(n,t,e):null}class h6{constructor(e,t={}){this.state=e,this.options=t,this.unit=OS(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:o}=this.options;return r!=null&&r>=i.from&&r<=i.to?o&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),o=this.countColumn(i,e-r),s=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return s>-1&&(o+=s-this.countColumn(i,i.search(/\S|$/))),o}countColumn(e,t=e.length){return jx(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let s=o(r);if(s>-1)return s}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const oie=new ko;function Y3e(n,e,t){let i=e.resolveStack(t),r=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(r!=i.node){let o=[];for(let s=r;s&&!(s.from<i.node.from||s.to>i.node.to||s.from==i.node.from&&s.type==i.node.type);s=s.parent)o.push(s);for(let s=o.length-1;s>=0;s--)i={node:o[s],next:i}}return sie(i,n,t)}function sie(n,e,t){for(let i=n;i;i=i.next){let r=V3e(i.node);if(r)return r(nK.create(e,t,i))}return 0}function $3e(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function V3e(n){let e=n.type.prop(oie);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(ko.closedBy))){let r=n.lastChild,o=r&&i.indexOf(r.name)>-1;return s=>J3e(s,!0,1,void 0,o&&!$3e(s)?r.from:void 0)}return n.parent==null?H3e:null}function H3e(){return 0}class nK extends h6{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new nK(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(Z3e(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return sie(this.context.next,this.base,this.pos)}}function Z3e(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function X3e(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let r=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),s=r==null||r<=o.from?o.to:Math.min(o.to,r);for(let a=t.to;;){let c=e.childAfter(a);if(!c||c==i)return null;if(!c.type.isSkipped){if(c.from>=s)return null;let h=/^ */.exec(o.text.slice(t.to-o.from))[0].length;return{from:t.from,to:t.to+h}}a=c.to}}function J3e(n,e,t,i,r){let o=n.textAfter,s=o.match(/^\s*/)[0].length,a=i&&o.slice(s,s+i.length)==i||r==n.pos+s,c=X3e(n);return c?a?n.column(c.from):n.column(c.to):n.baseIndent+(a?0:n.unit*t)}function hG({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const e4e=200;function t4e(){return Cs.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,r=t.lineAt(i);if(i>r.from+e4e)return n;let o=t.sliceString(r.from,i);if(!e.some(h=>h.test(o)))return n;let{state:s}=n,a=-1,c=[];for(let{head:h}of s.selection.ranges){let m=s.doc.lineAt(h);if(m.from==a)continue;a=m.from;let y=tK(s,m.from);if(y==null)continue;let M=/^\s*/.exec(m.text)[0],x=b4(s,y);M!=x&&c.push({from:m.from,to:m.from+M.length,insert:x})}return c.length?[n,{changes:c,sequential:!0}]:n})}const n4e=Bi.define(),aie=new ko;function i4e(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function r4e(n,e,t){let i=QA(n);if(i.length<t)return null;let r=i.resolveStack(t,1),o=null;for(let s=r;s;s=s.next){let a=s.node;if(a.to<=t||a.from>t)continue;if(o&&a.from<e)break;let c=a.type.prop(aie);if(c&&(a.to<i.length-50||i.length==n.doc.length||!o4e(a))){let h=c(a,n);h&&h.from<=t&&h.from>=e&&h.to>t&&(o=h)}}return o}function o4e(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function BS(n,e,t){for(let i of n.facet(n4e)){let r=i(n,e,t);if(r)return r}return r4e(n,e,t)}function lie(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const d6=ho.define({map:lie}),b5=ho.define({map:lie});function uie(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const Qb=pc.define({create(){return kr.none},update(n,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,i)=>n=dG(n,t,i)),n=n.map(e.changes);for(let t of e.effects)if(t.is(d6)&&!s4e(n,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(hie),r=i?kr.replace({widget:new d4e(i(e.state,t.value))}):fG;n=n.update({add:[r.range(t.value.from,t.value.to)]})}else t.is(b5)&&(n=n.update({filter:(i,r)=>t.value.from!=i||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(n=dG(n,e.selection.main.head)),n},provide:n=>Ei.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,r)=>{t.push(i,r)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],r=n[t++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(fG.range(i,r))}return kr.set(e,!0)}});function dG(n,e,t=e){let i=!1;return n.between(e,t,(r,o)=>{r<t&&o>e&&(i=!0)}),i?n.update({filterFrom:e,filterTo:t,filter:(r,o)=>r>=t||o<=e}):n}function IS(n,e,t){var i;let r=null;return(i=n.field(Qb,!1))===null||i===void 0||i.between(e,t,(o,s)=>{(!r||r.from>o)&&(r={from:o,to:s})}),r}function s4e(n,e,t){let i=!1;return n.between(e,e,(r,o)=>{r==e&&o==t&&(i=!0)}),i}function cie(n,e){return n.field(Qb,!1)?e:e.concat(ho.appendConfig.of(die()))}const a4e=n=>{for(let e of uie(n)){let t=BS(n.state,e.from,e.to);if(t)return n.dispatch({effects:cie(n.state,[d6.of(t),Aie(n,t)])}),!0}return!1},l4e=n=>{if(!n.state.field(Qb,!1))return!1;let e=[];for(let t of uie(n)){let i=IS(n.state,t.from,t.to);i&&e.push(b5.of(i),Aie(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function Aie(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,r=n.state.doc.lineAt(e.to).number;return Ei.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${r}.`)}const u4e=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let r=n.lineBlockAt(i),o=BS(e,r.from,r.to);o&&t.push(d6.of(o)),i=(o?n.lineBlockAt(o.to):r).to+1}return t.length&&n.dispatch({effects:cie(n.state,t)}),!!t.length},c4e=n=>{let e=n.state.field(Qb,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,r)=>{t.push(b5.of({from:i,to:r}))}),n.dispatch({effects:t}),!0},A4e=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:a4e},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:l4e},{key:"Ctrl-Alt-[",run:u4e},{key:"Ctrl-Alt-]",run:c4e}],h4e={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},hie=Bi.define({combine(n){return fm(n,h4e)}});function die(n){return[Qb,m4e]}function fie(n,e){let{state:t}=n,i=t.facet(hie),r=s=>{let a=n.lineBlockAt(n.posAtDOM(s.target)),c=IS(n.state,a.from,a.to);c&&n.dispatch({effects:b5.of(c)}),s.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,r,e);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",t.phrase("folded code")),o.title=t.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=r,o}const fG=kr.replace({widget:new class extends Av{toDOM(n){return fie(n,null)}}});class d4e extends Av{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return fie(e,this.value)}}const f4e={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class jB extends jg{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function p4e(n={}){let e={...f4e,...n},t=new jB(e,!0),i=new jB(e,!1),r=bu.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(av)!=s.state.facet(av)||s.startState.field(Qb,!1)!=s.state.field(Qb,!1)||QA(s.startState)!=QA(s.state)||e.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let a=new f1;for(let c of s.viewportLineBlocks){let h=IS(s.state,c.from,c.to)?i:BS(s.state,c.from,c.to)?t:null;h&&a.add(c.from,c.from,h)}return a.finish()}}),{domEventHandlers:o}=e;return[r,Yne({class:"cm-foldGutter",markers(s){var a;return((a=s.plugin(r))===null||a===void 0?void 0:a.markers)||rs.empty},initialSpacer(){return new jB(e,!1)},domEventHandlers:{...o,click:(s,a,c)=>{if(o.click&&o.click(s,a,c))return!0;let h=IS(s.state,a.from,a.to);if(h)return s.dispatch({effects:b5.of(h)}),!0;let m=BS(s.state,a.from,a.to);return m?(s.dispatch({effects:d6.of(m)}),!0):!1}}}),die()]}const m4e=Ei.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class C5{constructor(e,t){this.specs=e;let i;function r(a){let c=iv.newName();return(i||(i=Object.create(null)))["."+c]=a,c}const o=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,s=t.scope;this.scope=s instanceof nm?a=>a.prop(I_)==s.data:s?a=>a==s:void 0,this.style=iie(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:o}).style,this.module=i?new iv(i):null,this.themeType=t.themeType}static define(e,t){return new C5(e,t||{})}}const JR=Bi.define(),pie=Bi.define({combine(n){return n.length?[n[0]]:null}});function NB(n){let e=n.facet(JR);return e.length?e:n.facet(pie)}function mie(n,e){let t=[y4e],i;return n instanceof C5&&(n.module&&t.push(Ei.styleModule.of(n.module)),i=n.themeType),e?.fallback?t.push(pie.of(n)):i?t.push(JR.computeN([Ei.darkTheme],r=>r.facet(Ei.darkTheme)==(i=="dark")?[n]:[])):t.push(JR.of(n)),t}class g4e{constructor(e){this.markCache=Object.create(null),this.tree=QA(e.state),this.decorations=this.buildDeco(e,NB(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=QA(e.state),i=NB(e.state),r=i!=NB(e.startState),{viewport:o}=e.view,s=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!r&&t.type==this.tree.type&&s>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return kr.none;let i=new f1;for(let{from:r,to:o}of e.visibleRanges)L3e(this.tree,t,(s,a,c)=>{i.add(s,a,this.markCache[c]||(this.markCache[c]=kr.mark({class:c})))},r,o);return i.finish()}}const y4e=eC.high(bu.fromClass(g4e,{decorations:n=>n.decorations})),v4e=C5.define([{tag:un.meta,color:"#404740"},{tag:un.link,textDecoration:"underline"},{tag:un.heading,textDecoration:"underline",fontWeight:"bold"},{tag:un.emphasis,fontStyle:"italic"},{tag:un.strong,fontWeight:"bold"},{tag:un.strikethrough,textDecoration:"line-through"},{tag:un.keyword,color:"#708"},{tag:[un.atom,un.bool,un.url,un.contentSeparator,un.labelName],color:"#219"},{tag:[un.literal,un.inserted],color:"#164"},{tag:[un.string,un.deleted],color:"#a11"},{tag:[un.regexp,un.escape,un.special(un.string)],color:"#e40"},{tag:un.definition(un.variableName),color:"#00f"},{tag:un.local(un.variableName),color:"#30a"},{tag:[un.typeName,un.namespace],color:"#085"},{tag:un.className,color:"#167"},{tag:[un.special(un.variableName),un.macroName],color:"#256"},{tag:un.definition(un.propertyName),color:"#00c"},{tag:un.comment,color:"#940"},{tag:un.invalid,color:"#f00"}]),b4e=Ei.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),gie=1e4,yie="()[]{}",vie=Bi.define({combine(n){return fm(n,{afterCursor:!0,brackets:yie,maxScanDistance:gie,renderMatch:x4e})}}),C4e=kr.mark({class:"cm-matchingBracket"}),_4e=kr.mark({class:"cm-nonmatchingBracket"});function x4e(n){let e=[],t=n.matched?C4e:_4e;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const M4e=pc.define({create(){return kr.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(vie);for(let r of e.state.selection.ranges){if(!r.empty)continue;let o=Sg(e.state,r.head,-1,i)||r.head>0&&Sg(e.state,r.head-1,1,i)||i.afterCursor&&(Sg(e.state,r.head,1,i)||r.head<e.state.doc.length&&Sg(e.state,r.head+1,-1,i));o&&(t=t.concat(i.renderMatch(o,e.state)))}return kr.set(t,!0)},provide:n=>Ei.decorations.from(n)}),w4e=[M4e,b4e];function S4e(n={}){return[vie.of(n),w4e]}const E4e=new ko;function eD(n,e,t){let i=n.prop(e<0?ko.openedBy:ko.closedBy);if(i)return i;if(n.name.length==1){let r=t.indexOf(n.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function tD(n){let e=n.type.prop(E4e);return e?e(n.node):n}function Sg(n,e,t,i={}){let r=i.maxScanDistance||gie,o=i.brackets||yie,s=QA(n),a=s.resolveInner(e,t);for(let c=a;c;c=c.parent){let h=eD(c.type,t,o);if(h&&c.from<c.to){let m=tD(c);if(m&&(t>0?e>=m.from&&e<m.to:e>m.from&&e<=m.to))return O4e(n,e,t,c,m,h,o)}}return B4e(n,e,t,s,a.type,r,o)}function O4e(n,e,t,i,r,o,s){let a=i.parent,c={from:r.from,to:r.to},h=0,m=a?.cursor();if(m&&(t<0?m.childBefore(i.from):m.childAfter(i.to)))do if(t<0?m.to<=i.from:m.from>=i.to){if(h==0&&o.indexOf(m.type.name)>-1&&m.from<m.to){let y=tD(m);return{start:c,end:y?{from:y.from,to:y.to}:void 0,matched:!0}}else if(eD(m.type,t,s))h++;else if(eD(m.type,-t,s)){if(h==0){let y=tD(m);return{start:c,end:y&&y.from<y.to?{from:y.from,to:y.to}:void 0,matched:!1}}h--}}while(t<0?m.prevSibling():m.nextSibling());return{start:c,matched:!1}}function B4e(n,e,t,i,r,o,s){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),c=s.indexOf(a);if(c<0||c%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},m=n.doc.iterRange(e,t>0?n.doc.length:0),y=0;for(let M=0;!m.next().done&&M<=o;){let x=m.value;t<0&&(M+=x.length);let k=e+M*t;for(let P=t>0?0:x.length-1,F=t>0?x.length:-1;P!=F;P+=t){let j=s.indexOf(x[P]);if(!(j<0||i.resolveInner(k+P,1).type!=r))if(j%2==0==t>0)y++;else{if(y==1)return{start:h,end:{from:k+P,to:k+P+1},matched:j>>1==c>>1};y--}}t>0&&(M+=x.length)}return m.done?{start:h,matched:!1}:null}const I4e=Object.create(null),pG=[xd.none],mG=[],gG=Object.create(null),k4e=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])k4e[n]=T4e(I4e,e);function GB(n,e){mG.indexOf(n)>-1||(mG.push(n),console.warn(e))}function T4e(n,e){let t=[];for(let a of e.split(" ")){let c=[];for(let h of a.split(".")){let m=n[h]||un[h];m?typeof m=="function"?c.length?c=c.map(m):GB(h,`Modifier ${h} used at start of tag`):c.length?GB(h,`Tag ${h} used as modifier`):c=Array.isArray(m)?m:[m]:GB(h,`Unknown highlighting tag ${h}`)}for(let h of c)t.push(h)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+t.map(a=>a.id),o=gG[r];if(o)return o.id;let s=gG[r]=xd.define({id:pG.length,name:i,props:[tie({[i]:t})]});return pG.push(s),s.id}cl.RTL,cl.LTR;const R4e=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=rK(n.state,t.from);return i.line?D4e(n):i.block?U4e(n):!1};function iK(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=n(e,t);return r?(i(t.update(r)),!0):!1}}const D4e=iK(F4e,0),P4e=iK(bie,0),U4e=iK((n,e)=>bie(n,e,L4e(e)),0);function rK(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const x2=50;function K4e(n,{open:e,close:t},i,r){let o=n.sliceDoc(i-x2,i),s=n.sliceDoc(r,r+x2),a=/\s*$/.exec(o)[0].length,c=/^\s*/.exec(s)[0].length,h=o.length-a;if(o.slice(h-e.length,h)==e&&s.slice(c,c+t.length)==t)return{open:{pos:i-a,margin:a&&1},close:{pos:r+c,margin:c&&1}};let m,y;r-i<=2*x2?m=y=n.sliceDoc(i,r):(m=n.sliceDoc(i,i+x2),y=n.sliceDoc(r-x2,r));let M=/^\s*/.exec(m)[0].length,x=/\s*$/.exec(y)[0].length,k=y.length-x-t.length;return m.slice(M,M+e.length)==e&&y.slice(k,k+t.length)==t?{open:{pos:i+M+e.length,margin:/\s/.test(m.charAt(M+e.length))?1:0},close:{pos:r-x-t.length,margin:/\s/.test(y.charAt(k-1))?1:0}}:null}function L4e(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),r=t.to<=i.to?i:n.doc.lineAt(t.to);r.from>i.from&&r.from==t.to&&(r=t.to==i.to+1?i:n.doc.lineAt(t.to-1));let o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function bie(n,e,t=e.selection.ranges){let i=t.map(o=>rK(e,o.from).block);if(!i.every(o=>o))return null;let r=t.map((o,s)=>K4e(e,i[s],o.from,o.to));if(n!=2&&!r.every(o=>o))return{changes:e.changes(t.map((o,s)=>r[s]?[]:[{from:o.from,insert:i[s].open+" "},{from:o.to,insert:" "+i[s].close}]))};if(n!=1&&r.some(o=>o)){let o=[];for(let s=0,a;s<r.length;s++)if(a=r[s]){let c=i[s],{open:h,close:m}=a;o.push({from:h.pos-c.open.length,to:h.pos+h.margin},{from:m.pos-m.margin,to:m.pos+c.close.length})}return{changes:o}}return null}function F4e(n,e,t=e.selection.ranges){let i=[],r=-1;for(let{from:o,to:s}of t){let a=i.length,c=1e9,h=rK(e,o).line;if(h){for(let m=o;m<=s;){let y=e.doc.lineAt(m);if(y.from>r&&(o==s||s>y.from)){r=y.from;let M=/^\s*/.exec(y.text)[0].length,x=M==y.length,k=y.text.slice(M,M+h.length)==h?M:-1;M<y.text.length&&M<c&&(c=M),i.push({line:y,comment:k,token:h,indent:M,empty:x,single:!1})}m=y.to+1}if(c<1e9)for(let m=a;m<i.length;m++)i[m].indent<i[m].line.text.length&&(i[m].indent=c);i.length==a+1&&(i[a].single=!0)}}if(n!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:a,token:c,indent:h,empty:m,single:y}of i)(y||!m)&&o.push({from:a.from+h,insert:c+" "});let s=e.changes(o);return{changes:s,selection:e.selection.map(s,1)}}else if(n!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:a,token:c}of i)if(a>=0){let h=s.from+a,m=h+c.length;s.text[m-s.from]==" "&&m++,o.push({from:h,to:m})}return{changes:o}}return null}const nD=v1.define(),z4e=v1.define(),j4e=Bi.define(),Cie=Bi.define({combine(n){return fm(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,r)=>e(i,r)||t(i,r)})}}),_ie=pc.define({create(){return Eg.empty},update(n,e){let t=e.state.facet(Cie),i=e.annotation(nD);if(i){let c=vd.fromTransaction(e,i.selection),h=i.side,m=h==0?n.undone:n.done;return c?m=kS(m,m.length,t.minDepth,c):m=wie(m,e.startState.selection),new Eg(h==0?i.rest:m,h==0?m:i.rest)}let r=e.annotation(z4e);if((r=="full"||r=="before")&&(n=n.isolate()),e.annotation(fc.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=vd.fromTransaction(e),s=e.annotation(fc.time),a=e.annotation(fc.userEvent);return o?n=n.addChanges(o,s,a,t,e):e.selection&&(n=n.addSelection(e.startState.selection,s,a,t.newGroupDelay)),(r=="full"||r=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Eg(n.done.map(vd.fromJSON),n.undone.map(vd.fromJSON))}});function N4e(n={}){return[_ie,Cie.of(n),Ei.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?xie:e.inputType=="historyRedo"?iD:null;return i?(e.preventDefault(),i(t)):!1}})]}function f6(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let r=t.field(_ie,!1);if(!r)return!1;let o=r.pop(n,t,e);return o?(i(o),!0):!1}}const xie=f6(0,!1),iD=f6(1,!1),G4e=f6(0,!0),W4e=f6(1,!0);class vd{constructor(e,t,i,r,o){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=r,this.selectionsAfter=o}setSelAfter(e){return new vd(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new vd(e.changes&&Ac.fromJSON(e.changes),[],e.mapped&&Lg.fromJSON(e.mapped),e.startSelection&&Sn.fromJSON(e.startSelection),e.selectionsAfter.map(Sn.fromJSON))}static fromTransaction(e,t){let i=lp;for(let r of e.startState.facet(j4e)){let o=r(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new vd(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,lp)}static selection(e){return new vd(void 0,lp,void 0,void 0,e)}}function kS(n,e,t,i){let r=e+1>t+20?e-t-1:0,o=n.slice(r,e);return o.push(i),o}function Q4e(n,e){let t=[],i=!1;return n.iterChangedRanges((r,o)=>t.push(r,o)),e.iterChangedRanges((r,o,s,a)=>{for(let c=0;c<t.length;){let h=t[c++],m=t[c++];a>=h&&s<=m&&(i=!0)}}),i}function q4e(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function Mie(n,e){return n.length?e.length?n.concat(e):n:e}const lp=[],Y4e=200;function wie(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-Y4e));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),kS(n,n.length-1,1e9,t.setSelAfter(i)))}else return[vd.selection([e])]}function $4e(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function WB(n,e){if(!n.length)return n;let t=n.length,i=lp;for(;t;){let r=V4e(n[t-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let o=n.slice(0,t);return o[t-1]=r,o}else e=r.mapped,t--,i=r.selectionsAfter}return i.length?[vd.selection(i)]:lp}function V4e(n,e,t){let i=Mie(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):lp,t);if(!n.changes)return vd.selection(i);let r=n.changes.map(e),o=e.mapDesc(n.changes,!0),s=n.mapped?n.mapped.composeDesc(o):o;return new vd(r,ho.mapEffects(n.effects,e),s,n.startSelection.map(o),i)}const H4e=/^(input\.type|delete)($|\.)/;class Eg{constructor(e,t,i=0,r=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new Eg(this.done,this.undone):this}addChanges(e,t,i,r,o){let s=this.done,a=s[s.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||H4e.test(i))&&(!a.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(o,Q4e(a.changes,e.changes))||i=="input.type.compose")?s=kS(s,s.length-1,r.minDepth,new vd(e.changes.compose(a.changes),Mie(ho.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,lp)):s=kS(s,s.length,r.minDepth,e),new Eg(s,lp,t,i)}addSelection(e,t,i,r){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:lp;return o.length>0&&t-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&q4e(o[o.length-1],e)?this:new Eg(wie(this.done,e),this.undone,t,i)}addMapping(e){return new Eg(WB(this.done,e),WB(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let o=r[r.length-1],s=o.selectionsAfter[0]||t.selection;if(i&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:nD.of({side:e,rest:$4e(r),selection:s}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let a=r.length==1?lp:r.slice(0,r.length-1);return o.mapped&&(a=WB(a,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:nD.of({side:e,rest:a,selection:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Eg.empty=new Eg(lp,lp);const Z4e=[{key:"Mod-z",run:xie,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:iD,preventDefault:!0},{linux:"Ctrl-Shift-z",run:iD,preventDefault:!0},{key:"Mod-u",run:G4e,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:W4e,preventDefault:!0}];function Nx(n,e){return Sn.create(n.ranges.map(e),n.mainIndex)}function $g(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function pm({state:n,dispatch:e},t){let i=Nx(n.selection,t);return i.eq(n.selection,!0)?!1:(e($g(n,i)),!0)}function p6(n,e){return Sn.cursor(e?n.to:n.from)}function Sie(n,e){return pm(n,t=>t.empty?n.moveByChar(t,e):p6(t,e))}function qA(n){return n.textDirectionAt(n.state.selection.main.head)==cl.LTR}const Eie=n=>Sie(n,!qA(n)),Oie=n=>Sie(n,qA(n));function Bie(n,e){return pm(n,t=>t.empty?n.moveByGroup(t,e):p6(t,e))}const X4e=n=>Bie(n,!qA(n)),J4e=n=>Bie(n,qA(n));function e5e(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function m6(n,e,t){let i=QA(n).resolveInner(e.head),r=t?ko.closedBy:ko.openedBy;for(let c=e.head;;){let h=t?i.childAfter(c):i.childBefore(c);if(!h)break;e5e(n,h,r)?i=h:c=t?h.to:h.from}let o=i.type.prop(r),s,a;return o&&(s=t?Sg(n,i.from,1):Sg(n,i.to,-1))&&s.matched?a=t?s.end.to:s.end.from:a=t?i.to:i.from,Sn.cursor(a,t?-1:1)}const t5e=n=>pm(n,e=>m6(n.state,e,!qA(n))),n5e=n=>pm(n,e=>m6(n.state,e,qA(n)));function Iie(n,e){return pm(n,t=>{if(!t.empty)return p6(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const kie=n=>Iie(n,!1),Tie=n=>Iie(n,!0);function Rie(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,r;if(e){for(let o of n.state.facet(Ei.scrollMargins)){let s=o(n);s?.top&&(t=Math.max(s?.top,t)),s?.bottom&&(i=Math.max(s?.bottom,i))}r=n.scrollDOM.clientHeight-t-i}else r=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,r-5)}}function Die(n,e){let t=Rie(n),{state:i}=n,r=Nx(i.selection,s=>s.empty?n.moveVertically(s,e,t.height):p6(s,e));if(r.eq(i.selection))return!1;let o;if(t.selfScroll){let s=n.coordsAtPos(i.selection.main.head),a=n.scrollDOM.getBoundingClientRect(),c=a.top+t.marginTop,h=a.bottom-t.marginBottom;s&&s.top>c&&s.bottom<h&&(o=Ei.scrollIntoView(r.main.head,{y:"start",yMargin:s.top-c}))}return n.dispatch($g(i,r),{effects:o}),!0}const yG=n=>Die(n,!1),rD=n=>Die(n,!0);function hv(n,e,t){let i=n.lineBlockAt(e.head),r=n.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?i.to:i.from)&&(r=n.moveToLineBoundary(e,t,!1)),!t&&r.head==i.from&&i.length){let o=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&e.head!=i.from+o&&(r=Sn.cursor(i.from+o))}return r}const i5e=n=>pm(n,e=>hv(n,e,!0)),r5e=n=>pm(n,e=>hv(n,e,!1)),o5e=n=>pm(n,e=>hv(n,e,!qA(n))),s5e=n=>pm(n,e=>hv(n,e,qA(n))),a5e=n=>pm(n,e=>Sn.cursor(n.lineBlockAt(e.head).from,1)),l5e=n=>pm(n,e=>Sn.cursor(n.lineBlockAt(e.head).to,-1));function u5e(n,e,t){let i=!1,r=Nx(n.selection,o=>{let s=Sg(n,o.head,-1)||Sg(n,o.head,1)||o.head>0&&Sg(n,o.head-1,1)||o.head<n.doc.length&&Sg(n,o.head+1,-1);if(!s||!s.end)return o;i=!0;let a=s.start.from==o.head?s.end.to:s.end.from;return Sn.cursor(a)});return i?(e($g(n,r)),!0):!1}const c5e=({state:n,dispatch:e})=>u5e(n,e);function mp(n,e){let t=Nx(n.state.selection,i=>{let r=e(i);return Sn.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch($g(n.state,t)),!0)}function Pie(n,e){return mp(n,t=>n.moveByChar(t,e))}const Uie=n=>Pie(n,!qA(n)),Kie=n=>Pie(n,qA(n));function Lie(n,e){return mp(n,t=>n.moveByGroup(t,e))}const A5e=n=>Lie(n,!qA(n)),h5e=n=>Lie(n,qA(n)),d5e=n=>mp(n,e=>m6(n.state,e,!qA(n))),f5e=n=>mp(n,e=>m6(n.state,e,qA(n)));function Fie(n,e){return mp(n,t=>n.moveVertically(t,e))}const zie=n=>Fie(n,!1),jie=n=>Fie(n,!0);function Nie(n,e){return mp(n,t=>n.moveVertically(t,e,Rie(n).height))}const vG=n=>Nie(n,!1),bG=n=>Nie(n,!0),p5e=n=>mp(n,e=>hv(n,e,!0)),m5e=n=>mp(n,e=>hv(n,e,!1)),g5e=n=>mp(n,e=>hv(n,e,!qA(n))),y5e=n=>mp(n,e=>hv(n,e,qA(n))),v5e=n=>mp(n,e=>Sn.cursor(n.lineBlockAt(e.head).from)),b5e=n=>mp(n,e=>Sn.cursor(n.lineBlockAt(e.head).to)),CG=({state:n,dispatch:e})=>(e($g(n,{anchor:0})),!0),_G=({state:n,dispatch:e})=>(e($g(n,{anchor:n.doc.length})),!0),xG=({state:n,dispatch:e})=>(e($g(n,{anchor:n.selection.main.anchor,head:0})),!0),MG=({state:n,dispatch:e})=>(e($g(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),C5e=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),_5e=({state:n,dispatch:e})=>{let t=g6(n).map(({from:i,to:r})=>Sn.range(i,Math.min(r+1,n.doc.length)));return e(n.update({selection:Sn.create(t),userEvent:"select"})),!0},x5e=({state:n,dispatch:e})=>{let t=Nx(n.selection,i=>{let r=QA(n),o=r.resolveStack(i.from,1);if(i.empty){let s=r.resolveStack(i.from,-1);s.node.from>=o.node.from&&s.node.to<=o.node.to&&(o=s)}for(let s=o;s;s=s.next){let{node:a}=s;if((a.from<i.from&&a.to>=i.to||a.to>i.to&&a.from<=i.from)&&s.next)return Sn.range(a.to,a.from)}return i});return t.eq(n.selection)?!1:(e($g(n,t)),!0)},M5e=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=Sn.create([t.main]):t.main.empty||(i=Sn.create([Sn.cursor(t.main.head)])),i?(e($g(n,i)),!0):!1};function _5(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,r=i.changeByRange(o=>{let{from:s,to:a}=o;if(s==a){let c=e(o);c<s?(t="delete.backward",c=OM(n,c,!1)):c>s&&(t="delete.forward",c=OM(n,c,!0)),s=Math.min(s,c),a=Math.max(a,c)}else s=OM(n,s,!1),a=OM(n,a,!0);return s==a?{range:o}:{changes:{from:s,to:a},range:Sn.cursor(s,s<o.head?-1:1)}});return r.changes.empty?!1:(n.dispatch(i.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Ei.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function OM(n,e,t){if(n instanceof Ei)for(let i of n.state.facet(Ei.atomicRanges).map(r=>r(n)))i.between(e,e,(r,o)=>{r<e&&o>e&&(e=t?o:r)});return e}const Gie=(n,e,t)=>_5(n,i=>{let r=i.from,{state:o}=n,s=o.doc.lineAt(r),a,c;if(t&&!e&&r>s.from&&r<s.from+200&&!/[^ \t]/.test(a=s.text.slice(0,r-s.from))){if(a[a.length-1]=="	")return r-1;let h=jx(a,o.tabSize),m=h%OS(o)||OS(o);for(let y=0;y<m&&a[a.length-1-y]==" ";y++)r--;c=r}else c=fA(s.text,r-s.from,e,e)+s.from,c==r&&s.number!=(e?o.doc.lines:1)?c+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(s.text.slice(c-s.from,r-s.from))&&(c=fA(s.text,c-s.from,!1,!1)+s.from);return c}),oD=n=>Gie(n,!1,!0),Wie=n=>Gie(n,!0,!1),Qie=(n,e)=>_5(n,t=>{let i=t.head,{state:r}=n,o=r.doc.lineAt(i),s=r.charCategorizer(i);for(let a=null;;){if(i==(e?o.to:o.from)){i==t.head&&o.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let c=fA(o.text,i-o.from,e)+o.from,h=o.text.slice(Math.min(i,c)-o.from,Math.max(i,c)-o.from),m=s(h);if(a!=null&&m!=a)break;(h!=" "||i!=t.head)&&(a=m),i=c}return i}),qie=n=>Qie(n,!1),w5e=n=>Qie(n,!0),S5e=n=>_5(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),E5e=n=>_5(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),O5e=n=>_5(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),B5e=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:_s.of(["",""])},range:Sn.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},I5e=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let r=i.from,o=n.doc.lineAt(r),s=r==o.from?r-1:fA(o.text,r-o.from,!1)+o.from,a=r==o.to?r+1:fA(o.text,r-o.from,!0)+o.from;return{changes:{from:s,to:a,insert:n.doc.slice(r,a).append(n.doc.slice(s,r))},range:Sn.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function g6(n){let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.from),o=n.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=n.doc.lineAt(i.to-1)),t>=r.number){let s=e[e.length-1];s.to=o.to,s.ranges.push(i)}else e.push({from:r.from,to:o.to,ranges:[i]});t=o.number+1}return e}function Yie(n,e,t){if(n.readOnly)return!1;let i=[],r=[];for(let o of g6(n)){if(t?o.to==n.doc.length:o.from==0)continue;let s=n.doc.lineAt(t?o.to+1:o.from-1),a=s.length+1;if(t){i.push({from:o.to,to:s.to},{from:o.from,insert:s.text+n.lineBreak});for(let c of o.ranges)r.push(Sn.range(Math.min(n.doc.length,c.anchor+a),Math.min(n.doc.length,c.head+a)))}else{i.push({from:s.from,to:o.from},{from:o.to,insert:n.lineBreak+s.text});for(let c of o.ranges)r.push(Sn.range(c.anchor-a,c.head-a))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:Sn.create(r,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const k5e=({state:n,dispatch:e})=>Yie(n,e,!1),T5e=({state:n,dispatch:e})=>Yie(n,e,!0);function $ie(n,e,t){if(n.readOnly)return!1;let i=[];for(let r of g6(n))t?i.push({from:r.from,insert:n.doc.slice(r.from,r.to)+n.lineBreak}):i.push({from:r.to,insert:n.lineBreak+n.doc.slice(r.from,r.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const R5e=({state:n,dispatch:e})=>$ie(n,e,!1),D5e=({state:n,dispatch:e})=>$ie(n,e,!0),P5e=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(g6(e).map(({from:r,to:o})=>(r>0?r--:o<e.doc.length&&o++,{from:r,to:o}))),i=Nx(e.selection,r=>{let o;if(n.lineWrapping){let s=n.lineBlockAt(r.head),a=n.coordsAtPos(r.head,r.assoc||1);a&&(o=s.bottom+n.documentTop-a.bottom+n.defaultLineHeight/2)}return n.moveVertically(r,!0,o)}).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function U5e(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=QA(n).resolveInner(e),i=t.childBefore(e),r=t.childAfter(e),o;return i&&r&&i.to<=e&&r.from>=e&&(o=i.type.prop(ko.closedBy))&&o.indexOf(r.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(r.from).from&&!/\S/.test(n.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const wG=Vie(!1),K5e=Vie(!0);function Vie(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:o,to:s}=r,a=e.doc.lineAt(o),c=!n&&o==s&&U5e(e,o);n&&(o=s=(s<=a.to?a:e.doc.lineAt(s)).to);let h=new h6(e,{simulateBreak:o,simulateDoubleBreak:!!c}),m=tK(h,o);for(m==null&&(m=jx(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));s<a.to&&/\s/.test(a.text[s-a.from]);)s++;c?{from:o,to:s}=c:o>a.from&&o<a.from+100&&!/\S/.test(a.text.slice(0,o))&&(o=a.from);let y=["",b4(e,m)];return c&&y.push(b4(e,h.lineIndent(a.from,-1))),{changes:{from:o,to:s,insert:_s.of(y)},range:Sn.cursor(o+1+y[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function oK(n,e){let t=-1;return n.changeByRange(i=>{let r=[];for(let s=i.from;s<=i.to;){let a=n.doc.lineAt(s);a.number>t&&(i.empty||i.to>a.from)&&(e(a,r,i),t=a.number),s=a.to+1}let o=n.changes(r);return{changes:r,range:Sn.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const L5e=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new h6(n,{overrideIndentation:o=>{let s=t[o];return s??-1}}),r=oK(n,(o,s,a)=>{let c=tK(i,o.from);if(c==null)return;/\S/.test(o.text)||(c=0);let h=/^\s*/.exec(o.text)[0],m=b4(n,c);(h!=m||a.from<o.from+h.length)&&(t[o.from]=c,s.push({from:o.from,to:o.from+h.length,insert:m}))});return r.changes.empty||e(n.update(r,{userEvent:"indent"})),!0},F5e=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(oK(n,(t,i)=>{i.push({from:t.from,insert:n.facet(eK)})}),{userEvent:"input.indent"})),!0),z5e=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(oK(n,(t,i)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let o=jx(r,n.tabSize),s=0,a=b4(n,Math.max(0,o-OS(n)));for(;s<r.length&&s<a.length&&r.charCodeAt(s)==a.charCodeAt(s);)s++;i.push({from:t.from+s,to:t.from+r.length,insert:a.slice(s)})}),{userEvent:"delete.dedent"})),!0),j5e=n=>(n.setTabFocusMode(),!0),N5e=[{key:"Ctrl-b",run:Eie,shift:Uie,preventDefault:!0},{key:"Ctrl-f",run:Oie,shift:Kie},{key:"Ctrl-p",run:kie,shift:zie},{key:"Ctrl-n",run:Tie,shift:jie},{key:"Ctrl-a",run:a5e,shift:v5e},{key:"Ctrl-e",run:l5e,shift:b5e},{key:"Ctrl-d",run:Wie},{key:"Ctrl-h",run:oD},{key:"Ctrl-k",run:S5e},{key:"Ctrl-Alt-h",run:qie},{key:"Ctrl-o",run:B5e},{key:"Ctrl-t",run:I5e},{key:"Ctrl-v",run:rD}],G5e=[{key:"ArrowLeft",run:Eie,shift:Uie,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:X4e,shift:A5e,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:o5e,shift:g5e,preventDefault:!0},{key:"ArrowRight",run:Oie,shift:Kie,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:J4e,shift:h5e,preventDefault:!0},{mac:"Cmd-ArrowRight",run:s5e,shift:y5e,preventDefault:!0},{key:"ArrowUp",run:kie,shift:zie,preventDefault:!0},{mac:"Cmd-ArrowUp",run:CG,shift:xG},{mac:"Ctrl-ArrowUp",run:yG,shift:vG},{key:"ArrowDown",run:Tie,shift:jie,preventDefault:!0},{mac:"Cmd-ArrowDown",run:_G,shift:MG},{mac:"Ctrl-ArrowDown",run:rD,shift:bG},{key:"PageUp",run:yG,shift:vG},{key:"PageDown",run:rD,shift:bG},{key:"Home",run:r5e,shift:m5e,preventDefault:!0},{key:"Mod-Home",run:CG,shift:xG},{key:"End",run:i5e,shift:p5e,preventDefault:!0},{key:"Mod-End",run:_G,shift:MG},{key:"Enter",run:wG,shift:wG},{key:"Mod-a",run:C5e},{key:"Backspace",run:oD,shift:oD},{key:"Delete",run:Wie},{key:"Mod-Backspace",mac:"Alt-Backspace",run:qie},{key:"Mod-Delete",mac:"Alt-Delete",run:w5e},{mac:"Mod-Backspace",run:E5e},{mac:"Mod-Delete",run:O5e}].concat(N5e.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),W5e=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:t5e,shift:d5e},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:n5e,shift:f5e},{key:"Alt-ArrowUp",run:k5e},{key:"Shift-Alt-ArrowUp",run:R5e},{key:"Alt-ArrowDown",run:T5e},{key:"Shift-Alt-ArrowDown",run:D5e},{key:"Escape",run:M5e},{key:"Mod-Enter",run:K5e},{key:"Alt-l",mac:"Ctrl-l",run:_5e},{key:"Mod-i",run:x5e,preventDefault:!0},{key:"Mod-[",run:z5e},{key:"Mod-]",run:F5e},{key:"Mod-Alt-\\",run:L5e},{key:"Shift-Mod-k",run:P5e},{key:"Shift-Mod-\\",run:c5e},{key:"Mod-/",run:R4e},{key:"Alt-A",run:P4e},{key:"Ctrl-m",mac:"Shift-Alt-m",run:j5e}].concat(G5e),SG=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class xx{constructor(e,t,i=0,r=e.length,o,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=o?a=>o(SG(a)):SG,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return pd(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=PU(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=yg(e);let r=this.normalize(t);if(r.length)for(let o=0,s=i;;o++){let a=r.charCodeAt(o),c=this.match(a,s,this.bufferPos+this.bufferStart);if(o==r.length-1){if(c)return this.value=c,this;break}s==i&&o<t.length&&t.charCodeAt(o)==a&&s++}}}match(e,t,i){let r=null;for(let o=0;o<this.matches.length;o+=2){let s=this.matches[o],a=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?r={from:this.matches[o+1],to:i}:(this.matches[o]++,a=!0)),a||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:t,to:i}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(xx.prototype[Symbol.iterator]=function(){return this});const Hie={from:-1,to:-1,match:/.*/.exec("")},sK="gm"+(/x/.unicode==null?"":"u");class Zie{constructor(e,t,i,r=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=Hie,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Xie(e,t,i,r,o);this.re=new RegExp(t,sK+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let s=e.lineAt(r);this.curLineStart=s.from,this.matchPos=TS(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,r=i+t[0].length;if(this.matchPos=TS(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const QB=new WeakMap;class $_{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let r=QB.get(e);if(!r||r.from>=i||r.to<=t){let a=new $_(t,e.sliceString(t,i));return QB.set(e,a),a}if(r.from==t&&r.to==i)return r;let{text:o,from:s}=r;return s>t&&(o=e.sliceString(t,s)+o,s=t),r.to<i&&(o+=e.sliceString(r.to,i)),QB.set(e,new $_(s,o)),new $_(t,o.slice(t-s,i-s))}}class Xie{constructor(e,t,i,r,o){this.text=e,this.to=o,this.done=!1,this.value=Hie,this.matchPos=TS(e,r),this.re=new RegExp(t,sK+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=$_.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,r=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this.matchPos=TS(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=$_.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Zie.prototype[Symbol.iterator]=Xie.prototype[Symbol.iterator]=function(){return this});function Q5e(n){try{return new RegExp(n,sK),!0}catch{return!1}}function TS(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function sD(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=Ia("input",{class:"cm-textfield",name:"line",value:e}),i=Ia("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),n.dispatch({effects:C3.of(!1)}),n.focus()):o.keyCode==13&&(o.preventDefault(),r())},onsubmit:o=>{o.preventDefault(),r()}},Ia("label",n.state.phrase("Go to line"),": ",t)," ",Ia("button",{class:"cm-button",type:"submit"},n.state.phrase("go")),Ia("button",{name:"close",onclick:()=>{n.dispatch({effects:C3.of(!1)}),n.focus()},"aria-label":n.state.phrase("close"),type:"button"},[""]));function r(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!o)return;let{state:s}=n,a=s.doc.lineAt(s.selection.main.head),[,c,h,m,y]=o,M=m?+m.slice(1):0,x=h?+h:a.number;if(h&&y){let F=x/100;c&&(F=F*(c=="-"?-1:1)+a.number/s.doc.lines),x=Math.round(s.doc.lines*F)}else h&&c&&(x=x*(c=="-"?-1:1)+a.number);let k=s.doc.line(Math.max(1,Math.min(s.doc.lines,x))),P=Sn.cursor(k.from+Math.max(0,Math.min(M,k.length)));n.dispatch({effects:[C3.of(!1),Ei.scrollIntoView(P.from,{y:"center"})],selection:P}),n.focus()}return{dom:i}}const C3=ho.define(),EG=pc.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(C3)&&(n=t.value);return n},provide:n=>y4.from(n,e=>e?sD:null)}),q5e=n=>{let e=g4(n,sD);if(!e){let t=[C3.of(!0)];n.state.field(EG,!1)==null&&t.push(ho.appendConfig.of([EG,Y5e])),n.dispatch({effects:t}),e=g4(n,sD)}return e&&e.dom.querySelector("input").select(),!0},Y5e=Ei.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),$5e={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},V5e=Bi.define({combine(n){return fm(n,$5e,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function H5e(n){return[tMe,eMe]}const Z5e=kr.mark({class:"cm-selectionMatch"}),X5e=kr.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function OG(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=wl.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=wl.Word)}function J5e(n,e,t,i){return n(e.sliceDoc(t,t+1))==wl.Word&&n(e.sliceDoc(i-1,i))==wl.Word}const eMe=bu.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(V5e),{state:t}=n,i=t.selection;if(i.ranges.length>1)return kr.none;let r=i.main,o,s=null;if(r.empty){if(!e.highlightWordAroundCursor)return kr.none;let c=t.wordAt(r.head);if(!c)return kr.none;s=t.charCategorizer(r.head),o=t.sliceDoc(c.from,c.to)}else{let c=r.to-r.from;if(c<e.minSelectionLength||c>200)return kr.none;if(e.wholeWords){if(o=t.sliceDoc(r.from,r.to),s=t.charCategorizer(r.head),!(OG(s,t,r.from,r.to)&&J5e(s,t,r.from,r.to)))return kr.none}else if(o=t.sliceDoc(r.from,r.to),!o)return kr.none}let a=[];for(let c of n.visibleRanges){let h=new xx(t.doc,o,c.from,c.to);for(;!h.next().done;){let{from:m,to:y}=h.value;if((!s||OG(s,t,m,y))&&(r.empty&&m<=r.from&&y>=r.to?a.push(X5e.range(m,y)):(m>=r.to||y<=r.from)&&a.push(Z5e.range(m,y)),a.length>e.maxMatches))return kr.none}}return kr.set(a)}},{decorations:n=>n.decorations}),tMe=Ei.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),nMe=({state:n,dispatch:e})=>{let{selection:t}=n,i=Sn.create(t.ranges.map(r=>n.wordAt(r.head)||Sn.cursor(r.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function iMe(n,e){let{main:t,ranges:i}=n.selection,r=n.wordAt(t.head),o=r&&r.from==t.from&&r.to==t.to;for(let s=!1,a=new xx(n.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(s)return null;a=new xx(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),s=!0}else{if(s&&i.some(c=>c.from==a.value.from))continue;if(o){let c=n.wordAt(a.value.from);if(!c||c.from!=a.value.from||c.to!=a.value.to)continue}return a.value}}const rMe=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(o=>o.from===o.to))return nMe({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=i))return!1;let r=iMe(n,i);return r?(e(n.update({selection:n.selection.addRange(Sn.range(r.from,r.to),!1),effects:Ei.scrollIntoView(r.to)})),!0):!1},Gx=Bi.define({combine(n){return fm(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new mMe(e),scrollToMatch:e=>Ei.scrollIntoView(e)})}});class Jie{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Q5e(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new lMe(this):new sMe(this)}getCursor(e,t=0,i){let r=e.doc?e:Cs.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?x_(this,r,t,i):__(this,r,t,i)}}class ere{constructor(e){this.spec=e}}function __(n,e,t,i){return new xx(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:r=>r.toLowerCase(),n.wholeWord?oMe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function oMe(n,e){return(t,i,r,o)=>((o>t||o+r.length<i)&&(o=Math.max(0,t-2),r=n.sliceString(o,Math.min(n.length,i+2))),(e(RS(r,t-o))!=wl.Word||e(DS(r,t-o))!=wl.Word)&&(e(DS(r,i-o))!=wl.Word||e(RS(r,i-o))!=wl.Word))}class sMe extends ere{constructor(e){super(e)}nextMatch(e,t,i){let r=__(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let o=Math.min(e.doc.length,t+this.spec.unquoted.length);r=__(this.spec,e,0,o).nextOverlapping()}return r.done||r.value.from==t&&r.value.to==i?null:r.value}prevMatchInRange(e,t,i){for(let r=i;;){let o=Math.max(t,r-1e4-this.spec.unquoted.length),s=__(this.spec,e,o,r),a=null;for(;!s.nextOverlapping().done;)a=s.value;if(a)return a;if(o==t)return null;r-=1e4}}prevMatch(e,t,i){let r=this.prevMatchInRange(e,0,t);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=t||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=__(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let o=__(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}function x_(n,e,t,i){return new Zie(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?aMe(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function RS(n,e){return n.slice(fA(n,e,!1),e)}function DS(n,e){return n.slice(e,fA(n,e))}function aMe(n){return(e,t,i)=>!i[0].length||(n(RS(i.input,i.index))!=wl.Word||n(DS(i.input,i.index))!=wl.Word)&&(n(DS(i.input,i.index+i[0].length))!=wl.Word||n(RS(i.input,i.index+i[0].length))!=wl.Word)}class lMe extends ere{nextMatch(e,t,i){let r=x_(this.spec,e,i,e.doc.length).next();return r.done&&(r=x_(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=1;;r++){let o=Math.max(t,i-r*1e4),s=x_(this.spec,e,o,i),a=null;for(;!s.next().done;)a=s.value;if(a&&(o==t||a.from>o+10))return a;if(o==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let o=+i.slice(0,r);if(o>0&&o<e.match.length)return e.match[o]+i.slice(r)}return t})}matchAll(e,t){let i=x_(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let o=x_(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}const C4=ho.define(),aK=ho.define(),Jy=pc.define({create(n){return new qB(aD(n).create(),null)},update(n,e){for(let t of e.effects)t.is(C4)?n=new qB(t.value.create(),n.panel):t.is(aK)&&(n=new qB(n.query,t.value?lK:null));return n},provide:n=>y4.from(n,e=>e.panel)});class qB{constructor(e,t){this.query=e,this.panel=t}}const uMe=kr.mark({class:"cm-searchMatch"}),cMe=kr.mark({class:"cm-searchMatch cm-searchMatch-selected"}),AMe=bu.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Jy))}update(n){let e=n.state.field(Jy);(e!=n.startState.field(Jy)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return kr.none;let{view:t}=this,i=new f1;for(let r=0,o=t.visibleRanges,s=o.length;r<s;r++){let{from:a,to:c}=o[r];for(;r<s-1&&c>o[r+1].from-500;)c=o[++r].to;n.highlight(t.state,a,c,(h,m)=>{let y=t.state.selection.ranges.some(M=>M.from==h&&M.to==m);i.add(h,m,y?cMe:uMe)})}return i.finish()}},{decorations:n=>n.decorations});function x5(n){return e=>{let t=e.state.field(Jy,!1);return t&&t.query.spec.valid?n(e,t):ire(e)}}const PS=x5((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);if(!i)return!1;let r=Sn.single(i.from,i.to),o=n.state.facet(Gx);return n.dispatch({selection:r,effects:[uK(n,i),o.scrollToMatch(r.main,n)],userEvent:"select.search"}),nre(n),!0}),US=x5((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,r=e.prevMatch(t,i,i);if(!r)return!1;let o=Sn.single(r.from,r.to),s=n.state.facet(Gx);return n.dispatch({selection:o,effects:[uK(n,r),s.scrollToMatch(o.main,n)],userEvent:"select.search"}),nre(n),!0}),hMe=x5((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:Sn.create(t.map(i=>Sn.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),dMe=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:r}=t.main,o=[],s=0;for(let a=new xx(n.doc,n.sliceDoc(i,r));!a.next().done;){if(o.length>1e3)return!1;a.value.from==i&&(s=o.length),o.push(Sn.range(a.value.from,a.value.to))}return e(n.update({selection:Sn.create(o,s),userEvent:"select.search.matches"})),!0},BG=x5((n,{query:e})=>{let{state:t}=n,{from:i,to:r}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,i,i);if(!o)return!1;let s=o,a=[],c,h,m=[];s.from==i&&s.to==r&&(h=t.toText(e.getReplacement(s)),a.push({from:s.from,to:s.to,insert:h}),s=e.nextMatch(t,s.from,s.to),m.push(Ei.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+".")));let y=n.state.changes(a);return s&&(c=Sn.single(s.from,s.to).map(y),m.push(uK(n,s)),m.push(t.facet(Gx).scrollToMatch(c.main,n))),n.dispatch({changes:y,selection:c,effects:m,userEvent:"input.replace"}),!0}),fMe=x5((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(r=>{let{from:o,to:s}=r;return{from:o,to:s,insert:e.getReplacement(r)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:Ei.announce.of(i),userEvent:"input.replace.all"}),!0});function lK(n){return n.state.facet(Gx).createPanel(n)}function aD(n,e){var t,i,r,o,s;let a=n.selection.main,c=a.empty||a.to>a.from+100?"":n.sliceDoc(a.from,a.to);if(e&&!c)return e;let h=n.facet(Gx);return new Jie({search:((t=e?.literal)!==null&&t!==void 0?t:h.literal)?c:c.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:h.caseSensitive,literal:(r=e?.literal)!==null&&r!==void 0?r:h.literal,regexp:(o=e?.regexp)!==null&&o!==void 0?o:h.regexp,wholeWord:(s=e?.wholeWord)!==null&&s!==void 0?s:h.wholeWord})}function tre(n){let e=g4(n,lK);return e&&e.dom.querySelector("[main-field]")}function nre(n){let e=tre(n);e&&e==n.root.activeElement&&e.select()}const ire=n=>{let e=n.state.field(Jy,!1);if(e&&e.panel){let t=tre(n);if(t&&t!=n.root.activeElement){let i=aD(n.state,e.query.spec);i.valid&&n.dispatch({effects:C4.of(i)}),t.focus(),t.select()}}else n.dispatch({effects:[aK.of(!0),e?C4.of(aD(n.state,e.query.spec)):ho.appendConfig.of(yMe)]});return!0},rre=n=>{let e=n.state.field(Jy,!1);if(!e||!e.panel)return!1;let t=g4(n,lK);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:aK.of(!1)}),!0},pMe=[{key:"Mod-f",run:ire,scope:"editor search-panel"},{key:"F3",run:PS,shift:US,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:PS,shift:US,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:rre,scope:"editor search-panel"},{key:"Mod-Shift-l",run:dMe},{key:"Mod-Alt-g",run:q5e},{key:"Mod-d",run:rMe,preventDefault:!0}];class mMe{constructor(e){this.view=e;let t=this.query=e.state.field(Jy).query.spec;this.commit=this.commit.bind(this),this.searchField=Ia("input",{value:t.search,placeholder:af(e,"Find"),"aria-label":af(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ia("input",{value:t.replace,placeholder:af(e,"Replace"),"aria-label":af(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ia("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Ia("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Ia("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(r,o,s){return Ia("button",{class:"cm-button",name:r,onclick:o,type:"button"},s)}this.dom=Ia("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>PS(e),[af(e,"next")]),i("prev",()=>US(e),[af(e,"previous")]),i("select",()=>hMe(e),[af(e,"all")]),Ia("label",null,[this.caseField,af(e,"match case")]),Ia("label",null,[this.reField,af(e,"regexp")]),Ia("label",null,[this.wordField,af(e,"by word")]),...e.state.readOnly?[]:[Ia("br"),this.replaceField,i("replace",()=>BG(e),[af(e,"replace")]),i("replaceAll",()=>fMe(e),[af(e,"replace all")])],Ia("button",{name:"close",onclick:()=>rre(e),"aria-label":af(e,"close"),type:"button"},[""])])}commit(){let e=new Jie({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:C4.of(e)}))}keydown(e){S2e(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?US:PS)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),BG(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(C4)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Gx).top}}function af(n,e){return n.state.phrase(e)}const BM=30,IM=/[\s\.,:;?!]/;function uK(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),r=n.state.doc.lineAt(t).to,o=Math.max(i.from,e-BM),s=Math.min(r,t+BM),a=n.state.sliceDoc(o,s);if(o!=i.from){for(let c=0;c<BM;c++)if(!IM.test(a[c+1])&&IM.test(a[c])){a=a.slice(c);break}}if(s!=r){for(let c=a.length-1;c>a.length-BM;c--)if(!IM.test(a[c-1])&&IM.test(a[c])){a=a.slice(0,c);break}}return Ei.announce.of(`${n.state.phrase("current match")}. ${a} ${n.state.phrase("on line")} ${i.number}.`)}const gMe=Ei.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),yMe=[Jy,eC.low(AMe),gMe];class ore{constructor(e,t,i,r){this.state=e,this.pos=t,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=QA(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),r=t.text.slice(i-t.from,this.pos-t.from),o=r.search(sre(e,!1));return o<0?null:{from:i+o,to:this.pos,text:r.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function IG(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function vMe(n){let e=Object.create(null),t=Object.create(null);for(let{label:r}of n){e[r[0]]=!0;for(let o=1;o<r.length;o++)t[r[o]]=!0}let i=IG(e)+IG(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function bMe(n){let e=n.map(r=>typeof r=="string"?{label:r}:r),[t,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:vMe(e);return r=>{let o=r.matchBefore(i);return o||r.explicit?{from:o?o.from:r.pos,options:e,validFor:t}:null}}class kG{constructor(e,t,i,r){this.completion=e,this.source=t,this.match=i,this.score=r}}function Ib(n){return n.selection.main.from}function sre(n,e){var t;let{source:i}=n,r=e&&i[0]!="^",o=i[i.length-1]!="$";return!r&&!o?n:new RegExp(`${r?"^":""}(?:${i})${o?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const are=v1.define();function CMe(n,e,t,i){let{main:r}=n.selection,o=t-r.from,s=i-r.from;return{...n.changeByRange(a=>{if(a!=r&&t!=i&&n.sliceDoc(a.from+o,a.from+s)!=n.sliceDoc(t,i))return{range:a};let c=n.toText(e);return{changes:{from:a.from+o,to:i==r.from?a.to:a.from+s,insert:c},range:Sn.cursor(a.from+o+c.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const TG=new WeakMap;function _Me(n){if(!Array.isArray(n))return n;let e=TG.get(n);return e||TG.set(n,e=bMe(n)),e}const KS=ho.define(),_4=ho.define();class xMe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=pd(e,t),r=yg(i);this.chars.push(i);let o=e.slice(t,t+r),s=o.toUpperCase();this.folded.push(pd(s==o?o.toLowerCase():s,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:r,precise:o,byWord:s}=this;if(t.length==1){let q=pd(e,0),V=yg(q),H=V==e.length?0:-100;if(q!=t[0])if(q==i[0])H+=-200;else return null;return this.ret(H,[0,V])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let c=t.length,h=0;if(a<0){for(let q=0,V=Math.min(e.length,200);q<V&&h<c;){let H=pd(e,q);(H==t[h]||H==i[h])&&(r[h++]=q),q+=yg(H)}if(h<c)return null}let m=0,y=0,M=!1,x=0,k=-1,P=-1,F=/[a-z]/.test(e),j=!0;for(let q=0,V=Math.min(e.length,200),H=0;q<V&&y<c;){let G=pd(e,q);a<0&&(m<c&&G==t[m]&&(o[m++]=q),x<c&&(G==t[x]||G==i[x]?(x==0&&(k=q),P=q+1,x++):x=0));let Y,z=G<255?G>=48&&G<=57||G>=97&&G<=122?2:G>=65&&G<=90?1:0:(Y=PU(G))!=Y.toLowerCase()?1:Y!=Y.toUpperCase()?2:0;(!q||z==1&&F||H==0&&z!=0)&&(t[y]==G||i[y]==G&&(M=!0)?s[y++]=q:s.length&&(j=!1)),H=z,q+=yg(G)}return y==c&&s[0]==0&&j?this.result(-100+(M?-200:0),s,e):x==c&&k==0?this.ret(-200-e.length+(P==e.length?0:-100),[0,P]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):x==c?this.ret(-900-e.length,[k,P]):y==c?this.result(-100+(M?-200:0)+-700+(j?0:-1100),s,e):t.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,i){let r=[],o=0;for(let s of t){let a=s+(this.astral?yg(pd(i,s)):1);o&&r[o-1]==s?r[o-1]=a:(r[o++]=s,r[o++]=a)}return this.ret(e-i.length,r)}}class MMe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const $c=Bi.define({combine(n){return fm(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:wMe,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>RG(e(i),t(i)),optionClass:(e,t)=>i=>RG(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function RG(n,e){return n?e?n+" "+e:n:e}function wMe(n,e,t,i,r,o){let s=n.textDirection==cl.RTL,a=s,c=!1,h="top",m,y,M=e.left-r.left,x=r.right-e.right,k=i.right-i.left,P=i.bottom-i.top;if(a&&M<Math.min(k,x)?a=!1:!a&&x<Math.min(k,M)&&(a=!0),k<=(a?M:x))m=Math.max(r.top,Math.min(t.top,r.bottom-P))-e.top,y=Math.min(400,a?M:x);else{c=!0,y=Math.min(400,(s?e.right:r.right-e.left)-30);let q=r.bottom-e.bottom;q>=P||q>e.top?m=t.bottom-e.top:(h="bottom",m=e.bottom-t.top)}let F=(e.bottom-e.top)/o.offsetHeight,j=(e.right-e.left)/o.offsetWidth;return{style:`${h}: ${m/F}px; max-width: ${y/j}px`,class:"cm-completionInfo-"+(c?s?"left-narrow":"right-narrow":a?"left":"right")}}function SMe(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,r,o){let s=document.createElement("span");s.className="cm-completionLabel";let a=t.displayLabel||t.label,c=0;for(let h=0;h<o.length;){let m=o[h++],y=o[h++];m>c&&s.appendChild(document.createTextNode(a.slice(c,m)));let M=s.appendChild(document.createElement("span"));M.appendChild(document.createTextNode(a.slice(m,y))),M.className="cm-completionMatchedText",c=y}return c<a.length&&s.appendChild(document.createTextNode(a.slice(c))),s},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function YB(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class EMe{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:c=>this.placeInfo(c),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:o,selected:s}=r.open,a=e.state.facet($c);this.optionContent=SMe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=YB(o.length,s,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",c=>{let{options:h}=e.state.field(t).open;for(let m=c.target,y;m&&m!=this.dom;m=m.parentNode)if(m.nodeName=="LI"&&(y=/-(\d+)$/.exec(m.id))&&+y[1]<h.length){this.applyCompletion(e,h[+y[1]]),c.preventDefault();return}}),this.dom.addEventListener("focusout",c=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet($c).closeOnBlur&&c.relatedTarget!=e.contentDOM&&e.dispatch({effects:_4.of(null)})}),this.showOptions(o,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:o,selected:s,disabled:a}=i.open;(!r.open||r.open.options!=o)&&(this.range=YB(o.length,s,e.state.facet($c).maxRenderedOptions),this.showOptions(o,i.id)),this.updateSel(),a!=((t=r.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=YB(t.options.length,t.selected,this.view.state.facet($c).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:r}=i;if(!r)return;let o=typeof r=="string"?document.createTextNode(r):r(i);if(!o)return;"then"in o?o.then(s=>{s&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(s,i)}).catch(s=>Dh(this.view.state,s,"completion info")):this.addInfoPane(o,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:o}=e;i.appendChild(r),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&BMe(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),o=this.space;if(!o){let s=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:s.clientWidth,bottom:s.clientHeight}}return r.top>Math.min(o.bottom,t.bottom)-10||r.bottom<Math.max(o.top,t.top)+10?null:this.view.state.facet($c).positionInfo(this.view,t,r,i,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",s=>{s.target==r&&s.preventDefault()});let o=null;for(let s=i.from;s<i.to;s++){let{completion:a,match:c}=e[s],{section:h}=a;if(h){let M=typeof h=="string"?h:h.name;if(M!=o&&(s>i.from||i.from==0))if(o=M,typeof h!="string"&&h.header)r.appendChild(h.header(h));else{let x=r.appendChild(document.createElement("completion-section"));x.textContent=M}}const m=r.appendChild(document.createElement("li"));m.id=t+"-"+s,m.setAttribute("role","option");let y=this.optionClass(a);y&&(m.className=y);for(let M of this.optionContent){let x=M(a,this.view.state,this.view,c);x&&m.appendChild(x)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function OMe(n,e){return t=>new EMe(t,n,e)}function BMe(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),r=t.height/n.offsetHeight;i.top<t.top?n.scrollTop-=(t.top-i.top)/r:i.bottom>t.bottom&&(n.scrollTop+=(i.bottom-t.bottom)/r)}function DG(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function IMe(n,e){let t=[],i=null,r=h=>{t.push(h);let{section:m}=h.completion;if(m){i||(i=[]);let y=typeof m=="string"?m:m.name;i.some(M=>M.name==y)||i.push(typeof m=="string"?{name:y}:m)}},o=e.facet($c);for(let h of n)if(h.hasResult()){let m=h.result.getMatch;if(h.result.filter===!1)for(let y of h.result.options)r(new kG(y,h.source,m?m(y):[],1e9-t.length));else{let y=e.sliceDoc(h.from,h.to),M,x=o.filterStrict?new MMe(y):new xMe(y);for(let k of h.result.options)if(M=x.match(k.label)){let P=k.displayLabel?m?m(k,M.matched):[]:M.matched;r(new kG(k,h.source,P,M.score+(k.boost||0)))}}}if(i){let h=Object.create(null),m=0,y=(M,x)=>{var k,P;return((k=M.rank)!==null&&k!==void 0?k:1e9)-((P=x.rank)!==null&&P!==void 0?P:1e9)||(M.name<x.name?-1:1)};for(let M of i.sort(y))m-=1e5,h[M.name]=m;for(let M of t){let{section:x}=M.completion;x&&(M.score+=h[typeof x=="string"?x:x.name])}}let s=[],a=null,c=o.compareCompletions;for(let h of t.sort((m,y)=>y.score-m.score||c(m.completion,y.completion))){let m=h.completion;!a||a.label!=m.label||a.detail!=m.detail||a.type!=null&&m.type!=null&&a.type!=m.type||a.apply!=m.apply||a.boost!=m.boost?s.push(h):DG(h.completion)>DG(a)&&(s[s.length-1]=h),a=h.completion}return s}class k_{constructor(e,t,i,r,o,s){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=r,this.selected=o,this.disabled=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new k_(this.options,PG(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,r,o,s){if(r&&!s&&e.some(h=>h.isPending))return r.setDisabled();let a=IMe(e,t);if(!a.length)return r&&e.some(h=>h.isPending)?r.setDisabled():null;let c=t.facet($c).selectOnOpen?0:-1;if(r&&r.selected!=c&&r.selected!=-1){let h=r.options[r.selected].completion;for(let m=0;m<a.length;m++)if(a[m].completion==h){c=m;break}}return new k_(a,PG(i,c),{pos:e.reduce((h,m)=>m.hasResult()?Math.min(h,m.from):h,1e8),create:UMe,above:o.aboveCursor},r?r.timestamp:Date.now(),c,!1)}map(e){return new k_(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new k_(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class LS{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new LS(DMe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet($c),o=(i.override||t.languageDataAt("autocomplete",Ib(t)).map(_Me)).map(c=>(this.active.find(m=>m.source==c)||new up(c,this.active.some(m=>m.state!=0)?1:0)).update(e,i));o.length==this.active.length&&o.every((c,h)=>c==this.active[h])&&(o=this.active);let s=this.open,a=e.effects.some(c=>c.is(cK));s&&e.docChanged&&(s=s.map(e.changes)),e.selection||o.some(c=>c.hasResult()&&e.changes.touchesRange(c.from,c.to))||!kMe(o,this.active)||a?s=k_.build(o,t,this.id,s,i,a):s&&s.disabled&&!o.some(c=>c.isPending)&&(s=null),!s&&o.every(c=>!c.isPending)&&o.some(c=>c.hasResult())&&(o=o.map(c=>c.hasResult()?new up(c.source,0):c));for(let c of e.effects)c.is(ure)&&(s=s&&s.setSelected(c.value,this.id));return o==this.active&&s==this.open?this:new LS(o,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?TMe:RMe}}function kMe(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;i<e.length&&!e[i].hasResult();)i++;let r=t==n.length,o=i==e.length;if(r||o)return r==o;if(n[t++].result!=e[i++].result)return!1}}const TMe={"aria-autocomplete":"list"},RMe={};function PG(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const DMe=[];function lre(n,e){if(n.isUserEvent("input.complete")){let i=n.annotation(are);if(i&&e.activateOnCompletion(i))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class up{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let i=lre(e,t),r=this;(i&8||i&16&&this.touches(e))&&(r=new up(r.source,0)),i&4&&r.state==0&&(r=new up(this.source,1)),r=r.updateFor(e,i);for(let o of e.effects)if(o.is(KS))r=new up(r.source,1,o.value);else if(o.is(_4))r=new up(r.source,0);else if(o.is(cK))for(let s of o.value)s.source==r.source&&(r=s);return r}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Ib(e.state))}}class V_ extends up{constructor(e,t,i,r,o,s){super(e,3,t),this.limit=i,this.result=r,this.from=o,this.to=s}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),a=Ib(e.state);if(a>s||!r||t&2&&(Ib(e.startState)==this.from||a<this.limit))return new up(this.source,t&4?1:0);let c=e.changes.mapPos(this.limit);return PMe(r.validFor,e.state,o,s)?new V_(this.source,this.explicit,c,r,o,s):r.update&&(r=r.update(r,o,s,new ore(e.state,a,!1)))?new V_(this.source,this.explicit,c,r,r.from,(i=r.to)!==null&&i!==void 0?i:Ib(e.state)):new up(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new V_(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new up(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function PMe(n,e,t,i){if(!n)return!1;let r=e.sliceDoc(t,i);return typeof n=="function"?n(r,t,i,e):sre(n,!0).test(r)}const cK=ho.define({map(n,e){return n.map(t=>t.map(e))}}),ure=ho.define(),gd=pc.define({create(){return LS.start()},update(n,e){return n.update(e)},provide:n=>[c6.from(n,e=>e.tooltip),Ei.contentAttributes.from(n,e=>e.attrs)]});function AK(n,e){const t=e.completion.apply||e.completion.label;let i=n.state.field(gd).active.find(r=>r.source==e.source);return i instanceof V_?(typeof t=="string"?n.dispatch({...CMe(n.state,t,i.from,i.to),annotations:are.of(e.completion)}):t(n,e.completion,i.from,i.to),!0):!1}const UMe=OMe(gd,AK);function kM(n,e="option"){return t=>{let i=t.state.field(gd,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet($c).interactionDelay)return!1;let r=1,o;e=="page"&&(o=Qne(t,i.open.tooltip))&&(r=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(n?1:-1):n?0:s-1;return a<0?a=e=="page"?0:s-1:a>=s&&(a=e=="page"?s-1:0),t.dispatch({effects:ure.of(a)}),!0}}const KMe=n=>{let e=n.state.field(gd,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet($c).interactionDelay?!1:AK(n,e.open.options[e.open.selected])},$B=n=>n.state.field(gd,!1)?(n.dispatch({effects:KS.of(!0)}),!0):!1,LMe=n=>{let e=n.state.field(gd,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:_4.of(null)}),!0)};class FMe{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const zMe=50,jMe=1e3,NMe=bu.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(gd).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(gd),t=n.state.facet($c);if(!n.selectionSet&&!n.docChanged&&n.startState.field(gd)==e)return;let i=n.transactions.some(o=>{let s=lre(o,t);return s&8||(o.selection||o.docChanged)&&!(s&3)});for(let o=0;o<this.running.length;o++){let s=this.running[o];if(i||s.context.abortOnDocChange&&n.docChanged||s.updates.length+n.transactions.length>zMe&&Date.now()-s.time>jMe){for(let a of s.context.abortListeners)try{a()}catch(c){Dh(this.view.state,c)}s.context.abortListeners=null,this.running.splice(o--,1)}else s.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(o=>o.effects.some(s=>s.is(KS)))&&(this.pendingStart=!0);let r=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(s=>s.active.source==o.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let o of n.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(gd);for(let t of e.active)t.isPending&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet($c).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=Ib(e),i=new ore(e,t,n.explicit,this.view),r=new FMe(n,i);this.running.push(r),Promise.resolve(n.source(i)).then(o=>{r.context.aborted||(r.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:_4.of(null)}),Dh(this.view.state,o)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet($c).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet($c),i=this.view.state.field(gd);for(let r=0;r<this.running.length;r++){let o=this.running[r];if(o.done===void 0)continue;if(this.running.splice(r--,1),o.done){let a=Ib(o.updates.length?o.updates[0].startState:this.view.state),c=Math.min(a,o.done.from+(o.active.explicit?0:1)),h=new V_(o.active.source,o.active.explicit,c,o.done,o.done.from,(n=o.done.to)!==null&&n!==void 0?n:a);for(let m of o.updates)h=h.update(m,t);if(h.hasResult()){e.push(h);continue}}let s=i.active.find(a=>a.source==o.active.source);if(s&&s.isPending)if(o.done==null){let a=new up(o.active.source,0);for(let c of o.updates)a=a.update(c,t);a.isPending||e.push(a)}else this.startQuery(s)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:cK.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(gd,!1);if(e&&e.tooltip&&this.view.state.facet($c).closeOnBlur){let t=e.open&&Qne(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:_4.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:KS.of(!1)}),20),this.composing=0}}}),GMe=typeof navigator=="object"&&/Win/.test(navigator.platform),WMe=eC.highest(Ei.domEventHandlers({keydown(n,e){let t=e.state.field(gd,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(GMe&&n.altKey)||n.metaKey)return!1;let i=t.open.options[t.open.selected],r=t.active.find(s=>s.source==i.source),o=i.completion.commitCharacters||r.result.commitCharacters;return o&&o.indexOf(n.key)>-1&&AK(e,i),!1}})),QMe=Ei.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),x4={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},gb=ho.define({map(n,e){let t=e.mapPos(n,-1,Th.TrackAfter);return t??void 0}}),hK=new class extends jb{};hK.startSide=1;hK.endSide=-1;const cre=pc.define({create(){return rs.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(gb)&&(n=n.update({add:[hK.range(t.value,t.value+1)]}));return n}});function qMe(){return[$Me,cre]}const VB="()[]{}<>";function Are(n){for(let e=0;e<VB.length;e+=2)if(VB.charCodeAt(e)==n)return VB.charAt(e+1);return PU(n<128?n:n+1)}function hre(n,e){return n.languageDataAt("closeBrackets",e)[0]||x4}const YMe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),$Me=Ei.inputHandler.of((n,e,t,i)=>{if((YMe?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let r=n.state.selection.main;if(i.length>2||i.length==2&&yg(pd(i,0))==1||e!=r.from||t!=r.to)return!1;let o=ZMe(n.state,i);return o?(n.dispatch(o),!0):!1}),VMe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=hre(n,n.selection.main.head).brackets||x4.brackets,r=null,o=n.changeByRange(s=>{if(s.empty){let a=XMe(n.doc,s.head);for(let c of i)if(c==a&&y6(n.doc,s.head)==Are(pd(c,0)))return{changes:{from:s.head-c.length,to:s.head+c.length},range:Sn.cursor(s.head-c.length)}}return{range:r=s}});return r||e(n.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},HMe=[{key:"Backspace",run:VMe}];function ZMe(n,e){let t=hre(n,n.selection.main.head),i=t.brackets||x4.brackets;for(let r of i){let o=Are(pd(r,0));if(e==r)return o==r?twe(n,r,i.indexOf(r+r+r)>-1,t):JMe(n,r,o,t.before||x4.before);if(e==o&&dre(n,n.selection.main.from))return ewe(n,r,o)}return null}function dre(n,e){let t=!1;return n.field(cre).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function y6(n,e){let t=n.sliceString(e,e+2);return t.slice(0,yg(pd(t,0)))}function XMe(n,e){let t=n.sliceString(e-2,e);return yg(pd(t,0))==t.length?t:t.slice(1)}function JMe(n,e,t,i){let r=null,o=n.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:t,from:s.to}],effects:gb.of(s.to+e.length),range:Sn.range(s.anchor+e.length,s.head+e.length)};let a=y6(n.doc,s.head);return!a||/\s/.test(a)||i.indexOf(a)>-1?{changes:{insert:e+t,from:s.head},effects:gb.of(s.head+e.length),range:Sn.cursor(s.head+e.length)}:{range:r=s}});return r?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function ewe(n,e,t){let i=null,r=n.changeByRange(o=>o.empty&&y6(n.doc,o.head)==t?{changes:{from:o.head,to:o.head+t.length,insert:t},range:Sn.cursor(o.head+t.length)}:i={range:o});return i?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function twe(n,e,t,i){let r=i.stringPrefixes||x4.stringPrefixes,o=null,s=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:gb.of(a.to+e.length),range:Sn.range(a.anchor+e.length,a.head+e.length)};let c=a.head,h=y6(n.doc,c),m;if(h==e){if(UG(n,c))return{changes:{insert:e+e,from:c},effects:gb.of(c+e.length),range:Sn.cursor(c+e.length)};if(dre(n,c)){let M=t&&n.sliceDoc(c,c+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:c,to:c+M.length,insert:M},range:Sn.cursor(c+M.length)}}}else{if(t&&n.sliceDoc(c-2*e.length,c)==e+e&&(m=KG(n,c-2*e.length,r))>-1&&UG(n,m))return{changes:{insert:e+e+e+e,from:c},effects:gb.of(c+e.length),range:Sn.cursor(c+e.length)};if(n.charCategorizer(c)(h)!=wl.Word&&KG(n,c,r)>-1&&!nwe(n,c,e,r))return{changes:{insert:e+e,from:c},effects:gb.of(c+e.length),range:Sn.cursor(c+e.length)}}return{range:o=a}});return o?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function UG(n,e){let t=QA(n).resolveInner(e+1);return t.parent&&t.from==e}function nwe(n,e,t,i){let r=QA(n).resolveInner(e,-1),o=i.reduce((s,a)=>Math.max(s,a.length),0);for(let s=0;s<5;s++){let a=n.sliceDoc(r.from,Math.min(r.to,r.from+t.length+o)),c=a.indexOf(t);if(!c||c>-1&&i.indexOf(a.slice(0,c))>-1){let m=r.firstChild;for(;m&&m.from==r.from&&m.to-m.from>t.length+c;){if(n.sliceDoc(m.to-t.length,m.to)==t)return!1;m=m.firstChild}return!0}let h=r.to==e&&r.parent;if(!h)break;r=h}return!1}function KG(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=wl.Word)return e;for(let r of t){let o=e-r.length;if(n.sliceDoc(o,e)==r&&i(n.sliceDoc(o-1,o))!=wl.Word)return o}return-1}function iwe(n={}){return[WMe,gd,$c.of(n),NMe,rwe,QMe]}const fre=[{key:"Ctrl-Space",run:$B},{mac:"Alt-`",run:$B},{mac:"Alt-i",run:$B},{key:"Escape",run:LMe},{key:"ArrowDown",run:kM(!0)},{key:"ArrowUp",run:kM(!1)},{key:"PageDown",run:kM(!0,"page")},{key:"PageUp",run:kM(!1,"page")},{key:"Enter",run:KMe}],rwe=eC.highest($U.computeN([$c],n=>n.facet($c).defaultKeymap?[fre]:[]));class LG{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class lb{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let r=i.facet(Og).markerFilter;r&&(e=r(e,i));let o=e.slice().sort((m,y)=>m.from-y.from||m.to-y.to),s=new f1,a=[],c=0;for(let m=0;;){let y=m==o.length?null:o[m];if(!y&&!a.length)break;let M,x;for(a.length?(M=c,x=a.reduce((P,F)=>Math.min(P,F.to),y&&y.from>M?y.from:1e8)):(M=y.from,x=y.to,a.push(y),m++);m<o.length;){let P=o[m];if(P.from==M&&(P.to>P.from||P.to==M))a.push(P),m++,x=Math.min(P.to,x);else{x=Math.min(P.from,x);break}}let k=Cre(a);if(a.some(P=>P.from==P.to||P.from==P.to-1&&i.doc.lineAt(P.from).to==P.from))s.add(M,M,kr.widget({widget:new fwe(k),diagnostics:a.slice()}));else{let P=a.reduce((F,j)=>j.markClass?F+" "+j.markClass:F,"");s.add(M,x,kr.mark({class:"cm-lintRange cm-lintRange-"+k+P,diagnostics:a.slice(),inclusiveEnd:a.some(F=>F.to>x)}))}c=x;for(let P=0;P<a.length;P++)a[P].to<=c&&a.splice(P--,1)}let h=s.finish();return new lb(h,t,Mx(h))}}function Mx(n,e=null,t=0){let i=null;return n.between(t,1e9,(r,o,{spec:s})=>{if(!(e&&s.diagnostics.indexOf(e)<0))if(!i)i=new LG(r,o,e||s.diagnostics[0]);else{if(s.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new LG(i.from,o,i.diagnostic)}}),i}function pre(n,e){let t=e.pos,i=e.end||t,r=n.state.facet(Og).hideOn(n,t,i);if(r!=null)return r;let o=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(s=>s.is(v6))||n.changes.touchesRange(o.from,Math.max(o.to,i)))}function mre(n,e){return n.field(bf,!1)?e:e.concat(ho.appendConfig.of(Mre))}function owe(n,e){return{effects:mre(n,[v6.of(e)])}}const v6=ho.define(),dK=ho.define(),gre=ho.define(),bf=pc.define({create(){return new lb(kr.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),i=null,r=n.panel;if(n.selected){let o=e.changes.mapPos(n.selected.from,1);i=Mx(t,n.selected.diagnostic,o)||Mx(t,null,o)}!t.size&&r&&e.state.facet(Og).autoPanel&&(r=null),n=new lb(t,r,i)}for(let t of e.effects)if(t.is(v6)){let i=e.state.facet(Og).autoPanel?t.value.length?M4.open:null:n.panel;n=lb.init(t.value,i,e.state)}else t.is(dK)?n=new lb(n.diagnostics,t.value?M4.open:null,n.selected):t.is(gre)&&(n=new lb(n.diagnostics,n.panel,t.value));return n},provide:n=>[y4.from(n,e=>e.panel),Ei.decorations.from(n,e=>e.diagnostics)]}),swe=kr.mark({class:"cm-lintRange cm-lintRange-active"});function awe(n,e,t){let{diagnostics:i}=n.state.field(bf),r,o=-1,s=-1;i.between(e-(t<0?1:0),e+(t>0?1:0),(c,h,{spec:m})=>{if(e>=c&&e<=h&&(c==h||(e>c||t>0)&&(e<h||t<0)))return r=m.diagnostics,o=c,s=h,!1});let a=n.state.facet(Og).tooltipFilter;return r&&a&&(r=a(r,n.state)),r?{pos:o,end:s,above:n.state.doc.lineAt(o).to<s,create(){return{dom:yre(n,r)}}}:null}function yre(n,e){return Ia("ul",{class:"cm-tooltip-lint"},e.map(t=>bre(n,t,!1)))}const lwe=n=>{let e=n.state.field(bf,!1);(!e||!e.panel)&&n.dispatch({effects:mre(n.state,[dK.of(!0)])});let t=g4(n,M4.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},FG=n=>{let e=n.state.field(bf,!1);return!e||!e.panel?!1:(n.dispatch({effects:dK.of(!1)}),!0)},uwe=n=>{let e=n.state.field(bf,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},cwe=[{key:"Mod-Shift-m",run:lwe,preventDefault:!0},{key:"F8",run:uwe}],Awe=bu.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(Og);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let n=Date.now();if(n<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(Og);t.length&&hwe(t.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(owe(this.view.state,i.reduce((r,o)=>r.concat(o))))},i=>{Dh(this.view.state,i)})}}update(n){let e=n.state.facet(Og);(n.docChanged||e!=n.startState.facet(Og)||e.needsRefresh&&e.needsRefresh(n))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function hwe(n,e,t){let i=[],r=-1;for(let o of n)o.then(s=>{i.push(s),clearTimeout(r),i.length==n.length?e(i):r=setTimeout(()=>e(i),200)},t)}const Og=Bi.define({combine(n){return{sources:n.map(e=>e.source).filter(e=>e!=null),...fm(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:zG,tooltipFilter:zG,needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t,hideOn:(e,t)=>e?t?(i,r,o)=>e(i,r,o)||t(i,r,o):e:t,autoPanel:(e,t)=>e||t})}}});function zG(n,e){return n?e?(t,i)=>e(n(t,i),i):n:e}function dwe(n,e={}){return[Og.of({source:n,config:e}),Awe,Mre]}function vre(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let r=t[i];if(/[a-zA-Z]/.test(r)&&!e.some(o=>o.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function bre(n,e,t){var i;let r=t?vre(e.actions):[];return Ia("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Ia("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((o,s)=>{let a=!1,c=x=>{if(x.preventDefault(),a)return;a=!0;let k=Mx(n.state.field(bf).diagnostics,e);k&&o.apply(n,k.from,k.to)},{name:h}=o,m=r[s]?h.indexOf(r[s]):-1,y=m<0?h:[h.slice(0,m),Ia("u",h.slice(m,m+1)),h.slice(m+1)],M=o.markClass?" "+o.markClass:"";return Ia("button",{type:"button",class:"cm-diagnosticAction"+M,onclick:c,onmousedown:c,"aria-label":` Action: ${h}${m<0?"":` (access key "${r[s]})"`}.`},y)}),e.source&&Ia("div",{class:"cm-diagnosticSource"},e.source))}class fwe extends Av{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Ia("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class jG{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=bre(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class M4{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)FG(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=vre(o.actions);for(let a=0;a<s.length;a++)if(s[a].toUpperCase().charCodeAt(0)==r.keyCode){let c=Mx(this.view.state.field(bf).diagnostics,o);c&&o.actions[a].apply(e,c.from,c.to)}}else return;r.preventDefault()},i=r=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(r.target)&&this.moveSelection(o)};this.list=Ia("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=Ia("div",{class:"cm-panel-lint"},this.list,Ia("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>FG(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(bf).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(bf),i=0,r=!1,o=null,s=new Set;for(e.between(0,this.view.state.doc.length,(a,c,{spec:h})=>{for(let m of h.diagnostics){if(s.has(m))continue;s.add(m);let y=-1,M;for(let x=i;x<this.items.length;x++)if(this.items[x].diagnostic==m){y=x;break}y<0?(M=new jG(this.view,m),this.items.splice(i,0,M),r=!0):(M=this.items[y],y>i&&(this.items.splice(i,y-i),r=!0)),t&&M.diagnostic==t.diagnostic?M.dom.hasAttribute("aria-selected")||(M.dom.setAttribute("aria-selected","true"),o=M):M.dom.hasAttribute("aria-selected")&&M.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new jG(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:c})=>{let h=c.height/this.list.offsetHeight;a.top<c.top?this.list.scrollTop-=(c.top-a.top)/h:a.bottom>c.bottom&&(this.list.scrollTop+=(a.bottom-c.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(bf),i=Mx(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:gre.of(i)})}static open(e){return new M4(e)}}function vw(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function TM(n){return vw(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const pwe=Ei.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:TM("#d11")},".cm-lintRange-warning":{backgroundImage:TM("orange")},".cm-lintRange-info":{backgroundImage:TM("#999")},".cm-lintRange-hint":{backgroundImage:TM("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function mwe(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function Cre(n){let e="hint",t=1;for(let i of n){let r=mwe(i.severity);r>t&&(t=r,e=i.severity)}return e}class _re extends jg{constructor(e){super(),this.diagnostics=e,this.severity=Cre(e)}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let i=this.diagnostics,r=e.state.facet(b6).tooltipFilter;return r&&(i=r(i,e.state)),i.length&&(t.onmouseover=()=>ywe(e,t,i)),t}}function gwe(n,e){let t=i=>{let r=e.getBoundingClientRect();if(!(i.clientX>r.left-10&&i.clientX<r.right+10&&i.clientY>r.top-10&&i.clientY<r.bottom+10)){for(let o=i.target;o;o=o.parentNode)if(o.nodeType==1&&o.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",t),n.state.field(xre)&&n.dispatch({effects:fK.of(null)})}};window.addEventListener("mousemove",t)}function ywe(n,e,t){function i(){let s=n.elementAtHeight(e.getBoundingClientRect().top+5-n.documentTop);n.coordsAtPos(s.from)&&n.dispatch({effects:fK.of({pos:s.from,above:!1,clip:!1,create(){return{dom:yre(n,t),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,gwe(n,e)}let{hoverTime:r}=n.state.facet(b6),o=setTimeout(i,r);e.onmouseout=()=>{clearTimeout(o),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(o),o=setTimeout(i,r)}}function vwe(n,e){let t=Object.create(null);for(let r of e){let o=n.lineAt(r.from);(t[o.from]||(t[o.from]=[])).push(r)}let i=[];for(let r in t)i.push(new _re(t[r]).range(+r));return rs.of(i,!0)}const bwe=Yne({class:"cm-gutter-lint",markers:n=>n.state.field(lD),widgetMarker:(n,e,t)=>{let i=[];return n.state.field(lD).between(t.from,t.to,(r,o,s)=>{r>t.from&&r<t.to&&i.push(...s.diagnostics)}),i.length?new _re(i):null}}),lD=pc.define({create(){return rs.empty},update(n,e){n=n.map(e.changes);let t=e.state.facet(b6).markerFilter;for(let i of e.effects)if(i.is(v6)){let r=i.value;t&&(r=t(r||[],e.state)),n=vwe(e.state.doc,r.slice(0))}return n}}),fK=ho.define(),xre=pc.define({create(){return null},update(n,e){return n&&e.docChanged&&(n=pre(e,n)?null:{...n,pos:e.changes.mapPos(n.pos)}),e.effects.reduce((t,i)=>i.is(fK)?i.value:t,n)},provide:n=>c6.from(n)}),Cwe=Ei.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:vw('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:vw('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:vw('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),Mre=[bf,Ei.decorations.compute([bf],n=>{let{selected:e,panel:t}=n.field(bf);return!e||!t||e.from==e.to?kr.none:kr.set([swe.range(e.from,e.to)])}),h3e(awe,{hideOn:pre}),pwe],b6=Bi.define({combine(n){return fm(n,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function _we(n={}){return[b6.of(n),lD,bwe,Cwe,xre]}const xwe=[_3e(),w3e(),G2e(),N4e(),p4e(),T2e(),K2e(),Cs.allowMultipleSelections.of(!0),t4e(),mie(v4e,{fallback:!0}),S4e(),qMe(),iwe(),t3e(),r3e(),V2e(),H5e(),$U.of([...HMe,...W5e,...pMe,...Z4e,...A4e,...fre,...cwe])];var NG={};class FS{constructor(e,t,i,r,o,s,a,c,h,m=0,y){this.p=e,this.stack=t,this.state=i,this.reducePos=r,this.pos=o,this.score=s,this.buffer=a,this.bufferBase=c,this.curContext=h,this.lookAhead=m,this.parent=y}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let r=e.parser.context;return new FS(e,[],t,i,i,0,[],0,r?new GG(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,r=e&65535,{parser:o}=this.p,s=this.reducePos<this.pos-25;s&&this.setLookAhead(this.pos);let a=o.dynamicPrecedence(r);if(a&&(this.score+=a),i==0){this.pushState(o.getGoto(this.state,r,!0),this.reducePos),r<o.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,s?8:4,!0),this.reduceContext(r,this.reducePos);return}let c=this.stack.length-(i-1)*3-(e&262144?6:0),h=c?this.stack[c-2]:this.p.ranges[0].from,m=this.reducePos-h;m>=2e3&&!(!((t=this.p.parser.nodeSet.types[r])===null||t===void 0)&&t.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=m):this.p.lastBigReductionSize<m&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=m));let y=c?this.stack[c-1]:0,M=this.bufferBase+this.buffer.length-y;if(r<o.minRepeatTerm||e&131072){let x=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,h,x,M+4,!0)}if(e&262144)this.state=this.stack[c];else{let x=this.stack[c-3];this.state=o.getGoto(x,r,!0)}for(;this.stack.length>c;)this.stack.pop();this.reduceContext(r,h)}storeNode(e,t,i,r=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let s=this,a=this.buffer.length;if(a==0&&s.parent&&(a=s.bufferBase-s.parent.bufferBase,s=s.parent),a>0&&s.buffer[a-4]==0&&s.buffer[a-1]>-1){if(t==i)return;if(s.buffer[a-2]>=t){s.buffer[a-2]=i;return}}}if(!o||this.pos==i)this.buffer.push(e,t,i,r);else{let s=this.buffer.length;if(s>0&&this.buffer[s-4]!=0){let a=!1;for(let c=s;c>0&&this.buffer[c-2]>i;c-=4)if(this.buffer[c-1]>=0){a=!0;break}if(a)for(;s>0&&this.buffer[s-2]>i;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,r>4&&(r-=4)}this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=i,this.buffer[s+3]=r}}shift(e,t,i,r){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let o=e,{parser:s}=this.p;(r>this.pos||t<=s.maxNode)&&(this.pos=r,s.stateFlag(o,1)||(this.reducePos=r)),this.pushState(o,i),this.shiftContext(t,i),t<=s.maxNode&&this.buffer.push(t,i,r,4)}else this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4)}apply(e,t,i,r){e&65536?this.reduce(e):this.shift(e,t,i,r)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new FS(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Mwe(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if((i&65536)==0)return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let o=0,s;o<t.length;o+=2)(s=t[o+1])!=this.state&&this.p.parser.hasAction(s,e)&&r.push(t[o],s);if(this.stack.length<120)for(let o=0;r.length<8&&o<t.length;o+=2){let s=t[o+1];r.some((a,c)=>c&1&&a==s)||r.push(t[o],s)}t=r}let i=[];for(let r=0;r<t.length&&i.length<4;r+=2){let o=t[r+1];if(o==this.state)continue;let s=this.split();s.pushState(o,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(t[r],this.pos),s.reducePos=this.pos,s.score-=200,i.push(s)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let i=t>>19,r=t&65535,o=this.stack.length-i*3;if(o<0||e.getGoto(this.stack[o],r,!1)<0){let s=this.findForcedReduction();if(s==null)return!1;t=s}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(r,o)=>{if(!t.includes(r))return t.push(r),e.allActions(r,s=>{if(!(s&393216))if(s&65536){let a=(s>>19)-o;if(a>1){let c=s&65535,h=this.stack.length-a*3;if(h>=0&&e.getGoto(this.stack[h],c,!1)>=0)return a<<19|65536|c}}else{let a=i(s,o+1);if(a!=null)return a}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new GG(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class GG{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class Mwe{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class zS{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new zS(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new zS(this.stack,this.pos,this.index)}}function RM(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,r=0;i<n.length;){let o=0;for(;;){let s=n.charCodeAt(i++),a=!1;if(s==126){o=65535;break}s>=92&&s--,s>=34&&s--;let c=s-32;if(c>=46&&(c-=46,a=!0),o+=c,a)break;o*=46}t?t[r++]=o:t=new e(o)}return t}class bw{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const WG=new bw;class wwe{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=WG,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,r=this.rangeIndex,o=this.pos+e;for(;o<i.from;){if(!r)return null;let s=this.ranges[--r];o-=i.from-s.to,i=s}for(;t<0?o>i.to:o>=i.to;){if(r==this.ranges.length-1)return null;let s=this.ranges[++r];o+=s.from-i.to,i=s}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,r;if(t>=0&&t<this.chunk.length)i=this.pos+e,r=this.chunk.charCodeAt(t);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(i=o,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let s=this.rangeIndex,a=this.range;for(;a.to<=i;)a=this.ranges[++s];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=WG,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return i}}class H_{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;Swe(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}H_.prototype.contextual=H_.prototype.fallback=H_.prototype.extend=!1;H_.prototype.fallback=H_.prototype.extend=!1;function Swe(n,e,t,i,r,o){let s=0,a=1<<i,{dialect:c}=t.p.parser;e:for(;(a&n[s])!=0;){let h=n[s+1];for(let x=s+3;x<h;x+=2)if((n[x+1]&a)>0){let k=n[x];if(c.allows(k)&&(e.token.value==-1||e.token.value==k||Ewe(k,e.token.value,r,o))){e.acceptToken(k);break}}let m=e.next,y=0,M=n[s+2];if(e.next<0&&M>y&&n[h+M*3-3]==65535){s=n[h+M*3-1];continue e}for(;y<M;){let x=y+M>>1,k=h+x+(x<<1),P=n[k],F=n[k+1]||65536;if(m<P)M=x;else if(m>=F)y=x+1;else{s=n[k+2],e.advance();continue e}}break}}function QG(n,e,t){for(let i=e,r;(r=n[i])!=65535;i++)if(r==t)return i-e;return-1}function Ewe(n,e,t,i){let r=QG(t,i,e);return r<0||QG(t,i,n)<r}const lf=typeof process<"u"&&NG&&/\bparse\b/.test(NG.LOG);let HB=null;function qG(n,e,t){let i=n.cursor(qc.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class Owe{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?qG(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?qG(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],r=this.index[t];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=i.children[r],s=this.start[t]+i.positions[r];if(s>e)return this.nextStart=s,null;if(o instanceof Vu){if(s==e){if(s<this.safeFrom)return null;let a=s+o.length;if(a<=this.safeTo){let c=o.prop(ko.lookAhead);if(!c||a+c<this.fragment.to)return o}}this.index[t]++,s+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+o.length}}}class Bwe{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new bw)}getActions(e){let t=0,i=null,{parser:r}=e.p,{tokenizers:o}=r,s=r.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,c=0;for(let h=0;h<o.length;h++){if((1<<h&s)==0)continue;let m=o[h],y=this.tokens[h];if(!(i&&!m.fallback)&&((m.contextual||y.start!=e.pos||y.mask!=s||y.context!=a)&&(this.updateCachedToken(y,m,e),y.mask=s,y.context=a),y.lookAhead>y.end+25&&(c=Math.max(y.lookAhead,c)),y.value!=0)){let M=t;if(y.extended>-1&&(t=this.addActions(e,y.extended,y.end,t)),t=this.addActions(e,y.value,y.end,t),!m.extend&&(i=y,t>M))break}}for(;this.actions.length>t;)this.actions.pop();return c&&e.setLookAhead(c),!i&&e.pos==this.stream.end&&(i=new bw,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new bw,{pos:i,p:r}=e;return t.start=i,t.end=Math.min(i+1,r.stream.end),t.value=i==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,i){let r=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(r,e),i),e.value>-1){let{parser:o}=i.p;for(let s=0;s<o.specialized.length;s++)if(o.specialized[s]==e.value){let a=o.specializers[s](this.stream.read(e.start,e.end),i);if(a>=0&&i.p.parser.dialect.allows(a>>1)){(a&1)==0?e.value=a>>1:e.extended=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,i,r){for(let o=0;o<r;o+=3)if(this.actions[o]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=i,r}addActions(e,t,i,r){let{state:o}=e,{parser:s}=e.p,{data:a}=s;for(let c=0;c<2;c++)for(let h=s.stateSlot(o,c?2:1);;h+=3){if(a[h]==65535)if(a[h+1]==1)h=J0(a,h+2);else{r==0&&a[h+1]==2&&(r=this.putAction(J0(a,h+2),t,i,r));break}a[h]==t&&(r=this.putAction(J0(a,h+1),t,i,r))}return r}}class Iwe{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new wwe(t,r),this.tokens=new Bwe(e,this.stream),this.topTerm=e.top[1];let{from:o}=r[0];this.stacks=[FS.start(this,e.top[0],o)],this.fragments=i.length&&this.stream.end-o>e.bufferLength*4?new Owe(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],r,o;if(this.bigReductionCount>300&&e.length==1){let[s]=e;for(;s.forceReduce()&&s.stack.length&&s.stack[s.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let s=0;s<e.length;s++){let a=e[s];for(;;){if(this.tokens.mainToken=null,a.pos>t)i.push(a);else{if(this.advanceStack(a,i,e))continue;{r||(r=[],o=[]),r.push(a);let c=this.tokens.getMainToken(a);o.push(c.value,c.end)}}break}}if(!i.length){let s=r&&Twe(r);if(s)return lf&&console.log("Finish with "+this.stackID(s)),this.stackToTree(s);if(this.parser.strict)throw lf&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&r){let s=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,o,i);if(s)return lf&&console.log("Force-finish "+this.stackID(s)),this.stackToTree(s.forceAll())}if(this.recovering){let s=this.recovering==1?1:this.recovering*3;if(i.length>s)for(i.sort((a,c)=>c.score-a.score);i.length>s;)i.pop();i.some(a=>a.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let s=0;s<i.length-1;s++){let a=i[s];for(let c=s+1;c<i.length;c++){let h=i[c];if(a.sameState(h)||a.buffer.length>500&&h.buffer.length>500)if((a.score-h.score||a.buffer.length-h.buffer.length)>0)i.splice(c--,1);else{i.splice(s--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let s=1;s<i.length;s++)i[s].pos<this.minStackPos&&(this.minStackPos=i[s].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let r=e.pos,{parser:o}=this,s=lf?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,m=h?e.curContext.hash:0;for(let y=this.fragments.nodeAt(r);y;){let M=this.parser.nodeSet.types[y.type.id]==y.type?o.getGoto(e.state,y.type.id):-1;if(M>-1&&y.length&&(!h||(y.prop(ko.contextHash)||0)==m))return e.useNode(y,M),lf&&console.log(s+this.stackID(e)+` (via reuse of ${o.getName(y.type.id)})`),!0;if(!(y instanceof Vu)||y.children.length==0||y.positions[0]>0)break;let x=y.children[0];if(x instanceof Vu&&y.positions[0]==0)y=x;else break}}let a=o.stateSlot(e.state,4);if(a>0)return e.reduce(a),lf&&console.log(s+this.stackID(e)+` (via always-reduce ${o.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let c=this.tokens.getActions(e);for(let h=0;h<c.length;){let m=c[h++],y=c[h++],M=c[h++],x=h==c.length||!i,k=x?e:e.split(),P=this.tokens.mainToken;if(k.apply(m,y,P?P.start:k.pos,M),lf&&console.log(s+this.stackID(k)+` (via ${(m&65536)==0?"shift":`reduce of ${o.getName(m&65535)}`} for ${o.getName(y)} @ ${r}${k==e?"":", split"})`),x)return!0;k.pos>r?t.push(k):i.push(k)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return YG(e,t),!0}}runRecovery(e,t,i){let r=null,o=!1;for(let s=0;s<e.length;s++){let a=e[s],c=t[s<<1],h=t[(s<<1)+1],m=lf?this.stackID(a)+" -> ":"";if(a.deadEnd&&(o||(o=!0,a.restart(),lf&&console.log(m+this.stackID(a)+" (restarted)"),this.advanceFully(a,i))))continue;let y=a.split(),M=m;for(let x=0;y.forceReduce()&&x<10&&(lf&&console.log(M+this.stackID(y)+" (via force-reduce)"),!this.advanceFully(y,i));x++)lf&&(M=this.stackID(y)+" -> ");for(let x of a.recoverByInsert(c))lf&&console.log(m+this.stackID(x)+" (via recover-insert)"),this.advanceFully(x,i);this.stream.end>a.pos?(h==a.pos&&(h++,c=0),a.recoverByDelete(c,h),lf&&console.log(m+this.stackID(a)+` (via recover-delete ${this.parser.getName(c)})`),YG(a,i)):(!r||r.score<a.score)&&(r=a)}return r}stackToTree(e){return e.close(),Vu.build({buffer:zS.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(HB||(HB=new WeakMap)).get(e);return t||HB.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function YG(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class kwe{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class jS extends eie{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let i=Object.keys(e.topRules).map(a=>e.topRules[a][1]),r=[];for(let a=0;a<t.length;a++)r.push([]);function o(a,c,h){r[a].push([c,c.deserialize(String(h))])}if(e.nodeProps)for(let a of e.nodeProps){let c=a[0];typeof c=="string"&&(c=ko[c]);for(let h=1;h<a.length;){let m=a[h++];if(m>=0)o(m,c,a[h++]);else{let y=a[h+-m];for(let M=-m;M>0;M--)o(a[h++],c,y);h++}}}this.nodeSet=new HU(t.map((a,c)=>xd.define({name:c>=this.minRepeatTerm?void 0:a,id:c,props:r[c],top:i.indexOf(c)>-1,error:c==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(c)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Hne;let s=RM(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map($G),this.states=RM(e.states,Uint32Array),this.data=RM(e.stateData),this.goto=RM(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new H_(s,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let r=new Iwe(this,e,t,i);for(let o of this.wrappers)r=o(r,e,t,i);return r}getGoto(e,t,i=!1){let r=this.goto;if(t>=r[0])return-1;for(let o=r[t+1];;){let s=r[o++],a=s&1,c=r[o++];if(a&&i)return c;for(let h=o+(s>>1);o<h;o++)if(r[o]==e)return c;if(a)return-1}}hasAction(e,t){let i=this.data;for(let r=0;r<2;r++)for(let o=this.stateSlot(e,r?2:1),s;;o+=3){if((s=i[o])==65535)if(i[o+1]==1)s=i[o=J0(i,o+2)];else{if(i[o+1]==2)return J0(i,o+2);break}if(s==t||s==0)return J0(i,o+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),r=i?t(i):void 0;for(let o=this.stateSlot(e,1);r==null;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=J0(this.data,o+2);else break;r=t(J0(this.data,o+1))}return r}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=J0(this.data,i+2);else break;if((this.data[i+2]&1)==0){let r=this.data[i+1];t.some((o,s)=>s&1&&o==r)||t.push(this.data[i],r)}}return t}configure(e){let t=Object.assign(Object.create(jS.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let r=e.tokenizers.find(o=>o.from==i);return r?r.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,r)=>{let o=e.specializers.find(a=>a.from==i.external);if(!o)return i;let s=Object.assign(Object.assign({},i),{external:o.to});return t.specializers[r]=$G(s),s})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let o of e.split(" ")){let s=t.indexOf(o);s>=0&&(i[s]=!0)}let r=null;for(let o=0;o<t.length;o++)if(!i[o])for(let s=this.dialects[t[o]],a;(a=this.data[s++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[a]=1;return new kwe(e,i,r)}static deserialize(e){return new jS(e)}}function J0(n,e){return n[e]|n[e+1]<<16}function Twe(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function $G(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const Rwe=tie({String:un.string,Number:un.number,"True False":un.bool,PropertyName:un.propertyName,Null:un.null,", :":un.separator,"[ ]":un.squareBracket,"{ }":un.brace}),Dwe=jS.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[Rwe],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),Pwe=()=>n=>{try{JSON.parse(n.state.doc.toString())}catch(e){if(!(e instanceof SyntaxError))throw e;const t=Uwe(e,n.state.doc);return[{from:t,message:e.message,severity:"error",to:t}]}return[]};function Uwe(n,e){let t;return(t=n.message.match(/at position (\d+)/))?Math.min(+t[1],e.length):(t=n.message.match(/at line (\d+) column (\d+)/))?Math.min(e.line(+t[1]).from+ +t[2]-1,e.length):0}const Kwe=SS.define({name:"json",parser:Dwe.configure({props:[oie.add({Object:hG({except:/^\s*\}/}),Array:hG({except:/^\s*\]/})}),aie.add({"Object Array":i4e})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Lwe(){return new Q3e(Kwe)}const Fwe="#e5c07b",VG="#e06c75",zwe="#56b6c2",jwe="#ffffff",Cw="#abb2bf",uD="#7d8799",Nwe="#61afef",Gwe="#98c379",HG="#d19a66",Wwe="#c678dd",Qwe="#21252b",ZG="#2c313a",XG="#282c34",ZB="#353a42",qwe="#3E4451",JG="#528bff",Ywe=Ei.theme({"&":{color:Cw,backgroundColor:XG},".cm-content":{caretColor:JG},".cm-cursor, .cm-dropCursor":{borderLeftColor:JG},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:qwe},".cm-panels":{backgroundColor:Qwe,color:Cw},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:XG,color:uD,border:"none"},".cm-activeLineGutter":{backgroundColor:ZG},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:ZB},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:ZB,borderBottomColor:ZB},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:ZG,color:Cw}}},{dark:!0}),$we=C5.define([{tag:un.keyword,color:Wwe},{tag:[un.name,un.deleted,un.character,un.propertyName,un.macroName],color:VG},{tag:[un.function(un.variableName),un.labelName],color:Nwe},{tag:[un.color,un.constant(un.name),un.standard(un.name)],color:HG},{tag:[un.definition(un.name),un.separator],color:Cw},{tag:[un.typeName,un.className,un.number,un.changed,un.annotation,un.modifier,un.self,un.namespace],color:Fwe},{tag:[un.operator,un.operatorKeyword,un.url,un.escape,un.regexp,un.link,un.special(un.string)],color:zwe},{tag:[un.meta,un.comment],color:uD},{tag:un.strong,fontWeight:"bold"},{tag:un.emphasis,fontStyle:"italic"},{tag:un.strikethrough,textDecoration:"line-through"},{tag:un.link,color:uD,textDecoration:"underline"},{tag:un.heading,fontWeight:"bold",color:VG},{tag:[un.atom,un.bool,un.special(un.variableName)],color:HG},{tag:[un.processingInstruction,un.string,un.inserted],color:Gwe},{tag:un.invalid,color:jwe}]),Vwe=[Ywe,mie($we)];var _w={exports:{}},Hwe=_w.exports,eW;function Zwe(){return eW||(eW=1,(function(n,e){(function(t,i){n.exports=i()})(Hwe,(function(){var t=typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function i(Te,Se){return Se={exports:{}},Te(Se,Se.exports),Se.exports}var r=i(function(Te){function Se(){var Ne=0,ut=1,rt=2,pt=3,Dt=4,Ot=5,Jt=6,Tn=7,Ln=8,ii=9,wn=10,Rn=11,gn=12,Yn=13,Dn=14,Tt=15,_e=16,oe=17,ee=0,ne=1,ue=2,ye=3,Ue=4;function Ve(v,yt){return 55296<=v.charCodeAt(yt)&&v.charCodeAt(yt)<=56319&&56320<=v.charCodeAt(yt+1)&&v.charCodeAt(yt+1)<=57343}function lt(v,yt){yt===void 0&&(yt=0);var Mt=v.charCodeAt(yt);if(55296<=Mt&&Mt<=56319&&yt<v.length-1){var Pt=Mt,st=v.charCodeAt(yt+1);return 56320<=st&&st<=57343?(Pt-55296)*1024+(st-56320)+65536:Pt}if(56320<=Mt&&Mt<=57343&&yt>=1){var Pt=v.charCodeAt(yt-1),st=Mt;return 55296<=Pt&&Pt<=56319?(Pt-55296)*1024+(st-56320)+65536:st}return Mt}function ge(v,yt,Mt){var Pt=[v].concat(yt).concat([Mt]),st=Pt[Pt.length-2],fn=Mt,Fn=Pt.lastIndexOf(Dn);if(Fn>1&&Pt.slice(1,Fn).every(function(Zn){return Zn==pt})&&[pt,Yn,oe].indexOf(v)==-1)return ue;var pn=Pt.lastIndexOf(Dt);if(pn>0&&Pt.slice(1,pn).every(function(Zn){return Zn==Dt})&&[gn,Dt].indexOf(st)==-1)return Pt.filter(function(Zn){return Zn==Dt}).length%2==1?ye:Ue;if(st==Ne&&fn==ut)return ee;if(st==rt||st==Ne||st==ut)return fn==Dn&&yt.every(function(Zn){return Zn==pt})?ue:ne;if(fn==rt||fn==Ne||fn==ut)return ne;if(st==Jt&&(fn==Jt||fn==Tn||fn==ii||fn==wn))return ee;if((st==ii||st==Tn)&&(fn==Tn||fn==Ln))return ee;if((st==wn||st==Ln)&&fn==Ln)return ee;if(fn==pt||fn==Tt)return ee;if(fn==Ot)return ee;if(st==gn)return ee;var $n=Pt.indexOf(pt)!=-1?Pt.lastIndexOf(pt)-1:Pt.length-2;return[Yn,oe].indexOf(Pt[$n])!=-1&&Pt.slice($n+1,-1).every(function(Zn){return Zn==pt})&&fn==Dn||st==Tt&&[_e,oe].indexOf(fn)!=-1?ee:yt.indexOf(Dt)!=-1?ue:st==Dt&&fn==Dt?ee:ne}this.nextBreak=function(v,yt){if(yt===void 0&&(yt=0),yt<0)return 0;if(yt>=v.length-1)return v.length;for(var Mt=Be(lt(v,yt)),Pt=[],st=yt+1;st<v.length;st++)if(!Ve(v,st-1)){var fn=Be(lt(v,st));if(ge(Mt,Pt,fn))return st;Pt.push(fn)}return v.length},this.splitGraphemes=function(v){for(var yt=[],Mt=0,Pt;(Pt=this.nextBreak(v,Mt))<v.length;)yt.push(v.slice(Mt,Pt)),Mt=Pt;return Mt<v.length&&yt.push(v.slice(Mt)),yt},this.iterateGraphemes=function(v){var yt=0,Mt={next:(function(){var Pt,st;return(st=this.nextBreak(v,yt))<v.length?(Pt=v.slice(yt,st),yt=st,{value:Pt,done:!1}):yt<v.length?(Pt=v.slice(yt),yt=v.length,{value:Pt,done:!1}):{value:void 0,done:!0}}).bind(this)};return typeof Symbol<"u"&&Symbol.iterator&&(Mt[Symbol.iterator]=function(){return Mt}),Mt},this.countGraphemes=function(v){for(var yt=0,Mt=0,Pt;(Pt=this.nextBreak(v,Mt))<v.length;)Mt=Pt,yt++;return Mt<v.length&&yt++,yt};function Be(v){return 1536<=v&&v<=1541||v==1757||v==1807||v==2274||v==3406||v==69821||70082<=v&&v<=70083||v==72250||72326<=v&&v<=72329||v==73030?gn:v==13?Ne:v==10?ut:0<=v&&v<=9||11<=v&&v<=12||14<=v&&v<=31||127<=v&&v<=159||v==173||v==1564||v==6158||v==8203||8206<=v&&v<=8207||v==8232||v==8233||8234<=v&&v<=8238||8288<=v&&v<=8292||v==8293||8294<=v&&v<=8303||55296<=v&&v<=57343||v==65279||65520<=v&&v<=65528||65529<=v&&v<=65531||113824<=v&&v<=113827||119155<=v&&v<=119162||v==917504||v==917505||917506<=v&&v<=917535||917632<=v&&v<=917759||918e3<=v&&v<=921599?rt:768<=v&&v<=879||1155<=v&&v<=1159||1160<=v&&v<=1161||1425<=v&&v<=1469||v==1471||1473<=v&&v<=1474||1476<=v&&v<=1477||v==1479||1552<=v&&v<=1562||1611<=v&&v<=1631||v==1648||1750<=v&&v<=1756||1759<=v&&v<=1764||1767<=v&&v<=1768||1770<=v&&v<=1773||v==1809||1840<=v&&v<=1866||1958<=v&&v<=1968||2027<=v&&v<=2035||2070<=v&&v<=2073||2075<=v&&v<=2083||2085<=v&&v<=2087||2089<=v&&v<=2093||2137<=v&&v<=2139||2260<=v&&v<=2273||2275<=v&&v<=2306||v==2362||v==2364||2369<=v&&v<=2376||v==2381||2385<=v&&v<=2391||2402<=v&&v<=2403||v==2433||v==2492||v==2494||2497<=v&&v<=2500||v==2509||v==2519||2530<=v&&v<=2531||2561<=v&&v<=2562||v==2620||2625<=v&&v<=2626||2631<=v&&v<=2632||2635<=v&&v<=2637||v==2641||2672<=v&&v<=2673||v==2677||2689<=v&&v<=2690||v==2748||2753<=v&&v<=2757||2759<=v&&v<=2760||v==2765||2786<=v&&v<=2787||2810<=v&&v<=2815||v==2817||v==2876||v==2878||v==2879||2881<=v&&v<=2884||v==2893||v==2902||v==2903||2914<=v&&v<=2915||v==2946||v==3006||v==3008||v==3021||v==3031||v==3072||3134<=v&&v<=3136||3142<=v&&v<=3144||3146<=v&&v<=3149||3157<=v&&v<=3158||3170<=v&&v<=3171||v==3201||v==3260||v==3263||v==3266||v==3270||3276<=v&&v<=3277||3285<=v&&v<=3286||3298<=v&&v<=3299||3328<=v&&v<=3329||3387<=v&&v<=3388||v==3390||3393<=v&&v<=3396||v==3405||v==3415||3426<=v&&v<=3427||v==3530||v==3535||3538<=v&&v<=3540||v==3542||v==3551||v==3633||3636<=v&&v<=3642||3655<=v&&v<=3662||v==3761||3764<=v&&v<=3769||3771<=v&&v<=3772||3784<=v&&v<=3789||3864<=v&&v<=3865||v==3893||v==3895||v==3897||3953<=v&&v<=3966||3968<=v&&v<=3972||3974<=v&&v<=3975||3981<=v&&v<=3991||3993<=v&&v<=4028||v==4038||4141<=v&&v<=4144||4146<=v&&v<=4151||4153<=v&&v<=4154||4157<=v&&v<=4158||4184<=v&&v<=4185||4190<=v&&v<=4192||4209<=v&&v<=4212||v==4226||4229<=v&&v<=4230||v==4237||v==4253||4957<=v&&v<=4959||5906<=v&&v<=5908||5938<=v&&v<=5940||5970<=v&&v<=5971||6002<=v&&v<=6003||6068<=v&&v<=6069||6071<=v&&v<=6077||v==6086||6089<=v&&v<=6099||v==6109||6155<=v&&v<=6157||6277<=v&&v<=6278||v==6313||6432<=v&&v<=6434||6439<=v&&v<=6440||v==6450||6457<=v&&v<=6459||6679<=v&&v<=6680||v==6683||v==6742||6744<=v&&v<=6750||v==6752||v==6754||6757<=v&&v<=6764||6771<=v&&v<=6780||v==6783||6832<=v&&v<=6845||v==6846||6912<=v&&v<=6915||v==6964||6966<=v&&v<=6970||v==6972||v==6978||7019<=v&&v<=7027||7040<=v&&v<=7041||7074<=v&&v<=7077||7080<=v&&v<=7081||7083<=v&&v<=7085||v==7142||7144<=v&&v<=7145||v==7149||7151<=v&&v<=7153||7212<=v&&v<=7219||7222<=v&&v<=7223||7376<=v&&v<=7378||7380<=v&&v<=7392||7394<=v&&v<=7400||v==7405||v==7412||7416<=v&&v<=7417||7616<=v&&v<=7673||7675<=v&&v<=7679||v==8204||8400<=v&&v<=8412||8413<=v&&v<=8416||v==8417||8418<=v&&v<=8420||8421<=v&&v<=8432||11503<=v&&v<=11505||v==11647||11744<=v&&v<=11775||12330<=v&&v<=12333||12334<=v&&v<=12335||12441<=v&&v<=12442||v==42607||42608<=v&&v<=42610||42612<=v&&v<=42621||42654<=v&&v<=42655||42736<=v&&v<=42737||v==43010||v==43014||v==43019||43045<=v&&v<=43046||43204<=v&&v<=43205||43232<=v&&v<=43249||43302<=v&&v<=43309||43335<=v&&v<=43345||43392<=v&&v<=43394||v==43443||43446<=v&&v<=43449||v==43452||v==43493||43561<=v&&v<=43566||43569<=v&&v<=43570||43573<=v&&v<=43574||v==43587||v==43596||v==43644||v==43696||43698<=v&&v<=43700||43703<=v&&v<=43704||43710<=v&&v<=43711||v==43713||43756<=v&&v<=43757||v==43766||v==44005||v==44008||v==44013||v==64286||65024<=v&&v<=65039||65056<=v&&v<=65071||65438<=v&&v<=65439||v==66045||v==66272||66422<=v&&v<=66426||68097<=v&&v<=68099||68101<=v&&v<=68102||68108<=v&&v<=68111||68152<=v&&v<=68154||v==68159||68325<=v&&v<=68326||v==69633||69688<=v&&v<=69702||69759<=v&&v<=69761||69811<=v&&v<=69814||69817<=v&&v<=69818||69888<=v&&v<=69890||69927<=v&&v<=69931||69933<=v&&v<=69940||v==70003||70016<=v&&v<=70017||70070<=v&&v<=70078||70090<=v&&v<=70092||70191<=v&&v<=70193||v==70196||70198<=v&&v<=70199||v==70206||v==70367||70371<=v&&v<=70378||70400<=v&&v<=70401||v==70460||v==70462||v==70464||v==70487||70502<=v&&v<=70508||70512<=v&&v<=70516||70712<=v&&v<=70719||70722<=v&&v<=70724||v==70726||v==70832||70835<=v&&v<=70840||v==70842||v==70845||70847<=v&&v<=70848||70850<=v&&v<=70851||v==71087||71090<=v&&v<=71093||71100<=v&&v<=71101||71103<=v&&v<=71104||71132<=v&&v<=71133||71219<=v&&v<=71226||v==71229||71231<=v&&v<=71232||v==71339||v==71341||71344<=v&&v<=71349||v==71351||71453<=v&&v<=71455||71458<=v&&v<=71461||71463<=v&&v<=71467||72193<=v&&v<=72198||72201<=v&&v<=72202||72243<=v&&v<=72248||72251<=v&&v<=72254||v==72263||72273<=v&&v<=72278||72281<=v&&v<=72283||72330<=v&&v<=72342||72344<=v&&v<=72345||72752<=v&&v<=72758||72760<=v&&v<=72765||v==72767||72850<=v&&v<=72871||72874<=v&&v<=72880||72882<=v&&v<=72883||72885<=v&&v<=72886||73009<=v&&v<=73014||v==73018||73020<=v&&v<=73021||73023<=v&&v<=73029||v==73031||92912<=v&&v<=92916||92976<=v&&v<=92982||94095<=v&&v<=94098||113821<=v&&v<=113822||v==119141||119143<=v&&v<=119145||119150<=v&&v<=119154||119163<=v&&v<=119170||119173<=v&&v<=119179||119210<=v&&v<=119213||119362<=v&&v<=119364||121344<=v&&v<=121398||121403<=v&&v<=121452||v==121461||v==121476||121499<=v&&v<=121503||121505<=v&&v<=121519||122880<=v&&v<=122886||122888<=v&&v<=122904||122907<=v&&v<=122913||122915<=v&&v<=122916||122918<=v&&v<=122922||125136<=v&&v<=125142||125252<=v&&v<=125258||917536<=v&&v<=917631||917760<=v&&v<=917999?pt:127462<=v&&v<=127487?Dt:v==2307||v==2363||2366<=v&&v<=2368||2377<=v&&v<=2380||2382<=v&&v<=2383||2434<=v&&v<=2435||2495<=v&&v<=2496||2503<=v&&v<=2504||2507<=v&&v<=2508||v==2563||2622<=v&&v<=2624||v==2691||2750<=v&&v<=2752||v==2761||2763<=v&&v<=2764||2818<=v&&v<=2819||v==2880||2887<=v&&v<=2888||2891<=v&&v<=2892||v==3007||3009<=v&&v<=3010||3014<=v&&v<=3016||3018<=v&&v<=3020||3073<=v&&v<=3075||3137<=v&&v<=3140||3202<=v&&v<=3203||v==3262||3264<=v&&v<=3265||3267<=v&&v<=3268||3271<=v&&v<=3272||3274<=v&&v<=3275||3330<=v&&v<=3331||3391<=v&&v<=3392||3398<=v&&v<=3400||3402<=v&&v<=3404||3458<=v&&v<=3459||3536<=v&&v<=3537||3544<=v&&v<=3550||3570<=v&&v<=3571||v==3635||v==3763||3902<=v&&v<=3903||v==3967||v==4145||4155<=v&&v<=4156||4182<=v&&v<=4183||v==4228||v==6070||6078<=v&&v<=6085||6087<=v&&v<=6088||6435<=v&&v<=6438||6441<=v&&v<=6443||6448<=v&&v<=6449||6451<=v&&v<=6456||6681<=v&&v<=6682||v==6741||v==6743||6765<=v&&v<=6770||v==6916||v==6965||v==6971||6973<=v&&v<=6977||6979<=v&&v<=6980||v==7042||v==7073||7078<=v&&v<=7079||v==7082||v==7143||7146<=v&&v<=7148||v==7150||7154<=v&&v<=7155||7204<=v&&v<=7211||7220<=v&&v<=7221||v==7393||7410<=v&&v<=7411||v==7415||43043<=v&&v<=43044||v==43047||43136<=v&&v<=43137||43188<=v&&v<=43203||43346<=v&&v<=43347||v==43395||43444<=v&&v<=43445||43450<=v&&v<=43451||43453<=v&&v<=43456||43567<=v&&v<=43568||43571<=v&&v<=43572||v==43597||v==43755||43758<=v&&v<=43759||v==43765||44003<=v&&v<=44004||44006<=v&&v<=44007||44009<=v&&v<=44010||v==44012||v==69632||v==69634||v==69762||69808<=v&&v<=69810||69815<=v&&v<=69816||v==69932||v==70018||70067<=v&&v<=70069||70079<=v&&v<=70080||70188<=v&&v<=70190||70194<=v&&v<=70195||v==70197||70368<=v&&v<=70370||70402<=v&&v<=70403||v==70463||70465<=v&&v<=70468||70471<=v&&v<=70472||70475<=v&&v<=70477||70498<=v&&v<=70499||70709<=v&&v<=70711||70720<=v&&v<=70721||v==70725||70833<=v&&v<=70834||v==70841||70843<=v&&v<=70844||v==70846||v==70849||71088<=v&&v<=71089||71096<=v&&v<=71099||v==71102||71216<=v&&v<=71218||71227<=v&&v<=71228||v==71230||v==71340||71342<=v&&v<=71343||v==71350||71456<=v&&v<=71457||v==71462||72199<=v&&v<=72200||v==72249||72279<=v&&v<=72280||v==72343||v==72751||v==72766||v==72873||v==72881||v==72884||94033<=v&&v<=94078||v==119142||v==119149?Ot:4352<=v&&v<=4447||43360<=v&&v<=43388?Jt:4448<=v&&v<=4519||55216<=v&&v<=55238?Tn:4520<=v&&v<=4607||55243<=v&&v<=55291?Ln:v==44032||v==44060||v==44088||v==44116||v==44144||v==44172||v==44200||v==44228||v==44256||v==44284||v==44312||v==44340||v==44368||v==44396||v==44424||v==44452||v==44480||v==44508||v==44536||v==44564||v==44592||v==44620||v==44648||v==44676||v==44704||v==44732||v==44760||v==44788||v==44816||v==44844||v==44872||v==44900||v==44928||v==44956||v==44984||v==45012||v==45040||v==45068||v==45096||v==45124||v==45152||v==45180||v==45208||v==45236||v==45264||v==45292||v==45320||v==45348||v==45376||v==45404||v==45432||v==45460||v==45488||v==45516||v==45544||v==45572||v==45600||v==45628||v==45656||v==45684||v==45712||v==45740||v==45768||v==45796||v==45824||v==45852||v==45880||v==45908||v==45936||v==45964||v==45992||v==46020||v==46048||v==46076||v==46104||v==46132||v==46160||v==46188||v==46216||v==46244||v==46272||v==46300||v==46328||v==46356||v==46384||v==46412||v==46440||v==46468||v==46496||v==46524||v==46552||v==46580||v==46608||v==46636||v==46664||v==46692||v==46720||v==46748||v==46776||v==46804||v==46832||v==46860||v==46888||v==46916||v==46944||v==46972||v==47e3||v==47028||v==47056||v==47084||v==47112||v==47140||v==47168||v==47196||v==47224||v==47252||v==47280||v==47308||v==47336||v==47364||v==47392||v==47420||v==47448||v==47476||v==47504||v==47532||v==47560||v==47588||v==47616||v==47644||v==47672||v==47700||v==47728||v==47756||v==47784||v==47812||v==47840||v==47868||v==47896||v==47924||v==47952||v==47980||v==48008||v==48036||v==48064||v==48092||v==48120||v==48148||v==48176||v==48204||v==48232||v==48260||v==48288||v==48316||v==48344||v==48372||v==48400||v==48428||v==48456||v==48484||v==48512||v==48540||v==48568||v==48596||v==48624||v==48652||v==48680||v==48708||v==48736||v==48764||v==48792||v==48820||v==48848||v==48876||v==48904||v==48932||v==48960||v==48988||v==49016||v==49044||v==49072||v==49100||v==49128||v==49156||v==49184||v==49212||v==49240||v==49268||v==49296||v==49324||v==49352||v==49380||v==49408||v==49436||v==49464||v==49492||v==49520||v==49548||v==49576||v==49604||v==49632||v==49660||v==49688||v==49716||v==49744||v==49772||v==49800||v==49828||v==49856||v==49884||v==49912||v==49940||v==49968||v==49996||v==50024||v==50052||v==50080||v==50108||v==50136||v==50164||v==50192||v==50220||v==50248||v==50276||v==50304||v==50332||v==50360||v==50388||v==50416||v==50444||v==50472||v==50500||v==50528||v==50556||v==50584||v==50612||v==50640||v==50668||v==50696||v==50724||v==50752||v==50780||v==50808||v==50836||v==50864||v==50892||v==50920||v==50948||v==50976||v==51004||v==51032||v==51060||v==51088||v==51116||v==51144||v==51172||v==51200||v==51228||v==51256||v==51284||v==51312||v==51340||v==51368||v==51396||v==51424||v==51452||v==51480||v==51508||v==51536||v==51564||v==51592||v==51620||v==51648||v==51676||v==51704||v==51732||v==51760||v==51788||v==51816||v==51844||v==51872||v==51900||v==51928||v==51956||v==51984||v==52012||v==52040||v==52068||v==52096||v==52124||v==52152||v==52180||v==52208||v==52236||v==52264||v==52292||v==52320||v==52348||v==52376||v==52404||v==52432||v==52460||v==52488||v==52516||v==52544||v==52572||v==52600||v==52628||v==52656||v==52684||v==52712||v==52740||v==52768||v==52796||v==52824||v==52852||v==52880||v==52908||v==52936||v==52964||v==52992||v==53020||v==53048||v==53076||v==53104||v==53132||v==53160||v==53188||v==53216||v==53244||v==53272||v==53300||v==53328||v==53356||v==53384||v==53412||v==53440||v==53468||v==53496||v==53524||v==53552||v==53580||v==53608||v==53636||v==53664||v==53692||v==53720||v==53748||v==53776||v==53804||v==53832||v==53860||v==53888||v==53916||v==53944||v==53972||v==54e3||v==54028||v==54056||v==54084||v==54112||v==54140||v==54168||v==54196||v==54224||v==54252||v==54280||v==54308||v==54336||v==54364||v==54392||v==54420||v==54448||v==54476||v==54504||v==54532||v==54560||v==54588||v==54616||v==54644||v==54672||v==54700||v==54728||v==54756||v==54784||v==54812||v==54840||v==54868||v==54896||v==54924||v==54952||v==54980||v==55008||v==55036||v==55064||v==55092||v==55120||v==55148||v==55176?ii:44033<=v&&v<=44059||44061<=v&&v<=44087||44089<=v&&v<=44115||44117<=v&&v<=44143||44145<=v&&v<=44171||44173<=v&&v<=44199||44201<=v&&v<=44227||44229<=v&&v<=44255||44257<=v&&v<=44283||44285<=v&&v<=44311||44313<=v&&v<=44339||44341<=v&&v<=44367||44369<=v&&v<=44395||44397<=v&&v<=44423||44425<=v&&v<=44451||44453<=v&&v<=44479||44481<=v&&v<=44507||44509<=v&&v<=44535||44537<=v&&v<=44563||44565<=v&&v<=44591||44593<=v&&v<=44619||44621<=v&&v<=44647||44649<=v&&v<=44675||44677<=v&&v<=44703||44705<=v&&v<=44731||44733<=v&&v<=44759||44761<=v&&v<=44787||44789<=v&&v<=44815||44817<=v&&v<=44843||44845<=v&&v<=44871||44873<=v&&v<=44899||44901<=v&&v<=44927||44929<=v&&v<=44955||44957<=v&&v<=44983||44985<=v&&v<=45011||45013<=v&&v<=45039||45041<=v&&v<=45067||45069<=v&&v<=45095||45097<=v&&v<=45123||45125<=v&&v<=45151||45153<=v&&v<=45179||45181<=v&&v<=45207||45209<=v&&v<=45235||45237<=v&&v<=45263||45265<=v&&v<=45291||45293<=v&&v<=45319||45321<=v&&v<=45347||45349<=v&&v<=45375||45377<=v&&v<=45403||45405<=v&&v<=45431||45433<=v&&v<=45459||45461<=v&&v<=45487||45489<=v&&v<=45515||45517<=v&&v<=45543||45545<=v&&v<=45571||45573<=v&&v<=45599||45601<=v&&v<=45627||45629<=v&&v<=45655||45657<=v&&v<=45683||45685<=v&&v<=45711||45713<=v&&v<=45739||45741<=v&&v<=45767||45769<=v&&v<=45795||45797<=v&&v<=45823||45825<=v&&v<=45851||45853<=v&&v<=45879||45881<=v&&v<=45907||45909<=v&&v<=45935||45937<=v&&v<=45963||45965<=v&&v<=45991||45993<=v&&v<=46019||46021<=v&&v<=46047||46049<=v&&v<=46075||46077<=v&&v<=46103||46105<=v&&v<=46131||46133<=v&&v<=46159||46161<=v&&v<=46187||46189<=v&&v<=46215||46217<=v&&v<=46243||46245<=v&&v<=46271||46273<=v&&v<=46299||46301<=v&&v<=46327||46329<=v&&v<=46355||46357<=v&&v<=46383||46385<=v&&v<=46411||46413<=v&&v<=46439||46441<=v&&v<=46467||46469<=v&&v<=46495||46497<=v&&v<=46523||46525<=v&&v<=46551||46553<=v&&v<=46579||46581<=v&&v<=46607||46609<=v&&v<=46635||46637<=v&&v<=46663||46665<=v&&v<=46691||46693<=v&&v<=46719||46721<=v&&v<=46747||46749<=v&&v<=46775||46777<=v&&v<=46803||46805<=v&&v<=46831||46833<=v&&v<=46859||46861<=v&&v<=46887||46889<=v&&v<=46915||46917<=v&&v<=46943||46945<=v&&v<=46971||46973<=v&&v<=46999||47001<=v&&v<=47027||47029<=v&&v<=47055||47057<=v&&v<=47083||47085<=v&&v<=47111||47113<=v&&v<=47139||47141<=v&&v<=47167||47169<=v&&v<=47195||47197<=v&&v<=47223||47225<=v&&v<=47251||47253<=v&&v<=47279||47281<=v&&v<=47307||47309<=v&&v<=47335||47337<=v&&v<=47363||47365<=v&&v<=47391||47393<=v&&v<=47419||47421<=v&&v<=47447||47449<=v&&v<=47475||47477<=v&&v<=47503||47505<=v&&v<=47531||47533<=v&&v<=47559||47561<=v&&v<=47587||47589<=v&&v<=47615||47617<=v&&v<=47643||47645<=v&&v<=47671||47673<=v&&v<=47699||47701<=v&&v<=47727||47729<=v&&v<=47755||47757<=v&&v<=47783||47785<=v&&v<=47811||47813<=v&&v<=47839||47841<=v&&v<=47867||47869<=v&&v<=47895||47897<=v&&v<=47923||47925<=v&&v<=47951||47953<=v&&v<=47979||47981<=v&&v<=48007||48009<=v&&v<=48035||48037<=v&&v<=48063||48065<=v&&v<=48091||48093<=v&&v<=48119||48121<=v&&v<=48147||48149<=v&&v<=48175||48177<=v&&v<=48203||48205<=v&&v<=48231||48233<=v&&v<=48259||48261<=v&&v<=48287||48289<=v&&v<=48315||48317<=v&&v<=48343||48345<=v&&v<=48371||48373<=v&&v<=48399||48401<=v&&v<=48427||48429<=v&&v<=48455||48457<=v&&v<=48483||48485<=v&&v<=48511||48513<=v&&v<=48539||48541<=v&&v<=48567||48569<=v&&v<=48595||48597<=v&&v<=48623||48625<=v&&v<=48651||48653<=v&&v<=48679||48681<=v&&v<=48707||48709<=v&&v<=48735||48737<=v&&v<=48763||48765<=v&&v<=48791||48793<=v&&v<=48819||48821<=v&&v<=48847||48849<=v&&v<=48875||48877<=v&&v<=48903||48905<=v&&v<=48931||48933<=v&&v<=48959||48961<=v&&v<=48987||48989<=v&&v<=49015||49017<=v&&v<=49043||49045<=v&&v<=49071||49073<=v&&v<=49099||49101<=v&&v<=49127||49129<=v&&v<=49155||49157<=v&&v<=49183||49185<=v&&v<=49211||49213<=v&&v<=49239||49241<=v&&v<=49267||49269<=v&&v<=49295||49297<=v&&v<=49323||49325<=v&&v<=49351||49353<=v&&v<=49379||49381<=v&&v<=49407||49409<=v&&v<=49435||49437<=v&&v<=49463||49465<=v&&v<=49491||49493<=v&&v<=49519||49521<=v&&v<=49547||49549<=v&&v<=49575||49577<=v&&v<=49603||49605<=v&&v<=49631||49633<=v&&v<=49659||49661<=v&&v<=49687||49689<=v&&v<=49715||49717<=v&&v<=49743||49745<=v&&v<=49771||49773<=v&&v<=49799||49801<=v&&v<=49827||49829<=v&&v<=49855||49857<=v&&v<=49883||49885<=v&&v<=49911||49913<=v&&v<=49939||49941<=v&&v<=49967||49969<=v&&v<=49995||49997<=v&&v<=50023||50025<=v&&v<=50051||50053<=v&&v<=50079||50081<=v&&v<=50107||50109<=v&&v<=50135||50137<=v&&v<=50163||50165<=v&&v<=50191||50193<=v&&v<=50219||50221<=v&&v<=50247||50249<=v&&v<=50275||50277<=v&&v<=50303||50305<=v&&v<=50331||50333<=v&&v<=50359||50361<=v&&v<=50387||50389<=v&&v<=50415||50417<=v&&v<=50443||50445<=v&&v<=50471||50473<=v&&v<=50499||50501<=v&&v<=50527||50529<=v&&v<=50555||50557<=v&&v<=50583||50585<=v&&v<=50611||50613<=v&&v<=50639||50641<=v&&v<=50667||50669<=v&&v<=50695||50697<=v&&v<=50723||50725<=v&&v<=50751||50753<=v&&v<=50779||50781<=v&&v<=50807||50809<=v&&v<=50835||50837<=v&&v<=50863||50865<=v&&v<=50891||50893<=v&&v<=50919||50921<=v&&v<=50947||50949<=v&&v<=50975||50977<=v&&v<=51003||51005<=v&&v<=51031||51033<=v&&v<=51059||51061<=v&&v<=51087||51089<=v&&v<=51115||51117<=v&&v<=51143||51145<=v&&v<=51171||51173<=v&&v<=51199||51201<=v&&v<=51227||51229<=v&&v<=51255||51257<=v&&v<=51283||51285<=v&&v<=51311||51313<=v&&v<=51339||51341<=v&&v<=51367||51369<=v&&v<=51395||51397<=v&&v<=51423||51425<=v&&v<=51451||51453<=v&&v<=51479||51481<=v&&v<=51507||51509<=v&&v<=51535||51537<=v&&v<=51563||51565<=v&&v<=51591||51593<=v&&v<=51619||51621<=v&&v<=51647||51649<=v&&v<=51675||51677<=v&&v<=51703||51705<=v&&v<=51731||51733<=v&&v<=51759||51761<=v&&v<=51787||51789<=v&&v<=51815||51817<=v&&v<=51843||51845<=v&&v<=51871||51873<=v&&v<=51899||51901<=v&&v<=51927||51929<=v&&v<=51955||51957<=v&&v<=51983||51985<=v&&v<=52011||52013<=v&&v<=52039||52041<=v&&v<=52067||52069<=v&&v<=52095||52097<=v&&v<=52123||52125<=v&&v<=52151||52153<=v&&v<=52179||52181<=v&&v<=52207||52209<=v&&v<=52235||52237<=v&&v<=52263||52265<=v&&v<=52291||52293<=v&&v<=52319||52321<=v&&v<=52347||52349<=v&&v<=52375||52377<=v&&v<=52403||52405<=v&&v<=52431||52433<=v&&v<=52459||52461<=v&&v<=52487||52489<=v&&v<=52515||52517<=v&&v<=52543||52545<=v&&v<=52571||52573<=v&&v<=52599||52601<=v&&v<=52627||52629<=v&&v<=52655||52657<=v&&v<=52683||52685<=v&&v<=52711||52713<=v&&v<=52739||52741<=v&&v<=52767||52769<=v&&v<=52795||52797<=v&&v<=52823||52825<=v&&v<=52851||52853<=v&&v<=52879||52881<=v&&v<=52907||52909<=v&&v<=52935||52937<=v&&v<=52963||52965<=v&&v<=52991||52993<=v&&v<=53019||53021<=v&&v<=53047||53049<=v&&v<=53075||53077<=v&&v<=53103||53105<=v&&v<=53131||53133<=v&&v<=53159||53161<=v&&v<=53187||53189<=v&&v<=53215||53217<=v&&v<=53243||53245<=v&&v<=53271||53273<=v&&v<=53299||53301<=v&&v<=53327||53329<=v&&v<=53355||53357<=v&&v<=53383||53385<=v&&v<=53411||53413<=v&&v<=53439||53441<=v&&v<=53467||53469<=v&&v<=53495||53497<=v&&v<=53523||53525<=v&&v<=53551||53553<=v&&v<=53579||53581<=v&&v<=53607||53609<=v&&v<=53635||53637<=v&&v<=53663||53665<=v&&v<=53691||53693<=v&&v<=53719||53721<=v&&v<=53747||53749<=v&&v<=53775||53777<=v&&v<=53803||53805<=v&&v<=53831||53833<=v&&v<=53859||53861<=v&&v<=53887||53889<=v&&v<=53915||53917<=v&&v<=53943||53945<=v&&v<=53971||53973<=v&&v<=53999||54001<=v&&v<=54027||54029<=v&&v<=54055||54057<=v&&v<=54083||54085<=v&&v<=54111||54113<=v&&v<=54139||54141<=v&&v<=54167||54169<=v&&v<=54195||54197<=v&&v<=54223||54225<=v&&v<=54251||54253<=v&&v<=54279||54281<=v&&v<=54307||54309<=v&&v<=54335||54337<=v&&v<=54363||54365<=v&&v<=54391||54393<=v&&v<=54419||54421<=v&&v<=54447||54449<=v&&v<=54475||54477<=v&&v<=54503||54505<=v&&v<=54531||54533<=v&&v<=54559||54561<=v&&v<=54587||54589<=v&&v<=54615||54617<=v&&v<=54643||54645<=v&&v<=54671||54673<=v&&v<=54699||54701<=v&&v<=54727||54729<=v&&v<=54755||54757<=v&&v<=54783||54785<=v&&v<=54811||54813<=v&&v<=54839||54841<=v&&v<=54867||54869<=v&&v<=54895||54897<=v&&v<=54923||54925<=v&&v<=54951||54953<=v&&v<=54979||54981<=v&&v<=55007||55009<=v&&v<=55035||55037<=v&&v<=55063||55065<=v&&v<=55091||55093<=v&&v<=55119||55121<=v&&v<=55147||55149<=v&&v<=55175||55177<=v&&v<=55203?wn:v==9757||v==9977||9994<=v&&v<=9997||v==127877||127938<=v&&v<=127940||v==127943||127946<=v&&v<=127948||128066<=v&&v<=128067||128070<=v&&v<=128080||v==128110||128112<=v&&v<=128120||v==128124||128129<=v&&v<=128131||128133<=v&&v<=128135||v==128170||128372<=v&&v<=128373||v==128378||v==128400||128405<=v&&v<=128406||128581<=v&&v<=128583||128587<=v&&v<=128591||v==128675||128692<=v&&v<=128694||v==128704||v==128716||129304<=v&&v<=129308||129310<=v&&v<=129311||v==129318||129328<=v&&v<=129337||129341<=v&&v<=129342||129489<=v&&v<=129501?Yn:127995<=v&&v<=127999?Dn:v==8205?Tt:v==9792||v==9794||9877<=v&&v<=9878||v==9992||v==10084||v==127752||v==127806||v==127859||v==127891||v==127908||v==127912||v==127979||v==127981||v==128139||128187<=v&&v<=128188||v==128295||v==128300||v==128488||v==128640||v==128658?_e:128102<=v&&v<=128105?oe:Rn}return this}Te.exports&&(Te.exports=Se)}),o=new r,s=function(Se,Ne,ut){for(var rt=o.iterateGraphemes(Se.substring(Ne)),pt="",Dt=0;Dt<ut-Ne;Dt++){var Ot=rt.next();if(pt+=Ot.value,Ot.done)break}return pt},a=(function(Te,Se,Ne,ut,rt,pt,Dt){return{start:{line:Te,column:Se,offset:Ne},end:{line:ut,column:rt,offset:pt},source:Dt||null}}),c=i(function(Te,Se){(function(Ne,ut){Te.exports=ut()})(t,function(){var Ne="",ut,rt=pt;function pt(wn,Rn){if(typeof wn!="string")throw new TypeError("expected a string");if(Rn===1)return wn;if(Rn===2)return wn+wn;var gn=wn.length*Rn;if(ut!==wn||typeof ut>"u")ut=wn,Ne="";else if(Ne.length>=gn)return Ne.substr(0,gn);for(;gn>Ne.length&&Rn>1;)Rn&1&&(Ne+=wn),Rn>>=1,wn+=wn;return Ne+=wn,Ne=Ne.substr(0,gn),Ne}var Dt=function(Rn,gn,Yn){if(Rn==null||gn==null)return Rn;var Dn=String(Rn),Tt=typeof gn=="number"?gn:parseInt(gn,10);if(isNaN(Tt)||!isFinite(Tt))return Dn;var _e=Dn.length;if(_e>=Tt)return Dn;var oe=String(Yn);oe===""&&(oe=" ");for(var ee=Tt-_e;oe.length<ee;)oe+=oe;var ne=oe.length>ee?oe.substr(0,ee):oe;return ne+Dn},Ot=Object.assign||function(wn){for(var Rn=1;Rn<arguments.length;Rn++){var gn=arguments[Rn];for(var Yn in gn)Object.prototype.hasOwnProperty.call(gn,Yn)&&(wn[Yn]=gn[Yn])}return wn};function Jt(wn,Rn,gn,Yn){var Dn=String(Rn),Tt=Dt(Dn,gn," "),_e=rt(" ",Yn.tabSize);return Tt+" | "+wn.replace(/\t/g,_e)}function Tn(wn,Rn,gn,Yn,Dn){return wn.slice(Rn,gn).map(function(Tt,_e){return Jt(Tt,Rn+_e+1,Yn,Dn)}).join(`
`)}var Ln={extraLines:2,tabSize:4},ii=function(Rn,gn,Yn,Dn){Dn=Ot({},Ln,Dn);var Tt=Rn.split(/\r\n?|\n|\f/),_e=Math.max(1,gn-Dn.extraLines)-1,oe=Math.min(gn+Dn.extraLines,Tt.length),ee=String(oe).length,ne=Tn(Tt,_e,gn,ee,Dn),ue=Jt(Tt[gn-1].substring(0,Yn-1),gn,ee,Dn),ye=rt(" ",ue.length)+"^",Ue=Tn(Tt,gn,oe,ee,Dn);return[ne,ye,Ue].filter(Boolean).join(`
`)};return ii})}),h=new Error().stack,m=(function(Te){var Se=Object.create(SyntaxError.prototype);return Object.assign(Se,Te,{name:"SyntaxError"}),Object.defineProperty(Se,"stack",{get:function(){return h?h.replace(/^(.+\n){1,3}/,String(Se)+`
`):""}}),Se}),y=(function(Te,Se,Ne,ut,rt){throw m({message:ut?Te+`
`+c(Se,ut,rt):Te,rawMessage:Te,source:Ne,line:ut,column:rt})}),M={unexpectedEnd:function(){return"Unexpected end of input"},unexpectedToken:function(Se){for(var Ne=arguments.length,ut=Array(Ne>1?Ne-1:0),rt=1;rt<Ne;rt++)ut[rt-1]=arguments[rt];return"Unexpected token <"+Se+"> at "+ut.filter(Boolean).join(":")}},x={unexpectedSymbol:function(Se){for(var Ne=arguments.length,ut=Array(Ne>1?Ne-1:0),rt=1;rt<Ne;rt++)ut[rt-1]=arguments[rt];return"Unexpected symbol <"+Se+"> at "+ut.filter(Boolean).join(":")}},k={LEFT_BRACE:0,RIGHT_BRACE:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,COLON:4,COMMA:5,STRING:6,NUMBER:7,TRUE:8,FALSE:9,NULL:10},P={"{":k.LEFT_BRACE,"}":k.RIGHT_BRACE,"[":k.LEFT_BRACKET,"]":k.RIGHT_BRACKET,":":k.COLON,",":k.COMMA},F={true:k.TRUE,false:k.FALSE,null:k.NULL},j={_START_:0,START_QUOTE_OR_CHAR:1,ESCAPE:2},q={'"':0,"\\":1,"/":2,b:3,f:4,n:5,r:6,t:7,u:8},V={_START_:0,MINUS:1,ZERO:2,DIGIT:3,POINT:4,DIGIT_FRACTION:5,EXP:6,EXP_DIGIT_OR_SIGN:7};function H(Te){return Te>="1"&&Te<="9"}function G(Te){return Te>="0"&&Te<="9"}function Y(Te){return G(Te)||Te>="a"&&Te<="f"||Te>="A"&&Te<="F"}function z(Te){return Te==="e"||Te==="E"}function se(Te,Se,Ne,ut){var rt=Te.charAt(Se);if(rt==="\r")Se++,Ne++,ut=1,Te.charAt(Se)===`
`&&Se++;else if(rt===`
`)Se++,Ne++,ut=1;else if(rt==="	"||rt===" ")Se++,ut++;else return null;return{index:Se,line:Ne,column:ut}}function le(Te,Se,Ne,ut){var rt=Te.charAt(Se);return rt in P?{type:P[rt],line:Ne,column:ut+1,index:Se+1,value:null}:null}function me(Te,Se,Ne,ut){for(var rt in F)if(F.hasOwnProperty(rt)&&Te.substr(Se,rt.length)===rt)return{type:F[rt],line:Ne,column:ut+rt.length,index:Se+rt.length,value:rt};return null}function de(Te,Se,Ne,ut){for(var rt=Se,pt=j._START_;Se<Te.length;){var Dt=Te.charAt(Se);switch(pt){case j._START_:{if(Dt==='"')Se++,pt=j.START_QUOTE_OR_CHAR;else return null;break}case j.START_QUOTE_OR_CHAR:{if(Dt==="\\")Se++,pt=j.ESCAPE;else{if(Dt==='"')return Se++,{type:k.STRING,line:Ne,column:ut+Se-rt,index:Se,value:Te.slice(rt,Se)};Se++}break}case j.ESCAPE:{if(Dt in q){if(Se++,Dt==="u")for(var Ot=0;Ot<4;Ot++){var Jt=Te.charAt(Se);if(Jt&&Y(Jt))Se++;else return null}pt=j.START_QUOTE_OR_CHAR}else return null;break}}}}function be(Te,Se,Ne,ut){var rt=Se,pt=Se,Dt=V._START_;e:for(;Se<Te.length;){var Ot=Te.charAt(Se);switch(Dt){case V._START_:{if(Ot==="-")Dt=V.MINUS;else if(Ot==="0")pt=Se+1,Dt=V.ZERO;else if(H(Ot))pt=Se+1,Dt=V.DIGIT;else return null;break}case V.MINUS:{if(Ot==="0")pt=Se+1,Dt=V.ZERO;else if(H(Ot))pt=Se+1,Dt=V.DIGIT;else return null;break}case V.ZERO:{if(Ot===".")Dt=V.POINT;else if(z(Ot))Dt=V.EXP;else break e;break}case V.DIGIT:{if(G(Ot))pt=Se+1;else if(Ot===".")Dt=V.POINT;else if(z(Ot))Dt=V.EXP;else break e;break}case V.POINT:{if(G(Ot))pt=Se+1,Dt=V.DIGIT_FRACTION;else break e;break}case V.DIGIT_FRACTION:{if(G(Ot))pt=Se+1;else if(z(Ot))Dt=V.EXP;else break e;break}case V.EXP:{if(Ot==="+"||Ot==="-")Dt=V.EXP_DIGIT_OR_SIGN;else if(G(Ot))pt=Se+1,Dt=V.EXP_DIGIT_OR_SIGN;else break e;break}case V.EXP_DIGIT_OR_SIGN:{if(G(Ot))pt=Se+1;else break e;break}}Se++}return pt>0?{type:k.NUMBER,line:Ne,column:ut+pt-rt,index:pt,value:Te.slice(rt,pt)}:null}var Ee=function(Se,Ne){for(var ut=1,rt=1,pt=0,Dt=[];pt<Se.length;){var Ot=[Se,pt,ut,rt],Jt=se.apply(void 0,Ot);if(Jt){pt=Jt.index,ut=Jt.line,rt=Jt.column;continue}var Tn=le.apply(void 0,Ot)||me.apply(void 0,Ot)||de.apply(void 0,Ot)||be.apply(void 0,Ot);if(Tn){var Ln={type:Tn.type,value:Tn.value,loc:a(ut,rt,pt,Tn.line,Tn.column,Tn.index,Ne.source)};Dt.push(Ln),pt=Tn.index,ut=Tn.line,rt=Tn.column}else y(x.unexpectedSymbol(s(Se,pt,pt+1),Ne.source,ut,rt),Se,Ne.source,ut,rt)}return Dt},De={_START_:0,OPEN_OBJECT:1,PROPERTY:2,COMMA:3},je={_START_:0,KEY:1,COLON:2},Ie={_START_:0,OPEN_ARRAY:1,VALUE:2,COMMA:3},Qe={loc:!0,source:null};function et(Te,Se,Ne){var ut=Se.length>0?Se[Se.length-1].loc.end:{line:1,column:1};y(M.unexpectedEnd(),Te,Ne.source,ut.line,ut.column)}function dt(Te){for(var Se=0,Ne=0;Ne<4;Ne++)Se=Se*16+parseInt(Te[Ne],16);return String.fromCharCode(Se)}var ke={b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},we=['"',"\\","/"];function ze(Te){for(var Se="",Ne=0;Ne<Te.length;Ne++){var ut=Te.charAt(Ne);if(ut==="\\"){Ne++;var rt=Te.charAt(Ne);if(rt==="u")Se+=dt(Te.substr(Ne+1,4)),Ne+=4;else if(we.indexOf(rt)!==-1)Se+=rt;else if(rt in ke)Se+=ke[rt];else break}else Se+=ut}return Se}function xe(Te,Se,Ne,ut){for(var rt=void 0,pt={type:"Object",children:[]},Dt=De._START_;Ne<Se.length;){var Ot=Se[Ne];switch(Dt){case De._START_:{if(Ot.type===k.LEFT_BRACE)rt=Ot,Dt=De.OPEN_OBJECT,Ne++;else return null;break}case De.OPEN_OBJECT:{if(Ot.type===k.RIGHT_BRACE)return ut.loc&&(pt.loc=a(rt.loc.start.line,rt.loc.start.column,rt.loc.start.offset,Ot.loc.end.line,Ot.loc.end.column,Ot.loc.end.offset,ut.source)),{value:pt,index:Ne+1};var Jt=At(Te,Se,Ne,ut);pt.children.push(Jt.value),Dt=De.PROPERTY,Ne=Jt.index;break}case De.PROPERTY:{if(Ot.type===k.RIGHT_BRACE)return ut.loc&&(pt.loc=a(rt.loc.start.line,rt.loc.start.column,rt.loc.start.offset,Ot.loc.end.line,Ot.loc.end.column,Ot.loc.end.offset,ut.source)),{value:pt,index:Ne+1};Ot.type===k.COMMA?(Dt=De.COMMA,Ne++):y(M.unexpectedToken(s(Te,Ot.loc.start.offset,Ot.loc.end.offset),ut.source,Ot.loc.start.line,Ot.loc.start.column),Te,ut.source,Ot.loc.start.line,Ot.loc.start.column);break}case De.COMMA:{var Tn=At(Te,Se,Ne,ut);Tn?(Ne=Tn.index,pt.children.push(Tn.value),Dt=De.PROPERTY):y(M.unexpectedToken(s(Te,Ot.loc.start.offset,Ot.loc.end.offset),ut.source,Ot.loc.start.line,Ot.loc.start.column),Te,ut.source,Ot.loc.start.line,Ot.loc.start.column);break}}}et(Te,Se,ut)}function At(Te,Se,Ne,ut){for(var rt=void 0,pt={type:"Property",key:null,value:null},Dt=je._START_;Ne<Se.length;){var Ot=Se[Ne];switch(Dt){case je._START_:{if(Ot.type===k.STRING){var Jt={type:"Identifier",value:ze(Te.slice(Ot.loc.start.offset+1,Ot.loc.end.offset-1)),raw:Ot.value};ut.loc&&(Jt.loc=Ot.loc),rt=Ot,pt.key=Jt,Dt=je.KEY,Ne++}else return null;break}case je.KEY:{Ot.type===k.COLON?(Dt=je.COLON,Ne++):y(M.unexpectedToken(s(Te,Ot.loc.start.offset,Ot.loc.end.offset),ut.source,Ot.loc.start.line,Ot.loc.start.column),Te,ut.source,Ot.loc.start.line,Ot.loc.start.column);break}case je.COLON:{var Tn=Bt(Te,Se,Ne,ut);return pt.value=Tn.value,ut.loc&&(pt.loc=a(rt.loc.start.line,rt.loc.start.column,rt.loc.start.offset,Tn.value.loc.end.line,Tn.value.loc.end.column,Tn.value.loc.end.offset,ut.source)),{value:pt,index:Tn.index}}}}}function it(Te,Se,Ne,ut){for(var rt=void 0,pt={type:"Array",children:[]},Dt=Ie._START_,Ot=void 0;Ne<Se.length;)switch(Ot=Se[Ne],Dt){case Ie._START_:{if(Ot.type===k.LEFT_BRACKET)rt=Ot,Dt=Ie.OPEN_ARRAY,Ne++;else return null;break}case Ie.OPEN_ARRAY:{if(Ot.type===k.RIGHT_BRACKET)return ut.loc&&(pt.loc=a(rt.loc.start.line,rt.loc.start.column,rt.loc.start.offset,Ot.loc.end.line,Ot.loc.end.column,Ot.loc.end.offset,ut.source)),{value:pt,index:Ne+1};var Jt=Bt(Te,Se,Ne,ut);Ne=Jt.index,pt.children.push(Jt.value),Dt=Ie.VALUE;break}case Ie.VALUE:{if(Ot.type===k.RIGHT_BRACKET)return ut.loc&&(pt.loc=a(rt.loc.start.line,rt.loc.start.column,rt.loc.start.offset,Ot.loc.end.line,Ot.loc.end.column,Ot.loc.end.offset,ut.source)),{value:pt,index:Ne+1};Ot.type===k.COMMA?(Dt=Ie.COMMA,Ne++):y(M.unexpectedToken(s(Te,Ot.loc.start.offset,Ot.loc.end.offset),ut.source,Ot.loc.start.line,Ot.loc.start.column),Te,ut.source,Ot.loc.start.line,Ot.loc.start.column);break}case Ie.COMMA:{var Tn=Bt(Te,Se,Ne,ut);Ne=Tn.index,pt.children.push(Tn.value),Dt=Ie.VALUE;break}}et(Te,Se,ut)}function bt(Te,Se,Ne,ut){var rt=Se[Ne],pt=null;switch(rt.type){case k.STRING:{pt=ze(Te.slice(rt.loc.start.offset+1,rt.loc.end.offset-1));break}case k.NUMBER:{pt=Number(rt.value);break}case k.TRUE:{pt=!0;break}case k.FALSE:{pt=!1;break}case k.NULL:{pt=null;break}default:return null}var Dt={type:"Literal",value:pt,raw:rt.value};return ut.loc&&(Dt.loc=rt.loc),{value:Dt,index:Ne+1}}function Bt(Te,Se,Ne,ut){var rt=Se[Ne],pt=bt.apply(void 0,arguments)||xe.apply(void 0,arguments)||it.apply(void 0,arguments);if(pt)return pt;y(M.unexpectedToken(s(Te,rt.loc.start.offset,rt.loc.end.offset),ut.source,rt.loc.start.line,rt.loc.start.column),Te,ut.source,rt.loc.start.line,rt.loc.start.column)}var Ke=(function(Te,Se){Se=Object.assign({},Qe,Se);var Ne=Ee(Te,Se);Ne.length===0&&et(Te,Ne,Se);var ut=Bt(Te,Ne,0,Se);if(ut.index===Ne.length)return ut.value;var rt=Ne[ut.index];y(M.unexpectedToken(s(Te,rt.loc.start.offset,rt.loc.end.offset),Se.source,rt.loc.start.line,rt.loc.start.column),Te,Se.source,rt.loc.start.line,rt.loc.start.column)});return Ke}))})(_w)),_w.exports}var Xwe=Zwe();const pK=Xl(Xwe);function Oa(){var n="/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts",e="68bf9a3bcb07bd54be36702e0c3494ce552968d6",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:18}},2:{start:{line:5,column:2},end:{line:7,column:3}},3:{start:{line:6,column:4},end:{line:6,column:16}},4:{start:{line:8,column:2},end:{line:10,column:3}},5:{start:{line:9,column:4},end:{line:9,column:18}},6:{start:{line:11,column:14},end:{line:11,column:21}},7:{start:{line:12,column:2},end:{line:14,column:3}},8:{start:{line:13,column:4},end:{line:13,column:70}},9:{start:{line:15,column:18},end:{line:17,column:4}},10:{start:{line:16,column:4},end:{line:16,column:100}},11:{start:{line:18,column:2},end:{line:18,column:59}}},fnMap:{0:{name:"jsonPathToPosition",decl:{start:{line:1,column:16},end:{line:1,column:34}},loc:{start:{line:1,column:47},end:{line:19,column:1}},line:1},1:{name:"(anonymous_1)",decl:{start:{line:15,column:37},end:{line:15,column:38}},loc:{start:{line:15,column:52},end:{line:17,column:3}},line:15}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:5,column:2},end:{line:7,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:7,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},2:{loc:{start:{line:8,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:8,column:2},end:{line:10,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},3:{loc:{start:{line:12,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},4:{loc:{start:{line:16,column:11},end:{line:16,column:99}},type:"binary-expr",locations:[{start:{line:16,column:11},end:{line:16,column:29}},{start:{line:16,column:33},end:{line:16,column:68}},{start:{line:16,column:72},end:{line:16,column:99}}],line:16}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts"],names:[],mappings:"AAEO,gBAAS,mBAAmB,MAAgB,MAA6C;AAC9F,MAAI,CAAC,MAAM;AACT,WAAO;AAAA,EACT;AACA,MAAI,KAAK,SAAS,GAAG;AACnB,WAAO;AAAA,EACT;AACA,MAAI,EAAE,cAAc,OAAO;AACzB,WAAO;AAAA,EACT;AACA,QAAM,MAAM,KAAK,CAAC;AAClB,MAAI,IAAI,MAAM,UAAU,GAAG;AACzB,WAAO,mBAAmB,KAAK,MAAM,CAAC,GAAG,KAAK,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;AAAA,EAClE;AACA,QAAM,UAAU,KAAK,SAAS,KAAK,CAAC,cAAc;AAChD,WACE,SAAS,aACT,UAAU,IAAI,SAAS,gBACvB,UAAU,IAAI,UAAU;AAAA,EAE5B,CAAC;AACD,SAAO,mBAAmB,KAAK,MAAM,CAAC,GAAG,SAAS,KAAK;AACzD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"68bf9a3bcb07bd54be36702e0c3494ce552968d6"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Oa=function(){return s},s}Oa();function cD(n,e){if(Oa().f[0]++,Oa().s[0]++,e)Oa().b[0][1]++;else{Oa().b[0][0]++,Oa().s[1]++;return}if(Oa().s[2]++,n.length<1)return Oa().b[1][0]++,Oa().s[3]++,e;if(Oa().b[1][1]++,Oa().s[4]++,"children"in e)Oa().b[2][1]++;else{Oa().b[2][0]++,Oa().s[5]++;return}const t=(Oa().s[6]++,n[0]);if(Oa().s[7]++,t.match(/^[0-9]+$/))return Oa().b[3][0]++,Oa().s[8]++,cD(n.slice(1),e.children[+n[0]]);Oa().b[3][1]++;const i=(Oa().s[9]++,e.children.find(r=>(Oa().f[1]++,Oa().s[10]++,Oa().b[4][0]++,"key"in r&&(Oa().b[4][1]++,r.key.type==="Identifier")&&(Oa().b[4][2]++,r.key.value===t))));return Oa().s[11]++,cD(n.slice(1),i?.value)}function Pn(){var n="/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts",e="fed5a4f9200b6a5cf90f61b2c7f89f45308868c6",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts",statementMap:{0:{start:{line:11,column:22},end:{line:11,column:24}},1:{start:{line:12,column:2},end:{line:37,column:3}},2:{start:{line:13,column:29},end:{line:13,column:34}},3:{start:{line:14,column:4},end:{line:36,column:5}},4:{start:{line:15,column:6},end:{line:20,column:9}},5:{start:{line:22,column:19},end:{line:22,column:81}},6:{start:{line:23,column:19},end:{line:23,column:48}},7:{start:{line:24,column:6},end:{line:27,column:7}},8:{start:{line:25,column:8},end:{line:25,column:67}},9:{start:{line:26,column:8},end:{line:26,column:17}},10:{start:{line:28,column:6},end:{line:35,column:7}},11:{start:{line:29,column:8},end:{line:34,column:11}},12:{start:{line:38,column:2},end:{line:38,column:21}},13:{start:{line:41,column:2},end:{line:70,column:4}},14:{start:{line:42,column:17},end:{line:42,column:42}},15:{start:{line:43,column:4},end:{line:68,column:5}},16:{start:{line:44,column:25},end:{line:44,column:41}},17:{start:{line:45,column:18},end:{line:45,column:33}},18:{start:{line:46,column:31},end:{line:56,column:8}},19:{start:{line:57,column:27},end:{line:65,column:8}},20:{start:{line:58,column:8},end:{line:58,column:74}},21:{start:{line:60,column:32},end:{line:60,column:83}},22:{start:{line:61,column:8},end:{line:64,column:10}},23:{start:{line:66,column:6},end:{line:66,column:67}},24:{start:{line:69,column:4},end:{line:69,column:14}},25:{start:{line:73,column:2},end:{line:89,column:4}},26:{start:{line:74,column:17},end:{line:74,column:42}},27:{start:{line:75,column:4},end:{line:87,column:5}},28:{start:{line:76,column:25},end:{line:76,column:41}},29:{start:{line:77,column:18},end:{line:77,column:33}},30:{start:{line:78,column:31},end:{line:78,column:59}},31:{start:{line:79,column:27},end:{line:84,column:8}},32:{start:{line:80,column:8},end:{line:83,column:10}},33:{start:{line:85,column:6},end:{line:85,column:67}},34:{start:{line:88,column:4},end:{line:88,column:14}},35:{start:{line:92,column:2},end:{line:102,column:4}},36:{start:{line:93,column:17},end:{line:93,column:42}},37:{start:{line:94,column:23},end:{line:94,column:39}},38:{start:{line:95,column:16},end:{line:95,column:31}},39:{start:{line:96,column:16},end:{line:96,column:61}},40:{start:{line:97,column:4},end:{line:99,column:5}},41:{start:{line:98,column:6},end:{line:98,column:16}},42:{start:{line:100,column:19},end:{line:100,column:28}},43:{start:{line:101,column:4},end:{line:101,column:59}},44:{start:{line:105,column:23},end:{line:105,column:31}},45:{start:{line:105,column:29},end:{line:105,column:31}},46:{start:{line:106,column:2},end:{line:119,column:3}},47:{start:{line:108,column:6},end:{line:108,column:51}},48:{start:{line:109,column:6},end:{line:109,column:12}},49:{start:{line:111,column:6},end:{line:111,column:51}},50:{start:{line:112,column:6},end:{line:112,column:12}},51:{start:{line:114,column:6},end:{line:114,column:66}},52:{start:{line:115,column:6},end:{line:115,column:12}},53:{start:{line:117,column:6},end:{line:117,column:32}},54:{start:{line:117,column:29},end:{line:117,column:31}},55:{start:{line:118,column:6},end:{line:118,column:12}},56:{start:{line:120,column:2},end:{line:156,column:5}},57:{start:{line:133,column:8},end:{line:137,column:9}},58:{start:{line:134,column:22},end:{line:134,column:38}},59:{start:{line:135,column:24},end:{line:135,column:38}},60:{start:{line:136,column:10},end:{line:136,column:32}},61:{start:{line:138,column:8},end:{line:144,column:9}},62:{start:{line:139,column:10},end:{line:143,column:11}},63:{start:{line:140,column:12},end:{line:140,column:28}},64:{start:{line:142,column:12},end:{line:142,column:27}},65:{start:{line:148,column:27},end:{line:148,column:50}},66:{start:{line:149,column:8},end:{line:151,column:9}},67:{start:{line:150,column:10},end:{line:150,column:28}},68:{start:{line:152,column:8},end:{line:152,column:36}}},fnMap:{0:{name:"getDiagnosticsFromExpressionErrors",decl:{start:{line:10,column:9},end:{line:10,column:43}},loc:{start:{line:10,column:57},end:{line:39,column:1}},line:10},1:{name:"createMaplibreLayerLinter",decl:{start:{line:40,column:9},end:{line:40,column:34}},loc:{start:{line:40,column:37},end:{line:71,column:1}},line:40},2:{name:"(anonymous_2)",decl:{start:{line:41,column:9},end:{line:41,column:10}},loc:{start:{line:41,column:19},end:{line:70,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:57,column:51},end:{line:57,column:52}},loc:{start:{line:57,column:60},end:{line:59,column:7}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:59,column:13},end:{line:59,column:14}},loc:{start:{line:59,column:22},end:{line:65,column:7}},line:59},5:{name:"createMaplibreStyleLinter",decl:{start:{line:72,column:9},end:{line:72,column:34}},loc:{start:{line:72,column:37},end:{line:90,column:1}},line:72},6:{name:"(anonymous_6)",decl:{start:{line:73,column:9},end:{line:73,column:10}},loc:{start:{line:73,column:19},end:{line:89,column:3}},line:73},7:{name:"(anonymous_7)",decl:{start:{line:79,column:48},end:{line:79,column:49}},loc:{start:{line:79,column:57},end:{line:84,column:7}},line:79},8:{name:"createMaplibreExpressionLinter",decl:{start:{line:91,column:9},end:{line:91,column:39}},loc:{start:{line:91,column:46},end:{line:103,column:1}},line:91},9:{name:"(anonymous_9)",decl:{start:{line:92,column:9},end:{line:92,column:10}},loc:{start:{line:92,column:19},end:{line:102,column:3}},line:92},10:{name:"createEditor",decl:{start:{line:104,column:16},end:{line:104,column:28}},loc:{start:{line:104,column:36},end:{line:157,column:1}},line:104},11:{name:"(anonymous_11)",decl:{start:{line:105,column:23},end:{line:105,column:24}},loc:{start:{line:105,column:29},end:{line:105,column:31}},line:105},12:{name:"(anonymous_12)",decl:{start:{line:117,column:23},end:{line:117,column:24}},loc:{start:{line:117,column:29},end:{line:117,column:31}},line:117},13:{name:"(anonymous_13)",decl:{start:{line:132,column:35},end:{line:132,column:36}},loc:{start:{line:132,column:47},end:{line:145,column:7}},line:132},14:{name:"(anonymous_14)",decl:{start:{line:147,column:13},end:{line:147,column:14}},loc:{start:{line:147,column:23},end:{line:153,column:7}},line:147}},branchMap:{0:{loc:{start:{line:14,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:14,column:4},end:{line:36,column:5}},{start:{line:21,column:11},end:{line:36,column:5}}],line:14},1:{loc:{start:{line:17,column:12},end:{line:17,column:44}},type:"cond-expr",locations:[{start:{line:17,column:22},end:{line:17,column:40}},{start:{line:17,column:43},end:{line:17,column:44}}],line:17},2:{loc:{start:{line:24,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:24,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:28,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:97,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:99,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},5:{loc:{start:{line:106,column:2},end:{line:119,column:3}},type:"switch",locations:[{start:{line:107,column:4},end:{line:109,column:12}},{start:{line:110,column:4},end:{line:112,column:12}},{start:{line:113,column:4},end:{line:115,column:12}},{start:{line:116,column:4},end:{line:118,column:12}}],line:106},6:{loc:{start:{line:133,column:8},end:{line:137,column:9}},type:"if",locations:[{start:{line:133,column:8},end:{line:137,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:133},7:{loc:{start:{line:138,column:8},end:{line:144,column:9}},type:"if",locations:[{start:{line:138,column:8},end:{line:144,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:138},8:{loc:{start:{line:139,column:10},end:{line:143,column:11}},type:"if",locations:[{start:{line:139,column:10},end:{line:143,column:11}},{start:{line:141,column:17},end:{line:143,column:11}}],line:139},9:{loc:{start:{line:149,column:8},end:{line:151,column:9}},type:"if",locations:[{start:{line:149,column:8},end:{line:151,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:149}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts"],names:[],mappings:"AAAA,SAAS,kBAAkB;AAC3B,SAAS,kBAAkB;AAC3B,SAAS,aAAa,mBAAmB;AACzC,SAAS,MAAM,uBAAuB;AACtC,SAAS,QAAQ,kBAAmC;AACpD,SAAS,eAAe;AACxB,SAAS,YAA6C,wBAAwB;AAC9E,OAAO,eAAsD;AAC7D,SAAS,0BAA0B;AASnC,SAAS,mCAAmC,QAAuB,KAA+B;AAChG,QAAM,cAA4B,CAAC;AACnC,aAAW,SAAS,QAAQ;AAC1B,UAAM,EAAC,KAAK,QAAO,IAAI;AACvB,QAAI,CAAC,KAAK;AACR,kBAAY,KAAK;AAAA,QACf,MAAM;AAAA,QACN,IAAI,IAAI,MAAM,IAAI,IAAI,IAAI,SAAS;AAAA,QACnC,UAAU;AAAA,QACV;AAAA,MACF,CAAC;AAAA,IACH,OAAO;AACL,YAAM,OAAO,IAAI,QAAQ,YAAY,EAAE,EAAE,MAAM,WAAW,EAAE,OAAO,OAAO;AAC1E,YAAM,OAAO,mBAAmB,MAAM,GAAG;AACzC,UAAI,CAAC,MAAM;AACT,gBAAQ,KAAK,uCAAuC,KAAK;AACzD;AAAA,MACF;AACA,UAAI,KAAK,KAAK;AACZ,oBAAY,KAAK;AAAA,UACf,MAAM,KAAK,IAAI,MAAM;AAAA,UACrB,IAAI,KAAK,IAAI,IAAI;AAAA,UACjB,UAAU;AAAA,UACV;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,4BAA4B;AACnC,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AAErC,QAAI;AAEF,YAAM,aAAa,KAAK,MAAM,IAAI;AAClC,YAAM,MAAM,UAAU,IAAI;AAG1B,YAAM,mBAAmB,iBAAiB;AAAA,QACxC,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,YAAY,CAAC;AAAA,QACb,WAAW,CAAC;AAAA,QACZ,UAAU;AAAA,QACV,UAAU;AAAA,QACV,UAAU;AAAA,UACR;AAAA,QACF;AAAA,MACF,CAAC;AAED,YAAM,eAAe,iBAClB,OAAO,SAAO;AAEb,eAAO,CAAC,IAAI,QAAQ,MAAM,sCAAsC;AAAA,MAClE,CAAC,EACA,IAAI,SAAO;AAEV,cAAM,kBAAkB,IAAI,QAAQ,QAAQ,iBAAiB,EAAE,EAAE,MAAM,GAAG;AAC1E,eAAO;AAAA,UACL,KAAK,gBAAgB,CAAC;AAAA,UACtB,SAAS,gBAAgB,CAAC;AAAA,QAC5B;AAAA,MACF,CAAC;AACH,aAAO,mCAAmC,cAAc,GAAG;AAAA,IAC7D,QAAQ;AAAA,IAER;AACA,WAAO,CAAC;AAAA,EACV;AACF;AAEA,SAAS,4BAA4B;AACnC,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AAErC,QAAI;AAEF,YAAM,aAAa,KAAK,MAAM,IAAI;AAClC,YAAM,MAAM,UAAU,IAAI;AAG1B,YAAM,mBAAmB,iBAAiB,UAAU;AACpD,YAAM,eAAe,iBAAiB,IAAI,SAAO;AAC/C,eAAO;AAAA,UACL,KAAK,IAAI,QAAQ,MAAM,GAAG,EAAE,CAAC;AAAA,UAC7B,SAAS,IAAI;AAAA,QACf;AAAA,MACF,CAAC;AACD,aAAO,mCAAmC,cAAc,GAAG;AAAA,IAC7D,QAAQ;AAAA,IAER;AACA,WAAO,CAAC;AAAA,EACV;AACF;AAEA,SAAS,+BAA+B,MAAmC;AACzE,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AACrC,UAAM,aAAa,KAAK,MAAM,IAAI;AAClC,UAAM,MAAM,UAAU,IAAI;AAC1B,UAAM,MAAM,WAAW,iBAAiB,YAAY,IAAI;AACxD,QAAI,KAAK,WAAW,SAAS;AAC3B,aAAO,CAAC;AAAA,IACV;AACA,UAAM,SAAS,IAAI;AACnB,WAAO,mCAAmC,QAAQ,GAAG;AAAA,EACvD;AACF;AAEO,gBAAS,aAAa,OAQd;AACb,MAAI,iBAAqD,MAAM,CAAC;AAChE,UAAQ,MAAM,UAAU;AAAA,IACtB,KAAK;AACH,uBAAiB,0BAA0B;AAC3C;AAAA,IACF,KAAK;AACH,uBAAiB,0BAA0B;AAC3C;AAAA,IACF,KAAK;AACH,uBAAiB,+BAA+B,MAAM,IAAI;AAC1D;AAAA,IACF,KAAK;AACH,uBAAiB,MAAM,CAAC;AACxB;AAAA,EACJ;AAEA,SAAO,IAAI,WAAW;AAAA,IACpB,KAAK,MAAM;AAAA,IACX,YAAY;AAAA,MACV;AAAA,MACA,KAAK;AAAA,MACL;AAAA,MACA,IAAI,YAAY,EAAE,GAAG,YAAY,QAAQ,GAAG,CAAC,CAAC;AAAA,MAC9C,WAAW,MAAM;AAAA,QACf,KAAK;AAAA,UACH,UAAU;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,MACD,WAAW,eAAe,GAAG,CAAC,WAAW;AACvC,YAAI,OAAO,YAAY;AACrB,gBAAM,MAAM,OAAO,MAAM;AACzB,gBAAM,QAAQ,IAAI,SAAS;AAC3B,gBAAM,SAAS,KAAK;AAAA,QACtB;AACA,YAAI,OAAO,cAAc;AACvB,cAAI,OAAO,KAAK,UAAU;AACxB,kBAAM,QAAQ;AAAA,UAChB,OAAO;AACL,kBAAM,OAAO;AAAA,UACf;AAAA,QACF;AAAA,MACF,CAAC;AAAA,MACD,WAAW;AAAA,MACX,OAAO,CAAC,SAAqB;AAC3B,cAAM,aAAa,gBAAgB,EAAE,IAAI;AACzC,YAAI,WAAW,SAAS,GAAG;AACzB,iBAAO;AAAA,QACT;AACA,eAAO,eAAe,IAAI;AAAA,MAC5B,CAAC;AAAA,IACH;AAAA,IACA,QAAQ,MAAM;AAAA,EAChB,CAAC;AACH;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fed5a4f9200b6a5cf90f61b2c7f89f45308868c6"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Pn=function(){return s},s}Pn();function mK(n,e){Pn().f[0]++;const t=(Pn().s[0]++,[]);Pn().s[1]++;for(const i of n){const{key:r,message:o}=(Pn().s[2]++,i);if(Pn().s[3]++,!r)Pn().b[0][0]++,Pn().s[4]++,t.push({from:0,to:e.loc?(Pn().b[1][0]++,e.loc.end.offset):(Pn().b[1][1]++,0),severity:"error",message:o});else{Pn().b[0][1]++;const s=(Pn().s[5]++,r.replace(/^\[|\]$/g,"").split(/\.|[[\]]+/).filter(Boolean)),a=(Pn().s[6]++,cD(s,e));if(Pn().s[7]++,a)Pn().b[2][1]++;else{Pn().b[2][0]++,Pn().s[8]++,console.warn("Something went wrong parsing error:",i),Pn().s[9]++;continue}Pn().s[10]++,a.loc?(Pn().b[3][0]++,Pn().s[11]++,t.push({from:a.loc.start.offset,to:a.loc.end.offset,severity:"error",message:o})):Pn().b[3][1]++}}return Pn().s[12]++,t}function Jwe(){return Pn().f[1]++,Pn().s[13]++,n=>{Pn().f[2]++;const e=(Pn().s[14]++,n.state.doc.toString());Pn().s[15]++;try{const t=(Pn().s[16]++,JSON.parse(e)),i=(Pn().s[17]++,pK(e)),r=(Pn().s[18]++,Md({version:8,name:"Empty Style",metadata:{},sources:{},sprite:"",glyphs:"https://example.com/glyphs/{fontstack}/{range}.pbf",layers:[t]})),o=(Pn().s[19]++,r.filter(s=>(Pn().f[3]++,Pn().s[20]++,!s.message.match(/^layers\[0\]: source ".*" not found$/))).map(s=>{Pn().f[4]++;const a=(Pn().s[21]++,s.message.replace(/^layers\[0\]./,"").split(":"));return Pn().s[22]++,{key:a[0],message:a[1]}}));return Pn().s[23]++,mK(o,i)}catch{}return Pn().s[24]++,[]}}function eSe(){return Pn().f[5]++,Pn().s[25]++,n=>{Pn().f[6]++;const e=(Pn().s[26]++,n.state.doc.toString());Pn().s[27]++;try{const t=(Pn().s[28]++,JSON.parse(e)),i=(Pn().s[29]++,pK(e)),r=(Pn().s[30]++,Md(t)),o=(Pn().s[31]++,r.map(s=>(Pn().f[7]++,Pn().s[32]++,{key:s.message.split(":")[0],message:s.message})));return Pn().s[33]++,mK(o,i)}catch{}return Pn().s[34]++,[]}}function tSe(n){return Pn().f[8]++,Pn().s[35]++,e=>{Pn().f[9]++;const t=(Pn().s[36]++,e.state.doc.toString()),i=(Pn().s[37]++,JSON.parse(t)),r=(Pn().s[38]++,pK(t)),o=(Pn().s[39]++,ade.createExpression(i,n));if(Pn().s[40]++,o?.result!=="error")return Pn().b[4][0]++,Pn().s[41]++,[];Pn().b[4][1]++;const s=(Pn().s[42]++,o.value);return Pn().s[43]++,mK(s,r)}}function nSe(n){Pn().f[10]++,Pn().s[44]++;let e=()=>(Pn().f[11]++,Pn().s[45]++,[]);switch(Pn().s[46]++,n.lintType){case"style":Pn().b[5][0]++,Pn().s[47]++,e=eSe(),Pn().s[48]++;break;case"layer":Pn().b[5][1]++,Pn().s[49]++,e=Jwe(),Pn().s[50]++;break;case"expression":Pn().b[5][2]++,Pn().s[51]++,e=tSe(n.spec),Pn().s[52]++;break;case"json":Pn().b[5][3]++,Pn().s[53]++,e=()=>(Pn().f[12]++,Pn().s[54]++,[]),Pn().s[55]++;break}return Pn().s[56]++,new Ei({doc:n.value,extensions:[xwe,Lwe(),Vwe,new p5().of(Cs.tabSize.of(2)),Ei.theme({"&":{fontSize:"9pt"}}),Ei.updateListener.of(t=>{if(Pn().f[13]++,Pn().s[57]++,t.docChanged){Pn().b[6][0]++;const i=(Pn().s[58]++,t.state.doc),r=(Pn().s[59]++,i.toString());Pn().s[60]++,n.onChange(r)}else Pn().b[6][1]++;Pn().s[61]++,t.focusChanged?(Pn().b[7][0]++,Pn().s[62]++,t.view.hasFocus?(Pn().b[8][0]++,Pn().s[63]++,n.onFocus()):(Pn().b[8][1]++,Pn().s[64]++,n.onBlur())):Pn().b[7][1]++}),_we(),dwe(t=>{Pn().f[14]++;const i=(Pn().s[65]++,Pwe()(t));return Pn().s[66]++,i.length>0?(Pn().b[9][0]++,Pn().s[67]++,i):(Pn().b[9][1]++,Pn().s[68]++,e(t))})],parent:n.parent})}function li(){var n="/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",e="b0265b7f9053a68791144187ad962abceb0b9d46",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:13,column:3}},1:{start:{line:15,column:8},end:{line:15,column:12}},2:{start:{line:16,column:22},end:{line:16,column:27}},3:{start:{line:18,column:4},end:{line:18,column:17}},4:{start:{line:19,column:4},end:{line:22,column:6}},5:{start:{line:25,column:4},end:{line:25,column:63}},6:{start:{line:28,column:4},end:{line:36,column:7}},7:{start:{line:32,column:27},end:{line:32,column:47}},8:{start:{line:33,column:21},end:{line:33,column:35}},9:{start:{line:34,column:20},end:{line:34,column:33}},10:{start:{line:38,column:12},end:{line:43,column:3}},11:{start:{line:39,column:4},end:{line:39,column:49}},12:{start:{line:39,column:28},end:{line:39,column:49}},13:{start:{line:40,column:4},end:{line:42,column:7}},14:{start:{line:44,column:11},end:{line:49,column:3}},15:{start:{line:45,column:4},end:{line:45,column:47}},16:{start:{line:45,column:27},end:{line:45,column:47}},17:{start:{line:46,column:4},end:{line:48,column:7}},18:{start:{line:51,column:4},end:{line:60,column:5}},19:{start:{line:52,column:6},end:{line:52,column:36}},20:{start:{line:53,column:6},end:{line:59,column:9}},21:{start:{line:62,column:13},end:{line:86,column:3}},22:{start:{line:63,column:4},end:{line:69,column:5}},23:{start:{line:64,column:6},end:{line:64,column:37}},24:{start:{line:65,column:6},end:{line:67,column:9}},25:{start:{line:68,column:6},end:{line:68,column:13}},26:{start:{line:70,column:20},end:{line:70,column:51}},27:{start:{line:71,column:4},end:{line:82,column:5}},28:{start:{line:73,column:6},end:{line:78,column:7}},29:{start:{line:74,column:8},end:{line:74,column:42}},30:{start:{line:76,column:8},end:{line:76,column:19}},31:{start:{line:77,column:8},end:{line:77,column:27}},32:{start:{line:79,column:6},end:{line:81,column:7}},33:{start:{line:80,column:8},end:{line:80,column:66}},34:{start:{line:80,column:33},end:{line:80,column:66}},35:{start:{line:83,column:4},end:{line:85,column:7}},36:{start:{line:88,column:18},end:{line:88,column:20}},37:{start:{line:89,column:4},end:{line:91,column:5}},38:{start:{line:90,column:6},end:{line:90,column:45}},39:{start:{line:92,column:4},end:{line:101,column:9}},40:{start:{line:97,column:10},end:{line:97,column:24}},41:{start:{line:104,column:18},end:{line:104,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:13},end:{line:9,column:14}},loc:{start:{line:9,column:19},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:11,column:12},end:{line:11,column:13}},loc:{start:{line:11,column:18},end:{line:12,column:5}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:21},end:{line:23,column:3}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:22},end:{line:26,column:3}},line:24},4:{name:"(anonymous_4)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:22},end:{line:37,column:3}},line:27},5:{name:"(anonymous_5)",decl:{start:{line:32,column:16},end:{line:32,column:17}},loc:{start:{line:32,column:27},end:{line:32,column:47}},line:32},6:{name:"(anonymous_6)",decl:{start:{line:33,column:15},end:{line:33,column:16}},loc:{start:{line:33,column:21},end:{line:33,column:35}},line:33},7:{name:"(anonymous_7)",decl:{start:{line:34,column:14},end:{line:34,column:15}},loc:{start:{line:34,column:20},end:{line:34,column:33}},line:34},8:{name:"(anonymous_8)",decl:{start:{line:38,column:12},end:{line:38,column:13}},loc:{start:{line:38,column:18},end:{line:43,column:3}},line:38},9:{name:"(anonymous_9)",decl:{start:{line:44,column:11},end:{line:44,column:12}},loc:{start:{line:44,column:17},end:{line:49,column:3}},line:44},10:{name:"(anonymous_10)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:32},end:{line:61,column:3}},line:50},11:{name:"(anonymous_11)",decl:{start:{line:62,column:13},end:{line:62,column:14}},loc:{start:{line:62,column:21},end:{line:86,column:3}},line:62},12:{name:"(anonymous_12)",decl:{start:{line:87,column:2},end:{line:87,column:3}},loc:{start:{line:87,column:11},end:{line:102,column:3}},line:87},13:{name:"(anonymous_13)",decl:{start:{line:96,column:13},end:{line:96,column:14}},loc:{start:{line:96,column:21},end:{line:98,column:9}},line:96}},branchMap:{0:{loc:{start:{line:31,column:16},end:{line:31,column:46}},type:"binary-expr",locations:[{start:{line:31,column:16},end:{line:31,column:35}},{start:{line:31,column:39},end:{line:31,column:46}}],line:31},1:{loc:{start:{line:39,column:4},end:{line:39,column:49}},type:"if",locations:[{start:{line:39,column:4},end:{line:39,column:49}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:45,column:4},end:{line:45,column:47}},type:"if",locations:[{start:{line:45,column:4},end:{line:45,column:47}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},3:{loc:{start:{line:51,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:60,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:51},4:{loc:{start:{line:51,column:8},end:{line:51,column:69}},type:"binary-expr",locations:[{start:{line:51,column:8},end:{line:51,column:29}},{start:{line:51,column:33},end:{line:51,column:69}}],line:51},5:{loc:{start:{line:63,column:4},end:{line:69,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:69,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},6:{loc:{start:{line:71,column:4},end:{line:82,column:5}},type:"if",locations:[{start:{line:71,column:4},end:{line:82,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71},7:{loc:{start:{line:79,column:6},end:{line:81,column:7}},type:"if",locations:[{start:{line:79,column:6},end:{line:81,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},8:{loc:{start:{line:80,column:8},end:{line:80,column:66}},type:"if",locations:[{start:{line:80,column:8},end:{line:80,column:66}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:80},9:{loc:{start:{line:89,column:4},end:{line:91,column:5}},type:"if",locations:[{start:{line:89,column:4},end:{line:91,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:89}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx"],names:[],mappings:"AA2HM;AA3HN,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAA+B,uBAAuB;AAGtD,OAAO,qBAAqB;AAE5B,SAAQ,oBAAmB;AAoB3B,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EACA;AAAA,EACA,MAA6B;AAAA,EAC7B,oBAA6B;AAAA,EAE7B,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,MACX,WAAW,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,IAChD;AAAA,EACF;AAAA,EAEA,cAAc,MAAW;AACvB,WAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,EACzD;AAAA,EAEA,oBAAqB;AACnB,SAAK,QAAQ,aAAa;AAAA,MACxB,QAAQ,KAAK;AAAA,MACb,OAAO,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,MAC1C,UAAU,KAAK,MAAM,YAAY;AAAA,MACjC,UAAU,CAAC,UAAiB,KAAK,SAAS,KAAK;AAAA,MAC/C,SAAS,MAAM,KAAK,QAAQ;AAAA,MAC5B,QAAQ,MAAM,KAAK,OAAO;AAAA,MAC1B,MAAM,KAAK,MAAM;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,UAAU,MAAM;AACd,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ;AAC3C,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,QAAI,KAAK,MAAM,OAAQ,MAAK,MAAM,OAAO;AACzC,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,mBAAmB,WAA2B;AAC5C,QAAI,CAAC,KAAK,MAAM,aAAa,UAAU,UAAU,KAAK,MAAM,OAAO;AACjE,WAAK,oBAAoB;AACzB,WAAK,MAAO,SAAS;AAAA,QACnB,SAAS;AAAA,UACP,MAAM;AAAA,UACN,IAAI,KAAK,MAAO,MAAM,IAAI;AAAA,UAC1B,QAAQ,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,QAC7C;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,WAAW,CAAC,OAAgB;AAC1B,QAAI,KAAK,mBAAmB;AAC1B,WAAK,oBAAoB;AACzB,WAAK,SAAS;AAAA,QACZ,WAAW,KAAK,MAAO,MAAM,IAAI,SAAS;AAAA,MAC5C,CAAC;AACD;AAAA,IACF;AACA,UAAM,UAAU,KAAK,MAAO,MAAM,IAAI,SAAS;AAE/C,QAAI,KAAK,MAAM,cAAc,SAAS;AACpC,UAAI,aAAa;AACjB,UAAI;AACF,sBAAc,KAAK,MAAM,OAAO;AAAA,MAClC,SAAQ,MAAM;AACZ,cAAM;AACN,gBAAQ,KAAK,IAAI;AAAA,MACnB;AAEA,UAAI,CAAC,KAAK;AACR,YAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,WAAW;AAAA,MAC1D;AAAA,IACF;AAEA,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,QAAQ,CAAC;AACf,QAAI,KAAK,MAAM,WAAW;AACxB,YAAM,YAAY,KAAK,MAAM;AAAA,IAC/B;AAEA,WAAO,oBAAC,SAAI,WAAU,eAAc,eAAY,eAAc,eAAY,QAAO,OAAO,EAAC,QAAQ,OAAM,GACrG;AAAA,MAAC;AAAA;AAAA,QACC,WAAW,WAAW,wBAAwB,KAAK,MAAM,SAAS;AAAA,QAClE,KAAK,CAAC,OAAO;AAAC,eAAK,MAAM;AAAA,QAAG;AAAA,QAC5B;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b0265b7f9053a68791144187ad962abceb0b9d46"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return li=function(){return s},s}li();class iSe extends On.Component{static defaultProps=(li().s[0]++,{onFocus:()=>{li().f[0]++},onBlur:()=>{li().f[1]++}});_view;_el=(li().s[1]++,null);_cancelNextChange=(li().s[2]++,!1);constructor(e){li().f[2]++,li().s[3]++,super(e),li().s[4]++,this.state={isEditing:!1,prevValue:this.getPrettyJson(this.props.value)}}getPrettyJson(e){return li().f[3]++,li().s[5]++,E_e(e,{indent:2,maxLength:40})}componentDidMount(){li().f[4]++,li().s[6]++,this._view=nSe({parent:this._el,value:this.getPrettyJson(this.props.value),lintType:(li().b[0][0]++,this.props.lintType||(li().b[0][1]++,"layer")),onChange:e=>(li().f[5]++,li().s[7]++,this.onChange(e)),onFocus:()=>(li().f[6]++,li().s[8]++,this.onFocus()),onBlur:()=>(li().f[7]++,li().s[9]++,this.onBlur()),spec:this.props.spec})}onFocus=(li().s[10]++,()=>{li().f[8]++,li().s[11]++,this.props.onFocus?(li().b[1][0]++,li().s[12]++,this.props.onFocus()):li().b[1][1]++,li().s[13]++,this.setState({isEditing:!0})});onBlur=(li().s[14]++,()=>{li().f[9]++,li().s[15]++,this.props.onBlur?(li().b[2][0]++,li().s[16]++,this.props.onBlur()):li().b[2][1]++,li().s[17]++,this.setState({isEditing:!1})});componentDidUpdate(e){li().f[10]++,li().s[18]++,li().b[4][0]++,!this.state.isEditing&&(li().b[4][1]++,e.value!==this.props.value)?(li().b[3][0]++,li().s[19]++,this._cancelNextChange=!0,li().s[20]++,this._view.dispatch({changes:{from:0,to:this._view.state.doc.length,insert:this.getPrettyJson(this.props.value)}})):li().b[3][1]++}onChange=(li().s[21]++,e=>{if(li().f[11]++,li().s[22]++,this._cancelNextChange){li().b[5][0]++,li().s[23]++,this._cancelNextChange=!1,li().s[24]++,this.setState({prevValue:this._view.state.doc.toString()}),li().s[25]++;return}else li().b[5][1]++;const t=(li().s[26]++,this._view.state.doc.toString());if(li().s[27]++,this.state.prevValue!==t){li().b[6][0]++;let i,r;li().s[28]++;try{li().s[29]++,i=JSON.parse(t)}catch(o){li().s[30]++,r=o,li().s[31]++,console.warn(o)}li().s[32]++,r?li().b[7][1]++:(li().b[7][0]++,li().s[33]++,this.props.onChange?(li().b[8][0]++,li().s[34]++,this.props.onChange(i)):li().b[8][1]++)}else li().b[6][1]++;li().s[35]++,this.setState({prevValue:t})});render(){li().f[12]++;const e=(li().s[36]++,{});return li().s[37]++,this.props.maxHeight?(li().b[9][0]++,li().s[38]++,e.maxHeight=this.props.maxHeight):li().b[9][1]++,li().s[39]++,ie.jsx("div",{className:"json-editor","data-wd-key":"json-editor","aria-hidden":"true",style:{cursor:"text"},children:ie.jsx("div",{className:Yg("codemirror-container",this.props.className),ref:t=>{li().f[13]++,li().s[40]++,this._el=t},style:e})})}}const wre=(li().s[41]++,$o()(iSe));function wx(){var n="/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx",e="f03c466cea7ee39fb10a8d84cec1e620e7e892a5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx",statementMap:{0:{start:{line:4,column:27},end:{line:18,column:1}},1:{start:{line:5,column:2},end:{line:17,column:7}},2:{start:{line:19,column:19},end:{line:19,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:27},end:{line:4,column:28}},loc:{start:{line:4,column:38},end:{line:18,column:1}},line:4}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx"],names:[],mappings:"AAcS,mBACL,KADK;AAdT,OAAO,eAAe;AAEtB,SAAS,uBAA6C;AAUtD,MAAM,qBAAgD,CAAC,UAAU;AAE/D,SAAO,iCACL;AAAA,wBAAC,YAAO,WAAU,mBAAkB,SAAS,MAAM,SAAS,cAAY,MAAM,EAAE,OAAO,GAAG,OAAO,EAAE,UAAU,UAAU,KAAK,KAAK,QAAQ,EAAE,GAAI,gBAAM,EAAE,2BAA2B,GAAE;AAAA,IACpL;AAAA,MAAC;AAAA;AAAA,QACC,UAAS;AAAA,QACT,OAAO,MAAM;AAAA,QACb,UAAU,MAAM;AAAA,QAChB,WAAW;AAAA;AAAA,IACb;AAAA,IAAE;AAAA,KACJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AAEvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f03c466cea7ee39fb10a8d84cec1e620e7e892a5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return wx=function(){return s},s}wx();wx().s[0]++;const rSe=n=>(wx().f[0]++,wx().s[1]++,ie.jsxs(ie.Fragment,{children:[ie.jsx("button",{className:"maputnik-button",onClick:n.onClose,"aria-label":n.t("Close"),style:{position:"sticky",top:"0",zIndex:1},children:n.t("Click to close the editor")}),ie.jsx(wre,{lintType:"style",value:n.value,onChange:n.onChange,className:"maputnik-code-editor"}),";"]})),oSe=(wx().s[2]++,$o()(rSe));var Z2=zD();function sSe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return St.useMemo(()=>i=>{e.forEach(r=>r(i))},e)}const C6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Wx(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function gK(n){return"nodeType"in n}function wd(n){var e,t;return n?Wx(n)?n:gK(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function yK(n){const{Document:e}=wd(n);return n instanceof e}function M5(n){return Wx(n)?!1:n instanceof wd(n).HTMLElement}function Sre(n){return n instanceof wd(n).SVGElement}function Qx(n){return n?Wx(n)?n.document:gK(n)?yK(n)?n:M5(n)||Sre(n)?n.ownerDocument:document:document:document}const Ng=C6?St.useLayoutEffect:St.useEffect;function vK(n){const e=St.useRef(n);return Ng(()=>{e.current=n}),St.useCallback(function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.current==null?void 0:e.current(...i)},[])}function aSe(){const n=St.useRef(null),e=St.useCallback((i,r)=>{n.current=setInterval(i,r)},[]),t=St.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function w4(n,e){e===void 0&&(e=[n]);const t=St.useRef(n);return Ng(()=>{t.current!==n&&(t.current=n)},e),t}function w5(n,e){const t=St.useRef();return St.useMemo(()=>{const i=n(t.current);return t.current=i,i},[...e])}function NS(n){const e=vK(n),t=St.useRef(null),i=St.useCallback(r=>{r!==t.current&&e?.(r,t.current),t.current=r},[]);return[t,i]}function AD(n){const e=St.useRef();return St.useEffect(()=>{e.current=n},[n]),e.current}let XB={};function S5(n,e){return St.useMemo(()=>{if(e)return e;const t=XB[n]==null?0:XB[n]+1;return XB[n]=t,n+"-"+t},[n,e])}function Ere(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return i.reduce((o,s)=>{const a=Object.entries(s);for(const[c,h]of a){const m=o[c];m!=null&&(o[c]=m+n*h)}return o},{...e})}}const Z_=Ere(1),GS=Ere(-1);function lSe(n){return"clientX"in n&&"clientY"in n}function bK(n){if(!n)return!1;const{KeyboardEvent:e}=wd(n.target);return e&&n instanceof e}function uSe(n){if(!n)return!1;const{TouchEvent:e}=wd(n.target);return e&&n instanceof e}function hD(n){if(uSe(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return lSe(n)?{x:n.clientX,y:n.clientY}:null}const S4=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[S4.Translate.toString(n),S4.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:i}=n;return e+" "+t+"ms "+i}}}),tW="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function cSe(n){return n.matches(tW)?n:n.querySelector(tW)}const ASe={display:"none"};function hSe(n){let{id:e,value:t}=n;return On.createElement("div",{id:e,style:ASe},t)}function dSe(n){let{id:e,announcement:t,ariaLiveType:i="assertive"}=n;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return On.createElement("div",{id:e,style:r,role:"status","aria-live":i,"aria-atomic":!0},t)}function fSe(){const[n,e]=St.useState("");return{announce:St.useCallback(i=>{i!=null&&e(i)},[]),announcement:n}}const Ore=St.createContext(null);function pSe(n){const e=St.useContext(Ore);St.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function mSe(){const[n]=St.useState(()=>new Set),e=St.useCallback(i=>(n.add(i),()=>n.delete(i)),[n]);return[St.useCallback(i=>{let{type:r,event:o}=i;n.forEach(s=>{var a;return(a=s[r])==null?void 0:a.call(s,o)})},[n]),e]}const gSe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},ySe={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function vSe(n){let{announcements:e=ySe,container:t,hiddenTextDescribedById:i,screenReaderInstructions:r=gSe}=n;const{announce:o,announcement:s}=fSe(),a=S5("DndLiveRegion"),[c,h]=St.useState(!1);if(St.useEffect(()=>{h(!0)},[]),pSe(St.useMemo(()=>({onDragStart(y){let{active:M}=y;o(e.onDragStart({active:M}))},onDragMove(y){let{active:M,over:x}=y;e.onDragMove&&o(e.onDragMove({active:M,over:x}))},onDragOver(y){let{active:M,over:x}=y;o(e.onDragOver({active:M,over:x}))},onDragEnd(y){let{active:M,over:x}=y;o(e.onDragEnd({active:M,over:x}))},onDragCancel(y){let{active:M,over:x}=y;o(e.onDragCancel({active:M,over:x}))}}),[o,e])),!c)return null;const m=On.createElement(On.Fragment,null,On.createElement(hSe,{id:i,value:r.draggable}),On.createElement(dSe,{id:a,announcement:s}));return t?Z2.createPortal(m,t):m}var hc;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(hc||(hc={}));function WS(){}function bSe(n,e){return St.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function CSe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return St.useMemo(()=>[...e].filter(i=>i!=null),[...e])}const lm=Object.freeze({x:0,y:0});function _Se(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function xSe(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return t-i}function MSe(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return i-t}function wSe(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function nW(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const SSe=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const r=nW(e,e.left,e.top),o=[];for(const s of i){const{id:a}=s,c=t.get(a);if(c){const h=_Se(nW(c),r);o.push({id:a,data:{droppableContainer:s,value:h}})}}return o.sort(xSe)};function ESe(n,e){const t=Math.max(e.top,n.top),i=Math.max(e.left,n.left),r=Math.min(e.left+e.width,n.left+n.width),o=Math.min(e.top+e.height,n.top+n.height),s=r-i,a=o-t;if(i<r&&t<o){const c=e.width*e.height,h=n.width*n.height,m=s*a,y=m/(c+h-m);return Number(y.toFixed(4))}return 0}const OSe=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const r=[];for(const o of i){const{id:s}=o,a=t.get(s);if(a){const c=ESe(a,e);c>0&&r.push({id:s,data:{droppableContainer:o,value:c}})}}return r.sort(MSe)};function BSe(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function Bre(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:lm}function ISe(n){return function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return r.reduce((s,a)=>({...s,top:s.top+n*a.y,bottom:s.bottom+n*a.y,left:s.left+n*a.x,right:s.right+n*a.x}),{...t})}}const kSe=ISe(1);function TSe(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function RSe(n,e,t){const i=TSe(e);if(!i)return n;const{scaleX:r,scaleY:o,x:s,y:a}=i,c=n.left-s-(1-r)*parseFloat(t),h=n.top-a-(1-o)*parseFloat(t.slice(t.indexOf(" ")+1)),m=r?n.width/r:n.width,y=o?n.height/o:n.height;return{width:m,height:y,top:h,right:c+m,bottom:h+y,left:c}}const DSe={ignoreTransform:!1};function qx(n,e){e===void 0&&(e=DSe);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:m}=wd(n).getComputedStyle(n);h&&(t=RSe(t,h,m))}const{top:i,left:r,width:o,height:s,bottom:a,right:c}=t;return{top:i,left:r,width:o,height:s,bottom:a,right:c}}function iW(n){return qx(n,{ignoreTransform:!0})}function PSe(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function USe(n,e){return e===void 0&&(e=wd(n).getComputedStyle(n)),e.position==="fixed"}function KSe(n,e){e===void 0&&(e=wd(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const o=e[r];return typeof o=="string"?t.test(o):!1})}function CK(n,e){const t=[];function i(r){if(e!=null&&t.length>=e||!r)return t;if(yK(r)&&r.scrollingElement!=null&&!t.includes(r.scrollingElement))return t.push(r.scrollingElement),t;if(!M5(r)||Sre(r)||t.includes(r))return t;const o=wd(n).getComputedStyle(r);return r!==n&&KSe(r,o)&&t.push(r),USe(r,o)?t:i(r.parentNode)}return n?i(n):t}function Ire(n){const[e]=CK(n,1);return e??null}function JB(n){return!C6||!n?null:Wx(n)?n:gK(n)?yK(n)||n===Qx(n).scrollingElement?window:M5(n)?n:null:null}function kre(n){return Wx(n)?n.scrollX:n.scrollLeft}function Tre(n){return Wx(n)?n.scrollY:n.scrollTop}function dD(n){return{x:kre(n),y:Tre(n)}}var Wc;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(Wc||(Wc={}));function Rre(n){return!C6||!n?!1:n===document.scrollingElement}function Dre(n){const e={x:0,y:0},t=Rre(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},i={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},r=n.scrollTop<=e.y,o=n.scrollLeft<=e.x,s=n.scrollTop>=i.y,a=n.scrollLeft>=i.x;return{isTop:r,isLeft:o,isBottom:s,isRight:a,maxScroll:i,minScroll:e}}const LSe={x:.2,y:.2};function FSe(n,e,t,i,r){let{top:o,left:s,right:a,bottom:c}=t;i===void 0&&(i=10),r===void 0&&(r=LSe);const{isTop:h,isBottom:m,isLeft:y,isRight:M}=Dre(n),x={x:0,y:0},k={x:0,y:0},P={height:e.height*r.y,width:e.width*r.x};return!h&&o<=e.top+P.height?(x.y=Wc.Backward,k.y=i*Math.abs((e.top+P.height-o)/P.height)):!m&&c>=e.bottom-P.height&&(x.y=Wc.Forward,k.y=i*Math.abs((e.bottom-P.height-c)/P.height)),!M&&a>=e.right-P.width?(x.x=Wc.Forward,k.x=i*Math.abs((e.right-P.width-a)/P.width)):!y&&s<=e.left+P.width&&(x.x=Wc.Backward,k.x=i*Math.abs((e.left+P.width-s)/P.width)),{direction:x,speed:k}}function zSe(n){if(n===document.scrollingElement){const{innerWidth:o,innerHeight:s}=window;return{top:0,left:0,right:o,bottom:s,width:o,height:s}}const{top:e,left:t,right:i,bottom:r}=n.getBoundingClientRect();return{top:e,left:t,right:i,bottom:r,width:n.clientWidth,height:n.clientHeight}}function Pre(n){return n.reduce((e,t)=>Z_(e,dD(t)),lm)}function jSe(n){return n.reduce((e,t)=>e+kre(t),0)}function NSe(n){return n.reduce((e,t)=>e+Tre(t),0)}function GSe(n,e){if(e===void 0&&(e=qx),!n)return;const{top:t,left:i,bottom:r,right:o}=e(n);Ire(n)&&(r<=0||o<=0||t>=window.innerHeight||i>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const WSe=[["x",["left","right"],jSe],["y",["top","bottom"],NSe]];class _K{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=CK(t),r=Pre(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,s,a]of WSe)for(const c of s)Object.defineProperty(this,c,{get:()=>{const h=a(i),m=r[o]-h;return this.rect[c]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class _3{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...t)})},this.target=e}add(e,t,i){var r;(r=this.target)==null||r.addEventListener(e,t,i),this.listeners.push([e,t,i])}}function QSe(n){const{EventTarget:e}=wd(n);return n instanceof e?n:Qx(n)}function e8(n,e){const t=Math.abs(n.x),i=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+i**2)>e:"x"in e&&"y"in e?t>e.x&&i>e.y:"x"in e?t>e.x:"y"in e?i>e.y:!1}var tp;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(tp||(tp={}));function rW(n){n.preventDefault()}function qSe(n){n.stopPropagation()}var Ns;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(Ns||(Ns={}));const Ure={start:[Ns.Space,Ns.Enter],cancel:[Ns.Esc],end:[Ns.Space,Ns.Enter,Ns.Tab]},YSe=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case Ns.Right:return{...t,x:t.x+25};case Ns.Left:return{...t,x:t.x-25};case Ns.Down:return{...t,y:t.y+25};case Ns.Up:return{...t,y:t.y-25}}};class Kre{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new _3(Qx(t)),this.windowListeners=new _3(wd(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(tp.Resize,this.handleCancel),this.windowListeners.add(tp.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(tp.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,i=e.node.current;i&&GSe(i),t(lm)}handleKeyDown(e){if(bK(e)){const{active:t,context:i,options:r}=this.props,{keyboardCodes:o=Ure,coordinateGetter:s=YSe,scrollBehavior:a="smooth"}=r,{code:c}=e;if(o.end.includes(c)){this.handleEnd(e);return}if(o.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:h}=i.current,m=h?{x:h.left,y:h.top}:lm;this.referenceCoordinates||(this.referenceCoordinates=m);const y=s(e,{active:t,context:i.current,currentCoordinates:m});if(y){const M=GS(y,m),x={x:0,y:0},{scrollableAncestors:k}=i.current;for(const P of k){const F=e.code,{isTop:j,isRight:q,isLeft:V,isBottom:H,maxScroll:G,minScroll:Y}=Dre(P),z=zSe(P),se={x:Math.min(F===Ns.Right?z.right-z.width/2:z.right,Math.max(F===Ns.Right?z.left:z.left+z.width/2,y.x)),y:Math.min(F===Ns.Down?z.bottom-z.height/2:z.bottom,Math.max(F===Ns.Down?z.top:z.top+z.height/2,y.y))},le=F===Ns.Right&&!q||F===Ns.Left&&!V,me=F===Ns.Down&&!H||F===Ns.Up&&!j;if(le&&se.x!==y.x){const de=P.scrollLeft+M.x,be=F===Ns.Right&&de<=G.x||F===Ns.Left&&de>=Y.x;if(be&&!M.y){P.scrollTo({left:de,behavior:a});return}be?x.x=P.scrollLeft-de:x.x=F===Ns.Right?P.scrollLeft-G.x:P.scrollLeft-Y.x,x.x&&P.scrollBy({left:-x.x,behavior:a});break}else if(me&&se.y!==y.y){const de=P.scrollTop+M.y,be=F===Ns.Down&&de<=G.y||F===Ns.Up&&de>=Y.y;if(be&&!M.x){P.scrollTo({top:de,behavior:a});return}be?x.y=P.scrollTop-de:x.y=F===Ns.Down?P.scrollTop-G.y:P.scrollTop-Y.y,x.y&&P.scrollBy({top:-x.y,behavior:a});break}}this.handleMove(e,Z_(GS(y,this.referenceCoordinates),x))}}}handleMove(e,t){const{onMove:i}=this.props;e.preventDefault(),i(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Kre.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:i=Ure,onActivation:r}=e,{active:o}=t;const{code:s}=n.nativeEvent;if(i.start.includes(s)){const a=o.activatorNode.current;return a&&n.target!==a?!1:(n.preventDefault(),r?.({event:n.nativeEvent}),!0)}return!1}}];function oW(n){return!!(n&&"distance"in n)}function sW(n){return!!(n&&"delay"in n)}class xK{constructor(e,t,i){var r;i===void 0&&(i=QSe(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:s}=o;this.props=e,this.events=t,this.document=Qx(s),this.documentListeners=new _3(this.document),this.listeners=new _3(i),this.windowListeners=new _3(wd(s)),this.initialCoordinates=(r=hD(o))!=null?r:lm,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(tp.Resize,this.handleCancel),this.windowListeners.add(tp.DragStart,rW),this.windowListeners.add(tp.VisibilityChange,this.handleCancel),this.windowListeners.add(tp.ContextMenu,rW),this.documentListeners.add(tp.Keydown,this.handleKeydown),t){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(sW(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(oW(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:i,onPending:r}=this.props;r(i,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(tp.Click,qSe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(tp.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:i,initialCoordinates:r,props:o}=this,{onMove:s,options:{activationConstraint:a}}=o;if(!r)return;const c=(t=hD(e))!=null?t:lm,h=GS(r,c);if(!i&&a){if(oW(a)){if(a.tolerance!=null&&e8(h,a.tolerance))return this.handleCancel();if(e8(h,a.distance))return this.handleStart()}if(sW(a)&&e8(h,a.tolerance))return this.handleCancel();this.handlePending(a,h);return}e.cancelable&&e.preventDefault(),s(c)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Ns.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const $Se={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class MK extends xK{constructor(e){const{event:t}=e,i=Qx(t.target);super(e,$Se,i)}}MK.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return!t.isPrimary||t.button!==0?!1:(i?.({event:t}),!0)}}];const VSe={move:{name:"mousemove"},end:{name:"mouseup"}};var fD;(function(n){n[n.RightClick=2]="RightClick"})(fD||(fD={}));class HSe extends xK{constructor(e){super(e,VSe,Qx(e.event.target))}}HSe.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return t.button===fD.RightClick?!1:(i?.({event:t}),!0)}}];const t8={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ZSe extends xK{constructor(e){super(e,t8)}static setup(){return window.addEventListener(t8.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(t8.move.name,e)};function e(){}}}ZSe.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;const{touches:r}=t;return r.length>1?!1:(i?.({event:t}),!0)}}];var x3;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(x3||(x3={}));var QS;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(QS||(QS={}));function XSe(n){let{acceleration:e,activator:t=x3.Pointer,canScroll:i,draggingRect:r,enabled:o,interval:s=5,order:a=QS.TreeOrder,pointerCoordinates:c,scrollableAncestors:h,scrollableAncestorRects:m,delta:y,threshold:M}=n;const x=eEe({delta:y,disabled:!o}),[k,P]=aSe(),F=St.useRef({x:0,y:0}),j=St.useRef({x:0,y:0}),q=St.useMemo(()=>{switch(t){case x3.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case x3.DraggableRect:return r}},[t,r,c]),V=St.useRef(null),H=St.useCallback(()=>{const Y=V.current;if(!Y)return;const z=F.current.x*j.current.x,se=F.current.y*j.current.y;Y.scrollBy(z,se)},[]),G=St.useMemo(()=>a===QS.TreeOrder?[...h].reverse():h,[a,h]);St.useEffect(()=>{if(!o||!h.length||!q){P();return}for(const Y of G){if(i?.(Y)===!1)continue;const z=h.indexOf(Y),se=m[z];if(!se)continue;const{direction:le,speed:me}=FSe(Y,se,q,e,M);for(const de of["x","y"])x[de][le[de]]||(me[de]=0,le[de]=0);if(me.x>0||me.y>0){P(),V.current=Y,k(H,s),F.current=me,j.current=le;return}}F.current={x:0,y:0},j.current={x:0,y:0},P()},[e,H,i,P,o,s,JSON.stringify(q),JSON.stringify(x),k,h,G,m,JSON.stringify(M)])}const JSe={x:{[Wc.Backward]:!1,[Wc.Forward]:!1},y:{[Wc.Backward]:!1,[Wc.Forward]:!1}};function eEe(n){let{delta:e,disabled:t}=n;const i=AD(e);return w5(r=>{if(t||!i||!r)return JSe;const o={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[Wc.Backward]:r.x[Wc.Backward]||o.x===-1,[Wc.Forward]:r.x[Wc.Forward]||o.x===1},y:{[Wc.Backward]:r.y[Wc.Backward]||o.y===-1,[Wc.Forward]:r.y[Wc.Forward]||o.y===1}}},[t,e,i])}function tEe(n,e){const t=e!=null?n.get(e):void 0,i=t?t.node.current:null;return w5(r=>{var o;return e==null?null:(o=i??r)!=null?o:null},[i,e])}function nEe(n,e){return St.useMemo(()=>n.reduce((t,i)=>{const{sensor:r}=i,o=r.activators.map(s=>({eventName:s.eventName,handler:e(s.handler,i)}));return[...t,...o]},[]),[n,e])}var E4;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(E4||(E4={}));var pD;(function(n){n.Optimized="optimized"})(pD||(pD={}));const aW=new Map;function iEe(n,e){let{dragging:t,dependencies:i,config:r}=e;const[o,s]=St.useState(null),{frequency:a,measure:c,strategy:h}=r,m=St.useRef(n),y=F(),M=w4(y),x=St.useCallback(function(j){j===void 0&&(j=[]),!M.current&&s(q=>q===null?j:q.concat(j.filter(V=>!q.includes(V))))},[M]),k=St.useRef(null),P=w5(j=>{if(y&&!t)return aW;if(!j||j===aW||m.current!==n||o!=null){const q=new Map;for(let V of n){if(!V)continue;if(o&&o.length>0&&!o.includes(V.id)&&V.rect.current){q.set(V.id,V.rect.current);continue}const H=V.node.current,G=H?new _K(c(H),H):null;V.rect.current=G,G&&q.set(V.id,G)}return q}return j},[n,o,t,y,c]);return St.useEffect(()=>{m.current=n},[n]),St.useEffect(()=>{y||x()},[t,y]),St.useEffect(()=>{o&&o.length>0&&s(null)},[JSON.stringify(o)]),St.useEffect(()=>{y||typeof a!="number"||k.current!==null||(k.current=setTimeout(()=>{x(),k.current=null},a))},[a,y,x,...i]),{droppableRects:P,measureDroppableContainers:x,measuringScheduled:o!=null};function F(){switch(h){case E4.Always:return!1;case E4.BeforeDragging:return t;default:return!t}}}function Lre(n,e){return w5(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function rEe(n,e){return Lre(n,e)}function oEe(n){let{callback:e,disabled:t}=n;const i=vK(e),r=St.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(i)},[i,t]);return St.useEffect(()=>()=>r?.disconnect(),[r]),r}function _6(n){let{callback:e,disabled:t}=n;const i=vK(e),r=St.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(i)},[t]);return St.useEffect(()=>()=>r?.disconnect(),[r]),r}function sEe(n){return new _K(qx(n),n)}function lW(n,e,t){e===void 0&&(e=sEe);const[i,r]=St.useState(null);function o(){r(c=>{if(!n)return null;if(n.isConnected===!1){var h;return(h=c??t)!=null?h:null}const m=e(n);return JSON.stringify(c)===JSON.stringify(m)?c:m})}const s=oEe({callback(c){if(n)for(const h of c){const{type:m,target:y}=h;if(m==="childList"&&y instanceof HTMLElement&&y.contains(n)){o();break}}}}),a=_6({callback:o});return Ng(()=>{o(),n?(a?.observe(n),s?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),s?.disconnect())},[n]),i}function aEe(n){const e=Lre(n);return Bre(n,e)}const uW=[];function lEe(n){const e=St.useRef(n),t=w5(i=>n?i&&i!==uW&&n&&e.current&&n.parentNode===e.current.parentNode?i:CK(n):uW,[n]);return St.useEffect(()=>{e.current=n},[n]),t}function uEe(n){const[e,t]=St.useState(null),i=St.useRef(n),r=St.useCallback(o=>{const s=JB(o.target);s&&t(a=>a?(a.set(s,dD(s)),new Map(a)):null)},[]);return St.useEffect(()=>{const o=i.current;if(n!==o){s(o);const a=n.map(c=>{const h=JB(c);return h?(h.addEventListener("scroll",r,{passive:!0}),[h,dD(h)]):null}).filter(c=>c!=null);t(a.length?new Map(a):null),i.current=n}return()=>{s(n),s(o)};function s(a){a.forEach(c=>{const h=JB(c);h?.removeEventListener("scroll",r)})}},[r,n]),St.useMemo(()=>n.length?e?Array.from(e.values()).reduce((o,s)=>Z_(o,s),lm):Pre(n):lm,[n,e])}function cW(n,e){e===void 0&&(e=[]);const t=St.useRef(null);return St.useEffect(()=>{t.current=null},e),St.useEffect(()=>{const i=n!==lm;i&&!t.current&&(t.current=n),!i&&t.current&&(t.current=null)},[n]),t.current?GS(n,t.current):lm}function cEe(n){St.useEffect(()=>{if(!C6)return;const e=n.map(t=>{let{sensor:i}=t;return i.setup==null?void 0:i.setup()});return()=>{for(const t of e)t?.()}},n.map(e=>{let{sensor:t}=e;return t}))}function AEe(n,e){return St.useMemo(()=>n.reduce((t,i)=>{let{eventName:r,handler:o}=i;return t[r]=s=>{o(s,e)},t},{}),[n,e])}function Fre(n){return St.useMemo(()=>n?PSe(n):null,[n])}const AW=[];function hEe(n,e){e===void 0&&(e=qx);const[t]=n,i=Fre(t?wd(t):null),[r,o]=St.useState(AW);function s(){o(()=>n.length?n.map(c=>Rre(c)?i:new _K(e(c),c)):AW)}const a=_6({callback:s});return Ng(()=>{a?.disconnect(),s(),n.forEach(c=>a?.observe(c))},[n]),r}function dEe(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return M5(e)?e:n}function fEe(n){let{measure:e}=n;const[t,i]=St.useState(null),r=St.useCallback(h=>{for(const{target:m}of h)if(M5(m)){i(y=>{const M=e(m);return y?{...y,width:M.width,height:M.height}:M});break}},[e]),o=_6({callback:r}),s=St.useCallback(h=>{const m=dEe(h);o?.disconnect(),m&&o?.observe(m),i(m?e(m):null)},[e,o]),[a,c]=NS(s);return St.useMemo(()=>({nodeRef:a,rect:t,setRef:c}),[t,a,c])}const pEe=[{sensor:MK,options:{}},{sensor:Kre,options:{}}],mEe={current:{}},xw={draggable:{measure:iW},droppable:{measure:iW,strategy:E4.WhileDragging,frequency:pD.Optimized},dragOverlay:{measure:qx}};class M3 extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,i;return(t=(i=this.get(e))==null?void 0:i.node.current)!=null?t:void 0}}const gEe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new M3,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:WS},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:xw,measureDroppableContainers:WS,windowRect:null,measuringScheduled:!1},yEe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:WS,draggableNodes:new Map,over:null,measureDroppableContainers:WS},x6=St.createContext(yEe),zre=St.createContext(gEe);function vEe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new M3}}}function bEe(n,e){switch(e.type){case hc.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case hc.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case hc.DragEnd:case hc.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case hc.RegisterDroppable:{const{element:t}=e,{id:i}=t,r=new M3(n.droppable.containers);return r.set(i,t),{...n,droppable:{...n.droppable,containers:r}}}case hc.SetDroppableDisabled:{const{id:t,key:i,disabled:r}=e,o=n.droppable.containers.get(t);if(!o||i!==o.key)return n;const s=new M3(n.droppable.containers);return s.set(t,{...o,disabled:r}),{...n,droppable:{...n.droppable,containers:s}}}case hc.UnregisterDroppable:{const{id:t,key:i}=e,r=n.droppable.containers.get(t);if(!r||i!==r.key)return n;const o=new M3(n.droppable.containers);return o.delete(t),{...n,droppable:{...n.droppable,containers:o}}}default:return n}}function CEe(n){let{disabled:e}=n;const{active:t,activatorEvent:i,draggableNodes:r}=St.useContext(x6),o=AD(i),s=AD(t?.id);return St.useEffect(()=>{if(!e&&!i&&o&&s!=null){if(!bK(o)||document.activeElement===o.target)return;const a=r.get(s);if(!a)return;const{activatorNode:c,node:h}=a;if(!c.current&&!h.current)return;requestAnimationFrame(()=>{for(const m of[c.current,h.current]){if(!m)continue;const y=cSe(m);if(y){y.focus();break}}})}},[i,e,r,s,o]),null}function _Ee(n,e){let{transform:t,...i}=e;return n!=null&&n.length?n.reduce((r,o)=>o({transform:r,...i}),t):t}function xEe(n){return St.useMemo(()=>({draggable:{...xw.draggable,...n?.draggable},droppable:{...xw.droppable,...n?.droppable},dragOverlay:{...xw.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function MEe(n){let{activeNode:e,measure:t,initialRect:i,config:r=!0}=n;const o=St.useRef(!1),{x:s,y:a}=typeof r=="boolean"?{x:r,y:r}:r;Ng(()=>{if(!s&&!a||!e){o.current=!1;return}if(o.current||!i)return;const h=e?.node.current;if(!h||h.isConnected===!1)return;const m=t(h),y=Bre(m,i);if(s||(y.x=0),a||(y.y=0),o.current=!0,Math.abs(y.x)>0||Math.abs(y.y)>0){const M=Ire(h);M&&M.scrollBy({top:y.y,left:y.x})}},[e,s,a,i,t])}const jre=St.createContext({...lm,scaleX:1,scaleY:1});var ky;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(ky||(ky={}));const wEe=St.memo(function(e){var t,i,r,o;let{id:s,accessibility:a,autoScroll:c=!0,children:h,sensors:m=pEe,collisionDetection:y=OSe,measuring:M,modifiers:x,...k}=e;const P=St.useReducer(bEe,void 0,vEe),[F,j]=P,[q,V]=mSe(),[H,G]=St.useState(ky.Uninitialized),Y=H===ky.Initialized,{draggable:{active:z,nodes:se,translate:le},droppable:{containers:me}}=F,de=z!=null?se.get(z):null,be=St.useRef({initial:null,translated:null}),Ee=St.useMemo(()=>{var st;return z!=null?{id:z,data:(st=de?.data)!=null?st:mEe,rect:be}:null},[z,de]),De=St.useRef(null),[je,Ie]=St.useState(null),[Qe,et]=St.useState(null),dt=w4(k,Object.values(k)),ke=S5("DndDescribedBy",s),we=St.useMemo(()=>me.getEnabled(),[me]),ze=xEe(M),{droppableRects:xe,measureDroppableContainers:At,measuringScheduled:it}=iEe(we,{dragging:Y,dependencies:[le.x,le.y],config:ze.droppable}),bt=tEe(se,z),Bt=St.useMemo(()=>Qe?hD(Qe):null,[Qe]),Ke=Pt(),Te=rEe(bt,ze.draggable.measure);MEe({activeNode:z!=null?se.get(z):null,config:Ke.layoutShiftCompensation,initialRect:Te,measure:ze.draggable.measure});const Se=lW(bt,ze.draggable.measure,Te),Ne=lW(bt?bt.parentElement:null),ut=St.useRef({activatorEvent:null,active:null,activeNode:bt,collisionRect:null,collisions:null,droppableRects:xe,draggableNodes:se,draggingNode:null,draggingNodeRect:null,droppableContainers:me,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),rt=me.getNodeFor((t=ut.current.over)==null?void 0:t.id),pt=fEe({measure:ze.dragOverlay.measure}),Dt=(i=pt.nodeRef.current)!=null?i:bt,Ot=Y?(r=pt.rect)!=null?r:Se:null,Jt=!!(pt.nodeRef.current&&pt.rect),Tn=aEe(Jt?null:Se),Ln=Fre(Dt?wd(Dt):null),ii=lEe(Y?rt??bt:null),wn=hEe(ii),Rn=_Ee(x,{transform:{x:le.x-Tn.x,y:le.y-Tn.y,scaleX:1,scaleY:1},activatorEvent:Qe,active:Ee,activeNodeRect:Se,containerNodeRect:Ne,draggingNodeRect:Ot,over:ut.current.over,overlayNodeRect:pt.rect,scrollableAncestors:ii,scrollableAncestorRects:wn,windowRect:Ln}),gn=Bt?Z_(Bt,le):null,Yn=uEe(ii),Dn=cW(Yn),Tt=cW(Yn,[Se]),_e=Z_(Rn,Dn),oe=Ot?kSe(Ot,Rn):null,ee=Ee&&oe?y({active:Ee,collisionRect:oe,droppableRects:xe,droppableContainers:we,pointerCoordinates:gn}):null,ne=wSe(ee,"id"),[ue,ye]=St.useState(null),Ue=Jt?Rn:Z_(Rn,Tt),Ve=BSe(Ue,(o=ue?.rect)!=null?o:null,Se),lt=St.useRef(null),ge=St.useCallback((st,fn)=>{let{sensor:Fn,options:pn}=fn;if(De.current==null)return;const $n=se.get(De.current);if(!$n)return;const Zn=st.nativeEvent,ai=new Fn({active:De.current,activeNode:$n,event:Zn,options:pn,context:ut,onAbort(Ti){if(!se.get(Ti))return;const{onDragAbort:oi}=dt.current,Pi={id:Ti};oi?.(Pi),q({type:"onDragAbort",event:Pi})},onPending(Ti,tr,oi,Pi){if(!se.get(Ti))return;const{onDragPending:pr}=dt.current,Zi={id:Ti,constraint:tr,initialCoordinates:oi,offset:Pi};pr?.(Zi),q({type:"onDragPending",event:Zi})},onStart(Ti){const tr=De.current;if(tr==null)return;const oi=se.get(tr);if(!oi)return;const{onDragStart:Pi}=dt.current,Zt={activatorEvent:Zn,active:{id:tr,data:oi.data,rect:be}};Z2.unstable_batchedUpdates(()=>{Pi?.(Zt),G(ky.Initializing),j({type:hc.DragStart,initialCoordinates:Ti,active:tr}),q({type:"onDragStart",event:Zt}),Ie(lt.current),et(Zn)})},onMove(Ti){j({type:hc.DragMove,coordinates:Ti})},onEnd:Hi(hc.DragEnd),onCancel:Hi(hc.DragCancel)});lt.current=ai;function Hi(Ti){return async function(){const{active:oi,collisions:Pi,over:Zt,scrollAdjustedTranslate:pr}=ut.current;let Zi=null;if(oi&&pr){const{cancelDrop:ea}=dt.current;Zi={activatorEvent:Zn,active:oi,collisions:Pi,delta:pr,over:Zt},Ti===hc.DragEnd&&typeof ea=="function"&&await Promise.resolve(ea(Zi))&&(Ti=hc.DragCancel)}De.current=null,Z2.unstable_batchedUpdates(()=>{j({type:Ti}),G(ky.Uninitialized),ye(null),Ie(null),et(null),lt.current=null;const ea=Ti===hc.DragEnd?"onDragEnd":"onDragCancel";if(Zi){const no=dt.current[ea];no?.(Zi),q({type:ea,event:Zi})}})}}},[se]),Be=St.useCallback((st,fn)=>(Fn,pn)=>{const $n=Fn.nativeEvent,Zn=se.get(pn);if(De.current!==null||!Zn||$n.dndKit||$n.defaultPrevented)return;const ai={active:Zn};st(Fn,fn.options,ai)===!0&&($n.dndKit={capturedBy:fn.sensor},De.current=pn,ge(Fn,fn))},[se,ge]),v=nEe(m,Be);cEe(m),Ng(()=>{Se&&H===ky.Initializing&&G(ky.Initialized)},[Se,H]),St.useEffect(()=>{const{onDragMove:st}=dt.current,{active:fn,activatorEvent:Fn,collisions:pn,over:$n}=ut.current;if(!fn||!Fn)return;const Zn={active:fn,activatorEvent:Fn,collisions:pn,delta:{x:_e.x,y:_e.y},over:$n};Z2.unstable_batchedUpdates(()=>{st?.(Zn),q({type:"onDragMove",event:Zn})})},[_e.x,_e.y]),St.useEffect(()=>{const{active:st,activatorEvent:fn,collisions:Fn,droppableContainers:pn,scrollAdjustedTranslate:$n}=ut.current;if(!st||De.current==null||!fn||!$n)return;const{onDragOver:Zn}=dt.current,ai=pn.get(ne),Hi=ai&&ai.rect.current?{id:ai.id,rect:ai.rect.current,data:ai.data,disabled:ai.disabled}:null,Ti={active:st,activatorEvent:fn,collisions:Fn,delta:{x:$n.x,y:$n.y},over:Hi};Z2.unstable_batchedUpdates(()=>{ye(Hi),Zn?.(Ti),q({type:"onDragOver",event:Ti})})},[ne]),Ng(()=>{ut.current={activatorEvent:Qe,active:Ee,activeNode:bt,collisionRect:oe,collisions:ee,droppableRects:xe,draggableNodes:se,draggingNode:Dt,draggingNodeRect:Ot,droppableContainers:me,over:ue,scrollableAncestors:ii,scrollAdjustedTranslate:_e},be.current={initial:Ot,translated:oe}},[Ee,bt,ee,oe,se,Dt,Ot,xe,me,ue,ii,_e]),XSe({...Ke,delta:le,draggingRect:oe,pointerCoordinates:gn,scrollableAncestors:ii,scrollableAncestorRects:wn});const yt=St.useMemo(()=>({active:Ee,activeNode:bt,activeNodeRect:Se,activatorEvent:Qe,collisions:ee,containerNodeRect:Ne,dragOverlay:pt,draggableNodes:se,droppableContainers:me,droppableRects:xe,over:ue,measureDroppableContainers:At,scrollableAncestors:ii,scrollableAncestorRects:wn,measuringConfiguration:ze,measuringScheduled:it,windowRect:Ln}),[Ee,bt,Se,Qe,ee,Ne,pt,se,me,xe,ue,At,ii,wn,ze,it,Ln]),Mt=St.useMemo(()=>({activatorEvent:Qe,activators:v,active:Ee,activeNodeRect:Se,ariaDescribedById:{draggable:ke},dispatch:j,draggableNodes:se,over:ue,measureDroppableContainers:At}),[Qe,v,Ee,Se,j,ke,se,ue,At]);return On.createElement(Ore.Provider,{value:V},On.createElement(x6.Provider,{value:Mt},On.createElement(zre.Provider,{value:yt},On.createElement(jre.Provider,{value:Ve},h)),On.createElement(CEe,{disabled:a?.restoreFocus===!1})),On.createElement(vSe,{...a,hiddenTextDescribedById:ke}));function Pt(){const st=je?.autoScrollEnabled===!1,fn=typeof c=="object"?c.enabled===!1:c===!1,Fn=Y&&!st&&!fn;return typeof c=="object"?{...c,enabled:Fn}:{enabled:Fn}}}),SEe=St.createContext(null),hW="button",EEe="Draggable";function OEe(n){let{id:e,data:t,disabled:i=!1,attributes:r}=n;const o=S5(EEe),{activators:s,activatorEvent:a,active:c,activeNodeRect:h,ariaDescribedById:m,draggableNodes:y,over:M}=St.useContext(x6),{role:x=hW,roleDescription:k="draggable",tabIndex:P=0}=r??{},F=c?.id===e,j=St.useContext(F?jre:SEe),[q,V]=NS(),[H,G]=NS(),Y=AEe(s,e),z=w4(t);Ng(()=>(y.set(e,{id:e,key:o,node:q,activatorNode:H,data:z}),()=>{const le=y.get(e);le&&le.key===o&&y.delete(e)}),[y,e]);const se=St.useMemo(()=>({role:x,tabIndex:P,"aria-disabled":i,"aria-pressed":F&&x===hW?!0:void 0,"aria-roledescription":k,"aria-describedby":m.draggable}),[i,x,P,F,k,m.draggable]);return{active:c,activatorEvent:a,activeNodeRect:h,attributes:se,isDragging:F,listeners:i?void 0:Y,node:q,over:M,setNodeRef:V,setActivatorNodeRef:G,transform:j}}function BEe(){return St.useContext(zre)}const IEe="Droppable",kEe={timeout:25};function TEe(n){let{data:e,disabled:t=!1,id:i,resizeObserverConfig:r}=n;const o=S5(IEe),{active:s,dispatch:a,over:c,measureDroppableContainers:h}=St.useContext(x6),m=St.useRef({disabled:t}),y=St.useRef(!1),M=St.useRef(null),x=St.useRef(null),{disabled:k,updateMeasurementsFor:P,timeout:F}={...kEe,...r},j=w4(P??i),q=St.useCallback(()=>{if(!y.current){y.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{h(Array.isArray(j.current)?j.current:[j.current]),x.current=null},F)},[F]),V=_6({callback:q,disabled:k||!s}),H=St.useCallback((se,le)=>{V&&(le&&(V.unobserve(le),y.current=!1),se&&V.observe(se))},[V]),[G,Y]=NS(H),z=w4(e);return St.useEffect(()=>{!V||!G.current||(V.disconnect(),y.current=!1,V.observe(G.current))},[G,V]),St.useEffect(()=>(a({type:hc.RegisterDroppable,element:{id:i,key:o,disabled:t,node:G,rect:M,data:z}}),()=>a({type:hc.UnregisterDroppable,key:o,id:i})),[i]),St.useEffect(()=>{t!==m.current.disabled&&(a({type:hc.SetDroppableDisabled,id:i,key:o,disabled:t}),m.current.disabled=t)},[i,o,t,a]),{active:s,rect:M,isOver:c?.id===i,node:G,over:c,setNodeRef:Y}}function Nre(n,e,t){const i=n.slice();return i.splice(t<0?i.length+t:t,0,i.splice(e,1)[0]),i}function REe(n,e){return n.reduce((t,i,r)=>{const o=e.get(i);return o&&(t[r]=o),t},Array(n.length))}function DM(n){return n!==null&&n>=0}function DEe(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function PEe(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const Gre=n=>{let{rects:e,activeIndex:t,overIndex:i,index:r}=n;const o=Nre(e,i,t),s=e[r],a=o[r];return!a||!s?null:{x:a.left-s.left,y:a.top-s.top,scaleX:a.width/s.width,scaleY:a.height/s.height}},PM={scaleX:1,scaleY:1},UEe=n=>{var e;let{activeIndex:t,activeNodeRect:i,index:r,rects:o,overIndex:s}=n;const a=(e=o[t])!=null?e:i;if(!a)return null;if(r===t){const h=o[s];return h?{x:0,y:t<s?h.top+h.height-(a.top+a.height):h.top-a.top,...PM}:null}const c=KEe(o,r,t);return r>t&&r<=s?{x:0,y:-a.height-c,...PM}:r<t&&r>=s?{x:0,y:a.height+c,...PM}:{x:0,y:0,...PM}};function KEe(n,e,t){const i=n[e],r=n[e-1],o=n[e+1];return i?t<e?r?i.top-(r.top+r.height):o?o.top-(i.top+i.height):0:o?o.top-(i.top+i.height):r?i.top-(r.top+r.height):0:0}const Wre="Sortable",Qre=On.createContext({activeIndex:-1,containerId:Wre,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Gre,disabled:{draggable:!1,droppable:!1}});function LEe(n){let{children:e,id:t,items:i,strategy:r=Gre,disabled:o=!1}=n;const{active:s,dragOverlay:a,droppableRects:c,over:h,measureDroppableContainers:m}=BEe(),y=S5(Wre,t),M=a.rect!==null,x=St.useMemo(()=>i.map(Y=>typeof Y=="object"&&"id"in Y?Y.id:Y),[i]),k=s!=null,P=s?x.indexOf(s.id):-1,F=h?x.indexOf(h.id):-1,j=St.useRef(x),q=!DEe(x,j.current),V=F!==-1&&P===-1||q,H=PEe(o);Ng(()=>{q&&k&&m(x)},[q,x,k,m]),St.useEffect(()=>{j.current=x},[x]);const G=St.useMemo(()=>({activeIndex:P,containerId:y,disabled:H,disableTransforms:V,items:x,overIndex:F,useDragOverlay:M,sortedRects:REe(x,c),strategy:r}),[P,y,H.draggable,H.droppable,V,x,F,c,M,r]);return On.createElement(Qre.Provider,{value:G},e)}const FEe=n=>{let{id:e,items:t,activeIndex:i,overIndex:r}=n;return Nre(t,i,r).indexOf(e)},zEe=n=>{let{containerId:e,isSorting:t,wasDragging:i,index:r,items:o,newIndex:s,previousItems:a,previousContainerId:c,transition:h}=n;return!h||!i||a!==o&&r===s?!1:t?!0:s!==r&&e===c},jEe={duration:200,easing:"ease"},qre="transform",NEe=S4.Transition.toString({property:qre,duration:0,easing:"linear"}),GEe={roleDescription:"sortable"};function WEe(n){let{disabled:e,index:t,node:i,rect:r}=n;const[o,s]=St.useState(null),a=St.useRef(t);return Ng(()=>{if(!e&&t!==a.current&&i.current){const c=r.current;if(c){const h=qx(i.current,{ignoreTransform:!0}),m={x:c.left-h.left,y:c.top-h.top,scaleX:c.width/h.width,scaleY:c.height/h.height};(m.x||m.y)&&s(m)}}t!==a.current&&(a.current=t)},[e,t,i,r]),St.useEffect(()=>{o&&s(null)},[o]),o}function QEe(n){let{animateLayoutChanges:e=zEe,attributes:t,disabled:i,data:r,getNewIndex:o=FEe,id:s,strategy:a,resizeObserverConfig:c,transition:h=jEe}=n;const{items:m,containerId:y,activeIndex:M,disabled:x,disableTransforms:k,sortedRects:P,overIndex:F,useDragOverlay:j,strategy:q}=St.useContext(Qre),V=qEe(i,x),H=m.indexOf(s),G=St.useMemo(()=>({sortable:{containerId:y,index:H,items:m},...r}),[y,r,H,m]),Y=St.useMemo(()=>m.slice(m.indexOf(s)),[m,s]),{rect:z,node:se,isOver:le,setNodeRef:me}=TEe({id:s,data:G,disabled:V.droppable,resizeObserverConfig:{updateMeasurementsFor:Y,...c}}),{active:de,activatorEvent:be,activeNodeRect:Ee,attributes:De,setNodeRef:je,listeners:Ie,isDragging:Qe,over:et,setActivatorNodeRef:dt,transform:ke}=OEe({id:s,data:G,attributes:{...GEe,...t},disabled:V.draggable}),we=sSe(me,je),ze=!!de,xe=ze&&!k&&DM(M)&&DM(F),At=!j&&Qe,it=At&&xe?ke:null,Bt=xe?it??(a??q)({rects:P,activeNodeRect:Ee,activeIndex:M,overIndex:F,index:H}):null,Ke=DM(M)&&DM(F)?o({id:s,items:m,activeIndex:M,overIndex:F}):H,Te=de?.id,Se=St.useRef({activeId:Te,items:m,newIndex:Ke,containerId:y}),Ne=m!==Se.current.items,ut=e({active:de,containerId:y,isDragging:Qe,isSorting:ze,id:s,index:H,items:m,newIndex:Se.current.newIndex,previousItems:Se.current.items,previousContainerId:Se.current.containerId,transition:h,wasDragging:Se.current.activeId!=null}),rt=WEe({disabled:!ut,index:H,node:se,rect:z});return St.useEffect(()=>{ze&&Se.current.newIndex!==Ke&&(Se.current.newIndex=Ke),y!==Se.current.containerId&&(Se.current.containerId=y),m!==Se.current.items&&(Se.current.items=m)},[ze,Ke,y,m]),St.useEffect(()=>{if(Te===Se.current.activeId)return;if(Te!=null&&Se.current.activeId==null){Se.current.activeId=Te;return}const Dt=setTimeout(()=>{Se.current.activeId=Te},50);return()=>clearTimeout(Dt)},[Te]),{active:de,activeIndex:M,attributes:De,data:G,rect:z,index:H,newIndex:Ke,items:m,isOver:le,isSorting:ze,isDragging:Qe,listeners:Ie,node:se,overIndex:F,over:et,setNodeRef:we,setActivatorNodeRef:dt,setDroppableNodeRef:me,setDraggableNodeRef:je,transform:rt??Bt,transition:pt()};function pt(){if(rt||Ne&&Se.current.newIndex===H)return NEe;if(!(At&&!bK(be)||!h)&&(ze||ut))return S4.Transition.toString({...h,property:qre})}}function qEe(n,e){var t,i;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n?.draggable)!=null?t:e.draggable,droppable:(i=n?.droppable)!=null?i:e.droppable}}Ns.Down,Ns.Right,Ns.Up,Ns.Left;function ub(){var n="/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",e="e73e8fb606fcd7318a8222b2e50c576ed3ad8702",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",statementMap:{0:{start:{line:6,column:22},end:{line:10,column:5}},1:{start:{line:11,column:4},end:{line:11,column:154}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:12,column:3}},line:5}},branchMap:{0:{loc:{start:{line:11,column:11},end:{line:11,column:153}},type:"cond-expr",locations:[{start:{line:11,column:52},end:{line:11,column:92}},{start:{line:11,column:111},end:{line:11,column:153}}],line:11}},s:{0:0,1:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx"],names:[],mappings:"AAeoC;AAfpC,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAO7C,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY;AAAA,MAChB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,GAAG,KAAK,MAAM;AAAA,IAChB;AACA,WAAO,KAAK,MAAM,cAAc,oBAAC,iBAAc,OAAO,WAAU,IAAK,oBAAC,mBAAgB,OAAO,WAAW;AAAA,EAC1G;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e73e8fb606fcd7318a8222b2e50c576ed3ad8702"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ub=function(){return s},s}ub();class YEe extends On.Component{render(){ub().f[0]++;const e=(ub().s[0]++,{width:20,height:20,...this.props.style});return ub().s[1]++,this.props.isCollapsed?(ub().b[0][0]++,ie.jsx(YX,{style:e})):(ub().b[0][1]++,ie.jsx(qX,{style:e}))}}function T_(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",e="b04bfec534013c327fd210571832bbd2813a944a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:32,column:9}},1:{start:{line:11,column:25},end:{line:11,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:33,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:25},end:{line:11,column:72}},line:11}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx"],names:[],mappings:"AAcM,SAIE,KAJF;AAdN,OAAO,WAAW;AAClB,OAAO,eAAe;AAUtB,qBAAqB,uBAAuB,MAAM,UAA+B;AAAA,EAC/E,SAAS;AACP,WAAO,oBAAC,QAAG,WAAU,6BACnB;AAAA,MAAC;AAAA;AAAA,QAAI,WAAU;AAAA,QACb,eAAa,sBAAoB,KAAK,MAAM,aAAa;AAAA,QACzD,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,QAE7D;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,iBAAe,KAAK,MAAM,eAAe;AAAA,cACzC,iBAAe,KAAK,MAAM;AAAA,cAEzB,eAAK,MAAM;AAAA;AAAA,UACd;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ,IAAI,OAAO,GAAG;AAAA,cAC/B,aAAa,KAAK,MAAM;AAAA;AAAA,UAC1B;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b04bfec534013c327fd210571832bbd2813a944a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return T_=function(){return s},s}T_();class $Ee extends On.Component{render(){return T_().f[0]++,T_().s[0]++,ie.jsx("li",{className:"maputnik-layer-list-group",children:ie.jsxs("div",{className:"maputnik-layer-list-group-header","data-wd-key":"layer-list-group:"+this.props["data-wd-key"],onClick:e=>(T_().f[1]++,T_().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:[ie.jsx("button",{className:"maputnik-layer-list-group-title","aria-controls":this.props["aria-controls"],"aria-expanded":this.props.isActive,children:this.props.title}),ie.jsx("span",{className:"maputnik-space"}),ie.jsx(YEe,{style:{height:14,width:14},isCollapsed:this.props.isActive})]})})}}function Gi(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",e="65a9cb0d1a08cfab21a14c1632991e31e3063aa8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",statementMap:{0:{start:{line:9,column:23},end:{line:22,column:1}},1:{start:{line:10,column:44},end:{line:10,column:49}},2:{start:{line:11,column:2},end:{line:21,column:7}},3:{start:{line:25,column:4},end:{line:34,column:5}},4:{start:{line:27,column:8},end:{line:27,column:54}},5:{start:{line:29,column:8},end:{line:29,column:53}},6:{start:{line:31,column:8},end:{line:31,column:56}},7:{start:{line:33,column:8},end:{line:33,column:49}},8:{start:{line:37,column:51},end:{line:37,column:61}},9:{start:{line:38,column:25},end:{line:38,column:27}},10:{start:{line:39,column:4},end:{line:44,column:5}},11:{start:{line:40,column:6},end:{line:40,column:76}},12:{start:{line:41,column:6},end:{line:43,column:7}},13:{start:{line:42,column:8},end:{line:42,column:103}},14:{start:{line:45,column:4},end:{line:56,column:6}},15:{start:{line:59,column:22},end:{line:145,column:2}},16:{start:{line:69,column:6},end:{line:69,column:11}},17:{start:{line:77,column:6},end:{line:77,column:40}},18:{start:{line:78,column:16},end:{line:82,column:3}},19:{start:{line:83,column:27},end:{line:83,column:69}},20:{start:{line:84,column:20},end:{line:84,column:23}},21:{start:{line:85,column:2},end:{line:144,column:7}},22:{start:{line:89,column:8},end:{line:89,column:25}},23:{start:{line:90,column:8},end:{line:92,column:9}},24:{start:{line:91,column:10},end:{line:91,column:35}},25:{start:{line:96,column:23},end:{line:96,column:60}},26:{start:{line:120,column:29},end:{line:120,column:61}},27:{start:{line:129,column:29},end:{line:129,column:58}},28:{start:{line:139,column:29},end:{line:139,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:23},end:{line:9,column:24}},loc:{start:{line:9,column:34},end:{line:22,column:1}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:35,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:57,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:59,column:39},end:{line:59,column:40}},loc:{start:{line:59,column:55},end:{line:145,column:1}},line:59},4:{name:"(anonymous_4)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:24},end:{line:64,column:5}},line:63},5:{name:"(anonymous_5)",decl:{start:{line:65,column:21},end:{line:65,column:22}},loc:{start:{line:65,column:27},end:{line:66,column:5}},line:65},6:{name:"(anonymous_6)",decl:{start:{line:67,column:30},end:{line:67,column:31}},loc:{start:{line:67,column:36},end:{line:68,column:5}},line:67},7:{name:"(anonymous_7)",decl:{start:{line:88,column:11},end:{line:88,column:12}},loc:{start:{line:88,column:21},end:{line:93,column:7}},line:88},8:{name:"(anonymous_8)",decl:{start:{line:96,column:15},end:{line:96,column:16}},loc:{start:{line:96,column:23},end:{line:96,column:60}},line:96},9:{name:"(anonymous_9)",decl:{start:{line:120,column:21},end:{line:120,column:22}},loc:{start:{line:120,column:29},end:{line:120,column:61}},line:120},10:{name:"(anonymous_10)",decl:{start:{line:129,column:21},end:{line:129,column:22}},loc:{start:{line:129,column:29},end:{line:129,column:58}},line:129},11:{name:"(anonymous_11)",decl:{start:{line:139,column:21},end:{line:139,column:22}},loc:{start:{line:139,column:29},end:{line:139,column:70}},line:139}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:34,column:5}},type:"switch",locations:[{start:{line:26,column:6},end:{line:27,column:54}},{start:{line:28,column:6},end:{line:29,column:53}},{start:{line:30,column:6},end:{line:31,column:56}},{start:{line:32,column:6},end:{line:33,column:49}}],line:25},1:{loc:{start:{line:39,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:44,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:41,column:6},end:{line:43,column:7}},type:"if",locations:[{start:{line:41,column:6},end:{line:43,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:61,column:4},end:{line:61,column:22}},type:"default-arg",locations:[{start:{line:61,column:17},end:{line:61,column:22}}],line:61},4:{loc:{start:{line:62,column:4},end:{line:62,column:26}},type:"default-arg",locations:[{start:{line:62,column:17},end:{line:62,column:26}}],line:62},5:{loc:{start:{line:63,column:4},end:{line:64,column:5}},type:"default-arg",locations:[{start:{line:63,column:18},end:{line:64,column:5}}],line:63},6:{loc:{start:{line:65,column:4},end:{line:66,column:5}},type:"default-arg",locations:[{start:{line:65,column:21},end:{line:66,column:5}}],line:65},7:{loc:{start:{line:67,column:4},end:{line:68,column:5}},type:"default-arg",locations:[{start:{line:67,column:30},end:{line:68,column:5}}],line:67},8:{loc:{start:{line:81,column:13},end:{line:81,column:33}},type:"cond-expr",locations:[{start:{line:81,column:26},end:{line:81,column:29}},{start:{line:81,column:32},end:{line:81,column:33}}],line:81},9:{loc:{start:{line:83,column:27},end:{line:83,column:69}},type:"cond-expr",locations:[{start:{line:83,column:54},end:{line:83,column:60}},{start:{line:83,column:63},end:{line:83,column:69}}],line:83},10:{loc:{start:{line:90,column:8},end:{line:92,column:9}},type:"if",locations:[{start:{line:90,column:8},end:{line:92,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0,0,0],1:[0,0],2:[0,0],3:[0],4:[0],5:[0],6:[0],7:[0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx"],names:[],mappings:"AAmBS,SACL,KADK;AAnBT,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,eAAe,cAAc,iBAAiB,gBAAe;AACrE,SAAS,mBAAmB;AAC5B,SAAQ,mBAAkB;AAC1B,SAAQ,WAAU;AAElB,OAAO,eAAe;AAUtB,MAAM,iBAAgD,CAAC,UAAU;AAC/D,QAAM,EAAC,gBAAgB,cAAa,IAAI;AACxC,SAAO,qBAAC,SAAI,WAAU,mCAAmC,GAAG,gBAAiB,GAAG,eAC9E;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,MAAM,MAAM;AAAA,QACZ,OAAO,EAAE,OAAO,OAAO,QAAQ,OAAO,eAAe,SAAS;AAAA;AAAA,IAChE;AAAA,IACA,oBAAC,YAAO,WAAU,+BACf,gBAAM,SACT;AAAA,KACF;AACF;AAUA,MAAM,mBAAmB,MAAM,UAA2B;AAAA,EACxD,aAAa;AACX,YAAO,KAAK,MAAM,QAAQ;AAAA,MACxB,KAAK;AAAa,eAAO,oBAAC,iBAAc;AAAA,MACxC,KAAK;AAAQ,eAAO,oBAAC,gBAAa;AAAA,MAClC,KAAK;AAAQ,eAAO,oBAAC,mBAAgB;AAAA,MACrC,KAAK;AAAU,eAAO,oBAAC,YAAS;AAAA,IAClC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,gBAAgB,mBAAkB,IAAI,KAAK;AAElD,QAAI,iBAAiB;AACrB,QAAI,gBAAgB;AAClB,uBAAiB,oCAAoC,cAAc;AAEnE,UAAI,oBAAoB;AACtB,0BAAkB,qCAAqC,cAAc,KAAK,kBAAkB;AAAA,MAC9F;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,UAAU;AAAA,QACV,OAAO,KAAK,MAAM;AAAA,QAClB,WAAW,mCAAmC,cAAc;AAAA,QAC5D,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QACpB,eAAY;AAAA,QAEX,eAAK,WAAW;AAAA;AAAA,IACnB;AAAA,EACF;AACF;AAgBA,MAAM,gBAAgB,MAAM,WAA8C,CAAC,OAAO,QAAQ;AACxF,QAAM;AAAA,IACJ,aAAa;AAAA,IACb,aAAa;AAAA,IACb,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,0BAA0B,MAAM;AAAA,IAAC;AAAA,EACnC,IAAI;AAEJ,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY,EAAC,IAAI,MAAM,QAAO,CAAC;AAEnC,QAAM,QAAQ;AAAA,IACZ,WAAW,IAAI,UAAU,SAAS,SAAS;AAAA,IAC3C;AAAA,IACA,SAAS,aAAa,MAAM;AAAA,EAC9B;AAEA,QAAM,mBAAmB,eAAe,YAAY,SAAS;AAG7D,QAAM,YAAY;AAElB,SAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C;AAAA,IAAC;AAAA;AAAA,MACC,KAAK,CAAC,SAAS;AACb,mBAAW,IAAI;AACf,YAAI,WAAW;AACb,oBAAU,UAAU;AAAA,QACtB;AAAA,MACF;AAAA,MACA;AAAA,MACA,IAAI,MAAM;AAAA,MACV,SAAS,QAAM,MAAM,cAAc,MAAM,UAAU;AAAA,MACnD,eAAa,qBAAqB,MAAM;AAAA,MACxC,WAAW,WAAW;AAAA,QACpB,4BAA4B;AAAA,QAC5B,qCAAqC;AAAA,QACrC,CAAC,MAAM,SAAU,GAAG;AAAA,MACtB,CAAC;AAAA,MACD;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,MAAM;AAAA,YACf,WAAW,MAAM;AAAA,YACjB,gBAAgB;AAAA,YAChB,eAAe;AAAA;AAAA,QACjB;AAAA,QACA,oBAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAG;AAAA,QAC5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAqB,MAAM,UAAQ;AAAA,YAC1C,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,SAAS,QAAM,eAAgB,MAAM,UAAU;AAAA;AAAA,QACjD;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAqB,MAAM,UAAQ;AAAA,YAC1C,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,SAAS,QAAM,YAAa,MAAM,UAAU;AAAA;AAAA,QAC9C;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAmB,MAAM,UAAQ;AAAA,YACxC,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,oBAAoB;AAAA,YACpB,SAAS,QAAM,wBAAyB,MAAM,UAAU;AAAA;AAAA,QAC1D;AAAA;AAAA;AAAA,EACF,GACF;AACF,CAAC;AAED,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"65a9cb0d1a08cfab21a14c1632991e31e3063aa8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Gi=function(){return s},s}Gi();Gi().s[0]++;const VEe=n=>{Gi().f[0]++;const{dragAttributes:e,dragListeners:t}=(Gi().s[1]++,n);return Gi().s[2]++,ie.jsxs("div",{className:"maputnik-layer-list-item-handle",...e,...t,children:[ie.jsx($X,{className:"layer-handle__icon",type:n.layerType,style:{width:"1em",height:"1em",verticalAlign:"middle"}}),ie.jsx("button",{className:"maputnik-layer-list-item-id",children:n.layerId})]})};class n8 extends On.Component{renderIcon(){switch(Gi().f[1]++,Gi().s[3]++,this.props.action){case"duplicate":return Gi().b[0][0]++,Gi().s[4]++,ie.jsx(Ufe,{});case"show":return Gi().b[0][1]++,Gi().s[5]++,ie.jsx(Pfe,{});case"hide":return Gi().b[0][2]++,Gi().s[6]++,ie.jsx(Dfe,{});case"delete":return Gi().b[0][3]++,Gi().s[7]++,ie.jsx($b,{})}}render(){Gi().f[2]++;const{classBlockName:e,classBlockModifier:t}=(Gi().s[8]++,this.props);let i=(Gi().s[9]++,"");return Gi().s[10]++,e?(Gi().b[1][0]++,Gi().s[11]++,i=`maputnik-layer-list-icon-action__${e}`,Gi().s[12]++,t?(Gi().b[2][0]++,Gi().s[13]++,i+=` maputnik-layer-list-icon-action__${e}--${t}`):Gi().b[2][1]++):Gi().b[1][1]++,Gi().s[14]++,ie.jsx("button",{tabIndex:-1,title:this.props.action,className:`maputnik-layer-list-icon-action ${i}`,"data-wd-key":this.props.wdKey,onClick:this.props.onClick,"aria-hidden":"true",children:this.renderIcon()})}}const HEe=(Gi().s[15]++,On.forwardRef((n,e)=>{Gi().f[3]++;const{isSelected:t=(Gi().b[3][0]++,!1),visibility:i=(Gi().b[4][0]++,"visible"),onLayerCopy:r=(Gi().b[5][0]++,()=>{Gi().f[4]++}),onLayerDestroy:o=(Gi().b[6][0]++,()=>{Gi().f[5]++}),onLayerVisibilityToggle:s=(Gi().b[7][0]++,()=>{Gi().f[6]++})}=(Gi().s[16]++,n),{attributes:a,listeners:c,setNodeRef:h,transform:m,transition:y,isDragging:M}=(Gi().s[17]++,QEe({id:n.layerId})),x=(Gi().s[18]++,{transform:S4.Transform.toString(m),transition:y,opacity:M?(Gi().b[8][0]++,.5):(Gi().b[8][1]++,1)}),k=(Gi().s[19]++,i==="visible"?(Gi().b[9][0]++,"show"):(Gi().b[9][1]++,"hide")),P=(Gi().s[20]++,e);return Gi().s[21]++,ie.jsx(rx.Provider,{value:{size:"14px"},children:ie.jsxs("li",{ref:F=>{Gi().f[7]++,Gi().s[22]++,h(F),Gi().s[23]++,P?(Gi().b[10][0]++,Gi().s[24]++,P.current=F):Gi().b[10][1]++},style:x,id:n.id,onClick:F=>(Gi().f[8]++,Gi().s[25]++,n.onLayerSelect(n.layerIndex)),"data-wd-key":"layer-list-item:"+n.layerId,className:Yg({"maputnik-layer-list-item":!0,"maputnik-layer-list-item-selected":t,[n.className]:!0}),children:[ie.jsx(VEe,{layerId:n.layerId,layerType:n.layerType,dragAttributes:a,dragListeners:c}),ie.jsx("span",{style:{flexGrow:1}}),ie.jsx(n8,{wdKey:"layer-list-item:"+n.layerId+":delete",action:"delete",classBlockName:"delete",onClick:F=>(Gi().f[9]++,Gi().s[26]++,o(n.layerIndex))}),ie.jsx(n8,{wdKey:"layer-list-item:"+n.layerId+":copy",action:"duplicate",classBlockName:"duplicate",onClick:F=>(Gi().f[10]++,Gi().s[27]++,r(n.layerIndex))}),ie.jsx(n8,{wdKey:"layer-list-item:"+n.layerId+":toggle-visibility",action:k,classBlockName:"visibility",classBlockModifier:k,onClick:F=>(Gi().f[11]++,Gi().s[28]++,s(n.layerIndex))})]})})}));function qS(){var n="/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",e="522bfc6b8aacbfd03b55d947af2897dc69beb570",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:20,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:21,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx"],names:[],mappings:"AAkBW;AAlBX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAevB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QACf,OAAO,KAAK,MAAM;AAAA,QAClB,MAAM,KAAK,MAAM;AAAA,QACjB,SAAS,KAAK,MAAM;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,cAAY,KAAK,MAAM,YAAY;AAAA,QACnC,WAAW,WAAW,mBAAmB,KAAK,MAAM,SAAS;AAAA,QAC7D,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAEjB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"522bfc6b8aacbfd03b55d947af2897dc69beb570"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return qS=function(){return s},s}qS();class Js extends On.Component{render(){return qS().f[0]++,qS().s[0]++,ie.jsx("button",{id:this.props.id,title:this.props.title,type:this.props.type,onClick:this.props.onClick,disabled:this.props.disabled,"aria-label":this.props["aria-label"],className:Yg("maputnik-button",this.props.className),"data-wd-key":this.props["data-wd-key"],style:this.props.style,children:this.props.children})}}var i8={exports:{}},r8,dW;function ZEe(){if(dW)return r8;dW=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return r8=n,r8}var o8,fW;function XEe(){if(fW)return o8;fW=1;var n=ZEe();function e(){}function t(){}return t.resetWarningCache=e,o8=function(){function i(s,a,c,h,m,y){if(y!==n){var M=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw M.name="Invariant Violation",M}}i.isRequired=i;function r(){return i}var o={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},o8}var pW;function b1(){return pW||(pW=1,i8.exports=XEe()()),i8.exports}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Yre=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],YS=Yre.join(","),$re=typeof Element>"u",qb=$re?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,$S=!$re&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n?.ownerDocument},VS=function n(e,t){var i;t===void 0&&(t=!0);var r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"inert"),o=r===""||r==="true",s=o||t&&e&&n(e.parentNode);return s},JEe=function(e){var t,i=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return i===""||i==="true"},Vre=function(e,t,i){if(VS(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(YS));return t&&qb.call(e,YS)&&r.unshift(e),r=r.filter(i),r},Hre=function n(e,t,i){for(var r=[],o=Array.from(e);o.length;){var s=o.shift();if(!VS(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),c=a.length?a:s.children,h=n(c,!0,i);i.flatten?r.push.apply(r,h):r.push({scopeParent:s,candidates:h})}else{var m=qb.call(s,YS);m&&i.filter(s)&&(t||!e.includes(s))&&r.push(s);var y=s.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(s),M=!VS(y,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(s));if(y&&M){var x=n(y===!0?s.children:y.children,!0,i);i.flatten?r.push.apply(r,x):r.push({scopeParent:s,candidates:x})}else o.unshift.apply(o,s.children)}}return r},Zre=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Ry=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||JEe(e))&&!Zre(e)?0:e.tabIndex},e6e=function(e,t){var i=Ry(e);return i<0&&t&&!Zre(e)?0:i},t6e=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},Xre=function(e){return e.tagName==="INPUT"},n6e=function(e){return Xre(e)&&e.type==="hidden"},i6e=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return t},r6e=function(e,t){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===t)return e[i]},o6e=function(e){if(!e.name)return!0;var t=e.form||$S(e),i=function(a){return t.querySelectorAll('input[type="radio"][name="'+a+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=i(window.CSS.escape(e.name));else try{r=i(e.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var o=r6e(r,e.form);return!o||o===e},s6e=function(e){return Xre(e)&&e.type==="radio"},a6e=function(e){return s6e(e)&&!o6e(e)},l6e=function(e){var t,i=e&&$S(e),r=(t=i)===null||t===void 0?void 0:t.host,o=!1;if(i&&i!==e){var s,a,c;for(o=!!((s=r)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(r)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!o&&r;){var h,m,y;i=$S(r),r=(h=i)===null||h===void 0?void 0:h.host,o=!!((m=r)!==null&&m!==void 0&&(y=m.ownerDocument)!==null&&y!==void 0&&y.contains(r))}}return o},mW=function(e){var t=e.getBoundingClientRect(),i=t.width,r=t.height;return i===0&&r===0},u6e=function(e,t){var i=t.displayCheck,r=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var o=qb.call(e,"details>summary:first-of-type"),s=o?e.parentElement:e;if(qb.call(s,"details:not([open]) *"))return!0;if(!i||i==="full"||i==="legacy-full"){if(typeof r=="function"){for(var a=e;e;){var c=e.parentElement,h=$S(e);if(c&&!c.shadowRoot&&r(c)===!0)return mW(e);e.assignedSlot?e=e.assignedSlot:!c&&h!==e.ownerDocument?e=h.host:e=c}e=a}if(l6e(e))return!e.getClientRects().length;if(i!=="legacy-full")return!0}else if(i==="non-zero-area")return mW(e);return!1},c6e=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var i=0;i<t.children.length;i++){var r=t.children.item(i);if(r.tagName==="LEGEND")return qb.call(t,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}t=t.parentElement}return!1},HS=function(e,t){return!(t.disabled||VS(t)||n6e(t)||u6e(t,e)||i6e(t)||c6e(t))},mD=function(e,t){return!(a6e(t)||Ry(t)<0||!HS(e,t))},A6e=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},h6e=function n(e){var t=[],i=[];return e.forEach(function(r,o){var s=!!r.scopeParent,a=s?r.scopeParent:r,c=e6e(a,s),h=s?n(r.candidates):a;c===0?s?t.push.apply(t,h):t.push(a):i.push({documentOrder:o,tabIndex:c,item:r,isScope:s,content:h})}),i.sort(t6e).reduce(function(r,o){return o.isScope?r.push.apply(r,o.content):r.push(o.content),r},[]).concat(t)},Jre=function(e,t){t=t||{};var i;return t.getShadowRoot?i=Hre([e],t.includeContainer,{filter:mD.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:A6e}):i=Vre(e,t.includeContainer,mD.bind(null,t)),h6e(i)},eoe=function(e,t){t=t||{};var i;return t.getShadowRoot?i=Hre([e],t.includeContainer,{filter:HS.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):i=Vre(e,t.includeContainer,HS.bind(null,t)),i},rb=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return qb.call(e,YS)===!1?!1:mD(t,e)},d6e=Yre.concat("iframe").join(","),Mw=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return qb.call(e,d6e)===!1?!1:HS(t,e)};const f6e=Object.freeze(Object.defineProperty({__proto__:null,focusable:eoe,getTabIndex:Ry,isFocusable:Mw,isTabbable:rb,tabbable:Jre},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.6.5
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function gD(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function p6e(n){if(Array.isArray(n))return gD(n)}function m6e(n,e,t){return(e=C6e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function g6e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function y6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gW(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function yW(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gW(Object(t),!0).forEach(function(i){m6e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gW(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function v6e(n){return p6e(n)||g6e(n)||_6e(n)||y6e()}function b6e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function C6e(n){var e=b6e(n,"string");return typeof e=="symbol"?e:e+""}function _6e(n,e){if(n){if(typeof n=="string")return gD(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?gD(n,e):void 0}}var vW={activateTrap:function(e,t){if(e.length>0){var i=e[e.length-1];i!==t&&i._setPausedState(!0)}var r=e.indexOf(t);r===-1||e.splice(r,1),e.push(t)},deactivateTrap:function(e,t){var i=e.indexOf(t);i!==-1&&e.splice(i,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},x6e=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},M6e=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},w3=function(e){return e?.key==="Tab"||e?.keyCode===9},w6e=function(e){return w3(e)&&!e.shiftKey},S6e=function(e){return w3(e)&&e.shiftKey},bW=function(e){return setTimeout(e,0)},M2=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,i):e},UM=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},E6e=[],O6e=function(e,t){var i=t?.document||document,r=t?.trapStack||E6e,o=yW({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:w6e,isKeyBackward:S6e},t),s={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,c=function(Ee,De,je){return Ee&&Ee[De]!==void 0?Ee[De]:o[je||De]},h=function(Ee,De){var je=typeof De?.composedPath=="function"?De.composedPath():void 0;return s.containerGroups.findIndex(function(Ie){var Qe=Ie.container,et=Ie.tabbableNodes;return Qe.contains(Ee)||je?.includes(Qe)||et.find(function(dt){return dt===Ee})})},m=function(Ee){var De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},je=De.hasFallback,Ie=je===void 0?!1:je,Qe=De.params,et=Qe===void 0?[]:Qe,dt=o[Ee];if(typeof dt=="function"&&(dt=dt.apply(void 0,v6e(et))),dt===!0&&(dt=void 0),!dt){if(dt===void 0||dt===!1)return dt;throw new Error("`".concat(Ee,"` was specified but was not a node, or did not return a node"))}var ke=dt;if(typeof dt=="string"){try{ke=i.querySelector(dt)}catch(we){throw new Error("`".concat(Ee,'` appears to be an invalid selector; error="').concat(we.message,'"'))}if(!ke&&!Ie)throw new Error("`".concat(Ee,"` as selector refers to no known node"))}return ke},y=function(){var Ee=m("initialFocus",{hasFallback:!0});if(Ee===!1)return!1;if(Ee===void 0||Ee&&!Mw(Ee,o.tabbableOptions))if(h(i.activeElement)>=0)Ee=i.activeElement;else{var De=s.tabbableGroups[0],je=De&&De.firstTabbableNode;Ee=je||m("fallbackFocus")}else Ee===null&&(Ee=m("fallbackFocus"));if(!Ee)throw new Error("Your focus-trap needs to have at least one focusable element");return Ee},M=function(){if(s.containerGroups=s.containers.map(function(Ee){var De=Jre(Ee,o.tabbableOptions),je=eoe(Ee,o.tabbableOptions),Ie=De.length>0?De[0]:void 0,Qe=De.length>0?De[De.length-1]:void 0,et=je.find(function(we){return rb(we)}),dt=je.slice().reverse().find(function(we){return rb(we)}),ke=!!De.find(function(we){return Ry(we)>0});return{container:Ee,tabbableNodes:De,focusableNodes:je,posTabIndexesFound:ke,firstTabbableNode:Ie,lastTabbableNode:Qe,firstDomTabbableNode:et,lastDomTabbableNode:dt,nextTabbableNode:function(ze){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,At=De.indexOf(ze);return At<0?xe?je.slice(je.indexOf(ze)+1).find(function(it){return rb(it)}):je.slice(0,je.indexOf(ze)).reverse().find(function(it){return rb(it)}):De[At+(xe?1:-1)]}}}),s.tabbableGroups=s.containerGroups.filter(function(Ee){return Ee.tabbableNodes.length>0}),s.tabbableGroups.length<=0&&!m("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(s.containerGroups.find(function(Ee){return Ee.posTabIndexesFound})&&s.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},x=function(Ee){var De=Ee.activeElement;if(De)return De.shadowRoot&&De.shadowRoot.activeElement!==null?x(De.shadowRoot):De},k=function(Ee){if(Ee!==!1&&Ee!==x(document)){if(!Ee||!Ee.focus){k(y());return}Ee.focus({preventScroll:!!o.preventScroll}),s.mostRecentlyFocusedNode=Ee,x6e(Ee)&&Ee.select()}},P=function(Ee){var De=m("setReturnFocus",{params:[Ee]});return De||(De===!1?!1:Ee)},F=function(Ee){var De=Ee.target,je=Ee.event,Ie=Ee.isBackward,Qe=Ie===void 0?!1:Ie;De=De||UM(je),M();var et=null;if(s.tabbableGroups.length>0){var dt=h(De,je),ke=dt>=0?s.containerGroups[dt]:void 0;if(dt<0)Qe?et=s.tabbableGroups[s.tabbableGroups.length-1].lastTabbableNode:et=s.tabbableGroups[0].firstTabbableNode;else if(Qe){var we=s.tabbableGroups.findIndex(function(Bt){var Ke=Bt.firstTabbableNode;return De===Ke});if(we<0&&(ke.container===De||Mw(De,o.tabbableOptions)&&!rb(De,o.tabbableOptions)&&!ke.nextTabbableNode(De,!1))&&(we=dt),we>=0){var ze=we===0?s.tabbableGroups.length-1:we-1,xe=s.tabbableGroups[ze];et=Ry(De)>=0?xe.lastTabbableNode:xe.lastDomTabbableNode}else w3(je)||(et=ke.nextTabbableNode(De,!1))}else{var At=s.tabbableGroups.findIndex(function(Bt){var Ke=Bt.lastTabbableNode;return De===Ke});if(At<0&&(ke.container===De||Mw(De,o.tabbableOptions)&&!rb(De,o.tabbableOptions)&&!ke.nextTabbableNode(De))&&(At=dt),At>=0){var it=At===s.tabbableGroups.length-1?0:At+1,bt=s.tabbableGroups[it];et=Ry(De)>=0?bt.firstTabbableNode:bt.firstDomTabbableNode}else w3(je)||(et=ke.nextTabbableNode(De))}}else et=m("fallbackFocus");return et},j=function(Ee){var De=UM(Ee);if(!(h(De,Ee)>=0)){if(M2(o.clickOutsideDeactivates,Ee)){a.deactivate({returnFocus:o.returnFocusOnDeactivate});return}M2(o.allowOutsideClick,Ee)||Ee.preventDefault()}},q=function(Ee){var De=UM(Ee),je=h(De,Ee)>=0;if(je||De instanceof Document)je&&(s.mostRecentlyFocusedNode=De);else{Ee.stopImmediatePropagation();var Ie,Qe=!0;if(s.mostRecentlyFocusedNode)if(Ry(s.mostRecentlyFocusedNode)>0){var et=h(s.mostRecentlyFocusedNode),dt=s.containerGroups[et].tabbableNodes;if(dt.length>0){var ke=dt.findIndex(function(we){return we===s.mostRecentlyFocusedNode});ke>=0&&(o.isKeyForward(s.recentNavEvent)?ke+1<dt.length&&(Ie=dt[ke+1],Qe=!1):ke-1>=0&&(Ie=dt[ke-1],Qe=!1))}}else s.containerGroups.some(function(we){return we.tabbableNodes.some(function(ze){return Ry(ze)>0})})||(Qe=!1);else Qe=!1;Qe&&(Ie=F({target:s.mostRecentlyFocusedNode,isBackward:o.isKeyBackward(s.recentNavEvent)})),k(Ie||s.mostRecentlyFocusedNode||y())}s.recentNavEvent=void 0},V=function(Ee){var De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;s.recentNavEvent=Ee;var je=F({event:Ee,isBackward:De});je&&(w3(Ee)&&Ee.preventDefault(),k(je))},H=function(Ee){(o.isKeyForward(Ee)||o.isKeyBackward(Ee))&&V(Ee,o.isKeyBackward(Ee))},G=function(Ee){M6e(Ee)&&M2(o.escapeDeactivates,Ee)!==!1&&(Ee.preventDefault(),a.deactivate())},Y=function(Ee){var De=UM(Ee);h(De,Ee)>=0||M2(o.clickOutsideDeactivates,Ee)||M2(o.allowOutsideClick,Ee)||(Ee.preventDefault(),Ee.stopImmediatePropagation())},z=function(){if(s.active)return vW.activateTrap(r,a),s.delayInitialFocusTimer=o.delayInitialFocus?bW(function(){k(y())}):k(y()),i.addEventListener("focusin",q,!0),i.addEventListener("mousedown",j,{capture:!0,passive:!1}),i.addEventListener("touchstart",j,{capture:!0,passive:!1}),i.addEventListener("click",Y,{capture:!0,passive:!1}),i.addEventListener("keydown",H,{capture:!0,passive:!1}),i.addEventListener("keydown",G),a},se=function(){if(s.active)return i.removeEventListener("focusin",q,!0),i.removeEventListener("mousedown",j,!0),i.removeEventListener("touchstart",j,!0),i.removeEventListener("click",Y,!0),i.removeEventListener("keydown",H,!0),i.removeEventListener("keydown",G),a},le=function(Ee){var De=Ee.some(function(je){var Ie=Array.from(je.removedNodes);return Ie.some(function(Qe){return Qe===s.mostRecentlyFocusedNode})});De&&k(y())},me=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(le):void 0,de=function(){me&&(me.disconnect(),s.active&&!s.paused&&s.containers.map(function(Ee){me.observe(Ee,{subtree:!0,childList:!0})}))};return a={get active(){return s.active},get paused(){return s.paused},activate:function(Ee){if(s.active)return this;var De=c(Ee,"onActivate"),je=c(Ee,"onPostActivate"),Ie=c(Ee,"checkCanFocusTrap");Ie||M(),s.active=!0,s.paused=!1,s.nodeFocusedBeforeActivation=x(i),De?.();var Qe=function(){Ie&&M(),z(),de(),je?.()};return Ie?(Ie(s.containers.concat()).then(Qe,Qe),this):(Qe(),this)},deactivate:function(Ee){if(!s.active)return this;var De=yW({onDeactivate:o.onDeactivate,onPostDeactivate:o.onPostDeactivate,checkCanReturnFocus:o.checkCanReturnFocus},Ee);clearTimeout(s.delayInitialFocusTimer),s.delayInitialFocusTimer=void 0,se(),s.active=!1,s.paused=!1,de(),vW.deactivateTrap(r,a);var je=c(De,"onDeactivate"),Ie=c(De,"onPostDeactivate"),Qe=c(De,"checkCanReturnFocus"),et=c(De,"returnFocus","returnFocusOnDeactivate");je?.();var dt=function(){bW(function(){et&&k(P(s.nodeFocusedBeforeActivation)),Ie?.()})};return et&&Qe?(Qe(P(s.nodeFocusedBeforeActivation)).then(dt,dt),this):(dt(),this)},pause:function(Ee){return s.active?(s.manuallyPaused=!0,this._setPausedState(!0,Ee)):this},unpause:function(Ee){return s.active?(s.manuallyPaused=!1,r[r.length-1]!==this?this:this._setPausedState(!1,Ee)):this},updateContainerElements:function(Ee){var De=[].concat(Ee).filter(Boolean);return s.containers=De.map(function(je){return typeof je=="string"?i.querySelector(je):je}),s.active&&M(),de(),this}},Object.defineProperties(a,{_isManuallyPaused:{value:function(){return s.manuallyPaused}},_setPausedState:{value:function(Ee,De){if(s.paused===Ee)return this;if(s.paused=Ee,Ee){var je=c(De,"onPause"),Ie=c(De,"onPostPause");je?.(),se(),de(),Ie?.()}else{var Qe=c(De,"onUnpause"),et=c(De,"onPostUnpause");Qe?.(),M(),z(),de(),et?.()}return this}}}),a.updateContainerElements(e),a};const B6e=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:O6e},Symbol.toStringTag,{value:"Module"})),I6e=FD(B6e),k6e=FD(f6e);var s8,CW;function T6e(){if(CW)return s8;CW=1;function n(Y){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},n(Y)}function e(Y,z){if(!(Y instanceof z))throw new TypeError("Cannot call a class as a function")}function t(Y,z){for(var se=0;se<z.length;se++){var le=z[se];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(Y,M(le.key),le)}}function i(Y,z,se){return z&&t(Y.prototype,z),Object.defineProperty(Y,"prototype",{writable:!1}),Y}function r(Y,z,se){return z=c(z),o(Y,a()?Reflect.construct(z,se||[],c(Y).constructor):z.apply(Y,se))}function o(Y,z){if(z&&(n(z)=="object"||typeof z=="function"))return z;if(z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s(Y)}function s(Y){if(Y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y}function a(){try{var Y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a=function(){return!!Y})()}function c(Y){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(z){return z.__proto__||Object.getPrototypeOf(z)},c(Y)}function h(Y,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(z&&z.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),Object.defineProperty(Y,"prototype",{writable:!1}),z&&m(Y,z)}function m(Y,z){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(se,le){return se.__proto__=le,se},m(Y,z)}function y(Y,z,se){return(z=M(z))in Y?Object.defineProperty(Y,z,{value:se,enumerable:!0,configurable:!0,writable:!0}):Y[z]=se,Y}function M(Y){var z=x(Y,"string");return n(z)=="symbol"?z:z+""}function x(Y,z){if(n(Y)!="object"||!Y)return Y;var se=Y[Symbol.toPrimitive];if(se!==void 0){var le=se.call(Y,z);if(n(le)!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return(z==="string"?String:Number)(Y)}var k=Ya(),P=b1(),F=I6e,j=F.createFocusTrap,q=k6e,V=q.isFocusable,H=(function(Y){function z(se){var le;e(this,z),le=r(this,z,[se]),y(le,"getNodeForOption",function(be){var Ee,De=(Ee=this.internalOptions[be])!==null&&Ee!==void 0?Ee:this.originalOptions[be];if(typeof De=="function"){for(var je=arguments.length,Ie=new Array(je>1?je-1:0),Qe=1;Qe<je;Qe++)Ie[Qe-1]=arguments[Qe];De=De.apply(void 0,Ie)}if(De===!0&&(De=void 0),!De){if(De===void 0||De===!1)return De;throw new Error("`".concat(be,"` was specified but was not a node, or did not return a node"))}var et=De;if(typeof De=="string"){var dt;if(et=(dt=this.getDocument())===null||dt===void 0?void 0:dt.querySelector(De),!et)throw new Error("`".concat(be,"` as selector refers to no known node"))}return et}),le.handleDeactivate=le.handleDeactivate.bind(le),le.handlePostDeactivate=le.handlePostDeactivate.bind(le),le.handleClickOutsideDeactivates=le.handleClickOutsideDeactivates.bind(le),le.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:le.handleDeactivate,onPostDeactivate:le.handlePostDeactivate,clickOutsideDeactivates:le.handleClickOutsideDeactivates},le.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var me=se.focusTrapOptions;for(var de in me)if(Object.prototype.hasOwnProperty.call(me,de)){if(de==="returnFocusOnDeactivate"||de==="onDeactivate"||de==="onPostDeactivate"||de==="checkCanReturnFocus"||de==="clickOutsideDeactivates"){le.originalOptions[de]=me[de];continue}le.internalOptions[de]=me[de]}return le.outsideClick=null,le.focusTrapElements=se.containerElements||[],le.updatePreviousElement(),le}return h(z,Y),i(z,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var le=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return le||(le===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var le=this.getDocument();le&&(this.previouslyFocusedElement=le.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(le){var me=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,le):this.originalOptions.clickOutsideDeactivates;return me&&(this.outsideClick={target:le.target,allowDeactivation:me}),me}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var le=this,me=function(){var be=le.getReturnFocusNode(),Ee=!!(le.originalOptions.returnFocusOnDeactivate&&be!==null&&be!==void 0&&be.focus&&(!le.outsideClick||le.outsideClick.allowDeactivation&&!V(le.outsideClick.target,le.internalOptions.tabbableOptions))),De=le.internalOptions.preventScroll,je=De===void 0?!1:De;Ee&&be.focus({preventScroll:je}),le.originalOptions.onPostDeactivate&&le.originalOptions.onPostDeactivate.call(null),le.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(me,me):me()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var le=this.focusTrapElements.some(Boolean);le&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(le){if(this.focusTrap){le.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var me=!le.active&&this.props.active,de=le.active&&!this.props.active,be=!le.paused&&this.props.paused,Ee=le.paused&&!this.props.paused;if(me&&(this.updatePreviousElement(),this.focusTrap.activate()),de){this.deactivateTrap();return}be&&this.focusTrap.pause(),Ee&&this.focusTrap.unpause()}else le.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var le=this,me=this.props.children?k.Children.only(this.props.children):void 0;if(me){if(me.type&&me.type===k.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var de=function(De){var je=le.props.containerElements;me&&(typeof me.ref=="function"?me.ref(De):me.ref&&(me.ref.current=De)),le.focusTrapElements=je||[De]},be=k.cloneElement(me,{ref:de});return be}return null}}])})(k.Component),G=typeof Element>"u"?Function:Element;return H.propTypes={active:P.bool,paused:P.bool,focusTrapOptions:P.shape({document:P.object,onActivate:P.func,onPostActivate:P.func,checkCanFocusTrap:P.func,onPause:P.func,onPostPause:P.func,onUnpause:P.func,onPostUnpause:P.func,onDeactivate:P.func,onPostDeactivate:P.func,checkCanReturnFocus:P.func,initialFocus:P.oneOfType([P.instanceOf(G),P.string,P.bool,P.func]),fallbackFocus:P.oneOfType([P.instanceOf(G),P.string,P.func]),escapeDeactivates:P.oneOfType([P.bool,P.func]),clickOutsideDeactivates:P.oneOfType([P.bool,P.func]),returnFocusOnDeactivate:P.bool,setReturnFocus:P.oneOfType([P.instanceOf(G),P.string,P.bool,P.func]),allowOutsideClick:P.oneOfType([P.bool,P.func]),preventScroll:P.bool,tabbableOptions:P.shape({displayCheck:P.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:P.oneOfType([P.bool,P.func])}),trapStack:P.array,isKeyForward:P.func,isKeyBackward:P.func}),containerElements:P.arrayOf(P.instanceOf(G)),children:P.oneOfType([P.element,P.instanceOf(G)])},H.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:j},s8=H,s8}var a8={exports:{}},_W;function R6e(){return _W||(_W=1,(function(n){(function(e){var t=!1,i,r;function o(){if(typeof i<"u")return i;var y=document.documentElement,M=document.createElement("div");return M.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),y.appendChild(M),i=M.offsetWidth-M.clientWidth,y.removeChild(M),i}function s(){return document.documentElement.scrollHeight>window.innerHeight}function a(y){if(!(typeof document>"u"||t)){var M=document.documentElement;r=window.pageYOffset,s()?M.style.width="calc(100% - "+o()+"px)":M.style.width="100%",M.style.position="fixed",M.style.top=-r+"px",M.style.overflow="hidden",t=!0}}function c(){if(!(typeof document>"u"||!t)){var y=document.documentElement;y.style.width="",y.style.position="",y.style.top="",y.style.overflow="",window.scroll(0,r),t=!1}}function h(){if(t){c();return}a()}var m={on:a,off:c,toggle:h};n.exports=m})()})(a8)),a8.exports}var l8,xW;function D6e(){if(xW)return l8;xW=1;function n(V){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},n(V)}function e(V,H){if(!(V instanceof H))throw new TypeError("Cannot call a class as a function")}function t(V,H){for(var G=0;G<H.length;G++){var Y=H[G];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(V,Y.key,Y)}}function i(V,H,G){return H&&t(V.prototype,H),Object.defineProperty(V,"prototype",{writable:!1}),V}function r(V,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");V.prototype=Object.create(H&&H.prototype,{constructor:{value:V,writable:!0,configurable:!0}}),Object.defineProperty(V,"prototype",{writable:!1}),H&&o(V,H)}function o(V,H){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Y,z){return Y.__proto__=z,Y},o(V,H)}function s(V){var H=h();return function(){var Y=m(V),z;if(H){var se=m(this).constructor;z=Reflect.construct(Y,arguments,se)}else z=Y.apply(this,arguments);return a(this,z)}}function a(V,H){if(H&&(n(H)==="object"||typeof H=="function"))return H;if(H!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c(V)}function c(V){if(V===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V}function h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function m(V){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(G){return G.__proto__||Object.getPrototypeOf(G)},m(V)}function y(V,H,G){return H in V?Object.defineProperty(V,H,{value:G,enumerable:!0,configurable:!0,writable:!0}):V[H]=G,V}var M=Ya(),x=zD(),k=T6e(),P=R6e(),F=(function(V){r(G,V);var H=s(G);function G(Y){var z;if(e(this,G),z=H.call(this,Y),y(c(z),"getApplicationNode",function(){return z.props.getApplicationNode?z.props.getApplicationNode():z.props.applicationNode}),y(c(z),"checkUnderlayClick",function(se){z.dialogNode&&z.dialogNode.contains(se.target)||se.pageX>se.target.ownerDocument.documentElement.offsetWidth||se.pageY>se.target.ownerDocument.documentElement.offsetHeight||z.exit(se)}),y(c(z),"checkDocumentKeyDown",function(se){z.props.escapeExits&&(se.key==="Escape"||se.key==="Esc"||se.keyCode===27)&&z.exit(se)}),y(c(z),"exit",function(se){z.props.onExit&&z.props.onExit(se)}),!Y.titleText&&!Y.titleId)throw new Error("react-aria-modal instances should have a `titleText` or `titleId`");return z}return i(G,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter();var z=this.getApplicationNode();setTimeout(function(){z&&z.setAttribute("aria-hidden","true")},0),this.props.escapeExits&&this.addKeyDownListener(),this.props.scrollDisabled&&P.on()}},{key:"componentDidUpdate",value:function(z){z.scrollDisabled&&!this.props.scrollDisabled?P.off():!z.scrollDisabled&&this.props.scrollDisabled&&P.on(),this.props.escapeExits&&!z.escapeExits?this.addKeyDownListener():!this.props.escapeExits&&z.escapeExits&&this.removeKeyDownListener()}},{key:"componentWillUnmount",value:function(){this.props.scrollDisabled&&P.off();var z=this.getApplicationNode();z&&z.setAttribute("aria-hidden","false"),this.removeKeyDownListener()}},{key:"addKeyDownListener",value:function(){var z=this;setTimeout(function(){document.addEventListener("keydown",z.checkDocumentKeyDown)})}},{key:"removeKeyDownListener",value:function(){var z=this;setTimeout(function(){document.removeEventListener("keydown",z.checkDocumentKeyDown)})}},{key:"render",value:function(){var z=this.props,se={};if(z.includeDefaultStyles&&(se={position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1050,overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch",textAlign:"center"},z.underlayColor&&(se.background=z.underlayColor),z.underlayClickExits&&(se.cursor="pointer")),z.underlayStyle)for(var le in z.underlayStyle)z.underlayStyle.hasOwnProperty(le)&&(se[le]=z.underlayStyle[le]);var me={className:z.underlayClass,style:se};z.underlayClickExits&&(me.onMouseDown=this.checkUnderlayClick);for(var de in this.props.underlayProps)me[de]=this.props.underlayProps[de];var be={};z.includeDefaultStyles&&(be={display:"inline-block",height:"100%",verticalAlign:"middle"});var Ee={key:"a",style:be},De={};if(z.includeDefaultStyles&&(De={display:"inline-block",textAlign:"left",top:0,maxWidth:"100%",cursor:"auto",outline:z.focusDialog?0:null},z.verticallyCenter&&(De.verticalAlign="middle",De.top=0)),z.dialogStyle)for(var je in z.dialogStyle)z.dialogStyle.hasOwnProperty(je)&&(De[je]=z.dialogStyle[je]);var Ie={key:"b",ref:(function(ke){this.dialogNode=ke}).bind(this),role:z.alert?"alertdialog":"dialog",id:z.dialogId,className:z.dialogClass,style:De};z.titleId?Ie["aria-labelledby"]=z.titleId:z.titleText&&(Ie["aria-label"]=z.titleText),z.focusDialog&&(Ie.tabIndex="-1");for(var Qe in z)/^(data-|aria-)/.test(Qe)&&(Ie[Qe]=z[Qe]);var et=[M.createElement("div",Ie,z.children)];z.verticallyCenter&&et.unshift(M.createElement("div",Ee));var dt=z.focusTrapOptions||{};return(z.focusDialog||z.initialFocus)&&(dt.initialFocus=z.focusDialog?"#".concat(this.props.dialogId):z.initialFocus),dt.escapeDeactivates=z.escapeExits,M.createElement(k,{focusTrapOptions:dt,paused:z.focusTrapPaused},M.createElement("div",me,et))}}]),G})(M.Component);y(F,"defaultProps",{underlayProps:{},dialogId:"react-aria-modal-dialog",underlayClickExits:!0,escapeExits:!0,underlayColor:"rgba(0,0,0,0.5)",includeDefaultStyles:!0,focusTrapPaused:!1,scrollDisabled:!0});function j(V,H){if(!window.document)return function(){return null};H=H||{};var G=(function(Y){r(se,Y);var z=s(se);function se(){var le;e(this,se);for(var me=arguments.length,de=new Array(me),be=0;be<me;be++)de[be]=arguments[be];return le=z.call.apply(z,[this].concat(de)),y(c(le),"container",null),le}return i(se,[{key:"componentDidMount",value:function(){H.renderTo?this.container=typeof H.renderTo=="string"?document.querySelector(H.renderTo):H.renderTo:(this.container=document.createElement("div"),document.body.appendChild(this.container)),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){H.renderTo||this.container.parentNode.removeChild(this.container)}},{key:"render",value:function(){return this.container===null||!this.props.mounted?null:x.createPortal(M.createElement(V,this.props,this.props.children),this.container)}}]),se})(M.Component);return y(G,"defaultProps",{mounted:!0}),G}var q=j(F);return q.renderTo=function(V){return j(F,{renderTo:V})},l8=q,l8}var P6e=D6e();const U6e=Xl(P6e);function ju(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx",e="b56a3b702e6eec99855202d1cfe05d2ba4d6a2ce",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:10,column:3}},1:{start:{line:12,column:12},end:{line:19,column:3}},2:{start:{line:13,column:4},end:{line:15,column:5}},3:{start:{line:14,column:6},end:{line:14,column:36}},4:{start:{line:16,column:4},end:{line:18,column:10}},5:{start:{line:17,column:6},end:{line:17,column:32}},6:{start:{line:21,column:14},end:{line:21,column:26}},7:{start:{line:22,column:4},end:{line:60,column:5}},8:{start:{line:23,column:6},end:{line:57,column:8}},9:{start:{line:59,column:6},end:{line:59,column:19}},10:{start:{line:63,column:14},end:{line:63,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:12},end:{line:12,column:13}},loc:{start:{line:12,column:18},end:{line:19,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:15},end:{line:16,column:16}},loc:{start:{line:16,column:21},end:{line:18,column:5}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:61,column:3}},line:20}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx"],names:[],mappings:"AA8CU,SACE,KADF;AA9CV,OAAO,WAAuC;AAC9C,SAAQ,eAAc;AACtB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,SAA+B,uBAAuB;AAYtD,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,oBAAoB;AAAA,EACtB;AAAA;AAAA,EAGA,UAAU,MAAM;AACd,QAAI,SAAS,eAAe;AAC1B,MAAC,SAAS,cAA8B,KAAK;AAAA,IAC/C;AAEA,eAAW,MAAM;AACf,WAAK,MAAM,aAAa;AAAA,IAC1B,GAAG,CAAC;AAAA,EACN;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAG,KAAK,MAAM,QAAQ;AACpB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,WAAW,KAAK,MAAM;AAAA,UACtB,oBAAoB,KAAK,MAAM;AAAA,UAC/B,eAAa,KAAK,MAAM,aAAa;AAAA,UACrC,kBAAkB;AAAA,UAClB,QAAQ,KAAK;AAAA,UACb,aAAY;AAAA,UAEZ;AAAA,YAAC;AAAA;AAAA,cAAI,WAAW,WAAW,kBAAkB,KAAK,MAAM,SAAS;AAAA,cAC/D,eAAa,KAAK,MAAM,aAAa;AAAA,cAErC;AAAA,qCAAC,YAAO,WAAU,yBAChB;AAAA,sCAAC,QAAG,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,kBAC9D,oBAAC,UAAK,WAAU,kBAAiB;AAAA,kBACjC;AAAA,oBAAC;AAAA;AAAA,sBAAO,WAAU;AAAA,sBAChB,OAAO,EAAE,aAAa;AAAA,sBACtB,SAAS,KAAK;AAAA,sBACd,eAAa,KAAK,MAAM,aAAa,IAAE;AAAA,sBAEvC,8BAAC,WAAQ;AAAA;AAAA,kBACX;AAAA,mBACF;AAAA,gBACA,oBAAC,SAAI,WAAU,2BACb,8BAAC,SAAI,WAAU,0BAA0B,eAAK,MAAM,UAAS,GAC/D;AAAA;AAAA;AAAA,UACF;AAAA;AAAA,MACF;AAAA,IACF,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,MAAM,QAAQ,gBAAgB,EAAE,aAAa;AAC7C,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b56a3b702e6eec99855202d1cfe05d2ba4d6a2ce"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ju=function(){return s},s}ju();class K6e extends On.Component{static defaultProps=(ju().s[0]++,{underlayClickExits:!0});onClose=(ju().s[1]++,()=>{ju().f[0]++,ju().s[2]++,document.activeElement?(ju().b[0][0]++,ju().s[3]++,document.activeElement.blur()):ju().b[0][1]++,ju().s[4]++,setTimeout(()=>{ju().f[1]++,ju().s[5]++,this.props.onOpenToggle()},0)});render(){ju().f[2]++;const e=(ju().s[6]++,this.props.t);return ju().s[7]++,this.props.isOpen?(ju().b[1][0]++,ju().s[8]++,ie.jsx(U6e,{titleText:this.props.title,underlayClickExits:this.props.underlayClickExits,"data-wd-key":this.props["data-wd-key"],verticallyCenter:!0,onExit:this.onClose,dialogClass:"maputnik-modal-container",children:ie.jsxs("div",{className:Yg("maputnik-modal",this.props.className),"data-wd-key":this.props["data-wd-key"],children:[ie.jsxs("header",{className:"maputnik-modal-header",children:[ie.jsx("h1",{className:"maputnik-modal-header-title",children:this.props.title}),ie.jsx("span",{className:"maputnik-space"}),ie.jsx("button",{className:"maputnik-modal-header-toggle",title:e("Close modal"),onClick:this.onClose,"data-wd-key":this.props["data-wd-key"]+".close-modal",children:ie.jsx(Qfe,{})})]}),ie.jsx("div",{className:"maputnik-modal-scroller",children:ie.jsx("div",{className:"maputnik-modal-content",children:this.props.children})})]})})):(ju().b[1][1]++,ju().s[9]++,!1)}}const C1=(ju().s[10]++,$o()(K6e));function bs(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",e="227136badbf4464e3a73e0852e3bc3d4b9112a08",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:33,column:1}},1:{start:{line:5,column:26},end:{line:5,column:47}},2:{start:{line:6,column:22},end:{line:11,column:3}},3:{start:{line:7,column:4},end:{line:7,column:19}},4:{start:{line:8,column:4},end:{line:10,column:5}},5:{start:{line:9,column:6},end:{line:9,column:31}},6:{start:{line:12,column:31},end:{line:12,column:36}},7:{start:{line:13,column:18},end:{line:13,column:33}},8:{start:{line:14,column:2},end:{line:31,column:3}},9:{start:{line:15,column:4},end:{line:28,column:12}},10:{start:{line:23,column:25},end:{line:23,column:43}},11:{start:{line:29,column:9},end:{line:31,column:3}},12:{start:{line:30,column:4},end:{line:30,column:172}},13:{start:{line:32,column:2},end:{line:32,column:40}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:33,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:6,column:22},end:{line:6,column:23}},loc:{start:{line:6,column:33},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:23,column:43}},line:23}},branchMap:{0:{loc:{start:{line:8,column:4},end:{line:10,column:5}},type:"if",locations:[{start:{line:8,column:4},end:{line:10,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:13,column:18},end:{line:13,column:33}},type:"binary-expr",locations:[{start:{line:13,column:18},end:{line:13,column:27}},{start:{line:13,column:31},end:{line:13,column:33}}],line:13},2:{loc:{start:{line:14,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:31,column:3}},{start:{line:29,column:9},end:{line:31,column:3}}],line:14},3:{loc:{start:{line:21,column:24},end:{line:21,column:93}},type:"cond-expr",locations:[{start:{line:21,column:31},end:{line:21,column:61}},{start:{line:21,column:64},end:{line:21,column:93}}],line:21},4:{loc:{start:{line:22,column:65},end:{line:22,column:89}},type:"cond-expr",locations:[{start:{line:22,column:72},end:{line:22,column:78}},{start:{line:22,column:81},end:{line:22,column:89}}],line:22},5:{loc:{start:{line:25,column:20},end:{line:25,column:107}},type:"cond-expr",locations:[{start:{line:25,column:43},end:{line:25,column:66}},{start:{line:25,column:85},end:{line:25,column:107}}],line:25},6:{loc:{start:{line:29,column:9},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:9},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx"],names:[],mappings:"AA4BQ,SASY,KATZ;AA5BR,OAAO,WAAyB;AAChC,SAAQ,eAAe,sBAAqB;AAW5C,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,MAAM,OAAO,IAAI,MAAM,SAAS,KAAK;AAE5C,QAAM,cAAc,CAAC,UAAmB;AACtC,YAAQ,KAAK;AACb,QAAI,MAAM,aAAa;AACrB,YAAM,YAAY,KAAK;AAAA,IACzB;AAAA,EACF;AAEA,QAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAM,EAAE,IAAI,IAAI,aAAa,CAAC;AAE9B,MAAI,KAAK;AACP,WACE,oBAAC,WAAM,WAAU,wBACf,+BAAC,SAAI,WAAU,uBACZ;AAAA;AAAA,MACA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,OAAO,iCAAiC;AAAA,UACpD,WAAW,4CAA4C,OAAO,SAAS,QAAQ;AAAA,UAC/E,SAAS,MAAM,YAAY,CAAC,IAAI;AAAA,UAChC,eAAa,sBAAsB;AAAA,UAElC,iBAAO,oBAAC,kBAAe,IAAK,oBAAC,iBAAc;AAAA;AAAA,MAC9C;AAAA,OACF,GACF;AAAA,EAEJ,WAAW,OAAO;AAChB,WACE,oBAAC,WAAM,WAAU,wBACf,8BAAC,SAAI,WAAU,uBAAuB,iBAAM,GAC9C;AAAA,EAEJ;AACA,SAAO,oBAAC,SAAI;AACd;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"227136badbf4464e3a73e0852e3bc3d4b9112a08"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return bs=function(){return s},s}bs();bs().s[0]++;const wK=n=>{bs().f[0]++;const[e,t]=(bs().s[1]++,On.useState(!1));bs().s[2]++;const i=a=>{bs().f[1]++,bs().s[3]++,t(a),bs().s[4]++,n.onToggleDoc?(bs().b[0][0]++,bs().s[5]++,n.onToggleDoc(a)):bs().b[0][1]++},{label:r,fieldSpec:o}=(bs().s[6]++,n),{doc:s}=(bs().s[7]++,bs().b[1][0]++,o||(bs().b[1][1]++,{}));return bs().s[8]++,s?(bs().b[2][0]++,bs().s[9]++,ie.jsx("label",{className:"maputnik-doc-wrapper",children:ie.jsxs("div",{className:"maputnik-doc-target",children:[r,"",ie.jsx("button",{"aria-label":e?(bs().b[3][0]++,"close property documentation"):(bs().b[3][1]++,"open property documentation"),className:`maputnik-doc-button maputnik-doc-button--${e?(bs().b[4][0]++,"open"):(bs().b[4][1]++,"closed")}`,onClick:()=>(bs().f[2]++,bs().s[10]++,i(!e)),"data-wd-key":"field-doc-button-"+r,children:e?(bs().b[5][0]++,ie.jsx(Bfe,{})):(bs().b[5][1]++,ie.jsx(Ife,{}))})]})})):(bs().b[2][1]++,bs().s[11]++,r?(bs().b[6][0]++,bs().s[12]++,ie.jsx("label",{className:"maputnik-doc-wrapper",children:ie.jsx("div",{className:"maputnik-doc-target",children:r})})):(bs().b[6][1]++,bs().s[13]++,ie.jsx("div",{})))};function L6e(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const F6e=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,z6e=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,j6e={};function MW(n,e){return(j6e.jsx?z6e:F6e).test(n)}const N6e=/[ \t\n\f\r]/g;function G6e(n){return typeof n=="object"?n.type==="text"?wW(n.value):!1:wW(n)}function wW(n){return n.replace(N6e,"")===""}class E5{constructor(e,t,i){this.normal=t,this.property=e,i&&(this.space=i)}}E5.prototype.normal={};E5.prototype.property={};E5.prototype.space=void 0;function toe(n,e){const t={},i={};for(const r of n)Object.assign(t,r.property),Object.assign(i,r.normal);return new E5(t,i,e)}function yD(n){return n.toLowerCase()}class Sd{constructor(e,t){this.attribute=t,this.property=e}}Sd.prototype.attribute="";Sd.prototype.booleanish=!1;Sd.prototype.boolean=!1;Sd.prototype.commaOrSpaceSeparated=!1;Sd.prototype.commaSeparated=!1;Sd.prototype.defined=!1;Sd.prototype.mustUseProperty=!1;Sd.prototype.number=!1;Sd.prototype.overloadedBoolean=!1;Sd.prototype.property="";Sd.prototype.spaceSeparated=!1;Sd.prototype.space=void 0;let W6e=0;const vo=tC(),Nu=tC(),vD=tC(),Hn=tC(),Qa=tC(),X_=tC(),uf=tC();function tC(){return 2**++W6e}const bD=Object.freeze(Object.defineProperty({__proto__:null,boolean:vo,booleanish:Nu,commaOrSpaceSeparated:uf,commaSeparated:X_,number:Hn,overloadedBoolean:vD,spaceSeparated:Qa},Symbol.toStringTag,{value:"Module"})),u8=Object.keys(bD);class SK extends Sd{constructor(e,t,i,r){let o=-1;if(super(e,t),SW(this,"space",r),typeof i=="number")for(;++o<u8.length;){const s=u8[o];SW(this,u8[o],(i&bD[s])===bD[s])}}}SK.prototype.defined=!0;function SW(n,e,t){t&&(n[e]=t)}function Yx(n){const e={},t={};for(const[i,r]of Object.entries(n.properties)){const o=new SK(i,n.transform(n.attributes||{},i),r,n.space);n.mustUseProperty&&n.mustUseProperty.includes(i)&&(o.mustUseProperty=!0),e[i]=o,t[yD(i)]=i,t[yD(o.attribute)]=i}return new E5(e,t,n.space)}const noe=Yx({properties:{ariaActiveDescendant:null,ariaAtomic:Nu,ariaAutoComplete:null,ariaBusy:Nu,ariaChecked:Nu,ariaColCount:Hn,ariaColIndex:Hn,ariaColSpan:Hn,ariaControls:Qa,ariaCurrent:null,ariaDescribedBy:Qa,ariaDetails:null,ariaDisabled:Nu,ariaDropEffect:Qa,ariaErrorMessage:null,ariaExpanded:Nu,ariaFlowTo:Qa,ariaGrabbed:Nu,ariaHasPopup:null,ariaHidden:Nu,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Qa,ariaLevel:Hn,ariaLive:null,ariaModal:Nu,ariaMultiLine:Nu,ariaMultiSelectable:Nu,ariaOrientation:null,ariaOwns:Qa,ariaPlaceholder:null,ariaPosInSet:Hn,ariaPressed:Nu,ariaReadOnly:Nu,ariaRelevant:null,ariaRequired:Nu,ariaRoleDescription:Qa,ariaRowCount:Hn,ariaRowIndex:Hn,ariaRowSpan:Hn,ariaSelected:Nu,ariaSetSize:Hn,ariaSort:null,ariaValueMax:Hn,ariaValueMin:Hn,ariaValueNow:Hn,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function ioe(n,e){return e in n?n[e]:e}function roe(n,e){return ioe(n,e.toLowerCase())}const Q6e=Yx({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:X_,acceptCharset:Qa,accessKey:Qa,action:null,allow:null,allowFullScreen:vo,allowPaymentRequest:vo,allowUserMedia:vo,alt:null,as:null,async:vo,autoCapitalize:null,autoComplete:Qa,autoFocus:vo,autoPlay:vo,blocking:Qa,capture:null,charSet:null,checked:vo,cite:null,className:Qa,cols:Hn,colSpan:null,content:null,contentEditable:Nu,controls:vo,controlsList:Qa,coords:Hn|X_,crossOrigin:null,data:null,dateTime:null,decoding:null,default:vo,defer:vo,dir:null,dirName:null,disabled:vo,download:vD,draggable:Nu,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:vo,formTarget:null,headers:Qa,height:Hn,hidden:vD,high:Hn,href:null,hrefLang:null,htmlFor:Qa,httpEquiv:Qa,id:null,imageSizes:null,imageSrcSet:null,inert:vo,inputMode:null,integrity:null,is:null,isMap:vo,itemId:null,itemProp:Qa,itemRef:Qa,itemScope:vo,itemType:Qa,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:vo,low:Hn,manifest:null,max:null,maxLength:Hn,media:null,method:null,min:null,minLength:Hn,multiple:vo,muted:vo,name:null,nonce:null,noModule:vo,noValidate:vo,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:vo,optimum:Hn,pattern:null,ping:Qa,placeholder:null,playsInline:vo,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:vo,referrerPolicy:null,rel:Qa,required:vo,reversed:vo,rows:Hn,rowSpan:Hn,sandbox:Qa,scope:null,scoped:vo,seamless:vo,selected:vo,shadowRootClonable:vo,shadowRootDelegatesFocus:vo,shadowRootMode:null,shape:null,size:Hn,sizes:null,slot:null,span:Hn,spellCheck:Nu,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Hn,step:null,style:null,tabIndex:Hn,target:null,title:null,translate:null,type:null,typeMustMatch:vo,useMap:null,value:Nu,width:Hn,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Qa,axis:null,background:null,bgColor:null,border:Hn,borderColor:null,bottomMargin:Hn,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:vo,declare:vo,event:null,face:null,frame:null,frameBorder:null,hSpace:Hn,leftMargin:Hn,link:null,longDesc:null,lowSrc:null,marginHeight:Hn,marginWidth:Hn,noResize:vo,noHref:vo,noShade:vo,noWrap:vo,object:null,profile:null,prompt:null,rev:null,rightMargin:Hn,rules:null,scheme:null,scrolling:Nu,standby:null,summary:null,text:null,topMargin:Hn,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Hn,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:vo,disableRemotePlayback:vo,prefix:null,property:null,results:Hn,security:null,unselectable:null},space:"html",transform:roe}),q6e=Yx({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:uf,accentHeight:Hn,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Hn,amplitude:Hn,arabicForm:null,ascent:Hn,attributeName:null,attributeType:null,azimuth:Hn,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Hn,by:null,calcMode:null,capHeight:Hn,className:Qa,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Hn,diffuseConstant:Hn,direction:null,display:null,dur:null,divisor:Hn,dominantBaseline:null,download:vo,dx:null,dy:null,edgeMode:null,editable:null,elevation:Hn,enableBackground:null,end:null,event:null,exponent:Hn,externalResourcesRequired:null,fill:null,fillOpacity:Hn,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:X_,g2:X_,glyphName:X_,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Hn,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Hn,horizOriginX:Hn,horizOriginY:Hn,id:null,ideographic:Hn,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Hn,k:Hn,k1:Hn,k2:Hn,k3:Hn,k4:Hn,kernelMatrix:uf,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Hn,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Hn,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Hn,overlineThickness:Hn,paintOrder:null,panose1:null,path:null,pathLength:Hn,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Qa,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Hn,pointsAtY:Hn,pointsAtZ:Hn,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:uf,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:uf,rev:uf,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:uf,requiredFeatures:uf,requiredFonts:uf,requiredFormats:uf,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Hn,specularExponent:Hn,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Hn,strikethroughThickness:Hn,string:null,stroke:null,strokeDashArray:uf,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Hn,strokeOpacity:Hn,strokeWidth:null,style:null,surfaceScale:Hn,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:uf,tabIndex:Hn,tableValues:null,target:null,targetX:Hn,targetY:Hn,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:uf,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Hn,underlineThickness:Hn,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Hn,values:null,vAlphabetic:Hn,vMathematical:Hn,vectorEffect:null,vHanging:Hn,vIdeographic:Hn,version:null,vertAdvY:Hn,vertOriginX:Hn,vertOriginY:Hn,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Hn,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:ioe}),ooe=Yx({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),soe=Yx({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:roe}),aoe=Yx({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),Y6e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},$6e=/[A-Z]/g,EW=/-[a-z]/g,V6e=/^data[-\w.:]+$/i;function H6e(n,e){const t=yD(e);let i=e,r=Sd;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&V6e.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(EW,X6e);i="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!EW.test(o)){let s=o.replace($6e,Z6e);s.charAt(0)!=="-"&&(s="-"+s),e="data"+s}}r=SK}return new r(i,e)}function Z6e(n){return"-"+n.toLowerCase()}function X6e(n){return n.charAt(1).toUpperCase()}const J6e=toe([noe,Q6e,ooe,soe,aoe],"html"),EK=toe([noe,q6e,ooe,soe,aoe],"svg");function eOe(n){return n.join(" ").trim()}var QC={},c8,OW;function tOe(){if(OW)return c8;OW=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,a=/^\s+|\s+$/g,c=`
`,h="/",m="*",y="",M="comment",x="declaration";c8=function(P,F){if(typeof P!="string")throw new TypeError("First argument must be a string");if(!P)return[];F=F||{};var j=1,q=1;function V(Ee){var De=Ee.match(e);De&&(j+=De.length);var je=Ee.lastIndexOf(c);q=~je?Ee.length-je:q+Ee.length}function H(){var Ee={line:j,column:q};return function(De){return De.position=new G(Ee),se(),De}}function G(Ee){this.start=Ee,this.end={line:j,column:q},this.source=F.source}G.prototype.content=P;function Y(Ee){var De=new Error(F.source+":"+j+":"+q+": "+Ee);if(De.reason=Ee,De.filename=F.source,De.line=j,De.column=q,De.source=P,!F.silent)throw De}function z(Ee){var De=Ee.exec(P);if(De){var je=De[0];return V(je),P=P.slice(je.length),De}}function se(){z(t)}function le(Ee){var De;for(Ee=Ee||[];De=me();)De!==!1&&Ee.push(De);return Ee}function me(){var Ee=H();if(!(h!=P.charAt(0)||m!=P.charAt(1))){for(var De=2;y!=P.charAt(De)&&(m!=P.charAt(De)||h!=P.charAt(De+1));)++De;if(De+=2,y===P.charAt(De-1))return Y("End of comment missing");var je=P.slice(2,De-2);return q+=2,V(je),P=P.slice(De),q+=2,Ee({type:M,comment:je})}}function de(){var Ee=H(),De=z(i);if(De){if(me(),!z(r))return Y("property missing ':'");var je=z(o),Ie=Ee({type:x,property:k(De[0].replace(n,y)),value:je?k(je[0].replace(n,y)):y});return z(s),Ie}}function be(){var Ee=[];le(Ee);for(var De;De=de();)De!==!1&&(Ee.push(De),le(Ee));return Ee}return se(),be()};function k(P){return P?P.replace(a,y):y}return c8}var BW;function nOe(){if(BW)return QC;BW=1;var n=QC&&QC.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(QC,"__esModule",{value:!0}),QC.default=t;var e=n(tOe());function t(i,r){var o=null;if(!i||typeof i!="string")return o;var s=(0,e.default)(i),a=typeof r=="function";return s.forEach(function(c){if(c.type==="declaration"){var h=c.property,m=c.value;a?r(h,m,c):m&&(o=o||{},o[h]=m)}}),o}return QC}var w2={},IW;function iOe(){if(IW)return w2;IW=1,Object.defineProperty(w2,"__esModule",{value:!0}),w2.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,o=function(h){return!h||t.test(h)||n.test(h)},s=function(h,m){return m.toUpperCase()},a=function(h,m){return"".concat(m,"-")},c=function(h,m){return m===void 0&&(m={}),o(h)?h:(h=h.toLowerCase(),m.reactCompat?h=h.replace(r,a):h=h.replace(i,a),h.replace(e,s))};return w2.camelCase=c,w2}var S2,kW;function rOe(){if(kW)return S2;kW=1;var n=S2&&S2.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=n(nOe()),t=iOe();function i(r,o){var s={};return!r||typeof r!="string"||(0,e.default)(r,function(a,c){a&&c&&(s[(0,t.camelCase)(a,o)]=c)}),s}return i.default=i,S2=i,S2}var oOe=rOe();const sOe=Xl(oOe),loe=uoe("end"),OK=uoe("start");function uoe(n){return e;function e(t){const i=t&&t.position&&t.position[n]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function aOe(n){const e=OK(n),t=loe(n);if(e&&t)return{start:e,end:t}}function S3(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?TW(n.position):"start"in n||"end"in n?TW(n):"line"in n||"column"in n?CD(n):""}function CD(n){return RW(n&&n.line)+":"+RW(n&&n.column)}function TW(n){return CD(n&&n.start)+"-"+CD(n&&n.end)}function RW(n){return n&&typeof n=="number"?n:1}class YA extends Error{constructor(e,t,i){super(),typeof t=="string"&&(i=t,t=void 0);let r="",o={},s=!1;if(t&&("line"in t&&"column"in t?o={place:t}:"start"in t&&"end"in t?o={place:t}:"type"in t?o={ancestors:[t],place:t.position}:o={...t}),typeof e=="string"?r=e:!o.cause&&e&&(s=!0,r=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof i=="string"){const c=i.indexOf(":");c===-1?o.ruleId=i:(o.source=i.slice(0,c),o.ruleId=i.slice(c+1))}if(!o.place&&o.ancestors&&o.ancestors){const c=o.ancestors[o.ancestors.length-1];c&&(o.place=c.position)}const a=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=a?a.line:void 0,this.name=S3(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=s&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}YA.prototype.file="";YA.prototype.name="";YA.prototype.reason="";YA.prototype.message="";YA.prototype.stack="";YA.prototype.column=void 0;YA.prototype.line=void 0;YA.prototype.ancestors=void 0;YA.prototype.cause=void 0;YA.prototype.fatal=void 0;YA.prototype.place=void 0;YA.prototype.ruleId=void 0;YA.prototype.source=void 0;const BK={}.hasOwnProperty,lOe=new Map,uOe=/[A-Z]/g,cOe=new Set(["table","tbody","thead","tfoot","tr"]),AOe=new Set(["td","th"]),coe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function hOe(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=bOe(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=vOe(t,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?EK:J6e,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=Aoe(r,n,void 0);return o&&typeof o!="string"?o:r.create(n,r.Fragment,{children:o||void 0},void 0)}function Aoe(n,e,t){if(e.type==="element")return dOe(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return fOe(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return mOe(n,e,t);if(e.type==="mdxjsEsm")return pOe(n,e);if(e.type==="root")return gOe(n,e,t);if(e.type==="text")return yOe(n,e)}function dOe(n,e,t){const i=n.schema;let r=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=EK,n.schema=r),n.ancestors.push(e);const o=doe(n,e.tagName,!1),s=COe(n,e);let a=kK(n,e);return cOe.has(e.tagName)&&(a=a.filter(function(c){return typeof c=="string"?!G6e(c):!0})),hoe(n,s,o,e),IK(s,a),n.ancestors.pop(),n.schema=i,n.create(e,o,s,t)}function fOe(n,e){if(e.data&&e.data.estree&&n.evaluater){const i=e.data.estree.body[0];return i.type,n.evaluater.evaluateExpression(i.expression)}O4(n,e.position)}function pOe(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);O4(n,e.position)}function mOe(n,e,t){const i=n.schema;let r=i;e.name==="svg"&&i.space==="html"&&(r=EK,n.schema=r),n.ancestors.push(e);const o=e.name===null?n.Fragment:doe(n,e.name,!0),s=_Oe(n,e),a=kK(n,e);return hoe(n,s,o,e),IK(s,a),n.ancestors.pop(),n.schema=i,n.create(e,o,s,t)}function gOe(n,e,t){const i={};return IK(i,kK(n,e)),n.create(e,n.Fragment,i,t)}function yOe(n,e){return e.value}function hoe(n,e,t,i){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=i)}function IK(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function vOe(n,e,t){return i;function i(r,o,s,a){const h=Array.isArray(s.children)?t:e;return a?h(o,s,a):h(o,s)}}function bOe(n,e){return t;function t(i,r,o,s){const a=Array.isArray(o.children),c=OK(i);return e(r,o,s,a,{columnNumber:c?c.column-1:void 0,fileName:n,lineNumber:c?c.line:void 0},void 0)}}function COe(n,e){const t={};let i,r;for(r in e.properties)if(r!=="children"&&BK.call(e.properties,r)){const o=xOe(n,r,e.properties[r]);if(o){const[s,a]=o;n.tableCellAlignToStyle&&s==="align"&&typeof a=="string"&&AOe.has(e.tagName)?i=a:t[s]=a}}if(i){const o=t.style||(t.style={});o[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return t}function _Oe(n,e){const t={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&n.evaluater){const o=i.data.estree.body[0];o.type;const s=o.expression;s.type;const a=s.properties[0];a.type,Object.assign(t,n.evaluater.evaluateExpression(a.argument))}else O4(n,e.position);else{const r=i.name;let o;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&n.evaluater){const a=i.value.data.estree.body[0];a.type,o=n.evaluater.evaluateExpression(a.expression)}else O4(n,e.position);else o=i.value===null?!0:i.value;t[r]=o}return t}function kK(n,e){const t=[];let i=-1;const r=n.passKeys?new Map:lOe;for(;++i<e.children.length;){const o=e.children[i];let s;if(n.passKeys){const c=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(c){const h=r.get(c)||0;s=c+"-"+h,r.set(c,h+1)}}const a=Aoe(n,o,s);a!==void 0&&t.push(a)}return t}function xOe(n,e,t){const i=H6e(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=i.commaSeparated?L6e(t):eOe(t)),i.property==="style"){let r=typeof t=="object"?t:MOe(n,String(t));return n.stylePropertyNameCase==="css"&&(r=wOe(r)),["style",r]}return[n.elementAttributeNameCase==="react"&&i.space?Y6e[i.property]||i.property:i.attribute,t]}}function MOe(n,e){try{return sOe(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const i=t,r=new YA("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=n.filePath||void 0,r.url=coe+"#cannot-parse-style-attribute",r}}function doe(n,e,t){let i;if(!t)i={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let o=-1,s;for(;++o<r.length;){const a=MW(r[o])?{type:"Identifier",name:r[o]}:{type:"Literal",value:r[o]};s=s?{type:"MemberExpression",object:s,property:a,computed:!!(o&&a.type==="Literal"),optional:!1}:a}i=s}else i=MW(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const r=i.value;return BK.call(n.components,r)?n.components[r]:r}if(n.evaluater)return n.evaluater.evaluateExpression(i);O4(n)}function O4(n,e){const t=new YA("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=coe+"#cannot-handle-mdx-estrees-without-createevaluater",t}function wOe(n){const e={};let t;for(t in n)BK.call(n,t)&&(e[SOe(t)]=n[t]);return e}function SOe(n){let e=n.replace(uOe,EOe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function EOe(n){return"-"+n.toLowerCase()}const A8={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},OOe={};function BOe(n,e){const t=OOe,i=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,r=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return foe(n,i,r)}function foe(n,e,t){if(IOe(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return DW(n.children,e,t)}return Array.isArray(n)?DW(n,e,t):""}function DW(n,e,t){const i=[];let r=-1;for(;++r<n.length;)i[r]=foe(n[r],e,t);return i.join("")}function IOe(n){return!!(n&&typeof n=="object")}const PW=document.createElement("i");function TK(n){const e="&"+n+";";PW.innerHTML=e;const t=PW.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function Gg(n,e,t,i){const r=n.length;let o=0,s;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,t=t>0?t:0,i.length<1e4)s=Array.from(i),s.unshift(e,t),n.splice(...s);else for(t&&n.splice(e,t);o<i.length;)s=i.slice(o,o+1e4),s.unshift(e,0),n.splice(...s),o+=1e4,e+=1e4}function ip(n,e){return n.length>0?(Gg(n,n.length,0,e),n):e}const UW={}.hasOwnProperty;function kOe(n){const e={};let t=-1;for(;++t<n.length;)TOe(e,n[t]);return e}function TOe(n,e){let t;for(t in e){const r=(UW.call(n,t)?n[t]:void 0)||(n[t]={}),o=e[t];let s;if(o)for(s in o){UW.call(r,s)||(r[s]=[]);const a=o[s];ROe(r[s],Array.isArray(a)?a:a?[a]:[])}}}function ROe(n,e){let t=-1;const i=[];for(;++t<e.length;)(e[t].add==="after"?n:i).push(e[t]);Gg(n,0,0,i)}function poe(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function J_(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const bg=dv(/[A-Za-z]/),Cf=dv(/[\dA-Za-z]/),DOe=dv(/[#-'*+\--9=?A-Z^-~]/);function _D(n){return n!==null&&(n<32||n===127)}const xD=dv(/\d/),POe=dv(/[\dA-Fa-f]/),UOe=dv(/[!-/:-@[-`{-~]/);function jr(n){return n!==null&&n<-2}function Cd(n){return n!==null&&(n<0||n===32)}function Ws(n){return n===-2||n===-1||n===32}const KOe=dv(new RegExp("\\p{P}|\\p{S}","u")),LOe=dv(/\s/);function dv(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function $x(n){const e=[];let t=-1,i=0,r=0;for(;++t<n.length;){const o=n.charCodeAt(t);let s="";if(o===37&&Cf(n.charCodeAt(t+1))&&Cf(n.charCodeAt(t+2)))r=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(s=String.fromCharCode(o));else if(o>55295&&o<57344){const a=n.charCodeAt(t+1);o<56320&&a>56319&&a<57344?(s=String.fromCharCode(o,a),r=1):s=""}else s=String.fromCharCode(o);s&&(e.push(n.slice(i,t),encodeURIComponent(s)),i=t+r+1,s=""),r&&(t+=r,r=0)}return e.join("")+n.slice(i)}function qa(n,e,t,i){const r=i?i-1:Number.POSITIVE_INFINITY;let o=0;return s;function s(c){return Ws(c)?(n.enter(t),a(c)):e(c)}function a(c){return Ws(c)&&o++<r?(n.consume(c),a):(n.exit(t),e(c))}}const FOe={tokenize:zOe};function zOe(n){const e=n.attempt(this.parser.constructs.contentInitial,i,r);let t;return e;function i(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),qa(n,e,"linePrefix")}function r(a){return n.enter("paragraph"),o(a)}function o(a){const c=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=c),t=c,s(a)}function s(a){if(a===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(a);return}return jr(a)?(n.consume(a),n.exit("chunkText"),o):(n.consume(a),s)}}const jOe={tokenize:NOe},KW={tokenize:GOe};function NOe(n){const e=this,t=[];let i=0,r,o,s;return a;function a(V){if(i<t.length){const H=t[i];return e.containerState=H[1],n.attempt(H[0].continuation,c,h)(V)}return h(V)}function c(V){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&q();const H=e.events.length;let G=H,Y;for(;G--;)if(e.events[G][0]==="exit"&&e.events[G][1].type==="chunkFlow"){Y=e.events[G][1].end;break}j(i);let z=H;for(;z<e.events.length;)e.events[z][1].end={...Y},z++;return Gg(e.events,G+1,0,e.events.slice(H)),e.events.length=z,h(V)}return a(V)}function h(V){if(i===t.length){if(!r)return M(V);if(r.currentConstruct&&r.currentConstruct.concrete)return k(V);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(KW,m,y)(V)}function m(V){return r&&q(),j(i),M(V)}function y(V){return e.parser.lazy[e.now().line]=i!==t.length,s=e.now().offset,k(V)}function M(V){return e.containerState={},n.attempt(KW,x,k)(V)}function x(V){return i++,t.push([e.currentConstruct,e.containerState]),M(V)}function k(V){if(V===null){r&&q(),j(0),n.consume(V);return}return r=r||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:o}),P(V)}function P(V){if(V===null){F(n.exit("chunkFlow"),!0),j(0),n.consume(V);return}return jr(V)?(n.consume(V),F(n.exit("chunkFlow")),i=0,e.interrupt=void 0,a):(n.consume(V),P)}function F(V,H){const G=e.sliceStream(V);if(H&&G.push(null),V.previous=o,o&&(o.next=V),o=V,r.defineSkip(V.start),r.write(G),e.parser.lazy[V.start.line]){let Y=r.events.length;for(;Y--;)if(r.events[Y][1].start.offset<s&&(!r.events[Y][1].end||r.events[Y][1].end.offset>s))return;const z=e.events.length;let se=z,le,me;for(;se--;)if(e.events[se][0]==="exit"&&e.events[se][1].type==="chunkFlow"){if(le){me=e.events[se][1].end;break}le=!0}for(j(i),Y=z;Y<e.events.length;)e.events[Y][1].end={...me},Y++;Gg(e.events,se+1,0,e.events.slice(z)),e.events.length=Y}}function j(V){let H=t.length;for(;H-- >V;){const G=t[H];e.containerState=G[1],G[0].exit.call(e,n)}t.length=V}function q(){r.write([null]),o=void 0,r=void 0,e.containerState._closeFlow=void 0}}function GOe(n,e,t){return qa(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function LW(n){if(n===null||Cd(n)||LOe(n))return 1;if(KOe(n))return 2}function RK(n,e,t){const i=[];let r=-1;for(;++r<n.length;){const o=n[r].resolveAll;o&&!i.includes(o)&&(e=o(e,t),i.push(o))}return e}const MD={name:"attention",resolveAll:WOe,tokenize:QOe};function WOe(n,e){let t=-1,i,r,o,s,a,c,h,m;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(i=t;i--;)if(n[i][0]==="exit"&&n[i][1].type==="attentionSequence"&&n[i][1]._open&&e.sliceSerialize(n[i][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[i][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[i][1].end.offset-n[i][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;c=n[i][1].end.offset-n[i][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const y={...n[i][1].end},M={...n[t][1].start};FW(y,-c),FW(M,c),s={type:c>1?"strongSequence":"emphasisSequence",start:y,end:{...n[i][1].end}},a={type:c>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:M},o={type:c>1?"strongText":"emphasisText",start:{...n[i][1].end},end:{...n[t][1].start}},r={type:c>1?"strong":"emphasis",start:{...s.start},end:{...a.end}},n[i][1].end={...s.start},n[t][1].start={...a.end},h=[],n[i][1].end.offset-n[i][1].start.offset&&(h=ip(h,[["enter",n[i][1],e],["exit",n[i][1],e]])),h=ip(h,[["enter",r,e],["enter",s,e],["exit",s,e],["enter",o,e]]),h=ip(h,RK(e.parser.constructs.insideSpan.null,n.slice(i+1,t),e)),h=ip(h,[["exit",o,e],["enter",a,e],["exit",a,e],["exit",r,e]]),n[t][1].end.offset-n[t][1].start.offset?(m=2,h=ip(h,[["enter",n[t][1],e],["exit",n[t][1],e]])):m=0,Gg(n,i-1,t-i+3,h),t=i+h.length-m-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function QOe(n,e){const t=this.parser.constructs.attentionMarkers.null,i=this.previous,r=LW(i);let o;return s;function s(c){return o=c,n.enter("attentionSequence"),a(c)}function a(c){if(c===o)return n.consume(c),a;const h=n.exit("attentionSequence"),m=LW(c),y=!m||m===2&&r||t.includes(c),M=!r||r===2&&m||t.includes(i);return h._open=!!(o===42?y:y&&(r||!M)),h._close=!!(o===42?M:M&&(m||!y)),e(c)}}function FW(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const qOe={name:"autolink",tokenize:YOe};function YOe(n,e,t){let i=0;return r;function r(x){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(x),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),o}function o(x){return bg(x)?(n.consume(x),s):x===64?t(x):h(x)}function s(x){return x===43||x===45||x===46||Cf(x)?(i=1,a(x)):h(x)}function a(x){return x===58?(n.consume(x),i=0,c):(x===43||x===45||x===46||Cf(x))&&i++<32?(n.consume(x),a):(i=0,h(x))}function c(x){return x===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(x),n.exit("autolinkMarker"),n.exit("autolink"),e):x===null||x===32||x===60||_D(x)?t(x):(n.consume(x),c)}function h(x){return x===64?(n.consume(x),m):DOe(x)?(n.consume(x),h):t(x)}function m(x){return Cf(x)?y(x):t(x)}function y(x){return x===46?(n.consume(x),i=0,m):x===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(x),n.exit("autolinkMarker"),n.exit("autolink"),e):M(x)}function M(x){if((x===45||Cf(x))&&i++<63){const k=x===45?M:y;return n.consume(x),k}return t(x)}}const M6={partial:!0,tokenize:$Oe};function $Oe(n,e,t){return i;function i(o){return Ws(o)?qa(n,r,"linePrefix")(o):r(o)}function r(o){return o===null||jr(o)?e(o):t(o)}}const moe={continuation:{tokenize:HOe},exit:ZOe,name:"blockQuote",tokenize:VOe};function VOe(n,e,t){const i=this;return r;function r(s){if(s===62){const a=i.containerState;return a.open||(n.enter("blockQuote",{_container:!0}),a.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(s),n.exit("blockQuoteMarker"),o}return t(s)}function o(s){return Ws(s)?(n.enter("blockQuotePrefixWhitespace"),n.consume(s),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(s))}}function HOe(n,e,t){const i=this;return r;function r(s){return Ws(s)?qa(n,o,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):o(s)}function o(s){return n.attempt(moe,e,t)(s)}}function ZOe(n){n.exit("blockQuote")}const goe={name:"characterEscape",tokenize:XOe};function XOe(n,e,t){return i;function i(o){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(o),n.exit("escapeMarker"),r}function r(o){return UOe(o)?(n.enter("characterEscapeValue"),n.consume(o),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(o)}}const yoe={name:"characterReference",tokenize:JOe};function JOe(n,e,t){const i=this;let r=0,o,s;return a;function a(y){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(y),n.exit("characterReferenceMarker"),c}function c(y){return y===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(y),n.exit("characterReferenceMarkerNumeric"),h):(n.enter("characterReferenceValue"),o=31,s=Cf,m(y))}function h(y){return y===88||y===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(y),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),o=6,s=POe,m):(n.enter("characterReferenceValue"),o=7,s=xD,m(y))}function m(y){if(y===59&&r){const M=n.exit("characterReferenceValue");return s===Cf&&!TK(i.sliceSerialize(M))?t(y):(n.enter("characterReferenceMarker"),n.consume(y),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return s(y)&&r++<o?(n.consume(y),m):t(y)}}const zW={partial:!0,tokenize:tBe},jW={concrete:!0,name:"codeFenced",tokenize:eBe};function eBe(n,e,t){const i=this,r={partial:!0,tokenize:G};let o=0,s=0,a;return c;function c(Y){return h(Y)}function h(Y){const z=i.events[i.events.length-1];return o=z&&z[1].type==="linePrefix"?z[2].sliceSerialize(z[1],!0).length:0,a=Y,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),m(Y)}function m(Y){return Y===a?(s++,n.consume(Y),m):s<3?t(Y):(n.exit("codeFencedFenceSequence"),Ws(Y)?qa(n,y,"whitespace")(Y):y(Y))}function y(Y){return Y===null||jr(Y)?(n.exit("codeFencedFence"),i.interrupt?e(Y):n.check(zW,P,H)(Y)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),M(Y))}function M(Y){return Y===null||jr(Y)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),y(Y)):Ws(Y)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),qa(n,x,"whitespace")(Y)):Y===96&&Y===a?t(Y):(n.consume(Y),M)}function x(Y){return Y===null||jr(Y)?y(Y):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),k(Y))}function k(Y){return Y===null||jr(Y)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),y(Y)):Y===96&&Y===a?t(Y):(n.consume(Y),k)}function P(Y){return n.attempt(r,H,F)(Y)}function F(Y){return n.enter("lineEnding"),n.consume(Y),n.exit("lineEnding"),j}function j(Y){return o>0&&Ws(Y)?qa(n,q,"linePrefix",o+1)(Y):q(Y)}function q(Y){return Y===null||jr(Y)?n.check(zW,P,H)(Y):(n.enter("codeFlowValue"),V(Y))}function V(Y){return Y===null||jr(Y)?(n.exit("codeFlowValue"),q(Y)):(n.consume(Y),V)}function H(Y){return n.exit("codeFenced"),e(Y)}function G(Y,z,se){let le=0;return me;function me(je){return Y.enter("lineEnding"),Y.consume(je),Y.exit("lineEnding"),de}function de(je){return Y.enter("codeFencedFence"),Ws(je)?qa(Y,be,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(je):be(je)}function be(je){return je===a?(Y.enter("codeFencedFenceSequence"),Ee(je)):se(je)}function Ee(je){return je===a?(le++,Y.consume(je),Ee):le>=s?(Y.exit("codeFencedFenceSequence"),Ws(je)?qa(Y,De,"whitespace")(je):De(je)):se(je)}function De(je){return je===null||jr(je)?(Y.exit("codeFencedFence"),z(je)):se(je)}}}function tBe(n,e,t){const i=this;return r;function r(s){return s===null?t(s):(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),o)}function o(s){return i.parser.lazy[i.now().line]?t(s):e(s)}}const h8={name:"codeIndented",tokenize:iBe},nBe={partial:!0,tokenize:rBe};function iBe(n,e,t){const i=this;return r;function r(h){return n.enter("codeIndented"),qa(n,o,"linePrefix",5)(h)}function o(h){const m=i.events[i.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?s(h):t(h)}function s(h){return h===null?c(h):jr(h)?n.attempt(nBe,s,c)(h):(n.enter("codeFlowValue"),a(h))}function a(h){return h===null||jr(h)?(n.exit("codeFlowValue"),s(h)):(n.consume(h),a)}function c(h){return n.exit("codeIndented"),e(h)}}function rBe(n,e,t){const i=this;return r;function r(s){return i.parser.lazy[i.now().line]?t(s):jr(s)?(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),r):qa(n,o,"linePrefix",5)(s)}function o(s){const a=i.events[i.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(s):jr(s)?r(s):t(s)}}const oBe={name:"codeText",previous:aBe,resolve:sBe,tokenize:lBe};function sBe(n){let e=n.length-4,t=3,i,r;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(i=t;++i<e;)if(n[i][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(i=t-1,e++;++i<=e;)r===void 0?i!==e&&n[i][1].type!=="lineEnding"&&(r=i):(i===e||n[i][1].type==="lineEnding")&&(n[r][1].type="codeTextData",i!==r+2&&(n[r][1].end=n[i-1][1].end,n.splice(r+2,i-r-2),e-=i-r-2,i=r+2),r=void 0);return n}function aBe(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function lBe(n,e,t){let i=0,r,o;return s;function s(y){return n.enter("codeText"),n.enter("codeTextSequence"),a(y)}function a(y){return y===96?(n.consume(y),i++,a):(n.exit("codeTextSequence"),c(y))}function c(y){return y===null?t(y):y===32?(n.enter("space"),n.consume(y),n.exit("space"),c):y===96?(o=n.enter("codeTextSequence"),r=0,m(y)):jr(y)?(n.enter("lineEnding"),n.consume(y),n.exit("lineEnding"),c):(n.enter("codeTextData"),h(y))}function h(y){return y===null||y===32||y===96||jr(y)?(n.exit("codeTextData"),c(y)):(n.consume(y),h)}function m(y){return y===96?(n.consume(y),r++,m):r===i?(n.exit("codeTextSequence"),n.exit("codeText"),e(y)):(o.type="codeTextData",h(y))}}class uBe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const i=t??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,t,i){const r=t||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&E2(this.left,i),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),E2(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),E2(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);E2(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);E2(this.left,t.reverse())}}}function E2(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function voe(n){const e={};let t=-1,i,r,o,s,a,c,h;const m=new uBe(n);for(;++t<m.length;){for(;t in e;)t=e[t];if(i=m.get(t),t&&i[1].type==="chunkFlow"&&m.get(t-1)[1].type==="listItemPrefix"&&(c=i[1]._tokenizer.events,o=0,o<c.length&&c[o][1].type==="lineEndingBlank"&&(o+=2),o<c.length&&c[o][1].type==="content"))for(;++o<c.length&&c[o][1].type!=="content";)c[o][1].type==="chunkText"&&(c[o][1]._isInFirstContentOfListItem=!0,o++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,cBe(m,t)),t=e[t],h=!0);else if(i[1]._container){for(o=t,r=void 0;o--;)if(s=m.get(o),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(r&&(m.get(r)[1].type="lineEndingBlank"),s[1].type="lineEnding",r=o);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;r&&(i[1].end={...m.get(r)[1].start},a=m.slice(r,t),a.unshift(i),m.splice(r,t-r+1,a))}}return Gg(n,0,Number.POSITIVE_INFINITY,m.slice(0)),!h}function cBe(n,e){const t=n.get(e)[1],i=n.get(e)[2];let r=e-1;const o=[];let s=t._tokenizer;s||(s=i.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const a=s.events,c=[],h={};let m,y,M=-1,x=t,k=0,P=0;const F=[P];for(;x;){for(;n.get(++r)[1]!==x;);o.push(r),x._tokenizer||(m=i.sliceStream(x),x.next||m.push(null),y&&s.defineSkip(x.start),x._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(m),x._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),y=x,x=x.next}for(x=t;++M<a.length;)a[M][0]==="exit"&&a[M-1][0]==="enter"&&a[M][1].type===a[M-1][1].type&&a[M][1].start.line!==a[M][1].end.line&&(P=M+1,F.push(P),x._tokenizer=void 0,x.previous=void 0,x=x.next);for(s.events=[],x?(x._tokenizer=void 0,x.previous=void 0):F.pop(),M=F.length;M--;){const j=a.slice(F[M],F[M+1]),q=o.pop();c.push([q,q+j.length-1]),n.splice(q,2,j)}for(c.reverse(),M=-1;++M<c.length;)h[k+c[M][0]]=k+c[M][1],k+=c[M][1]-c[M][0]-1;return h}const ABe={resolve:dBe,tokenize:fBe},hBe={partial:!0,tokenize:pBe};function dBe(n){return voe(n),n}function fBe(n,e){let t;return i;function i(a){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),r(a)}function r(a){return a===null?o(a):jr(a)?n.check(hBe,s,o)(a):(n.consume(a),r)}function o(a){return n.exit("chunkContent"),n.exit("content"),e(a)}function s(a){return n.consume(a),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,r}}function pBe(n,e,t){const i=this;return r;function r(s){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),qa(n,o,"linePrefix")}function o(s){if(s===null||jr(s))return t(s);const a=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(s):n.interrupt(i.parser.constructs.flow,t,e)(s)}}function boe(n,e,t,i,r,o,s,a,c){const h=c||Number.POSITIVE_INFINITY;let m=0;return y;function y(j){return j===60?(n.enter(i),n.enter(r),n.enter(o),n.consume(j),n.exit(o),M):j===null||j===32||j===41||_D(j)?t(j):(n.enter(i),n.enter(s),n.enter(a),n.enter("chunkString",{contentType:"string"}),P(j))}function M(j){return j===62?(n.enter(o),n.consume(j),n.exit(o),n.exit(r),n.exit(i),e):(n.enter(a),n.enter("chunkString",{contentType:"string"}),x(j))}function x(j){return j===62?(n.exit("chunkString"),n.exit(a),M(j)):j===null||j===60||jr(j)?t(j):(n.consume(j),j===92?k:x)}function k(j){return j===60||j===62||j===92?(n.consume(j),x):x(j)}function P(j){return!m&&(j===null||j===41||Cd(j))?(n.exit("chunkString"),n.exit(a),n.exit(s),n.exit(i),e(j)):m<h&&j===40?(n.consume(j),m++,P):j===41?(n.consume(j),m--,P):j===null||j===32||j===40||_D(j)?t(j):(n.consume(j),j===92?F:P)}function F(j){return j===40||j===41||j===92?(n.consume(j),P):P(j)}}function Coe(n,e,t,i,r,o){const s=this;let a=0,c;return h;function h(x){return n.enter(i),n.enter(r),n.consume(x),n.exit(r),n.enter(o),m}function m(x){return a>999||x===null||x===91||x===93&&!c||x===94&&!a&&"_hiddenFootnoteSupport"in s.parser.constructs?t(x):x===93?(n.exit(o),n.enter(r),n.consume(x),n.exit(r),n.exit(i),e):jr(x)?(n.enter("lineEnding"),n.consume(x),n.exit("lineEnding"),m):(n.enter("chunkString",{contentType:"string"}),y(x))}function y(x){return x===null||x===91||x===93||jr(x)||a++>999?(n.exit("chunkString"),m(x)):(n.consume(x),c||(c=!Ws(x)),x===92?M:y)}function M(x){return x===91||x===92||x===93?(n.consume(x),a++,y):y(x)}}function _oe(n,e,t,i,r,o){let s;return a;function a(M){return M===34||M===39||M===40?(n.enter(i),n.enter(r),n.consume(M),n.exit(r),s=M===40?41:M,c):t(M)}function c(M){return M===s?(n.enter(r),n.consume(M),n.exit(r),n.exit(i),e):(n.enter(o),h(M))}function h(M){return M===s?(n.exit(o),c(s)):M===null?t(M):jr(M)?(n.enter("lineEnding"),n.consume(M),n.exit("lineEnding"),qa(n,h,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),m(M))}function m(M){return M===s||M===null||jr(M)?(n.exit("chunkString"),h(M)):(n.consume(M),M===92?y:m)}function y(M){return M===s||M===92?(n.consume(M),m):m(M)}}function E3(n,e){let t;return i;function i(r){return jr(r)?(n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),t=!0,i):Ws(r)?qa(n,i,t?"linePrefix":"lineSuffix")(r):e(r)}}const mBe={name:"definition",tokenize:yBe},gBe={partial:!0,tokenize:vBe};function yBe(n,e,t){const i=this;let r;return o;function o(x){return n.enter("definition"),s(x)}function s(x){return Coe.call(i,n,a,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(x)}function a(x){return r=J_(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),x===58?(n.enter("definitionMarker"),n.consume(x),n.exit("definitionMarker"),c):t(x)}function c(x){return Cd(x)?E3(n,h)(x):h(x)}function h(x){return boe(n,m,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(x)}function m(x){return n.attempt(gBe,y,y)(x)}function y(x){return Ws(x)?qa(n,M,"whitespace")(x):M(x)}function M(x){return x===null||jr(x)?(n.exit("definition"),i.parser.defined.push(r),e(x)):t(x)}}function vBe(n,e,t){return i;function i(a){return Cd(a)?E3(n,r)(a):t(a)}function r(a){return _oe(n,o,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function o(a){return Ws(a)?qa(n,s,"whitespace")(a):s(a)}function s(a){return a===null||jr(a)?e(a):t(a)}}const bBe={name:"hardBreakEscape",tokenize:CBe};function CBe(n,e,t){return i;function i(o){return n.enter("hardBreakEscape"),n.consume(o),r}function r(o){return jr(o)?(n.exit("hardBreakEscape"),e(o)):t(o)}}const _Be={name:"headingAtx",resolve:xBe,tokenize:MBe};function xBe(n,e){let t=n.length-2,i=3,r,o;return n[i][1].type==="whitespace"&&(i+=2),t-2>i&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(i===t-1||t-4>i&&n[t-2][1].type==="whitespace")&&(t-=i+1===t?2:4),t>i&&(r={type:"atxHeadingText",start:n[i][1].start,end:n[t][1].end},o={type:"chunkText",start:n[i][1].start,end:n[t][1].end,contentType:"text"},Gg(n,i,t-i+1,[["enter",r,e],["enter",o,e],["exit",o,e],["exit",r,e]])),n}function MBe(n,e,t){let i=0;return r;function r(m){return n.enter("atxHeading"),o(m)}function o(m){return n.enter("atxHeadingSequence"),s(m)}function s(m){return m===35&&i++<6?(n.consume(m),s):m===null||Cd(m)?(n.exit("atxHeadingSequence"),a(m)):t(m)}function a(m){return m===35?(n.enter("atxHeadingSequence"),c(m)):m===null||jr(m)?(n.exit("atxHeading"),e(m)):Ws(m)?qa(n,a,"whitespace")(m):(n.enter("atxHeadingText"),h(m))}function c(m){return m===35?(n.consume(m),c):(n.exit("atxHeadingSequence"),a(m))}function h(m){return m===null||m===35||Cd(m)?(n.exit("atxHeadingText"),a(m)):(n.consume(m),h)}}const wBe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],NW=["pre","script","style","textarea"],SBe={concrete:!0,name:"htmlFlow",resolveTo:BBe,tokenize:IBe},EBe={partial:!0,tokenize:TBe},OBe={partial:!0,tokenize:kBe};function BBe(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function IBe(n,e,t){const i=this;let r,o,s,a,c;return h;function h(xe){return m(xe)}function m(xe){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(xe),y}function y(xe){return xe===33?(n.consume(xe),M):xe===47?(n.consume(xe),o=!0,P):xe===63?(n.consume(xe),r=3,i.interrupt?e:ke):bg(xe)?(n.consume(xe),s=String.fromCharCode(xe),F):t(xe)}function M(xe){return xe===45?(n.consume(xe),r=2,x):xe===91?(n.consume(xe),r=5,a=0,k):bg(xe)?(n.consume(xe),r=4,i.interrupt?e:ke):t(xe)}function x(xe){return xe===45?(n.consume(xe),i.interrupt?e:ke):t(xe)}function k(xe){const At="CDATA[";return xe===At.charCodeAt(a++)?(n.consume(xe),a===At.length?i.interrupt?e:be:k):t(xe)}function P(xe){return bg(xe)?(n.consume(xe),s=String.fromCharCode(xe),F):t(xe)}function F(xe){if(xe===null||xe===47||xe===62||Cd(xe)){const At=xe===47,it=s.toLowerCase();return!At&&!o&&NW.includes(it)?(r=1,i.interrupt?e(xe):be(xe)):wBe.includes(s.toLowerCase())?(r=6,At?(n.consume(xe),j):i.interrupt?e(xe):be(xe)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?t(xe):o?q(xe):V(xe))}return xe===45||Cf(xe)?(n.consume(xe),s+=String.fromCharCode(xe),F):t(xe)}function j(xe){return xe===62?(n.consume(xe),i.interrupt?e:be):t(xe)}function q(xe){return Ws(xe)?(n.consume(xe),q):me(xe)}function V(xe){return xe===47?(n.consume(xe),me):xe===58||xe===95||bg(xe)?(n.consume(xe),H):Ws(xe)?(n.consume(xe),V):me(xe)}function H(xe){return xe===45||xe===46||xe===58||xe===95||Cf(xe)?(n.consume(xe),H):G(xe)}function G(xe){return xe===61?(n.consume(xe),Y):Ws(xe)?(n.consume(xe),G):V(xe)}function Y(xe){return xe===null||xe===60||xe===61||xe===62||xe===96?t(xe):xe===34||xe===39?(n.consume(xe),c=xe,z):Ws(xe)?(n.consume(xe),Y):se(xe)}function z(xe){return xe===c?(n.consume(xe),c=null,le):xe===null||jr(xe)?t(xe):(n.consume(xe),z)}function se(xe){return xe===null||xe===34||xe===39||xe===47||xe===60||xe===61||xe===62||xe===96||Cd(xe)?G(xe):(n.consume(xe),se)}function le(xe){return xe===47||xe===62||Ws(xe)?V(xe):t(xe)}function me(xe){return xe===62?(n.consume(xe),de):t(xe)}function de(xe){return xe===null||jr(xe)?be(xe):Ws(xe)?(n.consume(xe),de):t(xe)}function be(xe){return xe===45&&r===2?(n.consume(xe),Ie):xe===60&&r===1?(n.consume(xe),Qe):xe===62&&r===4?(n.consume(xe),we):xe===63&&r===3?(n.consume(xe),ke):xe===93&&r===5?(n.consume(xe),dt):jr(xe)&&(r===6||r===7)?(n.exit("htmlFlowData"),n.check(EBe,ze,Ee)(xe)):xe===null||jr(xe)?(n.exit("htmlFlowData"),Ee(xe)):(n.consume(xe),be)}function Ee(xe){return n.check(OBe,De,ze)(xe)}function De(xe){return n.enter("lineEnding"),n.consume(xe),n.exit("lineEnding"),je}function je(xe){return xe===null||jr(xe)?Ee(xe):(n.enter("htmlFlowData"),be(xe))}function Ie(xe){return xe===45?(n.consume(xe),ke):be(xe)}function Qe(xe){return xe===47?(n.consume(xe),s="",et):be(xe)}function et(xe){if(xe===62){const At=s.toLowerCase();return NW.includes(At)?(n.consume(xe),we):be(xe)}return bg(xe)&&s.length<8?(n.consume(xe),s+=String.fromCharCode(xe),et):be(xe)}function dt(xe){return xe===93?(n.consume(xe),ke):be(xe)}function ke(xe){return xe===62?(n.consume(xe),we):xe===45&&r===2?(n.consume(xe),ke):be(xe)}function we(xe){return xe===null||jr(xe)?(n.exit("htmlFlowData"),ze(xe)):(n.consume(xe),we)}function ze(xe){return n.exit("htmlFlow"),e(xe)}}function kBe(n,e,t){const i=this;return r;function r(s){return jr(s)?(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),o):t(s)}function o(s){return i.parser.lazy[i.now().line]?t(s):e(s)}}function TBe(n,e,t){return i;function i(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),n.attempt(M6,e,t)}}const RBe={name:"htmlText",tokenize:DBe};function DBe(n,e,t){const i=this;let r,o,s;return a;function a(ke){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(ke),c}function c(ke){return ke===33?(n.consume(ke),h):ke===47?(n.consume(ke),G):ke===63?(n.consume(ke),V):bg(ke)?(n.consume(ke),se):t(ke)}function h(ke){return ke===45?(n.consume(ke),m):ke===91?(n.consume(ke),o=0,k):bg(ke)?(n.consume(ke),q):t(ke)}function m(ke){return ke===45?(n.consume(ke),x):t(ke)}function y(ke){return ke===null?t(ke):ke===45?(n.consume(ke),M):jr(ke)?(s=y,Qe(ke)):(n.consume(ke),y)}function M(ke){return ke===45?(n.consume(ke),x):y(ke)}function x(ke){return ke===62?Ie(ke):ke===45?M(ke):y(ke)}function k(ke){const we="CDATA[";return ke===we.charCodeAt(o++)?(n.consume(ke),o===we.length?P:k):t(ke)}function P(ke){return ke===null?t(ke):ke===93?(n.consume(ke),F):jr(ke)?(s=P,Qe(ke)):(n.consume(ke),P)}function F(ke){return ke===93?(n.consume(ke),j):P(ke)}function j(ke){return ke===62?Ie(ke):ke===93?(n.consume(ke),j):P(ke)}function q(ke){return ke===null||ke===62?Ie(ke):jr(ke)?(s=q,Qe(ke)):(n.consume(ke),q)}function V(ke){return ke===null?t(ke):ke===63?(n.consume(ke),H):jr(ke)?(s=V,Qe(ke)):(n.consume(ke),V)}function H(ke){return ke===62?Ie(ke):V(ke)}function G(ke){return bg(ke)?(n.consume(ke),Y):t(ke)}function Y(ke){return ke===45||Cf(ke)?(n.consume(ke),Y):z(ke)}function z(ke){return jr(ke)?(s=z,Qe(ke)):Ws(ke)?(n.consume(ke),z):Ie(ke)}function se(ke){return ke===45||Cf(ke)?(n.consume(ke),se):ke===47||ke===62||Cd(ke)?le(ke):t(ke)}function le(ke){return ke===47?(n.consume(ke),Ie):ke===58||ke===95||bg(ke)?(n.consume(ke),me):jr(ke)?(s=le,Qe(ke)):Ws(ke)?(n.consume(ke),le):Ie(ke)}function me(ke){return ke===45||ke===46||ke===58||ke===95||Cf(ke)?(n.consume(ke),me):de(ke)}function de(ke){return ke===61?(n.consume(ke),be):jr(ke)?(s=de,Qe(ke)):Ws(ke)?(n.consume(ke),de):le(ke)}function be(ke){return ke===null||ke===60||ke===61||ke===62||ke===96?t(ke):ke===34||ke===39?(n.consume(ke),r=ke,Ee):jr(ke)?(s=be,Qe(ke)):Ws(ke)?(n.consume(ke),be):(n.consume(ke),De)}function Ee(ke){return ke===r?(n.consume(ke),r=void 0,je):ke===null?t(ke):jr(ke)?(s=Ee,Qe(ke)):(n.consume(ke),Ee)}function De(ke){return ke===null||ke===34||ke===39||ke===60||ke===61||ke===96?t(ke):ke===47||ke===62||Cd(ke)?le(ke):(n.consume(ke),De)}function je(ke){return ke===47||ke===62||Cd(ke)?le(ke):t(ke)}function Ie(ke){return ke===62?(n.consume(ke),n.exit("htmlTextData"),n.exit("htmlText"),e):t(ke)}function Qe(ke){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(ke),n.exit("lineEnding"),et}function et(ke){return Ws(ke)?qa(n,dt,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ke):dt(ke)}function dt(ke){return n.enter("htmlTextData"),s(ke)}}const DK={name:"labelEnd",resolveAll:LBe,resolveTo:FBe,tokenize:zBe},PBe={tokenize:jBe},UBe={tokenize:NBe},KBe={tokenize:GBe};function LBe(n){let e=-1;const t=[];for(;++e<n.length;){const i=n[e][1];if(t.push(n[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",e+=r}}return n.length!==t.length&&Gg(n,0,n.length,t),n}function FBe(n,e){let t=n.length,i=0,r,o,s,a;for(;t--;)if(r=n[t][1],o){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;n[t][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(s){if(n[t][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(o=t,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(s=t);const c={type:n[o][1].type==="labelLink"?"link":"image",start:{...n[o][1].start},end:{...n[n.length-1][1].end}},h={type:"label",start:{...n[o][1].start},end:{...n[s][1].end}},m={type:"labelText",start:{...n[o+i+2][1].end},end:{...n[s-2][1].start}};return a=[["enter",c,e],["enter",h,e]],a=ip(a,n.slice(o+1,o+i+3)),a=ip(a,[["enter",m,e]]),a=ip(a,RK(e.parser.constructs.insideSpan.null,n.slice(o+i+4,s-3),e)),a=ip(a,[["exit",m,e],n[s-2],n[s-1],["exit",h,e]]),a=ip(a,n.slice(s+1)),a=ip(a,[["exit",c,e]]),Gg(n,o,n.length,a),n}function zBe(n,e,t){const i=this;let r=i.events.length,o,s;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){o=i.events[r][1];break}return a;function a(M){return o?o._inactive?y(M):(s=i.parser.defined.includes(J_(i.sliceSerialize({start:o.end,end:i.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(M),n.exit("labelMarker"),n.exit("labelEnd"),c):t(M)}function c(M){return M===40?n.attempt(PBe,m,s?m:y)(M):M===91?n.attempt(UBe,m,s?h:y)(M):s?m(M):y(M)}function h(M){return n.attempt(KBe,m,y)(M)}function m(M){return e(M)}function y(M){return o._balanced=!0,t(M)}}function jBe(n,e,t){return i;function i(y){return n.enter("resource"),n.enter("resourceMarker"),n.consume(y),n.exit("resourceMarker"),r}function r(y){return Cd(y)?E3(n,o)(y):o(y)}function o(y){return y===41?m(y):boe(n,s,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(y)}function s(y){return Cd(y)?E3(n,c)(y):m(y)}function a(y){return t(y)}function c(y){return y===34||y===39||y===40?_oe(n,h,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(y):m(y)}function h(y){return Cd(y)?E3(n,m)(y):m(y)}function m(y){return y===41?(n.enter("resourceMarker"),n.consume(y),n.exit("resourceMarker"),n.exit("resource"),e):t(y)}}function NBe(n,e,t){const i=this;return r;function r(a){return Coe.call(i,n,o,s,"reference","referenceMarker","referenceString")(a)}function o(a){return i.parser.defined.includes(J_(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(a):t(a)}function s(a){return t(a)}}function GBe(n,e,t){return i;function i(o){return n.enter("reference"),n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),r}function r(o){return o===93?(n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),n.exit("reference"),e):t(o)}}const WBe={name:"labelStartImage",resolveAll:DK.resolveAll,tokenize:QBe};function QBe(n,e,t){const i=this;return r;function r(a){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(a),n.exit("labelImageMarker"),o}function o(a){return a===91?(n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelImage"),s):t(a)}function s(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(a):e(a)}}const qBe={name:"labelStartLink",resolveAll:DK.resolveAll,tokenize:YBe};function YBe(n,e,t){const i=this;return r;function r(s){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(s),n.exit("labelMarker"),n.exit("labelLink"),o}function o(s){return s===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(s):e(s)}}const d8={name:"lineEnding",tokenize:$Be};function $Be(n,e){return t;function t(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),qa(n,e,"linePrefix")}}const ww={name:"thematicBreak",tokenize:VBe};function VBe(n,e,t){let i=0,r;return o;function o(h){return n.enter("thematicBreak"),s(h)}function s(h){return r=h,a(h)}function a(h){return h===r?(n.enter("thematicBreakSequence"),c(h)):i>=3&&(h===null||jr(h))?(n.exit("thematicBreak"),e(h)):t(h)}function c(h){return h===r?(n.consume(h),i++,c):(n.exit("thematicBreakSequence"),Ws(h)?qa(n,a,"whitespace")(h):a(h))}}const ud={continuation:{tokenize:JBe},exit:t8e,name:"list",tokenize:XBe},HBe={partial:!0,tokenize:n8e},ZBe={partial:!0,tokenize:e8e};function XBe(n,e,t){const i=this,r=i.events[i.events.length-1];let o=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,s=0;return a;function a(x){const k=i.containerState.type||(x===42||x===43||x===45?"listUnordered":"listOrdered");if(k==="listUnordered"?!i.containerState.marker||x===i.containerState.marker:xD(x)){if(i.containerState.type||(i.containerState.type=k,n.enter(k,{_container:!0})),k==="listUnordered")return n.enter("listItemPrefix"),x===42||x===45?n.check(ww,t,h)(x):h(x);if(!i.interrupt||x===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),c(x)}return t(x)}function c(x){return xD(x)&&++s<10?(n.consume(x),c):(!i.interrupt||s<2)&&(i.containerState.marker?x===i.containerState.marker:x===41||x===46)?(n.exit("listItemValue"),h(x)):t(x)}function h(x){return n.enter("listItemMarker"),n.consume(x),n.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||x,n.check(M6,i.interrupt?t:m,n.attempt(HBe,M,y))}function m(x){return i.containerState.initialBlankLine=!0,o++,M(x)}function y(x){return Ws(x)?(n.enter("listItemPrefixWhitespace"),n.consume(x),n.exit("listItemPrefixWhitespace"),M):t(x)}function M(x){return i.containerState.size=o+i.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(x)}}function JBe(n,e,t){const i=this;return i.containerState._closeFlow=void 0,n.check(M6,r,o);function r(a){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,qa(n,e,"listItemIndent",i.containerState.size+1)(a)}function o(a){return i.containerState.furtherBlankLines||!Ws(a)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,s(a)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,n.attempt(ZBe,e,s)(a))}function s(a){return i.containerState._closeFlow=!0,i.interrupt=void 0,qa(n,n.attempt(ud,e,t),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function e8e(n,e,t){const i=this;return qa(n,r,"listItemIndent",i.containerState.size+1);function r(o){const s=i.events[i.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===i.containerState.size?e(o):t(o)}}function t8e(n){n.exit(this.containerState.type)}function n8e(n,e,t){const i=this;return qa(n,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(o){const s=i.events[i.events.length-1];return!Ws(o)&&s&&s[1].type==="listItemPrefixWhitespace"?e(o):t(o)}}const GW={name:"setextUnderline",resolveTo:i8e,tokenize:r8e};function i8e(n,e){let t=n.length,i,r,o;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){i=t;break}n[t][1].type==="paragraph"&&(r=t)}else n[t][1].type==="content"&&n.splice(t,1),!o&&n[t][1].type==="definition"&&(o=t);const s={type:"setextHeading",start:{...n[i][1].start},end:{...n[n.length-1][1].end}};return n[r][1].type="setextHeadingText",o?(n.splice(r,0,["enter",s,e]),n.splice(o+1,0,["exit",n[i][1],e]),n[i][1].end={...n[o][1].end}):n[i][1]=s,n.push(["exit",s,e]),n}function r8e(n,e,t){const i=this;let r;return o;function o(h){let m=i.events.length,y;for(;m--;)if(i.events[m][1].type!=="lineEnding"&&i.events[m][1].type!=="linePrefix"&&i.events[m][1].type!=="content"){y=i.events[m][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||y)?(n.enter("setextHeadingLine"),r=h,s(h)):t(h)}function s(h){return n.enter("setextHeadingLineSequence"),a(h)}function a(h){return h===r?(n.consume(h),a):(n.exit("setextHeadingLineSequence"),Ws(h)?qa(n,c,"lineSuffix")(h):c(h))}function c(h){return h===null||jr(h)?(n.exit("setextHeadingLine"),e(h)):t(h)}}const o8e={tokenize:s8e};function s8e(n){const e=this,t=n.attempt(M6,i,n.attempt(this.parser.constructs.flowInitial,r,qa(n,n.attempt(this.parser.constructs.flow,r,n.attempt(ABe,r)),"linePrefix")));return t;function i(o){if(o===null){n.consume(o);return}return n.enter("lineEndingBlank"),n.consume(o),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function r(o){if(o===null){n.consume(o);return}return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const a8e={resolveAll:Moe()},l8e=xoe("string"),u8e=xoe("text");function xoe(n){return{resolveAll:Moe(n==="text"?c8e:void 0),tokenize:e};function e(t){const i=this,r=this.parser.constructs[n],o=t.attempt(r,s,a);return s;function s(m){return h(m)?o(m):a(m)}function a(m){if(m===null){t.consume(m);return}return t.enter("data"),t.consume(m),c}function c(m){return h(m)?(t.exit("data"),o(m)):(t.consume(m),c)}function h(m){if(m===null)return!0;const y=r[m];let M=-1;if(y)for(;++M<y.length;){const x=y[M];if(!x.previous||x.previous.call(i,i.previous))return!0}return!1}}}function Moe(n){return e;function e(t,i){let r=-1,o;for(;++r<=t.length;)o===void 0?t[r]&&t[r][1].type==="data"&&(o=r,r++):(!t[r]||t[r][1].type!=="data")&&(r!==o+2&&(t[o][1].end=t[r-1][1].end,t.splice(o+2,r-o-2),r=o+2),o=void 0);return n?n(t,i):t}}function c8e(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const i=n[t-1][1],r=e.sliceStream(i);let o=r.length,s=-1,a=0,c;for(;o--;){const h=r[o];if(typeof h=="string"){for(s=h.length;h.charCodeAt(s-1)===32;)a++,s--;if(s)break;s=-1}else if(h===-2)c=!0,a++;else if(h!==-1){o++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(a=0),a){const h={type:t===n.length||c||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?s:i.start._bufferIndex+s,_index:i.start._index+o,line:i.end.line,column:i.end.column-a,offset:i.end.offset-a},end:{...i.end}};i.end={...h.start},i.start.offset===i.end.offset?Object.assign(i,h):(n.splice(t,0,["enter",h,e],["exit",h,e]),t+=2)}t++}return n}const A8e={42:ud,43:ud,45:ud,48:ud,49:ud,50:ud,51:ud,52:ud,53:ud,54:ud,55:ud,56:ud,57:ud,62:moe},h8e={91:mBe},d8e={[-2]:h8,[-1]:h8,32:h8},f8e={35:_Be,42:ww,45:[GW,ww],60:SBe,61:GW,95:ww,96:jW,126:jW},p8e={38:yoe,92:goe},m8e={[-5]:d8,[-4]:d8,[-3]:d8,33:WBe,38:yoe,42:MD,60:[qOe,RBe],91:qBe,92:[bBe,goe],93:DK,95:MD,96:oBe},g8e={null:[MD,a8e]},y8e={null:[42,95]},v8e={null:[]},b8e=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:y8e,contentInitial:h8e,disable:v8e,document:A8e,flow:f8e,flowInitial:d8e,insideSpan:g8e,string:p8e,text:m8e},Symbol.toStringTag,{value:"Module"}));function C8e(n,e,t){let i={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const r={},o=[];let s=[],a=[];const c={attempt:z(G),check:z(Y),consume:q,enter:V,exit:H,interrupt:z(Y,{interrupt:!0})},h={code:null,containerState:{},defineSkip:P,events:[],now:k,parser:n,previous:null,sliceSerialize:M,sliceStream:x,write:y};let m=e.tokenize.call(h,c);return e.resolveAll&&o.push(e),h;function y(de){return s=ip(s,de),F(),s[s.length-1]!==null?[]:(se(e,0),h.events=RK(o,h.events,h),h.events)}function M(de,be){return x8e(x(de),be)}function x(de){return _8e(s,de)}function k(){const{_bufferIndex:de,_index:be,line:Ee,column:De,offset:je}=i;return{_bufferIndex:de,_index:be,line:Ee,column:De,offset:je}}function P(de){r[de.line]=de.column,me()}function F(){let de;for(;i._index<s.length;){const be=s[i._index];if(typeof be=="string")for(de=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===de&&i._bufferIndex<be.length;)j(be.charCodeAt(i._bufferIndex));else j(be)}}function j(de){m=m(de)}function q(de){jr(de)?(i.line++,i.column=1,i.offset+=de===-3?2:1,me()):de!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===s[i._index].length&&(i._bufferIndex=-1,i._index++)),h.previous=de}function V(de,be){const Ee=be||{};return Ee.type=de,Ee.start=k(),h.events.push(["enter",Ee,h]),a.push(Ee),Ee}function H(de){const be=a.pop();return be.end=k(),h.events.push(["exit",be,h]),be}function G(de,be){se(de,be.from)}function Y(de,be){be.restore()}function z(de,be){return Ee;function Ee(De,je,Ie){let Qe,et,dt,ke;return Array.isArray(De)?ze(De):"tokenize"in De?ze([De]):we(De);function we(bt){return Bt;function Bt(Ke){const Te=Ke!==null&&bt[Ke],Se=Ke!==null&&bt.null,Ne=[...Array.isArray(Te)?Te:Te?[Te]:[],...Array.isArray(Se)?Se:Se?[Se]:[]];return ze(Ne)(Ke)}}function ze(bt){return Qe=bt,et=0,bt.length===0?Ie:xe(bt[et])}function xe(bt){return Bt;function Bt(Ke){return ke=le(),dt=bt,bt.partial||(h.currentConstruct=bt),bt.name&&h.parser.constructs.disable.null.includes(bt.name)?it():bt.tokenize.call(be?Object.assign(Object.create(h),be):h,c,At,it)(Ke)}}function At(bt){return de(dt,ke),je}function it(bt){return ke.restore(),++et<Qe.length?xe(Qe[et]):Ie}}}function se(de,be){de.resolveAll&&!o.includes(de)&&o.push(de),de.resolve&&Gg(h.events,be,h.events.length-be,de.resolve(h.events.slice(be),h)),de.resolveTo&&(h.events=de.resolveTo(h.events,h))}function le(){const de=k(),be=h.previous,Ee=h.currentConstruct,De=h.events.length,je=Array.from(a);return{from:De,restore:Ie};function Ie(){i=de,h.previous=be,h.currentConstruct=Ee,h.events.length=De,a=je,me()}}function me(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function _8e(n,e){const t=e.start._index,i=e.start._bufferIndex,r=e.end._index,o=e.end._bufferIndex;let s;if(t===r)s=[n[t].slice(i,o)];else{if(s=n.slice(t,r),i>-1){const a=s[0];typeof a=="string"?s[0]=a.slice(i):s.shift()}o>0&&s.push(n[r].slice(0,o))}return s}function x8e(n,e){let t=-1;const i=[];let r;for(;++t<n.length;){const o=n[t];let s;if(typeof o=="string")s=o;else switch(o){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=e?" ":"	";break}case-1:{if(!e&&r)continue;s=" ";break}default:s=String.fromCharCode(o)}r=o===-2,i.push(s)}return i.join("")}function M8e(n){const i={constructs:kOe([b8e,...(n||{}).extensions||[]]),content:r(FOe),defined:[],document:r(jOe),flow:r(o8e),lazy:{},string:r(l8e),text:r(u8e)};return i;function r(o){return s;function s(a){return C8e(i,o,a)}}}function w8e(n){for(;!voe(n););return n}const WW=/[\0\t\n\r]/g;function S8e(){let n=1,e="",t=!0,i;return r;function r(o,s,a){const c=[];let h,m,y,M,x;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(s||void 0).decode(o)),y=0,e="",t&&(o.charCodeAt(0)===65279&&y++,t=void 0);y<o.length;){if(WW.lastIndex=y,h=WW.exec(o),M=h&&h.index!==void 0?h.index:o.length,x=o.charCodeAt(M),!h){e=o.slice(y);break}if(x===10&&y===M&&i)c.push(-3),i=void 0;else switch(i&&(c.push(-5),i=void 0),y<M&&(c.push(o.slice(y,M)),n+=M-y),x){case 0:{c.push(65533),n++;break}case 9:{for(m=Math.ceil(n/4)*4,c.push(-2);n++<m;)c.push(-1);break}case 10:{c.push(-4),n=1;break}default:i=!0,n=1}y=M+1}return a&&(i&&c.push(-5),e&&c.push(e),c.push(null)),c}}const E8e=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function O8e(n){return n.replace(E8e,B8e)}function B8e(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const r=t.charCodeAt(1),o=r===120||r===88;return poe(t.slice(o?2:1),o?16:10)}return TK(t)||n}const woe={}.hasOwnProperty;function I8e(n,e,t){return typeof e!="string"&&(t=e,e=void 0),k8e(t)(w8e(M8e(t).document().write(S8e()(n,e,!0))))}function k8e(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Ln),autolinkProtocol:le,autolinkEmail:le,atxHeading:o(Dt),blockQuote:o(Se),characterEscape:le,characterReference:le,codeFenced:o(Ne),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:o(Ne,s),codeText:o(ut,s),codeTextData:le,data:le,codeFlowValue:le,definition:o(rt),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:o(pt),hardBreakEscape:o(Ot),hardBreakTrailing:o(Ot),htmlFlow:o(Jt,s),htmlFlowData:le,htmlText:o(Jt,s),htmlTextData:le,image:o(Tn),label:s,link:o(Ln),listItem:o(wn),listItemValue:M,listOrdered:o(ii,y),listUnordered:o(ii),paragraph:o(Rn),reference:xe,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:o(Dt),strong:o(gn),thematicBreak:o(Dn)},exit:{atxHeading:c(),atxHeadingSequence:G,autolink:c(),autolinkEmail:Te,autolinkProtocol:Ke,blockQuote:c(),characterEscapeValue:me,characterReferenceMarkerHexadecimal:it,characterReferenceMarkerNumeric:it,characterReferenceValue:bt,characterReference:Bt,codeFenced:c(F),codeFencedFence:P,codeFencedFenceInfo:x,codeFencedFenceMeta:k,codeFlowValue:me,codeIndented:c(j),codeText:c(je),codeTextData:me,data:me,definition:c(),definitionDestinationString:H,definitionLabelString:q,definitionTitleString:V,emphasis:c(),hardBreakEscape:c(be),hardBreakTrailing:c(be),htmlFlow:c(Ee),htmlFlowData:me,htmlText:c(De),htmlTextData:me,image:c(Qe),label:dt,labelText:et,lineEnding:de,link:c(Ie),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:At,resourceDestinationString:ke,resourceTitleString:we,resource:ze,setextHeading:c(se),setextHeadingLineSequence:z,setextHeadingText:Y,strong:c(),thematicBreak:c()}};Soe(e,(n||{}).mdastExtensions||[]);const t={};return i;function i(Tt){let _e={type:"root",children:[]};const oe={stack:[_e],tokenStack:[],config:e,enter:a,exit:h,buffer:s,resume:m,data:t},ee=[];let ne=-1;for(;++ne<Tt.length;)if(Tt[ne][1].type==="listOrdered"||Tt[ne][1].type==="listUnordered")if(Tt[ne][0]==="enter")ee.push(ne);else{const ue=ee.pop();ne=r(Tt,ue,ne)}for(ne=-1;++ne<Tt.length;){const ue=e[Tt[ne][0]];woe.call(ue,Tt[ne][1].type)&&ue[Tt[ne][1].type].call(Object.assign({sliceSerialize:Tt[ne][2].sliceSerialize},oe),Tt[ne][1])}if(oe.tokenStack.length>0){const ue=oe.tokenStack[oe.tokenStack.length-1];(ue[1]||QW).call(oe,void 0,ue[0])}for(_e.position={start:My(Tt.length>0?Tt[0][1].start:{line:1,column:1,offset:0}),end:My(Tt.length>0?Tt[Tt.length-2][1].end:{line:1,column:1,offset:0})},ne=-1;++ne<e.transforms.length;)_e=e.transforms[ne](_e)||_e;return _e}function r(Tt,_e,oe){let ee=_e-1,ne=-1,ue=!1,ye,Ue,Ve,lt;for(;++ee<=oe;){const ge=Tt[ee];switch(ge[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ge[0]==="enter"?ne++:ne--,lt=void 0;break}case"lineEndingBlank":{ge[0]==="enter"&&(ye&&!lt&&!ne&&!Ve&&(Ve=ee),lt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:lt=void 0}if(!ne&&ge[0]==="enter"&&ge[1].type==="listItemPrefix"||ne===-1&&ge[0]==="exit"&&(ge[1].type==="listUnordered"||ge[1].type==="listOrdered")){if(ye){let Be=ee;for(Ue=void 0;Be--;){const v=Tt[Be];if(v[1].type==="lineEnding"||v[1].type==="lineEndingBlank"){if(v[0]==="exit")continue;Ue&&(Tt[Ue][1].type="lineEndingBlank",ue=!0),v[1].type="lineEnding",Ue=Be}else if(!(v[1].type==="linePrefix"||v[1].type==="blockQuotePrefix"||v[1].type==="blockQuotePrefixWhitespace"||v[1].type==="blockQuoteMarker"||v[1].type==="listItemIndent"))break}Ve&&(!Ue||Ve<Ue)&&(ye._spread=!0),ye.end=Object.assign({},Ue?Tt[Ue][1].start:ge[1].end),Tt.splice(Ue||ee,0,["exit",ye,ge[2]]),ee++,oe++}if(ge[1].type==="listItemPrefix"){const Be={type:"listItem",_spread:!1,start:Object.assign({},ge[1].start),end:void 0};ye=Be,Tt.splice(ee,0,["enter",Be,ge[2]]),ee++,oe++,Ve=void 0,lt=!0}}}return Tt[_e][1]._spread=ue,oe}function o(Tt,_e){return oe;function oe(ee){a.call(this,Tt(ee),ee),_e&&_e.call(this,ee)}}function s(){this.stack.push({type:"fragment",children:[]})}function a(Tt,_e,oe){this.stack[this.stack.length-1].children.push(Tt),this.stack.push(Tt),this.tokenStack.push([_e,oe||void 0]),Tt.position={start:My(_e.start),end:void 0}}function c(Tt){return _e;function _e(oe){Tt&&Tt.call(this,oe),h.call(this,oe)}}function h(Tt,_e){const oe=this.stack.pop(),ee=this.tokenStack.pop();if(ee)ee[0].type!==Tt.type&&(_e?_e.call(this,Tt,ee[0]):(ee[1]||QW).call(this,Tt,ee[0]));else throw new Error("Cannot close `"+Tt.type+"` ("+S3({start:Tt.start,end:Tt.end})+"): its not open");oe.position.end=My(Tt.end)}function m(){return BOe(this.stack.pop())}function y(){this.data.expectingFirstListItemValue=!0}function M(Tt){if(this.data.expectingFirstListItemValue){const _e=this.stack[this.stack.length-2];_e.start=Number.parseInt(this.sliceSerialize(Tt),10),this.data.expectingFirstListItemValue=void 0}}function x(){const Tt=this.resume(),_e=this.stack[this.stack.length-1];_e.lang=Tt}function k(){const Tt=this.resume(),_e=this.stack[this.stack.length-1];_e.meta=Tt}function P(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function F(){const Tt=this.resume(),_e=this.stack[this.stack.length-1];_e.value=Tt.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function j(){const Tt=this.resume(),_e=this.stack[this.stack.length-1];_e.value=Tt.replace(/(\r?\n|\r)$/g,"")}function q(Tt){const _e=this.resume(),oe=this.stack[this.stack.length-1];oe.label=_e,oe.identifier=J_(this.sliceSerialize(Tt)).toLowerCase()}function V(){const Tt=this.resume(),_e=this.stack[this.stack.length-1];_e.title=Tt}function H(){const Tt=this.resume(),_e=this.stack[this.stack.length-1];_e.url=Tt}function G(Tt){const _e=this.stack[this.stack.length-1];if(!_e.depth){const oe=this.sliceSerialize(Tt).length;_e.depth=oe}}function Y(){this.data.setextHeadingSlurpLineEnding=!0}function z(Tt){const _e=this.stack[this.stack.length-1];_e.depth=this.sliceSerialize(Tt).codePointAt(0)===61?1:2}function se(){this.data.setextHeadingSlurpLineEnding=void 0}function le(Tt){const oe=this.stack[this.stack.length-1].children;let ee=oe[oe.length-1];(!ee||ee.type!=="text")&&(ee=Yn(),ee.position={start:My(Tt.start),end:void 0},oe.push(ee)),this.stack.push(ee)}function me(Tt){const _e=this.stack.pop();_e.value+=this.sliceSerialize(Tt),_e.position.end=My(Tt.end)}function de(Tt){const _e=this.stack[this.stack.length-1];if(this.data.atHardBreak){const oe=_e.children[_e.children.length-1];oe.position.end=My(Tt.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(_e.type)&&(le.call(this,Tt),me.call(this,Tt))}function be(){this.data.atHardBreak=!0}function Ee(){const Tt=this.resume(),_e=this.stack[this.stack.length-1];_e.value=Tt}function De(){const Tt=this.resume(),_e=this.stack[this.stack.length-1];_e.value=Tt}function je(){const Tt=this.resume(),_e=this.stack[this.stack.length-1];_e.value=Tt}function Ie(){const Tt=this.stack[this.stack.length-1];if(this.data.inReference){const _e=this.data.referenceType||"shortcut";Tt.type+="Reference",Tt.referenceType=_e,delete Tt.url,delete Tt.title}else delete Tt.identifier,delete Tt.label;this.data.referenceType=void 0}function Qe(){const Tt=this.stack[this.stack.length-1];if(this.data.inReference){const _e=this.data.referenceType||"shortcut";Tt.type+="Reference",Tt.referenceType=_e,delete Tt.url,delete Tt.title}else delete Tt.identifier,delete Tt.label;this.data.referenceType=void 0}function et(Tt){const _e=this.sliceSerialize(Tt),oe=this.stack[this.stack.length-2];oe.label=O8e(_e),oe.identifier=J_(_e).toLowerCase()}function dt(){const Tt=this.stack[this.stack.length-1],_e=this.resume(),oe=this.stack[this.stack.length-1];if(this.data.inReference=!0,oe.type==="link"){const ee=Tt.children;oe.children=ee}else oe.alt=_e}function ke(){const Tt=this.resume(),_e=this.stack[this.stack.length-1];_e.url=Tt}function we(){const Tt=this.resume(),_e=this.stack[this.stack.length-1];_e.title=Tt}function ze(){this.data.inReference=void 0}function xe(){this.data.referenceType="collapsed"}function At(Tt){const _e=this.resume(),oe=this.stack[this.stack.length-1];oe.label=_e,oe.identifier=J_(this.sliceSerialize(Tt)).toLowerCase(),this.data.referenceType="full"}function it(Tt){this.data.characterReferenceType=Tt.type}function bt(Tt){const _e=this.sliceSerialize(Tt),oe=this.data.characterReferenceType;let ee;oe?(ee=poe(_e,oe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ee=TK(_e);const ne=this.stack[this.stack.length-1];ne.value+=ee}function Bt(Tt){const _e=this.stack.pop();_e.position.end=My(Tt.end)}function Ke(Tt){me.call(this,Tt);const _e=this.stack[this.stack.length-1];_e.url=this.sliceSerialize(Tt)}function Te(Tt){me.call(this,Tt);const _e=this.stack[this.stack.length-1];_e.url="mailto:"+this.sliceSerialize(Tt)}function Se(){return{type:"blockquote",children:[]}}function Ne(){return{type:"code",lang:null,meta:null,value:""}}function ut(){return{type:"inlineCode",value:""}}function rt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function pt(){return{type:"emphasis",children:[]}}function Dt(){return{type:"heading",depth:0,children:[]}}function Ot(){return{type:"break"}}function Jt(){return{type:"html",value:""}}function Tn(){return{type:"image",title:null,url:"",alt:null}}function Ln(){return{type:"link",title:null,url:"",children:[]}}function ii(Tt){return{type:"list",ordered:Tt.type==="listOrdered",start:null,spread:Tt._spread,children:[]}}function wn(Tt){return{type:"listItem",spread:Tt._spread,checked:null,children:[]}}function Rn(){return{type:"paragraph",children:[]}}function gn(){return{type:"strong",children:[]}}function Yn(){return{type:"text",value:""}}function Dn(){return{type:"thematicBreak"}}}function My(n){return{line:n.line,column:n.column,offset:n.offset}}function Soe(n,e){let t=-1;for(;++t<e.length;){const i=e[t];Array.isArray(i)?Soe(n,i):T8e(n,i)}}function T8e(n,e){let t;for(t in e)if(woe.call(e,t))switch(t){case"canContainEols":{const i=e[t];i&&n[t].push(...i);break}case"transforms":{const i=e[t];i&&n[t].push(...i);break}case"enter":case"exit":{const i=e[t];i&&Object.assign(n[t],i);break}}}function QW(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+S3({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+S3({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+S3({start:e.start,end:e.end})+") is still open")}function R8e(n){const e=this;e.parser=t;function t(i){return I8e(i,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function D8e(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function P8e(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function U8e(n,e){const t=e.value?e.value+`
`:"",i={};e.lang&&(i.className=["language-"+e.lang]);let r={type:"element",tagName:"code",properties:i,children:[{type:"text",value:t}]};return e.meta&&(r.data={meta:e.meta}),n.patch(e,r),r=n.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},n.patch(e,r),r}function K8e(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function L8e(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function F8e(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),r=$x(i.toLowerCase()),o=n.footnoteOrder.indexOf(i);let s,a=n.footnoteCounts.get(i);a===void 0?(a=0,n.footnoteOrder.push(i),s=n.footnoteOrder.length):s=o+1,a+=1,n.footnoteCounts.set(i,a);const c={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+r,id:t+"fnref-"+r+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};n.patch(e,c);const h={type:"element",tagName:"sup",properties:{},children:[c]};return n.patch(e,h),n.applyData(e,h)}function z8e(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function j8e(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function Eoe(n,e){const t=e.referenceType;let i="]";if(t==="collapsed"?i+="[]":t==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const r=n.all(e),o=r[0];o&&o.type==="text"?o.value="["+o.value:r.unshift({type:"text",value:"["});const s=r[r.length-1];return s&&s.type==="text"?s.value+=i:r.push({type:"text",value:i}),r}function N8e(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return Eoe(n,e);const r={src:$x(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const o={type:"element",tagName:"img",properties:r,children:[]};return n.patch(e,o),n.applyData(e,o)}function G8e(n,e){const t={src:$x(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,i),n.applyData(e,i)}function W8e(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const i={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,i),n.applyData(e,i)}function Q8e(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return Eoe(n,e);const r={href:$x(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const o={type:"element",tagName:"a",properties:r,children:n.all(e)};return n.patch(e,o),n.applyData(e,o)}function q8e(n,e){const t={href:$x(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function Y8e(n,e,t){const i=n.all(e),r=t?$8e(t):Ooe(e),o={},s=[];if(typeof e.checked=="boolean"){const m=i[0];let y;m&&m.type==="element"&&m.tagName==="p"?y=m:(y={type:"element",tagName:"p",properties:{},children:[]},i.unshift(y)),y.children.length>0&&y.children.unshift({type:"text",value:" "}),y.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let a=-1;for(;++a<i.length;){const m=i[a];(r||a!==0||m.type!=="element"||m.tagName!=="p")&&s.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!r?s.push(...m.children):s.push(m)}const c=i[i.length-1];c&&(r||c.type!=="element"||c.tagName!=="p")&&s.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:o,children:s};return n.patch(e,h),n.applyData(e,h)}function $8e(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let i=-1;for(;!e&&++i<t.length;)e=Ooe(t[i])}return e}function Ooe(n){const e=n.spread;return e??n.children.length>1}function V8e(n,e){const t={},i=n.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++r<i.length;){const s=i[r];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(i,!0)};return n.patch(e,o),n.applyData(e,o)}function H8e(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function Z8e(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function X8e(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function J8e(n,e){const t=n.all(e),i=t.shift(),r=[];if(i){const s={type:"element",tagName:"thead",properties:{},children:n.wrap([i],!0)};n.patch(e.children[0],s),r.push(s)}if(t.length>0){const s={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},a=OK(e.children[1]),c=loe(e.children[e.children.length-1]);a&&c&&(s.position={start:a,end:c}),r.push(s)}const o={type:"element",tagName:"table",properties:{},children:n.wrap(r,!0)};return n.patch(e,o),n.applyData(e,o)}function e7e(n,e,t){const i=t?t.children:void 0,o=(i?i.indexOf(e):1)===0?"th":"td",s=t&&t.type==="table"?t.align:void 0,a=s?s.length:e.children.length;let c=-1;const h=[];for(;++c<a;){const y=e.children[c],M={},x=s?s[c]:void 0;x&&(M.align=x);let k={type:"element",tagName:o,properties:M,children:[]};y&&(k.children=n.all(y),n.patch(y,k),k=n.applyData(y,k)),h.push(k)}const m={type:"element",tagName:"tr",properties:{},children:n.wrap(h,!0)};return n.patch(e,m),n.applyData(e,m)}function t7e(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const qW=9,YW=32;function n7e(n){const e=String(n),t=/\r?\n|\r/g;let i=t.exec(e),r=0;const o=[];for(;i;)o.push($W(e.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=t.exec(e);return o.push($W(e.slice(r),r>0,!1)),o.join("")}function $W(n,e,t){let i=0,r=n.length;if(e){let o=n.codePointAt(i);for(;o===qW||o===YW;)i++,o=n.codePointAt(i)}if(t){let o=n.codePointAt(r-1);for(;o===qW||o===YW;)r--,o=n.codePointAt(r-1)}return r>i?n.slice(i,r):""}function i7e(n,e){const t={type:"text",value:n7e(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function r7e(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const o7e={blockquote:D8e,break:P8e,code:U8e,delete:K8e,emphasis:L8e,footnoteReference:F8e,heading:z8e,html:j8e,imageReference:N8e,image:G8e,inlineCode:W8e,linkReference:Q8e,link:q8e,listItem:Y8e,list:V8e,paragraph:H8e,root:Z8e,strong:X8e,table:J8e,tableCell:t7e,tableRow:e7e,text:i7e,thematicBreak:r7e,toml:KM,yaml:KM,definition:KM,footnoteDefinition:KM};function KM(){}const Boe=-1,w6=0,O3=1,ZS=2,PK=3,UK=4,KK=5,LK=6,Ioe=7,koe=8,VW=typeof self=="object"?self:globalThis,s7e=(n,e)=>{const t=(r,o)=>(n.set(o,r),r),i=r=>{if(n.has(r))return n.get(r);const[o,s]=e[r];switch(o){case w6:case Boe:return t(s,r);case O3:{const a=t([],r);for(const c of s)a.push(i(c));return a}case ZS:{const a=t({},r);for(const[c,h]of s)a[i(c)]=i(h);return a}case PK:return t(new Date(s),r);case UK:{const{source:a,flags:c}=s;return t(new RegExp(a,c),r)}case KK:{const a=t(new Map,r);for(const[c,h]of s)a.set(i(c),i(h));return a}case LK:{const a=t(new Set,r);for(const c of s)a.add(i(c));return a}case Ioe:{const{name:a,message:c}=s;return t(new VW[a](c),r)}case koe:return t(BigInt(s),r);case"BigInt":return t(Object(BigInt(s)),r);case"ArrayBuffer":return t(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:a}=new Uint8Array(s);return t(new DataView(a),s)}}return t(new VW[o](s),r)};return i},HW=n=>s7e(new Map,n)(0),qC="",{toString:a7e}={},{keys:l7e}=Object,O2=n=>{const e=typeof n;if(e!=="object"||!n)return[w6,e];const t=a7e.call(n).slice(8,-1);switch(t){case"Array":return[O3,qC];case"Object":return[ZS,qC];case"Date":return[PK,qC];case"RegExp":return[UK,qC];case"Map":return[KK,qC];case"Set":return[LK,qC];case"DataView":return[O3,t]}return t.includes("Array")?[O3,t]:t.includes("Error")?[Ioe,t]:[ZS,t]},LM=([n,e])=>n===w6&&(e==="function"||e==="symbol"),u7e=(n,e,t,i)=>{const r=(s,a)=>{const c=i.push(s)-1;return t.set(a,c),c},o=s=>{if(t.has(s))return t.get(s);let[a,c]=O2(s);switch(a){case w6:{let m=s;switch(c){case"bigint":a=koe,m=s.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+c);m=null;break;case"undefined":return r([Boe],s)}return r([a,m],s)}case O3:{if(c){let M=s;return c==="DataView"?M=new Uint8Array(s.buffer):c==="ArrayBuffer"&&(M=new Uint8Array(s)),r([c,[...M]],s)}const m=[],y=r([a,m],s);for(const M of s)m.push(o(M));return y}case ZS:{if(c)switch(c){case"BigInt":return r([c,s.toString()],s);case"Boolean":case"Number":case"String":return r([c,s.valueOf()],s)}if(e&&"toJSON"in s)return o(s.toJSON());const m=[],y=r([a,m],s);for(const M of l7e(s))(n||!LM(O2(s[M])))&&m.push([o(M),o(s[M])]);return y}case PK:return r([a,s.toISOString()],s);case UK:{const{source:m,flags:y}=s;return r([a,{source:m,flags:y}],s)}case KK:{const m=[],y=r([a,m],s);for(const[M,x]of s)(n||!(LM(O2(M))||LM(O2(x))))&&m.push([o(M),o(x)]);return y}case LK:{const m=[],y=r([a,m],s);for(const M of s)(n||!LM(O2(M)))&&m.push(o(M));return y}}const{message:h}=s;return r([a,{name:c,message:h}],s)};return o},ZW=(n,{json:e,lossy:t}={})=>{const i=[];return u7e(!(e||t),!!e,new Map,i)(n),i},XS=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?HW(ZW(n,e)):structuredClone(n):(n,e)=>HW(ZW(n,e));function c7e(n,e){const t=[{type:"text",value:""}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function A7e(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function h7e(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||c7e,i=n.options.footnoteBackLabel||A7e,r=n.options.footnoteLabel||"Footnotes",o=n.options.footnoteLabelTagName||"h2",s=n.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let c=-1;for(;++c<n.footnoteOrder.length;){const h=n.footnoteById.get(n.footnoteOrder[c]);if(!h)continue;const m=n.all(h),y=String(h.identifier).toUpperCase(),M=$x(y.toLowerCase());let x=0;const k=[],P=n.footnoteCounts.get(y);for(;P!==void 0&&++x<=P;){k.length>0&&k.push({type:"text",value:" "});let q=typeof t=="string"?t:t(c,x);typeof q=="string"&&(q={type:"text",value:q}),k.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+M+(x>1?"-"+x:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(c,x),className:["data-footnote-backref"]},children:Array.isArray(q)?q:[q]})}const F=m[m.length-1];if(F&&F.type==="element"&&F.tagName==="p"){const q=F.children[F.children.length-1];q&&q.type==="text"?q.value+=" ":F.children.push({type:"text",value:" "}),F.children.push(...k)}else m.push(...k);const j={type:"element",tagName:"li",properties:{id:e+"fn-"+M},children:n.wrap(m,!0)};n.patch(h,j),a.push(j)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...XS(s),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(a,!0)},{type:"text",value:`
`}]}}const Toe=(function(n){if(n==null)return m7e;if(typeof n=="function")return S6(n);if(typeof n=="object")return Array.isArray(n)?d7e(n):f7e(n);if(typeof n=="string")return p7e(n);throw new Error("Expected function, string, or object as test")});function d7e(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=Toe(n[t]);return S6(i);function i(...r){let o=-1;for(;++o<e.length;)if(e[o].apply(this,r))return!0;return!1}}function f7e(n){const e=n;return S6(t);function t(i){const r=i;let o;for(o in n)if(r[o]!==e[o])return!1;return!0}}function p7e(n){return S6(e);function e(t){return t&&t.type===n}}function S6(n){return e;function e(t,i,r){return!!(g7e(t)&&n.call(this,t,typeof i=="number"?i:void 0,r||void 0))}}function m7e(){return!0}function g7e(n){return n!==null&&typeof n=="object"&&"type"in n}const Roe=[],y7e=!0,XW=!1,v7e="skip";function b7e(n,e,t,i){let r;typeof e=="function"&&typeof t!="function"?(i=t,t=e):r=e;const o=Toe(r),s=i?-1:1;a(n,void 0,[])();function a(c,h,m){const y=c&&typeof c=="object"?c:{};if(typeof y.type=="string"){const x=typeof y.tagName=="string"?y.tagName:typeof y.name=="string"?y.name:void 0;Object.defineProperty(M,"name",{value:"node ("+(c.type+(x?"<"+x+">":""))+")"})}return M;function M(){let x=Roe,k,P,F;if((!e||o(c,h,m[m.length-1]||void 0))&&(x=C7e(t(c,m)),x[0]===XW))return x;if("children"in c&&c.children){const j=c;if(j.children&&x[0]!==v7e)for(P=(i?j.children.length:-1)+s,F=m.concat(j);P>-1&&P<j.children.length;){const q=j.children[P];if(k=a(q,P,F)(),k[0]===XW)return k;P=typeof k[1]=="number"?k[1]:P+s}}return x}}}function C7e(n){return Array.isArray(n)?n:typeof n=="number"?[y7e,n]:n==null?Roe:[n]}function Doe(n,e,t,i){let r,o,s;typeof e=="function"&&typeof t!="function"?(o=void 0,s=e,r=t):(o=e,s=t,r=i),b7e(n,o,a,r);function a(c,h){const m=h[h.length-1],y=m?m.children.indexOf(c):void 0;return s(c,y,m)}}const wD={}.hasOwnProperty,_7e={};function x7e(n,e){const t=e||_7e,i=new Map,r=new Map,o=new Map,s={...o7e,...t.handlers},a={all:h,applyData:w7e,definitionById:i,footnoteById:r,footnoteCounts:o,footnoteOrder:[],handlers:s,one:c,options:t,patch:M7e,wrap:E7e};return Doe(n,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const y=m.type==="definition"?i:r,M=String(m.identifier).toUpperCase();y.has(M)||y.set(M,m)}}),a;function c(m,y){const M=m.type,x=a.handlers[M];if(wD.call(a.handlers,M)&&x)return x(a,m,y);if(a.options.passThrough&&a.options.passThrough.includes(M)){if("children"in m){const{children:P,...F}=m,j=XS(F);return j.children=a.all(m),j}return XS(m)}return(a.options.unknownHandler||S7e)(a,m,y)}function h(m){const y=[];if("children"in m){const M=m.children;let x=-1;for(;++x<M.length;){const k=a.one(M[x],m);if(k){if(x&&M[x-1].type==="break"&&(!Array.isArray(k)&&k.type==="text"&&(k.value=JW(k.value)),!Array.isArray(k)&&k.type==="element")){const P=k.children[0];P&&P.type==="text"&&(P.value=JW(P.value))}Array.isArray(k)?y.push(...k):y.push(k)}}}return y}}function M7e(n,e){n.position&&(e.position=aOe(n))}function w7e(n,e){let t=e;if(n&&n.data){const i=n.data.hName,r=n.data.hChildren,o=n.data.hProperties;if(typeof i=="string")if(t.type==="element")t.tagName=i;else{const s="children"in t?t.children:[t];t={type:"element",tagName:i,properties:{},children:s}}t.type==="element"&&o&&Object.assign(t.properties,XS(o)),"children"in t&&t.children&&r!==null&&r!==void 0&&(t.children=r)}return t}function S7e(n,e){const t=e.data||{},i="value"in e&&!(wD.call(t,"hProperties")||wD.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function E7e(n,e){const t=[];let i=-1;for(e&&t.push({type:"text",value:`
`});++i<n.length;)i&&t.push({type:"text",value:`
`}),t.push(n[i]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function JW(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function eQ(n,e){const t=x7e(n,e),i=t.one(n,void 0),r=h7e(t),o=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&o.children.push({type:"text",value:`
`},r),o}function O7e(n,e){return n&&"run"in n?async function(t,i){const r=eQ(t,{file:i,...e});await n.run(r,i)}:function(t,i){return eQ(t,{file:i,...n||e})}}function tQ(n){if(n)throw n}var f8,nQ;function B7e(){if(nQ)return f8;nQ=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},o=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var m=n.call(h,"constructor"),y=h.constructor&&h.constructor.prototype&&n.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!m&&!y)return!1;var M;for(M in h);return typeof M>"u"||n.call(h,M)},s=function(h,m){t&&m.name==="__proto__"?t(h,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):h[m.name]=m.newValue},a=function(h,m){if(m==="__proto__")if(n.call(h,m)){if(i)return i(h,m).value}else return;return h[m]};return f8=function c(){var h,m,y,M,x,k,P=arguments[0],F=1,j=arguments.length,q=!1;for(typeof P=="boolean"&&(q=P,P=arguments[1]||{},F=2),(P==null||typeof P!="object"&&typeof P!="function")&&(P={});F<j;++F)if(h=arguments[F],h!=null)for(m in h)y=a(P,m),M=a(h,m),P!==M&&(q&&M&&(o(M)||(x=r(M)))?(x?(x=!1,k=y&&r(y)?y:[]):k=y&&o(y)?y:{},s(P,{name:m,newValue:c(q,k,M)})):typeof M<"u"&&s(P,{name:m,newValue:M}));return P},f8}var I7e=B7e();const p8=Xl(I7e);function SD(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function k7e(){const n=[],e={run:t,use:i};return e;function t(...r){let o=-1;const s=r.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);a(null,...r);function a(c,...h){const m=n[++o];let y=-1;if(c){s(c);return}for(;++y<r.length;)(h[y]===null||h[y]===void 0)&&(h[y]=r[y]);r=h,m?T7e(m,a)(...h):s(null,...h)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return n.push(r),e}}function T7e(n,e){let t;return i;function i(...s){const a=n.length>s.length;let c;a&&s.push(r);try{c=n.apply(this,s)}catch(h){const m=h;if(a&&t)throw m;return r(m)}a||(c&&c.then&&typeof c.then=="function"?c.then(o,r):c instanceof Error?r(c):o(c))}function r(s,...a){t||(t=!0,e(s,...a))}function o(s){r(null,s)}}const cg={basename:R7e,dirname:D7e,extname:P7e,join:U7e,sep:"/"};function R7e(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');O5(n);let t=0,i=-1,r=n.length,o;if(e===void 0||e.length===0||e.length>n.length){for(;r--;)if(n.codePointAt(r)===47){if(o){t=r+1;break}}else i<0&&(o=!0,i=r+1);return i<0?"":n.slice(t,i)}if(e===n)return"";let s=-1,a=e.length-1;for(;r--;)if(n.codePointAt(r)===47){if(o){t=r+1;break}}else s<0&&(o=!0,s=r+1),a>-1&&(n.codePointAt(r)===e.codePointAt(a--)?a<0&&(i=r):(a=-1,i=s));return t===i?i=s:i<0&&(i=n.length),n.slice(t,i)}function D7e(n){if(O5(n),n.length===0)return".";let e=-1,t=n.length,i;for(;--t;)if(n.codePointAt(t)===47){if(i){e=t;break}}else i||(i=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function P7e(n){O5(n);let e=n.length,t=-1,i=0,r=-1,o=0,s;for(;e--;){const a=n.codePointAt(e);if(a===47){if(s){i=e+1;break}continue}t<0&&(s=!0,t=e+1),a===46?r<0?r=e:o!==1&&(o=1):r>-1&&(o=-1)}return r<0||t<0||o===0||o===1&&r===t-1&&r===i+1?"":n.slice(r,t)}function U7e(...n){let e=-1,t;for(;++e<n.length;)O5(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":K7e(t)}function K7e(n){O5(n);const e=n.codePointAt(0)===47;let t=L7e(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function L7e(n,e){let t="",i=0,r=-1,o=0,s=-1,a,c;for(;++s<=n.length;){if(s<n.length)a=n.codePointAt(s);else{if(a===47)break;a=47}if(a===47){if(!(r===s-1||o===1))if(r!==s-1&&o===2){if(t.length<2||i!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(c=t.lastIndexOf("/"),c!==t.length-1){c<0?(t="",i=0):(t=t.slice(0,c),i=t.length-1-t.lastIndexOf("/")),r=s,o=0;continue}}else if(t.length>0){t="",i=0,r=s,o=0;continue}}e&&(t=t.length>0?t+"/..":"..",i=2)}else t.length>0?t+="/"+n.slice(r+1,s):t=n.slice(r+1,s),i=s-r-1;r=s,o=0}else a===46&&o>-1?o++:o=-1}return t}function O5(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const F7e={cwd:z7e};function z7e(){return"/"}function ED(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function j7e(n){if(typeof n=="string")n=new URL(n);else if(!ED(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return N7e(n)}function N7e(n){if(n.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const i=e.codePointAt(t+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const m8=["history","path","basename","stem","extname","dirname"];class Poe{constructor(e){let t;e?ED(e)?t={path:e}:typeof e=="string"||G7e(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":F7e.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<m8.length;){const o=m8[i];o in t&&t[o]!==void 0&&t[o]!==null&&(this[o]=o==="history"?[...t[o]]:t[o])}let r;for(r in t)m8.includes(r)||(this[r]=t[r])}get basename(){return typeof this.path=="string"?cg.basename(this.path):void 0}set basename(e){y8(e,"basename"),g8(e,"basename"),this.path=cg.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?cg.dirname(this.path):void 0}set dirname(e){iQ(this.basename,"dirname"),this.path=cg.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?cg.extname(this.path):void 0}set extname(e){if(g8(e,"extname"),iQ(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=cg.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){ED(e)&&(e=j7e(e)),y8(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?cg.basename(this.path,this.extname):void 0}set stem(e){y8(e,"stem"),g8(e,"stem"),this.path=cg.join(this.dirname||"",e+(this.extname||""))}fail(e,t,i){const r=this.message(e,t,i);throw r.fatal=!0,r}info(e,t,i){const r=this.message(e,t,i);return r.fatal=void 0,r}message(e,t,i){const r=new YA(e,t,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function g8(n,e){if(n&&n.includes(cg.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+cg.sep+"`")}function y8(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function iQ(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function G7e(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const W7e=(function(n){const i=this.constructor.prototype,r=i[n],o=function(){return r.apply(o,arguments)};return Object.setPrototypeOf(o,i),o}),Q7e={}.hasOwnProperty;class FK extends W7e{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=k7e()}copy(){const e=new FK;let t=-1;for(;++t<this.attachers.length;){const i=this.attachers[t];e.use(...i)}return e.data(p8(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(C8("data",this.frozen),this.namespace[e]=t,this):Q7e.call(this.namespace,e)&&this.namespace[e]||void 0:e?(C8("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=t.call(e,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=FM(e),i=this.parser||this.Parser;return v8("parse",i),i(String(t),t)}process(e,t){const i=this;return this.freeze(),v8("process",this.parser||this.Parser),b8("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(o,s){const a=FM(e),c=i.parse(a);i.run(c,a,function(m,y,M){if(m||!y||!M)return h(m);const x=y,k=i.stringify(x,M);$7e(k)?M.value=k:M.result=k,h(m,M)});function h(m,y){m||!y?s(m):o?o(y):t(void 0,y)}}}processSync(e){let t=!1,i;return this.freeze(),v8("processSync",this.parser||this.Parser),b8("processSync",this.compiler||this.Compiler),this.process(e,r),oQ("processSync","process",t),i;function r(o,s){t=!0,tQ(o),i=s}}run(e,t,i){rQ(e),this.freeze();const r=this.transformers;return!i&&typeof t=="function"&&(i=t,t=void 0),i?o(void 0,i):new Promise(o);function o(s,a){const c=FM(t);r.run(e,c,h);function h(m,y,M){const x=y||e;m?a(m):s?s(x):i(void 0,x,M)}}}runSync(e,t){let i=!1,r;return this.run(e,t,o),oQ("runSync","run",i),r;function o(s,a){tQ(s),r=a,i=!0}}stringify(e,t){this.freeze();const i=FM(t),r=this.compiler||this.Compiler;return b8("stringify",r),rQ(e),r(e,i)}use(e,...t){const i=this.attachers,r=this.namespace;if(C8("use",this.frozen),e!=null)if(typeof e=="function")c(e,t);else if(typeof e=="object")Array.isArray(e)?a(e):s(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(h){if(typeof h=="function")c(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[m,...y]=h;c(m,y)}else s(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function s(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(h.plugins),h.settings&&(r.settings=p8(!0,r.settings,h.settings))}function a(h){let m=-1;if(h!=null)if(Array.isArray(h))for(;++m<h.length;){const y=h[m];o(y)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function c(h,m){let y=-1,M=-1;for(;++y<i.length;)if(i[y][0]===h){M=y;break}if(M===-1)i.push([h,...m]);else if(m.length>0){let[x,...k]=m;const P=i[M][1];SD(P)&&SD(x)&&(x=p8(!0,P,x)),i[M]=[h,x,...k]}}}}const q7e=new FK().freeze();function v8(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function b8(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function C8(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function rQ(n){if(!SD(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function oQ(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function FM(n){return Y7e(n)?n:new Poe(n)}function Y7e(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function $7e(n){return typeof n=="string"||V7e(n)}function V7e(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const H7e="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",sQ=[],aQ={allowDangerousHtml:!0},Z7e=/^(https?|ircs?|mailto|xmpp)$/i,X7e=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function J7e(n){const e=eIe(n),t=tIe(n);return nIe(e.runSync(e.parse(t),t),n)}function eIe(n){const e=n.rehypePlugins||sQ,t=n.remarkPlugins||sQ,i=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...aQ}:aQ;return q7e().use(R8e).use(t).use(O7e,i).use(e)}function tIe(n){const e=n.children||"",t=new Poe;return typeof e=="string"&&(t.value=e),t}function nIe(n,e){const t=e.allowedElements,i=e.allowElement,r=e.components,o=e.disallowedElements,s=e.skipHtml,a=e.unwrapDisallowed,c=e.urlTransform||iIe;for(const m of X7e)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+H7e+m.id,void 0);return Doe(n,h),hOe(n,{Fragment:ie.Fragment,components:r,ignoreInvalidStyle:!0,jsx:ie.jsx,jsxs:ie.jsxs,passKeys:!0,passNode:!0});function h(m,y,M){if(m.type==="raw"&&M&&typeof y=="number")return s?M.children.splice(y,1):M.children[y]={type:"text",value:m.value},y;if(m.type==="element"){let x;for(x in A8)if(Object.hasOwn(A8,x)&&Object.hasOwn(m.properties,x)){const k=m.properties[x],P=A8[x];(P===null||P.includes(m.tagName))&&(m.properties[x]=c(String(k||""),x,m))}}if(m.type==="element"){let x=t?!t.includes(m.tagName):o?o.includes(m.tagName):!1;if(!x&&i&&typeof y=="number"&&(x=!i(m,y,M)),x&&M&&typeof y=="number")return a&&m.children?M.children.splice(y,1,...m.children):M.children.splice(y,1),y}}}function iIe(n){const e=n.indexOf(":"),t=n.indexOf("?"),i=n.indexOf("#"),r=n.indexOf("/");return e===-1||r!==-1&&e>r||t!==-1&&e>t||i!==-1&&e>i||Z7e.test(n.slice(0,e))?n:""}function uo(){var n="/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",e="a7edc49bc306eb20f0cc16abd4c84f78b7cc6807",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",statementMap:{0:{start:{line:4,column:16},end:{line:8,column:1}},1:{start:{line:11,column:26},end:{line:11,column:36}},2:{start:{line:12,column:52},end:{line:12,column:61}},3:{start:{line:13,column:23},end:{line:13,column:47}},4:{start:{line:14,column:25},end:{line:16,column:26}},5:{start:{line:17,column:28},end:{line:23,column:5}},6:{start:{line:18,column:27},end:{line:18,column:46}},7:{start:{line:19,column:6},end:{line:21,column:7}},8:{start:{line:20,column:8},end:{line:20,column:148}},9:{start:{line:22,column:6},end:{line:22,column:19}},10:{start:{line:24,column:4},end:{line:57,column:9}},11:{start:{line:27,column:76},end:{line:27,column:132}},12:{start:{line:30,column:10},end:{line:33,column:20}},13:{start:{line:40,column:12},end:{line:40,column:75}},14:{start:{line:44,column:10},end:{line:53,column:20}},15:{start:{line:47,column:14},end:{line:51,column:15}},16:{start:{line:48,column:16},end:{line:48,column:98}},17:{start:{line:50,column:16},end:{line:50,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:58,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:17,column:28},end:{line:17,column:29}},loc:{start:{line:17,column:39},end:{line:23,column:5}},line:17},2:{name:"(anonymous_2)",decl:{start:{line:27,column:13},end:{line:27,column:14}},loc:{start:{line:27,column:76},end:{line:27,column:132}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:29,column:119},end:{line:29,column:120}},loc:{start:{line:29,column:137},end:{line:34,column:9}},line:29},4:{name:"(anonymous_4)",decl:{start:{line:39,column:37},end:{line:39,column:38}},loc:{start:{line:39,column:49},end:{line:41,column:11}},line:39},5:{name:"(anonymous_5)",decl:{start:{line:43,column:80},end:{line:43,column:81}},loc:{start:{line:43,column:103},end:{line:54,column:9}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:46,column:37},end:{line:46,column:38}},loc:{start:{line:46,column:44},end:{line:52,column:13}},line:46}},branchMap:{0:{loc:{start:{line:14,column:25},end:{line:16,column:26}},type:"binary-expr",locations:[{start:{line:14,column:25},end:{line:14,column:33}},{start:{line:16,column:4},end:{line:16,column:26}}],line:14},1:{loc:{start:{line:19,column:6},end:{line:21,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:21,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:25,column:6},end:{line:35,column:10}},type:"binary-expr",locations:[{start:{line:25,column:6},end:{line:25,column:9}},{start:{line:25,column:29},end:{line:35,column:10}}],line:25},3:{loc:{start:{line:29,column:8},end:{line:34,column:13}},type:"binary-expr",locations:[{start:{line:29,column:8},end:{line:29,column:20}},{start:{line:29,column:40},end:{line:34,column:13}}],line:29},4:{loc:{start:{line:36,column:6},end:{line:55,column:13}},type:"binary-expr",locations:[{start:{line:36,column:6},end:{line:36,column:16}},{start:{line:36,column:36},end:{line:55,column:13}}],line:36},5:{loc:{start:{line:47,column:14},end:{line:51,column:15}},type:"if",locations:[{start:{line:47,column:14},end:{line:51,column:15}},{start:{line:49,column:21},end:{line:51,column:15}}],line:47},6:{loc:{start:{line:56,column:6},end:{line:56,column:215}},type:"binary-expr",locations:[{start:{line:56,column:6},end:{line:56,column:12}},{start:{line:56,column:16},end:{line:56,column:30}},{start:{line:56,column:50},end:{line:56,column:215}}],line:56}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Doc.tsx"],names:[],mappings:"AA0Ce,SAMT,UANS,KAkBK,YAlBL;AA1Cf,OAAO,WAAW;AAClB,OAAO,cAAc;AAErB,MAAM,UAAU;AAAA,EACd,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,KAAK;AACP;AAkBA,qBAAqB,YAAY,MAAM,UAAoB;AAAA,EACzD,SAAU;AACR,UAAM,EAAC,UAAS,IAAI,KAAK;AAEzB,UAAM,EAAC,KAAK,QAAQ,QAAQ,eAAc,IAAI;AAC9C,UAAM,aAAa,UAAU,aAAa;AAE1C,UAAM,eACJ,CAAC,CAAC;AAAA;AAAA,IAGF,CAAC,MAAM,QAAQ,MAAM;AAGvB,UAAM,kBAAkB,CAAC,UAAkB;AACzC,YAAM,eAAe,MAAM,YAAY;AACvC,UAAI,aAAa,WAAW,UAAU,GAAG;AACvC,eAAO,oBAAC,OAAE,MAAM,cAAc,QAAO,UAAS,KAAI,cAAc,gBAAM,aAAa,MAAM,GAAG,EAAE,IAAI,GAAE;AAAA,MACtG;AACA,aAAO;AAAA,IACT;AAEA,WACE,iCACG;AAAA,aACC,qBAAC,SAAI,WAAU,WACb;AAAA,4BAAC,SAAI,WAAU,gBAAe,eAAY,kBACxC,8BAAC,YAAS,YAAY;AAAA,UACpB,GAAG,CAAC,EAAC,MAAM,OAAO,MAAM,UAAU,GAAG,MAAK,MAAM,oBAAC,OAAE,MAAY,QAAO,UAAU,GAAG,OAAQ,UAAS;AAAA,QACtG,GAAI,eAAI,GACV;AAAA,QACC,gBACC,oBAAC,QAAG,WAAU,mBACX,iBAAO,QAAQ,MAAM,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM;AAC5C,iBACE,qBAAC,QACC;AAAA,gCAAC,UAAM,eAAK,UAAU,GAAG,GAAE;AAAA,YAC3B,oBAAC,SAAK,gBAAM,KAAI;AAAA,eAFT,GAGT;AAAA,QAEJ,CAAC,GACH;AAAA,SAEJ;AAAA,MAED,cACC,oBAAC,SAAI,WAAU,wBACb,+BAAC,WAAM,WAAU,+BACf;AAAA,4BAAC,WACC,+BAAC,QACC;AAAA,8BAAC,QAAG;AAAA,UACH,OAAO,OAAO,OAAO,EAAE,IAAI,YAAU;AACpC,mBAAO,oBAAC,QAAiB,oBAAT,MAAgB;AAAA,UAClC,CAAC;AAAA,WACH,GACF;AAAA,QACA,oBAAC,WACE,iBAAO,QAAQ,UAAU,EAAE,IAAI,CAAC,CAAC,KAAK,UAAU,MAAM;AACrD,iBACE,qBAAC,QACC;AAAA,gCAAC,QAAI,eAAI;AAAA,YACR,OAAO,KAAK,OAAO,EAAE,IAAI,CAAC,MAAM;AAC/B,kBAAI,OAAO,UAAU,eAAe,KAAK,YAAY,CAAC,GAAG;AACvD,uBAAO,oBAAC,QAAY,0BAAgB,WAAW,CAAyB,CAAC,KAAzD,CAA2D;AAAA,cAC7E,OACK;AACH,uBAAO,oBAAC,QAAW,kBAAH,CAAK;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,eATM,GAUT;AAAA,QAEJ,CAAC,GACH;AAAA,SACF,GACF;AAAA,MAED,UAAU,kBACT,oBAAC,SAAI,WAAU,uBACb,8BAAC,OAAE,MAAM,QAAS,QAAO,UAAS,KAAI,cAAc,0BAAe,GACrE;AAAA,OAEJ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a7edc49bc306eb20f0cc16abd4c84f78b7cc6807"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return uo=function(){return s},s}uo();const lQ=(uo().s[0]++,{js:"JS",android:"Android",ios:"iOS"});class E6 extends On.Component{render(){uo().f[0]++;const{fieldSpec:e}=(uo().s[1]++,this.props),{doc:t,values:i,docUrl:r,docUrlLinkText:o}=(uo().s[2]++,e),s=(uo().s[3]++,e["sdk-support"]),a=(uo().s[4]++,uo().b[0][0]++,!!i&&(uo().b[0][1]++,!Array.isArray(i)));uo().s[5]++;const c=h=>{uo().f[1]++;const m=(uo().s[6]++,h.toLowerCase());return uo().s[7]++,m.startsWith("https://")?(uo().b[1][0]++,uo().s[8]++,ie.jsx("a",{href:m,target:"_blank",rel:"noreferrer",children:"#"+m.split("/").pop()})):(uo().b[1][1]++,uo().s[9]++,h)};return uo().s[10]++,ie.jsxs(ie.Fragment,{children:[(uo().b[2][0]++,t&&(uo().b[2][1]++,ie.jsxs("div",{className:"SpecDoc",children:[ie.jsx("div",{className:"SpecDoc__doc","data-wd-key":"spec-field-doc",children:ie.jsx(J7e,{components:{a:({node:h,href:m,children:y,...M})=>(uo().f[2]++,uo().s[11]++,ie.jsx("a",{href:m,target:"_blank",...M,children:y}))},children:t})}),(uo().b[3][0]++,a&&(uo().b[3][1]++,ie.jsx("ul",{className:"SpecDoc__values",children:Object.entries(i).map(([h,m])=>(uo().f[3]++,uo().s[12]++,ie.jsxs("li",{children:[ie.jsx("code",{children:JSON.stringify(h)}),ie.jsx("div",{children:m.doc})]},h)))})))]}))),(uo().b[4][0]++,s&&(uo().b[4][1]++,ie.jsx("div",{className:"SpecDoc__sdk-support",children:ie.jsxs("table",{className:"SpecDoc__sdk-support__table",children:[ie.jsx("thead",{children:ie.jsxs("tr",{children:[ie.jsx("th",{}),Object.values(lQ).map(h=>(uo().f[4]++,uo().s[13]++,ie.jsx("th",{children:h},h)))]})}),ie.jsx("tbody",{children:Object.entries(s).map(([h,m])=>(uo().f[5]++,uo().s[14]++,ie.jsxs("tr",{children:[ie.jsx("td",{children:h}),Object.keys(lQ).map(y=>(uo().f[6]++,uo().s[15]++,Object.prototype.hasOwnProperty.call(m,y)?(uo().b[5][0]++,uo().s[16]++,ie.jsx("td",{children:c(m[y])},y)):(uo().b[5][1]++,uo().s[17]++,ie.jsx("td",{children:"no"},y))))]},h)))})]})}))),(uo().b[6][0]++,r&&(uo().b[6][1]++,o)&&(uo().b[6][2]++,ie.jsx("div",{className:"SpecDoc__learn-more",children:ie.jsx("a",{href:r,target:"_blank",rel:"noreferrer",children:o})})))]})}}function Xr(){var n="/home/runner/work/maputnik/maputnik/src/components/Block.tsx",e="a026f5c10cd11169be04acaaf924d5e996792a37",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Block.tsx",statementMap:{0:{start:{line:7,column:13},end:{line:7,column:17}},1:{start:{line:9,column:4},end:{line:9,column:17}},2:{start:{line:10,column:4},end:{line:12,column:6}},3:{start:{line:15,column:18},end:{line:15,column:32}},4:{start:{line:16,column:4},end:{line:18,column:5}},5:{start:{line:17,column:6},end:{line:17,column:64}},6:{start:{line:20,column:16},end:{line:24,column:3}},7:{start:{line:21,column:4},end:{line:23,column:7}},8:{start:{line:31,column:17},end:{line:40,column:3}},9:{start:{line:32,column:15},end:{line:32,column:39}},10:{start:{line:33,column:21},end:{line:33,column:48}},11:{start:{line:34,column:4},end:{line:36,column:5}},12:{start:{line:35,column:6},end:{line:35,column:30}},13:{start:{line:37,column:4},end:{line:39,column:5}},14:{start:{line:38,column:6},end:{line:38,column:29}},15:{start:{line:42,column:4},end:{line:78,column:6}},16:{start:{line:66,column:12},end:{line:66,column:31}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:13,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:14},end:{line:19,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:20,column:16},end:{line:20,column:17}},loc:{start:{line:20,column:25},end:{line:24,column:3}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:31,column:17},end:{line:31,column:18}},loc:{start:{line:31,column:28},end:{line:40,column:3}},line:31},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:79,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:65,column:87},end:{line:65,column:88}},loc:{start:{line:65,column:95},end:{line:67,column:11}},line:65}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:17,column:33},end:{line:17,column:62}},type:"cond-expr",locations:[{start:{line:17,column:48},end:{line:17,column:54}},{start:{line:17,column:57},end:{line:17,column:62}}],line:17},2:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},3:{loc:{start:{line:34,column:8},end:{line:34,column:66}},type:"binary-expr",locations:[{start:{line:34,column:8},end:{line:34,column:53}},{start:{line:34,column:57},end:{line:34,column:66}}],line:34},4:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:55,column:10},end:{line:62,column:14}},type:"binary-expr",locations:[{start:{line:55,column:10},end:{line:55,column:30}},{start:{line:55,column:50},end:{line:62,column:14}}],line:55},6:{loc:{start:{line:63,column:10},end:{line:63,column:134}},type:"binary-expr",locations:[{start:{line:63,column:10},end:{line:63,column:31}},{start:{line:63,column:51},end:{line:63,column:134}}],line:63},7:{loc:{start:{line:68,column:10},end:{line:75,column:11}},type:"binary-expr",locations:[{start:{line:68,column:10},end:{line:68,column:30}},{start:{line:68,column:50},end:{line:75,column:11}}],line:68},8:{loc:{start:{line:72,column:32},end:{line:72,column:64}},type:"cond-expr",locations:[{start:{line:72,column:53},end:{line:72,column:55}},{start:{line:72,column:58},end:{line:72,column:64}}],line:72}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Block.tsx"],names:[],mappings:"AA+DW,SAYD,KAZC;AA/DX,OAAO,WAA8E;AACrF,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAkBhB,qBAAqB,cAAc,MAAM,UAAkC;AAAA,EACzE,WAAkC;AAAA,EAElC,YAAa,OAAmB;AAC9B,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS,GAAwE;AAC/E,UAAM,QAAQ,EAAE,OAAO;AACvB,QAAI,KAAK,MAAM,UAAU;AACvB,aAAO,KAAK,MAAM,SAAS,UAAU,KAAK,SAAY,KAAK;AAAA,IAC7D;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,eAAe,CAAC,UAAoC;AAClD,UAAM,KAAK,MAAM,YAAY;AAC7B,UAAM,WAAW,KAAK,UAAU,SAAS,EAAE;AAE3C,QAAI,MAAM,YAAY,OAAO,aAAa,WAAW,CAAC,UAAU;AAC9D,YAAM,gBAAgB;AAAA,IACxB;AACA,QAAI,MAAM,YAAY,OAAO,aAAa,KAAK;AAC7C,YAAM,eAAe;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,KAAK,MAAM;AAAA,QAC9B,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,WAAW,WAAW;AAAA,UACpB,wBAAwB;AAAA,UACxB,8BAA8B,KAAK,MAAM;AAAA,UACzC,yBAAyB,KAAK,MAAM;AAAA,UACpC,+BAA+B,KAAK,MAAM;AAAA,QAC5C,CAAC;AAAA,QACD,SAAS,KAAK;AAAA,QAEb;AAAA,eAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,aAAa,KAAK;AAAA,cAClB,WAAW,KAAK,MAAM;AAAA;AAAA,UACxB,GACF;AAAA,UAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,UAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,UACA,oBAAC,SAAI,WAAU,gCAA+B,KAAK,QAAM;AAAC,iBAAK,WAAW;AAAA,UAAG,GAC1E,eAAK,MAAM,UACd;AAAA,UACC,KAAK,MAAM,aACV;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,cAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,UACxC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a026f5c10cd11169be04acaaf924d5e996792a37"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Xr=function(){return s},s}Xr();class Gs extends On.Component{_blockEl=(Xr().s[0]++,null);constructor(e){Xr().f[0]++,Xr().s[1]++,super(e),Xr().s[2]++,this.state={showDoc:!1}}onChange(e){Xr().f[1]++;const t=(Xr().s[3]++,e.target.value);if(Xr().s[4]++,this.props.onChange)return Xr().b[0][0]++,Xr().s[5]++,this.props.onChange(t===""?(Xr().b[1][0]++,void 0):(Xr().b[1][1]++,t));Xr().b[0][1]++}onToggleDoc=(Xr().s[6]++,e=>{Xr().f[2]++,Xr().s[7]++,this.setState({showDoc:e})});onLabelClick=(Xr().s[8]++,e=>{Xr().f[3]++;const t=(Xr().s[9]++,e.nativeEvent.target),i=(Xr().s[10]++,this._blockEl?.contains(t));Xr().s[11]++,Xr().b[3][0]++,e.nativeEvent.target.nodeName!=="INPUT"&&(Xr().b[3][1]++,!i)?(Xr().b[2][0]++,Xr().s[12]++,e.stopPropagation()):Xr().b[2][1]++,Xr().s[13]++,e.nativeEvent.target.nodeName!=="A"?(Xr().b[4][0]++,Xr().s[14]++,e.preventDefault()):Xr().b[4][1]++});render(){return Xr().f[4]++,Xr().s[15]++,ie.jsxs("label",{style:this.props.style,"data-wd-key":this.props["data-wd-key"],className:Yg({"maputnik-input-block":!0,"maputnik-input-block--wide":this.props.wideMode,"maputnik-action-block":this.props.action,"maputnik-input-block--error":this.props.error}),onClick:this.onLabelClick,children:[(Xr().b[5][0]++,this.props.fieldSpec&&(Xr().b[5][1]++,ie.jsx("div",{className:"maputnik-input-block-label",children:ie.jsx(wK,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(Xr().b[6][0]++,!this.props.fieldSpec&&(Xr().b[6][1]++,ie.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),ie.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),ie.jsx("div",{className:"maputnik-input-block-content",ref:e=>{Xr().f[5]++,Xr().s[16]++,this._blockEl=e},children:this.props.children}),(Xr().b[7][0]++,this.props.fieldSpec&&(Xr().b[7][1]++,ie.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Xr().b[8][0]++,""):(Xr().b[8][1]++,"none")},children:ie.jsx(E6,{fieldSpec:this.props.fieldSpec})})))]})}}function cA(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",e="1b99a181d4a9dd7b629113889cbb71c3a4bb4d42",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:36}},1:{start:{line:6,column:4},end:{line:8,column:5}},2:{start:{line:7,column:6},end:{line:7,column:43}},3:{start:{line:7,column:35},end:{line:7,column:41}},4:{start:{line:9,column:4},end:{line:21,column:6}},5:{start:{line:17,column:25},end:{line:17,column:60}},6:{start:{line:19,column:64},end:{line:19,column:115}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:22,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:28},end:{line:7,column:29}},loc:{start:{line:7,column:35},end:{line:7,column:41}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:25},end:{line:17,column:60}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:64},end:{line:19,column:115}},line:19}},branchMap:{0:{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},1:{loc:{start:{line:6,column:8},end:{line:6,column:56}},type:"binary-expr",locations:[{start:{line:6,column:8},end:{line:6,column:26}},{start:{line:6,column:30},end:{line:6,column:56}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx"],names:[],mappings:"AA4BsC;AA5BtC,OAAO,WAAW;AAYlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA,IACrC;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,OAAK,KAAK,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,QACjD,cAAY,KAAK,MAAM,YAAY;AAAA,QAEjC,kBAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,oBAAC,YAAiB,OAAO,KAAM,mBAAlB,GAAwB,CAAS;AAAA;AAAA,IAChF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1b99a181d4a9dd7b629113889cbb71c3a4bb4d42"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return cA=function(){return s},s}cA();class nC extends On.Component{render(){cA().f[0]++;let e=(cA().s[0]++,this.props.options);return cA().s[1]++,cA().b[1][0]++,e.length>0&&(cA().b[1][1]++,!Array.isArray(e[0]))?(cA().b[0][0]++,cA().s[2]++,e=e.map(t=>(cA().f[1]++,cA().s[3]++,[t,t]))):cA().b[0][1]++,cA().s[4]++,ie.jsx("select",{className:"maputnik-select","data-wd-key":this.props["data-wd-key"],style:this.props.style,title:this.props.title,value:this.props.value,onChange:t=>(cA().f[2]++,cA().s[5]++,this.props.onChange(t.target.value)),"aria-label":this.props["aria-label"],children:e.map(([t,i])=>(cA().f[3]++,cA().s[6]++,ie.jsx("option",{value:t,children:i},t)))})}}function rr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",e="ffe977722e3215b5f6718c464b93680839810a41",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",statementMap:{0:{start:{line:3,column:24},end:{line:6,column:3}},1:{start:{line:8,column:4},end:{line:8,column:17}},2:{start:{line:9,column:4},end:{line:12,column:6}},3:{start:{line:15,column:4},end:{line:19,column:5}},4:{start:{line:16,column:6},end:{line:18,column:8}},5:{start:{line:20,column:4},end:{line:20,column:14}},6:{start:{line:25,column:4},end:{line:36,column:5}},7:{start:{line:26,column:6},end:{line:26,column:23}},8:{start:{line:27,column:6},end:{line:30,column:8}},9:{start:{line:32,column:6},end:{line:32,column:20}},10:{start:{line:33,column:6},end:{line:35,column:8}},11:{start:{line:37,column:4},end:{line:39,column:5}},12:{start:{line:38,column:6},end:{line:38,column:48}},13:{start:{line:40,column:4},end:{line:70,column:7}},14:{start:{line:51,column:8},end:{line:56,column:11}},15:{start:{line:55,column:10},end:{line:55,column:71}},16:{start:{line:55,column:34},end:{line:55,column:71}},17:{start:{line:59,column:8},end:{line:62,column:9}},18:{start:{line:60,column:10},end:{line:60,column:44}},19:{start:{line:61,column:10},end:{line:61,column:73}},20:{start:{line:61,column:35},end:{line:61,column:73}},21:{start:{line:65,column:8},end:{line:67,column:9}},22:{start:{line:66,column:10},end:{line:66,column:48}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:13},end:{line:4,column:14}},loc:{start:{line:4,column:19},end:{line:5,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:13,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:48},end:{line:21,column:3}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:71,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:50,column:16},end:{line:50,column:17}},loc:{start:{line:50,column:23},end:{line:57,column:7}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:54,column:11},end:{line:54,column:12}},loc:{start:{line:54,column:17},end:{line:56,column:9}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:63,column:7}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:64,column:17},end:{line:64,column:18}},loc:{start:{line:64,column:24},end:{line:68,column:7}},line:64}},branchMap:{0:{loc:{start:{line:11,column:13},end:{line:11,column:30}},type:"binary-expr",locations:[{start:{line:11,column:13},end:{line:11,column:24}},{start:{line:11,column:28},end:{line:11,column:30}}],line:11},1:{loc:{start:{line:15,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:19,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:25,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:36,column:5}},{start:{line:31,column:11},end:{line:36,column:5}}],line:25},3:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},4:{loc:{start:{line:43,column:18},end:{line:43,column:125}},type:"cond-expr",locations:[{start:{line:43,column:83},end:{line:43,column:104}},{start:{line:43,column:107},end:{line:43,column:125}}],line:43},5:{loc:{start:{line:47,column:13},end:{line:47,column:64}},type:"cond-expr",locations:[{start:{line:47,column:43},end:{line:47,column:45}},{start:{line:47,column:48},end:{line:47,column:64}}],line:47},6:{loc:{start:{line:55,column:10},end:{line:55,column:71}},type:"if",locations:[{start:{line:55,column:10},end:{line:55,column:71}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},7:{loc:{start:{line:59,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:59,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59},8:{loc:{start:{line:61,column:10},end:{line:61,column:73}},type:"if",locations:[{start:{line:61,column:10},end:{line:61,column:73}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},9:{loc:{start:{line:65,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:65,column:8},end:{line:67,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},10:{loc:{start:{line:65,column:12},end:{line:65,column:51}},type:"binary-expr",locations:[{start:{line:65,column:12},end:{line:65,column:28}},{start:{line:65,column:32},end:{line:65,column:51}}],line:65}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputString.tsx"],names:[],mappings:"AAAA,OAAO,WAAW;AAsBlB,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,OAAO,MAAM,SAAS;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,SAAS;AAClB,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,MACf;AAAA,IACF;AACA,WAAO,CAAC;AAAA,EACV;AAAA,EAEA,SAAS;AACP,QAAI;AACJ,QAAI;AAEJ,QAAG,KAAK,MAAM,OAAO;AACnB,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,QACA;AAAA,MACF;AAAA,IACF,OACK;AACH,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,QAAG,KAAK,MAAM,UAAU;AACtB,cAAQ,KAAK,2BAA2B;AAAA,IAC1C;AAEA,WAAO,MAAM,cAAc,KAAK;AAAA,MAC9B,cAAc,KAAK,MAAM,YAAY;AAAA,MACrC,eAAe,KAAK,MAAM,aAAa;AAAA,MACvC,YAAY,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,YAAY,IAAI,KAAK,MAAM,aAAa,EAAE,QAAQ;AAAA,MAC/G,UAAU,KAAK,MAAM;AAAA,MACrB,WAAW,QAAQ,KAAK,GAAG;AAAA,MAC3B,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM,UAAU,SAAY,KAAK,KAAK,MAAM;AAAA,MACxD,aAAa,KAAK,MAAM;AAAA,MACxB,OAAO,KAAK,MAAM;AAAA,MAClB,UAAU,CAAC,MAA2E;AACpF,aAAK,SAAS;AAAA,UACZ,SAAS;AAAA,UACT,OAAO,EAAE,OAAO;AAAA,QAClB,GAAG,MAAM;AACP,cAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,KAAK,MAAM,KAAK;AAAA,QAC7D,CAAC;AAAA,MACH;AAAA,MACA,QAAQ,MAAM;AACZ,YAAG,KAAK,MAAM,UAAQ,KAAK,MAAM,OAAO;AACtC,eAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,cAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QAC/D;AAAA,MACF;AAAA,MACA,WAAW,CAAC,MAAM;AAChB,YAAI,EAAE,YAAY,MAAM,KAAK,MAAM,UAAU;AAC3C,eAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QACtC;AAAA,MACF;AAAA,MACA,UAAU,KAAK,MAAM;AAAA,IACvB,CAAC;AAAA,EACH;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ffe977722e3215b5f6718c464b93680839810a41"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return rr=function(){return s},s}rr();class um extends On.Component{static defaultProps=(rr().s[0]++,{onInput:()=>{rr().f[0]++}});constructor(e){rr().f[1]++,rr().s[1]++,super(e),rr().s[2]++,this.state={editing:!1,value:(rr().b[0][0]++,e.value||(rr().b[0][1]++,""))}}static getDerivedStateFromProps(e,t){if(rr().f[2]++,rr().s[3]++,t.editing)rr().b[1][1]++;else return rr().b[1][0]++,rr().s[4]++,{value:e.value};return rr().s[5]++,{}}render(){rr().f[3]++;let e,t;return rr().s[6]++,this.props.multi?(rr().b[2][0]++,rr().s[7]++,e="textarea",rr().s[8]++,t=["maputnik-string","maputnik-string--multi"]):(rr().b[2][1]++,rr().s[9]++,e="input",rr().s[10]++,t=["maputnik-string"]),rr().s[11]++,this.props.disabled?(rr().b[3][0]++,rr().s[12]++,t.push("maputnik-string--disabled")):rr().b[3][1]++,rr().s[13]++,On.createElement(e,{"aria-label":this.props["aria-label"],"data-wd-key":this.props["data-wd-key"],spellCheck:Object.prototype.hasOwnProperty.call(this.props,"spellCheck")?(rr().b[4][0]++,this.props.spellCheck):(rr().b[4][1]++,e!=="input"),disabled:this.props.disabled,className:t.join(" "),style:this.props.style,value:this.state.value===void 0?(rr().b[5][0]++,""):(rr().b[5][1]++,this.state.value),placeholder:this.props.default,title:this.props.title,onChange:i=>{rr().f[4]++,rr().s[14]++,this.setState({editing:!0,value:i.target.value},()=>{rr().f[5]++,rr().s[15]++,this.props.onInput?(rr().b[6][0]++,rr().s[16]++,this.props.onInput(this.state.value)):rr().b[6][1]++})},onBlur:()=>{rr().f[6]++,rr().s[17]++,this.state.value!==this.props.value?(rr().b[7][0]++,rr().s[18]++,this.setState({editing:!1}),rr().s[19]++,this.props.onChange?(rr().b[8][0]++,rr().s[20]++,this.props.onChange(this.state.value)):rr().b[8][1]++):rr().b[7][1]++},onKeyDown:i=>{rr().f[7]++,rr().s[21]++,rr().b[10][0]++,i.keyCode===13&&(rr().b[10][1]++,this.props.onChange)?(rr().b[9][0]++,rr().s[22]++,this.props.onChange(this.state.value)):rr().b[9][1]++},required:this.props.required})}}function zA(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",e="599a12b14a1057b6bb554b629d0d81238d4af16c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",statementMap:{0:{start:{line:8,column:26},end:{line:38,column:1}},1:{start:{line:16,column:22},end:{line:16,column:110}},2:{start:{line:16,column:73},end:{line:16,column:109}},3:{start:{line:17,column:2},end:{line:37,column:4}},4:{start:{line:39,column:18},end:{line:39,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:26},end:{line:8,column:27}},loc:{start:{line:15,column:6},end:{line:38,column:1}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:16,column:66},end:{line:16,column:67}},loc:{start:{line:16,column:73},end:{line:16,column:109}},line:16}},branchMap:{0:{loc:{start:{line:14,column:2},end:{line:14,column:18}},type:"default-arg",locations:[{start:{line:14,column:13},end:{line:14,column:18}}],line:14},1:{loc:{start:{line:16,column:34},end:{line:16,column:60}},type:"binary-expr",locations:[{start:{line:16,column:34},end:{line:16,column:54}},{start:{line:16,column:58},end:{line:16,column:60}}],line:16},2:{loc:{start:{line:25,column:8},end:{line:25,column:79}},type:"binary-expr",locations:[{start:{line:25,column:8},end:{line:25,column:16}},{start:{line:25,column:36},end:{line:25,column:79}}],line:25},3:{loc:{start:{line:26,column:8},end:{line:34,column:9}},type:"binary-expr",locations:[{start:{line:26,column:8},end:{line:26,column:17}},{start:{line:26,column:37},end:{line:34,column:9}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx"],names:[],mappings:"AA0BI,SAKI,KALJ;AAzBJ,SAAQ,UAAS;AACjB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AACtD,SAAS,iBAAiB;AAU1B,MAAM,oBAAsD,CAAC;AAAA,EAC3D;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,WAAW;AACb,MAAM;AACJ,QAAM,cAAkC,OAAO,KAAK,GAAG,MAAM,KAAK,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,UAAU,EAAE,QAAQ,MAAM,GAAG,CAAC,CAAC,CAAC;AAC7H,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,MAAM;AAAA,MAAG,WAAW,GAAG,MAAM;AAAA,MAC3C,eAAa;AAAA,MACb;AAAA,MAEC;AAAA,oBACC,oBAAC,eAAY,OAAc,UAAU,MAAM;AAAA,QAE5C,CAAC,YACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS;AAAA,YACT;AAAA,YACA;AAAA,YACA,eAAa,QAAQ;AAAA;AAAA,QACvB;AAAA;AAAA;AAAA,EAEJ;AAEJ;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"599a12b14a1057b6bb554b629d0d81238d4af16c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return zA=function(){return s},s}zA();zA().s[0]++;const rIe=({t:n,value:e,wdKey:t,onChange:i,error:r,disabled:o=(zA().b[0][0]++,!1)})=>{zA().f[0]++;const s=(zA().s[1]++,Object.keys((zA().b[1][0]++,rp.layer.type.values||(zA().b[1][1]++,{}))).map(a=>(zA().f[1]++,zA().s[2]++,[a,W4.startCase(a.replace(/-/g," "))])));return zA().s[3]++,ie.jsxs(Gs,{label:n("Type"),fieldSpec:rp.layer.type,"data-wd-key":t,error:r,children:[(zA().b[2][0]++,o&&(zA().b[2][1]++,ie.jsx(um,{value:e,disabled:!0}))),(zA().b[3][0]++,!o&&(zA().b[3][1]++,ie.jsx(nC,{options:s,onChange:i,value:e,"data-wd-key":t+".select"})))]})},Uoe=(zA().s[4]++,$o()(rIe));function B4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",e="faa51332e301a2db02ecf3d9679788ae744c6d26",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",statementMap:{0:{start:{line:5,column:16},end:{line:23,column:1}},1:{start:{line:6,column:2},end:{line:22,column:4}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:16},end:{line:5,column:17}},loc:{start:{line:5,column:27},end:{line:23,column:1}},line:5}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx"],names:[],mappings:"AAkBM;AAjBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AASxB,MAAM,UAAkC,CAAC,UAAU;AACjD,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAM;AAAA,MAAK,WAAW,OAAO,MAAM;AAAA,MACxC,eAAa,MAAM;AAAA,MACnB,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,MAAM;AAAA,UACb,SAAS,MAAM;AAAA,UACf,eAAa,MAAM,QAAQ;AAAA;AAAA,MAC7B;AAAA;AAAA,EACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"faa51332e301a2db02ecf3d9679788ae744c6d26"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return B4=function(){return s},s}B4();B4().s[0]++;const Koe=n=>(B4().f[0]++,B4().s[1]++,ie.jsx(Gs,{label:"ID",fieldSpec:Jr.layer.id,"data-wd-key":n.wdKey,error:n.error,children:ie.jsx(um,{value:n.value,onInput:n.onChange,"data-wd-key":n.wdKey+".input"})}));function zM(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function Tl(){return Tl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Tl.apply(null,arguments)}var oIe=b1();const dr=Xl(oIe);var _8={exports:{}},Hs={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uQ;function sIe(){if(uQ)return Hs;uQ=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),k;k=Symbol.for("react.module.reference");function P(F){if(typeof F=="object"&&F!==null){var j=F.$$typeof;switch(j){case n:switch(F=F.type,F){case t:case r:case i:case h:case m:return F;default:switch(F=F&&F.$$typeof,F){case a:case s:case c:case M:case y:case o:return F;default:return j}}case e:return j}}}return Hs.ContextConsumer=s,Hs.ContextProvider=o,Hs.Element=n,Hs.ForwardRef=c,Hs.Fragment=t,Hs.Lazy=M,Hs.Memo=y,Hs.Portal=e,Hs.Profiler=r,Hs.StrictMode=i,Hs.Suspense=h,Hs.SuspenseList=m,Hs.isAsyncMode=function(){return!1},Hs.isConcurrentMode=function(){return!1},Hs.isContextConsumer=function(F){return P(F)===s},Hs.isContextProvider=function(F){return P(F)===o},Hs.isElement=function(F){return typeof F=="object"&&F!==null&&F.$$typeof===n},Hs.isForwardRef=function(F){return P(F)===c},Hs.isFragment=function(F){return P(F)===t},Hs.isLazy=function(F){return P(F)===M},Hs.isMemo=function(F){return P(F)===y},Hs.isPortal=function(F){return P(F)===e},Hs.isProfiler=function(F){return P(F)===r},Hs.isStrictMode=function(F){return P(F)===i},Hs.isSuspense=function(F){return P(F)===h},Hs.isSuspenseList=function(F){return P(F)===m},Hs.isValidElementType=function(F){return typeof F=="string"||typeof F=="function"||F===t||F===r||F===i||F===h||F===m||F===x||typeof F=="object"&&F!==null&&(F.$$typeof===M||F.$$typeof===y||F.$$typeof===o||F.$$typeof===s||F.$$typeof===c||F.$$typeof===k||F.getModuleId!==void 0)},Hs.typeOf=P,Hs}var cQ;function aIe(){return cQ||(cQ=1,_8.exports=sIe()),_8.exports}aIe();const AQ=n=>typeof n=="object"&&n!=null&&n.nodeType===1,hQ=(n,e)=>(!e||n!=="hidden")&&n!=="visible"&&n!=="clip",jM=(n,e)=>{if(n.clientHeight<n.scrollHeight||n.clientWidth<n.scrollWidth){const t=getComputedStyle(n,null);return hQ(t.overflowY,e)||hQ(t.overflowX,e)||(i=>{const r=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(i);return!!r&&(r.clientHeight<i.scrollHeight||r.clientWidth<i.scrollWidth)})(n)}return!1},NM=(n,e,t,i,r,o,s,a)=>o<n&&s>e||o>n&&s<e?0:o<=n&&a<=t||s>=e&&a>=t?o-n-i:s>e&&a<t||o<n&&a>t?s-e+r:0,lIe=n=>{const e=n.parentElement;return e??(n.getRootNode().host||null)},uIe=(n,e)=>{var t,i,r,o;if(typeof document>"u")return[];const{inline:s,boundary:a,skipOverflowHiddenElements:c}=e,h=typeof a=="function"?a:Ee=>Ee!==a;if(!AQ(n))throw new TypeError("Invalid target");const m=document.scrollingElement||document.documentElement,y=[];let M=n;for(;AQ(M)&&h(M);){if(M=lIe(M),M===m){y.push(M);break}M!=null&&M===document.body&&jM(M)&&!jM(document.documentElement)||M!=null&&jM(M,c)&&y.push(M)}const x=(i=(t=window.visualViewport)==null?void 0:t.width)!=null?i:innerWidth,k=(o=(r=window.visualViewport)==null?void 0:r.height)!=null?o:innerHeight,{scrollX:P,scrollY:F}=window,{height:j,width:q,top:V,right:H,bottom:G,left:Y}=n.getBoundingClientRect(),{top:z,right:se,left:le}=(Ee=>{const De=window.getComputedStyle(Ee);return{top:parseFloat(De.scrollMarginTop)||0,right:parseFloat(De.scrollMarginRight)||0,bottom:parseFloat(De.scrollMarginBottom)||0,left:parseFloat(De.scrollMarginLeft)||0}})(n);let me=V-z,de=s==="center"?Y+q/2-le+se:s==="end"?H+se:Y-le;const be=[];for(let Ee=0;Ee<y.length;Ee++){const De=y[Ee],{height:je,width:Ie,top:Qe,right:et,bottom:dt,left:ke}=De.getBoundingClientRect();if(V>=0&&Y>=0&&G<=k&&H<=x&&(De===m&&!jM(De)||V>=Qe&&G<=dt&&Y>=ke&&H<=et))return be;const we=getComputedStyle(De),ze=parseInt(we.borderLeftWidth,10),xe=parseInt(we.borderTopWidth,10),At=parseInt(we.borderRightWidth,10),it=parseInt(we.borderBottomWidth,10);let bt=0,Bt=0;const Ke="offsetWidth"in De?De.offsetWidth-De.clientWidth-ze-At:0,Te="offsetHeight"in De?De.offsetHeight-De.clientHeight-xe-it:0,Se="offsetWidth"in De?De.offsetWidth===0?0:Ie/De.offsetWidth:0,Ne="offsetHeight"in De?De.offsetHeight===0?0:je/De.offsetHeight:0;if(m===De)bt=NM(F,F+k,k,xe,it,F+me,F+me+j,j),Bt=s==="start"?de:s==="center"?de-x/2:s==="end"?de-x:NM(P,P+x,x,ze,At,P+de,P+de+q,q),bt=Math.max(0,bt+F),Bt=Math.max(0,Bt+P);else{bt=NM(Qe,dt,je,xe,it+Te,me,me+j,j),Bt=s==="start"?de-ke-ze:s==="center"?de-(ke+Ie/2)+Ke/2:s==="end"?de-et+At+Ke:NM(ke,et,Ie,ze,At+Ke,de,de+q,q);const{scrollLeft:ut,scrollTop:rt}=De;bt=Ne===0?0:Math.max(0,Math.min(rt+bt/Ne,De.scrollHeight-je/Ne+Te)),Bt=Se===0?0:Math.max(0,Math.min(ut+Bt/Se,De.scrollWidth-Ie/Se+Ke)),me+=rt-bt,de+=ut-Bt}be.push({el:De,top:bt,left:Bt})}return be};var Sx=function(){return Sx=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Sx.apply(this,arguments)};var cIe=0;function Loe(){}function AIe(n,e){if(n){var t=uIe(n,{boundary:e});t.forEach(function(i){var r=i.el,o=i.top,s=i.left;r.scrollTop=o,r.scrollLeft=s})}}function dQ(n,e,t){var i=n===e||e instanceof t.Node&&n.contains&&n.contains(e);return i}function Foe(n,e){var t;function i(){t&&clearTimeout(t)}function r(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];i(),t=setTimeout(function(){t=null,n.apply(void 0,s)},e)}return r.cancel=i,r}function Y0(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return e.some(function(a){return a&&a.apply(void 0,[i].concat(o)),i.preventDownshiftDefault||i.hasOwnProperty("nativeEvent")&&i.nativeEvent.preventDownshiftDefault})}}function GM(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){e.forEach(function(r){typeof r=="function"?r(i):r&&(r.current=i)})}}function hIe(){return String(cIe++)}function OD(n,e){return!n||!e?n:Object.keys(n).reduce(function(t,i){return t[i]=zoe(e,i)?e[i]:n[i],t},{})}function zoe(n,e){return n[e]!==void 0}function dIe(n){var e=n.key,t=n.keyCode;return t>=37&&t<=40&&e.indexOf("Arrow")!==0?"Arrow"+e:e}function WM(n,e,t,i,r){var o=t.length;if(o===0)return-1;var s=o-1;(typeof n!="number"||n<0||n>s)&&(n=e>0?-1:s+1);var a=n+e;a<0?a=s:a>s&&(a=0);var c=JS(a,e<0,t,i,r);return c===-1?n>=o?-1:n:c}function JS(n,e,t,i,r){r===void 0&&(r=!1);var o=t.length;if(e){for(var s=n;s>=0;s--)if(!i(t[s],s))return s}else for(var a=n;a<o;a++)if(!i(t[a],a))return a;return r?JS(e?o-1:0,e,t,i):-1}function fQ(n,e,t,i){return i===void 0&&(i=!0),t&&e.some(function(r){return r&&(dQ(r,n,t)||i&&dQ(r,t.document.activeElement,t))})}var fIe=Foe(function(n){joe(n).textContent=""},500);function joe(n){var e=n.getElementById("a11y-status-message");return e||(e=n.createElement("div"),e.setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),n.body.appendChild(e),e)}function pIe(n,e){if(!(!n||!e)){var t=joe(e);t.textContent=n,fIe(e)}}function mIe(n){var e=n?.getElementById("a11y-status-message");e&&e.remove()}var Noe={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function gIe(n,e,t){var i=n.props,r=n.type,o={};Object.keys(e).forEach(function(s){yIe(s,n,e,t),t[s]!==e[s]&&(o[s]=t[s])}),i.onStateChange&&Object.keys(o).length&&i.onStateChange(Tl({type:r},o))}function yIe(n,e,t,i){var r=e.props,o=e.type,s="on"+zK(n)+"Change";r[s]&&i[n]!==void 0&&i[n]!==t[n]&&r[s](Tl({type:o},i))}function vIe(n,e){return e.changes}var pQ=Foe(function(n,e){pIe(n,e)},200),bIe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?St.useLayoutEffect:St.useEffect,CIe="useId"in On?function(e){var t=e.id,i=e.labelId,r=e.menuId,o=e.getItemId,s=e.toggleButtonId,a=e.inputId,c="downshift-"+On.useId();t||(t=c);var h=St.useRef({labelId:i||t+"-label",menuId:r||t+"-menu",getItemId:o||function(m){return t+"-item-"+m},toggleButtonId:s||t+"-toggle-button",inputId:a||t+"-input"});return h.current}:function(e){var t=e.id,i=t===void 0?"downshift-"+hIe():t,r=e.labelId,o=e.menuId,s=e.getItemId,a=e.toggleButtonId,c=e.inputId,h=St.useRef({labelId:r||i+"-label",menuId:o||i+"-menu",getItemId:s||function(m){return i+"-item-"+m},toggleButtonId:a||i+"-toggle-button",inputId:c||i+"-input"});return h.current};function _Ie(n,e,t,i){var r,o;if(n===void 0){if(e===void 0)throw new Error(i);r=t[e],o=e}else o=e===void 0?t.indexOf(n):e,r=n;return[r,o]}function zK(n){return""+n.slice(0,1).toUpperCase()+n.slice(1)}function Goe(n){var e=St.useRef(n);return e.current=n,e}function xIe(n,e,t,i){var r=St.useRef(),o=St.useRef(),s=St.useCallback(function(x,k){o.current=k,x=OD(x,k.props);var P=n(x,k),F=k.props.stateReducer(x,Tl({},k,{changes:P}));return F},[n]),a=St.useReducer(s,e,t),c=a[0],h=a[1],m=Goe(e),y=St.useCallback(function(x){return h(Tl({props:m.current},x))},[m]),M=o.current;return St.useEffect(function(){var x=OD(r.current,M?.props),k=M&&r.current&&!i(x,c);k&&gIe(M,x,c),r.current=c},[c,M,i]),[c,y]}var B3={itemToString:function(e){return e?String(e):""},itemToKey:function(e){return e},stateReducer:vIe,scrollIntoView:AIe,environment:typeof window>"u"?void 0:window};function ev(n,e,t){t===void 0&&(t=Noe);var i=n["default"+zK(e)];return i!==void 0?i:t[e]}function I3(n,e,t){t===void 0&&(t=Noe);var i=n[e];if(i!==void 0)return i;var r=n["initial"+zK(e)];return r!==void 0?r:ev(n,e,t)}function MIe(n){var e=I3(n,"selectedItem"),t=I3(n,"isOpen"),i=IIe(n),r=I3(n,"inputValue");return{highlightedIndex:i<0&&e&&t?n.items.findIndex(function(o){return n.itemToKey(o)===n.itemToKey(e)}):i,isOpen:t,selectedItem:e,inputValue:r}}function k3(n,e,t){var i=n.items,r=n.initialHighlightedIndex,o=n.defaultHighlightedIndex,s=n.isItemDisabled,a=n.itemToKey,c=e.selectedItem,h=e.highlightedIndex;return i.length===0?-1:r!==void 0&&h===r&&!s(i[r],r)?r:o!==void 0&&!s(i[o],o)?o:c?i.findIndex(function(m){return a(c)===a(m)}):t<0&&!s(i[i.length-1],i.length-1)?i.length-1:t>0&&!s(i[0],0)?0:-1}function wIe(n,e,t){var i=St.useRef({isMouseDown:!1,isTouchMove:!1,isTouchEnd:!1});return St.useEffect(function(){if(!n)return Loe;var r=t.map(function(m){return m.current});function o(){i.current.isTouchEnd=!1,i.current.isMouseDown=!0}function s(m){i.current.isMouseDown=!1,fQ(m.target,r,n)||e()}function a(){i.current.isTouchEnd=!1,i.current.isTouchMove=!1}function c(){i.current.isTouchMove=!0}function h(m){i.current.isTouchEnd=!0,!i.current.isTouchMove&&!fQ(m.target,r,n,!1)&&e()}return n.addEventListener("mousedown",o),n.addEventListener("mouseup",s),n.addEventListener("touchstart",a),n.addEventListener("touchmove",c),n.addEventListener("touchend",h),function(){n.removeEventListener("mousedown",o),n.removeEventListener("mouseup",s),n.removeEventListener("touchstart",a),n.removeEventListener("touchmove",c),n.removeEventListener("touchend",h)}},[t,n,e]),i.current}var SIe=function(){return Loe};function EIe(n,e,t,i){i===void 0&&(i={});var r=i.document,o=jK();St.useEffect(function(){if(!(!n||o||!r)){var s=n(e);pQ(s,r)}},t),St.useEffect(function(){return function(){pQ.cancel(),mIe(r)}},[r])}function OIe(n){var e=n.highlightedIndex,t=n.isOpen,i=n.itemRefs,r=n.getItemNodeFromIndex,o=n.menuElement,s=n.scrollIntoView,a=St.useRef(!0);return bIe(function(){e<0||!t||!Object.keys(i.current).length||(a.current===!1?a.current=!0:s(r(e),o))},[e]),a}function mQ(n,e,t){var i;t===void 0&&(t=!0);var r=((i=n.items)==null?void 0:i.length)&&e>=0;return Tl({isOpen:!1,highlightedIndex:-1},r&&Tl({selectedItem:n.items[e],isOpen:ev(n,"isOpen"),highlightedIndex:ev(n,"highlightedIndex")},t&&{inputValue:n.itemToString(n.items[e])}))}function BIe(n,e){return n.isOpen===e.isOpen&&n.inputValue===e.inputValue&&n.highlightedIndex===e.highlightedIndex&&n.selectedItem===e.selectedItem}function jK(){var n=On.useRef(!0);return On.useEffect(function(){return n.current=!1,function(){n.current=!0}},[]),n.current}function BD(n){var e=ev(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}function IIe(n){var e=I3(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}var Sw={environment:dr.shape({addEventListener:dr.func.isRequired,removeEventListener:dr.func.isRequired,document:dr.shape({createElement:dr.func.isRequired,getElementById:dr.func.isRequired,activeElement:dr.any.isRequired,body:dr.any.isRequired}).isRequired,Node:dr.func.isRequired}),itemToString:dr.func,itemToKey:dr.func,stateReducer:dr.func},Woe=Tl({},Sw,{getA11yStatusMessage:dr.func,highlightedIndex:dr.number,defaultHighlightedIndex:dr.number,initialHighlightedIndex:dr.number,isOpen:dr.bool,defaultIsOpen:dr.bool,initialIsOpen:dr.bool,selectedItem:dr.any,initialSelectedItem:dr.any,defaultSelectedItem:dr.any,id:dr.string,labelId:dr.string,menuId:dr.string,getItemId:dr.func,toggleButtonId:dr.string,onSelectedItemChange:dr.func,onHighlightedIndexChange:dr.func,onStateChange:dr.func,onIsOpenChange:dr.func,scrollIntoView:dr.func});function kIe(n,e,t){var i=e.type,r=e.props,o;switch(i){case t.ItemMouseMove:o={highlightedIndex:e.disabled?-1:e.index};break;case t.MenuMouseLeave:o={highlightedIndex:-1};break;case t.ToggleButtonClick:case t.FunctionToggleMenu:o={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:k3(r,n,0)};break;case t.FunctionOpenMenu:o={isOpen:!0,highlightedIndex:k3(r,n,0)};break;case t.FunctionCloseMenu:o={isOpen:!1};break;case t.FunctionSetHighlightedIndex:o={highlightedIndex:r.isItemDisabled(r.items[e.highlightedIndex],e.highlightedIndex)?-1:e.highlightedIndex};break;case t.FunctionSetInputValue:o={inputValue:e.inputValue};break;case t.FunctionReset:o={highlightedIndex:BD(r),isOpen:ev(r,"isOpen"),selectedItem:ev(r,"selectedItem"),inputValue:ev(r,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return Tl({},n,o)}Sx(Sx({},Woe),{items:dr.array.isRequired,isItemDisabled:dr.func});Sx(Sx({},B3),{isItemDisabled:function(){return!1}});var NK=0,GK=1,WK=2,QK=3,qK=4,YK=5,$K=6,VK=7,HK=8,eE=9,ZK=10,Qoe=11,qoe=12,XK=13,Yoe=14,$oe=15,Voe=16,Hoe=17,Zoe=18,JK=19,Xoe=20,Joe=21,eL=22,ese=Object.freeze({__proto__:null,ControlledPropUpdatedSelectedItem:eL,FunctionCloseMenu:Hoe,FunctionOpenMenu:Voe,FunctionReset:Joe,FunctionSelectItem:JK,FunctionSetHighlightedIndex:Zoe,FunctionSetInputValue:Xoe,FunctionToggleMenu:$oe,InputBlur:eE,InputChange:HK,InputClick:ZK,InputKeyDownArrowDown:NK,InputKeyDownArrowUp:GK,InputKeyDownEnd:qK,InputKeyDownEnter:VK,InputKeyDownEscape:WK,InputKeyDownHome:QK,InputKeyDownPageDown:$K,InputKeyDownPageUp:YK,ItemClick:XK,ItemMouseMove:qoe,MenuMouseLeave:Qoe,ToggleButtonClick:Yoe});function TIe(n){var e=MIe(n),t=e.selectedItem,i=e.inputValue;return i===""&&t&&n.defaultInputValue===void 0&&n.initialInputValue===void 0&&n.inputValue===void 0&&(i=n.itemToString(t)),Tl({},e,{inputValue:i})}Tl({},Woe,{items:dr.array.isRequired,isItemDisabled:dr.func,inputValue:dr.string,defaultInputValue:dr.string,initialInputValue:dr.string,inputId:dr.string,onInputValueChange:dr.func});function RIe(n,e,t,i){var r=St.useRef(),o=xIe(n,e,t,i),s=o[0],a=o[1],c=jK();return St.useEffect(function(){if(zoe(e,"selectedItem")){if(!c){var h=e.itemToKey(e.selectedItem)!==e.itemToKey(r.current);h&&a({type:eL,inputValue:e.itemToString(e.selectedItem)})}r.current=s.selectedItem===r.current?e.selectedItem:s.selectedItem}},[s.selectedItem,e.selectedItem]),[OD(s,e),a]}var DIe=Tl({},B3,{isItemDisabled:function(){return!1}});function PIe(n,e){var t,i=e.type,r=e.props,o=e.altKey,s;switch(i){case XK:s={isOpen:ev(r,"isOpen"),highlightedIndex:BD(r),selectedItem:r.items[e.index],inputValue:r.itemToString(r.items[e.index])};break;case NK:n.isOpen?s={highlightedIndex:WM(n.highlightedIndex,1,r.items,r.isItemDisabled,!0)}:s={highlightedIndex:o&&n.selectedItem==null?-1:k3(r,n,1),isOpen:r.items.length>=0};break;case GK:n.isOpen?o?s=mQ(r,n.highlightedIndex):s={highlightedIndex:WM(n.highlightedIndex,-1,r.items,r.isItemDisabled,!0)}:s={highlightedIndex:k3(r,n,-1),isOpen:r.items.length>=0};break;case VK:s=mQ(r,n.highlightedIndex);break;case WK:s=Tl({isOpen:!1,highlightedIndex:-1},!n.isOpen&&{selectedItem:null,inputValue:""});break;case YK:s={highlightedIndex:WM(n.highlightedIndex,-10,r.items,r.isItemDisabled,!0)};break;case $K:s={highlightedIndex:WM(n.highlightedIndex,10,r.items,r.isItemDisabled,!0)};break;case QK:s={highlightedIndex:JS(0,!1,r.items,r.isItemDisabled)};break;case qK:s={highlightedIndex:JS(r.items.length-1,!0,r.items,r.isItemDisabled)};break;case eE:s=Tl({isOpen:!1,highlightedIndex:-1},n.highlightedIndex>=0&&((t=r.items)==null?void 0:t.length)&&e.selectItem&&{selectedItem:r.items[n.highlightedIndex],inputValue:r.itemToString(r.items[n.highlightedIndex])});break;case HK:s={isOpen:!0,highlightedIndex:BD(r),inputValue:e.inputValue};break;case ZK:s={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:k3(r,n,0)};break;case JK:s={selectedItem:e.selectedItem,inputValue:r.itemToString(e.selectedItem)};break;case eL:s={inputValue:e.inputValue};break;default:return kIe(n,e,ese)}return Tl({},n,s)}var UIe=["onMouseLeave","refKey","ref"],KIe=["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"],LIe=["onClick","onPress","refKey","ref"],FIe=["onKeyDown","onChange","onInput","onBlur","onChangeText","onClick","refKey","ref"];ID.stateChangeTypes=ese;function ID(n){n===void 0&&(n={});var e=Tl({},DIe,n),t=e.items,i=e.scrollIntoView,r=e.environment,o=e.getA11yStatusMessage,s=RIe(PIe,e,TIe,BIe),a=s[0],c=s[1],h=a.isOpen,m=a.highlightedIndex,y=a.selectedItem,M=a.inputValue,x=St.useRef(null),k=St.useRef({}),P=St.useRef(null),F=St.useRef(null),j=jK(),q=CIe(e),V=St.useRef(),H=Goe({state:a,props:e}),G=St.useCallback(function(ze){return k.current[q.getItemId(ze)]},[q]);EIe(o,a,[h,m,y,M],r);var Y=OIe({menuElement:x.current,highlightedIndex:m,isOpen:h,itemRefs:k,scrollIntoView:i,getItemNodeFromIndex:G});St.useEffect(function(){var ze=I3(e,"isOpen");ze&&P.current&&P.current.focus()},[]),St.useEffect(function(){j||(V.current=t.length)});var z=wIe(r,St.useCallback(function(){H.current.state.isOpen&&c({type:eE,selectItem:!1})},[c,H]),St.useMemo(function(){return[x,F,P]},[x.current,F.current,P.current])),se=SIe();St.useEffect(function(){h||(k.current={})},[h]),St.useEffect(function(){var ze;!h||!(r!=null&&r.document)||!(P!=null&&(ze=P.current)!=null&&ze.focus)||r.document.activeElement!==P.current&&P.current.focus()},[h,r]);var le=St.useMemo(function(){return{ArrowDown:function(xe){xe.preventDefault(),c({type:NK,altKey:xe.altKey})},ArrowUp:function(xe){xe.preventDefault(),c({type:GK,altKey:xe.altKey})},Home:function(xe){H.current.state.isOpen&&(xe.preventDefault(),c({type:QK}))},End:function(xe){H.current.state.isOpen&&(xe.preventDefault(),c({type:qK}))},Escape:function(xe){var At=H.current.state;(At.isOpen||At.inputValue||At.selectedItem||At.highlightedIndex>-1)&&(xe.preventDefault(),c({type:WK}))},Enter:function(xe){var At=H.current.state;!At.isOpen||xe.which===229||(xe.preventDefault(),c({type:VK}))},PageUp:function(xe){H.current.state.isOpen&&(xe.preventDefault(),c({type:YK}))},PageDown:function(xe){H.current.state.isOpen&&(xe.preventDefault(),c({type:$K}))}}},[c,H]),me=St.useCallback(function(ze){return Tl({id:q.labelId,htmlFor:q.inputId},ze)},[q]),de=St.useCallback(function(ze,xe){var At,it=ze===void 0?{}:ze,bt=it.onMouseLeave,Bt=it.refKey,Ke=Bt===void 0?"ref":Bt,Te=it.ref,Se=zM(it,UIe),Ne=xe===void 0?{}:xe;return Ne.suppressRefError,Tl((At={},At[Ke]=GM(Te,function(ut){x.current=ut}),At.id=q.menuId,At.role="listbox",At["aria-labelledby"]=Se&&Se["aria-label"]?void 0:""+q.labelId,At.onMouseLeave=Y0(bt,function(){c({type:Qoe})}),At),Se)},[c,se,q]),be=St.useCallback(function(ze){var xe,At,it=ze===void 0?{}:ze,bt=it.item,Bt=it.index,Ke=it.refKey,Te=Ke===void 0?"ref":Ke,Se=it.ref,Ne=it.onMouseMove,ut=it.onMouseDown,rt=it.onClick;it.onPress;var pt=it.disabled,Dt=zM(it,KIe);pt!==void 0&&console.warn('Passing "disabled" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useCombobox.');var Ot=H.current,Jt=Ot.props,Tn=Ot.state,Ln=_Ie(bt,Bt,Jt.items,"Pass either item or index to getItemProps!"),ii=Ln[0],wn=Ln[1],Rn=Jt.isItemDisabled(ii,wn),gn="onClick",Yn=rt,Dn=function(){z.isTouchEnd||wn===Tn.highlightedIndex||(Y.current=!1,c({type:qoe,index:wn,disabled:Rn}))},Tt=function(){c({type:XK,index:wn})},_e=function(ee){return ee.preventDefault()};return Tl((xe={},xe[Te]=GM(Se,function(oe){oe&&(k.current[q.getItemId(wn)]=oe)}),xe["aria-disabled"]=Rn,xe["aria-selected"]=wn===Tn.highlightedIndex,xe.id=q.getItemId(wn),xe.role="option",xe),!Rn&&(At={},At[gn]=Y0(Yn,Tt),At),{onMouseMove:Y0(Ne,Dn),onMouseDown:Y0(ut,_e)},Dt)},[c,q,H,z,Y]),Ee=St.useCallback(function(ze){var xe,At=ze===void 0?{}:ze,it=At.onClick;At.onPress;var bt=At.refKey,Bt=bt===void 0?"ref":bt,Ke=At.ref,Te=zM(At,LIe),Se=H.current.state,Ne=function(){c({type:Yoe})};return Tl((xe={},xe[Bt]=GM(Ke,function(ut){F.current=ut}),xe["aria-controls"]=q.menuId,xe["aria-expanded"]=Se.isOpen,xe.id=q.toggleButtonId,xe.tabIndex=-1,xe),!Te.disabled&&Tl({},{onClick:Y0(it,Ne)}),Te)},[c,H,q]),De=St.useCallback(function(ze,xe){var At,it=ze===void 0?{}:ze,bt=it.onKeyDown,Bt=it.onChange,Ke=it.onInput,Te=it.onBlur;it.onChangeText;var Se=it.onClick,Ne=it.refKey,ut=Ne===void 0?"ref":Ne,rt=it.ref,pt=zM(it,FIe),Dt=xe===void 0?{}:xe;Dt.suppressRefError;var Ot=H.current.state,Jt=function(Dn){var Tt=dIe(Dn);Tt&&le[Tt]&&le[Tt](Dn)},Tn=function(Dn){c({type:HK,inputValue:Dn.target.value})},Ln=function(Dn){if(r!=null&&r.document&&Ot.isOpen&&!z.isMouseDown){var Tt=Dn.relatedTarget===null&&r.document.activeElement!==r.document.body;c({type:eE,selectItem:!Tt})}},ii=function(){c({type:ZK})},wn="onChange",Rn={};if(!pt.disabled){var gn;Rn=(gn={},gn[wn]=Y0(Bt,Ke,Tn),gn.onKeyDown=Y0(bt,Jt),gn.onBlur=Y0(Te,Ln),gn.onClick=Y0(Se,ii),gn)}return Tl((At={},At[ut]=GM(rt,function(Yn){P.current=Yn}),At["aria-activedescendant"]=Ot.isOpen&&Ot.highlightedIndex>-1?q.getItemId(Ot.highlightedIndex):"",At["aria-autocomplete"]="list",At["aria-controls"]=q.menuId,At["aria-expanded"]=Ot.isOpen,At["aria-labelledby"]=pt&&pt["aria-label"]?void 0:q.labelId,At.autoComplete="off",At.id=q.inputId,At.role="combobox",At.value=Ot.inputValue,At),Rn,pt)},[c,q,r,le,H,z,se]),je=St.useCallback(function(){c({type:$oe})},[c]),Ie=St.useCallback(function(){c({type:Hoe})},[c]),Qe=St.useCallback(function(){c({type:Voe})},[c]),et=St.useCallback(function(ze){c({type:Zoe,highlightedIndex:ze})},[c]),dt=St.useCallback(function(ze){c({type:JK,selectedItem:ze})},[c]),ke=St.useCallback(function(ze){c({type:Xoe,inputValue:ze})},[c]),we=St.useCallback(function(){c({type:Joe})},[c]);return{getItemProps:be,getLabelProps:me,getMenuProps:de,getInputProps:De,getToggleButtonProps:Ee,toggleMenu:je,openMenu:Qe,closeMenu:Ie,setHighlightedIndex:et,setInputValue:ke,selectItem:dt,reset:we,highlightedIndex:m,isOpen:h,selectedItem:y,inputValue:M}}Sw.stateReducer,Sw.itemToKey,Sw.environment,dr.array,dr.array,dr.array,dr.func,dr.number,dr.number,dr.number,dr.func,dr.func,dr.string,dr.string;B3.itemToKey,B3.stateReducer,B3.environment;function hi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",e="73020a5a2032027cc342d42db613082f6da43a81",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:22}},1:{start:{line:13,column:28},end:{line:13,column:55}},2:{start:{line:14,column:18},end:{line:14,column:36}},3:{start:{line:15,column:36},end:{line:15,column:62}},4:{start:{line:16,column:24},end:{line:19,column:22}},5:{start:{line:17,column:15},end:{line:17,column:34}},6:{start:{line:18,column:4},end:{line:18,column:72}},7:{start:{line:18,column:36},end:{line:18,column:70}},8:{start:{line:20,column:24},end:{line:25,column:8}},9:{start:{line:21,column:4},end:{line:24,column:5}},10:{start:{line:22,column:20},end:{line:22,column:84}},11:{start:{line:23,column:6},end:{line:23,column:48}},12:{start:{line:33,column:6},end:{line:55,column:4}},13:{start:{line:36,column:28},end:{line:36,column:47}},14:{start:{line:38,column:6},end:{line:40,column:7}},15:{start:{line:39,column:8},end:{line:39,column:51}},16:{start:{line:41,column:6},end:{line:41,column:28}},17:{start:{line:44,column:16},end:{line:44,column:51}},18:{start:{line:45,column:6},end:{line:45,column:18}},19:{start:{line:46,column:6},end:{line:46,column:56}},20:{start:{line:49,column:6},end:{line:53,column:7}},21:{start:{line:50,column:8},end:{line:50,column:20}},22:{start:{line:51,column:8},end:{line:51,column:40}},23:{start:{line:52,column:8},end:{line:52,column:19}},24:{start:{line:56,column:2},end:{line:60,column:30}},25:{start:{line:57,column:4},end:{line:59,column:5}},26:{start:{line:58,column:6},end:{line:58,column:22}},27:{start:{line:61,column:2},end:{line:64,column:22}},28:{start:{line:62,column:4},end:{line:62,column:53}},29:{start:{line:63,column:4},end:{line:63,column:69}},30:{start:{line:63,column:17},end:{line:63,column:68}},31:{start:{line:65,column:2},end:{line:67,column:14}},32:{start:{line:66,column:4},end:{line:66,column:26}},33:{start:{line:68,column:2},end:{line:103,column:7}},34:{start:{line:76,column:25},end:{line:76,column:35}},35:{start:{line:87,column:79},end:{line:100,column:9}}},fnMap:{0:{name:"InputAutocomplete",decl:{start:{line:6,column:24},end:{line:6,column:41}},loc:{start:{line:12,column:3},end:{line:104,column:1}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:9,column:13},end:{line:9,column:14}},loc:{start:{line:9,column:19},end:{line:10,column:3}},line:9},2:{name:"(anonymous_2)",decl:{start:{line:16,column:38},end:{line:16,column:39}},loc:{start:{line:16,column:44},end:{line:19,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:18,column:26},end:{line:18,column:27}},loc:{start:{line:18,column:36},end:{line:18,column:70}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:42},end:{line:20,column:43}},loc:{start:{line:20,column:48},end:{line:25,column:3}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:36,column:47}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:18},end:{line:37,column:19}},loc:{start:{line:37,column:38},end:{line:42,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:43,column:26},end:{line:43,column:27}},loc:{start:{line:43,column:48},end:{line:47,column:5}},line:43},8:{name:"(anonymous_8)",decl:{start:{line:48,column:24},end:{line:48,column:25}},loc:{start:{line:48,column:47},end:{line:54,column:5}},line:48},9:{name:"(anonymous_9)",decl:{start:{line:56,column:18},end:{line:56,column:19}},loc:{start:{line:56,column:24},end:{line:60,column:3}},line:56},10:{name:"(anonymous_10)",decl:{start:{line:61,column:18},end:{line:61,column:19}},loc:{start:{line:61,column:24},end:{line:64,column:3}},line:61},11:{name:"(anonymous_11)",decl:{start:{line:63,column:11},end:{line:63,column:12}},loc:{start:{line:63,column:17},end:{line:63,column:68}},line:63},12:{name:"(anonymous_12)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},13:{name:"(anonymous_13)",decl:{start:{line:76,column:19},end:{line:76,column:20}},loc:{start:{line:76,column:25},end:{line:76,column:35}},line:76},14:{name:"(anonymous_14)",decl:{start:{line:87,column:46},end:{line:87,column:47}},loc:{start:{line:87,column:79},end:{line:100,column:9}},line:87}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:14}},type:"default-arg",locations:[{start:{line:8,column:12},end:{line:8,column:14}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:10,column:3}},type:"default-arg",locations:[{start:{line:9,column:13},end:{line:10,column:3}}],line:9},2:{loc:{start:{line:13,column:43},end:{line:13,column:54}},type:"binary-expr",locations:[{start:{line:13,column:43},end:{line:13,column:48}},{start:{line:13,column:52},end:{line:13,column:54}}],line:13},3:{loc:{start:{line:21,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},4:{loc:{start:{line:36,column:28},end:{line:36,column:47}},type:"cond-expr",locations:[{start:{line:36,column:35},end:{line:36,column:42}},{start:{line:36,column:45},end:{line:36,column:47}}],line:36},5:{loc:{start:{line:38,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:38,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},6:{loc:{start:{line:44,column:16},end:{line:44,column:51}},type:"cond-expr",locations:[{start:{line:44,column:31},end:{line:44,column:46}},{start:{line:44,column:49},end:{line:44,column:51}}],line:44},7:{loc:{start:{line:46,column:15},end:{line:46,column:54}},type:"cond-expr",locations:[{start:{line:46,column:30},end:{line:46,column:45}},{start:{line:46,column:48},end:{line:46,column:54}}],line:46},8:{loc:{start:{line:49,column:6},end:{line:53,column:7}},type:"if",locations:[{start:{line:49,column:6},end:{line:53,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},9:{loc:{start:{line:51,column:17},end:{line:51,column:38}},type:"cond-expr",locations:[{start:{line:51,column:28},end:{line:51,column:34}},{start:{line:51,column:37},end:{line:51,column:38}}],line:51},10:{loc:{start:{line:57,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:59,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:66,column:13},end:{line:66,column:24}},type:"binary-expr",locations:[{start:{line:66,column:13},end:{line:66,column:18}},{start:{line:66,column:22},end:{line:66,column:24}}],line:66},12:{loc:{start:{line:87,column:18},end:{line:100,column:10}},type:"binary-expr",locations:[{start:{line:87,column:18},end:{line:87,column:24}},{start:{line:87,column:28},end:{line:100,column:10}}],line:87}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0],1:[0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx"],names:[],mappings:"AAkFI,SACE,KADF;AAlFJ,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,mBAAkB;AAE1B,MAAM,aAAa;AASnB,wBAAwB,kBAAkB;AAAA,EACxC;AAAA,EACA,UAAU,CAAC;AAAA,EACX,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,cAAc;AAChB,GAA2B;AACzB,QAAM,CAAC,OAAO,QAAQ,IAAI,MAAM,SAAS,SAAS,EAAE;AACpD,QAAM,UAAU,MAAM,OAAuB,IAAI;AACjD,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,UAAU;AAE3D,QAAM,gBAAgB,MAAM,QAAQ,MAAM;AACxC,UAAM,KAAK,MAAM,YAAY;AAC7B,WAAO,QAAQ,OAAO,CAAC,SAAS,KAAK,CAAC,EAAE,YAAY,EAAE,SAAS,EAAE,CAAC;AAAA,EACpE,GAAG,CAAC,SAAS,KAAK,CAAC;AAEnB,QAAM,gBAAgB,MAAM,YAAY,MAAM;AAC5C,QAAI,QAAQ,SAAS;AACnB,YAAM,QAAQ,OAAO,cAAc,QAAQ,QAAQ,sBAAsB,EAAE;AAC3E,mBAAa,KAAK,IAAI,OAAO,UAAU,CAAC;AAAA,IAC1C;AAAA,EACF,GAAG,CAAC,CAAC;AAEL,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY;AAAA,IACd,OAAO;AAAA,IACP,YAAY;AAAA,IACZ,cAAc,CAAC,SAAU,OAAO,KAAK,CAAC,IAAI;AAAA,IAC1C,cAAc,CAAC,QAAQ,WAAW;AAChC,UAAI,OAAO,SAAS,YAAY,iBAAiB,YAAY;AAC3D,eAAO,EAAC,GAAG,OAAO,SAAS,QAAQ,KAAI;AAAA,MACzC;AACA,aAAO,OAAO;AAAA,IAChB;AAAA,IACA,sBAAsB,CAAC,EAAC,aAAY,MAAM;AACxC,YAAM,IAAI,eAAe,aAAa,CAAC,IAAI;AAC3C,eAAS,CAAC;AACV,eAAS,eAAe,aAAa,CAAC,IAAI,MAAS;AAAA,IACrD;AAAA,IACA,oBAAoB,CAAC,EAAC,YAAY,EAAC,MAAM;AACvC,UAAI,OAAO,MAAM,UAAU;AACzB,iBAAS,CAAC;AACV,iBAAS,MAAM,KAAK,SAAY,CAAC;AACjC,iBAAS;AAAA,MACX;AAAA,IACF;AAAA,EACF,CAAC;AAED,QAAM,UAAU,MAAM;AACpB,QAAI,QAAQ;AACV,oBAAc;AAAA,IAChB;AAAA,EACF,GAAG,CAAC,QAAQ,aAAa,CAAC;AAE1B,QAAM,UAAU,MAAM;AACpB,WAAO,iBAAiB,UAAU,aAAa;AAC/C,WAAO,MAAM,OAAO,oBAAoB,UAAU,aAAa;AAAA,EACjE,GAAG,CAAC,aAAa,CAAC;AAElB,QAAM,UAAU,MAAM;AACpB,aAAS,SAAS,EAAE;AAAA,EACtB,GAAG,CAAC,KAAK,CAAC;AAEV,SACE,qBAAC,SAAI,WAAU,yBACb;AAAA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,cAAc;AAAA,UAChB,cAAc;AAAA,UACd,WAAW;AAAA,UACX,YAAY;AAAA,UACZ,SAAS,MAAM,SAAS;AAAA,QAC1B,CAAC;AAAA;AAAA,IACH;AAAA,IACA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,aAAa,CAAC,GAAG,EAAC,kBAAkB,KAAI,CAAC;AAAA,QAC7C,KAAK;AAAA,QACL,OAAO,EAAC,UAAU,SAAS,UAAU,QAAQ,WAAW,QAAQ,IAAG;AAAA,QACnE,WAAU;AAAA,QAET,oBACC,cAAc,IAAI,CAAC,MAAM,UACvB;AAAA,UAAC;AAAA;AAAA,YAEE,GAAG,aAAa;AAAA,cACf;AAAA,cACA;AAAA,cACA,WAAW,WAAW,mCAAmC;AAAA,gBACvD,4CAA4C,qBAAqB;AAAA,cACnE,CAAC;AAAA,YACH,CAAC;AAAA,YAEA,eAAK,CAAC;AAAA;AAAA,UATF,KAAK,CAAC;AAAA,QAUb,CACD;AAAA;AAAA,IACL;AAAA,KACF;AAEJ;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"73020a5a2032027cc342d42db613082f6da43a81"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return hi=function(){return s},s}hi();const gQ=(hi().s[0]++,140);function B5({value:n,options:e=(hi().b[0][0]++,[]),onChange:t=(hi().b[1][0]++,()=>{hi().f[1]++}),"aria-label":i}){hi().f[0]++;const[r,o]=(hi().s[1]++,On.useState((hi().b[2][0]++,n||(hi().b[2][1]++,"")))),s=(hi().s[2]++,On.useRef(null)),[a,c]=(hi().s[3]++,On.useState(gQ)),h=(hi().s[4]++,On.useMemo(()=>{hi().f[2]++;const j=(hi().s[5]++,r.toLowerCase());return hi().s[6]++,e.filter(q=>(hi().f[3]++,hi().s[7]++,q[0].toLowerCase().includes(j)))},[e,r])),m=(hi().s[8]++,On.useCallback(()=>{if(hi().f[4]++,hi().s[9]++,s.current){hi().b[3][0]++;const j=(hi().s[10]++,window.innerHeight-s.current.getBoundingClientRect().top);hi().s[11]++,c(Math.min(j,gQ))}else hi().b[3][1]++},[])),{isOpen:y,getMenuProps:M,getInputProps:x,getItemProps:k,highlightedIndex:P,openMenu:F}=(hi().s[12]++,ID({items:h,inputValue:r,itemToString:j=>(hi().f[5]++,hi().s[13]++,j?(hi().b[4][0]++,j[0]):(hi().b[4][1]++,"")),stateReducer:(j,q)=>(hi().f[6]++,hi().s[14]++,q.type===ID.stateChangeTypes.InputClick?(hi().b[5][0]++,hi().s[15]++,{...q.changes,isOpen:!0}):(hi().b[5][1]++,hi().s[16]++,q.changes)),onSelectedItemChange:({selectedItem:j})=>{hi().f[7]++;const q=(hi().s[17]++,j?(hi().b[6][0]++,j[0]):(hi().b[6][1]++,""));hi().s[18]++,o(q),hi().s[19]++,t(j?(hi().b[7][0]++,j[0]):(hi().b[7][1]++,void 0))},onInputValueChange:({inputValue:j})=>{hi().f[8]++,hi().s[20]++,typeof j=="string"?(hi().b[8][0]++,hi().s[21]++,o(j),hi().s[22]++,t(j===""?(hi().b[9][0]++,void 0):(hi().b[9][1]++,j)),hi().s[23]++,F()):hi().b[8][1]++}}));return hi().s[24]++,On.useEffect(()=>{hi().f[9]++,hi().s[25]++,y?(hi().b[10][0]++,hi().s[26]++,m()):hi().b[10][1]++},[y,m]),hi().s[27]++,On.useEffect(()=>(hi().f[10]++,hi().s[28]++,window.addEventListener("resize",m),hi().s[29]++,()=>(hi().f[11]++,hi().s[30]++,window.removeEventListener("resize",m))),[m]),hi().s[31]++,On.useEffect(()=>{hi().f[12]++,hi().s[32]++,o((hi().b[11][0]++,n||(hi().b[11][1]++,"")))},[n]),hi().s[33]++,ie.jsxs("div",{className:"maputnik-autocomplete",children:[ie.jsx("input",{...x({"aria-label":i,className:"maputnik-string",spellCheck:!1,onFocus:()=>(hi().f[13]++,hi().s[34]++,F())})}),ie.jsx("div",{...M({},{suppressRefError:!0}),ref:s,style:{position:"fixed",overflow:"auto",maxHeight:a,zIndex:998},className:"maputnik-autocomplete-menu",children:(hi().b[12][0]++,y&&(hi().b[12][1]++,h.map((j,q)=>(hi().f[14]++,hi().s[35]++,ie.jsx("div",{...k({item:j,index:q,className:Yg("maputnik-autocomplete-menu-item",{"maputnik-autocomplete-menu-item-selected":P===q})}),children:j[1]},j[0])))))})]})}function Qp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",e="787db584cc9becf4089365283e16f9ba747f4840",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",statementMap:{0:{start:{line:6,column:28},end:{line:32,column:1}},1:{start:{line:15,column:2},end:{line:31,column:4}},2:{start:{line:27,column:43},end:{line:27,column:53}},3:{start:{line:33,column:20},end:{line:33,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:28},end:{line:6,column:29}},loc:{start:{line:14,column:6},end:{line:32,column:1}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:8,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:27,column:34},end:{line:27,column:35}},loc:{start:{line:27,column:43},end:{line:27,column:53}},line:27}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:8,column:3}},type:"default-arg",locations:[{start:{line:7,column:13},end:{line:8,column:3}}],line:7},1:{loc:{start:{line:9,column:2},end:{line:9,column:16}},type:"default-arg",locations:[{start:{line:9,column:14},end:{line:9,column:16}}],line:9}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0,2:0},b:{0:[0],1:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx"],names:[],mappings:"AA8BM;AA5BN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA+B,uBAAuB;AAUtD,MAAM,sBAA0D,CAAC;AAAA,EAC/D,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,YAAY,CAAC;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,QAAQ;AAAA,MACjB,WAAW,OAAO,MAAM;AAAA,MACxB;AAAA,MACA,eAAa;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,SAAS,WAAW,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC;AAAA;AAAA,MAC7C;AAAA;AAAA,EACF;AAEJ;AAGA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"787db584cc9becf4089365283e16f9ba747f4840"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Qp=function(){return s},s}Qp();Qp().s[0]++;const zIe=({onChange:n=(Qp().b[0][0]++,()=>{Qp().f[1]++}),sourceIds:e=(Qp().b[1][0]++,[]),wdKey:t,value:i,error:r,t:o})=>(Qp().f[0]++,Qp().s[1]++,ie.jsx(Gs,{label:o("Source"),fieldSpec:Jr.layer.source,error:r,"data-wd-key":t,children:ie.jsx(B5,{value:i,onChange:n,options:e?.map(s=>(Qp().f[2]++,Qp().s[2]++,[s,s]))})})),tse=(Qp().s[3]++,$o()(zIe));function qp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",e="61cb059654b456e27f782356448ebd0362f3cb6a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",statementMap:{0:{start:{line:6,column:33},end:{line:31,column:1}},1:{start:{line:14,column:2},end:{line:30,column:4}},2:{start:{line:26,column:46},end:{line:26,column:52}},3:{start:{line:32,column:25},end:{line:32,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:33},end:{line:6,column:34}},loc:{start:{line:13,column:6},end:{line:31,column:1}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:8,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:26,column:39},end:{line:26,column:40}},loc:{start:{line:26,column:46},end:{line:26,column:52}},line:26}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:8,column:3}},type:"default-arg",locations:[{start:{line:7,column:13},end:{line:8,column:3}}],line:7},1:{loc:{start:{line:9,column:2},end:{line:9,column:21}},type:"default-arg",locations:[{start:{line:9,column:19},end:{line:9,column:21}}],line:9}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0,2:0},b:{0:[0],1:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx"],names:[],mappings:"AA4BM;AA1BN,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA+B,uBAAuB;AAStD,MAAM,2BAAoE,CAAC;AAAA,EACzE,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,iBAAiB,CAAC;AAAA,EAClB;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,cAAc;AAAA,MACvB,WAAW,OAAO,MAAM,cAAc;AAAA,MACtC,eAAY;AAAA,MACZ;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,SAAS,gBAAgB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,MAC5C;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"61cb059654b456e27f782356448ebd0362f3cb6a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return qp=function(){return s},s}qp();qp().s[0]++;const jIe=({onChange:n=(qp().b[0][0]++,()=>{qp().f[1]++}),sourceLayerIds:e=(qp().b[1][0]++,[]),value:t,error:i,t:r})=>(qp().f[0]++,qp().s[1]++,ie.jsx(Gs,{label:r("Source Layer"),fieldSpec:us.layer["source-layer"],"data-wd-key":"layer-source-layer",error:i,children:ie.jsx(B5,{value:t,onChange:n,options:e?.map(o=>(qp().f[2]++,qp().s[2]++,[o,o]))})})),nse=(qp().s[3]++,$o()(jIe));function tL(){var n="/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts",e="674dcf7f1706a4f312a810bdf5e5997ddaf065e0",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts",statementMap:{0:{start:{line:1,column:33},end:{line:1,column:97}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts"],names:[],mappings:"AAAO,aAAM,oBAAoB,CAAC,cAAc,UAAU,aAAa,WAAW,cAAc;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"674dcf7f1706a4f312a810bdf5e5997ddaf065e0"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return tL=function(){return s},s}tL();const kD=(tL().s[0]++,["background","raster","hillshade","heatmap","color-relief"]);function vn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx",e="90da8e5ee6bdbe488a5f45bfae015ac94b0d70a9",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx",statementMap:{0:{start:{line:12,column:13},end:{line:33,column:3}},1:{start:{line:13,column:4},end:{line:16,column:5}},2:{start:{line:13,column:38},end:{line:13,column:60}},3:{start:{line:14,column:6},end:{line:14,column:72}},4:{start:{line:15,column:6},end:{line:15,column:13}},5:{start:{line:17,column:26},end:{line:17,column:52}},6:{start:{line:18,column:18},end:{line:21,column:5}},7:{start:{line:22,column:4},end:{line:27,column:5}},8:{start:{line:23,column:6},end:{line:23,column:39}},9:{start:{line:24,column:6},end:{line:26,column:7}},10:{start:{line:25,column:8},end:{line:25,column:59}},11:{start:{line:28,column:4},end:{line:28,column:30}},12:{start:{line:29,column:4},end:{line:32,column:7}},13:{start:{line:30,column:6},end:{line:30,column:47}},14:{start:{line:31,column:6},end:{line:31,column:32}},15:{start:{line:35,column:4},end:{line:35,column:17}},16:{start:{line:36,column:18},end:{line:40,column:5}},17:{start:{line:41,column:4},end:{line:47,column:5}},18:{start:{line:42,column:6},end:{line:42,column:56}},19:{start:{line:43,column:27},end:{line:43,column:72}},20:{start:{line:44,column:6},end:{line:46,column:7}},21:{start:{line:45,column:8},end:{line:45,column:48}},22:{start:{line:48,column:4},end:{line:48,column:23}},23:{start:{line:51,column:20},end:{line:51,column:34}},24:{start:{line:52,column:20},end:{line:52,column:35}},25:{start:{line:53,column:32},end:{line:53,column:56}},26:{start:{line:54,column:32},end:{line:54,column:56}},27:{start:{line:55,column:4},end:{line:62,column:5}},28:{start:{line:59,column:6},end:{line:61,column:9}},29:{start:{line:65,column:22},end:{line:65,column:54}},30:{start:{line:66,column:4},end:{line:66,column:34}},31:{start:{line:69,column:4},end:{line:86,column:5}},32:{start:{line:71,column:8},end:{line:71,column:18}},33:{start:{line:74,column:8},end:{line:74,column:113}},34:{start:{line:74,column:69},end:{line:74,column:92}},35:{start:{line:74,column:110},end:{line:74,column:111}},36:{start:{line:76,column:8},end:{line:76,column:109}},37:{start:{line:76,column:69},end:{line:76,column:88}},38:{start:{line:76,column:106},end:{line:76,column:107}},39:{start:{line:83,column:8},end:{line:83,column:133}},40:{start:{line:83,column:69},end:{line:83,column:112}},41:{start:{line:83,column:130},end:{line:83,column:131}},42:{start:{line:85,column:8},end:{line:85,column:18}},43:{start:{line:89,column:14},end:{line:89,column:26}},44:{start:{line:90,column:20},end:{line:90,column:52}},45:{start:{line:91,column:19},end:{line:91,column:61}},46:{start:{line:93,column:4},end:{line:106,column:5}},47:{start:{line:94,column:6},end:{line:105,column:11}},48:{start:{line:100,column:27},end:{line:100,column:57}},49:{start:{line:107,column:4},end:{line:165,column:6}},50:{start:{line:124,column:18},end:{line:124,column:56}},51:{start:{line:133,column:33},end:{line:133,column:59}},52:{start:{line:142,column:33},end:{line:142,column:61}},53:{start:{line:150,column:33},end:{line:150,column:69}},54:{start:{line:168,column:17},end:{line:168,column:52}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:13},end:{line:12,column:14}},loc:{start:{line:12,column:19},end:{line:33,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:13,column:31},end:{line:13,column:32}},loc:{start:{line:13,column:38},end:{line:13,column:60}},line:13},2:{name:"(anonymous_2)",decl:{start:{line:29,column:35},end:{line:29,column:36}},loc:{start:{line:29,column:41},end:{line:32,column:5}},line:29},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:49,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:44},end:{line:63,column:3}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:29},end:{line:67,column:3}},line:64},6:{name:"(anonymous_6)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:19},end:{line:87,column:3}},line:68},7:{name:"(anonymous_7)",decl:{start:{line:74,column:57},end:{line:74,column:58}},loc:{start:{line:74,column:69},end:{line:74,column:92}},line:74},8:{name:"(anonymous_8)",decl:{start:{line:74,column:98},end:{line:74,column:99}},loc:{start:{line:74,column:110},end:{line:74,column:111}},line:74},9:{name:"(anonymous_9)",decl:{start:{line:76,column:57},end:{line:76,column:58}},loc:{start:{line:76,column:69},end:{line:76,column:88}},line:76},10:{name:"(anonymous_10)",decl:{start:{line:76,column:94},end:{line:76,column:95}},loc:{start:{line:76,column:106},end:{line:76,column:107}},line:76},11:{name:"(anonymous_11)",decl:{start:{line:83,column:57},end:{line:83,column:58}},loc:{start:{line:83,column:69},end:{line:83,column:112}},line:83},12:{name:"(anonymous_12)",decl:{start:{line:83,column:118},end:{line:83,column:119}},loc:{start:{line:83,column:130},end:{line:83,column:131}},line:83},13:{name:"(anonymous_13)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:11},end:{line:166,column:3}},line:88},14:{name:"(anonymous_14)",decl:{start:{line:100,column:21},end:{line:100,column:22}},loc:{start:{line:100,column:27},end:{line:100,column:57}},line:100},15:{name:"(anonymous_15)",decl:{start:{line:123,column:26},end:{line:123,column:27}},loc:{start:{line:123,column:33},end:{line:125,column:17}},line:123},16:{name:"(anonymous_16)",decl:{start:{line:133,column:26},end:{line:133,column:27}},loc:{start:{line:133,column:33},end:{line:133,column:59}},line:133},17:{name:"(anonymous_17)",decl:{start:{line:142,column:26},end:{line:142,column:27}},loc:{start:{line:142,column:33},end:{line:142,column:61}},line:142},18:{name:"(anonymous_18)",decl:{start:{line:150,column:26},end:{line:150,column:27}},loc:{start:{line:150,column:33},end:{line:150,column:69}},line:150}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:16,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:16,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:27,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},2:{loc:{start:{line:24,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:24,column:6},end:{line:26,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:24,column:10},end:{line:24,column:84}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:54}},{start:{line:24,column:58},end:{line:24,column:84}}],line:24},4:{loc:{start:{line:41,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},5:{loc:{start:{line:43,column:27},end:{line:43,column:72}},type:"binary-expr",locations:[{start:{line:43,column:27},end:{line:43,column:66}},{start:{line:43,column:70},end:{line:43,column:72}}],line:43},6:{loc:{start:{line:44,column:6},end:{line:46,column:7}},type:"if",locations:[{start:{line:44,column:6},end:{line:46,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},7:{loc:{start:{line:55,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:62,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:57,column:6},end:{line:57,column:160}},type:"binary-expr",locations:[{start:{line:57,column:6},end:{line:57,column:25}},{start:{line:57,column:29},end:{line:57,column:52}},{start:{line:57,column:56},end:{line:57,column:106}},{start:{line:57,column:110},end:{line:57,column:160}}],line:57},9:{loc:{start:{line:65,column:22},end:{line:65,column:54}},type:"binary-expr",locations:[{start:{line:65,column:22},end:{line:65,column:48}},{start:{line:65,column:52},end:{line:65,column:54}}],line:65},10:{loc:{start:{line:66,column:11},end:{line:66,column:33}},type:"binary-expr",locations:[{start:{line:66,column:11},end:{line:66,column:27}},{start:{line:66,column:31},end:{line:66,column:33}}],line:66},11:{loc:{start:{line:69,column:4},end:{line:86,column:5}},type:"switch",locations:[{start:{line:70,column:6},end:{line:71,column:18}},{start:{line:72,column:6},end:{line:72,column:23}},{start:{line:73,column:6},end:{line:74,column:113}},{start:{line:75,column:6},end:{line:76,column:109}},{start:{line:77,column:6},end:{line:77,column:21}},{start:{line:78,column:6},end:{line:78,column:20}},{start:{line:79,column:6},end:{line:79,column:18}},{start:{line:80,column:6},end:{line:80,column:28}},{start:{line:81,column:6},end:{line:81,column:18}},{start:{line:82,column:6},end:{line:83,column:133}},{start:{line:84,column:6},end:{line:85,column:18}}],line:69},12:{loc:{start:{line:83,column:69},end:{line:83,column:112}},type:"binary-expr",locations:[{start:{line:83,column:69},end:{line:83,column:88}},{start:{line:83,column:92},end:{line:83,column:112}}],line:83},13:{loc:{start:{line:93,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},14:{loc:{start:{line:136,column:12},end:{line:144,column:13}},type:"binary-expr",locations:[{start:{line:136,column:12},end:{line:136,column:44}},{start:{line:136,column:64},end:{line:144,column:13}}],line:136},15:{loc:{start:{line:145,column:12},end:{line:152,column:13}},type:"binary-expr",locations:[{start:{line:145,column:12},end:{line:145,column:56}},{start:{line:145,column:76},end:{line:152,column:13}}],line:145}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0,0,0],9:[0,0],10:[0,0],11:[0,0,0,0,0,0,0,0,0,0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx"],names:[],mappings:"AAqIQ,SAEE,KAFF;AArIR,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AAGtD,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB;AAmBlC,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,WAAW,MAAM;AACf,QAAI,KAAK,MAAM,OAAO,KAAK,OAAK,EAAE,OAAO,KAAK,MAAM,EAAE,GAAG;AACvD,WAAK,SAAS,EAAE,OAAO,KAAK,MAAM,EAAE,yBAAyB,EAAE,CAAC;AAChE;AAAA,IACF;AAEA,UAAM,gBAAgB,KAAK,MAAM,OAAO,MAAM,CAAC;AAC/C,UAAM,QAAuB;AAAA,MAC3B,IAAI,KAAK,MAAM;AAAA,MACf,MAAM,KAAK,MAAM;AAAA,IACnB;AAEA,QAAG,KAAK,MAAM,SAAS,cAAc;AACnC,YAAM,SAAS,KAAK,MAAM;AAC1B,UAAG,CAAC,kBAAkB,SAAS,KAAK,MAAM,IAAI,KAAK,KAAK,MAAM,cAAc,GAAG;AAC7E,cAAM,cAAc,IAAI,KAAK,MAAM,cAAc;AAAA,MACnD;AAAA,IACF;AAEA,kBAAc,KAAK,KAA2B;AAC9C,SAAK,SAAS,EAAE,OAAO,KAAK,GAAG,MAAM;AACnC,WAAK,MAAM,eAAe,aAAa;AACvC,WAAK,MAAM,aAAa;AAAA,IAC1B,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,OAA8B;AACxC,UAAM,KAAK;AACX,UAAM,QAAuB;AAAA,MAC3B,MAAM;AAAA,MACN,IAAI;AAAA,MACJ,OAAO;AAAA,IACT;AAEA,QAAG,OAAO,KAAK,MAAM,OAAO,EAAE,SAAS,GAAG;AACxC,YAAM,SAAS,OAAO,KAAK,KAAK,MAAM,OAAO,EAAE,CAAC;AAChD,YAAM,eAAe,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAE,UAAU,CAAC;AACjE,UAAI,aAAa,SAAS,GAAG;AAC3B,cAAM,cAAc,IAAI,aAAa,CAAC;AAAA,MACxC;AAAA,IACF;AACA,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,mBAAmB,YAAmC,WAA0B;AAE9E,UAAM,UAAU,UAAU;AAC1B,UAAM,UAAU,KAAK,MAAM;AAE3B,UAAM,sBAAsB,KAAK,WAAW,OAAO;AACnD,UAAM,sBAAsB,KAAK,WAAW,OAAO;AAEnD;AAAA;AAAA,MAEE,YAAY,WACT,UAAU,WAAW,MAErB,oBAAoB,QAAQ,UAAU,MAAO,IAAI,MAEjD,oBAAoB,QAAQ,KAAK,MAAM,MAAO,IAAI;AAAA,MACrD;AAEA,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,MACV,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,QAAgB;AACjC,UAAM,YAAY,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAC;AACjD,WAAO,UAAU,UAAU,CAAC;AAAA,EAC9B;AAAA,EAEA,WAAW,MAAkC;AAE3C,YAAO,MAAM;AAAA,MACX,KAAK;AACH,eAAO,CAAC;AAAA,MACV,KAAK;AAAA,MACL,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,YAAY,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MACzG,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,QAAQ,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MACrG,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,YAAY,EAAE,SAAS,SAAS,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MAC7H;AACE,eAAO,CAAC;AAAA,IACZ;AAAA,EACF;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,UAAU,KAAK,WAAW,KAAK,MAAM,IAAI;AAC/C,UAAM,SAAS,KAAK,mBAAmB,KAAK,MAAM,MAAO;AACzD,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO;AACpB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ;AAAA,UAAC;AAAA;AAAA,YACC,MAAK;AAAA,YACL,SAAS,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK,CAAC;AAAA,YAC5C,WAAU;AAAA,YACX;AAAA;AAAA,QAED;AAAA,SACF;AAAA,IAEJ;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QACpB,eAAY;AAAA,QACZ,WAAU;AAAA,QAET;AAAA;AAAA,UACD,qBAAC,SAAI,WAAU,sBACb;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAc;AACvB,uBAAK,SAAS,EAAE,IAAI,GAAG,OAAO,KAAK,CAAC;AAAA,gBACtC;AAAA;AAAA,YACF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAkC,KAAK,SAAS,EAAE,MAAM,EAAE,CAAC;AAAA;AAAA,YACxE;AAAA,YACC,KAAK,MAAM,SAAS,gBACvB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,OAAM;AAAA,gBACN,OAAO,KAAK,MAAM;AAAA,gBAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,QAAQ,EAAE,CAAC;AAAA;AAAA,YACtD;AAAA,YAEG,CAAC,kBAAkB,SAAS,KAAK,MAAM,IAAI,KAC9C;AAAA,cAAC;AAAA;AAAA,gBACC,gBAAgB;AAAA,gBAChB,OAAO,KAAK,MAAM,cAAc;AAAA,gBAChC,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,gBAAgB,EAAE,CAAC;AAAA;AAAA,YAC9D;AAAA,YAEE;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,eAAY;AAAA,gBAEX,YAAE,WAAW;AAAA;AAAA,YAChB;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"90da8e5ee6bdbe488a5f45bfae015ac94b0d70a9"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return vn=function(){return s},s}vn();class NIe extends On.Component{addLayer=(vn().s[0]++,()=>{if(vn().f[0]++,vn().s[1]++,this.props.layers.some(i=>(vn().f[1]++,vn().s[2]++,i.id===this.state.id))){vn().b[0][0]++,vn().s[3]++,this.setState({error:this.props.t("Layer ID already exists")}),vn().s[4]++;return}else vn().b[0][1]++;const e=(vn().s[5]++,this.props.layers.slice(0)),t=(vn().s[6]++,{id:this.state.id,type:this.state.type});vn().s[7]++,this.state.type!=="background"?(vn().b[1][0]++,vn().s[8]++,t.source=this.state.source,vn().s[9]++,vn().b[3][0]++,!kD.includes(this.state.type)&&(vn().b[3][1]++,this.state["source-layer"])?(vn().b[2][0]++,vn().s[10]++,t["source-layer"]=this.state["source-layer"]):vn().b[2][1]++):vn().b[1][1]++,vn().s[11]++,e.push(t),vn().s[12]++,this.setState({error:null},()=>{vn().f[2]++,vn().s[13]++,this.props.onLayersChange(e),vn().s[14]++,this.props.onOpenToggle()})});constructor(e){vn().f[3]++,vn().s[15]++,super(e);const t=(vn().s[16]++,{type:"fill",id:"",error:null});if(vn().s[17]++,Object.keys(e.sources).length>0){vn().b[4][0]++,vn().s[18]++,t.source=Object.keys(this.props.sources)[0];const i=(vn().s[19]++,vn().b[5][0]++,this.props.sources[t.source].layers||(vn().b[5][1]++,[]));vn().s[20]++,i.length>0?(vn().b[6][0]++,vn().s[21]++,t["source-layer"]=i[0]):vn().b[6][1]++}else vn().b[4][1]++;vn().s[22]++,this.state=t}componentDidUpdate(e,t){vn().f[4]++;const i=(vn().s[23]++,t.type),r=(vn().s[24]++,this.state.type),o=(vn().s[25]++,this.getSources(i)),s=(vn().s[26]++,this.getSources(r));vn().s[27]++,vn().b[8][0]++,i!==r&&(vn().b[8][1]++,t.source!=="")&&(vn().b[8][2]++,o.indexOf(t.source)>-1)&&(vn().b[8][3]++,s.indexOf(this.state.source)<0)?(vn().b[7][0]++,vn().s[28]++,this.setState({source:""})):vn().b[7][1]++}getLayersForSource(e){vn().f[5]++;const t=(vn().s[29]++,vn().b[9][0]++,this.props.sources[e]||(vn().b[9][1]++,{}));return vn().s[30]++,vn().b[10][0]++,t.layers||(vn().b[10][1]++,[])}getSources(e){switch(vn().f[6]++,vn().s[31]++,e){case"background":return vn().b[11][0]++,vn().s[32]++,[];case"hillshade":vn().b[11][1]++;case"color-relief":return vn().b[11][2]++,vn().s[33]++,Object.entries(this.props.sources).filter(([t,i])=>(vn().f[7]++,vn().s[34]++,i.type==="raster-dem")).map(([t,i])=>(vn().f[8]++,vn().s[35]++,t));case"raster":return vn().b[11][3]++,vn().s[36]++,Object.entries(this.props.sources).filter(([t,i])=>(vn().f[9]++,vn().s[37]++,i.type==="raster")).map(([t,i])=>(vn().f[10]++,vn().s[38]++,t));case"heatmap":vn().b[11][4]++;case"circle":vn().b[11][5]++;case"fill":vn().b[11][6]++;case"fill-extrusion":vn().b[11][7]++;case"line":vn().b[11][8]++;case"symbol":return vn().b[11][9]++,vn().s[39]++,Object.entries(this.props.sources).filter(([t,i])=>(vn().f[11]++,vn().s[40]++,vn().b[12][0]++,i.type==="vector"||(vn().b[12][1]++,i.type==="geojson"))).map(([t,i])=>(vn().f[12]++,vn().s[41]++,t));default:return vn().b[11][10]++,vn().s[42]++,[]}}render(){vn().f[13]++;const e=(vn().s[43]++,this.props.t),t=(vn().s[44]++,this.getSources(this.state.type)),i=(vn().s[45]++,this.getLayersForSource(this.state.source));let r;return vn().s[46]++,this.state.error?(vn().b[13][0]++,vn().s[47]++,r=ie.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,ie.jsx("a",{href:"#",onClick:()=>(vn().f[14]++,vn().s[48]++,this.setState({error:null})),className:"maputnik-modal-error-close",children:""})]})):vn().b[13][1]++,vn().s[49]++,ie.jsxs(C1,{isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Add Layer"),"data-wd-key":"modal:add-layer",className:"maputnik-add-modal",children:[r,ie.jsxs("div",{className:"maputnik-add-layer",children:[ie.jsx(Koe,{value:this.state.id,wdKey:"add-layer.layer-id",onChange:o=>{vn().f[15]++,vn().s[50]++,this.setState({id:o,error:null})}}),ie.jsx(Uoe,{value:this.state.type,wdKey:"add-layer.layer-type",onChange:o=>(vn().f[16]++,vn().s[51]++,this.setState({type:o}))}),(vn().b[14][0]++,this.state.type!=="background"&&(vn().b[14][1]++,ie.jsx(tse,{sourceIds:t,wdKey:"add-layer.layer-source-block",value:this.state.source,onChange:o=>(vn().f[17]++,vn().s[52]++,this.setState({source:o}))}))),(vn().b[15][0]++,!kD.includes(this.state.type)&&(vn().b[15][1]++,ie.jsx(nse,{sourceLayerIds:i,value:this.state["source-layer"],onChange:o=>(vn().f[18]++,vn().s[53]++,this.setState({"source-layer":o}))}))),ie.jsx(Js,{className:"maputnik-add-layer-button",onClick:this.addLayer,"data-wd-key":"add-layer",children:e("Add Layer")})]})]})}}const GIe=(vn().s[54]++,$o()(NIe));function yb(){var n="/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",e="a991ed6da2a27b46f1adbb88a645aa2ee0df375e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",statementMap:{0:{start:{line:1,column:10},end:{line:1,column:11}},1:{start:{line:3,column:2},end:{line:3,column:8}},2:{start:{line:4,column:2},end:{line:4,column:22}}},fnMap:{0:{name:"generateUniqueId",decl:{start:{line:2,column:24},end:{line:2,column:40}},loc:{start:{line:2,column:54},end:{line:5,column:1}},line:2}},branchMap:{0:{loc:{start:{line:2,column:41},end:{line:2,column:52}},type:"default-arg",locations:[{start:{line:2,column:50},end:{line:2,column:52}}],line:2}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts"],names:[],mappings:"AAGA,IAAI,MAAM;AAEV,wBAAwB,iBAAiB,SAAO,IAAI;AAClD;AACA,SAAO,SAAO;AAChB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a991ed6da2a27b46f1adbb88a645aa2ee0df375e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return yb=function(){return s},s}yb();let yQ=(yb().s[0]++,0);function Ex(n=(yb().b[0][0]++,"")){return yb().f[0]++,yb().s[1]++,yQ++,yb().s[2]++,n+yQ}function ar(){var n="/home/runner/work/maputnik/maputnik/src/libs/layer.ts",e="6a81b3c8ffc06f88598225aa1f9b90e3bb6da08e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/layer.ts",statementMap:{0:{start:{line:3,column:28},end:{line:3,column:46}},1:{start:{line:4,column:2},end:{line:8,column:5}},2:{start:{line:5,column:4},end:{line:7,column:5}},3:{start:{line:6,column:6},end:{line:6,column:45}},4:{start:{line:9,column:29},end:{line:9,column:48}},5:{start:{line:10,column:2},end:{line:14,column:5}},6:{start:{line:11,column:4},end:{line:13,column:5}},7:{start:{line:12,column:6},end:{line:12,column:46}},8:{start:{line:15,column:2},end:{line:20,column:4}},9:{start:{line:23,column:2},end:{line:59,column:3}},10:{start:{line:24,column:4},end:{line:43,column:5}},11:{start:{line:25,column:23},end:{line:31,column:7}},12:{start:{line:32,column:6},end:{line:32,column:39}},13:{start:{line:33,column:6},end:{line:35,column:7}},14:{start:{line:34,column:8},end:{line:34,column:31}},15:{start:{line:36,column:6},end:{line:36,column:22}},16:{start:{line:38,column:23},end:{line:40,column:7}},17:{start:{line:41,column:6},end:{line:41,column:32}},18:{start:{line:42,column:6},end:{line:42,column:22}},19:{start:{line:45,column:4},end:{line:58,column:5}},20:{start:{line:46,column:6},end:{line:52,column:8}},21:{start:{line:54,column:6},end:{line:57,column:8}},22:{start:{line:62,column:2},end:{line:62,column:64}},23:{start:{line:65,column:29},end:{line:65,column:56}},24:{start:{line:66,column:19},end:{line:66,column:22}},25:{start:{line:67,column:2},end:{line:74,column:3}},26:{start:{line:67,column:15},end:{line:67,column:18}},27:{start:{line:68,column:32},end:{line:68,column:61}},28:{start:{line:69,column:4},end:{line:73,column:5}},29:{start:{line:70,column:6},end:{line:70,column:25}},30:{start:{line:72,column:6},end:{line:72,column:24}},31:{start:{line:75,column:2},end:{line:75,column:20}}},fnMap:{0:{name:"changeType",decl:{start:{line:2,column:16},end:{line:2,column:26}},loc:{start:{line:2,column:43},end:{line:21,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:41},end:{line:4,column:42}},loc:{start:{line:4,column:59},end:{line:8,column:3}},line:4},2:{name:"(anonymous_2)",decl:{start:{line:10,column:42},end:{line:10,column:43}},loc:{start:{line:10,column:60},end:{line:14,column:3}},line:10},3:{name:"changeProperty",decl:{start:{line:22,column:16},end:{line:22,column:30}},loc:{start:{line:22,column:65},end:{line:60,column:1}},line:22},4:{name:"layerPrefix",decl:{start:{line:61,column:16},end:{line:61,column:27}},loc:{start:{line:61,column:34},end:{line:63,column:1}},line:61},5:{name:"findClosestCommonPrefix",decl:{start:{line:64,column:16},end:{line:64,column:39}},loc:{start:{line:64,column:53},end:{line:76,column:1}},line:64}},branchMap:{0:{loc:{start:{line:5,column:4},end:{line:7,column:5}},type:"if",locations:[{start:{line:5,column:4},end:{line:7,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:11,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:13,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:11},2:{loc:{start:{line:23,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:59,column:3}},{start:{line:44,column:9},end:{line:59,column:3}}],line:23},3:{loc:{start:{line:24,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:43,column:5}},{start:{line:37,column:11},end:{line:43,column:5}}],line:24},4:{loc:{start:{line:33,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:33,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},5:{loc:{start:{line:45,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:58,column:5}},{start:{line:53,column:11},end:{line:58,column:5}}],line:45},6:{loc:{start:{line:69,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:73,column:5}},{start:{line:71,column:11},end:{line:73,column:5}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layer.ts"],names:[],mappings:"AAAA,SAAQ,cAAa;AAId,gBAAS,WAAW,OAA2B,SAAqC;AACzF,QAAM,oBAAiD,EAAE,GAAG,MAAM,MAAM;AACxE,SAAO,KAAK,iBAAiB,EAAE,QAAQ,kBAAgB;AACrD,QAAG,EAAE,gBAAgB,OAAO,WAAW,OAAO,IAAI;AAChD,aAAO,kBAAkB,YAAiD;AAAA,IAC5E;AAAA,EACF,CAAC;AAED,QAAM,qBAAmD,EAAE,GAAG,MAAM,OAAO;AAC3E,SAAO,KAAK,kBAAkB,EAAE,QAAQ,kBAAgB;AACtD,QAAG,EAAE,gBAAgB,OAAO,YAAY,OAAO,IAAI;AACjD,aAAO,mBAAmB,YAAkD;AAAA,IAC9E;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACR;AACF;AAKO,gBAAS,eAAe,OAA2B,OAAwC,UAAkB,UAAe;AAEjI,MAAG,aAAa,QAAW;AACzB,QAAG,OAAO;AACR,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA;AAAA,QAEH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,QAChB;AAAA,MACF;AACA,aAAO,SAAS,KAAK,EAAE,QAAQ;AAG/B,UAAG,OAAO,KAAK,SAAS,KAAK,CAAC,EAAE,SAAS,GAAG;AAC1C,eAAO,SAAS,KAAK;AAAA,MACvB;AACA,aAAO;AAAA,IACT,OAAO;AACL,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA,MACL;AACA,aAAO,SAAS,QAAQ;AACxB,aAAO;AAAA,IACT;AAAA,EACF,OACK;AACH,QAAG,OAAO;AACR,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,UACd,CAAC,QAAQ,GAAG;AAAA,QACd;AAAA,MACF;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAAA,EACF;AACF;AAEO,gBAAS,YAAY,MAAc;AACxC,SAAO,KAAK,QAAQ,KAAK,GAAG,EAAE,QAAQ,KAAK,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC;AAC9D;AAEO,gBAAS,wBAAwB,QAA8B,KAAa;AACjF,QAAM,qBAAqB,YAAY,OAAO,GAAG,EAAE,EAAE;AACrD,MAAI,aAAa;AACjB,WAAS,IAAI,KAAK,IAAI,GAAG,KAAK;AAC5B,UAAM,sBAAsB,YAAY,OAAO,IAAE,CAAC,EAAE,EAAE;AACtD,QAAG,wBAAwB,oBAAoB;AAC7C,mBAAa,IAAI;AAAA,IACnB,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6a81b3c8ffc06f88598225aa1f9b90e3bb6da08e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ar=function(){return s},s}ar();function WIe(n,e){ar().f[0]++;const t=(ar().s[0]++,{...n.paint});ar().s[1]++,Object.keys(t).forEach(r=>{ar().f[1]++,ar().s[2]++,r in us["paint_"+e]?ar().b[0][1]++:(ar().b[0][0]++,ar().s[3]++,delete t[r])});const i=(ar().s[4]++,{...n.layout});return ar().s[5]++,Object.keys(i).forEach(r=>{ar().f[2]++,ar().s[6]++,r in us["layout_"+e]?ar().b[1][1]++:(ar().b[1][0]++,ar().s[7]++,delete i[r])}),ar().s[8]++,{...n,paint:t,layout:i,type:e}}function QIe(n,e,t,i){if(ar().f[3]++,ar().s[9]++,i===void 0)if(ar().b[2][0]++,ar().s[10]++,e){ar().b[3][0]++;const r=(ar().s[11]++,{...n,[e]:{...n[e]}});return ar().s[12]++,delete r[e][t],ar().s[13]++,Object.keys(r[e]).length<1?(ar().b[4][0]++,ar().s[14]++,delete r[e]):ar().b[4][1]++,ar().s[15]++,r}else{ar().b[3][1]++;const r=(ar().s[16]++,{...n});return ar().s[17]++,delete r[t],ar().s[18]++,r}else return ar().b[2][1]++,ar().s[19]++,e?(ar().b[5][0]++,ar().s[20]++,{...n,[e]:{...n[e],[t]:i}}):(ar().b[5][1]++,ar().s[21]++,{...n,[t]:i})}function R_(n){return ar().f[4]++,ar().s[22]++,n.replace(" ","-").replace("_","-").split("-")[0]}function qIe(n,e){ar().f[5]++;const t=(ar().s[23]++,R_(n[e].id));let i=(ar().s[24]++,e);ar().s[25]++;for(let r=(ar().s[26]++,e);r>0;r--){const o=(ar().s[27]++,R_(n[r-1].id));if(ar().s[28]++,o===t)ar().b[6][0]++,ar().s[29]++,i=r-1;else return ar().b[6][1]++,ar().s[30]++,i}return ar().s[31]++,i}function Ft(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",e="f68294db07afb93676beed55b7a9de47e3a7c779",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",statementMap:{0:{start:{line:23,column:24},end:{line:26,column:3}},1:{start:{line:30,column:4},end:{line:30,column:17}},2:{start:{line:31,column:4},end:{line:31,column:45}},3:{start:{line:32,column:4},end:{line:32,column:48}},4:{start:{line:33,column:4},end:{line:42,column:6}},5:{start:{line:45,column:4},end:{line:54,column:7}},6:{start:{line:56,column:17},end:{line:73,column:3}},7:{start:{line:57,column:14},end:{line:57,column:15}},8:{start:{line:58,column:22},end:{line:58,column:24}},9:{start:{line:59,column:4},end:{line:68,column:7}},10:{start:{line:60,column:26},end:{line:60,column:51}},11:{start:{line:61,column:24},end:{line:61,column:52}},12:{start:{line:62,column:6},end:{line:64,column:7}},13:{start:{line:63,column:8},end:{line:63,column:63}},14:{start:{line:65,column:6},end:{line:67,column:9}},15:{start:{line:66,column:8},end:{line:66,column:17}},16:{start:{line:69,column:4},end:{line:72,column:7}},17:{start:{line:75,column:19},end:{line:75,column:21}},18:{start:{line:76,column:41},end:{line:76,column:50}},19:{start:{line:77,column:4},end:{line:94,column:5}},20:{start:{line:77,column:17},end:{line:77,column:18}},21:{start:{line:78,column:24},end:{line:78,column:44}},22:{start:{line:79,column:28},end:{line:79,column:52}},23:{start:{line:80,column:6},end:{line:83,column:8}},24:{start:{line:84,column:20},end:{line:87,column:7}},25:{start:{line:88,column:6},end:{line:93,column:7}},26:{start:{line:89,column:26},end:{line:89,column:51}},27:{start:{line:90,column:8},end:{line:90,column:30}},28:{start:{line:92,column:8},end:{line:92,column:29}},29:{start:{line:95,column:4},end:{line:95,column:18}},30:{start:{line:98,column:22},end:{line:98,column:50}},31:{start:{line:99,column:22},end:{line:99,column:55}},32:{start:{line:100,column:4},end:{line:104,column:5}},33:{start:{line:101,column:6},end:{line:101,column:68}},34:{start:{line:103,column:6},end:{line:103,column:35}},35:{start:{line:105,column:4},end:{line:107,column:7}},36:{start:{line:110,column:22},end:{line:110,column:78}},37:{start:{line:111,column:4},end:{line:111,column:51}},38:{start:{line:114,column:4},end:{line:116,column:5}},39:{start:{line:115,column:6},end:{line:115,column:18}},40:{start:{line:118,column:18},end:{line:120,column:7}},41:{start:{line:121,column:6},end:{line:125,column:7}},42:{start:{line:122,column:8},end:{line:124,column:10}},43:{start:{line:126,column:6},end:{line:126,column:17}},44:{start:{line:128,column:24},end:{line:131,column:5}},45:{start:{line:133,column:18},end:{line:135,column:7}},46:{start:{line:136,column:6},end:{line:136,column:27}},47:{start:{line:137,column:6},end:{line:137,column:17}},48:{start:{line:139,column:23},end:{line:142,column:5}},49:{start:{line:143,column:25},end:{line:143,column:53}},50:{start:{line:144,column:4},end:{line:144,column:24}},51:{start:{line:147,column:4},end:{line:163,column:5}},52:{start:{line:148,column:31},end:{line:148,column:59}},53:{start:{line:149,column:6},end:{line:162,column:7}},54:{start:{line:150,column:23},end:{line:150,column:44}},55:{start:{line:151,column:24},end:{line:154,column:9}},56:{start:{line:155,column:25},end:{line:160,column:19}},57:{start:{line:156,column:10},end:{line:156,column:37}},58:{start:{line:157,column:10},end:{line:159,column:11}},59:{start:{line:158,column:12},end:{line:158,column:36}},60:{start:{line:161,column:8},end:{line:161,column:33}},61:{start:{line:166,column:22},end:{line:166,column:24}},62:{start:{line:167,column:14},end:{line:167,column:15}},63:{start:{line:168,column:26},end:{line:168,column:46}},64:{start:{line:169,column:4},end:{line:219,column:7}},65:{start:{line:170,column:26},end:{line:170,column:51}},66:{start:{line:171,column:6},end:{line:184,column:7}},67:{start:{line:172,column:36},end:{line:182,column:9}},68:{start:{line:176,column:47},end:{line:176,column:52}},69:{start:{line:183,column:8},end:{line:183,column:28}},70:{start:{line:185,column:6},end:{line:218,column:9}},71:{start:{line:186,column:25},end:{line:186,column:72}},72:{start:{line:187,column:27},end:{line:189,column:10}},73:{start:{line:188,column:10},end:{line:188,column:97}},74:{start:{line:190,column:32},end:{line:190,column:34}},75:{start:{line:191,column:8},end:{line:193,column:9}},76:{start:{line:192,column:10},end:{line:192,column:53}},77:{start:{line:194,column:41},end:{line:215,column:9}},78:{start:{line:216,column:8},end:{line:216,column:33}},79:{start:{line:217,column:8},end:{line:217,column:17}},80:{start:{line:220,column:14},end:{line:220,column:26}},81:{start:{line:221,column:4},end:{line:274,column:6}},82:{start:{line:277,column:27},end:{line:277,column:72}},83:{start:{line:278,column:18},end:{line:291,column:1}},84:{start:{line:279,column:18},end:{line:279,column:97}},85:{start:{line:280,column:24},end:{line:288,column:3}},86:{start:{line:281,column:29},end:{line:281,column:34}},87:{start:{line:282,column:4},end:{line:282,column:22}},88:{start:{line:282,column:15},end:{line:282,column:22}},89:{start:{line:283,column:21},end:{line:283,column:78}},90:{start:{line:283,column:55},end:{line:283,column:77}},91:{start:{line:284,column:21},end:{line:284,column:76}},92:{start:{line:284,column:55},end:{line:284,column:75}},93:{start:{line:285,column:4},end:{line:287,column:5}},94:{start:{line:286,column:6},end:{line:286,column:48}},95:{start:{line:289,column:19},end:{line:289,column:56}},96:{start:{line:289,column:47},end:{line:289,column:55}},97:{start:{line:290,column:2},end:{line:290,column:288}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:24,column:19},end:{line:24,column:20}},loc:{start:{line:24,column:25},end:{line:25,column:5}},line:24},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:21},end:{line:43,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:25},end:{line:55,column:3}},line:44},3:{name:"(anonymous_3)",decl:{start:{line:56,column:17},end:{line:56,column:18}},loc:{start:{line:56,column:23},end:{line:73,column:3}},line:56},4:{name:"(anonymous_4)",decl:{start:{line:59,column:33},end:{line:59,column:34}},loc:{start:{line:59,column:45},end:{line:68,column:5}},line:59},5:{name:"(anonymous_5)",decl:{start:{line:65,column:21},end:{line:65,column:22}},loc:{start:{line:65,column:33},end:{line:67,column:7}},line:65},6:{name:"(anonymous_6)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:18},end:{line:96,column:3}},line:74},7:{name:"(anonymous_7)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:37},end:{line:108,column:3}},line:97},8:{name:"(anonymous_8)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:32},end:{line:112,column:3}},line:109},9:{name:"(anonymous_9)",decl:{start:{line:113,column:2},end:{line:113,column:3}},loc:{start:{line:113,column:46},end:{line:145,column:3}},line:113},10:{name:"getRequiredProps",decl:{start:{line:117,column:13},end:{line:117,column:29}},loc:{start:{line:117,column:37},end:{line:127,column:5}},line:117},11:{name:"withoutLayers",decl:{start:{line:132,column:13},end:{line:132,column:26}},loc:{start:{line:132,column:34},end:{line:138,column:5}},line:132},12:{name:"(anonymous_12)",decl:{start:{line:146,column:2},end:{line:146,column:3}},loc:{start:{line:146,column:32},end:{line:164,column:3}},line:146},13:{name:"(anonymous_13)",decl:{start:{line:155,column:50},end:{line:155,column:51}},loc:{start:{line:155,column:63},end:{line:160,column:9}},line:155},14:{name:"(anonymous_14)",decl:{start:{line:165,column:2},end:{line:165,column:3}},loc:{start:{line:165,column:11},end:{line:275,column:3}},line:165},15:{name:"(anonymous_15)",decl:{start:{line:169,column:26},end:{line:169,column:27}},loc:{start:{line:169,column:38},end:{line:219,column:5}},line:169},16:{name:"(anonymous_16)",decl:{start:{line:176,column:40},end:{line:176,column:41}},loc:{start:{line:176,column:47},end:{line:176,column:52}},line:176},17:{name:"(anonymous_17)",decl:{start:{line:185,column:21},end:{line:185,column:22}},loc:{start:{line:185,column:44},end:{line:218,column:7}},line:185},18:{name:"(anonymous_18)",decl:{start:{line:187,column:50},end:{line:187,column:51}},loc:{start:{line:187,column:61},end:{line:189,column:9}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:278,column:18},end:{line:278,column:19}},loc:{start:{line:278,column:29},end:{line:291,column:1}},line:278},20:{name:"(anonymous_20)",decl:{start:{line:280,column:24},end:{line:280,column:25}},loc:{start:{line:280,column:35},end:{line:288,column:3}},line:280},21:{name:"(anonymous_21)",decl:{start:{line:283,column:44},end:{line:283,column:45}},loc:{start:{line:283,column:55},end:{line:283,column:77}},line:283},22:{name:"(anonymous_22)",decl:{start:{line:284,column:44},end:{line:284,column:45}},loc:{start:{line:284,column:55},end:{line:284,column:75}},line:284},23:{name:"(anonymous_23)",decl:{start:{line:289,column:36},end:{line:289,column:37}},loc:{start:{line:289,column:47},end:{line:289,column:55}},line:289}},branchMap:{0:{loc:{start:{line:62,column:6},end:{line:64,column:7}},type:"if",locations:[{start:{line:62,column:6},end:{line:64,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},1:{loc:{start:{line:82,column:8},end:{line:82,column:79}},type:"cond-expr",locations:[{start:{line:82,column:41},end:{line:82,column:75}},{start:{line:82,column:78},end:{line:82,column:79}}],line:82},2:{loc:{start:{line:88,column:6},end:{line:93,column:7}},type:"if",locations:[{start:{line:88,column:6},end:{line:93,column:7}},{start:{line:91,column:13},end:{line:93,column:7}}],line:88},3:{loc:{start:{line:88,column:10},end:{line:88,column:81}},type:"binary-expr",locations:[{start:{line:88,column:10},end:{line:88,column:23}},{start:{line:88,column:27},end:{line:88,column:81}}],line:88},4:{loc:{start:{line:100,column:4},end:{line:104,column:5}},type:"if",locations:[{start:{line:100,column:4},end:{line:104,column:5}},{start:{line:102,column:11},end:{line:104,column:5}}],line:100},5:{loc:{start:{line:111,column:11},end:{line:111,column:50}},type:"cond-expr",locations:[{start:{line:111,column:34},end:{line:111,column:38}},{start:{line:111,column:41},end:{line:111,column:50}}],line:111},6:{loc:{start:{line:114,column:4},end:{line:116,column:5}},type:"if",locations:[{start:{line:114,column:4},end:{line:116,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},7:{loc:{start:{line:121,column:6},end:{line:125,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:125,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},8:{loc:{start:{line:143,column:27},end:{line:143,column:52}},type:"binary-expr",locations:[{start:{line:143,column:27},end:{line:143,column:38}},{start:{line:143,column:42},end:{line:143,column:52}}],line:143},9:{loc:{start:{line:147,column:4},end:{line:163,column:5}},type:"if",locations:[{start:{line:147,column:4},end:{line:163,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},10:{loc:{start:{line:149,column:6},end:{line:162,column:7}},type:"if",locations:[{start:{line:149,column:6},end:{line:162,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:149},11:{loc:{start:{line:149,column:10},end:{line:149,column:51}},type:"binary-expr",locations:[{start:{line:149,column:10},end:{line:149,column:26}},{start:{line:149,column:30},end:{line:149,column:51}}],line:149},12:{loc:{start:{line:157,column:10},end:{line:159,column:11}},type:"if",locations:[{start:{line:157,column:10},end:{line:159,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:157},13:{loc:{start:{line:157,column:14},end:{line:157,column:68}},type:"binary-expr",locations:[{start:{line:157,column:14},end:{line:157,column:32}},{start:{line:157,column:36},end:{line:157,column:68}}],line:157},14:{loc:{start:{line:171,column:6},end:{line:184,column:7}},type:"if",locations:[{start:{line:171,column:6},end:{line:184,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:171},15:{loc:{start:{line:178,column:22},end:{line:178,column:98}},type:"binary-expr",locations:[{start:{line:178,column:22},end:{line:178,column:57}},{start:{line:178,column:61},end:{line:178,column:98}}],line:178},16:{loc:{start:{line:188,column:17},end:{line:188,column:96}},type:"binary-expr",locations:[{start:{line:188,column:17},end:{line:188,column:29}},{start:{line:188,column:33},end:{line:188,column:62}},{start:{line:188,column:66},end:{line:188,column:96}}],line:188},17:{loc:{start:{line:191,column:8},end:{line:193,column:9}},type:"if",locations:[{start:{line:191,column:8},end:{line:193,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:191},18:{loc:{start:{line:198,column:52},end:{line:198,column:153}},type:"binary-expr",locations:[{start:{line:198,column:52},end:{line:198,column:69}},{start:{line:198,column:73},end:{line:198,column:112}},{start:{line:198,column:116},end:{line:198,column:153}}],line:198},19:{loc:{start:{line:199,column:53},end:{line:199,column:105}},type:"binary-expr",locations:[{start:{line:199,column:53},end:{line:199,column:84}},{start:{line:199,column:88},end:{line:199,column:105}}],line:199},20:{loc:{start:{line:206,column:25},end:{line:206,column:43}},type:"binary-expr",locations:[{start:{line:206,column:25},end:{line:206,column:37}},{start:{line:206,column:41},end:{line:206,column:43}}],line:206},21:{loc:{start:{line:251,column:26},end:{line:251,column:96}},type:"cond-expr",locations:[{start:{line:251,column:69},end:{line:251,column:82}},{start:{line:251,column:85},end:{line:251,column:96}}],line:251},22:{loc:{start:{line:282,column:4},end:{line:282,column:22}},type:"if",locations:[{start:{line:282,column:4},end:{line:282,column:22}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:282},23:{loc:{start:{line:285,column:4},end:{line:287,column:5}},type:"if",locations:[{start:{line:285,column:4},end:{line:287,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:285},24:{loc:{start:{line:285,column:8},end:{line:285,column:67}},type:"binary-expr",locations:[{start:{line:285,column:8},end:{line:285,column:23}},{start:{line:285,column:27},end:{line:285,column:42}},{start:{line:285,column:46},end:{line:285,column:67}}],line:285}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0,0],17:[0,0],18:[0,0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx"],names:[],mappings:"AA+NoB,cAoEd,YApEc;AA/NpB,OAAO,WAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,YAAY;AACnB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OAEK;AACP;AAAA,EACE;AAAA,EACA;AAAA,OACK;AAEP,OAAO,oBAAoB;AAC3B,OAAO,mBAAmB;AAC1B,OAAO,cAAc;AAGrB,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB,mBAAmB;AACrD,SAA+B,uBAAuB;AAwBtD,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,kBAAkB,MAAM,UAAU;AACvC,SAAK,qBAAqB,MAAM,UAAU;AAC1C,SAAK,QAAQ;AAAA,MACX,iBAAiB,CAAC;AAAA,MAClB,sBAAsB;AAAA,MACtB,MAAM;AAAA,QACJ,KAAK,CAAC,iBAAiB;AAAA,MACzB;AAAA,MACA,QAAQ;AAAA,QACN,KAAK;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAAA,EAEA,YAAY,WAAmB;AAC7B,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,QACJ,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,iBAAiB;AAAA,MACjC;AAAA,MACA,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,KAAK,MAAM,OAAO,SAAS;AAAA,MAC3C;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,eAAe,MAAM;AACnB,QAAI,MAAM;AAEV,UAAM,YAAqC,CAAC;AAE5C,SAAK,cAAc,EAAE,QAAQ,YAAU;AACrC,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,YAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAG7C,UAAI,OAAO,SAAS,GAAG;AACrB,kBAAU,SAAS,IAAI,KAAK,MAAM;AAAA,MACpC;AAEA,aAAO,QAAQ,CAAC,WAAW;AACzB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,MACjB,sBAAsB,CAAC,KAAK,MAAM;AAAA,IACpC,CAAC;AAAA,EACH;AAAA,EAEA,gBAA0D;AACxD,UAAM,SAAS,CAAC;AAChB,UAAM,eAAe,oBAAI,IAAI;AAE7B,aAAS,IAAI,GAAG,IAAI,KAAK,MAAM,OAAO,QAAQ,KAAK;AACjD,YAAM,YAAY,KAAK,MAAM,OAAO,CAAC;AACrC,YAAM,gBAAgB,KAAK,MAAM,OAAO,IAAE,CAAC;AAC3C,mBAAa;AAAA,QAAI,UAAU;AAAA,QACzB,aAAa,IAAI,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,IAAI,IAAI;AAAA,MACxE;AACA,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,KAAK,eAAe,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,CAAC;AAAA,MACpE;AACA,UAAG,iBAAiB,YAAY,cAAc,EAAE,KAAK,YAAY,MAAM,EAAE,GAAG;AAC1E,cAAM,YAAY,OAAO,OAAO,SAAS,CAAC;AAC1C,kBAAU,KAAK,KAAK;AAAA,MACtB,OAAO;AACL,eAAO,KAAK,CAAC,KAAK,CAAC;AAAA,MACrB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,iBAAiB,aAAqB,KAAa;AACjD,UAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAC7C,UAAM,YAAY,EAAE,GAAG,KAAK,MAAM,gBAAgB;AAClD,QAAG,aAAa,KAAK,MAAM,iBAAiB;AAC1C,gBAAU,SAAS,IAAI,CAAC,KAAK,MAAM,gBAAgB,SAAS;AAAA,IAC9D,OAAO;AACL,gBAAU,SAAS,IAAI;AAAA,IACzB;AACA,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,aAAqB,KAAa;AAC5C,UAAM,YAAY,KAAK,MAAM,gBAAgB,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG,CAAC;AACzE,WAAO,cAAc,SAAY,OAAO;AAAA,EAC1C;AAAA,EAEA,sBAAuB,WAAoC,WAAoC;AAE7F,QAAI,KAAK,UAAU,WAAW;AAC5B,aAAO;AAAA,IACT;AAIA,aAAS,iBAAiB,OAA2B;AACnD,YAAM,MAAiD;AAAA,QACrD,IAAI,MAAM;AAAA,MACZ;AAEA,UAAI,MAAM,QAAQ;AAChB,YAAI,SAAS;AAAA,UACX,YAAY,MAAM,OAAO;AAAA,QAC3B;AAAA,MACF;AACA,aAAO;AAAA,IACT;AACA,UAAM,cAAc,OAAO;AAAA,MACzB,UAAU,OAAO,IAAI,gBAAgB;AAAA,MACrC,KAAK,MAAM,OAAO,IAAI,gBAAgB;AAAA,IACxC;AAEA,aAAS,cAAc,OAAgC;AACrD,YAAM,MAAM;AAAA,QACV,GAAG;AAAA,MACL;AACA,aAAO,IAAI,QAAQ;AACnB,aAAO;AAAA,IACT;AAIA,UAAM,aAAa,OAAO;AAAA,MACxB,cAAc,KAAK,KAAK;AAAA,MACxB,cAAc,SAAS;AAAA,IACzB;AAEA,UAAM,eAAe,EAAE,eAAe;AACtC,WAAO;AAAA,EACT;AAAA,EAEA,mBAAoB,WAAoC;AACtD,QAAI,UAAU,uBAAuB,KAAK,MAAM,oBAAoB;AAClE,YAAM,mBAAmB,KAAK,gBAAgB;AAC9C,UAAI,oBAAoB,iBAAiB,MAAM;AAC7C,cAAM,SAAS,iBAAiB;AAChC,cAAM,UAAU;AAAA,UACd,MAAM,KAAK,mBAAmB;AAAA,UAC9B,WAAW;AAAA,QACb;AACA,cAAM,WAAW,IAAI,qBAAqB,aAAW;AACnD,mBAAS,UAAU,MAAM;AACzB,cAAI,QAAQ,SAAS,KAAK,QAAQ,CAAC,EAAE,oBAAoB,GAAG;AAC1D,mBAAO,eAAe;AAAA,UACxB;AAAA,QACF,GAAG,OAAO;AAEV,iBAAS,QAAQ,MAAM;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AAEP,UAAM,YAA2B,CAAC;AAClC,QAAI,MAAM;AACV,UAAM,gBAAgB,KAAK,cAAc;AACzC,kBAAc,QAAQ,YAAU;AAC9B,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,UAAG,OAAO,SAAS,GAAG;AACpB,cAAM,MAAM;AAAA,UAAC;AAAA;AAAA,YACX,eAAa,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAAA,YACxC,iBAAe,OAAO,IAAI,OAAK,EAAE,GAAG,EAAE,KAAK,GAAG;AAAA,YAE9C,OAAO;AAAA,YACP,UAAU,CAAC,KAAK,YAAY,aAAa,GAAG,KAAK,QAAQ,KAAK,MAAM;AAAA,YACpE,gBAAgB,KAAK,iBAAiB,KAAK,MAAM,aAAa,GAAG;AAAA;AAAA,UAH5D,SAAS,WAAW,IAAI,GAAG;AAAA,QAIlC;AACA,kBAAU,KAAK,GAAG;AAAA,MACpB;AAEA,aAAO,QAAQ,CAAC,OAAO,eAAe;AACpC,cAAM,WAAW,wBAAwB,KAAK,MAAM,QAAQ,GAAG;AAE/D,cAAM,aAAa,KAAK,MAAM,OAAO,KAAK,WAAS;AACjD,iBACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS;AAAA,QAE/B,CAAC;AAED,cAAM,kBAAgD,CAAC;AACvD,YAAI,QAAQ,KAAK,MAAM,oBAAoB;AACzC,0BAAgB,MAAM,KAAK;AAAA,QAC7B;AAEA,cAAM,WAAW;AAAA,UAAC;AAAA;AAAA,YAChB,WAAW,WAAW;AAAA,cACpB,sCAAsC,OAAO,SAAS,KAAK,KAAK,YAAY,aAAa,QAAQ,KAAK,QAAQ,KAAK,MAAM;AAAA,cACzH,uCAAuC,cAAc,OAAO,SAAS,KAAK,OAAO,SAAS;AAAA,cAC1F,mCAAmC,CAAC,CAAC;AAAA,YACvC,CAAC;AAAA,YAED,IAAI,MAAM;AAAA,YACV,SAAS,MAAM;AAAA,YACf,YAAY;AAAA,YACZ,WAAW,MAAM;AAAA,YACjB,aAAa,MAAM,UAAU,CAAC,GAAG;AAAA,YACjC,YAAY,QAAQ,KAAK,MAAM;AAAA,YAC/B,eAAe,KAAK,MAAM;AAAA,YAC1B,gBAAgB,KAAK,MAAM,gBAAgB,KAAK,IAAI;AAAA,YACpD,aAAa,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,YAC7C,yBAAyB,KAAK,MAAM,wBAAwB,KAAK,IAAI;AAAA,YACpE,GAAG;AAAA;AAAA,UAXC,MAAM;AAAA,QAYb;AACA,kBAAU,KAAK,QAAQ;AACvB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,UAAM,IAAI,KAAK,MAAM;AAErB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAY;AAAA,QACZ,MAAK;AAAA,QACL,cAAY,EAAE,aAAa;AAAA,QAC3B,KAAK,KAAK;AAAA,QAEV;AAAA;AAAA,YAAC;AAAA;AAAA,cAEC,QAAQ,KAAK,MAAM;AAAA,cACnB,SAAS,KAAK,MAAM;AAAA,cACpB,QAAQ,KAAK,MAAM,OAAO;AAAA,cAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,cAC/C,gBAAgB,KAAK,MAAM;AAAA;AAAA,YALtB,KAAK,MAAM,KAAK;AAAA,UAMvB;AAAA,UACA,qBAAC,YAAO,WAAU,8BAChB;AAAA,gCAAC,UAAK,WAAU,oCAAoC,YAAE,QAAQ,GAAE;AAAA,YAChE,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,IAAG;AAAA,gBACH,eAAY;AAAA,gBACZ,SAAS,KAAK;AAAA,gBACd,WAAU;AAAA,gBACT,eAAK,MAAM,yBAAyB,OACnC,EAAE,UAAU,IAEZ,EAAE,QAAQ;AAAA;AAAA,YAEd,GACF,GACF;AAAA,YACA,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,SAAS,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,gBAC1C,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACT,YAAE,WAAW;AAAA;AAAA,YAChB,GACF,GACF;AAAA,aACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,cAAY,EAAE,aAAa;AAAA,cAE3B,8BAAC,QAAG,WAAU,iCACX,qBACH;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AAMvE,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,UAAU,WAAW,UAAU,eAAe,EAAE,sBAAsB,EAAE,UAAU,EAAE,EAAE,CAAC,CAAC;AAE9F,QAAM,gBAAgB,CAAC,UAAwB;AAC7C,UAAM,EAAC,QAAQ,KAAI,IAAI;AACvB,QAAI,CAAC,KAAM;AAEX,UAAM,WAAW,MAAM,OAAO,UAAU,WAAS,MAAM,OAAO,OAAO,EAAE;AACvE,UAAM,WAAW,MAAM,OAAO,UAAU,WAAS,MAAM,OAAO,KAAK,EAAE;AAErE,QAAI,aAAa,MAAM,aAAa,MAAM,aAAa,UAAU;AAC/D,YAAM,YAAY,EAAC,UAAU,SAAQ,CAAC;AAAA,IACxC;AAAA,EACF;AAEA,QAAM,WAAW,MAAM,OAAO,IAAI,WAAS,MAAM,EAAE;AAEnD,SACE,oBAAC,cAAW,SAAkB,oBAAoB,eAAe,WAAW,eAC1E,8BAAC,mBAAgB,OAAO,UAAU,UAAU,6BAC1C,8BAAC,sBAAoB,GAAG,OAAO,GACjC,GACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f68294db07afb93676beed55b7a9de47e3a7c779"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ft=function(){return s},s}Ft();class YIe extends On.Component{static defaultProps=(Ft().s[0]++,{onLayerSelect:()=>{Ft().f[0]++}});selectedItemRef;scrollContainerRef;constructor(e){Ft().f[1]++,Ft().s[1]++,super(e),Ft().s[2]++,this.selectedItemRef=On.createRef(),Ft().s[3]++,this.scrollContainerRef=On.createRef(),Ft().s[4]++,this.state={collapsedGroups:{},areAllGroupsExpanded:!1,keys:{add:+Ex()},isOpen:{add:!1}}}toggleModal(e){Ft().f[2]++,Ft().s[5]++,this.setState({keys:{...this.state.keys,[e]:+Ex()},isOpen:{...this.state.isOpen,[e]:!this.state.isOpen[e]}})}toggleLayers=(Ft().s[6]++,()=>{Ft().f[3]++;let e=(Ft().s[7]++,0);const t=(Ft().s[8]++,{});Ft().s[9]++,this.groupedLayers().forEach(i=>{Ft().f[4]++;const r=(Ft().s[10]++,R_(i[0].id)),o=(Ft().s[11]++,[r,e].join("-"));Ft().s[12]++,i.length>1?(Ft().b[0][0]++,Ft().s[13]++,t[o]=this.state.areAllGroupsExpanded):Ft().b[0][1]++,Ft().s[14]++,i.forEach(s=>{Ft().f[5]++,Ft().s[15]++,e+=1})}),Ft().s[16]++,this.setState({collapsedGroups:t,areAllGroupsExpanded:!this.state.areAllGroupsExpanded})});groupedLayers(){Ft().f[6]++;const e=(Ft().s[17]++,[]),t=(Ft().s[18]++,new Map);Ft().s[19]++;for(let i=(Ft().s[20]++,0);i<this.props.layers.length;i++){const r=(Ft().s[21]++,this.props.layers[i]),o=(Ft().s[22]++,this.props.layers[i-1]);Ft().s[23]++,t.set(r.id,t.has(r.id)?(Ft().b[1][0]++,t.get(r.id)+1):(Ft().b[1][1]++,0));const s=(Ft().s[24]++,{...r,key:`layers-list-${r.id}-${t.get(r.id)}`});if(Ft().s[25]++,Ft().b[3][0]++,o&&(Ft().b[3][1]++,R_(o.id)==R_(s.id))){Ft().b[2][0]++;const a=(Ft().s[26]++,e[e.length-1]);Ft().s[27]++,a.push(s)}else Ft().b[2][1]++,Ft().s[28]++,e.push([s])}return Ft().s[29]++,e}toggleLayerGroup(e,t){Ft().f[7]++;const i=(Ft().s[30]++,[e,t].join("-")),r=(Ft().s[31]++,{...this.state.collapsedGroups});Ft().s[32]++,i in this.state.collapsedGroups?(Ft().b[4][0]++,Ft().s[33]++,r[i]=!this.state.collapsedGroups[i]):(Ft().b[4][1]++,Ft().s[34]++,r[i]=!1),Ft().s[35]++,this.setState({collapsedGroups:r})}isCollapsed(e,t){Ft().f[8]++;const i=(Ft().s[36]++,this.state.collapsedGroups[[e,t].join("-")]);return Ft().s[37]++,i===void 0?(Ft().b[5][0]++,!0):(Ft().b[5][1]++,i)}shouldComponentUpdate(e,t){if(Ft().f[9]++,Ft().s[38]++,this.state!==t)return Ft().b[6][0]++,Ft().s[39]++,!0;Ft().b[6][1]++;function i(c){Ft().f[10]++;const h=(Ft().s[40]++,{id:c.id});return Ft().s[41]++,c.layout?(Ft().b[7][0]++,Ft().s[42]++,h.layout={visibility:c.layout.visibility}):Ft().b[7][1]++,Ft().s[43]++,h}const r=(Ft().s[44]++,t9.isEqual(e.layers.map(i),this.props.layers.map(i)));function o(c){Ft().f[11]++;const h=(Ft().s[45]++,{...c});return Ft().s[46]++,delete h.layers,Ft().s[47]++,h}const s=(Ft().s[48]++,t9.isEqual(o(this.props),o(e))),a=(Ft().s[49]++,Ft().b[8][0]++,!(r&&(Ft().b[8][1]++,s)));return Ft().s[50]++,a}componentDidUpdate(e){if(Ft().f[12]++,Ft().s[51]++,e.selectedLayerIndex!==this.props.selectedLayerIndex){Ft().b[9][0]++;const t=(Ft().s[52]++,this.selectedItemRef.current);if(Ft().s[53]++,Ft().b[11][0]++,t&&(Ft().b[11][1]++,t.node)){Ft().b[10][0]++;const i=(Ft().s[54]++,t.node),r=(Ft().s[55]++,{root:this.scrollContainerRef.current,threshold:1}),o=(Ft().s[56]++,new IntersectionObserver(s=>{Ft().f[13]++,Ft().s[57]++,o.unobserve(i),Ft().s[58]++,Ft().b[13][0]++,s.length>0&&(Ft().b[13][1]++,s[0].intersectionRatio<1)?(Ft().b[12][0]++,Ft().s[59]++,i.scrollIntoView()):Ft().b[12][1]++},r));Ft().s[60]++,o.observe(i)}else Ft().b[10][1]++}else Ft().b[9][1]++}render(){Ft().f[14]++;const e=(Ft().s[61]++,[]);let t=(Ft().s[62]++,0);const i=(Ft().s[63]++,this.groupedLayers());Ft().s[64]++,i.forEach(o=>{Ft().f[15]++;const s=(Ft().s[65]++,R_(o[0].id));if(Ft().s[66]++,o.length>1){Ft().b[14][0]++;const a=(Ft().s[67]++,ie.jsx($Ee,{"data-wd-key":[s,t].join("-"),"aria-controls":o.map(c=>(Ft().f[16]++,Ft().s[68]++,c.key)).join(" "),title:s,isActive:(Ft().b[15][0]++,!this.isCollapsed(s,t)||(Ft().b[15][1]++,t===this.props.selectedLayerIndex)),onActiveToggle:this.toggleLayerGroup.bind(this,s,t)},`group-${s}-${t}`));Ft().s[69]++,e.push(a)}else Ft().b[14][1]++;Ft().s[70]++,o.forEach((a,c)=>{Ft().f[17]++;const h=(Ft().s[71]++,qIe(this.props.layers,t)),m=(Ft().s[72]++,this.props.errors.find(x=>(Ft().f[18]++,Ft().s[73]++,Ft().b[16][0]++,x.parsed&&(Ft().b[16][1]++,x.parsed.type==="layer")&&(Ft().b[16][2]++,x.parsed.data.index==t)))),y=(Ft().s[74]++,{});Ft().s[75]++,t===this.props.selectedLayerIndex?(Ft().b[17][0]++,Ft().s[76]++,y.ref=this.selectedItemRef):Ft().b[17][1]++;const M=(Ft().s[77]++,ie.jsx(HEe,{className:Yg({"maputnik-layer-list-item-collapsed":(Ft().b[18][0]++,o.length>1&&(Ft().b[18][1]++,this.isCollapsed(s,h))&&(Ft().b[18][2]++,t!==this.props.selectedLayerIndex)),"maputnik-layer-list-item-group-last":(Ft().b[19][0]++,c==o.length-1&&(Ft().b[19][1]++,o.length>1)),"maputnik-layer-list-item--error":!!m}),id:a.key,layerId:a.id,layerIndex:t,layerType:a.type,visibility:(Ft().b[20][0]++,a.layout||(Ft().b[20][1]++,{})).visibility,isSelected:t===this.props.selectedLayerIndex,onLayerSelect:this.props.onLayerSelect,onLayerDestroy:this.props.onLayerDestroy?.bind(this),onLayerCopy:this.props.onLayerCopy.bind(this),onLayerVisibilityToggle:this.props.onLayerVisibilityToggle.bind(this),...y},a.key));Ft().s[78]++,e.push(M),Ft().s[79]++,t+=1})});const r=(Ft().s[80]++,this.props.t);return Ft().s[81]++,ie.jsxs("section",{className:"maputnik-layer-list","data-wd-key":"layer-list",role:"complementary","aria-label":r("Layers list"),ref:this.scrollContainerRef,children:[ie.jsx(GIe,{layers:this.props.layers,sources:this.props.sources,isOpen:this.state.isOpen.add,onOpenToggle:this.toggleModal.bind(this,"add"),onLayersChange:this.props.onLayersChange},this.state.keys.add),ie.jsxs("header",{className:"maputnik-layer-list-header",children:[ie.jsx("span",{className:"maputnik-layer-list-header-title",children:r("Layers")}),ie.jsx("span",{className:"maputnik-space"}),ie.jsx("div",{className:"maputnik-default-property",children:ie.jsx("div",{className:"maputnik-multibutton",children:ie.jsx("button",{id:"skip-target-layer-list","data-wd-key":"skip-target-layer-list",onClick:this.toggleLayers,className:"maputnik-button",children:this.state.areAllGroupsExpanded===!0?(Ft().b[21][0]++,r("Collapse")):(Ft().b[21][1]++,r("Expand"))})})}),ie.jsx("div",{className:"maputnik-default-property",children:ie.jsx("div",{className:"maputnik-multibutton",children:ie.jsx("button",{onClick:this.toggleModal.bind(this,"add"),"data-wd-key":"layer-list:add-layer",className:"maputnik-button maputnik-button-selected",children:r("Add Layer")})})})]}),ie.jsx("div",{role:"navigation","aria-label":r("Layers list"),children:ie.jsx("ul",{className:"maputnik-layer-list-container",children:e})})]})}}const $Ie=(Ft().s[82]++,$o()(YIe));Ft().s[83]++;const VIe=n=>{Ft().f[19]++;const e=(Ft().s[84]++,CSe(bSe(MK,{activationConstraint:{distance:5}})));Ft().s[85]++;const t=r=>{Ft().f[20]++;const{active:o,over:s}=(Ft().s[86]++,r);if(Ft().s[87]++,s)Ft().b[22][1]++;else{Ft().b[22][0]++,Ft().s[88]++;return}const a=(Ft().s[89]++,n.layers.findIndex(h=>(Ft().f[21]++,Ft().s[90]++,h.id===o.id))),c=(Ft().s[91]++,n.layers.findIndex(h=>(Ft().f[22]++,Ft().s[92]++,h.id===s.id)));Ft().s[93]++,Ft().b[24][0]++,a!==-1&&(Ft().b[24][1]++,c!==-1)&&(Ft().b[24][2]++,a!==c)?(Ft().b[23][0]++,Ft().s[94]++,n.onMoveLayer({oldIndex:a,newIndex:c})):Ft().b[23][1]++},i=(Ft().s[95]++,n.layers.map(r=>(Ft().f[23]++,Ft().s[96]++,r.id)));return Ft().s[97]++,ie.jsx(wEe,{sensors:e,collisionDetection:SSe,onDragEnd:t,children:ie.jsx(LEe,{items:i,strategy:UEe,children:ie.jsx($Ie,{...n})})})};var x8,vQ;function ise(){if(vQ)return x8;vQ=1;var n={},e="a menu outside a mounted Wrapper with an id, or a menu that does not exist";function t(s,a){n[s]=a}function i(s){delete n[s]}function r(s,a){var c=n[s];if(!c)throw new Error("Cannot open "+e);c.openMenu(a)}function o(s,a){var c=n[s];if(!c)throw new Error("Cannot close "+e);c.closeMenu(a)}return x8={registerManager:t,unregisterManager:i,openMenu:r,closeMenu:o},x8}var M8,bQ;function HIe(){if(bQ)return M8;bQ=1;function n(r){r=r||{};var o=r.keybindings||{};this._settings={keybindings:{next:o.next||{keyCode:40},prev:o.prev||{keyCode:38},first:o.first,last:o.last},wrap:r.wrap,stringSearch:r.stringSearch,stringSearchDelay:800},this._keybindingsLookup=[];var s,a;for(s in this._settings.keybindings)a=this._settings.keybindings[s],a&&[].concat(a).forEach((function(c){c.metaKey=c.metaKey||!1,c.ctrlKey=c.ctrlKey||!1,c.altKey=c.altKey||!1,c.shiftKey=c.shiftKey||!1,this._keybindingsLookup.push({action:s,eventMatcher:c})}).bind(this));this._searchString="",this._members=[],r.members&&this.setMembers(r.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}n.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},n.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},n.prototype._handleKeydownEvent=function(r){var o=this._getActiveElementIndex();if(o!==-1){var s=!1;this._keybindingsLookup.forEach((function(a){if(e(a.eventMatcher,r))switch(s=!0,r.preventDefault(),a.action){case"next":this.moveFocusForward();break;case"prev":this.moveFocusBack();break;case"first":this.moveFocusToFirst();break;case"last":this.moveFocusToLast();break;default:return}}).bind(this)),s||this._handleUnboundKey(r)}},n.prototype.moveFocusForward=function(){var r=this._getActiveElementIndex(),o;return r<this._members.length-1?o=r+1:this._settings.wrap?o=0:o=r,this.focusNodeAtIndex(o),o},n.prototype.moveFocusBack=function(){var r=this._getActiveElementIndex(),o;return r>0?o=r-1:this._settings.wrap?o=this._members.length-1:o=r,this.focusNodeAtIndex(o),o},n.prototype.moveFocusToFirst=function(){this.focusNodeAtIndex(0)},n.prototype.moveFocusToLast=function(){this.focusNodeAtIndex(this._members.length-1)},n.prototype._handleUnboundKey=function(r){if(this._settings.stringSearch){if(this._searchString!==""&&(r.key===" "||r.keyCode===32))return r.preventDefault(),-1;if(!t(r.keyCode)||r.ctrlKey||r.metaKey||r.altKey)return-1;r.preventDefault(),this._addToSearchString(String.fromCharCode(r.keyCode)),this._runStringSearch()}},n.prototype._clearSearchString=function(){this._searchString=""},n.prototype._addToSearchString=function(r){this._searchString+=r.toLowerCase()},n.prototype._startSearchStringRefreshTimer=function(){var r=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){r._clearSearchString()},this._settings.stringSearchDelay)},n.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},n.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},n.prototype.moveFocusByString=function(r){for(var o,s=0,a=this._members.length;s<a;s++)if(o=this._members[s],!!o.text&&o.text.indexOf(r)===0)return i(o.node)},n.prototype._findIndexOfNode=function(r){for(var o=0,s=this._members.length;o<s;o++)if(this._members[o].node===r)return o;return-1},n.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},n.prototype.focusNodeAtIndex=function(r){var o=this._members[r];return o&&i(o.node),this},n.prototype.addMember=function(r,o){var s=r.node||r,a=r.text||s.getAttribute("data-focus-group-text")||s.textContent||"";this._checkNode(s);var c=a.replace(/[\W_]/g,"").toLowerCase(),h={node:s,text:c};return o!=null?this._members.splice(o,0,h):this._members.push(h),this},n.prototype.removeMember=function(r){var o=typeof r=="number"?r:this._findIndexOfNode(r);if(o!==-1)return this._members.splice(o,1),this},n.prototype.clearMembers=function(){return this._members=[],this},n.prototype.setMembers=function(r){this.clearMembers();for(var o=0,s=r.length;o<s;o++)this.addMember(r[o]);return this},n.prototype.getMembers=function(){return this._members},n.prototype._checkNode=function(r){if(!r.nodeType||r.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return r};function e(r,o){for(var s in r)if(o[s]!==void 0&&r[s]!==o[s])return!1;return!0}function t(r){return r>=65&&r<=90}function i(r){!r||!r.focus||(r.focus(),r.tagName.toLowerCase()==="input"&&r.select())}return M8=function(o){return new n(o)},M8}var w8,CQ;function ZIe(){if(CQ)return w8;CQ=1;var n=HIe(),e=ise(),t={wrap:!0,stringSearch:!0},i={init:function(c){this.updateOptions(c),this.handleBlur=r.bind(this),this.handleSelection=o.bind(this),this.handleMenuKey=s.bind(this),this.focusGroup=n(t),this.button=null,this.menu=null,this.isOpen=!1},updateOptions:function(c){var h=this.options;this.options=c||this.options||{},typeof this.options.closeOnSelection>"u"&&(this.options.closeOnSelection=!0),typeof this.options.closeOnBlur>"u"&&(this.options.closeOnBlur=!0),this.options.id&&e.registerManager(this.options.id,this),h&&h.id&&h.id!==this.options.id&&e.unregisterManager(this.options.id,this)},focusItem:function(c){this.focusGroup.focusNodeAtIndex(c)},addItem:function(c){this.focusGroup.addMember(c)},clearItems:function(){this.focusGroup.clearMembers()},handleButtonNonArrowKey:function(c){this.focusGroup._handleUnboundKey(c)},destroy:function(){this.button=null,this.menu=null,this.focusGroup.deactivate(),clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},update:function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen}),this.options.onMenuToggle&&this.options.onMenuToggle({isOpen:this.isOpen})},openMenu:function(c){if(!this.isOpen&&(c=c||{},c.focusMenu===void 0&&(c.focusMenu=!0),this.isOpen=!0,this.update(),this.focusGroup.activate(),c.focusMenu)){var h=this;this.moveFocusTimer=setTimeout(function(){h.focusItem(0)},0)}},closeMenu:function(c){this.isOpen&&(c=c||{},this.isOpen=!1,this.update(),c.focusButton&&this.button.ref.current.focus())},toggleMenu:function(c,h){c=c||{},h=h||{},this.isOpen?this.closeMenu(c):this.openMenu(h)}};function r(){var a=this;a.blurTimer=setTimeout(function(){if(a.button){var c=a.button.ref.current;if(c){var h=c.ownerDocument.activeElement;if(!(c&&h===c)){var m=a.menu.ref.current;if(m===h){a.focusItem(0);return}m&&m.contains(h)||a.isOpen&&a.closeMenu({focusButton:!1})}}}},0)}function o(a,c){this.options.closeOnSelection&&this.closeMenu({focusButton:!0}),this.options.onSelection&&this.options.onSelection(a,c)}function s(a){if(this.isOpen)switch(a.key){case"Escape":a.preventDefault(),this.closeMenu({focusButton:!0});break;case"Home":a.preventDefault(),this.focusGroup.moveFocusToFirst();break;case"End":a.preventDefault(),this.focusGroup.moveFocusToLast();break}}return w8=function(a){var c=Object.create(i);return c.init(a),c},w8}var S8,_Q;function O6(){if(_Q)return S8;_Q=1;var n=Ya(),e=n.createContext();return S8=e,S8}var E8,xQ;function B6(){if(xQ)return E8;xQ=1;var n=b1();return E8={refType:n.oneOfType([n.func,n.shape({current:n.elementType})])},E8}var O8,MQ;function I6(){return MQ||(MQ=1,O8=function(n,e,t){t=t||{};for(var i in e)e.hasOwnProperty(i)&&(t[i]||(n[i]=e[i]))}),O8}var B8,wQ;function XIe(){if(wQ)return B8;wQ=1;function n(x,k){if(!(x instanceof k))throw new TypeError("Cannot call a class as a function")}function e(x,k){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:x}function t(x,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);x.prototype=Object.create(k&&k.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(x,k):x.__proto__=k)}var i=Ya(),r=b1(),o=ZIe(),s=O6(),a=B6(),c=a.refType,h=I6(),m={children:r.node.isRequired,forwardedRef:c,onMenuToggle:r.func,onSelection:r.func,closeOnSelection:r.bool,closeOnBlur:r.bool,tag:r.string},y=function(k){return{onMenuToggle:k.onMenuToggle,onSelection:k.onSelection,closeOnSelection:k.closeOnSelection,closeOnBlur:k.closeOnBlur,id:k.id}},M=(function(x){t(k,x);function k(P){n(this,k);var F=e(this,x.call(this,P));return F.manager=o(y(P)),F}return k.prototype.componentDidUpdate=function(){this.manager.updateOptions(y(this.props))},k.prototype.render=function(){var F={};return h(F,this.props,m),i.createElement(s.Provider,{value:this.manager},i.createElement(this.props.tag,F,this.props.children))},k})(i.Component);return M.propTypes=m,M.defaultProps={tag:"div"},B8=i.forwardRef(function(x,k){var P={forwardedRef:k};return h(P,x,{children:m.children,forwardedRef:m.forwardedRef}),h(P,{forwardedRef:k}),i.createElement(M,P,x.children)}),B8}var I8,SQ;function JIe(){if(SQ)return I8;SQ=1;function n(M,x){if(!(M instanceof x))throw new TypeError("Cannot call a class as a function")}function e(M,x){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:M}function t(M,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);M.prototype=Object.create(x&&x.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(M,x):M.__proto__=x)}var i=Ya(),r=b1(),o=O6(),s=B6(),a=s.refType,c=I6(),h={ambManager:r.object.isRequired,children:r.node.isRequired,disabled:r.bool,forwardedRef:a,tag:r.string},m=function(){return["button","fieldset","input","optgroup","option","select","textarea"]},y=(function(M){t(x,M);function x(){var k,P,F;n(this,x);for(var j=arguments.length,q=Array(j),V=0;V<j;V++)q[V]=arguments[V];return F=(k=(P=e(this,M.call.apply(M,[this].concat(q))),P),P.ref=i.createRef(),P.handleKeyDown=function(H){if(!P.props.disabled){var G=P.props.ambManager;switch(H.key){case"ArrowDown":H.preventDefault(),G.isOpen?G.focusItem(0):G.openMenu();break;case"Enter":case" ":H.preventDefault(),G.toggleMenu();break;case"Escape":G.handleMenuKey(H);break;default:G.handleButtonNonArrowKey(H)}}},P.handleClick=function(){P.props.disabled||P.props.ambManager.toggleMenu({},{focusMenu:!1})},P.setRef=function(H){P.ref.current=H,typeof P.props.forwardedRef=="function"?P.props.forwardedRef(H):P.props.forwardedRef&&(P.props.forwardedRef.current=H)},k),e(P,F)}return x.prototype.componentDidMount=function(){this.props.ambManager.button=this},x.prototype.componentWillUnmount=function(){this.props.ambManager.destroy()},x.prototype.render=function(){var P=this.props,F=this.props.ambManager,j={role:"button",tabIndex:P.disabled?"":"0","aria-haspopup":!0,"aria-expanded":F.isOpen,"aria-disabled":P.disabled,onKeyDown:this.handleKeyDown,onClick:this.handleClick},q={};return c(q,h),m().indexOf(P.tag)>=0&&delete q.disabled,F.options.closeOnBlur&&(j.onBlur=F.handleBlur),c(j,P,q),c(j,{ref:this.setRef}),i.createElement(P.tag,j,P.children)},x})(i.Component);return y.propTypes=h,y.defaultProps={tag:"span"},I8=i.forwardRef(function(M,x){return i.createElement(o.Consumer,null,function(k){var P={ambManager:k,forwardedRef:x};return c(P,M,{ambManager:h.ambManager,children:h.children,forwardedRef:h.forwardedRef}),i.createElement(y,P,M.children)})}),I8}var k8,EQ;function eke(){return EQ||(EQ=1,k8=function(e,t,i){var r=0,o=0,s=!1,a=!1,c=!1;e.addEventListener("click",h,i),e.addEventListener("touchstart",m,i);function h(F){c||t(F)}function m(F){c=!0,!s&&(s=!0,e.addEventListener("touchmove",y,i),e.addEventListener("touchend",M,i),e.addEventListener("touchcancel",x,i),a=!1,r=F.touches[0].clientX,o=F.touches[0].clientY)}function y(F){a||Math.abs(F.touches[0].clientX-r)<=10&&Math.abs(F.touches[0].clientY-o)<=10||(a=!0)}function M(F){s=!1,k(),a||t(F)}function x(){s=!1,a=!1,r=0,o=0}function k(){e.removeEventListener("touchmove",y,i),e.removeEventListener("touchend",M,i),e.removeEventListener("touchcancel",x,i)}function P(){e.removeEventListener("click",h,i),e.removeEventListener("touchstart",m,i),k()}return{remove:P}}),k8}var T8,OQ;function tke(){if(OQ)return T8;OQ=1;function n(M,x){if(!(M instanceof x))throw new TypeError("Cannot call a class as a function")}function e(M,x){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:M}function t(M,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);M.prototype=Object.create(x&&x.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(M,x):M.__proto__=x)}var i=Ya(),r=b1(),o=eke(),s=O6(),a=B6(),c=a.refType,h=I6(),m={ambManager:r.object.isRequired,children:r.oneOfType([r.func,r.node]).isRequired,forwardedRef:c,tag:r.string},y=(function(M){t(x,M);function x(){var k,P,F;n(this,x);for(var j=arguments.length,q=Array(j),V=0;V<j;V++)q[V]=arguments[V];return F=(k=(P=e(this,M.call.apply(M,[this].concat(q))),P),P.ref=i.createRef(),P.addTapListener=function(){var H=P.ref.current;if(H){var G=H.ownerDocument;G&&(P.tapListener=o(G.documentElement,P.handleTap))}},P.handleTap=function(H){P.ref.current.contains(H.target)||P.props.ambManager.button.ref.current.contains(H.target)||P.props.ambManager.closeMenu()},P.setRef=function(H){P.ref.current=H,typeof P.props.forwardedRef=="function"?P.props.forwardedRef(H):P.props.forwardedRef&&(P.props.forwardedRef.current=H)},k),e(P,F)}return x.prototype.componentDidMount=function(){this.props.ambManager.menu=this},x.prototype.componentDidUpdate=function(){var P=this.props.ambManager;P.options.closeOnBlur&&(P.isOpen&&!this.tapListener?this.addTapListener():!P.isOpen&&this.tapListener&&(this.tapListener.remove(),delete this.tapListener),P.isOpen||P.clearItems())},x.prototype.componentWillUnmount=function(){this.tapListener&&this.tapListener.remove(),this.props.ambManager.destroy()},x.prototype.render=function(){var P=this.props,F=this.props.ambManager,j=(function(){return typeof P.children=="function"?P.children({isOpen:F.isOpen}):F.isOpen?P.children:!1})();if(!j)return!1;var q={onKeyDown:F.handleMenuKey,role:"menu",tabIndex:-1};return F.options.closeOnBlur&&(q.onBlur=F.handleBlur),h(q,P,m),h(q,{ref:this.setRef}),i.createElement(P.tag,q,j)},x})(i.Component);return y.propTypes=m,y.defaultProps={tag:"div"},T8=i.forwardRef(function(M,x){return i.createElement(s.Consumer,null,function(k){var P={ambManager:k,forwardedRef:x};return h(P,M,{ambManager:m.ambManager,children:m.children,forwardedRef:m.forwardedRef}),i.createElement(y,P,M.children)})}),T8}var R8,BQ;function nke(){if(BQ)return R8;BQ=1;function n(y,M){if(!(y instanceof M))throw new TypeError("Cannot call a class as a function")}function e(y,M){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:y}function t(y,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);y.prototype=Object.create(M&&M.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(y,M):y.__proto__=M)}var i=Ya(),r=b1(),o=O6(),s=B6(),a=s.refType,c=I6(),h={ambManager:r.object.isRequired,children:r.node.isRequired,forwardedRef:a,tag:r.string,text:r.string,value:r.any},m=(function(y){t(M,y);function M(){var x,k,P;n(this,M);for(var F=arguments.length,j=Array(F),q=0;q<F;q++)j[q]=arguments[q];return P=(x=(k=e(this,y.call.apply(y,[this].concat(j))),k),k.ref=i.createRef(),k.handleKeyDown=function(V){V.key!=="Enter"&&V.key!==" "||k.props.tag==="a"&&k.props.href||(V.preventDefault(),k.selectItem(V))},k.selectItem=function(V){var H=typeof k.props.value<"u"?k.props.value:k.props.children;k.props.ambManager.handleSelection(H,V)},k.setRef=function(V){k.ref.current=V,typeof k.props.forwardedRef=="function"?k.props.forwardedRef(V):k.props.forwardedRef&&(k.props.forwardedRef.current=V)},x),e(k,P)}return M.prototype.componentDidMount=function(){this.props.ambManager.addItem({node:this.ref.current,text:this.props.text})},M.prototype.render=function(){var k={onClick:this.selectItem,onKeyDown:this.handleKeyDown,role:"menuitem",tabIndex:"-1",ref:this.setRef};return c(k,this.props,h),i.createElement(this.props.tag,k,this.props.children)},M})(i.Component);return m.propTypes=h,m.defaultProps={tag:"div"},R8=i.forwardRef(function(y,M){return i.createElement(o.Consumer,null,function(x){var k={ambManager:x,forwardedRef:M};return c(k,y,{ambManager:h.ambManager,children:h.children,forwardedRef:h.forwardedRef}),i.createElement(m,k,y.children)})}),R8}var D8,IQ;function ike(){if(IQ)return D8;IQ=1;var n=ise();return D8={Wrapper:XIe(),Button:JIe(),Menu:tke(),MenuItem:nke(),openMenu:n.openMenu,closeMenu:n.closeMenu},D8}var QM=ike();function kQ(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function TD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kQ(Object(t),!0).forEach(function(i){al(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):kQ(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function k6(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function TQ(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function T6(n,e,t){return e&&TQ(n.prototype,e),t&&TQ(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function al(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Wg(){return Wg=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Wg.apply(this,arguments)}function nL(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&RD(n,e)}function tE(n){return tE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},tE(n)}function RD(n,e){return RD=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},RD(n,e)}function rke(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function oke(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function R6(n,e){if(n==null)return{};var t=oke(n,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function Yp(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ske(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yp(n)}function iL(n){var e=rke();return function(){var i=tE(n),r;if(e){var o=tE(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return ske(this,r)}}function ake(n,e){return cke(n)||hke(n,e)||rse(n,e)||fke()}function lke(n){return uke(n)||Ake(n)||rse(n)||dke()}function uke(n){if(Array.isArray(n))return DD(n)}function cke(n){if(Array.isArray(n))return n}function Ake(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function hke(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,o=!1,s,a;try{for(t=t.call(n);!(r=(s=t.next()).done)&&(i.push(s.value),!(e&&i.length===e));r=!0);}catch(c){o=!0,a=c}finally{try{!r&&t.return!=null&&t.return()}finally{if(o)throw a}}return i}}function rse(n,e){if(n){if(typeof n=="string")return DD(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return DD(n,e)}}function DD(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function dke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var pke=T6(function n(e){var t=this,i=e.expanded,r=i===void 0?[]:i,o=e.allowMultipleExpanded,s=o===void 0?!1:o,a=e.allowZeroExpanded,c=a===void 0?!1:a;k6(this,n),al(this,"expanded",void 0),al(this,"allowMultipleExpanded",void 0),al(this,"allowZeroExpanded",void 0),al(this,"toggleExpanded",function(h){if(t.isItemDisabled(h))return t;var m=t.isItemExpanded(h);return m?t.augment({expanded:t.expanded.filter(function(y){return y!==h})}):t.augment({expanded:t.allowMultipleExpanded?[].concat(lke(t.expanded),[h]):[h]})}),al(this,"isItemDisabled",function(h){var m=t.isItemExpanded(h),y=t.expanded.length===1;return!!(m&&!t.allowZeroExpanded&&y)}),al(this,"isItemExpanded",function(h){return t.expanded.indexOf(h)!==-1}),al(this,"getPanelAttributes",function(h,m){var y=m??t.isItemExpanded(h);return{role:t.allowMultipleExpanded?void 0:"region","aria-hidden":t.allowMultipleExpanded?!y:void 0,"aria-labelledby":t.getButtonId(h),id:t.getPanelId(h),hidden:y?void 0:!0}}),al(this,"getHeadingAttributes",function(){return{role:"heading"}}),al(this,"getButtonAttributes",function(h,m){var y=m??t.isItemExpanded(h),M=t.isItemDisabled(h);return{id:t.getButtonId(h),"aria-disabled":M,"aria-expanded":y,"aria-controls":t.getPanelId(h),role:"button",tabIndex:0}}),al(this,"getPanelId",function(h){return"accordion__panel-".concat(h)}),al(this,"getButtonId",function(h){return"accordion__heading-".concat(h)}),al(this,"augment",function(h){return new n(TD({expanded:t.expanded,allowMultipleExpanded:t.allowMultipleExpanded,allowZeroExpanded:t.allowZeroExpanded},h))}),this.expanded=r,this.allowMultipleExpanded=s,this.allowZeroExpanded=c}),ose=St.createContext(null),sse=(function(n){nL(t,n);var e=iL(t);function t(){var i;k6(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),al(Yp(i),"state",new pke({expanded:i.props.preExpanded,allowMultipleExpanded:i.props.allowMultipleExpanded,allowZeroExpanded:i.props.allowZeroExpanded})),al(Yp(i),"toggleExpanded",function(a){i.setState(function(c){return c.toggleExpanded(a)},function(){i.props.onChange&&i.props.onChange(i.state.expanded)})}),al(Yp(i),"isItemDisabled",function(a){return i.state.isItemDisabled(a)}),al(Yp(i),"isItemExpanded",function(a){return i.state.isItemExpanded(a)}),al(Yp(i),"getPanelAttributes",function(a,c){return i.state.getPanelAttributes(a,c)}),al(Yp(i),"getHeadingAttributes",function(){return i.state.getHeadingAttributes()}),al(Yp(i),"getButtonAttributes",function(a,c){return i.state.getButtonAttributes(a,c)}),i}return T6(t,[{key:"render",value:function(){var r=this.state,o=r.allowZeroExpanded,s=r.allowMultipleExpanded;return St.createElement(ose.Provider,{value:{allowMultipleExpanded:s,allowZeroExpanded:o,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),t})(St.PureComponent);al(sse,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var ase=(function(n){nL(t,n);var e=iL(t);function t(){var i;k6(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),al(Yp(i),"renderChildren",function(a){return a?i.props.children(a):null}),i}return T6(t,[{key:"render",value:function(){return St.createElement(ose.Consumer,null,this.renderChildren)}}]),t})(St.PureComponent),mke=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],gke=function(e){var t=e.className,i=t===void 0?"accordion":t,r=e.allowMultipleExpanded,o=e.allowZeroExpanded,s=e.onChange,a=e.preExpanded,c=R6(e,mke);return St.createElement(sse,{preExpanded:a,allowMultipleExpanded:r,allowZeroExpanded:o,onChange:s},St.createElement("div",Wg({"data-accordion-component":"Accordion",className:i},c)))},PD;(function(n){n.Accordion="Accordion",n.AccordionItem="AccordionItem",n.AccordionItemButton="AccordionItemButton",n.AccordionItemHeading="AccordionItemHeading",n.AccordionItemPanel="AccordionItemPanel"})(PD||(PD={}));var lse=PD,P8=0;function yke(){var n=P8;return P8=P8+1,"raa-".concat(n)}var vke=St.useId||yke,bke=/[\u0009\u000a\u000c\u000d\u0020]/g;function I4(n){return n===""||bke.test(n)?(console.error('uuid must be a valid HTML5 id but was given "'.concat(n,'", ASCII whitespaces are forbidden')),!1):!0}var use=St.createContext(null),Cke=function(e){var t=e.children,i=e.uuid,r=e.accordionContext,o=e.dangerouslySetExpanded,s=function(){r.toggleExpanded(i)},a=function(h){var m=o??h.isItemExpanded(i),y=h.isItemDisabled(i),M=h.getPanelAttributes(i,o),x=h.getHeadingAttributes(i),k=h.getButtonAttributes(i,o);return St.createElement(use.Provider,{value:{uuid:i,expanded:m,disabled:y,toggleExpanded:s,panelAttributes:M,headingAttributes:x,buttonAttributes:k}},t)};return St.createElement(ase,null,a)},_ke=function(e){return St.createElement(ase,null,function(t){return St.createElement(Cke,Wg({},e,{accordionContext:t}))})},D6=function(e){var t=e.children,i=function(o){return o?t(o):null};return St.createElement(use.Consumer,null,i)},xke=["uuid","dangerouslySetExpanded","className","activeClassName"],cse=function(e){var t=e.uuid,i=e.dangerouslySetExpanded,r=e.className,o=r===void 0?"accordion__item":r,s=e.activeClassName,a=R6(e,xke),c=St.useState(vke()),h=ake(c,1),m=h[0],y=t??m,M=function(k){var P=k.expanded,F=P&&s?s:o;return St.createElement("div",Wg({"data-accordion-component":"AccordionItem",className:F},a))};return I4(y.toString()),a.id&&I4(a.id),St.createElement(_ke,{uuid:y,dangerouslySetExpanded:i},St.createElement(D6,null,M))};cse.displayName=lse.AccordionItem;function Ase(n){return n&&(n.matches('[data-accordion-component="Accordion"]')?n:Ase(n.parentElement))}function P6(n){var e=Ase(n);return e&&Array.from(e.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function Mke(n){var e=P6(n)||[],t=e[0];t&&t.focus()}function wke(n){var e=P6(n)||[],t=e[e.length-1];t&&t.focus()}function Ske(n){var e=P6(n)||[],t=e.indexOf(n);if(t!==-1){var i=e[t+1];i&&i.focus()}}function Eke(n){var e=P6(n)||[],t=e.indexOf(n);if(t!==-1){var i=e[t-1];i&&i.focus()}}var $0={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},Oke=["toggleExpanded","className"],Bke=function(e){var t=e.toggleExpanded,i=e.className,r=i===void 0?"accordion__button":i,o=R6(e,Oke),s=function(c){var h=c.key;if((h===$0.ENTER||h===$0.SPACE||h===$0.SPACE_DEPRECATED)&&(c.preventDefault(),t()),c.target instanceof HTMLElement)switch(h){case $0.HOME:{c.preventDefault(),Mke(c.target);break}case $0.END:{c.preventDefault(),wke(c.target);break}case $0.LEFT:case $0.UP:{c.preventDefault(),Eke(c.target);break}case $0.RIGHT:case $0.DOWN:{c.preventDefault(),Ske(c.target);break}}};return o.id&&I4(o.id),St.createElement("div",Wg({className:r},o,{role:"button",tabIndex:0,onClick:t,onKeyDown:s,"data-accordion-component":"AccordionItemButton"}))},Ike=function(e){return St.createElement(D6,null,function(t){var i=t.toggleExpanded,r=t.buttonAttributes;return St.createElement(Bke,Wg({toggleExpanded:i},e,r))})},kke={className:"accordion__heading","aria-level":3},Tke=`AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.

From the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):

The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.

`,hse=(function(n){nL(t,n);var e=iL(t);function t(){var i;k6(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),al(Yp(i),"ref",void 0),al(Yp(i),"setRef",function(a){i.ref=a}),i}return T6(t,[{key:"componentDidUpdate",value:function(){t.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){t.VALIDATE(this.ref)}},{key:"render",value:function(){return St.createElement("div",Wg({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(r){if(r===void 0)throw new Error("ref is undefined");if(!(r.childElementCount===1&&r.firstElementChild&&r.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton"))throw new Error(Tke)}}]),t})(St.PureComponent);al(hse,"defaultProps",kke);var dse=function(e){return St.createElement(D6,null,function(t){var i=t.headingAttributes;return e.id&&I4(e.id),St.createElement(hse,Wg({},e,i))})};dse.displayName=lse.AccordionItemHeading;var Rke=["className","region","id"],Dke=function(e){var t=e.className,i=t===void 0?"accordion__panel":t,r=e.region,o=e.id,s=R6(e,Rke),a=function(h){var m=h.panelAttributes;o&&I4(o);var y=TD(TD({},m),{},{"aria-labelledby":r?m["aria-labelledby"]:void 0});return St.createElement("div",Wg({"data-accordion-component":"AccordionItemPanel",className:i},s,y,{role:r?"region":void 0}))};return St.createElement(D6,null,a)};function k4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",e="ee4be309accf3b6f15b0a988cbdadd67c7132608",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",statementMap:{0:{start:{line:3,column:18},end:{line:5,column:1}},1:{start:{line:4,column:2},end:{line:4,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:3,column:18},end:{line:3,column:19}},loc:{start:{line:3,column:29},end:{line:5,column:1}},line:3}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx"],names:[],mappings:"AAOS;AAPT,OAAO,eAAsC;AAM7C,MAAM,YAAsC,CAAC,UAAU;AACrD,SAAO,oBAAC,aAAW,GAAG,OAAO;AAC/B;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ee4be309accf3b6f15b0a988cbdadd67c7132608"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return k4=function(){return s},s}k4();k4().s[0]++;const rL=n=>(k4().f[0]++,k4().s[1]++,ie.jsx(wre,{...n}));function T4(n){return To({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 19a2 2 0 0 0 2 2c2 0 2 -4 3 -9s1 -9 3 -9a2 2 0 0 1 2 2"},child:[]},{tag:"path",attr:{d:"M5 12h6"},child:[]},{tag:"path",attr:{d:"M15 12l6 6"},child:[]},{tag:"path",attr:{d:"M15 18l6 -6"},child:[]}]})(n)}function U6(n){return To({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M28,64A12,12,0,0,1,40,52H216a12,12,0,0,1,0,24H40A12,12,0,0,1,28,64Zm12,76H216a12,12,0,0,0,0-24H40a12,12,0,0,0,0,24Zm104,40H40a12,12,0,0,0,0,24H144a12,12,0,0,0,0-24Zm88,0H220V168a12,12,0,0,0-24,0v12H184a12,12,0,0,0,0,24h12v12a12,12,0,0,0,24,0V204h12a12,12,0,0,0,0-24Z"},child:[]}]})(n)}function kb(){var n="/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",e="99dad9631fbee5fc23be2dafaf7c7eea92c38eac",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",statementMap:{0:{start:{line:2,column:34},end:{line:2,column:56}},1:{start:{line:3,column:28},end:{line:3,column:41}},2:{start:{line:4,column:30},end:{line:4,column:123}},3:{start:{line:4,column:88},end:{line:4,column:122}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:80},end:{line:4,column:81}},loc:{start:{line:4,column:88},end:{line:4,column:122}},line:4}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/filterops.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEZ,aAAM,qBAAqB,CAAC,OAAO,OAAO,MAAM;AAChD,aAAM,eAAe,CAAC,MAAM,KAAK;AACjC,aAAM,iBAAiB,OAC3B,KAAK,OAAO,gBAAgB,MAAM,EAClC,OAAO,QAAM,mBAAmB,QAAQ,EAAE,IAAI,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99dad9631fbee5fc23be2dafaf7c7eea92c38eac"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return kb=function(){return s},s}kb();const oL=(kb().s[0]++,["all","any","none"]);kb().s[1]++;const Pke=(kb().s[2]++,Object.keys(Jr.filter_operator.values).filter(n=>(kb().f[0]++,kb().s[3]++,oL.indexOf(n)<0)));function qi(){var n="/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",e="d18e3b448d830733ac17bcacd45f7c08e364baa2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:8,column:25}},1:{start:{line:8,column:16},end:{line:8,column:25}},2:{start:{line:9,column:2},end:{line:9,column:25}},3:{start:{line:9,column:16},end:{line:9,column:25}},4:{start:{line:10,column:2},end:{line:10,column:23}},5:{start:{line:13,column:19},end:{line:13,column:40}},6:{start:{line:14,column:2},end:{line:16,column:3}},7:{start:{line:15,column:4},end:{line:15,column:13}},8:{start:{line:17,column:2},end:{line:23,column:3}},9:{start:{line:18,column:4},end:{line:18,column:16}},10:{start:{line:19,column:9},end:{line:23,column:3}},11:{start:{line:20,column:4},end:{line:20,column:17}},12:{start:{line:22,column:4},end:{line:22,column:13}},13:{start:{line:26,column:2},end:{line:26,column:21}},14:{start:{line:27,column:2},end:{line:27,column:22}},15:{start:{line:28,column:2},end:{line:28,column:11}},16:{start:{line:31,column:24},end:{line:33,column:3}},17:{start:{line:35,column:20},end:{line:35,column:76}},18:{start:{line:36,column:4},end:{line:40,column:5}},19:{start:{line:37,column:6},end:{line:37,column:43}},20:{start:{line:38,column:11},end:{line:40,column:5}},21:{start:{line:39,column:6},end:{line:39,column:47}},22:{start:{line:41,column:4},end:{line:41,column:35}},23:{start:{line:44,column:14},end:{line:44,column:31}},24:{start:{line:45,column:21},end:{line:45,column:25}},25:{start:{line:46,column:25},end:{line:46,column:29}},26:{start:{line:47,column:23},end:{line:47,column:33}},27:{start:{line:48,column:4},end:{line:75,column:9}},28:{start:{line:54,column:72},end:{line:54,column:92}},29:{start:{line:55,column:41},end:{line:55,column:104}},30:{start:{line:63,column:37},end:{line:63,column:100}},31:{start:{line:72,column:27},end:{line:72,column:89}}},fnMap:{0:{name:"tryParseInt",decl:{start:{line:7,column:9},end:{line:7,column:20}},loc:{start:{line:7,column:24},end:{line:11,column:1}},line:7},1:{name:"tryParseBool",decl:{start:{line:12,column:9},end:{line:12,column:21}},loc:{start:{line:12,column:25},end:{line:24,column:1}},line:12},2:{name:"parseFilter",decl:{start:{line:25,column:9},end:{line:25,column:20}},loc:{start:{line:25,column:24},end:{line:29,column:1}},line:25},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:58},end:{line:42,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:76,column:3}},line:43},5:{name:"(anonymous_5)",decl:{start:{line:54,column:58},end:{line:54,column:59}},loc:{start:{line:54,column:72},end:{line:54,column:92}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:55,column:20},end:{line:55,column:21}},loc:{start:{line:55,column:41},end:{line:55,column:104}},line:55},7:{name:"(anonymous_7)",decl:{start:{line:63,column:20},end:{line:63,column:21}},loc:{start:{line:63,column:37},end:{line:63,column:100}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:72,column:20},end:{line:72,column:21}},loc:{start:{line:72,column:27},end:{line:72,column:89}},line:72}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:25}},type:"if",locations:[{start:{line:8,column:2},end:{line:8,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:9,column:25}},type:"if",locations:[{start:{line:9,column:2},end:{line:9,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},2:{loc:{start:{line:14,column:2},end:{line:16,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:16,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:14},3:{loc:{start:{line:17,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:23,column:3}},{start:{line:19,column:9},end:{line:23,column:3}}],line:17},4:{loc:{start:{line:19,column:9},end:{line:23,column:3}},type:"if",locations:[{start:{line:19,column:9},end:{line:23,column:3}},{start:{line:21,column:9},end:{line:23,column:3}}],line:19},5:{loc:{start:{line:36,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:40,column:5}},{start:{line:38,column:11},end:{line:40,column:5}}],line:36},6:{loc:{start:{line:36,column:8},end:{line:36,column:49}},type:"binary-expr",locations:[{start:{line:36,column:8},end:{line:36,column:26}},{start:{line:36,column:30},end:{line:36,column:49}}],line:36},7:{loc:{start:{line:38,column:11},end:{line:40,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:40,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},8:{loc:{start:{line:67,column:6},end:{line:74,column:10}},type:"binary-expr",locations:[{start:{line:67,column:6},end:{line:67,column:27}},{start:{line:67,column:47},end:{line:74,column:10}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx"],names:[],mappings:"AA+DW,SAEH,KAFG;AA/DX,OAAO,WAAW;AAElB,SAAQ,sBAAqB;AAC7B,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AAExB,SAAS,YAAY,GAAoB;AACvC,MAAI,MAAM,GAAI,QAAO;AACrB,MAAI,MAAM,CAAW,EAAG,QAAO;AAC/B,SAAO,WAAW,CAAW;AAC/B;AAEA,SAAS,aAAa,GAAqB;AACzC,QAAM,WAAY,OAAO,MAAO;AAChC,MAAG,CAAC,UAAU;AACZ,WAAO;AAAA,EACT;AAEA,MAAG,EAAE,MAAM,cAAc,GAAG;AAC1B,WAAO;AAAA,EACT,WACQ,EAAE,MAAM,eAAe,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,YAAY,GAA8B;AACjD,MAAI,YAAY,CAAQ;AACxB,MAAI,aAAa,CAAQ;AACzB,SAAO;AACT;AAQA,qBAAqB,2BAA2B,MAAM,UAAmC;AAAA,EACvF,OAAO,eAAe;AAAA,IACpB,YAAY,CAAC;AAAA,EACf;AAAA,EAEA,oBAAoB,UAAkB,cAAsB,YAAsB;AAChF,QAAI,YAAY,CAAC,UAAU,cAAc,GAAG,WAAW,IAAI,WAAW,CAAC;AACvE,QAAG,aAAa,SAAS,aAAa,QAAQ;AAC5C,kBAAY,CAAC,UAAU,YAAY;AAAA,IACrC,WAAU,WAAW,WAAW,GAAG;AACjC,kBAAY,CAAC,UAAU,cAAc,EAAE;AAAA,IACzC;AACA,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,WAAW,EAAE,CAAC;AACpB,UAAM,eAAe,EAAE,CAAC;AACxB,UAAM,aAAa,EAAE,MAAM,CAAC;AAE5B,WAAO,qBAAC,SAAI,WAAU,iCACpB;AAAA,0BAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,OAAO,KAAK,KAAK,MAAM,UAAW,EAAE,IAAI,cAAY,CAAC,UAAU,QAAQ,CAAC;AAAA,UACjF,UAAU,CAAC,oBAA4B,KAAK,oBAAoB,UAAU,iBAAiB,UAAU;AAAA;AAAA,MACvG,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,UAAU,CAAC,gBAAwB,KAAK,oBAAoB,aAAa,cAAc,UAAU;AAAA,UACjG,SAAS;AAAA;AAAA,MACX,GACF;AAAA,MACC,WAAW,SAAS,KACrB,oBAAC,SAAI,WAAU,+BACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO,WAAW,KAAK,GAAG;AAAA,UAC1B,UAAU,CAAC,MAAc,KAAK,oBAAoB,UAAU,cAAc,EAAE,MAAM,GAAG,CAAC;AAAA;AAAA,MACxF,GACF;AAAA,OAEF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d18e3b448d830733ac17bcacd45f7c08e364baa2"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return qi=function(){return s},s}qi();function Uke(n){return qi().f[0]++,qi().s[0]++,n===""?(qi().b[0][0]++,qi().s[1]++,n):(qi().b[0][1]++,qi().s[2]++,isNaN(n)?(qi().b[1][0]++,qi().s[3]++,n):(qi().b[1][1]++,qi().s[4]++,parseFloat(n)))}function Kke(n){qi().f[1]++;const e=(qi().s[5]++,typeof n=="string");if(qi().s[6]++,e)qi().b[2][1]++;else return qi().b[2][0]++,qi().s[7]++,n;return qi().s[8]++,n.match(/^\s*true\s*$/)?(qi().b[3][0]++,qi().s[9]++,!0):(qi().b[3][1]++,qi().s[10]++,n.match(/^\s*false\s*$/)?(qi().b[4][0]++,qi().s[11]++,!1):(qi().b[4][1]++,qi().s[12]++,n))}function Lke(n){return qi().f[2]++,qi().s[13]++,n=Uke(n),qi().s[14]++,n=Kke(n),qi().s[15]++,n}class Fke extends On.Component{static defaultProps=(qi().s[16]++,{properties:{}});onFilterPartChanged(e,t,i){qi().f[3]++;let r=(qi().s[17]++,[e,t,...i.map(Lke)]);qi().s[18]++,qi().b[6][0]++,e==="has"||(qi().b[6][1]++,e==="!has")?(qi().b[5][0]++,qi().s[19]++,r=[e,t]):(qi().b[5][1]++,qi().s[20]++,i.length===0?(qi().b[7][0]++,qi().s[21]++,r=[e,t,""]):qi().b[7][1]++),qi().s[22]++,this.props.onChange(r)}render(){qi().f[4]++;const e=(qi().s[23]++,this.props.filter),t=(qi().s[24]++,e[0]),i=(qi().s[25]++,e[1]),r=(qi().s[26]++,e.slice(2));return qi().s[27]++,ie.jsxs("div",{className:"maputnik-filter-editor-single",children:[ie.jsx("div",{className:"maputnik-filter-editor-property",children:ie.jsx(B5,{"aria-label":"key",value:i,options:Object.keys(this.props.properties).map(o=>(qi().f[5]++,qi().s[28]++,[o,o])),onChange:o=>(qi().f[6]++,qi().s[29]++,this.onFilterPartChanged(t,o,r))})}),ie.jsx("div",{className:"maputnik-filter-editor-operator",children:ie.jsx(nC,{"aria-label":"function",value:t,onChange:o=>(qi().f[7]++,qi().s[30]++,this.onFilterPartChanged(o,i,r)),options:Pke})}),(qi().b[8][0]++,r.length>0&&(qi().b[8][1]++,ie.jsx("div",{className:"maputnik-filter-editor-args",children:ie.jsx(um,{"aria-label":"value",value:r.join(","),onChange:o=>(qi().f[8]++,qi().s[31]++,this.onFilterPartChanged(t,i,o.split(",")))})})))]})}}function ex(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",e="1beba484bbe354357d7ce4f43a423306cbd22032",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:20,column:9}},2:{start:{line:23,column:26},end:{line:23,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:21,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx"],names:[],mappings:"AAYW,SACL,KADK;AAZX,OAAO,WAAuC;AAC9C,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAMtD,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,gCACpB;AAAA,0BAAC,SAAI,WAAU,wCACZ,eAAK,MAAM,UACd;AAAA,MACA,oBAAC,SAAI,WAAU,uCACb;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,qBAAqB;AAAA,UAE9B,8BAAC,YAAS;AAAA;AAAA,MACZ,GACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1beba484bbe354357d7ce4f43a423306cbd22032"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ex=function(){return s},s}ex();class zke extends On.Component{render(){ex().f[0]++;const e=(ex().s[0]++,this.props.t);return ex().s[1]++,ie.jsxs("div",{className:"maputnik-filter-editor-block",children:[ie.jsx("div",{className:"maputnik-filter-editor-block-content",children:this.props.children}),ie.jsx("div",{className:"maputnik-filter-editor-block-action",children:ie.jsx(Js,{className:"maputnik-icon-button",onClick:this.props.onDelete,title:e("Delete filter block"),children:ie.jsx($b,{})})})]})}}const jke=(ex().s[2]++,$o()(zke));var U8,RQ;function Nke(){if(RQ)return U8;RQ=1;var n="[object Symbol]",e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe23",i="\\u20d0-\\u20f0",r="\\ufe0e\\ufe0f",o="["+e+"]",s="["+t+i+"]",a="\\ud83c[\\udffb-\\udfff]",c="(?:"+s+"|"+a+")",h="[^"+e+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",M="\\u200d",x=c+"?",k="["+r+"]?",P="(?:"+M+"(?:"+[h,m,y].join("|")+")"+k+x+")*",F=k+x+P,j="(?:"+[h+s+"?",s,m,y,o].join("|")+")",q=RegExp(a+"(?="+a+")|"+j+F,"g"),V=RegExp("["+M+e+t+i+r+"]"),H=typeof window=="object"&&window&&window.Object===Object&&window,G=typeof self=="object"&&self&&self.Object===Object&&self,Y=H||G||Function("return this")();function z(it){return it.split("")}function se(it){return V.test(it)}function le(it){return se(it)?me(it):z(it)}function me(it){return it.match(q)||[]}var de=Object.prototype,be=de.toString,Ee=Y.Symbol,De=Ee?Ee.prototype:void 0,je=De?De.toString:void 0;function Ie(it,bt,Bt){var Ke=-1,Te=it.length;bt<0&&(bt=-bt>Te?0:Te+bt),Bt=Bt>Te?Te:Bt,Bt<0&&(Bt+=Te),Te=bt>Bt?0:Bt-bt>>>0,bt>>>=0;for(var Se=Array(Te);++Ke<Te;)Se[Ke]=it[Ke+bt];return Se}function Qe(it){if(typeof it=="string")return it;if(we(it))return je?je.call(it):"";var bt=it+"";return bt=="0"&&1/it==-1/0?"-0":bt}function et(it,bt,Bt){var Ke=it.length;return Bt=Bt===void 0?Ke:Bt,!bt&&Bt>=Ke?it:Ie(it,bt,Bt)}function dt(it){return function(bt){bt=ze(bt);var Bt=se(bt)?le(bt):void 0,Ke=Bt?Bt[0]:bt.charAt(0),Te=Bt?et(Bt,1).join(""):bt.slice(1);return Ke[it]()+Te}}function ke(it){return!!it&&typeof it=="object"}function we(it){return typeof it=="symbol"||ke(it)&&be.call(it)==n}function ze(it){return it==null?"":Qe(it)}function xe(it){return At(ze(it).toLowerCase())}var At=dt("toUpperCase");return U8=xe,U8}var Gke=Nke();const sL=Xl(Gke);function Ag(){var n="/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",e="8b86d889d32efa9a6cc667b2fa3579002dfb58fc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",statementMap:{0:{start:{line:4,column:16},end:{line:4,column:36}},1:{start:{line:5,column:2},end:{line:9,column:3}},2:{start:{line:6,column:4},end:{line:6,column:52}},3:{start:{line:8,column:4},end:{line:8,column:22}},4:{start:{line:10,column:2},end:{line:10,column:27}}},fnMap:{0:{name:"labelFromFieldName",decl:{start:{line:2,column:24},end:{line:2,column:42}},loc:{start:{line:2,column:54},end:{line:11,column:1}},line:2}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,wBAAwB,mBAAmB,WAAmB;AAC5D,MAAI;AACJ,QAAM,QAAQ,UAAU,MAAM,GAAG;AACjC,MAAI,MAAM,SAAS,GAAG;AACpB,YAAQ,UAAU,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AAAA,EAChD,OACK;AACH,YAAQ;AAAA,EACV;AACA,SAAO,WAAW,KAAK;AACzB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b86d889d32efa9a6cc667b2fa3579002dfb58fc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ag=function(){return s},s}Ag();function K6(n){Ag().f[0]++;let e;const t=(Ag().s[0]++,n.split("-"));return Ag().s[1]++,t.length>1?(Ag().b[0][0]++,Ag().s[2]++,e=n.split("-").slice(1).join(" ")):(Ag().b[0][1]++,Ag().s[3]++,e=n),Ag().s[4]++,sL(e)}function Wa(){var n="/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",e="f3c39f8fe544a6a2222a261b9e084b8f7a77d2fb",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",statementMap:{0:{start:{line:10,column:24},end:{line:16,column:3}},1:{start:{line:18,column:4},end:{line:18,column:17}},2:{start:{line:19,column:4},end:{line:21,column:6}},3:{start:{line:24,column:34},end:{line:24,column:44}},4:{start:{line:25,column:25},end:{line:25,column:52}},5:{start:{line:26,column:42},end:{line:48,column:8}},6:{start:{line:49,column:16},end:{line:49,column:22}},7:{start:{line:50,column:4},end:{line:53,column:5}},8:{start:{line:51,column:23},end:{line:51,column:118}},9:{start:{line:52,column:6},end:{line:52,column:42}},10:{start:{line:54,column:4},end:{line:76,column:6}},11:{start:{line:79,column:27},end:{line:79,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:13},end:{line:12,column:14}},loc:{start:{line:12,column:19},end:{line:13,column:5}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:14,column:12},end:{line:14,column:13}},loc:{start:{line:14,column:18},end:{line:15,column:5}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:21},end:{line:22,column:3}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:23,column:2},end:{line:23,column:3}},loc:{start:{line:23,column:11},end:{line:77,column:3}},line:23}},branchMap:{0:{loc:{start:{line:25,column:25},end:{line:25,column:52}},type:"cond-expr",locations:[{start:{line:25,column:35},end:{line:25,column:45}},{start:{line:25,column:48},end:{line:25,column:52}}],line:25},1:{loc:{start:{line:27,column:6},end:{line:37,column:7}},type:"binary-expr",locations:[{start:{line:27,column:6},end:{line:27,column:23}},{start:{line:27,column:43},end:{line:37,column:7}}],line:27},2:{loc:{start:{line:50,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:50,column:4},end:{line:53,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},3:{loc:{start:{line:51,column:23},end:{line:51,column:118}},type:"cond-expr",locations:[{start:{line:51,column:46},end:{line:51,column:95}},{start:{line:51,column:98},end:{line:51,column:118}}],line:51}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx"],names:[],mappings:"AA6CM,mBASM,KATN;AA7CN,OAAO,WAAW;AAClB,SAAQ,UAAU,cAAa;AAC/B,SAA+B,uBAAuB;AAEtD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,wBAAwB;AAC/B,OAAO,eAAe;AAmBtB,MAAM,mCAAmC,MAAM,UAA2C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,IACT,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,OAAO,QAAO,IAAI,KAAK;AACjC,UAAM,eAAe,UAAU,CAAC,QAAQ,IAAI;AAE5C,UAAM,gBACJ,iCACG;AAAA,WAAK,MAAM,UACV;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,UAAU;AAAA,UACV,WAAU;AAAA,UACV,OAAO,EAAE,wBAAwB;AAAA,UAEjC,8BAAC,UAAO;AAAA;AAAA,QANJ;AAAA,MAON;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,WAAU;AAAA,UACV,OAAO,EAAE,mBAAmB;AAAA,UAE5B,8BAAC,YAAS;AAAA;AAAA,QALN;AAAA,MAMN;AAAA,OACF;AAEF,QAAI,QAAQ;AACZ,QAAI,KAAK,MAAM,QAAQ;AACrB,YAAM,WAAW,KAAK,MAAM,YAAY,KAAK,MAAM,YAAY,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM;AACvG,cAAQ,KAAK,MAAM,OAAO,QAAQ;AAAA,IACpC;AACA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,EAAE,mBAAmB,KAAK,MAAM,SAAS,CAAC;AAAA,QACjD,QAAQ;AAAA,QACR,UAAU;AAAA,QACV;AAAA,QAEA;AAAA,UAAC;AAAA;AAAA,YACC,UAAS;AAAA,YACT,MAAM,KAAK,MAAM;AAAA,YACjB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,QAAQ,KAAK,MAAM;AAAA,YACnB;AAAA,YACA,WAAW;AAAA,YACX,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f3c39f8fe544a6a2222a261b9e084b8f7a77d2fb"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Wa=function(){return s},s}Wa();class Wke extends On.Component{static defaultProps=(Wa().s[0]++,{errors:{},onFocus:()=>{Wa().f[0]++},onBlur:()=>{Wa().f[1]++}});constructor(e){Wa().f[2]++,Wa().s[1]++,super(e),Wa().s[2]++,this.state={jsonError:!1}}render(){Wa().f[3]++;const{t:e,value:t,canUndo:i}=(Wa().s[3]++,this.props),r=(Wa().s[4]++,i?(Wa().b[0][0]++,!i()):(Wa().b[0][1]++,!0)),o=(Wa().s[5]++,ie.jsxs(ie.Fragment,{children:[(Wa().b[1][0]++,this.props.onUndo&&(Wa().b[1][1]++,ie.jsx(Js,{onClick:this.props.onUndo,disabled:r,className:"maputnik-delete-stop",title:e("Revert from expression"),children:ie.jsx(Kfe,{})},"undo_action"))),ie.jsx(Js,{onClick:this.props.onDelete,className:"maputnik-delete-stop",title:e("Delete expression"),children:ie.jsx($b,{})},"delete_action")]}));let s=(Wa().s[6]++,void 0);if(Wa().s[7]++,this.props.errors){Wa().b[2][0]++;const a=(Wa().s[8]++,this.props.fieldType?(Wa().b[3][0]++,this.props.fieldType+"."+this.props.fieldName):(Wa().b[3][1]++,this.props.fieldName));Wa().s[9]++,s=this.props.errors[a]}else Wa().b[2][1]++;return Wa().s[10]++,ie.jsx(Gs,{fieldSpec:this.props.fieldSpec,label:e(K6(this.props.fieldName)),action:o,wideMode:!0,error:s,children:ie.jsx(rL,{lintType:"expression",spec:this.props.fieldSpec,className:"maputnik-expression-editor",onFocus:this.props.onFocus,onBlur:this.props.onBlur,value:t,maxHeight:200,onChange:this.props.onChange})})}}const fse=(Wa().s[11]++,$o()(Wke));function hn(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",e="e47fcaaf47a881c798f8d8c8b2982ffb5ed75681",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",statementMap:{0:{start:{line:18,column:17},end:{line:18,column:40}},1:{start:{line:19,column:2},end:{line:21,column:3}},2:{start:{line:20,column:4},end:{line:20,column:18}},3:{start:{line:22,column:20},end:{line:22,column:29}},4:{start:{line:23,column:16},end:{line:23,column:31}},5:{start:{line:24,column:2},end:{line:27,column:3}},6:{start:{line:25,column:4},end:{line:25,column:24}},7:{start:{line:26,column:4},end:{line:26,column:32}},8:{start:{line:28,column:2},end:{line:28,column:35}},9:{start:{line:31,column:2},end:{line:31,column:65}},10:{start:{line:34,column:2},end:{line:55,column:4}},11:{start:{line:57,column:19},end:{line:61,column:1}},12:{start:{line:63,column:2},end:{line:65,column:3}},13:{start:{line:64,column:4},end:{line:64,column:16}},14:{start:{line:66,column:21},end:{line:66,column:42}},15:{start:{line:67,column:2},end:{line:67,column:38}},16:{start:{line:70,column:2},end:{line:70,column:52}},17:{start:{line:73,column:2},end:{line:75,column:3}},18:{start:{line:74,column:4},end:{line:74,column:97}},19:{start:{line:74,column:38},end:{line:74,column:59}},20:{start:{line:74,column:75},end:{line:74,column:84}},21:{start:{line:76,column:2},end:{line:76,column:15}},22:{start:{line:79,column:24},end:{line:81,column:3}},23:{start:{line:83,column:4},end:{line:83,column:17}},24:{start:{line:84,column:4},end:{line:87,column:6}},25:{start:{line:91,column:22},end:{line:91,column:58}},26:{start:{line:92,column:4},end:{line:92,column:35}},27:{start:{line:93,column:4},end:{line:93,column:35}},28:{start:{line:96,column:22},end:{line:96,column:58}},29:{start:{line:97,column:4},end:{line:97,column:39}},30:{start:{line:98,column:4},end:{line:98,column:35}},31:{start:{line:100,column:18},end:{line:104,column:3}},32:{start:{line:101,column:26},end:{line:101,column:62}},33:{start:{line:102,column:4},end:{line:102,column:43}},34:{start:{line:103,column:4},end:{line:103,column:39}},35:{start:{line:105,column:16},end:{line:109,column:3}},36:{start:{line:106,column:4},end:{line:108,column:7}},37:{start:{line:110,column:15},end:{line:114,column:3}},38:{start:{line:111,column:4},end:{line:113,column:7}},39:{start:{line:115,column:19},end:{line:121,column:3}},40:{start:{line:116,column:19},end:{line:116,column:46}},41:{start:{line:117,column:4},end:{line:117,column:47}},42:{start:{line:118,column:4},end:{line:120,column:7}},43:{start:{line:123,column:32},end:{line:123,column:75}},44:{start:{line:124,column:4},end:{line:137,column:5}},45:{start:{line:125,column:6},end:{line:128,column:8}},46:{start:{line:129,column:11},end:{line:137,column:5}},47:{start:{line:130,column:6},end:{line:132,column:8}},48:{start:{line:134,column:6},end:{line:136,column:8}},49:{start:{line:140,column:26},end:{line:140,column:36}},50:{start:{line:141,column:36},end:{line:141,column:46}},51:{start:{line:142,column:22},end:{line:144,column:5}},52:{start:{line:145,column:26},end:{line:145,column:33}},53:{start:{line:146,column:36},end:{line:146,column:112}},54:{start:{line:147,column:4},end:{line:270,column:5}},55:{start:{line:148,column:6},end:{line:161,column:11}},56:{start:{line:162,column:11},end:{line:270,column:5}},57:{start:{line:163,column:21},end:{line:163,column:48}},58:{start:{line:164,column:26},end:{line:164,column:35}},59:{start:{line:165,column:22},end:{line:165,column:37}},60:{start:{line:166,column:38},end:{line:174,column:10}},61:{start:{line:175,column:27},end:{line:188,column:8}},62:{start:{line:176,column:22},end:{line:176,column:50}},63:{start:{line:177,column:8},end:{line:187,column:29}},64:{start:{line:189,column:6},end:{line:240,column:11}},65:{start:{line:200,column:33},end:{line:200,column:63}},66:{start:{line:242,column:25},end:{line:242,column:35}},67:{start:{line:243,column:6},end:{line:269,column:11}},68:{start:{line:248,column:14},end:{line:248,column:59}},69:{start:{line:249,column:14},end:{line:249,column:49}},70:{start:{line:273,column:21},end:{line:273,column:60}}},fnMap:{0:{name:"combiningFilter",decl:{start:{line:17,column:9},end:{line:17,column:24}},loc:{start:{line:17,column:32},end:{line:29,column:1}},line:17},1:{name:"migrateFilter",decl:{start:{line:30,column:9},end:{line:30,column:22}},loc:{start:{line:30,column:31},end:{line:32,column:1}},line:30},2:{name:"createStyleFromFilter",decl:{start:{line:33,column:9},end:{line:33,column:30}},loc:{start:{line:33,column:39},end:{line:56,column:1}},line:33},3:{name:"checkIfSimpleFilter",decl:{start:{line:62,column:9},end:{line:62,column:28}},loc:{start:{line:62,column:37},end:{line:68,column:1}},line:62},4:{name:"hasCombiningFilter",decl:{start:{line:69,column:9},end:{line:69,column:27}},loc:{start:{line:69,column:36},end:{line:71,column:1}},line:69},5:{name:"hasNestedCombiningFilter",decl:{start:{line:72,column:9},end:{line:72,column:33}},loc:{start:{line:72,column:42},end:{line:77,column:1}},line:72},6:{name:"(anonymous_6)",decl:{start:{line:74,column:31},end:{line:74,column:32}},loc:{start:{line:74,column:38},end:{line:74,column:59}},line:74},7:{name:"(anonymous_7)",decl:{start:{line:74,column:68},end:{line:74,column:69}},loc:{start:{line:74,column:75},end:{line:74,column:84}},line:74},8:{name:"(anonymous_8)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:21},end:{line:88,column:3}},line:82},9:{name:"(anonymous_9)",decl:{start:{line:90,column:2},end:{line:90,column:3}},loc:{start:{line:90,column:42},end:{line:94,column:3}},line:90},10:{name:"(anonymous_10)",decl:{start:{line:95,column:2},end:{line:95,column:3}},loc:{start:{line:95,column:30},end:{line:99,column:3}},line:95},11:{name:"(anonymous_11)",decl:{start:{line:100,column:18},end:{line:100,column:19}},loc:{start:{line:100,column:24},end:{line:104,column:3}},line:100},12:{name:"(anonymous_12)",decl:{start:{line:105,column:16},end:{line:105,column:17}},loc:{start:{line:105,column:25},end:{line:109,column:3}},line:105},13:{name:"(anonymous_13)",decl:{start:{line:110,column:15},end:{line:110,column:16}},loc:{start:{line:110,column:21},end:{line:114,column:3}},line:110},14:{name:"(anonymous_14)",decl:{start:{line:115,column:19},end:{line:115,column:20}},loc:{start:{line:115,column:25},end:{line:121,column:3}},line:115},15:{name:"(anonymous_15)",decl:{start:{line:122,column:2},end:{line:122,column:3}},loc:{start:{line:122,column:48},end:{line:138,column:3}},line:122},16:{name:"(anonymous_16)",decl:{start:{line:139,column:2},end:{line:139,column:3}},loc:{start:{line:139,column:11},end:{line:271,column:3}},line:139},17:{name:"(anonymous_17)",decl:{start:{line:175,column:39},end:{line:175,column:40}},loc:{start:{line:175,column:51},end:{line:188,column:7}},line:175},18:{name:"(anonymous_18)",decl:{start:{line:200,column:26},end:{line:200,column:27}},loc:{start:{line:200,column:33},end:{line:200,column:63}},line:200},19:{name:"(anonymous_19)",decl:{start:{line:247,column:22},end:{line:247,column:23}},loc:{start:{line:247,column:28},end:{line:250,column:13}},line:247}},branchMap:{0:{loc:{start:{line:18,column:17},end:{line:18,column:40}},type:"binary-expr",locations:[{start:{line:18,column:17},end:{line:18,column:29}},{start:{line:18,column:33},end:{line:18,column:40}}],line:18},1:{loc:{start:{line:19,column:2},end:{line:21,column:3}},type:"if",locations:[{start:{line:19,column:2},end:{line:21,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:24,column:2},end:{line:27,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:27,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:63,column:2},end:{line:65,column:3}},type:"if",locations:[{start:{line:63,column:2},end:{line:65,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},4:{loc:{start:{line:63,column:6},end:{line:63,column:59}},type:"binary-expr",locations:[{start:{line:63,column:6},end:{line:63,column:25}},{start:{line:63,column:29},end:{line:63,column:59}}],line:63},5:{loc:{start:{line:73,column:2},end:{line:75,column:3}},type:"if",locations:[{start:{line:73,column:2},end:{line:75,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:73},6:{loc:{start:{line:124,column:4},end:{line:137,column:5}},type:"if",locations:[{start:{line:124,column:4},end:{line:137,column:5}},{start:{line:129,column:11},end:{line:137,column:5}}],line:124},7:{loc:{start:{line:124,column:8},end:{line:124,column:66}},type:"binary-expr",locations:[{start:{line:124,column:8},end:{line:124,column:28}},{start:{line:124,column:32},end:{line:124,column:66}}],line:124},8:{loc:{start:{line:129,column:11},end:{line:137,column:5}},type:"if",locations:[{start:{line:129,column:11},end:{line:137,column:5}},{start:{line:133,column:11},end:{line:137,column:5}}],line:129},9:{loc:{start:{line:129,column:15},end:{line:129,column:73}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:34}},{start:{line:129,column:38},end:{line:129,column:73}}],line:129},10:{loc:{start:{line:146,column:36},end:{line:146,column:112}},type:"binary-expr",locations:[{start:{line:146,column:36},end:{line:146,column:55}},{start:{line:146,column:59},end:{line:146,column:112}}],line:146},11:{loc:{start:{line:147,column:4},end:{line:270,column:5}},type:"if",locations:[{start:{line:147,column:4},end:{line:270,column:5}},{start:{line:162,column:11},end:{line:270,column:5}}],line:147},12:{loc:{start:{line:162,column:11},end:{line:270,column:5}},type:"if",locations:[{start:{line:162,column:11},end:{line:270,column:5}},{start:{line:241,column:11},end:{line:270,column:5}}],line:162},13:{loc:{start:{line:186,column:10},end:{line:186,column:119}},type:"binary-expr",locations:[{start:{line:186,column:10},end:{line:186,column:15}},{start:{line:186,column:35},end:{line:186,column:119}}],line:186},14:{loc:{start:{line:235,column:30},end:{line:235,column:62}},type:"cond-expr",locations:[{start:{line:235,column:51},end:{line:235,column:53}},{start:{line:235,column:56},end:{line:235,column:62}}],line:235},15:{loc:{start:{line:257,column:8},end:{line:268,column:12}},type:"binary-expr",locations:[{start:{line:257,column:8},end:{line:257,column:38}},{start:{line:257,column:58},end:{line:268,column:12}}],line:257}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx"],names:[],mappings:"AAkMQ,SAkDA,UAlDA,KAGA,YAHA;AAlMR,OAAO,WAAW;AAClB,SAAS,sBAAsB;AAC/B,SAAS,sBAAsB;AAC/B,SAAQ,eAAc;AAEtB,SAAQ,SAAS,qBAAoB;AACrC,OAAO,YAAY;AAEnB,SAAQ,0BAAyB;AACjC,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,wBAAwB;AAC/B,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AACxB,OAAO,SAAS;AAChB,OAAO,wBAAwB;AAC/B,SAA+B,uBAAuB;AAItD,SAAS,gBAAgB,OAAuF;AAC9G,QAAM,SAAS,MAAM,UAAU,CAAC,KAAK;AAErC,MAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,WAAO;AAAA,EACT;AAEA,MAAI,cAAc,OAAO,CAAC;AAC1B,MAAI,UAAU,OAAO,MAAM,CAAC;AAE5B,MAAG,mBAAmB,QAAQ,WAAW,IAAI,GAAG;AAC9C,kBAAc;AACd,cAAU,CAAC,OAAO,MAAM,CAAC,CAAC;AAAA,EAC5B;AAEA,SAAO,CAAC,aAAa,GAAG,OAAO;AACjC;AAEA,SAAS,cAAc,QAA6D;AAElF,SAAQ,QAAQ,sBAAsB,MAAM,CAAQ,EAAE,OAAO,CAAC,EAAU;AAC1E;AAEA,SAAS,sBAAsB,QAAuF;AACpH,SAAO;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,YAAY,EAAC,qBAAqB,SAAQ;AAAA,IAC1C,WAAW;AAAA,MACT,OAAO;AAAA,QACL,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,IACA,UAAU;AAAA,IACV,UAAU;AAAA,IACV,UAAU;AAAA,MACR;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,QAAQ;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AACF;AAGA,SAAS,oBAAqB,QAA6D;AACzF,MAAI,OAAO,WAAW,KAAK,WAAW,SAAS,OAAO,CAAC,CAAC,GAAG;AACzD,WAAO;AAAA,EACT;AACA,QAAM,aAAa,cAAc,MAAM;AACvC,SAAO,CAAC,QAAQ,YAAY,MAAM;AACpC;AAEA,SAAS,mBAAmB,QAA6D;AACvF,SAAO,mBAAmB,QAAQ,OAAO,CAAC,CAAC,KAAK;AAClD;AAEA,SAAS,yBAAyB,QAA6D;AAC7F,MAAG,mBAAmB,MAAM,GAAG;AAC7B,WAAO,OAAO,MAAM,CAAC,EAAE,IAAI,OAAK,mBAAmB,CAAQ,CAAC,EAAE,OAAO,OAAK,KAAK,IAAI,EAAE,SAAS;AAAA,EAChG;AACA,SAAO;AACT;AAgBA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC,KAAK;AAAA,EAChB;AAAA,EAEA,YAAa,OAAkC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,qBAAqB,oBAAoB,gBAAgB,KAAK,CAAC;AAAA,IACjE;AAAA,EACF;AAAA;AAAA,EAGA,oBAAoB,WAAmB,SAAgB;AACrD,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,SAAS,IAAI;AACvB,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,iBAAiB,WAAmB;AAClC,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,OAAO,YAAY,GAAG,CAAC;AACjC,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,gBAAgB,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACzD,IAAC,cAAwB,KAAK,CAAC,MAAM,QAAQ,EAAE,CAAC;AAChD,SAAK,MAAM,SAAS,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,SAAK,MAAM,SAAS,cAAc,MAAM,CAAC;AACzC,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,sBAAsB,oBAAoB,gBAAgB,KAAK,CAAC;AAGtE,QAAI,CAAC,uBAAuB,MAAM,wBAAwB,MAAM;AAC9D,aAAO;AAAA,QACL,qBAAqB;AAAA,QACrB,qBAAqB;AAAA,MACvB;AAAA,IACF,WACS,uBAAuB,MAAM,wBAAwB,OAAO;AACnE,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF,OACK;AACH,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,EAAC,IAAI,KAAK;AACzB,UAAM,EAAC,oBAAmB,IAAI,KAAK;AACnC,UAAM,YAAU;AAAA,MACd,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,IACjC;AACA,UAAM,gBAAgB,CAAC,KAAK;AAE5B,UAAM,0BAA0B,uBAAuB,yBAAyB,gBAAgB,KAAK,KAAK,CAAC;AAE3G,QAAI,yBAAyB;AAC3B,aAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,4BAAC,OACE,YAAE,mCAAmC,GACxC;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,KAAK;AAAA,YACd,OAAO,EAAE,uBAAuB;AAAA,YAEhC;AAAA,kCAAC,kBAAe;AAAA,cACf,EAAE,uBAAuB;AAAA;AAAA;AAAA,QAC5B;AAAA,SACF;AAAA,IACF,WACS,qBAAqB;AAC5B,YAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,YAAM,cAAc,OAAO,CAAC;AAC5B,YAAM,UAAU,OAAO,MAAM,CAAC;AAE9B,YAAM,UACJ,oBAAC,SACC;AAAA,QAAC;AAAA;AAAA,UACC,SAAS,KAAK;AAAA,UACd,OAAO,EAAE,uBAAuB;AAAA,UAChC,WAAU;AAAA,UAEV,8BAAC,kBAAe;AAAA;AAAA,MAClB,GACF;AAGF,YAAM,eAAe,QAAQ,IAAI,CAAC,GAAG,QAAQ;AAC3C,cAAM,QAAQ,OAAQ,UAAU,MAAI,CAAC,GAAG;AAExC,eACE,qBAAC,SACC;AAAA,8BAAC,qBAA4B,UAAU,KAAK,iBAAiB,KAAK,MAAM,GAAG,GACzE;AAAA,YAAC;AAAA;AAAA,cACC,YAAY,KAAK,MAAM;AAAA,cACvB,QAAQ;AAAA,cACR,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM,CAAC;AAAA;AAAA,UACvD,KALsB,GAMxB;AAAA,UACC,SACC,oBAAC,SAAgB,WAAU,yBAAyB,gBAAM,WAAjD,OAAyD;AAAA,aAT5D,SAAS,GAAG,EAWtB;AAAA,MAEJ,CAAC;AAGD,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YAEC;AAAA,YACA,OAAO,EAAE,QAAQ;AAAA,YACjB,QAAQ;AAAA,YAER;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,MAAqB,KAAK,oBAAoB,GAAG,CAAC;AAAA,gBAC7D,SAAS;AAAA,kBACP,CAAC,OAAO,EAAE,sBAAsB,CAAC;AAAA,kBACjC,CAAC,QAAQ,EAAE,mBAAmB,CAAC;AAAA,kBAC/B,CAAC,OAAO,EAAE,oBAAoB,CAAC;AAAA,gBACjC;AAAA;AAAA,YACF;AAAA;AAAA,UAbI;AAAA,QAcN;AAAA,QACC;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YAEV;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBAEd;AAAA,sCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,kBACxD,EAAE,YAAY;AAAA;AAAA;AAAA,YACjB;AAAA;AAAA,UAVI;AAAA,QAWN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,YAEjD,8BAAC,OAAI,WAAsB;AAAA;AAAA,UAJvB;AAAA,QAKN;AAAA,SACF;AAAA,IAEJ,OACK;AACH,YAAM,EAAC,OAAM,IAAI,KAAK;AAEtB,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,UAAU,MAAM;AACd,mBAAK,SAAS,EAAC,qBAAqB,KAAI,CAAC;AACzC,mBAAK,MAAM,SAAS,aAAa;AAAA,YACnC;AAAA,YACA,WAAU;AAAA,YACV,OAAO;AAAA,YACP;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA,QACC,KAAK,MAAM,uBACV,qBAAC,SAAI,WAAU,yBACZ;AAAA,YAAE,qCAAqC;AAAA,UACvC;AAAA,UACD;AAAA,YAAC;AAAA;AAAA,cACC,SAAS,KAAK;AAAA,cACd,WAAU;AAAA,cAET,YAAE,0BAA0B;AAAA;AAAA,UAC/B;AAAA,WACF;AAAA,SAEJ;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e47fcaaf47a881c798f8d8c8b2982ffb5ed75681"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return hn=function(){return s},s}hn();function wy(n){hn().f[0]++;const e=(hn().s[0]++,hn().b[0][0]++,n.filter||(hn().b[0][1]++,["all"]));if(hn().s[1]++,Array.isArray(e))hn().b[1][1]++;else return hn().b[1][0]++,hn().s[2]++,e;let t=(hn().s[3]++,e[0]),i=(hn().s[4]++,e.slice(1));return hn().s[5]++,oL.indexOf(t)<0?(hn().b[2][0]++,hn().s[6]++,t="all",hn().s[7]++,i=[e.slice(0)]):hn().b[2][1]++,hn().s[8]++,[t,...i]}function Qke(n){return hn().f[1]++,hn().s[9]++,sde(qke(n)).layers[0].filter}function qke(n){return hn().f[2]++,hn().s[10]++,{id:"tmp",version:8,name:"Empty Style",metadata:{"maputnik:renderer":"mlgljs"},sources:{tmp:{type:"geojson",data:""}},sprite:"",glyphs:"https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",layers:[{id:"tmp",type:"fill",source:"tmp",filter:n}]}}const Yke=(hn().s[11]++,["all","any","none"]);function DQ(n){if(hn().f[3]++,hn().s[12]++,hn().b[4][0]++,n.length===1&&(hn().b[4][1]++,Yke.includes(n[0])))return hn().b[3][0]++,hn().s[13]++,!0;hn().b[3][1]++;const e=(hn().s[14]++,l3(n));return hn().s[15]++,!W4.isEqual(e,n)}function PQ(n){return hn().f[4]++,hn().s[16]++,oL.indexOf(n[0])>=0}function $ke(n){return hn().f[5]++,hn().s[17]++,PQ(n)?(hn().b[5][0]++,hn().s[18]++,n.slice(1).map(e=>(hn().f[6]++,hn().s[19]++,PQ(e))).filter(e=>(hn().f[7]++,hn().s[20]++,e==!0)).length>0):(hn().b[5][1]++,hn().s[21]++,!1)}class Vke extends On.Component{static defaultProps=(hn().s[22]++,{filter:["all"]});constructor(e){hn().f[8]++,hn().s[23]++,super(e),hn().s[24]++,this.state={showDoc:!1,displaySimpleFilter:DQ(wy(e))}}onFilterPartChanged(e,t){hn().f[9]++;const i=(hn().s[25]++,wy(this.props).slice(0));hn().s[26]++,i[e]=t,hn().s[27]++,this.props.onChange(i)}deleteFilterItem(e){hn().f[10]++;const t=(hn().s[28]++,wy(this.props).slice(0));hn().s[29]++,t.splice(e+1,1),hn().s[30]++,this.props.onChange(t)}addFilterItem=(hn().s[31]++,()=>{hn().f[11]++;const e=(hn().s[32]++,wy(this.props).slice(0));hn().s[33]++,e.push(["==","name",""]),hn().s[34]++,this.props.onChange(e)});onToggleDoc=(hn().s[35]++,e=>{hn().f[12]++,hn().s[36]++,this.setState({showDoc:e})});makeFilter=(hn().s[37]++,()=>{hn().f[13]++,hn().s[38]++,this.setState({displaySimpleFilter:!0})});makeExpression=(hn().s[39]++,()=>{hn().f[14]++;const e=(hn().s[40]++,wy(this.props));hn().s[41]++,this.props.onChange(Qke(e)),hn().s[42]++,this.setState({displaySimpleFilter:!1})});static getDerivedStateFromProps(e,t){hn().f[15]++;const i=(hn().s[43]++,DQ(wy(e)));return hn().s[44]++,hn().b[7][0]++,!i&&(hn().b[7][1]++,t.displaySimpleFilter===!0)?(hn().b[6][0]++,hn().s[45]++,{displaySimpleFilter:!1,valueIsSimpleFilter:!1}):(hn().b[6][1]++,hn().s[46]++,hn().b[9][0]++,i&&(hn().b[9][1]++,t.displaySimpleFilter===!1)?(hn().b[8][0]++,hn().s[47]++,{valueIsSimpleFilter:!0}):(hn().b[8][1]++,hn().s[48]++,{valueIsSimpleFilter:!1}))}render(){hn().f[16]++;const{errors:e,t}=(hn().s[49]++,this.props),{displaySimpleFilter:i}=(hn().s[50]++,this.state),r=(hn().s[51]++,{doc:Jr.layer.filter.doc+" Combine multiple filters together by using a compound filter."}),o=(hn().s[52]++,["all"]),s=(hn().s[53]++,hn().b[10][0]++,i&&(hn().b[10][1]++,$ke(wy(this.props))));if(hn().s[54]++,s)return hn().b[11][0]++,hn().s[55]++,ie.jsxs("div",{className:"maputnik-filter-editor-unsupported",children:[ie.jsx("p",{children:t("Nested filters are not supported.")}),ie.jsxs(Js,{onClick:this.makeExpression,title:t("Convert to expression"),children:[ie.jsx(T4,{}),t("Upgrade to expression")]})]});if(hn().b[11][1]++,hn().s[56]++,i){hn().b[12][0]++;const a=(hn().s[57]++,wy(this.props)),c=(hn().s[58]++,a[0]),h=(hn().s[59]++,a.slice(1)),m=(hn().s[60]++,ie.jsx("div",{children:ie.jsx(Js,{onClick:this.makeExpression,title:t("Convert to expression"),className:"maputnik-make-zoom-function",children:ie.jsx(T4,{})})})),y=(hn().s[61]++,h.map((M,x)=>{hn().f[17]++;const k=(hn().s[62]++,e[`filter[${x+1}]`]);return hn().s[63]++,ie.jsxs("div",{children:[ie.jsx(jke,{onDelete:this.deleteFilterItem.bind(this,x),children:ie.jsx(Fke,{properties:this.props.properties,filter:M,onChange:this.onFilterPartChanged.bind(this,x+1)})},x),(hn().b[13][0]++,k&&(hn().b[13][1]++,ie.jsx("div",{className:"maputnik-inline-error",children:k.message},"error")))]},`block-${x}`)}));return hn().s[64]++,ie.jsxs(ie.Fragment,{children:[ie.jsx(Gs,{fieldSpec:r,label:t("Filter"),action:m,children:ie.jsx(nC,{value:c,onChange:M=>(hn().f[18]++,hn().s[65]++,this.onFilterPartChanged(0,M)),options:[["all",t("every filter matches")],["none",t("no filter matches")],["any",t("any filter matches")]]})},"top"),y,ie.jsx("div",{className:"maputnik-filter-editor-add-wrapper",children:ie.jsxs(Js,{"data-wd-key":"layer-filter-button",className:"maputnik-add-filter",onClick:this.addFilterItem,children:[ie.jsx(U6,{style:{verticalAlign:"text-bottom"}}),t("Add filter")]})},"buttons"),ie.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(hn().b[14][0]++,""):(hn().b[14][1]++,"none")},children:ie.jsx(E6,{fieldSpec:r})},"doc")]})}else{hn().b[12][1]++;const{filter:a}=(hn().s[66]++,this.props);return hn().s[67]++,ie.jsxs(ie.Fragment,{children:[ie.jsx(fse,{onDelete:()=>{hn().f[19]++,hn().s[68]++,this.setState({displaySimpleFilter:!0}),hn().s[69]++,this.props.onChange(o)},fieldName:"filter",value:a,errors:e,onChange:this.props.onChange}),(hn().b[15][0]++,this.state.valueIsSimpleFilter&&(hn().b[15][1]++,ie.jsxs("div",{className:"maputnik-expr-infobox",children:[t("You've entered an old style filter.")," ",ie.jsx("button",{onClick:this.makeFilter,className:"maputnik-expr-infobox__button",children:t("Switch to filter editor.")})]})))]})}}}const Hke=(hn().s[70]++,$o()(Vke));var YC={},ld={},$C={},K8,UQ;function pse(){if(UQ)return K8;UQ=1;var n=typeof window=="object"&&window&&window.Object===Object&&window;return K8=n,K8}var L8,KQ;function mm(){if(KQ)return L8;KQ=1;var n=pse(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return L8=t,L8}var F8,LQ;function I5(){if(LQ)return F8;LQ=1;var n=mm(),e=n.Symbol;return F8=e,F8}var z8,FQ;function Zke(){if(FQ)return z8;FQ=1;var n=I5(),e=Object.prototype,t=e.hasOwnProperty,i=e.toString,r=n?n.toStringTag:void 0;function o(s){var a=t.call(s,r),c=s[r];try{s[r]=void 0;var h=!0}catch{}var m=i.call(s);return h&&(a?s[r]=c:delete s[r]),m}return z8=o,z8}var j8,zQ;function Xke(){if(zQ)return j8;zQ=1;var n=Object.prototype,e=n.toString;function t(i){return e.call(i)}return j8=t,j8}var N8,jQ;function iC(){if(jQ)return N8;jQ=1;var n=I5(),e=Zke(),t=Xke(),i="[object Null]",r="[object Undefined]",o=n?n.toStringTag:void 0;function s(a){return a==null?a===void 0?r:i:o&&o in Object(a)?e(a):t(a)}return N8=s,N8}var G8,NQ;function wf(){if(NQ)return G8;NQ=1;var n=Array.isArray;return G8=n,G8}var W8,GQ;function Vg(){if(GQ)return W8;GQ=1;function n(e){return e!=null&&typeof e=="object"}return W8=n,W8}var Q8,WQ;function Jke(){if(WQ)return Q8;WQ=1;var n=iC(),e=wf(),t=Vg(),i="[object String]";function r(o){return typeof o=="string"||!e(o)&&t(o)&&n(o)==i}return Q8=r,Q8}var q8,QQ;function eTe(){if(QQ)return q8;QQ=1;function n(e){return function(t,i,r){for(var o=-1,s=Object(t),a=r(t),c=a.length;c--;){var h=a[e?c:++o];if(i(s[h],h,s)===!1)break}return t}}return q8=n,q8}var Y8,qQ;function mse(){if(qQ)return Y8;qQ=1;var n=eTe(),e=n();return Y8=e,Y8}var $8,YQ;function tTe(){if(YQ)return $8;YQ=1;function n(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}return $8=n,$8}var V8,$Q;function nTe(){if($Q)return V8;$Q=1;var n=iC(),e=Vg(),t="[object Arguments]";function i(r){return e(r)&&n(r)==t}return V8=i,V8}var H8,VQ;function aL(){if(VQ)return H8;VQ=1;var n=nTe(),e=Vg(),t=Object.prototype,i=t.hasOwnProperty,r=t.propertyIsEnumerable,o=n((function(){return arguments})())?n:function(s){return e(s)&&i.call(s,"callee")&&!r.call(s,"callee")};return H8=o,H8}var X2={exports:{}},Z8,HQ;function iTe(){if(HQ)return Z8;HQ=1;function n(){return!1}return Z8=n,Z8}X2.exports;var ZQ;function L6(){return ZQ||(ZQ=1,(function(n,e){var t=mm(),i=iTe(),r=e&&!e.nodeType&&e,o=r&&!0&&n&&!n.nodeType&&n,s=o&&o.exports===r,a=s?t.Buffer:void 0,c=a?a.isBuffer:void 0,h=c||i;n.exports=h})(X2,X2.exports)),X2.exports}var X8,XQ;function lL(){if(XQ)return X8;XQ=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(i,r){var o=typeof i;return r=r??n,!!r&&(o=="number"||o!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<r}return X8=t,X8}var J8,JQ;function uL(){if(JQ)return J8;JQ=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return J8=e,J8}var e7,eq;function rTe(){if(eq)return e7;eq=1;var n=iC(),e=uL(),t=Vg(),i="[object Arguments]",r="[object Array]",o="[object Boolean]",s="[object Date]",a="[object Error]",c="[object Function]",h="[object Map]",m="[object Number]",y="[object Object]",M="[object RegExp]",x="[object Set]",k="[object String]",P="[object WeakMap]",F="[object ArrayBuffer]",j="[object DataView]",q="[object Float32Array]",V="[object Float64Array]",H="[object Int8Array]",G="[object Int16Array]",Y="[object Int32Array]",z="[object Uint8Array]",se="[object Uint8ClampedArray]",le="[object Uint16Array]",me="[object Uint32Array]",de={};de[q]=de[V]=de[H]=de[G]=de[Y]=de[z]=de[se]=de[le]=de[me]=!0,de[i]=de[r]=de[F]=de[o]=de[j]=de[s]=de[a]=de[c]=de[h]=de[m]=de[y]=de[M]=de[x]=de[k]=de[P]=!1;function be(Ee){return t(Ee)&&e(Ee.length)&&!!de[n(Ee)]}return e7=be,e7}var t7,tq;function cL(){if(tq)return t7;tq=1;function n(e){return function(t){return e(t)}}return t7=n,t7}var J2={exports:{}};J2.exports;var nq;function AL(){return nq||(nq=1,(function(n,e){var t=pse(),i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,o=r&&r.exports===i,s=o&&t.process,a=(function(){try{var c=r&&r.require&&r.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}})();n.exports=a})(J2,J2.exports)),J2.exports}var n7,iq;function hL(){if(iq)return n7;iq=1;var n=rTe(),e=cL(),t=AL(),i=t&&t.isTypedArray,r=i?e(i):n;return n7=r,n7}var i7,rq;function gse(){if(rq)return i7;rq=1;var n=tTe(),e=aL(),t=wf(),i=L6(),r=lL(),o=hL(),s=Object.prototype,a=s.hasOwnProperty;function c(h,m){var y=t(h),M=!y&&e(h),x=!y&&!M&&i(h),k=!y&&!M&&!x&&o(h),P=y||M||x||k,F=P?n(h.length,String):[],j=F.length;for(var q in h)(m||a.call(h,q))&&!(P&&(q=="length"||x&&(q=="offset"||q=="parent")||k&&(q=="buffer"||q=="byteLength"||q=="byteOffset")||r(q,j)))&&F.push(q);return F}return i7=c,i7}var r7,oq;function dL(){if(oq)return r7;oq=1;var n=Object.prototype;function e(t){var i=t&&t.constructor,r=typeof i=="function"&&i.prototype||n;return t===r}return r7=e,r7}var o7,sq;function yse(){if(sq)return o7;sq=1;function n(e,t){return function(i){return e(t(i))}}return o7=n,o7}var s7,aq;function oTe(){if(aq)return s7;aq=1;var n=yse(),e=n(Object.keys,Object);return s7=e,s7}var a7,lq;function sTe(){if(lq)return a7;lq=1;var n=dL(),e=oTe(),t=Object.prototype,i=t.hasOwnProperty;function r(o){if(!n(o))return e(o);var s=[];for(var a in Object(o))i.call(o,a)&&a!="constructor"&&s.push(a);return s}return a7=r,a7}var l7,uq;function gp(){if(uq)return l7;uq=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return l7=n,l7}var u7,cq;function fL(){if(cq)return u7;cq=1;var n=iC(),e=gp(),t="[object AsyncFunction]",i="[object Function]",r="[object GeneratorFunction]",o="[object Proxy]";function s(a){if(!e(a))return!1;var c=n(a);return c==i||c==r||c==t||c==o}return u7=s,u7}var c7,Aq;function Vx(){if(Aq)return c7;Aq=1;var n=fL(),e=uL();function t(i){return i!=null&&e(i.length)&&!n(i)}return c7=t,c7}var A7,hq;function k5(){if(hq)return A7;hq=1;var n=gse(),e=sTe(),t=Vx();function i(r){return t(r)?n(r):e(r)}return A7=i,A7}var h7,dq;function vse(){if(dq)return h7;dq=1;var n=mse(),e=k5();function t(i,r){return i&&n(i,r,e)}return h7=t,h7}var d7,fq;function F6(){if(fq)return d7;fq=1;function n(e){return e}return d7=n,d7}var f7,pq;function bse(){if(pq)return f7;pq=1;var n=F6();function e(t){return typeof t=="function"?t:n}return f7=e,f7}var p7,mq;function pL(){if(mq)return p7;mq=1;var n=vse(),e=bse();function t(i,r){return i&&n(i,e(r))}return p7=t,p7}var m7,gq;function mL(){if(gq)return m7;gq=1;var n=yse(),e=n(Object.getPrototypeOf,Object);return m7=e,m7}var g7,yq;function Cse(){if(yq)return g7;yq=1;var n=iC(),e=mL(),t=Vg(),i="[object Object]",r=Function.prototype,o=Object.prototype,s=r.toString,a=o.hasOwnProperty,c=s.call(Object);function h(m){if(!t(m)||n(m)!=i)return!1;var y=e(m);if(y===null)return!0;var M=a.call(y,"constructor")&&y.constructor;return typeof M=="function"&&M instanceof M&&s.call(M)==c}return g7=h,g7}var y7,vq;function _se(){if(vq)return y7;vq=1;function n(e,t){for(var i=-1,r=e==null?0:e.length,o=Array(r);++i<r;)o[i]=t(e[i],i,e);return o}return y7=n,y7}var v7,bq;function aTe(){if(bq)return v7;bq=1;function n(){this.__data__=[],this.size=0}return v7=n,v7}var b7,Cq;function T5(){if(Cq)return b7;Cq=1;function n(e,t){return e===t||e!==e&&t!==t}return b7=n,b7}var C7,_q;function z6(){if(_q)return C7;_q=1;var n=T5();function e(t,i){for(var r=t.length;r--;)if(n(t[r][0],i))return r;return-1}return C7=e,C7}var _7,xq;function lTe(){if(xq)return _7;xq=1;var n=z6(),e=Array.prototype,t=e.splice;function i(r){var o=this.__data__,s=n(o,r);if(s<0)return!1;var a=o.length-1;return s==a?o.pop():t.call(o,s,1),--this.size,!0}return _7=i,_7}var x7,Mq;function uTe(){if(Mq)return x7;Mq=1;var n=z6();function e(t){var i=this.__data__,r=n(i,t);return r<0?void 0:i[r][1]}return x7=e,x7}var M7,wq;function cTe(){if(wq)return M7;wq=1;var n=z6();function e(t){return n(this.__data__,t)>-1}return M7=e,M7}var w7,Sq;function ATe(){if(Sq)return w7;Sq=1;var n=z6();function e(t,i){var r=this.__data__,o=n(r,t);return o<0?(++this.size,r.push([t,i])):r[o][1]=i,this}return w7=e,w7}var S7,Eq;function j6(){if(Eq)return S7;Eq=1;var n=aTe(),e=lTe(),t=uTe(),i=cTe(),r=ATe();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var h=s[a];this.set(h[0],h[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,S7=o,S7}var E7,Oq;function hTe(){if(Oq)return E7;Oq=1;var n=j6();function e(){this.__data__=new n,this.size=0}return E7=e,E7}var O7,Bq;function dTe(){if(Bq)return O7;Bq=1;function n(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}return O7=n,O7}var B7,Iq;function fTe(){if(Iq)return B7;Iq=1;function n(e){return this.__data__.get(e)}return B7=n,B7}var I7,kq;function pTe(){if(kq)return I7;kq=1;function n(e){return this.__data__.has(e)}return I7=n,I7}var k7,Tq;function mTe(){if(Tq)return k7;Tq=1;var n=mm(),e=n["__core-js_shared__"];return k7=e,k7}var T7,Rq;function gTe(){if(Rq)return T7;Rq=1;var n=mTe(),e=(function(){var i=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function t(i){return!!e&&e in i}return T7=t,T7}var R7,Dq;function xse(){if(Dq)return R7;Dq=1;var n=Function.prototype,e=n.toString;function t(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return R7=t,R7}var D7,Pq;function yTe(){if(Pq)return D7;Pq=1;var n=fL(),e=gTe(),t=gp(),i=xse(),r=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,s=Function.prototype,a=Object.prototype,c=s.toString,h=a.hasOwnProperty,m=RegExp("^"+c.call(h).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function y(M){if(!t(M)||e(M))return!1;var x=n(M)?m:o;return x.test(i(M))}return D7=y,D7}var P7,Uq;function vTe(){if(Uq)return P7;Uq=1;function n(e,t){return e?.[t]}return P7=n,P7}var U7,Kq;function rC(){if(Kq)return U7;Kq=1;var n=yTe(),e=vTe();function t(i,r){var o=e(i,r);return n(o)?o:void 0}return U7=t,U7}var K7,Lq;function gL(){if(Lq)return K7;Lq=1;var n=rC(),e=mm(),t=n(e,"Map");return K7=t,K7}var L7,Fq;function N6(){if(Fq)return L7;Fq=1;var n=rC(),e=n(Object,"create");return L7=e,L7}var F7,zq;function bTe(){if(zq)return F7;zq=1;var n=N6();function e(){this.__data__=n?n(null):{},this.size=0}return F7=e,F7}var z7,jq;function CTe(){if(jq)return z7;jq=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return z7=n,z7}var j7,Nq;function _Te(){if(Nq)return j7;Nq=1;var n=N6(),e="__lodash_hash_undefined__",t=Object.prototype,i=t.hasOwnProperty;function r(o){var s=this.__data__;if(n){var a=s[o];return a===e?void 0:a}return i.call(s,o)?s[o]:void 0}return j7=r,j7}var N7,Gq;function xTe(){if(Gq)return N7;Gq=1;var n=N6(),e=Object.prototype,t=e.hasOwnProperty;function i(r){var o=this.__data__;return n?o[r]!==void 0:t.call(o,r)}return N7=i,N7}var G7,Wq;function MTe(){if(Wq)return G7;Wq=1;var n=N6(),e="__lodash_hash_undefined__";function t(i,r){var o=this.__data__;return this.size+=this.has(i)?0:1,o[i]=n&&r===void 0?e:r,this}return G7=t,G7}var W7,Qq;function wTe(){if(Qq)return W7;Qq=1;var n=bTe(),e=CTe(),t=_Te(),i=xTe(),r=MTe();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var h=s[a];this.set(h[0],h[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,W7=o,W7}var Q7,qq;function STe(){if(qq)return Q7;qq=1;var n=wTe(),e=j6(),t=gL();function i(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return Q7=i,Q7}var q7,Yq;function ETe(){if(Yq)return q7;Yq=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return q7=n,q7}var Y7,$q;function G6(){if($q)return Y7;$q=1;var n=ETe();function e(t,i){var r=t.__data__;return n(i)?r[typeof i=="string"?"string":"hash"]:r.map}return Y7=e,Y7}var $7,Vq;function OTe(){if(Vq)return $7;Vq=1;var n=G6();function e(t){var i=n(this,t).delete(t);return this.size-=i?1:0,i}return $7=e,$7}var V7,Hq;function BTe(){if(Hq)return V7;Hq=1;var n=G6();function e(t){return n(this,t).get(t)}return V7=e,V7}var H7,Zq;function ITe(){if(Zq)return H7;Zq=1;var n=G6();function e(t){return n(this,t).has(t)}return H7=e,H7}var Z7,Xq;function kTe(){if(Xq)return Z7;Xq=1;var n=G6();function e(t,i){var r=n(this,t),o=r.size;return r.set(t,i),this.size+=r.size==o?0:1,this}return Z7=e,Z7}var X7,Jq;function yL(){if(Jq)return X7;Jq=1;var n=STe(),e=OTe(),t=BTe(),i=ITe(),r=kTe();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var h=s[a];this.set(h[0],h[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,X7=o,X7}var J7,eY;function TTe(){if(eY)return J7;eY=1;var n=j6(),e=gL(),t=yL(),i=200;function r(o,s){var a=this.__data__;if(a instanceof n){var c=a.__data__;if(!e||c.length<i-1)return c.push([o,s]),this.size=++a.size,this;a=this.__data__=new t(c)}return a.set(o,s),this.size=a.size,this}return J7=r,J7}var eI,tY;function W6(){if(tY)return eI;tY=1;var n=j6(),e=hTe(),t=dTe(),i=fTe(),r=pTe(),o=TTe();function s(a){var c=this.__data__=new n(a);this.size=c.size}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=i,s.prototype.has=r,s.prototype.set=o,eI=s,eI}var tI,nY;function RTe(){if(nY)return tI;nY=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return tI=e,tI}var nI,iY;function DTe(){if(iY)return nI;iY=1;function n(e){return this.__data__.has(e)}return nI=n,nI}var iI,rY;function PTe(){if(rY)return iI;rY=1;var n=yL(),e=RTe(),t=DTe();function i(r){var o=-1,s=r==null?0:r.length;for(this.__data__=new n;++o<s;)this.add(r[o])}return i.prototype.add=i.prototype.push=e,i.prototype.has=t,iI=i,iI}var rI,oY;function UTe(){if(oY)return rI;oY=1;function n(e,t){for(var i=-1,r=e==null?0:e.length;++i<r;)if(t(e[i],i,e))return!0;return!1}return rI=n,rI}var oI,sY;function KTe(){if(sY)return oI;sY=1;function n(e,t){return e.has(t)}return oI=n,oI}var sI,aY;function Mse(){if(aY)return sI;aY=1;var n=PTe(),e=UTe(),t=KTe(),i=1,r=2;function o(s,a,c,h,m,y){var M=c&i,x=s.length,k=a.length;if(x!=k&&!(M&&k>x))return!1;var P=y.get(s),F=y.get(a);if(P&&F)return P==a&&F==s;var j=-1,q=!0,V=c&r?new n:void 0;for(y.set(s,a),y.set(a,s);++j<x;){var H=s[j],G=a[j];if(h)var Y=M?h(G,H,j,a,s,y):h(H,G,j,s,a,y);if(Y!==void 0){if(Y)continue;q=!1;break}if(V){if(!e(a,function(z,se){if(!t(V,se)&&(H===z||m(H,z,c,h,y)))return V.push(se)})){q=!1;break}}else if(!(H===G||m(H,G,c,h,y))){q=!1;break}}return y.delete(s),y.delete(a),q}return sI=o,sI}var aI,lY;function wse(){if(lY)return aI;lY=1;var n=mm(),e=n.Uint8Array;return aI=e,aI}var lI,uY;function LTe(){if(uY)return lI;uY=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(r,o){i[++t]=[o,r]}),i}return lI=n,lI}var uI,cY;function FTe(){if(cY)return uI;cY=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(r){i[++t]=r}),i}return uI=n,uI}var cI,AY;function zTe(){if(AY)return cI;AY=1;var n=I5(),e=wse(),t=T5(),i=Mse(),r=LTe(),o=FTe(),s=1,a=2,c="[object Boolean]",h="[object Date]",m="[object Error]",y="[object Map]",M="[object Number]",x="[object RegExp]",k="[object Set]",P="[object String]",F="[object Symbol]",j="[object ArrayBuffer]",q="[object DataView]",V=n?n.prototype:void 0,H=V?V.valueOf:void 0;function G(Y,z,se,le,me,de,be){switch(se){case q:if(Y.byteLength!=z.byteLength||Y.byteOffset!=z.byteOffset)return!1;Y=Y.buffer,z=z.buffer;case j:return!(Y.byteLength!=z.byteLength||!de(new e(Y),new e(z)));case c:case h:case M:return t(+Y,+z);case m:return Y.name==z.name&&Y.message==z.message;case x:case P:return Y==z+"";case y:var Ee=r;case k:var De=le&s;if(Ee||(Ee=o),Y.size!=z.size&&!De)return!1;var je=be.get(Y);if(je)return je==z;le|=a,be.set(Y,z);var Ie=i(Ee(Y),Ee(z),le,me,de,be);return be.delete(Y),Ie;case F:if(H)return H.call(Y)==H.call(z)}return!1}return cI=G,cI}var AI,hY;function Sse(){if(hY)return AI;hY=1;function n(e,t){for(var i=-1,r=t.length,o=e.length;++i<r;)e[o+i]=t[i];return e}return AI=n,AI}var hI,dY;function Ese(){if(dY)return hI;dY=1;var n=Sse(),e=wf();function t(i,r,o){var s=r(i);return e(i)?s:n(s,o(i))}return hI=t,hI}var dI,fY;function jTe(){if(fY)return dI;fY=1;function n(e,t){for(var i=-1,r=e==null?0:e.length,o=0,s=[];++i<r;){var a=e[i];t(a,i,e)&&(s[o++]=a)}return s}return dI=n,dI}var fI,pY;function Ose(){if(pY)return fI;pY=1;function n(){return[]}return fI=n,fI}var pI,mY;function vL(){if(mY)return pI;mY=1;var n=jTe(),e=Ose(),t=Object.prototype,i=t.propertyIsEnumerable,r=Object.getOwnPropertySymbols,o=r?function(s){return s==null?[]:(s=Object(s),n(r(s),function(a){return i.call(s,a)}))}:e;return pI=o,pI}var mI,gY;function Bse(){if(gY)return mI;gY=1;var n=Ese(),e=vL(),t=k5();function i(r){return n(r,t,e)}return mI=i,mI}var gI,yY;function NTe(){if(yY)return gI;yY=1;var n=Bse(),e=1,t=Object.prototype,i=t.hasOwnProperty;function r(o,s,a,c,h,m){var y=a&e,M=n(o),x=M.length,k=n(s),P=k.length;if(x!=P&&!y)return!1;for(var F=x;F--;){var j=M[F];if(!(y?j in s:i.call(s,j)))return!1}var q=m.get(o),V=m.get(s);if(q&&V)return q==s&&V==o;var H=!0;m.set(o,s),m.set(s,o);for(var G=y;++F<x;){j=M[F];var Y=o[j],z=s[j];if(c)var se=y?c(z,Y,j,s,o,m):c(Y,z,j,o,s,m);if(!(se===void 0?Y===z||h(Y,z,a,c,m):se)){H=!1;break}G||(G=j=="constructor")}if(H&&!G){var le=o.constructor,me=s.constructor;le!=me&&"constructor"in o&&"constructor"in s&&!(typeof le=="function"&&le instanceof le&&typeof me=="function"&&me instanceof me)&&(H=!1)}return m.delete(o),m.delete(s),H}return gI=r,gI}var yI,vY;function GTe(){if(vY)return yI;vY=1;var n=rC(),e=mm(),t=n(e,"DataView");return yI=t,yI}var vI,bY;function WTe(){if(bY)return vI;bY=1;var n=rC(),e=mm(),t=n(e,"Promise");return vI=t,vI}var bI,CY;function QTe(){if(CY)return bI;CY=1;var n=rC(),e=mm(),t=n(e,"Set");return bI=t,bI}var CI,_Y;function qTe(){if(_Y)return CI;_Y=1;var n=rC(),e=mm(),t=n(e,"WeakMap");return CI=t,CI}var _I,xY;function Q6(){if(xY)return _I;xY=1;var n=GTe(),e=gL(),t=WTe(),i=QTe(),r=qTe(),o=iC(),s=xse(),a="[object Map]",c="[object Object]",h="[object Promise]",m="[object Set]",y="[object WeakMap]",M="[object DataView]",x=s(n),k=s(e),P=s(t),F=s(i),j=s(r),q=o;return(n&&q(new n(new ArrayBuffer(1)))!=M||e&&q(new e)!=a||t&&q(t.resolve())!=h||i&&q(new i)!=m||r&&q(new r)!=y)&&(q=function(V){var H=o(V),G=H==c?V.constructor:void 0,Y=G?s(G):"";if(Y)switch(Y){case x:return M;case k:return a;case P:return h;case F:return m;case j:return y}return H}),_I=q,_I}var xI,MY;function YTe(){if(MY)return xI;MY=1;var n=W6(),e=Mse(),t=zTe(),i=NTe(),r=Q6(),o=wf(),s=L6(),a=hL(),c=1,h="[object Arguments]",m="[object Array]",y="[object Object]",M=Object.prototype,x=M.hasOwnProperty;function k(P,F,j,q,V,H){var G=o(P),Y=o(F),z=G?m:r(P),se=Y?m:r(F);z=z==h?y:z,se=se==h?y:se;var le=z==y,me=se==y,de=z==se;if(de&&s(P)){if(!s(F))return!1;G=!0,le=!1}if(de&&!le)return H||(H=new n),G||a(P)?e(P,F,j,q,V,H):t(P,F,z,j,q,V,H);if(!(j&c)){var be=le&&x.call(P,"__wrapped__"),Ee=me&&x.call(F,"__wrapped__");if(be||Ee){var De=be?P.value():P,je=Ee?F.value():F;return H||(H=new n),V(De,je,j,q,H)}}return de?(H||(H=new n),i(P,F,j,q,V,H)):!1}return xI=k,xI}var MI,wY;function Ise(){if(wY)return MI;wY=1;var n=YTe(),e=Vg();function t(i,r,o,s,a){return i===r?!0:i==null||r==null||!e(i)&&!e(r)?i!==i&&r!==r:n(i,r,o,s,t,a)}return MI=t,MI}var wI,SY;function $Te(){if(SY)return wI;SY=1;var n=W6(),e=Ise(),t=1,i=2;function r(o,s,a,c){var h=a.length,m=h,y=!c;if(o==null)return!m;for(o=Object(o);h--;){var M=a[h];if(y&&M[2]?M[1]!==o[M[0]]:!(M[0]in o))return!1}for(;++h<m;){M=a[h];var x=M[0],k=o[x],P=M[1];if(y&&M[2]){if(k===void 0&&!(x in o))return!1}else{var F=new n;if(c)var j=c(k,P,x,o,s,F);if(!(j===void 0?e(P,k,t|i,c,F):j))return!1}}return!0}return wI=r,wI}var SI,EY;function kse(){if(EY)return SI;EY=1;var n=gp();function e(t){return t===t&&!n(t)}return SI=e,SI}var EI,OY;function VTe(){if(OY)return EI;OY=1;var n=kse(),e=k5();function t(i){for(var r=e(i),o=r.length;o--;){var s=r[o],a=i[s];r[o]=[s,a,n(a)]}return r}return EI=t,EI}var OI,BY;function Tse(){if(BY)return OI;BY=1;function n(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==void 0||e in Object(i))}}return OI=n,OI}var BI,IY;function HTe(){if(IY)return BI;IY=1;var n=$Te(),e=VTe(),t=Tse();function i(r){var o=e(r);return o.length==1&&o[0][2]?t(o[0][0],o[0][1]):function(s){return s===r||n(s,r,o)}}return BI=i,BI}var II,kY;function q6(){if(kY)return II;kY=1;var n=iC(),e=Vg(),t="[object Symbol]";function i(r){return typeof r=="symbol"||e(r)&&n(r)==t}return II=i,II}var kI,TY;function bL(){if(TY)return kI;TY=1;var n=wf(),e=q6(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(o,s){if(n(o))return!1;var a=typeof o;return a=="number"||a=="symbol"||a=="boolean"||o==null||e(o)?!0:i.test(o)||!t.test(o)||s!=null&&o in Object(s)}return kI=r,kI}var TI,RY;function ZTe(){if(RY)return TI;RY=1;var n=yL(),e="Expected a function";function t(i,r){if(typeof i!="function"||r!=null&&typeof r!="function")throw new TypeError(e);var o=function(){var s=arguments,a=r?r.apply(this,s):s[0],c=o.cache;if(c.has(a))return c.get(a);var h=i.apply(this,s);return o.cache=c.set(a,h)||c,h};return o.cache=new(t.Cache||n),o}return t.Cache=n,TI=t,TI}var RI,DY;function XTe(){if(DY)return RI;DY=1;var n=ZTe(),e=500;function t(i){var r=n(i,function(s){return o.size===e&&o.clear(),s}),o=r.cache;return r}return RI=t,RI}var DI,PY;function JTe(){if(PY)return DI;PY=1;var n=XTe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,i=n(function(r){var o=[];return r.charCodeAt(0)===46&&o.push(""),r.replace(e,function(s,a,c,h){o.push(c?h.replace(t,"$1"):a||s)}),o});return DI=i,DI}var PI,UY;function e9e(){if(UY)return PI;UY=1;var n=I5(),e=_se(),t=wf(),i=q6(),r=n?n.prototype:void 0,o=r?r.toString:void 0;function s(a){if(typeof a=="string")return a;if(t(a))return e(a,s)+"";if(i(a))return o?o.call(a):"";var c=a+"";return c=="0"&&1/a==-1/0?"-0":c}return PI=s,PI}var UI,KY;function t9e(){if(KY)return UI;KY=1;var n=e9e();function e(t){return t==null?"":n(t)}return UI=e,UI}var KI,LY;function Rse(){if(LY)return KI;LY=1;var n=wf(),e=bL(),t=JTe(),i=t9e();function r(o,s){return n(o)?o:e(o,s)?[o]:t(i(o))}return KI=r,KI}var LI,FY;function Y6(){if(FY)return LI;FY=1;var n=q6();function e(t){if(typeof t=="string"||n(t))return t;var i=t+"";return i=="0"&&1/t==-1/0?"-0":i}return LI=e,LI}var FI,zY;function Dse(){if(zY)return FI;zY=1;var n=Rse(),e=Y6();function t(i,r){r=n(r,i);for(var o=0,s=r.length;i!=null&&o<s;)i=i[e(r[o++])];return o&&o==s?i:void 0}return FI=t,FI}var zI,jY;function n9e(){if(jY)return zI;jY=1;var n=Dse();function e(t,i,r){var o=t==null?void 0:n(t,i);return o===void 0?r:o}return zI=e,zI}var jI,NY;function i9e(){if(NY)return jI;NY=1;function n(e,t){return e!=null&&t in Object(e)}return jI=n,jI}var NI,GY;function r9e(){if(GY)return NI;GY=1;var n=Rse(),e=aL(),t=wf(),i=lL(),r=uL(),o=Y6();function s(a,c,h){c=n(c,a);for(var m=-1,y=c.length,M=!1;++m<y;){var x=o(c[m]);if(!(M=a!=null&&h(a,x)))break;a=a[x]}return M||++m!=y?M:(y=a==null?0:a.length,!!y&&r(y)&&i(x,y)&&(t(a)||e(a)))}return NI=s,NI}var GI,WY;function o9e(){if(WY)return GI;WY=1;var n=i9e(),e=r9e();function t(i,r){return i!=null&&e(i,r,n)}return GI=t,GI}var WI,QY;function s9e(){if(QY)return WI;QY=1;var n=Ise(),e=n9e(),t=o9e(),i=bL(),r=kse(),o=Tse(),s=Y6(),a=1,c=2;function h(m,y){return i(m)&&r(y)?o(s(m),y):function(M){var x=e(M,m);return x===void 0&&x===y?t(M,m):n(y,x,a|c)}}return WI=h,WI}var QI,qY;function a9e(){if(qY)return QI;qY=1;function n(e){return function(t){return t?.[e]}}return QI=n,QI}var qI,YY;function l9e(){if(YY)return qI;YY=1;var n=Dse();function e(t){return function(i){return n(i,t)}}return qI=e,qI}var YI,$Y;function u9e(){if($Y)return YI;$Y=1;var n=a9e(),e=l9e(),t=bL(),i=Y6();function r(o){return t(o)?n(i(o)):e(o)}return YI=r,YI}var $I,VY;function c9e(){if(VY)return $I;VY=1;var n=HTe(),e=s9e(),t=F6(),i=wf(),r=u9e();function o(s){return typeof s=="function"?s:s==null?t:typeof s=="object"?i(s)?e(s[0],s[1]):n(s):r(s)}return $I=o,$I}var VI,HY;function A9e(){if(HY)return VI;HY=1;var n=Vx();function e(t,i){return function(r,o){if(r==null)return r;if(!n(r))return t(r,o);for(var s=r.length,a=i?s:-1,c=Object(r);(i?a--:++a<s)&&o(c[a],a,c)!==!1;);return r}}return VI=e,VI}var HI,ZY;function Pse(){if(ZY)return HI;ZY=1;var n=vse(),e=A9e(),t=e(n);return HI=t,HI}var ZI,XY;function h9e(){if(XY)return ZI;XY=1;var n=Pse(),e=Vx();function t(i,r){var o=-1,s=e(i)?Array(i.length):[];return n(i,function(a,c,h){s[++o]=r(a,c,h)}),s}return ZI=t,ZI}var XI,JY;function d9e(){if(JY)return XI;JY=1;var n=_se(),e=c9e(),t=h9e(),i=wf();function r(o,s){var a=i(o)?n:t;return a(o,e(s,3))}return XI=r,XI}var e$;function f9e(){if(e$)return $C;e$=1,Object.defineProperty($C,"__esModule",{value:!0}),$C.flattenNames=void 0;var n=Jke(),e=c(n),t=pL(),i=c(t),r=Cse(),o=c(r),s=d9e(),a=c(s);function c(m){return m&&m.__esModule?m:{default:m}}var h=$C.flattenNames=function m(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],M=[];return(0,a.default)(y,function(x){Array.isArray(x)?m(x).map(function(k){return M.push(k)}):(0,o.default)(x)?(0,i.default)(x,function(k,P){k===!0&&M.push(P),M.push(P+"-"+k)}):(0,e.default)(x)&&M.push(x)}),M};return $C.default=h,$C}var VC={},JI,t$;function Use(){if(t$)return JI;t$=1;function n(e,t){for(var i=-1,r=e==null?0:e.length;++i<r&&t(e[i],i,e)!==!1;);return e}return JI=n,JI}var ek,n$;function Kse(){if(n$)return ek;n$=1;var n=rC(),e=(function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}})();return ek=e,ek}var tk,i$;function CL(){if(i$)return tk;i$=1;var n=Kse();function e(t,i,r){i=="__proto__"&&n?n(t,i,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[i]=r}return tk=e,tk}var nk,r$;function Lse(){if(r$)return nk;r$=1;var n=CL(),e=T5(),t=Object.prototype,i=t.hasOwnProperty;function r(o,s,a){var c=o[s];(!(i.call(o,s)&&e(c,a))||a===void 0&&!(s in o))&&n(o,s,a)}return nk=r,nk}var ik,o$;function R5(){if(o$)return ik;o$=1;var n=Lse(),e=CL();function t(i,r,o,s){var a=!o;o||(o={});for(var c=-1,h=r.length;++c<h;){var m=r[c],y=s?s(o[m],i[m],m,o,i):void 0;y===void 0&&(y=i[m]),a?e(o,m,y):n(o,m,y)}return o}return ik=t,ik}var rk,s$;function p9e(){if(s$)return rk;s$=1;var n=R5(),e=k5();function t(i,r){return i&&n(r,e(r),i)}return rk=t,rk}var ok,a$;function m9e(){if(a$)return ok;a$=1;function n(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}return ok=n,ok}var sk,l$;function g9e(){if(l$)return sk;l$=1;var n=gp(),e=dL(),t=m9e(),i=Object.prototype,r=i.hasOwnProperty;function o(s){if(!n(s))return t(s);var a=e(s),c=[];for(var h in s)h=="constructor"&&(a||!r.call(s,h))||c.push(h);return c}return sk=o,sk}var ak,u$;function D5(){if(u$)return ak;u$=1;var n=gse(),e=g9e(),t=Vx();function i(r){return t(r)?n(r,!0):e(r)}return ak=i,ak}var lk,c$;function y9e(){if(c$)return lk;c$=1;var n=R5(),e=D5();function t(i,r){return i&&n(r,e(r),i)}return lk=t,lk}var e3={exports:{}};e3.exports;var A$;function Fse(){return A$||(A$=1,(function(n,e){var t=mm(),i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,o=r&&r.exports===i,s=o?t.Buffer:void 0,a=s?s.allocUnsafe:void 0;function c(h,m){if(m)return h.slice();var y=h.length,M=a?a(y):new h.constructor(y);return h.copy(M),M}n.exports=c})(e3,e3.exports)),e3.exports}var uk,h$;function zse(){if(h$)return uk;h$=1;function n(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}return uk=n,uk}var ck,d$;function v9e(){if(d$)return ck;d$=1;var n=R5(),e=vL();function t(i,r){return n(i,e(i),r)}return ck=t,ck}var Ak,f$;function jse(){if(f$)return Ak;f$=1;var n=Sse(),e=mL(),t=vL(),i=Ose(),r=Object.getOwnPropertySymbols,o=r?function(s){for(var a=[];s;)n(a,t(s)),s=e(s);return a}:i;return Ak=o,Ak}var hk,p$;function b9e(){if(p$)return hk;p$=1;var n=R5(),e=jse();function t(i,r){return n(i,e(i),r)}return hk=t,hk}var dk,m$;function C9e(){if(m$)return dk;m$=1;var n=Ese(),e=jse(),t=D5();function i(r){return n(r,t,e)}return dk=i,dk}var fk,g$;function _9e(){if(g$)return fk;g$=1;var n=Object.prototype,e=n.hasOwnProperty;function t(i){var r=i.length,o=new i.constructor(r);return r&&typeof i[0]=="string"&&e.call(i,"index")&&(o.index=i.index,o.input=i.input),o}return fk=t,fk}var pk,y$;function _L(){if(y$)return pk;y$=1;var n=wse();function e(t){var i=new t.constructor(t.byteLength);return new n(i).set(new n(t)),i}return pk=e,pk}var mk,v$;function x9e(){if(v$)return mk;v$=1;var n=_L();function e(t,i){var r=i?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}return mk=e,mk}var gk,b$;function M9e(){if(b$)return gk;b$=1;var n=/\w*$/;function e(t){var i=new t.constructor(t.source,n.exec(t));return i.lastIndex=t.lastIndex,i}return gk=e,gk}var yk,C$;function w9e(){if(C$)return yk;C$=1;var n=I5(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function i(r){return t?Object(t.call(r)):{}}return yk=i,yk}var vk,_$;function Nse(){if(_$)return vk;_$=1;var n=_L();function e(t,i){var r=i?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}return vk=e,vk}var bk,x$;function S9e(){if(x$)return bk;x$=1;var n=_L(),e=x9e(),t=M9e(),i=w9e(),r=Nse(),o="[object Boolean]",s="[object Date]",a="[object Map]",c="[object Number]",h="[object RegExp]",m="[object Set]",y="[object String]",M="[object Symbol]",x="[object ArrayBuffer]",k="[object DataView]",P="[object Float32Array]",F="[object Float64Array]",j="[object Int8Array]",q="[object Int16Array]",V="[object Int32Array]",H="[object Uint8Array]",G="[object Uint8ClampedArray]",Y="[object Uint16Array]",z="[object Uint32Array]";function se(le,me,de){var be=le.constructor;switch(me){case x:return n(le);case o:case s:return new be(+le);case k:return e(le,de);case P:case F:case j:case q:case V:case H:case G:case Y:case z:return r(le,de);case a:return new be;case c:case y:return new be(le);case h:return t(le);case m:return new be;case M:return i(le)}}return bk=se,bk}var Ck,M$;function E9e(){if(M$)return Ck;M$=1;var n=gp(),e=Object.create,t=(function(){function i(){}return function(r){if(!n(r))return{};if(e)return e(r);i.prototype=r;var o=new i;return i.prototype=void 0,o}})();return Ck=t,Ck}var _k,w$;function Gse(){if(w$)return _k;w$=1;var n=E9e(),e=mL(),t=dL();function i(r){return typeof r.constructor=="function"&&!t(r)?n(e(r)):{}}return _k=i,_k}var xk,S$;function O9e(){if(S$)return xk;S$=1;var n=Q6(),e=Vg(),t="[object Map]";function i(r){return e(r)&&n(r)==t}return xk=i,xk}var Mk,E$;function B9e(){if(E$)return Mk;E$=1;var n=O9e(),e=cL(),t=AL(),i=t&&t.isMap,r=i?e(i):n;return Mk=r,Mk}var wk,O$;function I9e(){if(O$)return wk;O$=1;var n=Q6(),e=Vg(),t="[object Set]";function i(r){return e(r)&&n(r)==t}return wk=i,wk}var Sk,B$;function k9e(){if(B$)return Sk;B$=1;var n=I9e(),e=cL(),t=AL(),i=t&&t.isSet,r=i?e(i):n;return Sk=r,Sk}var Ek,I$;function T9e(){if(I$)return Ek;I$=1;var n=W6(),e=Use(),t=Lse(),i=p9e(),r=y9e(),o=Fse(),s=zse(),a=v9e(),c=b9e(),h=Bse(),m=C9e(),y=Q6(),M=_9e(),x=S9e(),k=Gse(),P=wf(),F=L6(),j=B9e(),q=gp(),V=k9e(),H=k5(),G=D5(),Y=1,z=2,se=4,le="[object Arguments]",me="[object Array]",de="[object Boolean]",be="[object Date]",Ee="[object Error]",De="[object Function]",je="[object GeneratorFunction]",Ie="[object Map]",Qe="[object Number]",et="[object Object]",dt="[object RegExp]",ke="[object Set]",we="[object String]",ze="[object Symbol]",xe="[object WeakMap]",At="[object ArrayBuffer]",it="[object DataView]",bt="[object Float32Array]",Bt="[object Float64Array]",Ke="[object Int8Array]",Te="[object Int16Array]",Se="[object Int32Array]",Ne="[object Uint8Array]",ut="[object Uint8ClampedArray]",rt="[object Uint16Array]",pt="[object Uint32Array]",Dt={};Dt[le]=Dt[me]=Dt[At]=Dt[it]=Dt[de]=Dt[be]=Dt[bt]=Dt[Bt]=Dt[Ke]=Dt[Te]=Dt[Se]=Dt[Ie]=Dt[Qe]=Dt[et]=Dt[dt]=Dt[ke]=Dt[we]=Dt[ze]=Dt[Ne]=Dt[ut]=Dt[rt]=Dt[pt]=!0,Dt[Ee]=Dt[De]=Dt[xe]=!1;function Ot(Jt,Tn,Ln,ii,wn,Rn){var gn,Yn=Tn&Y,Dn=Tn&z,Tt=Tn&se;if(Ln&&(gn=wn?Ln(Jt,ii,wn,Rn):Ln(Jt)),gn!==void 0)return gn;if(!q(Jt))return Jt;var _e=P(Jt);if(_e){if(gn=M(Jt),!Yn)return s(Jt,gn)}else{var oe=y(Jt),ee=oe==De||oe==je;if(F(Jt))return o(Jt,Yn);if(oe==et||oe==le||ee&&!wn){if(gn=Dn||ee?{}:k(Jt),!Yn)return Dn?c(Jt,r(gn,Jt)):a(Jt,i(gn,Jt))}else{if(!Dt[oe])return wn?Jt:{};gn=x(Jt,oe,Yn)}}Rn||(Rn=new n);var ne=Rn.get(Jt);if(ne)return ne;Rn.set(Jt,gn),V(Jt)?Jt.forEach(function(Ue){gn.add(Ot(Ue,Tn,Ln,Ue,Jt,Rn))}):j(Jt)&&Jt.forEach(function(Ue,Ve){gn.set(Ve,Ot(Ue,Tn,Ln,Ve,Jt,Rn))});var ue=Tt?Dn?m:h:Dn?G:H,ye=_e?void 0:ue(Jt);return e(ye||Jt,function(Ue,Ve){ye&&(Ve=Ue,Ue=Jt[Ve]),t(gn,Ve,Ot(Ue,Tn,Ln,Ve,Jt,Rn))}),gn}return Ek=Ot,Ek}var Ok,k$;function R9e(){if(k$)return Ok;k$=1;var n=T9e(),e=1,t=4;function i(r){return n(r,e|t)}return Ok=i,Ok}var T$;function D9e(){if(T$)return VC;T$=1,Object.defineProperty(VC,"__esModule",{value:!0}),VC.mergeClasses=void 0;var n=pL(),e=o(n),t=R9e(),i=o(t),r=Object.assign||function(a){for(var c=1;c<arguments.length;c++){var h=arguments[c];for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(a[m]=h[m])}return a};function o(a){return a&&a.__esModule?a:{default:a}}var s=VC.mergeClasses=function(c){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],m=c.default&&(0,i.default)(c.default)||{};return h.map(function(y){var M=c[y];return M&&(0,e.default)(M,function(x,k){m[k]||(m[k]={}),m[k]=r({},m[k],M[k])}),y}),m};return VC.default=s,VC}var HC={},R$;function P9e(){if(R$)return HC;R$=1,Object.defineProperty(HC,"__esModule",{value:!0}),HC.autoprefix=void 0;var n=pL(),e=i(n),t=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])}return s};function i(s){return s&&s.__esModule?s:{default:s}}var r={borderRadius:function(a){return{msBorderRadius:a,MozBorderRadius:a,OBorderRadius:a,WebkitBorderRadius:a,borderRadius:a}},boxShadow:function(a){return{msBoxShadow:a,MozBoxShadow:a,OBoxShadow:a,WebkitBoxShadow:a,boxShadow:a}},userSelect:function(a){return{WebkitTouchCallout:a,KhtmlUserSelect:a,MozUserSelect:a,msUserSelect:a,WebkitUserSelect:a,userSelect:a}},flex:function(a){return{WebkitBoxFlex:a,MozBoxFlex:a,WebkitFlex:a,msFlex:a,flex:a}},flexBasis:function(a){return{WebkitFlexBasis:a,flexBasis:a}},justifyContent:function(a){return{WebkitJustifyContent:a,justifyContent:a}},transition:function(a){return{msTransition:a,MozTransition:a,OTransition:a,WebkitTransition:a,transition:a}},transform:function(a){return{msTransform:a,MozTransform:a,OTransform:a,WebkitTransform:a,transform:a}},absolute:function(a){var c=a&&a.split(" ");return{position:"absolute",top:c&&c[0],right:c&&c[1],bottom:c&&c[2],left:c&&c[3]}},extend:function(a,c){var h=c[a];return h||{extend:a}}},o=HC.autoprefix=function(a){var c={};return(0,e.default)(a,function(h,m){var y={};(0,e.default)(h,function(M,x){var k=r[x];k?y=t({},y,k(M)):y[x]=M}),c[m]=y}),c};return HC.default=o,HC}var ZC={},D$;function U9e(){if(D$)return ZC;D$=1,Object.defineProperty(ZC,"__esModule",{value:!0}),ZC.hover=void 0;var n=Object.assign||function(c){for(var h=1;h<arguments.length;h++){var m=arguments[h];for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(c[y]=m[y])}return c},e=Ya(),t=i(e);function i(c){return c&&c.__esModule?c:{default:c}}function r(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function o(c,h){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:c}function s(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(c,h):c.__proto__=h)}var a=ZC.hover=function(h){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(y){s(M,y);function M(){var x,k,P,F;r(this,M);for(var j=arguments.length,q=Array(j),V=0;V<j;V++)q[V]=arguments[V];return F=(k=(P=o(this,(x=M.__proto__||Object.getPrototypeOf(M)).call.apply(x,[this].concat(q))),P),P.state={hover:!1},P.handleMouseOver=function(){return P.setState({hover:!0})},P.handleMouseOut=function(){return P.setState({hover:!1})},P.render=function(){return t.default.createElement(m,{onMouseOver:P.handleMouseOver,onMouseOut:P.handleMouseOut},t.default.createElement(h,n({},P.props,P.state)))},k),o(P,F)}return M})(t.default.Component)};return ZC.default=a,ZC}var XC={},P$;function K9e(){if(P$)return XC;P$=1,Object.defineProperty(XC,"__esModule",{value:!0}),XC.active=void 0;var n=Object.assign||function(c){for(var h=1;h<arguments.length;h++){var m=arguments[h];for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(c[y]=m[y])}return c},e=Ya(),t=i(e);function i(c){return c&&c.__esModule?c:{default:c}}function r(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function o(c,h){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:c}function s(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(c,h):c.__proto__=h)}var a=XC.active=function(h){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(y){s(M,y);function M(){var x,k,P,F;r(this,M);for(var j=arguments.length,q=Array(j),V=0;V<j;V++)q[V]=arguments[V];return F=(k=(P=o(this,(x=M.__proto__||Object.getPrototypeOf(M)).call.apply(x,[this].concat(q))),P),P.state={active:!1},P.handleMouseDown=function(){return P.setState({active:!0})},P.handleMouseUp=function(){return P.setState({active:!1})},P.render=function(){return t.default.createElement(m,{onMouseDown:P.handleMouseDown,onMouseUp:P.handleMouseUp},t.default.createElement(h,n({},P.props,P.state)))},k),o(P,F)}return M})(t.default.Component)};return XC.default=a,XC}var qM={},U$;function L9e(){if(U$)return qM;U$=1,Object.defineProperty(qM,"__esModule",{value:!0});var n=function(t,i){var r={},o=function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r[a]=c};return t===0&&o("first-child"),t===i-1&&o("last-child"),(t===0||t%2===0)&&o("even"),Math.abs(t%2)===1&&o("odd"),o("nth-child",t),r};return qM.default=n,qM}var K$;function gm(){if(K$)return ld;K$=1,Object.defineProperty(ld,"__esModule",{value:!0}),ld.ReactCSS=ld.loop=ld.handleActive=ld.handleHover=ld.hover=void 0;var n=f9e(),e=M(n),t=D9e(),i=M(t),r=P9e(),o=M(r),s=U9e(),a=M(s),c=K9e(),h=M(c),m=L9e(),y=M(m);function M(k){return k&&k.__esModule?k:{default:k}}ld.hover=a.default,ld.handleHover=a.default,ld.handleActive=h.default,ld.loop=y.default;var x=ld.ReactCSS=function(P){for(var F=arguments.length,j=Array(F>1?F-1:0),q=1;q<F;q++)j[q-1]=arguments[q];var V=(0,e.default)(j),H=(0,i.default)(P,V);return(0,o.default)(H)};return ld.default=x,ld}var Bk,L$;function Wse(){if(L$)return Bk;L$=1;var n=CL(),e=T5();function t(i,r,o){(o!==void 0&&!e(i[r],o)||o===void 0&&!(r in i))&&n(i,r,o)}return Bk=t,Bk}var Ik,F$;function F9e(){if(F$)return Ik;F$=1;var n=Vx(),e=Vg();function t(i){return e(i)&&n(i)}return Ik=t,Ik}var kk,z$;function Qse(){if(z$)return kk;z$=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return kk=n,kk}var Tk,j$;function z9e(){if(j$)return Tk;j$=1;var n=R5(),e=D5();function t(i){return n(i,e(i))}return Tk=t,Tk}var Rk,N$;function j9e(){if(N$)return Rk;N$=1;var n=Wse(),e=Fse(),t=Nse(),i=zse(),r=Gse(),o=aL(),s=wf(),a=F9e(),c=L6(),h=fL(),m=gp(),y=Cse(),M=hL(),x=Qse(),k=z9e();function P(F,j,q,V,H,G,Y){var z=x(F,q),se=x(j,q),le=Y.get(se);if(le){n(F,q,le);return}var me=G?G(z,se,q+"",F,j,Y):void 0,de=me===void 0;if(de){var be=s(se),Ee=!be&&c(se),De=!be&&!Ee&&M(se);me=se,be||Ee||De?s(z)?me=z:a(z)?me=i(z):Ee?(de=!1,me=e(se,!0)):De?(de=!1,me=t(se,!0)):me=[]:y(se)||o(se)?(me=z,o(z)?me=k(z):(!m(z)||h(z))&&(me=r(se))):de=!1}de&&(Y.set(se,me),H(me,se,V,G,Y),Y.delete(se)),n(F,q,me)}return Rk=P,Rk}var Dk,G$;function N9e(){if(G$)return Dk;G$=1;var n=W6(),e=Wse(),t=mse(),i=j9e(),r=gp(),o=D5(),s=Qse();function a(c,h,m,y,M){c!==h&&t(h,function(x,k){if(M||(M=new n),r(x))i(c,h,k,m,a,y,M);else{var P=y?y(s(c,k),x,k+"",c,h,M):void 0;P===void 0&&(P=x),e(c,k,P)}},o)}return Dk=a,Dk}var Pk,W$;function G9e(){if(W$)return Pk;W$=1;function n(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}return Pk=n,Pk}var Uk,Q$;function W9e(){if(Q$)return Uk;Q$=1;var n=G9e(),e=Math.max;function t(i,r,o){return r=e(r===void 0?i.length-1:r,0),function(){for(var s=arguments,a=-1,c=e(s.length-r,0),h=Array(c);++a<c;)h[a]=s[r+a];a=-1;for(var m=Array(r+1);++a<r;)m[a]=s[a];return m[r]=o(h),n(i,this,m)}}return Uk=t,Uk}var Kk,q$;function Q9e(){if(q$)return Kk;q$=1;function n(e){return function(){return e}}return Kk=n,Kk}var Lk,Y$;function q9e(){if(Y$)return Lk;Y$=1;var n=Q9e(),e=Kse(),t=F6(),i=e?function(r,o){return e(r,"toString",{configurable:!0,enumerable:!1,value:n(o),writable:!0})}:t;return Lk=i,Lk}var Fk,$$;function Y9e(){if($$)return Fk;$$=1;var n=800,e=16,t=Date.now;function i(r){var o=0,s=0;return function(){var a=t(),c=e-(a-s);if(s=a,c>0){if(++o>=n)return arguments[0]}else o=0;return r.apply(void 0,arguments)}}return Fk=i,Fk}var zk,V$;function $9e(){if(V$)return zk;V$=1;var n=q9e(),e=Y9e(),t=e(n);return zk=t,zk}var jk,H$;function V9e(){if(H$)return jk;H$=1;var n=F6(),e=W9e(),t=$9e();function i(r,o){return t(e(r,o,n),r+"")}return jk=i,jk}var Nk,Z$;function H9e(){if(Z$)return Nk;Z$=1;var n=T5(),e=Vx(),t=lL(),i=gp();function r(o,s,a){if(!i(a))return!1;var c=typeof s;return(c=="number"?e(a)&&t(s,a.length):c=="string"&&s in a)?n(a[s],o):!1}return Nk=r,Nk}var Gk,X$;function Z9e(){if(X$)return Gk;X$=1;var n=V9e(),e=H9e();function t(i){return n(function(r,o){var s=-1,a=o.length,c=a>1?o[a-1]:void 0,h=a>2?o[2]:void 0;for(c=i.length>3&&typeof c=="function"?(a--,c):void 0,h&&e(o[0],o[1],h)&&(c=a<3?void 0:c,a=1),r=Object(r);++s<a;){var m=o[s];m&&i(r,m,s,c)}return r})}return Gk=t,Gk}var Wk,J$;function qse(){if(J$)return Wk;J$=1;var n=N9e(),e=Z9e(),t=e(function(i,r,o){n(i,r,o)});return Wk=t,Wk}var Qk={},JC={},YM={},eV;function X9e(){return eV||(eV=1,Object.defineProperty(YM,"__esModule",{value:!0}),YM.calculateChange=function(e,t,i,r,o){var s=o.clientWidth,a=o.clientHeight,c=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,h=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,m=c-(o.getBoundingClientRect().left+window.pageXOffset),y=h-(o.getBoundingClientRect().top+window.pageYOffset);if(i==="vertical"){var M=void 0;if(y<0?M=0:y>a?M=1:M=Math.round(y*100/a)/100,t.a!==M)return{h:t.h,s:t.s,l:t.l,a:M,source:"rgb"}}else{var x=void 0;if(m<0?x=0:m>s?x=1:x=Math.round(m*100/s)/100,r!==x)return{h:t.h,s:t.s,l:t.l,a:x,source:"rgb"}}return null}),YM}var e_={},B2={},tV;function J9e(){if(tV)return B2;tV=1,Object.defineProperty(B2,"__esModule",{value:!0});var n={},e=B2.render=function(i,r,o,s){if(typeof document>"u"&&!s)return null;var a=s?new s:document.createElement("canvas");a.width=o*2,a.height=o*2;var c=a.getContext("2d");return c?(c.fillStyle=i,c.fillRect(0,0,a.width,a.height),c.fillStyle=r,c.fillRect(0,0,o,o),c.translate(o,o),c.fillRect(0,0,o,o),a.toDataURL()):null};return B2.get=function(i,r,o,s){var a=i+"-"+r+"-"+o+(s?"-server":"");if(n[a])return n[a];var c=e(i,r,o,s);return n[a]=c,c},B2}var nV;function xL(){if(nV)return e_;nV=1,Object.defineProperty(e_,"__esModule",{value:!0}),e_.Checkboard=void 0;var n=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var M=arguments[y];for(var x in M)Object.prototype.hasOwnProperty.call(M,x)&&(m[x]=M[x])}return m},e=Ya(),t=c(e),i=gm(),r=c(i),o=J9e(),s=a(o);function a(m){if(m&&m.__esModule)return m;var y={};if(m!=null)for(var M in m)Object.prototype.hasOwnProperty.call(m,M)&&(y[M]=m[M]);return y.default=m,y}function c(m){return m&&m.__esModule?m:{default:m}}var h=e_.Checkboard=function(y){var M=y.white,x=y.grey,k=y.size,P=y.renderers,F=y.borderRadius,j=y.boxShadow,q=y.children,V=(0,r.default)({default:{grid:{borderRadius:F,boxShadow:j,absolute:"0px 0px 0px 0px",background:"url("+s.get(M,x,k,P.canvas)+") center left"}}});return(0,e.isValidElement)(q)?t.default.cloneElement(q,n({},q.props,{style:n({},q.props.style,V.grid)})):t.default.createElement("div",{style:V.grid})};return h.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},e_.default=h,e_}var iV;function eRe(){if(iV)return JC;iV=1,Object.defineProperty(JC,"__esModule",{value:!0}),JC.Alpha=void 0;var n=Object.assign||function(F){for(var j=1;j<arguments.length;j++){var q=arguments[j];for(var V in q)Object.prototype.hasOwnProperty.call(q,V)&&(F[V]=q[V])}return F},e=(function(){function F(j,q){for(var V=0;V<q.length;V++){var H=q[V];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(j,H.key,H)}}return function(j,q,V){return q&&F(j.prototype,q),V&&F(j,V),j}})(),t=Ya(),i=y(t),r=gm(),o=y(r),s=X9e(),a=m(s),c=xL(),h=y(c);function m(F){if(F&&F.__esModule)return F;var j={};if(F!=null)for(var q in F)Object.prototype.hasOwnProperty.call(F,q)&&(j[q]=F[q]);return j.default=F,j}function y(F){return F&&F.__esModule?F:{default:F}}function M(F,j){if(!(F instanceof j))throw new TypeError("Cannot call a class as a function")}function x(F,j){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:F}function k(F,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);F.prototype=Object.create(j&&j.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(F,j):F.__proto__=j)}var P=JC.Alpha=(function(F){k(j,F);function j(){var q,V,H,G;M(this,j);for(var Y=arguments.length,z=Array(Y),se=0;se<Y;se++)z[se]=arguments[se];return G=(V=(H=x(this,(q=j.__proto__||Object.getPrototypeOf(j)).call.apply(q,[this].concat(z))),H),H.handleChange=function(le){var me=a.calculateChange(le,H.props.hsl,H.props.direction,H.props.a,H.container);me&&typeof H.props.onChange=="function"&&H.props.onChange(me,le)},H.handleMouseDown=function(le){H.handleChange(le),window.addEventListener("mousemove",H.handleChange),window.addEventListener("mouseup",H.handleMouseUp)},H.handleMouseUp=function(){H.unbindEventListeners()},H.unbindEventListeners=function(){window.removeEventListener("mousemove",H.handleChange),window.removeEventListener("mouseup",H.handleMouseUp)},V),x(H,G)}return e(j,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var V=this,H=this.props.rgb,G=(0,o.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+H.r+","+H.g+","+H.b+`, 0) 0%,
           rgba(`+H.r+","+H.g+","+H.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:H.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+H.r+","+H.g+","+H.b+`, 0) 0%,
           rgba(`+H.r+","+H.g+","+H.b+", 1) 100%)"},pointer:{left:0,top:H.a*100+"%"}},overwrite:n({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return i.default.createElement("div",{style:G.alpha},i.default.createElement("div",{style:G.checkboard},i.default.createElement(h.default,{renderers:this.props.renderers})),i.default.createElement("div",{style:G.gradient}),i.default.createElement("div",{style:G.container,ref:function(z){return V.container=z},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.default.createElement("div",{style:G.pointer},this.props.pointer?i.default.createElement(this.props.pointer,this.props):i.default.createElement("div",{style:G.slider}))))}}]),j})(t.PureComponent||t.Component);return JC.default=P,JC}var t_={},rV;function tRe(){if(rV)return t_;rV=1,Object.defineProperty(t_,"__esModule",{value:!0}),t_.EditableInput=void 0;var n=(function(){function q(V,H){for(var G=0;G<H.length;G++){var Y=H[G];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(V,Y.key,Y)}}return function(V,H,G){return H&&q(V.prototype,H),G&&q(V,G),V}})(),e=Ya(),t=o(e),i=gm(),r=o(i);function o(q){return q&&q.__esModule?q:{default:q}}function s(q,V,H){return V in q?Object.defineProperty(q,V,{value:H,enumerable:!0,configurable:!0,writable:!0}):q[V]=H,q}function a(q,V){if(!(q instanceof V))throw new TypeError("Cannot call a class as a function")}function c(q,V){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:q}function h(q,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);q.prototype=Object.create(V&&V.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(q,V):q.__proto__=V)}var m=1,y=38,M=40,x=[y,M],k=function(V){return x.indexOf(V)>-1},P=function(V){return Number(String(V).replace(/%/g,""))},F=1,j=t_.EditableInput=(function(q){h(V,q);function V(H){a(this,V);var G=c(this,(V.__proto__||Object.getPrototypeOf(V)).call(this));return G.handleBlur=function(){G.state.blurValue&&G.setState({value:G.state.blurValue,blurValue:null})},G.handleChange=function(Y){G.setUpdatedValue(Y.target.value,Y)},G.handleKeyDown=function(Y){var z=P(Y.target.value);if(!isNaN(z)&&k(Y.keyCode)){var se=G.getArrowOffset(),le=Y.keyCode===y?z+se:z-se;G.setUpdatedValue(le,Y)}},G.handleDrag=function(Y){if(G.props.dragLabel){var z=Math.round(G.props.value+Y.movementX);z>=0&&z<=G.props.dragMax&&G.props.onChange&&G.props.onChange(G.getValueObjectWithLabel(z),Y)}},G.handleMouseDown=function(Y){G.props.dragLabel&&(Y.preventDefault(),G.handleDrag(Y),window.addEventListener("mousemove",G.handleDrag),window.addEventListener("mouseup",G.handleMouseUp))},G.handleMouseUp=function(){G.unbindEventListeners()},G.unbindEventListeners=function(){window.removeEventListener("mousemove",G.handleDrag),window.removeEventListener("mouseup",G.handleMouseUp)},G.state={value:String(H.value).toUpperCase(),blurValue:String(H.value).toUpperCase()},G.inputId="rc-editable-input-"+F++,G}return n(V,[{key:"componentDidUpdate",value:function(G,Y){this.props.value!==this.state.value&&(G.value!==this.props.value||Y.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(G){return s({},this.props.label,G)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||m}},{key:"setUpdatedValue",value:function(G,Y){var z=this.props.label?this.getValueObjectWithLabel(G):G;this.props.onChange&&this.props.onChange(z,Y),this.setState({value:G})}},{key:"render",value:function(){var G=this,Y=(0,r.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return t.default.createElement("div",{style:Y.wrap},t.default.createElement("input",{id:this.inputId,style:Y.input,ref:function(se){return G.input=se},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?t.default.createElement("label",{htmlFor:this.inputId,style:Y.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),V})(e.PureComponent||e.Component);return t_.default=j,t_}var n_={},$M={},oV;function nRe(){return oV||(oV=1,Object.defineProperty($M,"__esModule",{value:!0}),$M.calculateChange=function(e,t,i,r){var o=r.clientWidth,s=r.clientHeight,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,h=a-(r.getBoundingClientRect().left+window.pageXOffset),m=c-(r.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var y=void 0;if(m<0)y=359;else if(m>s)y=0;else{var M=-(m*100/s)+100;y=360*M/100}if(i.h!==y)return{h:y,s:i.s,l:i.l,a:i.a,source:"hsl"}}else{var x=void 0;if(h<0)x=0;else if(h>o)x=359;else{var k=h*100/o;x=360*k/100}if(i.h!==x)return{h:x,s:i.s,l:i.l,a:i.a,source:"hsl"}}return null}),$M}var sV;function iRe(){if(sV)return n_;sV=1,Object.defineProperty(n_,"__esModule",{value:!0}),n_.Hue=void 0;var n=(function(){function x(k,P){for(var F=0;F<P.length;F++){var j=P[F];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(k,j.key,j)}}return function(k,P,F){return P&&x(k.prototype,P),F&&x(k,F),k}})(),e=Ya(),t=c(e),i=gm(),r=c(i),o=nRe(),s=a(o);function a(x){if(x&&x.__esModule)return x;var k={};if(x!=null)for(var P in x)Object.prototype.hasOwnProperty.call(x,P)&&(k[P]=x[P]);return k.default=x,k}function c(x){return x&&x.__esModule?x:{default:x}}function h(x,k){if(!(x instanceof k))throw new TypeError("Cannot call a class as a function")}function m(x,k){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:x}function y(x,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);x.prototype=Object.create(k&&k.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(x,k):x.__proto__=k)}var M=n_.Hue=(function(x){y(k,x);function k(){var P,F,j,q;h(this,k);for(var V=arguments.length,H=Array(V),G=0;G<V;G++)H[G]=arguments[G];return q=(F=(j=m(this,(P=k.__proto__||Object.getPrototypeOf(k)).call.apply(P,[this].concat(H))),j),j.handleChange=function(Y){var z=s.calculateChange(Y,j.props.direction,j.props.hsl,j.container);z&&typeof j.props.onChange=="function"&&j.props.onChange(z,Y)},j.handleMouseDown=function(Y){j.handleChange(Y),window.addEventListener("mousemove",j.handleChange),window.addEventListener("mouseup",j.handleMouseUp)},j.handleMouseUp=function(){j.unbindEventListeners()},F),m(j,q)}return n(k,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var F=this,j=this.props.direction,q=j===void 0?"horizontal":j,V=(0,r.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:q==="vertical"});return t.default.createElement("div",{style:V.hue},t.default.createElement("div",{className:"hue-"+q,style:V.container,ref:function(G){return F.container=G},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),t.default.createElement("div",{style:V.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:V.slider}))))}}]),k})(e.PureComponent||e.Component);return n_.default=M,n_}var i_={},aV;function rRe(){if(aV)return i_;aV=1,Object.defineProperty(i_,"__esModule",{value:!0}),i_.Raised=void 0;var n=Ya(),e=c(n),t=b1(),i=c(t),r=gm(),o=c(r),s=qse(),a=c(s);function c(m){return m&&m.__esModule?m:{default:m}}var h=i_.Raised=function(y){var M=y.zDepth,x=y.radius,k=y.background,P=y.children,F=y.styles,j=F===void 0?{}:F,q=(0,o.default)((0,a.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+M+"px "+M*4+"px rgba(0,0,0,.24)",borderRadius:x,background:k}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},j),{"zDepth-1":M===1});return e.default.createElement("div",{style:q.wrap},e.default.createElement("div",{style:q.bg}),e.default.createElement("div",{style:q.content},P))};return h.propTypes={background:i.default.string,zDepth:i.default.oneOf([0,1,2,3,4,5]),radius:i.default.number,styles:i.default.object},h.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},i_.default=h,i_}var r_={},qk,lV;function oRe(){if(lV)return qk;lV=1;var n=mm(),e=function(){return n.Date.now()};return qk=e,qk}var Yk,uV;function sRe(){if(uV)return Yk;uV=1;var n=/\s/;function e(t){for(var i=t.length;i--&&n.test(t.charAt(i)););return i}return Yk=e,Yk}var $k,cV;function aRe(){if(cV)return $k;cV=1;var n=sRe(),e=/^\s+/;function t(i){return i&&i.slice(0,n(i)+1).replace(e,"")}return $k=t,$k}var Vk,AV;function lRe(){if(AV)return Vk;AV=1;var n=aRe(),e=gp(),t=q6(),i=NaN,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt;function c(h){if(typeof h=="number")return h;if(t(h))return i;if(e(h)){var m=typeof h.valueOf=="function"?h.valueOf():h;h=e(m)?m+"":m}if(typeof h!="string")return h===0?h:+h;h=n(h);var y=o.test(h);return y||s.test(h)?a(h.slice(2),y?2:8):r.test(h)?i:+h}return Vk=c,Vk}var Hk,hV;function Yse(){if(hV)return Hk;hV=1;var n=gp(),e=oRe(),t=lRe(),i="Expected a function",r=Math.max,o=Math.min;function s(a,c,h){var m,y,M,x,k,P,F=0,j=!1,q=!1,V=!0;if(typeof a!="function")throw new TypeError(i);c=t(c)||0,n(h)&&(j=!!h.leading,q="maxWait"in h,M=q?r(t(h.maxWait)||0,c):M,V="trailing"in h?!!h.trailing:V);function H(Ee){var De=m,je=y;return m=y=void 0,F=Ee,x=a.apply(je,De),x}function G(Ee){return F=Ee,k=setTimeout(se,c),j?H(Ee):x}function Y(Ee){var De=Ee-P,je=Ee-F,Ie=c-De;return q?o(Ie,M-je):Ie}function z(Ee){var De=Ee-P,je=Ee-F;return P===void 0||De>=c||De<0||q&&je>=M}function se(){var Ee=e();if(z(Ee))return le(Ee);k=setTimeout(se,Y(Ee))}function le(Ee){return k=void 0,V&&m?H(Ee):(m=y=void 0,x)}function me(){k!==void 0&&clearTimeout(k),F=0,m=P=y=k=void 0}function de(){return k===void 0?x:le(e())}function be(){var Ee=e(),De=z(Ee);if(m=arguments,y=this,P=Ee,De){if(k===void 0)return G(P);if(q)return clearTimeout(k),k=setTimeout(se,c),H(P)}return k===void 0&&(k=setTimeout(se,c)),x}return be.cancel=me,be.flush=de,be}return Hk=s,Hk}var Zk,dV;function uRe(){if(dV)return Zk;dV=1;var n=Yse(),e=gp(),t="Expected a function";function i(r,o,s){var a=!0,c=!0;if(typeof r!="function")throw new TypeError(t);return e(s)&&(a="leading"in s?!!s.leading:a,c="trailing"in s?!!s.trailing:c),n(r,o,{leading:a,maxWait:o,trailing:c})}return Zk=i,Zk}var VM={},fV;function cRe(){return fV||(fV=1,Object.defineProperty(VM,"__esModule",{value:!0}),VM.calculateChange=function(e,t,i){var r=i.getBoundingClientRect(),o=r.width,s=r.height,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,h=a-(i.getBoundingClientRect().left+window.pageXOffset),m=c-(i.getBoundingClientRect().top+window.pageYOffset);h<0?h=0:h>o&&(h=o),m<0?m=0:m>s&&(m=s);var y=h/o,M=1-m/s;return{h:t.h,s:y,v:M,a:t.a,source:"hsv"}}),VM}var pV;function ARe(){if(pV)return r_;pV=1,Object.defineProperty(r_,"__esModule",{value:!0}),r_.Saturation=void 0;var n=(function(){function P(F,j){for(var q=0;q<j.length;q++){var V=j[q];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(F,V.key,V)}}return function(F,j,q){return j&&P(F.prototype,j),q&&P(F,q),F}})(),e=Ya(),t=m(e),i=gm(),r=m(i),o=uRe(),s=m(o),a=cRe(),c=h(a);function h(P){if(P&&P.__esModule)return P;var F={};if(P!=null)for(var j in P)Object.prototype.hasOwnProperty.call(P,j)&&(F[j]=P[j]);return F.default=P,F}function m(P){return P&&P.__esModule?P:{default:P}}function y(P,F){if(!(P instanceof F))throw new TypeError("Cannot call a class as a function")}function M(P,F){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:P}function x(P,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);P.prototype=Object.create(F&&F.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(P,F):P.__proto__=F)}var k=r_.Saturation=(function(P){x(F,P);function F(j){y(this,F);var q=M(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,j));return q.handleChange=function(V){typeof q.props.onChange=="function"&&q.throttle(q.props.onChange,c.calculateChange(V,q.props.hsl,q.container),V)},q.handleMouseDown=function(V){q.handleChange(V);var H=q.getContainerRenderWindow();H.addEventListener("mousemove",q.handleChange),H.addEventListener("mouseup",q.handleMouseUp)},q.handleMouseUp=function(){q.unbindEventListeners()},q.throttle=(0,s.default)(function(V,H,G){V(H,G)},50),q}return n(F,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var q=this.container,V=window;!V.document.contains(q)&&V.parent!==V;)V=V.parent;return V}},{key:"unbindEventListeners",value:function(){var q=this.getContainerRenderWindow();q.removeEventListener("mousemove",this.handleChange),q.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var q=this,V=this.props.style||{},H=V.color,G=V.white,Y=V.black,z=V.pointer,se=V.circle,le=(0,r.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:H,white:G,black:Y,pointer:z,circle:se}},{custom:!!this.props.style});return t.default.createElement("div",{style:le.color,ref:function(de){return q.container=de},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),t.default.createElement("div",{style:le.white,className:"saturation-white"},t.default.createElement("div",{style:le.black,className:"saturation-black"}),t.default.createElement("div",{style:le.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:le.circle}))))}}]),F})(e.PureComponent||e.Component);return r_.default=k,r_}var o_={},Bh={},Xk,mV;function hRe(){if(mV)return Xk;mV=1;var n=Use(),e=Pse(),t=bse(),i=wf();function r(o,s){var a=i(o)?n:e;return a(o,t(s))}return Xk=r,Xk}var Jk,gV;function dRe(){return gV||(gV=1,Jk=hRe()),Jk}var Ew={exports:{}},fRe=Ew.exports,yV;function pRe(){return yV||(yV=1,(function(n,e){(function(t,i){n.exports=i()})(fRe,(function(){function t(Ke){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Te){return typeof Te}:function(Te){return Te&&typeof Symbol=="function"&&Te.constructor===Symbol&&Te!==Symbol.prototype?"symbol":typeof Te},t(Ke)}var i=/^\s+/,r=/\s+$/;function o(Ke,Te){if(Ke=Ke||"",Te=Te||{},Ke instanceof o)return Ke;if(!(this instanceof o))return new o(Ke,Te);var Se=s(Ke);this._originalInput=Ke,this._r=Se.r,this._g=Se.g,this._b=Se.b,this._a=Se.a,this._roundA=Math.round(100*this._a)/100,this._format=Te.format||Se.format,this._gradientType=Te.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=Se.ok}o.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Te=this.toRgb();return(Te.r*299+Te.g*587+Te.b*114)/1e3},getLuminance:function(){var Te=this.toRgb(),Se,Ne,ut,rt,pt,Dt;return Se=Te.r/255,Ne=Te.g/255,ut=Te.b/255,Se<=.03928?rt=Se/12.92:rt=Math.pow((Se+.055)/1.055,2.4),Ne<=.03928?pt=Ne/12.92:pt=Math.pow((Ne+.055)/1.055,2.4),ut<=.03928?Dt=ut/12.92:Dt=Math.pow((ut+.055)/1.055,2.4),.2126*rt+.7152*pt+.0722*Dt},setAlpha:function(Te){return this._a=De(Te),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var Te=m(this._r,this._g,this._b);return{h:Te.h*360,s:Te.s,v:Te.v,a:this._a}},toHsvString:function(){var Te=m(this._r,this._g,this._b),Se=Math.round(Te.h*360),Ne=Math.round(Te.s*100),ut=Math.round(Te.v*100);return this._a==1?"hsv("+Se+", "+Ne+"%, "+ut+"%)":"hsva("+Se+", "+Ne+"%, "+ut+"%, "+this._roundA+")"},toHsl:function(){var Te=c(this._r,this._g,this._b);return{h:Te.h*360,s:Te.s,l:Te.l,a:this._a}},toHslString:function(){var Te=c(this._r,this._g,this._b),Se=Math.round(Te.h*360),Ne=Math.round(Te.s*100),ut=Math.round(Te.l*100);return this._a==1?"hsl("+Se+", "+Ne+"%, "+ut+"%)":"hsla("+Se+", "+Ne+"%, "+ut+"%, "+this._roundA+")"},toHex:function(Te){return M(this._r,this._g,this._b,Te)},toHexString:function(Te){return"#"+this.toHex(Te)},toHex8:function(Te){return x(this._r,this._g,this._b,this._a,Te)},toHex8String:function(Te){return"#"+this.toHex8(Te)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(je(this._r,255)*100)+"%",g:Math.round(je(this._g,255)*100)+"%",b:Math.round(je(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(je(this._r,255)*100)+"%, "+Math.round(je(this._g,255)*100)+"%, "+Math.round(je(this._b,255)*100)+"%)":"rgba("+Math.round(je(this._r,255)*100)+"%, "+Math.round(je(this._g,255)*100)+"%, "+Math.round(je(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:be[M(this._r,this._g,this._b,!0)]||!1},toFilter:function(Te){var Se="#"+k(this._r,this._g,this._b,this._a),Ne=Se,ut=this._gradientType?"GradientType = 1, ":"";if(Te){var rt=o(Te);Ne="#"+k(rt._r,rt._g,rt._b,rt._a)}return"progid:DXImageTransform.Microsoft.gradient("+ut+"startColorstr="+Se+",endColorstr="+Ne+")"},toString:function(Te){var Se=!!Te;Te=Te||this._format;var Ne=!1,ut=this._a<1&&this._a>=0,rt=!Se&&ut&&(Te==="hex"||Te==="hex6"||Te==="hex3"||Te==="hex4"||Te==="hex8"||Te==="name");return rt?Te==="name"&&this._a===0?this.toName():this.toRgbString():(Te==="rgb"&&(Ne=this.toRgbString()),Te==="prgb"&&(Ne=this.toPercentageRgbString()),(Te==="hex"||Te==="hex6")&&(Ne=this.toHexString()),Te==="hex3"&&(Ne=this.toHexString(!0)),Te==="hex4"&&(Ne=this.toHex8String(!0)),Te==="hex8"&&(Ne=this.toHex8String()),Te==="name"&&(Ne=this.toName()),Te==="hsl"&&(Ne=this.toHslString()),Te==="hsv"&&(Ne=this.toHsvString()),Ne||this.toHexString())},clone:function(){return o(this.toString())},_applyModification:function(Te,Se){var Ne=Te.apply(null,[this].concat([].slice.call(Se)));return this._r=Ne._r,this._g=Ne._g,this._b=Ne._b,this.setAlpha(Ne._a),this},lighten:function(){return this._applyModification(q,arguments)},brighten:function(){return this._applyModification(V,arguments)},darken:function(){return this._applyModification(H,arguments)},desaturate:function(){return this._applyModification(P,arguments)},saturate:function(){return this._applyModification(F,arguments)},greyscale:function(){return this._applyModification(j,arguments)},spin:function(){return this._applyModification(G,arguments)},_applyCombination:function(Te,Se){return Te.apply(null,[this].concat([].slice.call(Se)))},analogous:function(){return this._applyCombination(le,arguments)},complement:function(){return this._applyCombination(Y,arguments)},monochromatic:function(){return this._applyCombination(me,arguments)},splitcomplement:function(){return this._applyCombination(se,arguments)},triad:function(){return this._applyCombination(z,[3])},tetrad:function(){return this._applyCombination(z,[4])}},o.fromRatio=function(Ke,Te){if(t(Ke)=="object"){var Se={};for(var Ne in Ke)Ke.hasOwnProperty(Ne)&&(Ne==="a"?Se[Ne]=Ke[Ne]:Se[Ne]=we(Ke[Ne]));Ke=Se}return o(Ke,Te)};function s(Ke){var Te={r:0,g:0,b:0},Se=1,Ne=null,ut=null,rt=null,pt=!1,Dt=!1;return typeof Ke=="string"&&(Ke=bt(Ke)),t(Ke)=="object"&&(it(Ke.r)&&it(Ke.g)&&it(Ke.b)?(Te=a(Ke.r,Ke.g,Ke.b),pt=!0,Dt=String(Ke.r).substr(-1)==="%"?"prgb":"rgb"):it(Ke.h)&&it(Ke.s)&&it(Ke.v)?(Ne=we(Ke.s),ut=we(Ke.v),Te=y(Ke.h,Ne,ut),pt=!0,Dt="hsv"):it(Ke.h)&&it(Ke.s)&&it(Ke.l)&&(Ne=we(Ke.s),rt=we(Ke.l),Te=h(Ke.h,Ne,rt),pt=!0,Dt="hsl"),Ke.hasOwnProperty("a")&&(Se=Ke.a)),Se=De(Se),{ok:pt,format:Ke.format||Dt,r:Math.min(255,Math.max(Te.r,0)),g:Math.min(255,Math.max(Te.g,0)),b:Math.min(255,Math.max(Te.b,0)),a:Se}}function a(Ke,Te,Se){return{r:je(Ke,255)*255,g:je(Te,255)*255,b:je(Se,255)*255}}function c(Ke,Te,Se){Ke=je(Ke,255),Te=je(Te,255),Se=je(Se,255);var Ne=Math.max(Ke,Te,Se),ut=Math.min(Ke,Te,Se),rt,pt,Dt=(Ne+ut)/2;if(Ne==ut)rt=pt=0;else{var Ot=Ne-ut;switch(pt=Dt>.5?Ot/(2-Ne-ut):Ot/(Ne+ut),Ne){case Ke:rt=(Te-Se)/Ot+(Te<Se?6:0);break;case Te:rt=(Se-Ke)/Ot+2;break;case Se:rt=(Ke-Te)/Ot+4;break}rt/=6}return{h:rt,s:pt,l:Dt}}function h(Ke,Te,Se){var Ne,ut,rt;Ke=je(Ke,360),Te=je(Te,100),Se=je(Se,100);function pt(Jt,Tn,Ln){return Ln<0&&(Ln+=1),Ln>1&&(Ln-=1),Ln<1/6?Jt+(Tn-Jt)*6*Ln:Ln<1/2?Tn:Ln<2/3?Jt+(Tn-Jt)*(2/3-Ln)*6:Jt}if(Te===0)Ne=ut=rt=Se;else{var Dt=Se<.5?Se*(1+Te):Se+Te-Se*Te,Ot=2*Se-Dt;Ne=pt(Ot,Dt,Ke+1/3),ut=pt(Ot,Dt,Ke),rt=pt(Ot,Dt,Ke-1/3)}return{r:Ne*255,g:ut*255,b:rt*255}}function m(Ke,Te,Se){Ke=je(Ke,255),Te=je(Te,255),Se=je(Se,255);var Ne=Math.max(Ke,Te,Se),ut=Math.min(Ke,Te,Se),rt,pt,Dt=Ne,Ot=Ne-ut;if(pt=Ne===0?0:Ot/Ne,Ne==ut)rt=0;else{switch(Ne){case Ke:rt=(Te-Se)/Ot+(Te<Se?6:0);break;case Te:rt=(Se-Ke)/Ot+2;break;case Se:rt=(Ke-Te)/Ot+4;break}rt/=6}return{h:rt,s:pt,v:Dt}}function y(Ke,Te,Se){Ke=je(Ke,360)*6,Te=je(Te,100),Se=je(Se,100);var Ne=Math.floor(Ke),ut=Ke-Ne,rt=Se*(1-Te),pt=Se*(1-ut*Te),Dt=Se*(1-(1-ut)*Te),Ot=Ne%6,Jt=[Se,pt,rt,rt,Dt,Se][Ot],Tn=[Dt,Se,Se,pt,rt,rt][Ot],Ln=[rt,rt,Dt,Se,Se,pt][Ot];return{r:Jt*255,g:Tn*255,b:Ln*255}}function M(Ke,Te,Se,Ne){var ut=[ke(Math.round(Ke).toString(16)),ke(Math.round(Te).toString(16)),ke(Math.round(Se).toString(16))];return Ne&&ut[0].charAt(0)==ut[0].charAt(1)&&ut[1].charAt(0)==ut[1].charAt(1)&&ut[2].charAt(0)==ut[2].charAt(1)?ut[0].charAt(0)+ut[1].charAt(0)+ut[2].charAt(0):ut.join("")}function x(Ke,Te,Se,Ne,ut){var rt=[ke(Math.round(Ke).toString(16)),ke(Math.round(Te).toString(16)),ke(Math.round(Se).toString(16)),ke(ze(Ne))];return ut&&rt[0].charAt(0)==rt[0].charAt(1)&&rt[1].charAt(0)==rt[1].charAt(1)&&rt[2].charAt(0)==rt[2].charAt(1)&&rt[3].charAt(0)==rt[3].charAt(1)?rt[0].charAt(0)+rt[1].charAt(0)+rt[2].charAt(0)+rt[3].charAt(0):rt.join("")}function k(Ke,Te,Se,Ne){var ut=[ke(ze(Ne)),ke(Math.round(Ke).toString(16)),ke(Math.round(Te).toString(16)),ke(Math.round(Se).toString(16))];return ut.join("")}o.equals=function(Ke,Te){return!Ke||!Te?!1:o(Ke).toRgbString()==o(Te).toRgbString()},o.random=function(){return o.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function P(Ke,Te){Te=Te===0?0:Te||10;var Se=o(Ke).toHsl();return Se.s-=Te/100,Se.s=Ie(Se.s),o(Se)}function F(Ke,Te){Te=Te===0?0:Te||10;var Se=o(Ke).toHsl();return Se.s+=Te/100,Se.s=Ie(Se.s),o(Se)}function j(Ke){return o(Ke).desaturate(100)}function q(Ke,Te){Te=Te===0?0:Te||10;var Se=o(Ke).toHsl();return Se.l+=Te/100,Se.l=Ie(Se.l),o(Se)}function V(Ke,Te){Te=Te===0?0:Te||10;var Se=o(Ke).toRgb();return Se.r=Math.max(0,Math.min(255,Se.r-Math.round(255*-(Te/100)))),Se.g=Math.max(0,Math.min(255,Se.g-Math.round(255*-(Te/100)))),Se.b=Math.max(0,Math.min(255,Se.b-Math.round(255*-(Te/100)))),o(Se)}function H(Ke,Te){Te=Te===0?0:Te||10;var Se=o(Ke).toHsl();return Se.l-=Te/100,Se.l=Ie(Se.l),o(Se)}function G(Ke,Te){var Se=o(Ke).toHsl(),Ne=(Se.h+Te)%360;return Se.h=Ne<0?360+Ne:Ne,o(Se)}function Y(Ke){var Te=o(Ke).toHsl();return Te.h=(Te.h+180)%360,o(Te)}function z(Ke,Te){if(isNaN(Te)||Te<=0)throw new Error("Argument to polyad must be a positive number");for(var Se=o(Ke).toHsl(),Ne=[o(Ke)],ut=360/Te,rt=1;rt<Te;rt++)Ne.push(o({h:(Se.h+rt*ut)%360,s:Se.s,l:Se.l}));return Ne}function se(Ke){var Te=o(Ke).toHsl(),Se=Te.h;return[o(Ke),o({h:(Se+72)%360,s:Te.s,l:Te.l}),o({h:(Se+216)%360,s:Te.s,l:Te.l})]}function le(Ke,Te,Se){Te=Te||6,Se=Se||30;var Ne=o(Ke).toHsl(),ut=360/Se,rt=[o(Ke)];for(Ne.h=(Ne.h-(ut*Te>>1)+720)%360;--Te;)Ne.h=(Ne.h+ut)%360,rt.push(o(Ne));return rt}function me(Ke,Te){Te=Te||6;for(var Se=o(Ke).toHsv(),Ne=Se.h,ut=Se.s,rt=Se.v,pt=[],Dt=1/Te;Te--;)pt.push(o({h:Ne,s:ut,v:rt})),rt=(rt+Dt)%1;return pt}o.mix=function(Ke,Te,Se){Se=Se===0?0:Se||50;var Ne=o(Ke).toRgb(),ut=o(Te).toRgb(),rt=Se/100,pt={r:(ut.r-Ne.r)*rt+Ne.r,g:(ut.g-Ne.g)*rt+Ne.g,b:(ut.b-Ne.b)*rt+Ne.b,a:(ut.a-Ne.a)*rt+Ne.a};return o(pt)},o.readability=function(Ke,Te){var Se=o(Ke),Ne=o(Te);return(Math.max(Se.getLuminance(),Ne.getLuminance())+.05)/(Math.min(Se.getLuminance(),Ne.getLuminance())+.05)},o.isReadable=function(Ke,Te,Se){var Ne=o.readability(Ke,Te),ut,rt;switch(rt=!1,ut=Bt(Se),ut.level+ut.size){case"AAsmall":case"AAAlarge":rt=Ne>=4.5;break;case"AAlarge":rt=Ne>=3;break;case"AAAsmall":rt=Ne>=7;break}return rt},o.mostReadable=function(Ke,Te,Se){var Ne=null,ut=0,rt,pt,Dt,Ot;Se=Se||{},pt=Se.includeFallbackColors,Dt=Se.level,Ot=Se.size;for(var Jt=0;Jt<Te.length;Jt++)rt=o.readability(Ke,Te[Jt]),rt>ut&&(ut=rt,Ne=o(Te[Jt]));return o.isReadable(Ke,Ne,{level:Dt,size:Ot})||!pt?Ne:(Se.includeFallbackColors=!1,o.mostReadable(Ke,["#fff","#000"],Se))};var de=o.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},be=o.hexNames=Ee(de);function Ee(Ke){var Te={};for(var Se in Ke)Ke.hasOwnProperty(Se)&&(Te[Ke[Se]]=Se);return Te}function De(Ke){return Ke=parseFloat(Ke),(isNaN(Ke)||Ke<0||Ke>1)&&(Ke=1),Ke}function je(Ke,Te){et(Ke)&&(Ke="100%");var Se=dt(Ke);return Ke=Math.min(Te,Math.max(0,parseFloat(Ke))),Se&&(Ke=parseInt(Ke*Te,10)/100),Math.abs(Ke-Te)<1e-6?1:Ke%Te/parseFloat(Te)}function Ie(Ke){return Math.min(1,Math.max(0,Ke))}function Qe(Ke){return parseInt(Ke,16)}function et(Ke){return typeof Ke=="string"&&Ke.indexOf(".")!=-1&&parseFloat(Ke)===1}function dt(Ke){return typeof Ke=="string"&&Ke.indexOf("%")!=-1}function ke(Ke){return Ke.length==1?"0"+Ke:""+Ke}function we(Ke){return Ke<=1&&(Ke=Ke*100+"%"),Ke}function ze(Ke){return Math.round(parseFloat(Ke)*255).toString(16)}function xe(Ke){return Qe(Ke)/255}var At=(function(){var Ke="[-\\+]?\\d+%?",Te="[-\\+]?\\d*\\.\\d+%?",Se="(?:"+Te+")|(?:"+Ke+")",Ne="[\\s|\\(]+("+Se+")[,|\\s]+("+Se+")[,|\\s]+("+Se+")\\s*\\)?",ut="[\\s|\\(]+("+Se+")[,|\\s]+("+Se+")[,|\\s]+("+Se+")[,|\\s]+("+Se+")\\s*\\)?";return{CSS_UNIT:new RegExp(Se),rgb:new RegExp("rgb"+Ne),rgba:new RegExp("rgba"+ut),hsl:new RegExp("hsl"+Ne),hsla:new RegExp("hsla"+ut),hsv:new RegExp("hsv"+Ne),hsva:new RegExp("hsva"+ut),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function it(Ke){return!!At.CSS_UNIT.exec(Ke)}function bt(Ke){Ke=Ke.replace(i,"").replace(r,"").toLowerCase();var Te=!1;if(de[Ke])Ke=de[Ke],Te=!0;else if(Ke=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Se;return(Se=At.rgb.exec(Ke))?{r:Se[1],g:Se[2],b:Se[3]}:(Se=At.rgba.exec(Ke))?{r:Se[1],g:Se[2],b:Se[3],a:Se[4]}:(Se=At.hsl.exec(Ke))?{h:Se[1],s:Se[2],l:Se[3]}:(Se=At.hsla.exec(Ke))?{h:Se[1],s:Se[2],l:Se[3],a:Se[4]}:(Se=At.hsv.exec(Ke))?{h:Se[1],s:Se[2],v:Se[3]}:(Se=At.hsva.exec(Ke))?{h:Se[1],s:Se[2],v:Se[3],a:Se[4]}:(Se=At.hex8.exec(Ke))?{r:Qe(Se[1]),g:Qe(Se[2]),b:Qe(Se[3]),a:xe(Se[4]),format:Te?"name":"hex8"}:(Se=At.hex6.exec(Ke))?{r:Qe(Se[1]),g:Qe(Se[2]),b:Qe(Se[3]),format:Te?"name":"hex"}:(Se=At.hex4.exec(Ke))?{r:Qe(Se[1]+""+Se[1]),g:Qe(Se[2]+""+Se[2]),b:Qe(Se[3]+""+Se[3]),a:xe(Se[4]+""+Se[4]),format:Te?"name":"hex8"}:(Se=At.hex3.exec(Ke))?{r:Qe(Se[1]+""+Se[1]),g:Qe(Se[2]+""+Se[2]),b:Qe(Se[3]+""+Se[3]),format:Te?"name":"hex"}:!1}function Bt(Ke){var Te,Se;return Ke=Ke||{level:"AA",size:"small"},Te=(Ke.level||"AA").toUpperCase(),Se=(Ke.size||"small").toLowerCase(),Te!=="AA"&&Te!=="AAA"&&(Te="AA"),Se!=="small"&&Se!=="large"&&(Se="small"),{level:Te,size:Se}}return o}))})(Ew)),Ew.exports}var vV;function $se(){if(vV)return Bh;vV=1,Object.defineProperty(Bh,"__esModule",{value:!0}),Bh.isvalidColorString=Bh.red=Bh.getContrastingColor=Bh.isValidHex=Bh.toState=Bh.simpleCheckForValidColor=void 0;var n=dRe(),e=r(n),t=pRe(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}Bh.simpleCheckForValidColor=function(a){var c=["r","g","b","a","h","s","l","v"],h=0,m=0;return(0,e.default)(c,function(y){if(a[y]&&(h+=1,isNaN(a[y])||(m+=1),y==="s"||y==="l")){var M=/^\d+%$/;M.test(a[y])&&(m+=1)}}),h===m?a:!1};var o=Bh.toState=function(a,c){var h=a.hex?(0,i.default)(a.hex):(0,i.default)(a),m=h.toHsl(),y=h.toHsv(),M=h.toRgb(),x=h.toHex();m.s===0&&(m.h=c||0,y.h=c||0);var k=x==="000000"&&M.a===0;return{hsl:m,hex:k?"transparent":"#"+x,rgb:M,hsv:y,oldHue:a.h||c||m.h,source:a.source}};return Bh.isValidHex=function(a){if(a==="transparent")return!0;var c=String(a).charAt(0)==="#"?1:0;return a.length!==4+c&&a.length<7+c&&(0,i.default)(a).isValid()},Bh.getContrastingColor=function(a){if(!a)return"#fff";var c=o(a);if(c.hex==="transparent")return"rgba(0,0,0,0.4)";var h=(c.rgb.r*299+c.rgb.g*587+c.rgb.b*114)/1e3;return h>=128?"#000":"#fff"},Bh.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},Bh.isvalidColorString=function(a,c){var h=a.replace("","");return(0,i.default)(c+" ("+h+")")._ok},Bh}var bV;function mRe(){if(bV)return o_;bV=1,Object.defineProperty(o_,"__esModule",{value:!0}),o_.ColorWrap=void 0;var n=Object.assign||function(k){for(var P=1;P<arguments.length;P++){var F=arguments[P];for(var j in F)Object.prototype.hasOwnProperty.call(F,j)&&(k[j]=F[j])}return k},e=(function(){function k(P,F){for(var j=0;j<F.length;j++){var q=F[j];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(P,q.key,q)}}return function(P,F,j){return F&&k(P.prototype,F),j&&k(P,j),P}})(),t=Ya(),i=h(t),r=Yse(),o=h(r),s=$se(),a=c(s);function c(k){if(k&&k.__esModule)return k;var P={};if(k!=null)for(var F in k)Object.prototype.hasOwnProperty.call(k,F)&&(P[F]=k[F]);return P.default=k,P}function h(k){return k&&k.__esModule?k:{default:k}}function m(k,P){if(!(k instanceof P))throw new TypeError("Cannot call a class as a function")}function y(k,P){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:k}function M(k,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);k.prototype=Object.create(P&&P.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(k,P):k.__proto__=P)}var x=o_.ColorWrap=function(P){var F=(function(j){M(q,j);function q(V){m(this,q);var H=y(this,(q.__proto__||Object.getPrototypeOf(q)).call(this));return H.handleChange=function(G,Y){var z=a.simpleCheckForValidColor(G);if(z){var se=a.toState(G,G.h||H.state.oldHue);H.setState(se),H.props.onChangeComplete&&H.debounce(H.props.onChangeComplete,se,Y),H.props.onChange&&H.props.onChange(se,Y)}},H.handleSwatchHover=function(G,Y){var z=a.simpleCheckForValidColor(G);if(z){var se=a.toState(G,G.h||H.state.oldHue);H.props.onSwatchHover&&H.props.onSwatchHover(se,Y)}},H.state=n({},a.toState(V.color,0)),H.debounce=(0,o.default)(function(G,Y,z){G(Y,z)},100),H}return e(q,[{key:"render",value:function(){var H={};return this.props.onSwatchHover&&(H.onSwatchHover=this.handleSwatchHover),i.default.createElement(P,n({},this.props,this.state,{onChange:this.handleChange},H))}}],[{key:"getDerivedStateFromProps",value:function(H,G){return n({},a.toState(H.color,G.oldHue))}}]),q})(t.PureComponent||t.Component);return F.propTypes=n({},P.propTypes),F.defaultProps=n({},P.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),F};return o_.default=x,o_}var s_={},I2={},CV;function gRe(){if(CV)return I2;CV=1,Object.defineProperty(I2,"__esModule",{value:!0}),I2.handleFocus=void 0;var n=Object.assign||function(c){for(var h=1;h<arguments.length;h++){var m=arguments[h];for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(c[y]=m[y])}return c},e=(function(){function c(h,m){for(var y=0;y<m.length;y++){var M=m[y];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(h,M.key,M)}}return function(h,m,y){return m&&c(h.prototype,m),y&&c(h,y),h}})(),t=Ya(),i=r(t);function r(c){return c&&c.__esModule?c:{default:c}}function o(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function s(c,h){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:c}function a(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(c,h):c.__proto__=h)}return I2.handleFocus=function(h){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(y){a(M,y);function M(){var x,k,P,F;o(this,M);for(var j=arguments.length,q=Array(j),V=0;V<j;V++)q[V]=arguments[V];return F=(k=(P=s(this,(x=M.__proto__||Object.getPrototypeOf(M)).call.apply(x,[this].concat(q))),P),P.state={focus:!1},P.handleFocus=function(){return P.setState({focus:!0})},P.handleBlur=function(){return P.setState({focus:!1})},k),s(P,F)}return e(M,[{key:"render",value:function(){return i.default.createElement(m,{onFocus:this.handleFocus,onBlur:this.handleBlur},i.default.createElement(h,n({},this.props,this.state)))}}]),M})(i.default.Component)},I2}var _V;function yRe(){if(_V)return s_;_V=1,Object.defineProperty(s_,"__esModule",{value:!0}),s_.Swatch=void 0;var n=Object.assign||function(y){for(var M=1;M<arguments.length;M++){var x=arguments[M];for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(y[k]=x[k])}return y},e=Ya(),t=c(e),i=gm(),r=c(i),o=gRe(),s=xL(),a=c(s);function c(y){return y&&y.__esModule?y:{default:y}}var h=13,m=s_.Swatch=function(M){var x=M.color,k=M.style,P=M.onClick,F=P===void 0?function(){}:P,j=M.onHover,q=M.title,V=q===void 0?x:q,H=M.children,G=M.focus,Y=M.focusStyle,z=Y===void 0?{}:Y,se=x==="transparent",le=(0,r.default)({default:{swatch:n({background:x,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},k,G?z:{})}}),me=function(je){return F(x,je)},de=function(je){return je.keyCode===h&&F(x,je)},be=function(je){return j(x,je)},Ee={};return j&&(Ee.onMouseOver=be),t.default.createElement("div",n({style:le.swatch,onClick:me,title:V,tabIndex:0,onKeyDown:de},Ee),H,se&&t.default.createElement(a.default,{borderRadius:le.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};return s_.default=(0,o.handleFocus)(m),s_}var xV;function Vse(){return xV||(xV=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=eRe();Object.defineProperty(n,"Alpha",{enumerable:!0,get:function(){return h(e).default}});var t=xL();Object.defineProperty(n,"Checkboard",{enumerable:!0,get:function(){return h(t).default}});var i=tRe();Object.defineProperty(n,"EditableInput",{enumerable:!0,get:function(){return h(i).default}});var r=iRe();Object.defineProperty(n,"Hue",{enumerable:!0,get:function(){return h(r).default}});var o=rRe();Object.defineProperty(n,"Raised",{enumerable:!0,get:function(){return h(o).default}});var s=ARe();Object.defineProperty(n,"Saturation",{enumerable:!0,get:function(){return h(s).default}});var a=mRe();Object.defineProperty(n,"ColorWrap",{enumerable:!0,get:function(){return h(a).default}});var c=yRe();Object.defineProperty(n,"Swatch",{enumerable:!0,get:function(){return h(c).default}});function h(m){return m&&m.__esModule?m:{default:m}}})(Qk)),Qk}var a_={},eT,MV;function vRe(){if(MV)return eT;MV=1;function n(e){return e===void 0}return eT=n,eT}var HM={},wV;function bRe(){if(wV)return HM;wV=1,Object.defineProperty(HM,"__esModule",{value:!0});var n=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])}return s},e=Ya(),t=i(e);function i(s){return s&&s.__esModule?s:{default:s}}function r(s,a){var c={};for(var h in s)a.indexOf(h)>=0||Object.prototype.hasOwnProperty.call(s,h)&&(c[h]=s[h]);return c}var o=24;return HM.default=function(s){var a=s.fill,c=a===void 0?"currentColor":a,h=s.width,m=h===void 0?o:h,y=s.height,M=y===void 0?o:y,x=s.style,k=x===void 0?{}:x,P=r(s,["fill","width","height","style"]);return t.default.createElement("svg",n({viewBox:"0 0 "+o+" "+o,style:n({fill:c,width:m,height:M},k)},P),t.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},HM}var SV;function CRe(){if(SV)return a_;SV=1,Object.defineProperty(a_,"__esModule",{value:!0}),a_.ChromeFields=void 0;var n=(function(){function q(V,H){for(var G=0;G<H.length;G++){var Y=H[G];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(V,Y.key,Y)}}return function(V,H,G){return H&&q(V.prototype,H),G&&q(V,G),V}})(),e=Ya(),t=x(e),i=gm(),r=x(i),o=$se(),s=M(o),a=vRe(),c=x(a),h=Vse(),m=bRe(),y=x(m);function M(q){if(q&&q.__esModule)return q;var V={};if(q!=null)for(var H in q)Object.prototype.hasOwnProperty.call(q,H)&&(V[H]=q[H]);return V.default=q,V}function x(q){return q&&q.__esModule?q:{default:q}}function k(q,V){if(!(q instanceof V))throw new TypeError("Cannot call a class as a function")}function P(q,V){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:q}function F(q,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);q.prototype=Object.create(V&&V.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(q,V):q.__proto__=V)}var j=a_.ChromeFields=(function(q){F(V,q);function V(H){k(this,V);var G=P(this,(V.__proto__||Object.getPrototypeOf(V)).call(this));return G.toggleViews=function(){G.state.view==="hex"?G.setState({view:"rgb"}):G.state.view==="rgb"?G.setState({view:"hsl"}):G.state.view==="hsl"&&(G.props.hsl.a===1?G.setState({view:"hex"}):G.setState({view:"rgb"}))},G.handleChange=function(Y,z){Y.hex?s.isValidHex(Y.hex)&&G.props.onChange({hex:Y.hex,source:"hex"},z):Y.r||Y.g||Y.b?G.props.onChange({r:Y.r||G.props.rgb.r,g:Y.g||G.props.rgb.g,b:Y.b||G.props.rgb.b,source:"rgb"},z):Y.a?(Y.a<0?Y.a=0:Y.a>1&&(Y.a=1),G.props.onChange({h:G.props.hsl.h,s:G.props.hsl.s,l:G.props.hsl.l,a:Math.round(Y.a*100)/100,source:"rgb"},z)):(Y.h||Y.s||Y.l)&&(typeof Y.s=="string"&&Y.s.includes("%")&&(Y.s=Y.s.replace("%","")),typeof Y.l=="string"&&Y.l.includes("%")&&(Y.l=Y.l.replace("%","")),Y.s==1?Y.s=.01:Y.l==1&&(Y.l=.01),G.props.onChange({h:Y.h||G.props.hsl.h,s:Number((0,c.default)(Y.s)?G.props.hsl.s:Y.s),l:Number((0,c.default)(Y.l)?G.props.hsl.l:Y.l),source:"hsl"},z))},G.showHighlight=function(Y){Y.currentTarget.style.background="#eee"},G.hideHighlight=function(Y){Y.currentTarget.style.background="transparent"},H.hsl.a!==1&&H.view==="hex"?G.state={view:"rgb"}:G.state={view:H.view},G}return n(V,[{key:"render",value:function(){var G=this,Y=(0,r.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),z=void 0;return this.state.view==="hex"?z=t.default.createElement("div",{style:Y.fields,className:"flexbox-fix"},t.default.createElement("div",{style:Y.field},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?z=t.default.createElement("div",{style:Y.fields,className:"flexbox-fix"},t.default.createElement("div",{style:Y.field},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),t.default.createElement("div",{style:Y.field},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),t.default.createElement("div",{style:Y.field},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),t.default.createElement("div",{style:Y.alpha},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(z=t.default.createElement("div",{style:Y.fields,className:"flexbox-fix"},t.default.createElement("div",{style:Y.field},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),t.default.createElement("div",{style:Y.field},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:Y.field},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:Y.alpha},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),t.default.createElement("div",{style:Y.wrap,className:"flexbox-fix"},z,t.default.createElement("div",{style:Y.toggle},t.default.createElement("div",{style:Y.icon,onClick:this.toggleViews,ref:function(le){return G.icon=le}},t.default.createElement(y.default,{style:Y.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(G,Y){return G.hsl.a!==1&&Y.view==="hex"?{view:"rgb"}:null}}]),V})(t.default.Component);return j.defaultProps={view:"hex"},a_.default=j,a_}var l_={},EV;function _Re(){if(EV)return l_;EV=1,Object.defineProperty(l_,"__esModule",{value:!0}),l_.ChromePointer=void 0;var n=Ya(),e=r(n),t=gm(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}var o=l_.ChromePointer=function(){var a=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return e.default.createElement("div",{style:a.picker})};return l_.default=o,l_}var u_={},OV;function xRe(){if(OV)return u_;OV=1,Object.defineProperty(u_,"__esModule",{value:!0}),u_.ChromePointerCircle=void 0;var n=Ya(),e=r(n),t=gm(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}var o=u_.ChromePointerCircle=function(){var a=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return e.default.createElement("div",{style:a.picker})};return u_.default=o,u_}var BV;function MRe(){if(BV)return YC;BV=1,Object.defineProperty(YC,"__esModule",{value:!0}),YC.Chrome=void 0;var n=Ya(),e=P(n),t=b1(),i=P(t),r=gm(),o=P(r),s=qse(),a=P(s),c=Vse(),h=CRe(),m=P(h),y=_Re(),M=P(y),x=xRe(),k=P(x);function P(j){return j&&j.__esModule?j:{default:j}}var F=YC.Chrome=function(q){var V=q.width,H=q.onChange,G=q.disableAlpha,Y=q.rgb,z=q.hsl,se=q.hsv,le=q.hex,me=q.renderers,de=q.styles,be=de===void 0?{}:de,Ee=q.className,De=Ee===void 0?"":Ee,je=q.defaultView,Ie=(0,o.default)((0,a.default)({default:{picker:{width:V,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+Y.r+", "+Y.g+", "+Y.b+", "+Y.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},be),{disableAlpha:G});return e.default.createElement("div",{style:Ie.picker,className:"chrome-picker "+De},e.default.createElement("div",{style:Ie.saturation},e.default.createElement(c.Saturation,{style:Ie.Saturation,hsl:z,hsv:se,pointer:k.default,onChange:H})),e.default.createElement("div",{style:Ie.body},e.default.createElement("div",{style:Ie.controls,className:"flexbox-fix"},e.default.createElement("div",{style:Ie.color},e.default.createElement("div",{style:Ie.swatch},e.default.createElement("div",{style:Ie.active}),e.default.createElement(c.Checkboard,{renderers:me}))),e.default.createElement("div",{style:Ie.toggles},e.default.createElement("div",{style:Ie.hue},e.default.createElement(c.Hue,{style:Ie.Hue,hsl:z,pointer:M.default,onChange:H})),e.default.createElement("div",{style:Ie.alpha},e.default.createElement(c.Alpha,{style:Ie.Alpha,rgb:Y,hsl:z,pointer:M.default,renderers:me,onChange:H})))),e.default.createElement(m.default,{rgb:Y,hsl:z,hex:le,view:je,onChange:H,disableAlpha:G})))};return F.propTypes={width:i.default.oneOfType([i.default.string,i.default.number]),disableAlpha:i.default.bool,styles:i.default.object,defaultView:i.default.oneOf(["hex","rgb","hsl"])},F.defaultProps={width:225,disableAlpha:!1,styles:{}},YC.default=(0,c.ColorWrap)(F),YC}var wRe=MRe();const SRe=Xl(wRe);function wr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",e="04cff10f573f4461c1718b34a830d9c914f6fa95",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:23}},1:{start:{line:8,column:2},end:{line:8,column:56}},2:{start:{line:11,column:10},end:{line:13,column:3}},3:{start:{line:14,column:15},end:{line:14,column:19}},4:{start:{line:16,column:4},end:{line:16,column:17}},5:{start:{line:17,column:4},end:{line:17,column:75}},6:{start:{line:20,column:4},end:{line:20,column:27}},7:{start:{line:25,column:21},end:{line:39,column:3}},8:{start:{line:26,column:17},end:{line:26,column:32}},9:{start:{line:27,column:4},end:{line:38,column:5}},10:{start:{line:28,column:18},end:{line:28,column:46}},11:{start:{line:29,column:6},end:{line:32,column:8}},12:{start:{line:34,column:6},end:{line:37,column:8}},13:{start:{line:40,column:17},end:{line:42,column:3}},14:{start:{line:41,column:4},end:{line:41,column:62}},15:{start:{line:44,column:4},end:{line:49,column:5}},16:{start:{line:45,column:6},end:{line:45,column:43}},17:{start:{line:47,column:6},end:{line:47,column:49}},18:{start:{line:48,column:6},end:{line:48,column:39}},19:{start:{line:52,column:4},end:{line:52,column:47}},20:{start:{line:55,column:19},end:{line:55,column:42}},21:{start:{line:56,column:25},end:{line:56,column:44}},22:{start:{line:57,column:31},end:{line:63,column:5}},23:{start:{line:64,column:35},end:{line:99,column:5}},24:{start:{line:79,column:31},end:{line:79,column:67}},25:{start:{line:100,column:24},end:{line:102,column:5}},26:{start:{line:103,column:4},end:{line:124,column:9}},27:{start:{line:114,column:12},end:{line:114,column:36}},28:{start:{line:121,column:27},end:{line:121,column:56}}},fnMap:{0:{name:"formatColor",decl:{start:{line:6,column:9},end:{line:6,column:20}},loc:{start:{line:6,column:28},end:{line:9,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:21},end:{line:18,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:21,column:3}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:25,column:21},end:{line:25,column:22}},loc:{start:{line:25,column:27},end:{line:39,column:3}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:40,column:17},end:{line:40,column:18}},loc:{start:{line:40,column:23},end:{line:42,column:3}},line:40},5:{name:"(anonymous_5)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:14},end:{line:50,column:3}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:51,column:2},end:{line:51,column:3}},loc:{start:{line:51,column:14},end:{line:53,column:3}},line:51},7:{name:"(anonymous_7)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:125,column:3}},line:54},8:{name:"(anonymous_8)",decl:{start:{line:79,column:24},end:{line:79,column:25}},loc:{start:{line:79,column:31},end:{line:79,column:67}},line:79},9:{name:"(anonymous_9)",decl:{start:{line:113,column:15},end:{line:113,column:16}},loc:{start:{line:113,column:26},end:{line:115,column:11}},line:113},10:{name:"(anonymous_10)",decl:{start:{line:121,column:20},end:{line:121,column:21}},loc:{start:{line:121,column:27},end:{line:121,column:56}},line:121}},branchMap:{0:{loc:{start:{line:27,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:27,column:4},end:{line:38,column:5}},{start:{line:33,column:11},end:{line:38,column:5}}],line:27},1:{loc:{start:{line:52,column:24},end:{line:52,column:45}},type:"cond-expr",locations:[{start:{line:52,column:35},end:{line:52,column:41}},{start:{line:52,column:44},end:{line:52,column:45}}],line:52},2:{loc:{start:{line:104,column:6},end:{line:104,column:39}},type:"binary-expr",locations:[{start:{line:104,column:6},end:{line:104,column:29}},{start:{line:104,column:33},end:{line:104,column:39}}],line:104},3:{loc:{start:{line:120,column:17},end:{line:120,column:57}},type:"cond-expr",locations:[{start:{line:120,column:36},end:{line:120,column:52}},{start:{line:120,column:55},end:{line:120,column:57}}],line:120}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx"],names:[],mappings:"AAsFmB,SAQb,KARa;AAtFnB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AAEzB,OAAO,YAAY;AAEnB,SAAS,YAAY,OAA4B;AAC/C,QAAM,MAAM,MAAM;AAClB,SAAO,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC;AACpD;AAaA,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,QAAQ;AAAA,IACN,cAAc;AAAA,EAChB;AAAA,EACA,aAAsC;AAAA,EAEtC,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,kBAAkB,OAAO,SAAS,KAAK,iBAAiB,MAAK,EAAE;AAAA,EACtE;AAAA,EAEA,gBAAgB,GAAW;AACzB,SAAK,MAAM,SAAS,CAAC;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmB,MAAM;AACvB,UAAM,OAAO,KAAK;AAClB,QAAG,MAAM;AACP,YAAM,MAAM,KAAK,sBAAsB;AACvC,aAAO;AAAA,QACL,KAAK,IAAI;AAAA,QACT,MAAM,IAAI,OAAO;AAAA,MACnB;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,KAAK;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,MAAM;AACnB,SAAK,SAAS,EAAE,cAAc,CAAC,KAAK,MAAM,aAAa,CAAC;AAAA,EAC1D;AAAA,EAEA,IAAI,QAAQ;AAEV,QAAI;AACF,aAAO,MAAM,KAAK,MAAM,KAAK,EAAE,IAAI;AAAA,IACrC,SACM,KAAK;AACT,cAAQ,KAAK,yBAAyB,GAAG;AACzC,aAAO,MAAM,kBAAkB;AAAA,IACjC;AAAA,EACF;AAAA,EAEA,SAAU,GAAW;AACnB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,iBAAiB;AACrC,UAAM,eAAe,KAAK,MAAM,OAAO;AACvC,UAAM,qBAAqB;AAAA,MACzB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA;AAAA,MAEhB,GAAG,aAAa;AAAA,IAClB;AAEA,UAAM,SAAS;AAAA,MAAC;AAAA;AAAA,QACd,WAAU;AAAA,QACV,OAAO;AAAA,UACL,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,MAAM,OAAO;AAAA,UACb,KAAK,OAAO;AAAA,QACd;AAAA,QACA;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,gBAAgB,YAAY,CAAC,CAAC;AAAA;AAAA,UACpD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,OAAO;AAAA,gBACL,QAAQ;AAAA,gBACR,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,OAAO;AAAA,gBACP,QAAQ;AAAA,gBACR,MAAM;AAAA,cACR;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAEA,UAAM,cAAc;AAAA,MAClB,iBAAiB,KAAK,MAAM;AAAA,IAC9B;AAEA,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA,WAAK,MAAM,gBAAgB;AAAA,MAC5B,oBAAC,SAAI,WAAU,yBAAwB,OAAO,aAAa;AAAA,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,cAAa;AAAA,UACb,WAAU;AAAA,UACV,KAAK,CAAC,UAAU;AAAC,iBAAK,aAAa;AAAA,UAAM;AAAA,UACzC,SAAS,KAAK;AAAA,UACd,OAAO,KAAK,MAAM;AAAA,UAClB,MAAM,KAAK,MAAM;AAAA,UACjB,aAAa,KAAK,MAAM;AAAA,UACxB,OAAO,KAAK,MAAM,QAAQ,KAAK,MAAM,QAAQ;AAAA,UAC7C,UAAU,CAAC,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK;AAAA;AAAA,MAC/C;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"04cff10f573f4461c1718b34a830d9c914f6fa95"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return wr=function(){return s},s}wr();function ERe(n){wr().f[0]++;const e=(wr().s[0]++,n.rgb);return wr().s[1]++,`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}class ML extends On.Component{state=(wr().s[2]++,{pickerOpened:!1});colorInput=(wr().s[3]++,null);constructor(e){wr().f[1]++,wr().s[4]++,super(e),wr().s[5]++,this.onChangeNoCheck=t9.throttle(this.onChangeNoCheck,1e3/30)}onChangeNoCheck(e){wr().f[2]++,wr().s[6]++,this.props.onChange(e)}calcPickerOffset=(wr().s[7]++,()=>{wr().f[3]++;const e=(wr().s[8]++,this.colorInput);if(wr().s[9]++,e){wr().b[0][0]++;const t=(wr().s[10]++,e.getBoundingClientRect());return wr().s[11]++,{top:t.top,left:t.left+196}}else return wr().b[0][1]++,wr().s[12]++,{top:160,left:555}});togglePicker=(wr().s[13]++,()=>{wr().f[4]++,wr().s[14]++,this.setState({pickerOpened:!this.state.pickerOpened})});get color(){wr().f[5]++,wr().s[15]++;try{return wr().s[16]++,Wu(this.props.value).rgb()}catch(e){return wr().s[17]++,console.warn("Error parsing color: ",e),wr().s[18]++,Wu("rgb(255,255,255)")}}onChange(e){wr().f[6]++,wr().s[19]++,this.props.onChange(e===""?(wr().b[1][0]++,void 0):(wr().b[1][1]++,e))}render(){wr().f[7]++;const e=(wr().s[20]++,this.calcPickerOffset()),t=(wr().s[21]++,this.color.object()),i=(wr().s[22]++,{r:t.r,g:t.g,b:t.b,a:t.alpha}),r=(wr().s[23]++,ie.jsxs("div",{className:"maputnik-color-picker-offset",style:{position:"fixed",zIndex:1,left:e.left,top:e.top},children:[ie.jsx(SRe,{color:i,onChange:s=>(wr().f[8]++,wr().s[24]++,this.onChangeNoCheck(ERe(s)))}),ie.jsx("div",{className:"maputnik-color-picker-offset",onClick:this.togglePicker,style:{zIndex:-1,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}})]})),o=(wr().s[25]++,{backgroundColor:this.props.value});return wr().s[26]++,ie.jsxs("div",{className:"maputnik-color-wrapper",children:[(wr().b[2][0]++,this.state.pickerOpened&&(wr().b[2][1]++,r)),ie.jsx("div",{className:"maputnik-color-swatch",style:o}),ie.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",autoComplete:"off",className:"maputnik-color",ref:s=>{wr().f[9]++,wr().s[27]++,this.colorInput=s},onClick:this.togglePicker,style:this.props.style,name:this.props.name,placeholder:this.props.default,value:this.props.value?(wr().b[3][0]++,this.props.value):(wr().b[3][1]++,""),onChange:s=>(wr().f[10]++,wr().s[28]++,this.onChange(s.target.value))})]})}}function Ht(){var n="/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",e="4f1ef08718bb93faa62aae09b5e3576a9aa3bb04",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:8,column:19},end:{line:8,column:24}},2:{start:{line:10,column:4},end:{line:10,column:17}},3:{start:{line:11,column:4},end:{line:16,column:6}},4:{start:{line:19,column:4},end:{line:24,column:5}},5:{start:{line:20,column:6},end:{line:23,column:8}},6:{start:{line:25,column:4},end:{line:25,column:16}},7:{start:{line:28,column:18},end:{line:28,column:77}},8:{start:{line:29,column:23},end:{line:29,column:49}},9:{start:{line:30,column:4},end:{line:39,column:5}},10:{start:{line:31,column:6},end:{line:31,column:58}},11:{start:{line:31,column:31},end:{line:31,column:58}},12:{start:{line:32,column:6},end:{line:34,column:9}},13:{start:{line:35,column:11},end:{line:39,column:5}},14:{start:{line:36,column:6},end:{line:38,column:9}},15:{start:{line:40,column:4},end:{line:42,column:7}},16:{start:{line:45,column:4},end:{line:47,column:5}},17:{start:{line:46,column:6},end:{line:46,column:18}},18:{start:{line:48,column:18},end:{line:48,column:20}},19:{start:{line:49,column:4},end:{line:51,column:5}},20:{start:{line:50,column:6},end:{line:50,column:19}},21:{start:{line:52,column:4},end:{line:54,column:5}},22:{start:{line:53,column:6},end:{line:53,column:19}},23:{start:{line:55,column:4},end:{line:57,column:5}},24:{start:{line:56,column:6},end:{line:56,column:19}},25:{start:{line:58,column:4},end:{line:58,column:16}},26:{start:{line:60,column:15},end:{line:74,column:3}},27:{start:{line:61,column:4},end:{line:61,column:38}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:13}},30:{start:{line:65,column:4},end:{line:73,column:5}},31:{start:{line:66,column:6},end:{line:72,column:7}},32:{start:{line:67,column:8},end:{line:67,column:43}},33:{start:{line:68,column:8},end:{line:68,column:56}},34:{start:{line:70,column:8},end:{line:70,column:33}},35:{start:{line:71,column:8},end:{line:71,column:46}},36:{start:{line:75,column:18},end:{line:100,column:3}},37:{start:{line:76,column:16},end:{line:76,column:42}},38:{start:{line:77,column:17},end:{line:77,column:37}},39:{start:{line:78,column:21},end:{line:78,column:26}},40:{start:{line:79,column:4},end:{line:95,column:5}},41:{start:{line:80,column:19},end:{line:80,column:31}},42:{start:{line:81,column:6},end:{line:94,column:7}},43:{start:{line:82,column:8},end:{line:86,column:9}},44:{start:{line:83,column:10},end:{line:83,column:42}},45:{start:{line:85,column:10},end:{line:85,column:42}},46:{start:{line:87,column:8},end:{line:87,column:27}},47:{start:{line:89,column:8},end:{line:93,column:9}},48:{start:{line:90,column:10},end:{line:90,column:31}},49:{start:{line:92,column:10},end:{line:92,column:40}},50:{start:{line:96,column:4},end:{line:96,column:32}},51:{start:{line:97,column:4},end:{line:97,column:70}},52:{start:{line:98,column:4},end:{line:98,column:41}},53:{start:{line:99,column:4},end:{line:99,column:56}},54:{start:{line:99,column:29},end:{line:99,column:56}},55:{start:{line:102,column:4},end:{line:185,column:5}},56:{start:{line:103,column:20},end:{line:103,column:81}},57:{start:{line:104,column:27},end:{line:104,column:82}},58:{start:{line:106,column:6},end:{line:110,column:7}},59:{start:{line:107,column:8},end:{line:107,column:38}},60:{start:{line:109,column:8},end:{line:109,column:27}},61:{start:{line:111,column:6},end:{line:165,column:11}},62:{start:{line:124,column:14},end:{line:124,column:41}},63:{start:{line:127,column:14},end:{line:127,column:67}},64:{start:{line:130,column:14},end:{line:130,column:69}},65:{start:{line:133,column:14},end:{line:137,column:17}},66:{start:{line:152,column:14},end:{line:152,column:47}},67:{start:{line:155,column:14},end:{line:155,column:47}},68:{start:{line:158,column:14},end:{line:158,column:48}},69:{start:{line:159,column:14},end:{line:159,column:32}},70:{start:{line:167,column:20},end:{line:167,column:81}},71:{start:{line:168,column:6},end:{line:184,column:8}},72:{start:{line:176,column:27},end:{line:176,column:59}},73:{start:{line:178,column:12},end:{line:178,column:45}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:21},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:26,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:24},end:{line:43,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:13},end:{line:59,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:60,column:15},end:{line:60,column:16}},loc:{start:{line:60,column:21},end:{line:74,column:3}},line:60},5:{name:"(anonymous_5)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:25},end:{line:100,column:3}},line:75},6:{name:"(anonymous_6)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:11},end:{line:186,column:3}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:123,column:23},end:{line:123,column:24}},loc:{start:{line:123,column:29},end:{line:125,column:13}},line:123},8:{name:"(anonymous_8)",decl:{start:{line:126,column:27},end:{line:126,column:28}},loc:{start:{line:126,column:33},end:{line:128,column:13}},line:126},9:{name:"(anonymous_9)",decl:{start:{line:129,column:25},end:{line:129,column:26}},loc:{start:{line:129,column:31},end:{line:131,column:13}},line:129},10:{name:"(anonymous_10)",decl:{start:{line:132,column:20},end:{line:132,column:21}},loc:{start:{line:132,column:26},end:{line:138,column:13}},line:132},11:{name:"(anonymous_11)",decl:{start:{line:151,column:21},end:{line:151,column:22}},loc:{start:{line:151,column:29},end:{line:153,column:13}},line:151},12:{name:"(anonymous_12)",decl:{start:{line:154,column:22},end:{line:154,column:23}},loc:{start:{line:154,column:29},end:{line:156,column:13}},line:154},13:{name:"(anonymous_13)",decl:{start:{line:157,column:20},end:{line:157,column:21}},loc:{start:{line:157,column:28},end:{line:160,column:13}},line:157},14:{name:"(anonymous_14)",decl:{start:{line:176,column:20},end:{line:176,column:21}},loc:{start:{line:176,column:27},end:{line:176,column:59}},line:176},15:{name:"(anonymous_15)",decl:{start:{line:177,column:19},end:{line:177,column:20}},loc:{start:{line:177,column:25},end:{line:179,column:11}},line:177}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:8},end:{line:19,column:53}},type:"binary-expr",locations:[{start:{line:19,column:8},end:{line:19,column:22}},{start:{line:19,column:26},end:{line:19,column:53}}],line:19},2:{loc:{start:{line:28,column:18},end:{line:28,column:77}},type:"cond-expr",locations:[{start:{line:28,column:59},end:{line:28,column:65}},{start:{line:28,column:68},end:{line:28,column:77}}],line:28},3:{loc:{start:{line:28,column:18},end:{line:28,column:56}},type:"binary-expr",locations:[{start:{line:28,column:18},end:{line:28,column:33}},{start:{line:28,column:37},end:{line:28,column:56}}],line:28},4:{loc:{start:{line:30,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:39,column:5}},{start:{line:35,column:11},end:{line:39,column:5}}],line:30},5:{loc:{start:{line:30,column:8},end:{line:30,column:41}},type:"binary-expr",locations:[{start:{line:30,column:8},end:{line:30,column:27}},{start:{line:30,column:31},end:{line:30,column:41}}],line:30},6:{loc:{start:{line:31,column:6},end:{line:31,column:58}},type:"if",locations:[{start:{line:31,column:6},end:{line:31,column:58}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},7:{loc:{start:{line:35,column:11},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:11},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},8:{loc:{start:{line:35,column:15},end:{line:35,column:49}},type:"binary-expr",locations:[{start:{line:35,column:15},end:{line:35,column:35}},{start:{line:35,column:39},end:{line:35,column:49}}],line:35},9:{loc:{start:{line:41,column:18},end:{line:41,column:53}},type:"cond-expr",locations:[{start:{line:41,column:36},end:{line:41,column:42}},{start:{line:41,column:45},end:{line:41,column:53}}],line:41},10:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},11:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},12:{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},13:{loc:{start:{line:52,column:8},end:{line:52,column:56}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:30}},{start:{line:52,column:34},end:{line:52,column:56}}],line:52},14:{loc:{start:{line:55,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:57,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},15:{loc:{start:{line:55,column:8},end:{line:55,column:56}},type:"binary-expr",locations:[{start:{line:55,column:8},end:{line:55,column:30}},{start:{line:55,column:34},end:{line:55,column:56}}],line:55},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:65,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:73,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},18:{loc:{start:{line:66,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:72,column:7}},{start:{line:69,column:13},end:{line:72,column:7}}],line:66},19:{loc:{start:{line:79,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},20:{loc:{start:{line:81,column:6},end:{line:94,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:94,column:7}},{start:{line:88,column:13},end:{line:94,column:7}}],line:81},21:{loc:{start:{line:82,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:82,column:8},end:{line:86,column:9}},{start:{line:84,column:15},end:{line:86,column:9}}],line:82},22:{loc:{start:{line:89,column:8},end:{line:93,column:9}},type:"if",locations:[{start:{line:89,column:8},end:{line:93,column:9}},{start:{line:91,column:15},end:{line:93,column:9}}],line:89},23:{loc:{start:{line:99,column:4},end:{line:99,column:56}},type:"if",locations:[{start:{line:99,column:4},end:{line:99,column:56}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:99},24:{loc:{start:{line:102,column:4},end:{line:185,column:5}},type:"if",locations:[{start:{line:102,column:4},end:{line:185,column:5}},{start:{line:166,column:11},end:{line:185,column:5}}],line:102},25:{loc:{start:{line:102,column:8},end:{line:102,column:205}},type:"binary-expr",locations:[{start:{line:102,column:8},end:{line:102,column:63}},{start:{line:102,column:67},end:{line:102,column:122}},{start:{line:102,column:126},end:{line:102,column:151}},{start:{line:102,column:155},end:{line:102,column:180}},{start:{line:102,column:184},end:{line:102,column:205}}],line:102},26:{loc:{start:{line:103,column:20},end:{line:103,column:81}},type:"cond-expr",locations:[{start:{line:103,column:41},end:{line:103,column:62}},{start:{line:103,column:65},end:{line:103,column:81}}],line:103},27:{loc:{start:{line:104,column:27},end:{line:104,column:82}},type:"cond-expr",locations:[{start:{line:104,column:59},end:{line:104,column:61}},{start:{line:104,column:64},end:{line:104,column:82}}],line:104},28:{loc:{start:{line:106,column:6},end:{line:110,column:7}},type:"if",locations:[{start:{line:106,column:6},end:{line:110,column:7}},{start:{line:108,column:13},end:{line:110,column:7}}],line:106},29:{loc:{start:{line:121,column:19},end:{line:121,column:58}},type:"cond-expr",locations:[{start:{line:121,column:38},end:{line:121,column:50}},{start:{line:121,column:53},end:{line:121,column:58}}],line:121},30:{loc:{start:{line:150,column:19},end:{line:150,column:58}},type:"cond-expr",locations:[{start:{line:150,column:43},end:{line:150,column:45}},{start:{line:150,column:48},end:{line:150,column:58}}],line:150},31:{loc:{start:{line:167,column:20},end:{line:167,column:81}},type:"cond-expr",locations:[{start:{line:167,column:41},end:{line:167,column:62}},{start:{line:167,column:65},end:{line:167,column:81}}],line:167},32:{loc:{start:{line:175,column:17},end:{line:175,column:46}},type:"cond-expr",locations:[{start:{line:175,column:36},end:{line:175,column:38}},{start:{line:175,column:41},end:{line:175,column:46}}],line:175}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0,0,0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx"],names:[],mappings:"AA8Ka,SACL,KADK;AA9Kb,OAAO,WAAwC;AAC/C,OAAO,sBAAsB;AA0B7B,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,WAAW;AAAA,EACb;AAAA,EACA,iBAA0B;AAAA,EAE1B,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM,CAAC,iBAAiB;AAAA,MACxB,SAAS;AAAA,MACT,OAAO,MAAM;AAAA,MACb,YAAY,MAAM;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,WAAW,MAAM,UAAU,MAAM,OAAO;AACjD,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,QACb,YAAY,MAAM;AAAA,MACpB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,YAAY,UAAuC;AACjD,UAAM,QAAS,aAAa,MAAM,aAAa,SAC7C,SAAY,CAAC;AAEf,UAAM,aAAa,KAAK,MAAM,UAAU;AACxC,QAAG,KAAK,QAAQ,KAAK,KAAK,YAAY;AACpC,UAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAClD,WAAK,SAAS;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH,WACS,CAAC,KAAK,QAAQ,KAAK,KAAK,YAAY;AAC3C,WAAK,SAAS;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,SAAK,SAAS;AAAA,MACZ,YAAY,aAAa,KAAK,SAAY;AAAA,IAC5C,CAAC;AAAA,EACH;AAAA,EAEA,QAAQ,GAAgC;AACtC,QAAI,MAAM,QAAW;AACnB,aAAO;AAAA,IACT;AAEA,UAAM,QAAQ,CAAC;AACf,QAAG,MAAM,KAAK,GAAG;AACf,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAE9B,QAAG,CAAC,KAAK,MAAM,OAAO;AACpB;AAAA,IACF;AAGA,QAAI,CAAC,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACnC,UAAG,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACjC,aAAK,YAAY,KAAK,MAAM,KAAK;AACjC,aAAK,SAAS,EAAC,YAAY,KAAK,MAAM,MAAK,CAAC;AAAA,MAC9C,OAAO;AACL,aAAK,YAAY,MAAS;AAC1B,aAAK,SAAS,EAAC,YAAY,OAAS,CAAC;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,MAAqE;AACpF,QAAI,QAAQ,WAAW,EAAE,OAAO,KAAK;AACrC,UAAM,OAAO,KAAK,MAAM;AACxB,QAAI,aAAa;AAEjB,QAAG,MAAM;AAEP,YAAM,OAAO,QAAQ;AAGrB,UAAI,KAAK,gBAAgB;AAKvB,YAAI,QAAQ,CAAC,KAAK,MAAM,YAAa;AACnC,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B,OACK;AACH,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B;AACA,qBAAa;AAAA,MACf,OACK;AACH,YAAI,OAAO,OAAK,GAAG;AACjB,kBAAQ,QAAQ;AAAA,QAClB,OACK;AACH,kBAAQ,SAAS,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,SAAK,iBAAiB;AAGtB,YAAQ,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,CAAC;AAElE,SAAK,SAAS,EAAC,OAAO,WAAU,CAAC;AACjC,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAAA,EACpD;AAAA,EAEA,SAAS;AACP,QACE,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,KAAK,MAAM,QAAQ,UAAa,KAAK,MAAM,QAAQ,UACnD,KAAK,MAAM,YACX;AACA,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AACtE,YAAM,eAAe,KAAK,MAAM,YAAY,SAAY,KAAK,KAAK,MAAM;AACxE,UAAI;AACJ,UAAI,KAAK,MAAM,cAAc;AAC3B,qBAAa,KAAK,MAAM;AAAA,MAC1B,OACK;AACH,qBAAa;AAAA,MACf;AAEA,aAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YAEV,MAAK;AAAA,YACL,KAAK,KAAK,MAAM;AAAA,YAChB,KAAK,KAAK,MAAM;AAAA,YAChB,MAAK;AAAA,YACL,YAAW;AAAA,YACX,OAAO,UAAU,SAAY,eAAe;AAAA,YAC5C,UAAU,KAAK;AAAA,YACf,WAAW,MAAM;AACf,mBAAK,iBAAiB;AAAA,YACxB;AAAA,YACA,eAAe,MAAM;AACnB,mBAAK,SAAS,EAAC,SAAS,MAAM,cAAc,KAAI,CAAC;AAAA,YACnD;AAAA,YACA,aAAa,MAAM;AAEjB,mBAAK,SAAS,EAAC,SAAS,OAAO,cAAc,MAAK,CAAC;AAAA,YACrD;AAAA,YACA,QAAQ,MAAM;AACZ,mBAAK,SAAS;AAAA,gBACZ,SAAS;AAAA,gBACT,cAAc;AAAA,gBACd,YAAY,KAAK,MAAM;AAAA,cACzB,CAAC;AAAA,YACH;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAzBrC;AAAA,QA0BN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,MAAK;AAAA,YACL,YAAW;AAAA,YACX,WAAU;AAAA,YACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,YAC1C,OAAO,eAAe,SAAY,KAAK;AAAA,YACvC,SAAS,QAAM;AACb,mBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,YAC/B;AAAA,YACA,UAAU,OAAK;AACb,mBAAK,YAAY,EAAE,OAAO,KAAK;AAAA,YACjC;AAAA,YACA,QAAQ,QAAM;AACZ,mBAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,mBAAK,WAAW;AAAA,YAClB;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAhBrC;AAAA,QAkBN;AAAA,SACF;AAAA,IACF,OACK;AACH,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AAEtE,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,WAAU;AAAA,UACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,UAC1C,OAAO,UAAU,SAAY,KAAK;AAAA,UAClC,UAAU,OAAK,KAAK,YAAY,EAAE,OAAO,KAAK;AAAA,UAC9C,SAAS,MAAM;AACb,iBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,UAC/B;AAAA,UACA,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK,MAAM;AAAA,UACrB,eAAa,KAAK,MAAM,aAAa;AAAA;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4f1ef08718bb93faa62aae09b5e3576a9aa3bb04"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ht=function(){return s},s}Ht();class m1 extends On.Component{static defaultProps=(Ht().s[0]++,{rangeStep:1});_keyboardEvent=(Ht().s[1]++,!1);constructor(e){Ht().f[0]++,Ht().s[2]++,super(e),Ht().s[3]++,this.state={uuid:+Ex(),editing:!1,value:e.value,dirtyValue:e.value}}static getDerivedStateFromProps(e,t){return Ht().f[1]++,Ht().s[4]++,Ht().b[1][0]++,!t.editing&&(Ht().b[1][1]++,e.value!==t.value)?(Ht().b[0][0]++,Ht().s[5]++,{value:e.value,dirtyValue:e.value}):(Ht().b[0][1]++,Ht().s[6]++,null)}changeValue(e){Ht().f[2]++;const t=(Ht().s[7]++,Ht().b[3][0]++,e===""||(Ht().b[3][1]++,e===void 0)?(Ht().b[2][0]++,void 0):(Ht().b[2][1]++,+e)),i=(Ht().s[8]++,this.props.value!==t);Ht().s[9]++,Ht().b[5][0]++,this.isValid(t)&&(Ht().b[5][1]++,i)?(Ht().b[4][0]++,Ht().s[10]++,this.props.onChange?(Ht().b[6][0]++,Ht().s[11]++,this.props.onChange(t)):Ht().b[6][1]++,Ht().s[12]++,this.setState({value:t})):(Ht().b[4][1]++,Ht().s[13]++,Ht().b[8][0]++,!this.isValid(t)&&(Ht().b[8][1]++,i)?(Ht().b[7][0]++,Ht().s[14]++,this.setState({value:void 0})):Ht().b[7][1]++),Ht().s[15]++,this.setState({dirtyValue:e===""?(Ht().b[9][0]++,void 0):(Ht().b[9][1]++,e)})}isValid(e){if(Ht().f[3]++,Ht().s[16]++,e===void 0)return Ht().b[10][0]++,Ht().s[17]++,!0;Ht().b[10][1]++;const t=(Ht().s[18]++,+e);return Ht().s[19]++,isNaN(t)?(Ht().b[11][0]++,Ht().s[20]++,!1):(Ht().b[11][1]++,Ht().s[21]++,Ht().b[13][0]++,!isNaN(this.props.min)&&(Ht().b[13][1]++,t<this.props.min)?(Ht().b[12][0]++,Ht().s[22]++,!1):(Ht().b[12][1]++,Ht().s[23]++,Ht().b[15][0]++,!isNaN(this.props.max)&&(Ht().b[15][1]++,t>this.props.max)?(Ht().b[14][0]++,Ht().s[24]++,!1):(Ht().b[14][1]++,Ht().s[25]++,!0)))}resetValue=(Ht().s[26]++,()=>{if(Ht().f[4]++,Ht().s[27]++,this.setState({editing:!1}),Ht().s[28]++,this.state.value)Ht().b[16][1]++;else{Ht().b[16][0]++,Ht().s[29]++;return}Ht().s[30]++,this.isValid(this.state.value)?Ht().b[17][1]++:(Ht().b[17][0]++,Ht().s[31]++,this.isValid(this.props.value)?(Ht().b[18][0]++,Ht().s[32]++,this.changeValue(this.props.value),Ht().s[33]++,this.setState({dirtyValue:this.props.value})):(Ht().b[18][1]++,Ht().s[34]++,this.changeValue(void 0),Ht().s[35]++,this.setState({dirtyValue:void 0})))});onChangeRange=(Ht().s[36]++,e=>{Ht().f[5]++;let t=(Ht().s[37]++,parseFloat(e.target.value));const i=(Ht().s[38]++,this.props.rangeStep);let r=(Ht().s[39]++,t);if(Ht().s[40]++,i){Ht().b[19][0]++;const o=(Ht().s[41]++,t%i);Ht().s[42]++,this._keyboardEvent?(Ht().b[20][0]++,Ht().s[43]++,t<+this.state.dirtyValue?(Ht().b[21][0]++,Ht().s[44]++,t=this.state.value-i):(Ht().b[21][1]++,Ht().s[45]++,t=this.state.value+i),Ht().s[46]++,r=t):(Ht().b[20][1]++,Ht().s[47]++,o<i/2?(Ht().b[22][0]++,Ht().s[48]++,t=t-o):(Ht().b[22][1]++,Ht().s[49]++,t=t+(i-o)))}else Ht().b[19][1]++;Ht().s[50]++,this._keyboardEvent=!1,Ht().s[51]++,t=Math.max(this.props.min,Math.min(this.props.max,t)),Ht().s[52]++,this.setState({value:t,dirtyValue:r}),Ht().s[53]++,this.props.onChange?(Ht().b[23][0]++,Ht().s[54]++,this.props.onChange(t)):Ht().b[23][1]++});render(){if(Ht().f[6]++,Ht().s[55]++,Ht().b[25][0]++,Object.prototype.hasOwnProperty.call(this.props,"min")&&(Ht().b[25][1]++,Object.prototype.hasOwnProperty.call(this.props,"max"))&&(Ht().b[25][2]++,this.props.min!==void 0)&&(Ht().b[25][3]++,this.props.max!==void 0)&&(Ht().b[25][4]++,this.props.allowRange)){Ht().b[24][0]++;const e=(Ht().s[56]++,this.state.editing?(Ht().b[26][0]++,this.state.dirtyValue):(Ht().b[26][1]++,this.state.value)),t=(Ht().s[57]++,this.props.default===void 0?(Ht().b[27][0]++,""):(Ht().b[27][1]++,this.props.default));let i;return Ht().s[58]++,this.state.editingRange?(Ht().b[28][0]++,Ht().s[59]++,i=this.state.value):(Ht().b[28][1]++,Ht().s[60]++,i=e),Ht().s[61]++,ie.jsxs("div",{className:"maputnik-number-container",children:[ie.jsx("input",{className:"maputnik-number-range",type:"range",max:this.props.max,min:this.props.min,step:"any",spellCheck:"false",value:e===void 0?(Ht().b[29][0]++,t):(Ht().b[29][1]++,e),onChange:this.onChangeRange,onKeyDown:()=>{Ht().f[7]++,Ht().s[62]++,this._keyboardEvent=!0},onPointerDown:()=>{Ht().f[8]++,Ht().s[63]++,this.setState({editing:!0,editingRange:!0})},onPointerUp:()=>{Ht().f[9]++,Ht().s[64]++,this.setState({editing:!1,editingRange:!1})},onBlur:()=>{Ht().f[10]++,Ht().s[65]++,this.setState({editing:!1,editingRange:!1,dirtyValue:this.state.value})},"data-wd-key":this.props["data-wd-key"]+"-range"},"range"),ie.jsx("input",{type:"text",spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:i===void 0?(Ht().b[30][0]++,""):(Ht().b[30][1]++,i),onFocus:r=>{Ht().f[11]++,Ht().s[66]++,this.setState({editing:!0})},onChange:r=>{Ht().f[12]++,Ht().s[67]++,this.changeValue(r.target.value)},onBlur:r=>{Ht().f[13]++,Ht().s[68]++,this.setState({editing:!1}),Ht().s[69]++,this.resetValue()},"data-wd-key":this.props["data-wd-key"]+"-text"},"text")]})}else{Ht().b[24][1]++;const e=(Ht().s[70]++,this.state.editing?(Ht().b[31][0]++,this.state.dirtyValue):(Ht().b[31][1]++,this.state.value));return Ht().s[71]++,ie.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:e===void 0?(Ht().b[32][0]++,""):(Ht().b[32][1]++,e),onChange:t=>(Ht().f[14]++,Ht().s[72]++,this.changeValue(t.target.value)),onFocus:()=>{Ht().f[15]++,Ht().s[73]++,this.setState({editing:!0})},onBlur:this.resetValue,required:this.props.required,"data-wd-key":this.props["data-wd-key"]})}}}function hg(){var n="/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",e="e85f7924976070cbab7795bce9cf0e191e4a6b5e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",statementMap:{0:{start:{line:4,column:24},end:{line:6,column:3}},1:{start:{line:7,column:13},end:{line:9,column:3}},2:{start:{line:8,column:4},end:{line:8,column:43}},3:{start:{line:11,column:4},end:{line:26,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:27,column:3}},line:10}},branchMap:{0:{loc:{start:{line:24,column:17},end:{line:24,column:53}},type:"cond-expr",locations:[{start:{line:24,column:36},end:{line:24,column:44}},{start:{line:24,column:47},end:{line:24,column:53}}],line:24}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx"],names:[],mappings:"AAkBW,SACL,KADK;AAlBX,OAAO,WAAW;AAQlB,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,OAAO,eAAe;AAAA,IACpB,OAAO;AAAA,EACT;AAAA,EAEA,WAAW,MAAM;AACf,SAAK,MAAM,SAAS,CAAC,KAAK,MAAM,KAAK;AAAA,EACvC;AAAA,EAEA,SAAS;AACP,WAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,MAAK;AAAA,UACL,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,KAAK;AAAA,UACf,SAAS,KAAK;AAAA,UACd,SAAS,KAAK,MAAM;AAAA;AAAA,MACtB;AAAA,MACA,oBAAC,SAAI,WAAU,yBACb,8BAAC,SAAI,OAAO;AAAA,QACV,SAAS,KAAK,MAAM,QAAQ,WAAW;AAAA,MACzC,GAAG,WAAU,0BAAyB,SAAQ,aAC5C,8BAAC,UAAK,GAAE,2CAA0C,GACpD,GACF;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e85f7924976070cbab7795bce9cf0e191e4a6b5e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return hg=function(){return s},s}hg();class Hse extends On.Component{static defaultProps=(hg().s[0]++,{value:!1});onChange=(hg().s[1]++,()=>{hg().f[0]++,hg().s[2]++,this.props.onChange(!this.props.value)});render(){return hg().f[1]++,hg().s[3]++,ie.jsxs("div",{className:"maputnik-checkbox-wrapper",children:[ie.jsx("input",{className:"maputnik-checkbox",type:"checkbox",style:this.props.style,onChange:this.onChange,onClick:this.onChange,checked:this.props.value}),ie.jsx("div",{className:"maputnik-checkbox-box",children:ie.jsx("svg",{style:{display:this.props.value?(hg().b[0][0]++,"inline"):(hg().b[0][1]++,"none")},className:"maputnik-checkbox-icon",viewBox:"0 0 32 32",children:ie.jsx("path",{d:"M1 14 L5 10 L13 18 L27 4 L31 8 L13 26 z"})})})]})}}function yi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",e="9ed81d69001830f70ea45ac1502cde5125167d89",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:11,column:17}},2:{start:{line:12,column:4},end:{line:16,column:6}},3:{start:{line:19,column:18},end:{line:19,column:20}},4:{start:{line:20,column:30},end:{line:20,column:62}},5:{start:{line:21,column:4},end:{line:28,column:7}},6:{start:{line:22,column:6},end:{line:27,column:7}},7:{start:{line:23,column:8},end:{line:23,column:34}},8:{start:{line:25,column:8},end:{line:25,column:34}},9:{start:{line:26,column:8},end:{line:26,column:46}},10:{start:{line:29,column:4},end:{line:32,column:6}},11:{start:{line:35,column:4},end:{line:38,column:7}},12:{start:{line:36,column:18},end:{line:36,column:26}},13:{start:{line:37,column:6},end:{line:37,column:45}},14:{start:{line:41,column:18},end:{line:41,column:43}},15:{start:{line:42,column:4},end:{line:42,column:26}},16:{start:{line:43,column:4},end:{line:51,column:7}},17:{start:{line:46,column:6},end:{line:50,column:7}},18:{start:{line:47,column:8},end:{line:47,column:35}},19:{start:{line:48,column:13},end:{line:50,column:7}},20:{start:{line:49,column:8},end:{line:49,column:36}},21:{start:{line:54,column:22},end:{line:54,column:32}},22:{start:{line:55,column:27},end:{line:57,column:6}},23:{start:{line:56,column:6},end:{line:56,column:42}},24:{start:{line:58,column:19},end:{line:84,column:6}},25:{start:{line:59,column:6},end:{line:83,column:7}},26:{start:{line:60,column:8},end:{line:70,column:10}},27:{start:{line:66,column:29},end:{line:66,column:51}},28:{start:{line:72,column:8},end:{line:82,column:10}},29:{start:{line:85,column:4},end:{line:85,column:89}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:21},end:{line:17,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:33,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:39},end:{line:21,column:40}},loc:{start:{line:21,column:49},end:{line:28,column:5}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:20},end:{line:39,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:35,column:53},end:{line:35,column:54}},loc:{start:{line:35,column:63},end:{line:38,column:5}},line:35},5:{name:"(anonymous_5)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:29},end:{line:52,column:3}},line:40},6:{name:"(anonymous_6)",decl:{start:{line:45,column:7},end:{line:45,column:8}},loc:{start:{line:45,column:13},end:{line:51,column:5}},line:45},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:86,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:55,column:60},end:{line:55,column:61}},loc:{start:{line:55,column:69},end:{line:57,column:5}},line:55},9:{name:"(anonymous_9)",decl:{start:{line:58,column:59},end:{line:58,column:60}},loc:{start:{line:58,column:69},end:{line:84,column:5}},line:58},10:{name:"(anonymous_10)",decl:{start:{line:66,column:22},end:{line:66,column:23}},loc:{start:{line:66,column:29},end:{line:66,column:51}},line:66}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:24,column:13},end:{line:27,column:7}}],line:22},1:{loc:{start:{line:37,column:15},end:{line:37,column:43}},type:"binary-expr",locations:[{start:{line:37,column:15},end:{line:37,column:29}},{start:{line:37,column:33},end:{line:37,column:43}}],line:37},2:{loc:{start:{line:46,column:6},end:{line:50,column:7}},type:"if",locations:[{start:{line:46,column:6},end:{line:50,column:7}},{start:{line:48,column:13},end:{line:50,column:7}}],line:46},3:{loc:{start:{line:46,column:10},end:{line:46,column:55}},type:"binary-expr",locations:[{start:{line:46,column:10},end:{line:46,column:32}},{start:{line:46,column:36},end:{line:46,column:55}}],line:46},4:{loc:{start:{line:48,column:13},end:{line:50,column:7}},type:"if",locations:[{start:{line:48,column:13},end:{line:50,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:55,column:27},end:{line:57,column:6}},type:"binary-expr",locations:[{start:{line:55,column:27},end:{line:55,column:43}},{start:{line:55,column:47},end:{line:57,column:6}}],line:55},6:{loc:{start:{line:56,column:13},end:{line:56,column:41}},type:"binary-expr",locations:[{start:{line:56,column:13},end:{line:56,column:23}},{start:{line:56,column:27},end:{line:56,column:41}}],line:56},7:{loc:{start:{line:59,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:59,column:6},end:{line:83,column:7}},{start:{line:71,column:13},end:{line:83,column:7}}],line:59},8:{loc:{start:{line:63,column:21},end:{line:63,column:91}},type:"cond-expr",locations:[{start:{line:63,column:61},end:{line:63,column:67}},{start:{line:63,column:70},end:{line:63,column:91}}],line:63},9:{loc:{start:{line:63,column:21},end:{line:63,column:58}},type:"binary-expr",locations:[{start:{line:63,column:21},end:{line:63,column:35}},{start:{line:63,column:39},end:{line:63,column:58}}],line:63},10:{loc:{start:{line:65,column:22},end:{line:65,column:51}},type:"cond-expr",locations:[{start:{line:65,column:39},end:{line:65,column:43}},{start:{line:65,column:46},end:{line:65,column:51}}],line:65},11:{loc:{start:{line:67,column:26},end:{line:67,column:70}},type:"binary-expr",locations:[{start:{line:67,column:26},end:{line:67,column:50}},{start:{line:67,column:54},end:{line:67,column:70}}],line:67},12:{loc:{start:{line:75,column:21},end:{line:75,column:91}},type:"cond-expr",locations:[{start:{line:75,column:61},end:{line:75,column:67}},{start:{line:75,column:70},end:{line:75,column:91}}],line:75},13:{loc:{start:{line:75,column:21},end:{line:75,column:58}},type:"binary-expr",locations:[{start:{line:75,column:21},end:{line:75,column:35}},{start:{line:75,column:39},end:{line:75,column:58}}],line:75},14:{loc:{start:{line:77,column:22},end:{line:77,column:51}},type:"cond-expr",locations:[{start:{line:77,column:39},end:{line:77,column:43}},{start:{line:77,column:46},end:{line:77,column:51}}],line:77},15:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx"],names:[],mappings:"AA0Fe;AA1Ff,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AAiBxB,qBAAqB,mBAAmB,MAAM,UAA4C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,IACR,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA;AAAA,MAE/B,mBAAmB,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAkC,OAAwB;AACxF,UAAM,QAAe,CAAC;AACtB,UAAM,oBAAoB,MAAM,kBAAkB,MAAM,CAAC;AAEzD,UAAM,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC3C,UAAI,MAAM,MAAM,CAAC,MAAM,MAAM,kBAAkB,CAAC,GAAG;AACjD,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MAC1B,OACK;AACH,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AACxB,0BAAkB,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MACtC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,OAAkB;AAC3B,WAAO,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,MAAM,CAAC,GAAG,MAAM;AACzD,YAAM,MAAM,MAAM,CAAC;AACnB,aAAO,EAAE,QAAQ,UAAa,QAAQ;AAAA,IACxC,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,KAAa,UAAuC;AAC9D,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,CAAC;AACtC,UAAM,GAAG,IAAI;AAEb,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,UAAU;AACjD,aAAK,MAAM,SAAS,KAAK;AAAA,MAC3B,WACS,KAAK,MAAM,UAAS;AAE3B,aAAK,MAAM,SAAS,MAAS;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,UAAM,iBACJ,MAAM,SAAS,KACf,CAAC,MAAM,MAAM,SAAO;AAClB,aAAQ,QAAQ,MAAM,QAAQ;AAAA,IAChC,CAAC;AAGH,UAAM,SAAS,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC/D,UAAG,KAAK,MAAM,SAAS,UAAU;AAC/B,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,CAAC,MAAM,KAAK,YAAY,GAAG,CAAC;AAAA,YACtC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF,OAAO;AACL,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF;AAAA,IACF,CAAC;AAED,WACE,oBAAC,SAAI,WAAU,kBACZ,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9ed81d69001830f70ea45ac1502cde5125167d89"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return yi=function(){return s},s}yi();class UD extends On.Component{static defaultProps=(yi().s[0]++,{value:[],default:[]});constructor(e){yi().f[0]++,yi().s[1]++,super(e),yi().s[2]++,this.state={value:this.props.value.slice(0),initialPropsValue:this.props.value.slice(0)}}static getDerivedStateFromProps(e,t){yi().f[1]++;const i=(yi().s[3]++,[]),r=(yi().s[4]++,t.initialPropsValue.slice(0));return yi().s[5]++,Array(e.length).fill(null).map((o,s)=>{yi().f[2]++,yi().s[6]++,e.value[s]===t.initialPropsValue[s]?(yi().b[0][0]++,yi().s[7]++,i[s]=t.value[s]):(yi().b[0][1]++,yi().s[8]++,i[s]=t.value[s],yi().s[9]++,r[s]=t.value[s])}),yi().s[10]++,{value:i,initialPropsValue:r}}isComplete(e){return yi().f[3]++,yi().s[11]++,Array(this.props.length).fill(null).every((t,i)=>{yi().f[4]++;const r=(yi().s[12]++,e[i]);return yi().s[13]++,yi().b[1][0]++,!(r===void 0||(yi().b[1][1]++,r===""))})}changeValue(e,t){yi().f[5]++;const i=(yi().s[14]++,this.state.value.slice(0));yi().s[15]++,i[e]=t,yi().s[16]++,this.setState({value:i},()=>{yi().f[6]++,yi().s[17]++,yi().b[3][0]++,this.isComplete(i)&&(yi().b[3][1]++,this.props.onChange)?(yi().b[2][0]++,yi().s[18]++,this.props.onChange(i)):(yi().b[2][1]++,yi().s[19]++,this.props.onChange?(yi().b[4][0]++,yi().s[20]++,this.props.onChange(void 0)):yi().b[4][1]++)})}render(){yi().f[7]++;const{value:e}=(yi().s[21]++,this.state),t=(yi().s[22]++,yi().b[5][0]++,e.length>0&&(yi().b[5][1]++,!e.every(r=>(yi().f[8]++,yi().s[23]++,yi().b[6][0]++,r===""||(yi().b[6][1]++,r===void 0))))),i=(yi().s[24]++,Array(this.props.length).fill(null).map((r,o)=>(yi().f[9]++,yi().s[25]++,this.props.type==="number"?(yi().b[7][0]++,yi().s[26]++,ie.jsx(m1,{default:(yi().b[9][0]++,t||(yi().b[9][1]++,!this.props.default)?(yi().b[8][0]++,void 0):(yi().b[8][1]++,this.props.default[o])),value:e[o],required:t?(yi().b[10][0]++,!0):(yi().b[10][1]++,!1),onChange:s=>(yi().f[10]++,yi().s[27]++,this.changeValue(o,s)),"aria-label":(yi().b[11][0]++,this.props["aria-label"]||(yi().b[11][1]++,this.props.label))},o)):(yi().b[7][1]++,yi().s[28]++,ie.jsx(um,{default:(yi().b[13][0]++,t||(yi().b[13][1]++,!this.props.default)?(yi().b[12][0]++,void 0):(yi().b[12][1]++,this.props.default[o])),value:e[o],required:t?(yi().b[14][0]++,!0):(yi().b[14][1]++,!1),onChange:this.changeValue.bind(this,o),"aria-label":(yi().b[15][0]++,this.props["aria-label"]||(yi().b[15][1]++,this.props.label))},o)))));return yi().s[29]++,ie.jsx("div",{className:"maputnik-array",children:i})}}function mu(){var n="/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",e="bdd7d8430a2c43402b1b125b74a343e39aea6a6c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",statementMap:{0:{start:{line:6,column:18},end:{line:6,column:36}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:43}},3:{start:{line:8,column:35},end:{line:8,column:41}},4:{start:{line:10,column:26},end:{line:10,column:59}},5:{start:{line:11,column:19},end:{line:32,column:6}},6:{start:{line:12,column:6},end:{line:31,column:8}},7:{start:{line:22,column:34},end:{line:22,column:58}},8:{start:{line:33,column:4},end:{line:33,column:140}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:34,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:8,column:28},end:{line:8,column:29}},loc:{start:{line:8,column:35},end:{line:8,column:41}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:31},end:{line:11,column:32}},loc:{start:{line:11,column:49},end:{line:32,column:5}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:26},end:{line:22,column:27}},loc:{start:{line:22,column:34},end:{line:22,column:58}},line:22}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:7,column:8},end:{line:7,column:56}},type:"binary-expr",locations:[{start:{line:7,column:8},end:{line:7,column:26}},{start:{line:7,column:30},end:{line:7,column:56}}],line:7},2:{loc:{start:{line:10,column:26},end:{line:10,column:59}},type:"binary-expr",locations:[{start:{line:10,column:26},end:{line:10,column:42}},{start:{line:10,column:46},end:{line:10,column:59}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx"],names:[],mappings:"AAoBa,SAIL,KAJK;AApBb,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAUvB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,IACnC;AAEA,UAAM,gBAAgB,KAAK,MAAM,SAAS,QAAQ,CAAC,EAAE,CAAC;AACtD,UAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAK;AAC1C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,WAAW,WAAW,mBAAmB,4BAA4B,EAAC,4BAA4B,QAAQ,cAAa,CAAC;AAAA,UAExH;AAAA;AAAA,cAAC;AAAA;AAAA,gBAAM,MAAK;AAAA,gBACV,MAAM,KAAK,MAAM;AAAA,gBACjB,UAAU,QAAM,KAAK,MAAM,SAAS,GAAG;AAAA,gBACvC,OAAO;AAAA,gBACP,SAAS,QAAQ;AAAA;AAAA,YACnB;AAAA,YACC;AAAA;AAAA;AAAA,QATI;AAAA,MAUP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,cAAS,WAAU,wBAAuB,cAAY,KAAK,MAAM,YAAY,GAClF,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bdd7d8430a2c43402b1b125b74a343e39aea6a6c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return mu=function(){return s},s}mu();class ORe extends On.Component{render(){mu().f[0]++;let e=(mu().s[0]++,this.props.options);mu().s[1]++,mu().b[1][0]++,e.length>0&&(mu().b[1][1]++,!Array.isArray(e[0]))?(mu().b[0][0]++,mu().s[2]++,e=e.map(r=>(mu().f[1]++,mu().s[3]++,[r,r]))):mu().b[0][1]++;const t=(mu().s[4]++,mu().b[2][0]++,this.props.value||(mu().b[2][1]++,e[0][0])),i=(mu().s[5]++,e.map(([r,o])=>(mu().f[2]++,mu().s[6]++,ie.jsxs("label",{className:Yg("maputnik-button","maputnik-radio-as-button",{"maputnik-button-selected":r===t}),children:[ie.jsx("input",{type:"radio",name:this.props.name,onChange:s=>(mu().f[3]++,mu().s[7]++,this.props.onChange(r)),value:r,checked:r===t}),o]},r))));return mu().s[8]++,ie.jsx("fieldset",{className:"maputnik-multibutton","aria-label":this.props["aria-label"],children:i})}}function sl(){var n="/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",e="d905b5da4422f2b84d44f87b04fda3de421542f5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",statementMap:{0:{start:{line:6,column:12},end:{line:6,column:13}},1:{start:{line:7,column:2},end:{line:9,column:5}},2:{start:{line:8,column:4},end:{line:8,column:24}},3:{start:{line:10,column:2},end:{line:10,column:13}},4:{start:{line:14,column:54},end:{line:14,column:64}},5:{start:{line:15,column:4},end:{line:36,column:5}},6:{start:{line:16,column:6},end:{line:25,column:8}},7:{start:{line:27,column:6},end:{line:35,column:8}}},fnMap:{0:{name:"optionsLabelLength",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:37},end:{line:11,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:34},end:{line:9,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:37,column:3}},line:13}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:15},1:{loc:{start:{line:15,column:8},end:{line:15,column:64}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:27}},{start:{line:15,column:31},end:{line:15,column:64}}],line:15},2:{loc:{start:{line:21,column:17},end:{line:21,column:44}},type:"binary-expr",locations:[{start:{line:21,column:17},end:{line:21,column:22}},{start:{line:21,column:26},end:{line:21,column:44}}],line:21},3:{loc:{start:{line:23,column:24},end:{line:23,column:57}},type:"binary-expr",locations:[{start:{line:23,column:24},end:{line:23,column:48}},{start:{line:23,column:52},end:{line:23,column:57}}],line:23},4:{loc:{start:{line:31,column:17},end:{line:31,column:44}},type:"binary-expr",locations:[{start:{line:31,column:17},end:{line:31,column:22}},{start:{line:31,column:26},end:{line:31,column:44}}],line:31},5:{loc:{start:{line:33,column:24},end:{line:33,column:57}},type:"binary-expr",locations:[{start:{line:33,column:24},end:{line:33,column:48}},{start:{line:33,column:52},end:{line:33,column:57}}],line:33}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx"],names:[],mappings:"AAgCa;AAhCb,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,qBAAqB;AAG5B,SAAS,mBAAmB,SAAgB;AAC1C,MAAI,MAAM;AACV,UAAQ,QAAQ,CAAC,CAAC,GAAG,KAAK,MAAM;AAC9B,WAAO,MAAM;AAAA,EACf,CAAC;AACD,SAAO;AACT;AAgBA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,EAAC,SAAS,OAAO,UAAU,MAAM,MAAK,IAAI,KAAK;AAErD,QAAG,QAAQ,UAAU,KAAK,mBAAmB,OAAO,KAAK,IAAI;AAC3D,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d905b5da4422f2b84d44f87b04fda3de421542f5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return sl=function(){return s},s}sl();function BRe(n){sl().f[0]++;let e=(sl().s[0]++,0);return sl().s[1]++,n.forEach(([t,i])=>{sl().f[1]++,sl().s[2]++,e+=i.length}),sl().s[3]++,e}class wL extends On.Component{render(){sl().f[2]++;const{options:e,value:t,onChange:i,name:r,label:o}=(sl().s[4]++,this.props);return sl().s[5]++,sl().b[1][0]++,e.length<=3&&(sl().b[1][1]++,BRe(e)<=20)?(sl().b[0][0]++,sl().s[6]++,ie.jsx(ORe,{name:r,options:e,value:(sl().b[2][0]++,t||(sl().b[2][1]++,this.props.default)),onChange:i,"aria-label":(sl().b[3][0]++,this.props["aria-label"]||(sl().b[3][1]++,o))})):(sl().b[0][1]++,sl().s[7]++,ie.jsx(nC,{options:e,value:(sl().b[4][0]++,t||(sl().b[4][1]++,this.props.default)),onChange:i,"aria-label":(sl().b[5][0]++,this.props["aria-label"]||(sl().b[5][1]++,o))}))}}function tx(){var n="/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",e="f693e5bbe9d7e0de15b6fd90f13b77a5ebfddf0e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:4},end:{line:12,column:9}},2:{start:{line:15,column:19},end:{line:15,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:13,column:3}},line:6}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AACtD,OAAO;AAOP,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAU;AACR,UAAM,IAAI,KAAK,MAAM;AACrB,WACE,qBAAC,SAAI,WAAU,cACZ;AAAA,QAAE,QAAQ;AAAA,MAAE;AAAA,MAAE,KAAK,MAAM;AAAA,OAC5B;AAAA,EAEJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f693e5bbe9d7e0de15b6fd90f13b77a5ebfddf0e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return tx=function(){return s},s}tx();class IRe extends On.Component{render(){tx().f[0]++;const e=(tx().s[0]++,this.props.t);return tx().s[1]++,ie.jsxs("div",{className:"SmallError",children:[e("Error:")," ",this.props.children]})}}const tT=(tx().s[2]++,$o()(IRe));function Sr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",e="447f54dcea7174dfde20df5fd4ad658ec6e8baa0",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",statementMap:{0:{start:{line:7,column:2},end:{line:9,column:3}},1:{start:{line:8,column:4},end:{line:8,column:11}},2:{start:{line:11,column:22},end:{line:18,column:3}},3:{start:{line:12,column:4},end:{line:17,column:5}},4:{start:{line:13,column:21},end:{line:13,column:34}},5:{start:{line:14,column:6},end:{line:14,column:29}},6:{start:{line:16,column:6},end:{line:16,column:20}},7:{start:{line:19,column:19},end:{line:19,column:35}},8:{start:{line:20,column:16},end:{line:20,column:53}},9:{start:{line:21,column:2},end:{line:41,column:3}},10:{start:{line:22,column:4},end:{line:34,column:5}},11:{start:{line:23,column:6},end:{line:26,column:14}},12:{start:{line:28,column:6},end:{line:33,column:14}},13:{start:{line:35,column:9},end:{line:41,column:3}},14:{start:{line:36,column:4},end:{line:40,column:12}},15:{start:{line:42,column:2},end:{line:42,column:15}},16:{start:{line:45,column:24},end:{line:48,column:3}},17:{start:{line:50,column:4},end:{line:50,column:17}},18:{start:{line:51,column:4},end:{line:53,column:6}},19:{start:{line:55,column:12},end:{line:60,column:3}},20:{start:{line:56,column:4},end:{line:58,column:7}},21:{start:{line:59,column:4},end:{line:59,column:52}},22:{start:{line:59,column:28},end:{line:59,column:52}},23:{start:{line:61,column:13},end:{line:66,column:3}},24:{start:{line:62,column:4},end:{line:64,column:7}},25:{start:{line:65,column:4},end:{line:65,column:29}},26:{start:{line:68,column:4},end:{line:79,column:9}},27:{start:{line:82,column:17},end:{line:82,column:52}}},fnMap:{0:{name:"validate",decl:{start:{line:6,column:9},end:{line:6,column:17}},loc:{start:{line:6,column:26},end:{line:43,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:11,column:22},end:{line:11,column:23}},loc:{start:{line:11,column:32},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:46,column:13},end:{line:46,column:14}},loc:{start:{line:46,column:19},end:{line:47,column:5}},line:46},3:{name:"(anonymous_3)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:21},end:{line:54,column:3}},line:49},4:{name:"(anonymous_4)",decl:{start:{line:55,column:12},end:{line:55,column:13}},loc:{start:{line:55,column:21},end:{line:60,column:3}},line:55},5:{name:"(anonymous_5)",decl:{start:{line:61,column:13},end:{line:61,column:14}},loc:{start:{line:61,column:22},end:{line:66,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:11},end:{line:80,column:3}},line:67}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:7,column:2},end:{line:9,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:21,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:41,column:3}},{start:{line:35,column:9},end:{line:41,column:3}}],line:21},2:{loc:{start:{line:22,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:34,column:5}},{start:{line:27,column:11},end:{line:34,column:5}}],line:22},3:{loc:{start:{line:35,column:9},end:{line:41,column:3}},type:"if",locations:[{start:{line:35,column:9},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:35,column:13},end:{line:35,column:86}},type:"binary-expr",locations:[{start:{line:35,column:13},end:{line:35,column:21}},{start:{line:35,column:25},end:{line:35,column:45}},{start:{line:35,column:49},end:{line:35,column:86}}],line:35},5:{loc:{start:{line:59,column:4},end:{line:59,column:52}},type:"if",locations:[{start:{line:59,column:4},end:{line:59,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx"],names:["url"],mappings:"AA4BU,SAAoC,KAApC;AA5BV,OAAO,WAAyB;AAChC,OAAO,iBAAiB;AACxB,OAAO,gBAAgB;AACvB,SAAS,OAA6B,uBAAuB;AAG7D,SAAS,SAAS,KAAa,GAAuC;AACpE,MAAI,QAAQ,IAAI;AACd;AAAA,EACF;AAEA,MAAI;AACJ,QAAM,cAAc,CAACA,SAAgB;AACnC,QAAI;AACF,YAAM,SAAS,IAAI,IAAIA,IAAG;AAC1B,aAAO,OAAO;AAAA,IAChB,SACO,MAAM;AACX,aAAO;AAAA,IACT;AAAA,EACF;AACA,QAAM,WAAW,YAAY,GAAG;AAChC,QAAM,QAAQ,OAAO,SAAS,aAAa;AAE3C,MAAI,CAAC,UAAU;AACb,QAAI,OAAO;AACT,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GAC3D;AAAA,IAEJ,OAAO;AACL,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,qBAAO;AAAA,QAAO;AAAA,QAAI,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GACnF;AAAA,IAEJ;AAAA,EACF,WAEE,YACA,aAAa,WACb,OAAO,SAAS,aAAa,UAC7B;AACA,YACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,MACwE,oBAAC,UAAK,sBAAQ;AAAA,MAAO;AAAA,OAC1G,GACF;AAAA,EAEJ;AAEA,SAAO;AACT;AAsBA,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAa,OAA8B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,SAAS,MAAM,OAAO,MAAM,CAAC;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,UAAU,CAAC,QAAgB;AACzB,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,GAAG;AAAA,EAChD;AAAA,EAEA,WAAW,CAAC,QAAgB;AAC1B,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,SAAK,MAAM,SAAS,GAAG;AAAA,EACzB;AAAA,EAEA,SAAU;AACR,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACE,GAAG,KAAK;AAAA,UACT,SAAS,KAAK;AAAA,UACd,UAAU,KAAK;AAAA,UACf,cAAY,KAAK,MAAM,YAAY;AAAA;AAAA,MACrC;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEJ;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"447f54dcea7174dfde20df5fd4ad658ec6e8baa0"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Sr=function(){return s},s}Sr();function nT(n,e){if(Sr().f[0]++,Sr().s[0]++,n===""){Sr().b[0][0]++,Sr().s[1]++;return}else Sr().b[0][1]++;let t;Sr().s[2]++;const i=s=>{Sr().f[1]++,Sr().s[3]++;try{const a=(Sr().s[4]++,new URL(s));return Sr().s[5]++,a.protocol}catch{Sr().s[6]++;return}},r=(Sr().s[7]++,i(n)),o=(Sr().s[8]++,window.location.protocol==="https:");return Sr().s[9]++,r?(Sr().b[1][1]++,Sr().s[13]++,Sr().b[4][0]++,r&&(Sr().b[4][1]++,r==="http:")&&(Sr().b[4][2]++,window.location.protocol==="https:")?(Sr().b[3][0]++,Sr().s[14]++,t=ie.jsx(tT,{children:ie.jsxs(vb,{t:e,children:["CORS policy won't allow fetching resources served over http from https, use a ",ie.jsx("code",{children:"https://"})," domain"]})})):Sr().b[3][1]++):(Sr().b[1][0]++,Sr().s[10]++,o?(Sr().b[2][0]++,Sr().s[11]++,t=ie.jsx(tT,{children:ie.jsxs(vb,{t:e,children:["Must provide protocol: ",ie.jsx("code",{children:"https://"})]})})):(Sr().b[2][1]++,Sr().s[12]++,t=ie.jsx(tT,{children:ie.jsxs(vb,{t:e,children:["Must provide protocol: ",ie.jsx("code",{children:"http://"})," or ",ie.jsx("code",{children:"https://"})]})}))),Sr().s[15]++,t}class kRe extends On.Component{static defaultProps=(Sr().s[16]++,{onInput:()=>{Sr().f[2]++}});constructor(e){Sr().f[3]++,Sr().s[17]++,super(e),Sr().s[18]++,this.state={error:nT(e.value,e.t)}}onInput=(Sr().s[19]++,e=>{Sr().f[4]++,Sr().s[20]++,this.setState({error:nT(e,this.props.t)}),Sr().s[21]++,this.props.onInput?(Sr().b[5][0]++,Sr().s[22]++,this.props.onInput(e)):Sr().b[5][1]++});onChange=(Sr().s[23]++,e=>{Sr().f[5]++,Sr().s[24]++,this.setState({error:nT(e,this.props.t)}),Sr().s[25]++,this.props.onChange(e)});render(){return Sr().f[6]++,Sr().s[26]++,ie.jsxs("div",{children:[ie.jsx(um,{...this.props,onInput:this.onInput,onChange:this.onChange,"aria-label":this.props["aria-label"]}),this.state.error]})}}const SL=(Sr().s[27]++,$o()(kRe));function Vn(){var n="/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",e="705ac9c8c3dcb0aff320a53fac9b80bc280b1cbf",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",statementMap:{0:{start:{line:15,column:19},end:{line:15,column:39}},1:{start:{line:16,column:4},end:{line:16,column:27}},2:{start:{line:17,column:4},end:{line:17,column:57}},3:{start:{line:17,column:29},end:{line:17,column:57}},4:{start:{line:20,column:4},end:{line:20,column:56}},5:{start:{line:22,column:13},end:{line:38,column:3}},6:{start:{line:23,column:19},end:{line:23,column:39}},7:{start:{line:24,column:4},end:{line:36,column:5}},8:{start:{line:25,column:6},end:{line:25,column:21}},9:{start:{line:26,column:11},end:{line:36,column:5}},10:{start:{line:27,column:6},end:{line:27,column:22}},11:{start:{line:28,column:11},end:{line:36,column:5}},12:{start:{line:29,column:28},end:{line:29,column:38}},13:{start:{line:30,column:27},end:{line:30,column:59}},14:{start:{line:31,column:6},end:{line:31,column:32}},15:{start:{line:32,column:11},end:{line:36,column:5}},16:{start:{line:33,column:6},end:{line:33,column:29}},17:{start:{line:35,column:6},end:{line:35,column:22}},18:{start:{line:37,column:4},end:{line:37,column:57}},19:{start:{line:37,column:29},end:{line:37,column:57}},20:{start:{line:40,column:19},end:{line:40,column:39}},21:{start:{line:41,column:4},end:{line:41,column:31}},22:{start:{line:42,column:4},end:{line:42,column:86}},23:{start:{line:42,column:29},end:{line:42,column:86}},24:{start:{line:45,column:14},end:{line:45,column:26}},25:{start:{line:46,column:22},end:{line:46,column:77}},26:{start:{line:47,column:19},end:{line:116,column:6}},27:{start:{line:48,column:45},end:{line:54,column:7}},28:{start:{line:56,column:6},end:{line:103,column:7}},29:{start:{line:57,column:8},end:{line:64,column:10}},30:{start:{line:65,column:13},end:{line:103,column:7}},31:{start:{line:66,column:8},end:{line:73,column:10}},32:{start:{line:74,column:13},end:{line:103,column:7}},33:{start:{line:75,column:24},end:{line:75,column:99}},34:{start:{line:75,column:78},end:{line:75,column:98}},35:{start:{line:76,column:8},end:{line:84,column:10}},36:{start:{line:85,column:13},end:{line:103,column:7}},37:{start:{line:86,column:8},end:{line:93,column:10}},38:{start:{line:95,column:8},end:{line:102,column:10}},39:{start:{line:104,column:6},end:{line:115,column:8}},40:{start:{line:117,column:4},end:{line:127,column:9}},41:{start:{line:130,column:26},end:{line:130,column:70}},42:{start:{line:134,column:14},end:{line:134,column:26}},43:{start:{line:135,column:4},end:{line:148,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:29},end:{line:18,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:15},end:{line:21,column:3}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:22,column:13},end:{line:22,column:14}},loc:{start:{line:22,column:19},end:{line:38,column:3}},line:22},3:{name:"(anonymous_3)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:24},end:{line:43,column:3}},line:39},4:{name:"(anonymous_4)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:11},end:{line:128,column:3}},line:44},5:{name:"(anonymous_5)",decl:{start:{line:47,column:35},end:{line:47,column:36}},loc:{start:{line:47,column:45},end:{line:116,column:5}},line:47},6:{name:"(anonymous_6)",decl:{start:{line:75,column:70},end:{line:75,column:71}},loc:{start:{line:75,column:78},end:{line:75,column:98}},line:75},7:{name:"(anonymous_7)",decl:{start:{line:133,column:2},end:{line:133,column:3}},loc:{start:{line:133,column:11},end:{line:149,column:3}},line:133}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:17,column:57}},type:"if",locations:[{start:{line:17,column:4},end:{line:17,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:20,column:11},end:{line:20,column:55}},type:"binary-expr",locations:[{start:{line:20,column:11},end:{line:20,column:27}},{start:{line:20,column:31},end:{line:20,column:49}},{start:{line:20,column:53},end:{line:20,column:55}}],line:20},2:{loc:{start:{line:24,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:24},3:{loc:{start:{line:26,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:26,column:11},end:{line:36,column:5}},{start:{line:28,column:11},end:{line:36,column:5}}],line:26},4:{loc:{start:{line:28,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:28,column:11},end:{line:36,column:5}},{start:{line:32,column:11},end:{line:36,column:5}}],line:28},5:{loc:{start:{line:32,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:32,column:11},end:{line:36,column:5}},{start:{line:34,column:11},end:{line:36,column:5}}],line:32},6:{loc:{start:{line:37,column:4},end:{line:37,column:57}},type:"if",locations:[{start:{line:37,column:4},end:{line:37,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},7:{loc:{start:{line:42,column:4},end:{line:42,column:86}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:86}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},8:{loc:{start:{line:42,column:49},end:{line:42,column:84}},type:"cond-expr",locations:[{start:{line:42,column:69},end:{line:42,column:75}},{start:{line:42,column:78},end:{line:42,column:84}}],line:42},9:{loc:{start:{line:56,column:6},end:{line:103,column:7}},type:"if",locations:[{start:{line:56,column:6},end:{line:103,column:7}},{start:{line:65,column:13},end:{line:103,column:7}}],line:56},10:{loc:{start:{line:62,column:26},end:{line:62,column:70}},type:"binary-expr",locations:[{start:{line:62,column:26},end:{line:62,column:50}},{start:{line:62,column:54},end:{line:62,column:70}}],line:62},11:{loc:{start:{line:65,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:65,column:13},end:{line:103,column:7}},{start:{line:74,column:13},end:{line:103,column:7}}],line:65},12:{loc:{start:{line:71,column:26},end:{line:71,column:70}},type:"binary-expr",locations:[{start:{line:71,column:26},end:{line:71,column:50}},{start:{line:71,column:54},end:{line:71,column:70}}],line:71},13:{loc:{start:{line:74,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:74,column:13},end:{line:103,column:7}},{start:{line:85,column:13},end:{line:103,column:7}}],line:74},14:{loc:{start:{line:82,column:26},end:{line:82,column:70}},type:"binary-expr",locations:[{start:{line:82,column:26},end:{line:82,column:50}},{start:{line:82,column:54},end:{line:82,column:70}}],line:82},15:{loc:{start:{line:85,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:85,column:13},end:{line:103,column:7}},{start:{line:94,column:13},end:{line:103,column:7}}],line:85},16:{loc:{start:{line:91,column:26},end:{line:91,column:70}},type:"binary-expr",locations:[{start:{line:91,column:26},end:{line:91,column:50}},{start:{line:91,column:54},end:{line:91,column:70}}],line:91},17:{loc:{start:{line:100,column:26},end:{line:100,column:70}},type:"binary-expr",locations:[{start:{line:100,column:26},end:{line:100,column:50}},{start:{line:100,column:54},end:{line:100,column:70}}],line:100}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx"],names:["v"],mappings:"AAwE4B,cA2Cf,YA3Ce;AAxE5B,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,cAAc;AACrB,OAAO,gBAAgB;AAkBvB,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,YAAY,KAAa,UAAuC;AAC9D,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,GAAG,IAAI;AACd,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAAA,EACpD;AAAA,EAEA,WAAW,MAAM;AACf,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,QAAI,KAAK,MAAM,SAAS,UAAU;AAChC,aAAO,KAAK,CAAC;AAAA,IACf,WACS,KAAK,MAAM,SAAS,OAAO;AAClC,aAAO,KAAK,EAAE;AAAA,IAChB,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,YAAM,EAAC,UAAS,IAAI,KAAK;AACzB,YAAM,eAAe,OAAO,KAAK,UAAW,MAAM,EAAE,CAAC;AACrD,aAAO,KAAK,YAAY;AAAA,IAC1B,WAAW,KAAK,MAAM,SAAS,SAAS;AACtC,aAAO,KAAK,SAAS;AAAA,IACvB,OAAO;AACL,aAAO,KAAK,EAAE;AAAA,IAChB;AAEA,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,YAAY,UAAkB;AAC5B,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,OAAO,UAAU,CAAC;AAEzB,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,OAAO,SAAS,IAAI,SAAS,MAAS;AAAA,EACrF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY,EAAE,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAO;AACxE,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,GAAG,MAAM;AACvC,YAAM,iBAAgB;AAAA,QAAC;AAAA;AAAA,UACrB,SAAS,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,UACrC,GAAG;AAAA;AAAA,MACN;AACA,UAAI;AACJ,UAAG,KAAK,MAAM,SAAS,OAAO;AAC5B,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,UAAU;AACrC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,WAAW,MAAM,EAAE,IAAI,CAAAA,OAAK,CAACA,IAAG,WAAWA,EAAC,CAAC,CAAC;AACrF,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP;AAAA,YACA,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,SAAS;AACpC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,OACK;AACH,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF;AAEA,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,OAAO,KAAK,MAAM;AAAA,UAElB,WAAU;AAAA,UAEV;AAAA,gCAAC,SAAI,WAAU,+BACZ,0BACH;AAAA,YACA,oBAAC,SAAI,WAAU,gCACZ,iBACH;AAAA;AAAA;AAAA,QARK;AAAA,MASP;AAAA,IACF,CAAC;AAED,WACE,qBAAC,SAAI,WAAU,kBACZ;AAAA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UAEb,YAAE,WAAW;AAAA;AAAA,MAChB;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;AAMf,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,mBAAmB;AAAA,QAE5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,oBAAC,YAAS;AAAA;AAAA,QACnB;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"705ac9c8c3dcb0aff320a53fac9b80bc280b1cbf"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Vn=function(){return s},s}Vn();class TRe extends On.Component{changeValue(e,t){Vn().f[0]++;const i=(Vn().s[0]++,this.values.slice(0));Vn().s[1]++,i[e]=t,Vn().s[2]++,this.props.onChange?(Vn().b[0][0]++,Vn().s[3]++,this.props.onChange(i)):Vn().b[0][1]++}get values(){return Vn().f[1]++,Vn().s[4]++,Vn().b[1][0]++,this.props.value||(Vn().b[1][1]++,this.props.default)||(Vn().b[1][2]++,[])}addValue=(Vn().s[5]++,()=>{Vn().f[2]++;const e=(Vn().s[6]++,this.values.slice(0));if(Vn().s[7]++,this.props.type==="number")Vn().b[2][0]++,Vn().s[8]++,e.push(0);else if(Vn().b[2][1]++,Vn().s[9]++,this.props.type==="url")Vn().b[3][0]++,Vn().s[10]++,e.push("");else if(Vn().b[3][1]++,Vn().s[11]++,this.props.type==="enum"){Vn().b[4][0]++;const{fieldSpec:t}=(Vn().s[12]++,this.props),i=(Vn().s[13]++,Object.keys(t.values)[0]);Vn().s[14]++,e.push(i)}else Vn().b[4][1]++,Vn().s[15]++,this.props.type==="color"?(Vn().b[5][0]++,Vn().s[16]++,e.push("#000000")):(Vn().b[5][1]++,Vn().s[17]++,e.push(""));Vn().s[18]++,this.props.onChange?(Vn().b[6][0]++,Vn().s[19]++,this.props.onChange(e)):Vn().b[6][1]++});deleteValue(e){Vn().f[3]++;const t=(Vn().s[20]++,this.values.slice(0));Vn().s[21]++,t.splice(e,1),Vn().s[22]++,this.props.onChange?(Vn().b[7][0]++,Vn().s[23]++,this.props.onChange(t.length>0?(Vn().b[8][0]++,t):(Vn().b[8][1]++,void 0))):Vn().b[7][1]++}render(){Vn().f[4]++;const e=(Vn().s[24]++,this.props.t),t=(Vn().s[25]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),i=(Vn().s[26]++,this.values.map((r,o)=>{Vn().f[5]++;const s=(Vn().s[27]++,ie.jsx(RRe,{onClick:this.deleteValue.bind(this,o),...t}));let a;if(Vn().s[28]++,this.props.type==="url")Vn().b[9][0]++,Vn().s[29]++,a=ie.jsx(SL,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Vn().b[10][0]++,this.props["aria-label"]||(Vn().b[10][1]++,this.props.label))});else if(Vn().b[9][1]++,Vn().s[30]++,this.props.type==="number")Vn().b[11][0]++,Vn().s[31]++,a=ie.jsx(m1,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Vn().b[12][0]++,this.props["aria-label"]||(Vn().b[12][1]++,this.props.label))});else if(Vn().b[11][1]++,Vn().s[32]++,this.props.type==="enum"){Vn().b[13][0]++;const c=(Vn().s[33]++,Object.keys(this.props.fieldSpec?.values).map(h=>(Vn().f[6]++,Vn().s[34]++,[h,sL(h)])));Vn().s[35]++,a=ie.jsx(wL,{options:c,value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Vn().b[14][0]++,this.props["aria-label"]||(Vn().b[14][1]++,this.props.label))})}else Vn().b[13][1]++,Vn().s[36]++,this.props.type==="color"?(Vn().b[15][0]++,Vn().s[37]++,a=ie.jsx(ML,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Vn().b[16][0]++,this.props["aria-label"]||(Vn().b[16][1]++,this.props.label))})):(Vn().b[15][1]++,Vn().s[38]++,a=ie.jsx(um,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Vn().b[17][0]++,this.props["aria-label"]||(Vn().b[17][1]++,this.props.label))}));return Vn().s[39]++,ie.jsxs("div",{style:this.props.style,className:"maputnik-array-block",children:[ie.jsx("div",{className:"maputnik-array-block-action",children:s}),ie.jsx("div",{className:"maputnik-array-block-content",children:a})]},o)}));return Vn().s[40]++,ie.jsxs("div",{className:"maputnik-array",children:[i,ie.jsx(Js,{className:"maputnik-array-add-value",onClick:this.addValue,children:e("Add value")})]})}}const Ow=(Vn().s[41]++,$o()(TRe));class RRe extends On.Component{render(){Vn().f[7]++;const e=(Vn().s[42]++,this.props.t);return Vn().s[43]++,ie.jsx(Js,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove array item"),children:ie.jsx(wK,{label:ie.jsx($b,{})})})}}function zs(){var n="/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",e="cd16dc68fc42c219caf080518fd74984d4f8d81e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:9,column:16},end:{line:9,column:60}},2:{start:{line:10,column:4},end:{line:14,column:5}},3:{start:{line:11,column:6},end:{line:11,column:28}},4:{start:{line:13,column:6},end:{line:13,column:17}},5:{start:{line:17,column:26},end:{line:17,column:46}},6:{start:{line:18,column:4},end:{line:18,column:34}},7:{start:{line:19,column:27},end:{line:19,column:92}},8:{start:{line:19,column:55},end:{line:19,column:67}},9:{start:{line:19,column:83},end:{line:19,column:91}},10:{start:{line:20,column:4},end:{line:20,column:40}},11:{start:{line:23,column:19},end:{line:39,column:6}},12:{start:{line:24,column:6},end:{line:38,column:8}},13:{start:{line:32,column:52},end:{line:32,column:58}},14:{start:{line:40,column:4},end:{line:40,column:87}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:15,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:28},end:{line:21,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:48},end:{line:19,column:49}},loc:{start:{line:19,column:55},end:{line:19,column:67}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:76},end:{line:19,column:77}},loc:{start:{line:19,column:83},end:{line:19,column:91}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:41,column:3}},line:22},5:{name:"(anonymous_5)",decl:{start:{line:23,column:35},end:{line:23,column:36}},loc:{start:{line:23,column:49},end:{line:39,column:5}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:32,column:45},end:{line:32,column:46}},loc:{start:{line:32,column:52},end:{line:32,column:58}},line:32}},branchMap:{0:{loc:{start:{line:9,column:16},end:{line:9,column:60}},type:"binary-expr",locations:[{start:{line:9,column:16},end:{line:9,column:32}},{start:{line:9,column:36},end:{line:9,column:54}},{start:{line:9,column:58},end:{line:9,column:60}}],line:9},1:{loc:{start:{line:10,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:14,column:5}},{start:{line:12,column:11},end:{line:14,column:5}}],line:10},2:{loc:{start:{line:30,column:28},end:{line:30,column:71}},type:"binary-expr",locations:[{start:{line:30,column:28},end:{line:30,column:52}},{start:{line:30,column:56},end:{line:30,column:71}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx"],names:[],mappings:"AA6CQ;AA7CR,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAY9B,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,EACV;AAAA,EAEA,IAAI,SAAS;AACX,UAAM,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAGvD,QAAI,IAAI,IAAI,SAAO,CAAC,MAAM,IAAG;AAC3B,aAAO,IAAI,OAAO,EAAE;AAAA,IACtB,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,WAAW,KAAa,UAAkB;AACxC,UAAM,gBAAgB,KAAK,OAAO,MAAM,CAAC;AACzC,kBAAc,GAAG,IAAI;AACrB,UAAM,iBAAiB,cACpB,OAAO,OAAK,MAAM,MAAS,EAC3B,OAAO,OAAK,MAAM,EAAE;AAEvB,SAAK,MAAM,SAAS,cAAc;AAAA,EACpC;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,OAAO,MAAM;AAC3C,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA,cACnD;AAAA,cACA,SAAS,KAAK,MAAM,OAAO,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,cAC1C,UAAU,KAAK,WAAW,KAAK,MAAM,CAAC;AAAA;AAAA,UACxC;AAAA;AAAA,QAPK;AAAA,MAQP;AAAA,IACF,CAAC;AAED,WACE,oBAAC,QAAG,WAAU,iBACX,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cd16dc68fc42c219caf080518fd74984d4f8d81e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return zs=function(){return s},s}zs();class DRe extends On.Component{static defaultProps=(zs().s[0]++,{fonts:[]});get values(){zs().f[0]++;const e=(zs().s[1]++,zs().b[0][0]++,this.props.value||(zs().b[0][1]++,this.props.default)||(zs().b[0][2]++,[]));return zs().s[2]++,e[e.length-1]!==""?(zs().b[1][0]++,zs().s[3]++,e.concat("")):(zs().b[1][1]++,zs().s[4]++,e)}changeFont(e,t){zs().f[1]++;const i=(zs().s[5]++,this.values.slice(0));zs().s[6]++,i[e]=t;const r=(zs().s[7]++,i.filter(o=>(zs().f[2]++,zs().s[8]++,o!==void 0)).filter(o=>(zs().f[3]++,zs().s[9]++,o!=="")));zs().s[10]++,this.props.onChange(r)}render(){zs().f[4]++;const e=(zs().s[11]++,this.values.map((t,i)=>(zs().f[5]++,zs().s[12]++,ie.jsx("li",{children:ie.jsx(B5,{"aria-label":(zs().b[2][0]++,this.props["aria-label"]||(zs().b[2][1]++,this.props.name)),value:t,options:this.props.fonts?.map(r=>(zs().f[6]++,zs().s[13]++,[r,r])),onChange:this.changeFont.bind(this,i)})},i))));return zs().s[14]++,ie.jsx("ul",{className:"maputnik-font",children:e})}}function Wi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",e="123acbe81166b3a98d021f01f94ef258a8456edf",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",statementMap:{0:{start:{line:13,column:23},end:{line:13,column:117}},1:{start:{line:16,column:24},end:{line:27,column:5}},2:{start:{line:25,column:30},end:{line:25,column:81}},3:{start:{line:28,column:4},end:{line:145,column:5}},4:{start:{line:30,column:8},end:{line:37,column:10}},5:{start:{line:39,column:24},end:{line:39,column:101}},6:{start:{line:39,column:82},end:{line:39,column:100}},7:{start:{line:40,column:8},end:{line:46,column:10}},8:{start:{line:51,column:8},end:{line:67,column:9}},9:{start:{line:52,column:26},end:{line:52,column:59}},10:{start:{line:53,column:10},end:{line:59,column:12}},11:{start:{line:57,column:42},end:{line:57,column:48}},12:{start:{line:61,column:10},end:{line:66,column:12}},13:{start:{line:69,column:8},end:{line:74,column:10}},14:{start:{line:76,column:8},end:{line:81,column:10}},15:{start:{line:83,column:8},end:{line:111,column:9}},16:{start:{line:84,column:10},end:{line:90,column:12}},17:{start:{line:92,column:10},end:{line:110,column:11}},18:{start:{line:93,column:12},end:{line:100,column:14}},19:{start:{line:102,column:12},end:{line:109,column:14}},20:{start:{line:113,column:8},end:{line:121,column:10}},21:{start:{line:123,column:8},end:{line:131,column:10}},22:{start:{line:133,column:8},end:{line:141,column:10}},23:{start:{line:143,column:8},end:{line:143,column:110}},24:{start:{line:144,column:8},end:{line:144,column:20}},25:{start:{line:148,column:4},end:{line:148,column:124}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:15},end:{line:146,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:25,column:16},end:{line:25,column:17}},loc:{start:{line:25,column:30},end:{line:25,column:81}},line:25},2:{name:"(anonymous_2)",decl:{start:{line:39,column:75},end:{line:39,column:76}},loc:{start:{line:39,column:82},end:{line:39,column:100}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:57,column:35},end:{line:57,column:36}},loc:{start:{line:57,column:42},end:{line:57,column:48}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:147,column:2},end:{line:147,column:3}},loc:{start:{line:147,column:11},end:{line:149,column:3}},line:147}},branchMap:{0:{loc:{start:{line:28,column:4},end:{line:145,column:5}},type:"switch",locations:[{start:{line:29,column:6},end:{line:37,column:10}},{start:{line:38,column:6},end:{line:47,column:7}},{start:{line:48,column:6},end:{line:48,column:27}},{start:{line:49,column:6},end:{line:49,column:23}},{start:{line:50,column:6},end:{line:67,column:9}},{start:{line:68,column:6},end:{line:74,column:10}},{start:{line:75,column:6},end:{line:81,column:10}},{start:{line:82,column:6},end:{line:111,column:9}},{start:{line:112,column:6},end:{line:121,column:10}},{start:{line:122,column:6},end:{line:131,column:10}},{start:{line:132,column:6},end:{line:141,column:10}},{start:{line:142,column:6},end:{line:144,column:20}}],line:28},1:{loc:{start:{line:39,column:36},end:{line:39,column:69}},type:"binary-expr",locations:[{start:{line:39,column:36},end:{line:39,column:63}},{start:{line:39,column:67},end:{line:39,column:69}}],line:39},2:{loc:{start:{line:51,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:51,column:8},end:{line:67,column:9}},{start:{line:60,column:15},end:{line:67,column:9}}],line:51},3:{loc:{start:{line:52,column:26},end:{line:52,column:59}},type:"binary-expr",locations:[{start:{line:52,column:26},end:{line:52,column:53}},{start:{line:52,column:57},end:{line:52,column:59}}],line:52},4:{loc:{start:{line:83,column:8},end:{line:111,column:9}},type:"if",locations:[{start:{line:83,column:8},end:{line:111,column:9}},{start:{line:91,column:15},end:{line:111,column:9}}],line:83},5:{loc:{start:{line:92,column:10},end:{line:110,column:11}},type:"if",locations:[{start:{line:92,column:10},end:{line:110,column:11}},{start:{line:101,column:17},end:{line:110,column:11}}],line:92},6:{loc:{start:{line:119,column:19},end:{line:119,column:90}},type:"cond-expr",locations:[{start:{line:119,column:53},end:{line:119,column:69}},{start:{line:119,column:72},end:{line:119,column:90}}],line:119},7:{loc:{start:{line:129,column:19},end:{line:129,column:90}},type:"cond-expr",locations:[{start:{line:129,column:53},end:{line:129,column:69}},{start:{line:129,column:72},end:{line:129,column:90}}],line:129},8:{loc:{start:{line:138,column:19},end:{line:138,column:90}},type:"cond-expr",locations:[{start:{line:138,column:53},end:{line:138,column:69}},{start:{line:138,column:72},end:{line:138,column:90}}],line:138}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx"],names:[],mappings:"AAyDQ;AAzDR,OAAO,WAAkC;AAEzC,OAAO,gBAA0C;AACjD,OAAO,iBAA4C;AACnD,OAAO,mBAAgD;AACvD,OAAO,iBAA4C;AACnD,OAAO,gBAA0C;AACjD,OAAO,uBAAwD;AAC/D,OAAO,eAAwC;AAC/C,OAAO,uBAAwD;AAC/D,OAAO,eAAwC;AAC/C,OAAO,gBAAgB;AAEvB,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AA2BpH,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EAErE,aAAa;AACX,UAAM,cAAc;AAAA,MAClB,WAAW,KAAK,MAAM;AAAA,MACtB,OAAO,KAAK,MAAM;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,SAAS,KAAK,MAAM,WAAW;AAAA,MAC/B,MAAM,KAAK,MAAM;AAAA,MACjB,eAAe,sBAAsB,KAAK,MAAM;AAAA,MAChD,UAAU,CAAC,aAAmE,KAAK,MAAM,SAAU,KAAK,MAAM,WAAW,QAAQ;AAAA,MACjI,cAAc,KAAK,MAAM,YAAY;AAAA,IACvC;AACA,YAAO,KAAK,MAAM,WAAW,MAAM;AAAA,MACjC,KAAK;AAAU,eACb;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,KAAK,KAAK,MAAM,UAAU;AAAA,YAC1B,KAAK,KAAK,MAAM,UAAU;AAAA;AAAA,QAC5B;AAAA,MAEF,KAAK,QAAQ;AACX,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,UAAU,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAE1F,eAAO;AAAA,UAAC;AAAA;AAAA,YACL,GAAG;AAAA,YACJ;AAAA;AAAA,QACF;AAAA,MACF;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,YAAI,eAAe,QAAQ,KAAK,MAAM,SAAU,KAAK,GAAG;AACtD,gBAAM,UAAU,KAAK,MAAM,UAAU,UAAU,CAAC;AAChD,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,SAAS,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,UAClC;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA;AAAA,UACN;AAAA,QACF;AAAA,MACF,KAAK;AAAS,eACZ;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AACH,YAAG,KAAK,MAAM,cAAc,aAAa;AACvC,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,OAAO,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9B;AAAA,QACF,OAAO;AACL,cAAI,KAAK,MAAM,UAAU,QAAQ;AAC/B,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,MAAM,KAAK,MAAM,UAAU;AAAA,gBAC3B,QAAQ,KAAK,MAAM,UAAU;AAAA;AAAA,YAC/B;AAAA,UACF,OAAO;AACL,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,WAAW,KAAK,MAAM;AAAA,gBACtB,MAAM,KAAK,MAAM,UAAU;AAAA;AAAA,YAC7B;AAAA,UACF;AAAA,QACF;AAAA,MACF,KAAK;AAAe,eAClB;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,WAAW,KAAK,MAAM;AAAA,YACtB,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA;AAAA,QAChF;AAAA,MAEF,KAAK;AAAc,eACjB;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,WAAW,KAAK,MAAM;AAAA,YACtB,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA;AAAA,QAChF;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA,YAC9E,QAAQ;AAAA;AAAA,QACV;AAAA,MAEF;AACE,gBAAQ,KAAK,6BAA6B,KAAK,MAAM,SAAS,UAAU,KAAK,MAAM,WAAW,IAAI,EAAE;AACpG,eAAO;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WACE,oBAAC,SAAI,eAAa,gBAAc,KAAK,MAAM,WACxC,eAAK,WAAW,GACnB;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"123acbe81166b3a98d021f01f94ef258a8456edf"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Wi=function(){return s},s}Wi();const PRe=(Wi().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);class nx extends On.Component{childNodes(){Wi().f[0]++;const e=(Wi().s[1]++,{fieldSpec:this.props.fieldSpec,label:this.props.label,action:this.props.action,style:this.props.style,value:this.props.value,default:this.props.fieldSpec?.default,name:this.props.fieldName,"data-wd-key":"spec-field-input:"+this.props.fieldName,onChange:t=>(Wi().f[1]++,Wi().s[2]++,this.props.onChange(this.props.fieldName,t)),"aria-label":this.props["aria-label"]});switch(Wi().s[3]++,this.props.fieldSpec?.type){case"number":return Wi().b[0][0]++,Wi().s[4]++,ie.jsx(m1,{...e,min:this.props.fieldSpec.minimum,max:this.props.fieldSpec.maximum});case"enum":Wi().b[0][1]++;{const t=(Wi().s[5]++,Object.keys((Wi().b[1][0]++,this.props.fieldSpec.values||(Wi().b[1][1]++,[]))).map(i=>(Wi().f[2]++,Wi().s[6]++,[i,sL(i)])));return Wi().s[7]++,ie.jsx(wL,{...e,options:t})}case"resolvedImage":Wi().b[0][2]++;case"formatted":Wi().b[0][3]++;case"string":if(Wi().b[0][4]++,Wi().s[8]++,PRe.indexOf(this.props.fieldName)>=0){Wi().b[2][0]++;const t=(Wi().s[9]++,Wi().b[3][0]++,this.props.fieldSpec.values||(Wi().b[3][1]++,[]));return Wi().s[10]++,ie.jsx(B5,{...e,options:t.map(i=>(Wi().f[3]++,Wi().s[11]++,[i,i]))})}else return Wi().b[2][1]++,Wi().s[12]++,ie.jsx(um,{...e});case"color":return Wi().b[0][5]++,Wi().s[13]++,ie.jsx(ML,{...e});case"boolean":return Wi().b[0][6]++,Wi().s[14]++,ie.jsx(Hse,{...e});case"array":return Wi().b[0][7]++,Wi().s[15]++,this.props.fieldName==="text-font"?(Wi().b[4][0]++,Wi().s[16]++,ie.jsx(DRe,{...e,fonts:this.props.fieldSpec.values})):(Wi().b[4][1]++,Wi().s[17]++,this.props.fieldSpec.length?(Wi().b[5][0]++,Wi().s[18]++,ie.jsx(UD,{...e,type:this.props.fieldSpec.value,length:this.props.fieldSpec.length})):(Wi().b[5][1]++,Wi().s[19]++,ie.jsx(Ow,{...e,fieldSpec:this.props.fieldSpec,type:this.props.fieldSpec.value})));case"numberArray":return Wi().b[0][8]++,Wi().s[20]++,ie.jsx(Ow,{...e,fieldSpec:this.props.fieldSpec,type:"number",value:Array.isArray(this.props.value)?(Wi().b[6][0]++,this.props.value):(Wi().b[6][1]++,[this.props.value])});case"colorArray":return Wi().b[0][9]++,Wi().s[21]++,ie.jsx(Ow,{...e,fieldSpec:this.props.fieldSpec,type:"color",value:Array.isArray(this.props.value)?(Wi().b[7][0]++,this.props.value):(Wi().b[7][1]++,[this.props.value])});case"padding":return Wi().b[0][10]++,Wi().s[22]++,ie.jsx(UD,{...e,type:"number",value:Array.isArray(this.props.value)?(Wi().b[8][0]++,this.props.value):(Wi().b[8][1]++,[this.props.value]),length:4});default:return Wi().b[0][11]++,Wi().s[23]++,console.warn(`No proper field input for ${this.props.fieldName} type: ${this.props.fieldSpec?.type}`),Wi().s[24]++,null}}render(){return Wi().f[4]++,Wi().s[25]++,ie.jsx("div",{"data-wd-key":"spec-field:"+this.props.fieldName,children:this.childNodes()})}}function Nc(){var n="/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",e="92ea2bb9889070368abe40f809481200c126aae8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",statementMap:{0:{start:{line:7,column:17},end:{line:30,column:1}},1:{start:{line:8,column:32},end:{line:8,column:53}},2:{start:{line:9,column:18},end:{line:9,column:67}},3:{start:{line:10,column:22},end:{line:12,column:3}},4:{start:{line:11,column:4},end:{line:11,column:20}},5:{start:{line:13,column:2},end:{line:29,column:7}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:17},end:{line:7,column:18}},loc:{start:{line:7,column:28},end:{line:30,column:1}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:22},end:{line:10,column:23}},loc:{start:{line:10,column:31},end:{line:12,column:3}},line:10}},branchMap:{0:{loc:{start:{line:14,column:4},end:{line:21,column:8}},type:"binary-expr",locations:[{start:{line:14,column:4},end:{line:14,column:19}},{start:{line:14,column:39},end:{line:21,column:8}}],line:14},1:{loc:{start:{line:22,column:4},end:{line:25,column:32}},type:"binary-expr",locations:[{start:{line:22,column:4},end:{line:22,column:20}},{start:{line:22,column:40},end:{line:25,column:32}}],line:22},2:{loc:{start:{line:28,column:4},end:{line:28,column:198}},type:"binary-expr",locations:[{start:{line:28,column:4},end:{line:28,column:19}},{start:{line:28,column:39},end:{line:28,column:198}}],line:28},3:{loc:{start:{line:28,column:104},end:{line:28,column:125}},type:"cond-expr",locations:[{start:{line:28,column:114},end:{line:28,column:116}},{start:{line:28,column:119},end:{line:28,column:125}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx"],names:[],mappings:"AAuBI,SAGM,KAHN;AAvBJ,OAAO,WAA0D;AACjE,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAChB,OAAO,sBAAsB;AAU7B,MAAM,WAAoC,CAAC,UAAU;AACnD,QAAM,CAAC,SAAS,UAAU,IAAI,MAAM,SAAS,KAAK;AAClD,QAAM,UAAU,MAAM,OAAO,iBAAiB,iBAAiB,CAAC;AAEhE,QAAM,cAAc,CAAC,QAAiB;AACpC,eAAW,GAAG;AAAA,EAChB;AAEA,SACE,qBAAC,SAAI,WAAU,wBAAuB,MAAK,SAAQ,mBAAiB,QAAQ,SACzE;AAAA,UAAM,aACL,oBAAC,SAAI,WAAU,8BACb;AAAA,MAAC;AAAA;AAAA,QACC,OAAO,MAAM;AAAA,QACb;AAAA,QACA,WAAW,MAAM;AAAA;AAAA,IACnB,GACF;AAAA,IAED,CAAC,MAAM,aACN,oBAAC,SAAI,WAAW,WAAW;AAAA,MACzB,8BAA8B;AAAA,MAC9B,+BAA+B,MAAM;AAAA,IACvC,CAAC,GACE,gBAAM,OACT;AAAA,IAEF,oBAAC,SAAI,WAAU,+BAA+B,gBAAM,QAAO;AAAA,IAC3D,oBAAC,SAAI,WAAU,gCAAgC,gBAAM,UAAS;AAAA,IAC7D,MAAM,aACL,oBAAC,SAAI,WAAU,uBAAsB,OAAO,EAAE,SAAS,UAAU,KAAK,OAAO,GAC3E,8BAAC,OAAI,WAAW,MAAM,WAAW,GACnC;AAAA,KAEJ;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"92ea2bb9889070368abe40f809481200c126aae8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Nc=function(){return s},s}Nc();Nc().s[0]++;const Dy=n=>{Nc().f[0]++;const[e,t]=(Nc().s[1]++,On.useState(!1)),i=(Nc().s[2]++,On.useRef(Ex("fieldset_label_")));Nc().s[3]++;const r=o=>{Nc().f[1]++,Nc().s[4]++,t(o)};return Nc().s[5]++,ie.jsxs("div",{className:"maputnik-input-block",role:"group","aria-labelledby":i.current,children:[(Nc().b[0][0]++,n.fieldSpec&&(Nc().b[0][1]++,ie.jsx("div",{className:"maputnik-input-block-label",children:ie.jsx(wK,{label:n.label,onToggleDoc:r,fieldSpec:n.fieldSpec})}))),(Nc().b[1][0]++,!n.fieldSpec&&(Nc().b[1][1]++,ie.jsx("div",{className:Yg({"maputnik-input-block-label":!0,"maputnik-input-block--error":n.error}),children:n.label}))),ie.jsx("div",{className:"maputnik-input-block-action",children:n.action}),ie.jsx("div",{className:"maputnik-input-block-content",children:n.children}),(Nc().b[2][0]++,n.fieldSpec&&(Nc().b[2][1]++,ie.jsx("div",{className:"maputnik-doc-inline",style:{display:e?(Nc().b[3][0]++,""):(Nc().b[3][1]++,"none")},children:ie.jsx(E6,{fieldSpec:n.fieldSpec})})))]})};function No(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx",e="93d4690989e2b2b09b13eab9ee3382c32a103823",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx",statementMap:{0:{start:{line:6,column:2},end:{line:34,column:3}},1:{start:{line:8,column:6},end:{line:8,column:19}},2:{start:{line:10,column:6},end:{line:10,column:74}},3:{start:{line:12,column:6},end:{line:12,column:19}},4:{start:{line:14,column:6},end:{line:14,column:22}},5:{start:{line:16,column:6},end:{line:16,column:19}},6:{start:{line:18,column:6},end:{line:18,column:19}},7:{start:{line:20,column:6},end:{line:20,column:19}},8:{start:{line:22,column:6},end:{line:22,column:19}},9:{start:{line:24,column:6},end:{line:24,column:19}},10:{start:{line:26,column:6},end:{line:26,column:22}},11:{start:{line:28,column:6},end:{line:28,column:22}},12:{start:{line:30,column:6},end:{line:30,column:22}},13:{start:{line:32,column:6},end:{line:32,column:58}},14:{start:{line:33,column:6},end:{line:33,column:19}},15:{start:{line:36,column:18},end:{line:39,column:1}},16:{start:{line:37,column:20},end:{line:37,column:55}},17:{start:{line:38,column:2},end:{line:38,column:190}}},fnMap:{0:{name:"getElementFromType",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:39},end:{line:35,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:29},end:{line:39,column:1}},line:36}},branchMap:{0:{loc:{start:{line:6,column:2},end:{line:34,column:3}},type:"switch",locations:[{start:{line:7,column:4},end:{line:8,column:19}},{start:{line:9,column:4},end:{line:10,column:74}},{start:{line:11,column:4},end:{line:12,column:19}},{start:{line:13,column:4},end:{line:14,column:22}},{start:{line:15,column:4},end:{line:16,column:19}},{start:{line:17,column:4},end:{line:18,column:19}},{start:{line:19,column:4},end:{line:20,column:19}},{start:{line:21,column:4},end:{line:22,column:19}},{start:{line:23,column:4},end:{line:24,column:19}},{start:{line:25,column:4},end:{line:26,column:22}},{start:{line:27,column:4},end:{line:28,column:22}},{start:{line:29,column:4},end:{line:30,column:22}},{start:{line:31,column:4},end:{line:33,column:19}}],line:6},1:{loc:{start:{line:10,column:13},end:{line:10,column:73}},type:"cond-expr",locations:[{start:{line:10,column:57},end:{line:10,column:65}},{start:{line:10,column:68},end:{line:10,column:73}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx"],names:[],mappings:"AA2CM;AA3CN,OAAO,WAAgC;AACvC,OAAO,eAA4D;AACnE,OAAO,cAAsC;AAE7C,SAAS,mBAAmB,WAAyF;AACnH,UAAO,UAAU,MAAM;AAAA,IACrB,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAQ,OAAO,KAAK,UAAU,MAAO,EAAE,UAAU,IAAI,WAAW;AAAA,IAClE,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT;AACE,cAAQ,KAAK,uBAAuB,UAAU,IAAI;AAClD,aAAO;AAAA,EACX;AACF;AAIA,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,YAAY,mBAAmB,MAAM,SAAU;AAErD,SACE,oBAAC,aAAU,OAAO,MAAM,OAAO,QAAQ,MAAM,QAAQ,WAAW,MAAM,WAAW,OAAO,MAAM,OAC5F,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"93d4690989e2b2b09b13eab9ee3382c32a103823"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return No=function(){return s},s}No();function URe(n){switch(No().f[0]++,No().s[0]++,n.type){case"color":return No().b[0][0]++,No().s[1]++,Gs;case"enum":return No().b[0][1]++,No().s[2]++,Object.keys(n.values).length<=3?(No().b[1][0]++,Dy):(No().b[1][1]++,Gs);case"boolean":return No().b[0][2]++,No().s[3]++,Gs;case"array":return No().b[0][3]++,No().s[4]++,Dy;case"resolvedImage":return No().b[0][4]++,No().s[5]++,Gs;case"number":return No().b[0][5]++,No().s[6]++,Gs;case"string":return No().b[0][6]++,No().s[7]++,Gs;case"formatted":return No().b[0][7]++,No().s[8]++,Gs;case"padding":return No().b[0][8]++,No().s[9]++,Gs;case"numberArray":return No().b[0][9]++,No().s[10]++,Dy;case"colorArray":return No().b[0][10]++,No().s[11]++,Dy;case"variableAnchorOffsetCollection":return No().b[0][11]++,No().s[12]++,Dy;default:return No().b[0][12]++,No().s[13]++,console.warn("No such type for: "+n.type),No().s[14]++,Gs}}No().s[15]++;const KRe=n=>{No().f[1]++;const e=(No().s[16]++,URe(n.fieldSpec));return No().s[17]++,ie.jsx(e,{label:n.label,action:n.action,fieldSpec:n.fieldSpec,error:n.error,children:ie.jsx(nx,{...n})})};function gu(){var n="/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",e="8e77c8fbe0fbc5796ba925837fc7526418b4854b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:60,column:5}},2:{start:{line:11,column:52},end:{line:19,column:7}},3:{start:{line:20,column:50},end:{line:28,column:7}},4:{start:{line:30,column:6},end:{line:40,column:7}},5:{start:{line:31,column:8},end:{line:39,column:10}},6:{start:{line:41,column:6},end:{line:45,column:11}},7:{start:{line:46,column:11},end:{line:60,column:5}},8:{start:{line:47,column:51},end:{line:56,column:7}},9:{start:{line:57,column:6},end:{line:57,column:76}},10:{start:{line:59,column:6},end:{line:59,column:44}},11:{start:{line:63,column:29},end:{line:63,column:76}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:61,column:3}},line:8}},branchMap:{0:{loc:{start:{line:10,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:60,column:5}},{start:{line:46,column:11},end:{line:60,column:5}}],line:10},1:{loc:{start:{line:30,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30},2:{loc:{start:{line:46,column:11},end:{line:60,column:5}},type:"if",locations:[{start:{line:46,column:11},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:46}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx"],names:[],mappings:"AA0BU,cAsBG,YAtBH;AA1BV,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,aAAa,qBAAoB;AACzC,SAAS,sBAAsB;AAC/B,SAA+B,uBAAuB;AAUtD,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,KAAK,MAAM,UAAU,YAAY,WAAW,SAAS,MAAM,GAAG;AAChE,YAAM,wBACJ;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uBAAuB;AAAA,UAEhC,8BAAC,kBAAe;AAAA;AAAA,MAClB;AAGF,YAAM,sBAAsB;AAAA,QAAC;AAAA;AAAA,UAC3B,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uCAAuC;AAAA,UAEhD,8BAAC,eAAY;AAAA;AAAA,MACf;AAEA,UAAI;AACJ,UAAI,KAAK,MAAM,UAAU,eAAe,MAAM,eAAe;AAC3D,8BAAsB;AAAA,UAAC;AAAA;AAAA,YACrB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,OAAO,EAAE,mCAAmC;AAAA,YAE5C,8BAAC,iBAAc;AAAA;AAAA,QACjB;AAAA,MACF;AACA,aAAO,qBAAC,SACL;AAAA;AAAA,QACA;AAAA,QACA;AAAA,SACH;AAAA,IACF,WAAW,KAAK,MAAM,UAAU,YAAY,WAAW,SAAS,WAAW,GAAG;AAC5E,YAAM,uBAAuB;AAAA,QAAC;AAAA;AAAA,UAC5B,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,4CAA4C;AAAA,UACrD,eAAY;AAAA,UAEZ,8BAAC,eAAY;AAAA;AAAA,MACf;AACA,aAAO,oBAAC,SAAK,gCAAqB;AAAA,IACpC,OAAO;AACL,aAAO,oBAAC,SAAI;AAAA,IACd;AAAA,EACF;AACF;AAEA,MAAM,uBAAuB,gBAAgB,EAAE,4BAA4B;AAC3E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8e77c8fbe0fbc5796ba925837fc7526418b4854b"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return gu=function(){return s},s}gu();class LRe extends On.Component{render(){gu().f[0]++;const e=(gu().s[0]++,this.props.t);if(gu().s[1]++,this.props.fieldSpec.expression?.parameters.includes("zoom")){gu().b[0][0]++;const t=(gu().s[2]++,ie.jsx(Js,{className:"maputnik-make-zoom-function",onClick:this.props.onExpressionClick,title:e("Convert to expression"),children:ie.jsx(T4,{})})),i=(gu().s[3]++,ie.jsx(Js,{className:"maputnik-make-zoom-function",onClick:this.props.onZoomClick,title:e("Convert property into a zoom function"),children:ie.jsx(ez,{})}));let r;return gu().s[4]++,this.props.fieldSpec["property-type"]==="data-driven"?(gu().b[1][0]++,gu().s[5]++,r=ie.jsx(Js,{className:"maputnik-make-data-function",onClick:this.props.onDataClick,title:e("Convert property to data function"),children:ie.jsx(Ffe,{})})):gu().b[1][1]++,gu().s[6]++,ie.jsxs("div",{children:[t,r,i]})}else if(gu().b[0][1]++,gu().s[7]++,this.props.fieldSpec.expression?.parameters.includes("elevation")){gu().b[2][0]++;const t=(gu().s[8]++,ie.jsx(Js,{className:"maputnik-make-elevation-function",onClick:this.props.onElevationClick,title:e("Convert property into a elevation function"),"data-wd-key":"make-elevation-function",children:ie.jsx(ez,{})}));return gu().s[9]++,ie.jsx("div",{children:t})}else return gu().b[2][1]++,gu().s[10]++,ie.jsx("div",{})}}const FRe=(gu().s[11]++,$o()(LRe));function dg(){var n="/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",e="3e6c7200aa37e60f3f49ecaa91bce3a63befeb7e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",statementMap:{0:{start:{line:7,column:24},end:{line:9,column:3}},1:{start:{line:11,column:45},end:{line:11,column:55}},2:{start:{line:12,column:40},end:{line:21,column:5}},3:{start:{line:22,column:18},end:{line:22,column:53}},4:{start:{line:23,column:4},end:{line:32,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:33,column:3}},line:10}},branchMap:{0:{loc:{start:{line:29,column:34},end:{line:29,column:60}},type:"binary-expr",locations:[{start:{line:29,column:34},end:{line:29,column:54}},{start:{line:29,column:58},end:{line:29,column:60}}],line:29}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx"],names:[],mappings:"AA6BwB;AA7BxB,OAAO,WAAW;AAElB,OAAO,eAAsC;AAC7C,OAAO,qBAAqB;AAE5B,OAAO,wBAAwB;AAgB/B,qBAAqB,qBAAqB,MAAM,UAA6B;AAAA,EAC3E,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,WAAW,UAAS,IAAI,KAAK;AAE5C,UAAM,cAAc;AAAA,MAAC;AAAA;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QACtB,aAAa,KAAK,MAAM;AAAA,QACxB,aAAa,KAAK,MAAM;AAAA,QACxB,mBAAmB,KAAK,MAAM;AAAA,QAC9B,kBAAkB,KAAK,MAAM;AAAA;AAAA,IAC/B;AAEA,UAAM,QAAQ,OAAQ,YAAU,MAAI,SAAgB;AAEpD,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT;AAAA,QACA,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,mBAAmB,KAAK,MAAM,aAAa,EAAE;AAAA,QACpD,QAAQ;AAAA;AAAA,IACV;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3e6c7200aa37e60f3f49ecaa91bce3a63befeb7e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return dg=function(){return s},s}dg();class zRe extends On.Component{static defaultProps=(dg().s[0]++,{errors:{}});render(){dg().f[0]++;const{errors:e,fieldName:t,fieldType:i}=(dg().s[1]++,this.props),r=(dg().s[2]++,ie.jsx(FRe,{fieldSpec:this.props.fieldSpec,onZoomClick:this.props.onZoomClick,onDataClick:this.props.onDataClick,onExpressionClick:this.props.onExpressionClick,onElevationClick:this.props.onElevationClick})),o=(dg().s[3]++,e[i+"."+t]);return dg().s[4]++,ie.jsx(KRe,{...this.props,error:o,fieldSpec:this.props.fieldSpec,label:K6((dg().b[0][0]++,this.props.fieldName||(dg().b[0][1]++,""))),action:r})}}function cd(){var n="/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",e="e8906f642b33ab7d7a780fc0db870f7e4872d29c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",statementMap:{0:{start:{line:2,column:12},end:{line:2,column:17}},1:{start:{line:3,column:12},end:{line:3,column:17}},2:{start:{line:4,column:2},end:{line:10,column:3}},3:{start:{line:5,column:4},end:{line:5,column:14}},4:{start:{line:6,column:9},end:{line:10,column:3}},5:{start:{line:7,column:4},end:{line:7,column:13}},6:{start:{line:9,column:4},end:{line:9,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:15},end:{line:1,column:16}},loc:{start:{line:1,column:36},end:{line:11,column:1}},line:1}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:10,column:3}},{start:{line:6,column:9},end:{line:10,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:10,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:10,column:3}},{start:{line:8,column:9},end:{line:10,column:3}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts"],names:[],mappings:"AAAA,wBAAwB,MAAuB,MAAsB;AACnE,QAAM,IAAI,CAAC;AACX,QAAM,IAAI,CAAC;AAEX,MAAG,IAAI,GAAG;AACR,WAAO;AAAA,EACT,WACQ,IAAI,GAAG;AACb,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e8906f642b33ab7d7a780fc0db870f7e4872d29c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return cd=function(){return s},s}cd();function Zse(n,e){cd().f[0]++;const t=(cd().s[0]++,+n),i=(cd().s[1]++,+e);return cd().s[2]++,t<i?(cd().b[0][0]++,cd().s[3]++,-1):(cd().b[0][1]++,cd().s[4]++,t>i?(cd().b[1][0]++,cd().s[5]++,1):(cd().b[1][1]++,cd().s[6]++,0))}function Wp(){var n="/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",e="2f98128f0f990b67a049c58486c1fab4310fbcfa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:24}},2:{start:{line:5,column:19},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:12,column:35}}},fnMap:{0:{name:"findDefaultFromSpec",decl:{start:{line:1,column:16},end:{line:1,column:35}},loc:{start:{line:1,column:42},end:{line:13,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:12,column:9},end:{line:12,column:34}},type:"binary-expr",locations:[{start:{line:12,column:9},end:{line:12,column:28}},{start:{line:12,column:32},end:{line:12,column:34}}],line:12}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts"],names:[],mappings:"AAGO,gBAAS,oBAAoB,MAAyE;AAC3G,MAAI,OAAO,UAAU,eAAe,KAAK,MAAM,SAAS,GAAG;AACzD,WAAO,KAAK;AAAA,EACd;AAEA,QAAM,WAAW;AAAA,IACf,SAAS;AAAA,IACT,UAAU;AAAA,IACV,WAAW;AAAA,IACX,UAAU;AAAA,IACV,SAAS,CAAC;AAAA,EACZ;AAEA,SAAO,SAAS,KAAK,IAAI,KAAK;AAChC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f98128f0f990b67a049c58486c1fab4310fbcfa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Wp=function(){return s},s}Wp();function Zf(n){if(Wp().f[0]++,Wp().s[0]++,Object.prototype.hasOwnProperty.call(n,"default"))return Wp().b[0][0]++,Wp().s[1]++,n.default;Wp().b[0][1]++;const e=(Wp().s[2]++,{color:"#000000",string:"",boolean:!1,number:0,array:[]});return Wp().s[3]++,Wp().b[1][0]++,e[n.type]||(Wp().b[1][1]++,"")}function ix(){var n="/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",e="03de18cded5f486201afd886787bbdda710eafe3",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:17,column:6}},2:{start:{line:20,column:25},end:{line:20,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:18,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAQtD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,6BAA6B;AAAA,QAEtC,8BAAC,YAAS;AAAA;AAAA,IACZ;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"03de18cded5f486201afd886787bbdda710eafe3"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ix=function(){return s},s}ix();class jRe extends On.Component{render(){ix().f[0]++;const e=(ix().s[0]++,this.props.t);return ix().s[1]++,ie.jsx(Js,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove zoom level from stop"),children:ie.jsx($b,{})})}}const Xse=(ix().s[2]++,$o()(jRe));function Vt(){var n="/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",e="a1f2034e8330e69a4f4de946d81cea8ff55472f7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",statementMap:{0:{start:{line:20,column:2},end:{line:29,column:3}},1:{start:{line:21,column:4},end:{line:28,column:7}},2:{start:{line:22,column:6},end:{line:27,column:7}},3:{start:{line:23,column:8},end:{line:25,column:9}},4:{start:{line:24,column:10},end:{line:24,column:33}},5:{start:{line:26,column:8},end:{line:26,column:39}},6:{start:{line:30,column:2},end:{line:30,column:17}},7:{start:{line:33,column:10},end:{line:35,column:3}},8:{start:{line:37,column:20},end:{line:37,column:55}},9:{start:{line:38,column:4},end:{line:42,column:5}},10:{start:{line:39,column:6},end:{line:41,column:9}},11:{start:{line:45,column:20},end:{line:45,column:45}},12:{start:{line:46,column:4},end:{line:50,column:5}},13:{start:{line:47,column:6},end:{line:49,column:8}},14:{start:{line:51,column:4},end:{line:51,column:16}},15:{start:{line:54,column:4},end:{line:56,column:5}},16:{start:{line:55,column:6},end:{line:55,column:27}},17:{start:{line:57,column:4},end:{line:59,column:5}},18:{start:{line:58,column:6},end:{line:58,column:24}},19:{start:{line:60,column:4},end:{line:60,column:25}},20:{start:{line:63,column:4},end:{line:67,column:5}},21:{start:{line:64,column:6},end:{line:64,column:83}},22:{start:{line:66,column:6},end:{line:66,column:53}},23:{start:{line:71,column:26},end:{line:76,column:70}},24:{start:{line:72,column:6},end:{line:75,column:8}},25:{start:{line:76,column:22},end:{line:76,column:69}},26:{start:{line:77,column:20},end:{line:77,column:22}},27:{start:{line:78,column:4},end:{line:80,column:7}},28:{start:{line:79,column:6},end:{line:79,column:30}},29:{start:{line:81,column:4},end:{line:83,column:7}},30:{start:{line:84,column:4},end:{line:84,column:50}},31:{start:{line:84,column:39},end:{line:84,column:48}},32:{start:{line:86,column:13},end:{line:106,column:3}},33:{start:{line:87,column:4},end:{line:104,column:5}},34:{start:{line:88,column:6},end:{line:91,column:8}},35:{start:{line:93,column:24},end:{line:93,column:61}},36:{start:{line:94,column:6},end:{line:103,column:8}},37:{start:{line:105,column:4},end:{line:105,column:42}},38:{start:{line:108,column:18},end:{line:108,column:56}},39:{start:{line:109,column:4},end:{line:115,column:6}},40:{start:{line:116,column:25},end:{line:116,column:53}},41:{start:{line:117,column:25},end:{line:120,column:5}},42:{start:{line:121,column:4},end:{line:121,column:54}},43:{start:{line:124,column:25},end:{line:127,column:5}},44:{start:{line:128,column:4},end:{line:130,column:5}},45:{start:{line:129,column:6},end:{line:129,column:34}},46:{start:{line:131,column:4},end:{line:131,column:60}},47:{start:{line:134,column:4},end:{line:141,column:5}},48:{start:{line:135,column:6},end:{line:135,column:42}},49:{start:{line:137,column:6},end:{line:140,column:9}},50:{start:{line:144,column:4},end:{line:148,column:5}},51:{start:{line:145,column:6},end:{line:145,column:43}},52:{start:{line:147,column:6},end:{line:147,column:40}},53:{start:{line:149,column:4},end:{line:149,column:58}},54:{start:{line:152,column:14},end:{line:152,column:26}},55:{start:{line:153,column:4},end:{line:155,column:5}},56:{start:{line:154,column:6},end:{line:154,column:78}},57:{start:{line:157,column:4},end:{line:205,column:5}},58:{start:{line:158,column:6},end:{line:204,column:9}},59:{start:{line:159,column:26},end:{line:159,column:77}},60:{start:{line:160,column:20},end:{line:160,column:40}},61:{start:{line:161,column:26},end:{line:161,column:79}},62:{start:{line:162,column:22},end:{line:162,column:29}},63:{start:{line:163,column:46},end:{line:163,column:122}},64:{start:{line:164,column:26},end:{line:169,column:9}},65:{start:{line:168,column:33},end:{line:168,column:97}},66:{start:{line:171,column:8},end:{line:175,column:9}},67:{start:{line:172,column:10},end:{line:172,column:73}},68:{start:{line:174,column:10},end:{line:174,column:73}},69:{start:{line:176,column:24},end:{line:176,column:28}},70:{start:{line:177,column:8},end:{line:188,column:9}},71:{start:{line:178,column:10},end:{line:187,column:15}},72:{start:{line:183,column:37},end:{line:183,column:101}},73:{start:{line:189,column:8},end:{line:203,column:18}},74:{start:{line:199,column:41},end:{line:199,column:110}},75:{start:{line:206,column:4},end:{line:306,column:12}},76:{start:{line:217,column:39},end:{line:217,column:67}},77:{start:{line:235,column:43},end:{line:235,column:68}},78:{start:{line:250,column:39},end:{line:250,column:83}},79:{start:{line:266,column:42},end:{line:266,column:85}},80:{start:{line:309,column:21},end:{line:309,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:18,column:9},end:{line:18,column:20}},loc:{start:{line:18,column:35},end:{line:31,column:1}},line:18},1:{name:"(anonymous_1)",decl:{start:{line:21,column:30},end:{line:21,column:31}},loc:{start:{line:21,column:45},end:{line:28,column:5}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:22},end:{line:43,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:48},end:{line:52,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:34},end:{line:61,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:62,column:2},end:{line:62,column:3}},loc:{start:{line:62,column:34},end:{line:68,column:3}},line:62},6:{name:"(anonymous_6)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:26},end:{line:85,column:3}},line:70},7:{name:"(anonymous_7)",decl:{start:{line:71,column:36},end:{line:71,column:37}},loc:{start:{line:71,column:51},end:{line:76,column:5}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:76,column:12},end:{line:76,column:13}},loc:{start:{line:76,column:22},end:{line:76,column:69}},line:76},9:{name:"(anonymous_9)",decl:{start:{line:78,column:26},end:{line:78,column:27}},loc:{start:{line:78,column:41},end:{line:80,column:5}},line:78},10:{name:"(anonymous_10)",decl:{start:{line:84,column:29},end:{line:84,column:30}},loc:{start:{line:84,column:39},end:{line:84,column:48}},line:84},11:{name:"(anonymous_11)",decl:{start:{line:86,column:13},end:{line:86,column:14}},loc:{start:{line:86,column:35},end:{line:106,column:3}},line:86},12:{name:"(anonymous_12)",decl:{start:{line:107,column:2},end:{line:107,column:3}},loc:{start:{line:107,column:41},end:{line:122,column:3}},line:107},13:{name:"(anonymous_13)",decl:{start:{line:123,column:2},end:{line:123,column:3}},loc:{start:{line:123,column:23},end:{line:132,column:3}},line:123},14:{name:"(anonymous_14)",decl:{start:{line:133,column:2},end:{line:133,column:3}},loc:{start:{line:133,column:26},end:{line:142,column:3}},line:133},15:{name:"(anonymous_15)",decl:{start:{line:143,column:2},end:{line:143,column:3}},loc:{start:{line:143,column:40},end:{line:150,column:3}},line:143},16:{name:"(anonymous_16)",decl:{start:{line:151,column:2},end:{line:151,column:3}},loc:{start:{line:151,column:11},end:{line:307,column:3}},line:151},17:{name:"(anonymous_17)",decl:{start:{line:158,column:46},end:{line:158,column:47}},loc:{start:{line:158,column:61},end:{line:204,column:7}},line:158},18:{name:"(anonymous_18)",decl:{start:{line:168,column:20},end:{line:168,column:21}},loc:{start:{line:168,column:33},end:{line:168,column:97}},line:168},19:{name:"(anonymous_19)",decl:{start:{line:183,column:24},end:{line:183,column:25}},loc:{start:{line:183,column:37},end:{line:183,column:101}},line:183},20:{name:"(anonymous_20)",decl:{start:{line:199,column:24},end:{line:199,column:25}},loc:{start:{line:199,column:41},end:{line:199,column:110}},line:199},21:{name:"(anonymous_21)",decl:{start:{line:217,column:26},end:{line:217,column:27}},loc:{start:{line:217,column:39},end:{line:217,column:67}},line:217},22:{name:"(anonymous_22)",decl:{start:{line:235,column:26},end:{line:235,column:27}},loc:{start:{line:235,column:43},end:{line:235,column:68}},line:235},23:{name:"(anonymous_23)",decl:{start:{line:250,column:26},end:{line:250,column:27}},loc:{start:{line:250,column:39},end:{line:250,column:83}},line:250},24:{name:"(anonymous_24)",decl:{start:{line:266,column:26},end:{line:266,column:27}},loc:{start:{line:266,column:42},end:{line:266,column:85}},line:266}},branchMap:{0:{loc:{start:{line:20,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:20,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},1:{loc:{start:{line:20,column:6},end:{line:20,column:38}},type:"binary-expr",locations:[{start:{line:20,column:6},end:{line:20,column:17}},{start:{line:20,column:21},end:{line:20,column:38}}],line:20},2:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},3:{loc:{start:{line:23,column:8},end:{line:25,column:9}},type:"if",locations:[{start:{line:23,column:8},end:{line:25,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:38,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:38,column:4},end:{line:42,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},5:{loc:{start:{line:46,column:4},end:{line:50,column:5}},type:"if",locations:[{start:{line:46,column:4},end:{line:50,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:54,column:4},end:{line:56,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:56,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},7:{loc:{start:{line:57,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:59,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},8:{loc:{start:{line:63,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:67,column:5}},{start:{line:65,column:11},end:{line:67,column:5}}],line:63},9:{loc:{start:{line:87,column:4},end:{line:104,column:5}},type:"if",locations:[{start:{line:87,column:4},end:{line:104,column:5}},{start:{line:92,column:11},end:{line:104,column:5}}],line:87},10:{loc:{start:{line:93,column:24},end:{line:93,column:61}},type:"cond-expr",locations:[{start:{line:93,column:55},end:{line:93,column:57}},{start:{line:93,column:60},end:{line:93,column:61}}],line:93},11:{loc:{start:{line:108,column:18},end:{line:108,column:56}},type:"binary-expr",locations:[{start:{line:108,column:18},end:{line:108,column:50}},{start:{line:108,column:54},end:{line:108,column:56}}],line:108},12:{loc:{start:{line:112,column:14},end:{line:112,column:58}},type:"cond-expr",locations:[{start:{line:112,column:41},end:{line:112,column:42}},{start:{line:112,column:45},end:{line:112,column:58}}],line:112},13:{loc:{start:{line:128,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:130,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:128},14:{loc:{start:{line:134,column:4},end:{line:141,column:5}},type:"if",locations:[{start:{line:134,column:4},end:{line:141,column:5}},{start:{line:136,column:11},end:{line:141,column:5}}],line:134},15:{loc:{start:{line:134,column:8},end:{line:134,column:70}},type:"binary-expr",locations:[{start:{line:134,column:8},end:{line:134,column:33}},{start:{line:134,column:37},end:{line:134,column:70}}],line:134},16:{loc:{start:{line:144,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:144,column:4},end:{line:148,column:5}},{start:{line:146,column:11},end:{line:148,column:5}}],line:144},17:{loc:{start:{line:153,column:4},end:{line:155,column:5}},type:"if",locations:[{start:{line:153,column:4},end:{line:155,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:153},18:{loc:{start:{line:157,column:4},end:{line:205,column:5}},type:"if",locations:[{start:{line:157,column:4},end:{line:205,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:157},19:{loc:{start:{line:159,column:26},end:{line:159,column:77}},type:"cond-expr",locations:[{start:{line:159,column:56},end:{line:159,column:68}},{start:{line:159,column:71},end:{line:159,column:77}}],line:159},20:{loc:{start:{line:161,column:26},end:{line:161,column:79}},type:"cond-expr",locations:[{start:{line:161,column:56},end:{line:161,column:69}},{start:{line:161,column:72},end:{line:161,column:79}}],line:161},21:{loc:{start:{line:171,column:8},end:{line:175,column:9}},type:"if",locations:[{start:{line:171,column:8},end:{line:175,column:9}},{start:{line:173,column:15},end:{line:175,column:9}}],line:171},22:{loc:{start:{line:177,column:8},end:{line:188,column:9}},type:"if",locations:[{start:{line:177,column:8},end:{line:188,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:177},23:{loc:{start:{line:225,column:8},end:{line:240,column:9}},type:"binary-expr",locations:[{start:{line:225,column:8},end:{line:225,column:45}},{start:{line:225,column:65},end:{line:240,column:9}}],line:225},24:{loc:{start:{line:256,column:8},end:{line:271,column:9}},type:"binary-expr",locations:[{start:{line:256,column:8},end:{line:256,column:18}},{start:{line:256,column:38},end:{line:271,column:9}}],line:256},25:{loc:{start:{line:272,column:8},end:{line:280,column:15}},type:"binary-expr",locations:[{start:{line:272,column:8},end:{line:272,column:18}},{start:{line:272,column:38},end:{line:280,column:15}}],line:272},26:{loc:{start:{line:282,column:10},end:{line:292,column:11}},type:"binary-expr",locations:[{start:{line:282,column:10},end:{line:282,column:20}},{start:{line:282,column:40},end:{line:292,column:11}}],line:282}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx"],names:[],mappings:"AAuO8B,cA8Bf,YA9Be;AAvO9B,OAAO,WAAW;AAClB,SAAQ,sBAAqB;AAC7B,SAAQ,sBAAqB;AAC7B,OAAO,YAAY;AAEnB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAC5B,SAAQ,2BAA0B;AAClC,SAA+B,uBAAuB;AAEtD,OAAO,wBAAwB;AAC/B,OAAO,sBAAsB;AAK7B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI;AAEJ,MAAG,MAAM,SAAS,MAAM,MAAM,OAAO;AACnC,UAAM,MAAM,MAAM,QAAQ,CAAC,MAAM,QAAQ;AACvC,UAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAgCA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,eAAe,YAAY,UAAU;AAAA,IAC/C;AAAA,EACF;AAAA;AAAA,EAGA,iBAAiB,OAAe;AAC9B,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC;AAGjE,UAAM,UAAU,CAAC;AACjB,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,WAAW,CAAC,WAAmB,UAAe;AAC5C,QAAI,MAAM,SAAS,YAAY;AAC7B,cAAQ;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,UAAU,MAAM;AAAA,MAClB;AAAA,IACF,OACK;AACH,YAAM,YAAY,MAAM,SAAS,gBAAgB,KAAK;AACtD,cAAQ;AAAA,QACN,UAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,QAEZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,UAC9E,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,QACjF;AAAA,QACA,GAAG;AAAA,MACL;AAAA,IACF;AACA,SAAK,MAAM,SAAU,WAAW,KAAK;AAAA,EACvC;AAAA,EAEA,WAAW,WAAmB,UAAuD,OAAe;AAClG,UAAM,QAAQ,KAAK,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC;AAEnD,UAAM,SAAS,IAAI;AAAA,MACjB;AAAA,QACE,OAAO,SAAS;AAAA,QAChB,MAAO,SAAS,SAAS,SAAa,IAAI,SAAS;AAAA,MACrD;AAAA,MACA;AAAA,IACF;AAEA,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EAClD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,eAAe,SAAiB;AAC9B,QAAI,YAAY,iBAAiB,KAAK,MAAM,wBAAwB;AAClE,WAAK,MAAM,uBAAuB;AAAA,IACpC,OACK;AACH,WAAK,SAAS,KAAK,MAAM,WAAW;AAAA,QAClC,GAAG,KAAK,MAAM;AAAA,QACd,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,UAAkC,SAAc;AACjE,QAAI,SAAS;AACX,WAAK,MAAM,MAAO,QAAQ,IAAI;AAAA,IAChC,OACK;AACH,aAAO,KAAK,MAAM,MAAO,QAAQ;AAAA,IACnC;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,KAAK,MAAM,KAAK;AAAA,EACtD;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,OAAO,KAAK,MAAM,OAAO,SAAS,aAAa;AACjD,WAAK,MAAM,MAAO,OAAO,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA,IACzE;AAEA,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO,OAAO;AAC3B,mBAAa,KAAK,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,QAAQ;AACrD,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,OAAO;AAC/D,cAAM,MAAO,KAAK,MAAM,KAAK,GAAG;AAChC,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,QAAQ,KAAK,CAAC;AACtE,cAAM,QAAQ,KAAK,CAAC;AACpB,cAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAE3F,cAAM,YAAY;AAAA,UAChB,cAAc,EAAE,aAAa;AAAA,UAC7B,OAAO,EAAE,YAAY;AAAA,UACrB,OAAO;AAAA,UACP,UAAU,CAAC,YAAyC,KAAK,WAAW,KAAK,EAAE,MAAM,WAAW,OAAO,QAAkB,GAAG,KAAK;AAAA,QAC/H;AAEA,YAAI;AACJ,YAAG,KAAK,MAAM,OAAO,SAAS,eAAe;AAC3C,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C,OACK;AACH,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C;AAEA,YAAI,YAAY;AAChB,YAAG,cAAc,QAAW;AAC1B,sBAAY,oBAAC,SACX;AAAA,YAAC;AAAA;AAAA,cACC,cAAW;AAAA,cACX,OAAO;AAAA,cACP,UAAU,aAAW,KAAK,WAAW,KAAK,EAAC,MAAM,SAAS,OAAO,UAAS,GAAG,KAAK;AAAA,cAClF,KAAK;AAAA,cACL,KAAK;AAAA;AAAA,UACP,GACF;AAAA,QACF;AAEA,eAAO,qBAAC,QACN;AAAA,8BAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACC;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,EAAE,cAAc;AAAA,cAC5B,WAAW,KAAK,MAAM;AAAA,cACtB,WAAW,KAAK,MAAM;AAAA,cACtB;AAAA,cACA,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,KAAK,EAAC,MAAM,WAAW,OAAO,UAAS,GAAG,QAAkB;AAAA;AAAA,UACzG,GACF;AAAA,UACA,oBAAC,QACE,yBACH;AAAA,aAlBc,GAmBhB;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAGnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,MAAO;AAAA,gBACzB,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA;AAAA,YACzD,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QACC,KAAK,MAAM,OAAO,SAAS,cAC1B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAGf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAAkB;AAAA;AAAA,YAC/D,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QAEF;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YAGP,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,OAAO,EAAE,8CAA8C;AAAA,gBACvD,UAAU,aAAW,KAAK,mBAAmB,YAAY,OAAO;AAAA;AAAA,YAClE,GACF;AAAA;AAAA,UARI;AAAA,QASN;AAAA,QACC,cACC;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,SAAS;AAAA,YAGlB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,YAAY,KAAK,mBAAmB,WAAW,OAAO;AAAA;AAAA,YACtE;AAAA;AAAA,UAPI;AAAA,QAQN;AAAA,QAED,cACC,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,gCACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAI,YAAE,aAAa,GAAE;AAAA,YACtB,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QAEF,qBAAC,SAAI,WAAU,oBACZ;AAAA,wBACC;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,UAAU;AAAA;AAAA;AAAA,UACf;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,uBAAuB;AAAA;AAAA;AAAA,UAC5B;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a1f2034e8330e69a4f4de946d81cea8ff55472f7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Vt=function(){return s},s}Vt();function IV(n,e){Vt().f[0]++;let t;return Vt().s[0]++,Vt().b[1][0]++,n.value&&(Vt().b[1][1]++,n.value.stops)?(Vt().b[0][0]++,Vt().s[1]++,n.value.stops.forEach((i,r)=>{Vt().f[1]++,Vt().s[2]++,Object.prototype.hasOwnProperty.call(e.refs,r)?Vt().b[2][1]++:(Vt().b[2][0]++,Vt().s[3]++,t?Vt().b[3][1]++:(Vt().b[3][0]++,Vt().s[4]++,t={...e}),Vt().s[5]++,t[r]=Ex("stop-"))})):Vt().b[0][1]++,Vt().s[6]++,t}class NRe extends On.Component{state=(Vt().s[7]++,{refs:{}});componentDidMount(){Vt().f[2]++;const e=(Vt().s[8]++,IV(this.props,this.state));Vt().s[9]++,e?(Vt().b[4][0]++,Vt().s[10]++,this.setState({refs:e})):Vt().b[4][1]++}static getDerivedStateFromProps(e,t){Vt().f[3]++;const i=(Vt().s[11]++,IV(e,t));return Vt().s[12]++,i?(Vt().b[5][0]++,Vt().s[13]++,{refs:i}):(Vt().b[5][1]++,Vt().s[14]++,null)}getFieldFunctionType(e){return Vt().f[4]++,Vt().s[15]++,e.expression.interpolated?(Vt().b[6][0]++,Vt().s[16]++,"exponential"):(Vt().b[6][1]++,Vt().s[17]++,e.type==="number"?(Vt().b[7][0]++,Vt().s[18]++,"interval"):(Vt().b[7][1]++,Vt().s[19]++,"categorical"))}getDataFunctionTypes(e){return Vt().f[5]++,Vt().s[20]++,e.expression.interpolated?(Vt().b[8][0]++,Vt().s[21]++,["interpolate","categorical","interval","exponential","identity"]):(Vt().b[8][1]++,Vt().s[22]++,["categorical","interval","identity"])}orderStopsByZoom(e){Vt().f[6]++;const t=(Vt().s[23]++,e.map((r,o)=>(Vt().f[7]++,Vt().s[24]++,{ref:this.state.refs[o],data:r})).sort((r,o)=>(Vt().f[8]++,Vt().s[25]++,Zse(r.data[0].zoom,o.data[0].zoom)))),i=(Vt().s[26]++,{});return Vt().s[27]++,t.forEach((r,o)=>{Vt().f[9]++,Vt().s[28]++,i[o]=r.ref}),Vt().s[29]++,this.setState({refs:i}),Vt().s[30]++,t.map(r=>(Vt().f[10]++,Vt().s[31]++,r.data))}onChange=(Vt().s[32]++,(e,t)=>{if(Vt().f[11]++,Vt().s[33]++,t.type==="identity")Vt().b[9][0]++,Vt().s[34]++,t={type:t.type,property:t.property};else{Vt().b[9][1]++;const i=(Vt().s[35]++,t.type==="categorical"?(Vt().b[10][0]++,""):(Vt().b[10][1]++,0));Vt().s[36]++,t={property:"",type:t.type,stops:[[{zoom:6,value:i},Zf(this.props.fieldSpec)],[{zoom:10,value:i},Zf(this.props.fieldSpec)]],...t}}Vt().s[37]++,this.props.onChange(e,t)});changeStop(e,t,i){Vt().f[12]++;const r=(Vt().s[38]++,Vt().b[11][0]++,this.props.value?.stops.slice(0)||(Vt().b[11][1]++,[]));Vt().s[39]++,r[e]=[{value:t.value,zoom:t.zoom===void 0?(Vt().b[12][0]++,0):(Vt().b[12][1]++,t.zoom)},i];const o=(Vt().s[40]++,this.orderStopsByZoom(r)),s=(Vt().s[41]++,{...this.props.value,stops:o});Vt().s[42]++,this.onChange(this.props.fieldName,s)}changeBase(e){Vt().f[13]++;const t=(Vt().s[43]++,{...this.props.value,base:e});Vt().s[44]++,t.base===void 0?(Vt().b[13][0]++,Vt().s[45]++,delete t.base):Vt().b[13][1]++,Vt().s[46]++,this.props.onChange(this.props.fieldName,t)}changeDataType(e){Vt().f[14]++,Vt().s[47]++,Vt().b[15][0]++,e==="interpolate"&&(Vt().b[15][1]++,this.props.onChangeToZoomFunction)?(Vt().b[14][0]++,Vt().s[48]++,this.props.onChangeToZoomFunction()):(Vt().b[14][1]++,Vt().s[49]++,this.onChange(this.props.fieldName,{...this.props.value,type:e}))}changeDataProperty(e,t){Vt().f[15]++,Vt().s[50]++,t?(Vt().b[16][0]++,Vt().s[51]++,this.props.value[e]=t):(Vt().b[16][1]++,Vt().s[52]++,delete this.props.value[e]),Vt().s[53]++,this.onChange(this.props.fieldName,this.props.value)}render(){Vt().f[16]++;const e=(Vt().s[54]++,this.props.t);Vt().s[55]++,typeof this.props.value?.type>"u"?(Vt().b[17][0]++,Vt().s[56]++,this.props.value.type=this.getFieldFunctionType(this.props.fieldSpec)):Vt().b[17][1]++;let t;return Vt().s[57]++,this.props.value?.stops?(Vt().b[18][0]++,Vt().s[58]++,t=this.props.value.stops.map((i,r)=>{Vt().f[17]++;const o=(Vt().s[59]++,typeof i[0]=="object"?(Vt().b[19][0]++,i[0].zoom):(Vt().b[19][1]++,void 0)),s=(Vt().s[60]++,this.state.refs[r]),a=(Vt().s[61]++,typeof i[0]=="object"?(Vt().b[20][0]++,i[0].value):(Vt().b[20][1]++,i[0])),c=(Vt().s[62]++,i[1]),h=(Vt().s[63]++,ie.jsx(Xse,{onClick:this.props.onDeleteStop?.bind(this,r)})),m=(Vt().s[64]++,{"aria-label":e("Input value"),label:e("Data value"),value:a,onChange:x=>(Vt().f[18]++,Vt().s[65]++,this.changeStop(r,{zoom:o,value:x},c))});let y;Vt().s[66]++,this.props.value?.type==="categorical"?(Vt().b[21][0]++,Vt().s[67]++,y=ie.jsx(um,{...m})):(Vt().b[21][1]++,Vt().s[68]++,y=ie.jsx(m1,{...m}));let M=(Vt().s[69]++,null);return Vt().s[70]++,o!==void 0?(Vt().b[22][0]++,Vt().s[71]++,M=ie.jsx("div",{children:ie.jsx(m1,{"aria-label":"Zoom",value:o,onChange:x=>(Vt().f[19]++,Vt().s[72]++,this.changeStop(r,{zoom:x,value:a},c)),min:0,max:22})})):Vt().b[22][1]++,Vt().s[73]++,ie.jsxs("tr",{children:[ie.jsx("td",{children:M}),ie.jsx("td",{children:y}),ie.jsx("td",{children:ie.jsx(nx,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:c,onChange:(x,k)=>(Vt().f[20]++,Vt().s[74]++,this.changeStop(r,{zoom:o,value:a},k))})}),ie.jsx("td",{children:h})]},s)})):Vt().b[18][1]++,Vt().s[75]++,ie.jsx("div",{className:"maputnik-data-spec-block",children:ie.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[ie.jsx("legend",{children:K6(this.props.fieldName)}),ie.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[ie.jsx(Gs,{label:e("Function"),children:ie.jsx("div",{className:"maputnik-data-spec-property-input",children:ie.jsx(nC,{value:this.props.value.type,onChange:i=>(Vt().f[21]++,Vt().s[76]++,this.changeDataType(i)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})},"function"),(Vt().b[23][0]++,this.props.value?.type!=="identity"&&(Vt().b[23][1]++,ie.jsx(Gs,{label:e("Base"),children:ie.jsx("div",{className:"maputnik-data-spec-property-input",children:ie.jsx(nx,{fieldName:"base",fieldSpec:Jr.function.base,value:this.props.value?.base,onChange:(i,r)=>(Vt().f[22]++,Vt().s[77]++,this.changeBase(r))})})},"base"))),ie.jsx(Gs,{label:"Property",children:ie.jsx("div",{className:"maputnik-data-spec-property-input",children:ie.jsx(um,{value:this.props.value?.property,title:e("Input a data property to base styles off of."),onChange:i=>(Vt().f[23]++,Vt().s[78]++,this.changeDataProperty("property",i))})})},"property"),(Vt().b[24][0]++,t&&(Vt().b[24][1]++,ie.jsx(Gs,{label:e("Default"),children:ie.jsx(nx,{fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value?.default,onChange:(i,r)=>(Vt().f[24]++,Vt().s[79]++,this.changeDataProperty("default",r))})},"default"))),(Vt().b[25][0]++,t&&(Vt().b[25][1]++,ie.jsx("div",{className:"maputnik-function-stop",children:ie.jsxs("table",{className:"maputnik-function-stop-table",children:[ie.jsx("caption",{children:e("Stops")}),ie.jsx("thead",{children:ie.jsxs("tr",{children:[ie.jsx("th",{children:e("Zoom")}),ie.jsx("th",{children:e("Input value")}),ie.jsx("th",{rowSpan:2,children:e("Output value")})]})}),ie.jsx("tbody",{children:t})]})}))),ie.jsxs("div",{className:"maputnik-toolbox",children:[(Vt().b[26][0]++,t&&(Vt().b[26][1]++,ie.jsxs(Js,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[ie.jsx(U6,{style:{verticalAlign:"text-bottom"}}),e("Add stop")]}))),ie.jsxs(Js,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[ie.jsx(T4,{style:{verticalAlign:"text-bottom"}}),e("Convert to expression")]})]})]})]})})}}const GRe=(Vt().s[80]++,$o()(NRe));function Wn(){var n="/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",e="374899057a1493811ae396622fb1b276448ec163",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",statementMap:{0:{start:{line:17,column:16},end:{line:17,column:18}},1:{start:{line:18,column:2},end:{line:29,column:3}},2:{start:{line:19,column:4},end:{line:28,column:7}},3:{start:{line:20,column:6},end:{line:27,column:7}},4:{start:{line:21,column:8},end:{line:23,column:9}},5:{start:{line:22,column:10},end:{line:22,column:33}},6:{start:{line:24,column:8},end:{line:24,column:39}},7:{start:{line:26,column:8},end:{line:26,column:39}},8:{start:{line:30,column:2},end:{line:30,column:17}},9:{start:{line:33,column:24},end:{line:35,column:3}},10:{start:{line:36,column:10},end:{line:38,column:3}},11:{start:{line:40,column:20},end:{line:40,column:55}},12:{start:{line:41,column:4},end:{line:45,column:5}},13:{start:{line:42,column:6},end:{line:44,column:9}},14:{start:{line:48,column:20},end:{line:48,column:45}},15:{start:{line:49,column:4},end:{line:53,column:5}},16:{start:{line:50,column:6},end:{line:52,column:8}},17:{start:{line:54,column:4},end:{line:54,column:16}},18:{start:{line:58,column:26},end:{line:63,column:60}},19:{start:{line:59,column:6},end:{line:62,column:8}},20:{start:{line:63,column:22},end:{line:63,column:59}},21:{start:{line:64,column:20},end:{line:64,column:22}},22:{start:{line:65,column:4},end:{line:67,column:7}},23:{start:{line:66,column:6},end:{line:66,column:30}},24:{start:{line:68,column:4},end:{line:70,column:7}},25:{start:{line:71,column:4},end:{line:71,column:50}},26:{start:{line:71,column:39},end:{line:71,column:48}},27:{start:{line:74,column:18},end:{line:74,column:49}},28:{start:{line:75,column:4},end:{line:75,column:41}},29:{start:{line:76,column:25},end:{line:76,column:53}},30:{start:{line:77,column:25},end:{line:80,column:5}},31:{start:{line:81,column:4},end:{line:81,column:60}},32:{start:{line:84,column:25},end:{line:87,column:5}},33:{start:{line:88,column:4},end:{line:90,column:5}},34:{start:{line:89,column:6},end:{line:89,column:34}},35:{start:{line:91,column:4},end:{line:91,column:60}},36:{start:{line:93,column:19},end:{line:97,column:3}},37:{start:{line:94,column:4},end:{line:96,column:5}},38:{start:{line:95,column:6},end:{line:95,column:46}},39:{start:{line:99,column:14},end:{line:99,column:26}},40:{start:{line:100,column:23},end:{line:133,column:6}},41:{start:{line:101,column:24},end:{line:101,column:31}},42:{start:{line:102,column:20},end:{line:102,column:27}},43:{start:{line:103,column:44},end:{line:103,column:120}},44:{start:{line:104,column:6},end:{line:132,column:8}},45:{start:{line:113,column:43},end:{line:113,column:87}},46:{start:{line:125,column:43},end:{line:125,column:88}},47:{start:{line:134,column:4},end:{line:200,column:12}},48:{start:{line:145,column:39},end:{line:145,column:67}},49:{start:{line:162,column:43},end:{line:162,column:68}},50:{start:{line:203,column:4},end:{line:207,column:5}},51:{start:{line:204,column:6},end:{line:204,column:83}},52:{start:{line:206,column:6},end:{line:206,column:29}},53:{start:{line:210,column:21},end:{line:210,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:16,column:9},end:{line:16,column:20}},loc:{start:{line:16,column:35},end:{line:31,column:1}},line:16},1:{name:"(anonymous_1)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:45},end:{line:28,column:5}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:22},end:{line:46,column:3}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:48},end:{line:55,column:3}},line:47},4:{name:"(anonymous_4)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:26},end:{line:72,column:3}},line:57},5:{name:"(anonymous_5)",decl:{start:{line:58,column:36},end:{line:58,column:37}},loc:{start:{line:58,column:51},end:{line:63,column:5}},line:58},6:{name:"(anonymous_6)",decl:{start:{line:63,column:12},end:{line:63,column:13}},loc:{start:{line:63,column:22},end:{line:63,column:59}},line:63},7:{name:"(anonymous_7)",decl:{start:{line:65,column:26},end:{line:65,column:27}},loc:{start:{line:65,column:41},end:{line:67,column:5}},line:65},8:{name:"(anonymous_8)",decl:{start:{line:71,column:29},end:{line:71,column:30}},loc:{start:{line:71,column:39},end:{line:71,column:48}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:73,column:2},end:{line:73,column:3}},loc:{start:{line:73,column:45},end:{line:82,column:3}},line:73},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:23},end:{line:92,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:93,column:19},end:{line:93,column:20}},loc:{start:{line:93,column:29},end:{line:97,column:3}},line:93},12:{name:"(anonymous_12)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:11},end:{line:201,column:3}},line:98},13:{name:"(anonymous_13)",decl:{start:{line:100,column:51},end:{line:100,column:52}},loc:{start:{line:100,column:66},end:{line:133,column:5}},line:100},14:{name:"(anonymous_14)",decl:{start:{line:113,column:26},end:{line:113,column:27}},loc:{start:{line:113,column:43},end:{line:113,column:87}},line:113},15:{name:"(anonymous_15)",decl:{start:{line:125,column:26},end:{line:125,column:27}},loc:{start:{line:125,column:43},end:{line:125,column:88}},line:125},16:{name:"(anonymous_16)",decl:{start:{line:145,column:26},end:{line:145,column:27}},loc:{start:{line:145,column:39},end:{line:145,column:67}},line:145},17:{name:"(anonymous_17)",decl:{start:{line:162,column:26},end:{line:162,column:27}},loc:{start:{line:162,column:43},end:{line:162,column:68}},line:162},18:{name:"(anonymous_18)",decl:{start:{line:202,column:2},end:{line:202,column:3}},loc:{start:{line:202,column:34},end:{line:208,column:3}},line:202}},branchMap:{0:{loc:{start:{line:18,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:18,column:6},end:{line:18,column:38}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:17}},{start:{line:18,column:21},end:{line:18,column:38}}],line:18},2:{loc:{start:{line:20,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:20,column:6},end:{line:27,column:7}},{start:{line:25,column:13},end:{line:27,column:7}}],line:20},3:{loc:{start:{line:21,column:8},end:{line:23,column:9}},type:"if",locations:[{start:{line:21,column:8},end:{line:23,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},4:{loc:{start:{line:41,column:4},end:{line:45,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:45,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},5:{loc:{start:{line:49,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:53,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},6:{loc:{start:{line:88,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:88,column:4},end:{line:90,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:88},7:{loc:{start:{line:94,column:4},end:{line:96,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:96,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94},8:{loc:{start:{line:94,column:8},end:{line:94,column:67}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:30}},{start:{line:94,column:34},end:{line:94,column:67}}],line:94},9:{loc:{start:{line:203,column:4},end:{line:207,column:5}},type:"if",locations:[{start:{line:203,column:4},end:{line:207,column:5}},{start:{line:205,column:11},end:{line:207,column:5}}],line:203}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx"],names:[],mappings:"AAiK4B,cACf,YADe;AAjK5B,OAAO,WAAW;AAClB,SAAS,sBAAsB;AAC/B,SAAS,sBAAsB;AAC/B,OAAO,YAAY;AACnB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAElB,OAAO,sBAAsB;AAC7B,OAAO,wBAAwB;AAE/B,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAS5B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI,UAAmC,CAAC;AAExC,MAAG,MAAM,SAAU,MAAM,MAAwB,OAAO;AACtD,IAAC,MAAM,MAAwB,MAAM,QAAQ,CAAC,MAAM,QAAgB;AAClE,UAAG,OAAO,UAAU,eAAe,KAAK,CAAC,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B,OAAO;AACL,gBAAQ,GAAG,IAAI,MAAM,KAAK,GAAG;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO;AACT;AA4BA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,iBAAiB,OAA+B;AAC9C,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,GAAI,EAAE,KAAK,CAAC,CAAE,CAAC;AAGzD,UAAM,UAAkC,CAAC;AACzC,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,eAAe,WAAmB,UAA8B,OAAe;AAC7E,UAAM,QAAS,KAAK,MAAM,MAAwB,MAAM,MAAM,CAAC;AAC/D,UAAM,SAAS,IAAI,CAAC,UAAU,KAAK;AAEnC,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,iBAAiB,CAAC,SAAiB;AACjC,QAAI,SAAS,iBAAiB,KAAK,MAAM,wBAAwB;AAC/D,WAAK,MAAM,uBAAuB,IAAI;AAAA,IACxC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,aAAa,KAAK,MAAM,OAAO,MAAM,IAAI,CAAC,MAAM,QAAQ;AAC5D,YAAM,YAAY,KAAK,CAAC;AACxB,YAAM,QAAQ,KAAK,CAAC;AACpB,YAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAC3F,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,gCAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,MAAM;AAAA,gBACpB,OAAO;AAAA,gBACP,UAAU,iBAAe,KAAK,eAAe,KAAK,aAAa,KAAK;AAAA,gBACpE,KAAK;AAAA,gBACL,KAAK;AAAA;AAAA,YACP,GACF;AAAA,YACA,oBAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,cAAc;AAAA,gBAC5B,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB;AAAA,gBACA,UAAU,CAAC,GAAG,aAAa,KAAK,eAAe,KAAK,WAAW,QAAkB;AAAA;AAAA,YACnF,GACF;AAAA,YACA,oBAAC,QACE,yBACH;AAAA;AAAA;AAAA,QAtBK,GAAG,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;AAAA,MAuB5B;AAAA,IACF,CAAC;AAGD,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAEnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAU;AAAA;AAAA,YAC1D,GACF;AAAA;AAAA,QACF;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAEf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAA8B;AAAA;AAAA,YAC3E,GACF;AAAA;AAAA,QACF;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,mEACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QACA,qBAAC,SAAI,WAAU,oBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,UAAU;AAAA;AAAA;AAAA,UACf;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,uBAAuB;AAAA;AAAA;AAAA,UAC5B;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAGlB;AACD,QAAI,UAAU,eAAe,MAAM,eAAe;AAChD,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,aAAa;AAAA,IACvB;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"374899057a1493811ae396622fb1b276448ec163"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Wn=function(){return s},s}Wn();function kV(n,e){Wn().f[0]++;let t=(Wn().s[0]++,{});return Wn().s[1]++,Wn().b[1][0]++,n.value&&(Wn().b[1][1]++,n.value.stops)?(Wn().b[0][0]++,Wn().s[2]++,n.value.stops.forEach((i,r)=>{Wn().f[1]++,Wn().s[3]++,Object.prototype.hasOwnProperty.call(!e.refs,r)?(Wn().b[2][0]++,Wn().s[4]++,t?Wn().b[3][1]++:(Wn().b[3][0]++,Wn().s[5]++,t={...e}),Wn().s[6]++,t[r]=Ex("stop-")):(Wn().b[2][1]++,Wn().s[7]++,t[r]=e.refs[r])})):Wn().b[0][1]++,Wn().s[8]++,t}class WRe extends On.Component{static defaultProps=(Wn().s[9]++,{errors:{}});state=(Wn().s[10]++,{refs:{}});componentDidMount(){Wn().f[2]++;const e=(Wn().s[11]++,kV(this.props,this.state));Wn().s[12]++,e?(Wn().b[4][0]++,Wn().s[13]++,this.setState({refs:e})):Wn().b[4][1]++}static getDerivedStateFromProps(e,t){Wn().f[3]++;const i=(Wn().s[14]++,kV(e,t));return Wn().s[15]++,i?(Wn().b[5][0]++,Wn().s[16]++,{refs:i}):(Wn().b[5][1]++,Wn().s[17]++,null)}orderStopsByZoom(e){Wn().f[4]++;const t=(Wn().s[18]++,e.map((r,o)=>(Wn().f[5]++,Wn().s[19]++,{ref:this.state.refs[o],data:r})).sort((r,o)=>(Wn().f[6]++,Wn().s[20]++,Zse(r.data[0],o.data[0])))),i=(Wn().s[21]++,{});return Wn().s[22]++,t.forEach((r,o)=>{Wn().f[7]++,Wn().s[23]++,i[o]=r.ref}),Wn().s[24]++,this.setState({refs:i}),Wn().s[25]++,t.map(r=>(Wn().f[8]++,Wn().s[26]++,r.data))}changeZoomStop(e,t,i){Wn().f[9]++;const r=(Wn().s[27]++,this.props.value.stops.slice(0));Wn().s[28]++,r[e]=[t,i];const o=(Wn().s[29]++,this.orderStopsByZoom(r)),s=(Wn().s[30]++,{...this.props.value,stops:o});Wn().s[31]++,this.props.onChange(this.props.fieldName,s)}changeBase(e){Wn().f[10]++;const t=(Wn().s[32]++,{...this.props.value,base:e});Wn().s[33]++,t.base===void 0?(Wn().b[6][0]++,Wn().s[34]++,delete t.base):Wn().b[6][1]++,Wn().s[35]++,this.props.onChange(this.props.fieldName,t)}changeDataType=(Wn().s[36]++,e=>{Wn().f[11]++,Wn().s[37]++,Wn().b[8][0]++,e!=="interpolate"&&(Wn().b[8][1]++,this.props.onChangeToDataFunction)?(Wn().b[7][0]++,Wn().s[38]++,this.props.onChangeToDataFunction(e)):Wn().b[7][1]++});render(){Wn().f[12]++;const e=(Wn().s[39]++,this.props.t),t=(Wn().s[40]++,this.props.value?.stops.map((i,r)=>{Wn().f[13]++;const o=(Wn().s[41]++,i[0]),s=(Wn().s[42]++,i[1]),a=(Wn().s[43]++,ie.jsx(Xse,{onClick:this.props.onDeleteStop?.bind(this,r)}));return Wn().s[44]++,ie.jsxs("tr",{children:[ie.jsx("td",{children:ie.jsx(m1,{"aria-label":e("Zoom"),value:o,onChange:c=>(Wn().f[14]++,Wn().s[45]++,this.changeZoomStop(r,c,s)),min:0,max:22})}),ie.jsx("td",{children:ie.jsx(nx,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:s,onChange:(c,h)=>(Wn().f[15]++,Wn().s[46]++,this.changeZoomStop(r,o,h))})}),ie.jsx("td",{children:a})]},`${i[0]}-${i[1]}`)}));return Wn().s[47]++,ie.jsx("div",{className:"maputnik-data-spec-block",children:ie.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[ie.jsx("legend",{children:K6(this.props.fieldName)}),ie.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[ie.jsx(Gs,{label:e("Function"),children:ie.jsx("div",{className:"maputnik-data-spec-property-input",children:ie.jsx(nC,{value:"interpolate",onChange:i=>(Wn().f[16]++,Wn().s[48]++,this.changeDataType(i)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})}),ie.jsx(Gs,{label:e("Base"),children:ie.jsx("div",{className:"maputnik-data-spec-property-input",children:ie.jsx(nx,{fieldName:"base",fieldSpec:Jr.function.base,value:this.props.value?.base,onChange:(i,r)=>(Wn().f[17]++,Wn().s[49]++,this.changeBase(r))})})}),ie.jsx("div",{className:"maputnik-function-stop",children:ie.jsxs("table",{className:"maputnik-function-stop-table maputnik-function-stop-table--zoom",children:[ie.jsx("caption",{children:e("Stops")}),ie.jsx("thead",{children:ie.jsxs("tr",{children:[ie.jsx("th",{children:e("Zoom")}),ie.jsx("th",{rowSpan:2,children:e("Output value")})]})}),ie.jsx("tbody",{children:t})]})}),ie.jsxs("div",{className:"maputnik-toolbox",children:[ie.jsxs(Js,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[ie.jsx(U6,{style:{verticalAlign:"text-bottom"}}),e("Add stop")]}),ie.jsxs(Js,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[ie.jsx(T4,{style:{verticalAlign:"text-bottom"}}),e("Convert to expression")]})]})]})]})})}getDataFunctionTypes(e){return Wn().f[18]++,Wn().s[50]++,e["property-type"]==="data-driven"?(Wn().b[9][0]++,Wn().s[51]++,["interpolate","categorical","interval","exponential","identity"]):(Wn().b[9][1]++,Wn().s[52]++,["interpolate"])}}const QRe=(Wn().s[53]++,$o()(WRe));function mt(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",e="cec93a709e0799aecc929100cb853febe363652d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",statementMap:{0:{start:{line:10,column:2},end:{line:10,column:78}},1:{start:{line:13,column:2},end:{line:13,column:74}},2:{start:{line:16,column:2},end:{line:18,column:5}},3:{start:{line:17,column:4},end:{line:17,column:52}},4:{start:{line:21,column:2},end:{line:21,column:123}},5:{start:{line:24,column:2},end:{line:26,column:5}},6:{start:{line:25,column:4},end:{line:25,column:83}},7:{start:{line:29,column:2},end:{line:29,column:64}},8:{start:{line:32,column:16},end:{line:32,column:47}},9:{start:{line:33,column:2},end:{line:33,column:38}},10:{start:{line:36,column:2},end:{line:38,column:3}},11:{start:{line:37,column:4},end:{line:37,column:37}},12:{start:{line:39,column:2},end:{line:39,column:15}},13:{start:{line:42,column:2},end:{line:62,column:3}},14:{start:{line:43,column:4},end:{line:43,column:19}},15:{start:{line:44,column:9},end:{line:62,column:3}},16:{start:{line:45,column:4},end:{line:45,column:19}},17:{start:{line:46,column:9},end:{line:62,column:3}},18:{start:{line:47,column:4},end:{line:47,column:19}},19:{start:{line:48,column:9},end:{line:62,column:3}},20:{start:{line:49,column:4},end:{line:49,column:19}},21:{start:{line:50,column:9},end:{line:62,column:3}},22:{start:{line:51,column:4},end:{line:51,column:19}},23:{start:{line:52,column:9},end:{line:62,column:3}},24:{start:{line:53,column:4},end:{line:53,column:19}},25:{start:{line:54,column:9},end:{line:62,column:3}},26:{start:{line:55,column:4},end:{line:55,column:19}},27:{start:{line:56,column:9},end:{line:62,column:3}},28:{start:{line:57,column:4},end:{line:57,column:27}},29:{start:{line:58,column:9},end:{line:62,column:3}},30:{start:{line:59,column:4},end:{line:59,column:27}},31:{start:{line:61,column:4},end:{line:61,column:24}},32:{start:{line:64,column:22},end:{line:302,column:1}},33:{start:{line:65,column:34},end:{line:67,column:3}},34:{start:{line:68,column:36},end:{line:68,column:57}},35:{start:{line:69,column:2},end:{line:73,column:48}},36:{start:{line:70,column:4},end:{line:72,column:5}},37:{start:{line:71,column:6},end:{line:71,column:61}},38:{start:{line:74,column:31},end:{line:82,column:3}},39:{start:{line:75,column:4},end:{line:77,column:5}},40:{start:{line:76,column:6},end:{line:76,column:27}},41:{start:{line:78,column:4},end:{line:80,column:5}},42:{start:{line:79,column:6},end:{line:79,column:24}},43:{start:{line:81,column:4},end:{line:81,column:25}},44:{start:{line:83,column:18},end:{line:99,column:3}},45:{start:{line:84,column:18},end:{line:84,column:44}},46:{start:{line:85,column:21},end:{line:85,column:44}},47:{start:{line:86,column:4},end:{line:93,column:5}},48:{start:{line:87,column:6},end:{line:90,column:9}},49:{start:{line:92,column:6},end:{line:92,column:49}},50:{start:{line:94,column:25},end:{line:97,column:5}},51:{start:{line:98,column:4},end:{line:98,column:50}},52:{start:{line:100,column:27},end:{line:104,column:3}},53:{start:{line:101,column:37},end:{line:101,column:42}},54:{start:{line:102,column:4},end:{line:102,column:49}},55:{start:{line:103,column:4},end:{line:103,column:25}},56:{start:{line:105,column:21},end:{line:116,column:3}},57:{start:{line:106,column:18},end:{line:106,column:44}},58:{start:{line:107,column:4},end:{line:107,column:29}},59:{start:{line:108,column:23},end:{line:111,column:5}},60:{start:{line:112,column:4},end:{line:114,column:5}},61:{start:{line:113,column:6},end:{line:113,column:33}},62:{start:{line:115,column:4},end:{line:115,column:50}},63:{start:{line:117,column:27},end:{line:146,column:3}},64:{start:{line:118,column:22},end:{line:118,column:27}},65:{start:{line:120,column:4},end:{line:144,column:5}},66:{start:{line:121,column:6},end:{line:136,column:7}},67:{start:{line:122,column:8},end:{line:127,column:10}},68:{start:{line:125,column:12},end:{line:125,column:83}},69:{start:{line:129,column:8},end:{line:135,column:10}},70:{start:{line:138,column:6},end:{line:143,column:8}},71:{start:{line:145,column:4},end:{line:145,column:46}},72:{start:{line:147,column:25},end:{line:159,column:3}},73:{start:{line:148,column:33},end:{line:148,column:38}},74:{start:{line:149,column:4},end:{line:158,column:5}},75:{start:{line:150,column:6},end:{line:153,column:9}},76:{start:{line:154,column:6},end:{line:154,column:27}},77:{start:{line:155,column:11},end:{line:158,column:5}},78:{start:{line:156,column:6},end:{line:156,column:42}},79:{start:{line:157,column:6},end:{line:157,column:27}},80:{start:{line:160,column:18},end:{line:163,column:3}},81:{start:{line:161,column:33},end:{line:161,column:38}},82:{start:{line:162,column:4},end:{line:162,column:140}},83:{start:{line:164,column:25},end:{line:175,column:3}},84:{start:{line:165,column:33},end:{line:165,column:38}},85:{start:{line:167,column:4},end:{line:173,column:5}},86:{start:{line:168,column:6},end:{line:168,column:67}},87:{start:{line:169,column:11},end:{line:173,column:5}},88:{start:{line:170,column:6},end:{line:170,column:43}},89:{start:{line:172,column:6},end:{line:172,column:65}},90:{start:{line:174,column:4},end:{line:174,column:48}},91:{start:{line:176,column:27},end:{line:214,column:3}},92:{start:{line:177,column:25},end:{line:177,column:62}},93:{start:{line:178,column:22},end:{line:178,column:61}},94:{start:{line:179,column:22},end:{line:179,column:27}},95:{start:{line:181,column:4},end:{line:212,column:5}},96:{start:{line:182,column:6},end:{line:201,column:7}},97:{start:{line:183,column:8},end:{line:190,column:10}},98:{start:{line:188,column:12},end:{line:188,column:106}},99:{start:{line:192,column:8},end:{line:200,column:10}},100:{start:{line:203,column:6},end:{line:211,column:8}},101:{start:{line:213,column:4},end:{line:213,column:46}},102:{start:{line:215,column:32},end:{line:226,column:3}},103:{start:{line:216,column:23},end:{line:224,column:5}},104:{start:{line:225,column:4},end:{line:225,column:48}},105:{start:{line:227,column:24},end:{line:229,column:3}},106:{start:{line:228,column:4},end:{line:228,column:23}},107:{start:{line:230,column:26},end:{line:232,column:3}},108:{start:{line:231,column:4},end:{line:231,column:24}},109:{start:{line:233,column:20},end:{line:233,column:120}},110:{start:{line:235,column:2},end:{line:300,column:3}},111:{start:{line:236,column:4},end:{line:251,column:6}},112:{start:{line:252,column:9},end:{line:300,column:3}},113:{start:{line:253,column:4},end:{line:267,column:6}},114:{start:{line:268,column:9},end:{line:300,column:3}},115:{start:{line:269,column:4},end:{line:283,column:6}},116:{start:{line:285,column:4},end:{line:299,column:6}},117:{start:{line:301,column:2},end:{line:301,column:141}}},fnMap:{0:{name:"isLiteralExpression",decl:{start:{line:9,column:9},end:{line:9,column:28}},loc:{start:{line:9,column:36},end:{line:11,column:1}},line:9},1:{name:"isGetExpression",decl:{start:{line:12,column:9},end:{line:12,column:24}},loc:{start:{line:12,column:32},end:{line:14,column:1}},line:12},2:{name:"isZoomField",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:28},end:{line:19,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:16,column:168},end:{line:16,column:169}},loc:{start:{line:16,column:178},end:{line:18,column:3}},line:16},4:{name:"isIdentityProperty",decl:{start:{line:20,column:9},end:{line:20,column:27}},loc:{start:{line:20,column:35},end:{line:22,column:1}},line:20},5:{name:"isDataStopProperty",decl:{start:{line:23,column:9},end:{line:23,column:27}},loc:{start:{line:23,column:35},end:{line:27,column:1}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:24,column:168},end:{line:24,column:169}},loc:{start:{line:24,column:178},end:{line:26,column:3}},line:24},7:{name:"isDataField",decl:{start:{line:28,column:9},end:{line:28,column:20}},loc:{start:{line:28,column:28},end:{line:30,column:1}},line:28},8:{name:"isPrimative",decl:{start:{line:31,column:9},end:{line:31,column:20}},loc:{start:{line:31,column:28},end:{line:34,column:1}},line:31},9:{name:"isArrayOfPrimatives",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:37},end:{line:40,column:1}},line:35},10:{name:"getDataType",decl:{start:{line:41,column:9},end:{line:41,column:20}},loc:{start:{line:41,column:44},end:{line:63,column:1}},line:41},11:{name:"(anonymous_11)",decl:{start:{line:64,column:22},end:{line:64,column:23}},loc:{start:{line:64,column:33},end:{line:302,column:1}},line:64},12:{name:"(anonymous_12)",decl:{start:{line:69,column:18},end:{line:69,column:19}},loc:{start:{line:69,column:24},end:{line:73,column:3}},line:69},13:{name:"(anonymous_13)",decl:{start:{line:74,column:31},end:{line:74,column:32}},loc:{start:{line:74,column:46},end:{line:82,column:3}},line:74},14:{name:"(anonymous_14)",decl:{start:{line:83,column:18},end:{line:83,column:19}},loc:{start:{line:83,column:24},end:{line:99,column:3}},line:83},15:{name:"(anonymous_15)",decl:{start:{line:100,column:27},end:{line:100,column:28}},loc:{start:{line:100,column:33},end:{line:104,column:3}},line:100},16:{name:"(anonymous_16)",decl:{start:{line:105,column:21},end:{line:105,column:22}},loc:{start:{line:105,column:34},end:{line:116,column:3}},line:105},17:{name:"(anonymous_17)",decl:{start:{line:117,column:27},end:{line:117,column:28}},loc:{start:{line:117,column:33},end:{line:146,column:3}},line:117},18:{name:"(anonymous_18)",decl:{start:{line:124,column:33},end:{line:124,column:34}},loc:{start:{line:124,column:43},end:{line:126,column:11}},line:124},19:{name:"(anonymous_19)",decl:{start:{line:147,column:25},end:{line:147,column:26}},loc:{start:{line:147,column:31},end:{line:159,column:3}},line:147},20:{name:"(anonymous_20)",decl:{start:{line:160,column:18},end:{line:160,column:19}},loc:{start:{line:160,column:24},end:{line:163,column:3}},line:160},21:{name:"(anonymous_21)",decl:{start:{line:164,column:25},end:{line:164,column:26}},loc:{start:{line:164,column:31},end:{line:175,column:3}},line:164},22:{name:"(anonymous_22)",decl:{start:{line:176,column:27},end:{line:176,column:28}},loc:{start:{line:176,column:33},end:{line:214,column:3}},line:176},23:{name:"(anonymous_23)",decl:{start:{line:187,column:33},end:{line:187,column:34}},loc:{start:{line:187,column:43},end:{line:189,column:11}},line:187},24:{name:"(anonymous_24)",decl:{start:{line:215,column:32},end:{line:215,column:33}},loc:{start:{line:215,column:38},end:{line:226,column:3}},line:215},25:{name:"(anonymous_25)",decl:{start:{line:227,column:24},end:{line:227,column:25}},loc:{start:{line:227,column:30},end:{line:229,column:3}},line:227},26:{name:"(anonymous_26)",decl:{start:{line:230,column:26},end:{line:230,column:27}},loc:{start:{line:230,column:32},end:{line:232,column:3}},line:230}},branchMap:{0:{loc:{start:{line:10,column:9},end:{line:10,column:77}},type:"binary-expr",locations:[{start:{line:10,column:9},end:{line:10,column:29}},{start:{line:10,column:33},end:{line:10,column:51}},{start:{line:10,column:55},end:{line:10,column:77}}],line:10},1:{loc:{start:{line:13,column:9},end:{line:13,column:73}},type:"binary-expr",locations:[{start:{line:13,column:9},end:{line:13,column:29}},{start:{line:13,column:33},end:{line:13,column:51}},{start:{line:13,column:55},end:{line:13,column:73}}],line:13},2:{loc:{start:{line:16,column:9},end:{line:18,column:4}},type:"binary-expr",locations:[{start:{line:16,column:9},end:{line:16,column:34}},{start:{line:16,column:38},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:90}},{start:{line:16,column:94},end:{line:16,column:120}},{start:{line:16,column:124},end:{line:16,column:146}},{start:{line:16,column:150},end:{line:18,column:4}}],line:16},3:{loc:{start:{line:17,column:11},end:{line:17,column:51}},type:"binary-expr",locations:[{start:{line:17,column:11},end:{line:17,column:30}},{start:{line:17,column:34},end:{line:17,column:51}}],line:17},4:{loc:{start:{line:21,column:9},end:{line:21,column:122}},type:"binary-expr",locations:[{start:{line:21,column:9},end:{line:21,column:34}},{start:{line:21,column:38},end:{line:21,column:63}},{start:{line:21,column:67},end:{line:21,column:122}}],line:21},5:{loc:{start:{line:24,column:9},end:{line:26,column:4}},type:"binary-expr",locations:[{start:{line:24,column:9},end:{line:24,column:34}},{start:{line:24,column:38},end:{line:24,column:49}},{start:{line:24,column:53},end:{line:24,column:90}},{start:{line:24,column:94},end:{line:24,column:116}},{start:{line:24,column:120},end:{line:24,column:146}},{start:{line:24,column:150},end:{line:26,column:4}}],line:24},6:{loc:{start:{line:25,column:11},end:{line:25,column:82}},type:"binary-expr",locations:[{start:{line:25,column:11},end:{line:25,column:30}},{start:{line:25,column:34},end:{line:25,column:51}},{start:{line:25,column:55},end:{line:25,column:82}}],line:25},7:{loc:{start:{line:29,column:9},end:{line:29,column:63}},type:"binary-expr",locations:[{start:{line:29,column:9},end:{line:29,column:34}},{start:{line:29,column:38},end:{line:29,column:63}}],line:29},8:{loc:{start:{line:36,column:2},end:{line:38,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:38,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},9:{loc:{start:{line:41,column:28},end:{line:41,column:42}},type:"default-arg",locations:[{start:{line:41,column:40},end:{line:41,column:42}}],line:41},10:{loc:{start:{line:42,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:62,column:3}},{start:{line:44,column:9},end:{line:62,column:3}}],line:42},11:{loc:{start:{line:44,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:44,column:9},end:{line:62,column:3}},{start:{line:46,column:9},end:{line:62,column:3}}],line:44},12:{loc:{start:{line:46,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:46,column:9},end:{line:62,column:3}},{start:{line:48,column:9},end:{line:62,column:3}}],line:46},13:{loc:{start:{line:46,column:13},end:{line:46,column:69}},type:"binary-expr",locations:[{start:{line:46,column:13},end:{line:46,column:39}},{start:{line:46,column:43},end:{line:46,column:69}}],line:46},14:{loc:{start:{line:48,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:48,column:9},end:{line:62,column:3}},{start:{line:50,column:9},end:{line:62,column:3}}],line:48},15:{loc:{start:{line:48,column:13},end:{line:48,column:75}},type:"binary-expr",locations:[{start:{line:48,column:13},end:{line:48,column:45}},{start:{line:48,column:49},end:{line:48,column:75}}],line:48},16:{loc:{start:{line:50,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:50,column:9},end:{line:62,column:3}},{start:{line:52,column:9},end:{line:62,column:3}}],line:50},17:{loc:{start:{line:52,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:52,column:9},end:{line:62,column:3}},{start:{line:54,column:9},end:{line:62,column:3}}],line:52},18:{loc:{start:{line:54,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:54,column:9},end:{line:62,column:3}},{start:{line:56,column:9},end:{line:62,column:3}}],line:54},19:{loc:{start:{line:56,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:56,column:9},end:{line:62,column:3}},{start:{line:58,column:9},end:{line:62,column:3}}],line:56},20:{loc:{start:{line:58,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:58,column:9},end:{line:62,column:3}},{start:{line:60,column:9},end:{line:62,column:3}}],line:58},21:{loc:{start:{line:70,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:70,column:4},end:{line:72,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:70},22:{loc:{start:{line:75,column:4},end:{line:77,column:5}},type:"if",locations:[{start:{line:75,column:4},end:{line:77,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},23:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},24:{loc:{start:{line:86,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:93,column:5}},{start:{line:91,column:11},end:{line:93,column:5}}],line:86},25:{loc:{start:{line:112,column:4},end:{line:114,column:5}},type:"if",locations:[{start:{line:112,column:4},end:{line:114,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:112},26:{loc:{start:{line:120,column:4},end:{line:144,column:5}},type:"if",locations:[{start:{line:120,column:4},end:{line:144,column:5}},{start:{line:137,column:11},end:{line:144,column:5}}],line:120},27:{loc:{start:{line:121,column:6},end:{line:136,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:136,column:7}},{start:{line:128,column:13},end:{line:136,column:7}}],line:121},28:{loc:{start:{line:125,column:34},end:{line:125,column:81}},type:"binary-expr",locations:[{start:{line:125,column:34},end:{line:125,column:41}},{start:{line:125,column:45},end:{line:125,column:81}}],line:125},29:{loc:{start:{line:140,column:14},end:{line:140,column:59}},type:"binary-expr",locations:[{start:{line:140,column:14},end:{line:140,column:19}},{start:{line:140,column:23},end:{line:140,column:59}}],line:140},30:{loc:{start:{line:141,column:15},end:{line:141,column:60}},type:"binary-expr",locations:[{start:{line:141,column:15},end:{line:141,column:20}},{start:{line:141,column:24},end:{line:141,column:60}}],line:141},31:{loc:{start:{line:149,column:4},end:{line:158,column:5}},type:"if",locations:[{start:{line:149,column:4},end:{line:158,column:5}},{start:{line:155,column:11},end:{line:158,column:5}}],line:149},32:{loc:{start:{line:155,column:11},end:{line:158,column:5}},type:"if",locations:[{start:{line:155,column:11},end:{line:158,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:155},33:{loc:{start:{line:162,column:11},end:{line:162,column:139}},type:"binary-expr",locations:[{start:{line:162,column:11},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:63}},{start:{line:162,column:67},end:{line:162,column:85}},{start:{line:162,column:89},end:{line:162,column:109}},{start:{line:162,column:113},end:{line:162,column:139}}],line:162},34:{loc:{start:{line:167,column:4},end:{line:173,column:5}},type:"if",locations:[{start:{line:167,column:4},end:{line:173,column:5}},{start:{line:169,column:11},end:{line:173,column:5}}],line:167},35:{loc:{start:{line:167,column:8},end:{line:167,column:53}},type:"binary-expr",locations:[{start:{line:167,column:8},end:{line:167,column:33}},{start:{line:167,column:37},end:{line:167,column:53}}],line:167},36:{loc:{start:{line:169,column:11},end:{line:173,column:5}},type:"if",locations:[{start:{line:169,column:11},end:{line:173,column:5}},{start:{line:171,column:11},end:{line:173,column:5}}],line:169},37:{loc:{start:{line:172,column:31},end:{line:172,column:63}},type:"binary-expr",locations:[{start:{line:172,column:31},end:{line:172,column:36}},{start:{line:172,column:40},end:{line:172,column:63}}],line:172},38:{loc:{start:{line:178,column:22},end:{line:178,column:61}},type:"cond-expr",locations:[{start:{line:178,column:55},end:{line:178,column:57}},{start:{line:178,column:60},end:{line:178,column:61}}],line:178},39:{loc:{start:{line:181,column:4},end:{line:212,column:5}},type:"if",locations:[{start:{line:181,column:4},end:{line:212,column:5}},{start:{line:202,column:11},end:{line:212,column:5}}],line:181},40:{loc:{start:{line:182,column:6},end:{line:201,column:7}},type:"if",locations:[{start:{line:182,column:6},end:{line:201,column:7}},{start:{line:191,column:13},end:{line:201,column:7}}],line:182},41:{loc:{start:{line:188,column:57},end:{line:188,column:104}},type:"binary-expr",locations:[{start:{line:188,column:57},end:{line:188,column:64}},{start:{line:188,column:68},end:{line:188,column:104}}],line:188},42:{loc:{start:{line:208,column:42},end:{line:208,column:93}},type:"binary-expr",locations:[{start:{line:208,column:42},end:{line:208,column:53}},{start:{line:208,column:57},end:{line:208,column:93}}],line:208},43:{loc:{start:{line:209,column:43},end:{line:209,column:94}},type:"binary-expr",locations:[{start:{line:209,column:43},end:{line:209,column:54}},{start:{line:209,column:58},end:{line:209,column:94}}],line:209},44:{loc:{start:{line:233,column:20},end:{line:233,column:120}},type:"cond-expr",locations:[{start:{line:233,column:62},end:{line:233,column:89}},{start:{line:233,column:92},end:{line:233,column:120}}],line:233},45:{loc:{start:{line:235,column:2},end:{line:300,column:3}},type:"if",locations:[{start:{line:235,column:2},end:{line:300,column:3}},{start:{line:252,column:9},end:{line:300,column:3}}],line:235},46:{loc:{start:{line:252,column:9},end:{line:300,column:3}},type:"if",locations:[{start:{line:252,column:9},end:{line:300,column:3}},{start:{line:268,column:9},end:{line:300,column:3}}],line:252},47:{loc:{start:{line:268,column:9},end:{line:300,column:3}},type:"if",locations:[{start:{line:268,column:9},end:{line:300,column:3}},{start:{line:284,column:9},end:{line:300,column:3}}],line:268}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0,0],1:[0,0,0],2:[0,0,0,0,0,0],3:[0,0],4:[0,0,0],5:[0,0,0,0,0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0,0,0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx"],names:[],mappings:"AAiVM;AAjVN,OAAO,WAAW;AAElB,OAAO,kBAAkB;AACzB,OAAO,kBAAiC;AACxC,OAAO,kBAAkB;AACzB,OAAO,wBAAwB;AAC/B,SAAQ,YAAY,qBAAoB;AACxC,SAAQ,2BAA0B;AAIlC,SAAS,oBAAoB,OAAY;AACvC,SAAQ,MAAM,QAAQ,KAAK,KAAK,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM;AACrE;AAEA,SAAS,gBAAgB,OAAY;AACnC,SACE,MAAM,QAAQ,KAAK,KACnB,MAAM,WAAW,KACjB,MAAM,CAAC,MAAM;AAEjB;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,SAAS,KACrB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW;AAAA,EAEpB,CAAC;AAEL;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SAAS,cACf,OAAO,UAAU,eAAe,KAAK,OAAO,UAAU;AAE1D;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,MAAM,SAAS,KACrB,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW,KAChB,OAAO,KAAK,CAAC,MAAO;AAAA,EAExB,CAAC;AAEL;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,mBAAmB,KAAK,KACxB,mBAAmB,KAAK;AAE5B;AAEA,SAAS,YAAY,OAAgD;AACnE,QAAM,QAAQ,CAAC,UAAU,WAAW,QAAQ;AAC5C,SAAO,MAAM,SAAS,OAAO,KAAM;AACrC;AAEA,SAAS,oBAAoB,QAAyD;AACpF,MAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,WAAO,OAAO,MAAM,WAAW;AAAA,EACjC;AACA,SAAO;AACT;AAEA,SAAS,YAAY,OAAY,YAAU,CAAC,GAAU;AACpD,MAAI,UAAU,QAAW;AACvB,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW,oBAAoB,KAAK,GAAG;AACjE,WAAO;AAAA,EACT,WACS,UAAU,SAAS,iBAAiB,oBAAoB,KAAK,GAAG;AACvE,WAAO;AAAA,EACT,WACS,UAAU,SAAS,cAAc;AACxC,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW;AACrC,WAAO;AAAA,EACT,WACS,UAAU,SAAS,kCAAkC;AAC5D,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAgBA,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,UAAU,WAAW,IAAI,MAAM;AAAA,IACpC,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,EAC1C;AACA,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,KAAK;AAEtD,QAAM,UAAU,MAAM;AACpB,QAAI,CAAC,WAAW;AACd,kBAAY,YAAY,MAAM,OAAO,MAAM,SAAS,CAAC;AAAA,IACvD;AAAA,EACF,GAAG,CAAC,MAAM,OAAO,MAAM,WAAW,SAAS,CAAC;AAE5C,QAAM,uBAAuB,CAAC,cAAmB;AAC/C,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,QAAI,OAAO,SAAS,CAAC,MAAM,UAAU;AACnC,YAAM,KAAK;AAAA,QACT,EAAE,MAAM,SAAS,CAAC,EAAE,OAAO,GAAG,OAAO,SAAS,CAAC,EAAE,MAAM;AAAA,QACvD,SAAS,CAAC;AAAA,MACZ,CAAC;AAAA,IACH,OAAO;AACL,YAAM,KAAK,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;AAAA,IAC3C;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,WAAW,UAAU,IAAI;AACjC,UAAM,SAAS,WAAW,UAAU,OAAO;AAC3C,gBAAY,OAAO;AAAA,EACrB;AAEA,QAAM,aAAa,CAAC,YAAoB;AACtC,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,OAAO,SAAS,CAAC;AAEvB,QAAI,eAAoB;AAAA,MACtB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,QAAI,MAAM,WAAW,GAAG;AACtB,qBAAe,MAAM,CAAC,EAAE,CAAC;AAAA,IAC3B;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,MAAM,IAAI;AAElB,QAAI;AACJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,KAAK,CAAC,EAAE,MAAM,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACxC,CAAC,IAAI,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC3C;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,OAAO;AAAA,UACL,CAAC,GAAG,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACjD,CAAC,IAAI,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACpD;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAE7B,QAAI,gBAAgB,KAAK,GAAG;AAC1B,YAAM,SAAS,WAAW;AAAA,QACxB,MAAM;AAAA,QACN,UAAU,MAAM,CAAC;AAAA,MACnB,CAAC;AACD,kBAAY,OAAO;AAAA,IACrB,WAAW,oBAAoB,KAAK,GAAG;AACrC,YAAM,SAAS,WAAW,MAAM,CAAC,CAAC;AAClC,kBAAY,OAAO;AAAA,IACrB;AAAA,EACF;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,WACE,gBAAgB,KAAK,KACrB,oBAAoB,KAAK,KACzB,YAAY,KAAK,KAChB,MAAM,QAAQ,KAAK,KAAK,UAAU,SAAS;AAAA,EAEhD;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAI;AAEJ,QAAI,OAAO,UAAU,YAAY,WAAW,OAAO;AACjD,mBAAa,cAAc,gBAAgB,OAAO,SAAS;AAAA,IAC7D,WAAW,mBAAmB,KAAK,GAAG;AACpC,mBAAa,CAAC,OAAO,MAAM,QAAQ;AAAA,IACrC,OAAO;AACL,mBAAa,CAAC,WAAW,SAAS,MAAM,UAAU,OAAO;AAAA,IAC3D;AACA,UAAM,SAAS,MAAM,WAAW,UAAU;AAAA,EAC5C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,eAAe,qBAAqB,MAAM,SAAS;AACzD,UAAM,YAAY,iBAAiB,gBAAgB,KAAK;AACxD,UAAM,EAAE,MAAM,IAAI;AAClB,QAAI;AAEJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,EAAE,MAAM,KAAK,CAAC,GAAG,OAAO,UAAU,GAAG,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC9F,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACpE,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,UAAU;AAAA,QACV,MAAM;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,OAAO;AAAA,UACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACnF,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACtF;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,wBAAwB,MAAM;AAClC,UAAM,aAAa;AAAA,MACjB;AAAA,MACA,CAAC,QAAQ;AAAA,MACT,CAAC,WAAW;AAAA,MACZ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,UAAU;AAAA,EAC5C;AAEA,QAAM,gBAAgB,MAAM;AAC1B,iBAAa,IAAI;AAAA,EACnB;AAEA,QAAM,kBAAkB,MAAM;AAC5B,iBAAa,KAAK;AAAA,EACpB;AAEA,QAAM,YACJ,MAAM,UAAU,YAAY,MAAM,QAAQ,8BAA8B;AAE1E,MAAI;AAEJ,MAAI,aAAa,cAAc;AAC7B,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,MAAM,MAAM,SAAS;AAAA,QACnD;AAAA,QACA,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,SAAS;AAAA,QACT,QAAQ;AAAA;AAAA,IACV;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,OAAO;AACL,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,aAAa;AAAA,QACb,aAAa;AAAA,QACb,mBAAmB;AAAA,QACnB,kBAAkB;AAAA;AAAA,IACpB;AAAA,EAEJ;AAEA,SACE,oBAAC,SAAI,WAAW,WAAW,eAAa,0BAA0B,MAAM,WACrE,qBACH;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cec93a709e0799aecc929100cb853febe363652d"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return mt=function(){return s},s}mt();function TV(n){return mt().f[0]++,mt().s[0]++,mt().b[0][0]++,Array.isArray(n)&&(mt().b[0][1]++,n.length===2)&&(mt().b[0][2]++,n[0]==="literal")}function RV(n){return mt().f[1]++,mt().s[1]++,mt().b[1][0]++,Array.isArray(n)&&(mt().b[1][1]++,n.length===2)&&(mt().b[1][2]++,n[0]==="get")}function qRe(n){return mt().f[2]++,mt().s[2]++,mt().b[2][0]++,typeof n=="object"&&(mt().b[2][1]++,n.stops)&&(mt().b[2][2]++,typeof n.property>"u")&&(mt().b[2][3]++,Array.isArray(n.stops))&&(mt().b[2][4]++,n.stops.length>1)&&(mt().b[2][5]++,n.stops.every(e=>(mt().f[3]++,mt().s[3]++,mt().b[3][0]++,Array.isArray(e)&&(mt().b[3][1]++,e.length===2))))}function Jse(n){return mt().f[4]++,mt().s[4]++,mt().b[4][0]++,typeof n=="object"&&(mt().b[4][1]++,n.type==="identity")&&(mt().b[4][2]++,Object.prototype.hasOwnProperty.call(n,"property"))}function YRe(n){return mt().f[5]++,mt().s[5]++,mt().b[5][0]++,typeof n=="object"&&(mt().b[5][1]++,n.stops)&&(mt().b[5][2]++,typeof n.property<"u")&&(mt().b[5][3]++,n.stops.length>1)&&(mt().b[5][4]++,Array.isArray(n.stops))&&(mt().b[5][5]++,n.stops.every(e=>(mt().f[6]++,mt().s[6]++,mt().b[6][0]++,Array.isArray(e)&&(mt().b[6][1]++,e.length===2)&&(mt().b[6][2]++,typeof e[0]=="object"))))}function $Re(n){return mt().f[7]++,mt().s[7]++,mt().b[7][0]++,Jse(n)||(mt().b[7][1]++,YRe(n))}function EL(n){mt().f[8]++;const e=(mt().s[8]++,["string","boolean","number"]);return mt().s[9]++,e.includes(typeof n)}function DV(n){return mt().f[9]++,mt().s[10]++,Array.isArray(n)?(mt().b[8][0]++,mt().s[11]++,n.every(EL)):(mt().b[8][1]++,mt().s[12]++,!1)}function PV(n,e=(mt().b[9][0]++,{})){return mt().f[10]++,mt().s[13]++,n===void 0?(mt().b[10][0]++,mt().s[14]++,"value"):(mt().b[10][1]++,mt().s[15]++,EL(n)?(mt().b[11][0]++,mt().s[16]++,"value"):(mt().b[11][1]++,mt().s[17]++,mt().b[13][0]++,e.type==="array"&&(mt().b[13][1]++,DV(n))?(mt().b[12][0]++,mt().s[18]++,"value"):(mt().b[12][1]++,mt().s[19]++,mt().b[15][0]++,e.type==="numberArray"&&(mt().b[15][1]++,DV(n))?(mt().b[14][0]++,mt().s[20]++,"value"):(mt().b[14][1]++,mt().s[21]++,e.type==="colorArray"?(mt().b[16][0]++,mt().s[22]++,"value"):(mt().b[16][1]++,mt().s[23]++,e.type==="padding"?(mt().b[17][0]++,mt().s[24]++,"value"):(mt().b[17][1]++,mt().s[25]++,e.type==="variableAnchorOffsetCollection"?(mt().b[18][0]++,mt().s[26]++,"value"):(mt().b[18][1]++,mt().s[27]++,qRe(n)?(mt().b[19][0]++,mt().s[28]++,"zoom_function"):(mt().b[19][1]++,mt().s[29]++,$Re(n)?(mt().b[20][0]++,mt().s[30]++,"data_function"):(mt().b[20][1]++,mt().s[31]++,"expression")))))))))}mt().s[32]++;const VRe=n=>{mt().f[11]++;const[e,t]=(mt().s[33]++,On.useState(PV(n.value,n.fieldSpec))),[i,r]=(mt().s[34]++,On.useState(!1));mt().s[35]++,On.useEffect(()=>{mt().f[12]++,mt().s[36]++,i?mt().b[21][1]++:(mt().b[21][0]++,mt().s[37]++,t(PV(n.value,n.fieldSpec)))},[n.value,n.fieldSpec,i]),mt().s[38]++;const o=V=>(mt().f[13]++,mt().s[39]++,V.expression.interpolated?(mt().b[22][0]++,mt().s[40]++,"exponential"):(mt().b[22][1]++,mt().s[41]++,V.type==="number"?(mt().b[23][0]++,mt().s[42]++,"interval"):(mt().b[23][1]++,mt().s[43]++,"categorical")));mt().s[44]++;const s=()=>{mt().f[14]++;const V=(mt().s[45]++,n.value.stops.slice(0)),H=(mt().s[46]++,V[V.length-1]);mt().s[47]++,typeof H[0]=="object"?(mt().b[24][0]++,mt().s[48]++,V.push([{zoom:H[0].zoom+1,value:H[0].value},H[1]])):(mt().b[24][1]++,mt().s[49]++,V.push([H[0]+1,H[1]]));const G=(mt().s[50]++,{...n.value,stops:V});mt().s[51]++,n.onChange(n.fieldName,G)};mt().s[52]++;const a=()=>{mt().f[15]++;const{fieldSpec:V,fieldName:H}=(mt().s[53]++,n);mt().s[54]++,n.onChange(H,V.default),mt().s[55]++,t("value")};mt().s[56]++;const c=V=>{mt().f[16]++;const H=(mt().s[57]++,n.value.stops.slice(0));mt().s[58]++,H.splice(V,1);let G=(mt().s[59]++,{...n.value,stops:H});mt().s[60]++,H.length===1?(mt().b[25][0]++,mt().s[61]++,G=H[0][1]):mt().b[25][1]++,mt().s[62]++,n.onChange(n.fieldName,G)};mt().s[63]++;const h=()=>{mt().f[17]++;const{value:V}=(mt().s[64]++,n);let H;mt().s[65]++,typeof V=="object"?(mt().b[26][0]++,mt().s[66]++,V.stops?(mt().b[27][0]++,mt().s[67]++,H={base:V.base,stops:V.stops.map(G=>(mt().f[18]++,mt().s[68]++,[G[0].zoom,(mt().b[28][0]++,G[1]||(mt().b[28][1]++,Zf(n.fieldSpec)))]))}):(mt().b[27][1]++,mt().s[69]++,H={base:V.base,stops:[[6,Zf(n.fieldSpec)],[10,Zf(n.fieldSpec)]]})):(mt().b[26][1]++,mt().s[70]++,H={stops:[[6,(mt().b[29][0]++,V||(mt().b[29][1]++,Zf(n.fieldSpec)))],[10,(mt().b[30][0]++,V||(mt().b[30][1]++,Zf(n.fieldSpec)))]]}),mt().s[71]++,n.onChange(n.fieldName,H)};mt().s[72]++;const m=()=>{mt().f[19]++;const{value:V,fieldName:H}=(mt().s[73]++,n);mt().s[74]++,RV(V)?(mt().b[31][0]++,mt().s[75]++,n.onChange(H,{type:"identity",property:V[1]}),mt().s[76]++,t("value")):(mt().b[31][1]++,mt().s[77]++,TV(V)?(mt().b[32][0]++,mt().s[78]++,n.onChange(H,V[1]),mt().s[79]++,t("value")):mt().b[32][1]++)};mt().s[80]++;const y=()=>{mt().f[20]++;const{value:V,fieldSpec:H}=(mt().s[81]++,n);return mt().s[82]++,mt().b[33][0]++,RV(V)||(mt().b[33][1]++,TV(V))||(mt().b[33][2]++,EL(V))||(mt().b[33][3]++,Array.isArray(V)&&(mt().b[33][4]++,H.type==="array"))};mt().s[83]++;const M=()=>{mt().f[21]++;const{value:V,fieldSpec:H}=(mt().s[84]++,n);let G;mt().s[85]++,mt().b[35][0]++,typeof V=="object"&&(mt().b[35][1]++,"stops"in V)?(mt().b[34][0]++,mt().s[86]++,G=lde.convertFunction(V,H)):(mt().b[34][1]++,mt().s[87]++,Jse(V)?(mt().b[36][0]++,mt().s[88]++,G=["get",V.property]):(mt().b[36][1]++,mt().s[89]++,G=["literal",(mt().b[37][0]++,V||(mt().b[37][1]++,n.fieldSpec.default))])),mt().s[90]++,n.onChange(n.fieldName,G)};mt().s[91]++;const x=()=>{mt().f[22]++;const V=(mt().s[92]++,o(n.fieldSpec)),H=(mt().s[93]++,V==="categorical"?(mt().b[38][0]++,""):(mt().b[38][1]++,0)),{value:G}=(mt().s[94]++,n);let Y;mt().s[95]++,typeof G=="object"?(mt().b[39][0]++,mt().s[96]++,G.stops?(mt().b[40][0]++,mt().s[97]++,Y={property:"",type:V,base:G.base,stops:G.stops.map(z=>(mt().f[23]++,mt().s[98]++,[{zoom:z[0],value:H},(mt().b[41][0]++,z[1]||(mt().b[41][1]++,Zf(n.fieldSpec)))]))}):(mt().b[40][1]++,mt().s[99]++,Y={property:"",type:V,base:G.base,stops:[[{zoom:6,value:H},Zf(n.fieldSpec)],[{zoom:10,value:H},Zf(n.fieldSpec)]]})):(mt().b[39][1]++,mt().s[100]++,Y={property:"",type:V,base:G.base,stops:[[{zoom:6,value:H},(mt().b[42][0]++,n.value||(mt().b[42][1]++,Zf(n.fieldSpec)))],[{zoom:10,value:H},(mt().b[43][0]++,n.value||(mt().b[43][1]++,Zf(n.fieldSpec)))]]}),mt().s[101]++,n.onChange(n.fieldName,Y)};mt().s[102]++;const k=()=>{mt().f[24]++;const V=(mt().s[103]++,["interpolate",["linear"],["elevation"],0,"black",2e3,"white"]);mt().s[104]++,n.onChange(n.fieldName,V)};mt().s[105]++;const P=()=>{mt().f[25]++,mt().s[106]++,r(!0)};mt().s[107]++;const F=()=>{mt().f[26]++,mt().s[108]++,r(!1)},j=(mt().s[109]++,n.fieldSpec.default===n.value?(mt().b[44][0]++,"maputnik-default-property"):(mt().b[44][1]++,"maputnik-modified-property"));let q;return mt().s[110]++,e==="expression"?(mt().b[45][0]++,mt().s[111]++,q=ie.jsx(fse,{errors:n.errors,onChange:n.onChange.bind(null,n.fieldName),canUndo:y,onUndo:m,onDelete:a,fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onFocus:P,onBlur:F})):(mt().b[45][1]++,mt().s[112]++,e==="zoom_function"?(mt().b[46][0]++,mt().s[113]++,q=ie.jsx(QRe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:c,onAddStop:s,onChangeToDataFunction:x,onExpressionClick:M})):(mt().b[46][1]++,mt().s[114]++,e==="data_function"?(mt().b[47][0]++,mt().s[115]++,q=ie.jsx(GRe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:c,onAddStop:s,onChangeToZoomFunction:h,onExpressionClick:M})):(mt().b[47][1]++,mt().s[116]++,q=ie.jsx(zRe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onZoomClick:h,onDataClick:x,onExpressionClick:M,onElevationClick:k})))),mt().s[117]++,ie.jsx("div",{className:j,"data-wd-key":"spec-field-container:"+n.fieldName,children:q})};function Nr(){var n="/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",e="2b5da791871b9b38760c659b15188ae0aee85eaa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",statementMap:{0:{start:{line:4,column:23},end:{line:4,column:117}},1:{start:{line:6,column:20},end:{line:6,column:60}},2:{start:{line:7,column:16},end:{line:7,column:49}},3:{start:{line:8,column:20},end:{line:8,column:36}},4:{start:{line:9,column:2},end:{line:14,column:3}},5:{start:{line:10,column:4},end:{line:13,column:6}},6:{start:{line:15,column:2},end:{line:20,column:3}},7:{start:{line:16,column:4},end:{line:19,column:6}},8:{start:{line:21,column:2},end:{line:21,column:19}},9:{start:{line:24,column:16},end:{line:24,column:48}},10:{start:{line:25,column:2},end:{line:25,column:49}},11:{start:{line:28,column:21},end:{line:31,column:3}},12:{start:{line:29,column:18},end:{line:29,column:80}},13:{start:{line:30,column:4},end:{line:30,column:51}},14:{start:{line:33,column:23},end:{line:33,column:33}},15:{start:{line:34,column:19},end:{line:52,column:6}},16:{start:{line:35,column:24},end:{line:35,column:87}},17:{start:{line:36,column:20},end:{line:36,column:48}},18:{start:{line:37,column:21},end:{line:37,column:50}},19:{start:{line:38,column:25},end:{line:38,column:82}},20:{start:{line:39,column:24},end:{line:39,column:63}},21:{start:{line:40,column:6},end:{line:51,column:8}},22:{start:{line:53,column:4},end:{line:53,column:98}}},fnMap:{0:{name:"getFieldSpec",decl:{start:{line:5,column:9},end:{line:5,column:21}},loc:{start:{line:5,column:50},end:{line:22,column:1}},line:5},1:{name:"getGroupName",decl:{start:{line:23,column:9},end:{line:23,column:21}},loc:{start:{line:23,column:50},end:{line:26,column:1}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:28,column:21},end:{line:28,column:22}},loc:{start:{line:28,column:45},end:{line:31,column:3}},line:28},3:{name:"(anonymous_3)",decl:{start:{line:32,column:2},end:{line:32,column:3}},loc:{start:{line:32,column:11},end:{line:54,column:3}},line:32},4:{name:"(anonymous_4)",decl:{start:{line:34,column:46},end:{line:34,column:47}},loc:{start:{line:34,column:61},end:{line:52,column:5}},line:34}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},1:{loc:{start:{line:15,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:24,column:16},end:{line:24,column:48}},type:"binary-expr",locations:[{start:{line:24,column:16},end:{line:24,column:42}},{start:{line:24,column:46},end:{line:24,column:48}}],line:24},3:{loc:{start:{line:25,column:9},end:{line:25,column:48}},type:"cond-expr",locations:[{start:{line:25,column:30},end:{line:25,column:37}},{start:{line:25,column:40},end:{line:25,column:48}}],line:25},4:{loc:{start:{line:36,column:20},end:{line:36,column:48}},type:"binary-expr",locations:[{start:{line:36,column:20},end:{line:36,column:42}},{start:{line:36,column:46},end:{line:36,column:48}}],line:36},5:{loc:{start:{line:37,column:21},end:{line:37,column:50}},type:"binary-expr",locations:[{start:{line:37,column:21},end:{line:37,column:44}},{start:{line:37,column:48},end:{line:37,column:50}}],line:37},6:{loc:{start:{line:38,column:25},end:{line:38,column:82}},type:"cond-expr",locations:[{start:{line:38,column:46},end:{line:38,column:62}},{start:{line:38,column:65},end:{line:38,column:82}}],line:38},7:{loc:{start:{line:39,column:24},end:{line:39,column:63}},type:"cond-expr",locations:[{start:{line:39,column:45},end:{line:39,column:52}},{start:{line:39,column:55},end:{line:39,column:63}}],line:39}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx"],names:[],mappings:"AA4Da;AA5Db,OAAO,WAAW;AAElB,OAAO,mBAAmB;AAI1B,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AAIpH,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,YAAY,aAAa,MAAM,WAAW,SAAS;AACzD,QAAM,QAAQ,KAAK,YAAY,MAAM,SAAS;AAC9C,QAAM,YAAY,MAAM,SAAS;AACjC,MAAG,eAAe,QAAQ,SAAS,KAAK,GAAG;AACzC,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,MAAG,cAAc,aAAa;AAC5B,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,aAAa,MAAW,WAAuC,WAAuC;AAC7G,QAAM,QAAQ,KAAK,WAAW,SAAS,KAAK,CAAC;AAC7C,SAAQ,aAAa,QAAS,UAAU;AAC1C;AAUA,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,mBAAmB,CAAC,UAAkB,aAAkB;AACtD,UAAM,QAAQ,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,QAAQ;AAC3E,SAAK,MAAM,SAAS,OAAO,UAAU,QAAQ;AAAA,EAC/C;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAM,IAAI,KAAK;AACtB,UAAM,SAAS,KAAK,MAAM,YAAY,IAAI,eAAa;AACrD,YAAM,YAAY,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,SAAS;AAEhF,YAAM,QAAQ,KAAK,MAAM,MAAM,SAAS,CAAC;AACzC,YAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAC3C,YAAM,aAAa,aAAa,QAC5B,MAAM,SAA+B,IACrC,OAAO,SAAgC;AAC3C,YAAM,YAAY,aAAa,QAAQ,UAAU;AAEjD,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,UAAU,KAAK;AAAA,UAEf;AAAA,UACA,OAAO;AAAA,UACP;AAAA,UACA;AAAA;AAAA,QAJK;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,2BACnB,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2b5da791871b9b38760c659b15188ae0aee85eaa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Nr=function(){return s},s}Nr();const HRe=(Nr().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);function ZRe(n,e,t){Nr().f[0]++;const i=(Nr().s[1]++,eae(n,e,t)),r=(Nr().s[2]++,n[i+"_"+e]),o=(Nr().s[3]++,r[t]);return Nr().s[4]++,HRe.indexOf(t)>=0?(Nr().b[0][0]++,Nr().s[5]++,{...o,values:n.$root.sprite.values}):(Nr().b[0][1]++,Nr().s[6]++,t==="text-font"?(Nr().b[1][0]++,Nr().s[7]++,{...o,values:n.$root.glyphs.values}):(Nr().b[1][1]++,Nr().s[8]++,o))}function eae(n,e,t){Nr().f[1]++;const i=(Nr().s[9]++,Nr().b[2][0]++,n["paint_"+e]||(Nr().b[2][1]++,{}));return Nr().s[10]++,t in i?(Nr().b[3][0]++,"paint"):(Nr().b[3][1]++,"layout")}class XRe extends On.Component{onPropertyChange=(Nr().s[11]++,(e,t)=>{Nr().f[2]++;const i=(Nr().s[12]++,eae(this.props.spec,this.props.layer.type,e));Nr().s[13]++,this.props.onChange(i,e,t)});render(){Nr().f[3]++;const{errors:e}=(Nr().s[14]++,this.props),t=(Nr().s[15]++,this.props.groupFields.map(i=>{Nr().f[4]++;const r=(Nr().s[16]++,ZRe(this.props.spec,this.props.layer.type,i)),o=(Nr().s[17]++,Nr().b[4][0]++,this.props.layer.paint||(Nr().b[4][1]++,{})),s=(Nr().s[18]++,Nr().b[5][0]++,this.props.layer.layout||(Nr().b[5][1]++,{})),a=(Nr().s[19]++,i in o?(Nr().b[6][0]++,o[i]):(Nr().b[6][1]++,s[i])),c=(Nr().s[20]++,i in o?(Nr().b[7][0]++,"paint"):(Nr().b[7][1]++,"layout"));return Nr().s[21]++,ie.jsx(VRe,{errors:e,onChange:this.onPropertyChange,fieldName:i,value:a,fieldType:c,fieldSpec:r},i)}));return Nr().s[22]++,ie.jsx("div",{className:"maputnik-property-group",children:t})}}function D_(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",e="6c9e07ebeb2e5c7112c0b70e483a0c61cf0ea981",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",statementMap:{0:{start:{line:12,column:4},end:{line:27,column:9}},1:{start:{line:18,column:27},end:{line:18,column:74}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:11},end:{line:28,column:3}},line:11},1:{name:"(anonymous_1)",decl:{start:{line:18,column:19},end:{line:18,column:20}},loc:{start:{line:18,column:27},end:{line:18,column:74}},line:18}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx"],names:[],mappings:"AA2BQ,SACE,KADF;AA3BR,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAC7C;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAaP,qBAAqB,yBAAyB,MAAM,UAAiC;AAAA,EACnF,SAAS;AACP,WAAO,qBAAC,iBAAc,MAAM,KAAK,MAAM,IACrC;AAAA;AAAA,QAAC;AAAA;AAAA,UAAqB,WAAU;AAAA,UAC9B,eAAa,wBAAsB,KAAK,MAAM,aAAa;AAAA,UAC3D,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,UAE7D,+BAAC,uBAAoB,WAAU,uCAC7B;AAAA,gCAAC,UAAK,OAAO,EAAC,UAAU,GAAG,cAAc,SAAQ,GAAI,eAAK,MAAM,OAAM;AAAA,YACtE,oBAAC,iBAAc,MAAM,OAAO,WAAU,2FAA0F;AAAA,YAChI,oBAAC,mBAAgB,MAAM,OAAO,WAAU,6FAA4F;AAAA,aACtI;AAAA;AAAA,MACF;AAAA,MACA,oBAAC,sBACE,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6c9e07ebeb2e5c7112c0b70e483a0c61cf0ea981"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return D_=function(){return s},s}D_();class JRe extends On.Component{render(){return D_().f[0]++,D_().s[0]++,ie.jsxs(cse,{uuid:this.props.id,children:[ie.jsx(dse,{className:"maputnik-layer-editor-group","data-wd-key":"layer-editor-group:"+this.props["data-wd-key"],onClick:e=>(D_().f[1]++,D_().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:ie.jsxs(Ike,{className:"maputnik-layer-editor-group__button",children:[ie.jsx("span",{style:{flexGrow:1,alignContent:"center"},children:this.props.title}),ie.jsx(YX,{size:"2em",className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--up"}),ie.jsx(qX,{size:"2em",className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--down"})]})}),ie.jsx(Dke,{children:this.props.children})]})}}function Tb(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",e="331998a9ac6b18663bcbca1301c32952f465e1af",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"331998a9ac6b18663bcbca1301c32952f465e1af"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Tb=function(){return s},s}Tb();Tb().s[0]++;const eDe=n=>{Tb().f[0]++;const e=(Tb().s[1]++,n.t);return Tb().s[2]++,ie.jsx(Gs,{label:e("Min Zoom"),fieldSpec:Jr.layer.minzoom,error:n.error,"data-wd-key":"min-zoom",children:ie.jsx(m1,{allowRange:!0,value:n.value,onChange:n.onChange,min:Jr.layer.minzoom.minimum,max:Jr.layer.minzoom.maximum,default:Jr.layer.minzoom.minimum,"data-wd-key":"min-zoom.input"})})},tDe=(Tb().s[3]++,$o()(eDe));function Rb(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",e="030101242d82e9c9c34c00cb0f1ee3a368ba29e3",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"030101242d82e9c9c34c00cb0f1ee3a368ba29e3"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Rb=function(){return s},s}Rb();Rb().s[0]++;const nDe=n=>{Rb().f[0]++;const e=(Rb().s[1]++,n.t);return Rb().s[2]++,ie.jsx(Gs,{label:e("Max Zoom"),fieldSpec:Jr.layer.maxzoom,error:n.error,"data-wd-key":"max-zoom",children:ie.jsx(m1,{allowRange:!0,value:n.value,onChange:n.onChange,min:Jr.layer.maxzoom.minimum,max:Jr.layer.maxzoom.maximum,default:Jr.layer.maxzoom.maximum,"data-wd-key":"max-zoom.input"})})},iDe=(Rb().s[3]++,$o()(nDe));function qy(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",e="bbd273b6557a5df907fed987aa83b7e8030607a2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",statementMap:{0:{start:{line:5,column:29},end:{line:31,column:1}},1:{start:{line:6,column:12},end:{line:6,column:19}},2:{start:{line:7,column:20},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:30,column:4}},4:{start:{line:32,column:21},end:{line:32,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:40},end:{line:31,column:1}},line:5}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx"],names:[],mappings:"AA2BM;AAzBN,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,QAAM,YAAY;AAAA,IAChB,KAAK;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAEA,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,UAAU;AAAA,MACnB;AAAA,MACA,eAAY;AAAA,MACZ,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO;AAAA,UACP,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,SAAS,EAAE,YAAY;AAAA,UACvB,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bbd273b6557a5df907fed987aa83b7e8030607a2"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return qy=function(){return s},s}qy();qy().s[0]++;const rDe=n=>{qy().f[0]++;const e=(qy().s[1]++,n.t),t=(qy().s[2]++,{doc:e("Comments for the current layer. This is non-standard and not in the spec.")});return qy().s[3]++,ie.jsx(Gs,{label:e("Comments"),fieldSpec:t,"data-wd-key":"layer-comment",error:n.error,children:ie.jsx(um,{multi:!0,value:n.value,onChange:n.onChange,default:e("Comment..."),"data-wd-key":"layer-comment.input"})})},oDe=(qy().s[4]++,$o()(rDe));function P_(){var n="/home/runner/work/maputnik/maputnik/src/libs/format.ts",e="c45fbfac66e994b59070a295e5a7f219cd5d66ac",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/format.ts",statementMap:{0:{start:{line:2,column:2},end:{line:2,column:50}}},fnMap:{0:{name:"formatLayerId",decl:{start:{line:1,column:16},end:{line:1,column:29}},loc:{start:{line:1,column:34},end:{line:3,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:9},end:{line:2,column:49}},type:"cond-expr",locations:[{start:{line:2,column:21},end:{line:2,column:37}},{start:{line:2,column:40},end:{line:2,column:49}}],line:2}},s:{0:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/format.ts"],names:[],mappings:"AAAO,gBAAS,cAAe,IAAwB;AACrD,SAAO,OAAO,KAAK,mBAAmB,IAAI,EAAE;AAC9C;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c45fbfac66e994b59070a295e5a7f219cd5d66ac"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return P_=function(){return s},s}P_();function tae(n){return P_().f[0]++,P_().s[0]++,n===""?(P_().b[0][0]++,"[empty_string]"):(P_().b[0][1]++,`'${n}'`)}function Yt(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",e="73c13e8dcd00ff99dc188c9ddae5c660be7ade84",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",statementMap:{0:{start:{line:24,column:17},end:{line:24,column:19}},1:{start:{line:25,column:2},end:{line:30,column:5}},2:{start:{line:29,column:59},end:{line:29,column:82}},3:{start:{line:31,column:2},end:{line:36,column:5}},4:{start:{line:35,column:59},end:{line:35,column:80}},5:{start:{line:37,column:2},end:{line:42,column:5}},6:{start:{line:41,column:59},end:{line:41,column:80}},7:{start:{line:43,column:2},end:{line:48,column:5}},8:{start:{line:47,column:58},end:{line:47,column:79}},9:{start:{line:49,column:2},end:{line:54,column:5}},10:{start:{line:53,column:58},end:{line:53,column:79}},11:{start:{line:55,column:2},end:{line:55,column:16}},12:{start:{line:58,column:2},end:{line:60,column:3}},13:{start:{line:59,column:4},end:{line:59,column:14}},14:{start:{line:61,column:2},end:{line:63,column:3}},15:{start:{line:62,column:4},end:{line:62,column:37}},16:{start:{line:64,column:17},end:{line:64,column:19}},17:{start:{line:65,column:2},end:{line:72,column:3}},18:{start:{line:66,column:4},end:{line:71,column:7}},19:{start:{line:73,column:2},end:{line:80,column:3}},20:{start:{line:74,column:4},end:{line:79,column:7}},21:{start:{line:81,column:2},end:{line:81,column:16}},22:{start:{line:84,column:21},end:{line:88,column:3}},23:{start:{line:89,column:22},end:{line:93,column:3}},24:{start:{line:94,column:22},end:{line:98,column:3}},25:{start:{line:99,column:2},end:{line:99,column:96}},26:{start:{line:102,column:24},end:{line:109,column:3}},27:{start:{line:111,column:4},end:{line:111,column:17}},28:{start:{line:112,column:25},end:{line:112,column:27}},29:{start:{line:113,column:4},end:{line:115,column:5}},30:{start:{line:114,column:6},end:{line:114,column:39}},31:{start:{line:116,column:4},end:{line:116,column:34}},32:{start:{line:119,column:29},end:{line:119,column:54}},33:{start:{line:120,column:4},end:{line:124,column:5}},34:{start:{line:121,column:6},end:{line:123,column:7}},35:{start:{line:122,column:8},end:{line:122,column:45}},36:{start:{line:125,column:4},end:{line:127,column:6}},37:{start:{line:130,column:4},end:{line:133,column:6}},38:{start:{line:136,column:32},end:{line:139,column:5}},39:{start:{line:140,column:4},end:{line:142,column:7}},40:{start:{line:145,column:18},end:{line:145,column:20}},41:{start:{line:146,column:4},end:{line:148,column:5}},42:{start:{line:147,column:6},end:{line:147,column:62}},43:{start:{line:149,column:35},end:{line:149,column:45}},44:{start:{line:150,column:22},end:{line:150,column:24}},45:{start:{line:151,column:4},end:{line:157,column:7}},46:{start:{line:152,column:6},end:{line:156,column:7}},47:{start:{line:153,column:8},end:{line:155,column:10}},48:{start:{line:159,column:18},end:{line:159,column:34}},49:{start:{line:160,column:4},end:{line:162,column:5}},50:{start:{line:161,column:6},end:{line:161,column:63}},51:{start:{line:163,column:4},end:{line:267,column:5}},52:{start:{line:165,column:8},end:{line:229,column:13}},53:{start:{line:172,column:35},end:{line:172,column:112}},54:{start:{line:181,column:37},end:{line:184,column:15}},55:{start:{line:193,column:31},end:{line:193,column:69}},56:{start:{line:202,column:31},end:{line:202,column:75}},57:{start:{line:210,column:31},end:{line:210,column:70}},58:{start:{line:218,column:31},end:{line:218,column:70}},59:{start:{line:226,column:31},end:{line:226,column:104}},60:{start:{line:231,column:8},end:{line:239,column:16}},61:{start:{line:237,column:29},end:{line:237,column:67}},62:{start:{line:241,column:8},end:{line:250,column:10}},63:{start:{line:252,column:8},end:{line:264,column:10}},64:{start:{line:258,column:14},end:{line:261,column:16}},65:{start:{line:266,column:8},end:{line:266,column:49}},66:{start:{line:270,column:4},end:{line:273,column:7}},67:{start:{line:276,column:14},end:{line:276,column:26}},68:{start:{line:277,column:21},end:{line:277,column:23}},69:{start:{line:278,column:22},end:{line:278,column:43}},70:{start:{line:279,column:19},end:{line:296,column:6}},71:{start:{line:280,column:6},end:{line:280,column:70}},72:{start:{line:282,column:22},end:{line:282,column:30}},73:{start:{line:283,column:6},end:{line:283,column:29}},74:{start:{line:284,column:6},end:{line:295,column:8}},75:{start:{line:297,column:19},end:{line:297,column:48}},76:{start:{line:298,column:18},end:{line:326,column:5}},77:{start:{line:301,column:23},end:{line:301,column:71}},78:{start:{line:306,column:23},end:{line:306,column:68}},79:{start:{line:311,column:23},end:{line:311,column:80}},80:{start:{line:317,column:23},end:{line:317,column:41}},81:{start:{line:323,column:23},end:{line:323,column:40}},82:{start:{line:328,column:6},end:{line:328,column:30}},83:{start:{line:329,column:6},end:{line:329,column:26}},84:{start:{line:331,column:4},end:{line:377,column:9}},85:{start:{line:359,column:33},end:{line:359,column:42}},86:{start:{line:360,column:20},end:{line:360,column:201}},87:{start:{line:380,column:20},end:{line:380,column:58}}},fnMap:{0:{name:"getLayoutForSymbolType",decl:{start:{line:23,column:9},end:{line:23,column:31}},loc:{start:{line:23,column:35},end:{line:56,column:1}},line:23},1:{name:"(anonymous_1)",decl:{start:{line:29,column:52},end:{line:29,column:53}},loc:{start:{line:29,column:59},end:{line:29,column:82}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:35,column:52},end:{line:35,column:53}},loc:{start:{line:35,column:59},end:{line:35,column:80}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:41,column:52},end:{line:41,column:53}},loc:{start:{line:41,column:59},end:{line:41,column:80}},line:41},4:{name:"(anonymous_4)",decl:{start:{line:47,column:51},end:{line:47,column:52}},loc:{start:{line:47,column:58},end:{line:47,column:79}},line:47},5:{name:"(anonymous_5)",decl:{start:{line:53,column:51},end:{line:53,column:52}},loc:{start:{line:53,column:58},end:{line:53,column:79}},line:53},6:{name:"getLayoutForType",decl:{start:{line:57,column:9},end:{line:57,column:25}},loc:{start:{line:57,column:35},end:{line:82,column:1}},line:57},7:{name:"layoutGroups",decl:{start:{line:83,column:9},end:{line:83,column:21}},loc:{start:{line:83,column:36},end:{line:100,column:1}},line:83},8:{name:"(anonymous_8)",decl:{start:{line:103,column:20},end:{line:103,column:21}},loc:{start:{line:103,column:26},end:{line:104,column:5}},line:103},9:{name:"(anonymous_9)",decl:{start:{line:105,column:21},end:{line:105,column:22}},loc:{start:{line:105,column:27},end:{line:106,column:5}},line:105},10:{name:"(anonymous_10)",decl:{start:{line:107,column:22},end:{line:107,column:23}},loc:{start:{line:107,column:28},end:{line:108,column:5}},line:107},11:{name:"(anonymous_11)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:21},end:{line:117,column:3}},line:110},12:{name:"(anonymous_12)",decl:{start:{line:118,column:2},end:{line:118,column:3}},loc:{start:{line:118,column:48},end:{line:128,column:3}},line:118},13:{name:"(anonymous_13)",decl:{start:{line:129,column:2},end:{line:129,column:3}},loc:{start:{line:129,column:44},end:{line:134,column:3}},line:129},14:{name:"(anonymous_14)",decl:{start:{line:135,column:2},end:{line:135,column:3}},loc:{start:{line:135,column:36},end:{line:143,column:3}},line:135},15:{name:"(anonymous_15)",decl:{start:{line:144,column:2},end:{line:144,column:3}},loc:{start:{line:144,column:32},end:{line:268,column:3}},line:144},16:{name:"(anonymous_16)",decl:{start:{line:151,column:19},end:{line:151,column:20}},loc:{start:{line:151,column:30},end:{line:157,column:5}},line:151},17:{name:"(anonymous_17)",decl:{start:{line:172,column:24},end:{line:172,column:25}},loc:{start:{line:172,column:35},end:{line:172,column:112}},line:172},18:{name:"(anonymous_18)",decl:{start:{line:181,column:24},end:{line:181,column:25}},loc:{start:{line:181,column:37},end:{line:184,column:15}},line:181},19:{name:"(anonymous_19)",decl:{start:{line:193,column:24},end:{line:193,column:25}},loc:{start:{line:193,column:31},end:{line:193,column:69}},line:193},20:{name:"(anonymous_20)",decl:{start:{line:202,column:24},end:{line:202,column:25}},loc:{start:{line:202,column:31},end:{line:202,column:75}},line:202},21:{name:"(anonymous_21)",decl:{start:{line:210,column:24},end:{line:210,column:25}},loc:{start:{line:210,column:31},end:{line:210,column:70}},line:210},22:{name:"(anonymous_22)",decl:{start:{line:218,column:24},end:{line:218,column:25}},loc:{start:{line:218,column:31},end:{line:218,column:70}},line:218},23:{name:"(anonymous_23)",decl:{start:{line:226,column:24},end:{line:226,column:25}},loc:{start:{line:226,column:31},end:{line:226,column:104}},line:226},24:{name:"(anonymous_24)",decl:{start:{line:237,column:22},end:{line:237,column:23}},loc:{start:{line:237,column:29},end:{line:237,column:67}},line:237},25:{name:"(anonymous_25)",decl:{start:{line:257,column:22},end:{line:257,column:23}},loc:{start:{line:257,column:34},end:{line:262,column:13}},line:257},26:{name:"(anonymous_26)",decl:{start:{line:269,column:2},end:{line:269,column:3}},loc:{start:{line:269,column:20},end:{line:274,column:3}},line:269},27:{name:"(anonymous_27)",decl:{start:{line:275,column:2},end:{line:275,column:3}},loc:{start:{line:275,column:11},end:{line:378,column:3}},line:275},28:{name:"(anonymous_28)",decl:{start:{line:279,column:53},end:{line:279,column:54}},loc:{start:{line:279,column:64},end:{line:281,column:5}},line:279},29:{name:"(anonymous_29)",decl:{start:{line:281,column:11},end:{line:281,column:12}},loc:{start:{line:281,column:22},end:{line:296,column:5}},line:281},30:{name:"(anonymous_30)",decl:{start:{line:301,column:17},end:{line:301,column:18}},loc:{start:{line:301,column:23},end:{line:301,column:71}},line:301},31:{name:"(anonymous_31)",decl:{start:{line:306,column:17},end:{line:306,column:18}},loc:{start:{line:306,column:23},end:{line:306,column:68}},line:306},32:{name:"(anonymous_32)",decl:{start:{line:311,column:17},end:{line:311,column:18}},loc:{start:{line:311,column:23},end:{line:311,column:80}},line:311},33:{name:"(anonymous_33)",decl:{start:{line:317,column:17},end:{line:317,column:18}},loc:{start:{line:317,column:23},end:{line:317,column:41}},line:317},34:{name:"(anonymous_34)",decl:{start:{line:323,column:17},end:{line:323,column:18}},loc:{start:{line:323,column:23},end:{line:323,column:40}},line:323},35:{name:"handleSelection",decl:{start:{line:327,column:13},end:{line:327,column:28}},loc:{start:{line:327,column:40},end:{line:330,column:5}},line:327},36:{name:"(anonymous_36)",decl:{start:{line:358,column:147},end:{line:358,column:148}},loc:{start:{line:358,column:155},end:{line:361,column:19}},line:358}},branchMap:{0:{loc:{start:{line:58,column:2},end:{line:60,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:60,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:58},1:{loc:{start:{line:61,column:2},end:{line:63,column:3}},type:"if",locations:[{start:{line:61,column:2},end:{line:63,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},2:{loc:{start:{line:65,column:2},end:{line:72,column:3}},type:"if",locations:[{start:{line:65,column:2},end:{line:72,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},3:{loc:{start:{line:73,column:2},end:{line:80,column:3}},type:"if",locations:[{start:{line:73,column:2},end:{line:80,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:73},4:{loc:{start:{line:121,column:6},end:{line:123,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:123,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},5:{loc:{start:{line:146,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:148,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:146},6:{loc:{start:{line:152,column:6},end:{line:156,column:7}},type:"if",locations:[{start:{line:152,column:6},end:{line:156,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:152},7:{loc:{start:{line:152,column:10},end:{line:152,column:96}},type:"binary-expr",locations:[{start:{line:152,column:10},end:{line:152,column:22}},{start:{line:152,column:26},end:{line:152,column:55}},{start:{line:152,column:59},end:{line:152,column:96}}],line:152},8:{loc:{start:{line:160,column:4},end:{line:162,column:5}},type:"if",locations:[{start:{line:160,column:4},end:{line:162,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:160},9:{loc:{start:{line:163,column:4},end:{line:267,column:5}},type:"switch",locations:[{start:{line:164,column:6},end:{line:229,column:13}},{start:{line:230,column:6},end:{line:239,column:16}},{start:{line:240,column:6},end:{line:250,column:10}},{start:{line:251,column:6},end:{line:264,column:10}},{start:{line:265,column:6},end:{line:266,column:49}}],line:163},10:{loc:{start:{line:187,column:10},end:{line:195,column:11}},type:"binary-expr",locations:[{start:{line:187,column:10},end:{line:187,column:48}},{start:{line:187,column:68},end:{line:195,column:11}}],line:187},11:{loc:{start:{line:196,column:10},end:{line:204,column:11}},type:"binary-expr",locations:[{start:{line:196,column:10},end:{line:196,column:60}},{start:{line:196,column:80},end:{line:204,column:11}}],line:196},12:{loc:{start:{line:226,column:83},end:{line:226,column:103}},type:"cond-expr",locations:[{start:{line:226,column:93},end:{line:226,column:99}},{start:{line:226,column:102},end:{line:226,column:103}}],line:226},13:{loc:{start:{line:280,column:15},end:{line:280,column:68}},type:"binary-expr",locations:[{start:{line:280,column:15},end:{line:280,column:41}},{start:{line:280,column:45},end:{line:280,column:68}}],line:280},14:{loc:{start:{line:297,column:19},end:{line:297,column:48}},type:"binary-expr",locations:[{start:{line:297,column:19},end:{line:297,column:42}},{start:{line:297,column:46},end:{line:297,column:48}}],line:297},15:{loc:{start:{line:310,column:14},end:{line:310,column:66}},type:"cond-expr",locations:[{start:{line:310,column:45},end:{line:310,column:54}},{start:{line:310,column:57},end:{line:310,column:66}}],line:310}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0],8:[0,0],9:[0,0,0,0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx"],names:["layer"],mappings:"AAuN2B,SA4EL,UA3Ed,KADmB;AAvN3B,OAAO,WAAuB;AAC9B,SAAS,SAAS,QAAQ,MAAM,gBAAgB;AAChD,SAAQ,iBAAgB;AACxB,SAAQ,kBAAiB;AACzB,SAAS,mBAAmB;AAE5B,SAAQ,UAAS;AAEjB,OAAO,eAAe;AACtB,OAAO,kBAAkB;AACzB,OAAO,mBAAmB;AAC1B,OAAO,sBAAsB;AAC7B,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,YAAY,sBAAsB;AAC3C,SAAQ,qBAAoB;AAC5B,SAA+B,uBAAuB;AAEtD,SAAS,yBAAyB;AAUlC,SAAS,uBAAuB,GAAqC;AACnE,QAAM,SAAgC,CAAC;AACvC,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,2BAA2B;AAAA,IACpC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,SAAS,CAAC;AAAA,EAC9E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,wBAAwB;AAAA,IACjC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC5E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,wBAAwB;AAAA,IACjC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC5E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,uBAAuB;AAAA,IAChC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC3E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,uBAAuB;AAAA,IAChC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC3E,CAAC;AACD,SAAO;AACT;AAEA,SAAS,iBAAiB,MAAkC,GAAqC;AAC/F,MAAI,OAAO,KAAK,GAAG,MAAM,KAAK,MAAM,EAAE,QAAQ,IAAI,IAAI,GAAG;AACvD,WAAO,CAAC;AAAA,EACV;AACA,MAAI,SAAS,UAAU;AACrB,WAAO,uBAAuB,CAAC;AAAA,EACjC;AACA,QAAM,SAAgC,CAAC;AACvC,MAAI,OAAO,KAAK,GAAG,WAAW,IAAI,CAAC,EAAE,SAAS,GAAG;AAC/C,WAAO,KAAK;AAAA,MACV,OAAO,EAAE,kBAAkB;AAAA,MAC3B,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,OAAO,KAAK,GAAG,WAAW,IAAI,CAAC;AAAA,IACzC,CAAC;AAAA,EACH;AACA,MAAI,OAAO,KAAK,GAAG,YAAY,IAAI,CAAC,EAAE,SAAS,GAAG;AAChD,WAAO,KAAK;AAAA,MACV,OAAO,EAAE,mBAAmB;AAAA,MAC5B,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,OAAO,KAAK,GAAG,YAAY,IAAI,CAAC;AAAA,IAC1C,CAAC;AAAA,EACH;AACA,SAAO;AACT;AAEA,SAAS,aAAa,WAAuC,GAA8E;AACzI,QAAM,aAAa;AAAA,IACjB,IAAI;AAAA,IACJ,OAAO,EAAE,OAAO;AAAA,IAChB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,QAAQ;AAAA,IACjB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,aAAa;AAAA,IACtB,MAAM;AAAA,EACR;AACA,SAAO,CAAC,YAAY,WAAW,EAC5B,OAAO,iBAAiB,WAAW,CAAC,CAAC,EACrC,OAAO,CAAC,WAAW,CAAC;AACzB;AAwBA,MAAM,4BAA4B,MAAM,UAAsD;AAAA,EAC5F,OAAO,eAAe;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,kBAAkB,MAAM;AAAA,IAAC;AAAA,EAC3B;AAAA,EAEA,YAAY,OAAiC;AAC3C,UAAM,KAAK;AAEX,UAAM,eAAyC,CAAC;AAChD,eAAW,SAAS,aAAa,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC,GAAG;AAChE,mBAAa,MAAM,KAAK,IAAI;AAAA,IAC9B;AAEA,SAAK,QAAQ,EAAE,aAAa;AAAA,EAC9B;AAAA,EAEA,OAAO,yBAAyB,OAA2C,OAAyB;AAClG,UAAM,mBAAmB,EAAE,GAAG,MAAM,aAAa;AAEjD,eAAW,SAAS,iBAAiB,MAAM,MAAM,MAAM,MAAM,CAAC,GAAG;AAC/D,UAAG,EAAE,MAAM,SAAS,mBAAmB;AACrC,yBAAiB,MAAM,KAAK,IAAI;AAAA,MAClC;AAAA,IACF;AAEA,WAAO;AAAA,MACL,cAAc;AAAA,IAChB;AAAA,EACF;AAAA,EAGA,eAAe,OAAwC,UAAkB,UAAe;AACtF,SAAK,MAAM;AAAA,MACT,KAAK,MAAM;AAAA,MACX,eAAe,KAAK,MAAM,OAAO,OAAO,UAAU,QAAQ;AAAA,IAC5D;AAAA,EACF;AAAA,EAEA,cAAc,YAAoB,QAAiB;AACjD,UAAM,sBAAsB;AAAA,MAC1B,GAAG,KAAK,MAAM;AAAA,MACd,CAAC,UAAU,GAAG;AAAA,IAChB;AACA,SAAK,SAAS;AAAA,MACZ,cAAc;AAAA,IAChB,CAAC;AAAA,EACH;AAAA,EAEA,gBAAgB,MAAc,QAAgC;AAC5D,QAAI,UAAU;AACd,QAAG,KAAK,MAAM,MAAM,UAAU;AAC5B,gBAAW,KAAK,MAAM,MAAM,SAAiB,kBAAkB;AAAA,IACjE;AACA,UAAM,EAAC,QAAQ,WAAU,IAAI,KAAK;AAElC,UAAM,YAA+B,CAAC;AACtC,WAAQ,QAAQ,WAAS;AACvB,UACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS,YAC3B;AACA,kBAAU,MAAM,OAAO,KAAK,GAAG,IAAI;AAAA,UACjC,SAAS,MAAM,OAAO,KAAK;AAAA,QAC7B;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI;AACJ,UAAM,QAAQ,KAAK,MAAM;AACzB,QAAG,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,MAAM,MAAM,GAAG;AACzE,uBAAiB,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAE;AAAA,IACpD;AAEA,YAAO,MAAM;AAAA,MACX,KAAK;AAAS,eAAO,qBAAC,SACpB;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,OAAM;AAAA,cACN,OAAO,UAAU;AAAA,cACjB,UAAU,WAAS,KAAK,MAAM,gBAAgB,KAAK,MAAM,YAAY,KAAK,MAAM,MAAM,IAAI,KAAK;AAAA;AAAA,UACjG;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,UAAU;AAAA,cACV,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,aAAW,KAAK,MAAM;AAAA,gBAC9B,KAAK,MAAM;AAAA,gBACX,WAAW,KAAK,MAAM,OAAO,OAAO;AAAA,cACtC;AAAA;AAAA,UACF;AAAA,UACC,KAAK,MAAM,MAAM,SAAS,gBAAgB;AAAA,YAAC;AAAA;AAAA,cAC1C,OAAO,UAAU;AAAA,cACjB,WAAW,OAAO,KAAK,KAAK,MAAM,OAAQ;AAAA,cAC1C,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,UACtD;AAAA,UAEC,CAAC,kBAAkB,SAAS,KAAK,MAAM,MAAM,IAAI,KAClD;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU,cAAc;AAAA,cAC/B;AAAA,cACA,OAAQ,KAAK,MAAM,MAAc,cAAc;AAAA,cAC/C,UAAU,OAAK,KAAK,eAAe,MAAM,gBAAgB,CAAC;AAAA;AAAA,UAC5D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,eAAe,YAAY,oBAAoB,KAAK,KAAM,SAAY,CAAC;AAAA;AAAA,UAC7F;AAAA,WACF;AAAA,MACA,KAAK;AAAU,eAAO,oBAAC,SACrB,8BAAC,SAAI,WAAU,kCACb;AAAA,UAAC;AAAA;AAAA,YACC,QAAQ;AAAA,YACR,QAAS,KAAK,MAAM,MAAc;AAAA,YAClC,YAAY,KAAK,MAAM,aAAc,KAAK,MAAM,MAAc,cAAc,CAAC;AAAA,YAC7E,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,QACtD,GACF,GACF;AAAA,MACA,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,QAAQ;AAAA,YACR,OAAO,KAAK,MAAM;AAAA,YAClB,aAAa;AAAA,YACb,MAAM,KAAK,MAAM;AAAA,YACjB,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,QACzC;AAAA,MACF,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,UAAS;AAAA,YACT,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,CAACA,WAA8B;AACvC,mBAAK,MAAM;AAAA,gBACT,KAAK,MAAM;AAAA,gBACXA;AAAA,cACF;AAAA,YACF;AAAA;AAAA,QACF;AAAA,MACF;AAAS,eAAO,gCAAE;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,UAAU,QAAgB;AACxB,SAAK,MAAM,YAAY;AAAA,MACrB,UAAU,KAAK,MAAM;AAAA,MACrB,UAAU,KAAK,MAAM,aAAW;AAAA,IAClC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,UAAM,WAAqB,CAAC;AAC5B,UAAM,YAAY,KAAK,MAAM,MAAM;AACnC,UAAM,SAAS,aAAa,WAAW,CAAC,EAAE,OAAO,WAAS;AACxD,aAAO,EAAE,cAAc,gBAAgB,MAAM,SAAS;AAAA,IACxD,CAAC,EAAE,IAAI,WAAS;AACd,YAAM,UAAU,MAAM;AACtB,eAAS,KAAK,OAAO;AACrB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,eAAa,MAAM;AAAA,UACnB,IAAI;AAAA,UAEJ,OAAO,MAAM;AAAA,UACb,UAAU,KAAK,MAAM,aAAa,MAAM,KAAK;AAAA,UAC7C,gBAAgB,KAAK,cAAc,KAAK,MAAM,MAAM,KAAK;AAAA,UAExD,eAAK,gBAAgB,MAAM,MAAM,MAAM,MAAM;AAAA;AAAA,QALzC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAE3C,UAAM,QAKD;AAAA,MACH,QAAQ;AAAA,QACN,MAAM,EAAE,QAAQ;AAAA,QAChB,SAAS,MAAM,KAAK,MAAM,eAAe,KAAK,MAAM,UAAU;AAAA,QAC9D,OAAO;AAAA,MACT;AAAA,MACA,WAAW;AAAA,QACT,MAAM,EAAE,WAAW;AAAA,QACnB,SAAS,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM,UAAU;AAAA,QAC3D,OAAO;AAAA,MACT;AAAA,MACA,MAAM;AAAA,QACJ,MAAO,OAAO,eAAe,SAAU,EAAE,MAAM,IAAI,EAAE,MAAM;AAAA,QAC3D,SAAS,MAAM,KAAK,MAAM,wBAAwB,KAAK,MAAM,UAAU;AAAA,QACvE,OAAO;AAAA,MACT;AAAA,MACA,aAAa;AAAA,QACX,MAAM,EAAE,eAAe;AAAA,QACvB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,EAAE;AAAA,QAChC,OAAO;AAAA,MACT;AAAA,MACA,eAAe;AAAA,QACb,MAAM,EAAE,iBAAiB;AAAA,QACzB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,CAAE;AAAA,QAChC,OAAO;AAAA,MACT;AAAA,IACF;AAEA,aAAS,gBAAgB,IAAY,OAA6B;AAChE,YAAM,gBAAgB;AACtB,YAAM,EAAE,EAAE,QAAQ;AAAA,IACpB;AAEA,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,QAAQ,OAAO,UAAS,GACjE;AAAA,MAAC;AAAA;AAAA,QAAQ,WAAU;AAAA,QACjB,MAAK;AAAA,QACL,cAAY,EAAE,cAAc;AAAA,QAC5B,eAAY;AAAA,QAEZ;AAAA,8BAAC,YACC,+BAAC,SAAI,WAAU,gBACb;AAAA,gCAAC,QAAG,WAAU,uBACX,YAAE,sBAAsB,EAAE,SAAS,cAAc,KAAK,MAAM,MAAM,EAAE,EAAE,CAAC,GAC1E;AAAA,YACA,oBAAC,SAAI,WAAU,sBACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,aAAa;AAAA,gBACb,kBAAkB;AAAA,gBAElB;AAAA;AAAA,oBAAC;AAAA;AAAA,sBACC,IAAG;AAAA,sBACH,eAAY;AAAA,sBACZ,WAAU;AAAA,sBACV,OAAO;AAAA,sBACP,8BAAC,cAAW,WAAU,0BAAyB;AAAA;AAAA,kBACjD;AAAA,kBACA,oBAAC,QACC,8BAAC,QAAG,WAAU,mBACX,iBAAO,KAAK,KAAK,EAAE,IAAI,CAAC,OAAO;AAC9B,0BAAM,OAAO,MAAM,EAAE;AACrB,2BAAO,oBAAC,QACN,8BAAC,YAAS,OAAO,IAAI,WAAU,yBAAwB,eAAa,KAAK,OACtE,eAAK,MACR,KAHc,EAIhB;AAAA,kBACF,CAAC,GACH,GACF;AAAA;AAAA;AAAA,YACF,GACF;AAAA,aACF,GAEF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,uBAAuB;AAAA,cACvB,mBAAmB;AAAA,cACnB,aAAa;AAAA,cAEZ;AAAA;AAAA,UACH;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"73c13e8dcd00ff99dc188c9ddae5c660be7ade84"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Yt=function(){return s},s}Yt();function sDe(n){Yt().f[0]++;const e=(Yt().s[0]++,[]);return Yt().s[1]++,e.push({title:n("General layout properties"),id:"General_layout_properties",type:"properties",fields:Object.keys(rp.layout_symbol).filter(t=>(Yt().f[1]++,Yt().s[2]++,t.startsWith("symbol-")))}),Yt().s[3]++,e.push({title:n("Text layout properties"),id:"Text_layout_properties",type:"properties",fields:Object.keys(rp.layout_symbol).filter(t=>(Yt().f[2]++,Yt().s[4]++,t.startsWith("text-")))}),Yt().s[5]++,e.push({title:n("Icon layout properties"),id:"Icon_layout_properties",type:"properties",fields:Object.keys(rp.layout_symbol).filter(t=>(Yt().f[3]++,Yt().s[6]++,t.startsWith("icon-")))}),Yt().s[7]++,e.push({title:n("Text paint properties"),id:"Text_paint_properties",type:"properties",fields:Object.keys(rp.paint_symbol).filter(t=>(Yt().f[4]++,Yt().s[8]++,t.startsWith("text-")))}),Yt().s[9]++,e.push({title:n("Icon paint properties"),id:"Icon_paint_properties",type:"properties",fields:Object.keys(rp.paint_symbol).filter(t=>(Yt().f[5]++,Yt().s[10]++,t.startsWith("icon-")))}),Yt().s[11]++,e}function nae(n,e){if(Yt().f[6]++,Yt().s[12]++,Object.keys(rp.layer.type.values).indexOf(n)<0)return Yt().b[0][0]++,Yt().s[13]++,[];if(Yt().b[0][1]++,Yt().s[14]++,n==="symbol")return Yt().b[1][0]++,Yt().s[15]++,sDe(e);Yt().b[1][1]++;const t=(Yt().s[16]++,[]);return Yt().s[17]++,Object.keys(rp["paint_"+n]).length>0?(Yt().b[2][0]++,Yt().s[18]++,t.push({title:e("Paint properties"),id:"Paint_properties",type:"properties",fields:Object.keys(rp["paint_"+n])})):Yt().b[2][1]++,Yt().s[19]++,Object.keys(rp["layout_"+n]).length>0?(Yt().b[3][0]++,Yt().s[20]++,t.push({title:e("Layout properties"),id:"Layout_properties",type:"properties",fields:Object.keys(rp["layout_"+n])})):Yt().b[3][1]++,Yt().s[21]++,t}function UV(n,e){Yt().f[7]++;const t=(Yt().s[22]++,{id:"layer",title:e("Layer"),type:"layer"}),i=(Yt().s[23]++,{id:"filter",title:e("Filter"),type:"filter"}),r=(Yt().s[24]++,{id:"jsoneditor",title:e("JSON Editor"),type:"jsoneditor"});return Yt().s[25]++,[t,i].concat(nae(n,e)).concat([r])}class aDe extends On.Component{static defaultProps=(Yt().s[26]++,{onLayerChanged:()=>{Yt().f[8]++},onLayerIdChange:()=>{Yt().f[9]++},onLayerDestroyed:()=>{Yt().f[10]++}});constructor(e){Yt().f[11]++,Yt().s[27]++,super(e);const t=(Yt().s[28]++,{});Yt().s[29]++;for(const i of UV(this.props.layer.type,e.t))Yt().s[30]++,t[i.title]=!0;Yt().s[31]++,this.state={editorGroups:t}}static getDerivedStateFromProps(e,t){Yt().f[12]++;const i=(Yt().s[32]++,{...t.editorGroups});Yt().s[33]++;for(const r of nae(e.layer.type,e.t))Yt().s[34]++,r.title in i?Yt().b[4][1]++:(Yt().b[4][0]++,Yt().s[35]++,i[r.title]=!0);return Yt().s[36]++,{editorGroups:i}}changeProperty(e,t,i){Yt().f[13]++,Yt().s[37]++,this.props.onLayerChanged(this.props.layerIndex,QIe(this.props.layer,e,t,i))}onGroupToggle(e,t){Yt().f[14]++;const i=(Yt().s[38]++,{...this.state.editorGroups,[e]:t});Yt().s[39]++,this.setState({editorGroups:i})}renderGroupType(e,t){Yt().f[15]++;let i=(Yt().s[40]++,"");Yt().s[41]++,this.props.layer.metadata?(Yt().b[5][0]++,Yt().s[42]++,i=this.props.layer.metadata["maputnik:comment"]):Yt().b[5][1]++;const{errors:r,layerIndex:o}=(Yt().s[43]++,this.props),s=(Yt().s[44]++,{});Yt().s[45]++,r.forEach(h=>{Yt().f[16]++,Yt().s[46]++,Yt().b[7][0]++,h.parsed&&(Yt().b[7][1]++,h.parsed.type==="layer")&&(Yt().b[7][2]++,h.parsed.data.index==o)?(Yt().b[6][0]++,Yt().s[47]++,s[h.parsed.data.key]={message:h.parsed.data.message}):Yt().b[6][1]++});let a;const c=(Yt().s[48]++,this.props.layer);switch(Yt().s[49]++,Object.prototype.hasOwnProperty.call(this.props.sources,c.source)?(Yt().b[8][0]++,Yt().s[50]++,a=this.props.sources[c.source].layers):Yt().b[8][1]++,Yt().s[51]++,e){case"layer":return Yt().b[9][0]++,Yt().s[52]++,ie.jsxs("div",{children:[ie.jsx(Koe,{value:this.props.layer.id,wdKey:"layer-editor.layer-id",error:s.id,onChange:h=>(Yt().f[17]++,Yt().s[53]++,this.props.onLayerIdChange(this.props.layerIndex,this.props.layer.id,h))}),ie.jsx(Uoe,{disabled:!0,error:s.type,value:this.props.layer.type,onChange:h=>(Yt().f[18]++,Yt().s[54]++,this.props.onLayerChanged(this.props.layerIndex,WIe(this.props.layer,h)))}),(Yt().b[10][0]++,this.props.layer.type!=="background"&&(Yt().b[10][1]++,ie.jsx(tse,{error:s.source,sourceIds:Object.keys(this.props.sources),value:this.props.layer.source,onChange:h=>(Yt().f[19]++,Yt().s[55]++,this.changeProperty(null,"source",h))}))),(Yt().b[11][0]++,!kD.includes(this.props.layer.type)&&(Yt().b[11][1]++,ie.jsx(nse,{error:s["source-layer"],sourceLayerIds:a,value:this.props.layer["source-layer"],onChange:h=>(Yt().f[20]++,Yt().s[56]++,this.changeProperty(null,"source-layer",h))}))),ie.jsx(tDe,{error:s.minzoom,value:this.props.layer.minzoom,onChange:h=>(Yt().f[21]++,Yt().s[57]++,this.changeProperty(null,"minzoom",h))}),ie.jsx(iDe,{error:s.maxzoom,value:this.props.layer.maxzoom,onChange:h=>(Yt().f[22]++,Yt().s[58]++,this.changeProperty(null,"maxzoom",h))}),ie.jsx(oDe,{error:s.comment,value:i,onChange:h=>(Yt().f[23]++,Yt().s[59]++,this.changeProperty("metadata","maputnik:comment",h==""?(Yt().b[12][0]++,void 0):(Yt().b[12][1]++,h)))})]});case"filter":return Yt().b[9][1]++,Yt().s[60]++,ie.jsx("div",{children:ie.jsx("div",{className:"maputnik-filter-editor-wrapper",children:ie.jsx(Hke,{errors:s,filter:this.props.layer.filter,properties:this.props.vectorLayers[this.props.layer["source-layer"]],onChange:h=>(Yt().f[24]++,Yt().s[61]++,this.changeProperty(null,"filter",h))})})});case"properties":return Yt().b[9][2]++,Yt().s[62]++,ie.jsx(XRe,{errors:s,layer:this.props.layer,groupFields:t,spec:this.props.spec,onChange:this.changeProperty.bind(this)});case"jsoneditor":return Yt().b[9][3]++,Yt().s[63]++,ie.jsx(rL,{lintType:"layer",value:this.props.layer,onChange:h=>{Yt().f[25]++,Yt().s[64]++,this.props.onLayerChanged(this.props.layerIndex,h)}});default:return Yt().b[9][4]++,Yt().s[65]++,ie.jsx(ie.Fragment,{})}}moveLayer(e){Yt().f[26]++,Yt().s[66]++,this.props.onMoveLayer({oldIndex:this.props.layerIndex,newIndex:this.props.layerIndex+e})}render(){Yt().f[27]++;const e=(Yt().s[67]++,this.props.t),t=(Yt().s[68]++,[]),i=(Yt().s[69]++,this.props.layer.type),r=(Yt().s[70]++,UV(i,e).filter(c=>(Yt().f[28]++,Yt().s[71]++,Yt().b[13][0]++,!(i==="background"&&(Yt().b[13][1]++,c.type==="source")))).map(c=>{Yt().f[29]++;const h=(Yt().s[72]++,c.id);return Yt().s[73]++,t.push(h),Yt().s[74]++,ie.jsx(JRe,{"data-wd-key":c.title,id:h,title:c.title,isActive:this.state.editorGroups[c.title],onActiveToggle:this.onGroupToggle.bind(this,c.title),children:this.renderGroupType(c.type,c.fields)},h)})),o=(Yt().s[75]++,Yt().b[14][0]++,this.props.layer.layout||(Yt().b[14][1]++,{})),s=(Yt().s[76]++,{delete:{text:e("Delete"),handler:()=>(Yt().f[30]++,Yt().s[77]++,this.props.onLayerDestroy(this.props.layerIndex)),wdKey:"menu-delete-layer"},duplicate:{text:e("Duplicate"),handler:()=>(Yt().f[31]++,Yt().s[78]++,this.props.onLayerCopy(this.props.layerIndex)),wdKey:"menu-duplicate-layer"},hide:{text:o.visibility==="none"?(Yt().b[15][0]++,e("Show")):(Yt().b[15][1]++,e("Hide")),handler:()=>(Yt().f[32]++,Yt().s[79]++,this.props.onLayerVisibilityToggle(this.props.layerIndex)),wdKey:"menu-hide-layer"},moveLayerUp:{text:e("Move layer up"),disabled:this.props.isFirstLayer,handler:()=>(Yt().f[33]++,Yt().s[80]++,this.moveLayer(-1)),wdKey:"menu-move-layer-up"},moveLayerDown:{text:e("Move layer down"),disabled:this.props.isLastLayer,handler:()=>(Yt().f[34]++,Yt().s[81]++,this.moveLayer(1)),wdKey:"menu-move-layer-down"}});function a(c,h){Yt().f[35]++,Yt().s[82]++,h.stopPropagation(),Yt().s[83]++,s[c].handler()}return Yt().s[84]++,ie.jsx(rx.Provider,{value:{size:"14px",color:"#8e8e8e"},children:ie.jsxs("section",{className:"maputnik-layer-editor",role:"main","aria-label":e("Layer editor"),"data-wd-key":"layer-editor",children:[ie.jsx("header",{children:ie.jsxs("div",{className:"layer-header",children:[ie.jsx("h2",{className:"layer-header__title",children:e("Layer: {{layerId}}",{layerId:tae(this.props.layer.id)})}),ie.jsx("div",{className:"layer-header__info",children:ie.jsxs(QM.Wrapper,{className:"more-menu",onSelection:a,closeOnSelection:!1,children:[ie.jsx(QM.Button,{id:"skip-target-layer-editor","data-wd-key":"skip-target-layer-editor",className:"more-menu__button",title:"Layer options",children:ie.jsx(qfe,{className:"more-menu__button__svg"})}),ie.jsx(QM.Menu,{children:ie.jsx("ul",{className:"more-menu__menu",children:Object.keys(s).map(c=>{Yt().f[36]++;const h=(Yt().s[85]++,s[c]);return Yt().s[86]++,ie.jsx("li",{children:ie.jsx(QM.MenuItem,{value:c,className:"more-menu__menu__item","data-wd-key":h.wdKey,children:h.text})},c)})})})]})})]})}),ie.jsx(gke,{allowMultipleExpanded:!0,allowZeroExpanded:!0,preExpanded:t,children:r})]})})}}const lDe=(Yt().s[87]++,$o()(aDe));var KV=function(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))},uDe=(function(){function n(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"}return n})(),cDe=(function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n})(),ADe=(function(){function n(e,t,i,r){this.name=e,this.version=t,this.os=i,this.bot=r,this.type="bot-device"}return n})(),hDe=(function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n})(),dDe=(function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n})(),fDe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,pDe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,LV=3,mDe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",fDe]],FV=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function gDe(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new dDe:typeof navigator<"u"?vDe(navigator.userAgent):CDe()}function yDe(n){return n!==""&&mDe.reduce(function(e,t){var i=t[0],r=t[1];if(e)return e;var o=r.exec(n);return!!o&&[i,o]},!1)}function vDe(n){var e=yDe(n);if(!e)return null;var t=e[0],i=e[1];if(t==="searchbot")return new hDe;var r=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);r?r.length<LV&&(r=KV(KV([],r,!0),_De(LV-r.length),!0)):r=[];var o=r.join("."),s=bDe(n),a=pDe.exec(n);return a&&a[1]?new ADe(t,o,s,a[1]):new uDe(t,o,s)}function bDe(n){for(var e=0,t=FV.length;e<t;e++){var i=FV[e],r=i[0],o=i[1],s=o.exec(n);if(s)return r}return null}function CDe(){var n=typeof process<"u"&&process.version;return n?new cDe(process.version.slice(1)):null}function _De(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}const xDe="maputnik",MDe="3.0.0",zV={name:xDe,version:MDe},wDe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='1200'%20height='1200'%20viewBox='0%200%20100%20100'%3e%3cg%20class='map'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--map__main'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line1'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line2'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line3'%20fill='none'%3e%3c/use%3e%3c/g%3e%3cg%20class='palette'%3e%3cuse%20xlink:href='%23ref-1--palette__main'%20fill='%23fff'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__inner'%20fill='none'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle5'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle4'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle3'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle2'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle1'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle0'%20fill='%234eba6f'%3e%3c/use%3e%3c/g%3e%3cg%20class='brush'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--brush__bottom'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--brush__top'%20fill='%23fff'%3e%3c/use%3e%3c/g%3e%3cdefs%3e%3cpath%20id='ref-1--map__main'%20stroke-width='2.366'%20stroke-linejoin='round'%20d='M18.84%207.717l15.44%207.542%2015.75-7.762%2015.7%207.857L81.005%207.67%2096.31%2054.052%2073.598%2062.12%2050.93%2053.872l-25.1%208.066-22.668-8.066z'%3e%3c/path%3e%3cpath%20id='ref-1--map__line1'%20d='M65.556%2015.07l7.647%2046.838'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line2'%20d='M50.261%207.422l.717%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line3'%20d='M34.011%2015.07l-8.603%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--palette__main'%20stroke-width='2.3'%20d='M47.352%2030.887c7.993.226%2016.934%209.725%2017.954%2015.25%201.02%205.527-.743%2011.125-4.298%2013.875-3.554%202.75-8.6%202.905-8.723%208.302-.097%204.237%208.457%208.5%208.088%2015.653-.406%207.857-15.508%2013.15-30.943%206.102-8.556-3.906-14.249-13.653-13.385-26.238C16.833%2052.334%2022.32%2043.658%2027.382%2039c5.977-5.503%2011.977-8.337%2019.97-8.112z'%3e%3c/path%3e%3ccircle%20id='ref-1--palette__inner'%20stroke-width='2.3'%20cx='41.873'%20cy='61.901'%20r='6.389'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle5'%20cy='44.56'%20cx='54.347'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle4'%20cx='40.443'%20cy='41.555'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle3'%20r='4.336'%20cy='51.102'%20cx='29.651'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle2'%20cx='25.293'%20cy='65.836'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle1'%20r='4.336'%20cy='79.326'%20cx='32.764'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle0'%20cx='46.669'%20cy='80.571'%20r='4.336'%3e%3c/circle%3e%3cpath%20id='ref-1--brush__bottom'%20d='M76.333%2089.333c-1.645-9.794-4.375-35.26-4.32-37.887.056-2.627%202.52-4.34%205.36-4.317%202.842.022%205.098%201.87%205.314%204.27.107%201.2-1.576%2028.06-2.318%2037.844-.332%204.374-3.31%204.413-4.036.09z'%20stroke-width='2.3'%20stroke-linejoin='round'%3e%3c/path%3e%3cpath%20id='ref-1--brush__top'%20stroke-linejoin='round'%20stroke-width='2.3'%20d='M77.184%2026.428s-5.621%207.02-5.621%2011.978c0%204.957%202.206%206.878%205.81%206.878%203.606%200%205.148-1.708%205.29-6.736.142-5.028-5.479-12.12-5.479-12.12z'%3e%3c/path%3e%3c/defs%3e%3c/svg%3e";function Li(){var n="/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",e="d581519332bdff74d3cb5001df8051c24d7c7191",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",statementMap:{0:{start:{line:20,column:16},end:{line:20,column:24}},1:{start:{line:21,column:41},end:{line:21,column:89}},2:{start:{line:24,column:4},end:{line:24,column:107}},3:{start:{line:29,column:4},end:{line:39,column:6}},4:{start:{line:44,column:4},end:{line:51,column:6}},5:{start:{line:56,column:4},end:{line:64,column:6}},6:{start:{line:68,column:10},end:{line:76,column:3}},7:{start:{line:78,column:4},end:{line:78,column:34}},8:{start:{line:81,column:4},end:{line:81,column:40}},9:{start:{line:83,column:11},end:{line:90,column:3}},10:{start:{line:84,column:4},end:{line:89,column:5}},11:{start:{line:85,column:6},end:{line:85,column:59}},12:{start:{line:87,column:17},end:{line:87,column:65}},13:{start:{line:88,column:6},end:{line:88,column:17}},14:{start:{line:92,column:14},end:{line:92,column:26}},15:{start:{line:93,column:18},end:{line:129,column:5}},16:{start:{line:130,column:24},end:{line:132,column:6}},17:{start:{line:131,column:6},end:{line:131,column:45}},18:{start:{line:133,column:4},end:{line:259,column:12}},19:{start:{line:144,column:33},end:{line:144,column:58}},20:{start:{line:153,column:33},end:{line:153,column:60}},21:{start:{line:162,column:33},end:{line:162,column:51}},22:{start:{line:189,column:80},end:{line:189,column:112}},23:{start:{line:193,column:82},end:{line:193,column:116}},24:{start:{line:197,column:87},end:{line:197,column:125}},25:{start:{line:201,column:83},end:{line:201,column:118}},26:{start:{line:205,column:84},end:{line:205,column:120}},27:{start:{line:209,column:88},end:{line:209,column:127}},28:{start:{line:222,column:33},end:{line:222,column:69}},29:{start:{line:225,column:38},end:{line:225,column:59}},30:{start:{line:226,column:20},end:{line:226,column:157}},31:{start:{line:228,column:115},end:{line:228,column:148}},32:{start:{line:229,column:20},end:{line:229,column:133}},33:{start:{line:245,column:33},end:{line:245,column:74}},34:{start:{line:248,column:18},end:{line:248,column:94}},35:{start:{line:262,column:19},end:{line:262,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:23,column:2},end:{line:23,column:3}},loc:{start:{line:23,column:11},end:{line:25,column:3}},line:23},1:{name:"(anonymous_1)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:11},end:{line:40,column:3}},line:28},2:{name:"(anonymous_2)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:52,column:3}},line:43},3:{name:"(anonymous_3)",decl:{start:{line:55,column:2},end:{line:55,column:3}},loc:{start:{line:55,column:11},end:{line:65,column:3}},line:55},4:{name:"(anonymous_4)",decl:{start:{line:77,column:2},end:{line:77,column:3}},loc:{start:{line:77,column:23},end:{line:79,column:3}},line:77},5:{name:"(anonymous_5)",decl:{start:{line:80,column:2},end:{line:80,column:3}},loc:{start:{line:80,column:28},end:{line:82,column:3}},line:80},6:{name:"(anonymous_6)",decl:{start:{line:83,column:11},end:{line:83,column:12}},loc:{start:{line:83,column:23},end:{line:90,column:3}},line:83},7:{name:"(anonymous_7)",decl:{start:{line:91,column:2},end:{line:91,column:3}},loc:{start:{line:91,column:11},end:{line:260,column:3}},line:91},8:{name:"(anonymous_8)",decl:{start:{line:130,column:35},end:{line:130,column:36}},loc:{start:{line:130,column:45},end:{line:132,column:5}},line:130},9:{name:"(anonymous_9)",decl:{start:{line:144,column:25},end:{line:144,column:26}},loc:{start:{line:144,column:33},end:{line:144,column:58}},line:144},10:{name:"(anonymous_10)",decl:{start:{line:153,column:25},end:{line:153,column:26}},loc:{start:{line:153,column:33},end:{line:153,column:60}},line:153},11:{name:"(anonymous_11)",decl:{start:{line:162,column:25},end:{line:162,column:26}},loc:{start:{line:162,column:33},end:{line:162,column:51}},line:162},12:{name:"(anonymous_12)",decl:{start:{line:189,column:74},end:{line:189,column:75}},loc:{start:{line:189,column:80},end:{line:189,column:112}},line:189},13:{name:"(anonymous_13)",decl:{start:{line:193,column:76},end:{line:193,column:77}},loc:{start:{line:193,column:82},end:{line:193,column:116}},line:193},14:{name:"(anonymous_14)",decl:{start:{line:197,column:81},end:{line:197,column:82}},loc:{start:{line:197,column:87},end:{line:197,column:125}},line:197},15:{name:"(anonymous_15)",decl:{start:{line:201,column:77},end:{line:201,column:78}},loc:{start:{line:201,column:83},end:{line:201,column:118}},line:201},16:{name:"(anonymous_16)",decl:{start:{line:205,column:78},end:{line:205,column:79}},loc:{start:{line:205,column:84},end:{line:205,column:120}},line:205},17:{name:"(anonymous_17)",decl:{start:{line:209,column:82},end:{line:209,column:83}},loc:{start:{line:209,column:88},end:{line:209,column:127}},line:209},18:{name:"(anonymous_18)",decl:{start:{line:222,column:26},end:{line:222,column:27}},loc:{start:{line:222,column:33},end:{line:222,column:69}},line:222},19:{name:"(anonymous_19)",decl:{start:{line:225,column:31},end:{line:225,column:32}},loc:{start:{line:225,column:38},end:{line:225,column:59}},line:225},20:{name:"(anonymous_20)",decl:{start:{line:225,column:65},end:{line:225,column:66}},loc:{start:{line:225,column:75},end:{line:227,column:19}},line:225},21:{name:"(anonymous_21)",decl:{start:{line:228,column:108},end:{line:228,column:109}},loc:{start:{line:228,column:115},end:{line:228,column:148}},line:228},22:{name:"(anonymous_22)",decl:{start:{line:228,column:154},end:{line:228,column:155}},loc:{start:{line:228,column:164},end:{line:230,column:19}},line:228},23:{name:"(anonymous_23)",decl:{start:{line:245,column:26},end:{line:245,column:27}},loc:{start:{line:245,column:33},end:{line:245,column:74}},line:245},24:{name:"(anonymous_24)",decl:{start:{line:247,column:65},end:{line:247,column:66}},loc:{start:{line:247,column:83},end:{line:249,column:17}},line:247}},branchMap:{0:{loc:{start:{line:84,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:84,column:4},end:{line:89,column:5}},{start:{line:86,column:11},end:{line:89,column:5}}],line:84}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx"],names:[],mappings:"AAmCW,SAAA,KAwLG,YAxLH;AAnCX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,cAAa;AAErB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP,OAAO,aAAa;AAEpB,OAAO,kBAAkB;AACzB,SAAS,uBAA6C;AACtD,SAAS,0BAA0B;AAInC,MAAM,UAAU,OAAO;AACvB,MAAM,mCAAmC,CAAC,UAAU,SAAS,EAAE,QAAQ,QAAS,IAAI,IAAI;AASxF,MAAM,iBAAiB,MAAM,UAAyB;AAAA,EACpD,SAAS;AACP,+BAAQ,QAAA,EAAK,WAAU,sBAAsB,UAAA,KAAK,MAAM,SAAA,CAAS;AAAA,EACnE;AACF;AAQA,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAW,WAAW,yBAAyB,KAAK,MAAM,SAAS;AAAA,QACnE,MAAM,KAAK,MAAM;AAAA,QACjB,KAAI;AAAA,QACJ,QAAO;AAAA,QACP,eAAY;AAAA,QAEX,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAOA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QAEvB,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAQA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QAEnB,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAmBA,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,QAAQ;AAAA,IACN,QAAQ;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,MAAM;AAAA,MACN,KAAK;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,EACF;AAAA,EAEA,gBAAgB,KAAe;AAC7B,SAAK,MAAM,cAAc,GAAG;AAAA,EAC9B;AAAA,EAEA,qBAAqB,KAAa;AAChC,SAAK,MAAM,KAAK,eAAe,GAAG;AAAA,EACpC;AAAA,EAEA,SAAS,CAAC,WAAmB;AAC3B,QAAI,WAAW,OAAO;AACnB,eAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,IAC5E,OACK;AACH,YAAM,KAAK,SAAS,cAAc,kBAAgB,MAAM;AACxD,SAAG,MAAM;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,QAAQ;AAAA,MACZ;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,KAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,SAAS;AAAA,QAClB,UAAU,KAAK,MAAM,aAAa;AAAA,MACpC;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,qBAAqB;AAAA,QAC9B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,sBAAsB;AAAA,QAC/B,UAAU,CAAC;AAAA,MACb;AAAA,IACF;AAEA,UAAM,cAAc,MAAM,KAAK,CAAC,SAAS;AACvC,aAAO,KAAK,OAAO,KAAK,MAAM;AAAA,IAChC,CAAC;AAED,+BAAQ,OAAA,EAAI,WAAU,oBACpB,UAAA,qBAAC,OAAA,EAAI,WAAU,2BACb,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,WAAU;AAAA,UAGV,UAAA;AAAA,YAAA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,YAAY;AAAA,gBAEtC,YAAE,aAAa;AAAA,cAAA;AAAA,YAClB;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,cAAc;AAAA,gBAExC,YAAE,cAAc;AAAA,cAAA;AAAA,YACnB;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,KAAK;AAAA,gBAE/B,YAAE,UAAU;AAAA,cAAA;AAAA,YACf;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,QAAO;AAAA,gBACP,KAAI;AAAA,gBACJ,MAAK;AAAA,gBAEL,UAAA;AAAA,kBAAA,oBAAC,SAAI,KAAK,cAAc,KAAK,EAAE,oBAAoB,EAAA,CAAG;AAAA,uCACrD,MAAA,EACC,UAAA;AAAA,oBAAA,oBAAC,QAAA,EAAK,WAAU,yBAAyB,UAAA,QAAQ,KAAA,CAAK;AAAA,oBACtD,qBAAC,QAAA,EAAK,WAAU,4BAA2B,UAAA;AAAA,sBAAA;AAAA,sBAAE,QAAQ;AAAA,oBAAA,EAAA,CAAQ;AAAA,kBAAA,EAAA,CAC/D;AAAA,gBAAA;AAAA,cAAA;AAAA,YACF;AAAA,UAAA;AAAA,QAAA;AAAA,MACF;AAAA,2BACC,OAAA,EAAI,WAAU,6BAA4B,MAAK,cAAa,cAAW,WACtE,UAAA;AAAA,QAAA,qBAAC,eAAA,EAAc,OAAM,YAAW,SAAS,MAAM,KAAK,MAAM,cAAc,MAAM,GAC5E,UAAA;AAAA,UAAA,oBAAC,iBAAA,CAAA,CAAgB;AAAA,UACjB,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,cAAa,SAAS,MAAM,KAAK,MAAM,cAAc,QAAQ,GAChF,UAAA;AAAA,UAAA,oBAAC,QAAA,CAAA,CAAO;AAAA,UACR,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,mBAAkB,SAAS,MAAM,KAAK,MAAM,cAAc,YAAY,GACzF,UAAA;AAAA,UAAA,oBAAC,QAAA,CAAA,CAAO;AAAA,UACR,oBAAC,UAAA,EAAU,UAAA,EAAE,aAAa,EAAA,CAAE;AAAA,QAAA,EAAA,CAC9B;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,eAAc,SAAS,MAAM,KAAK,MAAM,cAAc,SAAS,GAClF,UAAA;AAAA,UAAA,oBAAC,UAAA,CAAA,CAAS;AAAA,UACV,oBAAC,UAAA,EAAU,UAAA,EAAE,cAAc,EAAA,CAAE;AAAA,QAAA,EAAA,CAC/B;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,gBAAe,SAAS,MAAM,KAAK,MAAM,cAAc,UAAU,GACpF,UAAA;AAAA,UAAA,oBAAC,YAAA,CAAA,CAAW;AAAA,UACZ,oBAAC,UAAA,EAAU,UAAA,EAAE,gBAAgB,EAAA,CAAE;AAAA,QAAA,EAAA,CACjC;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,oBAAmB,SAAS,MAAM,KAAK,MAAM,cAAc,aAAa,GAC3F,UAAA;AAAA,UAAA,oBAAC,UAAA,CAAA,CAAS;AAAA,UACV,oBAAC,UAAA,EAAU,UAAA,EAAE,cAAc,EAAA,CAAE;AAAA,QAAA,EAAA,CAC/B;AAAA,QAEA,qBAAC,eAAA,EAAc,OAAM,eACnB,UAAA;AAAA,UAAA,oBAAC,cAAA,CAAA,CAAa;AAAA,+BACb,UAAA,EAAU,UAAA;AAAA,YAAA,EAAE,MAAM;AAAA,YACjB;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,gBAAgB,EAAE,OAAO,KAAiB;AAAA,gBAChE,OAAO,aAAa;AAAA,gBAEnB,UAAA;AAAA,kBAAA,MAAM,OAAO,OAAK,EAAE,UAAU,SAAS,EAAE,IAAI,CAAC,SAAS;AACtD,2BACE,oBAAC,UAAA,EAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAAU,eAAa,KAAK,IAC9E,UAAA,KAAK,MAAA,GADK,KAAK,EAElB;AAAA,kBAEJ,CAAC;AAAA,kBACD,oBAAC,YAAA,EAAS,OAAO,EAAE,qBAAqB,GACrC,UAAA,MAAM,OAAO,CAAA,MAAK,EAAE,UAAU,qBAAqB,EAAE,IAAI,CAAC,SAAS;AAClE,2BACE,oBAAC,UAAA,EAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAClD,UAAA,KAAK,MAAA,GADK,KAAK,EAElB;AAAA,kBAEJ,CAAC,EAAA,CACH;AAAA,gBAAA;AAAA,cAAA;AAAA,YACF;AAAA,UAAA,EAAA,CACF;AAAA,QAAA,EAAA,CACF;AAAA,QAEA,qBAAC,eAAA,EAAc,OAAM,gBACnB,UAAA;AAAA,UAAA,oBAAC,YAAA,CAAA,CAAW;AAAA,+BACX,UAAA,EAAS,UAAA;AAAA,YAAA;AAAA,YACR;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,qBAAqB,EAAE,OAAO,KAAK;AAAA,gBACzD,OAAO,KAAK,MAAM,KAAK;AAAA,gBAEtB,UAAA,OAAO,QAAQ,kBAAkB,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM;AACxD,yBACE,oBAAC,UAAA,EAAkB,OAAO,MACvB,kBADU,IAEb;AAAA,gBAEJ,CAAC;AAAA,cAAA;AAAA,YACH;AAAA,UAAA,EAAA,CACF;AAAA,QAAA,EAAA,CACF;AAAA,QAEA,qBAAC,aAAA,EAAY,MAAM,6CACjB,UAAA;AAAA,UAAA,oBAAC,eAAA,CAAA,CAAc;AAAA,UACf,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,MAAA,EAAA,CACF;AAAA,IAAA,EAAA,CACF,EAAA,CACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d581519332bdff74d3cb5001df8051c24d7c7191"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Li=function(){return s},s}Li();const SDe=(Li().s[0]++,gDe()),ZM=(Li().s[1]++,["chrome","firefox"].indexOf(SDe.name)>-1);class V0 extends On.Component{render(){return Li().f[0]++,Li().s[2]++,ie.jsx("span",{className:"maputnik-icon-text",children:this.props.children})}}class EDe extends On.Component{render(){return Li().f[1]++,Li().s[3]++,ie.jsx("a",{className:Yg("maputnik-toolbar-link",this.props.className),href:this.props.href,rel:"noopener noreferrer",target:"_blank","data-wd-key":"toolbar:link",children:this.props.children})}}class jV extends On.Component{render(){return Li().f[2]++,Li().s[4]++,ie.jsx("div",{className:"maputnik-toolbar-select","data-wd-key":this.props.wdKey,children:this.props.children})}}class c_ extends On.Component{render(){return Li().f[3]++,Li().s[5]++,ie.jsx("button",{className:"maputnik-toolbar-action","data-wd-key":this.props.wdKey,onClick:this.props.onClick,children:this.props.children})}}class ODe extends On.Component{state=(Li().s[6]++,{isOpen:{settings:!1,sources:!1,open:!1,add:!1,export:!1}});handleSelection(e){Li().f[4]++,Li().s[7]++,this.props.onSetMapState(e)}handleLanguageChange(e){Li().f[5]++,Li().s[8]++,this.props.i18n.changeLanguage(e)}onSkip=(Li().s[9]++,e=>{if(Li().f[6]++,Li().s[10]++,e==="map")Li().b[0][0]++,Li().s[11]++,document.querySelector(".maplibregl-canvas").focus();else{Li().b[0][1]++;const t=(Li().s[12]++,document.querySelector("#skip-target-"+e));Li().s[13]++,t.focus()}});render(){Li().f[7]++;const e=(Li().s[14]++,this.props.t),t=(Li().s[15]++,[{id:"map",group:"general",title:e("Map")},{id:"inspect",group:"general",title:e("Inspect"),disabled:this.props.renderer==="ol"},{id:"filter-deuteranopia",group:"color-accessibility",title:e("Deuteranopia filter"),disabled:!ZM},{id:"filter-protanopia",group:"color-accessibility",title:e("Protanopia filter"),disabled:!ZM},{id:"filter-tritanopia",group:"color-accessibility",title:e("Tritanopia filter"),disabled:!ZM},{id:"filter-achromatopsia",group:"color-accessibility",title:e("Achromatopsia filter"),disabled:!ZM}]),i=(Li().s[16]++,t.find(r=>(Li().f[8]++,Li().s[17]++,r.id===this.props.mapState)));return Li().s[18]++,ie.jsx("nav",{className:"maputnik-toolbar",children:ie.jsxs("div",{className:"maputnik-toolbar__inner",children:[ie.jsxs("div",{className:"maputnik-toolbar-logo-container",children:[ie.jsx("button",{"data-wd-key":"root:skip:layer-list",className:"maputnik-toolbar-skip",onClick:r=>(Li().f[9]++,Li().s[19]++,this.onSkip("layer-list")),children:e("Layers list")}),ie.jsx("button",{"data-wd-key":"root:skip:layer-editor",className:"maputnik-toolbar-skip",onClick:r=>(Li().f[10]++,Li().s[20]++,this.onSkip("layer-editor")),children:e("Layer editor")}),ie.jsx("button",{"data-wd-key":"root:skip:map-view",className:"maputnik-toolbar-skip",onClick:r=>(Li().f[11]++,Li().s[21]++,this.onSkip("map")),children:e("Map view")}),ie.jsxs("a",{className:"maputnik-toolbar-logo",target:"blank",rel:"noreferrer noopener",href:"https://github.com/maplibre/maputnik",children:[ie.jsx("img",{src:wDe,alt:e("Maputnik on GitHub")}),ie.jsxs("h1",{children:[ie.jsx("span",{className:"maputnik-toolbar-name",children:zV.name}),ie.jsxs("span",{className:"maputnik-toolbar-version",children:["v",zV.version]})]})]})]}),ie.jsxs("div",{className:"maputnik-toolbar__actions",role:"navigation","aria-label":"Toolbar",children:[ie.jsxs(c_,{wdKey:"nav:open",onClick:()=>(Li().f[12]++,Li().s[22]++,this.props.onToggleModal("open")),children:[ie.jsx(Tfe,{}),ie.jsx(V0,{children:e("Open")})]}),ie.jsxs(c_,{wdKey:"nav:export",onClick:()=>(Li().f[13]++,Li().s[23]++,this.props.onToggleModal("export")),children:[ie.jsx(M9,{}),ie.jsx(V0,{children:e("Save")})]}),ie.jsxs(c_,{wdKey:"nav:code-editor",onClick:()=>(Li().f[14]++,Li().s[24]++,this.props.onToggleModal("codeEditor")),children:[ie.jsx(Sfe,{}),ie.jsx(V0,{children:e("Code Editor")})]}),ie.jsxs(c_,{wdKey:"nav:sources",onClick:()=>(Li().f[15]++,Li().s[25]++,this.props.onToggleModal("sources")),children:[ie.jsx(Nfe,{}),ie.jsx(V0,{children:e("Data Sources")})]}),ie.jsxs(c_,{wdKey:"nav:settings",onClick:()=>(Li().f[16]++,Li().s[26]++,this.props.onToggleModal("settings")),children:[ie.jsx(Rfe,{}),ie.jsx(V0,{children:e("Style Settings")})]}),ie.jsxs(c_,{wdKey:"nav:global-state",onClick:()=>(Li().f[17]++,Li().s[27]++,this.props.onToggleModal("globalState")),children:[ie.jsx($fe,{}),ie.jsx(V0,{children:e("Global State")})]}),ie.jsxs(jV,{wdKey:"nav:inspect",children:[ie.jsx(Efe,{}),ie.jsxs(V0,{children:[e("View"),ie.jsxs("select",{className:"maputnik-select","data-wd-key":"maputnik-select",onChange:r=>(Li().f[18]++,Li().s[28]++,this.handleSelection(r.target.value)),value:i?.id,children:[t.filter(r=>(Li().f[19]++,Li().s[29]++,r.group==="general")).map(r=>(Li().f[20]++,Li().s[30]++,ie.jsx("option",{value:r.id,disabled:r.disabled,"data-wd-key":r.id,children:r.title},r.id))),ie.jsx("optgroup",{label:e("Color accessibility"),children:t.filter(r=>(Li().f[21]++,Li().s[31]++,r.group==="color-accessibility")).map(r=>(Li().f[22]++,Li().s[32]++,ie.jsx("option",{value:r.id,disabled:r.disabled,children:r.title},r.id)))})]})]})]}),ie.jsxs(jV,{wdKey:"nav:language",children:[ie.jsx(kfe,{}),ie.jsxs(V0,{children:["Language",ie.jsx("select",{className:"maputnik-select","data-wd-key":"maputnik-lang-select",onChange:r=>(Li().f[23]++,Li().s[33]++,this.handleLanguageChange(r.target.value)),value:this.props.i18n.language,children:Object.entries(dZ).map(([r,o])=>(Li().f[24]++,Li().s[34]++,ie.jsx("option",{value:r,children:o},r)))})]})]}),ie.jsxs(EDe,{href:"https://github.com/maplibre/maputnik/wiki",children:[ie.jsx(Ofe,{}),ie.jsx(V0,{children:e("Help")})]})]})]})})}}const BDe=(Li().s[35]++,$o()(ODe));function nE(){var n="/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",e="d17a642b15310eb6111b086bd920c67ec86a8271",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:6,column:3}},line:4}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx"],names:[],mappings:"AAQW;AARX,OAAO,WAAW;AAMlB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,6BACnB,eAAK,MAAM,UACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17a642b15310eb6111b086bd920c67ec86a8271"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return nE=function(){return s},s}nE();class NV extends On.Component{render(){return nE().f[0]++,nE().s[0]++,ie.jsx("div",{className:"maputnik-scroll-container",children:this.props.children})}}function Jf(){var n="/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",e="d10f2b4393c64530a7dc27936dc2b0d9d69d1ee7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:8,column:46}},1:{start:{line:9,column:4},end:{line:21,column:12}},2:{start:{line:24,column:18},end:{line:24,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:22,column:3}},line:7}},branchMap:{0:{loc:{start:{line:12,column:8},end:{line:12,column:190}},type:"binary-expr",locations:[{start:{line:12,column:8},end:{line:12,column:29}},{start:{line:12,column:49},end:{line:12,column:190}}],line:12},1:{loc:{start:{line:13,column:8},end:{line:16,column:12}},type:"binary-expr",locations:[{start:{line:13,column:8},end:{line:13,column:30}},{start:{line:13,column:50},end:{line:16,column:12}}],line:13},2:{loc:{start:{line:19,column:6},end:{line:19,column:123}},type:"binary-expr",locations:[{start:{line:19,column:6},end:{line:19,column:23}},{start:{line:19,column:43},end:{line:19,column:123}}],line:19}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx"],names:[],mappings:"AAyBY,SAKyB,UALzB,KAKyB,YALzB;AAzBZ,OAAO,WAAW;AAClB,OAAO,qBAAqB;AAC5B,SAA+B,uBAAuB;AACtD,SAAS,mBAAmB;AAY5B,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EAEtE,SAAS;AACP,aAAS,KAAK,MAAM,KAAK,MAAM,KAAK,IAAI;AAExC,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C,+BAAC,SAAI,WAAU,mBACZ;AAAA,WAAK,MAAM;AAAA,MACZ,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM,cAAc,oBAAC,SAAI,WAAU,+BACvC,8BAAC,mBACE,eAAK,MAAM,YACd,GACF;AAAA,QAEC,CAAC,KAAK,MAAM,cAAc,iCACzB;AAAA,8BAAC,SAAI,WAAU,wBACZ,eAAK,MAAM,WACd;AAAA,UACA,oBAAC,SAAI,WAAU,0BACb,8BAAC,mBACE,eAAK,MAAM,aACd,GACF;AAAA,WACF;AAAA,QACC,KAAK,MAAM;AAAA,SACd;AAAA,MACC,KAAK,MAAM,UAAU,oBAAC,SAAI,WAAU,0BAClC,eAAK,MAAM,QACd;AAAA,MAEC,KAAK,MAAM;AAAA,OACd,GACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d10f2b4393c64530a7dc27936dc2b0d9d69d1ee7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Jf=function(){return s},s}Jf();class IDe extends On.Component{render(){return Jf().f[0]++,Jf().s[0]++,document.body.dir=this.props.i18n.dir(),Jf().s[1]++,ie.jsx(rx.Provider,{value:{size:"14px"},children:ie.jsxs("div",{className:"maputnik-layout",children:[this.props.toolbar,ie.jsxs("div",{className:"maputnik-layout-main",children:[(Jf().b[0][0]++,this.props.codeEditor&&(Jf().b[0][1]++,ie.jsx("div",{className:"maputnik-layout-code-editor",children:ie.jsx(NV,{children:this.props.codeEditor})}))),(Jf().b[1][0]++,!this.props.codeEditor&&(Jf().b[1][1]++,ie.jsxs(ie.Fragment,{children:[ie.jsx("div",{className:"maputnik-layout-list",children:this.props.layerList}),ie.jsx("div",{className:"maputnik-layout-drawer",children:ie.jsx(NV,{children:this.props.layerEditor})})]}))),this.props.map]}),(Jf().b[2][0]++,this.props.bottom&&(Jf().b[2][1]++,ie.jsx("div",{className:"maputnik-layout-bottom",children:this.props.bottom}))),this.props.modals]})})}}const kDe=(Jf().s[2]++,$o()(IDe));function Ba(){var n="/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",e="35d9aec71cb86113da5d8ac4f197fbf609a8818e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:38},end:{line:11,column:48}},2:{start:{line:12,column:19},end:{line:40,column:6}},3:{start:{line:14,column:6},end:{line:38,column:7}},4:{start:{line:15,column:27},end:{line:15,column:32}},5:{start:{line:16,column:24},end:{line:16,column:73}},6:{start:{line:17,column:8},end:{line:35,column:13}},7:{start:{line:30,column:31},end:{line:30,column:74}},8:{start:{line:37,column:8},end:{line:37,column:32}},9:{start:{line:39,column:6},end:{line:39,column:120}},10:{start:{line:41,column:18},end:{line:43,column:6}},11:{start:{line:42,column:6},end:{line:42,column:68}},12:{start:{line:44,column:4},end:{line:47,column:9}},13:{start:{line:50,column:24},end:{line:50,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:25},end:{line:8,column:5}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:48,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:42},end:{line:12,column:43}},loc:{start:{line:12,column:58},end:{line:40,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:31},end:{line:30,column:74}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:41,column:40},end:{line:41,column:41}},loc:{start:{line:41,column:50},end:{line:43,column:5}},line:41}},branchMap:{0:{loc:{start:{line:14,column:6},end:{line:38,column:7}},type:"if",locations:[{start:{line:14,column:6},end:{line:38,column:7}},{start:{line:36,column:13},end:{line:38,column:7}}],line:14},1:{loc:{start:{line:14,column:10},end:{line:14,column:55}},type:"binary-expr",locations:[{start:{line:14,column:10},end:{line:14,column:22}},{start:{line:14,column:26},end:{line:14,column:55}}],line:14},2:{loc:{start:{line:24,column:10},end:{line:34,column:14}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:50}},{start:{line:24,column:70},end:{line:34,column:14}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx"],names:[],mappings:"AA6BY,SAIE,UAHM,KADR;AA7BZ,OAAO,WAAW;AAClB,SAAQ,qBAAoB;AAE5B,SAAS,OAA6B,uBAAuB;AAY7D,MAAM,gCAAgC,MAAM,UAAwC;AAAA,EAClF,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,mBAAkB,IAAI,KAAK;AACrC,UAAM,SAAS,KAAK,MAAM,QAAQ,IAAI,CAAC,OAAO,QAAQ;AACpD,UAAI;AACJ,UAAI,MAAM,UAAU,MAAM,OAAO,SAAS,SAAS;AACjD,cAAM,EAAC,OAAM,IAAI;AACjB,cAAM,UAAU,KAAK,MAAM,UAAU,OAAO,OAAO,KAAK,KAAK,EAAE;AAC/D,kBACE,iCACE;AAAA,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAM,wBAAc,OAAO,GAAE;AAAA,YAAO;AAAA,YAAG,OAAO,KAAK;AAAA,aAC5D;AAAA,UACC,uBAAuB,OAAO,KAAK,SAClC,iCAAE;AAAA;AAAA,YAEA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,MAAM,KAAK,MAAM,cAAe,OAAO,KAAK,KAAK;AAAA,gBAEzD,YAAE,iBAAiB;AAAA;AAAA,YACtB;AAAA,aACF;AAAA,WAEJ;AAAA,MAEJ,OACK;AACH,kBAAU,MAAM;AAAA,MAClB;AACA,aAAO,oBAAC,OAAqB,WAAU,gCACpC,qBADY,WAAS,GAExB;AAAA,IACF,CAAC;AAED,UAAM,QAAQ,KAAK,MAAM,OAAO,IAAI,CAAC,GAAG,MAAM;AAC5C,aAAO,oBAAC,OAAmB,eAAZ,UAAQ,CAAM;AAAA,IAC/B,CAAC;AAED,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA;AAAA,MACA;AAAA,OACH;AAAA,EACF;AACF;AAEA,MAAM,kBAAkB,gBAAgB,EAAE,uBAAuB;AACjE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"35d9aec71cb86113da5d8ac4f197fbf609a8818e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ba=function(){return s},s}Ba();class TDe extends On.Component{static defaultProps=(Ba().s[0]++,{onLayerSelect:()=>{Ba().f[0]++}});render(){Ba().f[1]++;const{t:e,selectedLayerIndex:t}=(Ba().s[1]++,this.props),i=(Ba().s[2]++,this.props.errors?.map((o,s)=>{Ba().f[2]++;let a;if(Ba().s[3]++,Ba().b[1][0]++,o.parsed&&(Ba().b[1][1]++,o.parsed.type==="layer")){Ba().b[0][0]++;const{parsed:c}=(Ba().s[4]++,o),h=(Ba().s[5]++,this.props.mapStyle?.layers[c.data.index].id);Ba().s[6]++,a=ie.jsxs(ie.Fragment,{children:[ie.jsxs(vb,{t:e,children:["Layer ",ie.jsx("span",{children:tae(h)}),": ",c.data.message]}),(Ba().b[2][0]++,t!==c.data.index&&(Ba().b[2][1]++,ie.jsxs(ie.Fragment,{children:["",ie.jsx("button",{className:"maputnik-message-panel__switch-button",onClick:()=>(Ba().f[3]++,Ba().s[7]++,this.props.onLayerSelect(c.data.index)),children:e("switch to layer")})]})))]})}else Ba().b[0][1]++,Ba().s[8]++,a=o.message;return Ba().s[9]++,ie.jsx("p",{className:"maputnik-message-panel-error",children:a},"error-"+s)})),r=(Ba().s[10]++,this.props.infos?.map((o,s)=>(Ba().f[4]++,Ba().s[11]++,ie.jsx("p",{children:o},"info-"+s))));return Ba().s[12]++,ie.jsxs("div",{className:"maputnik-message-panel",children:[i,r]})}}const RDe=(Ba().s[13]++,$o()(TDe));function R4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",e="6904abccc922d01222214bca1ee3bdee75077020",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:148}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,gBAA0C;AACjD,OAAO,cAAc;AASrB,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6904abccc922d01222214bca1ee3bdee75077020"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return R4=function(){return s},s}R4();R4().s[0]++;const iE=n=>(R4().f[0]++,R4().s[1]++,ie.jsx(Dy,{label:n.label,fieldSpec:n.fieldSpec,children:ie.jsx(UD,{...n})}));function D4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",e="4d2523cd21b202fb5e80e08624becdbab30e967f",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,iBAA0C;AACjD,OAAO,WAAW;AAWlB,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4d2523cd21b202fb5e80e08624becdbab30e967f"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return D4=function(){return s},s}D4();D4().s[0]++;const $p=n=>(D4().f[0]++,D4().s[1]++,ie.jsx(Gs,{label:n.label,fieldSpec:n.fieldSpec,children:ie.jsx(m1,{...n})}));function P4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",e="5d41bf44c48c380a773c8c6219651c4348518afa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx"],names:[],mappings:"AAcM;AAdN,OAAO,WAAW;AAClB,OAAO,iBAA0C;AAUjD,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5d41bf44c48c380a773c8c6219651c4348518afa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return P4=function(){return s},s}P4();P4().s[0]++;const Ad=n=>(P4().f[0]++,P4().s[1]++,ie.jsx(Gs,{label:n.label,fieldSpec:n.fieldSpec,children:ie.jsx(um,{...n})}));function U4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",e="6e4f23f735ab05a9622545421c68df85e4603d43",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",statementMap:{0:{start:{line:4,column:17},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:143}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:17},end:{line:4,column:18}},loc:{start:{line:4,column:28},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,cAAqD;AAC5D,OAAO,WAAW;AAWlB,MAAM,WAAoC,CAAC,UAAU;AACnD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,YAAU,GAAG,OAAO,GACvB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6e4f23f735ab05a9622545421c68df85e4603d43"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return U4=function(){return s},s}U4();U4().s[0]++;const Ox=n=>(U4().f[0]++,U4().s[1]++,ie.jsx(Gs,{label:n.label,fieldSpec:n.fieldSpec,children:ie.jsx(SL,{...n})}));function K4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",e="245ef066962174fcd1012332d28af93e7b97872c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,iBAA0C;AAWjD,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"245ef066962174fcd1012332d28af93e7b97872c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return K4=function(){return s},s}K4();K4().s[0]++;const L4=n=>(K4().f[0]++,K4().s[1]++,ie.jsx(Gs,{label:n.label,fieldSpec:n.fieldSpec,children:ie.jsx(nC,{...n})}));function F4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",e="c3637509a0af6618b52e814bed4254c2e3fa3b7a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",statementMap:{0:{start:{line:4,column:18},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:147}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:18},end:{line:4,column:19}},loc:{start:{line:4,column:29},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,eAAsC;AAC7C,OAAO,cAAc;AAWrB,MAAM,YAAsC,CAAC,UAAU;AACrD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c3637509a0af6618b52e814bed4254c2e3fa3b7a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return F4=function(){return s},s}F4();F4().s[0]++;const DDe=n=>(F4().f[0]++,F4().s[1]++,ie.jsx(Dy,{label:n.label,fieldSpec:n.fieldSpec,children:ie.jsx(wL,{...n})}));function z4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",e="81b03af9ad032d255df7823d843b73e8fa5e3f61",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:145}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,gBAAwC;AAW/C,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"81b03af9ad032d255df7823d843b73e8fa5e3f61"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return z4=function(){return s},s}z4();z4().s[0]++;const PDe=n=>(z4().f[0]++,z4().s[1]++,ie.jsx(Gs,{label:n.label,fieldSpec:n.fieldSpec,children:ie.jsx(ML,{...n})}));function j4(){var n="/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",e="3fd72cd1ec4be346f0d6d854a97e371e1b9c2997",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",statementMap:{0:{start:{line:1,column:13},end:{line:32,column:2}},1:{start:{line:1,column:21},end:{line:32,column:1}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:13},end:{line:1,column:14}},loc:{start:{line:1,column:21},end:{line:32,column:1}},line:1}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts"],names:[],mappings:"AAEA,MAAM,OAAO,CAAC,OAAkB;AAAA,EAC9B,UAAU;AAAA,IACR,uBAAuB;AAAA,MACrB,OAAO,EAAE,uBAAuB;AAAA,MAChC,KAAK,EAAE,yCAAyC;AAAA,MAChD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,4BAA4B;AAAA,MAC1B,OAAO,EAAE,4BAA4B;AAAA,MACrC,KAAK,EAAE,iDAAiD;AAAA,MACxD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,qBAAqB;AAAA,MACnB,OAAO,EAAE,qBAAqB;AAAA,MAC9B,KAAK,EAAE,0BAA0B;AAAA,MACjC,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,yBAAyB;AAAA,MACvB,OAAO,EAAE,yBAAyB;AAAA,MAClC,KAAK,EAAE,8CAA8C;AAAA,MACrD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,gBAAgB;AAAA,MACd,OAAO,EAAE,gBAAgB;AAAA,MACzB,KAAK,EAAE,sDAAsD;AAAA,IAC/D;AAAA,EACF;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3fd72cd1ec4be346f0d6d854a97e371e1b9c2997"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return j4=function(){return s},s}j4();j4().s[0]++;const iae=n=>(j4().f[0]++,j4().s[1]++,{maputnik:{maptiler_access_token:{label:n("MapTiler Access Token"),doc:n("Public access token for MapTiler Cloud."),docUrl:"https://docs.maptiler.com/cloud/api/authentication-key/",docUrlLinkText:n("Learn More")},thunderforest_access_token:{label:n("Thunderforest Access Token"),doc:n("Public access token for Thunderforest services."),docUrl:"https://www.thunderforest.com/docs/apikeys/",docUrlLinkText:n("Learn More")},stadia_access_token:{label:n("Stadia Maps API Key"),doc:n("API key for Stadia Maps."),docUrl:"https://docs.stadiamaps.com/authentication/",docUrlLinkText:n("Learn More")},locationiq_access_token:{label:n("LocationIQ Access Token"),doc:n("Public access token for LocationIQ services."),docUrl:"https://docs.locationiq.com/docs/maps",docUrlLinkText:n("Learn More")},style_renderer:{label:n("Style Renderer"),doc:n("Choose the default Maputnik renderer for this style.")}}});function En(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx",e="99e5ed3645da84d03156e916f41e6bd97a8da4f4",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx",statementMap:{0:{start:{line:16,column:23},end:{line:18,column:5}},1:{start:{line:19,column:4},end:{line:23,column:5}},2:{start:{line:20,column:6},end:{line:20,column:34}},3:{start:{line:22,column:6},end:{line:22,column:35}},4:{start:{line:24,column:4},end:{line:27,column:7}},5:{start:{line:30,column:18},end:{line:32,column:5}},6:{start:{line:33,column:4},end:{line:37,column:5}},7:{start:{line:34,column:6},end:{line:34,column:29}},8:{start:{line:36,column:6},end:{line:36,column:30}},9:{start:{line:38,column:4},end:{line:41,column:7}},10:{start:{line:44,column:20},end:{line:46,column:5}},11:{start:{line:47,column:4},end:{line:51,column:5}},12:{start:{line:48,column:6},end:{line:48,column:31}},13:{start:{line:50,column:6},end:{line:50,column:32}},14:{start:{line:52,column:4},end:{line:55,column:7}},15:{start:{line:58,column:23},end:{line:60,column:5}},16:{start:{line:61,column:4},end:{line:65,column:5}},17:{start:{line:62,column:6},end:{line:62,column:29}},18:{start:{line:64,column:6},end:{line:64,column:30}},19:{start:{line:66,column:4},end:{line:69,column:7}},20:{start:{line:72,column:25},end:{line:74,column:5}},21:{start:{line:75,column:4},end:{line:79,column:5}},22:{start:{line:76,column:6},end:{line:76,column:36}},23:{start:{line:78,column:6},end:{line:78,column:37}},24:{start:{line:80,column:4},end:{line:80,column:44}},25:{start:{line:83,column:21},end:{line:83,column:55}},26:{start:{line:84,column:54},end:{line:84,column:64}},27:{start:{line:85,column:16},end:{line:85,column:38}},28:{start:{line:86,column:18},end:{line:86,column:49}},29:{start:{line:87,column:23},end:{line:87,column:59}},30:{start:{line:88,column:20},end:{line:88,column:53}},31:{start:{line:89,column:23},end:{line:89,column:59}},32:{start:{line:90,column:4},end:{line:335,column:6}},33:{start:{line:105,column:35},end:{line:105,column:74}},34:{start:{line:115,column:35},end:{line:115,column:75}},35:{start:{line:125,column:35},end:{line:125,column:76}},36:{start:{line:135,column:35},end:{line:135,column:76}},37:{start:{line:145,column:35},end:{line:145,column:104}},38:{start:{line:155,column:35},end:{line:155,column:105}},39:{start:{line:165,column:35},end:{line:165,column:98}},40:{start:{line:175,column:35},end:{line:175,column:102}},41:{start:{line:187,column:35},end:{line:187,column:76}},42:{start:{line:197,column:35},end:{line:197,column:74}},43:{start:{line:207,column:35},end:{line:207,column:77}},44:{start:{line:217,column:35},end:{line:217,column:75}},45:{start:{line:229,column:35},end:{line:229,column:76}},46:{start:{line:239,column:35},end:{line:239,column:75}},47:{start:{line:249,column:35},end:{line:249,column:79}},48:{start:{line:261,column:35},end:{line:261,column:78}},49:{start:{line:271,column:35},end:{line:271,column:78}},50:{start:{line:281,column:35},end:{line:281,column:84}},51:{start:{line:291,column:35},end:{line:291,column:80}},52:{start:{line:301,column:35},end:{line:301,column:83}},53:{start:{line:316,column:35},end:{line:316,column:67}},54:{start:{line:330,column:35},end:{line:330,column:87}},55:{start:{line:338,column:22},end:{line:338,column:62}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:44},end:{line:28,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:39},end:{line:42,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:41},end:{line:56,column:3}},line:43},3:{name:"(anonymous_3)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:30},end:{line:70,column:3}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:39},end:{line:81,column:3}},line:71},5:{name:"(anonymous_5)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:11},end:{line:336,column:3}},line:82},6:{name:"(anonymous_6)",decl:{start:{line:105,column:24},end:{line:105,column:25}},loc:{start:{line:105,column:35},end:{line:105,column:74}},line:105},7:{name:"(anonymous_7)",decl:{start:{line:115,column:24},end:{line:115,column:25}},loc:{start:{line:115,column:35},end:{line:115,column:75}},line:115},8:{name:"(anonymous_8)",decl:{start:{line:125,column:24},end:{line:125,column:25}},loc:{start:{line:125,column:35},end:{line:125,column:76}},line:125},9:{name:"(anonymous_9)",decl:{start:{line:135,column:24},end:{line:135,column:25}},loc:{start:{line:135,column:35},end:{line:135,column:76}},line:135},10:{name:"(anonymous_10)",decl:{start:{line:145,column:24},end:{line:145,column:25}},loc:{start:{line:145,column:35},end:{line:145,column:104}},line:145},11:{name:"(anonymous_11)",decl:{start:{line:155,column:24},end:{line:155,column:25}},loc:{start:{line:155,column:35},end:{line:155,column:105}},line:155},12:{name:"(anonymous_12)",decl:{start:{line:165,column:24},end:{line:165,column:25}},loc:{start:{line:165,column:35},end:{line:165,column:98}},line:165},13:{name:"(anonymous_13)",decl:{start:{line:175,column:24},end:{line:175,column:25}},loc:{start:{line:175,column:35},end:{line:175,column:102}},line:175},14:{name:"(anonymous_14)",decl:{start:{line:187,column:24},end:{line:187,column:25}},loc:{start:{line:187,column:35},end:{line:187,column:76}},line:187},15:{name:"(anonymous_15)",decl:{start:{line:197,column:24},end:{line:197,column:25}},loc:{start:{line:197,column:35},end:{line:197,column:74}},line:197},16:{name:"(anonymous_16)",decl:{start:{line:207,column:24},end:{line:207,column:25}},loc:{start:{line:207,column:35},end:{line:207,column:77}},line:207},17:{name:"(anonymous_17)",decl:{start:{line:217,column:24},end:{line:217,column:25}},loc:{start:{line:217,column:35},end:{line:217,column:75}},line:217},18:{name:"(anonymous_18)",decl:{start:{line:229,column:24},end:{line:229,column:25}},loc:{start:{line:229,column:35},end:{line:229,column:76}},line:229},19:{name:"(anonymous_19)",decl:{start:{line:239,column:24},end:{line:239,column:25}},loc:{start:{line:239,column:35},end:{line:239,column:75}},line:239},20:{name:"(anonymous_20)",decl:{start:{line:249,column:24},end:{line:249,column:25}},loc:{start:{line:249,column:35},end:{line:249,column:79}},line:249},21:{name:"(anonymous_21)",decl:{start:{line:261,column:24},end:{line:261,column:25}},loc:{start:{line:261,column:35},end:{line:261,column:78}},line:261},22:{name:"(anonymous_22)",decl:{start:{line:271,column:24},end:{line:271,column:25}},loc:{start:{line:271,column:35},end:{line:271,column:78}},line:271},23:{name:"(anonymous_23)",decl:{start:{line:281,column:24},end:{line:281,column:25}},loc:{start:{line:281,column:35},end:{line:281,column:84}},line:281},24:{name:"(anonymous_24)",decl:{start:{line:291,column:24},end:{line:291,column:25}},loc:{start:{line:291,column:35},end:{line:291,column:80}},line:291},25:{name:"(anonymous_25)",decl:{start:{line:301,column:24},end:{line:301,column:25}},loc:{start:{line:301,column:35},end:{line:301,column:83}},line:301},26:{name:"(anonymous_26)",decl:{start:{line:316,column:24},end:{line:316,column:25}},loc:{start:{line:316,column:35},end:{line:316,column:67}},line:316},27:{name:"(anonymous_27)",decl:{start:{line:330,column:24},end:{line:330,column:25}},loc:{start:{line:330,column:35},end:{line:330,column:87}},line:330}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:23,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:23,column:5}},{start:{line:21,column:11},end:{line:23,column:5}}],line:19},1:{loc:{start:{line:33,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:37,column:5}},{start:{line:35,column:11},end:{line:37,column:5}}],line:33},2:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:49,column:11},end:{line:51,column:5}}],line:47},3:{loc:{start:{line:61,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:61,column:4},end:{line:65,column:5}},{start:{line:63,column:11},end:{line:65,column:5}}],line:61},4:{loc:{start:{line:75,column:4},end:{line:79,column:5}},type:"if",locations:[{start:{line:75,column:4},end:{line:79,column:5}},{start:{line:77,column:11},end:{line:79,column:5}}],line:75},5:{loc:{start:{line:83,column:21},end:{line:83,column:55}},type:"binary-expr",locations:[{start:{line:83,column:21},end:{line:83,column:49}},{start:{line:83,column:53},end:{line:83,column:55}}],line:83},6:{loc:{start:{line:86,column:18},end:{line:86,column:49}},type:"binary-expr",locations:[{start:{line:86,column:18},end:{line:86,column:43}},{start:{line:86,column:47},end:{line:86,column:49}}],line:86},7:{loc:{start:{line:87,column:23},end:{line:87,column:59}},type:"binary-expr",locations:[{start:{line:87,column:23},end:{line:87,column:53}},{start:{line:87,column:57},end:{line:87,column:59}}],line:87},8:{loc:{start:{line:88,column:20},end:{line:88,column:53}},type:"binary-expr",locations:[{start:{line:88,column:20},end:{line:88,column:47}},{start:{line:88,column:51},end:{line:88,column:53}}],line:88},9:{loc:{start:{line:89,column:23},end:{line:89,column:59}},type:"binary-expr",locations:[{start:{line:89,column:23},end:{line:89,column:53}},{start:{line:89,column:57},end:{line:89,column:59}}],line:89},10:{loc:{start:{line:185,column:21},end:{line:185,column:42}},type:"binary-expr",locations:[{start:{line:185,column:21},end:{line:185,column:36}},{start:{line:185,column:40},end:{line:185,column:42}}],line:185},11:{loc:{start:{line:315,column:21},end:{line:315,column:55}},type:"binary-expr",locations:[{start:{line:315,column:21},end:{line:315,column:49}},{start:{line:315,column:53},end:{line:315,column:55}}],line:315},12:{loc:{start:{line:329,column:21},end:{line:329,column:62}},type:"binary-expr",locations:[{start:{line:329,column:21},end:{line:329,column:50}},{start:{line:329,column:54},end:{line:329,column:62}}],line:329}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx"],names:[],mappings:"AAmIM,SACE,KADF;AAnIN,OAAO,WAAW;AAClB,OAAO,YAAY;AAEnB,SAA+B,uBAAuB;AAEtD,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAWhC,MAAM,8BAA8B,MAAM,UAAsC;AAAA,EAC9E,yBAAyB,UAAyC,OAA2B;AAC3F,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW,QAAQ;AAAA,IAC5B,OACK;AACH,iBAAW,QAAQ,IAAI;AAAA,IACzB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAAoC,OAAY;AAClE,UAAM,QAAQ;AAAA,MACZ,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,MAAM,QAAQ;AAAA,IACvB,OACK;AAEH,YAAM,QAAQ,IAAI;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,UAAsC,OAAY;AACtE,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,QAAQ,QAAQ;AAAA,IACzB,OACK;AAEH,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,qBAAqB,OAAY;AAC/B,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW;AAAA,IACpB,OACK;AACH,iBAAW,OAAO;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAA8C,OAAY;AAC5E,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,IAChB;AAEA,QAAI,UAAU,QAAW;AAEvB,aAAO,aAAa,QAAQ;AAAA,IAC9B,OACK;AAEH,mBAAa,QAAQ,IAAI;AAAA,IAC3B;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAEA,SAAS;AACP,UAAM,WAAW,KAAK,MAAM,SAAS,YAAY,CAAC;AAClD,UAAM,EAAC,GAAG,0BAA0B,SAAQ,IAAI,KAAK;AACrD,UAAM,MAAM,oBAAoB,CAAC;AAEjC,UAAM,QAAQ,KAAK,MAAM,SAAS,SAAS,CAAC;AAC5C,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AACtD,UAAM,UAAU,KAAK,MAAM,SAAS,WAAW,CAAC;AAChD,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AAEtD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,gBAAgB;AAAA,QAEzB,+BAAC,SAAI,WAAU,kBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,QAAQ,KAAK;AAAA;AAAA,UAC7D;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,EAAC,KAAK,EAAE,6DAA6D,EAAC;AAAA,cACjF,eAAY;AAAA,cACZ,OAAQ,KAAK,MAAM,SAAiB;AAAA,cACpC,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,cAC1C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,oCAAoC;AAAA,cACpD,UAAU,CAAC,UAAU,yBAAyB,sCAAsC,KAAK;AAAA;AAAA,UAC3F;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,cAC/C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,qCAAqC;AAAA,cACrD,UAAU,CAAC,UAAU,yBAAyB,uCAAuC,KAAK;AAAA;AAAA,UAC5F;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,cACxC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,8BAA8B;AAAA,cAC9C,UAAU,CAAC,UAAU,yBAAyB,gCAAgC,KAAK;AAAA;AAAA,UACrF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,cAC5C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,kCAAkC;AAAA,cAClD,UAAU,CAAC,UAAU,yBAAyB,oCAAoC,KAAK;AAAA;AAAA,UACzF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ;AAAA,cACjB,WAAW,OAAO,MAAM;AAAA,cACxB,QAAQ;AAAA,cACR,MAAK;AAAA,cACL,OAAO,SAAS,UAAU,CAAC;AAAA,cAC3B,SAAS,CAAC,GAAG,CAAC;AAAA,cACd,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS;AAAA,cACT,UAAU,CAAC,UAAU,KAAK,oBAAoB,QAAQ,KAAK;AAAA;AAAA,UAC7D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,SAAS;AAAA,cAClB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,QAAQ;AAAA,cAC9B,UAAU,CAAC,UAAU,KAAK,oBAAoB,WAAW,KAAK;AAAA;AAAA,UAChE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,cAAc;AAAA,cACvB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,cAC/C,SAAS,OAAO,MAAM,OAAO;AAAA,cAC7B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,aAAa;AAAA,cACtB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,iBAAiB;AAAA,cAC1B,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,UAAU;AAAA,cAChC,UAAU,CAAC,UAAU,KAAK,oBAAoB,aAAa,KAAK;AAAA;AAAA,UAClE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,QAAQ,OAAO,MAAM,SAAS;AAAA,cAC9B,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,SAAS;AAAA,cAC/B,UAAU,CAAC,UAAU,KAAK,oBAAoB,YAAY,KAAK;AAAA;AAAA,UACjE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,QAAQ;AAAA,cAC1B,eAAY;AAAA,cACZ,OAAO,QAAQ;AAAA,cACf,UAAU,CAAC,UAAU,KAAK,sBAAsB,UAAU,KAAK;AAAA;AAAA,UACjE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,sBAAsB;AAAA,cAC/B,WAAW,OAAO,QAAQ;AAAA,cAC1B,OAAO,QAAQ;AAAA,cACf,SAAS,OAAO,QAAQ,aAAa;AAAA,cACrC,UAAU,CAAC,UAAU,KAAK,sBAAsB,gBAAgB,KAAK;AAAA;AAAA,UACvE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,kBAAkB;AAAA,cAC3B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,MAAM;AAAA,cACjC,UAAU,CAAC,UAAU,KAAK,yBAAyB,SAAS,KAAK;AAAA;AAAA,UACnE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,qBAAqB;AAAA,cAC9B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,SAAS;AAAA,cACpC,UAAU,CAAC,UAAU,KAAK,yBAAyB,YAAY,KAAK;AAAA;AAAA,UACtE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,IAAI,WAAW;AAAA,gBAChB,CAAC,YAAY,UAAU;AAAA,gBACvB,CAAC,SAAS,OAAO;AAAA,gBACjB,CAAC,wBAAwB,sBAAsB;AAAA,cACjD;AAAA,cACA,OAAO,YAAY,MAAM,SAAS,KAAK;AAAA,cACvC,UAAU,CAAC,UAAU,KAAK,qBAAqB,KAAK;AAAA;AAAA,UACtD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,eAAe;AAAA,cACnC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,UAAU,eAAe;AAAA,gBAC1B,CAAC,MAAM,EAAE,4BAA4B,CAAC;AAAA,cACxC;AAAA,cACA,OAAO,SAAS,mBAAmB,KAAK;AAAA,cACxC,UAAU,CAAC,UAAU,yBAAyB,qBAAqB,KAAK;AAAA;AAAA,UAC1E;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99e5ed3645da84d03156e916f41e6bd97a8da4f4"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return En=function(){return s},s}En();class UDe extends On.Component{changeTransitionProperty(e,t){En().f[0]++;const i=(En().s[0]++,{...this.props.mapStyle.transition});En().s[1]++,t===void 0?(En().b[0][0]++,En().s[2]++,delete i[e]):(En().b[0][1]++,En().s[3]++,i[e]=t),En().s[4]++,this.props.onStyleChanged({...this.props.mapStyle,transition:i})}changeLightProperty(e,t){En().f[1]++;const i=(En().s[5]++,{...this.props.mapStyle.light});En().s[6]++,t===void 0?(En().b[1][0]++,En().s[7]++,delete i[e]):(En().b[1][1]++,En().s[8]++,i[e]=t),En().s[9]++,this.props.onStyleChanged({...this.props.mapStyle,light:i})}changeTerrainProperty(e,t){En().f[2]++;const i=(En().s[10]++,{...this.props.mapStyle.terrain});En().s[11]++,t===void 0?(En().b[2][0]++,En().s[12]++,delete i[e]):(En().b[2][1]++,En().s[13]++,i[e]=t),En().s[14]++,this.props.onStyleChanged({...this.props.mapStyle,terrain:i})}changeProjectionType(e){En().f[3]++;const t=(En().s[15]++,{...this.props.mapStyle.projection});En().s[16]++,e===void 0?(En().b[3][0]++,En().s[17]++,delete t.type):(En().b[3][1]++,En().s[18]++,t.type=e),En().s[19]++,this.props.onStyleChanged({...this.props.mapStyle,projection:t})}changeStyleProperty(e,t){En().f[4]++;const i=(En().s[20]++,{...this.props.mapStyle});En().s[21]++,t===void 0?(En().b[4][0]++,En().s[22]++,delete i[e]):(En().b[4][1]++,En().s[23]++,i[e]=t),En().s[24]++,this.props.onStyleChanged(i)}render(){En().f[5]++;const e=(En().s[25]++,En().b[5][0]++,this.props.mapStyle.metadata||(En().b[5][1]++,{})),{t,onChangeMetadataProperty:i,mapStyle:r}=(En().s[26]++,this.props),o=(En().s[27]++,iae(t)),s=(En().s[28]++,En().b[6][0]++,this.props.mapStyle.light||(En().b[6][1]++,{})),a=(En().s[29]++,En().b[7][0]++,this.props.mapStyle.transition||(En().b[7][1]++,{})),c=(En().s[30]++,En().b[8][0]++,this.props.mapStyle.terrain||(En().b[8][1]++,{})),h=(En().s[31]++,En().b[9][0]++,this.props.mapStyle.projection||(En().b[9][1]++,{}));return En().s[32]++,ie.jsx(C1,{"data-wd-key":"modal:settings",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Style Settings"),children:ie.jsxs("div",{className:"modal:settings",children:[ie.jsx(Ad,{label:t("Name"),fieldSpec:Jr.$root.name,"data-wd-key":"modal:settings.name",value:this.props.mapStyle.name,onChange:m=>(En().f[6]++,En().s[33]++,this.changeStyleProperty("name",m))}),ie.jsx(Ad,{label:t("Owner"),fieldSpec:{doc:t("Owner ID of the style. Used by Mapbox or future style APIs.")},"data-wd-key":"modal:settings.owner",value:this.props.mapStyle.owner,onChange:m=>(En().f[7]++,En().s[34]++,this.changeStyleProperty("owner",m))}),ie.jsx(Ox,{fieldSpec:Jr.$root.sprite,label:t("Sprite URL"),"data-wd-key":"modal:settings.sprite",value:this.props.mapStyle.sprite,onChange:m=>(En().f[8]++,En().s[35]++,this.changeStyleProperty("sprite",m))}),ie.jsx(Ox,{label:t("Glyphs URL"),fieldSpec:Jr.$root.glyphs,"data-wd-key":"modal:settings.glyphs",value:this.props.mapStyle.glyphs,onChange:m=>(En().f[9]++,En().s[36]++,this.changeStyleProperty("glyphs",m))}),ie.jsx(Ad,{label:o.maputnik.maptiler_access_token.label,fieldSpec:o.maputnik.maptiler_access_token,"data-wd-key":"modal:settings.maputnik:openmaptiles_access_token",value:e["maputnik:openmaptiles_access_token"],onChange:m=>(En().f[10]++,En().s[37]++,i("maputnik:openmaptiles_access_token",m))}),ie.jsx(Ad,{label:o.maputnik.thunderforest_access_token.label,fieldSpec:o.maputnik.thunderforest_access_token,"data-wd-key":"modal:settings.maputnik:thunderforest_access_token",value:e["maputnik:thunderforest_access_token"],onChange:m=>(En().f[11]++,En().s[38]++,i("maputnik:thunderforest_access_token",m))}),ie.jsx(Ad,{label:o.maputnik.stadia_access_token.label,fieldSpec:o.maputnik.stadia_access_token,"data-wd-key":"modal:settings.maputnik:stadia_access_token",value:e["maputnik:stadia_access_token"],onChange:m=>(En().f[12]++,En().s[39]++,i("maputnik:stadia_access_token",m))}),ie.jsx(Ad,{label:o.maputnik.locationiq_access_token.label,fieldSpec:o.maputnik.locationiq_access_token,"data-wd-key":"modal:settings.maputnik:locationiq_access_token",value:e["maputnik:locationiq_access_token"],onChange:m=>(En().f[13]++,En().s[40]++,i("maputnik:locationiq_access_token",m))}),ie.jsx(iE,{label:t("Center"),fieldSpec:Jr.$root.center,length:2,type:"number",value:(En().b[10][0]++,r.center||(En().b[10][1]++,[])),default:[0,0],onChange:m=>(En().f[14]++,En().s[41]++,this.changeStyleProperty("center",m))}),ie.jsx($p,{label:t("Zoom"),fieldSpec:Jr.$root.zoom,value:r.zoom,default:0,onChange:m=>(En().f[15]++,En().s[42]++,this.changeStyleProperty("zoom",m))}),ie.jsx($p,{label:t("Bearing"),fieldSpec:Jr.$root.bearing,value:r.bearing,default:Jr.$root.bearing.default,onChange:m=>(En().f[16]++,En().s[43]++,this.changeStyleProperty("bearing",m))}),ie.jsx($p,{label:t("Pitch"),fieldSpec:Jr.$root.pitch,value:r.pitch,default:Jr.$root.pitch.default,onChange:m=>(En().f[17]++,En().s[44]++,this.changeStyleProperty("pitch",m))}),ie.jsx(DDe,{label:t("Light anchor"),fieldSpec:Jr.light.anchor,name:"light-anchor",value:s.anchor,options:Object.keys(Jr.light.anchor.values),default:Jr.light.anchor.default,onChange:m=>(En().f[18]++,En().s[45]++,this.changeLightProperty("anchor",m))}),ie.jsx(PDe,{label:t("Light color"),fieldSpec:Jr.light.color,value:s.color,default:Jr.light.color.default,onChange:m=>(En().f[19]++,En().s[46]++,this.changeLightProperty("color",m))}),ie.jsx($p,{label:t("Light intensity"),fieldSpec:Jr.light.intensity,value:s.intensity,default:Jr.light.intensity.default,onChange:m=>(En().f[20]++,En().s[47]++,this.changeLightProperty("intensity",m))}),ie.jsx(iE,{label:t("Light position"),fieldSpec:Jr.light.position,type:"number",length:Jr.light.position.length,value:s.position,default:Jr.light.position.default,onChange:m=>(En().f[21]++,En().s[48]++,this.changeLightProperty("position",m))}),ie.jsx(Ad,{label:t("Terrain source"),fieldSpec:Jr.terrain.source,"data-wd-key":"modal:settings.maputnik:terrain_source",value:c.source,onChange:m=>(En().f[22]++,En().s[49]++,this.changeTerrainProperty("source",m))}),ie.jsx($p,{label:t("Terrain exaggeration"),fieldSpec:Jr.terrain.exaggeration,value:c.exaggeration,default:Jr.terrain.exaggeration.default,onChange:m=>(En().f[23]++,En().s[50]++,this.changeTerrainProperty("exaggeration",m))}),ie.jsx($p,{label:t("Transition delay"),fieldSpec:Jr.transition.delay,value:a.delay,default:Jr.transition.delay.default,onChange:m=>(En().f[24]++,En().s[51]++,this.changeTransitionProperty("delay",m))}),ie.jsx($p,{label:t("Transition duration"),fieldSpec:Jr.transition.duration,value:a.duration,default:Jr.transition.duration.default,onChange:m=>(En().f[25]++,En().s[52]++,this.changeTransitionProperty("duration",m))}),ie.jsx(L4,{label:t("Projection"),"data-wd-key":"modal:settings.projection",options:[["","Undefined"],["mercator","Mercator"],["globe","Globe"],["vertical-perspective","Vertical Perspective"]],value:(En().b[11][0]++,h?.type?.toString()||(En().b[11][1]++,"")),onChange:m=>(En().f[26]++,En().s[53]++,this.changeProjectionType(m))}),ie.jsx(L4,{label:o.maputnik.style_renderer.label,fieldSpec:o.maputnik.style_renderer,"data-wd-key":"modal:settings.maputnik:renderer",options:[["mlgljs","MapLibreGL JS"],["ol",t("Open Layers (experimental)")]],value:(En().b[12][0]++,e["maputnik:renderer"]||(En().b[12][1]++,"mlgljs")),onChange:m=>(En().f[27]++,En().s[54]++,i("maputnik:renderer",m))})]})})}}const KDe=(En().s[55]++,$o()(UDe));var Bw={exports:{}},LDe=Bw.exports,GV;function FDe(){return GV||(GV=1,(function(n,e){(function(t,i,r){n.exports=r(),n.exports.default=r()})("slugify",LDe,function(){var t=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","":"cent","":"pound","":"currency","":"yen","":"(c)","":"a","":"(r)","":"o","":"A","":"A","":"A","":"A","":"A","":"A","":"AE","":"C","":"E","":"E","":"E","":"E","":"I","":"I","":"I","":"I","":"D","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"U","":"U","":"U","":"U","":"Y","":"TH","":"ss","":"a","":"a","":"a","":"a","":"a","":"a","":"ae","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"d","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"u","":"u","":"u","":"u","":"y","":"th","":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"D","":"d","":"DJ","":"dj","":"E","":"e","":"E","":"e","":"e","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"I","":"i","":"i","":"i","":"I","":"i","":"I","":"i","":"k","":"k","":"L","":"l","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"O","":"o","":"OE","":"oe","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"U","":"u","":"u","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"z","":"Z","":"z","":"Z","":"z","":"E","":"f","":"O","":"o","":"U","":"u","":"LJ","":"lj","":"NJ","":"nj","":"S","":"s","":"T","":"t","":"e","":"o","":"A","":"E","":"H","":"I","":"O","":"Y","":"W","":"i","":"A","":"B","":"G","":"D","":"E","":"Z","":"H","":"8","":"I","":"K","":"L","":"M","":"N","":"3","":"O","":"P","":"R","":"S","":"T","":"Y","":"F","":"X","":"PS","":"W","":"I","":"Y","":"a","":"e","":"h","":"i","":"y","":"a","":"b","":"g","":"d","":"e","":"z","":"h","":"8","":"i","":"k","":"l","":"m","":"n","":"3","":"o","":"p","":"r","":"s","":"s","":"t","":"y","":"f","":"x","":"ps","":"w","":"i","":"y","":"o","":"y","":"w","":"Yo","":"DJ","":"Ye","":"I","":"Yi","":"J","":"LJ","":"NJ","":"C","":"DZ","":"A","":"B","":"V","":"G","":"D","":"E","":"Zh","":"Z","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"S","":"T","":"U","":"F","":"H","":"C","":"Ch","":"Sh","":"Sh","":"U","":"Y","":"","":"E","":"Yu","":"Ya","":"a","":"b","":"v","":"g","":"d","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":"u","":"y","":"","":"e","":"yu","":"ya","":"yo","":"dj","":"ye","":"i","":"yi","":"j","":"lj","":"nj","":"c","":"u","":"dz","":"G","":"g","":"GH","":"gh","":"KH","":"kh","":"NG","":"ng","":"UE","":"ue","":"U","":"u","":"H","":"h","":"AE","":"ae","":"OE","":"oe","":"A","":"B","":"G","":"D","":"E","":"Z","":"E'","":"Y'","":"T'","":"JH","":"I","":"L","":"X","":"C'","":"K","":"H","":"D'","":"GH","":"TW","":"M","":"Y","":"N","":"SH","":"CH","":"P","":"J","":"R'","":"S","":"V","":"T","":"R","":"C","":"P'","":"Q'","":"O''","":"F","":"EV","":"a","":"aa","":"a","":"u","":"i","":"e","":"a","":"b","":"h","":"t","":"th","":"j","":"h","":"kh","":"d","":"th","":"r","":"z","":"s","":"sh","":"s","":"dh","":"t","":"z","":"a","":"gh","":"f","":"q","":"k","":"l","":"m","":"n","":"h","":"w","":"a","":"y","":"an","":"on","":"en","":"a","":"u","":"e","":"","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"p","":"ch","":"zh","":"k","":"g","":"y","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"baht","":"a","":"b","":"g","":"d","":"e","":"v","":"z","":"t","":"i","":"k","":"l","":"m","":"n","":"o","":"p","":"zh","":"r","":"s","":"t","":"u","":"f","":"k","":"gh","":"q","":"sh","":"ch","":"ts","":"dz","":"ts","":"ch","":"kh","":"j","":"h","":"S","":"s","":"W","":"w","":"W","":"w","":"W","":"w","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"-","":"'","":"'","":"\\"","":"\\"","":"\\"","":"+","":"*","":"...","":"ecu","":"cruzeiro","":"french franc","":"lira","":"mill","":"naira","":"peseta","":"rupee","":"won","":"new shequel","":"dong","":"euro","":"kip","":"tugrik","":"drachma","":"penny","":"peso","":"guarani","":"austral","":"hryvnia","":"cedi","":"kazakhstani tenge","":"indian rupee","":"turkish lira","":"russian ruble","":"bitcoin","":"sm","":"tm","":"d","":"delta","":"sum","":"infinity","":"love","":"yuan","":"yen","":"rial","":"laa","":"laa","":"lai","":"la"}`),i=JSON.parse('{"bg":{"":"Y","":"Ts","":"Sht","":"A","":"Y","":"y","":"ts","":"sht","":"a","":"y"},"de":{"":"AE","":"ae","":"OE","":"oe","":"UE","":"ue","":"ss","%":"prozent","&":"und","|":"oder","":"summe","":"unendlich","":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","":"centavos","":"libras","":"moneda","":"francos","":"suma","":"infinito","":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","":"centime","":"livre","":"devise","":"franc","":"somme","":"infini","":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","":"centavo","":"soma","":"libra","":"infinito","":"amor"},"uk":{"":"Y","":"y","":"Y","":"y","":"Ts","":"ts","":"Kh","":"kh","":"Shch","":"shch","":"H","":"h"},"vi":{"":"D","":"d"},"da":{"":"OE","":"oe","":"AA","":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"strre end"},"nb":{"&":"og","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"}}');function r(o,s){if(typeof o!="string")throw new Error("slugify: string argument expected");s=typeof s=="string"?{replacement:s}:s||{};var a=i[s.locale]||{},c=s.replacement===void 0?"-":s.replacement,h=s.trim===void 0?!0:s.trim,m=o.normalize().split("").reduce(function(y,M){var x=a[M];return x===void 0&&(x=t[M]),x===void 0&&(x=M),x===c&&(x=" "),y+x.replace(s.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return s.strict&&(m=m.replace(/[^A-Za-z0-9\s]/g,"")),h&&(m=m.trim()),m=m.replace(/\s+/g,c),s.lower&&(m=m.toLowerCase()),m}return r.extend=function(o){Object.assign(t,o)},r})})(Bw)),Bw.exports}var zDe=FDe();const jDe=Xl(zDe);var Iw={exports:{}},NDe=Iw.exports,WV;function GDe(){return WV||(WV=1,(function(n,e){(function(t,i){i()})(NDe,function(){function t(h,m){return typeof m>"u"?m={autoBom:!1}:typeof m!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function i(h,m,y){var M=new XMLHttpRequest;M.open("GET",h),M.responseType="blob",M.onload=function(){c(M.response,m,y)},M.onerror=function(){console.error("could not download file")},M.send()}function r(h){var m=new XMLHttpRequest;m.open("HEAD",h,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function o(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(m)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof window=="object"&&window.global===window?window:void 0,a=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(h,m,y){var M=s.URL||s.webkitURL,x=document.createElement("a");m=m||h.name||"download",x.download=m,x.rel="noopener",typeof h=="string"?(x.href=h,x.origin===location.origin?o(x):r(x.href)?i(h,m,y):o(x,x.target="_blank")):(x.href=M.createObjectURL(h),setTimeout(function(){M.revokeObjectURL(x.href)},4e4),setTimeout(function(){o(x)},0))}:"msSaveOrOpenBlob"in navigator?function(h,m,y){if(m=m||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(t(h,y),m);else if(r(h))i(h,m,y);else{var M=document.createElement("a");M.href=h,M.target="_blank",setTimeout(function(){o(M)})}}:function(h,m,y,M){if(M=M||open("","_blank"),M&&(M.document.title=M.document.body.innerText="downloading..."),typeof h=="string")return i(h,m,y);var x=h.type==="application/octet-stream",k=/constructor/i.test(s.HTMLElement)||s.safari,P=/CriOS\/[\d]+/.test(navigator.userAgent);if((P||x&&k||a)&&typeof FileReader<"u"){var F=new FileReader;F.onloadend=function(){var V=F.result;V=P?V:V.replace(/^data:[^;]*;/,"data:attachment/file;"),M?M.location.href=V:location=V,M=null},F.readAsDataURL(h)}else{var j=s.URL||s.webkitURL,q=j.createObjectURL(h);M?M.location=q:location.href=q,M=null,setTimeout(function(){j.revokeObjectURL(q)},4e4)}});s.saveAs=c.saveAs=c,n.exports=c})})(Iw)),Iw.exports}var QV=GDe();const WDe="5.8.0",QDe="get_your_own_OpIi9ZULNHzrESv6T2vL",qDe="b71f7f0ba4064f5eb9e903859a9cf5c6",YDe="pk.put_your_api_key_here7bb23dffeb4",rae={openmaptiles:QDe,thunderforest:qDe,locationiq:YDe};function Mn(){var n="/home/runner/work/maputnik/maputnik/src/libs/style.ts",e="16e079a55cdd4175ffeada8708d6c49d219f1229",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/style.ts",statementMap:{0:{start:{line:3,column:19},end:{line:7,column:2}},1:{start:{line:9,column:2},end:{line:9,column:52}},2:{start:{line:12,column:2},end:{line:14,column:3}},3:{start:{line:13,column:4},end:{line:13,column:28}},4:{start:{line:15,column:2},end:{line:15,column:15}},5:{start:{line:18,column:24},end:{line:22,column:4}},6:{start:{line:19,column:25},end:{line:19,column:37}},7:{start:{line:20,column:4},end:{line:20,column:36}},8:{start:{line:21,column:4},end:{line:21,column:24}},9:{start:{line:23,column:2},end:{line:26,column:4}},10:{start:{line:29,column:2},end:{line:32,column:4}},11:{start:{line:35,column:2},end:{line:35,column:69}},12:{start:{line:38,column:2},end:{line:42,column:3}},13:{start:{line:38,column:15},end:{line:38,column:16}},14:{start:{line:39,column:4},end:{line:41,column:5}},15:{start:{line:40,column:6},end:{line:40,column:15}},16:{start:{line:43,column:2},end:{line:43,column:14}},17:{start:{line:46,column:19},end:{line:46,column:42}},18:{start:{line:47,column:20},end:{line:47,column:67}},19:{start:{line:48,column:2},end:{line:50,column:3}},20:{start:{line:49,column:4},end:{line:49,column:37}},21:{start:{line:51,column:2},end:{line:51,column:21}},22:{start:{line:54,column:17},end:{line:54,column:45}},23:{start:{line:55,column:2},end:{line:55,column:31}},24:{start:{line:55,column:15},end:{line:55,column:31}},25:{start:{line:56,column:2},end:{line:56,column:57}},26:{start:{line:56,column:41},end:{line:56,column:57}},27:{start:{line:57,column:23},end:{line:57,column:33}},28:{start:{line:58,column:2},end:{line:64,column:3}},29:{start:{line:59,column:4},end:{line:59,column:37}},30:{start:{line:60,column:9},end:{line:64,column:3}},31:{start:{line:61,column:4},end:{line:61,column:30}},32:{start:{line:62,column:9},end:{line:64,column:3}},33:{start:{line:63,column:4},end:{line:63,column:34}},34:{start:{line:65,column:22},end:{line:65,column:68}},35:{start:{line:66,column:2},end:{line:68,column:3}},36:{start:{line:67,column:4},end:{line:67,column:20}},37:{start:{line:70,column:2},end:{line:74,column:3}},38:{start:{line:71,column:4},end:{line:71,column:55}},39:{start:{line:73,column:4},end:{line:73,column:57}},40:{start:{line:75,column:25},end:{line:81,column:3}},41:{start:{line:82,column:23},end:{line:85,column:3}},42:{start:{line:86,column:2},end:{line:86,column:22}},43:{start:{line:89,column:21},end:{line:89,column:29}},44:{start:{line:90,column:2},end:{line:92,column:5}},45:{start:{line:91,column:4},end:{line:91,column:76}},46:{start:{line:93,column:2},end:{line:101,column:3}},47:{start:{line:94,column:27},end:{line:94,column:73}},48:{start:{line:95,column:4},end:{line:100,column:5}},49:{start:{line:96,column:6},end:{line:99,column:8}},50:{start:{line:102,column:2},end:{line:102,column:22}},51:{start:{line:105,column:26},end:{line:107,column:3}},52:{start:{line:108,column:2},end:{line:108,column:63}},53:{start:{line:109,column:2},end:{line:109,column:64}},54:{start:{line:110,column:2},end:{line:110,column:57}},55:{start:{line:111,column:2},end:{line:111,column:61}},56:{start:{line:112,column:2},end:{line:115,column:4}}},fnMap:{0:{name:"generateId",decl:{start:{line:8,column:9},end:{line:8,column:19}},loc:{start:{line:8,column:22},end:{line:10,column:1}},line:8},1:{name:"ensureHasId",decl:{start:{line:11,column:9},end:{line:11,column:20}},loc:{start:{line:11,column:28},end:{line:16,column:1}},line:11},2:{name:"ensureHasNoInteractive",decl:{start:{line:17,column:9},end:{line:17,column:31}},loc:{start:{line:17,column:39},end:{line:27,column:1}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:18,column:41},end:{line:18,column:42}},loc:{start:{line:18,column:52},end:{line:22,column:3}},line:18},4:{name:"ensureHasNoRefs",decl:{start:{line:28,column:9},end:{line:28,column:24}},loc:{start:{line:28,column:32},end:{line:33,column:1}},line:28},5:{name:"ensureStyleValidity",decl:{start:{line:34,column:9},end:{line:34,column:28}},loc:{start:{line:34,column:36},end:{line:36,column:1}},line:34},6:{name:"indexOfLayer",decl:{start:{line:37,column:9},end:{line:37,column:21}},loc:{start:{line:37,column:39},end:{line:44,column:1}},line:37},7:{name:"getAccessToken",decl:{start:{line:45,column:9},end:{line:45,column:23}},loc:{start:{line:45,column:52},end:{line:52,column:1}},line:45},8:{name:"replaceSourceAccessToken",decl:{start:{line:53,column:9},end:{line:53,column:33}},loc:{start:{line:53,column:67},end:{line:87,column:1}},line:53},9:{name:"replaceAccessTokens",decl:{start:{line:88,column:9},end:{line:88,column:28}},loc:{start:{line:88,column:50},end:{line:103,column:1}},line:88},10:{name:"(anonymous_10)",decl:{start:{line:90,column:40},end:{line:90,column:41}},loc:{start:{line:90,column:56},end:{line:92,column:3}},line:90},11:{name:"stripAccessTokens",decl:{start:{line:104,column:9},end:{line:104,column:26}},loc:{start:{line:104,column:37},end:{line:116,column:1}},line:104}},branchMap:{0:{loc:{start:{line:12,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},1:{loc:{start:{line:12,column:6},end:{line:12,column:35}},type:"binary-expr",locations:[{start:{line:12,column:6},end:{line:12,column:22}},{start:{line:12,column:26},end:{line:12,column:35}}],line:12},2:{loc:{start:{line:39,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},3:{loc:{start:{line:46,column:19},end:{line:46,column:42}},type:"binary-expr",locations:[{start:{line:46,column:19},end:{line:46,column:36}},{start:{line:46,column:40},end:{line:46,column:42}}],line:46},4:{loc:{start:{line:48,column:2},end:{line:50,column:3}},type:"if",locations:[{start:{line:48,column:2},end:{line:50,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:48,column:6},end:{line:48,column:40}},type:"binary-expr",locations:[{start:{line:48,column:6},end:{line:48,column:24}},{start:{line:48,column:28},end:{line:48,column:40}}],line:48},6:{loc:{start:{line:53,column:56},end:{line:53,column:65}},type:"default-arg",locations:[{start:{line:53,column:63},end:{line:53,column:65}}],line:53},7:{loc:{start:{line:55,column:2},end:{line:55,column:31}},type:"if",locations:[{start:{line:55,column:2},end:{line:55,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:56,column:2},end:{line:56,column:57}},type:"if",locations:[{start:{line:56,column:2},end:{line:56,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},9:{loc:{start:{line:56,column:6},end:{line:56,column:39}},type:"binary-expr",locations:[{start:{line:56,column:6},end:{line:56,column:24}},{start:{line:56,column:28},end:{line:56,column:39}}],line:56},10:{loc:{start:{line:58,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:64,column:3}},{start:{line:60,column:9},end:{line:64,column:3}}],line:58},11:{loc:{start:{line:58,column:6},end:{line:58,column:89}},type:"binary-expr",locations:[{start:{line:58,column:6},end:{line:58,column:46}},{start:{line:58,column:50},end:{line:58,column:89}}],line:58},12:{loc:{start:{line:60,column:9},end:{line:64,column:3}},type:"if",locations:[{start:{line:60,column:9},end:{line:64,column:3}},{start:{line:62,column:9},end:{line:64,column:3}}],line:60},13:{loc:{start:{line:60,column:13},end:{line:60,column:70}},type:"binary-expr",locations:[{start:{line:60,column:13},end:{line:60,column:28}},{start:{line:60,column:32},end:{line:60,column:70}}],line:60},14:{loc:{start:{line:62,column:9},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:9},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},15:{loc:{start:{line:62,column:13},end:{line:62,column:70}},type:"binary-expr",locations:[{start:{line:62,column:13},end:{line:62,column:28}},{start:{line:62,column:32},end:{line:62,column:70}}],line:62},16:{loc:{start:{line:66,column:2},end:{line:68,column:3}},type:"if",locations:[{start:{line:66,column:2},end:{line:68,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66},17:{loc:{start:{line:70,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:70,column:2},end:{line:74,column:3}},{start:{line:72,column:9},end:{line:74,column:3}}],line:70},18:{loc:{start:{line:88,column:39},end:{line:88,column:48}},type:"default-arg",locations:[{start:{line:88,column:46},end:{line:88,column:48}}],line:88},19:{loc:{start:{line:93,column:2},end:{line:101,column:3}},type:"if",locations:[{start:{line:93,column:2},end:{line:101,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},20:{loc:{start:{line:93,column:6},end:{line:93,column:114}},type:"binary-expr",locations:[{start:{line:93,column:6},end:{line:93,column:21}},{start:{line:93,column:26},end:{line:93,column:69}},{start:{line:93,column:73},end:{line:93,column:113}}],line:93},21:{loc:{start:{line:95,column:4},end:{line:100,column:5}},type:"if",locations:[{start:{line:95,column:4},end:{line:100,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:95}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0],19:[0,0],20:[0,0,0],21:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/style.ts"],names:[],mappings:"AAAA,SAAQ,mBAAkB;AAE1B,OAAO,YAAY;AAInB,MAAM,aAAa,oBAAoB;AAAA,EACrC,SAAS;AAAA,EACT,SAAS,CAAC;AAAA,EACV,QAAQ,CAAC;AACX,CAAC;AAED,SAAS,aAAa;AACpB,SAAO,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC;AAClD;AAEA,SAAS,YAAY,OAAuE;AAC1F,MAAG,EAAE,QAAQ,UAAU,CAAC,MAAM,IAAI;AAChC,UAAM,KAAK,WAAW;AAAA,EACxB;AACA,SAAO;AACT;AAEA,SAAS,uBAAuB,OAAiC;AAC/D,QAAM,gBAAgB,MAAM,OAAO,IAAI,WAAS;AAC9C,UAAM,eAA2D,EAAE,GAAG,MAAM;AAC5E,WAAO,aAAa;AACpB,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AACF;AAEA,SAAS,gBAAgB,OAAiC;AACxD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ,YAAY,MAAM,MAAM;AAAA,EAClC;AACF;AAEA,SAAS,oBAAoB,OAAqD;AAChF,SAAO,uBAAuB,gBAAgB,YAAY,KAAK,CAAC,CAAC;AACnE;AAEA,SAAS,aAAa,QAA8B,SAAiB;AACnE,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,QAAG,OAAO,CAAC,EAAE,OAAO,SAAS;AAC3B,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,eAAe,YAAoB,UAA8B,MAAiC;AACzG,QAAM,WAAW,SAAS,YAAY,CAAC;AACvC,MAAI,cAAc,SAAS,YAAY,UAAU,eAAe;AAEhE,MAAG,KAAK,iBAAiB,CAAC,aAAa;AACrC,kBAAc,OAAO,UAAiC;AAAA,EACxD;AAEA,SAAO;AACT;AAEA,SAAS,yBAAyB,UAA8B,YAAoB,OAAK,CAAC,GAAG;AAC3F,QAAM,SAAS,SAAS,QAAQ,UAAU;AAC1C,MAAG,CAAC,OAAQ,QAAO;AACnB,MAAG,EAAE,SAAS,WAAW,CAAC,OAAO,IAAK,QAAO;AAE7C,MAAI,iBAAiB;AACrB,MAAG,eAAe,6BAA6B,eAAe,0BAA0B;AACtF,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AAGpE,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AACpE,qBAAiB;AAAA,EACnB;AAEA,QAAM,cAAc,eAAe,gBAAgB,UAAU,IAAI;AAEjE,MAAG,CAAC,aAAa;AAEf,WAAO;AAAA,EACT;AAEA,MAAI;AACJ,MAAI,kBAAkB,UAAU;AAI9B,gBAAY,GAAG,OAAO,GAAG,YAAY,WAAW;AAAA,EAClD,OAAO;AACL,gBAAY,OAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,EACrD;AAEA,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,UAAU,GAAG;AAAA,MACZ,GAAG;AAAA,MACH,KAAK;AAAA,IACP;AAAA,EACF;AACA,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACA,SAAO;AACT;AAEA,SAAS,oBAAoB,UAA8B,OAAK,CAAC,GAAG;AAClE,MAAI,eAAe;AAEnB,SAAO,KAAK,SAAS,OAAO,EAAE,QAAQ,CAAC,eAAe;AACpD,mBAAe,yBAAyB,cAAc,YAAY,IAAI;AAAA,EACxE,CAAC;AAED,MAAI,SAAS,WAAW,SAAS,OAAO,MAAM,oBAAoB,KAAK,SAAS,OAAO,MAAM,iBAAiB,IAAI;AAChH,UAAM,iBAAiB,eAAe,gBAAgB,UAAU,IAAI;AACpE,QAAI,gBAAgB;AAClB,qBAAe;AAAA,QACb,GAAG;AAAA,QACH,QAAQ,SAAS,OAAO,QAAQ,SAAS,cAAc;AAAA,MACzD;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,kBAAkB,UAA8B;AACvD,QAAM,kBAAkB;AAAA,IACtB,GAAG,SAAS;AAAA,EACd;AACA,SAAO,gBAAgB,oCAAoC;AAC3D,SAAO,gBAAgB,qCAAqC;AAC5D,SAAO,gBAAgB,8BAA8B;AACrD,SAAO,gBAAgB,kCAAkC;AACzD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,UAAU;AAAA,EACZ;AACF;AAEA,eAAe;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"16e079a55cdd4175ffeada8708d6c49d219f1229"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Mn=function(){return s},s}Mn();const $De=(Mn().s[0]++,sae({version:8,sources:{},layers:[]}));function oae(){return Mn().f[0]++,Mn().s[1]++,Math.random().toString(36).substring(2,9)}function VDe(n){return Mn().f[1]++,Mn().s[2]++,Mn().b[1][0]++,!("id"in n)||(Mn().b[1][1]++,!n.id)?(Mn().b[0][0]++,Mn().s[3]++,n.id=oae()):Mn().b[0][1]++,Mn().s[4]++,n}function HDe(n){Mn().f[2]++;const e=(Mn().s[5]++,n.layers.map(t=>{Mn().f[3]++;const i=(Mn().s[6]++,{...t});return Mn().s[7]++,delete i.interactive,Mn().s[8]++,i}));return Mn().s[9]++,{...n,layers:e}}function ZDe(n){return Mn().f[4]++,Mn().s[10]++,{...n,layers:qce(n.layers)}}function sae(n){return Mn().f[5]++,Mn().s[11]++,HDe(ZDe(VDe(n)))}function XDe(n,e){Mn().f[6]++,Mn().s[12]++;for(let t=(Mn().s[13]++,0);t<n.length;t++){if(Mn().s[14]++,n[t].id===e)return Mn().b[2][0]++,Mn().s[15]++,t;Mn().b[2][1]++}return Mn().s[16]++,null}function OL(n,e,t){Mn().f[7]++;const i=(Mn().s[17]++,Mn().b[3][0]++,e.metadata||(Mn().b[3][1]++,{}));let r=(Mn().s[18]++,i[`maputnik:${n}_access_token`]);return Mn().s[19]++,Mn().b[5][0]++,t.allowFallback&&(Mn().b[5][1]++,!r)?(Mn().b[4][0]++,Mn().s[20]++,r=rae[n]):Mn().b[4][1]++,Mn().s[21]++,r}function JDe(n,e,t=(Mn().b[6][0]++,{})){Mn().f[8]++;const i=(Mn().s[22]++,n.sources[e]);if(Mn().s[23]++,i)Mn().b[7][1]++;else return Mn().b[7][0]++,Mn().s[24]++,n;if(Mn().s[25]++,Mn().b[9][0]++,!("url"in i)||(Mn().b[9][1]++,!i.url))return Mn().b[8][0]++,Mn().s[26]++,n;Mn().b[8][1]++;let r=(Mn().s[27]++,e);Mn().s[28]++,Mn().b[11][0]++,e==="thunderforest_transport"||(Mn().b[11][1]++,e==="thunderforest_outdoors")?(Mn().b[10][0]++,Mn().s[29]++,r="thunderforest"):(Mn().b[10][1]++,Mn().s[30]++,Mn().b[13][0]++,"url"in i&&(Mn().b[13][1]++,i.url?.match(/\.stadiamaps\.com/))?(Mn().b[12][0]++,Mn().s[31]++,r="stadia"):(Mn().b[12][1]++,Mn().s[32]++,Mn().b[15][0]++,"url"in i&&(Mn().b[15][1]++,i.url?.match(/\.locationiq\.com/))?(Mn().b[14][0]++,Mn().s[33]++,r="locationiq"):Mn().b[14][1]++));const o=(Mn().s[34]++,OL(r,n,t));if(Mn().s[35]++,o)Mn().b[16][1]++;else return Mn().b[16][0]++,Mn().s[36]++,n;let s;Mn().s[37]++,r=="stadia"?(Mn().b[17][0]++,Mn().s[38]++,s=`${i.url}?api_key=${o}`):(Mn().b[17][1]++,Mn().s[39]++,s=i.url.replace("{key}",o));const a=(Mn().s[40]++,{...n.sources,[e]:{...i,url:s}}),c=(Mn().s[41]++,{...n,sources:a});return Mn().s[42]++,c}function ePe(n,e=(Mn().b[18][0]++,{})){Mn().f[9]++;let t=(Mn().s[43]++,n);if(Mn().s[44]++,Object.keys(n.sources).forEach(i=>{Mn().f[10]++,Mn().s[45]++,t=JDe(t,i,e)}),Mn().s[46]++,Mn().b[20][0]++,n.glyphs&&(Mn().b[20][1]++,n.glyphs.match(/\.tilehosting\.com/)||(Mn().b[20][2]++,n.glyphs.match(/\.maptiler\.com/)))){Mn().b[19][0]++;const i=(Mn().s[47]++,OL("openmaptiles",n,e));Mn().s[48]++,i?(Mn().b[21][0]++,Mn().s[49]++,t={...t,glyphs:n.glyphs.replace("{key}",i)}):Mn().b[21][1]++}else Mn().b[19][1]++;return Mn().s[50]++,t}function tPe(n){Mn().f[11]++;const e=(Mn().s[51]++,{...n.metadata});return Mn().s[52]++,delete e["maputnik:openmaptiles_access_token"],Mn().s[53]++,delete e["maputnik:thunderforest_access_token"],Mn().s[54]++,delete e["maputnik:stadia_access_token"],Mn().s[55]++,delete e["maputnik:locationiq_access_token"],Mn().s[56]++,{...n,metadata:e}}const _d={ensureStyleValidity:sae,emptyStyle:$De,indexOfLayer:XDe,generateId:oae,getAccessToken:OL,replaceAccessTokens:ePe,stripAccessTokens:tPe};function si(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx",e="0479ae849bf143a83f826f9fdcad7b323ec1b109",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx",statementMap:{0:{start:{line:14,column:28},end:{line:14,column:35}},1:{start:{line:15,column:36},end:{line:15,column:83}},2:{start:{line:18,column:4},end:{line:22,column:6}},3:{start:{line:25,column:4},end:{line:33,column:5}},4:{start:{line:26,column:6},end:{line:30,column:9}},5:{start:{line:32,column:6},end:{line:32,column:36}},6:{start:{line:36,column:23},end:{line:36,column:44}},7:{start:{line:37,column:22},end:{line:37,column:69}},8:{start:{line:38,column:17},end:{line:62,column:1}},9:{start:{line:63,column:17},end:{line:63,column:70}},10:{start:{line:64,column:23},end:{line:64,column:40}},11:{start:{line:65,column:4},end:{line:65,column:39}},12:{start:{line:68,column:23},end:{line:68,column:44}},13:{start:{line:69,column:4},end:{line:74,column:5}},14:{start:{line:70,column:19},end:{line:70,column:85}},15:{start:{line:71,column:25},end:{line:71,column:42}},16:{start:{line:72,column:6},end:{line:72,column:41}},17:{start:{line:73,column:6},end:{line:73,column:13}},18:{start:{line:75,column:21},end:{line:75,column:42}},19:{start:{line:76,column:4},end:{line:80,column:5}},20:{start:{line:77,column:6},end:{line:77,column:49}},21:{start:{line:78,column:6},end:{line:78,column:45}},22:{start:{line:79,column:6},end:{line:79,column:37}},23:{start:{line:79,column:30},end:{line:79,column:37}},24:{start:{line:81,column:21},end:{line:81,column:54}},25:{start:{line:82,column:4},end:{line:82,column:37}},26:{start:{line:83,column:4},end:{line:83,column:27}},27:{start:{line:84,column:4},end:{line:84,column:30}},28:{start:{line:87,column:23},end:{line:87,column:44}},29:{start:{line:88,column:23},end:{line:88,column:52}},30:{start:{line:89,column:4},end:{line:89,column:43}},31:{start:{line:90,column:4},end:{line:90,column:35}},32:{start:{line:90,column:28},end:{line:90,column:35}},33:{start:{line:91,column:21},end:{line:91,column:54}},34:{start:{line:92,column:4},end:{line:92,column:37}},35:{start:{line:93,column:4},end:{line:93,column:27}},36:{start:{line:94,column:4},end:{line:94,column:30}},37:{start:{line:97,column:23},end:{line:105,column:5}},38:{start:{line:106,column:23},end:{line:106,column:66}},39:{start:{line:107,column:4},end:{line:107,column:43}},40:{start:{line:108,column:4},end:{line:108,column:22}},41:{start:{line:111,column:25},end:{line:117,column:5}},42:{start:{line:118,column:4},end:{line:118,column:44}},43:{start:{line:121,column:14},end:{line:121,column:26}},44:{start:{line:122,column:16},end:{line:122,column:38}},45:{start:{line:123,column:4},end:{line:188,column:6}},46:{start:{line:191,column:20},end:{line:191,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:19},end:{line:23,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:34,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:15},end:{line:66,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:20},end:{line:85,column:3}},line:67},4:{name:"(anonymous_4)",decl:{start:{line:86,column:2},end:{line:86,column:3}},loc:{start:{line:86,column:22},end:{line:95,column:3}},line:86},5:{name:"(anonymous_5)",decl:{start:{line:96,column:2},end:{line:96,column:3}},loc:{start:{line:96,column:27},end:{line:109,column:3}},line:96},6:{name:"(anonymous_6)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:42},end:{line:119,column:3}},line:110},7:{name:"(anonymous_7)",decl:{start:{line:120,column:2},end:{line:120,column:3}},loc:{start:{line:120,column:11},end:{line:189,column:3}},line:120}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:25},1:{loc:{start:{line:37,column:22},end:{line:37,column:69}},type:"binary-expr",locations:[{start:{line:37,column:22},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:69}}],line:37},2:{loc:{start:{line:69,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:74,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:76,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76},4:{loc:{start:{line:79,column:6},end:{line:79,column:37}},type:"if",locations:[{start:{line:79,column:6},end:{line:79,column:37}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},5:{loc:{start:{line:90,column:4},end:{line:90,column:35}},type:"if",locations:[{start:{line:90,column:4},end:{line:90,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90},6:{loc:{start:{line:140,column:24},end:{line:140,column:58}},type:"binary-expr",locations:[{start:{line:140,column:24},end:{line:140,column:52}},{start:{line:140,column:56},end:{line:140,column:58}}],line:140},7:{loc:{start:{line:149,column:24},end:{line:149,column:58}},type:"binary-expr",locations:[{start:{line:149,column:24},end:{line:149,column:52}},{start:{line:149,column:56},end:{line:149,column:58}}],line:149},8:{loc:{start:{line:158,column:24},end:{line:158,column:58}},type:"binary-expr",locations:[{start:{line:158,column:24},end:{line:158,column:52}},{start:{line:158,column:56},end:{line:158,column:58}}],line:158},9:{loc:{start:{line:167,column:24},end:{line:167,column:58}},type:"binary-expr",locations:[{start:{line:167,column:24},end:{line:167,column:52}},{start:{line:167,column:56},end:{line:167,column:58}}],line:167},10:{loc:{start:{line:177,column:12},end:{line:180,column:16}},type:"binary-expr",locations:[{start:{line:177,column:12},end:{line:177,column:39}},{start:{line:177,column:59},end:{line:180,column:16}}],line:177}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx"],names:[],mappings:"AAoKQ,cAKA,YALA;AApKR,OAAO,WAAW;AAClB,OAAO,aAAa;AACpB,SAAQ,cAAa;AACrB,SAAQ,eAAc;AACtB,SAAQ,cAAa;AACrB,SAAQ,OAAO,cAAa;AAC5B,SAA8B,uBAAsB;AAEpD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAIhC,MAAM,sBAAsB;AAC5B,MAAM,8BAA8B,OAAO,OAAO,uBAAuB;AAazE,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAE1E,iBAAiB;AACf,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,QAAI,KAAK,MAAM,SAAS,MAAM;AAC5B,aAAO,QAAQ,KAAK,MAAM,SAAS,MAAM;AAAA,QACvC,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,OAAO;AAAA,MACT,CAAC;AAAA,IACH,OAAO;AACL,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,aAAa;AACX,UAAM,aAAa,KAAK,eAAe;AACvC,UAAM,YAAY,KAAK,MAAM,SAAS,QAAQ,KAAK,MAAM,EAAE,KAAK;AAChE,UAAM,OAAO;AAAA;AAAA;AAAA;AAAA,WAIN,SAAS;AAAA;AAAA,+CAE2B,mBAAmB;AAAA,8CACpB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAW/C,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQxB,UAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,EAAC,MAAM,0BAAyB,CAAC;AAC/D,UAAM,aAAa,KAAK,WAAW;AACnC,WAAO,MAAM,aAAa,OAAO;AAAA,EACnC;AAAA,EAEA,MAAM,YAAY;AAChB,UAAM,aAAa,KAAK,eAAe;AAIvC,QAAI,CAAC,6BAA6B;AAChC,YAAM,OAAO,IAAI,KAAK,CAAC,UAAU,GAAG,EAAC,MAAM,iCAAgC,CAAC;AAC5E,YAAM,aAAa,KAAK,WAAW;AACnC,aAAO,MAAM,aAAa,OAAO;AACjC;AAAA,IACF;AAEA,QAAI,aAAa,KAAK,MAAM;AAC5B,QAAI,cAAc,MAAM;AACtB,mBAAa,MAAM,KAAK,iBAAiB;AACzC,WAAK,MAAM,gBAAgB,UAAU;AACrC,UAAI,cAAc,KAAM;AAAA,IAC1B;AAEA,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,cAAc;AAClB,UAAM,aAAa,KAAK,eAAe;AAEvC,UAAM,aAAa,MAAM,KAAK,iBAAiB;AAC/C,SAAK,MAAM,gBAAgB,UAAU;AACrC,QAAI,cAAc,KAAM;AAExB,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,mBAAyD;AAC7D,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAC,oBAAoB,CAAC,OAAO,EAAC;AAAA,QACxC;AAAA,MACF;AAAA,MACA,eAAe,KAAK,WAAW;AAAA,IACjC;AAEA,UAAM,aAAa,MAAM,OAAO,mBAAmB,UAAU;AAC7D,SAAK,MAAM,gBAAgB,UAAU;AACrC,WAAO;AAAA,EACT;AAAA,EAEA,uBAAuB,UAAkB,OAAY;AACnD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,MAAM,oBAAoB,CAAC;AACjC,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,YAAY;AAAA,QACrB,WAAU;AAAA,QAGV,+BAAC,aAAQ,WAAU,0BACjB;AAAA,8BAAC,QAAI,YAAE,YAAY,GAAE;AAAA,UACrB,oBAAC,OACE,YAAE,uCAAuC,GAC5C;AAAA,UAEA,qBAAC,SACC;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,gBAC1C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,oCAAoC;AAAA,gBACvF,UAAU,KAAK,uBAAuB,KAAK,MAAM,oCAAoC;AAAA;AAAA,YACvF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,gBAC/C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,qCAAqC;AAAA,gBACxF,UAAU,KAAK,uBAAuB,KAAK,MAAM,qCAAqC;AAAA;AAAA,YACxF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,gBACxC,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,8BAA8B;AAAA,gBACjF,UAAU,KAAK,uBAAuB,KAAK,MAAM,8BAA8B;AAAA;AAAA,YACjF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,gBAC5C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,kCAAkC;AAAA,gBACrF,UAAU,KAAK,uBAAuB,KAAK,MAAM,kCAAkC;AAAA;AAAA,YACrF;AAAA,aACF;AAAA,UAEA,qBAAC,SAAI,WAAU,iCACb;AAAA,iCAAC,eAAY,SAAS,KAAK,UAAU,KAAK,IAAI,GAC5C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,MAAM;AAAA,eACX;AAAA,YACC,+BACC,qBAAC,eAAY,SAAS,KAAK,YAAY,KAAK,IAAI,GAC9C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,SAAS;AAAA,eACd;AAAA,YAGF,qBAAC,eAAY,SAAS,KAAK,WAAW,KAAK,IAAI,GAC7C;AAAA,kCAAC,SAAK;AAAA,cACL,EAAE,aAAa;AAAA,eAClB;AAAA,aACF;AAAA,WACF;AAAA;AAAA,IAEF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0479ae849bf143a83f826f9fdcad7b323ec1b109"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return si=function(){return s},s}si();const qV=(si().s[0]++,WDe),YV=(si().s[1]++,typeof window.showSaveFilePicker=="function");class nPe extends On.Component{tokenizedStyle(){return si().f[0]++,si().s[2]++,ede(_d.stripAccessTokens(_d.replaceAccessTokens(this.props.mapStyle)))}exportName(){return si().f[1]++,si().s[3]++,this.props.mapStyle.name?(si().b[0][0]++,si().s[4]++,jDe(this.props.mapStyle.name,{replacement:"_",remove:/[*\-+~.()'"!:]/g,lower:!0})):(si().b[0][1]++,si().s[5]++,this.props.mapStyle.id)}createHtml(){si().f[2]++;const e=(si().s[6]++,this.tokenizedStyle()),t=(si().s[7]++,si().b[1][0]++,this.props.mapStyle.name||(si().b[1][1]++,this.props.t("Map"))),i=(si().s[8]++,`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${t}</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://unpkg.com/maplibre-gl@${qV}/dist/maplibre-gl.js"><\/script>
  <link href="https://unpkg.com/maplibre-gl@${qV}/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
      const map = new maplibregl.Map({
         container: 'map',
         style: ${e},
      });
      map.addControl(new maplibregl.NavigationControl());
  <\/script>
</body>
</html>
`),r=(si().s[9]++,new Blob([i],{type:"text/html;charset=utf-8"})),o=(si().s[10]++,this.exportName());si().s[11]++,QV.saveAs(r,o+".html")}async saveStyle(){si().f[3]++;const e=(si().s[12]++,this.tokenizedStyle());if(si().s[13]++,YV)si().b[2][1]++;else{si().b[2][0]++;const r=(si().s[14]++,new Blob([e],{type:"application/json;charset=utf-8"})),o=(si().s[15]++,this.exportName());si().s[16]++,QV.saveAs(r,o+".json"),si().s[17]++;return}let t=(si().s[18]++,this.props.fileHandle);if(si().s[19]++,t==null)if(si().b[3][0]++,si().s[20]++,t=await this.createFileHandle(),si().s[21]++,this.props.onSetFileHandle(t),si().s[22]++,t==null){si().b[4][0]++,si().s[23]++;return}else si().b[4][1]++;else si().b[3][1]++;const i=(si().s[24]++,await t.createWritable());si().s[25]++,await i.write(e),si().s[26]++,await i.close(),si().s[27]++,this.props.onOpenToggle()}async saveStyleAs(){si().f[4]++;const e=(si().s[28]++,this.tokenizedStyle()),t=(si().s[29]++,await this.createFileHandle());if(si().s[30]++,this.props.onSetFileHandle(t),si().s[31]++,t==null){si().b[5][0]++,si().s[32]++;return}else si().b[5][1]++;const i=(si().s[33]++,await t.createWritable());si().s[34]++,await i.write(e),si().s[35]++,await i.close(),si().s[36]++,this.props.onOpenToggle()}async createFileHandle(){si().f[5]++;const e=(si().s[37]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],suggestedName:this.exportName()}),t=(si().s[38]++,await window.showSaveFilePicker(e));return si().s[39]++,this.props.onSetFileHandle(t),si().s[40]++,t}changeMetadataProperty(e,t){si().f[6]++;const i=(si().s[41]++,{...this.props.mapStyle,metadata:{...this.props.mapStyle.metadata,[e]:t}});si().s[42]++,this.props.onStyleChanged(i)}render(){si().f[7]++;const e=(si().s[43]++,this.props.t),t=(si().s[44]++,iae(e));return si().s[45]++,ie.jsx(C1,{"data-wd-key":"modal:export",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Save Style"),className:"maputnik-export-modal",children:ie.jsxs("section",{className:"maputnik-modal-section",children:[ie.jsx("h1",{children:e("Save Style")}),ie.jsx("p",{children:e("Save the JSON style to your computer.")}),ie.jsxs("div",{children:[ie.jsx(Ad,{label:t.maputnik.maptiler_access_token.label,fieldSpec:t.maputnik.maptiler_access_token,value:(si().b[6][0]++,this.props.mapStyle.metadata||(si().b[6][1]++,{}))["maputnik:openmaptiles_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:openmaptiles_access_token")}),ie.jsx(Ad,{label:t.maputnik.thunderforest_access_token.label,fieldSpec:t.maputnik.thunderforest_access_token,value:(si().b[7][0]++,this.props.mapStyle.metadata||(si().b[7][1]++,{}))["maputnik:thunderforest_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:thunderforest_access_token")}),ie.jsx(Ad,{label:t.maputnik.stadia_access_token.label,fieldSpec:t.maputnik.stadia_access_token,value:(si().b[8][0]++,this.props.mapStyle.metadata||(si().b[8][1]++,{}))["maputnik:stadia_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:stadia_access_token")}),ie.jsx(Ad,{label:t.maputnik.locationiq_access_token.label,fieldSpec:t.maputnik.locationiq_access_token,value:(si().b[9][0]++,this.props.mapStyle.metadata||(si().b[9][1]++,{}))["maputnik:locationiq_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:locationiq_access_token")})]}),ie.jsxs("div",{className:"maputnik-modal-export-buttons",children:[ie.jsxs(Js,{onClick:this.saveStyle.bind(this),children:[ie.jsx(M9,{}),e("Save")]}),(si().b[10][0]++,YV&&(si().b[10][1]++,ie.jsxs(Js,{onClick:this.saveStyleAs.bind(this),children:[ie.jsx(M9,{}),e("Save as")]}))),ie.jsxs(Js,{onClick:this.createHtml.bind(this),children:[ie.jsx(Wfe,{}),e("Create HTML")]})]})]})})}}const iPe=(si().s[46]++,$o()(nPe));function N4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",e="d4204cb1114c57682afd09034f9cc8268e27db52",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",statementMap:{0:{start:{line:4,column:26},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:127}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:26},end:{line:4,column:27}},loc:{start:{line:4,column:37},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx"],names:[],mappings:"AAUM;AAVN,OAAO,uBAAsD;AAC7D,OAAO,cAAc;AAMrB,MAAM,oBAAsD,CAAC,UAAU;AACrE,SACE,oBAAC,YAAS,OAAO,MAAM,OACrB,8BAAC,qBAAmB,GAAG,OAAO,GAChC;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d4204cb1114c57682afd09034f9cc8268e27db52"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return N4=function(){return s},s}N4();N4().s[0]++;const aae=n=>(N4().f[0]++,N4().s[1]++,ie.jsx(Dy,{label:n.label,children:ie.jsx(Ow,{...n})}));function G4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",e="10be4a5b6db1d1fa2555f9b6247244050c0b65b8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:120}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx"],names:[],mappings:"AAYM;AAZN,OAAO,WAAW;AAClB,OAAO,mBAA8C;AAQrD,MAAM,gBAA8C,CAAC,UAAU;AAC7D,SACE,oBAAC,SAAM,OAAO,MAAM,OAClB,8BAAC,iBAAe,GAAG,OAAO,GAC5B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"10be4a5b6db1d1fa2555f9b6247244050c0b65b8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return G4=function(){return s},s}G4();G4().s[0]++;const rPe=n=>(G4().f[0]++,G4().s[1]++,ie.jsx(Gs,{label:n.label,children:ie.jsx(Hse,{...n})}));function bn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx",e="1c36418517e1f333c2ed550c90b5a98669bcf70c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx",statementMap:{0:{start:{line:15,column:14},end:{line:15,column:26}},1:{start:{line:16,column:4},end:{line:30,column:9}},2:{start:{line:23,column:29},end:{line:26,column:12}},3:{start:{line:35,column:4},end:{line:38,column:7}},4:{start:{line:41,column:18},end:{line:41,column:47}},5:{start:{line:42,column:4},end:{line:51,column:6}},6:{start:{line:54,column:14},end:{line:54,column:26}},7:{start:{line:55,column:4},end:{line:99,column:9}},8:{start:{line:66,column:32},end:{line:69,column:12}},9:{start:{line:80,column:33},end:{line:83,column:12}},10:{start:{line:92,column:33},end:{line:95,column:12}},11:{start:{line:102,column:27},end:{line:107,column:1}},12:{start:{line:102,column:34},end:{line:107,column:1}},13:{start:{line:110,column:14},end:{line:110,column:26}},14:{start:{line:111,column:24},end:{line:118,column:5}},15:{start:{line:112,column:26},end:{line:112,column:64}},16:{start:{line:113,column:6},end:{line:113,column:29}},17:{start:{line:114,column:6},end:{line:117,column:9}},18:{start:{line:119,column:4},end:{line:146,column:9}},19:{start:{line:126,column:29},end:{line:129,column:12}},20:{start:{line:133,column:8},end:{line:144,column:10}},21:{start:{line:141,column:31},end:{line:141,column:52}},22:{start:{line:151,column:14},end:{line:151,column:26}},23:{start:{line:152,column:24},end:{line:159,column:5}},24:{start:{line:153,column:26},end:{line:153,column:64}},25:{start:{line:154,column:6},end:{line:154,column:29}},26:{start:{line:155,column:6},end:{line:158,column:9}},27:{start:{line:160,column:23},end:{line:165,column:5}},28:{start:{line:161,column:6},end:{line:164,column:9}},29:{start:{line:166,column:4},end:{line:192,column:9}},30:{start:{line:179,column:8},end:{line:190,column:10}},31:{start:{line:187,column:31},end:{line:187,column:52}},32:{start:{line:197,column:14},end:{line:197,column:26}},33:{start:{line:198,column:4},end:{line:209,column:6}},34:{start:{line:204,column:28},end:{line:207,column:10}},35:{start:{line:214,column:14},end:{line:214,column:26}},36:{start:{line:215,column:4},end:{line:243,column:9}},37:{start:{line:223,column:12},end:{line:226,column:15}},38:{start:{line:236,column:12},end:{line:239,column:15}},39:{start:{line:248,column:14},end:{line:248,column:26}},40:{start:{line:249,column:4},end:{line:264,column:9}},41:{start:{line:257,column:29},end:{line:260,column:12}},42:{start:{line:269,column:14},end:{line:269,column:26}},43:{start:{line:270,column:24},end:{line:276,column:5}},44:{start:{line:277,column:4},end:{line:341,column:5}},45:{start:{line:279,column:8},end:{line:279,column:79}},46:{start:{line:281,column:8},end:{line:281,column:85}},47:{start:{line:283,column:8},end:{line:283,column:77}},48:{start:{line:285,column:8},end:{line:285,column:76}},49:{start:{line:287,column:8},end:{line:287,column:77}},50:{start:{line:289,column:8},end:{line:301,column:13}},51:{start:{line:294,column:36},end:{line:297,column:14}},52:{start:{line:303,column:8},end:{line:303,column:77}},53:{start:{line:305,column:8},end:{line:332,column:13}},54:{start:{line:311,column:38},end:{line:314,column:16}},55:{start:{line:325,column:38},end:{line:328,column:16}},56:{start:{line:334,column:8},end:{line:334,column:76}},57:{start:{line:336,column:8},end:{line:336,column:74}},58:{start:{line:338,column:8},end:{line:338,column:74}},59:{start:{line:340,column:8},end:{line:340,column:20}},60:{start:{line:344,column:31},end:{line:344,column:80}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:31,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:23,column:20},end:{line:23,column:21}},loc:{start:{line:23,column:29},end:{line:26,column:12}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:24},end:{line:39,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:19},end:{line:52,column:3}},line:40},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:100,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:66,column:20},end:{line:66,column:21}},loc:{start:{line:66,column:32},end:{line:69,column:12}},line:66},6:{name:"(anonymous_6)",decl:{start:{line:80,column:20},end:{line:80,column:21}},loc:{start:{line:80,column:33},end:{line:83,column:12}},line:80},7:{name:"(anonymous_7)",decl:{start:{line:92,column:20},end:{line:92,column:21}},loc:{start:{line:92,column:33},end:{line:95,column:12}},line:92},8:{name:"(anonymous_8)",decl:{start:{line:102,column:27},end:{line:102,column:28}},loc:{start:{line:102,column:34},end:{line:107,column:1}},line:102},9:{name:"(anonymous_9)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:11},end:{line:147,column:3}},line:109},10:{name:"(anonymous_10)",decl:{start:{line:111,column:24},end:{line:111,column:25}},loc:{start:{line:111,column:38},end:{line:118,column:5}},line:111},11:{name:"(anonymous_11)",decl:{start:{line:126,column:20},end:{line:126,column:21}},loc:{start:{line:126,column:29},end:{line:129,column:12}},line:126},12:{name:"(anonymous_12)",decl:{start:{line:132,column:32},end:{line:132,column:33}},loc:{start:{line:132,column:57},end:{line:145,column:7}},line:132},13:{name:"(anonymous_13)",decl:{start:{line:141,column:22},end:{line:141,column:23}},loc:{start:{line:141,column:31},end:{line:141,column:52}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:193,column:3}},line:150},15:{name:"(anonymous_15)",decl:{start:{line:152,column:24},end:{line:152,column:25}},loc:{start:{line:152,column:38},end:{line:159,column:5}},line:152},16:{name:"(anonymous_16)",decl:{start:{line:160,column:23},end:{line:160,column:24}},loc:{start:{line:160,column:33},end:{line:165,column:5}},line:160},17:{name:"(anonymous_17)",decl:{start:{line:178,column:32},end:{line:178,column:33}},loc:{start:{line:178,column:57},end:{line:191,column:7}},line:178},18:{name:"(anonymous_18)",decl:{start:{line:187,column:22},end:{line:187,column:23}},loc:{start:{line:187,column:31},end:{line:187,column:52}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:196,column:2},end:{line:196,column:3}},loc:{start:{line:196,column:11},end:{line:210,column:3}},line:196},20:{name:"(anonymous_20)",decl:{start:{line:204,column:18},end:{line:204,column:19}},loc:{start:{line:204,column:28},end:{line:207,column:10}},line:204},21:{name:"(anonymous_21)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:11},end:{line:244,column:3}},line:213},22:{name:"(anonymous_22)",decl:{start:{line:222,column:20},end:{line:222,column:21}},loc:{start:{line:222,column:30},end:{line:227,column:11}},line:222},23:{name:"(anonymous_23)",decl:{start:{line:235,column:20},end:{line:235,column:21}},loc:{start:{line:235,column:33},end:{line:240,column:11}},line:235},24:{name:"(anonymous_24)",decl:{start:{line:247,column:2},end:{line:247,column:3}},loc:{start:{line:247,column:11},end:{line:265,column:3}},line:247},25:{name:"(anonymous_25)",decl:{start:{line:257,column:20},end:{line:257,column:21}},loc:{start:{line:257,column:29},end:{line:260,column:12}},line:257},26:{name:"(anonymous_26)",decl:{start:{line:268,column:2},end:{line:268,column:3}},loc:{start:{line:268,column:11},end:{line:342,column:3}},line:268},27:{name:"(anonymous_27)",decl:{start:{line:294,column:22},end:{line:294,column:23}},loc:{start:{line:294,column:36},end:{line:297,column:14}},line:294},28:{name:"(anonymous_28)",decl:{start:{line:311,column:24},end:{line:311,column:25}},loc:{start:{line:311,column:38},end:{line:314,column:16}},line:311},29:{name:"(anonymous_29)",decl:{start:{line:325,column:24},end:{line:325,column:25}},loc:{start:{line:325,column:38},end:{line:328,column:16}},line:325}},branchMap:{0:{loc:{start:{line:41,column:18},end:{line:41,column:47}},type:"binary-expr",locations:[{start:{line:41,column:18},end:{line:41,column:41}},{start:{line:41,column:45},end:{line:41,column:47}}],line:41},1:{loc:{start:{line:79,column:17},end:{line:79,column:47}},type:"binary-expr",locations:[{start:{line:79,column:17},end:{line:79,column:42}},{start:{line:79,column:46},end:{line:79,column:47}}],line:79},2:{loc:{start:{line:91,column:17},end:{line:91,column:48}},type:"binary-expr",locations:[{start:{line:91,column:17},end:{line:91,column:42}},{start:{line:91,column:46},end:{line:91,column:48}}],line:91},3:{loc:{start:{line:259,column:17},end:{line:259,column:72}},type:"cond-expr",locations:[{start:{line:259,column:48},end:{line:259,column:51}},{start:{line:259,column:54},end:{line:259,column:72}}],line:259},4:{loc:{start:{line:277,column:4},end:{line:341,column:5}},type:"switch",locations:[{start:{line:278,column:6},end:{line:279,column:79}},{start:{line:280,column:6},end:{line:281,column:85}},{start:{line:282,column:6},end:{line:283,column:77}},{start:{line:284,column:6},end:{line:285,column:76}},{start:{line:286,column:6},end:{line:287,column:77}},{start:{line:288,column:6},end:{line:301,column:13}},{start:{line:302,column:6},end:{line:303,column:77}},{start:{line:304,column:6},end:{line:332,column:13}},{start:{line:333,column:6},end:{line:334,column:76}},{start:{line:335,column:6},end:{line:336,column:74}},{start:{line:337,column:6},end:{line:338,column:74}},{start:{line:339,column:6},end:{line:340,column:20}}],line:277},5:{loc:{start:{line:298,column:19},end:{line:298,column:86}},type:"binary-expr",locations:[{start:{line:298,column:19},end:{line:298,column:45}},{start:{line:298,column:49},end:{line:298,column:86}}],line:298},6:{loc:{start:{line:315,column:21},end:{line:315,column:92}},type:"binary-expr",locations:[{start:{line:315,column:21},end:{line:315,column:47}},{start:{line:315,column:51},end:{line:315,column:92}}],line:315},7:{loc:{start:{line:329,column:21},end:{line:329,column:92}},type:"binary-expr",locations:[{start:{line:329,column:21},end:{line:329,column:47}},{start:{line:329,column:51},end:{line:329,column:92}}],line:329}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx"],names:[],mappings:"AA6BW,SACL,KADK;AA7BX,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,SAA+B,uBAAuB;AAGtD,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,mBAAmB;AAc1B,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,cAAc;AAAA,UACvB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAaA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,eAAe,OAAiB;AAC9B,SAAK,MAAM,SAAS;AAAA,MAClB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB;AACf,UAAM,QAAQ,KAAK,MAAM,OAAO,SAAS,CAAC;AAC1C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM,EAAE,UAAU;AAAA,QAC9B,WAAW,OAAO,cAAc;AAAA,QAChC,MAAK;AAAA,QACL,OAAO;AAAA,QACP,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,IACzC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACL;AAAA,WAAK,eAAe;AAAA,MACrB;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,SAAS;AAAA,YACP,CAAC,OAAO,mCAAmC;AAAA,YAC3C,CAAC,OAAO,yBAAyB;AAAA,UACnC;AAAA,UACA,UAAU,YAAU,KAAK,MAAM,SAAS;AAAA,YACtC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA,UACD,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEF;AACF;AAEA,MAAM,qBAAyE,CAAC,MAAO;AAAA,EACrF,EAAE,OAAO,EAAE,gBAAgB,GAAG,KAAK,WAAW;AAAA,EAC9C,EAAE,OAAO,EAAE,iBAAiB,GAAG,KAAK,YAAY;AAAA,EAChD,EAAE,OAAO,EAAE,oBAAoB,GAAG,KAAK,eAAe;AAAA,EACtD,EAAE,OAAO,EAAE,mBAAmB,GAAG,KAAK,cAAc;AACtD;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,SAAmB;AACrC,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,MAAK;AAAA,UACL,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,SAAS,CAAC;AAAA,UACV,UAAU;AAAA;AAAA,MACZ;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AASA,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,aAAa;AAAA,QACtB,WAAW,OAAO,eAAe;AAAA,QACjC,OAAO,KAAK,MAAM,OAAO;AAAA,QACzB,UAAU,UAAQ,KAAK,MAAM,SAAS;AAAA,UACpC,GAAG,KAAK,MAAM;AAAA,UACd;AAAA,QACF,CAAC;AAAA;AAAA,IACH;AAAA,EACF;AACF;AAUA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA,0BAAC,SAAM,OAAO,EAAE,SAAS,GAAG,WAAW,OAAO,eAAe,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,WAAW;AAAA,UACX,UAAS;AAAA,UACT,UAAU,UAAQ;AAChB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,SAAS;AAAA,UAClB,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,aAAW;AACnB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAUA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA,UACZ,UAAU,CAAC,QAAgB,KAAK,MAAM,SAAS;AAAA,YAC7C,GAAG,KAAK,MAAM;AAAA,YACd,KAAK,IAAI,WAAW,YAAY,IAAI,MAAM,aAAa,GAAG;AAAA,UAC5D,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAQA,MAAM,uCAAuC,MAAM,UAA+C;AAAA,EAChG,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,UAAU,KAAK,MAAM;AAAA,MACrB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM,KAAK,MAAM;AAAA,MACjB,QAAQ,KAAK,MAAM;AAAA,IACrB;AACA,YAAO,KAAK,MAAM,MAAM;AAAA,MACtB,KAAK;AAAe,eAAO,oBAAC,0BAAwB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAgB,eAAO,oBAAC,gCAA8B,GAAG,aAAa;AAAA,MAC3E,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACjE,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAClD;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,WAAW;AAAA,YACpB,WAAW,OAAO,cAAc;AAAA,YAChC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,cACxC,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,YACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,cAAc,SAAS;AAAA,YACnE,eAAY;AAAA;AAAA,QACd,GACF;AAAA,MACA,KAAK;AAAuB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MAC1E,KAAK;AAAsB,eAAO,qBAAC,uBAAqB,GAAG,aACzD;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,WAAW;AAAA,cACpB,WAAW,OAAO,kBAAkB;AAAA,cACpC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA,cACvE,eAAY;AAAA;AAAA,UACd;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,UAAU;AAAA,cACnB,WAAW,OAAO,kBAAkB;AAAA,cACpC,SAAS,OAAO,KAAK,OAAO,kBAAkB,SAAS,MAAM;AAAA,cAC7D,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA;AAAA,UACzE;AAAA,WACF;AAAA,MACA,KAAK;AAAkB,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD;AAAS,eAAO;AAAA,IAClB;AAAA,EACF;AACF;AAEA,MAAM,yBAAyB,gBAAgB,EAAE,8BAA8B;AAC/E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1c36418517e1f333c2ed550c90b5a98669bcf70c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return bn=function(){return s},s}bn();class iT extends On.Component{render(){bn().f[0]++;const e=(bn().s[0]++,this.props.t);return bn().s[1]++,ie.jsxs("div",{children:[ie.jsx(Ox,{label:e("TileJSON URL"),fieldSpec:us.source_vector.url,value:this.props.source.url,onChange:t=>(bn().f[1]++,bn().s[2]++,this.props.onChange({...this.props.source,url:t}))}),this.props.children]})}}class rT extends On.Component{changeTileUrls(e){bn().f[2]++,bn().s[3]++,this.props.onChange({...this.props.source,tiles:e})}renderTileUrls(){bn().f[3]++;const e=(bn().s[4]++,bn().b[0][0]++,this.props.source.tiles||(bn().b[0][1]++,[]));return bn().s[5]++,ie.jsx(aae,{label:this.props.t("Tile URL"),fieldSpec:us.source_vector.tiles,type:"url",value:e,onChange:this.changeTileUrls.bind(this)})}render(){bn().f[4]++;const e=(bn().s[6]++,this.props.t);return bn().s[7]++,ie.jsxs("div",{children:[this.renderTileUrls(),ie.jsx(L4,{label:e("Scheme Type"),fieldSpec:us.source_vector.scheme,options:[["xyz","xyz (Slippy map tilenames scheme)"],["tms","tms (OSGeo spec scheme)"]],onChange:t=>(bn().f[5]++,bn().s[8]++,this.props.onChange({...this.props.source,scheme:t})),value:this.props.source.scheme,"data-wd-key":"modal:sources.add.scheme_type"}),ie.jsx($p,{label:e("Min Zoom"),fieldSpec:us.source_vector.minzoom,value:(bn().b[1][0]++,this.props.source.minzoom||(bn().b[1][1]++,0)),onChange:t=>(bn().f[6]++,bn().s[9]++,this.props.onChange({...this.props.source,minzoom:t}))}),ie.jsx($p,{label:e("Max Zoom"),fieldSpec:us.source_vector.maxzoom,value:(bn().b[2][0]++,this.props.source.maxzoom||(bn().b[2][1]++,22)),onChange:t=>(bn().f[7]++,bn().s[10]++,this.props.onChange({...this.props.source,maxzoom:t}))}),this.props.children]})}}bn().s[11]++;const lae=n=>(bn().f[8]++,bn().s[12]++,[{label:n("Coord top left"),key:"top left"},{label:n("Coord top right"),key:"top right"},{label:n("Coord bottom right"),key:"bottom right"},{label:n("Coord bottom left"),key:"bottom left"}]);class oPe extends On.Component{render(){bn().f[9]++;const e=(bn().s[13]++,this.props.t);bn().s[14]++;const t=(i,r)=>{bn().f[10]++;const o=(bn().s[15]++,this.props.source.coordinates.slice(0));bn().s[16]++,o[i]=r,bn().s[17]++,this.props.onChange({...this.props.source,coordinates:o})};return bn().s[18]++,ie.jsxs("div",{children:[ie.jsx(Ox,{label:e("Image URL"),fieldSpec:us.source_image.url,value:this.props.source.url,onChange:i=>(bn().f[11]++,bn().s[19]++,this.props.onChange({...this.props.source,url:i}))}),lae(e).map(({label:i,key:r},o)=>(bn().f[12]++,bn().s[20]++,ie.jsx(iE,{label:i,length:2,type:"number",value:this.props.source.coordinates[o],default:[0,0],onChange:s=>(bn().f[13]++,bn().s[21]++,t(o,s))},r)))]})}}class sPe extends On.Component{render(){bn().f[14]++;const e=(bn().s[22]++,this.props.t);bn().s[23]++;const t=(r,o)=>{bn().f[15]++;const s=(bn().s[24]++,this.props.source.coordinates.slice(0));bn().s[25]++,s[r]=o,bn().s[26]++,this.props.onChange({...this.props.source,coordinates:s})};bn().s[27]++;const i=r=>{bn().f[16]++,bn().s[28]++,this.props.onChange({...this.props.source,urls:r})};return bn().s[29]++,ie.jsxs("div",{children:[ie.jsx(aae,{label:e("Video URL"),fieldSpec:us.source_video.urls,type:"string",value:this.props.source.urls,default:[],onChange:i}),lae(e).map(({label:r,key:o},s)=>(bn().f[17]++,bn().s[30]++,ie.jsx(iE,{label:r,length:2,type:"number",value:this.props.source.coordinates[s],default:[0,0],onChange:a=>(bn().f[18]++,bn().s[31]++,t(s,a))},o)))]})}}class aPe extends On.Component{render(){bn().f[19]++;const e=(bn().s[32]++,this.props.t);return bn().s[33]++,ie.jsx(Ox,{label:e("GeoJSON URL"),fieldSpec:us.source_geojson.data,value:this.props.source.data,onChange:t=>(bn().f[20]++,bn().s[34]++,this.props.onChange({...this.props.source,data:t}))})}}class lPe extends On.Component{render(){bn().f[21]++;const e=(bn().s[35]++,this.props.t);return bn().s[36]++,ie.jsxs("div",{children:[ie.jsx(Gs,{label:e("GeoJSON"),fieldSpec:us.source_geojson.data,children:ie.jsx(rL,{value:this.props.source.data,maxHeight:200,lintType:"json",onChange:t=>{bn().f[22]++,bn().s[37]++,this.props.onChange({...this.props.source,data:t})}})}),ie.jsx(rPe,{label:e("Cluster"),value:this.props.source.cluster,onChange:t=>{bn().f[23]++,bn().s[38]++,this.props.onChange({...this.props.source,cluster:t})}})]})}}class uPe extends On.Component{render(){bn().f[24]++;const e=(bn().s[39]++,this.props.t);return bn().s[40]++,ie.jsxs("div",{children:[ie.jsx(Ox,{label:e("PMTiles URL"),fieldSpec:us.source_vector.url,value:this.props.source.url,"data-wd-key":"modal:sources.add.source_url",onChange:t=>(bn().f[25]++,bn().s[41]++,this.props.onChange({...this.props.source,url:t.startsWith("pmtiles://")?(bn().b[3][0]++,t):(bn().b[3][1]++,`pmtiles://${t}`)}))}),this.props.children]})}}class cPe extends On.Component{render(){bn().f[26]++;const e=(bn().s[42]++,this.props.t),t=(bn().s[43]++,{source:this.props.source,onChange:this.props.onChange,t:this.props.t,i18n:this.props.i18n,tReady:this.props.tReady});switch(bn().s[44]++,this.props.mode){case"geojson_url":return bn().b[4][0]++,bn().s[45]++,ie.jsx(aPe,{...t});case"geojson_json":return bn().b[4][1]++,bn().s[46]++,ie.jsx(lPe,{...t});case"tilejson_vector":return bn().b[4][2]++,bn().s[47]++,ie.jsx(iT,{...t});case"tile_vector":return bn().b[4][3]++,bn().s[48]++,ie.jsx(rT,{...t});case"tilejson_raster":return bn().b[4][4]++,bn().s[49]++,ie.jsx(iT,{...t});case"tile_raster":return bn().b[4][5]++,bn().s[50]++,ie.jsx(rT,{...t,children:ie.jsx($p,{label:e("Tile Size"),fieldSpec:us.source_raster.tileSize,onChange:i=>(bn().f[27]++,bn().s[51]++,this.props.onChange({...this.props.source,tileSize:i})),value:(bn().b[5][0]++,this.props.source.tileSize||(bn().b[5][1]++,us.source_raster.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"})});case"tilejson_raster-dem":return bn().b[4][6]++,bn().s[52]++,ie.jsx(iT,{...t});case"tilexyz_raster-dem":return bn().b[4][7]++,bn().s[53]++,ie.jsxs(rT,{...t,children:[ie.jsx($p,{label:e("Tile Size"),fieldSpec:us.source_raster_dem.tileSize,onChange:i=>(bn().f[28]++,bn().s[54]++,this.props.onChange({...this.props.source,tileSize:i})),value:(bn().b[6][0]++,this.props.source.tileSize||(bn().b[6][1]++,us.source_raster_dem.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"}),ie.jsx(L4,{label:e("Encoding"),fieldSpec:us.source_raster_dem.encoding,options:Object.keys(us.source_raster_dem.encoding.values),onChange:i=>(bn().f[29]++,bn().s[55]++,this.props.onChange({...this.props.source,encoding:i})),value:(bn().b[7][0]++,this.props.source.encoding||(bn().b[7][1]++,us.source_raster_dem.encoding.default))})]});case"pmtiles_vector":return bn().b[4][8]++,bn().s[56]++,ie.jsx(uPe,{...t});case"image":return bn().b[4][9]++,bn().s[57]++,ie.jsx(oPe,{...t});case"video":return bn().b[4][10]++,bn().s[58]++,ie.jsx(sPe,{...t});default:return bn().b[4][11]++,bn().s[59]++,null}}}const uae=(bn().s[60]++,$o()(cPe));function im(){var n="/home/runner/work/maputnik/maputnik/src/libs/source.ts",e="871503159abbdc3b3ae7b24cdaefb6478172c58b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/source.ts",statementMap:{0:{start:{line:2,column:27},end:{line:2,column:50}},1:{start:{line:3,column:2},end:{line:3,column:36}},2:{start:{line:4,column:2},end:{line:7,column:4}},3:{start:{line:10,column:2},end:{line:10,column:50}},4:{start:{line:13,column:25},end:{line:16,column:3}},5:{start:{line:17,column:2},end:{line:20,column:4}}},fnMap:{0:{name:"deleteSource",decl:{start:{line:1,column:16},end:{line:1,column:28}},loc:{start:{line:1,column:49},end:{line:8,column:1}},line:1},1:{name:"addSource",decl:{start:{line:9,column:16},end:{line:9,column:25}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},2:{name:"changeSource",decl:{start:{line:12,column:16},end:{line:12,column:28}},loc:{start:{line:12,column:57},end:{line:21,column:1}},line:12}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/source.ts"],names:[],mappings:"AAGO,gBAAS,aAAa,UAAoC,UAAkB;AACjF,QAAM,mBAAmB,EAAE,GAAG,SAAS,QAAO;AAC9C,SAAO,iBAAiB,QAAQ;AAChC,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;AAGO,gBAAS,UAAU,UAAoC,UAAkB,QAA6B;AAC3G,SAAO,aAAa,UAAU,UAAU,MAAM;AAChD;AAEO,gBAAS,aAAa,UAAoC,UAAkB,QAA6B;AAC9G,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,QAAQ,GAAG;AAAA,EACd;AACA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"871503159abbdc3b3ae7b24cdaefb6478172c58b"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return im=function(){return s},s}im();function APe(n,e){im().f[0]++;const t=(im().s[0]++,{...n.sources});return im().s[1]++,delete t[e],im().s[2]++,{...n,sources:t}}function $V(n,e,t){return im().f[1]++,im().s[3]++,cae(n,e,t)}function cae(n,e,t){im().f[2]++;const i=(im().s[4]++,{...n.sources,[e]:t});return im().s[5]++,{...n,sources:i}}const hPe={type:"vector",url:"https://api.maptiler.com/tiles/v3-openmaptiles/tiles.json?key={key}",title:"OpenMapTiles v3"},dPe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.transport-v2.json?apikey={key}",title:"Thunderforest Transport v2"},fPe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.outdoors-v2.json?apikey={key}",title:"Thunderforest Outdoors v2"},pPe={type:"vector",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/data/vector/open-zoomstack/config.json",title:"OS Open Zoomstack v2"},mPe={type:"vector",url:"https://tiles.locationiq.com/v3/pbf/tiles.json?key={key}",title:"LocationIQ"},VV={openmaptiles:hPe,thunderforest_transport:dPe,thunderforest_outdoors:fPe,open_zoomstack:pPe,locationiq:mPe};function Gt(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx",e="30dc2f79b5d8eab063b35a7a783386d299d39465",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:33,column:9}},1:{start:{line:20,column:23},end:{line:20,column:57}},2:{start:{line:37,column:2},end:{line:40,column:3}},3:{start:{line:38,column:4},end:{line:38,column:43}},4:{start:{line:38,column:22},end:{line:38,column:43}},5:{start:{line:39,column:4},end:{line:39,column:29}},6:{start:{line:41,column:2},end:{line:44,column:3}},7:{start:{line:42,column:4},end:{line:42,column:50}},8:{start:{line:42,column:22},end:{line:42,column:50}},9:{start:{line:43,column:4},end:{line:43,column:33}},10:{start:{line:45,column:2},end:{line:49,column:3}},11:{start:{line:46,column:4},end:{line:46,column:43}},12:{start:{line:46,column:22},end:{line:46,column:43}},13:{start:{line:47,column:4},end:{line:47,column:83}},14:{start:{line:47,column:59},end:{line:47,column:83}},15:{start:{line:48,column:4},end:{line:48,column:29}},16:{start:{line:50,column:2},end:{line:56,column:3}},17:{start:{line:51,column:4},end:{line:55,column:5}},18:{start:{line:52,column:6},end:{line:52,column:27}},19:{start:{line:54,column:6},end:{line:54,column:28}},20:{start:{line:57,column:2},end:{line:59,column:3}},21:{start:{line:58,column:4},end:{line:58,column:19}},22:{start:{line:60,column:2},end:{line:62,column:3}},23:{start:{line:61,column:4},end:{line:61,column:19}},24:{start:{line:63,column:2},end:{line:63,column:14}},25:{start:{line:67,column:14},end:{line:67,column:26}},26:{start:{line:68,column:4},end:{line:94,column:9}},27:{start:{line:80,column:27},end:{line:80,column:67}},28:{start:{line:99,column:4},end:{line:99,column:17}},29:{start:{line:100,column:4},end:{line:104,column:6}},30:{start:{line:107,column:19},end:{line:107,column:50}},31:{start:{line:108,column:25},end:{line:108,column:40}},32:{start:{line:109,column:4},end:{line:192,column:5}},33:{start:{line:111,column:8},end:{line:114,column:10}},34:{start:{line:116,column:8},end:{line:119,column:10}},35:{start:{line:121,column:8},end:{line:125,column:10}},36:{start:{line:127,column:8},end:{line:130,column:10}},37:{start:{line:132,column:8},end:{line:138,column:10}},38:{start:{line:140,column:8},end:{line:143,column:10}},39:{start:{line:145,column:8},end:{line:152,column:10}},40:{start:{line:154,column:8},end:{line:157,column:10}},41:{start:{line:159,column:8},end:{line:165,column:10}},42:{start:{line:167,column:8},end:{line:176,column:10}},43:{start:{line:178,column:8},end:{line:189,column:10}},44:{start:{line:191,column:8},end:{line:191,column:18}},45:{start:{line:194,column:10},end:{line:197,column:3}},46:{start:{line:195,column:33},end:{line:195,column:43}},47:{start:{line:196,column:4},end:{line:196,column:39}},48:{start:{line:198,column:19},end:{line:200,column:3}},49:{start:{line:199,column:4},end:{line:199,column:30}},50:{start:{line:202,column:14},end:{line:202,column:26}},51:{start:{line:203,column:32},end:{line:205,column:5}},52:{start:{line:206,column:4},end:{line:257,column:9}},53:{start:{line:213,column:27},end:{line:213,column:57}},54:{start:{line:235,column:30},end:{line:235,column:87}},55:{start:{line:262,column:27},end:{line:262,column:40}},56:{start:{line:263,column:4},end:{line:263,column:35}},57:{start:{line:264,column:4},end:{line:264,column:26}},58:{start:{line:267,column:28},end:{line:267,column:38}},59:{start:{line:268,column:22},end:{line:268,column:77}},60:{start:{line:269,column:26},end:{line:282,column:6}},61:{start:{line:270,column:21},end:{line:270,column:47}},62:{start:{line:271,column:6},end:{line:281,column:8}},63:{start:{line:276,column:29},end:{line:276,column:93}},64:{start:{line:277,column:26},end:{line:277,column:85}},65:{start:{line:283,column:27},end:{line:295,column:6}},66:{start:{line:283,column:75},end:{line:283,column:106}},67:{start:{line:284,column:21},end:{line:284,column:44}},68:{start:{line:285,column:6},end:{line:294,column:8}},69:{start:{line:291,column:26},end:{line:291,column:107}},70:{start:{line:296,column:4},end:{line:326,column:6}},71:{start:{line:319,column:45},end:{line:319,column:109}},72:{start:{line:329,column:21},end:{line:329,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:34,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:57}},line:20},2:{name:"editorMode",decl:{start:{line:36,column:9},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:64,column:1}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:66,column:2},end:{line:66,column:3}},loc:{start:{line:66,column:11},end:{line:95,column:3}},line:66},4:{name:"(anonymous_4)",decl:{start:{line:80,column:21},end:{line:80,column:22}},loc:{start:{line:80,column:27},end:{line:80,column:67}},line:80},5:{name:"(anonymous_5)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:21},end:{line:105,column:3}},line:98},6:{name:"(anonymous_6)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:22},end:{line:193,column:3}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:194,column:10},end:{line:194,column:11}},loc:{start:{line:194,column:16},end:{line:197,column:3}},line:194},8:{name:"(anonymous_8)",decl:{start:{line:198,column:19},end:{line:198,column:20}},loc:{start:{line:198,column:31},end:{line:200,column:3}},line:198},9:{name:"(anonymous_9)",decl:{start:{line:201,column:2},end:{line:201,column:3}},loc:{start:{line:201,column:11},end:{line:258,column:3}},line:201},10:{name:"(anonymous_10)",decl:{start:{line:213,column:20},end:{line:213,column:21}},loc:{start:{line:213,column:27},end:{line:213,column:57}},line:213},11:{name:"(anonymous_11)",decl:{start:{line:235,column:20},end:{line:235,column:21}},loc:{start:{line:235,column:30},end:{line:235,column:87}},line:235},12:{name:"(anonymous_12)",decl:{start:{line:261,column:2},end:{line:261,column:3}},loc:{start:{line:261,column:21},end:{line:265,column:3}},line:261},13:{name:"(anonymous_13)",decl:{start:{line:266,column:2},end:{line:266,column:3}},loc:{start:{line:266,column:11},end:{line:327,column:3}},line:266},14:{name:"(anonymous_14)",decl:{start:{line:269,column:60},end:{line:269,column:61}},loc:{start:{line:269,column:74},end:{line:282,column:5}},line:269},15:{name:"(anonymous_15)",decl:{start:{line:276,column:20},end:{line:276,column:21}},loc:{start:{line:276,column:29},end:{line:276,column:93}},line:276},16:{name:"(anonymous_16)",decl:{start:{line:277,column:20},end:{line:277,column:21}},loc:{start:{line:277,column:26},end:{line:277,column:85}},line:277},17:{name:"(anonymous_17)",decl:{start:{line:283,column:61},end:{line:283,column:62}},loc:{start:{line:283,column:75},end:{line:283,column:106}},line:283},18:{name:"(anonymous_18)",decl:{start:{line:283,column:112},end:{line:283,column:113}},loc:{start:{line:283,column:126},end:{line:295,column:5}},line:283},19:{name:"(anonymous_19)",decl:{start:{line:291,column:20},end:{line:291,column:21}},loc:{start:{line:291,column:26},end:{line:291,column:107}},line:291},20:{name:"(anonymous_20)",decl:{start:{line:319,column:23},end:{line:319,column:24}},loc:{start:{line:319,column:45},end:{line:319,column:109}},line:319}},branchMap:{0:{loc:{start:{line:37,column:2},end:{line:40,column:3}},type:"if",locations:[{start:{line:37,column:2},end:{line:40,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},1:{loc:{start:{line:38,column:4},end:{line:38,column:43}},type:"if",locations:[{start:{line:38,column:4},end:{line:38,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:41,column:2},end:{line:44,column:3}},type:"if",locations:[{start:{line:41,column:2},end:{line:44,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:42,column:4},end:{line:42,column:50}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:50}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},4:{loc:{start:{line:45,column:2},end:{line:49,column:3}},type:"if",locations:[{start:{line:45,column:2},end:{line:49,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},5:{loc:{start:{line:46,column:4},end:{line:46,column:43}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:47,column:4},end:{line:47,column:83}},type:"if",locations:[{start:{line:47,column:4},end:{line:47,column:83}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},7:{loc:{start:{line:47,column:8},end:{line:47,column:57}},type:"binary-expr",locations:[{start:{line:47,column:8},end:{line:47,column:18}},{start:{line:47,column:22},end:{line:47,column:57}}],line:47},8:{loc:{start:{line:50,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:50,column:2},end:{line:56,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},9:{loc:{start:{line:51,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:55,column:5}},{start:{line:53,column:11},end:{line:55,column:5}}],line:51},10:{loc:{start:{line:57,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:57,column:2},end:{line:59,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:60,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:60,column:2},end:{line:62,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},12:{loc:{start:{line:107,column:19},end:{line:107,column:50}},type:"binary-expr",locations:[{start:{line:107,column:19},end:{line:107,column:44}},{start:{line:107,column:48},end:{line:107,column:50}}],line:107},13:{loc:{start:{line:107,column:20},end:{line:107,column:36}},type:"binary-expr",locations:[{start:{line:107,column:20},end:{line:107,column:30}},{start:{line:107,column:34},end:{line:107,column:36}}],line:107},14:{loc:{start:{line:109,column:4},end:{line:192,column:5}},type:"switch",locations:[{start:{line:110,column:6},end:{line:114,column:10}},{start:{line:115,column:6},end:{line:119,column:10}},{start:{line:120,column:6},end:{line:125,column:10}},{start:{line:126,column:6},end:{line:130,column:10}},{start:{line:131,column:6},end:{line:138,column:10}},{start:{line:139,column:6},end:{line:143,column:10}},{start:{line:144,column:6},end:{line:152,column:10}},{start:{line:153,column:6},end:{line:157,column:10}},{start:{line:158,column:6},end:{line:165,column:10}},{start:{line:166,column:6},end:{line:176,column:10}},{start:{line:177,column:6},end:{line:189,column:10}},{start:{line:190,column:6},end:{line:191,column:18}}],line:109},15:{loc:{start:{line:123,column:19},end:{line:123,column:42}},type:"binary-expr",locations:[{start:{line:123,column:19},end:{line:123,column:33}},{start:{line:123,column:37},end:{line:123,column:42}}],line:123},16:{loc:{start:{line:129,column:15},end:{line:129,column:72}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:25}},{start:{line:129,column:29},end:{line:129,column:72}}],line:129},17:{loc:{start:{line:134,column:17},end:{line:134,column:80}},type:"binary-expr",locations:[{start:{line:134,column:17},end:{line:134,column:29}},{start:{line:134,column:33},end:{line:134,column:80}}],line:134},18:{loc:{start:{line:135,column:19},end:{line:135,column:38}},type:"binary-expr",locations:[{start:{line:135,column:19},end:{line:135,column:33}},{start:{line:135,column:37},end:{line:135,column:38}}],line:135},19:{loc:{start:{line:136,column:19},end:{line:136,column:39}},type:"binary-expr",locations:[{start:{line:136,column:19},end:{line:136,column:33}},{start:{line:136,column:37},end:{line:136,column:39}}],line:136},20:{loc:{start:{line:137,column:18},end:{line:137,column:40}},type:"binary-expr",locations:[{start:{line:137,column:18},end:{line:137,column:31}},{start:{line:137,column:35},end:{line:137,column:40}}],line:137},21:{loc:{start:{line:142,column:15},end:{line:142,column:72}},type:"binary-expr",locations:[{start:{line:142,column:15},end:{line:142,column:25}},{start:{line:142,column:29},end:{line:142,column:72}}],line:142},22:{loc:{start:{line:147,column:17},end:{line:147,column:80}},type:"binary-expr",locations:[{start:{line:147,column:17},end:{line:147,column:29}},{start:{line:147,column:33},end:{line:147,column:80}}],line:147},23:{loc:{start:{line:148,column:19},end:{line:148,column:38}},type:"binary-expr",locations:[{start:{line:148,column:19},end:{line:148,column:33}},{start:{line:148,column:37},end:{line:148,column:38}}],line:148},24:{loc:{start:{line:149,column:19},end:{line:149,column:39}},type:"binary-expr",locations:[{start:{line:149,column:19},end:{line:149,column:33}},{start:{line:149,column:37},end:{line:149,column:39}}],line:149},25:{loc:{start:{line:150,column:18},end:{line:150,column:40}},type:"binary-expr",locations:[{start:{line:150,column:18},end:{line:150,column:31}},{start:{line:150,column:35},end:{line:150,column:40}}],line:150},26:{loc:{start:{line:151,column:20},end:{line:151,column:42}},type:"binary-expr",locations:[{start:{line:151,column:20},end:{line:151,column:35}},{start:{line:151,column:39},end:{line:151,column:42}}],line:151},27:{loc:{start:{line:156,column:15},end:{line:156,column:72}},type:"binary-expr",locations:[{start:{line:156,column:15},end:{line:156,column:25}},{start:{line:156,column:29},end:{line:156,column:72}}],line:156},28:{loc:{start:{line:161,column:17},end:{line:161,column:80}},type:"binary-expr",locations:[{start:{line:161,column:17},end:{line:161,column:29}},{start:{line:161,column:33},end:{line:161,column:80}}],line:161},29:{loc:{start:{line:162,column:19},end:{line:162,column:38}},type:"binary-expr",locations:[{start:{line:162,column:19},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:38}}],line:162},30:{loc:{start:{line:163,column:19},end:{line:163,column:39}},type:"binary-expr",locations:[{start:{line:163,column:19},end:{line:163,column:33}},{start:{line:163,column:37},end:{line:163,column:39}}],line:163},31:{loc:{start:{line:164,column:20},end:{line:164,column:42}},type:"binary-expr",locations:[{start:{line:164,column:20},end:{line:164,column:35}},{start:{line:164,column:39},end:{line:164,column:42}}],line:164}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0,0,0,0,0,0,0,0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx"],names:[],mappings:"AAiCU,cACA,YADA;AAjCV,OAAO,WAAW;AAClB,SAAQ,oBAAoB,gBAAe;AAC3C,OAAO,YAAY;AAEnB,SAA+B,uBAAuB;AAEtD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,4BAAiD;AAExD,OAAO,WAAW;AAClB,SAAS,cAAc,WAAW,oBAAoB;AACtD,OAAO,mBAAmB;AAW1B,MAAM,qBAAqB,MAAM,UAA6B;AAAA,EAC5D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,0BACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,EAAE;AAAA,QAEhD;AAAA,+BAAC,SAAI,WAAU,+BACb;AAAA,gCAAC,OAAE,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,YAC7D,qBAAC,OAAE,WAAU,6BAA4B;AAAA;AAAA,cAAE,KAAK,MAAM;AAAA,eAAG;AAAA,aAC3D;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC,oBAAC,sBAAmB;AAAA;AAAA;AAAA,IACtB,GACF;AAAA,EACF;AACF;AAEA,SAAS,WAAW,QAA6B;AAC/C,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,cAAc;AAC/B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,QAAG,OAAO,OAAO,OAAO,IAAI,WAAW,YAAY,EAAG,QAAO;AAC7D,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,WAAW;AAC5B,QAAI,OAAO,OAAO,SAAU,UAAU;AACpC,aAAO;AAAA,IACT,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,SAAO;AACT;AASA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,2BAAC,SAAI,WAAU,6CACb;AAAA,6BAAC,UAAK,WAAU,gDAA+C;AAAA;AAAA,UAAE,KAAK,MAAM;AAAA,WAAS;AAAA,QACrF,oBAAC,UAAK,WAAU,kBAAiB;AAAA,QACjC;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,EAAE,gCAAgC,EAAC,UAAU,KAAK,MAAM,SAAQ,CAAC;AAAA,YAC7E,WAAU;AAAA,YACV,SAAS,MAAK,KAAK,MAAM,SAAS,KAAK,MAAM,QAAQ;AAAA,YACrD,OAAO,EAAC,iBAAiB,cAAa;AAAA,YAEtC,8BAAC,YAAS;AAAA;AAAA,QACZ;AAAA,SACF;AAAA,MACA,oBAAC,SAAI,WAAU,8CACb;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,MAAM,WAAW,KAAK,MAAM,MAAM;AAAA,UAClC,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB,GACF;AAAA,OACF;AAAA,EACF;AACF;AAYA,MAAM,kBAAkB,MAAM,UAA0C;AAAA,EACtE,YAAY,OAAuB;AACjC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU,MAAM,WAAW;AAAA,MAC3B,QAAQ,KAAK,cAAc,iBAAiB;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,cAAc,MAAuC;AACnD,UAAM,UAAU,KAAK,SAAS,CAAC,GAAG,UAAU,CAAC;AAC7C,UAAM,EAAC,SAAQ,IAAI,OAAO;AAE1B,YAAO,MAAM;AAAA,MACX,KAAK;AAAkB,eAAO;AAAA,UAC5B,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,QAClB;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,MAAM,GAAG,QAAQ;AAAA,QACnB;AAAA,MACA,KAAK;AAAgB,eAAO;AAAA,UAC1B,MAAM;AAAA,UACN,SAAU,OAAsC,WAAW;AAAA,UAC3D,MAAM;AAAA,QACR;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,QAC1D;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,UACxD,UAAW,OAAqC,YAAY;AAAA,QAC9D;AAAA,MACA,KAAK;AAAuB,eAAO;AAAA,UACjC,MAAM;AAAA,UACN,KAAM,OAAwC,OAAO,GAAG,QAAQ;AAAA,QAClE;AAAA,MACA,KAAK;AAAsB,eAAO;AAAA,UAChC,MAAM;AAAA,UACN,OAAQ,OAAwC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACvG,SAAU,OAAwC,WAAW;AAAA,UAC7D,SAAU,OAAwC,WAAW;AAAA,UAC7D,UAAW,OAAwC,YAAY;AAAA,QACjE;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,UAChB,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,GAAG,QAAQ;AAAA,UACb;AAAA,UACA,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA;AAAS,eAAO,CAAC;AAAA,IACnB;AAAA,EACF;AAAA,EAEA,QAAQ,MAAM;AACZ,UAAM,EAAC,QAAQ,SAAQ,IAAI,KAAK;AAChC,SAAK,MAAM,MAAM,UAAU,MAAM;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,WAAgC;AAChD,SAAK,SAAS,EAAC,OAAM,CAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAQrB,UAAM,sBAAsB;AAAA,MAC1B,KAAK,OAAO,cAAc,KAAK;AAAA,IACjC;AAEA,WAAO,qBAAC,SAAI,WAAU,uBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,EAAC,KAAK,EAAE,wFAAwF,EAAC;AAAA,UAC5G,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,UAAU,EAAC,CAAC;AAAA,UACrD,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW;AAAA,UACX,SAAS;AAAA,YACP,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;AAAA,YACpC,CAAC,eAAe,EAAE,eAAe,CAAC;AAAA,YAClC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,uBAAuB,EAAE,2BAA2B,CAAC;AAAA,YACtD,CAAC,sBAAsB,EAAE,uBAAuB,CAAC;AAAA,YACjD,CAAC,kBAAkB,EAAE,kBAAkB,CAAC;AAAA,YACxC,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,YACpB,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,UACtB;AAAA,UACA,UAAU,UAAQ,KAAK,SAAS,EAAC,MAA0B,QAAQ,KAAK,cAAc,IAAkB,EAAC,CAAC;AAAA,UAC1G,OAAO,KAAK,MAAM;AAAA,UAClB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK;AAAA,UACf,MAAM,KAAK,MAAM;AAAA,UACjB,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UACd,eAAY;AAAA,UAEX,YAAE,YAAY;AAAA;AAAA,MACjB;AAAA,OACF;AAAA,EACF;AACF;AASA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,WAAW,QAAqE;AAC9E,UAAM,iBAAiB,EAAC,GAAG,OAAM;AACjC,WAAO,eAAe,OAAO;AAC7B,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,SAAQ,IAAI,KAAK;AAC3B,UAAM,YAAY,EAAC,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAM;AACtE,UAAM,gBAAgB,OAAO,KAAK,SAAS,OAAO,EAAE,IAAI,cAAY;AAClE,YAAM,SAAS,SAAS,QAAQ,QAAQ;AACxC,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN;AAAA,UACA;AAAA,UACA,UAAU,CAAC,QAA6B,KAAK,MAAM,eAAe,aAAa,UAAU,UAAU,GAAG,CAAC;AAAA,UACvG,UAAU,MAAM,KAAK,MAAM,eAAe,aAAa,UAAU,QAAQ,CAAC;AAAA,UACzE,GAAG;AAAA;AAAA,QALC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,iBAAiB,OAAO,KAAK,aAAa,EAAE,OAAO,CAAC,aAAqB,EAAE,YAAY,SAAS,QAAQ,EAAE,IAAI,CAAC,aAAqB;AACxI,YAAM,SAAS,cAAc,QAAsC;AACnE,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,IAAI;AAAA,UACJ,MAAM,OAAO;AAAA,UACb,OAAO,OAAO;AAAA,UACd,UAAU,MAAM,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,KAAK,WAAW,MAAM,CAAC,CAAC;AAAA;AAAA,QAJ3F;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,SAAS;AAAA,QAElB;AAAA,+BAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACxB;AAAA,aACH;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,sBAAsB,GAAE;AAAA,YAC/B,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,YACA,oBAAC,SAAI,WAAU,2BAA0B,OAAO,EAAC,UAAU,IAAG,GAC3D,0BACH;AAAA,aACF;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACzB,oBAAC,OAAG,YAAE,8FAA8F,GAAE;AAAA,YACtG;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,CAAC,UAAkB,WAAgC,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,MAAM,CAAC;AAAA,gBACxH,GAAG;AAAA;AAAA,YACN;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"30dc2f79b5d8eab063b35a7a783386d299d39465"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Gt=function(){return s},s}Gt();class gPe extends On.Component{render(){return Gt().f[0]++,Gt().s[0]++,ie.jsx("div",{className:"maputnik-public-source",children:ie.jsxs(Js,{className:"maputnik-public-source-select",onClick:()=>(Gt().f[1]++,Gt().s[1]++,this.props.onSelect(this.props.id)),children:[ie.jsxs("div",{className:"maputnik-public-source-info",children:[ie.jsx("p",{className:"maputnik-public-source-name",children:this.props.title}),ie.jsxs("p",{className:"maputnik-public-source-id",children:["#",this.props.id]})]}),ie.jsx("span",{className:"maputnik-space"}),ie.jsx(QX,{})]})})}}function yPe(n){return Gt().f[2]++,Gt().s[2]++,n.type==="raster"?(Gt().b[0][0]++,Gt().s[3]++,n.tiles?(Gt().b[1][0]++,Gt().s[4]++,"tile_raster"):(Gt().b[1][1]++,Gt().s[5]++,"tilejson_raster")):(Gt().b[0][1]++,Gt().s[6]++,n.type==="raster-dem"?(Gt().b[2][0]++,Gt().s[7]++,n.tiles?(Gt().b[3][0]++,Gt().s[8]++,"tilexyz_raster-dem"):(Gt().b[3][1]++,Gt().s[9]++,"tilejson_raster-dem")):(Gt().b[2][1]++,Gt().s[10]++,n.type==="vector"?(Gt().b[4][0]++,Gt().s[11]++,n.tiles?(Gt().b[5][0]++,Gt().s[12]++,"tile_vector"):(Gt().b[5][1]++,Gt().s[13]++,Gt().b[7][0]++,n.url&&(Gt().b[7][1]++,n.url.startsWith("pmtiles://"))?(Gt().b[6][0]++,Gt().s[14]++,"pmtiles_vector"):(Gt().b[6][1]++,Gt().s[15]++,"tilejson_vector"))):(Gt().b[4][1]++,Gt().s[16]++,n.type==="geojson"?(Gt().b[8][0]++,Gt().s[17]++,typeof n.data=="string"?(Gt().b[9][0]++,Gt().s[18]++,"geojson_url"):(Gt().b[9][1]++,Gt().s[19]++,"geojson_json")):(Gt().b[8][1]++,Gt().s[20]++,n.type==="image"?(Gt().b[10][0]++,Gt().s[21]++,"image"):(Gt().b[10][1]++,Gt().s[22]++,n.type==="video"?(Gt().b[11][0]++,Gt().s[23]++,"video"):(Gt().b[11][1]++,Gt().s[24]++,null))))))}class vPe extends On.Component{render(){Gt().f[3]++;const e=(Gt().s[25]++,this.props.t);return Gt().s[26]++,ie.jsxs("div",{className:"maputnik-active-source-type-editor",children:[ie.jsxs("div",{className:"maputnik-active-source-type-editor-header",children:[ie.jsxs("span",{className:"maputnik-active-source-type-editor-header-id",children:["#",this.props.sourceId]}),ie.jsx("span",{className:"maputnik-space"}),ie.jsx(Js,{"aria-label":e("Remove '{{sourceId}}' source",{sourceId:this.props.sourceId}),className:"maputnik-active-source-type-editor-header-delete",onClick:()=>(Gt().f[4]++,Gt().s[27]++,this.props.onDelete(this.props.sourceId)),style:{backgroundColor:"transparent"},children:ie.jsx($b,{})})]}),ie.jsx("div",{className:"maputnik-active-source-type-editor-content",children:ie.jsx(uae,{onChange:this.props.onChange,mode:yPe(this.props.source),source:this.props.source})})]})}}class bPe extends On.Component{constructor(e){Gt().f[5]++,Gt().s[28]++,super(e),Gt().s[29]++,this.state={mode:"tilejson_vector",sourceId:_d.generateId(),source:this.defaultSource("tilejson_vector")}}defaultSource(e){Gt().f[6]++;const t=(Gt().s[30]++,Gt().b[12][0]++,(Gt().b[13][0]++,this.state||(Gt().b[13][1]++,{})).source||(Gt().b[12][1]++,{})),{protocol:i}=(Gt().s[31]++,window.location);switch(Gt().s[32]++,e){case"pmtiles_vector":return Gt().b[14][0]++,Gt().s[33]++,{type:"vector",url:`${i}//localhost:3000/file.pmtiles`};case"geojson_url":return Gt().b[14][1]++,Gt().s[34]++,{type:"geojson",data:`${i}//localhost:3000/geojson.json`};case"geojson_json":return Gt().b[14][2]++,Gt().s[35]++,{type:"geojson",cluster:(Gt().b[15][0]++,t.cluster||(Gt().b[15][1]++,!1)),data:""};case"tilejson_vector":return Gt().b[14][3]++,Gt().s[36]++,{type:"vector",url:(Gt().b[16][0]++,t.url||(Gt().b[16][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_vector":return Gt().b[14][4]++,Gt().s[37]++,{type:"vector",tiles:(Gt().b[17][0]++,t.tiles||(Gt().b[17][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.pbf`])),minzoom:(Gt().b[18][0]++,t.minzoom||(Gt().b[18][1]++,0)),maxzoom:(Gt().b[19][0]++,t.maxzoom||(Gt().b[19][1]++,14)),scheme:(Gt().b[20][0]++,t.scheme||(Gt().b[20][1]++,"xyz"))};case"tilejson_raster":return Gt().b[14][5]++,Gt().s[38]++,{type:"raster",url:(Gt().b[21][0]++,t.url||(Gt().b[21][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_raster":return Gt().b[14][6]++,Gt().s[39]++,{type:"raster",tiles:(Gt().b[22][0]++,t.tiles||(Gt().b[22][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(Gt().b[23][0]++,t.minzoom||(Gt().b[23][1]++,0)),maxzoom:(Gt().b[24][0]++,t.maxzoom||(Gt().b[24][1]++,14)),scheme:(Gt().b[25][0]++,t.scheme||(Gt().b[25][1]++,"xyz")),tileSize:(Gt().b[26][0]++,t.tileSize||(Gt().b[26][1]++,512))};case"tilejson_raster-dem":return Gt().b[14][7]++,Gt().s[40]++,{type:"raster-dem",url:(Gt().b[27][0]++,t.url||(Gt().b[27][1]++,`${i}//localhost:3000/tilejson.json`))};case"tilexyz_raster-dem":return Gt().b[14][8]++,Gt().s[41]++,{type:"raster-dem",tiles:(Gt().b[28][0]++,t.tiles||(Gt().b[28][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(Gt().b[29][0]++,t.minzoom||(Gt().b[29][1]++,0)),maxzoom:(Gt().b[30][0]++,t.maxzoom||(Gt().b[30][1]++,14)),tileSize:(Gt().b[31][0]++,t.tileSize||(Gt().b[31][1]++,512))};case"image":return Gt().b[14][9]++,Gt().s[42]++,{type:"image",url:`${i}//localhost:3000/image.png`,coordinates:[[0,0],[0,0],[0,0],[0,0]]};case"video":return Gt().b[14][10]++,Gt().s[43]++,{type:"video",urls:[`${i}//localhost:3000/movie.mp4`],coordinates:[[0,0],[0,0],[0,0],[0,0]]};default:return Gt().b[14][11]++,Gt().s[44]++,{}}}onAdd=(Gt().s[45]++,()=>{Gt().f[7]++;const{source:e,sourceId:t}=(Gt().s[46]++,this.state);Gt().s[47]++,this.props.onAdd(t,e)});onChangeSource=(Gt().s[48]++,e=>{Gt().f[8]++,Gt().s[49]++,this.setState({source:e})});render(){Gt().f[9]++;const e=(Gt().s[50]++,this.props.t),t=(Gt().s[51]++,{doc:Jr.source_vector.type.doc});return Gt().s[52]++,ie.jsxs("div",{className:"maputnik-add-source",children:[ie.jsx(Ad,{label:e("Source ID"),fieldSpec:{doc:e("Unique ID that identifies the source and is used in the layer to reference the source.")},value:this.state.sourceId,onChange:i=>(Gt().f[10]++,Gt().s[53]++,this.setState({sourceId:i})),"data-wd-key":"modal:sources.add.source_id"}),ie.jsx(L4,{label:e("Source Type"),fieldSpec:t,options:[["geojson_json",e("GeoJSON (JSON)")],["geojson_url",e("GeoJSON (URL)")],["tilejson_vector",e("Vector (TileJSON URL)")],["tile_vector",e("Vector (Tile URLs)")],["tilejson_raster",e("Raster (TileJSON URL)")],["tile_raster",e("Raster (Tile URLs)")],["tilejson_raster-dem",e("Raster DEM (TileJSON URL)")],["tilexyz_raster-dem",e("Raster DEM (XYZ URLs)")],["pmtiles_vector",e("Vector (PMTiles)")],["image",e("Image")],["video",e("Video")]],onChange:i=>(Gt().f[11]++,Gt().s[54]++,this.setState({mode:i,source:this.defaultSource(i)})),value:this.state.mode,"data-wd-key":"modal:sources.add.source_type"}),ie.jsx(uae,{onChange:this.onChangeSource,mode:this.state.mode,source:this.state.source}),ie.jsx(Js,{className:"maputnik-add-source-button",onClick:this.onAdd,"data-wd-key":"modal:sources.add.add_source",children:e("Add Source")})]})}}class CPe extends On.Component{stripTitle(e){Gt().f[12]++;const t=(Gt().s[55]++,{...e});return Gt().s[56]++,delete t.title,Gt().s[57]++,t}render(){Gt().f[13]++;const{t:e,mapStyle:t}=(Gt().s[58]++,this.props),i=(Gt().s[59]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),r=(Gt().s[60]++,Object.keys(t.sources).map(s=>{Gt().f[14]++;const a=(Gt().s[61]++,t.sources[s]);return Gt().s[62]++,ie.jsx(vPe,{sourceId:s,source:a,onChange:c=>(Gt().f[15]++,Gt().s[63]++,this.props.onStyleChanged(cae(t,s,c))),onDelete:()=>(Gt().f[16]++,Gt().s[64]++,this.props.onStyleChanged(APe(t,s))),...i},s)})),o=(Gt().s[65]++,Object.keys(VV).filter(s=>(Gt().f[17]++,Gt().s[66]++,!(s in t.sources))).map(s=>{Gt().f[18]++;const a=(Gt().s[67]++,VV[s]);return Gt().s[68]++,ie.jsx(gPe,{id:s,type:a.type,title:a.title,onSelect:()=>(Gt().f[19]++,Gt().s[69]++,this.props.onStyleChanged($V(t,s,this.stripTitle(a))))},s)}));return Gt().s[70]++,ie.jsxs(C1,{"data-wd-key":"modal:sources",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Sources"),children:[ie.jsxs("section",{className:"maputnik-modal-section",children:[ie.jsx("h1",{children:e("Active Sources")}),r]}),ie.jsxs("section",{className:"maputnik-modal-section",children:[ie.jsx("h1",{children:e("Choose Public Source")}),ie.jsx("p",{children:e("Add one of the publicly available sources to your style.")}),ie.jsx("div",{className:"maputnik-public-sources",style:{maxWidth:500},children:o})]}),ie.jsxs("section",{className:"maputnik-modal-section",children:[ie.jsx("h1",{children:e("Add New Source")}),ie.jsx("p",{children:e("Add a new source to your style. You can only choose the source type and id at creation time!")}),ie.jsx(bPe,{onAdd:(s,a)=>(Gt().f[20]++,Gt().s[71]++,this.props.onStyleChanged($V(t,s,a))),...i})]})]})}}const _Pe=(Gt().s[72]++,$o()(CPe));function fg(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx",e="14882741b03cd24dba8e21fe7c0f0c38039a7560",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:22,column:6}},2:{start:{line:16,column:28},end:{line:16,column:49}},3:{start:{line:19,column:137},end:{line:19,column:159}},4:{start:{line:25,column:21},end:{line:25,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:23,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:16,column:22},end:{line:16,column:23}},loc:{start:{line:16,column:28},end:{line:16,column:49}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:130},end:{line:19,column:131}},loc:{start:{line:19,column:137},end:{line:19,column:159}},line:19}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx"],names:[],mappings:"AAkBW,SAOL,KAPK;AAlBX,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAWlB,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,oBAAoB;AAAA,QACpB,OAAO,KAAK,MAAM;AAAA,QAClB,cAAc,MAAM,KAAK,MAAM,SAAS;AAAA,QAExC;AAAA,8BAAC,OACE,eAAK,MAAM,SACd;AAAA,UACA,oBAAC,OAAE,WAAU,4BACX,8BAAC,eAAY,SAAS,CAAC,MAAM,KAAK,MAAM,SAAS,CAAC,GAC/C,YAAE,QAAQ,GACb,GACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"14882741b03cd24dba8e21fe7c0f0c38039a7560"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return fg=function(){return s},s}fg();class xPe extends On.Component{render(){fg().f[0]++;const e=(fg().s[0]++,this.props.t);return fg().s[1]++,ie.jsxs(C1,{"data-wd-key":"modal:loading",isOpen:this.props.isOpen,underlayClickExits:!1,title:this.props.title,onOpenToggle:()=>(fg().f[1]++,fg().s[2]++,this.props.onCancel()),children:[ie.jsx("p",{children:this.props.message}),ie.jsx("p",{className:"maputnik-dialog__buttons",children:ie.jsx(Js,{onClick:t=>(fg().f[2]++,fg().s[3]++,this.props.onCancel(t)),children:e("Cancel")})})]})}}const MPe=(fg().s[4]++,$o()(xPe)),Aae=[{id:"0-empty-style",title:"Empty Style",url:"https://cdn.jsdelivr.net/gh/maputnik/editor@9cf74ca405d2be0608b57db8109cf3a6af5b9f49/src/config/empty-style.json",thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAQAAAAHDYbIAAAAEUlEQVR42mP8/58BDhiJ4wAA974H/U5Xe1oAAAAASUVORK5CYII="},{id:"americana",title:"Americana",url:"https://americanamap.org/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/23fa75ad-63e6-43f5-8837-03cdb0428bac"},{id:"aws-hybrid",title:"AWS Hybrid",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Hybrid/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-hybrid.jpg"},{id:"aws-standard",title:"AWS Standard",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Standard/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-standard.jpg"},{id:"dark-matter",title:"Dark Matter",url:"https://cdn.jsdelivr.net/gh/openmaptiles/dark-matter-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/dark-matter.png"},{id:"locationiq-streets",title:"LocationIQ Streets",url:"https://tiles.locationiq.com/v3/streets/vector.json?key={key}",thumbnail:"https://static-assets.locationiq.com/maputnik/locationiq-streets.png"},{id:"maptiler-basic-gl-style",title:"MapTiler Basic",url:"https://cdn.jsdelivr.net/gh/openmaptiles/klokantech-basic-gl-style@v1.10/style.json",thumbnail:"https://maputnik.github.io/thumbnails/klokantech-basic.png"},{id:"maptiler-toner-gl-style",title:"Toner",url:"https://cdn.jsdelivr.net/gh/openmaptiles/toner-gl-style@v1.0/style.json",thumbnail:"https://maputnik.github.io/thumbnails/toner.png"},{id:"osm-bright",title:"OSM Bright",url:"https://cdn.jsdelivr.net/gh/openmaptiles/osm-bright-gl-style@v1.11/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-bright.png"},{id:"osm-liberty",title:"OSM Liberty",url:"https://maputnik.github.io/osm-liberty/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-liberty.png"},{id:"osm-openmaptiles",title:"OSM OpenMapTiles",url:"https://api.maptiler.com/maps/openstreetmap/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",thumbnail:"https://openmaptiles.org/img/styles/openmaptiles.png"},{id:"positron",title:"Positron",url:"https://cdn.jsdelivr.net/gh/openmaptiles/positron-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/positron.png"},{id:"protomaps-light",title:"Protomaps Light",url:"https://api.protomaps.com/styles/v4/light/en.json?key=d828297496b11844",thumbnail:"https://github.com/user-attachments/assets/911f9765-4a7d-4736-9ec0-f2d4c90ae587"},{id:"stadia-outdoors",title:"Stadia Outdoors",url:"https://tiles.stadiamaps.com/styles/outdoors.json",thumbnail:"https://tiles.stadiamaps.com/static/outdoors.png?size=480x320&center=47.350259,8.49035&zoom=16"},{id:"versatiles-colorful",title:"Versatiles Colorful",url:"https://tiles.versatiles.org/assets/styles/colorful/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/6cd69818-c541-46e4-a920-65fb4f654931"}];function Cn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx",e="f3a6249e96d42fc8e59bc18fb123f3ec8de2b220",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx",statementMap:{0:{start:{line:14,column:4},end:{line:37,column:9}},1:{start:{line:19,column:23},end:{line:19,column:58}},2:{start:{line:42,column:4},end:{line:42,column:17}},3:{start:{line:43,column:4},end:{line:45,column:6}},4:{start:{line:48,column:4},end:{line:50,column:7}},5:{start:{line:53,column:4},end:{line:53,column:31}},6:{start:{line:53,column:11},end:{line:53,column:31}},7:{start:{line:54,column:4},end:{line:60,column:5}},8:{start:{line:55,column:6},end:{line:55,column:39}},9:{start:{line:56,column:6},end:{line:59,column:9}},10:{start:{line:62,column:18},end:{line:99,column:3}},11:{start:{line:63,column:4},end:{line:63,column:22}},12:{start:{line:64,column:19},end:{line:64,column:24}},13:{start:{line:65,column:4},end:{line:90,column:7}},14:{start:{line:69,column:6},end:{line:69,column:29}},15:{start:{line:71,column:6},end:{line:73,column:7}},16:{start:{line:72,column:8},end:{line:72,column:15}},17:{start:{line:74,column:6},end:{line:77,column:9}},18:{start:{line:78,column:23},end:{line:78,column:54}},19:{start:{line:79,column:6},end:{line:79,column:48}},20:{start:{line:80,column:6},end:{line:80,column:39}},21:{start:{line:81,column:6},end:{line:81,column:26}},22:{start:{line:83,column:6},end:{line:87,column:9}},23:{start:{line:88,column:6},end:{line:88,column:25}},24:{start:{line:89,column:6},end:{line:89,column:61}},25:{start:{line:91,column:4},end:{line:98,column:7}},26:{start:{line:94,column:10},end:{line:94,column:26}},27:{start:{line:100,column:16},end:{line:103,column:3}},28:{start:{line:101,column:4},end:{line:101,column:23}},29:{start:{line:102,column:4},end:{line:102,column:44}},30:{start:{line:104,column:15},end:{line:131,column:3}},31:{start:{line:105,column:4},end:{line:105,column:22}},32:{start:{line:106,column:23},end:{line:114,column:5}},33:{start:{line:115,column:25},end:{line:115,column:68}},34:{start:{line:116,column:17},end:{line:116,column:43}},35:{start:{line:117,column:20},end:{line:117,column:37}},36:{start:{line:119,column:4},end:{line:126,column:5}},37:{start:{line:120,column:6},end:{line:120,column:37}},38:{start:{line:122,column:6},end:{line:124,column:9}},39:{start:{line:125,column:6},end:{line:125,column:13}},40:{start:{line:127,column:4},end:{line:127,column:51}},41:{start:{line:128,column:4},end:{line:128,column:49}},42:{start:{line:129,column:4},end:{line:129,column:24}},43:{start:{line:130,column:4},end:{line:130,column:16}},44:{start:{line:134,column:18},end:{line:156,column:3}},45:{start:{line:135,column:4},end:{line:135,column:23}},46:{start:{line:135,column:16},end:{line:135,column:23}},47:{start:{line:136,column:4},end:{line:136,column:35}},48:{start:{line:136,column:28},end:{line:136,column:35}},49:{start:{line:137,column:17},end:{line:137,column:25}},50:{start:{line:138,column:19},end:{line:138,column:35}},51:{start:{line:139,column:4},end:{line:139,column:22}},52:{start:{line:140,column:4},end:{line:140,column:37}},53:{start:{line:141,column:4},end:{line:154,column:6}},54:{start:{line:143,column:6},end:{line:150,column:7}},55:{start:{line:144,column:8},end:{line:144,column:48}},56:{start:{line:146,column:8},end:{line:148,column:11}},57:{start:{line:149,column:8},end:{line:149,column:15}},58:{start:{line:151,column:6},end:{line:151,column:53}},59:{start:{line:152,column:6},end:{line:152,column:39}},60:{start:{line:153,column:6},end:{line:153,column:26}},61:{start:{line:155,column:4},end:{line:155,column:50}},62:{start:{line:155,column:28},end:{line:155,column:49}},63:{start:{line:158,column:4},end:{line:160,column:7}},64:{start:{line:161,column:4},end:{line:161,column:22}},65:{start:{line:162,column:4},end:{line:162,column:30}},66:{start:{line:164,column:16},end:{line:168,column:3}},67:{start:{line:165,column:4},end:{line:167,column:7}},68:{start:{line:170,column:14},end:{line:170,column:26}},69:{start:{line:171,column:25},end:{line:182,column:6}},70:{start:{line:172,column:6},end:{line:181,column:8}},71:{start:{line:184,column:4},end:{line:189,column:5}},72:{start:{line:185,column:6},end:{line:188,column:11}},73:{start:{line:187,column:61},end:{line:187,column:78}},74:{start:{line:190,column:4},end:{line:272,column:9}},75:{start:{line:196,column:30},end:{line:196,column:49}},76:{start:{line:221,column:146},end:{line:221,column:180}},77:{start:{line:268,column:27},end:{line:268,column:56}},78:{start:{line:275,column:18},end:{line:275,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:38,column:3}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:19,column:58}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:21},end:{line:46,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:15},end:{line:51,column:3}},line:47},4:{name:"(anonymous_4)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:27},end:{line:61,column:3}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:62,column:18},end:{line:62,column:19}},loc:{start:{line:62,column:32},end:{line:99,column:3}},line:62},6:{name:"(anonymous_6)",decl:{start:{line:68,column:12},end:{line:68,column:13}},loc:{start:{line:68,column:31},end:{line:70,column:5}},line:68},7:{name:"(anonymous_7)",decl:{start:{line:70,column:12},end:{line:70,column:13}},loc:{start:{line:70,column:22},end:{line:82,column:5}},line:70},8:{name:"(anonymous_8)",decl:{start:{line:82,column:13},end:{line:82,column:14}},loc:{start:{line:82,column:22},end:{line:90,column:5}},line:82},9:{name:"(anonymous_9)",decl:{start:{line:93,column:15},end:{line:93,column:16}},loc:{start:{line:93,column:26},end:{line:95,column:9}},line:93},10:{name:"(anonymous_10)",decl:{start:{line:100,column:16},end:{line:100,column:17}},loc:{start:{line:100,column:23},end:{line:103,column:3}},line:100},11:{name:"(anonymous_11)",decl:{start:{line:104,column:15},end:{line:104,column:16}},loc:{start:{line:104,column:27},end:{line:131,column:3}},line:104},12:{name:"(anonymous_12)",decl:{start:{line:134,column:18},end:{line:134,column:19}},loc:{start:{line:134,column:29},end:{line:156,column:3}},line:134},13:{name:"(anonymous_13)",decl:{start:{line:141,column:20},end:{line:141,column:21}},loc:{start:{line:141,column:27},end:{line:154,column:5}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:155,column:21},end:{line:155,column:22}},loc:{start:{line:155,column:28},end:{line:155,column:49}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:157,column:2},end:{line:157,column:3}},loc:{start:{line:157,column:17},end:{line:163,column:3}},line:157},16:{name:"(anonymous_16)",decl:{start:{line:164,column:16},end:{line:164,column:17}},loc:{start:{line:164,column:25},end:{line:168,column:3}},line:164},17:{name:"(anonymous_17)",decl:{start:{line:169,column:2},end:{line:169,column:3}},loc:{start:{line:169,column:11},end:{line:273,column:3}},line:169},18:{name:"(anonymous_18)",decl:{start:{line:171,column:42},end:{line:171,column:43}},loc:{start:{line:171,column:54},end:{line:182,column:5}},line:171},19:{name:"(anonymous_19)",decl:{start:{line:187,column:55},end:{line:187,column:56}},loc:{start:{line:187,column:61},end:{line:187,column:78}},line:187},20:{name:"(anonymous_20)",decl:{start:{line:196,column:24},end:{line:196,column:25}},loc:{start:{line:196,column:30},end:{line:196,column:49}},line:196},21:{name:"(anonymous_21)",decl:{start:{line:221,column:139},end:{line:221,column:140}},loc:{start:{line:221,column:146},end:{line:221,column:180}},line:221},22:{name:"(anonymous_22)",decl:{start:{line:268,column:20},end:{line:268,column:21}},loc:{start:{line:268,column:27},end:{line:268,column:56}},line:268}},branchMap:{0:{loc:{start:{line:53,column:4},end:{line:53,column:31}},type:"if",locations:[{start:{line:53,column:4},end:{line:53,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},1:{loc:{start:{line:54,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:60,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},2:{loc:{start:{line:71,column:6},end:{line:73,column:7}},type:"if",locations:[{start:{line:71,column:6},end:{line:73,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71},3:{loc:{start:{line:135,column:4},end:{line:135,column:23}},type:"if",locations:[{start:{line:135,column:4},end:{line:135,column:23}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:135},4:{loc:{start:{line:136,column:4},end:{line:136,column:35}},type:"if",locations:[{start:{line:136,column:4},end:{line:136,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:136},5:{loc:{start:{line:184,column:4},end:{line:189,column:5}},type:"if",locations:[{start:{line:184,column:4},end:{line:189,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:184},6:{loc:{start:{line:203,column:53},end:{line:222,column:18}},type:"cond-expr",locations:[{start:{line:203,column:119},end:{line:215,column:15}},{start:{line:215,column:34},end:{line:222,column:18}}],line:203}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx"],names:["style"],mappings:"AA4BQ,SACE,KADF;AA5BR,OAAO,WAA+B;AACtC,SAAQ,oBAAmB;AAC3B,SAAQ,0BAAyB;AACjC,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,kBAAkB;AACzB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AAErB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AASzB,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,yBACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,cAAY,KAAK,MAAM;AAAA,QACvB,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,GAAG;AAAA,QAEjD;AAAA,+BAAC,SAAI,WAAU,gCACb;AAAA,gCAAC,SAAK,eAAK,MAAM,OAAM;AAAA,YACvB,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,sBAAmB;AAAA,aACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO;AAAA,gBACL,iBAAiB,OAAO,KAAK,MAAM,YAAY;AAAA,cACjD;AAAA;AAAA,UACD;AAAA;AAAA;AAAA,IACH,GACF;AAAA,EACF;AACF;AAgBA,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,aAAa;AACX,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,GAAU;AAE9B,QAAG,EAAG,GAAE,gBAAgB;AAExB,QAAG,KAAK,MAAM,eAAe;AAC3B,WAAK,MAAM,cAAc,MAAM;AAC/B,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,aAAqB;AACpC,SAAK,WAAW;AAEhB,QAAI,WAAoB;AAExB,UAAM,UAAU;AAAA,MACd,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,UAAG,UAAU;AACX;AAAA,MACF;AAEA,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAED,YAAM,WAAW,MAAM,oBAAoB,IAAI;AAC/C,cAAQ,IAAI,iBAAiB,SAAS,EAAE;AACxC,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB,CAAC,EACA,MAAM,CAAC,QAAQ;AACd,WAAK,SAAS;AAAA,QACZ,OAAO,oBAAoB,QAAQ;AAAA,QACnC,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AACD,cAAQ,MAAM,GAAG;AACjB,cAAQ,KAAK,gCAAgC,QAAQ;AAAA,IACvD,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,eAAe;AAAA,QACb,OAAO,WAAW;AAChB,qBAAW;AAAA,QACb;AAAA,MACF;AAAA,MACA,kBAAkB;AAAA,IACpB,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,MAAkC;AAC/C,MAAE,eAAe;AACjB,SAAK,cAAc,KAAK,MAAM,QAAQ;AAAA,EACxC;AAAA,EAEA,aAAa,YAAY;AACvB,SAAK,WAAW;AAEhB,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAE,oBAAoB,CAAC,OAAO,EAAE;AAAA,QAC1C;AAAA,MACF;AAAA,MACA,UAAU;AAAA,IACZ;AAEA,UAAM,CAAC,UAAU,IAAI,MAAM,OAAO,mBAAmB,UAAU;AAC/D,UAAM,OAAO,MAAM,WAAW,QAAQ;AACtC,UAAM,UAAU,MAAM,KAAK,KAAK;AAEhC,QAAI;AACJ,QAAI;AACF,iBAAW,KAAK,MAAM,OAAO;AAAA,IAC/B,SAAS,KAAK;AACZ,WAAK,SAAS;AAAA,QACZ,OAAQ,IAAc,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,eAAW,MAAM,oBAAoB,QAAQ;AAE7C,SAAK,MAAM,YAAY,UAAU,UAAU;AAC3C,SAAK,aAAa;AAClB,WAAO;AAAA,EACT;AAAA;AAAA;AAAA,EAIA,gBAAgB,CAAC,UAA2B;AAC1C,QAAI,CAAC,MAAO;AACZ,QAAI,MAAM,WAAW,EAAG;AACxB,UAAM,OAAO,MAAM,CAAC;AACpB,UAAM,SAAS,IAAI,WAAW;AAC9B,SAAK,WAAW;AAEhB,WAAO,WAAW,MAAM,OAAO;AAC/B,WAAO,SAAS,OAAK;AACnB,UAAI;AACJ,UAAI;AACF,mBAAW,KAAK,MAAM,EAAE,QAAQ,MAAgB;AAAA,MAClD,SACM,KAAK;AACT,aAAK,SAAS;AAAA,UACZ,OAAQ,IAAc,SAAS;AAAA,QACjC,CAAC;AACD;AAAA,MACF;AACA,iBAAW,MAAM,oBAAoB,QAAQ;AAC7C,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB;AACA,WAAO,UAAU,OAAK,QAAQ,IAAI,EAAE,MAAM;AAAA,EAC5C;AAAA,EAEA,eAAe;AACb,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AACD,SAAK,WAAW;AAChB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,cAAc,CAAC,QAAgB;AAC7B,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,eAAe,aAAa,IAAI,CAAAA,WAAS;AAC7C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,KAAKA,OAAM;AAAA,UACX,OAAOA,OAAM;AAAA,UACb,cAAcA,OAAM;AAAA,UACpB,UAAU,KAAK;AAAA;AAAA,QAJVA,OAAM;AAAA,MAKb;AAAA,IACF,CAAC;AAED,QAAI;AACJ,QAAG,KAAK,MAAM,OAAO;AACnB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ,oBAAC,OAAE,MAAK,KAAI,SAAS,MAAM,KAAK,WAAW,GAAG,WAAU,8BAA6B,eAAC;AAAA,SACxF;AAAA,IAEJ;AAEA,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,eAAY;AAAA,UACZ,QAAQ,KAAK,MAAM;AAAA,UACnB,cAAc,MAAM,KAAK,aAAa;AAAA,UACtC,OAAO,EAAE,YAAY;AAAA,UAEpB;AAAA;AAAA,YACD,qBAAC,aAAQ,WAAU,0BACjB;AAAA,kCAAC,QAAI,YAAE,kBAAkB,GAAE;AAAA,cAC3B,oBAAC,OAAG,YAAE,6CAA6C,GAAE;AAAA,cACrD,oBAAC,SACE,iBAAO,OAAO,uBAAuB,aACpC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,WAAU;AAAA,kBACV,SAAS,KAAK;AAAA,kBAAY;AAAA,wCAAC,gBAAY;AAAA,oBAAE;AAAA,oBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,cAC3D,IAEA,qBAAC,WACC;AAAA,qCAAC,OAAE,WAAU,0CAAyC,cAAY,EAAE,YAAY,GAAG;AAAA,sCAAC,gBAAa;AAAA,kBAAE;AAAA,kBAAE,EAAE,YAAY;AAAA,mBAAE;AAAA,gBACrH,oBAAC,WAAM,eAAY,yBAAwB,MAAK,QAAO,OAAO,EAAE,SAAS,OAAO,GAAG,UAAU,CAAC,MAAM,KAAK,cAAc,EAAE,OAAO,KAAK,GAAG;AAAA,iBAC1I,GAEJ;AAAA,eACF;AAAA,YAEA,oBAAC,aAAQ,WAAU,0BACjB,+BAAC,UAAK,UAAU,KAAK,aACnB;AAAA,kCAAC,QAAI,YAAE,eAAe,GAAE;AAAA,cACxB,oBAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,gBACkC,oBAAC,OAAE,MAAK,2BAA0B,QAAO,UAAS,KAAI,uBAAsB,0BAAY;AAAA,gBAAI;AAAA,iBAC3I,GACF;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,cAAY,EAAE,WAAW;AAAA,kBACzB,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,SAAS,EAAE,cAAc;AAAA,kBACzB,OAAO,KAAK,MAAM;AAAA,kBAClB,SAAS,KAAK;AAAA,kBACd,UAAU,KAAK;AAAA;AAAA,cACjB;AAAA,cACA,oBAAC,SACC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,UAAU,KAAK,MAAM,SAAS,SAAS;AAAA,kBACxC;AAAA;AAAA,cAAa,GAChB;AAAA,eACF,GACF;AAAA,YAEA,qBAAC,aAAQ,WAAU,yDACjB;AAAA,kCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,cACzB,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,cACA,oBAAC,SAAI,WAAU,oCACZ,wBACH;AAAA,eACF;AAAA;AAAA;AAAA,MACF;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,CAAC,CAAC,KAAK,MAAM;AAAA,UACrB,OAAO,EAAE,eAAe;AAAA,UACxB,UAAU,CAAC,MAAa,KAAK,sBAAsB,CAAC;AAAA,UACpD,SAAS,EAAE,2BAA2B,EAAE,YAAY,KAAK,MAAM,iBAAiB,CAAC;AAAA;AAAA,MACnF;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f3a6249e96d42fc8e59bc18fb123f3ec8de2b220"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Cn=function(){return s},s}Cn();class wPe extends On.Component{render(){return Cn().f[0]++,Cn().s[0]++,ie.jsx("div",{className:"maputnik-public-style",children:ie.jsxs(Js,{className:"maputnik-public-style-button","aria-label":this.props.title,onClick:()=>(Cn().f[1]++,Cn().s[1]++,this.props.onSelect(this.props.url)),children:[ie.jsxs("div",{className:"maputnik-public-style-header",children:[ie.jsx("div",{children:this.props.title}),ie.jsx("span",{className:"maputnik-space"}),ie.jsx(QX,{})]}),ie.jsx("div",{className:"maputnik-public-style-thumbnail",style:{backgroundImage:`url(${this.props.thumbnailUrl})`}})]})})}}class SPe extends On.Component{constructor(e){Cn().f[2]++,Cn().s[2]++,super(e),Cn().s[3]++,this.state={styleUrl:""}}clearError(){Cn().f[3]++,Cn().s[4]++,this.setState({error:null})}onCancelActiveRequest(e){Cn().f[4]++,Cn().s[5]++,e?(Cn().b[0][0]++,Cn().s[6]++,e.stopPropagation()):Cn().b[0][1]++,Cn().s[7]++,this.state.activeRequest?(Cn().b[1][0]++,Cn().s[8]++,this.state.activeRequest.abort(),Cn().s[9]++,this.setState({activeRequest:null,activeRequestUrl:null})):Cn().b[1][1]++}onStyleSelect=(Cn().s[10]++,e=>{Cn().f[5]++,Cn().s[11]++,this.clearError();let t=(Cn().s[12]++,!1);Cn().s[13]++,fetch(e,{mode:"cors",credentials:"same-origin"}).then(function(i){return Cn().f[6]++,Cn().s[14]++,i.json()}).then(i=>{if(Cn().f[7]++,Cn().s[15]++,t){Cn().b[2][0]++,Cn().s[16]++;return}else Cn().b[2][1]++;Cn().s[17]++,this.setState({activeRequest:null,activeRequestUrl:null});const r=(Cn().s[18]++,_d.ensureStyleValidity(i));Cn().s[19]++,console.log("Loaded style ",r.id),Cn().s[20]++,this.props.onStyleOpen(r),Cn().s[21]++,this.onOpenToggle()}).catch(i=>{Cn().f[8]++,Cn().s[22]++,this.setState({error:`Failed to load: '${e}'`,activeRequest:null,activeRequestUrl:null}),Cn().s[23]++,console.error(i),Cn().s[24]++,console.warn("Could not open the style URL",e)}),Cn().s[25]++,this.setState({activeRequest:{abort:function(){Cn().f[9]++,Cn().s[26]++,t=!0}},activeRequestUrl:e})});onSubmitUrl=(Cn().s[27]++,e=>{Cn().f[10]++,Cn().s[28]++,e.preventDefault(),Cn().s[29]++,this.onStyleSelect(this.state.styleUrl)});onOpenFile=(Cn().s[30]++,async()=>{Cn().f[11]++,Cn().s[31]++,this.clearError();const e=(Cn().s[32]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],multiple:!1}),[t]=(Cn().s[33]++,await window.showOpenFilePicker(e)),i=(Cn().s[34]++,await t.getFile()),r=(Cn().s[35]++,await i.text());let o;Cn().s[36]++;try{Cn().s[37]++,o=JSON.parse(r)}catch(s){Cn().s[38]++,this.setState({error:s.toString()}),Cn().s[39]++;return}return Cn().s[40]++,o=_d.ensureStyleValidity(o),Cn().s[41]++,this.props.onStyleOpen(o,t),Cn().s[42]++,this.onOpenToggle(),Cn().s[43]++,i});onFileChanged=(Cn().s[44]++,e=>{if(Cn().f[12]++,Cn().s[45]++,e)Cn().b[3][1]++;else{Cn().b[3][0]++,Cn().s[46]++;return}if(Cn().s[47]++,e.length===0){Cn().b[4][0]++,Cn().s[48]++;return}else Cn().b[4][1]++;const t=(Cn().s[49]++,e[0]),i=(Cn().s[50]++,new FileReader);Cn().s[51]++,this.clearError(),Cn().s[52]++,i.readAsText(t,"UTF-8"),Cn().s[53]++,i.onload=r=>{Cn().f[13]++;let o;Cn().s[54]++;try{Cn().s[55]++,o=JSON.parse(r.target?.result)}catch(s){Cn().s[56]++,this.setState({error:s.toString()}),Cn().s[57]++;return}Cn().s[58]++,o=_d.ensureStyleValidity(o),Cn().s[59]++,this.props.onStyleOpen(o),Cn().s[60]++,this.onOpenToggle()},Cn().s[61]++,i.onerror=r=>(Cn().f[14]++,Cn().s[62]++,console.log(r.target))});onOpenToggle(){Cn().f[15]++,Cn().s[63]++,this.setState({styleUrl:""}),Cn().s[64]++,this.clearError(),Cn().s[65]++,this.props.onOpenToggle()}onChangeUrl=(Cn().s[66]++,e=>{Cn().f[16]++,Cn().s[67]++,this.setState({styleUrl:e})});render(){Cn().f[17]++;const e=(Cn().s[68]++,this.props.t),t=(Cn().s[69]++,Aae.map(r=>(Cn().f[18]++,Cn().s[70]++,ie.jsx(wPe,{url:r.url,title:r.title,thumbnailUrl:r.thumbnail,onSelect:this.onStyleSelect},r.id))));let i;return Cn().s[71]++,this.state.error?(Cn().b[5][0]++,Cn().s[72]++,i=ie.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,ie.jsx("a",{href:"#",onClick:()=>(Cn().f[19]++,Cn().s[73]++,this.clearError()),className:"maputnik-modal-error-close",children:""})]})):Cn().b[5][1]++,Cn().s[74]++,ie.jsxs("div",{children:[ie.jsxs(C1,{"data-wd-key":"modal:open",isOpen:this.props.isOpen,onOpenToggle:()=>(Cn().f[20]++,Cn().s[75]++,this.onOpenToggle()),title:e("Open Style"),children:[i,ie.jsxs("section",{className:"maputnik-modal-section",children:[ie.jsx("h1",{children:e("Open local Style")}),ie.jsx("p",{children:e("Open a local JSON style from your computer.")}),ie.jsx("div",{children:typeof window.showOpenFilePicker=="function"?(Cn().b[6][0]++,ie.jsxs(Js,{"data-wd-key":"modal:open.file.button",className:"maputnik-big-button",onClick:this.onOpenFile,children:[ie.jsx(tz,{})," ",e("Open Style")]})):(Cn().b[6][1]++,ie.jsxs("label",{children:[ie.jsxs("a",{className:"maputnik-button maputnik-upload-button","aria-label":e("Open Style"),children:[ie.jsx(tz,{})," ",e("Open Style")]}),ie.jsx("input",{"data-wd-key":"modal:open.file.input",type:"file",style:{display:"none"},onChange:r=>(Cn().f[21]++,Cn().s[76]++,this.onFileChanged(r.target.files))})]}))})]}),ie.jsx("section",{className:"maputnik-modal-section",children:ie.jsxs("form",{onSubmit:this.onSubmitUrl,children:[ie.jsx("h1",{children:e("Load from URL")}),ie.jsx("p",{children:ie.jsxs(vb,{t:e,children:["Load from a URL. Note that the URL must have ",ie.jsx("a",{href:"https://enable-cors.org",target:"_blank",rel:"noopener noreferrer",children:"CORS enabled"}),"."]})}),ie.jsx(SL,{"aria-label":e("Style URL"),"data-wd-key":"modal:open.url.input",type:"text",className:"maputnik-input",default:e("Enter URL..."),value:this.state.styleUrl,onInput:this.onChangeUrl,onChange:this.onChangeUrl}),ie.jsx("div",{children:ie.jsx(Js,{"data-wd-key":"modal:open.url.button",type:"submit",className:"maputnik-big-button",disabled:this.state.styleUrl.length<1,children:"Load from URL"})})]})}),ie.jsxs("section",{className:"maputnik-modal-section maputnik-modal-section--shrink",children:[ie.jsx("h1",{children:e("Gallery Styles")}),ie.jsx("p",{children:e("Open one of the publicly available styles to start from.")}),ie.jsx("div",{className:"maputnik-style-gallery-container",children:t})]})]}),ie.jsx(MPe,{isOpen:!!this.state.activeRequest,title:e("Loading style"),onCancel:r=>(Cn().f[22]++,Cn().s[77]++,this.onCancelActiveRequest(r)),message:e("Loading: {{requestUrl}}",{requestUrl:this.state.activeRequestUrl})})]})}}const EPe=(Cn().s[78]++,$o()(SPe));function ep(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx",e="56c3984d0ef3534e088a574117d91f5af2db0afb",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:17},end:{line:41,column:5}},2:{start:{line:42,column:25},end:{line:115,column:5}},3:{start:{line:116,column:4},end:{line:145,column:6}},4:{start:{line:130,column:12},end:{line:133,column:22}},5:{start:{line:137,column:12},end:{line:141,column:22}},6:{start:{line:148,column:23},end:{line:148,column:64}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:146,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:129,column:57},end:{line:129,column:58}},loc:{start:{line:129,column:72},end:{line:134,column:11}},line:129},2:{name:"(anonymous_2)",decl:{start:{line:136,column:65},end:{line:136,column:66}},loc:{start:{line:136,column:80},end:{line:142,column:11}},line:136}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx"],names:[],mappings:"AAiBa,SAwCA,UAxCA,KAwCA,YAxCA;AAjBb,OAAO,WAAW;AAClB,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,WAAW;AASlB,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,OAAO;AAAA,MACX;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,YAAY;AAAA,MACtB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,cAAc;AAAA,MACxB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,oBAAoB;AAAA,MAC9B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,sBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,WAAW;AAAA,MACrB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,aAAa;AAAA,MACvB;AAAA,IACF;AAGA,UAAM,eAAe;AAAA,MACnB;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,gBAAE;AAAA,QACZ,MAAM,EAAE,uBAAwB;AAAA,MAClC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,mBAAK;AAAA,QACf,MAAM,EAAE,0BAA2B;AAAA,MACrC;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,mBAAK;AAAA,WAAM;AAAA,QAC1C,MAAM,EAAE,sCAAuC;AAAA,MACjD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,sCAAsC;AAAA,MAChD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,gBAAE;AAAA,WAAM;AAAA,QACvC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,IACF;AAGA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QAEpB,+BAAC,aAAQ,WAAU,mDACjB;AAAA,8BAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAK,iBAAG;AAAA,YAAO;AAAA,aACxB,GACF;AAAA,UACA,oBAAC,QACE,eAAK,IAAI,CAAC,MAAM,QAAQ;AACvB,mBAAO,qBAAC,SAAc,WAAU,sCAC9B;AAAA,kCAAC,QAAmB,eAAK,OAAhB,OAAK,GAAe;AAAA,cAC7B,oBAAC,QAAmB,eAAK,QAAhB,OAAK,GAAgB;AAAA,iBAFf,GAGjB;AAAA,UACF,CAAC,GACH;AAAA,UACA,oBAAC,OAAG,YAAE,8DAA8D,GAAE;AAAA,UACtE,oBAAC,QACE,uBAAa,IAAI,CAAC,MAAM,QAAQ;AAC/B,mBAAO,qBAAC,QACN;AAAA,kCAAC,UAAM,eAAK,KAAI;AAAA,cAAO;AAAA,cAAE,KAAK;AAAA,iBADhB,GAEhB;AAAA,UACF,CAAC,GACH;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,iBAAiB,gBAAgB,EAAE,sBAAsB;AAC/D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"56c3984d0ef3534e088a574117d91f5af2db0afb"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ep=function(){return s},s}ep();class OPe extends On.Component{render(){ep().f[0]++;const e=(ep().s[0]++,this.props.t),t=(ep().s[1]++,[{key:ie.jsx("kbd",{children:"?"}),text:e("Shortcuts menu")},{key:ie.jsx("kbd",{children:"o"}),text:e("Open modal")},{key:ie.jsx("kbd",{children:"e"}),text:e("Export modal")},{key:ie.jsx("kbd",{children:"d"}),text:e("Data Sources modal")},{key:ie.jsx("kbd",{children:"s"}),text:e("Style Settings modal")},{key:ie.jsx("kbd",{children:"i"}),text:e("Toggle inspect")},{key:ie.jsx("kbd",{children:"m"}),text:e("Focus map")},{key:ie.jsx("kbd",{children:"!"}),text:e("Debug modal")}]),i=(ep().s[2]++,[{key:ie.jsx("kbd",{children:"+"}),text:e("Increase the zoom level by 1.")},{key:ie.jsxs(ie.Fragment,{children:[ie.jsx("kbd",{children:"Shift"})," + ",ie.jsx("kbd",{children:"+"})]}),text:e("Increase the zoom level by 2.")},{key:ie.jsx("kbd",{children:"-"}),text:e("Decrease the zoom level by 1.")},{key:ie.jsxs(ie.Fragment,{children:[ie.jsx("kbd",{children:"Shift"})," + ",ie.jsx("kbd",{children:"-"})]}),text:e("Decrease the zoom level by 2.")},{key:ie.jsx("kbd",{children:"Up"}),text:e("Pan up by 100 pixels.")},{key:ie.jsx("kbd",{children:"Down"}),text:e("Pan down by 100 pixels.")},{key:ie.jsx("kbd",{children:"Left"}),text:e("Pan left by 100 pixels.")},{key:ie.jsx("kbd",{children:"Right"}),text:e("Pan right by 100 pixels.")},{key:ie.jsxs(ie.Fragment,{children:[ie.jsx("kbd",{children:"Shift"})," + ",ie.jsx("kbd",{children:"Right"})]}),text:e("Increase the rotation by 15 degrees.")},{key:ie.jsxs(ie.Fragment,{children:[ie.jsx("kbd",{children:"Shift"})," + ",ie.jsx("kbd",{children:"Left"})]}),text:e("Decrease the rotation by 15 degrees.")},{key:ie.jsxs(ie.Fragment,{children:[ie.jsx("kbd",{children:"Shift"})," + ",ie.jsx("kbd",{children:"Up"})]}),text:e("Increase the pitch by 10 degrees.")},{key:ie.jsxs(ie.Fragment,{children:[ie.jsx("kbd",{children:"Shift"})," + ",ie.jsx("kbd",{children:"Down"})]}),text:e("Decrease the pitch by 10 degrees.")}]);return ep().s[3]++,ie.jsx(C1,{"data-wd-key":"modal:shortcuts",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Shortcuts"),children:ie.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[ie.jsx("p",{children:ie.jsxs(vb,{t:e,children:["Press ",ie.jsx("code",{children:"ESC"})," to lose focus of any active elements, then press one of:"]})}),ie.jsx("dl",{children:t.map((r,o)=>(ep().f[1]++,ep().s[4]++,ie.jsxs("div",{className:"maputnik-modal-shortcuts__shortcut",children:[ie.jsx("dt",{children:r.key},"dt"+o),ie.jsx("dd",{children:r.text},"dd"+o)]},o)))}),ie.jsx("p",{children:e("If the Map is in focused you can use the following shortcuts")}),ie.jsx("ul",{children:i.map((r,o)=>(ep().f[2]++,ep().s[5]++,ie.jsxs("li",{children:[ie.jsx("span",{children:r.key})," ",r.text]},o)))})]})})}}const BPe=(ep().s[6]++,$o()(OPe));function yu(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx",e="c09f0bfde95742e69af0d091b2de9baefbfef43a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx",statementMap:{0:{start:{line:7,column:27},end:{line:7,column:37}},1:{start:{line:8,column:20},end:{line:8,column:48}},2:{start:{line:9,column:19},end:{line:9,column:49}},3:{start:{line:10,column:19},end:{line:10,column:49}},4:{start:{line:11,column:4},end:{line:53,column:6}},5:{start:{line:22,column:14},end:{line:26,column:27}},6:{start:{line:23,column:96},end:{line:23,column:153}},7:{start:{line:29,column:14},end:{line:33,column:27}},8:{start:{line:30,column:96},end:{line:30,column:153}},9:{start:{line:56,column:19},end:{line:56,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:54,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:21,column:140},end:{line:21,column:141}},loc:{start:{line:21,column:156},end:{line:27,column:13}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:89},end:{line:23,column:90}},loc:{start:{line:23,column:96},end:{line:23,column:153}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:28,column:136},end:{line:28,column:137}},loc:{start:{line:28,column:152},end:{line:34,column:13}},line:28},4:{name:"(anonymous_4)",decl:{start:{line:30,column:89},end:{line:30,column:90}},loc:{start:{line:30,column:96},end:{line:30,column:153}},line:30}},branchMap:{0:{loc:{start:{line:21,column:12},end:{line:27,column:17}},type:"binary-expr",locations:[{start:{line:21,column:12},end:{line:21,column:44}},{start:{line:21,column:64},end:{line:27,column:17}}],line:21},1:{loc:{start:{line:28,column:12},end:{line:34,column:17}},type:"binary-expr",locations:[{start:{line:28,column:12},end:{line:28,column:40}},{start:{line:28,column:60},end:{line:34,column:17}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx"],names:[],mappings:"AAuCQ,cAKQ,YALR;AAvCR,OAAO,WAAW;AAClB,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,WAAW;AAqBlB,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAS;AACP,UAAM,EAAC,GAAG,QAAO,IAAI,KAAK;AAE1B,UAAM,UAAU,KAAK,MAAM,QAAQ,IAAI,IAAE;AACzC,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAC9C,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAE9C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,OAAO;AAAA,QAEhB;AAAA,+BAAC,aAAQ,WAAU,mDACjB;AAAA,gCAAC,QAAI,YAAE,SAAS,GAAE;AAAA,YACjB,KAAK,MAAM,aAAa,YACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,YAED,KAAK,MAAM,aAAa,QACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,aAEJ;AAAA,UACA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,OAAO,GAAE;AAAA,YAChB,oBAAC,OACC,+BAAC,SAAM,GACL;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,QAAO;AAAA,kBACP,KAAI;AAAA,kBACJ,MAAM,sCAAsC,OAAO,IAAI,MAAM,IAAI,MAAM;AAAA,kBACxE;AAAA;AAAA,cAED;AAAA,cAAI;AAAA,eACN,GACF;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c09f0bfde95742e69af0d091b2de9baefbfef43a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return yu=function(){return s},s}yu();class IPe extends On.Component{render(){yu().f[0]++;const{t:e,mapView:t}=(yu().s[0]++,this.props),i=(yu().s[1]++,Math.round(t.zoom)+1),r=(yu().s[2]++,+t.center.lng.toFixed(5)),o=(yu().s[3]++,+t.center.lat.toFixed(5));return yu().s[4]++,ie.jsxs(C1,{"data-wd-key":"modal:debug",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Debug"),children:[ie.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[ie.jsx("h1",{children:e("Options")}),(yu().b[0][0]++,this.props.renderer==="mlgljs"&&(yu().b[0][1]++,ie.jsx("ul",{children:Object.entries(this.props.maplibreGlDebugOptions).map(([s,a])=>(yu().f[1]++,yu().s[5]++,ie.jsx("li",{children:ie.jsxs("label",{children:[ie.jsx("input",{type:"checkbox",checked:a,onChange:c=>(yu().f[2]++,yu().s[6]++,this.props.onChangeMaplibreGlDebug(s,c.target.checked))})," ",s]})},s)))}))),(yu().b[1][0]++,this.props.renderer==="ol"&&(yu().b[1][1]++,ie.jsx("ul",{children:Object.entries(this.props.openlayersDebugOptions).map(([s,a])=>(yu().f[3]++,yu().s[7]++,ie.jsx("li",{children:ie.jsxs("label",{children:[ie.jsx("input",{type:"checkbox",checked:a,onChange:c=>(yu().f[4]++,yu().s[8]++,this.props.onChangeOpenlayersDebug(s,c.target.checked))})," ",s]})},s)))})))]}),ie.jsxs("section",{className:"maputnik-modal-section",children:[ie.jsx("h1",{children:e("Links")}),ie.jsx("p",{children:ie.jsxs(vb,{t:e,children:[ie.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:`https://www.openstreetmap.org/#map=${i}/${o}/${r}`,children:"Open in OSM"}),". Opens the current view on openstreetmap.org"]})})]})]})}}const kPe=(yu().s[9]++,$o()(IPe));function vi(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx",e="681e0b3080d4effb89e735abebd0878f77572d27",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx",statementMap:{0:{start:{line:10,column:33},end:{line:116,column:1}},1:{start:{line:11,column:34},end:{line:18,column:3}},2:{start:{line:12,column:18},end:{line:12,column:32}},3:{start:{line:13,column:24},end:{line:13,column:41}},4:{start:{line:14,column:4},end:{line:17,column:8}},5:{start:{line:14,column:62},end:{line:17,column:5}},6:{start:{line:19,column:34},end:{line:31,column:3}},7:{start:{line:20,column:18},end:{line:20,column:39}},8:{start:{line:21,column:24},end:{line:21,column:26}},9:{start:{line:22,column:4},end:{line:28,column:5}},10:{start:{line:23,column:6},end:{line:27,column:7}},11:{start:{line:24,column:8},end:{line:26,column:10}},12:{start:{line:29,column:4},end:{line:29,column:77}},13:{start:{line:30,column:4},end:{line:30,column:32}},14:{start:{line:32,column:24},end:{line:40,column:3}},15:{start:{line:33,column:23},end:{line:33,column:48}},16:{start:{line:34,column:16},end:{line:34,column:17}},17:{start:{line:35,column:4},end:{line:37,column:5}},18:{start:{line:35,column:34},end:{line:35,column:57}},19:{start:{line:36,column:6},end:{line:36,column:14}},20:{start:{line:38,column:4},end:{line:38,column:60}},21:{start:{line:39,column:4},end:{line:39,column:40}},22:{start:{line:41,column:27},end:{line:45,column:3}},23:{start:{line:42,column:23},end:{line:42,column:48}},24:{start:{line:43,column:4},end:{line:43,column:32}},25:{start:{line:44,column:4},end:{line:44,column:40}},26:{start:{line:46,column:30},end:{line:50,column:3}},27:{start:{line:47,column:23},end:{line:47,column:48}},28:{start:{line:48,column:4},end:{line:48,column:41}},29:{start:{line:49,column:4},end:{line:49,column:40}},30:{start:{line:51,column:32},end:{line:55,column:3}},31:{start:{line:52,column:23},end:{line:52,column:48}},32:{start:{line:53,column:4},end:{line:53,column:45}},33:{start:{line:54,column:4},end:{line:54,column:40}},34:{start:{line:56,column:20},end:{line:56,column:45}},35:{start:{line:57,column:25},end:{line:85,column:14}},36:{start:{line:57,column:76},end:{line:85,column:13}},37:{start:{line:63,column:29},end:{line:63,column:68}},38:{start:{line:72,column:29},end:{line:72,column:70}},39:{start:{line:79,column:23},end:{line:79,column:46}},40:{start:{line:86,column:2},end:{line:115,column:4}},41:{start:{line:117,column:25},end:{line:117,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:33},end:{line:10,column:34}},loc:{start:{line:10,column:44},end:{line:116,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:11,column:34},end:{line:11,column:35}},loc:{start:{line:11,column:40},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:14,column:43},end:{line:14,column:44}},loc:{start:{line:14,column:62},end:{line:17,column:5}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:19,column:34},end:{line:19,column:35}},loc:{start:{line:19,column:50},end:{line:31,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:32,column:24},end:{line:32,column:25}},loc:{start:{line:32,column:30},end:{line:40,column:3}},line:32},5:{name:"(anonymous_5)",decl:{start:{line:35,column:27},end:{line:35,column:28}},loc:{start:{line:35,column:34},end:{line:35,column:57}},line:35},6:{name:"(anonymous_6)",decl:{start:{line:41,column:27},end:{line:41,column:28}},loc:{start:{line:41,column:38},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:30},end:{line:46,column:31}},loc:{start:{line:46,column:49},end:{line:50,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:51,column:32},end:{line:51,column:33}},loc:{start:{line:51,column:53},end:{line:55,column:3}},line:51},9:{name:"(anonymous_9)",decl:{start:{line:57,column:39},end:{line:57,column:40}},loc:{start:{line:57,column:76},end:{line:85,column:13}},line:57},10:{name:"(anonymous_10)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:29},end:{line:63,column:68}},line:63},11:{name:"(anonymous_11)",decl:{start:{line:72,column:18},end:{line:72,column:19}},loc:{start:{line:72,column:29},end:{line:72,column:70}},line:72},12:{name:"(anonymous_12)",decl:{start:{line:79,column:17},end:{line:79,column:18}},loc:{start:{line:79,column:23},end:{line:79,column:46}},line:79}},branchMap:{0:{loc:{start:{line:13,column:24},end:{line:13,column:41}},type:"binary-expr",locations:[{start:{line:13,column:24},end:{line:13,column:35}},{start:{line:13,column:39},end:{line:13,column:41}}],line:13},1:{loc:{start:{line:23,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:23,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},2:{loc:{start:{line:29,column:18},end:{line:29,column:76}},type:"cond-expr",locations:[{start:{line:29,column:56},end:{line:29,column:67}},{start:{line:29,column:70},end:{line:29,column:76}}],line:29},3:{loc:{start:{line:48,column:28},end:{line:48,column:40}},type:"binary-expr",locations:[{start:{line:48,column:28},end:{line:48,column:34}},{start:{line:48,column:38},end:{line:48,column:40}}],line:48},4:{loc:{start:{line:53,column:30},end:{line:53,column:44}},type:"binary-expr",locations:[{start:{line:53,column:30},end:{line:53,column:38}},{start:{line:53,column:42},end:{line:53,column:44}}],line:53},5:{loc:{start:{line:63,column:56},end:{line:63,column:67}},type:"binary-expr",locations:[{start:{line:63,column:56},end:{line:63,column:61}},{start:{line:63,column:65},end:{line:63,column:67}}],line:63},6:{loc:{start:{line:72,column:58},end:{line:72,column:69}},type:"binary-expr",locations:[{start:{line:72,column:58},end:{line:72,column:63}},{start:{line:72,column:67},end:{line:72,column:69}}],line:72},7:{loc:{start:{line:94,column:8},end:{line:97,column:12}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:30}},{start:{line:94,column:50},end:{line:97,column:12}}],line:94},8:{loc:{start:{line:98,column:8},end:{line:101,column:12}},type:"binary-expr",locations:[{start:{line:98,column:8},end:{line:98,column:28}},{start:{line:98,column:48},end:{line:101,column:12}}],line:98}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx"],names:["variables"],mappings:"AAsFI,SAEI,KAFJ,YAAA;AArFJ,SAAS,uBAA6C;AACtD,SAAS,gBAAgB;AACzB,OAAO,YAAY;AAEnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAAS,sBAAsB;AAG/B,OAAO,SAAS;AAchB,MAAM,2BAAoE,CAAC,UAAU;AACnF,QAAM,0BAA0B,MAA6B;AAC3D,UAAM,QAAQ,MAAM;AACpB,UAAM,cAAc,MAAM,SAAS,CAAC;AAEpC,WAAO,OAAO,QAAQ,WAAW,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,OAAO;AAAA,MACxD;AAAA,MACA,OAAO,MAAM;AAAA,IACf,EAAE;AAAA,EACJ;AAEA,QAAM,0BAA0B,CAACA,eAAqC;AACpE,UAAM,QAAQ,EAAE,GAAG,MAAM,SAAS;AAGlC,UAAM,cAAmD,CAAC;AAC1D,eAAW,YAAYA,YAAW;AAChC,UAAI,SAAS,IAAI,KAAK,MAAM,IAAI;AAC9B,oBAAY,SAAS,GAAG,IAAI;AAAA,UAC1B,SAAS,SAAS;AAAA,QACpB;AAAA,MACF;AAAA,IACF;AAEA,UAAM,QAAQ,OAAO,KAAK,WAAW,EAAE,SAAS,IAAI,cAAc;AAElE,UAAM,eAAe,KAAK;AAAA,EAC5B;AAEA,QAAM,gBAAgB,MAAM;AAC1B,UAAMA,aAAY,wBAAwB;AAC1C,QAAI,QAAQ;AACZ,WAAOA,WAAU,KAAK,CAAA,MAAK,EAAE,QAAQ,MAAM,KAAK,EAAE,GAAG;AACnD;AAAA,IACF;AACAA,eAAU,KAAK,EAAE,KAAK,MAAM,KAAK,IAAI,OAAO,QAAQ,CAAC;AACrD,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,mBAAmB,CAAC,UAAkB;AAC1C,UAAMA,aAAY,wBAAwB;AAC1CA,eAAU,OAAO,OAAO,CAAC;AACzB,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,sBAAsB,CAAC,OAAe,WAAmB;AAC7D,UAAMA,aAAY,wBAAwB;AAC1CA,eAAU,KAAK,EAAE,MAAM,UAAU;AACjC,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,wBAAwB,CAAC,OAAe,aAAqB;AACjE,UAAMA,aAAY,wBAAwB;AAE1CA,eAAU,KAAK,EAAE,QAAQ,YAAY;AACrC,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,YAAY,wBAAwB;AAE1C,QAAM,iBAAiB,UAAU,IAAI,CAAC,UAAU,+BAC7C,MAAA,EACC,UAAA;AAAA,IAAA,oBAAC,MAAA,EACC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,OAAO,MAAM,EAAE,KAAK;AAAA,QACpB,OAAO,SAAS;AAAA,QAChB,UAAU,CAAC,UAAU,oBAAoB,OAAO,SAAS,EAAE;AAAA,QAC3D,eAAa,+BAA+B;AAAA,MAAA;AAAA,IAC9C,EAAA,CACF;AAAA,wBACC,MAAA,EACC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,OAAO,MAAM,EAAE,OAAO;AAAA,QACtB,OAAO,SAAS;AAAA,QAChB,UAAU,CAAC,UAAU,sBAAsB,OAAO,SAAS,EAAE;AAAA,QAC7D,eAAa,iCAAiC;AAAA,MAAA;AAAA,IAChD,EAAA,CACF;AAAA,wBACC,MAAA,EAAG,OAAO,EAAE,eAAe,SAAQ,GAClC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,SAAS,MAAM,iBAAiB,KAAK;AAAA,QACrC,OAAO,MAAM,EAAE,iBAAiB;AAAA,QAChC,eAAY;AAAA,QAEZ,8BAAC,UAAA,CAAA,CAAS;AAAA,MAAA;AAAA,IACZ,EAAA,CACF;AAAA,EAAA,EAAA,GAzBO,KA0BT,CACD;AAED,SACE;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,eAAY;AAAA,MACZ,QAAQ,MAAM;AAAA,MACd,cAAc,MAAM;AAAA,MACpB,OAAO,MAAM,EAAE,wBAAwB;AAAA,MAGtC,UAAA;AAAA,QAAA,UAAU,WAAW,KAChB,qBAAC,OAAA,EACC,UAAA;AAAA,UAAA,oBAAC,KAAA,EAAG,UAAA,MAAM,EAAE,2FAA2F,EAAA,CAAE;AAAA,UACzG,oBAAC,OAAA,EAAc,WAAU,uBACvB,UAAA,oBAAC,KAAA,EAAI,WAAW,OAAO,MAAM,MAAA,CAAO,EAAA,GAD7B,KAET;AAAA,QAAA,EAAA,CACF;AAAA,QAEL,UAAU,SAAS,KACpB,qBAAC,SAAA,EACC,UAAA;AAAA,UAAA,oBAAC,SAAA,CAAA,CACD;AAAA,UACA,oBAAC,WACE,UAAA,eAAA,CACH;AAAA,QAAA,EAAA,CACF;AAAA,4BAEC,OAAA,EACC,UAAA;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,SAAS;AAAA,YACT,eAAY;AAAA,YAEZ,UAAA;AAAA,cAAA,oBAAC,gBAAA,CAAA,CAAe;AAAA,cACf,MAAM,EAAE,cAAc;AAAA,YAAA;AAAA,UAAA;AAAA,QACzB,EAAA,CACF;AAAA,MAAA;AAAA,IAAA;AAAA,EACF;AAEJ;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"681e0b3080d4effb89e735abebd0878f77572d27"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return vi=function(){return s},s}vi();vi().s[0]++;const TPe=n=>{vi().f[0]++,vi().s[1]++;const e=()=>{vi().f[1]++;const h=(vi().s[2]++,n.mapStyle),m=(vi().s[3]++,vi().b[0][0]++,h.state||(vi().b[0][1]++,{}));return vi().s[4]++,Object.entries(m).map(([y,M])=>(vi().f[2]++,vi().s[5]++,{key:y,value:M.default}))};vi().s[6]++;const t=h=>{vi().f[3]++;const m=(vi().s[7]++,{...n.mapStyle}),y=(vi().s[8]++,{});vi().s[9]++;for(const M of h)vi().s[10]++,M.key.trim()!==""?(vi().b[1][0]++,vi().s[11]++,y[M.key]={default:M.value}):vi().b[1][1]++;vi().s[12]++,m.state=Object.keys(y).length>0?(vi().b[2][0]++,y):(vi().b[2][1]++,void 0),vi().s[13]++,n.onStyleChanged(m)};vi().s[14]++;const i=()=>{vi().f[4]++;const h=(vi().s[15]++,e());let m=(vi().s[16]++,1);for(vi().s[17]++;h.find(y=>(vi().f[5]++,vi().s[18]++,y.key===`key${m}`));)vi().s[19]++,m++;vi().s[20]++,h.push({key:`key${m}`,value:"value"}),vi().s[21]++,t(h)};vi().s[22]++;const r=h=>{vi().f[6]++;const m=(vi().s[23]++,e());vi().s[24]++,m.splice(h,1),vi().s[25]++,t(m)};vi().s[26]++;const o=(h,m)=>{vi().f[7]++;const y=(vi().s[27]++,e());vi().s[28]++,y[h].key=(vi().b[3][0]++,m||(vi().b[3][1]++,"")),vi().s[29]++,t(y)};vi().s[30]++;const s=(h,m)=>{vi().f[8]++;const y=(vi().s[31]++,e());vi().s[32]++,y[h].value=(vi().b[4][0]++,m||(vi().b[4][1]++,"")),vi().s[33]++,t(y)},a=(vi().s[34]++,e()),c=(vi().s[35]++,a.map((h,m)=>(vi().f[9]++,vi().s[36]++,ie.jsxs("tr",{children:[ie.jsx("td",{children:ie.jsx(Ad,{label:n.t("Key"),value:h.key,onChange:y=>(vi().f[10]++,vi().s[37]++,o(m,(vi().b[5][0]++,y||(vi().b[5][1]++,"")))),"data-wd-key":"global-state-variable-key:"+m})}),ie.jsx("td",{children:ie.jsx(Ad,{label:n.t("Value"),value:h.value,onChange:y=>(vi().f[11]++,vi().s[38]++,s(m,(vi().b[6][0]++,y||(vi().b[6][1]++,"")))),"data-wd-key":"global-state-variable-value:"+m})}),ie.jsx("td",{style:{verticalAlign:"middle"},children:ie.jsx(Js,{onClick:()=>(vi().f[12]++,vi().s[39]++,r(m)),title:n.t("Remove variable"),"data-wd-key":"global-state-remove-variable",children:ie.jsx($b,{})})})]},m))));return vi().s[40]++,ie.jsxs(C1,{"data-wd-key":"modal:global-state",isOpen:n.isOpen,onOpenToggle:n.onOpenToggle,title:n.t("Global State Variables"),children:[(vi().b[7][0]++,a.length===0&&(vi().b[7][1]++,ie.jsxs("div",{children:[ie.jsx("p",{children:n.t("No global state variables defined. Add variables to create reusable values in your style.")}),ie.jsx("div",{className:"maputnik-doc-inline",children:ie.jsx(E6,{fieldSpec:Jr.$root.state})},"doc")]}))),(vi().b[8][0]++,a.length>0&&(vi().b[8][1]++,ie.jsxs("table",{children:[ie.jsx("thead",{}),ie.jsx("tbody",{children:c})]}))),ie.jsx("div",{children:ie.jsxs(Js,{onClick:i,"data-wd-key":"global-state-add-variable",children:[ie.jsx(U6,{}),n.t("Add Variable")]})})]})},RPe=(vi().s[41]++,$o()(TPe));var tb={},t3={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var DPe=t3.exports,HV;function PPe(){return HV||(HV=1,(function(n,e){(function(t){var i=e&&!e.nodeType&&e,r=n&&!n.nodeType&&n,o=typeof window=="object"&&window;(o.global===o||o.window===o||o.self===o)&&(t=o);var s,a=2147483647,c=36,h=1,m=26,y=38,M=700,x=72,k=128,P="-",F=/^xn--/,j=/[^\x20-\x7E]/,q=/[\x2E\u3002\uFF0E\uFF61]/g,V={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},H=c-h,G=Math.floor,Y=String.fromCharCode,z;function se(ke){throw new RangeError(V[ke])}function le(ke,we){for(var ze=ke.length,xe=[];ze--;)xe[ze]=we(ke[ze]);return xe}function me(ke,we){var ze=ke.split("@"),xe="";ze.length>1&&(xe=ze[0]+"@",ke=ze[1]),ke=ke.replace(q,".");var At=ke.split("."),it=le(At,we).join(".");return xe+it}function de(ke){for(var we=[],ze=0,xe=ke.length,At,it;ze<xe;)At=ke.charCodeAt(ze++),At>=55296&&At<=56319&&ze<xe?(it=ke.charCodeAt(ze++),(it&64512)==56320?we.push(((At&1023)<<10)+(it&1023)+65536):(we.push(At),ze--)):we.push(At);return we}function be(ke){return le(ke,function(we){var ze="";return we>65535&&(we-=65536,ze+=Y(we>>>10&1023|55296),we=56320|we&1023),ze+=Y(we),ze}).join("")}function Ee(ke){return ke-48<10?ke-22:ke-65<26?ke-65:ke-97<26?ke-97:c}function De(ke,we){return ke+22+75*(ke<26)-((we!=0)<<5)}function je(ke,we,ze){var xe=0;for(ke=ze?G(ke/M):ke>>1,ke+=G(ke/we);ke>H*m>>1;xe+=c)ke=G(ke/H);return G(xe+(H+1)*ke/(ke+y))}function Ie(ke){var we=[],ze=ke.length,xe,At=0,it=k,bt=x,Bt,Ke,Te,Se,Ne,ut,rt,pt,Dt;for(Bt=ke.lastIndexOf(P),Bt<0&&(Bt=0),Ke=0;Ke<Bt;++Ke)ke.charCodeAt(Ke)>=128&&se("not-basic"),we.push(ke.charCodeAt(Ke));for(Te=Bt>0?Bt+1:0;Te<ze;){for(Se=At,Ne=1,ut=c;Te>=ze&&se("invalid-input"),rt=Ee(ke.charCodeAt(Te++)),(rt>=c||rt>G((a-At)/Ne))&&se("overflow"),At+=rt*Ne,pt=ut<=bt?h:ut>=bt+m?m:ut-bt,!(rt<pt);ut+=c)Dt=c-pt,Ne>G(a/Dt)&&se("overflow"),Ne*=Dt;xe=we.length+1,bt=je(At-Se,xe,Se==0),G(At/xe)>a-it&&se("overflow"),it+=G(At/xe),At%=xe,we.splice(At++,0,it)}return be(we)}function Qe(ke){var we,ze,xe,At,it,bt,Bt,Ke,Te,Se,Ne,ut=[],rt,pt,Dt,Ot;for(ke=de(ke),rt=ke.length,we=k,ze=0,it=x,bt=0;bt<rt;++bt)Ne=ke[bt],Ne<128&&ut.push(Y(Ne));for(xe=At=ut.length,At&&ut.push(P);xe<rt;){for(Bt=a,bt=0;bt<rt;++bt)Ne=ke[bt],Ne>=we&&Ne<Bt&&(Bt=Ne);for(pt=xe+1,Bt-we>G((a-ze)/pt)&&se("overflow"),ze+=(Bt-we)*pt,we=Bt,bt=0;bt<rt;++bt)if(Ne=ke[bt],Ne<we&&++ze>a&&se("overflow"),Ne==we){for(Ke=ze,Te=c;Se=Te<=it?h:Te>=it+m?m:Te-it,!(Ke<Se);Te+=c)Ot=Ke-Se,Dt=c-Se,ut.push(Y(De(Se+Ot%Dt,0))),Ke=G(Ot/Dt);ut.push(Y(De(Ke,0))),it=je(ze,pt,xe==At),ze=0,++xe}++ze,++we}return ut.join("")}function et(ke){return me(ke,function(we){return F.test(we)?Ie(we.slice(4).toLowerCase()):we})}function dt(ke){return me(ke,function(we){return j.test(we)?"xn--"+Qe(we):we})}if(s={version:"1.4.1",ucs2:{decode:de,encode:be},decode:Ie,encode:Qe,toASCII:dt,toUnicode:et},i&&r)if(n.exports==i)r.exports=s;else for(z in s)s.hasOwnProperty(z)&&(i[z]=s[z]);else t.punycode=s})(DPe)})(t3,t3.exports)),t3.exports}var oT,ZV;function Hx(){return ZV||(ZV=1,oT=TypeError),oT}const UPe={},KPe=Object.freeze(Object.defineProperty({__proto__:null,default:UPe},Symbol.toStringTag,{value:"Module"})),LPe=FD(KPe);var sT,XV;function $6(){if(XV)return sT;XV=1;var n=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=n&&e&&typeof e.get=="function"?e.get:null,i=n&&Map.prototype.forEach,r=typeof Set=="function"&&Set.prototype,o=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,s=r&&o&&typeof o.get=="function"?o.get:null,a=r&&Set.prototype.forEach,c=typeof WeakMap=="function"&&WeakMap.prototype,h=c?WeakMap.prototype.has:null,m=typeof WeakSet=="function"&&WeakSet.prototype,y=m?WeakSet.prototype.has:null,M=typeof WeakRef=="function"&&WeakRef.prototype,x=M?WeakRef.prototype.deref:null,k=Boolean.prototype.valueOf,P=Object.prototype.toString,F=Function.prototype.toString,j=String.prototype.match,q=String.prototype.slice,V=String.prototype.replace,H=String.prototype.toUpperCase,G=String.prototype.toLowerCase,Y=RegExp.prototype.test,z=Array.prototype.concat,se=Array.prototype.join,le=Array.prototype.slice,me=Math.floor,de=typeof BigInt=="function"?BigInt.prototype.valueOf:null,be=Object.getOwnPropertySymbols,Ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,De=typeof Symbol=="function"&&typeof Symbol.iterator=="object",je=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===De||!0)?Symbol.toStringTag:null,Ie=Object.prototype.propertyIsEnumerable,Qe=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(ge){return ge.__proto__}:null);function et(ge,Be){if(ge===1/0||ge===-1/0||ge!==ge||ge&&ge>-1e3&&ge<1e3||Y.call(/e/,Be))return Be;var v=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof ge=="number"){var yt=ge<0?-me(-ge):me(ge);if(yt!==ge){var Mt=String(yt),Pt=q.call(Be,Mt.length+1);return V.call(Mt,v,"$&_")+"."+V.call(V.call(Pt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return V.call(Be,v,"$&_")}var dt=LPe,ke=dt.custom,we=pt(ke)?ke:null,ze={__proto__:null,double:'"',single:"'"},xe={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};sT=function ge(Be,v,yt,Mt){var Pt=v||{};if(Jt(Pt,"quoteStyle")&&!Jt(ze,Pt.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Jt(Pt,"maxStringLength")&&(typeof Pt.maxStringLength=="number"?Pt.maxStringLength<0&&Pt.maxStringLength!==1/0:Pt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var st=Jt(Pt,"customInspect")?Pt.customInspect:!0;if(typeof st!="boolean"&&st!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Jt(Pt,"indent")&&Pt.indent!==null&&Pt.indent!=="	"&&!(parseInt(Pt.indent,10)===Pt.indent&&Pt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Jt(Pt,"numericSeparator")&&typeof Pt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var fn=Pt.numericSeparator;if(typeof Be>"u")return"undefined";if(Be===null)return"null";if(typeof Be=="boolean")return Be?"true":"false";if(typeof Be=="string")return _e(Be,Pt);if(typeof Be=="number"){if(Be===0)return 1/0/Be>0?"0":"-0";var Fn=String(Be);return fn?et(Be,Fn):Fn}if(typeof Be=="bigint"){var pn=String(Be)+"n";return fn?et(Be,pn):pn}var $n=typeof Pt.depth>"u"?5:Pt.depth;if(typeof yt>"u"&&(yt=0),yt>=$n&&$n>0&&typeof Be=="object")return Bt(Be)?"[Array]":"[Object]";var Zn=Ue(Pt,yt);if(typeof Mt>"u")Mt=[];else if(ii(Mt,Be)>=0)return"[Circular]";function ai(Ki,$a,hl){if($a&&(Mt=le.call(Mt),Mt.push($a)),hl){var fo={depth:Pt.depth};return Jt(Pt,"quoteStyle")&&(fo.quoteStyle=Pt.quoteStyle),ge(Ki,fo,yt+1,Mt)}return ge(Ki,Pt,yt+1,Mt)}if(typeof Be=="function"&&!Te(Be)){var Hi=Ln(Be),Ti=lt(Be,ai);return"[Function"+(Hi?": "+Hi:" (anonymous)")+"]"+(Ti.length>0?" { "+se.call(Ti,", ")+" }":"")}if(pt(Be)){var tr=De?V.call(String(Be),/^(Symbol\(.*\))_[^)]*$/,"$1"):Ee.call(Be);return typeof Be=="object"&&!De?ee(tr):tr}if(Tt(Be)){for(var oi="<"+G.call(String(Be.nodeName)),Pi=Be.attributes||[],Zt=0;Zt<Pi.length;Zt++)oi+=" "+Pi[Zt].name+"="+At(it(Pi[Zt].value),"double",Pt);return oi+=">",Be.childNodes&&Be.childNodes.length&&(oi+="..."),oi+="</"+G.call(String(Be.nodeName))+">",oi}if(Bt(Be)){if(Be.length===0)return"[]";var pr=lt(Be,ai);return Zn&&!ye(pr)?"["+Ve(pr,Zn)+"]":"[ "+se.call(pr,", ")+" ]"}if(Se(Be)){var Zi=lt(Be,ai);return!("cause"in Error.prototype)&&"cause"in Be&&!Ie.call(Be,"cause")?"{ ["+String(Be)+"] "+se.call(z.call("[cause]: "+ai(Be.cause),Zi),", ")+" }":Zi.length===0?"["+String(Be)+"]":"{ ["+String(Be)+"] "+se.call(Zi,", ")+" }"}if(typeof Be=="object"&&st){if(we&&typeof Be[we]=="function"&&dt)return dt(Be,{depth:$n-yt});if(st!=="symbol"&&typeof Be.inspect=="function")return Be.inspect()}if(wn(Be)){var ea=[];return i&&i.call(Be,function(Ki,$a){ea.push(ai($a,Be,!0)+" => "+ai(Ki,Be))}),ue("Map",t.call(Be),ea,Zn)}if(Yn(Be)){var no=[];return a&&a.call(Be,function(Ki){no.push(ai(Ki,Be))}),ue("Set",s.call(Be),no,Zn)}if(Rn(Be))return ne("WeakMap");if(Dn(Be))return ne("WeakSet");if(gn(Be))return ne("WeakRef");if(ut(Be))return ee(ai(Number(Be)));if(Dt(Be))return ee(ai(de.call(Be)));if(rt(Be))return ee(k.call(Be));if(Ne(Be))return ee(ai(String(Be)));if(typeof window<"u"&&Be===window)return"{ [object Window] }";if(typeof globalThis<"u"&&Be===globalThis||typeof window<"u"&&Be===window)return"{ [object globalThis] }";if(!Ke(Be)&&!Te(Be)){var sn=lt(Be,ai),Ci=Qe?Qe(Be)===Object.prototype:Be instanceof Object||Be.constructor===Object,Ui=Be instanceof Object?"":"null prototype",nr=!Ci&&je&&Object(Be)===Be&&je in Be?q.call(Tn(Be),8,-1):Ui?"Object":"",Jl=Ci||typeof Be.constructor!="function"?"":Be.constructor.name?Be.constructor.name+" ":"",Al=Jl+(nr||Ui?"["+se.call(z.call([],nr||[],Ui||[]),": ")+"] ":"");return sn.length===0?Al+"{}":Zn?Al+"{"+Ve(sn,Zn)+"}":Al+"{ "+se.call(sn,", ")+" }"}return String(Be)};function At(ge,Be,v){var yt=v.quoteStyle||Be,Mt=ze[yt];return Mt+ge+Mt}function it(ge){return V.call(String(ge),/"/g,"&quot;")}function bt(ge){return!je||!(typeof ge=="object"&&(je in ge||typeof ge[je]<"u"))}function Bt(ge){return Tn(ge)==="[object Array]"&&bt(ge)}function Ke(ge){return Tn(ge)==="[object Date]"&&bt(ge)}function Te(ge){return Tn(ge)==="[object RegExp]"&&bt(ge)}function Se(ge){return Tn(ge)==="[object Error]"&&bt(ge)}function Ne(ge){return Tn(ge)==="[object String]"&&bt(ge)}function ut(ge){return Tn(ge)==="[object Number]"&&bt(ge)}function rt(ge){return Tn(ge)==="[object Boolean]"&&bt(ge)}function pt(ge){if(De)return ge&&typeof ge=="object"&&ge instanceof Symbol;if(typeof ge=="symbol")return!0;if(!ge||typeof ge!="object"||!Ee)return!1;try{return Ee.call(ge),!0}catch{}return!1}function Dt(ge){if(!ge||typeof ge!="object"||!de)return!1;try{return de.call(ge),!0}catch{}return!1}var Ot=Object.prototype.hasOwnProperty||function(ge){return ge in this};function Jt(ge,Be){return Ot.call(ge,Be)}function Tn(ge){return P.call(ge)}function Ln(ge){if(ge.name)return ge.name;var Be=j.call(F.call(ge),/^function\s*([\w$]+)/);return Be?Be[1]:null}function ii(ge,Be){if(ge.indexOf)return ge.indexOf(Be);for(var v=0,yt=ge.length;v<yt;v++)if(ge[v]===Be)return v;return-1}function wn(ge){if(!t||!ge||typeof ge!="object")return!1;try{t.call(ge);try{s.call(ge)}catch{return!0}return ge instanceof Map}catch{}return!1}function Rn(ge){if(!h||!ge||typeof ge!="object")return!1;try{h.call(ge,h);try{y.call(ge,y)}catch{return!0}return ge instanceof WeakMap}catch{}return!1}function gn(ge){if(!x||!ge||typeof ge!="object")return!1;try{return x.call(ge),!0}catch{}return!1}function Yn(ge){if(!s||!ge||typeof ge!="object")return!1;try{s.call(ge);try{t.call(ge)}catch{return!0}return ge instanceof Set}catch{}return!1}function Dn(ge){if(!y||!ge||typeof ge!="object")return!1;try{y.call(ge,y);try{h.call(ge,h)}catch{return!0}return ge instanceof WeakSet}catch{}return!1}function Tt(ge){return!ge||typeof ge!="object"?!1:typeof HTMLElement<"u"&&ge instanceof HTMLElement?!0:typeof ge.nodeName=="string"&&typeof ge.getAttribute=="function"}function _e(ge,Be){if(ge.length>Be.maxStringLength){var v=ge.length-Be.maxStringLength,yt="... "+v+" more character"+(v>1?"s":"");return _e(q.call(ge,0,Be.maxStringLength),Be)+yt}var Mt=xe[Be.quoteStyle||"single"];Mt.lastIndex=0;var Pt=V.call(V.call(ge,Mt,"\\$1"),/[\x00-\x1f]/g,oe);return At(Pt,"single",Be)}function oe(ge){var Be=ge.charCodeAt(0),v={8:"b",9:"t",10:"n",12:"f",13:"r"}[Be];return v?"\\"+v:"\\x"+(Be<16?"0":"")+H.call(Be.toString(16))}function ee(ge){return"Object("+ge+")"}function ne(ge){return ge+" { ? }"}function ue(ge,Be,v,yt){var Mt=yt?Ve(v,yt):se.call(v,", ");return ge+" ("+Be+") {"+Mt+"}"}function ye(ge){for(var Be=0;Be<ge.length;Be++)if(ii(ge[Be],`
`)>=0)return!1;return!0}function Ue(ge,Be){var v;if(ge.indent==="	")v="	";else if(typeof ge.indent=="number"&&ge.indent>0)v=se.call(Array(ge.indent+1)," ");else return null;return{base:v,prev:se.call(Array(Be+1),v)}}function Ve(ge,Be){if(ge.length===0)return"";var v=`
`+Be.prev+Be.base;return v+se.call(ge,","+v)+`
`+Be.prev}function lt(ge,Be){var v=Bt(ge),yt=[];if(v){yt.length=ge.length;for(var Mt=0;Mt<ge.length;Mt++)yt[Mt]=Jt(ge,Mt)?Be(ge[Mt],ge):""}var Pt=typeof be=="function"?be(ge):[],st;if(De){st={};for(var fn=0;fn<Pt.length;fn++)st["$"+Pt[fn]]=Pt[fn]}for(var Fn in ge)Jt(ge,Fn)&&(v&&String(Number(Fn))===Fn&&Fn<ge.length||De&&st["$"+Fn]instanceof Symbol||(Y.call(/[^\w$]/,Fn)?yt.push(Be(Fn,ge)+": "+Be(ge[Fn],ge)):yt.push(Fn+": "+Be(ge[Fn],ge))));if(typeof be=="function")for(var pn=0;pn<Pt.length;pn++)Ie.call(ge,Pt[pn])&&yt.push("["+Be(Pt[pn])+"]: "+Be(ge[Pt[pn]],ge));return yt}return sT}var aT,JV;function FPe(){if(JV)return aT;JV=1;var n=$6(),e=Hx(),t=function(a,c,h){for(var m=a,y;(y=m.next)!=null;m=y)if(y.key===c)return m.next=y.next,h||(y.next=a.next,a.next=y),y},i=function(a,c){if(a){var h=t(a,c);return h&&h.value}},r=function(a,c,h){var m=t(a,c);m?m.value=h:a.next={key:c,next:a.next,value:h}},o=function(a,c){return a?!!t(a,c):!1},s=function(a,c){if(a)return t(a,c,!0)};return aT=function(){var c,h={assert:function(m){if(!h.has(m))throw new e("Side channel does not contain "+n(m))},delete:function(m){var y=c&&c.next,M=s(c,m);return M&&y&&y===M&&(c=void 0),!!M},get:function(m){return i(c,m)},has:function(m){return o(c,m)},set:function(m,y){c||(c={next:void 0}),r(c,m,y)}};return h},aT}var lT,eH;function hae(){return eH||(eH=1,lT=Object),lT}var uT,tH;function zPe(){return tH||(tH=1,uT=Error),uT}var cT,nH;function jPe(){return nH||(nH=1,cT=EvalError),cT}var AT,iH;function NPe(){return iH||(iH=1,AT=RangeError),AT}var hT,rH;function GPe(){return rH||(rH=1,hT=ReferenceError),hT}var dT,oH;function WPe(){return oH||(oH=1,dT=SyntaxError),dT}var fT,sH;function QPe(){return sH||(sH=1,fT=URIError),fT}var pT,aH;function qPe(){return aH||(aH=1,pT=Math.abs),pT}var mT,lH;function YPe(){return lH||(lH=1,mT=Math.floor),mT}var gT,uH;function $Pe(){return uH||(uH=1,gT=Math.max),gT}var yT,cH;function VPe(){return cH||(cH=1,yT=Math.min),yT}var vT,AH;function HPe(){return AH||(AH=1,vT=Math.pow),vT}var bT,hH;function ZPe(){return hH||(hH=1,bT=Math.round),bT}var CT,dH;function XPe(){return dH||(dH=1,CT=Number.isNaN||function(e){return e!==e}),CT}var _T,fH;function JPe(){if(fH)return _T;fH=1;var n=XPe();return _T=function(t){return n(t)||t===0?t:t<0?-1:1},_T}var xT,pH;function eUe(){return pH||(pH=1,xT=Object.getOwnPropertyDescriptor),xT}var MT,mH;function dae(){if(mH)return MT;mH=1;var n=eUe();if(n)try{n([],"length")}catch{n=null}return MT=n,MT}var wT,gH;function tUe(){if(gH)return wT;gH=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return wT=n,wT}var ST,yH;function nUe(){return yH||(yH=1,ST=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),i=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var r=42;e[t]=r;for(var o in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==r||a.enumerable!==!0)return!1}return!0}),ST}var ET,vH;function iUe(){if(vH)return ET;vH=1;var n=typeof Symbol<"u"&&Symbol,e=nUe();return ET=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},ET}var OT,bH;function fae(){return bH||(bH=1,OT=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),OT}var BT,CH;function pae(){if(CH)return BT;CH=1;var n=hae();return BT=n.getPrototypeOf||null,BT}var IT,_H;function rUe(){if(_H)return IT;_H=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,i="[object Function]",r=function(c,h){for(var m=[],y=0;y<c.length;y+=1)m[y]=c[y];for(var M=0;M<h.length;M+=1)m[M+c.length]=h[M];return m},o=function(c,h){for(var m=[],y=h,M=0;y<c.length;y+=1,M+=1)m[M]=c[y];return m},s=function(a,c){for(var h="",m=0;m<a.length;m+=1)h+=a[m],m+1<a.length&&(h+=c);return h};return IT=function(c){var h=this;if(typeof h!="function"||e.apply(h)!==i)throw new TypeError(n+h);for(var m=o(arguments,1),y,M=function(){if(this instanceof y){var j=h.apply(this,r(m,arguments));return Object(j)===j?j:this}return h.apply(c,r(m,arguments))},x=t(0,h.length-m.length),k=[],P=0;P<x;P++)k[P]="$"+P;if(y=Function("binder","return function ("+s(k,",")+"){ return binder.apply(this,arguments); }")(M),h.prototype){var F=function(){};F.prototype=h.prototype,y.prototype=new F,F.prototype=null}return y},IT}var kT,xH;function V6(){if(xH)return kT;xH=1;var n=rUe();return kT=Function.prototype.bind||n,kT}var TT,MH;function BL(){return MH||(MH=1,TT=Function.prototype.call),TT}var RT,wH;function mae(){return wH||(wH=1,RT=Function.prototype.apply),RT}var DT,SH;function oUe(){return SH||(SH=1,DT=typeof Reflect<"u"&&Reflect&&Reflect.apply),DT}var PT,EH;function sUe(){if(EH)return PT;EH=1;var n=V6(),e=mae(),t=BL(),i=oUe();return PT=i||n.call(t,e),PT}var UT,OH;function gae(){if(OH)return UT;OH=1;var n=V6(),e=Hx(),t=BL(),i=sUe();return UT=function(o){if(o.length<1||typeof o[0]!="function")throw new e("a function is required");return i(n,t,o)},UT}var KT,BH;function aUe(){if(BH)return KT;BH=1;var n=gae(),e=dae(),t;try{t=[].__proto__===Array.prototype}catch(s){if(!s||typeof s!="object"||!("code"in s)||s.code!=="ERR_PROTO_ACCESS")throw s}var i=!!t&&e&&e(Object.prototype,"__proto__"),r=Object,o=r.getPrototypeOf;return KT=i&&typeof i.get=="function"?n([i.get]):typeof o=="function"?function(a){return o(a==null?a:r(a))}:!1,KT}var LT,IH;function lUe(){if(IH)return LT;IH=1;var n=fae(),e=pae(),t=aUe();return LT=n?function(r){return n(r)}:e?function(r){if(!r||typeof r!="object"&&typeof r!="function")throw new TypeError("getProto: not an object");return e(r)}:t?function(r){return t(r)}:null,LT}var FT,kH;function uUe(){if(kH)return FT;kH=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=V6();return FT=t.call(n,e),FT}var zT,TH;function IL(){if(TH)return zT;TH=1;var n,e=hae(),t=zPe(),i=jPe(),r=NPe(),o=GPe(),s=WPe(),a=Hx(),c=QPe(),h=qPe(),m=YPe(),y=$Pe(),M=VPe(),x=HPe(),k=ZPe(),P=JPe(),F=Function,j=function(Te){try{return F('"use strict"; return ('+Te+").constructor;")()}catch{}},q=dae(),V=tUe(),H=function(){throw new a},G=q?(function(){try{return arguments.callee,H}catch{try{return q(arguments,"callee").get}catch{return H}}})():H,Y=iUe()(),z=lUe(),se=pae(),le=fae(),me=mae(),de=BL(),be={},Ee=typeof Uint8Array>"u"||!z?n:z(Uint8Array),De={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":Y&&z?z([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":be,"%AsyncGenerator%":be,"%AsyncGeneratorFunction%":be,"%AsyncIteratorPrototype%":be,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":i,"%Float16Array%":typeof Float16Array>"u"?n:Float16Array,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":F,"%GeneratorFunction%":be,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Y&&z?z(z([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Y||!z?n:z(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":q,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":r,"%ReferenceError%":o,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Y||!z?n:z(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Y&&z?z(""[Symbol.iterator]()):n,"%Symbol%":Y?Symbol:n,"%SyntaxError%":s,"%ThrowTypeError%":G,"%TypedArray%":Ee,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":c,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":de,"%Function.prototype.apply%":me,"%Object.defineProperty%":V,"%Object.getPrototypeOf%":se,"%Math.abs%":h,"%Math.floor%":m,"%Math.max%":y,"%Math.min%":M,"%Math.pow%":x,"%Math.round%":k,"%Math.sign%":P,"%Reflect.getPrototypeOf%":le};if(z)try{null.error}catch(Te){var je=z(z(Te));De["%Error.prototype%"]=je}var Ie=function Te(Se){var Ne;if(Se==="%AsyncFunction%")Ne=j("async function () {}");else if(Se==="%GeneratorFunction%")Ne=j("function* () {}");else if(Se==="%AsyncGeneratorFunction%")Ne=j("async function* () {}");else if(Se==="%AsyncGenerator%"){var ut=Te("%AsyncGeneratorFunction%");ut&&(Ne=ut.prototype)}else if(Se==="%AsyncIteratorPrototype%"){var rt=Te("%AsyncGenerator%");rt&&z&&(Ne=z(rt.prototype))}return De[Se]=Ne,Ne},Qe={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},et=V6(),dt=uUe(),ke=et.call(de,Array.prototype.concat),we=et.call(me,Array.prototype.splice),ze=et.call(de,String.prototype.replace),xe=et.call(de,String.prototype.slice),At=et.call(de,RegExp.prototype.exec),it=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,bt=/\\(\\)?/g,Bt=function(Se){var Ne=xe(Se,0,1),ut=xe(Se,-1);if(Ne==="%"&&ut!=="%")throw new s("invalid intrinsic syntax, expected closing `%`");if(ut==="%"&&Ne!=="%")throw new s("invalid intrinsic syntax, expected opening `%`");var rt=[];return ze(Se,it,function(pt,Dt,Ot,Jt){rt[rt.length]=Ot?ze(Jt,bt,"$1"):Dt||pt}),rt},Ke=function(Se,Ne){var ut=Se,rt;if(dt(Qe,ut)&&(rt=Qe[ut],ut="%"+rt[0]+"%"),dt(De,ut)){var pt=De[ut];if(pt===be&&(pt=Ie(ut)),typeof pt>"u"&&!Ne)throw new a("intrinsic "+Se+" exists, but is not available. Please file an issue!");return{alias:rt,name:ut,value:pt}}throw new s("intrinsic "+Se+" does not exist!")};return zT=function(Se,Ne){if(typeof Se!="string"||Se.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Ne!="boolean")throw new a('"allowMissing" argument must be a boolean');if(At(/^%?[^%]*%?$/,Se)===null)throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var ut=Bt(Se),rt=ut.length>0?ut[0]:"",pt=Ke("%"+rt+"%",Ne),Dt=pt.name,Ot=pt.value,Jt=!1,Tn=pt.alias;Tn&&(rt=Tn[0],we(ut,ke([0,1],Tn)));for(var Ln=1,ii=!0;Ln<ut.length;Ln+=1){var wn=ut[Ln],Rn=xe(wn,0,1),gn=xe(wn,-1);if((Rn==='"'||Rn==="'"||Rn==="`"||gn==='"'||gn==="'"||gn==="`")&&Rn!==gn)throw new s("property names with quotes must have matching quotes");if((wn==="constructor"||!ii)&&(Jt=!0),rt+="."+wn,Dt="%"+rt+"%",dt(De,Dt))Ot=De[Dt];else if(Ot!=null){if(!(wn in Ot)){if(!Ne)throw new a("base intrinsic for "+Se+" exists, but the property is not available.");return}if(q&&Ln+1>=ut.length){var Yn=q(Ot,wn);ii=!!Yn,ii&&"get"in Yn&&!("originalValue"in Yn.get)?Ot=Yn.get:Ot=Ot[wn]}else ii=dt(Ot,wn),Ot=Ot[wn];ii&&!Jt&&(De[Dt]=Ot)}}return Ot},zT}var jT,RH;function yae(){if(RH)return jT;RH=1;var n=IL(),e=gae(),t=e([n("%String.prototype.indexOf%")]);return jT=function(r,o){var s=n(r,!!o);return typeof s=="function"&&t(r,".prototype.")>-1?e([s]):s},jT}var NT,DH;function vae(){if(DH)return NT;DH=1;var n=IL(),e=yae(),t=$6(),i=Hx(),r=n("%Map%",!0),o=e("Map.prototype.get",!0),s=e("Map.prototype.set",!0),a=e("Map.prototype.has",!0),c=e("Map.prototype.delete",!0),h=e("Map.prototype.size",!0);return NT=!!r&&function(){var y,M={assert:function(x){if(!M.has(x))throw new i("Side channel does not contain "+t(x))},delete:function(x){if(y){var k=c(y,x);return h(y)===0&&(y=void 0),k}return!1},get:function(x){if(y)return o(y,x)},has:function(x){return y?a(y,x):!1},set:function(x,k){y||(y=new r),s(y,x,k)}};return M},NT}var GT,PH;function cUe(){if(PH)return GT;PH=1;var n=IL(),e=yae(),t=$6(),i=vae(),r=Hx(),o=n("%WeakMap%",!0),s=e("WeakMap.prototype.get",!0),a=e("WeakMap.prototype.set",!0),c=e("WeakMap.prototype.has",!0),h=e("WeakMap.prototype.delete",!0);return GT=o?function(){var y,M,x={assert:function(k){if(!x.has(k))throw new r("Side channel does not contain "+t(k))},delete:function(k){if(o&&k&&(typeof k=="object"||typeof k=="function")){if(y)return h(y,k)}else if(i&&M)return M.delete(k);return!1},get:function(k){return o&&k&&(typeof k=="object"||typeof k=="function")&&y?s(y,k):M&&M.get(k)},has:function(k){return o&&k&&(typeof k=="object"||typeof k=="function")&&y?c(y,k):!!M&&M.has(k)},set:function(k,P){o&&k&&(typeof k=="object"||typeof k=="function")?(y||(y=new o),a(y,k,P)):i&&(M||(M=i()),M.set(k,P))}};return x}:i,GT}var WT,UH;function AUe(){if(UH)return WT;UH=1;var n=Hx(),e=$6(),t=FPe(),i=vae(),r=cUe(),o=r||i||t;return WT=function(){var a,c={assert:function(h){if(!c.has(h))throw new n("Side channel does not contain "+e(h))},delete:function(h){return!!a&&a.delete(h)},get:function(h){return a&&a.get(h)},has:function(h){return!!a&&a.has(h)},set:function(h,m){a||(a=o()),a.set(h,m)}};return c},WT}var QT,KH;function kL(){if(KH)return QT;KH=1;var n=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return QT={default:t.RFC3986,formatters:{RFC1738:function(i){return n.call(i,e,"+")},RFC3986:function(i){return String(i)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},QT}var qT,LH;function bae(){if(LH)return qT;LH=1;var n=kL(),e=Object.prototype.hasOwnProperty,t=Array.isArray,i=(function(){for(var F=[],j=0;j<256;++j)F.push("%"+((j<16?"0":"")+j.toString(16)).toUpperCase());return F})(),r=function(j){for(;j.length>1;){var q=j.pop(),V=q.obj[q.prop];if(t(V)){for(var H=[],G=0;G<V.length;++G)typeof V[G]<"u"&&H.push(V[G]);q.obj[q.prop]=H}}},o=function(j,q){for(var V=q&&q.plainObjects?{__proto__:null}:{},H=0;H<j.length;++H)typeof j[H]<"u"&&(V[H]=j[H]);return V},s=function F(j,q,V){if(!q)return j;if(typeof q!="object"&&typeof q!="function"){if(t(j))j.push(q);else if(j&&typeof j=="object")(V&&(V.plainObjects||V.allowPrototypes)||!e.call(Object.prototype,q))&&(j[q]=!0);else return[j,q];return j}if(!j||typeof j!="object")return[j].concat(q);var H=j;return t(j)&&!t(q)&&(H=o(j,V)),t(j)&&t(q)?(q.forEach(function(G,Y){if(e.call(j,Y)){var z=j[Y];z&&typeof z=="object"&&G&&typeof G=="object"?j[Y]=F(z,G,V):j.push(G)}else j[Y]=G}),j):Object.keys(q).reduce(function(G,Y){var z=q[Y];return e.call(G,Y)?G[Y]=F(G[Y],z,V):G[Y]=z,G},H)},a=function(j,q){return Object.keys(q).reduce(function(V,H){return V[H]=q[H],V},j)},c=function(F,j,q){var V=F.replace(/\+/g," ");if(q==="iso-8859-1")return V.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(V)}catch{return V}},h=1024,m=function(j,q,V,H,G){if(j.length===0)return j;var Y=j;if(typeof j=="symbol"?Y=Symbol.prototype.toString.call(j):typeof j!="string"&&(Y=String(j)),V==="iso-8859-1")return escape(Y).replace(/%u[0-9a-f]{4}/gi,function(Ee){return"%26%23"+parseInt(Ee.slice(2),16)+"%3B"});for(var z="",se=0;se<Y.length;se+=h){for(var le=Y.length>=h?Y.slice(se,se+h):Y,me=[],de=0;de<le.length;++de){var be=le.charCodeAt(de);if(be===45||be===46||be===95||be===126||be>=48&&be<=57||be>=65&&be<=90||be>=97&&be<=122||G===n.RFC1738&&(be===40||be===41)){me[me.length]=le.charAt(de);continue}if(be<128){me[me.length]=i[be];continue}if(be<2048){me[me.length]=i[192|be>>6]+i[128|be&63];continue}if(be<55296||be>=57344){me[me.length]=i[224|be>>12]+i[128|be>>6&63]+i[128|be&63];continue}de+=1,be=65536+((be&1023)<<10|le.charCodeAt(de)&1023),me[me.length]=i[240|be>>18]+i[128|be>>12&63]+i[128|be>>6&63]+i[128|be&63]}z+=me.join("")}return z},y=function(j){for(var q=[{obj:{o:j},prop:"o"}],V=[],H=0;H<q.length;++H)for(var G=q[H],Y=G.obj[G.prop],z=Object.keys(Y),se=0;se<z.length;++se){var le=z[se],me=Y[le];typeof me=="object"&&me!==null&&V.indexOf(me)===-1&&(q.push({obj:Y,prop:le}),V.push(me))}return r(q),j},M=function(j){return Object.prototype.toString.call(j)==="[object RegExp]"},x=function(j){return!j||typeof j!="object"?!1:!!(j.constructor&&j.constructor.isBuffer&&j.constructor.isBuffer(j))},k=function(j,q){return[].concat(j,q)},P=function(j,q){if(t(j)){for(var V=[],H=0;H<j.length;H+=1)V.push(q(j[H]));return V}return q(j)};return qT={arrayToObject:o,assign:a,combine:k,compact:y,decode:c,encode:m,isBuffer:x,isRegExp:M,maybeMap:P,merge:s},qT}var YT,FH;function hUe(){if(FH)return YT;FH=1;var n=AUe(),e=bae(),t=kL(),i=Object.prototype.hasOwnProperty,r={brackets:function(F){return F+"[]"},comma:"comma",indices:function(F,j){return F+"["+j+"]"},repeat:function(F){return F}},o=Array.isArray,s=Array.prototype.push,a=function(P,F){s.apply(P,o(F)?F:[F])},c=Date.prototype.toISOString,h=t.default,m={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:h,formatter:t.formatters[h],indices:!1,serializeDate:function(F){return c.call(F)},skipNulls:!1,strictNullHandling:!1},y=function(F){return typeof F=="string"||typeof F=="number"||typeof F=="boolean"||typeof F=="symbol"||typeof F=="bigint"},M={},x=function P(F,j,q,V,H,G,Y,z,se,le,me,de,be,Ee,De,je,Ie,Qe){for(var et=F,dt=Qe,ke=0,we=!1;(dt=dt.get(M))!==void 0&&!we;){var ze=dt.get(F);if(ke+=1,typeof ze<"u"){if(ze===ke)throw new RangeError("Cyclic object value");we=!0}typeof dt.get(M)>"u"&&(ke=0)}if(typeof le=="function"?et=le(j,et):et instanceof Date?et=be(et):q==="comma"&&o(et)&&(et=e.maybeMap(et,function(Dt){return Dt instanceof Date?be(Dt):Dt})),et===null){if(G)return se&&!je?se(j,m.encoder,Ie,"key",Ee):j;et=""}if(y(et)||e.isBuffer(et)){if(se){var xe=je?j:se(j,m.encoder,Ie,"key",Ee);return[De(xe)+"="+De(se(et,m.encoder,Ie,"value",Ee))]}return[De(j)+"="+De(String(et))]}var At=[];if(typeof et>"u")return At;var it;if(q==="comma"&&o(et))je&&se&&(et=e.maybeMap(et,se)),it=[{value:et.length>0?et.join(",")||null:void 0}];else if(o(le))it=le;else{var bt=Object.keys(et);it=me?bt.sort(me):bt}var Bt=z?String(j).replace(/\./g,"%2E"):String(j),Ke=V&&o(et)&&et.length===1?Bt+"[]":Bt;if(H&&o(et)&&et.length===0)return Ke+"[]";for(var Te=0;Te<it.length;++Te){var Se=it[Te],Ne=typeof Se=="object"&&Se&&typeof Se.value<"u"?Se.value:et[Se];if(!(Y&&Ne===null)){var ut=de&&z?String(Se).replace(/\./g,"%2E"):String(Se),rt=o(et)?typeof q=="function"?q(Ke,ut):Ke:Ke+(de?"."+ut:"["+ut+"]");Qe.set(F,ke);var pt=n();pt.set(M,Qe),a(At,P(Ne,rt,q,V,H,G,Y,z,q==="comma"&&je&&o(et)?null:se,le,me,de,be,Ee,De,je,Ie,pt))}}return At},k=function(F){if(!F)return m;if(typeof F.allowEmptyArrays<"u"&&typeof F.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof F.encodeDotInKeys<"u"&&typeof F.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(F.encoder!==null&&typeof F.encoder<"u"&&typeof F.encoder!="function")throw new TypeError("Encoder has to be a function.");var j=F.charset||m.charset;if(typeof F.charset<"u"&&F.charset!=="utf-8"&&F.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var q=t.default;if(typeof F.format<"u"){if(!i.call(t.formatters,F.format))throw new TypeError("Unknown format option provided.");q=F.format}var V=t.formatters[q],H=m.filter;(typeof F.filter=="function"||o(F.filter))&&(H=F.filter);var G;if(F.arrayFormat in r?G=F.arrayFormat:"indices"in F?G=F.indices?"indices":"repeat":G=m.arrayFormat,"commaRoundTrip"in F&&typeof F.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var Y=typeof F.allowDots>"u"?F.encodeDotInKeys===!0?!0:m.allowDots:!!F.allowDots;return{addQueryPrefix:typeof F.addQueryPrefix=="boolean"?F.addQueryPrefix:m.addQueryPrefix,allowDots:Y,allowEmptyArrays:typeof F.allowEmptyArrays=="boolean"?!!F.allowEmptyArrays:m.allowEmptyArrays,arrayFormat:G,charset:j,charsetSentinel:typeof F.charsetSentinel=="boolean"?F.charsetSentinel:m.charsetSentinel,commaRoundTrip:!!F.commaRoundTrip,delimiter:typeof F.delimiter>"u"?m.delimiter:F.delimiter,encode:typeof F.encode=="boolean"?F.encode:m.encode,encodeDotInKeys:typeof F.encodeDotInKeys=="boolean"?F.encodeDotInKeys:m.encodeDotInKeys,encoder:typeof F.encoder=="function"?F.encoder:m.encoder,encodeValuesOnly:typeof F.encodeValuesOnly=="boolean"?F.encodeValuesOnly:m.encodeValuesOnly,filter:H,format:q,formatter:V,serializeDate:typeof F.serializeDate=="function"?F.serializeDate:m.serializeDate,skipNulls:typeof F.skipNulls=="boolean"?F.skipNulls:m.skipNulls,sort:typeof F.sort=="function"?F.sort:null,strictNullHandling:typeof F.strictNullHandling=="boolean"?F.strictNullHandling:m.strictNullHandling}};return YT=function(P,F){var j=P,q=k(F),V,H;typeof q.filter=="function"?(H=q.filter,j=H("",j)):o(q.filter)&&(H=q.filter,V=H);var G=[];if(typeof j!="object"||j===null)return"";var Y=r[q.arrayFormat],z=Y==="comma"&&q.commaRoundTrip;V||(V=Object.keys(j)),q.sort&&V.sort(q.sort);for(var se=n(),le=0;le<V.length;++le){var me=V[le],de=j[me];q.skipNulls&&de===null||a(G,x(de,me,Y,z,q.allowEmptyArrays,q.strictNullHandling,q.skipNulls,q.encodeDotInKeys,q.encode?q.encoder:null,q.filter,q.sort,q.allowDots,q.serializeDate,q.format,q.formatter,q.encodeValuesOnly,q.charset,se))}var be=G.join(q.delimiter),Ee=q.addQueryPrefix===!0?"?":"";return q.charsetSentinel&&(q.charset==="iso-8859-1"?Ee+="utf8=%26%2310003%3B&":Ee+="utf8=%E2%9C%93&"),be.length>0?Ee+be:""},YT}var $T,zH;function dUe(){if(zH)return $T;zH=1;var n=bae(),e=Object.prototype.hasOwnProperty,t=Array.isArray,i={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},r=function(M){return M.replace(/&#(\d+);/g,function(x,k){return String.fromCharCode(parseInt(k,10))})},o=function(M,x,k){if(M&&typeof M=="string"&&x.comma&&M.indexOf(",")>-1)return M.split(",");if(x.throwOnLimitExceeded&&k>=x.arrayLimit)throw new RangeError("Array limit exceeded. Only "+x.arrayLimit+" element"+(x.arrayLimit===1?"":"s")+" allowed in an array.");return M},s="utf8=%26%2310003%3B",a="utf8=%E2%9C%93",c=function(x,k){var P={__proto__:null},F=k.ignoreQueryPrefix?x.replace(/^\?/,""):x;F=F.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var j=k.parameterLimit===1/0?void 0:k.parameterLimit,q=F.split(k.delimiter,k.throwOnLimitExceeded?j+1:j);if(k.throwOnLimitExceeded&&q.length>j)throw new RangeError("Parameter limit exceeded. Only "+j+" parameter"+(j===1?"":"s")+" allowed.");var V=-1,H,G=k.charset;if(k.charsetSentinel)for(H=0;H<q.length;++H)q[H].indexOf("utf8=")===0&&(q[H]===a?G="utf-8":q[H]===s&&(G="iso-8859-1"),V=H,H=q.length);for(H=0;H<q.length;++H)if(H!==V){var Y=q[H],z=Y.indexOf("]="),se=z===-1?Y.indexOf("="):z+1,le,me;se===-1?(le=k.decoder(Y,i.decoder,G,"key"),me=k.strictNullHandling?null:""):(le=k.decoder(Y.slice(0,se),i.decoder,G,"key"),me=n.maybeMap(o(Y.slice(se+1),k,t(P[le])?P[le].length:0),function(be){return k.decoder(be,i.decoder,G,"value")})),me&&k.interpretNumericEntities&&G==="iso-8859-1"&&(me=r(String(me))),Y.indexOf("[]=")>-1&&(me=t(me)?[me]:me);var de=e.call(P,le);de&&k.duplicates==="combine"?P[le]=n.combine(P[le],me):(!de||k.duplicates==="last")&&(P[le]=me)}return P},h=function(M,x,k,P){var F=0;if(M.length>0&&M[M.length-1]==="[]"){var j=M.slice(0,-1).join("");F=Array.isArray(x)&&x[j]?x[j].length:0}for(var q=P?x:o(x,k,F),V=M.length-1;V>=0;--V){var H,G=M[V];if(G==="[]"&&k.parseArrays)H=k.allowEmptyArrays&&(q===""||k.strictNullHandling&&q===null)?[]:n.combine([],q);else{H=k.plainObjects?{__proto__:null}:{};var Y=G.charAt(0)==="["&&G.charAt(G.length-1)==="]"?G.slice(1,-1):G,z=k.decodeDotInKeys?Y.replace(/%2E/g,"."):Y,se=parseInt(z,10);!k.parseArrays&&z===""?H={0:q}:!isNaN(se)&&G!==z&&String(se)===z&&se>=0&&k.parseArrays&&se<=k.arrayLimit?(H=[],H[se]=q):z!=="__proto__"&&(H[z]=q)}q=H}return q},m=function(x,k,P,F){if(x){var j=P.allowDots?x.replace(/\.([^.[]+)/g,"[$1]"):x,q=/(\[[^[\]]*])/,V=/(\[[^[\]]*])/g,H=P.depth>0&&q.exec(j),G=H?j.slice(0,H.index):j,Y=[];if(G){if(!P.plainObjects&&e.call(Object.prototype,G)&&!P.allowPrototypes)return;Y.push(G)}for(var z=0;P.depth>0&&(H=V.exec(j))!==null&&z<P.depth;){if(z+=1,!P.plainObjects&&e.call(Object.prototype,H[1].slice(1,-1))&&!P.allowPrototypes)return;Y.push(H[1])}if(H){if(P.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+P.depth+" and strictDepth is true");Y.push("["+j.slice(H.index)+"]")}return h(Y,k,P,F)}},y=function(x){if(!x)return i;if(typeof x.allowEmptyArrays<"u"&&typeof x.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof x.decodeDotInKeys<"u"&&typeof x.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(x.decoder!==null&&typeof x.decoder<"u"&&typeof x.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof x.charset<"u"&&x.charset!=="utf-8"&&x.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof x.throwOnLimitExceeded<"u"&&typeof x.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var k=typeof x.charset>"u"?i.charset:x.charset,P=typeof x.duplicates>"u"?i.duplicates:x.duplicates;if(P!=="combine"&&P!=="first"&&P!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var F=typeof x.allowDots>"u"?x.decodeDotInKeys===!0?!0:i.allowDots:!!x.allowDots;return{allowDots:F,allowEmptyArrays:typeof x.allowEmptyArrays=="boolean"?!!x.allowEmptyArrays:i.allowEmptyArrays,allowPrototypes:typeof x.allowPrototypes=="boolean"?x.allowPrototypes:i.allowPrototypes,allowSparse:typeof x.allowSparse=="boolean"?x.allowSparse:i.allowSparse,arrayLimit:typeof x.arrayLimit=="number"?x.arrayLimit:i.arrayLimit,charset:k,charsetSentinel:typeof x.charsetSentinel=="boolean"?x.charsetSentinel:i.charsetSentinel,comma:typeof x.comma=="boolean"?x.comma:i.comma,decodeDotInKeys:typeof x.decodeDotInKeys=="boolean"?x.decodeDotInKeys:i.decodeDotInKeys,decoder:typeof x.decoder=="function"?x.decoder:i.decoder,delimiter:typeof x.delimiter=="string"||n.isRegExp(x.delimiter)?x.delimiter:i.delimiter,depth:typeof x.depth=="number"||x.depth===!1?+x.depth:i.depth,duplicates:P,ignoreQueryPrefix:x.ignoreQueryPrefix===!0,interpretNumericEntities:typeof x.interpretNumericEntities=="boolean"?x.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:typeof x.parameterLimit=="number"?x.parameterLimit:i.parameterLimit,parseArrays:x.parseArrays!==!1,plainObjects:typeof x.plainObjects=="boolean"?x.plainObjects:i.plainObjects,strictDepth:typeof x.strictDepth=="boolean"?!!x.strictDepth:i.strictDepth,strictNullHandling:typeof x.strictNullHandling=="boolean"?x.strictNullHandling:i.strictNullHandling,throwOnLimitExceeded:typeof x.throwOnLimitExceeded=="boolean"?x.throwOnLimitExceeded:!1}};return $T=function(M,x){var k=y(x);if(M===""||M===null||typeof M>"u")return k.plainObjects?{__proto__:null}:{};for(var P=typeof M=="string"?c(M,k):M,F=k.plainObjects?{__proto__:null}:{},j=Object.keys(P),q=0;q<j.length;++q){var V=j[q],H=m(V,P[V],k,typeof M=="string");F=n.merge(F,H,k)}return k.allowSparse===!0?F:n.compact(F)},$T}var VT,jH;function fUe(){if(jH)return VT;jH=1;var n=hUe(),e=dUe(),t=kL();return VT={formats:t,parse:e,stringify:n},VT}var NH;function pUe(){if(NH)return tb;NH=1;var n=PPe();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,r=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,o=["<",">",'"',"`"," ","\r",`
`,"	"],s=["{","}","|","\\","^","`"].concat(o),a=["'"].concat(s),c=["%","/","?",";","#"].concat(a),h=["/","?","#"],m=255,y=/^[+a-z0-9A-Z_-]{0,63}$/,M=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},k={javascript:!0,"javascript:":!0},P={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},F=fUe();function j(G,Y,z){if(G&&typeof G=="object"&&G instanceof e)return G;var se=new e;return se.parse(G,Y,z),se}e.prototype.parse=function(G,Y,z){if(typeof G!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof G);var se=G.indexOf("?"),le=se!==-1&&se<G.indexOf("#")?"?":"#",me=G.split(le),de=/\\/g;me[0]=me[0].replace(de,"/"),G=me.join(le);var be=G;if(be=be.trim(),!z&&G.split("#").length===1){var Ee=r.exec(be);if(Ee)return this.path=be,this.href=be,this.pathname=Ee[1],Ee[2]?(this.search=Ee[2],Y?this.query=F.parse(this.search.substr(1)):this.query=this.search.substr(1)):Y&&(this.search="",this.query={}),this}var De=t.exec(be);if(De){De=De[0];var je=De.toLowerCase();this.protocol=je,be=be.substr(De.length)}if(z||De||be.match(/^\/\/[^@/]+@[^@/]+/)){var Ie=be.substr(0,2)==="//";Ie&&!(De&&k[De])&&(be=be.substr(2),this.slashes=!0)}if(!k[De]&&(Ie||De&&!P[De])){for(var Qe=-1,et=0;et<h.length;et++){var dt=be.indexOf(h[et]);dt!==-1&&(Qe===-1||dt<Qe)&&(Qe=dt)}var ke,we;Qe===-1?we=be.lastIndexOf("@"):we=be.lastIndexOf("@",Qe),we!==-1&&(ke=be.slice(0,we),be=be.slice(we+1),this.auth=decodeURIComponent(ke)),Qe=-1;for(var et=0;et<c.length;et++){var dt=be.indexOf(c[et]);dt!==-1&&(Qe===-1||dt<Qe)&&(Qe=dt)}Qe===-1&&(Qe=be.length),this.host=be.slice(0,Qe),be=be.slice(Qe),this.parseHost(),this.hostname=this.hostname||"";var ze=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ze)for(var xe=this.hostname.split(/\./),et=0,At=xe.length;et<At;et++){var it=xe[et];if(it&&!it.match(y)){for(var bt="",Bt=0,Ke=it.length;Bt<Ke;Bt++)it.charCodeAt(Bt)>127?bt+="x":bt+=it[Bt];if(!bt.match(y)){var Te=xe.slice(0,et),Se=xe.slice(et+1),Ne=it.match(M);Ne&&(Te.push(Ne[1]),Se.unshift(Ne[2])),Se.length&&(be="/"+Se.join(".")+be),this.hostname=Te.join(".");break}}}this.hostname.length>m?this.hostname="":this.hostname=this.hostname.toLowerCase(),ze||(this.hostname=n.toASCII(this.hostname));var ut=this.port?":"+this.port:"",rt=this.hostname||"";this.host=rt+ut,this.href+=this.host,ze&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),be[0]!=="/"&&(be="/"+be))}if(!x[je])for(var et=0,At=a.length;et<At;et++){var pt=a[et];if(be.indexOf(pt)!==-1){var Dt=encodeURIComponent(pt);Dt===pt&&(Dt=escape(pt)),be=be.split(pt).join(Dt)}}var Ot=be.indexOf("#");Ot!==-1&&(this.hash=be.substr(Ot),be=be.slice(0,Ot));var Jt=be.indexOf("?");if(Jt!==-1?(this.search=be.substr(Jt),this.query=be.substr(Jt+1),Y&&(this.query=F.parse(this.query)),be=be.slice(0,Jt)):Y&&(this.search="",this.query={}),be&&(this.pathname=be),P[je]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var ut=this.pathname||"",Tn=this.search||"";this.path=ut+Tn}return this.href=this.format(),this};function q(G){return typeof G=="string"&&(G=j(G)),G instanceof e?G.format():e.prototype.format.call(G)}e.prototype.format=function(){var G=this.auth||"";G&&(G=encodeURIComponent(G),G=G.replace(/%3A/i,":"),G+="@");var Y=this.protocol||"",z=this.pathname||"",se=this.hash||"",le=!1,me="";this.host?le=G+this.host:this.hostname&&(le=G+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(le+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(me=F.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var de=this.search||me&&"?"+me||"";return Y&&Y.substr(-1)!==":"&&(Y+=":"),this.slashes||(!Y||P[Y])&&le!==!1?(le="//"+(le||""),z&&z.charAt(0)!=="/"&&(z="/"+z)):le||(le=""),se&&se.charAt(0)!=="#"&&(se="#"+se),de&&de.charAt(0)!=="?"&&(de="?"+de),z=z.replace(/[?#]/g,function(be){return encodeURIComponent(be)}),de=de.replace("#","%23"),Y+le+z+de+se};function V(G,Y){return j(G,!1,!0).resolve(Y)}e.prototype.resolve=function(G){return this.resolveObject(j(G,!1,!0)).format()};function H(G,Y){return G?j(G,!1,!0).resolveObject(Y):Y}return e.prototype.resolveObject=function(G){if(typeof G=="string"){var Y=new e;Y.parse(G,!1,!0),G=Y}for(var z=new e,se=Object.keys(this),le=0;le<se.length;le++){var me=se[le];z[me]=this[me]}if(z.hash=G.hash,G.href==="")return z.href=z.format(),z;if(G.slashes&&!G.protocol){for(var de=Object.keys(G),be=0;be<de.length;be++){var Ee=de[be];Ee!=="protocol"&&(z[Ee]=G[Ee])}return P[z.protocol]&&z.hostname&&!z.pathname&&(z.pathname="/",z.path=z.pathname),z.href=z.format(),z}if(G.protocol&&G.protocol!==z.protocol){if(!P[G.protocol]){for(var De=Object.keys(G),je=0;je<De.length;je++){var Ie=De[je];z[Ie]=G[Ie]}return z.href=z.format(),z}if(z.protocol=G.protocol,!G.host&&!k[G.protocol]){for(var At=(G.pathname||"").split("/");At.length&&!(G.host=At.shift()););G.host||(G.host=""),G.hostname||(G.hostname=""),At[0]!==""&&At.unshift(""),At.length<2&&At.unshift(""),z.pathname=At.join("/")}else z.pathname=G.pathname;if(z.search=G.search,z.query=G.query,z.host=G.host||"",z.auth=G.auth,z.hostname=G.hostname||G.host,z.port=G.port,z.pathname||z.search){var Qe=z.pathname||"",et=z.search||"";z.path=Qe+et}return z.slashes=z.slashes||G.slashes,z.href=z.format(),z}var dt=z.pathname&&z.pathname.charAt(0)==="/",ke=G.host||G.pathname&&G.pathname.charAt(0)==="/",we=ke||dt||z.host&&G.pathname,ze=we,xe=z.pathname&&z.pathname.split("/")||[],At=G.pathname&&G.pathname.split("/")||[],it=z.protocol&&!P[z.protocol];if(it&&(z.hostname="",z.port=null,z.host&&(xe[0]===""?xe[0]=z.host:xe.unshift(z.host)),z.host="",G.protocol&&(G.hostname=null,G.port=null,G.host&&(At[0]===""?At[0]=G.host:At.unshift(G.host)),G.host=null),we=we&&(At[0]===""||xe[0]==="")),ke)z.host=G.host||G.host===""?G.host:z.host,z.hostname=G.hostname||G.hostname===""?G.hostname:z.hostname,z.search=G.search,z.query=G.query,xe=At;else if(At.length)xe||(xe=[]),xe.pop(),xe=xe.concat(At),z.search=G.search,z.query=G.query;else if(G.search!=null){if(it){z.host=xe.shift(),z.hostname=z.host;var bt=z.host&&z.host.indexOf("@")>0?z.host.split("@"):!1;bt&&(z.auth=bt.shift(),z.hostname=bt.shift(),z.host=z.hostname)}return z.search=G.search,z.query=G.query,(z.pathname!==null||z.search!==null)&&(z.path=(z.pathname?z.pathname:"")+(z.search?z.search:"")),z.href=z.format(),z}if(!xe.length)return z.pathname=null,z.search?z.path="/"+z.search:z.path=null,z.href=z.format(),z;for(var Bt=xe.slice(-1)[0],Ke=(z.host||G.host||xe.length>1)&&(Bt==="."||Bt==="..")||Bt==="",Te=0,Se=xe.length;Se>=0;Se--)Bt=xe[Se],Bt==="."?xe.splice(Se,1):Bt===".."?(xe.splice(Se,1),Te++):Te&&(xe.splice(Se,1),Te--);if(!we&&!ze)for(;Te--;Te)xe.unshift("..");we&&xe[0]!==""&&(!xe[0]||xe[0].charAt(0)!=="/")&&xe.unshift(""),Ke&&xe.join("/").substr(-1)!=="/"&&xe.push("");var Ne=xe[0]===""||xe[0]&&xe[0].charAt(0)==="/";if(it){z.hostname=Ne?"":xe.length?xe.shift():"",z.host=z.hostname;var bt=z.host&&z.host.indexOf("@")>0?z.host.split("@"):!1;bt&&(z.auth=bt.shift(),z.hostname=bt.shift(),z.host=z.hostname)}return we=we||z.host&&xe.length,we&&!Ne&&xe.unshift(""),xe.length>0?z.pathname=xe.join("/"):(z.pathname=null,z.path=null),(z.pathname!==null||z.search!==null)&&(z.path=(z.pathname?z.pathname:"")+(z.search?z.search:"")),z.auth=G.auth||z.auth,z.slashes=z.slashes||G.slashes,z.href=z.format(),z},e.prototype.parseHost=function(){var G=this.host,Y=i.exec(G);Y&&(Y=Y[0],Y!==":"&&(this.port=Y.substr(1)),G=G.substr(0,G.length-Y.length)),G&&(this.hostname=G)},tb.parse=j,tb.resolve=V,tb.resolveObject=H,tb.format=q,tb.Url=e,tb}var mUe=pUe();const GH=Xl(mUe);function Io(){var n="/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",e="370277aff056c0894d7ae34686219318414cc635",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",statementMap:{0:{start:{line:3,column:2},end:{line:16,column:5}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:60}},3:{start:{line:10,column:4},end:{line:10,column:27}},4:{start:{line:12,column:4},end:{line:12,column:13}},5:{start:{line:14,column:4},end:{line:14,column:95}},6:{start:{line:15,column:4},end:{line:15,column:21}},7:{start:{line:19,column:2},end:{line:19,column:34}},8:{start:{line:19,column:20},end:{line:19,column:34}},9:{start:{line:20,column:17},end:{line:20,column:42}},10:{start:{line:21,column:23},end:{line:21,column:57}},11:{start:{line:22,column:2},end:{line:26,column:3}},12:{start:{line:23,column:4},end:{line:23,column:41}},13:{start:{line:25,column:4},end:{line:25,column:69}},14:{start:{line:27,column:14},end:{line:27,column:35}},15:{start:{line:28,column:2},end:{line:28,column:24}},16:{start:{line:31,column:2},end:{line:31,column:30}},17:{start:{line:31,column:16},end:{line:31,column:30}},18:{start:{line:32,column:14},end:{line:32,column:31}},19:{start:{line:33,column:2},end:{line:33,column:57}},20:{start:{line:33,column:32},end:{line:33,column:55}}},fnMap:{0:{name:"loadJSON",decl:{start:{line:2,column:9},end:{line:2,column:17}},loc:{start:{line:2,column:41},end:{line:17,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:6,column:10},end:{line:6,column:11}},loc:{start:{line:6,column:24},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:20},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:11},end:{line:13,column:12}},loc:{start:{line:13,column:17},end:{line:16,column:3}},line:13},4:{name:"downloadGlyphsMetadata",decl:{start:{line:18,column:16},end:{line:18,column:38}},loc:{start:{line:18,column:56},end:{line:29,column:1}},line:18},5:{name:"downloadSpriteMetadata",decl:{start:{line:30,column:16},end:{line:30,column:38}},loc:{start:{line:30,column:52},end:{line:34,column:1}},line:30},6:{name:"(anonymous_6)",decl:{start:{line:33,column:20},end:{line:33,column:21}},loc:{start:{line:33,column:32},end:{line:33,column:55}},line:33}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:19,column:2},end:{line:19,column:34}},type:"if",locations:[{start:{line:19,column:2},end:{line:19,column:34}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:22,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:26,column:3}},{start:{line:24,column:9},end:{line:26,column:3}}],line:22},3:{loc:{start:{line:31,column:2},end:{line:31,column:30}},type:"if",locations:[{start:{line:31,column:2},end:{line:31,column:30}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/metadata.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEnB,SAAS,SAAS,KAAa,cAAmB,IAA8B;AAC9E,QAAM,KAAK;AAAA,IACT,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,CAAC,aAAa;AAClB,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,iCAAiC,GAAG;AAAA,IACtD;AACA,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,OAAG,IAAI;AAAA,EACT,CAAC,EACA,MAAM,MAAM;AACX,YAAQ,KAAK,+BAA+B,MAAM,2BAA2B,YAAY;AACzF,OAAG,YAAY;AAAA,EACjB,CAAC;AACL;AAEO,gBAAS,uBAAuB,aAAqB,IAA8B;AACxF,MAAG,CAAC,YAAa,QAAO,GAAG,CAAC,CAAC;AAI7B,QAAM,SAAS,OAAO,MAAM,WAAW;AACvC,QAAM,eAAe;AACrB,MAAG,OAAO,aAAa,cAAc;AACnC,WAAO,WAAW;AAAA,EACpB,OAAO;AACL,WAAO,WAAW,OAAO,SAAU,QAAQ,cAAc,OAAO;AAAA,EAClE;AACA,QAAM,MAAM,OAAO,OAAO,MAAM;AAEhC,WAAS,KAAK,CAAC,GAAG,EAAE;AACtB;AAEO,gBAAS,uBAAuB,SAAiB,IAA8B;AACpF,MAAG,CAAC,QAAS,QAAO,GAAG,CAAC,CAAC;AACzB,QAAM,MAAM,UAAU;AACtB,WAAS,KAAK,CAAC,GAAG,YAAU,GAAG,OAAO,KAAK,MAAM,CAAC,CAAC;AACrD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"370277aff056c0894d7ae34686219318414cc635"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Io=function(){return s},s}Io();function Cae(n,e,t){Io().f[0]++,Io().s[0]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(i=>{if(Io().f[1]++,Io().s[1]++,i.ok)Io().b[0][1]++;else throw Io().b[0][0]++,Io().s[2]++,new Error("Failed to load metadata for "+n);return Io().s[3]++,i.json()}).then(i=>{Io().f[2]++,Io().s[4]++,t(i)}).catch(()=>{Io().f[3]++,Io().s[5]++,console.warn("Can not load metadata for "+n+", using default value "+e),Io().s[6]++,t(e)})}function gUe(n,e){if(Io().f[4]++,Io().s[7]++,n)Io().b[1][1]++;else return Io().b[1][0]++,Io().s[8]++,e([]);const t=(Io().s[9]++,GH.parse(n)),i=(Io().s[10]++,"/%7Bfontstack%7D/%7Brange%7D.pbf");Io().s[11]++,t.pathname===i?(Io().b[2][0]++,Io().s[12]++,t.pathname="/fontstacks.json"):(Io().b[2][1]++,Io().s[13]++,t.pathname=t.pathname.replace(i,".json"));const r=(Io().s[14]++,GH.format(t));Io().s[15]++,Cae(r,[],e)}function yUe(n,e){if(Io().f[5]++,Io().s[16]++,n)Io().b[3][1]++;else return Io().b[3][0]++,Io().s[17]++,e([]);const t=(Io().s[18]++,n+".json");Io().s[19]++,Cae(t,{},i=>(Io().f[6]++,Io().s[20]++,e(Object.keys(i))))}function Rh(){var n="/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",e="f92fa2abb31199d99fd3ae02d967dc6702faf862",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",statementMap:{0:{start:{line:3,column:18},end:{line:3,column:47}},1:{start:{line:4,column:2},end:{line:4,column:70}},2:{start:{line:4,column:30},end:{line:4,column:68}},3:{start:{line:7,column:2},end:{line:7,column:71}},4:{start:{line:7,column:58},end:{line:7,column:69}},5:{start:{line:10,column:2},end:{line:10,column:71}},6:{start:{line:10,column:58},end:{line:10,column:69}}},fnMap:{0:{name:"diffMessages",decl:{start:{line:2,column:9},end:{line:2,column:21}},loc:{start:{line:2,column:47},end:{line:5,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:21},end:{line:4,column:22}},loc:{start:{line:4,column:30},end:{line:4,column:68}},line:4},2:{name:"undoMessages",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:54},end:{line:8,column:1}},line:6},3:{name:"(anonymous_3)",decl:{start:{line:7,column:51},end:{line:7,column:52}},loc:{start:{line:7,column:58},end:{line:7,column:69}},line:7},4:{name:"redoMessages",decl:{start:{line:9,column:16},end:{line:9,column:28}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},5:{name:"(anonymous_5)",decl:{start:{line:10,column:51},end:{line:10,column:52}},loc:{start:{line:10,column:58},end:{line:10,column:69}},line:10}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts"],names:[],mappings:"AAAA,SAAQ,YAAW;AAGnB,SAAS,aAAa,aAAiC,YAAgC;AACrF,QAAM,UAAU,KAAK,aAAa,UAAU;AAC5C,SAAO,QAAQ,IAAI,SAAO,IAAI,UAAU,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC;AAClE;AAEO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;AACO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f92fa2abb31199d99fd3ae02d967dc6702faf862"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Rh=function(){return s},s}Rh();function _ae(n,e){Rh().f[0]++;const t=(Rh().s[0]++,Zce(n,e));return Rh().s[1]++,t.map(i=>(Rh().f[1]++,Rh().s[2]++,i.command+" "+i.args.join(" ")))}function vUe(n,e){return Rh().f[2]++,Rh().s[3]++,_ae(n,e).map(t=>(Rh().f[3]++,Rh().s[4]++,"Undo "+t))}function bUe(n,e){return Rh().f[4]++,Rh().s[5]++,_ae(n,e).map(t=>(Rh().f[5]++,Rh().s[6]++,"Redo "+t))}function cc(){var n="/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",e="d72dae9738057e855ea98626011f8090b99877cc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",statementMap:{0:{start:{line:3,column:21},end:{line:3,column:50}},1:{start:{line:4,column:19},end:{line:4,column:55}},2:{start:{line:5,column:2},end:{line:8,column:3}},3:{start:{line:6,column:4},end:{line:6,column:44}},4:{start:{line:7,column:4},end:{line:7,column:75}},5:{start:{line:9,column:2},end:{line:9,column:18}},6:{start:{line:12,column:2},end:{line:12,column:41}},7:{start:{line:13,column:2},end:{line:23,column:3}},8:{start:{line:14,column:21},end:{line:17,column:6}},9:{start:{line:18,column:17},end:{line:18,column:38}},10:{start:{line:19,column:4},end:{line:19,column:43}},11:{start:{line:21,column:4},end:{line:21,column:63}},12:{start:{line:22,column:4},end:{line:22,column:28}}},fnMap:{0:{name:"getStyleUrlFromAddressbarAndRemoveItIfNeeded",decl:{start:{line:2,column:16},end:{line:2,column:60}},loc:{start:{line:2,column:63},end:{line:10,column:1}},line:2},1:{name:"loadStyleUrl",decl:{start:{line:11,column:22},end:{line:11,column:34}},loc:{start:{line:11,column:45},end:{line:24,column:1}},line:11}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAGX,gBAAS,+CAA8D;AAC5E,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,QAAM,WAAW,WAAW,aAAa,IAAI,OAAO;AACpD,MAAI,UAAU;AACZ,eAAW,aAAa,OAAO,OAAO;AACtC,WAAO,QAAQ,aAAa,CAAC,GAAG,SAAS,OAAO,WAAW,SAAS,CAAC;AAAA,EACvE;AACA,SAAO;AACT;AAEA,sBAAsB,aAAa,UAAqD;AACtF,UAAQ,IAAI,iBAAiB,QAAQ;AACrC,MAAI;AACF,UAAM,WAAW,MAAM,MAAM,UAAU;AAAA,MACrC,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC;AACD,UAAM,OAAO,MAAM,SAAS,KAAK;AACjC,WAAO,MAAM,oBAAoB,IAAI;AAAA,EACvC,QAAQ;AACN,YAAQ,KAAK,oCAAoC,QAAQ;AACzD,WAAO,MAAM;AAAA,EACf;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d72dae9738057e855ea98626011f8090b99877cc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return cc=function(){return s},s}cc();function CUe(){cc().f[0]++;const n=(cc().s[0]++,new URL(window.location.href)),e=(cc().s[1]++,n.searchParams.get("style"));return cc().s[2]++,e?(cc().b[0][0]++,cc().s[3]++,n.searchParams.delete("style"),cc().s[4]++,window.history.replaceState({},document.title,n.toString())):cc().b[0][1]++,cc().s[5]++,e}async function xae(n){cc().f[1]++,cc().s[6]++,console.log("Loading style",n),cc().s[7]++;try{const e=(cc().s[8]++,await fetch(n,{mode:"cors",credentials:"same-origin"})),t=(cc().s[9]++,await e.json());return cc().s[10]++,_d.ensureStyleValidity(t)}catch{return cc().s[11]++,console.warn("Could not fetch default style: "+n),cc().s[12]++,_d.emptyStyle}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var KD=function(n,e){return KD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])},KD(n,e)};function Mae(n,e){KD(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function _Ue(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function xUe(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,o=[],s;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(s)throw s.error}}return o}function MUe(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(xUe(arguments[e]));return n}var wae=(function(){function n(e,t){this.target=t,this.type=e}return n})(),wUe=(function(n){Mae(e,n);function e(t,i){var r=n.call(this,"error",i)||this;return r.message=t.message,r.error=t,r}return e})(wae),SUe=(function(n){Mae(e,n);function e(t,i,r){t===void 0&&(t=1e3),i===void 0&&(i="");var o=n.call(this,"close",r)||this;return o.wasClean=!0,o.code=t,o.reason=i,o}return e})(wae);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var EUe=function(){if(typeof WebSocket<"u")return WebSocket},OUe=function(n){return typeof n<"u"&&!!n&&n.CLOSING===2},nb={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0};(function(){function n(e,t,i){var r=this;i===void 0&&(i={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(o){r._debug("open event");var s=r._options.minUptime,a=s===void 0?nb.minUptime:s;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout(function(){return r._acceptOpen()},a),r._ws.binaryType=r._binaryType,r._messageQueue.forEach(function(c){return r._ws.send(c)}),r._messageQueue=[],r.onopen&&r.onopen(o),r._listeners.open.forEach(function(c){return r._callEventListener(o,c)})},this._handleMessage=function(o){r._debug("message event"),r.onmessage&&r.onmessage(o),r._listeners.message.forEach(function(s){return r._callEventListener(o,s)})},this._handleError=function(o){r._debug("error event",o.message),r._disconnect(void 0,o.message==="TIMEOUT"?"timeout":void 0),r.onerror&&r.onerror(o),r._debug("exec error listeners"),r._listeners.error.forEach(function(s){return r._callEventListener(o,s)}),r._connect()},this._handleClose=function(o){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(o),r._listeners.close.forEach(function(s){return r._callEventListener(o,s)})},this._url=e,this._protocols=t,this._options=i,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(n,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CONNECTING",{get:function(){return n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OPEN",{get:function(){return n.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSING",{get:function(){return n.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSED",{get:function(){return n.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(t,i){return typeof i=="string"?t+=i.length:i instanceof Blob?t+=i.size:t+=i.byteLength,t},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?n.CLOSED:n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),n.prototype.close=function(e,t){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,t)},n.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,t),this._connect())},n.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,i=t===void 0?nb.maxEnqueuedMessages:t;this._messageQueue.length<i&&(this._debug("enqueue",e),this._messageQueue.push(e))}},n.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},n.prototype.dispatchEvent=function(e){var t,i,r=this._listeners[e.type];if(r)try{for(var o=_Ue(r),s=o.next();!s.done;s=o.next()){var a=s.value;this._callEventListener(e,a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!0},n.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(i){return i!==t}))},n.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,MUe(["RWS>"],e))},n.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,i=t===void 0?nb.reconnectionDelayGrowFactor:t,r=e.minReconnectionDelay,o=r===void 0?nb.minReconnectionDelay:r,s=e.maxReconnectionDelay,a=s===void 0?nb.maxReconnectionDelay:s,c=0;return this._retryCount>0&&(c=o*Math.pow(i,this._retryCount-1),c>a&&(c=a)),this._debug("next delay",c),c},n.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},n.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var t=e();if(typeof t=="string")return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},n.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var t=this._options,i=t.maxRetries,r=i===void 0?nb.maxRetries:i,o=t.connectionTimeout,s=o===void 0?nb.connectionTimeout:o,a=t.WebSocket,c=a===void 0?EUe():a;if(this._retryCount>=r){this._debug("max retries reached",this._retryCount,">=",r);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!OUe(c))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(h){e._closeCalled||(e._debug("connect",{url:h,protocols:e._protocols}),e._ws=e._protocols?new c(h,e._protocols):new c(h),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},s))})}},n.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new wUe(Error("TIMEOUT"),this))},n.prototype._disconnect=function(e,t){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new SUe(e,t,this))}catch{}}},n.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},n.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},n.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},n.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},n.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},n})();function Sae(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts",e="511b7cd31edca7d05c4852901896ddb82085d1f5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts",statementMap:{0:{start:{line:7,column:18},end:{line:7,column:24}},1:{start:{line:10,column:4},end:{line:11,column:7}},2:{start:{line:12,column:17},end:{line:12,column:37}},3:{start:{line:13,column:17},end:{line:13,column:28}},4:{start:{line:14,column:4},end:{line:14,column:45}},5:{start:{line:15,column:4},end:{line:15,column:50}},6:{start:{line:16,column:4},end:{line:16,column:37}},7:{start:{line:19,column:4},end:{line:27,column:5}},8:{start:{line:20,column:23},end:{line:20,column:79}},9:{start:{line:21,column:19},end:{line:21,column:40}},10:{start:{line:22,column:23},end:{line:22,column:27}},11:{start:{line:23,column:6},end:{line:23,column:39}},12:{start:{line:24,column:6},end:{line:24,column:32}},13:{start:{line:26,column:6},end:{line:26,column:54}},14:{start:{line:30,column:23},end:{line:30,column:67}},15:{start:{line:31,column:4},end:{line:42,column:6}},16:{start:{line:32,column:6},end:{line:32,column:26}},17:{start:{line:32,column:19},end:{line:32,column:26}},18:{start:{line:33,column:6},end:{line:33,column:52}},19:{start:{line:34,column:24},end:{line:34,column:40}},20:{start:{line:35,column:6},end:{line:39,column:7}},21:{start:{line:36,column:8},end:{line:36,column:41}},22:{start:{line:38,column:8},end:{line:38,column:27}},23:{start:{line:40,column:27},end:{line:40,column:65}},24:{start:{line:41,column:6},end:{line:41,column:44}},25:{start:{line:45,column:4},end:{line:53,column:5}},26:{start:{line:46,column:23},end:{line:48,column:8}},27:{start:{line:49,column:19},end:{line:49,column:40}},28:{start:{line:50,column:6},end:{line:50,column:45}},29:{start:{line:52,column:6},end:{line:52,column:92}},30:{start:{line:57,column:22},end:{line:61,column:5}},31:{start:{line:62,column:15},end:{line:62,column:26}},32:{start:{line:63,column:4},end:{line:72,column:7}},33:{start:{line:71,column:6},end:{line:71,column:38}},34:{start:{line:71,column:17},end:{line:71,column:38}},35:{start:{line:73,column:4},end:{line:73,column:20}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:20},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:58},end:{line:10,column:59}},loc:{start:{line:10,column:64},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:15},end:{line:28,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:23},end:{line:43,column:3}},line:29},4:{name:"(anonymous_4)",decl:{start:{line:31,column:27},end:{line:31,column:28}},loc:{start:{line:31,column:34},end:{line:42,column:5}},line:31},5:{name:"(anonymous_5)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:25},end:{line:54,column:3}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:17},end:{line:74,column:3}},line:56},7:{name:"(anonymous_7)",decl:{start:{line:70,column:13},end:{line:70,column:14}},loc:{start:{line:70,column:29},end:{line:72,column:5}},line:70}},branchMap:{0:{loc:{start:{line:10,column:30},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:30},end:{line:10,column:53}},{start:{line:10,column:58},end:{line:11,column:5}}],line:10},1:{loc:{start:{line:32,column:6},end:{line:32,column:26}},type:"if",locations:[{start:{line:32,column:6},end:{line:32,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:32},2:{loc:{start:{line:45,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:53,column:5}},{start:{line:51,column:11},end:{line:53,column:5}}],line:45},3:{loc:{start:{line:71,column:6},end:{line:71,column:38}},type:"if",locations:[{start:{line:71,column:6},end:{line:71,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,OAAO,2BAA2B;AAO3B,aAAM,cAAqC;AAAA,EAEhD;AAAA,EACA;AAAA,EACA,gBAAoC;AAAA,EACpC;AAAA,EAEA,YAAY,MAA4B;AACtC,SAAK,qBAAqB,KAAK,uBAAuB,MAAM;AAAA,IAAC;AAC7D,UAAM,OAAO,OAAO,SAAS;AAC7B,UAAM,OAAO;AACb,SAAK,WAAW,UAAU,IAAI,IAAI,IAAI;AACtC,SAAK,eAAe,QAAQ,IAAI,IAAI,IAAI;AACxC,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAAA,EACjC;AAAA,EAEA,MAAM,OAAsB;AAC1B,QAAI;AACF,YAAM,WAAW,MAAM,MAAM,KAAK,WAAW,WAAW,EAAC,MAAM,OAAM,CAAC;AACtE,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,YAAM,WAAW;AACjB,WAAK,gBAAgB,SAAS,CAAC;AAC/B,WAAK,mBAAmB;AAAA,IAC1B,QAAQ;AACN,YAAM,IAAI,MAAM,8BAA8B;AAAA,IAChD;AAAA,EACF;AAAA,EAEA,qBAAqB;AACnB,UAAM,aAAa,IAAI,sBAAsB,KAAK,YAAY;AAC9D,eAAW,YAAY,OAAK;AAC1B,UAAG,CAAC,EAAE,KAAM;AACZ,cAAQ,IAAI,gCAAgC;AAC5C,UAAI,cAAc,MAAM;AACxB,UAAI;AACF,sBAAc,KAAK,MAAM,EAAE,IAAI;AAAA,MACjC,SAAQ,KAAK;AACX,gBAAQ,MAAM,GAAG;AAAA,MACnB;AACA,YAAM,eAAe,MAAM,oBAAoB,WAAW;AAC1D,WAAK,mBAAmB,YAAY;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,MAAM,iBAAoD;AACxD,QAAG,KAAK,eAAe;AACrB,YAAM,WAAW,MAAM,MAAM,KAAK,WAAW,aAAa,KAAK,eAAe;AAAA,QAC5E,MAAM;AAAA,MACR,CAAC;AACD,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,aAAO,MAAM,oBAAoB,IAAI;AAAA,IACvC,OAAO;AACL,YAAM,IAAI,MAAM,oEAAoE;AAAA,IACtF;AAAA,EACF;AAAA;AAAA,EAGA,KAAK,UAAoC;AACvC,UAAM,YAAY;AAAA,MAChB,MAAM;AAAA,QACJ,MAAM,oBAAoB,QAAQ;AAAA,MACpC;AAAA,IACF;AAEA,UAAM,KAAK,SAAS;AACpB,UAAM,KAAK,WAAW,aAAa,IAAI;AAAA,MACrC,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM;AAAA,IACR,CAAC,EACE,MAAM,SAAS,OAAO;AACrB,UAAG,MAAO,SAAQ,MAAM,KAAK;AAAA,IAC/B,CAAC;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"511b7cd31edca7d05c4852901896ddb82085d1f5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Sae=function(){return s},s}Sae();function di(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts",e="1506dd6f3469e4801b7fd940c02682bf4ad7b098",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts",statementMap:{0:{start:{line:4,column:22},end:{line:4,column:32}},1:{start:{line:5,column:20},end:{line:5,column:27}},2:{start:{line:6,column:20},end:{line:9,column:1}},3:{start:{line:10,column:24},end:{line:10,column:44}},4:{start:{line:12,column:2},end:{line:12,column:39}},5:{start:{line:15,column:17},end:{line:15,column:19}},6:{start:{line:16,column:2},end:{line:21,column:3}},7:{start:{line:16,column:15},end:{line:16,column:16}},8:{start:{line:17,column:16},end:{line:17,column:42}},9:{start:{line:18,column:4},end:{line:20,column:5}},10:{start:{line:19,column:6},end:{line:19,column:32}},11:{start:{line:22,column:2},end:{line:22,column:16}},12:{start:{line:25,column:16},end:{line:25,column:30}},13:{start:{line:26,column:2},end:{line:26,column:86}},14:{start:{line:29,column:2},end:{line:31,column:3}},15:{start:{line:30,column:4},end:{line:30,column:41}},16:{start:{line:32,column:16},end:{line:32,column:30}},17:{start:{line:33,column:18},end:{line:33,column:26}},18:{start:{line:34,column:2},end:{line:34,column:17}},19:{start:{line:37,column:2},end:{line:37,column:57}},20:{start:{line:47,column:4},end:{line:47,column:40}},21:{start:{line:51,column:4},end:{line:56,column:5}},22:{start:{line:51,column:17},end:{line:51,column:18}},23:{start:{line:52,column:18},end:{line:52,column:44}},24:{start:{line:53,column:6},end:{line:55,column:7}},25:{start:{line:54,column:8},end:{line:54,column:44}},26:{start:{line:60,column:4},end:{line:62,column:5}},27:{start:{line:61,column:6},end:{line:61,column:32}},28:{start:{line:63,column:20},end:{line:63,column:67}},29:{start:{line:64,column:22},end:{line:64,column:68}},30:{start:{line:65,column:4},end:{line:67,column:5}},31:{start:{line:66,column:6},end:{line:66,column:35}},32:{start:{line:68,column:4},end:{line:68,column:30}},33:{start:{line:72,column:4},end:{line:72,column:51}},34:{start:{line:73,column:16},end:{line:73,column:37}},35:{start:{line:74,column:19},end:{line:77,column:5}},36:{start:{line:75,column:6},end:{line:75,column:65}},37:{start:{line:76,column:6},end:{line:76,column:67}},38:{start:{line:78,column:4},end:{line:89,column:5}},39:{start:{line:79,column:6},end:{line:79,column:15}},40:{start:{line:81,column:6},end:{line:88,column:7}},41:{start:{line:84,column:8},end:{line:84,column:21}},42:{start:{line:85,column:8},end:{line:85,column:17}},43:{start:{line:87,column:8},end:{line:87,column:16}},44:{start:{line:90,column:4},end:{line:90,column:20}}},fnMap:{0:{name:"loadDefaultStyle",decl:{start:{line:11,column:16},end:{line:11,column:32}},loc:{start:{line:11,column:35},end:{line:13,column:1}},line:11},1:{name:"loadStoredStyles",decl:{start:{line:14,column:9},end:{line:14,column:25}},loc:{start:{line:14,column:28},end:{line:23,column:1}},line:14},2:{name:"isStyleKey",decl:{start:{line:24,column:9},end:{line:24,column:19}},loc:{start:{line:24,column:25},end:{line:27,column:1}},line:24},3:{name:"fromKey",decl:{start:{line:28,column:9},end:{line:28,column:16}},loc:{start:{line:28,column:22},end:{line:35,column:1}},line:28},4:{name:"styleKey",decl:{start:{line:36,column:9},end:{line:36,column:17}},loc:{start:{line:36,column:27},end:{line:38,column:1}},line:36},5:{name:"(anonymous_5)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:16},end:{line:48,column:3}},line:46},6:{name:"(anonymous_6)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:10},end:{line:57,column:3}},line:50},7:{name:"(anonymous_7)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:25},end:{line:69,column:3}},line:59},8:{name:"(anonymous_8)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:17},end:{line:91,column:3}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:74,column:19},end:{line:74,column:20}},loc:{start:{line:74,column:25},end:{line:77,column:5}},line:74}},branchMap:{0:{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:26,column:9},end:{line:26,column:85}},type:"binary-expr",locations:[{start:{line:26,column:9},end:{line:26,column:27}},{start:{line:26,column:31},end:{line:26,column:57}},{start:{line:26,column:61},end:{line:26,column:85}}],line:26},2:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},3:{loc:{start:{line:53,column:6},end:{line:55,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:55,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},4:{loc:{start:{line:60,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:60,column:4},end:{line:62,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},5:{loc:{start:{line:65,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:67,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},6:{loc:{start:{line:81,column:6},end:{line:88,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:88,column:7}},{start:{line:86,column:13},end:{line:88,column:7}}],line:81},7:{loc:{start:{line:81,column:10},end:{line:83,column:81}},type:"binary-expr",locations:[{start:{line:81,column:10},end:{line:81,column:35}},{start:{line:81,column:40},end:{line:81,column:53}},{start:{line:82,column:6},end:{line:82,column:21}},{start:{line:83,column:6},end:{line:83,column:37}},{start:{line:83,column:41},end:{line:83,column:80}}],line:81}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,oBAAmB;AAC3B,OAAO,mBAAmB;AAG1B,MAAM,gBAAgB;AACtB,MAAM,cAAc;AACpB,MAAM,cAAc;AAAA,EAClB,QAAQ,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AAAA,EAChD,aAAa,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AACvD;AAEA,MAAM,kBAAkB,cAAc,CAAC,EAAE;AAGlC,gBAAS,mBAAsD;AACpE,SAAO,aAAa,eAAe;AACrC;AAGA,SAAS,mBAAmB;AAC1B,QAAM,SAAS,CAAC;AAChB,WAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,UAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,QAAG,WAAW,GAAI,GAAG;AACnB,aAAO,KAAK,QAAQ,GAAI,CAAC;AAAA,IAC3B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,WAAW,KAAa;AAC/B,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,SAAO,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM,iBAAiB,MAAM,CAAC,MAAM;AAC1E;AAGA,SAAS,QAAQ,KAAa;AAC5B,MAAG,CAAC,WAAW,GAAG,GAAG;AACnB,UAAM;AAAA,EACR;AAEA,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,QAAM,UAAU,MAAM,CAAC;AACvB,SAAO;AACT;AAGA,SAAS,SAAS,SAAiB;AACjC,SAAO,CAAC,eAAe,aAAa,OAAO,EAAE,KAAK,GAAG;AACvD;AAGO,aAAM,WAAkC;AAAA;AAAA;AAAA;AAAA,EAI7C;AAAA;AAAA;AAAA,EAIA,cAAc;AACZ,SAAK,YAAY,iBAAiB;AAAA,EACpC;AAAA;AAAA,EAGA,QAAQ;AACN,aAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,YAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,UAAG,IAAI,WAAW,aAAa,GAAG;AAChC,eAAO,aAAa,WAAW,GAAG;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGA,MAAM,iBAAoD;AACxD,QAAG,KAAK,UAAU,WAAW,GAAG;AAC9B,aAAO,iBAAiB;AAAA,IAC1B;AACA,UAAM,UAAU,OAAO,aAAa,QAAQ,YAAY,MAAM;AAC9D,UAAM,YAAY,OAAO,aAAa,QAAQ,SAAS,OAAO,CAAC;AAE/D,QAAI,WAAW;AACb,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AACA,WAAO,iBAAiB;AAAA,EAC1B;AAAA;AAAA,EAGA,KAAK,UAAoC;AACvC,eAAW,MAAM,oBAAoB,QAAQ;AAC7C,UAAM,MAAM,SAAS,SAAS,EAAE;AAEhC,UAAM,SAAS,MAAM;AACnB,aAAO,aAAa,QAAQ,KAAK,KAAK,UAAU,QAAQ,CAAC;AACzD,aAAO,aAAa,QAAQ,YAAY,QAAQ,SAAS,EAAE;AAAA,IAC7D;AAEA,QAAI;AACF,aAAO;AAAA,IACT,SAAS,GAAG;AAEV,UAAI,aAAa,iBACf,EAAE,SAAS;AAAA,MACX,EAAE,SAAS;AAAA,MACX,EAAE,SAAS,wBACX,EAAE,SAAS,+BACV;AACD,aAAK,MAAM;AACX,eAAO;AAAA,MACT,OAAO;AACL,cAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1506dd6f3469e4801b7fd940c02682bf4ad7b098"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return di=function(){return s},s}di();const H6=(di().s[0]++,"maputnik"),Eae=(di().s[1]++,"style"),WH=(di().s[2]++,{latest:[H6,"latest_style"].join(":")}),BUe=(di().s[3]++,Aae[0].url);function QH(){return di().f[0]++,di().s[4]++,xae(BUe)}function IUe(){di().f[1]++;const n=(di().s[5]++,[]);di().s[6]++;for(let e=(di().s[7]++,0);e<window.localStorage.length;e++){const t=(di().s[8]++,window.localStorage.key(e));di().s[9]++,Oae(t)?(di().b[0][0]++,di().s[10]++,n.push(kUe(t))):di().b[0][1]++}return di().s[11]++,n}function Oae(n){di().f[2]++;const e=(di().s[12]++,n.split(":"));return di().s[13]++,di().b[1][0]++,e.length===3&&(di().b[1][1]++,e[0]===H6)&&(di().b[1][2]++,e[1]===Eae)}function kUe(n){if(di().f[3]++,di().s[14]++,Oae(n))di().b[2][1]++;else throw di().b[2][0]++,di().s[15]++,"Key is not a valid style key";const e=(di().s[16]++,n.split(":")),t=(di().s[17]++,e[2]);return di().s[18]++,t}function qH(n){return di().f[4]++,di().s[19]++,[H6,Eae,n].join(":")}class TUe{mapStyles;constructor(){di().f[5]++,di().s[20]++,this.mapStyles=IUe()}purge(){di().f[6]++,di().s[21]++;for(let e=(di().s[22]++,0);e<window.localStorage.length;e++){const t=(di().s[23]++,window.localStorage.key(e));di().s[24]++,t.startsWith(H6)?(di().b[3][0]++,di().s[25]++,window.localStorage.removeItem(t)):di().b[3][1]++}}async getLatestStyle(){if(di().f[7]++,di().s[26]++,this.mapStyles.length===0)return di().b[4][0]++,di().s[27]++,QH();di().b[4][1]++;const e=(di().s[28]++,window.localStorage.getItem(WH.latest)),t=(di().s[29]++,window.localStorage.getItem(qH(e)));return di().s[30]++,t?(di().b[5][0]++,di().s[31]++,JSON.parse(t)):(di().b[5][1]++,di().s[32]++,QH())}save(e){di().f[8]++,di().s[33]++,e=_d.ensureStyleValidity(e);const t=(di().s[34]++,qH(e.id));di().s[35]++;const i=()=>{di().f[9]++,di().s[36]++,window.localStorage.setItem(t,JSON.stringify(e)),di().s[37]++,window.localStorage.setItem(WH.latest,e.id)};di().s[38]++;try{di().s[39]++,i()}catch(r){if(di().s[40]++,di().b[7][0]++,r instanceof DOMException&&(di().b[7][1]++,r.code===22||(di().b[7][2]++,r.code===1014)||(di().b[7][3]++,r.name==="QuotaExceededError")||(di().b[7][4]++,r.name==="NS_ERROR_DOM_QUOTA_REACHED")))di().b[6][0]++,di().s[41]++,this.purge(),di().s[42]++,i();else throw di().b[6][1]++,di().s[43]++,r}return di().s[44]++,e}}function Ih(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts",e="2de8d55bfe17551e08818e39ce7b23b7139f970e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:65}},1:{start:{line:6,column:22},end:{line:6,column:118}},2:{start:{line:8,column:2},end:{line:20,column:3}},3:{start:{line:9,column:26},end:{line:11,column:6}},4:{start:{line:10,column:40},end:{line:10,column:81}},5:{start:{line:12,column:4},end:{line:17,column:5}},6:{start:{line:13,column:6},end:{line:13,column:33}},7:{start:{line:14,column:6},end:{line:14,column:33}},8:{start:{line:16,column:6},end:{line:16,column:36}},9:{start:{line:19,column:4},end:{line:19,column:34}},10:{start:{line:21,column:22},end:{line:21,column:100}},11:{start:{line:22,column:2},end:{line:22,column:66}},12:{start:{line:23,column:2},end:{line:23,column:20}}},fnMap:{0:{name:"createStyleStore",decl:{start:{line:4,column:22},end:{line:4,column:38}},loc:{start:{line:4,column:55},end:{line:24,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:10,column:26},end:{line:10,column:27}},loc:{start:{line:10,column:40},end:{line:10,column:81}},line:10}},branchMap:{0:{loc:{start:{line:6,column:22},end:{line:6,column:118}},type:"binary-expr",locations:[{start:{line:6,column:22},end:{line:6,column:30}},{start:{line:6,column:34},end:{line:6,column:118}}],line:6},1:{loc:{start:{line:8,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:8,column:2},end:{line:20,column:3}},{start:{line:18,column:9},end:{line:20,column:3}}],line:8},2:{loc:{start:{line:21,column:22},end:{line:21,column:100}},type:"cond-expr",locations:[{start:{line:21,column:36},end:{line:21,column:64}},{start:{line:21,column:67},end:{line:21,column:100}}],line:21}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts"],names:[],mappings:"AAEA,SAAS,8CAA8C,oBAAoB;AAC3E,SAAS,qBAAqB;AAC9B,SAAS,kBAAkB;AAE3B,sBAAsB,iBAAiB,gBAA8D;AACnG,QAAM,WAAW,6CAA6C;AAC9D,QAAM,cAAc,YAAY,OAAO,QAAQ,0BAA0B,WAAW,+BAA+B;AACnH,MAAI;AACJ,MAAI,OAAoD;AACtD,UAAM,gBAAgB,IAAI,cAAc;AAAA,MACtC,oBAAoB,CAAA,aAAY,eAAe,UAAU,EAAC,MAAM,MAAK,CAAC;AAAA,IACxE,CAAC;AACD,QAAI;AACF,YAAM,cAAc,KAAK;AACzB,mBAAa;AAAA,IACf,QAAQ;AACN,mBAAa,IAAI,WAAW;AAAA,IAC9B;AAAA,EACF,OAAO;AACL,iBAAa,IAAI,WAAW;AAAA,EAC9B;AACA,QAAM,cAAc,cAAc,MAAM,aAAa,QAAQ,IAAI,MAAM,WAAW,eAAe;AACjG,iBAAe,aAAa,EAAC,aAAa,MAAM,MAAM,MAAK,CAAC;AAC5D,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2de8d55bfe17551e08818e39ce7b23b7139f970e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ih=function(){return s},s}Ih();async function RUe(n){Ih().f[0]++;const e=(Ih().s[0]++,CUe()),t=(Ih().s[1]++,Ih().b[0][0]++,e&&(Ih().b[0][1]++,window.confirm("Load style from URL: "+e+" and discard current changes?")));let i;Ih().s[2]++,Ih().b[1][1]++,Ih().s[9]++,i=new TUe;const r=(Ih().s[10]++,t?(Ih().b[2][0]++,await xae(e)):(Ih().b[2][1]++,await i.getLatestStyle()));return Ih().s[11]++,n(r,{initialLoad:!0,save:!1}),Ih().s[12]++,i}function Ga(){var n="/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",e="2443d70bd38cc3b176918d5f84a8a7d35a1ef2fe",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:38}},1:{start:{line:6,column:4},end:{line:6,column:50}},2:{start:{line:9,column:4},end:{line:9,column:53}},3:{start:{line:12,column:4},end:{line:12,column:43}},4:{start:{line:15,column:4},end:{line:15,column:66}},5:{start:{line:16,column:4},end:{line:16,column:34}},6:{start:{line:17,column:4},end:{line:17,column:22}},7:{start:{line:20,column:4},end:{line:22,column:5}},8:{start:{line:21,column:6},end:{line:21,column:24}},9:{start:{line:23,column:4},end:{line:23,column:24}},10:{start:{line:26,column:4},end:{line:28,column:5}},11:{start:{line:27,column:6},end:{line:27,column:24}},12:{start:{line:29,column:4},end:{line:29,column:24}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:37},end:{line:7,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:10,column:3}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:16},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:24},end:{line:18,column:3}},line:14},4:{name:"(anonymous_4)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:9},end:{line:24,column:3}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:9},end:{line:30,column:3}},line:25}},branchMap:{0:{loc:{start:{line:4,column:14},end:{line:4,column:35}},type:"default-arg",locations:[{start:{line:4,column:33},end:{line:4,column:35}}],line:4},1:{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/revisions.ts"],names:[],mappings:"AAEO,aAAM,cAAc;AAAA,EACzB;AAAA,EACA;AAAA,EAGA,YAAY,mBAAiB,CAAC,GAAG;AAC/B,SAAK,YAAY;AACjB,SAAK,aAAa,iBAAiB,SAAS;AAAA,EAC9C;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,UAAU,KAAK,UAAU,SAAS,CAAC;AAAA,EACjD;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,UAAU,KAAK,UAAU;AAAA,EACvC;AAAA,EAEA,YAAY,UAAoC;AAG9C,SAAK,YAAY,KAAK,UAAU,MAAM,GAAG,KAAK,aAAa,CAAC;AAE5D,SAAK,UAAU,KAAK,QAAQ;AAC5B,SAAK;AAAA,EAEP;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,GAAG;AACtB,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,KAAK,UAAU,SAAS,GAAG;AAC9C,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2443d70bd38cc3b176918d5f84a8a7d35a1ef2fe"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ga=function(){return s},s}Ga();class DUe{revisions;currentIdx;constructor(e=(Ga().b[0][0]++,[])){Ga().f[0]++,Ga().s[0]++,this.revisions=e,Ga().s[1]++,this.currentIdx=e.length-1}get latest(){return Ga().f[1]++,Ga().s[2]++,this.revisions[this.revisions.length-1]}get current(){return Ga().f[2]++,Ga().s[3]++,this.revisions[this.currentIdx]}addRevision(e){Ga().f[3]++,Ga().s[4]++,this.revisions=this.revisions.slice(0,this.currentIdx+1),Ga().s[5]++,this.revisions.push(e),Ga().s[6]++,this.currentIdx++}undo(){return Ga().f[4]++,Ga().s[7]++,this.currentIdx>0?(Ga().b[1][0]++,Ga().s[8]++,this.currentIdx--):Ga().b[1][1]++,Ga().s[9]++,this.current}redo(){return Ga().f[5]++,Ga().s[10]++,this.currentIdx<this.revisions.length-1?(Ga().b[2][0]++,Ga().s[11]++,this.currentIdx++):Ga().b[2][1]++,Ga().s[12]++,this.current}}var HT,YH;function PUe(){if(YH)return HT;YH=1;var n="Expected a function",e=NaN,t="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,c=typeof window=="object"&&window&&window.Object===Object&&window,h=typeof self=="object"&&self&&self.Object===Object&&self,m=c||h||Function("return this")(),y=Object.prototype,M=y.toString,x=Math.max,k=Math.min,P=function(){return m.Date.now()};function F(Y,z,se){var le,me,de,be,Ee,De,je=0,Ie=!1,Qe=!1,et=!0;if(typeof Y!="function")throw new TypeError(n);z=G(z)||0,q(se)&&(Ie=!!se.leading,Qe="maxWait"in se,de=Qe?x(G(se.maxWait)||0,z):de,et="trailing"in se?!!se.trailing:et);function dt(Ke){var Te=le,Se=me;return le=me=void 0,je=Ke,be=Y.apply(Se,Te),be}function ke(Ke){return je=Ke,Ee=setTimeout(xe,z),Ie?dt(Ke):be}function we(Ke){var Te=Ke-De,Se=Ke-je,Ne=z-Te;return Qe?k(Ne,de-Se):Ne}function ze(Ke){var Te=Ke-De,Se=Ke-je;return De===void 0||Te>=z||Te<0||Qe&&Se>=de}function xe(){var Ke=P();if(ze(Ke))return At(Ke);Ee=setTimeout(xe,we(Ke))}function At(Ke){return Ee=void 0,et&&le?dt(Ke):(le=me=void 0,be)}function it(){Ee!==void 0&&clearTimeout(Ee),je=0,le=De=me=Ee=void 0}function bt(){return Ee===void 0?be:At(P())}function Bt(){var Ke=P(),Te=ze(Ke);if(le=arguments,me=this,De=Ke,Te){if(Ee===void 0)return ke(De);if(Qe)return Ee=setTimeout(xe,z),dt(De)}return Ee===void 0&&(Ee=setTimeout(xe,z)),be}return Bt.cancel=it,Bt.flush=bt,Bt}function j(Y,z,se){var le=!0,me=!0;if(typeof Y!="function")throw new TypeError(n);return q(se)&&(le="leading"in se?!!se.leading:le,me="trailing"in se?!!se.trailing:me),F(Y,z,{leading:le,maxWait:z,trailing:me})}function q(Y){var z=typeof Y;return!!Y&&(z=="object"||z=="function")}function V(Y){return!!Y&&typeof Y=="object"}function H(Y){return typeof Y=="symbol"||V(Y)&&M.call(Y)==t}function G(Y){if(typeof Y=="number")return Y;if(H(Y))return e;if(q(Y)){var z=typeof Y.valueOf=="function"?Y.valueOf():Y;Y=q(z)?z+"":z}if(typeof Y!="string")return Y===0?Y:+Y;Y=Y.replace(i,"");var se=o.test(Y);return se||s.test(Y)?a(Y.slice(2),se?2:8):r.test(Y)?e:+Y}return HT=j,HT}var UUe=PUe();const KUe=Xl(UUe);var n3={exports:{}};n3.exports;var $H;function LUe(){return $H||($H=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=1,o=2,s=9007199254740991,a="[object Arguments]",c="[object Array]",h="[object AsyncFunction]",m="[object Boolean]",y="[object Date]",M="[object Error]",x="[object Function]",k="[object GeneratorFunction]",P="[object Map]",F="[object Number]",j="[object Null]",q="[object Object]",V="[object Promise]",H="[object Proxy]",G="[object RegExp]",Y="[object Set]",z="[object String]",se="[object Symbol]",le="[object Undefined]",me="[object WeakMap]",de="[object ArrayBuffer]",be="[object DataView]",Ee="[object Float32Array]",De="[object Float64Array]",je="[object Int8Array]",Ie="[object Int16Array]",Qe="[object Int32Array]",et="[object Uint8Array]",dt="[object Uint8ClampedArray]",ke="[object Uint16Array]",we="[object Uint32Array]",ze=/[\\^$.*+?()[\]{}|]/g,xe=/^\[object .+?Constructor\]$/,At=/^(?:0|[1-9]\d*)$/,it={};it[Ee]=it[De]=it[je]=it[Ie]=it[Qe]=it[et]=it[dt]=it[ke]=it[we]=!0,it[a]=it[c]=it[de]=it[m]=it[be]=it[y]=it[M]=it[x]=it[P]=it[F]=it[q]=it[G]=it[Y]=it[z]=it[me]=!1;var bt=typeof window=="object"&&window&&window.Object===Object&&window,Bt=typeof self=="object"&&self&&self.Object===Object&&self,Ke=bt||Bt||Function("return this")(),Te=e&&!e.nodeType&&e,Se=Te&&!0&&n&&!n.nodeType&&n,Ne=Se&&Se.exports===Te,ut=Ne&&bt.process,rt=(function(){try{return ut&&ut.binding&&ut.binding("util")}catch{}})(),pt=rt&&rt.isTypedArray;function Dt(X,ve){for(var $e=-1,wt=X==null?0:X.length,ei=0,Bn=[];++$e<wt;){var _i=X[$e];ve(_i,$e,X)&&(Bn[ei++]=_i)}return Bn}function Ot(X,ve){for(var $e=-1,wt=ve.length,ei=X.length;++$e<wt;)X[ei+$e]=ve[$e];return X}function Jt(X,ve){for(var $e=-1,wt=X==null?0:X.length;++$e<wt;)if(ve(X[$e],$e,X))return!0;return!1}function Tn(X,ve){for(var $e=-1,wt=Array(X);++$e<X;)wt[$e]=ve($e);return wt}function Ln(X){return function(ve){return X(ve)}}function ii(X,ve){return X.has(ve)}function wn(X,ve){return X?.[ve]}function Rn(X){var ve=-1,$e=Array(X.size);return X.forEach(function(wt,ei){$e[++ve]=[ei,wt]}),$e}function gn(X,ve){return function($e){return X(ve($e))}}function Yn(X){var ve=-1,$e=Array(X.size);return X.forEach(function(wt){$e[++ve]=wt}),$e}var Dn=Array.prototype,Tt=Function.prototype,_e=Object.prototype,oe=Ke["__core-js_shared__"],ee=Tt.toString,ne=_e.hasOwnProperty,ue=(function(){var X=/[^.]+$/.exec(oe&&oe.keys&&oe.keys.IE_PROTO||"");return X?"Symbol(src)_1."+X:""})(),ye=_e.toString,Ue=RegExp("^"+ee.call(ne).replace(ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ve=Ne?Ke.Buffer:void 0,lt=Ke.Symbol,ge=Ke.Uint8Array,Be=_e.propertyIsEnumerable,v=Dn.splice,yt=lt?lt.toStringTag:void 0,Mt=Object.getOwnPropertySymbols,Pt=Ve?Ve.isBuffer:void 0,st=gn(Object.keys,Object),fn=qr(Ke,"DataView"),Fn=qr(Ke,"Map"),pn=qr(Ke,"Promise"),$n=qr(Ke,"Set"),Zn=qr(Ke,"WeakMap"),ai=qr(Object,"create"),Hi=Go(fn),Ti=Go(Fn),tr=Go(pn),oi=Go($n),Pi=Go(Zn),Zt=lt?lt.prototype:void 0,pr=Zt?Zt.valueOf:void 0;function Zi(X){var ve=-1,$e=X==null?0:X.length;for(this.clear();++ve<$e;){var wt=X[ve];this.set(wt[0],wt[1])}}function ea(){this.__data__=ai?ai(null):{},this.size=0}function no(X){var ve=this.has(X)&&delete this.__data__[X];return this.size-=ve?1:0,ve}function sn(X){var ve=this.__data__;if(ai){var $e=ve[X];return $e===i?void 0:$e}return ne.call(ve,X)?ve[X]:void 0}function Ci(X){var ve=this.__data__;return ai?ve[X]!==void 0:ne.call(ve,X)}function Ui(X,ve){var $e=this.__data__;return this.size+=this.has(X)?0:1,$e[X]=ai&&ve===void 0?i:ve,this}Zi.prototype.clear=ea,Zi.prototype.delete=no,Zi.prototype.get=sn,Zi.prototype.has=Ci,Zi.prototype.set=Ui;function nr(X){var ve=-1,$e=X==null?0:X.length;for(this.clear();++ve<$e;){var wt=X[ve];this.set(wt[0],wt[1])}}function Jl(){this.__data__=[],this.size=0}function Al(X){var ve=this.__data__,$e=xs(ve,X);if($e<0)return!1;var wt=ve.length-1;return $e==wt?ve.pop():v.call(ve,$e,1),--this.size,!0}function Ki(X){var ve=this.__data__,$e=xs(ve,X);return $e<0?void 0:ve[$e][1]}function $a(X){return xs(this.__data__,X)>-1}function hl(X,ve){var $e=this.__data__,wt=xs($e,X);return wt<0?(++this.size,$e.push([X,ve])):$e[wt][1]=ve,this}nr.prototype.clear=Jl,nr.prototype.delete=Al,nr.prototype.get=Ki,nr.prototype.has=$a,nr.prototype.set=hl;function fo(X){var ve=-1,$e=X==null?0:X.length;for(this.clear();++ve<$e;){var wt=X[ve];this.set(wt[0],wt[1])}}function Qs(){this.size=0,this.__data__={hash:new Zi,map:new(Fn||nr),string:new Zi}}function Kl(X){var ve=Ds(this,X).delete(X);return this.size-=ve?1:0,ve}function io(X){return Ds(this,X).get(X)}function As(X){return Ds(this,X).has(X)}function pa(X,ve){var $e=Ds(this,X),wt=$e.size;return $e.set(X,ve),this.size+=$e.size==wt?0:1,this}fo.prototype.clear=Qs,fo.prototype.delete=Kl,fo.prototype.get=io,fo.prototype.has=As,fo.prototype.set=pa;function Dr(X){var ve=-1,$e=X==null?0:X.length;for(this.__data__=new fo;++ve<$e;)this.add(X[ve])}function Ll(X){return this.__data__.set(X,i),this}function Da(X){return this.__data__.has(X)}Dr.prototype.add=Dr.prototype.push=Ll,Dr.prototype.has=Da;function qs(X){var ve=this.__data__=new nr(X);this.size=ve.size}function Sl(){this.__data__=new nr,this.size=0}function eu(X){var ve=this.__data__,$e=ve.delete(X);return this.size=ve.size,$e}function $A(X){return this.__data__.get(X)}function Vc(X){return this.__data__.has(X)}function mc(X,ve){var $e=this.__data__;if($e instanceof nr){var wt=$e.__data__;if(!Fn||wt.length<t-1)return wt.push([X,ve]),this.size=++$e.size,this;$e=this.__data__=new fo(wt)}return $e.set(X,ve),this.size=$e.size,this}qs.prototype.clear=Sl,qs.prototype.delete=eu,qs.prototype.get=$A,qs.prototype.has=Vc,qs.prototype.set=mc;function ma(X,ve){var $e=Eo(X),wt=!$e&&Ro(X),ei=!$e&&!wt&&Pr(X),Bn=!$e&&!wt&&!ei&&aa(X),_i=$e||wt||ei||Bn,zi=_i?Tn(X.length,String):[],Ri=zi.length;for(var Ii in X)ne.call(X,Ii)&&!(_i&&(Ii=="length"||ei&&(Ii=="offset"||Ii=="parent")||Bn&&(Ii=="buffer"||Ii=="byteLength"||Ii=="byteOffset")||dl(Ii,Ri)))&&zi.push(Ii);return zi}function xs(X,ve){for(var $e=X.length;$e--;)if(Ps(X[$e][0],ve))return $e;return-1}function gc(X,ve,$e){var wt=ve(X);return Eo(X)?wt:Ot(wt,$e(X))}function tu(X){return X==null?X===void 0?le:j:yt&&yt in Object(X)?Yi(X):Va(X)}function yc(X){return lr(X)&&tu(X)==a}function nu(X,ve,$e,wt,ei){return X===ve?!0:X==null||ve==null||!lr(X)&&!lr(ve)?X!==X&&ve!==ve:Fl(X,ve,$e,wt,nu,ei)}function Fl(X,ve,$e,wt,ei,Bn){var _i=Eo(X),zi=Eo(ve),Ri=_i?c:Vo(X),Ii=zi?c:Vo(ve);Ri=Ri==a?q:Ri,Ii=Ii==a?q:Ii;var mr=Ri==q,Tr=Ii==q,ji=Ri==Ii;if(ji&&Pr(X)){if(!Pr(ve))return!1;_i=!0,mr=!1}if(ji&&!mr)return Bn||(Bn=new qs),_i||aa(X)?ru(X,ve,$e,wt,ei,Bn):Hc(X,ve,Ri,$e,wt,ei,Bn);if(!($e&r)){var ur=mr&&ne.call(X,"__wrapped__"),Hr=Tr&&ne.call(ve,"__wrapped__");if(ur||Hr){var ws=ur?X.value():X,gr=Hr?ve.value():ve;return Bn||(Bn=new qs),ei(ws,gr,$e,wt,Bn)}}return ji?(Bn||(Bn=new qs),Hu(X,ve,$e,wt,ei,Bn)):!1}function VA(X){if(!Ms(X)||sr(X))return!1;var ve=Zo(X)?Ue:xe;return ve.test(Go(X))}function ga(X){return lr(X)&&Wo(X.length)&&!!it[tu(X)]}function iu(X){if(!El(X))return st(X);var ve=[];for(var $e in Object(X))ne.call(X,$e)&&$e!="constructor"&&ve.push($e);return ve}function ru(X,ve,$e,wt,ei,Bn){var _i=$e&r,zi=X.length,Ri=ve.length;if(zi!=Ri&&!(_i&&Ri>zi))return!1;var Ii=Bn.get(X);if(Ii&&Bn.get(ve))return Ii==ve;var mr=-1,Tr=!0,ji=$e&o?new Dr:void 0;for(Bn.set(X,ve),Bn.set(ve,X);++mr<zi;){var ur=X[mr],Hr=ve[mr];if(wt)var ws=_i?wt(Hr,ur,mr,ve,X,Bn):wt(ur,Hr,mr,X,ve,Bn);if(ws!==void 0){if(ws)continue;Tr=!1;break}if(ji){if(!Jt(ve,function(gr,Ha){if(!ii(ji,Ha)&&(ur===gr||ei(ur,gr,$e,wt,Bn)))return ji.push(Ha)})){Tr=!1;break}}else if(!(ur===Hr||ei(ur,Hr,$e,wt,Bn))){Tr=!1;break}}return Bn.delete(X),Bn.delete(ve),Tr}function Hc(X,ve,$e,wt,ei,Bn,_i){switch($e){case be:if(X.byteLength!=ve.byteLength||X.byteOffset!=ve.byteOffset)return!1;X=X.buffer,ve=ve.buffer;case de:return!(X.byteLength!=ve.byteLength||!Bn(new ge(X),new ge(ve)));case m:case y:case F:return Ps(+X,+ve);case M:return X.name==ve.name&&X.message==ve.message;case G:case z:return X==ve+"";case P:var zi=Rn;case Y:var Ri=wt&r;if(zi||(zi=Yn),X.size!=ve.size&&!Ri)return!1;var Ii=_i.get(X);if(Ii)return Ii==ve;wt|=o,_i.set(X,ve);var mr=ru(zi(X),zi(ve),wt,ei,Bn,_i);return _i.delete(X),mr;case se:if(pr)return pr.call(X)==pr.call(ve)}return!1}function Hu(X,ve,$e,wt,ei,Bn){var _i=$e&r,zi=Pa(X),Ri=zi.length,Ii=Pa(ve),mr=Ii.length;if(Ri!=mr&&!_i)return!1;for(var Tr=Ri;Tr--;){var ji=zi[Tr];if(!(_i?ji in ve:ne.call(ve,ji)))return!1}var ur=Bn.get(X);if(ur&&Bn.get(ve))return ur==ve;var Hr=!0;Bn.set(X,ve),Bn.set(ve,X);for(var ws=_i;++Tr<Ri;){ji=zi[Tr];var gr=X[ji],Ha=ve[ji];if(wt)var vc=_i?wt(Ha,gr,ji,ve,X,Bn):wt(gr,Ha,ji,X,ve,Bn);if(!(vc===void 0?gr===Ha||ei(gr,Ha,$e,wt,Bn):vc)){Hr=!1;break}ws||(ws=ji=="constructor")}if(Hr&&!ws){var _u=X.constructor,ta=ve.constructor;_u!=ta&&"constructor"in X&&"constructor"in ve&&!(typeof _u=="function"&&_u instanceof _u&&typeof ta=="function"&&ta instanceof ta)&&(Hr=!1)}return Bn.delete(X),Bn.delete(ve),Hr}function Pa(X){return gc(X,wi,ou)}function Ds(X,ve){var $e=X.__data__;return Cu(ve)?$e[typeof ve=="string"?"string":"hash"]:$e.map}function qr(X,ve){var $e=wn(X,ve);return VA($e)?$e:void 0}function Yi(X){var ve=ne.call(X,yt),$e=X[yt];try{X[yt]=void 0;var wt=!0}catch{}var ei=ye.call(X);return wt&&(ve?X[yt]=$e:delete X[yt]),ei}var ou=Mt?function(X){return X==null?[]:(X=Object(X),Dt(Mt(X),function(ve){return Be.call(X,ve)}))}:Jn,Vo=tu;(fn&&Vo(new fn(new ArrayBuffer(1)))!=be||Fn&&Vo(new Fn)!=P||pn&&Vo(pn.resolve())!=V||$n&&Vo(new $n)!=Y||Zn&&Vo(new Zn)!=me)&&(Vo=function(X){var ve=tu(X),$e=ve==q?X.constructor:void 0,wt=$e?Go($e):"";if(wt)switch(wt){case Hi:return be;case Ti:return P;case tr:return V;case oi:return Y;case Pi:return me}return ve});function dl(X,ve){return ve=ve??s,!!ve&&(typeof X=="number"||At.test(X))&&X>-1&&X%1==0&&X<ve}function Cu(X){var ve=typeof X;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?X!=="__proto__":X===null}function sr(X){return!!ue&&ue in X}function El(X){var ve=X&&X.constructor,$e=typeof ve=="function"&&ve.prototype||_e;return X===$e}function Va(X){return ye.call(X)}function Go(X){if(X!=null){try{return ee.call(X)}catch{}try{return X+""}catch{}}return""}function Ps(X,ve){return X===ve||X!==X&&ve!==ve}var Ro=yc((function(){return arguments})())?yc:function(X){return lr(X)&&ne.call(X,"callee")&&!Be.call(X,"callee")},Eo=Array.isArray;function Ho(X){return X!=null&&Wo(X.length)&&!Zo(X)}var Pr=Pt||Ur;function HA(X,ve){return nu(X,ve)}function Zo(X){if(!Ms(X))return!1;var ve=tu(X);return ve==x||ve==k||ve==h||ve==H}function Wo(X){return typeof X=="number"&&X>-1&&X%1==0&&X<=s}function Ms(X){var ve=typeof X;return X!=null&&(ve=="object"||ve=="function")}function lr(X){return X!=null&&typeof X=="object"}var aa=pt?Ln(pt):ga;function wi(X){return Ho(X)?ma(X):iu(X)}function Jn(){return[]}function Ur(){return!1}n.exports=HA})(n3,n3.exports)),n3.exports}var FUe=LUe();const LD=Xl(FUe);function or(){var n="/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",e="77d2098743f5a64765174c6e14fc4dc25f900f6c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",statementMap:{0:{start:{line:10,column:4},end:{line:11,column:7}},1:{start:{line:12,column:4},end:{line:13,column:7}},2:{start:{line:14,column:4},end:{line:14,column:23}},3:{start:{line:15,column:4},end:{line:15,column:28}},4:{start:{line:16,column:4},end:{line:16,column:90}},5:{start:{line:19,column:28},end:{line:19,column:48}},6:{start:{line:20,column:4},end:{line:22,column:7}},7:{start:{line:21,column:6},end:{line:21,column:88}},8:{start:{line:23,column:4},end:{line:25,column:5}},9:{start:{line:24,column:6},end:{line:24,column:42}},10:{start:{line:26,column:4},end:{line:26,column:48}},11:{start:{line:29,column:33},end:{line:29,column:58}},12:{start:{line:30,column:4},end:{line:43,column:7}},13:{start:{line:31,column:6},end:{line:42,column:9}},14:{start:{line:32,column:32},end:{line:32,column:71}},15:{start:{line:33,column:23},end:{line:33,column:53}},16:{start:{line:34,column:8},end:{line:40,column:11}},17:{start:{line:35,column:10},end:{line:39,column:13}},18:{start:{line:36,column:40},end:{line:36,column:75}},19:{start:{line:37,column:12},end:{line:37,column:71}},20:{start:{line:38,column:12},end:{line:38,column:64}},21:{start:{line:41,column:8},end:{line:41,column:60}},22:{start:{line:44,column:4},end:{line:46,column:5}},23:{start:{line:45,column:6},end:{line:45,column:52}},24:{start:{line:50,column:4},end:{line:50,column:25}},25:{start:{line:53,column:4},end:{line:53,column:30}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:25},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:52},end:{line:10,column:53}},loc:{start:{line:10,column:58},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:62},end:{line:12,column:63}},loc:{start:{line:12,column:68},end:{line:13,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:18},end:{line:27,column:3}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:48},end:{line:20,column:49}},loc:{start:{line:20,column:62},end:{line:22,column:5}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:32},end:{line:47,column:3}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:30,column:39},end:{line:30,column:40}},loc:{start:{line:30,column:53},end:{line:43,column:5}},line:30},7:{name:"(anonymous_7)",decl:{start:{line:31,column:46},end:{line:31,column:47}},loc:{start:{line:31,column:65},end:{line:42,column:7}},line:31},8:{name:"(anonymous_8)",decl:{start:{line:34,column:58},end:{line:34,column:59}},loc:{start:{line:34,column:71},end:{line:40,column:9}},line:34},9:{name:"(anonymous_9)",decl:{start:{line:35,column:50},end:{line:35,column:51}},loc:{start:{line:35,column:68},end:{line:39,column:11}},line:35},10:{name:"(anonymous_10)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:16},end:{line:51,column:3}},line:49},11:{name:"(anonymous_11)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:21},end:{line:54,column:3}},line:52}},branchMap:{0:{loc:{start:{line:9,column:14},end:{line:9,column:23}},type:"default-arg",locations:[{start:{line:9,column:21},end:{line:9,column:23}}],line:9},1:{loc:{start:{line:10,column:27},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:27},end:{line:10,column:47}},{start:{line:10,column:52},end:{line:11,column:5}}],line:10},2:{loc:{start:{line:12,column:32},end:{line:13,column:6}},type:"binary-expr",locations:[{start:{line:12,column:32},end:{line:12,column:57}},{start:{line:12,column:62},end:{line:13,column:5}}],line:12},3:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:31,column:7},end:{line:31,column:36}},type:"binary-expr",locations:[{start:{line:31,column:7},end:{line:31,column:30}},{start:{line:31,column:34},end:{line:31,column:36}}],line:31},5:{loc:{start:{line:32,column:32},end:{line:32,column:71}},type:"binary-expr",locations:[{start:{line:32,column:32},end:{line:32,column:65}},{start:{line:32,column:69},end:{line:32,column:71}}],line:32},6:{loc:{start:{line:36,column:40},end:{line:36,column:75}},type:"binary-expr",locations:[{start:{line:36,column:40},end:{line:36,column:69}},{start:{line:36,column:73},end:{line:36,column:75}}],line:36},7:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,aAAa;AAUpB,qBAAqB,aAAa;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAA4B,CAAC,GAAG;AAC1C,SAAK,kBAAkB,KAAK,oBAAoB,MAAM;AAAA,IAAC;AACvD,SAAK,uBAAuB,KAAK,yBAAyB,MAAM;AAAA,IAAC;AAEjE,SAAK,WAAW,CAAC;AACjB,SAAK,gBAAgB,CAAC;AAKtB,SAAK,oCAAoC,SAAS,KAAK,0BAA0B,GAAI;AAAA,EACvF;AAAA,EAEA,WAAW,KAAU;AACnB,UAAM,kBAAkB,EAAE,GAAG,KAAK,SAAS;AAE3C,WAAO,KAAK,IAAI,MAAM,YAAY,EAAE,QAAQ,cAAY;AAGtD,WAAK,SAAS,QAAQ,IAAI,IAAI,MAAM,aAAa,QAAQ,EAAE,QAAQ;AAAA,IACrE,CAAC;AAED,QAAG,CAAC,QAAQ,iBAAiB,KAAK,QAAQ,GAAG;AAC3C,WAAK,gBAAgB,KAAK,QAAQ;AAAA,IACpC;AAEA,SAAK,kCAAkC,GAAG;AAAA,EAC5C;AAAA,EAEA,yBAAyB,KAAU;AACjC,UAAM,uBAAuB,EAAE,GAAG,KAAK,cAAc;AAErD,WAAO,KAAK,KAAK,QAAQ,EAAE,QAAQ,cAAY;AAC7C,OAAC,KAAK,SAAS,QAAQ,KAAK,CAAC,GAAG,QAAQ,mBAAiB;AACvD,cAAM,kBAAkB,KAAK,cAAc,aAAa,KAAK,CAAC;AAC9D,cAAM,SAAS,EAAE,aAAa,cAAc;AAC5C,YAAI,oBAAoB,UAAU,MAAa,EAAE,QAAQ,aAAW;AAClE,iBAAO,KAAK,QAAQ,UAAU,EAAE,QAAQ,kBAAgB;AACtD,kBAAM,sBAAsB,gBAAgB,YAAY,KAAK,CAAC;AAC9D,gCAAoB,QAAQ,WAAW,YAAY,CAAC,IAAI,CAAC;AACzD,4BAAgB,YAAY,IAAI;AAAA,UAClC,CAAC;AAAA,QACH,CAAC;AAED,aAAK,cAAc,aAAa,IAAI;AAAA,MACtC,CAAC;AAAA,IACH,CAAC;AAED,QAAG,CAAC,QAAQ,sBAAsB,KAAK,aAAa,GAAG;AACrD,WAAK,qBAAqB,KAAK,aAAa;AAAA,IAC9C;AAAA,EAEF;AAAA;AAAA,EAGA,IAAI,UAAU;AACZ,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"77d2098743f5a64765174c6e14fc4dc25f900f6c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return or=function(){return s},s}or();class zUe{onSourcesChange;onVectorLayersChange;throttledAnalyzeVectorLayerFields;_sources;_vectorLayers;constructor(e=(or().b[0][0]++,{})){or().f[0]++,or().s[0]++,this.onSourcesChange=(or().b[1][0]++,e.onSourcesChange||(or().b[1][1]++,()=>{or().f[1]++})),or().s[1]++,this.onVectorLayersChange=(or().b[2][0]++,e.onVectorLayersChange||(or().b[2][1]++,()=>{or().f[2]++})),or().s[2]++,this._sources={},or().s[3]++,this._vectorLayers={},or().s[4]++,this.throttledAnalyzeVectorLayerFields=KUe(this.analyzeVectorLayerFields,5e3)}analyzeMap(e){or().f[3]++;const t=(or().s[5]++,{...this._sources});or().s[6]++,Object.keys(e.style.sourceCaches).forEach(i=>{or().f[4]++,or().s[7]++,this._sources[i]=e.style.sourceCaches[i]._source.vectorLayerIds}),or().s[8]++,LD(t,this._sources)?or().b[3][1]++:(or().b[3][0]++,or().s[9]++,this.onSourcesChange(this._sources)),or().s[10]++,this.throttledAnalyzeVectorLayerFields(e)}analyzeVectorLayerFields(e){or().f[5]++;const t=(or().s[11]++,{...this._vectorLayers});or().s[12]++,Object.keys(this._sources).forEach(i=>{or().f[6]++,or().s[13]++,(or().b[4][0]++,this._sources[i]||(or().b[4][1]++,[])).forEach(r=>{or().f[7]++;const o=(or().s[14]++,or().b[5][0]++,this._vectorLayers[r]||(or().b[5][1]++,{})),s=(or().s[15]++,{sourceLayer:r});or().s[16]++,e.querySourceFeatures(i,s).forEach(a=>{or().f[8]++,or().s[17]++,Object.keys(a.properties).forEach(c=>{or().f[9]++;const h=(or().s[18]++,or().b[6][0]++,o[c]||(or().b[6][1]++,{}));or().s[19]++,h[a.properties[c]]={},or().s[20]++,o[c]=h})}),or().s[21]++,this._vectorLayers[r]=o})}),or().s[22]++,LD(t,this._vectorLayers)?or().b[7][1]++:(or().b[7][0]++,or().s[23]++,this.onVectorLayersChange(this._vectorLayers))}get sources(){return or().f[10]++,or().s[24]++,this._sources}get vectorLayers(){return or().f[11]++,or().s[25]++,this._vectorLayers}}function pe(){var n="/home/runner/work/maputnik/maputnik/src/components/App.tsx",e="3ada5d61e06df3b0198ab7e31ce0b9225ca7364f",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/App.tsx",statementMap:{0:{start:{line:36,column:0},end:{line:36,column:30}},1:{start:{line:38,column:29},end:{line:38,column:60}},2:{start:{line:39,column:26},end:{line:39,column:54}},3:{start:{line:40,column:31},end:{line:40,column:64}},4:{start:{line:41,column:28},end:{line:41,column:58}},5:{start:{line:42,column:2},end:{line:59,column:3}},6:{start:{line:43,column:24},end:{line:43,column:95}},7:{start:{line:44,column:4},end:{line:46,column:5}},8:{start:{line:45,column:6},end:{line:45,column:47}},9:{start:{line:47,column:9},end:{line:59,column:3}},10:{start:{line:48,column:24},end:{line:48,column:96}},11:{start:{line:49,column:4},end:{line:51,column:5}},12:{start:{line:50,column:6},end:{line:50,column:47}},13:{start:{line:52,column:9},end:{line:59,column:3}},14:{start:{line:53,column:24},end:{line:53,column:93}},15:{start:{line:54,column:4},end:{line:56,column:5}},16:{start:{line:55,column:6},end:{line:55,column:47}},17:{start:{line:58,column:4},end:{line:58,column:15}},18:{start:{line:62,column:2},end:{line:71,column:4}},19:{start:{line:75,column:15},end:{line:75,column:19}},20:{start:{line:78,column:4},end:{line:78,column:17}},21:{start:{line:79,column:4},end:{line:79,column:45}},22:{start:{line:80,column:4},end:{line:80,column:38}},23:{start:{line:81,column:4},end:{line:116,column:6}},24:{start:{line:117,column:4},end:{line:119,column:7}},25:{start:{line:118,column:35},end:{line:118,column:69}},26:{start:{line:121,column:31},end:{line:194,column:3}},27:{start:{line:122,column:22},end:{line:179,column:5}},28:{start:{line:126,column:10},end:{line:126,column:40}},29:{start:{line:132,column:10},end:{line:132,column:35}},30:{start:{line:138,column:10},end:{line:138,column:37}},31:{start:{line:144,column:10},end:{line:144,column:38}},32:{start:{line:150,column:10},end:{line:150,column:39}},33:{start:{line:156,column:10},end:{line:156,column:42}},34:{start:{line:162,column:10},end:{line:164,column:12}},35:{start:{line:170,column:10},end:{line:170,column:63}},36:{start:{line:176,column:10},end:{line:176,column:36}},37:{start:{line:180,column:4},end:{line:193,column:7}},38:{start:{line:181,column:6},end:{line:192,column:7}},39:{start:{line:182,column:8},end:{line:182,column:24}},40:{start:{line:183,column:8},end:{line:183,column:30}},41:{start:{line:184,column:13},end:{line:192,column:7}},42:{start:{line:185,column:25},end:{line:187,column:10}},43:{start:{line:186,column:10},end:{line:186,column:41}},44:{start:{line:188,column:8},end:{line:191,column:9}},45:{start:{line:189,column:10},end:{line:189,column:44}},46:{start:{line:190,column:10},end:{line:190,column:29}},47:{start:{line:195,column:19},end:{line:213,column:3}},48:{start:{line:196,column:4},end:{line:212,column:5}},49:{start:{line:197,column:6},end:{line:203,column:7}},50:{start:{line:198,column:8},end:{line:198,column:27}},51:{start:{line:199,column:8},end:{line:199,column:22}},52:{start:{line:200,column:13},end:{line:203,column:7}},53:{start:{line:201,column:8},end:{line:201,column:27}},54:{start:{line:202,column:8},end:{line:202,column:22}},55:{start:{line:205,column:6},end:{line:211,column:7}},56:{start:{line:206,column:8},end:{line:206,column:27}},57:{start:{line:207,column:8},end:{line:207,column:22}},58:{start:{line:208,column:13},end:{line:211,column:7}},59:{start:{line:209,column:8},end:{line:209,column:27}},60:{start:{line:210,column:8},end:{line:210,column:22}},61:{start:{line:215,column:4},end:{line:215,column:102}},62:{start:{line:215,column:65},end:{line:215,column:100}},63:{start:{line:216,column:4},end:{line:216,column:60}},64:{start:{line:219,column:4},end:{line:219,column:63}},65:{start:{line:222,column:4},end:{line:222,column:41}},66:{start:{line:225,column:21},end:{line:225,column:55}},67:{start:{line:226,column:24},end:{line:226,column:93}},68:{start:{line:227,column:21},end:{line:227,column:110}},69:{start:{line:228,column:4},end:{line:230,column:7}},70:{start:{line:229,column:6},end:{line:229,column:80}},71:{start:{line:233,column:4},end:{line:235,column:7}},72:{start:{line:234,column:6},end:{line:234,column:80}},73:{start:{line:237,column:29},end:{line:251,column:3}},74:{start:{line:238,column:4},end:{line:242,column:5}},75:{start:{line:239,column:6},end:{line:241,column:9}},76:{start:{line:243,column:25},end:{line:249,column:5}},77:{start:{line:250,column:4},end:{line:250,column:38}},78:{start:{line:252,column:19},end:{line:375,column:3}},79:{start:{line:253,column:4},end:{line:258,column:6}},80:{start:{line:259,column:4},end:{line:261,column:5}},81:{start:{line:260,column:6},end:{line:260,column:71}},82:{start:{line:262,column:4},end:{line:264,column:5}},83:{start:{line:263,column:6},end:{line:263,column:71}},84:{start:{line:265,column:4},end:{line:269,column:5}},85:{start:{line:266,column:6},end:{line:268,column:7}},86:{start:{line:267,column:8},end:{line:267,column:63}},87:{start:{line:270,column:4},end:{line:272,column:5}},88:{start:{line:271,column:6},end:{line:271,column:44}},89:{start:{line:273,column:19},end:{line:273,column:51}},90:{start:{line:274,column:24},end:{line:274,column:26}},91:{start:{line:275,column:4},end:{line:286,column:5}},92:{start:{line:276,column:26},end:{line:276,column:42}},93:{start:{line:277,column:6},end:{line:285,column:9}},94:{start:{line:278,column:8},end:{line:283,column:9}},95:{start:{line:279,column:24},end:{line:281,column:11}},96:{start:{line:282,column:10},end:{line:282,column:34}},97:{start:{line:284,column:8},end:{line:284,column:40}},98:{start:{line:287,column:25},end:{line:338,column:6}},99:{start:{line:288,column:23},end:{line:288,column:109}},100:{start:{line:289,column:6},end:{line:302,column:7}},101:{start:{line:290,column:35},end:{line:290,column:43}},102:{start:{line:291,column:8},end:{line:301,column:10}},103:{start:{line:303,column:33},end:{line:303,column:100}},104:{start:{line:304,column:6},end:{line:317,column:7}},105:{start:{line:305,column:35},end:{line:305,column:53}},106:{start:{line:306,column:8},end:{line:316,column:10}},107:{start:{line:318,column:25},end:{line:318,column:88}},108:{start:{line:319,column:6},end:{line:337,column:7}},109:{start:{line:320,column:52},end:{line:320,column:62}},110:{start:{line:321,column:20},end:{line:321,column:78}},111:{start:{line:322,column:8},end:{line:332,column:10}},112:{start:{line:334,column:8},end:{line:336,column:10}},113:{start:{line:339,column:24},end:{line:339,column:30}},114:{start:{line:340,column:4},end:{line:354,column:5}},115:{start:{line:341,column:6},end:{line:341,column:42}},116:{start:{line:342,column:6},end:{line:353,column:7}},117:{start:{line:343,column:28},end:{line:343,column:33}},118:{start:{line:344,column:8},end:{line:352,column:9}},119:{start:{line:345,column:10},end:{line:351,column:11}},120:{start:{line:346,column:28},end:{line:346,column:49}},121:{start:{line:347,column:30},end:{line:347,column:69}},122:{start:{line:348,column:12},end:{line:348,column:44}},123:{start:{line:350,column:12},end:{line:350,column:46}},124:{start:{line:355,column:4},end:{line:357,column:5}},125:{start:{line:356,column:6},end:{line:356,column:40}},126:{start:{line:358,column:4},end:{line:360,column:5}},127:{start:{line:359,column:6},end:{line:359,column:40}},128:{start:{line:361,column:4},end:{line:363,column:5}},129:{start:{line:362,column:6},end:{line:362,column:47}},130:{start:{line:364,column:4},end:{line:366,column:5}},131:{start:{line:365,column:6},end:{line:365,column:31}},132:{start:{line:367,column:4},end:{line:374,column:7}},133:{start:{line:372,column:6},end:{line:372,column:26}},134:{start:{line:373,column:6},end:{line:373,column:27}},135:{start:{line:376,column:11},end:{line:383,column:3}},136:{start:{line:377,column:24},end:{line:377,column:49}},137:{start:{line:378,column:21},end:{line:378,column:67}},138:{start:{line:379,column:4},end:{line:379,column:61}},139:{start:{line:380,column:4},end:{line:382,column:7}},140:{start:{line:384,column:11},end:{line:391,column:3}},141:{start:{line:385,column:24},end:{line:385,column:49}},142:{start:{line:386,column:21},end:{line:386,column:67}},143:{start:{line:387,column:4},end:{line:387,column:61}},144:{start:{line:388,column:4},end:{line:390,column:7}},145:{start:{line:392,column:16},end:{line:406,column:3}},146:{start:{line:393,column:33},end:{line:393,column:37}},147:{start:{line:394,column:17},end:{line:394,column:43}},148:{start:{line:395,column:4},end:{line:395,column:53}},149:{start:{line:396,column:4},end:{line:396,column:53}},150:{start:{line:397,column:4},end:{line:397,column:38}},151:{start:{line:397,column:31},end:{line:397,column:38}},152:{start:{line:398,column:4},end:{line:402,column:5}},153:{start:{line:399,column:6},end:{line:401,column:9}},154:{start:{line:403,column:4},end:{line:403,column:29}},155:{start:{line:404,column:4},end:{line:404,column:49}},156:{start:{line:405,column:4},end:{line:405,column:32}},157:{start:{line:407,column:19},end:{line:413,column:3}},158:{start:{line:408,column:25},end:{line:411,column:5}},159:{start:{line:412,column:4},end:{line:412,column:38}},160:{start:{line:414,column:19},end:{line:419,column:3}},161:{start:{line:415,column:19},end:{line:415,column:45}},162:{start:{line:416,column:28},end:{line:416,column:43}},163:{start:{line:417,column:4},end:{line:417,column:37}},164:{start:{line:418,column:4},end:{line:418,column:41}},165:{start:{line:420,column:16},end:{line:427,column:3}},166:{start:{line:421,column:19},end:{line:421,column:45}},167:{start:{line:422,column:26},end:{line:422,column:41}},168:{start:{line:423,column:24},end:{line:423,column:55}},169:{start:{line:424,column:4},end:{line:424,column:46}},170:{start:{line:425,column:4},end:{line:425,column:48}},171:{start:{line:426,column:4},end:{line:426,column:39}},172:{start:{line:428,column:28},end:{line:437,column:3}},173:{start:{line:429,column:19},end:{line:429,column:45}},174:{start:{line:430,column:26},end:{line:430,column:41}},175:{start:{line:431,column:18},end:{line:431,column:45}},176:{start:{line:432,column:26},end:{line:432,column:70}},177:{start:{line:433,column:4},end:{line:433,column:88}},178:{start:{line:434,column:4},end:{line:434,column:33}},179:{start:{line:435,column:4},end:{line:435,column:33}},180:{start:{line:436,column:4},end:{line:436,column:39}},181:{start:{line:438,column:20},end:{line:445,column:3}},182:{start:{line:439,column:26},end:{line:439,column:61}},183:{start:{line:440,column:4},end:{line:443,column:6}},184:{start:{line:444,column:4},end:{line:444,column:39}},185:{start:{line:446,column:19},end:{line:450,column:3}},186:{start:{line:447,column:26},end:{line:447,column:61}},187:{start:{line:448,column:4},end:{line:448,column:33}},188:{start:{line:449,column:4},end:{line:449,column:39}},189:{start:{line:451,column:16},end:{line:455,column:3}},190:{start:{line:452,column:4},end:{line:454,column:27}},191:{start:{line:456,column:21},end:{line:470,column:3}},192:{start:{line:457,column:21},end:{line:457,column:44}},193:{start:{line:458,column:4},end:{line:469,column:5}},194:{start:{line:459,column:27},end:{line:465,column:7}},195:{start:{line:466,column:6},end:{line:466,column:26}},196:{start:{line:468,column:6},end:{line:468,column:22}},197:{start:{line:471,column:14},end:{line:475,column:3}},198:{start:{line:472,column:4},end:{line:472,column:34}},199:{start:{line:473,column:4},end:{line:473,column:47}},200:{start:{line:474,column:4},end:{line:474,column:34}},201:{start:{line:477,column:23},end:{line:477,column:25}},202:{start:{line:478,column:4},end:{line:517,column:5}},203:{start:{line:479,column:21},end:{line:479,column:53}},204:{start:{line:480,column:6},end:{line:516,column:7}},205:{start:{line:481,column:8},end:{line:481,column:93}},206:{start:{line:482,column:8},end:{line:484,column:9}},207:{start:{line:483,column:10},end:{line:483,column:38}},208:{start:{line:486,column:8},end:{line:489,column:10}},209:{start:{line:490,column:18},end:{line:490,column:28}},210:{start:{line:491,column:8},end:{line:495,column:9}},211:{start:{line:492,column:10},end:{line:492,column:62}},212:{start:{line:494,column:10},end:{line:494,column:63}},213:{start:{line:496,column:32},end:{line:503,column:9}},214:{start:{line:497,column:10},end:{line:499,column:11}},215:{start:{line:498,column:12},end:{line:498,column:19}},216:{start:{line:500,column:10},end:{line:502,column:11}},217:{start:{line:501,column:12},end:{line:501,column:50}},218:{start:{line:504,column:8},end:{line:515,column:9}},219:{start:{line:505,column:10},end:{line:512,column:11}},220:{start:{line:506,column:25},end:{line:506,column:77}},221:{start:{line:507,column:12},end:{line:507,column:34}},222:{start:{line:509,column:29},end:{line:509,column:63}},223:{start:{line:510,column:25},end:{line:510,column:46}},224:{start:{line:511,column:12},end:{line:511,column:34}},225:{start:{line:514,column:10},end:{line:514,column:78}},226:{start:{line:518,column:4},end:{line:523,column:5}},227:{start:{line:519,column:6},end:{line:519,column:51}},228:{start:{line:520,column:6},end:{line:522,column:9}},229:{start:{line:526,column:21},end:{line:526,column:55}},230:{start:{line:527,column:4},end:{line:527,column:53}},231:{start:{line:529,column:16},end:{line:533,column:3}},232:{start:{line:530,column:4},end:{line:532,column:7}},233:{start:{line:535,column:40},end:{line:535,column:50}},234:{start:{line:536,column:21},end:{line:547,column:5}},235:{start:{line:539,column:8},end:{line:541,column:11}},236:{start:{line:544,column:8},end:{line:544,column:44}},237:{start:{line:545,column:8},end:{line:545,column:28}},238:{start:{line:548,column:21},end:{line:548,column:40}},239:{start:{line:550,column:4},end:{line:572,column:5}},240:{start:{line:551,column:6},end:{line:559,column:8}},241:{start:{line:557,column:38},end:{line:557,column:66}},242:{start:{line:561,column:6},end:{line:571,column:8}},243:{start:{line:574,column:4},end:{line:576,column:5}},244:{start:{line:575,column:6},end:{line:575,column:63}},245:{start:{line:577,column:25},end:{line:577,column:27}},246:{start:{line:578,column:4},end:{line:580,column:5}},247:{start:{line:579,column:6},end:{line:579,column:52}},248:{start:{line:581,column:4},end:{line:581,column:160}},249:{start:{line:583,column:18},end:{line:601,column:3}},250:{start:{line:584,column:43},end:{line:584,column:53}},251:{start:{line:585,column:35},end:{line:585,column:45}},252:{start:{line:586,column:16},end:{line:586,column:38}},253:{start:{line:587,column:20},end:{line:587,column:50}},254:{start:{line:588,column:4},end:{line:588,column:70}},255:{start:{line:589,column:23},end:{line:589,column:122}},256:{start:{line:589,column:66},end:{line:589,column:91}},257:{start:{line:589,column:109},end:{line:589,column:121}},258:{start:{line:590,column:4},end:{line:594,column:5}},259:{start:{line:591,column:6},end:{line:591,column:58}},260:{start:{line:593,column:6},end:{line:593,column:39}},261:{start:{line:595,column:4},end:{line:599,column:5}},262:{start:{line:596,column:6},end:{line:596,column:38}},263:{start:{line:597,column:11},end:{line:599,column:5}},264:{start:{line:598,column:6},end:{line:598,column:46}},265:{start:{line:600,column:4},end:{line:600,column:71}},266:{start:{line:602,column:27},end:{line:647,column:3}},267:{start:{line:603,column:16},end:{line:603,column:38}},268:{start:{line:604,column:23},end:{line:604,column:52}},269:{start:{line:605,column:4},end:{line:617,column:5}},270:{start:{line:606,column:21},end:{line:606,column:42}},271:{start:{line:607,column:23},end:{line:607,column:25}},272:{start:{line:608,column:6},end:{line:610,column:9}},273:{start:{line:609,column:8},end:{line:609,column:35}},274:{start:{line:611,column:6},end:{line:616,column:9}},275:{start:{line:618,column:17},end:{line:618,column:45}},276:{start:{line:619,column:4},end:{line:621,column:5}},277:{start:{line:620,column:6},end:{line:620,column:29}},278:{start:{line:622,column:17},end:{line:622,column:46}},279:{start:{line:623,column:4},end:{line:646,column:5}},280:{start:{line:624,column:6},end:{line:645,column:7}},281:{start:{line:625,column:22},end:{line:625,column:37}},282:{start:{line:626,column:46},end:{line:629,column:9}},283:{start:{line:630,column:20},end:{line:630,column:24}},284:{start:{line:631,column:8},end:{line:636,column:9}},285:{start:{line:632,column:33},end:{line:632,column:63}},286:{start:{line:633,column:10},end:{line:635,column:11}},287:{start:{line:634,column:12},end:{line:634,column:26}},288:{start:{line:637,column:8},end:{line:642,column:9}},289:{start:{line:638,column:10},end:{line:641,column:13}},290:{start:{line:644,column:8},end:{line:644,column:26}},291:{start:{line:648,column:18},end:{line:653,column:3}},292:{start:{line:649,column:4},end:{line:652,column:27}},293:{start:{line:655,column:4},end:{line:660,column:27}},294:{start:{line:663,column:4},end:{line:663,column:60}},295:{start:{line:665,column:20},end:{line:667,column:3}},296:{start:{line:666,column:4},end:{line:666,column:34}},297:{start:{line:668,column:28},end:{line:675,column:3}},298:{start:{line:669,column:4},end:{line:674,column:7}},299:{start:{line:676,column:28},end:{line:683,column:3}},300:{start:{line:677,column:4},end:{line:682,column:7}},301:{start:{line:685,column:19},end:{line:685,column:51}},302:{start:{line:686,column:26},end:{line:686,column:92}},303:{start:{line:687,column:36},end:{line:700,column:5}},304:{start:{line:698,column:34},end:{line:698,column:57}},305:{start:{line:701,column:23},end:{line:708,column:14}},306:{start:{line:705,column:30},end:{line:705,column:57}},307:{start:{line:706,column:23},end:{line:706,column:57}},308:{start:{line:709,column:38},end:{line:723,column:5}},309:{start:{line:724,column:24},end:{line:743,column:14}},310:{start:{line:744,column:24},end:{line:754,column:14}},311:{start:{line:755,column:35},end:{line:824,column:8}},312:{start:{line:765,column:30},end:{line:765,column:55}},313:{start:{line:773,column:30},end:{line:773,column:59}},314:{start:{line:783,column:30},end:{line:783,column:58}},315:{start:{line:792,column:30},end:{line:792,column:56}},316:{start:{line:802,column:30},end:{line:802,column:54}},317:{start:{line:812,column:30},end:{line:812,column:57}},318:{start:{line:821,column:30},end:{line:821,column:61}},319:{start:{line:825,column:4},end:{line:836,column:6}}},fnMap:{0:{name:"setFetchAccessToken",decl:{start:{line:37,column:9},end:{line:37,column:28}},loc:{start:{line:37,column:44},end:{line:60,column:1}},line:37},1:{name:"updateRootSpec",decl:{start:{line:61,column:9},end:{line:61,column:23}},loc:{start:{line:61,column:52},end:{line:72,column:1}},line:61},2:{name:"(anonymous_2)",decl:{start:{line:77,column:2},end:{line:77,column:3}},loc:{start:{line:77,column:21},end:{line:120,column:3}},line:77},3:{name:"(anonymous_3)",decl:{start:{line:118,column:28},end:{line:118,column:29}},loc:{start:{line:118,column:35},end:{line:118,column:69}},line:118},4:{name:"(anonymous_4)",decl:{start:{line:121,column:31},end:{line:121,column:32}},loc:{start:{line:121,column:37},end:{line:194,column:3}},line:121},5:{name:"(anonymous_5)",decl:{start:{line:125,column:17},end:{line:125,column:18}},loc:{start:{line:125,column:23},end:{line:127,column:9}},line:125},6:{name:"(anonymous_6)",decl:{start:{line:131,column:17},end:{line:131,column:18}},loc:{start:{line:131,column:23},end:{line:133,column:9}},line:131},7:{name:"(anonymous_7)",decl:{start:{line:137,column:17},end:{line:137,column:18}},loc:{start:{line:137,column:23},end:{line:139,column:9}},line:137},8:{name:"(anonymous_8)",decl:{start:{line:143,column:17},end:{line:143,column:18}},loc:{start:{line:143,column:23},end:{line:145,column:9}},line:143},9:{name:"(anonymous_9)",decl:{start:{line:149,column:17},end:{line:149,column:18}},loc:{start:{line:149,column:23},end:{line:151,column:9}},line:149},10:{name:"(anonymous_10)",decl:{start:{line:155,column:17},end:{line:155,column:18}},loc:{start:{line:155,column:23},end:{line:157,column:9}},line:155},11:{name:"(anonymous_11)",decl:{start:{line:161,column:17},end:{line:161,column:18}},loc:{start:{line:161,column:23},end:{line:165,column:9}},line:161},12:{name:"(anonymous_12)",decl:{start:{line:169,column:17},end:{line:169,column:18}},loc:{start:{line:169,column:23},end:{line:171,column:9}},line:169},13:{name:"(anonymous_13)",decl:{start:{line:175,column:17},end:{line:175,column:18}},loc:{start:{line:175,column:23},end:{line:177,column:9}},line:175},14:{name:"(anonymous_14)",decl:{start:{line:180,column:44},end:{line:180,column:45}},loc:{start:{line:180,column:51},end:{line:193,column:5}},line:180},15:{name:"(anonymous_15)",decl:{start:{line:185,column:40},end:{line:185,column:41}},loc:{start:{line:185,column:55},end:{line:187,column:9}},line:185},16:{name:"(anonymous_16)",decl:{start:{line:195,column:19},end:{line:195,column:20}},loc:{start:{line:195,column:26},end:{line:213,column:3}},line:195},17:{name:"(anonymous_17)",decl:{start:{line:214,column:2},end:{line:214,column:3}},loc:{start:{line:214,column:28},end:{line:217,column:3}},line:214},18:{name:"(anonymous_18)",decl:{start:{line:215,column:45},end:{line:215,column:46}},loc:{start:{line:215,column:65},end:{line:215,column:100}},line:215},19:{name:"(anonymous_19)",decl:{start:{line:218,column:2},end:{line:218,column:3}},loc:{start:{line:218,column:25},end:{line:220,column:3}},line:218},20:{name:"(anonymous_20)",decl:{start:{line:221,column:2},end:{line:221,column:3}},loc:{start:{line:221,column:27},end:{line:223,column:3}},line:221},21:{name:"(anonymous_21)",decl:{start:{line:224,column:2},end:{line:224,column:3}},loc:{start:{line:224,column:27},end:{line:231,column:3}},line:224},22:{name:"(anonymous_22)",decl:{start:{line:228,column:37},end:{line:228,column:38}},loc:{start:{line:228,column:48},end:{line:230,column:5}},line:228},23:{name:"(anonymous_23)",decl:{start:{line:232,column:2},end:{line:232,column:3}},loc:{start:{line:232,column:23},end:{line:236,column:3}},line:232},24:{name:"(anonymous_24)",decl:{start:{line:233,column:36},end:{line:233,column:37}},loc:{start:{line:233,column:47},end:{line:235,column:5}},line:233},25:{name:"(anonymous_25)",decl:{start:{line:237,column:29},end:{line:237,column:30}},loc:{start:{line:237,column:50},end:{line:251,column:3}},line:237},26:{name:"(anonymous_26)",decl:{start:{line:252,column:19},end:{line:252,column:20}},loc:{start:{line:252,column:44},end:{line:375,column:3}},line:252},27:{name:"(anonymous_27)",decl:{start:{line:277,column:30},end:{line:277,column:31}},loc:{start:{line:277,column:48},end:{line:285,column:7}},line:277},28:{name:"(anonymous_28)",decl:{start:{line:287,column:56},end:{line:287,column:57}},loc:{start:{line:287,column:67},end:{line:338,column:5}},line:287},29:{name:"(anonymous_29)",decl:{start:{line:371,column:7},end:{line:371,column:8}},loc:{start:{line:371,column:13},end:{line:374,column:5}},line:371},30:{name:"(anonymous_30)",decl:{start:{line:376,column:11},end:{line:376,column:12}},loc:{start:{line:376,column:17},end:{line:383,column:3}},line:376},31:{name:"(anonymous_31)",decl:{start:{line:384,column:11},end:{line:384,column:12}},loc:{start:{line:384,column:17},end:{line:391,column:3}},line:384},32:{name:"(anonymous_32)",decl:{start:{line:392,column:16},end:{line:392,column:17}},loc:{start:{line:392,column:26},end:{line:406,column:3}},line:392},33:{name:"(anonymous_33)",decl:{start:{line:407,column:19},end:{line:407,column:20}},loc:{start:{line:407,column:38},end:{line:413,column:3}},line:407},34:{name:"(anonymous_34)",decl:{start:{line:414,column:19},end:{line:414,column:20}},loc:{start:{line:414,column:30},end:{line:419,column:3}},line:414},35:{name:"(anonymous_35)",decl:{start:{line:420,column:16},end:{line:420,column:17}},loc:{start:{line:420,column:27},end:{line:427,column:3}},line:420},36:{name:"(anonymous_36)",decl:{start:{line:428,column:28},end:{line:428,column:29}},loc:{start:{line:428,column:39},end:{line:437,column:3}},line:428},37:{name:"(anonymous_37)",decl:{start:{line:438,column:20},end:{line:438,column:21}},loc:{start:{line:438,column:46},end:{line:445,column:3}},line:438},38:{name:"(anonymous_38)",decl:{start:{line:446,column:19},end:{line:446,column:20}},loc:{start:{line:446,column:37},end:{line:450,column:3}},line:446},39:{name:"(anonymous_39)",decl:{start:{line:451,column:16},end:{line:451,column:17}},loc:{start:{line:451,column:30},end:{line:455,column:3}},line:451},40:{name:"(anonymous_40)",decl:{start:{line:456,column:21},end:{line:456,column:22}},loc:{start:{line:456,column:35},end:{line:470,column:3}},line:456},41:{name:"(anonymous_41)",decl:{start:{line:471,column:14},end:{line:471,column:15}},loc:{start:{line:471,column:40},end:{line:475,column:3}},line:471},42:{name:"(anonymous_42)",decl:{start:{line:476,column:2},end:{line:476,column:3}},loc:{start:{line:476,column:23},end:{line:524,column:3}},line:476},43:{name:"(anonymous_43)",decl:{start:{line:496,column:32},end:{line:496,column:33}},loc:{start:{line:496,column:42},end:{line:503,column:9}},line:496},44:{name:"(anonymous_44)",decl:{start:{line:525,column:2},end:{line:525,column:3}},loc:{start:{line:525,column:17},end:{line:528,column:3}},line:525},45:{name:"(anonymous_45)",decl:{start:{line:529,column:16},end:{line:529,column:17}},loc:{start:{line:529,column:29},end:{line:533,column:3}},line:529},46:{name:"(anonymous_46)",decl:{start:{line:534,column:2},end:{line:534,column:3}},loc:{start:{line:534,column:16},end:{line:582,column:3}},line:534},47:{name:"(anonymous_47)",decl:{start:{line:538,column:27},end:{line:538,column:28}},loc:{start:{line:538,column:42},end:{line:542,column:7}},line:538},48:{name:"(anonymous_48)",decl:{start:{line:543,column:20},end:{line:543,column:21}},loc:{start:{line:543,column:27},end:{line:546,column:7}},line:543},49:{name:"(anonymous_49)",decl:{start:{line:557,column:25},end:{line:557,column:26}},loc:{start:{line:557,column:38},end:{line:557,column:66}},line:557},50:{name:"(anonymous_50)",decl:{start:{line:583,column:18},end:{line:583,column:19}},loc:{start:{line:583,column:24},end:{line:601,column:3}},line:583},51:{name:"(anonymous_51)",decl:{start:{line:589,column:50},end:{line:589,column:51}},loc:{start:{line:589,column:66},end:{line:589,column:91}},line:589},52:{name:"(anonymous_52)",decl:{start:{line:589,column:100},end:{line:589,column:101}},loc:{start:{line:589,column:109},end:{line:589,column:121}},line:589},53:{name:"(anonymous_53)",decl:{start:{line:602,column:27},end:{line:602,column:28}},loc:{start:{line:602,column:41},end:{line:647,column:3}},line:602},54:{name:"(anonymous_54)",decl:{start:{line:608,column:21},end:{line:608,column:22}},loc:{start:{line:608,column:36},end:{line:610,column:7}},line:608},55:{name:"(anonymous_55)",decl:{start:{line:648,column:18},end:{line:648,column:19}},loc:{start:{line:648,column:29},end:{line:653,column:3}},line:648},56:{name:"(anonymous_56)",decl:{start:{line:654,column:2},end:{line:654,column:3}},loc:{start:{line:654,column:29},end:{line:661,column:3}},line:654},57:{name:"(anonymous_57)",decl:{start:{line:662,column:2},end:{line:662,column:3}},loc:{start:{line:662,column:25},end:{line:664,column:3}},line:662},58:{name:"(anonymous_58)",decl:{start:{line:665,column:20},end:{line:665,column:21}},loc:{start:{line:665,column:36},end:{line:667,column:3}},line:665},59:{name:"(anonymous_59)",decl:{start:{line:668,column:28},end:{line:668,column:29}},loc:{start:{line:668,column:44},end:{line:675,column:3}},line:668},60:{name:"(anonymous_60)",decl:{start:{line:676,column:28},end:{line:676,column:29}},loc:{start:{line:676,column:44},end:{line:683,column:3}},line:676},61:{name:"(anonymous_61)",decl:{start:{line:684,column:2},end:{line:684,column:3}},loc:{start:{line:684,column:11},end:{line:837,column:3}},line:684},62:{name:"(anonymous_62)",decl:{start:{line:698,column:23},end:{line:698,column:24}},loc:{start:{line:698,column:34},end:{line:698,column:57}},line:698},63:{name:"(anonymous_63)",decl:{start:{line:705,column:18},end:{line:705,column:19}},loc:{start:{line:705,column:30},end:{line:705,column:57}},line:705},64:{name:"(anonymous_64)",decl:{start:{line:706,column:17},end:{line:706,column:18}},loc:{start:{line:706,column:23},end:{line:706,column:57}},line:706},65:{name:"(anonymous_65)",decl:{start:{line:765,column:24},end:{line:765,column:25}},loc:{start:{line:765,column:30},end:{line:765,column:55}},line:765},66:{name:"(anonymous_66)",decl:{start:{line:773,column:24},end:{line:773,column:25}},loc:{start:{line:773,column:30},end:{line:773,column:59}},line:773},67:{name:"(anonymous_67)",decl:{start:{line:783,column:24},end:{line:783,column:25}},loc:{start:{line:783,column:30},end:{line:783,column:58}},line:783},68:{name:"(anonymous_68)",decl:{start:{line:792,column:24},end:{line:792,column:25}},loc:{start:{line:792,column:30},end:{line:792,column:56}},line:792},69:{name:"(anonymous_69)",decl:{start:{line:802,column:24},end:{line:802,column:25}},loc:{start:{line:802,column:30},end:{line:802,column:54}},line:802},70:{name:"(anonymous_70)",decl:{start:{line:812,column:24},end:{line:812,column:25}},loc:{start:{line:812,column:30},end:{line:812,column:57}},line:812},71:{name:"(anonymous_71)",decl:{start:{line:821,column:24},end:{line:821,column:25}},loc:{start:{line:821,column:30},end:{line:821,column:61}},line:821}},branchMap:{0:{loc:{start:{line:42,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:59,column:3}},{start:{line:47,column:9},end:{line:59,column:3}}],line:42},1:{loc:{start:{line:42,column:6},end:{line:42,column:43}},type:"binary-expr",locations:[{start:{line:42,column:6},end:{line:42,column:24}},{start:{line:42,column:28},end:{line:42,column:43}}],line:42},2:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},3:{loc:{start:{line:47,column:9},end:{line:59,column:3}},type:"if",locations:[{start:{line:47,column:9},end:{line:59,column:3}},{start:{line:52,column:9},end:{line:59,column:3}}],line:47},4:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:52,column:9},end:{line:59,column:3}},type:"if",locations:[{start:{line:52,column:9},end:{line:59,column:3}},{start:{line:57,column:9},end:{line:59,column:3}}],line:52},6:{loc:{start:{line:54,column:4},end:{line:56,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:56,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},7:{loc:{start:{line:163,column:12},end:{line:163,column:61}},type:"cond-expr",locations:[{start:{line:163,column:44},end:{line:163,column:53}},{start:{line:163,column:56},end:{line:163,column:61}}],line:163},8:{loc:{start:{line:181,column:6},end:{line:192,column:7}},type:"if",locations:[{start:{line:181,column:6},end:{line:192,column:7}},{start:{line:184,column:13},end:{line:192,column:7}}],line:181},9:{loc:{start:{line:184,column:13},end:{line:192,column:7}},type:"if",locations:[{start:{line:184,column:13},end:{line:192,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:184},10:{loc:{start:{line:184,column:17},end:{line:184,column:88}},type:"binary-expr",locations:[{start:{line:184,column:17},end:{line:184,column:44}},{start:{line:184,column:48},end:{line:184,column:88}}],line:184},11:{loc:{start:{line:188,column:8},end:{line:191,column:9}},type:"if",locations:[{start:{line:188,column:8},end:{line:191,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:188},12:{loc:{start:{line:196,column:4},end:{line:212,column:5}},type:"if",locations:[{start:{line:196,column:4},end:{line:212,column:5}},{start:{line:204,column:11},end:{line:212,column:5}}],line:196},13:{loc:{start:{line:197,column:6},end:{line:203,column:7}},type:"if",locations:[{start:{line:197,column:6},end:{line:203,column:7}},{start:{line:200,column:13},end:{line:203,column:7}}],line:197},14:{loc:{start:{line:197,column:10},end:{line:197,column:53}},type:"binary-expr",locations:[{start:{line:197,column:10},end:{line:197,column:19}},{start:{line:197,column:23},end:{line:197,column:33}},{start:{line:197,column:37},end:{line:197,column:53}}],line:197},15:{loc:{start:{line:200,column:13},end:{line:203,column:7}},type:"if",locations:[{start:{line:200,column:13},end:{line:203,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:200},16:{loc:{start:{line:200,column:17},end:{line:200,column:46}},type:"binary-expr",locations:[{start:{line:200,column:17},end:{line:200,column:26}},{start:{line:200,column:30},end:{line:200,column:46}}],line:200},17:{loc:{start:{line:205,column:6},end:{line:211,column:7}},type:"if",locations:[{start:{line:205,column:6},end:{line:211,column:7}},{start:{line:208,column:13},end:{line:211,column:7}}],line:205},18:{loc:{start:{line:205,column:10},end:{line:205,column:39}},type:"binary-expr",locations:[{start:{line:205,column:10},end:{line:205,column:19}},{start:{line:205,column:23},end:{line:205,column:39}}],line:205},19:{loc:{start:{line:208,column:13},end:{line:211,column:7}},type:"if",locations:[{start:{line:208,column:13},end:{line:211,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:208},20:{loc:{start:{line:208,column:17},end:{line:208,column:46}},type:"binary-expr",locations:[{start:{line:208,column:17},end:{line:208,column:26}},{start:{line:208,column:30},end:{line:208,column:46}}],line:208},21:{loc:{start:{line:225,column:21},end:{line:225,column:55}},type:"binary-expr",locations:[{start:{line:225,column:21},end:{line:225,column:49}},{start:{line:225,column:53},end:{line:225,column:55}}],line:225},22:{loc:{start:{line:226,column:24},end:{line:226,column:93}},type:"binary-expr",locations:[{start:{line:226,column:24},end:{line:226,column:70}},{start:{line:226,column:74},end:{line:226,column:93}}],line:226},23:{loc:{start:{line:227,column:21},end:{line:227,column:110}},type:"cond-expr",locations:[{start:{line:227,column:55},end:{line:227,column:96}},{start:{line:227,column:99},end:{line:227,column:110}}],line:227},24:{loc:{start:{line:238,column:4},end:{line:242,column:5}},type:"if",locations:[{start:{line:238,column:4},end:{line:242,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:238},25:{loc:{start:{line:238,column:8},end:{line:238,column:123}},type:"binary-expr",locations:[{start:{line:238,column:8},end:{line:238,column:40}},{start:{line:238,column:44},end:{line:238,column:123}}],line:238},26:{loc:{start:{line:252,column:30},end:{line:252,column:39}},type:"default-arg",locations:[{start:{line:252,column:37},end:{line:252,column:39}}],line:252},27:{loc:{start:{line:259,column:4},end:{line:261,column:5}},type:"if",locations:[{start:{line:259,column:4},end:{line:261,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:259},28:{loc:{start:{line:259,column:8},end:{line:259,column:62}},type:"binary-expr",locations:[{start:{line:259,column:8},end:{line:259,column:23}},{start:{line:259,column:27},end:{line:259,column:62}}],line:259},29:{loc:{start:{line:262,column:4},end:{line:264,column:5}},type:"if",locations:[{start:{line:262,column:4},end:{line:264,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:262},30:{loc:{start:{line:262,column:8},end:{line:262,column:62}},type:"binary-expr",locations:[{start:{line:262,column:8},end:{line:262,column:23}},{start:{line:262,column:27},end:{line:262,column:62}}],line:262},31:{loc:{start:{line:266,column:6},end:{line:268,column:7}},type:"if",locations:[{start:{line:266,column:6},end:{line:268,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:266},32:{loc:{start:{line:266,column:10},end:{line:266,column:69}},type:"binary-expr",locations:[{start:{line:266,column:10},end:{line:266,column:16}},{start:{line:266,column:20},end:{line:266,column:35}},{start:{line:266,column:39},end:{line:266,column:69}}],line:266},33:{loc:{start:{line:270,column:4},end:{line:272,column:5}},type:"if",locations:[{start:{line:270,column:4},end:{line:272,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:270},34:{loc:{start:{line:273,column:19},end:{line:273,column:51}},type:"binary-expr",locations:[{start:{line:273,column:19},end:{line:273,column:45}},{start:{line:273,column:49},end:{line:273,column:51}}],line:273},35:{loc:{start:{line:275,column:4},end:{line:286,column:5}},type:"if",locations:[{start:{line:275,column:4},end:{line:286,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:275},36:{loc:{start:{line:275,column:8},end:{line:275,column:35}},type:"binary-expr",locations:[{start:{line:275,column:8},end:{line:275,column:16}},{start:{line:275,column:20},end:{line:275,column:35}}],line:275},37:{loc:{start:{line:278,column:8},end:{line:283,column:9}},type:"if",locations:[{start:{line:278,column:8},end:{line:283,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:278},38:{loc:{start:{line:278,column:12},end:{line:278,column:56}},type:"binary-expr",locations:[{start:{line:278,column:12},end:{line:278,column:27}},{start:{line:278,column:31},end:{line:278,column:56}}],line:278},39:{loc:{start:{line:289,column:6},end:{line:302,column:7}},type:"if",locations:[{start:{line:289,column:6},end:{line:302,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:289},40:{loc:{start:{line:304,column:6},end:{line:317,column:7}},type:"if",locations:[{start:{line:304,column:6},end:{line:317,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:304},41:{loc:{start:{line:319,column:6},end:{line:337,column:7}},type:"if",locations:[{start:{line:319,column:6},end:{line:337,column:7}},{start:{line:333,column:13},end:{line:337,column:7}}],line:319},42:{loc:{start:{line:321,column:20},end:{line:321,column:78}},type:"cond-expr",locations:[{start:{line:321,column:40},end:{line:321,column:67}},{start:{line:321,column:70},end:{line:321,column:78}}],line:321},43:{loc:{start:{line:321,column:20},end:{line:321,column:37}},type:"binary-expr",locations:[{start:{line:321,column:20},end:{line:321,column:25}},{start:{line:321,column:29},end:{line:321,column:37}}],line:321},44:{loc:{start:{line:340,column:4},end:{line:354,column:5}},type:"if",locations:[{start:{line:340,column:4},end:{line:354,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:340},45:{loc:{start:{line:344,column:8},end:{line:352,column:9}},type:"if",locations:[{start:{line:344,column:8},end:{line:352,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:344},46:{loc:{start:{line:355,column:4},end:{line:357,column:5}},type:"if",locations:[{start:{line:355,column:4},end:{line:357,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:355},47:{loc:{start:{line:358,column:4},end:{line:360,column:5}},type:"if",locations:[{start:{line:358,column:4},end:{line:360,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:358},48:{loc:{start:{line:361,column:4},end:{line:363,column:5}},type:"if",locations:[{start:{line:361,column:4},end:{line:363,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:361},49:{loc:{start:{line:364,column:4},end:{line:366,column:5}},type:"if",locations:[{start:{line:364,column:4},end:{line:366,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:364},50:{loc:{start:{line:397,column:4},end:{line:397,column:38}},type:"if",locations:[{start:{line:397,column:4},end:{line:397,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:397},51:{loc:{start:{line:398,column:4},end:{line:402,column:5}},type:"if",locations:[{start:{line:398,column:4},end:{line:402,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:398},52:{loc:{start:{line:432,column:26},end:{line:432,column:70}},type:"cond-expr",locations:[{start:{line:432,column:46},end:{line:432,column:65}},{start:{line:432,column:68},end:{line:432,column:70}}],line:432},53:{loc:{start:{line:433,column:31},end:{line:433,column:87}},type:"cond-expr",locations:[{start:{line:433,column:69},end:{line:433,column:78}},{start:{line:433,column:81},end:{line:433,column:87}}],line:433},54:{loc:{start:{line:457,column:21},end:{line:457,column:44}},type:"binary-expr",locations:[{start:{line:457,column:21},end:{line:457,column:38}},{start:{line:457,column:42},end:{line:457,column:44}}],line:457},55:{loc:{start:{line:458,column:4},end:{line:469,column:5}},type:"if",locations:[{start:{line:458,column:4},end:{line:469,column:5}},{start:{line:467,column:11},end:{line:469,column:5}}],line:458},56:{loc:{start:{line:480,column:6},end:{line:516,column:7}},type:"if",locations:[{start:{line:480,column:6},end:{line:516,column:7}},{start:{line:485,column:13},end:{line:516,column:7}}],line:480},57:{loc:{start:{line:480,column:10},end:{line:480,column:56}},type:"binary-expr",locations:[{start:{line:480,column:10},end:{line:480,column:34}},{start:{line:480,column:38},end:{line:480,column:56}}],line:480},58:{loc:{start:{line:481,column:26},end:{line:481,column:92}},type:"binary-expr",locations:[{start:{line:481,column:26},end:{line:481,column:49}},{start:{line:481,column:53},end:{line:481,column:92}}],line:481},59:{loc:{start:{line:482,column:8},end:{line:484,column:9}},type:"if",locations:[{start:{line:482,column:8},end:{line:484,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:482},60:{loc:{start:{line:497,column:10},end:{line:499,column:11}},type:"if",locations:[{start:{line:497,column:10},end:{line:499,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:497},61:{loc:{start:{line:505,column:10},end:{line:512,column:11}},type:"if",locations:[{start:{line:505,column:10},end:{line:512,column:11}},{start:{line:508,column:17},end:{line:512,column:11}}],line:505},62:{loc:{start:{line:518,column:4},end:{line:523,column:5}},type:"if",locations:[{start:{line:518,column:4},end:{line:523,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:518},63:{loc:{start:{line:526,column:21},end:{line:526,column:55}},type:"binary-expr",locations:[{start:{line:526,column:21},end:{line:526,column:49}},{start:{line:526,column:53},end:{line:526,column:55}}],line:526},64:{loc:{start:{line:527,column:11},end:{line:527,column:52}},type:"binary-expr",locations:[{start:{line:527,column:11},end:{line:527,column:40}},{start:{line:527,column:44},end:{line:527,column:52}}],line:527},65:{loc:{start:{line:537,column:16},end:{line:537,column:41}},type:"binary-expr",locations:[{start:{line:537,column:16},end:{line:537,column:29}},{start:{line:537,column:33},end:{line:537,column:41}}],line:537},66:{loc:{start:{line:550,column:4},end:{line:572,column:5}},type:"if",locations:[{start:{line:550,column:4},end:{line:572,column:5}},{start:{line:560,column:11},end:{line:572,column:5}}],line:550},67:{loc:{start:{line:574,column:4},end:{line:576,column:5}},type:"if",locations:[{start:{line:574,column:4},end:{line:576,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:574},68:{loc:{start:{line:578,column:4},end:{line:580,column:5}},type:"if",locations:[{start:{line:578,column:4},end:{line:580,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:578},69:{loc:{start:{line:589,column:66},end:{line:589,column:91}},type:"cond-expr",locations:[{start:{line:589,column:81},end:{line:589,column:84}},{start:{line:589,column:87},end:{line:589,column:91}}],line:589},70:{loc:{start:{line:590,column:4},end:{line:594,column:5}},type:"if",locations:[{start:{line:590,column:4},end:{line:594,column:5}},{start:{line:592,column:11},end:{line:594,column:5}}],line:590},71:{loc:{start:{line:595,column:4},end:{line:599,column:5}},type:"if",locations:[{start:{line:595,column:4},end:{line:599,column:5}},{start:{line:597,column:11},end:{line:599,column:5}}],line:595},72:{loc:{start:{line:597,column:11},end:{line:599,column:5}},type:"if",locations:[{start:{line:597,column:11},end:{line:599,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:597},73:{loc:{start:{line:605,column:4},end:{line:617,column:5}},type:"if",locations:[{start:{line:605,column:4},end:{line:617,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:605},74:{loc:{start:{line:605,column:8},end:{line:605,column:39}},type:"binary-expr",locations:[{start:{line:605,column:8},end:{line:605,column:18}},{start:{line:605,column:22},end:{line:605,column:39}}],line:605},75:{loc:{start:{line:619,column:4},end:{line:621,column:5}},type:"if",locations:[{start:{line:619,column:4},end:{line:621,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:619},76:{loc:{start:{line:619,column:8},end:{line:619,column:27}},type:"binary-expr",locations:[{start:{line:619,column:8},end:{line:619,column:12}},{start:{line:619,column:16},end:{line:619,column:27}}],line:619},77:{loc:{start:{line:623,column:4},end:{line:646,column:5}},type:"if",locations:[{start:{line:623,column:4},end:{line:646,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:623},78:{loc:{start:{line:631,column:8},end:{line:636,column:9}},type:"if",locations:[{start:{line:631,column:8},end:{line:636,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:631},79:{loc:{start:{line:633,column:10},end:{line:635,column:11}},type:"if",locations:[{start:{line:633,column:10},end:{line:635,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:633},80:{loc:{start:{line:637,column:8},end:{line:642,column:9}},type:"if",locations:[{start:{line:637,column:8},end:{line:642,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:637},81:{loc:{start:{line:685,column:19},end:{line:685,column:51}},type:"binary-expr",locations:[{start:{line:685,column:19},end:{line:685,column:45}},{start:{line:685,column:49},end:{line:685,column:51}}],line:685},82:{loc:{start:{line:686,column:26},end:{line:686,column:92}},type:"cond-expr",locations:[{start:{line:686,column:46},end:{line:686,column:83}},{start:{line:686,column:86},end:{line:686,column:92}}],line:686},83:{loc:{start:{line:701,column:23},end:{line:708,column:14}},type:"cond-expr",locations:[{start:{line:701,column:70},end:{line:708,column:5}},{start:{line:708,column:8},end:{line:708,column:14}}],line:701},84:{loc:{start:{line:724,column:24},end:{line:743,column:14}},type:"cond-expr",locations:[{start:{line:724,column:56},end:{line:743,column:5}},{start:{line:743,column:8},end:{line:743,column:14}}],line:724},85:{loc:{start:{line:744,column:24},end:{line:754,column:14}},type:"cond-expr",locations:[{start:{line:744,column:97},end:{line:754,column:5}},{start:{line:754,column:8},end:{line:754,column:14}}],line:744}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0,153:0,154:0,155:0,156:0,157:0,158:0,159:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,168:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,179:0,180:0,181:0,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:0,190:0,191:0,192:0,193:0,194:0,195:0,196:0,197:0,198:0,199:0,200:0,201:0,202:0,203:0,204:0,205:0,206:0,207:0,208:0,209:0,210:0,211:0,212:0,213:0,214:0,215:0,216:0,217:0,218:0,219:0,220:0,221:0,222:0,223:0,224:0,225:0,226:0,227:0,228:0,229:0,230:0,231:0,232:0,233:0,234:0,235:0,236:0,237:0,238:0,239:0,240:0,241:0,242:0,243:0,244:0,245:0,246:0,247:0,248:0,249:0,250:0,251:0,252:0,253:0,254:0,255:0,256:0,257:0,258:0,259:0,260:0,261:0,262:0,263:0,264:0,265:0,266:0,267:0,268:0,269:0,270:0,271:0,272:0,273:0,274:0,275:0,276:0,277:0,278:0,279:0,280:0,281:0,282:0,283:0,284:0,285:0,286:0,287:0,288:0,289:0,290:0,291:0,292:0,293:0,294:0,295:0,296:0,297:0,298:0,299:0,300:0,301:0,302:0,303:0,304:0,305:0,306:0,307:0,308:0,309:0,310:0,311:0,312:0,313:0,314:0,315:0,316:0,317:0,318:0,319:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0,0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0],48:[0,0],49:[0,0],50:[0,0],51:[0,0],52:[0,0],53:[0,0],54:[0,0],55:[0,0],56:[0,0],57:[0,0],58:[0,0],59:[0,0],60:[0,0],61:[0,0],62:[0,0],63:[0,0],64:[0,0],65:[0,0],66:[0,0],67:[0,0],68:[0,0],69:[0,0],70:[0,0],71:[0,0],72:[0,0],73:[0,0],74:[0,0],75:[0,0],76:[0,0],77:[0,0],78:[0,0],79:[0,0],80:[0,0],81:[0,0],82:[0,0],83:[0,0],84:[0,0],85:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/App.tsx"],names:["shortcut","mapStyle","style"],mappings:"AAurBmB,SAAA,KAwNA,YAxNA;AAvrBnB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,SAAS;AAChB,SAAQ,aAAY;AACpB,SAAQ,wBAAuB;AAC/B,OAAO,UAAU;AACjB,SAAS,eAAe;AAExB,SAAQ,wBAAuB;AAC/B,OAAO,YAAY;AAEnB,OAAO,mBAAmB;AAC1B,OAAO,mBAAmB;AAC1B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,gBAAmC;AAC1C,OAAO,eAAe;AACtB,OAAO,kBAAkB;AAEzB,OAAO,mBAAmB;AAC1B,OAAO,iBAAiB;AACxB,OAAO,kBAAkB;AACzB,OAAO,eAAe;AACtB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AACvB,OAAO,sBAAsB;AAE7B,SAAQ,wBAAwB,8BAA6B;AAC7D,OAAO,WAAW;AAClB,SAAS,cAAc,oBAAoB;AAC3C,SAAS,wBAA0C;AACnD,SAAS,qBAAqB;AAC9B,OAAO,kBAAkB;AACzB,OAAO,YAAY;AACnB,OAAO,aAAa;AAKpB,OAAO,SAAS,OAAO;AAEvB,SAAS,oBAAoB,KAAa,UAA8B;AACtE,QAAM,qBAAqB,IAAI,MAAM,oBAAoB;AACzD,QAAM,kBAAkB,IAAI,MAAM,iBAAiB;AACnD,QAAM,uBAAuB,IAAI,MAAM,sBAAsB;AAC7D,QAAM,oBAAoB,IAAI,MAAM,mBAAmB;AACvD,MAAI,sBAAsB,iBAAiB;AACzC,UAAM,cAAc,MAAM,eAAe,gBAAgB,UAAU,EAAC,eAAe,KAAI,CAAC;AACxF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,sBAAsB;AAC7B,UAAM,cAAc,MAAM,eAAe,iBAAiB,UAAU,EAAC,eAAe,KAAI,CAAC;AACzF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,mBAAmB;AAC1B,UAAM,cAAc,MAAM,eAAe,cAAc,UAAU,EAAC,eAAe,KAAI,CAAC;AACtF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,eAAe,MAAW,WAAmB,WAAgB;AACpE,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,MACL,GAAG,KAAK;AAAA,MACR,CAAC,SAAS,GAAG;AAAA,QACX,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACF;AACF;AAyCA,qBAAqB,YAAY,MAAM,UAAyB;AAAA,EAC9D;AAAA,EACA,aAAiC;AAAA,EACjC;AAAA,EAEA,YAAY,OAAY;AACtB,UAAM,KAAK;AAEX,SAAK,gBAAgB,IAAI,cAAc;AACvC,SAAK,2BAA2B;AAEhC,SAAK,QAAQ;AAAA,MACX,QAAQ,CAAC;AAAA,MACT,OAAO,CAAC;AAAA,MACR,UAAU,MAAM;AAAA,MAChB,oBAAoB;AAAA,MACpB,SAAS,CAAC;AAAA,MACV,cAAc,CAAC;AAAA,MACf,UAAU;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,UACN,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,aAAa;AAAA,QACb,YAAY;AAAA,MACd;AAAA,MACA,wBAAwB;AAAA,QACtB,oBAAoB;AAAA,QACpB,oBAAoB;AAAA,QACpB,uBAAuB;AAAA,MACzB;AAAA,MACA,wBAAwB;AAAA,QACtB,cAAc;AAAA,MAChB;AAAA,MACA,YAAY;AAAA,IACd;AAEA,SAAK,eAAe,IAAI,aAAa;AAAA,MACnC,sBAAsB,CAAA,MAAK,KAAK,SAAS,EAAE,cAAc,EAAE,CAAC;AAAA,IAC9D,CAAC;AAAA,EACH;AAAA,EAEA,6BAA6B,MAAM;AACjC,UAAM,YAAY;AAAA,MAChB;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,WAAW;AAAA,QAC9B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,MAAM;AAAA,QACzB;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,QAAQ;AAAA,QAC3B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,UAAU;AAAA,QAC7B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,aAAa;AAAA,QAChC;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK;AAAA,YACH,KAAK,MAAM,aAAa,QAAQ,YAAY;AAAA,UAC9C;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACZ,mBAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,QAC5E;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,aAAS,KAAK,iBAAiB,SAAS,CAAC,MAAM;AAC7C,UAAG,EAAE,QAAQ,UAAU;AACpB,UAAE,OAAuB,KAAK;AAC/B,iBAAS,KAAK,MAAM;AAAA,MACtB,WACQ,KAAK,MAAM,OAAO,aAAa,SAAS,kBAAkB,SAAS,MAAM;AAC/E,cAAM,WAAW,UAAU,KAAK,CAACA,cAAa;AAC5C,iBAAQA,UAAS,QAAQ,EAAE;AAAA,QAC7B,CAAC;AAED,YAAG,UAAU;AACX,eAAK,SAAS,aAAa,KAAK;AAChC,mBAAS,QAAQ;AAAA,QACnB;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,CAAC,MAAqB;AACrC,QAAG,UAAU,SAAS,YAAY,EAAE,QAAQ,KAAK,KAAK,GAAG;AACvD,UAAG,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,IAAI;AAC9C,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF,OACK;AACH,UAAG,EAAE,WAAW,EAAE,YAAY,IAAI;AAChC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF;AAAA,EACF;AAAA,EAEA,MAAM,oBAAoB;AACxB,SAAK,aAAa,MAAM,iBAAiB,CAAC,UAAU,SAAS,KAAK,eAAe,UAAU,IAAI,CAAC;AAChG,WAAO,iBAAiB,WAAW,KAAK,cAAc;AAAA,EACxD;AAAA,EAEA,uBAAuB;AACrB,WAAO,oBAAoB,WAAW,KAAK,cAAc;AAAA,EAC3D;AAAA,EAEA,UAAU,eAAyC;AACjD,SAAK,YAAY,KAAK,aAAa;AAAA,EACrC;AAAA,EAEA,YAAY,aAAqB;AAC/B,UAAM,WAAoC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC3E,UAAM,cAAc,SAAS,oCAAoC,KAAK,OAAO;AAE7E,UAAM,WAAY,OAAO,gBAAgB,WAAW,YAAY,QAAQ,SAAS,WAAW,IAAG;AAC/F,2BAAuB,UAAU,CAAA,UAAS;AACxC,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,SAAiB;AAC3B,2BAAuB,SAAS,CAAA,UAAS;AACvC,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,2BAA2B,CAAC,UAAkB,UAAe;AAE3D,QACE,aAAa,uBACb,UAAU,IAAI,KAAK,MAAM,UAAU,CAAC,YAAY,mBAAmB,GAAG,QAAQ,GAC9E;AACA,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAI,KAAK,MAAM,SAAiB;AAAA,QAChC,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAEA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAoC,OAAyB,CAAC,MAAY;AAC1F,WAAO;AAAA,MACL,MAAM;AAAA,MACN,aAAa;AAAA,MACb,aAAa;AAAA,MACb,GAAG;AAAA,IACL;AAKA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,eAAW,CAAC,WAAW,MAAM,KAAK,OAAO,QAAQ,SAAS,OAAO,GAAG;AAClE,UAAI,UAAU,SAAS,UAAU,OAAO,OAAO,QAAQ,UAAU;AAC/D,eAAO,MAAM,oBAAoB,OAAO,KAAK,QAAQ;AAAA,MACvD;AAAA,IACF;AAGA,QAAI,KAAK,aAAa;AACpB,WAAK,uBAAuB,QAAQ;AAAA,IACtC;AAEA,UAAM,SAA4B,iBAAiB,QAAQ,KAAK,CAAC;AAGjE,UAAM,cAA2C,CAAC;AAClD,QAAI,YAAY,SAAS,QAAQ;AAC/B,YAAM,cAAc,IAAI,OAAO,IAAI;AACnC,eAAS,OAAO,QAAQ,CAAC,OAAO,UAAU;AACxC,YAAI,MAAM,OAAO,MAAM,YAAY,IAAI,MAAM,EAAE,GAAG;AAChD,gBAAM,QAAQ,IAAI;AAAA,YAChB,UAAU,KAAK;AAAA,UACjB;AACA,sBAAY,KAAK,KAAK;AAAA,QACxB;AACA,oBAAY,IAAI,MAAM,IAAI,IAAI;AAAA,MAChC,CAAC;AAAA,IACH;AAEA,UAAM,eAA8B,YAAY,OAAO,MAAM,EAAE,IAAI,CAAA,UAAS;AAE1E,YAAM,WAAW,MAAM,QAAQ,MAAM,iEAAiE;AACtG,UAAI,UAAU;AACZ,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAGA,YAAM,qBAAqB,MAAM,QAAQ,MAAM,8CAA8C;AAC7F,UAAI,oBAAoB;AACtB,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,aAAa,MAAM,QAAQ,MAAM,0CAA0C;AACjF,UAAI,YAAY;AACd,cAAM,CAAC,EAAE,OAAO,OAAO,UAAU,OAAO,IAAI;AAC5C,cAAM,MAAO,SAAS,WAAY,CAAC,OAAO,QAAQ,EAAE,KAAK,GAAG,IAAI;AAChE,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,OACK;AACH,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,QACjB;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,gBAAgD;AACpD,QAAI,OAAO,SAAS,GAAG;AACrB,sBAAgB,UAAU,QAAQ;AAElC,iBAAW,SAAS,QAAQ;AAC1B,cAAM,EAAC,QAAO,IAAI;AAClB,YAAI,SAAS;AACX,cAAI;AACF,kBAAM,UAAU,QAAQ,MAAM,GAAG,EAAE,CAAC;AAEpC,kBAAM,YAAY,QAAQ,MAAM,qBAAqB,EAAG,CAAC;AACzD,kBAAM,eAAe,SAAS;AAAA,UAChC,SACO,KAAK;AACV,oBAAQ,KAAK,UAAU,MAAM,GAAG;AAAA,UAClC;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AACA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AAEA,QAAI,KAAK,aAAa;AACpB,WAAK,cAAc,YAAY,QAAQ;AAAA,IACzC;AACA,QAAI,KAAK,MAAM;AACb,WAAK,UAAU,QAAQ;AAAA,IACzB;AAEA,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,MACV;AAAA,MACA,QAAQ;AAAA,IACV,GAAG,MAAM;AACP,WAAK,aAAa;AAClB,WAAK,cAAc;AAAA,IACrB,CAAC;AAAA,EAEH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAE5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAC5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,SAA+C;AAC5D,QAAI,EAAE,UAAU,SAAS,IAAI;AAC7B,QAAI,SAAS,KAAK,MAAM,SAAS;AACjC,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,QAAG,aAAa,SAAU;AAE1B,QAAI,aAAa,KAAK,MAAM,oBAAoB;AAC9C,WAAK,SAAS;AAAA,QACZ,oBAAoB;AAAA,MACtB,CAAC;AAAA,IACH;AAEA,aAAS,OAAO,MAAM,CAAC;AACvB,qBAAiB,QAAQ,UAAU,QAAQ;AAC3C,SAAK,eAAe,MAAM;AAAA,EAC5B;AAAA,EAEA,iBAAiB,CAAC,kBAAwC;AACxD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,QAAQ;AAAA,IACV;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAkB;AAClC,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,kBAAkB,OAAO,MAAM,CAAC;AACtC,oBAAgB,OAAO,OAAO,CAAC;AAC/B,SAAK,eAAe,eAAe;AAAA,EACrC;AAAA,EAEA,cAAc,CAAC,UAAkB;AAC/B,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,cAAc,UAAU,cAAc,KAAK,CAAC;AAClD,gBAAY,KAAK,YAAY,KAAK;AAClC,kBAAc,OAAO,OAAO,GAAG,WAAW;AAC1C,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,0BAA0B,CAAC,UAAkB;AAC3C,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,QAAQ,EAAE,GAAG,cAAc,KAAK,EAAE;AACxC,UAAM,gBAAgB,YAAY,QAAQ,EAAC,GAAG,MAAM,OAAM,IAAI,CAAC;AAC/D,kBAAc,aAAa,cAAc,eAAe,SAAS,YAAY;AAE7E,UAAM,SAAS;AACf,kBAAc,KAAK,IAAI;AACvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAGA,kBAAkB,CAAC,OAAe,QAAgB,UAAkB;AAClE,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAAA,MACrB,GAAG,cAAc,KAAK;AAAA,MACtB,IAAI;AAAA,IACN;AAEA,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,OAAe,UAA8B;AAC7D,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAEvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,aAAuB;AACpC,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,mBAAmB,CAAC,aAAuC;AACzD,UAAM,WAAoC,SAAS,YAAY,CAAC;AAChE,QAAG,SAAS,mBAAmB,MAAM,QAAW;AAC9C,YAAM,eAAe;AAAA,QACnB,GAAG;AAAA,QACH,UAAU;AAAA,UACR,GAAG,SAAS;AAAA,UACZ,qBAAqB;AAAA,QACvB;AAAA,MACF;AACA,aAAO;AAAA,IACT,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,YAAY,CAAC,UAAoC,eAA4C;AAC3F,SAAK,SAAS,EAAC,WAAsB,CAAC;AACtC,eAAW,KAAK,iBAAiB,QAAQ;AACzC,SAAK,eAAe,QAAQ;AAAA,EAC9B;AAAA,EAEA,MAAM,eAAe;AACnB,UAAM,aAAwE,CAAC;AAC/E,eAAU,OAAO,OAAO,KAAK,KAAK,MAAM,SAAS,OAAO,GAAG;AACzD,YAAM,SAAS,KAAK,MAAM,SAAS,QAAQ,GAAG;AAC9C,UAAG,OAAO,SAAS,YAAY,EAAE,SAAS,SAAS;AACjD,mBAAW,GAAG,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,EAAC,GAAG,KAAK,MAAM,SAAS,QAAQ,GAAG,EAAC;AACjF,YAAI,WAAW,GAAG,EAAE,WAAW,QAAW;AACxC,qBAAW,GAAG,EAAE,SAAS,CAAC;AAAA,QAC5B;AAAA,MACF,OAAO;AACL,mBAAW,GAAG,IAAI;AAAA,UAChB,MAAM,OAAO;AAAA,UACb,QAAQ,CAAC;AAAA,QACX;AAEA,YAAI,MAAM,OAAO;AAEjB,YAAI;AACF,gBAAM,oBAAoB,KAAM,KAAK,MAAM,QAAQ;AAAA,QACrD,SAAQ,KAAK;AACX,kBAAQ,KAAK,mCAAmC,GAAG;AAAA,QACrD;AAEA,cAAM,kBAAkB,CAAC,SAAa;AACpC,cAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,eAAe,GAAG;AAC/D;AAAA,UACF;AAEA,qBAAU,SAAS,KAAK,eAAe;AACrC,uBAAW,GAAG,EAAE,OAAO,KAAK,MAAM,EAAE;AAAA,UACtC;AAAA,QACF;AAEA,YAAI;AACF,cAAI,IAAK,WAAW,YAAY,GAAG;AACjC,kBAAM,OAAO,MAAO,IAAI,QAAQ,IAAK,UAAU,EAAE,CAAC,EAAG,YAAY,EAAE;AACnE,4BAAgB,IAAI;AAAA,UACtB,OAAO;AACL,kBAAM,WAAW,MAAM,MAAM,KAAM,EAAE,MAAM,OAAO,CAAC;AACnD,kBAAM,OAAO,MAAM,SAAS,KAAK;AACjC,4BAAgB,IAAI;AAAA,UACtB;AAAA,QACF,SAAQ,KAAK;AACX,kBAAQ,MAAM,sCAAsC,GAAG,MAAM,GAAG,EAAE;AAAA,QACpE;AAAA,MACF;AAAA,IACF;AAEA,QAAG,CAAC,QAAQ,KAAK,MAAM,SAAS,UAAU,GAAG;AAC3C,cAAQ,MAAM,mBAAmB,UAAU;AAC3C,WAAK,SAAS;AAAA,QACZ,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,eAAgB;AACd,UAAM,WAAmC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC1E,WAAO,SAAS,mBAAmB,KAAK;AAAA,EAC1C;AAAA,EAEA,cAAc,CAAC,YAMT;AACJ,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,cAAc;AACZ,UAAM,EAAC,UAAU,cAAa,IAAI,KAAK;AAEvC,UAAM,WAAW;AAAA,MACf,UAAW,iBAAiB;AAAA,MAC5B,qBAAqB,CAACC,cAAiC;AACrD,eAAO,MAAM,oBAAoBA,WAAU;AAAA,UACzC,eAAe;AAAA,QACjB,CAAC;AAAA,MACH;AAAA,MACA,cAAc,CAAC,MAAkB;AAC/B,aAAK,aAAa,WAAW,EAAE,GAAG;AAClC,aAAK,aAAa;AAAA,MACpB;AAAA,IACF;AAEA,UAAM,WAAW,KAAK,aAAa;AAEnC,QAAI;AAGJ,QAAG,aAAa,MAAM;AACpB,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UACX,GAAG;AAAA,UACJ,UAAU,KAAK;AAAA,UACf,cAAc,KAAK,MAAM,uBAAuB;AAAA,UAChD,eAAe,CAAC,YAAY,KAAK,cAAc,CAAC,OAAO;AAAA,QAAA;AAAA,MACzD;AAAA,IACF,OAAO;AAEL,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UAAe,GAAG;AAAA,UAC9B,UAAU,KAAK;AAAA,UACf,SAAS,KAAK,MAAM;AAAA,UACpB,oBAAoB,KAAK,MAAM,aAAa;AAAA,UAC5C,kBAAkB,KAAK,MAAM,SAAS,OAAO,KAAK,MAAM,kBAAkB;AAAA,UAC1E,eAAe,KAAK;AAAA,QAAA;AAAA,MAAe;AAAA,IACvC;AAEA,QAAI;AACJ,QAAG,KAAK,MAAM,SAAS,MAAM,UAAU,GAAG;AACxC,mBAAa,KAAK,MAAM,SAAS,QAAQ,YAAY,EAAE;AAAA,IACzD;AACA,UAAM,eAAkC,CAAC;AACzC,QAAI,YAAY;AACd,mBAAa,SAAS,SAAS,UAAU;AAAA,IAC3C;AAEA,WAAO,oBAAC,SAAI,OAAO,cAAc,WAAU,2BAA0B,eAAY,sBAC9E,UAAA,WAAA,CACH;AAAA,EACF;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,EAAC,UAAU,UAAU,OAAM,IAAI,KAAK;AAC1C,UAAM,EAAC,mBAAkB,IAAI,KAAK;AAClC,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,UAAU,KAAK,KAAK,UAAU,QAAQ,CAAC;AAC7C,QAAI,aAAa,IAAI,SAAS,GAAG,OAAO,IAAI,kBAAkB,EAAE;AAEhE,UAAM,aAAa,OAAO,QAAQ,MAAM,EACrC,IAAI,CAAC,CAAC,KAAK,GAAG,MAAO,QAAQ,OAAO,MAAM,IAAK,EAC/C,OAAO,CAAA,QAAO,QAAQ,IAAI;AAE7B,QAAI,WAAW,SAAS,GAAG;AACzB,UAAI,aAAa,IAAI,SAAS,WAAW,KAAK,GAAG,CAAC;AAAA,IACpD,OACK;AACH,UAAI,aAAa,OAAO,OAAO;AAAA,IACjC;AAEA,QAAI,aAAa,OAAO;AACtB,UAAI,aAAa,OAAO,MAAM;AAAA,IAChC,WACS,aAAa,WAAW;AAC/B,UAAI,aAAa,IAAI,QAAQ,SAAS;AAAA,IACxC;AAEA,YAAQ,aAAa,EAAC,mBAAkB,GAAG,YAAY,IAAI,IAAI;AAAA,EACjE;AAAA,EAEA,yBAAyB,CAAC,aAAiC;AACzD,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,aAAa,IAAI,aAAa,IAAI,OAAO;AAE/C,QAAI,cAAc,eAAe,IAAI;AACnC,YAAM,SAAS,WAAW,MAAM,GAAG;AACnC,YAAM,WAAqC,CAAC;AAC5C,aAAO,QAAQ,CAAA,cAAa;AAC1B,iBAAS,SAAS,IAAI;AAAA,MACxB,CAAC;AAED,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,GAAG,KAAK,MAAM;AAAA,UACd,GAAG;AAAA,QACL;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACxC,QAAI,QAAQ,SAAS,IAAI;AACvB,WAAK,YAAY,IAAgB;AAAA,IACnC;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,OAAO;AACzC,QAAI,MAAM;AACR,UAAI;AACF,cAAM,QAAQ,KAAK,MAAM,GAAG;AAC5B,cAAM,CAAC,SAAS,kBAAkB,IAAI;AAAA,UACpC,MAAM,CAAC;AAAA,UACP,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,QACvB;AAEA,YAAI,QAAQ;AACZ,YAAI,YAAY,KAAK;AACnB,gBAAM,iBAAiB,KAAK,KAAK,UAAU,QAAQ,CAAC;AACpD,cAAI,mBAAmB,SAAS,SAAS,EAAE,GAAG;AAC5C,oBAAQ;AAAA,UACV;AAAA,QACF;AACA,YAAI,OAAO;AACT,eAAK,SAAS;AAAA,YACZ;AAAA,YACA,yBAAyB,SAAS,OAAO,kBAAkB,EAAE;AAAA,UAC/D,CAAC;AAAA,QACH;AAAA,MACF,SACO,KAAK;AACV,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,UAAkB;AACjC,SAAK,SAAS;AAAA,MACZ,oBAAoB;AAAA,MACpB,yBAAyB,KAAK,MAAM,SAAS,OAAO,KAAK,EAAE;AAAA,IAC7D,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,SAAS,WAAqC,OAAgB;AAC5D,SAAK,SAAS;AAAA,MACZ,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG;AAAA,MACf;AAAA,IACF,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,YAAY,WAAqC;AAC/C,SAAK,SAAS,WAAW,CAAC,KAAK,MAAM,OAAO,SAAS,CAAC;AAAA,EACxD;AAAA,EAEA,kBAAkB,CAAC,eAA4C;AAC7D,SAAK,SAAS,EAAE,WAAW,CAAC;AAAA,EAC9B;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAmB;AAC3F,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAe;AACvF,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,MAAM,SAAS,UAAU,CAAC;AAC9C,UAAM,gBAAgB,OAAO,SAAS,IAAI,OAAO,KAAK,MAAM,kBAAkB,IAAI;AAElF,UAAM,UAAU;AAAA,MAAC;AAAA,MAAA;AAAA,QACf,UAAU,KAAK,aAAa;AAAA,QAC5B,UAAU,KAAK,MAAM;AAAA,QACrB,UAAU,KAAK,MAAM;AAAA,QACrB,oBAAoB,KAAK,MAAM,aAAa;AAAA,QAC5C,SAAS,KAAK,MAAM;AAAA,QACpB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,eAAe,KAAK;AAAA,QACpB,eAAe,CAAC,UAAoC,KAAK,YAAY,KAAK;AAAA,MAAA;AAAA,IAC5E;AAEA,UAAM,aAAa,KAAK,MAAM,OAAO,aAAa;AAAA,MAAC;AAAA,MAAA;AAAA,QACjD,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,CAACC,WAAU,KAAK,eAAeA,MAAK;AAAA,QAC9C,SAAS,MAAM,KAAK,SAAS,cAAc,KAAK;AAAA,MAAA;AAAA,IAClD,IAAK;AAEL,UAAM,YAAY;AAAA,MAAC;AAAA,MAAA;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,gBAAgB,KAAK;AAAA,QACrB,eAAe,KAAK;AAAA,QACpB,oBAAoB,KAAK,MAAM;AAAA,QAC/B;AAAA,QACA,SAAS,KAAK,MAAM;AAAA,QACpB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,IACrB;AAEA,UAAM,cAAc,gBAAgB;AAAA,MAAC;AAAA,MAAA;AAAA,QAEnC,OAAO;AAAA,QACP,YAAY,KAAK,MAAM;AAAA,QACvB,cAAc,KAAK,MAAM,qBAAqB;AAAA,QAC9C,aAAa,KAAK,MAAM,uBAAuB,KAAK,MAAM,SAAS,OAAO,SAAO;AAAA,QACjF,SAAS,KAAK,MAAM;AAAA,QACpB,cAAc,KAAK,MAAM;AAAA,QACzB,MAAM,KAAK,MAAM;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,iBAAiB,KAAK;AAAA,QACtB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,MAdd,KAAK,MAAM;AAAA,IAelB,IAAK;AAEL,UAAM,cAAe,KAAK,MAAM,OAAO,SAAS,KAAK,MAAM,MAAM,SAAU,IAAI;AAAA,MAAC;AAAA,MAAA;AAAA,QAC9E,cAAc;AAAA,QACd,oBAAoB,KAAK,MAAM;AAAA,QAC/B,eAAe,KAAK;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,QAAQ,KAAK,MAAM;AAAA,QACnB,OAAO,KAAK,MAAM;AAAA,MAAA;AAAA,IACpB,IAAK;AAGL,UAAM,8BAAU,OAAA,EACd,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,aAAa;AAAA,UAC5B,wBAAwB,KAAK,MAAM;AAAA,UACnC,wBAAwB,KAAK,MAAM;AAAA,UACnC,yBAAyB,KAAK;AAAA,UAC9B,yBAAyB,KAAK;AAAA,UAC9B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,OAAO;AAAA,UAC5C,SAAS,KAAK,MAAM;AAAA,QAAA;AAAA,MACtB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,WAAW;AAAA,QAAA;AAAA,MAClD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,0BAA0B,KAAK;AAAA,UAC/B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,UAAU;AAAA,QAAA;AAAA,MACjD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,QAAQ;AAAA,UAC7C,YAAY,KAAK,MAAM;AAAA,UACvB,iBAAiB,KAAK;AAAA,QAAA;AAAA,MACxB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,aAAa,KAAK;AAAA,UAClB,cAAc,MAAM,KAAK,YAAY,MAAM;AAAA,UAC3C,YAAY,KAAK,MAAM;AAAA,QAAA;AAAA,MACzB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,SAAS;AAAA,QAAA;AAAA,MAChD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,aAAa;AAAA,QAAA;AAAA,MACpD;AAAA,IAAA,EAAA,CACF;AAEA,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,KAAK,KAAK,YAAY;AAAA,QACtB,QAAQ;AAAA,QACR;AAAA,MAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3ada5d61e06df3b0198ab7e31ce0b9225ca7364f"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return pe=function(){return s},s}pe();pe().s[0]++;window.Buffer=gue.Buffer;function XM(n,e){pe().f[0]++;const t=(pe().s[1]++,n.match(/\.tilehosting\.com/)),i=(pe().s[2]++,n.match(/\.maptiler\.com/)),r=(pe().s[3]++,n.match(/\.thunderforest\.com/)),o=(pe().s[4]++,n.match(/\.locationiq\.com/));if(pe().s[5]++,pe().b[1][0]++,t||(pe().b[1][1]++,i)){pe().b[0][0]++;const s=(pe().s[6]++,_d.getAccessToken("openmaptiles",e,{allowFallback:!0}));if(pe().s[7]++,s)return pe().b[2][0]++,pe().s[8]++,n.replace("{key}",s);pe().b[2][1]++}else if(pe().b[0][1]++,pe().s[9]++,r){pe().b[3][0]++;const s=(pe().s[10]++,_d.getAccessToken("thunderforest",e,{allowFallback:!0}));if(pe().s[11]++,s)return pe().b[4][0]++,pe().s[12]++,n.replace("{key}",s);pe().b[4][1]++}else if(pe().b[3][1]++,pe().s[13]++,o){pe().b[5][0]++;const s=(pe().s[14]++,_d.getAccessToken("locationiq",e,{allowFallback:!0}));if(pe().s[15]++,s)return pe().b[6][0]++,pe().s[16]++,n.replace("{key}",s);pe().b[6][1]++}else return pe().b[5][1]++,pe().s[17]++,n}function VH(n,e,t){return pe().f[1]++,pe().s[18]++,{...n,$root:{...n.$root,[e]:{...n.$root[e],values:t}}}}class jUe extends On.Component{revisionStore;styleStore=(pe().s[19]++,null);layerWatcher;constructor(e){pe().f[2]++,pe().s[20]++,super(e),pe().s[21]++,this.revisionStore=new DUe,pe().s[22]++,this.configureKeyboardShortcuts(),pe().s[23]++,this.state={errors:[],infos:[],mapStyle:_d.emptyStyle,selectedLayerIndex:0,sources:{},vectorLayers:{},mapState:"map",spec:Jr,mapView:{zoom:0,center:{lng:0,lat:0}},isOpen:{settings:!1,sources:!1,open:!1,shortcuts:!1,export:!1,debug:!1,globalState:!1,codeEditor:!1},maplibreGlDebugOptions:{showTileBoundaries:!1,showCollisionBoxes:!1,showOverdrawInspector:!1},openlayersDebugOptions:{debugToolbox:!1},fileHandle:null},pe().s[24]++,this.layerWatcher=new zUe({onVectorLayersChange:t=>(pe().f[3]++,pe().s[25]++,this.setState({vectorLayers:t}))})}configureKeyboardShortcuts=(pe().s[26]++,()=>{pe().f[4]++;const e=(pe().s[27]++,[{key:"?",handler:()=>{pe().f[5]++,pe().s[28]++,this.toggleModal("shortcuts")}},{key:"o",handler:()=>{pe().f[6]++,pe().s[29]++,this.toggleModal("open")}},{key:"e",handler:()=>{pe().f[7]++,pe().s[30]++,this.toggleModal("export")}},{key:"d",handler:()=>{pe().f[8]++,pe().s[31]++,this.toggleModal("sources")}},{key:"s",handler:()=>{pe().f[9]++,pe().s[32]++,this.toggleModal("settings")}},{key:"g",handler:()=>{pe().f[10]++,pe().s[33]++,this.toggleModal("globalState")}},{key:"i",handler:()=>{pe().f[11]++,pe().s[34]++,this.setMapState(this.state.mapState==="map"?(pe().b[7][0]++,"inspect"):(pe().b[7][1]++,"map"))}},{key:"m",handler:()=>{pe().f[12]++,pe().s[35]++,document.querySelector(".maplibregl-canvas").focus()}},{key:"!",handler:()=>{pe().f[13]++,pe().s[36]++,this.toggleModal("debug")}}]);pe().s[37]++,document.body.addEventListener("keyup",t=>{if(pe().f[14]++,pe().s[38]++,t.key==="Escape")pe().b[8][0]++,pe().s[39]++,t.target.blur(),pe().s[40]++,document.body.focus();else if(pe().b[8][1]++,pe().s[41]++,pe().b[10][0]++,this.state.isOpen.shortcuts||(pe().b[10][1]++,document.activeElement===document.body)){pe().b[9][0]++;const i=(pe().s[42]++,e.find(r=>(pe().f[15]++,pe().s[43]++,r.key===t.key)));pe().s[44]++,i?(pe().b[11][0]++,pe().s[45]++,this.setModal("shortcuts",!1),pe().s[46]++,i.handler()):pe().b[11][1]++}else pe().b[9][1]++})});handleKeyPress=(pe().s[47]++,e=>{pe().f[16]++,pe().s[48]++,navigator.platform.toUpperCase().indexOf("MAC")>=0?(pe().b[12][0]++,pe().s[49]++,pe().b[14][0]++,e.metaKey&&(pe().b[14][1]++,e.shiftKey)&&(pe().b[14][2]++,e.keyCode===90)?(pe().b[13][0]++,pe().s[50]++,e.preventDefault(),pe().s[51]++,this.onRedo()):(pe().b[13][1]++,pe().s[52]++,pe().b[16][0]++,e.metaKey&&(pe().b[16][1]++,e.keyCode===90)?(pe().b[15][0]++,pe().s[53]++,e.preventDefault(),pe().s[54]++,this.onUndo()):pe().b[15][1]++)):(pe().b[12][1]++,pe().s[55]++,pe().b[18][0]++,e.ctrlKey&&(pe().b[18][1]++,e.keyCode===90)?(pe().b[17][0]++,pe().s[56]++,e.preventDefault(),pe().s[57]++,this.onUndo()):(pe().b[17][1]++,pe().s[58]++,pe().b[20][0]++,e.ctrlKey&&(pe().b[20][1]++,e.keyCode===89)?(pe().b[19][0]++,pe().s[59]++,e.preventDefault(),pe().s[60]++,this.onRedo()):pe().b[19][1]++))});async componentDidMount(){pe().f[17]++,pe().s[61]++,this.styleStore=await RUe((e,t)=>(pe().f[18]++,pe().s[62]++,this.onStyleChanged(e,t))),pe().s[63]++,window.addEventListener("keydown",this.handleKeyPress)}componentWillUnmount(){pe().f[19]++,pe().s[64]++,window.removeEventListener("keydown",this.handleKeyPress)}saveStyle(e){pe().f[20]++,pe().s[65]++,this.styleStore?.save(e)}updateFonts(e){pe().f[21]++;const t=(pe().s[66]++,pe().b[21][0]++,this.state.mapStyle.metadata||(pe().b[21][1]++,{})),i=(pe().s[67]++,pe().b[22][0]++,t["maputnik:openmaptiles_access_token"]||(pe().b[22][1]++,rae.openmaptiles)),r=(pe().s[68]++,typeof e=="string"?(pe().b[23][0]++,e.replace("{key}",i)):(pe().b[23][1]++,e));pe().s[69]++,gUe(r,o=>{pe().f[22]++,pe().s[70]++,this.setState({spec:VH(this.state.spec,"glyphs",o)})})}updateIcons(e){pe().f[23]++,pe().s[71]++,yUe(e,t=>{pe().f[24]++,pe().s[72]++,this.setState({spec:VH(this.state.spec,"sprite",t)})})}onChangeMetadataProperty=(pe().s[73]++,(e,t)=>{pe().f[25]++,pe().s[74]++,pe().b[25][0]++,e==="maputnik:renderer"&&(pe().b[25][1]++,t!==bue(this.state.mapStyle,["metadata","maputnik:renderer"],"mlgljs"))?(pe().b[24][0]++,pe().s[75]++,this.setState({mapState:"map"})):pe().b[24][1]++;const i=(pe().s[76]++,{...this.state.mapStyle,metadata:{...this.state.mapStyle.metadata,[e]:t}});pe().s[77]++,this.onStyleChanged(i)});onStyleChanged=(pe().s[78]++,(e,t=(pe().b[26][0]++,{}))=>{pe().f[26]++,pe().s[79]++,t={save:!0,addRevision:!0,initialLoad:!1,...t},pe().s[80]++,pe().b[28][0]++,e.glyphs&&(pe().b[28][1]++,typeof e.glyphs=="string")?(pe().b[27][0]++,pe().s[81]++,e.glyphs=XM(e.glyphs,e)):pe().b[27][1]++,pe().s[82]++,pe().b[30][0]++,e.sprite&&(pe().b[30][1]++,typeof e.sprite=="string")?(pe().b[29][0]++,pe().s[83]++,e.sprite=XM(e.sprite,e)):pe().b[29][1]++,pe().s[84]++;for(const[a,c]of Object.entries(e.sources))pe().s[85]++,pe().b[32][0]++,c&&(pe().b[32][1]++,"url"in c)&&(pe().b[32][2]++,typeof c.url=="string")?(pe().b[31][0]++,pe().s[86]++,c.url=XM(c.url,e)):pe().b[31][1]++;pe().s[87]++,t.initialLoad?(pe().b[33][0]++,pe().s[88]++,this.getInitialStateFromUrl(e)):pe().b[33][1]++;const i=(pe().s[89]++,pe().b[34][0]++,Md(e)||(pe().b[34][1]++,[])),r=(pe().s[90]++,[]);if(pe().s[91]++,pe().b[36][0]++,e&&(pe().b[36][1]++,e.layers)){pe().b[35][0]++;const a=(pe().s[92]++,new window.Map);pe().s[93]++,e.layers.forEach((c,h)=>{if(pe().f[27]++,pe().s[94]++,pe().b[38][0]++,c.id===""&&(pe().b[38][1]++,a.has(c.id))){pe().b[37][0]++;const m=(pe().s[95]++,new Error(`layers[${h}]: duplicate layer id [empty_string], previously used`));pe().s[96]++,r.push(m)}else pe().b[37][1]++;pe().s[97]++,a.set(c.id,!0)})}else pe().b[35][1]++;const o=(pe().s[98]++,r.concat(i).map(a=>{pe().f[28]++;const c=(pe().s[99]++,a.message.match(/layers\[(\d+)\]: (duplicate layer id "?(.*)"?, previously used)/));if(pe().s[100]++,c){pe().b[39][0]++;const[,y,M]=(pe().s[101]++,c);return pe().s[102]++,{message:a.message,parsed:{type:"layer",data:{index:parseInt(y,10),key:"id",message:M}}}}else pe().b[39][1]++;const h=(pe().s[103]++,a.message.match(/layers\[(\d+)\]: (source "(?:.*)" not found)/));if(pe().s[104]++,h){pe().b[40][0]++;const[,y,M]=(pe().s[105]++,h);return pe().s[106]++,{message:a.message,parsed:{type:"layer",data:{index:parseInt(y,10),key:"source",message:M}}}}else pe().b[40][1]++;const m=(pe().s[107]++,a.message.match(/layers\[(\d+)\]\.(?:(\S+)\.)?(\S+): (.*)/));if(pe().s[108]++,m){pe().b[41][0]++;const[,y,M,x,k]=(pe().s[109]++,m),P=(pe().s[110]++,pe().b[43][0]++,M&&(pe().b[43][1]++,x)?(pe().b[42][0]++,[M,x].join(".")):(pe().b[42][1]++,x));return pe().s[111]++,{message:a.message,parsed:{type:"layer",data:{index:parseInt(y,10),key:P,message:k}}}}else return pe().b[41][1]++,pe().s[112]++,{message:a.message}}));let s=(pe().s[113]++,void 0);if(pe().s[114]++,i.length>0){pe().b[44][0]++,pe().s[115]++,s=fF(e),pe().s[116]++;for(const a of i){const{message:c}=(pe().s[117]++,a);if(pe().s[118]++,c){pe().b[45][0]++,pe().s[119]++;try{const h=(pe().s[120]++,c.split(":")[0]),m=(pe().s[121]++,h.match(/^\S+?\[\d+\]\.[^[]+/)[0]);pe().s[122]++,W4.unset(s,m)}catch(h){pe().s[123]++,console.warn(c+" "+h)}}else pe().b[45][1]++}}else pe().b[44][1]++;pe().s[124]++,e.glyphs!==this.state.mapStyle.glyphs?(pe().b[46][0]++,pe().s[125]++,this.updateFonts(e.glyphs)):pe().b[46][1]++,pe().s[126]++,e.sprite!==this.state.mapStyle.sprite?(pe().b[47][0]++,pe().s[127]++,this.updateIcons(e.sprite)):pe().b[47][1]++,pe().s[128]++,t.addRevision?(pe().b[48][0]++,pe().s[129]++,this.revisionStore.addRevision(e)):pe().b[48][1]++,pe().s[130]++,t.save?(pe().b[49][0]++,pe().s[131]++,this.saveStyle(e)):pe().b[49][1]++,pe().s[132]++,this.setState({mapStyle:e,dirtyMapStyle:s,errors:o},()=>{pe().f[29]++,pe().s[133]++,this.fetchSources(),pe().s[134]++,this.setStateInUrl()})});onUndo=(pe().s[135]++,()=>{pe().f[30]++;const e=(pe().s[136]++,this.revisionStore.undo()),t=(pe().s[137]++,vUe(this.state.mapStyle,e));pe().s[138]++,this.onStyleChanged(e,{addRevision:!1}),pe().s[139]++,this.setState({infos:t})});onRedo=(pe().s[140]++,()=>{pe().f[31]++;const e=(pe().s[141]++,this.revisionStore.redo()),t=(pe().s[142]++,bUe(this.state.mapStyle,e));pe().s[143]++,this.onStyleChanged(e,{addRevision:!1}),pe().s[144]++,this.setState({infos:t})});onMoveLayer=(pe().s[145]++,e=>{pe().f[32]++;let{oldIndex:t,newIndex:i}=(pe().s[146]++,e),r=(pe().s[147]++,this.state.mapStyle.layers);if(pe().s[148]++,t=mF(t,0,r.length-1),pe().s[149]++,i=mF(i,0,r.length-1),pe().s[150]++,t===i){pe().b[50][0]++,pe().s[151]++;return}else pe().b[50][1]++;pe().s[152]++,t===this.state.selectedLayerIndex?(pe().b[51][0]++,pe().s[153]++,this.setState({selectedLayerIndex:i})):pe().b[51][1]++,pe().s[154]++,r=r.slice(0),pe().s[155]++,xue(r,t,i),pe().s[156]++,this.onLayersChange(r)});onLayersChange=(pe().s[157]++,e=>{pe().f[33]++;const t=(pe().s[158]++,{...this.state.mapStyle,layers:e});pe().s[159]++,this.onStyleChanged(t)});onLayerDestroy=(pe().s[160]++,e=>{pe().f[34]++;const t=(pe().s[161]++,this.state.mapStyle.layers),i=(pe().s[162]++,t.slice(0));pe().s[163]++,i.splice(e,1),pe().s[164]++,this.onLayersChange(i)});onLayerCopy=(pe().s[165]++,e=>{pe().f[35]++;const t=(pe().s[166]++,this.state.mapStyle.layers),i=(pe().s[167]++,t.slice(0)),r=(pe().s[168]++,fF(i[e]));pe().s[169]++,r.id=r.id+"-copy",pe().s[170]++,i.splice(e,0,r),pe().s[171]++,this.onLayersChange(i)});onLayerVisibilityToggle=(pe().s[172]++,e=>{pe().f[36]++;const t=(pe().s[173]++,this.state.mapStyle.layers),i=(pe().s[174]++,t.slice(0)),r=(pe().s[175]++,{...i[e]}),o=(pe().s[176]++,"layout"in r?(pe().b[52][0]++,{...r.layout}):(pe().b[52][1]++,{}));pe().s[177]++,o.visibility=o.visibility==="none"?(pe().b[53][0]++,"visible"):(pe().b[53][1]++,"none"),pe().s[178]++,r.layout=o,pe().s[179]++,i[e]=r,pe().s[180]++,this.onLayersChange(i)});onLayerIdChange=(pe().s[181]++,(e,t,i)=>{pe().f[37]++;const r=(pe().s[182]++,this.state.mapStyle.layers.slice(0));pe().s[183]++,r[e]={...r[e],id:i},pe().s[184]++,this.onLayersChange(r)});onLayerChanged=(pe().s[185]++,(e,t)=>{pe().f[38]++;const i=(pe().s[186]++,this.state.mapStyle.layers.slice(0));pe().s[187]++,i[e]=t,pe().s[188]++,this.onLayersChange(i)});setMapState=(pe().s[189]++,e=>{pe().f[39]++,pe().s[190]++,this.setState({mapState:e},this.setStateInUrl)});setDefaultValues=(pe().s[191]++,e=>{pe().f[40]++;const t=(pe().s[192]++,pe().b[54][0]++,e.metadata||(pe().b[54][1]++,{}));if(pe().s[193]++,t["maputnik:renderer"]===void 0){pe().b[55][0]++;const i=(pe().s[194]++,{...e,metadata:{...e.metadata,"maputnik:renderer":"mlgljs"}});return pe().s[195]++,i}else return pe().b[55][1]++,pe().s[196]++,e});openStyle=(pe().s[197]++,(e,t)=>{pe().f[41]++,pe().s[198]++,this.setState({fileHandle:t}),pe().s[199]++,e=this.setDefaultValues(e),pe().s[200]++,this.onStyleChanged(e)});async fetchSources(){pe().f[42]++;const e=(pe().s[201]++,{});pe().s[202]++;for(const t of Object.keys(this.state.mapStyle.sources)){const i=(pe().s[203]++,this.state.mapStyle.sources[t]);if(pe().s[204]++,pe().b[57][0]++,i.type!=="vector"||(pe().b[57][1]++,!("url"in i)))pe().b[56][0]++,pe().s[205]++,e[t]=(pe().b[58][0]++,this.state.sources[t]||(pe().b[58][1]++,{...this.state.mapStyle.sources[t]})),pe().s[206]++,e[t].layers===void 0?(pe().b[59][0]++,pe().s[207]++,e[t].layers=[]):pe().b[59][1]++;else{pe().b[56][1]++,pe().s[208]++,e[t]={type:i.type,layers:[]};let r=(pe().s[209]++,i.url);pe().s[210]++;try{pe().s[211]++,r=XM(r,this.state.mapStyle)}catch(s){pe().s[212]++,console.warn("Failed to setFetchAccessToken: ",s)}pe().s[213]++;const o=s=>{if(pe().f[43]++,pe().s[214]++,Object.prototype.hasOwnProperty.call(s,"vector_layers"))pe().b[60][1]++;else{pe().b[60][0]++,pe().s[215]++;return}pe().s[216]++;for(const a of s.vector_layers)pe().s[217]++,e[t].layers.push(a.id)};pe().s[218]++;try{if(pe().s[219]++,r.startsWith("pmtiles://")){pe().b[61][0]++;const s=(pe().s[220]++,await new r9(r.substring(10)).getTileJson(""));pe().s[221]++,o(s)}else{pe().b[61][1]++;const s=(pe().s[222]++,await fetch(r,{mode:"cors"})),a=(pe().s[223]++,await s.json());pe().s[224]++,o(a)}}catch(s){pe().s[225]++,console.error(`Failed to process source for url: '${r}', ${s}`)}}}pe().s[226]++,LD(this.state.sources,e)?pe().b[62][1]++:(pe().b[62][0]++,pe().s[227]++,console.debug("Setting sources",e),pe().s[228]++,this.setState({sources:e}))}_getRenderer(){pe().f[44]++;const e=(pe().s[229]++,pe().b[63][0]++,this.state.mapStyle.metadata||(pe().b[63][1]++,{}));return pe().s[230]++,pe().b[64][0]++,e["maputnik:renderer"]||(pe().b[64][1]++,"mlgljs")}onMapChange=(pe().s[231]++,e=>{pe().f[45]++,pe().s[232]++,this.setState({mapView:e})});mapRenderer(){pe().f[46]++;const{mapStyle:e,dirtyMapStyle:t}=(pe().s[233]++,this.state),i=(pe().s[234]++,{mapStyle:(pe().b[65][0]++,t||(pe().b[65][1]++,e)),replaceAccessTokens:c=>(pe().f[47]++,pe().s[235]++,_d.replaceAccessTokens(c,{allowFallback:!0})),onDataChange:c=>{pe().f[48]++,pe().s[236]++,this.layerWatcher.analyzeMap(c.map),pe().s[237]++,this.fetchSources()}}),r=(pe().s[238]++,this._getRenderer());let o;pe().s[239]++,r==="ol"?(pe().b[66][0]++,pe().s[240]++,o=ie.jsx(x_e,{...i,onChange:this.onMapChange,debugToolbox:this.state.openlayersDebugOptions.debugToolbox,onLayerSelect:c=>(pe().f[49]++,pe().s[241]++,this.onLayerSelect(+c))})):(pe().b[66][1]++,pe().s[242]++,o=ie.jsx(jpe,{...i,onChange:this.onMapChange,options:this.state.maplibreGlDebugOptions,inspectModeEnabled:this.state.mapState==="inspect",highlightedLayer:this.state.mapStyle.layers[this.state.selectedLayerIndex],onLayerSelect:this.onLayerSelect}));let s;pe().s[243]++,this.state.mapState.match(/^filter-/)?(pe().b[67][0]++,pe().s[244]++,s=this.state.mapState.replace(/^filter-/,"")):pe().b[67][1]++;const a=(pe().s[245]++,{});return pe().s[246]++,s?(pe().b[68][0]++,pe().s[247]++,a.filter=`url('#${s}')`):pe().b[68][1]++,pe().s[248]++,ie.jsx("div",{style:a,className:"maputnik-map__container","data-wd-key":"maplibre:container",children:o})}setStateInUrl=(pe().s[249]++,()=>{pe().f[50]++;const{mapState:e,mapStyle:t,isOpen:i}=(pe().s[250]++,this.state),{selectedLayerIndex:r}=(pe().s[251]++,this.state),o=(pe().s[252]++,new URL(location.href)),s=(pe().s[253]++,xF(JSON.stringify(t)));pe().s[254]++,o.searchParams.set("layer",`${s}~${r}`);const a=(pe().s[255]++,Object.entries(i).map(([c,h])=>(pe().f[51]++,pe().s[256]++,h===!0?(pe().b[69][0]++,c):(pe().b[69][1]++,null))).filter(c=>(pe().f[52]++,pe().s[257]++,c!==null)));pe().s[258]++,a.length>0?(pe().b[70][0]++,pe().s[259]++,o.searchParams.set("modal",a.join(","))):(pe().b[70][1]++,pe().s[260]++,o.searchParams.delete("modal")),pe().s[261]++,e==="map"?(pe().b[71][0]++,pe().s[262]++,o.searchParams.delete("view")):(pe().b[71][1]++,pe().s[263]++,e==="inspect"?(pe().b[72][0]++,pe().s[264]++,o.searchParams.set("view","inspect")):pe().b[72][1]++),pe().s[265]++,history.replaceState({selectedLayerIndex:r},"Maputnik",o.href)});getInitialStateFromUrl=(pe().s[266]++,e=>{pe().f[53]++;const t=(pe().s[267]++,new URL(location.href)),i=(pe().s[268]++,t.searchParams.get("modal"));if(pe().s[269]++,pe().b[74][0]++,i&&(pe().b[74][1]++,i!=="")){pe().b[73][0]++;const s=(pe().s[270]++,i.split(",")),a=(pe().s[271]++,{});pe().s[272]++,s.forEach(c=>{pe().f[54]++,pe().s[273]++,a[c]=!0}),pe().s[274]++,this.setState({isOpen:{...this.state.isOpen,...a}})}else pe().b[73][1]++;const r=(pe().s[275]++,t.searchParams.get("view"));pe().s[276]++,pe().b[76][0]++,r&&(pe().b[76][1]++,r!=="")?(pe().b[75][0]++,pe().s[277]++,this.setMapState(r)):pe().b[75][1]++;const o=(pe().s[278]++,t.searchParams.get("layer"));if(pe().s[279]++,o){pe().b[77][0]++,pe().s[280]++;try{const s=(pe().s[281]++,o.split("~")),[a,c]=(pe().s[282]++,[s[0],parseInt(s[1],10)]);let h=(pe().s[283]++,!0);if(pe().s[284]++,a!=="-"){pe().b[78][0]++;const m=(pe().s[285]++,xF(JSON.stringify(e)));pe().s[286]++,m!==parseInt(a,10)?(pe().b[79][0]++,pe().s[287]++,h=!1):pe().b[79][1]++}else pe().b[78][1]++;pe().s[288]++,h?(pe().b[80][0]++,pe().s[289]++,this.setState({selectedLayerIndex:c,selectedLayerOriginalId:e.layers[c].id})):pe().b[80][1]++}catch(s){pe().s[290]++,console.warn(s)}}else pe().b[77][1]++});onLayerSelect=(pe().s[291]++,e=>{pe().f[55]++,pe().s[292]++,this.setState({selectedLayerIndex:e,selectedLayerOriginalId:this.state.mapStyle.layers[e].id},this.setStateInUrl)});setModal(e,t){pe().f[56]++,pe().s[293]++,this.setState({isOpen:{...this.state.isOpen,[e]:t}},this.setStateInUrl)}toggleModal(e){pe().f[57]++,pe().s[294]++,this.setModal(e,!this.state.isOpen[e])}onSetFileHandle=(pe().s[295]++,e=>{pe().f[58]++,pe().s[296]++,this.setState({fileHandle:e})});onChangeOpenlayersDebug=(pe().s[297]++,(e,t)=>{pe().f[59]++,pe().s[298]++,this.setState({openlayersDebugOptions:{...this.state.openlayersDebugOptions,[e]:t}})});onChangeMaplibreGlDebug=(pe().s[299]++,(e,t)=>{pe().f[60]++,pe().s[300]++,this.setState({maplibreGlDebugOptions:{...this.state.maplibreGlDebugOptions,[e]:t}})});render(){pe().f[61]++;const e=(pe().s[301]++,pe().b[81][0]++,this.state.mapStyle.layers||(pe().b[81][1]++,[])),t=(pe().s[302]++,e.length>0?(pe().b[82][0]++,e[this.state.selectedLayerIndex]):(pe().b[82][1]++,void 0)),i=(pe().s[303]++,ie.jsx(BDe,{renderer:this._getRenderer(),mapState:this.state.mapState,mapStyle:this.state.mapStyle,inspectModeEnabled:this.state.mapState==="inspect",sources:this.state.sources,onStyleChanged:this.onStyleChanged,onStyleOpen:this.onStyleChanged,onSetMapState:this.setMapState,onToggleModal:h=>(pe().f[62]++,pe().s[304]++,this.toggleModal(h))})),r=(pe().s[305]++,this.state.isOpen.codeEditor?(pe().b[83][0]++,ie.jsx(oSe,{value:this.state.mapStyle,onChange:h=>(pe().f[63]++,pe().s[306]++,this.onStyleChanged(h)),onClose:()=>(pe().f[64]++,pe().s[307]++,this.setModal("codeEditor",!1))})):(pe().b[83][1]++,void 0)),o=(pe().s[308]++,ie.jsx(VIe,{onMoveLayer:this.onMoveLayer,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayersChange:this.onLayersChange,onLayerSelect:this.onLayerSelect,selectedLayerIndex:this.state.selectedLayerIndex,layers:e,sources:this.state.sources,errors:this.state.errors})),s=(pe().s[309]++,t?(pe().b[84][0]++,ie.jsx(lDe,{layer:t,layerIndex:this.state.selectedLayerIndex,isFirstLayer:this.state.selectedLayerIndex<1,isLastLayer:this.state.selectedLayerIndex===this.state.mapStyle.layers.length-1,sources:this.state.sources,vectorLayers:this.state.vectorLayers,spec:this.state.spec,onMoveLayer:this.onMoveLayer,onLayerChanged:this.onLayerChanged,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayerIdChange:this.onLayerIdChange,errors:this.state.errors},this.state.selectedLayerOriginalId)):(pe().b[84][1]++,void 0)),a=(pe().s[310]++,this.state.errors.length+this.state.infos.length>0?(pe().b[85][0]++,ie.jsx(RDe,{currentLayer:t,selectedLayerIndex:this.state.selectedLayerIndex,onLayerSelect:this.onLayerSelect,mapStyle:this.state.mapStyle,errors:this.state.errors,infos:this.state.infos})):(pe().b[85][1]++,void 0)),c=(pe().s[311]++,ie.jsxs("div",{children:[ie.jsx(kPe,{renderer:this._getRenderer(),maplibreGlDebugOptions:this.state.maplibreGlDebugOptions,openlayersDebugOptions:this.state.openlayersDebugOptions,onChangeMaplibreGlDebug:this.onChangeMaplibreGlDebug,onChangeOpenlayersDebug:this.onChangeOpenlayersDebug,isOpen:this.state.isOpen.debug,onOpenToggle:()=>(pe().f[65]++,pe().s[312]++,this.toggleModal("debug")),mapView:this.state.mapView}),ie.jsx(BPe,{isOpen:this.state.isOpen.shortcuts,onOpenToggle:()=>(pe().f[66]++,pe().s[313]++,this.toggleModal("shortcuts"))}),ie.jsx(KDe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,onChangeMetadataProperty:this.onChangeMetadataProperty,isOpen:this.state.isOpen.settings,onOpenToggle:()=>(pe().f[67]++,pe().s[314]++,this.toggleModal("settings"))}),ie.jsx(iPe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.export,onOpenToggle:()=>(pe().f[68]++,pe().s[315]++,this.toggleModal("export")),fileHandle:this.state.fileHandle,onSetFileHandle:this.onSetFileHandle}),ie.jsx(EPe,{isOpen:this.state.isOpen.open,onStyleOpen:this.openStyle,onOpenToggle:()=>(pe().f[69]++,pe().s[316]++,this.toggleModal("open")),fileHandle:this.state.fileHandle}),ie.jsx(_Pe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.sources,onOpenToggle:()=>(pe().f[70]++,pe().s[317]++,this.toggleModal("sources"))}),ie.jsx(RPe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.globalState,onOpenToggle:()=>(pe().f[71]++,pe().s[318]++,this.toggleModal("globalState"))})]}));return pe().s[319]++,ie.jsx(kDe,{toolbar:i,layerList:o,layerEditor:s,codeEditor:r,map:this.mapRenderer(),bottom:a,modals:c})}}const NUe=XH.createRoot(document.querySelector("#app"));NUe.render(ie.jsx(rx.Provider,{value:{className:"react-icons"},children:ie.jsx(jUe,{})}));document.querySelector(".loading").style.display="none";
//# sourceMappingURL=index-Bu0Vqxf3.js.map
