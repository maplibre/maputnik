(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function vu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function GH(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var yO={exports:{}},h3={};var yF;function gae(){if(yF)return h3;yF=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,o){var s=null;if(o!==void 0&&(s=""+o),r.key!==void 0&&(s=""+r.key),"key"in r){o={};for(var a in r)a!=="key"&&(o[a]=r[a])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:s,ref:r!==void 0?r:null,props:o}}return h3.Fragment=e,h3.jsx=t,h3.jsxs=t,h3}var vF;function yae(){return vF||(vF=1,yO.exports=gae()),yO.exports}var oe=yae(),vO={exports:{}},Lr={};var bF;function vae(){if(bF)return Lr;bF=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),M=Symbol.iterator;function B(De){return De===null||typeof De!="object"?null:(De=M&&De[M]||De["@@iterator"],typeof De=="function"?De:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,z={};function V(De,Ge,Re){this.props=De,this.context=Ge,this.refs=z,this.updater=Re||P}V.prototype.isReactComponent={},V.prototype.setState=function(De,Ge){if(typeof De!="object"&&typeof De!="function"&&De!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,De,Ge,"setState")},V.prototype.forceUpdate=function(De){this.updater.enqueueForceUpdate(this,De,"forceUpdate")};function Z(){}Z.prototype=V.prototype;function X(De,Ge,Re){this.props=De,this.context=Ge,this.refs=z,this.updater=Re||P}var re=X.prototype=new Z;re.constructor=X,U(re,V.prototype),re.isPureReactComponent=!0;var ie=Array.isArray;function te(){}var q={H:null,A:null,T:null,S:null},le=Object.prototype.hasOwnProperty;function ce(De,Ge,Re){var St=Re.ref;return{$$typeof:n,type:De,key:Ge,ref:St!==void 0?St:null,props:Re}}function ve(De,Ge){return ce(De.type,Ge,De.props)}function ge(De){return typeof De=="object"&&De!==null&&De.$$typeof===n}function Ee(De){var Ge={"=":"=0",":":"=2"};return"$"+De.replace(/[=:]/g,function(Re){return Ge[Re]})}var xe=/\/+/g;function Te(De,Ge){return typeof De=="object"&&De!==null&&De.key!=null?Ee(""+De.key):Ge.toString(36)}function Fe(De){switch(De.status){case"fulfilled":return De.value;case"rejected":throw De.reason;default:switch(typeof De.status=="string"?De.then(te,te):(De.status="pending",De.then(function(Ge){De.status==="pending"&&(De.status="fulfilled",De.value=Ge)},function(Ge){De.status==="pending"&&(De.status="rejected",De.reason=Ge)})),De.status){case"fulfilled":return De.value;case"rejected":throw De.reason}}throw De}function Ie(De,Ge,Re,St,ut){var kt=typeof De;(kt==="undefined"||kt==="boolean")&&(De=null);var Ut=!1;if(De===null)Ut=!0;else switch(kt){case"bigint":case"string":case"number":Ut=!0;break;case"object":switch(De.$$typeof){case n:case e:Ut=!0;break;case m:return Ut=De._init,Ie(Ut(De._payload),Ge,Re,St,ut)}}if(Ut)return ut=ut(De),Ut=St===""?"."+Te(De,0):St,ie(ut)?(Re="",Ut!=null&&(Re=Ut.replace(xe,"$&/")+"/"),Ie(ut,Ge,Re,"",function(Oe){return Oe})):ut!=null&&(ge(ut)&&(ut=ve(ut,Re+(ut.key==null||De&&De.key===ut.key?"":(""+ut.key).replace(xe,"$&/")+"/")+Ut)),Ge.push(ut)),1;Ut=0;var Le=St===""?".":St+":";if(ie(De))for(var ke=0;ke<De.length;ke++)St=De[ke],kt=Le+Te(St,ke),Ut+=Ie(St,Ge,Re,kt,ut);else if(ke=B(De),typeof ke=="function")for(De=ke.call(De),ke=0;!(St=De.next()).done;)St=St.value,kt=Le+Te(St,ke++),Ut+=Ie(St,Ge,Re,kt,ut);else if(kt==="object"){if(typeof De.then=="function")return Ie(Fe(De),Ge,Re,St,ut);throw Ge=String(De),Error("Objects are not valid as a React child (found: "+(Ge==="[object Object]"?"object with keys {"+Object.keys(De).join(", ")+"}":Ge)+"). If you meant to render a collection of children, use an array instead.")}return Ut}function Ye(De,Ge,Re){if(De==null)return De;var St=[],ut=0;return Ie(De,St,"","",function(kt){return Ge.call(Re,kt,ut++)}),St}function At(De){if(De._status===-1){var Ge=De._result;Ge=Ge(),Ge.then(function(Re){(De._status===0||De._status===-1)&&(De._status=1,De._result=Re)},function(Re){(De._status===0||De._status===-1)&&(De._status=2,De._result=Re)}),De._status===-1&&(De._status=0,De._result=Ge)}if(De._status===1)return De._result.default;throw De._result}var mt=typeof reportError=="function"?reportError:function(De){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ge=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof De=="object"&&De!==null&&typeof De.message=="string"?String(De.message):String(De),error:De});if(!window.dispatchEvent(Ge))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",De);return}console.error(De)},Ue={map:Ye,forEach:function(De,Ge,Re){Ye(De,function(){Ge.apply(this,arguments)},Re)},count:function(De){var Ge=0;return Ye(De,function(){Ge++}),Ge},toArray:function(De){return Ye(De,function(Ge){return Ge})||[]},only:function(De){if(!ge(De))throw Error("React.Children.only expected to receive a single React element child.");return De}};return Lr.Activity=v,Lr.Children=Ue,Lr.Component=V,Lr.Fragment=t,Lr.Profiler=r,Lr.PureComponent=X,Lr.StrictMode=i,Lr.Suspense=c,Lr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,Lr.__COMPILER_RUNTIME={__proto__:null,c:function(De){return q.H.useMemoCache(De)}},Lr.cache=function(De){return function(){return De.apply(null,arguments)}},Lr.cacheSignal=function(){return null},Lr.cloneElement=function(De,Ge,Re){if(De==null)throw Error("The argument must be a React element, but you passed "+De+".");var St=U({},De.props),ut=De.key;if(Ge!=null)for(kt in Ge.key!==void 0&&(ut=""+Ge.key),Ge)!le.call(Ge,kt)||kt==="key"||kt==="__self"||kt==="__source"||kt==="ref"&&Ge.ref===void 0||(St[kt]=Ge[kt]);var kt=arguments.length-2;if(kt===1)St.children=Re;else if(1<kt){for(var Ut=Array(kt),Le=0;Le<kt;Le++)Ut[Le]=arguments[Le+2];St.children=Ut}return ce(De.type,ut,St)},Lr.createContext=function(De){return De={$$typeof:s,_currentValue:De,_currentValue2:De,_threadCount:0,Provider:null,Consumer:null},De.Provider=De,De.Consumer={$$typeof:o,_context:De},De},Lr.createElement=function(De,Ge,Re){var St,ut={},kt=null;if(Ge!=null)for(St in Ge.key!==void 0&&(kt=""+Ge.key),Ge)le.call(Ge,St)&&St!=="key"&&St!=="__self"&&St!=="__source"&&(ut[St]=Ge[St]);var Ut=arguments.length-2;if(Ut===1)ut.children=Re;else if(1<Ut){for(var Le=Array(Ut),ke=0;ke<Ut;ke++)Le[ke]=arguments[ke+2];ut.children=Le}if(De&&De.defaultProps)for(St in Ut=De.defaultProps,Ut)ut[St]===void 0&&(ut[St]=Ut[St]);return ce(De,kt,ut)},Lr.createRef=function(){return{current:null}},Lr.forwardRef=function(De){return{$$typeof:a,render:De}},Lr.isValidElement=ge,Lr.lazy=function(De){return{$$typeof:m,_payload:{_status:-1,_result:De},_init:At}},Lr.memo=function(De,Ge){return{$$typeof:d,type:De,compare:Ge===void 0?null:Ge}},Lr.startTransition=function(De){var Ge=q.T,Re={};q.T=Re;try{var St=De(),ut=q.S;ut!==null&&ut(Re,St),typeof St=="object"&&St!==null&&typeof St.then=="function"&&St.then(te,mt)}catch(kt){mt(kt)}finally{Ge!==null&&Re.types!==null&&(Ge.types=Re.types),q.T=Ge}},Lr.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},Lr.use=function(De){return q.H.use(De)},Lr.useActionState=function(De,Ge,Re){return q.H.useActionState(De,Ge,Re)},Lr.useCallback=function(De,Ge){return q.H.useCallback(De,Ge)},Lr.useContext=function(De){return q.H.useContext(De)},Lr.useDebugValue=function(){},Lr.useDeferredValue=function(De,Ge){return q.H.useDeferredValue(De,Ge)},Lr.useEffect=function(De,Ge){return q.H.useEffect(De,Ge)},Lr.useEffectEvent=function(De){return q.H.useEffectEvent(De)},Lr.useId=function(){return q.H.useId()},Lr.useImperativeHandle=function(De,Ge,Re){return q.H.useImperativeHandle(De,Ge,Re)},Lr.useInsertionEffect=function(De,Ge){return q.H.useInsertionEffect(De,Ge)},Lr.useLayoutEffect=function(De,Ge){return q.H.useLayoutEffect(De,Ge)},Lr.useMemo=function(De,Ge){return q.H.useMemo(De,Ge)},Lr.useOptimistic=function(De,Ge){return q.H.useOptimistic(De,Ge)},Lr.useReducer=function(De,Ge,Re){return q.H.useReducer(De,Ge,Re)},Lr.useRef=function(De){return q.H.useRef(De)},Lr.useState=function(De){return q.H.useState(De)},Lr.useSyncExternalStore=function(De,Ge,Re){return q.H.useSyncExternalStore(De,Ge,Re)},Lr.useTransition=function(){return q.H.useTransition()},Lr.version="19.2.0",Lr}var CF;function _a(){return CF||(CF=1,vO.exports=vae()),vO.exports}var wt=_a();const In=vu(wt);var WH={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o2=In.createContext&&In.createContext(WH),bae=["attr","size","title"];function Cae(n,e){if(n==null)return{};var t=_ae(n,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function _ae(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function GS(){return GS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},GS.apply(this,arguments)}function _F(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function WS(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_F(Object(t),!0).forEach(function(i){xae(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_F(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function xae(n,e,t){return e=Mae(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Mae(n){var e=wae(n,"string");return typeof e=="symbol"?e:e+""}function wae(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function QH(n){return n&&n.map((e,t)=>In.createElement(e.tag,WS({key:t},e.attr),QH(e.child)))}function _o(n){return e=>In.createElement(Sae,GS({attr:WS({},n.attr)},e),QH(n.child))}function Sae(n){var e=t=>{var{attr:i,size:r,title:o}=n,s=Cae(n,bae),a=r||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),In.createElement("svg",GS({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,s,{className:c,style:WS(WS({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&In.createElement("title",null,o),n.children)};return o2!==void 0?In.createElement(o2.Consumer,null,t=>e(t)):e(WH)}var bO={exports:{}},d3={},CO={exports:{}},_O={};var xF;function Eae(){return xF||(xF=1,(function(n){function e(Ie,Ye){var At=Ie.length;Ie.push(Ye);e:for(;0<At;){var mt=At-1>>>1,Ue=Ie[mt];if(0<r(Ue,Ye))Ie[mt]=Ye,Ie[At]=Ue,At=mt;else break e}}function t(Ie){return Ie.length===0?null:Ie[0]}function i(Ie){if(Ie.length===0)return null;var Ye=Ie[0],At=Ie.pop();if(At!==Ye){Ie[0]=At;e:for(var mt=0,Ue=Ie.length,De=Ue>>>1;mt<De;){var Ge=2*(mt+1)-1,Re=Ie[Ge],St=Ge+1,ut=Ie[St];if(0>r(Re,At))St<Ue&&0>r(ut,Re)?(Ie[mt]=ut,Ie[St]=At,mt=St):(Ie[mt]=Re,Ie[Ge]=At,mt=Ge);else if(St<Ue&&0>r(ut,At))Ie[mt]=ut,Ie[St]=At,mt=St;else break e}}return Ye}function r(Ie,Ye){var At=Ie.sortIndex-Ye.sortIndex;return At!==0?At:Ie.id-Ye.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();n.unstable_now=function(){return s.now()-a}}var c=[],d=[],m=1,v=null,M=3,B=!1,P=!1,U=!1,z=!1,V=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function re(Ie){for(var Ye=t(d);Ye!==null;){if(Ye.callback===null)i(d);else if(Ye.startTime<=Ie)i(d),Ye.sortIndex=Ye.expirationTime,e(c,Ye);else break;Ye=t(d)}}function ie(Ie){if(U=!1,re(Ie),!P)if(t(c)!==null)P=!0,te||(te=!0,Ee());else{var Ye=t(d);Ye!==null&&Fe(ie,Ye.startTime-Ie)}}var te=!1,q=-1,le=5,ce=-1;function ve(){return z?!0:!(n.unstable_now()-ce<le)}function ge(){if(z=!1,te){var Ie=n.unstable_now();ce=Ie;var Ye=!0;try{e:{P=!1,U&&(U=!1,Z(q),q=-1),B=!0;var At=M;try{t:{for(re(Ie),v=t(c);v!==null&&!(v.expirationTime>Ie&&ve());){var mt=v.callback;if(typeof mt=="function"){v.callback=null,M=v.priorityLevel;var Ue=mt(v.expirationTime<=Ie);if(Ie=n.unstable_now(),typeof Ue=="function"){v.callback=Ue,re(Ie),Ye=!0;break t}v===t(c)&&i(c),re(Ie)}else i(c);v=t(c)}if(v!==null)Ye=!0;else{var De=t(d);De!==null&&Fe(ie,De.startTime-Ie),Ye=!1}}break e}finally{v=null,M=At,B=!1}Ye=void 0}}finally{Ye?Ee():te=!1}}}var Ee;if(typeof X=="function")Ee=function(){X(ge)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,Te=xe.port2;xe.port1.onmessage=ge,Ee=function(){Te.postMessage(null)}}else Ee=function(){V(ge,0)};function Fe(Ie,Ye){q=V(function(){Ie(n.unstable_now())},Ye)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Ie){Ie.callback=null},n.unstable_forceFrameRate=function(Ie){0>Ie||125<Ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<Ie?Math.floor(1e3/Ie):5},n.unstable_getCurrentPriorityLevel=function(){return M},n.unstable_next=function(Ie){switch(M){case 1:case 2:case 3:var Ye=3;break;default:Ye=M}var At=M;M=Ye;try{return Ie()}finally{M=At}},n.unstable_requestPaint=function(){z=!0},n.unstable_runWithPriority=function(Ie,Ye){switch(Ie){case 1:case 2:case 3:case 4:case 5:break;default:Ie=3}var At=M;M=Ie;try{return Ye()}finally{M=At}},n.unstable_scheduleCallback=function(Ie,Ye,At){var mt=n.unstable_now();switch(typeof At=="object"&&At!==null?(At=At.delay,At=typeof At=="number"&&0<At?mt+At:mt):At=mt,Ie){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=At+Ue,Ie={id:m++,callback:Ye,priorityLevel:Ie,startTime:At,expirationTime:Ue,sortIndex:-1},At>mt?(Ie.sortIndex=At,e(d,Ie),t(c)===null&&Ie===t(d)&&(U?(Z(q),q=-1):U=!0,Fe(ie,At-mt))):(Ie.sortIndex=Ue,e(c,Ie),P||B||(P=!0,te||(te=!0,Ee()))),Ie},n.unstable_shouldYield=ve,n.unstable_wrapCallback=function(Ie){var Ye=M;return function(){var At=M;M=Ye;try{return Ie.apply(this,arguments)}finally{M=At}}}})(_O)),_O}var MF;function Bae(){return MF||(MF=1,CO.exports=Eae()),CO.exports}var xO={exports:{}},zA={};var wF;function Oae(){if(wF)return zA;wF=1;var n=_a();function e(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(c,d,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:c,containerInfo:d,implementation:m}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return zA.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,zA.createPortal=function(c,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return o(c,d,null,m)},zA.flushSync=function(c){var d=s.T,m=i.p;try{if(s.T=null,i.p=2,c)return c()}finally{s.T=d,i.p=m,i.d.f()}},zA.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(c,d))},zA.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},zA.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var m=d.as,v=a(m,d.crossOrigin),M=typeof d.integrity=="string"?d.integrity:void 0,B=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?i.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:v,integrity:M,fetchPriority:B}):m==="script"&&i.d.X(c,{crossOrigin:v,integrity:M,fetchPriority:B,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},zA.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=a(d.as,d.crossOrigin);i.d.M(c,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(c)},zA.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,v=a(m,d.crossOrigin);i.d.L(c,m,{crossOrigin:v,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},zA.preloadModule=function(c,d){if(typeof c=="string")if(d){var m=a(d.as,d.crossOrigin);i.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(c)},zA.requestFormReset=function(c){i.d.r(c)},zA.unstable_batchedUpdates=function(c,d){return c(d)},zA.useFormState=function(c,d,m){return s.H.useFormState(c,d,m)},zA.useFormStatus=function(){return s.H.useHostTransitionStatus()},zA.version="19.2.0",zA}var SF;function vP(){if(SF)return xO.exports;SF=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),xO.exports=Oae(),xO.exports}var EF;function Iae(){if(EF)return d3;EF=1;var n=Bae(),e=_a(),t=vP();function i(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)g+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function o(f){var g=f,x=f;if(f.alternate)for(;g.return;)g=g.return;else{f=g;do g=f,(g.flags&4098)!==0&&(x=g.return),f=g.return;while(f)}return g.tag===3?x:null}function s(f){if(f.tag===13){var g=f.memoizedState;if(g===null&&(f=f.alternate,f!==null&&(g=f.memoizedState)),g!==null)return g.dehydrated}return null}function a(f){if(f.tag===31){var g=f.memoizedState;if(g===null&&(f=f.alternate,f!==null&&(g=f.memoizedState)),g!==null)return g.dehydrated}return null}function c(f){if(o(f)!==f)throw Error(i(188))}function d(f){var g=f.alternate;if(!g){if(g=o(f),g===null)throw Error(i(188));return g!==f?null:f}for(var x=f,T=g;;){var G=x.return;if(G===null)break;var J=G.alternate;if(J===null){if(T=G.return,T!==null){x=T;continue}break}if(G.child===J.child){for(J=G.child;J;){if(J===x)return c(G),f;if(J===T)return c(G),g;J=J.sibling}throw Error(i(188))}if(x.return!==T.return)x=G,T=J;else{for(var _e=!1,Ve=G.child;Ve;){if(Ve===x){_e=!0,x=G,T=J;break}if(Ve===T){_e=!0,T=G,x=J;break}Ve=Ve.sibling}if(!_e){for(Ve=J.child;Ve;){if(Ve===x){_e=!0,x=J,T=G;break}if(Ve===T){_e=!0,T=J,x=G;break}Ve=Ve.sibling}if(!_e)throw Error(i(189))}}if(x.alternate!==T)throw Error(i(190))}if(x.tag!==3)throw Error(i(188));return x.stateNode.current===x?f:g}function m(f){var g=f.tag;if(g===5||g===26||g===27||g===6)return f;for(f=f.child;f!==null;){if(g=m(f),g!==null)return g;f=f.sibling}return null}var v=Object.assign,M=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),X=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),ce=Symbol.for("react.activity"),ve=Symbol.for("react.memo_cache_sentinel"),ge=Symbol.iterator;function Ee(f){return f===null||typeof f!="object"?null:(f=ge&&f[ge]||f["@@iterator"],typeof f=="function"?f:null)}var xe=Symbol.for("react.client.reference");function Te(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===xe?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case U:return"Fragment";case V:return"Profiler";case z:return"StrictMode";case ie:return"Suspense";case te:return"SuspenseList";case ce:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case P:return"Portal";case X:return f.displayName||"Context";case Z:return(f._context.displayName||"Context")+".Consumer";case re:var g=f.render;return f=f.displayName,f||(f=g.displayName||g.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case q:return g=f.displayName||null,g!==null?g:Te(f.type)||"Memo";case le:g=f._payload,f=f._init;try{return Te(f(g))}catch{}}return null}var Fe=Array.isArray,Ie=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ye=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,At={pending:!1,data:null,method:null,action:null},mt=[],Ue=-1;function De(f){return{current:f}}function Ge(f){0>Ue||(f.current=mt[Ue],mt[Ue]=null,Ue--)}function Re(f,g){Ue++,mt[Ue]=f.current,f.current=g}var St=De(null),ut=De(null),kt=De(null),Ut=De(null);function Le(f,g){switch(Re(kt,g),Re(ut,f),Re(St,null),g.nodeType){case 9:case 11:f=(f=g.documentElement)&&(f=f.namespaceURI)?Zf(f):0;break;default:if(f=g.tagName,g=g.namespaceURI)g=Zf(g),f=Iu(g,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}Ge(St),Re(St,f)}function ke(){Ge(St),Ge(ut),Ge(kt)}function Oe(f){f.memoizedState!==null&&Re(Ut,f);var g=St.current,x=Iu(g,f.type);g!==x&&(Re(ut,f),Re(St,x))}function Ze(f){ut.current===f&&(Ge(St),Ge(ut)),Ut.current===f&&(Ge(Ut),z0._currentValue=At)}var bt,yt;function Mt(f){if(bt===void 0)try{throw Error()}catch(x){var g=x.stack.trim().match(/\n( *(at )?)/);bt=g&&g[1]||"",yt=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bt+f+yt}var Kt=!1;function Dt(f,g){if(!f||Kt)return"";Kt=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var T={DetermineComponentFrameRoot:function(){try{if(g){var gn=function(){throw Error()};if(Object.defineProperty(gn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(gn,[])}catch(rn){var Zt=rn}Reflect.construct(f,[],gn)}else{try{gn.call()}catch(rn){Zt=rn}f.call(gn.prototype)}}else{try{throw Error()}catch(rn){Zt=rn}(gn=f())&&typeof gn.catch=="function"&&gn.catch(function(){})}}catch(rn){if(rn&&Zt&&typeof rn.stack=="string")return[rn.stack,Zt.stack]}return[null,null]}};T.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var G=Object.getOwnPropertyDescriptor(T.DetermineComponentFrameRoot,"name");G&&G.configurable&&Object.defineProperty(T.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var J=T.DetermineComponentFrameRoot(),_e=J[0],Ve=J[1];if(_e&&Ve){var _t=_e.split(`
`),$t=Ve.split(`
`);for(G=T=0;T<_t.length&&!_t[T].includes("DetermineComponentFrameRoot");)T++;for(;G<$t.length&&!$t[G].includes("DetermineComponentFrameRoot");)G++;if(T===_t.length||G===$t.length)for(T=_t.length-1,G=$t.length-1;1<=T&&0<=G&&_t[T]!==$t[G];)G--;for(;1<=T&&0<=G;T--,G--)if(_t[T]!==$t[G]){if(T!==1||G!==1)do if(T--,G--,0>G||_t[T]!==$t[G]){var ln=`
`+_t[T].replace(" at new "," at ");return f.displayName&&ln.includes("<anonymous>")&&(ln=ln.replace("<anonymous>",f.displayName)),ln}while(1<=T&&0<=G);break}}}finally{Kt=!1,Error.prepareStackTrace=x}return(x=f?f.displayName||f.name:"")?Mt(x):""}function en(f,g){switch(f.tag){case 26:case 27:case 5:return Mt(f.type);case 16:return Mt("Lazy");case 13:return f.child!==g&&g!==null?Mt("Suspense Fallback"):Mt("Suspense");case 19:return Mt("SuspenseList");case 0:case 15:return Dt(f.type,!1);case 11:return Dt(f.type.render,!1);case 1:return Dt(f.type,!0);case 31:return Mt("Activity");default:return""}}function Gn(f){try{var g="",x=null;do g+=en(f,x),x=f,f=f.return;while(f);return g}catch(T){return`
Error generating stack: `+T.message+`
`+T.stack}}var Nn=Object.prototype.hasOwnProperty,Si=n.unstable_scheduleCallback,Un=n.unstable_cancelCallback,Ln=n.unstable_shouldYield,Tn=n.unstable_requestPaint,ti=n.unstable_now,Bn=n.unstable_getCurrentPriorityLevel,je=n.unstable_ImmediatePriority,H=n.unstable_UserBlockingPriority,j=n.unstable_NormalPriority,Q=n.unstable_LowPriority,he=n.unstable_IdlePriority,Me=n.log,Ne=n.unstable_setDisableYieldValue,Qe=null,it=null;function vt(f){if(typeof Me=="function"&&Ne(f),it&&typeof it.setStrictMode=="function")try{it.setStrictMode(Qe,f)}catch{}}var $e=Math.clz32?Math.clz32:Rt,ot=Math.log,b=Math.LN2;function Rt(f){return f>>>=0,f===0?32:31-(ot(f)/b|0)|0}var mn=256,bn=262144,Cn=4194304;function xt(f){var g=f&42;if(g!==0)return g;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return f&261888;case 262144:case 524288:case 1048576:case 2097152:return f&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function Ci(f,g,x){var T=f.pendingLanes;if(T===0)return 0;var G=0,J=f.suspendedLanes,_e=f.pingedLanes;f=f.warmLanes;var Ve=T&134217727;return Ve!==0?(T=Ve&~J,T!==0?G=xt(T):(_e&=Ve,_e!==0?G=xt(_e):x||(x=Ve&~f,x!==0&&(G=xt(x))))):(Ve=T&~J,Ve!==0?G=xt(Ve):_e!==0?G=xt(_e):x||(x=T&~f,x!==0&&(G=xt(x)))),G===0?0:g!==0&&g!==G&&(g&J)===0&&(J=G&-G,x=g&-g,J>=x||J===32&&(x&4194048)!==0)?g:G}function Ki(f,g){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&g)===0}function Wn(f,g){switch(f){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hn(){var f=Cn;return Cn<<=1,(Cn&62914560)===0&&(Cn=4194304),f}function Qi(f){for(var g=[],x=0;31>x;x++)g.push(f);return g}function Wi(f,g){f.pendingLanes|=g,g!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function Ri(f,g,x,T,G,J){var _e=f.pendingLanes;f.pendingLanes=x,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=x,f.entangledLanes&=x,f.errorRecoveryDisabledLanes&=x,f.shellSuspendCounter=0;var Ve=f.entanglements,_t=f.expirationTimes,$t=f.hiddenUpdates;for(x=_e&~x;0<x;){var ln=31-$e(x),gn=1<<ln;Ve[ln]=0,_t[ln]=-1;var Zt=$t[ln];if(Zt!==null)for($t[ln]=null,ln=0;ln<Zt.length;ln++){var rn=Zt[ln];rn!==null&&(rn.lane&=-536870913)}x&=~gn}T!==0&&qi(f,T,0),J!==0&&G===0&&f.tag!==0&&(f.suspendedLanes|=J&~(_e&~g))}function qi(f,g,x){f.pendingLanes|=g,f.suspendedLanes&=~g;var T=31-$e(g);f.entangledLanes|=g,f.entanglements[T]=f.entanglements[T]|1073741824|x&261930}function Li(f,g){var x=f.entangledLanes|=g;for(f=f.entanglements;x;){var T=31-$e(x),G=1<<T;G&g|f[T]&g&&(f[T]|=g),x&=~G}}function Er(f,g){var x=g&-g;return x=(x&42)!==0?1:xo(x),(x&(f.suspendedLanes|g))!==0?0:x}function xo(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function un(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function tr(){var f=Ye.p;return f!==0?f:(f=window.event,f===void 0?32:M_(f.type))}function Wo(f,g){var x=Ye.p;try{return Ye.p=f,g()}finally{Ye.p=x}}var ra=Math.random().toString(36).slice(2),oo="__reactFiber$"+ra,kn="__reactProps$"+ra,Xi="__reactContainer$"+ra,ui="__reactEvents$"+ra,Ka="__reactListeners$"+ra,yA="__reactHandles$"+ra,xl="__reactResources$"+ra,Vi="__reactMarker$"+ra;function Qu(f){delete f[oo],delete f[kn],delete f[ui],delete f[Ka],delete f[yA]}function co(f){var g=f[oo];if(g)return g;for(var x=f.parentNode;x;){if(g=x[Xi]||x[oo]){if(x=g.alternate,g.child!==null||x!==null&&x.child!==null)for(f=om(f);f!==null;){if(x=f[oo])return x;f=om(f)}return g}f=x,x=f.parentNode}return null}function $a(f){if(f=f[oo]||f[Xi]){var g=f.tag;if(g===5||g===6||g===13||g===31||g===26||g===27||g===3)return f}return null}function Ml(f){var g=f.tag;if(g===5||g===26||g===27||g===6)return f.stateNode;throw Error(i(33))}function Fa(f){var g=f[xl];return g||(g=f[xl]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function Ro(f){f[Vi]=!0}var gc=new Set,Qo={};function mr(f,g){za(f,g),za(f+"Capture",g)}function za(f,g){for(Qo[f]=g,f=0;f<g.length;f++)gc.add(g[f])}var Zo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bu={},Cu={};function ul(f){return Nn.call(Cu,f)?!0:Nn.call(bu,f)?!1:Zo.test(f)?Cu[f]=!0:(bu[f]=!0,!1)}function Vc(f,g,x){if(ul(g))if(x===null)f.removeAttribute(g);else{switch(typeof x){case"undefined":case"function":case"symbol":f.removeAttribute(g);return;case"boolean":var T=g.toLowerCase().slice(0,5);if(T!=="data-"&&T!=="aria-"){f.removeAttribute(g);return}}f.setAttribute(g,""+x)}}function cl(f,g,x){if(x===null)f.removeAttribute(g);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(g);return}f.setAttribute(g,""+x)}}function ja(f,g,x,T){if(T===null)f.removeAttribute(x);else{switch(typeof T){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(x);return}f.setAttributeNS(g,x,""+T)}}function lr(f){switch(typeof f){case"bigint":case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function qu(f){var g=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function wl(f,g,x){var T=Object.getOwnPropertyDescriptor(f.constructor.prototype,g);if(!f.hasOwnProperty(g)&&typeof T<"u"&&typeof T.get=="function"&&typeof T.set=="function"){var G=T.get,J=T.set;return Object.defineProperty(f,g,{configurable:!0,get:function(){return G.call(this)},set:function(_e){x=""+_e,J.call(this,_e)}}),Object.defineProperty(f,g,{enumerable:T.enumerable}),{getValue:function(){return x},setValue:function(_e){x=""+_e},stopTracking:function(){f._valueTracker=null,delete f[g]}}}}function Sl(f){if(!f._valueTracker){var g=qu(f)?"checked":"value";f._valueTracker=wl(f,g,""+f[g])}}function _u(f){if(!f)return!1;var g=f._valueTracker;if(!g)return!0;var x=g.getValue(),T="";return f&&(T=qu(f)?f.checked?"true":"false":f.value),f=T,f!==x?(g.setValue(f),!0):!1}function yc(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}var Rh=/[\n"\\]/g;function Vs(f){return f.replace(Rh,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function vc(f,g,x,T,G,J,_e,Ve){f.name="",_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"?f.type=_e:f.removeAttribute("type"),g!=null?_e==="number"?(g===0&&f.value===""||f.value!=g)&&(f.value=""+lr(g)):f.value!==""+lr(g)&&(f.value=""+lr(g)):_e!=="submit"&&_e!=="reset"||f.removeAttribute("value"),g!=null?$c(f,_e,lr(g)):x!=null?$c(f,_e,lr(x)):T!=null&&f.removeAttribute("value"),G==null&&J!=null&&(f.defaultChecked=!!J),G!=null&&(f.checked=G&&typeof G!="function"&&typeof G!="symbol"),Ve!=null&&typeof Ve!="function"&&typeof Ve!="symbol"&&typeof Ve!="boolean"?f.name=""+lr(Ve):f.removeAttribute("name")}function Yl(f,g,x,T,G,J,_e,Ve){if(J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"&&(f.type=J),g!=null||x!=null){if(!(J!=="submit"&&J!=="reset"||g!=null)){Sl(f);return}x=x!=null?""+lr(x):"",g=g!=null?""+lr(g):x,Ve||g===f.value||(f.value=g),f.defaultValue=g}T=T??G,T=typeof T!="function"&&typeof T!="symbol"&&!!T,f.checked=Ve?f.checked:!!T,f.defaultChecked=!!T,_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"&&(f.name=_e),Sl(f)}function $c(f,g,x){g==="number"&&yc(f.ownerDocument)===f||f.defaultValue===""+x||(f.defaultValue=""+x)}function Vl(f,g,x,T){if(f=f.options,g){g={};for(var G=0;G<x.length;G++)g["$"+x[G]]=!0;for(x=0;x<f.length;x++)G=g.hasOwnProperty("$"+f[x].value),f[x].selected!==G&&(f[x].selected=G),G&&T&&(f[x].defaultSelected=!0)}else{for(x=""+lr(x),g=null,G=0;G<f.length;G++){if(f[G].value===x){f[G].selected=!0,T&&(f[G].defaultSelected=!0);return}g!==null||f[G].disabled||(g=f[G])}g!==null&&(g.selected=!0)}}function $l(f,g,x){if(g!=null&&(g=""+lr(g),g!==f.value&&(f.value=g),x==null)){f.defaultValue!==g&&(f.defaultValue=g);return}f.defaultValue=x!=null?""+lr(x):""}function hs(f,g,x,T){if(g==null){if(T!=null){if(x!=null)throw Error(i(92));if(Fe(T)){if(1<T.length)throw Error(i(93));T=T[0]}x=T}x==null&&(x=""),g=x}x=lr(g),f.defaultValue=x,T=f.textContent,T===x&&T!==""&&T!==null&&(f.value=T),Sl(f)}function Mo(f,g){if(g){var x=f.firstChild;if(x&&x===f.lastChild&&x.nodeType===3){x.nodeValue=g;return}}f.textContent=g}var Hl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xu(f,g,x){var T=g.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?T?f.setProperty(g,""):g==="float"?f.cssFloat="":f[g]="":T?f.setProperty(g,x):typeof x!="number"||x===0||Hl.has(g)?g==="float"?f.cssFloat=x:f[g]=(""+x).trim():f[g]=x+"px"}function Es(f,g,x){if(g!=null&&typeof g!="object")throw Error(i(62));if(f=f.style,x!=null){for(var T in x)!x.hasOwnProperty(T)||g!=null&&g.hasOwnProperty(T)||(T.indexOf("--")===0?f.setProperty(T,""):T==="float"?f.cssFloat="":f[T]="");for(var G in g)T=g[G],g.hasOwnProperty(G)&&x[G]!==T&&xu(f,G,T)}else for(var J in g)g.hasOwnProperty(J)&&xu(f,J,g[J])}function Mu(f){if(f.indexOf("-")===-1)return!1;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ji(f){return Yu.test(""+f)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":f}function Ha(){}var Xo=null;function Vu(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var Jo=null,Ao=null;function ho(f){var g=$a(f);if(g&&(f=g.stateNode)){var x=f[kn]||null;e:switch(f=g.stateNode,g.type){case"input":if(vc(f,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),g=x.name,x.type==="radio"&&g!=null){for(x=f;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+Vs(""+g)+'"][type="radio"]'),g=0;g<x.length;g++){var T=x[g];if(T!==f&&T.form===f.form){var G=T[kn]||null;if(!G)throw Error(i(90));vc(T,G.value,G.defaultValue,G.defaultValue,G.checked,G.defaultChecked,G.type,G.name)}}for(g=0;g<x.length;g++)T=x[g],T.form===f.form&&_u(T)}break e;case"textarea":$l(f,x.value,x.defaultValue);break e;case"select":g=x.value,g!=null&&Vl(f,!!x.multiple,g,!1)}}}var _i=!1;function to(f,g,x){if(_i)return f(g,x);_i=!0;try{var T=f(g);return T}finally{if(_i=!1,(Jo!==null||Ao!==null)&&(Jg(),Jo&&(g=Jo,f=Ao,Ao=Jo=null,ho(g),f)))for(g=0;g<f.length;g++)ho(f[g])}}function $s(f,g){var x=f.stateNode;if(x===null)return null;var T=x[kn]||null;if(T===null)return null;x=T[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(T=!T.disabled)||(f=f.type,T=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!T;break e;default:f=!1}if(f)return null;if(x&&typeof x!="function")throw Error(i(231,g,typeof x));return x}var go=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fs=!1;if(go)try{var Yr={};Object.defineProperty(Yr,"passive",{get:function(){Fs=!0}}),window.addEventListener("test",Yr,Yr),window.removeEventListener("test",Yr,Yr)}catch{Fs=!1}var oa=null,Za=null,$i=null;function Tr(){if($i)return $i;var f,g=Za,x=g.length,T,G="value"in oa?oa.value:oa.textContent,J=G.length;for(f=0;f<x&&g[f]===G[f];f++);var _e=x-f;for(T=1;T<=_e&&g[x-T]===G[J-T];T++);return $i=G.slice(f,1<T?1-T:void 0)}function ne(f){var g=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&g===13&&(f=13)):f=g,f===10&&(f=13),32<=f||f===13?f:0}function Ce(){return!0}function He(){return!1}function Et(f){function g(x,T,G,J,_e){this._reactName=x,this._targetInst=G,this.type=T,this.nativeEvent=J,this.target=_e,this.currentTarget=null;for(var Ve in f)f.hasOwnProperty(Ve)&&(x=f[Ve],this[Ve]=x?x(J):J[Ve]);return this.isDefaultPrevented=(J.defaultPrevented!=null?J.defaultPrevented:J.returnValue===!1)?Ce:He,this.isPropagationStopped=He,this}return v(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=Ce)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=Ce)},persist:function(){},isPersistent:Ce}),g}var Qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dn=Et(Qn),Oi=v({},Qn,{view:0,detail:0}),Fi=Et(Oi),qn,Ei,ei,ri=v({},Oi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pd,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==ei&&(ei&&f.type==="mousemove"?(qn=f.screenX-ei.screenX,Ei=f.screenY-ei.screenY):Ei=qn=0,ei=f),qn)},movementY:function(f){return"movementY"in f?f.movementY:Ei}}),hr=Et(ri),ni=v({},ri,{dataTransfer:0}),Kr=Et(ni),wo=v({},Oi,{relatedTarget:0}),Po=Et(wo),ds=v({},Qn,{animationName:0,elapsedTime:0,pseudoElement:0}),eh=Et(ds),El=v({},Qn,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),fs=Et(El),Nv=v({},Qn,{data:0}),wu=Et(Nv),Xl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vA(f){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(f):(f=yo[f])?!!g[f]:!1}function Pd(){return vA}var qo=v({},Oi,{key:function(f){if(f.key){var g=Xl[f.key]||f.key;if(g!=="Unidentified")return g}return f.type==="keypress"?(f=ne(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?Hc[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pd,charCode:function(f){return f.type==="keypress"?ne(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?ne(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),Eo=Et(qo),$m=v({},ri,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hm=Et($m),Zm=v({},Oi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pd}),Gv=Et(Zm),Sf=v({},Qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xm=Et(Sf),Ld=v({},ri,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),Ef=Et(Ld),bA=v({},Qn,{newState:0,oldState:0}),Bf=Et(bA),Ud=[9,13,27,32],zs=go&&"CompositionEvent"in window,Ph=null;go&&"documentMode"in document&&(Ph=document.documentMode);var Lh=go&&"TextEvent"in window&&!Ph,Kd=go&&(!zs||Ph&&8<Ph&&11>=Ph),Uh=" ",Jm=!1;function Fd(f,g){switch(f){case"keyup":return Ud.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $1(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var bc=!1;function Bl(f,g){switch(f){case"compositionend":return $1(g);case"keypress":return g.which!==32?null:(Jm=!0,Uh);case"textInput":return f=g.data,f===Uh&&Jm?null:f;default:return null}}function e0(f,g){if(bc)return f==="compositionend"||!zs&&Fd(f,g)?(f=Tr(),$i=Za=oa=null,bc=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return Kd&&g.locale!=="ko"?null:g.data;default:return null}}var Of={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ip(f){var g=f&&f.nodeName&&f.nodeName.toLowerCase();return g==="input"?!!Of[f.type]:g==="textarea"}function Tp(f,g,x,T){Jo?Ao?Ao.push(T):Ao=[T]:Jo=T,g=k0(g,"onChange"),0<g.length&&(x=new Dn("onChange","change",null,x,T),f.push({event:x,listeners:g}))}var zd=null,If=null;function H1(f){h_(f,0)}function kp(f){var g=Ml(f);if(_u(g))return f}function Kh(f,g){if(f==="change")return g}var Fh=!1;if(go){var Dp;if(go){var zh="oninput"in document;if(!zh){var Rp=document.createElement("div");Rp.setAttribute("oninput","return;"),zh=typeof Rp.oninput=="function"}Dp=zh}else Dp=!1;Fh=Dp&&(!document.documentMode||9<document.documentMode)}function Tf(){zd&&(zd.detachEvent("onpropertychange",th),If=zd=null)}function th(f){if(f.propertyName==="value"&&kp(If)){var g=[];Tp(g,If,f,Vu(f)),to(H1,g)}}function t0(f,g,x){f==="focusin"?(Tf(),zd=g,If=x,zd.attachEvent("onpropertychange",th)):f==="focusout"&&Tf()}function Z1(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return kp(If)}function Pp(f,g){if(f==="click")return kp(g)}function X1(f,g){if(f==="input"||f==="change")return kp(g)}function jh(f,g){return f===g&&(f!==0||1/f===1/g)||f!==f&&g!==g}var Bs=typeof Object.is=="function"?Object.is:jh;function nh(f,g){if(Bs(f,g))return!0;if(typeof f!="object"||f===null||typeof g!="object"||g===null)return!1;var x=Object.keys(f),T=Object.keys(g);if(x.length!==T.length)return!1;for(T=0;T<x.length;T++){var G=x[T];if(!Nn.call(g,G)||!Bs(f[G],g[G]))return!1}return!0}function Cc(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function Lp(f,g){var x=Cc(f);f=0;for(var T;x;){if(x.nodeType===3){if(T=f+x.textContent.length,f<=g&&T>=g)return{node:x,offset:g-f};f=T}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Cc(x)}}function n0(f,g){return f&&g?f===g?!0:f&&f.nodeType===3?!1:g&&g.nodeType===3?n0(f,g.parentNode):"contains"in f?f.contains(g):f.compareDocumentPosition?!!(f.compareDocumentPosition(g)&16):!1:!1}function i0(f){f=f!=null&&f.ownerDocument!=null&&f.ownerDocument.defaultView!=null?f.ownerDocument.defaultView:window;for(var g=yc(f.document);g instanceof f.HTMLIFrameElement;){try{var x=typeof g.contentWindow.location.href=="string"}catch{x=!1}if(x)f=g.contentWindow;else break;g=yc(f.document)}return g}function Up(f){var g=f&&f.nodeName&&f.nodeName.toLowerCase();return g&&(g==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||g==="textarea"||f.contentEditable==="true")}var ih=go&&"documentMode"in document&&11>=document.documentMode,Tt=null,an=null,tn=null,mi=!1;function pr(f,g,x){var T=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;mi||Tt==null||Tt!==yc(T)||(T=Tt,"selectionStart"in T&&Up(T)?T={start:T.selectionStart,end:T.selectionEnd}:(T=(T.ownerDocument&&T.ownerDocument.defaultView||window).getSelection(),T={anchorNode:T.anchorNode,anchorOffset:T.anchorOffset,focusNode:T.focusNode,focusOffset:T.focusOffset}),tn&&nh(tn,T)||(tn=T,T=k0(an,"onSelect"),0<T.length&&(g=new Dn("onSelect","select",null,g,x),f.push({event:g,listeners:T}),g.target=Tt)))}function Fr(f,g){var x={};return x[f.toLowerCase()]=g.toLowerCase(),x["Webkit"+f]="webkit"+g,x["Moz"+f]="moz"+g,x}var ps={animationend:Fr("Animation","AnimationEnd"),animationiteration:Fr("Animation","AnimationIteration"),animationstart:Fr("Animation","AnimationStart"),transitionrun:Fr("Transition","TransitionRun"),transitionstart:Fr("Transition","TransitionStart"),transitioncancel:Fr("Transition","TransitionCancel"),transitionend:Fr("Transition","TransitionEnd")},Lo={},Vr={};go&&(Vr=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function CA(f){if(Lo[f])return Lo[f];if(!ps[f])return f;var g=ps[f],x;for(x in g)if(g.hasOwnProperty(x)&&x in Vr)return Lo[f]=g[x];return f}var Ol=CA("animationend"),Nh=CA("animationiteration"),r0=CA("animationstart"),_c=CA("transitionrun"),Gh=CA("transitionstart"),rh=CA("transitioncancel"),Cr=CA("transitionend"),kg=new Map,Kp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kp.push("scrollEnd");function Il(f,g){kg.set(f,g),mr(g,[f])}var _A=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)},Jl=[],oh=0,xA=0;function Su(){for(var f=oh,g=xA=oh=0;g<f;){var x=Jl[g];Jl[g++]=null;var T=Jl[g];Jl[g++]=null;var G=Jl[g];Jl[g++]=null;var J=Jl[g];if(Jl[g++]=null,T!==null&&G!==null){var _e=T.pending;_e===null?G.next=G:(G.next=_e.next,_e.next=G),T.pending=G}J!==0&&o0(x,G,J)}}function Wh(f,g,x,T){Jl[oh++]=f,Jl[oh++]=g,Jl[oh++]=x,Jl[oh++]=T,xA|=T,f.lanes|=T,f=f.alternate,f!==null&&(f.lanes|=T)}function sh(f,g,x,T){return Wh(f,g,x,T),jd(f)}function eu(f,g){return Wh(f,null,null,g),jd(f)}function o0(f,g,x){f.lanes|=x;var T=f.alternate;T!==null&&(T.lanes|=x);for(var G=!1,J=f.return;J!==null;)J.childLanes|=x,T=J.alternate,T!==null&&(T.childLanes|=x),J.tag===22&&(f=J.stateNode,f===null||f._visibility&1||(G=!0)),f=J,J=J.return;return f.tag===3?(J=f.stateNode,G&&g!==null&&(G=31-$e(x),f=J.hiddenUpdates,T=f[G],T===null?f[G]=[g]:T.push(g),g.lane=x|536870912),J):null}function jd(f){if(50<Xg)throw Xg=0,ub=null,Error(i(185));for(var g=f.return;g!==null;)f=g,g=f.return;return f.tag===3?f.stateNode:null}var or={};function Fp(f,g,x,T){this.tag=f,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Al(f,g,x,T){return new Fp(f,g,x,T)}function MA(f){return f=f.prototype,!(!f||!f.isReactComponent)}function Tl(f,g){var x=f.alternate;return x===null?(x=Al(f.tag,g,f.key,f.mode),x.elementType=f.elementType,x.type=f.type,x.stateNode=f.stateNode,x.alternate=f,f.alternate=x):(x.pendingProps=g,x.type=f.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=f.flags&65011712,x.childLanes=f.childLanes,x.lanes=f.lanes,x.child=f.child,x.memoizedProps=f.memoizedProps,x.memoizedState=f.memoizedState,x.updateQueue=f.updateQueue,g=f.dependencies,x.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},x.sibling=f.sibling,x.index=f.index,x.ref=f.ref,x.refCleanup=f.refCleanup,x}function J1(f,g){f.flags&=65011714;var x=f.alternate;return x===null?(f.childLanes=0,f.lanes=g,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=x.childLanes,f.lanes=x.lanes,f.child=x.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=x.memoizedProps,f.memoizedState=x.memoizedState,f.updateQueue=x.updateQueue,f.type=x.type,g=x.dependencies,f.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),f}function s0(f,g,x,T,G,J){var _e=0;if(T=f,typeof f=="function")MA(f)&&(_e=1);else if(typeof f=="string")_e=Sb(f,x,St.current)?26:f==="html"||f==="head"||f==="body"?27:5;else e:switch(f){case ce:return f=Al(31,x,g,G),f.elementType=ce,f.lanes=J,f;case U:return Qh(x.children,G,J,g);case z:_e=8,G|=24;break;case V:return f=Al(12,x,g,G|2),f.elementType=V,f.lanes=J,f;case ie:return f=Al(13,x,g,G),f.elementType=ie,f.lanes=J,f;case te:return f=Al(19,x,g,G),f.elementType=te,f.lanes=J,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case X:_e=10;break e;case Z:_e=9;break e;case re:_e=11;break e;case q:_e=14;break e;case le:_e=16,T=null;break e}_e=29,x=Error(i(130,f===null?"null":typeof f,"")),T=null}return g=Al(_e,x,g,G),g.elementType=f,g.type=T,g.lanes=J,g}function Qh(f,g,x,T){return f=Al(7,f,T,g),f.lanes=x,f}function kf(f,g,x){return f=Al(6,f,null,g),f.lanes=x,f}function Nd(f){var g=Al(18,null,null,0);return g.stateNode=f,g}function wA(f,g,x){return g=Al(4,f.children!==null?f.children:[],f.key,g),g.lanes=x,g.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},g}var zp=new WeakMap;function kl(f,g){if(typeof f=="object"&&f!==null){var x=zp.get(f);return x!==void 0?x:(g={value:f,source:g,stack:Gn(g)},zp.set(f,g),g)}return{value:f,source:g,stack:Gn(g)}}var qh=[],Yh=0,ms=null,js=0,Xa=[],Ja=0,Zc=null,SA=1,Dl="";function $u(f,g){qh[Yh++]=js,qh[Yh++]=ms,ms=f,js=g}function jp(f,g,x){Xa[Ja++]=SA,Xa[Ja++]=Dl,Xa[Ja++]=Zc,Zc=f;var T=SA;f=Dl;var G=32-$e(T)-1;T&=~(1<<G),x+=1;var J=32-$e(g)+G;if(30<J){var _e=G-G%5;J=(T&(1<<_e)-1).toString(32),T>>=_e,G-=_e,SA=1<<32-$e(g)+G|x<<G|T,Dl=J+f}else SA=1<<J|x<<G|T,Dl=f}function xc(f){f.return!==null&&($u(f,1),jp(f,1,0))}function EA(f){for(;f===ms;)ms=qh[--Yh],qh[Yh]=null,js=qh[--Yh],qh[Yh]=null;for(;f===Zc;)Zc=Xa[--Ja],Xa[Ja]=null,Dl=Xa[--Ja],Xa[Ja]=null,SA=Xa[--Ja],Xa[Ja]=null}function Gd(f,g){Xa[Ja++]=SA,Xa[Ja++]=Dl,Xa[Ja++]=Zc,SA=g.id,Dl=g.overflow,Zc=f}var sa=null,so=null,Rr=!1,ah=null,Hu=!1,Os=Error(i(519));function Eu(f){var g=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Mc(kl(g,f)),Os}function Rl(f){var g=f.stateNode,x=f.type,T=f.memoizedProps;switch(g[oo]=f,g[kn]=T,x){case"dialog":no("cancel",g),no("close",g);break;case"iframe":case"object":case"embed":no("load",g);break;case"video":case"audio":for(x=0;x<o1.length;x++)no(o1[x],g);break;case"source":no("error",g);break;case"img":case"image":case"link":no("error",g),no("load",g);break;case"details":no("toggle",g);break;case"input":no("invalid",g),Yl(g,T.value,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name,!0);break;case"select":no("invalid",g);break;case"textarea":no("invalid",g),hs(g,T.value,T.defaultValue,T.children)}x=T.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||g.textContent===""+x||T.suppressHydrationWarning===!0||Sy(g.textContent,x)?(T.popover!=null&&(no("beforetoggle",g),no("toggle",g)),T.onScroll!=null&&no("scroll",g),T.onScrollEnd!=null&&no("scrollend",g),T.onClick!=null&&(g.onclick=Ha),g=!0):g=!1,g||Eu(f,!0)}function lh(f){for(sa=f.return;sa;)switch(sa.tag){case 5:case 31:case 13:Hu=!1;return;case 27:case 3:Hu=!0;return;default:sa=sa.return}}function Xc(f){if(f!==sa)return!1;if(!Rr)return lh(f),Rr=!0,!1;var g=f.tag,x;if((x=g!==3&&g!==27)&&((x=g===5)&&(x=f.type,x=!(x!=="form"&&x!=="button")||dd(f.type,f.memoizedProps)),x=!x),x&&so&&Eu(f),lh(f),g===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));so=Xf(f)}else if(g===31){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));so=Xf(f)}else g===27?(g=so,Di(f.type)?(f=Ty,Ty=null,so=f):so=g):so=sa?FA(f.stateNode.nextSibling):null;return!0}function qe(){so=sa=null,Rr=!1}function tu(){var f=ah;return f!==null&&(Lc===null?Lc=f:Lc.push.apply(Lc,f),ah=null),f}function Mc(f){ah===null?ah=[f]:ah.push(f)}var xa=De(null),ur=null,BA=null;function uh(f,g,x){Re(xa,g._currentValue),g._currentValue=x}function OA(f){f._currentValue=xa.current,Ge(xa)}function IA(f,g,x){for(;f!==null;){var T=f.alternate;if((f.childLanes&g)!==g?(f.childLanes|=g,T!==null&&(T.childLanes|=g)):T!==null&&(T.childLanes&g)!==g&&(T.childLanes|=g),f===x)break;f=f.return}}function a0(f,g,x,T){var G=f.child;for(G!==null&&(G.return=f);G!==null;){var J=G.dependencies;if(J!==null){var _e=G.child;J=J.firstContext;e:for(;J!==null;){var Ve=J;J=G;for(var _t=0;_t<g.length;_t++)if(Ve.context===g[_t]){J.lanes|=x,Ve=J.alternate,Ve!==null&&(Ve.lanes|=x),IA(J.return,x,f),T||(_e=null);break e}J=Ve.next}}else if(G.tag===18){if(_e=G.return,_e===null)throw Error(i(341));_e.lanes|=x,J=_e.alternate,J!==null&&(J.lanes|=x),IA(_e,x,f),_e=null}else _e=G.child;if(_e!==null)_e.return=G;else for(_e=G;_e!==null;){if(_e===f){_e=null;break}if(G=_e.sibling,G!==null){G.return=_e.return,_e=G;break}_e=_e.return}G=_e}}function wc(f,g,x,T){f=null;for(var G=g,J=!1;G!==null;){if(!J){if((G.flags&524288)!==0)J=!0;else if((G.flags&262144)!==0)break}if(G.tag===10){var _e=G.alternate;if(_e===null)throw Error(i(387));if(_e=_e.memoizedProps,_e!==null){var Ve=G.type;Bs(G.pendingProps.value,_e.value)||(f!==null?f.push(Ve):f=[Ve])}}else if(G===Ut.current){if(_e=G.alternate,_e===null)throw Error(i(387));_e.memoizedState.memoizedState!==G.memoizedState.memoizedState&&(f!==null?f.push(z0):f=[z0])}G=G.return}f!==null&&a0(g,f,x,T),g.flags|=262144}function Df(f){for(f=f.firstContext;f!==null;){if(!Bs(f.context._currentValue,f.memoizedValue))return!0;f=f.next}return!1}function ch(f){ur=f,BA=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function aa(f){return l0(ur,f)}function Zu(f,g){return ur===null&&ch(f),l0(f,g)}function l0(f,g){var x=g._currentValue;if(g={context:g,memoizedValue:x,next:null},BA===null){if(f===null)throw Error(i(308));BA=g,f.dependencies={lanes:0,firstContext:g},f.flags|=524288}else BA=BA.next=g;return x}var Dg=typeof AbortController<"u"?AbortController:function(){var f=[],g=this.signal={aborted:!1,addEventListener:function(x,T){f.push(T)}};this.abort=function(){g.aborted=!0,f.forEach(function(x){return x()})}},ey=n.unstable_scheduleCallback,Rg=n.unstable_NormalPriority,Is={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pl(){return{controller:new Dg,data:new Map,refCount:0}}function Ll(f){f.refCount--,f.refCount===0&&ey(Rg,function(){f.controller.abort()})}var nu=null,u0=0,Ul=0,Rf=null;function Sc(f,g){if(nu===null){var x=nu=[];u0=0,Ul=Fl(),Rf={status:"pending",value:void 0,then:function(T){x.push(T)}}}return u0++,g.then(Pf,Pf),g}function Pf(){if(--u0===0&&nu!==null){Rf!==null&&(Rf.status="fulfilled");var f=nu;nu=null,Ul=0,Rf=null;for(var g=0;g<f.length;g++)(0,f[g])()}}function Np(f,g){var x=[],T={status:"pending",value:null,reason:null,then:function(G){x.push(G)}};return f.then(function(){T.status="fulfilled",T.value=g;for(var G=0;G<x.length;G++)(0,x[G])(g)},function(G){for(T.status="rejected",T.reason=G,G=0;G<x.length;G++)(0,x[G])(void 0)}),T}var Ts=Ie.S;Ie.S=function(f,g){ob=ti(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&Sc(f,g),Ts!==null&&Ts(f,g)};var Jc=De(null);function Gp(){var f=Jc.current;return f!==null?f:ys.pooledCache}function Vh(f,g){g===null?Re(Jc,Jc.current):Re(Jc,g.pool)}function TA(){var f=Gp();return f===null?null:{parent:Is._currentValue,pool:f}}var Fn=Error(i(460)),Lf=Error(i(474)),Ah=Error(i(542)),Wp={then:function(){}};function $h(f){return f=f.status,f==="fulfilled"||f==="rejected"}function Hh(f,g,x){switch(x=f[x],x===void 0?f.push(g):x!==g&&(g.then(Ha,Ha),g=x),g.status){case"fulfilled":return g.value;case"rejected":throw f=g.reason,A0(f),f;default:if(typeof g.status=="string")g.then(Ha,Ha);else{if(f=ys,f!==null&&100<f.shellSuspendCounter)throw Error(i(482));f=g,f.status="pending",f.then(function(T){if(g.status==="pending"){var G=g;G.status="fulfilled",G.value=T}},function(T){if(g.status==="pending"){var G=g;G.status="rejected",G.reason=T}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw f=g.reason,A0(f),f}throw kA=g,Fn}}function hl(f){try{var g=f._init;return g(f._payload)}catch(x){throw x!==null&&typeof x=="object"&&typeof x.then=="function"?(kA=x,Fn):x}}var kA=null;function c0(){if(kA===null)throw Error(i(459));var f=kA;return kA=null,f}function A0(f){if(f===Fn||f===Ah)throw Error(i(483))}var Ec=null,Xu=0;function Wd(f){var g=Xu;return Xu+=1,Ec===null&&(Ec=[]),Hh(Ec,f,g)}function Bu(f,g){g=g.props.ref,f.ref=g!==void 0?g:null}function iu(f,g){throw g.$$typeof===M?Error(i(525)):(f=Object.prototype.toString.call(g),Error(i(31,f==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":f)))}function Qp(f){function g(Pt,It){if(f){var qt=Pt.deletions;qt===null?(Pt.deletions=[It],Pt.flags|=16):qt.push(It)}}function x(Pt,It){if(!f)return null;for(;It!==null;)g(Pt,It),It=It.sibling;return null}function T(Pt){for(var It=new Map;Pt!==null;)Pt.key!==null?It.set(Pt.key,Pt):It.set(Pt.index,Pt),Pt=Pt.sibling;return It}function G(Pt,It){return Pt=Tl(Pt,It),Pt.index=0,Pt.sibling=null,Pt}function J(Pt,It,qt){return Pt.index=qt,f?(qt=Pt.alternate,qt!==null?(qt=qt.index,qt<It?(Pt.flags|=67108866,It):qt):(Pt.flags|=67108866,It)):(Pt.flags|=1048576,It)}function _e(Pt){return f&&Pt.alternate===null&&(Pt.flags|=67108866),Pt}function Ve(Pt,It,qt,hn){return It===null||It.tag!==6?(It=kf(qt,Pt.mode,hn),It.return=Pt,It):(It=G(It,qt),It.return=Pt,It)}function _t(Pt,It,qt,hn){var gi=qt.type;return gi===U?ln(Pt,It,qt.props.children,hn,qt.key):It!==null&&(It.elementType===gi||typeof gi=="object"&&gi!==null&&gi.$$typeof===le&&hl(gi)===It.type)?(It=G(It,qt.props),Bu(It,qt),It.return=Pt,It):(It=s0(qt.type,qt.key,qt.props,null,Pt.mode,hn),Bu(It,qt),It.return=Pt,It)}function $t(Pt,It,qt,hn){return It===null||It.tag!==4||It.stateNode.containerInfo!==qt.containerInfo||It.stateNode.implementation!==qt.implementation?(It=wA(qt,Pt.mode,hn),It.return=Pt,It):(It=G(It,qt.children||[]),It.return=Pt,It)}function ln(Pt,It,qt,hn,gi){return It===null||It.tag!==7?(It=Qh(qt,Pt.mode,hn,gi),It.return=Pt,It):(It=G(It,qt),It.return=Pt,It)}function gn(Pt,It,qt){if(typeof It=="string"&&It!==""||typeof It=="number"||typeof It=="bigint")return It=kf(""+It,Pt.mode,qt),It.return=Pt,It;if(typeof It=="object"&&It!==null){switch(It.$$typeof){case B:return qt=s0(It.type,It.key,It.props,null,Pt.mode,qt),Bu(qt,It),qt.return=Pt,qt;case P:return It=wA(It,Pt.mode,qt),It.return=Pt,It;case le:return It=hl(It),gn(Pt,It,qt)}if(Fe(It)||Ee(It))return It=Qh(It,Pt.mode,qt,null),It.return=Pt,It;if(typeof It.then=="function")return gn(Pt,Wd(It),qt);if(It.$$typeof===X)return gn(Pt,Zu(Pt,It),qt);iu(Pt,It)}return null}function Zt(Pt,It,qt,hn){var gi=It!==null?It.key:null;if(typeof qt=="string"&&qt!==""||typeof qt=="number"||typeof qt=="bigint")return gi!==null?null:Ve(Pt,It,""+qt,hn);if(typeof qt=="object"&&qt!==null){switch(qt.$$typeof){case B:return qt.key===gi?_t(Pt,It,qt,hn):null;case P:return qt.key===gi?$t(Pt,It,qt,hn):null;case le:return qt=hl(qt),Zt(Pt,It,qt,hn)}if(Fe(qt)||Ee(qt))return gi!==null?null:ln(Pt,It,qt,hn,null);if(typeof qt.then=="function")return Zt(Pt,It,Wd(qt),hn);if(qt.$$typeof===X)return Zt(Pt,It,Zu(Pt,qt),hn);iu(Pt,qt)}return null}function rn(Pt,It,qt,hn,gi){if(typeof hn=="string"&&hn!==""||typeof hn=="number"||typeof hn=="bigint")return Pt=Pt.get(qt)||null,Ve(It,Pt,""+hn,gi);if(typeof hn=="object"&&hn!==null){switch(hn.$$typeof){case B:return Pt=Pt.get(hn.key===null?qt:hn.key)||null,_t(It,Pt,hn,gi);case P:return Pt=Pt.get(hn.key===null?qt:hn.key)||null,$t(It,Pt,hn,gi);case le:return hn=hl(hn),rn(Pt,It,qt,hn,gi)}if(Fe(hn)||Ee(hn))return Pt=Pt.get(qt)||null,ln(It,Pt,hn,gi,null);if(typeof hn.then=="function")return rn(Pt,It,qt,Wd(hn),gi);if(hn.$$typeof===X)return rn(Pt,It,qt,Zu(It,hn),gi);iu(It,hn)}return null}function xi(Pt,It,qt,hn){for(var gi=null,vo=null,zi=It,Br=It=0,Hr=null;zi!==null&&Br<qt.length;Br++){zi.index>Br?(Hr=zi,zi=null):Hr=zi.sibling;var ko=Zt(Pt,zi,qt[Br],hn);if(ko===null){zi===null&&(zi=Hr);break}f&&zi&&ko.alternate===null&&g(Pt,zi),It=J(ko,It,Br),vo===null?gi=ko:vo.sibling=ko,vo=ko,zi=Hr}if(Br===qt.length)return x(Pt,zi),Rr&&$u(Pt,Br),gi;if(zi===null){for(;Br<qt.length;Br++)zi=gn(Pt,qt[Br],hn),zi!==null&&(It=J(zi,It,Br),vo===null?gi=zi:vo.sibling=zi,vo=zi);return Rr&&$u(Pt,Br),gi}for(zi=T(zi);Br<qt.length;Br++)Hr=rn(zi,Pt,Br,qt[Br],hn),Hr!==null&&(f&&Hr.alternate!==null&&zi.delete(Hr.key===null?Br:Hr.key),It=J(Hr,It,Br),vo===null?gi=Hr:vo.sibling=Hr,vo=Hr);return f&&zi.forEach(function(sf){return g(Pt,sf)}),Rr&&$u(Pt,Br),gi}function er(Pt,It,qt,hn){if(qt==null)throw Error(i(151));for(var gi=null,vo=null,zi=It,Br=It=0,Hr=null,ko=qt.next();zi!==null&&!ko.done;Br++,ko=qt.next()){zi.index>Br?(Hr=zi,zi=null):Hr=zi.sibling;var sf=Zt(Pt,zi,ko.value,hn);if(sf===null){zi===null&&(zi=Hr);break}f&&zi&&sf.alternate===null&&g(Pt,zi),It=J(sf,It,Br),vo===null?gi=sf:vo.sibling=sf,vo=sf,zi=Hr}if(ko.done)return x(Pt,zi),Rr&&$u(Pt,Br),gi;if(zi===null){for(;!ko.done;Br++,ko=qt.next())ko=gn(Pt,ko.value,hn),ko!==null&&(It=J(ko,It,Br),vo===null?gi=ko:vo.sibling=ko,vo=ko);return Rr&&$u(Pt,Br),gi}for(zi=T(zi);!ko.done;Br++,ko=qt.next())ko=rn(zi,Pt,Br,ko.value,hn),ko!==null&&(f&&ko.alternate!==null&&zi.delete(ko.key===null?Br:ko.key),It=J(ko,It,Br),vo===null?gi=ko:vo.sibling=ko,vo=ko);return f&&zi.forEach(function(O_){return g(Pt,O_)}),Rr&&$u(Pt,Br),gi}function zo(Pt,It,qt,hn){if(typeof qt=="object"&&qt!==null&&qt.type===U&&qt.key===null&&(qt=qt.props.children),typeof qt=="object"&&qt!==null){switch(qt.$$typeof){case B:e:{for(var gi=qt.key;It!==null;){if(It.key===gi){if(gi=qt.type,gi===U){if(It.tag===7){x(Pt,It.sibling),hn=G(It,qt.props.children),hn.return=Pt,Pt=hn;break e}}else if(It.elementType===gi||typeof gi=="object"&&gi!==null&&gi.$$typeof===le&&hl(gi)===It.type){x(Pt,It.sibling),hn=G(It,qt.props),Bu(hn,qt),hn.return=Pt,Pt=hn;break e}x(Pt,It);break}else g(Pt,It);It=It.sibling}qt.type===U?(hn=Qh(qt.props.children,Pt.mode,hn,qt.key),hn.return=Pt,Pt=hn):(hn=s0(qt.type,qt.key,qt.props,null,Pt.mode,hn),Bu(hn,qt),hn.return=Pt,Pt=hn)}return _e(Pt);case P:e:{for(gi=qt.key;It!==null;){if(It.key===gi)if(It.tag===4&&It.stateNode.containerInfo===qt.containerInfo&&It.stateNode.implementation===qt.implementation){x(Pt,It.sibling),hn=G(It,qt.children||[]),hn.return=Pt,Pt=hn;break e}else{x(Pt,It);break}else g(Pt,It);It=It.sibling}hn=wA(qt,Pt.mode,hn),hn.return=Pt,Pt=hn}return _e(Pt);case le:return qt=hl(qt),zo(Pt,It,qt,hn)}if(Fe(qt))return xi(Pt,It,qt,hn);if(Ee(qt)){if(gi=Ee(qt),typeof gi!="function")throw Error(i(150));return qt=gi.call(qt),er(Pt,It,qt,hn)}if(typeof qt.then=="function")return zo(Pt,It,Wd(qt),hn);if(qt.$$typeof===X)return zo(Pt,It,Zu(Pt,qt),hn);iu(Pt,qt)}return typeof qt=="string"&&qt!==""||typeof qt=="number"||typeof qt=="bigint"?(qt=""+qt,It!==null&&It.tag===6?(x(Pt,It.sibling),hn=G(It,qt),hn.return=Pt,Pt=hn):(x(Pt,It),hn=kf(qt,Pt.mode,hn),hn.return=Pt,Pt=hn),_e(Pt)):x(Pt,It)}return function(Pt,It,qt,hn){try{Xu=0;var gi=zo(Pt,It,qt,hn);return Ec=null,gi}catch(zi){if(zi===Fn||zi===Ah)throw zi;var vo=Al(29,zi,null,Pt.mode);return vo.lanes=hn,vo.return=Pt,vo}}}var eA=Qp(!0),qp=Qp(!1),Ju=!1;function tA(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bc(f,g){f=f.updateQueue,g.updateQueue===f&&(g.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function zr(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function Oc(f,g,x){var T=f.updateQueue;if(T===null)return null;if(T=T.shared,(Oo&2)!==0){var G=T.pending;return G===null?g.next=g:(g.next=G.next,G.next=g),T.pending=g,g=jd(f),o0(f,null,x),g}return Wh(f,T,g,x),jd(f)}function Zh(f,g,x){if(g=g.updateQueue,g!==null&&(g=g.shared,(x&4194048)!==0)){var T=g.lanes;T&=f.pendingLanes,x|=T,g.lanes=x,Li(f,x)}}function Xh(f,g){var x=f.updateQueue,T=f.alternate;if(T!==null&&(T=T.updateQueue,x===T)){var G=null,J=null;if(x=x.firstBaseUpdate,x!==null){do{var _e={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};J===null?G=J=_e:J=J.next=_e,x=x.next}while(x!==null);J===null?G=J=g:J=J.next=g}else G=J=g;x={baseState:T.baseState,firstBaseUpdate:G,lastBaseUpdate:J,shared:T.shared,callbacks:T.callbacks},f.updateQueue=x;return}f=x.lastBaseUpdate,f===null?x.firstBaseUpdate=g:f.next=g,x.lastBaseUpdate=g}var la=!1;function hh(){if(la){var f=Rf;if(f!==null)throw f}}function Qd(f,g,x,T){la=!1;var G=f.updateQueue;Ju=!1;var J=G.firstBaseUpdate,_e=G.lastBaseUpdate,Ve=G.shared.pending;if(Ve!==null){G.shared.pending=null;var _t=Ve,$t=_t.next;_t.next=null,_e===null?J=$t:_e.next=$t,_e=_t;var ln=f.alternate;ln!==null&&(ln=ln.updateQueue,Ve=ln.lastBaseUpdate,Ve!==_e&&(Ve===null?ln.firstBaseUpdate=$t:Ve.next=$t,ln.lastBaseUpdate=_t))}if(J!==null){var gn=G.baseState;_e=0,ln=$t=_t=null,Ve=J;do{var Zt=Ve.lane&-536870913,rn=Zt!==Ve.lane;if(rn?(Pr&Zt)===Zt:(T&Zt)===Zt){Zt!==0&&Zt===Ul&&(la=!0),ln!==null&&(ln=ln.next={lane:0,tag:Ve.tag,payload:Ve.payload,callback:null,next:null});e:{var xi=f,er=Ve;Zt=g;var zo=x;switch(er.tag){case 1:if(xi=er.payload,typeof xi=="function"){gn=xi.call(zo,gn,Zt);break e}gn=xi;break e;case 3:xi.flags=xi.flags&-65537|128;case 0:if(xi=er.payload,Zt=typeof xi=="function"?xi.call(zo,gn,Zt):xi,Zt==null)break e;gn=v({},gn,Zt);break e;case 2:Ju=!0}}Zt=Ve.callback,Zt!==null&&(f.flags|=64,rn&&(f.flags|=8192),rn=G.callbacks,rn===null?G.callbacks=[Zt]:rn.push(Zt))}else rn={lane:Zt,tag:Ve.tag,payload:Ve.payload,callback:Ve.callback,next:null},ln===null?($t=ln=rn,_t=gn):ln=ln.next=rn,_e|=Zt;if(Ve=Ve.next,Ve===null){if(Ve=G.shared.pending,Ve===null)break;rn=Ve,Ve=rn.next,rn.next=null,G.lastBaseUpdate=rn,G.shared.pending=null}}while(!0);ln===null&&(_t=gn),G.baseState=_t,G.firstBaseUpdate=$t,G.lastBaseUpdate=ln,J===null&&(G.shared.lanes=0),KA|=_e,f.lanes=_e,f.memoizedState=gn}}function ec(f,g){if(typeof f!="function")throw Error(i(191,f));f.call(g)}function Yp(f,g){var x=f.callbacks;if(x!==null)for(f.callbacks=null,f=0;f<x.length;f++)ec(x[f],g)}var el=De(null),tc=De(0);function di(f,g){f=yh,Re(tc,f),Re(el,g),yh=f|g.baseLanes}function si(){Re(tc,yh),Re(el,el.current)}function DA(){yh=tc.current,Ge(el),Ge(tc)}var ru=De(null),tl=null;function Hs(f){var g=f.alternate;Re(Zs,Zs.current&1),Re(ru,f),tl===null&&(g===null||el.current!==null||g.memoizedState!==null)&&(tl=f)}function dl(f){Re(Zs,Zs.current),Re(ru,f),tl===null&&(tl=f)}function Pg(f){f.tag===22?(Re(Zs,Zs.current),Re(ru,f),tl===null&&(tl=f)):Ic()}function Ic(){Re(Zs,Zs.current),Re(ru,ru.current)}function ou(f){Ge(ru),tl===f&&(tl=null),Ge(Zs)}var Zs=De(0);function dh(f){for(var g=f;g!==null;){if(g.tag===13){var x=g.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||Tu(x)||Js(x)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===f)break;for(;g.sibling===null;){if(g.return===null||g.return===f)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var $r=0,ki=null,Uo=null,ls=null,Jh=!1,nc=!1,fh=!1,Uf=0,RA=0,nA=null,Lg=0;function us(){throw Error(i(321))}function Tc(f,g){if(g===null)return!1;for(var x=0;x<g.length&&x<f.length;x++)if(!Bs(f[x],g[x]))return!1;return!0}function qd(f,g,x,T,G,J){return $r=J,ki=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Ie.H=f===null||f.memoizedState===null?Sa:Kl,fh=!1,J=x(T,G),fh=!1,nc&&(J=ed(g,x,T,G)),Yd(f),J}function Yd(f){Ie.H=ts;var g=Uo!==null&&Uo.next!==null;if($r=0,ls=Uo=ki=null,Jh=!1,RA=0,nA=null,g)throw Error(i(300));f===null||Ws||(f=f.dependencies,f!==null&&Df(f)&&(Ws=!0))}function ed(f,g,x,T){ki=f;var G=0;do{if(nc&&(nA=null),RA=0,nc=!1,25<=G)throw Error(i(301));if(G+=1,ls=Uo=null,f.updateQueue!=null){var J=f.updateQueue;J.lastEffect=null,J.events=null,J.stores=null,J.memoCache!=null&&(J.memoCache.index=0)}Ie.H=Yo,J=g(x,T)}while(nc);return J}function Vp(){var f=Ie.H,g=f.useState()[0];return g=typeof g.then=="function"?td(g):g,f=f.useState()[0],(Uo!==null?Uo.memoizedState:null)!==f&&(ki.flags|=1024),g}function Kf(){var f=Uf!==0;return Uf=0,f}function PA(f,g,x){g.updateQueue=f.updateQueue,g.flags&=-2053,f.lanes&=~x}function ph(f){if(Jh){for(f=f.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}Jh=!1}$r=0,ls=Uo=ki=null,nc=!1,RA=Uf=0,nA=null}function nl(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ls===null?ki.memoizedState=ls=f:ls=ls.next=f,ls}function gs(){if(Uo===null){var f=ki.alternate;f=f!==null?f.memoizedState:null}else f=Uo.next;var g=ls===null?ki.memoizedState:ls.next;if(g!==null)ls=g,Uo=f;else{if(f===null)throw ki.alternate===null?Error(i(467)):Error(i(310));Uo=f,f={memoizedState:Uo.memoizedState,baseState:Uo.baseState,baseQueue:Uo.baseQueue,queue:Uo.queue,next:null},ls===null?ki.memoizedState=ls=f:ls=ls.next=f}return ls}function kc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function td(f){var g=RA;return RA+=1,nA===null&&(nA=[]),f=Hh(nA,f,g),g=ki,(ls===null?g.memoizedState:ls.next)===null&&(g=g.alternate,Ie.H=g===null||g.memoizedState===null?Sa:Kl),f}function nd(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return td(f);if(f.$$typeof===X)return aa(f)}throw Error(i(438,String(f)))}function Ff(f){var g=null,x=ki.updateQueue;if(x!==null&&(g=x.memoCache),g==null){var T=ki.alternate;T!==null&&(T=T.updateQueue,T!==null&&(T=T.memoCache,T!=null&&(g={data:T.data.map(function(G){return G.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),x===null&&(x=kc(),ki.updateQueue=x),x.memoCache=g,x=g.data[g.index],x===void 0)for(x=g.data[g.index]=Array(f),T=0;T<f;T++)x[T]=ve;return g.index++,x}function ic(f,g){return typeof g=="function"?g(f):g}function I(f){var g=gs();return u(g,Uo,f)}function u(f,g,x){var T=f.queue;if(T===null)throw Error(i(311));T.lastRenderedReducer=x;var G=f.baseQueue,J=T.pending;if(J!==null){if(G!==null){var _e=G.next;G.next=J.next,J.next=_e}g.baseQueue=G=J,T.pending=null}if(J=f.baseState,G===null)f.memoizedState=J;else{g=G.next;var Ve=_e=null,_t=null,$t=g,ln=!1;do{var gn=$t.lane&-536870913;if(gn!==$t.lane?(Pr&gn)===gn:($r&gn)===gn){var Zt=$t.revertLane;if(Zt===0)_t!==null&&(_t=_t.next={lane:0,revertLane:0,gesture:null,action:$t.action,hasEagerState:$t.hasEagerState,eagerState:$t.eagerState,next:null}),gn===Ul&&(ln=!0);else if(($r&Zt)===Zt){$t=$t.next,Zt===Ul&&(ln=!0);continue}else gn={lane:0,revertLane:$t.revertLane,gesture:null,action:$t.action,hasEagerState:$t.hasEagerState,eagerState:$t.eagerState,next:null},_t===null?(Ve=_t=gn,_e=J):_t=_t.next=gn,ki.lanes|=Zt,KA|=Zt;gn=$t.action,fh&&x(J,gn),J=$t.hasEagerState?$t.eagerState:x(J,gn)}else Zt={lane:gn,revertLane:$t.revertLane,gesture:$t.gesture,action:$t.action,hasEagerState:$t.hasEagerState,eagerState:$t.eagerState,next:null},_t===null?(Ve=_t=Zt,_e=J):_t=_t.next=Zt,ki.lanes|=gn,KA|=gn;$t=$t.next}while($t!==null&&$t!==g);if(_t===null?_e=J:_t.next=Ve,!Bs(J,f.memoizedState)&&(Ws=!0,ln&&(x=Rf,x!==null)))throw x;f.memoizedState=J,f.baseState=_e,f.baseQueue=_t,T.lastRenderedState=J}return G===null&&(T.lanes=0),[f.memoizedState,T.dispatch]}function p(f){var g=gs(),x=g.queue;if(x===null)throw Error(i(311));x.lastRenderedReducer=f;var T=x.dispatch,G=x.pending,J=g.memoizedState;if(G!==null){x.pending=null;var _e=G=G.next;do J=f(J,_e.action),_e=_e.next;while(_e!==G);Bs(J,g.memoizedState)||(Ws=!0),g.memoizedState=J,g.baseQueue===null&&(g.baseState=J),x.lastRenderedState=J}return[J,T]}function C(f,g,x){var T=ki,G=gs(),J=Rr;if(J){if(x===void 0)throw Error(i(407));x=x()}else x=g();var _e=!Bs((Uo||G).memoizedState,x);if(_e&&(G.memoizedState=x,Ws=!0),G=G.queue,Qt(K.bind(null,T,G,f),[f]),G.getSnapshot!==g||_e||ls!==null&&ls.memoizedState.tag&1){if(T.flags|=2048,lt(9,{destroy:void 0},k.bind(null,T,G,x,g),null),ys===null)throw Error(i(349));J||($r&127)!==0||S(T,g,x)}return x}function S(f,g,x){f.flags|=16384,f={getSnapshot:g,value:x},g=ki.updateQueue,g===null?(g=kc(),ki.updateQueue=g,g.stores=[f]):(x=g.stores,x===null?g.stores=[f]:x.push(f))}function k(f,g,x,T){g.value=x,g.getSnapshot=T,N(g)&&$(f)}function K(f,g,x){return x(function(){N(g)&&$(f)})}function N(f){var g=f.getSnapshot;f=f.value;try{var x=g();return!Bs(f,x)}catch{return!0}}function $(f){var g=eu(f,2);g!==null&&Uc(g,f,2)}function se(f){var g=nl();if(typeof f=="function"){var x=f;if(f=x(),fh){vt(!0);try{x()}finally{vt(!1)}}}return g.memoizedState=g.baseState=f,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ic,lastRenderedState:f},g}function ue(f,g,x,T){return f.baseState=x,u(f,Uo,typeof T=="function"?T:ic)}function ye(f,g,x,T,G){if(wa(f))throw Error(i(485));if(f=g.action,f!==null){var J={payload:G,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_e){J.listeners.push(_e)}};Ie.T!==null?x(!0):J.isTransition=!1,T(J),x=g.pending,x===null?(J.next=g.pending=J,me(g,J)):(J.next=x.next,g.pending=x.next=J)}}function me(f,g){var x=g.action,T=g.payload,G=f.state;if(g.isTransition){var J=Ie.T,_e={};Ie.T=_e;try{var Ve=x(G,T),_t=Ie.S;_t!==null&&_t(_e,Ve),Se(f,g,Ve)}catch($t){Je(f,g,$t)}finally{J!==null&&_e.types!==null&&(J.types=_e.types),Ie.T=J}}else try{J=x(G,T),Se(f,g,J)}catch($t){Je(f,g,$t)}}function Se(f,g,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(T){Ke(f,g,T)},function(T){return Je(f,g,T)}):Ke(f,g,x)}function Ke(f,g,x){g.status="fulfilled",g.value=x,nt(g),f.state=x,g=f.pending,g!==null&&(x=g.next,x===g?f.pending=null:(x=x.next,g.next=x,me(f,x)))}function Je(f,g,x){var T=f.pending;if(f.pending=null,T!==null){T=T.next;do g.status="rejected",g.reason=x,nt(g),g=g.next;while(g!==T)}f.action=null}function nt(f){f=f.listeners;for(var g=0;g<f.length;g++)(0,f[g])()}function tt(f,g){return g}function rt(f,g){if(Rr){var x=ys.formState;if(x!==null){e:{var T=ki;if(Rr){if(so){t:{for(var G=so,J=Hu;G.nodeType!==8;){if(!J){G=null;break t}if(G=FA(G.nextSibling),G===null){G=null;break t}}J=G.data,G=J==="F!"||J==="F"?G:null}if(G){so=FA(G.nextSibling),T=G.data==="F!";break e}}Eu(T)}T=!1}T&&(g=x[0])}}return x=nl(),x.memoizedState=x.baseState=g,T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tt,lastRenderedState:g},x.queue=T,x=id.bind(null,ki,T),T.dispatch=x,T=se(!1),J=Gs.bind(null,ki,!1,T.queue),T=nl(),G={state:g,dispatch:null,action:f,pending:null},T.queue=G,x=ye.bind(null,ki,G,J,x),G.dispatch=x,T.memoizedState=f,[g,x,!1]}function dt(f){var g=gs();return st(g,Uo,f)}function st(f,g,x){if(g=u(f,g,tt)[0],f=I(ic)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var T=td(g)}catch(_e){throw _e===Fn?Ah:_e}else T=g;g=gs();var G=g.queue,J=G.dispatch;return x!==g.memoizedState&&(ki.flags|=2048,lt(9,{destroy:void 0},ft.bind(null,G,x),null)),[T,J,f]}function ft(f,g){f.action=g}function Ct(f){var g=gs(),x=Uo;if(x!==null)return st(g,x,f);gs(),g=g.memoizedState,x=gs();var T=x.queue.dispatch;return x.memoizedState=f,[g,T,!1]}function lt(f,g,x,T){return f={tag:f,create:x,deps:T,inst:g,next:null},g=ki.updateQueue,g===null&&(g=kc(),ki.updateQueue=g),x=g.lastEffect,x===null?g.lastEffect=f.next=f:(T=x.next,x.next=f,f.next=T,g.lastEffect=f),f}function Ot(){return gs().memoizedState}function Ft(f,g,x,T){var G=nl();ki.flags|=f,G.memoizedState=lt(1|g,{destroy:void 0},x,T===void 0?null:T)}function zt(f,g,x,T){var G=gs();T=T===void 0?null:T;var J=G.memoizedState.inst;Uo!==null&&T!==null&&Tc(T,Uo.memoizedState.deps)?G.memoizedState=lt(g,J,x,T):(ki.flags|=f,G.memoizedState=lt(1|g,J,x,T))}function Gt(f,g){Ft(8390656,8,f,g)}function Qt(f,g){zt(2048,8,f,g)}function dn(f){ki.flags|=4;var g=ki.updateQueue;if(g===null)g=kc(),ki.updateQueue=g,g.events=[f];else{var x=g.events;x===null?g.events=[f]:x.push(f)}}function Rn(f){var g=gs().memoizedState;return dn({ref:g,nextImpl:f}),function(){if((Oo&2)!==0)throw Error(i(440));return g.impl.apply(void 0,arguments)}}function An(f,g){return zt(4,2,f,g)}function ai(f,g){return zt(4,4,f,g)}function nr(f,g){if(typeof g=="function"){f=f();var x=g(f);return function(){typeof x=="function"?x():g(null)}}if(g!=null)return f=f(),g.current=f,function(){g.current=null}}function fo(f,g,x){x=x!=null?x.concat([f]):null,zt(4,4,nr.bind(null,g,f),x)}function Bo(){}function po(f,g){var x=gs();g=g===void 0?null:g;var T=x.memoizedState;return g!==null&&Tc(g,T[1])?T[0]:(x.memoizedState=[f,g],f)}function kr(f,g){var x=gs();g=g===void 0?null:g;var T=x.memoizedState;if(g!==null&&Tc(g,T[1]))return T[0];if(T=f(),fh){vt(!0);try{f()}finally{vt(!1)}}return x.memoizedState=[T,g],T}function Dr(f,g,x){return x===void 0||($r&1073741824)!==0&&(Pr&261930)===0?f.memoizedState=g:(f.memoizedState=x,f=S0(),ki.lanes|=f,KA|=f,x)}function Ma(f,g,x,T){return Bs(x,g)?x:el.current!==null?(f=Dr(f,x,T),Bs(f,g)||(Ws=!0),f):($r&42)===0||($r&1073741824)!==0&&(Pr&261930)===0?(Ws=!0,f.memoizedState=x):(f=S0(),ki.lanes|=f,KA|=f,g)}function es(f,g,x,T,G){var J=Ye.p;Ye.p=J!==0&&8>J?J:8;var _e=Ie.T,Ve={};Ie.T=Ve,Gs(f,!1,g,x);try{var _t=G(),$t=Ie.S;if($t!==null&&$t(Ve,_t),_t!==null&&typeof _t=="object"&&typeof _t.then=="function"){var ln=Np(_t,T);su(f,g,ln,Io(f))}else su(f,g,T,Io(f))}catch(gn){su(f,g,{then:function(){},status:"rejected",reason:gn},Io())}finally{Ye.p=J,_e!==null&&Ve.types!==null&&(_e.types=Ve.types),Ie.T=_e}}function Ns(){}function Ko(f,g,x,T){if(f.tag!==5)throw Error(i(476));var G=ks(f).queue;es(f,G,g,At,x===null?Ns:function(){return Na(f),x(T)})}function ks(f){var g=f.memoizedState;if(g!==null)return g;g={memoizedState:At,baseState:At,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ic,lastRenderedState:At},next:null};var x={};return g.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ic,lastRenderedState:x},next:null},f.memoizedState=g,f=f.alternate,f!==null&&(f.memoizedState=g),g}function Na(f){var g=ks(f);g.next===null&&(g=f.alternate.memoizedState),su(f,g.next.queue,{},Io())}function fl(){return aa(z0)}function Dc(){return gs().memoizedState}function Ou(){return gs().memoizedState}function iA(f){for(var g=f.return;g!==null;){switch(g.tag){case 24:case 3:var x=Io();f=zr(x);var T=Oc(g,f,x);T!==null&&(Uc(T,g,x),Zh(T,g,x)),g={cache:Pl()},f.payload=g;return}g=g.return}}function h0(f,g,x){var T=Io();x={lane:T,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},wa(f)?ua(g,x):(x=sh(f,g,x,T),x!==null&&(Uc(x,f,T),au(x,g,T)))}function id(f,g,x){var T=Io();su(f,g,x,T)}function su(f,g,x,T){var G={lane:T,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null};if(wa(f))ua(g,G);else{var J=f.alternate;if(f.lanes===0&&(J===null||J.lanes===0)&&(J=g.lastRenderedReducer,J!==null))try{var _e=g.lastRenderedState,Ve=J(_e,x);if(G.hasEagerState=!0,G.eagerState=Ve,Bs(Ve,_e))return Wh(f,g,G,0),ys===null&&Su(),!1}catch{}if(x=sh(f,g,G,T),x!==null)return Uc(x,f,T),au(x,g,T),!0}return!1}function Gs(f,g,x,T){if(T={lane:2,revertLane:Fl(),gesture:null,action:T,hasEagerState:!1,eagerState:null,next:null},wa(f)){if(g)throw Error(i(479))}else g=sh(f,x,T,2),g!==null&&Uc(g,f,2)}function wa(f){var g=f.alternate;return f===ki||g!==null&&g===ki}function ua(f,g){nc=Jh=!0;var x=f.pending;x===null?g.next=g:(g.next=x.next,x.next=g),f.pending=g}function au(f,g,x){if((x&4194048)!==0){var T=g.lanes;T&=f.pendingLanes,x|=T,g.lanes=x,Li(f,x)}}var ts={readContext:aa,use:nd,useCallback:us,useContext:us,useEffect:us,useImperativeHandle:us,useLayoutEffect:us,useInsertionEffect:us,useMemo:us,useReducer:us,useRef:us,useState:us,useDebugValue:us,useDeferredValue:us,useTransition:us,useSyncExternalStore:us,useId:us,useHostTransitionStatus:us,useFormState:us,useActionState:us,useOptimistic:us,useMemoCache:us,useCacheRefresh:us};ts.useEffectEvent=us;var Sa={readContext:aa,use:nd,useCallback:function(f,g){return nl().memoizedState=[f,g===void 0?null:g],f},useContext:aa,useEffect:Gt,useImperativeHandle:function(f,g,x){x=x!=null?x.concat([f]):null,Ft(4194308,4,nr.bind(null,g,f),x)},useLayoutEffect:function(f,g){return Ft(4194308,4,f,g)},useInsertionEffect:function(f,g){Ft(4,2,f,g)},useMemo:function(f,g){var x=nl();g=g===void 0?null:g;var T=f();if(fh){vt(!0);try{f()}finally{vt(!1)}}return x.memoizedState=[T,g],T},useReducer:function(f,g,x){var T=nl();if(x!==void 0){var G=x(g);if(fh){vt(!0);try{x(g)}finally{vt(!1)}}}else G=g;return T.memoizedState=T.baseState=G,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:G},T.queue=f,f=f.dispatch=h0.bind(null,ki,f),[T.memoizedState,f]},useRef:function(f){var g=nl();return f={current:f},g.memoizedState=f},useState:function(f){f=se(f);var g=f.queue,x=id.bind(null,ki,g);return g.dispatch=x,[f.memoizedState,x]},useDebugValue:Bo,useDeferredValue:function(f,g){var x=nl();return Dr(x,f,g)},useTransition:function(){var f=se(!1);return f=es.bind(null,ki,f.queue,!0,!1),nl().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,g,x){var T=ki,G=nl();if(Rr){if(x===void 0)throw Error(i(407));x=x()}else{if(x=g(),ys===null)throw Error(i(349));(Pr&127)!==0||S(T,g,x)}G.memoizedState=x;var J={value:x,getSnapshot:g};return G.queue=J,Gt(K.bind(null,T,J,f),[f]),T.flags|=2048,lt(9,{destroy:void 0},k.bind(null,T,J,x,g),null),x},useId:function(){var f=nl(),g=ys.identifierPrefix;if(Rr){var x=Dl,T=SA;x=(T&~(1<<32-$e(T)-1)).toString(32)+x,g="_"+g+"R_"+x,x=Uf++,0<x&&(g+="H"+x.toString(32)),g+="_"}else x=Lg++,g="_"+g+"r_"+x.toString(32)+"_";return f.memoizedState=g},useHostTransitionStatus:fl,useFormState:rt,useActionState:rt,useOptimistic:function(f){var g=nl();g.memoizedState=g.baseState=f;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=x,g=Gs.bind(null,ki,!0,x),x.dispatch=g,[f,g]},useMemoCache:Ff,useCacheRefresh:function(){return nl().memoizedState=iA.bind(null,ki)},useEffectEvent:function(f){var g=nl(),x={impl:f};return g.memoizedState=x,function(){if((Oo&2)!==0)throw Error(i(440));return x.impl.apply(void 0,arguments)}}},Kl={readContext:aa,use:nd,useCallback:po,useContext:aa,useEffect:Qt,useImperativeHandle:fo,useInsertionEffect:An,useLayoutEffect:ai,useMemo:kr,useReducer:I,useRef:Ot,useState:function(){return I(ic)},useDebugValue:Bo,useDeferredValue:function(f,g){var x=gs();return Ma(x,Uo.memoizedState,f,g)},useTransition:function(){var f=I(ic)[0],g=gs().memoizedState;return[typeof f=="boolean"?f:td(f),g]},useSyncExternalStore:C,useId:Dc,useHostTransitionStatus:fl,useFormState:dt,useActionState:dt,useOptimistic:function(f,g){var x=gs();return ue(x,Uo,f,g)},useMemoCache:Ff,useCacheRefresh:Ou};Kl.useEffectEvent=Rn;var Yo={readContext:aa,use:nd,useCallback:po,useContext:aa,useEffect:Qt,useImperativeHandle:fo,useInsertionEffect:An,useLayoutEffect:ai,useMemo:kr,useReducer:p,useRef:Ot,useState:function(){return p(ic)},useDebugValue:Bo,useDeferredValue:function(f,g){var x=gs();return Uo===null?Dr(x,f,g):Ma(x,Uo.memoizedState,f,g)},useTransition:function(){var f=p(ic)[0],g=gs().memoizedState;return[typeof f=="boolean"?f:td(f),g]},useSyncExternalStore:C,useId:Dc,useHostTransitionStatus:fl,useFormState:Ct,useActionState:Ct,useOptimistic:function(f,g){var x=gs();return Uo!==null?ue(x,Uo,f,g):(x.baseState=f,[f,x.queue.dispatch])},useMemoCache:Ff,useCacheRefresh:Ou};Yo.useEffectEvent=Rn;function d0(f,g,x,T){g=f.memoizedState,x=x(T,g),x=x==null?g:v({},g,x),f.memoizedState=x,f.lanes===0&&(f.updateQueue.baseState=x)}var zf={enqueueSetState:function(f,g,x){f=f._reactInternals;var T=Io(),G=zr(T);G.payload=g,x!=null&&(G.callback=x),g=Oc(f,G,T),g!==null&&(Uc(g,f,T),Zh(g,f,T))},enqueueReplaceState:function(f,g,x){f=f._reactInternals;var T=Io(),G=zr(T);G.tag=1,G.payload=g,x!=null&&(G.callback=x),g=Oc(f,G,T),g!==null&&(Uc(g,f,T),Zh(g,f,T))},enqueueForceUpdate:function(f,g){f=f._reactInternals;var x=Io(),T=zr(x);T.tag=2,g!=null&&(T.callback=g),g=Oc(f,T,x),g!==null&&(Uc(g,f,x),Zh(g,f,x))}};function f0(f,g,x,T,G,J,_e){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(T,J,_e):g.prototype&&g.prototype.isPureReactComponent?!nh(x,T)||!nh(G,J):!0}function p0(f,g,x,T){f=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(x,T),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(x,T),g.state!==f&&zf.enqueueReplaceState(g,g.state,null)}function ca(f,g){var x=g;if("ref"in g){x={};for(var T in g)T!=="ref"&&(x[T]=g[T])}if(f=f.defaultProps){x===g&&(x=v({},x));for(var G in f)x[G]===void 0&&(x[G]=f[G])}return x}function mh(f){_A(f)}function LA(f){console.error(f)}function Ug(f){_A(f)}function rd(f,g){try{var x=f.onUncaughtError;x(g.value,{componentStack:g.stack})}catch(T){setTimeout(function(){throw T})}}function m0(f,g,x){try{var T=f.onCaughtError;T(x.value,{componentStack:x.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(G){setTimeout(function(){throw G})}}function od(f,g,x){return x=zr(x),x.tag=3,x.payload={element:null},x.callback=function(){rd(f,g)},x}function Rc(f){return f=zr(f),f.tag=3,f}function jf(f,g,x,T){var G=x.type.getDerivedStateFromError;if(typeof G=="function"){var J=T.value;f.payload=function(){return G(J)},f.callback=function(){m0(g,x,T)}}var _e=x.stateNode;_e!==null&&typeof _e.componentDidCatch=="function"&&(f.callback=function(){m0(g,x,T),typeof G!="function"&&(Vf===null?Vf=new Set([this]):Vf.add(this));var Ve=T.stack;this.componentDidCatch(T.value,{componentStack:Ve!==null?Ve:""})})}function Kg(f,g,x,T,G){if(x.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){if(g=x.alternate,g!==null&&wc(g,x,G,!0),x=ru.current,x!==null){switch(x.tag){case 31:case 13:return tl===null?ef():x.alternate===null&&ha===0&&(ha=3),x.flags&=-257,x.flags|=65536,x.lanes=G,T===Wp?x.flags|=16384:(g=x.updateQueue,g===null?x.updateQueue=new Set([T]):g.add(T),n1(f,T,G)),!1;case 22:return x.flags|=65536,T===Wp?x.flags|=16384:(g=x.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([T])},x.updateQueue=g):(x=g.retryQueue,x===null?g.retryQueue=new Set([T]):x.add(T)),n1(f,T,G)),!1}throw Error(i(435,x.tag))}return n1(f,T,G),ef(),!1}if(Rr)return g=ru.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=G,T!==Os&&(f=Error(i(422),{cause:T}),Mc(kl(f,x)))):(T!==Os&&(g=Error(i(423),{cause:T}),Mc(kl(g,x))),f=f.current.alternate,f.flags|=65536,G&=-G,f.lanes|=G,T=kl(T,x),G=od(f.stateNode,T,G),Xh(f,G),ha!==4&&(ha=2)),!1;var J=Error(i(520),{cause:T});if(J=kl(J,x),Hg===null?Hg=[J]:Hg.push(J),ha!==4&&(ha=2),g===null)return!0;T=kl(T,x),x=g;do{switch(x.tag){case 3:return x.flags|=65536,f=G&-G,x.lanes|=f,f=od(x.stateNode,T,f),Xh(x,f),!1;case 1:if(g=x.type,J=x.stateNode,(x.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(Vf===null||!Vf.has(J))))return x.flags|=65536,G&=-G,x.lanes|=G,G=Rc(G),jf(G,f,x,T),Xh(x,G),!1}x=x.return}while(x!==null);return!1}var Fg=Error(i(461)),Ws=!1;function Aa(f,g,x,T){g.child=f===null?qp(g,null,x,T):eA(g,f.child,x,T)}function ir(f,g,x,T,G){x=x.render;var J=g.ref;if("ref"in T){var _e={};for(var Ve in T)Ve!=="ref"&&(_e[Ve]=T[Ve])}else _e=T;return ch(g),T=qd(f,g,x,_e,J,G),Ve=Kf(),f!==null&&!Ws?(PA(f,g,G),Xs(f,g,G)):(Rr&&Ve&&xc(g),g.flags|=1,Aa(f,g,T,G),g.child)}function sd(f,g,x,T,G){if(f===null){var J=x.type;return typeof J=="function"&&!MA(J)&&J.defaultProps===void 0&&x.compare===null?(g.tag=15,g.type=J,ty(f,g,J,T,G)):(f=s0(x.type,null,T,g,g.mode,G),f.ref=g.ref,f.return=g,g.child=f)}if(J=f.child,!Gg(f,G)){var _e=J.memoizedProps;if(x=x.compare,x=x!==null?x:nh,x(_e,T)&&f.ref===g.ref)return Xs(f,g,G)}return g.flags|=1,f=Tl(J,T),f.ref=g.ref,f.return=g,g.child=f}function ty(f,g,x,T,G){if(f!==null){var J=f.memoizedProps;if(nh(J,T)&&f.ref===g.ref)if(Ws=!1,g.pendingProps=T=J,Gg(f,G))(f.flags&131072)!==0&&(Ws=!0);else return g.lanes=f.lanes,Xs(f,g,G)}return iy(f,g,x,T,G)}function rA(f,g,x,T){var G=T.children,J=f!==null?f.memoizedState:null;if(f===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),T.mode==="hidden"){if((g.flags&128)!==0){if(J=J!==null?J.baseLanes|x:x,f!==null){for(T=g.child=f.child,G=0;T!==null;)G=G|T.lanes|T.childLanes,T=T.sibling;T=G&~J}else T=0,g.child=null;return $p(f,g,J,x,T)}if((x&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},f!==null&&Vh(g,J!==null?J.cachePool:null),J!==null?di(g,J):si(),Pg(g);else return T=g.lanes=536870912,$p(f,g,J!==null?J.baseLanes|x:x,x,T)}else J!==null?(Vh(g,J.cachePool),di(g,J),Ic(),g.memoizedState=null):(f!==null&&Vh(g,null),si(),Ic());return Aa(f,g,G,x),g.child}function Nf(f,g){return f!==null&&f.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function $p(f,g,x,T,G){var J=Gp();return J=J===null?null:{parent:Is._currentValue,pool:J},g.memoizedState={baseLanes:x,cachePool:J},f!==null&&Vh(g,null),si(),Pg(g),f!==null&&wc(f,g,T,!0),g.childLanes=G,null}function zg(f,g){return g=oy({mode:g.mode,children:g.children},f.mode),g.ref=f.ref,f.child=g,g.return=f,g}function lu(f,g,x){return eA(g,f.child,null,x),f=zg(g,g.pendingProps),f.flags|=2,ou(g),g.memoizedState=null,f}function $2(f,g,x){var T=g.pendingProps,G=(g.flags&128)!==0;if(g.flags&=-129,f===null){if(Rr){if(T.mode==="hidden")return f=zg(g,T),g.lanes=536870912,Nf(null,f);if(dl(g),(f=so)?(f=Cb(f,Hu),f=f!==null&&f.data==="&"?f:null,f!==null&&(g.memoizedState={dehydrated:f,treeContext:Zc!==null?{id:SA,overflow:Dl}:null,retryLane:536870912,hydrationErrors:null},x=Nd(f),x.return=g,g.child=x,sa=g,so=null)):f=null,f===null)throw Eu(g);return g.lanes=536870912,null}return zg(g,T)}var J=f.memoizedState;if(J!==null){var _e=J.dehydrated;if(dl(g),G)if(g.flags&256)g.flags&=-257,g=lu(f,g,x);else if(g.memoizedState!==null)g.child=f.child,g.flags|=128,g=null;else throw Error(i(558));else if(Ws||wc(f,g,x,!1),G=(x&f.childLanes)!==0,Ws||G){if(T=ys,T!==null&&(_e=Er(T,x),_e!==0&&_e!==J.retryLane))throw J.retryLane=_e,eu(f,_e),Uc(T,f,_e),Fg;ef(),g=lu(f,g,x)}else f=J.treeContext,so=FA(_e.nextSibling),sa=g,Rr=!0,ah=null,Hu=!1,f!==null&&Gd(g,f),g=zg(g,T),g.flags|=4096;return g}return f=Tl(f.child,{mode:T.mode,children:T.children}),f.ref=g.ref,g.child=f,f.return=g,f}function ny(f,g){var x=g.ref;if(x===null)f!==null&&f.ref!==null&&(g.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(i(284));(f===null||f.ref!==x)&&(g.flags|=4194816)}}function iy(f,g,x,T,G){return ch(g),x=qd(f,g,x,T,void 0,G),T=Kf(),f!==null&&!Ws?(PA(f,g,G),Xs(f,g,G)):(Rr&&T&&xc(g),g.flags|=1,Aa(f,g,x,G),g.child)}function Wv(f,g,x,T,G,J){return ch(g),g.updateQueue=null,x=ed(g,T,x,G),Yd(f),T=Kf(),f!==null&&!Ws?(PA(f,g,J),Xs(f,g,J)):(Rr&&T&&xc(g),g.flags|=1,Aa(f,g,x,J),g.child)}function jg(f,g,x,T,G){if(ch(g),g.stateNode===null){var J=or,_e=x.contextType;typeof _e=="object"&&_e!==null&&(J=aa(_e)),J=new x(T,J),g.memoizedState=J.state!==null&&J.state!==void 0?J.state:null,J.updater=zf,g.stateNode=J,J._reactInternals=g,J=g.stateNode,J.props=T,J.state=g.memoizedState,J.refs={},tA(g),_e=x.contextType,J.context=typeof _e=="object"&&_e!==null?aa(_e):or,J.state=g.memoizedState,_e=x.getDerivedStateFromProps,typeof _e=="function"&&(d0(g,x,_e,T),J.state=g.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof J.getSnapshotBeforeUpdate=="function"||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(_e=J.state,typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount(),_e!==J.state&&zf.enqueueReplaceState(J,J.state,null),Qd(g,T,J,G),hh(),J.state=g.memoizedState),typeof J.componentDidMount=="function"&&(g.flags|=4194308),T=!0}else if(f===null){J=g.stateNode;var Ve=g.memoizedProps,_t=ca(x,Ve);J.props=_t;var $t=J.context,ln=x.contextType;_e=or,typeof ln=="object"&&ln!==null&&(_e=aa(ln));var gn=x.getDerivedStateFromProps;ln=typeof gn=="function"||typeof J.getSnapshotBeforeUpdate=="function",Ve=g.pendingProps!==Ve,ln||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(Ve||$t!==_e)&&p0(g,J,T,_e),Ju=!1;var Zt=g.memoizedState;J.state=Zt,Qd(g,T,J,G),hh(),$t=g.memoizedState,Ve||Zt!==$t||Ju?(typeof gn=="function"&&(d0(g,x,gn,T),$t=g.memoizedState),(_t=Ju||f0(g,x,_t,T,Zt,$t,_e))?(ln||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount()),typeof J.componentDidMount=="function"&&(g.flags|=4194308)):(typeof J.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=T,g.memoizedState=$t),J.props=T,J.state=$t,J.context=_e,T=_t):(typeof J.componentDidMount=="function"&&(g.flags|=4194308),T=!1)}else{J=g.stateNode,Bc(f,g),_e=g.memoizedProps,ln=ca(x,_e),J.props=ln,gn=g.pendingProps,Zt=J.context,$t=x.contextType,_t=or,typeof $t=="object"&&$t!==null&&(_t=aa($t)),Ve=x.getDerivedStateFromProps,($t=typeof Ve=="function"||typeof J.getSnapshotBeforeUpdate=="function")||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(_e!==gn||Zt!==_t)&&p0(g,J,T,_t),Ju=!1,Zt=g.memoizedState,J.state=Zt,Qd(g,T,J,G),hh();var rn=g.memoizedState;_e!==gn||Zt!==rn||Ju||f!==null&&f.dependencies!==null&&Df(f.dependencies)?(typeof Ve=="function"&&(d0(g,x,Ve,T),rn=g.memoizedState),(ln=Ju||f0(g,x,ln,T,Zt,rn,_t)||f!==null&&f.dependencies!==null&&Df(f.dependencies))?($t||typeof J.UNSAFE_componentWillUpdate!="function"&&typeof J.componentWillUpdate!="function"||(typeof J.componentWillUpdate=="function"&&J.componentWillUpdate(T,rn,_t),typeof J.UNSAFE_componentWillUpdate=="function"&&J.UNSAFE_componentWillUpdate(T,rn,_t)),typeof J.componentDidUpdate=="function"&&(g.flags|=4),typeof J.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof J.componentDidUpdate!="function"||_e===f.memoizedProps&&Zt===f.memoizedState||(g.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||_e===f.memoizedProps&&Zt===f.memoizedState||(g.flags|=1024),g.memoizedProps=T,g.memoizedState=rn),J.props=T,J.state=rn,J.context=_t,T=ln):(typeof J.componentDidUpdate!="function"||_e===f.memoizedProps&&Zt===f.memoizedState||(g.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||_e===f.memoizedProps&&Zt===f.memoizedState||(g.flags|=1024),T=!1)}return J=T,ny(f,g),T=(g.flags&128)!==0,J||T?(J=g.stateNode,x=T&&typeof x.getDerivedStateFromError!="function"?null:J.render(),g.flags|=1,f!==null&&T?(g.child=eA(g,f.child,null,G),g.child=eA(g,null,x,G)):Aa(f,g,x,G),g.memoizedState=J.state,f=g.child):f=Xs(f,g,G),f}function Qv(f,g,x,T){return qe(),g.flags|=256,Aa(f,g,x,T),g.child}var ry={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qv(f){return{baseLanes:f,cachePool:TA()}}function gh(f,g,x){return f=f!==null?f.childLanes&~x:0,g&&(f|=lA),f}function uu(f,g,x){var T=g.pendingProps,G=!1,J=(g.flags&128)!==0,_e;if((_e=J)||(_e=f!==null&&f.memoizedState===null?!1:(Zs.current&2)!==0),_e&&(G=!0,g.flags&=-129),_e=(g.flags&32)!==0,g.flags&=-33,f===null){if(Rr){if(G?Hs(g):Ic(),(f=so)?(f=Cb(f,Hu),f=f!==null&&f.data!=="&"?f:null,f!==null&&(g.memoizedState={dehydrated:f,treeContext:Zc!==null?{id:SA,overflow:Dl}:null,retryLane:536870912,hydrationErrors:null},x=Nd(f),x.return=g,g.child=x,sa=g,so=null)):f=null,f===null)throw Eu(g);return Js(f)?g.lanes=32:g.lanes=536870912,null}var Ve=T.children;return T=T.fallback,G?(Ic(),G=g.mode,Ve=oy({mode:"hidden",children:Ve},G),T=Qh(T,G,x,null),Ve.return=g,T.return=g,Ve.sibling=T,g.child=Ve,T=g.child,T.memoizedState=qv(x),T.childLanes=gh(f,_e,x),g.memoizedState=ry,Nf(null,T)):(Hs(g),g0(g,Ve))}var _t=f.memoizedState;if(_t!==null&&(Ve=_t.dehydrated,Ve!==null)){if(J)g.flags&256?(Hs(g),g.flags&=-257,g=Hp(f,g,x)):g.memoizedState!==null?(Ic(),g.child=f.child,g.flags|=128,g=null):(Ic(),Ve=T.fallback,G=g.mode,T=oy({mode:"visible",children:T.children},G),Ve=Qh(Ve,G,x,null),Ve.flags|=2,T.return=g,Ve.return=g,T.sibling=Ve,g.child=T,eA(g,f.child,null,x),T=g.child,T.memoizedState=qv(x),T.childLanes=gh(f,_e,x),g.memoizedState=ry,g=Nf(null,T));else if(Hs(g),Js(Ve)){if(_e=Ve.nextSibling&&Ve.nextSibling.dataset,_e)var $t=_e.dgst;_e=$t,T=Error(i(419)),T.stack="",T.digest=_e,Mc({value:T,source:null,stack:null}),g=Hp(f,g,x)}else if(Ws||wc(f,g,x,!1),_e=(x&f.childLanes)!==0,Ws||_e){if(_e=ys,_e!==null&&(T=Er(_e,x),T!==0&&T!==_t.retryLane))throw _t.retryLane=T,eu(f,T),Uc(_e,f,T),Fg;Tu(Ve)||ef(),g=Hp(f,g,x)}else Tu(Ve)?(g.flags|=192,g.child=f.child,g=null):(f=_t.treeContext,so=FA(Ve.nextSibling),sa=g,Rr=!0,ah=null,Hu=!1,f!==null&&Gd(g,f),g=g0(g,T.children),g.flags|=4096);return g}return G?(Ic(),Ve=T.fallback,G=g.mode,_t=f.child,$t=_t.sibling,T=Tl(_t,{mode:"hidden",children:T.children}),T.subtreeFlags=_t.subtreeFlags&65011712,$t!==null?Ve=Tl($t,Ve):(Ve=Qh(Ve,G,x,null),Ve.flags|=2),Ve.return=g,T.return=g,T.sibling=Ve,g.child=T,Nf(null,T),T=g.child,Ve=f.child.memoizedState,Ve===null?Ve=qv(x):(G=Ve.cachePool,G!==null?(_t=Is._currentValue,G=G.parent!==_t?{parent:_t,pool:_t}:G):G=TA(),Ve={baseLanes:Ve.baseLanes|x,cachePool:G}),T.memoizedState=Ve,T.childLanes=gh(f,_e,x),g.memoizedState=ry,Nf(f.child,T)):(Hs(g),x=f.child,f=x.sibling,x=Tl(x,{mode:"visible",children:T.children}),x.return=g,x.sibling=null,f!==null&&(_e=g.deletions,_e===null?(g.deletions=[f],g.flags|=16):_e.push(f)),g.child=x,g.memoizedState=null,x)}function g0(f,g){return g=oy({mode:"visible",children:g},f.mode),g.return=f,f.child=g}function oy(f,g){return f=Al(22,f,null,g),f.lanes=0,f}function Hp(f,g,x){return eA(g,f.child,null,x),f=g0(g,g.pendingProps.children),f.flags|=2,g.memoizedState=null,f}function Yv(f,g,x){f.lanes|=g;var T=f.alternate;T!==null&&(T.lanes|=g),IA(f.return,g,x)}function Ng(f,g,x,T,G,J){var _e=f.memoizedState;_e===null?f.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:T,tail:x,tailMode:G,treeForkCount:J}:(_e.isBackwards=g,_e.rendering=null,_e.renderingStartTime=0,_e.last=T,_e.tail=x,_e.tailMode=G,_e.treeForkCount=J)}function ad(f,g,x){var T=g.pendingProps,G=T.revealOrder,J=T.tail;T=T.children;var _e=Zs.current,Ve=(_e&2)!==0;if(Ve?(_e=_e&1|2,g.flags|=128):_e&=1,Re(Zs,_e),Aa(f,g,T,x),T=Rr?js:0,!Ve&&f!==null&&(f.flags&128)!==0)e:for(f=g.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&Yv(f,x,g);else if(f.tag===19)Yv(f,x,g);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===g)break e;for(;f.sibling===null;){if(f.return===null||f.return===g)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}switch(G){case"forwards":for(x=g.child,G=null;x!==null;)f=x.alternate,f!==null&&dh(f)===null&&(G=x),x=x.sibling;x=G,x===null?(G=g.child,g.child=null):(G=x.sibling,x.sibling=null),Ng(g,!1,G,x,J,T);break;case"backwards":case"unstable_legacy-backwards":for(x=null,G=g.child,g.child=null;G!==null;){if(f=G.alternate,f!==null&&dh(f)===null){g.child=G;break}f=G.sibling,G.sibling=x,x=G,G=f}Ng(g,!0,x,null,J,T);break;case"together":Ng(g,!1,null,null,void 0,T);break;default:g.memoizedState=null}return g.child}function Xs(f,g,x){if(f!==null&&(g.dependencies=f.dependencies),KA|=g.lanes,(x&g.childLanes)===0)if(f!==null){if(wc(f,g,x,!1),(x&g.childLanes)===0)return null}else return null;if(f!==null&&g.child!==f.child)throw Error(i(153));if(g.child!==null){for(f=g.child,x=Tl(f,f.pendingProps),g.child=x,x.return=g;f.sibling!==null;)f=f.sibling,x=x.sibling=Tl(f,f.pendingProps),x.return=g;x.sibling=null}return g.child}function Gg(f,g){return(f.lanes&g)!==0?!0:(f=f.dependencies,!!(f!==null&&Df(f)))}function Vv(f,g,x){switch(g.tag){case 3:Le(g,g.stateNode.containerInfo),uh(g,Is,f.memoizedState.cache),qe();break;case 27:case 5:Oe(g);break;case 4:Le(g,g.stateNode.containerInfo);break;case 10:uh(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,dl(g),null;break;case 13:var T=g.memoizedState;if(T!==null)return T.dehydrated!==null?(Hs(g),g.flags|=128,null):(x&g.child.childLanes)!==0?uu(f,g,x):(Hs(g),f=Xs(f,g,x),f!==null?f.sibling:null);Hs(g);break;case 19:var G=(f.flags&128)!==0;if(T=(x&g.childLanes)!==0,T||(wc(f,g,x,!1),T=(x&g.childLanes)!==0),G){if(T)return ad(f,g,x);g.flags|=128}if(G=g.memoizedState,G!==null&&(G.rendering=null,G.tail=null,G.lastEffect=null),Re(Zs,Zs.current),T)break;return null;case 22:return g.lanes=0,rA(f,g,x,g.pendingProps);case 24:uh(g,Is,f.memoizedState.cache)}return Xs(f,g,x)}function JC(f,g,x){if(f!==null)if(f.memoizedProps!==g.pendingProps)Ws=!0;else{if(!Gg(f,x)&&(g.flags&128)===0)return Ws=!1,Vv(f,g,x);Ws=(f.flags&131072)!==0}else Ws=!1,Rr&&(g.flags&1048576)!==0&&jp(g,js,g.index);switch(g.lanes=0,g.tag){case 16:e:{var T=g.pendingProps;if(f=hl(g.elementType),g.type=f,typeof f=="function")MA(f)?(T=ca(f,T),g.tag=1,g=jg(null,g,f,T,x)):(g.tag=0,g=iy(null,g,f,T,x));else{if(f!=null){var G=f.$$typeof;if(G===re){g.tag=11,g=ir(null,g,f,T,x);break e}else if(G===q){g.tag=14,g=sd(null,g,f,T,x);break e}}throw g=Te(f)||f,Error(i(306,g,""))}}return g;case 0:return iy(f,g,g.type,g.pendingProps,x);case 1:return T=g.type,G=ca(T,g.pendingProps),jg(f,g,T,G,x);case 3:e:{if(Le(g,g.stateNode.containerInfo),f===null)throw Error(i(387));T=g.pendingProps;var J=g.memoizedState;G=J.element,Bc(f,g),Qd(g,T,null,x);var _e=g.memoizedState;if(T=_e.cache,uh(g,Is,T),T!==J.cache&&a0(g,[Is],x,!0),hh(),T=_e.element,J.isDehydrated)if(J={element:T,isDehydrated:!1,cache:_e.cache},g.updateQueue.baseState=J,g.memoizedState=J,g.flags&256){g=Qv(f,g,T,x);break e}else if(T!==G){G=kl(Error(i(424)),g),Mc(G),g=Qv(f,g,T,x);break e}else for(f=g.stateNode.containerInfo,f.nodeType===9?f=f.body:f=f.nodeName==="HTML"?f.ownerDocument.body:f,so=FA(f.firstChild),sa=g,Rr=!0,ah=null,Hu=!0,x=qp(g,null,T,x),g.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(qe(),T===G){g=Xs(f,g,x);break e}Aa(f,g,T,x)}g=g.child}return g;case 26:return ny(f,g),f===null?(x=Dy(g.type,null,g.pendingProps,null))?g.memoizedState=x:Rr||(x=g.type,f=g.pendingProps,T=hd(kt.current).createElement(x),T[oo]=g,T[kn]=f,Ta(T,x,f),Ro(T),g.stateNode=T):g.memoizedState=Dy(g.type,f.memoizedProps,g.pendingProps,f.memoizedState),null;case 27:return Oe(g),f===null&&Rr&&(T=g.stateNode=f_(g.type,g.pendingProps,kt.current),sa=g,Hu=!0,G=so,Di(g.type)?(Ty=G,so=FA(T.firstChild)):so=G),Aa(f,g,g.pendingProps.children,x),ny(f,g),f===null&&(g.flags|=4194304),g.child;case 5:return f===null&&Rr&&((G=T=so)&&(T=il(T,g.type,g.pendingProps,Hu),T!==null?(g.stateNode=T,sa=g,so=FA(T.firstChild),Hu=!1,G=!0):G=!1),G||Eu(g)),Oe(g),G=g.type,J=g.pendingProps,_e=f!==null?f.memoizedProps:null,T=J.children,dd(G,J)?T=null:_e!==null&&dd(G,_e)&&(g.flags|=32),g.memoizedState!==null&&(G=qd(f,g,Vp,null,null,x),z0._currentValue=G),ny(f,g),Aa(f,g,T,x),g.child;case 6:return f===null&&Rr&&((f=x=so)&&(x=cr(x,g.pendingProps,Hu),x!==null?(g.stateNode=x,sa=g,so=null,f=!0):f=!1),f||Eu(g)),null;case 13:return uu(f,g,x);case 4:return Le(g,g.stateNode.containerInfo),T=g.pendingProps,f===null?g.child=eA(g,null,T,x):Aa(f,g,T,x),g.child;case 11:return ir(f,g,g.type,g.pendingProps,x);case 7:return Aa(f,g,g.pendingProps,x),g.child;case 8:return Aa(f,g,g.pendingProps.children,x),g.child;case 12:return Aa(f,g,g.pendingProps.children,x),g.child;case 10:return T=g.pendingProps,uh(g,g.type,T.value),Aa(f,g,T.children,x),g.child;case 9:return G=g.type._context,T=g.pendingProps.children,ch(g),G=aa(G),T=T(G),g.flags|=1,Aa(f,g,T,x),g.child;case 14:return sd(f,g,g.type,g.pendingProps,x);case 15:return ty(f,g,g.type,g.pendingProps,x);case 19:return ad(f,g,x);case 31:return $2(f,g,x);case 22:return rA(f,g,x,g.pendingProps);case 24:return ch(g),T=aa(Is),f===null?(G=Gp(),G===null&&(G=ys,J=Pl(),G.pooledCache=J,J.refCount++,J!==null&&(G.pooledCacheLanes|=x),G=J),g.memoizedState={parent:T,cache:G},tA(g),uh(g,Is,G)):((f.lanes&x)!==0&&(Bc(f,g),Qd(g,null,null,x),hh()),G=f.memoizedState,J=g.memoizedState,G.parent!==T?(G={parent:T,cache:T},g.memoizedState=G,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=G),uh(g,Is,T)):(T=J.cache,uh(g,Is,T),T!==G.cache&&a0(g,[Is],x,!0))),Aa(f,g,g.pendingProps.children,x),g.child;case 29:throw g.pendingProps}throw Error(i(156,g.tag))}function ld(f){f.flags|=4}function $v(f,g,x,T,G){if((g=(f.mode&32)!==0)&&(g=!1),g){if(f.flags|=16777216,(G&335544128)===G)if(f.stateNode.complete)f.flags|=8192;else if(E0())f.flags|=8192;else throw kA=Wp,Lf}else f.flags&=-16777217}function Hv(f,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)f.flags&=-16777217;else if(f.flags|=16777216,!Eb(g))if(E0())f.flags|=8192;else throw kA=Wp,Lf}function y0(f,g){g!==null&&(f.flags|=4),f.flags&16384&&(g=f.tag!==22?Hn():536870912,f.lanes|=g,w0|=g)}function Wg(f,g){if(!Rr)switch(f.tailMode){case"hidden":g=f.tail;for(var x=null;g!==null;)g.alternate!==null&&(x=g),g=g.sibling;x===null?f.tail=null:x.sibling=null;break;case"collapsed":x=f.tail;for(var T=null;x!==null;)x.alternate!==null&&(T=x),x=x.sibling;T===null?g||f.tail===null?f.tail=null:f.tail.sibling=null:T.sibling=null}}function ns(f){var g=f.alternate!==null&&f.alternate.child===f.child,x=0,T=0;if(g)for(var G=f.child;G!==null;)x|=G.lanes|G.childLanes,T|=G.subtreeFlags&65011712,T|=G.flags&65011712,G.return=f,G=G.sibling;else for(G=f.child;G!==null;)x|=G.lanes|G.childLanes,T|=G.subtreeFlags,T|=G.flags,G.return=f,G=G.sibling;return f.subtreeFlags|=T,f.childLanes=x,g}function Zv(f,g,x){var T=g.pendingProps;switch(EA(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ns(g),null;case 1:return ns(g),null;case 3:return x=g.stateNode,T=null,f!==null&&(T=f.memoizedState.cache),g.memoizedState.cache!==T&&(g.flags|=2048),OA(Is),ke(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(f===null||f.child===null)&&(Xc(g)?ld(g):f===null||f.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,tu())),ns(g),null;case 26:var G=g.type,J=g.memoizedState;return f===null?(ld(g),J!==null?(ns(g),Hv(g,J)):(ns(g),$v(g,G,null,T,x))):J?J!==f.memoizedState?(ld(g),ns(g),Hv(g,J)):(ns(g),g.flags&=-16777217):(f=f.memoizedProps,f!==T&&ld(g),ns(g),$v(g,G,f,T,x)),null;case 27:if(Ze(g),x=kt.current,G=g.type,f!==null&&g.stateNode!=null)f.memoizedProps!==T&&ld(g);else{if(!T){if(g.stateNode===null)throw Error(i(166));return ns(g),null}f=St.current,Xc(g)?Rl(g):(f=f_(G,T,x),g.stateNode=f,ld(g))}return ns(g),null;case 5:if(Ze(g),G=g.type,f!==null&&g.stateNode!=null)f.memoizedProps!==T&&ld(g);else{if(!T){if(g.stateNode===null)throw Error(i(166));return ns(g),null}if(J=St.current,Xc(g))Rl(g);else{var _e=hd(kt.current);switch(J){case 1:J=_e.createElementNS("http://www.w3.org/2000/svg",G);break;case 2:J=_e.createElementNS("http://www.w3.org/1998/Math/MathML",G);break;default:switch(G){case"svg":J=_e.createElementNS("http://www.w3.org/2000/svg",G);break;case"math":J=_e.createElementNS("http://www.w3.org/1998/Math/MathML",G);break;case"script":J=_e.createElement("div"),J.innerHTML="<script><\/script>",J=J.removeChild(J.firstChild);break;case"select":J=typeof T.is=="string"?_e.createElement("select",{is:T.is}):_e.createElement("select"),T.multiple?J.multiple=!0:T.size&&(J.size=T.size);break;default:J=typeof T.is=="string"?_e.createElement(G,{is:T.is}):_e.createElement(G)}}J[oo]=g,J[kn]=T;e:for(_e=g.child;_e!==null;){if(_e.tag===5||_e.tag===6)J.appendChild(_e.stateNode);else if(_e.tag!==4&&_e.tag!==27&&_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===g)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===g)break e;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}g.stateNode=J;e:switch(Ta(J,G,T),G){case"button":case"input":case"select":case"textarea":T=!!T.autoFocus;break e;case"img":T=!0;break e;default:T=!1}T&&ld(g)}}return ns(g),$v(g,g.type,f===null?null:f.memoizedProps,g.pendingProps,x),null;case 6:if(f&&g.stateNode!=null)f.memoizedProps!==T&&ld(g);else{if(typeof T!="string"&&g.stateNode===null)throw Error(i(166));if(f=kt.current,Xc(g)){if(f=g.stateNode,x=g.memoizedProps,T=null,G=sa,G!==null)switch(G.tag){case 27:case 5:T=G.memoizedProps}f[oo]=g,f=!!(f.nodeValue===x||T!==null&&T.suppressHydrationWarning===!0||Sy(f.nodeValue,x)),f||Eu(g,!0)}else f=hd(f).createTextNode(T),f[oo]=g,g.stateNode=f}return ns(g),null;case 31:if(x=g.memoizedState,f===null||f.memoizedState!==null){if(T=Xc(g),x!==null){if(f===null){if(!T)throw Error(i(318));if(f=g.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(557));f[oo]=g}else qe(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;ns(g),f=!1}else x=tu(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=x),f=!0;if(!f)return g.flags&256?(ou(g),g):(ou(g),null);if((g.flags&128)!==0)throw Error(i(558))}return ns(g),null;case 13:if(T=g.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(G=Xc(g),T!==null&&T.dehydrated!==null){if(f===null){if(!G)throw Error(i(318));if(G=g.memoizedState,G=G!==null?G.dehydrated:null,!G)throw Error(i(317));G[oo]=g}else qe(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;ns(g),G=!1}else G=tu(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=G),G=!0;if(!G)return g.flags&256?(ou(g),g):(ou(g),null)}return ou(g),(g.flags&128)!==0?(g.lanes=x,g):(x=T!==null,f=f!==null&&f.memoizedState!==null,x&&(T=g.child,G=null,T.alternate!==null&&T.alternate.memoizedState!==null&&T.alternate.memoizedState.cachePool!==null&&(G=T.alternate.memoizedState.cachePool.pool),J=null,T.memoizedState!==null&&T.memoizedState.cachePool!==null&&(J=T.memoizedState.cachePool.pool),J!==G&&(T.flags|=2048)),x!==f&&x&&(g.child.flags|=8192),y0(g,g.updateQueue),ns(g),null);case 4:return ke(),f===null&&My(g.stateNode.containerInfo),ns(g),null;case 10:return OA(g.type),ns(g),null;case 19:if(Ge(Zs),T=g.memoizedState,T===null)return ns(g),null;if(G=(g.flags&128)!==0,J=T.rendering,J===null)if(G)Wg(T,!1);else{if(ha!==0||f!==null&&(f.flags&128)!==0)for(f=g.child;f!==null;){if(J=dh(f),J!==null){for(g.flags|=128,Wg(T,!1),f=J.updateQueue,g.updateQueue=f,y0(g,f),g.subtreeFlags=0,f=x,x=g.child;x!==null;)J1(x,f),x=x.sibling;return Re(Zs,Zs.current&1|2),Rr&&$u(g,T.treeForkCount),g.child}f=f.sibling}T.tail!==null&&ti()>Yf&&(g.flags|=128,G=!0,Wg(T,!1),g.lanes=4194304)}else{if(!G)if(f=dh(J),f!==null){if(g.flags|=128,G=!0,f=f.updateQueue,g.updateQueue=f,y0(g,f),Wg(T,!0),T.tail===null&&T.tailMode==="hidden"&&!J.alternate&&!Rr)return ns(g),null}else 2*ti()-T.renderingStartTime>Yf&&x!==536870912&&(g.flags|=128,G=!0,Wg(T,!1),g.lanes=4194304);T.isBackwards?(J.sibling=g.child,g.child=J):(f=T.last,f!==null?f.sibling=J:g.child=J,T.last=J)}return T.tail!==null?(f=T.tail,T.rendering=f,T.tail=f.sibling,T.renderingStartTime=ti(),f.sibling=null,x=Zs.current,Re(Zs,G?x&1|2:x&1),Rr&&$u(g,T.treeForkCount),f):(ns(g),null);case 22:case 23:return ou(g),DA(),T=g.memoizedState!==null,f!==null?f.memoizedState!==null!==T&&(g.flags|=8192):T&&(g.flags|=8192),T?(x&536870912)!==0&&(g.flags&128)===0&&(ns(g),g.subtreeFlags&6&&(g.flags|=8192)):ns(g),x=g.updateQueue,x!==null&&y0(g,x.retryQueue),x=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(x=f.memoizedState.cachePool.pool),T=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(T=g.memoizedState.cachePool.pool),T!==x&&(g.flags|=2048),f!==null&&Ge(Jc),null;case 24:return x=null,f!==null&&(x=f.memoizedState.cache),g.memoizedState.cache!==x&&(g.flags|=2048),OA(Is),ns(g),null;case 25:return null;case 30:return null}throw Error(i(156,g.tag))}function v0(f,g){switch(EA(g),g.tag){case 1:return f=g.flags,f&65536?(g.flags=f&-65537|128,g):null;case 3:return OA(Is),ke(),f=g.flags,(f&65536)!==0&&(f&128)===0?(g.flags=f&-65537|128,g):null;case 26:case 27:case 5:return Ze(g),null;case 31:if(g.memoizedState!==null){if(ou(g),g.alternate===null)throw Error(i(340));qe()}return f=g.flags,f&65536?(g.flags=f&-65537|128,g):null;case 13:if(ou(g),f=g.memoizedState,f!==null&&f.dehydrated!==null){if(g.alternate===null)throw Error(i(340));qe()}return f=g.flags,f&65536?(g.flags=f&-65537|128,g):null;case 19:return Ge(Zs),null;case 4:return ke(),null;case 10:return OA(g.type),null;case 22:case 23:return ou(g),DA(),f!==null&&Ge(Jc),f=g.flags,f&65536?(g.flags=f&-65537|128,g):null;case 24:return OA(Is),null;case 25:return null;default:return null}}function sy(f,g){switch(EA(g),g.tag){case 3:OA(Is),ke();break;case 26:case 27:case 5:Ze(g);break;case 4:ke();break;case 31:g.memoizedState!==null&&ou(g);break;case 13:ou(g);break;case 19:Ge(Zs);break;case 10:OA(g.type);break;case 22:case 23:ou(g),DA(),f!==null&&Ge(Jc);break;case 24:OA(Is)}}function b0(f,g){try{var x=g.updateQueue,T=x!==null?x.lastEffect:null;if(T!==null){var G=T.next;x=G;do{if((x.tag&f)===f){T=void 0;var J=x.create,_e=x.inst;T=J(),_e.destroy=T}x=x.next}while(x!==G)}}catch(Ve){To(g,g.return,Ve)}}function Vd(f,g,x){try{var T=g.updateQueue,G=T!==null?T.lastEffect:null;if(G!==null){var J=G.next;T=J;do{if((T.tag&f)===f){var _e=T.inst,Ve=_e.destroy;if(Ve!==void 0){_e.destroy=void 0,G=g;var _t=x,$t=Ve;try{$t()}catch(ln){To(G,_t,ln)}}}T=T.next}while(T!==J)}}catch(ln){To(g,g.return,ln)}}function Gf(f){var g=f.updateQueue;if(g!==null){var x=f.stateNode;try{Yp(g,x)}catch(T){To(f,f.return,T)}}}function Qg(f,g,x){x.props=ca(f.type,f.memoizedProps),x.state=f.memoizedState;try{x.componentWillUnmount()}catch(T){To(f,g,T)}}function rc(f,g){try{var x=f.ref;if(x!==null){switch(f.tag){case 26:case 27:case 5:var T=f.stateNode;break;case 30:T=f.stateNode;break;default:T=f.stateNode}typeof x=="function"?f.refCleanup=x(T):x.current=T}}catch(G){To(f,g,G)}}function Ea(f,g){var x=f.ref,T=f.refCleanup;if(x!==null)if(typeof T=="function")try{T()}catch(G){To(f,g,G)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(G){To(f,g,G)}else x.current=null}function C0(f){var g=f.type,x=f.memoizedProps,T=f.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":x.autoFocus&&T.focus();break e;case"img":x.src?T.src=x.src:x.srcSet&&(T.srcset=x.srcSet)}}catch(G){To(f,f.return,G)}}function ay(f,g,x){try{var T=f.stateNode;u1(T,f.type,x,g),T[kn]=g}catch(G){To(f,f.return,G)}}function e_(f){return f.tag===5||f.tag===3||f.tag===26||f.tag===27&&Di(f.type)||f.tag===4}function Xv(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||e_(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.tag===27&&Di(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function Jv(f,g,x){var T=f.tag;if(T===5||T===6)f=f.stateNode,g?(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x).insertBefore(f,g):(g=x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,g.appendChild(f),x=x._reactRootContainer,x!=null||g.onclick!==null||(g.onclick=Ha));else if(T!==4&&(T===27&&Di(f.type)&&(x=f.stateNode,g=null),f=f.child,f!==null))for(Jv(f,g,x),f=f.sibling;f!==null;)Jv(f,g,x),f=f.sibling}function ly(f,g,x){var T=f.tag;if(T===5||T===6)f=f.stateNode,g?x.insertBefore(f,g):x.appendChild(f);else if(T!==4&&(T===27&&Di(f.type)&&(x=f.stateNode),f=f.child,f!==null))for(ly(f,g,x),f=f.sibling;f!==null;)ly(f,g,x),f=f.sibling}function t_(f){var g=f.stateNode,x=f.memoizedProps;try{for(var T=f.type,G=g.attributes;G.length;)g.removeAttributeNode(G[0]);Ta(g,T,x),g[oo]=f,g[kn]=x}catch(J){To(f,f.return,J)}}var $d=!1,Ba=!1,eb=!1,tb=typeof WeakSet=="function"?WeakSet:Set,Oa=null;function H2(f,g){if(f=f.containerInfo,P0=j0,f=i0(f),Up(f)){if("selectionStart"in f)var x={start:f.selectionStart,end:f.selectionEnd};else e:{x=(x=f.ownerDocument)&&x.defaultView||window;var T=x.getSelection&&x.getSelection();if(T&&T.rangeCount!==0){x=T.anchorNode;var G=T.anchorOffset,J=T.focusNode;T=T.focusOffset;try{x.nodeType,J.nodeType}catch{x=null;break e}var _e=0,Ve=-1,_t=-1,$t=0,ln=0,gn=f,Zt=null;t:for(;;){for(var rn;gn!==x||G!==0&&gn.nodeType!==3||(Ve=_e+G),gn!==J||T!==0&&gn.nodeType!==3||(_t=_e+T),gn.nodeType===3&&(_e+=gn.nodeValue.length),(rn=gn.firstChild)!==null;)Zt=gn,gn=rn;for(;;){if(gn===f)break t;if(Zt===x&&++$t===G&&(Ve=_e),Zt===J&&++ln===T&&(_t=_e),(rn=gn.nextSibling)!==null)break;gn=Zt,Zt=gn.parentNode}gn=rn}x=Ve===-1||_t===-1?null:{start:Ve,end:_t}}else x=null}x=x||{start:0,end:0}}else x=null;for(Ey={focusedElem:f,selectionRange:x},j0=!1,Oa=g;Oa!==null;)if(g=Oa,f=g.child,(g.subtreeFlags&1028)!==0&&f!==null)f.return=g,Oa=f;else for(;Oa!==null;){switch(g=Oa,J=g.alternate,f=g.flags,g.tag){case 0:if((f&4)!==0&&(f=g.updateQueue,f=f!==null?f.events:null,f!==null))for(x=0;x<f.length;x++)G=f[x],G.ref.impl=G.nextImpl;break;case 11:case 15:break;case 1:if((f&1024)!==0&&J!==null){f=void 0,x=g,G=J.memoizedProps,J=J.memoizedState,T=x.stateNode;try{var xi=ca(x.type,G);f=T.getSnapshotBeforeUpdate(xi,J),T.__reactInternalSnapshotBeforeUpdate=f}catch(er){To(x,x.return,er)}}break;case 3:if((f&1024)!==0){if(f=g.stateNode.containerInfo,x=f.nodeType,x===9)hu(f);else if(x===1)switch(f.nodeName){case"HEAD":case"HTML":case"BODY":hu(f);break;default:f.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(i(163))}if(f=g.sibling,f!==null){f.return=g.return,Oa=f;break}Oa=g.return}}function Qs(f,g,x){var T=x.flags;switch(x.tag){case 0:case 11:case 15:ud(f,x),T&4&&b0(5,x);break;case 1:if(ud(f,x),T&4)if(f=x.stateNode,g===null)try{f.componentDidMount()}catch(_e){To(x,x.return,_e)}else{var G=ca(x.type,g.memoizedProps);g=g.memoizedState;try{f.componentDidUpdate(G,g,f.__reactInternalSnapshotBeforeUpdate)}catch(_e){To(x,x.return,_e)}}T&64&&Gf(x),T&512&&rc(x,x.return);break;case 3:if(ud(f,x),T&64&&(f=x.updateQueue,f!==null)){if(g=null,x.child!==null)switch(x.child.tag){case 27:case 5:g=x.child.stateNode;break;case 1:g=x.child.stateNode}try{Yp(f,g)}catch(_e){To(x,x.return,_e)}}break;case 27:g===null&&T&4&&t_(x);case 26:case 5:ud(f,x),g===null&&T&4&&C0(x),T&512&&rc(x,x.return);break;case 12:ud(f,x);break;case 31:ud(f,x),T&4&&uy(f,x);break;case 13:ud(f,x),T&4&&nb(f,x),T&64&&(f=x.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&(x=by.bind(null,x),Iy(f,x))));break;case 22:if(T=x.memoizedState!==null||$d,!T){g=g!==null&&g.memoizedState!==null||Ba,G=$d;var J=Ba;$d=T,(Ba=g)&&!J?cd(f,x,(x.subtreeFlags&8772)!==0):ud(f,x),$d=G,Ba=J}break;case 30:break;default:ud(f,x)}}function Wf(f){var g=f.alternate;g!==null&&(f.alternate=null,Wf(g)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(g=f.stateNode,g!==null&&Qu(g)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}var Ds=null,cu=!1;function UA(f,g,x){for(x=x.child;x!==null;)_0(f,g,x),x=x.sibling}function _0(f,g,x){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(Qe,x)}catch{}switch(x.tag){case 26:Ba||Ea(x,g),UA(f,g,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:Ba||Ea(x,g);var T=Ds,G=cu;Di(x.type)&&(Ds=x.stateNode,cu=!1),UA(f,g,x),L0(x.stateNode),Ds=T,cu=G;break;case 5:Ba||Ea(x,g);case 6:if(T=Ds,G=cu,Ds=null,UA(f,g,x),Ds=T,cu=G,Ds!==null)if(cu)try{(Ds.nodeType===9?Ds.body:Ds.nodeName==="HTML"?Ds.ownerDocument.body:Ds).removeChild(x.stateNode)}catch(J){To(x,g,J)}else try{Ds.removeChild(x.stateNode)}catch(J){To(x,g,J)}break;case 18:Ds!==null&&(cu?(f=Ds,uA(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,x.stateNode),N0(f)):uA(Ds,x.stateNode));break;case 4:T=Ds,G=cu,Ds=x.stateNode.containerInfo,cu=!0,UA(f,g,x),Ds=T,cu=G;break;case 0:case 11:case 14:case 15:Vd(2,x,g),Ba||Vd(4,x,g),UA(f,g,x);break;case 1:Ba||(Ea(x,g),T=x.stateNode,typeof T.componentWillUnmount=="function"&&Qg(x,g,T)),UA(f,g,x);break;case 21:UA(f,g,x);break;case 22:Ba=(T=Ba)||x.memoizedState!==null,UA(f,g,x),Ba=T;break;default:UA(f,g,x)}}function uy(f,g){if(g.memoizedState===null&&(f=g.alternate,f!==null&&(f=f.memoizedState,f!==null))){f=f.dehydrated;try{N0(f)}catch(x){To(g,g.return,x)}}}function nb(f,g){if(g.memoizedState===null&&(f=g.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{N0(f)}catch(x){To(g,g.return,x)}}function qg(f){switch(f.tag){case 31:case 13:case 19:var g=f.stateNode;return g===null&&(g=f.stateNode=new tb),g;case 22:return f=f.stateNode,g=f._retryCache,g===null&&(g=f._retryCache=new tb),g;default:throw Error(i(435,f.tag))}}function x0(f,g){var x=qg(f);g.forEach(function(T){if(!x.has(T)){x.add(T);var G=i3.bind(null,f,T);T.then(G,G)}})}function pl(f,g){var x=g.deletions;if(x!==null)for(var T=0;T<x.length;T++){var G=x[T],J=f,_e=g,Ve=_e;e:for(;Ve!==null;){switch(Ve.tag){case 27:if(Di(Ve.type)){Ds=Ve.stateNode,cu=!1;break e}break;case 5:Ds=Ve.stateNode,cu=!1;break e;case 3:case 4:Ds=Ve.stateNode.containerInfo,cu=!0;break e}Ve=Ve.return}if(Ds===null)throw Error(i(160));_0(J,_e,G),Ds=null,cu=!1,J=G.alternate,J!==null&&(J.return=null),G.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)Zp(g,f),g=g.sibling}var Pc=null;function Zp(f,g){var x=f.alternate,T=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:pl(g,f),is(f),T&4&&(Vd(3,f,f.return),b0(3,f),Vd(5,f,f.return));break;case 1:pl(g,f),is(f),T&512&&(Ba||x===null||Ea(x,x.return)),T&64&&$d&&(f=f.updateQueue,f!==null&&(T=f.callbacks,T!==null&&(x=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=x===null?T:x.concat(T))));break;case 26:var G=Pc;if(pl(g,f),is(f),T&512&&(Ba||x===null||Ea(x,x.return)),T&4){var J=x!==null?x.memoizedState:null;if(T=f.memoizedState,x===null)if(T===null)if(f.stateNode===null){e:{T=f.type,x=f.memoizedProps,G=G.ownerDocument||G;t:switch(T){case"title":J=G.getElementsByTagName("title")[0],(!J||J[Vi]||J[oo]||J.namespaceURI==="http://www.w3.org/2000/svg"||J.hasAttribute("itemprop"))&&(J=G.createElement(T),G.head.insertBefore(J,G.querySelector("head > title"))),Ta(J,T,x),J[oo]=f,Ro(J),T=J;break e;case"link":var _e=Ry("link","href",G).get(T+(x.href||""));if(_e){for(var Ve=0;Ve<_e.length;Ve++)if(J=_e[Ve],J.getAttribute("href")===(x.href==null||x.href===""?null:x.href)&&J.getAttribute("rel")===(x.rel==null?null:x.rel)&&J.getAttribute("title")===(x.title==null?null:x.title)&&J.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){_e.splice(Ve,1);break t}}J=G.createElement(T),Ta(J,T,x),G.head.appendChild(J);break;case"meta":if(_e=Ry("meta","content",G).get(T+(x.content||""))){for(Ve=0;Ve<_e.length;Ve++)if(J=_e[Ve],J.getAttribute("content")===(x.content==null?null:""+x.content)&&J.getAttribute("name")===(x.name==null?null:x.name)&&J.getAttribute("property")===(x.property==null?null:x.property)&&J.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&J.getAttribute("charset")===(x.charSet==null?null:x.charSet)){_e.splice(Ve,1);break t}}J=G.createElement(T),Ta(J,T,x),G.head.appendChild(J);break;default:throw Error(i(468,T))}J[oo]=f,Ro(J),T=J}f.stateNode=T}else Py(G,f.type,f.stateNode);else f.stateNode=g_(G,T,f.memoizedProps);else J!==T?(J===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):J.count--,T===null?Py(G,f.type,f.stateNode):g_(G,T,f.memoizedProps)):T===null&&f.stateNode!==null&&ay(f,f.memoizedProps,x.memoizedProps)}break;case 27:pl(g,f),is(f),T&512&&(Ba||x===null||Ea(x,x.return)),x!==null&&T&4&&ay(f,f.memoizedProps,x.memoizedProps);break;case 5:if(pl(g,f),is(f),T&512&&(Ba||x===null||Ea(x,x.return)),f.flags&32){G=f.stateNode;try{Mo(G,"")}catch(xi){To(f,f.return,xi)}}T&4&&f.stateNode!=null&&(G=f.memoizedProps,ay(f,G,x!==null?x.memoizedProps:G)),T&1024&&(eb=!0);break;case 6:if(pl(g,f),is(f),T&4){if(f.stateNode===null)throw Error(i(162));T=f.memoizedProps,x=f.stateNode;try{x.nodeValue=T}catch(xi){To(f,f.return,xi)}}break;case 3:if(ep=null,G=Pc,Pc=U0(g.containerInfo),pl(g,f),Pc=G,is(f),T&4&&x!==null&&x.memoizedState.isDehydrated)try{N0(g.containerInfo)}catch(xi){To(f,f.return,xi)}eb&&(eb=!1,n_(f));break;case 4:T=Pc,Pc=U0(f.stateNode.containerInfo),pl(g,f),is(f),Pc=T;break;case 12:pl(g,f),is(f);break;case 31:pl(g,f),is(f),T&4&&(T=f.updateQueue,T!==null&&(f.updateQueue=null,x0(f,T)));break;case 13:pl(g,f),is(f),f.child.flags&8192&&f.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(em=ti()),T&4&&(T=f.updateQueue,T!==null&&(f.updateQueue=null,x0(f,T)));break;case 22:G=f.memoizedState!==null;var _t=x!==null&&x.memoizedState!==null,$t=$d,ln=Ba;if($d=$t||G,Ba=ln||_t,pl(g,f),Ba=ln,$d=$t,is(f),T&8192)e:for(g=f.stateNode,g._visibility=G?g._visibility&-2:g._visibility|1,G&&(x===null||_t||$d||Ba||oA(f)),x=null,g=f;;){if(g.tag===5||g.tag===26){if(x===null){_t=x=g;try{if(J=_t.stateNode,G)_e=J.style,typeof _e.setProperty=="function"?_e.setProperty("display","none","important"):_e.display="none";else{Ve=_t.stateNode;var gn=_t.memoizedProps.style,Zt=gn!=null&&gn.hasOwnProperty("display")?gn.display:null;Ve.style.display=Zt==null||typeof Zt=="boolean"?"":(""+Zt).trim()}}catch(xi){To(_t,_t.return,xi)}}}else if(g.tag===6){if(x===null){_t=g;try{_t.stateNode.nodeValue=G?"":_t.memoizedProps}catch(xi){To(_t,_t.return,xi)}}}else if(g.tag===18){if(x===null){_t=g;try{var rn=_t.stateNode;G?ml(rn,!0):ml(_t.stateNode,!1)}catch(xi){To(_t,_t.return,xi)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===f)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===f)break e;for(;g.sibling===null;){if(g.return===null||g.return===f)break e;x===g&&(x=null),g=g.return}x===g&&(x=null),g.sibling.return=g.return,g=g.sibling}T&4&&(T=f.updateQueue,T!==null&&(x=T.retryQueue,x!==null&&(T.retryQueue=null,x0(f,x))));break;case 19:pl(g,f),is(f),T&4&&(T=f.updateQueue,T!==null&&(f.updateQueue=null,x0(f,T)));break;case 30:break;case 21:break;default:pl(g,f),is(f)}}function is(f){var g=f.flags;if(g&2){try{for(var x,T=f.return;T!==null;){if(e_(T)){x=T;break}T=T.return}if(x==null)throw Error(i(160));switch(x.tag){case 27:var G=x.stateNode,J=Xv(f);ly(f,J,G);break;case 5:var _e=x.stateNode;x.flags&32&&(Mo(_e,""),x.flags&=-33);var Ve=Xv(f);ly(f,Ve,_e);break;case 3:case 4:var _t=x.stateNode.containerInfo,$t=Xv(f);Jv(f,$t,_t);break;default:throw Error(i(161))}}catch(ln){To(f,f.return,ln)}f.flags&=-3}g&4096&&(f.flags&=-4097)}function n_(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var g=f;n_(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),f=f.sibling}}function ud(f,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)Qs(f,g.alternate,g),g=g.sibling}function oA(f){for(f=f.child;f!==null;){var g=f;switch(g.tag){case 0:case 11:case 14:case 15:Vd(4,g,g.return),oA(g);break;case 1:Ea(g,g.return);var x=g.stateNode;typeof x.componentWillUnmount=="function"&&Qg(g,g.return,x),oA(g);break;case 27:L0(g.stateNode);case 26:case 5:Ea(g,g.return),oA(g);break;case 22:g.memoizedState===null&&oA(g);break;case 30:oA(g);break;default:oA(g)}f=f.sibling}}function cd(f,g,x){for(x=x&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var T=g.alternate,G=f,J=g,_e=J.flags;switch(J.tag){case 0:case 11:case 15:cd(G,J,x),b0(4,J);break;case 1:if(cd(G,J,x),T=J,G=T.stateNode,typeof G.componentDidMount=="function")try{G.componentDidMount()}catch($t){To(T,T.return,$t)}if(T=J,G=T.updateQueue,G!==null){var Ve=T.stateNode;try{var _t=G.shared.hiddenCallbacks;if(_t!==null)for(G.shared.hiddenCallbacks=null,G=0;G<_t.length;G++)ec(_t[G],Ve)}catch($t){To(T,T.return,$t)}}x&&_e&64&&Gf(J),rc(J,J.return);break;case 27:t_(J);case 26:case 5:cd(G,J,x),x&&T===null&&_e&4&&C0(J),rc(J,J.return);break;case 12:cd(G,J,x);break;case 31:cd(G,J,x),x&&_e&4&&uy(G,J);break;case 13:cd(G,J,x),x&&_e&4&&nb(G,J);break;case 22:J.memoizedState===null&&cd(G,J,x),rc(J,J.return);break;case 30:break;default:cd(G,J,x)}g=g.sibling}}function cy(f,g){var x=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(x=f.memoizedState.cachePool.pool),f=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(f=g.memoizedState.cachePool.pool),f!==x&&(f!=null&&f.refCount++,x!=null&&Ll(x))}function Xp(f,g){f=null,g.alternate!==null&&(f=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==f&&(g.refCount++,f!=null&&Ll(f))}function sA(f,g,x,T){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)ib(f,g,x,T),g=g.sibling}function ib(f,g,x,T){var G=g.flags;switch(g.tag){case 0:case 11:case 15:sA(f,g,x,T),G&2048&&b0(9,g);break;case 1:sA(f,g,x,T);break;case 3:sA(f,g,x,T),G&2048&&(f=null,g.alternate!==null&&(f=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==f&&(g.refCount++,f!=null&&Ll(f)));break;case 12:if(G&2048){sA(f,g,x,T),f=g.stateNode;try{var J=g.memoizedProps,_e=J.id,Ve=J.onPostCommit;typeof Ve=="function"&&Ve(_e,g.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(_t){To(g,g.return,_t)}}else sA(f,g,x,T);break;case 31:sA(f,g,x,T);break;case 13:sA(f,g,x,T);break;case 23:break;case 22:J=g.stateNode,_e=g.alternate,g.memoizedState!==null?J._visibility&2?sA(f,g,x,T):Yg(f,g):J._visibility&2?sA(f,g,x,T):(J._visibility|=2,Hd(f,g,x,T,(g.subtreeFlags&10256)!==0||!1)),G&2048&&cy(_e,g);break;case 24:sA(f,g,x,T),G&2048&&Xp(g.alternate,g);break;default:sA(f,g,x,T)}}function Hd(f,g,x,T,G){for(G=G&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var J=f,_e=g,Ve=x,_t=T,$t=_e.flags;switch(_e.tag){case 0:case 11:case 15:Hd(J,_e,Ve,_t,G),b0(8,_e);break;case 23:break;case 22:var ln=_e.stateNode;_e.memoizedState!==null?ln._visibility&2?Hd(J,_e,Ve,_t,G):Yg(J,_e):(ln._visibility|=2,Hd(J,_e,Ve,_t,G)),G&&$t&2048&&cy(_e.alternate,_e);break;case 24:Hd(J,_e,Ve,_t,G),G&&$t&2048&&Xp(_e.alternate,_e);break;default:Hd(J,_e,Ve,_t,G)}g=g.sibling}}function Yg(f,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var x=f,T=g,G=T.flags;switch(T.tag){case 22:Yg(x,T),G&2048&&cy(T.alternate,T);break;case 24:Yg(x,T),G&2048&&Xp(T.alternate,T);break;default:Yg(x,T)}g=g.sibling}}var Vg=8192;function M0(f,g,x){if(f.subtreeFlags&Vg)for(f=f.child;f!==null;)i_(f,g,x),f=f.sibling}function i_(f,g,x){switch(f.tag){case 26:M0(f,g,x),f.flags&Vg&&f.memoizedState!==null&&um(x,Pc,f.memoizedState,f.memoizedProps);break;case 5:M0(f,g,x);break;case 3:case 4:var T=Pc;Pc=U0(f.stateNode.containerInfo),M0(f,g,x),Pc=T;break;case 22:f.memoizedState===null&&(T=f.alternate,T!==null&&T.memoizedState!==null?(T=Vg,Vg=16777216,M0(f,g,x),Vg=T):M0(f,g,x));break;default:M0(f,g,x)}}function r_(f){var g=f.alternate;if(g!==null&&(f=g.child,f!==null)){g.child=null;do g=f.sibling,f.sibling=null,f=g;while(f!==null)}}function Zd(f){var g=f.deletions;if((f.flags&16)!==0){if(g!==null)for(var x=0;x<g.length;x++){var T=g[x];Oa=T,s_(T,f)}r_(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)o_(f),f=f.sibling}function o_(f){switch(f.tag){case 0:case 11:case 15:Zd(f),f.flags&2048&&Vd(9,f,f.return);break;case 3:Zd(f);break;case 12:Zd(f);break;case 22:var g=f.stateNode;f.memoizedState!==null&&g._visibility&2&&(f.return===null||f.return.tag!==13)?(g._visibility&=-3,$g(f)):Zd(f);break;default:Zd(f)}}function $g(f){var g=f.deletions;if((f.flags&16)!==0){if(g!==null)for(var x=0;x<g.length;x++){var T=g[x];Oa=T,s_(T,f)}r_(f)}for(f=f.child;f!==null;){switch(g=f,g.tag){case 0:case 11:case 15:Vd(8,g,g.return),$g(g);break;case 22:x=g.stateNode,x._visibility&2&&(x._visibility&=-3,$g(g));break;default:$g(g)}f=f.sibling}}function s_(f,g){for(;Oa!==null;){var x=Oa;switch(x.tag){case 0:case 11:case 15:Vd(8,x,g);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var T=x.memoizedState.cachePool.pool;T!=null&&T.refCount++}break;case 24:Ll(x.memoizedState.cache)}if(T=x.child,T!==null)T.return=x,Oa=T;else e:for(x=f;Oa!==null;){T=Oa;var G=T.sibling,J=T.return;if(Wf(T),T===x){Oa=null;break e}if(G!==null){G.return=J,Oa=G;break e}Oa=J}}}var Z2={getCacheForType:function(f){var g=aa(Is),x=g.data.get(f);return x===void 0&&(x=f(),g.data.set(f,x)),x},cacheSignal:function(){return aa(Is).controller.signal}},X2=typeof WeakMap=="function"?WeakMap:Map,Oo=0,ys=null,jr=null,Pr=0,Fo=0,aA=null,Qf=!1,Jp=!1,Ay=!1,yh=0,ha=0,KA=0,qf=0,rb=0,lA=0,w0=0,Hg=null,Lc=null,hy=!1,em=0,ob=0,Yf=1/0,Zg=null,Vf=null,Ia=0,$f=null,tm=null,Xd=0,sb=0,ab=null,lb=null,Xg=0,ub=null;function Io(){return(Oo&2)!==0&&Pr!==0?Pr&-Pr:Ie.T!==null?Fl():tr()}function S0(){if(lA===0)if((Pr&536870912)===0||Rr){var f=bn;bn<<=1,(bn&3932160)===0&&(bn=262144),lA=f}else lA=536870912;return f=ru.current,f!==null&&(f.flags|=32),lA}function Uc(f,g,x){(f===ys&&(Fo===2||Fo===9)||f.cancelPendingCommit!==null)&&(vh(f,0),Jd(f,Pr,lA,!1)),Wi(f,x),((Oo&2)===0||f!==ys)&&(f===ys&&((Oo&2)===0&&(qf|=x),ha===4&&Jd(f,Pr,lA,!1)),Ch(f))}function a_(f,g,x){if((Oo&6)!==0)throw Error(i(327));var T=!x&&(g&127)===0&&(g&f.expiredLanes)===0||Ki(f,g),G=T?e3(f,g):py(f,g,!0),J=T;do{if(G===0){Jp&&!T&&Jd(f,g,0,!1);break}else{if(x=f.current.alternate,J&&!Ab(x)){G=py(f,g,!1),J=!1;continue}if(G===2){if(J=g,f.errorRecoveryDisabledLanes&J)var _e=0;else _e=f.pendingLanes&-536870913,_e=_e!==0?_e:_e&536870912?536870912:0;if(_e!==0){g=_e;e:{var Ve=f;G=Hg;var _t=Ve.current.memoizedState.isDehydrated;if(_t&&(vh(Ve,_e).flags|=256),_e=py(Ve,_e,!1),_e!==2){if(Ay&&!_t){Ve.errorRecoveryDisabledLanes|=J,qf|=J,G=4;break e}J=Lc,Lc=G,J!==null&&(Lc===null?Lc=J:Lc.push.apply(Lc,J))}G=_e}if(J=!1,G!==2)continue}}if(G===1){vh(f,0),Jd(f,g,0,!0);break}e:{switch(T=f,J=G,J){case 0:case 1:throw Error(i(345));case 4:if((g&4194048)!==g)break;case 6:Jd(T,g,lA,!Qf);break e;case 2:Lc=null;break;case 3:case 5:break;default:throw Error(i(329))}if((g&62914560)===g&&(G=em+300-ti(),10<G)){if(Jd(T,g,lA,!Qf),Ci(T,0,!0)!==0)break e;Xd=g,T.timeoutHandle=Oy(cb.bind(null,T,x,Lc,Zg,hy,g,lA,qf,w0,Qf,J,"Throttled",-0,0),G);break e}cb(T,x,Lc,Zg,hy,g,lA,qf,w0,Qf,J,null,-0,0)}}break}while(!0);Ch(f)}function cb(f,g,x,T,G,J,_e,Ve,_t,$t,ln,gn,Zt,rn){if(f.timeoutHandle=-1,gn=g.subtreeFlags,gn&8192||(gn&16785408)===16785408){gn={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ha},i_(g,J,gn);var xi=(J&62914560)===J?em-ti():(J&4194048)===J?ob-ti():0;if(xi=y_(gn,xi),xi!==null){Xd=J,f.cancelPendingCommit=xi(c_.bind(null,f,g,J,x,T,G,_e,Ve,_t,ln,gn,null,Zt,rn)),Jd(f,J,_e,!$t);return}}c_(f,g,J,x,T,G,_e,Ve,_t)}function Ab(f){for(var g=f;;){var x=g.tag;if((x===0||x===11||x===15)&&g.flags&16384&&(x=g.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var T=0;T<x.length;T++){var G=x[T],J=G.getSnapshot;G=G.value;try{if(!Bs(J(),G))return!1}catch{return!1}}if(x=g.child,g.subtreeFlags&16384&&x!==null)x.return=g,g=x;else{if(g===f)break;for(;g.sibling===null;){if(g.return===null||g.return===f)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Jd(f,g,x,T){g&=~rb,g&=~qf,f.suspendedLanes|=g,f.pingedLanes&=~g,T&&(f.warmLanes|=g),T=f.expirationTimes;for(var G=g;0<G;){var J=31-$e(G),_e=1<<J;T[J]=-1,G&=~_e}x!==0&&qi(f,x,g)}function Jg(){return(Oo&6)===0?(rm(0),!1):!0}function dy(){if(jr!==null){if(Fo===0)var f=jr.return;else f=jr,BA=ur=null,ph(f),Ec=null,Xu=0,f=jr;for(;f!==null;)sy(f.alternate,f),f=f.return;jr=null}}function vh(f,g){var x=f.timeoutHandle;x!==-1&&(f.timeoutHandle=-1,s3(x)),x=f.cancelPendingCommit,x!==null&&(f.cancelPendingCommit=null,x()),Xd=0,dy(),ys=f,jr=x=Tl(f.current,null),Pr=g,Fo=0,aA=null,Qf=!1,Jp=Ki(f,g),Ay=!1,w0=lA=rb=qf=KA=ha=0,Lc=Hg=null,hy=!1,(g&8)!==0&&(g|=g&32);var T=f.entangledLanes;if(T!==0)for(f=f.entanglements,T&=g;0<T;){var G=31-$e(T),J=1<<G;g|=f[G],T&=~J}return yh=g,Su(),x}function fy(f,g){ki=null,Ie.H=ts,g===Fn||g===Ah?(g=c0(),Fo=3):g===Lf?(g=c0(),Fo=4):Fo=g===Fg?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,aA=g,jr===null&&(ha=1,rd(f,kl(g,f.current)))}function E0(){var f=ru.current;return f===null?!0:(Pr&4194048)===Pr?tl===null:(Pr&62914560)===Pr||(Pr&536870912)!==0?f===tl:!1}function hb(){var f=Ie.H;return Ie.H=ts,f===null?ts:f}function e1(){var f=Ie.A;return Ie.A=Z2,f}function ef(){ha=4,Qf||(Pr&4194048)!==Pr&&ru.current!==null||(Jp=!0),(KA&134217727)===0&&(qf&134217727)===0||ys===null||Jd(ys,Pr,lA,!1)}function py(f,g,x){var T=Oo;Oo|=2;var G=hb(),J=e1();(ys!==f||Pr!==g)&&(Zg=null,vh(f,g)),g=!1;var _e=ha;e:do try{if(Fo!==0&&jr!==null){var Ve=jr,_t=aA;switch(Fo){case 8:dy(),_e=6;break e;case 3:case 2:case 9:case 6:ru.current===null&&(g=!0);var $t=Fo;if(Fo=0,aA=null,B0(f,Ve,_t,$t),x&&Jp){_e=0;break e}break;default:$t=Fo,Fo=0,aA=null,B0(f,Ve,_t,$t)}}J2(),_e=ha;break}catch(ln){fy(f,ln)}while(!0);return g&&f.shellSuspendCounter++,BA=ur=null,Oo=T,Ie.H=G,Ie.A=J,jr===null&&(ys=null,Pr=0,Su()),_e}function J2(){for(;jr!==null;)l_(jr)}function e3(f,g){var x=Oo;Oo|=2;var T=hb(),G=e1();ys!==f||Pr!==g?(Zg=null,Yf=ti()+500,vh(f,g)):Jp=Ki(f,g);e:do try{if(Fo!==0&&jr!==null){g=jr;var J=aA;t:switch(Fo){case 1:Fo=0,aA=null,B0(f,g,J,1);break;case 2:case 9:if($h(J)){Fo=0,aA=null,u_(g);break}g=function(){Fo!==2&&Fo!==9||ys!==f||(Fo=7),Ch(f)},J.then(g,g);break e;case 3:Fo=7;break e;case 4:Fo=5;break e;case 7:$h(J)?(Fo=0,aA=null,u_(g)):(Fo=0,aA=null,B0(f,g,J,7));break;case 5:var _e=null;switch(jr.tag){case 26:_e=jr.memoizedState;case 5:case 27:var Ve=jr;if(_e?Eb(_e):Ve.stateNode.complete){Fo=0,aA=null;var _t=Ve.sibling;if(_t!==null)jr=_t;else{var $t=Ve.return;$t!==null?(jr=$t,my($t)):jr=null}break t}}Fo=0,aA=null,B0(f,g,J,5);break;case 6:Fo=0,aA=null,B0(f,g,J,6);break;case 8:dy(),ha=6;break e;default:throw Error(i(462))}}t3();break}catch(ln){fy(f,ln)}while(!0);return BA=ur=null,Ie.H=T,Ie.A=G,Oo=x,jr!==null?0:(ys=null,Pr=0,Su(),ha)}function t3(){for(;jr!==null&&!Ln();)l_(jr)}function l_(f){var g=JC(f.alternate,f,yh);f.memoizedProps=f.pendingProps,g===null?my(f):jr=g}function u_(f){var g=f,x=g.alternate;switch(g.tag){case 15:case 0:g=Wv(x,g,g.pendingProps,g.type,void 0,Pr);break;case 11:g=Wv(x,g,g.pendingProps,g.type.render,g.ref,Pr);break;case 5:ph(g);default:sy(x,g),g=jr=J1(g,yh),g=JC(x,g,yh)}f.memoizedProps=f.pendingProps,g===null?my(f):jr=g}function B0(f,g,x,T){BA=ur=null,ph(g),Ec=null,Xu=0;var G=g.return;try{if(Kg(f,G,g,x,Pr)){ha=1,rd(f,kl(x,f.current)),jr=null;return}}catch(J){if(G!==null)throw jr=G,J;ha=1,rd(f,kl(x,f.current)),jr=null;return}g.flags&32768?(Rr||T===1?f=!0:Jp||(Pr&536870912)!==0?f=!1:(Qf=f=!0,(T===2||T===9||T===3||T===6)&&(T=ru.current,T!==null&&T.tag===13&&(T.flags|=16384))),t1(g,f)):my(g)}function my(f){var g=f;do{if((g.flags&32768)!==0){t1(g,Qf);return}f=g.return;var x=Zv(g.alternate,g,yh);if(x!==null){jr=x;return}if(g=g.sibling,g!==null){jr=g;return}jr=g=f}while(g!==null);ha===0&&(ha=5)}function t1(f,g){do{var x=v0(f.alternate,f);if(x!==null){x.flags&=32767,jr=x;return}if(x=f.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!g&&(f=f.sibling,f!==null)){jr=f;return}jr=f=x}while(f!==null);ha=6,jr=null}function c_(f,g,x,T,G,J,_e,Ve,_t){f.cancelPendingCommit=null;do nm();while(Ia!==0);if((Oo&6)!==0)throw Error(i(327));if(g!==null){if(g===f.current)throw Error(i(177));if(J=g.lanes|g.childLanes,J|=xA,Ri(f,x,J,_e,Ve,_t),f===ys&&(jr=ys=null,Pr=0),tm=g,$f=f,Xd=x,sb=J,ab=G,lb=T,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,r3(j,function(){return vy(),null})):(f.callbackNode=null,f.callbackPriority=0),T=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||T){T=Ie.T,Ie.T=null,G=Ye.p,Ye.p=2,_e=Oo,Oo|=4;try{H2(f,g,x)}finally{Oo=_e,Ye.p=G,Ie.T=T}}Ia=1,db(),fb(),gy()}}function db(){if(Ia===1){Ia=0;var f=$f,g=tm,x=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||x){x=Ie.T,Ie.T=null;var T=Ye.p;Ye.p=2;var G=Oo;Oo|=4;try{Zp(g,f);var J=Ey,_e=i0(f.containerInfo),Ve=J.focusedElem,_t=J.selectionRange;if(_e!==Ve&&Ve&&Ve.ownerDocument&&n0(Ve.ownerDocument.documentElement,Ve)){if(_t!==null&&Up(Ve)){var $t=_t.start,ln=_t.end;if(ln===void 0&&(ln=$t),"selectionStart"in Ve)Ve.selectionStart=$t,Ve.selectionEnd=Math.min(ln,Ve.value.length);else{var gn=Ve.ownerDocument||document,Zt=gn&&gn.defaultView||window;if(Zt.getSelection){var rn=Zt.getSelection(),xi=Ve.textContent.length,er=Math.min(_t.start,xi),zo=_t.end===void 0?er:Math.min(_t.end,xi);!rn.extend&&er>zo&&(_e=zo,zo=er,er=_e);var Pt=Lp(Ve,er),It=Lp(Ve,zo);if(Pt&&It&&(rn.rangeCount!==1||rn.anchorNode!==Pt.node||rn.anchorOffset!==Pt.offset||rn.focusNode!==It.node||rn.focusOffset!==It.offset)){var qt=gn.createRange();qt.setStart(Pt.node,Pt.offset),rn.removeAllRanges(),er>zo?(rn.addRange(qt),rn.extend(It.node,It.offset)):(qt.setEnd(It.node,It.offset),rn.addRange(qt))}}}}for(gn=[],rn=Ve;rn=rn.parentNode;)rn.nodeType===1&&gn.push({element:rn,left:rn.scrollLeft,top:rn.scrollTop});for(typeof Ve.focus=="function"&&Ve.focus(),Ve=0;Ve<gn.length;Ve++){var hn=gn[Ve];hn.element.scrollLeft=hn.left,hn.element.scrollTop=hn.top}}j0=!!P0,Ey=P0=null}finally{Oo=G,Ye.p=T,Ie.T=x}}f.current=g,Ia=2}}function fb(){if(Ia===2){Ia=0;var f=$f,g=tm,x=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||x){x=Ie.T,Ie.T=null;var T=Ye.p;Ye.p=2;var G=Oo;Oo|=4;try{Qs(f,g.alternate,g)}finally{Oo=G,Ye.p=T,Ie.T=x}}Ia=3}}function gy(){if(Ia===4||Ia===3){Ia=0,Tn();var f=$f,g=tm,x=Xd,T=lb;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?Ia=5:(Ia=0,tm=$f=null,yy(f,f.pendingLanes));var G=f.pendingLanes;if(G===0&&(Vf=null),un(x),g=g.stateNode,it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(Qe,g,void 0,(g.current.flags&128)===128)}catch{}if(T!==null){g=Ie.T,G=Ye.p,Ye.p=2,Ie.T=null;try{for(var J=f.onRecoverableError,_e=0;_e<T.length;_e++){var Ve=T[_e];J(Ve.value,{componentStack:Ve.stack})}}finally{Ie.T=g,Ye.p=G}}(Xd&3)!==0&&nm(),Ch(f),G=f.pendingLanes,(x&261930)!==0&&(G&42)!==0?f===ub?Xg++:(Xg=0,ub=f):Xg=0,rm(0)}}function yy(f,g){(f.pooledCacheLanes&=g)===0&&(g=f.pooledCache,g!=null&&(f.pooledCache=null,Ll(g)))}function nm(){return db(),fb(),gy(),vy()}function vy(){if(Ia!==5)return!1;var f=$f,g=sb;sb=0;var x=un(Xd),T=Ie.T,G=Ye.p;try{Ye.p=32>x?32:x,Ie.T=null,x=ab,ab=null;var J=$f,_e=Xd;if(Ia=0,tm=$f=null,Xd=0,(Oo&6)!==0)throw Error(i(331));var Ve=Oo;if(Oo|=4,o_(J.current),ib(J,J.current,_e,x),Oo=Ve,rm(0,!1),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(Qe,J)}catch{}return!0}finally{Ye.p=G,Ie.T=T,yy(f,g)}}function Ad(f,g,x){g=kl(x,g),g=od(f.stateNode,g,2),f=Oc(f,g,2),f!==null&&(Wi(f,2),Ch(f))}function To(f,g,x){if(f.tag===3)Ad(f,f,x);else for(;g!==null;){if(g.tag===3){Ad(g,f,x);break}else if(g.tag===1){var T=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(Vf===null||!Vf.has(T))){f=kl(x,f),x=Rc(2),T=Oc(g,x,2),T!==null&&(jf(x,T,g,f),Wi(T,2),Ch(T));break}}g=g.return}}function n1(f,g,x){var T=f.pingCache;if(T===null){T=f.pingCache=new X2;var G=new Set;T.set(g,G)}else G=T.get(g),G===void 0&&(G=new Set,T.set(g,G));G.has(x)||(Ay=!0,G.add(x),f=n3.bind(null,f,g,x),g.then(f,f))}function n3(f,g,x){var T=f.pingCache;T!==null&&T.delete(g),f.pingedLanes|=f.suspendedLanes&x,f.warmLanes&=~x,ys===f&&(Pr&x)===x&&(ha===4||ha===3&&(Pr&62914560)===Pr&&300>ti()-em?(Oo&2)===0&&vh(f,0):rb|=x,w0===Pr&&(w0=0)),Ch(f)}function O0(f,g){g===0&&(g=Hn()),f=eu(f,g),f!==null&&(Wi(f,g),Ch(f))}function by(f){var g=f.memoizedState,x=0;g!==null&&(x=g.retryLane),O0(f,x)}function i3(f,g){var x=0;switch(f.tag){case 31:case 13:var T=f.stateNode,G=f.memoizedState;G!==null&&(x=G.retryLane);break;case 19:T=f.stateNode;break;case 22:T=f.stateNode._retryCache;break;default:throw Error(i(314))}T!==null&&T.delete(g),O0(f,x)}function r3(f,g){return Si(f,g)}var I0=null,im=null,Cy=!1,i1=!1,bh=!1,oc=0;function Ch(f){f!==im&&f.next===null&&(im===null?I0=im=f:im=im.next=f),i1=!0,Cy||(Cy=!0,pb())}function rm(f,g){if(!bh&&i1){bh=!0;do for(var x=!1,T=I0;T!==null;){if(f!==0){var G=T.pendingLanes;if(G===0)var J=0;else{var _e=T.suspendedLanes,Ve=T.pingedLanes;J=(1<<31-$e(42|f)+1)-1,J&=G&~(_e&~Ve),J=J&201326741?J&201326741|1:J?J|2:0}J!==0&&(x=!0,xy(T,J))}else J=Pr,J=Ci(T,T===ys?J:0,T.cancelPendingCommit!==null||T.timeoutHandle!==-1),(J&3)===0||Ki(T,J)||(x=!0,xy(T,J));T=T.next}while(x);bh=!1}}function o3(){r1()}function r1(){i1=Cy=!1;var f=0;oc!==0&&bb()&&(f=oc);for(var g=ti(),x=null,T=I0;T!==null;){var G=T.next,J=_y(T,g);J===0?(T.next=null,x===null?I0=G:x.next=G,G===null&&(im=x)):(x=T,(f!==0||(J&3)!==0)&&(i1=!0)),T=G}Ia!==0&&Ia!==5||rm(f),oc!==0&&(oc=0)}function _y(f,g){for(var x=f.suspendedLanes,T=f.pingedLanes,G=f.expirationTimes,J=f.pendingLanes&-62914561;0<J;){var _e=31-$e(J),Ve=1<<_e,_t=G[_e];_t===-1?((Ve&x)===0||(Ve&T)!==0)&&(G[_e]=Wn(Ve,g)):_t<=g&&(f.expiredLanes|=Ve),J&=~Ve}if(g=ys,x=Pr,x=Ci(f,f===g?x:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),T=f.callbackNode,x===0||f===g&&(Fo===2||Fo===9)||f.cancelPendingCommit!==null)return T!==null&&T!==null&&Un(T),f.callbackNode=null,f.callbackPriority=0;if((x&3)===0||Ki(f,x)){if(g=x&-x,g===f.callbackPriority)return g;switch(T!==null&&Un(T),un(x)){case 2:case 8:x=H;break;case 32:x=j;break;case 268435456:x=he;break;default:x=j}return T=A_.bind(null,f),x=Si(x,T),f.callbackPriority=g,f.callbackNode=x,g}return T!==null&&T!==null&&Un(T),f.callbackPriority=2,f.callbackNode=null,2}function A_(f,g){if(Ia!==0&&Ia!==5)return f.callbackNode=null,f.callbackPriority=0,null;var x=f.callbackNode;if(nm()&&f.callbackNode!==x)return null;var T=Pr;return T=Ci(f,f===ys?T:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),T===0?null:(a_(f,T,g),_y(f,ti()),f.callbackNode!=null&&f.callbackNode===x?A_.bind(null,f):null)}function xy(f,g){if(nm())return null;a_(f,g,!0)}function pb(){_r(function(){(Oo&6)!==0?Si(je,o3):r1()})}function Fl(){if(oc===0){var f=Ul;f===0&&(f=mn,mn<<=1,(mn&261888)===0&&(mn=256)),oc=f}return oc}function mb(f){return f==null||typeof f=="symbol"||typeof f=="boolean"?null:typeof f=="function"?f:Ji(""+f)}function gb(f,g){var x=g.ownerDocument.createElement("input");return x.name=g.name,x.value=g.value,f.id&&x.setAttribute("form",f.id),g.parentNode.insertBefore(x,g),f=new FormData(f),x.parentNode.removeChild(x),f}function tf(f,g,x,T,G){if(g==="submit"&&x&&x.stateNode===G){var J=mb((G[kn]||null).action),_e=T.submitter;_e&&(g=(g=_e[kn]||null)?mb(g.formAction):_e.getAttribute("formAction"),g!==null&&(J=g,_e=null));var Ve=new Dn("action","action",null,T,G);f.push({event:Ve,listeners:[{instance:null,listener:function(){if(T.defaultPrevented){if(oc!==0){var _t=_e?gb(G,_e):new FormData(G);Ko(x,{pending:!0,data:_t,method:G.method,action:J},null,_t)}}else typeof J=="function"&&(Ve.preventDefault(),_t=_e?gb(G,_e):new FormData(G),Ko(x,{pending:!0,data:_t,method:G.method,action:J},J,_t))},currentTarget:G}]})}}for(var gr=0;gr<Kp.length;gr++){var T0=Kp[gr],sc=T0.toLowerCase(),Ga=T0[0].toUpperCase()+T0.slice(1);Il(sc,"on"+Ga)}Il(Ol,"onAnimationEnd"),Il(Nh,"onAnimationIteration"),Il(r0,"onAnimationStart"),Il("dblclick","onDoubleClick"),Il("focusin","onFocus"),Il("focusout","onBlur"),Il(_c,"onTransitionRun"),Il(Gh,"onTransitionStart"),Il(rh,"onTransitionCancel"),Il(Cr,"onTransitionEnd"),za("onMouseEnter",["mouseout","mouseover"]),za("onMouseLeave",["mouseout","mouseover"]),za("onPointerEnter",["pointerout","pointerover"]),za("onPointerLeave",["pointerout","pointerover"]),mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mr("onBeforeInput",["compositionend","keypress","textInput","paste"]),mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var o1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hf=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(o1));function h_(f,g){g=(g&4)!==0;for(var x=0;x<f.length;x++){var T=f[x],G=T.event;T=T.listeners;e:{var J=void 0;if(g)for(var _e=T.length-1;0<=_e;_e--){var Ve=T[_e],_t=Ve.instance,$t=Ve.currentTarget;if(Ve=Ve.listener,_t!==J&&G.isPropagationStopped())break e;J=Ve,G.currentTarget=$t;try{J(G)}catch(ln){_A(ln)}G.currentTarget=null,J=_t}else for(_e=0;_e<T.length;_e++){if(Ve=T[_e],_t=Ve.instance,$t=Ve.currentTarget,Ve=Ve.listener,_t!==J&&G.isPropagationStopped())break e;J=Ve,G.currentTarget=$t;try{J(G)}catch(ln){_A(ln)}G.currentTarget=null,J=_t}}}}function no(f,g){var x=g[ui];x===void 0&&(x=g[ui]=new Set);var T=f+"__bubble";x.has(T)||(a1(g,f,2,!1),x.add(T))}function s1(f,g,x){var T=0;g&&(T|=4),a1(x,f,T,g)}var _h="_reactListening"+Math.random().toString(36).slice(2);function My(f){if(!f[_h]){f[_h]=!0,gc.forEach(function(x){x!=="selectionchange"&&(Hf.has(x)||s1(x,!1,f),s1(x,!0,f))});var g=f.nodeType===9?f:f.ownerDocument;g===null||g[_h]||(g[_h]=!0,s1("selectionchange",!1,g))}}function a1(f,g,x,T){switch(M_(g)){case 2:var G=kb;break;case 8:G=x_;break;default:G=tp}x=G.bind(null,g,x,f),G=void 0,!Fs||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(G=!0),T?G!==void 0?f.addEventListener(g,x,{capture:!0,passive:G}):f.addEventListener(g,x,!0):G!==void 0?f.addEventListener(g,x,{passive:G}):f.addEventListener(g,x,!1)}function wy(f,g,x,T,G){var J=T;if((g&1)===0&&(g&2)===0&&T!==null)e:for(;;){if(T===null)return;var _e=T.tag;if(_e===3||_e===4){var Ve=T.stateNode.containerInfo;if(Ve===G)break;if(_e===4)for(_e=T.return;_e!==null;){var _t=_e.tag;if((_t===3||_t===4)&&_e.stateNode.containerInfo===G)return;_e=_e.return}for(;Ve!==null;){if(_e=co(Ve),_e===null)return;if(_t=_e.tag,_t===5||_t===6||_t===26||_t===27){T=J=_e;continue e}Ve=Ve.parentNode}}T=T.return}to(function(){var $t=J,ln=Vu(x),gn=[];e:{var Zt=kg.get(f);if(Zt!==void 0){var rn=Dn,xi=f;switch(f){case"keypress":if(ne(x)===0)break e;case"keydown":case"keyup":rn=Eo;break;case"focusin":xi="focus",rn=Po;break;case"focusout":xi="blur",rn=Po;break;case"beforeblur":case"afterblur":rn=Po;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rn=hr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rn=Kr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rn=Gv;break;case Ol:case Nh:case r0:rn=eh;break;case Cr:rn=Xm;break;case"scroll":case"scrollend":rn=Fi;break;case"wheel":rn=Ef;break;case"copy":case"cut":case"paste":rn=fs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rn=Hm;break;case"toggle":case"beforetoggle":rn=Bf}var er=(g&4)!==0,zo=!er&&(f==="scroll"||f==="scrollend"),Pt=er?Zt!==null?Zt+"Capture":null:Zt;er=[];for(var It=$t,qt;It!==null;){var hn=It;if(qt=hn.stateNode,hn=hn.tag,hn!==5&&hn!==26&&hn!==27||qt===null||Pt===null||(hn=$s(It,Pt),hn!=null&&er.push(Kc(It,hn,qt))),zo)break;It=It.return}0<er.length&&(Zt=new rn(Zt,xi,null,x,ln),gn.push({event:Zt,listeners:er}))}}if((g&7)===0){e:{if(Zt=f==="mouseover"||f==="pointerover",rn=f==="mouseout"||f==="pointerout",Zt&&x!==Xo&&(xi=x.relatedTarget||x.fromElement)&&(co(xi)||xi[Xi]))break e;if((rn||Zt)&&(Zt=ln.window===ln?ln:(Zt=ln.ownerDocument)?Zt.defaultView||Zt.parentWindow:window,rn?(xi=x.relatedTarget||x.toElement,rn=$t,xi=xi?co(xi):null,xi!==null&&(zo=o(xi),er=xi.tag,xi!==zo||er!==5&&er!==27&&er!==6)&&(xi=null)):(rn=null,xi=$t),rn!==xi)){if(er=hr,hn="onMouseLeave",Pt="onMouseEnter",It="mouse",(f==="pointerout"||f==="pointerover")&&(er=Hm,hn="onPointerLeave",Pt="onPointerEnter",It="pointer"),zo=rn==null?Zt:Ml(rn),qt=xi==null?Zt:Ml(xi),Zt=new er(hn,It+"leave",rn,x,ln),Zt.target=zo,Zt.relatedTarget=qt,hn=null,co(ln)===$t&&(er=new er(Pt,It+"enter",xi,x,ln),er.target=qt,er.relatedTarget=zo,hn=er),zo=hn,rn&&xi)t:{for(er=l1,Pt=rn,It=xi,qt=0,hn=Pt;hn;hn=er(hn))qt++;hn=0;for(var gi=It;gi;gi=er(gi))hn++;for(;0<qt-hn;)Pt=er(Pt),qt--;for(;0<hn-qt;)It=er(It),hn--;for(;qt--;){if(Pt===It||It!==null&&Pt===It.alternate){er=Pt;break t}Pt=er(Pt),It=er(It)}er=null}else er=null;rn!==null&&vs(gn,Zt,rn,er,!1),xi!==null&&zo!==null&&vs(gn,zo,xi,er,!0)}}e:{if(Zt=$t?Ml($t):window,rn=Zt.nodeName&&Zt.nodeName.toLowerCase(),rn==="select"||rn==="input"&&Zt.type==="file")var vo=Kh;else if(Ip(Zt))if(Fh)vo=X1;else{vo=Z1;var zi=t0}else rn=Zt.nodeName,!rn||rn.toLowerCase()!=="input"||Zt.type!=="checkbox"&&Zt.type!=="radio"?$t&&Mu($t.elementType)&&(vo=Kh):vo=Pp;if(vo&&(vo=vo(f,$t))){Tp(gn,vo,x,ln);break e}zi&&zi(f,Zt,$t),f==="focusout"&&$t&&Zt.type==="number"&&$t.memoizedProps.value!=null&&$c(Zt,"number",Zt.value)}switch(zi=$t?Ml($t):window,f){case"focusin":(Ip(zi)||zi.contentEditable==="true")&&(Tt=zi,an=$t,tn=null);break;case"focusout":tn=an=Tt=null;break;case"mousedown":mi=!0;break;case"contextmenu":case"mouseup":case"dragend":mi=!1,pr(gn,x,ln);break;case"selectionchange":if(ih)break;case"keydown":case"keyup":pr(gn,x,ln)}var Br;if(zs)e:{switch(f){case"compositionstart":var Hr="onCompositionStart";break e;case"compositionend":Hr="onCompositionEnd";break e;case"compositionupdate":Hr="onCompositionUpdate";break e}Hr=void 0}else bc?Fd(f,x)&&(Hr="onCompositionEnd"):f==="keydown"&&x.keyCode===229&&(Hr="onCompositionStart");Hr&&(Kd&&x.locale!=="ko"&&(bc||Hr!=="onCompositionStart"?Hr==="onCompositionEnd"&&bc&&(Br=Tr()):(oa=ln,Za="value"in oa?oa.value:oa.textContent,bc=!0)),zi=k0($t,Hr),0<zi.length&&(Hr=new wu(Hr,f,null,x,ln),gn.push({event:Hr,listeners:zi}),Br?Hr.data=Br:(Br=$1(x),Br!==null&&(Hr.data=Br)))),(Br=Lh?Bl(f,x):e0(f,x))&&(Hr=k0($t,"onBeforeInput"),0<Hr.length&&(zi=new wu("onBeforeInput","beforeinput",null,x,ln),gn.push({event:zi,listeners:Hr}),zi.data=Br)),tf(gn,f,$t,x,ln)}h_(gn,g)})}function Kc(f,g,x){return{instance:f,listener:g,currentTarget:x}}function k0(f,g){for(var x=g+"Capture",T=[];f!==null;){var G=f,J=G.stateNode;if(G=G.tag,G!==5&&G!==26&&G!==27||J===null||(G=$s(f,x),G!=null&&T.unshift(Kc(f,G,J)),G=$s(f,g),G!=null&&T.push(Kc(f,G,J))),f.tag===3)return T;f=f.return}return[]}function l1(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5&&f.tag!==27);return f||null}function vs(f,g,x,T,G){for(var J=g._reactName,_e=[];x!==null&&x!==T;){var Ve=x,_t=Ve.alternate,$t=Ve.stateNode;if(Ve=Ve.tag,_t!==null&&_t===T)break;Ve!==5&&Ve!==26&&Ve!==27||$t===null||(_t=$t,G?($t=$s(x,J),$t!=null&&_e.unshift(Kc(x,$t,_t))):G||($t=$s(x,J),$t!=null&&_e.push(Kc(x,$t,_t)))),x=x.return}_e.length!==0&&f.push({event:g,listeners:_e})}var da=/\r\n?/g,D0=/\u0000|\uFFFD/g;function yb(f){return(typeof f=="string"?f:""+f).replace(da,`
`).replace(D0,"")}function Sy(f,g){return g=yb(g),yb(f)===g}function rs(f,g,x,T,G,J){switch(x){case"children":typeof T=="string"?g==="body"||g==="textarea"&&T===""||Mo(f,T):(typeof T=="number"||typeof T=="bigint")&&g!=="body"&&Mo(f,""+T);break;case"className":cl(f,"class",T);break;case"tabIndex":cl(f,"tabindex",T);break;case"dir":case"role":case"viewBox":case"width":case"height":cl(f,x,T);break;case"style":Es(f,T,J);break;case"data":if(g!=="object"){cl(f,"data",T);break}case"src":case"href":if(T===""&&(g!=="a"||x!=="href")){f.removeAttribute(x);break}if(T==null||typeof T=="function"||typeof T=="symbol"||typeof T=="boolean"){f.removeAttribute(x);break}T=Ji(""+T),f.setAttribute(x,T);break;case"action":case"formAction":if(typeof T=="function"){f.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof J=="function"&&(x==="formAction"?(g!=="input"&&rs(f,g,"name",G.name,G,null),rs(f,g,"formEncType",G.formEncType,G,null),rs(f,g,"formMethod",G.formMethod,G,null),rs(f,g,"formTarget",G.formTarget,G,null)):(rs(f,g,"encType",G.encType,G,null),rs(f,g,"method",G.method,G,null),rs(f,g,"target",G.target,G,null)));if(T==null||typeof T=="symbol"||typeof T=="boolean"){f.removeAttribute(x);break}T=Ji(""+T),f.setAttribute(x,T);break;case"onClick":T!=null&&(f.onclick=Ha);break;case"onScroll":T!=null&&no("scroll",f);break;case"onScrollEnd":T!=null&&no("scrollend",f);break;case"dangerouslySetInnerHTML":if(T!=null){if(typeof T!="object"||!("__html"in T))throw Error(i(61));if(x=T.__html,x!=null){if(G.children!=null)throw Error(i(60));f.innerHTML=x}}break;case"multiple":f.multiple=T&&typeof T!="function"&&typeof T!="symbol";break;case"muted":f.muted=T&&typeof T!="function"&&typeof T!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(T==null||typeof T=="function"||typeof T=="boolean"||typeof T=="symbol"){f.removeAttribute("xlink:href");break}x=Ji(""+T),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":T!=null&&typeof T!="function"&&typeof T!="symbol"?f.setAttribute(x,""+T):f.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":T&&typeof T!="function"&&typeof T!="symbol"?f.setAttribute(x,""):f.removeAttribute(x);break;case"capture":case"download":T===!0?f.setAttribute(x,""):T!==!1&&T!=null&&typeof T!="function"&&typeof T!="symbol"?f.setAttribute(x,T):f.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":T!=null&&typeof T!="function"&&typeof T!="symbol"&&!isNaN(T)&&1<=T?f.setAttribute(x,T):f.removeAttribute(x);break;case"rowSpan":case"start":T==null||typeof T=="function"||typeof T=="symbol"||isNaN(T)?f.removeAttribute(x):f.setAttribute(x,T);break;case"popover":no("beforetoggle",f),no("toggle",f),Vc(f,"popover",T);break;case"xlinkActuate":ja(f,"http://www.w3.org/1999/xlink","xlink:actuate",T);break;case"xlinkArcrole":ja(f,"http://www.w3.org/1999/xlink","xlink:arcrole",T);break;case"xlinkRole":ja(f,"http://www.w3.org/1999/xlink","xlink:role",T);break;case"xlinkShow":ja(f,"http://www.w3.org/1999/xlink","xlink:show",T);break;case"xlinkTitle":ja(f,"http://www.w3.org/1999/xlink","xlink:title",T);break;case"xlinkType":ja(f,"http://www.w3.org/1999/xlink","xlink:type",T);break;case"xmlBase":ja(f,"http://www.w3.org/XML/1998/namespace","xml:base",T);break;case"xmlLang":ja(f,"http://www.w3.org/XML/1998/namespace","xml:lang",T);break;case"xmlSpace":ja(f,"http://www.w3.org/XML/1998/namespace","xml:space",T);break;case"is":Vc(f,"is",T);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=Zl.get(x)||x,Vc(f,x,T))}}function ac(f,g,x,T,G,J){switch(x){case"style":Es(f,T,J);break;case"dangerouslySetInnerHTML":if(T!=null){if(typeof T!="object"||!("__html"in T))throw Error(i(61));if(x=T.__html,x!=null){if(G.children!=null)throw Error(i(60));f.innerHTML=x}}break;case"children":typeof T=="string"?Mo(f,T):(typeof T=="number"||typeof T=="bigint")&&Mo(f,""+T);break;case"onScroll":T!=null&&no("scroll",f);break;case"onScrollEnd":T!=null&&no("scrollend",f);break;case"onClick":T!=null&&(f.onclick=Ha);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qo.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(G=x.endsWith("Capture"),g=x.slice(2,G?x.length-7:void 0),J=f[kn]||null,J=J!=null?J[x]:null,typeof J=="function"&&f.removeEventListener(g,J,G),typeof T=="function")){typeof J!="function"&&J!==null&&(x in f?f[x]=null:f.hasAttribute(x)&&f.removeAttribute(x)),f.addEventListener(g,T,G);break e}x in f?f[x]=T:T===!0?f.setAttribute(x,""):Vc(f,x,T)}}}function Ta(f,g,x){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":no("error",f),no("load",f);var T=!1,G=!1,J;for(J in x)if(x.hasOwnProperty(J)){var _e=x[J];if(_e!=null)switch(J){case"src":T=!0;break;case"srcSet":G=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,g));default:rs(f,g,J,_e,x,null)}}G&&rs(f,g,"srcSet",x.srcSet,x,null),T&&rs(f,g,"src",x.src,x,null);return;case"input":no("invalid",f);var Ve=J=_e=G=null,_t=null,$t=null;for(T in x)if(x.hasOwnProperty(T)){var ln=x[T];if(ln!=null)switch(T){case"name":G=ln;break;case"type":_e=ln;break;case"checked":_t=ln;break;case"defaultChecked":$t=ln;break;case"value":J=ln;break;case"defaultValue":Ve=ln;break;case"children":case"dangerouslySetInnerHTML":if(ln!=null)throw Error(i(137,g));break;default:rs(f,g,T,ln,x,null)}}Yl(f,J,Ve,_t,$t,_e,G,!1);return;case"select":no("invalid",f),T=_e=J=null;for(G in x)if(x.hasOwnProperty(G)&&(Ve=x[G],Ve!=null))switch(G){case"value":J=Ve;break;case"defaultValue":_e=Ve;break;case"multiple":T=Ve;default:rs(f,g,G,Ve,x,null)}g=J,x=_e,f.multiple=!!T,g!=null?Vl(f,!!T,g,!1):x!=null&&Vl(f,!!T,x,!0);return;case"textarea":no("invalid",f),J=G=T=null;for(_e in x)if(x.hasOwnProperty(_e)&&(Ve=x[_e],Ve!=null))switch(_e){case"value":T=Ve;break;case"defaultValue":G=Ve;break;case"children":J=Ve;break;case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(i(91));break;default:rs(f,g,_e,Ve,x,null)}hs(f,T,G,J);return;case"option":for(_t in x)x.hasOwnProperty(_t)&&(T=x[_t],T!=null)&&(_t==="selected"?f.selected=T&&typeof T!="function"&&typeof T!="symbol":rs(f,g,_t,T,x,null));return;case"dialog":no("beforetoggle",f),no("toggle",f),no("cancel",f),no("close",f);break;case"iframe":case"object":no("load",f);break;case"video":case"audio":for(T=0;T<o1.length;T++)no(o1[T],f);break;case"image":no("error",f),no("load",f);break;case"details":no("toggle",f);break;case"embed":case"source":case"link":no("error",f),no("load",f);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($t in x)if(x.hasOwnProperty($t)&&(T=x[$t],T!=null))switch($t){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,g));default:rs(f,g,$t,T,x,null)}return;default:if(Mu(g)){for(ln in x)x.hasOwnProperty(ln)&&(T=x[ln],T!==void 0&&ac(f,g,ln,T,x,void 0));return}}for(Ve in x)x.hasOwnProperty(Ve)&&(T=x[Ve],T!=null&&rs(f,g,Ve,T,x,null))}function u1(f,g,x,T){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var G=null,J=null,_e=null,Ve=null,_t=null,$t=null,ln=null;for(rn in x){var gn=x[rn];if(x.hasOwnProperty(rn)&&gn!=null)switch(rn){case"checked":break;case"value":break;case"defaultValue":_t=gn;default:T.hasOwnProperty(rn)||rs(f,g,rn,null,T,gn)}}for(var Zt in T){var rn=T[Zt];if(gn=x[Zt],T.hasOwnProperty(Zt)&&(rn!=null||gn!=null))switch(Zt){case"type":J=rn;break;case"name":G=rn;break;case"checked":$t=rn;break;case"defaultChecked":ln=rn;break;case"value":_e=rn;break;case"defaultValue":Ve=rn;break;case"children":case"dangerouslySetInnerHTML":if(rn!=null)throw Error(i(137,g));break;default:rn!==gn&&rs(f,g,Zt,rn,T,gn)}}vc(f,_e,Ve,_t,$t,ln,J,G);return;case"select":rn=_e=Ve=Zt=null;for(J in x)if(_t=x[J],x.hasOwnProperty(J)&&_t!=null)switch(J){case"value":break;case"multiple":rn=_t;default:T.hasOwnProperty(J)||rs(f,g,J,null,T,_t)}for(G in T)if(J=T[G],_t=x[G],T.hasOwnProperty(G)&&(J!=null||_t!=null))switch(G){case"value":Zt=J;break;case"defaultValue":Ve=J;break;case"multiple":_e=J;default:J!==_t&&rs(f,g,G,J,T,_t)}g=Ve,x=_e,T=rn,Zt!=null?Vl(f,!!x,Zt,!1):!!T!=!!x&&(g!=null?Vl(f,!!x,g,!0):Vl(f,!!x,x?[]:"",!1));return;case"textarea":rn=Zt=null;for(Ve in x)if(G=x[Ve],x.hasOwnProperty(Ve)&&G!=null&&!T.hasOwnProperty(Ve))switch(Ve){case"value":break;case"children":break;default:rs(f,g,Ve,null,T,G)}for(_e in T)if(G=T[_e],J=x[_e],T.hasOwnProperty(_e)&&(G!=null||J!=null))switch(_e){case"value":Zt=G;break;case"defaultValue":rn=G;break;case"children":break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(91));break;default:G!==J&&rs(f,g,_e,G,T,J)}$l(f,Zt,rn);return;case"option":for(var xi in x)Zt=x[xi],x.hasOwnProperty(xi)&&Zt!=null&&!T.hasOwnProperty(xi)&&(xi==="selected"?f.selected=!1:rs(f,g,xi,null,T,Zt));for(_t in T)Zt=T[_t],rn=x[_t],T.hasOwnProperty(_t)&&Zt!==rn&&(Zt!=null||rn!=null)&&(_t==="selected"?f.selected=Zt&&typeof Zt!="function"&&typeof Zt!="symbol":rs(f,g,_t,Zt,T,rn));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var er in x)Zt=x[er],x.hasOwnProperty(er)&&Zt!=null&&!T.hasOwnProperty(er)&&rs(f,g,er,null,T,Zt);for($t in T)if(Zt=T[$t],rn=x[$t],T.hasOwnProperty($t)&&Zt!==rn&&(Zt!=null||rn!=null))switch($t){case"children":case"dangerouslySetInnerHTML":if(Zt!=null)throw Error(i(137,g));break;default:rs(f,g,$t,Zt,T,rn)}return;default:if(Mu(g)){for(var zo in x)Zt=x[zo],x.hasOwnProperty(zo)&&Zt!==void 0&&!T.hasOwnProperty(zo)&&ac(f,g,zo,void 0,T,Zt);for(ln in T)Zt=T[ln],rn=x[ln],!T.hasOwnProperty(ln)||Zt===rn||Zt===void 0&&rn===void 0||ac(f,g,ln,Zt,T,rn);return}}for(var Pt in x)Zt=x[Pt],x.hasOwnProperty(Pt)&&Zt!=null&&!T.hasOwnProperty(Pt)&&rs(f,g,Pt,null,T,Zt);for(gn in T)Zt=T[gn],rn=x[gn],!T.hasOwnProperty(gn)||Zt===rn||Zt==null&&rn==null||rs(f,g,gn,Zt,T,rn)}function vb(f){switch(f){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function R0(){if(typeof performance.getEntriesByType=="function"){for(var f=0,g=0,x=performance.getEntriesByType("resource"),T=0;T<x.length;T++){var G=x[T],J=G.transferSize,_e=G.initiatorType,Ve=G.duration;if(J&&Ve&&vb(_e)){for(_e=0,Ve=G.responseEnd,T+=1;T<x.length;T++){var _t=x[T],$t=_t.startTime;if($t>Ve)break;var ln=_t.transferSize,gn=_t.initiatorType;ln&&vb(gn)&&(_t=_t.responseEnd,_e+=ln*(_t<Ve?1:(Ve-$t)/(_t-$t)))}if(--T,g+=8*(J+_e)/(G.duration/1e3),f++,10<f)break}}if(0<f)return g/f/1e6}return navigator.connection&&(f=navigator.connection.downlink,typeof f=="number")?f:5}var P0=null,Ey=null;function hd(f){return f.nodeType===9?f:f.ownerDocument}function Zf(f){switch(f){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Iu(f,g){if(f===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return f===1&&g==="foreignObject"?0:f}function dd(f,g){return f==="textarea"||f==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var By=null;function bb(){var f=window.event;return f&&f.type==="popstate"?f===By?!1:(By=f,!0):(By=null,!1)}var Oy=typeof setTimeout=="function"?setTimeout:void 0,s3=typeof clearTimeout=="function"?clearTimeout:void 0,d_=typeof Promise=="function"?Promise:void 0,_r=typeof queueMicrotask=="function"?queueMicrotask:typeof d_<"u"?function(f){return d_.resolve(null).then(f).catch(Au)}:Oy;function Au(f){setTimeout(function(){throw f})}function Di(f){return f==="head"}function uA(f,g){var x=g,T=0;do{var G=x.nextSibling;if(f.removeChild(x),G&&G.nodeType===8)if(x=G.data,x==="/$"||x==="/&"){if(T===0){f.removeChild(G),N0(g);return}T--}else if(x==="$"||x==="$?"||x==="$~"||x==="$!"||x==="&")T++;else if(x==="html")L0(f.ownerDocument.documentElement);else if(x==="head"){x=f.ownerDocument.head,L0(x);for(var J=x.firstChild;J;){var _e=J.nextSibling,Ve=J.nodeName;J[Vi]||Ve==="SCRIPT"||Ve==="STYLE"||Ve==="LINK"&&J.rel.toLowerCase()==="stylesheet"||x.removeChild(J),J=_e}}else x==="body"&&L0(f.ownerDocument.body);x=G}while(x);N0(g)}function ml(f,g){var x=f;f=0;do{var T=x.nextSibling;if(x.nodeType===1?g?(x._stashedDisplay=x.style.display,x.style.display="none"):(x.style.display=x._stashedDisplay||"",x.getAttribute("style")===""&&x.removeAttribute("style")):x.nodeType===3&&(g?(x._stashedText=x.nodeValue,x.nodeValue=""):x.nodeValue=x._stashedText||""),T&&T.nodeType===8)if(x=T.data,x==="/$"){if(f===0)break;f--}else x!=="$"&&x!=="$?"&&x!=="$~"&&x!=="$!"||f++;x=T}while(x)}function hu(f){var g=f.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var x=g;switch(g=g.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":hu(x),Qu(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}f.removeChild(x)}}function il(f,g,x,T){for(;f.nodeType===1;){var G=x;if(f.nodeName.toLowerCase()!==g.toLowerCase()){if(!T&&(f.nodeName!=="INPUT"||f.type!=="hidden"))break}else if(T){if(!f[Vi])switch(g){case"meta":if(!f.hasAttribute("itemprop"))break;return f;case"link":if(J=f.getAttribute("rel"),J==="stylesheet"&&f.hasAttribute("data-precedence"))break;if(J!==G.rel||f.getAttribute("href")!==(G.href==null||G.href===""?null:G.href)||f.getAttribute("crossorigin")!==(G.crossOrigin==null?null:G.crossOrigin)||f.getAttribute("title")!==(G.title==null?null:G.title))break;return f;case"style":if(f.hasAttribute("data-precedence"))break;return f;case"script":if(J=f.getAttribute("src"),(J!==(G.src==null?null:G.src)||f.getAttribute("type")!==(G.type==null?null:G.type)||f.getAttribute("crossorigin")!==(G.crossOrigin==null?null:G.crossOrigin))&&J&&f.hasAttribute("async")&&!f.hasAttribute("itemprop"))break;return f;default:return f}}else if(g==="input"&&f.type==="hidden"){var J=G.name==null?null:""+G.name;if(G.type==="hidden"&&f.getAttribute("name")===J)return f}else return f;if(f=FA(f.nextSibling),f===null)break}return null}function cr(f,g,x){if(g==="")return null;for(;f.nodeType!==3;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!x||(f=FA(f.nextSibling),f===null))return null;return f}function Cb(f,g){for(;f.nodeType!==8;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!g||(f=FA(f.nextSibling),f===null))return null;return f}function Tu(f){return f.data==="$?"||f.data==="$~"}function Js(f){return f.data==="$!"||f.data==="$?"&&f.ownerDocument.readyState!=="loading"}function Iy(f,g){var x=f.ownerDocument;if(f.data==="$~")f._reactRetry=g;else if(f.data!=="$?"||x.readyState!=="loading")g();else{var T=function(){g(),x.removeEventListener("DOMContentLoaded",T)};x.addEventListener("DOMContentLoaded",T),f._reactRetry=T}}function FA(f){for(;f!=null;f=f.nextSibling){var g=f.nodeType;if(g===1||g===3)break;if(g===8){if(g=f.data,g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"||g==="F!"||g==="F")break;if(g==="/$"||g==="/&")return null}}return f}var Ty=null;function Xf(f){f=f.nextSibling;for(var g=0;f;){if(f.nodeType===8){var x=f.data;if(x==="/$"||x==="/&"){if(g===0)return FA(f.nextSibling);g--}else x!=="$"&&x!=="$!"&&x!=="$?"&&x!=="$~"&&x!=="&"||g++}f=f.nextSibling}return null}function om(f){f=f.previousSibling;for(var g=0;f;){if(f.nodeType===8){var x=f.data;if(x==="$"||x==="$!"||x==="$?"||x==="$~"||x==="&"){if(g===0)return f;g--}else x!=="/$"&&x!=="/&"||g++}f=f.previousSibling}return null}function f_(f,g,x){switch(g=hd(x),f){case"html":if(f=g.documentElement,!f)throw Error(i(452));return f;case"head":if(f=g.head,!f)throw Error(i(453));return f;case"body":if(f=g.body,!f)throw Error(i(454));return f;default:throw Error(i(451))}}function L0(f){for(var g=f.attributes;g.length;)f.removeAttributeNode(g[0]);Qu(f)}var cA=new Map,_b=new Set;function U0(f){return typeof f.getRootNode=="function"?f.getRootNode():f.nodeType===9?f:f.ownerDocument}var fd=Ye.d;Ye.d={f:xb,r:ku,D:pd,C:ky,L:Mb,m:p_,X:lc,S:gl,M:m_};function xb(){var f=fd.f(),g=Jg();return f||g}function ku(f){var g=$a(f);g!==null&&g.tag===5&&g.type==="form"?Na(g):fd.r(f)}var zl=typeof document>"u"?null:document;function du(f,g,x){var T=zl;if(T&&typeof g=="string"&&g){var G=Vs(g);G='link[rel="'+f+'"][href="'+G+'"]',typeof x=="string"&&(G+='[crossorigin="'+x+'"]'),_b.has(G)||(_b.add(G),f={rel:f,crossOrigin:x,href:g},T.querySelector(G)===null&&(g=T.createElement("link"),Ta(g,"link",f),Ro(g),T.head.appendChild(g)))}}function pd(f){fd.D(f),du("dns-prefetch",f,null)}function ky(f,g){fd.C(f,g),du("preconnect",f,g)}function Mb(f,g,x){fd.L(f,g,x);var T=zl;if(T&&f&&g){var G='link[rel="preload"][as="'+Vs(g)+'"]';g==="image"&&x&&x.imageSrcSet?(G+='[imagesrcset="'+Vs(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(G+='[imagesizes="'+Vs(x.imageSizes)+'"]')):G+='[href="'+Vs(f)+'"]';var J=G;switch(g){case"style":J=nf(f);break;case"script":J=Jf(f)}cA.has(J)||(f=v({rel:"preload",href:g==="image"&&x&&x.imageSrcSet?void 0:f,as:g},x),cA.set(J,f),T.querySelector(G)!==null||g==="style"&&T.querySelector(sm(J))||g==="script"&&T.querySelector(am(J))||(g=T.createElement("link"),Ta(g,"link",f),Ro(g),T.head.appendChild(g)))}}function p_(f,g){fd.m(f,g);var x=zl;if(x&&f){var T=g&&typeof g.as=="string"?g.as:"script",G='link[rel="modulepreload"][as="'+Vs(T)+'"][href="'+Vs(f)+'"]',J=G;switch(T){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":J=Jf(f)}if(!cA.has(J)&&(f=v({rel:"modulepreload",href:f},g),cA.set(J,f),x.querySelector(G)===null)){switch(T){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(am(J)))return}T=x.createElement("link"),Ta(T,"link",f),Ro(T),x.head.appendChild(T)}}}function gl(f,g,x){fd.S(f,g,x);var T=zl;if(T&&f){var G=Fa(T).hoistableStyles,J=nf(f);g=g||"default";var _e=G.get(J);if(!_e){var Ve={loading:0,preload:null};if(_e=T.querySelector(sm(J)))Ve.loading=5;else{f=v({rel:"stylesheet",href:f,"data-precedence":g},x),(x=cA.get(J))&&F0(f,x);var _t=_e=T.createElement("link");Ro(_t),Ta(_t,"link",f),_t._p=new Promise(function($t,ln){_t.onload=$t,_t.onerror=ln}),_t.addEventListener("load",function(){Ve.loading|=1}),_t.addEventListener("error",function(){Ve.loading|=2}),Ve.loading|=4,c1(_e,g,T)}_e={type:"stylesheet",instance:_e,count:1,state:Ve},G.set(J,_e)}}}function lc(f,g){fd.X(f,g);var x=zl;if(x&&f){var T=Fa(x).hoistableScripts,G=Jf(f),J=T.get(G);J||(J=x.querySelector(am(G)),J||(f=v({src:f,async:!0},g),(g=cA.get(G))&&lm(f,g),J=x.createElement("script"),Ro(J),Ta(J,"link",f),x.head.appendChild(J)),J={type:"script",instance:J,count:1,state:null},T.set(G,J))}}function m_(f,g){fd.M(f,g);var x=zl;if(x&&f){var T=Fa(x).hoistableScripts,G=Jf(f),J=T.get(G);J||(J=x.querySelector(am(G)),J||(f=v({src:f,async:!0,type:"module"},g),(g=cA.get(G))&&lm(f,g),J=x.createElement("script"),Ro(J),Ta(J,"link",f),x.head.appendChild(J)),J={type:"script",instance:J,count:1,state:null},T.set(G,J))}}function Dy(f,g,x,T){var G=(G=kt.current)?U0(G):null;if(!G)throw Error(i(446));switch(f){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(g=nf(x.href),x=Fa(G).hoistableStyles,T=x.get(g),T||(T={type:"style",instance:null,count:0,state:null},x.set(g,T)),T):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){f=nf(x.href);var J=Fa(G).hoistableStyles,_e=J.get(f);if(_e||(G=G.ownerDocument||G,_e={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},J.set(f,_e),(J=G.querySelector(sm(f)))&&!J._p&&(_e.instance=J,_e.state.loading=5),cA.has(f)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},cA.set(f,x),J||K0(G,f,x,_e.state))),g&&T===null)throw Error(i(528,""));return _e}if(g&&T!==null)throw Error(i(529,""));return null;case"script":return g=x.async,x=x.src,typeof x=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=Jf(x),x=Fa(G).hoistableScripts,T=x.get(g),T||(T={type:"script",instance:null,count:0,state:null},x.set(g,T)),T):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,f))}}function nf(f){return'href="'+Vs(f)+'"'}function sm(f){return'link[rel="stylesheet"]['+f+"]"}function wb(f){return v({},f,{"data-precedence":f.precedence,precedence:null})}function K0(f,g,x,T){f.querySelector('link[rel="preload"][as="style"]['+g+"]")?T.loading=1:(g=f.createElement("link"),T.preload=g,g.addEventListener("load",function(){return T.loading|=1}),g.addEventListener("error",function(){return T.loading|=2}),Ta(g,"link",x),Ro(g),f.head.appendChild(g))}function Jf(f){return'[src="'+Vs(f)+'"]'}function am(f){return"script[async]"+f}function g_(f,g,x){if(g.count++,g.instance===null)switch(g.type){case"style":var T=f.querySelector('style[data-href~="'+Vs(x.href)+'"]');if(T)return g.instance=T,Ro(T),T;var G=v({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return T=(f.ownerDocument||f).createElement("style"),Ro(T),Ta(T,"style",G),c1(T,x.precedence,f),g.instance=T;case"stylesheet":G=nf(x.href);var J=f.querySelector(sm(G));if(J)return g.state.loading|=4,g.instance=J,Ro(J),J;T=wb(x),(G=cA.get(G))&&F0(T,G),J=(f.ownerDocument||f).createElement("link"),Ro(J);var _e=J;return _e._p=new Promise(function(Ve,_t){_e.onload=Ve,_e.onerror=_t}),Ta(J,"link",T),g.state.loading|=4,c1(J,x.precedence,f),g.instance=J;case"script":return J=Jf(x.src),(G=f.querySelector(am(J)))?(g.instance=G,Ro(G),G):(T=x,(G=cA.get(J))&&(T=v({},x),lm(T,G)),f=f.ownerDocument||f,G=f.createElement("script"),Ro(G),Ta(G,"link",T),f.head.appendChild(G),g.instance=G);case"void":return null;default:throw Error(i(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(T=g.instance,g.state.loading|=4,c1(T,x.precedence,f));return g.instance}function c1(f,g,x){for(var T=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),G=T.length?T[T.length-1]:null,J=G,_e=0;_e<T.length;_e++){var Ve=T[_e];if(Ve.dataset.precedence===g)J=Ve;else if(J!==G)break}J?J.parentNode.insertBefore(f,J.nextSibling):(g=x.nodeType===9?x.head:x,g.insertBefore(f,g.firstChild))}function F0(f,g){f.crossOrigin==null&&(f.crossOrigin=g.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=g.referrerPolicy),f.title==null&&(f.title=g.title)}function lm(f,g){f.crossOrigin==null&&(f.crossOrigin=g.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=g.referrerPolicy),f.integrity==null&&(f.integrity=g.integrity)}var ep=null;function Ry(f,g,x){if(ep===null){var T=new Map,G=ep=new Map;G.set(x,T)}else G=ep,T=G.get(x),T||(T=new Map,G.set(x,T));if(T.has(f))return T;for(T.set(f,null),x=x.getElementsByTagName(f),G=0;G<x.length;G++){var J=x[G];if(!(J[Vi]||J[oo]||f==="link"&&J.getAttribute("rel")==="stylesheet")&&J.namespaceURI!=="http://www.w3.org/2000/svg"){var _e=J.getAttribute(g)||"";_e=f+_e;var Ve=T.get(_e);Ve?Ve.push(J):T.set(_e,[J])}}return T}function Py(f,g,x){f=f.ownerDocument||f,f.head.insertBefore(x,g==="title"?f.querySelector("head > title"):null)}function Sb(f,g,x){if(x===1||g.itemProp!=null)return!1;switch(f){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;return g.rel==="stylesheet"?(f=g.disabled,typeof g.precedence=="string"&&f==null):!0;case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function Eb(f){return!(f.type==="stylesheet"&&(f.state.loading&3)===0)}function um(f,g,x,T){if(x.type==="stylesheet"&&(typeof T.media!="string"||matchMedia(T.media).matches!==!1)&&(x.state.loading&4)===0){if(x.instance===null){var G=nf(T.href),J=g.querySelector(sm(G));if(J){g=J._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(f.count++,f=A1.bind(f),g.then(f,f)),x.state.loading|=4,x.instance=J,Ro(J);return}J=g.ownerDocument||g,T=wb(T),(G=cA.get(G))&&F0(T,G),J=J.createElement("link"),Ro(J);var _e=J;_e._p=new Promise(function(Ve,_t){_e.onload=Ve,_e.onerror=_t}),Ta(J,"link",T),x.instance=J}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(x,g),(g=x.state.preload)&&(x.state.loading&3)===0&&(f.count++,x=A1.bind(f),g.addEventListener("load",x),g.addEventListener("error",x))}}var Ly=0;function y_(f,g){return f.stylesheets&&f.count===0&&h1(f,f.stylesheets),0<f.count||0<f.imgCount?function(x){var T=setTimeout(function(){if(f.stylesheets&&h1(f,f.stylesheets),f.unsuspend){var J=f.unsuspend;f.unsuspend=null,J()}},6e4+g);0<f.imgBytes&&Ly===0&&(Ly=62500*R0());var G=setTimeout(function(){if(f.waitingForImages=!1,f.count===0&&(f.stylesheets&&h1(f,f.stylesheets),f.unsuspend)){var J=f.unsuspend;f.unsuspend=null,J()}},(f.imgBytes>Ly?50:800)+g);return f.unsuspend=x,function(){f.unsuspend=null,clearTimeout(T),clearTimeout(G)}}:null}function A1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)h1(this,this.stylesheets);else if(this.unsuspend){var f=this.unsuspend;this.unsuspend=null,f()}}}var Uy=null;function h1(f,g){f.stylesheets=null,f.unsuspend!==null&&(f.count++,Uy=new Map,g.forEach(v_,f),Uy=null,A1.call(f))}function v_(f,g){if(!(g.state.loading&4)){var x=Uy.get(f);if(x)var T=x.get(null);else{x=new Map,Uy.set(f,x);for(var G=f.querySelectorAll("link[data-precedence],style[data-precedence]"),J=0;J<G.length;J++){var _e=G[J];(_e.nodeName==="LINK"||_e.getAttribute("media")!=="not all")&&(x.set(_e.dataset.precedence,_e),T=_e)}T&&x.set(null,T)}G=g.instance,_e=G.getAttribute("data-precedence"),J=x.get(_e)||T,J===T&&x.set(null,G),x.set(_e,G),this.count++,T=A1.bind(this),G.addEventListener("load",T),G.addEventListener("error",T),J?J.parentNode.insertBefore(G,J.nextSibling):(f=f.nodeType===9?f.head:f,f.insertBefore(G,f.firstChild)),g.state.loading|=4}}var z0={$$typeof:X,Provider:null,Consumer:null,_currentValue:At,_currentValue2:At,_threadCount:0};function Bb(f,g,x,T,G,J,_e,Ve,_t){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qi(0),this.hiddenUpdates=Qi(null),this.identifierPrefix=T,this.onUncaughtError=G,this.onCaughtError=J,this.onRecoverableError=_e,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_t,this.incompleteTransitions=new Map}function Ob(f,g,x,T,G,J,_e,Ve,_t,$t,ln,gn){return f=new Bb(f,g,x,_e,_t,$t,ln,gn,Ve),g=1,J===!0&&(g|=24),J=Al(3,null,null,g),f.current=J,J.stateNode=f,g=Pl(),g.refCount++,f.pooledCache=g,g.refCount++,J.memoizedState={element:T,isDehydrated:x,cache:g},tA(J),f}function b_(f){return f?(f=or,f):or}function C_(f,g,x,T,G,J){G=b_(G),T.context===null?T.context=G:T.pendingContext=G,T=zr(g),T.payload={element:x},J=J===void 0?null:J,J!==null&&(T.callback=J),x=Oc(f,T,g),x!==null&&(Uc(x,f,g),Zh(x,f,g))}function Ib(f,g){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var x=f.retryLane;f.retryLane=x!==0&&x<g?x:g}}function cm(f,g){Ib(f,g),(f=f.alternate)&&Ib(f,g)}function Tb(f){if(f.tag===13||f.tag===31){var g=eu(f,67108864);g!==null&&Uc(g,f,67108864),cm(f,67108864)}}function __(f){if(f.tag===13||f.tag===31){var g=Io();g=xo(g);var x=eu(f,g);x!==null&&Uc(x,f,g),cm(f,g)}}var j0=!0;function kb(f,g,x,T){var G=Ie.T;Ie.T=null;var J=Ye.p;try{Ye.p=2,tp(f,g,x,T)}finally{Ye.p=J,Ie.T=G}}function x_(f,g,x,T){var G=Ie.T;Ie.T=null;var J=Ye.p;try{Ye.p=8,tp(f,g,x,T)}finally{Ye.p=J,Ie.T=G}}function tp(f,g,x,T){if(j0){var G=Ky(T);if(G===null)wy(f,g,T,Fy,x),Rb(f,T);else if(w_(G,f,g,x,T))T.stopPropagation();else if(Rb(f,T),g&4&&-1<a3.indexOf(f)){for(;G!==null;){var J=$a(G);if(J!==null)switch(J.tag){case 3:if(J=J.stateNode,J.current.memoizedState.isDehydrated){var _e=xt(J.pendingLanes);if(_e!==0){var Ve=J;for(Ve.pendingLanes|=2,Ve.entangledLanes|=2;_e;){var _t=1<<31-$e(_e);Ve.entanglements[1]|=_t,_e&=~_t}Ch(J),(Oo&6)===0&&(Yf=ti()+500,rm(0))}}break;case 31:case 13:Ve=eu(J,2),Ve!==null&&Uc(Ve,J,2),Jg(),cm(J,2)}if(J=Ky(T),J===null&&wy(f,g,T,Fy,x),J===G)break;G=J}G!==null&&T.stopPropagation()}else wy(f,g,T,null,x)}}function Ky(f){return f=Vu(f),Am(f)}var Fy=null;function Am(f){if(Fy=null,f=co(f),f!==null){var g=o(f);if(g===null)f=null;else{var x=g.tag;if(x===13){if(f=s(g),f!==null)return f;f=null}else if(x===31){if(f=a(g),f!==null)return f;f=null}else if(x===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;f=null}else g!==f&&(f=null)}}return Fy=f,null}function M_(f){switch(f){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bn()){case je:return 2;case H:return 8;case j:case Q:return 32;case he:return 268435456;default:return 32}default:return 32}}var Db=!1,rf=null,of=null,np=null,d1=new Map,f1=new Map,ip=[],a3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rb(f,g){switch(f){case"focusin":case"focusout":rf=null;break;case"dragenter":case"dragleave":of=null;break;case"mouseover":case"mouseout":np=null;break;case"pointerover":case"pointerout":d1.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":f1.delete(g.pointerId)}}function AA(f,g,x,T,G,J){return f===null||f.nativeEvent!==J?(f={blockedOn:g,domEventName:x,eventSystemFlags:T,nativeEvent:J,targetContainers:[G]},g!==null&&(g=$a(g),g!==null&&Tb(g)),f):(f.eventSystemFlags|=T,g=f.targetContainers,G!==null&&g.indexOf(G)===-1&&g.push(G),f)}function w_(f,g,x,T,G){switch(g){case"focusin":return rf=AA(rf,f,g,x,T,G),!0;case"dragenter":return of=AA(of,f,g,x,T,G),!0;case"mouseover":return np=AA(np,f,g,x,T,G),!0;case"pointerover":var J=G.pointerId;return d1.set(J,AA(d1.get(J)||null,f,g,x,T,G)),!0;case"gotpointercapture":return J=G.pointerId,f1.set(J,AA(f1.get(J)||null,f,g,x,T,G)),!0}return!1}function hm(f){var g=co(f.target);if(g!==null){var x=o(g);if(x!==null){if(g=x.tag,g===13){if(g=s(x),g!==null){f.blockedOn=g,Wo(f.priority,function(){__(x)});return}}else if(g===31){if(g=a(x),g!==null){f.blockedOn=g,Wo(f.priority,function(){__(x)});return}}else if(g===3&&x.stateNode.current.memoizedState.isDehydrated){f.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}f.blockedOn=null}function zy(f){if(f.blockedOn!==null)return!1;for(var g=f.targetContainers;0<g.length;){var x=Ky(f.nativeEvent);if(x===null){x=f.nativeEvent;var T=new x.constructor(x.type,x);Xo=T,x.target.dispatchEvent(T),Xo=null}else return g=$a(x),g!==null&&Tb(g),f.blockedOn=x,!1;g.shift()}return!0}function S_(f,g,x){zy(f)&&x.delete(g)}function l3(){Db=!1,rf!==null&&zy(rf)&&(rf=null),of!==null&&zy(of)&&(of=null),np!==null&&zy(np)&&(np=null),d1.forEach(S_),f1.forEach(S_)}function rp(f,g){f.blockedOn===g&&(f.blockedOn=null,Db||(Db=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,l3)))}var p1=null;function E_(f){p1!==f&&(p1=f,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){p1===f&&(p1=null);for(var g=0;g<f.length;g+=3){var x=f[g],T=f[g+1],G=f[g+2];if(typeof T!="function"){if(Am(T||x)===null)continue;break}var J=$a(x);J!==null&&(f.splice(g,3),g-=3,Ko(J,{pending:!0,data:G,method:x.method,action:T},T,G))}}))}function N0(f){function g(_t){return rp(_t,f)}rf!==null&&rp(rf,f),of!==null&&rp(of,f),np!==null&&rp(np,f),d1.forEach(g),f1.forEach(g);for(var x=0;x<ip.length;x++){var T=ip[x];T.blockedOn===f&&(T.blockedOn=null)}for(;0<ip.length&&(x=ip[0],x.blockedOn===null);)hm(x),x.blockedOn===null&&ip.shift();if(x=(f.ownerDocument||f).$$reactFormReplay,x!=null)for(T=0;T<x.length;T+=3){var G=x[T],J=x[T+1],_e=G[kn]||null;if(typeof J=="function")_e||E_(x);else if(_e){var Ve=null;if(J&&J.hasAttribute("formAction")){if(G=J,_e=J[kn]||null)Ve=_e.formAction;else if(Am(G)!==null)continue}else Ve=_e.action;typeof Ve=="function"?x[T+1]=Ve:(x.splice(T,3),T-=3),E_(x)}}}function Du(){function f(J){J.canIntercept&&J.info==="react-transition"&&J.intercept({handler:function(){return new Promise(function(_e){return G=_e})},focusReset:"manual",scroll:"manual"})}function g(){G!==null&&(G(),G=null),T||setTimeout(x,20)}function x(){if(!T&&!navigation.transition){var J=navigation.currentEntry;J&&J.url!=null&&navigation.navigate(J.url,{state:J.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var T=!1,G=null;return navigation.addEventListener("navigate",f),navigation.addEventListener("navigatesuccess",g),navigation.addEventListener("navigateerror",g),setTimeout(x,100),function(){T=!0,navigation.removeEventListener("navigate",f),navigation.removeEventListener("navigatesuccess",g),navigation.removeEventListener("navigateerror",g),G!==null&&(G(),G=null)}}}function G0(f){this._internalRoot=f}jy.prototype.render=G0.prototype.render=function(f){var g=this._internalRoot;if(g===null)throw Error(i(409));var x=g.current,T=Io();C_(x,T,f,g,null,null)},jy.prototype.unmount=G0.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var g=f.containerInfo;C_(f.current,2,null,f,null,null),Jg(),g[Xi]=null}};function jy(f){this._internalRoot=f}jy.prototype.unstable_scheduleHydration=function(f){if(f){var g=tr();f={blockedOn:null,target:f,priority:g};for(var x=0;x<ip.length&&g!==0&&g<ip[x].priority;x++);ip.splice(x,0,f),x===0&&hm(f)}};var Pb=e.version;if(Pb!=="19.2.0")throw Error(i(527,Pb,"19.2.0"));Ye.findDOMNode=function(f){var g=f._reactInternals;if(g===void 0)throw typeof f.render=="function"?Error(i(188)):(f=Object.keys(f).join(","),Error(i(268,f)));return f=d(g),f=f!==null?m(f):null,f=f===null?null:f.stateNode,f};var B_={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Ie,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ny=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ny.isDisabled&&Ny.supportsFiber)try{Qe=Ny.inject(B_),it=Ny}catch{}}return d3.createRoot=function(f,g){if(!r(f))throw Error(i(299));var x=!1,T="",G=mh,J=LA,_e=Ug;return g!=null&&(g.unstable_strictMode===!0&&(x=!0),g.identifierPrefix!==void 0&&(T=g.identifierPrefix),g.onUncaughtError!==void 0&&(G=g.onUncaughtError),g.onCaughtError!==void 0&&(J=g.onCaughtError),g.onRecoverableError!==void 0&&(_e=g.onRecoverableError)),g=Ob(f,1,!1,null,null,x,T,null,G,J,_e,Du),f[Xi]=g.current,My(f),new G0(g)},d3.hydrateRoot=function(f,g,x){if(!r(f))throw Error(i(299));var T=!1,G="",J=mh,_e=LA,Ve=Ug,_t=null;return x!=null&&(x.unstable_strictMode===!0&&(T=!0),x.identifierPrefix!==void 0&&(G=x.identifierPrefix),x.onUncaughtError!==void 0&&(J=x.onUncaughtError),x.onCaughtError!==void 0&&(_e=x.onCaughtError),x.onRecoverableError!==void 0&&(Ve=x.onRecoverableError),x.formState!==void 0&&(_t=x.formState)),g=Ob(f,1,!0,g,x??null,T,G,_t,J,_e,Ve,Du),g.context=b_(null),x=g.current,T=Io(),T=xo(T),G=zr(T),G.callback=null,Oc(x,G,T),x=T,g.current.lanes=x,Wi(g,x),Ch(g),f[Xi]=g.current,My(f),new jy(g)},d3.version="19.2.0",d3}var BF;function Tae(){if(BF)return bO.exports;BF=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),bO.exports=Iae(),bO.exports}var qH=Tae();const kae="modulepreload",Dae=function(n){return"/maputnik/"+n},OF={},Fb=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let d=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(M=>({status:"fulfilled",value:M}),M=>({status:"rejected",reason:M}))))};var s=d;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");r=d(t.map(m=>{if(m=Dae(m),m in OF)return;OF[m]=!0;const v=m.endsWith(".css"),M=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${M}`))return;const B=document.createElement("link");if(B.rel=v?"stylesheet":kae,v||(B.as="script"),B.crossOrigin="",B.href=m,c&&B.setAttribute("nonce",c),document.head.appendChild(B),v)return new Promise((P,U)=>{B.addEventListener("load",P),B.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return r.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},Rae=(n,e,t)=>{const i=n[e];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((r,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},Ir=n=>typeof n=="string",f3=()=>{let n,e;const t=new Promise((i,r)=>{n=i,e=r});return t.resolve=n,t.reject=e,t},IF=n=>n==null?"":""+n,Pae=(n,e,t)=>{n.forEach(i=>{e[i]&&(t[i]=e[i])})},Lae=/###/g,TF=n=>n&&n.indexOf("###")>-1?n.replace(Lae,"."):n,kF=n=>!n||Ir(n),l4=(n,e,t)=>{const i=Ir(e)?e.split("."):e;let r=0;for(;r<i.length-1;){if(kF(n))return{};const o=TF(i[r]);!n[o]&&t&&(n[o]=new t),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={},++r}return kF(n)?{}:{obj:n,k:TF(i[r])}},DF=(n,e,t)=>{const{obj:i,k:r}=l4(n,e,Object);if(i!==void 0||e.length===1){i[r]=t;return}let o=e[e.length-1],s=e.slice(0,e.length-1),a=l4(n,s,Object);for(;a.obj===void 0&&s.length;)o=`${s[s.length-1]}.${o}`,s=s.slice(0,s.length-1),a=l4(n,s,Object),a?.obj&&typeof a.obj[`${a.k}.${o}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${o}`]=t},Uae=(n,e,t,i)=>{const{obj:r,k:o}=l4(n,e,Object);r[o]=r[o]||[],r[o].push(t)},QS=(n,e)=>{const{obj:t,k:i}=l4(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i]},Kae=(n,e,t)=>{const i=QS(n,t);return i!==void 0?i:QS(e,t)},YH=(n,e,t)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in n?Ir(n[i])||n[i]instanceof String||Ir(e[i])||e[i]instanceof String?t&&(n[i]=e[i]):YH(n[i],e[i],t):n[i]=e[i]);return n},D_=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Fae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const zae=n=>Ir(n)?n.replace(/[&<>"'\/]/g,e=>Fae[e]):n;class jae{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const Nae=[" ",",","?","!",";"],Gae=new jae(20),Wae=(n,e,t)=>{e=e||"",t=t||"";const i=Nae.filter(s=>e.indexOf(s)<0&&t.indexOf(s)<0);if(i.length===0)return!0;const r=Gae.getRegExp(`(${i.map(s=>s==="?"?"\\?":s).join("|")})`);let o=!r.test(n);if(!o){const s=n.indexOf(t);s>0&&!r.test(n.substring(0,s))&&(o=!0)}return o},I9=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const i=e.split(t);let r=n;for(let o=0;o<i.length;){if(!r||typeof r!="object")return;let s,a="";for(let c=o;c<i.length;++c)if(c!==o&&(a+=t),a+=i[c],s=r[a],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&c<i.length-1)continue;o+=c-o+1;break}r=s}return r},U4=n=>n?.replace("_","-"),Qae={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};class qS{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||Qae,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,r){return r&&!this.debug?null:(Ir(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new qS(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new qS(this.logger,e)}}var sg=new qS;class C6{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const r=this.observers[i].get(t)||0;this.observers[i].set(t,r+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([r,o])=>{for(let s=0;s<o;s++)r(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,o])=>{for(let s=0;s<o;s++)r.apply(r,[e,...t])})}}class RF extends C6{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i,r={}){const o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,s=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],i&&(Array.isArray(i)?a.push(...i):Ir(i)&&o?a.push(...i.split(o)):a.push(i)));const c=QS(this.data,a);return!c&&!t&&!i&&e.indexOf(".")>-1&&(e=a[0],t=a[1],i=a.slice(2).join(".")),c||!s||!Ir(i)?c:I9(this.data?.[e]?.[t],i,o)}addResource(e,t,i,r,o={silent:!1}){const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let a=[e,t];i&&(a=a.concat(s?i.split(s):i)),e.indexOf(".")>-1&&(a=e.split("."),r=t,t=a[1]),this.addNamespaces(t),DF(this.data,a,r),o.silent||this.emit("added",e,t,i,r)}addResources(e,t,i,r={silent:!1}){for(const o in i)(Ir(i[o])||Array.isArray(i[o]))&&this.addResource(e,t,o,i[o],{silent:!0});r.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,r,o,s={silent:!1,skipCopy:!1}){let a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),r=i,i=t,t=a[1]),this.addNamespaces(t);let c=QS(this.data,a)||{};s.skipCopy||(i=JSON.parse(JSON.stringify(i))),r?YH(c,i,o):c={...c,...i},DF(this.data,a,c),s.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(r=>t[r]&&Object.keys(t[r]).length>0)}toJSON(){return this.data}}var VH={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,i,r){return n.forEach(o=>{e=this.processors[o]?.process(e,t,i,r)??e}),e}};const $H=Symbol("i18next/PATH_KEY");function qae(){const n=[],e=Object.create(null);let t;return e.get=(i,r)=>(t?.revoke?.(),r===$H?n:(n.push(r),t=Proxy.revocable(i,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function YS(n,e){const{[$H]:t}=n(qae());return t.join(e?.keySeparator??".")}const PF={},MO=n=>!Ir(n)&&typeof n!="boolean"&&typeof n!="number";class VS extends C6{constructor(e,t={}){super(),Pae(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=sg.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const i={...t};if(e==null)return!1;const r=this.resolve(e,i);if(r?.res===void 0)return!1;const o=MO(r.res);return!(i.returnObjects===!1&&o)}extractFromKey(e,t){let i=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const r=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const s=i&&e.indexOf(i)>-1,a=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Wae(e,i,r);if(s&&!a){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:Ir(o)?[o]:o};const d=e.split(i);(i!==r||i===r&&this.options.ns.indexOf(d[0])>-1)&&(o=d.shift()),e=d.join(r)}return{key:e,namespaces:Ir(o)?[o]:o}}translate(e,t,i){let r=typeof t=="object"?{...t}:t;if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";typeof e=="function"&&(e=YS(e,{...this.options,...r})),Array.isArray(e)||(e=[String(e)]);const o=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:a,namespaces:c}=this.extractFromKey(e[e.length-1],r),d=c[c.length-1];let m=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;m===void 0&&(m=":");const v=r.lng||this.language,M=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(v?.toLowerCase()==="cimode")return M?o?{res:`${d}${m}${a}`,usedKey:a,exactUsedKey:a,usedLng:v,usedNS:d,usedParams:this.getUsedParamsDetails(r)}:`${d}${m}${a}`:o?{res:a,usedKey:a,exactUsedKey:a,usedLng:v,usedNS:d,usedParams:this.getUsedParamsDetails(r)}:a;const B=this.resolve(e,r);let P=B?.res;const U=B?.usedKey||a,z=B?.exactUsedKey||a,V=["[object Number]","[object Function]","[object RegExp]"],Z=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,X=!this.i18nFormat||this.i18nFormat.handleAsObject,re=r.count!==void 0&&!Ir(r.count),ie=VS.hasDefaultValue(r),te=re?this.pluralResolver.getSuffix(v,r.count,r):"",q=r.ordinal&&re?this.pluralResolver.getSuffix(v,r.count,{ordinal:!1}):"",le=re&&!r.ordinal&&r.count===0,ce=le&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${te}`]||r[`defaultValue${q}`]||r.defaultValue;let ve=P;X&&!P&&ie&&(ve=ce);const ge=MO(ve),Ee=Object.prototype.toString.apply(ve);if(X&&ve&&ge&&V.indexOf(Ee)<0&&!(Ir(Z)&&Array.isArray(ve))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const xe=this.options.returnedObjectHandler?this.options.returnedObjectHandler(U,ve,{...r,ns:c}):`key '${a} (${this.language})' returned an object instead of string.`;return o?(B.res=xe,B.usedParams=this.getUsedParamsDetails(r),B):xe}if(s){const xe=Array.isArray(ve),Te=xe?[]:{},Fe=xe?z:U;for(const Ie in ve)if(Object.prototype.hasOwnProperty.call(ve,Ie)){const Ye=`${Fe}${s}${Ie}`;ie&&!P?Te[Ie]=this.translate(Ye,{...r,defaultValue:MO(ce)?ce[Ie]:void 0,joinArrays:!1,ns:c}):Te[Ie]=this.translate(Ye,{...r,joinArrays:!1,ns:c}),Te[Ie]===Ye&&(Te[Ie]=ve[Ie])}P=Te}}else if(X&&Ir(Z)&&Array.isArray(P))P=P.join(Z),P&&(P=this.extendTranslation(P,e,r,i));else{let xe=!1,Te=!1;!this.isValidLookup(P)&&ie&&(xe=!0,P=ce),this.isValidLookup(P)||(Te=!0,P=a);const Ie=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Te?void 0:P,Ye=ie&&ce!==P&&this.options.updateMissing;if(Te||xe||Ye){if(this.logger.log(Ye?"updateKey":"missingKey",v,d,a,Ye?ce:P),s){const De=this.resolve(a,{...r,keySeparator:!1});De&&De.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let At=[];const mt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&mt&&mt[0])for(let De=0;De<mt.length;De++)At.push(mt[De]);else this.options.saveMissingTo==="all"?At=this.languageUtils.toResolveHierarchy(r.lng||this.language):At.push(r.lng||this.language);const Ue=(De,Ge,Re)=>{const St=ie&&Re!==P?Re:Ie;this.options.missingKeyHandler?this.options.missingKeyHandler(De,d,Ge,St,Ye,r):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(De,d,Ge,St,Ye,r),this.emit("missingKey",De,d,Ge,P)};this.options.saveMissing&&(this.options.saveMissingPlurals&&re?At.forEach(De=>{const Ge=this.pluralResolver.getSuffixes(De,r);le&&r[`defaultValue${this.options.pluralSeparator}zero`]&&Ge.indexOf(`${this.options.pluralSeparator}zero`)<0&&Ge.push(`${this.options.pluralSeparator}zero`),Ge.forEach(Re=>{Ue([De],a+Re,r[`defaultValue${Re}`]||ce)})}):Ue(At,a,ce))}P=this.extendTranslation(P,e,r,B,i),Te&&P===a&&this.options.appendNamespaceToMissingKey&&(P=`${d}${m}${a}`),(Te||xe)&&this.options.parseMissingKeyHandler&&(P=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}${m}${a}`:a,xe?P:void 0,r))}return o?(B.res=P,B.usedParams=this.getUsedParamsDetails(r),B):P}extendTranslation(e,t,i,r,o){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const c=Ir(e)&&(i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(c){const v=e.match(this.interpolator.nestingRegexp);d=v&&v.length}let m=i.replace&&!Ir(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(m={...this.options.interpolation.defaultVariables,...m}),e=this.interpolator.interpolate(e,m,i.lng||this.language||r.usedLng,i),c){const v=e.match(this.interpolator.nestingRegexp),M=v&&v.length;d<M&&(i.nest=!1)}!i.lng&&r&&r.res&&(i.lng=this.language||r.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,(...v)=>o?.[0]===v[0]&&!i.context?(this.logger.warn(`It seems you are nesting recursively key: ${v[0]} in key: ${t[0]}`),null):this.translate(...v,t),i)),i.interpolation&&this.interpolator.reset()}const s=i.postProcess||this.options.postProcess,a=Ir(s)?[s]:s;return e!=null&&a?.length&&i.applyPostProcessor!==!1&&(e=VH.handle(a,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e,t={}){let i,r,o,s,a;return Ir(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(i))return;const d=this.extractFromKey(c,t),m=d.key;r=m;let v=d.namespaces;this.options.fallbackNS&&(v=v.concat(this.options.fallbackNS));const M=t.count!==void 0&&!Ir(t.count),B=M&&!t.ordinal&&t.count===0,P=t.context!==void 0&&(Ir(t.context)||typeof t.context=="number")&&t.context!=="",U=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);v.forEach(z=>{this.isValidLookup(i)||(a=z,!PF[`${U[0]}-${z}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(a)&&(PF[`${U[0]}-${z}`]=!0,this.logger.warn(`key "${r}" for languages "${U.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),U.forEach(V=>{if(this.isValidLookup(i))return;s=V;const Z=[m];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(Z,m,V,z,t);else{let re;M&&(re=this.pluralResolver.getSuffix(V,t.count,t));const ie=`${this.options.pluralSeparator}zero`,te=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(M&&(t.ordinal&&re.indexOf(te)===0&&Z.push(m+re.replace(te,this.options.pluralSeparator)),Z.push(m+re),B&&Z.push(m+ie)),P){const q=`${m}${this.options.contextSeparator||"_"}${t.context}`;Z.push(q),M&&(t.ordinal&&re.indexOf(te)===0&&Z.push(q+re.replace(te,this.options.pluralSeparator)),Z.push(q+re),B&&Z.push(q+ie))}}let X;for(;X=Z.pop();)this.isValidLookup(i)||(o=X,i=this.getResource(V,z,X,t))}))})}),{res:i,usedKey:r,exactUsedKey:o,usedLng:s,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,i,r={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,i,r):this.resourceStore.getResource(e,t,i,r)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!Ir(e.replace);let r=i?e.replace:e;if(i&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!i){r={...r};for(const o of t)delete r[o]}return r}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,t.length)&&e[i]!==void 0)return!0;return!1}}class LF{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=sg.create("languageUtils")}getScriptPartFromCode(e){if(e=U4(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=U4(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Ir(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(i=>{if(t)return;const r=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(r))&&(t=r)}),!t&&this.options.supportedLngs&&e.forEach(i=>{if(t)return;const r=this.getScriptPartFromCode(i);if(this.isSupportedCode(r))return t=r;const o=this.getLanguagePartFromCode(i);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(s=>{if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&(s.indexOf("-")>0&&o.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===o||s.indexOf(o)===0&&o.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Ir(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),r=[],o=s=>{s&&(this.isSupportedCode(s)?r.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return Ir(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):Ir(e)&&o(this.formatLanguageCode(e)),i.forEach(s=>{r.indexOf(s)<0&&o(this.formatLanguageCode(s))}),r}}const UF={zero:0,one:1,two:2,few:3,many:4,other:5},KF={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Yae{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=sg.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const i=U4(e==="dev"?"en":e),r=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:i,type:r});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let s;try{s=new Intl.PluralRules(i,{type:r})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),KF;if(!e.match(/-|_/))return KF;const c=this.languageUtils.getLanguagePartFromCode(e);s=this.getRule(c,t)}return this.pluralRulesCache[o]=s,s}needsPlural(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,i={}){return this.getSuffixes(e,i).map(r=>`${t}${r}`)}getSuffixes(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?i.resolvedOptions().pluralCategories.sort((r,o)=>UF[r]-UF[o]).map(r=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(e,t,i={}){const r=this.getRule(e,i);return r?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,i))}}const FF=(n,e,t,i=".",r=!0)=>{let o=Kae(n,e,t);return!o&&r&&Ir(t)&&(o=I9(n,t,i),o===void 0&&(o=I9(e,t,i))),o},wO=n=>n.replace(/\$/g,"$$$$");class zF{constructor(e={}){this.logger=sg.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:i,useRawValueToEscape:r,prefix:o,prefixEscaped:s,suffix:a,suffixEscaped:c,formatSeparator:d,unescapeSuffix:m,unescapePrefix:v,nestingPrefix:M,nestingPrefixEscaped:B,nestingSuffix:P,nestingSuffixEscaped:U,nestingOptionsSeparator:z,maxReplaces:V,alwaysFormat:Z}=e.interpolation;this.escape=t!==void 0?t:zae,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=o?D_(o):s||"{{",this.suffix=a?D_(a):c||"}}",this.formatSeparator=d||",",this.unescapePrefix=m?"":v||"-",this.unescapeSuffix=this.unescapePrefix?"":m||"",this.nestingPrefix=M?D_(M):B||D_("$t("),this.nestingSuffix=P?D_(P):U||D_(")"),this.nestingOptionsSeparator=z||",",this.maxReplaces=V||1e3,this.alwaysFormat=Z!==void 0?Z:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,i)=>t?.source===i?(t.lastIndex=0,t):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,i,r){let o,s,a;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=B=>{if(B.indexOf(this.formatSeparator)<0){const V=FF(t,c,B,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(V,void 0,i,{...r,...t,interpolationkey:B}):V}const P=B.split(this.formatSeparator),U=P.shift().trim(),z=P.join(this.formatSeparator).trim();return this.format(FF(t,c,U,this.options.keySeparator,this.options.ignoreJSONStructure),z,i,{...r,...t,interpolationkey:U})};this.resetRegExp();const m=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,v=r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:B=>wO(B)},{regex:this.regexp,safeValue:B=>this.escapeValue?wO(this.escape(B)):wO(B)}].forEach(B=>{for(a=0;o=B.regex.exec(e);){const P=o[1].trim();if(s=d(P),s===void 0)if(typeof m=="function"){const z=m(e,o,r);s=Ir(z)?z:""}else if(r&&Object.prototype.hasOwnProperty.call(r,P))s="";else if(v){s=o[0];continue}else this.logger.warn(`missed to pass in variable ${P} for interpolating ${e}`),s="";else!Ir(s)&&!this.useRawValueToEscape&&(s=IF(s));const U=B.safeValue(s);if(e=e.replace(o[0],U),v?(B.regex.lastIndex+=s.length,B.regex.lastIndex-=o[0].length):B.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t,i={}){let r,o,s;const a=(c,d)=>{const m=this.nestingOptionsSeparator;if(c.indexOf(m)<0)return c;const v=c.split(new RegExp(`${m}[ ]*{`));let M=`{${v[1]}`;c=v[0],M=this.interpolate(M,s);const B=M.match(/'/g),P=M.match(/"/g);((B?.length??0)%2===0&&!P||P.length%2!==0)&&(M=M.replace(/'/g,'"'));try{s=JSON.parse(M),d&&(s={...d,...s})}catch(U){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,U),`${c}${m}${M}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,c};for(;r=this.nestingRegexp.exec(e);){let c=[];s={...i},s=s.replace&&!Ir(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;const d=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(d!==-1&&(c=r[1].slice(d).split(this.formatSeparator).map(m=>m.trim()).filter(Boolean),r[1]=r[1].slice(0,d)),o=t(a.call(this,r[1].trim(),s),s),o&&r[0]===e&&!Ir(o))return o;Ir(o)||(o=IF(o)),o||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),o=""),c.length&&(o=c.reduce((m,v)=>this.format(m,v,i.lng,{...i,interpolationkey:r[1].trim()}),o.trim())),e=e.replace(r[0],o),this.regexp.lastIndex=0}return e}}const Vae=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const i=n.split("(");e=i[0].toLowerCase().trim();const r=i[1].substring(0,i[1].length-1);e==="currency"&&r.indexOf(":")<0?t.currency||(t.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?t.range||(t.range=r.trim()):r.split(";").forEach(s=>{if(s){const[a,...c]=s.split(":"),d=c.join(":").trim().replace(/^'+|'+$/g,""),m=a.trim();t[m]||(t[m]=d),d==="false"&&(t[m]=!1),d==="true"&&(t[m]=!0),isNaN(d)||(t[m]=parseInt(d,10))}})}return{formatName:e,formatOptions:t}},jF=n=>{const e={};return(t,i,r)=>{let o=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(o={...o,[r.interpolationkey]:void 0});const s=i+JSON.stringify(o);let a=e[s];return a||(a=n(U4(i),r),e[s]=a),a(t)}},$ae=n=>(e,t,i)=>n(U4(t),i)(e);class Hae{constructor(e={}){this.logger=sg.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const i=t.cacheInBuiltFormats?jF:$ae;this.formats={number:i((r,o)=>{const s=new Intl.NumberFormat(r,{...o});return a=>s.format(a)}),currency:i((r,o)=>{const s=new Intl.NumberFormat(r,{...o,style:"currency"});return a=>s.format(a)}),datetime:i((r,o)=>{const s=new Intl.DateTimeFormat(r,{...o});return a=>s.format(a)}),relativetime:i((r,o)=>{const s=new Intl.RelativeTimeFormat(r,{...o});return a=>s.format(a,o.range||"day")}),list:i((r,o)=>{const s=new Intl.ListFormat(r,{...o});return a=>s.format(a)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=jF(t)}format(e,t,i,r={}){const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(a=>a.indexOf(")")>-1)){const a=o.findIndex(c=>c.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,a)].join(this.formatSeparator)}return o.reduce((a,c)=>{const{formatName:d,formatOptions:m}=Vae(c);if(this.formats[d]){let v=a;try{const M=r?.formatParams?.[r.interpolationkey]||{},B=M.locale||M.lng||r.locale||r.lng||i;v=this.formats[d](a,B,{...m,...r,...M})}catch(M){this.logger.warn(M)}return v}else this.logger.warn(`there was no format function for ${d}`);return a},e)}}const Zae=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class Xae extends C6{constructor(e,t,i,r={}){super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=r,this.logger=sg.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(i,r.backend,r)}queueLoad(e,t,i,r){const o={},s={},a={},c={};return e.forEach(d=>{let m=!0;t.forEach(v=>{const M=`${d}|${v}`;!i.reload&&this.store.hasResourceBundle(d,v)?this.state[M]=2:this.state[M]<0||(this.state[M]===1?s[M]===void 0&&(s[M]=!0):(this.state[M]=1,m=!1,s[M]===void 0&&(s[M]=!0),o[M]===void 0&&(o[M]=!0),c[v]===void 0&&(c[v]=!0)))}),m||(a[d]=!0)}),(Object.keys(o).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(o),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(c)}}loaded(e,t,i){const r=e.split("|"),o=r[0],s=r[1];t&&this.emit("failedLoading",o,s,t),!t&&i&&this.store.addResourceBundle(o,s,i,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&i&&(this.state[e]=0);const a={};this.queue.forEach(c=>{Uae(c.loaded,[o],s),Zae(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(d=>{a[d]||(a[d]={});const m=c.loaded[d];m.length&&m.forEach(v=>{a[d][v]===void 0&&(a[d][v]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(c=>!c.done)}read(e,t,i,r=0,o=this.retryTimeout,s){if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:i,tried:r,wait:o,callback:s});return}this.readingCalls++;const a=(d,m)=>{if(this.readingCalls--,this.waitingReads.length>0){const v=this.waitingReads.shift();this.read(v.lng,v.ns,v.fcName,v.tried,v.wait,v.callback)}if(d&&m&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,i,r+1,o*2,s)},o);return}s(d,m)},c=this.backend[i].bind(this.backend);if(c.length===2){try{const d=c(e,t);d&&typeof d.then=="function"?d.then(m=>a(null,m)).catch(a):a(null,d)}catch(d){a(d)}return}return c(e,t,a)}prepareLoading(e,t,i={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();Ir(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Ir(t)&&(t=[t]);const o=this.queueLoad(e,t,i,r);if(!o.toLoad.length)return o.pending.length||r(),null;o.toLoad.forEach(s=>{this.loadOne(s)})}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e,t=""){const i=e.split("|"),r=i[0],o=i[1];this.read(r,o,"read",void 0,void 0,(s,a)=>{s&&this.logger.warn(`${t}loading namespace ${o} for language ${r} failed`,s),!s&&a&&this.logger.log(`${t}loaded namespace ${o} for language ${r}`,a),this.loaded(e,s,a)})}saveMissing(e,t,i,r,o,s={},a=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend?.create){const c={...s,isUpdate:o},d=this.backend.create.bind(this.backend);if(d.length<6)try{let m;d.length===5?m=d(e,t,i,r,c):m=d(e,t,i,r),m&&typeof m.then=="function"?m.then(v=>a(null,v)).catch(a):a(null,m)}catch(m){a(m)}else d(e,t,i,r,a,c)}!e||!e[0]||this.store.addResource(e[0],t,i,r)}}}const NF=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Ir(n[1])&&(e.defaultValue=n[1]),Ir(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(i=>{e[i]=t[i]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),GF=n=>(Ir(n.ns)&&(n.ns=[n.ns]),Ir(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Ir(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),WM=()=>{},Jae=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class u4 extends C6{constructor(e={},t){if(super(),this.options=GF(e),this.services={},this.logger=sg,this.modules={external:[]},Jae(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Ir(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const i=NF();this.options={...i,...this.options,...GF(e)},this.options.interpolation={...i.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=i.overloadTranslationOptionHandler);const r=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?sg.init(r(this.modules.logger),this.options):sg.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=Hae;const m=new LF(this.options);this.store=new RF(this.options.resources,this.options);const v=this.services;v.logger=sg,v.resourceStore=this.store,v.languageUtils=m,v.pluralResolver=new Yae(m,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),d&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(v.formatter=r(d),v.formatter.init&&v.formatter.init(v,this.options),this.options.interpolation.format=v.formatter.format.bind(v.formatter)),v.interpolator=new zF(this.options),v.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},v.backendConnector=new Xae(r(this.modules.backend),v.resourceStore,v,this.options),v.backendConnector.on("*",(B,...P)=>{this.emit(B,...P)}),this.modules.languageDetector&&(v.languageDetector=r(this.modules.languageDetector),v.languageDetector.init&&v.languageDetector.init(v,this.options.detection,this.options)),this.modules.i18nFormat&&(v.i18nFormat=r(this.modules.i18nFormat),v.i18nFormat.init&&v.i18nFormat.init(this)),this.translator=new VS(this.services,this.options),this.translator.on("*",(B,...P)=>{this.emit(B,...P)}),this.modules.external.forEach(B=>{B.init&&B.init(this)})}if(this.format=this.options.interpolation.format,t||(t=WM),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=(...m)=>this.store[d](...m)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=(...m)=>(this.store[d](...m),this)});const a=f3(),c=()=>{const d=(m,v)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(v),t(m,v)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),a}loadResources(e,t=WM){let i=t;const r=Ir(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(r?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const o=[],s=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(d=>{d!=="cimode"&&o.indexOf(d)<0&&o.push(d)})};r?s(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>s(c)),this.options.preload?.forEach?.(a=>s(a)),this.services.backendConnector.load(o,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(a)})}else i(null)}reloadResources(e,t,i){const r=f3();return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=WM),this.services.backendConnector.reload(e,t,o=>{r.resolve(),i(o)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&VH.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const i=this.languages[t];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const i=f3();this.emit("languageChanging",e);const r=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},o=(a,c)=>{c?this.isLanguageChangingTo===e&&(r(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve((...d)=>this.t(...d)),t&&t(a,(...d)=>this.t(...d))},s=a=>{!e&&!a&&this.services.languageDetector&&(a=[]);const c=Ir(a)?a:a&&a[0],d=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(Ir(a)?[a]:a);d&&(this.language||r(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector?.cacheUserLanguage?.(d)),this.loadResources(d,m=>{o(m,d)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),i}getFixedT(e,t,i){const r=(o,s,...a)=>{let c;typeof s!="object"?c=this.options.overloadTranslationOptionHandler([o,s].concat(a)):c={...s},c.lng=c.lng||r.lng,c.lngs=c.lngs||r.lngs,c.ns=c.ns||r.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||i||r.keyPrefix);const d=this.options.keySeparator||".";let m;return c.keyPrefix&&Array.isArray(o)?m=o.map(v=>(typeof v=="function"&&(v=YS(v,{...this.options,...s})),`${c.keyPrefix}${d}${v}`)):(typeof o=="function"&&(o=YS(o,{...this.options,...s})),m=c.keyPrefix?`${c.keyPrefix}${d}${o}`:o),this.t(m,c)};return Ir(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=i,r}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const s=(a,c)=>{const d=this.services.backendConnector.state[`${a}|${c}`];return d===-1||d===0||d===2};if(t.precheck){const a=t.precheck(this,s);if(a!==void 0)return a}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(i,e)&&(!r||s(o,e)))}loadNamespaces(e,t){const i=f3();return this.options.ns?(Ir(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{i.resolve(),t&&t(r)}),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=f3();Ir(e)&&(e=[e]);const r=this.options.preload||[],o=e.filter(s=>r.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return o.length?(this.options.preload=r.concat(o),this.loadResources(s=>{i.resolve(),t&&t(s)}),i):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const r=new Intl.Locale(e);if(r&&r.getTextInfo){const o=r.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services?.languageUtils||new LF(NF());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const i=new u4(e,t);return i.createInstance=u4.createInstance,i}cloneInstance(e={},t=WM){const i=e.forkResourceStore;i&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},o=new u4(r);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(a=>{o[a]=this[a]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},i){const a=Object.keys(this.store.data).reduce((c,d)=>(c[d]={...this.store.data[d]},c[d]=Object.keys(c[d]).reduce((m,v)=>(m[v]={...c[d][v]},m),c[d]),c),{});o.store=new RF(a,r),o.services.resourceStore=o.store}return e.interpolation&&(o.services.interpolator=new zF(r)),o.translator=new VS(o.services,r),o.translator.on("*",(a,...c)=>{o.emit(a,...c)}),o.init(r,t),o.translator.options=r,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ZA=u4.createInstance();ZA.createInstance;ZA.dir;ZA.init;ZA.loadResources;ZA.reloadResources;ZA.use;ZA.changeLanguage;ZA.getFixedT;ZA.t;ZA.exists;ZA.setDefaultNamespace;ZA.hasLoadedNamespace;ZA.loadNamespaces;ZA.loadLanguages;const{slice:ele,forEach:tle}=[];function nle(n){return tle.call(ele.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}function ile(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(n))}const WF=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,rle=function(n,e){const i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},r=encodeURIComponent(e);let o=`${n}=${r}`;if(i.maxAge>0){const s=i.maxAge-0;if(Number.isNaN(s))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(s)}`}if(i.domain){if(!WF.test(i.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${i.domain}`}if(i.path){if(!WF.test(i.path))throw new TypeError("option path is invalid");o+=`; Path=${i.path}`}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${i.expires.toUTCString()}`}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i.partitioned&&(o+="; Partitioned"),o},QF={create(n,e,t,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+t*60*1e3)),i&&(r.domain=i),document.cookie=rle(n,e,r)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let i=0;i<t.length;i++){let r=t[i];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return r.substring(e.length,r.length)}return null},remove(n,e){this.create(n,"",-1,e)}};var ole={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return QF.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:i,cookieDomain:r,cookieOptions:o}=e;t&&typeof document<"u"&&QF.create(t,n,i,r,o)}},sle={name:"querystring",lookup(n){let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const o=i.substring(1).split("&");for(let s=0;s<o.length;s++){const a=o[s].indexOf("=");a>0&&o[s].substring(0,a)===e&&(t=o[s].substring(a+1))}}return t}},ale={name:"hash",lookup(n){let{lookupHash:e,lookupFromHashIndex:t}=n,i;if(typeof window<"u"){const{hash:r}=window.location;if(r&&r.length>2){const o=r.substring(1);if(e){const s=o.split("&");for(let a=0;a<s.length;a++){const c=s[a].indexOf("=");c>0&&s[a].substring(0,c)===e&&(i=s[a].substring(c+1))}}if(i)return i;if(!i&&t>-1){const s=r.match(/\/([a-zA-Z-]*)/g);return Array.isArray(s)?s[typeof t=="number"?t:0]?.replace("/",""):void 0}}}return i}};let R_=null;const qF=()=>{if(R_!==null)return R_;try{if(R_=typeof window<"u"&&window.localStorage!==null,!R_)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{R_=!1}return R_};var lle={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&qF())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&qF()&&window.localStorage.setItem(t,n)}};let P_=null;const YF=()=>{if(P_!==null)return P_;try{if(P_=typeof window<"u"&&window.sessionStorage!==null,!P_)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{P_=!1}return P_};var ule={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&YF())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&YF()&&window.sessionStorage.setItem(t,n)}},cle={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:i,language:r}=navigator;if(t)for(let o=0;o<t.length;o++)e.push(t[o]);i&&e.push(i),r&&e.push(r)}return e.length>0?e:void 0}},Ale={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const i=e||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(t=i.getAttribute("lang")),t}},hle={name:"path",lookup(n){let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?t[typeof e=="number"?e:0]?.replace("/",""):void 0}},dle={name:"subdomain",lookup(n){let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,i=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(i)return i[t]}};let HH=!1;try{document.cookie,HH=!0}catch{}const ZH=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];HH||ZH.splice(1,1);const fle=()=>({order:ZH,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class XH{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=nle(t,this.options||{},fle()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=r=>r.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(ole),this.addDetector(sle),this.addDetector(lle),this.addDetector(ule),this.addDetector(cle),this.addDetector(Ale),this.addDetector(hle),this.addDetector(dle),this.addDetector(ale)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(i=>{if(this.detectors[i]){let r=this.detectors[i].lookup(this.options);r&&typeof r=="string"&&(r=[r]),r&&(t=t.concat(r))}}),t=t.filter(i=>i!=null&&!ile(i)).map(i=>this.options.convertDetectedLanguage(i)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(i=>{this.detectors[i]&&this.detectors[i].cacheUserLanguage(e,this.options)}))}}XH.type="languageDetector";var ple=function(e){return{type:"backend",init:function(i,r,o){},read:function(i,r,o){if(typeof e=="function"){if(e.length<3){try{var s=e(i,r);s&&typeof s.then=="function"?s.then(function(a){return o(null,a&&a.default||a)}).catch(o):o(null,s)}catch(a){o(a)}return}e(i,r,o);return}o(null,e&&e[i]&&e[i][r])}}},SO,VF;function mle(){return VF||(VF=1,SO={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),SO}var gle=mle();const yle=vu(gle);var vle=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function $F(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(yle[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var i=n.indexOf("-->");return{type:"comment",comment:i!==-1?n.slice(4,i):""}}for(var r=new RegExp(vle),o=null;(o=r.exec(n))!==null;)if(o[0].trim())if(o[1]){var s=o[1].trim(),a=[s,""];s.indexOf("=")>-1&&(a=s.split("=")),e.attrs[a[0]]=a[1],r.lastIndex--}else o[2]&&(e.attrs[o[2]]=o[3].trim().substring(1,o[3].length-1));return e}var ble=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,Cle=/^\s*$/,_le=Object.create(null);function JH(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?(function(t){var i=[];for(var r in t)i.push(r+'="'+t[r]+'"');return i.length?" "+i.join(" "):""})(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(JH,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var xle={parse:function(n,e){e||(e={}),e.components||(e.components=_le);var t,i=[],r=[],o=-1,s=!1;if(n.indexOf("<")!==0){var a=n.indexOf("<");i.push({type:"text",content:a===-1?n:n.substring(0,a)})}return n.replace(ble,function(c,d){if(s){if(c!=="</"+t.name+">")return;s=!1}var m,v=c.charAt(1)!=="/",M=c.startsWith("<!--"),B=d+c.length,P=n.charAt(B);if(M){var U=$F(c);return o<0?(i.push(U),i):((m=r[o]).children.push(U),i)}if(v&&(o++,(t=$F(c)).type==="tag"&&e.components[t.name]&&(t.type="component",s=!0),t.voidElement||s||!P||P==="<"||t.children.push({type:"text",content:n.slice(B,n.indexOf("<",B))}),o===0&&i.push(t),(m=r[o-1])&&m.children.push(t),r[o]=t),(!v||t.voidElement)&&(o>-1&&(t.voidElement||t.name===c.slice(2,-1))&&(o--,t=o===-1?i:r[o]),!s&&P!=="<"&&P)){m=o===-1?i:r[o].children;var z=n.indexOf("<",B),V=n.slice(B,z===-1?void 0:z);Cle.test(V)&&(V=" "),(z>-1&&o+m.length>=0||V!==" ")&&m.push({type:"text",content:V})}}),i},stringify:function(n){return n.reduce(function(e,t){return e+JH("",t)},"")}};const lS=(n,e,t,i)=>{const r=[t,{code:e,...i||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(r,"warn","react-i18next::",!0);xf(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...r):console?.warn&&console.warn(...r)},HF={},_6=(n,e,t,i)=>{xf(t)&&HF[t]||(xf(t)&&(HF[t]=new Date),lS(n,e,t,i))},eZ=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},T9=(n,e,t)=>{n.loadNamespaces(e,eZ(n,t))},ZF=(n,e,t,i)=>{if(xf(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return T9(n,t,i);t.forEach(r=>{n.options.ns.indexOf(r)<0&&n.options.ns.push(r)}),n.loadLanguages(e,eZ(n,i))},Mle=(n,e,t={})=>!e.languages||!e.languages.length?(_6(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(i,r)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!r(i.isLanguageChangingTo,n))return!1}}),wle=n=>n.displayName||n.name||(xf(n)&&n.length>0?n:"Unknown"),xf=n=>typeof n=="string",cv=n=>typeof n=="object"&&n!==null,Sle=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Ele={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Ble=n=>Ele[n],Ole=n=>n.replace(Sle,Ble);let k9={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Ole};const Ile=(n={})=>{k9={...k9,...n}},tZ=()=>k9;let nZ;const Tle=n=>{nZ=n},bP=()=>nZ,EO=(n,e)=>{if(!n)return!1;const t=n.props?.children??n.children;return e?t.length>0:!!t},BO=n=>{if(!n)return[];const e=n.props?.children??n.children;return n.props?.i18nIsDynamicList?Mx(e):e},kle=n=>Array.isArray(n)&&n.every(wt.isValidElement),Mx=n=>Array.isArray(n)?n:[n],Dle=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},iZ=(n,e,t,i)=>{if(!n)return"";let r="";const o=Mx(n),s=e?.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return o.forEach((a,c)=>{if(xf(a)){r+=`${a}`;return}if(wt.isValidElement(a)){const{props:d,type:m}=a,v=Object.keys(d).length,M=s.indexOf(m)>-1,B=d.children;if(!B&&M&&!v){r+=`<${m}/>`;return}if(!B&&(!M||v)||d.i18nIsDynamicList){r+=`<${c}></${c}>`;return}if(M&&v===1&&xf(B)){r+=`<${m}>${B}</${m}>`;return}const P=iZ(B,e,t,i);r+=`<${c}>${P}</${c}>`;return}if(a===null){lS(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:i});return}if(cv(a)){const{format:d,...m}=a,v=Object.keys(m);if(v.length===1){const M=d?`${v[0]}, ${d}`:v[0];r+=`{{${M}}}`;return}lS(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:i,child:a});return}lS(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:i,child:a})}),r},Rle=(n,e=[],t={})=>{if(!n)return n;const i=Object.keys(t),r=[...e,...i];let o="",s=0;for(;s<n.length;)if(n[s]==="<"){let a=!1;const c=n.slice(s).match(/^<\/(\d+|[a-zA-Z][a-zA-Z0-9-]*)>/);if(c){const d=c[1];(/^\d+$/.test(d)||r.includes(d))&&(a=!0,o+=c[0],s+=c[0].length)}if(!a){const d=n.slice(s).match(/^<(\d+|[a-zA-Z][a-zA-Z0-9-]*)(\s+[\w-]+(?:=(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s*(\/)?>/);if(d){const m=d[1];(/^\d+$/.test(m)||r.includes(m))&&(a=!0,o+=d[0],s+=d[0].length)}}a||(o+="&lt;",s+=1)}else o+=n[s],s+=1;return o},Ple=(n,e,t,i,r,o,s)=>{if(t==="")return[];const a=r.transKeepBasicHtmlNodesFor||[],c=t&&new RegExp(a.map(Z=>`<${Z}`).join("|")).test(t);if(!n&&!e&&!c&&!s)return[t];const d=e??{},m=Z=>{Mx(Z).forEach(re=>{xf(re)||(EO(re)?m(BO(re)):cv(re)&&!wt.isValidElement(re)&&Object.assign(d,re))})};m(n);const v=Rle(t,a,d),M=xle.parse(`<0>${v}</0>`),B={...d,...o},P=(Z,X,re)=>{const ie=BO(Z),te=z(ie,X.children,re);return kle(ie)&&te.length===0||Z.props?.i18nIsDynamicList?ie:te},U=(Z,X,re,ie,te)=>{Z.dummy?(Z.children=X,re.push(wt.cloneElement(Z,{key:ie},te?void 0:X))):re.push(...wt.Children.map([Z],q=>{const le="data-i18n-is-dynamic-list",ce={key:ie,[le]:void 0};return q&&q.props&&Object.keys(q.props).forEach(ve=>{ve==="ref"||ve==="children"||ve==="i18nIsDynamicList"||ve===le||(ce[ve]=q.props[ve])}),wt.cloneElement(q,ce,te?null:X)}))},z=(Z,X,re)=>{const ie=Mx(Z);return Mx(X).reduce((q,le,ce)=>{const ve=le.children?.[0]?.content&&i.services.interpolator.interpolate(le.children[0].content,B,i.language);if(le.type==="tag"){let ge=ie[parseInt(le.name,10)];!ge&&e&&(ge=e[le.name]),re.length===1&&!ge&&(ge=re[0][le.name]),ge||(ge={});const Ee=Object.keys(le.attrs).length!==0?Dle({props:le.attrs},ge):ge,xe=wt.isValidElement(Ee),Te=xe&&EO(le,!0)&&!le.voidElement,Fe=c&&cv(Ee)&&Ee.dummy&&!xe,Ie=cv(e)&&Object.hasOwnProperty.call(e,le.name);if(xf(Ee)){const Ye=i.services.interpolator.interpolate(Ee,B,i.language);q.push(Ye)}else if(EO(Ee)||Te){const Ye=P(Ee,le,re);U(Ee,Ye,q,ce)}else if(Fe){const Ye=z(ie,le.children,re);U(Ee,Ye,q,ce)}else if(Number.isNaN(parseFloat(le.name)))if(Ie){const Ye=P(Ee,le,re);U(Ee,Ye,q,ce,le.voidElement)}else if(r.transSupportBasicHtmlNodes&&a.indexOf(le.name)>-1)if(le.voidElement)q.push(wt.createElement(le.name,{key:`${le.name}-${ce}`}));else{const Ye=z(ie,le.children,re);q.push(wt.createElement(le.name,{key:`${le.name}-${ce}`},Ye))}else if(le.voidElement)q.push(`<${le.name} />`);else{const Ye=z(ie,le.children,re);q.push(`<${le.name}>${Ye}</${le.name}>`)}else if(cv(Ee)&&!xe){const Ye=le.children[0]?ve:null;Ye&&q.push(Ye)}else U(Ee,ve,q,ce,le.children.length!==1||!ve)}else if(le.type==="text"){const ge=r.transWrapTextNodes,Ee=s?r.unescape(i.services.interpolator.interpolate(le.content,B,i.language)):i.services.interpolator.interpolate(le.content,B,i.language);ge?q.push(wt.createElement(ge,{key:`${le.name}-${ce}`},Ee)):q.push(Ee)}return q},[])},V=z([{dummy:!0,children:n||[]}],M,Mx(n||[]));return BO(V[0])},rZ=(n,e,t)=>{const i=n.key||e,r=wt.cloneElement(n,{key:i});if(!r.props||!r.props.children||t.indexOf(`${e}/>`)<0&&t.indexOf(`${e} />`)<0)return r;function o(){return wt.createElement(wt.Fragment,null,r)}return wt.createElement(o,{key:i})},Lle=(n,e)=>n.map((t,i)=>rZ(t,i,e)),Ule=(n,e)=>{const t={};return Object.keys(n).forEach(i=>{Object.assign(t,{[i]:rZ(n[i],i,e)})}),t},Kle=(n,e,t,i)=>n?Array.isArray(n)?Lle(n,e):cv(n)?Ule(n,e):(_6(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:i}),null):null,Fle=n=>!cv(n)||Array.isArray(n)?!1:Object.keys(n).reduce((e,t)=>e&&Number.isNaN(Number.parseFloat(t)),!0);function zle({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o={},values:s,defaults:a,components:c,ns:d,i18n:m,t:v,shouldUnescape:M,...B}){const P=m||bP();if(!P)return _6(P,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:i}),n;const U=v||P.t.bind(P)||(Te=>Te),z={...tZ(),...P.options?.react};let V=d||U.ns||P.options?.defaultNS;V=xf(V)?[V]:V||["translation"];const Z=iZ(n,z,P,i),X=a||o?.defaultValue||Z||z.transEmptyNodeValue||(typeof i=="function"?YS(i):i),{hashTransKey:re}=z,ie=i||(re?re(Z||X):Z||X);P.options?.interpolation?.defaultVariables&&(s=s&&Object.keys(s).length>0?{...s,...P.options.interpolation.defaultVariables}:{...P.options.interpolation.defaultVariables});const te=s||e!==void 0&&!P.options?.interpolation?.alwaysFormat||!n?o.interpolation:{interpolation:{...o.interpolation,prefix:"#$?",suffix:"?$#"}},q={...o,context:r||o.context,count:e,...s,...te,defaultValue:X,ns:V};let le=ie?U(ie,q):X;le===ie&&X&&(le=X);const ce=Kle(c,le,P,i);let ve=ce||n,ge=null;Fle(ce)&&(ge=ce,ve=n);const Ee=Ple(ve,ge,le,P,z,q,M),xe=t??z.defaultTransParent;return xe?wt.createElement(xe,B,Ee):Ee}const jle={type:"3rdParty",init(n){Ile(n.options.react),Tle(n)}},oZ=wt.createContext();class Nle{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function hC({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o={},values:s,defaults:a,components:c,ns:d,i18n:m,t:v,shouldUnescape:M,...B}){const{i18n:P,defaultNS:U}=wt.useContext(oZ)||{},z=m||P||bP(),V=v||z?.t.bind(z);return zle({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o,values:s,defaults:a,components:c,ns:d||V?.ns||U||z?.options?.defaultNS,i18n:z,t:v,shouldUnescape:M,...B})}var OO={exports:{}},IO={};var XF;function Gle(){if(XF)return IO;XF=1;var n=_a();function e(v,M){return v===M&&(v!==0||1/v===1/M)||v!==v&&M!==M}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,o=n.useLayoutEffect,s=n.useDebugValue;function a(v,M){var B=M(),P=i({inst:{value:B,getSnapshot:M}}),U=P[0].inst,z=P[1];return o(function(){U.value=B,U.getSnapshot=M,c(U)&&z({inst:U})},[v,B,M]),r(function(){return c(U)&&z({inst:U}),v(function(){c(U)&&z({inst:U})})},[v]),s(B),B}function c(v){var M=v.getSnapshot;v=v.value;try{var B=M();return!t(v,B)}catch{return!0}}function d(v,M){return M()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:a;return IO.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,IO}var JF;function Wle(){return JF||(JF=1,OO.exports=Gle()),OO.exports}var Qle=Wle();const qle=(n,e)=>xf(e)?e:cv(e)&&xf(e.defaultValue)?e.defaultValue:Array.isArray(n)?n[n.length-1]:n,Yle={t:qle,ready:!1},Vle=()=>()=>{},$le=(n,e={})=>{const{i18n:t}=e,{i18n:i,defaultNS:r}=wt.useContext(oZ)||{},o=t||i||bP();o&&!o.reportNamespaces&&(o.reportNamespaces=new Nle),o||_6(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const s=wt.useMemo(()=>({...tZ(),...o?.options?.react,...e}),[o,e]),{useSuspense:a,keyPrefix:c}=s,d=r||o?.options?.defaultNS,m=xf(d)?[d]:d||["translation"],v=wt.useMemo(()=>m,m);o?.reportNamespaces?.addUsedNamespaces?.(v);const M=wt.useRef(0),B=wt.useCallback(ce=>{if(!o)return Vle;const{bindI18n:ve,bindI18nStore:ge}=s,Ee=()=>{M.current+=1,ce()};return ve&&o.on(ve,Ee),ge&&o.store.on(ge,Ee),()=>{ve&&ve.split(" ").forEach(xe=>o.off(xe,Ee)),ge&&ge.split(" ").forEach(xe=>o.store.off(xe,Ee))}},[o,s]),P=wt.useRef(),U=wt.useCallback(()=>{if(!o)return Yle;const ce=!!(o.isInitialized||o.initializedStoreOnce)&&v.every(Fe=>Mle(Fe,o,s)),ve=e.lng||o.language,ge=M.current,Ee=P.current;if(Ee&&Ee.ready===ce&&Ee.lng===ve&&Ee.keyPrefix===c&&Ee.revision===ge)return Ee;const Te={t:o.getFixedT(ve,s.nsMode==="fallback"?v:v[0],c),ready:ce,lng:ve,keyPrefix:c,revision:ge};return P.current=Te,Te},[o,v,c,s,e.lng]),[z,V]=wt.useState(0),{t:Z,ready:X}=Qle.useSyncExternalStore(B,U,U);wt.useEffect(()=>{if(o&&!X&&!a){const ce=()=>V(ve=>ve+1);e.lng?ZF(o,e.lng,v,ce):T9(o,v,ce)}},[o,e.lng,v,X,a,z]);const re=o||{},ie=wt.useRef(null),te=wt.useRef(),q=ce=>{const ve=Object.getOwnPropertyDescriptors(ce);ve.__original&&delete ve.__original;const ge=Object.create(Object.getPrototypeOf(ce),ve);if(!Object.prototype.hasOwnProperty.call(ge,"__original"))try{Object.defineProperty(ge,"__original",{value:ce,writable:!1,enumerable:!1,configurable:!1})}catch{}return ge},le=wt.useMemo(()=>{const ce=re,ve=ce?.language;let ge=ce;ce&&(ie.current&&ie.current.__original===ce?te.current!==ve?(ge=q(ce),ie.current=ge,te.current=ve):ge=ie.current:(ge=q(ce),ie.current=ge,te.current=ve));const Ee=[Z,ge,X];return Ee.t=Z,Ee.i18n=ge,Ee.ready=X,Ee},[Z,re,X,re.resolvedLanguage,re.language,re.languages]);if(o&&a&&!X)throw new Promise(ce=>{const ve=()=>ce();e.lng?ZF(o,e.lng,v,ve):T9(o,v,ve)});return le},Do=(n,e={})=>function(i){function r({forwardedRef:s,...a}){const[c,d,m]=$le(n,{...a,keyPrefix:e.keyPrefix}),v={...a,t:c,i18n:d,tReady:m};return e.withRef&&s?v.ref=s:!e.withRef&&s&&(v.forwardedRef=s),wt.createElement(i,v)}r.displayName=`withI18nextTranslation(${wle(i)})`,r.WrappedComponent=i;const o=(s,a)=>wt.createElement(r,Object.assign({},s,{forwardedRef:a}));return e.withRef?wt.forwardRef(o):r};function Ps(){var n="/home/runner/work/maputnik/maputnik/src/i18n.ts",e="9743b658c81cabee1d947d94611cafb3cd7a6a97",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/i18n.ts",statementMap:{0:{start:{line:5,column:34},end:{line:14,column:1}},1:{start:{line:15,column:0},end:{line:41,column:3}},2:{start:{line:17,column:4},end:{line:19,column:5}},3:{start:{line:18,column:6},end:{line:18,column:16}},4:{start:{line:20,column:4},end:{line:20,column:672}},5:{start:{line:20,column:119},end:{line:20,column:158}},6:{start:{line:20,column:198},end:{line:20,column:237}},7:{start:{line:20,column:277},end:{line:20,column:316}},8:{start:{line:20,column:356},end:{line:20,column:395}},9:{start:{line:20,column:435},end:{line:20,column:474}},10:{start:{line:20,column:514},end:{line:20,column:553}},11:{start:{line:20,column:593},end:{line:20,column:632}},12:{start:{line:36,column:4},end:{line:38,column:5}},13:{start:{line:37,column:6},end:{line:37,column:13}},14:{start:{line:39,column:4},end:{line:39,column:77}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:16,column:21},end:{line:16,column:22}},loc:{start:{line:16,column:35},end:{line:21,column:3}},line:16},1:{name:"(anonymous_1)",decl:{start:{line:20,column:113},end:{line:20,column:114}},loc:{start:{line:20,column:119},end:{line:20,column:158}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:20,column:192},end:{line:20,column:193}},loc:{start:{line:20,column:198},end:{line:20,column:237}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:20,column:271},end:{line:20,column:272}},loc:{start:{line:20,column:277},end:{line:20,column:316}},line:20},4:{name:"(anonymous_4)",decl:{start:{line:20,column:350},end:{line:20,column:351}},loc:{start:{line:20,column:356},end:{line:20,column:395}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:20,column:429},end:{line:20,column:430}},loc:{start:{line:20,column:435},end:{line:20,column:474}},line:20},6:{name:"(anonymous_6)",decl:{start:{line:20,column:508},end:{line:20,column:509}},loc:{start:{line:20,column:514},end:{line:20,column:553}},line:20},7:{name:"(anonymous_7)",decl:{start:{line:20,column:587},end:{line:20,column:588}},loc:{start:{line:20,column:593},end:{line:20,column:632}},line:20},8:{name:"(anonymous_8)",decl:{start:{line:35,column:21},end:{line:35,column:22}},loc:{start:{line:35,column:41},end:{line:40,column:3}},line:35}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:19,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:36,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:38,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/i18n.ts"],names:[],mappings:"AAAA,MAAA,CAAA,oCAAA,CAAA,IAAA,CAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA,CAAA,MAAA,CAAO,IAAA,CAAA,IAAA,CAAU,CAAA,OAAA,CAAA;AACjB,MAAA,CAAO,QAAA,CAAA,IAAA,CAAc,CAAA,OAAA,CAAA,OAAA,CAAA,gBAAA,CAAA;AACrB,MAAA,CAAO,kBAAA,CAAA,IAAA,CAAwB,CAAA,OAAA,CAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA;AAC/B,MAAA,CAAA,CAAA,CAAS,gBAAA,CAAA,CAAA,CAAA,IAAA,CAAwB,CAAA,KAAA,CAAA,OAAA,CAAA;AAE1B,MAAA,CAAA,KAAA,CAAM,kBAAA,CAAA,CAAA,CAAqB;AAAA,CAAA,CAChC,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,QAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AACR,CAAA;AAEA,IAAA,CACG,GAAA,CAAI,QAAQ,CAAA,CACZ,GAAA;AAAA,CAAA,CACC,kBAAA,CAAmB,CAAC,IAAA,CAAA,CAAc,EAAA,CAAA,CAAA,CAAA,CAAA,CAAe;AAC/C,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,SAAS,CAAA,EAAA,CAAA,CAAA,CAAM;AAEjB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,CAAC,CAAA;AAAA,CAAA,CAAA,CAAA,CACV;AACA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,oCAAA,CAAA,CAAA,ykBAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAA8B;AAAA,CAAA,CACvC,CAAC;AACH,CAAA,CACC,GAAA,CAAI,gBAAgB,CAAA,CACpB,IAAA,CAAK;AAAA,CAAA,CACJ,aAAA,CAAA,CAAe,MAAA,CAAO,IAAA,CAAK,kBAAkB,CAAA;AAAA,CAAA,CAC7C,YAAA,CAAA,CAAc,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACd,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CACb,aAAA,CAAA,CAAe;AAAA,CAAA,CAAA,CAAA,CACb,WAAA,CAAA,CAAa;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACf,CAAA;AAAA,CAAA,CACA,WAAA,CAAA,CAAa,IAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,iBAAA,CAAA,EAAA,CAAA;AAAA,CAAA,CACb,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA,EAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACb,iBAAA,CAAA,CAAmB,CAAC,IAAA,CAAA,CAAM,GAAA,CAAA,CAAK,GAAA,CAAA,CAAA,CAAA,CAAA,CAAQ;AACrC,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,IAAA,CAAK,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAA,EAAA,CAAA,CAAA,CAAM;AAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA;AAAA,CAAA,CAAA,CAAA,CAAQ;AAChC,CAAA,CAAA,CAAA,CAAA,OAAA,CAAQ,IAAA,CAAK,4BAA4B,GAAG,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAS,KAAK,IAAA,CAAK,CAAA,CAAA,CAAA,CAAI,CAAC,CAAA,CAAA,CAAG,CAAA;AAAA,CAAA,CACzE;AACF,CAAC,CAAA;AAEH,MAAA,CAAA,OAAA,CAAe,IAAA;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9743b658c81cabee1d947d94611cafb3cd7a6a97"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ps=function(){return s},s}Ps();const sZ=(Ps().s[0]++,{de:"Deutsch",en:"English",fr:"Franais",he:"",it:"Italiano",ja:"",ko:"",zh:""});Ps().s[1]++;ZA.use(XH).use(ple((n,e)=>(Ps().f[0]++,Ps().s[2]++,n==="en"?(Ps().b[0][0]++,Ps().s[3]++,{}):(Ps().b[0][1]++,Ps().s[4]++,Rae(Object.assign({"./locales/de/translation.json":()=>(Ps().f[1]++,Ps().s[5]++,Fb(()=>import("./translation-CQD4fuPu.js"),[])),"./locales/fr/translation.json":()=>(Ps().f[2]++,Ps().s[6]++,Fb(()=>import("./translation-XoriI0W-.js"),[])),"./locales/he/translation.json":()=>(Ps().f[3]++,Ps().s[7]++,Fb(()=>import("./translation-aD1CAGoy.js"),[])),"./locales/it/translation.json":()=>(Ps().f[4]++,Ps().s[8]++,Fb(()=>import("./translation-CZ64AJ8H.js"),[])),"./locales/ja/translation.json":()=>(Ps().f[5]++,Ps().s[9]++,Fb(()=>import("./translation-BhJ-ufwk.js"),[])),"./locales/ko/translation.json":()=>(Ps().f[6]++,Ps().s[10]++,Fb(()=>import("./translation-DvW-3CJ8.js"),[])),"./locales/zh/translation.json":()=>(Ps().f[7]++,Ps().s[11]++,Fb(()=>import("./translation-BrzYPxJn.js"),[]))}),`./locales/${n}/${e}.json`,4))))).use(jle).init({supportedLngs:Object.keys(sZ),keySeparator:!1,nsSeparator:!1,interpolation:{escapeValue:!1},saveMissing:!0,fallbackLng:!1,missingKeyHandler:(n,e,t)=>{if(Ps().f[8]++,Ps().s[12]++,n[0]==="en"){Ps().b[1][0]++,Ps().s[13]++;return}else Ps().b[1][1]++;Ps().s[14]++,console.warn(`Missing translation for "${t}" in "${n.join(", ")}"`)}});var U3={exports:{}};U3.exports;var ez;function Hle(){return ez||(ez=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=9007199254740991,o="[object Arguments]",s="[object Array]",a="[object Boolean]",c="[object Date]",d="[object Error]",m="[object Function]",v="[object GeneratorFunction]",M="[object Map]",B="[object Number]",P="[object Object]",U="[object Promise]",z="[object RegExp]",V="[object Set]",Z="[object String]",X="[object Symbol]",re="[object WeakMap]",ie="[object ArrayBuffer]",te="[object DataView]",q="[object Float32Array]",le="[object Float64Array]",ce="[object Int8Array]",ve="[object Int16Array]",ge="[object Int32Array]",Ee="[object Uint8Array]",xe="[object Uint8ClampedArray]",Te="[object Uint16Array]",Fe="[object Uint32Array]",Ie=/[\\^$.*+?()[\]{}|]/g,Ye=/\w*$/,At=/^\[object .+?Constructor\]$/,mt=/^(?:0|[1-9]\d*)$/,Ue={};Ue[o]=Ue[s]=Ue[ie]=Ue[te]=Ue[a]=Ue[c]=Ue[q]=Ue[le]=Ue[ce]=Ue[ve]=Ue[ge]=Ue[M]=Ue[B]=Ue[P]=Ue[z]=Ue[V]=Ue[Z]=Ue[X]=Ue[Ee]=Ue[xe]=Ue[Te]=Ue[Fe]=!0,Ue[d]=Ue[m]=Ue[re]=!1;var De=typeof window=="object"&&window&&window.Object===Object&&window,Ge=typeof self=="object"&&self&&self.Object===Object&&self,Re=De||Ge||Function("return this")(),St=e&&!e.nodeType&&e,ut=St&&!0&&n&&!n.nodeType&&n,kt=ut&&ut.exports===St;function Ut(ne,Ce){return ne.set(Ce[0],Ce[1]),ne}function Le(ne,Ce){return ne.add(Ce),ne}function ke(ne,Ce){for(var He=-1,Et=ne?ne.length:0;++He<Et&&Ce(ne[He],He,ne)!==!1;);return ne}function Oe(ne,Ce){for(var He=-1,Et=Ce.length,Qn=ne.length;++He<Et;)ne[Qn+He]=Ce[He];return ne}function Ze(ne,Ce,He,Et){for(var Qn=-1,Dn=ne?ne.length:0;++Qn<Dn;)He=Ce(He,ne[Qn],Qn,ne);return He}function bt(ne,Ce){for(var He=-1,Et=Array(ne);++He<ne;)Et[He]=Ce(He);return Et}function yt(ne,Ce){return ne?.[Ce]}function Mt(ne){var Ce=!1;if(ne!=null&&typeof ne.toString!="function")try{Ce=!!(ne+"")}catch{}return Ce}function Kt(ne){var Ce=-1,He=Array(ne.size);return ne.forEach(function(Et,Qn){He[++Ce]=[Qn,Et]}),He}function Dt(ne,Ce){return function(He){return ne(Ce(He))}}function en(ne){var Ce=-1,He=Array(ne.size);return ne.forEach(function(Et){He[++Ce]=Et}),He}var Gn=Array.prototype,Nn=Function.prototype,Si=Object.prototype,Un=Re["__core-js_shared__"],Ln=(function(){var ne=/[^.]+$/.exec(Un&&Un.keys&&Un.keys.IE_PROTO||"");return ne?"Symbol(src)_1."+ne:""})(),Tn=Nn.toString,ti=Si.hasOwnProperty,Bn=Si.toString,je=RegExp("^"+Tn.call(ti).replace(Ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),H=kt?Re.Buffer:void 0,j=Re.Symbol,Q=Re.Uint8Array,he=Dt(Object.getPrototypeOf,Object),Me=Object.create,Ne=Si.propertyIsEnumerable,Qe=Gn.splice,it=Object.getOwnPropertySymbols,vt=H?H.isBuffer:void 0,$e=Dt(Object.keys,Object),ot=hs(Re,"DataView"),b=hs(Re,"Map"),Rt=hs(Re,"Promise"),mn=hs(Re,"Set"),bn=hs(Re,"WeakMap"),Cn=hs(Object,"create"),xt=Xo(ot),Ci=Xo(b),Ki=Xo(Rt),Wn=Xo(mn),Hn=Xo(bn),Qi=j?j.prototype:void 0,Wi=Qi?Qi.valueOf:void 0;function Ri(ne){var Ce=-1,He=ne?ne.length:0;for(this.clear();++Ce<He;){var Et=ne[Ce];this.set(Et[0],Et[1])}}function qi(){this.__data__=Cn?Cn(null):{}}function Li(ne){return this.has(ne)&&delete this.__data__[ne]}function Er(ne){var Ce=this.__data__;if(Cn){var He=Ce[ne];return He===i?void 0:He}return ti.call(Ce,ne)?Ce[ne]:void 0}function xo(ne){var Ce=this.__data__;return Cn?Ce[ne]!==void 0:ti.call(Ce,ne)}function un(ne,Ce){var He=this.__data__;return He[ne]=Cn&&Ce===void 0?i:Ce,this}Ri.prototype.clear=qi,Ri.prototype.delete=Li,Ri.prototype.get=Er,Ri.prototype.has=xo,Ri.prototype.set=un;function tr(ne){var Ce=-1,He=ne?ne.length:0;for(this.clear();++Ce<He;){var Et=ne[Ce];this.set(Et[0],Et[1])}}function Wo(){this.__data__=[]}function ra(ne){var Ce=this.__data__,He=za(Ce,ne);if(He<0)return!1;var Et=Ce.length-1;return He==Et?Ce.pop():Qe.call(Ce,He,1),!0}function oo(ne){var Ce=this.__data__,He=za(Ce,ne);return He<0?void 0:Ce[He][1]}function kn(ne){return za(this.__data__,ne)>-1}function Xi(ne,Ce){var He=this.__data__,Et=za(He,ne);return Et<0?He.push([ne,Ce]):He[Et][1]=Ce,this}tr.prototype.clear=Wo,tr.prototype.delete=ra,tr.prototype.get=oo,tr.prototype.has=kn,tr.prototype.set=Xi;function ui(ne){var Ce=-1,He=ne?ne.length:0;for(this.clear();++Ce<He;){var Et=ne[Ce];this.set(Et[0],Et[1])}}function Ka(){this.__data__={hash:new Ri,map:new(b||tr),string:new Ri}}function yA(ne){return $l(this,ne).delete(ne)}function xl(ne){return $l(this,ne).get(ne)}function Vi(ne){return $l(this,ne).has(ne)}function Qu(ne,Ce){return $l(this,ne).set(ne,Ce),this}ui.prototype.clear=Ka,ui.prototype.delete=yA,ui.prototype.get=xl,ui.prototype.has=Vi,ui.prototype.set=Qu;function co(ne){this.__data__=new tr(ne)}function $a(){this.__data__=new tr}function Ml(ne){return this.__data__.delete(ne)}function Fa(ne){return this.__data__.get(ne)}function Ro(ne){return this.__data__.has(ne)}function gc(ne,Ce){var He=this.__data__;if(He instanceof tr){var Et=He.__data__;if(!b||Et.length<t-1)return Et.push([ne,Ce]),this;He=this.__data__=new ui(Et)}return He.set(ne,Ce),this}co.prototype.clear=$a,co.prototype.delete=Ml,co.prototype.get=Fa,co.prototype.has=Ro,co.prototype.set=gc;function Qo(ne,Ce){var He=ho(ne)||Ao(ne)?bt(ne.length,String):[],Et=He.length,Qn=!!Et;for(var Dn in ne)ti.call(ne,Dn)&&!(Qn&&(Dn=="length"||Zl(Dn,Et)))&&He.push(Dn);return He}function mr(ne,Ce,He){var Et=ne[Ce];(!(ti.call(ne,Ce)&&Jo(Et,He))||He===void 0&&!(Ce in ne))&&(ne[Ce]=He)}function za(ne,Ce){for(var He=ne.length;He--;)if(Jo(ne[He][0],Ce))return He;return-1}function Zo(ne,Ce){return ne&&Yl(Ce,Za(Ce),ne)}function bu(ne,Ce,He,Et,Qn,Dn,Oi){var Fi;if(Et&&(Fi=Dn?Et(ne,Qn,Dn,Oi):Et(ne)),Fi!==void 0)return Fi;if(!Yr(ne))return ne;var qn=ho(ne);if(qn){if(Fi=xu(ne),!Ce)return vc(ne,Fi)}else{var Ei=Hl(ne),ei=Ei==m||Ei==v;if($s(ne))return lr(ne,Ce);if(Ei==P||Ei==o||ei&&!Dn){if(Mt(ne))return Dn?ne:{};if(Fi=Es(ei?{}:ne),!Ce)return $c(ne,Zo(Fi,ne))}else{if(!Ue[Ei])return Dn?ne:{};Fi=Mu(ne,Ei,bu,Ce)}}Oi||(Oi=new co);var ri=Oi.get(ne);if(ri)return ri;if(Oi.set(ne,Fi),!qn)var hr=He?Vl(ne):Za(ne);return ke(hr||ne,function(ni,Kr){hr&&(Kr=ni,ni=ne[Kr]),mr(Fi,Kr,bu(ni,Ce,He,Et,Kr,ne,Oi))}),Fi}function Cu(ne){return Yr(ne)?Me(ne):{}}function ul(ne,Ce,He){var Et=Ce(ne);return ho(ne)?Et:Oe(Et,He(ne))}function Vc(ne){return Bn.call(ne)}function cl(ne){if(!Yr(ne)||Ji(ne))return!1;var Ce=go(ne)||Mt(ne)?je:At;return Ce.test(Xo(ne))}function ja(ne){if(!Ha(ne))return $e(ne);var Ce=[];for(var He in Object(ne))ti.call(ne,He)&&He!="constructor"&&Ce.push(He);return Ce}function lr(ne,Ce){if(Ce)return ne.slice();var He=new ne.constructor(ne.length);return ne.copy(He),He}function qu(ne){var Ce=new ne.constructor(ne.byteLength);return new Q(Ce).set(new Q(ne)),Ce}function wl(ne,Ce){var He=Ce?qu(ne.buffer):ne.buffer;return new ne.constructor(He,ne.byteOffset,ne.byteLength)}function Sl(ne,Ce,He){var Et=Ce?He(Kt(ne),!0):Kt(ne);return Ze(Et,Ut,new ne.constructor)}function _u(ne){var Ce=new ne.constructor(ne.source,Ye.exec(ne));return Ce.lastIndex=ne.lastIndex,Ce}function yc(ne,Ce,He){var Et=Ce?He(en(ne),!0):en(ne);return Ze(Et,Le,new ne.constructor)}function Rh(ne){return Wi?Object(Wi.call(ne)):{}}function Vs(ne,Ce){var He=Ce?qu(ne.buffer):ne.buffer;return new ne.constructor(He,ne.byteOffset,ne.length)}function vc(ne,Ce){var He=-1,Et=ne.length;for(Ce||(Ce=Array(Et));++He<Et;)Ce[He]=ne[He];return Ce}function Yl(ne,Ce,He,Et){He||(He={});for(var Qn=-1,Dn=Ce.length;++Qn<Dn;){var Oi=Ce[Qn],Fi=void 0;mr(He,Oi,Fi===void 0?ne[Oi]:Fi)}return He}function $c(ne,Ce){return Yl(ne,Mo(ne),Ce)}function Vl(ne){return ul(ne,Za,Mo)}function $l(ne,Ce){var He=ne.__data__;return Yu(Ce)?He[typeof Ce=="string"?"string":"hash"]:He.map}function hs(ne,Ce){var He=yt(ne,Ce);return cl(He)?He:void 0}var Mo=it?Dt(it,Object):$i,Hl=Vc;(ot&&Hl(new ot(new ArrayBuffer(1)))!=te||b&&Hl(new b)!=M||Rt&&Hl(Rt.resolve())!=U||mn&&Hl(new mn)!=V||bn&&Hl(new bn)!=re)&&(Hl=function(ne){var Ce=Bn.call(ne),He=Ce==P?ne.constructor:void 0,Et=He?Xo(He):void 0;if(Et)switch(Et){case xt:return te;case Ci:return M;case Ki:return U;case Wn:return V;case Hn:return re}return Ce});function xu(ne){var Ce=ne.length,He=ne.constructor(Ce);return Ce&&typeof ne[0]=="string"&&ti.call(ne,"index")&&(He.index=ne.index,He.input=ne.input),He}function Es(ne){return typeof ne.constructor=="function"&&!Ha(ne)?Cu(he(ne)):{}}function Mu(ne,Ce,He,Et){var Qn=ne.constructor;switch(Ce){case ie:return qu(ne);case a:case c:return new Qn(+ne);case te:return wl(ne,Et);case q:case le:case ce:case ve:case ge:case Ee:case xe:case Te:case Fe:return Vs(ne,Et);case M:return Sl(ne,Et,He);case B:case Z:return new Qn(ne);case z:return _u(ne);case V:return yc(ne,Et,He);case X:return Rh(ne)}}function Zl(ne,Ce){return Ce=Ce??r,!!Ce&&(typeof ne=="number"||mt.test(ne))&&ne>-1&&ne%1==0&&ne<Ce}function Yu(ne){var Ce=typeof ne;return Ce=="string"||Ce=="number"||Ce=="symbol"||Ce=="boolean"?ne!=="__proto__":ne===null}function Ji(ne){return!!Ln&&Ln in ne}function Ha(ne){var Ce=ne&&ne.constructor,He=typeof Ce=="function"&&Ce.prototype||Si;return ne===He}function Xo(ne){if(ne!=null){try{return Tn.call(ne)}catch{}try{return ne+""}catch{}}return""}function Vu(ne){return bu(ne,!0,!0)}function Jo(ne,Ce){return ne===Ce||ne!==ne&&Ce!==Ce}function Ao(ne){return to(ne)&&ti.call(ne,"callee")&&(!Ne.call(ne,"callee")||Bn.call(ne)==o)}var ho=Array.isArray;function _i(ne){return ne!=null&&Fs(ne.length)&&!go(ne)}function to(ne){return oa(ne)&&_i(ne)}var $s=vt||Tr;function go(ne){var Ce=Yr(ne)?Bn.call(ne):"";return Ce==m||Ce==v}function Fs(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=r}function Yr(ne){var Ce=typeof ne;return!!ne&&(Ce=="object"||Ce=="function")}function oa(ne){return!!ne&&typeof ne=="object"}function Za(ne){return _i(ne)?Qo(ne):ja(ne)}function $i(){return[]}function Tr(){return!1}n.exports=Vu})(U3,U3.exports)),U3.exports}var Zle=Hle();const tz=vu(Zle);var TO,nz;function Xle(){if(nz)return TO;nz=1;var n=NaN,e="[object Symbol]",t=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,a=Object.prototype,c=a.toString;function d(U,z,V){return U===U&&(V!==void 0&&(U=U<=V?U:V),z!==void 0&&(U=U>=z?U:z)),U}function m(U){var z=typeof U;return!!U&&(z=="object"||z=="function")}function v(U){return!!U&&typeof U=="object"}function M(U){return typeof U=="symbol"||v(U)&&c.call(U)==e}function B(U){if(typeof U=="number")return U;if(M(U))return n;if(m(U)){var z=typeof U.valueOf=="function"?U.valueOf():U;U=m(z)?z+"":z}if(typeof U!="string")return U===0?U:+U;U=U.replace(t,"");var V=r.test(U);return V||o.test(U)?s(U.slice(2),V?2:8):i.test(U)?n:+U}function P(U,z,V){return V===void 0&&(V=z,z=void 0),V!==void 0&&(V=B(V),V=V===V?V:0),z!==void 0&&(z=B(z),z=z===z?z:0),d(B(U),z,V)}return TO=P,TO}var Jle=Xle();const iz=vu(Jle);var kO={},p3={},rz;function eue(){if(rz)return p3;rz=1,p3.byteLength=a,p3.toByteArray=d,p3.fromByteArray=M;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,o=i.length;r<o;++r)n[r]=i[r],e[i.charCodeAt(r)]=r;e[45]=62,e[95]=63;function s(B){var P=B.length;if(P%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var U=B.indexOf("=");U===-1&&(U=P);var z=U===P?0:4-U%4;return[U,z]}function a(B){var P=s(B),U=P[0],z=P[1];return(U+z)*3/4-z}function c(B,P,U){return(P+U)*3/4-U}function d(B){var P,U=s(B),z=U[0],V=U[1],Z=new t(c(B,z,V)),X=0,re=V>0?z-4:z,ie;for(ie=0;ie<re;ie+=4)P=e[B.charCodeAt(ie)]<<18|e[B.charCodeAt(ie+1)]<<12|e[B.charCodeAt(ie+2)]<<6|e[B.charCodeAt(ie+3)],Z[X++]=P>>16&255,Z[X++]=P>>8&255,Z[X++]=P&255;return V===2&&(P=e[B.charCodeAt(ie)]<<2|e[B.charCodeAt(ie+1)]>>4,Z[X++]=P&255),V===1&&(P=e[B.charCodeAt(ie)]<<10|e[B.charCodeAt(ie+1)]<<4|e[B.charCodeAt(ie+2)]>>2,Z[X++]=P>>8&255,Z[X++]=P&255),Z}function m(B){return n[B>>18&63]+n[B>>12&63]+n[B>>6&63]+n[B&63]}function v(B,P,U){for(var z,V=[],Z=P;Z<U;Z+=3)z=(B[Z]<<16&16711680)+(B[Z+1]<<8&65280)+(B[Z+2]&255),V.push(m(z));return V.join("")}function M(B){for(var P,U=B.length,z=U%3,V=[],Z=16383,X=0,re=U-z;X<re;X+=Z)V.push(v(B,X,X+Z>re?re:X+Z));return z===1?(P=B[U-1],V.push(n[P>>2]+n[P<<4&63]+"==")):z===2&&(P=(B[U-2]<<8)+B[U-1],V.push(n[P>>10]+n[P>>4&63]+n[P<<2&63]+"=")),V.join("")}return p3}var QM={};var oz;function tue(){return oz||(oz=1,QM.read=function(n,e,t,i,r){var o,s,a=r*8-i-1,c=(1<<a)-1,d=c>>1,m=-7,v=t?r-1:0,M=t?-1:1,B=n[e+v];for(v+=M,o=B&(1<<-m)-1,B>>=-m,m+=a;m>0;o=o*256+n[e+v],v+=M,m-=8);for(s=o&(1<<-m)-1,o>>=-m,m+=i;m>0;s=s*256+n[e+v],v+=M,m-=8);if(o===0)o=1-d;else{if(o===c)return s?NaN:(B?-1:1)*(1/0);s=s+Math.pow(2,i),o=o-d}return(B?-1:1)*s*Math.pow(2,o-i)},QM.write=function(n,e,t,i,r,o){var s,a,c,d=o*8-r-1,m=(1<<d)-1,v=m>>1,M=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,B=i?0:o-1,P=i?1:-1,U=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=m):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+v>=1?e+=M/c:e+=M*Math.pow(2,1-v),e*c>=2&&(s++,c/=2),s+v>=m?(a=0,s=m):s+v>=1?(a=(e*c-1)*Math.pow(2,r),s=s+v):(a=e*Math.pow(2,v-1)*Math.pow(2,r),s=0));r>=8;n[t+B]=a&255,B+=P,a/=256,r-=8);for(s=s<<r|a,d+=r;d>0;n[t+B]=s&255,B+=P,s/=256,d-=8);n[t+B-P]|=U*128}),QM}var sz;function nue(){return sz||(sz=1,(function(n){const e=eue(),t=tue(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=Z,n.INSPECT_MAX_BYTES=50;const r=2147483647;n.kMaxLength=r,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const H=new Uint8Array(1),j={foo:function(){return 42}};return Object.setPrototypeOf(j,Uint8Array.prototype),Object.setPrototypeOf(H,j),H.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(H){if(H>r)throw new RangeError('The value "'+H+'" is invalid for option "size"');const j=new Uint8Array(H);return Object.setPrototypeOf(j,a.prototype),j}function a(H,j,Q){if(typeof H=="number"){if(typeof j=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(H)}return c(H,j,Q)}a.poolSize=8192;function c(H,j,Q){if(typeof H=="string")return M(H,j);if(ArrayBuffer.isView(H))return P(H);if(H==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H);if(Ln(H,ArrayBuffer)||H&&Ln(H.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ln(H,SharedArrayBuffer)||H&&Ln(H.buffer,SharedArrayBuffer)))return U(H,j,Q);if(typeof H=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const he=H.valueOf&&H.valueOf();if(he!=null&&he!==H)return a.from(he,j,Q);const Me=z(H);if(Me)return Me;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof H[Symbol.toPrimitive]=="function")return a.from(H[Symbol.toPrimitive]("string"),j,Q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H)}a.from=function(H,j,Q){return c(H,j,Q)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function d(H){if(typeof H!="number")throw new TypeError('"size" argument must be of type number');if(H<0)throw new RangeError('The value "'+H+'" is invalid for option "size"')}function m(H,j,Q){return d(H),H<=0?s(H):j!==void 0?typeof Q=="string"?s(H).fill(j,Q):s(H).fill(j):s(H)}a.alloc=function(H,j,Q){return m(H,j,Q)};function v(H){return d(H),s(H<0?0:V(H)|0)}a.allocUnsafe=function(H){return v(H)},a.allocUnsafeSlow=function(H){return v(H)};function M(H,j){if((typeof j!="string"||j==="")&&(j="utf8"),!a.isEncoding(j))throw new TypeError("Unknown encoding: "+j);const Q=X(H,j)|0;let he=s(Q);const Me=he.write(H,j);return Me!==Q&&(he=he.slice(0,Me)),he}function B(H){const j=H.length<0?0:V(H.length)|0,Q=s(j);for(let he=0;he<j;he+=1)Q[he]=H[he]&255;return Q}function P(H){if(Ln(H,Uint8Array)){const j=new Uint8Array(H);return U(j.buffer,j.byteOffset,j.byteLength)}return B(H)}function U(H,j,Q){if(j<0||H.byteLength<j)throw new RangeError('"offset" is outside of buffer bounds');if(H.byteLength<j+(Q||0))throw new RangeError('"length" is outside of buffer bounds');let he;return j===void 0&&Q===void 0?he=new Uint8Array(H):Q===void 0?he=new Uint8Array(H,j):he=new Uint8Array(H,j,Q),Object.setPrototypeOf(he,a.prototype),he}function z(H){if(a.isBuffer(H)){const j=V(H.length)|0,Q=s(j);return Q.length===0||H.copy(Q,0,0,j),Q}if(H.length!==void 0)return typeof H.length!="number"||Tn(H.length)?s(0):B(H);if(H.type==="Buffer"&&Array.isArray(H.data))return B(H.data)}function V(H){if(H>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return H|0}function Z(H){return+H!=H&&(H=0),a.alloc(+H)}a.isBuffer=function(j){return j!=null&&j._isBuffer===!0&&j!==a.prototype},a.compare=function(j,Q){if(Ln(j,Uint8Array)&&(j=a.from(j,j.offset,j.byteLength)),Ln(Q,Uint8Array)&&(Q=a.from(Q,Q.offset,Q.byteLength)),!a.isBuffer(j)||!a.isBuffer(Q))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===Q)return 0;let he=j.length,Me=Q.length;for(let Ne=0,Qe=Math.min(he,Me);Ne<Qe;++Ne)if(j[Ne]!==Q[Ne]){he=j[Ne],Me=Q[Ne];break}return he<Me?-1:Me<he?1:0},a.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(j,Q){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(j.length===0)return a.alloc(0);let he;if(Q===void 0)for(Q=0,he=0;he<j.length;++he)Q+=j[he].length;const Me=a.allocUnsafe(Q);let Ne=0;for(he=0;he<j.length;++he){let Qe=j[he];if(Ln(Qe,Uint8Array))Ne+Qe.length>Me.length?(a.isBuffer(Qe)||(Qe=a.from(Qe)),Qe.copy(Me,Ne)):Uint8Array.prototype.set.call(Me,Qe,Ne);else if(a.isBuffer(Qe))Qe.copy(Me,Ne);else throw new TypeError('"list" argument must be an Array of Buffers');Ne+=Qe.length}return Me};function X(H,j){if(a.isBuffer(H))return H.length;if(ArrayBuffer.isView(H)||Ln(H,ArrayBuffer))return H.byteLength;if(typeof H!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof H);const Q=H.length,he=arguments.length>2&&arguments[2]===!0;if(!he&&Q===0)return 0;let Me=!1;for(;;)switch(j){case"ascii":case"latin1":case"binary":return Q;case"utf8":case"utf-8":return en(H).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q*2;case"hex":return Q>>>1;case"base64":return Si(H).length;default:if(Me)return he?-1:en(H).length;j=(""+j).toLowerCase(),Me=!0}}a.byteLength=X;function re(H,j,Q){let he=!1;if((j===void 0||j<0)&&(j=0),j>this.length||((Q===void 0||Q>this.length)&&(Q=this.length),Q<=0)||(Q>>>=0,j>>>=0,Q<=j))return"";for(H||(H="utf8");;)switch(H){case"hex":return mt(this,j,Q);case"utf8":case"utf-8":return Te(this,j,Q);case"ascii":return Ye(this,j,Q);case"latin1":case"binary":return At(this,j,Q);case"base64":return xe(this,j,Q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ue(this,j,Q);default:if(he)throw new TypeError("Unknown encoding: "+H);H=(H+"").toLowerCase(),he=!0}}a.prototype._isBuffer=!0;function ie(H,j,Q){const he=H[j];H[j]=H[Q],H[Q]=he}a.prototype.swap16=function(){const j=this.length;if(j%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Q=0;Q<j;Q+=2)ie(this,Q,Q+1);return this},a.prototype.swap32=function(){const j=this.length;if(j%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Q=0;Q<j;Q+=4)ie(this,Q,Q+3),ie(this,Q+1,Q+2);return this},a.prototype.swap64=function(){const j=this.length;if(j%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Q=0;Q<j;Q+=8)ie(this,Q,Q+7),ie(this,Q+1,Q+6),ie(this,Q+2,Q+5),ie(this,Q+3,Q+4);return this},a.prototype.toString=function(){const j=this.length;return j===0?"":arguments.length===0?Te(this,0,j):re.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(j){if(!a.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j?!0:a.compare(this,j)===0},a.prototype.inspect=function(){let j="";const Q=n.INSPECT_MAX_BYTES;return j=this.toString("hex",0,Q).replace(/(.{2})/g,"$1 ").trim(),this.length>Q&&(j+=" ... "),"<Buffer "+j+">"},i&&(a.prototype[i]=a.prototype.inspect),a.prototype.compare=function(j,Q,he,Me,Ne){if(Ln(j,Uint8Array)&&(j=a.from(j,j.offset,j.byteLength)),!a.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(Q===void 0&&(Q=0),he===void 0&&(he=j?j.length:0),Me===void 0&&(Me=0),Ne===void 0&&(Ne=this.length),Q<0||he>j.length||Me<0||Ne>this.length)throw new RangeError("out of range index");if(Me>=Ne&&Q>=he)return 0;if(Me>=Ne)return-1;if(Q>=he)return 1;if(Q>>>=0,he>>>=0,Me>>>=0,Ne>>>=0,this===j)return 0;let Qe=Ne-Me,it=he-Q;const vt=Math.min(Qe,it),$e=this.slice(Me,Ne),ot=j.slice(Q,he);for(let b=0;b<vt;++b)if($e[b]!==ot[b]){Qe=$e[b],it=ot[b];break}return Qe<it?-1:it<Qe?1:0};function te(H,j,Q,he,Me){if(H.length===0)return-1;if(typeof Q=="string"?(he=Q,Q=0):Q>2147483647?Q=2147483647:Q<-2147483648&&(Q=-2147483648),Q=+Q,Tn(Q)&&(Q=Me?0:H.length-1),Q<0&&(Q=H.length+Q),Q>=H.length){if(Me)return-1;Q=H.length-1}else if(Q<0)if(Me)Q=0;else return-1;if(typeof j=="string"&&(j=a.from(j,he)),a.isBuffer(j))return j.length===0?-1:q(H,j,Q,he,Me);if(typeof j=="number")return j=j&255,typeof Uint8Array.prototype.indexOf=="function"?Me?Uint8Array.prototype.indexOf.call(H,j,Q):Uint8Array.prototype.lastIndexOf.call(H,j,Q):q(H,[j],Q,he,Me);throw new TypeError("val must be string, number or Buffer")}function q(H,j,Q,he,Me){let Ne=1,Qe=H.length,it=j.length;if(he!==void 0&&(he=String(he).toLowerCase(),he==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(H.length<2||j.length<2)return-1;Ne=2,Qe/=2,it/=2,Q/=2}function vt(ot,b){return Ne===1?ot[b]:ot.readUInt16BE(b*Ne)}let $e;if(Me){let ot=-1;for($e=Q;$e<Qe;$e++)if(vt(H,$e)===vt(j,ot===-1?0:$e-ot)){if(ot===-1&&(ot=$e),$e-ot+1===it)return ot*Ne}else ot!==-1&&($e-=$e-ot),ot=-1}else for(Q+it>Qe&&(Q=Qe-it),$e=Q;$e>=0;$e--){let ot=!0;for(let b=0;b<it;b++)if(vt(H,$e+b)!==vt(j,b)){ot=!1;break}if(ot)return $e}return-1}a.prototype.includes=function(j,Q,he){return this.indexOf(j,Q,he)!==-1},a.prototype.indexOf=function(j,Q,he){return te(this,j,Q,he,!0)},a.prototype.lastIndexOf=function(j,Q,he){return te(this,j,Q,he,!1)};function le(H,j,Q,he){Q=Number(Q)||0;const Me=H.length-Q;he?(he=Number(he),he>Me&&(he=Me)):he=Me;const Ne=j.length;he>Ne/2&&(he=Ne/2);let Qe;for(Qe=0;Qe<he;++Qe){const it=parseInt(j.substr(Qe*2,2),16);if(Tn(it))return Qe;H[Q+Qe]=it}return Qe}function ce(H,j,Q,he){return Un(en(j,H.length-Q),H,Q,he)}function ve(H,j,Q,he){return Un(Gn(j),H,Q,he)}function ge(H,j,Q,he){return Un(Si(j),H,Q,he)}function Ee(H,j,Q,he){return Un(Nn(j,H.length-Q),H,Q,he)}a.prototype.write=function(j,Q,he,Me){if(Q===void 0)Me="utf8",he=this.length,Q=0;else if(he===void 0&&typeof Q=="string")Me=Q,he=this.length,Q=0;else if(isFinite(Q))Q=Q>>>0,isFinite(he)?(he=he>>>0,Me===void 0&&(Me="utf8")):(Me=he,he=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ne=this.length-Q;if((he===void 0||he>Ne)&&(he=Ne),j.length>0&&(he<0||Q<0)||Q>this.length)throw new RangeError("Attempt to write outside buffer bounds");Me||(Me="utf8");let Qe=!1;for(;;)switch(Me){case"hex":return le(this,j,Q,he);case"utf8":case"utf-8":return ce(this,j,Q,he);case"ascii":case"latin1":case"binary":return ve(this,j,Q,he);case"base64":return ge(this,j,Q,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ee(this,j,Q,he);default:if(Qe)throw new TypeError("Unknown encoding: "+Me);Me=(""+Me).toLowerCase(),Qe=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function xe(H,j,Q){return j===0&&Q===H.length?e.fromByteArray(H):e.fromByteArray(H.slice(j,Q))}function Te(H,j,Q){Q=Math.min(H.length,Q);const he=[];let Me=j;for(;Me<Q;){const Ne=H[Me];let Qe=null,it=Ne>239?4:Ne>223?3:Ne>191?2:1;if(Me+it<=Q){let vt,$e,ot,b;switch(it){case 1:Ne<128&&(Qe=Ne);break;case 2:vt=H[Me+1],(vt&192)===128&&(b=(Ne&31)<<6|vt&63,b>127&&(Qe=b));break;case 3:vt=H[Me+1],$e=H[Me+2],(vt&192)===128&&($e&192)===128&&(b=(Ne&15)<<12|(vt&63)<<6|$e&63,b>2047&&(b<55296||b>57343)&&(Qe=b));break;case 4:vt=H[Me+1],$e=H[Me+2],ot=H[Me+3],(vt&192)===128&&($e&192)===128&&(ot&192)===128&&(b=(Ne&15)<<18|(vt&63)<<12|($e&63)<<6|ot&63,b>65535&&b<1114112&&(Qe=b))}}Qe===null?(Qe=65533,it=1):Qe>65535&&(Qe-=65536,he.push(Qe>>>10&1023|55296),Qe=56320|Qe&1023),he.push(Qe),Me+=it}return Ie(he)}const Fe=4096;function Ie(H){const j=H.length;if(j<=Fe)return String.fromCharCode.apply(String,H);let Q="",he=0;for(;he<j;)Q+=String.fromCharCode.apply(String,H.slice(he,he+=Fe));return Q}function Ye(H,j,Q){let he="";Q=Math.min(H.length,Q);for(let Me=j;Me<Q;++Me)he+=String.fromCharCode(H[Me]&127);return he}function At(H,j,Q){let he="";Q=Math.min(H.length,Q);for(let Me=j;Me<Q;++Me)he+=String.fromCharCode(H[Me]);return he}function mt(H,j,Q){const he=H.length;(!j||j<0)&&(j=0),(!Q||Q<0||Q>he)&&(Q=he);let Me="";for(let Ne=j;Ne<Q;++Ne)Me+=ti[H[Ne]];return Me}function Ue(H,j,Q){const he=H.slice(j,Q);let Me="";for(let Ne=0;Ne<he.length-1;Ne+=2)Me+=String.fromCharCode(he[Ne]+he[Ne+1]*256);return Me}a.prototype.slice=function(j,Q){const he=this.length;j=~~j,Q=Q===void 0?he:~~Q,j<0?(j+=he,j<0&&(j=0)):j>he&&(j=he),Q<0?(Q+=he,Q<0&&(Q=0)):Q>he&&(Q=he),Q<j&&(Q=j);const Me=this.subarray(j,Q);return Object.setPrototypeOf(Me,a.prototype),Me};function De(H,j,Q){if(H%1!==0||H<0)throw new RangeError("offset is not uint");if(H+j>Q)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(j,Q,he){j=j>>>0,Q=Q>>>0,he||De(j,Q,this.length);let Me=this[j],Ne=1,Qe=0;for(;++Qe<Q&&(Ne*=256);)Me+=this[j+Qe]*Ne;return Me},a.prototype.readUintBE=a.prototype.readUIntBE=function(j,Q,he){j=j>>>0,Q=Q>>>0,he||De(j,Q,this.length);let Me=this[j+--Q],Ne=1;for(;Q>0&&(Ne*=256);)Me+=this[j+--Q]*Ne;return Me},a.prototype.readUint8=a.prototype.readUInt8=function(j,Q){return j=j>>>0,Q||De(j,1,this.length),this[j]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(j,Q){return j=j>>>0,Q||De(j,2,this.length),this[j]|this[j+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(j,Q){return j=j>>>0,Q||De(j,2,this.length),this[j]<<8|this[j+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(j,Q){return j=j>>>0,Q||De(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+this[j+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(j,Q){return j=j>>>0,Q||De(j,4,this.length),this[j]*16777216+(this[j+1]<<16|this[j+2]<<8|this[j+3])},a.prototype.readBigUInt64LE=Bn(function(j){j=j>>>0,yt(j,"offset");const Q=this[j],he=this[j+7];(Q===void 0||he===void 0)&&Mt(j,this.length-8);const Me=Q+this[++j]*2**8+this[++j]*2**16+this[++j]*2**24,Ne=this[++j]+this[++j]*2**8+this[++j]*2**16+he*2**24;return BigInt(Me)+(BigInt(Ne)<<BigInt(32))}),a.prototype.readBigUInt64BE=Bn(function(j){j=j>>>0,yt(j,"offset");const Q=this[j],he=this[j+7];(Q===void 0||he===void 0)&&Mt(j,this.length-8);const Me=Q*2**24+this[++j]*2**16+this[++j]*2**8+this[++j],Ne=this[++j]*2**24+this[++j]*2**16+this[++j]*2**8+he;return(BigInt(Me)<<BigInt(32))+BigInt(Ne)}),a.prototype.readIntLE=function(j,Q,he){j=j>>>0,Q=Q>>>0,he||De(j,Q,this.length);let Me=this[j],Ne=1,Qe=0;for(;++Qe<Q&&(Ne*=256);)Me+=this[j+Qe]*Ne;return Ne*=128,Me>=Ne&&(Me-=Math.pow(2,8*Q)),Me},a.prototype.readIntBE=function(j,Q,he){j=j>>>0,Q=Q>>>0,he||De(j,Q,this.length);let Me=Q,Ne=1,Qe=this[j+--Me];for(;Me>0&&(Ne*=256);)Qe+=this[j+--Me]*Ne;return Ne*=128,Qe>=Ne&&(Qe-=Math.pow(2,8*Q)),Qe},a.prototype.readInt8=function(j,Q){return j=j>>>0,Q||De(j,1,this.length),this[j]&128?(255-this[j]+1)*-1:this[j]},a.prototype.readInt16LE=function(j,Q){j=j>>>0,Q||De(j,2,this.length);const he=this[j]|this[j+1]<<8;return he&32768?he|4294901760:he},a.prototype.readInt16BE=function(j,Q){j=j>>>0,Q||De(j,2,this.length);const he=this[j+1]|this[j]<<8;return he&32768?he|4294901760:he},a.prototype.readInt32LE=function(j,Q){return j=j>>>0,Q||De(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},a.prototype.readInt32BE=function(j,Q){return j=j>>>0,Q||De(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},a.prototype.readBigInt64LE=Bn(function(j){j=j>>>0,yt(j,"offset");const Q=this[j],he=this[j+7];(Q===void 0||he===void 0)&&Mt(j,this.length-8);const Me=this[j+4]+this[j+5]*2**8+this[j+6]*2**16+(he<<24);return(BigInt(Me)<<BigInt(32))+BigInt(Q+this[++j]*2**8+this[++j]*2**16+this[++j]*2**24)}),a.prototype.readBigInt64BE=Bn(function(j){j=j>>>0,yt(j,"offset");const Q=this[j],he=this[j+7];(Q===void 0||he===void 0)&&Mt(j,this.length-8);const Me=(Q<<24)+this[++j]*2**16+this[++j]*2**8+this[++j];return(BigInt(Me)<<BigInt(32))+BigInt(this[++j]*2**24+this[++j]*2**16+this[++j]*2**8+he)}),a.prototype.readFloatLE=function(j,Q){return j=j>>>0,Q||De(j,4,this.length),t.read(this,j,!0,23,4)},a.prototype.readFloatBE=function(j,Q){return j=j>>>0,Q||De(j,4,this.length),t.read(this,j,!1,23,4)},a.prototype.readDoubleLE=function(j,Q){return j=j>>>0,Q||De(j,8,this.length),t.read(this,j,!0,52,8)},a.prototype.readDoubleBE=function(j,Q){return j=j>>>0,Q||De(j,8,this.length),t.read(this,j,!1,52,8)};function Ge(H,j,Q,he,Me,Ne){if(!a.isBuffer(H))throw new TypeError('"buffer" argument must be a Buffer instance');if(j>Me||j<Ne)throw new RangeError('"value" argument is out of bounds');if(Q+he>H.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(j,Q,he,Me){if(j=+j,Q=Q>>>0,he=he>>>0,!Me){const it=Math.pow(2,8*he)-1;Ge(this,j,Q,he,it,0)}let Ne=1,Qe=0;for(this[Q]=j&255;++Qe<he&&(Ne*=256);)this[Q+Qe]=j/Ne&255;return Q+he},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(j,Q,he,Me){if(j=+j,Q=Q>>>0,he=he>>>0,!Me){const it=Math.pow(2,8*he)-1;Ge(this,j,Q,he,it,0)}let Ne=he-1,Qe=1;for(this[Q+Ne]=j&255;--Ne>=0&&(Qe*=256);)this[Q+Ne]=j/Qe&255;return Q+he},a.prototype.writeUint8=a.prototype.writeUInt8=function(j,Q,he){return j=+j,Q=Q>>>0,he||Ge(this,j,Q,1,255,0),this[Q]=j&255,Q+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(j,Q,he){return j=+j,Q=Q>>>0,he||Ge(this,j,Q,2,65535,0),this[Q]=j&255,this[Q+1]=j>>>8,Q+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(j,Q,he){return j=+j,Q=Q>>>0,he||Ge(this,j,Q,2,65535,0),this[Q]=j>>>8,this[Q+1]=j&255,Q+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(j,Q,he){return j=+j,Q=Q>>>0,he||Ge(this,j,Q,4,4294967295,0),this[Q+3]=j>>>24,this[Q+2]=j>>>16,this[Q+1]=j>>>8,this[Q]=j&255,Q+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(j,Q,he){return j=+j,Q=Q>>>0,he||Ge(this,j,Q,4,4294967295,0),this[Q]=j>>>24,this[Q+1]=j>>>16,this[Q+2]=j>>>8,this[Q+3]=j&255,Q+4};function Re(H,j,Q,he,Me){bt(j,he,Me,H,Q,7);let Ne=Number(j&BigInt(4294967295));H[Q++]=Ne,Ne=Ne>>8,H[Q++]=Ne,Ne=Ne>>8,H[Q++]=Ne,Ne=Ne>>8,H[Q++]=Ne;let Qe=Number(j>>BigInt(32)&BigInt(4294967295));return H[Q++]=Qe,Qe=Qe>>8,H[Q++]=Qe,Qe=Qe>>8,H[Q++]=Qe,Qe=Qe>>8,H[Q++]=Qe,Q}function St(H,j,Q,he,Me){bt(j,he,Me,H,Q,7);let Ne=Number(j&BigInt(4294967295));H[Q+7]=Ne,Ne=Ne>>8,H[Q+6]=Ne,Ne=Ne>>8,H[Q+5]=Ne,Ne=Ne>>8,H[Q+4]=Ne;let Qe=Number(j>>BigInt(32)&BigInt(4294967295));return H[Q+3]=Qe,Qe=Qe>>8,H[Q+2]=Qe,Qe=Qe>>8,H[Q+1]=Qe,Qe=Qe>>8,H[Q]=Qe,Q+8}a.prototype.writeBigUInt64LE=Bn(function(j,Q=0){return Re(this,j,Q,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Bn(function(j,Q=0){return St(this,j,Q,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(j,Q,he,Me){if(j=+j,Q=Q>>>0,!Me){const vt=Math.pow(2,8*he-1);Ge(this,j,Q,he,vt-1,-vt)}let Ne=0,Qe=1,it=0;for(this[Q]=j&255;++Ne<he&&(Qe*=256);)j<0&&it===0&&this[Q+Ne-1]!==0&&(it=1),this[Q+Ne]=(j/Qe>>0)-it&255;return Q+he},a.prototype.writeIntBE=function(j,Q,he,Me){if(j=+j,Q=Q>>>0,!Me){const vt=Math.pow(2,8*he-1);Ge(this,j,Q,he,vt-1,-vt)}let Ne=he-1,Qe=1,it=0;for(this[Q+Ne]=j&255;--Ne>=0&&(Qe*=256);)j<0&&it===0&&this[Q+Ne+1]!==0&&(it=1),this[Q+Ne]=(j/Qe>>0)-it&255;return Q+he},a.prototype.writeInt8=function(j,Q,he){return j=+j,Q=Q>>>0,he||Ge(this,j,Q,1,127,-128),j<0&&(j=255+j+1),this[Q]=j&255,Q+1},a.prototype.writeInt16LE=function(j,Q,he){return j=+j,Q=Q>>>0,he||Ge(this,j,Q,2,32767,-32768),this[Q]=j&255,this[Q+1]=j>>>8,Q+2},a.prototype.writeInt16BE=function(j,Q,he){return j=+j,Q=Q>>>0,he||Ge(this,j,Q,2,32767,-32768),this[Q]=j>>>8,this[Q+1]=j&255,Q+2},a.prototype.writeInt32LE=function(j,Q,he){return j=+j,Q=Q>>>0,he||Ge(this,j,Q,4,2147483647,-2147483648),this[Q]=j&255,this[Q+1]=j>>>8,this[Q+2]=j>>>16,this[Q+3]=j>>>24,Q+4},a.prototype.writeInt32BE=function(j,Q,he){return j=+j,Q=Q>>>0,he||Ge(this,j,Q,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[Q]=j>>>24,this[Q+1]=j>>>16,this[Q+2]=j>>>8,this[Q+3]=j&255,Q+4},a.prototype.writeBigInt64LE=Bn(function(j,Q=0){return Re(this,j,Q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Bn(function(j,Q=0){return St(this,j,Q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ut(H,j,Q,he,Me,Ne){if(Q+he>H.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("Index out of range")}function kt(H,j,Q,he,Me){return j=+j,Q=Q>>>0,Me||ut(H,j,Q,4),t.write(H,j,Q,he,23,4),Q+4}a.prototype.writeFloatLE=function(j,Q,he){return kt(this,j,Q,!0,he)},a.prototype.writeFloatBE=function(j,Q,he){return kt(this,j,Q,!1,he)};function Ut(H,j,Q,he,Me){return j=+j,Q=Q>>>0,Me||ut(H,j,Q,8),t.write(H,j,Q,he,52,8),Q+8}a.prototype.writeDoubleLE=function(j,Q,he){return Ut(this,j,Q,!0,he)},a.prototype.writeDoubleBE=function(j,Q,he){return Ut(this,j,Q,!1,he)},a.prototype.copy=function(j,Q,he,Me){if(!a.isBuffer(j))throw new TypeError("argument should be a Buffer");if(he||(he=0),!Me&&Me!==0&&(Me=this.length),Q>=j.length&&(Q=j.length),Q||(Q=0),Me>0&&Me<he&&(Me=he),Me===he||j.length===0||this.length===0)return 0;if(Q<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(Me<0)throw new RangeError("sourceEnd out of bounds");Me>this.length&&(Me=this.length),j.length-Q<Me-he&&(Me=j.length-Q+he);const Ne=Me-he;return this===j&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Q,he,Me):Uint8Array.prototype.set.call(j,this.subarray(he,Me),Q),Ne},a.prototype.fill=function(j,Q,he,Me){if(typeof j=="string"){if(typeof Q=="string"?(Me=Q,Q=0,he=this.length):typeof he=="string"&&(Me=he,he=this.length),Me!==void 0&&typeof Me!="string")throw new TypeError("encoding must be a string");if(typeof Me=="string"&&!a.isEncoding(Me))throw new TypeError("Unknown encoding: "+Me);if(j.length===1){const Qe=j.charCodeAt(0);(Me==="utf8"&&Qe<128||Me==="latin1")&&(j=Qe)}}else typeof j=="number"?j=j&255:typeof j=="boolean"&&(j=Number(j));if(Q<0||this.length<Q||this.length<he)throw new RangeError("Out of range index");if(he<=Q)return this;Q=Q>>>0,he=he===void 0?this.length:he>>>0,j||(j=0);let Ne;if(typeof j=="number")for(Ne=Q;Ne<he;++Ne)this[Ne]=j;else{const Qe=a.isBuffer(j)?j:a.from(j,Me),it=Qe.length;if(it===0)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for(Ne=0;Ne<he-Q;++Ne)this[Ne+Q]=Qe[Ne%it]}return this};const Le={};function ke(H,j,Q){Le[H]=class extends Q{constructor(){super(),Object.defineProperty(this,"message",{value:j.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${H}]`,this.stack,delete this.name}get code(){return H}set code(Me){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Me,writable:!0})}toString(){return`${this.name} [${H}]: ${this.message}`}}}ke("ERR_BUFFER_OUT_OF_BOUNDS",function(H){return H?`${H} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ke("ERR_INVALID_ARG_TYPE",function(H,j){return`The "${H}" argument must be of type number. Received type ${typeof j}`},TypeError),ke("ERR_OUT_OF_RANGE",function(H,j,Q){let he=`The value of "${H}" is out of range.`,Me=Q;return Number.isInteger(Q)&&Math.abs(Q)>2**32?Me=Oe(String(Q)):typeof Q=="bigint"&&(Me=String(Q),(Q>BigInt(2)**BigInt(32)||Q<-(BigInt(2)**BigInt(32)))&&(Me=Oe(Me)),Me+="n"),he+=` It must be ${j}. Received ${Me}`,he},RangeError);function Oe(H){let j="",Q=H.length;const he=H[0]==="-"?1:0;for(;Q>=he+4;Q-=3)j=`_${H.slice(Q-3,Q)}${j}`;return`${H.slice(0,Q)}${j}`}function Ze(H,j,Q){yt(j,"offset"),(H[j]===void 0||H[j+Q]===void 0)&&Mt(j,H.length-(Q+1))}function bt(H,j,Q,he,Me,Ne){if(H>Q||H<j){const Qe=typeof j=="bigint"?"n":"";let it;throw j===0||j===BigInt(0)?it=`>= 0${Qe} and < 2${Qe} ** ${(Ne+1)*8}${Qe}`:it=`>= -(2${Qe} ** ${(Ne+1)*8-1}${Qe}) and < 2 ** ${(Ne+1)*8-1}${Qe}`,new Le.ERR_OUT_OF_RANGE("value",it,H)}Ze(he,Me,Ne)}function yt(H,j){if(typeof H!="number")throw new Le.ERR_INVALID_ARG_TYPE(j,"number",H)}function Mt(H,j,Q){throw Math.floor(H)!==H?(yt(H,Q),new Le.ERR_OUT_OF_RANGE("offset","an integer",H)):j<0?new Le.ERR_BUFFER_OUT_OF_BOUNDS:new Le.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${j}`,H)}const Kt=/[^+/0-9A-Za-z-_]/g;function Dt(H){if(H=H.split("=")[0],H=H.trim().replace(Kt,""),H.length<2)return"";for(;H.length%4!==0;)H=H+"=";return H}function en(H,j){j=j||1/0;let Q;const he=H.length;let Me=null;const Ne=[];for(let Qe=0;Qe<he;++Qe){if(Q=H.charCodeAt(Qe),Q>55295&&Q<57344){if(!Me){if(Q>56319){(j-=3)>-1&&Ne.push(239,191,189);continue}else if(Qe+1===he){(j-=3)>-1&&Ne.push(239,191,189);continue}Me=Q;continue}if(Q<56320){(j-=3)>-1&&Ne.push(239,191,189),Me=Q;continue}Q=(Me-55296<<10|Q-56320)+65536}else Me&&(j-=3)>-1&&Ne.push(239,191,189);if(Me=null,Q<128){if((j-=1)<0)break;Ne.push(Q)}else if(Q<2048){if((j-=2)<0)break;Ne.push(Q>>6|192,Q&63|128)}else if(Q<65536){if((j-=3)<0)break;Ne.push(Q>>12|224,Q>>6&63|128,Q&63|128)}else if(Q<1114112){if((j-=4)<0)break;Ne.push(Q>>18|240,Q>>12&63|128,Q>>6&63|128,Q&63|128)}else throw new Error("Invalid code point")}return Ne}function Gn(H){const j=[];for(let Q=0;Q<H.length;++Q)j.push(H.charCodeAt(Q)&255);return j}function Nn(H,j){let Q,he,Me;const Ne=[];for(let Qe=0;Qe<H.length&&!((j-=2)<0);++Qe)Q=H.charCodeAt(Qe),he=Q>>8,Me=Q%256,Ne.push(Me),Ne.push(he);return Ne}function Si(H){return e.toByteArray(Dt(H))}function Un(H,j,Q,he){let Me;for(Me=0;Me<he&&!(Me+Q>=j.length||Me>=H.length);++Me)j[Me+Q]=H[Me];return Me}function Ln(H,j){return H instanceof j||H!=null&&H.constructor!=null&&H.constructor.name!=null&&H.constructor.name===j.name}function Tn(H){return H!==H}const ti=(function(){const H="0123456789abcdef",j=new Array(256);for(let Q=0;Q<16;++Q){const he=Q*16;for(let Me=0;Me<16;++Me)j[he+Me]=H[Q]+H[Me]}return j})();function Bn(H){return typeof BigInt>"u"?je:H}function je(){throw new Error("BigInt not supported")}})(kO)),kO}var iue=nue();const rue=vu(iue);var DO,az;function oue(){if(az)return DO;az=1;var n="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",i="[object GeneratorFunction]",r="[object Symbol]",o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/,a=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/[\\^$.*+?()[\]{}|]/g,m=/\\(\\)?/g,v=/^\[object .+?Constructor\]$/,M=typeof window=="object"&&window&&window.Object===Object&&window,B=typeof self=="object"&&self&&self.Object===Object&&self,P=M||B||Function("return this")();function U($e,ot){return $e?.[ot]}function z($e){var ot=!1;if($e!=null&&typeof $e.toString!="function")try{ot=!!($e+"")}catch{}return ot}var V=Array.prototype,Z=Function.prototype,X=Object.prototype,re=P["__core-js_shared__"],ie=(function(){var $e=/[^.]+$/.exec(re&&re.keys&&re.keys.IE_PROTO||"");return $e?"Symbol(src)_1."+$e:""})(),te=Z.toString,q=X.hasOwnProperty,le=X.toString,ce=RegExp("^"+te.call(q).replace(d,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ve=P.Symbol,ge=V.splice,Ee=Si(P,"Map"),xe=Si(Object,"create"),Te=ve?ve.prototype:void 0,Fe=Te?Te.toString:void 0;function Ie($e){var ot=-1,b=$e?$e.length:0;for(this.clear();++ot<b;){var Rt=$e[ot];this.set(Rt[0],Rt[1])}}function Ye(){this.__data__=xe?xe(null):{}}function At($e){return this.has($e)&&delete this.__data__[$e]}function mt($e){var ot=this.__data__;if(xe){var b=ot[$e];return b===e?void 0:b}return q.call(ot,$e)?ot[$e]:void 0}function Ue($e){var ot=this.__data__;return xe?ot[$e]!==void 0:q.call(ot,$e)}function De($e,ot){var b=this.__data__;return b[$e]=xe&&ot===void 0?e:ot,this}Ie.prototype.clear=Ye,Ie.prototype.delete=At,Ie.prototype.get=mt,Ie.prototype.has=Ue,Ie.prototype.set=De;function Ge($e){var ot=-1,b=$e?$e.length:0;for(this.clear();++ot<b;){var Rt=$e[ot];this.set(Rt[0],Rt[1])}}function Re(){this.__data__=[]}function St($e){var ot=this.__data__,b=Mt(ot,$e);if(b<0)return!1;var Rt=ot.length-1;return b==Rt?ot.pop():ge.call(ot,b,1),!0}function ut($e){var ot=this.__data__,b=Mt(ot,$e);return b<0?void 0:ot[b][1]}function kt($e){return Mt(this.__data__,$e)>-1}function Ut($e,ot){var b=this.__data__,Rt=Mt(b,$e);return Rt<0?b.push([$e,ot]):b[Rt][1]=ot,this}Ge.prototype.clear=Re,Ge.prototype.delete=St,Ge.prototype.get=ut,Ge.prototype.has=kt,Ge.prototype.set=Ut;function Le($e){var ot=-1,b=$e?$e.length:0;for(this.clear();++ot<b;){var Rt=$e[ot];this.set(Rt[0],Rt[1])}}function ke(){this.__data__={hash:new Ie,map:new(Ee||Ge),string:new Ie}}function Oe($e){return Nn(this,$e).delete($e)}function Ze($e){return Nn(this,$e).get($e)}function bt($e){return Nn(this,$e).has($e)}function yt($e,ot){return Nn(this,$e).set($e,ot),this}Le.prototype.clear=ke,Le.prototype.delete=Oe,Le.prototype.get=Ze,Le.prototype.has=bt,Le.prototype.set=yt;function Mt($e,ot){for(var b=$e.length;b--;)if(j($e[b][0],ot))return b;return-1}function Kt($e,ot){ot=Un(ot,$e)?[ot]:Gn(ot);for(var b=0,Rt=ot.length;$e!=null&&b<Rt;)$e=$e[Bn(ot[b++])];return b&&b==Rt?$e:void 0}function Dt($e){if(!Me($e)||Tn($e))return!1;var ot=he($e)||z($e)?ce:v;return ot.test(je($e))}function en($e){if(typeof $e=="string")return $e;if(Qe($e))return Fe?Fe.call($e):"";var ot=$e+"";return ot=="0"&&1/$e==-1/0?"-0":ot}function Gn($e){return Q($e)?$e:ti($e)}function Nn($e,ot){var b=$e.__data__;return Ln(ot)?b[typeof ot=="string"?"string":"hash"]:b.map}function Si($e,ot){var b=U($e,ot);return Dt(b)?b:void 0}function Un($e,ot){if(Q($e))return!1;var b=typeof $e;return b=="number"||b=="symbol"||b=="boolean"||$e==null||Qe($e)?!0:s.test($e)||!o.test($e)||ot!=null&&$e in Object(ot)}function Ln($e){var ot=typeof $e;return ot=="string"||ot=="number"||ot=="symbol"||ot=="boolean"?$e!=="__proto__":$e===null}function Tn($e){return!!ie&&ie in $e}var ti=H(function($e){$e=it($e);var ot=[];return a.test($e)&&ot.push(""),$e.replace(c,function(b,Rt,mn,bn){ot.push(mn?bn.replace(m,"$1"):Rt||b)}),ot});function Bn($e){if(typeof $e=="string"||Qe($e))return $e;var ot=$e+"";return ot=="0"&&1/$e==-1/0?"-0":ot}function je($e){if($e!=null){try{return te.call($e)}catch{}try{return $e+""}catch{}}return""}function H($e,ot){if(typeof $e!="function"||ot&&typeof ot!="function")throw new TypeError(n);var b=function(){var Rt=arguments,mn=ot?ot.apply(this,Rt):Rt[0],bn=b.cache;if(bn.has(mn))return bn.get(mn);var Cn=$e.apply(this,Rt);return b.cache=bn.set(mn,Cn),Cn};return b.cache=new(H.Cache||Le),b}H.Cache=Le;function j($e,ot){return $e===ot||$e!==$e&&ot!==ot}var Q=Array.isArray;function he($e){var ot=Me($e)?le.call($e):"";return ot==t||ot==i}function Me($e){var ot=typeof $e;return!!$e&&(ot=="object"||ot=="function")}function Ne($e){return!!$e&&typeof $e=="object"}function Qe($e){return typeof $e=="symbol"||Ne($e)&&le.call($e)==r}function it($e){return $e==null?"":en($e)}function vt($e,ot,b){var Rt=$e==null?void 0:Kt($e,ot);return Rt===void 0?b:Rt}return DO=vt,DO}var sue=oue();const aue=vu(sue);var K3={exports:{}};var lue=K3.exports,lz;function uue(){return lz||(lz=1,(function(n,e){(function(){var t,i="4.17.21",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",d=500,m="__lodash_placeholder__",v=1,M=2,B=4,P=1,U=2,z=1,V=2,Z=4,X=8,re=16,ie=32,te=64,q=128,le=256,ce=512,ve=30,ge="...",Ee=800,xe=16,Te=1,Fe=2,Ie=3,Ye=1/0,At=9007199254740991,mt=17976931348623157e292,Ue=NaN,De=4294967295,Ge=De-1,Re=De>>>1,St=[["ary",q],["bind",z],["bindKey",V],["curry",X],["curryRight",re],["flip",ce],["partial",ie],["partialRight",te],["rearg",le]],ut="[object Arguments]",kt="[object Array]",Ut="[object AsyncFunction]",Le="[object Boolean]",ke="[object Date]",Oe="[object DOMException]",Ze="[object Error]",bt="[object Function]",yt="[object GeneratorFunction]",Mt="[object Map]",Kt="[object Number]",Dt="[object Null]",en="[object Object]",Gn="[object Promise]",Nn="[object Proxy]",Si="[object RegExp]",Un="[object Set]",Ln="[object String]",Tn="[object Symbol]",ti="[object Undefined]",Bn="[object WeakMap]",je="[object WeakSet]",H="[object ArrayBuffer]",j="[object DataView]",Q="[object Float32Array]",he="[object Float64Array]",Me="[object Int8Array]",Ne="[object Int16Array]",Qe="[object Int32Array]",it="[object Uint8Array]",vt="[object Uint8ClampedArray]",$e="[object Uint16Array]",ot="[object Uint32Array]",b=/\b__p \+= '';/g,Rt=/\b(__p \+=) '' \+/g,mn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bn=/&(?:amp|lt|gt|quot|#39);/g,Cn=/[&<>"']/g,xt=RegExp(bn.source),Ci=RegExp(Cn.source),Ki=/<%-([\s\S]+?)%>/g,Wn=/<%([\s\S]+?)%>/g,Hn=/<%=([\s\S]+?)%>/g,Qi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wi=/^\w*$/,Ri=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qi=/[\\^$.*+?()[\]{}|]/g,Li=RegExp(qi.source),Er=/^\s+/,xo=/\s/,un=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,tr=/\{\n\/\* \[wrapped with (.+)\] \*/,Wo=/,? & /,ra=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,oo=/[()=,{}\[\]\/\s]/,kn=/\\(\\)?/g,Xi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ui=/\w*$/,Ka=/^[-+]0x[0-9a-f]+$/i,yA=/^0b[01]+$/i,xl=/^\[object .+?Constructor\]$/,Vi=/^0o[0-7]+$/i,Qu=/^(?:0|[1-9]\d*)$/,co=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$a=/($^)/,Ml=/['\n\r\u2028\u2029\\]/g,Fa="\\ud800-\\udfff",Ro="\\u0300-\\u036f",gc="\\ufe20-\\ufe2f",Qo="\\u20d0-\\u20ff",mr=Ro+gc+Qo,za="\\u2700-\\u27bf",Zo="a-z\\xdf-\\xf6\\xf8-\\xff",bu="\\xac\\xb1\\xd7\\xf7",Cu="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ul="\\u2000-\\u206f",Vc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",cl="A-Z\\xc0-\\xd6\\xd8-\\xde",ja="\\ufe0e\\ufe0f",lr=bu+Cu+ul+Vc,qu="[']",wl="["+Fa+"]",Sl="["+lr+"]",_u="["+mr+"]",yc="\\d+",Rh="["+za+"]",Vs="["+Zo+"]",vc="[^"+Fa+lr+yc+za+Zo+cl+"]",Yl="\\ud83c[\\udffb-\\udfff]",$c="(?:"+_u+"|"+Yl+")",Vl="[^"+Fa+"]",$l="(?:\\ud83c[\\udde6-\\uddff]){2}",hs="[\\ud800-\\udbff][\\udc00-\\udfff]",Mo="["+cl+"]",Hl="\\u200d",xu="(?:"+Vs+"|"+vc+")",Es="(?:"+Mo+"|"+vc+")",Mu="(?:"+qu+"(?:d|ll|m|re|s|t|ve))?",Zl="(?:"+qu+"(?:D|LL|M|RE|S|T|VE))?",Yu=$c+"?",Ji="["+ja+"]?",Ha="(?:"+Hl+"(?:"+[Vl,$l,hs].join("|")+")"+Ji+Yu+")*",Xo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Vu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Jo=Ji+Yu+Ha,Ao="(?:"+[Rh,$l,hs].join("|")+")"+Jo,ho="(?:"+[Vl+_u+"?",_u,$l,hs,wl].join("|")+")",_i=RegExp(qu,"g"),to=RegExp(_u,"g"),$s=RegExp(Yl+"(?="+Yl+")|"+ho+Jo,"g"),go=RegExp([Mo+"?"+Vs+"+"+Mu+"(?="+[Sl,Mo,"$"].join("|")+")",Es+"+"+Zl+"(?="+[Sl,Mo+xu,"$"].join("|")+")",Mo+"?"+xu+"+"+Mu,Mo+"+"+Zl,Vu,Xo,yc,Ao].join("|"),"g"),Fs=RegExp("["+Hl+Fa+mr+ja+"]"),Yr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,oa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Za=-1,$i={};$i[Q]=$i[he]=$i[Me]=$i[Ne]=$i[Qe]=$i[it]=$i[vt]=$i[$e]=$i[ot]=!0,$i[ut]=$i[kt]=$i[H]=$i[Le]=$i[j]=$i[ke]=$i[Ze]=$i[bt]=$i[Mt]=$i[Kt]=$i[en]=$i[Si]=$i[Un]=$i[Ln]=$i[Bn]=!1;var Tr={};Tr[ut]=Tr[kt]=Tr[H]=Tr[j]=Tr[Le]=Tr[ke]=Tr[Q]=Tr[he]=Tr[Me]=Tr[Ne]=Tr[Qe]=Tr[Mt]=Tr[Kt]=Tr[en]=Tr[Si]=Tr[Un]=Tr[Ln]=Tr[Tn]=Tr[it]=Tr[vt]=Tr[$e]=Tr[ot]=!0,Tr[Ze]=Tr[bt]=Tr[Bn]=!1;var ne={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Ce={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},He={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Et={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Qn=parseFloat,Dn=parseInt,Oi=typeof window=="object"&&window&&window.Object===Object&&window,Fi=typeof self=="object"&&self&&self.Object===Object&&self,qn=Oi||Fi||Function("return this")(),Ei=e&&!e.nodeType&&e,ei=Ei&&!0&&n&&!n.nodeType&&n,ri=ei&&ei.exports===Ei,hr=ri&&Oi.process,ni=(function(){try{var Tt=ei&&ei.require&&ei.require("util").types;return Tt||hr&&hr.binding&&hr.binding("util")}catch{}})(),Kr=ni&&ni.isArrayBuffer,wo=ni&&ni.isDate,Po=ni&&ni.isMap,ds=ni&&ni.isRegExp,eh=ni&&ni.isSet,El=ni&&ni.isTypedArray;function fs(Tt,an,tn){switch(tn.length){case 0:return Tt.call(an);case 1:return Tt.call(an,tn[0]);case 2:return Tt.call(an,tn[0],tn[1]);case 3:return Tt.call(an,tn[0],tn[1],tn[2])}return Tt.apply(an,tn)}function Nv(Tt,an,tn,mi){for(var pr=-1,Fr=Tt==null?0:Tt.length;++pr<Fr;){var ps=Tt[pr];an(mi,ps,tn(ps),Tt)}return mi}function wu(Tt,an){for(var tn=-1,mi=Tt==null?0:Tt.length;++tn<mi&&an(Tt[tn],tn,Tt)!==!1;);return Tt}function Xl(Tt,an){for(var tn=Tt==null?0:Tt.length;tn--&&an(Tt[tn],tn,Tt)!==!1;);return Tt}function Hc(Tt,an){for(var tn=-1,mi=Tt==null?0:Tt.length;++tn<mi;)if(!an(Tt[tn],tn,Tt))return!1;return!0}function yo(Tt,an){for(var tn=-1,mi=Tt==null?0:Tt.length,pr=0,Fr=[];++tn<mi;){var ps=Tt[tn];an(ps,tn,Tt)&&(Fr[pr++]=ps)}return Fr}function vA(Tt,an){var tn=Tt==null?0:Tt.length;return!!tn&&bA(Tt,an,0)>-1}function Pd(Tt,an,tn){for(var mi=-1,pr=Tt==null?0:Tt.length;++mi<pr;)if(tn(an,Tt[mi]))return!0;return!1}function qo(Tt,an){for(var tn=-1,mi=Tt==null?0:Tt.length,pr=Array(mi);++tn<mi;)pr[tn]=an(Tt[tn],tn,Tt);return pr}function Eo(Tt,an){for(var tn=-1,mi=an.length,pr=Tt.length;++tn<mi;)Tt[pr+tn]=an[tn];return Tt}function $m(Tt,an,tn,mi){var pr=-1,Fr=Tt==null?0:Tt.length;for(mi&&Fr&&(tn=Tt[++pr]);++pr<Fr;)tn=an(tn,Tt[pr],pr,Tt);return tn}function Hm(Tt,an,tn,mi){var pr=Tt==null?0:Tt.length;for(mi&&pr&&(tn=Tt[--pr]);pr--;)tn=an(tn,Tt[pr],pr,Tt);return tn}function Zm(Tt,an){for(var tn=-1,mi=Tt==null?0:Tt.length;++tn<mi;)if(an(Tt[tn],tn,Tt))return!0;return!1}var Gv=Ph("length");function Sf(Tt){return Tt.split("")}function Xm(Tt){return Tt.match(ra)||[]}function Ld(Tt,an,tn){var mi;return tn(Tt,function(pr,Fr,ps){if(an(pr,Fr,ps))return mi=Fr,!1}),mi}function Ef(Tt,an,tn,mi){for(var pr=Tt.length,Fr=tn+(mi?1:-1);mi?Fr--:++Fr<pr;)if(an(Tt[Fr],Fr,Tt))return Fr;return-1}function bA(Tt,an,tn){return an===an?Pp(Tt,an,tn):Ef(Tt,Ud,tn)}function Bf(Tt,an,tn,mi){for(var pr=tn-1,Fr=Tt.length;++pr<Fr;)if(mi(Tt[pr],an))return pr;return-1}function Ud(Tt){return Tt!==Tt}function zs(Tt,an){var tn=Tt==null?0:Tt.length;return tn?Jm(Tt,an)/tn:Ue}function Ph(Tt){return function(an){return an==null?t:an[Tt]}}function Lh(Tt){return function(an){return Tt==null?t:Tt[an]}}function Kd(Tt,an,tn,mi,pr){return pr(Tt,function(Fr,ps,Lo){tn=mi?(mi=!1,Fr):an(tn,Fr,ps,Lo)}),tn}function Uh(Tt,an){var tn=Tt.length;for(Tt.sort(an);tn--;)Tt[tn]=Tt[tn].value;return Tt}function Jm(Tt,an){for(var tn,mi=-1,pr=Tt.length;++mi<pr;){var Fr=an(Tt[mi]);Fr!==t&&(tn=tn===t?Fr:tn+Fr)}return tn}function Fd(Tt,an){for(var tn=-1,mi=Array(Tt);++tn<Tt;)mi[tn]=an(tn);return mi}function $1(Tt,an){return qo(an,function(tn){return[tn,Tt[tn]]})}function bc(Tt){return Tt&&Tt.slice(0,nh(Tt)+1).replace(Er,"")}function Bl(Tt){return function(an){return Tt(an)}}function e0(Tt,an){return qo(an,function(tn){return Tt[tn]})}function Of(Tt,an){return Tt.has(an)}function Ip(Tt,an){for(var tn=-1,mi=Tt.length;++tn<mi&&bA(an,Tt[tn],0)>-1;);return tn}function Tp(Tt,an){for(var tn=Tt.length;tn--&&bA(an,Tt[tn],0)>-1;);return tn}function zd(Tt,an){for(var tn=Tt.length,mi=0;tn--;)Tt[tn]===an&&++mi;return mi}var If=Lh(ne),H1=Lh(Ce);function kp(Tt){return"\\"+Et[Tt]}function Kh(Tt,an){return Tt==null?t:Tt[an]}function Fh(Tt){return Fs.test(Tt)}function Dp(Tt){return Yr.test(Tt)}function zh(Tt){for(var an,tn=[];!(an=Tt.next()).done;)tn.push(an.value);return tn}function Rp(Tt){var an=-1,tn=Array(Tt.size);return Tt.forEach(function(mi,pr){tn[++an]=[pr,mi]}),tn}function Tf(Tt,an){return function(tn){return Tt(an(tn))}}function th(Tt,an){for(var tn=-1,mi=Tt.length,pr=0,Fr=[];++tn<mi;){var ps=Tt[tn];(ps===an||ps===m)&&(Tt[tn]=m,Fr[pr++]=tn)}return Fr}function t0(Tt){var an=-1,tn=Array(Tt.size);return Tt.forEach(function(mi){tn[++an]=mi}),tn}function Z1(Tt){var an=-1,tn=Array(Tt.size);return Tt.forEach(function(mi){tn[++an]=[mi,mi]}),tn}function Pp(Tt,an,tn){for(var mi=tn-1,pr=Tt.length;++mi<pr;)if(Tt[mi]===an)return mi;return-1}function X1(Tt,an,tn){for(var mi=tn+1;mi--;)if(Tt[mi]===an)return mi;return mi}function jh(Tt){return Fh(Tt)?Lp(Tt):Gv(Tt)}function Bs(Tt){return Fh(Tt)?n0(Tt):Sf(Tt)}function nh(Tt){for(var an=Tt.length;an--&&xo.test(Tt.charAt(an)););return an}var Cc=Lh(He);function Lp(Tt){for(var an=$s.lastIndex=0;$s.test(Tt);)++an;return an}function n0(Tt){return Tt.match($s)||[]}function i0(Tt){return Tt.match(go)||[]}var Up=(function Tt(an){an=an==null?qn:ih.defaults(qn.Object(),an,ih.pick(qn,oa));var tn=an.Array,mi=an.Date,pr=an.Error,Fr=an.Function,ps=an.Math,Lo=an.Object,Vr=an.RegExp,CA=an.String,Ol=an.TypeError,Nh=tn.prototype,r0=Fr.prototype,_c=Lo.prototype,Gh=an["__core-js_shared__"],rh=r0.toString,Cr=_c.hasOwnProperty,kg=0,Kp=(function(){var w=/[^.]+$/.exec(Gh&&Gh.keys&&Gh.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""})(),Il=_c.toString,_A=rh.call(Lo),Jl=qn._,oh=Vr("^"+rh.call(Cr).replace(qi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xA=ri?an.Buffer:t,Su=an.Symbol,Wh=an.Uint8Array,sh=xA?xA.allocUnsafe:t,eu=Tf(Lo.getPrototypeOf,Lo),o0=Lo.create,jd=_c.propertyIsEnumerable,or=Nh.splice,Fp=Su?Su.isConcatSpreadable:t,Al=Su?Su.iterator:t,MA=Su?Su.toStringTag:t,Tl=(function(){try{var w=rA(Lo,"defineProperty");return w({},"",{}),w}catch{}})(),J1=an.clearTimeout!==qn.clearTimeout&&an.clearTimeout,s0=mi&&mi.now!==qn.Date.now&&mi.now,Qh=an.setTimeout!==qn.setTimeout&&an.setTimeout,kf=ps.ceil,Nd=ps.floor,wA=Lo.getOwnPropertySymbols,zp=xA?xA.isBuffer:t,kl=an.isFinite,qh=Nh.join,Yh=Tf(Lo.keys,Lo),ms=ps.max,js=ps.min,Xa=mi.now,Ja=an.parseInt,Zc=ps.random,SA=Nh.reverse,Dl=rA(an,"DataView"),$u=rA(an,"Map"),jp=rA(an,"Promise"),xc=rA(an,"Set"),EA=rA(an,"WeakMap"),Gd=rA(Lo,"create"),sa=EA&&new EA,so={},Rr=Ea(Dl),ah=Ea($u),Hu=Ea(jp),Os=Ea(xc),Eu=Ea(EA),Rl=Su?Su.prototype:t,lh=Rl?Rl.valueOf:t,Xc=Rl?Rl.toString:t;function qe(w){if(da(w)&&!gr(w)&&!(w instanceof ur)){if(w instanceof xa)return w;if(Cr.call(w,"__wrapped__"))return ay(w)}return new xa(w)}var tu=(function(){function w(){}return function(R){if(!vs(R))return{};if(o0)return o0(R);w.prototype=R;var Y=new w;return w.prototype=t,Y}})();function Mc(){}function xa(w,R){this.__wrapped__=w,this.__actions__=[],this.__chain__=!!R,this.__index__=0,this.__values__=t}qe.templateSettings={escape:Ki,evaluate:Wn,interpolate:Hn,variable:"",imports:{_:qe}},qe.prototype=Mc.prototype,qe.prototype.constructor=qe,xa.prototype=tu(Mc.prototype),xa.prototype.constructor=xa;function ur(w){this.__wrapped__=w,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=De,this.__views__=[]}function BA(){var w=new ur(this.__wrapped__);return w.__actions__=kr(this.__actions__),w.__dir__=this.__dir__,w.__filtered__=this.__filtered__,w.__iteratees__=kr(this.__iteratees__),w.__takeCount__=this.__takeCount__,w.__views__=kr(this.__views__),w}function uh(){if(this.__filtered__){var w=new ur(this);w.__dir__=-1,w.__filtered__=!0}else w=this.clone(),w.__dir__*=-1;return w}function OA(){var w=this.__wrapped__.value(),R=this.__dir__,Y=gr(w),de=R<0,Pe=Y?w.length:0,et=$2(0,Pe,this.__views__),gt=et.start,Bt=et.end,Lt=Bt-gt,wn=de?Bt:gt-1,h=this.__iteratees__,l=h.length,A=0,y=js(Lt,this.__takeCount__);if(!Y||!de&&Pe==Lt&&y==Lt)return rt(w,this.__actions__);var _=[];e:for(;Lt--&&A<y;){wn+=R;for(var E=-1,O=w[wn];++E<l;){var D=h[E],F=D.iteratee,W=D.type,ee=F(O);if(W==Fe)O=ee;else if(!ee){if(W==Te)continue e;break e}}_[A++]=O}return _}ur.prototype=tu(Mc.prototype),ur.prototype.constructor=ur;function IA(w){var R=-1,Y=w==null?0:w.length;for(this.clear();++R<Y;){var de=w[R];this.set(de[0],de[1])}}function a0(){this.__data__=Gd?Gd(null):{},this.size=0}function wc(w){var R=this.has(w)&&delete this.__data__[w];return this.size-=R?1:0,R}function Df(w){var R=this.__data__;if(Gd){var Y=R[w];return Y===c?t:Y}return Cr.call(R,w)?R[w]:t}function ch(w){var R=this.__data__;return Gd?R[w]!==t:Cr.call(R,w)}function aa(w,R){var Y=this.__data__;return this.size+=this.has(w)?0:1,Y[w]=Gd&&R===t?c:R,this}IA.prototype.clear=a0,IA.prototype.delete=wc,IA.prototype.get=Df,IA.prototype.has=ch,IA.prototype.set=aa;function Zu(w){var R=-1,Y=w==null?0:w.length;for(this.clear();++R<Y;){var de=w[R];this.set(de[0],de[1])}}function l0(){this.__data__=[],this.size=0}function Dg(w){var R=this.__data__,Y=kA(R,w);if(Y<0)return!1;var de=R.length-1;return Y==de?R.pop():or.call(R,Y,1),--this.size,!0}function ey(w){var R=this.__data__,Y=kA(R,w);return Y<0?t:R[Y][1]}function Rg(w){return kA(this.__data__,w)>-1}function Is(w,R){var Y=this.__data__,de=kA(Y,w);return de<0?(++this.size,Y.push([w,R])):Y[de][1]=R,this}Zu.prototype.clear=l0,Zu.prototype.delete=Dg,Zu.prototype.get=ey,Zu.prototype.has=Rg,Zu.prototype.set=Is;function Pl(w){var R=-1,Y=w==null?0:w.length;for(this.clear();++R<Y;){var de=w[R];this.set(de[0],de[1])}}function Ll(){this.size=0,this.__data__={hash:new IA,map:new($u||Zu),string:new IA}}function nu(w){var R=sd(this,w).delete(w);return this.size-=R?1:0,R}function u0(w){return sd(this,w).get(w)}function Ul(w){return sd(this,w).has(w)}function Rf(w,R){var Y=sd(this,w),de=Y.size;return Y.set(w,R),this.size+=Y.size==de?0:1,this}Pl.prototype.clear=Ll,Pl.prototype.delete=nu,Pl.prototype.get=u0,Pl.prototype.has=Ul,Pl.prototype.set=Rf;function Sc(w){var R=-1,Y=w==null?0:w.length;for(this.__data__=new Pl;++R<Y;)this.add(w[R])}function Pf(w){return this.__data__.set(w,c),this}function Np(w){return this.__data__.has(w)}Sc.prototype.add=Sc.prototype.push=Pf,Sc.prototype.has=Np;function Ts(w){var R=this.__data__=new Zu(w);this.size=R.size}function Jc(){this.__data__=new Zu,this.size=0}function Gp(w){var R=this.__data__,Y=R.delete(w);return this.size=R.size,Y}function Vh(w){return this.__data__.get(w)}function TA(w){return this.__data__.has(w)}function Fn(w,R){var Y=this.__data__;if(Y instanceof Zu){var de=Y.__data__;if(!$u||de.length<r-1)return de.push([w,R]),this.size=++Y.size,this;Y=this.__data__=new Pl(de)}return Y.set(w,R),this.size=Y.size,this}Ts.prototype.clear=Jc,Ts.prototype.delete=Gp,Ts.prototype.get=Vh,Ts.prototype.has=TA,Ts.prototype.set=Fn;function Lf(w,R){var Y=gr(w),de=!Y&&tf(w),Pe=!Y&&!de&&Hf(w),et=!Y&&!de&&!Pe&&dd(w),gt=Y||de||Pe||et,Bt=gt?Fd(w.length,CA):[],Lt=Bt.length;for(var wn in w)(R||Cr.call(w,wn))&&!(gt&&(wn=="length"||Pe&&(wn=="offset"||wn=="parent")||et&&(wn=="buffer"||wn=="byteLength"||wn=="byteOffset")||gh(wn,Lt)))&&Bt.push(wn);return Bt}function Ah(w){var R=w.length;return R?w[nd(0,R-1)]:t}function Wp(w,R){return Gf(kr(w),Bu(R,0,w.length))}function $h(w){return Gf(kr(w))}function Hh(w,R,Y){(Y!==t&&!Fl(w[R],Y)||Y===t&&!(R in w))&&Xu(w,R,Y)}function hl(w,R,Y){var de=w[R];(!(Cr.call(w,R)&&Fl(de,Y))||Y===t&&!(R in w))&&Xu(w,R,Y)}function kA(w,R){for(var Y=w.length;Y--;)if(Fl(w[Y][0],R))return Y;return-1}function c0(w,R,Y,de){return tA(w,function(Pe,et,gt){R(de,Pe,Y(Pe),gt)}),de}function A0(w,R){return w&&Dr(R,gl(R),w)}function Ec(w,R){return w&&Dr(R,lc(R),w)}function Xu(w,R,Y){R=="__proto__"&&Tl?Tl(w,R,{configurable:!0,enumerable:!0,value:Y,writable:!0}):w[R]=Y}function Wd(w,R){for(var Y=-1,de=R.length,Pe=tn(de),et=w==null;++Y<de;)Pe[Y]=et?t:zl(w,R[Y]);return Pe}function Bu(w,R,Y){return w===w&&(Y!==t&&(w=w<=Y?w:Y),R!==t&&(w=w>=R?w:R)),w}function iu(w,R,Y,de,Pe,et){var gt,Bt=R&v,Lt=R&M,wn=R&B;if(Y&&(gt=Pe?Y(w,de,Pe,et):Y(w)),gt!==t)return gt;if(!vs(w))return w;var h=gr(w);if(h){if(gt=Wv(w),!Bt)return kr(w,gt)}else{var l=lu(w),A=l==bt||l==yt;if(Hf(w))return Gt(w,Bt);if(l==en||l==ut||A&&!Pe){if(gt=Lt||A?{}:jg(w),!Bt)return Lt?es(w,Ec(gt,w)):Ma(w,A0(gt,w))}else{if(!Tr[l])return Pe?w:{};gt=Qv(w,l,Bt)}}et||(et=new Ts);var y=et.get(w);if(y)return y;et.set(w,gt),hd(w)?w.forEach(function(O){gt.add(iu(O,R,Y,O,w,et))}):D0(w)&&w.forEach(function(O,D){gt.set(D,iu(O,R,Y,D,w,et))});var _=wn?Lt?Kg:jf:Lt?lc:gl,E=h?t:_(w);return wu(E||w,function(O,D){E&&(D=O,O=w[D]),hl(gt,D,iu(O,R,Y,D,w,et))}),gt}function Qp(w){var R=gl(w);return function(Y){return eA(Y,w,R)}}function eA(w,R,Y){var de=Y.length;if(w==null)return!de;for(w=Lo(w);de--;){var Pe=Y[de],et=R[Pe],gt=w[Pe];if(gt===t&&!(Pe in w)||!et(gt))return!1}return!0}function qp(w,R,Y){if(typeof w!="function")throw new Ol(s);return v0(function(){w.apply(t,Y)},R)}function Ju(w,R,Y,de){var Pe=-1,et=vA,gt=!0,Bt=w.length,Lt=[],wn=R.length;if(!Bt)return Lt;Y&&(R=qo(R,Bl(Y))),de?(et=Pd,gt=!1):R.length>=r&&(et=Of,gt=!1,R=new Sc(R));e:for(;++Pe<Bt;){var h=w[Pe],l=Y==null?h:Y(h);if(h=de||h!==0?h:0,gt&&l===l){for(var A=wn;A--;)if(R[A]===l)continue e;Lt.push(h)}else et(R,l,de)||Lt.push(h)}return Lt}var tA=ks(ec),Bc=ks(Yp,!0);function zr(w,R){var Y=!0;return tA(w,function(de,Pe,et){return Y=!!R(de,Pe,et),Y}),Y}function Oc(w,R,Y){for(var de=-1,Pe=w.length;++de<Pe;){var et=w[de],gt=R(et);if(gt!=null&&(Bt===t?gt===gt&&!Iu(gt):Y(gt,Bt)))var Bt=gt,Lt=et}return Lt}function Zh(w,R,Y,de){var Pe=w.length;for(Y=Di(Y),Y<0&&(Y=-Y>Pe?0:Pe+Y),de=de===t||de>Pe?Pe:Di(de),de<0&&(de+=Pe),de=Y>de?0:uA(de);Y<de;)w[Y++]=R;return w}function Xh(w,R){var Y=[];return tA(w,function(de,Pe,et){R(de,Pe,et)&&Y.push(de)}),Y}function la(w,R,Y,de,Pe){var et=-1,gt=w.length;for(Y||(Y=qv),Pe||(Pe=[]);++et<gt;){var Bt=w[et];R>0&&Y(Bt)?R>1?la(Bt,R-1,Y,de,Pe):Eo(Pe,Bt):de||(Pe[Pe.length]=Bt)}return Pe}var hh=Na(),Qd=Na(!0);function ec(w,R){return w&&hh(w,R,gl)}function Yp(w,R){return w&&Qd(w,R,gl)}function el(w,R){return yo(R,function(Y){return Kc(w[Y])})}function tc(w,R){R=lt(R,w);for(var Y=0,de=R.length;w!=null&&Y<de;)w=w[rc(R[Y++])];return Y&&Y==de?w:t}function di(w,R,Y){var de=R(w);return gr(w)?de:Eo(de,Y(w))}function si(w){return w==null?w===t?ti:Dt:MA&&MA in Lo(w)?Nf(w):$v(w)}function DA(w,R){return w>R}function ru(w,R){return w!=null&&Cr.call(w,R)}function tl(w,R){return w!=null&&R in Lo(w)}function Hs(w,R,Y){return w>=js(R,Y)&&w<ms(R,Y)}function dl(w,R,Y){for(var de=Y?Pd:vA,Pe=w[0].length,et=w.length,gt=et,Bt=tn(et),Lt=1/0,wn=[];gt--;){var h=w[gt];gt&&R&&(h=qo(h,Bl(R))),Lt=js(h.length,Lt),Bt[gt]=!Y&&(R||Pe>=120&&h.length>=120)?new Sc(gt&&h):t}h=w[0];var l=-1,A=Bt[0];e:for(;++l<Pe&&wn.length<Lt;){var y=h[l],_=R?R(y):y;if(y=Y||y!==0?y:0,!(A?Of(A,_):de(wn,_,Y))){for(gt=et;--gt;){var E=Bt[gt];if(!(E?Of(E,_):de(w[gt],_,Y)))continue e}A&&A.push(_),wn.push(y)}}return wn}function Pg(w,R,Y,de){return ec(w,function(Pe,et,gt){R(de,Y(Pe),et,gt)}),de}function Ic(w,R,Y){R=lt(R,w),w=y0(w,R);var de=w==null?w:w[rc(is(R))];return de==null?t:fs(de,w,Y)}function ou(w){return da(w)&&si(w)==ut}function Zs(w){return da(w)&&si(w)==H}function dh(w){return da(w)&&si(w)==ke}function $r(w,R,Y,de,Pe){return w===R?!0:w==null||R==null||!da(w)&&!da(R)?w!==w&&R!==R:ki(w,R,Y,de,$r,Pe)}function ki(w,R,Y,de,Pe,et){var gt=gr(w),Bt=gr(R),Lt=gt?kt:lu(w),wn=Bt?kt:lu(R);Lt=Lt==ut?en:Lt,wn=wn==ut?en:wn;var h=Lt==en,l=wn==en,A=Lt==wn;if(A&&Hf(w)){if(!Hf(R))return!1;gt=!0,h=!1}if(A&&!h)return et||(et=new Ts),gt||dd(w)?rd(w,R,Y,de,Pe,et):m0(w,R,Lt,Y,de,Pe,et);if(!(Y&P)){var y=h&&Cr.call(w,"__wrapped__"),_=l&&Cr.call(R,"__wrapped__");if(y||_){var E=y?w.value():w,O=_?R.value():R;return et||(et=new Ts),Pe(E,O,Y,de,et)}}return A?(et||(et=new Ts),od(w,R,Y,de,Pe,et)):!1}function Uo(w){return da(w)&&lu(w)==Mt}function ls(w,R,Y,de){var Pe=Y.length,et=Pe,gt=!de;if(w==null)return!et;for(w=Lo(w);Pe--;){var Bt=Y[Pe];if(gt&&Bt[2]?Bt[1]!==w[Bt[0]]:!(Bt[0]in w))return!1}for(;++Pe<et;){Bt=Y[Pe];var Lt=Bt[0],wn=w[Lt],h=Bt[1];if(gt&&Bt[2]){if(wn===t&&!(Lt in w))return!1}else{var l=new Ts;if(de)var A=de(wn,h,Lt,w,R,l);if(!(A===t?$r(h,wn,P|U,de,l):A))return!1}}return!0}function Jh(w){if(!vs(w)||Yv(w))return!1;var R=Kc(w)?oh:xl;return R.test(Ea(w))}function nc(w){return da(w)&&si(w)==Si}function fh(w){return da(w)&&lu(w)==Un}function Uf(w){return da(w)&&l1(w.length)&&!!$i[si(w)]}function RA(w){return typeof w=="function"?w:w==null?Du:typeof w=="object"?gr(w)?Yd(w[0],w[1]):qd(w):Ve(w)}function nA(w){if(!ad(w))return Yh(w);var R=[];for(var Y in Lo(w))Cr.call(w,Y)&&Y!="constructor"&&R.push(Y);return R}function Lg(w){if(!vs(w))return ld(w);var R=ad(w),Y=[];for(var de in w)de=="constructor"&&(R||!Cr.call(w,de))||Y.push(de);return Y}function us(w,R){return w<R}function Tc(w,R){var Y=-1,de=sc(w)?tn(w.length):[];return tA(w,function(Pe,et,gt){de[++Y]=R(Pe,et,gt)}),de}function qd(w){var R=ty(w);return R.length==1&&R[0][2]?Gg(R[0][0],R[0][1]):function(Y){return Y===w||ls(Y,w,R)}}function Yd(w,R){return g0(w)&&Xs(R)?Gg(rc(w),R):function(Y){var de=zl(Y,w);return de===t&&de===R?pd(Y,w):$r(R,de,P|U)}}function ed(w,R,Y,de,Pe){w!==R&&hh(R,function(et,gt){if(Pe||(Pe=new Ts),vs(et))Vp(w,R,gt,Y,ed,de,Pe);else{var Bt=de?de(ns(w,gt),et,gt+"",w,R,Pe):t;Bt===t&&(Bt=et),Hh(w,gt,Bt)}},lc)}function Vp(w,R,Y,de,Pe,et,gt){var Bt=ns(w,Y),Lt=ns(R,Y),wn=gt.get(Lt);if(wn){Hh(w,Y,wn);return}var h=et?et(Bt,Lt,Y+"",w,R,gt):t,l=h===t;if(l){var A=gr(Lt),y=!A&&Hf(Lt),_=!A&&!y&&dd(Lt);h=Lt,A||y||_?gr(Bt)?h=Bt:Ga(Bt)?h=kr(Bt):y?(l=!1,h=Gt(Lt,!0)):_?(l=!1,h=ai(Lt,!0)):h=[]:R0(Lt)||tf(Lt)?(h=Bt,tf(Bt)?h=hu(Bt):(!vs(Bt)||Kc(Bt))&&(h=jg(Lt))):l=!1}l&&(gt.set(Lt,h),Pe(h,Lt,de,et,gt),gt.delete(Lt)),Hh(w,Y,h)}function Kf(w,R){var Y=w.length;if(Y)return R+=R<0?Y:0,gh(R,Y)?w[R]:t}function PA(w,R,Y){R.length?R=qo(R,function(et){return gr(et)?function(gt){return tc(gt,et.length===1?et[0]:et)}:et}):R=[Du];var de=-1;R=qo(R,Bl(ir()));var Pe=Tc(w,function(et,gt,Bt){var Lt=qo(R,function(wn){return wn(et)});return{criteria:Lt,index:++de,value:et}});return Uh(Pe,function(et,gt){return fo(et,gt,Y)})}function ph(w,R){return nl(w,R,function(Y,de){return pd(w,de)})}function nl(w,R,Y){for(var de=-1,Pe=R.length,et={};++de<Pe;){var gt=R[de],Bt=tc(w,gt);Y(Bt,gt)&&C(et,lt(gt,w),Bt)}return et}function gs(w){return function(R){return tc(R,w)}}function kc(w,R,Y,de){var Pe=de?Bf:bA,et=-1,gt=R.length,Bt=w;for(w===R&&(R=kr(R)),Y&&(Bt=qo(w,Bl(Y)));++et<gt;)for(var Lt=0,wn=R[et],h=Y?Y(wn):wn;(Lt=Pe(Bt,h,Lt,de))>-1;)Bt!==w&&or.call(Bt,Lt,1),or.call(w,Lt,1);return w}function td(w,R){for(var Y=w?R.length:0,de=Y-1;Y--;){var Pe=R[Y];if(Y==de||Pe!==et){var et=Pe;gh(Pe)?or.call(w,Pe,1):Je(w,Pe)}}return w}function nd(w,R){return w+Nd(Zc()*(R-w+1))}function Ff(w,R,Y,de){for(var Pe=-1,et=ms(kf((R-w)/(Y||1)),0),gt=tn(et);et--;)gt[de?et:++Pe]=w,w+=Y;return gt}function ic(w,R){var Y="";if(!w||R<1||R>At)return Y;do R%2&&(Y+=w),R=Nd(R/2),R&&(w+=w);while(R);return Y}function I(w,R){return sy(Hv(w,R,Du),w+"")}function u(w){return Ah(um(w))}function p(w,R){var Y=um(w);return Gf(Y,Bu(R,0,Y.length))}function C(w,R,Y,de){if(!vs(w))return w;R=lt(R,w);for(var Pe=-1,et=R.length,gt=et-1,Bt=w;Bt!=null&&++Pe<et;){var Lt=rc(R[Pe]),wn=Y;if(Lt==="__proto__"||Lt==="constructor"||Lt==="prototype")return w;if(Pe!=gt){var h=Bt[Lt];wn=de?de(h,Lt,Bt):t,wn===t&&(wn=vs(h)?h:gh(R[Pe+1])?[]:{})}hl(Bt,Lt,wn),Bt=Bt[Lt]}return w}var S=sa?function(w,R){return sa.set(w,R),w}:Du,k=Tl?function(w,R){return Tl(w,"toString",{configurable:!0,enumerable:!1,value:rp(R),writable:!0})}:Du;function K(w){return Gf(um(w))}function N(w,R,Y){var de=-1,Pe=w.length;R<0&&(R=-R>Pe?0:Pe+R),Y=Y>Pe?Pe:Y,Y<0&&(Y+=Pe),Pe=R>Y?0:Y-R>>>0,R>>>=0;for(var et=tn(Pe);++de<Pe;)et[de]=w[de+R];return et}function $(w,R){var Y;return tA(w,function(de,Pe,et){return Y=R(de,Pe,et),!Y}),!!Y}function se(w,R,Y){var de=0,Pe=w==null?de:w.length;if(typeof R=="number"&&R===R&&Pe<=Re){for(;de<Pe;){var et=de+Pe>>>1,gt=w[et];gt!==null&&!Iu(gt)&&(Y?gt<=R:gt<R)?de=et+1:Pe=et}return Pe}return ue(w,R,Du,Y)}function ue(w,R,Y,de){var Pe=0,et=w==null?0:w.length;if(et===0)return 0;R=Y(R);for(var gt=R!==R,Bt=R===null,Lt=Iu(R),wn=R===t;Pe<et;){var h=Nd((Pe+et)/2),l=Y(w[h]),A=l!==t,y=l===null,_=l===l,E=Iu(l);if(gt)var O=de||_;else wn?O=_&&(de||A):Bt?O=_&&A&&(de||!y):Lt?O=_&&A&&!y&&(de||!E):y||E?O=!1:O=de?l<=R:l<R;O?Pe=h+1:et=h}return js(et,Ge)}function ye(w,R){for(var Y=-1,de=w.length,Pe=0,et=[];++Y<de;){var gt=w[Y],Bt=R?R(gt):gt;if(!Y||!Fl(Bt,Lt)){var Lt=Bt;et[Pe++]=gt===0?0:gt}}return et}function me(w){return typeof w=="number"?w:Iu(w)?Ue:+w}function Se(w){if(typeof w=="string")return w;if(gr(w))return qo(w,Se)+"";if(Iu(w))return Xc?Xc.call(w):"";var R=w+"";return R=="0"&&1/w==-Ye?"-0":R}function Ke(w,R,Y){var de=-1,Pe=vA,et=w.length,gt=!0,Bt=[],Lt=Bt;if(Y)gt=!1,Pe=Pd;else if(et>=r){var wn=R?null:f0(w);if(wn)return t0(wn);gt=!1,Pe=Of,Lt=new Sc}else Lt=R?[]:Bt;e:for(;++de<et;){var h=w[de],l=R?R(h):h;if(h=Y||h!==0?h:0,gt&&l===l){for(var A=Lt.length;A--;)if(Lt[A]===l)continue e;R&&Lt.push(l),Bt.push(h)}else Pe(Lt,l,Y)||(Lt!==Bt&&Lt.push(l),Bt.push(h))}return Bt}function Je(w,R){return R=lt(R,w),w=y0(w,R),w==null||delete w[rc(is(R))]}function nt(w,R,Y,de){return C(w,R,Y(tc(w,R)),de)}function tt(w,R,Y,de){for(var Pe=w.length,et=de?Pe:-1;(de?et--:++et<Pe)&&R(w[et],et,w););return Y?N(w,de?0:et,de?et+1:Pe):N(w,de?et+1:0,de?Pe:et)}function rt(w,R){var Y=w;return Y instanceof ur&&(Y=Y.value()),$m(R,function(de,Pe){return Pe.func.apply(Pe.thisArg,Eo([de],Pe.args))},Y)}function dt(w,R,Y){var de=w.length;if(de<2)return de?Ke(w[0]):[];for(var Pe=-1,et=tn(de);++Pe<de;)for(var gt=w[Pe],Bt=-1;++Bt<de;)Bt!=Pe&&(et[Pe]=Ju(et[Pe]||gt,w[Bt],R,Y));return Ke(la(et,1),R,Y)}function st(w,R,Y){for(var de=-1,Pe=w.length,et=R.length,gt={};++de<Pe;){var Bt=de<et?R[de]:t;Y(gt,w[de],Bt)}return gt}function ft(w){return Ga(w)?w:[]}function Ct(w){return typeof w=="function"?w:Du}function lt(w,R){return gr(w)?w:g0(w,R)?[w]:Qg(cr(w))}var Ot=I;function Ft(w,R,Y){var de=w.length;return Y=Y===t?de:Y,!R&&Y>=de?w:N(w,R,Y)}var zt=J1||function(w){return qn.clearTimeout(w)};function Gt(w,R){if(R)return w.slice();var Y=w.length,de=sh?sh(Y):new w.constructor(Y);return w.copy(de),de}function Qt(w){var R=new w.constructor(w.byteLength);return new Wh(R).set(new Wh(w)),R}function dn(w,R){var Y=R?Qt(w.buffer):w.buffer;return new w.constructor(Y,w.byteOffset,w.byteLength)}function Rn(w){var R=new w.constructor(w.source,ui.exec(w));return R.lastIndex=w.lastIndex,R}function An(w){return lh?Lo(lh.call(w)):{}}function ai(w,R){var Y=R?Qt(w.buffer):w.buffer;return new w.constructor(Y,w.byteOffset,w.length)}function nr(w,R){if(w!==R){var Y=w!==t,de=w===null,Pe=w===w,et=Iu(w),gt=R!==t,Bt=R===null,Lt=R===R,wn=Iu(R);if(!Bt&&!wn&&!et&&w>R||et&&gt&&Lt&&!Bt&&!wn||de&&gt&&Lt||!Y&&Lt||!Pe)return 1;if(!de&&!et&&!wn&&w<R||wn&&Y&&Pe&&!de&&!et||Bt&&Y&&Pe||!gt&&Pe||!Lt)return-1}return 0}function fo(w,R,Y){for(var de=-1,Pe=w.criteria,et=R.criteria,gt=Pe.length,Bt=Y.length;++de<gt;){var Lt=nr(Pe[de],et[de]);if(Lt){if(de>=Bt)return Lt;var wn=Y[de];return Lt*(wn=="desc"?-1:1)}}return w.index-R.index}function Bo(w,R,Y,de){for(var Pe=-1,et=w.length,gt=Y.length,Bt=-1,Lt=R.length,wn=ms(et-gt,0),h=tn(Lt+wn),l=!de;++Bt<Lt;)h[Bt]=R[Bt];for(;++Pe<gt;)(l||Pe<et)&&(h[Y[Pe]]=w[Pe]);for(;wn--;)h[Bt++]=w[Pe++];return h}function po(w,R,Y,de){for(var Pe=-1,et=w.length,gt=-1,Bt=Y.length,Lt=-1,wn=R.length,h=ms(et-Bt,0),l=tn(h+wn),A=!de;++Pe<h;)l[Pe]=w[Pe];for(var y=Pe;++Lt<wn;)l[y+Lt]=R[Lt];for(;++gt<Bt;)(A||Pe<et)&&(l[y+Y[gt]]=w[Pe++]);return l}function kr(w,R){var Y=-1,de=w.length;for(R||(R=tn(de));++Y<de;)R[Y]=w[Y];return R}function Dr(w,R,Y,de){var Pe=!Y;Y||(Y={});for(var et=-1,gt=R.length;++et<gt;){var Bt=R[et],Lt=de?de(Y[Bt],w[Bt],Bt,Y,w):t;Lt===t&&(Lt=w[Bt]),Pe?Xu(Y,Bt,Lt):hl(Y,Bt,Lt)}return Y}function Ma(w,R){return Dr(w,$p(w),R)}function es(w,R){return Dr(w,zg(w),R)}function Ns(w,R){return function(Y,de){var Pe=gr(Y)?Nv:c0,et=R?R():{};return Pe(Y,w,ir(de,2),et)}}function Ko(w){return I(function(R,Y){var de=-1,Pe=Y.length,et=Pe>1?Y[Pe-1]:t,gt=Pe>2?Y[2]:t;for(et=w.length>3&&typeof et=="function"?(Pe--,et):t,gt&&uu(Y[0],Y[1],gt)&&(et=Pe<3?t:et,Pe=1),R=Lo(R);++de<Pe;){var Bt=Y[de];Bt&&w(R,Bt,de,et)}return R})}function ks(w,R){return function(Y,de){if(Y==null)return Y;if(!sc(Y))return w(Y,de);for(var Pe=Y.length,et=R?Pe:-1,gt=Lo(Y);(R?et--:++et<Pe)&&de(gt[et],et,gt)!==!1;);return Y}}function Na(w){return function(R,Y,de){for(var Pe=-1,et=Lo(R),gt=de(R),Bt=gt.length;Bt--;){var Lt=gt[w?Bt:++Pe];if(Y(et[Lt],Lt,et)===!1)break}return R}}function fl(w,R,Y){var de=R&z,Pe=iA(w);function et(){var gt=this&&this!==qn&&this instanceof et?Pe:w;return gt.apply(de?Y:this,arguments)}return et}function Dc(w){return function(R){R=cr(R);var Y=Fh(R)?Bs(R):t,de=Y?Y[0]:R.charAt(0),Pe=Y?Ft(Y,1).join(""):R.slice(1);return de[w]()+Pe}}function Ou(w){return function(R){return $m(w_(z0(R).replace(_i,"")),w,"")}}function iA(w){return function(){var R=arguments;switch(R.length){case 0:return new w;case 1:return new w(R[0]);case 2:return new w(R[0],R[1]);case 3:return new w(R[0],R[1],R[2]);case 4:return new w(R[0],R[1],R[2],R[3]);case 5:return new w(R[0],R[1],R[2],R[3],R[4]);case 6:return new w(R[0],R[1],R[2],R[3],R[4],R[5]);case 7:return new w(R[0],R[1],R[2],R[3],R[4],R[5],R[6])}var Y=tu(w.prototype),de=w.apply(Y,R);return vs(de)?de:Y}}function h0(w,R,Y){var de=iA(w);function Pe(){for(var et=arguments.length,gt=tn(et),Bt=et,Lt=Aa(Pe);Bt--;)gt[Bt]=arguments[Bt];var wn=et<3&&gt[0]!==Lt&&gt[et-1]!==Lt?[]:th(gt,Lt);if(et-=wn.length,et<Y)return d0(w,R,Gs,Pe.placeholder,t,gt,wn,t,t,Y-et);var h=this&&this!==qn&&this instanceof Pe?de:w;return fs(h,this,gt)}return Pe}function id(w){return function(R,Y,de){var Pe=Lo(R);if(!sc(R)){var et=ir(Y,3);R=gl(R),Y=function(Bt){return et(Pe[Bt],Bt,Pe)}}var gt=w(R,Y,de);return gt>-1?Pe[et?R[gt]:gt]:t}}function su(w){return Rc(function(R){var Y=R.length,de=Y,Pe=xa.prototype.thru;for(w&&R.reverse();de--;){var et=R[de];if(typeof et!="function")throw new Ol(s);if(Pe&&!gt&&Ws(et)=="wrapper")var gt=new xa([],!0)}for(de=gt?de:Y;++de<Y;){et=R[de];var Bt=Ws(et),Lt=Bt=="wrapper"?Fg(et):t;Lt&&Hp(Lt[0])&&Lt[1]==(q|X|ie|le)&&!Lt[4].length&&Lt[9]==1?gt=gt[Ws(Lt[0])].apply(gt,Lt[3]):gt=et.length==1&&Hp(et)?gt[Bt]():gt.thru(et)}return function(){var wn=arguments,h=wn[0];if(gt&&wn.length==1&&gr(h))return gt.plant(h).value();for(var l=0,A=Y?R[l].apply(this,wn):h;++l<Y;)A=R[l].call(this,A);return A}})}function Gs(w,R,Y,de,Pe,et,gt,Bt,Lt,wn){var h=R&q,l=R&z,A=R&V,y=R&(X|re),_=R&ce,E=A?t:iA(w);function O(){for(var D=arguments.length,F=tn(D),W=D;W--;)F[W]=arguments[W];if(y)var ee=Aa(O),ae=zd(F,ee);if(de&&(F=Bo(F,de,Pe,y)),et&&(F=po(F,et,gt,y)),D-=ae,y&&D<wn){var Ae=th(F,ee);return d0(w,R,Gs,O.placeholder,Y,F,Ae,Bt,Lt,wn-D)}var fe=l?Y:this,be=A?fe[w]:w;return D=F.length,Bt?F=Wg(F,Bt):_&&D>1&&F.reverse(),h&&Lt<D&&(F.length=Lt),this&&this!==qn&&this instanceof O&&(be=E||iA(be)),be.apply(fe,F)}return O}function wa(w,R){return function(Y,de){return Pg(Y,w,R(de),{})}}function ua(w,R){return function(Y,de){var Pe;if(Y===t&&de===t)return R;if(Y!==t&&(Pe=Y),de!==t){if(Pe===t)return de;typeof Y=="string"||typeof de=="string"?(Y=Se(Y),de=Se(de)):(Y=me(Y),de=me(de)),Pe=w(Y,de)}return Pe}}function au(w){return Rc(function(R){return R=qo(R,Bl(ir())),I(function(Y){var de=this;return w(R,function(Pe){return fs(Pe,de,Y)})})})}function ts(w,R){R=R===t?" ":Se(R);var Y=R.length;if(Y<2)return Y?ic(R,w):R;var de=ic(R,kf(w/jh(R)));return Fh(R)?Ft(Bs(de),0,w).join(""):de.slice(0,w)}function Sa(w,R,Y,de){var Pe=R&z,et=iA(w);function gt(){for(var Bt=-1,Lt=arguments.length,wn=-1,h=de.length,l=tn(h+Lt),A=this&&this!==qn&&this instanceof gt?et:w;++wn<h;)l[wn]=de[wn];for(;Lt--;)l[wn++]=arguments[++Bt];return fs(A,Pe?Y:this,l)}return gt}function Kl(w){return function(R,Y,de){return de&&typeof de!="number"&&uu(R,Y,de)&&(Y=de=t),R=Au(R),Y===t?(Y=R,R=0):Y=Au(Y),de=de===t?R<Y?1:-1:Au(de),Ff(R,Y,de,w)}}function Yo(w){return function(R,Y){return typeof R=="string"&&typeof Y=="string"||(R=ml(R),Y=ml(Y)),w(R,Y)}}function d0(w,R,Y,de,Pe,et,gt,Bt,Lt,wn){var h=R&X,l=h?gt:t,A=h?t:gt,y=h?et:t,_=h?t:et;R|=h?ie:te,R&=~(h?te:ie),R&Z||(R&=-4);var E=[w,R,Pe,y,l,_,A,Bt,Lt,wn],O=Y.apply(t,E);return Hp(w)&&Zv(O,E),O.placeholder=de,b0(O,w,R)}function zf(w){var R=ps[w];return function(Y,de){if(Y=ml(Y),de=de==null?0:js(Di(de),292),de&&kl(Y)){var Pe=(cr(Y)+"e").split("e"),et=R(Pe[0]+"e"+(+Pe[1]+de));return Pe=(cr(et)+"e").split("e"),+(Pe[0]+"e"+(+Pe[1]-de))}return R(Y)}}var f0=xc&&1/t0(new xc([,-0]))[1]==Ye?function(w){return new xc(w)}:x;function p0(w){return function(R){var Y=lu(R);return Y==Mt?Rp(R):Y==Un?Z1(R):$1(R,w(R))}}function ca(w,R,Y,de,Pe,et,gt,Bt){var Lt=R&V;if(!Lt&&typeof w!="function")throw new Ol(s);var wn=de?de.length:0;if(wn||(R&=-97,de=Pe=t),gt=gt===t?gt:ms(Di(gt),0),Bt=Bt===t?Bt:Di(Bt),wn-=Pe?Pe.length:0,R&te){var h=de,l=Pe;de=Pe=t}var A=Lt?t:Fg(w),y=[w,R,Y,de,Pe,h,l,et,gt,Bt];if(A&&JC(y,A),w=y[0],R=y[1],Y=y[2],de=y[3],Pe=y[4],Bt=y[9]=y[9]===t?Lt?0:w.length:ms(y[9]-wn,0),!Bt&&R&(X|re)&&(R&=-25),!R||R==z)var _=fl(w,R,Y);else R==X||R==re?_=h0(w,R,Bt):(R==ie||R==(z|ie))&&!Pe.length?_=Sa(w,R,Y,de):_=Gs.apply(t,y);var E=A?S:Zv;return b0(E(_,y),w,R)}function mh(w,R,Y,de){return w===t||Fl(w,_c[Y])&&!Cr.call(de,Y)?R:w}function LA(w,R,Y,de,Pe,et){return vs(w)&&vs(R)&&(et.set(R,w),ed(w,R,t,LA,et),et.delete(R)),w}function Ug(w){return R0(w)?t:w}function rd(w,R,Y,de,Pe,et){var gt=Y&P,Bt=w.length,Lt=R.length;if(Bt!=Lt&&!(gt&&Lt>Bt))return!1;var wn=et.get(w),h=et.get(R);if(wn&&h)return wn==R&&h==w;var l=-1,A=!0,y=Y&U?new Sc:t;for(et.set(w,R),et.set(R,w);++l<Bt;){var _=w[l],E=R[l];if(de)var O=gt?de(E,_,l,R,w,et):de(_,E,l,w,R,et);if(O!==t){if(O)continue;A=!1;break}if(y){if(!Zm(R,function(D,F){if(!Of(y,F)&&(_===D||Pe(_,D,Y,de,et)))return y.push(F)})){A=!1;break}}else if(!(_===E||Pe(_,E,Y,de,et))){A=!1;break}}return et.delete(w),et.delete(R),A}function m0(w,R,Y,de,Pe,et,gt){switch(Y){case j:if(w.byteLength!=R.byteLength||w.byteOffset!=R.byteOffset)return!1;w=w.buffer,R=R.buffer;case H:return!(w.byteLength!=R.byteLength||!et(new Wh(w),new Wh(R)));case Le:case ke:case Kt:return Fl(+w,+R);case Ze:return w.name==R.name&&w.message==R.message;case Si:case Ln:return w==R+"";case Mt:var Bt=Rp;case Un:var Lt=de&P;if(Bt||(Bt=t0),w.size!=R.size&&!Lt)return!1;var wn=gt.get(w);if(wn)return wn==R;de|=U,gt.set(w,R);var h=rd(Bt(w),Bt(R),de,Pe,et,gt);return gt.delete(w),h;case Tn:if(lh)return lh.call(w)==lh.call(R)}return!1}function od(w,R,Y,de,Pe,et){var gt=Y&P,Bt=jf(w),Lt=Bt.length,wn=jf(R),h=wn.length;if(Lt!=h&&!gt)return!1;for(var l=Lt;l--;){var A=Bt[l];if(!(gt?A in R:Cr.call(R,A)))return!1}var y=et.get(w),_=et.get(R);if(y&&_)return y==R&&_==w;var E=!0;et.set(w,R),et.set(R,w);for(var O=gt;++l<Lt;){A=Bt[l];var D=w[A],F=R[A];if(de)var W=gt?de(F,D,A,R,w,et):de(D,F,A,w,R,et);if(!(W===t?D===F||Pe(D,F,Y,de,et):W)){E=!1;break}O||(O=A=="constructor")}if(E&&!O){var ee=w.constructor,ae=R.constructor;ee!=ae&&"constructor"in w&&"constructor"in R&&!(typeof ee=="function"&&ee instanceof ee&&typeof ae=="function"&&ae instanceof ae)&&(E=!1)}return et.delete(w),et.delete(R),E}function Rc(w){return sy(Hv(w,t,Ds),w+"")}function jf(w){return di(w,gl,$p)}function Kg(w){return di(w,lc,zg)}var Fg=sa?function(w){return sa.get(w)}:x;function Ws(w){for(var R=w.name+"",Y=so[R],de=Cr.call(so,R)?Y.length:0;de--;){var Pe=Y[de],et=Pe.func;if(et==null||et==w)return Pe.name}return R}function Aa(w){var R=Cr.call(qe,"placeholder")?qe:w;return R.placeholder}function ir(){var w=qe.iteratee||G0;return w=w===G0?RA:w,arguments.length?w(arguments[0],arguments[1]):w}function sd(w,R){var Y=w.__data__;return oy(R)?Y[typeof R=="string"?"string":"hash"]:Y.map}function ty(w){for(var R=gl(w),Y=R.length;Y--;){var de=R[Y],Pe=w[de];R[Y]=[de,Pe,Xs(Pe)]}return R}function rA(w,R){var Y=Kh(w,R);return Jh(Y)?Y:t}function Nf(w){var R=Cr.call(w,MA),Y=w[MA];try{w[MA]=t;var de=!0}catch{}var Pe=Il.call(w);return de&&(R?w[MA]=Y:delete w[MA]),Pe}var $p=wA?function(w){return w==null?[]:(w=Lo(w),yo(wA(w),function(R){return jd.call(w,R)}))}:gn,zg=wA?function(w){for(var R=[];w;)Eo(R,$p(w)),w=eu(w);return R}:gn,lu=si;(Dl&&lu(new Dl(new ArrayBuffer(1)))!=j||$u&&lu(new $u)!=Mt||jp&&lu(jp.resolve())!=Gn||xc&&lu(new xc)!=Un||EA&&lu(new EA)!=Bn)&&(lu=function(w){var R=si(w),Y=R==en?w.constructor:t,de=Y?Ea(Y):"";if(de)switch(de){case Rr:return j;case ah:return Mt;case Hu:return Gn;case Os:return Un;case Eu:return Bn}return R});function $2(w,R,Y){for(var de=-1,Pe=Y.length;++de<Pe;){var et=Y[de],gt=et.size;switch(et.type){case"drop":w+=gt;break;case"dropRight":R-=gt;break;case"take":R=js(R,w+gt);break;case"takeRight":w=ms(w,R-gt);break}}return{start:w,end:R}}function ny(w){var R=w.match(tr);return R?R[1].split(Wo):[]}function iy(w,R,Y){R=lt(R,w);for(var de=-1,Pe=R.length,et=!1;++de<Pe;){var gt=rc(R[de]);if(!(et=w!=null&&Y(w,gt)))break;w=w[gt]}return et||++de!=Pe?et:(Pe=w==null?0:w.length,!!Pe&&l1(Pe)&&gh(gt,Pe)&&(gr(w)||tf(w)))}function Wv(w){var R=w.length,Y=new w.constructor(R);return R&&typeof w[0]=="string"&&Cr.call(w,"index")&&(Y.index=w.index,Y.input=w.input),Y}function jg(w){return typeof w.constructor=="function"&&!ad(w)?tu(eu(w)):{}}function Qv(w,R,Y){var de=w.constructor;switch(R){case H:return Qt(w);case Le:case ke:return new de(+w);case j:return dn(w,Y);case Q:case he:case Me:case Ne:case Qe:case it:case vt:case $e:case ot:return ai(w,Y);case Mt:return new de;case Kt:case Ln:return new de(w);case Si:return Rn(w);case Un:return new de;case Tn:return An(w)}}function ry(w,R){var Y=R.length;if(!Y)return w;var de=Y-1;return R[de]=(Y>1?"& ":"")+R[de],R=R.join(Y>2?", ":" "),w.replace(un,`{
/* [wrapped with `+R+`] */
`)}function qv(w){return gr(w)||tf(w)||!!(Fp&&w&&w[Fp])}function gh(w,R){var Y=typeof w;return R=R??At,!!R&&(Y=="number"||Y!="symbol"&&Qu.test(w))&&w>-1&&w%1==0&&w<R}function uu(w,R,Y){if(!vs(Y))return!1;var de=typeof R;return(de=="number"?sc(Y)&&gh(R,Y.length):de=="string"&&R in Y)?Fl(Y[R],w):!1}function g0(w,R){if(gr(w))return!1;var Y=typeof w;return Y=="number"||Y=="symbol"||Y=="boolean"||w==null||Iu(w)?!0:Wi.test(w)||!Qi.test(w)||R!=null&&w in Lo(R)}function oy(w){var R=typeof w;return R=="string"||R=="number"||R=="symbol"||R=="boolean"?w!=="__proto__":w===null}function Hp(w){var R=Ws(w),Y=qe[R];if(typeof Y!="function"||!(R in ur.prototype))return!1;if(w===Y)return!0;var de=Fg(Y);return!!de&&w===de[0]}function Yv(w){return!!Kp&&Kp in w}var Ng=Gh?Kc:Zt;function ad(w){var R=w&&w.constructor,Y=typeof R=="function"&&R.prototype||_c;return w===Y}function Xs(w){return w===w&&!vs(w)}function Gg(w,R){return function(Y){return Y==null?!1:Y[w]===R&&(R!==t||w in Lo(Y))}}function Vv(w){var R=O0(w,function(de){return Y.size===d&&Y.clear(),de}),Y=R.cache;return R}function JC(w,R){var Y=w[1],de=R[1],Pe=Y|de,et=Pe<(z|V|q),gt=de==q&&Y==X||de==q&&Y==le&&w[7].length<=R[8]||de==(q|le)&&R[7].length<=R[8]&&Y==X;if(!(et||gt))return w;de&z&&(w[2]=R[2],Pe|=Y&z?0:Z);var Bt=R[3];if(Bt){var Lt=w[3];w[3]=Lt?Bo(Lt,Bt,R[4]):Bt,w[4]=Lt?th(w[3],m):R[4]}return Bt=R[5],Bt&&(Lt=w[5],w[5]=Lt?po(Lt,Bt,R[6]):Bt,w[6]=Lt?th(w[5],m):R[6]),Bt=R[7],Bt&&(w[7]=Bt),de&q&&(w[8]=w[8]==null?R[8]:js(w[8],R[8])),w[9]==null&&(w[9]=R[9]),w[0]=R[0],w[1]=Pe,w}function ld(w){var R=[];if(w!=null)for(var Y in Lo(w))R.push(Y);return R}function $v(w){return Il.call(w)}function Hv(w,R,Y){return R=ms(R===t?w.length-1:R,0),function(){for(var de=arguments,Pe=-1,et=ms(de.length-R,0),gt=tn(et);++Pe<et;)gt[Pe]=de[R+Pe];Pe=-1;for(var Bt=tn(R+1);++Pe<R;)Bt[Pe]=de[Pe];return Bt[R]=Y(gt),fs(w,this,Bt)}}function y0(w,R){return R.length<2?w:tc(w,N(R,0,-1))}function Wg(w,R){for(var Y=w.length,de=js(R.length,Y),Pe=kr(w);de--;){var et=R[de];w[de]=gh(et,Y)?Pe[et]:t}return w}function ns(w,R){if(!(R==="constructor"&&typeof w[R]=="function")&&R!="__proto__")return w[R]}var Zv=Vd(S),v0=Qh||function(w,R){return qn.setTimeout(w,R)},sy=Vd(k);function b0(w,R,Y){var de=R+"";return sy(w,ry(de,C0(ny(de),Y)))}function Vd(w){var R=0,Y=0;return function(){var de=Xa(),Pe=xe-(de-Y);if(Y=de,Pe>0){if(++R>=Ee)return arguments[0]}else R=0;return w.apply(t,arguments)}}function Gf(w,R){var Y=-1,de=w.length,Pe=de-1;for(R=R===t?de:R;++Y<R;){var et=nd(Y,Pe),gt=w[et];w[et]=w[Y],w[Y]=gt}return w.length=R,w}var Qg=Vv(function(w){var R=[];return w.charCodeAt(0)===46&&R.push(""),w.replace(Ri,function(Y,de,Pe,et){R.push(Pe?et.replace(kn,"$1"):de||Y)}),R});function rc(w){if(typeof w=="string"||Iu(w))return w;var R=w+"";return R=="0"&&1/w==-Ye?"-0":R}function Ea(w){if(w!=null){try{return rh.call(w)}catch{}try{return w+""}catch{}}return""}function C0(w,R){return wu(St,function(Y){var de="_."+Y[0];R&Y[1]&&!vA(w,de)&&w.push(de)}),w.sort()}function ay(w){if(w instanceof ur)return w.clone();var R=new xa(w.__wrapped__,w.__chain__);return R.__actions__=kr(w.__actions__),R.__index__=w.__index__,R.__values__=w.__values__,R}function e_(w,R,Y){(Y?uu(w,R,Y):R===t)?R=1:R=ms(Di(R),0);var de=w==null?0:w.length;if(!de||R<1)return[];for(var Pe=0,et=0,gt=tn(kf(de/R));Pe<de;)gt[et++]=N(w,Pe,Pe+=R);return gt}function Xv(w){for(var R=-1,Y=w==null?0:w.length,de=0,Pe=[];++R<Y;){var et=w[R];et&&(Pe[de++]=et)}return Pe}function Jv(){var w=arguments.length;if(!w)return[];for(var R=tn(w-1),Y=arguments[0],de=w;de--;)R[de-1]=arguments[de];return Eo(gr(Y)?kr(Y):[Y],la(R,1))}var ly=I(function(w,R){return Ga(w)?Ju(w,la(R,1,Ga,!0)):[]}),t_=I(function(w,R){var Y=is(R);return Ga(Y)&&(Y=t),Ga(w)?Ju(w,la(R,1,Ga,!0),ir(Y,2)):[]}),$d=I(function(w,R){var Y=is(R);return Ga(Y)&&(Y=t),Ga(w)?Ju(w,la(R,1,Ga,!0),t,Y):[]});function Ba(w,R,Y){var de=w==null?0:w.length;return de?(R=Y||R===t?1:Di(R),N(w,R<0?0:R,de)):[]}function eb(w,R,Y){var de=w==null?0:w.length;return de?(R=Y||R===t?1:Di(R),R=de-R,N(w,0,R<0?0:R)):[]}function tb(w,R){return w&&w.length?tt(w,ir(R,3),!0,!0):[]}function Oa(w,R){return w&&w.length?tt(w,ir(R,3),!0):[]}function H2(w,R,Y,de){var Pe=w==null?0:w.length;return Pe?(Y&&typeof Y!="number"&&uu(w,R,Y)&&(Y=0,de=Pe),Zh(w,R,Y,de)):[]}function Qs(w,R,Y){var de=w==null?0:w.length;if(!de)return-1;var Pe=Y==null?0:Di(Y);return Pe<0&&(Pe=ms(de+Pe,0)),Ef(w,ir(R,3),Pe)}function Wf(w,R,Y){var de=w==null?0:w.length;if(!de)return-1;var Pe=de-1;return Y!==t&&(Pe=Di(Y),Pe=Y<0?ms(de+Pe,0):js(Pe,de-1)),Ef(w,ir(R,3),Pe,!0)}function Ds(w){var R=w==null?0:w.length;return R?la(w,1):[]}function cu(w){var R=w==null?0:w.length;return R?la(w,Ye):[]}function UA(w,R){var Y=w==null?0:w.length;return Y?(R=R===t?1:Di(R),la(w,R)):[]}function _0(w){for(var R=-1,Y=w==null?0:w.length,de={};++R<Y;){var Pe=w[R];de[Pe[0]]=Pe[1]}return de}function uy(w){return w&&w.length?w[0]:t}function nb(w,R,Y){var de=w==null?0:w.length;if(!de)return-1;var Pe=Y==null?0:Di(Y);return Pe<0&&(Pe=ms(de+Pe,0)),bA(w,R,Pe)}function qg(w){var R=w==null?0:w.length;return R?N(w,0,-1):[]}var x0=I(function(w){var R=qo(w,ft);return R.length&&R[0]===w[0]?dl(R):[]}),pl=I(function(w){var R=is(w),Y=qo(w,ft);return R===is(Y)?R=t:Y.pop(),Y.length&&Y[0]===w[0]?dl(Y,ir(R,2)):[]}),Pc=I(function(w){var R=is(w),Y=qo(w,ft);return R=typeof R=="function"?R:t,R&&Y.pop(),Y.length&&Y[0]===w[0]?dl(Y,t,R):[]});function Zp(w,R){return w==null?"":qh.call(w,R)}function is(w){var R=w==null?0:w.length;return R?w[R-1]:t}function n_(w,R,Y){var de=w==null?0:w.length;if(!de)return-1;var Pe=de;return Y!==t&&(Pe=Di(Y),Pe=Pe<0?ms(de+Pe,0):js(Pe,de-1)),R===R?X1(w,R,Pe):Ef(w,Ud,Pe,!0)}function ud(w,R){return w&&w.length?Kf(w,Di(R)):t}var oA=I(cd);function cd(w,R){return w&&w.length&&R&&R.length?kc(w,R):w}function cy(w,R,Y){return w&&w.length&&R&&R.length?kc(w,R,ir(Y,2)):w}function Xp(w,R,Y){return w&&w.length&&R&&R.length?kc(w,R,t,Y):w}var sA=Rc(function(w,R){var Y=w==null?0:w.length,de=Wd(w,R);return td(w,qo(R,function(Pe){return gh(Pe,Y)?+Pe:Pe}).sort(nr)),de});function ib(w,R){var Y=[];if(!(w&&w.length))return Y;var de=-1,Pe=[],et=w.length;for(R=ir(R,3);++de<et;){var gt=w[de];R(gt,de,w)&&(Y.push(gt),Pe.push(de))}return td(w,Pe),Y}function Hd(w){return w==null?w:SA.call(w)}function Yg(w,R,Y){var de=w==null?0:w.length;return de?(Y&&typeof Y!="number"&&uu(w,R,Y)?(R=0,Y=de):(R=R==null?0:Di(R),Y=Y===t?de:Di(Y)),N(w,R,Y)):[]}function Vg(w,R){return se(w,R)}function M0(w,R,Y){return ue(w,R,ir(Y,2))}function i_(w,R){var Y=w==null?0:w.length;if(Y){var de=se(w,R);if(de<Y&&Fl(w[de],R))return de}return-1}function r_(w,R){return se(w,R,!0)}function Zd(w,R,Y){return ue(w,R,ir(Y,2),!0)}function o_(w,R){var Y=w==null?0:w.length;if(Y){var de=se(w,R,!0)-1;if(Fl(w[de],R))return de}return-1}function $g(w){return w&&w.length?ye(w):[]}function s_(w,R){return w&&w.length?ye(w,ir(R,2)):[]}function Z2(w){var R=w==null?0:w.length;return R?N(w,1,R):[]}function X2(w,R,Y){return w&&w.length?(R=Y||R===t?1:Di(R),N(w,0,R<0?0:R)):[]}function Oo(w,R,Y){var de=w==null?0:w.length;return de?(R=Y||R===t?1:Di(R),R=de-R,N(w,R<0?0:R,de)):[]}function ys(w,R){return w&&w.length?tt(w,ir(R,3),!1,!0):[]}function jr(w,R){return w&&w.length?tt(w,ir(R,3)):[]}var Pr=I(function(w){return Ke(la(w,1,Ga,!0))}),Fo=I(function(w){var R=is(w);return Ga(R)&&(R=t),Ke(la(w,1,Ga,!0),ir(R,2))}),aA=I(function(w){var R=is(w);return R=typeof R=="function"?R:t,Ke(la(w,1,Ga,!0),t,R)});function Qf(w){return w&&w.length?Ke(w):[]}function Jp(w,R){return w&&w.length?Ke(w,ir(R,2)):[]}function Ay(w,R){return R=typeof R=="function"?R:t,w&&w.length?Ke(w,t,R):[]}function yh(w){if(!(w&&w.length))return[];var R=0;return w=yo(w,function(Y){if(Ga(Y))return R=ms(Y.length,R),!0}),Fd(R,function(Y){return qo(w,Ph(Y))})}function ha(w,R){if(!(w&&w.length))return[];var Y=yh(w);return R==null?Y:qo(Y,function(de){return fs(R,t,de)})}var KA=I(function(w,R){return Ga(w)?Ju(w,R):[]}),qf=I(function(w){return dt(yo(w,Ga))}),rb=I(function(w){var R=is(w);return Ga(R)&&(R=t),dt(yo(w,Ga),ir(R,2))}),lA=I(function(w){var R=is(w);return R=typeof R=="function"?R:t,dt(yo(w,Ga),t,R)}),w0=I(yh);function Hg(w,R){return st(w||[],R||[],hl)}function Lc(w,R){return st(w||[],R||[],C)}var hy=I(function(w){var R=w.length,Y=R>1?w[R-1]:t;return Y=typeof Y=="function"?(w.pop(),Y):t,ha(w,Y)});function em(w){var R=qe(w);return R.__chain__=!0,R}function ob(w,R){return R(w),w}function Yf(w,R){return R(w)}var Zg=Rc(function(w){var R=w.length,Y=R?w[0]:0,de=this.__wrapped__,Pe=function(et){return Wd(et,w)};return R>1||this.__actions__.length||!(de instanceof ur)||!gh(Y)?this.thru(Pe):(de=de.slice(Y,+Y+(R?1:0)),de.__actions__.push({func:Yf,args:[Pe],thisArg:t}),new xa(de,this.__chain__).thru(function(et){return R&&!et.length&&et.push(t),et}))});function Vf(){return em(this)}function Ia(){return new xa(this.value(),this.__chain__)}function $f(){this.__values__===t&&(this.__values__=_r(this.value()));var w=this.__index__>=this.__values__.length,R=w?t:this.__values__[this.__index__++];return{done:w,value:R}}function tm(){return this}function Xd(w){for(var R,Y=this;Y instanceof Mc;){var de=ay(Y);de.__index__=0,de.__values__=t,R?Pe.__wrapped__=de:R=de;var Pe=de;Y=Y.__wrapped__}return Pe.__wrapped__=w,R}function sb(){var w=this.__wrapped__;if(w instanceof ur){var R=w;return this.__actions__.length&&(R=new ur(this)),R=R.reverse(),R.__actions__.push({func:Yf,args:[Hd],thisArg:t}),new xa(R,this.__chain__)}return this.thru(Hd)}function ab(){return rt(this.__wrapped__,this.__actions__)}var lb=Ns(function(w,R,Y){Cr.call(w,Y)?++w[Y]:Xu(w,Y,1)});function Xg(w,R,Y){var de=gr(w)?Hc:zr;return Y&&uu(w,R,Y)&&(R=t),de(w,ir(R,3))}function ub(w,R){var Y=gr(w)?yo:Xh;return Y(w,ir(R,3))}var Io=id(Qs),S0=id(Wf);function Uc(w,R){return la(E0(w,R),1)}function a_(w,R){return la(E0(w,R),Ye)}function cb(w,R,Y){return Y=Y===t?1:Di(Y),la(E0(w,R),Y)}function Ab(w,R){var Y=gr(w)?wu:tA;return Y(w,ir(R,3))}function Jd(w,R){var Y=gr(w)?Xl:Bc;return Y(w,ir(R,3))}var Jg=Ns(function(w,R,Y){Cr.call(w,Y)?w[Y].push(R):Xu(w,Y,[R])});function dy(w,R,Y,de){w=sc(w)?w:um(w),Y=Y&&!de?Di(Y):0;var Pe=w.length;return Y<0&&(Y=ms(Pe+Y,0)),Zf(w)?Y<=Pe&&w.indexOf(R,Y)>-1:!!Pe&&bA(w,R,Y)>-1}var vh=I(function(w,R,Y){var de=-1,Pe=typeof R=="function",et=sc(w)?tn(w.length):[];return tA(w,function(gt){et[++de]=Pe?fs(R,gt,Y):Ic(gt,R,Y)}),et}),fy=Ns(function(w,R,Y){Xu(w,Y,R)});function E0(w,R){var Y=gr(w)?qo:Tc;return Y(w,ir(R,3))}function hb(w,R,Y,de){return w==null?[]:(gr(R)||(R=R==null?[]:[R]),Y=de?t:Y,gr(Y)||(Y=Y==null?[]:[Y]),PA(w,R,Y))}var e1=Ns(function(w,R,Y){w[Y?0:1].push(R)},function(){return[[],[]]});function ef(w,R,Y){var de=gr(w)?$m:Kd,Pe=arguments.length<3;return de(w,ir(R,4),Y,Pe,tA)}function py(w,R,Y){var de=gr(w)?Hm:Kd,Pe=arguments.length<3;return de(w,ir(R,4),Y,Pe,Bc)}function J2(w,R){var Y=gr(w)?yo:Xh;return Y(w,by(ir(R,3)))}function e3(w){var R=gr(w)?Ah:u;return R(w)}function t3(w,R,Y){(Y?uu(w,R,Y):R===t)?R=1:R=Di(R);var de=gr(w)?Wp:p;return de(w,R)}function l_(w){var R=gr(w)?$h:K;return R(w)}function u_(w){if(w==null)return 0;if(sc(w))return Zf(w)?jh(w):w.length;var R=lu(w);return R==Mt||R==Un?w.size:nA(w).length}function B0(w,R,Y){var de=gr(w)?Zm:$;return Y&&uu(w,R,Y)&&(R=t),de(w,ir(R,3))}var my=I(function(w,R){if(w==null)return[];var Y=R.length;return Y>1&&uu(w,R[0],R[1])?R=[]:Y>2&&uu(R[0],R[1],R[2])&&(R=[R[0]]),PA(w,la(R,1),[])}),t1=s0||function(){return qn.Date.now()};function c_(w,R){if(typeof R!="function")throw new Ol(s);return w=Di(w),function(){if(--w<1)return R.apply(this,arguments)}}function db(w,R,Y){return R=Y?t:R,R=w&&R==null?w.length:R,ca(w,q,t,t,t,t,R)}function fb(w,R){var Y;if(typeof R!="function")throw new Ol(s);return w=Di(w),function(){return--w>0&&(Y=R.apply(this,arguments)),w<=1&&(R=t),Y}}var gy=I(function(w,R,Y){var de=z;if(Y.length){var Pe=th(Y,Aa(gy));de|=ie}return ca(w,de,R,Y,Pe)}),yy=I(function(w,R,Y){var de=z|V;if(Y.length){var Pe=th(Y,Aa(yy));de|=ie}return ca(R,de,w,Y,Pe)});function nm(w,R,Y){R=Y?t:R;var de=ca(w,X,t,t,t,t,t,R);return de.placeholder=nm.placeholder,de}function vy(w,R,Y){R=Y?t:R;var de=ca(w,re,t,t,t,t,t,R);return de.placeholder=vy.placeholder,de}function Ad(w,R,Y){var de,Pe,et,gt,Bt,Lt,wn=0,h=!1,l=!1,A=!0;if(typeof w!="function")throw new Ol(s);R=ml(R)||0,vs(Y)&&(h=!!Y.leading,l="maxWait"in Y,et=l?ms(ml(Y.maxWait)||0,R):et,A="trailing"in Y?!!Y.trailing:A);function y(Ae){var fe=de,be=Pe;return de=Pe=t,wn=Ae,gt=w.apply(be,fe),gt}function _(Ae){return wn=Ae,Bt=v0(D,R),h?y(Ae):gt}function E(Ae){var fe=Ae-Lt,be=Ae-wn,we=R-fe;return l?js(we,et-be):we}function O(Ae){var fe=Ae-Lt,be=Ae-wn;return Lt===t||fe>=R||fe<0||l&&be>=et}function D(){var Ae=t1();if(O(Ae))return F(Ae);Bt=v0(D,E(Ae))}function F(Ae){return Bt=t,A&&de?y(Ae):(de=Pe=t,gt)}function W(){Bt!==t&&zt(Bt),wn=0,de=Lt=Pe=Bt=t}function ee(){return Bt===t?gt:F(t1())}function ae(){var Ae=t1(),fe=O(Ae);if(de=arguments,Pe=this,Lt=Ae,fe){if(Bt===t)return _(Lt);if(l)return zt(Bt),Bt=v0(D,R),y(Lt)}return Bt===t&&(Bt=v0(D,R)),gt}return ae.cancel=W,ae.flush=ee,ae}var To=I(function(w,R){return qp(w,1,R)}),n1=I(function(w,R,Y){return qp(w,ml(R)||0,Y)});function n3(w){return ca(w,ce)}function O0(w,R){if(typeof w!="function"||R!=null&&typeof R!="function")throw new Ol(s);var Y=function(){var de=arguments,Pe=R?R.apply(this,de):de[0],et=Y.cache;if(et.has(Pe))return et.get(Pe);var gt=w.apply(this,de);return Y.cache=et.set(Pe,gt)||et,gt};return Y.cache=new(O0.Cache||Pl),Y}O0.Cache=Pl;function by(w){if(typeof w!="function")throw new Ol(s);return function(){var R=arguments;switch(R.length){case 0:return!w.call(this);case 1:return!w.call(this,R[0]);case 2:return!w.call(this,R[0],R[1]);case 3:return!w.call(this,R[0],R[1],R[2])}return!w.apply(this,R)}}function i3(w){return fb(2,w)}var r3=Ot(function(w,R){R=R.length==1&&gr(R[0])?qo(R[0],Bl(ir())):qo(la(R,1),Bl(ir()));var Y=R.length;return I(function(de){for(var Pe=-1,et=js(de.length,Y);++Pe<et;)de[Pe]=R[Pe].call(this,de[Pe]);return fs(w,this,de)})}),I0=I(function(w,R){var Y=th(R,Aa(I0));return ca(w,ie,t,R,Y)}),im=I(function(w,R){var Y=th(R,Aa(im));return ca(w,te,t,R,Y)}),Cy=Rc(function(w,R){return ca(w,le,t,t,t,R)});function i1(w,R){if(typeof w!="function")throw new Ol(s);return R=R===t?R:Di(R),I(w,R)}function bh(w,R){if(typeof w!="function")throw new Ol(s);return R=R==null?0:ms(Di(R),0),I(function(Y){var de=Y[R],Pe=Ft(Y,0,R);return de&&Eo(Pe,de),fs(w,this,Pe)})}function oc(w,R,Y){var de=!0,Pe=!0;if(typeof w!="function")throw new Ol(s);return vs(Y)&&(de="leading"in Y?!!Y.leading:de,Pe="trailing"in Y?!!Y.trailing:Pe),Ad(w,R,{leading:de,maxWait:R,trailing:Pe})}function Ch(w){return db(w,1)}function rm(w,R){return I0(Ct(R),w)}function o3(){if(!arguments.length)return[];var w=arguments[0];return gr(w)?w:[w]}function r1(w){return iu(w,B)}function _y(w,R){return R=typeof R=="function"?R:t,iu(w,B,R)}function A_(w){return iu(w,v|B)}function xy(w,R){return R=typeof R=="function"?R:t,iu(w,v|B,R)}function pb(w,R){return R==null||eA(w,R,gl(R))}function Fl(w,R){return w===R||w!==w&&R!==R}var mb=Yo(DA),gb=Yo(function(w,R){return w>=R}),tf=ou((function(){return arguments})())?ou:function(w){return da(w)&&Cr.call(w,"callee")&&!jd.call(w,"callee")},gr=tn.isArray,T0=Kr?Bl(Kr):Zs;function sc(w){return w!=null&&l1(w.length)&&!Kc(w)}function Ga(w){return da(w)&&sc(w)}function o1(w){return w===!0||w===!1||da(w)&&si(w)==Le}var Hf=zp||Zt,h_=wo?Bl(wo):dh;function no(w){return da(w)&&w.nodeType===1&&!R0(w)}function s1(w){if(w==null)return!0;if(sc(w)&&(gr(w)||typeof w=="string"||typeof w.splice=="function"||Hf(w)||dd(w)||tf(w)))return!w.length;var R=lu(w);if(R==Mt||R==Un)return!w.size;if(ad(w))return!nA(w).length;for(var Y in w)if(Cr.call(w,Y))return!1;return!0}function _h(w,R){return $r(w,R)}function My(w,R,Y){Y=typeof Y=="function"?Y:t;var de=Y?Y(w,R):t;return de===t?$r(w,R,t,Y):!!de}function a1(w){if(!da(w))return!1;var R=si(w);return R==Ze||R==Oe||typeof w.message=="string"&&typeof w.name=="string"&&!R0(w)}function wy(w){return typeof w=="number"&&kl(w)}function Kc(w){if(!vs(w))return!1;var R=si(w);return R==bt||R==yt||R==Ut||R==Nn}function k0(w){return typeof w=="number"&&w==Di(w)}function l1(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=At}function vs(w){var R=typeof w;return w!=null&&(R=="object"||R=="function")}function da(w){return w!=null&&typeof w=="object"}var D0=Po?Bl(Po):Uo;function yb(w,R){return w===R||ls(w,R,ty(R))}function Sy(w,R,Y){return Y=typeof Y=="function"?Y:t,ls(w,R,ty(R),Y)}function rs(w){return vb(w)&&w!=+w}function ac(w){if(Ng(w))throw new pr(o);return Jh(w)}function Ta(w){return w===null}function u1(w){return w==null}function vb(w){return typeof w=="number"||da(w)&&si(w)==Kt}function R0(w){if(!da(w)||si(w)!=en)return!1;var R=eu(w);if(R===null)return!0;var Y=Cr.call(R,"constructor")&&R.constructor;return typeof Y=="function"&&Y instanceof Y&&rh.call(Y)==_A}var P0=ds?Bl(ds):nc;function Ey(w){return k0(w)&&w>=-At&&w<=At}var hd=eh?Bl(eh):fh;function Zf(w){return typeof w=="string"||!gr(w)&&da(w)&&si(w)==Ln}function Iu(w){return typeof w=="symbol"||da(w)&&si(w)==Tn}var dd=El?Bl(El):Uf;function By(w){return w===t}function bb(w){return da(w)&&lu(w)==Bn}function Oy(w){return da(w)&&si(w)==je}var s3=Yo(us),d_=Yo(function(w,R){return w<=R});function _r(w){if(!w)return[];if(sc(w))return Zf(w)?Bs(w):kr(w);if(Al&&w[Al])return zh(w[Al]());var R=lu(w),Y=R==Mt?Rp:R==Un?t0:um;return Y(w)}function Au(w){if(!w)return w===0?w:0;if(w=ml(w),w===Ye||w===-Ye){var R=w<0?-1:1;return R*mt}return w===w?w:0}function Di(w){var R=Au(w),Y=R%1;return R===R?Y?R-Y:R:0}function uA(w){return w?Bu(Di(w),0,De):0}function ml(w){if(typeof w=="number")return w;if(Iu(w))return Ue;if(vs(w)){var R=typeof w.valueOf=="function"?w.valueOf():w;w=vs(R)?R+"":R}if(typeof w!="string")return w===0?w:+w;w=bc(w);var Y=yA.test(w);return Y||Vi.test(w)?Dn(w.slice(2),Y?2:8):Ka.test(w)?Ue:+w}function hu(w){return Dr(w,lc(w))}function il(w){return w?Bu(Di(w),-At,At):w===0?w:0}function cr(w){return w==null?"":Se(w)}var Cb=Ko(function(w,R){if(ad(R)||sc(R)){Dr(R,gl(R),w);return}for(var Y in R)Cr.call(R,Y)&&hl(w,Y,R[Y])}),Tu=Ko(function(w,R){Dr(R,lc(R),w)}),Js=Ko(function(w,R,Y,de){Dr(R,lc(R),w,de)}),Iy=Ko(function(w,R,Y,de){Dr(R,gl(R),w,de)}),FA=Rc(Wd);function Ty(w,R){var Y=tu(w);return R==null?Y:A0(Y,R)}var Xf=I(function(w,R){w=Lo(w);var Y=-1,de=R.length,Pe=de>2?R[2]:t;for(Pe&&uu(R[0],R[1],Pe)&&(de=1);++Y<de;)for(var et=R[Y],gt=lc(et),Bt=-1,Lt=gt.length;++Bt<Lt;){var wn=gt[Bt],h=w[wn];(h===t||Fl(h,_c[wn])&&!Cr.call(w,wn))&&(w[wn]=et[wn])}return w}),om=I(function(w){return w.push(t,LA),fs(sm,t,w)});function f_(w,R){return Ld(w,ir(R,3),ec)}function L0(w,R){return Ld(w,ir(R,3),Yp)}function cA(w,R){return w==null?w:hh(w,ir(R,3),lc)}function _b(w,R){return w==null?w:Qd(w,ir(R,3),lc)}function U0(w,R){return w&&ec(w,ir(R,3))}function fd(w,R){return w&&Yp(w,ir(R,3))}function xb(w){return w==null?[]:el(w,gl(w))}function ku(w){return w==null?[]:el(w,lc(w))}function zl(w,R,Y){var de=w==null?t:tc(w,R);return de===t?Y:de}function du(w,R){return w!=null&&iy(w,R,ru)}function pd(w,R){return w!=null&&iy(w,R,tl)}var ky=wa(function(w,R,Y){R!=null&&typeof R.toString!="function"&&(R=Il.call(R)),w[R]=Y},rp(Du)),Mb=wa(function(w,R,Y){R!=null&&typeof R.toString!="function"&&(R=Il.call(R)),Cr.call(w,R)?w[R].push(Y):w[R]=[Y]},ir),p_=I(Ic);function gl(w){return sc(w)?Lf(w):nA(w)}function lc(w){return sc(w)?Lf(w,!0):Lg(w)}function m_(w,R){var Y={};return R=ir(R,3),ec(w,function(de,Pe,et){Xu(Y,R(de,Pe,et),de)}),Y}function Dy(w,R){var Y={};return R=ir(R,3),ec(w,function(de,Pe,et){Xu(Y,Pe,R(de,Pe,et))}),Y}var nf=Ko(function(w,R,Y){ed(w,R,Y)}),sm=Ko(function(w,R,Y,de){ed(w,R,Y,de)}),wb=Rc(function(w,R){var Y={};if(w==null)return Y;var de=!1;R=qo(R,function(et){return et=lt(et,w),de||(de=et.length>1),et}),Dr(w,Kg(w),Y),de&&(Y=iu(Y,v|M|B,Ug));for(var Pe=R.length;Pe--;)Je(Y,R[Pe]);return Y});function K0(w,R){return am(w,by(ir(R)))}var Jf=Rc(function(w,R){return w==null?{}:ph(w,R)});function am(w,R){if(w==null)return{};var Y=qo(Kg(w),function(de){return[de]});return R=ir(R),nl(w,Y,function(de,Pe){return R(de,Pe[0])})}function g_(w,R,Y){R=lt(R,w);var de=-1,Pe=R.length;for(Pe||(Pe=1,w=t);++de<Pe;){var et=w==null?t:w[rc(R[de])];et===t&&(de=Pe,et=Y),w=Kc(et)?et.call(w):et}return w}function c1(w,R,Y){return w==null?w:C(w,R,Y)}function F0(w,R,Y,de){return de=typeof de=="function"?de:t,w==null?w:C(w,R,Y,de)}var lm=p0(gl),ep=p0(lc);function Ry(w,R,Y){var de=gr(w),Pe=de||Hf(w)||dd(w);if(R=ir(R,4),Y==null){var et=w&&w.constructor;Pe?Y=de?new et:[]:vs(w)?Y=Kc(et)?tu(eu(w)):{}:Y={}}return(Pe?wu:ec)(w,function(gt,Bt,Lt){return R(Y,gt,Bt,Lt)}),Y}function Py(w,R){return w==null?!0:Je(w,R)}function Sb(w,R,Y){return w==null?w:nt(w,R,Ct(Y))}function Eb(w,R,Y,de){return de=typeof de=="function"?de:t,w==null?w:nt(w,R,Ct(Y),de)}function um(w){return w==null?[]:e0(w,gl(w))}function Ly(w){return w==null?[]:e0(w,lc(w))}function y_(w,R,Y){return Y===t&&(Y=R,R=t),Y!==t&&(Y=ml(Y),Y=Y===Y?Y:0),R!==t&&(R=ml(R),R=R===R?R:0),Bu(ml(w),R,Y)}function A1(w,R,Y){return R=Au(R),Y===t?(Y=R,R=0):Y=Au(Y),w=ml(w),Hs(w,R,Y)}function Uy(w,R,Y){if(Y&&typeof Y!="boolean"&&uu(w,R,Y)&&(R=Y=t),Y===t&&(typeof R=="boolean"?(Y=R,R=t):typeof w=="boolean"&&(Y=w,w=t)),w===t&&R===t?(w=0,R=1):(w=Au(w),R===t?(R=w,w=0):R=Au(R)),w>R){var de=w;w=R,R=de}if(Y||w%1||R%1){var Pe=Zc();return js(w+Pe*(R-w+Qn("1e-"+((Pe+"").length-1))),R)}return nd(w,R)}var h1=Ou(function(w,R,Y){return R=R.toLowerCase(),w+(Y?v_(R):R)});function v_(w){return AA(cr(w).toLowerCase())}function z0(w){return w=cr(w),w&&w.replace(co,If).replace(to,"")}function Bb(w,R,Y){w=cr(w),R=Se(R);var de=w.length;Y=Y===t?de:Bu(Di(Y),0,de);var Pe=Y;return Y-=R.length,Y>=0&&w.slice(Y,Pe)==R}function Ob(w){return w=cr(w),w&&Ci.test(w)?w.replace(Cn,H1):w}function b_(w){return w=cr(w),w&&Li.test(w)?w.replace(qi,"\\$&"):w}var C_=Ou(function(w,R,Y){return w+(Y?"-":"")+R.toLowerCase()}),Ib=Ou(function(w,R,Y){return w+(Y?" ":"")+R.toLowerCase()}),cm=Dc("toLowerCase");function Tb(w,R,Y){w=cr(w),R=Di(R);var de=R?jh(w):0;if(!R||de>=R)return w;var Pe=(R-de)/2;return ts(Nd(Pe),Y)+w+ts(kf(Pe),Y)}function __(w,R,Y){w=cr(w),R=Di(R);var de=R?jh(w):0;return R&&de<R?w+ts(R-de,Y):w}function j0(w,R,Y){w=cr(w),R=Di(R);var de=R?jh(w):0;return R&&de<R?ts(R-de,Y)+w:w}function kb(w,R,Y){return Y||R==null?R=0:R&&(R=+R),Ja(cr(w).replace(Er,""),R||0)}function x_(w,R,Y){return(Y?uu(w,R,Y):R===t)?R=1:R=Di(R),ic(cr(w),R)}function tp(){var w=arguments,R=cr(w[0]);return w.length<3?R:R.replace(w[1],w[2])}var Ky=Ou(function(w,R,Y){return w+(Y?"_":"")+R.toLowerCase()});function Fy(w,R,Y){return Y&&typeof Y!="number"&&uu(w,R,Y)&&(R=Y=t),Y=Y===t?De:Y>>>0,Y?(w=cr(w),w&&(typeof R=="string"||R!=null&&!P0(R))&&(R=Se(R),!R&&Fh(w))?Ft(Bs(w),0,Y):w.split(R,Y)):[]}var Am=Ou(function(w,R,Y){return w+(Y?" ":"")+AA(R)});function M_(w,R,Y){return w=cr(w),Y=Y==null?0:Bu(Di(Y),0,w.length),R=Se(R),w.slice(Y,Y+R.length)==R}function Db(w,R,Y){var de=qe.templateSettings;Y&&uu(w,R,Y)&&(R=t),w=cr(w),R=Js({},R,de,mh);var Pe=Js({},R.imports,de.imports,mh),et=gl(Pe),gt=e0(Pe,et),Bt,Lt,wn=0,h=R.interpolate||$a,l="__p += '",A=Vr((R.escape||$a).source+"|"+h.source+"|"+(h===Hn?Xi:$a).source+"|"+(R.evaluate||$a).source+"|$","g"),y="//# sourceURL="+(Cr.call(R,"sourceURL")?(R.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Za+"]")+`
`;w.replace(A,function(O,D,F,W,ee,ae){return F||(F=W),l+=w.slice(wn,ae).replace(Ml,kp),D&&(Bt=!0,l+=`' +
__e(`+D+`) +
'`),ee&&(Lt=!0,l+=`';
`+ee+`;
__p += '`),F&&(l+=`' +
((__t = (`+F+`)) == null ? '' : __t) +
'`),wn=ae+O.length,O}),l+=`';
`;var _=Cr.call(R,"variable")&&R.variable;if(!_)l=`with (obj) {
`+l+`
}
`;else if(oo.test(_))throw new pr(a);l=(Lt?l.replace(b,""):l).replace(Rt,"$1").replace(mn,"$1;"),l="function("+(_||"obj")+`) {
`+(_?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Bt?", __e = _.escape":"")+(Lt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+l+`return __p
}`;var E=hm(function(){return Fr(et,y+"return "+l).apply(t,gt)});if(E.source=l,a1(E))throw E;return E}function rf(w){return cr(w).toLowerCase()}function of(w){return cr(w).toUpperCase()}function np(w,R,Y){if(w=cr(w),w&&(Y||R===t))return bc(w);if(!w||!(R=Se(R)))return w;var de=Bs(w),Pe=Bs(R),et=Ip(de,Pe),gt=Tp(de,Pe)+1;return Ft(de,et,gt).join("")}function d1(w,R,Y){if(w=cr(w),w&&(Y||R===t))return w.slice(0,nh(w)+1);if(!w||!(R=Se(R)))return w;var de=Bs(w),Pe=Tp(de,Bs(R))+1;return Ft(de,0,Pe).join("")}function f1(w,R,Y){if(w=cr(w),w&&(Y||R===t))return w.replace(Er,"");if(!w||!(R=Se(R)))return w;var de=Bs(w),Pe=Ip(de,Bs(R));return Ft(de,Pe).join("")}function ip(w,R){var Y=ve,de=ge;if(vs(R)){var Pe="separator"in R?R.separator:Pe;Y="length"in R?Di(R.length):Y,de="omission"in R?Se(R.omission):de}w=cr(w);var et=w.length;if(Fh(w)){var gt=Bs(w);et=gt.length}if(Y>=et)return w;var Bt=Y-jh(de);if(Bt<1)return de;var Lt=gt?Ft(gt,0,Bt).join(""):w.slice(0,Bt);if(Pe===t)return Lt+de;if(gt&&(Bt+=Lt.length-Bt),P0(Pe)){if(w.slice(Bt).search(Pe)){var wn,h=Lt;for(Pe.global||(Pe=Vr(Pe.source,cr(ui.exec(Pe))+"g")),Pe.lastIndex=0;wn=Pe.exec(h);)var l=wn.index;Lt=Lt.slice(0,l===t?Bt:l)}}else if(w.indexOf(Se(Pe),Bt)!=Bt){var A=Lt.lastIndexOf(Pe);A>-1&&(Lt=Lt.slice(0,A))}return Lt+de}function a3(w){return w=cr(w),w&&xt.test(w)?w.replace(bn,Cc):w}var Rb=Ou(function(w,R,Y){return w+(Y?" ":"")+R.toUpperCase()}),AA=Dc("toUpperCase");function w_(w,R,Y){return w=cr(w),R=Y?t:R,R===t?Dp(w)?i0(w):Xm(w):w.match(R)||[]}var hm=I(function(w,R){try{return fs(w,t,R)}catch(Y){return a1(Y)?Y:new pr(Y)}}),zy=Rc(function(w,R){return wu(R,function(Y){Y=rc(Y),Xu(w,Y,gy(w[Y],w))}),w});function S_(w){var R=w==null?0:w.length,Y=ir();return w=R?qo(w,function(de){if(typeof de[1]!="function")throw new Ol(s);return[Y(de[0]),de[1]]}):[],I(function(de){for(var Pe=-1;++Pe<R;){var et=w[Pe];if(fs(et[0],this,de))return fs(et[1],this,de)}})}function l3(w){return Qp(iu(w,v))}function rp(w){return function(){return w}}function p1(w,R){return w==null||w!==w?R:w}var E_=su(),N0=su(!0);function Du(w){return w}function G0(w){return RA(typeof w=="function"?w:iu(w,v))}function jy(w){return qd(iu(w,v))}function Pb(w,R){return Yd(w,iu(R,v))}var B_=I(function(w,R){return function(Y){return Ic(Y,w,R)}}),Ny=I(function(w,R){return function(Y){return Ic(w,Y,R)}});function f(w,R,Y){var de=gl(R),Pe=el(R,de);Y==null&&!(vs(R)&&(Pe.length||!de.length))&&(Y=R,R=w,w=this,Pe=el(R,gl(R)));var et=!(vs(Y)&&"chain"in Y)||!!Y.chain,gt=Kc(w);return wu(Pe,function(Bt){var Lt=R[Bt];w[Bt]=Lt,gt&&(w.prototype[Bt]=function(){var wn=this.__chain__;if(et||wn){var h=w(this.__wrapped__),l=h.__actions__=kr(this.__actions__);return l.push({func:Lt,args:arguments,thisArg:w}),h.__chain__=wn,h}return Lt.apply(w,Eo([this.value()],arguments))})}),w}function g(){return qn._===this&&(qn._=Jl),this}function x(){}function T(w){return w=Di(w),I(function(R){return Kf(R,w)})}var G=au(qo),J=au(Hc),_e=au(Zm);function Ve(w){return g0(w)?Ph(rc(w)):gs(w)}function _t(w){return function(R){return w==null?t:tc(w,R)}}var $t=Kl(),ln=Kl(!0);function gn(){return[]}function Zt(){return!1}function rn(){return{}}function xi(){return""}function er(){return!0}function zo(w,R){if(w=Di(w),w<1||w>At)return[];var Y=De,de=js(w,De);R=ir(R),w-=De;for(var Pe=Fd(de,R);++Y<w;)R(Y);return Pe}function Pt(w){return gr(w)?qo(w,rc):Iu(w)?[w]:kr(Qg(cr(w)))}function It(w){var R=++kg;return cr(w)+R}var qt=ua(function(w,R){return w+R},0),hn=zf("ceil"),gi=ua(function(w,R){return w/R},1),vo=zf("floor");function zi(w){return w&&w.length?Oc(w,Du,DA):t}function Br(w,R){return w&&w.length?Oc(w,ir(R,2),DA):t}function Hr(w){return zs(w,Du)}function ko(w,R){return zs(w,ir(R,2))}function sf(w){return w&&w.length?Oc(w,Du,us):t}function O_(w,R){return w&&w.length?Oc(w,ir(R,2),us):t}var pO=ua(function(w,R){return w*R},1),jM=zf("round"),u3=ua(function(w,R){return w-R},0);function c3(w){return w&&w.length?Jm(w,Du):0}function NM(w,R){return w&&w.length?Jm(w,ir(R,2)):0}return qe.after=c_,qe.ary=db,qe.assign=Cb,qe.assignIn=Tu,qe.assignInWith=Js,qe.assignWith=Iy,qe.at=FA,qe.before=fb,qe.bind=gy,qe.bindAll=zy,qe.bindKey=yy,qe.castArray=o3,qe.chain=em,qe.chunk=e_,qe.compact=Xv,qe.concat=Jv,qe.cond=S_,qe.conforms=l3,qe.constant=rp,qe.countBy=lb,qe.create=Ty,qe.curry=nm,qe.curryRight=vy,qe.debounce=Ad,qe.defaults=Xf,qe.defaultsDeep=om,qe.defer=To,qe.delay=n1,qe.difference=ly,qe.differenceBy=t_,qe.differenceWith=$d,qe.drop=Ba,qe.dropRight=eb,qe.dropRightWhile=tb,qe.dropWhile=Oa,qe.fill=H2,qe.filter=ub,qe.flatMap=Uc,qe.flatMapDeep=a_,qe.flatMapDepth=cb,qe.flatten=Ds,qe.flattenDeep=cu,qe.flattenDepth=UA,qe.flip=n3,qe.flow=E_,qe.flowRight=N0,qe.fromPairs=_0,qe.functions=xb,qe.functionsIn=ku,qe.groupBy=Jg,qe.initial=qg,qe.intersection=x0,qe.intersectionBy=pl,qe.intersectionWith=Pc,qe.invert=ky,qe.invertBy=Mb,qe.invokeMap=vh,qe.iteratee=G0,qe.keyBy=fy,qe.keys=gl,qe.keysIn=lc,qe.map=E0,qe.mapKeys=m_,qe.mapValues=Dy,qe.matches=jy,qe.matchesProperty=Pb,qe.memoize=O0,qe.merge=nf,qe.mergeWith=sm,qe.method=B_,qe.methodOf=Ny,qe.mixin=f,qe.negate=by,qe.nthArg=T,qe.omit=wb,qe.omitBy=K0,qe.once=i3,qe.orderBy=hb,qe.over=G,qe.overArgs=r3,qe.overEvery=J,qe.overSome=_e,qe.partial=I0,qe.partialRight=im,qe.partition=e1,qe.pick=Jf,qe.pickBy=am,qe.property=Ve,qe.propertyOf=_t,qe.pull=oA,qe.pullAll=cd,qe.pullAllBy=cy,qe.pullAllWith=Xp,qe.pullAt=sA,qe.range=$t,qe.rangeRight=ln,qe.rearg=Cy,qe.reject=J2,qe.remove=ib,qe.rest=i1,qe.reverse=Hd,qe.sampleSize=t3,qe.set=c1,qe.setWith=F0,qe.shuffle=l_,qe.slice=Yg,qe.sortBy=my,qe.sortedUniq=$g,qe.sortedUniqBy=s_,qe.split=Fy,qe.spread=bh,qe.tail=Z2,qe.take=X2,qe.takeRight=Oo,qe.takeRightWhile=ys,qe.takeWhile=jr,qe.tap=ob,qe.throttle=oc,qe.thru=Yf,qe.toArray=_r,qe.toPairs=lm,qe.toPairsIn=ep,qe.toPath=Pt,qe.toPlainObject=hu,qe.transform=Ry,qe.unary=Ch,qe.union=Pr,qe.unionBy=Fo,qe.unionWith=aA,qe.uniq=Qf,qe.uniqBy=Jp,qe.uniqWith=Ay,qe.unset=Py,qe.unzip=yh,qe.unzipWith=ha,qe.update=Sb,qe.updateWith=Eb,qe.values=um,qe.valuesIn=Ly,qe.without=KA,qe.words=w_,qe.wrap=rm,qe.xor=qf,qe.xorBy=rb,qe.xorWith=lA,qe.zip=w0,qe.zipObject=Hg,qe.zipObjectDeep=Lc,qe.zipWith=hy,qe.entries=lm,qe.entriesIn=ep,qe.extend=Tu,qe.extendWith=Js,f(qe,qe),qe.add=qt,qe.attempt=hm,qe.camelCase=h1,qe.capitalize=v_,qe.ceil=hn,qe.clamp=y_,qe.clone=r1,qe.cloneDeep=A_,qe.cloneDeepWith=xy,qe.cloneWith=_y,qe.conformsTo=pb,qe.deburr=z0,qe.defaultTo=p1,qe.divide=gi,qe.endsWith=Bb,qe.eq=Fl,qe.escape=Ob,qe.escapeRegExp=b_,qe.every=Xg,qe.find=Io,qe.findIndex=Qs,qe.findKey=f_,qe.findLast=S0,qe.findLastIndex=Wf,qe.findLastKey=L0,qe.floor=vo,qe.forEach=Ab,qe.forEachRight=Jd,qe.forIn=cA,qe.forInRight=_b,qe.forOwn=U0,qe.forOwnRight=fd,qe.get=zl,qe.gt=mb,qe.gte=gb,qe.has=du,qe.hasIn=pd,qe.head=uy,qe.identity=Du,qe.includes=dy,qe.indexOf=nb,qe.inRange=A1,qe.invoke=p_,qe.isArguments=tf,qe.isArray=gr,qe.isArrayBuffer=T0,qe.isArrayLike=sc,qe.isArrayLikeObject=Ga,qe.isBoolean=o1,qe.isBuffer=Hf,qe.isDate=h_,qe.isElement=no,qe.isEmpty=s1,qe.isEqual=_h,qe.isEqualWith=My,qe.isError=a1,qe.isFinite=wy,qe.isFunction=Kc,qe.isInteger=k0,qe.isLength=l1,qe.isMap=D0,qe.isMatch=yb,qe.isMatchWith=Sy,qe.isNaN=rs,qe.isNative=ac,qe.isNil=u1,qe.isNull=Ta,qe.isNumber=vb,qe.isObject=vs,qe.isObjectLike=da,qe.isPlainObject=R0,qe.isRegExp=P0,qe.isSafeInteger=Ey,qe.isSet=hd,qe.isString=Zf,qe.isSymbol=Iu,qe.isTypedArray=dd,qe.isUndefined=By,qe.isWeakMap=bb,qe.isWeakSet=Oy,qe.join=Zp,qe.kebabCase=C_,qe.last=is,qe.lastIndexOf=n_,qe.lowerCase=Ib,qe.lowerFirst=cm,qe.lt=s3,qe.lte=d_,qe.max=zi,qe.maxBy=Br,qe.mean=Hr,qe.meanBy=ko,qe.min=sf,qe.minBy=O_,qe.stubArray=gn,qe.stubFalse=Zt,qe.stubObject=rn,qe.stubString=xi,qe.stubTrue=er,qe.multiply=pO,qe.nth=ud,qe.noConflict=g,qe.noop=x,qe.now=t1,qe.pad=Tb,qe.padEnd=__,qe.padStart=j0,qe.parseInt=kb,qe.random=Uy,qe.reduce=ef,qe.reduceRight=py,qe.repeat=x_,qe.replace=tp,qe.result=g_,qe.round=jM,qe.runInContext=Tt,qe.sample=e3,qe.size=u_,qe.snakeCase=Ky,qe.some=B0,qe.sortedIndex=Vg,qe.sortedIndexBy=M0,qe.sortedIndexOf=i_,qe.sortedLastIndex=r_,qe.sortedLastIndexBy=Zd,qe.sortedLastIndexOf=o_,qe.startCase=Am,qe.startsWith=M_,qe.subtract=u3,qe.sum=c3,qe.sumBy=NM,qe.template=Db,qe.times=zo,qe.toFinite=Au,qe.toInteger=Di,qe.toLength=uA,qe.toLower=rf,qe.toNumber=ml,qe.toSafeInteger=il,qe.toString=cr,qe.toUpper=of,qe.trim=np,qe.trimEnd=d1,qe.trimStart=f1,qe.truncate=ip,qe.unescape=a3,qe.uniqueId=It,qe.upperCase=Rb,qe.upperFirst=AA,qe.each=Ab,qe.eachRight=Jd,qe.first=uy,f(qe,(function(){var w={};return ec(qe,function(R,Y){Cr.call(qe.prototype,Y)||(w[Y]=R)}),w})(),{chain:!1}),qe.VERSION=i,wu(["bind","bindKey","curry","curryRight","partial","partialRight"],function(w){qe[w].placeholder=qe}),wu(["drop","take"],function(w,R){ur.prototype[w]=function(Y){Y=Y===t?1:ms(Di(Y),0);var de=this.__filtered__&&!R?new ur(this):this.clone();return de.__filtered__?de.__takeCount__=js(Y,de.__takeCount__):de.__views__.push({size:js(Y,De),type:w+(de.__dir__<0?"Right":"")}),de},ur.prototype[w+"Right"]=function(Y){return this.reverse()[w](Y).reverse()}}),wu(["filter","map","takeWhile"],function(w,R){var Y=R+1,de=Y==Te||Y==Ie;ur.prototype[w]=function(Pe){var et=this.clone();return et.__iteratees__.push({iteratee:ir(Pe,3),type:Y}),et.__filtered__=et.__filtered__||de,et}}),wu(["head","last"],function(w,R){var Y="take"+(R?"Right":"");ur.prototype[w]=function(){return this[Y](1).value()[0]}}),wu(["initial","tail"],function(w,R){var Y="drop"+(R?"":"Right");ur.prototype[w]=function(){return this.__filtered__?new ur(this):this[Y](1)}}),ur.prototype.compact=function(){return this.filter(Du)},ur.prototype.find=function(w){return this.filter(w).head()},ur.prototype.findLast=function(w){return this.reverse().find(w)},ur.prototype.invokeMap=I(function(w,R){return typeof w=="function"?new ur(this):this.map(function(Y){return Ic(Y,w,R)})}),ur.prototype.reject=function(w){return this.filter(by(ir(w)))},ur.prototype.slice=function(w,R){w=Di(w);var Y=this;return Y.__filtered__&&(w>0||R<0)?new ur(Y):(w<0?Y=Y.takeRight(-w):w&&(Y=Y.drop(w)),R!==t&&(R=Di(R),Y=R<0?Y.dropRight(-R):Y.take(R-w)),Y)},ur.prototype.takeRightWhile=function(w){return this.reverse().takeWhile(w).reverse()},ur.prototype.toArray=function(){return this.take(De)},ec(ur.prototype,function(w,R){var Y=/^(?:filter|find|map|reject)|While$/.test(R),de=/^(?:head|last)$/.test(R),Pe=qe[de?"take"+(R=="last"?"Right":""):R],et=de||/^find/.test(R);Pe&&(qe.prototype[R]=function(){var gt=this.__wrapped__,Bt=de?[1]:arguments,Lt=gt instanceof ur,wn=Bt[0],h=Lt||gr(gt),l=function(D){var F=Pe.apply(qe,Eo([D],Bt));return de&&A?F[0]:F};h&&Y&&typeof wn=="function"&&wn.length!=1&&(Lt=h=!1);var A=this.__chain__,y=!!this.__actions__.length,_=et&&!A,E=Lt&&!y;if(!et&&h){gt=E?gt:new ur(this);var O=w.apply(gt,Bt);return O.__actions__.push({func:Yf,args:[l],thisArg:t}),new xa(O,A)}return _&&E?w.apply(this,Bt):(O=this.thru(l),_?de?O.value()[0]:O.value():O)})}),wu(["pop","push","shift","sort","splice","unshift"],function(w){var R=Nh[w],Y=/^(?:push|sort|unshift)$/.test(w)?"tap":"thru",de=/^(?:pop|shift)$/.test(w);qe.prototype[w]=function(){var Pe=arguments;if(de&&!this.__chain__){var et=this.value();return R.apply(gr(et)?et:[],Pe)}return this[Y](function(gt){return R.apply(gr(gt)?gt:[],Pe)})}}),ec(ur.prototype,function(w,R){var Y=qe[R];if(Y){var de=Y.name+"";Cr.call(so,de)||(so[de]=[]),so[de].push({name:R,func:Y})}}),so[Gs(t,V).name]=[{name:"wrapper",func:t}],ur.prototype.clone=BA,ur.prototype.reverse=uh,ur.prototype.value=OA,qe.prototype.at=Zg,qe.prototype.chain=Vf,qe.prototype.commit=Ia,qe.prototype.next=$f,qe.prototype.plant=Xd,qe.prototype.reverse=sb,qe.prototype.toJSON=qe.prototype.valueOf=qe.prototype.value=ab,qe.prototype.first=qe.prototype.head,Al&&(qe.prototype[Al]=tm),qe}),ih=Up();ei?((ei.exports=ih)._=ih,Ei._=ih):qn._=ih}).call(lue)})(K3,K3.exports)),K3.exports}var $5=uue();const D9=vu($5);function cue(n,e,t){const i=e<0?n.length+e:e;if(i>=0&&i<n.length){const r=t<0?n.length+t:t,[o]=n.splice(e,1);n.splice(r,0,o)}}var RO,uz;function Aue(){if(uz)return RO;uz=1;function n(e){for(var t=5381,i=e.length;i;)t=t*33^e.charCodeAt(--i);return t>>>0}return RO=n,RO}var hue=Aue();const cz=vu(hue);var pf=Uint8Array,wx=Uint16Array,due=Int32Array,aZ=new pf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),lZ=new pf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fue=new pf([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),uZ=function(n,e){for(var t=new wx(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new due(t[30]),i=1;i<30;++i)for(var o=t[i];o<t[i+1];++o)r[o]=o-t[i]<<5|i;return{b:t,r}},cZ=uZ(aZ,2),AZ=cZ.b,pue=cZ.r;AZ[28]=258,pue[258]=28;var mue=uZ(lZ,0),gue=mue.b,R9=new wx(32768);for(var Va=0;Va<32768;++Va){var Wy=(Va&43690)>>1|(Va&21845)<<1;Wy=(Wy&52428)>>2|(Wy&13107)<<2,Wy=(Wy&61680)>>4|(Wy&3855)<<4,R9[Va]=((Wy&65280)>>8|(Wy&255)<<8)>>1}var c4=(function(n,e,t){for(var i=n.length,r=0,o=new wx(e);r<i;++r)n[r]&&++o[n[r]-1];var s=new wx(e);for(r=1;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var a;if(t){a=new wx(1<<e);var c=15-e;for(r=0;r<i;++r)if(n[r])for(var d=r<<4|n[r],m=e-n[r],v=s[n[r]-1]++<<m,M=v|(1<<m)-1;v<=M;++v)a[R9[v]>>c]=d}else for(a=new wx(i),r=0;r<i;++r)n[r]&&(a[r]=R9[s[n[r]-1]++]>>15-n[r]);return a}),H5=new pf(288);for(var Va=0;Va<144;++Va)H5[Va]=8;for(var Va=144;Va<256;++Va)H5[Va]=9;for(var Va=256;Va<280;++Va)H5[Va]=7;for(var Va=280;Va<288;++Va)H5[Va]=8;var hZ=new pf(32);for(var Va=0;Va<32;++Va)hZ[Va]=5;var yue=c4(H5,9,1),vue=c4(hZ,5,1),PO=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},mm=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},LO=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},bue=function(n){return(n+7)/8|0},Cue=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new pf(n.subarray(e,t))},_ue=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Af=function(n,e,t){var i=new Error(e||_ue[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,Af),!t)throw i;return i},CP=function(n,e,t,i){var r=n.length,o=0;if(!r||e.f&&!e.l)return t||new pf(0);var s=!t,a=s||e.i!=2,c=e.i;s&&(t=new pf(r*3));var d=function(Ze){var bt=t.length;if(Ze>bt){var yt=new pf(Math.max(bt*2,Ze));yt.set(t),t=yt}},m=e.f||0,v=e.p||0,M=e.b||0,B=e.l,P=e.d,U=e.m,z=e.n,V=r*8;do{if(!B){m=mm(n,v,1);var Z=mm(n,v+1,3);if(v+=3,Z)if(Z==1)B=yue,P=vue,U=9,z=5;else if(Z==2){var te=mm(n,v,31)+257,q=mm(n,v+10,15)+4,le=te+mm(n,v+5,31)+1;v+=14;for(var ce=new pf(le),ve=new pf(19),ge=0;ge<q;++ge)ve[fue[ge]]=mm(n,v+ge*3,7);v+=q*3;for(var Ee=PO(ve),xe=(1<<Ee)-1,Te=c4(ve,Ee,1),ge=0;ge<le;){var Fe=Te[mm(n,v,xe)];v+=Fe&15;var X=Fe>>4;if(X<16)ce[ge++]=X;else{var Ie=0,Ye=0;for(X==16?(Ye=3+mm(n,v,3),v+=2,Ie=ce[ge-1]):X==17?(Ye=3+mm(n,v,7),v+=3):X==18&&(Ye=11+mm(n,v,127),v+=7);Ye--;)ce[ge++]=Ie}}var At=ce.subarray(0,te),mt=ce.subarray(te);U=PO(At),z=PO(mt),B=c4(At,U,1),P=c4(mt,z,1)}else Af(1);else{var X=bue(v)+4,re=n[X-4]|n[X-3]<<8,ie=X+re;if(ie>r){c&&Af(0);break}a&&d(M+re),t.set(n.subarray(X,ie),M),e.b=M+=re,e.p=v=ie*8,e.f=m;continue}if(v>V){c&&Af(0);break}}a&&d(M+131072);for(var Ue=(1<<U)-1,De=(1<<z)-1,Ge=v;;Ge=v){var Ie=B[LO(n,v)&Ue],Re=Ie>>4;if(v+=Ie&15,v>V){c&&Af(0);break}if(Ie||Af(2),Re<256)t[M++]=Re;else if(Re==256){Ge=v,B=null;break}else{var St=Re-254;if(Re>264){var ge=Re-257,ut=aZ[ge];St=mm(n,v,(1<<ut)-1)+AZ[ge],v+=ut}var kt=P[LO(n,v)&De],Ut=kt>>4;kt||Af(3),v+=kt&15;var mt=gue[Ut];if(Ut>3){var ut=lZ[Ut];mt+=LO(n,v)&(1<<ut)-1,v+=ut}if(v>V){c&&Af(0);break}a&&d(M+131072);var Le=M+St;if(M<mt){var ke=o-mt,Oe=Math.min(mt,Le);for(ke+M<0&&Af(3);M<Oe;++M)t[M]=i[ke+M]}for(;M<Le;++M)t[M]=t[M-mt]}}e.l=B,e.p=Ge,e.b=M,e.f=m,B&&(m=1,e.m=U,e.d=P,e.n=z)}while(!m);return M!=t.length&&s?Cue(t,0,M):t.subarray(0,M)},xue=new pf(0),Mue=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&Af(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var i=(e>>3&1)+(e>>4&1);i>0;i-=!n[t++]);return t+(e&2)},wue=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},Sue=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Af(6,"invalid zlib data"),(n[1]>>5&1)==1&&Af(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Eue(n,e){return CP(n,{i:2},e,e)}function Bue(n,e){var t=Mue(n);return t+8>n.length&&Af(6,"invalid gzip data"),CP(n.subarray(t,-8),{i:2},new pf(wue(n)),e)}function Oue(n,e){return CP(n.subarray(Sue(n),-4),{i:2},e,e)}function Iue(n,e){return n[0]==31&&n[1]==139&&n[2]==8?Bue(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?Eue(n,e):Oue(n,e)}var Tue=typeof TextDecoder<"u"&&new TextDecoder,kue=0;try{Tue.decode(xue,{stream:!0}),kue=1}catch{}var Due=Object.defineProperty,A4=Math.pow,na=(n,e)=>Due(n,"name",{value:e,configurable:!0}),Wc=(n,e,t)=>new Promise((i,r)=>{var o=c=>{try{a(t.next(c))}catch(d){r(d)}},s=c=>{try{a(t.throw(c))}catch(d){r(d)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});na((n,e)=>{let t=!1,i="",r=L.GridLayer.extend({createTile:na((o,s)=>{let a=document.createElement("img"),c=new AbortController,d=c.signal;return a.cancel=()=>{c.abort()},t||(n.getHeader().then(m=>{m.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):m.tileType===2?i="image/png":m.tileType===3?i="image/jpeg":m.tileType===4?i="image/webp":m.tileType===5&&(i="image/avif")}),t=!0),n.getZxy(o.z,o.x,o.y,d).then(m=>{if(m){let v=new Blob([m.data],{type:i}),M=window.URL.createObjectURL(v);a.src=M,a.cancel=void 0,s(void 0,a)}}).catch(m=>{if(m.name!=="AbortError")throw m}),a},"createTile"),_removeTile:na(function(o){let s=this._tiles[o];s&&(s.el.cancel&&s.el.cancel(),s.el.width=0,s.el.height=0,s.el.deleted=!0,L.DomUtil.remove(s.el),delete this._tiles[o],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(o)}))},"_removeTile")});return new r(e)},"leafletRasterLayer");var Rue=na(n=>(e,t)=>{if(t instanceof AbortController)return n(e,t);let i=new AbortController;return n(e,i).then(r=>t(void 0,r.data,r.cacheControl||"",r.expires||""),r=>t(r)).catch(r=>t(r)),{cancel:na(()=>i.abort(),"cancel")}},"v3compat"),dZ=class{constructor(e){this.tilev4=na((t,i)=>Wc(this,null,function*(){if(t.type==="json"){let B=t.url.substr(10),P=this.tiles.get(B);if(P||(P=new L9(B),this.tiles.set(B,P)),this.metadata)return{data:yield P.getTileJson(t.url)};let U=yield P.getHeader();return(U.minLon>=U.maxLon||U.minLat>=U.maxLat)&&console.error(`Bounds of PMTiles archive ${U.minLon},${U.minLat},${U.maxLon},${U.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:U.minZoom,maxzoom:U.maxZoom,bounds:[U.minLon,U.minLat,U.maxLon,U.maxLat]}}}let r=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),o=t.url.match(r);if(!o)throw new Error("Invalid PMTiles protocol URL");let s=o[1],a=this.tiles.get(s);a||(a=new L9(s),this.tiles.set(s,a));let c=o[2],d=o[3],m=o[4],v=yield a.getHeader(),M=yield a?.getZxy(+c,+d,+m,i.signal);if(M)return{data:new Uint8Array(M.data),cacheControl:M.cacheControl,expires:M.expires};if(v.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=Rue(this.tilev4),this.tiles=new Map,this.metadata=e?.metadata||!1,this.errorOnMissingTile=e?.errorOnMissingTile||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};na(dZ,"Protocol");var Pue=dZ;function fZ(n,e){return(e>>>0)*4294967296+(n>>>0)}na(fZ,"toNum");function pZ(n,e){let t=e.buf,i=t[e.pos++],r=(i&112)>>4;if(i<128||(i=t[e.pos++],r|=(i&127)<<3,i<128)||(i=t[e.pos++],r|=(i&127)<<10,i<128)||(i=t[e.pos++],r|=(i&127)<<17,i<128)||(i=t[e.pos++],r|=(i&127)<<24,i<128)||(i=t[e.pos++],r|=(i&1)<<31,i<128))return fZ(n,r);throw new Error("Expected varint not more than 10 bytes")}na(pZ,"readVarintRemainder");function Ax(n){let e=n.buf,t=e[n.pos++],i=t&127;return t<128||(t=e[n.pos++],i|=(t&127)<<7,t<128)||(t=e[n.pos++],i|=(t&127)<<14,t<128)||(t=e[n.pos++],i|=(t&127)<<21,t<128)?i:(t=e[n.pos],i|=(t&15)<<28,pZ(i,n))}na(Ax,"readVarint");function _P(n,e,t,i){if(i===0){t===1&&(e[0]=n-1-e[0],e[1]=n-1-e[1]);let r=e[0];e[0]=e[1],e[1]=r}}na(_P,"rotate");function mZ(n,e){let t=A4(2,n),i=e,r=e,o=e,s=[0,0],a=1;for(;a<t;)i=1&o/2,r=1&(o^i),_P(a,s,i,r),s[0]+=a*i,s[1]+=a*r,o=o/4,a*=2;return[n,s[0],s[1]]}na(mZ,"idOnLevel");var Lue=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function gZ(n,e,t){if(n>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>A4(2,n)-1||t>A4(2,n)-1)throw new Error("tile x/y outside zoom level bounds");let i=Lue[n],r=A4(2,n),o=0,s=0,a=0,c=[e,t],d=r/2;for(;d>0;)o=(c[0]&d)>0?1:0,s=(c[1]&d)>0?1:0,a+=d*d*(3*o^s),_P(d,c,o,s),d=d/2;return i+a}na(gZ,"zxyToTileId");function Uue(n){let e=0;for(let t=0;t<27;t++){let i=(1<<t)*(1<<t);if(e+i>n)return mZ(t,n-e);e+=i}throw new Error("Tile zoom level exceeds max safe number limit (26)")}na(Uue,"tileIdToZxy");var Kue=(n=>(n[n.Unknown=0]="Unknown",n[n.None=1]="None",n[n.Gzip=2]="Gzip",n[n.Brotli=3]="Brotli",n[n.Zstd=4]="Zstd",n))(Kue||{});function x6(n,e){return Wc(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream>"u")return Iue(new Uint8Array(n));let t=new Response(n).body;if(!t)throw new Error("Failed to read response stream");let i=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(i).arrayBuffer()}throw new Error("Compression method not supported")})}na(x6,"defaultDecompress");var Fue=(n=>(n[n.Unknown=0]="Unknown",n[n.Mvt=1]="Mvt",n[n.Png=2]="Png",n[n.Jpeg=3]="Jpeg",n[n.Webp=4]="Webp",n[n.Avif=5]="Avif",n))(Fue||{});function yZ(n){return n===1?".mvt":n===2?".png":n===3?".jpg":n===4?".webp":n===5?".avif":""}na(yZ,"tileTypeExt");var zue=127;function vZ(n,e){let t=0,i=n.length-1;for(;t<=i;){let r=i+t>>1,o=e-n[r].tileId;if(o>0)t=r+1;else if(o<0)i=r-1;else return n[r]}return i>=0&&(n[i].runLength===0||e-n[i].tileId<n[i].runLength)?n[i]:null}na(vZ,"findTile");var jue=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return Wc(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};na(jue,"FileSource");var bZ=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let i="";"navigator"in globalThis&&(i=globalThis.navigator.userAgent||"");let r=i.indexOf("Windows")>-1,o=/Chrome|Chromium|Edg|OPR|Brave/.test(i);this.chromeWindowsNoCache=!1,r&&o&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,i,r){return Wc(this,null,function*(){let o,s;i?s=i:(o=new AbortController,s=o.signal);let a=new Headers(this.customHeaders);a.set("range",`bytes=${e}-${e+t-1}`);let c;this.mustReload?c="reload":this.chromeWindowsNoCache&&(c="no-store");let d=yield fetch(this.url,{signal:s,cache:c,headers:a});if(e===0&&d.status===416){let M=d.headers.get("Content-Range");if(!M||!M.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let B=+M.substr(8);d=yield fetch(this.url,{signal:s,cache:"reload",headers:{range:`bytes=0-${B-1}`}})}let m=d.headers.get("Etag");if(m!=null&&m.startsWith("W/")&&(m=null),d.status===416||r&&m&&m!==r)throw this.mustReload=!0,new P9(`Server returned non-matching ETag ${r} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(d.status>=300)throw new Error(`Bad response code: ${d.status}`);let v=d.headers.get("Content-Length");if(d.status===200&&(!v||+v>t))throw o&&o.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield d.arrayBuffer(),etag:m||void 0,cacheControl:d.headers.get("Cache-Control")||void 0,expires:d.headers.get("Expires")||void 0}})}};na(bZ,"FetchSource");var Nue=bZ;function ap(n,e){let t=n.getUint32(e+4,!0),i=n.getUint32(e+0,!0);return t*A4(2,32)+i}na(ap,"getUint64");function CZ(n,e){let t=new DataView(n),i=t.getUint8(7);if(i>3)throw new Error(`Archive is spec version ${i} but this library supports up to spec version 3`);return{specVersion:i,rootDirectoryOffset:ap(t,8),rootDirectoryLength:ap(t,16),jsonMetadataOffset:ap(t,24),jsonMetadataLength:ap(t,32),leafDirectoryOffset:ap(t,40),leafDirectoryLength:ap(t,48),tileDataOffset:ap(t,56),tileDataLength:ap(t,64),numAddressedTiles:ap(t,72),numTileEntries:ap(t,80),numTileContents:ap(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}na(CZ,"bytesToHeader");function xP(n){let e={buf:new Uint8Array(n),pos:0},t=Ax(e),i=[],r=0;for(let o=0;o<t;o++){let s=Ax(e);i.push({tileId:r+s,offset:0,length:0,runLength:1}),r+=s}for(let o=0;o<t;o++)i[o].runLength=Ax(e);for(let o=0;o<t;o++)i[o].length=Ax(e);for(let o=0;o<t;o++){let s=Ax(e);s===0&&o>0?i[o].offset=i[o-1].offset+i[o-1].length:i[o].offset=s-1}return i}na(xP,"deserializeIndex");var _Z=class extends Error{};na(_Z,"EtagMismatch");var P9=_Z;function MP(n,e){return Wc(this,null,function*(){let t=yield n.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let i=t.data.slice(0,zue),r=CZ(i,t.etag),o=t.data.slice(r.rootDirectoryOffset,r.rootDirectoryOffset+r.rootDirectoryLength),s=`${n.getKey()}|${r.etag||""}|${r.rootDirectoryOffset}|${r.rootDirectoryLength}`,a=xP(yield e(o,r.internalCompression));return[r,[s,a.length,a]]})}na(MP,"getHeaderAndRoot");function wP(n,e,t,i,r){return Wc(this,null,function*(){let o=yield n.getBytes(t,i,void 0,r.etag),s=yield e(o.data,r.internalCompression),a=xP(s);if(a.length===0)throw new Error("Empty directory is invalid");return a})}na(wP,"getDirectory");var Gue=class{constructor(e=100,t=!0,i=x6){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=i}getHeader(e){return Wc(this,null,function*(){let t=e.getKey(),i=this.cache.get(t);if(i)return i.lastUsed=this.counter++,i.data;let r=yield MP(e,this.decompress);return r[1]&&this.cache.set(r[1][0],{lastUsed:this.counter++,data:r[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:r[0]}),this.prune(),r[0]})}getDirectory(e,t,i,r){return Wc(this,null,function*(){let o=`${e.getKey()}|${r.etag||""}|${t}|${i}`,s=this.cache.get(o);if(s)return s.lastUsed=this.counter++,s.data;let a=yield wP(e,this.decompress,t,i,r);return this.cache.set(o,{lastUsed:this.counter++,data:a}),this.prune(),a})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((i,r)=>{i.lastUsed<e&&(e=i.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e){return Wc(this,null,function*(){this.cache.delete(e.getKey())})}};na(Gue,"ResolvedValueCache");var xZ=class{constructor(e=100,t=!0,i=x6){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=i}getHeader(e){return Wc(this,null,function*(){let t=e.getKey(),i=this.cache.get(t);if(i)return i.lastUsed=this.counter++,yield i.data;let r=new Promise((o,s)=>{MP(e,this.decompress).then(a=>{a[1]&&this.cache.set(a[1][0],{lastUsed:this.counter++,data:Promise.resolve(a[1][2])}),o(a[0]),this.prune()}).catch(a=>{s(a)})});return this.cache.set(t,{lastUsed:this.counter++,data:r}),r})}getDirectory(e,t,i,r){return Wc(this,null,function*(){let o=`${e.getKey()}|${r.etag||""}|${t}|${i}`,s=this.cache.get(o);if(s)return s.lastUsed=this.counter++,yield s.data;let a=new Promise((c,d)=>{wP(e,this.decompress,t,i,r).then(m=>{c(m),this.prune()}).catch(m=>{d(m)})});return this.cache.set(o,{lastUsed:this.counter++,data:a}),a})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((i,r)=>{i.lastUsed<e&&(e=i.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e){return Wc(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let i=new Promise((r,o)=>{this.getHeader(e).then(s=>{r(),this.invalidations.delete(t)}).catch(s=>{o(s)})});this.invalidations.set(t,i)})}};na(xZ,"SharedPromiseCache");var Wue=xZ,MZ=class{constructor(e,t,i){typeof e=="string"?this.source=new Nue(e):this.source=e,i?this.decompress=i:this.decompress=x6,t?this.cache=t:this.cache=new Wue}getHeader(){return Wc(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,i,r){return Wc(this,null,function*(){let o=gZ(e,t,i),s=yield this.cache.getHeader(this.source);if(e<s.minZoom||e>s.maxZoom)return;let a=s.rootDirectoryOffset,c=s.rootDirectoryLength;for(let d=0;d<=3;d++){let m=yield this.cache.getDirectory(this.source,a,c,s),v=vZ(m,o);if(v){if(v.runLength>0){let M=yield this.source.getBytes(s.tileDataOffset+v.offset,v.length,r,s.etag);return{data:yield this.decompress(M.data,s.tileCompression),cacheControl:M.cacheControl,expires:M.expires}}a=s.leafDirectoryOffset+v.offset,c=v.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,i,r){return Wc(this,null,function*(){try{return yield this.getZxyAttempt(e,t,i,r)}catch(o){if(o instanceof P9)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,i,r);throw o}})}getMetadataAttempt(){return Wc(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),i=yield this.decompress(t.data,e.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(i))})}getMetadata(){return Wc(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof P9)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return Wc(this,null,function*(){let t=yield this.getHeader(),i=yield this.getMetadata(),r=yZ(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${r}`],vector_layers:i.vector_layers,attribution:i.attribution,description:i.description,name:i.name,version:i.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};na(MZ,"PMTiles");var L9=MZ,Que=8,que={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Yue={"*":{type:"source"}},Vue=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],$ue={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},Hue={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Zue={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Xue={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Jue={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},ece={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},tce={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},nce=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],ice={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},rce={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},oce={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},sce={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ace={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},lce={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},uce={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},cce={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ace={type:"array",value:"*"},hce={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},dce={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},fce={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},pce={type:"array",value:"*",minimum:1},mce={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},gce={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},yce={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},vce={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},bce=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],Cce={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},_ce={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},xce={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Mce={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},wce={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Sce={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Ece={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Bce={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Oce={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},Ice={"*":{type:"string"}},$o={$version:Que,$root:que,sources:Yue,source:Vue,source_vector:$ue,source_raster:Hue,source_raster_dem:Zue,source_geojson:Xue,source_video:Jue,source_image:ece,layer:tce,layout:nce,layout_background:ice,layout_fill:rce,layout_circle:oce,layout_heatmap:sce,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:ace,layout_symbol:lce,layout_raster:uce,layout_hillshade:cce,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:Ace,filter_operator:hce,geometry_type:dce,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:fce,expression:pce,light:mce,sky:gce,terrain:yce,projection:vce,paint:bce,paint_fill:Cce,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:_ce,paint_circle:xce,paint_heatmap:Mce,paint_symbol:wce,paint_raster:Sce,paint_hillshade:Ece,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:Bce,transition:Oce,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:Ice};const Tce=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function kce(n,e){const t={};for(const i in n)i!=="ref"&&(t[i]=n[i]);return Tce.forEach(i=>{i in e&&(t[i]=e[i])}),t}function Dce(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=kce(n[t],e[n[t].ref]));return n}function xs(n,e){if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!xs(n[t],e[t]))return!1;return!0}if(typeof n=="object"&&n!==null&&e!==null){if(typeof e!="object"||Object.keys(n).length!==Object.keys(e).length)return!1;for(const i in n)if(!xs(n[i],e[i]))return!1;return!0}return n===e}function up(n,e){n.push(e)}function wZ(n,e,t){up(t,{command:"addSource",args:[n,e[n]]})}function SZ(n,e,t){up(e,{command:"removeSource",args:[n]}),t[n]=!0}function Rce(n,e,t,i){SZ(n,t,i),wZ(n,e,t)}function Pce(n,e,t){let i;for(i in n[t])if(Object.prototype.hasOwnProperty.call(n[t],i)&&i!=="data"&&!xs(n[t][i],e[t][i]))return!1;for(i in e[t])if(Object.prototype.hasOwnProperty.call(e[t],i)&&i!=="data"&&!xs(n[t][i],e[t][i]))return!1;return!0}function Lce(n,e,t,i){n=n||{},e=e||{};let r;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(Object.prototype.hasOwnProperty.call(e,r)||SZ(r,t,i));for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(Object.prototype.hasOwnProperty.call(n,r)?xs(n[r],e[r])||(n[r].type==="geojson"&&e[r].type==="geojson"&&Pce(n,e,r)?up(t,{command:"setGeoJSONSourceData",args:[r,e[r].data]}):Rce(r,e,t,i)):wZ(r,e,t))}function qM(n,e,t,i,r,o){n=n||{},e=e||{};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(xs(n[s],e[s])||t.push({command:o,args:[i,s,e[s],r]}));for(const s in e)!Object.prototype.hasOwnProperty.call(e,s)||Object.prototype.hasOwnProperty.call(n,s)||xs(n[s],e[s])||t.push({command:o,args:[i,s,e[s],r]})}function Az(n){return n.id}function hz(n,e){return n[e.id]=e,n}function Uce(n,e,t){n=n||[],e=e||[];const i=n.map(Az),r=e.map(Az),o=n.reduce(hz,{}),s=e.reduce(hz,{}),a=i.slice(),c=Object.create(null);let d,m,v,M,B;for(let P=0,U=0;P<i.length;P++)d=i[P],Object.prototype.hasOwnProperty.call(s,d)?U++:(up(t,{command:"removeLayer",args:[d]}),a.splice(a.indexOf(d,U),1));for(let P=0,U=0;P<r.length;P++)d=r[r.length-1-P],a[a.length-1-P]!==d&&(Object.prototype.hasOwnProperty.call(o,d)?(up(t,{command:"removeLayer",args:[d]}),a.splice(a.lastIndexOf(d,a.length-U),1)):U++,M=a[a.length-P],up(t,{command:"addLayer",args:[s[d],M]}),a.splice(a.length-P,0,d),c[d]=!0);for(let P=0;P<r.length;P++)if(d=r[P],m=o[d],v=s[d],!(c[d]||xs(m,v))){if(!xs(m.source,v.source)||!xs(m["source-layer"],v["source-layer"])||!xs(m.type,v.type)){up(t,{command:"removeLayer",args:[d]}),M=a[a.lastIndexOf(d)+1],up(t,{command:"addLayer",args:[v,M]});continue}qM(m.layout,v.layout,t,d,null,"setLayoutProperty"),qM(m.paint,v.paint,t,d,null,"setPaintProperty"),xs(m.filter,v.filter)||up(t,{command:"setFilter",args:[d,v.filter]}),(!xs(m.minzoom,v.minzoom)||!xs(m.maxzoom,v.maxzoom))&&up(t,{command:"setLayerZoomRange",args:[d,v.minzoom,v.maxzoom]});for(B in m)Object.prototype.hasOwnProperty.call(m,B)&&(B==="layout"||B==="paint"||B==="filter"||B==="metadata"||B==="minzoom"||B==="maxzoom"||(B.indexOf("paint.")===0?qM(m[B],v[B],t,d,B.slice(6),"setPaintProperty"):xs(m[B],v[B])||up(t,{command:"setLayerProperty",args:[d,B,v[B]]})));for(B in v)!Object.prototype.hasOwnProperty.call(v,B)||Object.prototype.hasOwnProperty.call(m,B)||B==="layout"||B==="paint"||B==="filter"||B==="metadata"||B==="minzoom"||B==="maxzoom"||(B.indexOf("paint.")===0?qM(m[B],v[B],t,d,B.slice(6),"setPaintProperty"):xs(m[B],v[B])||up(t,{command:"setLayerProperty",args:[d,B,v[B]]}))}}function Kce(n,e){if(!n)return[{command:"setStyle",args:[e]}];let t=[];try{if(!xs(n.version,e.version))return[{command:"setStyle",args:[e]}];xs(n.center,e.center)||t.push({command:"setCenter",args:[e.center]}),xs(n.state,e.state)||t.push({command:"setGlobalState",args:[e.state]}),xs(n.centerAltitude,e.centerAltitude)||t.push({command:"setCenterAltitude",args:[e.centerAltitude]}),xs(n.zoom,e.zoom)||t.push({command:"setZoom",args:[e.zoom]}),xs(n.bearing,e.bearing)||t.push({command:"setBearing",args:[e.bearing]}),xs(n.pitch,e.pitch)||t.push({command:"setPitch",args:[e.pitch]}),xs(n.roll,e.roll)||t.push({command:"setRoll",args:[e.roll]}),xs(n.sprite,e.sprite)||t.push({command:"setSprite",args:[e.sprite]}),xs(n.glyphs,e.glyphs)||t.push({command:"setGlyphs",args:[e.glyphs]}),xs(n.transition,e.transition)||t.push({command:"setTransition",args:[e.transition]}),xs(n.light,e.light)||t.push({command:"setLight",args:[e.light]}),xs(n.terrain,e.terrain)||t.push({command:"setTerrain",args:[e.terrain]}),xs(n.sky,e.sky)||t.push({command:"setSky",args:[e.sky]}),xs(n.projection,e.projection)||t.push({command:"setProjection",args:[e.projection]});const i={},r=[];Lce(n.sources,e.sources,r,i);const o=[];n.layers&&n.layers.forEach(s=>{"source"in s&&i[s.source]?t.push({command:"removeLayer",args:[s.id]}):o.push(s)}),t=t.concat(r),Uce(o,e.layers,t)}catch(i){console.warn("Unable to compute style diff:",i),t=[{command:"setStyle",args:[e]}]}return t}class jn{constructor(e,t,i,r){this.message=(e?`${e}: `:"")+i,r&&(this.identifier=r),t!=null&&t.__line__&&(this.line=t.__line__)}}function s2(n,...e){for(const t of e)for(const i in t)n[i]=t[i];return n}let eg=class extends Error{constructor(e,t){super(t),this.message=t,this.key=e}},Fce=class EZ{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[i,r]of t)this.bindings[i]=r}concat(e){return new EZ(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}};const M6={kind:"null"},Xn={kind:"number"},ao={kind:"string"},Xr={kind:"boolean"},fg={kind:"color"},w6={kind:"projectionDefinition"},dC={kind:"object"},Qr={kind:"value"},zce={kind:"error"},S6={kind:"collator"},E6={kind:"formatted"},B6={kind:"padding"},K4={kind:"colorArray"},O6={kind:"numberArray"},Z5={kind:"resolvedImage"},I6={kind:"variableAnchorOffsetCollection"};function mf(n,e){return{kind:"array",itemType:n,N:e}}function sl(n){if(n.kind==="array"){const e=sl(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const jce=[M6,Xn,ao,Xr,fg,w6,E6,dC,mf(Qr),B6,O6,K4,Z5,I6];function F4(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!F4(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of jce)if(!F4(t,e))return null}}return`Expected ${sl(n)} but found ${sl(e)} instead.`}function SP(n,e){return e.some(t=>t.kind===n.kind)}function fC(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function Qy(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const BZ=.96422,OZ=1,IZ=.82521,TZ=4/29,Lx=6/29,kZ=3*Lx*Lx,Nce=Lx*Lx*Lx,Gce=Math.PI/180,Wce=180/Math.PI;function DZ(n){return n=n%360,n<0&&(n+=360),n}function RZ([n,e,t,i]){n=UO(n),e=UO(e),t=UO(t);let r,o;const s=KO((.2225045*n+.7168786*e+.0606169*t)/OZ);n===e&&e===t?r=o=s:(r=KO((.4360747*n+.3850649*e+.1430804*t)/BZ),o=KO((.0139322*n+.0971045*e+.7141733*t)/IZ));const a=116*s-16;return[a<0?0:a,500*(r-s),200*(s-o),i]}function UO(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function KO(n){return n>Nce?Math.pow(n,1/3):n/kZ+TZ}function PZ([n,e,t,i]){let r=(n+16)/116,o=isNaN(e)?r:r+e/500,s=isNaN(t)?r:r-t/200;return r=OZ*zO(r),o=BZ*zO(o),s=IZ*zO(s),[FO(3.1338561*o-1.6168667*r-.4906146*s),FO(-.9787684*o+1.9161415*r+.033454*s),FO(.0719453*o-.2289914*r+1.4052427*s),i]}function FO(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function zO(n){return n>Lx?n*n*n:kZ*(n-TZ)}function Qce(n){const[e,t,i,r]=RZ(n),o=Math.sqrt(t*t+i*i);return[Math.round(o*1e4)?DZ(Math.atan2(i,t)*Wce):NaN,o,e,r]}function qce([n,e,t,i]){return n=isNaN(n)?0:n*Gce,PZ([t,Math.cos(n)*e,Math.sin(n)*e,i])}function Yce([n,e,t,i]){n=DZ(n),e/=100,t/=100;function r(o){const s=(o+n/30)%12,a=e*Math.min(t,1-t);return t-a*Math.max(-1,Math.min(s-3,9-s,1))}return[r(0),r(8),r(4),i]}const Vce=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function h4(n,e){return Vce(n,e)?n[e]:void 0}function $ce(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=h4(Hce,n);if(e){const[r,o,s]=e;return[r/255,o/255,s/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const o=n.length<6?1:2;let s=1;return[YM(n.slice(s,s+=o)),YM(n.slice(s,s+=o)),YM(n.slice(s,s+=o)),YM(n.slice(s,s+o)||"ff")]}if(n.startsWith("rgb")){const r=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=n.match(r);if(o){const[s,a,c,d,m,v,M,B,P,U,z,V]=o,Z=[d||" ",M||" ",U].join("");if(Z==="  "||Z==="  /"||Z===",,"||Z===",,,"){const X=[c,v,P].join(""),re=X==="%%%"?100:X===""?255:0;if(re){const ie=[hx(+a/re,0,1),hx(+m/re,0,1),hx(+B/re,0,1),z?dz(+z,V):1];if(fz(ie))return ie}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=n.match(t);if(i){const[r,o,s,a,c,d,m,v,M]=i,B=[s||" ",c||" ",m].join("");if(B==="  "||B==="  /"||B===",,"||B===",,,"){const P=[+o,hx(+a,0,100),hx(+d,0,100),v?dz(+v,M):1];if(fz(P))return Yce(P)}}}function YM(n){return parseInt(n.padEnd(2,n),16)/255}function dz(n,e){return hx(e?n/100:n,0,1)}function hx(n,e,t){return Math.min(Math.max(e,n),t)}function fz(n){return!n.some(Number.isNaN)}const Hce={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Cv(n,e,t){return n+t*(e-n)}function a2(n,e,t){return n.map((i,r)=>Cv(i,e[r],t))}function Zce(n){return n==="rgb"||n==="hcl"||n==="lab"}let ia=class dx{constructor(e,t,i,r=1,o=!0){this.r=e,this.g=t,this.b=i,this.a=r,o||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[e,t,i,r]))}static parse(e){if(e instanceof dx)return e;if(typeof e!="string")return;const t=$ce(e);if(t)return new dx(...t,!1)}get rgb(){const{r:e,g:t,b:i,a:r}=this,o=r||1/0;return this.overwriteGetter("rgb",[e/o,t/o,i/o,r])}get hcl(){return this.overwriteGetter("hcl",Qce(this.rgb))}get lab(){return this.overwriteGetter("lab",RZ(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,i,r]=this.rgb;return`rgba(${[e,t,i].map(o=>Math.round(o*255)).join(",")},${r})`}static interpolate(e,t,i,r="rgb"){switch(r){case"rgb":{const[o,s,a,c]=a2(e.rgb,t.rgb,i);return new dx(o,s,a,c,!1)}case"hcl":{const[o,s,a,c]=e.hcl,[d,m,v,M]=t.hcl;let B,P;if(!isNaN(o)&&!isNaN(d)){let X=d-o;d>o&&X>180?X-=360:d<o&&o-d>180&&(X+=360),B=o+i*X}else isNaN(o)?isNaN(d)?B=NaN:(B=d,(a===1||a===0)&&(P=m)):(B=o,(v===1||v===0)&&(P=s));const[U,z,V,Z]=qce([B,P??Cv(s,m,i),Cv(a,v,i),Cv(c,M,i)]);return new dx(U,z,V,Z,!1)}case"lab":{const[o,s,a,c]=PZ(a2(e.lab,t.lab,i));return new dx(o,s,a,c,!1)}}}};ia.black=new ia(0,0,0,1);ia.white=new ia(1,1,1,1);ia.transparent=new ia(0,0,0,0);ia.red=new ia(1,0,0,1);let EP=class{constructor(e,t,i){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}};const Xce=["bottom","center","top"];let U9=class{constructor(e,t,i,r,o,s){this.text=e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=o,this.verticalAlign=s}},O2=class uS{constructor(e){this.sections=e}static fromString(e){return new uS([new U9(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof uS?e:uS.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}},Bg=class F3{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof F3)return e;if(typeof e=="number")return new F3([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new F3(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new F3(a2(e.values,t.values,i))}},Og=class z3{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof z3)return e;if(typeof e=="number")return new z3([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new z3(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new z3(a2(e.values,t.values,i))}},xp=class j3{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof j3)return e;if(typeof e=="string"){const i=ia.parse(e);return i?new j3([i]):void 0}if(!Array.isArray(e))return;const t=[];for(const i of e){if(typeof i!="string")return;const r=ia.parse(i);if(!r)return;t.push(r)}return new j3(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i,r="rgb"){const o=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let s=0;s<e.values.length;s++)o.push(ia.interpolate(e.values[s],t.values[s],i,r));return new j3(o)}},vl=class extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}};const Jce=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);let Uv=class cS{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof cS)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const i=e[t],r=e[t+1];if(typeof i!="string"||!Jce.has(i)||!Array.isArray(r)||r.length!==2||typeof r[0]!="number"||typeof r[1]!="number")return}return new cS(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){const r=e.values,o=t.values;if(r.length!==o.length)throw new vl(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const s=[];for(let a=0;a<r.length;a+=2){if(r[a]!==o[a])throw new vl(`Cannot interpolate values containing mismatched anchors. from[${a}]: ${r[a]}, to[${a}]: ${o[a]}`);s.push(r[a]);const[c,d]=r[a+1],[m,v]=o[a+1];s.push([Cv(c,m,i),Cv(d,v,i)])}return new cS(s)}},zC=class LZ{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new LZ({name:e,available:!1}):null}},I2=class fx{constructor(e,t,i){this.from=e,this.to=t,this.transition=i}static interpolate(e,t,i){return new fx(e,t,i)}static parse(e){if(e instanceof fx)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new fx(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new fx(e.from,e.to,e.transition);if(typeof e=="string")return new fx(e,e,1)}};function UZ(n,e,t,i){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[n,e,t,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[n,e,t,i]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function z4(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof I2||n instanceof ia||n instanceof EP||n instanceof O2||n instanceof Bg||n instanceof Og||n instanceof xp||n instanceof Uv||n instanceof zC)return!0;if(Array.isArray(n)){for(const e of n)if(!z4(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!z4(n[e]))return!1;return!0}else return!1}function zu(n){if(n===null)return M6;if(typeof n=="string")return ao;if(typeof n=="boolean")return Xr;if(typeof n=="number")return Xn;if(n instanceof ia)return fg;if(n instanceof I2)return w6;if(n instanceof EP)return S6;if(n instanceof O2)return E6;if(n instanceof Bg)return B6;if(n instanceof Og)return O6;if(n instanceof xp)return K4;if(n instanceof Uv)return I6;if(n instanceof zC)return Z5;if(Array.isArray(n)){const e=n.length;let t;for(const i of n){const r=zu(i);if(!t)t=r;else{if(t===r)continue;t=Qr;break}}return mf(t||Qr,e)}else return dC}function d4(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof ia||n instanceof I2||n instanceof O2||n instanceof Bg||n instanceof Og||n instanceof xp||n instanceof Uv||n instanceof zC?n.toString():JSON.stringify(n)}let $S=class KZ{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!z4(e[1]))return t.error("invalid value");const i=e[1];let r=zu(i);const o=t.expectedType;return r.kind==="array"&&r.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(r=o),new KZ(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}};const VM={string:ao,number:Xn,boolean:Xr,object:dC};let E1=class FZ{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=1,r;const o=e[0];if(o==="array"){let a;if(e.length>2){const d=e[1];if(typeof d!="string"||!(d in VM)||d==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=VM[d],i++}else a=Qr;let c;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);c=e[2],i++}r=mf(a,c)}else{if(!VM[o])throw new Error(`Types doesn't contain name = ${o}`);r=VM[o]}const s=[];for(;i<e.length;i++){const a=t.parse(e[i],i,Qr);if(!a)return null;s.push(a)}return new FZ(r,s)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(F4(this.type,zu(i))){if(t===this.args.length-1)throw new vl(`Expected value to be of type ${sl(this.type)}, but found ${sl(zu(i))} instead.`)}else return i}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const pz={"to-boolean":Xr,"to-color":fg,"to-number":Xn,"to-string":ao};let Sx=class zZ{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(!pz[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");const r=pz[i],o=[];for(let s=1;s<e.length;s++){const a=t.parse(e[s],s,Qr);if(!a)return null;o.push(a)}return new zZ(r,o)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,i;for(const r of this.args){if(t=r.evaluate(e),i=null,t instanceof ia)return t;if(typeof t=="string"){const o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&(t.length<3||t.length>4?i=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:i=UZ(t[0],t[1],t[2],t[3]),!i))return new ia(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new vl(i||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const i of this.args){t=i.evaluate(e);const r=Bg.parse(t);if(r)return r}throw new vl(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=Og.parse(t);if(r)return r}throw new vl(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=xp.parse(t);if(r)return r}throw new vl(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const i of this.args){t=i.evaluate(e);const r=Uv.parse(t);if(r)return r}throw new vl(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const i of this.args){if(t=i.evaluate(e),t===null)return 0;const r=Number(t);if(!isNaN(r))return r}throw new vl(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return O2.fromString(d4(this.args[0].evaluate(e)));case"resolvedImage":return zC.fromString(d4(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return d4(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const eAe=["Unknown","Point","LineString","Polygon"];let jZ=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?eAe[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=ia.parse(e),this._parseColorCache.set(e,t)),t}},NZ=class GZ{constructor(e,t,i=[],r,o=new Fce,s=[]){this.registry=e,this.path=i,this.key=i.map(a=>`[${a}]`).join(""),this.scope=o,this.errors=s,this.expectedType=r,this._isConstant=t}parse(e,t,i,r,o={}){return t?this.concat(t,i,r)._parse(e,o):this._parse(e,o)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function i(r,o,s){return s==="assert"?new E1(o,[r]):s==="coerce"?new Sx(o,[r]):r}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[r];if(o){let s=o.parse(e,this);if(!s)return null;if(this.expectedType){const a=this.expectedType,c=s.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&c.kind==="value")s=i(s,a,t.typeAnnotation||"assert");else if(a.kind==="projectionDefinition"&&["string","array"].includes(c.kind)||["color","formatted","resolvedImage"].includes(a.kind)&&["value","string"].includes(c.kind)||["padding","numberArray"].includes(a.kind)&&["value","number","array"].includes(c.kind)||a.kind==="colorArray"&&["value","string","array"].includes(c.kind)||a.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(c.kind))s=i(s,a,t.typeAnnotation||"coerce");else if(this.checkSubtype(a,c))return null}if(!(s instanceof $S)&&s.type.kind!=="resolvedImage"&&this._isConstant(s)){const a=new jZ;try{s=new $S(s.type,s.evaluate(a))}catch(c){return this.error(c.message),null}}return s}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const r=typeof e=="number"?this.path.concat(e):this.path,o=i?this.scope.concat(i):this.scope;return new GZ(this.registry,this._isConstant,r,t||null,o,this.errors)}error(e,...t){const i=`${this.key}${t.map(r=>`[${r}]`).join("")}`;this.errors.push(new eg(i,e))}checkSubtype(e,t){const i=F4(e,t);return i&&this.error(i),i}},WZ=class QZ{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let o=1;o<e.length-1;o+=2){const s=e[o];if(typeof s!="string")return t.error(`Expected string, but found ${typeof s} instead.`,o);if(/[^a-zA-Z0-9_]/.test(s))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const a=t.parse(e[o+1],o+1);if(!a)return null;i.push([s,a])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return r?new QZ(i,r):null}outputDefined(){return this.result.outputDefined()}},qZ=class YZ{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new YZ(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}},tAe=class VZ{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Xn),r=t.parse(e[2],2,mf(t.expectedType||Qr));if(!i||!r)return null;const o=r.type;return new VZ(o.itemType,i,r)}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new vl(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new vl(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new vl(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}},nAe=class $Z{constructor(e,t){this.type=Xr,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Qr),r=t.parse(e[2],2,Qr);return!i||!r?null:SP(i.type,[Xr,ao,Xn,M6,Qr])?new $Z(i,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${sl(i.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!fC(t,["boolean","string","number","null"]))throw new vl(`Expected first argument to be of type boolean, string, number or null, but found ${sl(zu(t))} instead.`);if(!fC(i,["string","array"]))throw new vl(`Expected second argument to be of type array or string, but found ${sl(zu(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}},iAe=class K9{constructor(e,t,i){this.type=Xn,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Qr),r=t.parse(e[2],2,Qr);if(!i||!r)return null;if(!SP(i.type,[Xr,ao,Xn,M6,Qr]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${sl(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,Xn);return o?new K9(i,r,o):null}else return new K9(i,r)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!fC(t,["boolean","string","number","null"]))throw new vl(`Expected first argument to be of type boolean, string, number or null, but found ${sl(zu(t))} instead.`);let r;if(this.fromIndex&&(r=this.fromIndex.evaluate(e)),fC(i,["string"])){const o=i.indexOf(t,r);return o===-1?-1:[...i.slice(0,o)].length}else{if(fC(i,["array"]))return i.indexOf(t,r);throw new vl(`Expected second argument to be of type array or string, but found ${sl(zu(i))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}},rAe=class HZ{constructor(e,t,i,r,o,s){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=o,this.otherwise=s}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let i,r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const o={},s=[];for(let d=2;d<e.length-1;d+=2){let m=e[d];const v=e[d+1];Array.isArray(m)||(m=[m]);const M=t.concat(d);if(m.length===0)return M.error("Expected at least one branch label.");for(const P of m){if(typeof P!="number"&&typeof P!="string")return M.error("Branch labels must be numbers or strings.");if(typeof P=="number"&&Math.abs(P)>Number.MAX_SAFE_INTEGER)return M.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof P=="number"&&Math.floor(P)!==P)return M.error("Numeric branch labels must be integer values.");if(!i)i=zu(P);else if(M.checkSubtype(i,zu(P)))return null;if(typeof o[String(P)]<"u")return M.error("Branch labels must be unique.");o[String(P)]=s.length}const B=t.parse(v,d,r);if(!B)return null;r=r||B.type,s.push(B)}const a=t.parse(e[1],1,Qr);if(!a)return null;const c=t.parse(e[e.length-1],e.length-1,r);return!c||a.type.kind!=="value"&&t.concat(1).checkSubtype(i,a.type)?null:new HZ(i,r,a,o,s,c)}evaluate(e){const t=this.input.evaluate(e);return(zu(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}},oAe=class ZZ{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const r=[];for(let s=1;s<e.length-1;s+=2){const a=t.parse(e[s],s,Xr);if(!a)return null;const c=t.parse(e[s+1],s+1,i);if(!c)return null;r.push([a,c]),i=i||c.type}const o=t.parse(e[e.length-1],e.length-1,i);if(!o)return null;if(!i)throw new Error("Can't infer output type");return new ZZ(i,r,o)}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}},sAe=class F9{constructor(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Qr),r=t.parse(e[2],2,Xn);if(!i||!r)return null;if(!SP(i.type,[mf(Qr),ao,Qr]))return t.error(`Expected first argument to be of type array or string, but found ${sl(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,Xn);return o?new F9(i.type,i,r,o):null}else return new F9(i.type,i,r)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);let r;if(this.endIndex&&(r=this.endIndex.evaluate(e)),fC(t,["string"]))return[...t].slice(i,r).join("");if(fC(t,["array"]))return t.slice(i,r);throw new vl(`Expected first argument to be of type array or string, but found ${sl(zu(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}};function T6(n,e){const t=n.length-1;let i=0,r=t,o=0,s,a;for(;i<=r;)if(o=Math.floor((i+r)/2),s=n[o],a=n[o+1],s<=e){if(o===t||e<a)return o;i=o+1}else if(s>e)r=o-1;else throw new vl("Input is not a number.");return 0}let XZ=class JZ{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,o]of i)this.labels.push(r),this.outputs.push(o)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,Xn);if(!i)return null;const r=[];let o=null;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);for(let s=1;s<e.length;s+=2){const a=s===1?-1/0:e[s],c=e[s+1],d=s,m=s+1;if(typeof a!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(r.length&&r[r.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',d);const v=t.parse(c,m,o);if(!v)return null;o=o||v.type,r.push([a,v])}return new JZ(o,i,r)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=T6(t,r);return i[s].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function aAe(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jO,mz;function lAe(){if(mz)return jO;mz=1,jO=n;function n(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=r}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,r=0;r<8;r++){var o=this.sampleCurveX(i)-e;if(Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i=i-o/s}var a=0,c=1;for(i=e,r=0;r<20&&(o=this.sampleCurveX(i),!(Math.abs(o-e)<t));r++)e>o?a=i:c=i,i=(c-a)*.5+a;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},jO}var uAe=lAe(),cAe=aAe(uAe);let I1=class z9{constructor(e,t,i,r,o){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[s,a]of o)this.labels.push(s),this.outputs.push(a)}static interpolationFactor(e,t,i,r){let o=0;if(e.name==="exponential")o=NO(t,e.base,i,r);else if(e.name==="linear")o=NO(t,1,i,r);else if(e.name==="cubic-bezier"){const s=e.controlPoints;o=new cAe(s[0],s[1],s[2],s[3]).solve(NO(t,1,i,r))}return o}static parse(e,t){let[i,r,o,...s]=e;if(!Array.isArray(r)||r.length===0)return t.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const d=r[1];if(typeof d!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:d}}else if(r[0]==="cubic-bezier"){const d=r.slice(1);if(d.length!==4||d.some(m=>typeof m!="number"||m<0||m>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:d}}else return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(o=t.parse(o,2,Xn),!o)return null;const a=[];let c=null;(i==="interpolate-hcl"||i==="interpolate-lab")&&t.expectedType!=K4?c=fg:t.expectedType&&t.expectedType.kind!=="value"&&(c=t.expectedType);for(let d=0;d<s.length;d+=2){const m=s[d],v=s[d+1],M=d+3,B=d+4;if(typeof m!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(a.length&&a[a.length-1][0]>=m)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',M);const P=t.parse(v,B,c);if(!P)return null;c=c||P.type,a.push([m,P])}return!Qy(c,Xn)&&!Qy(c,w6)&&!Qy(c,fg)&&!Qy(c,B6)&&!Qy(c,O6)&&!Qy(c,K4)&&!Qy(c,I6)&&!Qy(c,mf(Xn))?t.error(`Type ${sl(c)} is not interpolatable.`):new z9(c,i,r,o,a)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=T6(t,r),a=t[s],c=t[s+1],d=z9.interpolationFactor(this.interpolation,r,a,c),m=i[s].evaluate(e),v=i[s+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Cv(m,v,d);case"color":return ia.interpolate(m,v,d);case"padding":return Bg.interpolate(m,v,d);case"colorArray":return xp.interpolate(m,v,d);case"numberArray":return Og.interpolate(m,v,d);case"variableAnchorOffsetCollection":return Uv.interpolate(m,v,d);case"array":return a2(m,v,d);case"projectionDefinition":return I2.interpolate(m,v,d)}case"interpolate-hcl":switch(this.type.kind){case"color":return ia.interpolate(m,v,d,"hcl");case"colorArray":return xp.interpolate(m,v,d,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return ia.interpolate(m,v,d,"lab");case"colorArray":return xp.interpolate(m,v,d,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function NO(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}const AAe={color:ia.interpolate,number:Cv,padding:Bg.interpolate,numberArray:Og.interpolate,colorArray:xp.interpolate,variableAnchorOffsetCollection:Uv.interpolate,array:a2};let eX=class j9{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=null;const r=t.expectedType;r&&r.kind!=="value"&&(i=r);const o=[];for(const a of e.slice(1)){const c=t.parse(a,1+o.length,i,void 0,{typeAnnotation:"omit"});if(!c)return null;i=i||c.type,o.push(c)}if(!i)throw new Error("No output type");return r&&o.some(a=>F4(r,a.type))?new j9(Qr,o):new j9(i,o)}evaluate(e){let t=null,i=0,r;for(const o of this.args)if(i++,t=o.evaluate(e),t&&t instanceof zC&&!t.available&&(r||(r=t.name),t=null,i===this.args.length&&(t=r)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};function gz(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function hAe(n,e,t){return e===t}function dAe(n,e,t){return e!==t}function fAe(n,e,t){return e<t}function pAe(n,e,t){return e>t}function mAe(n,e,t){return e<=t}function gAe(n,e,t){return e>=t}function tX(n,e,t,i){return i.compare(e,t)===0}function yAe(n,e,t,i){return!tX(n,e,t,i)}function vAe(n,e,t,i){return i.compare(e,t)<0}function bAe(n,e,t,i){return i.compare(e,t)>0}function CAe(n,e,t,i){return i.compare(e,t)<=0}function _Ae(n,e,t,i){return i.compare(e,t)>=0}function T2(n,e,t){const i=n!=="=="&&n!=="!=";return class nX{constructor(o,s,a){this.type=Xr,this.lhs=o,this.rhs=s,this.collator=a,this.hasUntypedArgument=o.type.kind==="value"||s.type.kind==="value"}static parse(o,s){if(o.length!==3&&o.length!==4)return s.error("Expected two or three arguments.");const a=o[0];let c=s.parse(o[1],1,Qr);if(!c)return null;if(!gz(a,c.type))return s.concat(1).error(`"${a}" comparisons are not supported for type '${sl(c.type)}'.`);let d=s.parse(o[2],2,Qr);if(!d)return null;if(!gz(a,d.type))return s.concat(2).error(`"${a}" comparisons are not supported for type '${sl(d.type)}'.`);if(c.type.kind!==d.type.kind&&c.type.kind!=="value"&&d.type.kind!=="value")return s.error(`Cannot compare types '${sl(c.type)}' and '${sl(d.type)}'.`);i&&(c.type.kind==="value"&&d.type.kind!=="value"?c=new E1(d.type,[c]):c.type.kind!=="value"&&d.type.kind==="value"&&(d=new E1(c.type,[d])));let m=null;if(o.length===4){if(c.type.kind!=="string"&&d.type.kind!=="string"&&c.type.kind!=="value"&&d.type.kind!=="value")return s.error("Cannot use collator to compare non-string types.");if(m=s.parse(o[3],3,S6),!m)return null}return new nX(c,d,m)}evaluate(o){const s=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(i&&this.hasUntypedArgument){const c=zu(s),d=zu(a);if(c.kind!==d.kind||!(c.kind==="string"||c.kind==="number"))throw new vl(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${c.kind}, ${d.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const c=zu(s),d=zu(a);if(c.kind!=="string"||d.kind!=="string")return e(o,s,a)}return this.collator?t(o,s,a,this.collator.evaluate(o)):e(o,s,a)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}}}const xAe=T2("==",hAe,tX),MAe=T2("!=",dAe,yAe),wAe=T2("<",fAe,vAe),SAe=T2(">",pAe,bAe),EAe=T2("<=",mAe,CAe),BAe=T2(">=",gAe,_Ae);let iX=class rX{constructor(e,t,i){this.type=S6,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");const r=t.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,Xr);if(!r)return null;const o=t.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,Xr);if(!o)return null;let s=null;return i.locale&&(s=t.parse(i.locale,1,ao),!s)?null:new rX(r,o,s)}evaluate(e){return new EP(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}},OAe=class oX{constructor(e,t,i,r,o){this.type=ao,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=o}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const i=t.parse(e[1],1,Xn);if(!i)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let o=null;if(r.locale&&(o=t.parse(r.locale,1,ao),!o))return null;let s=null;if(r.currency&&(s=t.parse(r.currency,1,ao),!s))return null;let a=null;if(r["min-fraction-digits"]&&(a=t.parse(r["min-fraction-digits"],1,Xn),!a))return null;let c=null;return r["max-fraction-digits"]&&(c=t.parse(r["max-fraction-digits"],1,Xn),!c)?null:new oX(i,o,s,a,c)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}},IAe=class sX{constructor(e){this.type=E6,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");const r=[];let o=!1;for(let s=1;s<=e.length-1;++s){const a=e[s];if(o&&typeof a=="object"&&!Array.isArray(a)){o=!1;let c=null;if(a["font-scale"]&&(c=t.parse(a["font-scale"],1,Xn),!c))return null;let d=null;if(a["text-font"]&&(d=t.parse(a["text-font"],1,mf(ao)),!d))return null;let m=null;if(a["text-color"]&&(m=t.parse(a["text-color"],1,fg),!m))return null;let v=null;if(a["vertical-align"]){if(typeof a["vertical-align"]=="string"&&!Xce.includes(a["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${a["vertical-align"]}' instead.`);if(v=t.parse(a["vertical-align"],1,ao),!v)return null}const M=r[r.length-1];M.scale=c,M.font=d,M.textColor=m,M.verticalAlign=v}else{const c=t.parse(e[s],1,Qr);if(!c)return null;const d=c.type.kind;if(d!=="string"&&d!=="value"&&d!=="null"&&d!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,r.push({content:c,scale:null,font:null,textColor:null,verticalAlign:null})}}return new sX(r)}evaluate(e){const t=i=>{const r=i.content.evaluate(e);return zu(r)===Z5?new U9("",r,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(e):null):new U9(d4(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null,i.verticalAlign?i.verticalAlign.evaluate(e):null)};return new O2(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}},TAe=class aX{constructor(e){this.type=Z5,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const i=t.parse(e[1],1,ao);return i?new aX(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=zC.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}},kAe=class lX{constructor(e){this.type=Xn,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${sl(i.type)} instead.`):new lX(i):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new vl(`Expected value to be of type string or array, but found ${sl(zu(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}};const pg=8192;function DAe(n,e){const t=RAe(n[0]),i=LAe(n[1]),r=Math.pow(2,e.z);return[Math.round(t*r*pg),Math.round(i*r*pg)]}function BP(n,e){const t=Math.pow(2,e.z),i=(n[0]/pg+e.x)/t,r=(n[1]/pg+e.y)/t;return[PAe(i),UAe(r)]}function RAe(n){return(180+n)/360}function PAe(n){return n*360-180}function LAe(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function UAe(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function X5(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function j4(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function KAe(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function FAe(n,e,t){const i=n[0]-e[0],r=n[1]-e[1],o=n[0]-t[0],s=n[1]-t[1];return i*s-o*r===0&&i*o<=0&&r*s<=0}function k6(n,e,t,i){const r=[e[0]-n[0],e[1]-n[1]],o=[i[0]-t[0],i[1]-t[1]];return GAe(o,r)===0?!1:!!(yz(n,e,t,i)&&yz(t,i,n,e))}function zAe(n,e,t){for(const i of t)for(let r=0;r<i.length-1;++r)if(k6(n,e,i[r],i[r+1]))return!0;return!1}function k2(n,e,t=!1){let i=!1;for(const r of e)for(let o=0;o<r.length-1;o++){if(FAe(n,r[o],r[o+1]))return t;KAe(n,r[o],r[o+1])&&(i=!i)}return i}function jAe(n,e){for(const t of e)if(k2(n,t))return!0;return!1}function uX(n,e){for(const t of n)if(!k2(t,e))return!1;for(let t=0;t<n.length-1;++t)if(zAe(n[t],n[t+1],e))return!1;return!0}function NAe(n,e){for(const t of e)if(uX(n,t))return!0;return!1}function GAe(n,e){return n[0]*e[1]-n[1]*e[0]}function yz(n,e,t,i){const r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1],c=i[0]-t[0],d=i[1]-t[1],m=r*d-c*o,v=s*d-c*a;return m>0&&v<0||m<0&&v>0}function OP(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=[];for(let s=0;s<n[r].length;s++){const a=DAe(n[r][s],t);X5(e,a),o.push(a)}i.push(o)}return i}function cX(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=OP(n[r],e,t);i.push(o)}return i}function AX(n,e,t,i){if(n[0]<t[0]||n[0]>t[2]){const r=i*.5;let o=n[0]-t[0]>r?-i:t[0]-n[0]>r?i:0;o===0&&(o=n[0]-t[2]>r?-i:t[2]-n[0]>r?i:0),n[0]+=o}X5(e,n)}function WAe(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function vz(n,e,t,i){const r=Math.pow(2,i.z)*pg,o=[i.x*pg,i.y*pg],s=[];for(const a of n)for(const c of a){const d=[c.x+o[0],c.y+o[1]];AX(d,e,t,r),s.push(d)}return s}function bz(n,e,t,i){const r=Math.pow(2,i.z)*pg,o=[i.x*pg,i.y*pg],s=[];for(const a of n){const c=[];for(const d of a){const m=[d.x+o[0],d.y+o[1]];X5(e,m),c.push(m)}s.push(c)}if(e[2]-e[0]<=r/2){WAe(e);for(const a of s)for(const c of a)AX(c,e,t,r)}return s}function QAe(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=OP(e.coordinates,i,r),s=vz(n.geometry(),t,i,r);if(!j4(t,i))return!1;for(const a of s)if(!k2(a,o))return!1}if(e.type==="MultiPolygon"){const o=cX(e.coordinates,i,r),s=vz(n.geometry(),t,i,r);if(!j4(t,i))return!1;for(const a of s)if(!jAe(a,o))return!1}return!0}function qAe(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=OP(e.coordinates,i,r),s=bz(n.geometry(),t,i,r);if(!j4(t,i))return!1;for(const a of s)if(!uX(a,o))return!1}if(e.type==="MultiPolygon"){const o=cX(e.coordinates,i,r),s=bz(n.geometry(),t,i,r);if(!j4(t,i))return!1;for(const a of s)if(!NAe(a,o))return!1}return!0}let IP=class AS{constructor(e,t){this.type=Xr,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(z4(e[1])){const i=e[1];if(i.type==="FeatureCollection"){const r=[];for(const o of i.features){const{type:s,coordinates:a}=o.geometry;s==="Polygon"&&r.push(a),s==="MultiPolygon"&&r.push(...a)}if(r.length){const o={type:"MultiPolygon",coordinates:r};return new AS(i,o)}}else if(i.type==="Feature"){const r=i.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new AS(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new AS(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return QAe(e,this.geometries);if(e.geometryType()==="LineString")return qAe(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}},hX=class{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const o=e-1>>1,s=t[o];if(i(r,s)>=0)break;t[e]=s,e=o}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,o=t[e];for(;e<r;){let s=(e<<1)+1;const a=s+1;if(a<this.length&&i(t[a],t[s])<0&&(s=a),i(t[s],o)>=0)break;t[e]=t[s],e=s}t[e]=o}};function YAe(n,e){if(n.length<=1)return[n];const i=[];let r,o;for(const s of n){const a=VAe(s);a!==0&&(s.area=Math.abs(a),o===void 0&&(o=a<0),o===a<0?(r&&i.push(r),r=[s]):r.push(s))}return r&&i.push(r),i}function VAe(n){let e=0;for(let t=0,i=n.length,r=i-1,o,s;t<i;r=t++)o=n[t],s=n[r],e+=(s.x-o.x)*(o.y+s.y);return e}const $Ae=6378.137,Cz=1/298.257223563,_z=Cz*(2-Cz),xz=Math.PI/180;let TP=class{constructor(e){const t=xz*$Ae*1e3,i=Math.cos(e*xz),r=1/(1-_z*(1-i*i)),o=Math.sqrt(r);this.kx=t*o*i,this.ky=t*o*r*(1-_z)}distance(e,t){const i=this.wrap(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.sqrt(i*i+r*r)}pointOnLine(e,t){let i=1/0,r,o,s,a;for(let c=0;c<e.length-1;c++){let d=e[c][0],m=e[c][1],v=this.wrap(e[c+1][0]-d)*this.kx,M=(e[c+1][1]-m)*this.ky,B=0;(v!==0||M!==0)&&(B=(this.wrap(t[0]-d)*this.kx*v+(t[1]-m)*this.ky*M)/(v*v+M*M),B>1?(d=e[c+1][0],m=e[c+1][1]):B>0&&(d+=v/this.kx*B,m+=M/this.ky*B)),v=this.wrap(t[0]-d)*this.kx,M=(t[1]-m)*this.ky;const P=v*v+M*M;P<i&&(i=P,r=d,o=m,s=c,a=B)}return{point:[r,o],index:s,t:Math.max(0,Math.min(1,a))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}};const N9=100,G9=50;function dX(n,e){return e[0]-n[0]}function HS(n){return n[1]-n[0]+1}function P1(n,e){return n[1]>=n[0]&&n[1]<e}function W9(n,e){if(n[0]>n[1])return[null,null];const t=HS(n);if(e){if(t===2)return[n,null];const r=Math.floor(t/2);return[[n[0],n[0]+r],[n[0]+r,n[1]]]}if(t===1)return[n,null];const i=Math.floor(t/2)-1;return[[n[0],n[0]+i],[n[0]+i+1,n[1]]]}function Q9(n,e){if(!P1(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let i=e[0];i<=e[1];++i)X5(t,n[i]);return t}function q9(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const i of t)X5(e,i);return e}function Mz(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function kP(n,e,t){if(!Mz(n)||!Mz(e))return NaN;let i=0,r=0;return n[2]<e[0]&&(i=e[0]-n[2]),n[0]>e[2]&&(i=n[0]-e[2]),n[1]>e[3]&&(r=n[1]-e[3]),n[3]<e[1]&&(r=e[1]-n[3]),t.distance([0,0],[i,r])}function nC(n,e,t){const i=t.pointOnLine(e,n);return t.distance(n,i.point)}function DP(n,e,t,i,r){const o=Math.min(nC(n,[t,i],r),nC(e,[t,i],r)),s=Math.min(nC(t,[n,e],r),nC(i,[n,e],r));return Math.min(o,s)}function HAe(n,e,t,i,r){if(!(P1(e,n.length)&&P1(i,t.length)))return 1/0;let s=1/0;for(let a=e[0];a<e[1];++a){const c=n[a],d=n[a+1];for(let m=i[0];m<i[1];++m){const v=t[m],M=t[m+1];if(k6(c,d,v,M))return 0;s=Math.min(s,DP(c,d,v,M,r))}}return s}function ZAe(n,e,t,i,r){if(!(P1(e,n.length)&&P1(i,t.length)))return NaN;let s=1/0;for(let a=e[0];a<=e[1];++a)for(let c=i[0];c<=i[1];++c)if(s=Math.min(s,r.distance(n[a],t[c])),s===0)return s;return s}function XAe(n,e,t){if(k2(n,e,!0))return 0;let i=1/0;for(const r of e){const o=r[0],s=r[r.length-1];if(o!==s&&(i=Math.min(i,nC(n,[s,o],t)),i===0))return i;const a=t.pointOnLine(r,n);if(i=Math.min(i,t.distance(n,a.point)),i===0)return i}return i}function JAe(n,e,t,i){if(!P1(e,n.length))return NaN;for(let o=e[0];o<=e[1];++o)if(k2(n[o],t,!0))return 0;let r=1/0;for(let o=e[0];o<e[1];++o){const s=n[o],a=n[o+1];for(const c of t)for(let d=0,m=c.length,v=m-1;d<m;v=d++){const M=c[v],B=c[d];if(k6(s,a,M,B))return 0;r=Math.min(r,DP(s,a,M,B,i))}}return r}function wz(n,e){for(const t of n)for(const i of t)if(k2(i,e,!0))return!0;return!1}function ehe(n,e,t,i=1/0){const r=q9(n),o=q9(e);if(i!==1/0&&kP(r,o,t)>=i)return i;if(j4(r,o)){if(wz(n,e))return 0}else if(wz(e,n))return 0;let s=1/0;for(const a of n)for(let c=0,d=a.length,m=d-1;c<d;m=c++){const v=a[m],M=a[c];for(const B of e)for(let P=0,U=B.length,z=U-1;P<U;z=P++){const V=B[z],Z=B[P];if(k6(v,M,V,Z))return 0;s=Math.min(s,DP(v,M,V,Z,t))}}return s}function Sz(n,e,t,i,r,o){if(!o)return;const s=kP(Q9(i,o),r,t);s<e&&n.push([s,o,[0,0]])}function $M(n,e,t,i,r,o,s){if(!o||!s)return;const a=kP(Q9(i,o),Q9(r,s),t);a<e&&n.push([a,o,s])}function ZS(n,e,t,i,r=1/0){let o=Math.min(i.distance(n[0],t[0][0]),r);if(o===0)return o;const s=new hX([[0,[0,n.length-1],[0,0]]],dX),a=q9(t);for(;s.length>0;){const c=s.pop();if(c[0]>=o)continue;const d=c[1],m=e?G9:N9;if(HS(d)<=m){if(!P1(d,n.length))return NaN;if(e){const v=JAe(n,d,t,i);if(isNaN(v)||v===0)return v;o=Math.min(o,v)}else for(let v=d[0];v<=d[1];++v){const M=XAe(n[v],t,i);if(o=Math.min(o,M),o===0)return 0}}else{const v=W9(d,e);Sz(s,o,i,n,a,v[0]),Sz(s,o,i,n,a,v[1])}}return o}function XS(n,e,t,i,r,o=1/0){let s=Math.min(o,r.distance(n[0],t[0]));if(s===0)return s;const a=new hX([[0,[0,n.length-1],[0,t.length-1]]],dX);for(;a.length>0;){const c=a.pop();if(c[0]>=s)continue;const d=c[1],m=c[2],v=e?G9:N9,M=i?G9:N9;if(HS(d)<=v&&HS(m)<=M){if(!P1(d,n.length)&&P1(m,t.length))return NaN;let B;if(e&&i)B=HAe(n,d,t,m,r),s=Math.min(s,B);else if(e&&!i){const P=n.slice(d[0],d[1]+1);for(let U=m[0];U<=m[1];++U)if(B=nC(t[U],P,r),s=Math.min(s,B),s===0)return s}else if(!e&&i){const P=t.slice(m[0],m[1]+1);for(let U=d[0];U<=d[1];++U)if(B=nC(n[U],P,r),s=Math.min(s,B),s===0)return s}else B=ZAe(n,d,t,m,r),s=Math.min(s,B)}else{const B=W9(d,e),P=W9(m,i);$M(a,s,r,n,t,B[0],P[0]),$M(a,s,r,n,t,B[0],P[1]),$M(a,s,r,n,t,B[1],P[0]),$M(a,s,r,n,t,B[1],P[1])}}return s}function the(n,e){const t=n.geometry(),i=t.flat().map(s=>BP([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new TP(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,XS(i,!1,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,XS(i,!1,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,ZS(i,!1,s.coordinates,r,o));break}if(o===0)return o}return o}function nhe(n,e){const t=n.geometry(),i=t.flat().map(s=>BP([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new TP(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,XS(i,!0,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,XS(i,!0,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,ZS(i,!0,s.coordinates,r,o));break}if(o===0)return o}return o}function ihe(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const i=YAe(t).map(s=>s.map(a=>a.map(c=>BP([c.x,c.y],n.canonical)))),r=new TP(i[0][0][0][1]);let o=1/0;for(const s of e)for(const a of i){switch(s.type){case"Point":o=Math.min(o,ZS([s.coordinates],!1,a,r,o));break;case"LineString":o=Math.min(o,ZS(s.coordinates,!0,a,r,o));break;case"Polygon":o=Math.min(o,ehe(a,s.coordinates,r,o));break}if(o===0)return o}return o}function GO(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}let RP=class hS{constructor(e,t){this.type=Xn,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(z4(e[1])){const i=e[1];if(i.type==="FeatureCollection")return new hS(i,i.features.map(r=>GO(r.geometry)).flat());if(i.type==="Feature")return new hS(i,GO(i.geometry));if("type"in i&&"coordinates"in i)return new hS(i,GO(i))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return the(e,this.geometries);if(e.geometryType()==="LineString")return nhe(e,this.geometries);if(e.geometryType()==="Polygon")return ihe(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}},PP=class fX{constructor(e){this.type=Qr,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=e[1];return i==null?t.error("Global state property must be defined."):typeof i!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new fX(i)}evaluate(e){var t;const i=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!i||Object.keys(i).length===0?null:h4(i,this.key)}eachChild(){}outputDefined(){return!1}};const LP={"==":xAe,"!=":MAe,">":SAe,"<":wAe,">=":BAe,"<=":EAe,array:E1,at:tAe,boolean:E1,case:oAe,coalesce:eX,collator:iX,format:IAe,image:TAe,in:nAe,"index-of":iAe,interpolate:I1,"interpolate-hcl":I1,"interpolate-lab":I1,length:kAe,let:WZ,literal:$S,match:rAe,number:E1,"number-format":OAe,object:E1,slice:sAe,step:XZ,string:E1,"to-boolean":Sx,"to-color":Sx,"to-number":Sx,"to-string":Sx,var:qZ,within:IP,distance:RP,"global-state":PP};let D2=class N3{constructor(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const i=e[0],r=N3.definitions[i];if(!r)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(r)?r[0]:r.type,s=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=s.filter(([d])=>!Array.isArray(d)||d.length===e.length-1);let c=null;for(const[d,m]of a){c=new NZ(t.registry,JS,t.path,null,t.scope);const v=[];let M=!1;for(let B=1;B<e.length;B++){const P=e[B],U=Array.isArray(d)?d[B-1]:d.type,z=c.parse(P,1+v.length,U);if(!z){M=!0;break}v.push(z)}if(!M){if(Array.isArray(d)&&d.length!==v.length){c.error(`Expected ${d.length} arguments, but found ${v.length} instead.`);continue}for(let B=0;B<v.length;B++){const P=Array.isArray(d)?d[B]:d.type,U=v[B];c.concat(B+1).checkSubtype(P,U.type)}if(c.errors.length===0)return new N3(i,o,m,v)}}if(a.length===1)t.errors.push(...c.errors);else{const m=(a.length?a:s).map(([M])=>ohe(M)).join(" | "),v=[];for(let M=1;M<e.length;M++){const B=t.parse(e[M],1+v.length);if(!B)return null;v.push(sl(B.type))}t.error(`Expected arguments of type ${m}, but found (${v.join(", ")}) instead.`)}return null}static register(e,t){N3.definitions=t;for(const i in t)e[i]=N3}};function Ez(n,[e,t,i,r]){e=e.evaluate(n),t=t.evaluate(n),i=i.evaluate(n);const o=r?r.evaluate(n):1,s=UZ(e,t,i,o);if(s)throw new vl(s);return new ia(e/255,t/255,i/255,o,!1)}function Bz(n,e){return n in e}function WO(n,e){const t=e[n];return typeof t>"u"?null:t}function rhe(n,e,t,i){for(;t<=i;){const r=t+i>>1;if(e[r]===n)return!0;e[r]>n?i=r-1:t=r+1}return!1}function zb(n){return{type:n}}D2.register(LP,{error:[zce,[ao],(n,[e])=>{throw new vl(e.evaluate(n))}],typeof:[ao,[Qr],(n,[e])=>sl(zu(e.evaluate(n)))],"to-rgba":[mf(Xn,4),[fg],(n,[e])=>{const[t,i,r,o]=e.evaluate(n).rgb;return[t*255,i*255,r*255,o]}],rgb:[fg,[Xn,Xn,Xn],Ez],rgba:[fg,[Xn,Xn,Xn,Xn],Ez],has:{type:Xr,overloads:[[[ao],(n,[e])=>Bz(e.evaluate(n),n.properties())],[[ao,dC],(n,[e,t])=>Bz(e.evaluate(n),t.evaluate(n))]]},get:{type:Qr,overloads:[[[ao],(n,[e])=>WO(e.evaluate(n),n.properties())],[[ao,dC],(n,[e,t])=>WO(e.evaluate(n),t.evaluate(n))]]},"feature-state":[Qr,[ao],(n,[e])=>WO(e.evaluate(n),n.featureState||{})],properties:[dC,[],n=>n.properties()],"geometry-type":[ao,[],n=>n.geometryType()],id:[Qr,[],n=>n.id()],zoom:[Xn,[],n=>n.globals.zoom],"heatmap-density":[Xn,[],n=>n.globals.heatmapDensity||0],elevation:[Xn,[],n=>n.globals.elevation||0],"line-progress":[Xn,[],n=>n.globals.lineProgress||0],accumulated:[Qr,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Xn,zb(Xn),(n,e)=>{let t=0;for(const i of e)t+=i.evaluate(n);return t}],"*":[Xn,zb(Xn),(n,e)=>{let t=1;for(const i of e)t*=i.evaluate(n);return t}],"-":{type:Xn,overloads:[[[Xn,Xn],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[Xn],(n,[e])=>-e.evaluate(n)]]},"/":[Xn,[Xn,Xn],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[Xn,[Xn,Xn],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[Xn,[],()=>Math.LN2],pi:[Xn,[],()=>Math.PI],e:[Xn,[],()=>Math.E],"^":[Xn,[Xn,Xn],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[Xn,[Xn],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Xn,[Xn],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Xn,[Xn],(n,[e])=>Math.log(e.evaluate(n))],log2:[Xn,[Xn],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Xn,[Xn],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Xn,[Xn],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Xn,[Xn],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Xn,[Xn],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Xn,[Xn],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Xn,[Xn],(n,[e])=>Math.atan(e.evaluate(n))],min:[Xn,zb(Xn),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[Xn,zb(Xn),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[Xn,[Xn],(n,[e])=>Math.abs(e.evaluate(n))],round:[Xn,[Xn],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[Xn,[Xn],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Xn,[Xn],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[Xr,[ao,Qr],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[Xr,[Qr],(n,[e])=>n.id()===e.value],"filter-type-==":[Xr,[ao],(n,[e])=>n.geometryType()===e.value],"filter-<":[Xr,[ao,Qr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<r}],"filter-id-<":[Xr,[Qr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<i}],"filter->":[Xr,[ao,Qr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>r}],"filter-id->":[Xr,[Qr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>i}],"filter-<=":[Xr,[ao,Qr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[Xr,[Qr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<=i}],"filter->=":[Xr,[ao,Qr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[Xr,[Qr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>=i}],"filter-has":[Xr,[Qr],(n,[e])=>e.value in n.properties()],"filter-has-id":[Xr,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[Xr,[mf(ao)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[Xr,[mf(Qr)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[Xr,[ao,mf(Qr)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[Xr,[ao,mf(Qr)],(n,[e,t])=>rhe(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:Xr,overloads:[[[Xr,Xr],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[zb(Xr),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:Xr,overloads:[[[Xr,Xr],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[zb(Xr),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[Xr,[Xr],(n,[e])=>!e.evaluate(n)],"is-supported-script":[Xr,[ao],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[ao,[ao],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[ao,[ao],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[ao,zb(Qr),(n,e)=>e.map(t=>d4(t.evaluate(n))).join("")],"resolved-locale":[ao,[S6],(n,[e])=>e.evaluate(n).resolvedLocale()]});function ohe(n){return Array.isArray(n)?`(${n.map(sl).join(", ")})`:`(${sl(n.type)}...)`}function JS(n){if(n instanceof qZ)return JS(n.boundExpression);if(n instanceof D2&&n.name==="error")return!1;if(n instanceof iX)return!1;if(n instanceof IP)return!1;if(n instanceof RP)return!1;if(n instanceof PP)return!1;const e=n instanceof Sx||n instanceof E1;let t=!0;return n.eachChild(i=>{e?t=t&&JS(i):t=t&&i instanceof $S}),t?D6(n)&&R6(n,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function D6(n){if(n instanceof D2){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof IP||n instanceof RP)return!1;let e=!0;return n.eachChild(t=>{e&&!D6(t)&&(e=!1)}),e}function N4(n){if(n instanceof D2&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!N4(t)&&(e=!1)}),e}function R6(n,e){if(n instanceof D2&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(i=>{t&&!R6(i,e)&&(t=!1)}),t}function Y9(n){return{result:"success",value:n}}function px(n){return{result:"error",value:n}}function eE(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function pX(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function UP(n){return!!n.expression&&n.expression.interpolated}function uo(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function J5(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&zu(n)===dC}function she(n){return n}function ahe(n){switch(n.type){case"color":return ia.parse;case"padding":return Bg.parse;case"numberArray":return Og.parse;case"colorArray":return xp.parse;default:return null}}function lhe(n){switch(n){case"exponential":return mX;case"interval":return che;case"categorical":return uhe;case"identity":return Ahe;default:throw new Error(`Unknown function type "${n}"`)}}function KP(n,e){const t=n.stops&&typeof n.stops[0][0]=="object",i=t||n.property!==void 0,r=t||!i,o=n.type||(UP(e)?"exponential":"interval"),s=ahe(e);if(s&&(n=s2({},n),n.stops&&(n.stops=n.stops.map(m=>[m[0],s(m[1])])),n.default?n.default=s(n.default):n.default=s(e.default)),n.colorSpace&&!Zce(n.colorSpace))throw new Error(`Unknown color space: "${n.colorSpace}"`);const a=lhe(o);let c,d;if(o==="categorical"){c=Object.create(null);for(const m of n.stops)c[m[0]]=m[1];d=typeof n.stops[0][0]}if(t){const m={},v=[];for(let P=0;P<n.stops.length;P++){const U=n.stops[P],z=U[0].zoom;m[z]===void 0&&(m[z]={zoom:z,type:n.type,property:n.property,default:n.default,stops:[]},v.push(z)),m[z].stops.push([U[0].value,U[1]])}const M=[];for(const P of v)M.push([m[P].zoom,KP(m[P],e)]);const B={name:"linear"};return{kind:"composite",interpolationType:B,interpolationFactor:I1.interpolationFactor.bind(void 0,B),zoomStops:M.map(P=>P[0]),evaluate({zoom:P},U){return mX({stops:M,base:n.base},e,P).evaluate(P,U)}}}else if(r){const m=o==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:m,interpolationFactor:I1.interpolationFactor.bind(void 0,m),zoomStops:n.stops.map(v=>v[0]),evaluate:({zoom:v})=>a(n,e,v,c,d)}}else return{kind:"source",evaluate(m,v){const M=v&&v.properties?v.properties[n.property]:void 0;return M===void 0?eM(n.default,e.default):a(n,e,M,c,d)}}}function eM(n,e,t){if(n!==void 0)return n;if(e!==void 0)return e;if(t!==void 0)return t}function uhe(n,e,t,i,r){const o=typeof t===r?i[t]:void 0;return eM(o,n.default,e.default)}function che(n,e,t){if(uo(t)!=="number")return eM(n.default,e.default);const i=n.stops.length;if(i===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[i-1][0])return n.stops[i-1][1];const r=T6(n.stops.map(o=>o[0]),t);return n.stops[r][1]}function mX(n,e,t){const i=n.base!==void 0?n.base:1;if(uo(t)!=="number")return eM(n.default,e.default);const r=n.stops.length;if(r===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[r-1][0])return n.stops[r-1][1];const o=T6(n.stops.map(m=>m[0]),t),s=hhe(t,i,n.stops[o][0],n.stops[o+1][0]),a=n.stops[o][1],c=n.stops[o+1][1],d=AAe[e.type]||she;return typeof a.evaluate=="function"?{evaluate(...m){const v=a.evaluate.apply(void 0,m),M=c.evaluate.apply(void 0,m);if(!(v===void 0||M===void 0))return d(v,M,s,n.colorSpace)}}:d(a,c,s,n.colorSpace)}function Ahe(n,e,t){switch(e.type){case"color":t=ia.parse(t);break;case"formatted":t=O2.fromString(t.toString());break;case"resolvedImage":t=zC.fromString(t.toString());break;case"padding":t=Bg.parse(t);break;case"colorArray":t=xp.parse(t);break;case"numberArray":t=Og.parse(t);break;default:uo(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0)}return eM(t,n.default,e.default)}function hhe(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}let gX=class{constructor(e,t,i){this.expression=e,this._warningHistory={},this._evaluator=new jZ,this._defaultValue=t?mhe(t):null,this._enumValues=t&&t.type==="enum"?t.values:null,this._globalState=i}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=l2(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,r,o,s){this._globalState&&(e=l2(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{const a=this.expression.evaluate(this._evaluator);if(a==null||typeof a=="number"&&a!==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new vl(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,typeof console<"u"&&console.warn(a.message)),this._defaultValue}}};function tM(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in LP}function FP(n,e,t){const i=new NZ(LP,JS,[],e?phe(e):void 0),r=i.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?Y9(new gX(r,e,t)):px(i.errors)}let V9=class{constructor(e,t,i){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!N4(t.expression),this.globalStateRefs=jP(t.expression),this._globalState=i}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=l2(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._globalState&&(e=l2(e,this._globalState)),this._styleExpression.evaluate(e,t,i,r,o,s)}},$9=class{constructor(e,t,i,r,o){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!N4(t.expression),this.globalStateRefs=jP(t.expression),this.interpolationType=r,this._globalState=o}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=l2(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._globalState&&(e=l2(e,this._globalState)),this._styleExpression.evaluate(e,t,i,r,o,s)}interpolationFactor(e,t,i){return this.interpolationType?I1.interpolationFactor(this.interpolationType,e,t,i):0}};function dhe(n){return n._styleExpression!==void 0}function zP(n,e,t){const i=FP(n,e,t);if(i.result==="error")return i;const r=i.value.expression,o=D6(r);if(!o&&!eE(e))return px([new eg("","data expressions not supported")]);const s=R6(r,["zoom"]);if(!s&&!pX(e))return px([new eg("","zoom expressions not supported")]);const a=dS(r);if(!a&&!s)return px([new eg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(a instanceof eg)return px([a]);if(a instanceof I1&&!UP(e))return px([new eg("",'"interpolate" expressions cannot be used with this property')]);if(!a)return Y9(o?new V9("constant",i.value,t):new V9("source",i.value,t));const c=a instanceof I1?a.interpolation:void 0;return Y9(o?new $9("camera",i.value,a.labels,c,t):new $9("composite",i.value,a.labels,c,t))}class P6{constructor(e,t){this._parameters=e,this._specification=t,s2(this,KP(this._parameters,this._specification))}static deserialize(e){return new P6(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function fhe(n,e,t){if(J5(n))return new P6(n,e);if(tM(n)){const i=zP(n,e,t);if(i.result==="error")throw new Error(i.value.map(r=>`${r.key}: ${r.message}`).join(", "));return i.value}else{let i=n;return e.type==="color"&&typeof n=="string"?i=ia.parse(n):e.type==="padding"&&(typeof n=="number"||Array.isArray(n))?i=Bg.parse(n):e.type==="numberArray"&&(typeof n=="number"||Array.isArray(n))?i=Og.parse(n):e.type==="colorArray"&&(typeof n=="string"||Array.isArray(n))?i=xp.parse(n):e.type==="variableAnchorOffsetCollection"&&Array.isArray(n)?i=Uv.parse(n):e.type==="projectionDefinition"&&typeof n=="string"&&(i=I2.parse(n)),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>i}}}function dS(n){let e=null;if(n instanceof WZ)e=dS(n.result);else if(n instanceof eX){for(const t of n.args)if(e=dS(t),e)break}else(n instanceof XZ||n instanceof I1)&&n.input instanceof D2&&n.input.name==="zoom"&&(e=n);return e instanceof eg||n.eachChild(t=>{const i=dS(t);i instanceof eg?e=i:!e&&i?e=new eg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new eg("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function jP(n,e=new Set){return n instanceof PP&&e.add(n.key),n.eachChild(t=>{jP(t,e)}),e}function phe(n){const e={color:fg,string:ao,number:Xn,enum:ao,boolean:Xr,formatted:E6,padding:B6,numberArray:O6,colorArray:K4,projectionDefinition:w6,resolvedImage:Z5,variableAnchorOffsetCollection:I6};return n.type==="array"?mf(e[n.value]||Qr,n.length):e[n.type]}function mhe(n){if(n.type==="color"&&J5(n.default))return new ia(0,0,0,0);switch(n.type){case"color":return ia.parse(n.default)||null;case"padding":return Bg.parse(n.default)||null;case"numberArray":return Og.parse(n.default)||null;case"colorArray":return xp.parse(n.default)||null;case"variableAnchorOffsetCollection":return Uv.parse(n.default)||null;case"projectionDefinition":return I2.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function l2(n,e){const{zoom:t,heatmapDensity:i,elevation:r,lineProgress:o,isSupportedScript:s,accumulated:a}=n??{};return{zoom:t,heatmapDensity:i,elevation:r,lineProgress:o,isSupportedScript:s,accumulated:a,globalState:e}}function L6(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!L6(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function f4(n,e={}){if(L6(n))return n;if(!n)return!0;const t=n,i=t[0];if(n.length<=1)return i!=="any";switch(i){case"==":case"!=":case"<":case">":case"<=":case">=":{const[,r,o]=n;return yhe(r,o,i,e)}case"any":{const[,...r]=t;return["any",...r.map(s=>{const a={},c=f4(s,a),d=ghe(a);return d===!0?c:["case",d,c,!1]})]}case"all":{const[,...r]=t,o=r.map(s=>f4(s,e));return o.length>1?["all",...o]:o[0]}case"none":{const[,...r]=t;return["!",f4(["any",...r],{})]}case"in":{const[,r,...o]=t;return Oz(r,o)}case"!in":{const[,r,...o]=t;return Oz(r,o,!0)}case"has":return Iz(t[1]);case"!has":return["!",Iz(t[1])];default:return!0}}function ghe(n){const e=[];for(const t in n){const i=t==="$id"?["id"]:["get",t];e.push(["==",["typeof",i],n[t]])}return e.length===0?!0:e.length===1?e[0]:["all",...e]}function yhe(n,e,t,i){let r;if(n==="$type")return[t,["geometry-type"],e];if(n==="$id"?r=["id"]:r=["get",n],i&&e!==null){const o=typeof e;i[n]=o}return t==="=="&&n!=="$id"&&e===null?["all",["has",n],["==",r,null]]:t==="!="&&n!=="$id"&&e===null?["any",["!",["has",n]],["!=",r,null]]:[t,r,e]}function Oz(n,e,t=!1){if(e.length===0)return t;let i;n==="$type"?i=["geometry-type"]:n==="$id"?i=["id"]:i=["get",n];let r=!0;const o=typeof e[0];for(const s of e)if(typeof s!==o){r=!1;break}if(r&&(o==="string"||o==="number")){const s=e.sort().filter((a,c)=>c===0||e[c-1]!==a);return["match",i,s,!t,t]}return t?["all",...e.map(s=>["!=",i,s])]:["any",...e.map(s=>["==",i,s])]}function Iz(n){return n==="$type"?!0:n==="$id"?["!=",["id"],null]:["has",n]}function G4(n){return typeof n=="object"?["literal",n]:n}function yX(n,e){let t=n.stops;if(!t)return vhe(n,e);const i=t&&typeof t[0][0]=="object",r=i||n.property!==void 0,o=i||!r;return t=t.map(s=>!r&&e.tokens&&typeof s[1]=="string"?[s[0],vX(s[1])]:[s[0],G4(s[1])]),i?bhe(n,e,t):o?_he(n,e,t):H9(n,e,t)}function vhe(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const i=[e.type==="color"?"to-color":e.type,t,G4(n.default)];return e.type==="array"&&i.splice(1,0,e.value,e.length||null),i}}function NP(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function bhe(n,e,t){const i={},r={},o=[];for(let a=0;a<t.length;a++){const c=t[a],d=c[0].zoom;i[d]===void 0&&(i[d]={zoom:d,type:n.type,property:n.property,default:n.default},r[d]=[],o.push(d)),r[d].push([c[0].value,c[1]])}if(WP({},e)==="exponential"){const a=[NP(n),["linear"],["zoom"]];for(const c of o){const d=H9(i[c],e,r[c]);Ux(a,c,d,!1)}return a}else{const a=["step",["zoom"]];for(const c of o){const d=H9(i[c],e,r[c]);Ux(a,c,d,!0)}return GP(a),a}}function Che(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function Tz(n,e){const t=G4(Che(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function H9(n,e,t){const i=WP(n,e),r=["get",n.property];if(i==="categorical"&&typeof t[0][0]=="boolean"){const o=["case"];for(const s of t)o.push(["==",r,s[0]],s[1]);return o.push(Tz(n,e)),o}else if(i==="categorical"){const o=["match",r];for(const s of t)Ux(o,s[0],s[1],!1);return o.push(Tz(n,e)),o}else if(i==="interval"){const o=["step",["number",r]];for(const s of t)Ux(o,s[0],s[1],!0);return GP(o),n.default===void 0?o:["case",["==",["typeof",r],"number"],o,G4(n.default)]}else if(i==="exponential"){const o=n.base!==void 0?n.base:1,s=[NP(n),o===1?["linear"]:["exponential",o],["number",r]];for(const a of t)Ux(s,a[0],a[1],!1);return n.default===void 0?s:["case",["==",["typeof",r],"number"],s,G4(n.default)]}else throw new Error(`Unknown property function type ${i}`)}function _he(n,e,t,i=["zoom"]){const r=WP(n,e);let o,s=!1;if(r==="interval")o=["step",i],s=!0;else if(r==="exponential"){const a=n.base!==void 0?n.base:1;o=[NP(n),a===1?["linear"]:["exponential",a],i]}else throw new Error(`Unknown zoom function type "${r}"`);for(const a of t)Ux(o,a[0],a[1],s);return GP(o),o}function GP(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function Ux(n,e,t,i){n.length>3&&e===n[n.length-2]||(i&&n.length===2||n.push(e),n.push(t))}function WP(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function vX(n){const e=["concat"],t=/{([^{}]+)}/g;let i=0;for(let r=t.exec(n);r!==null;r=t.exec(n)){const o=n.slice(i,t.lastIndex-r[0].length);i=t.lastIndex,o.length>0&&e.push(o),e.push(["get",r[1]])}if(e.length===1)return n;if(i<n.length)e.push(n.slice(i));else if(e.length===2)return["to-string",e[1]];return e}function xhe(n){for(let e=0;e<$o.layout.length;e++)for(const t in $o[$o.layout[e]])if(t===n)return $o[$o.layout[e]][t];for(let e=0;e<$o.paint.length;e++)for(const t in $o[$o.paint[e]])if(t===n)return $o[$o.paint[e]][t];return null}function Mhe(n,e){for(const t in n.sources)e(n.sources[t])}function p4(n,e){for(const t of n.layers)e(t)}function QP(n,e,t){function i(r,o){const s=r[o];s&&Object.keys(s).forEach(a=>{t({path:[r.id,o,a],key:a,value:s[a],reference:xhe(a),set(c){s[a]=c}})})}p4(n,r=>{e.paint&&i(r,"paint"),e.layout&&i(r,"layout")})}function bX(n){const e=n.key,t=n.value;return t?[new jn(e,t,"constants have been deprecated as of v8")]:[]}function Ql(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function EC(n){if(Array.isArray(n))return n.map(EC);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=EC(n[t]);return e}return Ql(n)}function mp(n){const e=n.key,t=n.value,i=n.valueSpec||{},r=n.objectElementValidators||{},o=n.style,s=n.styleSpec,a=n.validateSpec;let c=[];const d=uo(t);if(d!=="object")return[new jn(e,t,`object expected, ${d} found`)];for(const m in t){const v=m.split(".")[0],M=h4(i,v)||i["*"];let B;if(h4(r,v))B=r[v];else if(h4(i,v))B=a;else if(r["*"])B=r["*"];else if(i["*"])B=a;else{c.push(new jn(e,t[m],`unknown property "${m}"`));continue}c=c.concat(B({key:(e&&`${e}.`)+m,value:t[m],valueSpec:M,style:o,styleSpec:s,object:t,objectKey:m,validateSpec:a},t))}for(const m in i)r[m]||i[m].required&&i[m].default===void 0&&t[m]===void 0&&c.push(new jn(e,t,`missing required property "${m}"`));return c}function qP(n){const e=n.value,t=n.valueSpec,i=n.validateSpec,r=n.style,o=n.styleSpec,s=n.key,a=n.arrayElementValidator||i;if(uo(e)!=="array")return[new jn(s,e,`array expected, ${uo(e)} found`)];if(t.length&&e.length!==t.length)return[new jn(s,e,`array length ${t.length} expected, length ${e.length} found`)];if(t["min-length"]&&e.length<t["min-length"])return[new jn(s,e,`array length at least ${t["min-length"]} expected, length ${e.length} found`)];let c={type:t.value,values:t.values};o.$version<7&&(c.function=t.function),uo(t.value)==="object"&&(c=t.value);let d=[];for(let m=0;m<e.length;m++)d=d.concat(a({array:e,arrayIndex:m,value:e[m],valueSpec:c,validateSpec:n.validateSpec,style:r,styleSpec:o,key:`${s}[${m}]`}));return d}function U6(n){const e=n.key,t=n.value,i=n.valueSpec;let r=uo(t);return r==="number"&&t!==t&&(r="NaN"),r!=="number"?[new jn(e,t,`number expected, ${r} found`)]:"minimum"in i&&t<i.minimum?[new jn(e,t,`${t} is less than the minimum value ${i.minimum}`)]:"maximum"in i&&t>i.maximum?[new jn(e,t,`${t} is greater than the maximum value ${i.maximum}`)]:[]}function CX(n){const e=n.valueSpec,t=Ql(n.value.type);let i,r={},o,s;const a=t!=="categorical"&&n.value.property===void 0,c=!a,d=uo(n.value.stops)==="array"&&uo(n.value.stops[0])==="array"&&uo(n.value.stops[0][0])==="object",m=mp({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:v,default:P}});return t==="identity"&&a&&m.push(new jn(n.key,n.value,'missing required property "property"')),t!=="identity"&&!n.value.stops&&m.push(new jn(n.key,n.value,'missing required property "stops"')),t==="exponential"&&n.valueSpec.expression&&!UP(n.valueSpec)&&m.push(new jn(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(c&&!eE(n.valueSpec)?m.push(new jn(n.key,n.value,"property functions not supported")):a&&!pX(n.valueSpec)&&m.push(new jn(n.key,n.value,"zoom functions not supported"))),(t==="categorical"||d)&&n.value.property===void 0&&m.push(new jn(n.key,n.value,'"property" property is required')),m;function v(U){if(t==="identity")return[new jn(U.key,U.value,'identity function may not have a "stops" property')];let z=[];const V=U.value;return z=z.concat(qP({key:U.key,value:V,valueSpec:U.valueSpec,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:M})),uo(V)==="array"&&V.length===0&&z.push(new jn(U.key,V,"array must have at least one stop")),z}function M(U){let z=[];const V=U.value,Z=U.key;if(uo(V)!=="array")return[new jn(Z,V,`array expected, ${uo(V)} found`)];if(V.length!==2)return[new jn(Z,V,`array length 2 expected, length ${V.length} found`)];if(d){if(uo(V[0])!=="object")return[new jn(Z,V,`object expected, ${uo(V[0])} found`)];if(V[0].zoom===void 0)return[new jn(Z,V,"object stop key must have zoom")];if(V[0].value===void 0)return[new jn(Z,V,"object stop key must have value")];if(s&&s>Ql(V[0].zoom))return[new jn(Z,V[0].zoom,"stop zoom values must appear in ascending order")];Ql(V[0].zoom)!==s&&(s=Ql(V[0].zoom),o=void 0,r={}),z=z.concat(mp({key:`${Z}[0]`,value:V[0],valueSpec:{zoom:{}},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:U6,value:B}}))}else z=z.concat(B({key:`${Z}[0]`,value:V[0],validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec},V));return tM(EC(V[1]))?z.concat([new jn(`${Z}[1]`,V[1],"expressions are not allowed in function stops.")]):z.concat(U.validateSpec({key:`${Z}[1]`,value:V[1],valueSpec:e,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec}))}function B(U,z){const V=uo(U.value),Z=Ql(U.value),X=U.value!==null?U.value:z;if(!i)i=V;else if(V!==i)return[new jn(U.key,X,`${V} stop domain type must match previous stop domain type ${i}`)];if(V!=="number"&&V!=="string"&&V!=="boolean")return[new jn(U.key,X,"stop domain value must be a number, string, or boolean")];if(V!=="number"&&t!=="categorical"){let re=`number expected, ${V} found`;return eE(e)&&t===void 0&&(re+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new jn(U.key,X,re)]}return t==="categorical"&&V==="number"&&(!isFinite(Z)||Math.floor(Z)!==Z)?[new jn(U.key,X,`integer expected, found ${Z}`)]:t!=="categorical"&&V==="number"&&o!==void 0&&Z<o?[new jn(U.key,X,"stop domain values must appear in ascending order")]:(o=Z,t==="categorical"&&Z in r?[new jn(U.key,X,"stop domain values must be unique")]:(r[Z]=!0,[]))}function P(U){return U.validateSpec({key:U.key,value:U.value,valueSpec:e,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec})}}function u2(n){const e=(n.expressionContext==="property"?zP:FP)(EC(n.value),n.valueSpec);if(e.result==="error")return e.value.map(i=>new jn(`${n.key}${i.key}`,n.value,i.message));const t=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!t.outputDefined())return[new jn(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!N4(t))return[new jn(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!N4(t))return[new jn(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!R6(t,["zoom","feature-state"]))return[new jn(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!D6(t))return[new jn(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function whe(n){const e=n.value,t=n.key,i=uo(e);return i!=="boolean"?[new jn(t,e,`boolean expected, ${i} found`)]:[]}function Z9(n){const e=n.key,t=n.value,i=uo(t);return i!=="string"?[new jn(e,t,`color expected, ${i} found`)]:ia.parse(String(t))?[]:[new jn(e,t,`color expected, "${t}" found`)]}function W4(n){const e=n.key,t=n.value,i=n.valueSpec,r=[];return Array.isArray(i.values)?i.values.indexOf(Ql(t))===-1&&r.push(new jn(e,t,`expected one of [${i.values.join(", ")}], ${JSON.stringify(t)} found`)):Object.keys(i.values).indexOf(Ql(t))===-1&&r.push(new jn(e,t,`expected one of [${Object.keys(i.values).join(", ")}], ${JSON.stringify(t)} found`)),r}function YP(n){return L6(EC(n.value))?u2(s2({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):_X(n)}function _X(n){const e=n.value,t=n.key;if(uo(e)!=="array")return[new jn(t,e,`array expected, ${uo(e)} found`)];const i=n.styleSpec;let r,o=[];if(e.length<1)return[new jn(t,e,"filter array must have at least 1 element")];switch(o=o.concat(W4({key:`${t}[0]`,value:e[0],valueSpec:i.filter_operator,style:n.style,styleSpec:n.styleSpec})),Ql(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Ql(e[1])==="$type"&&o.push(new jn(t,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&o.push(new jn(t,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(r=uo(e[1]),r!=="string"&&o.push(new jn(`${t}[1]`,e[1],`string expected, ${r} found`)));for(let s=2;s<e.length;s++)r=uo(e[s]),Ql(e[1])==="$type"?o=o.concat(W4({key:`${t}[${s}]`,value:e[s],valueSpec:i.geometry_type,style:n.style,styleSpec:n.styleSpec})):r!=="string"&&r!=="number"&&r!=="boolean"&&o.push(new jn(`${t}[${s}]`,e[s],`string, number, or boolean expected, ${r} found`));break;case"any":case"all":case"none":for(let s=1;s<e.length;s++)o=o.concat(_X({key:`${t}[${s}]`,value:e[s],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":r=uo(e[1]),e.length!==2?o.push(new jn(t,e,`filter array for "${e[0]}" operator must have 2 elements`)):r!=="string"&&o.push(new jn(`${t}[1]`,e[1],`string expected, ${r} found`));break}return o}function xX(n,e){const t=n.key,i=n.validateSpec,r=n.style,o=n.styleSpec,s=n.value,a=n.objectKey,c=o[`${e}_${n.layerType}`];if(!c)return[];const d=a.match(/^(.*)-transition$/);if(e==="paint"&&d&&c[d[1]]&&c[d[1]].transition)return i({key:t,value:s,valueSpec:o.transition,style:r,styleSpec:o});const m=n.valueSpec||c[a];if(!m)return[new jn(t,s,`unknown property "${a}"`)];let v;if(uo(s)==="string"&&eE(m)&&!m.tokens&&(v=/^{([^}]+)}$/.exec(s)))return[new jn(t,s,`"${a}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(v[1])} }\`.`)];const M=[];return n.layerType==="symbol"&&a==="text-font"&&J5(EC(s))&&Ql(s.type)==="identity"&&M.push(new jn(t,s,'"text-font" does not support identity functions')),M.concat(i({key:n.key,value:s,valueSpec:m,style:r,styleSpec:o,expressionContext:"property",propertyType:e,propertyKey:a}))}function MX(n){return xX(n,"paint")}function wX(n){return xX(n,"layout")}function SX(n){let e=[];const t=n.value,i=n.key,r=n.style,o=n.styleSpec;if(uo(t)!=="object")return[new jn(i,t,`object expected, ${uo(t)} found`)];!t.type&&!t.ref&&e.push(new jn(i,t,'either "type" or "ref" is required'));let s=Ql(t.type);const a=Ql(t.ref);if(t.id){const c=Ql(t.id);for(let d=0;d<n.arrayIndex;d++){const m=r.layers[d];Ql(m.id)===c&&e.push(new jn(i,t.id,`duplicate layer id "${t.id}", previously used at line ${m.id.__line__}`))}}if("ref"in t){["type","source","source-layer","filter","layout"].forEach(d=>{d in t&&e.push(new jn(i,t[d],`"${d}" is prohibited for ref layers`))});let c;r.layers.forEach(d=>{Ql(d.id)===a&&(c=d)}),c?c.ref?e.push(new jn(i,t.ref,"ref cannot reference another ref layer")):s=Ql(c.type):e.push(new jn(i,t.ref,`ref layer "${a}" not found`))}else if(s!=="background")if(!t.source)e.push(new jn(i,t,'missing required property "source"'));else{const c=r.sources&&r.sources[t.source],d=c&&Ql(c.type);c?d==="vector"&&s==="raster"?e.push(new jn(i,t.source,`layer "${t.id}" requires a raster source`)):d!=="raster-dem"&&s==="hillshade"?e.push(new jn(i,t.source,`layer "${t.id}" requires a raster-dem source`)):d!=="raster-dem"&&s==="color-relief"?e.push(new jn(i,t.source,`layer "${t.id}" requires a raster-dem source`)):d==="raster"&&s!=="raster"?e.push(new jn(i,t.source,`layer "${t.id}" requires a vector source`)):d==="vector"&&!t["source-layer"]?e.push(new jn(i,t,`layer "${t.id}" must specify a "source-layer"`)):d==="raster-dem"&&s!=="hillshade"&&s!=="color-relief"?e.push(new jn(i,t.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):s==="line"&&t.paint&&t.paint["line-gradient"]&&(d!=="geojson"||!c.lineMetrics)&&e.push(new jn(i,t,`layer "${t.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new jn(i,t.source,`source "${t.source}" not found`))}return e=e.concat(mp({key:i,value:t,valueSpec:o.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*"(){return[]},type(){return n.validateSpec({key:`${i}.type`,value:t.type,valueSpec:o.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:t,objectKey:"type"})},filter:YP,layout(c){return mp({layer:t,key:c.key,value:c.value,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*"(d){return wX(s2({layerType:s},d))}}})},paint(c){return mp({layer:t,key:c.key,value:c.value,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*"(d){return MX(s2({layerType:s},d))}}})}}})),e}function BC(n){const e=n.value,t=n.key,i=uo(e);return i!=="string"?[new jn(t,e,`string expected, ${i} found`)]:[]}function She(n){var e;const t=(e=n.sourceName)!==null&&e!==void 0?e:"",i=n.value,r=n.styleSpec,o=r.source_raster_dem,s=n.style;let a=[];const c=uo(i);if(i===void 0)return a;if(c!=="object")return a.push(new jn("source_raster_dem",i,`object expected, ${c} found`)),a;const m=Ql(i.encoding)==="custom",v=["redFactor","greenFactor","blueFactor","baseShift"],M=n.value.encoding?`"${n.value.encoding}"`:"Default";for(const B in i)!m&&v.includes(B)?a.push(new jn(B,i[B],`In "${t}": "${B}" is only valid when "encoding" is set to "custom". ${M} encoding found`)):o[B]?a=a.concat(n.validateSpec({key:B,value:i[B],valueSpec:o[B],validateSpec:n.validateSpec,style:s,styleSpec:r})):a.push(new jn(B,i[B],`unknown property "${B}"`));return a}const kz={promoteId:Ehe};function EX(n){const e=n.value,t=n.key,i=n.styleSpec,r=n.style,o=n.validateSpec;if(!e.type)return[new jn(t,e,'"type" is required')];const s=Ql(e.type);let a;switch(s){case"vector":case"raster":return a=mp({key:t,value:e,valueSpec:i[`source_${s.replace("-","_")}`],style:n.style,styleSpec:i,objectElementValidators:kz,validateSpec:o}),a;case"raster-dem":return a=She({sourceName:t,value:e,style:n.style,styleSpec:i,validateSpec:o}),a;case"geojson":if(a=mp({key:t,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i,validateSpec:o,objectElementValidators:kz}),e.cluster)for(const c in e.clusterProperties){const[d,m]=e.clusterProperties[c],v=typeof d=="string"?[d,["accumulated"],["get",c]]:d;a.push(...u2({key:`${t}.${c}.map`,value:m,expressionContext:"cluster-map"})),a.push(...u2({key:`${t}.${c}.reduce`,value:v,expressionContext:"cluster-reduce"}))}return a;case"video":return mp({key:t,value:e,valueSpec:i.source_video,style:r,validateSpec:o,styleSpec:i});case"image":return mp({key:t,value:e,valueSpec:i.source_image,style:r,validateSpec:o,styleSpec:i});case"canvas":return[new jn(t,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return W4({key:`${t}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Ehe({key:n,value:e}){if(uo(e)==="string")return BC({key:n,value:e});{const t=[];for(const i in e)t.push(...BC({key:`${n}.${i}`,value:e[i]}));return t}}function BX(n){const e=n.value,t=n.styleSpec,i=t.light,r=n.style;let o=[];const s=uo(e);if(e===void 0)return o;if(s!=="object")return o=o.concat([new jn("light",e,`object expected, ${s} found`)]),o;for(const a in e){const c=a.match(/^(.*)-transition$/);c&&i[c[1]]&&i[c[1]].transition?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:t.transition,validateSpec:n.validateSpec,style:r,styleSpec:t})):i[a]?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],validateSpec:n.validateSpec,style:r,styleSpec:t})):o=o.concat([new jn(a,e[a],`unknown property "${a}"`)])}return o}function OX(n){const e=n.value,t=n.styleSpec,i=t.sky,r=n.style,o=uo(e);if(e===void 0)return[];if(o!=="object")return[new jn("sky",e,`object expected, ${o} found`)];let s=[];for(const a in e)i[a]?s=s.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],style:r,styleSpec:t})):s=s.concat([new jn(a,e[a],`unknown property "${a}"`)]);return s}function IX(n){const e=n.value,t=n.styleSpec,i=t.terrain,r=n.style;let o=[];const s=uo(e);if(e===void 0)return o;if(s!=="object")return o=o.concat([new jn("terrain",e,`object expected, ${s} found`)]),o;for(const a in e)i[a]?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],validateSpec:n.validateSpec,style:r,styleSpec:t})):o=o.concat([new jn(a,e[a],`unknown property "${a}"`)]);return o}function Bhe(n){return BC(n).length===0?[]:u2(n)}function Ohe(n){return BC(n).length===0?[]:u2(n)}function Ihe(n){const e=n.key,t=n.value;if(uo(t)==="array"){if(t.length<1||t.length>4)return[new jn(e,t,`padding requires 1 to 4 values; ${t.length} values found`)];const r={type:"number"};let o=[];for(let s=0;s<t.length;s++)o=o.concat(n.validateSpec({key:`${e}[${s}]`,value:t[s],validateSpec:n.validateSpec,valueSpec:r}));return o}else return U6({key:e,value:t,valueSpec:{}})}function The(n){const e=n.key,t=n.value;if(uo(t)==="array"){const r={type:"number"};if(t.length<1)return[new jn(e,t,"array length at least 1 expected, length 0 found")];let o=[];for(let s=0;s<t.length;s++)o=o.concat(n.validateSpec({key:`${e}[${s}]`,value:t[s],validateSpec:n.validateSpec,valueSpec:r}));return o}else return U6({key:e,value:t,valueSpec:{}})}function khe(n){const e=n.key,t=n.value;if(uo(t)==="array"){if(t.length<1)return[new jn(e,t,"array length at least 1 expected, length 0 found")];let r=[];for(let o=0;o<t.length;o++)r=r.concat(Z9({key:`${e}[${o}]`,value:t[o]}));return r}else return Z9({key:e,value:t})}function Dhe(n){const e=n.key,t=n.value,i=uo(t),r=n.styleSpec;if(i!=="array"||t.length<1||t.length%2!==0)return[new jn(e,t,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let s=0;s<t.length;s+=2)o=o.concat(W4({key:`${e}[${s}]`,value:t[s],valueSpec:r.layout_symbol["text-anchor"]})),o=o.concat(qP({key:`${e}[${s+1}]`,value:t[s+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:r}));return o}function TX(n){let e=[];const t=n.value,i=n.key;if(Array.isArray(t)){const r=[],o=[];for(const s in t){t[s].id&&r.includes(t[s].id)&&e.push(new jn(i,t,`all the sprites' ids must be unique, but ${t[s].id} is duplicated`)),r.push(t[s].id),t[s].url&&o.includes(t[s].url)&&e.push(new jn(i,t,`all the sprites' URLs must be unique, but ${t[s].url} is duplicated`)),o.push(t[s].url);const a={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(mp({key:`${i}[${s}]`,value:t[s],valueSpec:a,validateSpec:n.validateSpec}))}return e}else return BC({key:i,value:t})}function Rhe(n){const e=n.value,t=n.styleSpec,i=t.projection,r=n.style,o=uo(e);if(e===void 0)return[];if(o!=="object")return[new jn("projection",e,`object expected, ${o} found`)];let s=[];for(const a in e)i[a]?s=s.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],style:r,styleSpec:t})):s=s.concat([new jn(a,e[a],`unknown property "${a}"`)]);return s}function Phe(n){const e=n.key;let t=n.value;t=t instanceof String?t.valueOf():t;const i=uo(t);return i==="array"&&!Uhe(t)&&!Lhe(t)?[new jn(e,t,`projection expected, invalid array ${JSON.stringify(t)} found`)]:["array","string"].includes(i)?[]:[new jn(e,t,`projection expected, invalid type "${i}" found`)]}function Lhe(n){return!!["interpolate","step","literal"].includes(n[0])}function Uhe(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"}function Khe(n){return!!n&&n.constructor===Object}function kX(n){return Khe(n.value)?[]:[new jn(n.key,n.value,`object expected, ${uo(n.value)} found`)]}const Dz={"*"(){return[]},array:qP,boolean:whe,number:U6,color:Z9,constants:bX,enum:W4,filter:YP,function:CX,layer:SX,object:mp,source:EX,light:BX,sky:OX,terrain:IX,projection:Rhe,projectionDefinition:Phe,string:BC,formatted:Bhe,resolvedImage:Ohe,padding:Ihe,numberArray:The,colorArray:khe,variableAnchorOffsetCollection:Dhe,sprite:TX,state:kX};function tE(n){const e=n.value,t=n.valueSpec,i=n.styleSpec;return n.validateSpec=tE,t.expression&&J5(Ql(e))?CX(n):t.expression&&tM(EC(e))?u2(n):t.type&&Dz[t.type]?Dz[t.type](n):mp(s2({},n,{valueSpec:t.type?i[t.type]:t}))}function DX(n){const e=n.value,t=n.key,i=BC(n);return i.length||(e.indexOf("{fontstack}")===-1&&i.push(new jn(t,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&i.push(new jn(t,e,'"glyphs" url must include a "{range}" token'))),i}function kd(n,e=$o){let t=[];return t=t.concat(tE({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,validateSpec:tE,objectElementValidators:{glyphs:DX,"*"(){return[]}}})),n.constants&&(t=t.concat(bX({key:"constants",value:n.constants}))),RX(t)}kd.source=jm(zm(EX));kd.sprite=jm(zm(TX));kd.glyphs=jm(zm(DX));kd.light=jm(zm(BX));kd.sky=jm(zm(OX));kd.terrain=jm(zm(IX));kd.state=jm(zm(kX));kd.layer=jm(zm(SX));kd.filter=jm(zm(YP));kd.paintProperty=jm(zm(MX));kd.layoutProperty=jm(zm(wX));function zm(n){return function(e){return n(Object.assign({},e,{validateSpec:tE}))}}function RX(n){return[].concat(n).sort((e,t)=>e.line-t.line)}function jm(n){return function(...e){return RX(n.apply(this,e))}}const Fhe=/("(?:[^\\"]|\\.)*")|[:,]/g;function zhe(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),i=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:r}=e;return(function o(s,a,c){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const d=JSON.stringify(s,r);if(d===void 0)return d;const m=i-a.length-c;if(d.length<=m){const v=d.replace(Fhe,(M,B)=>B||`${M} `);if(v.length<=m)return v}if(r!=null&&(s=JSON.parse(d),r=void 0),typeof s=="object"&&s!==null){const v=a+t,M=[];let B=0,P,U;if(Array.isArray(s)){P="[",U="]";const{length:z}=s;for(;B<z;B++)M.push(o(s[B],v,B===z-1?0:1)||"null")}else{P="{",U="}";const z=Object.keys(s),{length:V}=z;for(;B<V;B++){const Z=z[B],X=`${JSON.stringify(Z)}: `,re=o(s[Z],v,X.length+(B===V-1?0:1));re!==void 0&&M.push(X+re)}}if(M.length>0)return[P,t+M.join(`,
${v}`),U].join(`
${a}`)}return d})(n,"",0)}function Rz(n,e){const t={};for(const i in e)n[i]!==void 0&&(t[i]=n[i]);for(const i in n)t[i]===void 0&&(t[i]=n[i]);return t}function jhe(n,e=2){return n=Rz(n,$o.$root),n.layers&&(n.layers=n.layers.map(t=>Rz(t,$o.layer))),zhe(n,{indent:e})}function QO(n,e){for(const t in n)t.indexOf("layout")===0&&e(n[t],t)}function Pz(n,e){for(const t in n)t.indexOf("paint")===0&&e(n[t],t)}function X9(n,e){return typeof e=="string"&&e[0]==="@"?X9(n,n.constants[e]):e}function Nhe(n){return Array.isArray(n.stops)}function m3(n,e,t){n[t]=n[e],delete n[e]}function Ghe(n){n.version=8,Mhe(n,r=>{r.type==="video"&&r.url!==void 0&&m3(r,"url","urls"),r.type==="video"&&r.coordinates.forEach(o=>o.reverse())}),p4(n,r=>{QO(r,o=>{o["symbol-min-distance"]!==void 0&&m3(o,"symbol-min-distance","symbol-spacing")}),Pz(r,o=>{o["background-image"]!==void 0&&m3(o,"background-image","background-pattern"),o["line-image"]!==void 0&&m3(o,"line-image","line-pattern"),o["fill-image"]!==void 0&&m3(o,"fill-image","fill-pattern")})}),QP(n,{paint:!0,layout:!0},r=>{const o=X9(n,r.value);Nhe(o)&&o.stops.forEach(s=>{s[1]=X9(n,s[1])}),r.set(o)}),delete n.constants,p4(n,r=>{QO(r,o=>{delete o["text-max-size"],delete o["icon-max-size"]}),Pz(r,o=>{o["text-size"]&&(r.layout||(r.layout={}),r.layout["text-size"]=o["text-size"],delete o["text-size"]),o["icon-size"]&&(r.layout||(r.layout={}),r.layout["icon-size"]=o["icon-size"],delete o["icon-size"])})});function e(r){function o(s){return s.split(",").map(a=>a.trim())}if(Array.isArray(r))return r;if(typeof r=="string")return o(r);if(typeof r=="object")return r.stops.forEach(s=>{s[1]=o(s[1])}),r;throw new Error("unexpected font value")}p4(n,r=>{QO(r,o=>{o["text-font"]&&(o["text-font"]=e(o["text-font"]))})});let t=0;for(let r=n.layers.length-1;r>=0;r--)if(n.layers[r].type!=="symbol"){t=r+1;break}const i=n.layers.splice(t);return i.reverse(),n.layers=n.layers.concat(i),n}function Whe(n){const e=[];return p4(n,t=>{t.filter&&(t.filter=f4(t.filter))}),QP(n,{paint:!0,layout:!0},({path:t,key:i,value:r,reference:o,set:s})=>{tM(r)||i.endsWith("-transition")||o===null||(typeof r=="object"&&!Array.isArray(r)?(s(yX(r,o)),e.push(t.join("."))):o.tokens&&typeof r=="string"&&s(vX(r)))}),n}function Qhe(n){return JSON.parse(qhe(JSON.stringify(n)))}function qhe(n){return n.replace(/"hsla?\((.+?)\)"/gi,(e,t)=>{const i=t.match(/^(.+?)\s*,\s*(.+?)\s*,\s*(.+?)(?:\s*,\s*(.+))?$/i);if(i){let[r,o,s,a]=i.slice(1);return[o,s]=[o,s].map(c=>c.endsWith("%")?c:`${parseFloat(c)*100}%`),`"hsl${typeof a=="string"?"a":""}(${[r,o,s,a].filter(Boolean).join(",")})"`}return e})}function Yhe(n){let e=!1;if(n.version===7&&(n=Ghe(n),e=!0),n.version===8&&(e=!!Whe(n),e=!0),QP(n,{paint:!0,layout:!0},({value:t,reference:i,set:r})=>{i?.type==="color"&&r(Qhe(t))}),!e)throw new Error(`Cannot migrate from ${n.version}`);return n}const pp=$o,Vhe={StyleExpression:gX,StylePropertyFunction:P6,ZoomConstantExpression:V9,ZoomDependentExpression:$9,createExpression:FP,createPropertyExpression:zP,isExpression:tM,isExpressionFilter:L6,isZoomExpression:dhe,normalizePropertyExpression:fhe},$he={convertFunction:yX,createFunction:KP,isFunction:J5},Hhe=8,Zhe=JSON.parse('{"version":{"required":true,"type":"enum","values":[8],"doc":"Style specification version number. Must be 8.","example":8},"name":{"type":"string","doc":"A human-readable name for the style.","example":"Bright"},"metadata":{"type":"*","doc":"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like \'maplibre:\'.","example":{"styleeditor:slimmode":true,"styleeditor:comment":"Style generated 1677776383","styleeditor:version":"3.14.159265","example:object":{"String":"one","Number":2,"Boolean":false}}},"center":{"type":"array","value":"number","doc":"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":[-73.9749,40.7736]},"centerAltitude":{"type":"number","doc":"Default map center altitude in meters above sea level. The style center altitude defines the altitude where the camera is looking at and will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":123.4,"sdk-support":{"basic functionality":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/2980","ios":"https://github.com/maplibre/maplibre-native/issues/2980"}}},"zoom":{"type":"number","doc":"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":12.5},"bearing":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Default bearing, in degrees. The bearing is the compass direction that is \\"up\\"; for example, a bearing of 90 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":29},"pitch":{"type":"number","default":0,"units":"degrees","doc":"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":50,"sdk-support":{"0-60 degrees":{"js":"0.8.0","android":"1.0.0","ios":"1.0.0"},"0-85 degrees":{"js":"2.0.0","android":"https://github.com/maplibre/maplibre-native/issues/1909","ios":"https://github.com/maplibre/maplibre-native/issues/1909"},"0-180 degrees":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/1909","ios":"https://github.com/maplibre/maplibre-native/issues/1909"}}},"roll":{"type":"number","default":0,"units":"degrees","doc":"Default roll, in degrees. The roll angle is measured counterclockwise about the camera boresight. The style roll will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":45,"sdk-support":{"basic functionality":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/2941","ios":"https://github.com/maplibre/maplibre-native/issues/2941"}}},"state":{"type":"state","default":{},"doc":"An object used to define default values when using the [`global-state`](https://maplibre.org/maplibre-style-spec/expressions/#global-state) expression.","example":{"chargerType":{"default":["CCS","CHAdeMO","Type2"]},"minPreferredChargingSpeed":{"default":50}},"sdk-support":{"basic functionality":{"js":"5.6.0","android":"https://github.com/maplibre/maplibre-native/issues/3302","ios":"https://github.com/maplibre/maplibre-native/issues/3302"}}},"light":{"type":"light","doc":"The global light source.","example":{"anchor":"viewport","color":"white","intensity":0.4}},"sky":{"type":"sky","doc":"The map\'s sky configuration. **Note:** this definition is still experimental and is under development in maplibre-gl-js.","example":{"sky-color":"#199EF3","sky-horizon-blend":0.5,"horizon-color":"#ffffff","horizon-fog-blend":0.5,"fog-color":"#0000ff","fog-ground-blend":0.5,"atmosphere-blend":["interpolate",["linear"],["zoom"],0,1,10,1,12,0]}},"projection":{"type":"projection","doc":"The projection configuration","example":{"type":["interpolate",["linear"],["zoom"],10,"vertical-perspective",12,"mercator"]}},"terrain":{"type":"terrain","doc":"The terrain configuration.","example":{"source":"raster-dem-source","exaggeration":0.5}},"sources":{"required":true,"type":"sources","doc":"Sources state which data the map should display. Specify the type of source with the `type` property. Adding a source isn\'t enough to make data appear on the map because sources don\'t contain styling details like color or width. Layers refer to a source and give it a visual representation. This makes it possible to style the same source in different ways, like differentiating between types of roads in a highways layer.\\n\\nTiled sources (vector and raster) must specify their details according to the [TileJSON specification](https://github.com/mapbox/tilejson-spec).","example":{"maplibre-demotiles":{"type":"vector","url":"https://demotiles.maplibre.org/tiles/tiles.json"},"maplibre-tilejson":{"type":"vector","url":"http://api.example.com/tilejson.json"},"maplibre-streets":{"type":"vector","tiles":["http://a.example.com/tiles/{z}/{x}/{y}.pbf","http://b.example.com/tiles/{z}/{x}/{y}.pbf"],"maxzoom":14},"wms-imagery":{"type":"raster","tiles":["http://a.example.com/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&width=256&height=256&layers=example"],"tileSize":256}}},"sprite":{"type":"sprite","doc":"An array of `{id: \'my-sprite\', url: \'https://example.com/sprite\'}` objects. Each object should represent a unique URL to load a sprite from and and a unique ID to use as a prefix when referencing images from that sprite (i.e. \'my-sprite:image\'). All the URLs are internally extended to load both .json and .png files. If the `id` field is equal to \'default\', the prefix is omitted (just \'image\' instead of \'default:image\'). All the IDs and URLs must be unique. For backwards compatibility, instead of an array, one can also provide a single string that represent a URL to load the sprite from. The images in this case won\'t be prefixed.","example":"https://demotiles.maplibre.org/styles/osm-bright-gl-style/sprite"},"glyphs":{"type":"string","doc":"A URL template for loading signed-distance-field glyph sets in PBF format.\\n\\nIf this property is set, any text in the `text-field` layout property is displayed in the font stack named by the `text-font` layout property based on glyphs located at the URL specified by this property. Otherwise, font faces will be determined by the `text-font` property based on the local environment.\\n\\nThe URL must include:\\n\\n - `{fontstack}` - When requesting glyphs, this token is replaced with a comma separated list of fonts from a font stack specified in the `text-font` property of a symbol layer. \\n\\n - `{range}` - When requesting glyphs, this token is replaced with a range of 256 Unicode code points. For example, to load glyphs for the Unicode Basic Latin and Basic Latin-1 Supplement blocks, the range would be 0-255. The actual ranges that are loaded are determined at runtime based on what text needs to be displayed.\\n\\nThe URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).","example":"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf","sdk-support":{"basic functionality":{"js":"0.0.16","android":"0.1.1","ios":"0.1.0"},"omit to use local fonts":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/3302","android":"https://github.com/maplibre/maplibre-native/issues/165","ios":"https://github.com/maplibre/maplibre-native/issues/165"}}},"font-faces":{"type":"array","value":"fontFaces","doc":"The `font-faces` property can be used to specify what font files to use for rendering text. Font faces contain information needed to render complex texts such as [Devanagari](https://en.wikipedia.org/wiki/Devanagari), [Khmer](https://en.wikipedia.org/wiki/Khmer_script) among many others.<h2>Unicode range</h2>The optional `unicode-range` property can be used to only use a particular font file for characters within the specified unicode range(s). Its value should be an array of strings, each indicating a start and end of a unicode range, similar to the [CSS descriptor with the same name](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/unicode-range). This allows specifying multiple non-consecutive unicode ranges. When not specified, the default value is `U+0-10FFFF`, meaning the font file will be used for all unicode characters.\\n\\nRefer to the [Unicode Character Code Charts](https://www.unicode.org/charts/) to see ranges for scripts supported by Unicode. To see what unicode code-points are available in a font, use a tool like [FontDrop](https://fontdrop.info/).\\n\\n<h2>Font Resolution</h2>For every name in a symbol layers [`text-font`](./layers.md/#text-font) array, characters are matched if they are covered one of the by the font files in the corresponding entry of the `font-faces` map. Any still-unmatched characters then fall back to the [`glyphs`](./glyphs.md) URL if provided.\\n\\n<h2>Supported Fonts</h2>What type of fonts are supported is implementation-defined. Unsupported fonts are ignored.","example":{"Noto Sans Regular":[{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansKhmer/hinted/ttf/NotoSansKhmer-Regular.ttf","unicode-range":["U+1780-17FF"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansDevanagari/hinted/ttf/NotoSansDevanagari-Regular.ttf","unicode-range":["U+0900-097F"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansMyanmar/hinted/ttf/NotoSansMyanmar-Regular.ttf","unicode-range":["U+1000-109F"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansEthiopic/hinted/ttf/NotoSansEthiopic-Regular.ttf","unicode-range":["U+1200-137F"]}],"Unifont":"https://ftp.gnu.org/gnu/unifont/unifont-15.0.01/unifont-15.0.01.ttf"},"sdk-support":{"basic functionality":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/50","android":"11.13.0","ios":"6.18.0"}}},"transition":{"type":"transition","doc":"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style\'s `transition` property.","example":{"duration":300,"delay":0}},"layers":{"required":true,"type":"array","value":"layer","doc":"A style\'s `layers` property lists all the layers available in that style. The type of layer is specified by the `type` property, and must be one of `background`, `fill`, `line`, `symbol`, `raster`, `circle`, `fill-extrusion`, `heatmap`, `hillshade`, `color-relief`.\\n\\nExcept for layers of the `background` type, each layer needs to refer to a source. Layers take the data that they get from a source, optionally filter features, and then define how those features are styled.","example":[{"id":"coastline","source":"maplibre","source-layer":"countries","type":"line","paint":{"line-color":"#198EC8"}}]}}'),Xhe={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},Jhe=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],ede={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},encoding:{type:"enum",values:{mvt:{doc:"Mapbox Vector Tiles. See http://github.com/mapbox/vector-tile-spec for more info."},mlt:{doc:"MapLibre Vector Tiles. See https://github.com/maplibre/maplibre-tile-spec for more info."}},default:"mvt",doc:"The encoding used by this source. Mapbox Vector Tiles encoding is used by default.","sdk-support":{mvt:{android:"supported",ios:"supported",js:"supported"},mlt:{android:"https://github.com/maplibre/maplibre-native/issues/3721",ios:"https://github.com/maplibre/maplibre-native/issues/3721",js:"https://github.com/maplibre/maplibre-gl-js/issues/6258"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},tde={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},nde={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."},custom:{doc:"Decodes tiles using the redFactor, blueFactor, greenFactor, baseShift parameters."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default.","sdk-support":{"mapbox, terrarium":{js:"0.43.0",ios:"6.0.0",android:"6.0.0"},custom:{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},redFactor:{type:"number",default:1,doc:"Value that will be multiplied by the red channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},blueFactor:{type:"number",default:1,doc:"Value that will be multiplied by the blue channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},greenFactor:{type:"number",default:1,doc:"Value that will be multiplied by the green channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2358",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},baseShift:{type:"number",default:0,doc:"Value that will be added to the encoding mix when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},ide={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{required:!0,type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n\n * `cluster` Is `true` if the point is a cluster \n\n * `cluster_id` A unique id for the cluster to be used in conjunction with the [cluster inspection methods](https://maplibre.org/maplibre-gl-js/docs/API/classes/GeoJSONSource/#getclusterexpansionzoom)\n\n * `point_count` Number of original points grouped into this cluster\n\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`)  it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},rde={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},ode={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},sde={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},"additional methods":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}}},"color-relief":{doc:"Client-side elevation coloring based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"source:comment":"Hydrology FCCODE 460 - Narrow wash"}},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},ade=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],lde={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},ude={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},cde={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Ade={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},hde={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},dde=JSON.parse('{"symbol-placement":{"type":"enum","values":{"point":{"doc":"The label is placed at the point where the geometry is located."},"line":{"doc":"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{"doc":"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},"default":"point","doc":"Label placement relative to its geometry.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`line-center` value":{"js":"0.47.0","android":"6.4.0","ios":"4.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","doc":"Distance between two symbol anchors.","requires":[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"doc":"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don\'t have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like MapLibre GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","doc":"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"},"data-driven styling":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{"doc":"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"source":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},"default":"auto","doc":"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{"js":"0.49.0","android":"6.6.0","ios":"4.5.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the icon will be visible even if it collides with other previously drawn symbols.","requires":["icon-image",{"!":"icon-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-overlap":{"type":"enum","values":{"never":{"doc":"The icon will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The icon will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the icon collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new icon is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new icon is visible."}},"doc":"Allows for control over whether to show an icon when it overlaps other symbols on the map. If `icon-overlap` is not set, `icon-allow-overlap` is used instead.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the icon.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"doc":"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},"viewport":{"doc":"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of icons.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","doc":"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{"doc":"The icon is displayed at its intrinsic aspect ratio."},"width":{"doc":"The icon is scaled in the x-dimension to fit the width of the text."},"height":{"doc":"The icon is scaled in the y-dimension to fit the height of the text."},"both":{"doc":"The icon is scaled in both x- and y-dimensions."}},"default":"none","doc":"Scales the icon to fit around the associated text.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"stretchable icons":{"js":"1.6.0","android":"9.2.0","ios":"5.8.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","doc":"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","doc":"Name of image in sprite to use for drawing an image background.","tokens":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the icon clockwise.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.21.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"padding","default":[2],"units":"pixels","doc":"Size of additional area round the icon bounding box used for detecting symbol collisions.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"2.2.0","android":"https://github.com/maplibre/maplibre-native/issues/2754","ios":"https://github.com/maplibre/maplibre-native/issues/2754"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{"type":"boolean","default":false,"doc":"If true, the icon may be flipped to prevent it from being rendered upside-down.","requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"doc":"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{"doc":"The center of the icon is placed closest to the anchor."},"left":{"doc":"The left side of the icon is placed closest to the anchor."},"right":{"doc":"The right side of the icon is placed closest to the anchor."},"top":{"doc":"The top of the icon is placed closest to the anchor."},"bottom":{"doc":"The bottom of the icon is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the icon is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the icon is placed closest to the anchor."}},"default":"center","doc":"Part of the icon placed closest to the anchor.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The icon is aligned to the plane of the map."},"viewport":{"doc":"The icon is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `icon-rotation-alignment`."}},"default":"auto","doc":"Orientation of icon when map is pitched.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The text is aligned to the plane of the map."},"viewport":{"doc":"The text is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `text-rotation-alignment`."}},"default":"auto","doc":"Orientation of text when map is pitched.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},"viewport":{"doc":"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"viewport-glyph":{"doc":"When `symbol-placement` is set to `point`, aligns text to the x-axis of the viewport. When `symbol-placement` is set to `line` or `line-center`, aligns glyphs to the x-axis of the viewport and places them along the line."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"},"`viewport-glyph` value":{"js":"2.1.8","android":"https://github.com/maplibre/maplibre-native/issues/250","ios":"https://github.com/maplibre/maplibre-native/issues/250"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"doc":"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"doc":"Fonts to use for displaying text. If the `glyphs` root property is specified, this array is joined together and interpreted as a font stack name. Otherwise, it is interpreted as a cascading fallback list of local font names.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"},"local fonts":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/3302","android":"https://github.com/maplibre/maplibre-native/issues/165","ios":"https://github.com/maplibre/maplibre-native/issues/165"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","doc":"Font size.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","doc":"The maximum line width for text wrapping.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","doc":"Text leading value for multi-line text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","doc":"Text tracking amount.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{"doc":"The text is aligned towards the anchor position."},"left":{"doc":"The text is aligned to the left."},"center":{"doc":"The text is centered."},"right":{"doc":"The text is aligned to the right."}},"default":"center","doc":"Text justification options.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"},"auto":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"doc":"Radial offset of text, in the direction of the symbol\'s anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"},"data-driven styling":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{"type":"variableAnchorOffsetCollection","requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations, each paired with an offset value. The renderer will attempt to place the label at each location, in order, before moving on to the next location+offset. Use `text-justify: auto` to choose justification based on anchor position. \\n\\n The length of the array must be even, and must alternate between enum and point entries. i.e., each anchor location must be accompanied by a point, and that point defines the offset when the corresponding anchor location is used. Positive offset values indicate right and down, while negative values indicate left and up. Anchor locations may repeat, allowing the renderer to try multiple offsets to try and place a label using the same anchor. \\n\\n When present, this property takes precedence over `text-anchor`, `text-variable-anchor`, `text-offset`, and `text-radial-offset`. \\n\\n ```json \\n\\n { \\"text-variable-anchor-offset\\": [\\"top\\", [0, 4], \\"left\\", [3,0], \\"bottom\\", [1, 1]] } \\n\\n ``` \\n\\n When the renderer chooses the `top` anchor, `[0, 4]` will be used for `text-offset`; the text will be shifted down by 4 ems. \\n\\n When the renderer chooses the `left` anchor, `[3, 0]` will be used for `text-offset`; the text will be shifted right by 3 ems.","sdk-support":{"basic functionality":{"js":"3.3.0","ios":"6.8.0","android":"11.6.0"},"data-driven styling":{"js":"3.3.0","ios":"https://github.com/maplibre/maplibre-native/issues/2358","android":"https://github.com/maplibre/maplibre-native/issues/2358"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{"type":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"default":"center","doc":"Part of the text placed closest to the anchor.","requires":["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","doc":"Maximum angle change between adjacent characters.","requires":["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{"doc":"If a text\'s language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},"vertical":{"doc":"If a text\'s language supports vertical writing mode, symbols with point placement would be laid out vertically."}},"doc":"The property allows control over a symbol\'s orientation. Note that the property values act as a hint, so that a symbol whose language doesnt support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single \'vertical\' enum value. The order of elements in an array define priority order for the placement of an orientation variant.","requires":["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{"js":"1.3.0","android":"8.3.0","ios":"5.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the text clockwise.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","doc":"Size of the additional area around the text bounding box used for detecting symbol collisions.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"doc":"If true, the text may be flipped vertically to prevent it from being rendered upside-down.","requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{"doc":"The text is not altered."},"uppercase":{"doc":"Forces all letters to be displayed in uppercase."},"lowercase":{"doc":"Forces all letters to be displayed in lowercase."}},"default":"none","doc":"Specifies how to capitalize text, similar to the CSS `text-transform` property.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","doc":"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the text will be visible even if it collides with other previously drawn symbols.","requires":["text-field",{"!":"text-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-overlap":{"type":"enum","values":{"never":{"doc":"The text will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The text will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the text collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new text is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new text is visible."}},"doc":"Allows for control over whether to show symbol text when it overlaps other symbols on the map. If `text-overlap` is not set, `text-allow-overlap` is used instead","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"doc":"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.","requires":["text-field","icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"property-type":"constant"}}'),fde={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},pde={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},mde={type:"array",value:"*",doc:"A filter selects specific features from a layer."},gde={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key]  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key]  value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key]  value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key]  {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key]  {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0  ...  fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0  ...  fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `f0  ...  fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'}},doc:"The filter operator."},yde={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},vde={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},bde={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},Cde=JSON.parse('{"doc":"","type":"enum","values":{"let":{"doc":"Binds expressions to named variables, which can then be referenced in the result expression using `[\\"var\\", \\"variable_name\\"]`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["var_1_name","var_1_value","...","var_n_name","var_n_value","expression"],"output-type":"any"}],"parameters":[{"name":"var_i_name","type":"string literal","description":"The name of the i-th variable."},{"name":"var_i_value","type":"any","description":"The value of the i-th variable."},{"name":"expression","type":"any","description":"The expression within which the named variables can be referenced."}]},"example":["let","someNumber",500,["interpolate",["linear"],["var","someNumber"],274,"#edf8e9",1551,"#006d2c"]],"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"var":{"doc":"References variable bound using `let`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["var_name"],"output-type":"any"}],"parameters":[{"name":"var_name","type":"string literal","description":"The name of the variable bound using `let`."}]},"example":["var","density"],"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"literal":{"doc":"Provides a literal array or object value.\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","syntax":{"overloads":[{"parameters":["json_object"],"output-type":"object"},{"parameters":["json_array"],"output-type":"array"}],"parameters":[{"name":"json_object","type":"JSON object"},{"name":"json_array","type":"JSON array"}]},"example":["literal",["DIN Offc Pro Italic","Arial Unicode MS Regular"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"array":{"doc":"Asserts that the input is an array (optionally with a specific item type and length). If, when the input expression is evaluated, it is not of the asserted type or length, then this assertion will cause the whole expression to be aborted.","syntax":{"overloads":[{"parameters":["value"],"output-type":"array"},{"parameters":["type","value"],"output-type":"array<type>"},{"parameters":["type","length","value"],"output-type":"array<type, length>"}],"parameters":[{"name":"value","type":"any"},{"name":"type","type":"\\"string\\" | \\"number\\" | \\"boolean\\"","description":"The asserted type of the input array."},{"name":"length","type":"number literal","description":"The asserted length of the input array."}]},"example":["array","string",3,["literal",["a","b","c"]]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"at":{"doc":"Retrieves an item from an array.","syntax":{"overloads":[{"parameters":["index","array"],"output-type":"T"}],"parameters":[{"name":"index","type":"number","description":"The index into `array`."},{"name":"array","type":"array<T>","description":"The array of items to retrieve the specified item from."}]},"example":["at",1,["literal",["a","b","c"]]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"in":{"doc":"Determines whether an item exists in an array or a substring exists in a string.\\n\\n - [Measure distances](https://maplibre.org/maplibre-gl-js/docs/examples/measure-distances/)","syntax":{"overloads":[{"parameters":["item","array"],"output-type":"boolean"},{"parameters":["substring","string"],"output-type":"boolean"}],"parameters":[{"name":"item","type":"T","description":"The needle to search for within `array`."},{"name":"array","type":"array<T>","description":"The haystack through which to search for `item`."},{"name":"substring","type":"string","description":"The needle to search for within `string`."},{"name":"string","type":"string","description":"The haystack through which to search for `substring`."}]},"example":["in","$type","Point"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.6.0","android":"9.1.0","ios":"5.8.0"}}},"index-of":{"doc":"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["item","array","from_index?"],"output-type":"number"},{"parameters":["substring","string","from_index?"],"output-type":"number"}],"parameters":[{"name":"item","type":"T","description":"The needle to search for within `array`."},{"name":"array","type":"array<T>","description":"The haystack through which to search for `item`."},{"name":"substring","type":"string","description":"The needle to search for within `string`."},{"name":"string","type":"string","description":"The haystack through which to search for `substring`."},{"name":"from_index","type":"number","description":"The index from where to begin the search."}]},"example":["index-of","foo",["baz","bar","hello","foo","world"]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"slice":{"doc":"Returns a subarray from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["array","start_index","end_index?"],"output-type":"array<T>"},{"parameters":["string","start_index","end_index?"],"output-type":"string"}],"parameters":[{"name":"array","type":"array<T>","description":"The original array from which to extract the subarray."},{"name":"string","type":"string","description":"The original string from which to extract the substring."},{"name":"start_index","type":"number","description":"The inclusive index from which `slice` extracts items or characters from the subarray or substring."},{"name":"end_index","type":"number","description":"The non-inclusive index up to which `slice` extracts items or characters from the subarray or substring."}]},"example":["slice",["get","name"],0,3],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"case":{"doc":"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["condition_1","output_1","...","condition_n","output_n","fallback"],"output-type":"any"}],"parameters":[{"name":"condition_i","type":"boolean"},{"name":"output_i","type":"any"},{"name":"fallback","type":"any","description":"The result when no condition evaluates to true."}]},"example":["case",["boolean",["feature-state","hover"],false],1,0.5],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"match":{"doc":"Selects the output whose label value matches the input value, or the fallback value if no match is found. The input can be any expression (e.g. `[\\"get\\", \\"building_type\\"]`). Each label must be either:\\n\\n - a single literal value; or\\n\\n - an array of literal values, whose values must be all strings or all numbers (e.g. `[100, 101]` or `[\\"c\\", \\"b\\"]`). The input matches if any of the values in the array matches, similar to the `\\"in\\"` operator.\\n\\nEach label must be unique. If the input type does not match the type of the labels, the result will be the fallback value.","syntax":{"overloads":[{"parameters":["input","label_1","output_1","...","label_n","output_n","fallback"],"output-type":"any"}],"parameters":[{"name":"input","type":"string | number","description":"Any expression."},{"name":"label_i","type":"string literal | number literal | array<string literal> | array<number literal>","description":"The i-th literal value or array of literal values to match the input against."},{"name":"output_i","type":"any","description":"The result when the i-th label is the first label to match the input."},{"name":"fallback","type":"any","description":"The result when no label matches the input."}]},"example":["match",["get","building_type"],"residential","#f00","commercial","#0f0","#000"],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"coalesce":{"doc":"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/use-a-fallback-image/)","syntax":{"overloads":[{"parameters":["expression_1","...","expression_n"],"output-type":"any"}],"parameters":[{"name":"expression_i","type":"any"}]},"example":["coalesce",["image",["concat",["get","icon"],"_15"]],["image","marker_15"]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"step":{"doc":"Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order.\\n\\nReturns the output value of the stop just less than the input, or the first output if the input is less than the first stop.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["input","output_0","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"any"}],"parameters":[{"name":"input","type":"number","description":"Any numeric expression."},{"name":"output_0","type":"any","description":"The result when the `input` is less than the first stop."},{"name":"stop_i_input","type":"number literal","description":"The value of the i-th stop against which the `input` is compared."},{"name":"stop_i_output","type":"any","description":"The result when the i-th stop is the last stop less than the `input`."}]},"example":["step",["get","point_count"],20,100,30,750,40],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, `color`, `array<color>`, or `projection`.\\n\\nInterpolation types:\\n\\n- `[\\"linear\\"]`, or an expression returning one of those types: Interpolates linearly between the pair of stops just less than and just greater than the input.\\n\\n- `[\\"exponential\\", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\\n\\n- `[\\"cubic-bezier\\", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.\\n\\n - [Animate map camera around a point](https://maplibre.org/maplibre-gl-js/docs/examples/animate-camera-around-point/)\\n\\n - [Change building color based on zoom level](https://maplibre.org/maplibre-gl-js/docs/examples/change-building-color-based-on-zoom-level/)\\n\\n - [Create a heatmap layer](https://maplibre.org/maplibre-gl-js/docs/examples/heatmap-layer/)\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"number | array<number> | color | array<color> | projection"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","description":"The interpolation type."},{"name":"input","type":"number","description":"Any numeric expression."},{"name":"stop_i_input","type":"number literal","description":"The value of the i-th stop against which the `input` is compared."},{"name":"stop_i_output","type":"number | array<number> | color | array<color> | projection","description":"The output value corresponding to the i-th stop."}]},"example":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate-hcl":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color` or `array<color>`, and the interpolation is performed in the Hue-Chroma-Luminance color space.","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"color | array<color>"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]"},{"name":"input","type":"number"},{"name":"stop_i_input","type":"number literal"},{"name":"stop_i_output","type":"color | array<color>"}]},"example":["interpolate-hcl",["linear"],["zoom"],15,"#f00",15.05,"#00f"],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"interpolate-lab":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color` or `array<color>`, and the interpolation is performed in the CIELAB color space.","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"color | array<color>"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]"},{"name":"input","type":"number"},{"name":"stop_i_input","type":"number literal"},{"name":"stop_i_output","type":"color | array<color>"}]},"example":["interpolate-lab",["linear"],["zoom"],15,"#f00",15.05,"#00f"],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"ln2":{"doc":"Returns the mathematical constant ln(2).","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["ln2"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"pi":{"doc":"Returns the mathematical constant pi.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["pi"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"e":{"doc":"Returns the mathematical constant e.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["e"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"typeof":{"doc":"Returns a string describing the type of the given value.","syntax":{"overloads":[{"parameters":["value"],"output-type":"string"}],"parameters":[{"name":"value","type":"any"}]},"example":["typeof",["get","name"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"string":{"doc":"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"string"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["string",["get","name"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"number":{"doc":"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"number"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["number",["get","population"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"boolean":{"doc":"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"boolean"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["boolean",["feature-state","hover"],false],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"object":{"doc":"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"object"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["object",["get","some-property"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"collator":{"doc":"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.","syntax":{"overloads":[{"parameters":["options"],"output-type":"collator"}],"parameters":[{"name":"options","type":"{ \\"case-sensitive\\"?: boolean, \\"diacritic-sensitive\\"?: boolean, \\"locale\\"?: string }"}]},"example":["collator",{"case-sensitive":true,"diacritic-sensitive":true,"locale":"fr"}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"format":{"doc":"Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#image) expression. Strings may be followed by a style override object that supports the following properties:\\n\\n- `\\"text-font\\"`: Overrides the font stack specified by the root layout property.\\n\\n- `\\"text-color\\"`: Overrides the color specified by the root paint property.\\n\\n- `\\"font-scale\\"`: Applies a scaling factor on `text-size` as specified by the root layout property.\\n\\n- `\\"vertical-align\\"`: Aligns vertically text section or image in relation to the row it belongs to. Possible values are: \\n\\t- `\\"bottom\\"` *default*: align the bottom of this section with the bottom of other sections.\\n<img alt=\\"Visual representation of bottom alignment\\" src=\\"https://github.com/user-attachments/assets/0474a2fd-a4b2-417c-9187-7a13a28695bc\\"/>\\n\\t- `\\"center\\"`: align the center of this section with the center of other sections.\\n<img alt=\\"Visual representation of center alignment\\" src=\\"https://github.com/user-attachments/assets/92237455-be6d-4c5d-b8f6-8127effc1950\\"/>\\n\\t- `\\"top\\"`: align the top of this section with the top of other sections.\\n<img alt=\\"Visual representation of top alignment\\" src=\\"https://github.com/user-attachments/assets/45dccb28-d977-4abb-a006-4ea9792b7c53\\"/>\\n\\t- Refer to [the design proposal](https://github.com/maplibre/maplibre-style-spec/issues/832) for more details.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","syntax":{"overloads":[{"parameters":["input_1","style_overrides_1?","...","input_n","style_overrides_n?"],"output-type":"formatted"}],"parameters":[{"name":"input_i","type":"string | image"},{"name":"style_overrides_i","type":"{ \\"text-font\\"?: string, \\"text-color\\"?: color, \\"font-scale\\"?: number, \\"vertical-align\\"?: \\"bottom\\" | \\"center\\" | \\"top\\" }"}]},"example":["format",["upcase",["get","FacilityName"]],{"font-scale":0.8},"\\n\\n",{},["downcase",["get","Comments"]],{"font-scale":0.6,"vertical-align":"center"}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-font":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"font-scale":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-color":{"js":"1.3.0","android":"7.3.0","ios":"4.10.0"},"vertical-align":{"js":"5.1.0","android":"https://github.com/maplibre/maplibre-native/issues/3055","ios":"https://github.com/maplibre/maplibre-native/issues/3055"},"image":{"js":"1.6.0","android":"8.6.0","ios":"5.7.0"}}},"image":{"doc":"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/use-a-fallback-image/)","syntax":{"overloads":[{"parameters":["image_name"],"output-type":"image"}],"parameters":[{"name":"image_name","type":"string"}]},"example":["image","marker_15"],"group":"Types","sdk-support":{"basic functionality":{"js":"1.4.0","android":"8.6.0","ios":"5.7.0"}}},"global-state":{"doc":"Retrieves a property value from global state that can be set with platform-specific APIs. Defaults can be provided using the [`state`](https://maplibre.org/maplibre-style-spec/root/#state) root property. Returns `null` if no value nor default value is set for the retrieved property.","group":"Lookup","syntax":{"overloads":[{"parameters":["property_name"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string literal","description":"The name of the global state property to retrieve."}]},"example":["global-state","someProperty"],"sdk-support":{"basic functionality":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/4964","android":"https://github.com/maplibre/maplibre-native/issues/3302","ios":"https://github.com/maplibre/maplibre-native/issues/3302"}}},"number-format":{"doc":"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input","format_options"],"output-type":"string"}],"parameters":[{"name":"input","type":"number"},{"name":"format_options","type":"{ \\"locale\\"?: string, \\"currency\\"?: string, \\"min-fraction-digits\\"?: number, \\"max-fraction-digits\\"?: number }"}]},"example":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.54.0","android":"8.4.0","ios":"supported"}}},"to-string":{"doc":"Converts the input value to a string. If the input is `null`, the result is `\\"\\"`. If the input is a boolean, the result is `\\"true\\"` or `\\"false\\"`. If the input is a number, it is converted to a string as specified by the [\\"NumberToString\\" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `\\"rgba(r,g,b,a)\\"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-time-slider/)","syntax":{"overloads":[{"parameters":["value"],"output-type":"string"}],"parameters":[{"name":"value","type":"any"}]},"example":["to-string",["get","mag"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-number":{"doc":"Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the [\\"ToNumber Applied to the String Type\\" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"number"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["to-number","someProperty"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-boolean":{"doc":"Converts the input value to a boolean. The result is `false` when the input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.","syntax":{"overloads":[{"parameters":["value"],"output-type":"boolean"}],"parameters":[{"name":"value","type":"any"}]},"example":["to-boolean","someProperty"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-rgba":{"doc":"Returns a four-element array containing the input color\'s red, green, blue, and alpha components, in that order.","syntax":{"overloads":[{"parameters":["color"],"output-type":"array"}],"parameters":[{"name":"color","type":"color"}]},"example":["to-rgba","#ff0000"],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-color":{"doc":"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"color"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["to-color","#edf8e9"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgb":{"doc":"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.","syntax":{"overloads":[{"parameters":["red","green","blue"],"output-type":"color"}],"parameters":[{"name":"red","type":"number"},{"name":"green","type":"number"},{"name":"blue","type":"number"}]},"example":["rgb",255,0,0],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgba":{"doc":"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.","syntax":{"overloads":[{"parameters":["red","green","blue","alpha"],"output-type":"color"}],"parameters":[{"name":"red","type":"number"},{"name":"green","type":"number"},{"name":"blue","type":"number"},{"name":"alpha","type":"number"}]},"example":["rgba",255,0,0,1],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"get":{"doc":"Retrieves a property value from the current feature\'s properties, or from another object if a second argument is provided. Returns null if the requested property is missing.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)\\n\\n - [Extrude polygons for 3D indoor mapping](https://maplibre.org/maplibre-gl-js/docs/examples/extrude-polygons-for-3d-indoor-mapping/)","syntax":{"overloads":[{"parameters":["property_name","object?"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string","description":"The name of the property to retrieve the value of."},{"name":"object","type":"object","description":"The object to retrieve the value from."}]},"example":["get","someProperty"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"has":{"doc":"Tests for the presence of a property value in the current feature\'s properties, or from another object if a second argument is provided.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["property_name","object?"],"output-type":"boolean"}],"parameters":[{"name":"property_name","type":"string","description":"The name of the property to test for the presence of."},{"name":"object","type":"object","description":"The object in which to test for the presence of the `property_name` property."}]},"example":["has","someProperty"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"length":{"doc":"Gets the length of an array or string. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["array_or_string"],"output-type":"number"}],"parameters":[{"name":"array_or_string","type":"array | string"}]},"example":["length",["get","myArray"]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"properties":{"doc":"Gets the feature properties object.  Note that in some cases, it may be more efficient to use [\\"get\\", \\"property_name\\"] directly.","syntax":{"overloads":[{"parameters":[],"output-type":"object"}]},"example":["properties"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"feature-state":{"doc":"Retrieves a property value from the current feature\'s state. Returns null if the requested property is not present on the feature\'s state. A feature\'s state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. When `source.promoteId` is not provided, features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. When `source.promoteId` is provided, features are identified by their `promoteId` property, which may be a number, string, or any primitive data type. Note that [\\"feature-state\\"] can only be used with paint properties that support data-driven styling.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)","syntax":{"overloads":[{"parameters":["property_name"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string"}]},"example":["feature-state","hover"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.46.0","ios":"https://github.com/maplibre/maplibre-native/issues/1698","android":"https://github.com/maplibre/maplibre-native/issues/1698"}}},"geometry-type":{"doc":"Returns the feature\'s simple geometry type: `Point`, `LineString`, or `Polygon`. `MultiPoint`, `MultiLineString`, and `MultiPolygon` are returned as `Point`, `LineString`, and `Polygon`, respectively.","syntax":{"overloads":[{"parameters":[],"output-type":"string"}]},"example":["==",["geometry-type"],"Polygon"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"id":{"doc":"Gets the feature\'s id, if it has one.","syntax":{"overloads":[{"parameters":[],"output-type":"any"}]},"example":["id"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"zoom":{"doc":"Gets the current zoom level.  Note that in style layout and paint properties, [\\"zoom\\"] may only appear as the input to a top-level \\"step\\" or \\"interpolate\\" expression.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"group":"Zoom","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"heatmap-density":{"doc":"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["heatmap-density"],"group":"Heatmap","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"elevation":{"doc":"Gets the elevation of a pixel (in meters above the vertical datum reference of the `raster-dem` tiles) from a `raster-dem` source. Can only be used in the `color-relief-color` property of a `color-relief` layer.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["elevation"],"group":"Color Relief","sdk-support":{"basic functionality":{"js":"5.6.0","android":"https://github.com/maplibre/maplibre-native/issues/3408","ios":"https://github.com/maplibre/maplibre-native/issues/3408"}}},"line-progress":{"doc":"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["line-progress"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.6.0"}}},"accumulated":{"doc":"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.","syntax":{"overloads":[{"parameters":[],"output-type":"any"}]},"example":["accumulated"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.53.0","ios":"supported","android":"supported"}}},"+":{"doc":"Returns the sum of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["+",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"*":{"doc":"Returns the product of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["*",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"-":{"doc":"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"},{"parameters":["single_input"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The number from which to subtract `input_2`."},{"name":"input_2","type":"number","description":"The number to subtract from `input_1`."},{"name":"single_input","type":"number","description":"The number to subtract from 0."}]},"example":["-",10],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"/":{"doc":"Returns the result of floating point division of the first input by the second.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The dividend."},{"name":"input_2","type":"number","description":"The divisor."}]},"example":["/",["get","population"],["get","sq-km"]],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"%":{"doc":"Returns the remainder after integer division of the first input by the second.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The dividend."},{"name":"input_2","type":"number","description":"The divisor."}]},"example":["%",10,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"^":{"doc":"Returns the result of raising the first input to the power specified by the second.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The base."},{"name":"input_2","type":"number","description":"The exponent."}]},"example":["^",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sqrt":{"doc":"Returns the square root of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number","description":"The radicand."}]},"example":["sqrt",9],"group":"Math","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"log10":{"doc":"Returns the base-ten logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["log10",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"ln":{"doc":"Returns the natural logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["ln",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"log2":{"doc":"Returns the base-two logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["log2",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sin":{"doc":"Returns the sine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["sin",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"cos":{"doc":"Returns the cosine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["cos",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"tan":{"doc":"Returns the tangent of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["tan",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"asin":{"doc":"Returns the arcsine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["asin",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"acos":{"doc":"Returns the arccosine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["acos",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"atan":{"doc":"Returns the arctangent of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["atan",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"min":{"doc":"Returns the minimum value of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["min",1,2],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"max":{"doc":"Returns the maximum value of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["max",1,2],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"round":{"doc":"Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `[\\"round\\", -1.5]` evaluates to -2.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["round",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"abs":{"doc":"Returns the absolute value of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["abs",-1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"ceil":{"doc":"Returns the smallest integer that is greater than or equal to the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["ceil",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"floor":{"doc":"Returns the largest integer that is less than or equal to the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["floor",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"distance":{"doc":"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.","syntax":{"overloads":[{"parameters":["geojson"],"output-type":"number"}],"parameters":[{"name":"geojson","type":"GeoJSON object"}]},"example":["distance",{"type":"Point","coordinates":[0,0]}],"group":"Math","sdk-support":{"basic functionality":{"js":"4.2.0","android":"9.2.0","ios":"5.9.0"}}},"==":{"doc":"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Add multiple geometries from one GeoJSON source](https://maplibre.org/maplibre-gl-js/docs/examples/multiple-geometries/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Display buildings in 3D](https://maplibre.org/maplibre-gl-js/docs/examples/display-buildings-in-3d/)\\n\\n - [Filter symbols by toggling a list](https://maplibre.org/maplibre-gl-js/docs/examples/filter-symbols-by-toggling-a-list/)","syntax":{"overloads":[{"parameters":["input_1","input_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"input_1","type":"any"},{"name":"input_2","type":"any"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["==","$type","Polygon"],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"!=":{"doc":"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input_1","input_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"input_1","type":"any"},{"name":"input_2","type":"any"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["!=","cluster",true],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">":{"doc":"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":[">",["get","mag"],2],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<":{"doc":"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["<",["get","mag"],2],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">=":{"doc":"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":[">=",["get","mag"],6],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<=":{"doc":"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["<=",["get","mag"],6],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"all":{"doc":"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"boolean"}],"parameters":[{"name":"input_i","type":"boolean"}]},"example":["all",[">=",["get","mag"],4],["<",["get","mag"],5]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"any":{"doc":"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"boolean"}],"parameters":[{"name":"input_i","type":"boolean"}]},"example":["any",[">=",["get","mag"],4],["<",["get","mag"],5]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"!":{"doc":"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"boolean"}],"parameters":[{"name":"input","type":"boolean"}]},"example":["!",["has","point_count"]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"within":{"doc":"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\\n\\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\\n\\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line\'s endpoint is on the boundary.","syntax":{"overloads":[{"parameters":["geojson"],"output-type":"boolean"}],"parameters":[{"name":"geojson","type":"GeoJSON object"}]},"example":["within",{"type":"Polygon","coordinates":[[[0,0],[0,5],[5,5],[5,0],[0,0]]]}],"group":"Decision","sdk-support":{"basic functionality":{"js":"1.9.0","android":"9.1.0","ios":"5.8.0"}}},"is-supported-script":{"doc":"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the `mapbox-gl-rtl-text` plugin is not in use in MapLibre GL JS).","syntax":{"overloads":[{"parameters":["input"],"output-type":"boolean"}],"parameters":[{"name":"input","type":"string"}]},"example":["is-supported-script",""],"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.6.0","ios":"supported"}}},"upcase":{"doc":"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"string"}],"parameters":[{"name":"input","type":"string"}]},"example":["upcase",["get","name"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"downcase":{"doc":"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"string"}],"parameters":[{"name":"input","type":"string"}]},"example":["downcase",["get","name"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"concat":{"doc":"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.\\n\\n - [Add a generated icon to the map](https://maplibre.org/maplibre-gl-js/docs/examples/add-a-generated-icon-to-the-map/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-time-slider/)\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)\\n\\n - [Variable label placement](https://maplibre.org/maplibre-gl-js/docs/examples/variable-label-placement/)","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"string"}],"parameters":[{"name":"input_i","type":"any"}]},"example":["concat","square-rgb-",["get","color"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"resolved-locale":{"doc":"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.","syntax":{"overloads":[{"parameters":["collator"],"output-type":"string"}],"parameters":[{"name":"collator","type":"collator"}]},"example":["resolved-locale",["collator",{"case-sensitive":true,"diacritic-sensitive":false,"locale":"de"}]],"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}}}}'),_de={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0 (0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0, directly above, to 180, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}}},xde={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the sky."},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color at the horizon."},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the fog. Requires 3D terrain."},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog over the 3D terrain. Where 0 is the map center and 1 is the horizon."},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog color and the horizon color. Where 0 is using the horizon color only and 1 is using the fog color only."},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the sky color and the horizon color. Where 1 is blending the color at the middle of the sky and 0 is not blending at all and using the sky color only."},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the atmosphere. Where 1 is visible atmosphere and 0 is hidden. It is best to interpolate this expression when using globe projection."}},Mde={source:{type:"string",doc:"The source for the terrain data.",required:!0,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}},exaggeration:{type:"number",minimum:0,doc:"The exaggeration of the terrain - how high it will look.",default:1,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}}},wde={type:{type:"projectionDefinition",doc:"The projection definition type. Can be specified as a string, a transition state, or an expression.",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},Sde=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],Ede={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},Bde={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:'Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. GeoJSON sources with `lineMetrics: true` specified won\'t render dashed lines to the expected scale. Zoom-dependent expressions will be evaluated only at integer zoom levels. The only way to create an array value is using `["literal", [...]]`; arrays cannot be read from or derived from feature properties.',minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"5.8.0",ios:"https://github.com/maplibre/maplibre-native/issues/744",android:"https://github.com/maplibre/maplibre-native/issues/744"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Ode={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Ide={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Tde={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline. \n\nThe unit is in pixels only for SDF sprites that were created with a blur radius of 8, multiplied by the display density. I.e., the radius needs to be 16 for `@2x` sprites, etc.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},kde={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added, or when a video is started or its coordinates are updated.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Dde={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,doc:"The direction of the light source(s) used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`. Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,doc:"The altitude of the light source(s) used to generate the hillshading with 0 as sunset and 90 as noon. Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!1,"sdk-support":{"basic functionality":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",doc:"The shading color of areas that face away from the light source(s). Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source(s). Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{doc:"The legacy hillshade method."},basic:{doc:"Basic hillshade. Uses a simple physics model where the reflected light intensity is proportional to the cosine of the angle between the incident light and the surface normal. Similar to GDAL's `gdaldem` default algorithm."},combined:{doc:"Hillshade algorithm whose intensity scales with slope. Similar to GDAL's `gdaldem` with `-combined` option."},igor:{doc:"Hillshade algorithm which tries to minimize effects on other map features beneath. Similar to GDAL's `gdaldem` with `-igor` option."},multidirectional:{doc:"Hillshade with multiple illumination directions. Uses the basic hillshade model with multiple independent light sources."}},default:"standard",doc:"The hillshade algorithm to use, one of `standard`, `basic`, `combined`, `igor`, or `multidirectional`. ![image](assets/hillshade_methods.png)","sdk-support":{"basic functionality":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Rde={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Pde={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},Lde={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},Wr={$version:Hhe,$root:Zhe,sources:Xhe,source:Jhe,source_vector:ede,source_raster:tde,source_raster_dem:nde,source_geojson:ide,source_video:rde,source_image:ode,layer:sde,layout:ade,layout_background:lde,layout_fill:ude,layout_circle:cde,layout_heatmap:Ade,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},"property-type":"constant"}},layout_line:hde,layout_symbol:dde,layout_raster:fde,layout_hillshade:pde,"layout_color-relief":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{}},"property-type":"constant"}},filter:mde,filter_operator:gde,geometry_type:yde,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:

* In categorical functions, when the feature value does not match any of the stop domain values.

* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.

* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).

* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.

If no default is provided, the style property's default is used in these circumstances.`}},function_stop:vde,expression:bde,expression_name:Cde,light:_de,sky:xde,terrain:Mde,projection:wde,paint:Sde,paint_fill:Ede,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",android:"7.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:Bde,paint_circle:Ode,paint_heatmap:Ide,paint_symbol:Tde,paint_raster:kde,paint_hillshade:Dde,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the color-relief will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",doc:'Defines the color of each pixel based on its elevation. Should be an expression that uses `["elevation"]` as input.',example:["interpolate",["linear"],["elevation"],0,"black",8849,"white"],transition:!1,"sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:Rde,transition:Pde,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:Lde};var fS={exports:{}};var Ude=fS.exports,Lz;function Kde(){return Lz||(Lz=1,(function(n,e){(function(t,i){n.exports=i()})(Ude,(function(){var t={},i={};function r(s,a,c){if(i[s]=c,s==="index"){var d="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",m={};return i.shared(m),i.index(t,m),typeof window<"u"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([d],{type:"text/javascript"}))),t}}r("shared",["exports"],(function(s){function a(h,l,A,y){return new(A||(A=Promise))((function(_,E){function O(W){try{F(y.next(W))}catch(ee){E(ee)}}function D(W){try{F(y.throw(W))}catch(ee){E(ee)}}function F(W){var ee;W.done?_(W.value):(ee=W.value,ee instanceof A?ee:new A((function(ae){ae(ee)}))).then(O,D)}F((y=y.apply(h,l||[])).next())}))}function c(h,l){this.x=h,this.y=l}function d(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var m,v;typeof SuppressedError=="function"&&SuppressedError,c.prototype={clone(){return new c(this.x,this.y)},add(h){return this.clone()._add(h)},sub(h){return this.clone()._sub(h)},multByPoint(h){return this.clone()._multByPoint(h)},divByPoint(h){return this.clone()._divByPoint(h)},mult(h){return this.clone()._mult(h)},div(h){return this.clone()._div(h)},rotate(h){return this.clone()._rotate(h)},rotateAround(h,l){return this.clone()._rotateAround(h,l)},matMult(h){return this.clone()._matMult(h)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(h){return this.x===h.x&&this.y===h.y},dist(h){return Math.sqrt(this.distSqr(h))},distSqr(h){const l=h.x-this.x,A=h.y-this.y;return l*l+A*A},angle(){return Math.atan2(this.y,this.x)},angleTo(h){return Math.atan2(this.y-h.y,this.x-h.x)},angleWith(h){return this.angleWithSep(h.x,h.y)},angleWithSep(h,l){return Math.atan2(this.x*l-this.y*h,this.x*h+this.y*l)},_matMult(h){const l=h[2]*this.x+h[3]*this.y;return this.x=h[0]*this.x+h[1]*this.y,this.y=l,this},_add(h){return this.x+=h.x,this.y+=h.y,this},_sub(h){return this.x-=h.x,this.y-=h.y,this},_mult(h){return this.x*=h,this.y*=h,this},_div(h){return this.x/=h,this.y/=h,this},_multByPoint(h){return this.x*=h.x,this.y*=h.y,this},_divByPoint(h){return this.x/=h.x,this.y/=h.y,this},_unit(){return this._div(this.mag()),this},_perp(){const h=this.y;return this.y=this.x,this.x=-h,this},_rotate(h){const l=Math.cos(h),A=Math.sin(h),y=A*this.x+l*this.y;return this.x=l*this.x-A*this.y,this.y=y,this},_rotateAround(h,l){const A=Math.cos(h),y=Math.sin(h),_=l.y+y*(this.x-l.x)+A*(this.y-l.y);return this.x=l.x+A*(this.x-l.x)-y*(this.y-l.y),this.y=_,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:c},c.convert=function(h){if(h instanceof c)return h;if(Array.isArray(h))return new c(+h[0],+h[1]);if(h.x!==void 0&&h.y!==void 0)return new c(+h.x,+h.y);throw new Error("Expected [x, y] or {x, y} point format")};var M=(function(){if(v)return m;function h(l,A,y,_){this.cx=3*l,this.bx=3*(y-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*A,this.by=3*(_-A)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=A,this.p2x=y,this.p2y=_}return v=1,m=h,h.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,A){if(A===void 0&&(A=1e-6),l<0)return 0;if(l>1)return 1;for(var y=l,_=0;_<8;_++){var E=this.sampleCurveX(y)-l;if(Math.abs(E)<A)return y;var O=this.sampleCurveDerivativeX(y);if(Math.abs(O)<1e-6)break;y-=E/O}var D=0,F=1;for(y=l,_=0;_<20&&(E=this.sampleCurveX(y),!(Math.abs(E-l)<A));_++)l>E?D=y:F=y,y=.5*(F-D)+D;return y},solve:function(l,A){return this.sampleCurveY(this.solveCurveX(l,A))}},m})(),B=d(M);let P,U;function z(){return P==null&&(P=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),P}function V(){if(U==null&&(U=!1,z())){const l=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(l){for(let y=0;y<25;y++){const _=4*y;l.fillStyle=`rgb(${_},${_+1},${_+2})`,l.fillRect(y%5,Math.floor(y/5),1,1)}const A=l.getImageData(0,0,5,5).data;for(let y=0;y<100;y++)if(y%4!=3&&A[y]!==y){U=!0;break}}}return U||!1}var Z=1e-6,X=typeof Float32Array<"u"?Float32Array:Array;function re(){var h=new X(9);return X!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h}function ie(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function te(){var h=new X(3);return X!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h}function q(h){var l=h[0],A=h[1],y=h[2];return Math.sqrt(l*l+A*A+y*y)}function le(h,l,A){var y=new X(3);return y[0]=h,y[1]=l,y[2]=A,y}function ce(h,l,A){return h[0]=l[0]+A[0],h[1]=l[1]+A[1],h[2]=l[2]+A[2],h}function ve(h,l,A){return h[0]=l[0]*A,h[1]=l[1]*A,h[2]=l[2]*A,h}function ge(h,l,A){var y=l[0],_=l[1],E=l[2],O=A[0],D=A[1],F=A[2];return h[0]=_*F-E*D,h[1]=E*O-y*F,h[2]=y*D-_*O,h}var Ee,xe=q;function Te(h,l,A){var y=l[0],_=l[1],E=l[2],O=l[3];return h[0]=A[0]*y+A[4]*_+A[8]*E+A[12]*O,h[1]=A[1]*y+A[5]*_+A[9]*E+A[13]*O,h[2]=A[2]*y+A[6]*_+A[10]*E+A[14]*O,h[3]=A[3]*y+A[7]*_+A[11]*E+A[15]*O,h}function Fe(){var h=new X(4);return X!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function Ie(h,l,A,y){var _=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",E=Math.PI/360;l*=E,y*=E,A*=E;var O=Math.sin(l),D=Math.cos(l),F=Math.sin(A),W=Math.cos(A),ee=Math.sin(y),ae=Math.cos(y);switch(_){case"xyz":h[0]=O*W*ae+D*F*ee,h[1]=D*F*ae-O*W*ee,h[2]=D*W*ee+O*F*ae,h[3]=D*W*ae-O*F*ee;break;case"xzy":h[0]=O*W*ae-D*F*ee,h[1]=D*F*ae-O*W*ee,h[2]=D*W*ee+O*F*ae,h[3]=D*W*ae+O*F*ee;break;case"yxz":h[0]=O*W*ae+D*F*ee,h[1]=D*F*ae-O*W*ee,h[2]=D*W*ee-O*F*ae,h[3]=D*W*ae+O*F*ee;break;case"yzx":h[0]=O*W*ae+D*F*ee,h[1]=D*F*ae+O*W*ee,h[2]=D*W*ee-O*F*ae,h[3]=D*W*ae-O*F*ee;break;case"zxy":h[0]=O*W*ae-D*F*ee,h[1]=D*F*ae+O*W*ee,h[2]=D*W*ee+O*F*ae,h[3]=D*W*ae-O*F*ee;break;case"zyx":h[0]=O*W*ae-D*F*ee,h[1]=D*F*ae+O*W*ee,h[2]=D*W*ee-O*F*ae,h[3]=D*W*ae+O*F*ee;break;default:throw new Error("Unknown angle order "+_)}return h}function Ye(){var h=new X(2);return X!=Float32Array&&(h[0]=0,h[1]=0),h}function At(h,l){var A=new X(2);return A[0]=h,A[1]=l,A}te(),Ee=new X(4),X!=Float32Array&&(Ee[0]=0,Ee[1]=0,Ee[2]=0,Ee[3]=0),te(),le(1,0,0),le(0,1,0),Fe(),Fe(),re(),Ye();const mt=8192;function Ue(h,l,A){return l*(mt/(h.tileSize*Math.pow(2,A-h.tileID.overscaledZ)))}function De(h,l){return(h%l+l)%l}function Ge(h,l,A){return h*(1-A)+l*A}function Re(h){if(h<=0)return 0;if(h>=1)return 1;const l=h*h,A=l*h;return 4*(h<.5?A:3*(h-l)+A-.75)}function St(h,l,A,y){const _=new B(h,l,A,y);return E=>_.solve(E)}const ut=St(.25,.1,.25,1);function kt(h,l,A){return Math.min(A,Math.max(l,h))}function Ut(h,l,A){const y=A-l,_=((h-l)%y+y)%y+l;return _===l?A:_}function Le(h,...l){for(const A of l)for(const y in A)h[y]=A[y];return h}let ke=1;function Oe(h,l,A){const y={};for(const _ in h)y[_]=l.call(this,h[_],_,h);return y}function Ze(h,l,A){const y={};for(const _ in h)l.call(this,h[_],_,h)&&(y[_]=h[_]);return y}function bt(h){return Array.isArray(h)?h.map(bt):typeof h=="object"&&h?Oe(h,bt):h}const yt={};function Mt(h){yt[h]||(typeof console<"u"&&console.warn(h),yt[h]=!0)}function Kt(h,l,A){return(A.y-h.y)*(l.x-h.x)>(l.y-h.y)*(A.x-h.x)}function Dt(h){return typeof WorkerGlobalScope<"u"&&h!==void 0&&h instanceof WorkerGlobalScope}let en=null;function Gn(h){return typeof ImageBitmap<"u"&&h instanceof ImageBitmap}const Nn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Si(h,l,A,y,_){return a(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const E=new VideoFrame(h,{timestamp:0});try{const O=E?.format;if(!O||!O.startsWith("BGR")&&!O.startsWith("RGB"))throw new Error(`Unrecognized format ${O}`);const D=O.startsWith("BGR"),F=new Uint8ClampedArray(y*_*4);if(yield E.copyTo(F,(function(W,ee,ae,Ae,fe){const be=4*Math.max(-ee,0),we=(Math.max(0,ae)-ae)*Ae*4+be,Be=4*Ae,ze=Math.max(0,ee),at=Math.max(0,ae);return{rect:{x:ze,y:at,width:Math.min(W.width,ee+Ae)-ze,height:Math.min(W.height,ae+fe)-at},layout:[{offset:we,stride:Be}]}})(h,l,A,y,_)),D)for(let W=0;W<F.length;W+=4){const ee=F[W];F[W]=F[W+2],F[W+2]=ee}return F}finally{E.close()}}))}let Un,Ln;function Tn(h,l,A,y){return h.addEventListener(l,A,y),{unsubscribe:()=>{h.removeEventListener(l,A,y)}}}function ti(h){return h*Math.PI/180}function Bn(h){return h/Math.PI*180}const je={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},H={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},j="AbortError";class Q extends Error{constructor(l=j){super(l instanceof Error?l.message:l),this.name=j,l instanceof Error&&l.stack&&(this.stack=l.stack)}}function he(h){return h.name===j}const Me={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ne(h){return Me.REGISTERED_PROTOCOLS[h.substring(0,h.indexOf("://"))]}const Qe="global-dispatcher";class it extends Error{constructor(l,A,y,_){super(`AJAXError: ${A} (${l}): ${y}`),this.status=l,this.statusText=A,this.url=y,this.body=_}}const vt=()=>Dt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,$e=function(h,l){if(/:\/\//.test(h.url)&&!/^https?:|^file:/.test(h.url)){const y=Ne(h.url);if(y)return y(h,l);if(Dt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,targetMapId:Qe},l)}if(!(/^file:/.test(A=h.url)||/^file:/.test(vt())&&!/^\w+:/.test(A))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(y,_){return a(this,void 0,void 0,(function*(){const E=new Request(y.url,{method:y.method||"GET",body:y.body,credentials:y.credentials,headers:y.headers,cache:y.cache,referrer:vt(),signal:_.signal});let O,D;y.type!=="json"||E.headers.has("Accept")||E.headers.set("Accept","application/json");try{O=yield fetch(E)}catch(W){throw he(W)?W:new it(0,W.message,y.url,new Blob)}if(!O.ok){const W=yield O.blob();throw new it(O.status,O.statusText,y.url,W)}D=y.type==="arrayBuffer"||y.type==="image"?O.arrayBuffer():y.type==="json"?O.json():O.text();const F=yield D;return _.signal.throwIfAborted(),{data:F,cacheControl:O.headers.get("Cache-Control"),expires:O.headers.get("Expires")}}))})(h,l);if(Dt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,mustQueue:!0,targetMapId:Qe},l)}var A;return(function(y,_){return new Promise(((E,O)=>{var D;const F=new XMLHttpRequest;F.open(y.method||"GET",y.url,!0),y.type!=="arrayBuffer"&&y.type!=="image"||(F.responseType="arraybuffer");for(const W in y.headers)F.setRequestHeader(W,y.headers[W]);y.type==="json"&&(F.responseType="text",!((D=y.headers)===null||D===void 0)&&D.Accept||F.setRequestHeader("Accept","application/json")),F.withCredentials=y.credentials==="include",F.onerror=()=>{O(new Error(F.statusText))},F.onload=()=>{if(!_.signal.aborted)if((F.status>=200&&F.status<300||F.status===0)&&F.response!==null){let W=F.response;if(y.type==="json")try{W=JSON.parse(F.response)}catch(ee){return void O(ee)}E({data:W,cacheControl:F.getResponseHeader("Cache-Control"),expires:F.getResponseHeader("Expires")})}else{const W=new Blob([F.response],{type:F.getResponseHeader("Content-Type")});O(new it(F.status,F.statusText,y.url,W))}},_.signal.addEventListener("abort",(()=>{F.abort(),O(new Q(_.signal.reason))})),F.send(y.body)}))})(h,l)};function ot(h){if(!h||h.indexOf("://")<=0||h.indexOf("data:image/")===0||h.indexOf("blob:")===0)return!0;const l=new URL(h),A=window.location;return l.protocol===A.protocol&&l.host===A.host}function b(h,l,A){A[h]&&A[h].indexOf(l)!==-1||(A[h]=A[h]||[],A[h].push(l))}function Rt(h,l,A){if(A&&A[h]){const y=A[h].indexOf(l);y!==-1&&A[h].splice(y,1)}}class mn{constructor(l,A={}){Le(this,A),this.type=l}}class bn extends mn{constructor(l,A={}){super("error",Le({error:l},A))}}class Cn{on(l,A){return this._listeners=this._listeners||{},b(l,A,this._listeners),{unsubscribe:()=>{this.off(l,A)}}}off(l,A){return Rt(l,A,this._listeners),Rt(l,A,this._oneTimeListeners),this}once(l,A){return A?(this._oneTimeListeners=this._oneTimeListeners||{},b(l,A,this._oneTimeListeners),this):new Promise((y=>this.once(l,y)))}fire(l,A){typeof l=="string"&&(l=new mn(l,A||{}));const y=l.type;if(this.listens(y)){l.target=this;const _=this._listeners&&this._listeners[y]?this._listeners[y].slice():[];for(const D of _)D.call(this,l);const E=this._oneTimeListeners&&this._oneTimeListeners[y]?this._oneTimeListeners[y].slice():[];for(const D of E)Rt(y,D,this._oneTimeListeners),D.call(this,l);const O=this._eventedParent;O&&(Le(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),O.fire(l))}else l instanceof bn&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,A){return this._eventedParent=l,this._eventedParentData=A,this}}var xt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Ci=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ki(h,l){const A={};for(const y in h)y!=="ref"&&(A[y]=h[y]);return Ci.forEach((y=>{y in l&&(A[y]=l[y])})),A}function Wn(h,l){if(Array.isArray(h)){if(!Array.isArray(l)||h.length!==l.length)return!1;for(let A=0;A<h.length;A++)if(!Wn(h[A],l[A]))return!1;return!0}if(typeof h=="object"&&h!==null&&l!==null){if(typeof l!="object"||Object.keys(h).length!==Object.keys(l).length)return!1;for(const A in h)if(!Wn(h[A],l[A]))return!1;return!0}return h===l}function Hn(h,l){h.push(l)}function Qi(h,l,A){Hn(A,{command:"addSource",args:[h,l[h]]})}function Wi(h,l,A){Hn(l,{command:"removeSource",args:[h]}),A[h]=!0}function Ri(h,l,A,y){Wi(h,A,y),Qi(h,l,A)}function qi(h,l,A){let y;for(y in h[A])if(Object.prototype.hasOwnProperty.call(h[A],y)&&y!=="data"&&!Wn(h[A][y],l[A][y]))return!1;for(y in l[A])if(Object.prototype.hasOwnProperty.call(l[A],y)&&y!=="data"&&!Wn(h[A][y],l[A][y]))return!1;return!0}function Li(h,l,A,y,_,E){h=h||{},l=l||{};for(const O in h)Object.prototype.hasOwnProperty.call(h,O)&&(Wn(h[O],l[O])||A.push({command:E,args:[y,O,l[O],_]}));for(const O in l)Object.prototype.hasOwnProperty.call(l,O)&&!Object.prototype.hasOwnProperty.call(h,O)&&(Wn(h[O],l[O])||A.push({command:E,args:[y,O,l[O],_]}))}function Er(h){return h.id}function xo(h,l){return h[l.id]=l,h}class un{constructor(l,A,y,_){this.message=(l?`${l}: `:"")+y,_&&(this.identifier=_),A!=null&&A.__line__&&(this.line=A.__line__)}}function tr(h,...l){for(const A of l)for(const y in A)h[y]=A[y];return h}class Wo extends Error{constructor(l,A){super(A),this.message=A,this.key=l}}class ra{constructor(l,A=[]){this.parent=l,this.bindings={};for(const[y,_]of A)this.bindings[y]=_}concat(l){return new ra(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}const oo={kind:"null"},kn={kind:"number"},Xi={kind:"string"},ui={kind:"boolean"},Ka={kind:"color"},yA={kind:"projectionDefinition"},xl={kind:"object"},Vi={kind:"value"},Qu={kind:"collator"},co={kind:"formatted"},$a={kind:"padding"},Ml={kind:"colorArray"},Fa={kind:"numberArray"},Ro={kind:"resolvedImage"},gc={kind:"variableAnchorOffsetCollection"};function Qo(h,l){return{kind:"array",itemType:h,N:l}}function mr(h){if(h.kind==="array"){const l=mr(h.itemType);return typeof h.N=="number"?`array<${l}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${l}>`}return h.kind}const za=[oo,kn,Xi,ui,Ka,yA,co,xl,Qo(Vi),$a,Fa,Ml,Ro,gc];function Zo(h,l){if(l.kind==="error")return null;if(h.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!Zo(h.itemType,l.itemType))&&(typeof h.N!="number"||h.N===l.N))return null}else{if(h.kind===l.kind)return null;if(h.kind==="value"){for(const A of za)if(!Zo(A,l))return null}}return`Expected ${mr(h)} but found ${mr(l)} instead.`}function bu(h,l){return l.some((A=>A.kind===h.kind))}function Cu(h,l){return l.some((A=>A==="null"?h===null:A==="array"?Array.isArray(h):A==="object"?h&&!Array.isArray(h)&&typeof h=="object":A===typeof h))}function ul(h,l){return h.kind==="array"&&l.kind==="array"?h.itemType.kind===l.itemType.kind&&typeof h.N=="number":h.kind===l.kind}const Vc=.96422,cl=.82521,ja=4/29,lr=6/29,qu=3*lr*lr,wl=lr*lr*lr,Sl=Math.PI/180,_u=180/Math.PI;function yc(h){return(h%=360)<0&&(h+=360),h}function Rh([h,l,A,y]){let _,E;const O=vc((.2225045*(h=Vs(h))+.7168786*(l=Vs(l))+.0606169*(A=Vs(A)))/1);h===l&&l===A?_=E=O:(_=vc((.4360747*h+.3850649*l+.1430804*A)/Vc),E=vc((.0139322*h+.0971045*l+.7141733*A)/cl));const D=116*O-16;return[D<0?0:D,500*(_-O),200*(O-E),y]}function Vs(h){return h<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function vc(h){return h>wl?Math.pow(h,1/3):h/qu+ja}function Yl([h,l,A,y]){let _=(h+16)/116,E=isNaN(l)?_:_+l/500,O=isNaN(A)?_:_-A/200;return _=1*Vl(_),E=Vc*Vl(E),O=cl*Vl(O),[$c(3.1338561*E-1.6168667*_-.4906146*O),$c(-.9787684*E+1.9161415*_+.033454*O),$c(.0719453*E-.2289914*_+1.4052427*O),y]}function $c(h){return(h=h<=.00304?12.92*h:1.055*Math.pow(h,1/2.4)-.055)<0?0:h>1?1:h}function Vl(h){return h>lr?h*h*h:qu*(h-ja)}const $l=Object.hasOwn||function(h,l){return Object.prototype.hasOwnProperty.call(h,l)};function hs(h,l){return $l(h,l)?h[l]:void 0}function Mo(h){return parseInt(h.padEnd(2,h),16)/255}function Hl(h,l){return xu(l?h/100:h,0,1)}function xu(h,l,A){return Math.min(Math.max(l,h),A)}function Es(h){return!h.some(Number.isNaN)}const Mu={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Zl(h,l,A){return h+A*(l-h)}function Yu(h,l,A){return h.map(((y,_)=>Zl(y,l[_],A)))}class Ji{constructor(l,A,y,_=1,E=!0){this.r=l,this.g=A,this.b=y,this.a=_,E||(this.r*=_,this.g*=_,this.b*=_,_||this.overwriteGetter("rgb",[l,A,y,_]))}static parse(l){if(l instanceof Ji)return l;if(typeof l!="string")return;const A=(function(y){if((y=y.toLowerCase().trim())==="transparent")return[0,0,0,0];const _=hs(Mu,y);if(_){const[O,D,F]=_;return[O/255,D/255,F/255,1]}if(y.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(y)){const O=y.length<6?1:2;let D=1;return[Mo(y.slice(D,D+=O)),Mo(y.slice(D,D+=O)),Mo(y.slice(D,D+=O)),Mo(y.slice(D,D+O)||"ff")]}if(y.startsWith("rgb")){const O=y.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(O){const[D,F,W,ee,ae,Ae,fe,be,we,Be,ze,at]=O,We=[ee||" ",fe||" ",Be].join("");if(We==="  "||We==="  /"||We===",,"||We===",,,"){const Xe=[W,Ae,we].join(""),ct=Xe==="%%%"?100:Xe===""?255:0;if(ct){const pt=[xu(+F/ct,0,1),xu(+ae/ct,0,1),xu(+be/ct,0,1),ze?Hl(+ze,at):1];if(Es(pt))return pt}}return}}const E=y.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(E){const[O,D,F,W,ee,ae,Ae,fe,be]=E,we=[F||" ",ee||" ",Ae].join("");if(we==="  "||we==="  /"||we===",,"||we===",,,"){const Be=[+D,xu(+W,0,100),xu(+ae,0,100),fe?Hl(+fe,be):1];if(Es(Be))return(function([ze,at,We,Xe]){function ct(pt){const Nt=(pt+ze/30)%12,sn=at*Math.min(We,1-We);return We-sn*Math.max(-1,Math.min(Nt-3,9-Nt,1))}return ze=yc(ze),at/=100,We/=100,[ct(0),ct(8),ct(4),Xe]})(Be)}}})(l);return A?new Ji(...A,!1):void 0}get rgb(){const{r:l,g:A,b:y,a:_}=this,E=_||1/0;return this.overwriteGetter("rgb",[l/E,A/E,y/E,_])}get hcl(){return this.overwriteGetter("hcl",(function(l){const[A,y,_,E]=Rh(l),O=Math.sqrt(y*y+_*_);return[Math.round(1e4*O)?yc(Math.atan2(_,y)*_u):NaN,O,A,E]})(this.rgb))}get lab(){return this.overwriteGetter("lab",Rh(this.rgb))}overwriteGetter(l,A){return Object.defineProperty(this,l,{value:A}),A}toString(){const[l,A,y,_]=this.rgb;return`rgba(${[l,A,y].map((E=>Math.round(255*E))).join(",")},${_})`}static interpolate(l,A,y,_="rgb"){switch(_){case"rgb":{const[E,O,D,F]=Yu(l.rgb,A.rgb,y);return new Ji(E,O,D,F,!1)}case"hcl":{const[E,O,D,F]=l.hcl,[W,ee,ae,Ae]=A.hcl;let fe,be;if(isNaN(E)||isNaN(W))isNaN(E)?isNaN(W)?fe=NaN:(fe=W,D!==1&&D!==0||(be=ee)):(fe=E,ae!==1&&ae!==0||(be=O));else{let We=W-E;W>E&&We>180?We-=360:W<E&&E-W>180&&(We+=360),fe=E+y*We}const[we,Be,ze,at]=(function([We,Xe,ct,pt]){return We=isNaN(We)?0:We*Sl,Yl([ct,Math.cos(We)*Xe,Math.sin(We)*Xe,pt])})([fe,be??Zl(O,ee,y),Zl(D,ae,y),Zl(F,Ae,y)]);return new Ji(we,Be,ze,at,!1)}case"lab":{const[E,O,D,F]=Yl(Yu(l.lab,A.lab,y));return new Ji(E,O,D,F,!1)}}}}Ji.black=new Ji(0,0,0,1),Ji.white=new Ji(1,1,1,1),Ji.transparent=new Ji(0,0,0,0),Ji.red=new Ji(1,0,0,1);class Ha{constructor(l,A,y){this.sensitivity=l?A?"variant":"case":A?"accent":"base",this.locale=y,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,A){return this.collator.compare(l,A)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Xo=["bottom","center","top"];class Vu{constructor(l,A,y,_,E,O){this.text=l,this.image=A,this.scale=y,this.fontStack=_,this.textColor=E,this.verticalAlign=O}}class Jo{constructor(l){this.sections=l}static fromString(l){return new Jo([new Vu(l,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((l=>l.text.length!==0||l.image&&l.image.name.length!==0))}static factory(l){return l instanceof Jo?l:Jo.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map((l=>l.text)).join("")}}class Ao{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Ao)return l;if(typeof l=="number")return new Ao([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(const A of l)if(typeof A!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]]}return new Ao(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,A,y){return new Ao(Yu(l.values,A.values,y))}}class ho{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof ho)return l;if(typeof l=="number")return new ho([l]);if(Array.isArray(l)){for(const A of l)if(typeof A!="number")return;return new ho(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,A,y){return new ho(Yu(l.values,A.values,y))}}class _i{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof _i)return l;if(typeof l=="string"){const y=Ji.parse(l);return y?new _i([y]):void 0}if(!Array.isArray(l))return;const A=[];for(const y of l){if(typeof y!="string")return;const _=Ji.parse(y);if(!_)return;A.push(_)}return new _i(A)}toString(){return JSON.stringify(this.values)}static interpolate(l,A,y,_="rgb"){const E=[];if(l.values.length!=A.values.length)throw new Error(`colorArray: Arrays have mismatched length (${l.values.length} vs. ${A.values.length}), cannot interpolate.`);for(let O=0;O<l.values.length;O++)E.push(Ji.interpolate(l.values[O],A.values[O],y,_));return new _i(E)}}class to extends Error{constructor(l){super(l),this.name="RuntimeError"}toJSON(){return this.message}}const $s=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class go{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof go)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let A=0;A<l.length;A+=2){const y=l[A],_=l[A+1];if(typeof y!="string"||!$s.has(y)||!Array.isArray(_)||_.length!==2||typeof _[0]!="number"||typeof _[1]!="number")return}return new go(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,A,y){const _=l.values,E=A.values;if(_.length!==E.length)throw new to(`Cannot interpolate values of different length. from: ${l.toString()}, to: ${A.toString()}`);const O=[];for(let D=0;D<_.length;D+=2){if(_[D]!==E[D])throw new to(`Cannot interpolate values containing mismatched anchors. from[${D}]: ${_[D]}, to[${D}]: ${E[D]}`);O.push(_[D]);const[F,W]=_[D+1],[ee,ae]=E[D+1];O.push([Zl(F,ee,y),Zl(W,ae,y)])}return new go(O)}}class Fs{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new Fs({name:l,available:!1}):null}}class Yr{constructor(l,A,y){this.from=l,this.to=A,this.transition=y}static interpolate(l,A,y){return new Yr(l,A,y)}static parse(l){return l instanceof Yr?l:Array.isArray(l)&&l.length===3&&typeof l[0]=="string"&&typeof l[1]=="string"&&typeof l[2]=="number"?new Yr(l[0],l[1],l[2]):typeof l=="object"&&typeof l.from=="string"&&typeof l.to=="string"&&typeof l.transition=="number"?new Yr(l.from,l.to,l.transition):typeof l=="string"?new Yr(l,l,1):void 0}}function oa(h,l,A,y){return typeof h=="number"&&h>=0&&h<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof A=="number"&&A>=0&&A<=255?y===void 0||typeof y=="number"&&y>=0&&y<=1?null:`Invalid rgba value [${[h,l,A,y].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof y=="number"?[h,l,A,y]:[h,l,A]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Za(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof Yr||h instanceof Ji||h instanceof Ha||h instanceof Jo||h instanceof Ao||h instanceof ho||h instanceof _i||h instanceof go||h instanceof Fs)return!0;if(Array.isArray(h)){for(const l of h)if(!Za(l))return!1;return!0}if(typeof h=="object"){for(const l in h)if(!Za(h[l]))return!1;return!0}return!1}function $i(h){if(h===null)return oo;if(typeof h=="string")return Xi;if(typeof h=="boolean")return ui;if(typeof h=="number")return kn;if(h instanceof Ji)return Ka;if(h instanceof Yr)return yA;if(h instanceof Ha)return Qu;if(h instanceof Jo)return co;if(h instanceof Ao)return $a;if(h instanceof ho)return Fa;if(h instanceof _i)return Ml;if(h instanceof go)return gc;if(h instanceof Fs)return Ro;if(Array.isArray(h)){const l=h.length;let A;for(const y of h){const _=$i(y);if(A){if(A===_)continue;A=Vi;break}A=_}return Qo(A||Vi,l)}return xl}function Tr(h){const l=typeof h;return h===null?"":l==="string"||l==="number"||l==="boolean"?String(h):h instanceof Ji||h instanceof Yr||h instanceof Jo||h instanceof Ao||h instanceof ho||h instanceof _i||h instanceof go||h instanceof Fs?h.toString():JSON.stringify(h)}class ne{constructor(l,A){this.type=l,this.value=A}static parse(l,A){if(l.length!==2)return A.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!Za(l[1]))return A.error("invalid value");const y=l[1];let _=$i(y);const E=A.expectedType;return _.kind!=="array"||_.N!==0||!E||E.kind!=="array"||typeof E.N=="number"&&E.N!==0||(_=E),new ne(_,y)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Ce={string:Xi,number:kn,boolean:ui,object:xl};class He{constructor(l,A){this.type=l,this.args=A}static parse(l,A){if(l.length<2)return A.error("Expected at least one argument.");let y,_=1;const E=l[0];if(E==="array"){let D,F;if(l.length>2){const W=l[1];if(typeof W!="string"||!(W in Ce)||W==="object")return A.error('The item type argument of "array" must be one of string, number, boolean',1);D=Ce[W],_++}else D=Vi;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return A.error('The length argument to "array" must be a positive integer literal',2);F=l[2],_++}y=Qo(D,F)}else{if(!Ce[E])throw new Error(`Types doesn't contain name = ${E}`);y=Ce[E]}const O=[];for(;_<l.length;_++){const D=A.parse(l[_],_,Vi);if(!D)return null;O.push(D)}return new He(y,O)}evaluate(l){for(let A=0;A<this.args.length;A++){const y=this.args[A].evaluate(l);if(!Zo(this.type,$i(y)))return y;if(A===this.args.length-1)throw new to(`Expected value to be of type ${mr(this.type)}, but found ${mr($i(y))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}const Et={"to-boolean":ui,"to-color":Ka,"to-number":kn,"to-string":Xi};class Qn{constructor(l,A){this.type=l,this.args=A}static parse(l,A){if(l.length<2)return A.error("Expected at least one argument.");const y=l[0];if(!Et[y])throw new Error(`Can't parse ${y} as it is not part of the known types`);if((y==="to-boolean"||y==="to-string")&&l.length!==2)return A.error("Expected one argument.");const _=Et[y],E=[];for(let O=1;O<l.length;O++){const D=A.parse(l[O],O,Vi);if(!D)return null;E.push(D)}return new Qn(_,E)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let A,y;for(const _ of this.args){if(A=_.evaluate(l),y=null,A instanceof Ji)return A;if(typeof A=="string"){const E=l.parseColor(A);if(E)return E}else if(Array.isArray(A)&&(y=A.length<3||A.length>4?`Invalid rgba value ${JSON.stringify(A)}: expected an array containing either three or four numeric values.`:oa(A[0],A[1],A[2],A[3]),!y))return new Ji(A[0]/255,A[1]/255,A[2]/255,A[3])}throw new to(y||`Could not parse color from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"padding":{let A;for(const y of this.args){A=y.evaluate(l);const _=Ao.parse(A);if(_)return _}throw new to(`Could not parse padding from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"numberArray":{let A;for(const y of this.args){A=y.evaluate(l);const _=ho.parse(A);if(_)return _}throw new to(`Could not parse numberArray from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"colorArray":{let A;for(const y of this.args){A=y.evaluate(l);const _=_i.parse(A);if(_)return _}throw new to(`Could not parse colorArray from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"variableAnchorOffsetCollection":{let A;for(const y of this.args){A=y.evaluate(l);const _=go.parse(A);if(_)return _}throw new to(`Could not parse variableAnchorOffsetCollection from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"number":{let A=null;for(const y of this.args){if(A=y.evaluate(l),A===null)return 0;const _=Number(A);if(!isNaN(_))return _}throw new to(`Could not convert ${JSON.stringify(A)} to number.`)}case"formatted":return Jo.fromString(Tr(this.args[0].evaluate(l)));case"resolvedImage":return Fs.fromString(Tr(this.args[0].evaluate(l)));case"projectionDefinition":return this.args[0].evaluate(l);default:return Tr(this.args[0].evaluate(l))}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}const Dn=["Unknown","Point","LineString","Polygon"];class Oi{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Dn[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let A=this._parseColorCache.get(l);return A||(A=Ji.parse(l),this._parseColorCache.set(l,A)),A}}class Fi{constructor(l,A,y=[],_,E=new ra,O=[]){this.registry=l,this.path=y,this.key=y.map((D=>`[${D}]`)).join(""),this.scope=E,this.errors=O,this.expectedType=_,this._isConstant=A}parse(l,A,y,_,E={}){return A?this.concat(A,y,_)._parse(l,E):this._parse(l,E)}_parse(l,A){function y(_,E,O){return O==="assert"?new He(E,[_]):O==="coerce"?new Qn(E,[_]):_}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const _=l[0];if(typeof _!="string")return this.error(`Expression name must be a string, but found ${typeof _} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const E=this.registry[_];if(E){let O=E.parse(l,this);if(!O)return null;if(this.expectedType){const D=this.expectedType,F=O.type;if(D.kind!=="string"&&D.kind!=="number"&&D.kind!=="boolean"&&D.kind!=="object"&&D.kind!=="array"||F.kind!=="value"){if(D.kind==="projectionDefinition"&&["string","array"].includes(F.kind)||["color","formatted","resolvedImage"].includes(D.kind)&&["value","string"].includes(F.kind)||["padding","numberArray"].includes(D.kind)&&["value","number","array"].includes(F.kind)||D.kind==="colorArray"&&["value","string","array"].includes(F.kind)||D.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(F.kind))O=y(O,D,A.typeAnnotation||"coerce");else if(this.checkSubtype(D,F))return null}else O=y(O,D,A.typeAnnotation||"assert")}if(!(O instanceof ne)&&O.type.kind!=="resolvedImage"&&this._isConstant(O)){const D=new Oi;try{O=new ne(O.type,O.evaluate(D))}catch(F){return this.error(F.message),null}}return O}return this.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof l} instead.`)}concat(l,A,y){const _=typeof l=="number"?this.path.concat(l):this.path,E=y?this.scope.concat(y):this.scope;return new Fi(this.registry,this._isConstant,_,A||null,E,this.errors)}error(l,...A){const y=`${this.key}${A.map((_=>`[${_}]`)).join("")}`;this.errors.push(new Wo(y,l))}checkSubtype(l,A){const y=Zo(l,A);return y&&this.error(y),y}}class qn{constructor(l,A){this.type=A.type,this.bindings=[].concat(l),this.result=A}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(const A of this.bindings)l(A[1]);l(this.result)}static parse(l,A){if(l.length<4)return A.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);const y=[];for(let E=1;E<l.length-1;E+=2){const O=l[E];if(typeof O!="string")return A.error(`Expected string, but found ${typeof O} instead.`,E);if(/[^a-zA-Z0-9_]/.test(O))return A.error("Variable names must contain only alphanumeric characters or '_'.",E);const D=A.parse(l[E+1],E+1);if(!D)return null;y.push([O,D])}const _=A.parse(l[l.length-1],l.length-1,A.expectedType,y);return _?new qn(y,_):null}outputDefined(){return this.result.outputDefined()}}class Ei{constructor(l,A){this.type=A.type,this.name=l,this.boundExpression=A}static parse(l,A){if(l.length!==2||typeof l[1]!="string")return A.error("'var' expression requires exactly one string literal argument.");const y=l[1];return A.scope.has(y)?new Ei(y,A.scope.get(y)):A.error(`Unknown variable "${y}". Make sure "${y}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class ei{constructor(l,A,y){this.type=l,this.index=A,this.input=y}static parse(l,A){if(l.length!==3)return A.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const y=A.parse(l[1],1,kn),_=A.parse(l[2],2,Qo(A.expectedType||Vi));return y&&_?new ei(_.type.itemType,y,_):null}evaluate(l){const A=this.index.evaluate(l),y=this.input.evaluate(l);if(A<0)throw new to(`Array index out of bounds: ${A} < 0.`);if(A>=y.length)throw new to(`Array index out of bounds: ${A} > ${y.length-1}.`);if(A!==Math.floor(A))throw new to(`Array index must be an integer, but found ${A} instead.`);return y[A]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class ri{constructor(l,A){this.type=ui,this.needle=l,this.haystack=A}static parse(l,A){if(l.length!==3)return A.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const y=A.parse(l[1],1,Vi),_=A.parse(l[2],2,Vi);return y&&_?bu(y.type,[ui,Xi,kn,oo,Vi])?new ri(y,_):A.error(`Expected first argument to be of type boolean, string, number or null, but found ${mr(y.type)} instead`):null}evaluate(l){const A=this.needle.evaluate(l),y=this.haystack.evaluate(l);if(!y)return!1;if(!Cu(A,["boolean","string","number","null"]))throw new to(`Expected first argument to be of type boolean, string, number or null, but found ${mr($i(A))} instead.`);if(!Cu(y,["string","array"]))throw new to(`Expected second argument to be of type array or string, but found ${mr($i(y))} instead.`);return y.indexOf(A)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class hr{constructor(l,A,y){this.type=kn,this.needle=l,this.haystack=A,this.fromIndex=y}static parse(l,A){if(l.length<=2||l.length>=5)return A.error(`Expected 2 or 3 arguments, but found ${l.length-1} instead.`);const y=A.parse(l[1],1,Vi),_=A.parse(l[2],2,Vi);if(!y||!_)return null;if(!bu(y.type,[ui,Xi,kn,oo,Vi]))return A.error(`Expected first argument to be of type boolean, string, number or null, but found ${mr(y.type)} instead`);if(l.length===4){const E=A.parse(l[3],3,kn);return E?new hr(y,_,E):null}return new hr(y,_)}evaluate(l){const A=this.needle.evaluate(l),y=this.haystack.evaluate(l);if(!Cu(A,["boolean","string","number","null"]))throw new to(`Expected first argument to be of type boolean, string, number or null, but found ${mr($i(A))} instead.`);let _;if(this.fromIndex&&(_=this.fromIndex.evaluate(l)),Cu(y,["string"])){const E=y.indexOf(A,_);return E===-1?-1:[...y.slice(0,E)].length}if(Cu(y,["array"]))return y.indexOf(A,_);throw new to(`Expected second argument to be of type array or string, but found ${mr($i(y))} instead.`)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class ni{constructor(l,A,y,_,E,O){this.inputType=l,this.type=A,this.input=y,this.cases=_,this.outputs=E,this.otherwise=O}static parse(l,A){if(l.length<5)return A.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return A.error("Expected an even number of arguments.");let y,_;A.expectedType&&A.expectedType.kind!=="value"&&(_=A.expectedType);const E={},O=[];for(let W=2;W<l.length-1;W+=2){let ee=l[W];const ae=l[W+1];Array.isArray(ee)||(ee=[ee]);const Ae=A.concat(W);if(ee.length===0)return Ae.error("Expected at least one branch label.");for(const be of ee){if(typeof be!="number"&&typeof be!="string")return Ae.error("Branch labels must be numbers or strings.");if(typeof be=="number"&&Math.abs(be)>Number.MAX_SAFE_INTEGER)return Ae.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof be=="number"&&Math.floor(be)!==be)return Ae.error("Numeric branch labels must be integer values.");if(y){if(Ae.checkSubtype(y,$i(be)))return null}else y=$i(be);if(E[String(be)]!==void 0)return Ae.error("Branch labels must be unique.");E[String(be)]=O.length}const fe=A.parse(ae,W,_);if(!fe)return null;_=_||fe.type,O.push(fe)}const D=A.parse(l[1],1,Vi);if(!D)return null;const F=A.parse(l[l.length-1],l.length-1,_);return F?D.type.kind!=="value"&&A.concat(1).checkSubtype(y,D.type)?null:new ni(y,_,D,E,O,F):null}evaluate(l){const A=this.input.evaluate(l);return($i(A)===this.inputType&&this.outputs[this.cases[A]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))&&this.otherwise.outputDefined()}}class Kr{constructor(l,A,y){this.type=l,this.branches=A,this.otherwise=y}static parse(l,A){if(l.length<4)return A.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return A.error("Expected an odd number of arguments.");let y;A.expectedType&&A.expectedType.kind!=="value"&&(y=A.expectedType);const _=[];for(let O=1;O<l.length-1;O+=2){const D=A.parse(l[O],O,ui);if(!D)return null;const F=A.parse(l[O+1],O+1,y);if(!F)return null;_.push([D,F]),y=y||F.type}const E=A.parse(l[l.length-1],l.length-1,y);if(!E)return null;if(!y)throw new Error("Can't infer output type");return new Kr(y,_,E)}evaluate(l){for(const[A,y]of this.branches)if(A.evaluate(l))return y.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(const[A,y]of this.branches)l(A),l(y);l(this.otherwise)}outputDefined(){return this.branches.every((([l,A])=>A.outputDefined()))&&this.otherwise.outputDefined()}}class wo{constructor(l,A,y,_){this.type=l,this.input=A,this.beginIndex=y,this.endIndex=_}static parse(l,A){if(l.length<=2||l.length>=5)return A.error(`Expected 2 or 3 arguments, but found ${l.length-1} instead.`);const y=A.parse(l[1],1,Vi),_=A.parse(l[2],2,kn);if(!y||!_)return null;if(!bu(y.type,[Qo(Vi),Xi,Vi]))return A.error(`Expected first argument to be of type array or string, but found ${mr(y.type)} instead`);if(l.length===4){const E=A.parse(l[3],3,kn);return E?new wo(y.type,y,_,E):null}return new wo(y.type,y,_)}evaluate(l){const A=this.input.evaluate(l),y=this.beginIndex.evaluate(l);let _;if(this.endIndex&&(_=this.endIndex.evaluate(l)),Cu(A,["string"]))return[...A].slice(y,_).join("");if(Cu(A,["array"]))return A.slice(y,_);throw new to(`Expected first argument to be of type array or string, but found ${mr($i(A))} instead.`)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function Po(h,l){const A=h.length-1;let y,_,E=0,O=A,D=0;for(;E<=O;)if(D=Math.floor((E+O)/2),y=h[D],_=h[D+1],y<=l){if(D===A||l<_)return D;E=D+1}else{if(!(y>l))throw new to("Input is not a number.");O=D-1}return 0}class ds{constructor(l,A,y){this.type=l,this.input=A,this.labels=[],this.outputs=[];for(const[_,E]of y)this.labels.push(_),this.outputs.push(E)}static parse(l,A){if(l.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return A.error("Expected an even number of arguments.");const y=A.parse(l[1],1,kn);if(!y)return null;const _=[];let E=null;A.expectedType&&A.expectedType.kind!=="value"&&(E=A.expectedType);for(let O=1;O<l.length;O+=2){const D=O===1?-1/0:l[O],F=l[O+1],W=O,ee=O+1;if(typeof D!="number")return A.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(_.length&&_[_.length-1][0]>=D)return A.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',W);const ae=A.parse(F,ee,E);if(!ae)return null;E=E||ae.type,_.push([D,ae])}return new ds(E,y,_)}evaluate(l){const A=this.labels,y=this.outputs;if(A.length===1)return y[0].evaluate(l);const _=this.input.evaluate(l);if(_<=A[0])return y[0].evaluate(l);const E=A.length;return _>=A[E-1]?y[E-1].evaluate(l):y[Po(A,_)].evaluate(l)}eachChild(l){l(this.input);for(const A of this.outputs)l(A)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))}}function eh(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var El,fs,Nv=(function(){if(fs)return El;function h(l,A,y,_){this.cx=3*l,this.bx=3*(y-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*A,this.by=3*(_-A)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=A,this.p2x=y,this.p2y=_}return fs=1,El=h,h.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,A){if(A===void 0&&(A=1e-6),l<0)return 0;if(l>1)return 1;for(var y=l,_=0;_<8;_++){var E=this.sampleCurveX(y)-l;if(Math.abs(E)<A)return y;var O=this.sampleCurveDerivativeX(y);if(Math.abs(O)<1e-6)break;y-=E/O}var D=0,F=1;for(y=l,_=0;_<20&&(E=this.sampleCurveX(y),!(Math.abs(E-l)<A));_++)l>E?D=y:F=y,y=.5*(F-D)+D;return y},solve:function(l,A){return this.sampleCurveY(this.solveCurveX(l,A))}},El})(),wu=eh(Nv);class Xl{constructor(l,A,y,_,E){this.type=l,this.operator=A,this.interpolation=y,this.input=_,this.labels=[],this.outputs=[];for(const[O,D]of E)this.labels.push(O),this.outputs.push(D)}static interpolationFactor(l,A,y,_){let E=0;if(l.name==="exponential")E=Hc(A,l.base,y,_);else if(l.name==="linear")E=Hc(A,1,y,_);else if(l.name==="cubic-bezier"){const O=l.controlPoints;E=new wu(O[0],O[1],O[2],O[3]).solve(Hc(A,1,y,_))}return E}static parse(l,A){let[y,_,E,...O]=l;if(!Array.isArray(_)||_.length===0)return A.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){const W=_[1];if(typeof W!="number")return A.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:W}}else{if(_[0]!=="cubic-bezier")return A.error(`Unknown interpolation type ${String(_[0])}`,1,0);{const W=_.slice(1);if(W.length!==4||W.some((ee=>typeof ee!="number"||ee<0||ee>1)))return A.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:W}}}if(l.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return A.error("Expected an even number of arguments.");if(E=A.parse(E,2,kn),!E)return null;const D=[];let F=null;y!=="interpolate-hcl"&&y!=="interpolate-lab"||A.expectedType==Ml?A.expectedType&&A.expectedType.kind!=="value"&&(F=A.expectedType):F=Ka;for(let W=0;W<O.length;W+=2){const ee=O[W],ae=O[W+1],Ae=W+3,fe=W+4;if(typeof ee!="number")return A.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ae);if(D.length&&D[D.length-1][0]>=ee)return A.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ae);const be=A.parse(ae,fe,F);if(!be)return null;F=F||be.type,D.push([ee,be])}return ul(F,kn)||ul(F,yA)||ul(F,Ka)||ul(F,$a)||ul(F,Fa)||ul(F,Ml)||ul(F,gc)||ul(F,Qo(kn))?new Xl(F,y,_,E,D):A.error(`Type ${mr(F)} is not interpolatable.`)}evaluate(l){const A=this.labels,y=this.outputs;if(A.length===1)return y[0].evaluate(l);const _=this.input.evaluate(l);if(_<=A[0])return y[0].evaluate(l);const E=A.length;if(_>=A[E-1])return y[E-1].evaluate(l);const O=Po(A,_),D=Xl.interpolationFactor(this.interpolation,_,A[O],A[O+1]),F=y[O].evaluate(l),W=y[O+1].evaluate(l);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Zl(F,W,D);case"color":return Ji.interpolate(F,W,D);case"padding":return Ao.interpolate(F,W,D);case"colorArray":return _i.interpolate(F,W,D);case"numberArray":return ho.interpolate(F,W,D);case"variableAnchorOffsetCollection":return go.interpolate(F,W,D);case"array":return Yu(F,W,D);case"projectionDefinition":return Yr.interpolate(F,W,D)}case"interpolate-hcl":switch(this.type.kind){case"color":return Ji.interpolate(F,W,D,"hcl");case"colorArray":return _i.interpolate(F,W,D,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Ji.interpolate(F,W,D,"lab");case"colorArray":return _i.interpolate(F,W,D,"lab")}}}eachChild(l){l(this.input);for(const A of this.outputs)l(A)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))}}function Hc(h,l,A,y){const _=y-A,E=h-A;return _===0?0:l===1?E/_:(Math.pow(l,E)-1)/(Math.pow(l,_)-1)}const yo={color:Ji.interpolate,number:Zl,padding:Ao.interpolate,numberArray:ho.interpolate,colorArray:_i.interpolate,variableAnchorOffsetCollection:go.interpolate,array:Yu};class vA{constructor(l,A){this.type=l,this.args=A}static parse(l,A){if(l.length<2)return A.error("Expected at least one argument.");let y=null;const _=A.expectedType;_&&_.kind!=="value"&&(y=_);const E=[];for(const D of l.slice(1)){const F=A.parse(D,1+E.length,y,void 0,{typeAnnotation:"omit"});if(!F)return null;y=y||F.type,E.push(F)}if(!y)throw new Error("No output type");const O=_&&E.some((D=>Zo(_,D.type)));return new vA(O?Vi:y,E)}evaluate(l){let A,y=null,_=0;for(const E of this.args)if(_++,y=E.evaluate(l),y&&y instanceof Fs&&!y.available&&(A||(A=y.name),y=null,_===this.args.length&&(y=A)),y!==null)break;return y}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}function Pd(h,l){return h==="=="||h==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function qo(h,l,A,y){return y.compare(l,A)===0}function Eo(h,l,A){const y=h!=="=="&&h!=="!=";return class PX{constructor(E,O,D){this.type=ui,this.lhs=E,this.rhs=O,this.collator=D,this.hasUntypedArgument=E.type.kind==="value"||O.type.kind==="value"}static parse(E,O){if(E.length!==3&&E.length!==4)return O.error("Expected two or three arguments.");const D=E[0];let F=O.parse(E[1],1,Vi);if(!F)return null;if(!Pd(D,F.type))return O.concat(1).error(`"${D}" comparisons are not supported for type '${mr(F.type)}'.`);let W=O.parse(E[2],2,Vi);if(!W)return null;if(!Pd(D,W.type))return O.concat(2).error(`"${D}" comparisons are not supported for type '${mr(W.type)}'.`);if(F.type.kind!==W.type.kind&&F.type.kind!=="value"&&W.type.kind!=="value")return O.error(`Cannot compare types '${mr(F.type)}' and '${mr(W.type)}'.`);y&&(F.type.kind==="value"&&W.type.kind!=="value"?F=new He(W.type,[F]):F.type.kind!=="value"&&W.type.kind==="value"&&(W=new He(F.type,[W])));let ee=null;if(E.length===4){if(F.type.kind!=="string"&&W.type.kind!=="string"&&F.type.kind!=="value"&&W.type.kind!=="value")return O.error("Cannot use collator to compare non-string types.");if(ee=O.parse(E[3],3,Qu),!ee)return null}return new PX(F,W,ee)}evaluate(E){const O=this.lhs.evaluate(E),D=this.rhs.evaluate(E);if(y&&this.hasUntypedArgument){const F=$i(O),W=$i(D);if(F.kind!==W.kind||F.kind!=="string"&&F.kind!=="number")throw new to(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${F.kind}, ${W.kind}) instead.`)}if(this.collator&&!y&&this.hasUntypedArgument){const F=$i(O),W=$i(D);if(F.kind!=="string"||W.kind!=="string")return l(E,O,D)}return this.collator?A(E,O,D,this.collator.evaluate(E)):l(E,O,D)}eachChild(E){E(this.lhs),E(this.rhs),this.collator&&E(this.collator)}outputDefined(){return!0}}}const $m=Eo("==",(function(h,l,A){return l===A}),qo),Hm=Eo("!=",(function(h,l,A){return l!==A}),(function(h,l,A,y){return!qo(0,l,A,y)})),Zm=Eo("<",(function(h,l,A){return l<A}),(function(h,l,A,y){return y.compare(l,A)<0})),Gv=Eo(">",(function(h,l,A){return l>A}),(function(h,l,A,y){return y.compare(l,A)>0})),Sf=Eo("<=",(function(h,l,A){return l<=A}),(function(h,l,A,y){return y.compare(l,A)<=0})),Xm=Eo(">=",(function(h,l,A){return l>=A}),(function(h,l,A,y){return y.compare(l,A)>=0}));class Ld{constructor(l,A,y){this.type=Qu,this.locale=y,this.caseSensitive=l,this.diacriticSensitive=A}static parse(l,A){if(l.length!==2)return A.error("Expected one argument.");const y=l[1];if(typeof y!="object"||Array.isArray(y))return A.error("Collator options argument must be an object.");const _=A.parse(y["case-sensitive"]!==void 0&&y["case-sensitive"],1,ui);if(!_)return null;const E=A.parse(y["diacritic-sensitive"]!==void 0&&y["diacritic-sensitive"],1,ui);if(!E)return null;let O=null;return y.locale&&(O=A.parse(y.locale,1,Xi),!O)?null:new Ld(_,E,O)}evaluate(l){return new Ha(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}class Ef{constructor(l,A,y,_,E){this.type=Xi,this.number=l,this.locale=A,this.currency=y,this.minFractionDigits=_,this.maxFractionDigits=E}static parse(l,A){if(l.length!==3)return A.error("Expected two arguments.");const y=A.parse(l[1],1,kn);if(!y)return null;const _=l[2];if(typeof _!="object"||Array.isArray(_))return A.error("NumberFormat options argument must be an object.");let E=null;if(_.locale&&(E=A.parse(_.locale,1,Xi),!E))return null;let O=null;if(_.currency&&(O=A.parse(_.currency,1,Xi),!O))return null;let D=null;if(_["min-fraction-digits"]&&(D=A.parse(_["min-fraction-digits"],1,kn),!D))return null;let F=null;return _["max-fraction-digits"]&&(F=A.parse(_["max-fraction-digits"],1,kn),!F)?null:new Ef(y,E,O,D,F)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class bA{constructor(l){this.type=co,this.sections=l}static parse(l,A){if(l.length<2)return A.error("Expected at least one argument.");const y=l[1];if(!Array.isArray(y)&&typeof y=="object")return A.error("First argument must be an image or text section.");const _=[];let E=!1;for(let O=1;O<=l.length-1;++O){const D=l[O];if(E&&typeof D=="object"&&!Array.isArray(D)){E=!1;let F=null;if(D["font-scale"]&&(F=A.parse(D["font-scale"],1,kn),!F))return null;let W=null;if(D["text-font"]&&(W=A.parse(D["text-font"],1,Qo(Xi)),!W))return null;let ee=null;if(D["text-color"]&&(ee=A.parse(D["text-color"],1,Ka),!ee))return null;let ae=null;if(D["vertical-align"]){if(typeof D["vertical-align"]=="string"&&!Xo.includes(D["vertical-align"]))return A.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${D["vertical-align"]}' instead.`);if(ae=A.parse(D["vertical-align"],1,Xi),!ae)return null}const Ae=_[_.length-1];Ae.scale=F,Ae.font=W,Ae.textColor=ee,Ae.verticalAlign=ae}else{const F=A.parse(l[O],1,Vi);if(!F)return null;const W=F.type.kind;if(W!=="string"&&W!=="value"&&W!=="null"&&W!=="resolvedImage")return A.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");E=!0,_.push({content:F,scale:null,font:null,textColor:null,verticalAlign:null})}}return new bA(_)}evaluate(l){return new Jo(this.sections.map((A=>{const y=A.content.evaluate(l);return $i(y)===Ro?new Vu("",y,null,null,null,A.verticalAlign?A.verticalAlign.evaluate(l):null):new Vu(Tr(y),null,A.scale?A.scale.evaluate(l):null,A.font?A.font.evaluate(l).join(","):null,A.textColor?A.textColor.evaluate(l):null,A.verticalAlign?A.verticalAlign.evaluate(l):null)})))}eachChild(l){for(const A of this.sections)l(A.content),A.scale&&l(A.scale),A.font&&l(A.font),A.textColor&&l(A.textColor),A.verticalAlign&&l(A.verticalAlign)}outputDefined(){return!1}}class Bf{constructor(l){this.type=Ro,this.input=l}static parse(l,A){if(l.length!==2)return A.error("Expected two arguments.");const y=A.parse(l[1],1,Xi);return y?new Bf(y):A.error("No image name provided.")}evaluate(l){const A=this.input.evaluate(l),y=Fs.fromString(A);return y&&l.availableImages&&(y.available=l.availableImages.indexOf(A)>-1),y}eachChild(l){l(this.input)}outputDefined(){return!1}}class Ud{constructor(l){this.type=kn,this.input=l}static parse(l,A){if(l.length!==2)return A.error(`Expected 1 argument, but found ${l.length-1} instead.`);const y=A.parse(l[1],1);return y?y.type.kind!=="array"&&y.type.kind!=="string"&&y.type.kind!=="value"?A.error(`Expected argument of type string or array, but found ${mr(y.type)} instead.`):new Ud(y):null}evaluate(l){const A=this.input.evaluate(l);if(typeof A=="string")return[...A].length;if(Array.isArray(A))return A.length;throw new to(`Expected value to be of type string or array, but found ${mr($i(A))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}const zs=8192;function Ph(h,l){const A=(180+h[0])/360,y=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,_=Math.pow(2,l.z);return[Math.round(A*_*zs),Math.round(y*_*zs)]}function Lh(h,l){const A=Math.pow(2,l.z);return[(_=(h[0]/zs+l.x)/A,360*_-180),(y=(h[1]/zs+l.y)/A,360/Math.PI*Math.atan(Math.exp((180-360*y)*Math.PI/180))-90)];var y,_}function Kd(h,l){h[0]=Math.min(h[0],l[0]),h[1]=Math.min(h[1],l[1]),h[2]=Math.max(h[2],l[0]),h[3]=Math.max(h[3],l[1])}function Uh(h,l){return!(h[0]<=l[0]||h[2]>=l[2]||h[1]<=l[1]||h[3]>=l[3])}function Jm(h,l,A){const y=h[0]-l[0],_=h[1]-l[1],E=h[0]-A[0],O=h[1]-A[1];return y*O-E*_==0&&y*E<=0&&_*O<=0}function Fd(h,l,A,y){return(_=[y[0]-A[0],y[1]-A[1]])[0]*(E=[l[0]-h[0],l[1]-h[1]])[1]-_[1]*E[0]!=0&&!(!Ip(h,l,A,y)||!Ip(A,y,h,l));var _,E}function $1(h,l,A){for(const y of A)for(let _=0;_<y.length-1;++_)if(Fd(h,l,y[_],y[_+1]))return!0;return!1}function bc(h,l,A=!1){let y=!1;for(const D of l)for(let F=0;F<D.length-1;F++){if(Jm(h,D[F],D[F+1]))return A;(E=D[F])[1]>(_=h)[1]!=(O=D[F+1])[1]>_[1]&&_[0]<(O[0]-E[0])*(_[1]-E[1])/(O[1]-E[1])+E[0]&&(y=!y)}var _,E,O;return y}function Bl(h,l){for(const A of l)if(bc(h,A))return!0;return!1}function e0(h,l){for(const A of h)if(!bc(A,l))return!1;for(let A=0;A<h.length-1;++A)if($1(h[A],h[A+1],l))return!1;return!0}function Of(h,l){for(const A of l)if(e0(h,A))return!0;return!1}function Ip(h,l,A,y){const _=y[0]-A[0],E=y[1]-A[1],O=(h[0]-A[0])*E-_*(h[1]-A[1]),D=(l[0]-A[0])*E-_*(l[1]-A[1]);return O>0&&D<0||O<0&&D>0}function Tp(h,l,A){const y=[];for(let _=0;_<h.length;_++){const E=[];for(let O=0;O<h[_].length;O++){const D=Ph(h[_][O],A);Kd(l,D),E.push(D)}y.push(E)}return y}function zd(h,l,A){const y=[];for(let _=0;_<h.length;_++){const E=Tp(h[_],l,A);y.push(E)}return y}function If(h,l,A,y){if(h[0]<A[0]||h[0]>A[2]){const _=.5*y;let E=h[0]-A[0]>_?-y:A[0]-h[0]>_?y:0;E===0&&(E=h[0]-A[2]>_?-y:A[2]-h[0]>_?y:0),h[0]+=E}Kd(l,h)}function H1(h,l,A,y){const _=Math.pow(2,y.z)*zs,E=[y.x*zs,y.y*zs],O=[];for(const D of h)for(const F of D){const W=[F.x+E[0],F.y+E[1]];If(W,l,A,_),O.push(W)}return O}function kp(h,l,A,y){const _=Math.pow(2,y.z)*zs,E=[y.x*zs,y.y*zs],O=[];for(const F of h){const W=[];for(const ee of F){const ae=[ee.x+E[0],ee.y+E[1]];Kd(l,ae),W.push(ae)}O.push(W)}if(l[2]-l[0]<=_/2){(D=l)[0]=D[1]=1/0,D[2]=D[3]=-1/0;for(const F of O)for(const W of F)If(W,l,A,_)}var D;return O}class Kh{constructor(l,A){this.type=ui,this.geojson=l,this.geometries=A}static parse(l,A){if(l.length!==2)return A.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Za(l[1])){const y=l[1];if(y.type==="FeatureCollection"){const _=[];for(const E of y.features){const{type:O,coordinates:D}=E.geometry;O==="Polygon"&&_.push(D),O==="MultiPolygon"&&_.push(...D)}if(_.length)return new Kh(y,{type:"MultiPolygon",coordinates:_})}else if(y.type==="Feature"){const _=y.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new Kh(y,y.geometry)}else if(y.type==="Polygon"||y.type==="MultiPolygon")return new Kh(y,y)}return A.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return(function(A,y){const _=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],O=A.canonicalID();if(y.type==="Polygon"){const D=Tp(y.coordinates,E,O),F=H1(A.geometry(),_,E,O);if(!Uh(_,E))return!1;for(const W of F)if(!bc(W,D))return!1}if(y.type==="MultiPolygon"){const D=zd(y.coordinates,E,O),F=H1(A.geometry(),_,E,O);if(!Uh(_,E))return!1;for(const W of F)if(!Bl(W,D))return!1}return!0})(l,this.geometries);if(l.geometryType()==="LineString")return(function(A,y){const _=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],O=A.canonicalID();if(y.type==="Polygon"){const D=Tp(y.coordinates,E,O),F=kp(A.geometry(),_,E,O);if(!Uh(_,E))return!1;for(const W of F)if(!e0(W,D))return!1}if(y.type==="MultiPolygon"){const D=zd(y.coordinates,E,O),F=kp(A.geometry(),_,E,O);if(!Uh(_,E))return!1;for(const W of F)if(!Of(W,D))return!1}return!0})(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Fh=class{constructor(h=[],l=(A,y)=>A<y?-1:A>y?1:0){if(this.data=h,this.length=this.data.length,this.compare=l,this.length>0)for(let A=(this.length>>1)-1;A>=0;A--)this._down(A)}push(h){this.data.push(h),this._up(this.length++)}pop(){if(this.length===0)return;const h=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),h}peek(){return this.data[0]}_up(h){const{data:l,compare:A}=this,y=l[h];for(;h>0;){const _=h-1>>1,E=l[_];if(A(y,E)>=0)break;l[h]=E,h=_}l[h]=y}_down(h){const{data:l,compare:A}=this,y=this.length>>1,_=l[h];for(;h<y;){let E=1+(h<<1);const O=E+1;if(O<this.length&&A(l[O],l[E])<0&&(E=O),A(l[E],_)>=0)break;l[h]=l[E],h=E}l[h]=_}};function Dp(h,l,A=0,y=h.length-1,_=Rp){for(;y>A;){if(y-A>600){const F=y-A+1,W=l-A+1,ee=Math.log(F),ae=.5*Math.exp(2*ee/3),Ae=.5*Math.sqrt(ee*ae*(F-ae)/F)*(W-F/2<0?-1:1);Dp(h,l,Math.max(A,Math.floor(l-W*ae/F+Ae)),Math.min(y,Math.floor(l+(F-W)*ae/F+Ae)),_)}const E=h[l];let O=A,D=y;for(zh(h,A,l),_(h[y],E)>0&&zh(h,A,y);O<D;){for(zh(h,O,D),O++,D--;_(h[O],E)<0;)O++;for(;_(h[D],E)>0;)D--}_(h[A],E)===0?zh(h,A,D):(D++,zh(h,D,y)),D<=l&&(A=D+1),l<=D&&(y=D-1)}}function zh(h,l,A){const y=h[l];h[l]=h[A],h[A]=y}function Rp(h,l){return h<l?-1:h>l?1:0}function Tf(h,l){if(h.length<=1)return[h];const A=[];let y,_;for(const E of h){const O=t0(E);O!==0&&(E.area=Math.abs(O),_===void 0&&(_=O<0),_===O<0?(y&&A.push(y),y=[E]):y.push(E))}if(y&&A.push(y),l>1)for(let E=0;E<A.length;E++)A[E].length<=l||(Dp(A[E],l,1,A[E].length-1,th),A[E]=A[E].slice(0,l));return A}function th(h,l){return l.area-h.area}function t0(h){let l=0;for(let A,y,_=0,E=h.length,O=E-1;_<E;O=_++)A=h[_],y=h[O],l+=(y.x-A.x)*(A.y+y.y);return l}const Z1=1/298.257223563,Pp=Z1*(2-Z1),X1=Math.PI/180;class jh{constructor(l){const A=6378.137*X1*1e3,y=Math.cos(l*X1),_=1/(1-Pp*(1-y*y)),E=Math.sqrt(_);this.kx=A*E*y,this.ky=A*E*_*(1-Pp)}distance(l,A){const y=this.wrap(l[0]-A[0])*this.kx,_=(l[1]-A[1])*this.ky;return Math.sqrt(y*y+_*_)}pointOnLine(l,A){let y,_,E,O,D=1/0;for(let F=0;F<l.length-1;F++){let W=l[F][0],ee=l[F][1],ae=this.wrap(l[F+1][0]-W)*this.kx,Ae=(l[F+1][1]-ee)*this.ky,fe=0;ae===0&&Ae===0||(fe=(this.wrap(A[0]-W)*this.kx*ae+(A[1]-ee)*this.ky*Ae)/(ae*ae+Ae*Ae),fe>1?(W=l[F+1][0],ee=l[F+1][1]):fe>0&&(W+=ae/this.kx*fe,ee+=Ae/this.ky*fe)),ae=this.wrap(A[0]-W)*this.kx,Ae=(A[1]-ee)*this.ky;const be=ae*ae+Ae*Ae;be<D&&(D=be,y=W,_=ee,E=F,O=fe)}return{point:[y,_],index:E,t:Math.max(0,Math.min(1,O))}}wrap(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}}function Bs(h,l){return l[0]-h[0]}function nh(h){return h[1]-h[0]+1}function Cc(h,l){return h[1]>=h[0]&&h[1]<l}function Lp(h,l){if(h[0]>h[1])return[null,null];const A=nh(h);if(l){if(A===2)return[h,null];const _=Math.floor(A/2);return[[h[0],h[0]+_],[h[0]+_,h[1]]]}if(A===1)return[h,null];const y=Math.floor(A/2)-1;return[[h[0],h[0]+y],[h[0]+y+1,h[1]]]}function n0(h,l){if(!Cc(l,h.length))return[1/0,1/0,-1/0,-1/0];const A=[1/0,1/0,-1/0,-1/0];for(let y=l[0];y<=l[1];++y)Kd(A,h[y]);return A}function i0(h){const l=[1/0,1/0,-1/0,-1/0];for(const A of h)for(const y of A)Kd(l,y);return l}function Up(h){return h[0]!==-1/0&&h[1]!==-1/0&&h[2]!==1/0&&h[3]!==1/0}function ih(h,l,A){if(!Up(h)||!Up(l))return NaN;let y=0,_=0;return h[2]<l[0]&&(y=l[0]-h[2]),h[0]>l[2]&&(y=h[0]-l[2]),h[1]>l[3]&&(_=h[1]-l[3]),h[3]<l[1]&&(_=l[1]-h[3]),A.distance([0,0],[y,_])}function Tt(h,l,A){const y=A.pointOnLine(l,h);return A.distance(h,y.point)}function an(h,l,A,y,_){const E=Math.min(Tt(h,[A,y],_),Tt(l,[A,y],_)),O=Math.min(Tt(A,[h,l],_),Tt(y,[h,l],_));return Math.min(E,O)}function tn(h,l,A,y,_){if(!Cc(l,h.length)||!Cc(y,A.length))return 1/0;let E=1/0;for(let O=l[0];O<l[1];++O){const D=h[O],F=h[O+1];for(let W=y[0];W<y[1];++W){const ee=A[W],ae=A[W+1];if(Fd(D,F,ee,ae))return 0;E=Math.min(E,an(D,F,ee,ae,_))}}return E}function mi(h,l,A,y,_){if(!Cc(l,h.length)||!Cc(y,A.length))return NaN;let E=1/0;for(let O=l[0];O<=l[1];++O)for(let D=y[0];D<=y[1];++D)if(E=Math.min(E,_.distance(h[O],A[D])),E===0)return E;return E}function pr(h,l,A){if(bc(h,l,!0))return 0;let y=1/0;for(const _ of l){const E=_[0],O=_[_.length-1];if(E!==O&&(y=Math.min(y,Tt(h,[O,E],A)),y===0))return y;const D=A.pointOnLine(_,h);if(y=Math.min(y,A.distance(h,D.point)),y===0)return y}return y}function Fr(h,l,A,y){if(!Cc(l,h.length))return NaN;for(let E=l[0];E<=l[1];++E)if(bc(h[E],A,!0))return 0;let _=1/0;for(let E=l[0];E<l[1];++E){const O=h[E],D=h[E+1];for(const F of A)for(let W=0,ee=F.length,ae=ee-1;W<ee;ae=W++){const Ae=F[ae],fe=F[W];if(Fd(O,D,Ae,fe))return 0;_=Math.min(_,an(O,D,Ae,fe,y))}}return _}function ps(h,l){for(const A of h)for(const y of A)if(bc(y,l,!0))return!0;return!1}function Lo(h,l,A,y=1/0){const _=i0(h),E=i0(l);if(y!==1/0&&ih(_,E,A)>=y)return y;if(Uh(_,E)){if(ps(h,l))return 0}else if(ps(l,h))return 0;let O=1/0;for(const D of h)for(let F=0,W=D.length,ee=W-1;F<W;ee=F++){const ae=D[ee],Ae=D[F];for(const fe of l)for(let be=0,we=fe.length,Be=we-1;be<we;Be=be++){const ze=fe[Be],at=fe[be];if(Fd(ae,Ae,ze,at))return 0;O=Math.min(O,an(ae,Ae,ze,at,A))}}return O}function Vr(h,l,A,y,_,E){if(!E)return;const O=ih(n0(y,E),_,A);O<l&&h.push([O,E,[0,0]])}function CA(h,l,A,y,_,E,O){if(!E||!O)return;const D=ih(n0(y,E),n0(_,O),A);D<l&&h.push([D,E,O])}function Ol(h,l,A,y,_=1/0){let E=Math.min(y.distance(h[0],A[0][0]),_);if(E===0)return E;const O=new Fh([[0,[0,h.length-1],[0,0]]],Bs),D=i0(A);for(;O.length>0;){const F=O.pop();if(F[0]>=E)continue;const W=F[1],ee=l?50:100;if(nh(W)<=ee){if(!Cc(W,h.length))return NaN;if(l){const ae=Fr(h,W,A,y);if(isNaN(ae)||ae===0)return ae;E=Math.min(E,ae)}else for(let ae=W[0];ae<=W[1];++ae){const Ae=pr(h[ae],A,y);if(E=Math.min(E,Ae),E===0)return 0}}else{const ae=Lp(W,l);Vr(O,E,y,h,D,ae[0]),Vr(O,E,y,h,D,ae[1])}}return E}function Nh(h,l,A,y,_,E=1/0){let O=Math.min(E,_.distance(h[0],A[0]));if(O===0)return O;const D=new Fh([[0,[0,h.length-1],[0,A.length-1]]],Bs);for(;D.length>0;){const F=D.pop();if(F[0]>=O)continue;const W=F[1],ee=F[2],ae=l?50:100,Ae=y?50:100;if(nh(W)<=ae&&nh(ee)<=Ae){if(!Cc(W,h.length)&&Cc(ee,A.length))return NaN;let fe;if(l&&y)fe=tn(h,W,A,ee,_),O=Math.min(O,fe);else if(l&&!y){const be=h.slice(W[0],W[1]+1);for(let we=ee[0];we<=ee[1];++we)if(fe=Tt(A[we],be,_),O=Math.min(O,fe),O===0)return O}else if(!l&&y){const be=A.slice(ee[0],ee[1]+1);for(let we=W[0];we<=W[1];++we)if(fe=Tt(h[we],be,_),O=Math.min(O,fe),O===0)return O}else fe=mi(h,W,A,ee,_),O=Math.min(O,fe)}else{const fe=Lp(W,l),be=Lp(ee,y);CA(D,O,_,h,A,fe[0],be[0]),CA(D,O,_,h,A,fe[0],be[1]),CA(D,O,_,h,A,fe[1],be[0]),CA(D,O,_,h,A,fe[1],be[1])}}return O}function r0(h){return h.type==="MultiPolygon"?h.coordinates.map((l=>({type:"Polygon",coordinates:l}))):h.type==="MultiLineString"?h.coordinates.map((l=>({type:"LineString",coordinates:l}))):h.type==="MultiPoint"?h.coordinates.map((l=>({type:"Point",coordinates:l}))):[h]}class _c{constructor(l,A){this.type=kn,this.geojson=l,this.geometries=A}static parse(l,A){if(l.length!==2)return A.error(`'distance' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Za(l[1])){const y=l[1];if(y.type==="FeatureCollection")return new _c(y,y.features.map((_=>r0(_.geometry))).flat());if(y.type==="Feature")return new _c(y,r0(y.geometry));if("type"in y&&"coordinates"in y)return new _c(y,r0(y))}return A.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return(function(A,y){const _=A.geometry(),E=_.flat().map((F=>Lh([F.x,F.y],A.canonical)));if(_.length===0)return NaN;const O=new jh(E[0][1]);let D=1/0;for(const F of y){switch(F.type){case"Point":D=Math.min(D,Nh(E,!1,[F.coordinates],!1,O,D));break;case"LineString":D=Math.min(D,Nh(E,!1,F.coordinates,!0,O,D));break;case"Polygon":D=Math.min(D,Ol(E,!1,F.coordinates,O,D))}if(D===0)return D}return D})(l,this.geometries);if(l.geometryType()==="LineString")return(function(A,y){const _=A.geometry(),E=_.flat().map((F=>Lh([F.x,F.y],A.canonical)));if(_.length===0)return NaN;const O=new jh(E[0][1]);let D=1/0;for(const F of y){switch(F.type){case"Point":D=Math.min(D,Nh(E,!0,[F.coordinates],!1,O,D));break;case"LineString":D=Math.min(D,Nh(E,!0,F.coordinates,!0,O,D));break;case"Polygon":D=Math.min(D,Ol(E,!0,F.coordinates,O,D))}if(D===0)return D}return D})(l,this.geometries);if(l.geometryType()==="Polygon")return(function(A,y){const _=A.geometry();if(_.length===0||_[0].length===0)return NaN;const E=Tf(_,0).map((F=>F.map((W=>W.map((ee=>Lh([ee.x,ee.y],A.canonical))))))),O=new jh(E[0][0][0][1]);let D=1/0;for(const F of y)for(const W of E){switch(F.type){case"Point":D=Math.min(D,Ol([F.coordinates],!1,W,O,D));break;case"LineString":D=Math.min(D,Ol(F.coordinates,!0,W,O,D));break;case"Polygon":D=Math.min(D,Lo(W,F.coordinates,O,D))}if(D===0)return D}return D})(l,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Gh{constructor(l){this.type=Vi,this.key=l}static parse(l,A){if(l.length!==2)return A.error(`Expected 1 argument, but found ${l.length-1} instead.`);const y=l[1];return y==null?A.error("Global state property must be defined."):typeof y!="string"?A.error(`Global state property must be string, but found ${typeof l[1]} instead.`):new Gh(y)}evaluate(l){var A;const y=(A=l.globals)===null||A===void 0?void 0:A.globalState;return y&&Object.keys(y).length!==0?hs(y,this.key):null}eachChild(){}outputDefined(){return!1}}const rh={"==":$m,"!=":Hm,">":Gv,"<":Zm,">=":Xm,"<=":Sf,array:He,at:ei,boolean:He,case:Kr,coalesce:vA,collator:Ld,format:bA,image:Bf,in:ri,"index-of":hr,interpolate:Xl,"interpolate-hcl":Xl,"interpolate-lab":Xl,length:Ud,let:qn,literal:ne,match:ni,number:He,"number-format":Ef,object:He,slice:wo,step:ds,string:He,"to-boolean":Qn,"to-color":Qn,"to-number":Qn,"to-string":Qn,var:Ei,within:Kh,distance:_c,"global-state":Gh};class Cr{constructor(l,A,y,_){this.name=l,this.type=A,this._evaluate=y,this.args=_}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,A){const y=l[0],_=Cr.definitions[y];if(!_)return A.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0);const E=Array.isArray(_)?_[0]:_.type,O=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,D=O.filter((([W])=>!Array.isArray(W)||W.length===l.length-1));let F=null;for(const[W,ee]of D){F=new Fi(A.registry,Jl,A.path,null,A.scope);const ae=[];let Ae=!1;for(let fe=1;fe<l.length;fe++){const be=l[fe],we=Array.isArray(W)?W[fe-1]:W.type,Be=F.parse(be,1+ae.length,we);if(!Be){Ae=!0;break}ae.push(Be)}if(!Ae)if(Array.isArray(W)&&W.length!==ae.length)F.error(`Expected ${W.length} arguments, but found ${ae.length} instead.`);else{for(let fe=0;fe<ae.length;fe++){const be=Array.isArray(W)?W[fe]:W.type,we=ae[fe];F.concat(fe+1).checkSubtype(be,we.type)}if(F.errors.length===0)return new Cr(y,E,ee,ae)}}if(D.length===1)A.errors.push(...F.errors);else{const W=(D.length?D:O).map((([ae])=>{return Ae=ae,Array.isArray(Ae)?`(${Ae.map(mr).join(", ")})`:`(${mr(Ae.type)}...)`;var Ae})).join(" | "),ee=[];for(let ae=1;ae<l.length;ae++){const Ae=A.parse(l[ae],1+ee.length);if(!Ae)return null;ee.push(mr(Ae.type))}A.error(`Expected arguments of type ${W}, but found (${ee.join(", ")}) instead.`)}return null}static register(l,A){Cr.definitions=A;for(const y in A)l[y]=Cr}}function kg(h,[l,A,y,_]){l=l.evaluate(h),A=A.evaluate(h),y=y.evaluate(h);const E=_?_.evaluate(h):1,O=oa(l,A,y,E);if(O)throw new to(O);return new Ji(l/255,A/255,y/255,E,!1)}function Kp(h,l){return h in l}function Il(h,l){const A=l[h];return A===void 0?null:A}function _A(h){return{type:h}}function Jl(h){if(h instanceof Ei)return Jl(h.boundExpression);if(h instanceof Cr&&h.name==="error"||h instanceof Ld||h instanceof Kh||h instanceof _c||h instanceof Gh)return!1;const l=h instanceof Qn||h instanceof He;let A=!0;return h.eachChild((y=>{A=l?A&&Jl(y):A&&y instanceof ne})),!!A&&oh(h)&&Su(h,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function oh(h){if(h instanceof Cr&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof Kh||h instanceof _c)return!1;let l=!0;return h.eachChild((A=>{l&&!oh(A)&&(l=!1)})),l}function xA(h){if(h instanceof Cr&&h.name==="feature-state")return!1;let l=!0;return h.eachChild((A=>{l&&!xA(A)&&(l=!1)})),l}function Su(h,l){if(h instanceof Cr&&l.indexOf(h.name)>=0)return!1;let A=!0;return h.eachChild((y=>{A&&!Su(y,l)&&(A=!1)})),A}function Wh(h){return{result:"success",value:h}}function sh(h){return{result:"error",value:h}}function eu(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function o0(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}function jd(h){return!!h.expression&&h.expression.interpolated}function or(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function Fp(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)&&$i(h)===xl}function Al(h){return h}function MA(h,l){const A=h.stops&&typeof h.stops[0][0]=="object",y=A||!(A||h.property!==void 0),_=h.type||(jd(l)?"exponential":"interval"),E=(function(ee){switch(ee.type){case"color":return Ji.parse;case"padding":return Ao.parse;case"numberArray":return ho.parse;case"colorArray":return _i.parse;default:return null}})(l);if(E&&((h=tr({},h)).stops&&(h.stops=h.stops.map((ee=>[ee[0],E(ee[1])]))),h.default=E(h.default?h.default:l.default)),h.colorSpace&&(O=h.colorSpace)!=="rgb"&&O!=="hcl"&&O!=="lab")throw new Error(`Unknown color space: "${h.colorSpace}"`);var O;const D=(function(ee){switch(ee){case"exponential":return Qh;case"interval":return s0;case"categorical":return J1;case"identity":return kf;default:throw new Error(`Unknown function type "${ee}"`)}})(_);let F,W;if(_==="categorical"){F=Object.create(null);for(const ee of h.stops)F[ee[0]]=ee[1];W=typeof h.stops[0][0]}if(A){const ee={},ae=[];for(let be=0;be<h.stops.length;be++){const we=h.stops[be],Be=we[0].zoom;ee[Be]===void 0&&(ee[Be]={zoom:Be,type:h.type,property:h.property,default:h.default,stops:[]},ae.push(Be)),ee[Be].stops.push([we[0].value,we[1]])}const Ae=[];for(const be of ae)Ae.push([ee[be].zoom,MA(ee[be],l)]);const fe={name:"linear"};return{kind:"composite",interpolationType:fe,interpolationFactor:Xl.interpolationFactor.bind(void 0,fe),zoomStops:Ae.map((be=>be[0])),evaluate:({zoom:be},we)=>Qh({stops:Ae,base:h.base},l,be).evaluate(be,we)}}if(y){const ee=_==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:ee,interpolationFactor:Xl.interpolationFactor.bind(void 0,ee),zoomStops:h.stops.map((ae=>ae[0])),evaluate:({zoom:ae})=>D(h,l,ae,F,W)}}return{kind:"source",evaluate(ee,ae){const Ae=ae&&ae.properties?ae.properties[h.property]:void 0;return Ae===void 0?Tl(h.default,l.default):D(h,l,Ae,F,W)}}}function Tl(h,l,A){return h!==void 0?h:l!==void 0?l:A!==void 0?A:void 0}function J1(h,l,A,y,_){return Tl(typeof A===_?y[A]:void 0,h.default,l.default)}function s0(h,l,A){if(or(A)!=="number")return Tl(h.default,l.default);const y=h.stops.length;if(y===1||A<=h.stops[0][0])return h.stops[0][1];if(A>=h.stops[y-1][0])return h.stops[y-1][1];const _=Po(h.stops.map((E=>E[0])),A);return h.stops[_][1]}function Qh(h,l,A){const y=h.base!==void 0?h.base:1;if(or(A)!=="number")return Tl(h.default,l.default);const _=h.stops.length;if(_===1||A<=h.stops[0][0])return h.stops[0][1];if(A>=h.stops[_-1][0])return h.stops[_-1][1];const E=Po(h.stops.map((ee=>ee[0])),A),O=(function(ee,ae,Ae,fe){const be=fe-Ae,we=ee-Ae;return be===0?0:ae===1?we/be:(Math.pow(ae,we)-1)/(Math.pow(ae,be)-1)})(A,y,h.stops[E][0],h.stops[E+1][0]),D=h.stops[E][1],F=h.stops[E+1][1],W=yo[l.type]||Al;return typeof D.evaluate=="function"?{evaluate(...ee){const ae=D.evaluate.apply(void 0,ee),Ae=F.evaluate.apply(void 0,ee);if(ae!==void 0&&Ae!==void 0)return W(ae,Ae,O,h.colorSpace)}}:W(D,F,O,h.colorSpace)}function kf(h,l,A){switch(l.type){case"color":A=Ji.parse(A);break;case"formatted":A=Jo.fromString(A.toString());break;case"resolvedImage":A=Fs.fromString(A.toString());break;case"padding":A=Ao.parse(A);break;case"colorArray":A=_i.parse(A);break;case"numberArray":A=ho.parse(A);break;default:or(A)===l.type||l.type==="enum"&&l.values[A]||(A=void 0)}return Tl(A,h.default,l.default)}Cr.register(rh,{error:[{kind:"error"},[Xi],(h,[l])=>{throw new to(l.evaluate(h))}],typeof:[Xi,[Vi],(h,[l])=>mr($i(l.evaluate(h)))],"to-rgba":[Qo(kn,4),[Ka],(h,[l])=>{const[A,y,_,E]=l.evaluate(h).rgb;return[255*A,255*y,255*_,E]}],rgb:[Ka,[kn,kn,kn],kg],rgba:[Ka,[kn,kn,kn,kn],kg],has:{type:ui,overloads:[[[Xi],(h,[l])=>Kp(l.evaluate(h),h.properties())],[[Xi,xl],(h,[l,A])=>Kp(l.evaluate(h),A.evaluate(h))]]},get:{type:Vi,overloads:[[[Xi],(h,[l])=>Il(l.evaluate(h),h.properties())],[[Xi,xl],(h,[l,A])=>Il(l.evaluate(h),A.evaluate(h))]]},"feature-state":[Vi,[Xi],(h,[l])=>Il(l.evaluate(h),h.featureState||{})],properties:[xl,[],h=>h.properties()],"geometry-type":[Xi,[],h=>h.geometryType()],id:[Vi,[],h=>h.id()],zoom:[kn,[],h=>h.globals.zoom],"heatmap-density":[kn,[],h=>h.globals.heatmapDensity||0],elevation:[kn,[],h=>h.globals.elevation||0],"line-progress":[kn,[],h=>h.globals.lineProgress||0],accumulated:[Vi,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[kn,_A(kn),(h,l)=>{let A=0;for(const y of l)A+=y.evaluate(h);return A}],"*":[kn,_A(kn),(h,l)=>{let A=1;for(const y of l)A*=y.evaluate(h);return A}],"-":{type:kn,overloads:[[[kn,kn],(h,[l,A])=>l.evaluate(h)-A.evaluate(h)],[[kn],(h,[l])=>-l.evaluate(h)]]},"/":[kn,[kn,kn],(h,[l,A])=>l.evaluate(h)/A.evaluate(h)],"%":[kn,[kn,kn],(h,[l,A])=>l.evaluate(h)%A.evaluate(h)],ln2:[kn,[],()=>Math.LN2],pi:[kn,[],()=>Math.PI],e:[kn,[],()=>Math.E],"^":[kn,[kn,kn],(h,[l,A])=>Math.pow(l.evaluate(h),A.evaluate(h))],sqrt:[kn,[kn],(h,[l])=>Math.sqrt(l.evaluate(h))],log10:[kn,[kn],(h,[l])=>Math.log(l.evaluate(h))/Math.LN10],ln:[kn,[kn],(h,[l])=>Math.log(l.evaluate(h))],log2:[kn,[kn],(h,[l])=>Math.log(l.evaluate(h))/Math.LN2],sin:[kn,[kn],(h,[l])=>Math.sin(l.evaluate(h))],cos:[kn,[kn],(h,[l])=>Math.cos(l.evaluate(h))],tan:[kn,[kn],(h,[l])=>Math.tan(l.evaluate(h))],asin:[kn,[kn],(h,[l])=>Math.asin(l.evaluate(h))],acos:[kn,[kn],(h,[l])=>Math.acos(l.evaluate(h))],atan:[kn,[kn],(h,[l])=>Math.atan(l.evaluate(h))],min:[kn,_A(kn),(h,l)=>Math.min(...l.map((A=>A.evaluate(h))))],max:[kn,_A(kn),(h,l)=>Math.max(...l.map((A=>A.evaluate(h))))],abs:[kn,[kn],(h,[l])=>Math.abs(l.evaluate(h))],round:[kn,[kn],(h,[l])=>{const A=l.evaluate(h);return A<0?-Math.round(-A):Math.round(A)}],floor:[kn,[kn],(h,[l])=>Math.floor(l.evaluate(h))],ceil:[kn,[kn],(h,[l])=>Math.ceil(l.evaluate(h))],"filter-==":[ui,[Xi,Vi],(h,[l,A])=>h.properties()[l.value]===A.value],"filter-id-==":[ui,[Vi],(h,[l])=>h.id()===l.value],"filter-type-==":[ui,[Xi],(h,[l])=>h.geometryType()===l.value],"filter-<":[ui,[Xi,Vi],(h,[l,A])=>{const y=h.properties()[l.value],_=A.value;return typeof y==typeof _&&y<_}],"filter-id-<":[ui,[Vi],(h,[l])=>{const A=h.id(),y=l.value;return typeof A==typeof y&&A<y}],"filter->":[ui,[Xi,Vi],(h,[l,A])=>{const y=h.properties()[l.value],_=A.value;return typeof y==typeof _&&y>_}],"filter-id->":[ui,[Vi],(h,[l])=>{const A=h.id(),y=l.value;return typeof A==typeof y&&A>y}],"filter-<=":[ui,[Xi,Vi],(h,[l,A])=>{const y=h.properties()[l.value],_=A.value;return typeof y==typeof _&&y<=_}],"filter-id-<=":[ui,[Vi],(h,[l])=>{const A=h.id(),y=l.value;return typeof A==typeof y&&A<=y}],"filter->=":[ui,[Xi,Vi],(h,[l,A])=>{const y=h.properties()[l.value],_=A.value;return typeof y==typeof _&&y>=_}],"filter-id->=":[ui,[Vi],(h,[l])=>{const A=h.id(),y=l.value;return typeof A==typeof y&&A>=y}],"filter-has":[ui,[Vi],(h,[l])=>l.value in h.properties()],"filter-has-id":[ui,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[ui,[Qo(Xi)],(h,[l])=>l.value.indexOf(h.geometryType())>=0],"filter-id-in":[ui,[Qo(Vi)],(h,[l])=>l.value.indexOf(h.id())>=0],"filter-in-small":[ui,[Xi,Qo(Vi)],(h,[l,A])=>A.value.indexOf(h.properties()[l.value])>=0],"filter-in-large":[ui,[Xi,Qo(Vi)],(h,[l,A])=>(function(y,_,E,O){for(;E<=O;){const D=E+O>>1;if(_[D]===y)return!0;_[D]>y?O=D-1:E=D+1}return!1})(h.properties()[l.value],A.value,0,A.value.length-1)],all:{type:ui,overloads:[[[ui,ui],(h,[l,A])=>l.evaluate(h)&&A.evaluate(h)],[_A(ui),(h,l)=>{for(const A of l)if(!A.evaluate(h))return!1;return!0}]]},any:{type:ui,overloads:[[[ui,ui],(h,[l,A])=>l.evaluate(h)||A.evaluate(h)],[_A(ui),(h,l)=>{for(const A of l)if(A.evaluate(h))return!0;return!1}]]},"!":[ui,[ui],(h,[l])=>!l.evaluate(h)],"is-supported-script":[ui,[Xi],(h,[l])=>{const A=h.globals&&h.globals.isSupportedScript;return!A||A(l.evaluate(h))}],upcase:[Xi,[Xi],(h,[l])=>l.evaluate(h).toUpperCase()],downcase:[Xi,[Xi],(h,[l])=>l.evaluate(h).toLowerCase()],concat:[Xi,_A(Vi),(h,l)=>l.map((A=>Tr(A.evaluate(h)))).join("")],"resolved-locale":[Xi,[Qu],(h,[l])=>l.evaluate(h).resolvedLocale()]});class Nd{constructor(l,A,y){this.expression=l,this._warningHistory={},this._evaluator=new Oi,this._defaultValue=A?(function(_){if(_.type==="color"&&Fp(_.default))return new Ji(0,0,0,0);switch(_.type){case"color":return Ji.parse(_.default)||null;case"padding":return Ao.parse(_.default)||null;case"numberArray":return ho.parse(_.default)||null;case"colorArray":return _i.parse(_.default)||null;case"variableAnchorOffsetCollection":return go.parse(_.default)||null;case"projectionDefinition":return Yr.parse(_.default)||null;default:return _.default===void 0?null:_.default}})(A):null,this._enumValues=A&&A.type==="enum"?A.values:null,this._globalState=y}evaluateWithoutErrorHandling(l,A,y,_,E,O){return this._globalState&&(l=Ja(l,this._globalState)),this._evaluator.globals=l,this._evaluator.feature=A,this._evaluator.featureState=y,this._evaluator.canonical=_,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=O,this.expression.evaluate(this._evaluator)}evaluate(l,A,y,_,E,O){this._globalState&&(l=Ja(l,this._globalState)),this._evaluator.globals=l,this._evaluator.feature=A||null,this._evaluator.featureState=y||null,this._evaluator.canonical=_,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=O||null;try{const D=this.expression.evaluate(this._evaluator);if(D==null||typeof D=="number"&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new to(`Expected value to be one of ${Object.keys(this._enumValues).map((F=>JSON.stringify(F))).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(D.message)),this._defaultValue}}}function wA(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in rh}function zp(h,l,A){const y=new Fi(rh,Jl,[],l?(function(E){const O={color:Ka,string:Xi,number:kn,enum:Xi,boolean:ui,formatted:co,padding:$a,numberArray:Fa,colorArray:Ml,projectionDefinition:yA,resolvedImage:Ro,variableAnchorOffsetCollection:gc};return E.type==="array"?Qo(O[E.value]||Vi,E.length):O[E.type]})(l):void 0),_=y.parse(h,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return _?Wh(new Nd(_,l,A)):sh(y.errors)}class kl{constructor(l,A,y){this.kind=l,this._styleExpression=A,this.isStateDependent=l!=="constant"&&!xA(A.expression),this.globalStateRefs=Xa(A.expression),this._globalState=y}evaluateWithoutErrorHandling(l,A,y,_,E,O){return this._globalState&&(l=Ja(l,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(l,A,y,_,E,O)}evaluate(l,A,y,_,E,O){return this._globalState&&(l=Ja(l,this._globalState)),this._styleExpression.evaluate(l,A,y,_,E,O)}}class qh{constructor(l,A,y,_,E){this.kind=l,this.zoomStops=y,this._styleExpression=A,this.isStateDependent=l!=="camera"&&!xA(A.expression),this.globalStateRefs=Xa(A.expression),this.interpolationType=_,this._globalState=E}evaluateWithoutErrorHandling(l,A,y,_,E,O){return this._globalState&&(l=Ja(l,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(l,A,y,_,E,O)}evaluate(l,A,y,_,E,O){return this._globalState&&(l=Ja(l,this._globalState)),this._styleExpression.evaluate(l,A,y,_,E,O)}interpolationFactor(l,A,y){return this.interpolationType?Xl.interpolationFactor(this.interpolationType,l,A,y):0}}function Yh(h,l,A){const y=zp(h,l,A);if(y.result==="error")return y;const _=y.value.expression,E=oh(_);if(!E&&!eu(l))return sh([new Wo("","data expressions not supported")]);const O=Su(_,["zoom"]);if(!O&&!o0(l))return sh([new Wo("","zoom expressions not supported")]);const D=js(_);return D||O?D instanceof Wo?sh([D]):D instanceof Xl&&!jd(l)?sh([new Wo("",'"interpolate" expressions cannot be used with this property')]):Wh(D?new qh(E?"camera":"composite",y.value,D.labels,D instanceof Xl?D.interpolation:void 0,A):new kl(E?"constant":"source",y.value,A)):sh([new Wo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ms{constructor(l,A){this._parameters=l,this._specification=A,tr(this,MA(this._parameters,this._specification))}static deserialize(l){return new ms(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function js(h){let l=null;if(h instanceof qn)l=js(h.result);else if(h instanceof vA){for(const A of h.args)if(l=js(A),l)break}else(h instanceof ds||h instanceof Xl)&&h.input instanceof Cr&&h.input.name==="zoom"&&(l=h);return l instanceof Wo||h.eachChild((A=>{const y=js(A);y instanceof Wo?l=y:!l&&y?l=new Wo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):l&&y&&l!==y&&(l=new Wo("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),l}function Xa(h,l=new Set){return h instanceof Gh&&l.add(h.key),h.eachChild((A=>{Xa(A,l)})),l}function Ja(h,l){const{zoom:A,heatmapDensity:y,elevation:_,lineProgress:E,isSupportedScript:O,accumulated:D}=h??{};return{zoom:A,heatmapDensity:y,elevation:_,lineProgress:E,isSupportedScript:O,accumulated:D,globalState:l}}function Zc(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const l of h.slice(1))if(!Zc(l)&&typeof l!="boolean")return!1;return!0;default:return!0}}const SA={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Dl(h,l){if(h==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Zc(h)||(h=xc(h));const A=zp(h,SA,l);if(A.result==="error")throw new Error(A.value.map((y=>`${y.key}: ${y.message}`)).join(", "));return{filter:(y,_,E)=>A.value.evaluate(y,_,{},E),needGeometry:jp(h),getGlobalStateRefs:()=>Xa(A.value.expression)}}function $u(h,l){return h<l?-1:h>l?1:0}function jp(h){if(!Array.isArray(h))return!1;if(h[0]==="within"||h[0]==="distance")return!0;for(let l=1;l<h.length;l++)if(jp(h[l]))return!0;return!1}function xc(h){if(!h)return!0;const l=h[0];return h.length<=1?l!=="any":l==="=="?EA(h[1],h[2],"=="):l==="!="?so(EA(h[1],h[2],"==")):l==="<"||l===">"||l==="<="||l===">="?EA(h[1],h[2],l):l==="any"?(A=h.slice(1),["any"].concat(A.map(xc))):l==="all"?["all"].concat(h.slice(1).map(xc)):l==="none"?["all"].concat(h.slice(1).map(xc).map(so)):l==="in"?Gd(h[1],h.slice(2)):l==="!in"?so(Gd(h[1],h.slice(2))):l==="has"?sa(h[1]):l!=="!has"||so(sa(h[1]));var A}function EA(h,l,A){switch(h){case"$type":return[`filter-type-${A}`,l];case"$id":return[`filter-id-${A}`,l];default:return[`filter-${A}`,h,l]}}function Gd(h,l){if(l.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some((A=>typeof A!=typeof l[0]))?["filter-in-large",h,["literal",l.sort($u)]]:["filter-in-small",h,["literal",l]]}}function sa(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function so(h){return["!",h]}function Rr(h){const l=typeof h;if(l==="number"||l==="boolean"||l==="string"||h==null)return JSON.stringify(h);if(Array.isArray(h)){let _="[";for(const E of h)_+=`${Rr(E)},`;return`${_}]`}const A=Object.keys(h).sort();let y="{";for(let _=0;_<A.length;_++)y+=`${JSON.stringify(A[_])}:${Rr(h[A[_]])},`;return`${y}}`}function ah(h){let l="";for(const A of Ci)l+=`/${Rr(h[A])}`;return l}function Hu(h){const l=h.value;return l?[new un(h.key,l,"constants have been deprecated as of v8")]:[]}function Os(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function Eu(h){if(Array.isArray(h))return h.map(Eu);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const l={};for(const A in h)l[A]=Eu(h[A]);return l}return Os(h)}function Rl(h){const l=h.key,A=h.value,y=h.valueSpec||{},_=h.objectElementValidators||{},E=h.style,O=h.styleSpec,D=h.validateSpec;let F=[];const W=or(A);if(W!=="object")return[new un(l,A,`object expected, ${W} found`)];for(const ee in A){const ae=ee.split(".")[0],Ae=hs(y,ae)||y["*"];let fe;if(hs(_,ae))fe=_[ae];else if(hs(y,ae))fe=D;else if(_["*"])fe=_["*"];else{if(!y["*"]){F.push(new un(l,A[ee],`unknown property "${ee}"`));continue}fe=D}F=F.concat(fe({key:(l&&`${l}.`)+ee,value:A[ee],valueSpec:Ae,style:E,styleSpec:O,object:A,objectKey:ee,validateSpec:D},A))}for(const ee in y)_[ee]||y[ee].required&&y[ee].default===void 0&&A[ee]===void 0&&F.push(new un(l,A,`missing required property "${ee}"`));return F}function lh(h){const l=h.value,A=h.valueSpec,y=h.style,_=h.styleSpec,E=h.key,O=h.arrayElementValidator||h.validateSpec;if(or(l)!=="array")return[new un(E,l,`array expected, ${or(l)} found`)];if(A.length&&l.length!==A.length)return[new un(E,l,`array length ${A.length} expected, length ${l.length} found`)];if(A["min-length"]&&l.length<A["min-length"])return[new un(E,l,`array length at least ${A["min-length"]} expected, length ${l.length} found`)];let D={type:A.value,values:A.values};_.$version<7&&(D.function=A.function),or(A.value)==="object"&&(D=A.value);let F=[];for(let W=0;W<l.length;W++)F=F.concat(O({array:l,arrayIndex:W,value:l[W],valueSpec:D,validateSpec:h.validateSpec,style:y,styleSpec:_,key:`${E}[${W}]`}));return F}function Xc(h){const l=h.key,A=h.value,y=h.valueSpec;let _=or(A);return _==="number"&&A!=A&&(_="NaN"),_!=="number"?[new un(l,A,`number expected, ${_} found`)]:"minimum"in y&&A<y.minimum?[new un(l,A,`${A} is less than the minimum value ${y.minimum}`)]:"maximum"in y&&A>y.maximum?[new un(l,A,`${A} is greater than the maximum value ${y.maximum}`)]:[]}function qe(h){const l=h.valueSpec,A=Os(h.value.type);let y,_,E,O={};const D=A!=="categorical"&&h.value.property===void 0,F=!D,W=or(h.value.stops)==="array"&&or(h.value.stops[0])==="array"&&or(h.value.stops[0][0])==="object",ee=Rl({key:h.key,value:h.value,valueSpec:h.styleSpec.function,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(fe){if(A==="identity")return[new un(fe.key,fe.value,'identity function may not have a "stops" property')];let be=[];const we=fe.value;return be=be.concat(lh({key:fe.key,value:we,valueSpec:fe.valueSpec,validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec,arrayElementValidator:ae})),or(we)==="array"&&we.length===0&&be.push(new un(fe.key,we,"array must have at least one stop")),be},default:function(fe){return fe.validateSpec({key:fe.key,value:fe.value,valueSpec:l,validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec})}}});return A==="identity"&&D&&ee.push(new un(h.key,h.value,'missing required property "property"')),A==="identity"||h.value.stops||ee.push(new un(h.key,h.value,'missing required property "stops"')),A==="exponential"&&h.valueSpec.expression&&!jd(h.valueSpec)&&ee.push(new un(h.key,h.value,"exponential functions not supported")),h.styleSpec.$version>=8&&(F&&!eu(h.valueSpec)?ee.push(new un(h.key,h.value,"property functions not supported")):D&&!o0(h.valueSpec)&&ee.push(new un(h.key,h.value,"zoom functions not supported"))),A!=="categorical"&&!W||h.value.property!==void 0||ee.push(new un(h.key,h.value,'"property" property is required')),ee;function ae(fe){let be=[];const we=fe.value,Be=fe.key;if(or(we)!=="array")return[new un(Be,we,`array expected, ${or(we)} found`)];if(we.length!==2)return[new un(Be,we,`array length 2 expected, length ${we.length} found`)];if(W){if(or(we[0])!=="object")return[new un(Be,we,`object expected, ${or(we[0])} found`)];if(we[0].zoom===void 0)return[new un(Be,we,"object stop key must have zoom")];if(we[0].value===void 0)return[new un(Be,we,"object stop key must have value")];if(E&&E>Os(we[0].zoom))return[new un(Be,we[0].zoom,"stop zoom values must appear in ascending order")];Os(we[0].zoom)!==E&&(E=Os(we[0].zoom),_=void 0,O={}),be=be.concat(Rl({key:`${Be}[0]`,value:we[0],valueSpec:{zoom:{}},validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec,objectElementValidators:{zoom:Xc,value:Ae}}))}else be=be.concat(Ae({key:`${Be}[0]`,value:we[0],validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec},we));return wA(Eu(we[1]))?be.concat([new un(`${Be}[1]`,we[1],"expressions are not allowed in function stops.")]):be.concat(fe.validateSpec({key:`${Be}[1]`,value:we[1],valueSpec:l,validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec}))}function Ae(fe,be){const we=or(fe.value),Be=Os(fe.value),ze=fe.value!==null?fe.value:be;if(y){if(we!==y)return[new un(fe.key,ze,`${we} stop domain type must match previous stop domain type ${y}`)]}else y=we;if(we!=="number"&&we!=="string"&&we!=="boolean")return[new un(fe.key,ze,"stop domain value must be a number, string, or boolean")];if(we!=="number"&&A!=="categorical"){let at=`number expected, ${we} found`;return eu(l)&&A===void 0&&(at+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new un(fe.key,ze,at)]}return A!=="categorical"||we!=="number"||isFinite(Be)&&Math.floor(Be)===Be?A!=="categorical"&&we==="number"&&_!==void 0&&Be<_?[new un(fe.key,ze,"stop domain values must appear in ascending order")]:(_=Be,A==="categorical"&&Be in O?[new un(fe.key,ze,"stop domain values must be unique")]:(O[Be]=!0,[])):[new un(fe.key,ze,`integer expected, found ${Be}`)]}}function tu(h){const l=(h.expressionContext==="property"?Yh:zp)(Eu(h.value),h.valueSpec);if(l.result==="error")return l.value.map((y=>new un(`${h.key}${y.key}`,h.value,y.message)));const A=l.value.expression||l.value._styleExpression.expression;if(h.expressionContext==="property"&&h.propertyKey==="text-font"&&!A.outputDefined())return[new un(h.key,h.value,`Invalid data expression for "${h.propertyKey}". Output values must be contained as literals within the expression.`)];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!xA(A))return[new un(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!xA(A))return[new un(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!Su(A,["zoom","feature-state"]))return[new un(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!oh(A))return[new un(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Mc(h){const l=h.key,A=h.value,y=or(A);return y!=="string"?[new un(l,A,`color expected, ${y} found`)]:Ji.parse(String(A))?[]:[new un(l,A,`color expected, "${A}" found`)]}function xa(h){const l=h.key,A=h.value,y=h.valueSpec,_=[];return Array.isArray(y.values)?y.values.indexOf(Os(A))===-1&&_.push(new un(l,A,`expected one of [${y.values.join(", ")}], ${JSON.stringify(A)} found`)):Object.keys(y.values).indexOf(Os(A))===-1&&_.push(new un(l,A,`expected one of [${Object.keys(y.values).join(", ")}], ${JSON.stringify(A)} found`)),_}function ur(h){return Zc(Eu(h.value))?tu(tr({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):BA(h)}function BA(h){const l=h.value,A=h.key;if(or(l)!=="array")return[new un(A,l,`array expected, ${or(l)} found`)];const y=h.styleSpec;let _,E=[];if(l.length<1)return[new un(A,l,"filter array must have at least 1 element")];switch(E=E.concat(xa({key:`${A}[0]`,value:l[0],valueSpec:y.filter_operator,style:h.style,styleSpec:h.styleSpec})),Os(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&Os(l[1])==="$type"&&E.push(new un(A,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&E.push(new un(A,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(_=or(l[1]),_!=="string"&&E.push(new un(`${A}[1]`,l[1],`string expected, ${_} found`)));for(let O=2;O<l.length;O++)_=or(l[O]),Os(l[1])==="$type"?E=E.concat(xa({key:`${A}[${O}]`,value:l[O],valueSpec:y.geometry_type,style:h.style,styleSpec:h.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&E.push(new un(`${A}[${O}]`,l[O],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let O=1;O<l.length;O++)E=E.concat(BA({key:`${A}[${O}]`,value:l[O],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":_=or(l[1]),l.length!==2?E.push(new un(A,l,`filter array for "${l[0]}" operator must have 2 elements`)):_!=="string"&&E.push(new un(`${A}[1]`,l[1],`string expected, ${_} found`))}return E}function uh(h,l){const A=h.key,y=h.validateSpec,_=h.style,E=h.styleSpec,O=h.value,D=h.objectKey,F=E[`${l}_${h.layerType}`];if(!F)return[];const W=D.match(/^(.*)-transition$/);if(l==="paint"&&W&&F[W[1]]&&F[W[1]].transition)return y({key:A,value:O,valueSpec:E.transition,style:_,styleSpec:E});const ee=h.valueSpec||F[D];if(!ee)return[new un(A,O,`unknown property "${D}"`)];let ae;if(or(O)==="string"&&eu(ee)&&!ee.tokens&&(ae=/^{([^}]+)}$/.exec(O)))return[new un(A,O,`"${D}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ae[1])} }\`.`)];const Ae=[];return h.layerType==="symbol"&&D==="text-font"&&Fp(Eu(O))&&Os(O.type)==="identity"&&Ae.push(new un(A,O,'"text-font" does not support identity functions')),Ae.concat(y({key:h.key,value:O,valueSpec:ee,style:_,styleSpec:E,expressionContext:"property",propertyType:l,propertyKey:D}))}function OA(h){return uh(h,"paint")}function IA(h){return uh(h,"layout")}function a0(h){let l=[];const A=h.value,y=h.key,_=h.style,E=h.styleSpec;if(or(A)!=="object")return[new un(y,A,`object expected, ${or(A)} found`)];A.type||A.ref||l.push(new un(y,A,'either "type" or "ref" is required'));let O=Os(A.type);const D=Os(A.ref);if(A.id){const F=Os(A.id);for(let W=0;W<h.arrayIndex;W++){const ee=_.layers[W];Os(ee.id)===F&&l.push(new un(y,A.id,`duplicate layer id "${A.id}", previously used at line ${ee.id.__line__}`))}}if("ref"in A){let F;["type","source","source-layer","filter","layout"].forEach((W=>{W in A&&l.push(new un(y,A[W],`"${W}" is prohibited for ref layers`))})),_.layers.forEach((W=>{Os(W.id)===D&&(F=W)})),F?F.ref?l.push(new un(y,A.ref,"ref cannot reference another ref layer")):O=Os(F.type):l.push(new un(y,A.ref,`ref layer "${D}" not found`))}else if(O!=="background")if(A.source){const F=_.sources&&_.sources[A.source],W=F&&Os(F.type);F?W==="vector"&&O==="raster"?l.push(new un(y,A.source,`layer "${A.id}" requires a raster source`)):W!=="raster-dem"&&O==="hillshade"||W!=="raster-dem"&&O==="color-relief"?l.push(new un(y,A.source,`layer "${A.id}" requires a raster-dem source`)):W==="raster"&&O!=="raster"?l.push(new un(y,A.source,`layer "${A.id}" requires a vector source`)):W!=="vector"||A["source-layer"]?W==="raster-dem"&&O!=="hillshade"&&O!=="color-relief"?l.push(new un(y,A.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):O!=="line"||!A.paint||!A.paint["line-gradient"]||W==="geojson"&&F.lineMetrics||l.push(new un(y,A,`layer "${A.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new un(y,A,`layer "${A.id}" must specify a "source-layer"`)):l.push(new un(y,A.source,`source "${A.source}" not found`))}else l.push(new un(y,A,'missing required property "source"'));return l=l.concat(Rl({key:y,value:A,valueSpec:E.layer,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,objectElementValidators:{"*":()=>[],type:()=>h.validateSpec({key:`${y}.type`,value:A.type,valueSpec:E.layer.type,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,object:A,objectKey:"type"}),filter:ur,layout:F=>Rl({layer:A,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":W=>IA(tr({layerType:O},W))}}),paint:F=>Rl({layer:A,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":W=>OA(tr({layerType:O},W))}})}})),l}function wc(h){const l=h.value,A=h.key,y=or(l);return y!=="string"?[new un(A,l,`string expected, ${y} found`)]:[]}const Df={promoteId:function({key:h,value:l}){if(or(l)==="string")return wc({key:h,value:l});{const A=[];for(const y in l)A.push(...wc({key:`${h}.${y}`,value:l[y]}));return A}}};function ch(h){const l=h.value,A=h.key,y=h.styleSpec,_=h.style,E=h.validateSpec;if(!l.type)return[new un(A,l,'"type" is required')];const O=Os(l.type);let D;switch(O){case"vector":case"raster":return D=Rl({key:A,value:l,valueSpec:y[`source_${O.replace("-","_")}`],style:h.style,styleSpec:y,objectElementValidators:Df,validateSpec:E}),D;case"raster-dem":return D=(function(F){var W;const ee=(W=F.sourceName)!==null&&W!==void 0?W:"",ae=F.value,Ae=F.styleSpec,fe=Ae.source_raster_dem,be=F.style;let we=[];const Be=or(ae);if(ae===void 0)return we;if(Be!=="object")return we.push(new un("source_raster_dem",ae,`object expected, ${Be} found`)),we;const ze=Os(ae.encoding)==="custom",at=["redFactor","greenFactor","blueFactor","baseShift"],We=F.value.encoding?`"${F.value.encoding}"`:"Default";for(const Xe in ae)!ze&&at.includes(Xe)?we.push(new un(Xe,ae[Xe],`In "${ee}": "${Xe}" is only valid when "encoding" is set to "custom". ${We} encoding found`)):fe[Xe]?we=we.concat(F.validateSpec({key:Xe,value:ae[Xe],valueSpec:fe[Xe],validateSpec:F.validateSpec,style:be,styleSpec:Ae})):we.push(new un(Xe,ae[Xe],`unknown property "${Xe}"`));return we})({sourceName:A,value:l,style:h.style,styleSpec:y,validateSpec:E}),D;case"geojson":if(D=Rl({key:A,value:l,valueSpec:y.source_geojson,style:_,styleSpec:y,validateSpec:E,objectElementValidators:Df}),l.cluster)for(const F in l.clusterProperties){const[W,ee]=l.clusterProperties[F],ae=typeof W=="string"?[W,["accumulated"],["get",F]]:W;D.push(...tu({key:`${A}.${F}.map`,value:ee,expressionContext:"cluster-map"})),D.push(...tu({key:`${A}.${F}.reduce`,value:ae,expressionContext:"cluster-reduce"}))}return D;case"video":return Rl({key:A,value:l,valueSpec:y.source_video,style:_,validateSpec:E,styleSpec:y});case"image":return Rl({key:A,value:l,valueSpec:y.source_image,style:_,validateSpec:E,styleSpec:y});case"canvas":return[new un(A,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return xa({key:`${A}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function aa(h){const l=h.value,A=h.styleSpec,y=A.light,_=h.style;let E=[];const O=or(l);if(l===void 0)return E;if(O!=="object")return E=E.concat([new un("light",l,`object expected, ${O} found`)]),E;for(const D in l){const F=D.match(/^(.*)-transition$/);E=E.concat(F&&y[F[1]]&&y[F[1]].transition?h.validateSpec({key:D,value:l[D],valueSpec:A.transition,validateSpec:h.validateSpec,style:_,styleSpec:A}):y[D]?h.validateSpec({key:D,value:l[D],valueSpec:y[D],validateSpec:h.validateSpec,style:_,styleSpec:A}):[new un(D,l[D],`unknown property "${D}"`)])}return E}function Zu(h){const l=h.value,A=h.styleSpec,y=A.sky,_=h.style,E=or(l);if(l===void 0)return[];if(E!=="object")return[new un("sky",l,`object expected, ${E} found`)];let O=[];for(const D in l)O=O.concat(y[D]?h.validateSpec({key:D,value:l[D],valueSpec:y[D],style:_,styleSpec:A}):[new un(D,l[D],`unknown property "${D}"`)]);return O}function l0(h){const l=h.value,A=h.styleSpec,y=A.terrain,_=h.style;let E=[];const O=or(l);if(l===void 0)return E;if(O!=="object")return E=E.concat([new un("terrain",l,`object expected, ${O} found`)]),E;for(const D in l)E=E.concat(y[D]?h.validateSpec({key:D,value:l[D],valueSpec:y[D],validateSpec:h.validateSpec,style:_,styleSpec:A}):[new un(D,l[D],`unknown property "${D}"`)]);return E}function Dg(h){let l=[];const A=h.value,y=h.key;if(Array.isArray(A)){const _=[],E=[];for(const O in A)A[O].id&&_.includes(A[O].id)&&l.push(new un(y,A,`all the sprites' ids must be unique, but ${A[O].id} is duplicated`)),_.push(A[O].id),A[O].url&&E.includes(A[O].url)&&l.push(new un(y,A,`all the sprites' URLs must be unique, but ${A[O].url} is duplicated`)),E.push(A[O].url),l=l.concat(Rl({key:`${y}[${O}]`,value:A[O],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:h.validateSpec}));return l}return wc({key:y,value:A})}function ey(h){return l=h.value,l&&l.constructor===Object?[]:[new un(h.key,h.value,`object expected, ${or(h.value)} found`)];var l}const Rg={"*":()=>[],array:lh,boolean:function(h){const l=h.value,A=h.key,y=or(l);return y!=="boolean"?[new un(A,l,`boolean expected, ${y} found`)]:[]},number:Xc,color:Mc,constants:Hu,enum:xa,filter:ur,function:qe,layer:a0,object:Rl,source:ch,light:aa,sky:Zu,terrain:l0,projection:function(h){const l=h.value,A=h.styleSpec,y=A.projection,_=h.style,E=or(l);if(l===void 0)return[];if(E!=="object")return[new un("projection",l,`object expected, ${E} found`)];let O=[];for(const D in l)O=O.concat(y[D]?h.validateSpec({key:D,value:l[D],valueSpec:y[D],style:_,styleSpec:A}):[new un(D,l[D],`unknown property "${D}"`)]);return O},projectionDefinition:function(h){const l=h.key;let A=h.value;A=A instanceof String?A.valueOf():A;const y=or(A);return y!=="array"||(function(_){return Array.isArray(_)&&_.length===3&&typeof _[0]=="string"&&typeof _[1]=="string"&&typeof _[2]=="number"})(A)||(function(_){return!!["interpolate","step","literal"].includes(_[0])})(A)?["array","string"].includes(y)?[]:[new un(l,A,`projection expected, invalid type "${y}" found`)]:[new un(l,A,`projection expected, invalid array ${JSON.stringify(A)} found`)]},string:wc,formatted:function(h){return wc(h).length===0?[]:tu(h)},resolvedImage:function(h){return wc(h).length===0?[]:tu(h)},padding:function(h){const l=h.key,A=h.value;if(or(A)==="array"){if(A.length<1||A.length>4)return[new un(l,A,`padding requires 1 to 4 values; ${A.length} values found`)];const y={type:"number"};let _=[];for(let E=0;E<A.length;E++)_=_.concat(h.validateSpec({key:`${l}[${E}]`,value:A[E],validateSpec:h.validateSpec,valueSpec:y}));return _}return Xc({key:l,value:A,valueSpec:{}})},numberArray:function(h){const l=h.key,A=h.value;if(or(A)==="array"){const y={type:"number"};if(A.length<1)return[new un(l,A,"array length at least 1 expected, length 0 found")];let _=[];for(let E=0;E<A.length;E++)_=_.concat(h.validateSpec({key:`${l}[${E}]`,value:A[E],validateSpec:h.validateSpec,valueSpec:y}));return _}return Xc({key:l,value:A,valueSpec:{}})},colorArray:function(h){const l=h.key,A=h.value;if(or(A)==="array"){if(A.length<1)return[new un(l,A,"array length at least 1 expected, length 0 found")];let y=[];for(let _=0;_<A.length;_++)y=y.concat(Mc({key:`${l}[${_}]`,value:A[_]}));return y}return Mc({key:l,value:A})},variableAnchorOffsetCollection:function(h){const l=h.key,A=h.value,y=or(A),_=h.styleSpec;if(y!=="array"||A.length<1||A.length%2!=0)return[new un(l,A,"variableAnchorOffsetCollection requires a non-empty array of even length")];let E=[];for(let O=0;O<A.length;O+=2)E=E.concat(xa({key:`${l}[${O}]`,value:A[O],valueSpec:_.layout_symbol["text-anchor"]})),E=E.concat(lh({key:`${l}[${O+1}]`,value:A[O+1],valueSpec:{length:2,value:"number"},validateSpec:h.validateSpec,style:h.style,styleSpec:_}));return E},sprite:Dg,state:ey};function Is(h){const l=h.value,A=h.valueSpec,y=h.styleSpec;return h.validateSpec=Is,A.expression&&Fp(Os(l))?qe(h):A.expression&&wA(Eu(l))?tu(h):A.type&&Rg[A.type]?Rg[A.type](h):Rl(tr({},h,{valueSpec:A.type?y[A.type]:A}))}function Pl(h){const l=h.value,A=h.key,y=wc(h);return y.length||(l.indexOf("{fontstack}")===-1&&y.push(new un(A,l,'"glyphs" url must include a "{fontstack}" token')),l.indexOf("{range}")===-1&&y.push(new un(A,l,'"glyphs" url must include a "{range}" token'))),y}function Ll(h,l=xt){let A=[];return A=A.concat(Is({key:"",value:h,valueSpec:l.$root,styleSpec:l,style:h,validateSpec:Is,objectElementValidators:{glyphs:Pl,"*":()=>[]}})),h.constants&&(A=A.concat(Hu({key:"constants",value:h.constants}))),u0(A)}function nu(h){return function(l){return h(Object.assign({},l,{validateSpec:Is}))}}function u0(h){return[].concat(h).sort(((l,A)=>l.line-A.line))}function Ul(h){return function(...l){return u0(h.apply(this,l))}}Ll.source=Ul(nu(ch)),Ll.sprite=Ul(nu(Dg)),Ll.glyphs=Ul(nu(Pl)),Ll.light=Ul(nu(aa)),Ll.sky=Ul(nu(Zu)),Ll.terrain=Ul(nu(l0)),Ll.state=Ul(nu(ey)),Ll.layer=Ul(nu(a0)),Ll.filter=Ul(nu(ur)),Ll.paintProperty=Ul(nu(OA)),Ll.layoutProperty=Ul(nu(IA));const Rf=xt,Sc=Ll,Pf=Sc.light,Np=Sc.sky,Ts=Sc.paintProperty,Jc=Sc.layoutProperty;function Gp(h,l){let A=!1;if(l&&l.length)for(const y of l)h.fire(new bn(new Error(y.message))),A=!0;return A}class Vh{constructor(l,A,y){const _=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;const O=new Int32Array(this.arrayBuffer);l=O[0],this.d=(A=O[1])+2*(y=O[2]);for(let F=0;F<this.d*this.d;F++){const W=O[3+F],ee=O[3+F+1];_.push(W===ee?null:O.subarray(W,ee))}const D=O[3+_.length+1];this.keys=O.subarray(O[3+_.length],D),this.bboxes=O.subarray(D),this.insert=this._insertReadonly}else{this.d=A+2*y;for(let O=0;O<this.d*this.d;O++)_.push([]);this.keys=[],this.bboxes=[]}this.n=A,this.extent=l,this.padding=y,this.scale=A/l,this.uid=0;const E=y/A*l;this.min=-E,this.max=l+E}insert(l,A,y,_,E){this._forEachCell(A,y,_,E,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(A),this.bboxes.push(y),this.bboxes.push(_),this.bboxes.push(E)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,A,y,_,E,O){this.cells[E].push(O)}query(l,A,y,_,E){const O=this.min,D=this.max;if(l<=O&&A<=O&&D<=y&&D<=_&&!E)return Array.prototype.slice.call(this.keys);{const F=[];return this._forEachCell(l,A,y,_,this._queryCell,F,{},E),F}}_queryCell(l,A,y,_,E,O,D,F){const W=this.cells[E];if(W!==null){const ee=this.keys,ae=this.bboxes;for(let Ae=0;Ae<W.length;Ae++){const fe=W[Ae];if(D[fe]===void 0){const be=4*fe;(F?F(ae[be+0],ae[be+1],ae[be+2],ae[be+3]):l<=ae[be+2]&&A<=ae[be+3]&&y>=ae[be+0]&&_>=ae[be+1])?(D[fe]=!0,O.push(ee[fe])):D[fe]=!1}}}}_forEachCell(l,A,y,_,E,O,D,F){const W=this._convertToCellCoord(l),ee=this._convertToCellCoord(A),ae=this._convertToCellCoord(y),Ae=this._convertToCellCoord(_);for(let fe=W;fe<=ae;fe++)for(let be=ee;be<=Ae;be++){const we=this.d*be+fe;if((!F||F(this._convertFromCellCoord(fe),this._convertFromCellCoord(be),this._convertFromCellCoord(fe+1),this._convertFromCellCoord(be+1)))&&E.call(this,l,A,y,_,we,O,D,F))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const l=this.cells,A=3+this.cells.length+1+1;let y=0;for(let O=0;O<this.cells.length;O++)y+=this.cells[O].length;const _=new Int32Array(A+y+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;let E=A;for(let O=0;O<l.length;O++){const D=l[O];_[3+O]=E,_.set(D,E),E+=D.length}return _[3+l.length]=E,_.set(this.keys,E),E+=this.keys.length,_[3+l.length+1]=E,_.set(this.bboxes,E),E+=this.bboxes.length,_.buffer}static serialize(l,A){const y=l.toArrayBuffer();return A&&A.push(y),{buffer:y}}static deserialize(l){return new Vh(l.buffer)}}const TA={};function Fn(h,l,A={}){if(TA[h])throw new Error(`${h} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:h,writeable:!1}),TA[h]={klass:l,omit:A.omit||[],shallow:A.shallow||[]}}Fn("Object",Object),Fn("Set",Set),Fn("TransferableGridIndex",Vh),Fn("Color",Ji),Fn("Error",Error),Fn("AJAXError",it),Fn("ResolvedImage",Fs),Fn("StylePropertyFunction",ms),Fn("StyleExpression",Nd,{omit:["_evaluator"]}),Fn("ZoomDependentExpression",qh),Fn("ZoomConstantExpression",kl),Fn("CompoundExpression",Cr,{omit:["_evaluate"]});for(const h in rh)rh[h]._classRegistryKey||Fn(`Expression_${h}`,rh[h]);function Lf(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function Ah(h){return h.$name||h.constructor._classRegistryKey}function Wp(h){return!(function(l){if(l===null||typeof l!="object")return!1;const A=Ah(l);return!(!A||A==="Object")})(h)&&(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||h instanceof Error||Lf(h)||Gn(h)||ArrayBuffer.isView(h)||h instanceof ImageData)}function $h(h,l){if(Wp(h))return(Lf(h)||Gn(h))&&l&&l.push(h),ArrayBuffer.isView(h)&&l&&l.push(h.buffer),h instanceof ImageData&&l&&l.push(h.data.buffer),h;if(Array.isArray(h)){const E=[];for(const O of h)E.push($h(O,l));return E}if(typeof h!="object")throw new Error("can't serialize object of type "+typeof h);const A=Ah(h);if(!A)throw new Error(`can't serialize object of unregistered class ${h.constructor.name}`);if(!TA[A])throw new Error(`${A} is not registered.`);const{klass:y}=TA[A],_=y.serialize?y.serialize(h,l):{};if(y.serialize){if(l&&_===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const E in h){if(!h.hasOwnProperty(E)||TA[A].omit.indexOf(E)>=0)continue;const O=h[E];_[E]=TA[A].shallow.indexOf(E)>=0?O:$h(O,l)}h instanceof Error&&(_.message=h.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return A!=="Object"&&(_.$name=A),_}function Hh(h){if(Wp(h))return h;if(Array.isArray(h))return h.map(Hh);if(typeof h!="object")throw new Error("can't deserialize object of type "+typeof h);const l=Ah(h)||"Object";if(!TA[l])throw new Error(`can't deserialize unregistered class ${l}`);const{klass:A}=TA[l];if(!A)throw new Error(`can't deserialize unregistered class ${l}`);if(A.deserialize)return A.deserialize(h);const y=Object.create(A.prototype);for(const _ of Object.keys(h)){if(_==="$name")continue;const E=h[_];y[_]=TA[l].shallow.indexOf(_)>=0?E:Hh(E)}return y}class hl{constructor(){this.first=!0}update(l,A){const y=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=y,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=y,!0):(this.lastFloorZoom>y?(this.lastIntegerZoom=y+1,this.lastIntegerZoomTime=A):this.lastFloorZoom<y&&(this.lastIntegerZoom=y,this.lastIntegerZoomTime=A),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=y,!0))}}function kA(h){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(h))}function c0(h){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(h))}function A0(h){return/\s/u.test(String.fromCodePoint(h))}function Ec(h){for(const l of h)if(c0(l.codePointAt(0)))return!0;return!1}function Xu(h){for(const l of h)if(!iu(l.codePointAt(0)))return!1;return!0}function Wd(h){const l=h.map((A=>{try{return new RegExp(`\\p{sc=${A}}`,"u").source}catch{return null}})).filter((A=>A));return new RegExp(l.join("|"),"u")}const Bu=Wd(["Arab","Dupl","Mong","Ougr","Syrc"]);function iu(h){return!Bu.test(String.fromCodePoint(h))}function Qp(h){return!(c0(h)||(l=h,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(l))));var l}const eA=Wd(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function qp(h){return eA.test(String.fromCodePoint(h))}function Ju(h,l){return!(!l&&qp(h)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(h)))}function tA(h){for(const l of h)if(qp(l.codePointAt(0)))return!0;return!1}const Bc=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(h){this.pluginStatus=h.pluginStatus,this.pluginURL=h.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(h){if(Bc.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=h.applyArabicShaping,this.processBidirectionalText=h.processBidirectionalText,this.processStyledBidirectionalText=h.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(h,l){return a(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(h.pluginStatus!=="loading")return this.setState(h),h;const A=h.pluginURL,y=new Promise((E=>{this.loadScriptResolve=E}));l(A);const _=new Promise((E=>setTimeout((()=>E()),this.TIMEOUT)));if(yield Promise.race([y,_]),this.isParsed()){const E={pluginStatus:"loaded",pluginURL:A};return this.setState(E),E}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${A}`)}))}};class zr{constructor(l,A){this.isSupportedScript=Oc,this.zoom=l,A?(this.now=A.now||0,this.fadeDuration=A.fadeDuration||0,this.zoomHistory=A.zoomHistory||new hl,this.transition=A.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new hl,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const l=this.zoom,A=l-Math.floor(l),y=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:A+(1-A)*y}:{fromScale:.5,toScale:1,t:1-(1-y)*A}}}function Oc(h){return(function(l,A){for(const y of l)if(!Ju(y.codePointAt(0),A))return!1;return!0})(h,Bc.getRTLTextPluginStatus()==="loaded")}const Zh="-transition";class Xh{constructor(l,A,y){this.property=l,this.value=A,this.expression=(function(_,E,O){if(Fp(_))return new ms(_,E);if(wA(_)){const D=Yh(_,E,O);if(D.result==="error")throw new Error(D.value.map((F=>`${F.key}: ${F.message}`)).join(", "));return D.value}{let D=_;return E.type==="color"&&typeof _=="string"?D=Ji.parse(_):E.type!=="padding"||typeof _!="number"&&!Array.isArray(_)?E.type!=="numberArray"||typeof _!="number"&&!Array.isArray(_)?E.type!=="colorArray"||typeof _!="string"&&!Array.isArray(_)?E.type==="variableAnchorOffsetCollection"&&Array.isArray(_)?D=go.parse(_):E.type==="projectionDefinition"&&typeof _=="string"&&(D=Yr.parse(_)):D=_i.parse(_):D=ho.parse(_):D=Ao.parse(_),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>D}}})(A===void 0?l.specification.default:A,l.specification,y)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(l,A,y){return this.property.possiblyEvaluate(this,l,A,y)}}class la{constructor(l,A){this.property=l,this.value=new Xh(l,void 0,A)}transitioned(l,A){return new Qd(this.property,this.value,A,Le({},l.transition,this.transition),l.now)}untransitioned(){return new Qd(this.property,this.value,null,{},0)}}class hh{constructor(l,A){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues),this._globalState=A}getValue(l){return bt(this._values[l].value.value)}setValue(l,A){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new la(this._values[l].property,this._globalState)),this._values[l].value=new Xh(this._values[l].property,A===null?void 0:bt(A),this._globalState)}getTransition(l){return bt(this._values[l].transition)}setTransition(l,A){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new la(this._values[l].property,this._globalState)),this._values[l].transition=bt(A)||void 0}serialize(){const l={};for(const A of Object.keys(this._values)){const y=this.getValue(A);y!==void 0&&(l[A]=y);const _=this.getTransition(A);_!==void 0&&(l[`${A}${Zh}`]=_)}return l}transitioned(l,A){const y=new ec(this._properties);for(const _ of Object.keys(this._values))y._values[_]=this._values[_].transitioned(l,A._values[_]);return y}untransitioned(){const l=new ec(this._properties);for(const A of Object.keys(this._values))l._values[A]=this._values[A].untransitioned();return l}}class Qd{constructor(l,A,y,_,E){this.property=l,this.value=A,this.begin=E+_.delay||0,this.end=this.begin+_.duration||0,l.specification.transition&&(_.delay||_.duration)&&(this.prior=y)}possiblyEvaluate(l,A,y){const _=l.now||0,E=this.value.possiblyEvaluate(l,A,y),O=this.prior;if(O){if(_>this.end)return this.prior=null,E;if(this.value.isDataDriven())return this.prior=null,E;if(_<this.begin)return O.possiblyEvaluate(l,A,y);{const D=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(O.possiblyEvaluate(l,A,y),E,Re(D))}}return E}}class ec{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,A,y){const _=new tc(this._properties);for(const E of Object.keys(this._values))_._values[E]=this._values[E].possiblyEvaluate(l,A,y);return _}hasTransition(){for(const l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class Yp{constructor(l,A){this._properties=l,this._values=Object.create(l.defaultPropertyValues),this._globalState=A}hasValue(l){return this._values[l].value!==void 0}getValue(l){return bt(this._values[l].value)}setValue(l,A){this._values[l]=new Xh(this._values[l].property,A===null?void 0:bt(A),this._globalState)}serialize(){const l={};for(const A of Object.keys(this._values)){const y=this.getValue(A);y!==void 0&&(l[A]=y)}return l}possiblyEvaluate(l,A,y){const _=new tc(this._properties);for(const E of Object.keys(this._values))_._values[E]=this._values[E].possiblyEvaluate(l,A,y);return _}}class el{constructor(l,A,y){this.property=l,this.value=A,this.parameters=y}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,A,y,_){return this.property.evaluate(this.value,this.parameters,l,A,y,_)}}class tc{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class di{constructor(l){this.specification=l}possiblyEvaluate(l,A){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(A)}interpolate(l,A,y){const _=yo[this.specification.type];return _?_(l,A,y):l}}class si{constructor(l,A){this.specification=l,this.overrides=A}possiblyEvaluate(l,A,y,_){return new el(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(A,null,{},y,_)}:l.expression,A)}interpolate(l,A,y){if(l.value.kind!=="constant"||A.value.kind!=="constant")return l;if(l.value.value===void 0||A.value.value===void 0)return new el(this,{kind:"constant",value:void 0},l.parameters);const _=yo[this.specification.type];if(_){const E=_(l.value.value,A.value.value,y);return new el(this,{kind:"constant",value:E},l.parameters)}return l}evaluate(l,A,y,_,E,O){return l.kind==="constant"?l.value:l.evaluate(A,y,_,E,O)}}class DA extends si{possiblyEvaluate(l,A,y,_){if(l.value===void 0)return new el(this,{kind:"constant",value:void 0},A);if(l.expression.kind==="constant"){const E=l.expression.evaluate(A,null,{},y,_),O=l.property.specification.type==="resolvedImage"&&typeof E!="string"?E.name:E,D=this._calculate(O,O,O,A);return new el(this,{kind:"constant",value:D},A)}if(l.expression.kind==="camera"){const E=this._calculate(l.expression.evaluate({zoom:A.zoom-1}),l.expression.evaluate({zoom:A.zoom}),l.expression.evaluate({zoom:A.zoom+1}),A);return new el(this,{kind:"constant",value:E},A)}return new el(this,l.expression,A)}evaluate(l,A,y,_,E,O){if(l.kind==="source"){const D=l.evaluate(A,y,_,E,O);return this._calculate(D,D,D,A)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(A.zoom)-1},y,_),l.evaluate({zoom:Math.floor(A.zoom)},y,_),l.evaluate({zoom:Math.floor(A.zoom)+1},y,_),A):l.value}_calculate(l,A,y,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:l,to:A}:{from:y,to:A}}interpolate(l){return l}}class ru{constructor(l){this.specification=l}possiblyEvaluate(l,A,y,_){if(l.value!==void 0){if(l.expression.kind==="constant"){const E=l.expression.evaluate(A,null,{},y,_);return this._calculate(E,E,E,A)}return this._calculate(l.expression.evaluate(new zr(Math.floor(A.zoom-1),A)),l.expression.evaluate(new zr(Math.floor(A.zoom),A)),l.expression.evaluate(new zr(Math.floor(A.zoom+1),A)),A)}}_calculate(l,A,y,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:l,to:A}:{from:y,to:A}}interpolate(l){return l}}class tl{constructor(l){this.specification=l}possiblyEvaluate(l,A,y,_){return!!l.expression.evaluate(A,null,{},y,_)}interpolate(){return!1}}class Hs{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const A in l){const y=l[A];y.specification.overridable&&this.overridableProperties.push(A);const _=this.defaultPropertyValues[A]=new Xh(y,void 0,void 0),E=this.defaultTransitionablePropertyValues[A]=new la(y,void 0);this.defaultTransitioningPropertyValues[A]=E.untransitioned(),this.defaultPossiblyEvaluatedValues[A]=_.possiblyEvaluate({})}}}Fn("DataDrivenProperty",si),Fn("DataConstantProperty",di),Fn("CrossFadedDataDrivenProperty",DA),Fn("CrossFadedProperty",ru),Fn("ColorRampProperty",tl);class dl extends Cn{constructor(l,A,y){if(super(),this.id=l.id,this.type=l.type,this._globalState=y,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter,this._featureFilter=Dl(l.filter,y)),A.layout&&(this._unevaluatedLayout=new Yp(A.layout,y)),A.paint)){this._transitionablePaint=new hh(A.paint,y);for(const _ in l.paint)this.setPaintProperty(_,l.paint[_],{validate:!1});for(const _ in l.layout)this.setLayoutProperty(_,l.layout[_],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new tc(A.paint)}}setFilter(l){this.filter=l,this._featureFilter=Dl(l,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}getLayoutAffectingGlobalStateRefs(){const l=new Set;if(this._unevaluatedLayout)for(const A in this._unevaluatedLayout._values){const y=this._unevaluatedLayout._values[A];for(const _ of y.getGlobalStateRefs())l.add(_)}for(const A of this._featureFilter.getGlobalStateRefs())l.add(A);return l}getPaintAffectingGlobalStateRefs(){var l;const A=new globalThis.Map;if(this._transitionablePaint)for(const y in this._transitionablePaint._values){const _=this._transitionablePaint._values[y].value;for(const E of _.getGlobalStateRefs()){const O=(l=A.get(E))!==null&&l!==void 0?l:[];O.push({name:y,value:_.value}),A.set(E,O)}}return A}setLayoutProperty(l,A,y={}){A!=null&&this._validate(Jc,`layers.${this.id}.layout.${l}`,l,A,y)||(l!=="visibility"?this._unevaluatedLayout.setValue(l,A):this.visibility=A)}getPaintProperty(l){return l.endsWith(Zh)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,A,y={}){if(A!=null&&this._validate(Ts,`layers.${this.id}.paint.${l}`,l,A,y))return!1;if(l.endsWith(Zh))return this._transitionablePaint.setTransition(l.slice(0,-11),A||void 0),!1;{const _=this._transitionablePaint._values[l],E=_.property.specification["property-type"]==="cross-faded-data-driven",O=_.value.isDataDriven(),D=_.value;this._transitionablePaint.setValue(l,A),this._handleSpecialPaintPropertyUpdate(l);const F=this._transitionablePaint._values[l].value;return F.isDataDriven()||O||E||this._handleOverridablePaintPropertyUpdate(l,D,F)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,A,y){return!1}isHidden(l,A=!1){return!!(this.minzoom&&l<(A?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,A){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,A)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,A)}serialize(){const l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),Ze(l,((A,y)=>!(A===void 0||y==="layout"&&!Object.keys(A).length||y==="paint"&&!Object.keys(A).length)))}_validate(l,A,y,_,E={}){return(!E||E.validate!==!1)&&Gp(this,l.call(Sc,{key:A,layerType:this.type,objectKey:y,value:_,styleSpec:xt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const l in this.paint._values){const A=this.paint.get(l);if(A instanceof el&&eu(A.property.specification)&&(A.value.kind==="source"||A.value.kind==="composite")&&A.value.isStateDependent)return!0}return!1}}let Pg;var Ic={get paint(){return Pg=Pg||new Hs({"raster-opacity":new di(xt.paint_raster["raster-opacity"]),"raster-hue-rotate":new di(xt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new di(xt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new di(xt.paint_raster["raster-brightness-max"]),"raster-saturation":new di(xt.paint_raster["raster-saturation"]),"raster-contrast":new di(xt.paint_raster["raster-contrast"]),"raster-resampling":new di(xt.paint_raster["raster-resampling"]),"raster-fade-duration":new di(xt.paint_raster["raster-fade-duration"])})}};class ou extends dl{constructor(l,A){super(l,Ic,A)}}const Zs={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class dh{constructor(l,A){this._structArray=l,this._pos1=A*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class $r{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,A){return l._trim(),A&&(l.isTransferred=!0,A.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){const A=Object.create(this.prototype);return A.arrayBuffer=l.arrayBuffer,A.length=l.length,A.capacity=l.arrayBuffer.byteLength/A.bytesPerElement,A._refreshViews(),A}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const A=this.uint8;this._refreshViews(),A&&this.uint8.set(A)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ki(h,l=1){let A=0,y=0;return{members:h.map((_=>{const E=Zs[_.type].BYTES_PER_ELEMENT,O=A=Uo(A,Math.max(l,E)),D=_.components||1;return y=Math.max(y,E),A+=E*D,{name:_.name,type:_.type,components:D,offset:O}})),size:Uo(A,Math.max(y,l)),alignment:l}}function Uo(h,l){return Math.ceil(h/l)*l}class ls extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A){const y=this.length;return this.resize(y+1),this.emplace(y,l,A)}emplace(l,A,y){const _=2*l;return this.int16[_+0]=A,this.int16[_+1]=y,l}}ls.prototype.bytesPerElement=4,Fn("StructArrayLayout2i4",ls);class Jh extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A,y){const _=this.length;return this.resize(_+1),this.emplace(_,l,A,y)}emplace(l,A,y,_){const E=3*l;return this.int16[E+0]=A,this.int16[E+1]=y,this.int16[E+2]=_,l}}Jh.prototype.bytesPerElement=6,Fn("StructArrayLayout3i6",Jh);class nc extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A,y,_){const E=this.length;return this.resize(E+1),this.emplace(E,l,A,y,_)}emplace(l,A,y,_,E){const O=4*l;return this.int16[O+0]=A,this.int16[O+1]=y,this.int16[O+2]=_,this.int16[O+3]=E,l}}nc.prototype.bytesPerElement=8,Fn("StructArrayLayout4i8",nc);class fh extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A,y,_,E,O){const D=this.length;return this.resize(D+1),this.emplace(D,l,A,y,_,E,O)}emplace(l,A,y,_,E,O,D){const F=6*l;return this.int16[F+0]=A,this.int16[F+1]=y,this.int16[F+2]=_,this.int16[F+3]=E,this.int16[F+4]=O,this.int16[F+5]=D,l}}fh.prototype.bytesPerElement=12,Fn("StructArrayLayout2i4i12",fh);class Uf extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A,y,_,E,O){const D=this.length;return this.resize(D+1),this.emplace(D,l,A,y,_,E,O)}emplace(l,A,y,_,E,O,D){const F=4*l,W=8*l;return this.int16[F+0]=A,this.int16[F+1]=y,this.uint8[W+4]=_,this.uint8[W+5]=E,this.uint8[W+6]=O,this.uint8[W+7]=D,l}}Uf.prototype.bytesPerElement=8,Fn("StructArrayLayout2i4ub8",Uf);class RA extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,A){const y=this.length;return this.resize(y+1),this.emplace(y,l,A)}emplace(l,A,y){const _=2*l;return this.float32[_+0]=A,this.float32[_+1]=y,l}}RA.prototype.bytesPerElement=8,Fn("StructArrayLayout2f8",RA);class nA extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,A,y,_,E,O,D,F,W,ee){const ae=this.length;return this.resize(ae+1),this.emplace(ae,l,A,y,_,E,O,D,F,W,ee)}emplace(l,A,y,_,E,O,D,F,W,ee,ae){const Ae=10*l;return this.uint16[Ae+0]=A,this.uint16[Ae+1]=y,this.uint16[Ae+2]=_,this.uint16[Ae+3]=E,this.uint16[Ae+4]=O,this.uint16[Ae+5]=D,this.uint16[Ae+6]=F,this.uint16[Ae+7]=W,this.uint16[Ae+8]=ee,this.uint16[Ae+9]=ae,l}}nA.prototype.bytesPerElement=20,Fn("StructArrayLayout10ui20",nA);class Lg extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,A,y,_,E,O,D,F){const W=this.length;return this.resize(W+1),this.emplace(W,l,A,y,_,E,O,D,F)}emplace(l,A,y,_,E,O,D,F,W){const ee=8*l;return this.uint16[ee+0]=A,this.uint16[ee+1]=y,this.uint16[ee+2]=_,this.uint16[ee+3]=E,this.uint16[ee+4]=O,this.uint16[ee+5]=D,this.uint16[ee+6]=F,this.uint16[ee+7]=W,l}}Lg.prototype.bytesPerElement=16,Fn("StructArrayLayout8ui16",Lg);class us extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,A,y,_,E,O,D,F,W,ee,ae,Ae){const fe=this.length;return this.resize(fe+1),this.emplace(fe,l,A,y,_,E,O,D,F,W,ee,ae,Ae)}emplace(l,A,y,_,E,O,D,F,W,ee,ae,Ae,fe){const be=12*l;return this.int16[be+0]=A,this.int16[be+1]=y,this.int16[be+2]=_,this.int16[be+3]=E,this.uint16[be+4]=O,this.uint16[be+5]=D,this.uint16[be+6]=F,this.uint16[be+7]=W,this.int16[be+8]=ee,this.int16[be+9]=ae,this.int16[be+10]=Ae,this.int16[be+11]=fe,l}}us.prototype.bytesPerElement=24,Fn("StructArrayLayout4i4ui4i24",us);class Tc extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,A,y){const _=this.length;return this.resize(_+1),this.emplace(_,l,A,y)}emplace(l,A,y,_){const E=3*l;return this.float32[E+0]=A,this.float32[E+1]=y,this.float32[E+2]=_,l}}Tc.prototype.bytesPerElement=12,Fn("StructArrayLayout3f12",Tc);class qd extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){const A=this.length;return this.resize(A+1),this.emplace(A,l)}emplace(l,A){return this.uint32[1*l+0]=A,l}}qd.prototype.bytesPerElement=4,Fn("StructArrayLayout1ul4",qd);class Yd extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,A,y,_,E,O,D,F,W){const ee=this.length;return this.resize(ee+1),this.emplace(ee,l,A,y,_,E,O,D,F,W)}emplace(l,A,y,_,E,O,D,F,W,ee){const ae=10*l,Ae=5*l;return this.int16[ae+0]=A,this.int16[ae+1]=y,this.int16[ae+2]=_,this.int16[ae+3]=E,this.int16[ae+4]=O,this.int16[ae+5]=D,this.uint32[Ae+3]=F,this.uint16[ae+8]=W,this.uint16[ae+9]=ee,l}}Yd.prototype.bytesPerElement=20,Fn("StructArrayLayout6i1ul2ui20",Yd);class ed extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A,y,_,E,O){const D=this.length;return this.resize(D+1),this.emplace(D,l,A,y,_,E,O)}emplace(l,A,y,_,E,O,D){const F=6*l;return this.int16[F+0]=A,this.int16[F+1]=y,this.int16[F+2]=_,this.int16[F+3]=E,this.int16[F+4]=O,this.int16[F+5]=D,l}}ed.prototype.bytesPerElement=12,Fn("StructArrayLayout2i2i2i12",ed);class Vp extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A,y,_,E){const O=this.length;return this.resize(O+1),this.emplace(O,l,A,y,_,E)}emplace(l,A,y,_,E,O){const D=4*l,F=8*l;return this.float32[D+0]=A,this.float32[D+1]=y,this.float32[D+2]=_,this.int16[F+6]=E,this.int16[F+7]=O,l}}Vp.prototype.bytesPerElement=16,Fn("StructArrayLayout2f1f2i16",Vp);class Kf extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A,y,_,E,O){const D=this.length;return this.resize(D+1),this.emplace(D,l,A,y,_,E,O)}emplace(l,A,y,_,E,O,D){const F=16*l,W=4*l,ee=8*l;return this.uint8[F+0]=A,this.uint8[F+1]=y,this.float32[W+1]=_,this.float32[W+2]=E,this.int16[ee+6]=O,this.int16[ee+7]=D,l}}Kf.prototype.bytesPerElement=16,Fn("StructArrayLayout2ub2f2i16",Kf);class PA extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,A,y){const _=this.length;return this.resize(_+1),this.emplace(_,l,A,y)}emplace(l,A,y,_){const E=3*l;return this.uint16[E+0]=A,this.uint16[E+1]=y,this.uint16[E+2]=_,l}}PA.prototype.bytesPerElement=6,Fn("StructArrayLayout3ui6",PA);class ph extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,A,y,_,E,O,D,F,W,ee,ae,Ae,fe,be,we,Be,ze){const at=this.length;return this.resize(at+1),this.emplace(at,l,A,y,_,E,O,D,F,W,ee,ae,Ae,fe,be,we,Be,ze)}emplace(l,A,y,_,E,O,D,F,W,ee,ae,Ae,fe,be,we,Be,ze,at){const We=24*l,Xe=12*l,ct=48*l;return this.int16[We+0]=A,this.int16[We+1]=y,this.uint16[We+2]=_,this.uint16[We+3]=E,this.uint32[Xe+2]=O,this.uint32[Xe+3]=D,this.uint32[Xe+4]=F,this.uint16[We+10]=W,this.uint16[We+11]=ee,this.uint16[We+12]=ae,this.float32[Xe+7]=Ae,this.float32[Xe+8]=fe,this.uint8[ct+36]=be,this.uint8[ct+37]=we,this.uint8[ct+38]=Be,this.uint32[Xe+10]=ze,this.int16[We+22]=at,l}}ph.prototype.bytesPerElement=48,Fn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ph);class nl extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,A,y,_,E,O,D,F,W,ee,ae,Ae,fe,be,we,Be,ze,at,We,Xe,ct,pt,Nt,sn,nn,fn,Kn,yn){const on=this.length;return this.resize(on+1),this.emplace(on,l,A,y,_,E,O,D,F,W,ee,ae,Ae,fe,be,we,Be,ze,at,We,Xe,ct,pt,Nt,sn,nn,fn,Kn,yn)}emplace(l,A,y,_,E,O,D,F,W,ee,ae,Ae,fe,be,we,Be,ze,at,We,Xe,ct,pt,Nt,sn,nn,fn,Kn,yn,on){const Yt=32*l,ii=16*l;return this.int16[Yt+0]=A,this.int16[Yt+1]=y,this.int16[Yt+2]=_,this.int16[Yt+3]=E,this.int16[Yt+4]=O,this.int16[Yt+5]=D,this.int16[Yt+6]=F,this.int16[Yt+7]=W,this.uint16[Yt+8]=ee,this.uint16[Yt+9]=ae,this.uint16[Yt+10]=Ae,this.uint16[Yt+11]=fe,this.uint16[Yt+12]=be,this.uint16[Yt+13]=we,this.uint16[Yt+14]=Be,this.uint16[Yt+15]=ze,this.uint16[Yt+16]=at,this.uint16[Yt+17]=We,this.uint16[Yt+18]=Xe,this.uint16[Yt+19]=ct,this.uint16[Yt+20]=pt,this.uint16[Yt+21]=Nt,this.uint16[Yt+22]=sn,this.uint32[ii+12]=nn,this.float32[ii+13]=fn,this.float32[ii+14]=Kn,this.uint16[Yt+30]=yn,this.uint16[Yt+31]=on,l}}nl.prototype.bytesPerElement=64,Fn("StructArrayLayout8i15ui1ul2f2ui64",nl);class gs extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){const A=this.length;return this.resize(A+1),this.emplace(A,l)}emplace(l,A){return this.float32[1*l+0]=A,l}}gs.prototype.bytesPerElement=4,Fn("StructArrayLayout1f4",gs);class kc extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,A,y){const _=this.length;return this.resize(_+1),this.emplace(_,l,A,y)}emplace(l,A,y,_){const E=3*l;return this.uint16[6*l+0]=A,this.float32[E+1]=y,this.float32[E+2]=_,l}}kc.prototype.bytesPerElement=12,Fn("StructArrayLayout1ui2f12",kc);class td extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,A,y){const _=this.length;return this.resize(_+1),this.emplace(_,l,A,y)}emplace(l,A,y,_){const E=4*l;return this.uint32[2*l+0]=A,this.uint16[E+2]=y,this.uint16[E+3]=_,l}}td.prototype.bytesPerElement=8,Fn("StructArrayLayout1ul2ui8",td);class nd extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,A){const y=this.length;return this.resize(y+1),this.emplace(y,l,A)}emplace(l,A,y){const _=2*l;return this.uint16[_+0]=A,this.uint16[_+1]=y,l}}nd.prototype.bytesPerElement=4,Fn("StructArrayLayout2ui4",nd);class Ff extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){const A=this.length;return this.resize(A+1),this.emplace(A,l)}emplace(l,A){return this.uint16[1*l+0]=A,l}}Ff.prototype.bytesPerElement=2,Fn("StructArrayLayout1ui2",Ff);class ic extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,A,y,_){const E=this.length;return this.resize(E+1),this.emplace(E,l,A,y,_)}emplace(l,A,y,_,E){const O=4*l;return this.float32[O+0]=A,this.float32[O+1]=y,this.float32[O+2]=_,this.float32[O+3]=E,l}}ic.prototype.bytesPerElement=16,Fn("StructArrayLayout4f16",ic);class I extends dh{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new c(this.anchorPointX,this.anchorPointY)}}I.prototype.size=20;class u extends Yd{get(l){return new I(this,l)}}Fn("CollisionBoxArray",u);class p extends dh{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}p.prototype.size=48;class C extends ph{get(l){return new p(this,l)}}Fn("PlacedSymbolArray",C);class S extends dh{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}S.prototype.size=64;class k extends nl{get(l){return new S(this,l)}}Fn("SymbolInstanceArray",k);class K extends gs{getoffsetX(l){return this.float32[1*l+0]}}Fn("GlyphOffsetArray",K);class N extends Jh{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}Fn("SymbolLineVertexArray",N);class $ extends dh{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}$.prototype.size=12;class se extends kc{get(l){return new $(this,l)}}Fn("TextAnchorOffsetArray",se);class ue extends dh{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ue.prototype.size=8;class ye extends td{get(l){return new ue(this,l)}}Fn("FeatureIndexArray",ye);class me extends ls{}class Se extends ls{}class Ke extends ls{}class Je extends fh{}class nt extends Uf{}class tt extends RA{}class rt extends nA{}class dt extends Lg{}class st extends us{}class ft extends Tc{}class Ct extends qd{}class lt extends ed{}class Ot extends Kf{}class Ft extends PA{}class zt extends nd{}const Gt=ki([{name:"a_pos",components:2,type:"Int16"}],4),{members:Qt}=Gt;class dn{constructor(l=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=l}prepareSegment(l,A,y,_){const E=this.segments[this.segments.length-1];return l>dn.MAX_VERTEX_ARRAY_LENGTH&&Mt(`Max vertices per segment is ${dn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${dn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!E||E.vertexLength+l>dn.MAX_VERTEX_ARRAY_LENGTH||E.sortKey!==_?this.createNewSegment(A,y,_):E}createNewSegment(l,A,y){const _={vertexOffset:l.length,primitiveOffset:A.length,vertexLength:0,primitiveLength:0,vaos:{}};return y!==void 0&&(_.sortKey=y),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(_),_}getOrCreateLatestSegment(l,A,y){return this.prepareSegment(0,l,A,y)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const l of this.segments)for(const A in l.vaos)l.vaos[A].destroy()}static simpleSegment(l,A,y,_){return new dn([{vertexOffset:l,primitiveOffset:A,vertexLength:y,primitiveLength:_,vaos:{},sortKey:0}])}}function Rn(h,l){return 256*(h=kt(Math.floor(h),0,255))+kt(Math.floor(l),0,255)}dn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Fn("SegmentVector",dn);const An=ki([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ai=ki([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var nr,fo,Bo,po={exports:{}},kr={exports:{}},Dr={exports:{}},Ma=(function(){if(Bo)return po.exports;Bo=1;var h=(nr||(nr=1,kr.exports=function(A,y){var _,E,O,D,F,W,ee,ae;for(E=A.length-(_=3&A.length),O=y,F=3432918353,W=461845907,ae=0;ae<E;)ee=255&A.charCodeAt(ae)|(255&A.charCodeAt(++ae))<<8|(255&A.charCodeAt(++ae))<<16|(255&A.charCodeAt(++ae))<<24,++ae,O=27492+(65535&(D=5*(65535&(O=(O^=ee=(65535&(ee=(ee=(65535&ee)*F+(((ee>>>16)*F&65535)<<16)&4294967295)<<15|ee>>>17))*W+(((ee>>>16)*W&65535)<<16)&4294967295)<<13|O>>>19))+((5*(O>>>16)&65535)<<16)&4294967295))+((58964+(D>>>16)&65535)<<16);switch(ee=0,_){case 3:ee^=(255&A.charCodeAt(ae+2))<<16;case 2:ee^=(255&A.charCodeAt(ae+1))<<8;case 1:O^=ee=(65535&(ee=(ee=(65535&(ee^=255&A.charCodeAt(ae)))*F+(((ee>>>16)*F&65535)<<16)&4294967295)<<15|ee>>>17))*W+(((ee>>>16)*W&65535)<<16)&4294967295}return O^=A.length,O=2246822507*(65535&(O^=O>>>16))+((2246822507*(O>>>16)&65535)<<16)&4294967295,O=3266489909*(65535&(O^=O>>>13))+((3266489909*(O>>>16)&65535)<<16)&4294967295,(O^=O>>>16)>>>0}),kr.exports),l=(fo||(fo=1,Dr.exports=function(A,y){for(var _,E=A.length,O=y^E,D=0;E>=4;)_=1540483477*(65535&(_=255&A.charCodeAt(D)|(255&A.charCodeAt(++D))<<8|(255&A.charCodeAt(++D))<<16|(255&A.charCodeAt(++D))<<24))+((1540483477*(_>>>16)&65535)<<16),O=1540483477*(65535&O)+((1540483477*(O>>>16)&65535)<<16)^(_=1540483477*(65535&(_^=_>>>24))+((1540483477*(_>>>16)&65535)<<16)),E-=4,++D;switch(E){case 3:O^=(255&A.charCodeAt(D+2))<<16;case 2:O^=(255&A.charCodeAt(D+1))<<8;case 1:O=1540483477*(65535&(O^=255&A.charCodeAt(D)))+((1540483477*(O>>>16)&65535)<<16)}return O=1540483477*(65535&(O^=O>>>13))+((1540483477*(O>>>16)&65535)<<16),(O^=O>>>15)>>>0}),Dr.exports);return po.exports=h,po.exports.murmur3=h,po.exports.murmur2=l,po.exports})(),es=d(Ma);class Ns{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,A,y,_){this.ids.push(Ko(l)),this.positions.push(A,y,_)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const A=Ko(l);let y=0,_=this.ids.length-1;for(;y<_;){const O=y+_>>1;this.ids[O]>=A?_=O:y=O+1}const E=[];for(;this.ids[y]===A;)E.push({index:this.positions[3*y],start:this.positions[3*y+1],end:this.positions[3*y+2]}),y++;return E}static serialize(l,A){const y=new Float64Array(l.ids),_=new Uint32Array(l.positions);return ks(y,_,0,y.length-1),A&&A.push(y.buffer,_.buffer),{ids:y,positions:_}}static deserialize(l){const A=new Ns;return A.ids=l.ids,A.positions=l.positions,A.indexed=!0,A}}function Ko(h){const l=+h;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:es(String(h))}function ks(h,l,A,y){for(;A<y;){const _=h[A+y>>1];let E=A-1,O=y+1;for(;;){do E++;while(h[E]<_);do O--;while(h[O]>_);if(E>=O)break;Na(h,E,O),Na(l,3*E,3*O),Na(l,3*E+1,3*O+1),Na(l,3*E+2,3*O+2)}O-A<y-O?(ks(h,l,A,O),A=O+1):(ks(h,l,O+1,y),y=O)}}function Na(h,l,A){const y=h[l];h[l]=h[A],h[A]=y}Fn("FeaturePositionMap",Ns);class fl{constructor(l,A){this.gl=l.gl,this.location=A}}class Dc extends fl{constructor(l,A){super(l,A),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class Ou extends fl{constructor(l,A){super(l,A),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class iA extends fl{constructor(l,A){super(l,A),this.current=Ji.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}const h0=new Float32Array(16);function id(h){return[Rn(255*h.r,255*h.g),Rn(255*h.b,255*h.a)]}class su{constructor(l,A,y){this.value=l,this.uniformNames=A.map((_=>`u_${_}`)),this.type=y}setUniform(l,A,y){l.set(y.constantOr(this.value))}getBinding(l,A,y){return this.type==="color"?new iA(l,A):new Dc(l,A)}}class Gs{constructor(l,A){this.uniformNames=A.map((y=>`u_${y}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,A){this.pixelRatioFrom=A.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=A.tlbr,this.patternTo=l.tlbr}setConstantDashPositions(l,A){this.dashTo=[0,l.y,l.height,l.width],this.dashFrom=[0,A.y,A.height,A.width]}setUniform(l,A,y,_){let E=null;_==="u_pattern_to"?E=this.patternTo:_==="u_pattern_from"?E=this.patternFrom:_==="u_dasharray_to"?E=this.dashTo:_==="u_dasharray_from"?E=this.dashFrom:_==="u_pixel_ratio_to"?E=this.pixelRatioTo:_==="u_pixel_ratio_from"&&(E=this.pixelRatioFrom),E!==null&&l.set(E)}getBinding(l,A,y){return y.substr(0,9)==="u_pattern"||y.substr(0,12)==="u_dasharray_"?new Ou(l,A):new Dc(l,A)}}class wa{constructor(l,A,y,_){this.expression=l,this.type=y,this.maxValue=0,this.paintVertexAttributes=A.map((E=>({name:`a_${E}`,type:"Float32",components:y==="color"?2:1,offset:0}))),this.paintVertexArray=new _}populatePaintArray(l,A,y){const _=this.paintVertexArray.length,E=this.expression.evaluate(new zr(0,y),A,{},y.canonical,[],y.formattedSection);this.paintVertexArray.resize(l),this._setPaintValue(_,l,E)}updatePaintArray(l,A,y,_,E){const O=this.expression.evaluate(new zr(0,E),y,_);this._setPaintValue(l,A,O)}_setPaintValue(l,A,y){if(this.type==="color"){const _=id(y);for(let E=l;E<A;E++)this.paintVertexArray.emplace(E,_[0],_[1])}else{for(let _=l;_<A;_++)this.paintVertexArray.emplace(_,y);this.maxValue=Math.max(this.maxValue,Math.abs(y))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ua{constructor(l,A,y,_,E,O){this.expression=l,this.uniformNames=A.map((D=>`u_${D}_t`)),this.type=y,this.useIntegerZoom=_,this.zoom=E,this.maxValue=0,this.paintVertexAttributes=A.map((D=>({name:`a_${D}`,type:"Float32",components:y==="color"?4:2,offset:0}))),this.paintVertexArray=new O}populatePaintArray(l,A,y){const _=this.expression.evaluate(new zr(this.zoom,y),A,{},y.canonical,[],y.formattedSection),E=this.expression.evaluate(new zr(this.zoom+1,y),A,{},y.canonical,[],y.formattedSection),O=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(O,l,_,E)}updatePaintArray(l,A,y,_,E){const O=this.expression.evaluate(new zr(this.zoom,E),y,_),D=this.expression.evaluate(new zr(this.zoom+1,E),y,_);this._setPaintValue(l,A,O,D)}_setPaintValue(l,A,y,_){if(this.type==="color"){const E=id(y),O=id(_);for(let D=l;D<A;D++)this.paintVertexArray.emplace(D,E[0],E[1],O[0],O[1])}else{for(let E=l;E<A;E++)this.paintVertexArray.emplace(E,y,_);this.maxValue=Math.max(this.maxValue,Math.abs(y),Math.abs(_))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,A){const y=this.useIntegerZoom?Math.floor(A.zoom):A.zoom,_=kt(this.expression.interpolationFactor(y,this.zoom,this.zoom+1),0,1);l.set(_)}getBinding(l,A,y){return new Dc(l,A)}}class au{constructor(l,A,y,_,E,O){this.expression=l,this.type=A,this.useIntegerZoom=y,this.zoom=_,this.layerId=O,this.zoomInPaintVertexArray=new E,this.zoomOutPaintVertexArray=new E}populatePaintArray(l,A,y){const _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(_,l,this.getPositionIds(A),y)}updatePaintArray(l,A,y,_,E){this._setPaintValues(l,A,this.getPositionIds(y),E)}_setPaintValues(l,A,y,_){const E=this.getPositions(_);if(!E||!y)return;const O=E[y.min],D=E[y.mid],F=E[y.max];if(O&&D&&F)for(let W=l;W<A;W++)this.emplace(this.zoomInPaintVertexArray,W,D,O),this.emplace(this.zoomOutPaintVertexArray,W,D,F)}upload(l){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const A=this.getVertexAttributes();this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,A,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,A,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ts extends au{getPositions(l){return l.imagePositions}getPositionIds(l){return l.patterns&&l.patterns[this.layerId]}getVertexAttributes(){return An.members}emplace(l,A,y,_){l.emplace(A,y.tlbr[0],y.tlbr[1],y.tlbr[2],y.tlbr[3],_.tlbr[0],_.tlbr[1],_.tlbr[2],_.tlbr[3],y.pixelRatio,_.pixelRatio)}}class Sa extends au{getPositions(l){return l.dashPositions}getPositionIds(l){return l.dashes&&l.dashes[this.layerId]}getVertexAttributes(){return ai.members}emplace(l,A,y,_){l.emplace(A,0,y.y,y.height,y.width,0,_.y,_.height,_.width)}}class Kl{constructor(l,A,y){this.binders={},this._buffers=[];const _=[];for(const E in l.paint._values){if(!y(E))continue;const O=l.paint.get(E);if(!(O instanceof el&&eu(O.property.specification)))continue;const D=d0(E,l.type),F=O.value,W=O.property.specification.type,ee=O.property.useIntegerZoom,ae=O.property.specification["property-type"],Ae=ae==="cross-faded"||ae==="cross-faded-data-driven";if(F.kind==="constant")this.binders[E]=Ae?new Gs(F.value,D):new su(F.value,D,W),_.push(`/u_${E}`);else if(F.kind==="source"||Ae){const fe=zf(E,W,"source");this.binders[E]=Ae?E==="line-dasharray"?new Sa(F,W,ee,A,fe,l.id):new ts(F,W,ee,A,fe,l.id):new wa(F,D,W,fe),_.push(`/a_${E}`)}else{const fe=zf(E,W,"composite");this.binders[E]=new ua(F,D,W,ee,A,fe),_.push(`/z_${E}`)}}this.cacheKey=_.sort().join("")}getMaxValue(l){const A=this.binders[l];return A instanceof wa||A instanceof ua?A.maxValue:0}populatePaintArrays(l,A,y){for(const _ in this.binders){const E=this.binders[_];(E instanceof wa||E instanceof ua||E instanceof au)&&E.populatePaintArray(l,A,y)}}setConstantPatternPositions(l,A){for(const y in this.binders){const _=this.binders[y];_ instanceof Gs&&_.setConstantPatternPositions(l,A)}}setConstantDashPositions(l,A){for(const y in this.binders){const _=this.binders[y];_ instanceof Gs&&_.setConstantDashPositions(l,A)}}updatePaintArrays(l,A,y,_,E){let O=!1;for(const D in l){const F=A.getPositions(D);for(const W of F){const ee=y.feature(W.index);for(const ae in this.binders){const Ae=this.binders[ae];if((Ae instanceof wa||Ae instanceof ua||Ae instanceof au)&&Ae.expression.isStateDependent===!0){const fe=_.paint.get(ae);Ae.expression=fe.value,Ae.updatePaintArray(W.start,W.end,ee,l[D],E),O=!0}}}}return O}defines(){const l=[];for(const A in this.binders){const y=this.binders[A];(y instanceof su||y instanceof Gs)&&l.push(...y.uniformNames.map((_=>`#define HAS_UNIFORM_${_}`)))}return l}getBinderAttributes(){const l=[];for(const A in this.binders){const y=this.binders[A];if(y instanceof wa||y instanceof ua)for(let _=0;_<y.paintVertexAttributes.length;_++)l.push(y.paintVertexAttributes[_].name);else if(y instanceof au){const _=y.getVertexAttributes();for(const E of _)l.push(E.name)}}return l}getBinderUniforms(){const l=[];for(const A in this.binders){const y=this.binders[A];if(y instanceof su||y instanceof Gs||y instanceof ua)for(const _ of y.uniformNames)l.push(_)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,A){const y=[];for(const _ in this.binders){const E=this.binders[_];if(E instanceof su||E instanceof Gs||E instanceof ua){for(const O of E.uniformNames)if(A[O]){const D=E.getBinding(l,A[O],O);y.push({name:O,property:_,binding:D})}}}return y}setUniforms(l,A,y,_){for(const{name:E,property:O,binding:D}of A)this.binders[O].setUniform(D,_,y.get(O),E)}updatePaintBuffers(l){this._buffers=[];for(const A in this.binders){const y=this.binders[A];if(l&&y instanceof au){const _=l.fromScale===2?y.zoomInPaintVertexBuffer:y.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(y instanceof wa||y instanceof ua)&&y.paintVertexBuffer&&this._buffers.push(y.paintVertexBuffer)}}upload(l){for(const A in this.binders){const y=this.binders[A];(y instanceof wa||y instanceof ua||y instanceof au)&&y.upload(l)}this.updatePaintBuffers()}destroy(){for(const l in this.binders){const A=this.binders[l];(A instanceof wa||A instanceof ua||A instanceof au)&&A.destroy()}}}class Yo{constructor(l,A,y=()=>!0){this.programConfigurations={};for(const _ of l)this.programConfigurations[_.id]=new Kl(_,A,y);this.needsUpload=!1,this._featureMap=new Ns,this._bufferOffset=0}populatePaintArrays(l,A,y,_){for(const E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(l,A,_);A.id!==void 0&&this._featureMap.add(A.id,y,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,A,y,_){for(const E of y)this.needsUpload=this.programConfigurations[E.id].updatePaintArrays(l,this._featureMap,A,E,_)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(const A in this.programConfigurations)this.programConfigurations[A].upload(l);this.needsUpload=!1}}destroy(){for(const l in this.programConfigurations)this.programConfigurations[l].destroy()}}function d0(h,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(`${l}-`,"").replace(/-/g,"_")]}function zf(h,l,A){const y={color:{source:RA,composite:ic},number:{source:gs,composite:RA}},_=(function(E){return{"line-pattern":{source:rt,composite:rt},"fill-pattern":{source:rt,composite:rt},"fill-extrusion-pattern":{source:rt,composite:rt},"line-dasharray":{source:dt,composite:dt}}[E]})(h);return _&&_[A]||y[l][A]}Fn("ConstantBinder",su),Fn("CrossFadedConstantBinder",Gs),Fn("SourceExpressionBinder",wa),Fn("CrossFadedPatternBinder",ts),Fn("CrossFadedDasharrayBinder",Sa),Fn("CompositeExpressionBinder",ua),Fn("ProgramConfiguration",Kl,{omit:["_buffers"]}),Fn("ProgramConfigurationSet",Yo);const f0=Math.pow(2,14)-1,p0=-f0-1;function ca(h){const l=mt/h.extent,A=h.loadGeometry();for(let y=0;y<A.length;y++){const _=A[y];for(let E=0;E<_.length;E++){const O=_[E],D=Math.round(O.x*l),F=Math.round(O.y*l);O.x=kt(D,p0,f0),O.y=kt(F,p0,f0),(D<O.x||D>O.x+1||F<O.y||F>O.y+1)&&Mt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return A}function mh(h,l){return{type:h.type,id:h.id,properties:h.properties,geometry:l?ca(h):[]}}const LA=-32768;function Ug(h,l,A,y,_){h.emplaceBack(LA+8*l+y,LA+8*A+_)}class rd{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((A=>A.id)),this.index=l.index,this.hasDependencies=!1,this.layoutVertexArray=new Se,this.indexArray=new Ft,this.segments=new dn,this.programConfigurations=new Yo(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter((A=>A.isStateDependent())).map((A=>A.id))}populate(l,A,y){const _=this.layers[0],E=[];let O=null,D=!1,F=_.type==="heatmap";if(_.type==="circle"){const ee=_;O=ee.layout.get("circle-sort-key"),D=!O.isConstant(),F=F||ee.paint.get("circle-pitch-alignment")==="map"}const W=F?A.subdivisionGranularity.circle:1;for(const{feature:ee,id:ae,index:Ae,sourceLayerIndex:fe}of l){const be=this.layers[0]._featureFilter.needGeometry,we=mh(ee,be);if(!this.layers[0]._featureFilter.filter(new zr(this.zoom),we,y))continue;const Be=D?O.evaluate(we,{},y):void 0,ze={id:ae,properties:ee.properties,type:ee.type,sourceLayerIndex:fe,index:Ae,geometry:be?we.geometry:ca(ee),patterns:{},sortKey:Be};E.push(ze)}D&&E.sort(((ee,ae)=>ee.sortKey-ae.sortKey));for(const ee of E){const{geometry:ae,index:Ae,sourceLayerIndex:fe}=ee,be=l[Ae].feature;this.addFeature(ee,ae,Ae,y,W),A.featureIndex.insert(be,ae,Ae,fe,this.index)}}update(l,A,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,A,this.stateDependentLayers,{imagePositions:y})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Qt),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,A,y,_,E=1){let O;switch(E){case 1:O=[0,7];break;case 3:O=[0,2,5,7];break;case 5:O=[0,1,3,4,6,7];break;case 7:O=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${E}; valid values are 1, 3, 5, 7.`)}const D=O.length;for(const F of A)for(const W of F){const ee=W.x,ae=W.y;if(ee<0||ee>=mt||ae<0||ae>=mt)continue;const Ae=this.segments.prepareSegment(D*D,this.layoutVertexArray,this.indexArray,l.sortKey),fe=Ae.vertexLength;for(let be=0;be<D;be++)for(let we=0;we<D;we++)Ug(this.layoutVertexArray,ee,ae,O[we],O[be]);for(let be=0;be<D-1;be++)for(let we=0;we<D-1;we++){const Be=fe+be*D+we,ze=fe+(be+1)*D+we;this.indexArray.emplaceBack(Be,ze+1,Be+1),this.indexArray.emplaceBack(Be,ze,ze+1)}Ae.vertexLength+=D*D,Ae.primitiveLength+=(D-1)*(D-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,y,{imagePositions:{},canonical:_})}}function m0(h,l){for(let A=0;A<h.length;A++)if(sd(l,h[A]))return!0;for(let A=0;A<l.length;A++)if(sd(h,l[A]))return!0;return!!Kg(h,l)}function od(h,l,A){return!!sd(h,l)||!!Ws(l,h,A)}function Rc(h,l){if(h.length===1)return ir(l,h[0]);for(let A=0;A<l.length;A++){const y=l[A];for(let _=0;_<y.length;_++)if(sd(h,y[_]))return!0}for(let A=0;A<h.length;A++)if(ir(l,h[A]))return!0;for(let A=0;A<l.length;A++)if(Kg(h,l[A]))return!0;return!1}function jf(h,l,A){if(h.length>1){if(Kg(h,l))return!0;for(let y=0;y<l.length;y++)if(Ws(l[y],h,A))return!0}for(let y=0;y<h.length;y++)if(Ws(h[y],l,A))return!0;return!1}function Kg(h,l){if(h.length===0||l.length===0)return!1;for(let A=0;A<h.length-1;A++){const y=h[A],_=h[A+1];for(let E=0;E<l.length-1;E++)if(Fg(y,_,l[E],l[E+1]))return!0}return!1}function Fg(h,l,A,y){return Kt(h,A,y)!==Kt(l,A,y)&&Kt(h,l,A)!==Kt(h,l,y)}function Ws(h,l,A){const y=A*A;if(l.length===1)return h.distSqr(l[0])<y;for(let _=1;_<l.length;_++)if(Aa(h,l[_-1],l[_])<y)return!0;return!1}function Aa(h,l,A){const y=l.distSqr(A);if(y===0)return h.distSqr(l);const _=((h.x-l.x)*(A.x-l.x)+(h.y-l.y)*(A.y-l.y))/y;return h.distSqr(_<0?l:_>1?A:A.sub(l)._mult(_)._add(l))}function ir(h,l){let A,y,_,E=!1;for(let O=0;O<h.length;O++){A=h[O];for(let D=0,F=A.length-1;D<A.length;F=D++)y=A[D],_=A[F],y.y>l.y!=_.y>l.y&&l.x<(_.x-y.x)*(l.y-y.y)/(_.y-y.y)+y.x&&(E=!E)}return E}function sd(h,l){let A=!1;for(let y=0,_=h.length-1;y<h.length;_=y++){const E=h[y],O=h[_];E.y>l.y!=O.y>l.y&&l.x<(O.x-E.x)*(l.y-E.y)/(O.y-E.y)+E.x&&(A=!A)}return A}function ty(h,l,A){const y=A[0],_=A[2];if(h.x<y.x&&l.x<y.x||h.x>_.x&&l.x>_.x||h.y<y.y&&l.y<y.y||h.y>_.y&&l.y>_.y)return!1;const E=Kt(h,l,A[0]);return E!==Kt(h,l,A[1])||E!==Kt(h,l,A[2])||E!==Kt(h,l,A[3])}function rA(h,l,A){const y=l.paint.get(h).value;return y.kind==="constant"?y.value:A.programConfigurations.get(l.id).getMaxValue(h)}function Nf(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function $p(h,l,A,y,_){if(!l[0]&&!l[1])return h;const E=c.convert(l)._mult(_);A==="viewport"&&E._rotate(-y);const O=[];for(let D=0;D<h.length;D++)O.push(h[D].sub(E));return O}function zg(h){const l=[];for(let A=0;A<h.length;A++){const y=h[A],_=l.at(-1);(A===0||_&&!y.equals(_))&&l.push(y)}return l}function lu({queryGeometry:h,size:l},A){return od(h,A,l)}function $2({queryGeometry:h,size:l,transform:A,unwrappedTileID:y,getElevation:_},E){return od(h,E,l*(A.projectTileCoordinates(E.x,E.y,y,_).signedDistanceFromCamera/A.cameraToCenterDistance))}function ny({queryGeometry:h,size:l,transform:A,unwrappedTileID:y,getElevation:_},E){const O=A.projectTileCoordinates(E.x,E.y,y,_).signedDistanceFromCamera,D=l*(A.cameraToCenterDistance/O);return od(h,jg(E,A,y,_),D)}function iy({queryGeometry:h,size:l,transform:A,unwrappedTileID:y,getElevation:_},E){return od(h,jg(E,A,y,_),l)}function Wv({queryGeometry:h,size:l,transform:A,unwrappedTileID:y,getElevation:_,pitchAlignment:E="map",pitchScale:O="map"},D){const F=E==="map"?O==="map"?lu:$2:O==="map"?ny:iy,W={queryGeometry:h,size:l,transform:A,unwrappedTileID:y,getElevation:_};for(const ee of D)for(const ae of ee)if(F(W,ae))return!0;return!1}function jg(h,l,A,y){const _=l.projectTileCoordinates(h.x,h.y,A,y).point;return new c((.5*_.x+.5)*l.width,(.5*-_.y+.5)*l.height)}let Qv,ry;Fn("CircleBucket",rd,{omit:["layers"]});var qv={get paint(){return ry=ry||new Hs({"circle-radius":new si(xt.paint_circle["circle-radius"]),"circle-color":new si(xt.paint_circle["circle-color"]),"circle-blur":new si(xt.paint_circle["circle-blur"]),"circle-opacity":new si(xt.paint_circle["circle-opacity"]),"circle-translate":new di(xt.paint_circle["circle-translate"]),"circle-translate-anchor":new di(xt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new di(xt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new di(xt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new si(xt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new si(xt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new si(xt.paint_circle["circle-stroke-opacity"])})},get layout(){return Qv=Qv||new Hs({"circle-sort-key":new si(xt.layout_circle["circle-sort-key"])})}};class gh extends dl{constructor(l,A){super(l,qv,A)}createBucket(l){return new rd(l)}queryRadius(l){const A=l;return rA("circle-radius",this,A)+rA("circle-stroke-width",this,A)+Nf(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:l,feature:A,featureState:y,geometry:_,transform:E,pixelsToTileUnits:O,unwrappedTileID:D,getElevation:F}){const W=$p(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-E.bearingInRadians,O),ee=this.paint.get("circle-radius").evaluate(A,y)+this.paint.get("circle-stroke-width").evaluate(A,y),ae=this.paint.get("circle-pitch-scale"),Ae=this.paint.get("circle-pitch-alignment");let fe,be;return Ae==="map"?(fe=W,be=ee*O):(fe=(function(we,Be,ze,at){return we.map((We=>jg(We,Be,ze,at)))})(W,E,D,F),be=ee),Wv({queryGeometry:fe,size:be,transform:E,unwrappedTileID:D,getElevation:F,pitchAlignment:Ae,pitchScale:ae},_)}}class uu extends rd{}let g0;Fn("HeatmapBucket",uu,{omit:["layers"]});var oy={get paint(){return g0=g0||new Hs({"heatmap-radius":new si(xt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new si(xt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new di(xt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new tl(xt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new di(xt.paint_heatmap["heatmap-opacity"])})}};function Hp(h,{width:l,height:A},y,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==l*A*y)throw new RangeError(`mismatched image size. expected: ${_.length} but got: ${l*A*y}`)}else _=new Uint8Array(l*A*y);return h.width=l,h.height=A,h.data=_,h}function Yv(h,{width:l,height:A},y){if(l===h.width&&A===h.height)return;const _=Hp({},{width:l,height:A},y);Ng(h,_,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,l),height:Math.min(h.height,A)},y),h.width=l,h.height=A,h.data=_.data}function Ng(h,l,A,y,_,E){if(_.width===0||_.height===0)return l;if(_.width>h.width||_.height>h.height||A.x>h.width-_.width||A.y>h.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>l.width||_.height>l.height||y.x>l.width-_.width||y.y>l.height-_.height)throw new RangeError("out of range destination coordinates for image copy");const O=h.data,D=l.data;if(O===D)throw new Error("srcData equals dstData, so image is already copied");for(let F=0;F<_.height;F++){const W=((A.y+F)*h.width+A.x)*E,ee=((y.y+F)*l.width+y.x)*E;for(let ae=0;ae<_.width*E;ae++)D[ee+ae]=O[W+ae]}return l}class ad{constructor(l,A){Hp(this,l,1,A)}resize(l){Yv(this,l,1)}clone(){return new ad({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,A,y,_,E){Ng(l,A,y,_,E,1)}}class Xs{constructor(l,A){Hp(this,l,4,A)}resize(l){Yv(this,l,4)}replace(l,A){A?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new Xs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,A,y,_,E){Ng(l,A,y,_,E,4)}setPixel(l,A,y){const _=4*(l*this.width+A);this.data[_+0]=Math.round(255*y.r/y.a),this.data[_+1]=Math.round(255*y.g/y.a),this.data[_+2]=Math.round(255*y.b/y.a),this.data[_+3]=Math.round(255*y.a)}}function Gg(h){const l={},A=h.resolution||256,y=h.clips?h.clips.length:1,_=h.image||new Xs({width:A,height:y});if(Math.log(A)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${A}`);const E=(O,D,F)=>{l[h.evaluationKey]=F;const W=h.expression.evaluate(l);_.setPixel(O/4/A,D/4,W)};if(h.clips)for(let O=0,D=0;O<y;++O,D+=4*A)for(let F=0,W=0;F<A;F++,W+=4){const ee=F/(A-1),{start:ae,end:Ae}=h.clips[O];E(D,W,ae*(1-ee)+Ae*ee)}else for(let O=0,D=0;O<A;O++,D+=4)E(0,D,O/(A-1));return _}Fn("AlphaImage",ad),Fn("RGBAImage",Xs);const Vv="big-fb";class JC extends dl{createBucket(l){return new uu(l)}constructor(l,A){super(l,oy,A),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Gg({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Vv)&&this.heatmapFbos.delete(Vv)}queryRadius(l){return rA("heatmap-radius",this,l)}queryIntersectsFeature({queryGeometry:l,feature:A,featureState:y,geometry:_,transform:E,pixelsToTileUnits:O,unwrappedTileID:D,getElevation:F}){return Wv({queryGeometry:l,size:this.paint.get("heatmap-radius").evaluate(A,y)*O,transform:E,unwrappedTileID:D,getElevation:F},_)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let ld;var $v={get paint(){return ld=ld||new Hs({"hillshade-illumination-direction":new di(xt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new di(xt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new di(xt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new di(xt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new di(xt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new di(xt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new di(xt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new di(xt.paint_hillshade["hillshade-method"])})}};class Hv extends dl{constructor(l,A){super(l,$v,A),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let l=this.paint.get("hillshade-illumination-direction").values,A=this.paint.get("hillshade-illumination-altitude").values,y=this.paint.get("hillshade-highlight-color").values,_=this.paint.get("hillshade-shadow-color").values;const E=Math.max(l.length,A.length,y.length,_.length);l=l.concat(Array(E-l.length).fill(l.at(-1))),A=A.concat(Array(E-A.length).fill(A.at(-1))),y=y.concat(Array(E-y.length).fill(y.at(-1))),_=_.concat(Array(E-_.length).fill(_.at(-1)));const O=A.map(ti);return{directionRadians:l.map(ti),altitudeRadians:O,shadowColor:_,highlightColor:y}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let y0;var Wg={get paint(){return y0=y0||new Hs({"color-relief-opacity":new di(xt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new tl(xt["paint_color-relief"]["color-relief-color"])})}};class ns{constructor(l,A,y,_){this.context=l,this.format=y,this.texture=l.gl.createTexture(),this.update(A,_)}update(l,A,y){const{width:_,height:E}=l,O=!(this.size&&this.size[0]===_&&this.size[1]===E||y),{context:D}=this,{gl:F}=D;if(this.useMipmap=!!(A&&A.useMipmap),F.bindTexture(F.TEXTURE_2D,this.texture),D.pixelStoreUnpackFlipY.set(!1),D.pixelStoreUnpack.set(1),D.pixelStoreUnpackPremultiplyAlpha.set(this.format===F.RGBA&&(!A||A.premultiply!==!1)),O)this.size=[_,E],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||Gn(l)?F.texImage2D(F.TEXTURE_2D,0,this.format,this.format,F.UNSIGNED_BYTE,l):F.texImage2D(F.TEXTURE_2D,0,this.format,_,E,0,this.format,F.UNSIGNED_BYTE,l.data);else{const{x:W,y:ee}=y||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||Gn(l)?F.texSubImage2D(F.TEXTURE_2D,0,W,ee,F.RGBA,F.UNSIGNED_BYTE,l):F.texSubImage2D(F.TEXTURE_2D,0,W,ee,_,E,F.RGBA,F.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&F.generateMipmap(F.TEXTURE_2D),D.pixelStoreUnpackFlipY.setDefault(),D.pixelStoreUnpack.setDefault(),D.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(l,A,y){const{context:_}=this,{gl:E}=_;E.bindTexture(E.TEXTURE_2D,this.texture),y!==E.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(y=E.LINEAR),l!==this.filter&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,l),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,y||l),this.filter=l),A!==this.wrap&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,A),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,A),this.wrap=A)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}class Zv{constructor(l,A,y,_=1,E=1,O=1,D=0){if(this.uid=l,A.height!==A.width)throw new RangeError("DEM tiles must be square");if(y&&!["mapbox","terrarium","custom"].includes(y))return void Mt(`"${y}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=A.height;const F=this.dim=A.height-2;switch(this.data=new Uint32Array(A.data.buffer),y){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=_,this.greenFactor=E,this.blueFactor=O,this.baseShift=D;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let W=0;W<F;W++)this.data[this._idx(-1,W)]=this.data[this._idx(0,W)],this.data[this._idx(F,W)]=this.data[this._idx(F-1,W)],this.data[this._idx(W,-1)]=this.data[this._idx(W,0)],this.data[this._idx(W,F)]=this.data[this._idx(W,F-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(F,-1)]=this.data[this._idx(F-1,0)],this.data[this._idx(-1,F)]=this.data[this._idx(0,F-1)],this.data[this._idx(F,F)]=this.data[this._idx(F-1,F-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let W=0;W<F;W++)for(let ee=0;ee<F;ee++){const ae=this.get(W,ee);ae>this.max&&(this.max=ae),ae<this.min&&(this.min=ae)}}get(l,A){const y=new Uint8Array(this.data.buffer),_=4*this._idx(l,A);return this.unpack(y[_],y[_+1],y[_+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,A){if(l<-1||l>=this.dim+1||A<-1||A>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(A+1)*this.stride+(l+1)}unpack(l,A,y){return l*this.redFactor+A*this.greenFactor+y*this.blueFactor-this.baseShift}pack(l){return v0(l,this.getUnpackVector())}getPixels(){return new Xs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,A,y){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let _=A*this.dim,E=A*this.dim+this.dim,O=y*this.dim,D=y*this.dim+this.dim;switch(A){case-1:_=E-1;break;case 1:E=_+1}switch(y){case-1:O=D-1;break;case 1:D=O+1}const F=-A*this.dim,W=-y*this.dim;for(let ee=O;ee<D;ee++)for(let ae=_;ae<E;ae++)this.data[this._idx(ae,ee)]=l.data[this._idx(ae+F,ee+W)]}}function v0(h,l){const A=l[0],y=l[1],_=l[2],E=l[3],O=Math.min(A,y,_),D=Math.round((h+E)/O);return{r:Math.floor(D*O/A)%256,g:Math.floor(D*O/y)%256,b:Math.floor(D*O/_)%256}}Fn("DEMData",Zv);class sy extends dl{constructor(l,A){super(l,Wg,A)}_createColorRamp(l){const A={elevationStops:[],colorStops:[]},y=this._transitionablePaint._values["color-relief-color"].value.expression;if(y instanceof kl&&y._styleExpression.expression instanceof Xl){this.colorRampExpression=y;const O=y._styleExpression.expression;A.elevationStops=O.labels,A.colorStops=[];for(const D of A.elevationStops)A.colorStops.push(O.evaluate({globals:{elevation:D}}))}if(A.elevationStops.length<1&&(A.elevationStops=[0],A.colorStops=[Ji.transparent]),A.elevationStops.length<2&&(A.elevationStops.push(A.elevationStops[0]+1),A.colorStops.push(A.colorStops[0])),A.elevationStops.length<=l)return A;const _={elevationStops:[],colorStops:[]},E=(A.elevationStops.length-1)/(l-1);for(let O=0;O<A.elevationStops.length-.5;O+=E)_.elevationStops.push(A.elevationStops[Math.round(O)]),_.colorStops.push(A.colorStops[Math.round(O)]);return Mt(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${l}, provided: ${A.elevationStops.length}`),_}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(l,A,y){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const _=this._createColorRamp(A),E=new Xs({width:_.colorStops.length,height:1}),O=new Xs({width:_.colorStops.length,height:1});for(let D=0;D<_.elevationStops.length;D++){const F=v0(_.elevationStops[D],y);O.setPixel(0,D,new Ji(F.r/255,F.g/255,F.b/255,1)),E.setPixel(0,D,_.colorStops[D])}return this.colorRampTextures={elevationTexture:new ns(l,O,l.gl.RGBA),colorTexture:new ns(l,E,l.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const b0=ki([{name:"a_pos",components:2,type:"Int16"}],4),{members:Vd}=b0;function Gf(h,l,A){const y=A.patternDependencies;let _=!1;for(const E of l){const O=E.paint.get(`${h}-pattern`);O.isConstant()||(_=!0);const D=O.constantOr(null);D&&(_=!0,y[D.to]=!0,y[D.from]=!0)}return _}function Qg(h,l,A,y,_){const{zoom:E}=y,O=_.patternDependencies;for(const D of l){const F=D.paint.get(`${h}-pattern`).value;if(F.kind!=="constant"){let W=F.evaluate({zoom:E-1},A,{},_.availableImages),ee=F.evaluate({zoom:E},A,{},_.availableImages),ae=F.evaluate({zoom:E+1},A,{},_.availableImages);W=W&&W.name?W.name:W,ee=ee&&ee.name?ee.name:ee,ae=ae&&ae.name?ae.name:ae,O[W]=!0,O[ee]=!0,O[ae]=!0,A.patterns[D.id]={min:W,mid:ee,max:ae}}}return A}function rc(h,l,A,y,_){let E;if(_===(function(O,D,F,W){let ee=0;for(let ae=D,Ae=F-W;ae<F;ae+=W)ee+=(O[Ae]-O[ae])*(O[ae+1]+O[Ae+1]),Ae=ae;return ee})(h,l,A,y)>0)for(let O=l;O<A;O+=y)E=nb(O/y|0,h[O],h[O+1],E);else for(let O=A-y;O>=l;O-=y)E=nb(O/y|0,h[O],h[O+1],E);return E&&Wf(E,E.next)&&(qg(E),E=E.next),E}function Ea(h,l){if(!h)return h;l||(l=h);let A,y=h;do if(A=!1,y.steiner||!Wf(y,y.next)&&Qs(y.prev,y,y.next)!==0)y=y.next;else{if(qg(y),y=l=y.prev,y===y.next)break;A=!0}while(A||y!==l);return l}function C0(h,l,A,y,_,E,O){if(!h)return;!O&&E&&(function(F,W,ee,ae){let Ae=F;do Ae.z===0&&(Ae.z=Ba(Ae.x,Ae.y,W,ee,ae)),Ae.prevZ=Ae.prev,Ae.nextZ=Ae.next,Ae=Ae.next;while(Ae!==F);Ae.prevZ.nextZ=null,Ae.prevZ=null,(function(fe){let be,we=1;do{let Be,ze=fe;fe=null;let at=null;for(be=0;ze;){be++;let We=ze,Xe=0;for(let pt=0;pt<we&&(Xe++,We=We.nextZ,We);pt++);let ct=we;for(;Xe>0||ct>0&&We;)Xe!==0&&(ct===0||!We||ze.z<=We.z)?(Be=ze,ze=ze.nextZ,Xe--):(Be=We,We=We.nextZ,ct--),at?at.nextZ=Be:fe=Be,Be.prevZ=at,at=Be;ze=We}at.nextZ=null,we*=2}while(be>1)})(Ae)})(h,y,_,E);let D=h;for(;h.prev!==h.next;){const F=h.prev,W=h.next;if(E?e_(h,y,_,E):ay(h))l.push(F.i,h.i,W.i),qg(h),h=W.next,D=W.next;else if((h=W)===D){O?O===1?C0(h=Xv(Ea(h),l),l,A,y,_,E,2):O===2&&Jv(h,l,A,y,_,E):C0(Ea(h),l,A,y,_,E,1);break}}}function ay(h){const l=h.prev,A=h,y=h.next;if(Qs(l,A,y)>=0)return!1;const _=l.x,E=A.x,O=y.x,D=l.y,F=A.y,W=y.y,ee=Math.min(_,E,O),ae=Math.min(D,F,W),Ae=Math.max(_,E,O),fe=Math.max(D,F,W);let be=y.next;for(;be!==l;){if(be.x>=ee&&be.x<=Ae&&be.y>=ae&&be.y<=fe&&Oa(_,D,E,F,O,W,be.x,be.y)&&Qs(be.prev,be,be.next)>=0)return!1;be=be.next}return!0}function e_(h,l,A,y){const _=h.prev,E=h,O=h.next;if(Qs(_,E,O)>=0)return!1;const D=_.x,F=E.x,W=O.x,ee=_.y,ae=E.y,Ae=O.y,fe=Math.min(D,F,W),be=Math.min(ee,ae,Ae),we=Math.max(D,F,W),Be=Math.max(ee,ae,Ae),ze=Ba(fe,be,l,A,y),at=Ba(we,Be,l,A,y);let We=h.prevZ,Xe=h.nextZ;for(;We&&We.z>=ze&&Xe&&Xe.z<=at;){if(We.x>=fe&&We.x<=we&&We.y>=be&&We.y<=Be&&We!==_&&We!==O&&Oa(D,ee,F,ae,W,Ae,We.x,We.y)&&Qs(We.prev,We,We.next)>=0||(We=We.prevZ,Xe.x>=fe&&Xe.x<=we&&Xe.y>=be&&Xe.y<=Be&&Xe!==_&&Xe!==O&&Oa(D,ee,F,ae,W,Ae,Xe.x,Xe.y)&&Qs(Xe.prev,Xe,Xe.next)>=0))return!1;Xe=Xe.nextZ}for(;We&&We.z>=ze;){if(We.x>=fe&&We.x<=we&&We.y>=be&&We.y<=Be&&We!==_&&We!==O&&Oa(D,ee,F,ae,W,Ae,We.x,We.y)&&Qs(We.prev,We,We.next)>=0)return!1;We=We.prevZ}for(;Xe&&Xe.z<=at;){if(Xe.x>=fe&&Xe.x<=we&&Xe.y>=be&&Xe.y<=Be&&Xe!==_&&Xe!==O&&Oa(D,ee,F,ae,W,Ae,Xe.x,Xe.y)&&Qs(Xe.prev,Xe,Xe.next)>=0)return!1;Xe=Xe.nextZ}return!0}function Xv(h,l){let A=h;do{const y=A.prev,_=A.next.next;!Wf(y,_)&&Ds(y,A,A.next,_)&&_0(y,_)&&_0(_,y)&&(l.push(y.i,A.i,_.i),qg(A),qg(A.next),A=h=_),A=A.next}while(A!==h);return Ea(A)}function Jv(h,l,A,y,_,E){let O=h;do{let D=O.next.next;for(;D!==O.prev;){if(O.i!==D.i&&H2(O,D)){let F=uy(O,D);return O=Ea(O,O.next),F=Ea(F,F.next),C0(O,l,A,y,_,E,0),void C0(F,l,A,y,_,E,0)}D=D.next}O=O.next}while(O!==h)}function ly(h,l){let A=h.x-l.x;return A===0&&(A=h.y-l.y,A===0)&&(A=(h.next.y-h.y)/(h.next.x-h.x)-(l.next.y-l.y)/(l.next.x-l.x)),A}function t_(h,l){const A=(function(_,E){let O=E;const D=_.x,F=_.y;let W,ee=-1/0;if(Wf(_,O))return O;do{if(Wf(_,O.next))return O.next;if(F<=O.y&&F>=O.next.y&&O.next.y!==O.y){const we=O.x+(F-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(we<=D&&we>ee&&(ee=we,W=O.x<O.next.x?O:O.next,we===D))return W}O=O.next}while(O!==E);if(!W)return null;const ae=W,Ae=W.x,fe=W.y;let be=1/0;O=W;do{if(D>=O.x&&O.x>=Ae&&D!==O.x&&tb(F<fe?D:ee,F,Ae,fe,F<fe?ee:D,F,O.x,O.y)){const we=Math.abs(F-O.y)/(D-O.x);_0(O,_)&&(we<be||we===be&&(O.x>W.x||O.x===W.x&&$d(W,O)))&&(W=O,be=we)}O=O.next}while(O!==ae);return W})(h,l);if(!A)return l;const y=uy(A,h);return Ea(y,y.next),Ea(A,A.next)}function $d(h,l){return Qs(h.prev,h,l.prev)<0&&Qs(l.next,h,h.next)<0}function Ba(h,l,A,y,_){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-A)*_|0)|h<<8))|h<<4))|h<<2))|h<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-y)*_|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function eb(h){let l=h,A=h;do(l.x<A.x||l.x===A.x&&l.y<A.y)&&(A=l),l=l.next;while(l!==h);return A}function tb(h,l,A,y,_,E,O,D){return(_-O)*(l-D)>=(h-O)*(E-D)&&(h-O)*(y-D)>=(A-O)*(l-D)&&(A-O)*(E-D)>=(_-O)*(y-D)}function Oa(h,l,A,y,_,E,O,D){return!(h===O&&l===D)&&tb(h,l,A,y,_,E,O,D)}function H2(h,l){return h.next.i!==l.i&&h.prev.i!==l.i&&!(function(A,y){let _=A;do{if(_.i!==A.i&&_.next.i!==A.i&&_.i!==y.i&&_.next.i!==y.i&&Ds(_,_.next,A,y))return!0;_=_.next}while(_!==A);return!1})(h,l)&&(_0(h,l)&&_0(l,h)&&(function(A,y){let _=A,E=!1;const O=(A.x+y.x)/2,D=(A.y+y.y)/2;do _.y>D!=_.next.y>D&&_.next.y!==_.y&&O<(_.next.x-_.x)*(D-_.y)/(_.next.y-_.y)+_.x&&(E=!E),_=_.next;while(_!==A);return E})(h,l)&&(Qs(h.prev,h,l.prev)||Qs(h,l.prev,l))||Wf(h,l)&&Qs(h.prev,h,h.next)>0&&Qs(l.prev,l,l.next)>0)}function Qs(h,l,A){return(l.y-h.y)*(A.x-l.x)-(l.x-h.x)*(A.y-l.y)}function Wf(h,l){return h.x===l.x&&h.y===l.y}function Ds(h,l,A,y){const _=UA(Qs(h,l,A)),E=UA(Qs(h,l,y)),O=UA(Qs(A,y,h)),D=UA(Qs(A,y,l));return _!==E&&O!==D||!(_!==0||!cu(h,A,l))||!(E!==0||!cu(h,y,l))||!(O!==0||!cu(A,h,y))||!(D!==0||!cu(A,l,y))}function cu(h,l,A){return l.x<=Math.max(h.x,A.x)&&l.x>=Math.min(h.x,A.x)&&l.y<=Math.max(h.y,A.y)&&l.y>=Math.min(h.y,A.y)}function UA(h){return h>0?1:h<0?-1:0}function _0(h,l){return Qs(h.prev,h,h.next)<0?Qs(h,l,h.next)>=0&&Qs(h,h.prev,l)>=0:Qs(h,l,h.prev)<0||Qs(h,h.next,l)<0}function uy(h,l){const A=x0(h.i,h.x,h.y),y=x0(l.i,l.x,l.y),_=h.next,E=l.prev;return h.next=l,l.prev=h,A.next=_,_.prev=A,y.next=A,A.prev=y,E.next=y,y.prev=E,y}function nb(h,l,A,y){const _=x0(h,l,A);return y?(_.next=y.next,_.prev=y,y.next.prev=_,y.next=_):(_.prev=_,_.next=_),_}function qg(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function x0(h,l,A){return{i:h,x:l,y:A,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class pl{constructor(l,A){if(A>l)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=l,this._minGranularity=A}getGranularityForZoomLevel(l){return Math.max(Math.floor(this._baseZoomGranularity/(1<<l)),this._minGranularity,1)}}class Pc{constructor(l){this.fill=l.fill,this.line=l.line,this.tile=l.tile,this.stencil=l.stencil,this.circle=l.circle}}Pc.noSubdivision=new Pc({fill:new pl(0,0),line:new pl(0,0),tile:new pl(0,0),stencil:new pl(0,0),circle:1}),Fn("SubdivisionGranularityExpression",pl),Fn("SubdivisionGranularitySetting",Pc);const Zp=-32768,is=32767;class n_{constructor(l,A){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=l,this._granularityCellSize=mt/l,this._canonical=A}_getKey(l,A){return(l+=32768)<<16|A+32768}_vertexToIndex(l,A){if(l<-32768||A<-32768||l>32767||A>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const y=0|Math.round(l),_=0|Math.round(A),E=this._getKey(y,_);if(this._vertexDictionary.has(E))return this._vertexDictionary.get(E);const O=this._vertexBuffer.length/2;return this._vertexDictionary.set(E,O),this._vertexBuffer.push(y,_),O}_subdivideTrianglesScanline(l){if(this._granularity<2)return(function(_,E){const O=[];for(let D=0;D<E.length;D+=3){const F=E[D],W=E[D+1],ee=E[D+2],ae=_[2*F],Ae=_[2*F+1];(_[2*W]-ae)*(_[2*ee+1]-Ae)-(_[2*W+1]-Ae)*(_[2*ee]-ae)>0?(O.push(F),O.push(ee),O.push(W)):(O.push(F),O.push(W),O.push(ee))}return O})(this._vertexBuffer,l);const A=[],y=l.length;for(let _=0;_<y;_+=3){const E=[l[_+0],l[_+1],l[_+2]],O=[this._vertexBuffer[2*l[_+0]+0],this._vertexBuffer[2*l[_+0]+1],this._vertexBuffer[2*l[_+1]+0],this._vertexBuffer[2*l[_+1]+1],this._vertexBuffer[2*l[_+2]+0],this._vertexBuffer[2*l[_+2]+1]];let D=1/0,F=1/0,W=-1/0,ee=-1/0;for(let we=0;we<3;we++){const Be=O[2*we],ze=O[2*we+1];D=Math.min(D,Be),W=Math.max(W,Be),F=Math.min(F,ze),ee=Math.max(ee,ze)}if(D===W||F===ee)continue;const ae=Math.floor(D/this._granularityCellSize),Ae=Math.ceil(W/this._granularityCellSize),fe=Math.floor(F/this._granularityCellSize),be=Math.ceil(ee/this._granularityCellSize);if(ae!==Ae||fe!==be)for(let we=fe;we<be;we++){const Be=this._scanlineGenerateVertexRingForCellRow(we,O,E);cd(this._vertexBuffer,Be,A)}else A.push(...E)}return A}_scanlineGenerateVertexRingForCellRow(l,A,y){const _=l*this._granularityCellSize,E=_+this._granularityCellSize,O=[];for(let D=0;D<3;D++){const F=A[2*D],W=A[2*D+1],ee=A[2*(D+1)%6],ae=A[(2*(D+1)+1)%6],Ae=A[2*(D+2)%6],fe=A[(2*(D+2)+1)%6],be=ee-F,we=ae-W,Be=be===0,ze=we===0,at=(_-W)/we,We=(E-W)/we,Xe=Math.min(at,We),ct=Math.max(at,We);if(!ze&&(Xe>=1||ct<=0)||ze&&(W<_||W>E)){ae>=_&&ae<=E&&O.push(y[(D+1)%3]);continue}!ze&&Xe>0&&O.push(this._vertexToIndex(F+be*Xe,W+we*Xe));const pt=F+be*Math.max(Xe,0),Nt=F+be*Math.min(ct,1);Be||this._generateIntraEdgeVertices(O,F,W,ee,ae,pt,Nt),!ze&&ct<1&&O.push(this._vertexToIndex(F+be*ct,W+we*ct)),(ze||ae>=_&&ae<=E)&&O.push(y[(D+1)%3]),!ze&&(ae<=_||ae>=E)&&this._generateInterEdgeVertices(O,F,W,ee,ae,Ae,fe,Nt,_,E)}return O}_generateIntraEdgeVertices(l,A,y,_,E,O,D){const F=_-A,W=E-y,ee=W===0,ae=ee?Math.min(A,_):Math.min(O,D),Ae=ee?Math.max(A,_):Math.max(O,D),fe=Math.floor(ae/this._granularityCellSize)+1,be=Math.ceil(Ae/this._granularityCellSize)-1;if(ee?A<_:O<D)for(let we=fe;we<=be;we++){const Be=we*this._granularityCellSize;l.push(this._vertexToIndex(Be,y+W*(Be-A)/F))}else for(let we=be;we>=fe;we--){const Be=we*this._granularityCellSize;l.push(this._vertexToIndex(Be,y+W*(Be-A)/F))}}_generateInterEdgeVertices(l,A,y,_,E,O,D,F,W,ee){const ae=E-y,Ae=O-_,fe=D-E,be=(W-E)/fe,we=(ee-E)/fe,Be=Math.min(be,we),ze=Math.max(be,we),at=_+Ae*Be;let We=Math.floor(Math.min(at,F)/this._granularityCellSize)+1,Xe=Math.ceil(Math.max(at,F)/this._granularityCellSize)-1,ct=F<at;const pt=fe===0;if(pt&&(D===W||D===ee))return;if(pt||Be>=1||ze<=0){const sn=y-D,nn=O+(A-O)*Math.min((W-D)/sn,(ee-D)/sn);We=Math.floor(Math.min(nn,F)/this._granularityCellSize)+1,Xe=Math.ceil(Math.max(nn,F)/this._granularityCellSize)-1,ct=F<nn}const Nt=ae>0?ee:W;if(ct)for(let sn=We;sn<=Xe;sn++)l.push(this._vertexToIndex(sn*this._granularityCellSize,Nt));else for(let sn=Xe;sn>=We;sn--)l.push(this._vertexToIndex(sn*this._granularityCellSize,Nt))}_generateOutline(l){const A=[];for(const y of l){const _=oA(y,this._granularity,!0),E=this._pointArrayToIndices(_),O=[];for(let D=1;D<E.length;D++)O.push(E[D-1]),O.push(E[D]);A.push(O)}return A}_handlePoles(l){let A=!1,y=!1;this._canonical&&(this._canonical.y===0&&(A=!0),this._canonical.y===(1<<this._canonical.z)-1&&(y=!0)),(A||y)&&this._fillPoles(l,A,y)}_ensureNoPoleVertices(){const l=this._vertexBuffer;for(let A=0;A<l.length;A+=2){const y=l[A+1];y===Zp&&(l[A+1]=-32767),y===is&&(l[A+1]=32766)}}_generatePoleQuad(l,A,y,_,E,O){_>E!=(O===Zp)?(l.push(A),l.push(y),l.push(this._vertexToIndex(_,O)),l.push(y),l.push(this._vertexToIndex(E,O)),l.push(this._vertexToIndex(_,O))):(l.push(y),l.push(A),l.push(this._vertexToIndex(_,O)),l.push(this._vertexToIndex(E,O)),l.push(y),l.push(this._vertexToIndex(_,O)))}_fillPoles(l,A,y){const _=this._vertexBuffer,E=mt,O=l.length;for(let D=2;D<O;D+=3){const F=l[D-2],W=l[D-1],ee=l[D],ae=_[2*F],Ae=_[2*F+1],fe=_[2*W],be=_[2*W+1],we=_[2*ee],Be=_[2*ee+1];A&&(Ae===0&&be===0&&this._generatePoleQuad(l,F,W,ae,fe,Zp),be===0&&Be===0&&this._generatePoleQuad(l,W,ee,fe,we,Zp),Be===0&&Ae===0&&this._generatePoleQuad(l,ee,F,we,ae,Zp)),y&&(Ae===E&&be===E&&this._generatePoleQuad(l,F,W,ae,fe,is),be===E&&Be===E&&this._generatePoleQuad(l,W,ee,fe,we,is),Be===E&&Ae===E&&this._generatePoleQuad(l,ee,F,we,ae,is))}}_initializeVertices(l){for(let A=0;A<l.length;A+=2)this._vertexToIndex(l[A],l[A+1])}subdividePolygonInternal(l,A){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:y,holeIndices:_}=(function(D){const F=[],W=[];for(const ee of D)if(ee.length!==0){ee!==D[0]&&F.push(W.length/2);for(let ae=0;ae<ee.length;ae++)W.push(ee[ae].x),W.push(ee[ae].y)}return{flattened:W,holeIndices:F}})(l);let E;this._initializeVertices(y);try{const D=(function(W,ee,ae=2){const Ae=ee&&ee.length,fe=Ae?ee[0]*ae:W.length;let be=rc(W,0,fe,ae,!0);const we=[];if(!be||be.next===be.prev)return we;let Be,ze,at;if(Ae&&(be=(function(We,Xe,ct,pt){const Nt=[];for(let sn=0,nn=Xe.length;sn<nn;sn++){const fn=rc(We,Xe[sn]*pt,sn<nn-1?Xe[sn+1]*pt:We.length,pt,!1);fn===fn.next&&(fn.steiner=!0),Nt.push(eb(fn))}Nt.sort(ly);for(let sn=0;sn<Nt.length;sn++)ct=t_(Nt[sn],ct);return ct})(W,ee,be,ae)),W.length>80*ae){Be=W[0],ze=W[1];let We=Be,Xe=ze;for(let ct=ae;ct<fe;ct+=ae){const pt=W[ct],Nt=W[ct+1];pt<Be&&(Be=pt),Nt<ze&&(ze=Nt),pt>We&&(We=pt),Nt>Xe&&(Xe=Nt)}at=Math.max(We-Be,Xe-ze),at=at!==0?32767/at:0}return C0(be,we,ae,Be,ze,at,0),we})(y,_),F=this._convertIndices(y,D);E=this._subdivideTrianglesScanline(F)}catch(D){console.error(D)}let O=[];return A&&(O=this._generateOutline(l)),this._ensureNoPoleVertices(),this._handlePoles(E),{verticesFlattened:this._vertexBuffer,indicesTriangles:E,indicesLineList:O}}_convertIndices(l,A){const y=[];for(let _=0;_<A.length;_++)y.push(this._vertexToIndex(l[2*A[_]],l[2*A[_]+1]));return y}_pointArrayToIndices(l){const A=[];for(let y=0;y<l.length;y++){const _=l[y];A.push(this._vertexToIndex(_.x,_.y))}return A}}function ud(h,l,A,y=!0){return new n_(A,l).subdividePolygonInternal(h,y)}function oA(h,l,A=!1){if(!h||h.length<1)return[];if(h.length<2)return[];const y=h[0],_=h[h.length-1],E=A&&(y.x!==_.x||y.y!==_.y);if(l<2)return E?[...h,h[0]]:[...h];const O=Math.floor(mt/l),D=[];D.push(new c(h[0].x,h[0].y));const F=h.length,W=E?F:F-1;for(let ee=0;ee<W;ee++){const ae=h[ee],Ae=ee<F-1?h[ee+1]:h[0],fe=ae.x,be=ae.y,we=Ae.x,Be=Ae.y,ze=fe!==we,at=be!==Be;if(!ze&&!at)continue;const We=we-fe,Xe=Be-be,ct=Math.abs(We),pt=Math.abs(Xe);let Nt=fe,sn=be;for(;;){const fn=We>0?(Math.floor(Nt/O)+1)*O:(Math.ceil(Nt/O)-1)*O,Kn=Xe>0?(Math.floor(sn/O)+1)*O:(Math.ceil(sn/O)-1)*O,yn=Math.abs(Nt-fn),on=Math.abs(sn-Kn),Yt=Math.abs(Nt-we),ii=Math.abs(sn-Be),Zn=ze?yn/ct:Number.POSITIVE_INFINITY,li=at?on/pt:Number.POSITIVE_INFINITY;if((Yt<=yn||!ze)&&(ii<=on||!at))break;if(Zn<li&&ze||!at){Nt=fn,sn+=Xe*Zn;const $n=new c(Nt,Math.round(sn));D[D.length-1].x===$n.x&&D[D.length-1].y===$n.y||D.push($n)}else{Nt+=We*li,sn=Kn;const $n=new c(Math.round(Nt),sn);D[D.length-1].x===$n.x&&D[D.length-1].y===$n.y||D.push($n)}}const nn=new c(we,Be);D[D.length-1].x===nn.x&&D[D.length-1].y===nn.y||D.push(nn)}return D}function cd(h,l,A){if(l.length===0)throw new Error("Subdivision vertex ring is empty.");let y=0,_=h[2*l[0]];for(let F=1;F<l.length;F++){const W=h[2*l[F]];W<_&&(_=W,y=F)}const E=l.length;let O=y,D=(O+1)%E;for(;;){const F=O-1>=0?O-1:E-1,W=(D+1)%E,ee=h[2*l[F]],ae=h[2*l[W]],Ae=h[2*l[O]],fe=h[2*l[O]+1],be=h[2*l[D]+1];let we=!1;if(ee<ae)we=!0;else if(ee>ae)we=!1;else{const Be=be-fe,ze=-(h[2*l[D]]-Ae),at=fe<be?1:-1;((ee-Ae)*Be+(h[2*l[F]+1]-fe)*ze)*at>((ae-Ae)*Be+(h[2*l[W]+1]-fe)*ze)*at&&(we=!0)}if(we){const Be=l[F],ze=l[O],at=l[D];Be!==ze&&Be!==at&&ze!==at&&A.push(at,ze,Be),O--,O<0&&(O=E-1)}else{const Be=l[W],ze=l[O],at=l[D];Be!==ze&&Be!==at&&ze!==at&&A.push(at,ze,Be),D++,D>=E&&(D=0)}if(F===W)break}}function cy(h,l,A,y,_,E,O,D,F){const W=_.length/2,ee=O&&D&&F;if(W<dn.MAX_VERTEX_ARRAY_LENGTH){const ae=l.prepareSegment(W,A,y),Ae=ae.vertexLength;for(let we=0;we<E.length;we+=3)y.emplaceBack(Ae+E[we],Ae+E[we+1],Ae+E[we+2]);let fe,be;ae.vertexLength+=W,ae.primitiveLength+=E.length/3,ee&&(be=O.prepareSegment(W,A,D),fe=be.vertexLength,be.vertexLength+=W);for(let we=0;we<_.length;we+=2)h(_[we],_[we+1]);if(ee)for(let we=0;we<F.length;we++){const Be=F[we];for(let ze=1;ze<Be.length;ze+=2)D.emplaceBack(fe+Be[ze-1],fe+Be[ze]);be.primitiveLength+=Be.length/2}}else(function(ae,Ae,fe,be,we,Be){const ze=[];for(let pt=0;pt<be.length/2;pt++)ze.push(-1);const at={count:0};let We=0,Xe=ae.getOrCreateLatestSegment(Ae,fe),ct=Xe.vertexLength;for(let pt=2;pt<we.length;pt+=3){const Nt=we[pt-2],sn=we[pt-1],nn=we[pt];let fn=ze[Nt]<We,Kn=ze[sn]<We,yn=ze[nn]<We;Xe.vertexLength+((fn?1:0)+(Kn?1:0)+(yn?1:0))>dn.MAX_VERTEX_ARRAY_LENGTH&&(Xe=ae.createNewSegment(Ae,fe),We=at.count,fn=!0,Kn=!0,yn=!0,ct=0);const on=Xp(ze,be,Be,at,Nt,fn,Xe),Yt=Xp(ze,be,Be,at,sn,Kn,Xe),ii=Xp(ze,be,Be,at,nn,yn,Xe);fe.emplaceBack(ct+on-We,ct+Yt-We,ct+ii-We),Xe.primitiveLength++}})(l,A,y,_,E,h),ee&&(function(ae,Ae,fe,be,we,Be){const ze=[];for(let pt=0;pt<be.length/2;pt++)ze.push(-1);const at={count:0};let We=0,Xe=ae.getOrCreateLatestSegment(Ae,fe),ct=Xe.vertexLength;for(let pt=0;pt<we.length;pt++){const Nt=we[pt];for(let sn=1;sn<we[pt].length;sn+=2){const nn=Nt[sn-1],fn=Nt[sn];let Kn=ze[nn]<We,yn=ze[fn]<We;Xe.vertexLength+((Kn?1:0)+(yn?1:0))>dn.MAX_VERTEX_ARRAY_LENGTH&&(Xe=ae.createNewSegment(Ae,fe),We=at.count,Kn=!0,yn=!0,ct=0);const on=Xp(ze,be,Be,at,nn,Kn,Xe),Yt=Xp(ze,be,Be,at,fn,yn,Xe);fe.emplaceBack(ct+on-We,ct+Yt-We),Xe.primitiveLength++}}})(O,A,D,_,F,h),l.forceNewSegmentOnNextPrepare(),O?.forceNewSegmentOnNextPrepare()}function Xp(h,l,A,y,_,E,O){if(E){const D=y.count;return A(l[2*_],l[2*_+1]),h[_]=y.count,y.count++,O.vertexLength++,D}return h[_]}class sA{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((A=>A.id)),this.index=l.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new Ke,this.indexArray=new Ft,this.indexArray2=new zt,this.programConfigurations=new Yo(l.layers,l.zoom),this.segments=new dn,this.segments2=new dn,this.stateDependentLayerIds=this.layers.filter((A=>A.isStateDependent())).map((A=>A.id))}populate(l,A,y){this.hasDependencies=Gf("fill",this.layers,A);const _=this.layers[0].layout.get("fill-sort-key"),E=!_.isConstant(),O=[];for(const{feature:D,id:F,index:W,sourceLayerIndex:ee}of l){const ae=this.layers[0]._featureFilter.needGeometry,Ae=mh(D,ae);if(!this.layers[0]._featureFilter.filter(new zr(this.zoom),Ae,y))continue;const fe=E?_.evaluate(Ae,{},y,A.availableImages):void 0,be={id:F,properties:D.properties,type:D.type,sourceLayerIndex:ee,index:W,geometry:ae?Ae.geometry:ca(D),patterns:{},sortKey:fe};O.push(be)}E&&O.sort(((D,F)=>D.sortKey-F.sortKey));for(const D of O){const{geometry:F,index:W,sourceLayerIndex:ee}=D;if(this.hasDependencies){const ae=Qg("fill",this.layers,D,{zoom:this.zoom},A);this.patternFeatures.push(ae)}else this.addFeature(D,F,W,y,{},A.subdivisionGranularity);A.featureIndex.insert(l[W].feature,F,W,ee,this.index)}}update(l,A,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,A,this.stateDependentLayers,{imagePositions:y})}addFeatures(l,A,y){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,A,y,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Vd),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,A,y,_,E,O){for(const D of Tf(A,500)){const F=ud(D,_,O.fill.getGranularityForZoomLevel(_.z)),W=this.layoutVertexArray;cy(((ee,ae)=>{W.emplaceBack(ee,ae)}),this.segments,this.layoutVertexArray,this.indexArray,F.verticesFlattened,F.indicesTriangles,this.segments2,this.indexArray2,F.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,y,{imagePositions:E,canonical:_})}}let ib,Hd;Fn("FillBucket",sA,{omit:["layers","patternFeatures"]});var Yg={get paint(){return Hd=Hd||new Hs({"fill-antialias":new di(xt.paint_fill["fill-antialias"]),"fill-opacity":new si(xt.paint_fill["fill-opacity"]),"fill-color":new si(xt.paint_fill["fill-color"]),"fill-outline-color":new si(xt.paint_fill["fill-outline-color"]),"fill-translate":new di(xt.paint_fill["fill-translate"]),"fill-translate-anchor":new di(xt.paint_fill["fill-translate-anchor"]),"fill-pattern":new DA(xt.paint_fill["fill-pattern"])})},get layout(){return ib=ib||new Hs({"fill-sort-key":new si(xt.layout_fill["fill-sort-key"])})}};class Vg extends dl{constructor(l,A){super(l,Yg,A)}recalculate(l,A){super.recalculate(l,A);const y=this.paint._values["fill-outline-color"];y.value.kind==="constant"&&y.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new sA(l)}queryRadius(){return Nf(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:l,geometry:A,transform:y,pixelsToTileUnits:_}){return Rc($p(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-y.bearingInRadians,_),A)}isTileClipped(){return!0}}const M0=ki([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),i_=ki([{name:"a_centroid",components:2,type:"Int16"}],4),{members:r_}=M0;class Zd{constructor(l,A,y,_,E){this.properties={},this.extent=y,this.type=0,this.id=void 0,this._pbf=l,this._geometry=-1,this._keys=_,this._values=E,l.readFields(o_,this,A)}loadGeometry(){const l=this._pbf;l.pos=this._geometry;const A=l.readVarint()+l.pos,y=[];let _,E=1,O=0,D=0,F=0;for(;l.pos<A;){if(O<=0){const W=l.readVarint();E=7&W,O=W>>3}if(O--,E===1||E===2)D+=l.readSVarint(),F+=l.readSVarint(),E===1&&(_&&y.push(_),_=[]),_&&_.push(new c(D,F));else{if(E!==7)throw new Error(`unknown command ${E}`);_&&_.push(_[0].clone())}}return _&&y.push(_),y}bbox(){const l=this._pbf;l.pos=this._geometry;const A=l.readVarint()+l.pos;let y=1,_=0,E=0,O=0,D=1/0,F=-1/0,W=1/0,ee=-1/0;for(;l.pos<A;){if(_<=0){const ae=l.readVarint();y=7&ae,_=ae>>3}if(_--,y===1||y===2)E+=l.readSVarint(),O+=l.readSVarint(),E<D&&(D=E),E>F&&(F=E),O<W&&(W=O),O>ee&&(ee=O);else if(y!==7)throw new Error(`unknown command ${y}`)}return[D,W,F,ee]}toGeoJSON(l,A,y){const _=this.extent*Math.pow(2,y),E=this.extent*l,O=this.extent*A,D=this.loadGeometry();function F(Ae){return[360*(Ae.x+E)/_-180,360/Math.PI*Math.atan(Math.exp((1-2*(Ae.y+O)/_)*Math.PI))-90]}function W(Ae){return Ae.map(F)}let ee;if(this.type===1){const Ae=[];for(const be of D)Ae.push(be[0]);const fe=W(Ae);ee=Ae.length===1?{type:"Point",coordinates:fe[0]}:{type:"MultiPoint",coordinates:fe}}else if(this.type===2){const Ae=D.map(W);ee=Ae.length===1?{type:"LineString",coordinates:Ae[0]}:{type:"MultiLineString",coordinates:Ae}}else{if(this.type!==3)throw new Error("unknown feature type");{const Ae=$g(D),fe=[];for(const be of Ae)fe.push(be.map(W));ee=fe.length===1?{type:"Polygon",coordinates:fe[0]}:{type:"MultiPolygon",coordinates:fe}}}const ae={type:"Feature",geometry:ee,properties:this.properties};return this.id!=null&&(ae.id=this.id),ae}}function o_(h,l,A){h===1?l.id=A.readVarint():h===2?(function(y,_){const E=y.readVarint()+y.pos;for(;y.pos<E;){const O=_._keys[y.readVarint()],D=_._values[y.readVarint()];_.properties[O]=D}})(A,l):h===3?l.type=A.readVarint():h===4&&(l._geometry=A.pos)}function $g(h){const l=h.length;if(l<=1)return[h];const A=[];let y,_;for(let E=0;E<l;E++){const O=s_(h[E]);O!==0&&(_===void 0&&(_=O<0),_===O<0?(y&&A.push(y),y=[h[E]]):y&&y.push(h[E]))}return y&&A.push(y),A}function s_(h){let l=0;for(let A,y,_=0,E=h.length,O=E-1;_<E;O=_++)A=h[_],y=h[O],l+=(y.x-A.x)*(A.y+y.y);return l}Zd.types=["Unknown","Point","LineString","Polygon"];class Z2{constructor(l,A){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(X2,this,A),this.length=this._features.length}feature(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];const A=this._pbf.readVarint()+this._pbf.pos;return new Zd(this._pbf,A,this.extent,this._keys,this._values)}}function X2(h,l,A){h===15?l.version=A.readVarint():h===1?l.name=A.readString():h===5?l.extent=A.readVarint():h===2?l._features.push(A.pos):h===3?l._keys.push(A.readString()):h===4&&l._values.push((function(y){let _=null;const E=y.readVarint()+y.pos;for(;y.pos<E;){const O=y.readVarint()>>3;_=O===1?y.readString():O===2?y.readFloat():O===3?y.readDouble():O===4?y.readVarint64():O===5?y.readVarint():O===6?y.readSVarint():O===7?y.readBoolean():null}if(_==null)throw new Error("unknown feature value");return _})(A))}class Oo{constructor(l,A){this.layers=l.readFields(ys,{},A)}}function ys(h,l,A){if(h===3){const y=new Z2(A,A.readVarint()+A.pos);y.length&&(l[y.name]=y)}}const jr=Math.pow(2,13);function Pr(h,l,A,y,_,E,O,D){h.emplaceBack(l,A,2*Math.floor(y*jr)+O,_*jr*2,E*jr*2,Math.round(D))}class Fo{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((A=>A.id)),this.index=l.index,this.hasDependencies=!1,this.layoutVertexArray=new Je,this.centroidVertexArray=new me,this.indexArray=new Ft,this.programConfigurations=new Yo(l.layers,l.zoom),this.segments=new dn,this.stateDependentLayerIds=this.layers.filter((A=>A.isStateDependent())).map((A=>A.id))}populate(l,A,y){this.features=[],this.hasDependencies=Gf("fill-extrusion",this.layers,A);for(const{feature:_,id:E,index:O,sourceLayerIndex:D}of l){const F=this.layers[0]._featureFilter.needGeometry,W=mh(_,F);if(!this.layers[0]._featureFilter.filter(new zr(this.zoom),W,y))continue;const ee={id:E,sourceLayerIndex:D,index:O,geometry:F?W.geometry:ca(_),properties:_.properties,type:_.type,patterns:{}};this.hasDependencies?this.features.push(Qg("fill-extrusion",this.layers,ee,{zoom:this.zoom},A)):this.addFeature(ee,ee.geometry,O,y,{},A.subdivisionGranularity),A.featureIndex.insert(_,ee.geometry,O,D,this.index,!0)}}addFeatures(l,A,y){for(const _ of this.features){const{geometry:E}=_;this.addFeature(_,E,_.index,A,y,l.subdivisionGranularity)}}update(l,A,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,A,this.stateDependentLayers,{imagePositions:y})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,r_),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,i_.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,A,y,_,E,O){for(const D of Tf(A,500)){const F={x:0,y:0,sampleCount:0},W=this.layoutVertexArray.length;this.processPolygon(F,_,l,D,O);const ee=this.layoutVertexArray.length-W,ae=Math.floor(F.x/F.sampleCount),Ae=Math.floor(F.y/F.sampleCount);for(let fe=0;fe<ee;fe++)this.centroidVertexArray.emplaceBack(ae,Ae)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,y,{imagePositions:E,canonical:_})}processPolygon(l,A,y,_,E){if(_.length<1||Jp(_[0]))return;for(const ae of _)ae.length!==0&&aA(l,ae);const O={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},D=E.fill.getGranularityForZoomLevel(A.z),F=Zd.types[y.type]==="Polygon";for(const ae of _){if(ae.length===0||Jp(ae))continue;const Ae=oA(ae,D,F);this._generateSideFaces(Ae,O)}if(!F)return;const W=ud(_,A,D,!1),ee=this.layoutVertexArray;cy(((ae,Ae)=>{Pr(ee,ae,Ae,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,W.verticesFlattened,W.indicesTriangles)}_generateSideFaces(l,A){let y=0;for(let _=1;_<l.length;_++){const E=l[_],O=l[_-1];if(Qf(E,O))continue;A.segment.vertexLength+4>dn.MAX_VERTEX_ARRAY_LENGTH&&(A.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const D=E.sub(O)._perp()._unit(),F=O.dist(E);y+F>32768&&(y=0),Pr(this.layoutVertexArray,E.x,E.y,D.x,D.y,0,0,y),Pr(this.layoutVertexArray,E.x,E.y,D.x,D.y,0,1,y),y+=F,Pr(this.layoutVertexArray,O.x,O.y,D.x,D.y,0,0,y),Pr(this.layoutVertexArray,O.x,O.y,D.x,D.y,0,1,y);const W=A.segment.vertexLength;this.indexArray.emplaceBack(W,W+2,W+1),this.indexArray.emplaceBack(W+1,W+2,W+3),A.segment.vertexLength+=4,A.segment.primitiveLength+=2}}}function aA(h,l){for(let A=0;A<l.length;A++){const y=l[A];A===l.length-1&&l[0].x===y.x&&l[0].y===y.y||(h.x+=y.x,h.y+=y.y,h.sampleCount++)}}function Qf(h,l){return h.x===l.x&&(h.x<0||h.x>mt)||h.y===l.y&&(h.y<0||h.y>mt)}function Jp(h){return h.every((l=>l.x<0))||h.every((l=>l.x>mt))||h.every((l=>l.y<0))||h.every((l=>l.y>mt))}let Ay;Fn("FillExtrusionBucket",Fo,{omit:["layers","features"]});var yh={get paint(){return Ay=Ay||new Hs({"fill-extrusion-opacity":new di(xt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new si(xt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new di(xt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new di(xt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new DA(xt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new si(xt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new si(xt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new di(xt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class ha extends dl{constructor(l,A){super(l,yh,A)}createBucket(l){return new Fo(l)}queryRadius(){return Nf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:l,feature:A,featureState:y,geometry:_,transform:E,pixelsToTileUnits:O,pixelPosMatrix:D}){const F=$p(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-E.bearingInRadians,O),W=this.paint.get("fill-extrusion-height").evaluate(A,y),ee=this.paint.get("fill-extrusion-base").evaluate(A,y),ae=(function(fe,be){const we=[];for(const Be of fe){const ze=[Be.x,Be.y,0,1];Te(ze,ze,be),we.push(new c(ze[0]/ze[3],ze[1]/ze[3]))}return we})(F,D),Ae=(function(fe,be,we,Be){const ze=[],at=[],We=Be[8]*be,Xe=Be[9]*be,ct=Be[10]*be,pt=Be[11]*be,Nt=Be[8]*we,sn=Be[9]*we,nn=Be[10]*we,fn=Be[11]*we;for(const Kn of fe){const yn=[],on=[];for(const Yt of Kn){const ii=Yt.x,Zn=Yt.y,li=Be[0]*ii+Be[4]*Zn+Be[12],$n=Be[1]*ii+Be[5]*Zn+Be[13],Pi=Be[2]*ii+Be[6]*Zn+Be[14],bo=Be[3]*ii+Be[7]*Zn+Be[15],Nr=Pi+ct,fa=bo+pt,Fc=li+Nt,jl=$n+sn,pa=Pi+nn,ea=bo+fn,Vo=new c((li+We)/fa,($n+Xe)/fa);Vo.z=Nr/fa,yn.push(Vo);const Wa=new c(Fc/ea,jl/ea);Wa.z=pa/ea,on.push(Wa)}ze.push(yn),at.push(on)}return[ze,at]})(_,ee,W,D);return(function(fe,be,we){let Be=1/0;Rc(we,be)&&(Be=qf(we,be[0]));for(let ze=0;ze<be.length;ze++){const at=be[ze],We=fe[ze];for(let Xe=0;Xe<at.length-1;Xe++){const ct=at[Xe],pt=[ct,at[Xe+1],We[Xe+1],We[Xe],ct];m0(we,pt)&&(Be=Math.min(Be,qf(we,pt)))}}return Be!==1/0&&Be})(Ae[0],Ae[1],ae)}}function KA(h,l){return h.x*l.x+h.y*l.y}function qf(h,l){if(h.length===1){let A=0;const y=l[A++];let _;for(;!_||y.equals(_);)if(_=l[A++],!_)return 1/0;for(;A<l.length;A++){const E=l[A],O=h[0],D=_.sub(y),F=E.sub(y),W=O.sub(y),ee=KA(D,D),ae=KA(D,F),Ae=KA(F,F),fe=KA(W,D),be=KA(W,F),we=ee*Ae-ae*ae,Be=(Ae*fe-ae*be)/we,ze=(ee*be-ae*fe)/we,at=y.z*(1-Be-ze)+_.z*Be+E.z*ze;if(isFinite(at))return at}return 1/0}{let A=1/0;for(const y of l)A=Math.min(A,y.z);return A}}const rb=ki([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:lA}=rb,w0=ki([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Hg}=w0,Lc=Math.cos(Math.PI/180*37.5),hy=Math.pow(2,14)/.5;class em{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((A=>A.id)),this.index=l.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((A=>{this.gradients[A.id]={}})),this.layoutVertexArray=new nt,this.layoutVertexArray2=new tt,this.indexArray=new Ft,this.programConfigurations=new Yo(l.layers,l.zoom),this.segments=new dn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((A=>A.isStateDependent())).map((A=>A.id))}populate(l,A,y){this.hasDependencies=Gf("line",this.layers,A)||this.hasLineDasharray(this.layers);const _=this.layers[0].layout.get("line-sort-key"),E=!_.isConstant(),O=[];for(const{feature:D,id:F,index:W,sourceLayerIndex:ee}of l){const ae=this.layers[0]._featureFilter.needGeometry,Ae=mh(D,ae);if(!this.layers[0]._featureFilter.filter(new zr(this.zoom),Ae,y))continue;const fe=E?_.evaluate(Ae,{},y):void 0,be={id:F,properties:D.properties,type:D.type,sourceLayerIndex:ee,index:W,geometry:ae?Ae.geometry:ca(D),patterns:{},dashes:{},sortKey:fe};O.push(be)}E&&O.sort(((D,F)=>D.sortKey-F.sortKey));for(const D of O){const{geometry:F,index:W,sourceLayerIndex:ee}=D;this.hasDependencies?(Gf("line",this.layers,A)?Qg("line",this.layers,D,{zoom:this.zoom},A):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,D,this.zoom,A),this.patternFeatures.push(D)):this.addFeature(D,F,W,y,{},{},A.subdivisionGranularity),A.featureIndex.insert(l[W].feature,F,W,ee,this.index)}}update(l,A,y,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,A,this.stateDependentLayers,{imagePositions:y,dashPositions:_})}addFeatures(l,A,y,_){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,A,y,_,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,Hg)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,lA),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,A,y,_,E,O,D){const F=this.layers[0].layout,W=F.get("line-join").evaluate(l,{}),ee=F.get("line-cap"),ae=F.get("line-miter-limit"),Ae=F.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(const fe of A)this.addLine(fe,l,W,ee,ae,Ae,_,D);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,y,{imagePositions:E,dashPositions:O,canonical:_})}addLine(l,A,y,_,E,O,D,F){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,l=oA(l,D?F.line.getGranularityForZoomLevel(D.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let We=0;We<l.length-1;We++)this.totalDistance+=l[We].dist(l[We+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const W=Zd.types[A.type]==="Polygon";let ee=l.length;for(;ee>=2&&l[ee-1].equals(l[ee-2]);)ee--;let ae=0;for(;ae<ee-1&&l[ae].equals(l[ae+1]);)ae++;if(ee<(W?3:2))return;y==="bevel"&&(E=1.05);const Ae=this.overscaling<=16?122880/(512*this.overscaling):0,fe=this.segments.prepareSegment(10*ee,this.layoutVertexArray,this.indexArray);let be,we,Be,ze,at;this.e1=this.e2=-1,W&&(be=l[ee-2],at=l[ae].sub(be)._unit()._perp());for(let We=ae;We<ee;We++){if(Be=We===ee-1?W?l[ae+1]:void 0:l[We+1],Be&&l[We].equals(Be))continue;at&&(ze=at),be&&(we=be),be=l[We],at=Be?Be.sub(be)._unit()._perp():ze,ze=ze||at;let Xe=ze.add(at);Xe.x===0&&Xe.y===0||Xe._unit();const ct=ze.x*at.x+ze.y*at.y,pt=Xe.x*at.x+Xe.y*at.y,Nt=pt!==0?1/pt:1/0,sn=2*Math.sqrt(2-2*pt),nn=pt<Lc&&we&&Be,fn=ze.x*at.y-ze.y*at.x>0;if(nn&&We>ae){const on=be.dist(we);if(on>2*Ae){const Yt=be.sub(be.sub(we)._mult(Ae/on)._round());this.updateDistance(we,Yt),this.addCurrentVertex(Yt,ze,0,0,fe),we=Yt}}const Kn=we&&Be;let yn=Kn?y:W?"butt":_;if(Kn&&yn==="round"&&(Nt<O?yn="miter":Nt<=2&&(yn="fakeround")),yn==="miter"&&Nt>E&&(yn="bevel"),yn==="bevel"&&(Nt>2&&(yn="flipbevel"),Nt<E&&(yn="miter")),we&&this.updateDistance(we,be),yn==="miter")Xe._mult(Nt),this.addCurrentVertex(be,Xe,0,0,fe);else if(yn==="flipbevel"){if(Nt>100)Xe=at.mult(-1);else{const on=Nt*ze.add(at).mag()/ze.sub(at).mag();Xe._perp()._mult(on*(fn?-1:1))}this.addCurrentVertex(be,Xe,0,0,fe),this.addCurrentVertex(be,Xe.mult(-1),0,0,fe)}else if(yn==="bevel"||yn==="fakeround"){const on=-Math.sqrt(Nt*Nt-1),Yt=fn?on:0,ii=fn?0:on;if(we&&this.addCurrentVertex(be,ze,Yt,ii,fe),yn==="fakeround"){const Zn=Math.round(180*sn/Math.PI/20);for(let li=1;li<Zn;li++){let $n=li/Zn;if($n!==.5){const bo=$n-.5;$n+=$n*bo*($n-1)*((1.0904+ct*(ct*(3.55645-1.43519*ct)-3.2452))*bo*bo+(.848013+ct*(.215638*ct-1.06021)))}const Pi=at.sub(ze)._mult($n)._add(ze)._unit()._mult(fn?-1:1);this.addHalfVertex(be,Pi.x,Pi.y,!1,fn,0,fe)}}Be&&this.addCurrentVertex(be,at,-Yt,-ii,fe)}else if(yn==="butt")this.addCurrentVertex(be,Xe,0,0,fe);else if(yn==="square"){const on=we?1:-1;this.addCurrentVertex(be,Xe,on,on,fe)}else yn==="round"&&(we&&(this.addCurrentVertex(be,ze,0,0,fe),this.addCurrentVertex(be,ze,1,1,fe,!0)),Be&&(this.addCurrentVertex(be,at,-1,-1,fe,!0),this.addCurrentVertex(be,at,0,0,fe)));if(nn&&We<ee-1){const on=be.dist(Be);if(on>2*Ae){const Yt=be.add(Be.sub(be)._mult(Ae/on)._round());this.updateDistance(be,Yt),this.addCurrentVertex(Yt,at,0,0,fe),be=Yt}}}}addCurrentVertex(l,A,y,_,E,O=!1){const D=A.y*_-A.x,F=-A.y-A.x*_;this.addHalfVertex(l,A.x+A.y*y,A.y-A.x*y,O,!1,y,E),this.addHalfVertex(l,D,F,O,!0,-_,E),this.distance>hy/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,A,y,_,E,O))}addHalfVertex({x:l,y:A},y,_,E,O,D,F){const W=.5*(this.lineClips?this.scaledDistance*(hy-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(E?1:0),(A<<1)+(O?1:0),Math.round(63*y)+128,Math.round(63*_)+128,1+(D===0?0:D<0?-1:1)|(63&W)<<2,W>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ee=F.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,ee,this.e2),F.primitiveLength++),O?this.e2=ee:this.e1=ee}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,A){this.distance+=l.dist(A),this.updateScaledDistance()}hasLineDasharray(l){for(const A of l){const y=A.paint.get("line-dasharray");if(y&&!y.isConstant())return!0}return!1}addLineDashDependencies(l,A,y,_){for(const E of l){const O=E.paint.get("line-dasharray");if(!O||O.value.kind==="constant")continue;const D=E.layout.get("line-cap")==="round",F={dasharray:O.value.evaluate({zoom:y-1},A,{}),round:D},W={dasharray:O.value.evaluate({zoom:y},A,{}),round:D},ee={dasharray:O.value.evaluate({zoom:y+1},A,{}),round:D},ae=`${F.dasharray.join(",")},${F.round}`,Ae=`${W.dasharray.join(",")},${W.round}`,fe=`${ee.dasharray.join(",")},${ee.round}`;_.dashDependencies[ae]=F,_.dashDependencies[Ae]=W,_.dashDependencies[fe]=ee,A.dashes[E.id]={min:ae,mid:Ae,max:fe}}}}let ob,Yf;Fn("LineBucket",em,{omit:["layers","patternFeatures"]});var Zg={get paint(){return Yf=Yf||new Hs({"line-opacity":new si(xt.paint_line["line-opacity"]),"line-color":new si(xt.paint_line["line-color"]),"line-translate":new di(xt.paint_line["line-translate"]),"line-translate-anchor":new di(xt.paint_line["line-translate-anchor"]),"line-width":new si(xt.paint_line["line-width"]),"line-gap-width":new si(xt.paint_line["line-gap-width"]),"line-offset":new si(xt.paint_line["line-offset"]),"line-blur":new si(xt.paint_line["line-blur"]),"line-dasharray":new DA(xt.paint_line["line-dasharray"]),"line-pattern":new DA(xt.paint_line["line-pattern"]),"line-gradient":new tl(xt.paint_line["line-gradient"])})},get layout(){return ob=ob||new Hs({"line-cap":new di(xt.layout_line["line-cap"]),"line-join":new si(xt.layout_line["line-join"]),"line-miter-limit":new di(xt.layout_line["line-miter-limit"]),"line-round-limit":new di(xt.layout_line["line-round-limit"]),"line-sort-key":new si(xt.layout_line["line-sort-key"])})}};class Vf extends si{possiblyEvaluate(l,A){return A=new zr(Math.floor(A.zoom),{now:A.now,fadeDuration:A.fadeDuration,zoomHistory:A.zoomHistory,transition:A.transition}),super.possiblyEvaluate(l,A)}evaluate(l,A,y,_){return A=Le({},A,{zoom:Math.floor(A.zoom)}),super.evaluate(l,A,y,_)}}let Ia;class $f extends dl{constructor(l,A){super(l,Zg,A),this.gradientVersion=0,Ia||(Ia=new Vf(Zg.paint.properties["line-width"].specification),Ia.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){const A=this.gradientExpression();this.stepInterpolant=!!(function(y){return y._styleExpression!==void 0})(A)&&A._styleExpression.expression instanceof ds,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,A){super.recalculate(l,A),this.paint._values["line-floorwidth"]=Ia.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new em(l)}queryRadius(l){const A=l,y=tm(rA("line-width",this,A),rA("line-gap-width",this,A)),_=rA("line-offset",this,A);return y/2+Math.abs(_)+Nf(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:l,feature:A,featureState:y,geometry:_,transform:E,pixelsToTileUnits:O}){const D=$p(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-E.bearingInRadians,O),F=O/2*tm(this.paint.get("line-width").evaluate(A,y),this.paint.get("line-gap-width").evaluate(A,y)),W=this.paint.get("line-offset").evaluate(A,y);return W&&(_=(function(ee,ae){const Ae=[];for(let fe=0;fe<ee.length;fe++){const be=zg(ee[fe]),we=[];for(let Be=0;Be<be.length;Be++){const ze=be[Be],at=be[Be-1],We=be[Be+1],Xe=Be===0?new c(0,0):ze.sub(at)._unit()._perp(),ct=Be===be.length-1?new c(0,0):We.sub(ze)._unit()._perp(),pt=Xe._add(ct)._unit(),Nt=pt.x*ct.x+pt.y*ct.y;Nt!==0&&pt._mult(1/Nt),we.push(pt._mult(ae)._add(ze))}Ae.push(we)}return Ae})(_,W*O)),(function(ee,ae,Ae){for(let fe=0;fe<ae.length;fe++){const be=ae[fe];if(ee.length>=3){for(let we=0;we<be.length;we++)if(sd(ee,be[we]))return!0}if(jf(ee,be,Ae))return!0}return!1})(D,_,F)}isTileClipped(){return!0}}function tm(h,l){return l>0?l+2*h:h}const Xd=ki([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),sb=ki([{name:"a_projected_pos",components:3,type:"Float32"}],4);ki([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const ab=ki([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);ki([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const lb=ki([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Xg=ki([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ub(h,l,A){return h.sections.forEach((y=>{y.text=(function(_,E,O){const D=E.layout.get("text-transform").evaluate(O,{});return D==="uppercase"?_=_.toLocaleUpperCase():D==="lowercase"&&(_=_.toLocaleLowerCase()),Bc.applyArabicShaping&&(_=Bc.applyArabicShaping(_)),_})(y.text,l,A)})),h}ki([{name:"triangle",components:3,type:"Uint16"}]),ki([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ki([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),ki([{type:"Float32",name:"offsetX"}]),ki([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ki([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var Io=24;const S0={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Uc={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},a_={40:!0};function cb(h,l,A,y,_,E){if("fontStack"in l){const O=A[l.fontStack],D=O&&O[h];return D?D.metrics.advance*l.scale+_:0}{const O=y[l.imageName];return O?O.displaySize[0]*l.scale*Io/E+_:0}}function Ab(h,l,A,y){const _=Math.pow(h-l,2);return y?h<l?_/2:2*_:_+Math.abs(A)*A}function Jd(h,l,A){let y=0;return h===10&&(y-=1e4),A&&(y+=150),h!==40&&h!==65288||(y+=50),l!==41&&l!==65289||(y+=50),y}function Jg(h,l,A,y,_,E){let O=null,D=Ab(l,A,_,E);for(const F of y){const W=Ab(l-F.x,A,_,E)+F.badness;W<=D&&(O=F,D=W)}return{index:h,x:l,priorBreak:O,badness:D}}function dy(h){return h?dy(h.priorBreak).concat(h.index):[]}class vh{constructor(l="",A=[],y=[]){this.text=l,this.sections=A,this.sectionIndex=y,this.imageSectionID=null}static fromFeature(l,A){const y=new vh;for(let _=0;_<l.sections.length;_++){const E=l.sections[_];E.image?y.addImageSection(E):y.addTextSection(E,A)}return y}length(){return[...this.text].length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}verticalizePunctuation(){this.text=(function(l){let A="",y={premature:!0,value:void 0};const _=l[Symbol.iterator]();let E=_.next();const O=l[Symbol.iterator]();O.next();let D=O.next();for(;!E.done;)A+=!D.done&&Qp(D.value.codePointAt(0))&&!S0[D.value]||!y.premature&&Qp(y.value.codePointAt(0))&&!S0[y.value]||!S0[E.value]?E.value:S0[E.value],y={value:E.value,premature:!1},E=_.next(),D=O.next();return A})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const l=this.text.match(/^\s*/),A=l?l[0].length:0,y=this.text.match(/\S\s*$/),_=y?y[0].length-1:0;this.text=this.text.substring(A,this.text.length-_),this.sectionIndex=this.sectionIndex.slice(A,this.sectionIndex.length-_)}substring(l,A){const y=[...this.text].slice(l,A).join(""),_=this.sectionIndex.slice(l,A);return new vh(y,this.sections,_)}toCodeUnitIndex(l){return[...this.text].slice(0,l).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((l,A)=>Math.max(l,this.sections[A].scale)),0)}getMaxImageSize(l){let A=0,y=0;for(let _=0;_<this.length();_++){const E=this.getSection(_);if("imageName"in E){const O=l[E.imageName];if(!O)continue;const D=O.displaySize;A=Math.max(A,D[0]),y=Math.max(y,D[1])}}return{maxImageWidth:A,maxImageHeight:y}}addTextSection(l,A){this.text+=l.text,this.sections.push({scale:l.scale||1,verticalAlign:l.verticalAlign||"bottom",fontStack:l.fontStack||A});const y=this.sections.length-1;this.sectionIndex.push(...[...l.text].map((()=>y)))}addImageSection(l){const A=l.image?l.image.name:"";if(A.length===0)return void Mt("Can't add FormattedSection with an empty image.");const y=this.getNextImageSectionCharCode();y?(this.text+=String.fromCharCode(y),this.sections.push({scale:1,verticalAlign:l.verticalAlign||"bottom",imageName:A}),this.sectionIndex.push(this.sections.length-1)):Mt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(l,A,y,_,E){const O=[],D=this.determineAverageLineWidth(l,A,y,_,E),F=this.hasZeroWidthSpaces();let W=0,ee=0;const ae=this.text[Symbol.iterator]();let Ae=ae.next();const fe=this.text[Symbol.iterator]();fe.next();let be=fe.next();const we=this.text[Symbol.iterator]();we.next(),we.next();let Be=we.next();for(;!Ae.done;){const ze=this.getSection(ee),at=Ae.value.codePointAt(0);if(A0(at)||(W+=cb(at,ze,y,_,l,E)),!be.done){const We=kA(at),Xe=be.value.codePointAt(0);(Uc[at]||We||"imageName"in ze||!Be.done&&a_[Xe])&&O.push(Jg(ee+1,W,D,O,Jd(at,Xe,We&&F),!1))}ee++,Ae=ae.next(),be=fe.next(),Be=we.next()}return dy(Jg(this.length(),W,D,O,0,!0))}determineAverageLineWidth(l,A,y,_,E){let O=0,D=0;for(const F of this.text){const W=this.getSection(D);O+=cb(F.codePointAt(0),W,y,_,l,E),D++}return O/Math.max(1,Math.ceil(O/A))}}const fy=4294967296,E0=1/fy,hb=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class e1{constructor(l=new Uint8Array(16)){this.buf=ArrayBuffer.isView(l)?l:new Uint8Array(l),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(l,A,y=this.length){for(;this.pos<y;){const _=this.readVarint(),E=_>>3,O=this.pos;this.type=7&_,l(E,A,this),this.pos===O&&this.skip(_)}return A}readMessage(l,A){return this.readFields(l,A,this.readVarint()+this.pos)}readFixed32(){const l=this.dataView.getUint32(this.pos,!0);return this.pos+=4,l}readSFixed32(){const l=this.dataView.getInt32(this.pos,!0);return this.pos+=4,l}readFixed64(){const l=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*fy;return this.pos+=8,l}readSFixed64(){const l=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*fy;return this.pos+=8,l}readFloat(){const l=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,l}readDouble(){const l=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,l}readVarint(l){const A=this.buf;let y,_;return _=A[this.pos++],y=127&_,_<128?y:(_=A[this.pos++],y|=(127&_)<<7,_<128?y:(_=A[this.pos++],y|=(127&_)<<14,_<128?y:(_=A[this.pos++],y|=(127&_)<<21,_<128?y:(_=A[this.pos],y|=(15&_)<<28,(function(E,O,D){const F=D.buf;let W,ee;if(ee=F[D.pos++],W=(112&ee)>>4,ee<128||(ee=F[D.pos++],W|=(127&ee)<<3,ee<128)||(ee=F[D.pos++],W|=(127&ee)<<10,ee<128)||(ee=F[D.pos++],W|=(127&ee)<<17,ee<128)||(ee=F[D.pos++],W|=(127&ee)<<24,ee<128)||(ee=F[D.pos++],W|=(1&ee)<<31,ee<128))return ef(E,W,O);throw new Error("Expected varint not more than 10 bytes")})(y,l,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const l=this.readVarint();return l%2==1?(l+1)/-2:l/2}readBoolean(){return!!this.readVarint()}readString(){const l=this.readVarint()+this.pos,A=this.pos;return this.pos=l,l-A>=12&&hb?hb.decode(this.buf.subarray(A,l)):(function(y,_,E){let O="",D=_;for(;D<E;){const F=y[D];let W,ee,ae,Ae=null,fe=F>239?4:F>223?3:F>191?2:1;if(D+fe>E)break;fe===1?F<128&&(Ae=F):fe===2?(W=y[D+1],(192&W)==128&&(Ae=(31&F)<<6|63&W,Ae<=127&&(Ae=null))):fe===3?(W=y[D+1],ee=y[D+2],(192&W)==128&&(192&ee)==128&&(Ae=(15&F)<<12|(63&W)<<6|63&ee,(Ae<=2047||Ae>=55296&&Ae<=57343)&&(Ae=null))):fe===4&&(W=y[D+1],ee=y[D+2],ae=y[D+3],(192&W)==128&&(192&ee)==128&&(192&ae)==128&&(Ae=(15&F)<<18|(63&W)<<12|(63&ee)<<6|63&ae,(Ae<=65535||Ae>=1114112)&&(Ae=null))),Ae===null?(Ae=65533,fe=1):Ae>65535&&(Ae-=65536,O+=String.fromCharCode(Ae>>>10&1023|55296),Ae=56320|1023&Ae),O+=String.fromCharCode(Ae),D+=fe}return O})(this.buf,A,l)}readBytes(){const l=this.readVarint()+this.pos,A=this.buf.subarray(this.pos,l);return this.pos=l,A}readPackedVarint(l=[],A){const y=this.readPackedEnd();for(;this.pos<y;)l.push(this.readVarint(A));return l}readPackedSVarint(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readSVarint());return l}readPackedBoolean(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readBoolean());return l}readPackedFloat(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readFloat());return l}readPackedDouble(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readDouble());return l}readPackedFixed32(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readFixed32());return l}readPackedSFixed32(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readSFixed32());return l}readPackedFixed64(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readFixed64());return l}readPackedSFixed64(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readSFixed64());return l}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(l){const A=7&l;if(A===0)for(;this.buf[this.pos++]>127;);else if(A===2)this.pos=this.readVarint()+this.pos;else if(A===5)this.pos+=4;else{if(A!==1)throw new Error(`Unimplemented type: ${A}`);this.pos+=8}}writeTag(l,A){this.writeVarint(l<<3|A)}realloc(l){let A=this.length||16;for(;A<this.pos+l;)A*=2;if(A!==this.length){const y=new Uint8Array(A);y.set(this.buf),this.buf=y,this.dataView=new DataView(y.buffer),this.length=A}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeSFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*E0),!0),this.pos+=8}writeSFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*E0),!0),this.pos+=8}writeVarint(l){(l=+l||0)>268435455||l<0?(function(A,y){let _,E;if(A>=0?(_=A%4294967296|0,E=A/4294967296|0):(_=~(-A%4294967296),E=~(-A/4294967296),4294967295^_?_=_+1|0:(_=0,E=E+1|0)),A>=18446744073709552e3||A<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");y.realloc(10),(function(O,D,F){F.buf[F.pos++]=127&O|128,O>>>=7,F.buf[F.pos++]=127&O|128,O>>>=7,F.buf[F.pos++]=127&O|128,O>>>=7,F.buf[F.pos++]=127&O|128,F.buf[F.pos]=127&(O>>>=7)})(_,0,y),(function(O,D){const F=(7&O)<<4;D.buf[D.pos++]|=F|((O>>>=3)?128:0),O&&(D.buf[D.pos++]=127&O|((O>>>=7)?128:0),O&&(D.buf[D.pos++]=127&O|((O>>>=7)?128:0),O&&(D.buf[D.pos++]=127&O|((O>>>=7)?128:0),O&&(D.buf[D.pos++]=127&O|((O>>>=7)?128:0),O&&(D.buf[D.pos++]=127&O)))))})(E,y)})(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))}writeSVarint(l){this.writeVarint(l<0?2*-l-1:2*l)}writeBoolean(l){this.writeVarint(+l)}writeString(l){l=String(l),this.realloc(4*l.length),this.pos++;const A=this.pos;this.pos=(function(_,E,O){for(let D,F,W=0;W<E.length;W++){if(D=E.charCodeAt(W),D>55295&&D<57344){if(!F){D>56319||W+1===E.length?(_[O++]=239,_[O++]=191,_[O++]=189):F=D;continue}if(D<56320){_[O++]=239,_[O++]=191,_[O++]=189,F=D;continue}D=F-55296<<10|D-56320|65536,F=null}else F&&(_[O++]=239,_[O++]=191,_[O++]=189,F=null);D<128?_[O++]=D:(D<2048?_[O++]=D>>6|192:(D<65536?_[O++]=D>>12|224:(_[O++]=D>>18|240,_[O++]=D>>12&63|128),_[O++]=D>>6&63|128),_[O++]=63&D|128)}return O})(this.buf,l,this.pos);const y=this.pos-A;y>=128&&py(A,y,this),this.pos=A-1,this.writeVarint(y),this.pos+=y}writeFloat(l){this.realloc(4),this.dataView.setFloat32(this.pos,l,!0),this.pos+=4}writeDouble(l){this.realloc(8),this.dataView.setFloat64(this.pos,l,!0),this.pos+=8}writeBytes(l){const A=l.length;this.writeVarint(A),this.realloc(A);for(let y=0;y<A;y++)this.buf[this.pos++]=l[y]}writeRawMessage(l,A){this.pos++;const y=this.pos;l(A,this);const _=this.pos-y;_>=128&&py(y,_,this),this.pos=y-1,this.writeVarint(_),this.pos+=_}writeMessage(l,A,y){this.writeTag(l,2),this.writeRawMessage(A,y)}writePackedVarint(l,A){A.length&&this.writeMessage(l,J2,A)}writePackedSVarint(l,A){A.length&&this.writeMessage(l,e3,A)}writePackedBoolean(l,A){A.length&&this.writeMessage(l,u_,A)}writePackedFloat(l,A){A.length&&this.writeMessage(l,t3,A)}writePackedDouble(l,A){A.length&&this.writeMessage(l,l_,A)}writePackedFixed32(l,A){A.length&&this.writeMessage(l,B0,A)}writePackedSFixed32(l,A){A.length&&this.writeMessage(l,my,A)}writePackedFixed64(l,A){A.length&&this.writeMessage(l,t1,A)}writePackedSFixed64(l,A){A.length&&this.writeMessage(l,c_,A)}writeBytesField(l,A){this.writeTag(l,2),this.writeBytes(A)}writeFixed32Field(l,A){this.writeTag(l,5),this.writeFixed32(A)}writeSFixed32Field(l,A){this.writeTag(l,5),this.writeSFixed32(A)}writeFixed64Field(l,A){this.writeTag(l,1),this.writeFixed64(A)}writeSFixed64Field(l,A){this.writeTag(l,1),this.writeSFixed64(A)}writeVarintField(l,A){this.writeTag(l,0),this.writeVarint(A)}writeSVarintField(l,A){this.writeTag(l,0),this.writeSVarint(A)}writeStringField(l,A){this.writeTag(l,2),this.writeString(A)}writeFloatField(l,A){this.writeTag(l,5),this.writeFloat(A)}writeDoubleField(l,A){this.writeTag(l,1),this.writeDouble(A)}writeBooleanField(l,A){this.writeVarintField(l,+A)}}function ef(h,l,A){return A?4294967296*l+(h>>>0):4294967296*(l>>>0)+(h>>>0)}function py(h,l,A){const y=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));A.realloc(y);for(let _=A.pos-1;_>=h;_--)A.buf[_+y]=A.buf[_]}function J2(h,l){for(let A=0;A<h.length;A++)l.writeVarint(h[A])}function e3(h,l){for(let A=0;A<h.length;A++)l.writeSVarint(h[A])}function t3(h,l){for(let A=0;A<h.length;A++)l.writeFloat(h[A])}function l_(h,l){for(let A=0;A<h.length;A++)l.writeDouble(h[A])}function u_(h,l){for(let A=0;A<h.length;A++)l.writeBoolean(h[A])}function B0(h,l){for(let A=0;A<h.length;A++)l.writeFixed32(h[A])}function my(h,l){for(let A=0;A<h.length;A++)l.writeSFixed32(h[A])}function t1(h,l){for(let A=0;A<h.length;A++)l.writeFixed64(h[A])}function c_(h,l){for(let A=0;A<h.length;A++)l.writeSFixed64(h[A])}function db(h,l,A){h===1&&A.readMessage(fb,l)}function fb(h,l,A){if(h===3){const{id:y,bitmap:_,width:E,height:O,left:D,top:F,advance:W}=A.readMessage(gy,{});l.push({id:y,bitmap:new ad({width:E+6,height:O+6},_),metrics:{width:E,height:O,left:D,top:F,advance:W}})}}function gy(h,l,A){h===1?l.id=A.readVarint():h===2?l.bitmap=A.readBytes():h===3?l.width=A.readVarint():h===4?l.height=A.readVarint():h===5?l.left=A.readSVarint():h===6?l.top=A.readSVarint():h===7&&(l.advance=A.readVarint())}function yy(h){let l=0,A=0;for(const O of h)l+=O.w*O.h,A=Math.max(A,O.w);h.sort(((O,D)=>D.h-O.h));const y=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),A),h:1/0}];let _=0,E=0;for(const O of h)for(let D=y.length-1;D>=0;D--){const F=y[D];if(!(O.w>F.w||O.h>F.h)){if(O.x=F.x,O.y=F.y,E=Math.max(E,O.y+O.h),_=Math.max(_,O.x+O.w),O.w===F.w&&O.h===F.h){const W=y.pop();W&&D<y.length&&(y[D]=W)}else O.h===F.h?(F.x+=O.w,F.w-=O.w):O.w===F.w?(F.y+=O.h,F.h-=O.h):(y.push({x:F.x+O.w,y:F.y,w:F.w-O.w,h:O.h}),F.y+=O.h,F.h-=O.h);break}}return{w:_,h:E,fill:l/(_*E)||0}}class nm{constructor(l,{pixelRatio:A,version:y,stretchX:_,stretchY:E,content:O,textFitWidth:D,textFitHeight:F}){this.paddedRect=l,this.pixelRatio=A,this.stretchX=_,this.stretchY=E,this.content=O,this.version=y,this.textFitWidth=D,this.textFitHeight=F}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class vy{constructor(l,A){const y={},_={};this.haveRenderCallbacks=[];const E=[];this.addImages(l,y,E),this.addImages(A,_,E);const{w:O,h:D}=yy(E),F=new Xs({width:O||1,height:D||1});for(const W in l){const ee=l[W],ae=y[W].paddedRect;Xs.copy(ee.data,F,{x:0,y:0},{x:ae.x+1,y:ae.y+1},ee.data)}for(const W in A){const ee=A[W],ae=_[W].paddedRect,Ae=ae.x+1,fe=ae.y+1,be=ee.data.width,we=ee.data.height;Xs.copy(ee.data,F,{x:0,y:0},{x:Ae,y:fe},ee.data),Xs.copy(ee.data,F,{x:0,y:we-1},{x:Ae,y:fe-1},{width:be,height:1}),Xs.copy(ee.data,F,{x:0,y:0},{x:Ae,y:fe+we},{width:be,height:1}),Xs.copy(ee.data,F,{x:be-1,y:0},{x:Ae-1,y:fe},{width:1,height:we}),Xs.copy(ee.data,F,{x:0,y:0},{x:Ae+be,y:fe},{width:1,height:we})}this.image=F,this.iconPositions=y,this.patternPositions=_}addImages(l,A,y){for(const _ in l){const E=l[_],O={x:0,y:0,w:E.data.width+2,h:E.data.height+2};y.push(O),A[_]=new nm(O,E),E.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(l,A){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const y in l.updatedImages)this.patchUpdatedImage(this.iconPositions[y],l.getImage(y),A),this.patchUpdatedImage(this.patternPositions[y],l.getImage(y),A)}patchUpdatedImage(l,A,y){if(!l||!A||l.version===A.version)return;l.version=A.version;const[_,E]=l.tl;y.update(A.data,void 0,{x:_,y:E})}}var Ad;function To(h,l,A,y,_,E,O,D,F,W,ee,ae,Ae,fe,be){const we=vh.fromFeature(h,_);let Be;ae===s.aA.vertical&&we.verticalizePunctuation();let ze=we.determineLineBreaks(W,E,l,y,fe);const{processBidirectionalText:at,processStyledBidirectionalText:We}=Bc;if(at&&we.sections.length===1){Be=[],ze=ze.map((Nt=>we.toCodeUnitIndex(Nt)));const pt=at(we.toString(),ze);for(const Nt of pt){const sn=[...Nt].map((()=>0));Be.push(new vh(Nt,we.sections,sn))}}else if(We){Be=[],ze=ze.map((nn=>we.toCodeUnitIndex(nn)));let pt=0;const Nt=[];for(const nn of we.text)Nt.push(...Array(nn.length).fill(we.sectionIndex[pt])),pt++;const sn=We(we.text,Nt,ze);for(const nn of sn){const fn=[];let Kn="";for(const yn of nn[0])fn.push(nn[1][Kn.length]),Kn+=yn;Be.push(new vh(nn[0],we.sections,fn))}}else Be=(function(pt,Nt){const sn=[];let nn=0;for(const fn of Nt)sn.push(pt.substring(nn,fn)),nn=fn;return nn<pt.length()&&sn.push(pt.substring(nn,pt.length())),sn})(we,ze);const Xe=[],ct={positionedLines:Xe,text:we.toString(),top:ee[1],bottom:ee[1],left:ee[0],right:ee[0],writingMode:ae,iconsInText:!1,verticalizable:!1};return(function(pt,Nt,sn,nn,fn,Kn,yn,on,Yt,ii,Zn,li){let $n=0,Pi=0,bo=0,Nr=0;const fa=on==="right"?1:on==="left"?0:.5,Fc=Io/li;let jl=0;for(const Vo of fn){Vo.trim();const Wa=Vo.getMaxScale(),rl={positionedGlyphs:[],lineOffset:0};pt.positionedLines[jl]=rl;const qs=rl.positionedGlyphs;let xh=0;if(!Vo.length()){Pi+=Kn,++jl;continue}const zc=n3(nn,Vo,Fc);let Mh=0;for(const Ru of Vo.text){const ka=Vo.getSection(Mh),Nl=Ru.codePointAt(0),Qa=by(Yt,Zn,Nl),Pu={glyph:Nl,imageName:null,x:$n,y:Pi+-17,vertical:Qa,scale:1,fontStack:"",sectionIndex:Vo.getSectionIndex(Mh),metrics:null,rect:null};let m1;if("fontStack"in ka){if(m1=i3(ka,Nl,Qa,zc,Nt,sn),!m1)continue;Pu.fontStack=ka.fontStack}else{if(pt.iconsInText=!0,ka.scale*=Fc,m1=r3(ka,Qa,Wa,zc,nn),!m1)continue;xh=Math.max(xh,m1.imageOffset),Pu.imageName=ka.imageName}const{rect:dm,metrics:A3,baselineOffset:Gy}=m1;Pu.y+=Gy,Pu.scale=ka.scale,Pu.metrics=A3,Pu.rect=dm,qs.push(Pu),Qa?(pt.verticalizable=!0,$n+=("imageName"in ka?A3.advance:Io)*ka.scale+ii):$n+=A3.advance*ka.scale+ii,Mh++}qs.length!==0&&(bo=Math.max($n-ii,bo),I0(qs,0,qs.length-1,fa)),$n=0,rl.lineOffset=Math.max(xh,(Wa-1)*Io);const op=Kn*Wa+xh;Pi+=op,Nr=Math.max(op,Nr),++jl}const{horizontalAlign:pa,verticalAlign:ea}=n1(yn);(function(Vo,Wa,rl,qs,xh,zc,Mh,op,Ru){const ka=(Wa-rl)*xh;let Nl=0;Nl=zc!==Mh?-op*qs- -17:-qs*Ru*Mh+.5*Mh;for(const Qa of Vo)for(const Pu of Qa.positionedGlyphs)Pu.x+=ka,Pu.y+=Nl})(pt.positionedLines,fa,pa,ea,bo,Nr,Kn,Pi,fn.length),pt.top+=-ea*Pi,pt.bottom=pt.top+Pi,pt.left+=-pa*bo,pt.right=pt.left+bo})(ct,l,A,y,Be,O,D,F,ae,W,Ae,be),!(function(pt){for(const Nt of pt)if(Nt.positionedGlyphs.length!==0)return!1;return!0})(Xe)&&ct}function n1(h){let l=.5,A=.5;switch(h){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":A=1;break;case"top":case"top-right":case"top-left":A=0}return{horizontalAlign:l,verticalAlign:A}}function n3(h,l,A){const y=l.getMaxScale()*Io,{maxImageWidth:_,maxImageHeight:E}=l.getMaxImageSize(h),O=Math.max(y,E*A);return{verticalLineContentWidth:Math.max(y,_*A),horizontalLineContentHeight:O}}function O0(h){switch(h){case"top":return 0;case"center":return .5;default:return 1}}function by(h,l,A){return!(h===s.aA.horizontal||!l&&!c0(A)||l&&(A0(A)||(y=A,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(y)))));var y}function i3(h,l,A,y,_,E){const O=E[h.fontStack],D=(function(W,ee,ae,Ae){if(W&&W.rect)return W;const fe=ee[ae.fontStack],be=fe&&fe[Ae];return be?{rect:null,metrics:be.metrics}:null})(O&&O[l],_,h,l);if(D===null)return null;let F;if(A)F=y.verticalLineContentWidth-h.scale*Io;else{const W=O0(h.verticalAlign);F=(y.horizontalLineContentHeight-h.scale*Io)*W}return{rect:D.rect,metrics:D.metrics,baselineOffset:F}}function r3(h,l,A,y,_){const E=_[h.imageName];if(!E)return null;const O=E.paddedRect,D=E.displaySize,F={width:D[0],height:D[1],left:1,top:-3,advance:l?D[1]:D[0]};let W;if(l)W=y.verticalLineContentWidth-D[1]*h.scale;else{const ee=O0(h.verticalAlign);W=(y.horizontalLineContentHeight-D[1]*h.scale)*ee}return{rect:O,metrics:F,baselineOffset:W,imageOffset:(l?D[0]:D[1])*h.scale-Io*A}}function I0(h,l,A,y){if(y===0)return;const _=h[A],E=(h[A].x+_.metrics.advance*_.scale)*y;for(let O=l;O<=A;O++)h[O].x-=E}function im(h,l,A){const{horizontalAlign:y,verticalAlign:_}=n1(A),E=l[0]-h.displaySize[0]*y,O=l[1]-h.displaySize[1]*_;return{image:h,top:O,bottom:O+h.displaySize[1],left:E,right:E+h.displaySize[0]}}function Cy(h){var l,A;let y=h.left,_=h.top,E=h.right-y,O=h.bottom-_;const D=(l=h.image.textFitWidth)!==null&&l!==void 0?l:"stretchOrShrink",F=(A=h.image.textFitHeight)!==null&&A!==void 0?A:"stretchOrShrink",W=(h.image.content[2]-h.image.content[0])/(h.image.content[3]-h.image.content[1]);if(F==="proportional"){if(D==="stretchOnly"&&E/O<W||D==="proportional"){const ee=Math.ceil(O*W);y*=ee/E,E=ee}}else if(D==="proportional"&&F==="stretchOnly"&&W!==0&&E/O>W){const ee=Math.ceil(E/W);_*=ee/O,O=ee}return{x1:y,y1:_,x2:y+E,y2:_+O}}function i1(h,l,A,y,_,E){const O=h.image;let D;if(O.content){const Be=O.content,ze=O.pixelRatio||1;D=[Be[0]/ze,Be[1]/ze,O.displaySize[0]-Be[2]/ze,O.displaySize[1]-Be[3]/ze]}const F=l.left*E,W=l.right*E;let ee,ae,Ae,fe;A==="width"||A==="both"?(fe=_[0]+F-y[3],ae=_[0]+W+y[1]):(fe=_[0]+(F+W-O.displaySize[0])/2,ae=fe+O.displaySize[0]);const be=l.top*E,we=l.bottom*E;return A==="height"||A==="both"?(ee=_[1]+be-y[0],Ae=_[1]+we+y[2]):(ee=_[1]+(be+we-O.displaySize[1])/2,Ae=ee+O.displaySize[1]),{image:O,top:ee,right:ae,bottom:Ae,left:fe,collisionPadding:D}}Fn("ImagePosition",nm),Fn("ImageAtlas",vy),s.aA=void 0,(Ad=s.aA||(s.aA={}))[Ad.none=0]="none",Ad[Ad.horizontal=1]="horizontal",Ad[Ad.vertical=2]="vertical",Ad[Ad.horizontalOnly=3]="horizontalOnly";const bh=128,oc=32640;function Ch(h,l){const{expression:A}=l;if(A.kind==="constant")return{kind:"constant",layoutSize:A.evaluate(new zr(h+1))};if(A.kind==="source")return{kind:"source"};{const{zoomStops:y,interpolationType:_}=A;let E=0;for(;E<y.length&&y[E]<=h;)E++;E=Math.max(0,E-1);let O=E;for(;O<y.length&&y[O]<h+1;)O++;O=Math.min(y.length-1,O);const D=y[E],F=y[O];return A.kind==="composite"?{kind:"composite",minZoom:D,maxZoom:F,interpolationType:_}:{kind:"camera",minZoom:D,maxZoom:F,minSize:A.evaluate(new zr(D)),maxSize:A.evaluate(new zr(F)),interpolationType:_}}}function rm(h,l,A){let y="never";const _=h.get(l);return _?y=_:h.get(A)&&(y="always"),y}const o3=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function r1(h,l,A,y,_,E,O,D,F,W,ee,ae,Ae){const fe=D?Math.min(oc,Math.round(D[0])):0,be=D?Math.min(oc,Math.round(D[1])):0;h.emplaceBack(l,A,Math.round(32*y),Math.round(32*_),E,O,(fe<<1)+(F?1:0),be,16*W,16*ee,256*ae,256*Ae)}function _y(h,l,A){h.emplaceBack(l.x,l.y,A),h.emplaceBack(l.x,l.y,A),h.emplaceBack(l.x,l.y,A),h.emplaceBack(l.x,l.y,A)}function A_(h){for(const l of h.sections)if(tA(l.text))return!0;return!1}class xy{constructor(l){this.layoutVertexArray=new st,this.indexArray=new Ft,this.programConfigurations=l,this.segments=new dn,this.dynamicLayoutVertexArray=new ft,this.opacityVertexArray=new Ct,this.hasVisibleVertices=!1,this.placedSymbolArray=new C}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,A,y,_){this.isEmpty()||(y&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Xd.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,A),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,sb.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,o3,!0),this.opacityVertexBuffer.itemSize=1),(y||_)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Fn("SymbolBuffers",xy);class pb{constructor(l,A,y){this.layoutVertexArray=new l,this.layoutAttributes=A,this.indexArray=new y,this.segments=new dn,this.collisionVertexArray=new Ot}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,ab.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Fn("CollisionBuffers",pb);class Fl{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((O=>O.id)),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const A=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ch(this.zoom,A["text-size"]),this.iconSizeData=Ch(this.zoom,A["icon-size"]);const y=this.layers[0].layout,_=y.get("symbol-sort-key"),E=y.get("symbol-z-order");this.canOverlap=rm(y,"text-overlap","text-allow-overlap")!=="never"||rm(y,"icon-overlap","icon-allow-overlap")!=="never"||y.get("text-ignore-placement")||y.get("icon-ignore-placement"),this.sortFeaturesByKey=E!=="viewport-y"&&!_.isConstant(),this.sortFeaturesByY=(E==="viewport-y"||E==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,y.get("symbol-placement")==="point"&&(this.writingModes=y.get("text-writing-mode").map((O=>s.aA[O]))),this.stateDependentLayerIds=this.layers.filter((O=>O.isStateDependent())).map((O=>O.id)),this.sourceID=l.sourceID}createArrays(){this.text=new xy(new Yo(this.layers,this.zoom,(l=>/^text/.test(l)))),this.icon=new xy(new Yo(this.layers,this.zoom,(l=>/^icon/.test(l)))),this.glyphOffsetArray=new K,this.lineVertexArray=new N,this.symbolInstances=new k,this.textAnchorOffsets=new se}calculateGlyphDependencies(l,A,y,_,E){for(const O of l)if(A[O.codePointAt(0)]=!0,(y||_)&&E){const D=S0[O];D&&(A[D.codePointAt(0)]=!0)}}populate(l,A,y){const _=this.layers[0],E=_.layout,O=E.get("text-font"),D=E.get("text-field"),F=E.get("icon-image"),W=(D.value.kind!=="constant"||D.value.value instanceof Jo&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&(O.value.kind!=="constant"||O.value.value.length>0),ee=F.value.kind!=="constant"||!!F.value.value||Object.keys(F.parameters).length>0,ae=E.get("symbol-sort-key");if(this.features=[],!W&&!ee)return;const Ae=A.iconDependencies,fe=A.glyphDependencies,be=A.availableImages,we=new zr(this.zoom);for(const{feature:Be,id:ze,index:at,sourceLayerIndex:We}of l){const Xe=_._featureFilter.needGeometry,ct=mh(Be,Xe);if(!_._featureFilter.filter(we,ct,y))continue;let pt,Nt;if(Xe||(ct.geometry=ca(Be)),W){const nn=_.getValueAndResolveTokens("text-field",ct,y,be),fn=Jo.factory(nn),Kn=this.hasRTLText=this.hasRTLText||A_(fn);(!Kn||Bc.getRTLTextPluginStatus()==="unavailable"||Kn&&Bc.isParsed())&&(pt=ub(fn,_,ct))}if(ee){const nn=_.getValueAndResolveTokens("icon-image",ct,y,be);Nt=nn instanceof Fs?nn:Fs.fromString(nn)}if(!pt&&!Nt)continue;const sn=this.sortFeaturesByKey?ae.evaluate(ct,{},y):void 0;if(this.features.push({id:ze,text:pt,icon:Nt,index:at,sourceLayerIndex:We,geometry:ct.geometry,properties:Be.properties,type:Zd.types[Be.type],sortKey:sn}),Nt&&(Ae[Nt.name]=!0),pt){const nn=O.evaluate(ct,{},y).join(","),fn=E.get("text-rotation-alignment")!=="viewport"&&E.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(s.aA.vertical)>=0;for(const Kn of pt.sections)if(Kn.image)Ae[Kn.image.name]=!0;else{const yn=Ec(pt.toString()),on=Kn.fontStack||nn,Yt=fe[on]=fe[on]||{};this.calculateGlyphDependencies(Kn.text,Yt,fn,this.allowVerticalPlacement,yn)}}}E.get("symbol-placement")==="line"&&(this.features=(function(Be){const ze={},at={},We=[];let Xe=0;function ct(nn){We.push(Be[nn]),Xe++}function pt(nn,fn,Kn){const yn=at[nn];return delete at[nn],at[fn]=yn,We[yn].geometry[0].pop(),We[yn].geometry[0]=We[yn].geometry[0].concat(Kn[0]),yn}function Nt(nn,fn,Kn){const yn=ze[fn];return delete ze[fn],ze[nn]=yn,We[yn].geometry[0].shift(),We[yn].geometry[0]=Kn[0].concat(We[yn].geometry[0]),yn}function sn(nn,fn,Kn){const yn=Kn?fn[0][fn[0].length-1]:fn[0][0];return`${nn}:${yn.x}:${yn.y}`}for(let nn=0;nn<Be.length;nn++){const fn=Be[nn],Kn=fn.geometry,yn=fn.text?fn.text.toString():null;if(!yn){ct(nn);continue}const on=sn(yn,Kn),Yt=sn(yn,Kn,!0);if(on in at&&Yt in ze&&at[on]!==ze[Yt]){const ii=Nt(on,Yt,Kn),Zn=pt(on,Yt,We[ii].geometry);delete ze[on],delete at[Yt],at[sn(yn,We[Zn].geometry,!0)]=Zn,We[ii].geometry=null}else on in at?pt(on,Yt,Kn):Yt in ze?Nt(on,Yt,Kn):(ct(nn),ze[on]=Xe-1,at[Yt]=Xe-1)}return We.filter((nn=>nn.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((Be,ze)=>Be.sortKey-ze.sortKey))}update(l,A,y){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,A,this.layers,{imagePositions:y}),this.icon.programConfigurations.updatePaintArrays(l,A,this.layers,{imagePositions:y}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,A){const y=this.lineVertexArray.length;if(l.segment!==void 0){let _=l.dist(A[l.segment+1]),E=l.dist(A[l.segment]);const O={};for(let D=l.segment+1;D<A.length;D++)O[D]={x:A[D].x,y:A[D].y,tileUnitDistanceFromAnchor:_},D<A.length-1&&(_+=A[D+1].dist(A[D]));for(let D=l.segment||0;D>=0;D--)O[D]={x:A[D].x,y:A[D].y,tileUnitDistanceFromAnchor:E},D>0&&(E+=A[D-1].dist(A[D]));for(let D=0;D<A.length;D++){const F=O[D];this.lineVertexArray.emplaceBack(F.x,F.y,F.tileUnitDistanceFromAnchor)}}return{lineStartIndex:y,lineLength:this.lineVertexArray.length-y}}addSymbols(l,A,y,_,E,O,D,F,W,ee,ae,Ae){const fe=l.indexArray,be=l.layoutVertexArray,we=l.segments.prepareSegment(4*A.length,be,fe,this.canOverlap?O.sortKey:void 0),Be=this.glyphOffsetArray.length,ze=we.vertexLength,at=this.allowVerticalPlacement&&D===s.aA.vertical?Math.PI/2:0,We=O.text&&O.text.sections;for(let Xe=0;Xe<A.length;Xe++){const{tl:ct,tr:pt,bl:Nt,br:sn,tex:nn,pixelOffsetTL:fn,pixelOffsetBR:Kn,minFontScaleX:yn,minFontScaleY:on,glyphOffset:Yt,isSDF:ii,sectionIndex:Zn}=A[Xe],li=we.vertexLength,$n=Yt[1];r1(be,F.x,F.y,ct.x,$n+ct.y,nn.x,nn.y,y,ii,fn.x,fn.y,yn,on),r1(be,F.x,F.y,pt.x,$n+pt.y,nn.x+nn.w,nn.y,y,ii,Kn.x,fn.y,yn,on),r1(be,F.x,F.y,Nt.x,$n+Nt.y,nn.x,nn.y+nn.h,y,ii,fn.x,Kn.y,yn,on),r1(be,F.x,F.y,sn.x,$n+sn.y,nn.x+nn.w,nn.y+nn.h,y,ii,Kn.x,Kn.y,yn,on),_y(l.dynamicLayoutVertexArray,F,at),fe.emplaceBack(li,li+2,li+1),fe.emplaceBack(li+1,li+2,li+3),we.vertexLength+=4,we.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Yt[0]),Xe!==A.length-1&&Zn===A[Xe+1].sectionIndex||l.programConfigurations.populatePaintArrays(be.length,O,O.index,{imagePositions:{},canonical:Ae,formattedSection:We&&We[Zn]})}l.placedSymbolArray.emplaceBack(F.x,F.y,Be,this.glyphOffsetArray.length-Be,ze,W,ee,F.segment,y?y[0]:0,y?y[1]:0,_[0],_[1],D,0,!1,0,ae)}_addCollisionDebugVertex(l,A,y,_,E,O){return A.emplaceBack(0,0),l.emplaceBack(y.x,y.y,_,E,Math.round(O.x),Math.round(O.y))}addCollisionDebugVertices(l,A,y,_,E,O,D){const F=E.segments.prepareSegment(4,E.layoutVertexArray,E.indexArray),W=F.vertexLength,ee=E.layoutVertexArray,ae=E.collisionVertexArray,Ae=D.anchorX,fe=D.anchorY;this._addCollisionDebugVertex(ee,ae,O,Ae,fe,new c(l,A)),this._addCollisionDebugVertex(ee,ae,O,Ae,fe,new c(y,A)),this._addCollisionDebugVertex(ee,ae,O,Ae,fe,new c(y,_)),this._addCollisionDebugVertex(ee,ae,O,Ae,fe,new c(l,_)),F.vertexLength+=4;const be=E.indexArray;be.emplaceBack(W,W+1),be.emplaceBack(W+1,W+2),be.emplaceBack(W+2,W+3),be.emplaceBack(W+3,W),F.primitiveLength+=4}addDebugCollisionBoxes(l,A,y,_){for(let E=l;E<A;E++){const O=this.collisionBoxArray.get(E);this.addCollisionDebugVertices(O.x1,O.y1,O.x2,O.y2,_?this.textCollisionBox:this.iconCollisionBox,O.anchorPoint,y)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new pb(lt,lb.members,zt),this.iconCollisionBox=new pb(lt,lb.members,zt);for(let l=0;l<this.symbolInstances.length;l++){const A=this.symbolInstances.get(l);this.addDebugCollisionBoxes(A.textBoxStartIndex,A.textBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.iconBoxStartIndex,A.iconBoxEndIndex,A,!1),this.addDebugCollisionBoxes(A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex,A,!1)}}_deserializeCollisionBoxesForSymbol(l,A,y,_,E,O,D,F,W){const ee={};for(let ae=A;ae<y;ae++){const Ae=l.get(ae);ee.textBox={x1:Ae.x1,y1:Ae.y1,x2:Ae.x2,y2:Ae.y2,anchorPointX:Ae.anchorPointX,anchorPointY:Ae.anchorPointY},ee.textFeatureIndex=Ae.featureIndex;break}for(let ae=_;ae<E;ae++){const Ae=l.get(ae);ee.verticalTextBox={x1:Ae.x1,y1:Ae.y1,x2:Ae.x2,y2:Ae.y2,anchorPointX:Ae.anchorPointX,anchorPointY:Ae.anchorPointY},ee.verticalTextFeatureIndex=Ae.featureIndex;break}for(let ae=O;ae<D;ae++){const Ae=l.get(ae);ee.iconBox={x1:Ae.x1,y1:Ae.y1,x2:Ae.x2,y2:Ae.y2,anchorPointX:Ae.anchorPointX,anchorPointY:Ae.anchorPointY},ee.iconFeatureIndex=Ae.featureIndex;break}for(let ae=F;ae<W;ae++){const Ae=l.get(ae);ee.verticalIconBox={x1:Ae.x1,y1:Ae.y1,x2:Ae.x2,y2:Ae.y2,anchorPointX:Ae.anchorPointX,anchorPointY:Ae.anchorPointY},ee.verticalIconFeatureIndex=Ae.featureIndex;break}return ee}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let A=0;A<this.symbolInstances.length;A++){const y=this.symbolInstances.get(A);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,y.textBoxStartIndex,y.textBoxEndIndex,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y.iconBoxStartIndex,y.iconBoxEndIndex,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,A){const y=l.placedSymbolArray.get(A),_=y.vertexStartIndex+4*y.numGlyphs;for(let E=y.vertexStartIndex;E<_;E+=4)l.indexArray.emplaceBack(E,E+2,E+1),l.indexArray.emplaceBack(E+1,E+2,E+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const A=Math.sin(l),y=Math.cos(l),_=[],E=[],O=[];for(let D=0;D<this.symbolInstances.length;++D){O.push(D);const F=this.symbolInstances.get(D);_.push(0|Math.round(A*F.anchorX+y*F.anchorY)),E.push(F.featureIndex)}return O.sort(((D,F)=>_[D]-_[F]||E[F]-E[D])),O}addToSortKeyRanges(l,A){const y=this.sortKeyRanges[this.sortKeyRanges.length-1];y&&y.sortKey===A?y.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:A,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const A of this.symbolInstanceIndexes){const y=this.symbolInstances.get(A);this.featureSortOrder.push(y.featureIndex),[y.rightJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.leftJustifiedTextSymbolIndex].forEach(((_,E,O)=>{_>=0&&O.indexOf(_)===E&&this.addIndicesForPlacedSymbol(this.text,_)})),y.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,y.verticalPlacedTextSymbolIndex),y.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.placedIconSymbolIndex),y.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let mb,gb;Fn("SymbolBucket",Fl,{omit:["layers","collisionBoxArray","features","compareText"]}),Fl.MAX_GLYPHS=65535,Fl.addDynamicAttributes=_y;var tf={get paint(){return gb=gb||new Hs({"icon-opacity":new si(xt.paint_symbol["icon-opacity"]),"icon-color":new si(xt.paint_symbol["icon-color"]),"icon-halo-color":new si(xt.paint_symbol["icon-halo-color"]),"icon-halo-width":new si(xt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new si(xt.paint_symbol["icon-halo-blur"]),"icon-translate":new di(xt.paint_symbol["icon-translate"]),"icon-translate-anchor":new di(xt.paint_symbol["icon-translate-anchor"]),"text-opacity":new si(xt.paint_symbol["text-opacity"]),"text-color":new si(xt.paint_symbol["text-color"],{runtimeType:Ka,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new si(xt.paint_symbol["text-halo-color"]),"text-halo-width":new si(xt.paint_symbol["text-halo-width"]),"text-halo-blur":new si(xt.paint_symbol["text-halo-blur"]),"text-translate":new di(xt.paint_symbol["text-translate"]),"text-translate-anchor":new di(xt.paint_symbol["text-translate-anchor"])})},get layout(){return mb=mb||new Hs({"symbol-placement":new di(xt.layout_symbol["symbol-placement"]),"symbol-spacing":new di(xt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new di(xt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new si(xt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new di(xt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new di(xt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new di(xt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new di(xt.layout_symbol["icon-ignore-placement"]),"icon-optional":new di(xt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new di(xt.layout_symbol["icon-rotation-alignment"]),"icon-size":new si(xt.layout_symbol["icon-size"]),"icon-text-fit":new di(xt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new di(xt.layout_symbol["icon-text-fit-padding"]),"icon-image":new si(xt.layout_symbol["icon-image"]),"icon-rotate":new si(xt.layout_symbol["icon-rotate"]),"icon-padding":new si(xt.layout_symbol["icon-padding"]),"icon-keep-upright":new di(xt.layout_symbol["icon-keep-upright"]),"icon-offset":new si(xt.layout_symbol["icon-offset"]),"icon-anchor":new si(xt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new di(xt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new di(xt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new di(xt.layout_symbol["text-rotation-alignment"]),"text-field":new si(xt.layout_symbol["text-field"]),"text-font":new si(xt.layout_symbol["text-font"]),"text-size":new si(xt.layout_symbol["text-size"]),"text-max-width":new si(xt.layout_symbol["text-max-width"]),"text-line-height":new di(xt.layout_symbol["text-line-height"]),"text-letter-spacing":new si(xt.layout_symbol["text-letter-spacing"]),"text-justify":new si(xt.layout_symbol["text-justify"]),"text-radial-offset":new si(xt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new di(xt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new si(xt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new si(xt.layout_symbol["text-anchor"]),"text-max-angle":new di(xt.layout_symbol["text-max-angle"]),"text-writing-mode":new di(xt.layout_symbol["text-writing-mode"]),"text-rotate":new si(xt.layout_symbol["text-rotate"]),"text-padding":new di(xt.layout_symbol["text-padding"]),"text-keep-upright":new di(xt.layout_symbol["text-keep-upright"]),"text-transform":new si(xt.layout_symbol["text-transform"]),"text-offset":new si(xt.layout_symbol["text-offset"]),"text-allow-overlap":new di(xt.layout_symbol["text-allow-overlap"]),"text-overlap":new di(xt.layout_symbol["text-overlap"]),"text-ignore-placement":new di(xt.layout_symbol["text-ignore-placement"]),"text-optional":new di(xt.layout_symbol["text-optional"])})}};class gr{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:oo,this.defaultValue=l}evaluate(l){if(l.formattedSection){const A=this.defaultValue.property.overrides;if(A&&A.hasOverride(l.formattedSection))return A.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Fn("FormatSectionOverride",gr,{omit:["defaultValue"]});class T0 extends dl{constructor(l,A){super(l,tf,A)}recalculate(l,A){if(super.recalculate(l,A),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const y=this.layout.get("text-writing-mode");if(y){const _=[];for(const E of y)_.indexOf(E)<0&&_.push(E);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,A,y,_){const E=this.layout.get(l).evaluate(A,{},y,_),O=this._unevaluatedLayout._values[l];return O.isDataDriven()||wA(O.value)||!E?E:(function(D,F){return F.replace(/{([^{}]+)}/g,((W,ee)=>D&&ee in D?String(D[ee]):""))})(A.properties,E)}createBucket(l){return new Fl(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const l of tf.paint.overridableProperties){if(!T0.hasPaintOverride(this.layout,l))continue;const A=this.paint.get(l),y=new gr(A),_=new Nd(y,A.property.specification);let E=null;E=A.value.kind==="constant"||A.value.kind==="source"?new kl("source",_):new qh("composite",_,A.value.zoomStops),this.paint._values[l]=new el(A.property,E,A.parameters)}}_handleOverridablePaintPropertyUpdate(l,A,y){return!(!this.layout||A.isDataDriven()||y.isDataDriven())&&T0.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,A){const y=l.get("text-field"),_=tf.paint.properties[A];let E=!1;const O=D=>{for(const F of D)if(_.overrides&&_.overrides.hasOverride(F))return void(E=!0)};if(y.value.kind==="constant"&&y.value.value instanceof Jo)O(y.value.value.sections);else if(y.value.kind==="source"||y.value.kind==="composite"){const D=W=>{E||(W instanceof ne&&$i(W.value)===co?O(W.value.sections):W instanceof bA?O(W.sections):W.eachChild(D))},F=y.value;F._styleExpression&&D(F._styleExpression.expression)}return E}}let sc;var Ga={get paint(){return sc=sc||new Hs({"background-color":new di(xt.paint_background["background-color"]),"background-pattern":new ru(xt.paint_background["background-pattern"]),"background-opacity":new di(xt.paint_background["background-opacity"])})}};class o1 extends dl{constructor(l,A){super(l,Ga,A)}}class Hf extends dl{constructor(l,A){super(l,{},A),this.onAdd=y=>{this.implementation.onAdd&&this.implementation.onAdd(y,y.painter.context.gl)},this.onRemove=y=>{this.implementation.onRemove&&this.implementation.onRemove(y,y.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class h_{constructor(l){this._methodToThrottle=l,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const no={once:!0},s1=63710088e-1;class _h{constructor(l,A){if(isNaN(l)||isNaN(A))throw new Error(`Invalid LngLat object: (${l}, ${A})`);if(this.lng=+l,this.lat=+A,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new _h(Ut(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){const A=Math.PI/180,y=this.lat*A,_=l.lat*A,E=Math.sin(y)*Math.sin(_)+Math.cos(y)*Math.cos(_)*Math.cos((l.lng-this.lng)*A);return s1*Math.acos(Math.min(E,1))}static convert(l){if(l instanceof _h)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new _h(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new _h(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const My=2*Math.PI*s1;function a1(h){return My*Math.cos(h*Math.PI/180)}function wy(h){return(180+h)/360}function Kc(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function k0(h,l){return h/a1(l)}function l1(h){return 360*h-180}function vs(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function da(h,l){return h*a1(vs(l))}class D0{constructor(l,A,y=0){this.x=+l,this.y=+A,this.z=+y}static fromLngLat(l,A=0){const y=_h.convert(l);return new D0(wy(y.lng),Kc(y.lat),k0(A,y.lat))}toLngLat(){return new _h(l1(this.x),vs(this.y))}toAltitude(){return da(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/My*(l=vs(this.y),1/Math.cos(l*Math.PI/180));var l}}function yb(h,l,A){var y=2*Math.PI*6378137/256/Math.pow(2,A);return[h*y-2*Math.PI*6378137/2,l*y-2*Math.PI*6378137/2]}class Sy{constructor(l,A,y){if(!(function(_,E,O){return!(_<0||_>25||O<0||O>=Math.pow(2,_)||E<0||E>=Math.pow(2,_))})(l,A,y))throw new Error(`x=${A}, y=${y}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=A,this.y=y,this.key=Ta(0,l,l,A,y)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,A,y){const _=(function(O,D,F){var W=yb(256*O,256*(D=Math.pow(2,F)-D-1),F),ee=yb(256*(O+1),256*(D+1),F);return W[0]+","+W[1]+","+ee[0]+","+ee[1]})(this.x,this.y,this.z),E=(function(O,D,F){let W,ee="";for(let ae=O;ae>0;ae--)W=1<<ae-1,ee+=(D&W?1:0)+(F&W?2:0);return ee})(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(y==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,A>1?"@2x":"").replace(/{quadkey}/g,E).replace(/{bbox-epsg-3857}/g,_)}isChildOf(l){const A=this.z-l.z;return A>0&&l.x===this.x>>A&&l.y===this.y>>A}getTilePoint(l){const A=Math.pow(2,this.z);return new c((l.x*A-this.x)*mt,(l.y*A-this.y)*mt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class rs{constructor(l,A){this.wrap=l,this.canonical=A,this.key=Ta(l,A.z,A.z,A.x,A.y)}}class ac{constructor(l,A,y,_,E){if(this.terrainRttPosMatrix32f=null,l<y)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${y}`);this.overscaledZ=l,this.wrap=A,this.canonical=new Sy(y,+_,+E),this.key=Ta(A,l,y,_,E)}clone(){return new ac(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const A=this.canonical.z-l;return l>this.canonical.z?new ac(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ac(l,this.wrap,l,this.canonical.x>>A,this.canonical.y>>A)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(l,A){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const y=this.canonical.z-l;return l>this.canonical.z?Ta(this.wrap*+A,l,this.canonical.z,this.canonical.x,this.canonical.y):Ta(this.wrap*+A,l,l,this.canonical.x>>y,this.canonical.y>>y)}isChildOf(l){if(l.wrap!==this.wrap||this.overscaledZ-l.overscaledZ<=0)return!1;if(l.overscaledZ===0)return this.overscaledZ>0;const A=this.canonical.z-l.canonical.z;return!(A<0)&&l.canonical.x===this.canonical.x>>A&&l.canonical.y===this.canonical.y>>A}children(l){if(this.overscaledZ>=l)return[new ac(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const A=this.canonical.z+1,y=2*this.canonical.x,_=2*this.canonical.y;return[new ac(A,this.wrap,A,y,_),new ac(A,this.wrap,A,y+1,_),new ac(A,this.wrap,A,y,_+1),new ac(A,this.wrap,A,y+1,_+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new ac(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new ac(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new rs(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new D0(l.x-this.wrap,l.y))}}function Ta(h,l,A,y,_){(h*=2)<0&&(h=-1*h-1);const E=1<<A;return(E*E*h+E*_+y).toString(36)+A.toString(36)+l.toString(36)}function u1(h,l){return l?h.properties[l]:h.id}function vb(h,l){const A={id:h.id};if(l.removeAllProperties&&(delete h.removeProperties,delete h.addOrUpdateProperties,delete l.removeProperties),l.removeProperties)for(const y of l.removeProperties){const _=h.addOrUpdateProperties.findIndex((E=>E.key===y));_>-1&&h.addOrUpdateProperties.splice(_,1)}return(h.removeAllProperties||l.removeAllProperties)&&(A.removeAllProperties=!0),(h.removeProperties||l.removeProperties)&&(A.removeProperties=[...h.removeProperties||[],...l.removeProperties||[]]),(h.addOrUpdateProperties||l.addOrUpdateProperties)&&(A.addOrUpdateProperties=[...h.addOrUpdateProperties||[],...l.addOrUpdateProperties||[]]),(h.newGeometry||l.newGeometry)&&(A.newGeometry=l.newGeometry||h.newGeometry),A}function R0(h){var l,A;if(!h)return{};const y={};return y.removeAll=h.removeAll,y.remove=new Set(h.remove||[]),y.add=new Map((l=h.add)===null||l===void 0?void 0:l.map((_=>[_.id,_]))),y.update=new Map((A=h.update)===null||A===void 0?void 0:A.map((_=>[_.id,_]))),y}Fn("CanonicalTileID",Sy),Fn("OverscaledTileID",ac,{omit:["terrainRttPosMatrix32f"]});class P0{constructor(l){this._stringToNumber={},this._numberToString=[];for(let A=0;A<l.length;A++){const y=l[A];this._stringToNumber[y]=A,this._numberToString[A]=y}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class Ey{constructor(l,A,y,_,E){this.type="Feature",this._vectorTileFeature=l,this._x=y,this._y=_,this._z=A,this.properties=l.properties,this.id=E}projectPoint(l,A,y,_){return[360*(l.x+A)/_-180,360/Math.PI*Math.atan(Math.exp((1-2*(l.y+y)/_)*Math.PI))-90]}projectLine(l,A,y,_){return l.map((E=>this.projectPoint(E,A,y,_)))}get geometry(){if(this._geometry)return this._geometry;const l=this._vectorTileFeature,A=l.extent*Math.pow(2,this._z),y=l.extent*this._x,_=l.extent*this._y,E=l.loadGeometry();switch(l.type){case 1:{const O=[];for(const F of E)O.push(F[0]);const D=this.projectLine(O,y,_,A);this._geometry=O.length===1?{type:"Point",coordinates:D[0]}:{type:"MultiPoint",coordinates:D};break}case 2:{const O=E.map((D=>this.projectLine(D,y,_,A)));this._geometry=O.length===1?{type:"LineString",coordinates:O[0]}:{type:"MultiLineString",coordinates:O};break}case 3:{const O=$g(E),D=[];for(const F of O)D.push(F.map((W=>this.projectLine(W,y,_,A))));this._geometry=D.length===1?{type:"Polygon",coordinates:D[0]}:{type:"MultiPolygon",coordinates:D};break}default:throw new Error(`unknown feature type: ${l.type}`)}return this._geometry}set geometry(l){this._geometry=l}toJSON(){const l={geometry:this.geometry};for(const A in this)A!=="_geometry"&&A!=="_vectorTileFeature"&&A!=="_x"&&A!=="_y"&&A!=="_z"&&(l[A]=this[A]);return l}}class hd{_name;dataBuffer;nullabilityBuffer;_size;constructor(l,A,y){this._name=l,this.dataBuffer=A,typeof y=="number"?this._size=y:(this.nullabilityBuffer=y,this._size=y.size())}getValue(l){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(l)?null:this.getValueFromBuffer(l)}has(l){return this.nullabilityBuffer&&this.nullabilityBuffer.get(l)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class Zf extends hd{}class Iu extends Zf{getValueFromBuffer(l){return this.dataBuffer[l]}}class dd extends Zf{getValueFromBuffer(l){return this.dataBuffer[l]}}class By extends hd{delta;constructor(l,A,y,_){super(l,A,_),this.delta=y}}class bb extends By{constructor(l,A,y,_){super(l,Int32Array.of(A),y,_)}getValueFromBuffer(l){return this.dataBuffer[0]+l*this.delta}}class Oy extends hd{constructor(l,A,y){super(l,Int32Array.of(A),y)}getValueFromBuffer(l){return this.dataBuffer[0]}}class s3{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(l,A,y,_,E=4096){this._name=l,this._geometryVector=A,this._idVector=y,this._propertyVectors=_,this._extent=E}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(l){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((A=>[A.name,A])))),this.propertyVectorsMap.get(l)}*[Symbol.iterator](){const l=this.geometryVector[Symbol.iterator]();let A=0;for(;A<this.numFeatures;){let y;this.idVector&&(y=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(A)):this.idVector.getValue(A));const _=l?.next().value,E={};for(const O of this.propertyVectors){if(!O)continue;const D=O.name,F=O.getValue(A);F!==null&&(E[D]=F)}A++,yield{id:y,geometry:_,properties:E}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const l=[],A=this.geometryVector.getGeometries();for(let y=0;y<this.numFeatures;y++){let _;this.idVector&&(_=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(y)):this.idVector.getValue(y));const E={coordinates:A[y],type:this.geometryVector.geometryType(y)},O={};for(const D of this.propertyVectors){if(!D)continue;const F=D.name,W=D.getValue(y);W!==null&&(O[F]=W)}l.push({id:_,geometry:E,properties:O})}return l}containsMaxSaveIntegerValues(l){return l instanceof Iu||l instanceof Oy&&l instanceof bb||l instanceof dd}}class d_{value;constructor(l){this.value=l}get(){return this.value}set(l){this.value=l}increment(){return this.value++}add(l){this.value+=l}}var _r,Au,Di,uA,ml,hu,il,cr,Cb,Tu;function Js(h,l,A){const y=new Int32Array(A);let _=0,E=l.get();for(let O=0;O<y.length;O++){let D=h[E++],F=127&D;D<128||(D=h[E++],F|=(127&D)<<7,D<128||(D=h[E++],F|=(127&D)<<14,D<128||(D=h[E++],F|=(127&D)<<21,D<128||(D=h[E++],F|=(15&D)<<28)))),y[_++]=F}return l.set(E),y}function Iy(h,l,A){const y=new BigInt64Array(A);for(let _=0;_<y.length;_++)y[_]=f_(h,l);return y}function FA(h,l){let A,y;return y=h[l.get()],l.increment(),A=127&y,y<128?A:(y=h[l.get()],l.increment(),A|=(127&y)<<7,y<128?A:(y=h[l.get()],l.increment(),A|=(127&y)<<14,y<128?A:(y=h[l.get()],l.increment(),A|=(127&y)<<21,y<128?A:(y=h[l.get()],A|=(15&y)<<28,(function(_,E,O){let D,F;if(F=E[O.get()],O.increment(),D=(112&F)>>4,F<128||(F=E[O.get()],O.increment(),D|=(127&F)<<3,F<128)||(F=E[O.get()],O.increment(),D|=(127&F)<<10,F<128)||(F=E[O.get()],O.increment(),D|=(127&F)<<17,F<128)||(F=E[O.get()],O.increment(),D|=(127&F)<<24,F<128)||(F=E[O.get()],O.increment(),D|=(1&F)<<31,F<128))return 4294967296*D+(_>>>0);throw new Error("Expected varint not more than 10 bytes")})(A,h,l)))))}function Ty(h,l,A,y){throw new Error("FastPFor is not implemented yet.")}function Xf(h){return h>>>1^-(1&h)}function om(h){return h>>1n^-(1n&h)}function f_(h,l){let A=0n,y=0,_=l.get();for(;_<h.length;){const E=h[_++];if(A|=BigInt(127&E)<<BigInt(y),!(128&E))break;if(y+=7,y>=64)throw new Error("Varint too long")}return l.set(_),A}function L0(h,l,A){const y=new Int32Array(A);let _=0;for(let E=0;E<l;E++){const O=h[E];y.fill(h[E+l],_,_+O),_+=O}return y}function cA(h,l,A){const y=new BigInt64Array(A);let _=0;for(let E=0;E<l;E++){const O=Number(h[E]);y.fill(h[E+l],_,_+O),_+=O}return y}function _b(h,l,A){const y=new Float64Array(A);let _=0;for(let E=0;E<l;E++){const O=h[E];y.fill(h[E+l],_,_+O),_+=O}return y}function U0(h){const l=h.length/4*4;let A=1;if(l>=4)for(let y=h[0];A<l-4;A+=4)y=h[A]+=y,y=h[A+1]+=y,y=h[A+2]+=y,y=h[A+3]+=y;for(;A!=h.length;)h[A]+=h[A-1],++A}function fd(h){h[0]=h[0]>>>1^-(1&h[0]),h[1]=h[1]>>>1^-(1&h[1]);const l=h.length/4*4;let A=2;if(l>=4)for(;A<l-4;A+=4){const y=h[A],_=h[A+1],E=h[A+2],O=h[A+3];h[A]=(y>>>1^-(1&y))+h[A-2],h[A+1]=(_>>>1^-(1&_))+h[A-1],h[A+2]=(E>>>1^-(1&E))+h[A],h[A+3]=(O>>>1^-(1&O))+h[A+1]}for(;A!=h.length;A+=2)h[A]=(h[A]>>>1^-(1&h[A]))+h[A-2],h[A+1]=(h[A+1]>>>1^-(1&h[A+1]))+h[A-1]}(function(h){h.NONE="NONE",h.DELTA="DELTA",h.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",h.RLE="RLE",h.MORTON="MORTON",h.PDE="PDE"})(_r||(_r={})),(function(h){h.NONE="NONE",h.FAST_PFOR="FAST_PFOR",h.VARINT="VARINT",h.ALP="ALP"})(Au||(Au={})),(function(h){h.PRESENT="PRESENT",h.DATA="DATA",h.OFFSET="OFFSET",h.LENGTH="LENGTH"})(Di||(Di={}));class xb{_dictionaryType;_offsetType;_lengthType;constructor(l,A,y){this._dictionaryType=l,this._offsetType=A,this._lengthType=y}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function ku(h,l){const A=(function(y,_){const E=y[_.get()],O=Object.values(Di)[E>>4];let D=null;switch(O){case Di.DATA:D=new xb(Object.values(uA)[15&E]);break;case Di.OFFSET:D=new xb(null,Object.values(ml)[15&E]);break;case Di.LENGTH:D=new xb(null,null,Object.values(hu)[15&E])}_.increment();const F=y[_.get()],W=Object.values(_r)[F>>5],ee=Object.values(_r)[F>>2&7],ae=Object.values(Au)[3&F];_.increment();const Ae=Js(y,_,2),fe=Ae[0];return{physicalStreamType:O,logicalStreamType:D,logicalLevelTechnique1:W,logicalLevelTechnique2:ee,physicalLevelTechnique:ae,numValues:fe,byteLength:Ae[1],decompressedCount:fe}})(h,l);return A.logicalLevelTechnique1===_r.MORTON?(function(y,_,E){const O=Js(_,E,2);return{physicalStreamType:y.physicalStreamType,logicalStreamType:y.logicalStreamType,logicalLevelTechnique1:y.logicalLevelTechnique1,logicalLevelTechnique2:y.logicalLevelTechnique2,physicalLevelTechnique:y.physicalLevelTechnique,numValues:y.numValues,byteLength:y.byteLength,decompressedCount:y.decompressedCount,numBits:O[0],coordinateShift:O[1]}})(A,h,l):_r.RLE!==A.logicalLevelTechnique1&&_r.RLE!==A.logicalLevelTechnique2||Au.NONE===A.physicalLevelTechnique?A:(function(y,_,E){const O=Js(_,E,2);return{physicalStreamType:y.physicalStreamType,logicalStreamType:y.logicalStreamType,logicalLevelTechnique1:y.logicalLevelTechnique1,logicalLevelTechnique2:y.logicalLevelTechnique2,physicalLevelTechnique:y.physicalLevelTechnique,numValues:y.numValues,byteLength:y.byteLength,decompressedCount:O[1],runs:O[0],numRleValues:O[1]}})(A,h,l)}(function(h){h.NONE="NONE",h.SINGLE="SINGLE",h.SHARED="SHARED",h.VERTEX="VERTEX",h.MORTON="MORTON",h.FSST="FSST"})(uA||(uA={})),(function(h){h.VERTEX="VERTEX",h.INDEX="INDEX",h.STRING="STRING",h.KEY="KEY"})(ml||(ml={})),(function(h){h.VAR_BINARY="VAR_BINARY",h.GEOMETRIES="GEOMETRIES",h.PARTS="PARTS",h.RINGS="RINGS",h.TRIANGLES="TRIANGLES",h.SYMBOL="SYMBOL",h.DICTIONARY="DICTIONARY"})(hu||(hu={})),(function(h){h[h.FLAT=0]="FLAT",h[h.CONST=1]="CONST",h[h.SEQUENCE=2]="SEQUENCE",h[h.DICTIONARY=3]="DICTIONARY",h[h.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(il||(il={}));class zl{values;_size;constructor(l,A){this.values=l,this._size=A}get(l){const A=Math.floor(l/8);return(this.values[A]>>l%8&1)==1}set(l,A){const y=Math.floor(l/8);this.values[y]=this.values[y]|(A?1:0)<<l%8}getInt(l){const A=Math.floor(l/8);return this.values[A]>>l%8&1}size(){return this._size}getBuffer(){return this.values}}function du(h,l,A,y,_){return(function(E,O,D){switch(O.logicalLevelTechnique1){case _r.DELTA:return O.logicalLevelTechnique2===_r.RLE?(function(F,W,ee){const ae=new Int32Array(ee);let Ae=0,fe=0;for(let be=0;be<W;be++){const we=F[be],Be=Xf(F[be+W]);for(let ze=0;ze<we;ze++)fe+=Be,ae[Ae++]=fe}return ae})(E,O.runs,O.numRleValues):((function(F){F[0]=F[0]>>>1^-(1&F[0]);const W=F.length/4*4;let ee=1;if(W>=4)for(;ee<W-4;ee+=4){const ae=F[ee],Ae=F[ee+1],fe=F[ee+2],be=F[ee+3];F[ee]=(ae>>>1^-(1&ae))+F[ee-1],F[ee+1]=(Ae>>>1^-(1&Ae))+F[ee],F[ee+2]=(fe>>>1^-(1&fe))+F[ee+1],F[ee+3]=(be>>>1^-(1&be))+F[ee+2]}for(;ee!=F.length;++ee)F[ee]=(F[ee]>>>1^-(1&F[ee]))+F[ee-1]})(E),E);case _r.RLE:return(function(F,W,ee){return ee?(function(ae,Ae,fe){const be=new Int32Array(fe);let we=0;for(let Be=0;Be<Ae;Be++){const ze=ae[Be];let at=ae[Be+Ae];at=at>>>1^-(1&at),be.fill(at,we,we+ze),we+=ze}return be})(F,W.runs,W.numRleValues):L0(F,W.runs,W.numRleValues)})(E,O,D);case _r.MORTON:return U0(E),E;case _r.COMPONENTWISE_DELTA:return fd(E),E;case _r.NONE:return D&&(function(F){for(let W=0;W<F.length;W++){const ee=F[W];F[W]=ee>>>1^-(1&ee)}})(E),E;default:throw new Error(`The specified Logical level technique is not supported: ${O.logicalLevelTechnique1}`)}})(ky(h,l,A),A,y)}function pd(h,l,A){return(function(y,_){if(_.logicalLevelTechnique1===_r.DELTA&&_.logicalLevelTechnique2===_r.NONE)return(function(O){const D=new Int32Array(O.length+1);D[0]=0,D[1]=Xf(O[0]);let F=D[1],W=2;for(;W!=D.length;++W){const ee=O[W-1];F+=ee>>>1^-(1&ee),D[W]=D[W-1]+F}return D})(y);if(_.logicalLevelTechnique1===_r.RLE&&_.logicalLevelTechnique2===_r.NONE)return(function(O,D,F){const W=new Int32Array(F+1);W[0]=0;let ee=1,ae=W[0];for(let Ae=0;Ae<D;Ae++){const fe=O[Ae],be=O[Ae+D];for(let we=ee;we<ee+fe;we++)W[we]=be+ae,ae=W[we];ee+=fe}return W})(y,_.runs,_.numRleValues);if(_.logicalLevelTechnique1===_r.NONE&&_.logicalLevelTechnique2===_r.NONE){(function(O){let D=0;for(let F=0;F<O.length;F++)O[F]+=D,D=O[F]})(y);const E=new Int32Array(_.numValues+1);return E[0]=0,E.set(y,1),E}if(_.logicalLevelTechnique1===_r.DELTA&&_.logicalLevelTechnique2===_r.RLE){const E=(function(O,D,F){const W=new Int32Array(F+1);W[0]=0;let ee=1,ae=W[0];for(let Ae=0;Ae<D;Ae++){const fe=O[Ae];let be=O[Ae+D];be=be>>>1^-(1&be);for(let we=ee;we<ee+fe;we++)W[we]=be+ae,ae=W[we];ee+=fe}return W})(y,_.runs,_.numRleValues);return U0(E),E}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(ky(h,l,A),A)}function ky(h,l,A){const y=A.physicalLevelTechnique;if(y===Au.FAST_PFOR)return Ty();if(y===Au.VARINT)return Js(h,l,A.numValues);if(y===Au.NONE){const _=l.get();l.add(A.byteLength);const E=h.subarray(_,l.get());return new Int32Array(E)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function Mb(h,l,A,y){const _=ky(h,l,A);if(_.length===1){const E=_[0];return y?Xf(E):E}return y?(function(E){return Xf(E[1])})(_):(function(E){return E[1]})(_)}function p_(h,l,A){return(function(y){if(y.length==2){const _=Xf(y[1]);return[_,_]}return[Xf(y[2]),Xf(y[3])]})(ky(h,l,A))}function gl(h,l,A){return(function(y){if(y.length==2){const _=om(y[1]);return[_,_]}return[om(y[2]),om(y[3])]})(Iy(h,l,A.numValues))}function lc(h,l,A,y){return(function(_,E,O){switch(E.logicalLevelTechnique1){case _r.DELTA:return E.logicalLevelTechnique2===_r.RLE?(function(D,F,W){const ee=new BigInt64Array(W);let ae=0,Ae=0n;for(let fe=0;fe<F;fe++){const be=Number(D[fe]),we=om(D[fe+F]);for(let Be=0;Be<be;Be++)Ae+=we,ee[ae++]=Ae}return ee})(_,E.runs,E.numRleValues):((function(D){D[0]=D[0]>>1n^-(1n&D[0]);const F=D.length/4*4;let W=1;if(F>=4)for(;W<F-4;W+=4){const ee=D[W],ae=D[W+1],Ae=D[W+2],fe=D[W+3];D[W]=(ee>>1n^-(1n&ee))+D[W-1],D[W+1]=(ae>>1n^-(1n&ae))+D[W],D[W+2]=(Ae>>1n^-(1n&Ae))+D[W+1],D[W+3]=(fe>>1n^-(1n&fe))+D[W+2]}for(;W!=D.length;++W)D[W]=(D[W]>>1n^-(1n&D[W]))+D[W-1]})(_),_);case _r.RLE:return(function(D,F,W){return W?(function(ee,ae,Ae){const fe=new BigInt64Array(Ae);let be=0;for(let we=0;we<ae;we++){const Be=Number(ee[we]);let ze=ee[we+ae];ze=ze>>1n^-(1n&ze),fe.fill(ze,be,be+Be),be+=Be}return fe})(D,F.runs,F.numRleValues):cA(D,F.runs,F.numRleValues)})(_,E,O);case _r.NONE:return O&&(function(D){for(let F=0;F<D.length;F++){const W=D[F];D[F]=W>>1n^-(1n&W)}})(_),_;default:throw new Error(`The specified Logical level technique is not supported: ${E.logicalLevelTechnique1}`)}})(Iy(h,l,A.numValues),A,y)}function m_(h,l,A,y){const _=Iy(h,l,A.numValues);if(_.length===1){const E=_[0];return y?om(E):E}return y?(function(E){return om(E[1])})(_):(function(E){return E[1]})(_)}function Dy(h,l,A,y,_){return(function(E,O,D,F){switch(O.logicalLevelTechnique1){case _r.DELTA:return O.logicalLevelTechnique2===_r.RLE&&(E=L0(E,O.runs,O.numRleValues)),(function(W,ee){const ae=new Int32Array(W.size());let Ae=0;W.get(0)?(ae[0]=W.get(0)?ee[0]>>>1^-(1&ee[0]):0,Ae=1):ae[0]=0;let fe=1;for(;fe!=ae.length;++fe)ae[fe]=W.get(fe)?ae[fe-1]+(ee[Ae]>>>1^-(1&ee[Ae++])):ae[fe-1];return ae})(F,E);case _r.RLE:return(function(W,ee,ae,Ae){const fe=ee;return ae?(function(be,we,Be){const ze=new Int32Array(be.size());let at=0;for(let We=0;We<Be;We++){const Xe=we[We];let ct=we[We+Be];ct=ct>>>1^-(1&ct);for(let pt=at;pt<at+Xe;pt++)be.get(pt)?ze[pt]=ct:(ze[pt]=0,at++);at+=Xe}return ze})(Ae,W,fe.runs):(function(be,we,Be){const ze=new Int32Array(be.size());let at=0;for(let We=0;We<Be;We++){const Xe=we[We],ct=we[We+Be];for(let pt=at;pt<at+Xe;pt++)be.get(pt)?ze[pt]=ct:(ze[pt]=0,at++);at+=Xe}return ze})(Ae,W,fe.runs)})(E,O,D,F);case _r.MORTON:return U0(E),E;case _r.COMPONENTWISE_DELTA:return fd(E),E;case _r.NONE:return E=D?(function(W,ee){const ae=new Int32Array(W.size());let Ae=0,fe=0;for(;fe!=ae.length;++fe)if(W.get(fe)){const be=ee[Ae++];ae[fe]=be>>>1^-(1&be)}else ae[fe]=0;return ae})(F,E):(function(W,ee){const ae=new Int32Array(W.size());let Ae=0,fe=0;for(;fe!=ae.length;++fe)ae[fe]=W.get(fe)?ee[Ae++]:0;return ae})(F,E),E;default:throw new Error("The specified Logical level technique is not supported")}})(A.physicalLevelTechnique===Au.FAST_PFOR?Ty():Js(h,l,A.numValues),A,y,_)}function nf(h,l,A,y){const _=h.logicalLevelTechnique1;if(_===_r.RLE)return h.runs===1?il.CONST:il.FLAT;const E=l instanceof zl?l.size():l;if(_===_r.DELTA&&h.logicalLevelTechnique2===_r.RLE){const O=h.runs,D=2;if(h.numRleValues!==E)return il.FLAT;if(O===1)return il.SEQUENCE;if(O===2){const F=y.get();let W;if(h.physicalLevelTechnique===Au.VARINT)W=Js(A,y,4);else{const ee=y.get();W=new Int32Array(A.buffer,A.byteOffset+ee,4)}if(y.set(F),W[2]===D&&W[3]===D)return il.SEQUENCE}}return h.numValues===1?il.CONST:il.FLAT}class sm extends Zf{getValueFromBuffer(l){return this.dataBuffer[l]}}class wb extends By{constructor(l,A,y,_){super(l,BigInt64Array.of(A),y,_)}getValueFromBuffer(l){return this.dataBuffer[0]+BigInt(l)*this.delta}}class K0{_geometryOffsets;_partOffsets;_ringOffsets;constructor(l,A,y){this._geometryOffsets=l,this._partOffsets=A,this._ringOffsets=y}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function Jf(h,l,A){return{x:am(h,l)-A,y:am(h>>1,l)-A}}function am(h,l){let A=0;for(let y=0;y<l;y++)A|=(h&1<<2*y)>>y;return A}(function(h){h[h.POINT=0]="POINT",h[h.LINESTRING=1]="LINESTRING",h[h.POLYGON=2]="POLYGON",h[h.MULTIPOINT=3]="MULTIPOINT",h[h.MULTILINESTRING=4]="MULTILINESTRING",h[h.MULTIPOLYGON=5]="MULTIPOLYGON"})(cr||(cr={})),(function(h){h[h.POINT=0]="POINT",h[h.LINESTRING=1]="LINESTRING",h[h.POLYGON=2]="POLYGON"})(Cb||(Cb={})),(function(h){h[h.MORTON=0]="MORTON",h[h.VEC_2=1]="VEC_2",h[h.VEC_3=2]="VEC_3"})(Tu||(Tu={}));class g_{createPoint(l){return[[l]]}createMultiPoint(l){return l.map((A=>[A]))}createLineString(l){return[l]}createMultiLineString(l){return l}createPolygon(l,A){return[l].concat(A)}createMultiPolygon(l){return l.flat()}}function c1(h){const l=new Array(h.numGeometries);let A=1,y=1,_=1,E=0;const O=new g_;let D=0,F=0;const W=h.mortonSettings,ee=h.topologyVector,ae=ee.geometryOffsets,Ae=ee.partOffsets,fe=ee.ringOffsets,be=h.vertexOffsets,we=h.containsPolygonGeometry(),Be=h.vertexBuffer;for(let ze=0;ze<h.numGeometries;ze++){const at=h.geometryType(ze);if(at===cr.POINT){if(be&&be.length!==0)if(h.vertexBufferType===Tu.VEC_2){const We=2*be[F++],Xe=new c(Be[We],Be[We+1]);l[E++]=O.createPoint(Xe)}else{const We=Jf(Be[be[F++]],W.numBits,W.coordinateShift),Xe=new c(We.x,We.y);l[E++]=O.createPoint(Xe)}else{const We=new c(Be[D++],Be[D++]);l[E++]=O.createPoint(We)}ae&&_++,Ae&&A++,fe&&y++}else if(at===cr.MULTIPOINT){const We=ae[_]-ae[_-1];_++;const Xe=new Array(We);if(be&&be.length!==0){for(let ct=0;ct<We;ct++){const pt=2*be[F++];Xe[ct]=new c(Be[pt],Be[pt+1])}l[E++]=O.createMultiPoint(Xe)}else{for(let ct=0;ct<We;ct++){const pt=Be[D++],Nt=Be[D++];Xe[ct]=new c(pt,Nt)}l[E++]=O.createMultiPoint(Xe)}}else if(at===cr.LINESTRING){let We,Xe=0;we?(Xe=fe[y]-fe[y-1],y++):Xe=Ae[A]-Ae[A-1],A++,be&&be.length!==0?(We=h.vertexBufferType===Tu.VEC_2?Py(Be,be,F,Xe,!1):Sb(Be,be,F,Xe,!1,W),F+=Xe):(We=Ry(Be,D,Xe,!1),D+=2*Xe),l[E++]=O.createLineString(We),ae&&_++}else if(at===cr.POLYGON){const We=Ae[A]-Ae[A-1];A++;const Xe=new Array(We-1);let ct=fe[y]-fe[y-1];if(y++,be&&be.length!==0){const pt=h.vertexBufferType===Tu.VEC_2?lm(Be,be,F,ct):ep(Be,be,F,ct,0,W);F+=ct;for(let Nt=0;Nt<Xe.length;Nt++)ct=fe[y]-fe[y-1],y++,Xe[Nt]=h.vertexBufferType===Tu.VEC_2?lm(Be,be,F,ct):ep(Be,be,F,ct,0,W),F+=ct;l[E++]=O.createPolygon(pt,Xe)}else{const pt=F0(Be,D,ct);D+=2*ct;for(let Nt=0;Nt<Xe.length;Nt++)ct=fe[y]-fe[y-1],y++,Xe[Nt]=F0(Be,D,ct),D+=2*ct;l[E++]=O.createPolygon(pt,Xe)}ae&&_++}else if(at===cr.MULTILINESTRING){const We=ae[_]-ae[_-1];_++;const Xe=new Array(We);if(be&&be.length!==0){for(let ct=0;ct<We;ct++){let pt=0;we?(pt=fe[y]-fe[y-1],y++):pt=Ae[A]-Ae[A-1],A++;const Nt=h.vertexBufferType===Tu.VEC_2?Py(Be,be,F,pt,!1):Sb(Be,be,F,pt,!1,W);Xe[ct]=Nt,F+=pt}l[E++]=O.createMultiLineString(Xe)}else{for(let ct=0;ct<We;ct++){let pt=0;we?(pt=fe[y]-fe[y-1],y++):pt=Ae[A]-Ae[A-1],A++,Xe[ct]=Ry(Be,D,pt,!1),D+=2*pt}l[E++]=O.createMultiLineString(Xe)}}else{if(at!==cr.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const We=ae[_]-ae[_-1];_++;const Xe=new Array(We);let ct=0;if(be&&be.length!==0){for(let pt=0;pt<We;pt++){const Nt=Ae[A]-Ae[A-1];A++;const sn=new Array(Nt-1);ct=fe[y]-fe[y-1],y++;const nn=h.vertexBufferType===Tu.VEC_2?lm(Be,be,F,ct):ep(Be,be,F,ct,0,W);F+=ct;for(let fn=0;fn<sn.length;fn++)ct=fe[y]-fe[y-1],y++,sn[fn]=h.vertexBufferType===Tu.VEC_2?lm(Be,be,F,ct):ep(Be,be,F,ct,0,W),F+=ct;Xe[pt]=O.createPolygon(nn,sn)}l[E++]=O.createMultiPolygon(Xe)}else{for(let pt=0;pt<We;pt++){const Nt=Ae[A]-Ae[A-1];A++;const sn=new Array(Nt-1);ct=fe[y]-fe[y-1],y++;const nn=F0(Be,D,ct);D+=2*ct;for(let fn=0;fn<sn.length;fn++){const Kn=fe[y]-fe[y-1];y++,sn[fn]=F0(Be,D,Kn),D+=2*Kn}Xe[pt]=O.createPolygon(nn,sn)}l[E++]=O.createMultiPolygon(Xe)}}}}return l}function F0(h,l,A){return Ry(h,l,A,!0)}function lm(h,l,A,y){return Py(h,l,A,y,!0)}function ep(h,l,A,y,_,E){return Sb(h,l,A,y,!0,E)}function Ry(h,l,A,y){const _=new Array(y?A+1:A);for(let E=0;E<2*A;E+=2)_[E/2]=new c(h[l+E],h[l+E+1]);return y&&(_[_.length-1]=_[0]),_}function Py(h,l,A,y,_){const E=new Array(_?y+1:y);for(let O=0;O<2*y;O+=2){const D=2*l[A+O/2];E[O/2]=new c(h[D],h[D+1])}return _&&(E[E.length-1]=E[0]),E}function Sb(h,l,A,y,_,E){const O=new Array(_?y+1:y);for(let D=0;D<y;D++){const F=Jf(h[l[A+D]],E.numBits,E.coordinateShift);O[D]=new c(F.x,F.y)}return _&&(O[O.length-1]=O[0]),O}class Eb{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(l,A,y,_,E){this._vertexBufferType=l,this._topologyVector=A,this._vertexOffsets=y,this._vertexBuffer=_,this._mortonSettings=E}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const l=c1(this);let A=0;for(;A<this.numGeometries;)yield{coordinates:l[A],type:this.geometryType(A)},A++}getSimpleEncodedVertex(l){const A=this.vertexOffsets?2*this.vertexOffsets[l]:2*l;return[this.vertexBuffer[A],this.vertexBuffer[A+1]]}getVertex(l){if(this.vertexOffsets&&this.mortonSettings){const y=Jf(this.vertexBuffer[this.vertexOffsets[l]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[y.x,y.y]}const A=this.vertexOffsets?2*this.vertexOffsets[l]:2*l;return[this.vertexBuffer[A],this.vertexBuffer[A+1]]}getGeometries(){return c1(this)}get mortonSettings(){return this._mortonSettings}}class um extends Eb{_numGeometries;_geometryType;constructor(l,A,y,_,E,O,D){super(y,_,E,O,D),this._numGeometries=l,this._geometryType=A}geometryType(l){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===cr.POLYGON||this._geometryType===cr.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class Ly extends Eb{_geometryTypes;constructor(l,A,y,_,E,O){super(l,y,_,E,O),this._geometryTypes=A}geometryType(l){return this._geometryTypes[l]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let l=0;l<this.numGeometries;l++)if(this.geometryType(l)===cr.POLYGON||this.geometryType(l)===cr.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class y_{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(l,A,y,_){this._triangleOffsets=l,this._indexBuffer=A,this._vertexBuffer=y,this._topologyVector=_}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const l=new Array(this.numGeometries),A=this._topologyVector,y=A.partOffsets,_=A.ringOffsets,E=A.geometryOffsets;let O=0,D=1,F=1,W=1;for(let ee=0;ee<this.numGeometries;ee++)switch(this.geometryType(ee)){case cr.POLYGON:{const ae=y[D]-y[D-1];D++;const Ae=[];for(let fe=0;fe<ae;fe++){const be=_[F]-_[F-1];F++;const we=[];for(let Be=0;Be<be;Be++){const ze=this._vertexBuffer[O++],at=this._vertexBuffer[O++];we.push(new c(ze,at))}we.length>0&&we.push(we[0]),Ae.push(we)}l[ee]=Ae,E&&W++}break;case cr.MULTIPOLYGON:{const ae=E[W]-E[W-1];W++;const Ae=[];for(let fe=0;fe<ae;fe++){const be=y[D]-y[D-1];D++;for(let we=0;we<be;we++){const Be=_[F]-_[F-1];F++;const ze=[];for(let at=0;at<Be;at++){const We=this._vertexBuffer[O++],Xe=this._vertexBuffer[O++];ze.push(new c(We,Xe))}ze.length>0&&ze.push(ze[0]),Ae.push(ze)}}l[ee]=Ae}}return l}[Symbol.iterator](){return null}}function A1(h,l,A,y,_,E){return new Uy(h,l,A,y,_,E)}class Uy extends y_{_numGeometries;_geometryType;constructor(l,A,y,_,E,O){super(y,_,E,O),this._numGeometries=l,this._geometryType=A}geometryType(l){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function h1(h,l,A,y,_){return new v_(h,l,A,y,_)}class v_ extends y_{_geometryTypes;constructor(l,A,y,_,E){super(A,y,_,E),this._geometryTypes=l}geometryType(l){return this._geometryTypes[l]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function z0(h,l,A,y,_){const E=ku(h,A);let O=null,D=null,F=null,W=null,ee=null,ae=null,Ae=null,fe=null;if(nf(E,y,h,A)===il.CONST){const we=Mb(h,A,E,!1);for(let Be=0;Be<l-1;Be++){const ze=ku(h,A);switch(ze.physicalStreamType){case Di.LENGTH:switch(ze.logicalStreamType.lengthType){case hu.GEOMETRIES:O=pd(h,A,ze);break;case hu.PARTS:D=pd(h,A,ze);break;case hu.RINGS:F=pd(h,A,ze);break;case hu.TRIANGLES:Ae=pd(h,A,ze)}break;case Di.OFFSET:switch(ze.logicalStreamType.offsetType){case ml.VERTEX:W=du(h,A,ze,!1);break;case ml.INDEX:fe=du(h,A,ze,!1)}break;case Di.DATA:uA.VERTEX===ze.logicalStreamType.dictionaryType?ee=du(h,A,ze,!0):(ae={numBits:ze.numBits,coordinateShift:ze.coordinateShift},ee=du(h,A,ze,!1))}}return fe!==null?O!=null||D!=null?A1(y,we,Ae,fe,ee,new K0(O,D,F)):A1(y,we,Ae,fe,ee):ae===null?(function(Be,ze,at,We,Xe){return new um(Be,ze,Tu.VEC_2,at,We,Xe)})(y,we,new K0(O,D,F),W,ee):(function(Be,ze,at,We,Xe,ct){return new um(Be,ze,Tu.MORTON,at,We,Xe,ct)})(y,we,new K0(O,D,F),W,ee,ae)}const be=du(h,A,E,!1);for(let we=0;we<l-1;we++){const Be=ku(h,A);switch(Be.physicalStreamType){case Di.LENGTH:switch(Be.logicalStreamType.lengthType){case hu.GEOMETRIES:O=du(h,A,Be,!1);break;case hu.PARTS:D=du(h,A,Be,!1);break;case hu.RINGS:F=du(h,A,Be,!1);break;case hu.TRIANGLES:Ae=pd(h,A,Be)}break;case Di.OFFSET:switch(Be.logicalStreamType.offsetType){case ml.VERTEX:W=du(h,A,Be,!1);break;case ml.INDEX:fe=du(h,A,Be,!1)}break;case Di.DATA:uA.VERTEX===Be.logicalStreamType.dictionaryType?ee=du(h,A,Be,!0):(ae={numBits:Be.numBits,coordinateShift:Be.coordinateShift},ee=du(h,A,Be,!1))}}return fe!==null&&D===null?h1(be,Ae,fe,ee):(O!==null?(O=Bb(be,O,2),D!==null&&F!==null?(D=Ob(be,O,D,!1),F=(function(we,Be,ze,at){const We=new Int32Array(ze[ze.length-1]+1);let Xe=0;We[0]=Xe;let ct=1,pt=1,Nt=0;for(let sn=0;sn<we.length;sn++){const nn=we[sn],fn=Be[sn+1]-Be[sn];if(nn!==0&&nn!==3)for(let Kn=0;Kn<fn;Kn++){const yn=ze[ct]-ze[ct-1];ct++;for(let on=0;on<yn;on++)Xe=We[pt++]=Xe+at[Nt++]}else for(let Kn=0;Kn<fn;Kn++)We[pt++]=++Xe,ct++}return We})(be,O,D,F)):D!==null&&(D=(function(we,Be,ze){const at=new Int32Array(Be[Be.length-1]+1);let We=0;at[0]=We;let Xe=1,ct=0;for(let pt=0;pt<we.length;pt++){const Nt=we[pt],sn=Be[pt+1]-Be[pt];if(Nt===4||Nt===1)for(let nn=0;nn<sn;nn++)We=at[Xe++]=We+ze[ct++];else for(let nn=0;nn<sn;nn++)at[Xe++]=++We}return at})(be,O,D))):D!==null&&F!==null?(D=Bb(be,D,1),F=Ob(be,D,F,!0)):D!==null&&(D=Bb(be,D,0)),fe!==null?h1(be,Ae,fe,ee,new K0(O,D,F)):ae===null?(function(we,Be,ze,at){return new Ly(Tu.VEC_2,we,Be,ze,at)})(be,new K0(O,D,F),W,ee):(function(we,Be,ze,at,We){return new Ly(Tu.MORTON,we,Be,ze,at,We)})(be,new K0(O,D,F),W,ee,ae))}function Bb(h,l,A){const y=new Int32Array(h.length+1);let _=0;y[0]=_;let E=0;for(let O=0;O<h.length;O++)_=y[O+1]=_+(h[O]>A?l[E++]:1);return y}function Ob(h,l,A,y){const _=new Int32Array(l[l.length-1]+1);let E=0;_[0]=E;let O=1,D=0;for(let F=0;F<h.length;F++){const W=h[F],ee=l[F+1]-l[F];if(W===5||W===2||y&&(W===4||W===1))for(let ae=0;ae<ee;ae++)E=_[O++]=E+A[D++];else for(let ae=0;ae<ee;ae++)_[O++]=++E}return _}class b_ extends hd{dataVector;constructor(l,A,y){super(l,A.getBuffer(),y),this.dataVector=A}getValueFromBuffer(l){return this.dataVector.get(l)}}class C_ extends Zf{getValueFromBuffer(l){return this.dataBuffer[l]}}class Ib extends hd{constructor(l,A,y){super(l,BigInt64Array.of(A),y)}getValueFromBuffer(l){return this.dataBuffer[0]}}function cm(h,l,A){return Tb(h,Math.ceil(l/8),A)}function Tb(h,l,A){const y=new Uint8Array(l);let _=0;for(;_<l;){const E=h[A.increment()];if(E<=127){const O=E+3,D=h[A.increment()],F=_+O;y.fill(D,_,F),_=F}else{const O=256-E;for(let D=0;D<O;D++)y[_++]=h[A.increment()]}}return y}const __=new TextDecoder;function j0(h,l,A){return A-l>=12?__.decode(h.subarray(l,A)):(function(y,_,E){let O="",D=_;for(;D<E;){const F=y[D];let W,ee,ae,Ae=null,fe=F>239?4:F>223?3:F>191?2:1;if(D+fe>E)break;fe===1?F<128&&(Ae=F):fe===2?(W=y[D+1],(192&W)==128&&(Ae=(31&F)<<6|63&W,Ae<=127&&(Ae=null))):fe===3?(W=y[D+1],ee=y[D+2],(192&W)==128&&(192&ee)==128&&(Ae=(15&F)<<12|(63&W)<<6|63&ee,(Ae<=2047||Ae>=55296&&Ae<=57343)&&(Ae=null))):fe===4&&(W=y[D+1],ee=y[D+2],ae=y[D+3],(192&W)==128&&(192&ee)==128&&(192&ae)==128&&(Ae=(15&F)<<18|(63&W)<<12|(63&ee)<<6|63&ae,(Ae<=65535||Ae>=1114112)&&(Ae=null))),Ae===null?(Ae=65533,fe=1):Ae>65535&&(Ae-=65536,O+=String.fromCharCode(Ae>>>10&1023|55296),Ae=56320|1023&Ae),O+=String.fromCharCode(Ae),D+=fe}return O})(h,l,A)}class kb extends hd{offsetBuffer;constructor(l,A,y,_){super(l,y,_),this.offsetBuffer=A}}class x_ extends kb{textEncoder;constructor(l,A,y,_){super(l,A,y,_??A.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(l){return j0(this.dataBuffer,this.offsetBuffer[l],this.offsetBuffer[l+1])}}class tp extends kb{indexBuffer;textEncoder;constructor(l,A,y,_,E){super(l,y,_,E??A.length),this.indexBuffer=A,this.indexBuffer=A,this.textEncoder=new TextEncoder}getValueFromBuffer(l){const A=this.indexBuffer[l];return j0(this.dataBuffer,this.offsetBuffer[A],this.offsetBuffer[A+1])}}class Ky extends kb{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(l,A,y,_,E,O,D){super(l,y,_,D),this.indexBuffer=A,this.symbolOffsetBuffer=E,this.symbolTableBuffer=O,this.textEncoder=new TextEncoder}getValueFromBuffer(l){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(y,_,E){const O=[],D=new Array(_.length).fill(0);for(let F=1;F<_.length;F++)D[F]=D[F-1]+_[F-1];for(let F=0;F<E.length;F++)if(E[F]===255)O.push(E[++F]);else{const W=_[E[F]],ee=D[E[F]];for(let ae=0;ae<W;ae++)O.push(y[ee+ae])}return new Uint8Array(O)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const A=this.indexBuffer[l];return j0(this.decodedDictionary,this.offsetBuffer[A],this.offsetBuffer[A+1])}offsetToLengthBuffer(l){const A=new Uint32Array(l.length-1);let y=l[0];for(let _=1;_<l.length;_++){const E=l[_];A[_-1]=E-y,y=E}return A}}function Fy(h,l,A,y,_,E){return A.type==="scalarType"?(function(O,D,F,W,ee,ae){let Ae=null,fe=0;if(O===0)return null;if(ae.nullable){const we=ku(D,F);fe=we.numValues;const Be=F.get(),ze=cm(D,fe,F);F.set(Be+we.byteLength),Ae=new zl(ze,we.numValues)}const be=Ae??W;switch(ee.physicalType){case 4:case 3:return(function(we,Be,ze,at,We){const Xe=ku(we,Be),ct=nf(Xe,We,we,Be),pt=at.physicalType===3;if(ct===il.FLAT){const Nt=Am(We)?Dy(we,Be,Xe,pt,We):du(we,Be,Xe,pt);return new Iu(ze.name,Nt,We)}if(ct===il.SEQUENCE){const Nt=p_(we,Be,Xe);return new bb(ze.name,Nt[0],Nt[1],Xe.numRleValues)}{const Nt=Mb(we,Be,Xe,pt);return new Oy(ze.name,Nt,We)}})(D,F,ae,ee,be);case 9:return(function(we,Be,ze,at,We){let Xe=null,ct=null,pt=null,Nt=null,sn=null,nn=null,fn=null,Kn=null;for(let yn=0;yn<at;yn++){const on=ku(Be,ze);if(on.byteLength!==0)switch(on.physicalStreamType){case Di.PRESENT:{const Yt=cm(Be,on.numValues,ze);nn=new zl(Yt,on.numValues);break}case Di.OFFSET:ct=We!=null||nn!=null?Dy(Be,ze,on,!1,We??nn):du(Be,ze,on,!1);break;case Di.LENGTH:{const Yt=pd(Be,ze,on);hu.DICTIONARY===on.logicalStreamType.lengthType?Xe=Yt:hu.SYMBOL===on.logicalStreamType.lengthType?Nt=Yt:fn=Yt;break}case Di.DATA:{const Yt=Be.subarray(ze.get(),ze.get()+on.byteLength);ze.add(on.byteLength);const ii=on.logicalStreamType.dictionaryType;uA.FSST===ii?sn=Yt:uA.SINGLE===ii||uA.SHARED===ii?pt=Yt:uA.NONE===ii&&(Kn=Yt);break}}}return(function(yn,on,Yt,ii,Zn,li,$n){return on?new Ky(yn,Yt,ii,Zn,li,on,$n):null})(we,sn,ct,Xe,pt,Nt,We??nn)??(function(yn,on,Yt,ii,Zn){return on?Zn?new tp(yn,Yt,ii,on,Zn):new tp(yn,Yt,ii,on):null})(we,pt,ct,Xe,We??nn)??(function(yn,on,Yt,ii,Zn){if(!on||!Yt)return null;if(ii)return Zn?new tp(yn,ii,on,Yt,Zn):new tp(yn,ii,on,Yt);if(Zn&&Zn.size()!==on.length-1){const li=new Int32Array(Zn.size());let $n=0;for(let Pi=0;Pi<Zn.size();Pi++)li[Pi]=Zn.get(Pi)?$n++:0;return new tp(yn,li,on,Yt,Zn)}return Zn?new x_(yn,on,Yt,Zn):new x_(yn,on,Yt)})(we,fn,Kn,ct,We??nn)})(ae.name,D,F,ae.nullable?O-1:O,Ae);case 0:return(function(we,Be,ze,at,We){const Xe=ku(we,Be),ct=Xe.numValues,pt=Be.get(),Nt=Am(We)?(function(nn,fn,Kn,yn){const on=Tb(nn,Math.ceil(fn/8),Kn),Yt=new zl(on,fn),ii=yn.size(),Zn=new zl(new Uint8Array(ii),ii);let li=0;for(let $n=0;$n<yn.size();$n++){const Pi=!!yn.get($n)&&Yt.get(li++);Zn.set($n,Pi)}return Zn.getBuffer()})(we,ct,Be,We):cm(we,ct,Be);Be.set(pt+Xe.byteLength);const sn=new zl(Nt,ct);return new b_(ze.name,sn,We)})(D,F,ae,0,be);case 6:case 5:return(function(we,Be,ze,at,We){const Xe=ku(we,Be),ct=nf(Xe,at,we,Be),pt=We.physicalType===5;if(ct===il.FLAT){const Nt=Am(at)?(function(sn,nn,fn,Kn,yn){return(function(on,Yt,ii,Zn){switch(Yt.logicalLevelTechnique1){case _r.DELTA:return Yt.logicalLevelTechnique2===_r.RLE&&(on=cA(on,Yt.runs,Yt.numRleValues)),(function(li,$n){const Pi=new BigInt64Array(li.size());let bo=0;li.get(0)?(Pi[0]=li.get(0)?$n[0]>>1n^-(1n&$n[0]):0n,bo=1):Pi[0]=0n;let Nr=1;for(;Nr!=Pi.length;++Nr)Pi[Nr]=li.get(Nr)?Pi[Nr-1]+($n[bo]>>1n^-(1n&$n[bo++])):Pi[Nr-1];return Pi})(Zn,on);case _r.RLE:return(function(li,$n,Pi,bo){const Nr=$n;return Pi?(function(fa,Fc,jl){const pa=new BigInt64Array(fa.size());let ea=0;for(let Vo=0;Vo<jl;Vo++){const Wa=Number(Fc[Vo]);let rl=Fc[Vo+jl];rl=rl>>1n^-(1n&rl);for(let qs=ea;qs<ea+Wa;qs++)fa.get(qs)?pa[qs]=rl:(pa[qs]=0n,ea++);ea+=Wa}return pa})(bo,li,Nr.runs):(function(fa,Fc,jl){const pa=new BigInt64Array(fa.size());let ea=0;for(let Vo=0;Vo<jl;Vo++){const Wa=Number(Fc[Vo]),rl=Fc[Vo+jl];for(let qs=ea;qs<ea+Wa;qs++)fa.get(qs)?pa[qs]=rl:(pa[qs]=0n,ea++);ea+=Wa}return pa})(bo,li,Nr.runs)})(on,Yt,ii,Zn);case _r.NONE:return on=ii?(function(li,$n){const Pi=new BigInt64Array(li.size());let bo=0,Nr=0;for(;Nr!=Pi.length;++Nr)if(li.get(Nr)){const fa=$n[bo++];Pi[Nr]=fa>>1n^-(1n&fa)}else Pi[Nr]=0n;return Pi})(Zn,on):(function(li,$n){const Pi=new BigInt64Array(li.size());let bo=0,Nr=0;for(;Nr!=Pi.length;++Nr)Pi[Nr]=li.get(Nr)?$n[bo++]:0n;return Pi})(Zn,on),on;default:throw new Error("The specified Logical level technique is not supported")}})(Iy(sn,nn,fn.numValues),fn,Kn,yn)})(we,Be,Xe,pt,at):lc(we,Be,Xe,pt);return new sm(ze.name,Nt,at)}if(ct===il.SEQUENCE){const Nt=gl(we,Be,Xe);return new wb(ze.name,Nt[0],Nt[1],Xe.numRleValues)}{const Nt=m_(we,Be,Xe,pt);return new Ib(ze.name,Nt,at)}})(D,F,ae,be,ee);case 7:return(function(we,Be,ze,at){const We=ku(we,Be),Xe=Am(at)?(function(ct,pt,Nt,sn){const nn=pt.get(),fn=nn+sn*Float32Array.BYTES_PER_ELEMENT,Kn=new Uint8Array(ct.subarray(nn,fn)).buffer,yn=new Float32Array(Kn);pt.set(fn);const on=Nt.size(),Yt=new Float32Array(on);let ii=0;for(let Zn=0;Zn<on;Zn++)Yt[Zn]=Nt.get(Zn)?yn[ii++]:0;return Yt})(we,Be,at,We.numValues):(function(ct,pt,Nt){const sn=pt.get(),nn=sn+Nt*Float32Array.BYTES_PER_ELEMENT,fn=new Uint8Array(ct.subarray(sn,nn)).buffer,Kn=new Float32Array(fn);return pt.set(nn),Kn})(we,Be,We.numValues);return new C_(ze.name,Xe,at)})(D,F,ae,be);case 8:return(function(we,Be,ze,at){const We=ku(we,Be),Xe=Am(at)?(function(ct,pt,Nt,sn){const nn=pt.get(),fn=nn+sn*Float64Array.BYTES_PER_ELEMENT,Kn=new Uint8Array(ct.subarray(nn,fn)).buffer,yn=new Float64Array(Kn);pt.set(fn);const on=Nt.size(),Yt=new Float64Array(on);let ii=0;for(let Zn=0;Zn<on;Zn++)Yt[Zn]=Nt.get(Zn)?yn[ii++]:0;return Yt})(we,Be,at,We.numValues):(function(ct,pt,Nt){const sn=pt.get(),nn=sn+Nt*Float64Array.BYTES_PER_ELEMENT,fn=new Uint8Array(ct.subarray(sn,nn)).buffer,Kn=new Float64Array(fn);return pt.set(nn),Kn})(we,Be,We.numValues);return new dd(ze.name,Xe,at)})(D,F,ae,be);default:throw new Error(`The specified data type for the field is currently not supported: ${ee}`)}})(y,h,l,_,A.scalarType,A):y!=1?null:(function(O,D,F,W){let ee=null,ae=null,Ae=null,fe=null,be=!1;for(;!be;){const at=ku(O,D);switch(at.physicalStreamType){case Di.LENGTH:hu.DICTIONARY===at.logicalStreamType.lengthType?ee=pd(O,D,at):Ae=pd(O,D,at);break;case Di.DATA:uA.SINGLE===at.logicalStreamType.dictionaryType||uA.SHARED===at.logicalStreamType.dictionaryType?(ae=O.subarray(D.get(),D.get()+at.byteLength),be=!0):fe=O.subarray(D.get(),D.get()+at.byteLength),D.add(at.byteLength)}}const we=F.complexType.children,Be=[];let ze=0;for(const at of we){const We=Js(O,D,1)[0];if(We==0)continue;const Xe=`${F.name}${at.name==="default"?"":":"+at.name}`;if(We!==2||at.type!=="scalarField"||at.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const ct=ku(O,D),pt=cm(O,ct.numValues,D),Nt=ku(O,D),sn=Nt.decompressedCount!==W?Dy(O,D,Nt,!1,new zl(pt,ct.numValues)):du(O,D,Nt,!1);Be[ze++]=fe?new Ky(Xe,sn,ee,ae,Ae,fe,new zl(pt,ct.numValues)):new tp(Xe,sn,ee,ae,new zl(pt,ct.numValues))}return Be})(h,l,A,_)}function Am(h){return h instanceof zl}function M_(h){if(h.name==="id")return!1;if(h.type==="scalarType"){const l=h.scalarType;if(l.type==="physicalType")switch(l.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(l.type==="logicalType")return!1}else if(h.type==="complexType"){const l=h.complexType;if(l.type==="physicalType")switch(l.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",h),!1}const Db=new TextDecoder;function rf(h,l){const A=Js(h,l,1)[0];if(A===0)return"";const y=l.get(),_=h.subarray(y,y+A);return l.add(A),Db.decode(_)}function of(h,l){const A=Js(h,l,1)[0]>>>0,y=!!(4&A),_=!!(2&A),E=Js(h,l,1)[0]>>>0,O={};if(1&A&&(O.nullable=!0),_){const D={};if(y?(D.type="logicalType",D.logicalType=E):(D.type="physicalType",D.physicalType=E),8&A){const F=Js(h,l,1)[0]>>>0;D.children=new Array(F);for(let W=0;W<F;W++)D.children[W]=of(h,l)}O.type="complexField",O.complexField=D}else{const D={};y?(D.type="logicalType",D.logicalType=E):(D.type="physicalType",D.physicalType=E),O.type="scalarField",O.scalarField=D}return O}function np(h,l){const A=Js(h,l,1)[0]>>>0,y=(function(_){switch(_){case 0:case 1:case 2:case 3:{const E={};E.nullable=!!(1&_),E.columnScope=0;const O={};return O.physicalType=_>1?6:4,O.type="physicalType",E.scalarType=O,E.type="scalarType",E}case 4:{const E={nullable:!1,columnScope:0},O={type:"physicalType",physicalType:0};return E.type="complexType",E.complexType=O,E}case 30:{const E={nullable:!1,columnScope:0},O={type:"physicalType",physicalType:1};return E.type="complexType",E.complexType=O,E}default:return(function(E){let O=null;switch(E){case 10:case 11:O=0;break;case 12:case 13:O=1;break;case 14:case 15:O=2;break;case 16:case 17:O=3;break;case 18:case 19:O=4;break;case 20:case 21:O=5;break;case 22:case 23:O=6;break;case 24:case 25:O=7;break;case 26:case 27:O=8;break;case 28:case 29:O=9;break;default:return null}const D={};D.nullable=!!(1&E),D.columnScope=0;const F={type:"physicalType"};return F.physicalType=O,D.type="scalarType",D.scalarType=F,D})(_)}})(A);if(!y)throw new Error(`Unsupported column type code: ${A}`);if((function(_){return _>=10})(A)?y.name=rf(h,l):A>=0&&A<=3?y.name="id":A===4&&(y.name="geometry"),(function(_){return _===30})(A)){const _=Js(h,l,1)[0]>>>0,E=y.complexType;E.children=new Array(_);for(let O=0;O<_;O++)E.children[O]=of(h,l)}return y}function d1(h,l){const A={featureTables:[]},y={};y.name=rf(h,l);const _=Js(h,l,1)[0]>>>0,E=Js(h,l,1)[0]>>>0;y.columns=new Array(E);for(let O=0;O<E;O++)y.columns[O]=np(h,l);return A.featureTables.push(y),[A,_]}function f1(h,l,A,y,_,E,O=!1){const D=l.scalarType.physicalType,F=nf(_,E,h,A);if(D===4)switch(F){case il.FLAT:{const W=du(h,A,_,!1);return new Iu(y,W,E)}case il.SEQUENCE:{const W=p_(h,A,_);return new bb(y,W[0],W[1],_.numRleValues)}case il.CONST:{const W=Mb(h,A,_,!1);return new Oy(y,W,E)}}else switch(F){case il.FLAT:{if(O){const ee=(function(ae,Ae,fe,be){const we=(function(Be,ze,at){const We=new Float64Array(ze);for(let Xe=0;Xe<ze;Xe++)We[Xe]=FA(Be,at);return We})(ae,fe.numValues,Ae);return(function(Be,ze,at){switch(ze.logicalLevelTechnique1){case _r.DELTA:return ze.logicalLevelTechnique2===_r.RLE&&(Be=_b(Be,ze.runs,ze.numRleValues)),(function(We){We[0]=We[0]%2==1?(We[0]+1)/-2:We[0]/2;const Xe=We.length/4*4;let ct=1;if(Xe>=4)for(;ct<Xe-4;ct+=4){const pt=We[ct],Nt=We[ct+1],sn=We[ct+2],nn=We[ct+3];We[ct]=(pt%2==1?(pt+1)/-2:pt/2)+We[ct-1],We[ct+1]=(Nt%2==1?(Nt+1)/-2:Nt/2)+We[ct],We[ct+2]=(sn%2==1?(sn+1)/-2:sn/2)+We[ct+1],We[ct+3]=(nn%2==1?(nn+1)/-2:nn/2)+We[ct+2]}for(;ct!=We.length;++ct)We[ct]=(We[ct]%2==1?(We[ct]+1)/-2:We[ct]/2)+We[ct-1]})(Be),Be;case _r.RLE:return(function(We,Xe,ct){return _b(We,Xe.runs,Xe.numRleValues)})(Be,ze);case _r.NONE:return Be;default:throw new Error(`The specified Logical level technique is not supported: ${ze.logicalLevelTechnique1}`)}})(we,fe)})(h,A,_);return new dd(y,ee,E)}const W=lc(h,A,_,!1);return new sm(y,W,E)}case il.SEQUENCE:{const W=gl(h,A,_);return new wb(y,W[0],W[1],_.numRleValues)}case il.CONST:{const W=m_(h,A,_,!1);return new Ib(y,W,E)}}throw new Error("Vector type not supported for id column.")}class ip{constructor(l,A){var y;switch(this._featureData=l,this.properties=this._featureData.properties||{},(y=this._featureData.geometry)===null||y===void 0?void 0:y.type){case cr.POINT:case cr.MULTIPOINT:this.type=1;break;case cr.LINESTRING:case cr.MULTILINESTRING:this.type=2;break;case cr.POLYGON:case cr.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=A,this.id=Number(this._featureData.id)}loadGeometry(){const l=[];for(const A of this._featureData.geometry.coordinates){const y=[];for(const _ of A)y.push(new c(_.x,_.y));l.push(y)}return l}}class a3{constructor(l){this.features=[],this.featureTable=l,this.name=l.name,this.extent=l.extent,this.version=2,this.features=l.getFeatures(),this.length=this.features.length}feature(l){return new ip(this.features[l],this.extent)}}class Rb{constructor(l){this.layers={};const A=(function(y,_,E=!0){const O=new d_(0),D=[];for(;O.get()<y.length;){const F=Js(y,O,1)[0]>>>0,W=O.get()+F;if(W>y.length)throw new Error(`Block overruns tile: ${W} > ${y.length}`);if(Js(y,O,1)[0]>>>0!=1){O.set(W);continue}const ee=d1(y,O),ae=ee[1],Ae=ee[0].featureTables[0];let fe=null,be=null;const we=[];let Be=0;for(const at of Ae.columns){const We=at.name;if(We==="id"){let Xe=null;if(at.nullable){const pt=ku(y,O),Nt=O.get(),sn=cm(y,pt.numValues,O);O.set(Nt+pt.byteLength),Xe=new zl(sn,pt.numValues)}const ct=ku(y,O);Be=ct.decompressedCount,fe=f1(y,at,O,We,ct,Xe??Be,E)}else if(We==="geometry"){const Xe=Js(y,O,1)[0];if(Be===0){const ct=O.get();Be=ku(y,O).decompressedCount,O.set(ct)}be=z0(y,Xe,O,Be)}else{const Xe=M_(at)?Js(y,O,1)[0]:1;if(Xe===0&&at.type==="scalarType")continue;const ct=Fy(y,O,at,Xe,Be);if(ct)if(Array.isArray(ct))for(const pt of ct)we.push(pt);else we.push(ct)}}const ze=new s3(Ae.name,be,fe,we,ae);D.push(ze),O.set(W)}return D})(new Uint8Array(l));this.layers=A.reduce(((y,_)=>Object.assign(Object.assign({},y),{[_.name]:new a3(_)})),{})}}class AA{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(l){return this.minX=Math.min(this.minX,l.x),this.minY=Math.min(this.minY,l.y),this.maxX=Math.max(this.maxX,l.x),this.maxY=Math.max(this.maxY,l.y),this}expandBy(l){return this.minX-=l,this.minY-=l,this.maxX+=l,this.maxY+=l,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(l){return this.expandBy(-l)}map(l){const A=new AA;return A.extend(l(new c(this.minX,this.minY))),A.extend(l(new c(this.maxX,this.minY))),A.extend(l(new c(this.minX,this.maxY))),A.extend(l(new c(this.maxX,this.maxY))),A}static fromPoints(l){const A=new AA;for(const y of l)A.extend(y);return A}contains(l){return l.x>=this.minX&&l.x<=this.maxX&&l.y>=this.minY&&l.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(l){return!this.empty()&&!l.empty()&&l.minX>=this.minX&&l.maxX<=this.maxX&&l.minY>=this.minY&&l.maxY<=this.maxY}intersects(l){return!this.empty()&&!l.empty()&&l.minX<=this.maxX&&l.maxX>=this.minX&&l.minY<=this.maxY&&l.maxY>=this.minY}}class w_{constructor(l,A){this.feature=l,this.type=l.type,this.properties=l.tags?l.tags:{},this.extent=A,"id"in l&&(typeof l.id=="string"?this.id=parseInt(l.id,10):typeof l.id!="number"||isNaN(l.id)||(this.id=l.id))}loadGeometry(){const l=[],A=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const y of A){const _=[];for(const E of y)_.push(new c(E[0],E[1]));l.push(_)}return l}}const hm="_geojsonTileLayer";function zy(h,l){l.writeVarintField(15,h.version||1),l.writeStringField(1,h.name||""),l.writeVarintField(5,h.extent||4096);const A={keys:[],values:[],keycache:{},valuecache:{}};for(let E=0;E<h.length;E++)A.feature=h.feature(E),l.writeMessage(2,S_,A);const y=A.keys;for(const E of y)l.writeStringField(3,E);const _=A.values;for(const E of _)l.writeMessage(4,N0,E)}function S_(h,l){if(!h.feature)return;const A=h.feature;A.id!==void 0&&l.writeVarintField(1,A.id),l.writeMessage(2,l3,h),l.writeVarintField(3,A.type),l.writeMessage(4,E_,A)}function l3(h,l){for(const A in h.feature?.properties){let y=h.feature.properties[A],_=h.keycache[A];if(y===null)continue;_===void 0&&(h.keys.push(A),_=h.keys.length-1,h.keycache[A]=_),l.writeVarint(_),typeof y!="string"&&typeof y!="boolean"&&typeof y!="number"&&(y=JSON.stringify(y));const E=typeof y+":"+y;let O=h.valuecache[E];O===void 0&&(h.values.push(y),O=h.values.length-1,h.valuecache[E]=O),l.writeVarint(O)}}function rp(h,l){return(l<<3)+(7&h)}function p1(h){return h<<1^h>>31}function E_(h,l){const A=h.loadGeometry(),y=h.type;let _=0,E=0;for(const O of A){let D=1;y===1&&(D=O.length),l.writeVarint(rp(1,D));const F=y===3?O.length-1:O.length;for(let W=0;W<F;W++){W===1&&y!==1&&l.writeVarint(rp(2,F-1));const ee=O[W].x-_,ae=O[W].y-E;l.writeVarint(p1(ee)),l.writeVarint(p1(ae)),_+=ee,E+=ae}h.type===3&&l.writeVarint(rp(7,1))}}function N0(h,l){const A=typeof h;A==="string"?l.writeStringField(1,h):A==="boolean"?l.writeBooleanField(7,h):A==="number"&&(h%1!=0?l.writeDoubleField(3,h):h<0?l.writeSVarintField(6,h):l.writeVarintField(5,h))}class Du{constructor(l,A){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new Vh(mt,16,0),this.grid3D=new Vh(mt,16,0),this.featureIndexArray=new ye,this.promoteId=A}insert(l,A,y,_,E,O){const D=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(y,_,E);const F=O?this.grid3D:this.grid;for(let W=0;W<A.length;W++){const ee=A[W],ae=[1/0,1/0,-1/0,-1/0];for(let Ae=0;Ae<ee.length;Ae++){const fe=ee[Ae];ae[0]=Math.min(ae[0],fe.x),ae[1]=Math.min(ae[1],fe.y),ae[2]=Math.max(ae[2],fe.x),ae[3]=Math.max(ae[3],fe.y)}ae[0]<mt&&ae[1]<mt&&ae[2]>=0&&ae[3]>=0&&F.insert(D,ae[0],ae[1],ae[2],ae[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new Oo(new e1(this.rawTileData)).layers:new Rb(this.rawTileData).layers,this.sourceLayerCoder=new P0(this.vtLayers?Object.keys(this.vtLayers).sort():[hm])),this.vtLayers}query(l,A,y,_){this.loadVTLayers();const E=l.params,O=mt/l.tileSize/l.scale,D=Dl(E.filter,E.globalState),F=l.queryGeometry,W=l.queryPadding*O,ee=AA.fromPoints(F),ae=this.grid.query(ee.minX-W,ee.minY-W,ee.maxX+W,ee.maxY+W),Ae=AA.fromPoints(l.cameraQueryGeometry).expandBy(W),fe=this.grid3D.query(Ae.minX,Ae.minY,Ae.maxX,Ae.maxY,((Be,ze,at,We)=>(function(Xe,ct,pt,Nt,sn){for(const fn of Xe)if(ct<=fn.x&&pt<=fn.y&&Nt>=fn.x&&sn>=fn.y)return!0;const nn=[new c(ct,pt),new c(ct,sn),new c(Nt,sn),new c(Nt,pt)];if(Xe.length>2){for(const fn of nn)if(sd(Xe,fn))return!0}for(let fn=0;fn<Xe.length-1;fn++)if(ty(Xe[fn],Xe[fn+1],nn))return!0;return!1})(l.cameraQueryGeometry,Be-W,ze-W,at+W,We+W)));for(const Be of fe)ae.push(Be);ae.sort(jy);const be={};let we;for(let Be=0;Be<ae.length;Be++){const ze=ae[Be];if(ze===we)continue;we=ze;const at=this.featureIndexArray.get(ze);let We=null;this.loadMatchingFeature(be,at.bucketIndex,at.sourceLayerIndex,at.featureIndex,D,E.layers,E.availableImages,A,y,_,((Xe,ct,pt)=>(We||(We=ca(Xe)),ct.queryIntersectsFeature({queryGeometry:F,feature:Xe,featureState:pt,geometry:We,zoom:this.z,transform:l.transform,pixelsToTileUnits:O,pixelPosMatrix:l.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:l.getElevation}))))}return be}loadMatchingFeature(l,A,y,_,E,O,D,F,W,ee,ae){const Ae=this.bucketLayerIDs[A];if(O&&!Ae.some((Be=>O.has(Be))))return;const fe=this.sourceLayerCoder.decode(y),be=this.vtLayers[fe].feature(_);if(E.needGeometry){const Be=mh(be,!0);if(!E.filter(new zr(this.tileID.overscaledZ),Be,this.tileID.canonical))return}else if(!E.filter(new zr(this.tileID.overscaledZ),be))return;const we=this.getId(be,fe);for(let Be=0;Be<Ae.length;Be++){const ze=Ae[Be];if(O&&!O.has(ze))continue;const at=F[ze];if(!at)continue;let We={};we&&ee&&(We=ee.getState(at.sourceLayer||hm,we));const Xe=Le({},W[ze]);Xe.paint=G0(Xe.paint,at.paint,be,We,D),Xe.layout=G0(Xe.layout,at.layout,be,We,D);const ct=!ae||ae(be,at,We);if(!ct)continue;const pt=new Ey(be,this.z,this.x,this.y,we);pt.layer=Xe;let Nt=l[ze];Nt===void 0&&(Nt=l[ze]=[]),Nt.push({featureIndex:_,feature:pt,intersectionZ:ct})}}lookupSymbolFeatures(l,A,y,_,E,O,D,F){const W={};this.loadVTLayers();const ee=Dl(E.filterSpec,E.globalState);for(const ae of l)this.loadMatchingFeature(W,y,_,ae,ee,O,D,F,A);return W}hasLayer(l){for(const A of this.bucketLayerIDs)for(const y of A)if(l===y)return!0;return!1}getId(l,A){var y;let _=l.id;return this.promoteId&&(_=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[A]],typeof _=="boolean"&&(_=Number(_)),_===void 0&&(!((y=l.properties)===null||y===void 0)&&y.cluster)&&this.promoteId&&(_=Number(l.properties.cluster_id))),_}}function G0(h,l,A,y,_){return Oe(h,((E,O)=>{const D=l instanceof tc?l.get(O):null;return D&&D.evaluate?D.evaluate(A,y,_):D}))}function jy(h,l){return l-h}function Pb(h,l,A,y,_){const E=[];for(let O=0;O<h.length;O++){const D=h[O];let F;for(let W=0;W<D.length-1;W++){let ee=D[W],ae=D[W+1];ee.x<l&&ae.x<l||(ee.x<l?ee=new c(l,ee.y+(l-ee.x)/(ae.x-ee.x)*(ae.y-ee.y))._round():ae.x<l&&(ae=new c(l,ee.y+(l-ee.x)/(ae.x-ee.x)*(ae.y-ee.y))._round()),ee.y<A&&ae.y<A||(ee.y<A?ee=new c(ee.x+(A-ee.y)/(ae.y-ee.y)*(ae.x-ee.x),A)._round():ae.y<A&&(ae=new c(ee.x+(A-ee.y)/(ae.y-ee.y)*(ae.x-ee.x),A)._round()),ee.x>=y&&ae.x>=y||(ee.x>=y?ee=new c(y,ee.y+(y-ee.x)/(ae.x-ee.x)*(ae.y-ee.y))._round():ae.x>=y&&(ae=new c(y,ee.y+(y-ee.x)/(ae.x-ee.x)*(ae.y-ee.y))._round()),ee.y>=_&&ae.y>=_||(ee.y>=_?ee=new c(ee.x+(_-ee.y)/(ae.y-ee.y)*(ae.x-ee.x),_)._round():ae.y>=_&&(ae=new c(ee.x+(_-ee.y)/(ae.y-ee.y)*(ae.x-ee.x),_)._round()),F&&ee.equals(F[F.length-1])||(F=[ee],E.push(F)),F.push(ae)))))}}return E}function B_(h,l,A,y,_){switch(l){case 1:return(function(E,O,D,F){const W=[];for(const ee of E)for(const ae of ee){const Ae=F===0?ae.x:ae.y;Ae>=O&&Ae<=D&&W.push([ae])}return W})(h,A,y,_);case 2:return f(h,A,y,_,!1);case 3:return f(h,A,y,_,!0)}return[]}function Ny(h,l,A,y,_){const E=y===0?g:x;let O=[];const D=[];for(let ee=0;ee<h.length-1;ee++){const ae=h[ee],Ae=h[ee+1],fe=y===0?ae.x:ae.y,be=y===0?Ae.x:Ae.y;let we=!1;fe<l?be>l&&O.push(E(ae,Ae,l)):fe>A?be<A&&O.push(E(ae,Ae,A)):O.push(ae),be<l&&fe>=l&&(O.push(E(ae,Ae,l)),we=!0),be>A&&fe<=A&&(O.push(E(ae,Ae,A)),we=!0),!_&&we&&(D.push(O),O=[])}const F=h.length-1,W=y===0?h[F].x:h[F].y;return W>=l&&W<=A&&O.push(h[F]),_&&O.length>0&&!O[0].equals(O[O.length-1])&&O.push(new c(O[0].x,O[0].y)),O.length>0&&D.push(O),D}function f(h,l,A,y,_){const E=[];for(const O of h){const D=Ny(O,l,A,y,_);D.length>0&&E.push(...D)}return E}function g(h,l,A){return new c(A,h.y+(A-h.x)/(l.x-h.x)*(l.y-h.y))}function x(h,l,A){return new c(h.x+(A-h.y)/(l.y-h.y)*(l.x-h.x),A)}Fn("FeatureIndex",Du,{omit:["rawTileData","sourceLayerCoder"]});class T extends c{constructor(l,A,y,_){super(l,A),this.angle=y,_!==void 0&&(this.segment=_)}clone(){return new T(this.x,this.y,this.angle,this.segment)}}function G(h,l,A,y,_){if(l.segment===void 0||A===0)return!0;let E=l,O=l.segment+1,D=0;for(;D>-A/2;){if(O--,O<0)return!1;D-=h[O].dist(E),E=h[O]}D+=h[O].dist(h[O+1]),O++;const F=[];let W=0;for(;D<A/2;){const ee=h[O],ae=h[O+1];if(!ae)return!1;let Ae=h[O-1].angleTo(ee)-ee.angleTo(ae);for(Ae=Math.abs((Ae+3*Math.PI)%(2*Math.PI)-Math.PI),F.push({distance:D,angleDelta:Ae}),W+=Ae;D-F[0].distance>y;)W-=F.shift().angleDelta;if(W>_)return!1;O++,D+=ee.dist(ae)}return!0}function J(h){let l=0;for(let A=0;A<h.length-1;A++)l+=h[A].dist(h[A+1]);return l}function _e(h,l,A){return h?.6*l*A:0}function Ve(h,l){return Math.max(h?h.right-h.left:0,l?l.right-l.left:0)}function _t(h,l,A,y,_,E){const O=_e(A,_,E),D=Ve(A,y)*E;let F=0;const W=J(h)/2;for(let ee=0;ee<h.length-1;ee++){const ae=h[ee],Ae=h[ee+1],fe=ae.dist(Ae);if(F+fe>W){const be=(W-F)/fe,we=yo.number(ae.x,Ae.x,be),Be=yo.number(ae.y,Ae.y,be),ze=new T(we,Be,Ae.angleTo(ae),ee);return ze._round(),!O||G(h,ze,D,O,l)?ze:void 0}F+=fe}}function $t(h,l,A,y,_,E,O,D,F){const W=_e(y,E,O),ee=Ve(y,_),ae=ee*O,Ae=h[0].x===0||h[0].x===F||h[0].y===0||h[0].y===F;return l-ae<l/4&&(l=ae+l/4),ln(h,Ae?l/2*D%l:(ee/2+2*E)*O*D%l,l,W,A,ae,Ae,!1,F)}function ln(h,l,A,y,_,E,O,D,F){const W=E/2,ee=J(h);let ae=0,Ae=l-A,fe=[];for(let be=0;be<h.length-1;be++){const we=h[be],Be=h[be+1],ze=we.dist(Be),at=Be.angleTo(we);for(;Ae+A<ae+ze;){Ae+=A;const We=(Ae-ae)/ze,Xe=yo.number(we.x,Be.x,We),ct=yo.number(we.y,Be.y,We);if(Xe>=0&&Xe<F&&ct>=0&&ct<F&&Ae-W>=0&&Ae+W<=ee){const pt=new T(Xe,ct,at,be);pt._round(),y&&!G(h,pt,E,y,_)||fe.push(pt)}}ae+=ze}return D||fe.length||O||(fe=ln(h,ae/2,A,y,_,E,O,!0,F)),fe}function gn(h,l,A,y){const _=[],E=h.image,O=E.pixelRatio,D=E.paddedRect.w-2,F=E.paddedRect.h-2;let W={x1:h.left,y1:h.top,x2:h.right,y2:h.bottom};const ee=E.stretchX||[[0,D]],ae=E.stretchY||[[0,F]],Ae=(Yt,ii)=>Yt+ii[1]-ii[0],fe=ee.reduce(Ae,0),be=ae.reduce(Ae,0),we=D-fe,Be=F-be;let ze=0,at=fe,We=0,Xe=be,ct=0,pt=we,Nt=0,sn=Be;if(E.content&&y){const Yt=E.content,ii=Yt[2]-Yt[0],Zn=Yt[3]-Yt[1];(E.textFitWidth||E.textFitHeight)&&(W=Cy(h)),ze=Zt(ee,0,Yt[0]),We=Zt(ae,0,Yt[1]),at=Zt(ee,Yt[0],Yt[2]),Xe=Zt(ae,Yt[1],Yt[3]),ct=Yt[0]-ze,Nt=Yt[1]-We,pt=ii-at,sn=Zn-Xe}const nn=W.x1,fn=W.y1,Kn=W.x2-nn,yn=W.y2-fn,on=(Yt,ii,Zn,li)=>{const $n=xi(Yt.stretch-ze,at,Kn,nn),Pi=er(Yt.fixed-ct,pt,Yt.stretch,fe),bo=xi(ii.stretch-We,Xe,yn,fn),Nr=er(ii.fixed-Nt,sn,ii.stretch,be),fa=xi(Zn.stretch-ze,at,Kn,nn),Fc=er(Zn.fixed-ct,pt,Zn.stretch,fe),jl=xi(li.stretch-We,Xe,yn,fn),pa=er(li.fixed-Nt,sn,li.stretch,be),ea=new c($n,bo),Vo=new c(fa,bo),Wa=new c(fa,jl),rl=new c($n,jl),qs=new c(Pi/O,Nr/O),xh=new c(Fc/O,pa/O),zc=l*Math.PI/180;if(zc){const Ru=Math.sin(zc),ka=Math.cos(zc),Nl=[ka,-Ru,Ru,ka];ea._matMult(Nl),Vo._matMult(Nl),rl._matMult(Nl),Wa._matMult(Nl)}const Mh=Yt.stretch+Yt.fixed,op=ii.stretch+ii.fixed;return{tl:ea,tr:Vo,bl:rl,br:Wa,tex:{x:E.paddedRect.x+1+Mh,y:E.paddedRect.y+1+op,w:Zn.stretch+Zn.fixed-Mh,h:li.stretch+li.fixed-op},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:qs,pixelOffsetBR:xh,minFontScaleX:pt/O/Kn,minFontScaleY:sn/O/yn,isSDF:A}};if(y&&(E.stretchX||E.stretchY)){const Yt=rn(ee,we,fe),ii=rn(ae,Be,be);for(let Zn=0;Zn<Yt.length-1;Zn++){const li=Yt[Zn],$n=Yt[Zn+1];for(let Pi=0;Pi<ii.length-1;Pi++)_.push(on(li,ii[Pi],$n,ii[Pi+1]))}}else _.push(on({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:D+1},{fixed:0,stretch:F+1}));return _}function Zt(h,l,A){let y=0;for(const _ of h)y+=Math.max(l,Math.min(A,_[1]))-Math.max(l,Math.min(A,_[0]));return y}function rn(h,l,A){const y=[{fixed:-1,stretch:0}];for(const[_,E]of h){const O=y[y.length-1];y.push({fixed:_-O.stretch,stretch:O.stretch}),y.push({fixed:_-O.stretch,stretch:O.stretch+(E-_)})}return y.push({fixed:l+1,stretch:A}),y}function xi(h,l,A,y){return h/l*A+y}function er(h,l,A,y){return h-l*A/y}Fn("Anchor",T);class zo{constructor(l,A,y,_,E,O,D,F,W,ee){var ae;if(this.boxStartIndex=l.length,W){let Ae=O.top,fe=O.bottom;const be=O.collisionPadding;be&&(Ae-=be[1],fe+=be[3]);let we=fe-Ae;we>0&&(we=Math.max(10,we),this.circleDiameter=we)}else{const Ae=!((ae=O.image)===null||ae===void 0)&&ae.content&&(O.image.textFitWidth||O.image.textFitHeight)?Cy(O):{x1:O.left,y1:O.top,x2:O.right,y2:O.bottom};Ae.y1=Ae.y1*D-F[0],Ae.y2=Ae.y2*D+F[2],Ae.x1=Ae.x1*D-F[3],Ae.x2=Ae.x2*D+F[1];const fe=O.collisionPadding;if(fe&&(Ae.x1-=fe[0]*D,Ae.y1-=fe[1]*D,Ae.x2+=fe[2]*D,Ae.y2+=fe[3]*D),ee){const be=new c(Ae.x1,Ae.y1),we=new c(Ae.x2,Ae.y1),Be=new c(Ae.x1,Ae.y2),ze=new c(Ae.x2,Ae.y2),at=ee*Math.PI/180;be._rotate(at),we._rotate(at),Be._rotate(at),ze._rotate(at),Ae.x1=Math.min(be.x,we.x,Be.x,ze.x),Ae.x2=Math.max(be.x,we.x,Be.x,ze.x),Ae.y1=Math.min(be.y,we.y,Be.y,ze.y),Ae.y2=Math.max(be.y,we.y,Be.y,ze.y)}l.emplaceBack(A.x,A.y,Ae.x1,Ae.y1,Ae.x2,Ae.y2,y,_,E)}this.boxEndIndex=l.length}}class Pt{constructor(l=[],A=(y,_)=>y<_?-1:y>_?1:0){if(this.data=l,this.length=this.data.length,this.compare=A,this.length>0)for(let y=(this.length>>1)-1;y>=0;y--)this._down(y)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;const l=this.data[0],A=this.data.pop();return--this.length>0&&(this.data[0]=A,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:A,compare:y}=this,_=A[l];for(;l>0;){const E=l-1>>1,O=A[E];if(y(_,O)>=0)break;A[l]=O,l=E}A[l]=_}_down(l){const{data:A,compare:y}=this,_=this.length>>1,E=A[l];for(;l<_;){let O=1+(l<<1);const D=O+1;if(D<this.length&&y(A[D],A[O])<0&&(O=D),y(A[O],E)>=0)break;A[l]=A[O],l=O}A[l]=E}}function It(h,l=1,A=!1){const y=AA.fromPoints(h[0]),_=Math.min(y.width(),y.height());let E=_/2;const O=new Pt([],qt),{minX:D,minY:F,maxX:W,maxY:ee}=y;if(_===0)return new c(D,F);for(let fe=D;fe<W;fe+=_)for(let be=F;be<ee;be+=_)O.push(new hn(fe+E,be+E,E,h));let ae=(function(fe){let be=0,we=0,Be=0;const ze=fe[0];for(let at=0,We=ze.length,Xe=We-1;at<We;Xe=at++){const ct=ze[at],pt=ze[Xe],Nt=ct.x*pt.y-pt.x*ct.y;we+=(ct.x+pt.x)*Nt,Be+=(ct.y+pt.y)*Nt,be+=3*Nt}return new hn(we/be,Be/be,0,fe)})(h),Ae=O.length;for(;O.length;){const fe=O.pop();(fe.d>ae.d||!ae.d)&&(ae=fe,A&&console.log("found best %d after %d probes",Math.round(1e4*fe.d)/1e4,Ae)),fe.max-ae.d<=l||(E=fe.h/2,O.push(new hn(fe.p.x-E,fe.p.y-E,E,h)),O.push(new hn(fe.p.x+E,fe.p.y-E,E,h)),O.push(new hn(fe.p.x-E,fe.p.y+E,E,h)),O.push(new hn(fe.p.x+E,fe.p.y+E,E,h)),Ae+=4)}return A&&(console.log(`num probes: ${Ae}`),console.log(`best distance: ${ae.d}`)),ae.p}function qt(h,l){return l.max-h.max}function hn(h,l,A,y){this.p=new c(h,l),this.h=A,this.d=(function(_,E){let O=!1,D=1/0;for(let F=0;F<E.length;F++){const W=E[F];for(let ee=0,ae=W.length,Ae=ae-1;ee<ae;Ae=ee++){const fe=W[ee],be=W[Ae];fe.y>_.y!=be.y>_.y&&_.x<(be.x-fe.x)*(_.y-fe.y)/(be.y-fe.y)+fe.x&&(O=!O),D=Math.min(D,Aa(_,fe,be))}}return(O?1:-1)*Math.sqrt(D)})(this.p,y),this.max=this.d+this.h*Math.SQRT2}var gi;s.aQ=void 0,(gi=s.aQ||(s.aQ={}))[gi.center=1]="center",gi[gi.left=2]="left",gi[gi.right=3]="right",gi[gi.top=4]="top",gi[gi.bottom=5]="bottom",gi[gi["top-left"]=6]="top-left",gi[gi["top-right"]=7]="top-right",gi[gi["bottom-left"]=8]="bottom-left",gi[gi["bottom-right"]=9]="bottom-right";const vo=Number.POSITIVE_INFINITY;function zi(h,l){return l[1]!==vo?(function(A,y,_){let E=0,O=0;switch(y=Math.abs(y),_=Math.abs(_),A){case"top-right":case"top-left":case"top":O=_-7;break;case"bottom-right":case"bottom-left":case"bottom":O=7-_}switch(A){case"top-right":case"bottom-right":case"right":E=-y;break;case"top-left":case"bottom-left":case"left":E=y}return[E,O]})(h,l[0],l[1]):(function(A,y){let _=0,E=0;y<0&&(y=0);const O=y/Math.SQRT2;switch(A){case"top-right":case"top-left":E=O-7;break;case"bottom-right":case"bottom-left":E=7-O;break;case"bottom":E=7-y;break;case"top":E=y-7}switch(A){case"top-right":case"bottom-right":_=-O;break;case"top-left":case"bottom-left":_=O;break;case"left":_=y;break;case"right":_=-y}return[_,E]})(h,l[0])}function Br(h,l,A){var y;const _=h.layout,E=(y=_.get("text-variable-anchor-offset"))===null||y===void 0?void 0:y.evaluate(l,{},A);if(E){const D=E.values,F=[];for(let W=0;W<D.length;W+=2){const ee=F[W]=D[W],ae=D[W+1].map((Ae=>Ae*Io));ee.startsWith("top")?ae[1]-=7:ee.startsWith("bottom")&&(ae[1]+=7),F[W+1]=ae}return new go(F)}const O=_.get("text-variable-anchor");if(O){let D;D=h._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[_.get("text-radial-offset").evaluate(l,{},A)*Io,vo]:_.get("text-offset").evaluate(l,{},A).map((W=>W*Io));const F=[];for(const W of O)F.push(W,zi(W,D));return new go(F)}return null}function Hr(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ko(h,l,A,y,_,E,O,D,F,W,ee,ae){let Ae=E.textMaxSize.evaluate(l,{});Ae===void 0&&(Ae=O);const fe=h.layers[0].layout,be=fe.get("icon-offset").evaluate(l,{},ee),we=O_(A.horizontal),Be=O/24,ze=h.tilePixelRatio*Be,at=h.tilePixelRatio*Ae/24,We=h.tilePixelRatio*D,Xe=h.tilePixelRatio*fe.get("symbol-spacing"),ct=fe.get("text-padding")*h.tilePixelRatio,pt=(function(Zn,li,$n,Pi=1){const bo=Zn.get("icon-padding").evaluate(li,{},$n),Nr=bo&&bo.values;return[Nr[0]*Pi,Nr[1]*Pi,Nr[2]*Pi,Nr[3]*Pi]})(fe,l,ee,h.tilePixelRatio),Nt=fe.get("text-max-angle")/180*Math.PI,sn=fe.get("text-rotation-alignment")!=="viewport"&&fe.get("symbol-placement")!=="point",nn=fe.get("icon-rotation-alignment")==="map"&&fe.get("symbol-placement")!=="point",fn=fe.get("symbol-placement"),Kn=Xe/2,yn=fe.get("icon-text-fit");let on;y&&yn!=="none"&&(h.allowVerticalPlacement&&A.vertical&&(on=i1(y,A.vertical,yn,fe.get("icon-text-fit-padding"),be,Be)),we&&(y=i1(y,we,yn,fe.get("icon-text-fit-padding"),be,Be)));const Yt=ee?ae.line.getGranularityForZoomLevel(ee.z):1,ii=(Zn,li)=>{li.x<0||li.x>=mt||li.y<0||li.y>=mt||(function($n,Pi,bo,Nr,fa,Fc,jl,pa,ea,Vo,Wa,rl,qs,xh,zc,Mh,op,Ru,ka,Nl,Qa,Pu,m1,dm,A3){const Gy=$n.addToLineVertexArray(Pi,bo);let Lb,I_,T_,k_,AF=0,hF=0,dF=0,fF=0,mO=-1,gO=-1;const g1={};let pF=es("");if($n.allowVerticalPlacement&&Nr.vertical){const hA=pa.layout.get("text-rotate").evaluate(Qa,{},dm)+90;T_=new zo(ea,Pi,Vo,Wa,rl,Nr.vertical,qs,xh,zc,hA),jl&&(k_=new zo(ea,Pi,Vo,Wa,rl,jl,op,Ru,zc,hA))}if(fa){const hA=pa.layout.get("icon-rotate").evaluate(Qa,{}),af=pa.layout.get("icon-text-fit")!=="none",Ub=gn(fa,hA,m1,af),pm=jl?gn(jl,hA,m1,af):void 0;I_=new zo(ea,Pi,Vo,Wa,rl,fa,op,Ru,!1,hA),AF=4*Ub.length;const Kb=$n.iconSizeData;let W0=null;Kb.kind==="source"?(W0=[bh*pa.layout.get("icon-size").evaluate(Qa,{})],W0[0]>oc&&Mt(`${$n.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Kb.kind==="composite"&&(W0=[bh*Pu.compositeIconSizes[0].evaluate(Qa,{},dm),bh*Pu.compositeIconSizes[1].evaluate(Qa,{},dm)],(W0[0]>oc||W0[1]>oc)&&Mt(`${$n.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),$n.addSymbols($n.icon,Ub,W0,Nl,ka,Qa,s.aA.none,Pi,Gy.lineStartIndex,Gy.lineLength,-1,dm),mO=$n.icon.placedSymbolArray.length-1,pm&&(hF=4*pm.length,$n.addSymbols($n.icon,pm,W0,Nl,ka,Qa,s.aA.vertical,Pi,Gy.lineStartIndex,Gy.lineLength,-1,dm),gO=$n.icon.placedSymbolArray.length-1)}const mF=Object.keys(Nr.horizontal);for(const hA of mF){const af=Nr.horizontal[hA];if(!Lb){pF=es(af.text);const pm=pa.layout.get("text-rotate").evaluate(Qa,{},dm);Lb=new zo(ea,Pi,Vo,Wa,rl,af,qs,xh,zc,pm)}const Ub=af.positionedLines.length===1;if(dF+=sf($n,Pi,af,Fc,pa,zc,Qa,Mh,Gy,Nr.vertical?s.aA.horizontal:s.aA.horizontalOnly,Ub?mF:[hA],g1,mO,Pu,dm),Ub)break}Nr.vertical&&(fF+=sf($n,Pi,Nr.vertical,Fc,pa,zc,Qa,Mh,Gy,s.aA.vertical,["vertical"],g1,gO,Pu,dm));const sae=Lb?Lb.boxStartIndex:$n.collisionBoxArray.length,aae=Lb?Lb.boxEndIndex:$n.collisionBoxArray.length,lae=T_?T_.boxStartIndex:$n.collisionBoxArray.length,uae=T_?T_.boxEndIndex:$n.collisionBoxArray.length,cae=I_?I_.boxStartIndex:$n.collisionBoxArray.length,Aae=I_?I_.boxEndIndex:$n.collisionBoxArray.length,hae=k_?k_.boxStartIndex:$n.collisionBoxArray.length,dae=k_?k_.boxEndIndex:$n.collisionBoxArray.length;let fm=-1;const GM=(hA,af)=>hA&&hA.circleDiameter?Math.max(hA.circleDiameter,af):af;fm=GM(Lb,fm),fm=GM(T_,fm),fm=GM(I_,fm),fm=GM(k_,fm);const gF=fm>-1?1:0;gF&&(fm*=A3/Io),$n.glyphOffsetArray.length>=Fl.MAX_GLYPHS&&Mt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Qa.sortKey!==void 0&&$n.addToSortKeyRanges($n.symbolInstances.length,Qa.sortKey);const fae=Br(pa,Qa,dm),[pae,mae]=(function(hA,af){const Ub=hA.length,pm=af?.values;if(pm?.length>0)for(let Kb=0;Kb<pm.length;Kb+=2){const W0=pm[Kb+1];hA.emplaceBack(s.aQ[pm[Kb]],W0[0],W0[1])}return[Ub,hA.length]})($n.textAnchorOffsets,fae);$n.symbolInstances.emplaceBack(Pi.x,Pi.y,g1.right>=0?g1.right:-1,g1.center>=0?g1.center:-1,g1.left>=0?g1.left:-1,g1.vertical||-1,mO,gO,pF,sae,aae,lae,uae,cae,Aae,hae,dae,Vo,dF,fF,AF,hF,gF,0,qs,fm,pae,mae)})(h,li,Zn,A,y,_,on,h.layers[0],h.collisionBoxArray,l.index,l.sourceLayerIndex,h.index,ze,[ct,ct,ct,ct],sn,F,We,pt,nn,be,l,E,W,ee,O)};if(fn==="line")for(const Zn of Pb(l.geometry,0,0,mt,mt)){const li=oA(Zn,Yt),$n=$t(li,Xe,Nt,A.vertical||we,y,24,at,h.overscaling,mt);for(const Pi of $n)we&&pO(h,we.text,Kn,Pi)||ii(li,Pi)}else if(fn==="line-center"){for(const Zn of l.geometry)if(Zn.length>1){const li=oA(Zn,Yt),$n=_t(li,Nt,A.vertical||we,y,24,at);$n&&ii(li,$n)}}else if(l.type==="Polygon")for(const Zn of Tf(l.geometry,0)){const li=It(Zn,16);ii(oA(Zn[0],Yt,!0),new T(li.x,li.y,0))}else if(l.type==="LineString")for(const Zn of l.geometry){const li=oA(Zn,Yt);ii(li,new T(li[0].x,li[0].y,0))}else if(l.type==="Point")for(const Zn of l.geometry)for(const li of Zn)ii([li],new T(li.x,li.y,0))}function sf(h,l,A,y,_,E,O,D,F,W,ee,ae,Ae,fe,be){const we=(function(at,We,Xe,ct,pt,Nt,sn,nn){const fn=ct.layout.get("text-rotate").evaluate(Nt,{})*Math.PI/180,Kn=[];for(const yn of We.positionedLines)for(const on of yn.positionedGlyphs){if(!on.rect)continue;const Yt=on.rect||{};let ii=4,Zn=!0,li=1,$n=0;const Pi=(pt||nn)&&on.vertical,bo=on.metrics.advance*on.scale/2;if(nn&&We.verticalizable&&($n=yn.lineOffset/2-(on.imageName?-(Io-on.metrics.width*on.scale)/2:(on.scale-1)*Io)),on.imageName){const Ru=sn[on.imageName];Zn=Ru.sdf,li=Ru.pixelRatio,ii=1/li}const Nr=pt?[on.x+bo,on.y]:[0,0];let fa=pt?[0,0]:[on.x+bo+Xe[0],on.y+Xe[1]-$n],Fc=[0,0];Pi&&(Fc=fa,fa=[0,0]);const jl=on.metrics.isDoubleResolution?2:1,pa=(on.metrics.left-ii)*on.scale-bo+fa[0],ea=(-on.metrics.top-ii)*on.scale+fa[1],Vo=pa+Yt.w/jl*on.scale/li,Wa=ea+Yt.h/jl*on.scale/li,rl=new c(pa,ea),qs=new c(Vo,ea),xh=new c(pa,Wa),zc=new c(Vo,Wa);if(Pi){const Ru=new c(-bo,bo- -17),ka=-Math.PI/2,Nl=12-bo,Qa=new c(22-Nl,-(on.imageName?Nl:0)),Pu=new c(...Fc);rl._rotateAround(ka,Ru)._add(Qa)._add(Pu),qs._rotateAround(ka,Ru)._add(Qa)._add(Pu),xh._rotateAround(ka,Ru)._add(Qa)._add(Pu),zc._rotateAround(ka,Ru)._add(Qa)._add(Pu)}if(fn){const Ru=Math.sin(fn),ka=Math.cos(fn),Nl=[ka,-Ru,Ru,ka];rl._matMult(Nl),qs._matMult(Nl),xh._matMult(Nl),zc._matMult(Nl)}const Mh=new c(0,0),op=new c(0,0);Kn.push({tl:rl,tr:qs,bl:xh,br:zc,tex:Yt,writingMode:We.writingMode,glyphOffset:Nr,sectionIndex:on.sectionIndex,isSDF:Zn,pixelOffsetTL:Mh,pixelOffsetBR:op,minFontScaleX:0,minFontScaleY:0})}return Kn})(0,A,D,_,E,O,y,h.allowVerticalPlacement),Be=h.textSizeData;let ze=null;Be.kind==="source"?(ze=[bh*_.layout.get("text-size").evaluate(O,{})],ze[0]>oc&&Mt(`${h.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Be.kind==="composite"&&(ze=[bh*fe.compositeTextSizes[0].evaluate(O,{},be),bh*fe.compositeTextSizes[1].evaluate(O,{},be)],(ze[0]>oc||ze[1]>oc)&&Mt(`${h.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),h.addSymbols(h.text,we,ze,D,E,O,W,l,F.lineStartIndex,F.lineLength,Ae,be);for(const at of ee)ae[at]=h.text.placedSymbolArray.length-1;return 4*we.length}function O_(h){for(const l in h)return h[l];return null}function pO(h,l,A,y){const _=h.compareText;if(l in _){const E=_[l];for(let O=E.length-1;O>=0;O--)if(y.dist(E[O])<A)return!0}else _[l]=[];return _[l].push(y),!1}const jM=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class u3{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[A,y]=new Uint8Array(l,0,2);if(A!==219)throw new Error("Data does not appear to be in a KDBush format.");const _=y>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);const E=jM[15&y];if(!E)throw new Error("Unrecognized array type.");const[O]=new Uint16Array(l,2,1),[D]=new Uint32Array(l,4,1);return new u3(D,O,E,l)}constructor(l,A=64,y=Float64Array,_){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+A,2),65535),this.ArrayType=y,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;const E=jM.indexOf(this.ArrayType),O=2*l*this.ArrayType.BYTES_PER_ELEMENT,D=l*this.IndexArrayType.BYTES_PER_ELEMENT,F=(8-D%8)%8;if(E<0)throw new Error(`Unexpected typed array class: ${y}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+D+F,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+O+D+F),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+D+F,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+E]),new Uint16Array(this.data,2,1)[0]=A,new Uint32Array(this.data,4,1)[0]=l)}add(l,A){const y=this._pos>>1;return this.ids[y]=y,this.coords[this._pos++]=l,this.coords[this._pos++]=A,y}finish(){const l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return c3(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,A,y,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:E,coords:O,nodeSize:D}=this,F=[0,E.length-1,0],W=[];for(;F.length;){const ee=F.pop()||0,ae=F.pop()||0,Ae=F.pop()||0;if(ae-Ae<=D){for(let Be=Ae;Be<=ae;Be++){const ze=O[2*Be],at=O[2*Be+1];ze>=l&&ze<=y&&at>=A&&at<=_&&W.push(E[Be])}continue}const fe=Ae+ae>>1,be=O[2*fe],we=O[2*fe+1];be>=l&&be<=y&&we>=A&&we<=_&&W.push(E[fe]),(ee===0?l<=be:A<=we)&&(F.push(Ae),F.push(fe-1),F.push(1-ee)),(ee===0?y>=be:_>=we)&&(F.push(fe+1),F.push(ae),F.push(1-ee))}return W}within(l,A,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:E,nodeSize:O}=this,D=[0,_.length-1,0],F=[],W=y*y;for(;D.length;){const ee=D.pop()||0,ae=D.pop()||0,Ae=D.pop()||0;if(ae-Ae<=O){for(let Be=Ae;Be<=ae;Be++)Y(E[2*Be],E[2*Be+1],l,A)<=W&&F.push(_[Be]);continue}const fe=Ae+ae>>1,be=E[2*fe],we=E[2*fe+1];Y(be,we,l,A)<=W&&F.push(_[fe]),(ee===0?l-y<=be:A-y<=we)&&(D.push(Ae),D.push(fe-1),D.push(1-ee)),(ee===0?l+y>=be:A+y>=we)&&(D.push(fe+1),D.push(ae),D.push(1-ee))}return F}}function c3(h,l,A,y,_,E){if(_-y<=A)return;const O=y+_>>1;NM(h,l,O,y,_,E),c3(h,l,A,y,O-1,1-E),c3(h,l,A,O+1,_,1-E)}function NM(h,l,A,y,_,E){for(;_>y;){if(_-y>600){const W=_-y+1,ee=A-y+1,ae=Math.log(W),Ae=.5*Math.exp(2*ae/3),fe=.5*Math.sqrt(ae*Ae*(W-Ae)/W)*(ee-W/2<0?-1:1);NM(h,l,A,Math.max(y,Math.floor(A-ee*Ae/W+fe)),Math.min(_,Math.floor(A+(W-ee)*Ae/W+fe)),E)}const O=l[2*A+E];let D=y,F=_;for(w(h,l,y,A),l[2*_+E]>O&&w(h,l,y,_);D<F;){for(w(h,l,D,F),D++,F--;l[2*D+E]<O;)D++;for(;l[2*F+E]>O;)F--}l[2*y+E]===O?w(h,l,y,F):(F++,w(h,l,F,_)),F<=A&&(y=F+1),A<=F&&(_=F-1)}}function w(h,l,A,y){R(h,A,y),R(l,2*A,2*y),R(l,2*A+1,2*y+1)}function R(h,l,A){const y=h[l];h[l]=h[A],h[A]=y}function Y(h,l,A,y){const _=h-A,E=l-y;return _*_+E*E}var de;s.cI=void 0,(de=s.cI||(s.cI={})).create="create",de.load="load",de.fullLoad="fullLoad";let Pe=null,et=[];const gt=1e3/60,Bt="loadTime",Lt="fullLoadTime",wn={mark(h){performance.mark(h)},frame(h){const l=h;Pe!=null&&et.push(l-Pe),Pe=l},clearMetrics(){Pe=null,et=[],performance.clearMeasures(Bt),performance.clearMeasures(Lt);for(const h in s.cI)performance.clearMarks(s.cI[h])},getPerformanceMetrics(){performance.measure(Bt,s.cI.create,s.cI.load),performance.measure(Lt,s.cI.create,s.cI.fullLoad);const h=performance.getEntriesByName(Bt)[0].duration,l=performance.getEntriesByName(Lt)[0].duration,A=et.length,y=1/(et.reduce(((E,O)=>E+O),0)/A/1e3),_=et.filter((E=>E>gt)).reduce(((E,O)=>E+(O-gt)/gt),0);return{loadTime:h,fullLoadTime:l,fps:y,percentDroppedFrames:_/(A+_)*100,totalFrames:A}}};s.$=z,s.A=X,s.B=Gp,s.C=Sc,s.D=di,s.E=Cn,s.F=function([h,l,A]){return l+=90,l*=Math.PI/180,A*=Math.PI/180,{x:h*Math.cos(l)*Math.sin(A),y:h*Math.sin(l)*Math.sin(A),z:h*Math.cos(A)}},s.G=yo,s.H=zr,s.I=nm,s.J=Np,s.K=function(h){if(en==null){const l=h.navigator?h.navigator.userAgent:null;en=!!h.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return en},s.L=class{constructor(h,l){this.target=h,this.mapId=l,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new h_((()=>this.process())),this.subscription=Tn(this.target,"message",(A=>this.receive(A)),!1),this.globalScope=Dt(self)?h:window}registerMessageHandler(h,l){this.messageHandlers[h]=l}unregisterMessageHandler(h){delete this.messageHandlers[h]}sendAsync(h,l){return new Promise(((A,y)=>{const _=Math.round(1e18*Math.random()).toString(36).substring(0,10),E=l?Tn(l.signal,"abort",(()=>{E?.unsubscribe(),delete this.resolveRejects[_];const F={id:_,type:"<cancel>",origin:location.origin,targetMapId:h.targetMapId,sourceMapId:this.mapId};this.target.postMessage(F)}),no):null;this.resolveRejects[_]={resolve:F=>{E?.unsubscribe(),A(F)},reject:F=>{E?.unsubscribe(),y(F)}};const O=[],D=Object.assign(Object.assign({},h),{id:_,sourceMapId:this.mapId,origin:location.origin,data:$h(h.data,O)});this.target.postMessage(D,{transfer:O})}))}receive(h){const l=h.data,A=l.id;if(!(l.origin!=="file://"&&location.origin!=="file://"&&l.origin!=="resource://android"&&location.origin!=="resource://android"&&l.origin!==location.origin||l.targetMapId&&this.mapId!==l.targetMapId)){if(l.type==="<cancel>"){delete this.tasks[A];const y=this.abortControllers[A];return delete this.abortControllers[A],void(y&&y.abort())}if(Dt(self)||l.mustQueue)return this.tasks[A]=l,this.taskQueue.push(A),void this.invoker.trigger();this.processTask(A,l)}}process(){if(this.taskQueue.length===0)return;const h=this.taskQueue.shift(),l=this.tasks[h];delete this.tasks[h],this.taskQueue.length>0&&this.invoker.trigger(),l&&this.processTask(h,l)}processTask(h,l){return a(this,void 0,void 0,(function*(){if(l.type==="<response>"){const _=this.resolveRejects[h];return delete this.resolveRejects[h],_?void(l.error?_.reject(Hh(l.error)):_.resolve(Hh(l.data))):void 0}if(!this.messageHandlers[l.type])return void this.completeTask(h,new Error(`Could not find a registered handler for ${l.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const A=Hh(l.data),y=new AbortController;this.abortControllers[h]=y;try{const _=yield this.messageHandlers[l.type](l.sourceMapId,A,y);this.completeTask(h,null,_)}catch(_){this.completeTask(h,_)}}))}completeTask(h,l,A){const y=[];delete this.abortControllers[h];const _={id:h,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:l?$h(l):null,data:$h(A,y)};this.target.postMessage(_,{transfer:y})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},s.M=Qe,s.N=function(){var h=new X(16);return X!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},s.O=function(h,l,A){var y,_,E,O,D,F,W,ee,ae,Ae,fe,be,we=A[0],Be=A[1],ze=A[2];return l===h?(h[12]=l[0]*we+l[4]*Be+l[8]*ze+l[12],h[13]=l[1]*we+l[5]*Be+l[9]*ze+l[13],h[14]=l[2]*we+l[6]*Be+l[10]*ze+l[14],h[15]=l[3]*we+l[7]*Be+l[11]*ze+l[15]):(_=l[1],E=l[2],O=l[3],D=l[4],F=l[5],W=l[6],ee=l[7],ae=l[8],Ae=l[9],fe=l[10],be=l[11],h[0]=y=l[0],h[1]=_,h[2]=E,h[3]=O,h[4]=D,h[5]=F,h[6]=W,h[7]=ee,h[8]=ae,h[9]=Ae,h[10]=fe,h[11]=be,h[12]=y*we+D*Be+ae*ze+l[12],h[13]=_*we+F*Be+Ae*ze+l[13],h[14]=E*we+W*Be+fe*ze+l[14],h[15]=O*we+ee*Be+be*ze+l[15]),h},s.P=c,s.Q=function(h,l,A){var y=A[0],_=A[1],E=A[2];return h[0]=l[0]*y,h[1]=l[1]*y,h[2]=l[2]*y,h[3]=l[3]*y,h[4]=l[4]*_,h[5]=l[5]*_,h[6]=l[6]*_,h[7]=l[7]*_,h[8]=l[8]*E,h[9]=l[9]*E,h[10]=l[10]*E,h[11]=l[11]*E,h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15],h},s.R=Xs,s.S=function(h,l,A){var y=l[0],_=l[1],E=l[2],O=l[3],D=l[4],F=l[5],W=l[6],ee=l[7],ae=l[8],Ae=l[9],fe=l[10],be=l[11],we=l[12],Be=l[13],ze=l[14],at=l[15],We=A[0],Xe=A[1],ct=A[2],pt=A[3];return h[0]=We*y+Xe*D+ct*ae+pt*we,h[1]=We*_+Xe*F+ct*Ae+pt*Be,h[2]=We*E+Xe*W+ct*fe+pt*ze,h[3]=We*O+Xe*ee+ct*be+pt*at,h[4]=(We=A[4])*y+(Xe=A[5])*D+(ct=A[6])*ae+(pt=A[7])*we,h[5]=We*_+Xe*F+ct*Ae+pt*Be,h[6]=We*E+Xe*W+ct*fe+pt*ze,h[7]=We*O+Xe*ee+ct*be+pt*at,h[8]=(We=A[8])*y+(Xe=A[9])*D+(ct=A[10])*ae+(pt=A[11])*we,h[9]=We*_+Xe*F+ct*Ae+pt*Be,h[10]=We*E+Xe*W+ct*fe+pt*ze,h[11]=We*O+Xe*ee+ct*be+pt*at,h[12]=(We=A[12])*y+(Xe=A[13])*D+(ct=A[14])*ae+(pt=A[15])*we,h[13]=We*_+Xe*F+ct*Ae+pt*Be,h[14]=We*E+Xe*W+ct*fe+pt*ze,h[15]=We*O+Xe*ee+ct*be+pt*at,h},s.T=ns,s.U=function(h,l){const A={};for(let y=0;y<l.length;y++){const _=l[y];_ in h&&(A[_]=h[_])}return A},s.V=_h,s.W=Ut,s.X=Kc,s.Y=wy,s.Z=he,s._=a,s.a=Q,s.a$=da,s.a0=V,s.a1=Si,s.a2=ac,s.a3=l1,s.a4=vs,s.a5=mt,s.a6=function(h,l,A){if(!h)return l||{};if(!l)return h||{};const y=R0(h),_=R0(l);(function(O,D){D.removeAll&&(O.add.clear(),O.update.clear(),O.remove.clear(),D.remove.clear());for(const F of D.remove)O.add.delete(F),O.update.delete(F);for(const[F,W]of D.update){const ee=O.update.get(F);ee&&(D.update.set(F,vb(ee,W)),O.update.delete(F))}})(y,_);const E={};if((y.removeAll||_.removeAll)&&(E.removeAll=!0),E.remove=new Set([...y.remove,..._.remove]),E.add=new Map([...y.add,..._.add]),E.update=new Map([...y.update,..._.update]),E.remove.size&&E.add.size)for(const O of E.add.keys())E.remove.delete(O);return(function(O){const D={};return O.removeAll&&(D.removeAll=O.removeAll),O.remove&&(D.remove=Array.from(O.remove)),O.add&&(D.add=Array.from(O.add.values())),O.update&&(D.update=Array.from(O.update.values())),D})(E)},s.a7=function(h,l){if(h==null||h.type==null)return!0;if(h.type==="Feature")return u1(h,l)!=null;if(h.type==="FeatureCollection"){const A=new Set;for(const y of h.features){const _=u1(y,l);if(_==null||A.has(_))return!1;A.add(_)}return!0}return!1},s.a8=function(h,l){const A=new Map;if(!(h==null||h.type==null))if(h.type==="Feature")A.set(u1(h,l),h);else for(const y of h.features)A.set(u1(y,l),y);return A},s.a9=function(h,l,A){var y,_;if(l.removeAll)h.clear();else if(l.remove)for(const E of l.remove)h.delete(E);if(l.add)for(const E of l.add){const O=u1(E,A);O!=null&&h.set(O,E)}if(l.update)for(const E of l.update){let O=h.get(E.id);if(!O)continue;const D=!!E.newGeometry,F=E.removeAllProperties||((y=E.removeProperties)===null||y===void 0?void 0:y.length)>0||((_=E.addOrUpdateProperties)===null||_===void 0?void 0:_.length)>0;if((D||F)&&(O=Object.assign({},O),h.set(E.id,O),D&&(O.geometry=E.newGeometry),F)){if(O.properties=E.removeAllProperties?{}:Object.assign({},O.properties||{}),E.removeProperties)for(const W of E.removeProperties)delete O.properties[W];if(E.addOrUpdateProperties)for(const{key:W,value:ee}of E.addOrUpdateProperties)O.properties[W]=ee}}},s.aB=function(h,{uSize:l,uSizeT:A},{lowerSize:y,upperSize:_}){return h.kind==="source"?y/bh:h.kind==="composite"?yo.number(y/bh,_/bh,A):l},s.aC=function(h,l){var A=l[0],y=l[1],_=l[2],E=l[3],O=l[4],D=l[5],F=l[6],W=l[7],ee=l[8],ae=l[9],Ae=l[10],fe=l[11],be=l[12],we=l[13],Be=l[14],ze=l[15],at=A*D-y*O,We=A*F-_*O,Xe=A*W-E*O,ct=y*F-_*D,pt=y*W-E*D,Nt=_*W-E*F,sn=ee*we-ae*be,nn=ee*Be-Ae*be,fn=ee*ze-fe*be,Kn=ae*Be-Ae*we,yn=ae*ze-fe*we,on=Ae*ze-fe*Be,Yt=at*on-We*yn+Xe*Kn+ct*fn-pt*nn+Nt*sn;return Yt?(h[0]=(D*on-F*yn+W*Kn)*(Yt=1/Yt),h[1]=(_*yn-y*on-E*Kn)*Yt,h[2]=(we*Nt-Be*pt+ze*ct)*Yt,h[3]=(Ae*pt-ae*Nt-fe*ct)*Yt,h[4]=(F*fn-O*on-W*nn)*Yt,h[5]=(A*on-_*fn+E*nn)*Yt,h[6]=(Be*Xe-be*Nt-ze*We)*Yt,h[7]=(ee*Nt-Ae*Xe+fe*We)*Yt,h[8]=(O*yn-D*fn+W*sn)*Yt,h[9]=(y*fn-A*yn-E*sn)*Yt,h[10]=(be*pt-we*Xe+ze*at)*Yt,h[11]=(ae*Xe-ee*pt-fe*at)*Yt,h[12]=(D*nn-O*Kn-F*sn)*Yt,h[13]=(A*Kn-y*nn+_*sn)*Yt,h[14]=(we*We-be*ct-Be*at)*Yt,h[15]=(ee*ct-ae*We+Ae*at)*Yt,h):null},s.aD=Ye,s.aE=function(h){var l=h[0],A=h[1];return Math.sqrt(l*l+A*A)},s.aF=function(h){return h[0]=0,h[1]=0,h},s.aG=function(h,l,A){return h[0]=l[0]*A,h[1]=l[1]*A,h},s.aH=_y,s.aI=Te,s.aJ=function(h,l,A,y){const _=l.y-h.y,E=l.x-h.x,O=y.y-A.y,D=y.x-A.x,F=O*E-D*_;if(F===0)return null;const W=(D*(h.y-A.y)-O*(h.x-A.x))/F;return new c(h.x+W*E,h.y+W*_)},s.aK=Pb,s.aL=m0,s.aM=function(h){let l=1/0,A=1/0,y=-1/0,_=-1/0;for(const E of h)l=Math.min(l,E.x),A=Math.min(A,E.y),y=Math.max(y,E.x),_=Math.max(_,E.y);return[l,A,y,_]},s.aN=Io,s.aO=Ue,s.aP=function(h,l,A,y,_=!1){if(!A[0]&&!A[1])return[0,0];const E=_?y==="map"?-h.bearingInRadians:0:y==="viewport"?h.bearingInRadians:0;if(E){const O=Math.sin(E),D=Math.cos(E);A=[A[0]*D-A[1]*O,A[0]*O+A[1]*D]}return[_?A[0]:Ue(l,A[0],h.zoom),_?A[1]:Ue(l,A[1],h.zoom)]},s.aR=rm,s.aS=Hr,s.aT=n1,s.aU=u3,s.aV=ki,s.aW=Pc,s.aX=me,s.aY=dn,s.aZ=Ft,s.a_=Bn,s.aa=hm,s.ab=D0,s.ac=AA,s.ad=25,s.ae=Sy,s.af=h=>{const l=window.document.createElement("video");return l.muted=!0,new Promise((A=>{l.onloadstart=()=>{A(l)};for(const y of h){const _=window.document.createElement("source");ot(y)||(l.crossOrigin="Anonymous"),_.src=y,l.appendChild(_)}}))},s.ag=un,s.ah=function(){return ke++},s.ai=u,s.aj=Fl,s.ak=Dl,s.al=mh,s.am=Ey,s.an=function(h){const l={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((A,y,_,E)=>{const O=_||E;return l[y]=!O||O.toLowerCase(),""})),l["max-age"]){const A=parseInt(l["max-age"],10);isNaN(A)?delete l["max-age"]:l["max-age"]=A}return l},s.ao=kt,s.ap=85.051129,s.aq=ti,s.ar=function(h){return Math.pow(2,h)},s.as=ie,s.at=k0,s.au=function(h){return Math.log(h)/Math.LN2},s.av=function(h){var l=h[0],A=h[1];return l*l+A*A},s.aw=function(h){if(!h.length)return new Set;const l=Math.max(...h.map((F=>F.canonical.z)));let A=1/0,y=-1/0,_=1/0,E=-1/0;const O=[];for(const F of h){const{x:W,y:ee,z:ae}=F.canonical,Ae=Math.pow(2,l-ae),fe=W*Ae,be=ee*Ae;O.push({id:F,x:fe,y:be}),fe<A&&(A=fe),fe>y&&(y=fe),be<_&&(_=be),be>E&&(E=be)}const D=new Set;for(const F of O)F.x!==A&&F.x!==y&&F.y!==_&&F.y!==E||D.add(F.id);return D},s.ax=function(h,l){const A=Math.abs(2*h.wrap)-+(h.wrap<0),y=Math.abs(2*l.wrap)-+(l.wrap<0);return h.overscaledZ-l.overscaledZ||y-A||l.canonical.y-h.canonical.y||l.canonical.x-h.canonical.x},s.ay=class{constructor(h,l){this.max=h,this.onRemove=l,this.reset()}reset(){for(const h in this.data)for(const l of this.data[h])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(h,l,A){const y=h.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const _={value:l,timeout:void 0};if(A!==void 0&&(_.timeout=setTimeout((()=>{this.remove(h,_)}),A)),this.data[y].push(_),this.order.push(y),this.order.length>this.max){const E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this}has(h){return h.wrapped().key in this.data}getAndRemove(h){return this.has(h)?this._getAndRemoveByKey(h.wrapped().key):null}_getAndRemoveByKey(h){const l=this.data[h].shift();return l.timeout&&clearTimeout(l.timeout),this.data[h].length===0&&delete this.data[h],this.order.splice(this.order.indexOf(h),1),l.value}getByKey(h){const l=this.data[h];return l?l[0].value:null}get(h){return this.has(h)?this.data[h.wrapped().key][0].value:null}remove(h,l){if(!this.has(h))return this;const A=h.wrapped().key,y=l===void 0?0:this.data[A].indexOf(l),_=this.data[A][y];return this.data[A].splice(y,1),_.timeout&&clearTimeout(_.timeout),this.data[A].length===0&&delete this.data[A],this.onRemove(_.value),this.order.splice(this.order.indexOf(A),1),this}setMaxSize(h){for(this.max=h;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(h){const l=[];for(const A in this.data)for(const y of this.data[A])h(y.value)||l.push(y);for(const A of l)this.remove(A.value.tileID,A)}},s.az=function(h,l){let A=0,y=0;if(h.kind==="constant")y=h.layoutSize;else if(h.kind!=="source"){const{interpolationType:_,minZoom:E,maxZoom:O}=h,D=_?kt(Xl.interpolationFactor(_,l,E,O),0,1):0;h.kind==="camera"?y=yo.number(h.minSize,h.maxSize,D):A=D}return{uSizeT:A,uSize:y}},s.b=Gn,s.b$=class extends fl{constructor(h,l){super(h,l),this.current=0}set(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}},s.b0=ve,s.b1=ce,s.b2=function(h){var l=new X(3);return l[0]=h[0],l[1]=h[1],l[2]=h[2],l},s.b3=function(h,l,A){return h[0]=l[0]-A[0],h[1]=l[1]-A[1],h[2]=l[2]-A[2],h},s.b4=function(h,l){var A=l[0],y=l[1],_=l[2],E=A*A+y*y+_*_;return E>0&&(E=1/Math.sqrt(E)),h[0]=l[0]*E,h[1]=l[1]*E,h[2]=l[2]*E,h},s.b5=ge,s.b6=function(h,l){return h[0]*l[0]+h[1]*l[1]+h[2]*l[2]},s.b7=function(h,l,A){return h[0]=l[0]*A[0],h[1]=l[1]*A[1],h[2]=l[2]*A[2],h[3]=l[3]*A[3],h},s.b8=q,s.b9=function(h,l,A){const y=l[0]*A[0]+l[1]*A[1]+l[2]*A[2];return y===0?null:(-(h[0]*A[0]+h[1]*A[1]+h[2]*A[2])-A[3])/y},s.bA=function(){return new Float64Array(3)},s.bB=function(h,l,A,y){return h[0]=l[0]+A[0]*y,h[1]=l[1]+A[1]*y,h[2]=l[2]+A[2]*y,h},s.bC=Ie,s.bD=function(h,l,A){var y=A[0],_=A[1],E=A[2],O=A[3],D=l[0],F=l[1],W=l[2],ee=_*W-E*F,ae=E*D-y*W,Ae=y*F-_*D;return h[0]=D+O*(ee+=ee)+_*(Ae+=Ae)-E*(ae+=ae),h[1]=F+O*ae+E*ee-y*Ae,h[2]=W+O*Ae+y*ae-_*ee,h},s.bE=function(h,l,A){const y=(function(F){var W=F[3],ee=F[4],ae=F[5],Ae=F[6],fe=F[7],be=F[8];return F[0]*(be*ee-ae*fe)+F[1]*(-be*W+ae*Ae)+F[2]*(fe*W-ee*Ae)})([h[0],h[1],h[2],l[0],l[1],l[2],A[0],A[1],A[2]]);if(y===0)return null;const _=ge([],[l[0],l[1],l[2]],[A[0],A[1],A[2]]),E=ge([],[A[0],A[1],A[2]],[h[0],h[1],h[2]]),O=ge([],[h[0],h[1],h[2]],[l[0],l[1],l[2]]),D=ve([],_,-h[3]);return ce(D,D,ve([],E,-l[3])),ce(D,D,ve([],O,-A[3])),ve(D,D,1/y),D},s.bF=s1,s.bG=function(){return new Float64Array(4)},s.bH=function(h,l,A,y){var _=[],E=[];return _[0]=l[0]-A[0],_[1]=l[1]-A[1],_[2]=l[2]-A[2],E[0]=_[0]*Math.cos(y)-_[1]*Math.sin(y),E[1]=_[0]*Math.sin(y)+_[1]*Math.cos(y),E[2]=_[2],h[0]=E[0]+A[0],h[1]=E[1]+A[1],h[2]=E[2]+A[2],h},s.bI=function(h,l,A,y){var _=[],E=[];return _[0]=l[0]-A[0],_[1]=l[1]-A[1],_[2]=l[2]-A[2],E[0]=_[0],E[1]=_[1]*Math.cos(y)-_[2]*Math.sin(y),E[2]=_[1]*Math.sin(y)+_[2]*Math.cos(y),h[0]=E[0]+A[0],h[1]=E[1]+A[1],h[2]=E[2]+A[2],h},s.bJ=function(h,l,A,y){var _=[],E=[];return _[0]=l[0]-A[0],_[1]=l[1]-A[1],_[2]=l[2]-A[2],E[0]=_[2]*Math.sin(y)+_[0]*Math.cos(y),E[1]=_[1],E[2]=_[2]*Math.cos(y)-_[0]*Math.sin(y),h[0]=E[0]+A[0],h[1]=E[1]+A[1],h[2]=E[2]+A[2],h},s.bK=function(h,l,A){var y=Math.sin(A),_=Math.cos(A),E=l[0],O=l[1],D=l[2],F=l[3],W=l[8],ee=l[9],ae=l[10],Ae=l[11];return l!==h&&(h[4]=l[4],h[5]=l[5],h[6]=l[6],h[7]=l[7],h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15]),h[0]=E*_-W*y,h[1]=O*_-ee*y,h[2]=D*_-ae*y,h[3]=F*_-Ae*y,h[8]=E*y+W*_,h[9]=O*y+ee*_,h[10]=D*y+ae*_,h[11]=F*y+Ae*_,h},s.bL=function(h,l){const A=De(h,360),y=De(l,360),_=y-A,E=y>A?_-360:_+360;return Math.abs(_)<Math.abs(E)?_:E},s.bM=function(h){return h[0]=0,h[1]=0,h[2]=0,h},s.bN=function(h,l,A,y){const _=Math.sqrt(h*h+l*l),E=Math.sqrt(A*A+y*y);h/=_,l/=_,A/=E,y/=E;const O=Math.acos(h*A+l*y);return-l*A+h*y>0?O:-O},s.bO=function(h,l){const A=De(h,2*Math.PI),y=De(l,2*Math.PI);return Math.min(Math.abs(A-y),Math.abs(A-y+2*Math.PI),Math.abs(A-y-2*Math.PI))},s.bP=function(){const h={},l=xt.$version;for(const A in xt.$root){const y=xt.$root[A];if(y.required){let _=null;_=A==="version"?l:y.type==="array"?[]:{},_!=null&&(h[A]=_)}}return h},s.bQ=vt,s.bR=hl,s.bS=function h(l,A){if(Array.isArray(l)){if(!Array.isArray(A)||l.length!==A.length)return!1;for(let y=0;y<l.length;y++)if(!h(l[y],A[y]))return!1;return!0}if(typeof l=="object"&&l!==null&&A!==null){if(typeof A!="object"||Object.keys(l).length!==Object.keys(A).length)return!1;for(const y in l)if(!h(l[y],A[y]))return!1;return!0}return l===A},s.bT=function(h){h=h.slice();const l=Object.create(null);for(let A=0;A<h.length;A++)l[h[A].id]=h[A];for(let A=0;A<h.length;A++)"ref"in h[A]&&(h[A]=Ki(h[A],l[h[A].ref]));return h},s.bU=function(h,l){if(h.type==="custom")return new Hf(h,l);switch(h.type){case"background":return new o1(h,l);case"circle":return new gh(h,l);case"color-relief":return new sy(h,l);case"fill":return new Vg(h,l);case"fill-extrusion":return new ha(h,l);case"heatmap":return new JC(h,l);case"hillshade":return new Hv(h,l);case"line":return new $f(h,l);case"raster":return new ou(h,l);case"symbol":return new T0(h,l)}},s.bV=h=>h.type==="raster",s.bW=bt,s.bX=function(h,l){if(!h)return[{command:"setStyle",args:[l]}];let A=[];try{if(!Wn(h.version,l.version))return[{command:"setStyle",args:[l]}];Wn(h.center,l.center)||A.push({command:"setCenter",args:[l.center]}),Wn(h.state,l.state)||A.push({command:"setGlobalState",args:[l.state]}),Wn(h.centerAltitude,l.centerAltitude)||A.push({command:"setCenterAltitude",args:[l.centerAltitude]}),Wn(h.zoom,l.zoom)||A.push({command:"setZoom",args:[l.zoom]}),Wn(h.bearing,l.bearing)||A.push({command:"setBearing",args:[l.bearing]}),Wn(h.pitch,l.pitch)||A.push({command:"setPitch",args:[l.pitch]}),Wn(h.roll,l.roll)||A.push({command:"setRoll",args:[l.roll]}),Wn(h.sprite,l.sprite)||A.push({command:"setSprite",args:[l.sprite]}),Wn(h.glyphs,l.glyphs)||A.push({command:"setGlyphs",args:[l.glyphs]}),Wn(h.transition,l.transition)||A.push({command:"setTransition",args:[l.transition]}),Wn(h.light,l.light)||A.push({command:"setLight",args:[l.light]}),Wn(h.terrain,l.terrain)||A.push({command:"setTerrain",args:[l.terrain]}),Wn(h.sky,l.sky)||A.push({command:"setSky",args:[l.sky]}),Wn(h.projection,l.projection)||A.push({command:"setProjection",args:[l.projection]});const y={},_=[];(function(O,D,F,W){let ee;for(ee in D=D||{},O=O||{})Object.prototype.hasOwnProperty.call(O,ee)&&(Object.prototype.hasOwnProperty.call(D,ee)||Wi(ee,F,W));for(ee in D)Object.prototype.hasOwnProperty.call(D,ee)&&(Object.prototype.hasOwnProperty.call(O,ee)?Wn(O[ee],D[ee])||(O[ee].type==="geojson"&&D[ee].type==="geojson"&&qi(O,D,ee)?Hn(F,{command:"setGeoJSONSourceData",args:[ee,D[ee].data]}):Ri(ee,D,F,W)):Qi(ee,D,F))})(h.sources,l.sources,_,y);const E=[];h.layers&&h.layers.forEach((O=>{"source"in O&&y[O.source]?A.push({command:"removeLayer",args:[O.id]}):E.push(O)})),A=A.concat(_),(function(O,D,F){D=D||[];const W=(O=O||[]).map(Er),ee=D.map(Er),ae=O.reduce(xo,{}),Ae=D.reduce(xo,{}),fe=W.slice(),be=Object.create(null);let we,Be,ze,at,We;for(let Xe=0,ct=0;Xe<W.length;Xe++)we=W[Xe],Object.prototype.hasOwnProperty.call(Ae,we)?ct++:(Hn(F,{command:"removeLayer",args:[we]}),fe.splice(fe.indexOf(we,ct),1));for(let Xe=0,ct=0;Xe<ee.length;Xe++)we=ee[ee.length-1-Xe],fe[fe.length-1-Xe]!==we&&(Object.prototype.hasOwnProperty.call(ae,we)?(Hn(F,{command:"removeLayer",args:[we]}),fe.splice(fe.lastIndexOf(we,fe.length-ct),1)):ct++,at=fe[fe.length-Xe],Hn(F,{command:"addLayer",args:[Ae[we],at]}),fe.splice(fe.length-Xe,0,we),be[we]=!0);for(let Xe=0;Xe<ee.length;Xe++)if(we=ee[Xe],Be=ae[we],ze=Ae[we],!be[we]&&!Wn(Be,ze))if(Wn(Be.source,ze.source)&&Wn(Be["source-layer"],ze["source-layer"])&&Wn(Be.type,ze.type)){for(We in Li(Be.layout,ze.layout,F,we,null,"setLayoutProperty"),Li(Be.paint,ze.paint,F,we,null,"setPaintProperty"),Wn(Be.filter,ze.filter)||Hn(F,{command:"setFilter",args:[we,ze.filter]}),Wn(Be.minzoom,ze.minzoom)&&Wn(Be.maxzoom,ze.maxzoom)||Hn(F,{command:"setLayerZoomRange",args:[we,ze.minzoom,ze.maxzoom]}),Be)Object.prototype.hasOwnProperty.call(Be,We)&&We!=="layout"&&We!=="paint"&&We!=="filter"&&We!=="metadata"&&We!=="minzoom"&&We!=="maxzoom"&&(We.indexOf("paint.")===0?Li(Be[We],ze[We],F,we,We.slice(6),"setPaintProperty"):Wn(Be[We],ze[We])||Hn(F,{command:"setLayerProperty",args:[we,We,ze[We]]}));for(We in ze)Object.prototype.hasOwnProperty.call(ze,We)&&!Object.prototype.hasOwnProperty.call(Be,We)&&We!=="layout"&&We!=="paint"&&We!=="filter"&&We!=="metadata"&&We!=="minzoom"&&We!=="maxzoom"&&(We.indexOf("paint.")===0?Li(Be[We],ze[We],F,we,We.slice(6),"setPaintProperty"):Wn(Be[We],ze[We])||Hn(F,{command:"setLayerProperty",args:[we,We,ze[We]]}))}else Hn(F,{command:"removeLayer",args:[we]}),at=fe[fe.lastIndexOf(we)+1],Hn(F,{command:"addLayer",args:[ze,at]})})(E,l.layers,A)}catch(y){console.warn("Unable to compute style diff:",y),A=[{command:"setStyle",args:[l]}]}return A},s.bY=function(h){const l=[],A=h.id;return A===void 0&&l.push({message:`layers.${A}: missing required property "id"`}),h.render===void 0&&l.push({message:`layers.${A}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&l.push({message:`layers.${A}: property "renderingMode" must be either "2d" or "3d"`}),l},s.bZ=Oe,s.b_=Ze,s.ba=xe,s.bb=function(h,l,A){return h[0]=l[0]*A,h[1]=l[1]*A,h[2]=l[2]*A,h[3]=l[3]*A,h},s.bc=function(h,l){return h[0]*l[0]+h[1]*l[1]+h[2]*l[2]+h[3]},s.bd=rs,s.be=Ta,s.bf=function(h,l,A,y,_){var E=1/Math.tan(l/2);if(h[0]=E/A,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=E,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,_!=null&&_!==1/0){var O=1/(y-_);h[10]=(_+y)*O,h[14]=2*_*y*O}else h[10]=-1,h[14]=-2*y;return h},s.bg=function(h){var l=new X(16);return l[0]=h[0],l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5],l[6]=h[6],l[7]=h[7],l[8]=h[8],l[9]=h[9],l[10]=h[10],l[11]=h[11],l[12]=h[12],l[13]=h[13],l[14]=h[14],l[15]=h[15],l},s.bh=function(h,l,A){var y=Math.sin(A),_=Math.cos(A),E=l[0],O=l[1],D=l[2],F=l[3],W=l[4],ee=l[5],ae=l[6],Ae=l[7];return l!==h&&(h[8]=l[8],h[9]=l[9],h[10]=l[10],h[11]=l[11],h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15]),h[0]=E*_+W*y,h[1]=O*_+ee*y,h[2]=D*_+ae*y,h[3]=F*_+Ae*y,h[4]=W*_-E*y,h[5]=ee*_-O*y,h[6]=ae*_-D*y,h[7]=Ae*_-F*y,h},s.bi=function(h,l,A){var y=Math.sin(A),_=Math.cos(A),E=l[4],O=l[5],D=l[6],F=l[7],W=l[8],ee=l[9],ae=l[10],Ae=l[11];return l!==h&&(h[0]=l[0],h[1]=l[1],h[2]=l[2],h[3]=l[3],h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15]),h[4]=E*_+W*y,h[5]=O*_+ee*y,h[6]=D*_+ae*y,h[7]=F*_+Ae*y,h[8]=W*_-E*y,h[9]=ee*_-O*y,h[10]=ae*_-D*y,h[11]=Ae*_-F*y,h},s.bj=function(){const h=new Float32Array(16);return ie(h),h},s.bk=function(){const h=new Float64Array(16);return ie(h),h},s.bl=function(){return new Float64Array(16)},s.bm=function(h,l,A){const y=new Float64Array(4);return Ie(y,h,l-90,A),y},s.bn=function(h,l,A,y){var _,E,O,D,F,W=l[0],ee=l[1],ae=l[2],Ae=l[3],fe=A[0],be=A[1],we=A[2],Be=A[3];return(E=W*fe+ee*be+ae*we+Ae*Be)<0&&(E=-E,fe=-fe,be=-be,we=-we,Be=-Be),1-E>Z?(_=Math.acos(E),O=Math.sin(_),D=Math.sin((1-y)*_)/O,F=Math.sin(y*_)/O):(D=1-y,F=y),h[0]=D*W+F*fe,h[1]=D*ee+F*be,h[2]=D*ae+F*we,h[3]=D*Ae+F*Be,h},s.bo=function(h){const l=new Float64Array(9);(function(E,O){var D=O[0],F=O[1],W=O[2],ee=O[3],ae=D+D,Ae=F+F,fe=W+W,be=D*ae,we=F*ae,Be=F*Ae,ze=W*ae,at=W*Ae,We=W*fe,Xe=ee*ae,ct=ee*Ae,pt=ee*fe;E[0]=1-Be-We,E[3]=we-pt,E[6]=ze+ct,E[1]=we+pt,E[4]=1-be-We,E[7]=at-Xe,E[2]=ze-ct,E[5]=at+Xe,E[8]=1-be-Be})(l,h);const A=Bn(-Math.asin(kt(l[2],-1,1)));let y,_;return Math.hypot(l[5],l[8])<.001?(y=0,_=-Bn(Math.atan2(l[3],l[4]))):(y=Bn(l[5]===0&&l[8]===0?0:Math.atan2(l[5],l[8])),_=Bn(l[1]===0&&l[0]===0?0:Math.atan2(l[1],l[0]))),{roll:y,pitch:A+90,bearing:_}},s.bp=function(h,l){return h.roll==l.roll&&h.pitch==l.pitch&&h.bearing==l.bearing},s.bq=Ji,s.br=Dc,s.bs=Zp,s.bt=is,s.bu=pl,s.bv=Ge,s.bw=Re,s.bx=Yr,s.by=function(h,l,A,y,_){return Ge(y,_,kt((h-l)/(A-l),0,1))},s.bz=De,s.c=Me,s.c$=class{constructor(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let h=performance.getEntriesByName(this._marks.measure);return h.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),h=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),h}},s.c0=iA,s.c1=class extends fl{constructor(h,l){super(h,l),this.current=h0}set(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let l=1;l<16;l++)if(h[l]!==this.current[l]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}},s.c2=Ou,s.c3=class extends fl{constructor(h,l){super(h,l),this.current=[0,0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))}},s.c4=class extends fl{constructor(h,l){super(h,l),this.current=[0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))}},s.c5=re,s.c6=function(h,l){var A=Math.sin(l),y=Math.cos(l);return h[0]=y,h[1]=A,h[2]=0,h[3]=-A,h[4]=y,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h},s.c7=function(h,l,A){var y=l[0],_=l[1],E=l[2];return h[0]=y*A[0]+_*A[3]+E*A[6],h[1]=y*A[1]+_*A[4]+E*A[7],h[2]=y*A[2]+_*A[5]+E*A[8],h},s.c8=function(h,l,A,y,_,E,O){var D=1/(l-A),F=1/(y-_),W=1/(E-O);return h[0]=-2*D,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*F,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*W,h[11]=0,h[12]=(l+A)*D,h[13]=(_+y)*F,h[14]=(O+E)*W,h[15]=1,h},s.c9=class extends fl{constructor(h,l){super(h,l),this.current=new Array}set(h){if(h!=this.current){this.current=h;const l=new Float32Array(4*h.length);for(let A=0;A<h.length;A++)l[4*A]=h[A].r,l[4*A+1]=h[A].g,l[4*A+2]=h[A].b,l[4*A+3]=h[A].a;this.gl.uniform4fv(this.location,l)}}},s.cA=function(h,l){return H[l]&&(h instanceof MouseEvent||h instanceof WheelEvent)},s.cB=function(h,l){return je[l]&&"touches"in h},s.cC=function(h){return je[h]||H[h]},s.cD=function(h,l,A){var y=l[0],_=l[1];return h[0]=A[0]*y+A[4]*_+A[12],h[1]=A[1]*y+A[5]*_+A[13],h},s.cE=function(h,l){const{x:A,y}=D0.fromLngLat(l);return!(h<0||h>25||y<0||y>=1||A<0||A>=1)},s.cF=function(h,l){return h[0]=l[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=l[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=l[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},s.cG=class extends Jh{},s.cH=wn,s.cJ=it,s.cK=function(h,l){Me.REGISTERED_PROTOCOLS[h]=l},s.cL=function(h){delete Me.REGISTERED_PROTOCOLS[h]},s.cM=function(h,l){const A={};for(let _=0;_<h.length;_++){const E=l&&l[h[_].id]||ah(h[_]);l&&(l[h[_].id]=E);let O=A[E];O||(O=A[E]=[]),O.push(h[_])}const y=[];for(const _ in A)y.push(A[_]);return y},s.cN=Fn,s.cO=P0,s.cP=Du,s.cQ=vy,s.cR=function(h){h.bucket.createArrays(),h.bucket.tilePixelRatio=mt/(512*h.bucket.overscaling),h.bucket.compareText={},h.bucket.iconsNeedLinear=!1;const l=h.bucket.layers[0],A=l.layout,y=l._unevaluatedLayout._values,_={layoutIconSize:y["icon-size"].possiblyEvaluate(new zr(h.bucket.zoom+1),h.canonical),layoutTextSize:y["text-size"].possiblyEvaluate(new zr(h.bucket.zoom+1),h.canonical),textMaxSize:y["text-size"].possiblyEvaluate(new zr(18))};if(h.bucket.textSizeData.kind==="composite"){const{minZoom:W,maxZoom:ee}=h.bucket.textSizeData;_.compositeTextSizes=[y["text-size"].possiblyEvaluate(new zr(W),h.canonical),y["text-size"].possiblyEvaluate(new zr(ee),h.canonical)]}if(h.bucket.iconSizeData.kind==="composite"){const{minZoom:W,maxZoom:ee}=h.bucket.iconSizeData;_.compositeIconSizes=[y["icon-size"].possiblyEvaluate(new zr(W),h.canonical),y["icon-size"].possiblyEvaluate(new zr(ee),h.canonical)]}const E=A.get("text-line-height")*Io,O=A.get("text-rotation-alignment")!=="viewport"&&A.get("symbol-placement")!=="point",D=A.get("text-keep-upright"),F=A.get("text-size");for(const W of h.bucket.features){const ee=A.get("text-font").evaluate(W,{},h.canonical).join(","),ae=F.evaluate(W,{},h.canonical),Ae=_.layoutTextSize.evaluate(W,{},h.canonical),fe=_.layoutIconSize.evaluate(W,{},h.canonical),be={horizontal:{},vertical:void 0},we=W.text;let Be,ze=[0,0];if(we){const Xe=we.toString(),ct=A.get("text-letter-spacing").evaluate(W,{},h.canonical)*Io,pt=Xu(Xe)?ct:0,Nt=A.get("text-anchor").evaluate(W,{},h.canonical),sn=Br(l,W,h.canonical);if(!sn){const yn=A.get("text-radial-offset").evaluate(W,{},h.canonical);ze=yn?zi(Nt,[yn*Io,vo]):A.get("text-offset").evaluate(W,{},h.canonical).map((on=>on*Io))}let nn=O?"center":A.get("text-justify").evaluate(W,{},h.canonical);const fn=A.get("symbol-placement")==="point"?A.get("text-max-width").evaluate(W,{},h.canonical)*Io:1/0,Kn=()=>{h.bucket.allowVerticalPlacement&&Ec(Xe)&&(be.vertical=To(we,h.glyphMap,h.glyphPositions,h.imagePositions,ee,fn,E,Nt,"left",pt,ze,s.aA.vertical,!0,Ae,ae))};if(!O&&sn){const yn=new Set;if(nn==="auto")for(let Yt=0;Yt<sn.values.length;Yt+=2)yn.add(Hr(sn.values[Yt]));else yn.add(nn);let on=!1;for(const Yt of yn)if(!be.horizontal[Yt])if(on)be.horizontal[Yt]=be.horizontal[0];else{const ii=To(we,h.glyphMap,h.glyphPositions,h.imagePositions,ee,fn,E,"center",Yt,pt,ze,s.aA.horizontal,!1,Ae,ae);ii&&(be.horizontal[Yt]=ii,on=ii.positionedLines.length===1)}Kn()}else{nn==="auto"&&(nn=Hr(Nt));const yn=To(we,h.glyphMap,h.glyphPositions,h.imagePositions,ee,fn,E,Nt,nn,pt,ze,s.aA.horizontal,!1,Ae,ae);yn&&(be.horizontal[nn]=yn),Kn(),Ec(Xe)&&O&&D&&(be.vertical=To(we,h.glyphMap,h.glyphPositions,h.imagePositions,ee,fn,E,Nt,nn,pt,ze,s.aA.vertical,!1,Ae,ae))}}let at=!1;if(W.icon&&W.icon.name){const Xe=h.imageMap[W.icon.name];Xe&&(Be=im(h.imagePositions[W.icon.name],A.get("icon-offset").evaluate(W,{},h.canonical),A.get("icon-anchor").evaluate(W,{},h.canonical)),at=!!Xe.sdf,h.bucket.sdfIcons===void 0?h.bucket.sdfIcons=at:h.bucket.sdfIcons!==at&&Mt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Xe.pixelRatio!==h.bucket.pixelRatio||A.get("icon-rotate").constantOr(1)!==0)&&(h.bucket.iconsNeedLinear=!0))}const We=O_(be.horizontal)||be.vertical;h.bucket.iconsInText=!!We&&We.iconsInText,(We||Be)&&ko(h.bucket,W,be,Be,h.imageMap,_,Ae,fe,ze,at,h.canonical,h.subdivisionGranularity)}h.showCollisionBoxes&&h.bucket.generateCollisionDebugBuffers()},s.cS=sA,s.cT=Fo,s.cU=em,s.cV=function(h){const l=new e1;return(function(A,y){for(const _ in A.layers)y.writeMessage(3,zy,A.layers[_])})(h,l),l.finish()},s.cW=function(h,l,A,y,_,E){let O=B_(h,l,A,_,0);return O=B_(O,l,y,E,1),O},s.cX=class{constructor(h){this.maxEntries=h,this.map=new Map}get(h){const l=this.map.get(h);return l!==void 0&&(this.map.delete(h),this.map.set(h,l)),l}set(h,l){if(this.map.has(h))this.map.delete(h);else if(this.map.size>=this.maxEntries){const A=this.map.keys().next().value;this.map.delete(A)}this.map.set(h,l)}clear(){this.map.clear()}},s.cY=Oo,s.cZ=e1,s.c_=Rb,s.ca=class extends fl{constructor(h,l){super(h,l),this.current=new Array}set(h){if(h!=this.current){this.current=h;const l=new Float32Array(h);this.gl.uniform1fv(this.location,l)}}},s.cb=class extends Vp{},s.cc=Xg,s.cd=class extends PA{},s.ce=Vv,s.cf=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},s.cg=Gg,s.ch=function(h,l,A){var y=l[0],_=l[1],E=l[2],O=A[3]*y+A[7]*_+A[11]*E+A[15];return h[0]=(A[0]*y+A[4]*_+A[8]*E+A[12])/(O=O||1),h[1]=(A[1]*y+A[5]*_+A[9]*E+A[13])/O,h[2]=(A[2]*y+A[6]*_+A[10]*E+A[14])/O,h},s.ci=class extends nc{},s.cj=class extends Ff{},s.ck=function(h,l){return h[0]===l[0]&&h[1]===l[1]&&h[2]===l[2]&&h[3]===l[3]&&h[4]===l[4]&&h[5]===l[5]&&h[6]===l[6]&&h[7]===l[7]&&h[8]===l[8]&&h[9]===l[9]&&h[10]===l[10]&&h[11]===l[11]&&h[12]===l[12]&&h[13]===l[13]&&h[14]===l[14]&&h[15]===l[15]},s.cl=function(h,l){var A=h[0],y=h[1],_=h[2],E=h[3],O=h[4],D=h[5],F=h[6],W=h[7],ee=h[8],ae=h[9],Ae=h[10],fe=h[11],be=h[12],we=h[13],Be=h[14],ze=h[15],at=l[0],We=l[1],Xe=l[2],ct=l[3],pt=l[4],Nt=l[5],sn=l[6],nn=l[7],fn=l[8],Kn=l[9],yn=l[10],on=l[11],Yt=l[12],ii=l[13],Zn=l[14],li=l[15];return Math.abs(A-at)<=Z*Math.max(1,Math.abs(A),Math.abs(at))&&Math.abs(y-We)<=Z*Math.max(1,Math.abs(y),Math.abs(We))&&Math.abs(_-Xe)<=Z*Math.max(1,Math.abs(_),Math.abs(Xe))&&Math.abs(E-ct)<=Z*Math.max(1,Math.abs(E),Math.abs(ct))&&Math.abs(O-pt)<=Z*Math.max(1,Math.abs(O),Math.abs(pt))&&Math.abs(D-Nt)<=Z*Math.max(1,Math.abs(D),Math.abs(Nt))&&Math.abs(F-sn)<=Z*Math.max(1,Math.abs(F),Math.abs(sn))&&Math.abs(W-nn)<=Z*Math.max(1,Math.abs(W),Math.abs(nn))&&Math.abs(ee-fn)<=Z*Math.max(1,Math.abs(ee),Math.abs(fn))&&Math.abs(ae-Kn)<=Z*Math.max(1,Math.abs(ae),Math.abs(Kn))&&Math.abs(Ae-yn)<=Z*Math.max(1,Math.abs(Ae),Math.abs(yn))&&Math.abs(fe-on)<=Z*Math.max(1,Math.abs(fe),Math.abs(on))&&Math.abs(be-Yt)<=Z*Math.max(1,Math.abs(be),Math.abs(Yt))&&Math.abs(we-ii)<=Z*Math.max(1,Math.abs(we),Math.abs(ii))&&Math.abs(Be-Zn)<=Z*Math.max(1,Math.abs(Be),Math.abs(Zn))&&Math.abs(ze-li)<=Z*Math.max(1,Math.abs(ze),Math.abs(li))},s.cm=function(h,l){return h[0]=l[0],h[1]=l[1],h[2]=l[2],h[3]=l[3],h[4]=l[4],h[5]=l[5],h[6]=l[6],h[7]=l[7],h[8]=l[8],h[9]=l[9],h[10]=l[10],h[11]=l[11],h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15],h},s.cn=h=>h.type==="symbol",s.co=h=>h.type==="circle",s.cp=h=>h.type==="heatmap",s.cq=h=>h.type==="line",s.cr=h=>h.type==="fill",s.cs=h=>h.type==="fill-extrusion",s.ct=h=>h.type==="hillshade",s.cu=h=>h.type==="color-relief",s.cv=h=>h.type==="background",s.cw=h=>h.type==="custom",s.cx=St,s.cy=function(h,l,A){const y=At(l.x-A.x,l.y-A.y),_=At(h.x-A.x,h.y-A.y),E=Math.atan2(y[0]*_[1]-y[1]*_[0],(function(O,D){return O[0]*D[0]+O[1]*D[1]})(y,_));return Bn(E)},s.cz=ut,s.d=ot,s.d0=function(h,l,A,y,_){return a(this,void 0,void 0,(function*(){if(V())try{return yield Si(h,l,A,y,_)}catch{}return(function(E,O,D,F,W){const ee=E.width,ae=E.height;Un&&Ln||(Un=new OffscreenCanvas(ee,ae),Ln=Un.getContext("2d",{willReadFrequently:!0})),Un.width=ee,Un.height=ae,Ln.drawImage(E,0,0,ee,ae);const Ae=Ln.getImageData(O,D,F,W);return Ln.clearRect(0,0,ee,ae),Ae.data})(h,l,A,y,_)}))},s.d1=Zv,s.d2=d,s.d3=class{constructor(h,l){this.layers={[hm]:this},this.name=hm,this.version=l?l.version:1,this.extent=l?l.extent:4096,this.length=h.length,this.features=h}feature(h){return new w_(this.features[h],this.extent)}},s.d4=zp,s.d5=Bc,s.e=Le,s.f=h=>a(void 0,void 0,void 0,(function*(){if(h.byteLength===0)return createImageBitmap(new ImageData(1,1));const l=new Blob([new Uint8Array(h)],{type:"image/png"});try{return createImageBitmap(l)}catch(A){throw new Error(`Could not load image because of ${A.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),s.g=Ne,s.h=h=>new Promise(((l,A)=>{const y=new Image;y.onload=()=>{l(y),URL.revokeObjectURL(y.src),y.onload=null,window.requestAnimationFrame((()=>{y.src=Nn}))},y.onerror=()=>A(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const _=new Blob([new Uint8Array(h)],{type:"image/png"});y.src=h.byteLength?URL.createObjectURL(_):Nn})),s.i=Dt,s.j=(h,l)=>$e(Le(h,{type:"json"}),l),s.k=bn,s.l=mn,s.m=$e,s.n=(h,l)=>$e(Le(h,{type:"arrayBuffer"}),l),s.o=function(h){return new e1(h).readFields(db,[])},s.p=yy,s.q=function(h){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(h))},s.r=ad,s.s=Tn,s.t=Hs,s.u=xt,s.v=Rf,s.w=Mt,s.x=hh,s.y=Pf,s.z=Zh})),r("worker",["./shared"],(function(s){class a{constructor(H,j){this.keyCache={},H&&this.replace(H,j)}replace(H,j){this._layerConfigs={},this._layers={},this.update(H,[],j)}update(H,j,Q){for(const Me of H){this._layerConfigs[Me.id]=Me;const Ne=this._layers[Me.id]=s.bU(Me,Q);Ne._featureFilter=s.ak(Ne.filter,Q),this.keyCache[Me.id]&&delete this.keyCache[Me.id]}for(const Me of j)delete this.keyCache[Me],delete this._layerConfigs[Me],delete this._layers[Me];this.familiesBySource={};const he=s.cM(Object.values(this._layerConfigs),this.keyCache);for(const Me of he){const Ne=Me.map((b=>this._layers[b.id])),Qe=Ne[0];if(Qe.visibility==="none")continue;const it=Qe.source||"";let vt=this.familiesBySource[it];vt||(vt=this.familiesBySource[it]={});const $e=Qe.sourceLayer||s.aa;let ot=vt[$e];ot||(ot=vt[$e]=[]),ot.push(Ne)}}}class c{constructor(H){const j={},Q=[];for(const Qe in H){const it=H[Qe],vt=j[Qe]={};for(const $e in it){const ot=it[+$e];if(!ot||ot.bitmap.width===0||ot.bitmap.height===0)continue;const b={x:0,y:0,w:ot.bitmap.width+2,h:ot.bitmap.height+2};Q.push(b),vt[$e]={rect:b,metrics:ot.metrics}}}const{w:he,h:Me}=s.p(Q),Ne=new s.r({width:he||1,height:Me||1});for(const Qe in H){const it=H[Qe];for(const vt in it){const $e=it[+vt];if(!$e||$e.bitmap.width===0||$e.bitmap.height===0)continue;const ot=j[Qe][vt].rect;s.r.copy($e.bitmap,Ne,{x:0,y:0},{x:ot.x+1,y:ot.y+1},$e.bitmap)}}this.image=Ne,this.positions=j}}s.cN("GlyphAtlas",c);class d{constructor(H){this.tileID=new s.a2(H.tileID.overscaledZ,H.tileID.wrap,H.tileID.canonical.z,H.tileID.canonical.x,H.tileID.canonical.y),this.uid=H.uid,this.zoom=H.zoom,this.pixelRatio=H.pixelRatio,this.tileSize=H.tileSize,this.source=H.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=H.showCollisionBoxes,this.collectResourceTiming=!!H.collectResourceTiming,this.returnDependencies=!!H.returnDependencies,this.promoteId=H.promoteId,this.inFlightDependencies=[]}parse(H,j,Q,he,Me){return s._(this,void 0,void 0,(function*(){this.status="parsing",this.data=H,this.collisionBoxArray=new s.ai;const Ne=new s.cO(Object.keys(H.layers).sort()),Qe=new s.cP(this.tileID,this.promoteId);Qe.bucketLayerIDs=[];const it={},vt={featureIndex:Qe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:Q,subdivisionGranularity:Me},$e=j.familiesBySource[this.source];for(const qi in $e){const Li=H.layers[qi];if(!Li)continue;Li.version===1&&s.w(`Vector tile source "${this.source}" layer "${qi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Er=Ne.encode(qi),xo=[];for(let un=0;un<Li.length;un++){const tr=Li.feature(un),Wo=Qe.getId(tr,qi);xo.push({feature:tr,id:Wo,index:un,sourceLayerIndex:Er})}for(const un of $e[qi]){const tr=un[0];tr.source!==this.source&&s.w(`layer.source = ${tr.source} does not equal this.source = ${this.source}`),tr.isHidden(this.zoom,!0)||(m(un,this.zoom,Q),(it[tr.id]=tr.createBucket({index:Qe.bucketLayerIDs.length,layers:un,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Er,sourceID:this.source})).populate(xo,vt,this.tileID.canonical),Qe.bucketLayerIDs.push(un.map((Wo=>Wo.id))))}}const ot=s.bZ(vt.glyphDependencies,(qi=>Object.keys(qi).map(Number)));this.inFlightDependencies.forEach((qi=>qi?.abort())),this.inFlightDependencies=[];let b=Promise.resolve({});if(Object.keys(ot).length){const qi=new AbortController;this.inFlightDependencies.push(qi),b=he.sendAsync({type:"GG",data:{stacks:ot,source:this.source,tileID:this.tileID,type:"glyphs"}},qi)}const Rt=Object.keys(vt.iconDependencies);let mn=Promise.resolve({});if(Rt.length){const qi=new AbortController;this.inFlightDependencies.push(qi),mn=he.sendAsync({type:"GI",data:{icons:Rt,source:this.source,tileID:this.tileID,type:"icons"}},qi)}const bn=Object.keys(vt.patternDependencies);let Cn=Promise.resolve({});if(bn.length){const qi=new AbortController;this.inFlightDependencies.push(qi),Cn=he.sendAsync({type:"GI",data:{icons:bn,source:this.source,tileID:this.tileID,type:"patterns"}},qi)}const xt=vt.dashDependencies;let Ci=Promise.resolve({});if(Object.keys(xt).length){const qi=new AbortController;this.inFlightDependencies.push(qi),Ci=he.sendAsync({type:"GDA",data:{dashes:xt}},qi)}const[Ki,Wn,Hn,Qi]=yield Promise.all([b,mn,Cn,Ci]),Wi=new c(Ki),Ri=new s.cQ(Wn,Hn);for(const qi in it){const Li=it[qi];Li instanceof s.aj?(m(Li.layers,this.zoom,Q),s.cR({bucket:Li,glyphMap:Ki,glyphPositions:Wi.positions,imageMap:Wn,imagePositions:Ri.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:vt.subdivisionGranularity})):Li.hasDependencies&&(Li instanceof s.cS||Li instanceof s.cT||Li instanceof s.cU)&&(m(Li.layers,this.zoom,Q),Li.addFeatures(vt,this.tileID.canonical,Ri.patternPositions,Qi))}return this.status="done",{buckets:Object.values(it).filter((qi=>!qi.isEmpty())),featureIndex:Qe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Wi.image,imageAtlas:Ri,dashPositions:Qi,glyphMap:this.returnDependencies?Ki:null,iconMap:this.returnDependencies?Wn:null,glyphPositions:this.returnDependencies?Wi.positions:null}}))}}function m(je,H,j){const Q=new s.H(H);for(const he of je)he.recalculate(Q,j)}class v{constructor(H,j,Q,he,Me){this.type=H,this.properties=Q||{},this.extent=Me,this.pointsArray=j,this.id=he}loadGeometry(){return this.pointsArray.map((H=>H.map((j=>new s.P(j.x,j.y)))))}}class M{constructor(H,j,Q){this.version=2,this._myFeatures=H,this.name=j,this.length=H.length,this.extent=Q}feature(H){return this._myFeatures[H]}}class B{constructor(){this.layers={}}addLayer(H){this.layers[H.name]=H}}function P(je){let H=s.cV(je);return H.byteOffset===0&&H.byteLength===H.buffer.byteLength||(H=new Uint8Array(H)),{vectorTile:je,rawData:H.buffer}}function U(je,H,j){const{extent:Q}=je,he=Math.pow(2,j.z-H.z),Me=(j.x-H.x*he)*Q,Ne=(j.y-H.y*he)*Q,Qe=[];for(let it=0;it<je.length;it++){const vt=je.feature(it);let $e=vt.loadGeometry();for(const b of $e)for(const Rt of b)Rt.x=Rt.x*he-Me,Rt.y=Rt.y*he-Ne;const ot=128;$e=s.cW($e,vt.type,-ot,-ot,Q+ot,Q+ot),$e.length!==0&&Qe.push(new v(vt.type,$e,vt.properties,vt.id,Q))}return new M(Qe,je.name,Q)}class z{constructor(H,j,Q){this.actor=H,this.layerIndex=j,this.availableImages=Q,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new s.cX(1e3)}loadVectorTile(H,j){return s._(this,void 0,void 0,(function*(){const Q=yield s.n(H.request,j);try{return{vectorTile:H.encoding!=="mlt"?new s.cY(new s.cZ(Q.data)):new s.c_(Q.data),rawData:Q.data,cacheControl:Q.cacheControl,expires:Q.expires}}catch(he){const Me=new Uint8Array(Q.data);let Ne=`Unable to parse the tile at ${H.request.url}, `;throw Ne+=Me[0]===31&&Me[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${he.message}`,new Error(Ne)}}))}loadTile(H){return s._(this,void 0,void 0,(function*(){const{uid:j,overzoomParameters:Q}=H;Q&&(H.request=Q.overzoomRequest);const he=!!(H&&H.request&&H.request.collectResourceTiming)&&new s.c$(H.request),Me=new d(H);this.loading[j]=Me;const Ne=new AbortController;Me.abort=Ne;try{const Qe=yield this.loadVectorTile(H,Ne);if(delete this.loading[j],!Qe)return null;if(Q){const b=this._getOverzoomTile(H,Qe.vectorTile);Qe.rawData=b.rawData,Qe.vectorTile=b.vectorTile}const it=Qe.rawData,vt={};Qe.expires&&(vt.expires=Qe.expires),Qe.cacheControl&&(vt.cacheControl=Qe.cacheControl);const $e={};if(he){const b=he.finish();b&&($e.resourceTiming=JSON.parse(JSON.stringify(b)))}Me.vectorTile=Qe.vectorTile;const ot=Me.parse(Qe.vectorTile,this.layerIndex,this.availableImages,this.actor,H.subdivisionGranularity);this.loaded[j]=Me,this.fetching[j]={rawTileData:it,cacheControl:vt,resourceTiming:$e};try{const b=yield ot;return s.e({rawTileData:it.slice(0),encoding:H.encoding},b,vt,$e)}finally{delete this.fetching[j]}}catch(Qe){throw delete this.loading[j],Me.status="done",this.loaded[j]=Me,Qe}}))}_getOverzoomTile(H,j){const{tileID:Q,source:he,overzoomParameters:Me}=H,{maxZoomTileID:Ne}=Me,Qe=`${Ne.key}_${Q.key}`,it=this.overzoomedTileResultCache.get(Qe);if(it)return it;const vt=new B,$e=this.layerIndex.familiesBySource[he];for(const b in $e){const Rt=j.layers[b];if(!Rt)continue;const mn=U(Rt,Ne,Q.canonical);mn.length>0&&vt.addLayer(mn)}const ot=P(vt);return this.overzoomedTileResultCache.set(Qe,ot),ot}reloadTile(H){return s._(this,void 0,void 0,(function*(){const j=H.uid;if(!this.loaded||!this.loaded[j])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Q=this.loaded[j];if(Q.showCollisionBoxes=H.showCollisionBoxes,Q.status==="parsing"){const he=yield Q.parse(Q.vectorTile,this.layerIndex,this.availableImages,this.actor,H.subdivisionGranularity);let Me;if(this.fetching[j]){const{rawTileData:Ne,cacheControl:Qe,resourceTiming:it}=this.fetching[j];delete this.fetching[j],Me=s.e({rawTileData:Ne.slice(0),encoding:H.encoding},he,Qe,it)}else Me=he;return Me}if(Q.status==="done"&&Q.vectorTile)return Q.parse(Q.vectorTile,this.layerIndex,this.availableImages,this.actor,H.subdivisionGranularity)}))}abortTile(H){return s._(this,void 0,void 0,(function*(){const j=this.loading,Q=H.uid;j&&j[Q]&&j[Q].abort&&(j[Q].abort.abort(),delete j[Q])}))}removeTile(H){return s._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[H.uid]&&delete this.loaded[H.uid]}))}}class V{constructor(){this.loaded={}}loadTile(H){return s._(this,void 0,void 0,(function*(){const{uid:j,encoding:Q,rawImageData:he,redFactor:Me,greenFactor:Ne,blueFactor:Qe,baseShift:it}=H,vt=he.width+2,$e=he.height+2,ot=s.b(he)?new s.R({width:vt,height:$e},yield s.d0(he,-1,-1,vt,$e)):he,b=new s.d1(j,ot,Q,Me,Ne,Qe,it);return this.loaded=this.loaded||{},this.loaded[j]=b,b}))}removeTile(H){const j=this.loaded,Q=H.uid;j&&j[Q]&&delete j[Q]}}var Z,X,re=(function(){if(X)return Z;function je(j,Q){if(j.length!==0){H(j[0],Q);for(var he=1;he<j.length;he++)H(j[he],!Q)}}function H(j,Q){for(var he=0,Me=0,Ne=0,Qe=j.length,it=Qe-1;Ne<Qe;it=Ne++){var vt=(j[Ne][0]-j[it][0])*(j[it][1]+j[Ne][1]),$e=he+vt;Me+=Math.abs(he)>=Math.abs(vt)?he-$e+vt:vt-$e+he,he=$e}he+Me>=0!=!!Q&&j.reverse()}return X=1,Z=function j(Q,he){var Me,Ne=Q&&Q.type;if(Ne==="FeatureCollection")for(Me=0;Me<Q.features.length;Me++)j(Q.features[Me],he);else if(Ne==="GeometryCollection")for(Me=0;Me<Q.geometries.length;Me++)j(Q.geometries[Me],he);else if(Ne==="Feature")j(Q.geometry,he);else if(Ne==="Polygon")je(Q.coordinates,he);else if(Ne==="MultiPolygon")for(Me=0;Me<Q.coordinates.length;Me++)je(Q.coordinates[Me],he);return Q}})(),ie=s.d2(re);const te={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:je=>je},q=Math.fround||(le=new Float32Array(1),je=>(le[0]=+je,le[0]));var le;class ce{constructor(H){this.options=Object.assign(Object.create(te),H),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(H){const{log:j,minZoom:Q,maxZoom:he}=this.options;j&&console.time("total time");const Me=`prepare ${H.length} points`;j&&console.time(Me),this.points=H;const Ne=[];for(let it=0;it<H.length;it++){const vt=H[it];if(!vt.geometry)continue;const[$e,ot]=vt.geometry.coordinates,b=q(Ee($e)),Rt=q(xe(ot));Ne.push(b,Rt,1/0,it,-1,1),this.options.reduce&&Ne.push(0)}let Qe=this.trees[he+1]=this._createTree(Ne);j&&console.timeEnd(Me);for(let it=he;it>=Q;it--){const vt=+Date.now();Qe=this.trees[it]=this._createTree(this._cluster(Qe,it)),j&&console.log("z%d: %d clusters in %dms",it,Qe.numItems,+Date.now()-vt)}return j&&console.timeEnd("total time"),this}getClusters(H,j){let Q=((H[0]+180)%360+360)%360-180;const he=Math.max(-90,Math.min(90,H[1]));let Me=H[2]===180?180:((H[2]+180)%360+360)%360-180;const Ne=Math.max(-90,Math.min(90,H[3]));if(H[2]-H[0]>=360)Q=-180,Me=180;else if(Q>Me){const ot=this.getClusters([Q,he,180,Ne],j),b=this.getClusters([-180,he,Me,Ne],j);return ot.concat(b)}const Qe=this.trees[this._limitZoom(j)],it=Qe.range(Ee(Q),xe(Ne),Ee(Me),xe(he)),vt=Qe.data,$e=[];for(const ot of it){const b=this.stride*ot;$e.push(vt[b+5]>1?ve(vt,b,this.clusterProps):this.points[vt[b+3]])}return $e}getChildren(H){const j=this._getOriginId(H),Q=this._getOriginZoom(H),he="No cluster with the specified id.",Me=this.trees[Q];if(!Me)throw new Error(he);const Ne=Me.data;if(j*this.stride>=Ne.length)throw new Error(he);const Qe=this.options.radius/(this.options.extent*Math.pow(2,Q-1)),it=Me.within(Ne[j*this.stride],Ne[j*this.stride+1],Qe),vt=[];for(const $e of it){const ot=$e*this.stride;Ne[ot+4]===H&&vt.push(Ne[ot+5]>1?ve(Ne,ot,this.clusterProps):this.points[Ne[ot+3]])}if(vt.length===0)throw new Error(he);return vt}getLeaves(H,j,Q){const he=[];return this._appendLeaves(he,H,j=j||10,Q=Q||0,0),he}getTile(H,j,Q){const he=this.trees[this._limitZoom(H)],Me=Math.pow(2,H),{extent:Ne,radius:Qe}=this.options,it=Qe/Ne,vt=(Q-it)/Me,$e=(Q+1+it)/Me,ot={features:[]};return this._addTileFeatures(he.range((j-it)/Me,vt,(j+1+it)/Me,$e),he.data,j,Q,Me,ot),j===0&&this._addTileFeatures(he.range(1-it/Me,vt,1,$e),he.data,Me,Q,Me,ot),j===Me-1&&this._addTileFeatures(he.range(0,vt,it/Me,$e),he.data,-1,Q,Me,ot),ot.features.length?ot:null}getClusterExpansionZoom(H){let j=this._getOriginZoom(H)-1;for(;j<=this.options.maxZoom;){const Q=this.getChildren(H);if(j++,Q.length!==1)break;H=Q[0].properties.cluster_id}return j}_appendLeaves(H,j,Q,he,Me){const Ne=this.getChildren(j);for(const Qe of Ne){const it=Qe.properties;if(it&&it.cluster?Me+it.point_count<=he?Me+=it.point_count:Me=this._appendLeaves(H,it.cluster_id,Q,he,Me):Me<he?Me++:H.push(Qe),H.length===Q)break}return Me}_createTree(H){const j=new s.aU(H.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Q=0;Q<H.length;Q+=this.stride)j.add(H[Q],H[Q+1]);return j.finish(),j.data=H,j}_addTileFeatures(H,j,Q,he,Me,Ne){for(const Qe of H){const it=Qe*this.stride,vt=j[it+5]>1;let $e,ot,b;if(vt)$e=ge(j,it,this.clusterProps),ot=j[it],b=j[it+1];else{const bn=this.points[j[it+3]];$e=bn.properties;const[Cn,xt]=bn.geometry.coordinates;ot=Ee(Cn),b=xe(xt)}const Rt={type:1,geometry:[[Math.round(this.options.extent*(ot*Me-Q)),Math.round(this.options.extent*(b*Me-he))]],tags:$e};let mn;mn=vt||this.options.generateId?j[it+3]:this.points[j[it+3]].id,mn!==void 0&&(Rt.id=mn),Ne.features.push(Rt)}}_limitZoom(H){return Math.max(this.options.minZoom,Math.min(Math.floor(+H),this.options.maxZoom+1))}_cluster(H,j){const{radius:Q,extent:he,reduce:Me,minPoints:Ne}=this.options,Qe=Q/(he*Math.pow(2,j)),it=H.data,vt=[],$e=this.stride;for(let ot=0;ot<it.length;ot+=$e){if(it[ot+2]<=j)continue;it[ot+2]=j;const b=it[ot],Rt=it[ot+1],mn=H.within(it[ot],it[ot+1],Qe),bn=it[ot+5];let Cn=bn;for(const xt of mn){const Ci=xt*$e;it[Ci+2]>j&&(Cn+=it[Ci+5])}if(Cn>bn&&Cn>=Ne){let xt,Ci=b*bn,Ki=Rt*bn,Wn=-1;const Hn=(ot/$e<<5)+(j+1)+this.points.length;for(const Qi of mn){const Wi=Qi*$e;if(it[Wi+2]<=j)continue;it[Wi+2]=j;const Ri=it[Wi+5];Ci+=it[Wi]*Ri,Ki+=it[Wi+1]*Ri,it[Wi+4]=Hn,Me&&(xt||(xt=this._map(it,ot,!0),Wn=this.clusterProps.length,this.clusterProps.push(xt)),Me(xt,this._map(it,Wi)))}it[ot+4]=Hn,vt.push(Ci/Cn,Ki/Cn,1/0,Hn,-1,Cn),Me&&vt.push(Wn)}else{for(let xt=0;xt<$e;xt++)vt.push(it[ot+xt]);if(Cn>1)for(const xt of mn){const Ci=xt*$e;if(!(it[Ci+2]<=j)){it[Ci+2]=j;for(let Ki=0;Ki<$e;Ki++)vt.push(it[Ci+Ki])}}}}return vt}_getOriginId(H){return H-this.points.length>>5}_getOriginZoom(H){return(H-this.points.length)%32}_map(H,j,Q){if(H[j+5]>1){const Ne=this.clusterProps[H[j+6]];return Q?Object.assign({},Ne):Ne}const he=this.points[H[j+3]].properties,Me=this.options.map(he);return Q&&Me===he?Object.assign({},Me):Me}}function ve(je,H,j){return{type:"Feature",id:je[H+3],properties:ge(je,H,j),geometry:{type:"Point",coordinates:[(Q=je[H],360*(Q-.5)),Te(je[H+1])]}};var Q}function ge(je,H,j){const Q=je[H+5],he=Q>=1e4?`${Math.round(Q/1e3)}k`:Q>=1e3?Math.round(Q/100)/10+"k":Q,Me=je[H+6],Ne=Me===-1?{}:Object.assign({},j[Me]);return Object.assign(Ne,{cluster:!0,cluster_id:je[H+3],point_count:Q,point_count_abbreviated:he})}function Ee(je){return je/360+.5}function xe(je){const H=Math.sin(je*Math.PI/180),j=.5-.25*Math.log((1+H)/(1-H))/Math.PI;return j<0?0:j>1?1:j}function Te(je){const H=(180-360*je)*Math.PI/180;return 360*Math.atan(Math.exp(H))/Math.PI-90}function Fe(je,H,j,Q){let he=Q;const Me=H+(j-H>>1);let Ne,Qe=j-H;const it=je[H],vt=je[H+1],$e=je[j],ot=je[j+1];for(let b=H+3;b<j;b+=3){const Rt=Ie(je[b],je[b+1],it,vt,$e,ot);if(Rt>he)Ne=b,he=Rt;else if(Rt===he){const mn=Math.abs(b-Me);mn<Qe&&(Ne=b,Qe=mn)}}he>Q&&(Ne-H>3&&Fe(je,H,Ne,Q),je[Ne+2]=he,j-Ne>3&&Fe(je,Ne,j,Q))}function Ie(je,H,j,Q,he,Me){let Ne=he-j,Qe=Me-Q;if(Ne!==0||Qe!==0){const it=((je-j)*Ne+(H-Q)*Qe)/(Ne*Ne+Qe*Qe);it>1?(j=he,Q=Me):it>0&&(j+=Ne*it,Q+=Qe*it)}return Ne=je-j,Qe=H-Q,Ne*Ne+Qe*Qe}function Ye(je,H,j,Q){const he={id:je??null,type:H,geometry:j,tags:Q,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(H==="Point"||H==="MultiPoint"||H==="LineString")At(he,j);else if(H==="Polygon")At(he,j[0]);else if(H==="MultiLineString")for(const Me of j)At(he,Me);else if(H==="MultiPolygon")for(const Me of j)At(he,Me[0]);return he}function At(je,H){for(let j=0;j<H.length;j+=3)je.minX=Math.min(je.minX,H[j]),je.minY=Math.min(je.minY,H[j+1]),je.maxX=Math.max(je.maxX,H[j]),je.maxY=Math.max(je.maxY,H[j+1])}function mt(je,H,j,Q){if(!H.geometry)return;const he=H.geometry.coordinates;if(he&&he.length===0)return;const Me=H.geometry.type,Ne=Math.pow(j.tolerance/((1<<j.maxZoom)*j.extent),2);let Qe=[],it=H.id;if(j.promoteId?it=H.properties[j.promoteId]:j.generateId&&(it=Q||0),Me==="Point")Ue(he,Qe);else if(Me==="MultiPoint")for(const vt of he)Ue(vt,Qe);else if(Me==="LineString")De(he,Qe,Ne,!1);else if(Me==="MultiLineString"){if(j.lineMetrics){for(const vt of he)Qe=[],De(vt,Qe,Ne,!1),je.push(Ye(it,"LineString",Qe,H.properties));return}Ge(he,Qe,Ne,!1)}else if(Me==="Polygon")Ge(he,Qe,Ne,!0);else{if(Me!=="MultiPolygon"){if(Me==="GeometryCollection"){for(const vt of H.geometry.geometries)mt(je,{id:it,geometry:vt,properties:H.properties},j,Q);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const vt of he){const $e=[];Ge(vt,$e,Ne,!0),Qe.push($e)}}je.push(Ye(it,Me,Qe,H.properties))}function Ue(je,H){H.push(Re(je[0]),St(je[1]),0)}function De(je,H,j,Q){let he,Me,Ne=0;for(let it=0;it<je.length;it++){const vt=Re(je[it][0]),$e=St(je[it][1]);H.push(vt,$e,0),it>0&&(Ne+=Q?(he*$e-vt*Me)/2:Math.sqrt(Math.pow(vt-he,2)+Math.pow($e-Me,2))),he=vt,Me=$e}const Qe=H.length-3;H[2]=1,Fe(H,0,Qe,j),H[Qe+2]=1,H.size=Math.abs(Ne),H.start=0,H.end=H.size}function Ge(je,H,j,Q){for(let he=0;he<je.length;he++){const Me=[];De(je[he],Me,j,Q),H.push(Me)}}function Re(je){return je/360+.5}function St(je){const H=Math.sin(je*Math.PI/180),j=.5-.25*Math.log((1+H)/(1-H))/Math.PI;return j<0?0:j>1?1:j}function ut(je,H,j,Q,he,Me,Ne,Qe){if(Q/=H,Me>=(j/=H)&&Ne<Q)return je;if(Ne<j||Me>=Q)return null;const it=[];for(const vt of je){const $e=vt.geometry;let ot=vt.type;const b=he===0?vt.minX:vt.minY,Rt=he===0?vt.maxX:vt.maxY;if(b>=j&&Rt<Q){it.push(vt);continue}if(Rt<j||b>=Q)continue;let mn=[];if(ot==="Point"||ot==="MultiPoint")kt($e,mn,j,Q,he);else if(ot==="LineString")Ut($e,mn,j,Q,he,!1,Qe.lineMetrics);else if(ot==="MultiLineString")ke($e,mn,j,Q,he,!1);else if(ot==="Polygon")ke($e,mn,j,Q,he,!0);else if(ot==="MultiPolygon")for(const bn of $e){const Cn=[];ke(bn,Cn,j,Q,he,!0),Cn.length&&mn.push(Cn)}if(mn.length){if(Qe.lineMetrics&&ot==="LineString"){for(const bn of mn)it.push(Ye(vt.id,ot,bn,vt.tags));continue}ot!=="LineString"&&ot!=="MultiLineString"||(mn.length===1?(ot="LineString",mn=mn[0]):ot="MultiLineString"),ot!=="Point"&&ot!=="MultiPoint"||(ot=mn.length===3?"Point":"MultiPoint"),it.push(Ye(vt.id,ot,mn,vt.tags))}}return it.length?it:null}function kt(je,H,j,Q,he){for(let Me=0;Me<je.length;Me+=3){const Ne=je[Me+he];Ne>=j&&Ne<=Q&&Oe(H,je[Me],je[Me+1],je[Me+2])}}function Ut(je,H,j,Q,he,Me,Ne){let Qe=Le(je);const it=he===0?Ze:bt;let vt,$e,ot=je.start;for(let Cn=0;Cn<je.length-3;Cn+=3){const xt=je[Cn],Ci=je[Cn+1],Ki=je[Cn+2],Wn=je[Cn+3],Hn=je[Cn+4],Qi=he===0?xt:Ci,Wi=he===0?Wn:Hn;let Ri=!1;Ne&&(vt=Math.sqrt(Math.pow(xt-Wn,2)+Math.pow(Ci-Hn,2))),Qi<j?Wi>j&&($e=it(Qe,xt,Ci,Wn,Hn,j),Ne&&(Qe.start=ot+vt*$e)):Qi>Q?Wi<Q&&($e=it(Qe,xt,Ci,Wn,Hn,Q),Ne&&(Qe.start=ot+vt*$e)):Oe(Qe,xt,Ci,Ki),Wi<j&&Qi>=j&&($e=it(Qe,xt,Ci,Wn,Hn,j),Ri=!0),Wi>Q&&Qi<=Q&&($e=it(Qe,xt,Ci,Wn,Hn,Q),Ri=!0),!Me&&Ri&&(Ne&&(Qe.end=ot+vt*$e),H.push(Qe),Qe=Le(je)),Ne&&(ot+=vt)}let b=je.length-3;const Rt=je[b],mn=je[b+1],bn=he===0?Rt:mn;bn>=j&&bn<=Q&&Oe(Qe,Rt,mn,je[b+2]),b=Qe.length-3,Me&&b>=3&&(Qe[b]!==Qe[0]||Qe[b+1]!==Qe[1])&&Oe(Qe,Qe[0],Qe[1],Qe[2]),Qe.length&&H.push(Qe)}function Le(je){const H=[];return H.size=je.size,H.start=je.start,H.end=je.end,H}function ke(je,H,j,Q,he,Me){for(const Ne of je)Ut(Ne,H,j,Q,he,Me,!1)}function Oe(je,H,j,Q){je.push(H,j,Q)}function Ze(je,H,j,Q,he,Me){const Ne=(Me-H)/(Q-H);return Oe(je,Me,j+(he-j)*Ne,1),Ne}function bt(je,H,j,Q,he,Me){const Ne=(Me-j)/(he-j);return Oe(je,H+(Q-H)*Ne,Me,1),Ne}function yt(je,H){const j=[];for(let Q=0;Q<je.length;Q++){const he=je[Q],Me=he.type;let Ne;if(Me==="Point"||Me==="MultiPoint"||Me==="LineString")Ne=Mt(he.geometry,H);else if(Me==="MultiLineString"||Me==="Polygon"){Ne=[];for(const Qe of he.geometry)Ne.push(Mt(Qe,H))}else if(Me==="MultiPolygon"){Ne=[];for(const Qe of he.geometry){const it=[];for(const vt of Qe)it.push(Mt(vt,H));Ne.push(it)}}j.push(Ye(he.id,Me,Ne,he.tags))}return j}function Mt(je,H){const j=[];j.size=je.size,je.start!==void 0&&(j.start=je.start,j.end=je.end);for(let Q=0;Q<je.length;Q+=3)j.push(je[Q]+H,je[Q+1],je[Q+2]);return j}function Kt(je,H){if(je.transformed)return je;const j=1<<je.z,Q=je.x,he=je.y;for(const Me of je.features){const Ne=Me.geometry,Qe=Me.type;if(Me.geometry=[],Qe===1)for(let it=0;it<Ne.length;it+=2)Me.geometry.push(Dt(Ne[it],Ne[it+1],H,j,Q,he));else for(let it=0;it<Ne.length;it++){const vt=[];for(let $e=0;$e<Ne[it].length;$e+=2)vt.push(Dt(Ne[it][$e],Ne[it][$e+1],H,j,Q,he));Me.geometry.push(vt)}}return je.transformed=!0,je}function Dt(je,H,j,Q,he,Me){return[Math.round(j*(je*Q-he)),Math.round(j*(H*Q-Me))]}function en(je,H,j,Q,he){const Me=H===he.maxZoom?0:he.tolerance/((1<<H)*he.extent),Ne={features:[],numPoints:0,numSimplified:0,numFeatures:je.length,source:null,x:j,y:Q,z:H,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Qe of je)Gn(Ne,Qe,Me,he);return Ne}function Gn(je,H,j,Q){const he=H.geometry,Me=H.type,Ne=[];if(je.minX=Math.min(je.minX,H.minX),je.minY=Math.min(je.minY,H.minY),je.maxX=Math.max(je.maxX,H.maxX),je.maxY=Math.max(je.maxY,H.maxY),Me==="Point"||Me==="MultiPoint")for(let Qe=0;Qe<he.length;Qe+=3)Ne.push(he[Qe],he[Qe+1]),je.numPoints++,je.numSimplified++;else if(Me==="LineString")Nn(Ne,he,je,j,!1,!1);else if(Me==="MultiLineString"||Me==="Polygon")for(let Qe=0;Qe<he.length;Qe++)Nn(Ne,he[Qe],je,j,Me==="Polygon",Qe===0);else if(Me==="MultiPolygon")for(let Qe=0;Qe<he.length;Qe++){const it=he[Qe];for(let vt=0;vt<it.length;vt++)Nn(Ne,it[vt],je,j,!0,vt===0)}if(Ne.length){let Qe=H.tags||null;if(Me==="LineString"&&Q.lineMetrics){Qe={};for(const vt in H.tags)Qe[vt]=H.tags[vt];Qe.mapbox_clip_start=he.start/he.size,Qe.mapbox_clip_end=he.end/he.size}const it={geometry:Ne,type:Me==="Polygon"||Me==="MultiPolygon"?3:Me==="LineString"||Me==="MultiLineString"?2:1,tags:Qe};H.id!==null&&(it.id=H.id),je.features.push(it)}}function Nn(je,H,j,Q,he,Me){const Ne=Q*Q;if(Q>0&&H.size<(he?Ne:Q))return void(j.numPoints+=H.length/3);const Qe=[];for(let it=0;it<H.length;it+=3)(Q===0||H[it+2]>Ne)&&(j.numSimplified++,Qe.push(H[it],H[it+1])),j.numPoints++;he&&(function(it,vt){let $e=0;for(let ot=0,b=it.length,Rt=b-2;ot<b;Rt=ot,ot+=2)$e+=(it[ot]-it[Rt])*(it[ot+1]+it[Rt+1]);if($e>0===vt)for(let ot=0,b=it.length;ot<b/2;ot+=2){const Rt=it[ot],mn=it[ot+1];it[ot]=it[b-2-ot],it[ot+1]=it[b-1-ot],it[b-2-ot]=Rt,it[b-1-ot]=mn}})(Qe,Me),je.push(Qe)}const Si={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Un{constructor(H,j){const Q=(j=this.options=(function(Me,Ne){for(const Qe in Ne)Me[Qe]=Ne[Qe];return Me})(Object.create(Si),j)).debug;if(Q&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");let he=(function(Me,Ne){const Qe=[];if(Me.type==="FeatureCollection")for(let it=0;it<Me.features.length;it++)mt(Qe,Me.features[it],Ne,it);else mt(Qe,Me.type==="Feature"?Me:{geometry:Me},Ne);return Qe})(H,j);this.tiles={},this.tileCoords=[],Q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),he=(function(Me,Ne){const Qe=Ne.buffer/Ne.extent;let it=Me;const vt=ut(Me,1,-1-Qe,Qe,0,-1,2,Ne),$e=ut(Me,1,1-Qe,2+Qe,0,-1,2,Ne);return(vt||$e)&&(it=ut(Me,1,-Qe,1+Qe,0,-1,2,Ne)||[],vt&&(it=yt(vt,1).concat(it)),$e&&(it=it.concat(yt($e,-1)))),it})(he,j),he.length&&this.splitTile(he,0,0,0),Q&&(he.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(H,j,Q,he,Me,Ne,Qe){const it=[H,j,Q,he],vt=this.options,$e=vt.debug;for(;it.length;){he=it.pop(),Q=it.pop(),j=it.pop(),H=it.pop();const ot=1<<j,b=Ln(j,Q,he);let Rt=this.tiles[b];if(!Rt&&($e>1&&console.time("creation"),Rt=this.tiles[b]=en(H,j,Q,he,vt),this.tileCoords.push({z:j,x:Q,y:he}),$e)){$e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,Q,he,Rt.numFeatures,Rt.numPoints,Rt.numSimplified),console.timeEnd("creation"));const Ri=`z${j}`;this.stats[Ri]=(this.stats[Ri]||0)+1,this.total++}if(Rt.source=H,Me==null){if(j===vt.indexMaxZoom||Rt.numPoints<=vt.indexMaxPoints)continue}else{if(j===vt.maxZoom||j===Me)continue;if(Me!=null){const Ri=Me-j;if(Q!==Ne>>Ri||he!==Qe>>Ri)continue}}if(Rt.source=null,H.length===0)continue;$e>1&&console.time("clipping");const mn=.5*vt.buffer/vt.extent,bn=.5-mn,Cn=.5+mn,xt=1+mn;let Ci=null,Ki=null,Wn=null,Hn=null,Qi=ut(H,ot,Q-mn,Q+Cn,0,Rt.minX,Rt.maxX,vt),Wi=ut(H,ot,Q+bn,Q+xt,0,Rt.minX,Rt.maxX,vt);H=null,Qi&&(Ci=ut(Qi,ot,he-mn,he+Cn,1,Rt.minY,Rt.maxY,vt),Ki=ut(Qi,ot,he+bn,he+xt,1,Rt.minY,Rt.maxY,vt),Qi=null),Wi&&(Wn=ut(Wi,ot,he-mn,he+Cn,1,Rt.minY,Rt.maxY,vt),Hn=ut(Wi,ot,he+bn,he+xt,1,Rt.minY,Rt.maxY,vt),Wi=null),$e>1&&console.timeEnd("clipping"),it.push(Ci||[],j+1,2*Q,2*he),it.push(Ki||[],j+1,2*Q,2*he+1),it.push(Wn||[],j+1,2*Q+1,2*he),it.push(Hn||[],j+1,2*Q+1,2*he+1)}}getTile(H,j,Q){H=+H,j=+j,Q=+Q;const he=this.options,{extent:Me,debug:Ne}=he;if(H<0||H>24)return null;const Qe=1<<H,it=Ln(H,j=j+Qe&Qe-1,Q);if(this.tiles[it])return Kt(this.tiles[it],Me);Ne>1&&console.log("drilling down to z%d-%d-%d",H,j,Q);let vt,$e=H,ot=j,b=Q;for(;!vt&&$e>0;)$e--,ot>>=1,b>>=1,vt=this.tiles[Ln($e,ot,b)];return vt&&vt.source?(Ne>1&&(console.log("found parent tile z%d-%d-%d",$e,ot,b),console.time("drilling down")),this.splitTile(vt.source,$e,ot,b,H,j,Q),Ne>1&&console.timeEnd("drilling down"),this.tiles[it]?Kt(this.tiles[it],Me):null):null}}function Ln(je,H,j){return 32*((1<<je)*j+H)+je}class Tn extends z{constructor(H,j,Q,he=ti){super(H,j,Q),this._dataUpdateable=new Map,this._createGeoJSONIndex=he}loadVectorTile(H,j){return s._(this,void 0,void 0,(function*(){const Q=H.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const he=this._geoJSONIndex.getTile(Q.z,Q.x,Q.y);return he?P(new s.d3(he.features,{version:2,extent:s.a5})):null}))}loadData(H){return s._(this,void 0,void 0,(function*(){var j;(j=this._pendingRequest)===null||j===void 0||j.abort();const Q=this._startPerformance(H);this._pendingRequest=new AbortController;try{(!this._pendingData||H.request||H.data||H.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(H,this._pendingRequest));const he=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(he,H),this.loaded={};const Me={};return this._finishPerformance(Q,H,Me),Me}catch(he){if(delete this._pendingRequest,s.Z(he))return{abandoned:!0};throw he}}))}_startPerformance(H){var j;if(!((j=H?.request)===null||j===void 0)&&j.collectResourceTiming)return new s.c$(H.request)}_finishPerformance(H,j,Q){if(!H)return;const he=H.finish();he&&(Q.resourceTiming={},Q.resourceTiming[j.source]=JSON.parse(JSON.stringify(he)))}getData(){return s._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(H){const j=this.loaded;return j&&j[H.uid]?super.reloadTile(H):this.loadTile(H)}loadAndProcessGeoJSON(H,j){return s._(this,void 0,void 0,(function*(){let Q;if(H.request?Q=yield this.loadGeoJSONFromUrl(H.request,H.promoteId,j):H.data?Q=this._loadGeoJSONFromObject(H.data,H.promoteId):H.dataDiff&&(Q=this._loadGeoJSONFromDiff(H.dataDiff,H.promoteId,H.source)),delete this._pendingRequest,typeof Q!="object")throw new Error(`Input data given to '${H.source}' is not a valid GeoJSON object.`);return ie(Q,!0),H.filter&&(Q=this._filterGeoJSON(Q,H.filter)),Q}))}loadGeoJSONFromUrl(H,j,Q){return s._(this,void 0,void 0,(function*(){const he=yield s.j(H,Q);return this._dataUpdateable=s.a7(he.data,j)?s.a8(he.data,j):void 0,he.data}))}_loadGeoJSONFromObject(H,j){return this._dataUpdateable=s.a7(H,j)?s.a8(H,j):void 0,H}_loadGeoJSONFromDiff(H,j,Q){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${Q}`);s.a9(this._dataUpdateable,H,j);const he=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(he)}_filterGeoJSON(H,j){const Q=s.d4(j,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Q.result==="error")throw new Error(Q.value.map((Me=>`${Me.key}: ${Me.message}`)).join(", "));const he=H.features.filter((Me=>Q.value.evaluate({zoom:0},Me)));return this._toFeatureCollection(he)}_toFeatureCollection(H){return{type:"FeatureCollection",features:H}}removeSource(H){return s._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(H){return this._geoJSONIndex.getClusterExpansionZoom(H.clusterId)}getClusterChildren(H){return this._geoJSONIndex.getChildren(H.clusterId)}getClusterLeaves(H){return this._geoJSONIndex.getLeaves(H.clusterId,H.limit,H.offset)}}function ti(je,H){return H.cluster?new ce((function({superclusterOptions:j,clusterProperties:Q}){if(!Q||!j)return j;const he={},Me={},Ne={accumulated:null,zoom:0},Qe={properties:null},it=Object.keys(Q);for(const vt of it){const[$e,ot]=Q[vt],b=s.d4(ot),Rt=s.d4(typeof $e=="string"?[$e,["accumulated"],["get",vt]]:$e);he[vt]=b.value,Me[vt]=Rt.value}return j.map=vt=>{Qe.properties=vt;const $e={};for(const ot of it)$e[ot]=he[ot].evaluate(Ne,Qe);return $e},j.reduce=(vt,$e)=>{Qe.properties=$e;for(const ot of it)Ne.accumulated=vt[ot],vt[ot]=Me[ot].evaluate(Ne,Qe)},j})(H)).load(je.features):(function(j,Q){return new Un(j,Q)})(je,H.geojsonVtOptions)}class Bn{constructor(H){this.self=H,this.actor=new s.L(H),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(j,Q)=>{if(this.externalWorkerSourceTypes[j])throw new Error(`Worker source with name "${j}" already registered.`);this.externalWorkerSourceTypes[j]=Q},this.self.addProtocol=s.cK,this.self.removeProtocol=s.cL,this.self.registerRTLTextPlugin=j=>{s.d5.setMethods(j)},this.actor.registerMessageHandler("LDT",((j,Q)=>this._getDEMWorkerSource(j,Q.source).loadTile(Q))),this.actor.registerMessageHandler("RDT",((j,Q)=>s._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(j,Q.source).removeTile(Q)})))),this.actor.registerMessageHandler("GCEZ",((j,Q)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(j,Q.type,Q.source).getClusterExpansionZoom(Q)})))),this.actor.registerMessageHandler("GCC",((j,Q)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(j,Q.type,Q.source).getClusterChildren(Q)})))),this.actor.registerMessageHandler("GCL",((j,Q)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(j,Q.type,Q.source).getClusterLeaves(Q)})))),this.actor.registerMessageHandler("LD",((j,Q)=>this._getWorkerSource(j,Q.type,Q.source).loadData(Q))),this.actor.registerMessageHandler("GD",((j,Q)=>this._getWorkerSource(j,Q.type,Q.source).getData())),this.actor.registerMessageHandler("LT",((j,Q)=>this._getWorkerSource(j,Q.type,Q.source).loadTile(Q))),this.actor.registerMessageHandler("RT",((j,Q)=>this._getWorkerSource(j,Q.type,Q.source).reloadTile(Q))),this.actor.registerMessageHandler("AT",((j,Q)=>this._getWorkerSource(j,Q.type,Q.source).abortTile(Q))),this.actor.registerMessageHandler("RMT",((j,Q)=>this._getWorkerSource(j,Q.type,Q.source).removeTile(Q))),this.actor.registerMessageHandler("RS",((j,Q)=>s._(this,void 0,void 0,(function*(){if(!this.workerSources[j]||!this.workerSources[j][Q.type]||!this.workerSources[j][Q.type][Q.source])return;const he=this.workerSources[j][Q.type][Q.source];delete this.workerSources[j][Q.type][Q.source],he.removeSource!==void 0&&he.removeSource(Q)})))),this.actor.registerMessageHandler("RM",(j=>s._(this,void 0,void 0,(function*(){delete this.layerIndexes[j],delete this.availableImages[j],delete this.workerSources[j],delete this.demWorkerSources[j],this.globalStates.delete(j)})))),this.actor.registerMessageHandler("SR",((j,Q)=>s._(this,void 0,void 0,(function*(){this.referrer=Q})))),this.actor.registerMessageHandler("SRPS",((j,Q)=>this._syncRTLPluginState(j,Q))),this.actor.registerMessageHandler("IS",((j,Q)=>s._(this,void 0,void 0,(function*(){this.self.importScripts(Q)})))),this.actor.registerMessageHandler("SI",((j,Q)=>this._setImages(j,Q))),this.actor.registerMessageHandler("UL",((j,Q)=>s._(this,void 0,void 0,(function*(){this._getLayerIndex(j).update(Q.layers,Q.removedIds,this._getGlobalState(j))})))),this.actor.registerMessageHandler("UGS",((j,Q)=>s._(this,void 0,void 0,(function*(){const he=this._getGlobalState(j);for(const Me in Q)he[Me]=Q[Me]})))),this.actor.registerMessageHandler("SL",((j,Q)=>s._(this,void 0,void 0,(function*(){this._getLayerIndex(j).replace(Q,this._getGlobalState(j))}))))}_getGlobalState(H){let j=this.globalStates.get(H);return j||(j={},this.globalStates.set(H,j)),j}_setImages(H,j){return s._(this,void 0,void 0,(function*(){this.availableImages[H]=j;for(const Q in this.workerSources[H]){const he=this.workerSources[H][Q];for(const Me in he)he[Me].availableImages=j}}))}_syncRTLPluginState(H,j){return s._(this,void 0,void 0,(function*(){return yield s.d5.syncState(j,this.self.importScripts)}))}_getAvailableImages(H){let j=this.availableImages[H];return j||(j=[]),j}_getLayerIndex(H){let j=this.layerIndexes[H];return j||(j=this.layerIndexes[H]=new a),j}_getWorkerSource(H,j,Q){if(this.workerSources[H]||(this.workerSources[H]={}),this.workerSources[H][j]||(this.workerSources[H][j]={}),!this.workerSources[H][j][Q]){const he={sendAsync:(Me,Ne)=>(Me.targetMapId=H,this.actor.sendAsync(Me,Ne))};switch(j){case"vector":this.workerSources[H][j][Q]=new z(he,this._getLayerIndex(H),this._getAvailableImages(H));break;case"geojson":this.workerSources[H][j][Q]=new Tn(he,this._getLayerIndex(H),this._getAvailableImages(H));break;default:this.workerSources[H][j][Q]=new this.externalWorkerSourceTypes[j](he,this._getLayerIndex(H),this._getAvailableImages(H))}}return this.workerSources[H][j][Q]}_getDEMWorkerSource(H,j){return this.demWorkerSources[H]||(this.demWorkerSources[H]={}),this.demWorkerSources[H][j]||(this.demWorkerSources[H][j]=new V),this.demWorkerSources[H][j]}}return s.i(self)&&(self.worker=new Bn(self)),Bn})),r("index",["exports","./shared"],(function(s,a){var c="5.14.0";function d(){var I=new a.A(4);return a.A!=Float32Array&&(I[1]=0,I[2]=0),I[0]=1,I[3]=1,I}let m,v,M;const B={frame(I,u,p){const C=requestAnimationFrame((k=>{S(),u(k)})),{unsubscribe:S}=a.s(I.signal,"abort",(()=>{S(),cancelAnimationFrame(C),p(new a.a(I.signal.reason))}),!1)},frameAsync(I){return new Promise(((u,p)=>{this.frame(I,u,p)}))},getImageData(I,u=0){return this.getImageCanvasContext(I).getImageData(-u,-u,I.width+2*u,I.height+2*u)},getImageCanvasContext(I){const u=window.document.createElement("canvas"),p=u.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return u.width=I.width,u.height=I.height,p.drawImage(I,0,0,I.width,I.height),p},resolveURL:I=>(m||(m=document.createElement("a")),m.href=I,m.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return M!==void 0?M:!!matchMedia&&(v==null&&(v=matchMedia("(prefers-reduced-motion: reduce)")),v.matches)},set prefersReducedMotion(I){M=I}},P=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(I){this._frozenAt=I}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function U(){return P.getCurrentTime()}class z{static testProp(u){if(!z.docStyle)return u[0];for(let p=0;p<u.length;p++)if(u[p]in z.docStyle)return u[p];return u[0]}static create(u,p,C){const S=window.document.createElement(u);return p!==void 0&&(S.className=p),C&&C.appendChild(S),S}static createNS(u,p){return window.document.createElementNS(u,p)}static disableDrag(){z.docStyle&&z.selectProp&&(z.userSelect=z.docStyle[z.selectProp],z.docStyle[z.selectProp]="none")}static enableDrag(){z.docStyle&&z.selectProp&&(z.docStyle[z.selectProp]=z.userSelect)}static setTransform(u,p){u.style[z.transformProp]=p}static addEventListener(u,p,C,S={}){u.addEventListener(p,C,"passive"in S?S:S.capture)}static removeEventListener(u,p,C,S={}){u.removeEventListener(p,C,"passive"in S?S:S.capture)}static suppressClickInternal(u){u.preventDefault(),u.stopPropagation(),window.removeEventListener("click",z.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",z.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",z.suppressClickInternal,!0)}),0)}static getScale(u){const p=u.getBoundingClientRect();return{x:p.width/u.offsetWidth||1,y:p.height/u.offsetHeight||1,boundingClientRect:p}}static getPoint(u,p,C){const S=p.boundingClientRect;return new a.P((C.clientX-S.left)/p.x-u.clientLeft,(C.clientY-S.top)/p.y-u.clientTop)}static mousePos(u,p){const C=z.getScale(u);return z.getPoint(u,C,p)}static touchPos(u,p){const C=[],S=z.getScale(u);for(let k=0;k<p.length;k++)C.push(z.getPoint(u,S,p[k]));return C}static mouseButton(u){return u.button}static remove(u){u.parentNode&&u.parentNode.removeChild(u)}static sanitize(u){const p=new DOMParser().parseFromString(u,"text/html").body||document.createElement("body"),C=p.querySelectorAll("script");for(const S of C)S.remove();return z.clean(p),p.innerHTML}static isPossiblyDangerous(u,p){const C=p.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(u)||!C.includes("javascript:")&&!C.includes("data:"))||!!u.startsWith("on")||void 0}static clean(u){const p=u.children;for(const C of p)z.removeAttributes(C),z.clean(C)}static removeAttributes(u){for(const{name:p,value:C}of u.attributes)z.isPossiblyDangerous(p,C)&&u.removeAttribute(p)}}z.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,z.selectProp=z.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),z.transformProp=z.testProp(["transform","WebkitTransform"]);const V={supported:!1,testSupport:function(I){!re&&X&&(ie?te(I):Z=I)}};let Z,X,re=!1,ie=!1;function te(I){const u=I.createTexture();I.bindTexture(I.TEXTURE_2D,u);try{if(I.texImage2D(I.TEXTURE_2D,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,X),I.isContextLost())return;V.supported=!0}catch{}I.deleteTexture(u),re=!0}var q;typeof document<"u"&&(X=document.createElement("img"),X.onload=()=>{Z&&te(Z),Z=null,ie=!0},X.onerror=()=>{re=!0,Z=null},X.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(I){let u,p,C,S;I.resetRequestQueue=()=>{u=[],p=0,C=0,S={}},I.addThrottleControl=$=>{const se=C++;return S[se]=$,se},I.removeThrottleControl=$=>{delete S[$],K()},I.getImage=($,se,ue=!0)=>new Promise(((ye,me)=>{V.supported&&($.headers||($.headers={}),$.headers.accept="image/webp,*/*"),a.e($,{type:"image"}),u.push({abortController:se,requestParameters:$,supportImageRefresh:ue,state:"queued",onError:Se=>{me(Se)},onSuccess:Se=>{ye(Se)}}),K()}));const k=$=>a._(this,void 0,void 0,(function*(){$.state="running";const{requestParameters:se,supportImageRefresh:ue,onError:ye,onSuccess:me,abortController:Se}=$,Ke=ue===!1&&!a.i(self)&&!a.g(se.url)&&(!se.headers||Object.keys(se.headers).reduce(((tt,rt)=>tt&&rt==="accept"),!0));p++;const Je=Ke?N(se,Se):a.m(se,Se);try{const tt=yield Je;delete $.abortController,$.state="completed",tt.data instanceof HTMLImageElement||a.b(tt.data)?me(tt):tt.data&&me({data:yield(nt=tt.data,typeof createImageBitmap=="function"?a.f(nt):a.h(nt)),cacheControl:tt.cacheControl,expires:tt.expires})}catch(tt){delete $.abortController,ye(tt)}finally{p--,K()}var nt})),K=()=>{const $=(()=>{for(const se of Object.keys(S))if(S[se]())return!0;return!1})()?a.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let se=p;se<$&&u.length>0;se++){const ue=u.shift();ue.abortController.signal.aborted?se--:k(ue)}},N=($,se)=>new Promise(((ue,ye)=>{const me=new Image,Se=$.url,Ke=$.credentials;Ke&&Ke==="include"?me.crossOrigin="use-credentials":(Ke&&Ke==="same-origin"||!a.d(Se))&&(me.crossOrigin="anonymous"),se.signal.addEventListener("abort",(()=>{me.src="",ye(new a.a(se.signal.reason))})),me.fetchPriority="high",me.onload=()=>{me.onerror=me.onload=null,ue({data:me})},me.onerror=()=>{me.onerror=me.onload=null,se.signal.aborted||ye(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},me.src=Se}))})(q||(q={})),q.resetRequestQueue();class le{constructor(u){this._transformRequestFn=u??null}transformRequest(u,p){return this._transformRequestFn&&this._transformRequestFn(u,p)||{url:u}}setTransformRequest(u){this._transformRequestFn=u}}function ce(I){const u=[];if(typeof I=="string")u.push({id:"default",url:I});else if(I&&I.length>0){const p=[];for(const{id:C,url:S}of I){const k=`${C}${S}`;p.indexOf(k)===-1&&(p.push(k),u.push({id:C,url:S}))}}return u}function ve(I,u,p){try{const C=new URL(I);return C.pathname+=`${u}${p}`,C.toString()}catch{throw new Error(`Invalid sprite URL "${I}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function ge(I){const{userImage:u}=I;return!!(u&&u.render&&u.render())&&(I.data.replace(new Uint8Array(u.data.buffer)),!0)}class Ee extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const u of Object.keys(this.images))this.removeImage(u);this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:p,promiseResolve:C}of this.requestors)C(this._getImagesForIds(p));this.requestors=[]}}getImage(u){const p=this.images[u];if(p&&!p.data&&p.spriteData){const C=p.spriteData;p.data=new a.R({width:C.width,height:C.height},C.context.getImageData(C.x,C.y,C.width,C.height).data),p.spriteData=null}return p}addImage(u,p){if(this.images[u])throw new Error(`Image id ${u} already exist, use updateImage instead`);this._validate(u,p)&&(this.images[u]=p)}_validate(u,p){let C=!0;const S=p.data||p.spriteData;return this._validateStretch(p.stretchX,S&&S.width)||(this.fire(new a.k(new Error(`Image "${u}" has invalid "stretchX" value`))),C=!1),this._validateStretch(p.stretchY,S&&S.height)||(this.fire(new a.k(new Error(`Image "${u}" has invalid "stretchY" value`))),C=!1),this._validateContent(p.content,p)||(this.fire(new a.k(new Error(`Image "${u}" has invalid "content" value`))),C=!1),C}_validateStretch(u,p){if(!u)return!0;let C=0;for(const S of u){if(S[0]<C||S[1]<S[0]||p<S[1])return!1;C=S[1]}return!0}_validateContent(u,p){if(!u)return!0;if(u.length!==4)return!1;const C=p.spriteData,S=C&&C.width||p.data.width,k=C&&C.height||p.data.height;return!(u[0]<0||S<u[0]||u[1]<0||k<u[1]||u[2]<0||S<u[2]||u[3]<0||k<u[3]||u[2]<u[0]||u[3]<u[1])}updateImage(u,p,C=!0){const S=this.getImage(u);if(C&&(S.data.width!==p.data.width||S.data.height!==p.data.height))throw new Error(`size mismatch between old image (${S.data.width}x${S.data.height}) and new image (${p.data.width}x${p.data.height}).`);p.version=S.version+1,this.images[u]=p,this.updatedImages[u]=!0}removeImage(u){const p=this.images[u];delete this.images[u],delete this.patterns[u],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u){return new Promise(((p,C)=>{let S=!0;if(!this.isLoaded())for(const k of u)this.images[k]||(S=!1);this.isLoaded()||S?p(this._getImagesForIds(u)):this.requestors.push({ids:u,promiseResolve:p})}))}_getImagesForIds(u){const p={};for(const C of u){let S=this.getImage(C);S||(this.fire(new a.l("styleimagemissing",{id:C})),S=this.getImage(C)),S?p[C]={data:S.data.clone(),pixelRatio:S.pixelRatio,sdf:S.sdf,version:S.version,stretchX:S.stretchX,stretchY:S.stretchY,content:S.content,textFitWidth:S.textFitWidth,textFitHeight:S.textFitHeight,hasRenderCallback:!!(S.userImage&&S.userImage.render)}:a.w(`Image "${C}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return p}getPixelSize(){const{width:u,height:p}=this.atlasImage;return{width:u,height:p}}getPattern(u){const p=this.patterns[u],C=this.getImage(u);if(!C)return null;if(p&&p.position.version===C.version)return p.position;if(p)p.position.version=C.version;else{const S={w:C.data.width+2,h:C.data.height+2,x:0,y:0},k=new a.I(S,C);this.patterns[u]={bin:S,position:k}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const p=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(u,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const k in this.patterns)u.push(this.patterns[k].bin);const{w:p,h:C}=a.p(u),S=this.atlasImage;S.resize({width:p||1,height:C||1});for(const k in this.patterns){const{bin:K}=this.patterns[k],N=K.x+1,$=K.y+1,se=this.getImage(k).data,ue=se.width,ye=se.height;a.R.copy(se,S,{x:0,y:0},{x:N,y:$},{width:ue,height:ye}),a.R.copy(se,S,{x:0,y:ye-1},{x:N,y:$-1},{width:ue,height:1}),a.R.copy(se,S,{x:0,y:0},{x:N,y:$+ye},{width:ue,height:1}),a.R.copy(se,S,{x:ue-1,y:0},{x:N-1,y:$},{width:1,height:ye}),a.R.copy(se,S,{x:0,y:0},{x:N+ue,y:$},{width:1,height:ye})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const p of u){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const C=this.getImage(p);C||a.w(`Image with ID: "${p}" was not found`),ge(C)&&this.updateImage(p,C)}}cloneImages(){const u={};for(const p in this.images){const C=this.images[p];u[p]=Object.assign(Object.assign({},C),{data:C.data?C.data.clone():null})}return u}}const xe=1e20;function Te(I,u,p,C,S,k,K,N,$){for(let se=u;se<u+C;se++)Fe(I,p*k+se,k,S,K,N,$);for(let se=p;se<p+S;se++)Fe(I,se*k+u,1,C,K,N,$)}function Fe(I,u,p,C,S,k,K){k[0]=0,K[0]=-xe,K[1]=xe,S[0]=I[u];for(let N=1,$=0,se=0;N<C;N++){S[N]=I[u+N*p];const ue=N*N;do{const ye=k[$];se=(S[N]-S[ye]+ue-ye*ye)/(N-ye)/2}while(se<=K[$]&&--$>-1);$++,k[$]=N,K[$]=se,K[$+1]=xe}for(let N=0,$=0;N<C;N++){for(;K[$+1]<N;)$++;const se=k[$],ue=N-se;I[u+N*p]=S[se]+ue*ue}}const Ie=a.v.layout_symbol["text-font"].default.join(",");class Ye{constructor(u,p,C){this.requestManager=u,this.localIdeographFontFamily=p,this.entries={},this.lang=C}setURL(u){this.url=u}getGlyphs(u){return a._(this,void 0,void 0,(function*(){const p=[];for(const k in u)for(const K of u[k])p.push(this._getAndCacheGlyphsPromise(k,K));const C=yield Promise.all(p),S={};for(const{stack:k,id:K,glyph:N}of C)S[k]||(S[k]={}),S[k][K]=N&&{id:N.id,bitmap:N.bitmap.clone(),metrics:N.metrics};return S}))}_getAndCacheGlyphsPromise(u,p){return a._(this,void 0,void 0,(function*(){let C=this.entries[u];C||(C=this.entries[u]={glyphs:{},requests:{},ranges:{}});let S=C.glyphs[p];return S!==void 0?{stack:u,id:p,glyph:S}:!this.url||this._charUsesLocalIdeographFontFamily(p)?(S=C.glyphs[p]=this._drawGlyph(C,u,p),{stack:u,id:p,glyph:S}):yield this._downloadAndCacheRangePromise(u,p)}))}_downloadAndCacheRangePromise(u,p){return a._(this,void 0,void 0,(function*(){const C=this.entries[u],S=Math.floor(p/256);if(C.ranges[S])return{stack:u,id:p,glyph:null};if(!C.requests[S]){const k=Ye.loadGlyphRange(u,S,this.url,this.requestManager);C.requests[S]=k}try{const k=yield C.requests[S];for(const K in k)C.glyphs[+K]=k[+K];return C.ranges[S]=!0,{stack:u,id:p,glyph:k[p]||null}}catch(k){const K=C.glyphs[p]=this._drawGlyph(C,u,p);return this._warnOnMissingGlyphRange(K,S,p,k),{stack:u,id:p,glyph:K}}}))}_warnOnMissingGlyphRange(u,p,C,S){const k=256*p,K=k+255,N=C.toString(16).padStart(4,"0").toUpperCase();a.w(`Unable to load glyph range ${p}, ${k}-${K}. Rendering codepoint U+${N} locally instead. ${S}`)}_charUsesLocalIdeographFontFamily(u){return!!this.localIdeographFontFamily&&a.q(u)}_drawGlyph(u,p,C){const S=p===Ie&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(C),k=S?"ideographTinySDF":"tinySDF";u[k]||(u[k]=this._createTinySDF(S?this.localIdeographFontFamily:p));const K=u[k].draw(String.fromCodePoint(C));return{id:C,bitmap:new a.r({width:K.width||60,height:K.height||60},K.data),metrics:{width:K.glyphWidth/2||24,height:K.glyphHeight/2||24,left:K.glyphLeft/2+.5||0,top:K.glyphTop/2-27.5||-8,advance:K.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(u){const p=u?u.split(","):[];p.push("sans-serif");const C=p.map((S=>/[-\w]+/.test(S)?S:`'${CSS.escape(S)}'`)).join(",");return new Ye.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:C,fontWeight:this._fontWeight(p[0]),fontStyle:this._fontStyle(p[0]),lang:this.lang})}_fontStyle(u){return/italic/i.test(u)?"italic":/oblique/i.test(u)?"oblique":"normal"}_fontWeight(u){const p={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let C;for(const[S,k]of Object.entries(p))new RegExp(`\\b${S}\\b`,"i").test(u)&&(C=`${k}`);return C}destroy(){for(const u in this.entries){const p=this.entries[u];p.tinySDF&&(p.tinySDF=null),p.ideographTinySDF&&(p.ideographTinySDF=null),p.glyphs={},p.requests={},p.ranges={}}this.entries={}}}Ye.loadGlyphRange=function(I,u,p,C){return a._(this,void 0,void 0,(function*(){const S=256*u,k=S+255,K=C.transformRequest(p.replace("{fontstack}",I).replace("{range}",`${S}-${k}`),"Glyphs"),N=yield a.n(K,new AbortController);if(!N||!N.data)throw new Error(`Could not load glyph range. range: ${u}, ${S}-${k}`);const $={};for(const se of a.o(N.data))$[se.id]=se;return $}))},Ye.TinySDF=class{constructor({fontSize:I=24,buffer:u=3,radius:p=8,cutoff:C=.25,fontFamily:S="sans-serif",fontWeight:k="normal",fontStyle:K="normal",lang:N=null}={}){this.buffer=u,this.cutoff=C,this.radius=p,this.lang=N;const $=this.size=I+4*u,se=this._createCanvas($),ue=this.ctx=se.getContext("2d",{willReadFrequently:!0});ue.font=`${K} ${k} ${I}px ${S}`,ue.textBaseline="alphabetic",ue.textAlign="left",ue.fillStyle="black",this.gridOuter=new Float64Array($*$),this.gridInner=new Float64Array($*$),this.f=new Float64Array($),this.z=new Float64Array($+1),this.v=new Uint16Array($)}_createCanvas(I){const u=document.createElement("canvas");return u.width=u.height=I,u}draw(I){const{width:u,actualBoundingBoxAscent:p,actualBoundingBoxDescent:C,actualBoundingBoxLeft:S,actualBoundingBoxRight:k}=this.ctx.measureText(I),K=Math.ceil(p),N=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(k-S))),$=Math.min(this.size-this.buffer,K+Math.ceil(C)),se=N+2*this.buffer,ue=$+2*this.buffer,ye=Math.max(se*ue,0),me=new Uint8ClampedArray(ye),Se={data:me,width:se,height:ue,glyphWidth:N,glyphHeight:$,glyphTop:K,glyphLeft:0,glyphAdvance:u};if(N===0||$===0)return Se;const{ctx:Ke,buffer:Je,gridInner:nt,gridOuter:tt}=this;this.lang&&(Ke.lang=this.lang),Ke.clearRect(Je,Je,N,$),Ke.fillText(I,Je,Je+K);const rt=Ke.getImageData(Je,Je,N,$);tt.fill(xe,0,ye),nt.fill(0,0,ye);for(let dt=0;dt<$;dt++)for(let st=0;st<N;st++){const ft=rt.data[4*(dt*N+st)+3]/255;if(ft===0)continue;const Ct=(dt+Je)*se+st+Je;if(ft===1)tt[Ct]=0,nt[Ct]=xe;else{const lt=.5-ft;tt[Ct]=lt>0?lt*lt:0,nt[Ct]=lt<0?lt*lt:0}}Te(tt,0,0,se,ue,se,this.f,this.v,this.z),Te(nt,Je,Je,N,$,se,this.f,this.v,this.z);for(let dt=0;dt<ye;dt++){const st=Math.sqrt(tt[dt])-Math.sqrt(nt[dt]);me[dt]=Math.round(255-255*(st/this.radius+this.cutoff))}return Se}};class At{constructor(){this.specification=a.u.light.position}possiblyEvaluate(u,p){return a.F(u.expression.evaluate(p))}interpolate(u,p,C){return{x:a.G.number(u.x,p.x,C),y:a.G.number(u.y,p.y,C),z:a.G.number(u.z,p.z,C)}}}let mt;class Ue extends a.E{constructor(u){super(),mt=mt||new a.t({anchor:new a.D(a.u.light.anchor),position:new At,color:new a.D(a.u.light.color),intensity:new a.D(a.u.light.intensity)}),this._transitionable=new a.x(mt,void 0),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,p={}){if(!this._validate(a.y,u,p))for(const C in u){const S=u[C];C.endsWith(a.z)?this._transitionable.setTransition(C.slice(0,-a.z.length),S):this._transitionable.setValue(C,S)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,p,C){return(!C||C.validate!==!1)&&a.B(this,u.call(a.C,{value:p,style:{glyphs:!0,sprite:!0},styleSpec:a.u}))}}const De=new a.t({"sky-color":new a.D(a.u.sky["sky-color"]),"horizon-color":new a.D(a.u.sky["horizon-color"]),"fog-color":new a.D(a.u.sky["fog-color"]),"fog-ground-blend":new a.D(a.u.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.u.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.u.sky["atmosphere-blend"])});class Ge extends a.E{constructor(u){super(),this._transitionable=new a.x(De,void 0),this.setSky(u),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.H(0))}setSky(u,p={}){if(!this._validate(a.J,u,p)){u||(u={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const C in u){const S=u[C];C.endsWith(a.z)?this._transitionable.setTransition(C.slice(0,-a.z.length),S):this._transitionable.setValue(C,S)}}}getSky(){return this._transitionable.serialize()}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,p,C={}){return C?.validate!==!1&&a.B(this,u.call(a.C,a.e({value:p,style:{glyphs:!0,sprite:!0},styleSpec:a.u})))}calculateFogBlendOpacity(u){return u<60?0:u<70?(u-60)/10:1}}class Re{constructor(u,p){this.width=u,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(u,p){const C=u.join(",")+String(p);return this.dashEntry[C]||(this.dashEntry[C]=this.addDash(u,p)),this.dashEntry[C]}getDashRanges(u,p,C){const S=[];let k=u.length%2==1?-u[u.length-1]*C:0,K=u[0]*C,N=!0;S.push({left:k,right:K,isDash:N,zeroLength:u[0]===0});let $=u[0];for(let se=1;se<u.length;se++){N=!N;const ue=u[se];k=$*C,$+=ue,K=$*C,S.push({left:k,right:K,isDash:N,zeroLength:ue===0})}return S}addRoundDash(u,p,C){const S=p/2;for(let k=-C;k<=C;k++){const K=this.width*(this.nextRow+C+k);let N=0,$=u[N];for(let se=0;se<this.width;se++){se/$.right>1&&($=u[++N]);const ue=Math.abs(se-$.left),ye=Math.abs(se-$.right),me=Math.min(ue,ye);let Se;const Ke=k/C*(S+1);if($.isDash){const Je=S-Math.abs(Ke);Se=Math.sqrt(me*me+Je*Je)}else Se=S-Math.sqrt(me*me+Ke*Ke);this.data[K+se]=Math.max(0,Math.min(255,Se+128))}}}addRegularDash(u){for(let N=u.length-1;N>=0;--N){const $=u[N],se=u[N+1];$.zeroLength?u.splice(N,1):se&&se.isDash===$.isDash&&(se.left=$.left,u.splice(N,1))}const p=u[0],C=u[u.length-1];p.isDash===C.isDash&&(p.left=C.left-this.width,C.right=p.right+this.width);const S=this.width*this.nextRow;let k=0,K=u[k];for(let N=0;N<this.width;N++){N/K.right>1&&(K=u[++k]);const $=Math.abs(N-K.left),se=Math.abs(N-K.right),ue=Math.min($,se);this.data[S+N]=Math.max(0,Math.min(255,(K.isDash?ue:-ue)+128))}}addDash(u,p){const C=p?7:0,S=2*C+1;if(this.nextRow+S>this.height)return a.w("LineAtlas out of space"),null;let k=0;for(let N=0;N<u.length;N++)k+=u[N];if(k!==0){const N=this.width/k,$=this.getDashRanges(u,this.width,N);p?this.addRoundDash($,N,C):this.addRegularDash($)}const K={y:this.nextRow+C,height:2*C,width:k};return this.nextRow+=S,this.dirty=!0,K}bind(u){const p=u.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))}}const St="maplibre_preloaded_worker_pool";class ut{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<ut.workerCount;)this.workers.push(new Worker(a.c.WORKER_URL));return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach((p=>{p.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[St]}numActive(){return Object.keys(this.active).length}}const kt=Math.floor(B.hardwareConcurrency/2);let Ut,Le;function ke(){return Ut||(Ut=new ut),Ut}ut.workerCount=a.K(globalThis)?Math.max(Math.min(kt,3),1):1;class Oe{constructor(u,p){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=p;const C=this.workerPool.acquire(p);for(let S=0;S<C.length;S++){const k=new a.L(C[S],p);k.name=`Worker ${S}`,this.actors.push(k)}if(!this.actors.length)throw new Error("No actors found")}broadcast(u,p){const C=[];for(const S of this.actors)C.push(S.sendAsync({type:u,data:p}));return Promise.all(C)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(u=!0){this.actors.forEach((p=>{p.remove()})),this.actors=[],u&&this.workerPool.release(this.id)}registerMessageHandler(u,p){for(const C of this.actors)C.registerMessageHandler(u,p)}unregisterMessageHandler(u){for(const p of this.actors)p.unregisterMessageHandler(u)}}function Ze(){return Le||(Le=new Oe(ke(),a.M),Le.registerMessageHandler("GR",((I,u,p)=>a.m(u,p)))),Le}function bt(I,u){const p=a.N();return a.O(p,p,[1,1,0]),a.Q(p,p,[.5*I.width,.5*I.height,1]),I.calculatePosMatrix?a.S(p,p,I.calculatePosMatrix(u.toUnwrapped())):p}function yt(I,u,p,C,S,k,K){var N;const $=(function(me,Se,Ke){if(me)for(const Je of me){const nt=Se[Je];if(nt&&nt.source===Ke&&nt.type==="fill-extrusion")return!0}else for(const Je in Se){const nt=Se[Je];if(nt.source===Ke&&nt.type==="fill-extrusion")return!0}return!1})((N=S?.layers)!==null&&N!==void 0?N:null,u,I.id),se=k.maxPitchScaleFactor(),ue=I.tilesIn(C,se,$);ue.sort(Mt);const ye=[];for(const me of ue)ye.push({wrappedTileID:me.tileID.wrapped().key,queryResults:me.tile.queryRenderedFeatures(u,p,I.getState(),me.queryGeometry,me.cameraQueryGeometry,me.scale,S,k,se,bt(k,me.tileID),K?(Se,Ke)=>K(me.tileID,Se,Ke):void 0)});return(function(me,Se){for(const Ke in me)for(const Je of me[Ke])Kt(Je,Se);return me})((function(me){const Se={},Ke={};for(const Je of me){const nt=Je.queryResults,tt=Je.wrappedTileID,rt=Ke[tt]=Ke[tt]||{};for(const dt in nt){const st=nt[dt],ft=rt[dt]=rt[dt]||{},Ct=Se[dt]=Se[dt]||[];for(const lt of st)ft[lt.featureIndex]||(ft[lt.featureIndex]=!0,Ct.push(lt))}}return Se})(ye),I)}function Mt(I,u){const p=I.tileID,C=u.tileID;return p.overscaledZ-C.overscaledZ||p.canonical.y-C.canonical.y||p.wrap-C.wrap||p.canonical.x-C.canonical.x}function Kt(I,u){const p=I.feature,C=u.getFeatureState(p.layer["source-layer"],p.id);p.source=p.layer.source,p.layer["source-layer"]&&(p.sourceLayer=p.layer["source-layer"]),p.state=C}function Dt(I,u,p){return a._(this,void 0,void 0,(function*(){let C=I;if(I.url?C=(yield a.j(u.transformRequest(I.url,"Source"),p)).data:yield B.frameAsync(p),!C)return null;const S=a.U(a.e(C,I),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in C&&C.vector_layers&&(S.vectorLayerIds=C.vector_layers.map((k=>k.id))),S}))}class en{constructor(u,p){u&&(p?this.setSouthWest(u).setNorthEast(p):Array.isArray(u)&&(u.length===4?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1])))}setNorthEast(u){return this._ne=u instanceof a.V?new a.V(u.lng,u.lat):a.V.convert(u),this}setSouthWest(u){return this._sw=u instanceof a.V?new a.V(u.lng,u.lat):a.V.convert(u),this}extend(u){const p=this._sw,C=this._ne;let S,k;if(u instanceof a.V)S=u,k=u;else{if(!(u instanceof en))return Array.isArray(u)?u.length===4||u.every(Array.isArray)?this.extend(en.convert(u)):this.extend(a.V.convert(u)):u&&("lng"in u||"lon"in u)&&"lat"in u?this.extend(a.V.convert(u)):this;if(S=u._sw,k=u._ne,!S||!k)return this}return p||C?(p.lng=Math.min(S.lng,p.lng),p.lat=Math.min(S.lat,p.lat),C.lng=Math.max(k.lng,C.lng),C.lat=Math.max(k.lat,C.lat)):(this._sw=new a.V(S.lng,S.lat),this._ne=new a.V(k.lng,k.lat)),this}getCenter(){return new a.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.V(this.getWest(),this.getNorth())}getSouthEast(){return new a.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(u){const{lng:p,lat:C}=a.V.convert(u);let S=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(S=this._sw.lng>=p&&p>=this._ne.lng),this._sw.lat<=C&&C<=this._ne.lat&&S}intersects(u){if(!((u=en.convert(u)).getNorth()>=this.getSouth()&&u.getSouth()<=this.getNorth()))return!1;const p=a.W(this.getWest(),-180,180),C=a.W(this.getEast(),-180,180),S=a.W(u.getWest(),-180,180),k=a.W(u.getEast(),-180,180),K=p>=C,N=S>=k;return!(!K||!N)||(K?k>=p||S<=C:N?C>=S||p<=k:S<=C&&k>=p)}static convert(u){return u instanceof en?u:u&&new en(u)}static fromLngLat(u,p=0){const C=360*p/40075017,S=C/Math.cos(Math.PI/180*u.lat);return new en(new a.V(u.lng-S,u.lat-C),new a.V(u.lng+S,u.lat+C))}adjustAntiMeridian(){const u=new a.V(this._sw.lng,this._sw.lat),p=new a.V(this._ne.lng,this._ne.lat);return new en(u,u.lng>p.lng?new a.V(p.lng+360,p.lat):p)}}class Gn{constructor(u,p,C){this.bounds=en.convert(this.validateBounds(u)),this.minzoom=p||0,this.maxzoom=C||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const p=Math.pow(2,u.z),C=Math.floor(a.Y(this.bounds.getWest())*p),S=Math.floor(a.X(this.bounds.getNorth())*p),k=Math.ceil(a.Y(this.bounds.getEast())*p),K=Math.ceil(a.X(this.bounds.getSouth())*p);return u.x>=C&&u.x<k&&u.y>=S&&u.y<K}}class Nn extends a.E{constructor(u,p,C,S){if(super(),this.id=u,this.dispatcher=C,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.U(p,["url","scheme","tileSize","promoteId","encoding"])),this._options=a.e({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(S)}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield Dt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),u&&(a.e(this,u),u.bounds&&(this.tileBounds=new Gn(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(u){this._tileJSONRequest=null,this._loaded=!0,a.Z(u)||this.fire(new a.k(u))}}))}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}setSourceProperty(u){this._tileJSONRequest&&this._tileJSONRequest.abort(),u(),this.load()}setTiles(u){return this.setSourceProperty((()=>{this._options.tiles=u})),this}setUrl(u){return this.setSourceProperty((()=>{this.url=u,this._options.url=u})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(u){return a._(this,void 0,void 0,(function*(){const p=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C={request:this.map._requestManager.transformRequest(p,"Tile"),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(u)};C.request.collectResourceTiming=this._collectResourceTiming;let S="RT";if(u.actor&&u.state!=="expired"){if(u.state==="loading")return new Promise(((k,K)=>{u.reloadPromise={resolve:k,reject:K}}))}else u.actor=this.dispatcher.getActor(),S="LT";u.abortController=new AbortController;try{const k=yield u.actor.sendAsync({type:S,data:C},u.abortController);if(delete u.abortController,u.aborted)return;this._afterTileLoadWorkerResponse(u,k)}catch(k){if(delete u.abortController,u.aborted)return;if(k&&k.status!==404)throw k;this._afterTileLoadWorkerResponse(u,null)}}))}_getOverzoomParameters(u){if(u.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const p=u.tileID.scaledTo(this.maxzoom).canonical,C=p.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:p,overzoomRequest:this.map._requestManager.transformRequest(C,"Tile")}}_afterTileLoadWorkerResponse(u,p){if(p&&p.resourceTiming&&(u.resourceTiming=p.resourceTiming),p&&this.map._refreshExpiredTiles&&u.setExpiryData(p),u.loadVectorData(p,this.map.painter),u.reloadPromise){const C=u.reloadPromise;u.reloadPromise=null,this.loadTile(u).then(C.resolve).catch(C.reject)}}abortTile(u){return a._(this,void 0,void 0,(function*(){u.abortController&&(u.abortController.abort(),delete u.abortController),u.actor&&(yield u.actor.sendAsync({type:"AT",data:{uid:u.uid,type:this.type,source:this.id}}))}))}unloadTile(u){return a._(this,void 0,void 0,(function*(){u.unloadVectorData(),u.actor&&(yield u.actor.sendAsync({type:"RMT",data:{uid:u.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Si extends a.E{constructor(u,p,C,S){super(),this.id=u,this.dispatcher=C,this.setEventedParent(S),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},p),a.e(this,a.U(p,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,(function*(u=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const p=yield Dt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,p&&(a.e(this,p),p.bounds&&(this.tileBounds=new Gn(p.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:u})))}catch(p){this._tileJSONRequest=null,this._loaded=!0,a.Z(p)||this.fire(new a.k(p))}}))}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(u){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),u(),this.load(!0)}setTiles(u){return this.setSourceProperty((()=>{this._options.tiles=u})),this}setUrl(u){return this.setSourceProperty((()=>{this.url=u,this._options.url=u})),this}serialize(){return a.e({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u){return a._(this,void 0,void 0,(function*(){const p=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);u.abortController=new AbortController;try{const C=yield q.getImage(this.map._requestManager.transformRequest(p,"Tile"),u.abortController,this.map._refreshExpiredTiles);if(delete u.abortController,u.aborted)return void(u.state="unloaded");if(C&&C.data){this.map._refreshExpiredTiles&&(C.cacheControl||C.expires)&&u.setExpiryData({cacheControl:C.cacheControl,expires:C.expires});const S=this.map.painter.context,k=S.gl,K=C.data;u.texture=this.map.painter.getTileTexture(K.width),u.texture?u.texture.update(K,{useMipmap:!0}):(u.texture=new a.T(S,K,k.RGBA,{useMipmap:!0}),u.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST)),u.state="loaded"}}catch(C){if(delete u.abortController,u.aborted)u.state="unloaded";else if(C)throw u.state="errored",C}}))}abortTile(u){return a._(this,void 0,void 0,(function*(){u.abortController&&(u.abortController.abort(),delete u.abortController)}))}unloadTile(u){return a._(this,void 0,void 0,(function*(){u.texture&&this.map.painter.saveTileTexture(u.texture)}))}hasTransition(){return!1}}class Un extends Si{constructor(u,p,C,S){super(u,p,C,S),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox",this.redFactor=p.redFactor,this.greenFactor=p.greenFactor,this.blueFactor=p.blueFactor,this.baseShift=p.baseShift}loadTile(u){return a._(this,void 0,void 0,(function*(){const p=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C=this.map._requestManager.transformRequest(p,"Tile");u.neighboringTiles=this._getNeighboringTiles(u.tileID),u.abortController=new AbortController;try{const S=yield q.getImage(C,u.abortController,this.map._refreshExpiredTiles);if(delete u.abortController,u.aborted)return void(u.state="unloaded");if(S&&S.data){const k=S.data;this.map._refreshExpiredTiles&&(S.cacheControl||S.expires)&&u.setExpiryData({cacheControl:S.cacheControl,expires:S.expires});const K=a.b(k)&&a.$()?k:yield this.readImageNow(k),N={type:this.type,uid:u.uid,source:this.id,rawImageData:K,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!u.actor||u.state==="expired"){u.actor=this.dispatcher.getActor();const $=yield u.actor.sendAsync({type:"LDT",data:N});u.dem=$,u.needsHillshadePrepare=!0,u.needsTerrainPrepare=!0,u.state="loaded"}}}catch(S){if(delete u.abortController,u.aborted)u.state="unloaded";else if(S)throw u.state="errored",S}}))}readImageNow(u){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&a.a0()){const p=u.width+2,C=u.height+2;try{return new a.R({width:p,height:C},yield a.a1(u,-1,-1,p,C))}catch{}}return B.getImageData(u,1)}))}_getNeighboringTiles(u){const p=u.canonical,C=Math.pow(2,p.z),S=(p.x-1+C)%C,k=p.x===0?u.wrap-1:u.wrap,K=(p.x+1+C)%C,N=p.x+1===C?u.wrap+1:u.wrap,$={};return $[new a.a2(u.overscaledZ,k,p.z,S,p.y).key]={backfilled:!1},$[new a.a2(u.overscaledZ,N,p.z,K,p.y).key]={backfilled:!1},p.y>0&&($[new a.a2(u.overscaledZ,k,p.z,S,p.y-1).key]={backfilled:!1},$[new a.a2(u.overscaledZ,u.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},$[new a.a2(u.overscaledZ,N,p.z,K,p.y-1).key]={backfilled:!1}),p.y+1<C&&($[new a.a2(u.overscaledZ,k,p.z,S,p.y+1).key]={backfilled:!1},$[new a.a2(u.overscaledZ,u.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},$[new a.a2(u.overscaledZ,N,p.z,K,p.y+1).key]={backfilled:!1}),$}unloadTile(u){return a._(this,void 0,void 0,(function*(){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&(yield u.actor.sendAsync({type:"RDT",data:{type:this.type,uid:u.uid,source:this.id}}))}))}}function Ln(I){return I.type==="GeometryCollection"?I.geometries.map((u=>u.coordinates)).flat(1/0):I.coordinates.flat(1/0)}function Tn(I){const u=new en;let p;switch(I.type){case"FeatureCollection":p=I.features.map((C=>Ln(C.geometry))).flat(1/0);break;case"Feature":p=Ln(I.geometry);break;default:p=Ln(I)}if(p.length==0)return u;for(let C=0;C<p.length-1;C+=2)u.extend([p[C],p[C+1]]);return u}class ti extends a.E{constructor(u,p,C,S){super(),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:p.data},this.actor=C.getActor(),this.setEventedParent(S),this._data=typeof p.data=="string"?{url:p.data}:{geojson:p.data},this._options=a.e({},p),this._collectResourceTiming=p.collectResourceTiming,p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId,p.clusterMaxZoom!==void 0&&this.maxzoom<=p.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${p.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(p.buffer!==void 0?p.buffer:128),tolerance:this._pixelsToTileUnits(p.tolerance!==void 0?p.tolerance:.375),extent:a.a5,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(p.clusterMaxZoom),minPoints:Math.max(2,p.clusterMinPoints||2),extent:a.a5,radius:this._pixelsToTileUnits(p.clusterRadius||50),log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(u){return u*(a.a5/this.tileSize)}_getClusterMaxZoom(u){const p=u?Math.round(u):this.maxzoom-1;return Number.isInteger(u)||u===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${u}" rounded to "${p}"`),p}load(){return a._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(u){this.map=u,this.load()}setData(u,p){this._data=typeof u=="string"?{url:u}:{geojson:u},this._pendingWorkerUpdate={data:u};const C=this._updateWorkerData();return p?C:this}updateData(u,p){this._pendingWorkerUpdate.diff=a.a6(this._pendingWorkerUpdate.diff,u);const C=this._updateWorkerData();return p?C:this}getData(){return a._(this,void 0,void 0,(function*(){const u=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:u})}))}getBounds(){return a._(this,void 0,void 0,(function*(){return Tn(yield this.getData())}))}setClusterOptions(u){return this.workerOptions.cluster=u.cluster,u.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(u.clusterRadius)),u.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(u.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(u){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:u,source:this.id}})}getClusterChildren(u){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:u,source:this.id}})}getClusterLeaves(u,p,C){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:u,limit:p,offset:C}})}_updateWorkerData(){return a._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void a.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:u,diff:p}=this._pendingWorkerUpdate,C=a.e({type:this.type},this.workerOptions);u!==void 0?(typeof u=="string"?(C.request=this.map._requestManager.transformRequest(B.resolveURL(u),"Source"),C.request.collectResourceTiming=this._collectResourceTiming):C.data=u,this._pendingWorkerUpdate.data=void 0):p&&(C.dataDiff=p,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new a.l("dataloading",{dataType:"source"}));try{const S=yield this.actor.sendAsync({type:"LD",data:C});if(this._isUpdatingWorker=!1,this._removed||S.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));p&&this._applyDiff(p);let k=null;S.resourceTiming&&S.resourceTiming[this.id]&&(k=S.resourceTiming[this.id].slice(0));const K={dataType:"source"};this._collectResourceTiming&&k&&k.length>0&&a.e(K,{resourceTiming:k}),this.fire(new a.l("data",Object.assign(Object.assign({},K),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},K),{sourceDataType:"content",shouldReloadTileOptions:this._getShouldReloadTileOptions(p)})))}catch(S){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(S))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiff(u){const p=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){if(!a.a7(this._data.geojson,p))throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:a.a8(this._data.geojson,p)}}this._data.updateable&&a.a9(this._data.updateable,u,p)}_getShouldReloadTileOptions(u){if(this._options.cluster||!u||u.removeAll)return;const{add:p=[],update:C=[],remove:S=[]}=u||{},k=new Set([...C.map((K=>K.id)),...S]);for(const K of k.values())if(typeof K!="number"&&this.promoteId==null)return void a.w(`GeoJSONSource "${this.id}": updateData is slower when using string GeoJSON feature IDs. Consider using promoteId or numeric IDs for better performance.`);return{nextBounds:[...C.map((K=>K.newGeometry)),...p.map((K=>K.geometry))].filter(Boolean).map((K=>Tn(K))),prevIds:k}}shouldReloadTile(u,{nextBounds:p,prevIds:C}){if(!u.latestFeatureIndex)return u.state!=="unloaded";const S=u.latestFeatureIndex.loadVTLayers();for(let $=0;$<u.latestFeatureIndex.featureIndexArray.length;$++){const se=u.latestFeatureIndex.featureIndexArray.get($),ue=S[a.aa].feature(se.featureIndex),ye=u.latestFeatureIndex.getId(ue,a.aa);if(C.has(ye))return!0}const{buffer:k,extent:K}=this.workerOptions.geojsonVtOptions,N=(function({x:$,y:se,z:ue},ye=0){const me=a.a3(($-ye)/Math.pow(2,ue)),Se=a.a4((se+1+ye)/Math.pow(2,ue)),Ke=a.a3(($+1+ye)/Math.pow(2,ue)),Je=a.a4((se-ye)/Math.pow(2,ue));return new en([me,Se],[Ke,Je])})(u.tileID.canonical,k/K);for(const $ of p)if(N.intersects($))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(u){return a._(this,void 0,void 0,(function*(){const p=u.actor?"RT":"LT";u.actor=this.actor;const C={type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};u.abortController=new AbortController;const S=yield this.actor.sendAsync({type:p,data:C},u.abortController);delete u.abortController,u.unloadVectorData(),u.aborted||u.loadVectorData(S,this.map.painter,p==="RT")}))}abortTile(u){return a._(this,void 0,void 0,(function*(){u.abortController&&(u.abortController.abort(),delete u.abortController),u.aborted=!0}))}unloadTile(u){return a._(this,void 0,void 0,(function*(){u.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:u.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class Bn extends a.E{constructor(u,p,C,S){super(),this.flippedWindingOrder=!1,this.id=u,this.dispatcher=C,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(S),this.options=p}load(u){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const p=yield q.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,p&&p.data&&(this.image=p.data,u&&(this.coordinates=u),this._finishLoading())}catch(p){this._request=null,this._loaded=!0,a.Z(p)||this.fire(new a.k(p))}}))}loaded(){return this._loaded}updateImage(u){return u.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=u.url,this.load(u.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(u){this.coordinates=u;const p=u.map(a.ab.fromLngLat);var C;return this.tileID=(function(S){const k=a.ac.fromPoints(S),K=k.width(),N=k.height(),$=Math.max(K,N),se=Math.max(0,Math.floor(-Math.log($)/Math.LN2)),ue=Math.pow(2,se);return new a.ae(se,Math.floor((k.minX+k.maxX)/2*ue),Math.floor((k.minY+k.maxY)/2*ue))})(p),this.terrainTileRanges=this._getOverlappingTileRanges(p),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=p.map((S=>this.tileID.getTilePoint(S)._round())),this.flippedWindingOrder=((C=this.tileCoords)[1].x-C[0].x)*(C[2].y-C[0].y)-(C[1].y-C[0].y)*(C[2].x-C[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const u=this.map.painter.context,p=u.gl;this.texture||(this.texture=new a.T(u,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let C=!1;for(const S in this.tiles){const k=this.tiles[S];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture,C=!0)}C&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(u){return a._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={}):u.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(u){const{minX:p,minY:C,maxX:S,maxY:k}=a.ac.fromPoints(u),K={};for(let N=0;N<=a.ad;N++){const $=Math.pow(2,N),se=Math.floor(p*$),ue=Math.floor(C*$),ye=Math.floor(S*$),me=Math.floor(k*$);K[N]={minTileX:se,minTileY:ue,maxTileX:ye,maxTileY:me}}return K}}class je extends Bn{constructor(u,p,C,S){super(u,p,C,S),this.roundZoom=!0,this.type="video",this.options=p}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1;const u=this.options;this.urls=[];for(const p of u.urls)this.urls.push(this.map._requestManager.transformRequest(p,"Source").url);try{const p=yield a.af(this.urls);if(this._loaded=!0,!p)return;this.video=p,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(p){this.fire(new a.k(p))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(u){if(this.video){const p=this.video.seekable;u<p.start(0)||u>p.end(0)?this.fire(new a.k(new a.ag(`sources.${this.id}`,null,`Playback for this video can be set only between the ${p.start(0)} and ${p.end(0)}-second mark.`))):this.video.currentTime=u}}getVideo(){return this.video}onAdd(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const u=this.map.painter.context,p=u.gl;this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(u,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let C=!1;for(const S in this.tiles){const k=this.tiles[S];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture,C=!0)}C&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class H extends Bn{constructor(u,p,C,S){super(u,p,C,S),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some((k=>!Array.isArray(k)||k.length!==2||k.some((K=>typeof K!="number"))))||this.fire(new a.k(new a.ag(`sources.${u}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.ag(`sources.${u}`,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new a.k(new a.ag(`sources.${u}`,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.ag(`sources.${u}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.ag(`sources.${u}`,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const p=this.map.painter.context,C=p.gl;this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new a.T(p,this.canvas,C.RGBA,{premultiply:!0}),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let S=!1;for(const k in this.tiles){const K=this.tiles[k];K.state!=="loaded"&&(K.state="loaded",K.texture=this.texture,S=!0)}S&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const u of[this.canvas.width,this.canvas.height])if(isNaN(u)||u<=0)return!0;return!1}}const j={},Q=I=>{switch(I){case"geojson":return ti;case"image":return Bn;case"raster":return Si;case"raster-dem":return Un;case"vector":return Nn;case"video":return je;case"canvas":return H}return j[I]},he="RTLPluginLoaded";class Me extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ze()}_syncState(u){return this.status=u,this.dispatcher.broadcast("SRPS",{pluginStatus:u,pluginURL:this.url}).catch((p=>{throw this.status="error",p}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(u){return a._(this,arguments,void 0,(function*(p,C=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=B.resolveURL(p),!this.url)throw new Error(`requested url ${p} is invalid`);if(this.status==="unavailable"){if(!C)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return a._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(he))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ne=null;function Qe(){return Ne||(Ne=new Me),Ne}var it,vt;(function(I){I[I.Base=0]="Base",I[I.Parent=1]="Parent"})(it||(it={})),(function(I){I[I.Departing=0]="Departing",I[I.Incoming=1]="Incoming"})(vt||(vt={}));class $e{constructor(u,p){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=u,this.uid=a.ah(),this.uses=0,this.tileSize=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(u){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(u||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:u,fadingDirection:p,fadingParentID:C,fadeEndTime:S}){this.resetFadeLogic(),this.fadingRole=u,this.fadingDirection=p,this.fadingParentID=C,this.fadeEndTime=S}setSelfFadeLogic(u){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=u}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=U(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(u){this.demTexture&&u.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(u,p,C){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData,this.latestFeatureIndex.encoding=u.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=(function(S,k){const K={};if(!k)return K;for(const N of S){const $=N.layerIds.map((se=>k.getLayer(se))).filter(Boolean);if($.length!==0){N.layers=$,N.stateDependentLayerIds&&(N.stateDependentLayers=N.stateDependentLayerIds.map((se=>$.filter((ue=>ue.id===se))[0])));for(const se of $)K[se.id]=N}}return K})(u.buckets,p?.style),this.hasSymbolBuckets=!1;for(const S in this.buckets){const k=this.buckets[S];if(k instanceof a.aj){if(this.hasSymbolBuckets=!0,!C)break;k.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const S in this.buckets){const k=this.buckets[S];if(k instanceof a.aj&&k.hasRTLText){this.hasRTLText=!0,Qe().lazyLoad();break}}this.queryPadding=0;for(const S in this.buckets){const k=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(S).queryRadius(k))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage),this.dashPositions=u.dashPositions}else this.collisionBoxArray=new a.ai}unloadVectorData(){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(u){return this.buckets[u.id]}upload(u){for(const C in this.buckets){const S=this.buckets[C];S.uploadPending()&&S.upload(u)}const p=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(u,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(u,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)}prepare(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)}queryRenderedFeatures(u,p,C,S,k,K,N,$,se,ue,ye){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:S,cameraQueryGeometry:k,scale:K,tileSize:this.tileSize,pixelPosMatrix:ue,transform:$,params:N,queryPadding:this.queryPadding*se,getElevation:ye},u,p,C):{}}querySourceFeatures(u,p){const C=this.latestFeatureIndex;if(!C||!C.rawTileData)return;const S=C.loadVTLayers(),k=p&&p.sourceLayer?p.sourceLayer:"",K=S[a.aa]||S[k];if(!K)return;const N=a.ak(p?.filter,p?.globalState),{z:$,x:se,y:ue}=this.tileID.canonical,ye={z:$,x:se,y:ue};for(let me=0;me<K.length;me++){const Se=K.feature(me);if(N.needGeometry){const nt=a.al(Se,!0);if(!N.filter(new a.H(this.tileID.overscaledZ),nt,this.tileID.canonical))continue}else if(!N.filter(new a.H(this.tileID.overscaledZ),Se))continue;const Ke=C.getId(Se,k),Je=new a.am(Se,$,se,ue,Ke);Je.tile=ye,u.push(Je)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(u){const p=this.expirationTime;if(u.cacheControl){const C=a.an(u.cacheControl);C["max-age"]&&(this.expirationTime=Date.now()+1e3*C["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){const C=Date.now();let S=!1;if(this.expirationTime>C)S=!1;else if(p)if(this.expirationTime<p)S=!0;else{const k=this.expirationTime-p;k?this.expirationTime=C+Math.max(k,3e4):S=!0}else S=!0;S?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(u,p){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(u).length===0)return;const C=this.latestFeatureIndex.loadVTLayers();for(const S in this.buckets){if(!p.style.hasLayer(S))continue;const k=this.buckets[S],K=k.layers[0].sourceLayer||a.aa,N=C[K],$=u[K];if(!N||!$||Object.keys($).length===0)continue;k.update($,N,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const se=p&&p.style&&p.style.getLayer(S);se&&(this.queryPadding=Math.max(this.queryPadding,se.queryRadius(k)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<U()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(u){this.symbolFadeHoldUntil=U()+u}setDependencies(u,p){const C={};for(const S of p)C[S]=!0;this.dependencies[u]=C}hasDependency(u,p){for(const C of u){const S=this.dependencies[C];if(S){for(const k of p)if(S[k])return!0}}return!1}}class ot{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(u,p,C){const S=String(p);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][S]=this.stateChanges[u][S]||{},a.e(this.stateChanges[u][S],C),this.deletedStates[u]===null){this.deletedStates[u]={};for(const k in this.state[u])k!==S&&(this.deletedStates[u][k]=null)}else if(this.deletedStates[u]&&this.deletedStates[u][S]===null){this.deletedStates[u][S]={};for(const k in this.state[u][S])C[k]||(this.deletedStates[u][S][k]=null)}else for(const k in C)this.deletedStates[u]&&this.deletedStates[u][S]&&this.deletedStates[u][S][k]===null&&delete this.deletedStates[u][S][k]}removeFeatureState(u,p,C){if(this.deletedStates[u]===null)return;const S=String(p);if(this.deletedStates[u]=this.deletedStates[u]||{},C&&p!==void 0)this.deletedStates[u][S]!==null&&(this.deletedStates[u][S]=this.deletedStates[u][S]||{},this.deletedStates[u][S][C]=null);else if(p!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][S])for(C in this.deletedStates[u][S]={},this.stateChanges[u][S])this.deletedStates[u][S][C]=null;else this.deletedStates[u][S]=null;else this.deletedStates[u]=null}getState(u,p){const C=String(p),S=a.e({},(this.state[u]||{})[C],(this.stateChanges[u]||{})[C]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){const k=this.deletedStates[u][p];if(k===null)return{};for(const K in k)delete S[K]}return S}initializeTileState(u,p){u.setFeatureState(this.state,p)}coalesceChanges(u,p){const C={};for(const S in this.stateChanges){this.state[S]=this.state[S]||{};const k={};for(const K in this.stateChanges[S])this.state[S][K]||(this.state[S][K]={}),a.e(this.state[S][K],this.stateChanges[S][K]),k[K]=this.state[S][K];C[S]=k}for(const S in this.deletedStates){this.state[S]=this.state[S]||{};const k={};if(this.deletedStates[S]===null)for(const K in this.state[S])k[K]={},this.state[S][K]={};else for(const K in this.deletedStates[S]){if(this.deletedStates[S][K]===null)this.state[S][K]={};else for(const N of Object.keys(this.deletedStates[S][K]))delete this.state[S][K][N];k[K]=this.state[S][K]}C[S]=C[S]||{},a.e(C[S],k)}this.stateChanges={},this.deletedStates={},Object.keys(C).length!==0&&u.setFeatureState(C,p)}}const b=89.25;function Rt(I,u){const p=a.ao(u.lat,-a.ap,a.ap);return new a.P(a.Y(u.lng)*I,a.X(p)*I)}function mn(I,u){return new a.ab(u.x/I,u.y/I).toLngLat()}function bn(I){return I.cameraToCenterDistance*Math.min(.85*Math.tan(a.aq(90-I.pitch)),Math.tan(a.aq(b-I.pitch)))}function Cn(I,u){const p=I.canonical,C=u/a.ar(p.z),S=p.x+Math.pow(2,p.z)*I.wrap,k=a.as(new Float64Array(16));return a.O(k,k,[S*C,p.y*C,0]),a.Q(k,k,[C/a.a5,C/a.a5,1]),k}function xt(I,u,p,C,S){const k=a.ab.fromLngLat(I,u),K=S*a.at(1,I.lat),{x:N,y:$,z:se}=Ci(p,C);return new a.ab(k.x+K*-N,k.y+K*-$,k.z+K*-se)}function Ci(I,u){const p=a.aq(I),C=a.aq(u),S=Math.cos(-p),k=Math.sin(p);return{x:k*Math.sin(C),y:-k*Math.cos(C),z:S}}function Ki(I,u,p){const C=u.intersectsFrustum(I);if(!p||C===0)return C;const S=u.intersectsPlane(p);return S===0?0:C===2&&S===2?2:1}function Wn(I,u,p){let C=0;const S=(p-u)/10;for(let k=0;k<10;k++)C+=S*Math.pow(Math.cos(u+(k+.5)/10*(p-u)),I);return C}function Hn(I,u){return function(p,C,S,k,K){const N=2*((I-1)/a.au(Math.cos(a.aq(b-K))/Math.cos(a.aq(b)))-1),$=Math.acos(S/k),se=2*Wn(N-1,0,a.aq(K/2)),ue=Math.min(a.aq(b),$+a.aq(K/2)),ye=Wn(N-1,Math.min(ue,$-a.aq(K/2)),ue),me=Math.atan(C/S),Se=Math.hypot(C,S);let Ke=p;return Ke+=a.au(k/Se/Math.max(.5,Math.cos(a.aq(K/2)))),Ke+=N*a.au(Math.cos(me))/2,Ke-=a.au(Math.max(1,ye/se/u))/2,Ke}}const Qi=Hn(9.314,3);function Wi(I,u){const p=(u.roundZoom?Math.round:Math.floor)(I.zoom+a.au(I.tileSize/u.tileSize));return Math.max(0,p)}function Ri(I,u){const p=I.getCameraFrustum(),C=I.getClippingPlane(),S=I.screenPointToMercatorCoordinate(I.getCameraPoint()),k=a.ab.fromLngLat(I.center,I.elevation);S.z=k.z+Math.cos(I.pitchInRadians)*I.cameraToCenterDistance/I.worldSize;const K=I.getCoveringTilesDetailsProvider(),N=K.allowVariableZoom(I,u),$=Wi(I,u),se=u.minzoom||0,ue=u.maxzoom!==void 0?u.maxzoom:I.maxZoom,ye=Math.min(Math.max(0,$),ue),me=Math.pow(2,ye),Se=[me*S.x,me*S.y,0],Ke=[me*k.x,me*k.y,0],Je=Math.hypot(k.x-S.x,k.y-S.y),nt=Math.abs(k.z-S.z),tt=Math.hypot(Je,nt),rt=ft=>({zoom:0,x:0,y:0,wrap:ft,fullyVisible:!1}),dt=[],st=[];if(I.renderWorldCopies&&K.allowWorldCopies())for(let ft=1;ft<=3;ft++)dt.push(rt(-ft)),dt.push(rt(ft));for(dt.push(rt(0));dt.length>0;){const ft=dt.pop(),Ct=ft.x,lt=ft.y;let Ot=ft.fullyVisible;const Ft={x:Ct,y:lt,z:ft.zoom},zt=K.getTileBoundingVolume(Ft,ft.wrap,I.elevation,u);if(!Ot){const Rn=Ki(p,zt,C);if(Rn===0)continue;Ot=Rn===2}const Gt=K.distanceToTile2d(S.x,S.y,Ft,zt);let Qt=$;N&&(Qt=(u.calculateTileZoom||Qi)(I.zoom+a.au(I.tileSize/u.tileSize),Gt,nt,tt,I.fov)),Qt=(u.roundZoom?Math.round:Math.floor)(Qt),Qt=Math.max(0,Qt);const dn=Math.min(Qt,ue);if(ft.wrap=K.getWrap(k,Ft,ft.wrap),ft.zoom>=dn){if(ft.zoom<se)continue;const Rn=ye-ft.zoom,An=Se[0]-.5-(Ct<<Rn),ai=Se[1]-.5-(lt<<Rn),nr=u.reparseOverscaled?Math.max(ft.zoom,Qt):ft.zoom;st.push({tileID:new a.a2(ft.zoom===ue?nr:ft.zoom,ft.wrap,ft.zoom,Ct,lt),distanceSq:a.av([Ke[0]-.5-Ct,Ke[1]-.5-lt]),tileDistanceToCamera:Math.sqrt(An*An+ai*ai)})}else for(let Rn=0;Rn<4;Rn++)dt.push({zoom:ft.zoom+1,x:(Ct<<1)+Rn%2,y:(lt<<1)+(Rn>>1),wrap:ft.wrap,fullyVisible:Ot})}return st.sort(((ft,Ct)=>ft.distanceSq-Ct.distanceSq)).map((ft=>ft.tileID))}const qi=a.ac.fromPoints([new a.P(0,0),new a.P(a.a5,a.a5)]);function Li(I){return I==="raster"||I==="image"||I==="video"}function Er(I,u,p,C,S,k,K){if(!u.hasData())return!1;const{tileID:N,fadingRole:$,fadingDirection:se,fadingParentID:ue}=u;if($===it.Base&&se===vt.Incoming&&ue)return p[ue.key]=ue,!0;const ye=Math.max(N.overscaledZ-S,k);for(let me=N.overscaledZ-1;me>=ye;me--){const Se=N.scaledTo(me),Ke=I.getLoadedTile(Se);if(Ke)return u.setCrossFadeLogic({fadingRole:it.Base,fadingDirection:vt.Incoming,fadingParentID:Ke.tileID,fadeEndTime:C+K}),Ke.setCrossFadeLogic({fadingRole:it.Parent,fadingDirection:vt.Departing,fadeEndTime:C+K}),p[Se.key]=Se,!0}return!1}function xo(I,u,p,C,S,k){if(!u.hasData())return!1;const K=u.tileID.children(S);let N=un(I,u,K,p,C,S,k);if(N)return!0;for(const $ of K)un(I,u,$.children(S),p,C,S,k)&&(N=!0);return N}function un(I,u,p,C,S,k,K){if(p[0].overscaledZ>=k)return!1;let N=!1;for(const $ of p){const se=I.getLoadedTile($);if(!se)continue;const{fadingRole:ue,fadingDirection:ye,fadingParentID:me}=se;ue===it.Base&&ye===vt.Departing&&me||(se.setCrossFadeLogic({fadingRole:it.Base,fadingDirection:vt.Departing,fadingParentID:u.tileID,fadeEndTime:S+K}),u.setCrossFadeLogic({fadingRole:it.Parent,fadingDirection:vt.Incoming,fadeEndTime:S+K})),C[$.key]=$,N=!0}return N}function tr(I,u,p,C){const S=I.tileID;return!!I.selfFading||!I.hasData()&&!!u.has(S)&&(I.setSelfFadeLogic(p+C),!0)}function Wo(I,u){var p;I.needsHillshadePrepare=!0,I.needsTerrainPrepare=!0;let C=u.tileID.canonical.x-I.tileID.canonical.x;const S=u.tileID.canonical.y-I.tileID.canonical.y,k=Math.pow(2,I.tileID.canonical.z),K=u.tileID.key;C===0&&S===0||Math.abs(S)>1||(Math.abs(C)>1&&(Math.abs(C+k)===1?C+=k:Math.abs(C-k)===1&&(C-=k)),u.dem&&I.dem&&(I.dem.backfillBorder(u.dem,C,S),!((p=I.neighboringTiles)===null||p===void 0)&&p[K]&&(I.neighboringTiles[K].backfilled=!0)))}class ra{constructor(){this._tiles={}}handleWrapJump(u){const p={};for(const C in this._tiles){const S=this._tiles[C];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+u),p[S.tileID.key]=S}this._tiles=p}setFeatureState(u,p){for(const C in this._tiles)this._tiles[C].setFeatureState(u,p)}getAllTiles(){return Object.values(this._tiles)}getAllIds(u=!1){return u?Object.values(this._tiles).map((p=>p.tileID)).sort(a.ax).map((p=>p.key)):Object.keys(this._tiles)}getTileById(u){return this._tiles[u]}setTile(u,p){this._tiles[u]=p}deleteTileById(u){delete this._tiles[u]}getLoadedTile(u){const p=this.getTileById(u.key);return p?.hasData()?p:null}isIdRenderable(u,p=!1){var C;return(C=this.getTileById(u))===null||C===void 0?void 0:C.isRenderable(p)}getRenderableIds(u=0,p){const C=[];for(const S of this.getAllIds())this.isIdRenderable(S,p)&&C.push(this.getTileById(S));return p?C.sort(((S,k)=>{const K=S.tileID,N=k.tileID,$=new a.P(K.canonical.x,K.canonical.y)._rotate(-u),se=new a.P(N.canonical.x,N.canonical.y)._rotate(-u);return K.overscaledZ-N.overscaledZ||se.y-$.y||se.x-$.x})).map((S=>S.tileID.key)):C.map((S=>S.tileID)).sort(a.ax).map((S=>S.key))}}class oo extends a.E{constructor(u,p,C){super(),this.id=u,this.dispatcher=C,this.on("data",(S=>this._dataHandler(S))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((S,k,K,N)=>{const $=new(Q(k.type))(S,k,K,N);if($.id!==S)throw new Error(`Expected Source id to be ${S} instead of ${$.id}`);return $})(u,p,C,this),this._inViewTiles=new ra,this._outOfViewCache=new a.ay(0,(S=>this._unloadTile(S))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new ot,this._didEmitContent=!1,this._updated=!1}onAdd(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._maxTileCacheZoomLevels=u?u._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(u)}onRemove(u){for(const p of this._inViewTiles.getAllTiles())p.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(u),this._inViewTiles=new ra}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const u of this._inViewTiles.getAllTiles())if(u.state!=="loaded"&&u.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(u,p,C){return a._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(u),this._tileLoaded(u,p,C)}catch(S){u.state="errored",S.status!==404?this._source.fire(new a.k(S,{tile:u})):this.update(this.transform,this.terrain)}}))}_unloadTile(u){this._source.unloadTile&&this._source.unloadTile(u)}_abortTile(u){this._source.abortTile&&this._source.abortTile(u),this._source.fire(new a.l("dataabort",{tile:u,coord:u.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(u){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const p of this._inViewTiles.getAllTiles())p.upload(u),p.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(u){var p;return this._inViewTiles.getRenderableIds((p=this.transform)===null||p===void 0?void 0:p.bearingInRadians,u)}hasRenderableParent(u){const p=u.overscaledZ-1;if(p>=this._source.minzoom){const C=this.getLoadedTile(u.scaledTo(p));if(C)return this._inViewTiles.isIdRenderable(C.tileID.key)}return!1}reload(u,p=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const C of this._inViewTiles.getAllIds()){const S=this._inViewTiles.getTileById(C);p&&!this._source.shouldReloadTile(S,p)||(u?this._reloadTile(C,"expired"):S.state!=="errored"&&this._reloadTile(C,"reloading"))}}}_reloadTile(u,p){return a._(this,void 0,void 0,(function*(){const C=this._inViewTiles.getTileById(u);C&&(C.state!=="loading"&&(C.state=p),yield this._loadTile(C,u,p))}))}_tileLoaded(u,p,C){u.timeAdded=U(),u.selfFading&&(u.fadeEndTime=u.timeAdded+this._rasterFadeDuration),C==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(p,u),this.getSource().type==="raster-dem"&&u.dem&&(function(S,k){var K,N;const $=k.getRenderableIds();for(const se of $){if(!S.neighboringTiles||!S.neighboringTiles[se])continue;const ue=k.getTileById(se);S.neighboringTiles[se].backfilled||Wo(S,ue),!((N=(K=ue.neighboringTiles)===null||K===void 0?void 0:K[S.tileID.key])===null||N===void 0)&&N.backfilled||Wo(ue,S)}})(u,this._inViewTiles),this._state.initializeTileState(u,this.map?this.map.painter:null),u.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:u,coord:u.tileID}))}getTile(u){return this.getTileByID(u.key)}getTileByID(u){return this._inViewTiles.getTileById(u)}_retainLoadedChildren(u,p){const C=this._getLoadedDescendents(p),S=new Set;for(const k of p){const K=C[k.key];if(!K?.length){S.add(k);continue}const N=k.overscaledZ+oo.maxOverzooming,$=K.filter((ye=>ye.tileID.overscaledZ<=N));if(!$.length){S.add(k);continue}const se=Math.min(...$.map((ye=>ye.tileID.overscaledZ))),ue=$.filter((ye=>ye.tileID.overscaledZ===se)).map((ye=>ye.tileID));for(const ye of ue)u[ye.key]=ye;this._areDescendentsComplete(ue,se,k.overscaledZ)||S.add(k)}return S}_getLoadedDescendents(u){var p;const C={};for(const S of this._inViewTiles.getAllTiles().filter((k=>k.hasData())))for(const k of u)S.tileID.isChildOf(k)&&(C[p=k.key]||(C[p]=[])).push(S);return C}_areDescendentsComplete(u,p,C){return u.length===1&&u[0].isOverscaled()?u[0].overscaledZ===p:Math.pow(4,p-C)===u.length}getLoadedTile(u){return this._inViewTiles.getLoadedTile(u)}updateCacheSize(u){const p=Math.ceil(u.width/this._source.tileSize)+1,C=Math.ceil(u.height/this._source.tileSize)+1,S=Math.floor(p*C*(this._maxTileCacheZoomLevels===null?a.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),k=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,S):S;this._outOfViewCache.setMaxSize(k)}handleWrapJump(u){const p=Math.round((u-(this._prevLng===void 0?u:this._prevLng))/360);this._prevLng=u,p&&(this._inViewTiles.handleWrapJump(p),this._resetTileReloadTimers())}update(u,p){if(!this._sourceLoaded||this._paused)return;let C;this.transform=u,this.terrain=p,this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?C=u.getVisibleUnwrappedCoordinates(this._source.tileID).map(($=>new a.a2($.canonical.z,$.wrap,$.canonical.z,$.canonical.x,$.canonical.y))):(C=Ri(u,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?u.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:p,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(C=C.filter(($=>this._source.hasTile($))))):C=[],this.usedForTerrain&&(C=this._addTerrainIdealTiles(C));const S=C.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,S&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const k=Wi(u,this._source),K=this._updateRetainedTiles(C,k),N=Li(this._source.type);N&&this._rasterFadeDuration>0&&!p&&(function($,se,ue,ye,me,Se,Ke){const Je=U(),nt=a.aw(se);for(const tt of se){const rt=$.getTileById(tt.key);rt.fadingDirection!==vt.Departing&&rt.fadeOpacity!==0||rt.resetFadeLogic(),Er($,rt,ue,Je,ye,me,Ke)||xo($,rt,ue,Je,Se,Ke)||tr(rt,nt,Je,Ke)||rt.resetFadeLogic()}})(this._inViewTiles,C,K,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),N?this._cleanUpRasterTiles(K):this._cleanUpVectorTiles(K)}_cleanUpRasterTiles(u){for(const p of this._inViewTiles.getAllIds())u[p]||this._removeTile(p)}_cleanUpVectorTiles(u){for(const p of this._inViewTiles.getAllIds()){const C=this._inViewTiles.getTileById(p);u[p]?C.clearSymbolFadeHold():C.hasSymbolBuckets?C.holdingForSymbolFade()?C.symbolFadeFinished()&&this._removeTile(p):C.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(p)}}_addTerrainIdealTiles(u){const p=[];for(const C of u)if(C.canonical.z>this._source.minzoom){const S=C.scaledTo(C.canonical.z-1);p.push(S);const k=C.scaledTo(Math.max(this._source.minzoom,Math.min(C.canonical.z,5)));p.push(k)}return u.concat(p)}releaseSymbolFadeTiles(){for(const u of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(u).holdingForSymbolFade()&&this._removeTile(u)}_updateRetainedTiles(u,p){var C;const S=new Set;for(const se of u)this._addTile(se).hasData()||S.add(se);const k=u.reduce(((se,ue)=>(se[ue.key]=ue,se)),{}),K=this._retainLoadedChildren(k,S),N={},$=Math.max(p-oo.maxUnderzooming,this._source.minzoom);for(const se of K){let ue=this._inViewTiles.getTileById(se.key),ye=ue?.wasRequested();for(let me=se.overscaledZ-1;me>=$;--me){const Se=se.scaledTo(me);if(N[Se.key])break;if(N[Se.key]=!0,ue=this.getTile(Se),!ue&&ye&&(ue=this._addTile(Se)),ue){const Ke=ue.hasData();if((Ke||!(!((C=this.map)===null||C===void 0)&&C.cancelPendingTileRequestsWhileZooming)||ye)&&(k[Se.key]=Se),ye=ue.wasRequested(),Ke)break}}}return k}_addTile(u){let p=this._inViewTiles.getTileById(u.key);if(p)return p;p=this._outOfViewCache.getAndRemove(u),p&&(p.resetFadeLogic(),this._setTileReloadTimer(u.key,p),p.tileID=u,this._state.initializeTileState(p,this.map?this.map.painter:null));const C=p;return p||(p=new $e(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(p,u.key,p.state)),p.uses++,this._inViewTiles.setTile(u.key,p),C||this._source.fire(new a.l("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p}_setTileReloadTimer(u,p){this._clearTileReloadTimer(u);const C=p.getExpiryTimeout();C&&(this._timers[u]=setTimeout((()=>{this._reloadTile(u,"expired"),delete this._timers[u]}),C))}_clearTileReloadTimer(u){const p=this._timers[u];p&&(clearTimeout(p),delete this._timers[u])}_resetTileReloadTimers(){for(const u in this._timers)clearTimeout(this._timers[u]),delete this._timers[u];for(const u of this._inViewTiles.getAllIds()){const p=this._inViewTiles.getTileById(u);this._setTileReloadTimer(u,p)}}refreshTiles(u){for(const p of this._inViewTiles.getAllIds()){const C=this._inViewTiles.getTileById(p);(this._inViewTiles.isIdRenderable(p)||C.state=="errored")&&u.some((S=>S.equals(C.tileID.canonical)))&&this._reloadTile(p,"expired")}}_removeTile(u){const p=this._inViewTiles.getTileById(u);p&&(p.uses--,this._inViewTiles.deleteTileById(u),this._clearTileReloadTimer(u),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._outOfViewCache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))}_dataHandler(u){u.dataType==="source"&&(u.sourceDataType!=="metadata"?u.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(u.sourceDataChanged,u.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const u of this._inViewTiles.getAllIds())this._removeTile(u);this._outOfViewCache.reset()}tilesIn(u,p,C){const S=[],k=this.transform;if(!k)return S;const K=k.getCoveringTilesDetailsProvider().allowWorldCopies(),N=C?k.getCameraQueryGeometry(u):u,$=Se=>k.screenPointToMercatorCoordinate(Se,this.terrain),se=this.transformBbox(u,$,!K),ue=this.transformBbox(N,$,!K),ye=this.getIds(),me=a.ac.fromPoints(ue);for(let Se=0;Se<ye.length;Se++){const Ke=this._inViewTiles.getTileById(ye[Se]);if(Ke.holdingForSymbolFade())continue;const Je=K?[Ke.tileID]:[Ke.tileID.unwrapTo(-1),Ke.tileID.unwrapTo(0)],nt=Math.pow(2,k.zoom-Ke.tileID.overscaledZ),tt=p*Ke.queryPadding*a.a5/Ke.tileSize/nt;for(const rt of Je){const dt=me.map((st=>rt.getTilePoint(new a.ab(st.x,st.y))));if(dt.expandBy(tt),dt.intersects(qi)){const st=se.map((Ct=>rt.getTilePoint(Ct))),ft=ue.map((Ct=>rt.getTilePoint(Ct)));S.push({tile:Ke,tileID:K?rt:rt.unwrapTo(0),queryGeometry:st,cameraQueryGeometry:ft,scale:nt})}}}return S}transformBbox(u,p,C){let S=u.map(p);if(C){const k=a.ac.fromPoints(u);k.shrinkBy(.001*Math.min(k.width(),k.height()));const K=k.map(p);a.ac.fromPoints(S).covers(K)||(S=S.map((N=>N.x>.5?new a.ab(N.x-1,N.y,N.z):N)))}return S}getVisibleCoordinates(u){const p=this.getRenderableIds(u).map((C=>this._inViewTiles.getTileById(C).tileID));return this.transform&&this.transform.populateCache(p),p}hasTransition(){return!!this._source.hasTransition()||!(!Li(this._source.type)||!(function(u,p){if(p<=0)return!1;const C=U();for(const S of u.getAllTiles())if(S.fadeEndTime>=C)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(u){this._rasterFadeDuration=u}setFeatureState(u,p,C){this._state.updateState(u=u||a.aa,p,C)}removeFeatureState(u,p,C){this._state.removeFeatureState(u=u||a.aa,p,C)}getFeatureState(u,p){return this._state.getState(u=u||a.aa,p)}setDependencies(u,p,C){const S=this._inViewTiles.getTileById(u);S&&S.setDependencies(p,C)}reloadTilesForDependencies(u,p){for(const C of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(C).hasDependency(u,p)&&this._reloadTile(C,"reloading");this._outOfViewCache.filter((C=>!C.hasDependency(u,p)))}areTilesLoaded(){for(const u of this._inViewTiles.getAllTiles())if(u.state!=="loaded"&&u.state!=="errored")return!1;return!0}}oo.maxUnderzooming=10,oo.maxOverzooming=3;class kn{constructor(u,p){this.reset(u,p)}reset(u,p){this.points=u||[],this._distances=[0];for(let C=1;C<this.points.length;C++)this._distances[C]=this._distances[C-1]+this.points[C].dist(this.points[C-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=a.ao(u,0,1);let p=1,C=this._distances[p];const S=u*this.paddedLength+this.padding;for(;C<S&&p<this._distances.length;)C=this._distances[++p];const k=p-1,K=this._distances[k],N=C-K,$=N>0?(S-K)/N:0;return this.points[k].mult(1-$).add(this.points[p].mult($))}}function Xi(I,u){let p=!0;return I==="always"||I!=="never"&&u!=="never"||(p=!1),p}class ui{constructor(u,p,C){const S=this.boxCells=[],k=this.circleCells=[];this.xCellCount=Math.ceil(u/C),this.yCellCount=Math.ceil(p/C);for(let K=0;K<this.xCellCount*this.yCellCount;K++)S.push([]),k.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=p,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,p,C,S,k){this._forEachCell(p,C,S,k,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(p),this.bboxes.push(C),this.bboxes.push(S),this.bboxes.push(k)}insertCircle(u,p,C,S){this._forEachCell(p-S,C-S,p+S,C+S,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(p),this.circles.push(C),this.circles.push(S)}_insertBoxCell(u,p,C,S,k,K){this.boxCells[k].push(K)}_insertCircleCell(u,p,C,S,k,K){this.circleCells[k].push(K)}_query(u,p,C,S,k,K,N){if(C<0||u>this.width||S<0||p>this.height)return[];const $=[];if(u<=0&&p<=0&&this.width<=C&&this.height<=S){if(k)return[{key:null,x1:u,y1:p,x2:C,y2:S}];for(let se=0;se<this.boxKeys.length;se++)$.push({key:this.boxKeys[se],x1:this.bboxes[4*se],y1:this.bboxes[4*se+1],x2:this.bboxes[4*se+2],y2:this.bboxes[4*se+3]});for(let se=0;se<this.circleKeys.length;se++){const ue=this.circles[3*se],ye=this.circles[3*se+1],me=this.circles[3*se+2];$.push({key:this.circleKeys[se],x1:ue-me,y1:ye-me,x2:ue+me,y2:ye+me})}}else this._forEachCell(u,p,C,S,this._queryCell,$,{hitTest:k,overlapMode:K,seenUids:{box:{},circle:{}}},N);return $}query(u,p,C,S){return this._query(u,p,C,S,!1,null)}hitTest(u,p,C,S,k,K){return this._query(u,p,C,S,!0,k,K).length>0}hitTestCircle(u,p,C,S,k){const K=u-C,N=u+C,$=p-C,se=p+C;if(N<0||K>this.width||se<0||$>this.height)return!1;const ue=[];return this._forEachCell(K,$,N,se,this._queryCellCircle,ue,{hitTest:!0,overlapMode:S,circle:{x:u,y:p,radius:C},seenUids:{box:{},circle:{}}},k),ue.length>0}_queryCell(u,p,C,S,k,K,N,$){const{seenUids:se,hitTest:ue,overlapMode:ye}=N,me=this.boxCells[k];if(me!==null){const Ke=this.bboxes;for(const Je of me)if(!se.box[Je]){se.box[Je]=!0;const nt=4*Je,tt=this.boxKeys[Je];if(u<=Ke[nt+2]&&p<=Ke[nt+3]&&C>=Ke[nt+0]&&S>=Ke[nt+1]&&(!$||$(tt))&&(!ue||!Xi(ye,tt.overlapMode))&&(K.push({key:tt,x1:Ke[nt],y1:Ke[nt+1],x2:Ke[nt+2],y2:Ke[nt+3]}),ue))return!0}}const Se=this.circleCells[k];if(Se!==null){const Ke=this.circles;for(const Je of Se)if(!se.circle[Je]){se.circle[Je]=!0;const nt=3*Je,tt=this.circleKeys[Je];if(this._circleAndRectCollide(Ke[nt],Ke[nt+1],Ke[nt+2],u,p,C,S)&&(!$||$(tt))&&(!ue||!Xi(ye,tt.overlapMode))){const rt=Ke[nt],dt=Ke[nt+1],st=Ke[nt+2];if(K.push({key:tt,x1:rt-st,y1:dt-st,x2:rt+st,y2:dt+st}),ue)return!0}}}return!1}_queryCellCircle(u,p,C,S,k,K,N,$){const{circle:se,seenUids:ue,overlapMode:ye}=N,me=this.boxCells[k];if(me!==null){const Ke=this.bboxes;for(const Je of me)if(!ue.box[Je]){ue.box[Je]=!0;const nt=4*Je,tt=this.boxKeys[Je];if(this._circleAndRectCollide(se.x,se.y,se.radius,Ke[nt+0],Ke[nt+1],Ke[nt+2],Ke[nt+3])&&(!$||$(tt))&&!Xi(ye,tt.overlapMode))return K.push(!0),!0}}const Se=this.circleCells[k];if(Se!==null){const Ke=this.circles;for(const Je of Se)if(!ue.circle[Je]){ue.circle[Je]=!0;const nt=3*Je,tt=this.circleKeys[Je];if(this._circlesCollide(Ke[nt],Ke[nt+1],Ke[nt+2],se.x,se.y,se.radius)&&(!$||$(tt))&&!Xi(ye,tt.overlapMode))return K.push(!0),!0}}}_forEachCell(u,p,C,S,k,K,N,$){const se=this._convertToXCellCoord(u),ue=this._convertToYCellCoord(p),ye=this._convertToXCellCoord(C),me=this._convertToYCellCoord(S);for(let Se=se;Se<=ye;Se++)for(let Ke=ue;Ke<=me;Ke++)if(k.call(this,u,p,C,S,this.xCellCount*Ke+Se,K,N,$))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,p,C,S,k,K){const N=S-u,$=k-p,se=C+K;return se*se>N*N+$*$}_circleAndRectCollide(u,p,C,S,k,K,N){const $=(K-S)/2,se=Math.abs(u-(S+$));if(se>$+C)return!1;const ue=(N-k)/2,ye=Math.abs(p-(k+ue));if(ye>ue+C)return!1;if(se<=$||ye<=ue)return!0;const me=se-$,Se=ye-ue;return me*me+Se*Se<=C*C}}function Ka(I,u,p){const C=a.N();if(!I){const{vecSouth:ye,vecEast:me}=xl(u),Se=d();Se[0]=me[0],Se[1]=me[1],Se[2]=ye[0],Se[3]=ye[1],S=Se,(ue=(K=(k=Se)[0])*(se=k[3])-($=k[2])*(N=k[1]))&&(S[0]=se*(ue=1/ue),S[1]=-N*ue,S[2]=-$*ue,S[3]=K*ue),C[0]=Se[0],C[1]=Se[1],C[4]=Se[2],C[5]=Se[3]}var S,k,K,N,$,se,ue;return a.Q(C,C,[1/p,1/p,1]),C}function yA(I,u,p,C){if(I){const S=a.N();if(!u){const{vecSouth:k,vecEast:K}=xl(p);S[0]=K[0],S[1]=K[1],S[4]=k[0],S[5]=k[1]}return a.Q(S,S,[C,C,1]),S}return p.pixelsToClipSpaceMatrix}function xl(I){const u=Math.cos(I.rollInRadians),p=Math.sin(I.rollInRadians),C=Math.cos(I.pitchInRadians),S=Math.cos(I.bearingInRadians),k=Math.sin(I.bearingInRadians),K=a.aD();K[0]=-S*C*p-k*u,K[1]=-k*C*p+S*u;const N=a.aE(K);N<1e-9?a.aF(K):a.aG(K,K,1/N);const $=a.aD();$[0]=S*C*u-k*p,$[1]=k*C*u+S*p;const se=a.aE($);return se<1e-9?a.aF($):a.aG($,$,1/se),{vecEast:$,vecSouth:K}}function Vi(I,u,p,C){let S;C?(S=[I,u,C(I,u),1],a.aI(S,S,p)):(S=[I,u,0,1],ja(S,S,p));const k=S[3];return{point:new a.P(S[0]/k,S[1]/k),signedDistanceFromCamera:k,isOccluded:!1}}function Qu(I,u){return .5+I/u*.5}function co(I,u){return I.x>=-u[0]&&I.x<=u[0]&&I.y>=-u[1]&&I.y<=u[1]}function $a(I,u,p,C,S,k,K,N,$,se,ue,ye,me){const Se=p?I.textSizeData:I.iconSizeData,Ke=a.az(Se,u.transform.zoom),Je=[256/u.width*2+1,256/u.height*2+1],nt=p?I.text.dynamicLayoutVertexArray:I.icon.dynamicLayoutVertexArray;nt.clear();const tt=I.lineVertexArray,rt=p?I.text.placedSymbolArray:I.icon.placedSymbolArray,dt=u.transform.width/u.transform.height;let st=!1;for(let ft=0;ft<rt.length;ft++){const Ct=rt.get(ft);if(Ct.hidden||Ct.writingMode===a.aA.vertical&&!st){cl(Ct.numGlyphs,nt);continue}st=!1;const lt=new a.P(Ct.anchorX,Ct.anchorY),Ot={getElevation:me,pitchedLabelPlaneMatrix:C,lineVertexArray:tt,pitchWithMap:k,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:u.transform,tileAnchorPoint:lt,unwrappedTileID:$,width:se,height:ue,translation:ye},Ft=Zo(Ct.anchorX,Ct.anchorY,Ot);if(!co(Ft.point,Je)){cl(Ct.numGlyphs,nt);continue}const zt=Qu(u.transform.cameraToCenterDistance,Ft.signedDistanceFromCamera),Gt=a.aB(Se,Ke,Ct),Qt=k?Gt*u.transform.getPitchedTextCorrection(Ct.anchorX,Ct.anchorY,$)/zt:Gt*zt,dn=Ro({projectionContext:Ot,pitchedLabelPlaneMatrixInverse:S,symbol:Ct,fontSize:Qt,flip:!1,keepUpright:K,glyphOffsetArray:I.glyphOffsetArray,dynamicLayoutVertexArray:nt,aspectRatio:dt,rotateToLine:N});st=dn.useVertical,(dn.notEnoughRoom||st||dn.needsFlipping&&Ro({projectionContext:Ot,pitchedLabelPlaneMatrixInverse:S,symbol:Ct,fontSize:Qt,flip:!0,keepUpright:K,glyphOffsetArray:I.glyphOffsetArray,dynamicLayoutVertexArray:nt,aspectRatio:dt,rotateToLine:N}).notEnoughRoom)&&cl(Ct.numGlyphs,nt)}p?I.text.dynamicLayoutVertexBuffer.updateData(nt):I.icon.dynamicLayoutVertexBuffer.updateData(nt)}function Ml(I,u,p,C,S,k,K,N){const $=k.glyphStartIndex+k.numGlyphs,se=k.lineStartIndex,ue=k.lineStartIndex+k.lineLength,ye=u.getoffsetX(k.glyphStartIndex),me=u.getoffsetX($-1),Se=ul(I*ye,p,C,S,k.segment,se,ue,N,K);if(!Se)return null;const Ke=ul(I*me,p,C,S,k.segment,se,ue,N,K);return Ke?N.projectionCache.anyProjectionOccluded?null:{first:Se,last:Ke}:null}function Fa(I,u,p,C){return I===a.aA.horizontal&&Math.abs(p.y-u.y)>Math.abs(p.x-u.x)*C?{useVertical:!0}:(I===a.aA.vertical?u.y<p.y:u.x>p.x)?{needsFlipping:!0}:null}function Ro(I){const{projectionContext:u,pitchedLabelPlaneMatrixInverse:p,symbol:C,fontSize:S,flip:k,keepUpright:K,glyphOffsetArray:N,dynamicLayoutVertexArray:$,aspectRatio:se,rotateToLine:ue}=I,ye=S/24,me=C.lineOffsetX*ye,Se=C.lineOffsetY*ye;let Ke;if(C.numGlyphs>1){const Je=C.glyphStartIndex+C.numGlyphs,nt=C.lineStartIndex,tt=C.lineStartIndex+C.lineLength,rt=Ml(ye,N,me,Se,k,C,ue,u);if(!rt)return{notEnoughRoom:!0};const dt=za(rt.first.point.x,rt.first.point.y,u,p),st=za(rt.last.point.x,rt.last.point.y,u,p);if(K&&!k){const ft=Fa(C.writingMode,dt,st,se);if(ft)return ft}Ke=[rt.first];for(let ft=C.glyphStartIndex+1;ft<Je-1;ft++){const Ct=ul(ye*N.getoffsetX(ft),me,Se,k,C.segment,nt,tt,u,ue);if(!Ct)return{notEnoughRoom:!0};Ke.push(Ct)}Ke.push(rt.last)}else{if(K&&!k){const nt=mr(u.tileAnchorPoint.x,u.tileAnchorPoint.y,u).point,tt=C.lineStartIndex+C.segment+1,rt=new a.P(u.lineVertexArray.getx(tt),u.lineVertexArray.gety(tt)),dt=mr(rt.x,rt.y,u),st=dt.signedDistanceFromCamera>0?dt.point:gc(u.tileAnchorPoint,rt,nt,1,u),ft=za(nt.x,nt.y,u,p),Ct=za(st.x,st.y,u,p),lt=Fa(C.writingMode,ft,Ct,se);if(lt)return lt}const Je=ul(ye*N.getoffsetX(C.glyphStartIndex),me,Se,k,C.segment,C.lineStartIndex,C.lineStartIndex+C.lineLength,u,ue);if(!Je||u.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Ke=[Je]}for(const Je of Ke)a.aH($,Je.point,Je.angle);return{}}function gc(I,u,p,C,S){const k=I.add(I.sub(u)._unit()),K=mr(k.x,k.y,S).point,N=p.sub(K);return p.add(N._mult(C/N.mag()))}function Qo(I,u,p){const C=u.projectionCache;if(C.projections[I])return C.projections[I];const S=new a.P(u.lineVertexArray.getx(I),u.lineVertexArray.gety(I)),k=mr(S.x,S.y,u);if(k.signedDistanceFromCamera>0)return C.projections[I]=k.point,C.anyProjectionOccluded=C.anyProjectionOccluded||k.isOccluded,k.point;const K=I-p.direction;return gc(p.distanceFromAnchor===0?u.tileAnchorPoint:new a.P(u.lineVertexArray.getx(K),u.lineVertexArray.gety(K)),S,p.previousVertex,p.absOffsetX-p.distanceFromAnchor+1,u)}function mr(I,u,p){const C=I+p.translation[0],S=u+p.translation[1];let k;return p.pitchWithMap?(k=Vi(C,S,p.pitchedLabelPlaneMatrix,p.getElevation),k.isOccluded=!1):(k=p.transform.projectTileCoordinates(C,S,p.unwrappedTileID,p.getElevation),k.point.x=(.5*k.point.x+.5)*p.width,k.point.y=(.5*-k.point.y+.5)*p.height),k}function za(I,u,p,C){if(p.pitchWithMap){const S=[I,u,0,1];return a.aI(S,S,C),p.transform.projectTileCoordinates(S[0]/S[3],S[1]/S[3],p.unwrappedTileID,p.getElevation).point}return{x:I/p.width*2-1,y:1-u/p.height*2}}function Zo(I,u,p){return p.transform.projectTileCoordinates(I,u,p.unwrappedTileID,p.getElevation)}function bu(I,u,p){return I._unit()._perp()._mult(u*p)}function Cu(I,u,p,C,S,k,K,N,$){if(N.projectionCache.offsets[I])return N.projectionCache.offsets[I];const se=p.add(u);if(I+$.direction<C||I+$.direction>=S)return N.projectionCache.offsets[I]=se,se;const ue=Qo(I+$.direction,N,$),ye=bu(ue.sub(p),K,$.direction),me=p.add(ye),Se=ue.add(ye);return N.projectionCache.offsets[I]=a.aJ(k,se,me,Se)||se,N.projectionCache.offsets[I]}function ul(I,u,p,C,S,k,K,N,$){const se=C?I-u:I+u;let ue=se>0?1:-1,ye=0;C&&(ue*=-1,ye=Math.PI),ue<0&&(ye+=Math.PI);let me,Se=ue>0?k+S:k+S+1;N.projectionCache.cachedAnchorPoint?me=N.projectionCache.cachedAnchorPoint:(me=mr(N.tileAnchorPoint.x,N.tileAnchorPoint.y,N).point,N.projectionCache.cachedAnchorPoint=me);let Ke,Je,nt=me,tt=me,rt=0,dt=0;const st=Math.abs(se),ft=[];let Ct;for(;rt+dt<=st;){if(Se+=ue,Se<k||Se>=K)return null;rt+=dt,tt=nt,Je=Ke;const Ft={absOffsetX:st,direction:ue,distanceFromAnchor:rt,previousVertex:tt};if(nt=Qo(Se,N,Ft),p===0)ft.push(tt),Ct=nt.sub(tt);else{let zt;const Gt=nt.sub(tt);zt=Gt.mag()===0?bu(Qo(Se+ue,N,Ft).sub(nt),p,ue):bu(Gt,p,ue),Je||(Je=tt.add(zt)),Ke=Cu(Se,zt,nt,k,K,Je,p,N,Ft),ft.push(Je),Ct=Ke.sub(Je)}dt=Ct.mag()}const lt=Ct._mult((st-rt)/dt)._add(Je||tt),Ot=ye+Math.atan2(nt.y-tt.y,nt.x-tt.x);return ft.push(lt),{point:lt,angle:$?Ot:0,path:ft}}const Vc=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function cl(I,u){for(let p=0;p<I;p++){const C=u.length;u.resize(C+4),u.float32.set(Vc,3*C)}}function ja(I,u,p){const C=u[0],S=u[1];return I[0]=p[0]*C+p[4]*S+p[12],I[1]=p[1]*C+p[5]*S+p[13],I[3]=p[3]*C+p[7]*S+p[15],I}const lr=100;class qu{constructor(u,p=new ui(u.width+200,u.height+200,25),C=new ui(u.width+200,u.height+200,25)){this.transform=u,this.grid=p,this.ignoredGrid=C,this.pitchFactor=Math.cos(u.pitch*Math.PI/180)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+lr,this.screenBottomBoundary=u.height+lr,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(u,p,C,S,k,K,N,$,se,ue,ye,me){const Se=this.projectAndGetPerspectiveRatio(u.anchorPointX+$[0],u.anchorPointY+$[1],k,ue,me),Ke=C*Se.perspectiveRatio;let Je;if(K||N)Je=this._projectCollisionBox(u,Ke,S,k,K,N,$,Se,ue,ye,me);else{const Ct=Se.x+(ye?ye.x*Ke:0),lt=Se.y+(ye?ye.y*Ke:0);Je={allPointsOccluded:!1,box:[Ct+u.x1*Ke,lt+u.y1*Ke,Ct+u.x2*Ke,lt+u.y2*Ke]}}const[nt,tt,rt,dt]=Je.box,st=K?Je.allPointsOccluded:Se.isOccluded;let ft=st;return ft||(ft=Se.perspectiveRatio<this.perspectiveRatioCutoff),ft||(ft=!this.isInsideGrid(nt,tt,rt,dt)),ft||p!=="always"&&this.grid.hitTest(nt,tt,rt,dt,p,se)?{box:[nt,tt,rt,dt],placeable:!1,offscreen:!1,occluded:st}:{box:[nt,tt,rt,dt],placeable:!0,offscreen:this.isOffscreen(nt,tt,rt,dt),occluded:st}}placeCollisionCircles(u,p,C,S,k,K,N,$,se,ue,ye,me,Se,Ke){const Je=[],nt=new a.P(p.anchorX,p.anchorY),tt=this.getPerspectiveRatio(nt.x,nt.y,K,Ke),rt=(se?k*this.transform.getPitchedTextCorrection(p.anchorX,p.anchorY,K)/tt:k*tt)/a.aN,dt={getElevation:Ke,pitchedLabelPlaneMatrix:N,lineVertexArray:C,pitchWithMap:se,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:nt,unwrappedTileID:K,width:this.transform.width,height:this.transform.height,translation:Se},st=Ml(rt,S,p.lineOffsetX*rt,p.lineOffsetY*rt,!1,p,!1,dt);let ft=!1,Ct=!1,lt=!0;if(st){const Ot=.5*ye*tt+me,Ft=new a.P(-100,-100),zt=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Gt=new kn,Qt=st.first,dn=st.last;let Rn=[];for(let nr=Qt.path.length-1;nr>=1;nr--)Rn.push(Qt.path[nr]);for(let nr=1;nr<dn.path.length;nr++)Rn.push(dn.path[nr]);const An=2.5*Ot;if(se){const nr=this.projectPathToScreenSpace(Rn,dt);Rn=nr.some((fo=>fo.signedDistanceFromCamera<=0))?[]:nr.map((fo=>fo.point))}let ai=[];if(Rn.length>0){const nr=Rn[0].clone(),fo=Rn[0].clone();for(let Bo=1;Bo<Rn.length;Bo++)nr.x=Math.min(nr.x,Rn[Bo].x),nr.y=Math.min(nr.y,Rn[Bo].y),fo.x=Math.max(fo.x,Rn[Bo].x),fo.y=Math.max(fo.y,Rn[Bo].y);ai=nr.x>=Ft.x&&fo.x<=zt.x&&nr.y>=Ft.y&&fo.y<=zt.y?[Rn]:fo.x<Ft.x||nr.x>zt.x||fo.y<Ft.y||nr.y>zt.y?[]:a.aK([Rn],Ft.x,Ft.y,zt.x,zt.y)}for(const nr of ai){Gt.reset(nr,.25*Ot);let fo=0;fo=Gt.length<=.5*Ot?1:Math.ceil(Gt.paddedLength/An)+1;for(let Bo=0;Bo<fo;Bo++){const po=Bo/Math.max(fo-1,1),kr=Gt.lerp(po),Dr=kr.x+lr,Ma=kr.y+lr;Je.push(Dr,Ma,Ot,0);const es=Dr-Ot,Ns=Ma-Ot,Ko=Dr+Ot,ks=Ma+Ot;if(lt=lt&&this.isOffscreen(es,Ns,Ko,ks),Ct=Ct||this.isInsideGrid(es,Ns,Ko,ks),u!=="always"&&this.grid.hitTestCircle(Dr,Ma,Ot,u,ue)&&(ft=!0,!$))return{circles:[],offscreen:!1,collisionDetected:ft}}}}return{circles:!$&&ft||!Ct||tt<this.perspectiveRatioCutoff?[]:Je,offscreen:lt,collisionDetected:ft}}projectPathToScreenSpace(u,p){const C=(function(S,k){const K=a.N();return a.aC(K,k.pitchedLabelPlaneMatrix),S.map((N=>{const $=Vi(N.x,N.y,K,k.getElevation),se=k.transform.projectTileCoordinates($.point.x,$.point.y,k.unwrappedTileID,k.getElevation);return se.point.x=(.5*se.point.x+.5)*k.width,se.point.y=(.5*-se.point.y+.5)*k.height,se}))})(u,p);return(function(S){let k=0,K=0,N=0,$=0;for(let se=0;se<S.length;se++)S[se].isOccluded?(N=se+1,$=0):($++,$>K&&(K=$,k=N));return S.slice(k,k+K)})(C)}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[],C=new a.ac;for(const ye of u){const me=new a.P(ye.x+lr,ye.y+lr);C.extend(me),p.push(me)}const{minX:S,minY:k,maxX:K,maxY:N}=C,$=this.grid.query(S,k,K,N).concat(this.ignoredGrid.query(S,k,K,N)),se={},ue={};for(const ye of $){const me=ye.key;if(se[me.bucketInstanceId]===void 0&&(se[me.bucketInstanceId]={}),se[me.bucketInstanceId][me.featureIndex])continue;const Se=[new a.P(ye.x1,ye.y1),new a.P(ye.x2,ye.y1),new a.P(ye.x2,ye.y2),new a.P(ye.x1,ye.y2)];a.aL(p,Se)&&(se[me.bucketInstanceId][me.featureIndex]=!0,ue[me.bucketInstanceId]===void 0&&(ue[me.bucketInstanceId]=[]),ue[me.bucketInstanceId].push(me.featureIndex))}return ue}insertCollisionBox(u,p,C,S,k,K){(C?this.ignoredGrid:this.grid).insert({bucketInstanceId:S,featureIndex:k,collisionGroupID:K,overlapMode:p},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,p,C,S,k,K){const N=C?this.ignoredGrid:this.grid,$={bucketInstanceId:S,featureIndex:k,collisionGroupID:K,overlapMode:p};for(let se=0;se<u.length;se+=4)N.insertCircle($,u[se],u[se+1],u[se+2])}projectAndGetPerspectiveRatio(u,p,C,S,k){if(k){let K;S?(K=[u,p,S(u,p),1],a.aI(K,K,k)):(K=[u,p,0,1],ja(K,K,k));const N=K[3];return{x:(K[0]/N+1)/2*this.transform.width+lr,y:(-K[1]/N+1)/2*this.transform.height+lr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/N*.5,isOccluded:!1,signedDistanceFromCamera:N}}{const K=this.transform.projectTileCoordinates(u,p,C,S);return{x:(K.point.x+1)/2*this.transform.width+lr,y:(1-K.point.y)/2*this.transform.height+lr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/K.signedDistanceFromCamera*.5,isOccluded:K.isOccluded,signedDistanceFromCamera:K.signedDistanceFromCamera}}}getPerspectiveRatio(u,p,C,S){const k=this.transform.projectTileCoordinates(u,p,C,S);return .5+this.transform.cameraToCenterDistance/k.signedDistanceFromCamera*.5}isOffscreen(u,p,C,S){return C<lr||u>=this.screenRightBoundary||S<lr||p>this.screenBottomBoundary}isInsideGrid(u,p,C,S){return C>=0&&u<this.gridRightBoundary&&S>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const u=a.as([]);return a.O(u,u,[-100,-100,0]),u}_projectCollisionBox(u,p,C,S,k,K,N,$,se,ue,ye){let me=1,Se=0,Ke=0,Je=1;const nt=u.anchorPointX+N[0],tt=u.anchorPointY+N[1];if(K&&!k){const Rn=this.projectAndGetPerspectiveRatio(nt+1,tt,S,se,ye),An=Rn.x-$.x,ai=Math.atan((Rn.y-$.y)/An)+(An<0?Math.PI:0),nr=Math.sin(ai),fo=Math.cos(ai);me=fo,Se=nr,Ke=-nr,Je=fo}else if(!K&&k){const Rn=xl(this.transform);me=Rn.vecEast[0],Se=Rn.vecEast[1],Ke=Rn.vecSouth[0],Je=Rn.vecSouth[1]}let rt=$.x,dt=$.y,st=p;k&&(rt=nt,dt=tt,st=Math.pow(2,-(this.transform.zoom-C.overscaledZ)),st*=this.transform.getPitchedTextCorrection(nt,tt,S),ue||(st*=a.ao(.5+$.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),ue&&(rt+=me*ue.x*st+Ke*ue.y*st,dt+=Se*ue.x*st+Je*ue.y*st);const ft=u.x1*st,Ct=u.x2*st,lt=(ft+Ct)/2,Ot=u.y1*st,Ft=u.y2*st,zt=(Ot+Ft)/2,Gt=[{offsetX:ft,offsetY:Ot},{offsetX:lt,offsetY:Ot},{offsetX:Ct,offsetY:Ot},{offsetX:Ct,offsetY:zt},{offsetX:Ct,offsetY:Ft},{offsetX:lt,offsetY:Ft},{offsetX:ft,offsetY:Ft},{offsetX:ft,offsetY:zt}];let Qt=[];for(const{offsetX:Rn,offsetY:An}of Gt)Qt.push(new a.P(rt+me*Rn+Ke*An,dt+Se*Rn+Je*An));let dn=!1;if(k){const Rn=Qt.map((An=>this.projectAndGetPerspectiveRatio(An.x,An.y,S,se,ye)));dn=Rn.some((An=>!An.isOccluded)),Qt=Rn.map((An=>new a.P(An.x,An.y)))}else dn=!0;return{box:a.aM(Qt),allPointsOccluded:!dn}}}class wl{constructor(u,p,C,S){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?p:-p))):S&&C?1:0,this.placed=C}isHidden(){return this.opacity===0&&!this.placed}}class Sl{constructor(u,p,C,S,k){this.text=new wl(u?u.text:null,p,C,k),this.icon=new wl(u?u.icon:null,p,S,k)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class _u{constructor(u,p,C){this.text=u,this.icon=p,this.skipFade=C}}class yc{constructor(u,p,C,S,k){this.bucketInstanceId=u,this.featureIndex=p,this.sourceLayerIndex=C,this.bucketIndex=S,this.tileID=k}}class Rh{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const p=++this.maxGroupID;this.collisionGroups[u]={ID:p,predicate:C=>C.collisionGroupID===p}}return this.collisionGroups[u]}}function Vs(I,u,p,C,S){const{horizontalAlign:k,verticalAlign:K}=a.aT(I);return new a.P(-(k-.5)*u+C[0]*S,-(K-.5)*p+C[1]*S)}class vc{constructor(u,p,C,S,k){this.transform=u.clone(),this.terrain=p,this.collisionIndex=new qu(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=C,this.retainedQueryData={},this.collisionGroups=new Rh(S),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=k,k&&(k.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(u){const p=this.terrain;return p?(C,S)=>p.getElevation(u,C,S):null}getBucketParts(u,p,C,S){const k=C.getBucket(p),K=C.latestFeatureIndex;if(!k||!K||p.id!==k.layerIds[0])return;const N=C.collisionBoxArray,$=k.layers[0].layout,se=k.layers[0].paint,ue=Math.pow(2,this.transform.zoom-C.tileID.overscaledZ),ye=C.tileSize/a.a5,me=C.tileID.toUnwrapped(),Se=$.get("text-rotation-alignment")==="map",Ke=a.aO(C,1,this.transform.zoom),Je=a.aP(this.collisionIndex.transform,C,se.get("text-translate"),se.get("text-translate-anchor")),nt=a.aP(this.collisionIndex.transform,C,se.get("icon-translate"),se.get("icon-translate-anchor")),tt=Ka(Se,this.transform,Ke);this.retainedQueryData[k.bucketInstanceId]=new yc(k.bucketInstanceId,K,k.sourceLayerIndex,k.index,C.tileID);const rt={bucket:k,layout:$,translationText:Je,translationIcon:nt,unwrappedTileID:me,pitchedLabelPlaneMatrix:tt,scale:ue,textPixelRatio:ye,holdingForFade:C.holdingForSymbolFade(),collisionBoxArray:N,partiallyEvaluatedTextSize:a.az(k.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(k.sourceID)};if(S)for(const dt of k.sortKeyRanges){const{sortKey:st,symbolInstanceStart:ft,symbolInstanceEnd:Ct}=dt;u.push({sortKey:st,symbolInstanceStart:ft,symbolInstanceEnd:Ct,parameters:rt})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:k.symbolInstances.length,parameters:rt})}attemptAnchorPlacement(u,p,C,S,k,K,N,$,se,ue,ye,me,Se,Ke,Je,nt,tt,rt,dt,st){const ft=a.aQ[u.textAnchor],Ct=[u.textOffset0,u.textOffset1],lt=Vs(ft,C,S,Ct,k),Ot=this.collisionIndex.placeCollisionBox(p,me,$,se,ue,N,K,nt,ye.predicate,dt,lt,st);if((!rt||this.collisionIndex.placeCollisionBox(rt,me,$,se,ue,N,K,tt,ye.predicate,dt,lt,st).placeable)&&Ot.placeable){let Ft;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Se.crossTileID]&&this.prevPlacement.placements[Se.crossTileID]&&this.prevPlacement.placements[Se.crossTileID].text&&(Ft=this.prevPlacement.variableOffsets[Se.crossTileID].anchor),Se.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Se.crossTileID]={textOffset:Ct,width:C,height:S,anchor:ft,textBoxScale:k,prevAnchor:Ft},this.markUsedJustification(Ke,ft,Se,Je),Ke.allowVerticalPlacement&&(this.markUsedOrientation(Ke,Je,Se),this.placedOrientations[Se.crossTileID]=Je),{shift:lt,placedGlyphBoxes:Ot}}}placeLayerBucketPart(u,p,C){const{bucket:S,layout:k,translationText:K,translationIcon:N,unwrappedTileID:$,pitchedLabelPlaneMatrix:se,textPixelRatio:ue,holdingForFade:ye,collisionBoxArray:me,partiallyEvaluatedTextSize:Se,collisionGroup:Ke}=u.parameters,Je=k.get("text-optional"),nt=k.get("icon-optional"),tt=a.aR(k,"text-overlap","text-allow-overlap"),rt=tt==="always",dt=a.aR(k,"icon-overlap","icon-allow-overlap"),st=dt==="always",ft=k.get("text-rotation-alignment")==="map",Ct=k.get("text-pitch-alignment")==="map",lt=k.get("icon-text-fit")!=="none",Ot=k.get("symbol-z-order")==="viewport-y",Ft=rt&&(st||!S.hasIconData()||nt),zt=st&&(rt||!S.hasTextData()||Je);!S.collisionArrays&&me&&S.deserializeCollisionBoxes(me);const Gt=this.retainedQueryData[S.bucketInstanceId].tileID,Qt=this._getTerrainElevationFunc(Gt),dn=this.transform.getFastPathSimpleProjectionMatrix(Gt),Rn=(An,ai,nr)=>{var fo,Bo;if(p[An.crossTileID])return;if(ye)return void(this.placements[An.crossTileID]=new _u(!1,!1,!1));let po=!1,kr=!1,Dr=!0,Ma=null,es={box:null,placeable:!1,offscreen:null,occluded:!1},Ns={placeable:!1},Ko=null,ks=null,Na=null,fl=0,Dc=0,Ou=0;ai.textFeatureIndex?fl=ai.textFeatureIndex:An.useRuntimeCollisionCircles&&(fl=An.featureIndex),ai.verticalTextFeatureIndex&&(Dc=ai.verticalTextFeatureIndex);const iA=ai.textBox;if(iA){const Gs=ts=>{let Sa=a.aA.horizontal;if(S.allowVerticalPlacement&&!ts&&this.prevPlacement){const Kl=this.prevPlacement.placedOrientations[An.crossTileID];Kl&&(this.placedOrientations[An.crossTileID]=Kl,Sa=Kl,this.markUsedOrientation(S,Sa,An))}return Sa},wa=(ts,Sa)=>{if(S.allowVerticalPlacement&&An.numVerticalGlyphVertices>0&&ai.verticalTextBox){for(const Kl of S.writingModes)if(Kl===a.aA.vertical?(es=Sa(),Ns=es):es=ts(),es&&es.placeable)break}else es=ts()},ua=An.textAnchorOffsetStartIndex,au=An.textAnchorOffsetEndIndex;if(au===ua){const ts=(Sa,Kl)=>{const Yo=this.collisionIndex.placeCollisionBox(Sa,tt,ue,Gt,$,Ct,ft,K,Ke.predicate,Qt,void 0,dn);return Yo&&Yo.placeable&&(this.markUsedOrientation(S,Kl,An),this.placedOrientations[An.crossTileID]=Kl),Yo};wa((()=>ts(iA,a.aA.horizontal)),(()=>{const Sa=ai.verticalTextBox;return S.allowVerticalPlacement&&An.numVerticalGlyphVertices>0&&Sa?ts(Sa,a.aA.vertical):{box:null,offscreen:null}})),Gs(es&&es.placeable)}else{let ts=a.aQ[(Bo=(fo=this.prevPlacement)===null||fo===void 0?void 0:fo.variableOffsets[An.crossTileID])===null||Bo===void 0?void 0:Bo.anchor];const Sa=(Yo,d0,zf)=>{const f0=Yo.x2-Yo.x1,p0=Yo.y2-Yo.y1,ca=An.textBoxScale,mh=lt&&dt==="never"?d0:null;let LA=null,Ug=tt==="never"?1:2,rd="never";ts&&Ug++;for(let m0=0;m0<Ug;m0++){for(let od=ua;od<au;od++){const Rc=S.textAnchorOffsets.get(od);if(ts&&Rc.textAnchor!==ts)continue;const jf=this.attemptAnchorPlacement(Rc,Yo,f0,p0,ca,ft,Ct,ue,Gt,$,Ke,rd,An,S,zf,K,N,mh,Qt);if(jf&&(LA=jf.placedGlyphBoxes,LA&&LA.placeable))return po=!0,Ma=jf.shift,LA}ts?ts=null:rd=tt}return C&&!LA&&(LA={box:this.collisionIndex.placeCollisionBox(iA,"always",ue,Gt,$,Ct,ft,K,Ke.predicate,Qt,void 0,dn).box,offscreen:!1,placeable:!1,occluded:!1}),LA};wa((()=>Sa(iA,ai.iconBox,a.aA.horizontal)),(()=>{const Yo=ai.verticalTextBox;return S.allowVerticalPlacement&&(!es||!es.placeable)&&An.numVerticalGlyphVertices>0&&Yo?Sa(Yo,ai.verticalIconBox,a.aA.vertical):{box:null,occluded:!0,offscreen:null}})),es&&(po=es.placeable,Dr=es.offscreen);const Kl=Gs(es&&es.placeable);if(!po&&this.prevPlacement){const Yo=this.prevPlacement.variableOffsets[An.crossTileID];Yo&&(this.variableOffsets[An.crossTileID]=Yo,this.markUsedJustification(S,Yo.anchor,An,Kl))}}}if(Ko=es,po=Ko&&Ko.placeable,Dr=Ko&&Ko.offscreen,An.useRuntimeCollisionCircles&&An.centerJustifiedTextSymbolIndex>=0){const Gs=S.text.placedSymbolArray.get(An.centerJustifiedTextSymbolIndex),wa=a.aB(S.textSizeData,Se,Gs),ua=k.get("text-padding");ks=this.collisionIndex.placeCollisionCircles(tt,Gs,S.lineVertexArray,S.glyphOffsetArray,wa,$,se,C,Ct,Ke.predicate,An.collisionCircleDiameter,ua,K,Qt),ks.circles.length&&ks.collisionDetected&&!C&&a.w("Collisions detected, but collision boxes are not shown"),po=rt||ks.circles.length>0&&!ks.collisionDetected,Dr=Dr&&ks.offscreen}if(ai.iconFeatureIndex&&(Ou=ai.iconFeatureIndex),ai.iconBox){const Gs=wa=>this.collisionIndex.placeCollisionBox(wa,dt,ue,Gt,$,Ct,ft,N,Ke.predicate,Qt,lt&&Ma?Ma:void 0,dn);Ns&&Ns.placeable&&ai.verticalIconBox?(Na=Gs(ai.verticalIconBox),kr=Na.placeable):(Na=Gs(ai.iconBox),kr=Na.placeable),Dr=Dr&&Na.offscreen}const h0=Je||An.numHorizontalGlyphVertices===0&&An.numVerticalGlyphVertices===0,id=nt||An.numIconVertices===0;h0||id?id?h0||(kr=kr&&po):po=kr&&po:kr=po=kr&&po;const su=kr&&Na.placeable;if(po&&Ko.placeable&&this.collisionIndex.insertCollisionBox(Ko.box,tt,k.get("text-ignore-placement"),S.bucketInstanceId,Ns&&Ns.placeable&&Dc?Dc:fl,Ke.ID),su&&this.collisionIndex.insertCollisionBox(Na.box,dt,k.get("icon-ignore-placement"),S.bucketInstanceId,Ou,Ke.ID),ks&&po&&this.collisionIndex.insertCollisionCircles(ks.circles,tt,k.get("text-ignore-placement"),S.bucketInstanceId,fl,Ke.ID),C&&this.storeCollisionData(S.bucketInstanceId,nr,ai,Ko,Na,ks),An.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(S.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[An.crossTileID]=new _u((po||Ft)&&!Ko?.occluded,(kr||zt)&&!Na?.occluded,Dr||S.justReloaded),p[An.crossTileID]=!0};if(Ot){if(u.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const An=S.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let ai=An.length-1;ai>=0;--ai){const nr=An[ai];Rn(S.symbolInstances.get(nr),S.collisionArrays[nr],nr)}}else for(let An=u.symbolInstanceStart;An<u.symbolInstanceEnd;An++)Rn(S.symbolInstances.get(An),S.collisionArrays[An],An);S.justReloaded=!1}storeCollisionData(u,p,C,S,k,K){if(C.textBox||C.iconBox){let N,$;this.collisionBoxArrays.has(u)?N=this.collisionBoxArrays.get(u):(N=new Map,this.collisionBoxArrays.set(u,N)),N.has(p)?$=N.get(p):($={text:null,icon:null},N.set(p,$)),C.textBox&&($.text=S.box),C.iconBox&&($.icon=k.box)}if(K){let N=this.collisionCircleArrays[u];N===void 0&&(N=this.collisionCircleArrays[u]=[]);for(let $=0;$<K.circles.length;$+=4)N.push(K.circles[$+0]-lr),N.push(K.circles[$+1]-lr),N.push(K.circles[$+2]),N.push(K.collisionDetected?1:0)}}markUsedJustification(u,p,C,S){let k;k=S===a.aA.vertical?C.verticalPlacedTextSymbolIndex:{left:C.leftJustifiedTextSymbolIndex,center:C.centerJustifiedTextSymbolIndex,right:C.rightJustifiedTextSymbolIndex}[a.aS(p)];const K=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex,C.verticalPlacedTextSymbolIndex];for(const N of K)N>=0&&(u.text.placedSymbolArray.get(N).crossTileID=k>=0&&N!==k?0:C.crossTileID)}markUsedOrientation(u,p,C){const S=p===a.aA.horizontal||p===a.aA.horizontalOnly?p:0,k=p===a.aA.vertical?p:0,K=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex];for(const N of K)u.text.placedSymbolArray.get(N).placedOrientation=S;C.verticalPlacedTextSymbolIndex&&(u.text.placedSymbolArray.get(C.verticalPlacedTextSymbolIndex).placedOrientation=k)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let C=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const S=p?p.symbolFadeChange(u):1,k=p?p.opacities:{},K=p?p.variableOffsets:{},N=p?p.placedOrientations:{};for(const $ in this.placements){const se=this.placements[$],ue=k[$];ue?(this.opacities[$]=new Sl(ue,S,se.text,se.icon),C=C||se.text!==ue.text.placed||se.icon!==ue.icon.placed):(this.opacities[$]=new Sl(null,S,se.text,se.icon,se.skipFade),C=C||se.text||se.icon)}for(const $ in k){const se=k[$];if(!this.opacities[$]){const ue=new Sl(se,S,!1,!1);ue.isHidden()||(this.opacities[$]=ue,C=C||se.text.placed||se.icon.placed)}}for(const $ in K)this.variableOffsets[$]||!this.opacities[$]||this.opacities[$].isHidden()||(this.variableOffsets[$]=K[$]);for(const $ in N)this.placedOrientations[$]||!this.opacities[$]||this.opacities[$].isHidden()||(this.placedOrientations[$]=N[$]);if(p&&p.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");C?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:u)}updateLayerOpacities(u,p){const C={};for(const S of p){const k=S.getBucket(u);k&&S.latestFeatureIndex&&u.id===k.layerIds[0]&&this.updateBucketOpacities(k,S.tileID,C,S.collisionBoxArray)}}updateBucketOpacities(u,p,C,S){u.hasTextData()&&(u.text.opacityVertexArray.clear(),u.text.hasVisibleVertices=!1),u.hasIconData()&&(u.icon.opacityVertexArray.clear(),u.icon.hasVisibleVertices=!1),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const k=u.layers[0],K=k.layout,N=new Sl(null,0,!1,!1,!0),$=K.get("text-allow-overlap"),se=K.get("icon-allow-overlap"),ue=k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ye=K.get("text-rotation-alignment")==="map",me=K.get("text-pitch-alignment")==="map",Se=K.get("icon-text-fit")!=="none",Ke=new Sl(null,0,$&&(se||!u.hasIconData()||K.get("icon-optional")),se&&($||!u.hasTextData()||K.get("text-optional")),!0);!u.collisionArrays&&S&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(S);const Je=(tt,rt,dt)=>{for(let st=0;st<rt/4;st++)tt.opacityVertexArray.emplaceBack(dt);tt.hasVisibleVertices=tt.hasVisibleVertices||dt!==Mu},nt=this.collisionBoxArrays.get(u.bucketInstanceId);for(let tt=0;tt<u.symbolInstances.length;tt++){const rt=u.symbolInstances.get(tt),{numHorizontalGlyphVertices:dt,numVerticalGlyphVertices:st,crossTileID:ft}=rt;let Ct=this.opacities[ft];C[ft]?Ct=N:Ct||(Ct=Ke,this.opacities[ft]=Ct),C[ft]=!0;const lt=rt.numIconVertices>0,Ot=this.placedOrientations[rt.crossTileID],Ft=Ot===a.aA.vertical,zt=Ot===a.aA.horizontal||Ot===a.aA.horizontalOnly;if(dt>0||st>0){const Qt=Es(Ct.text);Je(u.text,dt,Ft?Mu:Qt),Je(u.text,st,zt?Mu:Qt);const dn=Ct.text.isHidden();[rt.rightJustifiedTextSymbolIndex,rt.centerJustifiedTextSymbolIndex,rt.leftJustifiedTextSymbolIndex].forEach((ai=>{ai>=0&&(u.text.placedSymbolArray.get(ai).hidden=dn||Ft?1:0)})),rt.verticalPlacedTextSymbolIndex>=0&&(u.text.placedSymbolArray.get(rt.verticalPlacedTextSymbolIndex).hidden=dn||zt?1:0);const Rn=this.variableOffsets[rt.crossTileID];Rn&&this.markUsedJustification(u,Rn.anchor,rt,Ot);const An=this.placedOrientations[rt.crossTileID];An&&(this.markUsedJustification(u,"left",rt,An),this.markUsedOrientation(u,An,rt))}if(lt){const Qt=Es(Ct.icon),dn=!(Se&&rt.verticalPlacedIconSymbolIndex&&Ft);rt.placedIconSymbolIndex>=0&&(Je(u.icon,rt.numIconVertices,dn?Qt:Mu),u.icon.placedSymbolArray.get(rt.placedIconSymbolIndex).hidden=Ct.icon.isHidden()),rt.verticalPlacedIconSymbolIndex>=0&&(Je(u.icon,rt.numVerticalIconVertices,dn?Mu:Qt),u.icon.placedSymbolArray.get(rt.verticalPlacedIconSymbolIndex).hidden=Ct.icon.isHidden())}const Gt=nt&&nt.has(tt)?nt.get(tt):{text:null,icon:null};if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const Qt=u.collisionArrays[tt];if(Qt){let dn=new a.P(0,0);if(Qt.textBox||Qt.verticalTextBox){let Rn=!0;if(ue){const An=this.variableOffsets[ft];An?(dn=Vs(An.anchor,An.width,An.height,An.textOffset,An.textBoxScale),ye&&dn._rotate(me?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Rn=!1}if(Qt.textBox||Qt.verticalTextBox){let An;Qt.textBox&&(An=Ft),Qt.verticalTextBox&&(An=zt),Yl(u.textCollisionBox.collisionVertexArray,Ct.text.placed,!Rn||An,Gt.text,dn.x,dn.y)}}if(Qt.iconBox||Qt.verticalIconBox){const Rn=!!(!zt&&Qt.verticalIconBox);let An;Qt.iconBox&&(An=Rn),Qt.verticalIconBox&&(An=!Rn),Yl(u.iconCollisionBox.collisionVertexArray,Ct.icon.placed,An,Gt.icon,Se?dn.x:0,Se?dn.y:0)}}}}if(u.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.text.opacityVertexArray.length!==u.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${u.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${u.text.layoutVertexArray.length}) / 4`);if(u.icon.opacityVertexArray.length!==u.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${u.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${u.icon.layoutVertexArray.length}) / 4`);u.bucketInstanceId in this.collisionCircleArrays&&(u.collisionCircleArray=this.collisionCircleArrays[u.bucketInstanceId],delete this.collisionCircleArrays[u.bucketInstanceId])}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,p){const C=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*C>u}setStale(){this.stale=!0}}function Yl(I,u,p,C,S,k){C&&C.length!==0||(C=[0,0,0,0]);const K=C[0]-lr,N=C[1]-lr,$=C[2]-lr,se=C[3]-lr;I.emplaceBack(u?1:0,p?1:0,S||0,k||0,K,N),I.emplaceBack(u?1:0,p?1:0,S||0,k||0,$,N),I.emplaceBack(u?1:0,p?1:0,S||0,k||0,$,se),I.emplaceBack(u?1:0,p?1:0,S||0,k||0,K,se)}const $c=Math.pow(2,25),Vl=Math.pow(2,24),$l=Math.pow(2,17),hs=Math.pow(2,16),Mo=Math.pow(2,9),Hl=Math.pow(2,8),xu=Math.pow(2,1);function Es(I){if(I.opacity===0&&!I.placed)return 0;if(I.opacity===1&&I.placed)return 4294967295;const u=I.placed?1:0,p=Math.floor(127*I.opacity);return p*$c+u*Vl+p*$l+u*hs+p*Mo+u*Hl+p*xu+u}const Mu=0;class Zl{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&!u.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(u,p,C,S,k){const K=this._bucketParts;for(;this._currentTileIndex<u.length;)if(p.getBucketParts(K,S,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,k())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,K.sort(((N,$)=>N.sortKey-$.sortKey)));this._currentPartIndex<K.length;)if(p.placeLayerBucketPart(K[this._currentPartIndex],this._seenCrossTileIDs,C),this._currentPartIndex++,k())return!0;return!1}}class Yu{constructor(u,p,C,S,k,K,N,$){this.placement=new vc(u,p,K,N,$),this._currentPlacementIndex=C.length-1,this._forceFullPlacement=S,this._showCollisionBoxes=k,this._done=!1}isDone(){return this._done}continuePlacement(u,p,C){const S=U(),k=()=>!this._forceFullPlacement&&U()-S>2;for(;this._currentPlacementIndex>=0;){const K=p[u[this._currentPlacementIndex]],N=this.placement.collisionIndex.transform.zoom;if(K.type==="symbol"&&(!K.minzoom||K.minzoom<=N)&&(!K.maxzoom||K.maxzoom>N)){if(this._inProgressLayer||(this._inProgressLayer=new Zl(K)),this._inProgressLayer.continuePlacement(C[K.source],this.placement,this._showCollisionBoxes,K,k))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const Ji=512/a.a5/2;class Ha{constructor(u,p,C){this.tileID=u,this.bucketInstanceId=C,this._symbolsByKey={};const S=new Map;for(let k=0;k<p.length;k++){const K=p.get(k),N=K.key,$=S.get(N);$?$.push(K):S.set(N,[K])}for(const[k,K]of S){const N={positions:K.map(($=>({x:Math.floor($.anchorX*Ji),y:Math.floor($.anchorY*Ji)}))),crossTileIDs:K.map(($=>$.crossTileID))};if(N.positions.length>128){const $=new a.aU(N.positions.length,16,Uint16Array);for(const{x:se,y:ue}of N.positions)$.add(se,ue);$.finish(),delete N.positions,N.index=$}this._symbolsByKey[k]=N}}getScaledCoordinates(u,p){const{x:C,y:S,z:k}=this.tileID.canonical,{x:K,y:N,z:$}=p.canonical,se=Ji/Math.pow(2,$-k),ue=(N*a.a5+u.anchorY)*se,ye=S*a.a5*Ji;return{x:Math.floor((K*a.a5+u.anchorX)*se-C*a.a5*Ji),y:Math.floor(ue-ye)}}findMatches(u,p,C){const S=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let k=0;k<u.length;k++){const K=u.get(k);if(K.crossTileID)continue;const N=this._symbolsByKey[K.key];if(!N)continue;const $=this.getScaledCoordinates(K,p);if(N.index){const se=N.index.range($.x-S,$.y-S,$.x+S,$.y+S).sort();for(const ue of se){const ye=N.crossTileIDs[ue];if(!C[ye]){C[ye]=!0,K.crossTileID=ye;break}}}else if(N.positions)for(let se=0;se<N.positions.length;se++){const ue=N.positions[se],ye=N.crossTileIDs[se];if(Math.abs(ue.x-$.x)<=S&&Math.abs(ue.y-$.y)<=S&&!C[ye]){C[ye]=!0,K.crossTileID=ye;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:u})=>u))}}class Xo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Vu{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const p=Math.round((u-this.lng)/360);if(p!==0)for(const C in this.indexes){const S=this.indexes[C],k={};for(const K in S){const N=S[K];N.tileID=N.tileID.unwrapTo(N.tileID.wrap+p),k[N.tileID.key]=N}this.indexes[C]=k}this.lng=u}addBucket(u,p,C){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let k=0;k<p.symbolInstances.length;k++)p.symbolInstances.get(k).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});const S=this.usedCrossTileIDs[u.overscaledZ];for(const k in this.indexes){const K=this.indexes[k];if(Number(k)>u.overscaledZ)for(const N in K){const $=K[N];$.tileID.isChildOf(u)&&$.findMatches(p.symbolInstances,u,S)}else{const N=K[u.scaledTo(Number(k)).key];N&&N.findMatches(p.symbolInstances,u,S)}}for(let k=0;k<p.symbolInstances.length;k++){const K=p.symbolInstances.get(k);K.crossTileID||(K.crossTileID=C.generate(),S[K.crossTileID]=!0)}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new Ha(u,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(u,p){for(const C of p.getCrossTileIDsLists())for(const S of C)delete this.usedCrossTileIDs[u][S]}removeStaleBuckets(u){let p=!1;for(const C in this.indexes){const S=this.indexes[C];for(const k in S)u[S[k].bucketInstanceId]||(this.removeBucketCrossTileIDs(C,S[k]),delete S[k],p=!0)}return p}}class Jo{constructor(){this.layerIndexes={},this.crossTileIDs=new Xo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,p,C){let S=this.layerIndexes[u.id];S===void 0&&(S=this.layerIndexes[u.id]=new Vu);let k=!1;const K={};S.handleWrapJump(C);for(const N of p){const $=N.getBucket(u);$&&u.id===$.layerIds[0]&&($.bucketInstanceId||($.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(N.tileID,$,this.crossTileIDs)&&(k=!0),K[$.bucketInstanceId]=!0)}return S.removeStaleBuckets(K)&&(k=!0),k}pruneUnusedLayers(u){const p={};u.forEach((C=>{p[C]=!0}));for(const C in this.layerIndexes)p[C]||delete this.layerIndexes[C]}}var Ao="void main() {fragColor=vec4(1.0);}";const ho={prelude:_i(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:_i("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:_i("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:_i(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:_i(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:_i(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:_i(Ao,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:_i(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:_i(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:_i("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:_i("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:_i(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:_i("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:_i(Ao,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:_i(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:_i(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:_i(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:_i(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:_i(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:_i(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:_i(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:_i(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:_i(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:_i(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:_i(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:_i(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:_i(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:_i(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:_i(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:_i(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:_i(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:_i("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:_i("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:_i("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:_i("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:_i(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:_i("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function _i(I,u){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,C=u.match(/in ([\w]+) ([\w]+)/g),S=I.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),K=k?k.concat(S):S,N={};return{fragmentSource:I=I.replace(p,(($,se,ue,ye,me)=>(N[me]=!0,se==="define"?`
#ifndef HAS_UNIFORM_u_${me}
in ${ue} ${ye} ${me};
#else
uniform ${ue} ${ye} u_${me};
#endif
`:`
#ifdef HAS_UNIFORM_u_${me}
    ${ue} ${ye} ${me} = u_${me};
#endif
`))),vertexSource:u=u.replace(p,(($,se,ue,ye,me)=>{const Se=ye==="float"?"vec2":"vec4",Ke=me.match(/color/)?"color":Se;return N[me]?se==="define"?`
#ifndef HAS_UNIFORM_u_${me}
uniform lowp float u_${me}_t;
in ${ue} ${Se} a_${me};
out ${ue} ${ye} ${me};
#else
uniform ${ue} ${ye} u_${me};
#endif
`:Ke==="vec4"?`
#ifndef HAS_UNIFORM_u_${me}
    ${me} = a_${me};
#else
    ${ue} ${ye} ${me} = u_${me};
#endif
`:`
#ifndef HAS_UNIFORM_u_${me}
    ${me} = unpack_mix_${Ke}(a_${me}, u_${me}_t);
#else
    ${ue} ${ye} ${me} = u_${me};
#endif
`:se==="define"?`
#ifndef HAS_UNIFORM_u_${me}
uniform lowp float u_${me}_t;
in ${ue} ${Se} a_${me};
#else
uniform ${ue} ${ye} u_${me};
#endif
`:Ke==="vec4"?`
#ifndef HAS_UNIFORM_u_${me}
    ${ue} ${ye} ${me} = a_${me};
#else
    ${ue} ${ye} ${me} = u_${me};
#endif
`:`
#ifndef HAS_UNIFORM_u_${me}
    ${ue} ${ye} ${me} = unpack_mix_${Ke}(a_${me}, u_${me}_t);
#else
    ${ue} ${ye} ${me} = u_${me};
#endif
`})),staticAttributes:C,staticUniforms:K}}class to{constructor(u,p,C){this.vertexBuffer=u,this.indexBuffer=p,this.segments=C}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var $s=a.aV([{name:"a_pos",type:"Int16",components:2}]);const go="#define PROJECTION_MERCATOR",Fs="mercator";class Yr{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Fs}get shaderDefine(){return go}get shaderPreludeCode(){return ho.projectionMercator}get vertexShaderPreludeCode(){return ho.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aW.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(u){}getMeshFromTileID(u,p,C,S,k){if(this._cachedMesh)return this._cachedMesh;const K=new a.aX;K.emplaceBack(0,0),K.emplaceBack(a.a5,0),K.emplaceBack(0,a.a5),K.emplaceBack(a.a5,a.a5);const N=u.createVertexBuffer(K,$s.members),$=a.aY.simpleSegment(0,0,4,2),se=new a.aZ;se.emplaceBack(1,0,2),se.emplaceBack(1,2,3);const ue=u.createIndexBuffer(se);return this._cachedMesh=new to(N,ue,$),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(u){}}class oa{constructor(u=0,p=0,C=0,S=0){if(isNaN(u)||u<0||isNaN(p)||p<0||isNaN(C)||C<0||isNaN(S)||S<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=p,this.left=C,this.right=S}interpolate(u,p,C){return p.top!=null&&u.top!=null&&(this.top=a.G.number(u.top,p.top,C)),p.bottom!=null&&u.bottom!=null&&(this.bottom=a.G.number(u.bottom,p.bottom,C)),p.left!=null&&u.left!=null&&(this.left=a.G.number(u.left,p.left,C)),p.right!=null&&u.right!=null&&(this.right=a.G.number(u.right,p.right,C)),this}getCenter(u,p){const C=a.ao((this.left+u-this.right)/2,0,u),S=a.ao((this.top+p-this.bottom)/2,0,p);return new a.P(C,S)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new oa(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Za(I,u){if(!I.renderWorldCopies||I.lngRange)return;const p=u.lng-I.center.lng;u.lng+=p>180?-360:p<-180?360:0}function $i(I){return Math.max(0,Math.floor(I))}class Tr{constructor(u,p){var C;this.applyConstrain=(S,k)=>this._constrainOverride!==null?this._constrainOverride(S,k):this._callbacks.defaultConstrain(S,k),this._callbacks=u,this._tileSize=512,this._renderWorldCopies=p?.renderWorldCopies===void 0||!!p?.renderWorldCopies,this._minZoom=p?.minZoom||0,this._maxZoom=p?.maxZoom||22,this._minPitch=p?.minPitch==null?0:p?.minPitch,this._maxPitch=p?.maxPitch==null?60:p?.maxPitch,this._constrainOverride=(C=p?.constrainOverride)!==null&&C!==void 0?C:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=$i(this._zoom),this._scale=a.ar(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new oa,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(u,p,C){this._constrainOverride=u.constrainOverride,this._latRange=u.latRange,this._lngRange=u.lngRange,this._width=u.width,this._height=u.height,this._center=u.center,this._elevation=u.elevation,this._minElevationForCurrentTile=u.minElevationForCurrentTile,this._zoom=u.zoom,this._tileZoom=$i(this._zoom),this._scale=a.ar(this._zoom),this._bearingInRadians=u.bearingInRadians,this._fovInRadians=u.fovInRadians,this._pitchInRadians=u.pitchInRadians,this._rollInRadians=u.rollInRadians,this._unmodified=u.unmodified,this._edgeInsets=new oa(u.padding.top,u.padding.bottom,u.padding.left,u.padding.right),this._minZoom=u.minZoom,this._maxZoom=u.maxZoom,this._minPitch=u.minPitch,this._maxPitch=u.maxPitch,this._renderWorldCopies=u.renderWorldCopies,this._cameraToCenterDistance=u.cameraToCenterDistance,this._nearZ=u.nearZ,this._farZ=u.farZ,this._autoCalculateNearFarZ=!C&&u.autoCalculateNearFarZ,p&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(u){this._minElevationForCurrentTile=u}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(u){this._minZoom!==u&&(this._minZoom=u,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(u){this._minPitch!==u&&(this._minPitch=u,this.setPitch(Math.max(this.pitch,u)))}get maxPitch(){return this._maxPitch}setMaxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.setPitch(Math.min(this.pitch,u)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get constrainOverride(){return this._constrainOverride}setConstrainOverride(u){u===void 0&&(u=null),this._constrainOverride!==u&&(this._constrainOverride=u,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(u){const p=a.W(u,-180,180)*Math.PI/180;var C,S,k,K,N,$,se,ue,ye;this._bearingInRadians!==p&&(this._unmodified=!1,this._bearingInRadians=p,this._calcMatrices(),this._rotationMatrix=d(),C=this._rotationMatrix,k=-this._bearingInRadians,K=(S=this._rotationMatrix)[0],N=S[1],$=S[2],se=S[3],ue=Math.sin(k),ye=Math.cos(k),C[0]=K*ye+$*ue,C[1]=N*ye+se*ue,C[2]=K*-ue+$*ye,C[3]=N*-ue+se*ye)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(u){const p=a.ao(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==p&&(this._unmodified=!1,this._pitchInRadians=p,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(u){const p=u/180*Math.PI;this._rollInRadians!==p&&(this._unmodified=!1,this._rollInRadians=p,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.a_(this._fovInRadians)}setFov(u){u=a.ao(u,.1,150),this.fov!==u&&(this._unmodified=!1,this._fovInRadians=a.aq(u),this._calcMatrices())}get zoom(){return this._zoom}setZoom(u){const p=this.applyConstrain(this._center,u).zoom;this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this._tileZoom=Math.max(0,Math.floor(p)),this._scale=a.ar(p),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(u){u!==this._elevation&&(this._elevation=u,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(u,p){this._autoCalculateNearFarZ=!1,this._nearZ=u,this._farZ=p,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,p,C){this._unmodified=!1,this._edgeInsets.interpolate(u,p,C),this.constrainInternal(),this._calcMatrices()}resize(u,p,C=!0){this._width=u,this._height=p,C&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new en([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(u){u?(this._lngRange=[u.getWest(),u.getEast()],this._latRange=[u.getSouth(),u.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-a.ap,a.ap])}getCameraQueryGeometry(u,p){if(p.length===1)return[p[0],u];{const{minX:C,minY:S,maxX:k,maxY:K}=a.ac.fromPoints(p).extend(u);return[new a.P(C,S),new a.P(k,S),new a.P(k,K),new a.P(C,K),new a.P(C,S)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const u=this._unmodified,{center:p,zoom:C}=this.applyConstrain(this.center,this.zoom);this.setCenter(p),this.setZoom(C),this._unmodified=u,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let u=a.as(new Float64Array(16));a.Q(u,u,[this._width/2,-this._height/2,1]),a.O(u,u,[1,-1,0]),this._clipSpaceToPixelsMatrix=u,u=a.as(new Float64Array(16)),a.Q(u,u,[1,-1,1]),a.O(u,u,[-1,-1,0]),a.Q(u,u,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=u,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(u,p,C,S){const k=C!==void 0?C:this.bearing,K=S=S!==void 0?S:this.pitch,{distanceToCenter:N,clampedElevation:$}=this._distanceToCenterFromAltElevationPitch(p,this.elevation,K),{x:se,y:ue}=Ci(K,k),ye=a.ab.fromLngLat(u,p);let me,Se,Ke=a.a$(1,ye.y),Je=0;do{if(Je+=1,Je>10)break;Se=N/Ke,me=new a.ab(ye.x+se*Se,ye.y+ue*Se),Ke=1/me.meterInMercatorCoordinateUnits()}while(Math.abs(N-Se*Ke)>1e-12);return{center:me.toLngLat(),elevation:$,zoom:a.au(this.height/2/Math.tan(this.fovInRadians/2)/Se/this.tileSize)}}recalculateZoomAndCenter(u){if(this.elevation-u==0)return;const p=1/this.worldSize,C=a.at(1,this.center.lat)*this.worldSize,S=a.ab.fromLngLat(this.center,this.elevation),k=S.x/p,K=S.y/p,N=S.z/p,$=this.pitch,se=this.bearing,{x:ue,y:ye,z:me}=Ci($,se),Se=this.cameraToCenterDistance,Ke=k+Se*-ue,Je=K+Se*-ye,nt=N+Se*me,{distanceToCenter:tt,clampedElevation:rt}=this._distanceToCenterFromAltElevationPitch(nt/C,u,$),dt=tt*C,st=new a.ab((Ke+ue*dt)*p,(Je+ye*dt)*p,0).toLngLat(),ft=a.at(1,st.lat),Ct=a.au(this.height/2/Math.tan(this.fovInRadians/2)/tt/ft/this.tileSize);this._elevation=rt,this._center=st,this.setZoom(Ct)}_distanceToCenterFromAltElevationPitch(u,p,C){const S=-Math.cos(a.aq(C)),k=u-p;let K,N=p;return S*k>=0||Math.abs(S)<.1?(K=1e4,N=u+K*S):K=-k/S,{distanceToCenter:K,clampedElevation:N}}getCameraPoint(){const u=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(u*Math.sin(this.rollInRadians),u*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const u=a.at(1,this.center.lat)*this.worldSize;return xt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/u).toLngLat()}getMercatorTileCoordinates(u){if(!u)return[0,0,1,1];const p=u.canonical.z>=0?1<<u.canonical.z:Math.pow(2,u.canonical.z);return[u.canonical.x/p,u.canonical.y/p,1/p/a.a5,1/p/a.a5]}}class ne{constructor(u,p){this.min=u,this.max=p,this.center=a.b0([],a.b1([],this.min,this.max),.5)}quadrant(u){const p=[u%2==0,u<2],C=a.b2(this.min),S=a.b2(this.max);for(let k=0;k<p.length;k++)C[k]=p[k]?this.min[k]:this.center[k],S[k]=p[k]?this.center[k]:this.max[k];return S[2]=this.max[2],new ne(C,S)}distanceX(u){return Math.max(Math.min(this.max[0],u[0]),this.min[0])-u[0]}distanceY(u){return Math.max(Math.min(this.max[1],u[1]),this.min[1])-u[1]}intersectsFrustum(u){let p=!0;for(let C=0;C<u.planes.length;C++){const S=this.intersectsPlane(u.planes[C]);if(S===0)return 0;S===1&&(p=!1)}return p?2:u.aabb.min[0]>this.max[0]||u.aabb.min[1]>this.max[1]||u.aabb.min[2]>this.max[2]||u.aabb.max[0]<this.min[0]||u.aabb.max[1]<this.min[1]||u.aabb.max[2]<this.min[2]?0:1}intersectsPlane(u){let p=u[3],C=u[3];for(let S=0;S<3;S++)u[S]>0?(p+=u[S]*this.min[S],C+=u[S]*this.max[S]):(C+=u[S]*this.min[S],p+=u[S]*this.max[S]);return p>=0?2:C<0?0:1}}class Ce{distanceToTile2d(u,p,C,S){const k=S.distanceX([u,p]),K=S.distanceY([u,p]);return Math.hypot(k,K)}getWrap(u,p,C){return C}getTileBoundingVolume(u,p,C,S){var k,K;let N=0,$=0;if(S?.terrain){const ue=new a.a2(u.z,p,u.z,u.x,u.y),ye=S.terrain.getMinMaxElevation(ue);N=(k=ye.minElevation)!==null&&k!==void 0?k:Math.min(0,C),$=(K=ye.maxElevation)!==null&&K!==void 0?K:Math.max(0,C)}const se=1<<u.z;return new ne([p+u.x/se,u.y/se,N],[p+(u.x+1)/se,(u.y+1)/se,$])}allowVariableZoom(u,p){const C=u.fov*(Math.abs(Math.cos(u.rollInRadians))*u.height+Math.abs(Math.sin(u.rollInRadians))*u.width)/u.height,S=a.ao(78.5-C/2,0,60);return!!p.terrain||u.pitch>S}allowWorldCopies(){return!0}prepareNextFrame(){}}class He{constructor(u,p,C){this.points=u,this.planes=p,this.aabb=C}static fromInvProjectionMatrix(u,p=1,C=0,S,k){const K=k?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],N=Math.pow(2,C),$=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((me=>(function(Se,Ke,Je,nt){const tt=a.aI([],Se,Ke),rt=1/tt[3]/Je*nt;return a.b7(tt,tt,[rt,rt,1/tt[3],rt])})(me,u,p,N)));S&&(function(me,Se,Ke,Je){const nt=Je?4:0,tt=Je?0:4;let rt=0;const dt=[],st=[];for(let lt=0;lt<4;lt++){const Ot=a.b3([],me[lt+tt],me[lt+nt]),Ft=a.b8(Ot);a.b0(Ot,Ot,1/Ft),dt.push(Ft),st.push(Ot)}for(let lt=0;lt<4;lt++){const Ot=a.b9(me[lt+nt],st[lt],Ke);rt=Ot!==null&&Ot>=0?Math.max(rt,Ot):Math.max(rt,dt[lt])}const ft=(function(lt,Ot){const Ft=a.b3([],lt[Ot[0]],lt[Ot[1]]),zt=a.b3([],lt[Ot[2]],lt[Ot[1]]),Gt=[0,0,0,0];return a.b4(Gt,a.b5([],Ft,zt)),Gt[3]=-a.b6(Gt,lt[Ot[0]]),Gt})(me,Se),Ct=(function(lt,Ot){const Ft=a.ba(lt),zt=a.bb([],lt,1/Ft),Gt=a.b3([],Ot,a.b0([],zt,a.b6(Ot,zt))),Qt=a.ba(Gt);if(Qt>0){const dn=Math.sqrt(1-zt[3]*zt[3]),Rn=a.b0([],zt,-zt[3]),An=a.b1([],Rn,a.b0([],Gt,dn/Qt));return a.bc(Ot,An)}return null})(Ke,ft);if(Ct!==null){const lt=Ct/a.b6(st[0],ft);rt=Math.min(rt,lt)}for(let lt=0;lt<4;lt++){const Ot=Math.min(rt,dt[lt]);me[lt+tt]=[me[lt+nt][0]+st[lt][0]*Ot,me[lt+nt][1]+st[lt][1]*Ot,me[lt+nt][2]+st[lt][2]*Ot,1]}})($,K[0],S,k);const se=K.map((me=>{const Se=a.b3([],$[me[0]],$[me[1]]),Ke=a.b3([],$[me[2]],$[me[1]]),Je=a.b4([],a.b5([],Se,Ke)),nt=-a.b6(Je,$[me[1]]);return Je.concat(nt)})),ue=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],ye=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const me of $)for(let Se=0;Se<3;Se++)ue[Se]=Math.min(ue[Se],me[Se]),ye[Se]=Math.max(ye[Se],me[Se]);return new He($,se,new ne(ue,ye))}}class Et{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(u){this._helper.setMinZoom(u)}setMaxZoom(u){this._helper.setMaxZoom(u)}setMinPitch(u){this._helper.setMinPitch(u)}setMaxPitch(u){this._helper.setMaxPitch(u)}setRenderWorldCopies(u){this._helper.setRenderWorldCopies(u)}setBearing(u){this._helper.setBearing(u)}setPitch(u){this._helper.setPitch(u)}setRoll(u){this._helper.setRoll(u)}setFov(u){this._helper.setFov(u)}setZoom(u){this._helper.setZoom(u)}setCenter(u){this._helper.setCenter(u)}setElevation(u){this._helper.setElevation(u)}setMinElevationForCurrentTile(u){this._helper.setMinElevationForCurrentTile(u)}setPadding(u){this._helper.setPadding(u)}interpolatePadding(u,p,C){return this._helper.interpolatePadding(u,p,C)}isPaddingEqual(u){return this._helper.isPaddingEqual(u)}resize(u,p,C=!0){this._helper.resize(u,p,C)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(u){this._helper.setMaxBounds(u)}setConstrainOverride(u){this._helper.setConstrainOverride(u)}overrideNearFarZ(u,p){this._helper.overrideNearFarZ(u,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(u){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),u)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(u,p){}constructor(u){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(p,C)=>{C=a.ao(+C,this.minZoom,this.maxZoom);const S={center:new a.V(p.lng,p.lat),zoom:C};let k=this._helper._lngRange;if(!this._helper._renderWorldCopies&&k===null){const st=179.9999999999;k=[-st,st]}const K=this.tileSize*a.ar(S.zoom);let N=0,$=K,se=0,ue=K,ye=0,me=0;const{x:Se,y:Ke}=this.size;if(this._helper._latRange){const st=this._helper._latRange;N=a.X(st[1])*K,$=a.X(st[0])*K,$-N<Ke&&(ye=Ke/($-N))}k&&(se=a.W(a.Y(k[0])*K,0,K),ue=a.W(a.Y(k[1])*K,0,K),ue<se&&(ue+=K),ue-se<Se&&(me=Se/(ue-se)));const{x:Je,y:nt}=Rt(K,p);let tt,rt;const dt=Math.max(me||0,ye||0);if(dt){const st=new a.P(me?(ue+se)/2:Je,ye?($+N)/2:nt);return S.center=mn(K,st).wrap(),S.zoom+=a.au(dt),S}if(this._helper._latRange){const st=Ke/2;nt-st<N&&(rt=N+st),nt+st>$&&(rt=$-st)}if(k){const st=(se+ue)/2;let ft=Je;this._helper._renderWorldCopies&&(ft=a.W(Je,st-K/2,st+K/2));const Ct=Se/2;ft-Ct<se&&(tt=se+Ct),ft+Ct>ue&&(tt=ue-Ct)}if(tt!==void 0||rt!==void 0){const st=new a.P(tt??Je,rt??nt);S.center=mn(K,st).wrap()}return S},this.applyConstrain=(p,C)=>this._helper.applyConstrain(p,C),this._helper=new Tr({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(p,C)=>this.defaultConstrain(p,C)},u),this._coveringTilesDetailsProvider=new Ce}clone(){const u=new Et;return u.apply(this),u}apply(u,p,C){this._helper.apply(u,p,C)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(u){const p=[new a.bd(0,u)];if(this._helper._renderWorldCopies){const C=this.screenPointToMercatorCoordinate(new a.P(0,0)),S=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),k=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),K=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),N=Math.floor(Math.min(C.x,S.x,k.x,K.x)),$=Math.floor(Math.max(C.x,S.x,k.x,K.x)),se=1;for(let ue=N-se;ue<=$+se;ue++)ue!==0&&p.push(new a.bd(ue,u))}return p}getCameraFrustum(){return He.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(u){const p=this.screenPointToLocation(this.centerPoint,u),C=u?u.getElevationForLngLatZoom(p,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(C)}setLocationAtPoint(u,p){const C=a.at(this.elevation,this.center.lat),S=this.screenPointToMercatorCoordinateAtZ(p,C),k=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,C),K=a.ab.fromLngLat(u),N=new a.ab(K.x-(S.x-k.x),K.y-(S.y-k.y));this.setCenter(N?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(u,p){return p?this.coordinatePoint(a.ab.fromLngLat(u),p.getElevationForLngLat(u),this._pixelMatrix3D):this.coordinatePoint(a.ab.fromLngLat(u))}screenPointToLocation(u,p){var C;return(C=this.screenPointToMercatorCoordinate(u,p))===null||C===void 0?void 0:C.toLngLat()}screenPointToMercatorCoordinate(u,p){if(p){const C=p.pointCoordinate(u);if(C!=null)return C}return this.screenPointToMercatorCoordinateAtZ(u)}screenPointToMercatorCoordinateAtZ(u,p){const C=p||0,S=[u.x,u.y,0,1],k=[u.x,u.y,1,1];a.aI(S,S,this._pixelMatrixInverse),a.aI(k,k,this._pixelMatrixInverse);const K=S[3],N=k[3],$=S[1]/K,se=k[1]/N,ue=S[2]/K,ye=k[2]/N,me=ue===ye?0:(C-ue)/(ye-ue);return new a.ab(a.G.number(S[0]/K,k[0]/N,me)/this.worldSize,a.G.number($,se,me)/this.worldSize,C)}coordinatePoint(u,p=0,C=this._pixelMatrix){const S=[u.x*this.worldSize,u.y*this.worldSize,p,1];return a.aI(S,S,C),new a.P(S[0]/S[3],S[1]/S[3])}getBounds(){const u=Math.max(0,this._helper._height/2-bn(this));return new en().extend(this.screenPointToLocation(new a.P(0,u))).extend(this.screenPointToLocation(new a.P(this._helper._width,u))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(u,p){return p?p.pointCoordinate(u)!=null:u.y>this.height/2-bn(this)}calculatePosMatrix(u,p=!1,C){var S;const k=(S=u.key)!==null&&S!==void 0?S:a.be(u.wrap,u.canonical.z,u.canonical.z,u.canonical.x,u.canonical.y),K=p?this._alignedPosMatrixCache:this._posMatrixCache;if(K.has(k)){const se=K.get(k);return C?se.f32:se.f64}const N=Cn(u,this.worldSize);a.S(N,p?this._alignedProjMatrix:this._viewProjMatrix,N);const $={f64:N,f32:new Float32Array(N)};return K.set(k,$),C?$.f32:$.f64}calculateFogMatrix(u){const p=u.key,C=this._fogMatrixCacheF32;if(C.has(p))return C.get(p);const S=Cn(u,this.worldSize);return a.S(S,this._fogMatrix,S),C.set(p,new Float32Array(S)),C.get(p)}calculateCenterFromCameraLngLatAlt(u,p,C,S){return this._helper.calculateCenterFromCameraLngLatAlt(u,p,C,S)}_calculateNearFarZIfNeeded(u,p,C){if(!this._helper.autoCalculateNearFarZ)return;const S=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),k=u-S*this._helper._pixelPerMeter/Math.cos(p),K=S<0?k:u,N=Math.PI/2+this.pitchInRadians,$=a.aq(this.fov)*(Math.abs(Math.cos(a.aq(this.roll)))*this.height+Math.abs(Math.sin(a.aq(this.roll)))*this.width)/this.height*(.5+C.y/this.height),se=Math.sin($)*K/Math.sin(a.ao(Math.PI-N-$,.01,Math.PI-.01)),ue=bn(this),ye=Math.atan(ue/this._helper.cameraToCenterDistance),me=a.aq(.75),Se=ye>me?2*ye*(.5+C.y/(2*ue)):me,Ke=Math.sin(Se)*K/Math.sin(a.ao(Math.PI-N-Se,.01,Math.PI-.01)),Je=Math.min(se,Ke);this._helper._farZ=1.01*(Math.cos(Math.PI/2-p)*Je+K),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const u=this.centerOffset,p=Rt(this.worldSize,this.center),C=p.x,S=p.y;this._helper._pixelPerMeter=a.at(1,this.center.lat)*this.worldSize;const k=a.aq(Math.min(this.pitch,b)),K=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(k));let N;this._calculateNearFarZIfNeeded(K,k,u),N=new Float64Array(16),a.bf(N,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.aC(this._invProjMatrix,N),N[8]=2*-u.x/this._helper._width,N[9]=2*u.y/this._helper._height,this._projectionMatrix=a.bg(N),a.Q(N,N,[1,-1,1]),a.O(N,N,[0,0,-this._helper.cameraToCenterDistance]),a.bh(N,N,-this.rollInRadians),a.bi(N,N,this.pitchInRadians),a.bh(N,N,-this.bearingInRadians),a.O(N,N,[-C,-S,0]),this._mercatorMatrix=a.Q([],N,[this.worldSize,this.worldSize,this.worldSize]),a.Q(N,N,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,N),a.O(N,N,[0,0,-this.elevation]),this._viewProjMatrix=N,this._invViewProjMatrix=a.aC([],N);const $=[0,0,-1,1];a.aI($,$,this._invViewProjMatrix),this._cameraPosition=[$[0]/$[3],$[1]/$[3],$[2]/$[3]],this._fogMatrix=new Float64Array(16),a.bf(this._fogMatrix,this.fovInRadians,this.width/this.height,K,this._helper._farZ),this._fogMatrix[8]=2*-u.x/this.width,this._fogMatrix[9]=2*u.y/this.height,a.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.bh(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.bi(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.bh(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.O(this._fogMatrix,this._fogMatrix,[-C,-S,0]),a.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,N);const se=this._helper._width%2/2,ue=this._helper._height%2/2,ye=Math.cos(this.bearingInRadians),me=Math.sin(-this.bearingInRadians),Se=C-Math.round(C)+ye*se+me*ue,Ke=S-Math.round(S)+ye*ue+me*se,Je=new Float64Array(N);if(a.O(Je,Je,[Se>.5?Se-1:Se,Ke>.5?Ke-1:Ke,0]),this._alignedProjMatrix=Je,N=a.aC(new Float64Array(16),this._pixelMatrix),!N)throw new Error("failed to invert matrix");this._pixelMatrixInverse=N,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const u=this.screenPointToMercatorCoordinate(new a.P(0,0)),p=[u.x*this.worldSize,u.y*this.worldSize,0,1];return a.aI(p,p,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const u=a.at(1,this.center.lat)*this.worldSize;return xt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/u).toLngLat()}lngLatToCameraDepth(u,p){const C=a.ab.fromLngLat(u),S=[C.x*this.worldSize,C.y*this.worldSize,p,1];return a.aI(S,S,this._viewProjMatrix),S[2]/S[3]}getProjectionData(u){const{overscaledTileID:p,aligned:C,applyTerrainMatrix:S}=u,k=this._helper.getMercatorTileCoordinates(p),K=p?this.calculatePosMatrix(p,C,!0):null;let N;return N=p&&p.terrainRttPosMatrix32f&&S?p.terrainRttPosMatrix32f:K||a.bj(),{mainMatrix:N,tileMercatorCoords:k,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:N}}isLocationOccluded(u){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(u,p,C){return 1}transformLightDirection(u){return a.b2(u)}getRayDirectionFromPixel(u){throw new Error("Not implemented.")}projectTileCoordinates(u,p,C,S){const k=this.calculatePosMatrix(C);let K;S?(K=[u,p,S(u,p),1],a.aI(K,K,k)):(K=[u,p,0,1],ja(K,K,k));const N=K[3];return{point:new a.P(K[0]/N,K[1]/N),signedDistanceFromCamera:N,isOccluded:!1}}populateCache(u){for(const p of u)this.calculatePosMatrix(p)}getMatrixForModel(u,p){const C=a.ab.fromLngLat(u,p),S=C.meterInMercatorCoordinateUnits(),k=a.bk();return a.O(k,k,[C.x,C.y,C.z]),a.bh(k,k,Math.PI),a.bi(k,k,Math.PI/2),a.Q(k,k,[-S,S,S]),k}getProjectionDataForCustomLayer(u=!0){const p=new a.a2(0,0,0,0,0),C=this.getProjectionData({overscaledTileID:p,applyGlobeMatrix:u}),S=Cn(p,this.worldSize);a.S(S,this._viewProjMatrix,S),C.tileMercatorCoords=[0,0,1,1];const k=[a.a5,a.a5,this.worldSize/this._helper.pixelsPerMeter],K=a.bl();return a.Q(K,S,k),C.fallbackMatrix=K,C.mainMatrix=K,C}getFastPathSimpleProjectionMatrix(u){return this.calculatePosMatrix(u)}}function Qn(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Dn(I){if(I.useSlerp)if(I.k<1){const u=a.bm(I.startEulerAngles.roll,I.startEulerAngles.pitch,I.startEulerAngles.bearing),p=a.bm(I.endEulerAngles.roll,I.endEulerAngles.pitch,I.endEulerAngles.bearing),C=new Float64Array(4);a.bn(C,u,p,I.k);const S=a.bo(C);I.tr.setRoll(S.roll),I.tr.setPitch(S.pitch),I.tr.setBearing(S.bearing)}else I.tr.setRoll(I.endEulerAngles.roll),I.tr.setPitch(I.endEulerAngles.pitch),I.tr.setBearing(I.endEulerAngles.bearing);else I.tr.setRoll(a.G.number(I.startEulerAngles.roll,I.endEulerAngles.roll,I.k)),I.tr.setPitch(a.G.number(I.startEulerAngles.pitch,I.endEulerAngles.pitch,I.k)),I.tr.setBearing(a.G.number(I.startEulerAngles.bearing,I.endEulerAngles.bearing,I.k))}function Oi(I,u,p,C,S){const k=S.padding,K=Rt(S.worldSize,p.getNorthWest()),N=Rt(S.worldSize,p.getNorthEast()),$=Rt(S.worldSize,p.getSouthEast()),se=Rt(S.worldSize,p.getSouthWest()),ue=a.aq(-C),ye=K.rotate(ue),me=N.rotate(ue),Se=$.rotate(ue),Ke=se.rotate(ue),Je=new a.P(Math.max(ye.x,me.x,Ke.x,Se.x),Math.max(ye.y,me.y,Ke.y,Se.y)),nt=new a.P(Math.min(ye.x,me.x,Ke.x,Se.x),Math.min(ye.y,me.y,Ke.y,Se.y)),tt=Je.sub(nt),rt=(S.width-(k.left+k.right+u.left+u.right))/tt.x,dt=(S.height-(k.top+k.bottom+u.top+u.bottom))/tt.y;if(dt<0||rt<0)return void Qn();const st=Math.min(a.au(S.scale*Math.min(rt,dt)),I.maxZoom),ft=a.P.convert(I.offset),Ct=new a.P((u.left-u.right)/2,(u.top-u.bottom)/2).rotate(a.aq(C)),lt=ft.add(Ct).mult(S.scale/a.ar(st));return{center:mn(S.worldSize,K.add($).div(2).sub(lt)),zoom:st,bearing:C}}class Fi{get useGlobeControls(){return!1}handlePanInertia(u,p){const C=u.mag(),S=Math.abs(bn(p));return{easingOffset:u.mult(Math.min(.75*S/C,1)),easingCenter:p.center}}handleMapControlsRollPitchBearingZoom(u,p){u.bearingDelta&&p.setBearing(p.bearing+u.bearingDelta),u.pitchDelta&&p.setPitch(p.pitch+u.pitchDelta),u.rollDelta&&p.setRoll(p.roll+u.rollDelta),u.zoomDelta&&p.setZoom(p.zoom+u.zoomDelta)}handleMapControlsPan(u,p,C){u.around.distSqr(p.centerPoint)<.01||p.setLocationAtPoint(C,u.around)}cameraForBoxAndBearing(u,p,C,S,k){return Oi(u,p,C,S,k)}handleJumpToCenterZoom(u,p){u.zoom!==(p.zoom!==void 0?+p.zoom:u.zoom)&&u.setZoom(+p.zoom),p.center!==void 0&&u.setCenter(a.V.convert(p.center))}handleEaseTo(u,p){const C=u.zoom,S=u.padding,k={roll:u.roll,pitch:u.pitch,bearing:u.bearing},K={roll:p.roll===void 0?u.roll:p.roll,pitch:p.pitch===void 0?u.pitch:p.pitch,bearing:p.bearing===void 0?u.bearing:p.bearing},N=p.zoom!==void 0,$=!u.isPaddingEqual(p.padding);let se=!1;const ue=N?+p.zoom:u.zoom;let ye=u.centerPoint.add(p.offsetAsPoint);const me=u.screenPointToLocation(ye),{center:Se,zoom:Ke}=u.applyConstrain(a.V.convert(p.center||me),ue??C);Za(u,Se);const Je=Rt(u.worldSize,me),nt=Rt(u.worldSize,Se).sub(Je),tt=a.ar(Ke-C);return se=Ke!==C,{easeFunc:rt=>{if(se&&u.setZoom(a.G.number(C,Ke,rt)),a.bp(k,K)||Dn({startEulerAngles:k,endEulerAngles:K,tr:u,k:rt,useSlerp:k.roll!=K.roll}),$&&(u.interpolatePadding(S,p.padding,rt),ye=u.centerPoint.add(p.offsetAsPoint)),p.around)u.setLocationAtPoint(p.around,p.aroundPoint);else{const dt=a.ar(u.zoom-C),st=Ke>C?Math.min(2,tt):Math.max(.5,tt),ft=Math.pow(st,1-rt),Ct=mn(u.worldSize,Je.add(nt.mult(rt*ft)).mult(dt));u.setLocationAtPoint(u.renderWorldCopies?Ct.wrap():Ct,ye)}},isZooming:se,elevationCenter:Se}}handleFlyTo(u,p){const C=p.zoom!==void 0,S=u.zoom,k=u.applyConstrain(a.V.convert(p.center||p.locationAtOffset),C?+p.zoom:S),K=k.center,N=k.zoom;Za(u,K);const $=Rt(u.worldSize,p.locationAtOffset),se=Rt(u.worldSize,K).sub($),ue=se.mag(),ye=a.ar(N-S);let me;if(p.minZoom!==void 0){const Se=Math.min(+p.minZoom,S,N),Ke=u.applyConstrain(K,Se).zoom;me=a.ar(Ke-S)}return{easeFunc:(Se,Ke,Je,nt)=>{u.setZoom(Se===1?N:S+a.au(Ke));const tt=Se===1?K:mn(u.worldSize,$.add(se.mult(Je)).mult(Ke));u.setLocationAtPoint(u.renderWorldCopies?tt.wrap():tt,nt)},scaleOfZoom:ye,targetCenter:K,scaleOfMinZoom:me,pixelPathLength:ue}}}class qn{constructor(u,p,C){this.blendFunction=u,this.blendColor=p,this.mask=C}}qn.Replace=[1,0],qn.disabled=new qn(qn.Replace,a.bq.transparent,[!1,!1,!1,!1]),qn.unblended=new qn(qn.Replace,a.bq.transparent,[!0,!0,!0,!0]),qn.alphaBlended=new qn([1,771],a.bq.transparent,[!0,!0,!0,!0]);const Ei=2305;class ei{constructor(u,p,C){this.enable=u,this.mode=p,this.frontFace=C}}ei.disabled=new ei(!1,1029,Ei),ei.backCCW=new ei(!0,1029,Ei),ei.frontCCW=new ei(!0,1028,Ei);class ri{constructor(u,p,C){this.func=u,this.mask=p,this.range=C}}ri.ReadOnly=!1,ri.ReadWrite=!0,ri.disabled=new ri(519,ri.ReadOnly,[0,1]);const hr=7680;class ni{constructor(u,p,C,S,k,K){this.test=u,this.ref=p,this.mask=C,this.fail=S,this.depthFail=k,this.pass=K}}ni.disabled=new ni({func:519,mask:0},0,0,hr,hr,hr);const Kr=new WeakMap;function wo(I){var u;if(Kr.has(I))return Kr.get(I);{const p=(u=I.getParameter(I.VERSION))===null||u===void 0?void 0:u.startsWith("WebGL 2.0");return Kr.set(I,p),p}}class Po{get awaitingQuery(){return!!this._readbackQueue}constructor(u){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=u;const p=u.context,C=p.gl;this._texFormat=C.RGBA,this._texType=C.UNSIGNED_BYTE;const S=new a.aX;S.emplaceBack(-1,-1),S.emplaceBack(2,-1),S.emplaceBack(-1,2);const k=new a.aZ;k.emplaceBack(0,1,2),this._fullscreenTriangle=new to(p.createVertexBuffer(S,$s.members),p.createIndexBuffer(k),a.aY.simpleSegment(0,0,S.length,k.length)),this._resultBuffer=new Uint8Array(4),p.activeTexture.set(C.TEXTURE1);const K=C.createTexture();C.bindTexture(C.TEXTURE_2D,K),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.NEAREST),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.NEAREST),C.texImage2D(C.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=p.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(K),wo(C)&&(this._pbo=C.createBuffer(),C.bindBuffer(C.PIXEL_PACK_BUFFER,this._pbo),C.bufferData(C.PIXEL_PACK_BUFFER,4,C.STREAM_READ),C.bindBuffer(C.PIXEL_PACK_BUFFER,null))}destroy(){const u=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),u.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(u,p){const C=this._updateCount;return this._readbackQueue?C>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():C>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(u,p),this._updateCount++,this._measuredError}_bindFramebuffer(){const u=this._cachedRenderContext.context,p=u.gl;u.activeTexture.set(p.TEXTURE1),p.bindTexture(p.TEXTURE_2D,this._fbo.colorAttachment.get()),u.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(u,p){const C=this._cachedRenderContext.context,S=C.gl;if(this._bindFramebuffer(),C.viewport.set([0,0,this._texWidth,this._texHeight]),C.clear({color:a.bq.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(C,S.TRIANGLES,ri.disabled,ni.disabled,qn.unblended,ei.disabled,((k,K)=>({u_input:k,u_output_expected:K}))(u,p),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&wo(S)){S.bindBuffer(S.PIXEL_PACK_BUFFER,this._pbo),S.readBuffer(S.COLOR_ATTACHMENT0),S.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),S.bindBuffer(S.PIXEL_PACK_BUFFER,null);const k=S.fenceSync(S.SYNC_GPU_COMMANDS_COMPLETE,0);S.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:k}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const u=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&wo(u)){const p=u.clientWaitSync(this._readbackQueue.sync,0,0);if(p===u.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(p===u.TIMEOUT_EXPIRED)return;u.bindBuffer(u.PIXEL_PACK_BUFFER,this._pbo),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),u.bindBuffer(u.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),u.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Po._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(u){let p=0;return p+=u[0]/256,p+=u[1]/65536,p+=u[2]/16777216,u[3]<127&&(p=-p),p/128}}const ds=a.a5/128;function eh(I,u){const p=I.granularity!==void 0?Math.max(I.granularity,1):1,C=p+(I.generateBorders?2:0),S=p+(I.extendToNorthPole||I.generateBorders?1:0)+(I.extendToSouthPole||I.generateBorders?1:0),k=C+1,K=S+1,N=I.generateBorders?-1:0,$=I.generateBorders||I.extendToNorthPole?-1:0,se=p+(I.generateBorders?1:0),ue=p+(I.generateBorders||I.extendToSouthPole?1:0),ye=k*K,me=C*S*6,Se=k*K>65536;if(Se&&u==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Ke=Se||u==="32bit",Je=new Int16Array(2*ye);let nt=0;for(let dt=$;dt<=ue;dt++)for(let st=N;st<=se;st++){let ft=st/p*a.a5;st===-1&&(ft=-ds),st===p+1&&(ft=a.a5+ds);let Ct=dt/p*a.a5;dt===-1&&(Ct=I.extendToNorthPole?a.bs:-ds),dt===p+1&&(Ct=I.extendToSouthPole?a.bt:a.a5+ds),Je[nt++]=ft,Je[nt++]=Ct}const tt=Ke?new Uint32Array(me):new Uint16Array(me);let rt=0;for(let dt=0;dt<S;dt++)for(let st=0;st<C;st++){const ft=st+1+dt*k,Ct=st+(dt+1)*k,lt=st+1+(dt+1)*k;tt[rt++]=st+dt*k,tt[rt++]=Ct,tt[rt++]=ft,tt[rt++]=ft,tt[rt++]=Ct,tt[rt++]=lt}return{vertices:Je.buffer.slice(0),indices:tt.buffer.slice(0),uses32bitIndices:Ke}}const El=new a.aW({fill:new a.bu(128,2),line:new a.bu(512,0),tile:new a.bu(128,32),stencil:new a.bu(128,1),circle:3});class fs{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return ho.projectionGlobe}get vertexShaderPreludeCode(){return ho.projectionMercator.vertexSource}get subdivisionGranularity(){return El}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(u){this._errorMeasurement||(this._errorMeasurement=new Po(u));const p=a.X(this._errorQueryLatitudeDegrees),C=2*Math.atan(Math.exp(Math.PI-p*Math.PI*2))-.5*Math.PI,S=this._errorMeasurement.updateErrorLoop(p,C),k=U();S!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=S,this._errorMeasurementLastChangeTime=k);const K=Math.min(Math.max((k-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bv(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bw(K))}_getMeshKey(u){return`${u.granularity.toString(36)}_${u.generateBorders?"b":""}${u.extendToNorthPole?"n":""}${u.extendToSouthPole?"s":""}`}getMeshFromTileID(u,p,C,S,k){const K=(k==="stencil"?El.stencil:El.tile).getGranularityForZoomLevel(p.z);return this._getMesh(u,{granularity:K,generateBorders:C,extendToNorthPole:p.y===0&&S,extendToSouthPole:p.y===(1<<p.z)-1&&S})}_getMesh(u,p){const C=this._getMeshKey(p);if(C in this._tileMeshCache)return this._tileMeshCache[C];const S=(function(k,K){const N=eh(K,"16bit"),$=a.aX.deserialize({arrayBuffer:N.vertices,length:N.vertices.byteLength/2/2}),se=a.aZ.deserialize({arrayBuffer:N.indices,length:N.indices.byteLength/2/3});return new to(k.createVertexBuffer($,$s.members),k.createIndexBuffer(se),a.aY.simpleSegment(0,0,$.length,se.length))})(u,p);return this._tileMeshCache[C]=S,S}recalculate(u){}hasTransition(){const u=U();let p=!1;return p=p||(u-this._errorMeasurementLastChangeTime)/1e3<.7,p=p||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,p}setErrorQueryLatitudeDegrees(u){this._errorQueryLatitudeDegrees=u}}const Nv=new a.t({type:new a.D(a.u.projection.type)});class wu extends a.E{constructor(u){super(),this._transitionable=new a.x(Nv,void 0),this.setProjection(u),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.H(0)),this._mercatorProjection=new Yr,this._verticalPerspectiveProjection=new fs}get transitionState(){const u=this.properties.get("type");if(typeof u=="string"&&u==="mercator")return 0;if(typeof u=="string"&&u==="vertical-perspective")return 1;if(u instanceof a.bx){if(u.from==="vertical-perspective"&&u.to==="mercator")return 1-u.transition;if(u.from==="mercator"&&u.to==="vertical-perspective")return u.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(u){this._mercatorProjection.updateGPUdependent(u),this._verticalPerspectiveProjection.updateGPUdependent(u)}getMeshFromTileID(u,p,C,S,k){return this.currentProjection.getMeshFromTileID(u,p,C,S,k)}setProjection(u){this._transitionable.setValue("type",u?.type||"mercator")}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}setErrorQueryLatitudeDegrees(u){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(u),this._mercatorProjection.setErrorQueryLatitudeDegrees(u)}}function Xl(I){const u=vA(I.worldSize,I.center.lat);return 2*Math.PI*u}function Hc(I,u,p,C,S){const k=1/(1<<S),K=u/a.a5*k+C*k,N=a.bz((I/a.a5*k+p*k)*Math.PI*2+Math.PI,2*Math.PI),$=2*Math.atan(Math.exp(Math.PI-K*Math.PI*2))-.5*Math.PI,se=Math.cos($),ue=new Float64Array(3);return ue[0]=Math.sin(N)*se,ue[1]=Math.sin($),ue[2]=Math.cos(N)*se,ue}function yo(I){return(function(u,p){const C=Math.cos(p),S=new Float64Array(3);return S[0]=Math.sin(u)*C,S[1]=Math.sin(p),S[2]=Math.cos(u)*C,S})(I.lng*Math.PI/180,I.lat*Math.PI/180)}function vA(I,u){return I/(2*Math.PI)/Math.cos(u*Math.PI/180)}function Pd(I){const u=Math.asin(I[1])/Math.PI*180,p=Math.sqrt(I[0]*I[0]+I[2]*I[2]);if(p>1e-6){const C=I[0]/p,S=Math.acos(I[2]/p),k=(C>0?S:-S)/Math.PI*180;return new a.V(a.W(k,-180,180),u)}return new a.V(0,u)}function qo(I){return Math.cos(I*Math.PI/180)}function Eo(I,u){const p=qo(I),C=qo(u);return a.au(C/p)}function $m(I,u){const p=I.rotate(u.bearingInRadians),C=u.zoom+Eo(u.center.lat,0),S=a.bv(1/qo(u.center.lat),1/qo(Math.min(Math.abs(u.center.lat),60)),a.by(C,7,3,0,1)),k=360/Xl({worldSize:u.worldSize,center:{lat:u.center.lat}});return new a.V(u.center.lng-p.x*k*S,a.ao(u.center.lat+p.y*k,-a.ap,a.ap))}function Hm(I){const u=.5*I,p=Math.sin(u),C=Math.cos(u);return Math.log(p+C)-Math.log(C-p)}function Zm(I,u,p,C){const S=I.lat+p*C;if(Math.abs(p)>1){const k=(Math.sign(I.lat+p)!==Math.sign(I.lat)?-Math.abs(I.lat):Math.abs(I.lat))*Math.PI/180,K=Math.abs(I.lat+p)*Math.PI/180,N=Hm(k+C*(K-k)),$=Hm(k),se=Hm(K);return new a.V(I.lng+u*((N-$)/(se-$)),S)}return new a.V(I.lng+u*C,S)}class Gv{constructor(u){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=u}swapBuffers(){if(!this._hadAnyChanges)return;const u=this._cachePrevious;this._cachePrevious=this._cache,this._cache=u,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(u,p,C,S){const k=`${u.z}_${u.x}_${u.y}_${S?.terrain?"t":""}`,K=this._cache.get(k);if(K)return K;const N=this._cachePrevious.get(k);if(N)return this._cache.set(k,N),N;const $=this._boundingVolumeFactory(u,p,C,S);return this._cache.set(k,$),this._hadAnyChanges=!0,$}}class Sf{constructor(u,p,C,S){this.min=C,this.max=S,this.points=u,this.planes=p}static fromAabb(u,p){const C=[];for(let S=0;S<8;S++)C.push([1&~S?u[0]:p[0],(S>>1&1)==1?p[1]:u[1],(S>>2&1)==1?p[2]:u[2]]);return new Sf(C,[[-1,0,0,p[0]],[1,0,0,-u[0]],[0,-1,0,p[1]],[0,1,0,-u[1]],[0,0,-1,p[2]],[0,0,1,-u[2]]],u,p)}static fromCenterSizeAngles(u,p,C){const S=a.bC([],C[0],C[1],C[2]),k=a.bD([],[p[0],0,0],S),K=a.bD([],[0,p[1],0],S),N=a.bD([],[0,0,p[2]],S),$=[...u],se=[...u];for(let ye=0;ye<8;ye++)for(let me=0;me<3;me++){const Se=u[me]+k[me]*(1&~ye?-1:1)+K[me]*((ye>>1&1)==1?1:-1)+N[me]*((ye>>2&1)==1?1:-1);$[me]=Math.min($[me],Se),se[me]=Math.max(se[me],Se)}const ue=[];for(let ye=0;ye<8;ye++){const me=[...u];a.b1(me,me,a.b0([],k,1&~ye?-1:1)),a.b1(me,me,a.b0([],K,(ye>>1&1)==1?1:-1)),a.b1(me,me,a.b0([],N,(ye>>2&1)==1?1:-1)),ue.push(me)}return new Sf(ue,[[...k,-a.b6(k,ue[0])],[...K,-a.b6(K,ue[0])],[...N,-a.b6(N,ue[0])],[-k[0],-k[1],-k[2],-a.b6(k,ue[7])],[-K[0],-K[1],-K[2],-a.b6(K,ue[7])],[-N[0],-N[1],-N[2],-a.b6(N,ue[7])]],$,se)}intersectsFrustum(u){let p=!0;const C=this.points.length,S=this.planes.length,k=u.planes.length,K=u.points.length;for(let N=0;N<k;N++){const $=u.planes[N];let se=0;for(let ue=0;ue<C;ue++){const ye=this.points[ue];$[0]*ye[0]+$[1]*ye[1]+$[2]*ye[2]+$[3]>=0&&se++}if(se===0)return 0;se<C&&(p=!1)}if(p)return 2;for(let N=0;N<S;N++){const $=this.planes[N];let se=0;for(let ue=0;ue<K;ue++){const ye=u.points[ue];$[0]*ye[0]+$[1]*ye[1]+$[2]*ye[2]+$[3]>=0&&se++}if(se===0)return 0}return 1}intersectsPlane(u){const p=this.points.length;let C=0;for(let S=0;S<p;S++){const k=this.points[S];u[0]*k[0]+u[1]*k[1]+u[2]*k[2]+u[3]>=0&&C++}return C===p?2:C===0?0:1}}function Xm(I,u,p){const C=I-u;return C<0?-C:Math.max(0,C-p)}function Ld(I,u,p,C,S){const k=I-p;let K;return K=k<0?Math.min(-k,1+k-S):k>1?Math.min(Math.max(k-S,0),1-k):0,Math.max(K,Xm(u,C,S))}class Ef{constructor(){this._boundingVolumeCache=new Gv(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(u,p,C,S){const k=1<<C.z,K=1/k,N=C.x/k,$=C.y/k;let se=2;return se=Math.min(se,Ld(u,p,N,$,K)),se=Math.min(se,Ld(u,p,N+.5,-$-K,K)),se=Math.min(se,Ld(u,p,N+.5,2-$-K,K)),se}getWrap(u,p,C){const S=1<<p.z,k=1/S,K=p.x/S,N=Xm(u.x,K,k),$=Xm(u.x,K-1,k),se=Xm(u.x,K+1,k),ue=Math.min(N,$,se);return ue===se?1:ue===$?-1:0}allowVariableZoom(u,p){return Wi(u,p)>4}allowWorldCopies(){return!1}getTileBoundingVolume(u,p,C,S){return this._boundingVolumeCache.getTileBoundingVolume(u,p,C,S)}_computeTileBoundingVolume(u,p,C,S){var k,K;let N=0,$=0;if(S?.terrain){const se=new a.a2(u.z,p,u.z,u.x,u.y),ue=S.terrain.getMinMaxElevation(se);N=(k=ue.minElevation)!==null&&k!==void 0?k:Math.min(0,C),$=(K=ue.maxElevation)!==null&&K!==void 0?K:Math.max(0,C)}if(N/=a.bF,$/=a.bF,N+=1,$+=1,u.z<=0)return Sf.fromAabb([-$,-$,-$],[$,$,$]);if(u.z===1)return Sf.fromAabb([u.x===0?-$:0,u.y===0?0:-$,-$],[u.x===0?0:$,u.y===0?$:0,$]);{const se=[Hc(0,0,u.x,u.y,u.z),Hc(a.a5,0,u.x,u.y,u.z),Hc(a.a5,a.a5,u.x,u.y,u.z),Hc(0,a.a5,u.x,u.y,u.z)],ue=[];for(const Gt of se)ue.push(a.b0([],Gt,$));if($!==N)for(const Gt of se)ue.push(a.b0([],Gt,N));u.y===0&&ue.push([0,1,0]),u.y===(1<<u.z)-1&&ue.push([0,-1,0]);const ye=[1,1,1],me=[-1,-1,-1];for(const Gt of ue)for(let Qt=0;Qt<3;Qt++)ye[Qt]=Math.min(ye[Qt],Gt[Qt]),me[Qt]=Math.max(me[Qt],Gt[Qt]);const Se=Hc(a.a5/2,a.a5/2,u.x,u.y,u.z),Ke=a.b5([],[0,1,0],Se);a.b4(Ke,Ke);const Je=a.b5([],Se,Ke);a.b4(Je,Je);const nt=a.b5([],se[2],se[1]);a.b4(nt,nt);const tt=a.b5([],se[0],se[3]);a.b4(tt,tt),ue.push(a.b0([],Se,$)),u.y>=(1<<u.z)/2&&ue.push(a.b0([],Hc(a.a5/2,0,u.x,u.y,u.z),$)),u.y<(1<<u.z)/2&&ue.push(a.b0([],Hc(a.a5/2,a.a5,u.x,u.y,u.z),$));const rt=bA(Se,ue),dt=bA(Je,ue),st=[-Se[0],-Se[1],-Se[2],rt.max],ft=[Se[0],Se[1],Se[2],-rt.min],Ct=[-Je[0],-Je[1],-Je[2],dt.max],lt=[Je[0],Je[1],Je[2],-dt.min],Ot=[...nt,0],Ft=[...tt,0],zt=[];return u.y===0?zt.push(a.bE(Ft,Ot,st),a.bE(Ft,Ot,ft)):zt.push(a.bE(Ct,Ot,st),a.bE(Ct,Ot,ft),a.bE(Ct,Ft,st),a.bE(Ct,Ft,ft)),u.y===(1<<u.z)-1?zt.push(a.bE(Ft,Ot,st),a.bE(Ft,Ot,ft)):zt.push(a.bE(lt,Ot,st),a.bE(lt,Ot,ft),a.bE(lt,Ft,st),a.bE(lt,Ft,ft)),new Sf(zt,[st,ft,Ct,lt,Ot,Ft],ye,me)}}}function bA(I,u){let p=1/0,C=-1/0;for(const S of u){const k=a.b6(I,S);p=Math.min(p,k),C=Math.max(C,k)}return{min:p,max:C}}class Bf{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(u){this._helper.setMinZoom(u)}setMaxZoom(u){this._helper.setMaxZoom(u)}setMinPitch(u){this._helper.setMinPitch(u)}setMaxPitch(u){this._helper.setMaxPitch(u)}setRenderWorldCopies(u){this._helper.setRenderWorldCopies(u)}setBearing(u){this._helper.setBearing(u)}setPitch(u){this._helper.setPitch(u)}setRoll(u){this._helper.setRoll(u)}setFov(u){this._helper.setFov(u)}setZoom(u){this._helper.setZoom(u)}setCenter(u){this._helper.setCenter(u)}setElevation(u){this._helper.setElevation(u)}setMinElevationForCurrentTile(u){this._helper.setMinElevationForCurrentTile(u)}setPadding(u){this._helper.setPadding(u)}interpolatePadding(u,p,C){return this._helper.interpolatePadding(u,p,C)}isPaddingEqual(u){return this._helper.isPaddingEqual(u)}resize(u,p){this._helper.resize(u,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(u){this._helper.setMaxBounds(u)}setConstrainOverride(u){this._helper.setConstrainOverride(u)}overrideNearFarZ(u,p){this._helper.overrideNearFarZ(u,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(u){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),u)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(u){}constructor(u){this._cachedClippingPlane=a.bG(),this._projectionMatrix=a.bk(),this._globeViewProjMatrix32f=a.bj(),this._globeViewProjMatrixNoCorrection=a.bk(),this._globeViewProjMatrixNoCorrectionInverted=a.bk(),this._globeProjMatrixInverted=a.bk(),this._cameraPosition=a.bA(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(p,C)=>{const S=a.ao(p.lat,-a.ap,a.ap),k=a.ao(+C,this.minZoom+Eo(0,S),this.maxZoom);return{center:new a.V(p.lng,S),zoom:k}},this.applyConstrain=(p,C)=>this._helper.applyConstrain(p,C),this._helper=new Tr({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(p,C)=>this.defaultConstrain(p,C)},u),this._coveringTilesDetailsProvider=new Ef}clone(){const u=new Bf;return u.apply(this),u}apply(u,p){this._globeLatitudeErrorCorrectionRadians=p||0,this._helper.apply(u)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const u=a.bA();return u[0]=this._cameraPosition[0],u[1]=this._cameraPosition[1],u[2]=this._cameraPosition[2],u}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(u){const{overscaledTileID:p,applyGlobeMatrix:C}=u,S=this._helper.getMercatorTileCoordinates(p);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:S,clippingPlane:this._cachedClippingPlane,projectionTransition:C?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(u){const p=this.pitchInRadians,C=this.cameraToCenterDistance/u,S=Math.sin(p)*C,k=Math.cos(p)*C+1,K=1/Math.sqrt(S*S+k*k)*1;let N=-S,$=k;const se=Math.sqrt(N*N+$*$);N/=se,$/=se;const ue=[0,N,$];a.bH(ue,ue,[0,0,0],-this.bearingInRadians),a.bI(ue,ue,[0,0,0],-1*this.center.lat*Math.PI/180),a.bJ(ue,ue,[0,0,0],this.center.lng*Math.PI/180);const ye=1/a.b8(ue);return a.b0(ue,ue,ye),[...ue,-K*ye]}isLocationOccluded(u){return!this.isSurfacePointVisible(yo(u))}transformLightDirection(u){const p=this._helper._center.lng*Math.PI/180,C=this._helper._center.lat*Math.PI/180,S=Math.cos(C),k=[Math.sin(p)*S,Math.sin(C),Math.cos(p)*S],K=[k[2],0,-k[0]],N=[0,0,0];a.b5(N,K,k),a.b4(K,K),a.b4(N,N);const $=[0,0,0];return a.b4($,[K[0]*u[0]+N[0]*u[1]+k[0]*u[2],K[1]*u[0]+N[1]*u[1]+k[1]*u[2],K[2]*u[0]+N[2]*u[1]+k[2]*u[2]]),$}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(u,p,C){const S=(function(N,$,se){const ue=1/(1<<se.z);return new a.ab(N/a.a5*ue+se.x*ue,$/a.a5*ue+se.y*ue)})(u,p,C.canonical),k=(K=S.y,[a.bz(S.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-K*Math.PI*2))-.5*Math.PI]);var K;return this.getCircleRadiusCorrection()/Math.cos(k[1])}projectTileCoordinates(u,p,C,S){const k=C.canonical,K=Hc(u,p,k.x,k.y,k.z),N=1+(S?S(u,p):0)/a.bF,$=[K[0]*N,K[1]*N,K[2]*N,1];a.aI($,$,this._globeViewProjMatrixNoCorrection);const se=this._cachedClippingPlane,ue=se[0]*K[0]+se[1]*K[1]+se[2]*K[2]+se[3]<0;return{point:new a.P($[0]/$[3],$[1]/$[3]),signedDistanceFromCamera:$[3],isOccluded:ue}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const u=vA(this.worldSize,this.center.lat),p=a.bl(),C=a.bl();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*u),a.bf(p,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const S=this.centerOffset;p[8]=2*-S.x/this._helper._width,p[9]=2*S.y/this._helper._height,this._projectionMatrix=a.bg(p),this._globeProjMatrixInverted=a.bl(),a.aC(this._globeProjMatrixInverted,p),a.O(p,p,[0,0,-this.cameraToCenterDistance]),a.bh(p,p,this.rollInRadians),a.bi(p,p,-this.pitchInRadians),a.bh(p,p,this.bearingInRadians),a.O(p,p,[0,0,-u]);const k=a.bA();k[0]=u,k[1]=u,k[2]=u,a.bi(C,p,this.center.lat*Math.PI/180),a.bK(C,C,-this.center.lng*Math.PI/180),a.Q(C,C,k),this._globeViewProjMatrixNoCorrection=C,a.bi(p,p,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bK(p,p,-this.center.lng*Math.PI/180),a.Q(p,p,k),this._globeViewProjMatrix32f=new Float32Array(p),this._globeViewProjMatrixNoCorrectionInverted=a.bl(),a.aC(this._globeViewProjMatrixNoCorrectionInverted,C);const K=a.bA();this._cameraPosition=a.bA(),this._cameraPosition[2]=this.cameraToCenterDistance/u,a.bH(this._cameraPosition,this._cameraPosition,K,-this.rollInRadians),a.bI(this._cameraPosition,this._cameraPosition,K,this.pitchInRadians),a.bH(this._cameraPosition,this._cameraPosition,K,-this.bearingInRadians),a.b1(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bI(this._cameraPosition,this._cameraPosition,K,-this.center.lat*Math.PI/180),a.bJ(this._cameraPosition,this._cameraPosition,K,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(u);const N=a.bg(this._globeViewProjMatrixNoCorrectionInverted);a.Q(N,N,[1,1,-1]),this._cachedFrustum=He.fromInvProjectionMatrix(N,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(u){a.w("calculateFogMatrix is not supported on globe projection.");const p=a.bl();return a.as(p),p}getVisibleUnwrappedCoordinates(u){return[new a.bd(0,u)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(u){u&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(u,p){if(!this._globeViewProjMatrixNoCorrection)return 1;const C=yo(u);a.b0(C,C,1+p/a.bF);const S=a.bG();return a.aI(S,[C[0],C[1],C[2],1],this._globeViewProjMatrixNoCorrection),S[2]/S[3]}populateCache(u){}getBounds(){const u=.5*this.width,p=.5*this.height,C=[new a.P(0,0),new a.P(u,0),new a.P(this.width,0),new a.P(this.width,p),new a.P(this.width,this.height),new a.P(u,this.height),new a.P(0,this.height),new a.P(0,p)],S=[];for(const ye of C)S.push(this.unprojectScreenPoint(ye));let k=0,K=0,N=0,$=0;const se=this.center;for(const ye of S){const me=a.bL(se.lng,ye.lng),Se=a.bL(se.lat,ye.lat);me<K&&(K=me),me>k&&(k=me),Se<$&&($=Se),Se>N&&(N=Se)}const ue=[se.lng+K,se.lat+$,se.lng+k,se.lat+N];return this.isSurfacePointOnScreen([0,1,0])&&(ue[3]=90,ue[0]=-180,ue[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(ue[1]=-90,ue[0]=-180,ue[2]=180),new en(ue)}calculateCenterFromCameraLngLatAlt(u,p,C,S){return this._helper.calculateCenterFromCameraLngLatAlt(u,p,C,S)}setLocationAtPoint(u,p){const C=yo(this.unprojectScreenPoint(p)),S=yo(u),k=a.bA();a.bM(k);const K=a.bA();a.bJ(K,C,k,-this.center.lng*Math.PI/180),a.bI(K,K,k,this.center.lat*Math.PI/180);const N=S[0]*S[0]+S[2]*S[2],$=K[0]*K[0];if(N<$)return;const se=Math.sqrt(N-$),ue=-se,ye=a.bN(S[0],S[2],K[0],se),me=a.bN(S[0],S[2],K[0],ue),Se=a.bA();a.bJ(Se,S,k,-ye);const Ke=a.bN(Se[1],Se[2],K[1],K[2]),Je=a.bA();a.bJ(Je,S,k,-me);const nt=a.bN(Je[1],Je[2],K[1],K[2]),tt=.5*Math.PI,rt=Ke>=-tt&&Ke<=tt,dt=nt>=-tt&&nt<=tt;let st,ft;if(rt&&dt){const Ft=this.center.lng*Math.PI/180,zt=this.center.lat*Math.PI/180;a.bO(ye,Ft)+a.bO(Ke,zt)<a.bO(me,Ft)+a.bO(nt,zt)?(st=ye,ft=Ke):(st=me,ft=nt)}else if(rt)st=ye,ft=Ke;else{if(!dt)return;st=me,ft=nt}const Ct=st/Math.PI*180,lt=ft/Math.PI*180,Ot=this.center.lat;this.setCenter(new a.V(Ct,a.ao(lt,-90,90))),this.setZoom(this.zoom+Eo(Ot,this.center.lat))}locationToScreenPoint(u,p){const C=yo(u);if(p){const S=p.getElevationForLngLatZoom(u,this._helper._tileZoom);a.b0(C,C,1+S/a.bF)}return this._projectSurfacePointToScreen(C)}_projectSurfacePointToScreen(u){const p=a.bG();return a.aI(p,[...u,1],this._globeViewProjMatrixNoCorrection),p[0]/=p[3],p[1]/=p[3],new a.P((.5*p[0]+.5)*this.width,(.5*-p[1]+.5)*this.height)}screenPointToMercatorCoordinate(u,p){if(p){const C=p.pointCoordinate(u);if(C)return C}return a.ab.fromLngLat(this.unprojectScreenPoint(u))}screenPointToLocation(u,p){var C;return(C=this.screenPointToMercatorCoordinate(u,p))===null||C===void 0?void 0:C.toLngLat()}isPointOnMapSurface(u,p){const C=this._cameraPosition,S=this.getRayDirectionFromPixel(u);return!!this.rayPlanetIntersection(C,S)}getRayDirectionFromPixel(u){const p=a.bG();p[0]=u.x/this.width*2-1,p[1]=-1*(u.y/this.height*2-1),p[2]=1,p[3]=1,a.aI(p,p,this._globeViewProjMatrixNoCorrectionInverted),p[0]/=p[3],p[1]/=p[3],p[2]/=p[3];const C=a.bA();C[0]=p[0]-this._cameraPosition[0],C[1]=p[1]-this._cameraPosition[1],C[2]=p[2]-this._cameraPosition[2];const S=a.bA();return a.b4(S,C),S}isSurfacePointVisible(u){const p=this._cachedClippingPlane;return p[0]*u[0]+p[1]*u[1]+p[2]*u[2]+p[3]>=0}isSurfacePointOnScreen(u){if(!this.isSurfacePointVisible(u))return!1;const p=a.bG();return a.aI(p,[...u,1],this._globeViewProjMatrixNoCorrection),p[0]/=p[3],p[1]/=p[3],p[2]/=p[3],p[0]>-1&&p[0]<1&&p[1]>-1&&p[1]<1&&p[2]>-1&&p[2]<1}rayPlanetIntersection(u,p){const C=a.b6(u,p),S=a.bA(),k=a.bA();a.b0(k,p,C),a.b3(S,u,k);const K=1-a.b6(S,S);if(K<0)return null;const N=a.b6(u,u)-1,$=-C+(C<0?1:-1)*Math.sqrt(K),se=N/$,ue=$;return{tMin:Math.min(se,ue),tMax:Math.max(se,ue)}}unprojectScreenPoint(u){const p=this._cameraPosition,C=this.getRayDirectionFromPixel(u),S=this.rayPlanetIntersection(p,C);if(S){const ue=a.bA();a.b1(ue,p,[C[0]*S.tMin,C[1]*S.tMin,C[2]*S.tMin]);const ye=a.bA();return a.b4(ye,ue),Pd(ye)}const k=this._cachedClippingPlane,K=k[0]*C[0]+k[1]*C[1]+k[2]*C[2],N=-a.bc(k,p)/K,$=a.bA();if(N>0)a.b1($,p,[C[0]*N,C[1]*N,C[2]*N]);else{const ue=a.bA();a.b1(ue,p,[2*C[0],2*C[1],2*C[2]]);const ye=a.bc(this._cachedClippingPlane,ue);a.b3($,ue,[this._cachedClippingPlane[0]*ye,this._cachedClippingPlane[1]*ye,this._cachedClippingPlane[2]*ye])}const se=(function(ue){const ye=a.bA();return ye[0]=ue[0]*-ue[3],ye[1]=ue[1]*-ue[3],ye[2]=ue[2]*-ue[3],{center:ye,radius:Math.sqrt(1-ue[3]*ue[3])}})(k);return Pd((function(ue,ye,me){const Se=a.bA();a.b3(Se,me,ue);const Ke=a.bA();return a.bB(Ke,ue,Se,ye/a.ba(Se)),Ke})(se.center,se.radius,$))}getMatrixForModel(u,p){const C=a.V.convert(u),S=1/a.bF,k=a.bk();return a.bK(k,k,C.lng/180*Math.PI),a.bi(k,k,-C.lat/180*Math.PI),a.O(k,k,[0,0,1+p/a.bF]),a.bi(k,k,.5*Math.PI),a.Q(k,k,[S,S,S]),k}getProjectionDataForCustomLayer(u=!0){const p=this.getProjectionData({overscaledTileID:new a.a2(0,0,0,0,0),applyGlobeMatrix:u});return p.tileMercatorCoords=[0,0,1,1],p}getFastPathSimpleProjectionMatrix(u){}}class Ud{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(u){this._helper.setMinZoom(u)}setMaxZoom(u){this._helper.setMaxZoom(u)}setMinPitch(u){this._helper.setMinPitch(u)}setMaxPitch(u){this._helper.setMaxPitch(u)}setRenderWorldCopies(u){this._helper.setRenderWorldCopies(u)}setBearing(u){this._helper.setBearing(u)}setPitch(u){this._helper.setPitch(u)}setRoll(u){this._helper.setRoll(u)}setFov(u){this._helper.setFov(u)}setZoom(u){this._helper.setZoom(u)}setCenter(u){this._helper.setCenter(u)}setElevation(u){this._helper.setElevation(u)}setMinElevationForCurrentTile(u){this._helper.setMinElevationForCurrentTile(u)}setPadding(u){this._helper.setPadding(u)}interpolatePadding(u,p,C){return this._helper.interpolatePadding(u,p,C)}isPaddingEqual(u){return this._helper.isPaddingEqual(u)}resize(u,p,C=!0){this._helper.resize(u,p,C)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(u){this._helper.setMaxBounds(u)}setConstrainOverride(u){this._helper.setConstrainOverride(u)}overrideNearFarZ(u,p){this._helper.overrideNearFarZ(u,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(u){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),u)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(u,p){this._globeness=u,this._globeLatitudeErrorCorrectionRadians=p,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(u){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(p,C)=>this.currentTransform.defaultConstrain(p,C),this.applyConstrain=(p,C)=>this._helper.applyConstrain(p,C),this._helper=new Tr({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(p,C)=>this.defaultConstrain(p,C)},u),this._globeness=1,this._mercatorTransform=new Et,this._verticalPerspectiveTransform=new Bf}clone(){const u=new Ud;return u._globeness=this._globeness,u._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,u.apply(this),u}apply(u){this._helper.apply(u),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(u){const p=this._mercatorTransform.getProjectionData(u),C=this._verticalPerspectiveTransform.getProjectionData(u);return{mainMatrix:this.isGlobeRendering?C.mainMatrix:p.mainMatrix,clippingPlane:C.clippingPlane,tileMercatorCoords:C.tileMercatorCoords,projectionTransition:u.applyGlobeMatrix?this._globeness:0,fallbackMatrix:p.fallbackMatrix}}isLocationOccluded(u){return this.currentTransform.isLocationOccluded(u)}transformLightDirection(u){return this.currentTransform.transformLightDirection(u)}getPixelScale(){return a.bv(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bv(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(u,p,C){const S=this._mercatorTransform.getPitchedTextCorrection(u,p,C),k=this._verticalPerspectiveTransform.getPitchedTextCorrection(u,p,C);return a.bv(S,k,this._globeness)}projectTileCoordinates(u,p,C,S){return this.currentTransform.projectTileCoordinates(u,p,C,S)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(u){return this.currentTransform.calculateFogMatrix(u)}getVisibleUnwrappedCoordinates(u){return this.currentTransform.getVisibleUnwrappedCoordinates(u)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(u){this._mercatorTransform.recalculateZoomAndCenter(u),this._verticalPerspectiveTransform.recalculateZoomAndCenter(u)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(u,p){return this.currentTransform.lngLatToCameraDepth(u,p)}populateCache(u){this._mercatorTransform.populateCache(u),this._verticalPerspectiveTransform.populateCache(u)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(u,p,C,S){return this._helper.calculateCenterFromCameraLngLatAlt(u,p,C,S)}setLocationAtPoint(u,p){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(u,p),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(u,p),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(u,p){return this.currentTransform.locationToScreenPoint(u,p)}screenPointToMercatorCoordinate(u,p){return this.currentTransform.screenPointToMercatorCoordinate(u,p)}screenPointToLocation(u,p){return this.currentTransform.screenPointToLocation(u,p)}isPointOnMapSurface(u,p){return this.currentTransform.isPointOnMapSurface(u,p)}getRayDirectionFromPixel(u){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(u)}getMatrixForModel(u,p){return this.currentTransform.getMatrixForModel(u,p)}getProjectionDataForCustomLayer(u=!0){const p=this._mercatorTransform.getProjectionDataForCustomLayer(u);if(!this.isGlobeRendering)return p;const C=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(u);return C.fallbackMatrix=p.mainMatrix,C}getFastPathSimpleProjectionMatrix(u){return this.currentTransform.getFastPathSimpleProjectionMatrix(u)}}class zs{get useGlobeControls(){return!0}handlePanInertia(u,p){const C=$m(u,p);return Math.abs(C.lng-p.center.lng)>180&&(C.lng=p.center.lng+179.5*Math.sign(C.lng-p.center.lng)),{easingCenter:C,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(u,p){const C=u.around,S=p.screenPointToLocation(C);u.bearingDelta&&p.setBearing(p.bearing+u.bearingDelta),u.pitchDelta&&p.setPitch(p.pitch+u.pitchDelta),u.rollDelta&&p.setRoll(p.roll+u.rollDelta);const k=p.zoom;u.zoomDelta&&p.setZoom(p.zoom+u.zoomDelta);const K=p.zoom-k;if(K===0)return;const N=a.bL(p.center.lng,S.lng),$=N/(Math.abs(N/180)+1),se=a.bL(p.center.lat,S.lat),ue=p.getRayDirectionFromPixel(C),ye=p.cameraPosition,me=-1*a.b6(ye,ue),Se=a.bA();a.b1(Se,ye,[ue[0]*me,ue[1]*me,ue[2]*me]);const Ke=a.b8(Se)-1,Je=Math.exp(.5*-Math.max(Ke-.3,0)),nt=vA(p.worldSize,p.center.lat)/Math.min(p.width,p.height),tt=a.by(nt,.9,.5,1,.25),rt=(1-a.ar(-K))*Math.min(Je,tt),dt=p.center.lat,st=p.zoom,ft=new a.V(p.center.lng+$*rt,a.ao(p.center.lat+se*rt,-a.ap,a.ap));p.setLocationAtPoint(S,C);const Ct=p.center,lt=a.by(Math.abs(N),45,85,0,1),Ot=a.by(nt,.75,.35,0,1),Ft=Math.pow(Math.max(lt,Ot),.25),zt=a.bL(Ct.lng,ft.lng),Gt=a.bL(Ct.lat,ft.lat);p.setCenter(new a.V(Ct.lng+zt*Ft,Ct.lat+Gt*Ft).wrap()),p.setZoom(st+Eo(dt,p.center.lat))}handleMapControlsPan(u,p,C){if(!u.panDelta)return;const S=p.center.lat,k=p.zoom;p.setCenter($m(u.panDelta,p).wrap()),p.setZoom(k+Eo(S,p.center.lat))}cameraForBoxAndBearing(u,p,C,S,k){const K=Oi(u,p,C,S,k),N=p.left/k.width*2-1,$=(k.width-p.right)/k.width*2-1,se=p.top/k.height*-2+1,ue=(k.height-p.bottom)/k.height*-2+1,ye=a.bL(C.getWest(),C.getEast())<0,me=ye?C.getEast():C.getWest(),Se=ye?C.getWest():C.getEast(),Ke=Math.max(C.getNorth(),C.getSouth()),Je=Math.min(C.getNorth(),C.getSouth()),nt=me+.5*a.bL(me,Se),tt=Ke+.5*a.bL(Ke,Je),rt=k.clone();rt.setCenter(K.center),rt.setBearing(K.bearing),rt.setPitch(0),rt.setRoll(0),rt.setZoom(K.zoom);const dt=rt.modelViewProjectionMatrix,st=[yo(C.getNorthWest()),yo(C.getNorthEast()),yo(C.getSouthWest()),yo(C.getSouthEast()),yo(new a.V(Se,tt)),yo(new a.V(me,tt)),yo(new a.V(nt,Ke)),yo(new a.V(nt,Je))],ft=yo(K.center);let Ct=Number.POSITIVE_INFINITY;for(const lt of st)N<0&&(Ct=zs.getLesserNonNegativeNonNull(Ct,zs.solveVectorScale(lt,ft,dt,"x",N))),$>0&&(Ct=zs.getLesserNonNegativeNonNull(Ct,zs.solveVectorScale(lt,ft,dt,"x",$))),se>0&&(Ct=zs.getLesserNonNegativeNonNull(Ct,zs.solveVectorScale(lt,ft,dt,"y",se))),ue<0&&(Ct=zs.getLesserNonNegativeNonNull(Ct,zs.solveVectorScale(lt,ft,dt,"y",ue)));if(Number.isFinite(Ct)&&Ct!==0)return K.zoom=rt.zoom+a.au(Ct),K;Qn()}handleJumpToCenterZoom(u,p){const C=u.center.lat,S=u.applyConstrain(p.center?a.V.convert(p.center):u.center,u.zoom).center;u.setCenter(S.wrap());const k=p.zoom!==void 0?+p.zoom:u.zoom+Eo(C,S.lat);u.zoom!==k&&u.setZoom(k)}handleEaseTo(u,p){const C=u.zoom,S=u.center,k=u.padding,K={roll:u.roll,pitch:u.pitch,bearing:u.bearing},N={roll:p.roll===void 0?u.roll:p.roll,pitch:p.pitch===void 0?u.pitch:p.pitch,bearing:p.bearing===void 0?u.bearing:p.bearing},$=p.zoom!==void 0,se=!u.isPaddingEqual(p.padding);let ue=!1;const ye=p.center?a.V.convert(p.center):S,me=u.applyConstrain(ye,C).center;Za(u,me);const Se=u.clone();Se.setCenter(me),Se.setZoom($?+p.zoom:C+Eo(S.lat,ye.lat)),Se.setBearing(p.bearing);const Ke=new a.P(a.ao(u.centerPoint.x+p.offsetAsPoint.x,0,u.width),a.ao(u.centerPoint.y+p.offsetAsPoint.y,0,u.height));Se.setLocationAtPoint(me,Ke);const Je=(p.offset&&p.offsetAsPoint.mag())>0?Se.center:me,nt=$?+p.zoom:C+Eo(S.lat,Je.lat),tt=C+Eo(S.lat,0),rt=nt+Eo(Je.lat,0),dt=a.bL(S.lng,Je.lng),st=a.bL(S.lat,Je.lat),ft=a.ar(rt-tt);return ue=nt!==C,{easeFunc:Ct=>{if(a.bp(K,N)||Dn({startEulerAngles:K,endEulerAngles:N,tr:u,k:Ct,useSlerp:K.roll!=N.roll}),se&&u.interpolatePadding(k,p.padding,Ct),p.around)a.w("Easing around a point is not supported under globe projection."),u.setLocationAtPoint(p.around,p.aroundPoint);else{const lt=rt>tt?Math.min(2,ft):Math.max(.5,ft),Ot=Math.pow(lt,1-Ct),Ft=Zm(S,dt,st,Ct*Ot);u.setCenter(Ft.wrap())}if(ue){const lt=a.G.number(tt,rt,Ct)+Eo(0,u.center.lat);u.setZoom(lt)}},isZooming:ue,elevationCenter:Je}}handleFlyTo(u,p){const C=p.zoom!==void 0,S=u.center,k=u.zoom,K=u.padding,N=!u.isPaddingEqual(p.padding),$=u.applyConstrain(a.V.convert(p.center||p.locationAtOffset),k).center,se=C?+p.zoom:u.zoom+Eo(u.center.lat,$.lat),ue=u.clone();ue.setCenter($),ue.setZoom(se),ue.setBearing(p.bearing);const ye=new a.P(a.ao(u.centerPoint.x+p.offsetAsPoint.x,0,u.width),a.ao(u.centerPoint.y+p.offsetAsPoint.y,0,u.height));ue.setLocationAtPoint($,ye);const me=ue.center;Za(u,me);const Se=(function(st,ft,Ct){const lt=yo(ft),Ot=yo(Ct),Ft=a.b6(lt,Ot),zt=Math.acos(Ft),Gt=Xl(st);return zt/(2*Math.PI)*Gt})(u,S,me),Ke=k+Eo(S.lat,0),Je=se+Eo(me.lat,0),nt=a.ar(Je-Ke);let tt;if(typeof p.minZoom=="number"){const st=+p.minZoom+Eo(me.lat,0),ft=Math.min(st,Ke,Je)+Eo(0,me.lat),Ct=u.applyConstrain(me,ft).zoom+Eo(me.lat,0);tt=a.ar(Ct-Ke)}const rt=a.bL(S.lng,me.lng),dt=a.bL(S.lat,me.lat);return{easeFunc:(st,ft,Ct,lt)=>{const Ot=Zm(S,rt,dt,Ct);N&&u.interpolatePadding(K,p.padding,st);const Ft=st===1?me:Ot;u.setCenter(Ft.wrap());const zt=Ke+a.au(ft);u.setZoom(st===1?se:zt+Eo(0,Ft.lat))},scaleOfZoom:nt,targetCenter:me,scaleOfMinZoom:tt,pixelPathLength:Se}}static solveVectorScale(u,p,C,S,k){const K=S==="x"?[C[0],C[4],C[8],C[12]]:[C[1],C[5],C[9],C[13]],N=[C[3],C[7],C[11],C[15]],$=u[0]*K[0]+u[1]*K[1]+u[2]*K[2],se=u[0]*N[0]+u[1]*N[1]+u[2]*N[2],ue=p[0]*K[0]+p[1]*K[1]+p[2]*K[2],ye=p[0]*N[0]+p[1]*N[1]+p[2]*N[2];return ue+k*se===$+k*ye||N[3]*($-ue)+K[3]*(ye-se)+$*ye==ue*se?null:(ue+K[3]-k*ye-k*N[3])/(ue-$-k*ye+k*se)}static getLesserNonNegativeNonNull(u,p){return p!==null&&p>=0&&p<u?p:u}}class Ph{constructor(u){this._globe=u,this._mercatorCameraHelper=new Fi,this._verticalPerspectiveCameraHelper=new zs}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(u,p){return this.currentHelper.handlePanInertia(u,p)}handleMapControlsRollPitchBearingZoom(u,p){return this.currentHelper.handleMapControlsRollPitchBearingZoom(u,p)}handleMapControlsPan(u,p,C){this.currentHelper.handleMapControlsPan(u,p,C)}cameraForBoxAndBearing(u,p,C,S,k){return this.currentHelper.cameraForBoxAndBearing(u,p,C,S,k)}handleJumpToCenterZoom(u,p){this.currentHelper.handleJumpToCenterZoom(u,p)}handleEaseTo(u,p){return this.currentHelper.handleEaseTo(u,p)}handleFlyTo(u,p){return this.currentHelper.handleFlyTo(u,p)}}const Lh=(I,u)=>a.B(I,u&&u.filter((p=>p.identifier!=="source.canvas"))),Kd=a.bP();class Uh extends a.E{constructor(u,p={}){var C,S;super(),this._rtlPluginLoaded=()=>{for(const K in this.tileManagers){const N=this.tileManagers[K].getSource().type;N!=="vector"&&N!=="geojson"||this.tileManagers[K].reload()}},this.map=u,this.dispatcher=new Oe(ke(),u._getMapId()),this.dispatcher.registerMessageHandler("GG",((K,N)=>this.getGlyphs(K,N))),this.dispatcher.registerMessageHandler("GI",((K,N)=>this.getImages(K,N))),this.dispatcher.registerMessageHandler("GDA",((K,N)=>this.getDashes(K,N))),this.imageManager=new Ee,this.imageManager.setEventedParent(this);const k=((C=u._container)===null||C===void 0?void 0:C.lang)||typeof document<"u"&&((S=document.documentElement)===null||S===void 0?void 0:S.lang)||void 0;this.glyphManager=new Ye(u._requestManager,p.localIdeographFontFamily,k),this.lineAtlas=new Re(256,512),this.crossTileSymbolIndex=new Jo,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",a.bQ()),Qe().on(he,this._rtlPluginLoaded),this.on("data",(K=>{if(K.dataType!=="source"||K.sourceDataType!=="metadata")return;const N=this.tileManagers[K.sourceId];if(!N)return;const $=N.getSource();if($&&$.vectorLayerIds)for(const se in this._layers){const ue=this._layers[se];ue.source===$.id&&this._validateLayer(ue)}}))}_setInitialValues(){var u;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new a.bR,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((u=this.crossTileSymbolIndex)===null||u===void 0?void 0:u.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(u,p){var C,S,k;this._checkLoaded();const K=p===null?(k=(S=(C=this.stylesheet.state)===null||C===void 0?void 0:C[u])===null||S===void 0?void 0:S.default)!==null&&k!==void 0?k:null:p;if(a.bS(K,this._globalState[u]))return this;this._globalState[u]=K,this._applyGlobalStateChanges([u])}getGlobalState(){return this._globalState}setGlobalState(u){this._checkLoaded();const p=[];for(const C in u)!a.bS(this._globalState[C],u[C].default)&&(p.push(C),this._globalState[C]=u[C].default);this._applyGlobalStateChanges(p)}_applyGlobalStateChanges(u){if(u.length===0)return;const p=new Set,C={};for(const S of u){C[S]=this._globalState[S];for(const k in this._layers){const K=this._layers[k],N=K.getLayoutAffectingGlobalStateRefs(),$=K.getPaintAffectingGlobalStateRefs();if(N.has(S)&&p.add(K.source),$.has(S))for(const{name:se,value:ue}of $.get(S))this._updatePaintProperty(K,se,ue)}}this.dispatcher.broadcast("UGS",C);for(const S in this.tileManagers)p.has(S)&&(this._reloadSource(S),this._changed=!0)}loadURL(u,p={},C){this.fire(new a.l("dataloading",{dataType:"style"})),p.validate=typeof p.validate!="boolean"||p.validate;const S=this.map._requestManager.transformRequest(u,"Style");this._loadStyleRequest=new AbortController;const k=this._loadStyleRequest;a.j(S,this._loadStyleRequest).then((K=>{this._loadStyleRequest=null,this._load(K.data,p,C)})).catch((K=>{this._loadStyleRequest=null,K&&!k.signal.aborted&&this.fire(new a.k(K))}))}loadJSON(u,p={},C){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,B.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,p.validate=p.validate!==!1,this._load(u,p,C)})).catch((()=>{}))}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(Kd,{validate:!1})}_load(u,p,C){var S,k;let K=p.transformStyle?p.transformStyle(C,u):u;if(!p.validate||!Lh(this,a.C(K))){K=Object.assign({},K),this._loaded=!0,this.stylesheet=K;for(const N in K.sources)this.addSource(N,K.sources[N],{validate:!1});K.sprite?this._loadSprite(K.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(K.glyphs),this._createLayers(),this.light=new Ue(this.stylesheet.light),this._setProjectionInternal(((S=this.stylesheet.projection)===null||S===void 0?void 0:S.type)||"mercator"),this.sky=new Ge(this.stylesheet.sky),this.map.setTerrain((k=this.stylesheet.terrain)!==null&&k!==void 0?k:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){var u,p,C;const S=a.bT(this.stylesheet.layers);this.setGlobalState((u=this.stylesheet.state)!==null&&u!==void 0?u:null),this.dispatcher.broadcast("SL",S),this._order=S.map((k=>k.id)),this._layers={},this._serializedLayers=null;for(const k of S){const K=a.bU(k,this._globalState);if(K.setEventedParent(this,{layer:{id:k.id}}),this._layers[k.id]=K,a.bV(K)&&this.tileManagers[K.source]){const N=(C=(p=k.paint)===null||p===void 0?void 0:p["raster-fade-duration"])!==null&&C!==void 0?C:K.paint.get("raster-fade-duration");this.tileManagers[K.source].setRasterFadeDuration(N)}}}_loadSprite(u,p=!1,C=void 0){this.imageManager.setLoaded(!1);const S=new AbortController;let k;this._spriteRequest=S,(function(K,N,$,se){return a._(this,void 0,void 0,(function*(){const ue=ce(K),ye=$>1?"@2x":"",me={},Se={};for(const{id:Ke,url:Je}of ue){const nt=N.transformRequest(ve(Je,ye,".json"),"SpriteJSON");me[Ke]=a.j(nt,se);const tt=N.transformRequest(ve(Je,ye,".png"),"SpriteImage");Se[Ke]=q.getImage(tt,se)}return yield Promise.all([...Object.values(me),...Object.values(Se)]),(function(Ke,Je){return a._(this,void 0,void 0,(function*(){const nt={};for(const tt in Ke){nt[tt]={};const rt=B.getImageCanvasContext((yield Je[tt]).data),dt=(yield Ke[tt]).data;for(const st in dt){const{width:ft,height:Ct,x:lt,y:Ot,sdf:Ft,pixelRatio:zt,stretchX:Gt,stretchY:Qt,content:dn,textFitWidth:Rn,textFitHeight:An}=dt[st];nt[tt][st]={data:null,pixelRatio:zt,sdf:Ft,stretchX:Gt,stretchY:Qt,content:dn,textFitWidth:Rn,textFitHeight:An,spriteData:{width:ft,height:Ct,x:lt,y:Ot,context:rt}}}}return nt}))})(me,Se)}))})(u,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((K=>{if(this._spriteRequest=null,K)for(const N in K){this._spritesImagesIds[N]=[];const $=this._spritesImagesIds[N]?this._spritesImagesIds[N].filter((se=>!(se in K))):[];for(const se of $)this.imageManager.removeImage(se),this._changedImages[se]=!0;for(const se in K[N]){const ue=N==="default"?se:`${N}:${se}`;this._spritesImagesIds[N].push(ue),ue in this.imageManager.images?this.imageManager.updateImage(ue,K[N][se],!1):this.imageManager.addImage(ue,K[N][se]),p&&(this._changedImages[ue]=!0)}}})).catch((K=>{this._spriteRequest=null,k=K,S.signal.aborted||this.fire(new a.k(k))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),p&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),C&&C(k)}))}_unloadSprite(){for(const u of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(u),this._changedImages[u]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(u){const p=this.tileManagers[u.source];if(!p)return;const C=u.sourceLayer;if(!C)return;const S=p.getSource();(S.type==="geojson"||S.vectorLayerIds&&S.vectorLayerIds.indexOf(C)===-1)&&this.fire(new a.k(new Error(`Source layer "${C}" does not exist on source "${S.id}" as specified by style layer "${u.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this.tileManagers)if(!this.tileManagers[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(u,p=!1){const C=this._serializedAllLayers();if(!u||u.length===0)return Object.values(p?a.bW(C):C);const S=[];for(const k of u)if(C[k]){const K=p?a.bW(C[k]):C[k];S.push(K)}return S}_serializedAllLayers(){let u=this._serializedLayers;if(u)return u;u=this._serializedLayers={};const p=Object.keys(this._layers);for(const C of p){const S=this._layers[C];S.type!=="custom"&&(u[C]=S.serialize())}return u}hasTransitions(){var u,p,C;if(!((u=this.light)===null||u===void 0)&&u.hasTransition()||!((p=this.sky)===null||p===void 0)&&p.hasTransition()||!((C=this.projection)===null||C===void 0)&&C.hasTransition())return!0;for(const S in this.tileManagers)if(this.tileManagers[S].hasTransition())return!0;for(const S in this._layers)if(this._layers[S].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(u){if(!this._loaded)return;const p=this._changed;if(p){const S=Object.keys(this._updatedLayers),k=Object.keys(this._removedLayers);(S.length||k.length)&&this._updateWorkerLayers(S,k);for(const K in this._updatedSources){const N=this._updatedSources[K];if(N==="reload")this._reloadSource(K);else{if(N!=="clear")throw new Error(`Invalid action ${N}`);this._clearSource(K)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const K in this._updatedPaintProps)this._layers[K].updateTransitions(u);this.light.updateTransitions(u),this.sky.updateTransitions(u),this._resetUpdates()}const C={};for(const S in this.tileManagers){const k=this.tileManagers[S];C[S]=k.used,k.used=!1}for(const S of this._order){const k=this._layers[S];k.recalculate(u,this._availableImages),!k.isHidden(u.zoom)&&k.source&&(this.tileManagers[k.source].used=!0)}for(const S in C){const k=this.tileManagers[S];!!C[S]!=!!k.used&&k.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:S}))}this.light.recalculate(u),this.sky.recalculate(u),this.projection.recalculate(u),this.z=u.zoom,p&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const p in this.tileManagers)this.tileManagers[p].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const u in this.tileManagers)this.tileManagers[u].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(u,p){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(u,!1),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(u,p={}){var C;this._checkLoaded();const S=this.serialize();if(u=p.transformStyle?p.transformStyle(S,u):u,((C=p.validate)===null||C===void 0||C)&&Lh(this,a.C(u)))return!1;(u=a.bW(u)).layers=a.bT(u.layers);const k=a.bX(S,u),K=this._getOperationsToPerform(k);if(K.unimplemented.length>0)throw new Error(`Unimplemented: ${K.unimplemented.join(", ")}.`);if(K.operations.length===0)return!1;for(const N of K.operations)N();return this.stylesheet=u,this._serializedLayers=null,!0}_getOperationsToPerform(u){const p=[],C=[];for(const S of u)switch(S.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":p.push((()=>this.addLayer.apply(this,S.args)));break;case"removeLayer":p.push((()=>this.removeLayer.apply(this,S.args)));break;case"setPaintProperty":p.push((()=>this.setPaintProperty.apply(this,S.args)));break;case"setLayoutProperty":p.push((()=>this.setLayoutProperty.apply(this,S.args)));break;case"setFilter":p.push((()=>this.setFilter.apply(this,S.args)));break;case"addSource":p.push((()=>this.addSource.apply(this,S.args)));break;case"removeSource":p.push((()=>this.removeSource.apply(this,S.args)));break;case"setLayerZoomRange":p.push((()=>this.setLayerZoomRange.apply(this,S.args)));break;case"setLight":p.push((()=>this.setLight.apply(this,S.args)));break;case"setGeoJSONSourceData":p.push((()=>this.setGeoJSONSourceData.apply(this,S.args)));break;case"setGlyphs":p.push((()=>this.setGlyphs.apply(this,S.args)));break;case"setSprite":p.push((()=>this.setSprite.apply(this,S.args)));break;case"setTerrain":p.push((()=>this.map.setTerrain.apply(this,S.args)));break;case"setSky":p.push((()=>this.setSky.apply(this,S.args)));break;case"setProjection":this.setProjection.apply(this,S.args);break;case"setGlobalState":p.push((()=>this.setGlobalState.apply(this,S.args)));break;case"setTransition":p.push((()=>{}));break;default:C.push(S.command)}return{operations:p,unimplemented:C}}addImage(u,p){if(this.getImage(u))return this.fire(new a.k(new Error(`An image named "${u}" already exists.`)));this.imageManager.addImage(u,p),this._afterImageUpdated(u)}updateImage(u,p){this.imageManager.updateImage(u,p)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){if(!this.getImage(u))return this.fire(new a.k(new Error(`An image named "${u}" does not exist.`)));this.imageManager.removeImage(u),this._afterImageUpdated(u)}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(u,p,C={}){if(this._checkLoaded(),this.tileManagers[u]!==void 0)throw new Error(`Source "${u}" already exists.`);if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(a.C.source,`sources.${u}`,p,null,C))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const S=this.tileManagers[u]=new oo(u,p,this.dispatcher);S.style=this,S.setEventedParent(this,(()=>({isSourceLoaded:S.loaded(),source:S.serialize(),sourceId:u}))),S.onAdd(this.map),this._changed=!0}removeSource(u){if(this._checkLoaded(),this.tileManagers[u]===void 0)throw new Error("There is no source with this ID");for(const C in this._layers)if(this._layers[C].source===u)return this.fire(new a.k(new Error(`Source "${u}" cannot be removed while layer "${C}" is using it.`)));const p=this.tileManagers[u];delete this.tileManagers[u],delete this._updatedSources[u],p.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),p.setEventedParent(null),p.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(u,p){if(this._checkLoaded(),this.tileManagers[u]===void 0)throw new Error(`There is no source with this ID=${u}`);const C=this.tileManagers[u].getSource();if(C.type!=="geojson")throw new Error(`geojsonSource.type is ${C.type}, which is !== 'geojson`);C.setData(p),this._changed=!0}getSource(u){return this.tileManagers[u]&&this.tileManagers[u].getSource()}addLayer(u,p,C={}){this._checkLoaded();const S=u.id;if(this.getLayer(S))return void this.fire(new a.k(new Error(`Layer "${S}" already exists on this map.`)));let k;if(u.type==="custom"){if(Lh(this,a.bY(u)))return;k=a.bU(u,this._globalState)}else{if("source"in u&&typeof u.source=="object"&&(this.addSource(S,u.source),u=a.bW(u),u=a.e(u,{source:S})),this._validate(a.C.layer,`layers.${S}`,u,{arrayIndex:-1},C))return;k=a.bU(u,this._globalState),this._validateLayer(k),k.setEventedParent(this,{layer:{id:S}})}const K=p?this._order.indexOf(p):this._order.length;if(p&&K===-1)this.fire(new a.k(new Error(`Cannot add layer "${S}" before non-existing layer "${p}".`)));else{if(this._order.splice(K,0,S),this._layerOrderChanged=!0,this._layers[S]=k,this._removedLayers[S]&&k.source&&k.type!=="custom"){const N=this._removedLayers[S];delete this._removedLayers[S],N.type!==k.type?this._updatedSources[k.source]="clear":(this._updatedSources[k.source]="reload",this.tileManagers[k.source].pause())}this._updateLayer(k),k.onAdd&&k.onAdd(this.map)}}moveLayer(u,p){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new a.k(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===p)return;const C=this._order.indexOf(u);this._order.splice(C,1);const S=p?this._order.indexOf(p):this._order.length;p&&S===-1?this.fire(new a.k(new Error(`Cannot move layer "${u}" before non-existing layer "${p}".`))):(this._order.splice(S,0,u),this._layerOrderChanged=!0)}removeLayer(u){this._checkLoaded();const p=this._layers[u];if(!p)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${u}".`)));p.setEventedParent(null);const C=this._order.indexOf(u);this._order.splice(C,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=p,delete this._layers[u],this._serializedLayers&&delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],p.onRemove&&p.onRemove(this.map)}getLayer(u){return this._layers[u]}getLayersOrder(){return[...this._order]}hasLayer(u){return u in this._layers}setLayerZoomRange(u,p,C){this._checkLoaded();const S=this.getLayer(u);S?S.minzoom===p&&S.maxzoom===C||(p!=null&&(S.minzoom=p),C!=null&&(S.maxzoom=C),this._updateLayer(S)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${u}".`)))}setFilter(u,p,C={}){this._checkLoaded();const S=this.getLayer(u);if(S){if(!a.bS(S.filter,p))return p==null?(S.setFilter(void 0),void this._updateLayer(S)):void(this._validate(a.C.filter,`layers.${S.id}.filter`,p,null,C)||(S.setFilter(a.bW(p)),this._updateLayer(S)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${u}".`)))}getFilter(u){return a.bW(this.getLayer(u).filter)}setLayoutProperty(u,p,C,S={}){this._checkLoaded();const k=this.getLayer(u);k?a.bS(k.getLayoutProperty(p),C)||(k.setLayoutProperty(p,C,S),this._updateLayer(k)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${u}".`)))}getLayoutProperty(u,p){const C=this.getLayer(u);if(C)return C.getLayoutProperty(p);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${u}".`)))}setPaintProperty(u,p,C,S={}){this._checkLoaded();const k=this.getLayer(u);k?a.bS(k.getPaintProperty(p),C)||this._updatePaintProperty(k,p,C,S):this.fire(new a.k(new Error(`Cannot style non-existing layer "${u}".`)))}_updatePaintProperty(u,p,C,S={}){u.setPaintProperty(p,C,S)&&this._updateLayer(u),a.bV(u)&&p==="raster-fade-duration"&&this.tileManagers[u.source].setRasterFadeDuration(C),this._changed=!0,this._updatedPaintProps[u.id]=!0,this._serializedLayers=null}getPaintProperty(u,p){return this.getLayer(u).getPaintProperty(p)}setFeatureState(u,p){this._checkLoaded();const C=u.source,S=u.sourceLayer,k=this.tileManagers[C];if(k===void 0)return void this.fire(new a.k(new Error(`The source '${C}' does not exist in the map's style.`)));const K=k.getSource().type;K==="geojson"&&S?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):K!=="vector"||S?(u.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),k.setFeatureState(S,u.id,p)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(u,p){this._checkLoaded();const C=u.source,S=this.tileManagers[C];if(S===void 0)return void this.fire(new a.k(new Error(`The source '${C}' does not exist in the map's style.`)));const k=S.getSource().type,K=k==="vector"?u.sourceLayer:void 0;k!=="vector"||K?p&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):S.removeFeatureState(K,u.id,p):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(u){this._checkLoaded();const p=u.source,C=u.sourceLayer,S=this.tileManagers[p];if(S!==void 0)return S.getSource().type!=="vector"||C?(u.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),S.getFeatureState(C,u.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const u=a.bZ(this.tileManagers,(k=>k.serialize())),p=this._serializeByIds(this._order,!0),C=this.map.getTerrain()||void 0,S=this.stylesheet;return a.b_({version:S.version,name:S.name,metadata:S.metadata,light:S.light,sky:S.sky,center:S.center,zoom:S.zoom,bearing:S.bearing,pitch:S.pitch,sprite:S.sprite,glyphs:S.glyphs,transition:S.transition,projection:S.projection,sources:u,layers:p,terrain:C},(k=>k!==void 0))}_updateLayer(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.tileManagers[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.tileManagers[u.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(u){const p=K=>this._layers[K].type==="fill-extrusion",C={},S=[];for(let K=this._order.length-1;K>=0;K--){const N=this._order[K];if(p(N)){C[N]=K;for(const $ of u){const se=$[N];if(se)for(const ue of se)S.push(ue)}}}S.sort(((K,N)=>N.intersectionZ-K.intersectionZ));const k=[];for(let K=this._order.length-1;K>=0;K--){const N=this._order[K];if(p(N))for(let $=S.length-1;$>=0;$--){const se=S[$].feature;if(C[se.layer.id]<K)break;k.push(se),S.pop()}else for(const $ of u){const se=$[N];if(se)for(const ue of se)k.push(ue.feature)}}return k}queryRenderedFeatures(u,p,C){p&&p.filter&&this._validate(a.C.filter,"queryRenderedFeatures.filter",p.filter,null,p);const S={};if(p&&p.layers){if(!(Array.isArray(p.layers)||p.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const se of p.layers){const ue=this._layers[se];if(!ue)return this.fire(new a.k(new Error(`The layer '${se}' does not exist in the map's style and cannot be queried for features.`))),[];S[ue.source]=!0}}const k=[];p.availableImages=this._availableImages;const K=this._serializedAllLayers(),N=p.layers instanceof Set?p.layers:Array.isArray(p.layers)?new Set(p.layers):null,$=Object.assign(Object.assign({},p),{layers:N,globalState:this._globalState});for(const se in this.tileManagers)p.layers&&!S[se]||k.push(yt(this.tileManagers[se],this._layers,K,u,$,C,this.map.terrain?(ue,ye,me)=>this.map.terrain.getElevation(ue,ye,me):void 0));return this.placement&&k.push((function(se,ue,ye,me,Se,Ke,Je){const nt={},tt=Ke.queryRenderedSymbols(me),rt=[];for(const dt of Object.keys(tt).map(Number))rt.push(Je[dt]);rt.sort(Mt);for(const dt of rt){const st=dt.featureIndex.lookupSymbolFeatures(tt[dt.bucketInstanceId],ue,dt.bucketIndex,dt.sourceLayerIndex,{filterSpec:Se.filter,globalState:Se.globalState},Se.layers,Se.availableImages,se);for(const ft in st){const Ct=nt[ft]=nt[ft]||[],lt=st[ft];lt.sort(((Ot,Ft)=>{const zt=dt.featureSortOrder;if(zt){const Gt=zt.indexOf(Ot.featureIndex);return zt.indexOf(Ft.featureIndex)-Gt}return Ft.featureIndex-Ot.featureIndex}));for(const Ot of lt)Ct.push(Ot)}}return(function(dt,st,ft){for(const Ct in dt)for(const lt of dt[Ct])Kt(lt,ft[st[Ct].source]);return dt})(nt,se,ye)})(this._layers,K,this.tileManagers,u,$,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(k)}querySourceFeatures(u,p){p?.filter&&this._validate(a.C.filter,"querySourceFeatures.filter",p.filter,null,p);const C=this.tileManagers[u];return C?(function(S,k){const K=S.getRenderableIds().map((se=>S.getTileByID(se))),N=[],$={};for(let se=0;se<K.length;se++){const ue=K[se],ye=ue.tileID.canonical.key;$[ye]||($[ye]=!0,ue.querySourceFeatures(N,k))}return N})(C,p?Object.assign(Object.assign({},p),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(u,p={}){this._checkLoaded();const C=this.light.getLight();let S=!1;for(const K in u)if(!a.bS(u[K],C[K])){S=!0;break}if(!S)return;const k={now:U(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,p),this.light.updateTransitions(k)}getProjection(){var u;return(u=this.stylesheet)===null||u===void 0?void 0:u.projection}setProjection(u){if(this._checkLoaded(),this.projection){if(this.projection.name===u.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=u,this._setProjectionInternal(u.type)}getSky(){var u;return(u=this.stylesheet)===null||u===void 0?void 0:u.sky}setSky(u,p={}){this._checkLoaded();const C=this.getSky();let S=!1;if(!u&&!C)return;if(u&&!C)S=!0;else if(!u&&C)S=!0;else for(const K in u)if(!a.bS(u[K],C[K])){S=!0;break}if(!S)return;const k={now:U(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=u,this.sky.setSky(u,p),this.sky.updateTransitions(k)}_setProjectionInternal(u){const p=(function(C,S){const k={constrainOverride:S};if(Array.isArray(C)){const K=new wu({type:C});return{projection:K,transform:new Ud(k),cameraHelper:new Ph(K)}}switch(C){case"mercator":return{projection:new Yr,transform:new Et(k),cameraHelper:new Fi};case"globe":{const K=new wu({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:K,transform:new Ud(k),cameraHelper:new Ph(K)}}case"vertical-perspective":return{projection:new fs,transform:new Bf(k),cameraHelper:new zs};default:return a.w(`Unknown projection name: ${C}. Falling back to mercator projection.`),{projection:new Yr,transform:new Et(k),cameraHelper:new Fi}}})(u,this.map.transformConstrain);this.projection=p.projection,this.map.migrateProjection(p.transform,p.cameraHelper);for(const C in this.tileManagers)this.tileManagers[C].reload()}_validate(u,p,C,S,k={}){return(!k||k.validate!==!1)&&Lh(this,u.call(a.C,a.e({key:p,style:this.serialize(),value:C,styleSpec:a.u},S)))}_remove(u=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Qe().off(he,this._rtlPluginLoaded);for(const p in this._layers)this._layers[p].setEventedParent(null);for(const p in this.tileManagers){const C=this.tileManagers[p];C.setEventedParent(null),C.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),u&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(u)}_clearSource(u){this.tileManagers[u].clearTiles()}_reloadSource(u){this.tileManagers[u].resume(),this.tileManagers[u].reload()}_updateSources(u){for(const p in this.tileManagers)this.tileManagers[p].update(u,this.map.terrain)}_generateCollisionBoxes(){for(const u in this.tileManagers)this._reloadSource(u)}_updatePlacement(u,p,C,S,k=!1){let K=!1,N=!1;const $={};for(const se of this._order){const ue=this._layers[se];if(ue.type!=="symbol")continue;if(!$[ue.source]){const me=this.tileManagers[ue.source];$[ue.source]=me.getRenderableIds(!0).map((Se=>me.getTileByID(Se))).sort(((Se,Ke)=>Ke.tileID.overscaledZ-Se.tileID.overscaledZ||(Se.tileID.isLessThan(Ke.tileID)?-1:1)))}const ye=this.crossTileSymbolIndex.addLayer(ue,$[ue.source],u.center.lng);K=K||ye}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((k=k||this._layerOrderChanged||C===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(U(),u.zoom))&&(this.pauseablePlacement=new Yu(u,this.map.terrain,this._order,k,p,C,S,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,$),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(U()),N=!0),K&&this.pauseablePlacement.placement.setStale()),N||K)for(const se of this._order){const ue=this._layers[se];ue.type==="symbol"&&this.placement.updateLayerOpacities(ue,$[ue.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(U())}_releaseSymbolFadeTiles(){for(const u in this.tileManagers)this.tileManagers[u].releaseSymbolFadeTiles()}getImages(u,p){return a._(this,void 0,void 0,(function*(){const C=yield this.imageManager.getImages(p.icons);this._updateTilesForChangedImages();const S=this.tileManagers[p.source];return S&&S.setDependencies(p.tileID.key,p.type,p.icons),C}))}getGlyphs(u,p){return a._(this,void 0,void 0,(function*(){const C=yield this.glyphManager.getGlyphs(p.stacks),S=this.tileManagers[p.source];return S&&S.setDependencies(p.tileID.key,p.type,[""]),C}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(u,p={}){this._checkLoaded(),u&&this._validate(a.C.glyphs,"glyphs",u,null,p)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=u,this.glyphManager.entries={},this.glyphManager.setURL(u))}getDashes(u,p){return a._(this,void 0,void 0,(function*(){const C={};for(const[S,k]of Object.entries(p.dashes))C[S]=this.lineAtlas.getDash(k.dasharray,k.round);return C}))}addSprite(u,p,C={},S){this._checkLoaded();const k=[{id:u,url:p}],K=[...ce(this.stylesheet.sprite),...k];this._validate(a.C.sprite,"sprite",K,null,C)||(this.stylesheet.sprite=K,this._loadSprite(k,!0,S))}removeSprite(u){this._checkLoaded();const p=ce(this.stylesheet.sprite);if(p.find((C=>C.id===u))){if(this._spritesImagesIds[u])for(const C of this._spritesImagesIds[u])this.imageManager.removeImage(C),this._changedImages[C]=!0;p.splice(p.findIndex((C=>C.id===u)),1),this.stylesheet.sprite=p.length>0?p:void 0,delete this._spritesImagesIds[u],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${u}" doesn't exists on this map.`)))}getSprite(){return ce(this.stylesheet.sprite)}setSprite(u,p={},C){this._checkLoaded(),u&&this._validate(a.C.sprite,"sprite",u,null,p)||(this.stylesheet.sprite=u,u?this._loadSprite(u,!0,C):(this._unloadSprite(),C&&C(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const u in this.tileManagers){const p=this.tileManagers[u];p.setEventedParent(null),p.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const u in this._layers){const p=this._layers[u];p.setEventedParent(null),p.onRemove&&p.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var Jm=a.aV([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Fd{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(u,p,C,S,k,K,N,$,se){this.context=u;let ue=this.boundPaintVertexBuffers.length!==S.length;for(let ye=0;!ue&&ye<S.length;ye++)this.boundPaintVertexBuffers[ye]!==S[ye]&&(ue=!0);!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==C||ue||this.boundIndexBuffer!==k||this.boundVertexOffset!==K||this.boundDynamicVertexBuffer!==N||this.boundDynamicVertexBuffer2!==$||this.boundDynamicVertexBuffer3!==se?this.freshBind(p,C,S,k,K,N,$,se):(u.bindVertexArray.set(this.vao),N&&N.bind(),k&&k.dynamicDraw&&k.bind(),$&&$.bind(),se&&se.bind())}freshBind(u,p,C,S,k,K,N,$){const se=u.numAttributes,ue=this.context,ye=ue.gl;this.vao&&this.destroy(),this.vao=ue.createVertexArray(),ue.bindVertexArray.set(this.vao),this.boundProgram=u,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=C,this.boundIndexBuffer=S,this.boundVertexOffset=k,this.boundDynamicVertexBuffer=K,this.boundDynamicVertexBuffer2=N,this.boundDynamicVertexBuffer3=$,p.enableAttributes(ye,u);for(const me of C)me.enableAttributes(ye,u);K&&K.enableAttributes(ye,u),N&&N.enableAttributes(ye,u),$&&$.enableAttributes(ye,u),p.bind(),p.setVertexAttribPointers(ye,u,k);for(const me of C)me.bind(),me.setVertexAttribPointers(ye,u,k);K&&(K.bind(),K.setVertexAttribPointers(ye,u,k)),S&&S.bind(),N&&(N.bind(),N.setVertexAttribPointers(ye,u,k)),$&&($.bind(),$.setVertexAttribPointers(ye,u,k)),ue.currentNumAttributes=se}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const $1=(I,u,p,C,S)=>({u_texture:0,u_ele_delta:I,u_fog_matrix:u,u_fog_color:p?p.properties.get("fog-color"):a.bq.white,u_fog_ground_blend:p?p.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:S?0:p?p.calculateFogBlendOpacity(C):0,u_horizon_color:p?p.properties.get("horizon-color"):a.bq.white,u_horizon_fog_blend:p?p.properties.get("horizon-fog-blend"):1,u_is_globe_mode:S?1:0}),bc={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Bl(I){const u=[];for(let p=0;p<I.length;p++){if(I[p]===null)continue;const C=I[p].split(" ");u.push(C.pop())}return u}class e0{constructor(u,p,C,S,k,K,N,$,se=[]){const ue=u.gl;this.program=ue.createProgram();const ye=Bl(p.staticAttributes),me=C?C.getBinderAttributes():[],Se=ye.concat(me),Ke=ho.prelude.staticUniforms?Bl(ho.prelude.staticUniforms):[],Je=N.staticUniforms?Bl(N.staticUniforms):[],nt=p.staticUniforms?Bl(p.staticUniforms):[],tt=C?C.getBinderUniforms():[],rt=Ke.concat(Je).concat(nt).concat(tt),dt=[];for(const zt of rt)dt.indexOf(zt)<0&&dt.push(zt);const st=C?C.defines():[];wo(ue)&&st.unshift("#version 300 es"),k&&st.push("#define OVERDRAW_INSPECTOR;"),K&&st.push("#define TERRAIN3D;"),$&&st.push($),se&&st.push(...se);let ft=st.concat(ho.prelude.fragmentSource,N.fragmentSource,p.fragmentSource).join(`
`),Ct=st.concat(ho.prelude.vertexSource,N.vertexSource,p.vertexSource).join(`
`);wo(ue)||(ft=(function(zt){return zt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(ft),Ct=(function(zt){return zt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(Ct));const lt=ue.createShader(ue.FRAGMENT_SHADER);if(ue.isContextLost())return void(this.failedToCreate=!0);if(ue.shaderSource(lt,ft),ue.compileShader(lt),!ue.getShaderParameter(lt,ue.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${ue.getShaderInfoLog(lt)}`);ue.attachShader(this.program,lt);const Ot=ue.createShader(ue.VERTEX_SHADER);if(ue.isContextLost())return void(this.failedToCreate=!0);if(ue.shaderSource(Ot,Ct),ue.compileShader(Ot),!ue.getShaderParameter(Ot,ue.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${ue.getShaderInfoLog(Ot)}`);ue.attachShader(this.program,Ot),this.attributes={};const Ft={};this.numAttributes=Se.length;for(let zt=0;zt<this.numAttributes;zt++)Se[zt]&&(ue.bindAttribLocation(this.program,zt,Se[zt]),this.attributes[Se[zt]]=zt);if(ue.linkProgram(this.program),!ue.getProgramParameter(this.program,ue.LINK_STATUS))throw new Error(`Program failed to link: ${ue.getProgramInfoLog(this.program)}`);ue.deleteShader(Ot),ue.deleteShader(lt);for(let zt=0;zt<dt.length;zt++){const Gt=dt[zt];if(Gt&&!Ft[Gt]){const Qt=ue.getUniformLocation(this.program,Gt);Qt&&(Ft[Gt]=Qt)}}this.fixedUniforms=S(u,Ft),this.terrainUniforms=((zt,Gt)=>({u_depth:new a.b$(zt,Gt.u_depth),u_terrain:new a.b$(zt,Gt.u_terrain),u_terrain_dim:new a.br(zt,Gt.u_terrain_dim),u_terrain_matrix:new a.c1(zt,Gt.u_terrain_matrix),u_terrain_unpack:new a.c2(zt,Gt.u_terrain_unpack),u_terrain_exaggeration:new a.br(zt,Gt.u_terrain_exaggeration)}))(u,Ft),this.projectionUniforms=((zt,Gt)=>({u_projection_matrix:new a.c1(zt,Gt.u_projection_matrix),u_projection_tile_mercator_coords:new a.c2(zt,Gt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.c2(zt,Gt.u_projection_clipping_plane),u_projection_transition:new a.br(zt,Gt.u_projection_transition),u_projection_fallback_matrix:new a.c1(zt,Gt.u_projection_fallback_matrix)}))(u,Ft),this.binderUniforms=C?C.getUniforms(u,Ft):[]}draw(u,p,C,S,k,K,N,$,se,ue,ye,me,Se,Ke,Je,nt,tt,rt,dt){const st=u.gl;if(this.failedToCreate)return;if(u.program.set(this.program),u.setDepthMode(C),u.setStencilMode(S),u.setColorMode(k),u.setCullFace(K),$){u.activeTexture.set(st.TEXTURE2),st.bindTexture(st.TEXTURE_2D,$.depthTexture),u.activeTexture.set(st.TEXTURE3),st.bindTexture(st.TEXTURE_2D,$.texture);for(const Ct in this.terrainUniforms)this.terrainUniforms[Ct].set($[Ct])}if(se)for(const Ct in se)this.projectionUniforms[bc[Ct]].set(se[Ct]);if(N)for(const Ct in this.fixedUniforms)this.fixedUniforms[Ct].set(N[Ct]);nt&&nt.setUniforms(u,this.binderUniforms,Ke,{zoom:Je});let ft=0;switch(p){case st.LINES:ft=2;break;case st.TRIANGLES:ft=3;break;case st.LINE_STRIP:ft=1}for(const Ct of Se.get()){const lt=Ct.vaos||(Ct.vaos={});(lt[ue]||(lt[ue]=new Fd)).bind(u,this,ye,nt?nt.getPaintVertexBuffers():[],me,Ct.vertexOffset,tt,rt,dt),st.drawElements(p,Ct.primitiveLength*ft,st.UNSIGNED_SHORT,Ct.primitiveOffset*ft*2)}}}function Of(I,u,p){const C=1/a.aO(p,1,u.transform.tileZoom),S=Math.pow(2,p.tileID.overscaledZ),k=p.tileSize*Math.pow(2,u.transform.tileZoom)/S,K=k*(p.tileID.canonical.x+p.tileID.wrap*S),N=k*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[C,I.fromScale,I.toScale],u_fade:I.t,u_pixel_coord_upper:[K>>16,N>>16],u_pixel_coord_lower:[65535&K,65535&N]}}const Ip=(I,u,p,C)=>{const S=I.style.light,k=S.properties.get("position"),K=[k.x,k.y,k.z],N=a.c5();S.properties.get("anchor")==="viewport"&&a.c6(N,I.transform.bearingInRadians),a.c7(K,K,N);const $=I.transform.transformLightDirection(K),se=S.properties.get("color");return{u_lightpos:K,u_lightpos_globe:$,u_lightintensity:S.properties.get("intensity"),u_lightcolor:[se.r,se.g,se.b],u_vertical_gradient:+u,u_opacity:p,u_fill_translate:C}},Tp=(I,u,p,C,S,k,K)=>a.e(Ip(I,u,p,C),Of(k,I,K),{u_height_factor:-Math.pow(2,S.overscaledZ)/K.tileSize/8}),zd=(I,u,p,C)=>a.e(Of(u,I,p),{u_fill_translate:C}),If=(I,u)=>({u_world:I,u_fill_translate:u}),H1=(I,u,p,C,S)=>a.e(zd(I,u,p,S),{u_world:C}),kp=(I,u,p,C,S)=>{const k=I.transform;let K,N,$=0;if(p.paint.get("circle-pitch-alignment")==="map"){const se=a.aO(u,1,k.zoom);K=!0,N=[se,se],$=se/(a.a5*Math.pow(2,u.tileID.overscaledZ))*2*Math.PI*S}else K=!1,N=k.pixelsToGLUnits;return{u_camera_to_center_distance:k.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+K,u_device_pixel_ratio:I.pixelRatio,u_extrude_scale:N,u_globe_extrude_scale:$,u_translate:C}},Kh=I=>({u_pixel_extrude_scale:[1/I.width,1/I.height]}),Fh=I=>({u_viewport_size:[I.width,I.height]}),Dp=(I,u=1)=>({u_color:I,u_overlay:0,u_overlay_scale:u}),zh=(I,u,p,C)=>{const S=a.aO(I,1,u)/(a.a5*Math.pow(2,I.tileID.overscaledZ))*2*Math.PI*C;return{u_extrude_scale:a.aO(I,1,u),u_intensity:p,u_globe_extrude_scale:S}},Rp=(I,u,p,C)=>{const S=a.N();a.c8(S,0,I.width,I.height,0,0,1);const k=I.context.gl;return{u_matrix:S,u_world:[k.drawingBufferWidth,k.drawingBufferHeight],u_image:p,u_color_ramp:C,u_opacity:u.paint.get("heatmap-opacity")}},Tf=(I,u,p)=>{const C=p.paint.get("hillshade-accent-color");let S;switch(p.paint.get("hillshade-method")){case"basic":S=4;break;case"combined":S=1;break;case"igor":S=2;break;case"multidirectional":S=3;break;default:S=0}const k=p.getIlluminationProperties();for(let K=0;K<k.directionRadians.length;K++)p.paint.get("hillshade-illumination-anchor")==="viewport"&&(k.directionRadians[K]+=I.transform.bearingInRadians);return{u_image:0,u_latrange:t0(0,u.tileID),u_exaggeration:p.paint.get("hillshade-exaggeration"),u_altitudes:k.altitudeRadians,u_azimuths:k.directionRadians,u_accent:C,u_method:S,u_highlights:k.highlightColor,u_shadows:k.shadowColor}},th=(I,u)=>{const p=u.stride,C=a.N();return a.c8(C,0,a.a5,-a.a5,0,0,1),a.O(C,C,[0,-a.a5,0]),{u_matrix:C,u_image:1,u_dimension:[p,p],u_zoom:I.overscaledZ,u_unpack:u.getUnpackVector()}};function t0(I,u){const p=Math.pow(2,u.canonical.z),C=u.canonical.y;return[new a.ab(0,C/p).toLngLat().lat,new a.ab(0,(C+1)/p).toLngLat().lat]}const Z1=(I,u,p=0)=>({u_image:0,u_unpack:u.getUnpackVector(),u_dimension:[u.stride,u.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:p,u_opacity:I.paint.get("color-relief-opacity")}),Pp=(I,u,p,C)=>{const S=I.transform;return{u_translation:Lp(I,u,p),u_ratio:C/a.aO(u,1,S.zoom),u_device_pixel_ratio:I.pixelRatio,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},X1=(I,u,p,C,S)=>a.e(Pp(I,u,p,C),{u_image:0,u_image_height:S}),jh=(I,u,p,C,S)=>{const k=I.transform,K=Cc(u,k);return{u_translation:Lp(I,u,p),u_texsize:u.imageAtlasTexture.size,u_ratio:C/a.aO(u,1,k.zoom),u_device_pixel_ratio:I.pixelRatio,u_image:0,u_scale:[K,S.fromScale,S.toScale],u_fade:S.t,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]]}},Bs=(I,u,p,C,S)=>{const k=Cc(u,I.transform);return a.e(Pp(I,u,p,C),{u_tileratio:k,u_crossfade_from:S.fromScale,u_crossfade_to:S.toScale,u_image:0,u_mix:S.t,u_lineatlas_width:I.lineAtlas.width,u_lineatlas_height:I.lineAtlas.height})},nh=(I,u,p,C,S,k)=>{const K=Cc(u,I.transform);return a.e(Pp(I,u,p,C),{u_image:0,u_image_height:k,u_tileratio:K,u_crossfade_from:S.fromScale,u_crossfade_to:S.toScale,u_image_dash:1,u_mix:S.t,u_lineatlas_width:I.lineAtlas.width,u_lineatlas_height:I.lineAtlas.height})};function Cc(I,u){return 1/a.aO(I,1,u.tileZoom)}function Lp(I,u,p){return a.aP(I.transform,u,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}const n0=(I,u,p,C,S)=>{return{u_tl_parent:I,u_scale_parent:u,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*C.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:C.paint.get("raster-brightness-min"),u_brightness_high:C.paint.get("raster-brightness-max"),u_saturation_factor:(K=C.paint.get("raster-saturation"),K>0?1-1/(1.001-K):-K),u_contrast_factor:(k=C.paint.get("raster-contrast"),k>0?1/(1-k):1+k),u_spin_weights:i0(C.paint.get("raster-hue-rotate")),u_coords_top:[S[0].x,S[0].y,S[1].x,S[1].y],u_coords_bottom:[S[3].x,S[3].y,S[2].x,S[2].y]};var k,K};function i0(I){I*=Math.PI/180;const u=Math.sin(I),p=Math.cos(I);return[(2*p+1)/3,(-Math.sqrt(3)*u-p+1)/3,(Math.sqrt(3)*u-p+1)/3]}const Up=(I,u,p,C,S,k,K,N,$,se,ue,ye,me)=>{const Se=K.transform;return{u_is_size_zoom_constant:+(I==="constant"||I==="source"),u_is_size_feature_constant:+(I==="constant"||I==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:Se.cameraToCenterDistance,u_pitch:Se.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:Se.width/Se.height,u_fade_change:K.options.fadeDuration?K.symbolFadeChange:1,u_label_plane_matrix:N,u_coord_matrix:$,u_is_text:+ue,u_pitch_with_map:+C,u_is_along_line:S,u_is_variable_anchor:k,u_texsize:ye,u_texture:0,u_translation:se,u_pitched_scale:me}},ih=(I,u,p,C,S,k,K,N,$,se,ue,ye,me,Se)=>{const Ke=K.transform;return a.e(Up(I,u,p,C,S,k,K,N,$,se,ue,ye,Se),{u_gamma_scale:C?Math.cos(Ke.pitch*Math.PI/180)*Ke.cameraToCenterDistance:1,u_device_pixel_ratio:K.pixelRatio,u_is_halo:1})},Tt=(I,u,p,C,S,k,K,N,$,se,ue,ye,me)=>a.e(ih(I,u,p,C,S,k,K,N,$,se,!0,ue,0,me),{u_texsize_icon:ye,u_texture_icon:1}),an=(I,u)=>({u_opacity:I,u_color:u}),tn=(I,u,p,C,S)=>a.e((function(k,K,N,$){const se=N.imageManager.getPattern(k.from.toString()),ue=N.imageManager.getPattern(k.to.toString()),{width:ye,height:me}=N.imageManager.getPixelSize(),Se=Math.pow(2,$.tileID.overscaledZ),Ke=$.tileSize*Math.pow(2,N.transform.tileZoom)/Se,Je=Ke*($.tileID.canonical.x+$.tileID.wrap*Se),nt=Ke*$.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:se.tl,u_pattern_br_a:se.br,u_pattern_tl_b:ue.tl,u_pattern_br_b:ue.br,u_texsize:[ye,me],u_mix:K.t,u_pattern_size_a:se.displaySize,u_pattern_size_b:ue.displaySize,u_scale_a:K.fromScale,u_scale_b:K.toScale,u_tile_units_to_pixels:1/a.aO($,1,N.transform.tileZoom),u_pixel_coord_upper:[Je>>16,nt>>16],u_pixel_coord_lower:[65535&Je,65535&nt]}})(p,S,u,C),{u_opacity:I}),mi=(I,u)=>{},pr={fillExtrusion:(I,u)=>({u_lightpos:new a.c3(I,u.u_lightpos),u_lightpos_globe:new a.c3(I,u.u_lightpos_globe),u_lightintensity:new a.br(I,u.u_lightintensity),u_lightcolor:new a.c3(I,u.u_lightcolor),u_vertical_gradient:new a.br(I,u.u_vertical_gradient),u_opacity:new a.br(I,u.u_opacity),u_fill_translate:new a.c4(I,u.u_fill_translate)}),fillExtrusionPattern:(I,u)=>({u_lightpos:new a.c3(I,u.u_lightpos),u_lightpos_globe:new a.c3(I,u.u_lightpos_globe),u_lightintensity:new a.br(I,u.u_lightintensity),u_lightcolor:new a.c3(I,u.u_lightcolor),u_vertical_gradient:new a.br(I,u.u_vertical_gradient),u_height_factor:new a.br(I,u.u_height_factor),u_opacity:new a.br(I,u.u_opacity),u_fill_translate:new a.c4(I,u.u_fill_translate),u_image:new a.b$(I,u.u_image),u_texsize:new a.c4(I,u.u_texsize),u_pixel_coord_upper:new a.c4(I,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.c4(I,u.u_pixel_coord_lower),u_scale:new a.c3(I,u.u_scale),u_fade:new a.br(I,u.u_fade)}),fill:(I,u)=>({u_fill_translate:new a.c4(I,u.u_fill_translate)}),fillPattern:(I,u)=>({u_image:new a.b$(I,u.u_image),u_texsize:new a.c4(I,u.u_texsize),u_pixel_coord_upper:new a.c4(I,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.c4(I,u.u_pixel_coord_lower),u_scale:new a.c3(I,u.u_scale),u_fade:new a.br(I,u.u_fade),u_fill_translate:new a.c4(I,u.u_fill_translate)}),fillOutline:(I,u)=>({u_world:new a.c4(I,u.u_world),u_fill_translate:new a.c4(I,u.u_fill_translate)}),fillOutlinePattern:(I,u)=>({u_world:new a.c4(I,u.u_world),u_image:new a.b$(I,u.u_image),u_texsize:new a.c4(I,u.u_texsize),u_pixel_coord_upper:new a.c4(I,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.c4(I,u.u_pixel_coord_lower),u_scale:new a.c3(I,u.u_scale),u_fade:new a.br(I,u.u_fade),u_fill_translate:new a.c4(I,u.u_fill_translate)}),circle:(I,u)=>({u_camera_to_center_distance:new a.br(I,u.u_camera_to_center_distance),u_scale_with_map:new a.b$(I,u.u_scale_with_map),u_pitch_with_map:new a.b$(I,u.u_pitch_with_map),u_extrude_scale:new a.c4(I,u.u_extrude_scale),u_device_pixel_ratio:new a.br(I,u.u_device_pixel_ratio),u_globe_extrude_scale:new a.br(I,u.u_globe_extrude_scale),u_translate:new a.c4(I,u.u_translate)}),collisionBox:(I,u)=>({u_pixel_extrude_scale:new a.c4(I,u.u_pixel_extrude_scale)}),collisionCircle:(I,u)=>({u_viewport_size:new a.c4(I,u.u_viewport_size)}),debug:(I,u)=>({u_color:new a.c0(I,u.u_color),u_overlay:new a.b$(I,u.u_overlay),u_overlay_scale:new a.br(I,u.u_overlay_scale)}),depth:mi,clippingMask:mi,heatmap:(I,u)=>({u_extrude_scale:new a.br(I,u.u_extrude_scale),u_intensity:new a.br(I,u.u_intensity),u_globe_extrude_scale:new a.br(I,u.u_globe_extrude_scale)}),heatmapTexture:(I,u)=>({u_matrix:new a.c1(I,u.u_matrix),u_world:new a.c4(I,u.u_world),u_image:new a.b$(I,u.u_image),u_color_ramp:new a.b$(I,u.u_color_ramp),u_opacity:new a.br(I,u.u_opacity)}),hillshade:(I,u)=>({u_image:new a.b$(I,u.u_image),u_latrange:new a.c4(I,u.u_latrange),u_exaggeration:new a.br(I,u.u_exaggeration),u_altitudes:new a.ca(I,u.u_altitudes),u_azimuths:new a.ca(I,u.u_azimuths),u_accent:new a.c0(I,u.u_accent),u_method:new a.b$(I,u.u_method),u_shadows:new a.c9(I,u.u_shadows),u_highlights:new a.c9(I,u.u_highlights)}),hillshadePrepare:(I,u)=>({u_matrix:new a.c1(I,u.u_matrix),u_image:new a.b$(I,u.u_image),u_dimension:new a.c4(I,u.u_dimension),u_zoom:new a.br(I,u.u_zoom),u_unpack:new a.c2(I,u.u_unpack)}),colorRelief:(I,u)=>({u_image:new a.b$(I,u.u_image),u_unpack:new a.c2(I,u.u_unpack),u_dimension:new a.c4(I,u.u_dimension),u_elevation_stops:new a.b$(I,u.u_elevation_stops),u_color_stops:new a.b$(I,u.u_color_stops),u_color_ramp_size:new a.b$(I,u.u_color_ramp_size),u_opacity:new a.br(I,u.u_opacity)}),line:(I,u)=>({u_translation:new a.c4(I,u.u_translation),u_ratio:new a.br(I,u.u_ratio),u_device_pixel_ratio:new a.br(I,u.u_device_pixel_ratio),u_units_to_pixels:new a.c4(I,u.u_units_to_pixels)}),lineGradient:(I,u)=>({u_translation:new a.c4(I,u.u_translation),u_ratio:new a.br(I,u.u_ratio),u_device_pixel_ratio:new a.br(I,u.u_device_pixel_ratio),u_units_to_pixels:new a.c4(I,u.u_units_to_pixels),u_image:new a.b$(I,u.u_image),u_image_height:new a.br(I,u.u_image_height)}),linePattern:(I,u)=>({u_translation:new a.c4(I,u.u_translation),u_texsize:new a.c4(I,u.u_texsize),u_ratio:new a.br(I,u.u_ratio),u_device_pixel_ratio:new a.br(I,u.u_device_pixel_ratio),u_image:new a.b$(I,u.u_image),u_units_to_pixels:new a.c4(I,u.u_units_to_pixels),u_scale:new a.c3(I,u.u_scale),u_fade:new a.br(I,u.u_fade)}),lineSDF:(I,u)=>({u_translation:new a.c4(I,u.u_translation),u_ratio:new a.br(I,u.u_ratio),u_device_pixel_ratio:new a.br(I,u.u_device_pixel_ratio),u_units_to_pixels:new a.c4(I,u.u_units_to_pixels),u_image:new a.b$(I,u.u_image),u_mix:new a.br(I,u.u_mix),u_tileratio:new a.br(I,u.u_tileratio),u_crossfade_from:new a.br(I,u.u_crossfade_from),u_crossfade_to:new a.br(I,u.u_crossfade_to),u_lineatlas_width:new a.br(I,u.u_lineatlas_width),u_lineatlas_height:new a.br(I,u.u_lineatlas_height)}),lineGradientSDF:(I,u)=>({u_translation:new a.c4(I,u.u_translation),u_ratio:new a.br(I,u.u_ratio),u_device_pixel_ratio:new a.br(I,u.u_device_pixel_ratio),u_units_to_pixels:new a.c4(I,u.u_units_to_pixels),u_image:new a.b$(I,u.u_image),u_image_height:new a.br(I,u.u_image_height),u_tileratio:new a.br(I,u.u_tileratio),u_crossfade_from:new a.br(I,u.u_crossfade_from),u_crossfade_to:new a.br(I,u.u_crossfade_to),u_image_dash:new a.b$(I,u.u_image_dash),u_mix:new a.br(I,u.u_mix),u_lineatlas_width:new a.br(I,u.u_lineatlas_width),u_lineatlas_height:new a.br(I,u.u_lineatlas_height)}),raster:(I,u)=>({u_tl_parent:new a.c4(I,u.u_tl_parent),u_scale_parent:new a.br(I,u.u_scale_parent),u_buffer_scale:new a.br(I,u.u_buffer_scale),u_fade_t:new a.br(I,u.u_fade_t),u_opacity:new a.br(I,u.u_opacity),u_image0:new a.b$(I,u.u_image0),u_image1:new a.b$(I,u.u_image1),u_brightness_low:new a.br(I,u.u_brightness_low),u_brightness_high:new a.br(I,u.u_brightness_high),u_saturation_factor:new a.br(I,u.u_saturation_factor),u_contrast_factor:new a.br(I,u.u_contrast_factor),u_spin_weights:new a.c3(I,u.u_spin_weights),u_coords_top:new a.c2(I,u.u_coords_top),u_coords_bottom:new a.c2(I,u.u_coords_bottom)}),symbolIcon:(I,u)=>({u_is_size_zoom_constant:new a.b$(I,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b$(I,u.u_is_size_feature_constant),u_size_t:new a.br(I,u.u_size_t),u_size:new a.br(I,u.u_size),u_camera_to_center_distance:new a.br(I,u.u_camera_to_center_distance),u_pitch:new a.br(I,u.u_pitch),u_rotate_symbol:new a.b$(I,u.u_rotate_symbol),u_aspect_ratio:new a.br(I,u.u_aspect_ratio),u_fade_change:new a.br(I,u.u_fade_change),u_label_plane_matrix:new a.c1(I,u.u_label_plane_matrix),u_coord_matrix:new a.c1(I,u.u_coord_matrix),u_is_text:new a.b$(I,u.u_is_text),u_pitch_with_map:new a.b$(I,u.u_pitch_with_map),u_is_along_line:new a.b$(I,u.u_is_along_line),u_is_variable_anchor:new a.b$(I,u.u_is_variable_anchor),u_texsize:new a.c4(I,u.u_texsize),u_texture:new a.b$(I,u.u_texture),u_translation:new a.c4(I,u.u_translation),u_pitched_scale:new a.br(I,u.u_pitched_scale)}),symbolSDF:(I,u)=>({u_is_size_zoom_constant:new a.b$(I,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b$(I,u.u_is_size_feature_constant),u_size_t:new a.br(I,u.u_size_t),u_size:new a.br(I,u.u_size),u_camera_to_center_distance:new a.br(I,u.u_camera_to_center_distance),u_pitch:new a.br(I,u.u_pitch),u_rotate_symbol:new a.b$(I,u.u_rotate_symbol),u_aspect_ratio:new a.br(I,u.u_aspect_ratio),u_fade_change:new a.br(I,u.u_fade_change),u_label_plane_matrix:new a.c1(I,u.u_label_plane_matrix),u_coord_matrix:new a.c1(I,u.u_coord_matrix),u_is_text:new a.b$(I,u.u_is_text),u_pitch_with_map:new a.b$(I,u.u_pitch_with_map),u_is_along_line:new a.b$(I,u.u_is_along_line),u_is_variable_anchor:new a.b$(I,u.u_is_variable_anchor),u_texsize:new a.c4(I,u.u_texsize),u_texture:new a.b$(I,u.u_texture),u_gamma_scale:new a.br(I,u.u_gamma_scale),u_device_pixel_ratio:new a.br(I,u.u_device_pixel_ratio),u_is_halo:new a.b$(I,u.u_is_halo),u_translation:new a.c4(I,u.u_translation),u_pitched_scale:new a.br(I,u.u_pitched_scale)}),symbolTextAndIcon:(I,u)=>({u_is_size_zoom_constant:new a.b$(I,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b$(I,u.u_is_size_feature_constant),u_size_t:new a.br(I,u.u_size_t),u_size:new a.br(I,u.u_size),u_camera_to_center_distance:new a.br(I,u.u_camera_to_center_distance),u_pitch:new a.br(I,u.u_pitch),u_rotate_symbol:new a.b$(I,u.u_rotate_symbol),u_aspect_ratio:new a.br(I,u.u_aspect_ratio),u_fade_change:new a.br(I,u.u_fade_change),u_label_plane_matrix:new a.c1(I,u.u_label_plane_matrix),u_coord_matrix:new a.c1(I,u.u_coord_matrix),u_is_text:new a.b$(I,u.u_is_text),u_pitch_with_map:new a.b$(I,u.u_pitch_with_map),u_is_along_line:new a.b$(I,u.u_is_along_line),u_is_variable_anchor:new a.b$(I,u.u_is_variable_anchor),u_texsize:new a.c4(I,u.u_texsize),u_texsize_icon:new a.c4(I,u.u_texsize_icon),u_texture:new a.b$(I,u.u_texture),u_texture_icon:new a.b$(I,u.u_texture_icon),u_gamma_scale:new a.br(I,u.u_gamma_scale),u_device_pixel_ratio:new a.br(I,u.u_device_pixel_ratio),u_is_halo:new a.b$(I,u.u_is_halo),u_translation:new a.c4(I,u.u_translation),u_pitched_scale:new a.br(I,u.u_pitched_scale)}),background:(I,u)=>({u_opacity:new a.br(I,u.u_opacity),u_color:new a.c0(I,u.u_color)}),backgroundPattern:(I,u)=>({u_opacity:new a.br(I,u.u_opacity),u_image:new a.b$(I,u.u_image),u_pattern_tl_a:new a.c4(I,u.u_pattern_tl_a),u_pattern_br_a:new a.c4(I,u.u_pattern_br_a),u_pattern_tl_b:new a.c4(I,u.u_pattern_tl_b),u_pattern_br_b:new a.c4(I,u.u_pattern_br_b),u_texsize:new a.c4(I,u.u_texsize),u_mix:new a.br(I,u.u_mix),u_pattern_size_a:new a.c4(I,u.u_pattern_size_a),u_pattern_size_b:new a.c4(I,u.u_pattern_size_b),u_scale_a:new a.br(I,u.u_scale_a),u_scale_b:new a.br(I,u.u_scale_b),u_pixel_coord_upper:new a.c4(I,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.c4(I,u.u_pixel_coord_lower),u_tile_units_to_pixels:new a.br(I,u.u_tile_units_to_pixels)}),terrain:(I,u)=>({u_texture:new a.b$(I,u.u_texture),u_ele_delta:new a.br(I,u.u_ele_delta),u_fog_matrix:new a.c1(I,u.u_fog_matrix),u_fog_color:new a.c0(I,u.u_fog_color),u_fog_ground_blend:new a.br(I,u.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.br(I,u.u_fog_ground_blend_opacity),u_horizon_color:new a.c0(I,u.u_horizon_color),u_horizon_fog_blend:new a.br(I,u.u_horizon_fog_blend),u_is_globe_mode:new a.br(I,u.u_is_globe_mode)}),terrainDepth:(I,u)=>({u_ele_delta:new a.br(I,u.u_ele_delta)}),terrainCoords:(I,u)=>({u_texture:new a.b$(I,u.u_texture),u_terrain_coords_id:new a.br(I,u.u_terrain_coords_id),u_ele_delta:new a.br(I,u.u_ele_delta)}),projectionErrorMeasurement:(I,u)=>({u_input:new a.br(I,u.u_input),u_output_expected:new a.br(I,u.u_output_expected)}),atmosphere:(I,u)=>({u_sun_pos:new a.c3(I,u.u_sun_pos),u_atmosphere_blend:new a.br(I,u.u_atmosphere_blend),u_globe_position:new a.c3(I,u.u_globe_position),u_globe_radius:new a.br(I,u.u_globe_radius),u_inv_proj_matrix:new a.c1(I,u.u_inv_proj_matrix)}),sky:(I,u)=>({u_sky_color:new a.c0(I,u.u_sky_color),u_horizon_color:new a.c0(I,u.u_horizon_color),u_horizon:new a.c4(I,u.u_horizon),u_horizon_normal:new a.c4(I,u.u_horizon_normal),u_sky_horizon_blend:new a.br(I,u.u_sky_horizon_blend),u_sky_blend:new a.br(I,u.u_sky_blend)})};class Fr{constructor(u,p,C){this.context=u;const S=u.gl;this.buffer=S.createBuffer(),this.dynamicDraw=!!C,this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const p=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ps={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Lo{constructor(u,p,C,S){this.length=p.length,this.attributes=C,this.itemSize=p.bytesPerElement,this.dynamicDraw=S,this.context=u;const k=u.gl;this.buffer=k.createBuffer(),u.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){if(u.length!==this.length)throw new Error(`Length of new data is ${u.length}, which doesn't match current length of ${this.length}`);const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,p){for(let C=0;C<this.attributes.length;C++){const S=p.attributes[this.attributes[C].name];S!==void 0&&u.enableVertexAttribArray(S)}}setVertexAttribPointers(u,p,C){for(let S=0;S<this.attributes.length;S++){const k=this.attributes[S],K=p.attributes[k.name];K!==void 0&&u.vertexAttribPointer(K,k.components,u[ps[k.type]],!1,this.itemSize,k.offset+this.itemSize*(C||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Vr{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class CA extends Vr{getDefault(){return a.bq.transparent}set(u){const p=this.current;(u.r!==p.r||u.g!==p.g||u.b!==p.b||u.a!==p.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class Ol extends Vr{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class Nh extends Vr{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class r0 extends Vr{getDefault(){return[!0,!0,!0,!0]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||u[3]!==p[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class _c extends Vr{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class Gh extends Vr{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class rh extends Vr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const p=this.current;(u.func!==p.func||u.ref!==p.ref||u.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class Cr extends Vr{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class kg extends Vr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=u,this.dirty=!1}}class Kp extends Vr{getDefault(){return[0,1]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class Il extends Vr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=u,this.dirty=!1}}class _A extends Vr{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class Jl extends Vr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.BLEND):p.disable(p.BLEND),this.current=u,this.dirty=!1}}class oh extends Vr{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class xA extends Vr{getDefault(){return a.bq.transparent}set(u){const p=this.current;(u.r!==p.r||u.g!==p.g||u.b!==p.b||u.a!==p.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class Su extends Vr{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class Wh extends Vr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=u,this.dirty=!1}}class sh extends Vr{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class eu extends Vr{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}class o0 extends Vr{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}}class jd extends Vr{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class or extends Vr{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||u[3]!==p[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Fp extends Vr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class Al extends Vr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class MA extends Vr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class Tl extends Vr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class J1 extends Vr{getDefault(){return null}set(u){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class s0 extends Vr{getDefault(){return null}set(u){var p;if(u===this.current&&!this.dirty)return;const C=this.gl;wo(C)?C.bindVertexArray(u):(p=C.getExtension("OES_vertex_array_object"))===null||p===void 0||p.bindVertexArrayOES(u),this.current=u,this.dirty=!1}}class Qh extends Vr{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class kf extends Vr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class Nd extends Vr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class wA extends Vr{constructor(u,p){super(u),this.context=u,this.parent=p}getDefault(){return null}}class zp extends wA{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class kl extends wA{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class qh extends wA{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}const Yh="Framebuffer is not complete";class ms{constructor(u,p,C,S,k){this.context=u,this.width=p,this.height=C;const K=u.gl,N=this.framebuffer=K.createFramebuffer();if(this.colorAttachment=new zp(u,N),S)this.depthAttachment=k?new qh(u,N):new kl(u,N);else if(k)throw new Error("Stencil cannot be set without depth");if(K.checkFramebufferStatus(K.FRAMEBUFFER)!==K.FRAMEBUFFER_COMPLETE)throw new Error(Yh)}destroy(){const u=this.context.gl,p=this.colorAttachment.get();if(p&&u.deleteTexture(p),this.depthAttachment){const C=this.depthAttachment.get();C&&u.deleteRenderbuffer(C)}u.deleteFramebuffer(this.framebuffer)}}class js{constructor(u){var p,C;if(this.gl=u,this.clearColor=new CA(this),this.clearDepth=new Ol(this),this.clearStencil=new Nh(this),this.colorMask=new r0(this),this.depthMask=new _c(this),this.stencilMask=new Gh(this),this.stencilFunc=new rh(this),this.stencilOp=new Cr(this),this.stencilTest=new kg(this),this.depthRange=new Kp(this),this.depthTest=new Il(this),this.depthFunc=new _A(this),this.blend=new Jl(this),this.blendFunc=new oh(this),this.blendColor=new xA(this),this.blendEquation=new Su(this),this.cullFace=new Wh(this),this.cullFaceSide=new sh(this),this.frontFace=new eu(this),this.program=new o0(this),this.activeTexture=new jd(this),this.viewport=new or(this),this.bindFramebuffer=new Fp(this),this.bindRenderbuffer=new Al(this),this.bindTexture=new MA(this),this.bindVertexBuffer=new Tl(this),this.bindElementBuffer=new J1(this),this.bindVertexArray=new s0(this),this.pixelStoreUnpack=new Qh(this),this.pixelStoreUnpackPremultiplyAlpha=new kf(this),this.pixelStoreUnpackFlipY=new Nd(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE),wo(u)){this.HALF_FLOAT=u.HALF_FLOAT;const S=u.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(p=u.RGBA16F)!==null&&p!==void 0?p:S?.RGBA16F_EXT,this.RGB16F=(C=u.RGB16F)!==null&&C!==void 0?C:S?.RGB16F_EXT,u.getExtension("EXT_color_buffer_float")}else{u.getExtension("EXT_color_buffer_half_float"),u.getExtension("OES_texture_half_float_linear");const S=u.getExtension("OES_texture_half_float");this.HALF_FLOAT=S?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,p){return new Fr(this,u,p)}createVertexBuffer(u,p,C){return new Lo(this,u,p,C)}createRenderbuffer(u,p,C){const S=this.gl,k=S.createRenderbuffer();return this.bindRenderbuffer.set(k),S.renderbufferStorage(S.RENDERBUFFER,u,p,C),this.bindRenderbuffer.set(null),k}createFramebuffer(u,p,C,S){return new ms(this,u,p,C,S)}clear({color:u,depth:p,stencil:C}){const S=this.gl;let k=0;u&&(k|=S.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(k|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),C!==void 0&&(k|=S.STENCIL_BUFFER_BIT,this.clearStencil.set(C),this.stencilMask.set(255)),S.clear(k)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){a.bS(u.blendFunction,qn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}createVertexArray(){var u;return wo(this.gl)?this.gl.createVertexArray():(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.createVertexArrayOES()}deleteVertexArray(u){var p;return wo(this.gl)?this.gl.deleteVertexArray(u):(p=this.gl.getExtension("OES_vertex_array_object"))===null||p===void 0?void 0:p.deleteVertexArrayOES(u)}unbindVAO(){this.bindVertexArray.set(null)}}let Xa;function Ja(I,u,p,C,S){const k=I.context,K=I.transform,N=k.gl,$=I.useProgram("collisionBox"),se=[];let ue=0,ye=0;for(let tt=0;tt<C.length;tt++){const rt=C[tt],dt=u.getTile(rt).getBucket(p);if(!dt)continue;const st=S?dt.textCollisionBox:dt.iconCollisionBox,ft=dt.collisionCircleArray;ft.length>0&&(se.push({circleArray:ft,circleOffset:ye,coord:rt}),ue+=ft.length/4,ye=ue),st&&$.draw(k,N.LINES,ri.disabled,ni.disabled,I.colorModeForRenderPass(),ei.disabled,Kh(I.transform),I.style.map.terrain&&I.style.map.terrain.getTerrainData(rt),K.getProjectionData({overscaledTileID:rt,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),p.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,null,I.transform.zoom,null,null,st.collisionVertexBuffer)}if(!S||!se.length)return;const me=I.useProgram("collisionCircle"),Se=new a.cb;Se.resize(4*ue),Se._trim();let Ke=0;for(const tt of se)for(let rt=0;rt<tt.circleArray.length/4;rt++){const dt=4*rt,st=tt.circleArray[dt+0],ft=tt.circleArray[dt+1],Ct=tt.circleArray[dt+2],lt=tt.circleArray[dt+3];Se.emplace(Ke++,st,ft,Ct,lt,0),Se.emplace(Ke++,st,ft,Ct,lt,1),Se.emplace(Ke++,st,ft,Ct,lt,2),Se.emplace(Ke++,st,ft,Ct,lt,3)}(!Xa||Xa.length<2*ue)&&(Xa=(function(tt){const rt=2*tt,dt=new a.cd;dt.resize(rt),dt._trim();for(let st=0;st<rt;st++){const ft=6*st;dt.uint16[ft+0]=4*st+0,dt.uint16[ft+1]=4*st+1,dt.uint16[ft+2]=4*st+2,dt.uint16[ft+3]=4*st+2,dt.uint16[ft+4]=4*st+3,dt.uint16[ft+5]=4*st+0}return dt})(ue));const Je=k.createIndexBuffer(Xa,!0),nt=k.createVertexBuffer(Se,a.cc.members,!0);for(const tt of se){const rt=Fh(I.transform);me.draw(k,N.TRIANGLES,ri.disabled,ni.disabled,I.colorModeForRenderPass(),ei.disabled,rt,I.style.map.terrain&&I.style.map.terrain.getTerrainData(tt.coord),null,p.id,nt,Je,a.aY.simpleSegment(0,2*tt.circleOffset,tt.circleArray.length,tt.circleArray.length/2),null,I.transform.zoom,null,null,null)}nt.destroy(),Je.destroy()}const Zc=a.as(new Float32Array(16));function SA(I,u,p,C,S,k){const{horizontalAlign:K,verticalAlign:N}=a.aT(I);return new a.P((-(K-.5)*u/S+C[0])*k,(-(N-.5)*p/S+C[1])*k)}function Dl(I,u,p,C,S,k){const K=u.tileAnchorPoint.add(new a.P(u.translation[0],u.translation[1]));if(u.pitchWithMap){let N=C.mult(k);p||(N=N.rotate(-S));const $=K.add(N);return Vi($.x,$.y,u.pitchedLabelPlaneMatrix,u.getElevation).point}if(p){const N=mr(u.tileAnchorPoint.x+1,u.tileAnchorPoint.y,u).point.sub(I),$=Math.atan(N.y/N.x)+(N.x<0?Math.PI:0);return I.add(C.rotate($))}return I.add(C)}function $u(I,u,p,C,S,k,K,N,$,se,ue,ye){const me=I.text.placedSymbolArray,Se=I.text.dynamicLayoutVertexArray,Ke=I.icon.dynamicLayoutVertexArray,Je={};Se.clear();for(let nt=0;nt<me.length;nt++){const tt=me.get(nt),rt=tt.hidden||!tt.crossTileID||I.allowVerticalPlacement&&!tt.placedOrientation?null:C[tt.crossTileID];if(rt){const dt=new a.P(tt.anchorX,tt.anchorY),st={getElevation:ye,width:S.width,height:S.height,pitchedLabelPlaneMatrix:k,pitchWithMap:p,transform:S,tileAnchorPoint:dt,translation:se,unwrappedTileID:ue},ft=p?Zo(dt.x,dt.y,st):mr(dt.x,dt.y,st),Ct=Qu(S.cameraToCenterDistance,ft.signedDistanceFromCamera);let lt=a.aB(I.textSizeData,N,tt)*Ct/a.aN;p&&(lt*=I.tilePixelRatio/K);const{width:Ot,height:Ft,anchor:zt,textOffset:Gt,textBoxScale:Qt}=rt,dn=SA(zt,Ot,Ft,Gt,Qt,lt),Rn=S.getPitchedTextCorrection(dt.x+se[0],dt.y+se[1],ue),An=Dl(ft.point,st,u,dn,-S.bearingInRadians,Rn),ai=I.allowVerticalPlacement&&tt.placedOrientation===a.aA.vertical?Math.PI/2:0;for(let nr=0;nr<tt.numGlyphs;nr++)a.aH(Se,An,ai);$&&tt.associatedIconIndex>=0&&(Je[tt.associatedIconIndex]={shiftedAnchor:An,angle:ai})}else cl(tt.numGlyphs,Se)}if($){Ke.clear();const nt=I.icon.placedSymbolArray;for(let tt=0;tt<nt.length;tt++){const rt=nt.get(tt);if(rt.hidden)cl(rt.numGlyphs,Ke);else{const dt=Je[tt];if(dt)for(let st=0;st<rt.numGlyphs;st++)a.aH(Ke,dt.shiftedAnchor,dt.angle);else cl(rt.numGlyphs,Ke)}}I.icon.dynamicLayoutVertexBuffer.updateData(Ke)}I.text.dynamicLayoutVertexBuffer.updateData(Se)}function jp(I,u,p){return p.iconsInText&&u?"symbolTextAndIcon":I?"symbolSDF":"symbolIcon"}function xc(I,u,p,C,S,k,K,N,$,se,ue,ye,me){const Se=I.context,Ke=Se.gl,Je=I.transform,nt=N==="map",tt=$==="map",rt=N!=="viewport"&&p.layout.get("symbol-placement")!=="point",dt=nt&&!tt&&!rt,st=!p.layout.get("symbol-sort-key").isConstant();let ft=!1;const Ct=I.getDepthModeForSublayer(0,ri.ReadOnly),lt=p._unevaluatedLayout.hasValue("text-variable-anchor")||p._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ot=[],Ft=Je.getCircleRadiusCorrection();for(const zt of C){const Gt=u.getTile(zt),Qt=Gt.getBucket(p);if(!Qt)continue;const dn=S?Qt.text:Qt.icon;if(!dn||!dn.segments.get().length||!dn.hasVisibleVertices)continue;const Rn=dn.programConfigurations.get(p.id),An=S||Qt.sdfIcons,ai=S?Qt.textSizeData:Qt.iconSizeData,nr=tt||Je.pitch!==0,fo=I.useProgram(jp(An,S,Qt),Rn),Bo=a.az(ai,Je.zoom),po=I.style.map.terrain&&I.style.map.terrain.getTerrainData(zt);let kr,Dr,Ma,es,Ns=[0,0],Ko=null;if(S)Dr=Gt.glyphAtlasTexture,Ma=Ke.LINEAR,kr=Gt.glyphAtlasTexture.size,Qt.iconsInText&&(Ns=Gt.imageAtlasTexture.size,Ko=Gt.imageAtlasTexture,es=nr||I.options.rotating||I.options.zooming||ai.kind==="composite"||ai.kind==="camera"?Ke.LINEAR:Ke.NEAREST);else{const ts=p.layout.get("icon-size").constantOr(0)!==1||Qt.iconsNeedLinear;Dr=Gt.imageAtlasTexture,Ma=An||I.options.rotating||I.options.zooming||ts||nr?Ke.LINEAR:Ke.NEAREST,kr=Gt.imageAtlasTexture.size}const ks=a.aO(Gt,1,I.transform.zoom),Na=Ka(nt,I.transform,ks),fl=a.N();a.aC(fl,Na);const Dc=yA(tt,nt,I.transform,ks),Ou=a.aP(Je,Gt,k,K),iA=Je.getProjectionData({overscaledTileID:zt,applyGlobeMatrix:!me,applyTerrainMatrix:!0}),h0=lt&&Qt.hasTextData(),id=p.layout.get("icon-text-fit")!=="none"&&h0&&Qt.hasIconData();if(rt){const ts=I.style.map.terrain?(Kl,Yo)=>I.style.map.terrain.getElevation(zt,Kl,Yo):null,Sa=p.layout.get("text-rotation-alignment")==="map";$a(Qt,I,S,Na,fl,tt,se,Sa,zt.toUnwrapped(),Je.width,Je.height,Ou,ts)}const su=S&&lt||id,Gs=rt||su?Zc:tt?Na:I.transform.clipSpaceToPixelsMatrix,wa=An&&p.paint.get(S?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ua;ua=An?Qt.iconsInText?Tt(ai.kind,Bo,dt,tt,rt,su,I,Gs,Dc,Ou,kr,Ns,Ft):ih(ai.kind,Bo,dt,tt,rt,su,I,Gs,Dc,Ou,S,kr,0,Ft):Up(ai.kind,Bo,dt,tt,rt,su,I,Gs,Dc,Ou,S,kr,Ft);const au={program:fo,buffers:dn,uniformValues:ua,projectionData:iA,atlasTexture:Dr,atlasTextureIcon:Ko,atlasInterpolation:Ma,atlasInterpolationIcon:es,isSDF:An,hasHalo:wa};if(st&&Qt.canOverlap){ft=!0;const ts=dn.segments.get();for(const Sa of ts)Ot.push({segments:new a.aY([Sa]),sortKey:Sa.sortKey,state:au,terrainData:po})}else Ot.push({segments:dn.segments,sortKey:0,state:au,terrainData:po})}ft&&Ot.sort(((zt,Gt)=>zt.sortKey-Gt.sortKey));for(const zt of Ot){const Gt=zt.state;if(Se.activeTexture.set(Ke.TEXTURE0),Gt.atlasTexture.bind(Gt.atlasInterpolation,Ke.CLAMP_TO_EDGE),Gt.atlasTextureIcon&&(Se.activeTexture.set(Ke.TEXTURE1),Gt.atlasTextureIcon&&Gt.atlasTextureIcon.bind(Gt.atlasInterpolationIcon,Ke.CLAMP_TO_EDGE)),Gt.isSDF){const Qt=Gt.uniformValues;Gt.hasHalo&&(Qt.u_is_halo=1,EA(Gt.buffers,zt.segments,p,I,Gt.program,Ct,ue,ye,Qt,Gt.projectionData,zt.terrainData)),Qt.u_is_halo=0}EA(Gt.buffers,zt.segments,p,I,Gt.program,Ct,ue,ye,Gt.uniformValues,Gt.projectionData,zt.terrainData)}}function EA(I,u,p,C,S,k,K,N,$,se,ue){const ye=C.context;S.draw(ye,ye.gl.TRIANGLES,k,K,N,ei.backCCW,$,ue,se,p.id,I.layoutVertexBuffer,I.indexBuffer,u,p.paint,C.transform.zoom,I.programConfigurations.get(p.id),I.dynamicLayoutVertexBuffer,I.opacityVertexBuffer)}function Gd(I,u,p,C,S){const k=I.context,K=k.gl,N=ni.disabled,$=new qn([K.ONE,K.ONE],a.bq.transparent,[!0,!0,!0,!0]),se=u.getBucket(p);if(!se)return;const ue=C.key;let ye=p.heatmapFbos.get(ue);ye||(ye=so(k,u.tileSize,u.tileSize),p.heatmapFbos.set(ue,ye)),k.bindFramebuffer.set(ye.framebuffer),k.viewport.set([0,0,u.tileSize,u.tileSize]),k.clear({color:a.bq.transparent});const me=se.programConfigurations.get(p.id),Se=I.useProgram("heatmap",me,!S),Ke=I.transform.getProjectionData({overscaledTileID:u.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Je=I.style.map.terrain.getTerrainData(C);Se.draw(k,K.TRIANGLES,ri.disabled,N,$,ei.disabled,zh(u,I.transform.zoom,p.paint.get("heatmap-intensity"),1),Je,Ke,p.id,se.layoutVertexBuffer,se.indexBuffer,se.segments,p.paint,I.transform.zoom,me)}function sa(I,u,p,C,S){const k=I.context,K=k.gl,N=I.transform;k.setColorMode(I.colorModeForRenderPass());const $=Rr(k,u),se=p.key,ue=u.heatmapFbos.get(se);if(!ue)return;k.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,ue.colorAttachment.get()),k.activeTexture.set(K.TEXTURE1),$.bind(K.LINEAR,K.CLAMP_TO_EDGE);const ye=N.getProjectionData({overscaledTileID:p,applyTerrainMatrix:S,applyGlobeMatrix:!C});I.useProgram("heatmapTexture").draw(k,K.TRIANGLES,ri.disabled,ni.disabled,I.colorModeForRenderPass(),ei.disabled,Rp(I,u,0,1),null,ye,u.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments,u.paint,N.zoom),ue.destroy(),u.heatmapFbos.delete(se)}function so(I,u,p){var C,S;const k=I.gl,K=k.createTexture();k.bindTexture(k.TEXTURE_2D,K),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.LINEAR),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.LINEAR);const N=(C=I.HALF_FLOAT)!==null&&C!==void 0?C:k.UNSIGNED_BYTE,$=(S=I.RGBA16F)!==null&&S!==void 0?S:k.RGBA;k.texImage2D(k.TEXTURE_2D,0,$,u,p,0,k.RGBA,N,null);const se=I.createFramebuffer(u,p,!1,!1);return se.colorAttachment.set(K),se}function Rr(I,u){return u.colorRampTexture||(u.colorRampTexture=new a.T(I,u.colorRamp,I.gl.RGBA)),u.colorRampTexture}function ah(I,u,p,C,S,k,K,N){let $=256;if(S.stepInterpolant){const se=u.getSource().maxzoom,ue=K.canonical.z===se?Math.ceil(1<<I.transform.maxZoom-K.canonical.z):1;$=a.ao(a.cf(k.maxLineLength/a.a5*1024*ue),256,p.maxTextureSize)}return N.gradient=a.cg({expression:S.gradientExpression(),evaluationKey:"lineProgress",resolution:$,image:N.gradient||void 0,clips:k.lineClipsArray}),N.texture?N.texture.update(N.gradient):N.texture=new a.T(p,N.gradient,C.RGBA),N.version=S.gradientVersion,N.texture}function Hu(I,u,p,C,S){I.activeTexture.set(u.TEXTURE0),p.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),C.updatePaintBuffers(S)}function Os(I,u,p,C,S,k){(S||I.lineAtlas.dirty)&&(u.activeTexture.set(p.TEXTURE0),I.lineAtlas.bind(u)),C.updatePaintBuffers(k)}function Eu(I,u,p,C,S,k,K){const N=k.gradients[S.id];let $=N.texture;S.gradientVersion!==N.version&&($=ah(I,u,p,C,S,k,K,N)),p.activeTexture.set(C.TEXTURE0),$.bind(S.stepInterpolant?C.NEAREST:C.LINEAR,C.CLAMP_TO_EDGE)}function Rl(I,u,p,C,S,k,K,N,$){const se=k.gradients[S.id];let ue=se.texture;S.gradientVersion!==se.version&&(ue=ah(I,u,p,C,S,k,K,se)),p.activeTexture.set(C.TEXTURE0),ue.bind(S.stepInterpolant?C.NEAREST:C.LINEAR,C.CLAMP_TO_EDGE),p.activeTexture.set(C.TEXTURE1),I.lineAtlas.bind(p),N.updatePaintBuffers($)}function lh(I,u,p,C,S){if(!p||!C||!C.imageAtlas)return;const k=C.imageAtlas.patternPositions;let K=k[p.to.toString()],N=k[p.from.toString()];if(!K&&N&&(K=N),!N&&K&&(N=K),!K||!N){const $=S.getPaintProperty(u);K=k[$],N=k[$]}K&&N&&I.setConstantPatternPositions(K,N)}function Xc(I,u,p,C,S,k,K,N){const $=I.context.gl,se="fill-pattern",ue=p.paint.get(se),ye=ue&&ue.constantOr(1),me=p.getCrossfadeParameters();let Se,Ke,Je,nt,tt;const rt=I.transform,dt=p.paint.get("fill-translate"),st=p.paint.get("fill-translate-anchor");K?(Ke=ye&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Se=$.LINES):(Ke=ye?"fillPattern":"fill",Se=$.TRIANGLES);const ft=ue.constantOr(null);for(const Ct of C){const lt=u.getTile(Ct);if(ye&&!lt.patternsLoaded())continue;const Ot=lt.getBucket(p);if(!Ot)continue;const Ft=Ot.programConfigurations.get(p.id),zt=I.useProgram(Ke,Ft),Gt=I.style.map.terrain&&I.style.map.terrain.getTerrainData(Ct);ye&&(I.context.activeTexture.set($.TEXTURE0),lt.imageAtlasTexture.bind($.LINEAR,$.CLAMP_TO_EDGE),Ft.updatePaintBuffers(me)),lh(Ft,se,ft,lt,p);const Qt=rt.getProjectionData({overscaledTileID:Ct,applyGlobeMatrix:!N,applyTerrainMatrix:!0}),dn=a.aP(rt,lt,dt,st);if(K){nt=Ot.indexBuffer2,tt=Ot.segments2;const An=[$.drawingBufferWidth,$.drawingBufferHeight];Je=Ke==="fillOutlinePattern"&&ye?H1(I,me,lt,An,dn):If(An,dn)}else nt=Ot.indexBuffer,tt=Ot.segments,Je=ye?zd(I,me,lt,dn):{u_fill_translate:dn};const Rn=I.stencilModeForClipping(Ct);zt.draw(I.context,Se,S,Rn,k,ei.backCCW,Je,Gt,Qt,p.id,Ot.layoutVertexBuffer,nt,tt,p.paint,I.transform.zoom,Ft)}}function qe(I,u,p,C,S,k,K,N){const $=I.context,se=$.gl,ue="fill-extrusion-pattern",ye=p.paint.get(ue),me=ye.constantOr(1),Se=p.getCrossfadeParameters(),Ke=p.paint.get("fill-extrusion-opacity"),Je=ye.constantOr(null),nt=I.transform;for(const tt of C){const rt=u.getTile(tt),dt=rt.getBucket(p);if(!dt)continue;const st=I.style.map.terrain&&I.style.map.terrain.getTerrainData(tt),ft=dt.programConfigurations.get(p.id),Ct=I.useProgram(me?"fillExtrusionPattern":"fillExtrusion",ft);me&&(I.context.activeTexture.set(se.TEXTURE0),rt.imageAtlasTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE),ft.updatePaintBuffers(Se));const lt=nt.getProjectionData({overscaledTileID:tt,applyGlobeMatrix:!N,applyTerrainMatrix:!0});lh(ft,ue,Je,rt,p);const Ot=a.aP(nt,rt,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),Ft=p.paint.get("fill-extrusion-vertical-gradient"),zt=me?Tp(I,Ft,Ke,Ot,tt,Se,rt):Ip(I,Ft,Ke,Ot);Ct.draw($,$.gl.TRIANGLES,S,k,K,ei.backCCW,zt,st,lt,p.id,dt.layoutVertexBuffer,dt.indexBuffer,dt.segments,p.paint,I.transform.zoom,ft,I.style.map.terrain&&dt.centroidVertexBuffer)}}function tu(I,u,p,C,S,k,K,N,$){var se;const ue=I.style.projection,ye=I.context,me=I.transform,Se=ye.gl,Ke=[`#define NUM_ILLUMINATION_SOURCES ${p.paint.get("hillshade-highlight-color").values.length}`],Je=I.useProgram("hillshade",null,!1,Ke),nt=!I.options.moving;for(const tt of C){const rt=u.getTile(tt),dt=rt.fbo;if(!dt)continue;const st=ue.getMeshFromTileID(ye,tt.canonical,N,!0,"raster"),ft=(se=I.style.map.terrain)===null||se===void 0?void 0:se.getTerrainData(tt);ye.activeTexture.set(Se.TEXTURE0),Se.bindTexture(Se.TEXTURE_2D,dt.colorAttachment.get());const Ct=me.getProjectionData({overscaledTileID:tt,aligned:nt,applyGlobeMatrix:!$,applyTerrainMatrix:!0});Je.draw(ye,Se.TRIANGLES,k,S[tt.overscaledZ],K,ei.backCCW,Tf(I,rt,p),ft,Ct,p.id,st.vertexBuffer,st.indexBuffer,st.segments)}}function Mc(I,u,p,C,S,k,K,N,$){var se;const ue=I.style.projection,ye=I.context,me=I.transform,Se=ye.gl,Ke=I.useProgram("colorRelief"),Je=!I.options.moving;let nt=!0,tt=0;for(const rt of C){const dt=u.getTile(rt),st=dt.dem;if(nt){const zt=Se.getParameter(Se.MAX_TEXTURE_SIZE),{elevationTexture:Gt,colorTexture:Qt}=p.getColorRampTextures(ye,zt,st.getUnpackVector());ye.activeTexture.set(Se.TEXTURE1),Gt.bind(Se.NEAREST,Se.CLAMP_TO_EDGE),ye.activeTexture.set(Se.TEXTURE4),Qt.bind(Se.LINEAR,Se.CLAMP_TO_EDGE),nt=!1,tt=Gt.size[0]}if(!st||!st.data)continue;const ft=st.stride,Ct=st.getPixels();if(ye.activeTexture.set(Se.TEXTURE0),ye.pixelStoreUnpackPremultiplyAlpha.set(!1),dt.demTexture=dt.demTexture||I.getTileTexture(ft),dt.demTexture){const zt=dt.demTexture;zt.update(Ct,{premultiply:!1}),zt.bind(Se.LINEAR,Se.CLAMP_TO_EDGE)}else dt.demTexture=new a.T(ye,Ct,Se.RGBA,{premultiply:!1}),dt.demTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE);const lt=ue.getMeshFromTileID(ye,rt.canonical,N,!0,"raster"),Ot=(se=I.style.map.terrain)===null||se===void 0?void 0:se.getTerrainData(rt),Ft=me.getProjectionData({overscaledTileID:rt,aligned:Je,applyGlobeMatrix:!$,applyTerrainMatrix:!0});Ke.draw(ye,Se.TRIANGLES,k,S[rt.overscaledZ],K,ei.backCCW,Z1(p,dt.dem,tt),Ot,Ft,p.id,lt.vertexBuffer,lt.indexBuffer,lt.segments)}}const xa=[new a.P(0,0),new a.P(a.a5,0),new a.P(a.a5,a.a5),new a.P(0,a.a5)];function ur(I,u,p,C,S,k,K,N,$=!1,se=!1){const ue=C[C.length-1].overscaledZ,ye=I.context,me=ye.gl,Se=I.useProgram("raster"),Ke=I.transform,Je=I.style.projection,nt=I.colorModeForRenderPass(),tt=!I.options.moving,rt=p.paint.get("raster-opacity"),dt=p.paint.get("raster-resampling"),st=p.paint.get("raster-fade-duration"),ft=!!I.style.map.terrain;for(const Ct of C){const lt=I.getDepthModeForSublayer(Ct.overscaledZ-ue,rt===1?ri.ReadWrite:ri.ReadOnly,me.LESS),Ot=u.getTile(Ct),Ft=dt==="nearest"?me.NEAREST:me.LINEAR;ye.activeTexture.set(me.TEXTURE0),Ot.texture.bind(Ft,me.CLAMP_TO_EDGE,me.LINEAR_MIPMAP_NEAREST),ye.activeTexture.set(me.TEXTURE1);const{parentTile:zt,parentScaleBy:Gt,parentTopLeft:Qt,fadeValues:dn}=BA(Ot,u,st,ft);Ot.fadeOpacity=dn.tileOpacity,zt?(zt.fadeOpacity=dn.parentTileOpacity,zt.texture.bind(Ft,me.CLAMP_TO_EDGE,me.LINEAR_MIPMAP_NEAREST)):Ot.texture.bind(Ft,me.CLAMP_TO_EDGE,me.LINEAR_MIPMAP_NEAREST),Ot.texture.useMipmap&&ye.extTextureFilterAnisotropic&&I.transform.pitch>20&&me.texParameterf(me.TEXTURE_2D,ye.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ye.extTextureFilterAnisotropicMax);const Rn=I.style.map.terrain&&I.style.map.terrain.getTerrainData(Ct),An=Ke.getProjectionData({overscaledTileID:Ct,aligned:tt,applyGlobeMatrix:!se,applyTerrainMatrix:!0}),ai=n0(Qt,Gt,dn.fadeMix,p,N),nr=Je.getMeshFromTileID(ye,Ct.canonical,k,K,"raster");Se.draw(ye,me.TRIANGLES,lt,S?S[Ct.overscaledZ]:ni.disabled,nt,$?ei.frontCCW:ei.backCCW,ai,Rn,An,p.id,nr.vertexBuffer,nr.indexBuffer,nr.segments)}}function BA(I,u,p,C){const S={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(p===0||C)return S;if(I.fadingParentID){const k=u.getLoadedTile(I.fadingParentID);if(!k)return S;const K=Math.pow(2,k.tileID.overscaledZ-I.tileID.overscaledZ),N=[I.tileID.canonical.x*K%1,I.tileID.canonical.y*K%1],$=(function(se,ue,ye){const me=U(),Se=(me-ue.timeAdded)/ye,Ke=se.fadingDirection===vt.Incoming,Je=a.ao((me-se.timeAdded)/ye,0,1),nt=a.ao(1-Se,0,1),tt=Ke?Je:nt;return{tileOpacity:tt,parentTileOpacity:Ke?nt:Je,fadeMix:{opacity:1,mix:1-tt}}})(I,k,p);return{parentTile:k,parentScaleBy:K,parentTopLeft:N,fadeValues:$}}if(I.selfFading){const k=(function(K,N){const $=(U()-K.timeAdded)/N,se=a.ao($,0,1);return{tileOpacity:se,fadeMix:{opacity:se,mix:0}}})(I,p);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:k}}return S}const uh=new a.bq(1,0,0,1),OA=new a.bq(0,1,0,1),IA=new a.bq(0,0,1,1),a0=new a.bq(1,0,1,1),wc=new a.bq(0,1,1,1);function Df(I,u,p,C){aa(I,0,u+p/2,I.transform.width,p,C)}function ch(I,u,p,C){aa(I,u-p/2,0,p,I.transform.height,C)}function aa(I,u,p,C,S,k){const K=I.context,N=K.gl;N.enable(N.SCISSOR_TEST),N.scissor(u*I.pixelRatio,p*I.pixelRatio,C*I.pixelRatio,S*I.pixelRatio),K.clear({color:k}),N.disable(N.SCISSOR_TEST)}function Zu(I,u,p){const C=I.context,S=C.gl,k=I.useProgram("debug"),K=ri.disabled,N=ni.disabled,$=I.colorModeForRenderPass(),se="$debug",ue=I.style.map.terrain&&I.style.map.terrain.getTerrainData(p);C.activeTexture.set(S.TEXTURE0);const ye=u.getTileByID(p.key).latestRawTileData,me=Math.floor((ye&&ye.byteLength||0)/1024),Se=u.getTile(p).tileSize,Ke=512/Math.min(Se,512)*(p.overscaledZ/I.transform.zoom)*.5;let Je=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(Je+=` => ${p.overscaledZ}`),(function(tt,rt){tt.initDebugOverlayCanvas();const dt=tt.debugOverlayCanvas,st=tt.context.gl,ft=tt.debugOverlayCanvas.getContext("2d");ft.clearRect(0,0,dt.width,dt.height),ft.shadowColor="white",ft.shadowBlur=2,ft.lineWidth=1.5,ft.strokeStyle="white",ft.textBaseline="top",ft.font="bold 36px Open Sans, sans-serif",ft.fillText(rt,5,5),ft.strokeText(rt,5,5),tt.debugOverlayTexture.update(dt),tt.debugOverlayTexture.bind(st.LINEAR,st.CLAMP_TO_EDGE)})(I,`${Je} ${me}kB`);const nt=I.transform.getProjectionData({overscaledTileID:p,applyGlobeMatrix:!0,applyTerrainMatrix:!0});k.draw(C,S.TRIANGLES,K,N,qn.alphaBlended,ei.disabled,Dp(a.bq.transparent,Ke),null,nt,se,I.debugBuffer,I.quadTriangleIndexBuffer,I.debugSegments),k.draw(C,S.LINE_STRIP,K,N,$,ei.disabled,Dp(a.bq.red),ue,nt,se,I.debugBuffer,I.tileBorderIndexBuffer,I.debugSegments)}function l0(I,u,p,C){const{isRenderingGlobe:S}=C,k=I.context,K=k.gl,N=I.transform,$=I.colorModeForRenderPass(),se=I.getDepthModeFor3D(),ue=I.useProgram("terrain");k.bindFramebuffer.set(null),k.viewport.set([0,0,I.width,I.height]);for(const ye of p){const me=u.getTerrainMesh(ye.tileID),Se=I.renderToTexture.getTexture(ye),Ke=u.getTerrainData(ye.tileID);k.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,Se.texture);const Je=u.getMeshFrameDelta(N.zoom),nt=N.calculateFogMatrix(ye.tileID.toUnwrapped()),tt=$1(Je,nt,I.style.sky,N.pitch,S),rt=N.getProjectionData({overscaledTileID:ye.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ue.draw(k,K.TRIANGLES,se,ni.disabled,$,ei.backCCW,tt,Ke,rt,"terrain",me.vertexBuffer,me.indexBuffer,me.segments)}}function Dg(I,u){if(!u.mesh){const p=new a.aX;p.emplaceBack(-1,-1),p.emplaceBack(1,-1),p.emplaceBack(1,1),p.emplaceBack(-1,1);const C=new a.aZ;C.emplaceBack(0,1,2),C.emplaceBack(0,2,3),u.mesh=new to(I.createVertexBuffer(p,$s.members),I.createIndexBuffer(C),a.aY.simpleSegment(0,0,p.length,C.length))}return u.mesh}class ey{constructor(u,p){this.context=new js(u),this.transform=p,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.as(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=oo.maxOverzooming+oo.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Jo}resize(u,p,C){if(this.width=Math.floor(u*C),this.height=Math.floor(p*C),this.pixelRatio=C,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const S of this.style._order)this.style._layers[S].resize()}setup(){const u=this.context,p=new a.aX;p.emplaceBack(0,0),p.emplaceBack(a.a5,0),p.emplaceBack(0,a.a5),p.emplaceBack(a.a5,a.a5),this.tileExtentBuffer=u.createVertexBuffer(p,$s.members),this.tileExtentSegments=a.aY.simpleSegment(0,0,4,2);const C=new a.aX;C.emplaceBack(0,0),C.emplaceBack(a.a5,0),C.emplaceBack(0,a.a5),C.emplaceBack(a.a5,a.a5),this.debugBuffer=u.createVertexBuffer(C,$s.members),this.debugSegments=a.aY.simpleSegment(0,0,4,5);const S=new a.ci;S.emplaceBack(0,0,0,0),S.emplaceBack(a.a5,0,a.a5,0),S.emplaceBack(0,a.a5,0,a.a5),S.emplaceBack(a.a5,a.a5,a.a5,a.a5),this.rasterBoundsBuffer=u.createVertexBuffer(S,Jm.members),this.rasterBoundsSegments=a.aY.simpleSegment(0,0,4,2);const k=new a.aX;k.emplaceBack(0,0),k.emplaceBack(a.a5,0),k.emplaceBack(0,a.a5),k.emplaceBack(a.a5,a.a5),this.rasterBoundsBufferPosOnly=u.createVertexBuffer(k,$s.members),this.rasterBoundsSegmentsPosOnly=a.aY.simpleSegment(0,0,4,5);const K=new a.aX;K.emplaceBack(0,0),K.emplaceBack(1,0),K.emplaceBack(0,1),K.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(K,$s.members),this.viewportSegments=a.aY.simpleSegment(0,0,4,2);const N=new a.cj;N.emplaceBack(0),N.emplaceBack(1),N.emplaceBack(3),N.emplaceBack(2),N.emplaceBack(0),this.tileBorderIndexBuffer=u.createIndexBuffer(N);const $=new a.aZ;$.emplaceBack(1,0,2),$.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=u.createIndexBuffer($);const se=this.context.gl;this.stencilClearMode=new ni({func:se.ALWAYS,mask:0},0,255,se.ZERO,se.ZERO,se.ZERO),this.tileExtentMesh=new to(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const u=this.context,p=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const C=a.N();a.c8(C,0,this.width,this.height,0,0,1),a.Q(C,C,[p.drawingBufferWidth,p.drawingBufferHeight,0]);const S={mainMatrix:C,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:C};this.useProgram("clippingMask",null,!0).draw(u,p.TRIANGLES,ri.disabled,this.stencilClearMode,qn.disabled,ei.disabled,null,null,S,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(u,p,C){if(this.currentStencilSource===u.source||!u.isTileClipped()||!p||!p.length)return;this.currentStencilSource=u.source,this.nextStencilID+p.length>256&&this.clearStencil();const S=this.context;S.setColorMode(qn.disabled),S.setDepthMode(ri.disabled);const k={};for(const K of p)k[K.key]=this.nextStencilID++;this._renderTileMasks(k,p,C,!0),this._renderTileMasks(k,p,C,!1),this._tileClippingMaskIDs=k}_renderTileMasks(u,p,C,S){const k=this.context,K=k.gl,N=this.style.projection,$=this.transform,se=this.useProgram("clippingMask");for(const ue of p){const ye=u[ue.key],me=this.style.map.terrain&&this.style.map.terrain.getTerrainData(ue),Se=N.getMeshFromTileID(this.context,ue.canonical,S,!0,"stencil"),Ke=$.getProjectionData({overscaledTileID:ue,applyGlobeMatrix:!C,applyTerrainMatrix:!0});se.draw(k,K.TRIANGLES,ri.disabled,new ni({func:K.ALWAYS,mask:0},ye,255,K.KEEP,K.KEEP,K.REPLACE),qn.disabled,C?ei.disabled:ei.backCCW,null,me,Ke,"$clipping",Se.vertexBuffer,Se.indexBuffer,Se.segments)}}_renderTilesDepthBuffer(){const u=this.context,p=u.gl,C=this.style.projection,S=this.transform,k=this.useProgram("depth"),K=this.getDepthModeFor3D(),N=Ri(S,{tileSize:S.tileSize});for(const $ of N){const se=this.style.map.terrain&&this.style.map.terrain.getTerrainData($),ue=C.getMeshFromTileID(this.context,$.canonical,!0,!0,"raster"),ye=S.getProjectionData({overscaledTileID:$,applyGlobeMatrix:!0,applyTerrainMatrix:!0});k.draw(u,p.TRIANGLES,K,ni.disabled,qn.disabled,ei.backCCW,null,se,ye,"$clipping",ue.vertexBuffer,ue.indexBuffer,ue.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,p=this.context.gl;return new ni({func:p.NOTEQUAL,mask:255},u,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(u){const p=this.context.gl;return new ni({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,p.KEEP,p.KEEP,p.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(u){const p=this.context.gl,C=u.sort(((K,N)=>N.overscaledZ-K.overscaledZ)),S=C[C.length-1].overscaledZ,k=C[0].overscaledZ-S+1;if(k>1){this.currentStencilSource=void 0,this.nextStencilID+k>256&&this.clearStencil();const K={};for(let N=0;N<k;N++)K[N+S]=new ni({func:p.GEQUAL,mask:255},N+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=k,[K,C]}return[{[S]:ni.disabled},C]}stencilConfigForOverlapTwoPass(u){const p=this.context.gl,C=u.sort(((K,N)=>N.overscaledZ-K.overscaledZ)),S=C[C.length-1].overscaledZ,k=C[0].overscaledZ-S+1;if(this.clearStencil(),k>1){const K={},N={};for(let $=0;$<k;$++)K[$+S]=new ni({func:p.GREATER,mask:255},k+1+$,255,p.KEEP,p.KEEP,p.REPLACE),N[$+S]=new ni({func:p.GREATER,mask:255},1+$,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID=2*k+1,[K,N,C]}return this.nextStencilID=3,[{[S]:new ni({func:p.GREATER,mask:255},2,255,p.KEEP,p.KEEP,p.REPLACE)},{[S]:new ni({func:p.GREATER,mask:255},1,255,p.KEEP,p.KEEP,p.REPLACE)},C]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new qn([u.CONSTANT_COLOR,u.ONE],new a.bq(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?qn.unblended:qn.alphaBlended}getDepthModeForSublayer(u,p,C){if(!this.opaquePassEnabledForLayer())return ri.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new ri(C||this.context.gl.LEQUAL,p,[S,S])}getDepthModeFor3D(){return new ri(this.context.gl.LEQUAL,ri.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,p){var C,S;this.style=u,this.options=p,this.lineAtlas=u.lineAtlas,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(U()),this.imageManager.beginFrame();const k=this.style._order,K=this.style.tileManagers,N={},$={},se={},ue={isRenderingToTexture:!1,isRenderingGlobe:((C=u.projection)===null||C===void 0?void 0:C.transitionState)>0};for(const me in K){const Se=K[me];Se.used&&Se.prepare(this.context),N[me]=Se.getVisibleCoordinates(!1),$[me]=N[me].slice().reverse(),se[me]=Se.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let me=0;me<k.length;me++)if(this.style._layers[k[me]].is3D()){this.opaquePassCutoff=me;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const me of k){const Se=this.style._layers[me];if(!Se.hasOffscreenPass()||Se.isHidden(this.transform.zoom))continue;const Ke=$[Se.source];(Se.type==="custom"||Ke.length)&&this.renderLayer(this,K[Se.source],Se,Ke,ue)}if((S=this.style.projection)===null||S===void 0||S.updateGPUdependent({context:this.context,useProgram:me=>this.useProgram(me)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?a.bq.black:a.bq.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(me,Se){const Ke=me.context,Je=Ke.gl,nt=((Ct,lt,Ot)=>{const Ft=Math.cos(lt.rollInRadians),zt=Math.sin(lt.rollInRadians),Gt=bn(lt),Qt=lt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ct.properties.get("sky-color"),u_horizon_color:Ct.properties.get("horizon-color"),u_horizon:[(lt.width/2-Gt*zt)*Ot,(lt.height/2+Gt*Ft)*Ot],u_horizon_normal:[-zt,Ft],u_sky_horizon_blend:Ct.properties.get("sky-horizon-blend")*lt.height/2*Ot,u_sky_blend:Qt}})(Se,me.style.map.transform,me.pixelRatio),tt=new ri(Je.LEQUAL,ri.ReadWrite,[0,1]),rt=ni.disabled,dt=me.colorModeForRenderPass(),st=me.useProgram("sky"),ft=Dg(Ke,Se);st.draw(Ke,Je.TRIANGLES,tt,rt,dt,ei.disabled,nt,null,void 0,"sky",ft.vertexBuffer,ft.indexBuffer,ft.segments)})(this,this.style.sky),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(u._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=k.length-1;this.currentLayer>=0;this.currentLayer--){const me=this.style._layers[k[this.currentLayer]],Se=K[me.source],Ke=N[me.source];this._renderTileClippingMasks(me,Ke,!1),this.renderLayer(this,Se,me,Ke,ue)}this.renderPass="translucent";let ye=!1;for(this.currentLayer=0;this.currentLayer<k.length;this.currentLayer++){const me=this.style._layers[k[this.currentLayer]],Se=K[me.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(me,ue))continue;this.opaquePassEnabledForLayer()||ye||(ye=!0,ue.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Ke=(me.type==="symbol"?se:$)[me.source];this._renderTileClippingMasks(me,N[me.source],!!this.renderToTexture),this.renderLayer(this,Se,me,Ke,ue)}if(ue.isRenderingGlobe&&(function(me,Se,Ke){const Je=me.context,nt=Je.gl,tt=me.useProgram("atmosphere"),rt=new ri(nt.LEQUAL,ri.ReadOnly,[0,1]),dt=me.transform,st=(function(Qt,dn){const Rn=Qt.properties.get("position"),An=[-Rn.x,-Rn.y,-Rn.z],ai=a.as(new Float64Array(16));return Qt.properties.get("anchor")==="map"&&(a.bh(ai,ai,dn.rollInRadians),a.bi(ai,ai,-dn.pitchInRadians),a.bh(ai,ai,dn.bearingInRadians),a.bi(ai,ai,dn.center.lat*Math.PI/180),a.bK(ai,ai,-dn.center.lng*Math.PI/180)),a.ch(An,An,ai),An})(Ke,me.transform),ft=dt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ct=Se.properties.get("atmosphere-blend")*ft.projectionTransition;if(Ct===0)return;const lt=vA(dt.worldSize,dt.center.lat),Ot=dt.inverseProjectionMatrix,Ft=new Float64Array(4);Ft[3]=1,a.aI(Ft,Ft,dt.modelViewProjectionMatrix),Ft[0]/=Ft[3],Ft[1]/=Ft[3],Ft[2]/=Ft[3],Ft[3]=1,a.aI(Ft,Ft,Ot),Ft[0]/=Ft[3],Ft[1]/=Ft[3],Ft[2]/=Ft[3],Ft[3]=1;const zt=((Qt,dn,Rn,An,ai)=>({u_sun_pos:Qt,u_atmosphere_blend:dn,u_globe_position:Rn,u_globe_radius:An,u_inv_proj_matrix:ai}))(st,Ct,[Ft[0],Ft[1],Ft[2]],lt,Ot),Gt=Dg(Je,Se);tt.draw(Je,nt.TRIANGLES,rt,ni.disabled,qn.alphaBlended,ei.disabled,zt,null,null,"atmosphere",Gt.vertexBuffer,Gt.indexBuffer,Gt.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const me=(function(Se,Ke){let Je=null;const nt=Object.values(Se._layers).flatMap((st=>st.source&&!st.isHidden(Ke)?[Se.tileManagers[st.source]]:[])),tt=nt.filter((st=>st.getSource().type==="vector")),rt=nt.filter((st=>st.getSource().type!=="vector")),dt=st=>{(!Je||Je.getSource().maxzoom<st.getSource().maxzoom)&&(Je=st)};return tt.forEach((st=>dt(st))),Je||rt.forEach((st=>dt(st))),Je})(this.style,this.transform.zoom);me&&(function(Se,Ke,Je){for(let nt=0;nt<Je.length;nt++)Zu(Se,Ke,Je[nt])})(this,me,me.getVisibleCoordinates())}this.options.showPadding&&(function(me){const Se=me.transform.padding;Df(me,me.transform.height-(Se.top||0),3,uh),Df(me,Se.bottom||0,3,OA),ch(me,Se.left||0,3,IA),ch(me,me.transform.width-(Se.right||0),3,a0);const Ke=me.transform.centerPoint;(function(Je,nt,tt,rt){aa(Je,nt-1,tt-10,2,20,rt),aa(Je,nt-10,tt-1,20,2,rt)})(me,Ke.x,me.transform.height-Ke.y,wc)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(u){if(!this.style||!this.style.map||!this.style.map.terrain)return;const p=this.terrainFacilitator.matrix,C=this.transform.modelViewProjectionMatrix;let S=this.terrainFacilitator.dirty;S||(S=u?!a.ck(p,C):!a.cl(p,C)),S||(S=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),S&&(a.cm(p,C),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(k,K){const N=k.context,$=N.gl,se=k.transform,ue=qn.unblended,ye=new ri($.LEQUAL,ri.ReadWrite,[0,1]),me=K.tileManager.getRenderableTiles(),Se=k.useProgram("terrainDepth");N.bindFramebuffer.set(K.getFramebuffer("depth").framebuffer),N.viewport.set([0,0,k.width/devicePixelRatio,k.height/devicePixelRatio]),N.clear({color:a.bq.transparent,depth:1});for(const Ke of me){const Je=K.getTerrainMesh(Ke.tileID),nt=K.getTerrainData(Ke.tileID),tt=se.getProjectionData({overscaledTileID:Ke.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),rt={u_ele_delta:K.getMeshFrameDelta(se.zoom)};Se.draw(N,$.TRIANGLES,ye,ni.disabled,ue,ei.backCCW,rt,nt,tt,"terrain",Je.vertexBuffer,Je.indexBuffer,Je.segments)}N.bindFramebuffer.set(null),N.viewport.set([0,0,k.width,k.height])})(this,this.style.map.terrain),(function(k,K){const N=k.context,$=N.gl,se=k.transform,ue=qn.unblended,ye=new ri($.LEQUAL,ri.ReadWrite,[0,1]),me=K.getCoordsTexture(),Se=K.tileManager.getRenderableTiles(),Ke=k.useProgram("terrainCoords");N.bindFramebuffer.set(K.getFramebuffer("coords").framebuffer),N.viewport.set([0,0,k.width/devicePixelRatio,k.height/devicePixelRatio]),N.clear({color:a.bq.transparent,depth:1}),K.coordsIndex=[];for(const Je of Se){const nt=K.getTerrainMesh(Je.tileID),tt=K.getTerrainData(Je.tileID);N.activeTexture.set($.TEXTURE0),$.bindTexture($.TEXTURE_2D,me.texture);const rt={u_terrain_coords_id:(255-K.coordsIndex.length)/255,u_texture:0,u_ele_delta:K.getMeshFrameDelta(se.zoom)},dt=se.getProjectionData({overscaledTileID:Je.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Ke.draw(N,$.TRIANGLES,ye,ni.disabled,ue,ei.backCCW,rt,tt,dt,"terrain",nt.vertexBuffer,nt.indexBuffer,nt.segments),K.coordsIndex.push(Je.tileID.key)}N.bindFramebuffer.set(null),N.viewport.set([0,0,k.width,k.height])})(this,this.style.map.terrain))}renderLayer(u,p,C,S,k){C.isHidden(this.transform.zoom)||(C.type==="background"||C.type==="custom"||(S||[]).length)&&(this.id=C.id,a.cn(C)?(function(K,N,$,se,ue,ye){if(K.renderPass!=="translucent")return;const{isRenderingToTexture:me}=ye,Se=ni.disabled,Ke=K.colorModeForRenderPass();($._unevaluatedLayout.hasValue("text-variable-anchor")||$._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(Je,nt,tt,rt,dt,st,ft,Ct,lt){const Ot=nt.transform,Ft=nt.style.map.terrain,zt=dt==="map",Gt=st==="map";for(const Qt of Je){const dn=rt.getTile(Qt),Rn=dn.getBucket(tt);if(!Rn||!Rn.text||!Rn.text.segments.get().length)continue;const An=a.az(Rn.textSizeData,Ot.zoom),ai=a.aO(dn,1,nt.transform.zoom),nr=Ka(zt,nt.transform,ai),fo=tt.layout.get("icon-text-fit")!=="none"&&Rn.hasIconData();if(An){const Bo=Math.pow(2,Ot.zoom-dn.tileID.overscaledZ),po=Ft?(kr,Dr)=>Ft.getElevation(Qt,kr,Dr):null;$u(Rn,zt,Gt,lt,Ot,nr,Bo,An,fo,a.aP(Ot,dn,ft,Ct),Qt.toUnwrapped(),po)}}})(se,K,$,N,$.layout.get("text-rotation-alignment"),$.layout.get("text-pitch-alignment"),$.paint.get("text-translate"),$.paint.get("text-translate-anchor"),ue),$.paint.get("icon-opacity").constantOr(1)!==0&&xc(K,N,$,se,!1,$.paint.get("icon-translate"),$.paint.get("icon-translate-anchor"),$.layout.get("icon-rotation-alignment"),$.layout.get("icon-pitch-alignment"),$.layout.get("icon-keep-upright"),Se,Ke,me),$.paint.get("text-opacity").constantOr(1)!==0&&xc(K,N,$,se,!0,$.paint.get("text-translate"),$.paint.get("text-translate-anchor"),$.layout.get("text-rotation-alignment"),$.layout.get("text-pitch-alignment"),$.layout.get("text-keep-upright"),Se,Ke,me),N.map.showCollisionBoxes&&(Ja(K,N,$,se,!0),Ja(K,N,$,se,!1))})(u,p,C,S,this.style.placement.variableOffsets,k):a.co(C)?(function(K,N,$,se,ue){if(K.renderPass!=="translucent")return;const{isRenderingToTexture:ye}=ue,me=$.paint.get("circle-opacity"),Se=$.paint.get("circle-stroke-width"),Ke=$.paint.get("circle-stroke-opacity"),Je=!$.layout.get("circle-sort-key").isConstant();if(me.constantOr(1)===0&&(Se.constantOr(1)===0||Ke.constantOr(1)===0))return;const nt=K.context,tt=nt.gl,rt=K.transform,dt=K.getDepthModeForSublayer(0,ri.ReadOnly),st=ni.disabled,ft=K.colorModeForRenderPass(),Ct=[],lt=rt.getCircleRadiusCorrection();for(let Ot=0;Ot<se.length;Ot++){const Ft=se[Ot],zt=N.getTile(Ft),Gt=zt.getBucket($);if(!Gt)continue;const Qt=$.paint.get("circle-translate"),dn=$.paint.get("circle-translate-anchor"),Rn=a.aP(rt,zt,Qt,dn),An=Gt.programConfigurations.get($.id),ai=K.useProgram("circle",An),nr=Gt.layoutVertexBuffer,fo=Gt.indexBuffer,Bo=K.style.map.terrain&&K.style.map.terrain.getTerrainData(Ft),po={programConfiguration:An,program:ai,layoutVertexBuffer:nr,indexBuffer:fo,uniformValues:kp(K,zt,$,Rn,lt),terrainData:Bo,projectionData:rt.getProjectionData({overscaledTileID:Ft,applyGlobeMatrix:!ye,applyTerrainMatrix:!0})};if(Je){const kr=Gt.segments.get();for(const Dr of kr)Ct.push({segments:new a.aY([Dr]),sortKey:Dr.sortKey,state:po})}else Ct.push({segments:Gt.segments,sortKey:0,state:po})}Je&&Ct.sort(((Ot,Ft)=>Ot.sortKey-Ft.sortKey));for(const Ot of Ct){const{programConfiguration:Ft,program:zt,layoutVertexBuffer:Gt,indexBuffer:Qt,uniformValues:dn,terrainData:Rn,projectionData:An}=Ot.state;zt.draw(nt,tt.TRIANGLES,dt,st,ft,ei.backCCW,dn,Rn,An,$.id,Gt,Qt,Ot.segments,$.paint,K.transform.zoom,Ft)}})(u,p,C,S,k):a.cp(C)?(function(K,N,$,se,ue){if($.paint.get("heatmap-opacity")===0)return;const ye=K.context,{isRenderingToTexture:me,isRenderingGlobe:Se}=ue;if(K.style.map.terrain){for(const Ke of se){const Je=N.getTile(Ke);N.hasRenderableParent(Ke)||(K.renderPass==="offscreen"?Gd(K,Je,$,Ke,Se):K.renderPass==="translucent"&&sa(K,$,Ke,me,Se))}ye.viewport.set([0,0,K.width,K.height])}else K.renderPass==="offscreen"?(function(Ke,Je,nt,tt){const rt=Ke.context,dt=rt.gl,st=Ke.transform,ft=ni.disabled,Ct=new qn([dt.ONE,dt.ONE],a.bq.transparent,[!0,!0,!0,!0]);(function(lt,Ot,Ft){const zt=lt.gl;lt.activeTexture.set(zt.TEXTURE1),lt.viewport.set([0,0,Ot.width/4,Ot.height/4]);let Gt=Ft.heatmapFbos.get(a.ce);Gt?(zt.bindTexture(zt.TEXTURE_2D,Gt.colorAttachment.get()),lt.bindFramebuffer.set(Gt.framebuffer)):(Gt=so(lt,Ot.width/4,Ot.height/4),Ft.heatmapFbos.set(a.ce,Gt))})(rt,Ke,nt),rt.clear({color:a.bq.transparent});for(let lt=0;lt<tt.length;lt++){const Ot=tt[lt];if(Je.hasRenderableParent(Ot))continue;const Ft=Je.getTile(Ot),zt=Ft.getBucket(nt);if(!zt)continue;const Gt=zt.programConfigurations.get(nt.id),Qt=Ke.useProgram("heatmap",Gt),dn=st.getProjectionData({overscaledTileID:Ot,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Rn=st.getCircleRadiusCorrection();Qt.draw(rt,dt.TRIANGLES,ri.disabled,ft,Ct,ei.backCCW,zh(Ft,st.zoom,nt.paint.get("heatmap-intensity"),Rn),null,dn,nt.id,zt.layoutVertexBuffer,zt.indexBuffer,zt.segments,nt.paint,st.zoom,Gt)}rt.viewport.set([0,0,Ke.width,Ke.height])})(K,N,$,se):K.renderPass==="translucent"&&(function(Ke,Je){const nt=Ke.context,tt=nt.gl;nt.setColorMode(Ke.colorModeForRenderPass());const rt=Je.heatmapFbos.get(a.ce);rt&&(nt.activeTexture.set(tt.TEXTURE0),tt.bindTexture(tt.TEXTURE_2D,rt.colorAttachment.get()),nt.activeTexture.set(tt.TEXTURE1),Rr(nt,Je).bind(tt.LINEAR,tt.CLAMP_TO_EDGE),Ke.useProgram("heatmapTexture").draw(nt,tt.TRIANGLES,ri.disabled,ni.disabled,Ke.colorModeForRenderPass(),ei.disabled,Rp(Ke,Je,0,1),null,null,Je.id,Ke.viewportBuffer,Ke.quadTriangleIndexBuffer,Ke.viewportSegments,Je.paint,Ke.transform.zoom))})(K,$)})(u,p,C,S,k):a.cq(C)?(function(K,N,$,se,ue){if(K.renderPass!=="translucent")return;const{isRenderingToTexture:ye}=ue,me=$.paint.get("line-opacity"),Se=$.paint.get("line-width");if(me.constantOr(1)===0||Se.constantOr(1)===0)return;const Ke=K.getDepthModeForSublayer(0,ri.ReadOnly),Je=K.colorModeForRenderPass(),nt=$.paint.get("line-dasharray"),tt=nt.constantOr(1),rt=$.paint.get("line-pattern"),dt=rt.constantOr(1),st=$.paint.get("line-gradient"),ft=$.getCrossfadeParameters();let Ct;Ct=dt?"linePattern":tt&&st?"lineGradientSDF":tt?"lineSDF":st?"lineGradient":"line";const lt=K.context,Ot=lt.gl,Ft=K.transform;let zt=!0;for(const Gt of se){const Qt=N.getTile(Gt);if(dt&&!Qt.patternsLoaded())continue;const dn=Qt.getBucket($);if(!dn)continue;const Rn=dn.programConfigurations.get($.id),An=K.context.program.get(),ai=K.useProgram(Ct,Rn),nr=zt||ai.program!==An,fo=K.style.map.terrain&&K.style.map.terrain.getTerrainData(Gt),Bo=rt.constantOr(null),po=nt&&nt.constantOr(null);if(Bo&&Qt.imageAtlas){const Ns=Qt.imageAtlas,Ko=Ns.patternPositions[Bo.to.toString()],ks=Ns.patternPositions[Bo.from.toString()];Ko&&ks&&Rn.setConstantPatternPositions(Ko,ks)}else if(po){const Ns=$.layout.get("line-cap")==="round",Ko=K.lineAtlas.getDash(po.to,Ns),ks=K.lineAtlas.getDash(po.from,Ns);Rn.setConstantDashPositions(Ko,ks)}const kr=Ft.getProjectionData({overscaledTileID:Gt,applyGlobeMatrix:!ye,applyTerrainMatrix:!0}),Dr=Ft.getPixelScale();let Ma;dt?(Ma=jh(K,Qt,$,Dr,ft),Hu(lt,Ot,Qt,Rn,ft)):tt&&st?(Ma=nh(K,Qt,$,Dr,ft,dn.lineClipsArray.length),Rl(K,N,lt,Ot,$,dn,Gt,Rn,ft)):tt?(Ma=Bs(K,Qt,$,Dr,ft),Os(K,lt,Ot,Rn,nr,ft)):st?(Ma=X1(K,Qt,$,Dr,dn.lineClipsArray.length),Eu(K,N,lt,Ot,$,dn,Gt)):Ma=Pp(K,Qt,$,Dr);const es=K.stencilModeForClipping(Gt);ai.draw(lt,Ot.TRIANGLES,Ke,es,Je,ei.disabled,Ma,fo,kr,$.id,dn.layoutVertexBuffer,dn.indexBuffer,dn.segments,$.paint,K.transform.zoom,Rn,dn.layoutVertexBuffer2),zt=!1}})(u,p,C,S,k):a.cr(C)?(function(K,N,$,se,ue){const ye=$.paint.get("fill-color"),me=$.paint.get("fill-opacity");if(me.constantOr(1)===0)return;const{isRenderingToTexture:Se}=ue,Ke=K.colorModeForRenderPass(),Je=$.paint.get("fill-pattern"),nt=K.opaquePassEnabledForLayer()&&!Je.constantOr(1)&&ye.constantOr(a.bq.transparent).a===1&&me.constantOr(0)===1?"opaque":"translucent";if(K.renderPass===nt){const tt=K.getDepthModeForSublayer(1,K.renderPass==="opaque"?ri.ReadWrite:ri.ReadOnly);Xc(K,N,$,se,tt,Ke,!1,Se)}if(K.renderPass==="translucent"&&$.paint.get("fill-antialias")){const tt=K.getDepthModeForSublayer($.getPaintProperty("fill-outline-color")?2:0,ri.ReadOnly);Xc(K,N,$,se,tt,Ke,!0,Se)}})(u,p,C,S,k):a.cs(C)?(function(K,N,$,se,ue){const ye=$.paint.get("fill-extrusion-opacity");if(ye===0)return;const{isRenderingToTexture:me}=ue;if(K.renderPass==="translucent"){const Se=new ri(K.context.gl.LEQUAL,ri.ReadWrite,K.depthRangeFor3D);if(ye!==1||$.paint.get("fill-extrusion-pattern").constantOr(1))qe(K,N,$,se,Se,ni.disabled,qn.disabled,me),qe(K,N,$,se,Se,K.stencilModeFor3D(),K.colorModeForRenderPass(),me);else{const Ke=K.colorModeForRenderPass();qe(K,N,$,se,Se,ni.disabled,Ke,me)}}})(u,p,C,S,k):a.ct(C)?(function(K,N,$,se,ue){if(K.renderPass!=="offscreen"&&K.renderPass!=="translucent")return;const{isRenderingToTexture:ye}=ue,me=K.context,Se=K.style.projection.useSubdivision,Ke=K.getDepthModeForSublayer(0,ri.ReadOnly),Je=K.colorModeForRenderPass();if(K.renderPass==="offscreen")(function(nt,tt,rt,dt,st,ft,Ct){const lt=nt.context,Ot=lt.gl;for(const Ft of rt){const zt=tt.getTile(Ft),Gt=zt.dem;if(!Gt||!Gt.data||!zt.needsHillshadePrepare)continue;const Qt=Gt.dim,dn=Gt.stride,Rn=Gt.getPixels();if(lt.activeTexture.set(Ot.TEXTURE1),lt.pixelStoreUnpackPremultiplyAlpha.set(!1),zt.demTexture=zt.demTexture||nt.getTileTexture(dn),zt.demTexture){const ai=zt.demTexture;ai.update(Rn,{premultiply:!1}),ai.bind(Ot.NEAREST,Ot.CLAMP_TO_EDGE)}else zt.demTexture=new a.T(lt,Rn,Ot.RGBA,{premultiply:!1}),zt.demTexture.bind(Ot.NEAREST,Ot.CLAMP_TO_EDGE);lt.activeTexture.set(Ot.TEXTURE0);let An=zt.fbo;if(!An){const ai=new a.T(lt,{width:Qt,height:Qt,data:null},Ot.RGBA);ai.bind(Ot.LINEAR,Ot.CLAMP_TO_EDGE),An=zt.fbo=lt.createFramebuffer(Qt,Qt,!0,!1),An.colorAttachment.set(ai.texture)}lt.bindFramebuffer.set(An.framebuffer),lt.viewport.set([0,0,Qt,Qt]),nt.useProgram("hillshadePrepare").draw(lt,Ot.TRIANGLES,st,ft,Ct,ei.disabled,th(zt.tileID,Gt),null,null,dt.id,nt.rasterBoundsBuffer,nt.quadTriangleIndexBuffer,nt.rasterBoundsSegments),zt.needsHillshadePrepare=!1}})(K,N,se,$,Ke,ni.disabled,Je),me.viewport.set([0,0,K.width,K.height]);else if(K.renderPass==="translucent")if(Se){const[nt,tt,rt]=K.stencilConfigForOverlapTwoPass(se);tu(K,N,$,rt,nt,Ke,Je,!1,ye),tu(K,N,$,rt,tt,Ke,Je,!0,ye)}else{const[nt,tt]=K.getStencilConfigForOverlapAndUpdateStencilID(se);tu(K,N,$,tt,nt,Ke,Je,!1,ye)}})(u,p,C,S,k):a.cu(C)?(function(K,N,$,se,ue){if(K.renderPass!=="translucent"||!se.length)return;const{isRenderingToTexture:ye}=ue,me=K.style.projection.useSubdivision,Se=K.getDepthModeForSublayer(0,ri.ReadOnly),Ke=K.colorModeForRenderPass();if(me){const[Je,nt,tt]=K.stencilConfigForOverlapTwoPass(se);Mc(K,N,$,tt,Je,Se,Ke,!1,ye),Mc(K,N,$,tt,nt,Se,Ke,!0,ye)}else{const[Je,nt]=K.getStencilConfigForOverlapAndUpdateStencilID(se);Mc(K,N,$,nt,Je,Se,Ke,!1,ye)}})(u,p,C,S,k):a.bV(C)?(function(K,N,$,se,ue){if(K.renderPass!=="translucent"||$.paint.get("raster-opacity")===0||!se.length)return;const{isRenderingToTexture:ye}=ue,me=N.getSource(),Se=K.style.projection.useSubdivision;if(me instanceof Bn)ur(K,N,$,se,null,!1,!1,me.tileCoords,me.flippedWindingOrder,ye);else if(Se){const[Ke,Je,nt]=K.stencilConfigForOverlapTwoPass(se);ur(K,N,$,nt,Ke,!1,!0,xa,!1,ye),ur(K,N,$,nt,Je,!0,!0,xa,!1,ye)}else{const[Ke,Je]=K.getStencilConfigForOverlapAndUpdateStencilID(se);ur(K,N,$,Je,Ke,!1,!0,xa,!1,ye)}})(u,p,C,S,k):a.cv(C)?(function(K,N,$,se,ue){const ye=$.paint.get("background-color"),me=$.paint.get("background-opacity");if(me===0)return;const{isRenderingToTexture:Se}=ue,Ke=K.context,Je=Ke.gl,nt=K.style.projection,tt=K.transform,rt=tt.tileSize,dt=$.paint.get("background-pattern");if(K.isPatternMissing(dt))return;const st=!dt&&ye.a===1&&me===1&&K.opaquePassEnabledForLayer()?"opaque":"translucent";if(K.renderPass!==st)return;const ft=ni.disabled,Ct=K.getDepthModeForSublayer(0,st==="opaque"?ri.ReadWrite:ri.ReadOnly),lt=K.colorModeForRenderPass(),Ot=K.useProgram(dt?"backgroundPattern":"background"),Ft=se||Ri(tt,{tileSize:rt,terrain:K.style.map.terrain});dt&&(Ke.activeTexture.set(Je.TEXTURE0),K.imageManager.bind(K.context));const zt=$.getCrossfadeParameters();for(const Gt of Ft){const Qt=tt.getProjectionData({overscaledTileID:Gt,applyGlobeMatrix:!Se,applyTerrainMatrix:!0}),dn=dt?tn(me,K,dt,{tileID:Gt,tileSize:rt},zt):an(me,ye),Rn=K.style.map.terrain&&K.style.map.terrain.getTerrainData(Gt),An=nt.getMeshFromTileID(Ke,Gt.canonical,!1,!0,"raster");Ot.draw(Ke,Je.TRIANGLES,Ct,ft,lt,ei.backCCW,dn,Rn,Qt,$.id,An.vertexBuffer,An.indexBuffer,An.segments)}})(u,0,C,S,k):a.cw(C)&&(function(K,N,$,se){const{isRenderingGlobe:ue}=se,ye=K.context,me=$.implementation,Se=K.style.projection,Ke=K.transform,Je=Ke.getProjectionDataForCustomLayer(ue),nt={farZ:Ke.farZ,nearZ:Ke.nearZ,fov:Ke.fov*Math.PI/180,modelViewProjectionMatrix:Ke.modelViewProjectionMatrix,projectionMatrix:Ke.projectionMatrix,shaderData:{variantName:Se.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Se.shaderPreludeCode.vertexSource}`,define:Se.shaderDefine},defaultProjectionData:Je},tt=me.renderingMode?me.renderingMode:"2d";if(K.renderPass==="offscreen"){const rt=me.prerender;rt&&(K.setCustomLayerDefaults(),ye.setColorMode(K.colorModeForRenderPass()),rt.call(me,ye.gl,nt),ye.setDirty(),K.setBaseState())}else if(K.renderPass==="translucent"){K.setCustomLayerDefaults(),ye.setColorMode(K.colorModeForRenderPass()),ye.setStencilMode(ni.disabled);const rt=tt==="3d"?K.getDepthModeFor3D():K.getDepthModeForSublayer(0,ri.ReadOnly);ye.setDepthMode(rt),me.render(ye.gl,nt),ye.setDirty(),K.setBaseState(),ye.bindFramebuffer.set(null)}})(u,0,C,k))}saveTileTexture(u){const p=this._tileTextures[u.size[0]];p?p.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const p=this._tileTextures[u];return p&&p.length>0?p.pop():null}isPatternMissing(u){if(!u)return!1;if(!u.from||!u.to)return!0;const p=this.imageManager.getPattern(u.from.toString()),C=this.imageManager.getPattern(u.to.toString());return!p||!C}useProgram(u,p,C=!1,S=[]){this.cache=this.cache||{};const k=!!this.style.map.terrain,K=this.style.projection,N=C?ho.projectionMercator:K.shaderPreludeCode,$=C?go:K.shaderDefine,se=u+(p?p.cacheKey:"")+`/${C?Fs:K.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(k?"/terrain":"")+(S?`/${S.join("/")}`:"");return this.cache[se]||(this.cache[se]=new e0(this.context,ho[u],p,pr[u],this._showOverdrawInspector,k,N,$,S)),this.cache[se]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var u,p;if(this._tileTextures){for(const C in this._tileTextures){const S=this._tileTextures[C];if(S)for(const k of S)k.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((u=this.tileExtentMesh.vertexBuffer)===null||u===void 0||u.destroy()),this.tileExtentMesh&&((p=this.tileExtentMesh.indexBuffer)===null||p===void 0||p.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const C in this.cache){const S=this.cache[C];S&&S.program&&this.context.gl.deleteProgram(S.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:u,drawingBufferHeight:p}=this.context.gl;return this.width!==u||this.height!==p}}function Rg(I,u){let p,C=!1,S=null,k=null;const K=()=>{S=null,C&&(I.apply(k,p),S=setTimeout(K,u),C=!1)};return(...N)=>(C=!0,k=this,p=N,S||K(),S)}class Is{constructor(u){this._getCurrentHash=()=>{const p=window.location.hash.replace("#","");if(this._hashName){let C;return p.split("&").map((S=>S.split("="))).forEach((S=>{S[0]===this._hashName&&(C=S)})),(C&&C[1]||"").split("/")}return p.split("/")},this._onHashChange=()=>{const p=this._getCurrentHash();if(!this._isValidHash(p))return!1;const C=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:C,pitch:+(p[4]||0)}),!0},this._updateHashUnthrottled=()=>{const p=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,p)},this._removeHash=()=>{const p=this._getCurrentHash();if(p.length===0)return;const C=p.join("/");let S=C;S.split("&").length>0&&(S=S.split("&")[0]),this._hashName&&(S=`${this._hashName}=${C}`);let k=window.location.hash.replace(S,"");k.startsWith("#&")?k=k.slice(0,1)+k.slice(2):k==="#"&&(k="");let K=window.location.href.replace(/(#.+)?$/,k);K=K.replace("&&","&"),window.history.replaceState(window.history.state,null,K)},this._updateHash=Rg(this._updateHashUnthrottled,300),this._hashName=u&&encodeURIComponent(u)}addTo(u){return this._map=u,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(u){const p=this._map.getCenter(),C=Math.round(100*this._map.getZoom())/100,S=Math.ceil((C*Math.LN2+Math.log(512/360/.5))/Math.LN10),k=Math.pow(10,S),K=Math.round(p.lng*k)/k,N=Math.round(p.lat*k)/k,$=this._map.getBearing(),se=this._map.getPitch();let ue="";if(ue+=u?`/${K}/${N}/${C}`:`${C}/${N}/${K}`,($||se)&&(ue+="/"+Math.round(10*$)/10),se&&(ue+=`/${Math.round(se)}`),this._hashName){const ye=this._hashName;let me=!1;const Se=window.location.hash.slice(1).split("&").map((Ke=>{const Je=Ke.split("=")[0];return Je===ye?(me=!0,`${Je}=${ue}`):Ke})).filter((Ke=>Ke));return me||Se.push(`${ye}=${ue}`),`#${Se.join("&")}`}return`#${ue}`}_isValidHash(u){if(u.length<3||u.some(isNaN))return!1;try{new a.V(+u[2],+u[1])}catch{return!1}const p=+u[0],C=+(u[3]||0),S=+(u[4]||0);return p>=this._map.getMinZoom()&&p<=this._map.getMaxZoom()&&C>=-180&&C<=180&&S>=this._map.getMinPitch()&&S<=this._map.getMaxPitch()}}const Pl={linearity:.3,easing:a.cx(0,0,.3,1)},Ll=a.e({deceleration:2500,maxSpeed:1400},Pl),nu=a.e({deceleration:20,maxSpeed:1400},Pl),u0=a.e({deceleration:1e3,maxSpeed:360},Pl),Ul=a.e({deceleration:1e3,maxSpeed:90},Pl),Rf=a.e({deceleration:1e3,maxSpeed:360},Pl);class Sc{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:U(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,p=U();for(;u.length>0&&p-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const p={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:k}of this._inertiaBuffer)p.zoom+=k.zoomDelta||0,p.bearing+=k.bearingDelta||0,p.pitch+=k.pitchDelta||0,p.roll+=k.rollDelta||0,k.panDelta&&p.pan._add(k.panDelta),k.around&&(p.around=k.around),k.pinchAround&&(p.pinchAround=k.pinchAround);const C=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,S={};if(p.pan.mag()){const k=Np(p.pan.mag(),C,a.e({},Ll,u||{})),K=p.pan.mult(k.amount/p.pan.mag()),N=this._map.cameraHelper.handlePanInertia(K,this._map.transform);S.center=N.easingCenter,S.offset=N.easingOffset,Pf(S,k)}if(p.zoom){const k=Np(p.zoom,C,nu);S.zoom=this._map.transform.zoom+k.amount,Pf(S,k)}if(p.bearing){const k=Np(p.bearing,C,u0);S.bearing=this._map.transform.bearing+a.ao(k.amount,-179,179),Pf(S,k)}if(p.pitch){const k=Np(p.pitch,C,Ul);S.pitch=this._map.transform.pitch+k.amount,Pf(S,k)}if(p.roll){const k=Np(p.roll,C,Rf);S.roll=this._map.transform.roll+a.ao(k.amount,-179,179),Pf(S,k)}if(S.zoom||S.bearing){const k=p.pinchAround===void 0?p.around:p.pinchAround;S.around=k?this._map.unproject(k):this._map.getCenter()}return this.clear(),a.e(S,{noMoveStart:!0})}}function Pf(I,u){(!I.duration||I.duration<u.duration)&&(I.duration=u.duration,I.easing=u.easing)}function Np(I,u,p){const{maxSpeed:C,linearity:S,deceleration:k}=p,K=a.ao(I*S/(u/1e3),-C,C),N=Math.abs(K)/(k*S);return{easing:p.easing,duration:1e3*N,amount:K*(N/2)}}class Ts extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,p,C,S={}){C=C instanceof MouseEvent?C:new MouseEvent(u,C);const k=z.mousePos(p.getCanvas(),C),K=p.unproject(k);super(u,a.e({point:k,lngLat:K,originalEvent:C},S)),this._defaultPrevented=!1,this.target=p}}class Jc extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,p,C){const S=u==="touchend"?C.changedTouches:C.touches,k=z.touchPos(p.getCanvasContainer(),S),K=k.map(($=>p.unproject($))),N=k.reduce((($,se,ue,ye)=>$.add(se.div(ye.length))),new a.P(0,0));super(u,{points:k,point:N,lngLats:K,lngLat:p.unproject(N),originalEvent:C}),this._defaultPrevented=!1}}class Gp extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,p,C){super(u,{originalEvent:C}),this._defaultPrevented=!1}}class Vh{constructor(u,p){this._map=u,this._clickTolerance=p.clickTolerance}reset(){delete this._mousedownPos}wheel(u){return this._firePreventable(new Gp(u.type,this._map,u))}mousedown(u,p){return this._mousedownPos=p,this._firePreventable(new Ts(u.type,this._map,u))}mouseup(u){this._map.fire(new Ts(u.type,this._map,u))}click(u,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new Ts(u.type,this._map,u))}dblclick(u){return this._firePreventable(new Ts(u.type,this._map,u))}mouseover(u){this._map.fire(new Ts(u.type,this._map,u))}mouseout(u){this._map.fire(new Ts(u.type,this._map,u))}touchstart(u){return this._firePreventable(new Jc(u.type,this._map,u))}touchmove(u){this._map.fire(new Jc(u.type,this._map,u))}touchend(u){this._map.fire(new Jc(u.type,this._map,u))}touchcancel(u){this._map.fire(new Jc(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class TA{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(u){this._map.fire(new Ts(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ts("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._ignoreContextMenu||this._map.fire(new Ts(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Fn{constructor(u){this._map=u}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(u){return this.transform.screenPointToLocation(a.P.convert(u),this._map.terrain)}}class Lf{constructor(u,p){this._map=u,this._tr=new Fn(u),this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,p){this.isEnabled()&&u.shiftKey&&u.button===0&&(z.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(u,p){if(!this._active)return;const C=p;if(this._lastPos.equals(C)||!this._box&&C.dist(this._startPos)<this._clickTolerance)return;const S=this._startPos;this._lastPos=C,this._box||(this._box=z.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",u));const k=Math.min(S.x,C.x),K=Math.max(S.x,C.x),N=Math.min(S.y,C.y),$=Math.max(S.y,C.y);z.setTransform(this._box,`translate(${k}px,${N}px)`),this._box.style.width=K-k+"px",this._box.style.height=$-N+"px"}mouseupWindow(u,p){if(!this._active||u.button!==0)return;const C=this._startPos,S=p;if(this.reset(),z.suppressClick(),C.x!==S.x||C.y!==S.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:u})),{cameraAnimation:k=>k.fitScreenCoordinates(C,S,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",u)}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(z.remove(this._box),this._box=null),z.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(u,p){return this._map.fire(new a.l(u,{originalEvent:p}))}}function Ah(I,u){if(I.length!==u.length)throw new Error(`The number of touches and points are not equal - touches ${I.length}, points ${u.length}`);const p={};for(let C=0;C<I.length;C++)p[I[C].identifier]=u[C];return p}class Wp{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(u,p,C){(this.centroid||C.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=u.timeStamp),C.length===this.numTouches&&(this.centroid=(function(S){const k=new a.P(0,0);for(const K of S)k._add(K);return k.div(S.length)})(p),this.touches=Ah(C,p)))}touchmove(u,p,C){if(this.aborted||!this.centroid)return;const S=Ah(C,p);for(const k in this.touches){const K=S[k];(!K||K.dist(this.touches[k])>30)&&(this.aborted=!0)}}touchend(u,p,C){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),C.length===0){const S=!this.aborted&&this.centroid;if(this.reset(),S)return S}}}class $h{constructor(u){this.singleTap=new Wp(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(u,p,C){this.singleTap.touchstart(u,p,C)}touchmove(u,p,C){this.singleTap.touchmove(u,p,C)}touchend(u,p,C){const S=this.singleTap.touchend(u,p,C);if(S){const k=u.timeStamp-this.lastTime<500,K=!this.lastTap||this.lastTap.dist(S)<30;if(k&&K||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=S,this.count===this.numTaps)return this.reset(),S}}}class Hh{constructor(u){this._tr=new Fn(u),this._zoomIn=new $h({numTouches:1,numTaps:2}),this._zoomOut=new $h({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,p,C){this._zoomIn.touchstart(u,p,C),this._zoomOut.touchstart(u,p,C)}touchmove(u,p,C){this._zoomIn.touchmove(u,p,C),this._zoomOut.touchmove(u,p,C)}touchend(u,p,C){const S=this._zoomIn.touchend(u,p,C),k=this._zoomOut.touchend(u,p,C),K=this._tr;return S?(this._active=!0,u.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:N=>N.easeTo({duration:300,zoom:K.zoom+1,around:K.unproject(S)},{originalEvent:u})}):k?(this._active=!0,u.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:N=>N.easeTo({duration:300,zoom:K.zoom-1,around:K.unproject(k)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class hl{constructor(u){this._enabled=!!u.enable,this._moveStateManager=u.moveStateManager,this._clickTolerance=u.clickTolerance||1,this._moveFunction=u.move,this._activateOnStart=!!u.activateOnStart,u.assignEvents(this),this.reset()}reset(u){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(u)}_move(...u){const p=this._moveFunction(...u);if(p.bearingDelta||p.pitchDelta||p.rollDelta||p.around||p.panDelta)return this._active=!0,p}dragStart(u,p){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(u)&&(this._moveStateManager.startMove(u),this._lastPoint=Array.isArray(p)?p[0]:p,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(u,p){if(!this.isEnabled())return;const C=this._lastPoint;if(!C)return;if(u.preventDefault(),!this._moveStateManager.isValidMoveEvent(u))return void this.reset(u);const S=Array.isArray(p)?p[0]:p;return!this._moved&&S.dist(C)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=S,this._move(C,S))}dragEnd(u){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(u)&&(this._moved&&z.suppressClick(),this.reset(u))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const kA=0,c0=2,A0={[kA]:1,[c0]:2};class Ec{constructor(u){this._correctEvent=u.checkCorrectEvent}startMove(u){const p=z.mouseButton(u);this._eventButton=p}endMove(u){delete this._eventButton}isValidStartEvent(u){return this._correctEvent(u)}isValidMoveEvent(u){return!(function(p,C){const S=A0[C];return p.buttons===void 0||(p.buttons&S)!==S})(u,this._eventButton)}isValidEndEvent(u){return z.mouseButton(u)===this._eventButton}}class Xu{constructor(){this._firstTouch=void 0}_isOneFingerTouch(u){return u.targetTouches.length===1}_isSameTouchEvent(u){return u.targetTouches[0].identifier===this._firstTouch}startMove(u){this._firstTouch=u.targetTouches[0].identifier}endMove(u){delete this._firstTouch}isValidStartEvent(u){return this._isOneFingerTouch(u)}isValidMoveEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}isValidEndEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}}class Wd{constructor(u=new Ec({checkCorrectEvent:()=>!0}),p=new Xu){this.mouseMoveStateManager=u,this.oneFingerTouchMoveStateManager=p}_executeRelevantHandler(u,p,C){return u instanceof MouseEvent?p(u):typeof TouchEvent<"u"&&u instanceof TouchEvent?C(u):void 0}startMove(u){this._executeRelevantHandler(u,(p=>this.mouseMoveStateManager.startMove(p)),(p=>this.oneFingerTouchMoveStateManager.startMove(p)))}endMove(u){this._executeRelevantHandler(u,(p=>this.mouseMoveStateManager.endMove(p)),(p=>this.oneFingerTouchMoveStateManager.endMove(p)))}isValidStartEvent(u){return this._executeRelevantHandler(u,(p=>this.mouseMoveStateManager.isValidStartEvent(p)),(p=>this.oneFingerTouchMoveStateManager.isValidStartEvent(p)))}isValidMoveEvent(u){return this._executeRelevantHandler(u,(p=>this.mouseMoveStateManager.isValidMoveEvent(p)),(p=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(p)))}isValidEndEvent(u){return this._executeRelevantHandler(u,(p=>this.mouseMoveStateManager.isValidEndEvent(p)),(p=>this.oneFingerTouchMoveStateManager.isValidEndEvent(p)))}}const Bu=I=>{I.mousedown=I.dragStart,I.mousemoveWindow=I.dragMove,I.mouseup=I.dragEnd,I.contextmenu=u=>{u.preventDefault()}};class iu{constructor(u,p){this._clickTolerance=u.clickTolerance||1,this._map=p,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(u){return u<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(u,p,C){return this._calculateTransform(u,p,C)}touchmove(u,p,C){if(this._active){if(!this._shouldBePrevented(C.length))return u.preventDefault(),this._calculateTransform(u,p,C);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",u)}}touchend(u,p,C){this._calculateTransform(u,p,C),this._active&&this._shouldBePrevented(C.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,p,C){C.length>0&&(this._active=!0);const S=Ah(C,p),k=new a.P(0,0),K=new a.P(0,0);let N=0;for(const se in S){const ue=S[se],ye=this._touches[se];ye&&(k._add(ue),K._add(ue.sub(ye)),N++,S[se]=ue)}if(this._touches=S,this._shouldBePrevented(N)||!K.mag())return;const $=K.div(N);return this._sum._add($),this._sum.mag()<this._clickTolerance?void 0:{around:k.div(N),panDelta:$}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qp{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(u,p,C){this._firstTwoTouches||C.length<2||(this._firstTwoTouches=[C[0].identifier,C[1].identifier],this._start([p[0],p[1]]))}touchmove(u,p,C){if(!this._firstTwoTouches)return;u.preventDefault();const[S,k]=this._firstTwoTouches,K=eA(C,p,S),N=eA(C,p,k);if(!K||!N)return;const $=this._aroundCenter?null:K.add(N).div(2);return this._move([K,N],$,u)}touchend(u,p,C){if(!this._firstTwoTouches)return;const[S,k]=this._firstTwoTouches,K=eA(C,p,S),N=eA(C,p,k);K&&N||(this._active&&z.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function eA(I,u,p){for(let C=0;C<I.length;C++)if(I[C].identifier===p)return u[C]}function qp(I,u){return Math.log(I/u)/Math.LN2}class Ju extends Qp{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,p){const C=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(qp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:qp(this._distance,C),pinchAround:p}}}function tA(I,u){return 180*I.angleWith(u)/Math.PI}class Bc extends Qp{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,p,C){const S=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:tA(this._vector,S),pinchAround:p}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const p=25/(Math.PI*this._minDiameter)*360,C=tA(u,this._startVector);return Math.abs(C)<p}}function zr(I){return Math.abs(I.y)>Math.abs(I.x)}class Oc extends Qp{constructor(u){super(),this._currentTouchCount=0,this._map=u}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(u,p,C){super.touchstart(u,p,C),this._currentTouchCount=C.length}_start(u){this._lastPoints=u,zr(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,p,C){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const S=u[0].sub(this._lastPoints[0]),k=u[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(S,k,C.timeStamp),this._valid?(this._lastPoints=u,this._active=!0,{pitchDelta:(S.y+k.y)/2*-.5}):void 0}gestureBeginsVertically(u,p,C){if(this._valid!==void 0)return this._valid;const S=u.mag()>=2,k=p.mag()>=2;if(!S&&!k)return;if(!S||!k)return this._firstMove===void 0&&(this._firstMove=C),C-this._firstMove<100&&void 0;const K=u.y>0==p.y>0;return zr(u)&&zr(p)&&K}}const Zh={panStep:100,bearingStep:15,pitchStep:10};class Xh{constructor(u){this._tr=new Fn(u);const p=Zh;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let p=0,C=0,S=0,k=0,K=0;switch(u.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:u.shiftKey?C=-1:(u.preventDefault(),k=-1);break;case 39:u.shiftKey?C=1:(u.preventDefault(),k=1);break;case 38:u.shiftKey?S=1:(u.preventDefault(),K=-1);break;case 40:u.shiftKey?S=-1:(u.preventDefault(),K=1);break;default:return}return this._rotationDisabled&&(C=0,S=0),{cameraAnimation:N=>{const $=this._tr;N.easeTo({duration:300,easeId:"keyboardHandler",easing:la,zoom:p?Math.round($.zoom)+p*(u.shiftKey?2:1):$.zoom,bearing:$.bearing+C*this._bearingStep,pitch:$.pitch+S*this._pitchStep,offset:[-k*this._panStep,-K*this._panStep],center:$.center},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function la(I){return I*(2-I)}const hh=4.000244140625,Qd=1/450;class ec{constructor(u,p){this._onTimeout=C=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(C)},this._map=u,this._tr=new Fn(u),this._triggerRenderFrame=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Qd}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!u&&u.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(u){return!!this._map.cooperativeGestures.isEnabled()&&!(u.ctrlKey||this._map.cooperativeGestures.isBypassed(u))}wheel(u){if(!this.isEnabled())return;if(this._shouldBePrevented(u))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",u);let p=u.deltaMode===WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const C=U(),S=C-(this._lastWheelEventTime||0);this._lastWheelEventTime=C,p!==0&&p%hh==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":S>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(S*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),u.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=u,this._delta-=p,this._active||this._start(u)),u.preventDefault()}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=z.mousePos(this._map.getCanvas(),u),C=this._tr;this._aroundPoint=this._aroundCenter?C.transform.locationToScreenPoint(a.V.convert(C.center)):p,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const N=u.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=N),typeof this._targetZoom=="number"&&(this._targetZoom+=N)}if(this._delta!==0){const N=this._type==="wheel"&&Math.abs(this._delta)>hh?this._wheelZoomRate:this._defaultZoomRate;let $=2/(1+Math.exp(-Math.abs(this._delta*N)));this._delta<0&&$!==0&&($=1/$);const se=typeof this._targetZoom!="number"?u.scale:a.ar(this._targetZoom);this._targetZoom=u.applyConstrain(u.getCameraLngLat(),a.au(se*$)).zoom,this._type==="wheel"&&(this._startZoom=u.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom!="number"?u.zoom:this._targetZoom,C=this._startZoom,S=this._easing;let k,K=!1;if(this._type==="wheel"&&C&&S){const N=U()-this._lastWheelEventTime,$=Math.min((N+5)/200,1),se=S($);k=a.G.number(C,p,se),$<1?this._frameId||(this._frameId=!0):K=!0}else k=p,K=!0;return this._active=!0,K&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=k,{noInertia:!0,needsRenderFrame:!K,zoomDelta:k-u.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let p=a.cz;if(this._prevEase){const C=this._prevEase,S=(U()-C.start)/C.duration,k=C.easing(S+.01)-C.easing(S),K=.27/Math.sqrt(k*k+1e-4)*.01,N=Math.sqrt(.0729-K*K);p=a.cx(K,N,.25,1)}return this._prevEase={start:U(),duration:u,easing:p},p}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Yp{constructor(u,p){this._clickZoom=u,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class el{constructor(u){this._tr=new Fn(u),this.reset()}reset(){this._active=!1}dblclick(u,p){return u.preventDefault(),{cameraAnimation:C=>{C.easeTo({duration:300,zoom:this._tr.zoom+(u.shiftKey?-1:1),around:this._tr.unproject(p)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class tc{constructor(){this._tap=new $h({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(u,p,C){if(!this._swipePoint)if(this._tapTime){const S=p[0],k=u.timeStamp-this._tapTime<500,K=this._tapPoint.dist(S)<30;k&&K?C.length>0&&(this._swipePoint=S,this._swipeTouch=C[0].identifier):this.reset()}else this._tap.touchstart(u,p,C)}touchmove(u,p,C){if(this._tapTime){if(this._swipePoint){if(C[0].identifier!==this._swipeTouch)return;const S=p[0],k=S.y-this._swipePoint.y;return this._swipePoint=S,u.preventDefault(),this._active=!0,{zoomDelta:k/128}}}else this._tap.touchmove(u,p,C)}touchend(u,p,C){if(this._tapTime)this._swipePoint&&C.length===0&&this.reset();else{const S=this._tap.touchend(u,p,C);S&&(this._tapTime=u.timeStamp,this._tapPoint=S)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class di{constructor(u,p,C){this._el=u,this._mousePan=p,this._touchPan=C}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class si{constructor(u,p,C,S){this._pitchWithRotate=u.pitchWithRotate,this._rollEnabled=u.rollEnabled,this._mouseRotate=p,this._mousePitch=C,this._mouseRoll=S}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class DA{constructor(u,p,C,S){this._el=u,this._touchZoom=p,this._touchRotate=C,this._tapDragZoom=S,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class ru{constructor(u,p){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=u,this._options=p,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const u=this._map.getCanvasContainer();u.classList.add("maplibregl-cooperative-gestures"),this._container=z.create("div","maplibregl-cooperative-gesture-screen",u);let p=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(p=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const C=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),S=document.createElement("div");S.className="maplibregl-desktop-message",S.textContent=p,this._container.appendChild(S);const k=document.createElement("div");k.className="maplibregl-mobile-message",k.textContent=C,this._container.appendChild(k),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(z.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(u){return u[this._bypassKey]}notifyGestureBlocked(u,p){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:u,originalEvent:p})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const tl=I=>I.zoom||I.drag||I.roll||I.pitch||I.rotate;class Hs extends a.l{}function dl(I){return I.panDelta&&I.panDelta.mag()||I.zoomDelta||I.bearingDelta||I.pitchDelta||I.rollDelta}class Pg{constructor(u,p){this.handleWindowEvent=S=>{this.handleEvent(S,`${S.type}Window`)},this.handleEvent=(S,k)=>{if(S.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const K=S.type==="renderFrame"?void 0:S,N={needsRenderFrame:!1},$={},se={};for(const{handlerName:me,handler:Se,allowed:Ke}of this._handlers){if(!Se.isEnabled())continue;let Je;if(this._blockedByActive(se,Ke,me))Se.reset();else if(Se[k||S.type]){if(a.cA(S,k||S.type)){const nt=z.mousePos(this._map.getCanvas(),S);Je=Se[k||S.type](S,nt)}else if(a.cB(S,k||S.type)){const nt=this._getMapTouches(S.touches),tt=z.touchPos(this._map.getCanvas(),nt);Je=Se[k||S.type](S,tt,nt)}else a.cC(k||S.type)||(Je=Se[k||S.type](S));this.mergeHandlerResult(N,$,Je,me,K),Je&&Je.needsRenderFrame&&this._triggerRenderFrame()}(Je||Se.isActive())&&(se[me]=Se)}const ue={};for(const me in this._previousActiveHandlers)se[me]||(ue[me]=K);this._previousActiveHandlers=se,(Object.keys(ue).length||dl(N))&&(this._changes.push([N,$,ue]),this._triggerRenderFrame()),(Object.keys(se).length||dl(N))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ye}=N;ye&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ye(this._map))},this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Sc(u),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p);const C=this._el;this._listeners=[[C,"touchstart",{passive:!0}],[C,"touchmove",{passive:!1}],[C,"touchend",void 0],[C,"touchcancel",void 0],[C,"mousedown",void 0],[C,"mousemove",void 0],[C,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[C,"mouseover",void 0],[C,"mouseout",void 0],[C,"dblclick",void 0],[C,"click",void 0],[C,"keydown",{capture:!1}],[C,"keyup",void 0],[C,"wheel",{passive:!1}],[C,"contextmenu",void 0],[window,"blur",void 0]];for(const[S,k,K]of this._listeners)z.addEventListener(S,k,S===document?this.handleWindowEvent:this.handleEvent,K)}destroy(){for(const[u,p,C]of this._listeners)z.removeEventListener(u,p,u===document?this.handleWindowEvent:this.handleEvent,C)}_addDefaultHandlers(u){const p=this._map,C=p.getCanvasContainer();this._add("mapEvent",new Vh(p,u));const S=p.boxZoom=new Lf(p,u);this._add("boxZoom",S),u.interactive&&u.boxZoom&&S.enable();const k=p.cooperativeGestures=new ru(p,u.cooperativeGestures);this._add("cooperativeGestures",k),u.cooperativeGestures&&k.enable();const K=new Hh(p),N=new el(p);p.doubleClickZoom=new Yp(N,K),this._add("tapZoom",K),this._add("clickZoom",N),u.interactive&&u.doubleClickZoom&&p.doubleClickZoom.enable();const $=new tc;this._add("tapDragZoom",$);const se=p.touchPitch=new Oc(p);this._add("touchPitch",se),u.interactive&&u.touchPitch&&p.touchPitch.enable(u.touchPitch);const ue=()=>p.project(p.getCenter()),ye=(function({enable:st,clickTolerance:ft,aroundCenter:Ct=!0,minPixelCenterThreshold:lt=100,rotateDegreesPerPixelMoved:Ot=.8},Ft){const zt=new Ec({checkCorrectEvent:Gt=>z.mouseButton(Gt)===0&&Gt.ctrlKey||z.mouseButton(Gt)===2&&!Gt.ctrlKey});return new hl({clickTolerance:ft,move:(Gt,Qt)=>{const dn=Ft();if(Ct&&Math.abs(dn.y-Gt.y)>lt)return{bearingDelta:a.cy(new a.P(Gt.x,Qt.y),Qt,dn)};let Rn=(Qt.x-Gt.x)*Ot;return Ct&&Qt.y<dn.y&&(Rn=-Rn),{bearingDelta:Rn}},moveStateManager:zt,enable:st,assignEvents:Bu})})(u,ue),me=(function({enable:st,clickTolerance:ft,pitchDegreesPerPixelMoved:Ct=-.5}){const lt=new Ec({checkCorrectEvent:Ot=>z.mouseButton(Ot)===0&&Ot.ctrlKey||z.mouseButton(Ot)===2});return new hl({clickTolerance:ft,move:(Ot,Ft)=>({pitchDelta:(Ft.y-Ot.y)*Ct}),moveStateManager:lt,enable:st,assignEvents:Bu})})(u),Se=(function({enable:st,clickTolerance:ft,rollDegreesPerPixelMoved:Ct=.3},lt){const Ot=new Ec({checkCorrectEvent:Ft=>z.mouseButton(Ft)===2&&Ft.ctrlKey});return new hl({clickTolerance:ft,move:(Ft,zt)=>{const Gt=lt();let Qt=(zt.x-Ft.x)*Ct;return zt.y<Gt.y&&(Qt=-Qt),{rollDelta:Qt}},moveStateManager:Ot,enable:st,assignEvents:Bu})})(u,ue);p.dragRotate=new si(u,ye,me,Se),this._add("mouseRotate",ye,["mousePitch"]),this._add("mousePitch",me,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Se,["mousePitch"]),u.interactive&&u.dragRotate&&p.dragRotate.enable();const Ke=(function({enable:st,clickTolerance:ft}){const Ct=new Ec({checkCorrectEvent:lt=>z.mouseButton(lt)===0&&!lt.ctrlKey});return new hl({clickTolerance:ft,move:(lt,Ot)=>({around:Ot,panDelta:Ot.sub(lt)}),activateOnStart:!0,moveStateManager:Ct,enable:st,assignEvents:Bu})})(u),Je=new iu(u,p);p.dragPan=new di(C,Ke,Je),this._add("mousePan",Ke),this._add("touchPan",Je,["touchZoom","touchRotate"]),u.interactive&&u.dragPan&&p.dragPan.enable(u.dragPan);const nt=new Bc,tt=new Ju;p.touchZoomRotate=new DA(C,tt,nt,$),this._add("touchRotate",nt,["touchPan","touchZoom"]),this._add("touchZoom",tt,["touchPan","touchRotate"]),u.interactive&&u.touchZoomRotate&&p.touchZoomRotate.enable(u.touchZoomRotate),this._add("blockableMapEvent",new TA(p));const rt=p.scrollZoom=new ec(p,(()=>this._triggerRenderFrame()));this._add("scrollZoom",rt,["mousePan"]),u.interactive&&u.scrollZoom&&p.scrollZoom.enable(u.scrollZoom);const dt=p.keyboard=new Xh(p);this._add("keyboard",dt),u.interactive&&u.keyboard&&p.keyboard.enable()}_add(u,p,C){this._handlers.push({handlerName:u,handler:p,allowed:C}),this._handlersById[u]=p}stop(u){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!tl(this._eventsInProgress)||this.isZooming()}_blockedByActive(u,p,C){for(const S in u)if(S!==C&&(!p||p.indexOf(S)<0))return!0;return!1}_getMapTouches(u){const p=[];for(const C of u)this._el.contains(C.target)&&p.push(C);return p}mergeHandlerResult(u,p,C,S,k){if(!C)return;a.e(u,C);const K={handlerName:S,originalEvent:C.originalEvent||k};C.zoomDelta!==void 0&&(p.zoom=K),C.panDelta!==void 0&&(p.drag=K),C.rollDelta!==void 0&&(p.roll=K),C.pitchDelta!==void 0&&(p.pitch=K),C.bearingDelta!==void 0&&(p.rotate=K)}_applyChanges(){const u={},p={},C={};for(const[S,k,K]of this._changes)S.panDelta&&(u.panDelta=(u.panDelta||new a.P(0,0))._add(S.panDelta)),S.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+S.pitchDelta),S.rollDelta&&(u.rollDelta=(u.rollDelta||0)+S.rollDelta),S.around!==void 0&&(u.around=S.around),S.pinchAround!==void 0&&(u.pinchAround=S.pinchAround),S.noInertia&&(u.noInertia=S.noInertia),a.e(p,k),a.e(C,K);this._updateMapTransform(u,p,C),this._changes=[]}_updateMapTransform(u,p,C){const S=this._map,k=S._getTransformForUpdate(),K=S.terrain;if(!(dl(u)||K&&this._terrainMovement))return this._fireEvents(p,C,!0);S._stop(!0);let{panDelta:N,zoomDelta:$,bearingDelta:se,pitchDelta:ue,rollDelta:ye,around:me,pinchAround:Se}=u;Se!==void 0&&(me=Se),me=me||S.transform.centerPoint,K&&!k.isPointOnMapSurface(me)&&(me=k.centerPoint);const Ke={panDelta:N,zoomDelta:$,rollDelta:ye,pitchDelta:ue,bearingDelta:se,around:me};this._map.cameraHelper.useGlobeControls&&!k.isPointOnMapSurface(me)&&(me=k.centerPoint);const Je=me.distSqr(k.centerPoint)<.01?k.center:k.screenPointToLocation(N?me.sub(N):me);this._handleMapControls({terrain:K,tr:k,deltasForHelper:Ke,preZoomAroundLoc:Je,combinedEventsInProgress:p,panDelta:N}),S._applyUpdatedTransform(k),this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(p,C,!0)}_handleMapControls({terrain:u,tr:p,deltasForHelper:C,preZoomAroundLoc:S,combinedEventsInProgress:k,panDelta:K}){const N=this._map.cameraHelper;if(N.handleMapControlsRollPitchBearingZoom(C,p),u)return N.useGlobeControls?(this._terrainMovement||!k.drag&&!k.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void N.handleMapControlsPan(C,p,S)):this._terrainMovement||!k.drag&&!k.zoom?void(k.drag&&this._terrainMovement&&K?p.setCenter(p.screenPointToLocation(p.centerPoint.sub(K))):N.handleMapControlsPan(C,p,S)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void N.handleMapControlsPan(C,p,S));N.handleMapControlsPan(C,p,S)}_fireEvents(u,p,C){const S=tl(this._eventsInProgress),k=tl(u),K={};for(const ye in u){const{originalEvent:me}=u[ye];this._eventsInProgress[ye]||(K[`${ye}start`]=me),this._eventsInProgress[ye]=u[ye]}!S&&k&&this._fireEvent("movestart",k.originalEvent);for(const ye in K)this._fireEvent(ye,K[ye]);k&&this._fireEvent("move",k.originalEvent);for(const ye in u){const{originalEvent:me}=u[ye];this._fireEvent(ye,me)}const N={};let $;for(const ye in this._eventsInProgress){const{handlerName:me,originalEvent:Se}=this._eventsInProgress[ye];this._handlersById[me].isActive()||(delete this._eventsInProgress[ye],$=p[me]||Se,N[`${ye}end`]=$)}for(const ye in N)this._fireEvent(ye,N[ye]);const se=tl(this._eventsInProgress),ue=(S||k)&&!se;if(ue&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const ye=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&ye.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(ye)}if(C&&ue){this._updatingCamera=!0;const ye=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),me=Se=>Se!==0&&-this._bearingSnap<Se&&Se<this._bearingSnap;!ye||!ye.essential&&B.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:$})),me(this._map.getBearing())&&this._map.resetNorth()):(me(ye.bearing||this._map.getBearing())&&(ye.bearing=0),ye.freezeElevation=!0,this._map.easeTo(ye,{originalEvent:$})),this._updatingCamera=!1}}_fireEvent(u,p){this._map.fire(new a.l(u,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((u=>{delete this._frameId,this.handleEvent(new Hs("renderFrame",{timeStamp:u})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Ic extends a.E{constructor(u,p,C){super(),this._renderFrameCallback=()=>{const S=Math.min((U()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(S)),S<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=C.bearingSnap,this.cameraHelper=p,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(u,p){u.apply(this.transform),this.transform=u,this.cameraHelper=p}getCenter(){return new a.V(this.transform.center.lng,this.transform.center.lat)}setCenter(u,p){return this.jumpTo({center:u},p)}getCenterElevation(){return this.transform.elevation}setCenterElevation(u,p){return this.jumpTo({elevation:u},p),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(u){this._centerClampedToGround=u}panBy(u,p,C){return u=a.P.convert(u).mult(-1),this.panTo(this.transform.center,a.e({offset:u},p),C)}panTo(u,p,C){return this.easeTo(a.e({center:u},p),C)}getZoom(){return this.transform.zoom}setZoom(u,p){return this.jumpTo({zoom:u},p),this}zoomTo(u,p,C){return this.easeTo(a.e({zoom:u},p),C)}zoomIn(u,p){return this.zoomTo(this.getZoom()+1,u,p),this}zoomOut(u,p){return this.zoomTo(this.getZoom()-1,u,p),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(u,p){return u!=this.transform.fov&&(this.transform.setFov(u),this.fire(new a.l("movestart",p)).fire(new a.l("move",p)).fire(new a.l("moveend",p))),this}getBearing(){return this.transform.bearing}setBearing(u,p){return this.jumpTo({bearing:u},p),this}getPadding(){return this.transform.padding}setPadding(u,p){return this.jumpTo({padding:u},p),this}rotateTo(u,p,C){return this.easeTo(a.e({bearing:u},p),C)}resetNorth(u,p){return this.rotateTo(0,a.e({duration:1e3},u),p),this}resetNorthPitch(u,p){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},u),p),this}snapToNorth(u,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,p):this}getPitch(){return this.transform.pitch}setPitch(u,p){return this.jumpTo({pitch:u},p),this}getRoll(){return this.transform.roll}setRoll(u,p){return this.jumpTo({roll:u},p),this}cameraForBounds(u,p){u=en.convert(u).adjustAntiMeridian();const C=p&&p.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),C,p)}_cameraForBoxAndBearing(u,p,C,S){const k={top:0,bottom:0,right:0,left:0};if(typeof(S=a.e({padding:k,offset:[0,0],maxZoom:this.transform.maxZoom},S)).padding=="number"){const se=S.padding;S.padding={top:se,bottom:se,right:se,left:se}}const K=a.e(k,S.padding);S.padding=K;const N=this.transform,$=new en(u,p);return this.cameraHelper.cameraForBoxAndBearing(S,K,$,C,N)}fitBounds(u,p,C){return this._fitInternal(this.cameraForBounds(u,p),p,C)}fitScreenCoordinates(u,p,C,S,k){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(u)),this.transform.screenPointToLocation(a.P.convert(p)),C,S),S,k)}_fitInternal(u,p,C){return u?(delete(p=a.e(u,p)).padding,p.linear?this.easeTo(p,C):this.flyTo(p,C)):this}jumpTo(u,p){this.stop();const C=this._getTransformForUpdate();let S=!1,k=!1,K=!1;const N=C.zoom;this.cameraHelper.handleJumpToCenterZoom(C,u);const $=C.zoom!==N;return"elevation"in u&&C.elevation!==+u.elevation&&C.setElevation(+u.elevation),"bearing"in u&&C.bearing!==+u.bearing&&(S=!0,C.setBearing(+u.bearing)),"pitch"in u&&C.pitch!==+u.pitch&&(k=!0,C.setPitch(+u.pitch)),"roll"in u&&C.roll!==+u.roll&&(K=!0,C.setRoll(+u.roll)),u.padding==null||C.isPaddingEqual(u.padding)||C.setPadding(u.padding),this._applyUpdatedTransform(C),this.fire(new a.l("movestart",p)).fire(new a.l("move",p)),$&&this.fire(new a.l("zoomstart",p)).fire(new a.l("zoom",p)).fire(new a.l("zoomend",p)),S&&this.fire(new a.l("rotatestart",p)).fire(new a.l("rotate",p)).fire(new a.l("rotateend",p)),k&&this.fire(new a.l("pitchstart",p)).fire(new a.l("pitch",p)).fire(new a.l("pitchend",p)),K&&this.fire(new a.l("rollstart",p)).fire(new a.l("roll",p)).fire(new a.l("rollend",p)),this.fire(new a.l("moveend",p))}calculateCameraOptionsFromTo(u,p,C,S=0){const k=a.ab.fromLngLat(u,p),K=a.ab.fromLngLat(C,S),N=K.x-k.x,$=K.y-k.y,se=K.z-k.z,ue=Math.hypot(N,$,se);if(ue===0)throw new Error("Can't calculate camera options with same From and To");const ye=Math.hypot(N,$),me=a.au(this.transform.cameraToCenterDistance/ue/this.transform.tileSize),Se=180*Math.atan2(N,-$)/Math.PI;let Ke=180*Math.acos(ye/ue)/Math.PI;return Ke=se<0?90-Ke:90+Ke,{center:K.toLngLat(),elevation:S,zoom:me,pitch:Ke,bearing:Se}}calculateCameraOptionsFromCameraLngLatAltRotation(u,p,C,S,k){const K=this.transform.calculateCenterFromCameraLngLatAlt(u,p,C,S);return{center:K.center,elevation:K.elevation,zoom:K.zoom,bearing:C,pitch:S,roll:k}}easeTo(u,p){this._stop(!1,u.easeId),((u=a.e({offset:[0,0],duration:500,easing:a.cz},u)).animate===!1||!u.essential&&B.prefersReducedMotion)&&(u.duration=0);const C=this._getTransformForUpdate(),S=this.getBearing(),k=C.pitch,K=C.roll,N="bearing"in u?this._normalizeBearing(u.bearing,S):S,$="pitch"in u?+u.pitch:k,se="roll"in u?this._normalizeBearing(u.roll,K):K,ue="padding"in u?u.padding:C.padding,ye=a.P.convert(u.offset);let me,Se;u.around&&(me=a.V.convert(u.around),Se=C.locationToScreenPoint(me));const Ke={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Je=this.cameraHelper.handleEaseTo(C,{bearing:N,pitch:$,roll:se,padding:ue,around:me,aroundPoint:Se,offsetAsPoint:ye,offset:u.offset,zoom:u.zoom,center:u.center});return this._rotating=this._rotating||S!==N,this._pitching=this._pitching||$!==k,this._rolling=this._rolling||se!==K,this._padding=!C.isPaddingEqual(ue),this._zooming=this._zooming||Je.isZooming,this._easeId=u.easeId,this._prepareEase(p,u.noMoveStart,Ke),this.terrain&&this._prepareElevation(Je.elevationCenter),this._ease((nt=>{Je.easeFunc(nt),this.terrain&&!u.freezeElevation&&this._updateElevation(nt),this._applyUpdatedTransform(C),this._fireMoveEvents(p)}),(nt=>{this.terrain&&u.freezeElevation&&this._finalizeElevation(),this._afterEase(p,nt)}),u),this}_prepareEase(u,p,C={}){this._moving=!0,p||C.moving||this.fire(new a.l("movestart",u)),this._zooming&&!C.zooming&&this.fire(new a.l("zoomstart",u)),this._rotating&&!C.rotating&&this.fire(new a.l("rotatestart",u)),this._pitching&&!C.pitching&&this.fire(new a.l("pitchstart",u)),this._rolling&&!C.rolling&&this.fire(new a.l("rollstart",u))}_prepareElevation(u){this._elevationCenter=u,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(u){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const p=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(u<1&&p!==this._elevationTarget){const C=this._elevationTarget-this._elevationStart;this._elevationStart+=u*(C-(p-(C*u+this._elevationStart))/(1-u)),this._elevationTarget=p}this.transform.setElevation(a.G.number(this._elevationStart,this._elevationTarget,u))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(u){if(!this.terrain&&u.elevation>=0&&u.pitch<=90)return{};const p=u.getCameraLngLat(),C=u.getCameraAltitude(),S=this.terrain?this.terrain.getElevationForLngLatZoom(p,u.zoom):0;if(C<S){const k=this.calculateCameraOptionsFromTo(p,S,u.center,u.elevation);return{pitch:k.pitch,zoom:k.zoom}}return{}}_applyUpdatedTransform(u){const p=[];if(p.push((S=>this._elevateCameraIfInsideTerrain(S))),this.transformCameraUpdate&&p.push((S=>this.transformCameraUpdate(S))),!p.length)return;const C=u.clone();for(const S of p){const k=C.clone(),{center:K,zoom:N,roll:$,pitch:se,bearing:ue,elevation:ye}=S(k);K&&k.setCenter(K),ye!==void 0&&k.setElevation(ye),N!==void 0&&k.setZoom(N),$!==void 0&&k.setRoll($),se!==void 0&&k.setPitch(se),ue!==void 0&&k.setBearing(ue),C.apply(k)}this.transform.apply(C)}_fireMoveEvents(u){this.fire(new a.l("move",u)),this._zooming&&this.fire(new a.l("zoom",u)),this._rotating&&this.fire(new a.l("rotate",u)),this._pitching&&this.fire(new a.l("pitch",u)),this._rolling&&this.fire(new a.l("roll",u))}_afterEase(u,p){if(this._easeId&&p&&this._easeId===p)return;delete this._easeId;const C=this._zooming,S=this._rotating,k=this._pitching,K=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,C&&this.fire(new a.l("zoomend",u)),S&&this.fire(new a.l("rotateend",u)),k&&this.fire(new a.l("pitchend",u)),K&&this.fire(new a.l("rollend",u)),this.fire(new a.l("moveend",u))}flyTo(u,p){if(!u.essential&&B.prefersReducedMotion){const Qt=a.U(u,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Qt,p)}this.stop(),u=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.cz},u);const C=this._getTransformForUpdate(),S=C.bearing,k=C.pitch,K=C.roll,N=C.padding,$="bearing"in u?this._normalizeBearing(u.bearing,S):S,se="pitch"in u?+u.pitch:k,ue="roll"in u?this._normalizeBearing(u.roll,K):K,ye="padding"in u?u.padding:C.padding,me=a.P.convert(u.offset);let Se=C.centerPoint.add(me);const Ke=C.screenPointToLocation(Se),Je=this.cameraHelper.handleFlyTo(C,{bearing:$,pitch:se,roll:ue,padding:ye,locationAtOffset:Ke,offsetAsPoint:me,center:u.center,minZoom:u.minZoom,zoom:u.zoom});let nt=u.curve;const tt=Math.max(C.width,C.height),rt=tt/Je.scaleOfZoom,dt=Je.pixelPathLength;typeof Je.scaleOfMinZoom=="number"&&(nt=Math.sqrt(tt/Je.scaleOfMinZoom/dt*2));const st=nt*nt;function ft(Qt){const dn=(rt*rt-tt*tt+(Qt?-1:1)*st*st*dt*dt)/(2*(Qt?rt:tt)*st*dt);return Math.log(Math.sqrt(dn*dn+1)-dn)}function Ct(Qt){return(Math.exp(Qt)-Math.exp(-Qt))/2}function lt(Qt){return(Math.exp(Qt)+Math.exp(-Qt))/2}const Ot=ft(!1);let Ft=function(Qt){return lt(Ot)/lt(Ot+nt*Qt)},zt=function(Qt){return tt*((lt(Ot)*(Ct(dn=Ot+nt*Qt)/lt(dn))-Ct(Ot))/st)/dt;var dn},Gt=(ft(!0)-Ot)/nt;if(Math.abs(dt)<2e-6||!isFinite(Gt)){if(Math.abs(tt-rt)<1e-6)return this.easeTo(u,p);const Qt=rt<tt?-1:1;Gt=Math.abs(Math.log(rt/tt))/nt,zt=()=>0,Ft=dn=>Math.exp(Qt*nt*dn)}return u.duration="duration"in u?+u.duration:1e3*Gt/("screenSpeed"in u?+u.screenSpeed/nt:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=S!==$,this._pitching=se!==k,this._rolling=ue!==K,this._padding=!C.isPaddingEqual(ye),this._prepareEase(p,!1),this.terrain&&this._prepareElevation(Je.targetCenter),this._ease((Qt=>{const dn=Qt*Gt,Rn=1/Ft(dn),An=zt(dn);this._rotating&&C.setBearing(a.G.number(S,$,Qt)),this._pitching&&C.setPitch(a.G.number(k,se,Qt)),this._rolling&&C.setRoll(a.G.number(K,ue,Qt)),this._padding&&(C.interpolatePadding(N,ye,Qt),Se=C.centerPoint.add(me)),Je.easeFunc(Qt,Rn,An,Se),this.terrain&&!u.freezeElevation&&this._updateElevation(Qt),this._applyUpdatedTransform(C),this._fireMoveEvents(p)}),(()=>{this.terrain&&u.freezeElevation&&this._finalizeElevation(),this._afterEase(p)}),u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,p){var C;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const S=this._onEaseEnd;delete this._onEaseEnd,S.call(this,p)}return u||(C=this.handlers)===null||C===void 0||C.stop(!1),this}_ease(u,p,C){C.animate===!1||C.duration===0?(u(1),p()):(this._easeStart=U(),this._easeOptions=C,this._onEaseFrame=u,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(u,p){u=a.W(u,-180,180);const C=Math.abs(u-p);return Math.abs(u-360-p)<C&&(u-=360),Math.abs(u+360-p)<C&&(u+=360),u}queryTerrainElevation(u){return this.terrain?this.terrain.getElevationForLngLat(a.V.convert(u)):null}}const ou={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Zs{constructor(u=ou){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=p=>{!p||p.sourceDataType!=="metadata"&&p.sourceDataType!=="visibility"&&p.dataType!=="style"&&p.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=u}getDefaultPosition(){return"bottom-right"}onAdd(u){return this._map=u,this._compact=this.options.compact,this._container=z.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=z.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=z.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){z.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(u,p){const C=this._map._getUIString(`AttributionControl.${p}`);u.title=C,u.setAttribute("aria-label",C)}_updateAttributions(){if(!this._map.style)return;let u=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=u.concat(this.options.customAttribution.map((S=>typeof S!="string"?"":S))):typeof this.options.customAttribution=="string"&&u.push(this.options.customAttribution)),this._map.style.stylesheet){const S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}const p=this._map.style.tileManagers;for(const S in p){const k=p[S];if(k.used||k.usedForTerrain){const K=k.getSource();K.attribution&&u.indexOf(K.attribution)<0&&u.push(K.attribution)}}u=u.filter((S=>String(S).trim())),u.sort(((S,k)=>S.length-k.length)),u=u.filter(((S,k)=>{for(let K=k+1;K<u.length;K++)if(u[K].indexOf(S)>=0)return!1;return!0}));const C=u.join(" | ");C!==this._attribHTML&&(this._attribHTML=C,u.length?(this._innerContainer.innerHTML=z.sanitize(C),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class dh{constructor(u={}){this._updateCompact=()=>{const p=this._container.children;if(p.length){const C=p[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&C.classList.add("maplibregl-compact"):C.classList.remove("maplibregl-compact")}},this.options=u}getDefaultPosition(){return"bottom-left"}onAdd(u){this._map=u,this._compact=this.options&&this.options.compact,this._container=z.create("div","maplibregl-ctrl");const p=z.create("a","maplibregl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){z.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class $r{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const p=++this._id;return this._queue.push({callback:u,id:p,cancelled:!1}),p}remove(u){const p=this._currentlyRunning,C=p?this._queue.concat(p):this._queue;for(const S of C)if(S.id===u)return void(S.cancelled=!0)}run(u=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const p=this._currentlyRunning=this._queue;this._queue=[];for(const C of p)if(!C.cancelled&&(C.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var ki=a.aV([{name:"a_pos3d",type:"Int16",components:3}]);class Uo extends a.E{constructor(u){super(),this._lastTilesetChange=U(),this.tileManager=u,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=u._source.tileSize*2**this.deltaZoom,u.usedForTerrain=!0,u.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(u,p){this.tileManager.update(u,p),this._renderableTilesKeys=[];const C={};for(const S of Ri(u,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:p,calculateTileZoom:this.tileManager._source.calculateTileZoom}))C[S.key]=!0,this._renderableTilesKeys.push(S.key),this._tiles[S.key]||(S.terrainRttPosMatrix32f=new Float64Array(16),a.c8(S.terrainRttPosMatrix32f,0,a.a5,a.a5,0,0,1),this._tiles[S.key]=new $e(S,this.tileSize),this._lastTilesetChange=U());for(const S in this._tiles)C[S]||delete this._tiles[S]}freeRtt(u){for(const p in this._tiles){const C=this._tiles[p];(!u||C.tileID.equals(u)||C.tileID.isChildOf(u)||u.isChildOf(C.tileID))&&(C.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((u=>this.getTileByID(u)))}getTileByID(u){return this._tiles[u]}getTerrainCoords(u,p){return p?this._getTerrainCoordsForTileRanges(u,p):this._getTerrainCoordsForRegularTile(u)}_getTerrainCoordsForRegularTile(u){const p={};for(const C of this._renderableTilesKeys){const S=this._tiles[C].tileID,k=u.clone(),K=a.bl();if(S.canonical.equals(u.canonical))a.c8(K,0,a.a5,a.a5,0,0,1);else if(S.canonical.isChildOf(u.canonical)){const N=S.canonical.z-u.canonical.z,$=S.canonical.x-(S.canonical.x>>N<<N),se=S.canonical.y-(S.canonical.y>>N<<N),ue=a.a5>>N;a.c8(K,0,ue,ue,0,0,1),a.O(K,K,[-$*ue,-se*ue,0])}else{if(!u.canonical.isChildOf(S.canonical))continue;{const N=u.canonical.z-S.canonical.z,$=u.canonical.x-(u.canonical.x>>N<<N),se=u.canonical.y-(u.canonical.y>>N<<N),ue=a.a5>>N;a.c8(K,0,a.a5,a.a5,0,0,1),a.O(K,K,[$*ue,se*ue,0]),a.Q(K,K,[1/2**N,1/2**N,0])}}k.terrainRttPosMatrix32f=new Float32Array(K),p[C]=k}return p}_getTerrainCoordsForTileRanges(u,p){const C={};for(const S of this._renderableTilesKeys){const k=this._tiles[S].tileID;if(!this._isWithinTileRanges(k,p))continue;const K=u.clone(),N=a.bl();if(k.canonical.z===u.canonical.z){const $=u.canonical.x-k.canonical.x,se=u.canonical.y-k.canonical.y;a.c8(N,0,a.a5,a.a5,0,0,1),a.O(N,N,[$*a.a5,se*a.a5,0])}else if(k.canonical.z>u.canonical.z){const $=k.canonical.z-u.canonical.z,se=k.canonical.x-(k.canonical.x>>$<<$),ue=k.canonical.y-(k.canonical.y>>$<<$),ye=u.canonical.x-(k.canonical.x>>$),me=u.canonical.y-(k.canonical.y>>$),Se=a.a5>>$;a.c8(N,0,Se,Se,0,0,1),a.O(N,N,[-se*Se+ye*a.a5,-ue*Se+me*a.a5,0])}else{const $=u.canonical.z-k.canonical.z,se=u.canonical.x-(u.canonical.x>>$<<$),ue=u.canonical.y-(u.canonical.y>>$<<$),ye=(u.canonical.x>>$)-k.canonical.x,me=(u.canonical.y>>$)-k.canonical.y,Se=a.a5<<$;a.c8(N,0,Se,Se,0,0,1),a.O(N,N,[se*a.a5+ye*Se,ue*a.a5+me*Se,0])}K.terrainRttPosMatrix32f=new Float32Array(N),C[S]=K}return C}getSourceTile(u,p){const C=this.tileManager._source;let S=u.overscaledZ-this.deltaZoom;if(S>C.maxzoom&&(S=C.maxzoom),S<C.minzoom)return;this._sourceTileCache[u.key]||(this._sourceTileCache[u.key]=u.scaledTo(S).key);let k=this.findTileInCaches(this._sourceTileCache[u.key]);if(!k?.dem&&p)for(;S>=C.minzoom&&!k?.dem;)k=this.findTileInCaches(u.scaledTo(S--).key);return k}findTileInCaches(u){let p=this.tileManager.getTileByID(u);return p||(p=this.tileManager._outOfViewCache.getByKey(u),p)}anyTilesAfterTime(u=Date.now()){return this._lastTilesetChange>=u}_isWithinTileRanges(u,p){return p[u.canonical.z]&&u.canonical.x>=p[u.canonical.z].minTileX&&u.canonical.x<=p[u.canonical.z].maxTileX&&u.canonical.y>=p[u.canonical.z].minTileY&&u.canonical.y<=p[u.canonical.z].maxTileY}}class ls{constructor(u,p,C){this._meshCache={},this.painter=u,this.tileManager=new Uo(p),this.options=C,this.exaggeration=typeof C.exaggeration=="number"?C.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(u,p,C,S=a.a5){var k;if(!(p>=0&&p<S&&C>=0&&C<S))return 0;const K=this.getTerrainData(u),N=(k=K.tile)===null||k===void 0?void 0:k.dem;if(!N)return 0;const $=a.cD([],[p/S*a.a5,C/S*a.a5],K.u_terrain_matrix),se=[$[0]*N.dim,$[1]*N.dim],ue=Math.floor(se[0]),ye=Math.floor(se[1]),me=se[0]-ue,Se=se[1]-ye;return N.get(ue,ye)*(1-me)*(1-Se)+N.get(ue+1,ye)*me*(1-Se)+N.get(ue,ye+1)*(1-me)*Se+N.get(ue+1,ye+1)*me*Se}getElevationForLngLatZoom(u,p){if(!a.cE(p,u.wrap()))return 0;const{tileID:C,mercatorX:S,mercatorY:k}=this._getOverscaledTileIDFromLngLatZoom(u,p);return this.getElevation(C,S%a.a5,k%a.a5,a.a5)}getElevationForLngLat(u){return this.getElevationForLngLatZoom(u,this.tileManager.maxzoom)}getElevation(u,p,C,S=a.a5){return this.getDEMElevation(u,p,C,S)*this.exaggeration}getTerrainData(u){if(!this._emptyDemTexture){const S=this.painter.context,k=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(S,k,S.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(S,new a.R({width:1,height:1}),S.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(S.gl.NEAREST,S.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.as([])}const p=this.tileManager.getSourceTile(u,!0);if(p&&p.dem&&(!p.demTexture||p.needsTerrainPrepare)){const S=this.painter.context;p.demTexture=this.painter.getTileTexture(p.dem.stride),p.demTexture?p.demTexture.update(p.dem.getPixels(),{premultiply:!1}):p.demTexture=new a.T(S,p.dem.getPixels(),S.gl.RGBA,{premultiply:!1}),p.demTexture.bind(S.gl.NEAREST,S.gl.CLAMP_TO_EDGE),p.needsTerrainPrepare=!1}const C=p&&p+p.tileID.key+u.key;if(C&&!this._demMatrixCache[C]){const S=this.tileManager.getSource().maxzoom;let k=u.canonical.z-p.tileID.canonical.z;u.overscaledZ>u.canonical.z&&(u.canonical.z>=S?k=u.canonical.z-S:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const K=u.canonical.x-(u.canonical.x>>k<<k),N=u.canonical.y-(u.canonical.y>>k<<k),$=a.cF(new Float64Array(16),[1/(a.a5<<k),1/(a.a5<<k),0]);a.O($,$,[K*a.a5,N*a.a5,0]),this._demMatrixCache[u.key]={matrix:$,coord:u}}return{u_depth:2,u_terrain:3,u_terrain_dim:p&&p.dem&&p.dem.dim||1,u_terrain_matrix:C?this._demMatrixCache[u.key].matrix:this._emptyDemMatrix,u_terrain_unpack:p&&p.dem&&p.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(p&&p.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:p}}getFramebuffer(u){const p=this.painter,C=p.width/devicePixelRatio,S=p.height/devicePixelRatio;return!this._fbo||this._fbo.width===C&&this._fbo.height===S||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(p.context,{width:C,height:S,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(p.context,{width:C,height:S,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=p.context.createFramebuffer(C,S,!0,!1),this._fbo.depthAttachment.set(p.context.createRenderbuffer(p.context.gl.DEPTH_COMPONENT16,C,S))),this._fbo.colorAttachment.set(u==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const u=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const p=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let k=0,K=0;k<this._coordsTextureSize;k++)for(let N=0;N<this._coordsTextureSize;N++,K+=4)p[K+0]=255&N,p[K+1]=255&k,p[K+2]=N>>8<<4|k>>8,p[K+3]=0;const C=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(p.buffer)),S=new a.T(u,C,u.gl.RGBA,{premultiply:!1});return S.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),this._coordsTexture=S,S}pointCoordinate(u){this.painter.maybeDrawDepthAndCoords(!0);const p=new Uint8Array(4),C=this.painter.context,S=C.gl,k=Math.round(u.x*this.painter.pixelRatio/devicePixelRatio),K=Math.round(u.y*this.painter.pixelRatio/devicePixelRatio),N=Math.round(this.painter.height/devicePixelRatio);C.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),S.readPixels(k,N-K-1,1,1,S.RGBA,S.UNSIGNED_BYTE,p),C.bindFramebuffer.set(null);const $=p[0]+(p[2]>>4<<8),se=p[1]+((15&p[2])<<8),ue=this.coordsIndex[255-p[3]],ye=ue&&this.tileManager.getTileByID(ue);if(!ye)return null;const me=this._coordsTextureSize,Se=(1<<ye.tileID.canonical.z)*me;return new a.ab((ye.tileID.canonical.x*me+$)/Se+ye.tileID.wrap,(ye.tileID.canonical.y*me+se)/Se,this.getElevation(ye.tileID,$,se,me))}depthAtPoint(u){const p=new Uint8Array(4),C=this.painter.context,S=C.gl;return C.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),S.readPixels(u.x,this.painter.height/devicePixelRatio-u.y-1,1,1,S.RGBA,S.UNSIGNED_BYTE,p),C.bindFramebuffer.set(null),(p[0]/16777216+p[1]/65536+p[2]/256+p[3])/256}getTerrainMesh(u){var p;const C=((p=this.painter.style.projection)===null||p===void 0?void 0:p.transitionState)>0,S=C&&u.canonical.y===0,k=C&&u.canonical.y===(1<<u.canonical.z)-1,K=`m_${S?"n":""}_${k?"s":""}`;if(this._meshCache[K])return this._meshCache[K];const N=this.painter.context,$=new a.cG,se=new a.aZ,ue=this.meshSize,ye=a.a5/ue,me=ue*ue;for(let lt=0;lt<=ue;lt++)for(let Ot=0;Ot<=ue;Ot++)$.emplaceBack(Ot*ye,lt*ye,0);for(let lt=0;lt<me;lt+=ue+1)for(let Ot=0;Ot<ue;Ot++)se.emplaceBack(Ot+lt,ue+Ot+lt+1,ue+Ot+lt+2),se.emplaceBack(Ot+lt,ue+Ot+lt+2,Ot+lt+1);const Se=$.length,Ke=Se+(ue+1),Je=(ue+1)*ue,nt=S?a.bs:0,tt=S?0:1,rt=k?a.bt:a.a5,dt=k?0:1;for(let lt=0;lt<=ue;lt++)$.emplaceBack(lt*ye,nt,tt);for(let lt=0;lt<=ue;lt++)$.emplaceBack(lt*ye,rt,dt);for(let lt=0;lt<ue;lt++)se.emplaceBack(Je+lt,Ke+lt,Ke+lt+1),se.emplaceBack(Je+lt,Ke+lt+1,Je+lt+1),se.emplaceBack(0+lt,Se+lt+1,Se+lt),se.emplaceBack(0+lt,0+lt+1,Se+lt+1);const st=$.length,ft=st+2*(ue+1);for(const lt of[0,1])for(let Ot=0;Ot<=ue;Ot++)for(const Ft of[0,1])$.emplaceBack(lt*a.a5,Ot*ye,Ft);for(let lt=0;lt<2*ue;lt+=2)se.emplaceBack(st+lt,st+lt+1,st+lt+3),se.emplaceBack(st+lt,st+lt+3,st+lt+2),se.emplaceBack(ft+lt,ft+lt+3,ft+lt+1),se.emplaceBack(ft+lt,ft+lt+2,ft+lt+3);const Ct=new to(N.createVertexBuffer($,ki.members),N.createIndexBuffer(se),a.aY.simpleSegment(0,0,$.length,se.length));return this._meshCache[K]=Ct,Ct}getMeshFrameDelta(u){return 2*Math.PI*a.bF/Math.pow(2,Math.max(u,0))/5}getMinTileElevationForLngLatZoom(u,p){var C;if(!a.cE(p,u.wrap()))return 0;const{tileID:S}=this._getOverscaledTileIDFromLngLatZoom(u,p);return(C=this.getMinMaxElevation(S).minElevation)!==null&&C!==void 0?C:0}getMinMaxElevation(u){const p=this.getTerrainData(u).tile,C={minElevation:null,maxElevation:null};return p&&p.dem&&(C.minElevation=p.dem.min*this.exaggeration,C.maxElevation=p.dem.max*this.exaggeration),C}_getOverscaledTileIDFromLngLatZoom(u,p){const C=a.ab.fromLngLat(u.wrap()),S=(1<<p)*a.a5,k=C.x*S,K=C.y*S,N=Math.floor(k/a.a5),$=Math.floor(K/a.a5);return{tileID:new a.a2(p,0,p,N,$),mercatorX:k,mercatorY:K}}}class Jh{constructor(u,p,C){this._context=u,this._size=p,this._tileSize=C,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const u of this._objects)u.texture.destroy(),u.fbo.destroy()}_createObject(u){const p=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),C=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return C.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),p.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),p.colorAttachment.set(C.texture),{id:u,fbo:p,texture:C,stamp:-1,inUse:!1}}getObjectForId(u){return this._objects[u]}useObject(u){u.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((p=>u.id!==p)),this._recentlyUsed.push(u.id)}stampObject(u){u.stamp=++this._stamp}getOrCreateFreeObject(){for(const p of this._recentlyUsed)if(!this._objects[p].inUse)return this._objects[p];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const u=this._createObject(this._objects.length);return this._objects.push(u),u}freeObject(u){u.inUse=!1}freeAllObjects(){for(const u of this._objects)this.freeObject(u)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((u=>!u.inUse))===!1}}const nc={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class fh{constructor(u,p){this.painter=u,this.terrain=p,this.pool=new Jh(u.context,30,p.tileManager.tileSize*p.qualityFactor)}destruct(){this.pool.destruct()}getTexture(u){return this.pool.getObjectForId(u.rtt[this._stacks.length-1].id).texture}prepareForRender(u,p){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=u._order.filter((C=>!u._layers[C].isHidden(p))),this._coordsAscending={};for(const C in u.tileManagers){this._coordsAscending[C]={};const S=u.tileManagers[C].getVisibleCoordinates(),k=u.tileManagers[C].getSource(),K=k instanceof Bn?k.terrainTileRanges:null;for(const N of S){const $=this.terrain.tileManager.getTerrainCoords(N,K);for(const se in $)this._coordsAscending[C][se]||(this._coordsAscending[C][se]=[]),this._coordsAscending[C][se].push($[se])}}this._coordsAscendingStr={};for(const C of u._order){const S=u._layers[C],k=S.source;if(nc[S.type]&&!this._coordsAscendingStr[k]){this._coordsAscendingStr[k]={};for(const K in this._coordsAscending[k])this._coordsAscendingStr[k][K]=this._coordsAscending[k][K].map((N=>N.key)).sort().join()}}for(const C of this._renderableTiles)for(const S in this._coordsAscendingStr){const k=this._coordsAscendingStr[S][C.tileID.key];k&&k!==C.rttCoords[S]&&(C.rtt=[])}}renderLayer(u,p){if(u.isHidden(this.painter.transform.zoom))return!1;const C=Object.assign(Object.assign({},p),{isRenderingToTexture:!0}),S=u.type,k=this.painter,K=this._renderableLayerIds[this._renderableLayerIds.length-1]===u.id;if(nc[S]&&(this._prevType&&nc[this._prevType]||this._stacks.push([]),this._prevType=S,this._stacks[this._stacks.length-1].push(u.id),!K))return!0;if(nc[this._prevType]||nc[S]&&K){this._prevType=S;const N=this._stacks.length-1,$=this._stacks[N]||[];for(const se of this._renderableTiles){if(this.pool.isFull()&&(l0(this.painter,this.terrain,this._rttTiles,C),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(se),se.rtt[N]){const ye=this.pool.getObjectForId(se.rtt[N].id);if(ye.stamp===se.rtt[N].stamp){this.pool.useObject(ye);continue}}const ue=this.pool.getOrCreateFreeObject();this.pool.useObject(ue),this.pool.stampObject(ue),se.rtt[N]={id:ue.id,stamp:ue.stamp},k.context.bindFramebuffer.set(ue.fbo.framebuffer),k.context.clear({color:a.bq.transparent,stencil:0}),k.currentStencilSource=void 0;for(let ye=0;ye<$.length;ye++){const me=k.style._layers[$[ye]],Se=me.source?this._coordsAscending[me.source][se.tileID.key]:[se.tileID];k.context.viewport.set([0,0,ue.fbo.width,ue.fbo.height]),k._renderTileClippingMasks(me,Se,!0),k.renderLayer(k,k.style.tileManagers[me.source],me,Se,C),me.source&&(se.rttCoords[me.source]=this._coordsAscendingStr[me.source][se.tileID.key])}}return l0(this.painter,this.terrain,this._rttTiles,C),this._rttTiles=[],this.pool.freeAllObjects(),nc[S]}return!1}}const Uf={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},RA=c,nA={hash:!1,interactive:!0,bearingSnap:7,attributionControl:ou,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},Lg={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class us{constructor(u,p,C=!1){this.mousedown=k=>{this.startMove(k,z.mousePos(this.element,k)),z.addEventListener(window,"mousemove",this.mousemove),z.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=k=>{this.move(k,z.mousePos(this.element,k))},this.mouseup=k=>{this._rotatePitchHandler.dragEnd(k),this.offTemp()},this.touchstart=k=>{k.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=z.touchPos(this.element,k.targetTouches)[0],this.startMove(k,this._startPos),z.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),z.addEventListener(window,"touchend",this.touchend))},this.touchmove=k=>{k.targetTouches.length!==1?this.reset():(this._lastPos=z.touchPos(this.element,k.targetTouches)[0],this.move(k,this._lastPos))},this.touchend=k=>{k.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=p;const S=new Wd;this._rotatePitchHandler=new hl({clickTolerance:3,move:(k,K)=>{const N=p.getBoundingClientRect(),$=new a.P((N.bottom-N.top)/2,(N.right-N.left)/2);return{bearingDelta:a.cy(new a.P(k.x,K.y),K,$),pitchDelta:C?-.5*(K.y-k.y):void 0}},moveStateManager:S,enable:!0,assignEvents:()=>{}}),this.map=u,z.addEventListener(p,"mousedown",this.mousedown),z.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),z.addEventListener(p,"touchcancel",this.reset)}startMove(u,p){this._rotatePitchHandler.dragStart(u,p),z.disableDrag()}move(u,p){const C=this.map,{bearingDelta:S,pitchDelta:k}=this._rotatePitchHandler.dragMove(u,p)||{};S&&C.setBearing(C.getBearing()+S),k&&C.setPitch(C.getPitch()+k)}off(){const u=this.element;z.removeEventListener(u,"mousedown",this.mousedown),z.removeEventListener(u,"touchstart",this.touchstart,{passive:!1}),z.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),z.removeEventListener(window,"touchend",this.touchend),z.removeEventListener(u,"touchcancel",this.reset),this.offTemp()}offTemp(){z.enableDrag(),z.removeEventListener(window,"mousemove",this.mousemove),z.removeEventListener(window,"mouseup",this.mouseup),z.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),z.removeEventListener(window,"touchend",this.touchend)}}let Tc;function qd(I,u,p,C=!1){if(C||!p.getCoveringTilesDetailsProvider().allowWorldCopies())return I?.wrap();const S=new a.V(I.lng,I.lat);if(I=new a.V(I.lng,I.lat),u){const k=new a.V(I.lng-360,I.lat),K=new a.V(I.lng+360,I.lat),N=p.locationToScreenPoint(I).distSqr(u);p.locationToScreenPoint(k).distSqr(u)<N?I=k:p.locationToScreenPoint(K).distSqr(u)<N&&(I=K)}for(;Math.abs(I.lng-p.center.lng)>180;){const k=p.locationToScreenPoint(I);if(k.x>=0&&k.y>=0&&k.x<=p.width&&k.y<=p.height)break;I.lng>p.center.lng?I.lng-=360:I.lng+=360}return I.lng!==S.lng&&p.isPointOnMapSurface(p.locationToScreenPoint(I))?I:S}const Yd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ed(I,u,p){const C=I.classList;for(const S in Yd)C.remove(`maplibregl-${p}-anchor-${S}`);C.add(`maplibregl-${p}-anchor-${u}`)}class Vp extends a.E{constructor(u){if(super(),this._onKeyPress=p=>{const C=p.code,S=p.charCode||p.keyCode;C!=="Space"&&C!=="Enter"&&S!==32&&S!==13||this.togglePopup()},this._onMapClick=p=>{const C=p.originalEvent.target,S=this._element;this._popup&&(C===S||S.contains(C))&&this.togglePopup()},this._update=p=>{if(!this._map)return;const C=this._map.loaded()&&!this._map.isMoving();(p?.type==="terrain"||p?.type==="render"&&!C)&&this._map.once("render",this._update),this._lngLat=qd(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let S="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?S=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(S=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let k="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?k="rotateX(0deg)":this._pitchAlignment==="map"&&(k=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||p&&p.type!=="moveend"||(this._pos=this._pos.round()),z.setTransform(this._element,`${Yd[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${k} ${S}`),B.frameAsync(new AbortController).then((()=>{this._updateOpacity(p&&p.type==="moveend")})).catch((()=>{}))},this._onMove=p=>{if(!this._isDragging){const C=this._clickTolerance||this._map._clickTolerance;this._isDragging=p.point.dist(this._pointerdownPos)>=C}this._isDragging&&(this._pos=p.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=p=>{this._element.contains(p.originalEvent.target)&&(p.preventDefault(),this._positionDelta=p.point.sub(this._pos).add(this._offset),this._pointerdownPos=p.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._subpixelPositioning=u&&u.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,this.setOpacity(u?.opacity,u?.opacityWhenCovered),u&&u.element)this._element=u.element,this._offset=a.P.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=z.create("div");const p=z.createNS("http://www.w3.org/2000/svg","svg"),C=41,S=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${C}px`),p.setAttributeNS(null,"width",`${S}px`),p.setAttributeNS(null,"viewBox",`0 0 ${S} ${C}`);const k=z.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"stroke","none"),k.setAttributeNS(null,"stroke-width","1"),k.setAttributeNS(null,"fill","none"),k.setAttributeNS(null,"fill-rule","evenodd");const K=z.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"fill-rule","nonzero");const N=z.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"transform","translate(3.0, 29.0)"),N.setAttributeNS(null,"fill","#000000");const $=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const tt of $){const rt=z.createNS("http://www.w3.org/2000/svg","ellipse");rt.setAttributeNS(null,"opacity","0.04"),rt.setAttributeNS(null,"cx","10.5"),rt.setAttributeNS(null,"cy","5.80029008"),rt.setAttributeNS(null,"rx",tt.rx),rt.setAttributeNS(null,"ry",tt.ry),N.appendChild(rt)}const se=z.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"fill",this._color);const ue=z.createNS("http://www.w3.org/2000/svg","path");ue.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),se.appendChild(ue);const ye=z.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"opacity","0.25"),ye.setAttributeNS(null,"fill","#000000");const me=z.createNS("http://www.w3.org/2000/svg","path");me.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ye.appendChild(me);const Se=z.createNS("http://www.w3.org/2000/svg","g");Se.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Se.setAttributeNS(null,"fill","#FFFFFF");const Ke=z.createNS("http://www.w3.org/2000/svg","g");Ke.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Je=z.createNS("http://www.w3.org/2000/svg","circle");Je.setAttributeNS(null,"fill","#000000"),Je.setAttributeNS(null,"opacity","0.25"),Je.setAttributeNS(null,"cx","5.5"),Je.setAttributeNS(null,"cy","5.5"),Je.setAttributeNS(null,"r","5.4999962");const nt=z.createNS("http://www.w3.org/2000/svg","circle");nt.setAttributeNS(null,"fill","#FFFFFF"),nt.setAttributeNS(null,"cx","5.5"),nt.setAttributeNS(null,"cy","5.5"),nt.setAttributeNS(null,"r","5.4999962"),Ke.appendChild(Je),Ke.appendChild(nt),K.appendChild(N),K.appendChild(se),K.appendChild(ye),K.appendChild(Se),K.appendChild(Ke),p.appendChild(K),p.setAttributeNS(null,"height",C*this._scale+"px"),p.setAttributeNS(null,"width",S*this._scale+"px"),this._element.appendChild(p),this._offset=a.P.convert(u&&u.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(p=>{p.preventDefault()})),this._element.addEventListener("mousedown",(p=>{p.preventDefault()})),ed(this._element,this._anchor,"marker"),u&&u.className)for(const p of u.className.split(" "))this._element.classList.add(p);this._popup=null}addTo(u){return this.remove(),this._map=u,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",u._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),u.on("terrain",this._update),u.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),z.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=a.V.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const S=Math.abs(13.5)/Math.SQRT2;u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[S,-1*(38.1-13.5+S)],"bottom-right":[-S,-1*(38.1-13.5+S)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(u){return this._subpixelPositioning=u,this}getPopup(){return this._popup}togglePopup(){const u=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:u?(u.isOpen()?u.remove():(u.setLngLat(this._lngLat),u.addTo(this._map)),this):this}_updateOpacity(u=!1){var p,C;const S=(p=this._map)===null||p===void 0?void 0:p.terrain,k=this._map.transform.isLocationOccluded(this._lngLat);if(!S||k){const Se=k?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Se&&(this._element.style.opacity=Se))}if(u)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const K=this._map,N=K.terrain.depthAtPoint(this._pos),$=K.terrain.getElevationForLngLat(this._lngLat);if(K.transform.lngLatToCameraDepth(this._lngLat,$)-N<.006)return void(this._element.style.opacity=this._opacity);const se=-this._offset.y/K.transform.pixelsPerMeter,ue=Math.sin(K.getPitch()*Math.PI/180)*se,ye=K.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),me=K.transform.lngLatToCameraDepth(this._lngLat,$+ue)-ye>.006;!((C=this._popup)===null||C===void 0)&&C.isOpen()&&me&&this._popup.remove(),this._element.style.opacity=me?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(u){return this._offset=a.P.convert(u),this._update(),this}addClassName(u){this._element.classList.add(u)}removeClassName(u){this._element.classList.remove(u)}toggleClassName(u){return this._element.classList.toggle(u)}setDraggable(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(u,p){return(this._opacity===void 0||u===void 0&&p===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),u!==void 0&&(this._opacity=u),p!==void 0&&(this._opacityWhenCovered=p),this._map&&this._updateOpacity(!0),this}}const Kf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let PA=0,ph=!1;const nl={maxWidth:100,unit:"metric"};function gs(I,u,p){const C=p&&p.maxWidth||100,S=I._container.clientHeight/2,k=I._container.clientWidth/2,K=I.unproject([k-C/2,S]),N=I.unproject([k+C/2,S]),$=Math.round(I.project(N).x-I.project(K).x),se=Math.min(C,$,I._container.clientWidth),ue=K.distanceTo(N);if(p&&p.unit==="imperial"){const ye=3.2808*ue;ye>5280?kc(u,se,ye/5280,I._getUIString("ScaleControl.Miles")):kc(u,se,ye,I._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?kc(u,se,ue/1852,I._getUIString("ScaleControl.NauticalMiles")):ue>=1e3?kc(u,se,ue/1e3,I._getUIString("ScaleControl.Kilometers")):kc(u,se,ue,I._getUIString("ScaleControl.Meters"))}function kc(I,u,p,C){const S=(function(k){const K=Math.pow(10,`${Math.floor(k)}`.length-1);let N=k/K;return N=N>=10?10:N>=5?5:N>=3?3:N>=2?2:N>=1?1:(function($){const se=Math.pow(10,Math.ceil(-Math.log($)/Math.LN10));return Math.round($*se)/se})(N),K*N})(p);I.style.width=u*(S/p)+"px",I.innerHTML=`${S}&nbsp;${C}`}const td={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},nd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ff(I){if(I){if(typeof I=="number"){const u=Math.round(Math.abs(I)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,I),"top-left":new a.P(u,u),"top-right":new a.P(-u,u),bottom:new a.P(0,-I),"bottom-left":new a.P(u,-u),"bottom-right":new a.P(-u,-u),left:new a.P(I,0),right:new a.P(-I,0)}}if(I instanceof a.P||Array.isArray(I)){const u=a.P.convert(I);return{center:u,top:u,"top-left":u,"top-right":u,bottom:u,"bottom-left":u,"bottom-right":u,left:u,right:u}}return{center:a.P.convert(I.center||[0,0]),top:a.P.convert(I.top||[0,0]),"top-left":a.P.convert(I["top-left"]||[0,0]),"top-right":a.P.convert(I["top-right"]||[0,0]),bottom:a.P.convert(I.bottom||[0,0]),"bottom-left":a.P.convert(I["bottom-left"]||[0,0]),"bottom-right":a.P.convert(I["bottom-right"]||[0,0]),left:a.P.convert(I.left||[0,0]),right:a.P.convert(I.right||[0,0])}}return Ff(new a.P(0,0))}const ic=c;s.AJAXError=a.cJ,s.Event=a.l,s.Evented=a.E,s.LngLat=a.V,s.MercatorCoordinate=a.ab,s.Point=a.P,s.addProtocol=a.cK,s.config=a.c,s.removeProtocol=a.cL,s.AttributionControl=Zs,s.BoxZoomHandler=Lf,s.CanvasSource=H,s.CooperativeGesturesHandler=ru,s.DoubleClickZoomHandler=Yp,s.DragPanHandler=di,s.DragRotateHandler=si,s.EdgeInsets=oa,s.FullscreenControl=class extends a.E{constructor(I={}){super(),this._onFullscreenChange=()=>{var u;let p=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((u=p?.shadowRoot)===null||u===void 0)&&u.fullscreenElement;)p=p.shadowRoot.fullscreenElement;p===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,I&&I.container&&(I.container instanceof HTMLElement?this._container=I.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(I){return this._map=I,this._container||(this._container=this._map.getContainer()),this._controlContainer=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){z.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const I=this._fullscreenButton=z.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);z.create("span","maplibregl-ctrl-icon",I).setAttribute("aria-hidden","true"),I.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const I=this._getTitle();this._fullscreenButton.setAttribute("aria-label",I),this._fullscreenButton.title=I}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},s.GeoJSONSource=ti,s.GeolocateControl=class extends a.E{constructor(I){super(),this._onSuccess=u=>{if(this._map){if(this._isOutOfMapMaxBounds(u))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",u)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=u,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(u),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(u),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",u)),this._finish()}},this._updateCamera=u=>{const p=new a.V(u.coords.longitude,u.coords.latitude),C=u.coords.accuracy,S=this._map.getBearing(),k=a.e({bearing:S},this.options.fitBoundsOptions),K=en.fromLngLat(p,C);this._map.fitBounds(K,k,{geolocateSource:!0})},this._updateMarker=u=>{if(u){const p=new a.V(u.coords.longitude,u.coords.latitude);this._accuracyCircleMarker.setLngLat(p).addTo(this._map),this._userLocationDotMarker.setLngLat(p).addTo(this._map),this._accuracy=u.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=u=>{if(this._map){if(u.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(u.code===3&&ph)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",u)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(u=>u.preventDefault())),this._geolocateButton=z.create("button","maplibregl-ctrl-geolocate",this._container),z.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=u=>{if(this._map){if(u===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}else{const p=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=z.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Vp({element:this._dotElement}),this._circleElement=z.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Vp({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(p=>{const C=p?.[0]instanceof ResizeObserverEntry;p.geolocateSource||this._watchState!=="ACTIVE_LOCK"||C||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))}))}},this.options=a.e({},Kf,I)}onAdd(I){return this._map=I,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return a._(this,arguments,void 0,(function*(u=!1){if(Tc!==void 0&&!u)return Tc;if(window.navigator.permissions===void 0)return Tc=!!window.navigator.geolocation,Tc;try{Tc=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Tc=!!window.navigator.geolocation}return Tc}))})().then((u=>this._finishSetupUI(u))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),z.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,PA=0,ph=!1}_isOutOfMapMaxBounds(I){const u=this._map.getMaxBounds(),p=I.coords;return u&&(p.longitude<u.getWest()||p.longitude>u.getEast()||p.latitude<u.getSouth()||p.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const I=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&I))return;const u=this._map.project(I),p=this._map.unproject([u.x+100,u.y]),C=I.distanceTo(p)/100,S=2*this._accuracy/C;this._circleElement.style.width=`${S.toFixed(2)}px`,this._circleElement.style.height=`${S.toFixed(2)}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":PA--,ph=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let I;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),PA++,PA>1?(I={maximumAge:6e5,timeout:0},ph=!0):(I=this.options.positionOptions,ph=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,I)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},s.GlobeControl=class{constructor(){this._toggleProjection=()=>{var I;const u=(I=this._map.getProjection())===null||I===void 0?void 0:I.type;this._map.setProjection(u!=="mercator"&&u?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var I;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((I=this._map.getProjection())===null||I===void 0?void 0:I.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(I){return this._map=I,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=z.create("button","maplibregl-ctrl-globe",this._container),z.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){z.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},s.Hash=Is,s.ImageSource=Bn,s.KeyboardHandler=Xh,s.LngLatBounds=en,s.LogoControl=dh,s.Map=class extends Ic{constructor(I){var u,p;a.cH.mark(a.cI.create);const C=Object.assign(Object.assign(Object.assign({},nA),I),{canvasContextAttributes:Object.assign(Object.assign({},nA.canvasContextAttributes),I.canvasContextAttributes)});if(C.minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const S=new Et,k=new Fi;if(C.minZoom!==void 0&&S.setMinZoom(C.minZoom),C.maxZoom!==void 0&&S.setMaxZoom(C.maxZoom),C.minPitch!==void 0&&S.setMinPitch(C.minPitch),C.maxPitch!==void 0&&S.setMaxPitch(C.maxPitch),C.renderWorldCopies!==void 0&&S.setRenderWorldCopies(C.renderWorldCopies),C.transformConstrain!==null&&S.setConstrainOverride(C.transformConstrain),super(S,k,{bearingSnap:C.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new $r,this._controls=[],this._mapId=a.ah(),this._lostContextStyle={style:null,images:null},this._contextLost=N=>{N.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const $ of Object.values(this.style._layers))if($.type==="custom"&&console.warn(`Custom layer with id '${$.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),$._listeners)for(const[se]of Object.entries($._listeners))console.warn(`Custom layer with id '${$.id}' had event listeners for event '${se}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new a.l("webglcontextlost",{originalEvent:N}))},this._contextRestored=N=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:N}))},this._onMapScroll=N=>{if(N.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=C.interactive,this._maxTileCacheSize=C.maxTileCacheSize,this._maxTileCacheZoomLevels=C.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},C.canvasContextAttributes),this._trackResize=C.trackResize===!0,this._bearingSnap=C.bearingSnap,this._centerClampedToGround=C.centerClampedToGround,this._refreshExpiredTiles=C.refreshExpiredTiles===!0,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions===!0,this._collectResourceTiming=C.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Uf),C.locale),this._clickTolerance=C.clickTolerance,this._overridePixelRatio=C.pixelRatio,this._maxCanvasSize=C.maxCanvasSize,this._zoomLevelsToOverscale=C.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=C.transformCameraUpdate,this.transformConstrain=C.transformConstrain,this.cancelPendingTileRequestsWhileZooming=C.cancelPendingTileRequestsWhileZooming===!0,C.reduceMotion!==void 0&&(B.prefersReducedMotion=C.reduceMotion),this._imageQueueHandle=q.addThrottleControl((()=>this.isMoving())),this._requestManager=new le(C.transformRequest),typeof C.container=="string"){if(this._container=document.getElementById(C.container),!this._container)throw new Error(`Container '${C.container}' not found.`)}else{if(!(C.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let N=!1;const $=Rg((se=>{this._trackResize&&!this._removed&&(this.resize(se),this.redraw())}),50);this._resizeObserver=new ResizeObserver((se=>{N?$(se):N=!0})),this._resizeObserver.observe(this._container)}this.handlers=new Pg(this,C),this._hash=C.hash&&new Is(typeof C.hash=="string"&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,elevation:C.elevation,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch,roll:C.roll}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,a.e({},C.fitBoundsOptions,{duration:0}))));const K=typeof C.style=="string"||((p=(u=C.style)===null||u===void 0?void 0:u.projection)===null||p===void 0?void 0:p.type)!=="globe";this.resize(null,K),this._localIdeographFontFamily=C.localIdeographFontFamily,this._validateStyle=C.validateStyle,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new Zs(typeof C.attributionControl=="boolean"?void 0:C.attributionControl)),C.maplibreLogo&&this.addControl(new dh,C.logoPosition),this.on("style.load",(()=>{if(K||this._resizeTransform(),this.transform.unmodified){const N=a.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(N)}})),this.on("data",(N=>{this._update(N.dataType==="style"),this.fire(new a.l(`${N.dataType}data`,N))})),this.on("dataloading",(N=>{this.fire(new a.l(`${N.dataType}dataloading`,N))})),this.on("dataabort",(N=>{this.fire(new a.l("sourcedataabort",N))}))}_getMapId(){return this._mapId}setGlobalStateProperty(I,u){return this.style.setGlobalStateProperty(I,u),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(I,u){if(u===void 0&&(u=I.getDefaultPosition?I.getDefaultPosition():"top-right"),!I||!I.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=I.onAdd(this);this._controls.push(I);const C=this._controlPositions[u];return u.indexOf("bottom")!==-1?C.insertBefore(p,C.firstChild):C.appendChild(p),this}removeControl(I){if(!I||!I.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(I);return u>-1&&this._controls.splice(u,1),I.onRemove(this),this}hasControl(I){return this._controls.indexOf(I)>-1}coveringTiles(I){return Ri(this.transform,I)}calculateCameraOptionsFromTo(I,u,p,C){return C==null&&this.terrain&&(C=this.terrain.getElevationForLngLat(p)),super.calculateCameraOptionsFromTo(I,u,p,C)}resize(I,u=!0){const[p,C]=this._containerDimensions(),S=this._getClampedPixelRatio(p,C);if(this._resizeCanvas(p,C,S),this.painter.resize(p,C,S),this.painter.overLimit()){const K=this.painter.context.gl;this._maxCanvasSize=[K.drawingBufferWidth,K.drawingBufferHeight];const N=this._getClampedPixelRatio(p,C);this._resizeCanvas(p,C,N),this.painter.resize(p,C,N)}this._resizeTransform(u);const k=!this._moving;return k&&(this.stop(),this.fire(new a.l("movestart",I)).fire(new a.l("move",I))),this.fire(new a.l("resize",I)),k&&this.fire(new a.l("moveend",I)),this}_resizeTransform(I=!0){var u;const[p,C]=this._containerDimensions();this.transform.resize(p,C,I),(u=this._requestedCameraState)===null||u===void 0||u.resize(p,C,I)}_getClampedPixelRatio(I,u){const{0:p,1:C}=this._maxCanvasSize,S=this.getPixelRatio(),k=I*S,K=u*S;return Math.min(k>p?p/k:1,K>C?C/K:1)*S}getPixelRatio(){var I;return(I=this._overridePixelRatio)!==null&&I!==void 0?I:devicePixelRatio}setPixelRatio(I){this._overridePixelRatio=I,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(I){return this.transform.setMaxBounds(en.convert(I)),this._update()}setMinZoom(I){if((I=I??-2)>=-2&&I<=this.transform.maxZoom)return this.transform.setMinZoom(I),this._update(),this.getZoom()<I&&this.setZoom(I),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(I){if((I=I??22)>=this.transform.minZoom)return this.transform.setMaxZoom(I),this._update(),this.getZoom()>I&&this.setZoom(I),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(I){if((I=I??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(I>=0&&I<=this.transform.maxPitch)return this.transform.setMinPitch(I),this._update(),this.getPitch()<I&&this.setPitch(I),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(I){if((I=I??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(I>=this.transform.minPitch)return this.transform.setMaxPitch(I),this._update(),this.getPitch()>I&&this.setPitch(I),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(I){return this.transform.setRenderWorldCopies(I),this._update()}setTransformConstrain(I){return this.transform.setConstrainOverride(I),this._update()}project(I){return this.transform.locationToScreenPoint(a.V.convert(I),this.style&&this.terrain)}unproject(I){return this.transform.screenPointToLocation(a.P.convert(I),this.terrain)}isMoving(){var I;return this._moving||((I=this.handlers)===null||I===void 0?void 0:I.isMoving())}isZooming(){var I;return this._zooming||((I=this.handlers)===null||I===void 0?void 0:I.isZooming())}isRotating(){var I;return this._rotating||((I=this.handlers)===null||I===void 0?void 0:I.isRotating())}_createDelegatedListener(I,u,p){if(I==="mouseenter"||I==="mouseover"){let C=!1;return{layers:u,listener:p,delegates:{mousemove:k=>{const K=u.filter(($=>this.getLayer($))),N=K.length!==0?this.queryRenderedFeatures(k.point,{layers:K}):[];N.length?C||(C=!0,p.call(this,new Ts(I,this,k.originalEvent,{features:N}))):C=!1},mouseout:()=>{C=!1}}}}if(I==="mouseleave"||I==="mouseout"){let C=!1;return{layers:u,listener:p,delegates:{mousemove:K=>{const N=u.filter(($=>this.getLayer($)));(N.length!==0?this.queryRenderedFeatures(K.point,{layers:N}):[]).length?C=!0:C&&(C=!1,p.call(this,new Ts(I,this,K.originalEvent)))},mouseout:K=>{C&&(C=!1,p.call(this,new Ts(I,this,K.originalEvent)))}}}}{const C=S=>{const k=u.filter((N=>this.getLayer(N))),K=k.length!==0?this.queryRenderedFeatures(S.point,{layers:k}):[];K.length&&(S.features=K,p.call(this,S),delete S.features)};return{layers:u,listener:p,delegates:{[I]:C}}}}_saveDelegatedListener(I,u){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[I]=this._delegatedListeners[I]||[],this._delegatedListeners[I].push(u)}_removeDelegatedListener(I,u,p){if(!this._delegatedListeners||!this._delegatedListeners[I])return;const C=this._delegatedListeners[I];for(let S=0;S<C.length;S++){const k=C[S];if(k.listener===p&&k.layers.length===u.length&&k.layers.every((K=>u.includes(K)))){for(const K in k.delegates)this.off(K,k.delegates[K]);return void C.splice(S,1)}}}on(I,u,p){if(p===void 0)return super.on(I,u);const C=typeof u=="string"?[u]:u,S=this._createDelegatedListener(I,C,p);this._saveDelegatedListener(I,S);for(const k in S.delegates)this.on(k,S.delegates[k]);return{unsubscribe:()=>{this._removeDelegatedListener(I,C,p)}}}once(I,u,p){if(p===void 0)return super.once(I,u);const C=typeof u=="string"?[u]:u,S=this._createDelegatedListener(I,C,p);for(const k in S.delegates){const K=S.delegates[k];S.delegates[k]=(...N)=>{this._removeDelegatedListener(I,C,p),K(...N)}}this._saveDelegatedListener(I,S);for(const k in S.delegates)this.once(k,S.delegates[k]);return this}off(I,u,p){return p===void 0?super.off(I,u):(this._removeDelegatedListener(I,typeof u=="string"?[u]:u,p),this)}queryRenderedFeatures(I,u){if(!this.style)return[];let p;const C=I instanceof a.P||Array.isArray(I),S=C?I:[[0,0],[this.transform.width,this.transform.height]];if(u=u||(C?{}:I)||{},S instanceof a.P||typeof S[0]=="number")p=[a.P.convert(S)];else{const k=a.P.convert(S[0]),K=a.P.convert(S[1]);p=[k,new a.P(K.x,k.y),K,new a.P(k.x,K.y),k]}return this.style.queryRenderedFeatures(p,u,this.transform)}querySourceFeatures(I,u){return this.style.querySourceFeatures(I,u)}setStyle(I,u){return(u=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&I?(this._diffStyle(I,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._updateStyle(I,u))}setTransformRequest(I){return this._requestManager.setTransformRequest(I),this}_getUIString(I){const u=this._locale[I];if(u==null)throw new Error(`Missing UI string '${I}'`);return u}_updateStyle(I,u){var p,C;if(u.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(I,u)));const S=this.style&&u.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!I)),I?(this.style=new Uh(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof I=="string"?this.style.loadURL(I,u,S):this.style.loadJSON(I,u,S),this):((C=(p=this.style)===null||p===void 0?void 0:p.projection)===null||C===void 0||C.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Uh(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(I,u){if(typeof I=="string"){const p=this._requestManager.transformRequest(I,"Style");a.j(p,new AbortController).then((C=>{this._updateDiff(C.data,u)})).catch((C=>{C&&this.fire(new a.k(C))}))}else typeof I=="object"&&this._updateDiff(I,u)}_updateDiff(I,u){try{this.style.setState(I,u)&&this._update(!0)}catch(p){a.w(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(I,u)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(I,u){return this._lazyInitEmptyStyle(),this.style.addSource(I,u),this._update(!0)}isSourceLoaded(I){const u=this.style&&this.style.tileManagers[I];if(u!==void 0)return u.loaded();this.fire(new a.k(new Error(`There is no tile manager with ID '${I}'`)))}setTerrain(I){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),I){const u=this.style.tileManagers[I.source];if(!u)throw new Error(`cannot load terrain, because there exists no source with ID: ${I.source}`);this.terrain===null&&u.reload();for(const p in this.style._layers){const C=this.style._layers[p];C.type==="hillshade"&&C.source===I.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),C.type==="color-relief"&&C.source===I.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ls(this.painter,u,I),this.painter.renderToTexture=new fh(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=p=>{var C;p.dataType==="style"?this.terrain.tileManager.freeRtt():p.dataType==="source"&&p.tile&&(p.sourceId!==I.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((C=p.source)===null||C===void 0?void 0:C.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(p.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:I})),this}getTerrain(){var I,u;return(u=(I=this.terrain)===null||I===void 0?void 0:I.options)!==null&&u!==void 0?u:null}areTilesLoaded(){const I=this.style&&this.style.tileManagers;for(const u of Object.values(I))if(!u.areTilesLoaded())return!1;return!0}removeSource(I){return this.style.removeSource(I),this._update(!0)}getSource(I){return this.style.getSource(I)}setSourceTileLodParams(I,u,p){if(p){const C=this.getSource(p);if(!C)throw new Error(`There is no source with ID "${p}", cannot set LOD parameters`);C.calculateTileZoom=Hn(Math.max(1,I),Math.max(1,u))}else for(const C in this.style.tileManagers)this.style.tileManagers[C].getSource().calculateTileZoom=Hn(Math.max(1,I),Math.max(1,u));return this._update(!0),this}refreshTiles(I,u){const p=this.style.tileManagers[I];if(!p)throw new Error(`There is no tile manager with ID "${I}", cannot refresh tile`);u===void 0?p.reload(!0):p.refreshTiles(u.map((C=>new a.ae(C.z,C.x,C.y))))}addImage(I,u,p={}){const{pixelRatio:C=1,sdf:S=!1,stretchX:k,stretchY:K,content:N,textFitWidth:$,textFitHeight:se}=p;if(this._lazyInitEmptyStyle(),!(u instanceof HTMLImageElement||a.b(u))){if(u.width===void 0||u.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ue,height:ye,data:me}=u,Se=u;return this.style.addImage(I,{data:new a.R({width:ue,height:ye},new Uint8Array(me)),pixelRatio:C,stretchX:k,stretchY:K,content:N,textFitWidth:$,textFitHeight:se,sdf:S,version:0,userImage:Se}),Se.onAdd&&Se.onAdd(this,I),this}}{const{width:ue,height:ye,data:me}=B.getImageData(u);this.style.addImage(I,{data:new a.R({width:ue,height:ye},me),pixelRatio:C,stretchX:k,stretchY:K,content:N,textFitWidth:$,textFitHeight:se,sdf:S,version:0})}}updateImage(I,u){const p=this.style.getImage(I);if(!p)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const C=u instanceof HTMLImageElement||a.b(u)?B.getImageData(u):u,{width:S,height:k,data:K}=C;if(S===void 0||k===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(S!==p.data.width||k!==p.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const N=!(u instanceof HTMLImageElement||a.b(u));return p.data.replace(K,N),this.style.updateImage(I,p),this}getImage(I){return this.style.getImage(I)}hasImage(I){return I?!!this.style.getImage(I):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(I){this.style.removeImage(I)}loadImage(I){return q.getImage(this._requestManager.transformRequest(I,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(I,u){return this._lazyInitEmptyStyle(),this.style.addLayer(I,u),this._update(!0)}moveLayer(I,u){return this.style.moveLayer(I,u),this._update(!0)}removeLayer(I){return this.style.removeLayer(I),this._update(!0)}getLayer(I){return this.style.getLayer(I)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(I,u,p){return this.style.setLayerZoomRange(I,u,p),this._update(!0)}setFilter(I,u,p={}){return this.style.setFilter(I,u,p),this._update(!0)}getFilter(I){return this.style.getFilter(I)}setPaintProperty(I,u,p,C={}){return this.style.setPaintProperty(I,u,p,C),this._update(!0)}getPaintProperty(I,u){return this.style.getPaintProperty(I,u)}setLayoutProperty(I,u,p,C={}){return this.style.setLayoutProperty(I,u,p,C),this._update(!0)}getLayoutProperty(I,u){return this.style.getLayoutProperty(I,u)}setGlyphs(I,u={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(I,u),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(I,u,p={}){return this._lazyInitEmptyStyle(),this.style.addSprite(I,u,p,(C=>{C||this._update(!0)})),this}removeSprite(I){return this._lazyInitEmptyStyle(),this.style.removeSprite(I),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(I,u={}){return this._lazyInitEmptyStyle(),this.style.setSprite(I,u,(p=>{p||this._update(!0)})),this}setLight(I,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(I,u),this._update(!0)}getLight(){return this.style.getLight()}setSky(I,u={}){return this._lazyInitEmptyStyle(),this.style.setSky(I,u),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(I,u){return this.style.setFeatureState(I,u),this._update()}removeFeatureState(I,u){return this.style.removeFeatureState(I,u),this._update()}getFeatureState(I){return this.style.getFeatureState(I)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let I=0,u=0;return this._container&&(I=this._container.clientWidth||400,u=this._container.clientHeight||300),[I,u]}_setupContainer(){const I=this._container;I.classList.add("maplibregl-map");const u=this._canvasContainer=z.create("div","maplibregl-canvas-container",I);this._interactive&&u.classList.add("maplibregl-interactive"),this._canvas=z.create("canvas","maplibregl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const p=this._containerDimensions(),C=this._getClampedPixelRatio(p[0],p[1]);this._resizeCanvas(p[0],p[1],C);const S=this._controlContainer=z.create("div","maplibregl-control-container",I),k=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((K=>{k[K]=z.create("div",`maplibregl-ctrl-${K} `,S)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(I,u,p){this._canvas.width=Math.floor(p*I),this._canvas.height=Math.floor(p*u),this._canvas.style.width=`${I}px`,this._canvas.style.height=`${u}px`}_setupPainter(){const I=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let u=null;this._canvas.addEventListener("webglcontextcreationerror",(C=>{u={requestedAttributes:I},C&&(u.statusMessage=C.statusMessage,u.type=C.type)}),{once:!0});let p=null;if(p=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,I):this._canvas.getContext("webgl2",I)||this._canvas.getContext("webgl",I),!p){const C="Failed to initialize WebGL";throw u?(u.message=C,new Error(JSON.stringify(u))):new Error(C)}this.painter=new ey(p,this.transform),V.testSupport(p)}migrateProjection(I,u){super.migrateProjection(I,u),this.painter.transform=I,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(I){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||I,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(I){return this._update(),this._renderTaskQueue.add(I)}_cancelRenderFrame(I){this._renderTaskQueue.remove(I)}_render(I){var u,p,C,S,k;const K=this._idleTriggered?this._fadeDuration:0,N=((u=this.style.projection)===null||u===void 0?void 0:u.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(I),this._removed)return;let $=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ye=this.transform.zoom,me=U();this.style.zoomHistory.update(ye,me);const Se=new a.H(ye,{now:me,fadeDuration:K,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ke=Se.crossFadingFactor();Ke===1&&Ke===this._crossFadingFactor||($=!0,this._crossFadingFactor=Ke),this.style.update(Se)}const se=((p=this.style.projection)===null||p===void 0?void 0:p.transitionState)>0!==N;(C=this.style.projection)===null||C===void 0||C.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((S=this.style.projection)===null||S===void 0?void 0:S.transitionState,(k=this.style.projection)===null||k===void 0?void 0:k.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||se)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,K,this._crossSourceCollisions,se),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:K,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cH.mark(a.cI.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||$)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const ue=this._sourcesDirty||this._styleDirty||this._placementDirty;return ue||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||ue||(this._fullyLoaded=!0,a.cH.mark(a.cI.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var I;this._hash&&this._hash.remove();for(const p of this._controls)p.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),q.removeThrottleControl(this._imageQueueHandle),(I=this._resizeObserver)===null||I===void 0||I.disconnect();const u=this.painter.context.gl.getExtension("WEBGL_lose_context");u?.loseContext&&u.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),z.remove(this._canvasContainer),z.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cH.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,B.frame(this._frameRequest,(I=>{a.cH.frame(I),this._frameRequest=null;try{this._render(I)}catch(u){if(!a.Z(u)&&!(function(p){return p.message===Yh})(u))throw u}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(I){this._showTileBoundaries!==I&&(this._showTileBoundaries=I,this._update())}get showPadding(){return!!this._showPadding}set showPadding(I){this._showPadding!==I&&(this._showPadding=I,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(I){this._showCollisionBoxes!==I&&(this._showCollisionBoxes=I,I?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(I){this._showOverdrawInspector!==I&&(this._showOverdrawInspector=I,this._update())}get repaint(){return!!this._repaint}set repaint(I){this._repaint!==I&&(this._repaint=I,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(I){this._vertices=I,this._update()}get version(){return RA}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(I){return this._lazyInitEmptyStyle(),this.style.setProjection(I),this._update(!0)}},s.MapMouseEvent=Ts,s.MapTouchEvent=Jc,s.MapWheelEvent=Gp,s.Marker=Vp,s.NavigationControl=class{constructor(I){this._updateZoomButtons=()=>{const u=this._map.getZoom(),p=u===this._map.getMaxZoom(),C=u===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=C,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",C.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(u,p)=>{const C=this._map._getUIString(`NavigationControl.${p}`);u.title=C,u.setAttribute("aria-label",C)},this.options=a.e({},Lg,I),this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(u=>u.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(u=>this._map.zoomIn({},{originalEvent:u}))),z.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(u=>this._map.zoomOut({},{originalEvent:u}))),z.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(u=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:u}):this._map.resetNorth({},{originalEvent:u})})),this._compassIcon=z.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(I){return this._map=I,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new us(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){z.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(I,u){const p=z.create("button",I,this._container);return p.type="button",p.addEventListener("click",u),p}},s.Popup=class extends a.E{constructor(I){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&z.remove(this._content),this._container&&(z.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=u=>{this._update(u.point)},this._onMouseMove=u=>{this._update(u.point)},this._onDrag=u=>{this._update(u.point)},this._update=u=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=z.create("div","maplibregl-popup",this._map.getContainer()),this._tip=z.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const K of this.options.className.split(" "))this._container.classList.add(K);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=qd(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!u)return;const p=this._flatPos=this._pos=this._trackPointer&&u?u:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&u?u:this._map.transform.locationToScreenPoint(this._lngLat));let C=this.options.anchor;const S=Ff(this.options.offset);if(!C){const K=this._container.offsetWidth,N=this._container.offsetHeight;let $;$=p.y+S.bottom.y<N?["top"]:p.y>this._map.transform.height-N?["bottom"]:[],p.x<K/2?$.push("left"):p.x>this._map.transform.width-K/2&&$.push("right"),C=$.length===0?"bottom":$.join("-")}let k=p.add(S[C]);this.options.subpixelPositioning||(k=k.round()),z.setTransform(this._container,`${Yd[C]} translate(${k.x}px,${k.y}px)`),ed(this._container,C,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(td),I)}addTo(I){return this._map&&this.remove(),this._map=I,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(I){return this._lngLat=a.V.convert(I),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(I){return this.setDOMContent(document.createTextNode(I))}setHTML(I){const u=document.createDocumentFragment(),p=document.createElement("body");let C;for(p.innerHTML=I;C=p.firstChild,C;)u.appendChild(C);return this.setDOMContent(u)}getMaxWidth(){var I;return(I=this._container)===null||I===void 0?void 0:I.style.maxWidth}setMaxWidth(I){return this.options.maxWidth=I,this._update(),this}setDOMContent(I){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=z.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(I),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(I){return this._container&&this._container.classList.add(I),this}removeClassName(I){return this._container&&this._container.classList.remove(I),this}setOffset(I){return this.options.offset=I,this._update(),this}toggleClassName(I){if(this._container)return this._container.classList.toggle(I)}setSubpixelPositioning(I){this.options.subpixelPositioning=I}_createCloseButton(){this.options.closeButton&&(this._closeButton=z.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const I=this._container.querySelector(nd);I&&I.focus()}},s.RasterDEMTileSource=Un,s.RasterTileSource=Si,s.ScaleControl=class{constructor(I){this._onMove=()=>{gs(this._map,this._container,this.options)},this.setUnit=u=>{this.options.unit=u,gs(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},nl),I)}getDefaultPosition(){return"bottom-left"}onAdd(I){return this._map=I,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-scale",I.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){z.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},s.ScrollZoomHandler=ec,s.Style=Uh,s.TerrainControl=class{constructor(I){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=I}onAdd(I){return this._map=I,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=z.create("button","maplibregl-ctrl-terrain",this._container),z.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){z.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},s.TwoFingersTouchPitchHandler=Oc,s.TwoFingersTouchRotateHandler=Bc,s.TwoFingersTouchZoomHandler=Ju,s.TwoFingersTouchZoomRotateHandler=DA,s.VectorTileSource=Nn,s.VideoSource=je,s.addSourceType=(I,u)=>a._(void 0,void 0,void 0,(function*(){if(Q(I))throw new Error(`A source type called "${I}" already exists.`);((p,C)=>{j[p]=C})(I,u)})),s.clearPrewarmedResources=function(){const I=Ut;I&&(I.isPreloaded()&&I.numActive()===1?(I.release(St),Ut=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},s.createTileMesh=eh,s.getMaxParallelImageRequests=function(){return a.c.MAX_PARALLEL_IMAGE_REQUESTS},s.getRTLTextPluginStatus=function(){return Qe().getRTLTextPluginStatus()},s.getVersion=function(){return ic},s.getWorkerCount=function(){return ut.workerCount},s.getWorkerUrl=function(){return a.c.WORKER_URL},s.importScriptInWorkers=function(I){return Ze().broadcast("IS",I)},s.isTimeFrozen=function(){return P.isFrozen()},s.now=U,s.prewarm=function(){ke().acquire(St)},s.restoreNow=function(){P.restoreNow()},s.setMaxParallelImageRequests=function(I){a.c.MAX_PARALLEL_IMAGE_REQUESTS=I},s.setNow=function(I){P.setNow(I)},s.setRTLTextPlugin=function(I,u){return Qe().setRTLTextPlugin(I,u)},s.setWorkerCount=function(I){ut.workerCount=I},s.setWorkerUrl=function(I){a.c.WORKER_URL=I}}));var o=t;return o}))})(fS)),fS.exports}var Fde=Kde();const mx=vu(Fde);function Uz(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(m){try{d(i.next(m))}catch(v){s(v)}}function c(m){try{d(i.throw(m))}catch(v){s(v)}}function d(m){m.done?o(m.value):r(m.value).then(a,c)}d((i=i.apply(n,[])).next())})}var HM=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function LX(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var G3={exports:{}};G3.exports;var Kz;function zde(){return Kz||(Kz=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=1,o=2,s=9007199254740991,a="[object Arguments]",c="[object Array]",d="[object AsyncFunction]",m="[object Boolean]",v="[object Date]",M="[object Error]",B="[object Function]",P="[object GeneratorFunction]",U="[object Map]",z="[object Number]",V="[object Null]",Z="[object Object]",X="[object Promise]",re="[object Proxy]",ie="[object RegExp]",te="[object Set]",q="[object String]",le="[object Symbol]",ce="[object Undefined]",ve="[object WeakMap]",ge="[object ArrayBuffer]",Ee="[object DataView]",xe="[object Float32Array]",Te="[object Float64Array]",Fe="[object Int8Array]",Ie="[object Int16Array]",Ye="[object Int32Array]",At="[object Uint8Array]",mt="[object Uint8ClampedArray]",Ue="[object Uint16Array]",De="[object Uint32Array]",Ge=/[\\^$.*+?()[\]{}|]/g,Re=/^\[object .+?Constructor\]$/,St=/^(?:0|[1-9]\d*)$/,ut={};ut[xe]=ut[Te]=ut[Fe]=ut[Ie]=ut[Ye]=ut[At]=ut[mt]=ut[Ue]=ut[De]=!0,ut[a]=ut[c]=ut[ge]=ut[m]=ut[Ee]=ut[v]=ut[M]=ut[B]=ut[U]=ut[z]=ut[Z]=ut[ie]=ut[te]=ut[q]=ut[ve]=!1;var kt=typeof HM=="object"&&HM&&HM.Object===Object&&HM,Ut=typeof self=="object"&&self&&self.Object===Object&&self,Le=kt||Ut||Function("return this")(),ke=e&&!e.nodeType&&e,Oe=ke&&!0&&n&&!n.nodeType&&n,Ze=Oe&&Oe.exports===ke,bt=Ze&&kt.process,yt=(function(){try{return bt&&bt.binding&&bt.binding("util")}catch{}})(),Mt=yt&&yt.isTypedArray;function Kt(ne,Ce){for(var He=-1,Et=ne==null?0:ne.length,Qn=0,Dn=[];++He<Et;){var Oi=ne[He];Ce(Oi,He,ne)&&(Dn[Qn++]=Oi)}return Dn}function Dt(ne,Ce){for(var He=-1,Et=Ce.length,Qn=ne.length;++He<Et;)ne[Qn+He]=Ce[He];return ne}function en(ne,Ce){for(var He=-1,Et=ne==null?0:ne.length;++He<Et;)if(Ce(ne[He],He,ne))return!0;return!1}function Gn(ne,Ce){for(var He=-1,Et=Array(ne);++He<ne;)Et[He]=Ce(He);return Et}function Nn(ne){return function(Ce){return ne(Ce)}}function Si(ne,Ce){return ne.has(Ce)}function Un(ne,Ce){return ne?.[Ce]}function Ln(ne){var Ce=-1,He=Array(ne.size);return ne.forEach(function(Et,Qn){He[++Ce]=[Qn,Et]}),He}function Tn(ne,Ce){return function(He){return ne(Ce(He))}}function ti(ne){var Ce=-1,He=Array(ne.size);return ne.forEach(function(Et){He[++Ce]=Et}),He}var Bn=Array.prototype,je=Function.prototype,H=Object.prototype,j=Le["__core-js_shared__"],Q=je.toString,he=H.hasOwnProperty,Me=(function(){var ne=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||"");return ne?"Symbol(src)_1."+ne:""})(),Ne=H.toString,Qe=RegExp("^"+Q.call(he).replace(Ge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),it=Ze?Le.Buffer:void 0,vt=Le.Symbol,$e=Le.Uint8Array,ot=H.propertyIsEnumerable,b=Bn.splice,Rt=vt?vt.toStringTag:void 0,mn=Object.getOwnPropertySymbols,bn=it?it.isBuffer:void 0,Cn=Tn(Object.keys,Object),xt=Mo(Le,"DataView"),Ci=Mo(Le,"Map"),Ki=Mo(Le,"Promise"),Wn=Mo(Le,"Set"),Hn=Mo(Le,"WeakMap"),Qi=Mo(Object,"create"),Wi=Xo(xt),Ri=Xo(Ci),qi=Xo(Ki),Li=Xo(Wn),Er=Xo(Hn),xo=vt?vt.prototype:void 0,un=xo?xo.valueOf:void 0;function tr(ne){var Ce=-1,He=ne==null?0:ne.length;for(this.clear();++Ce<He;){var Et=ne[Ce];this.set(Et[0],Et[1])}}function Wo(){this.__data__=Qi?Qi(null):{},this.size=0}function ra(ne){var Ce=this.has(ne)&&delete this.__data__[ne];return this.size-=Ce?1:0,Ce}function oo(ne){var Ce=this.__data__;if(Qi){var He=Ce[ne];return He===i?void 0:He}return he.call(Ce,ne)?Ce[ne]:void 0}function kn(ne){var Ce=this.__data__;return Qi?Ce[ne]!==void 0:he.call(Ce,ne)}function Xi(ne,Ce){var He=this.__data__;return this.size+=this.has(ne)?0:1,He[ne]=Qi&&Ce===void 0?i:Ce,this}tr.prototype.clear=Wo,tr.prototype.delete=ra,tr.prototype.get=oo,tr.prototype.has=kn,tr.prototype.set=Xi;function ui(ne){var Ce=-1,He=ne==null?0:ne.length;for(this.clear();++Ce<He;){var Et=ne[Ce];this.set(Et[0],Et[1])}}function Ka(){this.__data__=[],this.size=0}function yA(ne){var Ce=this.__data__,He=lr(Ce,ne);if(He<0)return!1;var Et=Ce.length-1;return He==Et?Ce.pop():b.call(Ce,He,1),--this.size,!0}function xl(ne){var Ce=this.__data__,He=lr(Ce,ne);return He<0?void 0:Ce[He][1]}function Vi(ne){return lr(this.__data__,ne)>-1}function Qu(ne,Ce){var He=this.__data__,Et=lr(He,ne);return Et<0?(++this.size,He.push([ne,Ce])):He[Et][1]=Ce,this}ui.prototype.clear=Ka,ui.prototype.delete=yA,ui.prototype.get=xl,ui.prototype.has=Vi,ui.prototype.set=Qu;function co(ne){var Ce=-1,He=ne==null?0:ne.length;for(this.clear();++Ce<He;){var Et=ne[Ce];this.set(Et[0],Et[1])}}function $a(){this.size=0,this.__data__={hash:new tr,map:new(Ci||ui),string:new tr}}function Ml(ne){var Ce=hs(this,ne).delete(ne);return this.size-=Ce?1:0,Ce}function Fa(ne){return hs(this,ne).get(ne)}function Ro(ne){return hs(this,ne).has(ne)}function gc(ne,Ce){var He=hs(this,ne),Et=He.size;return He.set(ne,Ce),this.size+=He.size==Et?0:1,this}co.prototype.clear=$a,co.prototype.delete=Ml,co.prototype.get=Fa,co.prototype.has=Ro,co.prototype.set=gc;function Qo(ne){var Ce=-1,He=ne==null?0:ne.length;for(this.__data__=new co;++Ce<He;)this.add(ne[Ce])}function mr(ne){return this.__data__.set(ne,i),this}function za(ne){return this.__data__.has(ne)}Qo.prototype.add=Qo.prototype.push=mr,Qo.prototype.has=za;function Zo(ne){var Ce=this.__data__=new ui(ne);this.size=Ce.size}function bu(){this.__data__=new ui,this.size=0}function Cu(ne){var Ce=this.__data__,He=Ce.delete(ne);return this.size=Ce.size,He}function ul(ne){return this.__data__.get(ne)}function Vc(ne){return this.__data__.has(ne)}function cl(ne,Ce){var He=this.__data__;if(He instanceof ui){var Et=He.__data__;if(!Ci||Et.length<t-1)return Et.push([ne,Ce]),this.size=++He.size,this;He=this.__data__=new co(Et)}return He.set(ne,Ce),this.size=He.size,this}Zo.prototype.clear=bu,Zo.prototype.delete=Cu,Zo.prototype.get=ul,Zo.prototype.has=Vc,Zo.prototype.set=cl;function ja(ne,Ce){var He=Ao(ne),Et=!He&&Jo(ne),Qn=!He&&!Et&&_i(ne),Dn=!He&&!Et&&!Qn&&oa(ne),Oi=He||Et||Qn||Dn,Fi=Oi?Gn(ne.length,String):[],qn=Fi.length;for(var Ei in ne)he.call(ne,Ei)&&!(Oi&&(Ei=="length"||Qn&&(Ei=="offset"||Ei=="parent")||Dn&&(Ei=="buffer"||Ei=="byteLength"||Ei=="byteOffset")||Mu(Ei,qn)))&&Fi.push(Ei);return Fi}function lr(ne,Ce){for(var He=ne.length;He--;)if(Vu(ne[He][0],Ce))return He;return-1}function qu(ne,Ce,He){var Et=Ce(ne);return Ao(ne)?Et:Dt(Et,He(ne))}function wl(ne){return ne==null?ne===void 0?ce:V:Rt&&Rt in Object(ne)?Hl(ne):Ha(ne)}function Sl(ne){return Yr(ne)&&wl(ne)==a}function _u(ne,Ce,He,Et,Qn){return ne===Ce?!0:ne==null||Ce==null||!Yr(ne)&&!Yr(Ce)?ne!==ne&&Ce!==Ce:yc(ne,Ce,He,Et,_u,Qn)}function yc(ne,Ce,He,Et,Qn,Dn){var Oi=Ao(ne),Fi=Ao(Ce),qn=Oi?c:Es(ne),Ei=Fi?c:Es(Ce);qn=qn==a?Z:qn,Ei=Ei==a?Z:Ei;var ei=qn==Z,ri=Ei==Z,hr=qn==Ei;if(hr&&_i(ne)){if(!_i(Ce))return!1;Oi=!0,ei=!1}if(hr&&!ei)return Dn||(Dn=new Zo),Oi||oa(ne)?Yl(ne,Ce,He,Et,Qn,Dn):$c(ne,Ce,qn,He,Et,Qn,Dn);if(!(He&r)){var ni=ei&&he.call(ne,"__wrapped__"),Kr=ri&&he.call(Ce,"__wrapped__");if(ni||Kr){var wo=ni?ne.value():ne,Po=Kr?Ce.value():Ce;return Dn||(Dn=new Zo),Qn(wo,Po,He,Et,Dn)}}return hr?(Dn||(Dn=new Zo),Vl(ne,Ce,He,Et,Qn,Dn)):!1}function Rh(ne){if(!Fs(ne)||Yu(ne))return!1;var Ce=$s(ne)?Qe:Re;return Ce.test(Xo(ne))}function Vs(ne){return Yr(ne)&&go(ne.length)&&!!ut[wl(ne)]}function vc(ne){if(!Ji(ne))return Cn(ne);var Ce=[];for(var He in Object(ne))he.call(ne,He)&&He!="constructor"&&Ce.push(He);return Ce}function Yl(ne,Ce,He,Et,Qn,Dn){var Oi=He&r,Fi=ne.length,qn=Ce.length;if(Fi!=qn&&!(Oi&&qn>Fi))return!1;var Ei=Dn.get(ne);if(Ei&&Dn.get(Ce))return Ei==Ce;var ei=-1,ri=!0,hr=He&o?new Qo:void 0;for(Dn.set(ne,Ce),Dn.set(Ce,ne);++ei<Fi;){var ni=ne[ei],Kr=Ce[ei];if(Et)var wo=Oi?Et(Kr,ni,ei,Ce,ne,Dn):Et(ni,Kr,ei,ne,Ce,Dn);if(wo!==void 0){if(wo)continue;ri=!1;break}if(hr){if(!en(Ce,function(Po,ds){if(!Si(hr,ds)&&(ni===Po||Qn(ni,Po,He,Et,Dn)))return hr.push(ds)})){ri=!1;break}}else if(!(ni===Kr||Qn(ni,Kr,He,Et,Dn))){ri=!1;break}}return Dn.delete(ne),Dn.delete(Ce),ri}function $c(ne,Ce,He,Et,Qn,Dn,Oi){switch(He){case Ee:if(ne.byteLength!=Ce.byteLength||ne.byteOffset!=Ce.byteOffset)return!1;ne=ne.buffer,Ce=Ce.buffer;case ge:return!(ne.byteLength!=Ce.byteLength||!Dn(new $e(ne),new $e(Ce)));case m:case v:case z:return Vu(+ne,+Ce);case M:return ne.name==Ce.name&&ne.message==Ce.message;case ie:case q:return ne==Ce+"";case U:var Fi=Ln;case te:var qn=Et&r;if(Fi||(Fi=ti),ne.size!=Ce.size&&!qn)return!1;var Ei=Oi.get(ne);if(Ei)return Ei==Ce;Et|=o,Oi.set(ne,Ce);var ei=Yl(Fi(ne),Fi(Ce),Et,Qn,Dn,Oi);return Oi.delete(ne),ei;case le:if(un)return un.call(ne)==un.call(Ce)}return!1}function Vl(ne,Ce,He,Et,Qn,Dn){var Oi=He&r,Fi=$l(ne),qn=Fi.length,Ei=$l(Ce),ei=Ei.length;if(qn!=ei&&!Oi)return!1;for(var ri=qn;ri--;){var hr=Fi[ri];if(!(Oi?hr in Ce:he.call(Ce,hr)))return!1}var ni=Dn.get(ne);if(ni&&Dn.get(Ce))return ni==Ce;var Kr=!0;Dn.set(ne,Ce),Dn.set(Ce,ne);for(var wo=Oi;++ri<qn;){hr=Fi[ri];var Po=ne[hr],ds=Ce[hr];if(Et)var eh=Oi?Et(ds,Po,hr,Ce,ne,Dn):Et(Po,ds,hr,ne,Ce,Dn);if(!(eh===void 0?Po===ds||Qn(Po,ds,He,Et,Dn):eh)){Kr=!1;break}wo||(wo=hr=="constructor")}if(Kr&&!wo){var El=ne.constructor,fs=Ce.constructor;El!=fs&&"constructor"in ne&&"constructor"in Ce&&!(typeof El=="function"&&El instanceof El&&typeof fs=="function"&&fs instanceof fs)&&(Kr=!1)}return Dn.delete(ne),Dn.delete(Ce),Kr}function $l(ne){return qu(ne,Za,xu)}function hs(ne,Ce){var He=ne.__data__;return Zl(Ce)?He[typeof Ce=="string"?"string":"hash"]:He.map}function Mo(ne,Ce){var He=Un(ne,Ce);return Rh(He)?He:void 0}function Hl(ne){var Ce=he.call(ne,Rt),He=ne[Rt];try{ne[Rt]=void 0;var Et=!0}catch{}var Qn=Ne.call(ne);return Et&&(Ce?ne[Rt]=He:delete ne[Rt]),Qn}var xu=mn?function(ne){return ne==null?[]:(ne=Object(ne),Kt(mn(ne),function(Ce){return ot.call(ne,Ce)}))}:$i,Es=wl;(xt&&Es(new xt(new ArrayBuffer(1)))!=Ee||Ci&&Es(new Ci)!=U||Ki&&Es(Ki.resolve())!=X||Wn&&Es(new Wn)!=te||Hn&&Es(new Hn)!=ve)&&(Es=function(ne){var Ce=wl(ne),He=Ce==Z?ne.constructor:void 0,Et=He?Xo(He):"";if(Et)switch(Et){case Wi:return Ee;case Ri:return U;case qi:return X;case Li:return te;case Er:return ve}return Ce});function Mu(ne,Ce){return Ce=Ce??s,!!Ce&&(typeof ne=="number"||St.test(ne))&&ne>-1&&ne%1==0&&ne<Ce}function Zl(ne){var Ce=typeof ne;return Ce=="string"||Ce=="number"||Ce=="symbol"||Ce=="boolean"?ne!=="__proto__":ne===null}function Yu(ne){return!!Me&&Me in ne}function Ji(ne){var Ce=ne&&ne.constructor,He=typeof Ce=="function"&&Ce.prototype||H;return ne===He}function Ha(ne){return Ne.call(ne)}function Xo(ne){if(ne!=null){try{return Q.call(ne)}catch{}try{return ne+""}catch{}}return""}function Vu(ne,Ce){return ne===Ce||ne!==ne&&Ce!==Ce}var Jo=Sl((function(){return arguments})())?Sl:function(ne){return Yr(ne)&&he.call(ne,"callee")&&!ot.call(ne,"callee")},Ao=Array.isArray;function ho(ne){return ne!=null&&go(ne.length)&&!$s(ne)}var _i=bn||Tr;function to(ne,Ce){return _u(ne,Ce)}function $s(ne){if(!Fs(ne))return!1;var Ce=wl(ne);return Ce==B||Ce==P||Ce==d||Ce==re}function go(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=s}function Fs(ne){var Ce=typeof ne;return ne!=null&&(Ce=="object"||Ce=="function")}function Yr(ne){return ne!=null&&typeof ne=="object"}var oa=Mt?Nn(Mt):Vs;function Za(ne){return ho(ne)?ja(ne):vc(ne)}function $i(){return[]}function Tr(){return!1}n.exports=to})(G3,G3.exports)),G3.exports}var jde=zde(),Nde=LX(jde);function J9(n,e,t){const i={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(i["source-layer"]=t),i}function eD(n,e,t,i){const r={id:[t,i,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return i&&(r["source-layer"]=i),r}function tD(n,e,t){const i={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(i["source-layer"]=t),i}function Fz(n,e){return{circle:e(n,.8),line:e(n,.6),polygon:e(n,.3),polygonOutline:e(n,.6),default:e(n,1)}}function Gde(n,e){const t=[],i=[],r=[];for(const o of Object.keys(n)){const s=n[o];if(!s||s.length===0){const a=Fz(o,e);i.push(J9(a.circle,o)),r.push(tD(a.line,o)),t.push(eD(a.polygon,a.polygonOutline,o))}else for(const a of s){const c=Fz(a,e);i.push(J9(c.circle,o,a)),r.push(tD(c.line,o,a)),t.push(eD(c.polygon,c.polygonOutline,o,a))}}return t.concat(r).concat(i)}function Wde(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const i={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},r={};for(const o of Object.keys(n.sources)){const s=n.sources[o];(s.type==="vector"||s.type==="geojson")&&(r[o]=s)}return Object.assign(n,{layers:[i].concat(e),sources:r})}var zz={polygonLayer:eD,lineLayer:tD,circleLayer:J9,generateInspectStyle:Wde,generateColoredLayers:Gde};class Qde{constructor(e){e=Object.assign({show:!0,onToggle(){}},e),this._btn=this.createButton(),this._btn.onclick=e.onToggle,this.elem=this.createContainer(this._btn,e.show)}createButton(){const e=document.createElement("button");return e.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect",e.type="button",e.title="Toggle Inspect",e.setAttribute("aria-label","Toggle Inspect"),e}createContainer(e,t){const i=document.createElement("div");return i.className="maplibregl-ctrl maplibregl-ctrl-group",i.appendChild(e),t||(i.style.display="none"),i}setInspectIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect"}setMapIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-map"}}function qde(n){return typeof n>"u"||n===null?n:n instanceof Date?n.toLocaleString():typeof n=="object"||typeof n=="number"||typeof n=="string"?n.toString():n}function qO(n,e){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${n}</div><div class="maplibregl-inspect_property-value">${qde(e)}</div></div>`}function Yde(n){return`<div class="maplibregl-inspect_layer">${n}</div>`}function Vde(n){const e=Yde(n.layer["source-layer"]||n.layer.source),t=qO("$id",n.id),i=qO("$type",n.geometry.type),r=Object.keys(n.properties).map(o=>qO(o,n.properties[o]));return[e,t,i].concat(r).join("")}function $de(n){return n.map(e=>`<div class="maplibregl-inspect_feature">${Vde(e)}</div>`).join("")}function Hde(n){return`<div class="maplibregl-inspect_popup">${$de(n)}</div>`}var W3={exports:{}},Zde=W3.exports,jz;function Xde(){return jz||(jz=1,(function(n,e){(function(t,i){{var r=i();n&&n.exports&&(e=n.exports=r),e.randomColor=r}})(Zde,function(){var t=null,i={};V();var r=[],o=function(q){if(q=q||{},q.seed!==void 0&&q.seed!==null&&q.seed===parseInt(q.seed,10))t=q.seed;else if(typeof q.seed=="string")t=ie(q.seed);else{if(q.seed!==void 0&&q.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var le,ce,ve;if(q.count!==null&&q.count!==void 0){for(var ge=q.count,Ee=[],xe=0;xe<q.count;xe++)r.push(!1);for(q.count=null;ge>Ee.length;){var Te=o(q);t!==null&&(q.seed=t),Ee.push(Te)}return q.count=ge,Ee}return le=s(q),ce=a(le,q),ve=c(le,ce,q),d([le,ce,ve],q)};function s(q){if(r.length>0){var le=te(q.hue),ce=P(le),ve=(le[1]-le[0])/r.length,ge=parseInt((ce-le[0])/ve);r[ge]===!0?ge=(ge+2)%r.length:r[ge]=!0;var Ee=(le[0]+ge*ve)%359,xe=(le[0]+(ge+1)*ve)%359;return le=[Ee,xe],ce=P(le),ce<0&&(ce=360+ce),ce}else{var le=v(q.hue);return ce=P(le),ce<0&&(ce=360+ce),ce}}function a(q,le){if(le.hue==="monochrome")return 0;if(le.luminosity==="random")return P([0,100]);var ce=M(q),ve=ce[0],ge=ce[1];switch(le.luminosity){case"bright":ve=55;break;case"dark":ve=ge-10;break;case"light":ge=55;break}return P([ve,ge])}function c(q,le,ce){var ve=m(q,le),ge=100;switch(ce.luminosity){case"dark":ge=ve+20;break;case"light":ve=(ge+ve)/2;break;case"random":ve=0,ge=100;break}return P([ve,ge])}function d(q,le){switch(le.format){case"hsvArray":return q;case"hslArray":return re(q);case"hsl":var ce=re(q);return"hsl("+ce[0]+", "+ce[1]+"%, "+ce[2]+"%)";case"hsla":var ve=re(q),xe=le.alpha||Math.random();return"hsla("+ve[0]+", "+ve[1]+"%, "+ve[2]+"%, "+xe+")";case"rgbArray":return Z(q);case"rgb":var ge=Z(q);return"rgb("+ge.join(", ")+")";case"rgba":var Ee=Z(q),xe=le.alpha||Math.random();return"rgba("+Ee.join(", ")+", "+xe+")";default:return U(q)}}function m(q,le){for(var ce=B(q).lowerBounds,ve=0;ve<ce.length-1;ve++){var ge=ce[ve][0],Ee=ce[ve][1],xe=ce[ve+1][0],Te=ce[ve+1][1];if(le>=ge&&le<=xe){var Fe=(Te-Ee)/(xe-ge),Ie=Ee-Fe*ge;return Fe*le+Ie}}return 0}function v(q){if(typeof parseInt(q)=="number"){var le=parseInt(q);if(le<360&&le>0)return[le,le]}if(typeof q=="string"){if(i[q]){var ce=i[q];if(ce.hueRange)return ce.hueRange}else if(q.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ve=X(q)[0];return[ve,ve]}}return[0,360]}function M(q){return B(q).saturationRange}function B(q){q>=334&&q<=360&&(q-=360);for(var le in i){var ce=i[le];if(ce.hueRange&&q>=ce.hueRange[0]&&q<=ce.hueRange[1])return i[le]}return"Color not found"}function P(q){if(t===null){var le=.618033988749895,ce=Math.random();return ce+=le,ce%=1,Math.floor(q[0]+ce*(q[1]+1-q[0]))}else{var ve=q[1]||1,ge=q[0]||0;t=(t*9301+49297)%233280;var Ee=t/233280;return Math.floor(ge+Ee*(ve-ge))}}function U(q){var le=Z(q);function ce(ge){var Ee=ge.toString(16);return Ee.length==1?"0"+Ee:Ee}var ve="#"+ce(le[0])+ce(le[1])+ce(le[2]);return ve}function z(q,le,ce){var ve=ce[0][0],ge=ce[ce.length-1][0],Ee=ce[ce.length-1][1],xe=ce[0][1];i[q]={hueRange:le,lowerBounds:ce,saturationRange:[ve,ge],brightnessRange:[Ee,xe]}}function V(){z("monochrome",null,[[0,0],[100,0]]),z("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),z("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),z("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),z("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),z("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),z("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),z("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function Z(q){var le=q[0];le===0&&(le=1),le===360&&(le=359),le=le/360;var ce=q[1]/100,ve=q[2]/100,ge=Math.floor(le*6),Ee=le*6-ge,xe=ve*(1-ce),Te=ve*(1-Ee*ce),Fe=ve*(1-(1-Ee)*ce),Ie=256,Ye=256,At=256;switch(ge){case 0:Ie=ve,Ye=Fe,At=xe;break;case 1:Ie=Te,Ye=ve,At=xe;break;case 2:Ie=xe,Ye=ve,At=Fe;break;case 3:Ie=xe,Ye=Te,At=ve;break;case 4:Ie=Fe,Ye=xe,At=ve;break;case 5:Ie=ve,Ye=xe,At=Te;break}var mt=[Math.floor(Ie*255),Math.floor(Ye*255),Math.floor(At*255)];return mt}function X(q){q=q.replace(/^#/,""),q=q.length===3?q.replace(/(.)/g,"$1$1"):q;var le=parseInt(q.substr(0,2),16)/255,ce=parseInt(q.substr(2,2),16)/255,ve=parseInt(q.substr(4,2),16)/255,ge=Math.max(le,ce,ve),Ee=ge-Math.min(le,ce,ve),xe=ge?Ee/ge:0;switch(ge){case le:return[60*((ce-ve)/Ee%6)||0,xe,ge];case ce:return[60*((ve-le)/Ee+2)||0,xe,ge];case ve:return[60*((le-ce)/Ee+4)||0,xe,ge]}}function re(q){var le=q[0],ce=q[1]/100,ve=q[2]/100,ge=(2-ce)*ve;return[le,Math.round(ce*ve/(ge<1?ge:2-ge)*1e4)/100,ge/2*100]}function ie(q){for(var le=0,ce=0;ce!==q.length&&!(le>=Number.MAX_SAFE_INTEGER);ce++)le+=q.charCodeAt(ce);return le}function te(q){if(isNaN(q)){if(typeof q=="string"){if(i[q]){var ce=i[q];if(ce.hueRange)return ce.hueRange}else if(q.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ve=X(q)[0];return B(ve).hueRange}}}else{var le=parseInt(q);if(le<360&&le>0)return B(q).hueRange}return[0,360]}return o})})(W3,W3.exports)),W3.exports}var Jde=Xde(),efe=LX(Jde);function tfe(n,e){let t="bright",i;return/water|ocean|lake|sea|river/.test(n)&&(i="blue"),/state|country|place/.test(n)&&(i="pink"),/road|highway|transport|streets/.test(n)&&(i="orange"),/contour|building|earth/.test(n)&&(i="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(i="green"),`rgba(${efe({luminosity:t,hue:i,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}var nfe={brightColor:tfe};function ife(n){return n.metadata&&n.metadata["maplibregl-inspect:inspect"]}function rfe(n){return Object.assign(n,{metadata:Object.assign({},n.metadata,{"maplibregl-inspect:inspect":!0})})}class VP{constructor(e){if(this._onSourceChange=i=>Uz(this,void 0,void 0,function*(){if(i.sourceDataType==="visibility"||!i.isSourceLoaded)return;const r=Object.assign({},this.sources);yield this._setSourcesFromMap(),!Nde(r,this.sources)&&Object.keys(this.sources).length>0&&setTimeout(()=>this.render(),1e3)}),this._onStyleChange=()=>{const i=this._map.getStyle();ife(i)||(this._originalStyle=i)},this._onRightClick=()=>{!this.options.showMapPopupOnHover&&!this.options.showInspectMapPopupOnHover&&!this.options.blockHoverPopupOnClick&&this._popup&&this._popup.remove()},this._onMousemove=i=>{if(this._showInspectMap){if(!this.options.showInspectMapPopup||i.type==="mousemove"&&!this.options.showInspectMapPopupOnHover)return;i.type==="click"&&this.options.showInspectMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}else{if(!this.options.showMapPopup||i.type==="mousemove"&&!this.options.showMapPopupOnHover)return;i.type==="click"&&this.options.showMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}if(!this._popupBlocked&&this._popup){let r;this.options.selectThreshold===0?r=i.point:r=[[i.point.x-this.options.selectThreshold,i.point.y+this.options.selectThreshold],[i.point.x+this.options.selectThreshold,i.point.y-this.options.selectThreshold]];const o=this._map.queryRenderedFeatures(r,this.options.queryParameters)||[];if(this._map.getCanvas().style.cursor=o.length?"pointer":"",!o.length)this._popup.remove();else{this._popup.setLngLat(i.lngLat);const s=this.options.renderPopup(o);typeof s=="string"?this._popup.setHTML(s):this._popup.setDOMContent(s),this._popup.addTo(this._map)}}},!(this instanceof VP))throw new Error("MaplibreInspect needs to be called with the new keyword");let t=null;window.maplibregl?t=new window.maplibregl.Popup({closeButton:!1,closeOnClick:!1}):e.popup||console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis."),this.options=Object.assign({showInspectMap:!1,showInspectButton:!0,showInspectMapPopup:!0,showMapPopup:!1,showMapPopupOnHover:!0,showInspectMapPopupOnHover:!0,blockHoverPopupOnClick:!1,backgroundColor:"#fff",assignLayerColor:nfe.brightColor,buildInspectStyle:zz.generateInspectStyle,renderPopup:Hde,popup:t,selectThreshold:5,useInspectStyle:!0,queryParameters:{},sources:{},toggleCallback(){},manageStyleOutside:!1},e),this.sources=this.options.sources,this.assignLayerColor=this.options.assignLayerColor,this._popup=this.options.popup,this._popupBlocked=!1,this._showInspectMap=this.options.showInspectMap,this._toggle=new Qde({show:this.options.showInspectButton,onToggle:()=>this.toggleInspector()})}toggleInspector(){this._showInspectMap=!this._showInspectMap,this._popupBlocked=!1,this.options.toggleCallback(this._showInspectMap),this.render()}_inspectStyle(){const e=zz.generateColoredLayers(this.sources,this.assignLayerColor);return this.options.buildInspectStyle(this._map.getStyle(),e,{backgroundColor:this.options.backgroundColor})}render(){this._showInspectMap?(this.options.useInspectStyle&&this._map.setStyle(rfe(this._inspectStyle())),this._toggle.setMapIcon()):this._originalStyle&&(this._popup&&this._popup.remove(),this.options.useInspectStyle&&this._map.setStyle(this._originalStyle),this._toggle.setInspectIcon())}_setSourcesFromMap(){return Uz(this,void 0,void 0,function*(){var e;const t=this._map.getStyle(),i=Object.keys(t.sources);for(const r of i)if(t.sources[r].type==="geojson")this.sources[r]=[];else if(t.sources[r].type==="vector"&&t.sources[r].url)try{const s=yield(yield fetch(t.sources[r].url)).json(),a=(e=s?.vector_layers)===null||e===void 0?void 0:e.map(c=>c.id);if(a)this.sources[r]=a;else throw new Error("Missing vector_layers in source: "+r)}catch{console.warn("Unable to retrieve tileJSON from "+t.sources[r].url+" using style's layers");for(const s of t.layers)if("source-layer"in s&&s["source-layer"]){const a=s["source-layer"];this.sources[r]||(this.sources[r]=[]),this.sources[r].push(a)}}for(const r of Object.keys(this.sources))i.indexOf(r)===-1?delete this.sources[r]:this.sources[r]=[...new Set(this.sources[r])]})}setOriginalStyle(e){this._originalStyle=e,this._setSourcesFromMap()}onAdd(e){return this._map=e,Object.keys(this.sources).length===0&&(e.on("tiledata",this._onSourceChange),e.on("sourcedata",this._onSourceChange)),e.on("styledata",this._onStyleChange),e.on("load",this._onStyleChange),e.on("mousemove",this._onMousemove),e.on("click",this._onMousemove),e.on("contextmenu",this._onRightClick),this._toggle.elem}onRemove(){this._map.off("styledata",this._onStyleChange),this._map.off("load",this._onStyleChange),this._map.off("tiledata",this._onSourceChange),this._map.off("sourcedata",this._onSourceChange),this._map.off("mousemove",this._onMousemove),this._map.off("click",this._onMousemove),this._map.off("contextmenu",this._onRightClick);const e=this._toggle.elem;e.parentNode.removeChild(e),this._map=void 0}}var Q3={exports:{}},ofe=Q3.exports,Nz;function sfe(){return Nz||(Nz=1,(function(n,e){(function(t,i){{var r=i();n&&n.exports&&(e=n.exports=r),e.randomColor=r}})(ofe,function(){var t=null,i={};V();var r=[],o=function(q){if(q=q||{},q.seed!==void 0&&q.seed!==null&&q.seed===parseInt(q.seed,10))t=q.seed;else if(typeof q.seed=="string")t=ie(q.seed);else{if(q.seed!==void 0&&q.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var le,ce,ve;if(q.count!==null&&q.count!==void 0){for(var ge=q.count,Ee=[],xe=0;xe<q.count;xe++)r.push(!1);for(q.count=null;ge>Ee.length;){var Te=o(q);t!==null&&(q.seed=t),Ee.push(Te)}return q.count=ge,Ee}return le=s(q),ce=a(le,q),ve=c(le,ce,q),d([le,ce,ve],q)};function s(q){if(r.length>0){var le=te(q.hue),ce=P(le),ve=(le[1]-le[0])/r.length,ge=parseInt((ce-le[0])/ve);r[ge]===!0?ge=(ge+2)%r.length:r[ge]=!0;var Ee=(le[0]+ge*ve)%359,xe=(le[0]+(ge+1)*ve)%359;return le=[Ee,xe],ce=P(le),ce<0&&(ce=360+ce),ce}else{var le=v(q.hue);return ce=P(le),ce<0&&(ce=360+ce),ce}}function a(q,le){if(le.hue==="monochrome")return 0;if(le.luminosity==="random")return P([0,100]);var ce=M(q),ve=ce[0],ge=ce[1];switch(le.luminosity){case"bright":ve=55;break;case"dark":ve=ge-10;break;case"light":ge=55;break}return P([ve,ge])}function c(q,le,ce){var ve=m(q,le),ge=100;switch(ce.luminosity){case"dark":ge=ve+20;break;case"light":ve=(ge+ve)/2;break;case"random":ve=0,ge=100;break}return P([ve,ge])}function d(q,le){switch(le.format){case"hsvArray":return q;case"hslArray":return re(q);case"hsl":var ce=re(q);return"hsl("+ce[0]+", "+ce[1]+"%, "+ce[2]+"%)";case"hsla":var ve=re(q),xe=le.alpha||Math.random();return"hsla("+ve[0]+", "+ve[1]+"%, "+ve[2]+"%, "+xe+")";case"rgbArray":return Z(q);case"rgb":var ge=Z(q);return"rgb("+ge.join(", ")+")";case"rgba":var Ee=Z(q),xe=le.alpha||Math.random();return"rgba("+Ee.join(", ")+", "+xe+")";default:return U(q)}}function m(q,le){for(var ce=B(q).lowerBounds,ve=0;ve<ce.length-1;ve++){var ge=ce[ve][0],Ee=ce[ve][1],xe=ce[ve+1][0],Te=ce[ve+1][1];if(le>=ge&&le<=xe){var Fe=(Te-Ee)/(xe-ge),Ie=Ee-Fe*ge;return Fe*le+Ie}}return 0}function v(q){if(typeof parseInt(q)=="number"){var le=parseInt(q);if(le<360&&le>0)return[le,le]}if(typeof q=="string"){if(i[q]){var ce=i[q];if(ce.hueRange)return ce.hueRange}else if(q.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ve=X(q)[0];return[ve,ve]}}return[0,360]}function M(q){return B(q).saturationRange}function B(q){q>=334&&q<=360&&(q-=360);for(var le in i){var ce=i[le];if(ce.hueRange&&q>=ce.hueRange[0]&&q<=ce.hueRange[1])return i[le]}return"Color not found"}function P(q){if(t===null){var le=.618033988749895,ce=Math.random();return ce+=le,ce%=1,Math.floor(q[0]+ce*(q[1]+1-q[0]))}else{var ve=q[1]||1,ge=q[0]||0;t=(t*9301+49297)%233280;var Ee=t/233280;return Math.floor(ge+Ee*(ve-ge))}}function U(q){var le=Z(q);function ce(ge){var Ee=ge.toString(16);return Ee.length==1?"0"+Ee:Ee}var ve="#"+ce(le[0])+ce(le[1])+ce(le[2]);return ve}function z(q,le,ce){var ve=ce[0][0],ge=ce[ce.length-1][0],Ee=ce[ce.length-1][1],xe=ce[0][1];i[q]={hueRange:le,lowerBounds:ce,saturationRange:[ve,ge],brightnessRange:[Ee,xe]}}function V(){z("monochrome",null,[[0,0],[100,0]]),z("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),z("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),z("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),z("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),z("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),z("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),z("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function Z(q){var le=q[0];le===0&&(le=1),le===360&&(le=359),le=le/360;var ce=q[1]/100,ve=q[2]/100,ge=Math.floor(le*6),Ee=le*6-ge,xe=ve*(1-ce),Te=ve*(1-Ee*ce),Fe=ve*(1-(1-Ee)*ce),Ie=256,Ye=256,At=256;switch(ge){case 0:Ie=ve,Ye=Fe,At=xe;break;case 1:Ie=Te,Ye=ve,At=xe;break;case 2:Ie=xe,Ye=ve,At=Fe;break;case 3:Ie=xe,Ye=Te,At=ve;break;case 4:Ie=Fe,Ye=xe,At=ve;break;case 5:Ie=ve,Ye=xe,At=Te;break}var mt=[Math.floor(Ie*255),Math.floor(Ye*255),Math.floor(At*255)];return mt}function X(q){q=q.replace(/^#/,""),q=q.length===3?q.replace(/(.)/g,"$1$1"):q;var le=parseInt(q.substr(0,2),16)/255,ce=parseInt(q.substr(2,2),16)/255,ve=parseInt(q.substr(4,2),16)/255,ge=Math.max(le,ce,ve),Ee=ge-Math.min(le,ce,ve),xe=ge?Ee/ge:0;switch(ge){case le:return[60*((ce-ve)/Ee%6)||0,xe,ge];case ce:return[60*((ve-le)/Ee+2)||0,xe,ge];case ve:return[60*((le-ce)/Ee+4)||0,xe,ge]}}function re(q){var le=q[0],ce=q[1]/100,ve=q[2]/100,ge=(2-ce)*ve;return[le,Math.round(ce*ve/(ge<1?ge:2-ge)*1e4)/100,ge/2*100]}function ie(q){for(var le=0,ce=0;ce!==q.length&&!(le>=Number.MAX_SAFE_INTEGER);ce++)le+=q.charCodeAt(ce);return le}function te(q){if(isNaN(q)){if(typeof q=="string"){if(i[q]){var ce=i[q];if(ce.hueRange)return ce.hueRange}else if(q.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ve=X(q)[0];return B(ve).hueRange}}}else{var le=parseInt(q);if(le<360&&le>0)return B(q).hueRange}return[0,360]}return o})})(Q3,Q3.exports)),Q3.exports}var afe=sfe();const lfe=vu(afe);function ufe(n,e){let t="bright",i;return/water|ocean|lake|sea|river/.test(n)&&(i="blue"),/state|country|place/.test(n)&&(i="pink"),/road|highway|transport|streets/.test(n)&&(i="orange"),/contour|building|earth/.test(n)&&(i="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(i="green"),`rgba(${lfe({luminosity:t,hue:i,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}const UX={brightColor:ufe};function cfe(n){return _o({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1z"},child:[]}]})(n)}function Afe(n){return _o({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6.95.435c.58-.58 1.52-.58 2.1 0l6.515 6.516c.58.58.58 1.519 0 2.098L9.05 15.565c-.58.58-1.519.58-2.098 0L.435 9.05a1.48 1.48 0 0 1 0-2.098z"},child:[]}]})(n)}function hfe(n){return _o({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708"},child:[]}]})(n)}function dfe(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(n)}function jC(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function ffe(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(n)}function pfe(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(n)}function mfe(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function gfe(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function yfe(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(n)}function vfe(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2zm-7 6-4 4h3v6h2v-6h3l-4-4z"},child:[]}]})(n)}function bfe(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function Cfe(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"},child:[]}]})(n)}function _fe(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"},child:[]}]})(n)}function KX(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function xfe(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(n)}function nD(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(n)}function Mfe(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(n)}function wfe(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"7.2",cy:"14.4",r:"3.2"},child:[]},{tag:"circle",attr:{cx:"14.8",cy:"18",r:"2"},child:[]},{tag:"circle",attr:{cx:"15.2",cy:"8.8",r:"4.8"},child:[]}]})(n)}function Gz(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"},child:[]}]})(n)}function Sfe(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}function Wz(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"},child:[]}]})(n)}function Efe(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"},child:[]}]})(n)}function Bfe(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(n)}function Ofe(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"},child:[]}]})(n)}function Ife(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 1.74.5 3.37 1.41 4.84.95 1.54 2.2 2.86 3.16 4.4.47.75.81 1.45 1.17 2.26.26.55.47 1.5 1.26 1.5s1-.95 1.25-1.5c.37-.81.7-1.51 1.17-2.26.96-1.53 2.21-2.85 3.16-4.4C18.5 12.37 19 10.74 19 9c0-3.87-3.13-7-7-7zm0 9.75a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(n)}function Tfe(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"},child:[]}]})(n)}function FX(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(n)}function zX(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 14 5-5 5 5z"},child:[]}]})(n)}function kfe(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function Dfe(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function Rfe(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"2"},child:[]},{tag:"path",attr:{d:"M10 3h4v12h-4z"},child:[]}]})(n)}function Pfe(n){return _o({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"},child:[]}]})(n)}function Lfe(n){return _o({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m344 280 88-88m-200 24 64 64M80 320l104-104"},child:[]},{tag:"circle",attr:{cx:"456",cy:"168",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"320",cy:"304",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"208",cy:"192",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"56",cy:"344",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]}]})(n)}function Ufe(n){return _o({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M467.3 168.1c-1.8 0-3.5.3-5.1 1l-177.6 92.1h-.1c-7.6 4.7-12.5 12.5-12.5 21.4v185.9c0 6.4 5.6 11.5 12.7 11.5 2.2 0 4.3-.5 6.1-1.4.2-.1.4-.2.5-.3L466 385.6l.3-.1c8.2-4.5 13.7-12.7 13.7-22.1V179.6c0-6.4-5.7-11.5-12.7-11.5zM454.3 118.5L272.6 36.8S261.9 32 256 32c-5.9 0-16.5 4.8-16.5 4.8L57.6 118.5s-8 3.3-8 9.5c0 6.6 8.3 11.5 8.3 11.5l185.5 97.8c3.8 1.7 8.1 2.6 12.6 2.6 4.6 0 8.9-1 12.7-2.7l185.4-97.9s7.5-4 7.5-11.5c.1-6.3-7.3-9.3-7.3-9.3zM227.5 261.2L49.8 169c-1.5-.6-3.3-1-5.1-1-7 0-12.7 5.1-12.7 11.5v183.8c0 9.4 5.5 17.6 13.7 22.1l.2.1 174.7 92.7c1.9 1.1 4.2 1.7 6.6 1.7 7 0 12.7-5.2 12.7-11.5V282.6c.1-8.9-4.9-16.8-12.4-21.4z"},child:[]}]})(n)}function Kfe(n){return _o({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M634.92 462.7l-288-448C341.03 5.54 330.89 0 320 0s-21.03 5.54-26.92 14.7l-288 448a32.001 32.001 0 0 0-1.17 32.64A32.004 32.004 0 0 0 32 512h576c11.71 0 22.48-6.39 28.09-16.67a31.983 31.983 0 0 0-1.17-32.63zM320 91.18L405.39 224H320l-64 64-38.06-38.06L320 91.18z"},child:[]}]})(n)}function ta(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",e="0b6460c942a48f834d2809c818afa5c72625023a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",statementMap:{0:{start:{line:7,column:18},end:{line:33,column:1}},1:{start:{line:8,column:20},end:{line:8,column:42}},2:{start:{line:9,column:2},end:{line:32,column:3}},3:{start:{line:11,column:6},end:{line:11,column:61}},4:{start:{line:13,column:6},end:{line:13,column:60}},5:{start:{line:15,column:6},end:{line:15,column:62}},6:{start:{line:17,column:6},end:{line:17,column:63}},7:{start:{line:19,column:6},end:{line:19,column:66}},8:{start:{line:21,column:6},end:{line:21,column:66}},9:{start:{line:23,column:6},end:{line:23,column:59}},10:{start:{line:25,column:6},end:{line:25,column:71}},11:{start:{line:27,column:6},end:{line:27,column:66}},12:{start:{line:29,column:6},end:{line:29,column:61}},13:{start:{line:31,column:6},end:{line:31,column:67}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:29},end:{line:33,column:1}},line:7}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:32,column:3}},type:"switch",locations:[{start:{line:10,column:4},end:{line:11,column:61}},{start:{line:12,column:4},end:{line:13,column:60}},{start:{line:14,column:4},end:{line:15,column:62}},{start:{line:16,column:4},end:{line:17,column:63}},{start:{line:18,column:4},end:{line:19,column:66}},{start:{line:20,column:4},end:{line:21,column:66}},{start:{line:22,column:4},end:{line:23,column:59}},{start:{line:24,column:4},end:{line:25,column:71}},{start:{line:26,column:4},end:{line:27,column:66}},{start:{line:28,column:4},end:{line:29,column:61}},{start:{line:30,column:4},end:{line:31,column:67}}],line:9}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx"],names:[],mappings:"AAkBkC;AAflC,SAAS,QAAQ,eAAe,iBAAiB;AACjD,SAAS,eAAe,UAAU,eAAe,SAAS,sBAAsB;AAChF,SAAS,0BAA0B;AACnC,SAAS,gBAAgB;AACzB,SAAS,kBAAkB;AAQ3B,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,YAAY,EAAE,OAAO,MAAM,MAAM;AACvC,UAAO,MAAM,MAAM;AAAA,IACjB,KAAK;AAAkB,aAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,IACvD,KAAK;AAAU,aAAO,oBAAC,WAAS,GAAG,WAAW;AAAA,IAC9C,KAAK;AAAa,aAAO,oBAAC,aAAW,GAAG,WAAW;AAAA,IACnD,KAAK;AAAgB,aAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,IACvD,KAAK;AAAW,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IACrD,KAAK;AAAQ,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IAClD,KAAK;AAAc,aAAO,oBAAC,UAAQ,GAAG,WAAW;AAAA,IACjD,KAAK;AAAQ,aAAO,oBAAC,sBAAoB,GAAG,WAAW;AAAA,IACvD,KAAK;AAAU,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IACpD,KAAK;AAAU,aAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,IAC/C;AAAS,aAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,EACjD;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0b6460c942a48f834d2809c818afa5c72625023a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ta=function(){return s},s}ta();ta().s[0]++;const jX=n=>{ta().f[0]++;const e=(ta().s[1]++,{style:n.style});switch(ta().s[2]++,n.type){case"fill-extrusion":return ta().b[0][0]++,ta().s[3]++,oe.jsx(Ufe,{...e});case"raster":return ta().b[0][1]++,ta().s[4]++,oe.jsx(Bfe,{...e});case"hillshade":return ta().b[0][2]++,ta().s[5]++,oe.jsx(hfe,{...e});case"color-relief":return ta().b[0][3]++,ta().s[6]++,oe.jsx(Kfe,{...e});case"heatmap":return ta().b[0][4]++,ta().s[7]++,oe.jsx(wfe,{...e});case"fill":return ta().b[0][5]++,ta().s[8]++,oe.jsx(Afe,{...e});case"background":return ta().b[0][6]++,ta().s[9]++,oe.jsx(cfe,{...e});case"line":return ta().b[0][7]++,ta().s[10]++,oe.jsx(Lfe,{...e});case"symbol":return ta().b[0][8]++,ta().s[11]++,oe.jsx(Ife,{...e});case"circle":return ta().b[0][9]++,ta().s[12]++,oe.jsx(Efe,{...e});default:return ta().b[0][10]++,ta().s[13]++,oe.jsx(Rfe,{...e})}};function Mi(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",e="6d83428b3c695d7740365dc3cc3e42bdf4d49028",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:20}},1:{start:{line:6,column:27},end:{line:6,column:29}},2:{start:{line:7,column:2},end:{line:18,column:5}},3:{start:{line:8,column:22},end:{line:8,column:51}},4:{start:{line:9,column:4},end:{line:17,column:5}},5:{start:{line:10,column:6},end:{line:10,column:43}},6:{start:{line:11,column:28},end:{line:11,column:91}},7:{start:{line:11,column:59},end:{line:11,column:90}},8:{start:{line:12,column:6},end:{line:12,column:65}},9:{start:{line:14,column:6},end:{line:14,column:52}},10:{start:{line:15,column:6},end:{line:15,column:39}},11:{start:{line:16,column:6},end:{line:16,column:45}},12:{start:{line:19,column:2},end:{line:19,column:17}},13:{start:{line:23,column:4},end:{line:25,column:5}},14:{start:{line:24,column:6},end:{line:24,column:13}},15:{start:{line:26,column:4},end:{line:44,column:5}},16:{start:{line:27,column:25},end:{line:27,column:44}},17:{start:{line:28,column:6},end:{line:30,column:7}},18:{start:{line:29,column:8},end:{line:29,column:48}},19:{start:{line:31,column:6},end:{line:33,column:7}},20:{start:{line:32,column:8},end:{line:32,column:48}},21:{start:{line:34,column:6},end:{line:36,column:7}},22:{start:{line:35,column:8},end:{line:35,column:48}},23:{start:{line:37,column:6},end:{line:39,column:7}},24:{start:{line:38,column:8},end:{line:38,column:58}},25:{start:{line:40,column:6},end:{line:40,column:21}},26:{start:{line:42,column:6},end:{line:42,column:63}},27:{start:{line:43,column:6},end:{line:43,column:21}},28:{start:{line:47,column:20},end:{line:47,column:67}},29:{start:{line:48,column:18},end:{line:93,column:6}},30:{start:{line:49,column:21},end:{line:88,column:8}},31:{start:{line:50,column:29},end:{line:50,column:76}},32:{start:{line:51,column:8},end:{line:87,column:10}},33:{start:{line:68,column:20},end:{line:68,column:63}},34:{start:{line:89,column:6},end:{line:92,column:26}},35:{start:{line:94,column:4},end:{line:94,column:152}}},fnMap:{0:{name:"groupFeaturesBySourceLayer",decl:{start:{line:4,column:9},end:{line:4,column:35}},loc:{start:{line:4,column:46},end:{line:20,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:32},end:{line:18,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:11,column:52},end:{line:11,column:53}},loc:{start:{line:11,column:59},end:{line:11,column:90}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:35},end:{line:45,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:11},end:{line:95,column:3}},line:46},5:{name:"(anonymous_5)",decl:{start:{line:48,column:43},end:{line:48,column:44}},loc:{start:{line:48,column:62},end:{line:93,column:5}},line:48},6:{name:"(anonymous_6)",decl:{start:{line:49,column:48},end:{line:49,column:49}},loc:{start:{line:49,column:66},end:{line:88,column:7}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:67,column:27},end:{line:67,column:28}},loc:{start:{line:67,column:33},end:{line:69,column:19}},line:67}},branchMap:{0:{loc:{start:{line:9,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:9,column:4},end:{line:17,column:5}},{start:{line:13,column:11},end:{line:17,column:5}}],line:9},1:{loc:{start:{line:14,column:27},end:{line:14,column:51}},type:"binary-expr",locations:[{start:{line:14,column:27},end:{line:14,column:45}},{start:{line:14,column:49},end:{line:14,column:51}}],line:14},2:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:28,column:6},end:{line:30,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:30,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:28,column:10},end:{line:28,column:64}},type:"binary-expr",locations:[{start:{line:28,column:10},end:{line:28,column:36}},{start:{line:28,column:40},end:{line:28,column:64}}],line:28},5:{loc:{start:{line:31,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:31,column:6},end:{line:33,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},6:{loc:{start:{line:31,column:10},end:{line:31,column:64}},type:"binary-expr",locations:[{start:{line:31,column:10},end:{line:31,column:36}},{start:{line:31,column:40},end:{line:31,column:64}}],line:31},7:{loc:{start:{line:34,column:6},end:{line:36,column:7}},type:"if",locations:[{start:{line:34,column:6},end:{line:36,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},8:{loc:{start:{line:34,column:10},end:{line:34,column:64}},type:"binary-expr",locations:[{start:{line:34,column:10},end:{line:34,column:36}},{start:{line:34,column:40},end:{line:34,column:64}}],line:34},9:{loc:{start:{line:37,column:6},end:{line:39,column:7}},type:"if",locations:[{start:{line:37,column:6},end:{line:39,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},10:{loc:{start:{line:37,column:10},end:{line:37,column:84}},type:"binary-expr",locations:[{start:{line:37,column:10},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:84}}],line:37},11:{loc:{start:{line:71,column:20},end:{line:75,column:24}},type:"binary-expr",locations:[{start:{line:71,column:20},end:{line:71,column:38}},{start:{line:71,column:58},end:{line:75,column:24}}],line:71},12:{loc:{start:{line:77,column:20},end:{line:80,column:24}},type:"binary-expr",locations:[{start:{line:77,column:20},end:{line:77,column:35}},{start:{line:77,column:55},end:{line:80,column:24}}],line:77}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx"],names:[],mappings:"AA8EU,cAkBsB,YAlBtB;AA9EV,OAAO,WAAW;AAClB,OAAO,eAAe;AAGtB,SAAS,2BAA2B,UAA4B;AAC9D,QAAM,UAA6C,CAAC;AAEpD,QAAM,mBAA4C,CAAC;AAEnD,WAAS,QAAQ,aAAW;AAC1B,UAAM,YAAY,QAAQ,MAAM,cAAc;AAC9C,QAAG,OAAO,UAAU,eAAe,KAAK,kBAAkB,QAAQ,MAAM,EAAE,GAAG;AAC3E,uBAAiB,QAAQ,MAAM,EAAE;AAEjC,YAAM,gBAAgB,QAAQ,SAAS,EAAE,KAAK,CAAC,MAAsB,EAAE,MAAM,OAAO,QAAQ,MAAM,EAAE;AAEpG,oBAAe,UAAU,iBAAiB,QAAQ,MAAM,EAAE;AAAA,IAC5D,OAAO;AACL,cAAQ,SAAS,IAAI,QAAQ,SAAS,KAAK,CAAC;AAC5C,cAAQ,SAAS,EAAE,KAAK,OAAO;AAE/B,uBAAiB,QAAQ,MAAM,EAAE,IAAI;AAAA,IACvC;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAQA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,iBAAiB,SAAyB,OAAgB;AAExD,QAAI,CAAC,QAAQ,MAAM,OAAO;AACxB;AAAA,IACF;AAEA,QAAI;AACF,YAAM,aAAa,QAAQ,MAAM;AAEjC,UAAG,gBAAgB,cAAc,WAAW,YAAY,GAAG;AACzD,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,0BAA0B,cAAc,WAAW,sBAAsB,GAAG;AAC9E,eAAO,OAAO,WAAW,sBAAsB,CAAC;AAAA,MAClD;AAEA,aAAO;AAAA,IACT,SAGO,KAAK;AACV,cAAQ,KAAK,uCAAuC,GAAG;AACvD,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,UAAU,2BAA2B,KAAK,MAAM,QAAQ;AAE9D,UAAM,QAAQ,OAAO,KAAK,OAAO,EAAE,IAAI,mBAAiB;AACtD,YAAM,SAAS,QAAQ,aAAa,EAAE,IAAI,CAAC,SAAyB,QAAgB;AAClF,cAAM,eAAe,KAAK,iBAAiB,SAAS,KAAK,MAAM,IAAI;AAEnE,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,WAAU;AAAA,YAEV;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,OAAO,EAAC,YAAY,aAAY;AAAA;AAAA,cACjC;AAAA,cACD;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,MAAM;AACb,yBAAK,MAAM,cAAc,QAAQ,MAAM,EAAE;AAAA,kBAC3C;AAAA,kBAEC;AAAA,4BAAQ,MAAM,QACb,oBAAC,aAAU,MAAM,QAAQ,MAAM,MAAM,OAAO;AAAA,sBAC1C,OAAO;AAAA,sBACP,QAAQ;AAAA,sBACR,cAAc;AAAA,oBAChB,GAAE;AAAA,oBAEH,QAAQ,MAAM;AAAA,oBACd,QAAQ,WAAW,qBAAC,UAAK;AAAA;AAAA,sBAAI,QAAQ;AAAA,uBAAQ;AAAA;AAAA;AAAA,cAChD;AAAA;AAAA;AAAA,UAtBK;AAAA,QAuBP;AAAA,MACF,CAAC;AACD,aAAO,qBAAC,SACN;AAAA,4BAAC,SAAI,WAAU,2BAA2B,yBAAc;AAAA,QACvD;AAAA,WAFc,aAGjB;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,gCAA+B,eAAY,uBAAsB,KAAI,OACxF,iBACH;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6d83428b3c695d7740365dc3cc3e42bdf4d49028"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Mi=function(){return s},s}Mi();function Ffe(n){Mi().f[0]++;const e=(Mi().s[0]++,{}),t=(Mi().s[1]++,{});return Mi().s[2]++,n.forEach(i=>{Mi().f[1]++;const r=(Mi().s[3]++,i.layer["source-layer"]);if(Mi().s[4]++,Object.prototype.hasOwnProperty.call(t,i.layer.id)){Mi().b[0][0]++,Mi().s[5]++,t[i.layer.id]++;const o=(Mi().s[6]++,e[r].find(s=>(Mi().f[2]++,Mi().s[7]++,s.layer.id===i.layer.id)));Mi().s[8]++,o.counter=t[i.layer.id]}else Mi().b[0][1]++,Mi().s[9]++,e[r]=(Mi().b[1][0]++,e[r]||(Mi().b[1][1]++,[])),Mi().s[10]++,e[r].push(i),Mi().s[11]++,t[i.layer.id]=1}),Mi().s[12]++,e}class NX extends In.Component{_getFeatureColor(e,t){if(Mi().f[3]++,Mi().s[13]++,e.layer.paint)Mi().b[2][1]++;else{Mi().b[2][0]++,Mi().s[14]++;return}Mi().s[15]++;try{const i=(Mi().s[16]++,e.layer.paint);return Mi().s[17]++,Mi().b[4][0]++,"text-color"in i&&(Mi().b[4][1]++,i["text-color"])?(Mi().b[3][0]++,Mi().s[18]++,String(i["text-color"])):(Mi().b[3][1]++,Mi().s[19]++,Mi().b[6][0]++,"fill-color"in i&&(Mi().b[6][1]++,i["fill-color"])?(Mi().b[5][0]++,Mi().s[20]++,String(i["fill-color"])):(Mi().b[5][1]++,Mi().s[21]++,Mi().b[8][0]++,"line-color"in i&&(Mi().b[8][1]++,i["line-color"])?(Mi().b[7][0]++,Mi().s[22]++,String(i["line-color"])):(Mi().b[7][1]++,Mi().s[23]++,Mi().b[10][0]++,"fill-extrusion-color"in i&&(Mi().b[10][1]++,i["fill-extrusion-color"])?(Mi().b[9][0]++,Mi().s[24]++,String(i["fill-extrusion-color"])):(Mi().b[9][1]++,Mi().s[25]++,"black"))))}catch(i){return Mi().s[26]++,console.warn("Unable to get feature color, error:",i),Mi().s[27]++,"black"}}render(){Mi().f[4]++;const e=(Mi().s[28]++,Ffe(this.props.features)),t=(Mi().s[29]++,Object.keys(e).map(i=>{Mi().f[5]++;const r=(Mi().s[30]++,e[i].map((o,s)=>{Mi().f[6]++;const a=(Mi().s[31]++,this._getFeatureColor(o,this.props.zoom));return Mi().s[32]++,oe.jsxs("div",{className:"maputnik-popup-layer",children:[oe.jsx("div",{className:"maputnik-popup-layer__swatch",style:{background:a}}),oe.jsxs("label",{className:"maputnik-popup-layer__label",onClick:()=>{Mi().f[7]++,Mi().s[33]++,this.props.onLayerSelect(o.layer.id)},children:[(Mi().b[11][0]++,o.layer.type&&(Mi().b[11][1]++,oe.jsx(jX,{type:o.layer.type,style:{width:14,height:14,paddingRight:3}}))),o.layer.id,(Mi().b[12][0]++,o.counter&&(Mi().b[12][1]++,oe.jsxs("span",{children:["  ",o.counter]})))]})]},s)}));return Mi().s[34]++,oe.jsxs("div",{children:[oe.jsx("div",{className:"maputnik-popup-layer-id",children:i}),r]},i)}));return Mi().s[35]++,oe.jsx("div",{className:"maputnik-feature-layer-popup","data-wd-key":"feature-layer-popup",dir:"ltr",children:t})}}function fr(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",e="1e4c480681bcaba84c2c41960b73ded2066b54bc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",statementMap:{0:{start:{line:4,column:2},end:{line:4,column:67}},1:{start:{line:4,column:54},end:{line:4,column:67}},2:{start:{line:5,column:2},end:{line:5,column:59}},3:{start:{line:5,column:29},end:{line:5,column:59}},4:{start:{line:6,column:2},end:{line:6,column:115}},5:{start:{line:6,column:91},end:{line:6,column:115}},6:{start:{line:7,column:2},end:{line:7,column:15}},7:{start:{line:10,column:2},end:{line:13,column:12}},8:{start:{line:16,column:2},end:{line:32,column:12}},9:{start:{line:29,column:23},end:{line:29,column:55}},10:{start:{line:30,column:6},end:{line:30,column:74}},11:{start:{line:35,column:25},end:{line:35,column:27}},12:{start:{line:36,column:2},end:{line:49,column:5}},13:{start:{line:37,column:25},end:{line:39,column:6}},14:{start:{line:38,column:6},end:{line:38,column:156}},15:{start:{line:40,column:4},end:{line:48,column:5}},16:{start:{line:41,column:6},end:{line:41,column:35}},17:{start:{line:43,column:6},end:{line:47,column:7}},18:{start:{line:44,column:8},end:{line:44,column:58}},19:{start:{line:46,column:8},end:{line:46,column:60}},20:{start:{line:50,column:2},end:{line:50,column:24}},21:{start:{line:54,column:21},end:{line:54,column:66}},22:{start:{line:55,column:4},end:{line:55,column:303}}},fnMap:{0:{name:"displayValue",decl:{start:{line:3,column:9},end:{line:3,column:21}},loc:{start:{line:3,column:29},end:{line:8,column:1}},line:3},1:{name:"renderKeyValueTableRow",decl:{start:{line:9,column:9},end:{line:9,column:31}},loc:{start:{line:9,column:44},end:{line:14,column:1}},line:9},2:{name:"renderFeature",decl:{start:{line:15,column:9},end:{line:15,column:22}},loc:{start:{line:15,column:37},end:{line:33,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:28,column:40},end:{line:28,column:41}},loc:{start:{line:28,column:58},end:{line:31,column:5}},line:28},4:{name:"removeDuplicatedFeatures",decl:{start:{line:34,column:9},end:{line:34,column:33}},loc:{start:{line:34,column:44},end:{line:51,column:1}},line:34},5:{name:"(anonymous_5)",decl:{start:{line:36,column:19},end:{line:36,column:20}},loc:{start:{line:36,column:32},end:{line:49,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:50},end:{line:37,column:51}},loc:{start:{line:37,column:64},end:{line:39,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:56,column:3}},line:53}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:4,column:67}},type:"if",locations:[{start:{line:4,column:2},end:{line:4,column:67}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:4},1:{loc:{start:{line:4,column:6},end:{line:4,column:52}},type:"binary-expr",locations:[{start:{line:4,column:6},end:{line:4,column:34}},{start:{line:4,column:38},end:{line:4,column:52}}],line:4},2:{loc:{start:{line:5,column:2},end:{line:5,column:59}},type:"if",locations:[{start:{line:5,column:2},end:{line:5,column:59}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},3:{loc:{start:{line:6,column:2},end:{line:6,column:115}},type:"if",locations:[{start:{line:6,column:2},end:{line:6,column:115}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},4:{loc:{start:{line:6,column:6},end:{line:6,column:89}},type:"binary-expr",locations:[{start:{line:6,column:6},end:{line:6,column:31}},{start:{line:6,column:35},end:{line:6,column:60}},{start:{line:6,column:64},end:{line:6,column:89}}],line:6},5:{loc:{start:{line:21,column:6},end:{line:24,column:10}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:32}},{start:{line:21,column:52},end:{line:24,column:10}}],line:21},6:{loc:{start:{line:38,column:13},end:{line:38,column:155}},type:"binary-expr",locations:[{start:{line:38,column:13},end:{line:38,column:77}},{start:{line:38,column:81},end:{line:38,column:155}}],line:38},7:{loc:{start:{line:40,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:48,column:5}},{start:{line:42,column:11},end:{line:48,column:5}}],line:40},8:{loc:{start:{line:43,column:6},end:{line:47,column:7}},type:"if",locations:[{start:{line:43,column:6},end:{line:47,column:7}},{start:{line:45,column:13},end:{line:47,column:7}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx"],names:[],mappings:"AAkBS,SACL,KADK;AAlBT,OAAO,WAAW;AAQlB,SAAS,aAAa,OAAoD;AACxE,MAAI,OAAO,UAAU,eAAe,UAAU,KAAM,QAAO;AAC3D,MAAI,iBAAiB,KAAM,QAAO,MAAM,eAAe;AACvD,MAAI,OAAO,UAAU,YACb,OAAO,UAAU,YACjB,OAAO,UAAU,SAAU,QAAO,MAAM,SAAS;AACzD,SAAO;AACT;AAEA,SAAS,uBAAuB,KAAa,OAA2B;AACtE,SAAO,qBAAC,QACN;AAAA,wBAAC,QAAG,WAAU,6BAA6B,eAAI;AAAA,IAC/C,oBAAC,QAAG,WAAU,6BAA6B,iBAAM;AAAA,OAFnC,GAGhB;AACF;AAEA,SAAS,cAAc,SAAyB,KAAa;AAC3D,SAAO,qBAAC,MAAM,UAAN,EACN;AAAA,wBAAC,QACC,+BAAC,QAAG,SAAS,GAAG,WAAU,2BAA2B;AAAA,cAAQ,MAAM,QAAQ;AAAA,MAAE;AAAA,MAAG,QAAQ,MAAM,cAAc;AAAA,MAAG,QAAQ,sBAAsB,qBAAC,UAAK;AAAA;AAAA,QAAI,QAAQ;AAAA,SAAmB;AAAA,OAAQ,GAC5L;AAAA,IACC,uBAAuB,SAAS,QAAQ,SAAS,IAAI;AAAA,IACrD,uBAAuB,OAAO,aAAa,QAAQ,EAAE,CAAC;AAAA,IACtD,OAAO,KAAK,QAAQ,UAAU,EAAE,IAAI,kBAAgB;AACnD,YAAM,WAAW,QAAQ,WAAW,YAAY;AAChD,aAAO,uBAAuB,cAAc,aAAa,QAAQ,CAAC;AAAA,IACpE,CAAC;AAAA,OATyB,GAU5B;AACF;AAEA,SAAS,yBAAyB,UAA4B;AAC5D,QAAM,iBAAmC,CAAC;AAE1C,WAAS,QAAQ,aAAW;AAC1B,UAAM,eAAe,eAAe,UAAU,cAAY;AACxD,aAAO,QAAQ,MAAM,cAAc,MAAM,SAAS,MAAM,cAAc,KACjE,KAAK,UAAU,QAAQ,UAAU,MAAM,KAAK,UAAU,SAAS,UAAU;AAAA,IAChF,CAAC;AAED,QAAG,iBAAiB,IAAI;AACtB,qBAAe,KAAK,OAAO;AAAA,IAC7B,OAAO;AACL,UAAG,wBAAwB,eAAe,YAAY,GAAG;AACvD,uBAAe,YAAY,EAAE;AAAA,MAC/B,OAAO;AACL,uBAAe,YAAY,EAAE,qBAAqB;AAAA,MACpD;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAMA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,WAAW,yBAAyB,KAAK,MAAM,QAAQ;AAC7D,WAAO,oBAAC,SAAI,WAAU,mCAAkC,KAAI,OAAM,eAAY,0BAC5E,8BAAC,WAAM,WAAU,wBACf,8BAAC,WACE,mBAAS,IAAI,aAAa,GAC7B,GACF,GACF;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1e4c480681bcaba84c2c41960b73ded2066b54bc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return fr=function(){return s},s}fr();function Qz(n){return fr().f[0]++,fr().s[0]++,fr().b[1][0]++,typeof n>"u"||(fr().b[1][1]++,n===null)?(fr().b[0][0]++,fr().s[1]++,n):(fr().b[0][1]++,fr().s[2]++,n instanceof Date?(fr().b[2][0]++,fr().s[3]++,n.toLocaleString()):(fr().b[2][1]++,fr().s[4]++,fr().b[4][0]++,typeof n=="object"||(fr().b[4][1]++,typeof n=="number")||(fr().b[4][2]++,typeof n=="string")?(fr().b[3][0]++,fr().s[5]++,n.toString()):(fr().b[3][1]++,fr().s[6]++,n)))}function YO(n,e){return fr().f[1]++,fr().s[7]++,oe.jsxs("tr",{children:[oe.jsx("td",{className:"maputnik-popup-table-cell",children:n}),oe.jsx("td",{className:"maputnik-popup-table-cell",children:e})]},n)}function zfe(n,e){return fr().f[2]++,fr().s[8]++,oe.jsxs(In.Fragment,{children:[oe.jsx("tr",{children:oe.jsxs("td",{colSpan:2,className:"maputnik-popup-layer-id",children:[n.layer.source,": ",n.layer["source-layer"],(fr().b[5][0]++,n.inspectModeCounter&&(fr().b[5][1]++,oe.jsxs("span",{children:["  ",n.inspectModeCounter]})))]})}),YO("$type",n.geometry.type),YO("$id",Qz(n.id)),Object.keys(n.properties).map(t=>{fr().f[3]++;const i=(fr().s[9]++,n.properties[t]);return fr().s[10]++,YO(t,Qz(i))})]},e)}function jfe(n){fr().f[4]++;const e=(fr().s[11]++,[]);return fr().s[12]++,n.forEach(t=>{fr().f[5]++;const i=(fr().s[13]++,e.findIndex(r=>(fr().f[6]++,fr().s[14]++,fr().b[6][0]++,t.layer["source-layer"]===r.layer["source-layer"]&&(fr().b[6][1]++,JSON.stringify(t.properties)===JSON.stringify(r.properties)))));fr().s[15]++,i===-1?(fr().b[7][0]++,fr().s[16]++,e.push(t)):(fr().b[7][1]++,fr().s[17]++,"inspectModeCounter"in e[i]?(fr().b[8][0]++,fr().s[18]++,e[i].inspectModeCounter++):(fr().b[8][1]++,fr().s[19]++,e[i].inspectModeCounter=2))}),fr().s[20]++,e}class Nfe extends In.Component{render(){fr().f[7]++;const e=(fr().s[21]++,jfe(this.props.features));return fr().s[22]++,oe.jsx("div",{className:"maputnik-feature-property-popup",dir:"ltr","data-wd-key":"feature-property-popup",children:oe.jsx("table",{className:"maputnik-popup-table",children:oe.jsx("tbody",{children:e.map(zfe)})})})}}const iD={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};for(const n in iD)Object.freeze(iD[n]);const m4=Object.freeze(iD),GX=Object.create(null);for(const n in m4)Object.hasOwn(m4,n)&&(GX[m4[n]]=n);const dc={to:{},get:{}};dc.get=function(n){const e=n.slice(0,3).toLowerCase();let t,i;switch(e){case"hsl":{t=dc.get.hsl(n),i="hsl";break}case"hwb":{t=dc.get.hwb(n),i="hwb";break}default:{t=dc.get.rgb(n),i="rgb";break}}return t?{model:i,value:t}:null};dc.get.rgb=function(n){if(!n)return null;const e=/^#([a-f\d]{3,4})$/i,t=/^#([a-f\d]{6})([a-f\d]{2})?$/i,i=/^rgba?\(\s*([+-]?(?:\d*\.)?\d+(?:e\d+)?)(?=[\s,])\s*(?:,\s*)?([+-]?(?:\d*\.)?\d+(?:e\d+)?)(?=[\s,])\s*(?:,\s*)?([+-]?(?:\d*\.)?\d+(?:e\d+)?)\s*(?:[\s,|/]\s*([+-]?(?:\d*\.)?\d+(?:e\d+)?)(%?)\s*)?\)$/i,r=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/i,o=/^(\w+)$/;let s=[0,0,0,1],a,c,d;if(a=n.match(t)){for(d=a[2],a=a[1],c=0;c<3;c++){const m=c*2;s[c]=Number.parseInt(a.slice(m,m+2),16)}d&&(s[3]=Number.parseInt(d,16)/255)}else if(a=n.match(e)){for(a=a[1],d=a[3],c=0;c<3;c++)s[c]=Number.parseInt(a[c]+a[c],16);d&&(s[3]=Number.parseInt(d+d,16)/255)}else if(a=n.match(i)){for(c=0;c<3;c++)s[c]=Number.parseFloat(a[c+1]);a[4]&&(s[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else if(a=n.match(r)){for(c=0;c<3;c++)s[c]=Math.round(Number.parseFloat(a[c+1])*2.55);a[4]&&(s[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else return(a=n.toLowerCase().match(o))?a[1]==="transparent"?[0,0,0,0]:Object.hasOwn(m4,a[1])?(s=m4[a[1]].slice(),s[3]=1,s):null:null;for(c=0;c<3;c++)s[c]=_v(s[c],0,255);return s[3]=_v(s[3],0,1),s};dc.get.hsl=function(n){if(!n)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:e[+-]?\d+)?)\s*)?\)$/i,t=n.match(e);if(t){const i=Number.parseFloat(t[4]),r=(Number.parseFloat(t[1])%360+360)%360,o=_v(Number.parseFloat(t[2]),0,100),s=_v(Number.parseFloat(t[3]),0,100),a=_v(Number.isNaN(i)?1:i,0,1);return[r,o,s,a]}return null};dc.get.hwb=function(n){if(!n)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*[\s,]\s*([+-]?[\d.]+)%\s*[\s,]\s*([+-]?[\d.]+)%\s*(?:[\s,]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:e[+-]?\d+)?)\s*)?\)$/i,t=n.match(e);if(t){const i=Number.parseFloat(t[4]),r=(Number.parseFloat(t[1])%360+360)%360,o=_v(Number.parseFloat(t[2]),0,100),s=_v(Number.parseFloat(t[3]),0,100),a=_v(Number.isNaN(i)?1:i,0,1);return[r,o,s,a]}return null};dc.to.hex=function(...n){return"#"+ZM(n[0])+ZM(n[1])+ZM(n[2])+(n[3]<1?ZM(Math.round(n[3]*255)):"")};dc.to.rgb=function(...n){return n.length<4||n[3]===1?"rgb("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+")":"rgba("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+", "+n[3]+")"};dc.to.rgb.percent=function(...n){const e=Math.round(n[0]/255*100),t=Math.round(n[1]/255*100),i=Math.round(n[2]/255*100);return n.length<4||n[3]===1?"rgb("+e+"%, "+t+"%, "+i+"%)":"rgba("+e+"%, "+t+"%, "+i+"%, "+n[3]+")"};dc.to.hsl=function(...n){return n.length<4||n[3]===1?"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)":"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+n[3]+")"};dc.to.hwb=function(...n){let e="";return n.length>=4&&n[3]!==1&&(e=", "+n[3]),"hwb("+n[0]+", "+n[1]+"%, "+n[2]+"%"+e+")"};dc.to.keyword=function(...n){return GX[n.slice(0,3)]};function _v(n,e,t){return Math.min(Math.max(e,n),t)}function ZM(n){const e=Math.round(n).toString(16).toUpperCase();return e.length<2?"0"+e:e}const rD={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};for(const n in rD)Object.freeze(rD[n]);const Q4=Object.freeze(rD),WX={};for(const n of Object.keys(Q4))WX[Q4[n]]=n;const bi={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},T1=(6/29)**3;function Kx(n){const e=n>.0031308?1.055*n**.4166666666666667-.055:n*12.92;return Math.min(Math.max(0,e),1)}function Fx(n){return n>.04045?((n+.055)/1.055)**2.4:n/12.92}for(const n of Object.keys(bi)){if(!("channels"in bi[n]))throw new Error("missing channels property: "+n);if(!("labels"in bi[n]))throw new Error("missing channel labels property: "+n);if(bi[n].labels.length!==bi[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=bi[n];delete bi[n].channels,delete bi[n].labels,Object.defineProperty(bi[n],"channels",{value:e}),Object.defineProperty(bi[n],"labels",{value:t})}bi.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(e,t,i),o=Math.max(e,t,i),s=o-r;let a,c;switch(o){case r:{a=0;break}case e:{a=(t-i)/s;break}case t:{a=2+(i-e)/s;break}case i:{a=4+(e-t)/s;break}}a=Math.min(a*60,360),a<0&&(a+=360);const d=(r+o)/2;return o===r?c=0:d<=.5?c=s/(o+r):c=s/(2-o-r),[a,c*100,d*100]};bi.rgb.hsv=function(n){let e,t,i,r,o;const s=n[0]/255,a=n[1]/255,c=n[2]/255,d=Math.max(s,a,c),m=d-Math.min(s,a,c),v=function(M){return(d-M)/6/m+1/2};if(m===0)r=0,o=0;else{switch(o=m/d,e=v(s),t=v(a),i=v(c),d){case s:{r=i-t;break}case a:{r=1/3+e-i;break}case c:{r=2/3+t-e;break}}r<0?r+=1:r>1&&(r-=1)}return[r*360,o*100,d*100]};bi.rgb.hwb=function(n){const e=n[0],t=n[1];let i=n[2];const r=bi.rgb.hsl(n)[0],o=1/255*Math.min(e,Math.min(t,i));return i=1-1/255*Math.max(e,Math.max(t,i)),[r,o*100,i*100]};bi.rgb.oklab=function(n){const e=Fx(n[0]/255),t=Fx(n[1]/255),i=Fx(n[2]/255),r=Math.cbrt(.4122214708*e+.5363325363*t+.0514459929*i),o=Math.cbrt(.2119034982*e+.6806995451*t+.1073969566*i),s=Math.cbrt(.0883024619*e+.2817188376*t+.6299787005*i),a=.2104542553*r+.793617785*o-.0040720468*s,c=1.9779984951*r-2.428592205*o+.4505937099*s,d=.0259040371*r+.7827717662*o-.808675766*s;return[a*100,c*100,d*100]};bi.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(1-e,1-t,1-i),o=(1-e-r)/(1-r)||0,s=(1-t-r)/(1-r)||0,a=(1-i-r)/(1-r)||0;return[o*100,s*100,a*100,r*100]};function Gfe(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}bi.rgb.keyword=function(n){const e=WX[n];if(e)return e;let t=Number.POSITIVE_INFINITY,i;for(const r of Object.keys(Q4)){const o=Q4[r],s=Gfe(n,o);s<t&&(t=s,i=r)}return i};bi.keyword.rgb=function(n){return[...Q4[n]]};bi.rgb.xyz=function(n){const e=Fx(n[0]/255),t=Fx(n[1]/255),i=Fx(n[2]/255),r=e*.4124564+t*.3575761+i*.1804375,o=e*.2126729+t*.7151522+i*.072175,s=e*.0193339+t*.119192+i*.9503041;return[r*100,o*100,s*100]};bi.rgb.lab=function(n){const e=bi.rgb.xyz(n);let t=e[0],i=e[1],r=e[2];t/=95.047,i/=100,r/=108.883,t=t>T1?t**(1/3):7.787*t+16/116,i=i>T1?i**(1/3):7.787*i+16/116,r=r>T1?r**(1/3):7.787*r+16/116;const o=116*i-16,s=500*(t-i),a=200*(i-r);return[o,s,a]};bi.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;let r,o;if(t===0)return o=i*255,[o,o,o];const s=i<.5?i*(1+t):i+t-i*t,a=2*i-s,c=[0,0,0];for(let d=0;d<3;d++)r=e+1/3*-(d-1),r<0&&r++,r>1&&r--,6*r<1?o=a+(s-a)*6*r:2*r<1?o=s:3*r<2?o=a+(s-a)*(2/3-r)*6:o=a,c[d]=o*255;return c};bi.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,i=n[2]/100,r=t;const o=Math.max(i,.01);i*=2,t*=i<=1?i:2-i,r*=o<=1?o:2-o;const s=(i+t)/2,a=i===0?2*r/(o+r):2*t/(i+t);return[e,a*100,s*100]};bi.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let i=n[2]/100;const r=Math.floor(e)%6,o=e-Math.floor(e),s=255*i*(1-t),a=255*i*(1-t*o),c=255*i*(1-t*(1-o));switch(i*=255,r){case 0:return[i,c,s];case 1:return[a,i,s];case 2:return[s,i,c];case 3:return[s,a,i];case 4:return[c,s,i];case 5:return[i,s,a]}};bi.hsv.hsl=function(n){const e=n[0],t=n[1]/100,i=n[2]/100,r=Math.max(i,.01);let o,s;s=(2-t)*i;const a=(2-t)*r;return o=t*r,o/=a<=1?a:2-a,o=o||0,s/=2,[e,o*100,s*100]};bi.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,i=n[2]/100;const r=t+i;let o;r>1&&(t/=r,i/=r);const s=Math.floor(6*e),a=1-i;o=6*e-s,(s&1)!==0&&(o=1-o);const c=t+o*(a-t);let d,m,v;switch(s){default:case 6:case 0:{d=a,m=c,v=t;break}case 1:{d=c,m=a,v=t;break}case 2:{d=t,m=a,v=c;break}case 3:{d=t,m=c,v=a;break}case 4:{d=c,m=t,v=a;break}case 5:{d=a,m=t,v=c;break}}return[d*255,m*255,v*255]};bi.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=n[3]/100,o=1-Math.min(1,e*(1-r)+r),s=1-Math.min(1,t*(1-r)+r),a=1-Math.min(1,i*(1-r)+r);return[o*255,s*255,a*255]};bi.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100;let r,o,s;return r=e*3.2404542+t*-1.5371385+i*-.4985314,o=e*-.969266+t*1.8760108+i*.041556,s=e*.0556434+t*-.2040259+i*1.0572252,r=Kx(r),o=Kx(o),s=Kx(s),[r*255,o*255,s*255]};bi.xyz.lab=function(n){let e=n[0],t=n[1],i=n[2];e/=95.047,t/=100,i/=108.883,e=e>T1?e**(1/3):7.787*e+16/116,t=t>T1?t**(1/3):7.787*t+16/116,i=i>T1?i**(1/3):7.787*i+16/116;const r=116*t-16,o=500*(e-t),s=200*(t-i);return[r,o,s]};bi.xyz.oklab=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=Math.cbrt(.8189330101*e+.3618667424*t-.1288597137*i),o=Math.cbrt(.0329845436*e+.9293118715*t+.0361456387*i),s=Math.cbrt(.0482003018*e+.2643662691*t+.633851707*i),a=.2104542553*r+.793617785*o-.0040720468*s,c=1.9779984951*r-2.428592205*o+.4505937099*s,d=.0259040371*r+.7827717662*o-.808675766*s;return[a*100,c*100,d*100]};bi.oklab.oklch=function(n){return bi.lab.lch(n)};bi.oklab.xyz=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=(.999999998*e+.396337792*t+.215803758*i)**3,o=(1.000000008*e-.105561342*t-.063854175*i)**3,s=(1.000000055*e-.089484182*t-1.291485538*i)**3,a=1.227013851*r-.55779998*o+.281256149*s,c=-.040580178*r+1.11225687*o-.071676679*s,d=-.076381285*r-.421481978*o+1.58616322*s;return[a*100,c*100,d*100]};bi.oklab.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=(e+.3963377774*t+.2158037573*i)**3,o=(e-.1055613458*t-.0638541728*i)**3,s=(e-.0894841775*t-1.291485548*i)**3,a=Kx(4.0767416621*r-3.3077115913*o+.2309699292*s),c=Kx(-1.2684380046*r+2.6097574011*o-.3413193965*s),d=Kx(-.0041960863*r-.7034186147*o+1.707614701*s);return[a*255,c*255,d*255]};bi.oklch.oklab=function(n){return bi.lch.lab(n)};bi.lab.xyz=function(n){const e=n[0],t=n[1],i=n[2];let r,o,s;o=(e+16)/116,r=t/500+o,s=o-i/200;const a=o**3,c=r**3,d=s**3;return o=a>T1?a:(o-16/116)/7.787,r=c>T1?c:(r-16/116)/7.787,s=d>T1?d:(s-16/116)/7.787,r*=95.047,o*=100,s*=108.883,[r,o,s]};bi.lab.lch=function(n){const e=n[0],t=n[1],i=n[2];let r;r=Math.atan2(i,t)*360/2/Math.PI,r<0&&(r+=360);const s=Math.sqrt(t*t+i*i);return[e,s,r]};bi.lch.lab=function(n){const e=n[0],t=n[1],r=n[2]/360*2*Math.PI,o=t*Math.cos(r),s=t*Math.sin(r);return[e,o,s]};bi.rgb.ansi16=function(n,e=null){const[t,i,r]=n;let o=e===null?bi.rgb.hsv(n)[2]:e;if(o=Math.round(o/50),o===0)return 30;let s=30+(Math.round(r/255)<<2|Math.round(i/255)<<1|Math.round(t/255));return o===2&&(s+=60),s};bi.hsv.ansi16=function(n){return bi.rgb.ansi16(bi.hsv.rgb(n),n[2])};bi.rgb.ansi256=function(n){const e=n[0],t=n[1],i=n[2];return e>>4===t>>4&&t>>4===i>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(i/255*5)};bi.ansi16.rgb=function(n){n=n[0];let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(Math.trunc(n>50)+1)*.5,i=(e&1)*t*255,r=(e>>1&1)*t*255,o=(e>>2&1)*t*255;return[i,r,o]};bi.ansi256.rgb=function(n){if(n=n[0],n>=232){const o=(n-232)*10+8;return[o,o,o]}n-=16;let e;const t=Math.floor(n/36)/5*255,i=Math.floor((e=n%36)/6)/5*255,r=e%6/5*255;return[t,i,r]};bi.rgb.hex=function(n){const t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".slice(t.length)+t};bi.hex.rgb=function(n){const e=n.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=[...t].map(a=>a+a).join(""));const i=Number.parseInt(t,16),r=i>>16&255,o=i>>8&255,s=i&255;return[r,o,s]};bi.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.max(Math.max(e,t),i),o=Math.min(Math.min(e,t),i),s=r-o;let a;const c=s<1?o/(1-s):0;return s<=0?a=0:r===e?a=(t-i)/s%6:r===t?a=2+(i-e)/s:a=4+(e-t)/s,a/=6,a%=1,[a*360,s*100,c*100]};bi.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=t<.5?2*e*t:2*e*(1-t);let r=0;return i<1&&(r=(t-.5*i)/(1-i)),[n[0],i*100,r*100]};bi.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=e*t;let r=0;return i<1&&(r=(t-i)/(1-i)),[n[0],i*100,r*100]};bi.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;if(t===0)return[i*255,i*255,i*255];const r=[0,0,0],o=e%1*6,s=o%1,a=1-s;let c=0;switch(Math.floor(o)){case 0:{r[0]=1,r[1]=s,r[2]=0;break}case 1:{r[0]=a,r[1]=1,r[2]=0;break}case 2:{r[0]=0,r[1]=1,r[2]=s;break}case 3:{r[0]=0,r[1]=a,r[2]=1;break}case 4:{r[0]=s,r[1]=0,r[2]=1;break}default:r[0]=1,r[1]=0,r[2]=a}return c=(1-t)*i,[(t*r[0]+c)*255,(t*r[1]+c)*255,(t*r[2]+c)*255]};bi.hcg.hsv=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);let r=0;return i>0&&(r=e/i),[n[0],r*100,i*100]};bi.hcg.hsl=function(n){const e=n[1]/100,i=n[2]/100*(1-e)+.5*e;let r=0;return i>0&&i<.5?r=e/(2*i):i>=.5&&i<1&&(r=e/(2*(1-i))),[n[0],r*100,i*100]};bi.hcg.hwb=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);return[n[0],(i-e)*100,(1-i)*100]};bi.hwb.hcg=function(n){const e=n[1]/100,i=1-n[2]/100,r=i-e;let o=0;return r<1&&(o=(i-r)/(1-r)),[n[0],r*100,o*100]};bi.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};bi.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};bi.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};bi.gray.hsl=function(n){return[0,0,n[0]]};bi.gray.hsv=bi.gray.hsl;bi.gray.hwb=function(n){return[0,100,n[0]]};bi.gray.cmyk=function(n){return[0,0,0,n[0]]};bi.gray.lab=function(n){return[n[0],0,0]};bi.gray.hex=function(n){const e=Math.round(n[0]/100*255)&255,i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(i.length)+i};bi.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};function Wfe(){const n={},e=Object.keys(bi);for(let{length:t}=e,i=0;i<t;i++)n[e[i]]={distance:-1,parent:null};return n}function Qfe(n){const e=Wfe(),t=[n];for(e[n].distance=0;t.length>0;){const i=t.pop(),r=Object.keys(bi[i]);for(let{length:o}=r,s=0;s<o;s++){const a=r[s],c=e[a];c.distance===-1&&(c.distance=e[i].distance+1,c.parent=i,t.unshift(a))}}return e}function qfe(n,e){return function(t){return e(n(t))}}function Yfe(n,e){const t=[e[n].parent,n];let i=bi[e[n].parent][n],r=e[n].parent;for(;e[r].parent;)t.unshift(e[r].parent),i=qfe(bi[e[r].parent][r],i),r=e[r].parent;return i.conversion=t,i}function Vfe(n){const e=Qfe(n),t={},i=Object.keys(e);for(let{length:r}=i,o=0;o<r;o++){const s=i[o];e[s].parent!==null&&(t[s]=Yfe(s,e))}return t}const qc={},$fe=Object.keys(bi);function Hfe(n){const e=function(...t){const i=t[0];return i==null?i:(i.length>1&&(t=i),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function Zfe(n){const e=function(...t){const i=t[0];if(i==null)return i;i.length>1&&(t=i);const r=n(t);if(typeof r=="object")for(let{length:o}=r,s=0;s<o;s++)r[s]=Math.round(r[s]);return r};return"conversion"in n&&(e.conversion=n.conversion),e}for(const n of $fe){qc[n]={},Object.defineProperty(qc[n],"channels",{value:bi[n].channels}),Object.defineProperty(qc[n],"labels",{value:bi[n].labels});const e=Vfe(n),t=Object.keys(e);for(const i of t){const r=e[i];qc[n][i]=Zfe(r),qc[n][i].raw=Hfe(r)}}const QX=["keyword","gray","hex"],oD={};for(const n of Object.keys(qc))oD[[...qc[n].labels].sort().join("")]=n;const sD={};function Ku(n,e){if(!(this instanceof Ku))return new Ku(n,e);if(e&&e in QX&&(e=null),e&&!(e in qc))throw new Error("Unknown model: "+e);let t,i;if(n==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(n instanceof Ku)this.model=n.model,this.color=[...n.color],this.valpha=n.valpha;else if(typeof n=="string"){const r=dc.get(n);if(r===null)throw new Error("Unable to parse color from string: "+n);this.model=r.model,i=qc[this.model].channels,this.color=r.value.slice(0,i),this.valpha=typeof r.value[i]=="number"?r.value[i]:1}else if(n.length>0){this.model=e||"rgb",i=qc[this.model].channels;const r=Array.prototype.slice.call(n,0,i);this.color=aD(r,i),this.valpha=typeof n[i]=="number"?n[i]:1}else if(typeof n=="number")this.model="rgb",this.color=[n>>16&255,n>>8&255,n&255],this.valpha=1;else{this.valpha=1;const r=Object.keys(n);"alpha"in n&&(r.splice(r.indexOf("alpha"),1),this.valpha=typeof n.alpha=="number"?n.alpha:0);const o=r.sort().join("");if(!(o in oD))throw new Error("Unable to parse color from object: "+JSON.stringify(n));this.model=oD[o];const{labels:s}=qc[this.model],a=[];for(t=0;t<s.length;t++)a.push(n[s[t]]);this.color=aD(a)}if(sD[this.model])for(i=qc[this.model].channels,t=0;t<i;t++){const r=sD[this.model][t];r&&(this.color[t]=r(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Ku.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(n){let e=this.model in dc.to?this:this.rgb();e=e.round(typeof n=="number"?n:1);const t=e.valpha===1?e.color:[...e.color,this.valpha];return dc.to[e.model](...t)},percentString(n){const e=this.rgb().round(typeof n=="number"?n:1),t=e.valpha===1?e.color:[...e.color,this.valpha];return dc.to.rgb.percent(...t)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const n={},{channels:e}=qc[this.model],{labels:t}=qc[this.model];for(let i=0;i<e;i++)n[t[i]]=this.color[i];return this.valpha!==1&&(n.alpha=this.valpha),n},unitArray(){const n=this.rgb().color;return n[0]/=255,n[1]/=255,n[2]/=255,this.valpha!==1&&n.push(this.valpha),n},unitObject(){const n=this.rgb().object();return n.r/=255,n.g/=255,n.b/=255,this.valpha!==1&&(n.alpha=this.valpha),n},round(n){return n=Math.max(n||0,0),new Ku([...this.color.map(Jfe(n)),this.valpha],this.model)},alpha(n){return n!==void 0?new Ku([...this.color,Math.max(0,Math.min(1,n))],this.model):this.valpha},red:Gl("rgb",0,uc(255)),green:Gl("rgb",1,uc(255)),blue:Gl("rgb",2,uc(255)),hue:Gl(["hsl","hsv","hsl","hwb","hcg"],0,n=>(n%360+360)%360),saturationl:Gl("hsl",1,uc(100)),lightness:Gl("hsl",2,uc(100)),saturationv:Gl("hsv",1,uc(100)),value:Gl("hsv",2,uc(100)),chroma:Gl("hcg",1,uc(100)),gray:Gl("hcg",2,uc(100)),white:Gl("hwb",1,uc(100)),wblack:Gl("hwb",2,uc(100)),cyan:Gl("cmyk",0,uc(100)),magenta:Gl("cmyk",1,uc(100)),yellow:Gl("cmyk",2,uc(100)),black:Gl("cmyk",3,uc(100)),x:Gl("xyz",0,uc(95.047)),y:Gl("xyz",1,uc(100)),z:Gl("xyz",2,uc(108.833)),l:Gl("lab",0,uc(100)),a:Gl("lab",1),b:Gl("lab",2),keyword(n){return n!==void 0?new Ku(n):qc[this.model].keyword(this.color)},hex(n){return n!==void 0?new Ku(n):dc.to.hex(...this.rgb().round().color)},hexa(n){if(n!==void 0)return new Ku(n);const e=this.rgb().round().color;let t=Math.round(this.valpha*255).toString(16).toUpperCase();return t.length===1&&(t="0"+t),dc.to.hex(...e)+t},rgbNumber(){const n=this.rgb().color;return(n[0]&255)<<16|(n[1]&255)<<8|n[2]&255},luminosity(){const n=this.rgb().color,e=[];for(const[t,i]of n.entries()){const r=i/255;e[t]=r<=.04045?r/12.92:((r+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(n){const e=this.luminosity(),t=n.luminosity();return e>t?(e+.05)/(t+.05):(t+.05)/(e+.05)},level(n){const e=this.contrast(n);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const n=this.rgb().color;return(n[0]*2126+n[1]*7152+n[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const n=this.rgb();for(let e=0;e<3;e++)n.color[e]=255-n.color[e];return n},lighten(n){const e=this.hsl();return e.color[2]+=e.color[2]*n,e},darken(n){const e=this.hsl();return e.color[2]-=e.color[2]*n,e},saturate(n){const e=this.hsl();return e.color[1]+=e.color[1]*n,e},desaturate(n){const e=this.hsl();return e.color[1]-=e.color[1]*n,e},whiten(n){const e=this.hwb();return e.color[1]+=e.color[1]*n,e},blacken(n){const e=this.hwb();return e.color[2]+=e.color[2]*n,e},grayscale(){const n=this.rgb().color,e=n[0]*.3+n[1]*.59+n[2]*.11;return Ku.rgb(e,e,e)},fade(n){return this.alpha(this.valpha-this.valpha*n)},opaquer(n){return this.alpha(this.valpha+this.valpha*n)},rotate(n){const e=this.hsl();let t=e.color[0];return t=(t+n)%360,t=t<0?360+t:t,e.color[0]=t,e},mix(n,e){if(!n||!n.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof n);const t=n.rgb(),i=this.rgb(),r=e===void 0?.5:e,o=2*r-1,s=t.alpha()-i.alpha(),a=((o*s===-1?o:(o+s)/(1+o*s))+1)/2,c=1-a;return Ku.rgb(a*t.red()+c*i.red(),a*t.green()+c*i.green(),a*t.blue()+c*i.blue(),t.alpha()*r+i.alpha()*(1-r))}};for(const n of Object.keys(qc)){if(QX.includes(n))continue;const{channels:e}=qc[n];Ku.prototype[n]=function(...t){return this.model===n?new Ku(this):t.length>0?new Ku(t,n):new Ku([...epe(qc[this.model][n].raw(this.color)),this.valpha],n)},Ku[n]=function(...t){let i=t[0];return typeof i=="number"&&(i=aD(t,e)),new Ku(i,n)}}function Xfe(n,e){return Number(n.toFixed(e))}function Jfe(n){return function(e){return Xfe(e,n)}}function Gl(n,e,t){n=Array.isArray(n)?n:[n];for(const i of n)(sD[i]||=[])[e]=t;return n=n[0],function(i){let r;return i!==void 0?(t&&(i=t(i)),r=this[n](),r.color[e]=i,r):(r=this[n]().color[e],t&&(r=t(r)),r)}}function uc(n){return function(e){return Math.max(0,Math.min(n,e))}}function epe(n){return Array.isArray(n)?n:[n]}function aD(n,e){for(let t=0;t<e;t++)typeof n[t]!="number"&&(n[t]=0);return n}function os(){var n="/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",e="9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",statementMap:{0:{start:{line:2,column:9},end:{line:2,column:15}},1:{start:{line:3,column:15},end:{line:3,column:21}},2:{start:{line:4,column:12},end:{line:4,column:16}},3:{start:{line:8,column:4},end:{line:8,column:20}},4:{start:{line:9,column:4},end:{line:9,column:52}},5:{start:{line:10,column:4},end:{line:10,column:93}},6:{start:{line:11,column:4},end:{line:11,column:70}},7:{start:{line:12,column:4},end:{line:12,column:27}},8:{start:{line:13,column:4},end:{line:13,column:29}},9:{start:{line:14,column:4},end:{line:14,column:27}},10:{start:{line:17,column:4},end:{line:17,column:60}},11:{start:{line:20,column:4},end:{line:22,column:6}},12:{start:{line:23,column:4},end:{line:23,column:57}},13:{start:{line:24,column:4},end:{line:24,column:27}},14:{start:{line:27,column:4},end:{line:27,column:57}},15:{start:{line:27,column:33},end:{line:27,column:55}},16:{start:{line:28,column:4},end:{line:28,column:57}},17:{start:{line:28,column:33},end:{line:28,column:55}},18:{start:{line:29,column:4},end:{line:29,column:58}},19:{start:{line:29,column:34},end:{line:29,column:56}},20:{start:{line:32,column:4},end:{line:32,column:60}},21:{start:{line:33,column:4},end:{line:33,column:23}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:16},end:{line:6,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:13},end:{line:15,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:20},end:{line:18,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:18},end:{line:25,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:22},end:{line:30,column:3}},line:26},5:{name:"(anonymous_5)",decl:{start:{line:27,column:27},end:{line:27,column:28}},loc:{start:{line:27,column:33},end:{line:27,column:55}},line:27},6:{name:"(anonymous_6)",decl:{start:{line:28,column:27},end:{line:28,column:28}},loc:{start:{line:28,column:33},end:{line:28,column:55}},line:28},7:{name:"(anonymous_7)",decl:{start:{line:29,column:28},end:{line:29,column:29}},loc:{start:{line:29,column:34},end:{line:29,column:56}},line:29},8:{name:"(anonymous_8)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:13},end:{line:34,column:3}},line:31}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts"],names:[],mappings:"AAEA,qBAAqB,YAAY;AAAA,EAC/B,OAAuB;AAAA,EACvB,aAAyC;AAAA,EACzC,UAAkC;AAAA,EAElC,cAAc;AAAA,EAAC;AAAA,EAEf,MAAM,KAAU;AACd,SAAK,OAAO;AACZ,SAAK,aAAa,SAAS,cAAc,KAAK;AAC9C,SAAK,WAAW,YAAY;AAC5B,SAAK,WAAW,aAAa,eAAe,oBAAoB;AAChE,SAAK,SAAS,OAAO;AACrB,SAAK,kBAAkB;AAEvB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,kBAAkB;AAChB,SAAK,QAAS,YAAY,KAAK,KAAM,QAAQ,EAAE,QAAQ,CAAC;AAAA,EAC1D;AAAA,EAEA,SAAS,OAAe;AACtB,SAAK,WAAY,YAAY;AAAA,QACzB,KAAK;AAAA;AAET,SAAK,UAAU,KAAK,WAAY,cAAc,MAAM;AACpD,SAAK,gBAAgB;AAAA,EACvB;AAAA,EAEA,oBAAoB;AAClB,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,WAAW,MAAM,KAAK,gBAAgB,CAAC;AAAA,EACvD;AAAA,EAEA,WAAW;AACT,SAAK,WAAY,WAAY,YAAY,KAAK,UAAW;AACzD,SAAK,OAAO;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return os=function(){return s},s}os();class tpe{_map=(os().s[0]++,void 0);_container=(os().s[1]++,void 0);_textEl=(os().s[2]++,null);constructor(){os().f[0]++}onAdd(e){return os().f[1]++,os().s[3]++,this._map=e,os().s[4]++,this._container=document.createElement("div"),os().s[5]++,this._container.className="maplibregl-ctrl maplibregl-ctrl-group maplibregl-ctrl-zoom",os().s[6]++,this._container.setAttribute("data-wd-key","maplibre:ctrl-zoom"),os().s[7]++,this.setLabel("Zoom:"),os().s[8]++,this.addEventListeners(),os().s[9]++,this._container}updateZoomLevel(){os().f[2]++,os().s[10]++,this._textEl.innerHTML=this._map.getZoom().toFixed(2)}setLabel(e){os().f[3]++,os().s[11]++,this._container.innerHTML=`
      ${e} <span></span>
    `,os().s[12]++,this._textEl=this._container.querySelector("span"),os().s[13]++,this.updateZoomLevel()}addEventListeners(){os().f[4]++,os().s[14]++,this._map.on("render",()=>(os().f[5]++,os().s[15]++,this.updateZoomLevel())),os().s[16]++,this._map.on("zoomIn",()=>(os().f[6]++,os().s[17]++,this.updateZoomLevel())),os().s[18]++,this._map.on("zoomOut",()=>(os().f[7]++,os().s[19]++,this.updateZoomLevel()))}onRemove(){os().f[8]++,os().s[20]++,this._container.parentNode.removeChild(this._container),os().s[21]++,this._map=void 0}}function lD(n,e,t){const i={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(i["source-layer"]=t),i}function uD(n,e,t,i){const r={id:[t,i,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return i&&(r["source-layer"]=i),r}function cD(n,e,t){const i={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(i["source-layer"]=t),i}function qz(n,e){return{circle:e(n,.8),line:e(n,.6),polygon:e(n,.3),polygonOutline:e(n,.6),default:e(n,1)}}function npe(n,e){const t=[],i=[],r=[];for(const o of Object.keys(n)){const s=n[o];if(!s||s.length===0){const a=qz(o,e);i.push(lD(a.circle,o)),r.push(cD(a.line,o)),t.push(uD(a.polygon,a.polygonOutline,o))}else for(const a of s){const c=qz(a,e);i.push(lD(c.circle,o,a)),r.push(cD(c.line,o,a)),t.push(uD(c.polygon,c.polygonOutline,o,a))}}return t.concat(r).concat(i)}function ipe(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const i={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},r={};for(const o of Object.keys(n.sources)){const s=n.sources[o];(s.type==="vector"||s.type==="geojson")&&(r[o]=s)}return Object.assign(n,{layers:[i].concat(e),sources:r})}const VO={polygonLayer:uD,lineLayer:cD,circleLayer:lD,generateInspectStyle:ipe,generateColoredLayers:npe};function Mr(){var n="/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",e="aec0f701e803624fae461cc89b5fc887ff556587",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",statementMap:{0:{start:{line:4,column:2},end:{line:8,column:3}},1:{start:{line:5,column:4},end:{line:5,column:33}},2:{start:{line:6,column:9},end:{line:8,column:3}},3:{start:{line:7,column:4},end:{line:7,column:30}},4:{start:{line:9,column:2},end:{line:13,column:3}},5:{start:{line:10,column:4},end:{line:10,column:28}},6:{start:{line:12,column:4},end:{line:12,column:23}},7:{start:{line:14,column:2},end:{line:14,column:29}},8:{start:{line:15,column:2},end:{line:15,column:11}},9:{start:{line:18,column:2},end:{line:18,column:84}},10:{start:{line:18,column:72},end:{line:18,column:84}},11:{start:{line:19,column:24},end:{line:19,column:51}},12:{start:{line:20,column:16},end:{line:20,column:52}},13:{start:{line:21,column:2},end:{line:23,column:3}},14:{start:{line:22,column:4},end:{line:22,column:104}},15:{start:{line:24,column:2},end:{line:26,column:3}},16:{start:{line:25,column:4},end:{line:25,column:96}},17:{start:{line:27,column:2},end:{line:29,column:3}},18:{start:{line:28,column:4},end:{line:28,column:94}},19:{start:{line:30,column:2},end:{line:30,column:14}}},fnMap:{0:{name:"changeLayer",decl:{start:{line:3,column:9},end:{line:3,column:20}},loc:{start:{line:3,column:31},end:{line:16,column:1}},line:3},1:{name:"colorHighlightedLayer",decl:{start:{line:17,column:16},end:{line:17,column:37}},loc:{start:{line:17,column:45},end:{line:31,column:1}},line:17}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:8,column:3}},{start:{line:6,column:9},end:{line:8,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:8,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},2:{loc:{start:{line:9,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:13,column:3}},{start:{line:11,column:9},end:{line:13,column:3}}],line:9},3:{loc:{start:{line:18,column:2},end:{line:18,column:84}},type:"if",locations:[{start:{line:18,column:2},end:{line:18,column:84}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},4:{loc:{start:{line:18,column:6},end:{line:18,column:70}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:12}},{start:{line:18,column:16},end:{line:18,column:43}},{start:{line:18,column:47},end:{line:18,column:70}}],line:18},5:{loc:{start:{line:19,column:24},end:{line:19,column:51}},type:"binary-expr",locations:[{start:{line:19,column:24},end:{line:19,column:45}},{start:{line:19,column:49},end:{line:19,column:51}}],line:19},6:{loc:{start:{line:21,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:23,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},7:{loc:{start:{line:21,column:6},end:{line:21,column:62}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:27}},{start:{line:21,column:31},end:{line:21,column:62}}],line:21},8:{loc:{start:{line:24,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},9:{loc:{start:{line:24,column:6},end:{line:24,column:56}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:56}}],line:24},10:{loc:{start:{line:27,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:27,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:27}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/highlight.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,YAAY;AAKnB,SAAS,YAAY,GAAqB,OAA2B;AACnE,MAAG,EAAE,SAAS,UAAU;AACtB,MAAE,MAAO,eAAe,IAAI;AAAA,EAC9B,WAAU,EAAE,SAAS,QAAQ;AAC3B,MAAE,MAAO,YAAY,IAAI;AAAA,EAC3B;AAEA,MAAG,YAAY,OAAO;AACpB,MAAE,SAAS,MAAM;AAAA,EACnB,OAAO;AACL,WAAO,EAAE,QAAQ;AAAA,EACnB;AACA,IAAE,KAAK,EAAE,KAAK;AACd,SAAO;AACT;AAEO,gBAAS,sBAAsB,OAAqD;AACzF,MAAG,CAAC,SAAS,MAAM,SAAS,gBAAgB,MAAM,SAAS,SAAU,QAAO;AAE5E,QAAM,gBAAgB,MAAM,cAAc,KAAK;AAC/C,QAAM,QAAQ,OAAO,YAAY,eAAe,CAAC;AAEjD,MAAG,MAAM,SAAS,UAAU,MAAM,SAAS,kBAAkB;AAC3D,WAAO,YAAY,SAAS,aAAa,OAAO,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EACpG;AAEA,MAAG,MAAM,SAAS,YAAY,MAAM,SAAS,UAAU;AACrD,WAAO,YAAY,SAAS,YAAY,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC5F;AAEA,MAAG,MAAM,SAAS,QAAQ;AACxB,WAAO,YAAY,SAAS,UAAU,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC1F;AAEA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aec0f701e803624fae461cc89b5fc887ff556587"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Mr=function(){return s},s}Mr();function $O(n,e){return Mr().f[0]++,Mr().s[0]++,n.type==="circle"?(Mr().b[0][0]++,Mr().s[1]++,n.paint["circle-radius"]=3):(Mr().b[0][1]++,Mr().s[2]++,n.type==="line"?(Mr().b[1][0]++,Mr().s[3]++,n.paint["line-width"]=2):Mr().b[1][1]++),Mr().s[4]++,"filter"in e?(Mr().b[2][0]++,Mr().s[5]++,n.filter=e.filter):(Mr().b[2][1]++,Mr().s[6]++,delete n.filter),Mr().s[7]++,n.id=n.id+"_highlight",Mr().s[8]++,n}function rpe(n){if(Mr().f[1]++,Mr().s[9]++,Mr().b[4][0]++,!n||(Mr().b[4][1]++,n.type==="background")||(Mr().b[4][2]++,n.type==="raster"))return Mr().b[3][0]++,Mr().s[10]++,null;Mr().b[3][1]++;const e=(Mr().s[11]++,Mr().b[5][0]++,n["source-layer"]||(Mr().b[5][1]++,"")),t=(Mr().s[12]++,UX.brightColor(e,1));return Mr().s[13]++,Mr().b[7][0]++,n.type==="fill"||(Mr().b[7][1]++,n.type==="fill-extrusion")?(Mr().b[6][0]++,Mr().s[14]++,$O(VO.polygonLayer(t,t,n.source,n["source-layer"]),n)):(Mr().b[6][1]++,Mr().s[15]++,Mr().b[9][0]++,n.type==="symbol"||(Mr().b[9][1]++,n.type==="circle")?(Mr().b[8][0]++,Mr().s[16]++,$O(VO.circleLayer(t,n.source,n["source-layer"]),n)):(Mr().b[8][1]++,Mr().s[17]++,n.type==="line"?(Mr().b[10][0]++,Mr().s[18]++,$O(VO.lineLayer(t,n.source,n["source-layer"]),n)):(Mr().b[10][1]++,Mr().s[19]++,null)))}function $P(){var n="/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",e="a9dc98f82c73787713de0672aff7a601bfeb069d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:115}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,WAAW,iBAAiB,gFAAgF,KAAK;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a9dc98f82c73787713de0672aff7a601bfeb069d"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return $P=function(){return s},s}$P();$P().s[0]++;mx.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",!1);function HO(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(m){try{d(i.next(m))}catch(v){s(v)}}function c(m){try{d(i.throw(m))}catch(v){s(v)}}function d(m){m.done?o(m.value):r(m.value).then(a,c)}d((i=i.apply(n,e||[])).next())})}var XM=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function K6(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ZO,Yz;function qX(){if(Yz)return ZO;Yz=1,ZO=e;var n=Object.prototype.hasOwnProperty;function e(){for(var t={},i=0;i<arguments.length;i++){var r=arguments[i];for(var o in r)n.call(r,o)&&(t[o]=r[o])}return t}return ZO}var XO={exports:{}},Vz;function ope(){return Vz||(Vz=1,(function(n,e){(function(){var t={};n.exports=t,t.simpleFilter=function(i,r){return r.filter(function(o){return t.test(i,o)})},t.test=function(i,r){return t.match(i,r)!==null},t.match=function(i,r,o){o=o||{};var s=0,a=[],c=r.length,d=0,m=0,v=o.pre||"",M=o.post||"",B=o.caseSensitive&&r||r.toLowerCase(),P;i=o.caseSensitive&&i||i.toLowerCase();for(var U=0;U<c;U++)P=r[U],B[U]===i[s]?(P=v+P+M,s+=1,m+=1+m):m=0,d+=m,a[a.length]=P;return s===i.length?(d=B===i?1/0:d,{rendered:a.join(""),score:d}):null},t.filter=function(i,r,o){return!r||r.length===0?[]:typeof i!="string"?r:(o=o||{},r.reduce(function(s,a,c,d){var m=a;o.extract&&(m=o.extract(a));var v=t.match(i,m,o);return v!=null&&(s[s.length]={string:v.rendered,score:v.score,index:c,original:a}),s},[]).sort(function(s,a){var c=a.score-s.score;return c||s.index-a.index}))}})()})(XO)),XO.exports}var JO,$z;function spe(){if($z)return JO;$z=1;var n=function(e){return this.component=e,this.items=[],this.active=e.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};return n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(e){this.items.push(e)},n.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.isVisible=function(){return this.element.style.display==="block"},n.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()},n.prototype.drawItem=function(e,t){var i=document.createElement("li"),r=document.createElement("a");t&&(i.className+=" active"),r.innerHTML=e.string,i.appendChild(r),this.element.appendChild(i),i.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),i.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,e)}).bind(this))},n.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},n.prototype.move=function(e){this.active=e,this.draw()},n.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},n.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},JO=n,JO}var e8,Hz;function ape(){if(Hz)return e8;Hz=1;var n=qX(),e=ope(),t=spe(),i=function(r,o,s){return s=s||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},s),this.el=r,this.data=o||[],this.list=new t(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(a){this.handleKeyUp(a.keyCode,a)}).bind(this),!1),this.el.addEventListener("keydown",(function(a){this.handleKeyDown(a)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(a){this.handlePaste(a)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return i.prototype.handleKeyUp=function(r,o){if(!(r===40||r===38||r===27||r===9)){if(r===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),o.stopPropagation());return}this.handleInputChange(this.el.value)}},i.prototype.handleKeyDown=function(r){switch(r.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&r.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},i.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},i.prototype.handlePaste=function(r){if(r.clipboardData)this.handleInputChange(r.clipboardData.getData("Text"));else{var o=this;setTimeout(function(){o.handleInputChange(r.target.value)},100)}},i.prototype.handleInputChange=function(r){if(this.query=this.normalize(r),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(o){for(var s=0;s<o.length&&(this.list.add(o[s]),s!==this.options.limit-1);s++);this.list.draw()}).bind(this))},i.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},i.prototype.update=function(r){this.data=r,this.handleKeyUp()},i.prototype.clear=function(){this.data=[],this.list.clear()},i.prototype.normalize=function(r){return r=r.toLowerCase(),r},i.prototype.match=function(r,o){return r.indexOf(o)>-1},i.prototype.value=function(r){if(this.selected=r,this.el.value=this.getItemValue(r||{place_name:this.query}),document.createEvent){var o=document.createEvent("HTMLEvents");o.initEvent("change",!0,!1),this.el.dispatchEvent(o)}else this.el.fireEvent("onchange")},i.prototype.getCandidates=function(r){var o={pre:"<strong>",post:"</strong>",extract:(function(a){return this.getItemValue(a)}).bind(this)},s;this.options.filter?(s=e.filter(this.query,this.data,o),s=s.map((function(a){return{original:a.original,string:this.render(a.original,a.string)}}).bind(this))):s=this.data.map((function(a){var c=this.render(a);return{original:a,string:c}}).bind(this)),r(s)},i.prototype.getItemValue=function(r){return r},i.prototype.render=function(r,o){if(o)return o;for(var s=r.original?this.getItemValue(r.original):this.getItemValue(r),a=this.normalize(s),c=a.lastIndexOf(this.query);c>-1;){var d=c+this.query.length;s=s.slice(0,c)+"<strong>"+s.slice(c,d)+"</strong>"+s.slice(d),c=a.slice(0,c).lastIndexOf(this.query)}return s},i.prototype.renderError=function(r){this.list.drawError(r)},e8=i,e8}var t8,Zz;function lpe(){if(Zz)return t8;Zz=1;var n=ape();return t8=n,typeof window<"u"&&(window.Suggestions=n),t8}var upe=lpe(),cpe=K6(upe),pS={exports:{}},Ape=pS.exports,Xz;function hpe(){return Xz||(Xz=1,(function(n){(function(e,t,i){n.exports?n.exports=i():e[t]=i()})(Ape,"subtag",function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function i(c){return c.match(t)||[]}function r(c){return i(c).filter(function(d,m){return d&&m})}function o(c){return c=i(c),{language:c[1]||e,extlang:c[2]||e,script:c[3]||e,region:c[4]||e}}function s(c,d,m){Object.defineProperty(c,d,{value:m,enumerable:!0})}function a(c,d,m){function v(M){return i(M)[c]||e}s(v,"pattern",d),s(o,m,v)}return a(1,/^[a-zA-Z]{2,3}$/,"language"),a(2,/^[a-zA-Z]{3}$/,"extlang"),a(3,/^[a-zA-Z]{4}$/,"script"),a(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),s(o,"split",r),o})})(pS)),pS.exports}var dpe=hpe(),fpe=K6(dpe),n8,Jz;function ppe(){if(Jz)return n8;Jz=1;var n="Expected a function",e=NaN,t="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,c=typeof XM=="object"&&XM&&XM.Object===Object&&XM,d=typeof self=="object"&&self&&self.Object===Object&&self,m=c||d||Function("return this")(),v=Object.prototype,M=v.toString,B=Math.max,P=Math.min,U=function(){return m.Date.now()};function z(ie,te,q){var le,ce,ve,ge,Ee,xe,Te=0,Fe=!1,Ie=!1,Ye=!0;if(typeof ie!="function")throw new TypeError(n);te=re(te)||0,V(q)&&(Fe=!!q.leading,Ie="maxWait"in q,ve=Ie?B(re(q.maxWait)||0,te):ve,Ye="trailing"in q?!!q.trailing:Ye);function At(Ut){var Le=le,ke=ce;return le=ce=void 0,Te=Ut,ge=ie.apply(ke,Le),ge}function mt(Ut){return Te=Ut,Ee=setTimeout(Ge,te),Fe?At(Ut):ge}function Ue(Ut){var Le=Ut-xe,ke=Ut-Te,Oe=te-Le;return Ie?P(Oe,ve-ke):Oe}function De(Ut){var Le=Ut-xe,ke=Ut-Te;return xe===void 0||Le>=te||Le<0||Ie&&ke>=ve}function Ge(){var Ut=U();if(De(Ut))return Re(Ut);Ee=setTimeout(Ge,Ue(Ut))}function Re(Ut){return Ee=void 0,Ye&&le?At(Ut):(le=ce=void 0,ge)}function St(){Ee!==void 0&&clearTimeout(Ee),Te=0,le=xe=ce=Ee=void 0}function ut(){return Ee===void 0?ge:Re(U())}function kt(){var Ut=U(),Le=De(Ut);if(le=arguments,ce=this,xe=Ut,Le){if(Ee===void 0)return mt(xe);if(Ie)return Ee=setTimeout(Ge,te),At(xe)}return Ee===void 0&&(Ee=setTimeout(Ge,te)),ge}return kt.cancel=St,kt.flush=ut,kt}function V(ie){var te=typeof ie;return!!ie&&(te=="object"||te=="function")}function Z(ie){return!!ie&&typeof ie=="object"}function X(ie){return typeof ie=="symbol"||Z(ie)&&M.call(ie)==t}function re(ie){if(typeof ie=="number")return ie;if(X(ie))return e;if(V(ie)){var te=typeof ie.valueOf=="function"?ie.valueOf():ie;ie=V(te)?te+"":te}if(typeof ie!="string")return ie===0?ie:+ie;ie=ie.replace(i,"");var q=o.test(ie);return q||s.test(ie)?a(ie.slice(2),q?2:8):r.test(ie)?e:+ie}return n8=z,n8}var mpe=ppe(),gpe=K6(mpe),ype=qX(),gm=K6(ype),JM={exports:{}},ej;function vpe(){if(ej)return JM.exports;ej=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(ie,te,q){return Function.prototype.apply.call(ie,te,q)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(ie){return Object.getOwnPropertyNames(ie).concat(Object.getOwnPropertySymbols(ie))}:t=function(ie){return Object.getOwnPropertyNames(ie)};function i(re){console&&console.warn&&console.warn(re)}var r=Number.isNaN||function(ie){return ie!==ie};function o(){o.init.call(this)}JM.exports=o,JM.exports.once=V,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(re){if(typeof re!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof re)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(re){if(typeof re!="number"||re<0||r(re))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+re+".");s=re}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(ie){if(typeof ie!="number"||ie<0||r(ie))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+ie+".");return this._maxListeners=ie,this};function c(re){return re._maxListeners===void 0?o.defaultMaxListeners:re._maxListeners}o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(ie){for(var te=[],q=1;q<arguments.length;q++)te.push(arguments[q]);var le=ie==="error",ce=this._events;if(ce!==void 0)le=le&&ce.error===void 0;else if(!le)return!1;if(le){var ve;if(te.length>0&&(ve=te[0]),ve instanceof Error)throw ve;var ge=new Error("Unhandled error."+(ve?" ("+ve.message+")":""));throw ge.context=ve,ge}var Ee=ce[ie];if(Ee===void 0)return!1;if(typeof Ee=="function")e(Ee,this,te);else for(var xe=Ee.length,Te=P(Ee,xe),q=0;q<xe;++q)e(Te[q],this,te);return!0};function d(re,ie,te,q){var le,ce,ve;if(a(te),ce=re._events,ce===void 0?(ce=re._events=Object.create(null),re._eventsCount=0):(ce.newListener!==void 0&&(re.emit("newListener",ie,te.listener?te.listener:te),ce=re._events),ve=ce[ie]),ve===void 0)ve=ce[ie]=te,++re._eventsCount;else if(typeof ve=="function"?ve=ce[ie]=q?[te,ve]:[ve,te]:q?ve.unshift(te):ve.push(te),le=c(re),le>0&&ve.length>le&&!ve.warned){ve.warned=!0;var ge=new Error("Possible EventEmitter memory leak detected. "+ve.length+" "+String(ie)+" listeners added. Use emitter.setMaxListeners() to increase limit");ge.name="MaxListenersExceededWarning",ge.emitter=re,ge.type=ie,ge.count=ve.length,i(ge)}return re}o.prototype.addListener=function(ie,te){return d(this,ie,te,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(ie,te){return d(this,ie,te,!0)};function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(re,ie,te){var q={fired:!1,wrapFn:void 0,target:re,type:ie,listener:te},le=m.bind(q);return le.listener=te,q.wrapFn=le,le}o.prototype.once=function(ie,te){return a(te),this.on(ie,v(this,ie,te)),this},o.prototype.prependOnceListener=function(ie,te){return a(te),this.prependListener(ie,v(this,ie,te)),this},o.prototype.removeListener=function(ie,te){var q,le,ce,ve,ge;if(a(te),le=this._events,le===void 0)return this;if(q=le[ie],q===void 0)return this;if(q===te||q.listener===te)--this._eventsCount===0?this._events=Object.create(null):(delete le[ie],le.removeListener&&this.emit("removeListener",ie,q.listener||te));else if(typeof q!="function"){for(ce=-1,ve=q.length-1;ve>=0;ve--)if(q[ve]===te||q[ve].listener===te){ge=q[ve].listener,ce=ve;break}if(ce<0)return this;ce===0?q.shift():U(q,ce),q.length===1&&(le[ie]=q[0]),le.removeListener!==void 0&&this.emit("removeListener",ie,ge||te)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(ie){var te,q,le;if(q=this._events,q===void 0)return this;if(q.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):q[ie]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete q[ie]),this;if(arguments.length===0){var ce=Object.keys(q),ve;for(le=0;le<ce.length;++le)ve=ce[le],ve!=="removeListener"&&this.removeAllListeners(ve);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(te=q[ie],typeof te=="function")this.removeListener(ie,te);else if(te!==void 0)for(le=te.length-1;le>=0;le--)this.removeListener(ie,te[le]);return this};function M(re,ie,te){var q=re._events;if(q===void 0)return[];var le=q[ie];return le===void 0?[]:typeof le=="function"?te?[le.listener||le]:[le]:te?z(le):P(le,le.length)}o.prototype.listeners=function(ie){return M(this,ie,!0)},o.prototype.rawListeners=function(ie){return M(this,ie,!1)},o.listenerCount=function(re,ie){return typeof re.listenerCount=="function"?re.listenerCount(ie):B.call(re,ie)},o.prototype.listenerCount=B;function B(re){var ie=this._events;if(ie!==void 0){var te=ie[re];if(typeof te=="function")return 1;if(te!==void 0)return te.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function P(re,ie){for(var te=new Array(ie),q=0;q<ie;++q)te[q]=re[q];return te}function U(re,ie){for(;ie+1<re.length;ie++)re[ie]=re[ie+1];re.pop()}function z(re){for(var ie=new Array(re.length),te=0;te<ie.length;++te)ie[te]=re[te].listener||re[te];return ie}function V(re,ie){return new Promise(function(te,q){function le(ve){re.removeListener(ie,ce),q(ve)}function ce(){typeof re.removeListener=="function"&&re.removeListener("error",le),te([].slice.call(arguments))}X(re,ie,ce,{once:!0}),ie!=="error"&&Z(re,le,{once:!0})})}function Z(re,ie,te){typeof re.on=="function"&&X(re,"error",ie,te)}function X(re,ie,te,q){if(typeof re.on=="function")q.once?re.once(ie,te):re.on(ie,te);else if(typeof re.addEventListener=="function")re.addEventListener(ie,function le(ce){q.once&&re.removeEventListener(ie,le),te(ce)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof re)}return JM.exports}var bpe=vpe();const tj={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},Cpe={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:"",es:"Buscar"},_pe={en:"No results found",de:"Keine Ergebnisse gefunden",es:"No hay resultados",fr:"Aucun rsultat trouv"},xpe={en:"There was an error reaching the server",de:"Verbindung fehlgeschlagen",es:"Error al conectarse al servidor",fr:"Une erreur est survenue lors de la connexion au serveur"};var g3={placeholder:Cpe,errorNoResults:_pe,errorConnectionFailed:xpe};const Mpe=/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;class wpe{constructor(e,t,i=(r,o,s)=>new cpe(r,o,s)){this.options={zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:void 0,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,proximityMinZoom:9,getItemValue:r=>r.text!=null?r.text:r.place_name,render:r=>{if(!("geometry"in r)){const s=r.text,a=s.toLowerCase().indexOf(this._typeahead.query.toLowerCase()),c=this._typeahead.query.length,d=s.substring(0,a),m=s.substring(a,a+c),v=s.substring(a+c);return'<div class="maplibregl-ctrl-geocoder--suggestion"><svg class="maplibregl-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="maplibregl-ctrl-geocoder--suggestion-info"><div class="maplibregl-ctrl-geocoder--suggestion-title">'+d+'<span class="maplibregl-ctrl-geocoder--suggestion-match">'+m+"</span>"+v+"</div></div></div>"}const o=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--result"><svg class="maplibregl-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="maplibregl-ctrl-geocoder--result-title">'+o[0]+'</div><div class="maplibregl-ctrl-geocoder--result-address">'+o.splice(1,o.length).join(",")+"</div></div></div>"},popupRender:r=>{const o=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--suggestion popup-suggestion"><div class="maplibregl-ctrl-geocoder--suggestion-title popup-suggestion-title">'+o[0]+'</div><div class="maplibregl-ctrl-geocoder--suggestion-address popup-suggestion-address">'+o.splice(1,o.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},this._eventEmitter=new bpe.EventEmitter,this.options=gm({},this.options,t),this.fresh=!0,this.lastSelected=null,this.geocoderApi=e,this.typeaheadFactory=i}addTo(e){function t(i,r){if(!document.body.contains(r))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const o=i.onAdd();r.appendChild(o)}if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const i=document.querySelectorAll(e);if(i.length===0)throw new Error("Element "+e+"not found.");if(i.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,i[0])}else if("addControl"in e)e.addControl(this);else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")}onAdd(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);const t=this.container=document.createElement("div");t.className="maplibregl-ctrl-geocoder maplibregl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";const i=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="search",this._inputEl.className="maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",gpe(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);const r=document.createElement("div");r.classList.add("maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("type","button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="maplibregl-ctrl-geocoder--button";const o=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(o),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),r.appendChild(this._clearEl),r.appendChild(this._loadingEl),t.appendChild(i),t.appendChild(this._inputEl),t.appendChild(r),this._typeahead=this.typeaheadFactory(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.container.addEventListener("click",()=>{this._typeahead.update(this._typeahead.data)}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),t}createIcon(e,t){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");if(i.setAttribute("class","maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+e),i.setAttribute("viewBox","0 0 18 18"),i.setAttribute("xml:space","preserve"),i.setAttribute("width","18"),i.setAttribute("height","18"),"innerHTML"in i)i.innerHTML=t;else{const r=document.createElement("div");r.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";const o=r.firstChild,s=o.firstChild;i.appendChild(s)}return i}onRemove(){return this.container.remove(),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this}_onPaste(e){const t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}_onKeyDown(e){if(e.key==="Escape"&&this.options.clearAndBlurOnEsc){this._clear(e),this._inputEl.blur();return}const t=this._inputEl.value;if(!t){this.fresh=!0,e.key!=="Tab"&&this.clear(e),this._clearEl.style.display="none";return}if(!(e.metaKey||e.key==="Tab"||e.key==="Escape"||e.key==="ArrowLeft"||e.key==="ArrowRight"||e.key==="ArrowUp"||e.key==="ArrowDown")){if(e.key==="Enter")if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(t);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(t,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}}_showButton(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")}_hideButton(){this._typeahead.selected&&(this._clearEl.style.display="none")}_onBlur(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()}_onChange(){var e;const t=this._typeahead.selected;if(t){if(!("geometry"in t)){t.placeId?this._geocode(t.placeId,!0,!0):this._geocode(t.text,!0);return}if(JSON.stringify(t)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){let i;if(this._removeResultMarkers(),t.properties&&tj[t.properties.short_code])i=gm({},this.options.flyTo),this._map&&this._map.fitBounds(tj[t.properties.short_code].bbox,i);else if(t.bbox){const r=t.bbox;i=gm({},this.options.flyTo),this._map&&this._map.fitBounds([[r[0],r[1]],[r[2],r[3]]],i)}else{const r={zoom:this.options.zoom};i=gm({},r,this.options.flyTo),t.center?i.center=t.center:((e=t.geometry)===null||e===void 0?void 0:e.type)==="Point"&&t.geometry.coordinates&&(i.center=t.geometry.coordinates),this._map&&this._map.flyTo(i)}}this.options.marker&&this._maplibregl&&this._handleMarker(t),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(t),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:t})}}}_getConfigForRequest(){return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((i,r)=>(this.options[r]&&(["countries","types","language"].indexOf(r)>-1?i[r]=this.options[r].split(/[\s,]+/):i[r]=this.options[r],r==="proximity"&&this.options[r]&&typeof this.options[r].longitude=="number"&&typeof this.options[r].latitude=="number"&&(i[r]=[this.options[r].longitude,this.options[r].latitude])),i),{})}_geocode(e){return HO(this,arguments,void 0,function*(t,i=!1,r=!1){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});const o=this._getConfigForRequest(),s=this._createGeocodeRequest(o,t,i,r),a=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[];try{const c=yield s;yield this._handleGeocodeResponse(c,o,t,i,a)}catch(c){this._handleGeocodeErrorResponse(c,a)}return s})}_createGeocodeRequest(e,t,i,r){return this.options.localGeocoderOnly?Promise.resolve({}):this.options.reverseGeocode&&Mpe.test(t)?this._createReverseGeocodeRequest(t,e):(e.query=t,this.geocoderApi.getSuggestions?i?this.geocoderApi.searchByPlaceId&&r?this.geocoderApi.searchByPlaceId(e):this.geocoderApi.forwardGeocode(e):this.geocoderApi.getSuggestions(e):this.geocoderApi.forwardGeocode(e))}_createReverseGeocodeRequest(e,t){const i=e.split(/[\s(,)?]+/).map(r=>parseFloat(r)).reverse();return t.query=i,t.limit=1,"proximity"in t&&delete t.proximity,this.geocoderApi.reverseGeocode(t)}_handleGeocodeResponse(e,t,i,r,o){return HO(this,void 0,void 0,function*(){this._loadingEl.style.display="none";let s={};e?s=e:s={type:"FeatureCollection",features:[]},s.config=t,this.fresh&&(this.fresh=!1),s.features=s.features?o.concat(s.features):o;const a=this.options.externalGeocoder?this.options.externalGeocoder(i,s.features,t)||Promise.resolve([]):Promise.resolve([]);try{const d=yield a;s.features=s.features?d.concat(s.features):d}catch{}this.options.filter&&s.features.length&&(s.features=s.features.filter(this.options.filter));let c=[];"suggestions"in s?c=s.suggestions:"place"in s?c=Array.isArray(s.place)?s.place:[s.place]:c=s.features,c.length?(this._clearEl.style.display="block",this._typeahead.update(c),(!this.options.showResultsWhileTyping||r)&&this.options.showResultMarkers&&(s.features.length>0||"place"in s)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",s)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",s))})}_handleGeocodeErrorResponse(e,t){this._loadingEl.style.display="none",t.length&&this.options.localGeocoder?(this._clearEl.style.display="block",this._typeahead.update(t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:t}),this._eventEmitter.emit("error",{error:e})}_clear(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0}clear(e){this._clear(e),this._inputEl.focus()}_clearOnBlur(e){e.relatedTarget&&this._clear(e)}_onQueryResult(e){if(!("features"in e)||!e.features.length)return;const t=e.features[0];this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange()}_updateProximity(){if(this._map)if(this._map.getZoom()>this.options.proximityMinZoom){const e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)}_collapse(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("maplibregl-ctrl-geocoder--collapsed")}_unCollapse(){this.container.classList.remove("maplibregl-ctrl-geocoder--collapsed")}query(e){return HO(this,void 0,void 0,function*(){const t=yield this._geocode(e);this._onQueryResult(t)})}_renderError(){const e=`<div class='maplibre-gl-geocoder--error'>${this._localize("errorConnectionFailed")}</div>`;this._renderMessage(e)}_renderNoResults(){const e=`<div class='maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>
        ${this._localize("errorNoResults")}</div>`;this._renderMessage(e)}_renderMessage(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)}_localize(e){const t=fpe.language(this.options.language.split(",")[0]);return this.options.language&&g3?.[e][t]?g3[e][t]:g3[e].en}_fitBoundsForMarkers(){var e;if(this._typeahead.data.length<1)return;const t=this._typeahead.data.filter(i=>typeof i!="string").slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){const r=gm({},{padding:100},this.options.flyTo),o=new this._maplibregl.LngLatBounds;for(const s of t)"geometry"in s&&((e=s.geometry)===null||e===void 0?void 0:e.type)==="Point"&&o.extend(s.geometry.coordinates);this._map.fitBounds(o,r)}return t.length>0&&this._maplibregl&&this._handleResultMarkers(t),this}setInput(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e),this}setProximity(e){return this.options.proximity=e,this}getProximity(){return this.options.proximity}setRenderFunction(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this}getRenderFunction(){return this._typeahead.render}setLanguage(e){return this.options.language=e||this.options.language||navigator.language,this}getLanguage(){return this.options.language}getZoom(){return this.options.zoom}setZoom(e){return this.options.zoom=e,this}getFlyTo(){return this.options.flyTo}setFlyTo(e){return this.options.flyTo=e,this}getPlaceholder(){return this.options.placeholder}setPlaceholder(e){return this.options.placeholder=e||this.options.placeholder||this._localize("placeholder"),this._inputEl.placeholder=this.options.placeholder,this._inputEl.setAttribute("aria-label",this.options.placeholder),this}getBbox(){return this.options.bbox}setBbox(e){return this.options.bbox=e,this}getCountries(){return this.options.countries}setCountries(e){return this.options.countries=e,this}getTypes(){return this.options.types}setTypes(e){return this.options.types=e,this}getMinLength(){return this.options.minLength}setMinLength(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this}getLimit(){return this.options.limit}setLimit(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this}getFilter(){return this.options.filter}setFilter(e){return this.options.filter=e,this}setGeocoderApi(e){return this.geocoderApi=e,this}getGeocoderApi(){return this.geocoderApi}_handleMarker(e){var t;if(!this._map)return;this._removeMarker();const r=gm({},{color:"#4668F2"},this.options.marker);this.mapMarker=new this._maplibregl.Marker(r);let o=null;if(this.options.popup){const a=gm({},{},this.options.popup);o=new this._maplibregl.Popup(a).setHTML(this.options.popupRender(e))}return e.center?(this.mapMarker.setLngLat(e.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(o)):((t=e.geometry)===null||t===void 0?void 0:t.type)==="Point"&&e.geometry.coordinates&&(this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(o)),this}_removeMarker(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)}_handleResultMarkers(e){if(!this._map)return;this._removeResultMarkers();let i=gm({},{color:"#4668F2"},this.options.showResultMarkers);for(const r of e){let o;if(this.options.showResultMarkers){this.options.showResultMarkers&&this.options.showResultMarkers.element&&(o=this.options.showResultMarkers.element.cloneNode(!0),i=gm(i,{element:o}));const s=new this._maplibregl.Marker(gm({},i,{element:o}));let a;if(this.options.popup){const d=gm({},{},this.options.popup);a=new this._maplibregl.Popup(d).setHTML(this.options.popupRender(r))}r.center?(s.setLngLat(r.center).addTo(this._map),this.options.popup&&s.setPopup(a)):r.geometry&&r.geometry.type&&r.geometry.type==="Point"&&r.geometry.coordinates&&(s.setLngLat(r.geometry.coordinates).addTo(this._map),this.options.popup&&s.setPopup(a)),this.resultMarkers.push(s)}}return this}_removeResultMarkers(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(e){e.remove()}),this.resultMarkers=[])}on(e,t){return this._eventEmitter.on(e,t),this}once(e){return new Promise(t=>{this._eventEmitter.once(e,t)})}off(e,t){return this._eventEmitter.removeListener(e,t),this}}function Jt(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",e="aea9d83a607391782a40e2ae1c9baf372f7aa7d5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",statementMap:{0:{start:{line:21,column:26},end:{line:27,column:3}},1:{start:{line:28,column:16},end:{line:28,column:55}},2:{start:{line:29,column:2},end:{line:31,column:3}},3:{start:{line:30,column:4},end:{line:30,column:30}},4:{start:{line:32,column:18},end:{line:32,column:20}},5:{start:{line:33,column:2},end:{line:38,column:5}},6:{start:{line:34,column:19},end:{line:34,column:53}},7:{start:{line:35,column:4},end:{line:37,column:5}},8:{start:{line:36,column:6},end:{line:36,column:33}},9:{start:{line:39,column:23},end:{line:43,column:3}},10:{start:{line:44,column:2},end:{line:44,column:22}},11:{start:{line:47,column:24},end:{line:57,column:3}},12:{start:{line:58,column:14},end:{line:58,column:18}},13:{start:{line:60,column:4},end:{line:60,column:17}},14:{start:{line:61,column:4},end:{line:66,column:6}},15:{start:{line:67,column:4},end:{line:69,column:7}},16:{start:{line:68,column:6},end:{line:68,column:25}},17:{start:{line:72,column:17},end:{line:72,column:22}},18:{start:{line:73,column:4},end:{line:76,column:5}},19:{start:{line:74,column:6},end:{line:74,column:132}},20:{start:{line:77,column:4},end:{line:77,column:18}},21:{start:{line:80,column:16},end:{line:80,column:30}},22:{start:{line:81,column:28},end:{line:81,column:79}},23:{start:{line:82,column:4},end:{line:87,column:5}},24:{start:{line:83,column:6},end:{line:83,column:52}},25:{start:{line:84,column:6},end:{line:84,column:70}},26:{start:{line:85,column:6},end:{line:85,column:70}},27:{start:{line:86,column:6},end:{line:86,column:76}},28:{start:{line:88,column:4},end:{line:90,column:5}},29:{start:{line:89,column:6},end:{line:89,column:43}},30:{start:{line:91,column:4},end:{line:96,column:5}},31:{start:{line:92,column:6},end:{line:92,column:59}},32:{start:{line:93,column:6},end:{line:95,column:14}},33:{start:{line:94,column:8},end:{line:94,column:36}},34:{start:{line:99,column:20},end:{line:117,column:5}},35:{start:{line:109,column:8},end:{line:111,column:9}},36:{start:{line:110,column:10},end:{line:110,column:50}},37:{start:{line:112,column:8},end:{line:112,column:23}},38:{start:{line:118,column:21},end:{line:118,column:53}},39:{start:{line:119,column:4},end:{line:119,column:53}},40:{start:{line:120,column:16},end:{line:120,column:43}},41:{start:{line:121,column:26},end:{line:125,column:5}},42:{start:{line:122,column:21},end:{line:122,column:36}},43:{start:{line:123,column:19},end:{line:123,column:32}},44:{start:{line:124,column:6},end:{line:124,column:44}},45:{start:{line:126,column:4},end:{line:126,column:20}},46:{start:{line:127,column:4},end:{line:127,column:56}},47:{start:{line:128,column:4},end:{line:128,column:56}},48:{start:{line:129,column:4},end:{line:129,column:62}},49:{start:{line:130,column:21},end:{line:130,column:43}},50:{start:{line:131,column:24},end:{line:131,column:41}},51:{start:{line:132,column:4},end:{line:132,column:45}},52:{start:{line:133,column:16},end:{line:133,column:74}},53:{start:{line:134,column:4},end:{line:134,column:37}},54:{start:{line:135,column:20},end:{line:135,column:49}},55:{start:{line:136,column:17},end:{line:136,column:36}},56:{start:{line:137,column:25},end:{line:139,column:6}},57:{start:{line:140,column:20},end:{line:171,column:6}},58:{start:{line:148,column:8},end:{line:148,column:82}},59:{start:{line:150,column:62},end:{line:150,column:141}},60:{start:{line:152,column:8},end:{line:169,column:9}},61:{start:{line:153,column:10},end:{line:155,column:13}},62:{start:{line:154,column:12},end:{line:154,column:94}},63:{start:{line:156,column:10},end:{line:156,column:25}},64:{start:{line:158,column:10},end:{line:167,column:13}},65:{start:{line:159,column:12},end:{line:166,column:15}},66:{start:{line:168,column:10},end:{line:168,column:25}},67:{start:{line:172,column:4},end:{line:172,column:28}},68:{start:{line:173,column:4},end:{line:181,column:7}},69:{start:{line:174,column:6},end:{line:180,column:9}},70:{start:{line:182,column:4},end:{line:187,column:7}},71:{start:{line:183,column:6},end:{line:183,column:40}},72:{start:{line:183,column:33},end:{line:183,column:40}},73:{start:{line:184,column:6},end:{line:186,column:9}},74:{start:{line:188,column:4},end:{line:190,column:7}},75:{start:{line:189,column:6},end:{line:189,column:30}},76:{start:{line:191,column:4},end:{line:195,column:7}},77:{start:{line:192,column:6},end:{line:194,column:9}},78:{start:{line:196,column:4},end:{line:196,column:37}},79:{start:{line:197,column:4},end:{line:197,column:37}},80:{start:{line:199,column:22},end:{line:202,column:3}},81:{start:{line:200,column:18},end:{line:200,column:82}},82:{start:{line:200,column:66},end:{line:200,column:81}},83:{start:{line:201,column:4},end:{line:201,column:36}},84:{start:{line:204,column:27},end:{line:237,column:5}},85:{start:{line:206,column:25},end:{line:206,column:27}},86:{start:{line:207,column:8},end:{line:232,column:9}},87:{start:{line:208,column:26},end:{line:208,column:138}},88:{start:{line:209,column:27},end:{line:209,column:47}},89:{start:{line:210,column:26},end:{line:210,column:47}},90:{start:{line:211,column:10},end:{line:229,column:11}},91:{start:{line:212,column:27},end:{line:215,column:13}},92:{start:{line:216,column:26},end:{line:227,column:13}},93:{start:{line:228,column:12},end:{line:228,column:33}},94:{start:{line:231,column:10},end:{line:231,column:69}},95:{start:{line:233,column:8},end:{line:235,column:10}},96:{start:{line:238,column:21},end:{line:241,column:6}},97:{start:{line:242,column:4},end:{line:242,column:41}},98:{start:{line:243,column:4},end:{line:243,column:20}},99:{start:{line:246,column:14},end:{line:246,column:26}},100:{start:{line:247,column:4},end:{line:247,column:53}},101:{start:{line:248,column:4},end:{line:248,column:49}},102:{start:{line:249,column:4},end:{line:260,column:6}},103:{start:{line:256,column:10},end:{line:256,column:29}},104:{start:{line:263,column:22},end:{line:263,column:62}}},fnMap:{0:{name:"buildInspectStyle",decl:{start:{line:20,column:9},end:{line:20,column:26}},loc:{start:{line:20,column:78},end:{line:45,column:1}},line:20},1:{name:"(anonymous_1)",decl:{start:{line:33,column:48},end:{line:33,column:49}},loc:{start:{line:33,column:62},end:{line:38,column:3}},line:33},2:{name:"(anonymous_2)",decl:{start:{line:48,column:17},end:{line:48,column:18}},loc:{start:{line:48,column:23},end:{line:49,column:5}},line:48},3:{name:"(anonymous_3)",decl:{start:{line:50,column:18},end:{line:50,column:19}},loc:{start:{line:50,column:24},end:{line:51,column:5}},line:50},4:{name:"(anonymous_4)",decl:{start:{line:52,column:19},end:{line:52,column:20}},loc:{start:{line:52,column:25},end:{line:53,column:5}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:54,column:14},end:{line:54,column:15}},loc:{start:{line:54,column:20},end:{line:55,column:5}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:21},end:{line:70,column:3}},line:59},7:{name:"(anonymous_7)",decl:{start:{line:67,column:34},end:{line:67,column:35}},loc:{start:{line:67,column:40},end:{line:69,column:5}},line:67},8:{name:"(anonymous_8)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:46},end:{line:78,column:3}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:79,column:2},end:{line:79,column:3}},loc:{start:{line:79,column:23},end:{line:97,column:3}},line:79},10:{name:"(anonymous_10)",decl:{start:{line:93,column:17},end:{line:93,column:18}},loc:{start:{line:93,column:23},end:{line:95,column:7}},line:93},11:{name:"(anonymous_11)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:22},end:{line:198,column:3}},line:98},12:{name:"(anonymous_12)",decl:{start:{line:108,column:24},end:{line:108,column:25}},loc:{start:{line:108,column:33},end:{line:113,column:7}},line:108},13:{name:"(anonymous_13)",decl:{start:{line:121,column:26},end:{line:121,column:27}},loc:{start:{line:121,column:32},end:{line:125,column:5}},line:121},14:{name:"(anonymous_14)",decl:{start:{line:147,column:24},end:{line:147,column:25}},loc:{start:{line:147,column:44},end:{line:149,column:7}},line:147},15:{name:"(anonymous_15)",decl:{start:{line:150,column:25},end:{line:150,column:26}},loc:{start:{line:150,column:62},end:{line:150,column:141}},line:150},16:{name:"(anonymous_16)",decl:{start:{line:151,column:19},end:{line:151,column:20}},loc:{start:{line:151,column:33},end:{line:170,column:7}},line:151},17:{name:"(anonymous_17)",decl:{start:{line:153,column:36},end:{line:153,column:37}},loc:{start:{line:153,column:42},end:{line:155,column:11}},line:153},18:{name:"(anonymous_18)",decl:{start:{line:158,column:36},end:{line:158,column:37}},loc:{start:{line:158,column:42},end:{line:167,column:11}},line:158},19:{name:"(anonymous_19)",decl:{start:{line:173,column:25},end:{line:173,column:26}},loc:{start:{line:173,column:31},end:{line:181,column:5}},line:173},20:{name:"(anonymous_20)",decl:{start:{line:182,column:19},end:{line:182,column:20}},loc:{start:{line:182,column:26},end:{line:187,column:5}},line:182},21:{name:"(anonymous_21)",decl:{start:{line:188,column:20},end:{line:188,column:21}},loc:{start:{line:188,column:27},end:{line:190,column:5}},line:188},22:{name:"(anonymous_22)",decl:{start:{line:191,column:19},end:{line:191,column:20}},loc:{start:{line:191,column:27},end:{line:195,column:5}},line:191},23:{name:"(anonymous_23)",decl:{start:{line:199,column:22},end:{line:199,column:23}},loc:{start:{line:199,column:30},end:{line:202,column:3}},line:199},24:{name:"(anonymous_24)",decl:{start:{line:200,column:55},end:{line:200,column:56}},loc:{start:{line:200,column:66},end:{line:200,column:81}},line:200},25:{name:"(anonymous_25)",decl:{start:{line:203,column:2},end:{line:203,column:3}},loc:{start:{line:203,column:20},end:{line:244,column:3}},line:203},26:{name:"(anonymous_26)",decl:{start:{line:205,column:22},end:{line:205,column:23}},loc:{start:{line:205,column:40},end:{line:236,column:7}},line:205},27:{name:"(anonymous_27)",decl:{start:{line:245,column:2},end:{line:245,column:3}},loc:{start:{line:245,column:11},end:{line:261,column:3}},line:245},28:{name:"(anonymous_28)",decl:{start:{line:255,column:13},end:{line:255,column:14}},loc:{start:{line:255,column:20},end:{line:257,column:9}},line:255}},branchMap:{0:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},2:{loc:{start:{line:35,column:8},end:{line:35,column:64}},type:"binary-expr",locations:[{start:{line:35,column:8},end:{line:35,column:32}},{start:{line:35,column:36},end:{line:35,column:64}}],line:35},3:{loc:{start:{line:74,column:15},end:{line:74,column:131}},type:"binary-expr",locations:[{start:{line:74,column:15},end:{line:74,column:71}},{start:{line:74,column:75},end:{line:74,column:131}}],line:74},4:{loc:{start:{line:82,column:4},end:{line:87,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:87,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:82},5:{loc:{start:{line:88,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:88,column:4},end:{line:90,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:88},6:{loc:{start:{line:88,column:8},end:{line:88,column:98}},type:"binary-expr",locations:[{start:{line:88,column:8},end:{line:88,column:26}},{start:{line:88,column:30},end:{line:88,column:98}}],line:88},7:{loc:{start:{line:91,column:4},end:{line:96,column:5}},type:"if",locations:[{start:{line:91,column:4},end:{line:96,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:91},8:{loc:{start:{line:91,column:8},end:{line:91,column:59}},type:"binary-expr",locations:[{start:{line:91,column:8},end:{line:91,column:26}},{start:{line:91,column:30},end:{line:91,column:59}}],line:91},9:{loc:{start:{line:109,column:8},end:{line:111,column:9}},type:"if",locations:[{start:{line:109,column:8},end:{line:111,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:109},10:{loc:{start:{line:152,column:8},end:{line:169,column:9}},type:"if",locations:[{start:{line:152,column:8},end:{line:169,column:9}},{start:{line:157,column:15},end:{line:169,column:9}}],line:152},11:{loc:{start:{line:183,column:6},end:{line:183,column:40}},type:"if",locations:[{start:{line:183,column:6},end:{line:183,column:40}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:183}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx"],names:[],mappings:"AAuMwB;AAvMxB,OAAO,WAAW;AAClB,SAAQ,kBAAiB;AACzB,OAAO,gBAAsI;AAC7I,OAAO,qBAAqB;AAC5B,OAAO,YAAY;AACnB,OAAO,6BAA6B;AACpC,OAAO,uCAAgE;AACvE,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAAgC,6BAA6B;AAC7D,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,sBAAoF;AAC3F,OAAO;AACP,SAAS,uBAA6C;AACtD,OAAO,aAAa;AACpB,SAAS,gBAAgB;AAEzB,SAAS,kBAAkB,kBAAsC,eAAmC,kBAAqC;AACvI,QAAM,kBAAkB;AAAA,IACtB,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,oBAAoB;AAAA,IACtB;AAAA,EACF;AAEA,QAAM,QAAQ,sBAAsB,gBAAgB;AACpD,MAAG,OAAO;AACR,kBAAc,KAAK,KAAK;AAAA,EAC1B;AAEA,QAAM,UAA+C,CAAC;AAEtD,SAAO,KAAK,iBAAiB,OAAO,EAAE,QAAQ,cAAY;AACxD,UAAM,SAAS,iBAAiB,QAAQ,QAAQ;AAChD,QAAG,OAAO,SAAS,YAAY,OAAO,SAAS,cAAc;AAC3D,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAAA,EACF,CAAC;AAED,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH;AAAA,IACA,QAAQ,CAAC,eAAe,EAAE,OAAO,aAAqC;AAAA,EACxE;AACA,SAAO;AACT;AAyBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EACA,YAAmC;AAAA,EAEnC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,MACV,aAAa;AAAA,IACf;AACA,YAAQ,GAAG,mBAAmB,MAAM;AAClC,WAAK,YAAY;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAGA,sBAAsB,WAAuC,WAA+B;AAC1F,QAAI,SAAS;AACb,QAAI;AACF,eAAS,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS;AAAA,IAC9H,SAAQ,IAAI;AAAA,IAEZ;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB;AACnB,UAAM,MAAM,KAAK,MAAM;AAEvB,UAAM,kBAAkB,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAC1E,QAAI,KAAK;AAIP,UAAI,SAAS,iBAAiB,EAAC,MAAM,KAAI,CAAC;AAC1C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,wBAAwB,KAAK,MAAM,SAAS;AAAA,IAClD;AAEA,QAAG,KAAK,MAAM,WAAW,KAAK,MAAM,uBAAuB,KAAK,MAAM,QAAQ,iBAAiB;AAC7F,WAAK,MAAM,QAAQ,gBAAgB;AAAA,IACrC;AACA,QAAI,KAAK,MAAM,WAAW,KAAK,MAAM,oBAAoB;AACvD,WAAK,MAAM,QAAQ,iBAAiB,eAAe;AAEnD,iBAAW,MAAM;AACf,aAAK,MAAM,QAAS,OAAO;AAAA,MAC7B,GAAG,GAAG;AAAA,IACR;AAAA,EAEF;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM;AAAA,MACd,WAAW,KAAK;AAAA,MAChB,OAAO,KAAK,MAAM;AAAA,MAClB,MAAM;AAAA,MACN,SAAS;AAAA;AAAA;AAAA;AAAA,MAIT,kBAAkB,CAAC,QAAQ;AACzB,YAAI,IAAI,WAAW,GAAG,GAAG;AACvB,gBAAM,GAAG,OAAO,SAAS,MAAM,GAAG,GAAG;AAAA,QACvC;AACA,eAAO,EAAE,IAAI;AAAA,MACf;AAAA;AAAA;AAAA,MAGA,0BAA0B;AAAA,IAC5B;AAEA,UAAM,WAAW,IAAI,SAAS,EAAC,UAAU,KAAI,CAAC;AAC9C,eAAW,YAAY,WAAU,SAAS,IAAI;AAC9C,UAAM,MAAM,IAAI,WAAW,IAAI,OAAO;AAEtC,UAAM,gBAAgB,MAAM;AAC1B,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,OAAO,IAAI,QAAQ;AACzB,WAAK,MAAM,SAAS,EAAC,QAAQ,KAAI,CAAC;AAAA,IACpC;AACA,kBAAc;AAEd,QAAI,qBAAqB,QAAQ;AACjC,QAAI,qBAAqB,QAAQ;AACjC,QAAI,wBAAwB,QAAQ;AAEpC,UAAM,WAAW,KAAK,aAAa,GAAG;AAEtC,UAAM,cAAc,IAAI,YAAY;AACpC,QAAI,WAAW,aAAa,WAAW;AAEvC,UAAM,MAAM,IAAI,WAAW,kBAAkB,EAAC,gBAAe,KAAI,CAAC;AAClE,QAAI,WAAW,KAAK,WAAW;AAE/B,UAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,UAAM,OAAO,WAAW,OAAO;AAE/B,UAAM,eAAe,IAAI,WAAW,MAAM;AAAA,MACxC,cAAc;AAAA,IAChB,CAAC;AAED,UAAM,UAAU,IAAI,gBAAgB;AAAA,MAClC,OAAO;AAAA,MACP,cAAc;AAAA,MACd,qBAAqB;AAAA,MACrB,4BAA4B;AAAA,MAC5B,mBAAmB;AAAA,MACnB,wBAAwB;AAAA,MACxB,kBAAkB,CAAC,SAAiB,UAAkB;AACpD,eAAO,MAAM,OAAO,YAAY,SAAS,KAAK,CAAC,EAAE,WAAW,GAAG,EAAE,OAAO;AAAA,MAC1E;AAAA,MACA,mBAAmB,CAAC,kBAAsC,kBAAsC,kBAAkB,kBAAkB,eAAe,KAAK,MAAM,gBAAgB;AAAA,MAC9K,aAAa,CAAC,aAA+B;AAC3C,YAAG,KAAK,MAAM,oBAAoB;AAChC,uBAAa,KAAK,QAAQ,MAAM;AAC9B,iBAAK,OAAO,oBAAC,qCAAkC,UAAoB,CAAE;AAAA,UACvE,CAAC;AACD,iBAAO;AAAA,QACT,OAAO;AACL,uBAAa,KAAK,QAAQ,MAAM;AAC9B,iBAAK,OAAO;AAAA,cAAC;AAAA;AAAA,gBACX;AAAA,gBACA,eAAe,KAAK;AAAA,gBACpB,MAAM,KAAK,MAAM;AAAA;AAAA,YACnB,CAAG;AAAA,UACL,CAAC;AACD,iBAAO;AAAA,QACT;AAAA,MACF;AAAA,IACF,CAAC;AACD,QAAI,WAAW,OAAO;AAEtB,QAAI,GAAG,cAAc,MAAM;AACzB,WAAK,SAAS;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,QAAQ,OAAK;AAClB,UAAG,EAAE,aAAa,OAAQ;AAC1B,WAAK,MAAM,aAAc;AAAA,QACvB,KAAK,KAAK,MAAM;AAAA,MAClB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,SAAS,OAAK;AACnB,cAAQ,IAAI,SAAS,CAAC;AAAA,IACxB,CAAC;AAED,QAAI,GAAG,QAAQ,QAAM;AACnB,WAAK,SAAS;AAAA,QACZ,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,WAAW,aAAa;AAC/B,QAAI,GAAG,WAAW,aAAa;AAAA,EACjC;AAAA,EAEA,oBAAoB,CAAC,OAAe;AAClC,UAAM,QAAQ,KAAK,MAAM,SAAS,OAAO,UAAU,WAAS,MAAM,OAAO,EAAE;AAC3E,SAAK,MAAM,cAAc,KAAK;AAAA,EAChC;AAAA,EAEA,aAAa,KAAU;AACrB,UAAM,iBAAiB;AAAA,MACrB,gBAAgB,OAAO,WAAsC;AAC3D,cAAM,WAAW,CAAC;AAClB,YAAI;AACF,gBAAM,UAAU,gDAAgD,OAAO,KAAK;AAC5E,gBAAM,WAAW,MAAM,MAAM,OAAO;AACpC,gBAAM,UAAU,MAAM,SAAS,KAAK;AACpC,qBAAW,WAAW,QAAQ,UAAU;AACtC,kBAAM,SAAS;AAAA,cACb,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,cAC1C,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,YAC5C;AACA,kBAAM,QAAQ;AAAA,cACZ,MAAM;AAAA,cACN,UAAU;AAAA,gBACR,MAAM;AAAA,gBACN,aAAa;AAAA,cACf;AAAA,cACA,YAAY,QAAQ,WAAW;AAAA,cAC/B,YAAY,QAAQ;AAAA,cACpB,MAAM,QAAQ,WAAW;AAAA,cACzB,YAAY,CAAC,OAAO;AAAA,cACpB;AAAA,YACF;AACA,qBAAS,KAAK,KAAK;AAAA,UACrB;AAAA,QACF,SAAS,GAAG;AACV,kBAAQ,MAAM,wCAAwC,CAAC,EAAE;AAAA,QAC3D;AACA,eAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,UAAM,WAAW,IAAI,iBAAiB,gBAAgB;AAAA,MACpD,aAAa,KAAK,MAAM,EAAE,QAAQ;AAAA,MAClC,YAAY;AAAA,IACd,CAAC;AACD,QAAI,WAAW,UAAU,UAAU;AACnC,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,SAAK,MAAM,UAAU,eAAe,EAAE,QAAQ,CAAC;AAC/C,SAAK,MAAM,aAAa,SAAS,EAAE,OAAO,CAAC;AAC3C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,UAAU;AAAA,QACxB,KAAK,OAAK;AAAC,eAAK,YAAY;AAAA,QAAE;AAAA,QAC9B,eAAY;AAAA;AAAA,IACb;AAAA,EACH;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aea9d83a607391782a40e2ae1c9baf372f7aa7d5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Jt=function(){return s},s}Jt();function Spe(n,e,t){Jt().f[0]++;const i=(Jt().s[0]++,{id:"background",type:"background",paint:{"background-color":"#1c1f24"}}),r=(Jt().s[1]++,rpe(t));Jt().s[2]++,r?(Jt().b[0][0]++,Jt().s[3]++,e.push(r)):Jt().b[0][1]++;const o=(Jt().s[4]++,{});Jt().s[5]++,Object.keys(n.sources).forEach(a=>{Jt().f[1]++;const c=(Jt().s[6]++,n.sources[a]);Jt().s[7]++,Jt().b[2][0]++,c.type!=="raster"&&(Jt().b[2][1]++,c.type!=="raster-dem")?(Jt().b[1][0]++,Jt().s[8]++,o[a]=c):Jt().b[1][1]++});const s=(Jt().s[9]++,{...n,sources:o,layers:[i].concat(e)});return Jt().s[10]++,s}class Epe extends In.Component{static defaultProps=(Jt().s[11]++,{onMapLoaded:()=>{Jt().f[2]++},onDataChange:()=>{Jt().f[3]++},onLayerSelect:()=>{Jt().f[4]++},onChange:()=>{Jt().f[5]++},options:{}});container=(Jt().s[12]++,null);constructor(e){Jt().f[6]++,Jt().s[13]++,super(e),Jt().s[14]++,this.state={map:null,inspect:null,geocoder:null,zoomControl:null},Jt().s[15]++,ZA.on("languageChanged",()=>{Jt().f[7]++,Jt().s[16]++,this.forceUpdate()})}shouldComponentUpdate(e,t){Jt().f[8]++;let i=(Jt().s[17]++,!1);Jt().s[18]++;try{Jt().s[19]++,i=(Jt().b[3][0]++,JSON.stringify(this.props)!==JSON.stringify(e)||(Jt().b[3][1]++,JSON.stringify(this.state)!==JSON.stringify(t)))}catch{}return Jt().s[20]++,i}componentDidUpdate(){Jt().f[9]++;const e=(Jt().s[21]++,this.state.map),t=(Jt().s[22]++,this.props.replaceAccessTokens(this.props.mapStyle));Jt().s[23]++,e?(Jt().b[4][0]++,Jt().s[24]++,e.setStyle(t,{diff:!0}),Jt().s[25]++,e.showTileBoundaries=this.props.options?.showTileBoundaries,Jt().s[26]++,e.showCollisionBoxes=this.props.options?.showCollisionBoxes,Jt().s[27]++,e.showOverdrawInspector=this.props.options?.showOverdrawInspector):Jt().b[4][1]++,Jt().s[28]++,Jt().b[6][0]++,this.state.inspect&&(Jt().b[6][1]++,this.props.inspectModeEnabled!==this.state.inspect._showInspectMap)?(Jt().b[5][0]++,Jt().s[29]++,this.state.inspect.toggleInspector()):Jt().b[5][1]++,Jt().s[30]++,Jt().b[8][0]++,this.state.inspect&&(Jt().b[8][1]++,this.props.inspectModeEnabled)?(Jt().b[7][0]++,Jt().s[31]++,this.state.inspect.setOriginalStyle(t),Jt().s[32]++,setTimeout(()=>{Jt().f[10]++,Jt().s[33]++,this.state.inspect.render()},500)):Jt().b[7][1]++}componentDidMount(){Jt().f[11]++;const e=(Jt().s[34]++,{...this.props.options,container:this.container,style:this.props.mapStyle,hash:!0,maxZoom:24,transformRequest:M=>(Jt().f[12]++,Jt().s[35]++,M.startsWith("/")?(Jt().b[9][0]++,Jt().s[36]++,M=`${window.location.origin}${M}`):Jt().b[9][1]++,Jt().s[37]++,{url:M}),localIdeographFontFamily:!1}),t=(Jt().s[38]++,new Pue({metadata:!0}));Jt().s[39]++,mx.addProtocol("pmtiles",t.tile);const i=(Jt().s[40]++,new mx.Map(e));Jt().s[41]++;const r=()=>{Jt().f[13]++;const M=(Jt().s[42]++,i.getCenter()),B=(Jt().s[43]++,i.getZoom());Jt().s[44]++,this.props.onChange({center:M,zoom:B})};Jt().s[45]++,r(),Jt().s[46]++,i.showTileBoundaries=e.showTileBoundaries,Jt().s[47]++,i.showCollisionBoxes=e.showCollisionBoxes,Jt().s[48]++,i.showOverdrawInspector=e.showOverdrawInspector;const o=(Jt().s[49]++,this.initGeocoder(i)),s=(Jt().s[50]++,new tpe);Jt().s[51]++,i.addControl(s,"top-right");const a=(Jt().s[52]++,new mx.NavigationControl({visualizePitch:!0}));Jt().s[53]++,i.addControl(a,"top-right");const c=(Jt().s[54]++,document.createElement("div")),d=(Jt().s[55]++,qH.createRoot(c)),m=(Jt().s[56]++,new mx.Popup({closeOnClick:!1})),v=(Jt().s[57]++,new VP({popup:m,showMapPopup:!0,showMapPopupOnHover:!1,showInspectMapPopupOnHover:!0,showInspectButton:!1,blockHoverPopupOnClick:!0,assignLayerColor:(M,B)=>(Jt().f[14]++,Jt().s[58]++,Ku(UX.brightColor(M,B)).desaturate(.5).string()),buildInspectStyle:(M,B)=>(Jt().f[15]++,Jt().s[59]++,Spe(M,B,this.props.highlightedLayer)),renderPopup:M=>(Jt().f[16]++,Jt().s[60]++,this.props.inspectModeEnabled?(Jt().b[10][0]++,Jt().s[61]++,m.once("open",()=>{Jt().f[17]++,Jt().s[62]++,d.render(oe.jsx(Nfe,{features:M}))}),Jt().s[63]++,c):(Jt().b[10][1]++,Jt().s[64]++,m.once("open",()=>{Jt().f[18]++,Jt().s[65]++,d.render(oe.jsx(NX,{features:M,onLayerSelect:this.onLayerSelectById,zoom:this.state.zoom}))}),Jt().s[66]++,c))}));Jt().s[67]++,i.addControl(v),Jt().s[68]++,i.on("style.load",()=>{Jt().f[19]++,Jt().s[69]++,this.setState({map:i,inspect:v,geocoder:o,zoomControl:s,zoom:i.getZoom()})}),Jt().s[70]++,i.on("data",M=>{if(Jt().f[20]++,Jt().s[71]++,M.dataType!=="tile"){Jt().b[11][0]++,Jt().s[72]++;return}else Jt().b[11][1]++;Jt().s[73]++,this.props.onDataChange({map:this.state.map})}),Jt().s[74]++,i.on("error",M=>{Jt().f[21]++,Jt().s[75]++,console.log("ERROR",M)}),Jt().s[76]++,i.on("zoom",M=>{Jt().f[22]++,Jt().s[77]++,this.setState({zoom:i.getZoom()})}),Jt().s[78]++,i.on("dragend",r),Jt().s[79]++,i.on("zoomend",r)}onLayerSelectById=(Jt().s[80]++,e=>{Jt().f[23]++;const t=(Jt().s[81]++,this.props.mapStyle.layers.findIndex(i=>(Jt().f[24]++,Jt().s[82]++,i.id===e)));Jt().s[83]++,this.props.onLayerSelect(t)});initGeocoder(e){Jt().f[25]++;const t=(Jt().s[84]++,{forwardGeocode:async r=>{Jt().f[26]++;const o=(Jt().s[85]++,[]);Jt().s[86]++;try{const s=(Jt().s[87]++,`https://nominatim.openstreetmap.org/search?q=${r.query}&format=geojson&polygon_geojson=1&addressdetails=1`),a=(Jt().s[88]++,await fetch(s)),c=(Jt().s[89]++,await a.json());Jt().s[90]++;for(const d of c.features){const m=(Jt().s[91]++,[d.bbox[0]+(d.bbox[2]-d.bbox[0])/2,d.bbox[1]+(d.bbox[3]-d.bbox[1])/2]),v=(Jt().s[92]++,{type:"Feature",geometry:{type:"Point",coordinates:m},place_name:d.properties.display_name,properties:d.properties,text:d.properties.display_name,place_type:["place"],center:m});Jt().s[93]++,o.push(v)}}catch(s){Jt().s[94]++,console.error(`Failed to forwardGeocode with error: ${s}`)}return Jt().s[95]++,{features:o}}}),i=(Jt().s[96]++,new wpe(t,{placeholder:this.props.t("Search"),maplibregl:mx}));return Jt().s[97]++,e.addControl(i,"top-left"),Jt().s[98]++,i}render(){Jt().f[27]++;const e=(Jt().s[99]++,this.props.t);return Jt().s[100]++,this.state.geocoder?.setPlaceholder(e("Search")),Jt().s[101]++,this.state.zoomControl?.setLabel(e("Zoom:")),Jt().s[102]++,oe.jsx("div",{className:"maputnik-map__map",role:"region","aria-label":e("Map view"),ref:t=>{Jt().f[28]++,Jt().s[103]++,this.container=t},"data-wd-key":"maplibre:map"})}}const Bpe=(Jt().s[104]++,Do()(Epe));var Ope=8,Ipe={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Tpe={"*":{type:"source"}},kpe=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Dpe={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Rpe={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Ppe={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Lpe={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Upe={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Kpe={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Fpe={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},zpe=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],jpe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Npe={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Gpe={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Wpe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Qpe={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},qpe={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ype={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Vpe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},$pe={type:"array",value:"*"},Hpe={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},Zpe={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},Xpe={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Jpe={type:"array",value:"*",minimum:1},eme={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},tme={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},nme={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},ime={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},rme=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],ome={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},sme={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},ame={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},lme={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ume={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},cme={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Ame={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},hme={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},dme={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},fme={"*":{type:"string"}},pme={$version:Ope,$root:Ipe,sources:Tpe,source:kpe,source_vector:Dpe,source_raster:Rpe,source_raster_dem:Ppe,source_geojson:Lpe,source_video:Upe,source_image:Kpe,layer:Fpe,layout:zpe,layout_background:jpe,layout_fill:Npe,layout_circle:Gpe,layout_heatmap:Wpe,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Qpe,layout_symbol:qpe,layout_raster:Ype,layout_hillshade:Vpe,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:$pe,filter_operator:Hpe,geometry_type:Zpe,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:Xpe,expression:Jpe,light:eme,sky:tme,terrain:nme,projection:ime,paint:rme,paint_fill:ome,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:sme,paint_circle:ame,paint_heatmap:lme,paint_symbol:ume,paint_raster:cme,paint_hillshade:Ame,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:hme,transition:dme,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:fme};const mme=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function gme(n,e){const t={};for(const i in n)i!=="ref"&&(t[i]=n[i]);return mme.forEach(i=>{i in e&&(t[i]=e[i])}),t}function YX(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=gme(n[t],e[n[t].ref]));return n}class tg extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class HP{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[i,r]of t)this.bindings[i]=r}concat(e){return new HP(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const F6={kind:"null"},Jn={kind:"number"},lo={kind:"string"},Jr={kind:"boolean"},mg={kind:"color"},z6={kind:"projectionDefinition"},pC={kind:"object"},qr={kind:"value"},yme={kind:"error"},j6={kind:"collator"},N6={kind:"formatted"},G6={kind:"padding"},q4={kind:"colorArray"},W6={kind:"numberArray"},nM={kind:"resolvedImage"},Q6={kind:"variableAnchorOffsetCollection"};function gf(n,e){return{kind:"array",itemType:n,N:e}}function al(n){if(n.kind==="array"){const e=al(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const vme=[F6,Jn,lo,Jr,mg,z6,N6,pC,gf(qr),G6,W6,q4,nM,Q6];function Y4(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Y4(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of vme)if(!Y4(t,e))return null}}return`Expected ${al(n)} but found ${al(e)} instead.`}function ZP(n,e){return e.some(t=>t.kind===n.kind)}function mC(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function qy(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const VX=.96422,$X=1,HX=.82521,ZX=4/29,zx=6/29,XX=3*zx*zx,bme=zx*zx*zx,Cme=Math.PI/180,_me=180/Math.PI;function JX(n){return n=n%360,n<0&&(n+=360),n}function eJ([n,e,t,i]){n=i8(n),e=i8(e),t=i8(t);let r,o;const s=r8((.2225045*n+.7168786*e+.0606169*t)/$X);n===e&&e===t?r=o=s:(r=r8((.4360747*n+.3850649*e+.1430804*t)/VX),o=r8((.0139322*n+.0971045*e+.7141733*t)/HX));const a=116*s-16;return[a<0?0:a,500*(r-s),200*(s-o),i]}function i8(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function r8(n){return n>bme?Math.pow(n,1/3):n/XX+ZX}function tJ([n,e,t,i]){let r=(n+16)/116,o=isNaN(e)?r:r+e/500,s=isNaN(t)?r:r-t/200;return r=$X*s8(r),o=VX*s8(o),s=HX*s8(s),[o8(3.1338561*o-1.6168667*r-.4906146*s),o8(-.9787684*o+1.9161415*r+.033454*s),o8(.0719453*o-.2289914*r+1.4052427*s),i]}function o8(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function s8(n){return n>zx?n*n*n:XX*(n-ZX)}function xme(n){const[e,t,i,r]=eJ(n),o=Math.sqrt(t*t+i*i);return[Math.round(o*1e4)?JX(Math.atan2(i,t)*_me):NaN,o,e,r]}function Mme([n,e,t,i]){return n=isNaN(n)?0:n*Cme,tJ([t,Math.cos(n)*e,Math.sin(n)*e,i])}function wme([n,e,t,i]){n=JX(n),e/=100,t/=100;function r(o){const s=(o+n/30)%12,a=e*Math.min(t,1-t);return t-a*Math.max(-1,Math.min(s-3,9-s,1))}return[r(0),r(8),r(4),i]}const Sme=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function nJ(n,e){return Sme(n,e)?n[e]:void 0}function Eme(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=nJ(Bme,n);if(e){const[r,o,s]=e;return[r/255,o/255,s/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const o=n.length<6?1:2;let s=1;return[ew(n.slice(s,s+=o)),ew(n.slice(s,s+=o)),ew(n.slice(s,s+=o)),ew(n.slice(s,s+o)||"ff")]}if(n.startsWith("rgb")){const r=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=n.match(r);if(o){const[s,a,c,d,m,v,M,B,P,U,z,V]=o,Z=[d||" ",M||" ",U].join("");if(Z==="  "||Z==="  /"||Z===",,"||Z===",,,"){const X=[c,v,P].join(""),re=X==="%%%"?100:X===""?255:0;if(re){const ie=[gx(+a/re,0,1),gx(+m/re,0,1),gx(+B/re,0,1),z?nj(+z,V):1];if(ij(ie))return ie}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=n.match(t);if(i){const[r,o,s,a,c,d,m,v,M]=i,B=[s||" ",c||" ",m].join("");if(B==="  "||B==="  /"||B===",,"||B===",,,"){const P=[+o,gx(+a,0,100),gx(+d,0,100),v?nj(+v,M):1];if(ij(P))return wme(P)}}}function ew(n){return parseInt(n.padEnd(2,n),16)/255}function nj(n,e){return gx(e?n/100:n,0,1)}function gx(n,e,t){return Math.min(Math.max(e,n),t)}function ij(n){return!n.some(Number.isNaN)}const Bme={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function gC(n,e,t){return n+t*(e-n)}function V4(n,e,t){return n.map((i,r)=>gC(i,e[r],t))}class Ls{constructor(e,t,i,r=1,o=!0){this.r=e,this.g=t,this.b=i,this.a=r,o||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[e,t,i,r]))}static parse(e){if(e instanceof Ls)return e;if(typeof e!="string")return;const t=Eme(e);if(t)return new Ls(...t,!1)}get rgb(){const{r:e,g:t,b:i,a:r}=this,o=r||1/0;return this.overwriteGetter("rgb",[e/o,t/o,i/o,r])}get hcl(){return this.overwriteGetter("hcl",xme(this.rgb))}get lab(){return this.overwriteGetter("lab",eJ(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,i,r]=this.rgb;return`rgba(${[e,t,i].map(o=>Math.round(o*255)).join(",")},${r})`}static interpolate(e,t,i,r="rgb"){switch(r){case"rgb":{const[o,s,a,c]=V4(e.rgb,t.rgb,i);return new Ls(o,s,a,c,!1)}case"hcl":{const[o,s,a,c]=e.hcl,[d,m,v,M]=t.hcl;let B,P;if(!isNaN(o)&&!isNaN(d)){let X=d-o;d>o&&X>180?X-=360:d<o&&o-d>180&&(X+=360),B=o+i*X}else isNaN(o)?isNaN(d)?B=NaN:(B=d,(a===1||a===0)&&(P=m)):(B=o,(v===1||v===0)&&(P=s));const[U,z,V,Z]=Mme([B,P??gC(s,m,i),gC(a,v,i),gC(c,M,i)]);return new Ls(U,z,V,Z,!1)}case"lab":{const[o,s,a,c]=tJ(V4(e.lab,t.lab,i));return new Ls(o,s,a,c,!1)}}}}Ls.black=new Ls(0,0,0,1);Ls.white=new Ls(1,1,1,1);Ls.transparent=new Ls(0,0,0,0);Ls.red=new Ls(1,0,0,1);class XP{constructor(e,t,i){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Ome=["bottom","center","top"];class AD{constructor(e,t,i,r,o,s){this.text=e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=o,this.verticalAlign=s}}class k1{constructor(e){this.sections=e}static fromString(e){return new k1([new AD(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof k1?e:k1.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class Om{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Om)return e;if(typeof e=="number")return new Om([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new Om(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new Om(V4(e.values,t.values,i))}}class Im{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Im)return e;if(typeof e=="number")return new Im([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new Im(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new Im(V4(e.values,t.values,i))}}class vf{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof vf)return e;if(typeof e=="string"){const i=Ls.parse(e);return i?new vf([i]):void 0}if(!Array.isArray(e))return;const t=[];for(const i of e){if(typeof i!="string")return;const r=Ls.parse(i);if(!r)return;t.push(r)}return new vf(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i,r="rgb"){const o=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let s=0;s<e.values.length;s++)o.push(Ls.interpolate(e.values[s],t.values[s],i,r));return new vf(o)}}class bl extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const Ime=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class gg{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof gg)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const i=e[t],r=e[t+1];if(typeof i!="string"||!Ime.has(i)||!Array.isArray(r)||r.length!==2||typeof r[0]!="number"||typeof r[1]!="number")return}return new gg(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){const r=e.values,o=t.values;if(r.length!==o.length)throw new bl(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const s=[];for(let a=0;a<r.length;a+=2){if(r[a]!==o[a])throw new bl(`Cannot interpolate values containing mismatched anchors. from[${a}]: ${r[a]}, to[${a}]: ${o[a]}`);s.push(r[a]);const[c,d]=r[a+1],[m,v]=o[a+1];s.push([gC(c,m,i),gC(d,v,i)])}return new gg(s)}}class Kv{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Kv({name:e,available:!1}):null}}class Mm{constructor(e,t,i){this.from=e,this.to=t,this.transition=i}static interpolate(e,t,i){return new Mm(e,t,i)}static parse(e){if(e instanceof Mm)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new Mm(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new Mm(e.from,e.to,e.transition);if(typeof e=="string")return new Mm(e,e,1)}}function iJ(n,e,t,i){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[n,e,t,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[n,e,t,i]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function $4(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof Mm||n instanceof Ls||n instanceof XP||n instanceof k1||n instanceof Om||n instanceof Im||n instanceof vf||n instanceof gg||n instanceof Kv)return!0;if(Array.isArray(n)){for(const e of n)if(!$4(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!$4(n[e]))return!1;return!0}else return!1}function ju(n){if(n===null)return F6;if(typeof n=="string")return lo;if(typeof n=="boolean")return Jr;if(typeof n=="number")return Jn;if(n instanceof Ls)return mg;if(n instanceof Mm)return z6;if(n instanceof XP)return j6;if(n instanceof k1)return N6;if(n instanceof Om)return G6;if(n instanceof Im)return W6;if(n instanceof vf)return q4;if(n instanceof gg)return Q6;if(n instanceof Kv)return nM;if(Array.isArray(n)){const e=n.length;let t;for(const i of n){const r=ju(i);if(!t)t=r;else{if(t===r)continue;t=qr;break}}return gf(t||qr,e)}else return pC}function g4(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof Ls||n instanceof Mm||n instanceof k1||n instanceof Om||n instanceof Im||n instanceof vf||n instanceof gg||n instanceof Kv?n.toString():JSON.stringify(n)}class c2{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!$4(e[1]))return t.error("invalid value");const i=e[1];let r=ju(i);const o=t.expectedType;return r.kind==="array"&&r.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(r=o),new c2(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const tw={string:lo,number:Jn,boolean:Jr,object:pC};class wm{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=1,r;const o=e[0];if(o==="array"){let a;if(e.length>2){const d=e[1];if(typeof d!="string"||!(d in tw)||d==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=tw[d],i++}else a=qr;let c;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);c=e[2],i++}r=gf(a,c)}else{if(!tw[o])throw new Error(`Types doesn't contain name = ${o}`);r=tw[o]}const s=[];for(;i<e.length;i++){const a=t.parse(e[i],i,qr);if(!a)return null;s.push(a)}return new wm(r,s)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(Y4(this.type,ju(i))){if(t===this.args.length-1)throw new bl(`Expected value to be of type ${al(this.type)}, but found ${al(ju(i))} instead.`)}else return i}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const rj={"to-boolean":Jr,"to-color":mg,"to-number":Jn,"to-string":lo};class Av{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(!rj[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");const r=rj[i],o=[];for(let s=1;s<e.length;s++){const a=t.parse(e[s],s,qr);if(!a)return null;o.push(a)}return new Av(r,o)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,i;for(const r of this.args){if(t=r.evaluate(e),i=null,t instanceof Ls)return t;if(typeof t=="string"){const o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&(t.length<3||t.length>4?i=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:i=iJ(t[0],t[1],t[2],t[3]),!i))return new Ls(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new bl(i||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const i of this.args){t=i.evaluate(e);const r=Om.parse(t);if(r)return r}throw new bl(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=Im.parse(t);if(r)return r}throw new bl(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=vf.parse(t);if(r)return r}throw new bl(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const i of this.args){t=i.evaluate(e);const r=gg.parse(t);if(r)return r}throw new bl(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const i of this.args){if(t=i.evaluate(e),t===null)return 0;const r=Number(t);if(!isNaN(r))return r}throw new bl(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return k1.fromString(g4(this.args[0].evaluate(e)));case"resolvedImage":return Kv.fromString(g4(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return g4(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Tme=["Unknown","Point","LineString","Polygon"];class rJ{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Tme[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=Ls.parse(e),this._parseColorCache.set(e,t)),t}}class q6{constructor(e,t,i=[],r,o=new HP,s=[]){this.registry=e,this.path=i,this.key=i.map(a=>`[${a}]`).join(""),this.scope=o,this.errors=s,this.expectedType=r,this._isConstant=t}parse(e,t,i,r,o={}){return t?this.concat(t,i,r)._parse(e,o):this._parse(e,o)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function i(r,o,s){return s==="assert"?new wm(o,[r]):s==="coerce"?new Av(o,[r]):r}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[r];if(o){let s=o.parse(e,this);if(!s)return null;if(this.expectedType){const a=this.expectedType,c=s.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&c.kind==="value")s=i(s,a,t.typeAnnotation||"assert");else if(a.kind==="projectionDefinition"&&["string","array"].includes(c.kind)||["color","formatted","resolvedImage"].includes(a.kind)&&["value","string"].includes(c.kind)||["padding","numberArray"].includes(a.kind)&&["value","number","array"].includes(c.kind)||a.kind==="colorArray"&&["value","string","array"].includes(c.kind)||a.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(c.kind))s=i(s,a,t.typeAnnotation||"coerce");else if(this.checkSubtype(a,c))return null}if(!(s instanceof c2)&&s.type.kind!=="resolvedImage"&&this._isConstant(s)){const a=new rJ;try{s=new c2(s.type,s.evaluate(a))}catch(c){return this.error(c.message),null}}return s}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const r=typeof e=="number"?this.path.concat(e):this.path,o=i?this.scope.concat(i):this.scope;return new q6(this.registry,this._isConstant,r,t||null,o,this.errors)}error(e,...t){const i=`${this.key}${t.map(r=>`[${r}]`).join("")}`;this.errors.push(new tg(i,e))}checkSubtype(e,t){const i=Y4(e,t);return i&&this.error(i),i}}class Y6{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let o=1;o<e.length-1;o+=2){const s=e[o];if(typeof s!="string")return t.error(`Expected string, but found ${typeof s} instead.`,o);if(/[^a-zA-Z0-9_]/.test(s))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const a=t.parse(e[o+1],o+1);if(!a)return null;i.push([s,a])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return r?new Y6(i,r):null}outputDefined(){return this.result.outputDefined()}}class V6{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new V6(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class JP{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Jn),r=t.parse(e[2],2,gf(t.expectedType||qr));if(!i||!r)return null;const o=r.type;return new JP(o.itemType,i,r)}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new bl(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new bl(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new bl(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class eL{constructor(e,t){this.type=Jr,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,qr),r=t.parse(e[2],2,qr);return!i||!r?null:ZP(i.type,[Jr,lo,Jn,F6,qr])?new eL(i,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${al(i.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!mC(t,["boolean","string","number","null"]))throw new bl(`Expected first argument to be of type boolean, string, number or null, but found ${al(ju(t))} instead.`);if(!mC(i,["string","array"]))throw new bl(`Expected second argument to be of type array or string, but found ${al(ju(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class nE{constructor(e,t,i){this.type=Jn,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,qr),r=t.parse(e[2],2,qr);if(!i||!r)return null;if(!ZP(i.type,[Jr,lo,Jn,F6,qr]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${al(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,Jn);return o?new nE(i,r,o):null}else return new nE(i,r)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!mC(t,["boolean","string","number","null"]))throw new bl(`Expected first argument to be of type boolean, string, number or null, but found ${al(ju(t))} instead.`);let r;if(this.fromIndex&&(r=this.fromIndex.evaluate(e)),mC(i,["string"])){const o=i.indexOf(t,r);return o===-1?-1:[...i.slice(0,o)].length}else{if(mC(i,["array"]))return i.indexOf(t,r);throw new bl(`Expected second argument to be of type array or string, but found ${al(ju(i))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class tL{constructor(e,t,i,r,o,s){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=o,this.otherwise=s}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let i,r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const o={},s=[];for(let d=2;d<e.length-1;d+=2){let m=e[d];const v=e[d+1];Array.isArray(m)||(m=[m]);const M=t.concat(d);if(m.length===0)return M.error("Expected at least one branch label.");for(const P of m){if(typeof P!="number"&&typeof P!="string")return M.error("Branch labels must be numbers or strings.");if(typeof P=="number"&&Math.abs(P)>Number.MAX_SAFE_INTEGER)return M.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof P=="number"&&Math.floor(P)!==P)return M.error("Numeric branch labels must be integer values.");if(!i)i=ju(P);else if(M.checkSubtype(i,ju(P)))return null;if(typeof o[String(P)]<"u")return M.error("Branch labels must be unique.");o[String(P)]=s.length}const B=t.parse(v,d,r);if(!B)return null;r=r||B.type,s.push(B)}const a=t.parse(e[1],1,qr);if(!a)return null;const c=t.parse(e[e.length-1],e.length-1,r);return!c||a.type.kind!=="value"&&t.concat(1).checkSubtype(i,a.type)?null:new tL(i,r,a,o,s,c)}evaluate(e){const t=this.input.evaluate(e);return(ju(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class nL{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const r=[];for(let s=1;s<e.length-1;s+=2){const a=t.parse(e[s],s,Jr);if(!a)return null;const c=t.parse(e[s+1],s+1,i);if(!c)return null;r.push([a,c]),i=i||c.type}const o=t.parse(e[e.length-1],e.length-1,i);if(!o)return null;if(!i)throw new Error("Can't infer output type");return new nL(i,r,o)}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class iE{constructor(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,qr),r=t.parse(e[2],2,Jn);if(!i||!r)return null;if(!ZP(i.type,[gf(qr),lo,qr]))return t.error(`Expected first argument to be of type array or string, but found ${al(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,Jn);return o?new iE(i.type,i,r,o):null}else return new iE(i.type,i,r)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);let r;if(this.endIndex&&(r=this.endIndex.evaluate(e)),mC(t,["string"]))return[...t].slice(i,r).join("");if(mC(t,["array"]))return t.slice(i,r);throw new bl(`Expected first argument to be of type array or string, but found ${al(ju(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function oJ(n,e){const t=n.length-1;let i=0,r=t,o=0,s,a;for(;i<=r;)if(o=Math.floor((i+r)/2),s=n[o],a=n[o+1],s<=e){if(o===t||e<a)return o;i=o+1}else if(s>e)r=o-1;else throw new bl("Input is not a number.");return 0}class $6{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,o]of i)this.labels.push(r),this.outputs.push(o)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,Jn);if(!i)return null;const r=[];let o=null;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);for(let s=1;s<e.length;s+=2){const a=s===1?-1/0:e[s],c=e[s+1],d=s,m=s+1;if(typeof a!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(r.length&&r[r.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',d);const v=t.parse(c,m,o);if(!v)return null;o=o||v.type,r.push([a,v])}return new $6(o,i,r)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=oJ(t,r);return i[s].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function kme(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var a8,oj;function Dme(){if(oj)return a8;oj=1,a8=n;function n(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=r}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,r=0;r<8;r++){var o=this.sampleCurveX(i)-e;if(Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i=i-o/s}var a=0,c=1;for(i=e,r=0;r<20&&(o=this.sampleCurveX(i),!(Math.abs(o-e)<t));r++)e>o?a=i:c=i,i=(c-a)*.5+a;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},a8}var Rme=Dme(),Pme=kme(Rme);class yg{constructor(e,t,i,r,o){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[s,a]of o)this.labels.push(s),this.outputs.push(a)}static interpolationFactor(e,t,i,r){let o=0;if(e.name==="exponential")o=l8(t,e.base,i,r);else if(e.name==="linear")o=l8(t,1,i,r);else if(e.name==="cubic-bezier"){const s=e.controlPoints;o=new Pme(s[0],s[1],s[2],s[3]).solve(l8(t,1,i,r))}return o}static parse(e,t){let[i,r,o,...s]=e;if(!Array.isArray(r)||r.length===0)return t.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const d=r[1];if(typeof d!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:d}}else if(r[0]==="cubic-bezier"){const d=r.slice(1);if(d.length!==4||d.some(m=>typeof m!="number"||m<0||m>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:d}}else return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(o=t.parse(o,2,Jn),!o)return null;const a=[];let c=null;(i==="interpolate-hcl"||i==="interpolate-lab")&&t.expectedType!=q4?c=mg:t.expectedType&&t.expectedType.kind!=="value"&&(c=t.expectedType);for(let d=0;d<s.length;d+=2){const m=s[d],v=s[d+1],M=d+3,B=d+4;if(typeof m!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(a.length&&a[a.length-1][0]>=m)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',M);const P=t.parse(v,B,c);if(!P)return null;c=c||P.type,a.push([m,P])}return!qy(c,Jn)&&!qy(c,z6)&&!qy(c,mg)&&!qy(c,G6)&&!qy(c,W6)&&!qy(c,q4)&&!qy(c,Q6)&&!qy(c,gf(Jn))?t.error(`Type ${al(c)} is not interpolatable.`):new yg(c,i,r,o,a)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=oJ(t,r),a=t[s],c=t[s+1],d=yg.interpolationFactor(this.interpolation,r,a,c),m=i[s].evaluate(e),v=i[s+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return gC(m,v,d);case"color":return Ls.interpolate(m,v,d);case"padding":return Om.interpolate(m,v,d);case"colorArray":return vf.interpolate(m,v,d);case"numberArray":return Im.interpolate(m,v,d);case"variableAnchorOffsetCollection":return gg.interpolate(m,v,d);case"array":return V4(m,v,d);case"projectionDefinition":return Mm.interpolate(m,v,d)}case"interpolate-hcl":switch(this.type.kind){case"color":return Ls.interpolate(m,v,d,"hcl");case"colorArray":return vf.interpolate(m,v,d,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Ls.interpolate(m,v,d,"lab");case"colorArray":return vf.interpolate(m,v,d,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function l8(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}class H4{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=null;const r=t.expectedType;r&&r.kind!=="value"&&(i=r);const o=[];for(const a of e.slice(1)){const c=t.parse(a,1+o.length,i,void 0,{typeAnnotation:"omit"});if(!c)return null;i=i||c.type,o.push(c)}if(!i)throw new Error("No output type");return r&&o.some(a=>Y4(r,a.type))?new H4(qr,o):new H4(i,o)}evaluate(e){let t=null,i=0,r;for(const o of this.args)if(i++,t=o.evaluate(e),t&&t instanceof Kv&&!t.available&&(r||(r=t.name),t=null,i===this.args.length&&(t=r)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function sj(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Lme(n,e,t){return e===t}function Ume(n,e,t){return e!==t}function Kme(n,e,t){return e<t}function Fme(n,e,t){return e>t}function zme(n,e,t){return e<=t}function jme(n,e,t){return e>=t}function sJ(n,e,t,i){return i.compare(e,t)===0}function Nme(n,e,t,i){return!sJ(n,e,t,i)}function Gme(n,e,t,i){return i.compare(e,t)<0}function Wme(n,e,t,i){return i.compare(e,t)>0}function Qme(n,e,t,i){return i.compare(e,t)<=0}function qme(n,e,t,i){return i.compare(e,t)>=0}function R2(n,e,t){const i=n!=="=="&&n!=="!=";return class aJ{constructor(o,s,a){this.type=Jr,this.lhs=o,this.rhs=s,this.collator=a,this.hasUntypedArgument=o.type.kind==="value"||s.type.kind==="value"}static parse(o,s){if(o.length!==3&&o.length!==4)return s.error("Expected two or three arguments.");const a=o[0];let c=s.parse(o[1],1,qr);if(!c)return null;if(!sj(a,c.type))return s.concat(1).error(`"${a}" comparisons are not supported for type '${al(c.type)}'.`);let d=s.parse(o[2],2,qr);if(!d)return null;if(!sj(a,d.type))return s.concat(2).error(`"${a}" comparisons are not supported for type '${al(d.type)}'.`);if(c.type.kind!==d.type.kind&&c.type.kind!=="value"&&d.type.kind!=="value")return s.error(`Cannot compare types '${al(c.type)}' and '${al(d.type)}'.`);i&&(c.type.kind==="value"&&d.type.kind!=="value"?c=new wm(d.type,[c]):c.type.kind!=="value"&&d.type.kind==="value"&&(d=new wm(c.type,[d])));let m=null;if(o.length===4){if(c.type.kind!=="string"&&d.type.kind!=="string"&&c.type.kind!=="value"&&d.type.kind!=="value")return s.error("Cannot use collator to compare non-string types.");if(m=s.parse(o[3],3,j6),!m)return null}return new aJ(c,d,m)}evaluate(o){const s=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(i&&this.hasUntypedArgument){const c=ju(s),d=ju(a);if(c.kind!==d.kind||!(c.kind==="string"||c.kind==="number"))throw new bl(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${c.kind}, ${d.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const c=ju(s),d=ju(a);if(c.kind!=="string"||d.kind!=="string")return e(o,s,a)}return this.collator?t(o,s,a,this.collator.evaluate(o)):e(o,s,a)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}}}const Yme=R2("==",Lme,sJ),Vme=R2("!=",Ume,Nme),$me=R2("<",Kme,Gme),Hme=R2(">",Fme,Wme),Zme=R2("<=",zme,Qme),Xme=R2(">=",jme,qme);class H6{constructor(e,t,i){this.type=j6,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");const r=t.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,Jr);if(!r)return null;const o=t.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,Jr);if(!o)return null;let s=null;return i.locale&&(s=t.parse(i.locale,1,lo),!s)?null:new H6(r,o,s)}evaluate(e){return new XP(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class iL{constructor(e,t,i,r,o){this.type=lo,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=o}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const i=t.parse(e[1],1,Jn);if(!i)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let o=null;if(r.locale&&(o=t.parse(r.locale,1,lo),!o))return null;let s=null;if(r.currency&&(s=t.parse(r.currency,1,lo),!s))return null;let a=null;if(r["min-fraction-digits"]&&(a=t.parse(r["min-fraction-digits"],1,Jn),!a))return null;let c=null;return r["max-fraction-digits"]&&(c=t.parse(r["max-fraction-digits"],1,Jn),!c)?null:new iL(i,o,s,a,c)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class rL{constructor(e){this.type=N6,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");const r=[];let o=!1;for(let s=1;s<=e.length-1;++s){const a=e[s];if(o&&typeof a=="object"&&!Array.isArray(a)){o=!1;let c=null;if(a["font-scale"]&&(c=t.parse(a["font-scale"],1,Jn),!c))return null;let d=null;if(a["text-font"]&&(d=t.parse(a["text-font"],1,gf(lo)),!d))return null;let m=null;if(a["text-color"]&&(m=t.parse(a["text-color"],1,mg),!m))return null;let v=null;if(a["vertical-align"]){if(typeof a["vertical-align"]=="string"&&!Ome.includes(a["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${a["vertical-align"]}' instead.`);if(v=t.parse(a["vertical-align"],1,lo),!v)return null}const M=r[r.length-1];M.scale=c,M.font=d,M.textColor=m,M.verticalAlign=v}else{const c=t.parse(e[s],1,qr);if(!c)return null;const d=c.type.kind;if(d!=="string"&&d!=="value"&&d!=="null"&&d!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,r.push({content:c,scale:null,font:null,textColor:null,verticalAlign:null})}}return new rL(r)}evaluate(e){const t=i=>{const r=i.content.evaluate(e);return ju(r)===nM?new AD("",r,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(e):null):new AD(g4(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null,i.verticalAlign?i.verticalAlign.evaluate(e):null)};return new k1(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class oL{constructor(e){this.type=nM,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const i=t.parse(e[1],1,lo);return i?new oL(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=Kv.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}}class sL{constructor(e){this.type=Jn,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${al(i.type)} instead.`):new sL(i):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new bl(`Expected value to be of type string or array, but found ${al(ju(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const vg=8192;function Jme(n,e){const t=e0e(n[0]),i=n0e(n[1]),r=Math.pow(2,e.z);return[Math.round(t*r*vg),Math.round(i*r*vg)]}function aL(n,e){const t=Math.pow(2,e.z),i=(n[0]/vg+e.x)/t,r=(n[1]/vg+e.y)/t;return[t0e(i),i0e(r)]}function e0e(n){return(180+n)/360}function t0e(n){return n*360-180}function n0e(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function i0e(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function iM(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function Z4(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function r0e(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function o0e(n,e,t){const i=n[0]-e[0],r=n[1]-e[1],o=n[0]-t[0],s=n[1]-t[1];return i*s-o*r===0&&i*o<=0&&r*s<=0}function Z6(n,e,t,i){const r=[e[0]-n[0],e[1]-n[1]],o=[i[0]-t[0],i[1]-t[1]];return u0e(o,r)===0?!1:!!(aj(n,e,t,i)&&aj(t,i,n,e))}function s0e(n,e,t){for(const i of t)for(let r=0;r<i.length-1;++r)if(Z6(n,e,i[r],i[r+1]))return!0;return!1}function P2(n,e,t=!1){let i=!1;for(const r of e)for(let o=0;o<r.length-1;o++){if(o0e(n,r[o],r[o+1]))return t;r0e(n,r[o],r[o+1])&&(i=!i)}return i}function a0e(n,e){for(const t of e)if(P2(n,t))return!0;return!1}function lJ(n,e){for(const t of n)if(!P2(t,e))return!1;for(let t=0;t<n.length-1;++t)if(s0e(n[t],n[t+1],e))return!1;return!0}function l0e(n,e){for(const t of e)if(lJ(n,t))return!0;return!1}function u0e(n,e){return n[0]*e[1]-n[1]*e[0]}function aj(n,e,t,i){const r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1],c=i[0]-t[0],d=i[1]-t[1],m=r*d-c*o,v=s*d-c*a;return m>0&&v<0||m<0&&v>0}function lL(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=[];for(let s=0;s<n[r].length;s++){const a=Jme(n[r][s],t);iM(e,a),o.push(a)}i.push(o)}return i}function uJ(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=lL(n[r],e,t);i.push(o)}return i}function cJ(n,e,t,i){if(n[0]<t[0]||n[0]>t[2]){const r=i*.5;let o=n[0]-t[0]>r?-i:t[0]-n[0]>r?i:0;o===0&&(o=n[0]-t[2]>r?-i:t[2]-n[0]>r?i:0),n[0]+=o}iM(e,n)}function c0e(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function lj(n,e,t,i){const r=Math.pow(2,i.z)*vg,o=[i.x*vg,i.y*vg],s=[];for(const a of n)for(const c of a){const d=[c.x+o[0],c.y+o[1]];cJ(d,e,t,r),s.push(d)}return s}function uj(n,e,t,i){const r=Math.pow(2,i.z)*vg,o=[i.x*vg,i.y*vg],s=[];for(const a of n){const c=[];for(const d of a){const m=[d.x+o[0],d.y+o[1]];iM(e,m),c.push(m)}s.push(c)}if(e[2]-e[0]<=r/2){c0e(e);for(const a of s)for(const c of a)cJ(c,e,t,r)}return s}function A0e(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=lL(e.coordinates,i,r),s=lj(n.geometry(),t,i,r);if(!Z4(t,i))return!1;for(const a of s)if(!P2(a,o))return!1}if(e.type==="MultiPolygon"){const o=uJ(e.coordinates,i,r),s=lj(n.geometry(),t,i,r);if(!Z4(t,i))return!1;for(const a of s)if(!a0e(a,o))return!1}return!0}function h0e(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=lL(e.coordinates,i,r),s=uj(n.geometry(),t,i,r);if(!Z4(t,i))return!1;for(const a of s)if(!lJ(a,o))return!1}if(e.type==="MultiPolygon"){const o=uJ(e.coordinates,i,r),s=uj(n.geometry(),t,i,r);if(!Z4(t,i))return!1;for(const a of s)if(!l0e(a,o))return!1}return!0}class yC{constructor(e,t){this.type=Jr,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if($4(e[1])){const i=e[1];if(i.type==="FeatureCollection"){const r=[];for(const o of i.features){const{type:s,coordinates:a}=o.geometry;s==="Polygon"&&r.push(a),s==="MultiPolygon"&&r.push(...a)}if(r.length){const o={type:"MultiPolygon",coordinates:r};return new yC(i,o)}}else if(i.type==="Feature"){const r=i.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new yC(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new yC(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return A0e(e,this.geometries);if(e.geometryType()==="LineString")return h0e(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class AJ{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const o=e-1>>1,s=t[o];if(i(r,s)>=0)break;t[e]=s,e=o}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,o=t[e];for(;e<r;){let s=(e<<1)+1;const a=s+1;if(a<this.length&&i(t[a],t[s])<0&&(s=a),i(t[s],o)>=0)break;t[e]=t[s],e=s}t[e]=o}}function d0e(n,e){if(n.length<=1)return[n];const i=[];let r,o;for(const s of n){const a=f0e(s);a!==0&&(s.area=Math.abs(a),o===void 0&&(o=a<0),o===a<0?(r&&i.push(r),r=[s]):r.push(s))}return r&&i.push(r),i}function f0e(n){let e=0;for(let t=0,i=n.length,r=i-1,o,s;t<i;r=t++)o=n[t],s=n[r],e+=(s.x-o.x)*(o.y+s.y);return e}const p0e=6378.137,cj=1/298.257223563,Aj=cj*(2-cj),hj=Math.PI/180;class uL{constructor(e){const t=hj*p0e*1e3,i=Math.cos(e*hj),r=1/(1-Aj*(1-i*i)),o=Math.sqrt(r);this.kx=t*o*i,this.ky=t*o*r*(1-Aj)}distance(e,t){const i=this.wrap(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.sqrt(i*i+r*r)}pointOnLine(e,t){let i=1/0,r,o,s,a;for(let c=0;c<e.length-1;c++){let d=e[c][0],m=e[c][1],v=this.wrap(e[c+1][0]-d)*this.kx,M=(e[c+1][1]-m)*this.ky,B=0;(v!==0||M!==0)&&(B=(this.wrap(t[0]-d)*this.kx*v+(t[1]-m)*this.ky*M)/(v*v+M*M),B>1?(d=e[c+1][0],m=e[c+1][1]):B>0&&(d+=v/this.kx*B,m+=M/this.ky*B)),v=this.wrap(t[0]-d)*this.kx,M=(t[1]-m)*this.ky;const P=v*v+M*M;P<i&&(i=P,r=d,o=m,s=c,a=B)}return{point:[r,o],index:s,t:Math.max(0,Math.min(1,a))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const hD=100,dD=50;function hJ(n,e){return e[0]-n[0]}function rE(n){return n[1]-n[0]+1}function L1(n,e){return n[1]>=n[0]&&n[1]<e}function fD(n,e){if(n[0]>n[1])return[null,null];const t=rE(n);if(e){if(t===2)return[n,null];const r=Math.floor(t/2);return[[n[0],n[0]+r],[n[0]+r,n[1]]]}if(t===1)return[n,null];const i=Math.floor(t/2)-1;return[[n[0],n[0]+i],[n[0]+i+1,n[1]]]}function pD(n,e){if(!L1(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let i=e[0];i<=e[1];++i)iM(t,n[i]);return t}function mD(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const i of t)iM(e,i);return e}function dj(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function cL(n,e,t){if(!dj(n)||!dj(e))return NaN;let i=0,r=0;return n[2]<e[0]&&(i=e[0]-n[2]),n[0]>e[2]&&(i=n[0]-e[2]),n[1]>e[3]&&(r=n[1]-e[3]),n[3]<e[1]&&(r=e[1]-n[3]),t.distance([0,0],[i,r])}function iC(n,e,t){const i=t.pointOnLine(e,n);return t.distance(n,i.point)}function AL(n,e,t,i,r){const o=Math.min(iC(n,[t,i],r),iC(e,[t,i],r)),s=Math.min(iC(t,[n,e],r),iC(i,[n,e],r));return Math.min(o,s)}function m0e(n,e,t,i,r){if(!(L1(e,n.length)&&L1(i,t.length)))return 1/0;let s=1/0;for(let a=e[0];a<e[1];++a){const c=n[a],d=n[a+1];for(let m=i[0];m<i[1];++m){const v=t[m],M=t[m+1];if(Z6(c,d,v,M))return 0;s=Math.min(s,AL(c,d,v,M,r))}}return s}function g0e(n,e,t,i,r){if(!(L1(e,n.length)&&L1(i,t.length)))return NaN;let s=1/0;for(let a=e[0];a<=e[1];++a)for(let c=i[0];c<=i[1];++c)if(s=Math.min(s,r.distance(n[a],t[c])),s===0)return s;return s}function y0e(n,e,t){if(P2(n,e,!0))return 0;let i=1/0;for(const r of e){const o=r[0],s=r[r.length-1];if(o!==s&&(i=Math.min(i,iC(n,[s,o],t)),i===0))return i;const a=t.pointOnLine(r,n);if(i=Math.min(i,t.distance(n,a.point)),i===0)return i}return i}function v0e(n,e,t,i){if(!L1(e,n.length))return NaN;for(let o=e[0];o<=e[1];++o)if(P2(n[o],t,!0))return 0;let r=1/0;for(let o=e[0];o<e[1];++o){const s=n[o],a=n[o+1];for(const c of t)for(let d=0,m=c.length,v=m-1;d<m;v=d++){const M=c[v],B=c[d];if(Z6(s,a,M,B))return 0;r=Math.min(r,AL(s,a,M,B,i))}}return r}function fj(n,e){for(const t of n)for(const i of t)if(P2(i,e,!0))return!0;return!1}function b0e(n,e,t,i=1/0){const r=mD(n),o=mD(e);if(i!==1/0&&cL(r,o,t)>=i)return i;if(Z4(r,o)){if(fj(n,e))return 0}else if(fj(e,n))return 0;let s=1/0;for(const a of n)for(let c=0,d=a.length,m=d-1;c<d;m=c++){const v=a[m],M=a[c];for(const B of e)for(let P=0,U=B.length,z=U-1;P<U;z=P++){const V=B[z],Z=B[P];if(Z6(v,M,V,Z))return 0;s=Math.min(s,AL(v,M,V,Z,t))}}return s}function pj(n,e,t,i,r,o){if(!o)return;const s=cL(pD(i,o),r,t);s<e&&n.push([s,o,[0,0]])}function nw(n,e,t,i,r,o,s){if(!o||!s)return;const a=cL(pD(i,o),pD(r,s),t);a<e&&n.push([a,o,s])}function oE(n,e,t,i,r=1/0){let o=Math.min(i.distance(n[0],t[0][0]),r);if(o===0)return o;const s=new AJ([[0,[0,n.length-1],[0,0]]],hJ),a=mD(t);for(;s.length>0;){const c=s.pop();if(c[0]>=o)continue;const d=c[1],m=e?dD:hD;if(rE(d)<=m){if(!L1(d,n.length))return NaN;if(e){const v=v0e(n,d,t,i);if(isNaN(v)||v===0)return v;o=Math.min(o,v)}else for(let v=d[0];v<=d[1];++v){const M=y0e(n[v],t,i);if(o=Math.min(o,M),o===0)return 0}}else{const v=fD(d,e);pj(s,o,i,n,a,v[0]),pj(s,o,i,n,a,v[1])}}return o}function sE(n,e,t,i,r,o=1/0){let s=Math.min(o,r.distance(n[0],t[0]));if(s===0)return s;const a=new AJ([[0,[0,n.length-1],[0,t.length-1]]],hJ);for(;a.length>0;){const c=a.pop();if(c[0]>=s)continue;const d=c[1],m=c[2],v=e?dD:hD,M=i?dD:hD;if(rE(d)<=v&&rE(m)<=M){if(!L1(d,n.length)&&L1(m,t.length))return NaN;let B;if(e&&i)B=m0e(n,d,t,m,r),s=Math.min(s,B);else if(e&&!i){const P=n.slice(d[0],d[1]+1);for(let U=m[0];U<=m[1];++U)if(B=iC(t[U],P,r),s=Math.min(s,B),s===0)return s}else if(!e&&i){const P=t.slice(m[0],m[1]+1);for(let U=d[0];U<=d[1];++U)if(B=iC(n[U],P,r),s=Math.min(s,B),s===0)return s}else B=g0e(n,d,t,m,r),s=Math.min(s,B)}else{const B=fD(d,e),P=fD(m,i);nw(a,s,r,n,t,B[0],P[0]),nw(a,s,r,n,t,B[0],P[1]),nw(a,s,r,n,t,B[1],P[0]),nw(a,s,r,n,t,B[1],P[1])}}return s}function C0e(n,e){const t=n.geometry(),i=t.flat().map(s=>aL([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new uL(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,sE(i,!1,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,sE(i,!1,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,oE(i,!1,s.coordinates,r,o));break}if(o===0)return o}return o}function _0e(n,e){const t=n.geometry(),i=t.flat().map(s=>aL([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new uL(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,sE(i,!0,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,sE(i,!0,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,oE(i,!0,s.coordinates,r,o));break}if(o===0)return o}return o}function x0e(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const i=d0e(t).map(s=>s.map(a=>a.map(c=>aL([c.x,c.y],n.canonical)))),r=new uL(i[0][0][0][1]);let o=1/0;for(const s of e)for(const a of i){switch(s.type){case"Point":o=Math.min(o,oE([s.coordinates],!1,a,r,o));break;case"LineString":o=Math.min(o,oE(s.coordinates,!0,a,r,o));break;case"Polygon":o=Math.min(o,b0e(a,s.coordinates,r,o));break}if(o===0)return o}return o}function u8(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class vC{constructor(e,t){this.type=Jn,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if($4(e[1])){const i=e[1];if(i.type==="FeatureCollection")return new vC(i,i.features.map(r=>u8(r.geometry)).flat());if(i.type==="Feature")return new vC(i,u8(i.geometry));if("type"in i&&"coordinates"in i)return new vC(i,u8(i))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return C0e(e,this.geometries);if(e.geometryType()==="LineString")return _0e(e,this.geometries);if(e.geometryType()==="Polygon")return x0e(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class rM{constructor(e){this.type=qr,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=e[1];return i==null?t.error("Global state property must be defined."):typeof i!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new rM(i)}evaluate(e){var t;const i=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!i||Object.keys(i).length===0?null:nJ(i,this.key)}eachChild(){}outputDefined(){return!1}}const X6={"==":Yme,"!=":Vme,">":Hme,"<":$me,">=":Xme,"<=":Zme,array:wm,at:JP,boolean:wm,case:nL,coalesce:H4,collator:H6,format:rL,image:oL,in:eL,"index-of":nE,interpolate:yg,"interpolate-hcl":yg,"interpolate-lab":yg,length:sL,let:Y6,literal:c2,match:tL,number:wm,"number-format":iL,object:wm,slice:iE,step:$6,string:wm,"to-boolean":Av,"to-color":Av,"to-number":Av,"to-string":Av,var:V6,within:yC,distance:vC,"global-state":rM};class bf{constructor(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const i=e[0],r=bf.definitions[i];if(!r)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(r)?r[0]:r.type,s=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=s.filter(([d])=>!Array.isArray(d)||d.length===e.length-1);let c=null;for(const[d,m]of a){c=new q6(t.registry,aE,t.path,null,t.scope);const v=[];let M=!1;for(let B=1;B<e.length;B++){const P=e[B],U=Array.isArray(d)?d[B-1]:d.type,z=c.parse(P,1+v.length,U);if(!z){M=!0;break}v.push(z)}if(!M){if(Array.isArray(d)&&d.length!==v.length){c.error(`Expected ${d.length} arguments, but found ${v.length} instead.`);continue}for(let B=0;B<v.length;B++){const P=Array.isArray(d)?d[B]:d.type,U=v[B];c.concat(B+1).checkSubtype(P,U.type)}if(c.errors.length===0)return new bf(i,o,m,v)}}if(a.length===1)t.errors.push(...c.errors);else{const m=(a.length?a:s).map(([M])=>w0e(M)).join(" | "),v=[];for(let M=1;M<e.length;M++){const B=t.parse(e[M],1+v.length);if(!B)return null;v.push(al(B.type))}t.error(`Expected arguments of type ${m}, but found (${v.join(", ")}) instead.`)}return null}static register(e,t){bf.definitions=t;for(const i in t)e[i]=bf}}function mj(n,[e,t,i,r]){e=e.evaluate(n),t=t.evaluate(n),i=i.evaluate(n);const o=r?r.evaluate(n):1,s=iJ(e,t,i,o);if(s)throw new bl(s);return new Ls(e/255,t/255,i/255,o,!1)}function gj(n,e){return n in e}function c8(n,e){const t=e[n];return typeof t>"u"?null:t}function M0e(n,e,t,i){for(;t<=i;){const r=t+i>>1;if(e[r]===n)return!0;e[r]>n?i=r-1:t=r+1}return!1}function jb(n){return{type:n}}bf.register(X6,{error:[yme,[lo],(n,[e])=>{throw new bl(e.evaluate(n))}],typeof:[lo,[qr],(n,[e])=>al(ju(e.evaluate(n)))],"to-rgba":[gf(Jn,4),[mg],(n,[e])=>{const[t,i,r,o]=e.evaluate(n).rgb;return[t*255,i*255,r*255,o]}],rgb:[mg,[Jn,Jn,Jn],mj],rgba:[mg,[Jn,Jn,Jn,Jn],mj],has:{type:Jr,overloads:[[[lo],(n,[e])=>gj(e.evaluate(n),n.properties())],[[lo,pC],(n,[e,t])=>gj(e.evaluate(n),t.evaluate(n))]]},get:{type:qr,overloads:[[[lo],(n,[e])=>c8(e.evaluate(n),n.properties())],[[lo,pC],(n,[e,t])=>c8(e.evaluate(n),t.evaluate(n))]]},"feature-state":[qr,[lo],(n,[e])=>c8(e.evaluate(n),n.featureState||{})],properties:[pC,[],n=>n.properties()],"geometry-type":[lo,[],n=>n.geometryType()],id:[qr,[],n=>n.id()],zoom:[Jn,[],n=>n.globals.zoom],"heatmap-density":[Jn,[],n=>n.globals.heatmapDensity||0],elevation:[Jn,[],n=>n.globals.elevation||0],"line-progress":[Jn,[],n=>n.globals.lineProgress||0],accumulated:[qr,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Jn,jb(Jn),(n,e)=>{let t=0;for(const i of e)t+=i.evaluate(n);return t}],"*":[Jn,jb(Jn),(n,e)=>{let t=1;for(const i of e)t*=i.evaluate(n);return t}],"-":{type:Jn,overloads:[[[Jn,Jn],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[Jn],(n,[e])=>-e.evaluate(n)]]},"/":[Jn,[Jn,Jn],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[Jn,[Jn,Jn],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[Jn,[],()=>Math.LN2],pi:[Jn,[],()=>Math.PI],e:[Jn,[],()=>Math.E],"^":[Jn,[Jn,Jn],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[Jn,[Jn],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Jn,[Jn],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Jn,[Jn],(n,[e])=>Math.log(e.evaluate(n))],log2:[Jn,[Jn],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Jn,[Jn],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Jn,[Jn],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Jn,[Jn],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Jn,[Jn],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Jn,[Jn],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Jn,[Jn],(n,[e])=>Math.atan(e.evaluate(n))],min:[Jn,jb(Jn),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[Jn,jb(Jn),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[Jn,[Jn],(n,[e])=>Math.abs(e.evaluate(n))],round:[Jn,[Jn],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[Jn,[Jn],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Jn,[Jn],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[Jr,[lo,qr],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[Jr,[qr],(n,[e])=>n.id()===e.value],"filter-type-==":[Jr,[lo],(n,[e])=>n.geometryType()===e.value],"filter-<":[Jr,[lo,qr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<r}],"filter-id-<":[Jr,[qr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<i}],"filter->":[Jr,[lo,qr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>r}],"filter-id->":[Jr,[qr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>i}],"filter-<=":[Jr,[lo,qr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[Jr,[qr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<=i}],"filter->=":[Jr,[lo,qr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[Jr,[qr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>=i}],"filter-has":[Jr,[qr],(n,[e])=>e.value in n.properties()],"filter-has-id":[Jr,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[Jr,[gf(lo)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[Jr,[gf(qr)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[Jr,[lo,gf(qr)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[Jr,[lo,gf(qr)],(n,[e,t])=>M0e(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:Jr,overloads:[[[Jr,Jr],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[jb(Jr),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:Jr,overloads:[[[Jr,Jr],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[jb(Jr),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[Jr,[Jr],(n,[e])=>!e.evaluate(n)],"is-supported-script":[Jr,[lo],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[lo,[lo],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[lo,[lo],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[lo,jb(qr),(n,e)=>e.map(t=>g4(t.evaluate(n))).join("")],"resolved-locale":[lo,[j6],(n,[e])=>e.evaluate(n).resolvedLocale()]});function w0e(n){return Array.isArray(n)?`(${n.map(al).join(", ")})`:`(${al(n.type)}...)`}function aE(n){if(n instanceof V6)return aE(n.boundExpression);if(n instanceof bf&&n.name==="error")return!1;if(n instanceof H6)return!1;if(n instanceof yC)return!1;if(n instanceof vC)return!1;if(n instanceof rM)return!1;const e=n instanceof Av||n instanceof wm;let t=!0;return n.eachChild(i=>{e?t=t&&aE(i):t=t&&i instanceof c2}),t?hL(n)&&fL(n,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function hL(n){if(n instanceof bf){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof yC||n instanceof vC)return!1;let e=!0;return n.eachChild(t=>{e&&!hL(t)&&(e=!1)}),e}function dL(n){if(n instanceof bf&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!dL(t)&&(e=!1)}),e}function fL(n,e){if(n instanceof bf&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(i=>{t&&!fL(i,e)&&(t=!1)}),t}function gD(n){return{result:"success",value:n}}function yx(n){return{result:"error",value:n}}function S0e(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function E0e(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function B0e(n){return!!n.expression&&n.expression.interpolated}function dJ(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&ju(n)===pC}class O0e{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new rJ,this._defaultValue=t?D0e(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,r,o,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{const a=this.expression.evaluate(this._evaluator);if(a==null||typeof a=="number"&&a!==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new bl(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,typeof console<"u"&&console.warn(a.message)),this._defaultValue}}}function I0e(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in X6}function fJ(n,e){const t=new q6(X6,aE,[],e?k0e(e):void 0),i=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return i?gD(new O0e(i,e)):yx(t.errors)}class yj{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!dL(t.expression),this.globalStateRefs=J6(t.expression)}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._styleExpression.evaluate(e,t,i,r,o,s)}}class vj{constructor(e,t,i,r){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!dL(t.expression),this.globalStateRefs=J6(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._styleExpression.evaluate(e,t,i,r,o,s)}interpolationFactor(e,t,i){return this.interpolationType?yg.interpolationFactor(this.interpolationType,e,t,i):0}}function T0e(n,e){const t=fJ(n,e);if(t.result==="error")return t;const i=t.value.expression,r=hL(i);if(!r&&!S0e(e))return yx([new tg("","data expressions not supported")]);const o=fL(i,["zoom"]);if(!o&&!E0e(e))return yx([new tg("","zoom expressions not supported")]);const s=mS(i);if(!s&&!o)return yx([new tg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof tg)return yx([s]);if(s instanceof yg&&!B0e(e))return yx([new tg("",'"interpolate" expressions cannot be used with this property')]);if(!s)return gD(r?new yj("constant",t.value):new yj("source",t.value));const a=s instanceof yg?s.interpolation:void 0;return gD(r?new vj("camera",t.value,s.labels,a):new vj("composite",t.value,s.labels,a))}function mS(n){let e=null;if(n instanceof Y6)e=mS(n.result);else if(n instanceof H4){for(const t of n.args)if(e=mS(t),e)break}else(n instanceof $6||n instanceof yg)&&n.input instanceof bf&&n.input.name==="zoom"&&(e=n);return e instanceof tg||n.eachChild(t=>{const i=mS(t);i instanceof tg?e=i:!e&&i?e=new tg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new tg("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function J6(n,e=new Set){return n instanceof rM&&e.add(n.key),n.eachChild(t=>{J6(t,e)}),e}function k0e(n){const e={color:mg,string:lo,number:Jn,enum:lo,boolean:Jr,formatted:N6,padding:G6,numberArray:W6,colorArray:q4,projectionDefinition:z6,resolvedImage:nM,variableAnchorOffsetCollection:Q6};return n.type==="array"?gf(e[n.value]||qr,n.length):e[n.type]}function D0e(n){if(n.type==="color"&&dJ(n.default))return new Ls(0,0,0,0);switch(n.type){case"color":return Ls.parse(n.default)||null;case"padding":return Om.parse(n.default)||null;case"numberArray":return Im.parse(n.default)||null;case"colorArray":return vf.parse(n.default)||null;case"variableAnchorOffsetCollection":return gg.parse(n.default)||null;case"projectionDefinition":return Mm.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function pJ(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!pJ(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const R0e={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function P0e(n){if(n==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};pJ(n)||(n=lE(n));const e=fJ(n,R0e);if(e.result==="error")throw new Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));{const t=mJ(n);return{filter:(i,r,o)=>e.value.evaluate(i,r,{},o),needGeometry:t,getGlobalStateRefs:()=>J6(e.value.expression)}}}function L0e(n,e){return n<e?-1:n>e?1:0}function mJ(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let e=1;e<n.length;e++)if(mJ(n[e]))return!0;return!1}function lE(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?A8(n[1],n[2],"=="):e==="!="?iw(A8(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?A8(n[1],n[2],e):e==="any"?U0e(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map(lE)):e==="none"?["all"].concat(n.slice(1).map(lE).map(iw)):e==="in"?bj(n[1],n.slice(2)):e==="!in"?iw(bj(n[1],n.slice(2))):e==="has"?Cj(n[1]):e==="!has"?iw(Cj(n[1])):!0}function A8(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function U0e(n){return["any"].concat(n.map(lE))}function bj(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(L0e)]]:["filter-in-small",n,["literal",e]]}}function Cj(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function iw(n){return["!",n]}function X4(n){return typeof n=="object"?["literal",n]:n}function K0e(n,e){let t=n.stops;if(!t)return F0e(n,e);const i=t&&typeof t[0][0]=="object",r=i||n.property!==void 0,o=i||!r;return t=t.map(s=>!r&&e.tokens&&typeof s[1]=="string"?[s[0],G0e(s[1])]:[s[0],X4(s[1])]),i?z0e(n,e,t):o?N0e(n,e,t):yD(n,e,t)}function F0e(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const i=[e.type==="color"?"to-color":e.type,t,X4(n.default)];return e.type==="array"&&i.splice(1,0,e.value,e.length||null),i}}function pL(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function z0e(n,e,t){const i={},r={},o=[];for(let a=0;a<t.length;a++){const c=t[a],d=c[0].zoom;i[d]===void 0&&(i[d]={zoom:d,type:n.type,property:n.property,default:n.default},r[d]=[],o.push(d)),r[d].push([c[0].value,c[1]])}if(gL({},e)==="exponential"){const a=[pL(n),["linear"],["zoom"]];for(const c of o){const d=yD(i[c],e,r[c]);jx(a,c,d,!1)}return a}else{const a=["step",["zoom"]];for(const c of o){const d=yD(i[c],e,r[c]);jx(a,c,d,!0)}return mL(a),a}}function j0e(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function _j(n,e){const t=X4(j0e(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function yD(n,e,t){const i=gL(n,e),r=["get",n.property];if(i==="categorical"&&typeof t[0][0]=="boolean"){const o=["case"];for(const s of t)o.push(["==",r,s[0]],s[1]);return o.push(_j(n,e)),o}else if(i==="categorical"){const o=["match",r];for(const s of t)jx(o,s[0],s[1],!1);return o.push(_j(n,e)),o}else if(i==="interval"){const o=["step",["number",r]];for(const s of t)jx(o,s[0],s[1],!0);return mL(o),n.default===void 0?o:["case",["==",["typeof",r],"number"],o,X4(n.default)]}else if(i==="exponential"){const o=n.base!==void 0?n.base:1,s=[pL(n),o===1?["linear"]:["exponential",o],["number",r]];for(const a of t)jx(s,a[0],a[1],!1);return n.default===void 0?s:["case",["==",["typeof",r],"number"],s,X4(n.default)]}else throw new Error(`Unknown property function type ${i}`)}function N0e(n,e,t,i=["zoom"]){const r=gL(n,e);let o,s=!1;if(r==="interval")o=["step",i],s=!0;else if(r==="exponential"){const a=n.base!==void 0?n.base:1;o=[pL(n),a===1?["linear"]:["exponential",a],i]}else throw new Error(`Unknown zoom function type "${r}"`);for(const a of t)jx(o,a[0],a[1],s);return mL(o),o}function mL(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function jx(n,e,t,i){n.length>3&&e===n[n.length-2]||(i&&n.length===2||n.push(e),n.push(t))}function gL(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function G0e(n){const e=["concat"],t=/{([^{}]+)}/g;let i=0;for(let r=t.exec(n);r!==null;r=t.exec(n)){const o=n.slice(i,t.lastIndex-r[0].length);i=t.lastIndex,o.length>0&&e.push(o),e.push(["get",r[1]])}if(e.length===1)return n;if(i<n.length)e.push(n.slice(i));else if(e.length===2)return["to-string",e[1]];return e}const W0e=pme;var xj={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},y3=" ",Mj=/(italic|oblique)$/i,wj={};function vD(n,e,t){var i=wj[n];if(!i){Array.isArray(n)||(n=[n]);for(var r=400,o="normal",s=[],a,c,d=0,m=n.length;d<m;++d){var v=n[d],M=v.split(" "),B=M[M.length-1].toLowerCase();B=="normal"||B=="italic"||B=="oblique"?(o=c?o:B,c=!0,M.pop(),B=M[M.length-1].toLowerCase()):Mj.test(B)&&(B=B.replace(Mj,""),o=c?o:M[M.length-1].replace(B,""),c=!0);for(var P in xj){var U=M.length>1?M[M.length-2].toLowerCase():"";if(B==P||B==P.replace("-","")||U+"-"+B==P){r=a?r:xj[P],M.pop(),U&&P.startsWith(U)&&M.pop();break}}!a&&typeof B=="number"&&(r=B,a=!0);var z=M.join(y3).replace("Klokantech Noto Sans","Noto Sans").replace("DIN Pro","Barlow").replace("Arial Unicode MS","Arial");z.indexOf(y3)!==-1&&(z='"'+z+'"'),s.push(z)}i=wj[n]=[o,r,s]}return i[0]+y3+i[1]+y3+e+"px"+(t?"/"+t:"")+y3+i[2]}const bd={ADD:"add",REMOVE:"remove"},A2={PROPERTYCHANGE:"propertychange"},br={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class oM{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function Q0e(n,e,t){let i,r;t=t||bg;let o=0,s=n.length,a=!1;for(;o<s;)i=o+(s-o>>1),r=+t(n[i],e),r<0?o=i+1:(s=i,a=!r);return a?o:~o}function bg(n,e){return n>e?1:n<e?-1:0}function q0e(n,e){return n<e?1:n>e?-1:0}function eB(n,e,t){if(n[0]<=e)return 0;const i=n.length;if(e<=n[i-1])return i-1;if(typeof t=="function"){for(let r=1;r<i;++r){const o=n[r];if(o===e)return r;if(o<e)return t(e,n[r-1],o)>0?r-1:r}return i-1}if(t>0){for(let r=1;r<i;++r)if(n[r]<e)return r-1;return i-1}if(t<0){for(let r=1;r<i;++r)if(n[r]<=e)return r;return i-1}for(let r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return n[r-1]-e<e-n[r]?r-1:r}return i-1}function Y0e(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function Cg(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function Fv(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function V0e(n,e,t){const i=e||bg;return n.every(function(r,o){if(o===0)return!0;const s=i(n[o-1],r);return!(s>0||s===0)})}function J4(){return!0}function tB(){return!1}function e5(){}function gJ(n){let e,t,i;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==i||!Fv(r,t))&&(i=this,t=r,e=n.apply(this,arguments)),e}}function h2(n){function e(){let t;try{t=n()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function sM(n){for(const e in n)delete n[e]}function Ov(n){let e;for(e in n)return!1;return!e}class Nm{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class aM extends oM{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const o=t?new Nm(e):e;o.target||(o.target=this.eventTarget_||this);const s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in s||(s[i]=0,a[i]=0),++s[i];let c;for(let d=0,m=r.length;d<m;++d)if("handleEvent"in r[d]?c=r[d].handleEvent(o):c=r[d].call(this,o),c===!1||o.propagationStopped){c=!1;break}if(--s[i]===0){let d=a[i];for(delete a[i];d--;)this.removeEventListener(i,e5);delete s[i]}return c}disposeInternal(){this.listeners_&&sM(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const r=i.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=e5,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}function Go(n,e,t,i,r){if(r){const s=t;t=function(a){return n.removeEventListener(e,t),s.call(i??this,a)}}else i&&i!==n&&(t=t.bind(i));const o={target:n,type:e,listener:t};return n.addEventListener(e,t),o}function uE(n,e,t,i){return Go(n,e,t,i,!0)}function ba(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),sM(n))}class lM extends aM{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(br.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=Go(this,e[o],t);return r}return Go(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let o=0;o<r;++o)i[o]=uE(this,e[o],t)}else i=uE(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)$0e(i);else if(Array.isArray(e))for(let r=0,o=e.length;r<o;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}lM.prototype.on;lM.prototype.once;lM.prototype.un;function $0e(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)ba(n[e]);else ba(n)}function wr(){throw new Error("Unimplemented abstract method.")}let H0e=0;function Ur(n){return n.ol_uid||(n.ol_uid=String(++H0e))}class Sj extends Nm{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class Gm extends lM{constructor(e){super(),this.on,this.once,this.un,Ur(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new Sj(i,e,t)),i=A2.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Sj(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const o=r[e];r[e]=t,o!==t&&this.notify(e,o)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],Ov(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const Ej={LENGTH:"length"};class rw extends Nm{constructor(e,t,i){super(e),this.element=t,this.index=i}}class gp extends Gm{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e??[],this.unique_)for(let i=1,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Ej.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new rw(bd.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new rw(bd.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new rw(bd.REMOVE,r,e)),this.dispatchEvent(new rw(bd.ADD,t,e))}updateLength_(){this.set(Ej.LENGTH,this.array_.length)}assertUnique_(e,t){const i=this.array_;for(let r=0,o=i.length;r<o;++r)if(i[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}}class vx extends Nm{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}class tv extends vx{constructor(e,t,i,r,o,s){super(e,t,o),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Wl={SINGLECLICK:"singleclick",CLICK:br.CLICK,DBLCLICK:br.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},OC=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Z0e=OC.includes("safari")&&!OC.includes("chrom");Z0e&&(OC.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(OC));const X0e=OC.includes("webkit")&&!OC.includes("edge"),yJ=OC.includes("macintosh"),J0e=typeof devicePixelRatio<"u"?devicePixelRatio:1,VA=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,vJ=typeof Image<"u"&&Image.prototype.decode,ege=typeof createImageBitmap=="function",bJ=(function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n})(),bD={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class tge extends aM{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Go(i,bD.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Go(i,bD.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(br.TOUCHMOVE,this.boundHandleTouchMove_,bJ?{passive:!1}:!1)}emulateClick_(e){let t=new tv(Wl.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new tv(Wl.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new tv(Wl.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Wl.POINTERUP||t.type==Wl.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==Wl.POINTERDOWN||t.type==Wl.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new tv(Wl.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(ba),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new tv(Wl.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Go(i,Wl.POINTERMOVE,this.handlePointerMove_,this),Go(i,Wl.POINTERUP,this.handlePointerUp_,this),Go(this.element_,Wl.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Go(this.element_.getRootNode(),Wl.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new tv(Wl.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new tv(Wl.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(ba(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(br.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ba(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ba),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const M1={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},NA={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},oi={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Ss(n,e){if(!n)throw new Error(e)}const cE=1/0;class nge{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,sM(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){Ss(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=cE?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,o=t[e],s=i[e],a=e;for(;e<r>>1;){const c=this.getLeftChildIndex_(e),d=this.getRightChildIndex_(e),m=d<r&&i[d]<i[c]?d:c;t[e]=t[m],i[e]=i[m],e=m}t[e]=o,i[e]=s,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,o=i[t],s=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(r[a]>s)i[t]=i[a],r[t]=r[a],t=a;else break}i[t]=o,r[t]=s}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const o=t.length;let s,a,c;for(a=0;a<o;++a)s=t[a],c=e(s),c==cE?delete this.queuedElements_[this.keyFunction_(s)]:(i[r]=c,t[r++]=s);t.length=r,i.length=r,this.heapify_()}}class CJ extends nge{constructor(e,t){super(i=>e.apply(null,i),i=>i[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(br.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===oi.LOADED||i===oi.ERROR||i===oi.EMPTY){i!==oi.ERROR&&t.removeEventListener(br.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;){const r=this.dequeue()[0],o=r.getKey();r.getState()===oi.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,r.load())}}}function ige(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return cE;const o=n.viewState.center,s=i[0]-o[0],a=i[1]-o[1];return 65536*Math.log(r)+Math.sqrt(s*s+a*a)/r}const ol={ANIMATING:0,INTERACTING:1},ym={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Cl(n,e,t){return Math.min(Math.max(n,e),t)}function rge(n,e,t,i,r,o){const s=r-t,a=o-i;if(s!==0||a!==0){const c=((n-t)*s+(e-i)*a)/(s*s+a*a);c>1?(t=r,i=o):c>0&&(t+=s*c,i+=a*c)}return bC(n,e,t,i)}function bC(n,e,t,i){const r=t-n,o=i-e;return r*r+o*o}function oge(n){const e=n.length;for(let i=0;i<e;i++){let r=i,o=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const c=Math.abs(n[a][i]);c>o&&(o=c,r=a)}if(o===0)return null;const s=n[r];n[r]=n[i],n[i]=s;for(let a=i+1;a<e;a++){const c=-n[a][i]/n[i][i];for(let d=i;d<e+1;d++)i==d?n[a][d]=0:n[a][d]+=c*n[i][d]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}function Bj(n){return n*180/Math.PI}function xv(n){return n*Math.PI/180}function CC(n,e){const t=n%e;return t*e<0?t+e:t}function df(n,e,t){return n+t*(e-n)}function nB(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function ow(n,e){return Math.floor(nB(n,e))}function hv(n,e){return Math.ceil(nB(n,e))}function CD(n,e,t){if(n>=e&&n<t)return n;const i=t-e;return((n-e)%i+i)%i+e}function Oj(n,e,t){return(function(i,r,o,s,a){if(!i)return;if(!r&&!e)return i;const c=e?0:o[0]*r,d=e?0:o[1]*r,m=a?a[0]:0,v=a?a[1]:0;let M=n[0]+c/2+m,B=n[2]-c/2+m,P=n[1]+d/2+v,U=n[3]-d/2+v;M>B&&(M=(B+M)/2,B=M),P>U&&(P=(U+P)/2,U=P);let z=Cl(i[0],M,B),V=Cl(i[1],P,U);if(s&&t&&r){const Z=30*r;z+=-Z*Math.log(1+Math.max(0,M-i[0])/Z)+Z*Math.log(1+Math.max(0,i[0]-B)/Z),V+=-Z*Math.log(1+Math.max(0,P-i[1])/Z)+Z*Math.log(1+Math.max(0,i[1]-U)/Z)}return[z,V]})}function sge(n){return n}const Nc={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function _D(n){const e=Sp();for(let t=0,i=n.length;t<i;++t)y4(e,n[t]);return e}function age(n,e,t){const i=Math.min.apply(null,n),r=Math.min.apply(null,e),o=Math.max.apply(null,n),s=Math.max.apply(null,e);return U1(i,r,o,s,t)}function Mv(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function _J(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function NC(n,e,t){let i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function IC(n,e){return yL(n,e[0],e[1])}function ag(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function yL(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function xD(n,e){const t=n[0],i=n[1],r=n[2],o=n[3],s=e[0],a=e[1];let c=Nc.UNKNOWN;return s<t?c=c|Nc.LEFT:s>r&&(c=c|Nc.RIGHT),a<i?c=c|Nc.BELOW:a>o&&(c=c|Nc.ABOVE),c===Nc.UNKNOWN&&(c=Nc.INTERSECTING),c}function Sp(){return[1/0,1/0,-1/0,-1/0]}function U1(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function L2(n){return U1(1/0,1/0,-1/0,-1/0,n)}function xJ(n,e){const t=n[0],i=n[1];return U1(t,i,t,i,e)}function vL(n,e,t,i,r){const o=L2(r);return wJ(o,n,e,t,i)}function K1(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function MJ(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function y4(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function wJ(n,e,t,i,r){for(;t<i;t+=r)lge(n,e[t],e[t+1]);return n}function lge(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function SJ(n,e){let t;return t=e(iB(n)),t||(t=e(rB(n)),t)||(t=e(oB(n)),t)||(t=e(G1(n)),t)?t:!1}function MD(n){let e=0;return GC(n)||(e=Ho(n)*Nu(n)),e}function iB(n){return[n[0],n[1]]}function rB(n){return[n[2],n[1]]}function Mf(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function uge(n,e){let t;if(e==="bottom-left")t=iB(n);else if(e==="bottom-right")t=rB(n);else if(e==="top-left")t=G1(n);else if(e==="top-right")t=oB(n);else throw new Error("Invalid corner");return t}function AE(n,e,t,i,r){const[o,s,a,c,d,m,v,M]=EJ(n,e,t,i);return U1(Math.min(o,a,d,v),Math.min(s,c,m,M),Math.max(o,a,d,v),Math.max(s,c,m,M),r)}function EJ(n,e,t,i){const r=e*i[0]/2,o=e*i[1]/2,s=Math.cos(t),a=Math.sin(t),c=r*s,d=r*a,m=o*s,v=o*a,M=n[0],B=n[1];return[M-c+v,B-d-m,M-c-v,B-d+m,M+c-v,B+d+m,M+c+v,B+d-m,M-c+v,B-d-m]}function Nu(n){return n[3]-n[1]}function Rm(n,e,t){const i=t||Sp();return ql(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):L2(i),i}function G1(n){return[n[0],n[3]]}function oB(n){return[n[2],n[3]]}function Ho(n){return n[2]-n[0]}function ql(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function GC(n){return n[2]<n[0]||n[3]<n[1]}function cge(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function Age(n,e,t){let i=!1;const r=xD(n,e),o=xD(n,t);if(r===Nc.INTERSECTING||o===Nc.INTERSECTING)i=!0;else{const s=n[0],a=n[1],c=n[2],d=n[3],m=e[0],v=e[1],M=t[0],B=t[1],P=(B-v)/(M-m);let U,z;o&Nc.ABOVE&&!(r&Nc.ABOVE)&&(U=M-(B-d)/P,i=U>=s&&U<=c),!i&&o&Nc.RIGHT&&!(r&Nc.RIGHT)&&(z=B-(M-c)*P,i=z>=a&&z<=d),!i&&o&Nc.BELOW&&!(r&Nc.BELOW)&&(U=M-(B-a)/P,i=U>=s&&U<=c),!i&&o&Nc.LEFT&&!(r&Nc.LEFT)&&(z=B-(M-s)*P,i=z>=a&&z<=d)}return i}function BJ(n,e,t,i){if(GC(n))return L2(t);let r=[];if(i>1){const a=n[2]-n[0],c=n[3]-n[1];for(let d=0;d<i;++d)r.push(n[0]+a*d/i,n[1],n[2],n[1]+c*d/i,n[2]-a*d/i,n[3],n[0],n[3]-c*d/i)}else r=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]];e(r,r,2);const o=[],s=[];for(let a=0,c=r.length;a<c;a+=2)o.push(r[a]),s.push(r[a+1]);return age(o,s,t)}function OJ(n,e){const t=e.getExtent(),i=Mf(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=Ho(t),s=Math.floor((i[0]-t[0])/r)*r;n[0]-=s,n[2]-=s}return n}function IJ(n,e,t){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[i[0],n[1],i[2],n[3]]];OJ(n,e);const r=Ho(i);if(Ho(n)>r&&!t)return[[i[0],n[1],i[2],n[3]]];if(n[0]<i[0])return[[n[0]+r,n[1],i[2],n[3]],[i[0],n[1],n[2],n[3]]];if(n[2]>i[2])return[[n[0],n[1],i[2],n[3]],[i[0],n[1],n[2]-r,n[3]]]}return[n]}function hge(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function hE(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function bL(n,e){const t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,o=n[1]*t+n[0]*i;return n[0]=r,n[1]=o,n}function dge(n,e){return n[0]*=e,n[1]*=e,n}function fge(n,e){const t=n[0]-e[0],i=n[1]-e[1];return t*t+i*i}function pge(n,e){return Math.sqrt(fge(n,e))}function CL(n,e){if(e.canWrapX()){const t=Ho(e.getExtent()),i=mge(n,e,t);i&&(n[0]-=i*t)}return n}function mge(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||Ho(i),r=Math.floor((n[0]-i[0])/t)),r}function TJ(n){return Math.pow(n,3)}function U2(n){return 1-TJ(1-n)}function gge(n){return 3*n*n-2*n*n*n}function yge(n){return n}const vge=63710088e-1;function Ij(n,e,t){t=t||vge;const i=xv(n[1]),r=xv(e[1]),o=(r-i)/2,s=xv(e[0]-n[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function kJ(...n){console.warn(...n)}const Iv={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class sB{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Iv[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const uM=6378137,Ex=Math.PI*uM,bge=[-Ex,-Ex,Ex,Ex],Cge=[-180,-85,180,85],sw=uM*Math.log(Math.tan(Math.PI/2));class L_ extends sB{constructor(e){super({code:e,units:"m",extent:bge,global:!0,worldExtent:Cge,getPointResolution:function(t,i){return t/Math.cosh(i[1]/uM)}})}}const Tj=[new L_("EPSG:3857"),new L_("EPSG:102100"),new L_("EPSG:102113"),new L_("EPSG:900913"),new L_("http://www.opengis.net/def/crs/EPSG/0/3857"),new L_("http://www.opengis.net/gml/srs/epsg.xml#3857")];function _ge(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let o=0;o<r;o+=i){e[o]=Ex*n[o]/180;let s=uM*Math.log(Math.tan(Math.PI*(+n[o+1]+90)/360));s>sw?s=sw:s<-sw&&(s=-sw),e[o+1]=s}return e}function xge(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let o=0;o<r;o+=i)e[o]=180*n[o]/Ex,e[o+1]=360*Math.atan(Math.exp(n[o+1]/uM))/Math.PI-90;return e}const Mge=6378137,kj=[-180,-90,180,90],wge=Math.PI*Mge/180;class Nb extends sB{constructor(e,t){super({code:e,units:"degrees",extent:kj,axisOrientation:t,global:!0,metersPerUnit:wge,worldExtent:kj})}}const Dj=[new Nb("CRS:84"),new Nb("EPSG:4326","neu"),new Nb("urn:ogc:def:crs:OGC:1.3:CRS84"),new Nb("urn:ogc:def:crs:OGC:2:84"),new Nb("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Nb("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Nb("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let wD={};function Sge(n){return wD[n]||wD[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Ege(n,e){wD[n]=e}let Nx={};function t5(n,e,t){const i=n.getCode(),r=e.getCode();i in Nx||(Nx[i]={}),Nx[i][r]=t}function h8(n,e){return n in Nx&&e in Nx[n]?Nx[n][e]:null}const dE=.9996,Mp=.00669438,aB=Mp*Mp,lB=aB*Mp,rC=Mp/(1-Mp),Rj=Math.sqrt(1-Mp),d2=(1-Rj)/(1+Rj),DJ=d2*d2,_L=DJ*d2,xL=_L*d2,RJ=xL*d2,PJ=1-Mp/4-3*aB/64-5*lB/256,Bge=3*Mp/8+3*aB/32+45*lB/1024,Oge=15*aB/256+45*lB/1024,Ige=35*lB/3072,Tge=3/2*d2-27/32*_L+269/512*RJ,kge=21/16*DJ-55/32*xL,Dge=151/96*_L-417/128*RJ,Rge=1097/512*xL,fE=6378137;function Pge(n,e,t){const i=n-5e5,s=(t.north?e:e-1e7)/dE/(fE*PJ),a=s+Tge*Math.sin(2*s)+kge*Math.sin(4*s)+Dge*Math.sin(6*s)+Rge*Math.sin(8*s),c=Math.sin(a),d=c*c,m=Math.cos(a),v=c/m,M=v*v,B=M*M,P=1-Mp*d,U=Math.sqrt(1-Mp*d),z=fE/U,V=(1-Mp)/P,Z=rC*m**2,X=Z*Z,re=i/(z*dE),ie=re*re,te=ie*re,q=te*re,le=q*re,ce=le*re,ve=a-v/V*(ie/2-q/24*(5+3*M+10*Z-4*X-9*rC))+ce/720*(61+90*M+298*Z+45*B-252*rC-3*X);let ge=(re-te/6*(1+2*M+Z)+le/120*(5-2*Z+28*M-3*X+8*rC+24*B))/m;return ge=CD(ge+xv(LJ(t.number)),-Math.PI,Math.PI),[Bj(ge),Bj(ve)]}const Pj=-80,Lj=84,Lge=-180,Uge=180;function Kge(n,e,t){n=CD(n,Lge,Uge),e<Pj?e=Pj:e>Lj&&(e=Lj);const i=xv(e),r=Math.sin(i),o=Math.cos(i),s=r/o,a=s*s,c=a*a,d=xv(n),m=LJ(t.number),v=xv(m),M=fE/Math.sqrt(1-Mp*r**2),B=rC*o**2,P=o*CD(d-v,-Math.PI,Math.PI),U=P*P,z=U*P,V=z*P,Z=V*P,X=Z*P,re=fE*(PJ*i-Bge*Math.sin(2*i)+Oge*Math.sin(4*i)-Ige*Math.sin(6*i)),ie=dE*M*(P+z/6*(1-a+B)+Z/120*(5-18*a+c+72*B-58*rC))+5e5;let te=dE*(re+M*s*(U/2+V/24*(5-a+9*B+4*B**2)+X/720*(61-58*a+c+600*B-330*rC)));return t.north||(te+=1e7),[ie,te]}function LJ(n){return(n-1)*6-180+3}const Fge=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function UJ(n){let e=0;for(const r of Fge){const o=n.match(r);if(o){e=parseInt(o[1]);break}}if(!e)return null;let t=0,i=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(i=!0,t=e-32600),t?{number:t,north:i}:null}function Uj(n,e){return function(t,i,r,o){const s=t.length;r=r>1?r:2,o=o??r,i||(r>2?i=t.slice():i=new Array(s));for(let a=0;a<s;a+=o){const c=t[a],d=t[a+1],m=n(c,d,e);i[a]=m[0],i[a+1]=m[1]}return i}}function zge(n){return UJ(n)?new sB({code:n,units:"m"}):null}function jge(n){const e=UJ(n.getCode());return e?{forward:Uj(Kge,e),inverse:Uj(Pge,e)}:null}const Nge=[jge],Gge=[zge];let SD=!0;function KJ(n){SD=!1}function ML(n,e){if(e!==void 0){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];e=e}else e=n.slice();return e}function ED(n){Ege(n.getCode(),n),t5(n,n,ML)}function Wge(n){n.forEach(ED)}function Us(n){if(typeof n!="string")return n;const e=Sge(n);if(e)return e;for(const t of Gge){const i=t(n);if(i)return i}return null}function BD(n,e,t,i){n=Us(n);let r;const o=n.getPointResolutionFunc();if(o){if(r=o(e,t),i&&i!==n.getUnits()){const s=n.getMetersPerUnit();s&&(r=r*s/Iv[i])}}else{const s=n.getUnits();if(s=="degrees"&&!i||i=="degrees")r=e;else{const a=cM(n,Us("EPSG:4326"));if(!a&&s!=="degrees")r=e*n.getMetersPerUnit();else{let d=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];d=a(d,d,2);const m=Ij(d.slice(0,2),d.slice(2,4)),v=Ij(d.slice(4,6),d.slice(6,8));r=(m+v)/2}const c=i?Iv[i]:n.getMetersPerUnit();c!==void 0&&(r/=c)}}return r}function Kj(n){Wge(n),n.forEach(function(e){n.forEach(function(t){e!==t&&t5(e,t,ML)})})}function Qge(n,e,t,i){n.forEach(function(r){e.forEach(function(o){t5(r,o,t),t5(o,r,i)})})}function wL(n,e){return n?typeof n=="string"?Us(n):n:Us(e)}function qge(n){return(function(e,t,i,r){const o=e.length;i=i!==void 0?i:2,r=r??i,t=t!==void 0?t:new Array(o);for(let s=0;s<o;s+=r){const a=n(e.slice(s,s+i)),c=a.length;for(let d=0,m=r;d<m;++d)t[s+d]=d>=c?e[s+d]:a[d]}return t})}function OD(n,e){return KJ(),uB(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function d8(n,e){const t=uB(n,"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=CC(i+180,360)-180),t}function qA(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||cM(n,e)===ML)&&t}function cM(n,e){const t=n.getCode(),i=e.getCode();let r=h8(t,i);if(r)return r;let o=null,s=null;for(const c of Nge)o||(o=c(n)),s||(s=c(e));if(!o&&!s)return null;const a="EPSG:4326";if(s)if(o)r=f8(o.inverse,s.forward);else{const c=h8(t,a);c&&(r=f8(c,s.forward))}else{const c=h8(a,i);c&&(r=f8(o.inverse,c))}return r&&(ED(n),ED(e),t5(n,e,r)),r}function f8(n,e){return function(t,i,r,o){return i=n(t,i,r,o),e(i,i,r,o)}}function TC(n,e){const t=Us(n),i=Us(e);return cM(t,i)}function uB(n,e,t){const i=TC(e,t);if(!i){const r=Us(e).getCode(),o=Us(t).getCode();throw new Error(`No transform available between ${r} and ${o}`)}return i(n,void 0,n.length)}function gS(n,e,t,i){const r=TC(e,t);return BJ(n,r,void 0,i)}let Yge=null;function Vge(){return Yge}function ID(n,e){return n}function x1(n,e){return SD&&!hE(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(SD=!1,kJ("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function SL(n,e){return n}function lg(n,e){return n}function $ge(){Kj(Tj),Kj(Dj),Qge(Dj,Tj,_ge,xge)}$ge();const FJ=new Array(6);function Bd(){return[1,0,0,1,0,0]}function Fj(n){return BL(n,1,0,0,1,0,0)}function EL(n,e){const t=n[0],i=n[1],r=n[2],o=n[3],s=n[4],a=n[5],c=e[0],d=e[1],m=e[2],v=e[3],M=e[4],B=e[5];return n[0]=t*c+r*d,n[1]=i*c+o*d,n[2]=t*m+r*v,n[3]=i*m+o*v,n[4]=t*M+r*B+s,n[5]=i*M+o*B+a,n}function BL(n,e,t,i,r,o,s){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=o,n[5]=s,n}function Hge(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Fu(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function p8(n,e,t){return EL(n,BL(FJ,e,0,0,t,0,0))}function Zge(n,e,t){return EL(n,BL(FJ,1,0,0,1,e,t))}function xg(n,e,t,i,r,o,s,a){const c=Math.sin(o),d=Math.cos(o);return n[0]=i*d,n[1]=r*c,n[2]=-i*c,n[3]=r*d,n[4]=s*i*d-a*i*c+e,n[5]=s*r*c+a*r*d+t,n}function zJ(n,e){const t=Xge(e);Ss(t!==0,"Transformation matrix cannot be inverted");const i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5];return n[0]=s/t,n[1]=-r/t,n[2]=-o/t,n[3]=i/t,n[4]=(o*c-s*a)/t,n[5]=-(i*c-r*a)/t,n}function Xge(n){return n[0]*n[3]-n[1]*n[2]}const Jge=[1e5,1e5,1e5,1e5,2,2];function e1e(n){return"matrix("+n.join(", ")+")"}function TD(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function t1e(n,e){const t=TD(n),i=TD(e);for(let r=0;r<6;++r)if(Math.round((t[r]-i[r])*Jge[r])!==0)return!1;return!0}function wv(n,e,t,i,r,o,s){o=o||[],s=s||2;let a=0;for(let c=e;c<t;c+=i){const d=n[c],m=n[c+1];o[a++]=r[0]*d+r[2]*m+r[4],o[a++]=r[1]*d+r[3]*m+r[5];for(let v=2;v<s;v++)o[a++]=n[c+v]}return o&&o.length!=a&&(o.length=a),o}function jJ(n,e,t,i,r,o,s){s=s||[];const a=Math.cos(r),c=Math.sin(r),d=o[0],m=o[1];let v=0;for(let M=e;M<t;M+=i){const B=n[M]-d,P=n[M+1]-m;s[v++]=d+B*a-P*c,s[v++]=m+B*c+P*a;for(let U=M+2;U<M+i;++U)s[v++]=n[U]}return s&&s.length!=v&&(s.length=v),s}function n1e(n,e,t,i,r,o,s,a){a=a||[];const c=s[0],d=s[1];let m=0;for(let v=e;v<t;v+=i){const M=n[v]-c,B=n[v+1]-d;a[m++]=c+r*M,a[m++]=d+o*B;for(let P=v+2;P<v+i;++P)a[m++]=n[P]}return a&&a.length!=m&&(a.length=m),a}function i1e(n,e,t,i,r,o,s){s=s||[];let a=0;for(let c=e;c<t;c+=i){s[a++]=n[c]+r,s[a++]=n[c+1]+o;for(let d=c+2;d<c+i;++d)s[a++]=n[d]}return s&&s.length!=a&&(s.length=a),s}const zj=Bd(),r1e=[NaN,NaN];class NJ extends Gm{constructor(){super(),this.extent_=Sp(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=gJ((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return wr()}closestPointXY(e,t,i,r){return wr()}containsXY(e,t){return this.closestPointXY(e,t,r1e,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return wr()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&L2(t),this.extentRevision_=this.getRevision()}return cge(this.extent_,e)}rotate(e,t){wr()}scale(e,t,i){wr()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return wr()}getType(){return wr()}applyTransform(e){wr()}intersectsExtent(e){return wr()}translate(e,t){wr()}transform(e,t){const i=Us(e),r=i.getUnits()=="tile-pixels"?function(o,s,a){const c=i.getExtent(),d=i.getWorldExtent(),m=Nu(d)/Nu(c);xg(zj,d[0],d[3],m,-m,0,0,0);const v=wv(o,0,o.length,a,zj,s),M=TC(i,t);return M?M(v,v,a):v}:TC(i,t);return this.applyTransform(r),this}}class WC extends NJ{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return vL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return wr()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=jj(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){wr()}setLayout(e,t,i){let r;if(e)r=jj(e);else{for(let o=0;o<i;++o){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=QC(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();jJ(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=Mf(this.getExtent()));const r=this.getFlatCoordinates();if(r){const o=this.getStride();n1e(r,0,r.length,o,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();i1e(i,0,i.length,r,e,t,i),this.changed()}}}function QC(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function jj(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function o1e(n,e,t){const i=n.getFlatCoordinates();if(!i)return null;const r=n.getStride();return wv(i,0,i.length,r,e,t)}function GJ(n,e,t,i){let r=0;const o=n[t-i],s=n[t-i+1];let a=0,c=0;for(;e<t;e+=i){const d=n[e]-o,m=n[e+1]-s;r+=c*d-a*m,a=d,c=m}return r/2}function WJ(n,e,t,i){let r=0;for(let o=0,s=t.length;o<s;++o){const a=t[o];r+=GJ(n,e,a,i),e=a}return r}function s1e(n,e,t,i){let r=0;for(let o=0,s=t.length;o<s;++o){const a=t[o];r+=WJ(n,e,a,i),e=a[a.length-1]}return r}function Nj(n,e,t,i,r,o,s){const a=n[e],c=n[e+1],d=n[t]-a,m=n[t+1]-c;let v;if(d===0&&m===0)v=e;else{const M=((r-a)*d+(o-c)*m)/(d*d+m*m);if(M>1)v=t;else if(M>0){for(let B=0;B<i;++B)s[B]=df(n[e+B],n[t+B],M);s.length=i;return}else v=e}for(let M=0;M<i;++M)s[M]=n[v+M];s.length=i}function OL(n,e,t,i,r){let o=n[e],s=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],c=n[e+1],d=bC(o,s,a,c);d>r&&(r=d),o=a,s=c}return r}function IL(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];r=OL(n,e,a,i,r),e=a}return r}function a1e(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];r=IL(n,e,a,i,r),e=a[a.length-1]}return r}function TL(n,e,t,i,r,o,s,a,c,d,m){if(e==t)return d;let v,M;if(r===0){if(M=bC(s,a,n[e],n[e+1]),M<d){for(v=0;v<i;++v)c[v]=n[e+v];return c.length=i,M}return d}m=m||[NaN,NaN];let B=e+i;for(;B<t;)if(Nj(n,B-i,B,i,s,a,m),M=bC(s,a,m[0],m[1]),M<d){for(d=M,v=0;v<i;++v)c[v]=m[v];c.length=i,B+=i}else B+=i*Math.max((Math.sqrt(M)-Math.sqrt(d))/r|0,1);if(o&&(Nj(n,t-i,e,i,s,a,m),M=bC(s,a,m[0],m[1]),M<d)){for(d=M,v=0;v<i;++v)c[v]=m[v];c.length=i}return d}function kL(n,e,t,i,r,o,s,a,c,d,m){m=m||[NaN,NaN];for(let v=0,M=t.length;v<M;++v){const B=t[v];d=TL(n,e,B,i,r,o,s,a,c,d,m),e=B}return d}function l1e(n,e,t,i,r,o,s,a,c,d,m){m=m||[NaN,NaN];for(let v=0,M=t.length;v<M;++v){const B=t[v];d=kL(n,e,B,i,r,o,s,a,c,d,m),e=B[B.length-1]}return d}function u1e(n,e,t,i){for(let r=0,o=t.length;r<o;++r)n[e++]=t[r];return e}function cB(n,e,t,i){for(let r=0,o=t.length;r<o;++r){const s=t[r];for(let a=0;a<i;++a)n[e++]=s[a]}return e}function AM(n,e,t,i,r){r=r||[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=cB(n,e,t[s],i);r[o++]=c,e=c}return r.length=o,r}function QJ(n,e,t,i,r){r=r||[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=AM(n,e,t[s],i,r[o]);c.length===0&&(c[0]=e),r[o++]=c,e=c[c.length-1]}return r.length=o,r}function dv(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=e;s<t;s+=i)r[o++]=n.slice(s,s+i);return r.length=o,r}function n5(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s];r[o++]=dv(n,e,c,i,r[o]),e=c}return r.length=o,r}function kD(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s];r[o++]=c.length===1&&c[0]===e?[]:n5(n,e,c,i,r[o]),e=c[c.length-1]}return r.length=o,r}function AB(n,e,t,i,r,o,s){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)o[s++]=n[e],o[s++]=n[e+1];return s}const c=new Array(a);c[0]=1,c[a-1]=1;const d=[e,t-i];let m=0;for(;d.length>0;){const v=d.pop(),M=d.pop();let B=0;const P=n[M],U=n[M+1],z=n[v],V=n[v+1];for(let Z=M+i;Z<v;Z+=i){const X=n[Z],re=n[Z+1],ie=rge(X,re,P,U,z,V);ie>B&&(m=Z,B=ie)}B>r&&(c[(m-e)/i]=1,M+i<m&&d.push(M,m),m+i<v&&d.push(m,v))}for(let v=0;v<a;++v)c[v]&&(o[s++]=n[e+v*i],o[s++]=n[e+v*i+1]);return s}function qJ(n,e,t,i,r,o,s,a){for(let c=0,d=t.length;c<d;++c){const m=t[c];s=AB(n,e,m,i,r,o,s),a.push(s),e=m}return s}function Vb(n,e){return e*Math.round(n/e)}function c1e(n,e,t,i,r,o,s){if(e==t)return s;let a=Vb(n[e],r),c=Vb(n[e+1],r);e+=i,o[s++]=a,o[s++]=c;let d,m;do if(d=Vb(n[e],r),m=Vb(n[e+1],r),e+=i,e==t)return o[s++]=d,o[s++]=m,s;while(d==a&&m==c);for(;e<t;){const v=Vb(n[e],r),M=Vb(n[e+1],r);if(e+=i,v==d&&M==m)continue;const B=d-a,P=m-c,U=v-a,z=M-c;if(B*z==P*U&&(B<0&&U<B||B==U||B>0&&U>B)&&(P<0&&z<P||P==z||P>0&&z>P)){d=v,m=M;continue}o[s++]=d,o[s++]=m,a=d,c=m,d=v,m=M}return o[s++]=d,o[s++]=m,s}function DL(n,e,t,i,r,o,s,a){for(let c=0,d=t.length;c<d;++c){const m=t[c];s=c1e(n,e,m,i,r,o,s),a.push(s),e=m}return s}function A1e(n,e,t,i,r,o,s,a){for(let c=0,d=t.length;c<d;++c){const m=t[c],v=[];s=DL(n,e,m,i,r,o,s,v),a.push(v),e=m[m.length-1]}return s}class i5 extends WC{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new i5(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<NC(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(OL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),TL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return GJ(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return dv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=AB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new i5(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cB(this.flatCoordinates,0,e,this.stride),this.changed()}}class kC extends WC{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new kC(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const o=this.flatCoordinates,s=bC(e,t,o[0],o[1]);if(s<r){const a=this.stride;for(let c=0;c<a;++c)i[c]=o[c];return i.length=a,s}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return xJ(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return yL(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=u1e(this.flatCoordinates,0,e,this.stride),this.changed()}}function h1e(n,e,t,i,r){return!SJ(r,function(s){return!oC(n,e,t,i,s[0],s[1])})}function oC(n,e,t,i,r,o){let s=0,a=n[t-i],c=n[t-i+1];for(;e<t;e+=i){const d=n[e],m=n[e+1];c<=o?m>o&&(d-a)*(o-c)-(r-a)*(m-c)>0&&s++:m<=o&&(d-a)*(o-c)-(r-a)*(m-c)<0&&s--,a=d,c=m}return s!==0}function RL(n,e,t,i,r,o){if(t.length===0||!oC(n,e,t[0],i,r,o))return!1;for(let s=1,a=t.length;s<a;++s)if(oC(n,t[s-1],t[s],i,r,o))return!1;return!0}function d1e(n,e,t,i,r,o){if(t.length===0)return!1;for(let s=0,a=t.length;s<a;++s){const c=t[s];if(RL(n,e,c,i,r,o))return!0;e=c[c.length-1]}return!1}function PL(n,e,t,i,r,o,s){let a,c,d,m,v,M,B;const P=r[o+1],U=[];for(let Z=0,X=t.length;Z<X;++Z){const re=t[Z];for(m=n[re-i],M=n[re-i+1],a=e;a<re;a+=i)v=n[a],B=n[a+1],(P<=M&&B<=P||M<=P&&P<=B)&&(d=(P-M)/(B-M)*(v-m)+m,U.push(d)),m=v,M=B}let z=NaN,V=-1/0;for(U.sort(bg),m=U[0],a=1,c=U.length;a<c;++a){v=U[a];const Z=Math.abs(v-m);Z>V&&(d=(m+v)/2,RL(n,e,t,i,d,P)&&(z=d,V=Z)),m=v}return isNaN(z)&&(z=r[o]),s?(s.push(z,P,V),s):[z,P,V]}function YJ(n,e,t,i,r){let o=[];for(let s=0,a=t.length;s<a;++s){const c=t[s];o=PL(n,e,c,i,r,2*s,o),e=c[c.length-1]}return o}function VJ(n,e,t,i,r){let o;for(e+=i;e<t;e+=i)if(o=r(n.slice(e-i,e),n.slice(e,e+i)),o)return o;return!1}function hB(n,e,t,i,r,o){return o=o??wJ(Sp(),n,e,t,i),ql(r,o)?o[0]>=r[0]&&o[2]<=r[2]||o[1]>=r[1]&&o[3]<=r[3]?!0:VJ(n,e,t,i,function(s,a){return Age(r,s,a)}):!1}function f1e(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){if(hB(n,e,t[o],i,r))return!0;e=t[o]}return!1}function $J(n,e,t,i,r){return!!(hB(n,e,t,i,r)||oC(n,e,t,i,r[0],r[1])||oC(n,e,t,i,r[0],r[3])||oC(n,e,t,i,r[2],r[1])||oC(n,e,t,i,r[2],r[3]))}function HJ(n,e,t,i,r){if(!$J(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(let o=1,s=t.length;o<s;++o)if(h1e(n,t[o-1],t[o],i,r)&&!hB(n,t[o-1],t[o],i,r))return!1;return!0}function p1e(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];if(HJ(n,e,a,i,r))return!0;e=a[a.length-1]}return!1}function m1e(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const o=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=o}e+=i,t-=i}}function LL(n,e,t,i){let r=0,o=n[t-i],s=n[t-i+1];for(;e<t;e+=i){const a=n[e],c=n[e+1];r+=(a-o)*(c+s),o=a,s=c}return r===0?void 0:r>0}function UL(n,e,t,i,r){r=r!==void 0?r:!1;for(let o=0,s=t.length;o<s;++o){const a=t[o],c=LL(n,e,a,i);if(o===0){if(r&&c||!r&&!c)return!1}else if(r&&!c||!r&&c)return!1;e=a}return!0}function ZJ(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];if(!UL(n,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}function pE(n,e,t,i,r){r=r!==void 0?r:!1;for(let o=0,s=t.length;o<s;++o){const a=t[o],c=LL(n,e,a,i);(o===0?r&&c||!r&&!c:r&&!c||!r&&c)&&m1e(n,e,a,i),e=a}return e}function DD(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o)e=pE(n,e,t[o],i,r);return e}function XJ(n,e){const t=[];let i=0,r=0,o;for(let s=0,a=e.length;s<a;++s){const c=e[s],d=LL(n,i,c,2);if(o===void 0&&(o=d),d===o)t.push(e.slice(r,s+1));else{if(t.length===0)continue;t[t.length-1].push(e[r])}r=s+1,i=c}return t}class F1 extends WC{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Cg(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new F1(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<NC(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(IL(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),kL(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return RL(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return WJ(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),pE(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,n5(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Mf(this.getExtent());this.flatInteriorPoint_=PL(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new kC(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new i5(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let o=0;for(let s=0,a=i.length;s<a;++s){const c=i[s],d=new i5(t.slice(o,c),e);r.push(d),o=c}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;UL(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=pE(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=DL(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new F1(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return HJ(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=AM(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function Gj(n){if(GC(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],i=n[2],r=n[3],o=[e,t,e,r,i,r,i,t,e,t];return new F1(o,"XY",[o.length])}function KL(n,e,t,i){const r=Ho(e)/t[0],o=Nu(e)/t[1];return i?Math.min(n,Math.max(r,o)):Math.min(n,Math.min(r,o))}function FL(n,e,t){let i=Math.min(n,e);const r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),Cl(i,t/2,e*2)}function g1e(n,e,t,i){return e=e!==void 0?e:!0,(function(r,o,s,a){if(r!==void 0){const c=n[0],d=n[n.length-1],m=t?KL(c,t,s,i):c;if(a)return e?FL(r,m,d):Cl(r,d,m);const v=Math.min(m,r),M=Math.floor(eB(n,v,o));return n[M]>m&&M<n.length-1?n[M+1]:n[M]}})}function y1e(n,e,t,i,r,o){return i=i!==void 0?i:!0,t=t!==void 0?t:0,(function(s,a,c,d){if(s!==void 0){const m=r?KL(e,r,c,o):e;if(d)return i?FL(s,m,t):Cl(s,t,m);const v=1e-9,M=Math.ceil(Math.log(e/m)/Math.log(n)-v),B=-a*(.5-v)+.5,P=Math.min(m,s),U=Math.floor(Math.log(e/P)/Math.log(n)+B),z=Math.max(M,U),V=e/Math.pow(n,z);return Cl(V,t,m)}})}function Wj(n,e,t,i,r){return t=t!==void 0?t:!0,(function(o,s,a,c){if(o!==void 0){const d=i?KL(n,i,a,r):n;return!t||!c?Cl(o,e,d):FL(o,d,e)}})}function zL(n){if(n!==void 0)return 0}function Qj(n){if(n!==void 0)return n}function v1e(n){const e=2*Math.PI/n;return(function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function b1e(n){const e=xv(5);return(function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t})}const JJ=42,jL=256,m8=0;class Sm extends Gm{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=wL(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&KJ(),e.center&&(e.center=x1(e.center,this.projection_)),e.extent&&(e.extent=lg(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in ym)delete t[a];this.setProperties(t,!0);const i=_1e(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=C1e(e),o=i.constraint,s=x1e(e);this.constraints_={center:r,resolution:o,rotation:s},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const o=this.getResolution(),s=o/2*(r[3]-t[3]+t[1]-r[1]),a=o/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([i[0]+s,i[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=x1(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=x1(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const m=arguments[r];m.center&&this.setCenterInternal(m.center),m.zoom!==void 0?this.setZoom(m.zoom):m.resolution&&this.setResolution(m.resolution),m.rotation!==void 0&&this.setRotation(m.rotation)}if(r===t){i&&aw(i,!0);return}let o=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,c=this.targetRotation_;const d=[];for(;r<t;++r){const m=arguments[r],v={start:o,complete:!1,anchor:m.anchor,duration:m.duration!==void 0?m.duration:1e3,easing:m.easing||gge,callback:i};if(m.center&&(v.sourceCenter=s,v.targetCenter=m.center.slice(),s=v.targetCenter),m.zoom!==void 0?(v.sourceResolution=a,v.targetResolution=this.getResolutionForZoom(m.zoom),a=v.targetResolution):m.resolution&&(v.sourceResolution=a,v.targetResolution=m.resolution,a=v.targetResolution),m.rotation!==void 0){v.sourceRotation=c;const M=CC(m.rotation-c+Math.PI,2*Math.PI)-Math.PI;v.targetRotation=c+M,c=v.targetRotation}M1e(v)?v.complete=!0:o+=v.duration,d.push(v)}this.animations_.push(d),this.setHint(ol.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ol.ANIMATING]>0}getInteracting(){return this.hints_[ol.INTERACTING]>0}cancelAnimations(){this.setHint(ol.ANIMATING,-this.hints_[ol.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&aw(r[0].callback,!1),!e)for(let o=0,s=r.length;o<s;++o){const a=r[o];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let o=!0;for(let s=0,a=r.length;s<a;++s){const c=r[s];if(c.complete)continue;const d=e-c.start;let m=c.duration>0?d/c.duration:1;m>=1?(c.complete=!0,m=1):o=!1;const v=c.easing(m);if(c.sourceCenter){const M=c.sourceCenter[0],B=c.sourceCenter[1],P=c.targetCenter[0],U=c.targetCenter[1];this.nextCenter_=c.targetCenter;const z=M+v*(P-M),V=B+v*(U-B);this.targetCenter_=[z,V]}if(c.sourceResolution&&c.targetResolution){const M=v===1?c.targetResolution:c.sourceResolution+v*(c.targetResolution-c.sourceResolution);if(c.anchor){const B=this.getViewportSize_(this.getRotation()),P=this.constraints_.resolution(M,0,B,!0);this.targetCenter_=this.calculateCenterZoom(P,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=M,this.applyTargetState_(!0)}if(c.sourceRotation!==void 0&&c.targetRotation!==void 0){const M=v===1?CC(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+v*(c.targetRotation-c.sourceRotation);if(c.anchor){const B=this.constraints_.rotation(M,!0);this.targetCenter_=this.calculateCenterRotate(B,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=M}if(this.applyTargetState_(!0),t=!0,!c.complete)break}if(o){this.animations_[i]=null,this.setHint(ol.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const s=r[0].callback;s&&aw(s,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-t[0],r[1]-t[1]],bL(i,e-this.getRotation()),hge(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),o=this.getResolution();if(r!==void 0&&o!==void 0){const s=t[0]-e*(t[0]-r[0])/o,a=t[1]-e*(t[1]-r[1])/o;i=[s,a]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&ID(e,this.getProjection())}getCenterInternal(){return this.get(ym.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return SL(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Ss(t,"The view center is not defined");const i=this.getResolution();Ss(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return Ss(r!==void 0,"The view rotation is not defined"),AE(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ym.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(lg(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=Ho(e)/t[0],r=Nu(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(t/i)/Math.log(e);return(function(o){return t/Math.pow(e,o*r)})}getRotation(){return this.get(ym.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,o=Math.log(i/r)/t;return(function(s){return Math.log(i/s)/t/o})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const o=this.padding_;if(o){const s=this.getViewportSizeMinusPadding_();r=g8(r,this.getViewportSize_(),[s[0]/2+o[3],s[1]/2+o[0]],t,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,r;if(this.resolutions_){const o=eB(this.resolutions_,e,1);t=o,i=this.resolutions_[o],o==this.resolutions_.length-1?r=2:r=i/this.resolutions_[o+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=Cl(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,Cl(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(Ss(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Ss(!GC(e),"Cannot fit empty extent provided as `geometry`");const r=lg(e,this.getProjection());i=Gj(r)}else if(e.getType()==="Circle"){const r=lg(e.getExtent(),this.getProjection());i=Gj(r),i.rotate(this.getRotation(),Mf(r))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),o=e.getFlatCoordinates(),s=e.getStride();let a=1/0,c=1/0,d=-1/0,m=-1/0;for(let v=0,M=o.length;v<M;v+=s){const B=o[v]*i-o[v+1]*r,P=o[v]*r+o[v+1]*i;a=Math.min(a,B),c=Math.min(c,P),d=Math.max(d,B),m=Math.max(m,P)}return[a,c,d,m]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],o=t.nearest!==void 0?t.nearest:!1;let s;t.minResolution!==void 0?s=t.minResolution:t.maxZoom!==void 0?s=this.getResolutionForZoom(t.maxZoom):s=0;const a=this.rotatedExtentForGeometry(e);let c=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);c=isNaN(c)?s:Math.max(c,s),c=this.getConstrainedResolution(c,o?0:1);const d=this.getRotation(),m=Math.sin(d),v=Math.cos(d),M=Mf(a);M[0]+=(r[1]-r[3])/2*c,M[1]+=(r[0]-r[2])/2*c;const B=M[0]*v-M[1]*m,P=M[1]*v+M[0]*m,U=this.getConstrainedCenter([B,P],c),z=t.callback?t.callback:e5;t.duration!==void 0?this.animateInternal({resolution:c,center:U,duration:t.duration,easing:t.easing},z):(this.targetResolution_=c,this.targetCenter_=U,this.applyTargetState_(!1,!0),aw(z,!0))}centerOn(e,t,i){this.centerOnInternal(x1(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(g8(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let o;const s=this.padding_;if(s&&e){const a=this.getViewportSizeMinusPadding_(-i),c=g8(e,r,[a[0]/2+s[3],a[1]/2+s[0]],t,i);o=[e[0]-c[0],e[1]-c[1]]}return o}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=ID(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&x1(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(o,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=x1(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&x1(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),o=this.getViewportSize_(r),s=this.constraints_.resolution(this.targetResolution_,0,o,i),a=this.constraints_.center(this.targetCenter_,s,o,i,this.calculateCenterShift(this.targetCenter_,s,r,o));this.get(ym.ROTATION)!==r&&this.set(ym.ROTATION,r),this.get(ym.RESOLUTION)!==s&&(this.set(ym.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(ym.CENTER)||!hE(this.get(ym.CENTER),a))&&this.set(ym.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const r=t||0,o=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(o),a=this.constraints_.resolution(this.targetResolution_,r,s),c=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,o,s));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=o,this.targetCenter_=c,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==o||!this.getCenterInternal()||!hE(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:c,resolution:a,duration:e,easing:U2,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ol.INTERACTING,1)}endInteraction(e,t,i){i=i&&x1(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(ol.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function aw(n,e){setTimeout(function(){n(e)},0)}function C1e(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return Oj(n.extent,n.constrainOnlyCenter,t)}const e=wL(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Oj(t,!1,!1)}return sge}function _1e(n){let e,t,i,s=n.minZoom!==void 0?n.minZoom:m8,a=n.maxZoom!==void 0?n.maxZoom:28;const c=n.zoomFactor!==void 0?n.zoomFactor:2,d=n.multiWorld!==void 0?n.multiWorld:!1,m=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,v=n.showFullExtent!==void 0?n.showFullExtent:!1,M=wL(n.projection,"EPSG:3857"),B=M.getExtent();let P=n.constrainOnlyCenter,U=n.extent;if(!d&&!U&&M.isGlobal()&&(P=!1,U=B),n.resolutions!==void 0){const z=n.resolutions;t=z[s],i=z[a]!==void 0?z[a]:z[z.length-1],n.constrainResolution?e=g1e(z,m,!P&&U,v):e=Wj(t,i,m,!P&&U,v)}else{const V=(B?Math.max(Ho(B),Nu(B)):360*Iv.degrees/M.getMetersPerUnit())/jL/Math.pow(2,m8),Z=V/Math.pow(2,28-m8);t=n.maxResolution,t!==void 0?s=0:t=V/Math.pow(c,s),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(c,a):i=V/Math.pow(c,a):i=Z),a=s+Math.floor(Math.log(t/i)/Math.log(c)),i=t/Math.pow(c,a-s),n.constrainResolution?e=y1e(c,t,i,m,!P&&U,v):e=Wj(t,i,m,!P&&U,v)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:s,zoomFactor:c}}function x1e(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?b1e():t===!1?Qj:typeof t=="number"?v1e(t):Qj}return zL}function M1e(n){return!(n.sourceCenter&&n.targetCenter&&!hE(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function g8(n,e,t,i,r){const o=Math.cos(-r);let s=Math.sin(-r),a=n[0]*o-n[1]*s,c=n[1]*o+n[0]*s;a+=(e[0]/2-t[0])*i,c+=(t[1]-e[1]/2)*i,s=-s;const d=a*o-c*s,m=c*o+a*s;return[d,m]}const lw="ol-hidden",w1e="ol-selectable",dB="ol-unselectable",NL="ol-control",qj="ol-collapsed",S1e=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),Yj=["style","variant","weight","size","lineHeight","family"],RD={normal:400,bold:700},PD=function(n){const e=n.match(S1e);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let i=0,r=Yj.length;i<r;++i){const o=e[i+1];o!==void 0&&(t[Yj[i]]=typeof o=="string"?o.trim():o)}return isNaN(Number(t.weight))&&t.weight in RD&&(t.weight=RD[t.weight]),t.families=t.family.split(/,\s?/).map(i=>i.trim().replace(/^['"]|['"]$/g,"")),t};function _l(n,e,t,i){let r;return t&&t.length?r=t.shift():VA?r=new class extends OffscreenCanvas{style={}}(n??300,e??150):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}let y8;function mE(){return y8||(y8=_l(1,1)),y8}function hM(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function E1e(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function B1e(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function Vj(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function eee(n){for(;n.lastChild;)n.lastChild.remove()}function O1e(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],o=e[i];if(!r&&!o)break;if(r!==o){if(!r){n.appendChild(o);continue}if(!o){n.removeChild(r),--i;continue}n.insertBefore(o,r)}}}function tee(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const t=this.childNodes.indexOf(e);if(t===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(t,1),e},insertBefore:function(e,t){const i=this.childNodes.indexOf(t);if(i===-1)throw new Error("Reference node not found");return this.childNodes.splice(i,0,e),e},style:{}},{get(e,t,i){return t==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,t,i)}})}function fv(n){return typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas}class GL extends Gm{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,i=this.listenerKeys.length;t<i;++t)ba(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==e5&&this.listenerKeys.push(Go(e,M1.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class I1e extends GL{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",o=e.collapseLabel!==void 0?e.collapseLabel:"",s=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=s):this.collapseLabel_=o;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener(br.CLICK,this.handleClick_.bind(this),!1);const d=t+" "+dB+" "+NL+(this.collapsed_&&this.collapsible_?" "+qj:"")+(this.collapsible_?"":" ol-uncollapsible"),m=this.element;m.className=d,m.appendChild(this.toggleButton_),m.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),i=new Set(t.flatMap(r=>r.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>i.add(r)):i.add(this.attributions_)),!this.overrideCollapsible_){const r=!t.some(o=>o.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(r)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(r=>h2(()=>r))),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Fv(t,this.renderedAttributions_)){eee(this.ulElement_);for(let r=0,o=t.length;r<o;++r){const s=document.createElement("li");s.innerHTML=t[r],this.ulElement_.appendChild(s)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(qj),this.collapsed_?Vj(this.collapseLabel_,this.label_):Vj(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class T1e extends GL{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const o=e.tipLabel?e.tipLabel:"Reset rotation",s=document.createElement("button");s.className=t+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),s.addEventListener(br.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+dB+" "+NL,c=this.element;c.className=a,c.appendChild(s),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(lw)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:U2}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const o=this.element.classList.contains(lw);!o&&i===0?this.element.classList.add(lw):o&&i!==0&&this.element.classList.remove(lw)}this.label_.style.transform=r}this.rotation_=i}}class k1e extends GL{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",o=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",s=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",c=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",d=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",m=document.createElement("button");m.className=r,m.setAttribute("type","button"),m.title=c,m.appendChild(typeof s=="string"?document.createTextNode(s):s),m.addEventListener(br.CLICK,this.handleClick_.bind(this,i),!1);const v=document.createElement("button");v.className=o,v.setAttribute("type","button"),v.title=d,v.appendChild(typeof a=="string"?document.createTextNode(a):a),v.addEventListener(br.CLICK,this.handleClick_.bind(this,-i),!1);const M=t+" "+dB+" "+NL,B=this.element;B.className=M,B.appendChild(m),B.appendChild(v),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const o=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:o,duration:this.duration_,easing:U2})):i.setZoom(o)}}}function D1e(n){n=n||{};const e=new gp;return(n.zoom===void 0||n.zoom)&&e.push(new k1e(n.zoomOptions)),(n.rotate===void 0||n.rotate)&&e.push(new T1e(n.rotateOptions)),(n.attribution===void 0||n.attribution)&&e.push(new I1e(n.attributionOptions)),e}class R1e{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const o=this.points_[t]-this.points_[i],s=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(s,o),this.initialVelocity_=Math.sqrt(o*o+s*s)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const $j={ACTIVE:"active"};class dM extends Gm{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get($j.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set($j.ACTIVE,e)}setMap(e){this.map_=e}}function P1e(n,e,t){const i=n.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:yge,center:n.getConstrainedCenter(r)})}}function WL(n,e,t,i){const r=n.getZoom();if(r===void 0)return;const o=n.getConstrainedZoom(r+e),s=n.getResolutionForZoom(o);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:s,anchor:t,duration:i!==void 0?i:250,easing:U2})}class L1e extends dM{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Wl.DBLCLICK){const i=e.originalEvent,r=e.map,o=e.coordinate,s=i.shiftKey?-this.delta_:this.delta_,a=r.getView();WL(a,s,o,this.duration_),i.preventDefault(),t=!0}return!t}}function LD(n){const e=arguments;return function(t){let i=!0;for(let r=0,o=e.length;r<o&&(i=i&&e[r](t),!!i);++r);return i}}const U1e=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},K1e=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),i=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(i):e.contains(i)},nee=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?K1e(n):!0},F1e=J4,iee=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(X0e&&yJ&&e.ctrlKey)},ree=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},z1e=function(n){const e=n.originalEvent;return yJ?e.metaKey:e.ctrlKey},j1e=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},oee=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},v8=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},N1e=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class fM extends dM{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Wl.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Wl.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Wl.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Wl.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function QL(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return{clientX:t/e,clientY:i/e}}class G1e extends fM{constructor(e){super({stopDown:tB}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:LD(ree,N1e);this.condition_=e.onFocusOnly?LD(nee,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,r=t.getEventPixel(QL(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const o=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();dge(o,a.getResolution()),bL(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(s),c=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(o),a[1]-r*Math.sin(o)]);i.animateInternal({center:i.getConstrainedCenter(c),duration:500,easing:U2})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class W1e extends fM{constructor(e){e=e||{},super({stopDown:tB}),this.condition_=e.condition?e.condition:U1e,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!v8(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===zL)return;const r=t.getSize(),o=e.pixel,s=Math.atan2(r[1]/2-o[1],o[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=s-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=s}handleUpEvent(e){return v8(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return v8(e)&&iee(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class Q1e extends oM{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new F1([r])}getGeometry(){return this.geometry_}}const U_={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class v3 extends Nm{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class q1e extends fM{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new Q1e(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??iee,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],o=i[1]-t[1];return r*r+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new v3(U_.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new v3(t?U_.BOXEND:U_.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new v3(U_.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new v3(U_.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new v3(U_.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class Y1e extends q1e{constructor(e){e=e||{};const t=e.condition?e.condition:j1e;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const o=i.rotatedExtentForGeometry(r),s=i.getResolutionForExtentInternal(o),a=i.getResolution()/s;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:U2})}}const Gb={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class V1e extends dM{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return ree(t)&&oee(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==br.KEYDOWN){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==Gb.DOWN||r==Gb.LEFT||r==Gb.RIGHT||r==Gb.UP)){const s=e.map.getView(),a=s.getResolution()*this.pixelDelta_;let c=0,d=0;r==Gb.DOWN?d=-a:r==Gb.LEFT?c=-a:r==Gb.RIGHT?c=a:d=a;const m=[c,d];bL(m,s.getRotation()),P1e(s,m,this.duration_),i.preventDefault(),t=!0}}return!t}}class $1e extends dM{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!z1e(t)&&oee(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==br.KEYDOWN||e.type==br.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const o=e.map,s=r==="+"?this.delta_:-this.delta_,a=o.getView();WL(a,s,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}const H1e=40,Z1e=300;class X1e extends dM{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:F1e;this.condition_=e.onFocusOnly?LD(nee,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==br.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let o=r.deltaY;switch(r.deltaMode){case WheelEvent.DOM_DELTA_LINE:o*=H1e;break;case WheelEvent.DOM_DELTA_PAGE:o*=Z1e;break}if(o===0)return!1;this.lastDelta_=o;const s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=s,!1;this.totalDelta_+=o;const c=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),c),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Cl(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),WL(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class J1e extends fM{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=tB),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],o=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const c=o-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=c}this.lastAngle_=o;const s=e.map,a=s.getView();a.getConstraints().rotation!==zL&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(QL(this.targetPointers))),this.rotating_&&(s.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class eye extends fM{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=tB),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],o=i.clientX-r.clientX,s=i.clientY-r.clientY,a=Math.sqrt(o*o+s*s);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const c=e.map,d=c.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel(QL(this.targetPointers))),c.render(),d.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function tye(n){n=n||{};const e=new gp,t=new R1e(-.005,.05,100);return(n.altShiftDragRotate===void 0||n.altShiftDragRotate)&&e.push(new W1e),(n.doubleClickZoom===void 0||n.doubleClickZoom)&&e.push(new L1e({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan===void 0||n.dragPan)&&e.push(new G1e({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate===void 0||n.pinchRotate)&&e.push(new J1e),(n.pinchZoom===void 0||n.pinchZoom)&&e.push(new eye({duration:n.zoomDuration})),(n.keyboard===void 0||n.keyboard)&&(e.push(new V1e),e.push(new $1e({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom===void 0||n.mouseWheelZoom)&&e.push(new X1e({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom===void 0||n.shiftDragZoom)&&e.push(new Y1e({duration:n.zoomDuration})),e}const Ys={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class see extends Gm{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Ys.OPACITY]=e.opacity!==void 0?e.opacity:1,Ss(typeof t[Ys.OPACITY]=="number","Layer opacity must be a number"),t[Ys.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Ys.Z_INDEX]=e.zIndex,t[Ys.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Ys.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Ys.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Ys.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=Cl(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return wr()}getLayerStatesArray(e){return wr()}getExtent(){return this.get(Ys.EXTENT)}getMaxResolution(){return this.get(Ys.MAX_RESOLUTION)}getMinResolution(){return this.get(Ys.MIN_RESOLUTION)}getMinZoom(){return this.get(Ys.MIN_ZOOM)}getMaxZoom(){return this.get(Ys.MAX_ZOOM)}getOpacity(){return this.get(Ys.OPACITY)}getSourceState(){return wr()}getVisible(){return this.get(Ys.VISIBLE)}getZIndex(){return this.get(Ys.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Ys.EXTENT,e)}setMaxResolution(e){this.set(Ys.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Ys.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Ys.MAX_ZOOM,e)}setMinZoom(e){this.set(Ys.MIN_ZOOM,e)}setOpacity(e){Ss(typeof e=="number","Layer opacity must be a number"),this.set(Ys.OPACITY,e)}setVisible(e){this.set(Ys.VISIBLE,e)}setZIndex(e){this.set(Ys.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Yy={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class iv extends Nm{constructor(e,t){super(e),this.layer=t}}const b8={LAYERS:"layers"};class qC extends see{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(b8.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new gp(i.slice(),{unique:!0}):Ss(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new gp(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(ba),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Go(e,bd.ADD,this.handleLayersAdd_,this),Go(e,bd.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(ba);sM(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const o=t[i];this.registerLayerListeners_(o),this.dispatchEvent(new iv(Yy.ADDLAYER,o))}this.changed()}registerLayerListeners_(e){const t=[Go(e,A2.PROPERTYCHANGE,this.handleLayerChange_,this),Go(e,br.CHANGE,this.handleLayerChange_,this)];e instanceof qC&&t.push(Go(e,Yy.ADDLAYER,this.handleLayerGroupAdd_,this),Go(e,Yy.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[Ur(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new iv(Yy.ADDLAYER,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new iv(Yy.REMOVELAYER,e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new iv(Yy.ADDLAYER,t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=Ur(t);this.listenerKeys_[i].forEach(ba),delete this.listenerKeys_[i],this.dispatchEvent(new iv(Yy.REMOVELAYER,t)),this.changed()}getLayers(){return this.get(b8.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,o=i.length;r<o;++r)this.dispatchEvent(new iv(Yy.REMOVELAYER,i[r]))}this.set(b8.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(s){s.getLayerStatesArray(t)});const r=this.getLayerState();let o=r.zIndex;!e&&r.zIndex===void 0&&(o=0);for(let s=i,a=t.length;s<a;s++){const c=t[s];c.opacity*=r.opacity,c.visible=c.visible&&r.visible,c.maxResolution=Math.min(c.maxResolution,r.maxResolution),c.minResolution=Math.max(c.minResolution,r.minResolution),c.minZoom=Math.max(c.minZoom,r.minZoom),c.maxZoom=Math.min(c.maxZoom,r.maxZoom),r.extent!==void 0&&(c.extent!==void 0?c.extent=Rm(c.extent,r.extent):c.extent=r.extent),c.zIndex===void 0&&(c.zIndex=o)}return t}getSourceState(){return"ready"}}const yp={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class K2 extends see{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Ys.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Ys.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(ba(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Go(e,br.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof Sm?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;if(t.layerStatesArray){if(r=t.layerStatesArray.find(s=>s.layer===this),!r)return!1}else r=this.getLayerState();const o=this.getExtent();return qL(r,t.viewState)&&(!o||ql(o,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const i=e instanceof Sm?e.getViewStateAndExtent():e;let r=t(i);return Array.isArray(r)||(r=[r]),r}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Ys.MAP,e)}getMapInternal(){return this.get(Ys.MAP)}setMap(e){this.mapPrecomposeKey_&&(ba(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(ba(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Go(e,yp.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Go(this,br.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,i=this.getLayerState(!1);Ss(!t.some(r=>r.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(i)}setSource(e){this.set(Ys.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function qL(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}function aee(n,e,t=0,i=n.length-1,r=nye){for(;i>t;){if(i-t>600){const c=i-t+1,d=e-t+1,m=Math.log(c),v=.5*Math.exp(2*m/3),M=.5*Math.sqrt(m*v*(c-v)/c)*(d-c/2<0?-1:1),B=Math.max(t,Math.floor(e-d*v/c+M)),P=Math.min(i,Math.floor(e+(c-d)*v/c+M));aee(n,e,B,P,r)}const o=n[e];let s=t,a=i;for(b3(n,t,e),r(n[i],o)>0&&b3(n,t,i);s<a;){for(b3(n,s,a),s++,a--;r(n[s],o)<0;)s++;for(;r(n[a],o)>0;)a--}r(n[t],o)===0?b3(n,t,a):(a++,b3(n,a,i)),a<=e&&(t=a+1),e<=a&&(i=a-1)}}function b3(n,e,t){const i=n[e];n[e]=n[t],n[t]=i}function nye(n,e){return n<e?-1:n>e?1:0}let lee=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!cw(e,t))return i;const r=this.toBBox,o=[];for(;t;){for(let s=0;s<t.children.length;s++){const a=t.children[s],c=t.leaf?r(a):a;cw(e,c)&&(t.leaf?i.push(a):_8(e,c)?this._all(a,i):o.push(a))}t=o.pop()}return i}collides(e){let t=this.data;if(!cw(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const o=t.children[r],s=t.leaf?this.toBBox(o):o;if(cw(e,s)){if(t.leaf||_8(e,s))return!0;i.push(o)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=bx([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),o=[],s=[];let a,c,d;for(;i||o.length;){if(i||(i=o.pop(),c=o[o.length-1],a=s.pop(),d=!0),i.leaf){const m=iye(e,i.children,t);if(m!==-1)return i.children.splice(m,1),o.push(i),this._condense(o),this}!d&&!i.leaf&&_8(i,r)?(o.push(i),s.push(a),a=0,c=i,i=i.children[0]):c?(a++,i=c.children[a],d=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const o=i-t+1;let s=this._maxEntries,a;if(o<=s)return a=bx(e.slice(t,i+1)),K_(a,this.toBBox),a;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),a=bx([]),a.leaf=!1,a.height=r;const c=Math.ceil(o/s),d=c*Math.ceil(Math.sqrt(s));Hj(e,t,i,d,this.compareMinX);for(let m=t;m<=i;m+=d){const v=Math.min(m+d-1,i);Hj(e,m,v,c,this.compareMinY);for(let M=m;M<=v;M+=c){const B=Math.min(M+c-1,v);a.children.push(this._build(e,M,B,r-1))}}return K_(a,this.toBBox),a}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let o=1/0,s=1/0,a;for(let c=0;c<t.children.length;c++){const d=t.children[c],m=C8(d),v=sye(e,d)-m;v<s?(s=v,o=m<o?m:o,a=d):v===s&&m<o&&(o=m,a=d)}t=a||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),o=[],s=this._chooseSubtree(r,this.data,t,o);for(s.children.push(e),Y3(s,r);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(r,o,t)}_split(e,t){const i=e[t],r=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,r);const s=this._chooseSplitIndex(i,o,r),a=bx(i.children.splice(s,i.children.length-s));a.height=i.height,a.leaf=i.leaf,K_(i,this.toBBox),K_(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,t){this.data=bx([e,t]),this.data.height=e.height+1,this.data.leaf=!1,K_(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,o=1/0,s=1/0;for(let a=t;a<=i-t;a++){const c=q3(e,0,a,this.toBBox),d=q3(e,a,i,this.toBBox),m=aye(c,d),v=C8(c)+C8(d);m<o?(o=m,r=a,s=v<s?v:s):m===o&&v<s&&(s=v,r=a)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:rye,o=e.leaf?this.compareMinY:oye,s=this._allDistMargin(e,t,i,r),a=this._allDistMargin(e,t,i,o);s<a&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const o=this.toBBox,s=q3(e,0,t,o),a=q3(e,i-t,i,o);let c=uw(s)+uw(a);for(let d=t;d<i-t;d++){const m=e.children[d];Y3(s,e.leaf?o(m):m),c+=uw(s)}for(let d=i-t-1;d>=t;d--){const m=e.children[d];Y3(a,e.leaf?o(m):m),c+=uw(a)}return c}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)Y3(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():K_(e[t],this.toBBox)}};function iye(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function K_(n,e){q3(n,0,n.children.length,e,n)}function q3(n,e,t,i,r){r||(r=bx(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let o=e;o<t;o++){const s=n.children[o];Y3(r,n.leaf?i(s):s)}return r}function Y3(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function rye(n,e){return n.minX-e.minX}function oye(n,e){return n.minY-e.minY}function C8(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function uw(n){return n.maxX-n.minX+(n.maxY-n.minY)}function sye(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function aye(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),o=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,o-i)}function _8(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function cw(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function bx(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Hj(n,e,t,i,r){const o=[e,t];for(;o.length;){if(t=o.pop(),e=o.pop(),t-e<=i)continue;const s=e+Math.ceil((t-e)/i/2)*i;aee(n,s,e,t,r),o.push(e,s,s,t)}}const YL=[NaN,NaN,NaN,0];let x8;function lye(){return x8||(x8=_l(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),x8}const uye=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,cye=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Aye=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,hye=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function Aw(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function v4(n){throw new Error('failed to parse "'+n+'" as color')}function uee(n){if(n.toLowerCase().startsWith("rgb")){const o=n.match(cye)||n.match(uye)||n.match(Aye);if(o){const s=o[4],a=100/255;return[Cl(Aw(o[1],a)+.5|0,0,255),Cl(Aw(o[2],a)+.5|0,0,255),Cl(Aw(o[3],a)+.5|0,0,255),s!==void 0?Cl(Aw(s,100),0,1):1]}v4(n)}if(n.startsWith("#")){if(hye.test(n)){const o=n.substring(1),s=o.length<=4?1:2,a=[0,0,0,255];for(let c=0,d=o.length;c<d;c+=s){let m=parseInt(o.substring(c,c+s),16);s===1&&(m+=m<<4),a[c/s]=m}return a[3]=a[3]/255,a}v4(n)}const e=lye();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&v4(n));const i=e.fillStyle;if(i.startsWith("#")||i.startsWith("rgba"))return uee(i);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const r=Array.from(e.getImageData(0,0,1,1).data);return r[3]=nB(r[3]/255,3),r}function dye(n){return typeof n=="string"?n:$L(n)}const fye=1024,C3={};let M8=0;function pye(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function w8(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function S8(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function E8(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function B8(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function Zj(n){const e=E8(n[0]),t=E8(n[1]),i=E8(n[2]),r=B8(e*.222488403+t*.716873169+i*.06060791),o=500*(B8(e*.452247074+t*.399439023+i*.148375274)-r),s=200*(r-B8(e*.016863605+t*.117638439+i*.865350722)),a=Math.atan2(s,o)*(180/Math.PI);return[116*r-16,Math.sqrt(o*o+s*s),a<0?a+360:a,n[3]]}function mye(n){const e=(n[0]+16)/116,t=n[1],i=n[2]*Math.PI/180,r=S8(e),o=S8(e+t/500*Math.cos(i)),s=S8(e-t/200*Math.sin(i)),a=w8(o*3.021973625-r*1.617392459-s*.404875592),c=w8(o*-.943766287+r*1.916279586+s*.027607165),d=w8(o*.069407491-r*.22898585+s*1.159737864);return[Cl(a+.5|0,0,255),Cl(c+.5|0,0,255),Cl(d+.5|0,0,255),n[3]]}function VL(n){if(n==="none")return YL;if(C3.hasOwnProperty(n))return C3[n];if(M8>=fye){let t=0;for(const i in C3)(t++&3)===0&&(delete C3[i],--M8)}const e=uee(n);e.length!==4&&v4(n);for(const t of e)isNaN(t)&&v4(n);return C3[n]=e,++M8,e}function f2(n){return Array.isArray(n)?n:VL(n)}function $L(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const r=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+i+","+r+")"}function Xj(n){return n[0]>0&&n[1]>0}function gye(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function $A(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}let YC=0;const Bh=1<<YC++,jo=1<<YC++,Cd=1<<YC++,Em=1<<YC++,DC=1<<YC++,V3=1<<YC++,hw=Math.pow(2,YC)-1,HL={[Bh]:"boolean",[jo]:"number",[Cd]:"string",[Em]:"color",[DC]:"number[]",[V3]:"size"},yye=Object.keys(HL).map(Number).sort(bg);function vye(n){return n in HL}function $3(n){const e=[];for(const t of yye)H3(n,t)&&e.push(HL[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function H3(n,e){return(n&e)===e}function Vy(n,e){return n===e}class cc{constructor(e,t){if(!vye(e))throw new Error(`literal expressions must have a specific type, got ${$3(e)}`);this.type=e,this.value=t}}class bye{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function cee(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function mA(n,e,t){switch(typeof n){case"boolean":{if(Vy(e,Cd))return new cc(Cd,n?"true":"false");if(!H3(e,Bh))throw new Error(`got a boolean, but expected ${$3(e)}`);return new cc(Bh,n)}case"number":{if(Vy(e,V3))return new cc(V3,$A(n));if(Vy(e,Bh))return new cc(Bh,!!n);if(Vy(e,Cd))return new cc(Cd,n.toString());if(!H3(e,jo))throw new Error(`got a number, but expected ${$3(e)}`);return new cc(jo,n)}case"string":{if(Vy(e,Em))return new cc(Em,VL(n));if(Vy(e,Bh))return new cc(Bh,!!n);if(!H3(e,Cd))throw new Error(`got a string, but expected ${$3(e)}`);return new cc(Cd,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return Tye(n,e,t);for(const i of n)if(typeof i!="number")throw new Error("expected an array of numbers");if(Vy(e,V3)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new cc(V3,n)}if(Vy(e,Em)){if(n.length===3)return new cc(Em,[...n,1]);if(n.length===4)return new cc(Em,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!H3(e,DC))throw new Error(`got an array of numbers, but expected ${$3(e)}`);return new cc(DC,n)}const vn={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},Cye={[vn.Get]:xr(io(1,1/0),Jj),[vn.Var]:xr(io(1,1),_ye),[vn.Has]:xr(io(1,1/0),Jj),[vn.Id]:xr(xye,F_),[vn.Concat]:xr(io(2,1/0),bs(Cd)),[vn.GeometryType]:xr(Mye,F_),[vn.LineMetric]:xr(F_),[vn.Resolution]:xr(O8,F_),[vn.Zoom]:xr(O8,F_),[vn.Time]:xr(O8,F_),[vn.Any]:xr(io(2,1/0),bs(Bh)),[vn.All]:xr(io(2,1/0),bs(Bh)),[vn.Not]:xr(io(1,1),bs(Bh)),[vn.Equal]:xr(io(2,2),bs(hw)),[vn.NotEqual]:xr(io(2,2),bs(hw)),[vn.GreaterThan]:xr(io(2,2),bs(jo)),[vn.GreaterThanOrEqualTo]:xr(io(2,2),bs(jo)),[vn.LessThan]:xr(io(2,2),bs(jo)),[vn.LessThanOrEqualTo]:xr(io(2,2),bs(jo)),[vn.Multiply]:xr(io(2,1/0),eN),[vn.Coalesce]:xr(io(2,1/0),eN),[vn.Divide]:xr(io(2,2),bs(jo)),[vn.Add]:xr(io(2,1/0),bs(jo)),[vn.Subtract]:xr(io(2,2),bs(jo)),[vn.Clamp]:xr(io(3,3),bs(jo)),[vn.Mod]:xr(io(2,2),bs(jo)),[vn.Pow]:xr(io(2,2),bs(jo)),[vn.Abs]:xr(io(1,1),bs(jo)),[vn.Floor]:xr(io(1,1),bs(jo)),[vn.Ceil]:xr(io(1,1),bs(jo)),[vn.Round]:xr(io(1,1),bs(jo)),[vn.Sin]:xr(io(1,1),bs(jo)),[vn.Cos]:xr(io(1,1),bs(jo)),[vn.Atan]:xr(io(1,2),bs(jo)),[vn.Sqrt]:xr(io(1,1),bs(jo)),[vn.Match]:xr(io(4,1/0),tN,Sye),[vn.Between]:xr(io(3,3),bs(jo)),[vn.Interpolate]:xr(io(6,1/0),tN,Eye),[vn.Case]:xr(io(3,1/0),wye,Bye),[vn.In]:xr(io(2,2),Oye),[vn.Number]:xr(io(1,1/0),bs(hw)),[vn.String]:xr(io(1,1/0),bs(hw)),[vn.Array]:xr(io(1,1/0),bs(jo)),[vn.Color]:xr(io(1,4),bs(jo)),[vn.Band]:xr(io(1,3),bs(jo)),[vn.Palette]:xr(io(2,2),Iye),[vn.ToString]:xr(io(1,1),bs(Bh|jo|Cd|Em))};function Jj(n,e,t){const i=n.length-1,r=new Array(i);for(let o=0;o<i;++o){const s=n[o+1];switch(typeof s){case"number":{r[o]=new cc(jo,s);break}case"string":{r[o]=new cc(Cd,s);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${s}`)}o===0&&t.properties.add(String(s))}return r}function _ye(n,e,t){const i=n[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return t.variables.add(i),[new cc(Cd,i)]}function xye(n,e,t){t.featureId=!0}function Mye(n,e,t){t.geometryType=!0}function O8(n,e,t){t.mapState=!0}function F_(n,e,t){const i=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function io(n,e){return function(t,i,r){const o=t[0],s=t.length-1;if(n===e){if(s!==n){const a=n===1?"":"s";throw new Error(`expected ${n} argument${a} for ${o}, got ${s}`)}}else if(s<n||s>e){const a=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${a} arguments for ${o}, got ${s}`)}}}function eN(n,e,t){const i=n.length-1,r=new Array(i);for(let o=0;o<i;++o){const s=mA(n[o+1],e,t);r[o]=s}return r}function bs(n){return function(e,t,i){const r=e.length-1,o=new Array(r);for(let s=0;s<r;++s){const a=mA(e[s+1],n,i);o[s]=a}return o}}function wye(n,e,t){const i=n[0],r=n.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${r} instead`)}function tN(n,e,t){const i=n[0],r=n.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${r} instead`)}function Sye(n,e,t){const i=n.length-1,r=Cd|jo|Bh,o=mA(n[1],r,t),s=mA(n[n.length-1],e,t),a=new Array(i-2);for(let c=0;c<i-2;c+=2){try{const d=mA(n[c+2],o.type,t);a[c]=d}catch(d){throw new Error(`failed to parse argument ${c+1} of match expression: ${d.message}`)}try{const d=mA(n[c+3],s.type,t);a[c+1]=d}catch(d){throw new Error(`failed to parse argument ${c+2} of match expression: ${d.message}`)}}return[o,...a,s]}function Eye(n,e,t){const i=n[1];let r;switch(i[0]){case"linear":r=1;break;case"exponential":const c=i[1];if(typeof c!="number"||c<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(c)} instead`);r=c;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const o=new cc(jo,r);let s;try{s=mA(n[2],jo,t)}catch(c){throw new Error(`failed to parse argument 1 in interpolate expression: ${c.message}`)}const a=new Array(n.length-3);for(let c=0;c<a.length;c+=2){try{const d=mA(n[c+3],jo,t);a[c]=d}catch(d){throw new Error(`failed to parse argument ${c+2} for interpolate expression: ${d.message}`)}try{const d=mA(n[c+4],e,t);a[c+1]=d}catch(d){throw new Error(`failed to parse argument ${c+3} for interpolate expression: ${d.message}`)}}return[o,s,...a]}function Bye(n,e,t){const i=mA(n[n.length-1],e,t),r=new Array(n.length-1);for(let o=0;o<r.length-1;o+=2){try{const s=mA(n[o+1],Bh,t);r[o]=s}catch(s){throw new Error(`failed to parse argument ${o} of case expression: ${s.message}`)}try{const s=mA(n[o+2],i.type,t);r[o+1]=s}catch(s){throw new Error(`failed to parse argument ${o+1} of case expression: ${s.message}`)}}return r[r.length-1]=i,r}function Oye(n,e,t){let i=n[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],r=Cd}else r=jo;const o=new Array(i.length);for(let a=0;a<o.length;a++)try{const c=mA(i[a],r,t);o[a]=c}catch(c){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${c.message}`)}return[mA(n[1],r,t),...o]}function Iye(n,e,t){let i;try{i=mA(n[1],jo,t)}catch(s){throw new Error(`failed to parse first argument in palette expression: ${s.message}`)}const r=n[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const o=new Array(r.length);for(let s=0;s<o.length;s++){let a;try{a=mA(r[s],Em,t)}catch(c){throw new Error(`failed to parse color at index ${s} in palette expression: ${c.message}`)}if(!(a instanceof cc))throw new Error(`the palette color at index ${s} must be a literal value`);o[s]=a}return[i,...o]}function xr(...n){return function(e,t,i){const r=e[0];let o;for(let s=0;s<n.length;s++){const a=n[s](e,t,i);if(s==n.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");o=a}}return new bye(t,r,...o)}}function Tye(n,e,t){const i=n[0],r=Cye[i];if(!r)throw new Error(`unknown operator: ${i}`);return r(n,e,t)}function Aee(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return Aee(n.getGeometries()[0]);default:return""}}function hee(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function W1(n,e,t){const i=mA(n,e,t);return Lm(i)}function Lm(n,e){if(n instanceof cc){if(n.type===Em&&typeof n.value=="string"){const i=VL(n.value);return function(){return i}}return function(){return n.value}}const t=n.operator;switch(t){case vn.Number:case vn.String:case vn.Coalesce:return kye(n);case vn.Get:case vn.Var:case vn.Has:return Dye(n);case vn.Id:return i=>i.featureId;case vn.GeometryType:return i=>i.geometryType;case vn.Concat:{const i=n.args.map(r=>Lm(r));return r=>"".concat(...i.map(o=>o(r).toString()))}case vn.Resolution:return i=>i.resolution;case vn.Any:case vn.All:case vn.Between:case vn.In:case vn.Not:return Pye(n);case vn.Equal:case vn.NotEqual:case vn.LessThan:case vn.LessThanOrEqualTo:case vn.GreaterThan:case vn.GreaterThanOrEqualTo:return Rye(n);case vn.Multiply:case vn.Divide:case vn.Add:case vn.Subtract:case vn.Clamp:case vn.Mod:case vn.Pow:case vn.Abs:case vn.Floor:case vn.Ceil:case vn.Round:case vn.Sin:case vn.Cos:case vn.Atan:case vn.Sqrt:return Lye(n);case vn.Case:return Uye(n);case vn.Match:return Kye(n);case vn.Interpolate:return Fye(n);case vn.ToString:return zye(n);default:throw new Error(`Unsupported operator ${t}`)}}function kye(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=Lm(n.args[o]);switch(t){case vn.Coalesce:return o=>{for(let s=0;s<i;++s){const a=r[s](o);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case vn.Number:case vn.String:return o=>{for(let s=0;s<i;++s){const a=r[s](o);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function Dye(n,e){const i=n.args[0].value;switch(n.operator){case vn.Get:return r=>{const o=n.args;let s=r.properties[i];for(let a=1,c=o.length;a<c;++a){const m=o[a].value;s=s[m]}return s};case vn.Var:return r=>r.variables[i];case vn.Has:return r=>{const o=n.args;if(!(i in r.properties))return!1;let s=r.properties[i];for(let a=1,c=o.length;a<c;++a){const m=o[a].value;if(!s||!Object.hasOwn(s,m))return!1;s=s[m]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function Rye(n,e){const t=n.operator,i=Lm(n.args[0]),r=Lm(n.args[1]);switch(t){case vn.Equal:return o=>i(o)===r(o);case vn.NotEqual:return o=>i(o)!==r(o);case vn.LessThan:return o=>i(o)<r(o);case vn.LessThanOrEqualTo:return o=>i(o)<=r(o);case vn.GreaterThan:return o=>i(o)>r(o);case vn.GreaterThanOrEqualTo:return o=>i(o)>=r(o);default:throw new Error(`Unsupported comparison operator ${t}`)}}function Pye(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=Lm(n.args[o]);switch(t){case vn.Any:return o=>{for(let s=0;s<i;++s)if(r[s](o))return!0;return!1};case vn.All:return o=>{for(let s=0;s<i;++s)if(!r[s](o))return!1;return!0};case vn.Between:return o=>{const s=r[0](o),a=r[1](o),c=r[2](o);return s>=a&&s<=c};case vn.In:return o=>{const s=r[0](o);for(let a=1;a<i;++a)if(s===r[a](o))return!0;return!1};case vn.Not:return o=>!r[0](o);default:throw new Error(`Unsupported logical operator ${t}`)}}function Lye(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=Lm(n.args[o]);switch(t){case vn.Multiply:return o=>{let s=1;for(let a=0;a<i;++a)s*=r[a](o);return s};case vn.Divide:return o=>r[0](o)/r[1](o);case vn.Add:return o=>{let s=0;for(let a=0;a<i;++a)s+=r[a](o);return s};case vn.Subtract:return o=>r[0](o)-r[1](o);case vn.Clamp:return o=>{const s=r[0](o),a=r[1](o);if(s<a)return a;const c=r[2](o);return s>c?c:s};case vn.Mod:return o=>r[0](o)%r[1](o);case vn.Pow:return o=>Math.pow(r[0](o),r[1](o));case vn.Abs:return o=>Math.abs(r[0](o));case vn.Floor:return o=>Math.floor(r[0](o));case vn.Ceil:return o=>Math.ceil(r[0](o));case vn.Round:return o=>Math.round(r[0](o));case vn.Sin:return o=>Math.sin(r[0](o));case vn.Cos:return o=>Math.cos(r[0](o));case vn.Atan:return i===2?o=>Math.atan2(r[0](o),r[1](o)):o=>Math.atan(r[0](o));case vn.Sqrt:return o=>Math.sqrt(r[0](o));default:throw new Error(`Unsupported numeric operator ${t}`)}}function Uye(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=Lm(n.args[r]);return r=>{for(let o=0;o<t-1;o+=2)if(i[o](r))return i[o+1](r);return i[t-1](r)}}function Kye(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=Lm(n.args[r]);return r=>{const o=i[0](r);for(let s=1;s<t-1;s+=2)if(o===i[s](r))return i[s+1](r);return i[t-1](r)}}function Fye(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=Lm(n.args[r]);return r=>{const o=i[0](r),s=i[1](r);let a,c;for(let d=2;d<t;d+=2){const m=i[d](r);let v=i[d+1](r);const M=Array.isArray(v);if(M&&(v=pye(v)),m>=s)return d===2?v:M?jye(o,s,a,c,m,v):Z3(o,s,a,c,m,v);a=m,c=v}return c}}function zye(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=Lm(n.args[o]);if(t===vn.ToString)return o=>{const s=r[0](o);return n.args[0].type===Em?$L(s):s.toString()};throw new Error(`Unsupported convert operator ${t}`)}function Z3(n,e,t,i,r,o){const s=r-t;if(s===0)return i;const a=e-t,c=n===1?a/s:(Math.pow(n,a)-1)/(Math.pow(n,s)-1);return i+c*(o-i)}function jye(n,e,t,i,r,o){if(r-t===0)return i;const a=Zj(i),c=Zj(o);let d=c[2]-a[2];d>180?d-=360:d<-180&&(d+=360);const m=[Z3(n,e,t,a[0],r,c[0]),Z3(n,e,t,a[1],r,c[1]),a[2]+Z3(n,e,t,0,r,d),Z3(n,e,t,i[3],r,o[3])];return mye(m)}const Ni={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class ZL extends aM{constructor(e,t,i,r){super(),this.extent=e,this.pixelRatio_=i,this.resolution=t,this.state=typeof r=="function"?Ni.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(br.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Ni.IDLE&&this.loader){this.state=Ni.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;h2(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||ege&&i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=Ni.LOADED}).catch(i=>{this.state=Ni.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function Nye(n,e,t){const i=n;let r=!0,o=!1,s=!1;const a=[uE(i,br.LOAD,function(){s=!0,o||e()})];return i.src&&vJ?(o=!0,i.decode().then(function(){r&&e()}).catch(function(c){r&&(s?e():t())})):a.push(uE(i,br.ERROR,t)),function(){r=!1,a.forEach(ba)}}function Gye(n,e){return new Promise((t,i)=>{function r(){s(),t(n)}function o(){s(),i(new Error("Image load error"))}function s(){n.removeEventListener("load",r),n.removeEventListener("error",o)}n.addEventListener("load",r),n.addEventListener("error",o)})}function Wye(n,e){return e&&(n.src=e),n.src&&vJ?new Promise((t,i)=>n.decode().then(()=>t(n)).catch(r=>n.complete&&n.width?t(n):i(r))):Gye(n)}class Qye{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];(e++&3)===0&&!i.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,i){const r=I8(e,t,i);return r in this.cache_?this.cache_[r]:null}getPattern(e,t,i){const r=I8(e,t,i);return r in this.patternCache_?this.patternCache_[r]:null}set(e,t,i,r,o){const s=I8(e,t,i),a=s in this.cache_;this.cache_[s]=r,o&&(r.getImageState()===Ni.IDLE&&r.load(),r.getImageState()===Ni.LOADING?r.ready().then(()=>{this.patternCache_[s]=mE().createPattern(r.getImage(1),"repeat")}):this.patternCache_[s]=mE().createPattern(r.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function I8(n,e,t){const i=t?f2(t):"null";return e+":"+n+":"+i}const vp=new Qye;let _3=null;class dee extends aM{constructor(e,t,i,r,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=o,this.imageState_=r===void 0?Ni.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Ni.LOADED){_3||(_3=_l(1,1,void 0,{willReadFrequently:!0})),_3.drawImage(this.image_,0,0);try{_3.getImageData(0,0,1,1),this.tainted_=!1}catch{_3=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(br.CHANGE)}handleImageError_(){this.imageState_=Ni.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Ni.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=_l(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Ni.IDLE){this.image_||this.initializeImage_(),this.imageState_=Ni.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Wye(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Ni.LOADED)return;const t=this.image_,i=_l(Math.ceil(t.width*e),Math.ceil(t.height*e)),r=i.canvas;i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=dye(this.color_),i.fillRect(0,0,r.width/e,r.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Ni.LOADED||this.imageState_===Ni.ERROR)e();else{const t=()=>{(this.imageState_===Ni.LOADED||this.imageState_===Ni.ERROR)&&(this.removeEventListener(br.CHANGE,t),e())};this.addEventListener(br.CHANGE,t)}})),this.ready_}}function gE(n,e,t,i,r,o){let s=e===void 0?void 0:vp.get(e,t,r);return s||(s=new dee(n,n&&"src"in n?n.src||void 0:e,t,i,r),vp.set(e,t,r,s,o)),o&&s&&!vp.getPattern(e,t,r)&&vp.set(e,t,r,s,o),s}function ug(n){return n?Array.isArray(n)?$L(n):typeof n=="object"&&"src"in n?qye(n):n:null}function qye(n){if(!n.offset||!n.size)return vp.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=vp.getPattern(e,void 0,n.color);if(t)return t;const i=vp.get(n.src,"anonymous",null);if(i.getImageState()!==Ni.LOADED)return null;const r=_l(n.size[0],n.size[1]);return r.drawImage(i.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),gE(r.canvas,e,void 0,Ni.LOADED,n.color,!0),vp.getPattern(e,void 0,n.color)}const fee="10px sans-serif",_d="#000",p2="round",D1=[],R1=0,m2="round",r5=10,o5="#000",s5="center",yE="middle",sC=[0,0,0,0],a5=1,Zb=new Gm;let x3=null,nN;const UD={},Yye=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function Vye(n,e,t){return`${n} ${e} 16px "${t}"`}const $ye=(function(){let e,t;async function i(o){await t.ready;const s=await t.load(o);if(s.length===0)return!1;const a=PD(o),c=a.families[0].toLowerCase(),d=a.weight;return s.some(m=>{const v=m.family.replace(/^['"]|['"]$/g,"").toLowerCase(),M=RD[m.weight]||m.weight;return v===c&&m.style===a.style&&M==d})}async function r(){await t.ready;let o=!0;const s=Zb.getProperties(),a=Object.keys(s).filter(c=>s[c]<100);for(let c=a.length-1;c>=0;--c){const d=a[c];let m=s[d];m<100&&(await i(d)?(sM(UD),Zb.set(d,100)):(m+=10,Zb.set(d,m,!0),m<100&&(o=!1)))}e=void 0,o||(e=setTimeout(r,100))}return async function(o){t||(t=VA?self.fonts:document.fonts);const s=PD(o);if(!s)return;const a=s.families;let c=!1;for(const d of a){if(Yye.has(d))continue;const m=Vye(s.style,s.weight,d);Zb.get(m)===void 0&&(Zb.set(m,0,!0),c=!0)}c&&(clearTimeout(e),e=setTimeout(r,100))}})(),Hye=(function(){let n;return function(e){let t=UD[e];if(t==null){if(VA){const i=PD(e),r=pee(e,"g");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);UD[e]=t}return t}})();function pee(n,e){return x3||(x3=_l(1,1)),n!=nN&&(x3.font=n,nN=x3.font),x3.measureText(e)}function mee(n,e){return pee(n,e).width}function iN(n,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((r,o)=>Math.max(r,mee(n,o)),0);return t[e]=i,i}function Zye(n,e){const t=[],i=[],r=[];let o=0,s=0,a=0,c=0;for(let d=0,m=e.length;d<=m;d+=2){const v=e[d];if(v===`
`||d===m){o=Math.max(o,s),r.push(s),s=0,a+=c,c=0;continue}const M=e[d+1]||n.font,B=mee(M,v);t.push(B),s+=B;const P=Hye(M);i.push(P),c=Math.max(c,P)}return{width:o,height:a,widths:t,heights:i,lineWidths:r}}function Xye(n,e,t,i,r,o,s,a,c,d,m){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=v=>v.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),i.contextInstructions?(n.translate(c,d),n.scale(m[0],m[1]),Jye(i,n)):m[0]<0||m[1]<0?(n.translate(c,d),n.scale(m[0],m[1]),n.drawImage(i,r,o,s,a,0,0,s,a)):n.drawImage(i,r,o,s,a,c,d,s*m[0],a*m[1]),n.restore()}function Jye(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class fB{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=$A(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new fB({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return wr()}getImage(e){return wr()}getHitDetectionImage(){return wr()}getPixelRatio(e){return 1}getImageState(){return wr()}getImageSize(){return wr()}getOrigin(){return wr()}getSize(){return wr()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=$A(e)}listenImageChange(e){wr()}load(){wr()}unlistenImageChange(e){wr()}ready(){return Promise.resolve()}}class pB extends fB{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Ni.LOADING:Ni.LOADED,this.imageState_===Ni.LOADING&&this.ready().then(()=>this.imageState_=Ni.LOADED),this.render()}clone(){const e=this.getScale(),t=new pB({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let r=vp.get(i,null,null)?.getImage(1);if(!r){const o=this.renderOptions_,s=Math.ceil(o.size*e),a=_l(s,s);this.draw_(o,a,e),r=a.canvas,vp.set(i,null,null,new dee(r,void 0,null,Ni.LOADED,null))}return r}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius,o=this.radius2_===void 0?r:this.radius2_;if(r<o){const te=r;r=o,o=te}const s=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/s,c=o*Math.sin(a),d=Math.sqrt(o*o-c*c),m=r-d,v=Math.sqrt(c*c+m*m),M=v/c;if(e==="miter"&&M<=i)return M*t;const B=t/2/M,P=t/2*(m/v),z=Math.sqrt((r+B)*(r+B)+P*P)-r;if(this.radius2_===void 0||e==="bevel")return z*2;const V=r*Math.sin(a),Z=Math.sqrt(r*r-V*V),X=o-Z,ie=Math.sqrt(V*V+X*X)/V;if(ie<=i){const te=ie*t/2-o-r;return 2*Math.max(z,te)}return z*2}createRenderOptions(){let e=p2,t=m2,i=0,r=null,o=0,s,a=0;this.stroke_&&(s=ug(this.stroke_.getColor()??o5),a=this.stroke_.getWidth()??a5,r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??m2,e=this.stroke_.getLineCap()??p2,i=this.stroke_.getMiterLimit()??r5);const c=this.calculateLineJoinSize_(t,a,i),d=Math.max(this.radius,this.radius2_||0),m=Math.ceil(2*d+c);return{strokeStyle:s,strokeWidth:a,size:m,lineCap:e,lineDash:r,lineDashOffset:o,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=_d),t.fillStyle=ug(r),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),r=0;typeof i=="string"&&(i=f2(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0&&(t=_l(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const o=this.angle_-Math.PI/2,s=2*Math.PI/t;for(let a=0;a<t;a++){const c=o+a*s,d=a%2===0?i:r;e.lineTo(d*Math.cos(c),d*Math.sin(c))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=_d,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class pM extends pB{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new pM({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class cg{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new cg({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=gE(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===Ni.IDLE&&t.load(),t.getImageState()===Ni.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Ur(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:f2(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function rN(n,e,t,i){return t!==void 0&&i!==void 0?[t/n,i/e]:t!==void 0?t/n:i!==void 0?i/e:1}class g2 extends fB{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,o=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:o,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const s=e.img!==void 0?e.img:null;let a=e.src;Ss(!(a!==void 0&&s),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&s&&(a=s.src||Ur(s)),Ss(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Ss(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let c;if(e.src!==void 0?c=Ni.IDLE:s!==void 0&&("complete"in s?s.complete?c=s.src?Ni.LOADED:Ni.IDLE:c=Ni.LOADING:c=Ni.LOADED),this.color_=e.color!==void 0?f2(e.color):null,this.iconImage_=gE(s,a,this.crossOrigin_,c,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let d,m;if(e.size)[d,m]=e.size;else{const v=this.getImage(1);if(v.width&&v.height)d=v.width,m=v.height;else if(v instanceof HTMLImageElement){this.initialOptions_=e;const M=()=>{if(this.unlistenImageChange(M),!this.initialOptions_)return;const B=this.iconImage_.getSize();this.setScale(rN(B[0],B[1],e.width,e.height))};this.listenImageChange(M);return}}d!==void 0&&this.setScale(rN(d,m,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new g2({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=gE(null,e,this.crossOrigin_,Ni.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Ni.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Ni.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(br.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(br.CHANGE,e)}ready(){return this.iconImage_.ready()}}class pv{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new pv({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class ff{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=oN,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new ff({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=oN,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function eve(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(Ss(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let T8=null;function gee(n,e){if(!T8){const t=new cg({color:"rgba(255,255,255,0.4)"}),i=new pv({color:"#3399CC",width:1.25});T8=[new ff({image:new pM({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return T8}function oN(n){return n.getGeometry()}const tve="#333";let yee=class vee{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=$A(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new cg({color:tve}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new vee({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof cg?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=$A(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}};function nve(n){return!0}function ive(n){const e=cee(),t=rve(n,e),i=hee();return function(r,o){if(i.properties=r.getPropertiesInternal(),i.resolution=o,e.featureId){const s=r.getId();s!==void 0?i.featureId=s:i.featureId=null}return e.geometryType&&(i.geometryType=Aee(r.getGeometry())),t(i)}}function sN(n){const e=cee(),t=n.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=KD(n[s],e);const r=hee(),o=new Array(t);return function(s,a){if(r.properties=s.getPropertiesInternal(),r.resolution=a,e.featureId){const d=s.getId();d!==void 0?r.featureId=d:r.featureId=null}let c=0;for(let d=0;d<t;++d){const m=i[d](r);m&&(o[c]=m,c+=1)}return o.length=c,o}}function rve(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r){const o=n[r],s="filter"in o?W1(o.filter,Bh,e):nve;let a;if(Array.isArray(o.style)){const c=o.style.length;a=new Array(c);for(let d=0;d<c;++d)a[d]=KD(o.style[d],e)}else a=[KD(o.style,e)];i[r]={filter:s,styles:a}}return function(r){const o=[];let s=!1;for(let a=0;a<t;++a){const c=i[a].filter;if(c(r)&&!(n[a].else&&s)){s=!0;for(const d of i[a].styles){const m=d(r);m&&o.push(m)}}}return o}}function KD(n,e){const t=l5(n,"",e),i=u5(n,"",e),r=ove(n,e),o=sve(n,e),s=wd(n,"z-index",e);if(!t&&!i&&!r&&!o&&!Ov(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const a=new ff;return function(c){let d=!0;if(t){const m=t(c);m&&(d=!1),a.setFill(m)}if(i){const m=i(c);m&&(d=!1),a.setStroke(m)}if(r){const m=r(c);m&&(d=!1),a.setText(m)}if(o){const m=o(c);m&&(d=!1),a.setImage(m)}return s&&a.setZIndex(s(c)),d?null:a}}function l5(n,e,t){let i;if(e+"fill-pattern-src"in n)i=cve(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return o=>null;i=XL(n,e+"fill-color",t)}if(!i)return null;const r=new cg;return function(o){const s=i(o);return s===YL?null:(r.setColor(s),r)}}function u5(n,e,t){const i=wd(n,e+"stroke-width",t),r=XL(n,e+"stroke-color",t);if(!i&&!r)return null;const o=w1(n,e+"stroke-line-cap",t),s=w1(n,e+"stroke-line-join",t),a=bee(n,e+"stroke-line-dash",t),c=wd(n,e+"stroke-line-dash-offset",t),d=wd(n,e+"stroke-miter-limit",t),m=new pv;return function(v){if(r){const M=r(v);if(M===YL)return null;m.setColor(M)}if(i&&m.setWidth(i(v)),o){const M=o(v);if(M!=="butt"&&M!=="round"&&M!=="square")throw new Error("Expected butt, round, or square line cap");m.setLineCap(M)}if(s){const M=s(v);if(M!=="bevel"&&M!=="round"&&M!=="miter")throw new Error("Expected bevel, round, or miter line join");m.setLineJoin(M)}return a&&m.setLineDash(a(v)),c&&m.setLineDashOffset(c(v)),d&&m.setMiterLimit(d(v)),m}}function ove(n,e){const t="text-",i=w1(n,t+"value",e);if(!i)return null;const r=l5(n,t,e),o=l5(n,t+"background-",e),s=u5(n,t,e),a=u5(n,t+"background-",e),c=w1(n,t+"font",e),d=wd(n,t+"max-angle",e),m=wd(n,t+"offset-x",e),v=wd(n,t+"offset-y",e),M=Gx(n,t+"overflow",e),B=w1(n,t+"placement",e),P=wd(n,t+"repeat",e),U=mB(n,t+"scale",e),z=Gx(n,t+"rotate-with-view",e),V=wd(n,t+"rotation",e),Z=w1(n,t+"align",e),X=w1(n,t+"justify",e),re=w1(n,t+"baseline",e),ie=Gx(n,t+"keep-upright",e),te=bee(n,t+"padding",e),q=gB(n,t+"declutter-mode"),le=new yee({declutterMode:q});return function(ce){if(le.setText(i(ce)),r&&le.setFill(r(ce)),o&&le.setBackgroundFill(o(ce)),s&&le.setStroke(s(ce)),a&&le.setBackgroundStroke(a(ce)),c&&le.setFont(c(ce)),d&&le.setMaxAngle(d(ce)),m&&le.setOffsetX(m(ce)),v&&le.setOffsetY(v(ce)),M&&le.setOverflow(M(ce)),B){const ve=B(ce);if(ve!=="point"&&ve!=="line")throw new Error("Expected point or line for text-placement");le.setPlacement(ve)}if(P&&le.setRepeat(P(ce)),U&&le.setScale(U(ce)),z&&le.setRotateWithView(z(ce)),V&&le.setRotation(V(ce)),Z){const ve=Z(ce);if(ve!=="left"&&ve!=="center"&&ve!=="right"&&ve!=="end"&&ve!=="start")throw new Error("Expected left, right, center, start, or end for text-align");le.setTextAlign(ve)}if(X){const ve=X(ce);if(ve!=="left"&&ve!=="right"&&ve!=="center")throw new Error("Expected left, right, or center for text-justify");le.setJustify(ve)}if(re){const ve=re(ce);if(ve!=="bottom"&&ve!=="top"&&ve!=="middle"&&ve!=="alphabetic"&&ve!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");le.setTextBaseline(ve)}return te&&le.setPadding(te(ce)),ie&&le.setKeepUpright(ie(ce)),le}}function sve(n,e){return"icon-src"in n?ave(n,e):"shape-points"in n?lve(n,e):"circle-radius"in n?uve(n,e):null}function ave(n,e){const t="icon-",i=t+"src",r=Cee(n[i],i),o=vE(n,t+"anchor",e),s=mB(n,t+"scale",e),a=wd(n,t+"opacity",e),c=vE(n,t+"displacement",e),d=wd(n,t+"rotation",e),m=Gx(n,t+"rotate-with-view",e),v=lN(n,t+"anchor-origin"),M=uN(n,t+"anchor-x-units"),B=uN(n,t+"anchor-y-units"),P=fve(n,t+"color"),U=hve(n,t+"cross-origin"),z=dve(n,t+"offset"),V=lN(n,t+"offset-origin"),Z=bE(n,t+"width"),X=bE(n,t+"height"),re=Ave(n,t+"size"),ie=gB(n,t+"declutter-mode"),te=new g2({src:r,anchorOrigin:v,anchorXUnits:M,anchorYUnits:B,color:P,crossOrigin:U,offset:z,offsetOrigin:V,height:X,width:Z,size:re,declutterMode:ie});return function(q){return a&&te.setOpacity(a(q)),c&&te.setDisplacement(c(q)),d&&te.setRotation(d(q)),m&&te.setRotateWithView(m(q)),s&&te.setScale(s(q)),o&&te.setAnchor(o(q)),te}}function lve(n,e){const t="shape-",i=t+"points",r=t+"radius",o=FD(n[i],i),s=FD(n[r],r),a=l5(n,t,e),c=u5(n,t,e),d=mB(n,t+"scale",e),m=vE(n,t+"displacement",e),v=wd(n,t+"rotation",e),M=Gx(n,t+"rotate-with-view",e),B=bE(n,t+"radius2"),P=bE(n,t+"angle"),U=gB(n,t+"declutter-mode"),z=new pB({points:o,radius:s,radius2:B,angle:P,declutterMode:U});return function(V){return a&&z.setFill(a(V)),c&&z.setStroke(c(V)),m&&z.setDisplacement(m(V)),v&&z.setRotation(v(V)),M&&z.setRotateWithView(M(V)),d&&z.setScale(d(V)),z}}function uve(n,e){const t="circle-",i=l5(n,t,e),r=u5(n,t,e),o=wd(n,t+"radius",e),s=mB(n,t+"scale",e),a=vE(n,t+"displacement",e),c=wd(n,t+"rotation",e),d=Gx(n,t+"rotate-with-view",e),m=gB(n,t+"declutter-mode"),v=new pM({radius:5,declutterMode:m});return function(M){return o&&v.setRadius(o(M)),i&&v.setFill(i(M)),r&&v.setStroke(r(M)),a&&v.setDisplacement(a(M)),c&&v.setRotation(c(M)),d&&v.setRotateWithView(d(M)),s&&v.setScale(s(M)),v}}function wd(n,e,t){if(!(e in n))return;const i=W1(n[e],jo,t);return function(r){return FD(i(r),e)}}function w1(n,e,t){if(!(e in n))return null;const i=W1(n[e],Cd,t);return function(r){return Cee(i(r),e)}}function cve(n,e,t){const i=w1(n,e+"pattern-src",t),r=aN(n,e+"pattern-offset",t),o=aN(n,e+"pattern-size",t),s=XL(n,e+"color",t);return function(a){return{src:i(a),offset:r&&r(a),size:o&&o(a),color:s&&s(a)}}}function Gx(n,e,t){if(!(e in n))return null;const i=W1(n[e],Bh,t);return function(r){const o=i(r);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${e}`);return o}}function XL(n,e,t){if(!(e in n))return null;const i=W1(n[e],Em,t);return function(r){return _ee(i(r),e)}}function bee(n,e,t){if(!(e in n))return null;const i=W1(n[e],DC,t);return function(r){return mM(i(r),e)}}function vE(n,e,t){if(!(e in n))return null;const i=W1(n[e],DC,t);return function(r){const o=mM(i(r),e);if(o.length!==2)throw new Error(`Expected two numbers for ${e}`);return o}}function aN(n,e,t){if(!(e in n))return null;const i=W1(n[e],DC,t);return function(r){return xee(i(r),e)}}function mB(n,e,t){if(!(e in n))return null;const i=W1(n[e],DC|jo,t);return function(r){return pve(i(r),e)}}function bE(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function Ave(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return $A(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function hve(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function lN(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function uN(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function dve(n,e){const t=n[e];if(t!==void 0)return mM(t,e)}function gB(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function fve(n,e){const t=n[e];if(t!==void 0)return _ee(t,e)}function mM(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let i=0;i<t;++i)if(typeof n[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function Cee(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function FD(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function _ee(n,e){if(typeof n=="string")return n;const t=mM(n,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function xee(n,e){const t=mM(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function pve(n,e){return typeof n=="number"?n:xee(n,e)}const cN={RENDER_ORDER:"renderOrder"};class JL extends K2{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(cN.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new lee(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(cN.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?gee:e;const t=mve(e);this.styleFunction_=e===null?void 0:eve(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function mve(n){if(n===void 0)return gee;if(!n)return null;if(typeof n=="function"||n instanceof ff)return n;if(!Array.isArray(n))return sN([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof ff){const r=new Array(e);for(let o=0;o<e;++o){const s=n[o];if(!(s instanceof ff))throw new Error("Expected a list of style instances");r[o]=s}return r}if("style"in t){const r=new Array(e);for(let o=0;o<e;++o){const s=n[o];if(!("style"in s))throw new Error("Expected a list of rules with a style property");r[o]=s}return ive(r)}return sN(n)}class Mee extends Nm{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}}class gve extends oM{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){wr()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;xg(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),zJ(r,i)}forEachFeatureAtCoordinate(e,t,i,r,o,s,a,c){let d;const m=t.viewState;function v(re,ie,te,q){return o.call(s,ie,re?te:null,q)}const M=m.projection,B=CL(e.slice(),M),P=[[0,0]];if(M.canWrapX()&&r){const re=M.getExtent(),ie=Ho(re);P.push([-ie,0],[ie,0])}const U=t.layerStatesArray,z=U.length,V=[],Z=[];for(let re=0;re<P.length;re++)for(let ie=z-1;ie>=0;--ie){const te=U[ie],q=te.layer;if(q.hasRenderer()&&qL(te,m)&&a.call(c,q)){const le=q.getRenderer(),ce=q.getSource();if(le&&ce){const ve=ce.getWrapX()?B:e,ge=v.bind(null,te.managed);Z[0]=ve[0]+P[re][0],Z[1]=ve[1]+P[re][1],d=le.forEachFeatureAtCoordinate(Z,t,i,ge,V)}if(d)return d}}if(V.length===0)return;const X=1/V.length;return V.forEach((re,ie)=>re.distanceSq+=ie*X),V.sort((re,ie)=>re.distanceSq-ie.distanceSq),V.some(re=>d=re.callback(re.feature,re.layer,re.geometry)),d}hasFeatureAtCoordinate(e,t,i,r,o,s){return this.forEachFeatureAtCoordinate(e,t,i,r,J4,this,o,s)!==void 0}getMap(){return this.map_}renderFrame(e){wr()}scheduleExpireIconCache(e){vp.canExpireCache()&&e.postRenderFunctions.push(yve)}}function yve(n,e){vp.expire()}class vve extends gve{constructor(e){super(e),this.fontChangeListenerKey_=Go(Zb,A2.PROPERTYCHANGE,e.redrawText,e),this.element_=VA?tee():document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=dB+" ol-layers";const i=e.getViewport();i&&i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new Mee(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){ba(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(yp.PRECOMPOSE,e);const t=e.layerStatesArray.sort((d,m)=>d.zIndex-m.zIndex);t.some(d=>d.layer instanceof JL&&d.layer.getDeclutter())&&(e.declutter={});const r=e.viewState;this.children_.length=0;const o=[];let s=null;for(let d=0,m=t.length;d<m;++d){const v=t[d];e.layerIndex=d;const M=v.layer,B=M.getSourceState();if(!qL(v,r)||B!="ready"&&B!="undefined"){M.unrender();continue}const P=M.render(e,s);P&&(P!==s&&(this.children_.push(P),s=P),o.push(v))}this.declutter(e,o),O1e(this.element_,this.children_);const c=this.getMap().getTargetElement();if(fv(c)){const d=c.getContext("2d");for(const m of this.children_){const v=m.firstElementChild||m,M=m.style.backgroundColor;if(M&&(!fv(v)||v.width>0)&&(d.fillStyle=M,d.fillRect(0,0,c.width,c.height)),fv(v)&&v.width>0){const B=m.style.opacity||v.style.opacity;d.globalAlpha=B===""?1:Number(B);const P=v.style.transform;if(P)d.setTransform(...TD(P));else{const U=parseFloat(v.style.width)/v.width,z=parseFloat(v.style.height)/v.height;d.setTransform(U,0,0,z,0,0)}d.drawImage(v,0,0)}}d.globalAlpha=1,d.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(yp.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let i=t.length-1;i>=0;--i){const r=t[i],o=r.layer;o.getDeclutter()&&o.renderDeclutter(e,r)}t.forEach(i=>i.layer.renderDeferred(e))}}}function wee(n){if(n instanceof K2){n.setMapInternal(null);return}n instanceof qC&&n.getLayers().forEach(wee)}function See(n,e){if(n instanceof K2){n.setMapInternal(e);return}if(n instanceof qC){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)See(t[i],e)}}let c5=class extends Gm{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=bve(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:J0e,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Bd(),this.pixelToCoordinateTransform_=Bd(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,VA||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,VA||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=t.controls||(VA?new gp:D1e()),this.interactions=t.interactions||(VA?new gp:tye({onFocusOnly:!0})),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new CJ(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(NA.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(NA.VIEW,this.handleViewChanged_),this.addChangeListener(NA.SIZE,this.handleSizeChanged_),this.addChangeListener(NA.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof Sm)&&e.view.then(function(r){i.setView(new Sm(r))}),this.controls.addEventListener(bd.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(bd.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(bd.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(bd.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(bd.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(bd.REMOVE,r=>{const o=r.element.getId();o!==void 0&&delete this.overlayIdIndex_[o.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){See(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_?.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const o=i.hitTolerance!==void 0?i.hitTolerance:0,s=i.layerFilter!==void 0?i.layerFilter:J4,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,o,a,t,null,s,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(r){r instanceof qC?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:J4,o=t.hitTolerance!==void 0?t.hitTolerance:0,s=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,o,s,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),o=i.width/r[0],s=i.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/o,(a.clientY-i.top)/s]}getTarget(){return this.get(NA.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return ID(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Fu(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(NA.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof gp){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const o=r.layer.getRenderer();if(o&&!o.ready)return!0;const s=r.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(e){const t=x1(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Fu(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(NA.SIZE)}getView(){return this.get(NA.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return ige(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){t=t||e.type;const i=new tv(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===bD.POINTERDOWN||i===br.WHEEL||i===br.KEYDOWN){const r=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():r,s=t.target,a=o instanceof ShadowRoot?o.host===s?o.host.ownerDocument:o:o===r?r.documentElement:o;if(this.overlayContainerStopEvent_.contains(s)||!a.contains(s))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let o=r.length-1;o>=0;o--){const s=r[o];if(s.getMap()!==this||!s.getActive()||!this.getTargetElement())continue;if(!s.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,o=r;if(e){const s=e.viewHints;if(s[ol.ANIMATING]||s[ol.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,o=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,o))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(yp.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(yp.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new vx(M1.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new vx(M1.LOADSTART,this,e))));const i=this.postRenderFunctions_;if(e)for(let r=0,o=i.length;r<o;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)ba(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(br.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(br.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!fv(this.targetElement_)){this.resizeObserver_?.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(fv(t)||t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new vve(this)),!fv(t)){this.mapBrowserEventHandler_=new tge(this,this.moveTolerance_);for(const r in Wl)this.mapBrowserEventHandler_.addEventListener(Wl[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(br.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(br.WHEEL,this.boundHandleBrowserEvent_,bJ?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const r=t.getRootNode();i=r instanceof ShadowRoot?r.host:t}if(this.targetChangeHandlerKeys_=[Go(i,br.KEYDOWN,this.handleBrowserEvent,this),Go(i,br.KEYPRESS,this.handleBrowserEvent,this)],t instanceof HTMLElement){const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_?.observe(t)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(ba(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ba(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Go(e,A2.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Go(e,br.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ba),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new iv("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Go(e,A2.PROPERTYCHANGE,this.render,this),Go(e,br.CHANGE,this.render,this),Go(e,"addlayer",this.handleLayerAdd_,this),Go(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){wee(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let o=null;if(t!==void 0&&Xj(t)&&i&&i.isDef()){const s=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:AE(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:s,wantedTiles:{},mapId:Ur(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const c=isNaN(a.nextRotation)?a.rotation:a.nextRotation;o.nextExtent=AE(a.nextCenter,a.nextResolution,c,t)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),r&&(!this.previousExtent_||!GC(this.previousExtent_)&&!K1(o.extent,this.previousExtent_))&&(this.dispatchEvent(new vx(M1.MOVESTART,this,r)),this.previousExtent_=L2(this.previousExtent_)),this.previousExtent_&&!o.viewHints[ol.ANIMATING]&&!o.viewHints[ol.INTERACTING]&&!K1(o.extent,this.previousExtent_)&&(this.dispatchEvent(new vx(M1.MOVEEND,this,o)),_J(o.extent,this.previousExtent_))),this.dispatchEvent(new vx(M1.POSTRENDER,this,o)),this.renderComplete_=(this.hasListener(M1.LOADSTART)||this.hasListener(M1.LOADEND)||this.hasListener(yp.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new iv("removelayer",t)),this.set(NA.LAYERGROUP,e)}setSize(e){this.set(NA.SIZE,e)}setTarget(e){this.set(NA.TARGET,e)}setView(e){if(!e||e instanceof Sm){this.set(NA.VIEW,e);return}this.set(NA.VIEW,new Sm);const t=this;e.then(function(i){t.setView(new Sm(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){let r,o;if(fv(e))r=e.width,o=e.height;else{const s=getComputedStyle(e);r=e.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=e.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth)}!isNaN(r)&&!isNaN(o)&&(t=[Math.max(0,r),Math.max(0,o)],!Xj(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&kJ("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!Fv(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function bve(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new qC({layers:n.layers});t[NA.LAYERGROUP]=i,t[NA.TARGET]=n.target,t[NA.VIEW]=n.view instanceof Sm?n.view:new Sm;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new gp(n.controls.slice()):(Ss(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=n.controls));let o;n.interactions!==void 0&&(Array.isArray(n.interactions)?o=new gp(n.interactions.slice()):(Ss(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),o=n.interactions));let s;return n.overlays!==void 0?Array.isArray(n.overlays)?s=new gp(n.overlays.slice()):(Ss(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),s=n.overlays):s=new gp,{controls:r,interactions:o,keyboardEventTarget:e,overlays:s,values:t}}class yB extends Gm{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new yB(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(ba(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Go(e,br.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Cve(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function Cve(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(Ss(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}function Eee(n,e,t,i){const r=[];let o=Sp();for(let s=0,a=t.length;s<a;++s){const c=t[s];o=vL(n,e,c[0],i),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=c[c.length-1]}return r}function CE(n,e,t,i,r,o,s){let a,c;const d=(t-e)/i;if(d===1)a=e;else if(d===2)a=e,c=r;else if(d!==0){let m=n[e],v=n[e+1],M=0;const B=[0];for(let z=e+i;z<t;z+=i){const V=n[z],Z=n[z+1];M+=Math.sqrt((V-m)*(V-m)+(Z-v)*(Z-v)),B.push(M),m=V,v=Z}const P=r*M,U=Q0e(B,P);U<0?(c=(P-B[-U-2])/(B[-U-1]-B[-U-2]),a=e+(-U-2)*i):a=e+U*i}s=s>1?s:2,o=o||new Array(s);for(let m=0;m<s;++m)o[m]=a===void 0?NaN:c===void 0?n[a+m]:df(n[a+m],n[a+i+m],c);return o}function zD(n,e,t,i,r,o){if(t==e)return null;let s;if(r<n[e+i-1])return o?(s=n.slice(e,e+i),s[i-1]=r,s):null;if(n[t-1]<r)return o?(s=n.slice(t-i,t),s[i-1]=r,s):null;if(r==n[e+i-1])return n.slice(e,e+i);let a=e/i,c=t/i;for(;a<c;){const M=a+c>>1;r<n[(M+1)*i-1]?c=M:a=M+1}const d=n[a*i-1];if(r==d)return n.slice((a-1)*i,(a-1)*i+i);const m=n[(a+1)*i-1],v=(r-d)/(m-d);s=[];for(let M=0;M<i-1;++M)s.push(df(n[(a-1)*i+M],n[a*i+M],v));return s.push(r),s}function _ve(n,e,t,i,r,o,s){if(s)return zD(n,e,t[t.length-1],i,r,o);let a;if(r<n[i-1])return o?(a=n.slice(0,i),a[i-1]=r,a):null;if(n[n.length-1]<r)return o?(a=n.slice(n.length-i),a[i-1]=r,a):null;for(let c=0,d=t.length;c<d;++c){const m=t[c];if(e!=m){if(r<n[e+i-1])return null;if(r<=n[m-1])return zD(n,e,m,i,r,!1);e=m}}return null}class _E extends NJ{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(ba),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,i=e.length;t<i;++t)this.changeEventsKeys_.push(Go(e[t],br.CHANGE,this.changed,this))}clone(){const e=new _E(k8(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<NC(this.getExtent(),e,t))return r;const o=this.geometries_;for(let s=0,a=o.length;s<a;++s)r=o[s].closestPointXY(e,t,i,r);return r}containsXY(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)if(i[r].containsXY(e,t))return!0;return!1}computeExtent(e){L2(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)MJ(e,t[i].getExtent());return e}getGeometries(){return k8(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let r=!1;for(let o=0,s=i.length;o<s;++o){const a=i[o],c=a.getSimplifiedGeometry(e);t.push(c),c!==a&&(r=!0)}return r?new _E(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].rotate(e,t);this.changed()}scale(e,t,i){i||(i=Mf(this.getExtent()));const r=this.geometries_;for(let o=0,s=r.length;o<s;++o)r[o].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(k8(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function k8(n){return n.map(e=>e.clone())}function eU(n,e,t,i){let r=n[e],o=n[e+1],s=0;for(let a=e+i;a<t;a+=i){const c=n[a],d=n[a+1];s+=Math.sqrt((c-r)*(c-r)+(d-o)*(d-o)),r=c,o=d}return s}class RC extends WC{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Cg(this.flatCoordinates,e),this.changed()}clone(){const e=new RC(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<NC(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(OL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),TL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return VJ(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,zD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return dv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return CE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return eU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=AB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new RC(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return hB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cB(this.flatCoordinates,0,e,this.stride),this.changed()}}class A5 extends WC{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{const r=e,o=[],s=[];for(let c=0,d=r.length;c<d;++c){const m=r[c];Cg(o,m.getFlatCoordinates()),s.push(o.length)}const a=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(a,o),this.ends_=s}}appendLineString(e){Cg(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new A5(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<NC(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(IL(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),kL(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,r))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,_ve(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return n5(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new RC(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,r=[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s],d=new RC(e.slice(o,c),i);r.push(d),o=c}return r}getLength(){const e=this.ends_;let t=0,i=0;for(let r=0,o=e.length;r<o;++r)i+=eU(this.flatCoordinates,t,e[r],this.stride),t=e[r];return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const r=this.ends_,o=this.stride;for(let s=0,a=r.length;s<a;++s){const c=r[s],d=CE(t,i,c,o,.5);Cg(e,d),i=c}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=qJ(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new A5(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return f1e(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=AM(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class gM extends WC{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Cg(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new gM(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<NC(this.getExtent(),e,t))return r;const o=this.flatCoordinates,s=this.stride;for(let a=0,c=o.length;a<c;a+=s){const d=bC(e,t,o[a],o[a+1]);if(d<r){r=d;for(let m=0;m<s;++m)i[m]=o[a+m];i.length=s}}return r}getCoordinates(){return dv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new kC(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,r=[];for(let o=0,s=e.length;o<s;o+=i){const a=new kC(e.slice(o,o+i),t);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let r=0,o=t.length;r<o;r+=i){const s=t[r],a=t[r+1];if(yL(e,s,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cB(this.flatCoordinates,0,e,this.stride),this.changed()}}class h5 extends WC{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){const r=e,o=[],s=[];for(let a=0,c=r.length;a<c;++a){const d=r[a],m=o.length,v=d.getEnds();for(let M=0,B=v.length;M<B;++M)v[M]+=m;Cg(o,d.getFlatCoordinates()),s.push(v)}t=r.length===0?this.getLayout():r[0].getLayout(),e=o,i=s}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Cg(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,o=t.length;r<o;++r)t[r]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const i=new h5(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,r){return r<NC(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(a1e(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),l1e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return d1e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return s1e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),DD(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,kD(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=Eee(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=YJ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new gM(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;ZJ(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=DD(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=A1e(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new h5(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const o=this.endss_[e-1];t=o[o.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(t!==0)for(let o=0,s=i.length;o<s;++o)i[o]-=t;return new F1(this.flatCoordinates.slice(t,r),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,r=[];let o=0;for(let s=0,a=i.length;s<a;++s){const c=i[s].slice(),d=c[c.length-1];if(o!==0)for(let v=0,M=c.length;v<M;++v)c[v]-=o;const m=new F1(t.slice(o,d),e,c);r.push(m),o=d}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return p1e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=QJ(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const AN=Bd();class YA{constructor(e,t,i,r,o,s){this.styleFunction,this.extent_,this.id_=s,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=o,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?xJ(this.flatCoordinates_):vL(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Mf(this.getExtent());this.flatInteriorPoints_=PL(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=XJ(this.flatCoordinates_,this.ends_),t=Eee(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=YJ(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=CE(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let r=0,o=i.length;r<o;++r){const s=i[r],a=CE(e,t,s,2,.5);Cg(this.flatMidpoints_,a),t=s}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Us(e);const t=e.getExtent(),i=e.getWorldExtent();if(t&&i){const r=Nu(i)/Nu(t);xg(AN,i[0],i[3],r,-r,0,0,0),wv(this.flatCoordinates_,0,this.flatCoordinates_.length,2,AN,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new YA(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=gJ((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":i.length=AB(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),r=[i.length];break;case"MultiLineString":r=[],i.length=qJ(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,r);break;case"Polygon":r=[],i.length=DL(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,r);break}return r&&(this.simplifiedGeometry_=new YA(this.type_,i,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}YA.prototype.getFlatCoordinates=YA.prototype.getOrientedFlatCoordinates;class Bee{drawCustom(e,t,i,r,o){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,i){}drawFeature(e,t,i){}drawGeometryCollection(e,t,i){}drawLineString(e,t,i){}drawMultiLineString(e,t,i){}drawMultiPoint(e,t,i){}drawMultiPolygon(e,t,i){}drawPoint(e,t,i){}drawPolygon(e,t,i){}drawText(e,t,i){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class xve extends Bee{constructor(e,t,i,r,o,s,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.transformRotation_=r?nB(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=s,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Bd()}drawImages_(e,t,i,r){if(!this.image_)return;const o=wv(e,t,i,r,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.tmpLocalTransform_,c=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=c*this.imageOpacity_);let d=this.imageRotation_;this.transformRotation_===0&&(d-=this.viewRotation_),this.imageRotateWithView_&&(d+=this.viewRotation_);for(let m=0,v=o.length;m<v;m+=2){const M=o[m]-this.imageAnchorX_,B=o[m+1]-this.imageAnchorY_;if(d!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const P=M+this.imageAnchorX_,U=B+this.imageAnchorY_;xg(a,P,U,1,1,d,-P,-U),s.save(),s.transform.apply(s,a),s.translate(P,U),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.restore()}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,M,B,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=c)}drawText_(e,t,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const o=wv(e,t,i,r,this.transform_,this.pixelCoordinates_),s=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=r){const c=o[t]+this.textOffsetX_,d=o[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(s.save(),s.translate(c-this.textOffsetX_,d-this.textOffsetY_),s.rotate(a),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.restore()):(this.textStrokeState_&&s.strokeText(this.text_,c,d),this.textFillState_&&s.fillText(this.text_,c,d))}}moveToLineTo_(e,t,i,r,o){const s=this.context_,a=wv(e,t,i,r,this.transform_,this.pixelCoordinates_);s.moveTo(a[0],a[1]);let c=a.length;o&&(c-=2);for(let d=2;d<c;d+=2)s.lineTo(a[d],a[d+1]);return o&&s.closePath(),i}drawRings_(e,t,i,r){for(let o=0,s=i.length;o<s;++o)t=this.moveToLineTo_(e,t,i[o],r,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ql(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=o1e(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],o=Math.sqrt(i*i+r*r),s=this.context_;s.beginPath(),s.arc(t[0],t[1],o,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ql(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(ql(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let o=0;const s=e.getEnds(),a=e.getStride();i.beginPath();for(let c=0,d=s.length;c<d;++c)o=this.moveToLineTo_(r,o,s[c],a,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ql(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ql(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const o=e.getEndss(),s=e.getStride();t.beginPath();for(let a=0,c=o.length;a<c;++a){const d=o[a];r=this.drawRings_(i,r,d,s)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),Fv(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:s5;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:ug(i||_d)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),r=t.getLineCap(),o=t.getLineDash(),s=t.getLineDashOffset(),a=t.getLineJoin(),c=t.getWidth(),d=t.getMiterLimit(),m=o||D1;this.strokeState_={lineCap:r!==void 0?r:p2,lineDash:this.pixelRatio_===1?m:m.map(v=>v*this.pixelRatio_),lineDashOffset:(s||R1)*this.pixelRatio_,lineJoin:a!==void 0?a:m2,lineWidth:(c!==void 0?c:a5)*this.pixelRatio_,miterLimit:d!==void 0?d:r5,strokeStyle:ug(i||o5)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),o=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const s=e.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/i,s[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const B=t.getColor();this.textFillState_={fillStyle:ug(B||_d)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const B=i.getColor(),P=i.getLineCap(),U=i.getLineDash(),z=i.getLineDashOffset(),V=i.getLineJoin(),Z=i.getWidth(),X=i.getMiterLimit();this.textStrokeState_={lineCap:P!==void 0?P:p2,lineDash:U||D1,lineDashOffset:z||R1,lineJoin:V!==void 0?V:m2,lineWidth:Z!==void 0?Z:a5,miterLimit:X!==void 0?X:r5,strokeStyle:ug(B||o5)}}const r=e.getFont(),o=e.getOffsetX(),s=e.getOffsetY(),a=e.getRotateWithView(),c=e.getRotation(),d=e.getScaleArray(),m=e.getText(),v=e.getTextAlign(),M=e.getTextBaseline();this.textState_={font:r!==void 0?r:fee,textAlign:v!==void 0?v:s5,textBaseline:M!==void 0?M:yE},this.text_=m!==void 0?Array.isArray(m)?m.reduce((B,P,U)=>B+=U%2?" ":P,""):m:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=s!==void 0?this.pixelRatio_*s:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=c!==void 0?c:0,this.textScale_=[this.pixelRatio_*d[0],this.pixelRatio_*d[1]]}}}const Mve=.5,Oee={Point:kve,LineString:Ove,Polygon:Rve,MultiPoint:Dve,MultiLineString:Ive,MultiPolygon:Tve,GeometryCollection:Bve,Circle:Sve};function wve(n,e){return parseInt(Ur(n),10)-parseInt(Ur(e),10)}function jD(n,e){const t=Iee(n,e);return t*t}function Iee(n,e){return Mve*n/e}function Sve(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(o||s){const c=n.getBuilder(t.getZIndex(),"Circle");c.setFillStrokeStyle(o,s),c.drawCircle(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}}function xE(n,e,t,i,r,o,s,a){const c=[],d=t.getImage();if(d){let M=!0;const B=d.getImageState();B==Ni.LOADED||B==Ni.ERROR?M=!1:B==Ni.IDLE&&d.load(),M&&c.push(d.ready())}const m=t.getFill();m&&m.loading()&&c.push(m.ready());const v=c.length>0;return v&&Promise.all(c).then(()=>r(null)),Eve(n,e,t,i,o,s,a),v}function Eve(n,e,t,i,r,o,s){const a=t.getGeometryFunction()(e);if(!a)return;const c=a.simplifyTransformed(i,r);if(t.getRenderer())Tee(n,c,t,e,s);else{const m=Oee[c.getType()];m(n,c,t,e,s,o)}}function Tee(n,e,t,i,r){if(e.getType()=="GeometryCollection"){const s=e.getGeometries();for(let a=0,c=s.length;a<c;++a)Tee(n,s[a],t,i,r);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer(),r)}function Bve(n,e,t,i,r,o){const s=e.getGeometriesArray();let a,c;for(a=0,c=s.length;a<c;++a){const d=Oee[s[a].getType()];d(n,s[a],t,i,r,o)}}function Ove(n,e,t,i,r){const o=t.getStroke();if(o){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(e,i,r)}const s=t.getText();if(s&&s.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,i,r)}}function Ive(n,e,t,i,r){const o=t.getStroke();if(o){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,i,r)}const s=t.getText();if(s&&s.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,i,r)}}function Tve(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(s||o){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(o,s),c.drawMultiPolygon(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i,r)}}function kve(n,e,t,i,r,o){const s=t.getImage(),a=t.getText(),c=a&&a.getText(),d=o&&s&&c?{}:void 0;if(s){if(s.getImageState()!=Ni.LOADED)return;const m=n.getBuilder(t.getZIndex(),"Image");m.setImageStyle(s,d),m.drawPoint(e,i,r)}if(c){const m=n.getBuilder(t.getZIndex(),"Text");m.setTextStyle(a,d),m.drawText(e,i,r)}}function Dve(n,e,t,i,r,o){const s=t.getImage(),a=s&&s.getOpacity()!==0,c=t.getText(),d=c&&c.getText(),m=o&&a&&d?{}:void 0;if(a){if(s.getImageState()!=Ni.LOADED)return;const v=n.getBuilder(t.getZIndex(),"Image");v.setImageStyle(s,m),v.drawMultiPoint(e,i,r)}if(d){const v=n.getBuilder(t.getZIndex(),"Text");v.setTextStyle(c,m),v.drawText(e,i,r)}}function Rve(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(o||s){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(o,s),c.drawPolygon(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i,r)}}let Pve=!1;function kee(n,e,t,i,r,o,s){const a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(t,i,r):n,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=Pve,a.onload=function(c){if(!a.status||a.status>=200&&a.status<300){const d=e.getType();try{let m;d=="text"||d=="json"?m=a.responseText:d=="xml"?m=a.responseXML||a.responseText:d=="arraybuffer"&&(m=a.response),m?o(e.readFeatures(m,{extent:t,featureProjection:r}),e.readProjection(m)):s()}catch{s()}}else s()},a.onerror=s,a.send()}function hN(n,e){return function(t,i,r,o,s){kee(n,e,t,i,r,(a,c)=>{this.addFeatures(a),o!==void 0&&o(a)},()=>{this.changed(),s!==void 0&&s()})}}function Lve(n,e){return[[-1/0,-1/0,1/0,1/0]]}function Uve(n,e){return[n]}class dN{constructor(e){this.rbush_=new lee(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[Ur(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,o=t.length;r<o;r++){const s=e[r],a=t[r],c={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};i[r]=c,this.items_[Ur(a)]=c}this.rbush_.load(i)}remove(e){const t=Ur(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[Ur(t)],r=[i.minX,i.minY,i.maxX,i.maxY];K1(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,o=e.length;r<o;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return Ov(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return U1(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class F2 extends Gm{constructor(e){super(),this.projection=Us(e.projection),this.attributions_=fN(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=fN(e),this.changed()}setState(e){this.state_=e,this.changed()}}function fN(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const sp={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class $y extends Nm{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class yS extends F2{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=e5,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Ss(this.format_,"`format` must be set when `url` is set"),this.loader_=hN(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Lve;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new dN:null,this.loadedExtentsRtree_=new dN,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&i===void 0&&(i=new gp(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Ur(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new $y(sp.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof YA||(this.featureChangeKeys_[e]=[Go(t,br.CHANGE,this.handleFeatureChange_,this),Go(t,A2.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(t.getId()!==void 0){const r=String(t.getId());if(!(r in this.idIndex_))this.idIndex_[r]=t;else if(t instanceof YA){const o=this.idIndex_[r];o instanceof YA?Array.isArray(o)?o.push(t):this.idIndex_[r]=[o,t]:i=!1}else i=!1}return i&&(Ss(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let o=0,s=e.length;o<s;o++){const a=e[o],c=Ur(a);this.addToIndex_(c,a)&&i.push(a)}for(let o=0,s=i.length;o<s;o++){const a=i[o],c=Ur(a);this.setupChangeEvents_(c,a);const d=a.getGeometry();if(d){const m=d.getExtent();t.push(m),r.push(a)}else this.nullGeometryFeatures_[c]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(sp.ADDFEATURE))for(let o=0,s=i.length;o<s;o++)this.dispatchEvent(new $y(sp.ADDFEATURE,i[o]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(sp.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(sp.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(bd.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(bd.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(ba);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new $y(sp.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){const o=r.getGeometry();if(o instanceof YA||o.intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){const r=i.getGeometry();if(r instanceof YA||r.intersectsExtent(e)){const o=t(i);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Ov(this.nullGeometryFeatures_)||Cg(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=IJ(e,t);return[].concat(...r.map(o=>this.featuresRtree_.getInExtent(o)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let o=null;const s=[NaN,NaN];let a=1/0;const c=[-1/0,-1/0,1/0,1/0];return t=t||J4,this.featuresRtree_.forEachInExtent(c,function(d){if(t(d)){const m=d.getGeometry(),v=a;if(a=m instanceof YA?0:m.closestPointXY(i,r,s,a),a<v){o=d;const M=Math.sqrt(a);c[0]=i-M,c[1]=r-M,c[2]=i+M,c[3]=r+M}}}),o}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=Ur(t),r=t.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const s=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(s,t)):this.featuresRtree_&&this.featuresRtree_.update(s,t)}const o=t.getId();if(o!==void 0){const s=o.toString();this.idIndex_[s]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[s]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new $y(sp.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Ur(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Ov(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,o=this.strategy_(e,t,i);for(let s=0,a=o.length;s<a;++s){const c=o[s];r.forEachInExtent(c,function(m){return ag(m.extent,c)})||(++this.loadingExtentsCount_,this.dispatchEvent(new $y(sp.FEATURESLOADSTART)),this.loader_.call(this,c,t,i,m=>{--this.loadingExtentsCount_,this.dispatchEvent(new $y(sp.FEATURESLOADEND,void 0,m))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new $y(sp.FEATURESLOADERROR))}),r.insert(c,{extent:c.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,i=t.forEachInExtent(e,function(r){if(K1(r.extent,e))return r});i&&t.remove(i)}removeFeatures(e){let t=!1;for(let i=0,r=e.length;i<r;++i)t=this.removeFeatureInternal(e[i])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Ur(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(ba),delete this.featureChangeKeys_[t];const r=e.getId();if(r!==void 0){const o=r.toString(),s=this.idIndex_[o];s===e?delete this.idIndex_[o]:Array.isArray(s)&&(s.splice(s.indexOf(e),1),s.length===1&&(this.idIndex_[o]=s[0]))}return delete this.uidIndex_[t],this.hasListener(sp.REMOVEFEATURE)&&this.dispatchEvent(new $y(sp.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){Ss(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(hN(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const Ar={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},dw=[Ar.FILL],mv=[Ar.STROKE],aC=[Ar.BEGIN_PATH],pN=[Ar.CLOSE_PATH];class yM extends Bee{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,o=this.coordinates;let s=o.length;for(let a=0,c=e.length;a<c;a+=t)r[0]=e[a],r[1]=e[a+1],IC(i,r)&&(o[s++]=r[0],o[s++]=r[1]);return s}appendFlatLineCoordinates(e,t,i,r,o,s){const a=this.coordinates;let c=a.length;const d=this.getBufferedMaxExtent();s&&(t+=r);let m=e[t],v=e[t+1];const M=this.tmpCoordinate_;let B=!0,P,U,z;for(P=t+r;P<i;P+=r)M[0]=e[P],M[1]=e[P+1],z=xD(d,M),z!==U?(B&&(a[c++]=m,a[c++]=v,B=!1),a[c++]=M[0],a[c++]=M[1]):z===Nc.INTERSECTING?(a[c++]=M[0],a[c++]=M[1],B=!1):B=!0,m=M[0],v=M[1],U=z;return(o&&B||P===t+r)&&(a[c++]=m,a[c++]=v),c}drawCustomCoordinates_(e,t,i,r,o){for(let s=0,a=i.length;s<a;++s){const c=i[s],d=this.appendFlatLineCoordinates(e,t,c,r,!1,!1);o.push(d),t=c}return t}drawCustom(e,t,i,r,o){this.beginGeometry(e,t,o);const s=e.getType(),a=e.getStride(),c=this.coordinates.length;let d,m,v,M,B;switch(s){case"MultiPolygon":d=e.getOrientedFlatCoordinates(),M=[];const P=e.getEndss();B=0;for(let U=0,z=P.length;U<z;++U){const V=[];B=this.drawCustomCoordinates_(d,B,P[U],a,V),M.push(V)}this.instructions.push([Ar.CUSTOM,c,M,e,i,kD,o]),this.hitDetectionInstructions.push([Ar.CUSTOM,c,M,e,r||i,kD,o]);break;case"Polygon":case"MultiLineString":v=[],d=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),B=this.drawCustomCoordinates_(d,0,e.getEnds(),a,v),this.instructions.push([Ar.CUSTOM,c,v,e,i,n5,o]),this.hitDetectionInstructions.push([Ar.CUSTOM,c,v,e,r||i,n5,o]);break;case"LineString":case"Circle":d=e.getFlatCoordinates(),m=this.appendFlatLineCoordinates(d,0,d.length,a,!1,!1),this.instructions.push([Ar.CUSTOM,c,m,e,i,dv,o]),this.hitDetectionInstructions.push([Ar.CUSTOM,c,m,e,r||i,dv,o]);break;case"MultiPoint":d=e.getFlatCoordinates(),m=this.appendFlatPointCoordinates(d,a),m>c&&(this.instructions.push([Ar.CUSTOM,c,m,e,i,dv,o]),this.hitDetectionInstructions.push([Ar.CUSTOM,c,m,e,r||i,dv,o]));break;case"Point":d=e.getFlatCoordinates(),this.coordinates.push(d[0],d[1]),m=this.coordinates.length,this.instructions.push([Ar.CUSTOM,c,m,e,i,void 0,o]),this.hitDetectionInstructions.push([Ar.CUSTOM,c,m,e,r||i,void 0,o]);break}this.endGeometry(t)}beginGeometry(e,t,i){this.beginGeometryInstruction1_=[Ar.BEGIN_GEOMETRY,t,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Ar.BEGIN_GEOMETRY,t,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let r,o,s=-1;for(t=0;t<i;++t)r=e[t],o=r[0],o==Ar.END_GEOMETRY?s=t:o==Ar.BEGIN_GEOMETRY&&(r[2]=t,Y0e(this.hitDetectionInstructions,s,t),s=-1)}fillStyleToState(e,t={}){if(e){const i=e.getColor();t.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,t.fillStyle=ug(i||_d)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const i=e.getColor();t.strokeStyle=ug(i||o5);const r=e.getLineCap();t.lineCap=r!==void 0?r:p2;const o=e.getLineDash();t.lineDash=o?o.slice():D1;const s=e.getLineDashOffset();t.lineDashOffset=s||R1;const a=e.getLineJoin();t.lineJoin=a!==void 0?a:m2;const c=e.getWidth();t.lineWidth=c!==void 0?c:a5;const d=e.getMiterLimit();t.miterLimit=d!==void 0?d:r5,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const i=this.state;this.fillStyleToState(e,i),this.strokeStyleToState(t,i)}createFill(e){const t=e.fillStyle,i=[Ar.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Ar.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,o=e.lineDash,s=e.lineDashOffset,a=e.lineJoin,c=e.lineWidth,d=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||o!=e.currentLineDash&&!Fv(e.currentLineDash,o)||e.currentLineDashOffset!=s||e.currentLineJoin!=a||e.currentLineWidth!=c||e.currentMiterLimit!=d)&&(t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=o,e.currentLineDashOffset=s,e.currentLineJoin=a,e.currentLineWidth=c,e.currentMiterLimit=d)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Ar.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=_J(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Mv(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class Kve extends yM{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,i){if(!this.image_||this.maxExtent&&!IC(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),o=e.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(r,o);this.instructions.push([Ar.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Ar.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,i){if(!this.image_)return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),o=[];for(let c=0,d=r.length;c<d;c+=e.getStride())(!this.maxExtent||IC(this.maxExtent,r.slice(c,c+2)))&&o.push(r[c],r[c+1]);const s=this.coordinates.length,a=this.appendFlatPointCoordinates(o,2);this.instructions.push([Ar.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Ar.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),o=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class Fve extends yM{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const o=this.coordinates.length,s=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),a=[Ar.MOVE_TO_LINE_TO,o,s];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t,i){const r=this.state,o=r.strokeStyle,s=r.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([Ar.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,D1,R1],aC);const a=e.getFlatCoordinates(),c=e.getStride();this.drawFlatCoordinates_(a,0,a.length,c),this.hitDetectionInstructions.push(mv),this.endGeometry(t)}drawMultiLineString(e,t,i){const r=this.state,o=r.strokeStyle,s=r.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([Ar.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,D1,R1],aC);const a=e.getEnds(),c=e.getFlatCoordinates(),d=e.getStride();let m=0;for(let v=0,M=a.length;v<M;++v)m=this.drawFlatCoordinates_(c,m,a[v],d);this.hitDetectionInstructions.push(mv),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(mv),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(mv),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(aC)}}class mN extends yM{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const o=this.state,s=o.fillStyle!==void 0,a=o.strokeStyle!==void 0,c=i.length;this.instructions.push(aC),this.hitDetectionInstructions.push(aC);for(let d=0;d<c;++d){const m=i[d],v=this.coordinates.length,M=this.appendFlatLineCoordinates(e,t,m,r,!0,!a),B=[Ar.MOVE_TO_LINE_TO,v,M];this.instructions.push(B),this.hitDetectionInstructions.push(B),a&&(this.instructions.push(pN),this.hitDetectionInstructions.push(pN)),t=m}return s&&(this.instructions.push(dw),this.hitDetectionInstructions.push(dw)),a&&(this.instructions.push(mv),this.hitDetectionInstructions.push(mv)),t}drawCircle(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Ar.SET_FILL_STYLE,_d]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Ar.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,D1,R1]);const a=e.getFlatCoordinates(),c=e.getStride(),d=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,c,!1,!1);const m=[Ar.CIRCLE,d];this.instructions.push(aC,m),this.hitDetectionInstructions.push(aC,m),r.fillStyle!==void 0&&(this.instructions.push(dw),this.hitDetectionInstructions.push(dw)),r.strokeStyle!==void 0&&(this.instructions.push(mv),this.hitDetectionInstructions.push(mv)),this.endGeometry(t)}drawPolygon(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Ar.SET_FILL_STYLE,_d]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Ar.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,D1,R1]);const a=e.getEnds(),c=e.getOrientedFlatCoordinates(),d=e.getStride();this.drawFlatCoordinatess_(c,0,a,d),this.endGeometry(t)}drawMultiPolygon(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Ar.SET_FILL_STYLE,_d]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Ar.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,D1,R1]);const a=e.getEndss(),c=e.getOrientedFlatCoordinates(),d=e.getStride();let m=0;for(let v=0,M=a.length;v<M;++v)m=this.drawFlatCoordinatess_(c,m,a[v],d);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=Vb(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function zve(n,e,t,i,r){const o=[];let s=t,a=0,c=e.slice(t,2);for(;a<n&&s+r<i;){const[d,m]=c.slice(-2),v=e[s+r],M=e[s+r+1],B=Math.sqrt((v-d)*(v-d)+(M-m)*(M-m));if(a+=B,a>=n){const P=(n-a+B)/B,U=df(d,v,P),z=df(m,M,P);c.push(U,z),o.push(c),c=[U,z],a==n&&(s+=r),a=0}else if(a<n)c.push(e[s+r],e[s+r+1]),s+=r;else{const P=B-a,U=df(d,v,P/B),z=df(m,M,P/B);c.push(U,z),o.push(c),c=[U,z],a=0,s+=r}}return a>0&&o.push(c),o}function jve(n,e,t,i,r){let o=t,s=t,a=0,c=0,d=t,m,v,M,B,P,U,z,V,Z,X;for(v=t;v<i;v+=r){const re=e[v],ie=e[v+1];P!==void 0&&(Z=re-P,X=ie-U,B=Math.sqrt(Z*Z+X*X),z!==void 0&&(c+=M,m=Math.acos((z*Z+V*X)/(M*B)),m>n&&(c>a&&(a=c,o=d,s=v),c=0,d=v-r)),M=B,z=Z,V=X),P=re,U=ie}return c+=B,c>a?[d,v]:[o,s]}const ME={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Nve extends yM{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[_d]={fillStyle:_d},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,i){const r=this.textFillState_,o=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!r&&!o)return;const a=this.coordinates;let c=a.length;const d=e.getType();let m=null,v=e.getStride();if(s.placement==="line"&&(d=="LineString"||d=="MultiLineString"||d=="Polygon"||d=="MultiPolygon")){if(!ql(this.maxExtent,e.getExtent()))return;let M;if(m=e.getFlatCoordinates(),d=="LineString")M=[m.length];else if(d=="MultiLineString")M=e.getEnds();else if(d=="Polygon")M=e.getEnds().slice(0,1);else if(d=="MultiPolygon"){const z=e.getEndss();M=[];for(let V=0,Z=z.length;V<Z;++V)M.push(z[V][0])}this.beginGeometry(e,t,i);const B=s.repeat,P=B?void 0:s.textAlign;let U=0;for(let z=0,V=M.length;z<V;++z){let Z;B?Z=zve(B*this.resolution,m,U,M[z],v):Z=[m.slice(U,M[z])];for(let X=0,re=Z.length;X<re;++X){const ie=Z[X];let te=0,q=ie.length;if(P==null){const ce=jve(s.maxAngle,ie,0,ie.length,2);te=ce[0],q=ce[1]}for(let ce=te;ce<q;ce+=v)a.push(ie[ce],ie[ce+1]);const le=a.length;U=M[z],this.drawChars_(c,le),c=le}}this.endGeometry(t)}else{let M=s.overflow?null:[];switch(d){case"Point":case"MultiPoint":m=e.getFlatCoordinates();break;case"LineString":m=e.getFlatMidpoint();break;case"Circle":m=e.getCenter();break;case"MultiLineString":m=e.getFlatMidpoints(),v=2;break;case"Polygon":m=e.getFlatInteriorPoint(),s.overflow||M.push(m[2]/this.resolution),v=3;break;case"MultiPolygon":const re=e.getFlatInteriorPoints();m=[];for(let ie=0,te=re.length;ie<te;ie+=3)s.overflow||M.push(re[ie+2]/this.resolution),m.push(re[ie],re[ie+1]);if(m.length===0)return;v=2;break}const B=this.appendFlatPointCoordinates(m,v);if(B===c)return;if(M&&(B-c)/2!==m.length/v){let re=c/2;M=M.filter((ie,te)=>{const q=a[(re+te)*2]===m[te*v]&&a[(re+te)*2+1]===m[te*v+1];return q||--re,q})}this.saveTextStates_();const P=s.backgroundFill?this.createFill(this.fillStyleToState(s.backgroundFill)):null,U=s.backgroundStroke?this.createStroke(this.strokeStyleToState(s.backgroundStroke)):null;this.beginGeometry(e,t,i);let z=s.padding;if(z!=sC&&(s.scale[0]<0||s.scale[1]<0)){let re=s.padding[0],ie=s.padding[1],te=s.padding[2],q=s.padding[3];s.scale[0]<0&&(ie=-ie,q=-q),s.scale[1]<0&&(re=-re,te=-te),z=[re,ie,te,q]}const V=this.pixelRatio;this.instructions.push([Ar.DRAW_IMAGE,c,B,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,z==sC?sC:z.map(function(re){return re*V}),P,U,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,M]);const Z=1/V,X=P?P.slice(0):null;X&&(X[1]=_d),this.hitDetectionInstructions.push([Ar.DRAW_IMAGE,c,B,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[Z,Z],NaN,this.declutterMode_,this.declutterImageWithText_,z,X,U,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?_d:this.fillKey_,this.textOffsetX_,this.textOffsetY_,M]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const o=this.textKey_;o in this.textStates||(this.textStates[o]={font:t.font,textAlign:t.textAlign||s5,justify:t.justify,textBaseline:t.textBaseline||yE,scale:t.scale});const s=this.fillKey_;i&&(s in this.fillStates||(this.fillStates[s]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,o=this.strokeKey_,s=this.textKey_,a=this.fillKey_;this.saveTextStates_();const c=this.pixelRatio,d=ME[r.textBaseline],m=this.textOffsetY_*c,v=this.text_,M=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Ar.DRAW_CHARS,e,t,d,r.overflow,a,r.maxAngle,c,m,o,M*c,v,s,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Ar.DRAW_CHARS,e,t,d,r.overflow,a&&_d,r.maxAngle,c,m,o,M*c,v,s,1/c,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let i,r,o;if(!e)this.text_="";else{const s=e.getFill();s?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=ug(s.getColor()||_d)):(r=null,this.textFillState_=r);const a=e.getStroke();if(!a)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);const U=a.getLineDash(),z=a.getLineDashOffset(),V=a.getWidth(),Z=a.getMiterLimit();o.lineCap=a.getLineCap()||p2,o.lineDash=U?U.slice():D1,o.lineDashOffset=z===void 0?R1:z,o.lineJoin=a.getLineJoin()||m2,o.lineWidth=V===void 0?a5:V,o.miterLimit=Z===void 0?r5:Z,o.strokeStyle=ug(a.getColor()||o5)}i=this.textState_;const c=e.getFont()||fee;$ye(c);const d=e.getScaleArray();i.overflow=e.getOverflow(),i.font=c,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||yE,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||sC,i.scale=d===void 0?[1,1]:d;const m=e.getOffsetX(),v=e.getOffsetY(),M=e.getRotateWithView(),B=e.getKeepUpright(),P=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=m===void 0?0:m,this.textOffsetY_=v===void 0?0:v,this.textRotateWithView_=M===void 0?!1:M,this.textKeepUpright_=B===void 0?!0:B,this.textRotation_=P===void 0?0:P,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:Ur(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+Ur(r.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const Gve={Circle:mN,Default:yM,Image:Kve,LineString:Fve,Polygon:mN,Text:Nve};class Dee{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const o=i[r].finish();e[t][r]=o}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let o=r[t];if(o===void 0){const s=Gve[t];o=new s(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=o}return o}}function Wve(n,e,t,i,r,o,s,a,c,d,m,v,M=!0){let B=n[e],P=n[e+1],U=0,z=0,V=0,Z=0;function X(){U=B,z=P,e+=i,B=n[e],P=n[e+1],Z+=V,V=Math.sqrt((B-U)*(B-U)+(P-z)*(P-z))}do X();while(e<t-i&&Z+V<o);let re=V===0?0:(o-Z)/V;const ie=df(U,B,re),te=df(z,P,re),q=e-i,le=Z,ce=o+a*c(d,r,m);for(;e<t-i&&Z+V<ce;)X();re=V===0?0:(ce-Z)/V;const ve=df(U,B,re),ge=df(z,P,re);let Ee=!1;if(M)if(v){const Ye=[ie,te,ve,ge];jJ(Ye,0,4,2,v,Ye,Ye),Ee=Ye[0]>Ye[2]}else Ee=ie>ve;const xe=Math.PI,Te=[],Fe=q+i===e;e=q,V=0,Z=le,B=n[e],P=n[e+1];let Ie;if(Fe){X(),Ie=Math.atan2(P-z,B-U),Ee&&(Ie+=Ie>0?-xe:xe);const Ye=(ve+ie)/2,At=(ge+te)/2;return Te[0]=[Ye,At,(ce-o)/2,Ie,r],Te}r=r.replace(/\n/g," ");for(let Ye=0,At=r.length;Ye<At;){X();let mt=Math.atan2(P-z,B-U);if(Ee&&(mt+=mt>0?-xe:xe),Ie!==void 0){let ut=mt-Ie;if(ut+=ut>xe?-2*xe:ut<-xe?2*xe:0,Math.abs(ut)>s)return null}Ie=mt;const Ue=Ye;let De=0;for(;Ye<At;++Ye){const ut=Ee?At-Ye-1:Ye,kt=a*c(d,r[ut],m);if(e+i<t&&Z+V<o+De+kt/2)break;De+=kt}if(Ye===Ue)continue;const Ge=Ee?r.substring(At-Ue,At-Ye):r.substring(Ue,Ye);re=V===0?0:(o+De/2-Z)/V;const Re=df(U,B,re),St=df(z,P,re);Te.push([Re,St,De/2,mt,Ge]),o+=De}return Te}class tU{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(mE(),{get:(e,t)=>{if(typeof mE()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,i)=>(this.push_(t,i),!0)})}push_(...e){const t=this.instructions_,i=this.zIndex+this.offset_;t[i]||(t[i]=[]),t[i].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let i=0,r=t.length;i<r;++i){const o=t[i];if(typeof o=="function"){o(e);continue}const s=t[++i];if(typeof e[o]=="function")e[o](...s);else{if(typeof s=="function"){e[o]=s(e);continue}e[o]=s}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const z_=Sp(),Hy=[],y1=[],v1=[],Zy=[];function gN(n){return n[3].declutterBox}const yN=new RegExp("[-----]");function D8(n,e){return e==="start"?e=yN.test(n)?"right":"left":e==="end"&&(e=yN.test(n)?"left":"right"),ME[e]}function Qve(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function qve(n,e,t){return t%2===0&&(n+=e),n}class Yve{constructor(e,t,i,r,o){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Bd(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new tU:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,i,r){const o=e+t+i+r;if(this.labels_[o])return this.labels_[o];const s=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,c=this.textStates[t],d=this.pixelRatio,m=[c.scale[0]*d,c.scale[1]*d],v=c.justify?ME[c.justify]:D8(Array.isArray(e)?e[0]:e,c.textAlign||s5),M=r&&s.lineWidth?s.lineWidth:0,B=Array.isArray(e)?e:String(e).split(`
`).reduce(Qve,[]),{width:P,height:U,widths:z,heights:V,lineWidths:Z}=Zye(c,B),X=P+M,re=[],ie=(X+2)*m[0],te=(U+M)*m[1],q={width:ie<0?Math.floor(ie):Math.ceil(ie),height:te<0?Math.floor(te):Math.ceil(te),contextInstructions:re};(m[0]!=1||m[1]!=1)&&re.push("scale",m),r&&(re.push("strokeStyle",s.strokeStyle),re.push("lineWidth",M),re.push("lineCap",s.lineCap),re.push("lineJoin",s.lineJoin),re.push("miterLimit",s.miterLimit),re.push("setLineDash",[s.lineDash]),re.push("lineDashOffset",s.lineDashOffset)),i&&re.push("fillStyle",a.fillStyle),re.push("textBaseline","middle"),re.push("textAlign","center");const le=.5-v;let ce=v*X+le*M;const ve=[],ge=[];let Ee=0,xe=0,Te=0,Fe=0,Ie;for(let Ye=0,At=B.length;Ye<At;Ye+=2){const mt=B[Ye];if(mt===`
`){xe+=Ee,Ee=0,ce=v*X+le*M,++Fe;continue}const Ue=B[Ye+1]||c.font;Ue!==Ie&&(r&&ve.push("font",Ue),i&&ge.push("font",Ue),Ie=Ue),Ee=Math.max(Ee,V[Te]);const De=[mt,ce+le*z[Te]+v*(z[Te]-Z[Fe]),.5*(M+Ee)+xe];ce+=z[Te],r&&ve.push("strokeText",De),i&&ge.push("fillText",De),++Te}return Array.prototype.push.apply(re,ve),Array.prototype.push.apply(re,ge),this.labels_[o]=q,q}replayTextBackground_(e,t,i,r,o,s,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,o),e.lineTo.apply(e,t),s&&(this.alignAndScaleFill_=s[2],e.fillStyle=s[1],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,o,s,a,c,d,m,v,M,B,P,U,z){a*=M[0],c*=M[1];let V=i-a,Z=r-c;const X=o+d>e?e-d:o,re=s+m>t?t-m:s,ie=P[3]+X*M[0]+P[1],te=P[0]+re*M[1]+P[2],q=V-P[3],le=Z-P[0];(U||v!==0)&&(Hy[0]=q,Zy[0]=q,Hy[1]=le,y1[1]=le,y1[0]=q+ie,v1[0]=y1[0],v1[1]=le+te,Zy[1]=v1[1]);let ce;return v!==0?(ce=xg(Bd(),i,r,1,1,v,-i,-r),Fu(ce,Hy),Fu(ce,y1),Fu(ce,v1),Fu(ce,Zy),U1(Math.min(Hy[0],y1[0],v1[0],Zy[0]),Math.min(Hy[1],y1[1],v1[1],Zy[1]),Math.max(Hy[0],y1[0],v1[0],Zy[0]),Math.max(Hy[1],y1[1],v1[1],Zy[1]),z_)):U1(Math.min(q,q+ie),Math.min(le,le+te),Math.max(q,q+ie),Math.max(le,le+te),z_),B&&(V=Math.round(V),Z=Math.round(Z)),{drawImageX:V,drawImageY:Z,drawImageW:X,drawImageH:re,originX:d,originY:m,declutterBox:{minX:z_[0],minY:z_[1],maxX:z_[2],maxY:z_[3],value:z},canvasTransform:ce,scale:M}}replayImageOrLabel_(e,t,i,r,o,s,a){const c=!!(s||a),d=r.declutterBox,m=a?a[2]*r.scale[0]/2:0;return d.minX-m<=t[0]&&d.maxX+m>=0&&d.minY-m<=t[1]&&d.maxY+m>=0&&(c&&this.replayTextBackground_(e,Hy,y1,v1,Zy,s,a),Xye(e,r.canvasTransform,o,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const i=Fu(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(i[0]%r,i[1]%r),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,i,r){const o=this.textStates[t],s=this.createLabel(e,t,r,i),a=this.strokeStates[i],c=this.pixelRatio,d=D8(Array.isArray(e)?e[0]:e,o.textAlign||s5),m=ME[o.textBaseline||yE],v=a&&a.lineWidth?a.lineWidth:0,M=s.width/c-2*o.scale[0],B=d*M+2*(.5-d)*v,P=m*s.height/c+2*(.5-m)*v;return{label:s,anchorX:B,anchorY:P}}execute_(e,t,i,r,o,s,a,c){const d=this.zIndexContext_;let m;this.pixelCoordinates_&&Fv(i,this.renderedTransform_)?m=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),m=wv(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),Hge(this.renderedTransform_,i));let v=0;const M=r.length;let B=0,P,U,z,V,Z,X,re,ie,te,q,le,ce,ve,ge=0,Ee=0;const xe=this.coordinateCache_,Te=this.viewRotation_,Fe=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,Ie={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Te},Ye=this.instructions!=r||this.overlaps?0:200;let At,mt,Ue,De;for(;v<M;){const Ge=r[v];switch(Ge[0]){case Ar.BEGIN_GEOMETRY:At=Ge[1],De=Ge[3],At.getGeometry()?a!==void 0&&!ql(a,De.getExtent())?v=Ge[2]+1:++v:v=Ge[2],d&&(d.zIndex=Ge[4]);break;case Ar.BEGIN_PATH:ge>Ye&&(this.fill_(e),ge=0),Ee>Ye&&(e.stroke(),Ee=0),!ge&&!Ee&&(e.beginPath(),Z=NaN,X=NaN),++v;break;case Ar.CIRCLE:B=Ge[1];const St=m[B],ut=m[B+1],kt=m[B+2],Ut=m[B+3],Le=kt-St,ke=Ut-ut,Oe=Math.sqrt(Le*Le+ke*ke);e.moveTo(St+Oe,ut),e.arc(St,ut,Oe,0,2*Math.PI,!0),++v;break;case Ar.CLOSE_PATH:e.closePath(),++v;break;case Ar.CUSTOM:B=Ge[1],P=Ge[2];const Ze=Ge[3],bt=Ge[4],yt=Ge[5];Ie.geometry=Ze,Ie.feature=At,v in xe||(xe[v]=[]);const Mt=xe[v];yt?yt(m,B,P,2,Mt):(Mt[0]=m[B],Mt[1]=m[B+1],Mt.length=2),d&&(d.zIndex=Ge[6]),bt(Mt,Ie),++v;break;case Ar.DRAW_IMAGE:B=Ge[1],P=Ge[2],te=Ge[3],U=Ge[4],z=Ge[5];let Kt=Ge[6];const Dt=Ge[7],en=Ge[8],Gn=Ge[9],Nn=Ge[10];let Si=Ge[11];const Un=Ge[12];let Ln=Ge[13];V=Ge[14]||"declutter";const Tn=Ge[15];if(!te&&Ge.length>=20){q=Ge[19],le=Ge[20],ce=Ge[21],ve=Ge[22];const Ki=this.drawLabelWithPointPlacement_(q,le,ce,ve);te=Ki.label,Ge[3]=te;const Wn=Ge[23];U=(Ki.anchorX-Wn)*this.pixelRatio,Ge[4]=U;const Hn=Ge[24];z=(Ki.anchorY-Hn)*this.pixelRatio,Ge[5]=z,Kt=te.height,Ge[6]=Kt,Ln=te.width,Ge[13]=Ln}let ti;Ge.length>25&&(ti=Ge[25]);let Bn,je,H;Ge.length>17?(Bn=Ge[16],je=Ge[17],H=Ge[18]):(Bn=sC,je=null,H=null),Nn&&Fe?Si+=Te:!Nn&&!Fe&&(Si-=Te);let j=0;for(;B<P;B+=2){if(ti&&ti[j++]<Ln/this.pixelRatio)continue;const Ki=this.calculateImageOrLabelDimensions_(te.width,te.height,m[B],m[B+1],Ln,Kt,U,z,en,Gn,Si,Un,o,Bn,!!je||!!H,At),Wn=[e,t,te,Ki,Dt,je,H];if(c){let Hn,Qi,Wi;if(Tn){const Li=P-B;if(!Tn[Li]){Tn[Li]={args:Wn,declutterMode:V};continue}const Er=Tn[Li];Hn=Er.args,Qi=Er.declutterMode,delete Tn[Li],Wi=gN(Hn)}let Ri,qi;if(Hn&&(Qi!=="declutter"||!c.collides(Wi))&&(Ri=!0),(V!=="declutter"||!c.collides(Ki.declutterBox))&&(qi=!0),Qi==="declutter"&&V==="declutter"){const Li=Ri&&qi;Ri=Li,qi=Li}Ri&&(Qi!=="none"&&c.insert(Wi),this.replayImageOrLabel_.apply(this,Hn)),qi&&(V!=="none"&&c.insert(Ki.declutterBox),this.replayImageOrLabel_.apply(this,Wn))}else this.replayImageOrLabel_.apply(this,Wn)}++v;break;case Ar.DRAW_CHARS:const Q=Ge[1],he=Ge[2],Me=Ge[3],Ne=Ge[4];ve=Ge[5];const Qe=Ge[6],it=Ge[7],vt=Ge[8];ce=Ge[9];const $e=Ge[10];q=Ge[11],Array.isArray(q)&&(q=q.reduce(qve,"")),le=Ge[12];const ot=[Ge[13],Ge[13]];V=Ge[14]||"declutter";const b=Ge[15],Rt=this.textStates[le],mn=Rt.font,bn=[Rt.scale[0]*it,Rt.scale[1]*it];let Cn;mn in this.widths_?Cn=this.widths_[mn]:(Cn={},this.widths_[mn]=Cn);const xt=eU(m,Q,he,2),Ci=Math.abs(bn[0])*iN(mn,q,Cn);if(Ne||Ci<=xt){const Ki=this.textStates[le].textAlign,Wn=(xt-Ci)*D8(q,Ki),Hn=Wve(m,Q,he,2,q,Wn,Qe,Math.abs(bn[0]),iN,mn,Cn,Fe?0:this.viewRotation_,b);e:if(Hn){const Qi=[];let Wi,Ri,qi,Li,Er;if(ce)for(Wi=0,Ri=Hn.length;Wi<Ri;++Wi){Er=Hn[Wi],qi=Er[4],Li=this.createLabel(qi,le,"",ce),U=Er[2]+(bn[0]<0?-$e:$e),z=Me*Li.height+(.5-Me)*2*$e*bn[1]/bn[0]-vt;const xo=this.calculateImageOrLabelDimensions_(Li.width,Li.height,Er[0],Er[1],Li.width,Li.height,U,z,0,0,Er[3],ot,!1,sC,!1,At);if(c&&V==="declutter"&&c.collides(xo.declutterBox))break e;Qi.push([e,t,Li,xo,1,null,null])}if(ve)for(Wi=0,Ri=Hn.length;Wi<Ri;++Wi){Er=Hn[Wi],qi=Er[4],Li=this.createLabel(qi,le,ve,""),U=Er[2],z=Me*Li.height-vt;const xo=this.calculateImageOrLabelDimensions_(Li.width,Li.height,Er[0],Er[1],Li.width,Li.height,U,z,0,0,Er[3],ot,!1,sC,!1,At);if(c&&V==="declutter"&&c.collides(xo.declutterBox))break e;Qi.push([e,t,Li,xo,1,null,null])}c&&V!=="none"&&c.load(Qi.map(gN));for(let xo=0,un=Qi.length;xo<un;++xo)this.replayImageOrLabel_.apply(this,Qi[xo])}}++v;break;case Ar.END_GEOMETRY:if(s!==void 0){At=Ge[1];const Ki=s(At,De,V);if(Ki)return Ki}++v;break;case Ar.FILL:Ye?ge++:this.fill_(e),++v;break;case Ar.MOVE_TO_LINE_TO:for(B=Ge[1],P=Ge[2],mt=m[B],Ue=m[B+1],e.moveTo(mt,Ue),Z=mt+.5|0,X=Ue+.5|0,B+=2;B<P;B+=2)mt=m[B],Ue=m[B+1],re=mt+.5|0,ie=Ue+.5|0,(B==P-2||re!==Z||ie!==X)&&(e.lineTo(mt,Ue),Z=re,X=ie);++v;break;case Ar.SET_FILL_STYLE:this.alignAndScaleFill_=Ge[2],ge&&(this.fill_(e),ge=0,Ee&&(e.stroke(),Ee=0)),e.fillStyle=Ge[1],++v;break;case Ar.SET_STROKE_STYLE:Ee&&(e.stroke(),Ee=0),this.setStrokeStyle_(e,Ge),++v;break;case Ar.STROKE:Ye?Ee++:e.stroke(),++v;break;default:++v;break}}ge&&this.fill_(e),Ee&&e.stroke()}execute(e,t,i,r,o,s){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,o,void 0,void 0,s)}executeHitDetection(e,t,i,r,o){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,r,o)}}const Xb=["Polygon","Circle","LineString","Image","Text","Default"],wE=["Image","Text"],Vve=Xb.filter(n=>!wE.includes(n));class Ree{constructor(e,t,i,r,o,s,a){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Bd(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,a)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,t){for(const i in e){let r=this.executorsByZIndex_[i];r===void 0&&(r={},this.executorsByZIndex_[i]=r);const o=e[i];for(const s in o){const a=o[s];r[s]=new Yve(this.resolution_,this.pixelRatio_,this.overlaps_,a,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,o=e.length;r<o;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,o,s){r=Math.round(r);const a=r*2+1,c=xg(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),d=!this.hitDetectionContext_;d&&(this.hitDetectionContext_=_l(a,a));const m=this.hitDetectionContext_;m.canvas.width!==a||m.canvas.height!==a?(m.canvas.width=a,m.canvas.height=a):d||m.clearRect(0,0,a,a);let v;this.renderBuffer_!==void 0&&(v=Sp(),y4(v,e),Mv(v,t*(this.renderBuffer_+r),v));const M=$ve(r);let B;function P(ie,te,q){const le=m.getImageData(0,0,a,a).data;for(let ce=0,ve=M.length;ce<ve;ce++)if(le[M[ce]]>0){if(!s||q==="none"||B!=="Image"&&B!=="Text"||s.includes(ie)){const ge=(M[ce]-3)/4,Ee=r-ge%a,xe=r-(ge/a|0),Te=o(ie,te,Ee*Ee+xe*xe);if(Te)return Te}m.clearRect(0,0,a,a);break}}const U=Object.keys(this.executorsByZIndex_).map(Number);U.sort(bg);let z,V,Z,X,re;for(z=U.length-1;z>=0;--z){const ie=U[z].toString();for(Z=this.executorsByZIndex_[ie],V=Xb.length-1;V>=0;--V)if(B=Xb[V],X=Z[B],X!==void 0&&(re=X.executeHitDetection(m,c,i,P,v),re))return re}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],o=t[2],s=t[3],a=[i,r,i,s,o,s,o,r];return wv(a,0,8,2,e,a),a}isEmpty(){return Ov(this.executorsByZIndex_)}execute(e,t,i,r,o,s,a){const c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(a?q0e:bg),s=s||Xb;const d=Xb.length;for(let m=0,v=c.length;m<v;++m){const M=c[m].toString(),B=this.executorsByZIndex_[M];for(let P=0,U=s.length;P<U;++P){const z=s[P],V=B[z];if(V!==void 0){const Z=a===null?void 0:V.getZIndexContext(),X=Z?Z.getContext():e,re=this.maxExtent_&&z!=="Image"&&z!=="Text";if(re&&(X.save(),this.clip(X,i)),!Z||z==="Text"||z==="Image"?V.execute(X,t,i,r,o,a):Z.pushFunction(ie=>V.execute(ie,t,i,r,o,a)),re&&X.restore(),Z){Z.offset();const ie=c[m]*d+Xb.indexOf(z);this.deferredZIndexContexts_[ie]||(this.deferredZIndexContexts_[ie]=[]),this.deferredZIndexContexts_[ie].push(Z)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(bg);for(let i=0,r=t.length;i<r;++i)e[t[i]].forEach(o=>{o.draw(this.renderedContext_),o.clear()}),e[t[i]].length=0}}const R8={};function $ve(n){if(R8[n]!==void 0)return R8[n];const e=n*2+1,t=n*n,i=new Array(t+1);for(let o=0;o<=n;++o)for(let s=0;s<=n;++s){const a=o*o+s*s;if(a>t)break;let c=i[a];c||(c=[],i[a]=c),c.push(((n+o)*e+(n+s))*4+3),o>0&&c.push(((n-o)*e+(n+s))*4+3),s>0&&(c.push(((n+o)*e+(n-s))*4+3),o>0&&c.push(((n-o)*e+(n-s))*4+3))}const r=[];for(let o=0,s=i.length;o<s;++o)i[o]&&r.push(...i[o]);return R8[n]=r,r}const yf=.5;function Pee(n,e,t,i,r,o,s,a,c){const d=c?SL(r):r,m=n[0]*yf,v=n[1]*yf,M=_l(m,v);M.imageSmoothingEnabled=!1;const B=M.canvas,P=new xve(M,yf,r,null,s,a,c?cM(Vge(),c):null),U=t.length,z=Math.floor((256*256*256-1)/U),V={};for(let X=1;X<=U;++X){const re=t[X-1],ie=re.getStyleFunction()||i;if(!ie)continue;let te=ie(re,o);if(!te)continue;Array.isArray(te)||(te=[te]);const le=(X*z).toString(16).padStart(7,"#00000");for(let ce=0,ve=te.length;ce<ve;++ce){const ge=te[ce],Ee=ge.getGeometryFunction()(re);if(!Ee||!ql(d,Ee.getExtent()))continue;const xe=ge.clone(),Te=xe.getFill();Te&&Te.setColor(le);const Fe=xe.getStroke();Fe&&(Fe.setColor(le),Fe.setLineDash(null)),xe.setText(void 0);const Ie=ge.getImage();if(Ie){const Ue=Ie.getImageSize();if(!Ue)continue;const De=_l(Ue[0],Ue[1],void 0,{alpha:!1}),Ge=De.canvas;De.fillStyle=le,De.fillRect(0,0,Ge.width,Ge.height),xe.setImage(new g2({img:Ge,anchor:Ie.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Ie.getOrigin(),opacity:1,size:Ie.getSize(),scale:Ie.getScale(),rotation:Ie.getRotation(),rotateWithView:Ie.getRotateWithView()}))}const Ye=xe.getZIndex()||0;let At=V[Ye];At||(At={},V[Ye]=At,At.Polygon=[],At.Circle=[],At.LineString=[],At.Point=[]);const mt=Ee.getType();if(mt==="GeometryCollection"){const Ue=Ee.getGeometriesArrayRecursive();for(let De=0,Ge=Ue.length;De<Ge;++De){const Re=Ue[De];At[Re.getType().replace("Multi","")].push(Re,xe)}}else At[mt.replace("Multi","")].push(Ee,xe)}}const Z=Object.keys(V).map(Number).sort(bg);for(let X=0,re=Z.length;X<re;++X){const ie=V[Z[X]];for(const te in ie){const q=ie[te];for(let le=0,ce=q.length;le<ce;le+=2){P.setStyle(q[le+1]);for(let ve=0,ge=e.length;ve<ge;++ve)P.setTransform(e[ve]),P.drawGeometry(q[le])}}}return M.getImageData(0,0,B.width,B.height)}function Lee(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*yf),o=Math.floor(Math.round(n[1])*yf),s=(Cl(r,0,t.width-1)+Cl(o,0,t.height-1)*t.width)*4,a=t.data[s],c=t.data[s+1],m=t.data[s+2]+256*(c+256*a),v=Math.floor((256*256*256-1)/e.length);m&&m%v===0&&i.push(e[m/v-1])}return i}const Hve=5;class Zve extends lM{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=Hve}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return wr()}getData(e){return null}prepareFrame(e){return wr()}renderFrame(e,t){return wr()}forEachFeatureAtCoordinate(e,t,i,r,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===Ni.LOADED||t.getState()===Ni.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Ni.LOADED&&t!=Ni.ERROR&&e.addEventListener(br.CHANGE,this.boundHandleImageChange_),t==Ni.IDLE&&(e.load(),t=e.getState()),t==Ni.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const vN=[];let Cx=null;function Xve(){Cx=_l(1,1,void 0,{willReadFrequently:!0})}class nU extends Zve{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Bd(),this.pixelTransform=Bd(),this.inversePixelTransform=Bd(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,i){Cx||Xve(),Cx.clearRect(0,0,1,1);let r;try{Cx.drawImage(e,t,i,1,1,0,0,1,1),r=Cx.getImageData(0,0,1,1).data}catch{return Cx=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let o,s;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&Fv(f2(e.style.backgroundColor),f2(i)))){const a=e.firstElementChild;fv(a)&&(s=a.getContext("2d"))}if(s&&t1e(s.canvas.style.transform,t)?(this.container=e,this.context=s,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=VA?tee():document.createElement("div"),o.className=r;let a=o.style;a.position="absolute",a.width="100%",a.height="100%",s=_l();const c=s.canvas;o.appendChild(c),a=c.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=o,this.context=s}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=G1(i),o=oB(i),s=rB(i),a=iB(i);Fu(t.coordinateToPixelTransform,r),Fu(t.coordinateToPixelTransform,o),Fu(t.coordinateToPixelTransform,s),Fu(t.coordinateToPixelTransform,a);const c=this.inversePixelTransform;Fu(c,r),Fu(c,o),Fu(c,s),Fu(c,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,t){const i=e.extent,r=e.viewState.resolution,o=e.viewState.rotation,s=e.pixelRatio,a=Math.round(Ho(i)/r*s),c=Math.round(Nu(i)/r*s);xg(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/s,1/s,o,-a/2,-c/2),zJ(this.inversePixelTransform,this.pixelTransform);const d=e1e(this.pixelTransform);if(this.useContainer(t,d,this.getBackground(e)),!this.containerReused){const m=this.context.canvas;m.width!=a||m.height!=c?(m.width=a,m.height=c):this.context.clearRect(0,0,a,c),d!==m.style.transform&&(m.style.transform=d)}}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const o=new Mee(e,this.inversePixelTransform,i,t);r.dispatchEvent(o)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(yp.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(yp.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new tU),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(yp.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(yp.POSTRENDER,this.context,e))}getRenderTransform(e,t,i,r,o,s,a){const c=o/2,d=s/2,m=r/t,v=-m,M=-e[0]+a,B=-e[1];return xg(this.tempTransform,c,d,m,v,-i,M,B)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class Jve extends nU{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Sp(),this.wrappedRenderedExtent_=Sp(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,o=t.viewState,s=o.center,a=o.resolution,c=o.projection,d=o.rotation,m=c.getExtent(),v=this.getLayer().getSource(),M=this.getLayer().getDeclutter(),B=t.pixelRatio,P=t.viewHints,U=!(P[ol.ANIMATING]||P[ol.INTERACTING]),z=this.context,V=Math.round(Ho(r)/a*B),Z=Math.round(Nu(r)/a*B),X=v.getWrapX()&&c.canWrapX(),re=X?Ho(m):null,ie=X?Math.ceil((r[2]-m[2])/re)+1:1;let te=X?Math.floor((r[0]-m[0])/re):0;do{let q=this.getRenderTransform(s,a,0,B,V,Z,te*re);t.declutter&&(q=q.slice(0)),e.execute(z,[z.canvas.width,z.canvas.height],q,d,U,i===void 0?Xb:i?wE:Vve,i?M&&t.declutter[M]:void 0)}while(++te<ie)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=_l(this.context.canvas.width,this.context.canvas.height,vN))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,hM(this.context),vN.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const r=e.viewState;this.prepareContainer(e,t);const o=this.context,s=this.replayGroup_;let a=s&&!s.isEmpty();if(!a&&!(this.getLayer().hasListener(yp.PRERENDER)||this.getLayer().hasListener(yp.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(o,e),r.projection,this.clipped_=!1,a&&i.extent&&this.clipping){const c=lg(i.extent);a=ql(c,e.extent),this.clipped_=a&&!ag(c,e.extent),this.clipped_&&this.clipUnrotated(o,e,c)}return a&&this.renderWorlds(s,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&o.restore(),this.postRender(o,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),r=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,a=this.renderedProjection_,c=this.wrappedRenderedExtent_,d=this.getLayer(),m=[],v=i[0]*yf,M=i[1]*yf;m.push(this.getRenderTransform(r,o,s,yf,v,M,0).slice());const B=d.getSource(),P=a.getExtent();if(B.getWrapX()&&a.canWrapX()&&!ag(P,c)){let U=c[0];const z=Ho(P);let V=0,Z;for(;U<P[0];)--V,Z=z*V,m.push(this.getRenderTransform(r,o,s,yf,v,M,Z).slice()),U+=z;for(V=0,U=c[2];U>P[2];)++V,Z=z*V,m.push(this.getRenderTransform(r,o,s,yf,v,M,Z).slice()),U-=z}this.hitDetectionImageData_=Pee(i,m,this.renderedFeatures_,d.getStyleFunction(),c,o,s,jD(o,this.renderedPixelRatio_),null)}t(Lee(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,r,o){if(!this.replayGroup_)return;const s=t.viewState.resolution,a=t.viewState.rotation,c=this.getLayer(),d={},m=function(M,B,P){const U=Ur(M),z=d[U];if(z){if(z!==!0&&P<z.distanceSq){if(P===0)return d[U]=!0,o.splice(o.lastIndexOf(z),1),r(M,c,B);z.geometry=B,z.distanceSq=P}}else{if(P===0)return d[U]=!0,r(M,c,B);o.push(d[U]={feature:M,layer:c,geometry:B,distanceSq:P,callback:r})}},v=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,s,a,i,m,v?t.declutter?.[v]?.all().map(M=>M.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[ol.ANIMATING],o=e.viewHints[ol.INTERACTING],s=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!s&&r||!a&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const c=e.extent,d=e.viewState,m=d.projection,v=d.resolution,M=e.pixelRatio,B=t.getRevision(),P=t.getRenderBuffer();let U=t.getRenderOrder();U===void 0&&(U=wve);const z=d.center.slice(),V=Mv(c,P*v),Z=V.slice(),X=[V.slice()],re=m.getExtent();if(i.getWrapX()&&m.canWrapX()&&!ag(re,e.extent)){const Te=Ho(re),Fe=Math.max(Ho(V)/2,Te);V[0]=re[0]-Fe,V[2]=re[2]+Fe,CL(z,m);const Ie=OJ(X[0],m);Ie[0]<re[0]&&Ie[2]<re[2]?X.push([Ie[0]+Te,Ie[1],Ie[2]+Te,Ie[3]]):Ie[0]>re[0]&&Ie[2]>re[2]&&X.push([Ie[0]-Te,Ie[1],Ie[2]-Te,Ie[3]])}if(this.ready&&this.renderedResolution_==v&&this.renderedRevision_==B&&this.renderedRenderOrder_==U&&this.renderedFrameDeclutter_===!!e.declutter&&ag(this.wrappedRenderedExtent_,V))return Fv(this.renderedExtent_,Z)||(this.hitDetectionImageData_=null,this.renderedExtent_=Z),this.renderedCenter_=z,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const ie=new Dee(Iee(v,M),V,v,M);let te;for(let Te=0,Fe=X.length;Te<Fe;++Te)i.loadFeatures(X[Te],v,m);const q=jD(v,M);let le=!0;const ce=((Te,Fe)=>{let Ie;const Ye=Te.getStyleFunction()||t.getStyleFunction();if(Ye&&(Ie=Ye(Te,v)),Ie){const At=this.renderFeature(Te,q,Ie,ie,te,this.getLayer().getDeclutter(),Fe);le=le&&!At}}),ve=SL(V),ge=i.getFeaturesInExtent(ve);U&&ge.sort(U);for(let Te=0,Fe=ge.length;Te<Fe;++Te)ce(ge[Te],Te);this.renderedFeatures_=ge,this.ready=le;const Ee=ie.finish(),xe=new Ree(V,v,M,i.getOverlaps(),Ee,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=v,this.renderedRevision_=B,this.renderedRenderOrder_=U,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=Z,this.wrappedRenderedExtent_=V,this.renderedCenter_=z,this.renderedProjection_=m,this.renderedPixelRatio_=M,this.replayGroup_=xe,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,o,s,a){if(!i)return!1;let c=!1;if(Array.isArray(i))for(let d=0,m=i.length;d<m;++d)c=xE(r,e,i[d],t,this.boundHandleStyleImageChange_,o,s,a)||c;else c=xE(r,e,i,t,this.boundHandleStyleImageChange_,o,s,a);return c}}class iU extends JL{constructor(e){super(e)}createRenderer(){return new Jve(this)}}class ebe extends ZL{constructor(e,t,i,r,o){const s=o!==void 0?Ni.IDLE:Ni.LOADED;super(e,t,i,s),this.loader_=o!==void 0?o:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=Ni.ERROR):this.state=Ni.LOADED,this.changed()}load(){this.state==Ni.IDLE&&(this.state=Ni.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}let vM=class extends aM{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(br.CHANGE)}release(){this.setState(oi.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==oi.EMPTY){if(this.state!==oi.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){wr()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=t-i+1e3/60;return r>=this.transition_?1:TJ(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}};class Uee extends vM{constructor(e,t,i,r,o,s){super(e,t,s),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_,VA?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,r!==null&&(this.image_.crossOrigin=r)),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(e){this.image_=e,this.state=oi.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=oi.ERROR,this.unlistenImage_(),this.image_=tbe(),this.changed()}handleImageLoad_(){if(VA)this.state=oi.LOADED;else{const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=oi.LOADED:this.state=oi.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==oi.ERROR&&(this.state=oi.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==oi.IDLE&&(this.state=oi.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Nye(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function tbe(){const n=_l(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}const jA={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class nbe extends Gm{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+w1e,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(jA.ELEMENT,this.handleElementChanged),this.addChangeListener(jA.MAP,this.handleMapChanged),this.addChangeListener(jA.OFFSET,this.handleOffsetChanged),this.addChangeListener(jA.POSITION,this.handlePositionChanged),this.addChangeListener(jA.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(jA.ELEMENT)}getId(){return this.id}getMap(){return this.get(jA.MAP)||null}getOffset(){return this.get(jA.OFFSET)}getPosition(){return this.get(jA.POSITION)}getPositioning(){return this.get(jA.POSITIONING)}handleElementChanged(){eee(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),ba(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Go(e,M1.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(jA.ELEMENT,e)}setMap(e){this.set(jA.MAP,e)}setOffset(e){this.set(jA.OFFSET,e)}setPosition(e){this.set(jA.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(jA.POSITION))return;const i=this.getRect(t.getTargetElement(),t.getSize()),r=this.getElement(),o=this.getRect(r,[E1e(r),B1e(r)]);e=e||{};const s=e.margin===void 0?20:e.margin;if(!ag(i,o)){const a=o[0]-i[0],c=i[2]-o[2],d=o[1]-i[1],m=i[3]-o[3],v=[0,0];if(a<0?v[0]=a-s:c<0&&(v[0]=Math.abs(c)+s),d<0?v[1]=d-s:m<0&&(v[1]=Math.abs(m)+s),v[0]!==0||v[1]!==0){const M=t.getView().getCenterInternal(),B=t.getPixelFromCoordinateInternal(M);if(!B)return;const P=[B[0]+v[0],B[1]+v[1]],U=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(P),duration:U.duration,easing:U.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),r=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[r,o,r+t[0],o+t[1]]}setPositioning(e){this.set(jA.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const i=e.getPixelFromCoordinate(t),r=e.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(e,t){const i=this.element.style,r=this.getOffset(),o=this.getPositioning();this.setVisible(!0);const s=`${e[0]+r[0]}px`,a=`${e[1]+r[1]}px`;let c="0%",d="0%";o=="bottom-right"||o=="center-right"||o=="top-right"?c="-100%":(o=="bottom-center"||o=="center-center"||o=="top-center")&&(c="-50%"),o=="bottom-left"||o=="bottom-center"||o=="bottom-right"?d="-100%":(o=="center-left"||o=="center-center"||o=="center-right")&&(d="-50%");const m=`translate(${c}, ${d}) translate(${s}, ${a})`;this.rendered.transform_!=m&&(this.rendered.transform_=m,i.transform=m)}getOptions(){return this.options}}class rU{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function j_(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new rU(n,e,t,i)}const bN=[];class ibe extends vM{constructor(e,t,i,r,o){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.removeSourceTiles_=o,this.wrappedTileCoord=i}getContext(){return this.context_||(this.context_=_l(1,1,bN)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=Ur(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(hM(this.context_),bN.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let Kee=class extends vM{constructor(e,t,i,r,o,s){super(e,t,s),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=o,this.url_=i,this.key=i}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==oi.IDLE&&(this.setState(oi.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(oi.ERROR)}setFeatures(e){this.features_=e,this.setState(oi.LOADED)}setLoader(e){this.loader_=e}};const Fee="https://api.mapbox.com";function oU(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function rbe(n,e,t){if(typeof n=="string")return[{id:"default",url:CN(n,e,t)}];for(const i of n)i.url=CN(i.url,e,t);return n}function CN(n,e,t){const i=oU(n);if(!i)return decodeURI(new URL(n,t).href);const r="sprites/";if(i.indexOf(r)!==0)throw new Error(`unexpected sprites url: ${n}`);const o=i.slice(r.length);return`${Fee}/styles/v1/${o}/sprite?access_token=${e}`}function SE(n,e){const t=oU(n);if(!t)return decodeURI(new URL(n,location.href).href);const i="styles/";if(t.indexOf(i)!==0)throw new Error(`unexpected style url: ${n}`);const r=t.slice(i.length);return`${Fee}/styles/v1/${r}?&access_token=${e}`}const obe=["a","b","c","d"];function vS(n,e,t,i){const r=new URL(n,i||location.href),o=oU(n);if(!o)return e?(r.searchParams.has(t)||r.searchParams.set(t,e),[decodeURI(r.href)]):[decodeURI(r.href)];if(o==="mapbox.satellite"){const s=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${o}/{z}/{x}/{y}${s}.webp?access_token=${e}`]}return obe.map(s=>`https://${s}.tiles.mapbox.com/v4/${o}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const WA=Object.freeze({}),_N={},xN={};let sbe=0;function sU(n){return n.id||(n.id=sbe++),n.id}function abe(n,e){return sU(n)+"."+Ur(e)}function zee(n){let e=_N[n.id];return e||(e={},_N[sU(n)]=e),e}function lbe(n){let e=xN[n.id];return e||(e={},xN[sU(n)]=e),e}function P8(n){return n*Math.PI/180}const Pm=(function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n})();function vB(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function EE(n,e){let t=0;const i=e.length;for(;t<i;++t)if(e[t]<n&&t+1<i){const o=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(o)}return i-1}function X3(n,e){const t=Math.floor(n),i=Math.pow(2,n-t);return e[t]/i}const N_={};function y2(n,e,t={},i){if(e in N_)return i&&(i.url=N_[e][0].url),N_[e][1];const r=t.transformRequest&&t.transformRequest(e,n)||e,o=function(c){return delete N_[e],Promise.reject(new Error("Error fetching source "+e))},s=function(c){return delete N_[e],c.ok?c.json():Promise.reject(new Error("Error fetching source "+e))},a=h2(()=>r).then(c=>c instanceof Response?(i&&(i.url=c.url),s(c)):(c instanceof Request||(c=new Request(c)),c.headers.get("Accept")||c.headers.set("Accept","application/json"),i&&(i.url=c.url),fetch(c).then(s).catch(o))).catch(o);return N_[e]=[r,a],a}function jee(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=SE(n,e.accessToken),y2("Style",n,e);else return Promise.resolve(n)}const MN={};function Nee(n,e,t={}){const i=[e,JSON.stringify(n)].toString();let r=MN[i];if(!r||t.transformRequest){let o;t.transformRequest&&(o=(a,c)=>{const d=t.transformRequest&&t.transformRequest(c,"Tiles")||c;if(a instanceof Kee)a.setLoader((m,v,M)=>{const B=function(P){P.arrayBuffer().then(U=>{const V=a.getFormat().readFeatures(U,{extent:m,featureProjection:M});a.setFeatures(V)})};h2(()=>d).then(P=>{if(P instanceof Response)return B(P);fetch(P).then(B).catch(U=>a.setState(oi.ERROR))}).catch(P=>a.setState(oi.ERROR))});else{const m=a.getImage();h2(()=>d).then(v=>{if(typeof v=="string"){m.src=v;return}const M=B=>B.blob().then(P=>{const U=URL.createObjectURL(P);m.addEventListener("load",()=>URL.revokeObjectURL(U)),m.addEventListener("error",()=>URL.revokeObjectURL(U)),m.src=U});if(v instanceof Response)return M(v);fetch(v).then(M).catch(B=>a.setState(oi.ERROR))}).catch(v=>a.setState(oi.ERROR))}});const s=n.url;if(s&&!n.tiles){const a=vS(s,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(s.startsWith("mapbox://"))r=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:a}),tileLoadFunction:o});else{const c={};r=y2("Source",a[0],t,c).then(function(d){return d.tiles=d.tiles.map(function(m){return d.scheme==="tms"&&(m=m.replace("{y}","{-y}")),vS(m,t.accessToken,t.accessTokenParam||"access_token",c.url)[0]}),Promise.resolve({tileJson:d,tileLoadFunction:o})})}}else n.tiles?(n=Object.assign({},n,{tiles:n.tiles.map(function(a){return n.scheme==="tms"&&(a=a.replace("{y}","{-y}")),vS(a,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),r=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:o})):r=Promise.reject(new Error("source has no `tiles` nor `url`"));MN[i]=r}return r}function wN(n,e,t,i){const r=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],o=vB(r[0],r[1]),s=o.getContext("2d");s.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const a=s.getImageData(0,0,r[0],r[1]);s.globalCompositeOperation="destination-over",s.fillStyle=`rgba(${i.r*255},${i.g*255},${i.b*255},${i.a})`;const c=a.data;for(let d=0,m=a.width;d<m;++d)for(let v=0,M=a.height;v<M;++v){const B=(v*m+d)*4;c[B+3]>0&&s.arc(d,v,t*e.pixelRatio,0,2*Math.PI)}return s.fill(),o}function ube(n,e,t){const i=Math.max(0,Math.min(1,(t-n)/(e-n)));return i*i*(3-2*i)}function SN(n,e,t){const i=vB(e.width,e.height),r=i.getContext("2d");r.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const o=r.getImageData(0,0,e.width,e.height),s=o.data;for(let a=0,c=o.width;a<c;++a)for(let d=0,m=o.height;d<m;++d){const v=(d*c+a)*4,M=s[v+3]/255,B=.75,P=.1,U=ube(B-P,B+P,M);U>0?(s[v+0]=Math.round(255*t.r*U),s[v+1]=Math.round(255*t.g*U),s[v+2]=Math.round(255*t.b*U),s[v+3]=Math.round(255*U)):s[v+3]=0}return r.putImageData(o,0,0),i}const cbe=Array(256).join("");function ND(n,e){if(e>=.05){let t="";const i=n.split(`
`),r=cbe.slice(0,Math.round(e/.1));for(let o=0,s=i.length;o<s;++o)o>0&&(t+=`
`),t+=i[o].split("").join(r);return t}return n}let L8;function Gee(){return L8||(L8=vB(1,1).getContext("2d")),L8}function Wb(n,e){return Gee().measureText(n).width+(n.length-1)*e}const BE={};Zb.on("propertychange",()=>{for(const n in BE)delete BE[n]});function GD(n,e,t,i){if(n.indexOf(`
`)!==-1){const s=n.split(`
`),a=[];for(let c=0,d=s.length;c<d;++c)a.push(GD(s[c],e,t,i));return a.join(`
`)}const r=t+","+e+","+n+","+i;let o=BE[r];if(!o){const s=n.split(" ");if(s.length>1){const a=Gee();a.font=e;const d=a.measureText("M").width*t;let m="";const v=[];for(let M=0,B=s.length;M<B;++M){const P=s[M],U=m+(m?" ":"")+P;Wb(U,i)<=d?m=U:(m&&v.push(m),m=P)}m&&v.push(m);for(let M=0,B=v.length;M<B&&B>1;++M){const P=v[M];if(Wb(P,i)<d*.35){const U=M>0?Wb(v[M-1],i):1/0,z=M<B-1?Wb(v[M+1],i):1/0;v.splice(M,1),B-=1,U<z?(v[M-1]+=" "+P,M-=1):v[M]=P+" "+v[M]}}for(let M=0,B=v.length-1;M<B;++M){const P=v[M],U=v[M+1];if(Wb(P,i)>d*.7&&Wb(U,i)<d*.6){const z=P.split(" "),V=z.pop();Wb(V,i)<d*.2&&(v[M]=z.join(" "),v[M+1]=V+" "+U),B-=1}}o=v.join(`
`)}else o=n;o=ND(o,i),BE[r]=o}return o}const Abe=["Arial","Courier New","Times New Roman","Verdana","sans-serif","serif","monospace","cursive","fantasy"],EN={};function hbe(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){if(VA)return n;let t;for(let i=0,r=n.length;i<r;++i){const o=n[i];if(o in EN)continue;EN[o]=!0;const a=vD(o,16).split(" ");t||(t=[]),t.push([a.slice(3).join(" ").replace(/"/g,""),a[1],a[0]])}return t&&(async()=>{await document.fonts.ready;for(let i=0,r=t.length;i<r;++i){const o=t[i],s=o[0];if(Abe.includes(s))continue;const a=o[1],c=o[2];if(!(await document.fonts.load(`${c} ${a} 16px "${s}"`)).some(m=>m.family.replace(/^['"]|['"]$/g,"").toLowerCase()===s.toLowerCase()&&m.weight==a&&m.style===c)){const m=e.replace("{font-family}",s.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",s.replace(/ /g,"+")).replace("{fontweight}",a).replace("{-fontstyle}",c.replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",c);if(!document.querySelector('link[href="'+m+'"]')){const v=document.createElement("link");v.href=m,v.rel="stylesheet",document.head.appendChild(v)}}}})(),n}const dbe={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},fbe={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},pbe=function(n,e){const t=T0e(n,e);if(t.result==="error")throw new Error(t.value.map(i=>`${i.key}: ${i.message}`).join(", "));return t.value},Th={zoom:0,distanceFromCenter:0};bf.register(X6,{...bf.definitions,pitch:[{kind:"number"},[],n=>Th.pitch||90],"distance-from-center":[{kind:"number"},[],n=>Th.distanceFromCenter||0]});let fw,U8;function ji(n,e,t,i,r,o){const s=n.id;r||(r={},console.warn("No functionCache provided to getValue()")),r[s]||(r[s]={});const a=r[s];if(!a[t]){let c=(n[e]||WA)[t];const d=W0e[`${e}_${n.type}`][t];c===void 0&&(c=d.default);let m=I0e(c);if(!m&&dJ(c)&&(c=K0e(c,d),m=!0),m){const v=pbe(c,d);a[t]=v.evaluate.bind(v)}else{const v=d.type;(v==="color"||v==="colorArray")&&(c=Ls.parse(c)),a[t]=function(){return c}}}return a[t](Th,i,o)}function BN(n,e,t,i){return ji(n,"layout",`${t}-allow-overlap`,e,i)?ji(n,"layout",`${t}-ignore-placement`,e,i)?"none":"obstacle":"declutter"}function mbe(n,e,t,i){if(i||console.warn("No filterCache provided to evaluateFilter()"),!(n in i))try{i[n]=P0e(e).filter}catch(r){console.warn("Filter will evaluate to false: "+r.message),i[n]=function(){return!1}}return i[n](Th,t)}function nv(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const gbe=/\{[^{}}]*\}/g;function K8(n,e){return n.replace(gbe,function(t){return e[t.slice(1,-1)]||""})}function ON(n,e){let t=n.split(":")[0];return t===n&&(t="default"),e[t]}const ybe={};function vbe(n,e,t,i=Pm,r=void 0,o=void 0,s=void 0,a=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");ybe[abe(e,n)]=Array.from(arguments);const c={};(typeof o=="string"||o instanceof Request||o instanceof Response||o instanceof Promise)&&(o={default:o});for(const ie in o){const te=o[ie];h2(()=>te).then(async q=>{let le;if(typeof Image<"u"){const ce=new Image;if(typeof q=="string")ce.crossOrigin="anonymous",ce.src=q;else{let ve;q instanceof Request?ve=await fetch(q):q instanceof Response&&(ve=q);const ge=await ve.blob();le=URL.createObjectURL(ge),ce.src=le}ce.addEventListener("load",function ve(){ce.removeEventListener("load",ve),c[ie]={image:ce,size:[ce.width,ce.height]},n.changed(),le&&URL.revokeObjectURL(le)}),ce.addEventListener("error",function ve(){URL.revokeObjectURL(le),ce.removeEventListener("error",ve)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const ce=self;ce.postMessage({action:"loadImage",src:q}),ce.addEventListener("message",function(ge){ge.data.action==="imageLoaded"&&ge.data.src===q&&(c[ie]={image:ge.data.image,size:[ge.data.image.width,ge.data.image.height]})})}})}const d=YX(e.layers),m={},v=[],M={},B={},P=zee(e),U=lbe(e);let z;for(let ie=0,te=d.length;ie<te;++ie){const q=d[ie],le=q.id;if(typeof t=="string"&&q.source==t||Array.isArray(t)&&t.indexOf(le)!==-1){const ce=q["source-layer"];if(z){if(q.source!==z)throw new Error(`Layer "${le}" does not use source "${z}`)}else{z=q.source;const ge=e.sources[z];if(!ge)throw new Error(`Source "${z}" is not defined`);const Ee=ge.type;if(Ee!=="vector"&&Ee!=="geojson")throw new Error(`Source "${z}" is not of type "vector" or "geojson", but "${Ee}"`)}let ve=m[ce];ve||(ve=[],m[ce]=ve),ve.push({layer:q,index:ie}),v.push(le)}}const V=new pv,Z=new cg,X=[],re=function(ie,te,q){const le=n.getSource?.()?.format_?.layerName_??"mvt:layer",ce=ie.getProperties(),ve=m[ce[le]];if(!ve)return;let ge=i.indexOf(te);ge==-1&&(ge=EE(te,i)),Th.zoom=ge,Th.distanceFromCenter=0;const Ee=ie.getGeometry(),xe=dbe[Ee.getType()],Te=n.get("map");if(Te&&Te instanceof c5&&xe===1){const At=Te.getSize();if(At){const mt=Te.getView().getCenter(),Ue=Mf(Ee.getExtent());Th.distanceFromCenter=pge(mt,Ue)/te/At[1]}}const Fe={id:ie.getId(),properties:ce,type:xe},Ie=n.get("mapbox-featurestate")[ie.getId()];let Ye=-1;for(let At=0,mt=ve.length;At<mt;++At){const Ue=ve[At],De=Ue.layer,Ge=De.id;if(q!==void 0&&q!==Ge)continue;const Re=De.layout||WA,St=De.paint||WA;if(Re.visibility==="none"||"minzoom"in De&&ge<De.minzoom||"maxzoom"in De&&ge>=De.maxzoom)continue;const ut=De.filter;if(!ut||mbe(Ge,ut,Fe,U)){let kt,Ut,Le,ke,Oe,Ze;const bt=Ue.index;if(xe==3&&(De.type=="fill"||De.type=="fill-extrusion"))if(Ut=ji(De,"paint",De.type+"-opacity",Fe,P,Ie),De.type+"-pattern"in St){const Bn=ji(De,"paint",De.type+"-pattern",Fe,P,Ie);if(Bn){const je=typeof Bn=="string"?K8(Bn,ce):Bn.toString(),H=ON(je,c);if(r&&r[je]&&H){++Ye,Ze=X[Ye],(!Ze||!Ze.getFill()||Ze.getStroke()||Ze.getText())&&(Ze=new ff({fill:new cg}),X[Ye]=Ze),Le=Ze.getFill(),Ze.setZIndex(bt);const j=je+"."+Ut;let Q=B[j];if(!Q){const he=r[je],Me=vB(he.width,he.height),Ne=Me.getContext("2d");Ne.globalAlpha=Ut,Ne.drawImage(H.image,he.x,he.y,he.width,he.height,0,0,he.width,he.height),Q=Ne.createPattern(Me,"repeat"),B[j]=Q}Le.setColor(Q)}}}else kt=nv(ji(De,"paint",De.type+"-color",Fe,P,Ie),Ut),De.type+"-outline-color"in St&&(Oe=nv(ji(De,"paint",De.type+"-outline-color",Fe,P,Ie),Ut)),Oe||(Oe=kt),(kt||Oe)&&(++Ye,Ze=X[Ye],(!Ze||kt&&!Ze.getFill()||!kt&&Ze.getFill()||Oe&&!Ze.getStroke()||!Oe&&Ze.getStroke()||Ze.getText())&&(Ze=new ff({fill:kt?new cg:void 0,stroke:Oe?new pv:void 0}),X[Ye]=Ze),kt&&(Le=Ze.getFill(),Le.setColor(kt)),Oe&&(ke=Ze.getStroke(),ke.setColor(Oe),ke.setWidth(.5)),Ze.setZIndex(bt));if(xe!=1&&De.type=="line"){"line-pattern"in St?kt=void 0:kt=nv(ji(De,"paint","line-color",Fe,P,Ie),ji(De,"paint","line-opacity",Fe,P,Ie));const Bn=ji(De,"paint","line-width",Fe,P,Ie);kt&&Bn>0&&(++Ye,Ze=X[Ye],(!Ze||!Ze.getStroke()||Ze.getFill()||Ze.getText())&&(Ze=new ff({stroke:new pv}),X[Ye]=Ze),ke=Ze.getStroke(),ke.setLineCap(ji(De,"layout","line-cap",Fe,P,Ie)),ke.setLineJoin(ji(De,"layout","line-join",Fe,P,Ie)),ke.setMiterLimit(ji(De,"layout","line-miter-limit",Fe,P,Ie)),ke.setColor(kt),ke.setWidth(Bn),ke.setLineDash(St["line-dasharray"]?ji(De,"paint","line-dasharray",Fe,P,Ie).map(function(je){return je*Bn}):null),Ze.setZIndex(bt))}let yt=!1,Mt=null,Kt=0,Dt,en,Gn;if((xe==1||xe==2)&&"icon-image"in Re){const Bn=ji(De,"layout","icon-image",Fe,P,Ie);if(Bn){Dt=typeof Bn=="string"?K8(Bn,ce):Bn.toString();let je;const H=a?a(n,Dt):void 0,j=ON(Dt,c);if(r&&r[Dt]&&j||H){const Q=ji(De,"layout","icon-rotation-alignment",Fe,P,Ie);if(xe==2){const he=ie.getGeometry();if(he.getFlatMidpoint||he.getFlatMidpoints){const Me=he.getExtent();if(Math.sqrt(Math.max(Math.pow((Me[2]-Me[0])/te,2),Math.pow((Me[3]-Me[1])/te,2)))>150){const Qe=he.getType()==="MultiLineString"?he.getFlatMidpoints():he.getFlatMidpoint();if(U8||(fw=[NaN,NaN],U8=new YA("Point",fw,[],2,{},void 0)),je=U8,fw[0]=Qe[0],fw[1]=Qe[1],ji(De,"layout","symbol-placement",Fe,P,Ie)==="line"&&Q==="map"){const vt=he.getStride(),$e=he.getFlatCoordinates();for(let ot=0,b=$e.length-vt;ot<b;ot+=vt){const Rt=$e[ot],mn=$e[ot+1],bn=$e[ot+vt],Cn=$e[ot+vt+1],xt=Math.min(Rt,bn),Ci=Math.max(Rt,bn),Ki=Qe[0],Wn=Qe[1],Hn=(Cn-mn)*(Ki-Rt)-(bn-Rt)*(Wn-mn);if(Math.abs(Hn)<.001&&Ki<=Ci&&Ki>=xt){Kt=Math.atan2(mn-Cn,bn-Rt);break}}}}}}if(xe!==2||je){const he=ji(De,"layout","icon-size",Fe,P,Ie),Me=St["icon-color"]!==void 0?ji(De,"paint","icon-color",Fe,P,Ie):null;if(!Me||Me.a!==0){const Ne=ji(De,"paint","icon-halo-color",Fe,P,Ie),Qe=ji(De,"paint","icon-halo-width",Fe,P,Ie);let it=`${Dt}.${he}.${Qe}.${Ne}`;if(Me!==null&&(it+=`.${Me}`),en=M[it],!en){const vt=BN(De,Fe,"icon",P);let $e;"icon-offset"in Re&&($e=ji(De,"layout","icon-offset",Fe,P,Ie).slice(0),$e[0]*=he,$e[1]*=-he);let ot=Me?[Me.r*255,Me.g*255,Me.b*255,Me.a]:void 0;if(H){const b={color:ot,rotateWithView:Q==="map",displacement:$e,declutterMode:vt,scale:he};typeof H=="string"?b.src=H:(b.img=H,b.imgSize=[H.width,H.height]),en=new g2(b)}else{const b=r[Dt];let Rt,mn,bn;if(Qe)b.sdf?(Rt=wN(SN(j.image,b,Me||[0,0,0,1]),{x:0,y:0,width:b.width,height:b.height,pixelRatio:b.pixelRatio},Qe,Ne),ot=void 0):Rt=wN(j.image,b,Qe,Ne);else{if(b.sdf&&!j.unSDFed){const Cn=SN(j.image,{x:0,y:0,width:j.size[0],height:j.size[1]},{r:1,g:1,b:1});j.image=Cn,j.unSDFed=!0}Rt=j.image,mn=[b.width,b.height],bn=[b.x,b.y]}en=new g2({color:ot,img:Rt,imgSize:j.size,size:mn,offset:bn,rotateWithView:Q==="map",scale:he/b.pixelRatio,displacement:$e,declutterMode:vt})}M[it]=en}}en&&(++Ye,Ze=X[Ye],(!Ze||!Ze.getImage()||Ze.getFill()||Ze.getStroke())&&(Ze=new ff,X[Ye]=Ze),Ze.setGeometry(je),en.setRotation(Kt+P8(ji(De,"layout","icon-rotate",Fe,P,Ie))),en.setOpacity(ji(De,"paint","icon-opacity",Fe,P,Ie)),en.setAnchor(fbe[ji(De,"layout","icon-anchor",Fe,P,Ie)]),Ze.setImage(en),Mt=Ze.getText(),Ze.setText(void 0),Ze.setZIndex(bt),yt=!0,Gn=!1)}else Gn=!0}}}if(xe==1&&De.type==="circle"){++Ye,Ze=X[Ye],(!Ze||!Ze.getImage()||Ze.getFill()||Ze.getStroke())&&(Ze=new ff,X[Ye]=Ze);const Bn="circle-radius"in St?ji(De,"paint","circle-radius",Fe,P,Ie):5,je=nv(ji(De,"paint","circle-stroke-color",Fe,P,Ie),ji(De,"paint","circle-stroke-opacity",Fe,P,Ie)),H=ji(De,"paint","circle-translate",Fe,P,Ie),j=nv(ji(De,"paint","circle-color",Fe,P,Ie),ji(De,"paint","circle-opacity",Fe,P,Ie)),Q=ji(De,"paint","circle-stroke-width",Fe,P,Ie),he=Bn+"."+je+"."+j+"."+Q+"."+H[0]+"."+H[1];en=M[he],en||(en=new pM({radius:Bn,displacement:[H[0],-H[1]],stroke:je&&Q>0?new pv({width:Q,color:je}):void 0,fill:j?new cg({color:j}):void 0,declutterMode:"none"}),M[he]=en),Ze.setImage(en),Mt=Ze.getText(),Ze.setText(void 0),Ze.setGeometry(void 0),Ze.setZIndex(bt),yt=!0}let Nn,Si,Un,Ln,Tn,ti;if("text-field"in Re){Ln=Math.round(ji(De,"layout","text-size",Fe,P,Ie));const Bn=ji(De,"layout","text-font",Fe,P,Ie);Un=ji(De,"layout","text-line-height",Fe,P,Ie),Si=vD(s?s(Bn,e.metadata?e.metadata["ol:webfonts"]:void 0):Bn,Ln,Un),Si.includes("sans-serif")||(Si+=",sans-serif"),Tn=ji(De,"layout","text-letter-spacing",Fe,P,Ie),ti=ji(De,"layout","text-max-width",Fe,P,Ie);const je=ji(De,"layout","text-field",Fe,P,Ie);typeof je=="object"&&je.sections?je.sections.length===1?Nn=je.toString():Nn=je.sections.reduce((H,j,Q)=>{const he=j.fontStack?j.fontStack.split(","):Bn,Me=vD(s?s(he):he,Ln*(j.scale||1),Un);let Ne=j.text;if(Ne===`
`)return H.push(`
`,""),H;if(xe==2)return H.push(ND(Ne,Tn),Me),H;Ne=GD(Ne,Me,ti,Tn).split(`
`);for(let Qe=0,it=Ne.length;Qe<it;++Qe)Qe>0&&H.push(`
`,""),H.push(Ne[Qe],Me);return H},[]):Nn=K8(je,ce).trim(),Ut=ji(De,"paint","text-opacity",Fe,P,Ie)}if(Nn&&Ut&&!Gn){yt||(++Ye,Ze=X[Ye],(!Ze||!Ze.getText()||Ze.getFill()||Ze.getStroke())&&(Ze=new ff,X[Ye]=Ze),Ze.setImage(void 0),Ze.setGeometry(void 0));const Bn=BN(De,Fe,"text",P);Ze.getText()||Ze.setText(Mt),Mt=Ze.getText(),(!Mt||"getDeclutterMode"in Mt&&Mt.getDeclutterMode()!==Bn)&&(Mt=new yee({padding:[2,2,2,2],declutterMode:Bn}),Ze.setText(Mt));const je=ji(De,"layout","text-transform",Fe,P,Ie);je=="uppercase"?Nn=Array.isArray(Nn)?Nn.map((bn,Cn)=>Cn%2?bn:bn.toUpperCase()):Nn.toUpperCase():je=="lowercase"&&(Nn=Array.isArray(Nn)?Nn.map((bn,Cn)=>Cn%2?bn:bn.toLowerCase()):Nn.toLowerCase());const H=Array.isArray(Nn)?Nn:xe==2?ND(Nn,Tn):GD(Nn,Si,ti,Tn);if(Mt.setText(H),Mt.setFont(Si),Mt.setRotation(P8(ji(De,"layout","text-rotate",Fe,P,Ie))),typeof Mt.setKeepUpright=="function"){const bn=ji(De,"layout","text-keep-upright",Fe,P,Ie);Mt.setKeepUpright(bn)}const j=ji(De,"layout","text-anchor",Fe,P,Ie),Q=yt||xe==1?"point":ji(De,"layout","symbol-placement",Fe,P,Ie);let he;if(Q==="line-center"?(Mt.setPlacement("line"),he="center"):Mt.setPlacement(Q),Q==="line"&&typeof Mt.setRepeat=="function"){const bn=ji(De,"layout","symbol-spacing",Fe,P,Ie);Mt.setRepeat(bn*2)}Mt.setOverflow(Q==="point");let Me=ji(De,"paint","text-halo-width",Fe,P,Ie);const Ne=ji(De,"layout","text-offset",Fe,P,Ie),Qe=ji(De,"paint","text-translate",Fe,P,Ie);let it=0,vt=0;if(Q=="point"){he="center",j.indexOf("left")!==-1?(he="left",vt=Me):j.indexOf("right")!==-1&&(he="right",vt=-Me);const bn=ji(De,"layout","text-rotation-alignment",Fe,P,Ie);Mt.setRotateWithView(bn=="map")}else Mt.setMaxAngle(P8(ji(De,"layout","text-max-angle",Fe,P,Ie))*Nn.length/H.length),Mt.setRotateWithView(!1);Mt.setTextAlign(he);let $e="middle";j.indexOf("bottom")==0?($e="bottom",it=-Me-.5*(Un-1)*Ln):j.indexOf("top")==0&&($e="top",it=Me+.5*(Un-1)*Ln),Mt.setTextBaseline($e);const ot=ji(De,"layout","text-justify",Fe,P,Ie);Mt.setJustify(ot==="auto"?void 0:ot),Mt.setOffsetX(Ne[0]*Ln+vt+Qe[0]),Mt.setOffsetY(Ne[1]*Ln+it+Qe[1]),Z.setColor(nv(ji(De,"paint","text-color",Fe,P,Ie),Ut)),Mt.setFill(Z);const b=nv(ji(De,"paint","text-halo-color",Fe,P,Ie),Ut);if(b&&Me>0){V.setColor(b),Me*=2;const bn=.5*Ln;V.setWidth(Me<=bn?Me:bn),Mt.setStroke(V)}else Mt.setStroke(void 0);const Rt=ji(De,"layout","text-padding",Fe,P,Ie),mn=Mt.getPadding();Rt!==mn[0]&&(mn[0]=Rt,mn[1]=Rt,mn[2]=Rt,mn[3]=Rt),Ze.setZIndex(bt)}}}if(Ye>-1)return X.length=Ye+1,X};return n.setStyle(re),n.set("mapbox-layers",v),n.set("mapbox-source",z),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),re}class Wee{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=yB,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?Us(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Us(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return wr()}readFeature(e,t){return wr()}readFeatures(e,t){return wr()}readGeometry(e,t){return wr()}readProjection(e){return wr()}writeFeature(e,t){return wr()}writeFeatures(e,t){return wr()}writeGeometry(e,t){return wr()}}function bB(n,e,t){const i=t?Us(t.featureProjection):null,r=t?Us(t.dataProjection):null;let o=n;if(i&&r&&!qA(i,r)){e&&(o=n.clone());const s=e?i:r,a=e?r:i;s.getUnits()==="tile-pixels"?o.transform(s,a):o.applyTransform(TC(s,a))}if(e&&t&&t.decimals!==void 0){const s=Math.pow(10,t.decimals),a=function(c){for(let d=0,m=c.length;d<m;++d)c[d]=Math.round(c[d]*s)/s;return c};o===n&&(o=n.clone()),o.applyTransform(a)}return o}const bbe={Point:kC,LineString:RC,Polygon:F1,MultiPoint:gM,MultiLineString:A5,MultiPolygon:h5};function Cbe(n,e,t){return Array.isArray(e[0])?(ZJ(n,0,e,t)||(n=n.slice(),DD(n,0,e,t)),n):(UL(n,0,e,t)||(n=n.slice(),pE(n,0,e,t)),n)}function Qee(n,e){const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>Qee({...n,geometry:o})).flat();const i=t.type==="MultiPolygon"?"Polygon":t.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const r=t.layout.length;return bB(new YA(i,i==="Polygon"?Cbe(t.flatCoordinates,t.ends,r):t.flatCoordinates,t.ends?.flat(),r,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function aU(n,e){if(!n)return null;if(Array.isArray(n)){const i=n.map(r=>aU(r,e));return new _E(i)}const t=bbe[n.type];return bB(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class _be extends Wee{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(pw(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(pw(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return wr()}readFeaturesFromObject(e,t){return wr()}readGeometry(e,t){return this.readGeometryFromObject(pw(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return wr()}readProjection(e){return this.readProjectionFromObject(pw(e))}readProjectionFromObject(e){return wr()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return wr()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return wr()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return wr()}}function pw(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class IN extends _be{constructor(e){e=e||{},super(),this.dataProjection=Us(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Us(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const r=lU(i.geometry);if(this.featureClass===YA)return Qee({geometry:r,id:i.id,properties:i.properties},t);const o=new yB;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&o.setGeometryName(i.geometry_name),o.setGeometry(aU(r,t)),"id"in i&&o.setId(i.id),i.properties&&o.setProperties(i.properties,!0),o}readFeaturesFromObject(e,t){const i=e;let r=null;if(i.type==="FeatureCollection"){const o=e;r=[];const s=o.features;for(let a=0,c=s.length;a<c;++a){const d=this.readFeatureFromObject(s[a],t);d&&r.push(d)}}else r=[this.readFeatureFromObject(e,t)];return r.flat()}readGeometryFromObject(e,t){return xbe(e,t)}readProjectionFromObject(e){const t=e.crs;let i;if(t)if(t.type=="name")i=Us(t.properties.name);else if(t.type==="EPSG")i=Us("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(i.id=r),!e.hasProperties())return i;const o=e.getProperties(),s=e.getGeometry();return s&&(i.geometry=WD(s,t),delete o[e.getGeometryName()]),Ov(o)||(i.properties=o),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let r=0,o=e.length;r<o;++r)i.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return WD(e,this.adaptOptions(t))}}function lU(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=wbe(n);break}case"LineString":{t=Sbe(n);break}case"Polygon":{t=Ibe(n);break}case"MultiPoint":{t=Bbe(n);break}case"MultiLineString":{t=Ebe(n);break}case"MultiPolygon":{t=Obe(n);break}case"GeometryCollection":{t=Mbe(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function xbe(n,e){const t=lU(n);return aU(t,e)}function Mbe(n,e){return n.geometries.map(function(i){return lU(i)})}function wbe(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:QC(e.length)}}function Sbe(n){const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:QC(e[0]?.length||2)}}function Ebe(n){const e=n.coordinates,t=e[0]?.[0]?.length||2,i=[],r=AM(i,0,e,t);return{type:"MultiLineString",flatCoordinates:i,ends:r,layout:QC(t)}}function Bbe(n){const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:QC(e[0]?.length||2)}}function Obe(n){const e=n.coordinates,t=[],i=e[0]?.[0]?.[0].length||2,r=QJ(t,0,e,i);return{type:"MultiPolygon",flatCoordinates:t,ends:r,layout:QC(i)}}function Ibe(n){const e=n.coordinates,t=[],i=e[0]?.[0]?.length,r=AM(t,0,e,i);return{type:"Polygon",flatCoordinates:t,ends:r,layout:QC(i)}}function WD(n,e){n=bB(n,!0,e);const t=n.getType();let i;switch(t){case"Point":{i=Lbe(n);break}case"LineString":{i=kbe(n);break}case"Polygon":{i=Ube(n,e);break}case"MultiPoint":{i=Rbe(n);break}case"MultiLineString":{i=Dbe(n);break}case"MultiPolygon":{i=Pbe(n,e);break}case"GeometryCollection":{i=Tbe(n,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function Tbe(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(i){return WD(i,e)})}}function kbe(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function Dbe(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function Rbe(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function Pbe(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function Lbe(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function Ube(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const QD=65536*65536,TN=1/QD,Kbe=12,kN=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),F8=0,mw=1,M3=2,gw=5;class Fbe{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,i=this.length){for(;this.pos<i;){const r=this.readVarint(),o=r>>3,s=this.pos;this.type=r&7,e(o,t,this),this.pos===s&&this.skip(r)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*QD;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*QD;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let i,r;return r=t[this.pos++],i=r&127,r<128||(r=t[this.pos++],i|=(r&127)<<7,r<128)||(r=t[this.pos++],i|=(r&127)<<14,r<128)||(r=t[this.pos++],i|=(r&127)<<21,r<128)?i:(r=t[this.pos],i|=(r&15)<<28,zbe(i,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=Kbe&&kN?kN.decode(this.buf.subarray(t,e)):Jbe(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===M3?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===F8)for(;this.buf[this.pos++]>127;);else if(t===M3)this.pos=this.readVarint()+this.pos;else if(t===gw)this.pos+=4;else if(t===mw)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.dataView=new DataView(i.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*TN),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*TN),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){jbe(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=eCe(this.buf,e,this.pos);const i=this.pos-t;i>=128&&DN(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let i=0;i<t;i++)this.buf[this.pos++]=e[i]}writeRawMessage(e,t){this.pos++;const i=this.pos;e(t,this);const r=this.pos-i;r>=128&&DN(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r}writeMessage(e,t,i){this.writeTag(e,M3),this.writeRawMessage(t,i)}writePackedVarint(e,t){t.length&&this.writeMessage(e,Wbe,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,Qbe,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,Vbe,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,qbe,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,Ybe,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,$be,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,Hbe,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,Zbe,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,Xbe,t)}writeBytesField(e,t){this.writeTag(e,M3),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,gw),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,gw),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,mw),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,mw),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,F8),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,F8),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,M3),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,gw),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,mw),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function zbe(n,e,t){const i=t.buf;let r,o;if(o=i[t.pos++],r=(o&112)>>4,o<128||(o=i[t.pos++],r|=(o&127)<<3,o<128)||(o=i[t.pos++],r|=(o&127)<<10,o<128)||(o=i[t.pos++],r|=(o&127)<<17,o<128)||(o=i[t.pos++],r|=(o&127)<<24,o<128)||(o=i[t.pos++],r|=(o&1)<<31,o<128))return G_(n,r,e);throw new Error("Expected varint not more than 10 bytes")}function G_(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function jbe(n,e){let t,i;if(n>=0?(t=n%4294967296|0,i=n/4294967296|0):(t=~(-n%4294967296),i=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,i=i+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),Nbe(t,i,e),Gbe(i,e)}function Nbe(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function Gbe(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function DN(n,e,t){const i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(i);for(let r=t.pos-1;r>=n;r--)t.buf[r+i]=t.buf[r]}function Wbe(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function Qbe(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function qbe(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function Ybe(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function Vbe(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function $be(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function Hbe(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function Zbe(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function Xbe(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function Jbe(n,e,t){let i="",r=e;for(;r<t;){const o=n[r];let s=null,a=o>239?4:o>223?3:o>191?2:1;if(r+a>t)break;let c,d,m;a===1?o<128&&(s=o):a===2?(c=n[r+1],(c&192)===128&&(s=(o&31)<<6|c&63,s<=127&&(s=null))):a===3?(c=n[r+1],d=n[r+2],(c&192)===128&&(d&192)===128&&(s=(o&15)<<12|(c&63)<<6|d&63,(s<=2047||s>=55296&&s<=57343)&&(s=null))):a===4&&(c=n[r+1],d=n[r+2],m=n[r+3],(c&192)===128&&(d&192)===128&&(m&192)===128&&(s=(o&15)<<18|(c&63)<<12|(d&63)<<6|m&63,(s<=65535||s>=1114112)&&(s=null))),s===null?(s=65533,a=1):s>65535&&(s-=65536,i+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),i+=String.fromCharCode(s),r+=a}return i}function eCe(n,e,t){for(let i=0,r,o;i<e.length;i++){if(r=e.charCodeAt(i),r>55295&&r<57344)if(o)if(r<56320){n[t++]=239,n[t++]=191,n[t++]=189,o=r;continue}else r=o-55296<<10|r-56320|65536,o=null;else{r>56319||i+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):o=r;continue}else o&&(n[t++]=239,n[t++]=191,n[t++]=189,o=null);r<128?n[t++]=r:(r<2048?n[t++]=r>>6|192:(r<65536?n[t++]=r>>12|224:(n[t++]=r>>18|240,n[t++]=r>>12&63|128),n[t++]=r>>6&63|128),n[t++]=r&63|128)}return t}class qee extends Wee{constructor(e){super(),e=e||{},this.dataProjection=new sB({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:YA,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,i,r){e.pos=t.geometry;const o=e.readVarint()+e.pos;let s=1,a=0,c=0,d=0,m=0,v=0;for(;e.pos<o;){if(!a){const M=e.readVarint();s=M&7,a=M>>3}if(a--,s===1||s===2)c+=e.readSVarint(),d+=e.readSVarint(),s===1&&m>v&&(r.push(m),v=m),i.push(c,d),m+=2;else if(s===7)m>v&&(i.push(i[v],i[v+1]),m+=2);else throw new Error("Invalid command found in the PBF")}m>v&&(r.push(m),v=m)}createFeature_(e,t,i){const r=t.type;if(r===0)return null;let o;const s=t.properties;let a;this.idProperty_?(a=s[this.idProperty_],delete s[this.idProperty_]):a=t.id,s[this.layerName_]=t.layer.name;const c=[],d=[];this.readRawGeometry_(e,t,c,d);const m=oCe(r,d.length);if(this.featureClass===YA)o=new this.featureClass(m,c,d,2,s,a),o.transform(i.dataProjection);else{let v;if(m=="Polygon"){const P=XJ(c,d);v=P.length>1?new h5(c,"XY",P):new F1(c,"XY",d)}else v=m==="Point"?new kC(c,"XY"):m==="LineString"?new RC(c,"XY"):m==="MultiPoint"?new gM(c,"XY"):m==="MultiLineString"?new A5(c,"XY",d):null;const M=this.featureClass;o=new M,this.geometryName_&&o.setGeometryName(this.geometryName_);const B=bB(v,!1,i);o.setGeometry(B),a!==void 0&&o.setId(a),o.setProperties(s,!0)}return o}getType(){return"arraybuffer"}readFeatures(e,t){const i=this.layers_;t=this.adaptOptions(t);const r=Us(t.dataProjection);r.setWorldExtent(t.extent),t.dataProjection=r;const o=new Fbe(e),s=o.readFields(tCe,{}),a=[];for(const c in s){if(i&&!i.includes(c))continue;const d=s[c],m=d?[0,0,d.extent,d.extent]:null;r.setExtent(m);for(let v=0,M=d.length;v<M;++v){const B=rCe(o,d,v),P=this.createFeature_(o,B,t);P!==null&&a.push(P)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function tCe(n,e,t){if(n===3){const i={keys:[],values:[],features:[]},r=t.readVarint()+t.pos;t.readFields(nCe,i,r),i.length=i.features.length,i.length&&(e[i.name]=i)}}function nCe(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let i=null;const r=t.readVarint()+t.pos;for(;t.pos<r;)n=t.readVarint()>>3,i=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(i)}}function iCe(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const i=t.readVarint()+t.pos;for(;t.pos<i;){const r=e.layer.keys[t.readVarint()],o=e.layer.values[t.readVarint()];e.properties[r]=o}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function rCe(n,e,t){n.pos=e.features[t];const i=n.readVarint()+n.pos,r={layer:e,type:0,properties:{}};return n.readFields(iCe,r,i),r}function oCe(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}class sCe extends nU{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],i=e.pixelRatio,r=e.viewState,o=r.resolution,s=this.getLayer().getSource(),a=e.viewHints;let c=e.extent;if(t.extent!==void 0&&(c=Rm(c,lg(t.extent,r.projection))),!a[ol.ANIMATING]&&!a[ol.INTERACTING]&&!GC(c))if(s){const d=r.projection,m=s.getImage(c,o,i,d);m&&(this.loadImage(m)?this.image=m:m.getState()===Ni.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=Fu(t.pixelToCoordinateTransform,e.slice()),o=i.getExtent();if(o&&!IC(o,r))return null;const s=this.image.getExtent(),a=this.image.getImage(),c=Ho(s),d=Math.floor(a.width*((r[0]-s[0])/c));if(d<0||d>=a.width)return null;const m=Nu(s),v=Math.floor(a.height*((s[3]-r[1])/m));return v<0||v>=a.height?null:this.getImageData(a,d,v)}renderFrame(e,t){const i=this.image,r=i.getExtent(),o=i.getResolution(),[s,a]=Array.isArray(o)?o:[o,o],c=i.getPixelRatio(),d=e.layerStatesArray[e.layerIndex],m=e.pixelRatio,v=e.viewState,M=v.center,B=v.resolution,P=m*s/(B*c),U=m*a/(B*c);this.prepareContainer(e,t);const z=this.context.canvas.width,V=this.context.canvas.height,Z=this.getRenderContext(e);let X=!1,re=!0;if(d.extent){const ce=lg(d.extent,v.projection);re=ql(ce,e.extent),X=re&&!ag(ce,e.extent),X&&this.clipUnrotated(Z,e,ce)}const ie=i.getImage(),te=xg(this.tempTransform,z/2,V/2,P,U,0,c*(r[0]-M[0])/s,c*(M[1]-r[3])/a);this.renderedResolution=a*m/c;const q=ie.width*te[0],le=ie.height*te[3];if(this.getLayer().getSource().getInterpolate()||(Z.imageSmoothingEnabled=!1),this.preRender(Z,e),re&&q>=.5&&le>=.5){const ce=te[4],ve=te[5],ge=d.opacity;ge!==1&&(Z.save(),Z.globalAlpha=ge),Z.drawImage(ie,0,0,+ie.width,+ie.height,ce,ve,q,le),ge!==1&&Z.restore()}return this.postRender(this.context,e),X&&Z.restore(),Z.imageSmoothingEnabled=!0,this.container}}class aCe extends K2{constructor(e){e=e||{},super(e)}}class uU extends aCe{constructor(e){super(e)}createRenderer(){return new sCe(this)}getData(e){return super.getData(e)}}function qD(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const lCe=new Error("disposed"),uCe=[256,256];class RN extends vM{constructor(e){const t=oi.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=qD(this.data_);return e?[e.width,e.height]:uCe}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==oi.IDLE&&this.state!==oi.ERROR)return;this.state=oi.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=oi.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=oi.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(lCe),this.controller_=null),super.disposeInternal()}}let z8;const Wx=[];function PN(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function j8(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function cCe(){if(z8===void 0){const n=_l(6,6,Wx);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",PN(n,4,5,4,0),PN(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;z8=j8(e,0)||j8(e,4)||j8(e,8),hM(n),Wx.push(n.canvas)}return z8}function YD(n,e,t,i){const r=uB(t,e,n);let o=BD(e,i,t);const s=e.getMetersPerUnit();s!==void 0&&(o*=s);const a=n.getMetersPerUnit();a!==void 0&&(o/=a);const c=n.getExtent();if(!c||IC(c,r)){const d=BD(n,o,r)/o;isFinite(d)&&d>0&&(o/=d)}return o}function ACe(n,e,t,i){const r=Mf(t);let o=YD(n,e,r,i);return(!isFinite(o)||o<=0)&&SJ(t,function(s){return o=YD(n,e,s,i),isFinite(o)&&o>0}),o}function Yee(n,e,t,i,r,o,s,a,c,d,m,v,M,B){const P=_l(Math.round(t*n),Math.round(t*e),Wx);if(v||(P.imageSmoothingEnabled=!1),c.length===0)return P.canvas;P.scale(t,t);function U(ie){return Math.round(ie*t)/t}P.globalCompositeOperation="lighter";const z=Sp();c.forEach(function(ie,te,q){MJ(z,ie.extent)});let V;const Z=t/i,X=(v?1:1+Math.pow(2,-24))/Z;(!M||c.length!==1||d!==0)&&(V=_l(Math.round(Ho(z)*Z),Math.round(Nu(z)*Z),Wx),v||(V.imageSmoothingEnabled=!1),c.forEach(function(ie,te,q){if(ie.image.width>0&&ie.image.height>0){if(ie.clipExtent){V.save();const Ee=(ie.clipExtent[0]-z[0])*Z,xe=-(ie.clipExtent[3]-z[3])*Z,Te=Ho(ie.clipExtent)*Z,Fe=Nu(ie.clipExtent)*Z;V.rect(v?Ee:Math.round(Ee),v?xe:Math.round(xe),v?Te:Math.round(Ee+Te)-Math.round(Ee),v?Fe:Math.round(xe+Fe)-Math.round(xe)),V.clip()}const le=(ie.extent[0]-z[0])*Z,ce=-(ie.extent[3]-z[3])*Z,ve=Ho(ie.extent)*Z,ge=Nu(ie.extent)*Z;V.drawImage(ie.image,d,d,ie.image.width-2*d,ie.image.height-2*d,v?le:Math.round(le),v?ce:Math.round(ce),v?ve:Math.round(le+ve)-Math.round(le),v?ge:Math.round(ce+ge)-Math.round(ce)),ie.clipExtent&&V.restore()}}));const re=G1(s);return a.getTriangles().forEach(function(ie,te,q){const le=ie.source,ce=ie.target;let ve=le[0][0],ge=le[0][1],Ee=le[1][0],xe=le[1][1],Te=le[2][0],Fe=le[2][1];const Ie=U((ce[0][0]-re[0])/o),Ye=U(-(ce[0][1]-re[1])/o),At=U((ce[1][0]-re[0])/o),mt=U(-(ce[1][1]-re[1])/o),Ue=U((ce[2][0]-re[0])/o),De=U(-(ce[2][1]-re[1])/o),Ge=ve,Re=ge;ve=0,ge=0,Ee-=Ge,xe-=Re,Te-=Ge,Fe-=Re;const St=[[Ee,xe,0,0,At-Ie],[Te,Fe,0,0,Ue-Ie],[0,0,Ee,xe,mt-Ye],[0,0,Te,Fe,De-Ye]],ut=oge(St);if(!ut)return;if(P.save(),P.beginPath(),cCe()||!v){P.moveTo(At,mt);const Ut=4,Le=Ie-At,ke=Ye-mt;for(let Oe=0;Oe<Ut;Oe++)P.lineTo(At+U((Oe+1)*Le/Ut),mt+U(Oe*ke/(Ut-1))),Oe!=Ut-1&&P.lineTo(At+U((Oe+1)*Le/Ut),mt+U((Oe+1)*ke/(Ut-1)));P.lineTo(Ue,De)}else P.moveTo(At,mt),P.lineTo(Ie,Ye),P.lineTo(Ue,De);P.clip(),P.transform(ut[0],ut[2],ut[1],ut[3],Ie,Ye),P.translate(z[0]-Ge,z[3]-Re);let kt;if(V)kt=V.canvas,P.scale(X,-X);else{const Ut=c[0],Le=Ut.extent;kt=Ut.image,P.scale(Ho(Le)/kt.width,-Nu(Le)/kt.height)}P.drawImage(kt,0,0),P.restore()}),V&&(hM(V),Wx.push(V.canvas)),m&&(P.save(),P.globalCompositeOperation="source-over",P.strokeStyle="black",P.lineWidth=1,a.getTriangles().forEach(function(ie,te,q){const le=ie.target,ce=(le[0][0]-re[0])/o,ve=-(le[0][1]-re[1])/o,ge=(le[1][0]-re[0])/o,Ee=-(le[1][1]-re[1])/o,xe=(le[2][0]-re[0])/o,Te=-(le[2][1]-re[1])/o;P.beginPath(),P.moveTo(ge,Ee),P.lineTo(ce,ve),P.lineTo(xe,Te),P.closePath(),P.stroke()}),P.restore()),P.canvas}const hCe=10,LN=.25;class Vee{constructor(e,t,i,r,o,s,a){this.sourceProj_=e,this.targetProj_=t;let c={};const d=a?qge(X=>Fu(a,uB(X,this.targetProj_,this.sourceProj_))):TC(this.targetProj_,this.sourceProj_);this.transformInv_=function(X){const re=X[0]+"/"+X[1];return c[re]||(c[re]=d(X)),c[re]},this.maxSourceExtent_=r,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Ho(r)>=Ho(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ho(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ho(this.targetProj_.getExtent()):null;const m=G1(i),v=oB(i),M=rB(i),B=iB(i),P=this.transformInv_(m),U=this.transformInv_(v),z=this.transformInv_(M),V=this.transformInv_(B),Z=hCe+(s?Math.max(0,Math.ceil(Math.log2(MD(i)/(s*s*256*256)))):0);if(this.addQuad_(m,v,M,B,P,U,z,V,Z),this.wrapsXInSource_){let X=1/0;this.triangles_.forEach(function(re,ie,te){X=Math.min(X,re.source[0][0],re.source[1][0],re.source[2][0])}),this.triangles_.forEach(re=>{if(Math.max(re.source[0][0],re.source[1][0],re.source[2][0])-X>this.sourceWorldWidth_/2){const ie=[[re.source[0][0],re.source[0][1]],[re.source[1][0],re.source[1][1]],[re.source[2][0],re.source[2][1]]];ie[0][0]-X>this.sourceWorldWidth_/2&&(ie[0][0]-=this.sourceWorldWidth_),ie[1][0]-X>this.sourceWorldWidth_/2&&(ie[1][0]-=this.sourceWorldWidth_),ie[2][0]-X>this.sourceWorldWidth_/2&&(ie[2][0]-=this.sourceWorldWidth_);const te=Math.min(ie[0][0],ie[1][0],ie[2][0]);Math.max(ie[0][0],ie[1][0],ie[2][0])-te<this.sourceWorldWidth_/2&&(re.source=ie)}})}c={}}addTriangle_(e,t,i,r,o,s){this.triangles_.push({source:[r,o,s],target:[e,t,i]})}addQuad_(e,t,i,r,o,s,a,c,d){const m=_D([o,s,a,c]),v=this.sourceWorldWidth_?Ho(m)/this.sourceWorldWidth_:null,M=this.sourceWorldWidth_,B=this.sourceProj_.canWrapX()&&v>.5&&v<1;let P=!1;if(d>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const z=_D([e,t,i,r]);P=Ho(z)/this.targetWorldWidth_>LN||P}!B&&this.sourceProj_.isGlobal()&&v&&(P=v>LN||P)}if(!P&&this.maxSourceExtent_&&isFinite(m[0])&&isFinite(m[1])&&isFinite(m[2])&&isFinite(m[3])&&!ql(m,this.maxSourceExtent_))return;let U=0;if(!P&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(c[0])||!isFinite(c[1]))){if(d>0)P=!0;else if(U=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(s[0])||!isFinite(s[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(c[0])||!isFinite(c[1])?1:0),U!=1&&U!=2&&U!=4&&U!=8)return}if(d>0){if(!P){const z=[(e[0]+i[0])/2,(e[1]+i[1])/2],V=this.transformInv_(z);let Z;B?Z=(CC(o[0],M)+CC(a[0],M))/2-CC(V[0],M):Z=(o[0]+a[0])/2-V[0];const X=(o[1]+a[1])/2-V[1];P=Z*Z+X*X>this.errorThresholdSquared_}if(P){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const z=[(t[0]+i[0])/2,(t[1]+i[1])/2],V=this.transformInv_(z),Z=[(r[0]+e[0])/2,(r[1]+e[1])/2],X=this.transformInv_(Z);this.addQuad_(e,t,z,Z,o,s,V,X,d-1),this.addQuad_(Z,z,i,r,X,V,a,c,d-1)}else{const z=[(e[0]+t[0])/2,(e[1]+t[1])/2],V=this.transformInv_(z),Z=[(i[0]+r[0])/2,(i[1]+r[1])/2],X=this.transformInv_(Z);this.addQuad_(e,z,Z,r,o,V,X,c,d-1),this.addQuad_(z,t,i,Z,V,s,a,X,d-1)}return}}if(B){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(U&11)==0&&this.addTriangle_(e,i,r,o,a,c),(U&14)==0&&this.addTriangle_(e,i,t,o,a,s),U&&((U&13)==0&&this.addTriangle_(t,r,e,s,c,o),(U&7)==0&&this.addTriangle_(t,r,i,s,c,a))}calculateSourceExtent(){const e=Sp();return this.triangles_.forEach(function(t,i,r){const o=t.source;y4(e,o[0]),y4(e,o[1]),y4(e,o[2])}),e}getTriangles(){return this.triangles_}}const $ee=.5;class Hee extends vM{constructor(e,t,i,r,o,s,a,c,d,m,v,M){super(o,oi.IDLE,M),this.renderEdges_=v!==void 0?v:!1,this.pixelRatio_=a,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=s||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const B=r.getTileCoordExtent(this.wrappedTileCoord_),P=this.targetTileGrid_.getExtent();let U=this.sourceTileGrid_.getExtent();const z=P?Rm(B,P):B;if(MD(z)===0){this.state=oi.EMPTY;return}const V=e.getExtent();V&&(U?U=Rm(U,V):U=V);const Z=r.getResolution(this.wrappedTileCoord_[0]),X=ACe(e,i,z,Z);if(!isFinite(X)||X<=0){this.state=oi.EMPTY;return}const re=m!==void 0?m:$ee;if(this.triangulation_=new Vee(e,i,z,U,X*re,Z),this.triangulation_.getTriangles().length===0){this.state=oi.EMPTY;return}this.sourceZ_=t.getZForResolution(X);let ie=this.triangulation_.calculateSourceExtent();if(U&&(e.canWrapX()?(ie[1]=Cl(ie[1],U[1],U[3]),ie[3]=Cl(ie[3],U[1],U[3])):ie=Rm(ie,U)),!MD(ie))this.state=oi.EMPTY;else{let te=0,q=0;e.canWrapX()&&(te=Ho(V),q=Math.floor((ie[0]-V[0])/te)),IJ(ie.slice(),e,!0).forEach(ce=>{const ve=t.getTileRangeForExtentAndZ(ce,this.sourceZ_);for(let ge=ve.minX;ge<=ve.maxX;ge++)for(let Ee=ve.minY;Ee<=ve.maxY;Ee++){const xe=d(this.sourceZ_,ge,Ee,a);if(xe){const Te=q*te;this.sourceTiles_.push({tile:xe,offset:Te})}}++q}),this.sourceTiles_.length===0&&(this.state=oi.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const i=t.tile;if(i&&i.getState()==oi.LOADED){const r=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);r[0]+=t.offset,r[2]+=t.offset;const o=this.clipExtent_?.slice();o&&(o[0]+=t.offset,o[2]+=t.offset),e.push({extent:r,clipExtent:o,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=oi.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r=typeof i=="number"?i:i[0],o=typeof i=="number"?i:i[1],s=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Yee(r,o,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,c,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=oi.LOADED}this.changed()}load(){if(this.state==oi.IDLE){this.state=oi.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i==oi.IDLE||i==oi.LOADING){e++;const r=Go(t,br.CHANGE,o=>{const s=t.getState();(s==oi.LOADED||s==oi.ERROR||s==oi.EMPTY)&&(ba(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},i,r){t.getState()==oi.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(ba),this.sourcesListenerKeys_=null}release(){this.canvas_&&(hM(this.canvas_.getContext("2d")),Wx.push(this.canvas_),this.canvas_=null),super.release()}}class UN{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof oM&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return Ss(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return Ss(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Ss(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function OE(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function dCe(n,e,t){return n+"/"+e+"/"+t}function bS(n,e,t,i,r){return`${Ur(n)},${e},${dCe(t,i,r)}`}function fCe(n){return pCe(n[0],n[1],n[2])}function pCe(n,e,t){return(e<<n)+t}function mCe(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const o=e.getFullTileRange(t);return o?o.containsXY(i,r):!0}function N8(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const i=n[t],r=i.has(e);return r||i.add(e),!r}function gCe(n,e,t){const i=n[t];return i?i.delete(e):!1}function KN(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=Rm(e,lg(t.extent,n.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const r=i.getTileGridForProjection(n.viewState.projection).getExtent();r&&(e=Rm(e,r))}return e}class Zee extends nU{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Sp(),this.tempTileRange_=new rU(0,0,0,0),this.tempTileCoord_=OE(0,0,0);const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new UN(i),this.sourceTileCache_=null,this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new UN(512)),this.sourceTileCache_}getOrCreateTile(e,t,i,r){const o=this.tileCache_,a=this.getLayer().getSource(),c=bS(a,a.getKey(),e,t,i);let d;if(o.containsKey(c))d=o.get(c);else{const m=r.viewState.projection,v=a.getProjection();if(d=a.getTile(e,t,i,r.pixelRatio,m,!v||qA(v,m)?void 0:this.getSourceTileCache()),!d)return null;o.set(c,d)}return d}getTile(e,t,i,r){const o=this.getOrCreateTile(e,t,i,r);return o||null}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=Fu(t.pixelToCoordinateTransform,e.slice()),o=i.getExtent();if(o&&!IC(o,r))return null;const s=t.viewState,a=i.getRenderSource(),c=a.getTileGridForProjection(s.projection),d=a.getTilePixelRatio(t.pixelRatio);for(let m=c.getZForResolution(s.resolution);m>=c.getMinZoom();--m){const v=c.getTileCoordForCoordAndZ(r,m),M=this.getTile(m,v[1],v[2],t);if(!M||M.getState()!==oi.LOADED)continue;const B=c.getOrigin(m),P=$A(c.getTileSize(m)),U=c.getResolution(m);let z;if(M instanceof Uee||M instanceof Hee)z=M.getImage();else if(M instanceof RN){if(z=qD(M.getData()),!z)continue}else continue;const V=Math.floor(d*((r[0]-B[0])/U-v[1]*P[0])),Z=Math.floor(d*((B[1]-r[1])/U-v[2]*P[1])),X=Math.round(d*a.getGutterForProjection(s.projection));return this.getImageData(z,V+X,Z+X)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const i=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==i&&(this.renderedSourceRevision_=i,this.renderedSourceKey_===t.getKey()&&(this.tileCache_.clear(),this.sourceTileCache_?.clear())):this.renderedSourceRevision_=i,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,t,i,r,o){const s=e.viewState,a=this.getLayer(),c=a.getRenderSource(),d=c.getTileGridForProjection(s.projection),m=Ur(c);m in e.wantedTiles||(e.wantedTiles[m]={});const v=e.wantedTiles[m],M=a.getMapInternal(),B=Math.max(i-o,d.getMinZoom(),d.getZForResolution(Math.min(a.getMaxResolution(),M?M.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):d.getResolution(0)),c.zDirection)),P=s.rotation,U=P?EJ(s.center,s.resolution,P,e.size):void 0;for(let z=i;z>=B;--z){const V=d.getTileRangeForExtentAndZ(t,z,this.tempTileRange_),Z=d.getResolution(z);for(let X=V.minX;X<=V.maxX;++X)for(let re=V.minY;re<=V.maxY;++re){if(P&&!d.tileCoordIntersectsViewport([z,X,re],U))continue;const ie=this.getTile(z,X,re,e);if(!ie||!N8(r,ie,z))continue;const q=ie.getKey();if(v[q]=!0,ie.getState()===oi.IDLE&&!e.tileQueue.isKeyQueued(q)){const le=OE(z,X,re,this.tempTileCoord_);e.tileQueue.enqueue([ie,m,d.getTileCoordCenter(le),Z])}}}}findStaleTile_(e,t){const i=this.tileCache_,r=e[0],o=e[1],s=e[2],a=this.getStaleKeys();for(let c=0;c<a.length;++c){const d=bS(this.getLayer().getSource(),a[c],r,o,s);if(i.containsKey(d)){const m=i.peek(d);if(m.getState()===oi.LOADED)return m.endTransition(Ur(this)),N8(t,m,r),!0}}return!1}findAltTiles_(e,t,i,r){const o=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!o)return!1;let s=!0;const a=this.tileCache_,c=this.getLayer().getRenderSource(),d=c.getKey();for(let m=o.minX;m<=o.maxX;++m)for(let v=o.minY;v<=o.maxY;++v){const M=bS(c,d,i,m,v);let B=!1;if(a.containsKey(M)){const P=a.peek(M);P.getState()===oi.LOADED&&(N8(r,P,i),B=!0)}B||(s=!1)}return s}renderFrame(e,t){this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],r=e.viewState,o=r.projection,s=r.resolution,a=r.center,c=e.pixelRatio,d=this.getLayer(),m=d.getSource(),v=m.getTileGridForProjection(o),M=v.getZForResolution(s,m.zDirection),B=v.getResolution(M),P=m.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==P&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=P):this.renderedSourceKey_=P;let U=e.extent;const z=m.getTilePixelRatio(c);this.prepareContainer(e,t);const V=this.context.canvas.width,Z=this.context.canvas.height,X=i.extent&&lg(i.extent);X&&(U=Rm(U,lg(i.extent)));const re=B*V/2/z,ie=B*Z/2/z,te=[a[0]-re,a[1]-ie,a[0]+re,a[1]+ie],q={};this.renderedTiles.length=0;const le=d.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){const At=v.getZForResolution(r.nextResolution,m.zDirection),mt=KN(e,e.nextExtent);this.enqueueTiles(e,mt,At,q,le)}const ce=KN(e,U);if(this.enqueueTiles(e,ce,M,q,0),le>0&&setTimeout(()=>{this.enqueueTiles(e,ce,M-1,q,le-1)},0),!(M in q))return this.container;const ve=Ur(this),ge=e.time;for(const At of q[M]){const mt=At.getState();if(mt===oi.EMPTY)continue;const Ue=At.tileCoord;if(mt===oi.LOADED&&At.getAlpha(ve,ge)===1){At.endTransition(ve);continue}if(mt!==oi.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Ue,q)){gCe(q,At,M),e.animate=!0;continue}if(this.findAltTiles_(v,Ue,M+1,q))continue;const Re=v.getMinZoom();for(let St=M-1;St>=Re&&!this.findAltTiles_(v,Ue,St,q);--St);}const Ee=B/s*c/z,xe=this.getRenderContext(e);xg(this.tempTransform,V/2,Z/2,Ee,Ee,0,-V/2,-Z/2),i.extent&&this.clipUnrotated(xe,e,X),m.getInterpolate()||(xe.imageSmoothingEnabled=!1),this.preRender(xe,e);const Te=Object.keys(q).map(Number);Te.sort(bg);let Fe;const Ie=[],Ye=[];for(let At=Te.length-1;At>=0;--At){const mt=Te[At],Ue=m.getTilePixelSize(mt,c,o),Ge=v.getResolution(mt)/B,Re=Ue[0]*Ge*Ee,St=Ue[1]*Ge*Ee,ut=v.getTileCoordForCoordAndZ(G1(te),mt),kt=v.getTileCoordExtent(ut),Ut=Fu(this.tempTransform,[z*(kt[0]-te[0])/B,z*(te[3]-kt[3])/B]),Le=z*m.getGutterForProjection(o);for(const ke of q[mt]){if(ke.getState()!==oi.LOADED)continue;const Oe=ke.tileCoord,Ze=ut[1]-Oe[1],bt=Math.round(Ut[0]-(Ze-1)*Re),yt=ut[2]-Oe[2],Mt=Math.round(Ut[1]-(yt-1)*St),Kt=Math.round(Ut[0]-Ze*Re),Dt=Math.round(Ut[1]-yt*St),en=bt-Kt,Gn=Mt-Dt,Nn=Te.length===1;let Si=!1;Fe=[Kt,Dt,Kt+en,Dt,Kt+en,Dt+Gn,Kt,Dt+Gn];for(let Un=0,Ln=Ie.length;Un<Ln;++Un)if(!Nn&&mt<Ye[Un]){const Tn=Ie[Un];ql([Kt,Dt,Kt+en,Dt+Gn],[Tn[0],Tn[3],Tn[4],Tn[7]])&&(Si||(xe.save(),Si=!0),xe.beginPath(),xe.moveTo(Fe[0],Fe[1]),xe.lineTo(Fe[2],Fe[3]),xe.lineTo(Fe[4],Fe[5]),xe.lineTo(Fe[6],Fe[7]),xe.moveTo(Tn[6],Tn[7]),xe.lineTo(Tn[4],Tn[5]),xe.lineTo(Tn[2],Tn[3]),xe.lineTo(Tn[0],Tn[1]),xe.clip())}Ie.push(Fe),Ye.push(mt),this.drawTile(ke,e,Kt,Dt,en,Gn,Le,Nn),Si&&xe.restore(),this.renderedTiles.unshift(ke),this.updateUsedTiles(e.usedTiles,m,ke)}}if(this.renderedResolution=B,this.extentChanged=!this.renderedExtent_||!K1(this.renderedExtent_,te),this.renderedExtent_=te,this.renderedPixelRatio=c,this.postRender(this.context,e),i.extent&&xe.restore(),xe.imageSmoothingEnabled=!0,this.renderComplete){const At=(mt,Ue)=>{const De=Ur(m),Ge=Ue.wantedTiles[De],Re=Ge?Object.keys(Ge).length:0;this.updateCacheSize(Re),this.tileCache_.expireCache(),this.sourceTileCache_?.expireCache()};e.postRenderFunctions.push(At)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,i,r,o,s,a,c){let d;if(e instanceof RN){if(d=qD(e.getData()),!d)throw new Error("Rendering array data is not yet supported")}else d=this.getTileImage(e);if(!d)return;const m=this.getRenderContext(t),v=Ur(this),M=t.layerStatesArray[t.layerIndex],B=M.opacity*(c?e.getAlpha(v,t.time):1),P=B!==m.globalAlpha;P&&(m.save(),m.globalAlpha=B),m.drawImage(d,a,a,d.width-2*a,d.height-2*a,i,r,o,s),P&&m.restore(),B!==M.opacity?t.animate=!0:c&&e.endTransition(v)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,i){const r=Ur(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}}const gv={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class yCe extends K2{constructor(e){e=e||{};const t=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(gv.PRELOAD)}setPreload(e){this.set(gv.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(gv.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(gv.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class Xee extends yCe{constructor(e){super(e)}createRenderer(){return new Zee(this,{cacheSize:this.getCacheSize()})}}const vCe={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},FN={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class bCe extends Zee{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Bd(),this.tileClipContexts_=null}enqueueTilesForNextExtent(){return this.getLayer().getRenderMode()!=="vector"}drawTile(e,t,i,r,o,s,a,c){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,i,r,o,s,a,c)}getTile(e,t,i,r){const o=this.getOrCreateTile(e,t,i,r);if(!o)return null;const s=r.viewState,a=s.resolution,c=r.viewHints,d=this.getLayer().getSource(),m=d.getTileGridForProjection(s.projection),v=!(c[ol.ANIMATING]||c[ol.INTERACTING]),M=m.getZForResolution(a,d.zDirection)===e;return v&&M?o.wantedResolution=a:o.wantedResolution||(o.wantedResolution=m.getResolution(e)),o}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,i){const r=this.getLayer(),o=r.getRevision(),s=r.getRenderOrder()||null,a=e.wantedResolution,c=e.getReplayState(r);if(!c.dirty&&c.renderedResolution===a&&c.renderedRevision==o&&c.renderedRenderOrder==s)return;const d=r.getSource(),m=!!r.getDeclutter(),v=d.getTileGrid(),B=d.getTileGridForProjection(i).getTileCoordExtent(e.wrappedTileCoord),P=d.getSourceTiles(t,i,e),U=Ur(r);delete e.hitDetectionImageData[U],e.executorGroups[U]=[],c.dirty=!1;for(let z=0,V=P.length;z<V;++z){const Z=P[z];if(Z.getState()!=oi.LOADED)continue;const X=d.getProjection(),re=Z.tileCoord;let ie=v.getTileCoordExtent(re);i&&X&&!qA(i,X)&&(ie=gS(ie,X,i,32));const te=Rm(B,ie),q=Mv(te,r.getRenderBuffer()*a,this.tempExtent),le=K1(ie,te)?null:q,ce=new Dee(0,te,a,t),ve=jD(a,t),ge=function(Ie,Ye){let At;const mt=Ie.getStyleFunction()||r.getStyleFunction();if(mt&&(At=mt(Ie,a)),At){const Ue=this.renderFeature(Ie,ve,At,ce,m,Ye);c.dirty=c.dirty||Ue}},Ee=Z.getFeatures();s&&s!==c.renderedRenderOrder&&Ee.sort(s);for(let Ie=0,Ye=Ee.length;Ie<Ye;++Ie){let At=Ee[Ie];i&&Z.projection&&!qA(i,Z.projection)&&(At=At.clone(),At.getGeometry().applyTransform(TC(Z.projection,i))),(!le||ql(le,At.getGeometry().getExtent()))&&ge.call(this,At,Ie)}const xe=ce.finish(),Te=r.getRenderMode()!=="vector"&&m&&P.length===1?null:te,Fe=new Ree(Te,a,t,d.getOverlaps(),xe,r.getRenderBuffer(),!0);e.executorGroups[U].push(Fe)}c.renderedRevision=o,c.renderedRenderOrder=s,c.renderedResolution=a}forEachFeatureAtCoordinate(e,t,i,r,o){const s=t.viewState.resolution,a=t.viewState.rotation;i=i??0;const c=this.getLayer(),m=c.getSource().getTileGridForProjection(t.viewState.projection),v=_D([e]);Mv(v,s*i,v);const M={},B=function(X,re,ie){let te=X.getId();te===void 0&&(te=Ur(X));const q=M[te];if(q){if(q!==!0&&ie<q.distanceSq){if(ie===0)return M[te]=!0,o.splice(o.lastIndexOf(q),1),r(X,c,re);q.geometry=re,q.distanceSq=ie}}else{if(ie===0)return M[te]=!0,r(X,c,re);o.push(M[te]={feature:X,layer:c,geometry:re,distanceSq:ie,callback:r})}},P=this.renderedTiles,U=Ur(c),z=c.getDeclutter(),V=z?t.declutter?.[z]?.all().map(X=>X.value):null;let Z;e:for(let X=0,re=P.length;X<re;++X){const ie=P[X],te=m.getTileCoordExtent(ie.wrappedTileCoord);if(!ql(te,v))continue;const q=ie.executorGroups[U];for(let le=0,ce=q.length;le<ce;++le)if(Z=q[le].forEachFeatureAtCoordinate(e,s,a,i,B,V),Z)break e}return Z}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,i)=>{const r=this.getLayer(),o=r.getSource(),s=this.renderedProjection,a=s.getExtent(),c=this.renderedResolution,d=o.getTileGridForProjection(s),m=Fu(this.renderedPixelToCoordinateTransform_,e.slice()),v=d.getTileCoordForCoordAndResolution(m,c).toString(),M=this.renderedTiles.find(X=>X.tileCoord.toString()===v&&X.getState()===oi.LOADED);if(!M||M.loadingSourceTiles>0){t([]);return}o.getWrapX()&&s.canWrapX()&&!ag(a,d.getTileCoordExtent(M.tileCoord))&&CL(m,s);const B=Ur(r),P=d.getTileCoordExtent(M.wrappedTileCoord),U=G1(P),z=[(m[0]-U[0])/c,(U[1]-m[1])/c],V=M.getSourceTiles().reduce((X,re)=>X.concat(re.getFeatures()),[]);let Z=M.hitDetectionImageData[B];if(!Z){const X=$A(d.getTileSize(d.getZForResolution(c,o.zDirection))),re=this.renderedRotation_,ie=[this.getRenderTransform(d.getTileCoordCenter(M.wrappedTileCoord),c,0,yf,X[0]*yf,X[1]*yf,0)];Z=Pee(X,ie,V,r.getStyleFunction(),d.getTileCoordExtent(M.wrappedTileCoord),M.getReplayState(r).renderedResolution,re),M.hitDetectionImageData[B]=Z}t(Lee(z,V,Z))})}getFeaturesInExtent(e){const t=[],i=this.getTileCache();if(i.getCount()===0)return t;const o=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),s=o.getZForResolution(this.renderedResolution),a={};return i.forEach(c=>{if(c.tileCoord[0]!==s||c.getState()!==oi.LOADED)return;const d=c.getSourceTiles();for(let m=0,v=d.length;m<v;++m){const M=d[m],B=M.getKey();if(B in a)continue;a[B]=!0;const P=M.tileCoord;if(ql(e,o.getTileCoordExtent(P))){const U=M.getFeatures();if(U)for(let z=0,V=U.length;z<V;++z){const Z=U[z],X=Z.getGeometry();ql(e,X.getExtent())&&t.push(Z)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const i=this.context,r=i.globalAlpha;i.globalAlpha=t.opacity;const o=e.viewHints,s=!(o[ol.ANIMATING]||o[ol.INTERACTING]),a=[this.context.canvas.width,this.context.canvas.height],c=this.getLayer().getDeclutter(),d=c?e.declutter?.[c]:void 0,m=Ur(this.getLayer()),v=this.renderedTiles;for(let M=0,B=v.length;M<B;++M){const P=v[M],U=P.executorGroups[m];if(U)for(let z=U.length-1;z>=0;--z)U[z].execute(this.context,a,this.getTileRenderTransform(P,e),e.viewState.rotation,s,wE,d)}i.globalAlpha=r}renderDeferredInternal(e){const t=this.renderedTiles,i=Ur(this.getLayer()),r=t.reduce((c,d,m)=>(d.executorGroups[i].forEach(v=>c.push({executorGroup:v,index:m})),c),[]),o=r.map(({executorGroup:c})=>c.getDeferredZIndexContexts()),s={};for(let c=0,d=r.length;c<d;++c){const m=r[c].executorGroup.getDeferredZIndexContexts();for(const v in m)s[v]=!0}Object.keys(s).map(Number).sort(bg).forEach(c=>{o.forEach((d,m)=>{d[c]&&(d[c].forEach(v=>{const{executorGroup:M,index:B}=r[m],P=M.getRenderedContext(),U=P.globalAlpha;P.globalAlpha=this.renderedOpacity_;const z=this.tileClipContexts_[B];z&&z.draw(P),v.draw(P),z&&P.restore(),P.globalAlpha=U,v.clear()}),d[c].length=0)})})}getTileRenderTransform(e,t){const i=t.pixelRatio,r=t.viewState,o=r.center,s=r.resolution,a=r.rotation,c=t.size,d=Math.round(c[0]*i),m=Math.round(c[1]*i),M=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),B=e.tileCoord,P=M.getTileCoordExtent(e.wrappedTileCoord),U=M.getTileCoordExtent(B,this.tempExtent)[0]-P[0];return EL(p8(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(o,s,a,i,d,m,U))}postRender(e,t){const i=t.viewHints,r=!(i[ol.ANIMATING]||i[ol.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const o=this.getLayer(),s=o.getRenderMode(),a=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const c=o.getDeclutter(),d=c?FN[s].filter(ie=>!wE.includes(ie)):FN[s],m=t.viewState,v=m.rotation,M=o.getSource(),P=M.getTileGridForProjection(m.projection).getZForResolution(m.resolution,M.zDirection),U=this.renderedTiles,z=[],V=[],Z=[],X=Ur(o);let re=!0;for(let ie=U.length-1;ie>=0;--ie){const te=U[ie];re=re&&!te.getReplayState(o).dirty;const q=te.executorGroups[X].filter(Te=>Te.hasExecutors(d));if(q.length===0)continue;const le=this.getTileRenderTransform(te,t),ce=te.tileCoord[0];let ve=!1;const ge=q[0].getClipCoords(le);let Ee=e,xe;if(ge){xe=new tU,Ee=xe.getContext();for(let Te=0,Fe=z.length;Te<Fe;++Te)if(P!==ce&&ce<V[Te]){const Ie=z[Te];ql([ge[0],ge[3],ge[4],ge[7]],[Ie[0],Ie[3],Ie[4],Ie[7]])&&(ve||(Ee.save(),ve=!0),Ee.beginPath(),Ee.moveTo(ge[0],ge[1]),Ee.lineTo(ge[2],ge[3]),Ee.lineTo(ge[4],ge[5]),Ee.lineTo(ge[6],ge[7]),Ee.moveTo(Ie[6],Ie[7]),Ee.lineTo(Ie[4],Ie[5]),Ee.lineTo(Ie[2],Ie[3]),Ee.lineTo(Ie[0],Ie[1]),Ee.clip())}z.push(ge),V.push(ce)}for(let Te=0,Fe=q.length;Te<Fe;++Te)q[Te].execute(e,[e.canvas.width,e.canvas.height],le,v,r,d,t.declutter?.[c]);ve&&(Ee===e?Ee.restore():Z[ie]=xe)}e.globalAlpha=a,this.ready=re,this.tileClipContexts_=Z,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,i,r,o,s){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let c=0,d=i.length;c<d;++c)a=xE(r,e,i[c],t,this.boundHandleStyleImageChange_,void 0,o,s)||a;else a=xE(r,e,i,t,this.boundHandleStyleImageChange_,void 0,o,s);return a}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const i=e.getReplayState(t),r=t.getRevision(),o=e.wantedResolution;return i.renderedTileResolution!==o||i.renderedTileRevision!==r}renderTileImage_(e,t){const i=this.getLayer(),r=e.getReplayState(i),o=i.getRevision(),s=e.executorGroups[Ur(i)];r.renderedTileRevision=o;const a=e.wrappedTileCoord,c=a[0],d=i.getSource();let m=t.pixelRatio;const M=t.viewState.projection,B=d.getTileGridForProjection(M),P=B.getResolution(e.tileCoord[0]),U=t.pixelRatio/e.wantedResolution*P,z=B.getResolution(c),V=e.getContext();m=Math.round(Math.max(m,U/m));const Z=d.getTilePixelSize(c,m,M);V.canvas.width=Z[0],V.canvas.height=Z[1];const X=m/U;if(X!==1){const q=Fj(this.tmpTransform_);p8(q,X,X),V.setTransform.apply(V,q)}const re=B.getTileCoordExtent(a,this.tempExtent),ie=U/z,te=Fj(this.tmpTransform_);p8(te,ie,-ie),Zge(te,-re[0],-re[3]);for(let q=0,le=s.length;q<le;++q)s[q].execute(V,[V.canvas.width*X,V.canvas.height*X],te,0,!0,vCe[i.getRenderMode()],null);r.renderedTileResolution=e.wantedResolution}}class b4 extends JL{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const i=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i;const r=e.renderMode||"hybrid";Ss(r=="hybrid"||r=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=r,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new bCe(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(gv.PRELOAD)}getUseInterimTilesOnError(){return this.get(gv.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(gv.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(gv.USE_INTERIM_TILES_ON_ERROR,e)}}function VD(n){return Array.isArray(n)?Math.min(...n):n}class CCe extends ZL{constructor(e,t,i,r,o,s,a){let c=e.getExtent();c&&e.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);let d=t.getExtent();d&&t.canWrapX()&&(d=d.slice(),d[0]=-1/0,d[2]=1/0);const m=d?Rm(i,d):i,v=Mf(m),M=YD(e,t,v,r),B=$ee,P=new Vee(e,t,m,c,M*B,r),U=P.calculateSourceExtent(),z=GC(U)?null:s(U,M,o),V=z?Ni.IDLE:Ni.EMPTY,Z=z?z.getPixelRatio():1;super(i,r,Z,V),this.targetProj_=t,this.maxSourceExtent_=c,this.triangulation_=P,this.targetResolution_=r,this.targetExtent_=i,this.sourceImage_=z,this.sourcePixelRatio_=Z,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Ni.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==Ni.LOADED){const t=Ho(this.targetExtent_)/this.targetResolution_,i=Nu(this.targetExtent_)/this.targetResolution_;this.canvas_=Yee(t,i,this.sourcePixelRatio_,VD(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==Ni.IDLE){this.state=Ni.LOADING,this.changed();const e=this.sourceImage_.getState();e==Ni.LOADED||e==Ni.ERROR?this.reproject_():(this.sourceListenerKey_=Go(this.sourceImage_,br.CHANGE,t=>{const i=this.sourceImage_.getState();(i==Ni.LOADED||i==Ni.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){ba(this.sourceListenerKey_),this.sourceListenerKey_=null}}const yw=4,G8={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class _Ce extends Nm{constructor(e,t){super(e),this.image=t}}class Jee extends F2{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const i=eB(t,e,0);e=t[i]}return e}getImage(e,t,i,r){const o=this.getProjection();if(!o||!r||qA(o,r))return o&&(r=o),this.getImageInternal(e,t,i,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&qA(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==t&&K1(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new CCe(o,r,e,t,i,(s,a,c)=>this.getImageInternal(s,a,c,o),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,i,r){if(this.loader){const o=xCe(e,t,i,1),s=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===r&&(this.wantedExtent_&&ag(this.wantedExtent_,o)||ag(this.image.getExtent(),o))&&(this.wantedResolution_&&VD(this.wantedResolution_)===s||VD(this.image.getResolution())===s)))return this.image;this.wantedProjection_=r,this.wantedExtent_=o,this.wantedResolution_=s,this.image=new ZL(o,s,i,this.loader),this.image.addEventListener(br.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let i;switch(t.getState()){case Ni.LOADING:this.loading=!0,i=G8.IMAGELOADSTART;break;case Ni.LOADED:this.loading=!1,i=G8.IMAGELOADEND;break;case Ni.ERROR:this.loading=!1,i=G8.IMAGELOADERROR;break;default:return}this.hasListener(i)&&this.dispatchEvent(new _Ce(i,t))}}function xCe(n,e,t,i){const r=e/t,o=Mf(n),s=hv(Ho(n)/r,yw),a=hv(Nu(n)/r,yw),c=hv((i-1)*s/2,yw),d=s+2*c,m=hv((i-1)*a/2,yw),v=a+2*m;return AE(o,r,0,[d,v])}const W_=[0,0,0],Xy=5;class CB{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Ss(V0e(this.resolutions_,(r,o)=>o-r),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let r=0,o=this.resolutions_.length-1;r<o;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Ss(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=G1(i)),Ss(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Ss(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:jL,Ss(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,o)=>{const s=new rU(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,o);s.minX=Math.max(a.minX,s.minX),s.maxX=Math.min(a.maxX,s.maxX),s.minY=Math.max(a.minY,s.minY),s.maxY=Math.min(a.maxY,s.maxY)}return s}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let o=r.minX,s=r.maxX;o<=s;++o)for(let a=r.minY,c=r.maxY;a<=c;++a)i([t,o,a])}forEachTileCoordParentTileRange(e,t,i,r){let o,s,a,c=null,d=e[0]-1;for(this.zoomFactor_===2?(s=e[1],a=e[2]):c=this.getTileCoordExtent(e,r);d>=this.minZoom;){if(s!==void 0&&a!==void 0?(s=Math.floor(s/2),a=Math.floor(a/2),o=j_(s,s,a,a,i)):o=this.getTileRangeForExtentAndZ(c,d,i),t(d,o))return!0;--d}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const o=e[1]*2,s=e[2]*2;return j_(o,o+1,s,s+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],o=e[1],s=e[2];if(t===r)return j_(o,s,o,s,i);if(this.zoomFactor_){const c=Math.pow(this.zoomFactor_,t-r),d=Math.floor(o*c),m=Math.floor(s*c);if(t<r)return j_(d,d,m,m,i);const v=Math.floor(c*(o+1))-1,M=Math.floor(c*(s+1))-1;return j_(d,v,m,M,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,W_);const r=W_[1],o=W_[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,W_);const s=W_[1],a=W_[2];return j_(r,s,o,a,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=$A(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),o=$A(this.getTileSize(e[0]),this.tmpSize_),s=i[0]+e[1]*o[0]*r,a=i[1]-(e[2]+1)*o[1]*r,c=s+o[0]*r,d=a+o[1]*r;return U1(s,a,c,d,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,o){const s=this.getZForResolution(i),a=i/this.getResolution(s),c=this.getOrigin(s),d=$A(this.getTileSize(s),this.tmpSize_);let m=a*(e-c[0])/i/d[0],v=a*(c[1]-t)/i/d[1];return r?(m=hv(m,Xy)-1,v=hv(v,Xy)-1):(m=ow(m,Xy),v=ow(v,Xy)),OE(s,m,v,o)}getTileCoordForXYAndZ_(e,t,i,r,o){const s=this.getOrigin(i),a=this.getResolution(i),c=$A(this.getTileSize(i),this.tmpSize_);let d=(e-s[0])/a/c[0],m=(s[1]-t)/a/c[1];return r?(d=hv(d,Xy)-1,m=hv(m,Xy)-1):(d=ow(d,Xy),m=ow(m,Xy)),OE(i,d,m,o)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=eB(this.resolutions_,e,t||0);return Cl(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return $J(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}function cU(n){let e=n.getDefaultTileGrid();return e||(e=SCe(n),n.setDefaultTileGrid(e)),e}function MCe(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),o=_B(t);if(!IC(o,r)){const s=Ho(o),a=Math.ceil((o[0]-r[0])/s);return r[0]+=s*a,n.getTileCoordForCoordAndZ(r,i)}return e}function wCe(n,e,t,i){i=i!==void 0?i:"top-left";const r=ete(n,e,t);return new CB({extent:n,origin:uge(n,i),resolutions:r,tileSize:t})}function AU(n){const e=n||{},t=e.extent||Us("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:ete(t,e.maxZoom,e.tileSize,e.maxResolution)};return new CB(i)}function ete(n,e,t,i){e=e!==void 0?e:JJ,t=$A(t!==void 0?t:jL);const r=Nu(n),o=Ho(n);i=i>0?i:Math.max(o/t[0],r/t[1]);const s=e+1,a=new Array(s);for(let c=0;c<s;++c)a[c]=i/Math.pow(2,c);return a}function SCe(n,e,t,i){const r=_B(n);return wCe(r,e,t,i)}function _B(n){n=Us(n);let e=n.getExtent();if(!e){const t=180*Iv.degrees/n.getMetersPerUnit();e=U1(-t,-t,t,t)}return e}class tte extends F2{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&$A(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Ur(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,r,o,s){return wr()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:cU(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),o=this.getTilePixelRatio(t),s=$A(r.getTileSize(e),this.tmpSize);return o==1?s:gye(s,o,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const i=t!==void 0?t:this.getProjection(),r=t!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=MCe(r,e,i)),mCe(e,r)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class ECe extends Nm{constructor(e,t){super(e),this.tile=t}}function nte(n){return function(e){const t=e.buffers,i=e.meta,r=e.imageOps,o=e.width,s=e.height,a=t.length,c=t[0].byteLength;if(r){const M=new Array(a);for(let P=0;P<a;++P)M[P]=new ImageData(new Uint8ClampedArray(t[P]),o,s);return n(M,i).data.buffer}const d=new Uint8ClampedArray(c),m=new Array(a),v=new Array(a);for(let M=0;M<a;++M)m[M]=new Uint8ClampedArray(t[M]),v[M]=[0,0,0,0];for(let M=0;M<c;M+=4){for(let P=0;P<a;++P){const U=m[P];v[P][0]=U[M],v[P][1]=U[M+1],v[P][2]=U[M+2],v[P][3]=U[M+3]}const B=n(v,i);d[M]=B[0],d[M+1]=B[1],d[M+2]=B[2],d[M+3]=B[3]}return d.buffer}}function BCe(n,e){const i=Object.keys(n.lib||{}).map(function(o){return"const "+o+" = "+n.lib[o].toString()+";"}).concat(["const __minion__ = ("+nte.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(i.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(i,{type:"text/javascript"})));return r.addEventListener("message",e),r}function OCe(n,e){const t=nte(n.operation);let i=!1;return{postMessage:function(r){setTimeout(function(){i||e({data:{buffer:t(r),meta:r.meta}})},0)},terminate:function(){i=!0}}}let ICe=class extends oM{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const i=new Array(t);if(t)for(let r=0;r<t;++r)i[r]=BCe(e,this.onWorkerMessage_.bind(this,r));else i[0]=OCe(e,this.onWorkerMessage_.bind(this,0));this.workers_=i,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,i){this.enqueue_({inputs:e,meta:t,callback:i}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,i=e.inputs[0].height,r=e.inputs.map(function(c){return c.data.buffer}),o=this.workers_.length;if(this.running_=o,o===1){this.workers_[0].postMessage({buffers:r,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},r);return}const s=e.inputs[0].data.length,a=4*Math.ceil(s/4/o);for(let c=0;c<o;++c){const d=c*a,m=[];for(let v=0,M=r.length;v<M;++v)m.push(r[v].slice(d,d+a));this.workers_[c].postMessage({buffers:m,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},m)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let i,r;if(t===1)i=new Uint8ClampedArray(this.dataLookup_[0].buffer),r=this.dataLookup_[0].meta;else{const o=e.inputs[0].data.length;i=new Uint8ClampedArray(o),r=new Array(t);const s=4*Math.ceil(o/4/t);for(let a=0;a<t;++a){const c=this.dataLookup_[a].buffer,d=a*s;i.set(new Uint8ClampedArray(c),d),r[a]=this.dataLookup_[a].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(i,e.inputs[0].width,e.inputs[0].height),r),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}};const zN={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class jN extends Nm{constructor(e,t,i){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=i}}class hU extends Jee{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=DCe(e.sources);const t=this.changed.bind(this);for(let i=0,r=this.layers_.length;i<r;++i)this.layers_[i].addEventListener(br.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new CJ(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Bd(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:kCe(this.layers_),pixelRatio:1,pixelToCoordinateTransform:Bd(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Ur(this),renderTargets:{}},this.setAttributions(function(i){const r=[];for(let o=0,s=e.sources.length;o<s;++o){const a=e.sources[o],c=a instanceof F2?a:a.getSource();if(!c)continue;const d=c.getAttributions()?.(i);typeof d=="string"?r.push(d):d!==void 0&&r.push(...d)}return r}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new ICe({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,i){const r=Object.assign({},this.frameState_);r.viewState=Object.assign({},r.viewState);const o=Mf(e);r.size[0]=Math.ceil(Ho(e)/t),r.size[1]=Math.ceil(Nu(e)/t),r.extent=[o[0]-r.size[0]*t/2,o[1]-r.size[1]*t/2,o[0]+r.size[0]*t/2,o[1]+r.size[1]*t/2],r.time=Date.now();const s=r.viewState;return s.center=o,s.projection=i,s.resolution=t,r}allSourcesReady_(){let e=!0,t;for(let i=0,r=this.layers_.length;i<r;++i)if(t=this.layers_[i].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,i,r){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const o=this.updateFrameState_(e,t,r);if(this.requestedFrameState_=o,this.renderedImageCanvas_){const s=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();(t!==s||!K1(o.extent,a))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),o.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,i=new Array(t);for(let o=0;o<t;++o){e.layerIndex=o,e.renderTargets={};const s=TCe(this.layers_[o],e);if(s)i[o]=s;else return}const r={};this.dispatchEvent(new jN(zN.BEFOREOPERATIONS,e,r)),this.processor_.process(i,r,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,i,r){if(t||!i)return;const o=e.extent,s=e.viewState.resolution;if(s!==this.requestedFrameState_.viewState.resolution||!K1(o,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const c=Math.round(Ho(o)/s),d=Math.round(Nu(o)/s);a=_l(c,d),this.renderedImageCanvas_=new ebe(o,s,1,a.canvas)}a.putImageData(i,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new jN(zN.AFTEROPERATIONS,e,r))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let i=0,r=this.layers_.length;i<r&&(t=this.layers_[i].getSource().getResolutions(e),!t);++i);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}hU.prototype.dispose;let Qb=null;function TCe(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const i=e.size[0],r=e.size[1];if(i===0||r===0)return null;const o=t.renderFrame(e,null);let s;if(o instanceof HTMLCanvasElement)s=o;else{if(o&&(s=o.firstElementChild),!(s instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+s);if(s.width===i&&s.height===r)return s.getContext("2d").getImageData(0,0,i,r)}if(!Qb)Qb=_l(i,r,void 0,{willReadFrequently:!0});else{const a=Qb.canvas;a.width!==i||a.height!==r?Qb=_l(i,r,void 0,{willReadFrequently:!0}):Qb.clearRect(0,0,i,r)}return Qb.drawImage(s,0,0,i,r),Qb.getImageData(0,0,i,r)}function kCe(n){return n.map(function(e){return e.getLayerState()})}function DCe(n){const e=n.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=RCe(n[i]);return t}function RCe(n){let e;return n instanceof F2?n instanceof tte?e=new Xee({source:n}):n instanceof Jee&&(e=new uU({source:n})):e=n,e}function PCe(n,e,t,i){const r=document.createElement("script"),o="olc_"+Ur(e);function s(){delete window[o],r.parentNode.removeChild(r)}r.async=!0,r.src=n+(n.includes("?")?"&":"?")+"callback="+o;const a=setTimeout(function(){s(),t&&t()},1e4);window[o]=function(c){clearTimeout(a),s(),e(c)},document.head.appendChild(r)}const LCe=/\{z\}/g,UCe=/\{x\}/g,KCe=/\{y\}/g,FCe=/\{-y\}/g;function zCe(n,e,t,i,r){return n.replace(LCe,e.toString()).replace(UCe,t.toString()).replace(KCe,i.toString()).replace(FCe,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-i).toString()})}function jCe(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let o;for(o=i;o<=r;++o)e.push(n.replace(t[0],String.fromCharCode(o)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}function NCe(n,e){return(function(t,i,r){if(!t)return;let o;const s=t[0];if(e){const a=e.getFullTileRange(s);a&&(o=a.getHeight()-1)}return zCe(n,s,t[1],t[2],o)})}function ite(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=NCe(n[r],e);return GCe(i)}function GCe(n){return n.length===1?n[0]:(function(e,t,i){if(!e)return;const r=fCe(e),o=CC(r,n.length);return n[o](e,t,i)})}const W8={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class xB extends tte{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===xB.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=Ur(t),r=t.getState();let o;r==oi.LOADING?(this.tileLoadingKeys_[i]=!0,o=W8.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],o=r==oi.ERROR?W8.TILELOADERROR:r==oi.LOADED?W8.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new ECe(o,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=jCe(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(ite(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}}class WCe extends xB{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:QCe,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Uee,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!qA(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||qA(t,e)))return this.tileGrid;const i=Ur(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=cU(e)),this.tileGridForProjection[i]}createTile_(e,t,i,r,o,s){const a=[e,t,i],c=this.getTileCoordForTileUrlFunction(a,o),d=c?this.tileUrlFunction(c,r,o):void 0,m=new this.tileClass(a,d!==void 0?oi.IDLE:oi.EMPTY,d!==void 0?d:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return m.key=s,m.addEventListener(br.CHANGE,this.handleTileChange.bind(this)),m}getTile(e,t,i,r,o,s){const a=this.getProjection();if(!a||!o||qA(a,o))return this.getTileInternal(e,t,i,r,a||o);const c=[e,t,i],d=this.getKey(),m=this.getTileGridForProjection(a),v=this.getTileGridForProjection(o),M=this.getTileCoordForTileUrlFunction(c,o),B=new Hee(a,m,o,v,c,M,this.getTilePixelRatio(r),this.getGutter(),(P,U,z,V)=>this.getTileInternal(P,U,z,V,a,s),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return B.key=d,B}getTileInternal(e,t,i,r,o,s){const a=this.getKey(),c=bS(this,a,e,t,i);if(s&&s.containsKey(c))return s.get(c);const d=this.createTile_(e,t,i,r,o,a);return s?.set(c,d),d}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const i=Us(e);if(i){const r=Ur(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}}function QCe(n,e){if(VA){const t=n.getCrossOrigin();let i="same-origin",r="same-origin";t==="anonymous"||t===""?(i="cors",r="omit"):t==="use-credentials"&&(i="cors",r="include"),fetch(e,{mode:i,credentials:r}).then(o=>{if(!o.ok)throw new Error(`HTTP ${o.status}`);return o.blob()}).then(o=>createImageBitmap(o)).then(o=>{const s=n.getImage();s.width=o.width,s.height=o.height,s.getContext("2d").drawImage(o,0,0),o.close?.(),s.dispatchEvent(new Event("load"))}).catch(()=>{n.getImage().dispatchEvent(new Event("error"))});return}n.getImage().src=e}class rte extends WCe{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Us("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)PCe(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let i;try{i=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(i)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=Us("EPSG:4326"),i=this.getProjection();let r;if(e.bounds!==void 0){const d=cM(t,i);r=BJ(e.bounds,d)}const o=_B(i),s=e.minzoom||0,a=e.maxzoom||22,c=AU({extent:o,maxZoom:a,minZoom:s,tileSize:this.tileSize_});if(this.tileGrid=c,this.tileUrlFunction=ite(e.tiles,c),e.attribution&&!this.getAttributions()){const d=r!==void 0?r:o;this.setAttributions(function(m){return ql(d,m.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class dU extends xB{constructor(e){const t=e.projection||"EPSG:3857",i=e.extent||_B(t),r=e.tileGrid||AU({extent:i,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:r,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:ote,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:Kee,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,i){if(i.getState()===oi.IDLE){i.setState(oi.LOADING);const r=i.wrappedTileCoord,o=this.getTileGridForProjection(t);let s=o.getTileCoordExtent(r);const a=r[0],c=o.getResolution(a);Mv(s,-c,s);const d=this.projection;t&&this.projection&&!qA(t,d)&&(s=gS(s,t,d));const m=this.tileGrid,v=m.getExtent();v&&Rm(s,v,s);let M=c;t&&d&&!qA(t,d)&&(M=c/d.getMetersPerUnit()/t.getMetersPerUnit());const B=m.getZForResolution(M,this.zDirection);m.forEachTileCoord(s,B,P=>{const U=this.tileUrlFunction(P,e,t);this.sourceTiles_[U]||(this.sourceTiles_[U]=new this.tileClass(P,U?oi.IDLE:oi.EMPTY,U,this.format_,this.tileLoadFunction));const z=this.sourceTiles_[U];i.sourceTiles.push(z),this.tileKeysBySourceTileUrl_[U]||(this.tileKeysBySourceTileUrl_[U]=[]),this.tileKeysBySourceTileUrl_[U].push(i.getKey());const V=z.getState();if(V<oi.LOADED){const Z=X=>{this.handleTileChange(X);const re=z.getState();if(re===oi.LOADED||re===oi.ERROR){const ie=z.getKey();ie in i.errorTileKeys?z.getState()===oi.LOADED&&delete i.errorTileKeys[ie]:i.loadingSourceTiles--,re===oi.ERROR?i.errorTileKeys[ie]=!0:z.removeEventListener(br.CHANGE,Z),i.loadingSourceTiles===0&&i.setState(Ov(i.errorTileKeys)?oi.LOADED:oi.ERROR)}};z.addEventListener(br.CHANGE,Z),i.loadingSourceTiles++}V===oi.IDLE&&(z.extent=m.getTileCoordExtent(P),z.projection=this.projection,z.resolution=m.getResolution(P[0]),z.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(P=>P.getState()===oi.ERROR)?oi.ERROR:oi.LOADED)}return i.sourceTiles}removeSourceTiles(e){const t=e.getKey(),i=e.sourceTiles;for(let r=0,o=i.length;r<o;++r){const s=i[r].getTileUrl();if(!this.tileKeysBySourceTileUrl_[s])return;const a=this.tileKeysBySourceTileUrl_[s].indexOf(t);a!==-1&&(this.tileKeysBySourceTileUrl_[s].splice(a,1),this.tileKeysBySourceTileUrl_[s].length===0&&(delete this.tileKeysBySourceTileUrl_[s],delete this.sourceTiles_[s]))}}getTile(e,t,i,r,o){const s=[e,t,i];let a=this.getTileCoordForTileUrlFunction(s,o);const c=this.getTileGrid().getExtent(),d=this.projection,m=this.getTileGridForProjection(o);if(a&&c){const B=m.getTileCoordExtent(a);Mv(B,-m.getResolution(e),B),ql(c,!o||!d||qA(o,d)?B:gS(B,o,d))||(a=null)}let v=!0;if(a!==null){const B=this.tileGrid,P=m.getResolution(e);let U=P;o&&d&&!qA(o,d)&&(U=P/d.getMetersPerUnit()/o.getMetersPerUnit());const z=B.getZForResolution(U,1),V=m.getTileCoordExtent(a);Mv(V,-P,V),B.forEachTileCoord(!o||!d||qA(o,d)?V:gS(V,o,d),z,Z=>{v=v&&!this.tileUrlFunction(Z,r,d)})}const M=new ibe(s,v?oi.EMPTY:oi.IDLE,a,this.getSourceTiles.bind(this,r,o),this.removeSourceTiles.bind(this));return M.key=this.getKey(),M}getTileGridForProjection(e){const t=e.getCode();let i=this.tileGrids_[t];if(!i){const r=this.projection;if(r!==null&&!qA(r,e))return cU(e);const o=this.tileGrid,s=o.getResolutions().slice(),a=s.map(function(m,v){return o.getOrigin(v)}),c=s.map(function(m,v){return o.getTileSize(v)}),d=JJ+1;for(let m=s.length;m<d;++m)s.push(s[m-1]/2),a.push(a[m-1]),c.push(c[m-1]);i=new CB({extent:o.getExtent(),origins:a,resolutions:s,tileSizes:c}),this.tileGrids_[t]=i}return i}getTilePixelRatio(e){return e}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),o=$A(r.getTileSize(e),this.tmpSize);return[Math.round(o[0]*t),Math.round(o[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function ote(n,e){n.setLoader(function(t,i,r){kee(e,n.getFormat(),t,i,r,n.onLoad.bind(n),n.onError.bind(n))})}function qCe(n,e){const t=n[0],i=t.width,r=t.height,o=t.data,s=new Uint8ClampedArray(o.length),a=e.resolution*2,c=i-1,d=r-1,m=[0,0,0,0],v=2*Math.PI,M=Math.PI/2,B=Math.PI*e.sunEl/180,P=Math.PI*e.sunAz/180,U=Math.cos(B),z=Math.sin(B),V=e.highlightColor,Z=e.shadowColor,X=e.accentColor,re=e.encoding;let ie,te,q,le,ce,ve,ge,Ee,xe,Te,Fe,Ie,Ye,At,mt,Ue,De,Ge,Re,St,ut,kt;function Ut(Le,ke="mapbox"){if(ke==="mapbox")return(Le[0]*256*256+Le[1]*256+Le[2])*.1-1e4;if(ke==="terrarium")return Le[0]*256+Le[1]+Le[2]/256-32768}for(te=0;te<=d;++te)for(ce=te===0?0:te-1,ve=te===d?d:te+1,ie=0;ie<=c;++ie)q=ie===0?0:ie-1,le=ie===c?c:ie+1,ge=(te*i+q)*4,m[0]=o[ge],m[1]=o[ge+1],m[2]=o[ge+2],m[3]=o[ge+3],Ee=e.vert*Ut(m,re),ge=(te*i+le)*4,m[0]=o[ge],m[1]=o[ge+1],m[2]=o[ge+2],m[3]=o[ge+3],xe=e.vert*Ut(m,re),Te=(xe-Ee)/a,ge=(ce*i+ie)*4,m[0]=o[ge],m[1]=o[ge+1],m[2]=o[ge+2],m[3]=o[ge+3],Ee=e.vert*Ut(m,re),ge=(ve*i+ie)*4,m[0]=o[ge],m[1]=o[ge+1],m[2]=o[ge+2],m[3]=o[ge+3],xe=e.vert*Ut(m,re),Fe=(xe-Ee)/a,Ye=Math.atan2(Fe,-Te),Ye<0?Ye=M-Ye:Ye>M?Ye=v-Ye+M:Ye=M-Ye,Ie=Math.atan(Math.sqrt(Te*Te+Fe*Fe)),kt=z*Math.cos(Ie)+U*Math.sin(Ie)*Math.cos(P-Ye),At=Math.cos(Ie),mt=255*kt,Re=Math.min(Math.max(2*e.sunEl,0),1),St=1.875-e.opacity*1.75,ut=e.opacity!==.5?M*((Math.pow(St,Ie)-1)/(Math.pow(St,M)-1)):Ie,De={r:(1-At)*X.r*Re*255,g:(1-At)*X.g*Re*255,b:(1-At)*X.b*Re*255,a:(1-At)*X.a*Re*255},Ue=Math.abs(((Ye+P)/Math.PI+.5)%2-1),Ge={r:(V.r*(1-Ue)+Z.r*Ue)*mt,g:(V.g*(1-Ue)+Z.g*Ue)*mt,b:(V.b*(1-Ue)+Z.b*Ue)*mt,a:(V.a*(1-Ue)+Z.a*Ue)*mt},ge=(te*i+ie)*4,s[ge]=De.r*(1-Ue)+Ge.r,s[ge+1]=De.g*(1-Ue)+Ge.g,s[ge+2]=De.b*(1-Ue)+Ge.b,s[ge+3]=o[ge+3]*e.opacity*Re*Math.sin(ut);return new ImageData(s,i,r)}function YCe(n,e){const t=n[0],i=t.width,r=t.height,o=t.data,s=new Uint8ClampedArray(o.length),a=i-1,c=r-1,d=[0,0,0,0];let m,v,M;function B(le){return le>0?1/(1-le):1+le}function P(le){return le>0?1-1/(1.001-le):-le}function U(le){le*=Math.PI/180;const ce=Math.sin(le),ve=Math.cos(le);return[(2*ve+1)/3,(-Math.sqrt(3)*ce-ve+1)/3,(Math.sqrt(3)*ce-ve+1)/3]}const z=P(e.saturation),V=B(e.contrast),Z=U(e.hueRotate),X=Z,re=[Z[2],Z[0],Z[1]],ie=[Z[1],Z[2],Z[0]],te=e.brightnessLow,q=e.brightnessHigh;for(v=0;v<=c;++v)for(m=0;m<=a;++m){M=(v*i+m)*4,d[0]=o[M],d[1]=o[M+1],d[2]=o[M+2],d[3]=o[M+3];const le=d[0],ce=d[1],ve=d[2],ge=(Ie,Ye)=>{let At=0;for(let mt=0;mt<Ie.length;mt++)At+=Ie[mt]*Ye[mt];return At};let Ee=ge([le,ce,ve],X),xe=ge([le,ce,ve],re),Te=ge([le,ce,ve],ie);const Fe=(Ee+xe+Te)/3;Ee+=(Fe-Ee)*z,xe+=(Fe-xe)*z,Te+=(Fe-Te)*z,Ee=(Ee-.5)*V+.5,xe=(xe-.5)*V+.5,Te=(Te-.5)*V+.5,Ee=te*(255-Ee)+q*Ee,xe=te*(255-xe)+q*xe,Te=te*(255-Te)+q*Te,s[M]=Ee,s[M+1]=xe,s[M+2]=Te,s[M+3]=d[3]}return new ImageData(s,i,r)}function VCe(n,e=512){return n.getExtent()?AU({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():Pm}function ste(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((i,r)=>{e.accessToken=i,e.accessTokenParam=r})),e}function $Ce(n,e,t="",i={},r=void 0){let o,s,a,c,d=!0;return typeof t!="string"&&!Array.isArray(t)?(a=t,c=a.source||a.layers,i=a):c=t,typeof i=="string"?(o=i,a={}):(o=i.styleUrl,a=i),a.updateSource===!1&&(d=!1),r||(r=a.resolutions),!o&&typeof e=="string"&&!e.trim().startsWith("{")&&(o=e),o&&(o=o.startsWith("data:")?location.href:SE(o,a.accessToken),a=ste(o,a)),new Promise(function(m,v){jee(e,a).then(function(M){if(M.version!=8)return v(new Error("glStyle version 8 required."));if(!(n instanceof iU||n instanceof b4))return v(new Error("Can only apply to VectorLayer or VectorTileLayer"));const B=n instanceof b4?"vector":"geojson";if(c?Array.isArray(c)?s=M.layers.find(function(re){return re.id===c[0]}).source:s=c:(s=M.layers.find(function(re){return re.source&&M.sources[re.source].type===B}).source,c=s),!s)return v(new Error(`No ${B} source found in the glStyle.`));function P(){if(!d)return Promise.resolve();if(n instanceof b4)return ute(M.sources[s],o,a).then(function(q){const le=n.getSource();le?q!==le&&(le.setTileUrlFunction(q.getTileUrlFunction()),typeof le.setUrls=="function"&&typeof q.getUrls=="function"&&le.setUrls(q.getUrls()),le.format_||(le.format_=q.format_),le.getAttributions()||le.setAttributions(q.getAttributions()),le.getTileLoadFunction()===ote&&le.setTileLoadFunction(q.getTileLoadFunction()),qA(le.getProjection(),q.getProjection())&&(le.tileGrid=q.getTileGrid())):n.setSource(q);const ce=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&ce.getMinZoom()>0&&n.setMaxResolution(X3(Math.max(0,ce.getMinZoom()-1e-12),ce.getResolutions()))});const re=M.sources[s];let ie=n.getSource();(!ie||ie.get("mapbox-source")!==re)&&(ie=Ate(re,o,a));const te=n.getSource();return te?ie!==te&&(te.getAttributions()||te.setAttributions(ie.getAttributions()),te.format_||(te.format_=ie.getFormat()),te.url_=ie.getUrl()):n.setSource(ie),Promise.resolve()}let U,z;const V={},Z={};function X(){if(!z&&(!M.sprite||V)){if(a.projection&&!r){const q=Us(a.projection).getUnits();q!=="m"&&(r=Pm.map(le=>le/Iv[q]))}let re;const ie=n.getSource();ie instanceof dU&&ie.format_ instanceof qee&&(re=ie.format_.layerName_),z=vbe(n,M,c,r,V,Z,(te,q=a.webfonts)=>hbe(te,q),a.getImage,re),n.getStyle()?P().then(m).catch(v):v(new Error(`Nothing to show for source [${s}]`))}else z?(n.setStyle(z),P().then(m).catch(v)):v(new Error("Something went wrong trying to apply style."))}if(M.sprite){const re=rbe(M.sprite,a.accessToken,o||location.href);U=VA?1:window.devicePixelRatio>=1.5?.5:1;const ie=U==.5?"@2x":"";Promise.all(re.map(function(te){const q=new URL(te.url);let le=q.origin+q.pathname+ie+".json"+q.search;return new Promise(function(ce,ve){y2("Sprite",le,a).then(ce).catch(function(ge){le=q.origin+q.pathname+".json"+q.search,y2("Sprite",le,a).then(ce).catch(ve)})}).then(function(ce){ce===void 0&&v(new Error("No sprites found."));let ve;if(ve=q.origin+q.pathname+ie+".png"+q.search,a.transformRequest){const ge=a.transformRequest(ve,"SpriteImage")||ve;(ge instanceof Request||ge instanceof Promise)&&(ve=ge)}Z[te.id]=ve;for(const ge in ce){const Ee=te.id=="default"?ge:`${te.id}:${ge}`;V[Ee]=ce[ge]}}).catch(function(ce){v(new Error(`Sprites cannot be loaded: ${le}: ${ce.message}`))})})).then(X).catch(v)}else X()}).catch(v)})}function ate(n,e){let t;return n.some(function(i){if(i.id==e)return t=i.source,!0}),t}function HCe(n,e){const t=n.bounds;if(t){const i=OD([t[0],t[1]],e),r=OD([t[2],t[3]],e);return[i[0],i[1],r[0],r[1]]}return Us(e).getExtent()}function lte(n,e,t){const i=new rte({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),r=i.getTileJSON(),o=i.getTileGrid(),s=Us(t.projection||"EPSG:3857"),a=HCe(r,s),c=s.getExtent(),d=r.minzoom||0,m=r.maxzoom||22,v={attributions:i.getAttributions(),projection:s,tileGrid:new CB({origin:c?G1(c):o.getOrigin(0),extent:a||o.getExtent(),minZoom:d,resolutions:VCe(s,e.tileSize).slice(0,m+1),tileSize:o.getTileSize(0)})};return Array.isArray(r.tiles)?v.urls=r.tiles:v.url=r.tiles,v}function ZCe(n,e,t,i){const r={id:n.id,type:n.type},o=n.layout||{},s=n.paint||{};r.paint=s,Th.zoom=EE(e,t.resolutions||Pm),Th.distanceFromCenter=0;let a;const c=ji(r,"paint","background-color",WA,i);return s["background-opacity"]!==void 0&&(a=ji(r,"paint","background-opacity",WA,i)),o.visibility=="none"?void 0:nv(c,a)}function XCe(n,e,t){const i=VA?{style:{}}:document.createElement("div");return i.className="ol-mapbox-style-background",i.style.position="absolute",i.style.width="100%",i.style.height="100%",new K2({source:new F2({}),render(r){const o=ZCe(n,r.viewState.resolution,e,t);return i.style.backgroundColor=o,i}})}function ute(n,e,t){return new Promise(function(i,r){Nee(n,e,t).then(function({tileJson:o,tileLoadFunction:s}){const a=lte(n,o,t);a.tileLoadFunction=s,a.format=new qee({layerName:"mvt:layer"});const c=new dU(a);c.set("mapbox-source",n),i(c)}).catch(r)})}function JCe(n,e,t){const i=new b4({declutter:!0,visible:!1});return ute(n,e,t).then(function(r){i.setSource(r)}).catch(function(r){i.setSource(void 0)}),i}function cte(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function e_e(n,e,t){return new Promise(function(i,r){Nee(n,e,t).then(function({tileJson:o,tileLoadFunction:s}){const a=new rte({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:o});a.tileGrid=lte(n,o,t).tileGrid,t.projection&&(a.projection=Us(t.projection));const c=a.getTileUrlFunction();s&&a.setTileLoadFunction(s),a.setTileUrlFunction(function(d,m,v){const M=cte(v);let B=c(d,m,v);if(B.indexOf(M)!=-1){const P=a.getTileGrid().getTileCoordExtent(d);B=B.replace(M,P.toString())}return B}),a.set("mapbox-source",n),i(a)}).catch(function(o){r(o)})})}function fU(n,e,t){const i=new Xee;return e_e(n,e,t).then(function(r){i.setSource(r)}).catch(function(){i.setSource(void 0)}),i}function t_e(n,e,t){const i=fU(n,e,t);return new uU({source:new hU({operationType:"image",operation:YCe,sources:[i]})})}function n_e(n,e,t){const i=fU(n,e,t);return new uU({source:new hU({operationType:"image",operation:qCe,sources:[i]})})}function Ate(n,e,t){const i=t.projection?new IN({dataProjection:t.projection}):new IN,r=n.data,o={};if(typeof r=="string"){const[a]=vS(r,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(a)){const d=(v,M,B)=>{const P=cte(B);return a.replace(P,`${v.join(",")}`)},m=new yS({attributions:n.attribution,format:i,loader:(v,M,B,P,U)=>{const z=typeof d=="function"?d(v,M,B):d;y2("GeoJSON",z,t).then(V=>{const Z=m.getFormat().readFeatures(V,{featureProjection:B});m.addFeatures(Z),P(Z)}).catch(V=>{m.removeLoadedExtent(v),U()})},strategy:Uve});return m.set("mapbox-source",n),m}const c=new yS({attributions:n.attribution,format:i,url:a,loader:(d,m,v,M,B)=>{y2("GeoJSON",a,t).then(P=>{const U=c.getFormat().readFeatures(P,{featureProjection:v});c.addFeatures(U),M(U)}).catch(P=>{c.removeLoadedExtent(d),B()})}});return c}o.features=i.readFeatures(r,{featureProjection:"EPSG:3857"});const s=new yS(Object.assign({attributions:n.attribution,format:i},o));return s.set("mapbox-source",n),s}function i_e(n,e,t){return new iU({declutter:!0,source:Ate(n,e,t),visible:!1})}function r_e(n,e,t){let i=null;return function(r){n.paint&&"raster-opacity"in n.paint&&r.frameState.viewState.zoom!==i&&(i=r.frameState.viewState.zoom,delete t[n.id],o_e(n,e,i,t))}}function o_e(n,e,t,i){Th.zoom=t,Th.distanceFromCenter=0;const r=ji(n,"paint","raster-opacity",WA,i);e.setOpacity(r)}function s_e(n,e){function t(){const i=e.get("mapbox-style");if(!i)return;const r=YX(i.layers),o=n.get("mapbox-layers"),s=r.filter(function(a){return o.includes(a.id)}).some(function(a){return!a.layout||!a.layout.visibility||a.layout.visibility==="visible"});n.get("visible")!==s&&n.setVisible(s)}n.on("change",t),t()}function a_e(n,e,t,i){const r=zee(n),o=n.layers,s=t.type,a=t.source||ate(o,t.ref),c=n.sources[a];let d;if(s=="background")d=XCe(t,i,r);else if(c.type=="vector")d=JCe(c,e,i);else if(c.type=="raster"){const v=["raster-saturation","raster-contrast","raster-brightness-max","raster-brightness-min","raster-hue-rotate"];!!Object.keys(t.paint||{}).find(B=>v.includes(B))?(d=t_e(c,e,i),d.getSource().on("beforeoperations",function(B){Th.zoom=EE(B.resolution,i.resolutions||Pm),Th.distanceFromCenter=0;const P=B.data;P.saturation=ji(t,"paint","raster-saturation",WA,r),P.contrast=ji(t,"paint","raster-contrast",WA,r),P.brightnessHigh=ji(t,"paint","raster-brightness-max",WA,r),P.brightnessLow=ji(t,"paint","raster-brightness-min",WA,r),P.hueRotate=ji(t,"paint","raster-hue-rotate",WA,r)})):d=fU(c,e,i),d.setVisible(t.layout?t.layout.visibility!=="none":!0),d.on("prerender",r_e(t,d,r))}else if(c.type=="geojson")d=i_e(c,e,i);else if(c.type=="raster-dem"&&t.type=="hillshade"){const v=n_e(c,e,i);d=v,v.getSource().on("beforeoperations",function(M){const B=M.data;B.resolution=BD(i.projection||"EPSG:3857",M.resolution,Mf(M.extent),"m"),Th.zoom=EE(M.resolution,i.resolutions||Pm),Th.distanceFromCenter=0,B.encoding=c.encoding,B.vert=5*ji(t,"paint","hillshade-exaggeration",WA,r),B.sunAz=ji(t,"paint","hillshade-illumination-direction",WA,r),B.sunEl=35,B.opacity=.3,B.highlightColor=ji(t,"paint","hillshade-highlight-color",WA,r),B.shadowColor=ji(t,"paint","hillshade-shadow-color",WA,r),B.accentColor=ji(t,"paint","hillshade-accent-color",WA,r)}),d.setVisible(t.layout?t.layout.visibility!=="none":!0)}const m=a;return d&&d.set("mapbox-source",m),d}function NN(n,e,t,i){const r=[];let o=null;if(e instanceof c5){if(o=e.getView(),!o.isDef()&&!o.getRotation()&&!o.getResolutions()){const v=i.projection?Us(i.projection):o.getProjection();o=new Sm(Object.assign(o.getProperties(),{maxResolution:Pm[0]/Iv[v.getUnits()],projection:i.projection||o.getProjection()})),e.setView(o)}"center"in n&&!o.getCenter()&&o.setCenter(OD(n.center,o.getProjection())),"zoom"in n&&o.getZoom()===void 0&&o.setResolution(Pm[0]/Iv[o.getProjection().getUnits()]/Math.pow(2,n.zoom)),(!o.getCenter()||o.getZoom()===void 0)&&o.fit(o.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",n),e.set("mapbox-metadata",{styleUrl:t,options:i});const s=n.layers;let a=[],c,d,m;for(let v=0,M=s.length;v<M;++v){const B=s[v],P=B.type;if(P=="heatmap"){console.debug(`layers[${v}].type "${P}" not supported`);continue}else m=B.source||ate(s,B.ref),(!m||m!=d)&&(a.length&&(r.push(GN(c,a,n,t,e,i)),a=[]),c=a_e(n,t,B,i),c instanceof iU||c instanceof b4||(a=[]),d=c.get("mapbox-source")),a.push(B.id)}return r.push(GN(c,a,n,t,e,i)),Promise.all(r)}function l_e(n,e,t={}){let i,r;if(VA){if(!(n instanceof c5)&&!(n instanceof qC))throw new Error("ol-mapbox-style in a web worker requires a Map or a LayerGroup as first argument");r=n}else typeof n=="string"||n instanceof HTMLElement?r=new c5({target:n}):r=n;if(typeof e=="string"){const o=e.startsWith("data:")?location.href:SE(e,t.accessToken);t=ste(o,t),i=new Promise(function(s,a){jee(e,t).then(function(c){NN(c,r,o,t).then(function(){s(r)}).catch(a)}).catch(function(c){a(new Error(`Could not load ${e}: ${c.message}`))})})}else i=new Promise(function(o,s){NN(e,r,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:SE(t.styleUrl,t.accessToken),t).then(function(){o(r)}).catch(s)});return i}function GN(n,e,t,i,r,o={}){let s=24,a=0;const c=t.layers;for(let d=0,m=c.length;d<m;++d){const v=c[d];e.indexOf(v.id)!==-1&&(s=Math.min("minzoom"in v?v.minzoom:0,s),a=Math.max("maxzoom"in v?v.maxzoom:24,a))}return new Promise(function(d,m){const v=function(){const B=n.getSource();if(!B||B.getState()==="error"){m(new Error("Error accessing data for source "+n.get("mapbox-source")));return}if("getTileGrid"in B){const P=B.getTileGrid();if(P){const U=P.getMinZoom();(s>0||U>0)&&n.setMaxResolution(Math.min(X3(Math.max(0,s-1e-12),Pm),X3(Math.max(0,U-1e-12),P.getResolutions()))),a<24&&n.setMinResolution(X3(a,Pm))}}else s>0&&n.setMaxResolution(X3(Math.max(0,s-1e-12),Pm));B instanceof yS||B instanceof dU?$Ce(n,t,e,Object.assign({styleUrl:i},o)).then(function(){s_e(n,r),d()}).catch(m):d()};n.set("mapbox-layers",e);const M=r.getLayers();M.getArray().indexOf(n)===-1&&M.push(n),n.getSource()?v():n.once("change:source",v)})}function Ii(){var n="/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",e="5f4719fc476214e7aff32d9043337b9c97544cf9",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",statementMap:{0:{start:{line:11,column:2},end:{line:15,column:3}},1:{start:{line:12,column:4},end:{line:12,column:16}},2:{start:{line:14,column:4},end:{line:14,column:149}},3:{start:{line:14,column:103},end:{line:14,column:133}},4:{start:{line:18,column:24},end:{line:25,column:3}},5:{start:{line:28,column:14},end:{line:28,column:18}},6:{start:{line:30,column:19},end:{line:30,column:23}},7:{start:{line:32,column:4},end:{line:32,column:17}},8:{start:{line:33,column:4},end:{line:38,column:6}},9:{start:{line:39,column:4},end:{line:39,column:67}},10:{start:{line:42,column:4},end:{line:42,column:26}},11:{start:{line:42,column:19},end:{line:42,column:26}},12:{start:{line:43,column:4},end:{line:43,column:33}},13:{start:{line:44,column:4},end:{line:44,column:33}},14:{start:{line:47,column:4},end:{line:51,column:5}},15:{start:{line:48,column:6},end:{line:50,column:8}},16:{start:{line:54,column:4},end:{line:61,column:7}},17:{start:{line:62,column:16},end:{line:69,column:6}},18:{start:{line:70,column:4},end:{line:78,column:7}},19:{start:{line:71,column:21},end:{line:71,column:45}},20:{start:{line:72,column:6},end:{line:77,column:9}},21:{start:{line:79,column:22},end:{line:89,column:5}},22:{start:{line:80,column:19},end:{line:80,column:42}},23:{start:{line:81,column:21},end:{line:81,column:56}},24:{start:{line:82,column:6},end:{line:88,column:9}},25:{start:{line:90,column:4},end:{line:90,column:16}},26:{start:{line:91,column:4},end:{line:91,column:33}},27:{start:{line:92,column:4},end:{line:102,column:7}},28:{start:{line:93,column:21},end:{line:93,column:56}},29:{start:{line:94,column:6},end:{line:101,column:9}},30:{start:{line:103,column:4},end:{line:103,column:19}},31:{start:{line:104,column:4},end:{line:106,column:6}},32:{start:{line:108,column:17},end:{line:111,column:3}},33:{start:{line:109,column:4},end:{line:109,column:20}},34:{start:{line:110,column:4},end:{line:110,column:37}},35:{start:{line:113,column:14},end:{line:113,column:26}},36:{start:{line:114,column:4},end:{line:185,column:9}},37:{start:{line:119,column:12},end:{line:119,column:36}},38:{start:{line:176,column:12},end:{line:176,column:31}},39:{start:{line:188,column:22},end:{line:188,column:62}}},fnMap:{0:{name:"renderCoords",decl:{start:{line:10,column:9},end:{line:10,column:21}},loc:{start:{line:10,column:30},end:{line:16,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:14,column:92},end:{line:14,column:93}},loc:{start:{line:14,column:103},end:{line:14,column:133}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:20,column:5}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:21,column:18},end:{line:21,column:19}},loc:{start:{line:21,column:24},end:{line:22,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:24,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:21},end:{line:40,column:3}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:28},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:32},end:{line:52,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:22},end:{line:107,column:3}},line:53},9:{name:"(anonymous_9)",decl:{start:{line:70,column:26},end:{line:70,column:27}},loc:{start:{line:70,column:35},end:{line:78,column:5}},line:70},10:{name:"(anonymous_10)",decl:{start:{line:79,column:22},end:{line:79,column:23}},loc:{start:{line:79,column:28},end:{line:89,column:5}},line:79},11:{name:"(anonymous_11)",decl:{start:{line:92,column:25},end:{line:92,column:26}},loc:{start:{line:92,column:33},end:{line:102,column:5}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:108,column:17},end:{line:108,column:18}},loc:{start:{line:108,column:24},end:{line:111,column:3}},line:108},13:{name:"(anonymous_13)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:11},end:{line:186,column:3}},line:112},14:{name:"(anonymous_14)",decl:{start:{line:118,column:15},end:{line:118,column:16}},loc:{start:{line:118,column:22},end:{line:120,column:11}},line:118},15:{name:"(anonymous_15)",decl:{start:{line:175,column:15},end:{line:175,column:16}},loc:{start:{line:175,column:22},end:{line:177,column:11}},line:175}},branchMap:{0:{loc:{start:{line:11,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:11,column:2},end:{line:15,column:3}},{start:{line:13,column:9},end:{line:15,column:3}}],line:11},1:{loc:{start:{line:11,column:6},end:{line:11,column:34}},type:"binary-expr",locations:[{start:{line:11,column:6},end:{line:11,column:13}},{start:{line:11,column:17},end:{line:11,column:34}}],line:11},2:{loc:{start:{line:42,column:4},end:{line:42,column:26}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},3:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},4:{loc:{start:{line:136,column:26},end:{line:136,column:59}},type:"binary-expr",locations:[{start:{line:136,column:26},end:{line:136,column:53}},{start:{line:136,column:57},end:{line:136,column:59}}],line:136},5:{loc:{start:{line:148,column:6},end:{line:170,column:10}},type:"binary-expr",locations:[{start:{line:148,column:6},end:{line:148,column:29}},{start:{line:148,column:49},end:{line:170,column:10}}],line:148}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx"],names:[],mappings:"AAoBW,cAyIL,YAzIK;AApBX,OAAO,WAAW;AAClB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAEtD,OAAO,6BAA6B;AAEpC,OAAO;AAEP,SAAQ,aAAY;AACpB,SAAQ,KAAK,MAAM,eAAc;AAEjC,SAAQ,gBAAe;AAIvB,SAAS,aAAc,QAAkB;AACvC,MAAI,CAAC,UAAU,OAAO,SAAS,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO,oBAAC,UAAK,WAAU,mBACpB,iBAAO,IAAI,CAAC,UAAU,OAAO,KAAK,EAAE,SAAS,GAAG,GAAQ,CAAC,EAAE,KAAK,IAAI,GACvE;AAAA,EACF;AACF;AAqBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAmC;AAAA,EACnC;AAAA,EACA,iBAAqC;AAAA,EAErC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU;AAAA,MACV,QAAQ,CAAC;AAAA,MACT,QAAQ,CAAC;AAAA,IACX;AACA,SAAK,cAAc,SAAS,KAAK,aAAa,KAAK,IAAI,GAAG,GAAG;AAAA,EAC/D;AAAA,EAEA,aAAa,aAAiC;AAC5C,QAAG,CAAC,KAAK,IAAK;AAGd,SAAK,IAAI,UAAU,EAAE,MAAM;AAC3B,UAAM,KAAK,KAAK,WAAW;AAAA,EAC7B;AAAA,EAEA,mBAAmB,WAAuC;AACxD,QAAI,KAAK,MAAM,aAAa,UAAU,UAAU;AAC9C,WAAK;AAAA,QACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,UAAU,IAAI,QAAQ;AAAA,MACzB,SAAS,KAAK;AAAA,MACd,SAAS;AAAA,QACP,WAAW;AAAA,UACT,UAAU;AAAA,QACZ;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,MAAM,IAAI,IAAI;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,UAAU,CAAC,KAAK,OAAO;AAAA,MACvB,MAAM,IAAI,KAAK;AAAA,QACb,MAAM;AAAA,QACN,QAAQ,CAAC,KAAK,GAAG;AAAA,MACnB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,eAAe,CAAC,QAAQ;AAC7B,YAAM,SAAS,SAAS,IAAI,UAAU;AACtC,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,UAAM,YAAY,MAAM;AACtB,YAAM,OAAO,IAAI,QAAQ,EAAE,QAAQ;AACnC,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAElD,WAAK,MAAM,SAAS;AAAA,QAClB;AAAA,QACA,QAAQ;AAAA,UACN,KAAK,OAAO,CAAC;AAAA,UACb,KAAK,OAAO,CAAC;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH;AAEA,cAAU;AACV,QAAI,GAAG,WAAW,SAAS;AAE3B,QAAI,GAAG,cAAc,CAAC,OAAO;AAC3B,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAClD,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,QACA,UAAU,IAAI,QAAQ,EAAE,YAAY,EAAE,QAAQ,CAAC;AAAA,QAC/C,MAAM,IAAI,QAAQ,EAAE,QAAQ,EAAG,QAAQ,CAAC;AAAA,MAC1C,CAAC;AAAA,IACH,CAAC;AAID,SAAK,MAAM;AACX,SAAK;AAAA,MACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,eAAe,CAAC,MAAW;AACzB,MAAE,OAAO,KAAK;AACd,SAAK,QAAS,YAAY,MAAS;AAAA,EACrC;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,yBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,KAAK,OAAK;AAAC,iBAAK,iBAAiB;AAAA,UAAE;AAAA,UACnC,OAAO,EAAC,YAAY,QAAO;AAAA,UAC3B,WAAU;AAAA,UAEV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,cAAY,EAAE,aAAa;AAAA,gBAC5B;AAAA;AAAA,YAED;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,UAAU,KAAK,MAAM,oBAAoB,CAAC;AAAA,gBAC1C,eAAe,KAAK,MAAM;AAAA;AAAA,YAC5B;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,oBACZ;AAAA,UAAE,OAAO;AAAA,QAAE;AAAA,QAAE,KAAK,MAAM;AAAA,SAC3B;AAAA,MACC,KAAK,MAAM,gBACV,qBAAC,SAAI,WAAU,qBACb;AAAA,6BAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,WAAW;AAAA,YAAE;AAAA,aAAC;AAAA,UACxB,oBAAC,UAAM,eAAK,MAAM,UAAS;AAAA,WAC7B;AAAA,SACF;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,KAAK,OAAK;AAAC,iBAAK,YAAY;AAAA,UAAE;AAAA,UAC9B,MAAK;AAAA,UACL,cAAY,EAAE,UAAU;AAAA,UACxB,OAAO;AAAA,YACL,GAAG,KAAK,MAAM;AAAA,UAChB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5f4719fc476214e7aff32d9043337b9c97544cf9"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ii=function(){return s},s}Ii();function WN(n){return Ii().f[0]++,Ii().s[0]++,Ii().b[1][0]++,!n||(Ii().b[1][1]++,n.length<2)?(Ii().b[0][0]++,Ii().s[1]++,null):(Ii().b[0][1]++,Ii().s[2]++,oe.jsx("span",{className:"maputnik-coords",children:n.map(e=>(Ii().f[1]++,Ii().s[3]++,String(e).padStart(7,""))).join(", ")}))}class u_e extends In.Component{static defaultProps=(Ii().s[4]++,{onMapLoaded:()=>{Ii().f[2]++},onDataChange:()=>{Ii().f[3]++},onLayerSelect:()=>{Ii().f[4]++}});updateStyle;map;container=(Ii().s[5]++,null);overlay;popupContainer=(Ii().s[6]++,null);constructor(e){Ii().f[5]++,Ii().s[7]++,super(e),Ii().s[8]++,this.state={zoom:"0",rotation:"0",cursor:[],center:[]},Ii().s[9]++,this.updateStyle=$5.throttle(this._updateStyle.bind(this),200)}_updateStyle(e){if(Ii().f[6]++,Ii().s[10]++,this.map)Ii().b[2][1]++;else{Ii().b[2][0]++,Ii().s[11]++;return}Ii().s[12]++,this.map.getLayers().clear(),Ii().s[13]++,l_e(this.map,e)}componentDidUpdate(e){Ii().f[7]++,Ii().s[14]++,this.props.mapStyle!==e.mapStyle?(Ii().b[3][0]++,Ii().s[15]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))):Ii().b[3][1]++}componentDidMount(){Ii().f[8]++,Ii().s[16]++,this.overlay=new nbe({element:this.popupContainer,autoPan:{animation:{duration:250}}});const e=(Ii().s[17]++,new c5({target:this.container,overlays:[this.overlay],view:new Sm({zoom:1,center:[180,-90]})}));Ii().s[18]++,e.on("pointermove",i=>{Ii().f[9]++;const r=(Ii().s[19]++,d8(i.coordinate));Ii().s[20]++,this.setState({cursor:[r[0].toFixed(2),r[1].toFixed(2)]})}),Ii().s[21]++;const t=()=>{Ii().f[10]++;const i=(Ii().s[22]++,e.getView().getZoom()),r=(Ii().s[23]++,d8(e.getView().getCenter()));Ii().s[24]++,this.props.onChange({zoom:i,center:{lng:r[0],lat:r[1]}})};Ii().s[25]++,t(),Ii().s[26]++,e.on("moveend",t),Ii().s[27]++,e.on("postrender",i=>{Ii().f[11]++;const r=(Ii().s[28]++,d8(e.getView().getCenter()));Ii().s[29]++,this.setState({center:[r[0].toFixed(2),r[1].toFixed(2)],rotation:e.getView().getRotation().toFixed(2),zoom:e.getView().getZoom().toFixed(2)})}),Ii().s[30]++,this.map=e,Ii().s[31]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))}closeOverlay=(Ii().s[32]++,e=>{Ii().f[12]++,Ii().s[33]++,e.target.blur(),Ii().s[34]++,this.overlay.setPosition(void 0)});render(){Ii().f[13]++;const e=(Ii().s[35]++,this.props.t);return Ii().s[36]++,oe.jsxs("div",{className:"maputnik-ol-container",children:[oe.jsxs("div",{ref:t=>{Ii().f[14]++,Ii().s[37]++,this.popupContainer=t},style:{background:"black"},className:"maputnik-popup",children:[oe.jsx("button",{className:"maplibregl-popup-close-button",onClick:this.closeOverlay,"aria-label":e("Close popup"),children:""}),oe.jsx(NX,{features:(Ii().b[4][0]++,this.state.selectedFeatures||(Ii().b[4][1]++,[])),onLayerSelect:this.props.onLayerSelect})]}),oe.jsxs("div",{className:"maputnik-ol-zoom",children:[e("Zoom:")," ",this.state.zoom]}),(Ii().b[5][0]++,this.props.debugToolbox&&(Ii().b[5][1]++,oe.jsxs("div",{className:"maputnik-ol-debug",children:[oe.jsxs("div",{children:[oe.jsxs("label",{children:[e("cursor:")," "]}),oe.jsx("span",{children:WN(this.state.cursor)})]}),oe.jsxs("div",{children:[oe.jsxs("label",{children:[e("center:")," "]}),oe.jsx("span",{children:WN(this.state.center)})]}),oe.jsxs("div",{children:[oe.jsxs("label",{children:[e("rotation:")," "]}),oe.jsx("span",{children:this.state.rotation})]})]}))),oe.jsx("div",{className:"maputnik-ol",ref:t=>{Ii().f[15]++,Ii().s[38]++,this.container=t},role:"region","aria-label":e("Map view"),style:{...this.props.style}})]})}}const c_e=(Ii().s[39]++,Do()(u_e));var Q8={exports:{}};var QN;function A_e(){return QN||(QN=1,(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(o=r(o,i(a)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var a in o)e.call(o,a)&&o[a]&&(s=r(s,a));return s}function r(o,s){return s?o?o+" "+s:o+s:o}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(Q8)),Q8.exports}var h_e=A_e();const Ig=vu(h_e),d_e=/("(?:[^\\"]|\\.)*")|[:,]/g;function f_e(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),i=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:r}=e;return(function o(s,a,c){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const d=JSON.stringify(s,r);if(d===void 0)return d;const m=i-a.length-c;if(d.length<=m){const v=d.replace(d_e,(M,B)=>B||`${M} `);if(v.length<=m)return v}if(r!=null&&(s=JSON.parse(d),r=void 0),typeof s=="object"&&s!==null){const v=a+t,M=[];let B=0,P,U;if(Array.isArray(s)){P="[",U="]";const{length:z}=s;for(;B<z;B++)M.push(o(s[B],v,B===z-1?0:1)||"null")}else{P="{",U="}";const z=Object.keys(s),{length:V}=z;for(;B<V;B++){const Z=z[B],X=`${JSON.stringify(Z)}: `,re=o(s[Z],v,X.length+(B===V-1?0:1));re!==void 0&&M.push(X+re)}}if(M.length>0)return[P,t+M.join(`,
${v}`),U].join(`
${a}`)}return d})(n,"",0)}let $D=[],hte=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?hte:$D).push(t=t+n[e])})();function p_e(n){if(n<768)return!1;for(let e=0,t=$D.length;;){let i=e+t>>1;if(n<$D[i])t=i;else if(n>=hte[i])e=i+1;else return!0;if(e==t)return!1}}function qN(n){return n>=127462&&n<=127487}const YN=8205;function m_e(n,e,t=!0,i=!0){return(t?dte:g_e)(n,e,i)}function dte(n,e,t){if(e==n.length)return e;e&&fte(n.charCodeAt(e))&&pte(n.charCodeAt(e-1))&&e--;let i=q8(n,e);for(e+=VN(i);e<n.length;){let r=q8(n,e);if(i==YN||r==YN||t&&p_e(r))e+=VN(r),i=r;else if(qN(r)){let o=0,s=e-2;for(;s>=0&&qN(q8(n,s));)o++,s-=2;if(o%2==0)break;e+=2}else break}return e}function g_e(n,e,t){for(;e>0;){let i=dte(n,e-2,t);if(i<e)return i;e--}return 0}function q8(n,e){let t=n.charCodeAt(e);if(!pte(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return fte(i)?(t-55296<<10)+(i-56320)+65536:t}function fte(n){return n>=56320&&n<57344}function pte(n){return n>=55296&&n<56320}function VN(n){return n<65536?1:2}class As{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=v2(this,e,t);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(t,this.length,r,1),ng.from(r,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=v2(this,e,t);let i=[];return this.decompose(e,t,i,0),ng.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new C4(this),o=new C4(e);for(let s=t,a=t;;){if(r.next(s),o.next(s),s=0,r.lineBreak!=o.lineBreak||r.done!=o.done||r.value!=o.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new C4(this,e)}iterRange(e,t=this.length){return new mte(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new gte(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?As.empty:e.length<=32?new gu(e):ng.from(gu.split(e,[]))}}class gu extends As{constructor(e,t=y_e(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,r){for(let o=0;;o++){let s=this.text[o],a=r+s.length;if((t?i:a)>=e)return new v_e(r,a,i,s);r=a+1,i++}}decompose(e,t,i,r){let o=e<=0&&t>=this.length?this:new gu($N(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let s=i.pop(),a=CS(o.text,s.text.slice(),0,o.length);if(a.length<=32)i.push(new gu(a,s.length+o.length));else{let c=a.length>>1;i.push(new gu(a.slice(0,c)),new gu(a.slice(c)))}}else i.push(o)}replace(e,t,i){if(!(i instanceof gu))return super.replace(e,t,i);[e,t]=v2(this,e,t);let r=CS(this.text,CS(i.text,$N(this.text,0,e)),t),o=this.length+i.length-(t-e);return r.length<=32?new gu(r,o):ng.from(gu.split(r,[]),o)}sliceString(e,t=this.length,i=`
`){[e,t]=v2(this,e,t);let r="";for(let o=0,s=0;o<=t&&s<this.text.length;s++){let a=this.text[s],c=o+a.length;o>e&&s&&(r+=i),e<c&&t>o&&(r+=a.slice(Math.max(0,e-o),t-o)),o=c+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],r=-1;for(let o of e)i.push(o),r+=o.length+1,i.length==32&&(t.push(new gu(i,r)),i=[],r=-1);return r>-1&&t.push(new gu(i,r)),t}}class ng extends As{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,r){for(let o=0;;o++){let s=this.children[o],a=r+s.length,c=i+s.lines-1;if((t?c:a)>=e)return s.lineInner(e,t,i,r);r=a+1,i=c+1}}decompose(e,t,i,r){for(let o=0,s=0;s<=t&&o<this.children.length;o++){let a=this.children[o],c=s+a.length;if(e<=c&&t>=s){let d=r&((s<=e?1:0)|(c>=t?2:0));s>=e&&c<=t&&!d?i.push(a):a.decompose(e-s,t-s,i,d)}s=c+1}}replace(e,t,i){if([e,t]=v2(this,e,t),i.lines<this.lines)for(let r=0,o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.length;if(e>=o&&t<=a){let c=s.replace(e-o,t-o,i),d=this.lines-s.lines+c.lines;if(c.lines<d>>4&&c.lines>d>>6){let m=this.children.slice();return m[r]=c,new ng(m,this.length-(t-e)+i.length)}return super.replace(o,a,c)}o=a+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=v2(this,e,t);let r="";for(let o=0,s=0;o<this.children.length&&s<=t;o++){let a=this.children[o],c=s+a.length;s>e&&o&&(r+=i),e<c&&t>s&&(r+=a.sliceString(e-s,t-s,i)),s=c+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof ng))return 0;let i=0,[r,o,s,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,o+=t){if(r==s||o==a)return i;let c=this.children[r],d=e.children[o];if(c!=d)return i+c.scanIdentical(d,t);i+=c.length+1}}static from(e,t=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let B of e)i+=B.lines;if(i<32){let B=[];for(let P of e)P.flatten(B);return new gu(B,t)}let r=Math.max(32,i>>5),o=r<<1,s=r>>1,a=[],c=0,d=-1,m=[];function v(B){let P;if(B.lines>o&&B instanceof ng)for(let U of B.children)v(U);else B.lines>s&&(c>s||!c)?(M(),a.push(B)):B instanceof gu&&c&&(P=m[m.length-1])instanceof gu&&B.lines+P.lines<=32?(c+=B.lines,d+=B.length+1,m[m.length-1]=new gu(P.text.concat(B.text),P.length+1+B.length)):(c+B.lines>r&&M(),c+=B.lines,d+=B.length+1,m.push(B))}function M(){c!=0&&(a.push(m.length==1?m[0]:ng.from(m,d)),d=-1,c=m.length=0)}for(let B of e)v(B);return M(),a.length==1?a[0]:new ng(a,t)}}As.empty=new gu([""],0);function y_e(n){let e=-1;for(let t of n)e+=t.length+1;return e}function CS(n,e,t=0,i=1e9){for(let r=0,o=0,s=!0;o<n.length&&r<=i;o++){let a=n[o],c=r+a.length;c>=t&&(c>i&&(a=a.slice(0,i-r)),r<t&&(a=a.slice(t-r)),s?(e[e.length-1]+=a,s=!1):e.push(a)),r=c+1}return e}function $N(n,e,t){return CS(n,[""],e,t)}class C4{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof gu?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],o=this.offsets[i],s=o>>1,a=r instanceof gu?r.text.length:r.children.length;if(s==(t>0?a:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof gu){let c=r.text[s+(t<0?-1:0)];if(this.offsets[i]+=t,c.length>Math.max(0,e))return this.value=e==0?c:t>0?c.slice(e):c.slice(0,c.length-e),this;e-=c.length}else{let c=r.children[s+(t<0?-1:0)];e>c.length?(e-=c.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(c),this.offsets.push(t>0?1:(c instanceof gu?c.text.length:c.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class mte{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new C4(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=i?r:t<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class gte{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(As.prototype[Symbol.iterator]=function(){return this.iter()},C4.prototype[Symbol.iterator]=mte.prototype[Symbol.iterator]=gte.prototype[Symbol.iterator]=function(){return this});class v_e{constructor(e,t,i,r){this.from=e,this.to=t,this.number=i,this.text=r}get length(){return this.to-this.from}}function v2(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function fc(n,e,t=!0,i=!0){return m_e(n,e,t,i)}function b_e(n){return n>=56320&&n<57344}function C_e(n){return n>=55296&&n<56320}function xd(n,e){let t=n.charCodeAt(e);if(!C_e(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return b_e(i)?(t-55296<<10)+(i-56320)+65536:t}function pU(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function ig(n){return n<65536?1:2}const HD=/\r\n?|\n/;var Oh=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(Oh||(Oh={}));class _g{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,r=0;t<this.sections.length;){let o=this.sections[t++],s=this.sections[t++];s<0?(e(i,r,o),r+=o):r+=s,i+=o}}iterChangedRanges(e,t=!1){ZD(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];r<0?e.push(i,r):e.push(r,i)}return new _g(e)}composeDesc(e){return this.empty?e:e.empty?this:yte(this,e)}mapDesc(e,t=!1){return e.empty?this:XD(this,e,t)}mapPos(e,t=-1,i=Oh.Simple){let r=0,o=0;for(let s=0;s<this.sections.length;){let a=this.sections[s++],c=this.sections[s++],d=r+a;if(c<0){if(d>e)return o+(e-r);o+=a}else{if(i!=Oh.Simple&&d>=e&&(i==Oh.TrackDel&&r<e&&d>e||i==Oh.TrackBefore&&r<e||i==Oh.TrackAfter&&d>e))return null;if(d>e||d==e&&t<0&&!a)return e==r||t<0?o:o+c;o+=c}r=d}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return o}touchesRange(e,t=e){for(let i=0,r=0;i<this.sections.length&&r<=t;){let o=this.sections[i++],s=this.sections[i++],a=r+o;if(s>=0&&r<=t&&a>=e)return r<e&&a>t?"cover":!0;r=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new _g(e)}static create(e){return new _g(e)}}class Ac extends _g{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return ZD(this,(t,i,r,o,s)=>e=e.replace(r,r+(i-t),s),!1),e}mapDesc(e,t=!1){return XD(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let r=0,o=0;r<t.length;r+=2){let s=t[r],a=t[r+1];if(a>=0){t[r]=a,t[r+1]=s;let c=r>>1;for(;i.length<c;)i.push(As.empty);i.push(s?e.slice(o,o+s):As.empty)}o+=s}return new Ac(t,i)}compose(e){return this.empty?e:e.empty?this:yte(this,e,!0)}map(e,t=!1){return e.empty?this:XD(this,e,t,!0)}iterChanges(e,t=!1){ZD(this,e,t)}get desc(){return _g.create(this.sections)}filter(e){let t=[],i=[],r=[],o=new d5(this);e:for(let s=0,a=0;;){let c=s==e.length?1e9:e[s++];for(;a<c||a==c&&o.len==0;){if(o.done)break e;let m=Math.min(o.len,c-a);QA(r,m,-1);let v=o.ins==-1?-1:o.off==0?o.ins:0;QA(t,m,v),v>0&&yv(i,t,o.text),o.forward(m),a+=m}let d=e[s++];for(;a<d;){if(o.done)break e;let m=Math.min(o.len,d-a);QA(t,m,-1),QA(r,m,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(m),a+=m}}return{changes:new Ac(t,i),filtered:_g.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],r=this.sections[t+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let r=[],o=[],s=0,a=null;function c(m=!1){if(!m&&!r.length)return;s<t&&QA(r,t-s,-1);let v=new Ac(r,o);a=a?a.compose(v.map(a)):v,r=[],o=[],s=0}function d(m){if(Array.isArray(m))for(let v of m)d(v);else if(m instanceof Ac){if(m.length!=t)throw new RangeError(`Mismatched change set length (got ${m.length}, expected ${t})`);c(),a=a?a.compose(m.map(a)):m}else{let{from:v,to:M=v,insert:B}=m;if(v>M||v<0||M>t)throw new RangeError(`Invalid change range ${v} to ${M} (in doc of length ${t})`);let P=B?typeof B=="string"?As.of(B.split(i||HD)):B:As.empty,U=P.length;if(v==M&&U==0)return;v<s&&c(),v>s&&QA(r,v-s,-1),QA(r,M-v,U),yv(o,r,P),s=M}}return d(e),c(!a),a}static empty(e){return new Ac(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let r=0;r<e.length;r++){let o=e[r];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,a)=>a&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;i.length<r;)i.push(As.empty);i[r]=As.of(o.slice(1)),t.push(o[0],i[r].length)}}}return new Ac(t,i)}static createSet(e,t){return new Ac(e,t)}}function QA(n,e,t,i=!1){if(e==0&&t<=0)return;let r=n.length-2;r>=0&&t<=0&&t==n[r+1]?n[r]+=e:r>=0&&e==0&&n[r]==0?n[r+1]+=t:i?(n[r]+=e,n[r+1]+=t):n.push(e,t)}function yv(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(As.empty);n.push(t)}}function ZD(n,e,t){let i=n.inserted;for(let r=0,o=0,s=0;s<n.sections.length;){let a=n.sections[s++],c=n.sections[s++];if(c<0)r+=a,o+=a;else{let d=r,m=o,v=As.empty;for(;d+=a,m+=c,c&&i&&(v=v.append(i[s-2>>1])),!(t||s==n.sections.length||n.sections[s+1]<0);)a=n.sections[s++],c=n.sections[s++];e(r,d,o,m,v),r=d,o=m}}}function XD(n,e,t,i=!1){let r=[],o=i?[]:null,s=new d5(n),a=new d5(e);for(let c=-1;;){if(s.done&&a.len||a.done&&s.len)throw new Error("Mismatched change set lengths");if(s.ins==-1&&a.ins==-1){let d=Math.min(s.len,a.len);QA(r,d,-1),s.forward(d),a.forward(d)}else if(a.ins>=0&&(s.ins<0||c==s.i||s.off==0&&(a.len<s.len||a.len==s.len&&!t))){let d=a.len;for(QA(r,a.ins,-1);d;){let m=Math.min(s.len,d);s.ins>=0&&c<s.i&&s.len<=m&&(QA(r,0,s.ins),o&&yv(o,r,s.text),c=s.i),s.forward(m),d-=m}a.next()}else if(s.ins>=0){let d=0,m=s.len;for(;m;)if(a.ins==-1){let v=Math.min(m,a.len);d+=v,m-=v,a.forward(v)}else if(a.ins==0&&a.len<m)m-=a.len,a.next();else break;QA(r,d,c<s.i?s.ins:0),o&&c<s.i&&yv(o,r,s.text),c=s.i,s.forward(s.len-m)}else{if(s.done&&a.done)return o?Ac.createSet(r,o):_g.create(r);throw new Error("Mismatched change set lengths")}}}function yte(n,e,t=!1){let i=[],r=t?[]:null,o=new d5(n),s=new d5(e);for(let a=!1;;){if(o.done&&s.done)return r?Ac.createSet(i,r):_g.create(i);if(o.ins==0)QA(i,o.len,0,a),o.next();else if(s.len==0&&!s.done)QA(i,0,s.ins,a),r&&yv(r,i,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let c=Math.min(o.len2,s.len),d=i.length;if(o.ins==-1){let m=s.ins==-1?-1:s.off?0:s.ins;QA(i,c,m,a),r&&m&&yv(r,i,s.text)}else s.ins==-1?(QA(i,o.off?0:o.len,c,a),r&&yv(r,i,o.textBit(c))):(QA(i,o.off?0:o.len,s.off?0:s.ins,a),r&&!s.off&&yv(r,i,s.text));a=(o.ins>c||s.ins>=0&&s.len>c)&&(a||i.length>d),o.forward2(c),s.forward(c)}}}}class d5{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?As.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?As.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class lC{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new lC(i,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Sn.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Sn.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Sn.range(e.anchor,e.head)}static create(e,t,i){return new lC(e,t,i)}}class Sn{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Sn.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Sn([this.main],0)}addRange(e,t=!0){return Sn.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,Sn.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Sn(e.ranges.map(t=>lC.fromJSON(t)),e.main)}static single(e,t=e){return new Sn([Sn.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let o=e[r];if(o.empty?o.from<=i:o.from<i)return Sn.normalized(e.slice(),t);i=o.to}return new Sn(e,t)}static cursor(e,t=0,i,r){return lC.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,t,i,r){let o=(i??16777215)<<6|(r==null?7:Math.min(6,r));return t<e?lC.create(t,e,48|o):lC.create(e,t,(t>e?8:0)|o)}static normalized(e,t=0){let i=e[t];e.sort((r,o)=>r.from-o.from),t=e.indexOf(i);for(let r=1;r<e.length;r++){let o=e[r],s=e[r-1];if(o.empty?o.from<=s.to:o.from<s.to){let a=s.from,c=Math.max(o.to,s.to);r<=t&&t--,e.splice(--r,2,o.anchor>o.head?Sn.range(c,a):Sn.range(a,c))}}return new Sn(e,t)}}function vte(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let mU=0;class Bi{constructor(e,t,i,r,o){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=r,this.id=mU++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new Bi(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:gU),!!e.static,e.enables)}of(e){return new _S([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new _S(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new _S(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function gU(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class _S{constructor(e,t,i,r){this.dependencies=e,this.facet=t,this.type=i,this.value=r,this.id=mU++}dynamicSlot(e){var t;let i=this.value,r=this.facet.compareInput,o=this.id,s=e[o]>>1,a=this.type==2,c=!1,d=!1,m=[];for(let v of this.dependencies)v=="doc"?c=!0:v=="selection"?d=!0:(((t=e[v.id])!==null&&t!==void 0?t:1)&1)==0&&m.push(e[v.id]);return{create(v){return v.values[s]=i(v),1},update(v,M){if(c&&M.docChanged||d&&(M.docChanged||M.selection)||JD(v,m)){let B=i(v);if(a?!HN(B,v.values[s],r):!r(B,v.values[s]))return v.values[s]=B,1}return 0},reconfigure:(v,M)=>{let B,P=M.config.address[o];if(P!=null){let U=TE(M,P);if(this.dependencies.every(z=>z instanceof Bi?M.facet(z)===v.facet(z):z instanceof mc?M.field(z,!1)==v.field(z,!1):!0)||(a?HN(B=i(v),U,r):r(B=i(v),U)))return v.values[s]=U,0}else B=i(v);return v.values[s]=B,1}}}}function HN(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function JD(n,e){let t=!1;for(let i of e)_4(n,i)&1&&(t=!0);return t}function __e(n,e,t){let i=t.map(c=>n[c.id]),r=t.map(c=>c.type),o=i.filter(c=>!(c&1)),s=n[e.id]>>1;function a(c){let d=[];for(let m=0;m<i.length;m++){let v=TE(c,i[m]);if(r[m]==2)for(let M of v)d.push(M);else d.push(v)}return e.combine(d)}return{create(c){for(let d of i)_4(c,d);return c.values[s]=a(c),1},update(c,d){if(!JD(c,o))return 0;let m=a(c);return e.compare(m,c.values[s])?0:(c.values[s]=m,1)},reconfigure(c,d){let m=JD(c,i),v=d.config.facets[e.id],M=d.facet(e);if(v&&!m&&gU(t,v))return c.values[s]=M,0;let B=a(c);return e.compare(B,M)?(c.values[s]=M,0):(c.values[s]=B,1)}}}const vw=Bi.define({static:!0});class mc{constructor(e,t,i,r,o){this.id=e,this.createF=t,this.updateF=i,this.compareF=r,this.spec=o,this.provides=void 0}static define(e){let t=new mc(mU++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(vw).find(i=>i.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,r)=>{let o=i.values[t],s=this.updateF(o,r);return this.compareF(o,s)?0:(i.values[t]=s,1)},reconfigure:(i,r)=>{let o=i.facet(vw),s=r.facet(vw),a;return(a=o.find(c=>c.field==this))&&a!=s.find(c=>c.field==this)?(i.values[t]=a.create(i),1):r.config.address[this.id]!=null?(i.values[t]=r.field(this),0):(i.values[t]=this.create(i),1)}}}init(e){return[this,vw.of({field:this,create:e})]}get extension(){return this}}const Jb={lowest:4,low:3,default:2,high:1,highest:0};function w3(n){return e=>new bte(e,n)}const VC={highest:w3(Jb.highest),high:w3(Jb.high),default:w3(Jb.default),low:w3(Jb.low),lowest:w3(Jb.lowest)};class bte{constructor(e,t){this.inner=e,this.prec=t}}class bM{of(e){return new eR(this,e)}reconfigure(e){return bM.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class eR{constructor(e,t){this.compartment=e,this.inner=t}}class IE{constructor(e,t,i,r,o,s){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=r,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let r=[],o=Object.create(null),s=new Map;for(let M of x_e(e,t,s))M instanceof mc?r.push(M):(o[M.facet.id]||(o[M.facet.id]=[])).push(M);let a=Object.create(null),c=[],d=[];for(let M of r)a[M.id]=d.length<<1,d.push(B=>M.slot(B));let m=i?.config.facets;for(let M in o){let B=o[M],P=B[0].facet,U=m&&m[M]||[];if(B.every(z=>z.type==0))if(a[P.id]=c.length<<1|1,gU(U,B))c.push(i.facet(P));else{let z=P.combine(B.map(V=>V.value));c.push(i&&P.compare(z,i.facet(P))?i.facet(P):z)}else{for(let z of B)z.type==0?(a[z.id]=c.length<<1|1,c.push(z.value)):(a[z.id]=d.length<<1,d.push(V=>z.dynamicSlot(V)));a[P.id]=d.length<<1,d.push(z=>__e(z,P,B))}}let v=d.map(M=>M(a));return new IE(e,s,v,a,c,o)}}function x_e(n,e,t){let i=[[],[],[],[],[]],r=new Map;function o(s,a){let c=r.get(s);if(c!=null){if(c<=a)return;let d=i[c].indexOf(s);d>-1&&i[c].splice(d,1),s instanceof eR&&t.delete(s.compartment)}if(r.set(s,a),Array.isArray(s))for(let d of s)o(d,a);else if(s instanceof eR){if(t.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(s.compartment)||s.inner;t.set(s.compartment,d),o(d,a)}else if(s instanceof bte)o(s.inner,s.prec);else if(s instanceof mc)i[a].push(s),s.provides&&o(s.provides,a);else if(s instanceof _S)i[a].push(s),s.facet.extensions&&o(s.facet.extensions,Jb.default);else{let d=s.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(d,a)}}return o(n,Jb.default),i.reduce((s,a)=>s.concat(a))}function _4(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let r=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|r}function TE(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const Cte=Bi.define(),tR=Bi.define({combine:n=>n.some(e=>e),static:!0}),_te=Bi.define({combine:n=>n.length?n[0]:void 0,static:!0}),xte=Bi.define(),Mte=Bi.define(),wte=Bi.define(),Ste=Bi.define({combine:n=>n.length?n[0]:!1});class Q1{constructor(e,t){this.type=e,this.value=t}static define(){return new M_e}}class M_e{of(e){return new Q1(this,e)}}class w_e{constructor(e){this.map=e}of(e){return new eo(this,e)}}class eo{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new eo(this.type,t)}is(e){return this.type==e}static define(e={}){return new w_e(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let r of e){let o=r.map(t);o&&i.push(o)}return i}}eo.reconfigure=eo.define();eo.appendConfig=eo.define();class pc{constructor(e,t,i,r,o,s){this.startState=e,this.changes=t,this.selection=i,this.effects=r,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,i&&vte(i,t.newLength),o.some(a=>a.type==pc.time)||(this.annotations=o.concat(pc.time.of(Date.now())))}static create(e,t,i,r,o,s){return new pc(e,t,i,r,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(pc.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}pc.time=Q1.define();pc.userEvent=Q1.define();pc.addToHistory=Q1.define();pc.remote=Q1.define();function S_e(n,e){let t=[];for(let i=0,r=0;;){let o,s;if(i<n.length&&(r==e.length||e[r]>=n[i]))o=n[i++],s=n[i++];else if(r<e.length)o=e[r++],s=e[r++];else return t;!t.length||t[t.length-1]<o?t.push(o,s):t[t.length-1]<s&&(t[t.length-1]=s)}}function Ete(n,e,t){var i;let r,o,s;return t?(r=e.changes,o=Ac.empty(e.changes.length),s=n.changes.compose(e.changes)):(r=e.changes.map(n.changes),o=n.changes.mapDesc(e.changes,!0),s=n.changes.compose(r)),{changes:s,selection:e.selection?e.selection.map(o):(i=n.selection)===null||i===void 0?void 0:i.map(r),effects:eo.mapEffects(n.effects,r).concat(eo.mapEffects(e.effects,o)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function nR(n,e,t){let i=e.selection,r=Qx(e.annotations);return e.userEvent&&(r=r.concat(pc.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ac?e.changes:Ac.of(e.changes||[],t,n.facet(_te)),selection:i&&(i instanceof Sn?i:Sn.single(i.anchor,i.head)),effects:Qx(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function Bte(n,e,t){let i=nR(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let s=!!e[o].sequential;i=Ete(i,nR(n,e[o],s?i.changes.newLength:n.doc.length),s)}let r=pc.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return B_e(t?E_e(r):r)}function E_e(n){let e=n.startState,t=!0;for(let r of e.facet(xte)){let o=r(n);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:S_e(t,o))}if(t!==!0){let r,o;if(t===!1)o=n.changes.invertedDesc,r=Ac.empty(e.doc.length);else{let s=n.changes.filter(t);r=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}n=pc.create(e,r,n.selection&&n.selection.map(o),eo.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let i=e.facet(Mte);for(let r=i.length-1;r>=0;r--){let o=i[r](n);o instanceof pc?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof pc?n=o[0]:n=Bte(e,Qx(o),!1)}return n}function B_e(n){let e=n.startState,t=e.facet(wte),i=n;for(let r=t.length-1;r>=0;r--){let o=t[r](n);o&&Object.keys(o).length&&(i=Ete(i,nR(e,o,n.changes.newLength),!0))}return i==n?n:pc.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const O_e=[];function Qx(n){return n==null?O_e:Array.isArray(n)?n:[n]}var ll=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(ll||(ll={}));const I_e=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let iR;try{iR=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function T_e(n){if(iR)return iR.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||I_e.test(t)))return!0}return!1}function k_e(n){return e=>{if(!/\S/.test(e))return ll.Space;if(T_e(e))return ll.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return ll.Word;return ll.Other}}class as{constructor(e,t,i,r,o,s){this.config=e,this.doc=t,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)_4(this,a<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return _4(this,i),TE(this,i)}update(...e){return Bte(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:r}=t;for(let a of e.effects)a.is(bM.reconfigure)?(t&&(r=new Map,t.compartments.forEach((c,d)=>r.set(d,c)),t=null),r.set(a.value.compartment,a.value.extension)):a.is(eo.reconfigure)?(t=null,i=a.value):a.is(eo.appendConfig)&&(t=null,i=Qx(i).concat(a.value));let o;t?o=e.startState.values.slice():(t=IE.resolve(i,r,this),o=new as(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(c,d)=>d.reconfigure(c,this),null).values);let s=e.startState.facet(tR)?e.newSelection:e.newSelection.asSingle();new as(t,e.newDoc,s,o,(a,c)=>c.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:Sn.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),r=this.changes(i.changes),o=[i.range],s=Qx(i.effects);for(let a=1;a<t.ranges.length;a++){let c=e(t.ranges[a]),d=this.changes(c.changes),m=d.map(r);for(let M=0;M<a;M++)o[M]=o[M].map(m);let v=r.mapDesc(d,!0);o.push(c.range.map(v)),r=r.compose(m),s=eo.mapEffects(s,m).concat(eo.mapEffects(Qx(c.effects),v))}return{changes:r,selection:Sn.create(o,t.mainIndex),effects:s}}changes(e=[]){return e instanceof Ac?e:Ac.of(e,this.doc.length,this.facet(as.lineSeparator))}toText(e){return As.of(e.split(this.facet(as.lineSeparator)||HD))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(_4(this,t),TE(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof mc&&this.config.address[r.id]!=null&&(t[i]=r.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(e,o)){let s=i[o],a=e[o];r.push(s.init(c=>s.spec.fromJSON(a,c)))}}return as.create({doc:e.doc,selection:Sn.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=IE.resolve(e.extensions||[],new Map),i=e.doc instanceof As?e.doc:As.of((e.doc||"").split(t.staticFacet(as.lineSeparator)||HD)),r=e.selection?e.selection instanceof Sn?e.selection:Sn.single(e.selection.anchor,e.selection.head):Sn.single(0);return vte(r,i.length),t.staticFacet(tR)||(r=r.asSingle()),new as(t,i,r,t.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet(as.tabSize)}get lineBreak(){return this.facet(as.lineSeparator)||`
`}get readOnly(){return this.facet(Ste)}phrase(e,...t){for(let i of this.facet(as.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let o=+(r||1);return!o||o>t.length?i:t[o-1]})),e}languageDataAt(e,t,i=-1){let r=[];for(let o of this.facet(Cte))for(let s of o(this,t,i))Object.prototype.hasOwnProperty.call(s,e)&&r.push(s[e]);return r}charCategorizer(e){let t=this.languageDataAt("wordChars",e);return k_e(t.length?t[0]:"")}wordAt(e){let{text:t,from:i,length:r}=this.doc.lineAt(e),o=this.charCategorizer(e),s=e-i,a=e-i;for(;s>0;){let c=fc(t,s,!1);if(o(t.slice(c,s))!=ll.Word)break;s=c}for(;a<r;){let c=fc(t,a);if(o(t.slice(a,c))!=ll.Word)break;a=c}return s==a?null:Sn.range(s+i,a+i)}}as.allowMultipleSelections=tR;as.tabSize=Bi.define({combine:n=>n.length?n[0]:4});as.lineSeparator=_te;as.readOnly=Ste;as.phrases=Bi.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(r=>n[r]==e[r])}});as.languageData=Cte;as.changeFilter=xte;as.transactionFilter=Mte;as.transactionExtender=wte;bM.reconfigure=eo.define();function Wm(n,e,t={}){let i={};for(let r of n)for(let o of Object.keys(r)){let s=r[o],a=i[o];if(a===void 0)i[o]=s;else if(!(a===s||s===void 0))if(Object.hasOwnProperty.call(t,o))i[o]=t[o](a,s);else throw new Error("Config merge conflict for field "+o)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Tv{eq(e){return this==e}range(e,t=e){return rR.create(e,t,this)}}Tv.prototype.startSide=Tv.prototype.endSide=0;Tv.prototype.point=!1;Tv.prototype.mapMode=Oh.TrackDel;function yU(n,e){return n==e||n.constructor==e.constructor&&n.eq(e)}let rR=class Ote{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new Ote(e,t,i)}};function oR(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class vU{constructor(e,t,i,r){this.from=e,this.to=t,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,r=0){let o=i?this.to:this.from;for(let s=r,a=o.length;;){if(s==a)return s;let c=s+a>>1,d=o[c]-e||(i?this.value[c].endSide:this.value[c].startSide)-t;if(c==s)return d>=0?s:a;d>=0?a=c:s=c+1}}between(e,t,i,r){for(let o=this.findIndex(t,-1e9,!0),s=this.findIndex(i,1e9,!1,o);o<s;o++)if(r(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let i=[],r=[],o=[],s=-1,a=-1;for(let c=0;c<this.value.length;c++){let d=this.value[c],m=this.from[c]+e,v=this.to[c]+e,M,B;if(m==v){let P=t.mapPos(m,d.startSide,d.mapMode);if(P==null||(M=B=P,d.startSide!=d.endSide&&(B=t.mapPos(m,d.endSide),B<M)))continue}else if(M=t.mapPos(m,d.startSide),B=t.mapPos(v,d.endSide),M>B||M==B&&d.startSide>0&&d.endSide<=0)continue;(B-M||d.endSide-d.startSide)<0||(s<0&&(s=M),d.point&&(a=Math.max(a,B-M)),i.push(d),r.push(M-s),o.push(B-s))}return{mapped:i.length?new vU(r,o,i,a):null,pos:s}}}class mo{constructor(e,t,i,r){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=r}static create(e,t,i,r){return new mo(e,t,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:r=0,filterTo:o=this.length}=e,s=e.filter;if(t.length==0&&!s)return this;if(i&&(t=t.slice().sort(oR)),this.isEmpty)return t.length?mo.of(t):this;let a=new Ite(this,null,-1).goto(0),c=0,d=[],m=new z1;for(;a.value||c<t.length;)if(c<t.length&&(a.from-t[c].from||a.startSide-t[c].value.startSide)>=0){let v=t[c++];m.addInner(v.from,v.to,v.value)||d.push(v)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(c==t.length||this.chunkEnd(a.chunkIndex)<t[c].from)&&(!s||r>this.chunkEnd(a.chunkIndex)||o<this.chunkPos[a.chunkIndex])&&m.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!s||r>a.to||o<a.from||s(a.from,a.to,a.value))&&(m.addInner(a.from,a.to,a.value)||d.push(rR.create(a.from,a.to,a.value))),a.next());return m.finishInner(this.nextLayer.isEmpty&&!d.length?mo.empty:this.nextLayer.update({add:d,filter:s,filterFrom:r,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],r=-1;for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],c=this.chunk[s],d=e.touchesRange(a,a+c.length);if(d===!1)r=Math.max(r,c.maxPoint),t.push(c),i.push(e.mapPos(a));else if(d===!0){let{mapped:m,pos:v}=c.map(a,e);m&&(r=Math.max(r,m.maxPoint),t.push(m),i.push(v))}}let o=this.nextLayer.map(e);return t.length==0?o:new mo(i,t,o||mo.empty,r)}between(e,t,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],s=this.chunk[r];if(t>=o&&e<=o+s.length&&s.between(o,e-o,t-o,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return f5.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return f5.from(e).goto(t)}static compare(e,t,i,r,o=-1){let s=e.filter(v=>v.maxPoint>0||!v.isEmpty&&v.maxPoint>=o),a=t.filter(v=>v.maxPoint>0||!v.isEmpty&&v.maxPoint>=o),c=ZN(s,a,i),d=new S3(s,c,o),m=new S3(a,c,o);i.iterGaps((v,M,B)=>XN(d,v,m,M,B,r)),i.empty&&i.length==0&&XN(d,0,m,0,0,r)}static eq(e,t,i=0,r){r==null&&(r=999999999);let o=e.filter(m=>!m.isEmpty&&t.indexOf(m)<0),s=t.filter(m=>!m.isEmpty&&e.indexOf(m)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let a=ZN(o,s),c=new S3(o,a,0).goto(i),d=new S3(s,a,0).goto(i);for(;;){if(c.to!=d.to||!sR(c.active,d.active)||c.point&&(!d.point||!yU(c.point,d.point)))return!1;if(c.to>r)return!0;c.next(),d.next()}}static spans(e,t,i,r,o=-1){let s=new S3(e,null,o).goto(t),a=t,c=s.openStart;for(;;){let d=Math.min(s.to,i);if(s.point){let m=s.activeForPoint(s.to),v=s.pointFrom<t?m.length+1:s.point.startSide<0?m.length:Math.min(m.length,c);r.point(a,d,s.point,m,v,s.pointRank),c=Math.min(s.openEnd(d),m.length)}else d>a&&(r.span(a,d,s.active,c),c=s.openEnd(d));if(s.to>i)return c+(s.point&&s.to>i?1:0);a=s.to,s.next()}}static of(e,t=!1){let i=new z1;for(let r of e instanceof rR?[e]:t?D_e(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return mo.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=mo.empty;r=r.nextLayer)t=new mo(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}mo.empty=new mo([],[],null,-1);function D_e(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(oR(e,i)>0)return n.slice().sort(oR);e=i}return n}mo.empty.nextLayer=mo.empty;class z1{finishChunk(e){this.chunks.push(new vU(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new z1)).add(e,t,i)}addInner(e,t,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(mo.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=mo.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function ZN(n,e,t){let i=new Map;for(let o of n)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&i.set(o.chunk[s],o.chunkPos[s]);let r=new Set;for(let o of e)for(let s=0;s<o.chunk.length;s++){let a=i.get(o.chunk[s]);a!=null&&(t?t.mapPos(a):a)==o.chunkPos[s]&&!t?.touchesRange(a,a+o.chunk[s].length)&&r.add(o.chunk[s])}return r}class Ite{constructor(e,t,i,r=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class f5{constructor(e){this.heap=e}static from(e,t=null,i=-1){let r=[];for(let o=0;o<e.length;o++)for(let s=e[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=i&&r.push(new Ite(s,t,i,o));return r.length==1?r[0]:new f5(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)Y8(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)Y8(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Y8(this.heap,0)}}}function Y8(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let r=n[i];if(i+1<n.length&&r.compare(n[i+1])>=0&&(r=n[i+1],i++),t.compare(r)<0)break;n[i]=t,n[e]=r,e=i}}class S3{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=f5.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){bw(this.active,e),bw(this.activeTo,e),bw(this.activeRank,e),this.minActive=JN(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:r,rank:o}=this.cursor;for(;t<this.activeRank.length&&(o-this.activeRank[t]||r-this.activeTo[t])>0;)t++;Cw(this.active,t,i),Cw(this.activeTo,t,r),Cw(this.activeRank,t,o),e&&Cw(e,t,this.cursor.from),this.minActive=JN(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&bw(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function XN(n,e,t,i,r,o){n.goto(e),t.goto(i);let s=i+r,a=i,c=i-e,d=!!o.boundChange;for(let m=!1;;){let v=n.to+c-t.to,M=v||n.endSide-t.endSide,B=M<0?n.to+c:t.to,P=Math.min(B,s);if(n.point||t.point?(n.point&&t.point&&yU(n.point,t.point)&&sR(n.activeForPoint(n.to),t.activeForPoint(t.to))||o.comparePoint(a,P,n.point,t.point),m=!1):(m&&o.boundChange(a),P>a&&!sR(n.active,t.active)&&o.compareRange(a,P,n.active,t.active),d&&P<s&&(v||n.openEnd(B)!=t.openEnd(B))&&(m=!0)),B>s)break;a=B,M<=0&&n.next(),M>=0&&t.next()}}function sR(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!yU(n[t],e[t]))return!1;return!0}function bw(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function Cw(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function JN(n,e){let t=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||n[r].endSide-n[t].endSide)<0&&(t=r,i=e[r]);return t}function z2(n,e,t=n.length){let i=0;for(let r=0;r<t&&r<n.length;)n.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=fc(n,r));return i}function aR(n,e,t,i){for(let r=0,o=0;;){if(o>=e)return r;if(r==n.length)break;o+=n.charCodeAt(r)==9?t-o%t:1,r=fc(n,r)}return i===!0?-1:n.length}const lR="",eG=typeof Symbol>"u"?"__"+lR:Symbol.for(lR),uR=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),tG=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class kv{constructor(e,t){this.rules=[];let{finish:i}=t||{};function r(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,a,c,d){let m=[],v=/^@(\w+)\b/.exec(s[0]),M=v&&v[1]=="keyframes";if(v&&a==null)return c.push(s[0]+";");for(let B in a){let P=a[B];if(/&/.test(B))o(B.split(/,\s*/).map(U=>s.map(z=>U.replace(/&/,z))).reduce((U,z)=>U.concat(z)),P,c);else if(P&&typeof P=="object"){if(!v)throw new RangeError("The value of a property ("+B+") should be a primitive value.");o(r(B),P,m,M)}else P!=null&&m.push(B.replace(/_.*/,"").replace(/[A-Z]/g,U=>"-"+U.toLowerCase())+": "+P+";")}(m.length||M)&&c.push((i&&!v&&!d?s.map(i):s).join(", ")+" {"+m.join(" ")+"}")}for(let s in e)o(r(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=tG[eG]||1;return tG[eG]=e+1,lR+e.toString(36)}static mount(e,t,i){let r=e[uR],o=i&&i.nonce;r?o&&r.setNonce(o):r=new R_e(e,o),r.mount(Array.isArray(t)?t:[t],e)}}let nG=new Map;class R_e{constructor(e,t){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let o=nG.get(i);if(o)return e[uR]=o;this.sheet=new r.CSSStyleSheet,nG.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[uR]=this}mount(e,t){let i=this.sheet,r=0,o=0;for(let s=0;s<e.length;s++){let a=e[s],c=this.modules.indexOf(a);if(c<o&&c>-1&&(this.modules.splice(c,1),o--,c=-1),c==-1){if(this.modules.splice(o++,0,a),i)for(let d=0;d<a.rules.length;d++)i.insertRule(a.rules[d],r++)}else{for(;o<c;)r+=this.modules[o++].rules.length;r+=a.rules.length,o++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let s="";for(let c=0;c<this.modules.length;c++)s+=this.modules[c].getRules()+`
`;this.styleTag.textContent=s;let a=t.head||t;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Dv={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},p5={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},P_e=typeof navigator<"u"&&/Mac/.test(navigator.platform),L_e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var pA=0;pA<10;pA++)Dv[48+pA]=Dv[96+pA]=String(pA);for(var pA=1;pA<=24;pA++)Dv[pA+111]="F"+pA;for(var pA=65;pA<=90;pA++)Dv[pA]=String.fromCharCode(pA+32),p5[pA]=String.fromCharCode(pA);for(var V8 in Dv)p5.hasOwnProperty(V8)||(p5[V8]=Dv[V8]);function U_e(n){var e=P_e&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||L_e&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?p5:Dv)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function ya(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i];typeof r=="string"?n.setAttribute(i,r):r!=null&&(n[i]=r)}e++}for(;e<arguments.length;e++)Tte(n,arguments[e]);return n}function Tte(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)Tte(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}let Eh=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},cR=typeof document<"u"?document:{documentElement:{style:{}}};const AR=/Edge\/(\d+)/.exec(Eh.userAgent),kte=/MSIE \d/.test(Eh.userAgent),hR=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Eh.userAgent),MB=!!(kte||hR||AR),iG=!MB&&/gecko\/(\d+)/i.test(Eh.userAgent),$8=!MB&&/Chrome\/(\d+)/.exec(Eh.userAgent),K_e="webkitFontSmoothing"in cR.documentElement.style,dR=!MB&&/Apple Computer/.test(Eh.vendor),rG=dR&&(/Mobile\/\w+/.test(Eh.userAgent)||Eh.maxTouchPoints>2);var Ti={mac:rG||/Mac/.test(Eh.platform),windows:/Win/.test(Eh.platform),linux:/Linux|X11/.test(Eh.platform),ie:MB,ie_version:kte?cR.documentMode||6:hR?+hR[1]:AR?+AR[1]:0,gecko:iG,gecko_version:iG?+(/Firefox\/(\d+)/.exec(Eh.userAgent)||[0,0])[1]:0,chrome:!!$8,chrome_version:$8?+$8[1]:0,ios:rG,android:/Android\b/.test(Eh.userAgent),webkit_version:K_e?+(/\bAppleWebKit\/(\d+)/.exec(Eh.userAgent)||[0,0])[1]:0,safari:dR,safari_version:dR?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Eh.userAgent)||[0,0])[1]:0,tabSize:cR.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function bU(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const kE=Object.create(null);function CU(n,e,t){if(n==e)return!0;n||(n=kE),e||(e=kE);let i=Object.keys(n),r=Object.keys(e);if(i.length-0!=r.length-0)return!1;for(let o of i)if(o!=t&&(r.indexOf(o)==-1||n[o]!==e[o]))return!1;return!0}function F_e(n,e){for(let t=n.attributes.length-1;t>=0;t--){let i=n.attributes[t].name;e[i]==null&&n.removeAttribute(i)}for(let t in e){let i=e[t];t=="style"?n.style.cssText=i:n.getAttribute(t)!=i&&n.setAttribute(t,i)}}function oG(n,e,t){let i=!1;if(e)for(let r in e)t&&r in t||(i=!0,r=="style"?n.style.cssText="":n.removeAttribute(r));if(t)for(let r in t)e&&e[r]==t[r]||(i=!0,r=="style"?n.style.cssText=t[r]:n.setAttribute(r,t[r]));return i}function z_e(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}class q1{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var gA=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(gA||(gA={}));class vr extends Tv{constructor(e,t,i,r){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new CM(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new PC(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:o,end:s}=Dte(e,t);i=(o?t?-3e8:-1:5e8)-1,r=(s?t?2e8:1:-6e8)+1}return new PC(e,i,r,t,e.widget||null,!0)}static line(e){return new _M(e)}static set(e,t=!1){return mo.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}vr.none=mo.empty;class CM extends vr{constructor(e){let{start:t,end:i}=Dte(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?bU(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||kE}eq(e){return this==e||e instanceof CM&&this.tagName==e.tagName&&CU(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}CM.prototype.point=!1;class _M extends vr{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof _M&&this.spec.class==e.spec.class&&CU(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}_M.prototype.mapMode=Oh.TrackBefore;_M.prototype.point=!0;class PC extends vr{constructor(e,t,i,r,o,s){super(t,i,o,e),this.block=r,this.isReplace=s,this.mapMode=r?t<=0?Oh.TrackBefore:Oh.TrackAfter:Oh.TrackDel}get type(){return this.startSide!=this.endSide?gA.WidgetRange:this.startSide<=0?gA.WidgetBefore:gA.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof PC&&j_e(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}PC.prototype.point=!0;function Dte(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function j_e(n,e){return n==e||!!(n&&e&&n.compare(e))}function qx(n,e,t,i=0){let r=t.length-1;r>=0&&t[r]+i>=n?t[r]=Math.max(t[r],e):t.push(n,e)}class m5 extends Tv{constructor(e,t){super(),this.tagName=e,this.attributes=t}eq(e){return e==this||e instanceof m5&&this.tagName==e.tagName&&CU(this.attributes,e.attributes)}static create(e){return new m5(e.tagName,e.attributes||kE)}static set(e,t=!1){return mo.of(e,t)}}m5.prototype.startSide=m5.prototype.endSide=-1;function g5(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function fR(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function xS(n,e){if(!e.anchorNode)return!1;try{return fR(n,e.anchorNode)}catch{return!1}}function MS(n){return n.nodeType==3?y5(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function x4(n,e,t,i){return t?sG(n,e,t,i,-1)||sG(n,e,t,i,1):!1}function Rv(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function DE(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function sG(n,e,t,i,r){for(;;){if(n==t&&e==i)return!0;if(e==(r<0?0:j1(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;e=Rv(n)+(r<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(r<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=r<0?j1(n):0}else return!1}}function j1(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function RE(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function N_e(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function Rte(n,e){let t=e.width/n.offsetWidth,i=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-n.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function G_e(n,e,t,i,r,o,s,a){let c=n.ownerDocument,d=c.defaultView||window;for(let m=n,v=!1;m&&!v;)if(m.nodeType==1){let M,B=m==c.body,P=1,U=1;if(B)M=N_e(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(m).position)&&(v=!0),m.scrollHeight<=m.clientHeight&&m.scrollWidth<=m.clientWidth){m=m.assignedSlot||m.parentNode;continue}let Z=m.getBoundingClientRect();({scaleX:P,scaleY:U}=Rte(m,Z)),M={left:Z.left,right:Z.left+m.clientWidth*P,top:Z.top,bottom:Z.top+m.clientHeight*U}}let z=0,V=0;if(r=="nearest")e.top<M.top?(V=e.top-(M.top+s),t>0&&e.bottom>M.bottom+V&&(V=e.bottom-M.bottom+s)):e.bottom>M.bottom&&(V=e.bottom-M.bottom+s,t<0&&e.top-V<M.top&&(V=e.top-(M.top+s)));else{let Z=e.bottom-e.top,X=M.bottom-M.top;V=(r=="center"&&Z<=X?e.top+Z/2-X/2:r=="start"||r=="center"&&t<0?e.top-s:e.bottom-X+s)-M.top}if(i=="nearest"?e.left<M.left?(z=e.left-(M.left+o),t>0&&e.right>M.right+z&&(z=e.right-M.right+o)):e.right>M.right&&(z=e.right-M.right+o,t<0&&e.left<M.left+z&&(z=e.left-(M.left+o))):z=(i=="center"?e.left+(e.right-e.left)/2-(M.right-M.left)/2:i=="start"==a?e.left-o:e.right-(M.right-M.left)+o)-M.left,z||V)if(B)d.scrollBy(z,V);else{let Z=0,X=0;if(V){let re=m.scrollTop;m.scrollTop+=V/U,X=(m.scrollTop-re)*U}if(z){let re=m.scrollLeft;m.scrollLeft+=z/P,Z=(m.scrollLeft-re)*P}e={left:e.left-Z,top:e.top-X,right:e.right-Z,bottom:e.bottom-X},Z&&Math.abs(Z-z)<1&&(i="nearest"),X&&Math.abs(X-V)<1&&(r="nearest")}if(B)break;(e.top<M.top||e.bottom>M.bottom||e.left<M.left||e.right>M.right)&&(e={left:Math.max(e.left,M.left),right:Math.min(e.right,M.right),top:Math.max(e.top,M.top),bottom:Math.min(e.bottom,M.bottom)}),m=m.assignedSlot||m.parentNode}else if(m.nodeType==11)m=m.host;else break}function W_e(n){let e=n.ownerDocument,t,i;for(let r=n.parentNode;r&&!(r==e.body||t&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!t&&r.scrollWidth>r.clientWidth&&(t=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:t,y:i}}class Q_e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?j1(t):0),i,Math.min(e.focusOffset,i?j1(i):0))}set(e,t,i,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=r}}let $b=null;Ti.safari&&Ti.safari_version>=26&&($b=!1);function Pte(n){if(n.setActive)return n.setActive();if($b)return n.focus($b);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus($b==null?{get preventScroll(){return $b={preventScroll:!0},!0}}:void 0),!$b){$b=!1;for(let t=0;t<e.length;){let i=e[t++],r=e[t++],o=e[t++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let aG;function y5(n,e,t=e){let i=aG||(aG=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function Yx(n,e,t,i){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,n.dispatchEvent(o);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,n.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function q_e(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function Y_e(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,j1(t));;)if(i){if(t.nodeType!=1)return!1;let r=t.childNodes[i-1];r.contentEditable=="false"?i--:(t=r,i=j1(t))}else{if(t==n)return!0;i=Rv(t),t=t.parentNode}}function Lte(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Ute(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=j1(t)}else if(t.parentNode&&!DE(t))i=Rv(t),t=t.parentNode;else return null}}function Kte(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!DE(t))i=Rv(t)+1,t=t.parentNode;else return null}}class Tm{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new Tm(e.parentNode,Rv(e),t)}static after(e,t){return new Tm(e.parentNode,Rv(e)+1,t)}}var Ca=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(Ca||(Ca={}));const LC=Ca.LTR,_U=Ca.RTL;function Fte(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const V_e=Fte("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),$_e=Fte("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),pR=Object.create(null),Q0=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);pR[e]=t,pR[t]=-e}function zte(n){return n<=247?V_e[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?$_e[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const H_e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class O1{get dir(){return this.level%2?_U:LC}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,r){let o=-1;for(let s=0;s<e.length;s++){let a=e[s];if(a.from<=t&&a.to>=t){if(a.level==i)return s;(o<0||(r!=0?r<0?a.from<t:a.to>t:e[o].level>a.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}}function jte(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let i=n[t],r=e[t];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!jte(i.inner,r.inner))return!1}return!0}const va=[];function Z_e(n,e,t,i,r){for(let o=0;o<=i.length;o++){let s=o?i[o-1].to:e,a=o<i.length?i[o].from:t,c=o?256:r;for(let d=s,m=c,v=c;d<a;d++){let M=zte(n.charCodeAt(d));M==512?M=m:M==8&&v==4&&(M=16),va[d]=M==4?2:M,M&7&&(v=M),m=M}for(let d=s,m=c,v=c;d<a;d++){let M=va[d];if(M==128)d<a-1&&m==va[d+1]&&m&24?M=va[d]=m:va[d]=256;else if(M==64){let B=d+1;for(;B<a&&va[B]==64;)B++;let P=d&&m==8||B<t&&va[B]==8?v==1?1:8:256;for(let U=d;U<B;U++)va[U]=P;d=B-1}else M==8&&v==1&&(va[d]=1);m=M,M&7&&(v=M)}}}function X_e(n,e,t,i,r){let o=r==1?2:1;for(let s=0,a=0,c=0;s<=i.length;s++){let d=s?i[s-1].to:e,m=s<i.length?i[s].from:t;for(let v=d,M,B,P;v<m;v++)if(B=pR[M=n.charCodeAt(v)])if(B<0){for(let U=a-3;U>=0;U-=3)if(Q0[U+1]==-B){let z=Q0[U+2],V=z&2?r:z&4?z&1?o:r:0;V&&(va[v]=va[Q0[U]]=V),a=U;break}}else{if(Q0.length==189)break;Q0[a++]=v,Q0[a++]=M,Q0[a++]=c}else if((P=va[v])==2||P==1){let U=P==r;c=U?0:1;for(let z=a-3;z>=0;z-=3){let V=Q0[z+2];if(V&2)break;if(U)Q0[z+2]|=2;else{if(V&4)break;Q0[z+2]|=4}}}}}function J_e(n,e,t,i){for(let r=0,o=i;r<=t.length;r++){let s=r?t[r-1].to:n,a=r<t.length?t[r].from:e;for(let c=s;c<a;){let d=va[c];if(d==256){let m=c+1;for(;;)if(m==a){if(r==t.length)break;m=t[r++].to,a=r<t.length?t[r].from:e}else if(va[m]==256)m++;else break;let v=o==1,M=(m<e?va[m]:i)==1,B=v==M?v?1:2:i;for(let P=m,U=r,z=U?t[U-1].to:n;P>c;)P==z&&(P=t[--U].from,z=U?t[U-1].to:n),va[--P]=B;c=m}else o=d,c++}}}function mR(n,e,t,i,r,o,s){let a=i%2?2:1;if(i%2==r%2)for(let c=e,d=0;c<t;){let m=!0,v=!1;if(d==o.length||c<o[d].from){let U=va[c];U!=a&&(m=!1,v=U==16)}let M=!m&&a==1?[]:null,B=m?i:i+1,P=c;e:for(;;)if(d<o.length&&P==o[d].from){if(v)break e;let U=o[d];if(!m)for(let z=U.to,V=d+1;;){if(z==t)break e;if(V<o.length&&o[V].from==z)z=o[V++].to;else{if(va[z]==a)break e;break}}if(d++,M)M.push(U);else{U.from>c&&s.push(new O1(c,U.from,B));let z=U.direction==LC!=!(B%2);gR(n,z?i+1:i,r,U.inner,U.from,U.to,s),c=U.to}P=U.to}else{if(P==t||(m?va[P]!=a:va[P]==a))break;P++}M?mR(n,c,P,i+1,r,M,s):c<P&&s.push(new O1(c,P,B)),c=P}else for(let c=t,d=o.length;c>e;){let m=!0,v=!1;if(!d||c>o[d-1].to){let U=va[c-1];U!=a&&(m=!1,v=U==16)}let M=!m&&a==1?[]:null,B=m?i:i+1,P=c;e:for(;;)if(d&&P==o[d-1].to){if(v)break e;let U=o[--d];if(!m)for(let z=U.from,V=d;;){if(z==e)break e;if(V&&o[V-1].to==z)z=o[--V].from;else{if(va[z-1]==a)break e;break}}if(M)M.push(U);else{U.to<c&&s.push(new O1(U.to,c,B));let z=U.direction==LC!=!(B%2);gR(n,z?i+1:i,r,U.inner,U.from,U.to,s),c=U.from}P=U.from}else{if(P==e||(m?va[P-1]!=a:va[P-1]==a))break;P--}M?mR(n,P,c,i+1,r,M,s):P<c&&s.push(new O1(P,c,B)),c=P}}function gR(n,e,t,i,r,o,s){let a=e%2?2:1;Z_e(n,r,o,i,a),X_e(n,r,o,i,a),J_e(r,o,i,a),mR(n,r,o,e,t,i,s)}function exe(n,e,t){if(!n)return[new O1(0,0,e==_U?1:0)];if(e==LC&&!t.length&&!H_e.test(n))return Nte(n.length);if(t.length)for(;n.length>va.length;)va[va.length]=256;let i=[],r=e==LC?0:1;return gR(n,r,r,t,0,n.length,i),i}function Nte(n){return[new O1(0,n,0)]}let Gte="";function txe(n,e,t,i,r){var o;let s=i.head-n.from,a=O1.find(e,s,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc),c=e[a],d=c.side(r,t);if(s==d){let M=a+=r?1:-1;if(M<0||M>=e.length)return null;c=e[a=M],s=c.side(!r,t),d=c.side(r,t)}let m=fc(n.text,s,c.forward(r,t));(m<c.from||m>c.to)&&(m=d),Gte=n.text.slice(Math.min(s,m),Math.max(s,m));let v=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return v&&m==d&&v.level+(r?0:1)<c.level?Sn.cursor(v.side(!r,t)+n.from,v.forward(r,t)?1:-1,v.level):Sn.cursor(m+n.from,c.forward(r,t)?-1:1,c.level)}function nxe(n,e,t){for(let i=e;i<t;i++){let r=zte(n.charCodeAt(i));if(r==1)return LC;if(r==2||r==4)return _U}return LC}const Wte=Bi.define(),Qte=Bi.define(),qte=Bi.define(),Yte=Bi.define(),yR=Bi.define(),Vte=Bi.define(),$te=Bi.define(),xU=Bi.define(),MU=Bi.define(),Hte=Bi.define({combine:n=>n.some(e=>e)}),Zte=Bi.define({combine:n=>n.some(e=>e)}),Xte=Bi.define();class Vx{constructor(e,t="nearest",i="nearest",r=5,o=5,s=!1){this.range=e,this.y=t,this.x=i,this.yMargin=r,this.xMargin=o,this.isSnapshot=s}map(e){return e.empty?this:new Vx(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Vx(Sn.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const _w=eo.define({map:(n,e)=>n.map(e)}),Jte=eo.define();function kh(n,e,t){let i=n.facet(Yte);i.length?i[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const B1=Bi.define({combine:n=>n.length?n[0]:!0});let ixe=0;const Bx=Bi.define({combine(n){return n.filter((e,t)=>{for(let i=0;i<t;i++)if(n[i].plugin==e.plugin)return!1;return!0})}});class yu{constructor(e,t,i,r,o){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(Bx.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Bx.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:i,eventObservers:r,provide:o,decorations:s}=t||{};return new yu(ixe++,e,i,r,a=>{let c=[];return s&&c.push(wB.of(d=>{let m=d.plugin(a);return m?s(m):vr.none})),o&&c.push(o(a)),c})}static fromClass(e,t){return yu.define((i,r)=>new e(i,r),t)}}class H8{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(kh(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){kh(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){kh(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const ene=Bi.define(),wU=Bi.define(),wB=Bi.define(),tne=Bi.define(),SU=Bi.define(),xM=Bi.define(),nne=Bi.define();function lG(n,e){let t=n.state.facet(nne);if(!t.length)return t;let i=t.map(o=>o instanceof Function?o(n):o),r=[];return mo.spans(i,e.from,e.to,{point(){},span(o,s,a,c){let d=o-e.from,m=s-e.from,v=r;for(let M=a.length-1;M>=0;M--,c--){let B=a[M].spec.bidiIsolate,P;if(B==null&&(B=nxe(e.text,d,m)),c>0&&v.length&&(P=v[v.length-1]).to==d&&P.direction==B)P.to=m,v=P.inner;else{let U={from:d,to:m,direction:B,inner:[]};v.push(U),v=U.inner}}}}),r}const ine=Bi.define();function EU(n){let e=0,t=0,i=0,r=0;for(let o of n.state.facet(ine)){let s=o(n);s&&(s.left!=null&&(e=Math.max(e,s.left)),s.right!=null&&(t=Math.max(t,s.right)),s.top!=null&&(i=Math.max(i,s.top)),s.bottom!=null&&(r=Math.max(r,s.bottom)))}return{left:e,right:t,top:i,bottom:r}}const J3=Bi.define();class bp{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}join(e){return new bp(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let r=0,o=0,s=0;;){let a=r<e.length?e[r].fromB:1e9,c=o<t.length?t[o]:1e9,d=Math.min(a,c);if(d==1e9)break;let m=d+s,v=d,M=m;for(;;)if(o<t.length&&t[o]<=v){let B=t[o+1];o+=2,v=Math.max(v,B);for(let P=r;P<e.length&&e[P].fromB<=v;P++)s=e[P].toA-e[P].toB;M=Math.max(M,B+s)}else if(r<e.length&&e[r].fromB<=v){let B=e[r++];v=Math.max(v,B.toB),M=Math.max(M,B.toA),s=B.toA-B.toB}else break;i.push(new bp(m,M,d,v))}return i}}class PE{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Ac.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let r=[];this.changes.iterChangedRanges((o,s,a,c)=>r.push(new bp(o,s,a,c))),this.changedRanges=r}static create(e,t,i){return new PE(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const rxe=[];class Wu{constructor(e,t,i=0){this.dom=e,this.length=t,this.flags=i,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return rxe}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let t=this.domAttrs;t&&F_e(this.dom,t)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,t=this.posAtStart){let i=t;for(let r of this.children){if(r==e)return i;i+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,t){return null}domPosFor(e,t){let i=Rv(this.dom),r=this.length?e>0:t>0;return new Tm(this.parent.dom,i+(r?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof EB)return e;return null}static get(e){return e.cmTile}}class SB extends Wu{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let t=this.dom,i=null,r,o=e?.node==t?e:null,s=0;for(let a of this.children){if(a.sync(e),s+=a.length+a.breakAfter,r=i?i.nextSibling:t.firstChild,o&&r!=a.dom&&(o.written=!0),a.dom.parentNode==t)for(;r&&r!=a.dom;)r=uG(r);else t.insertBefore(a.dom,r);i=a.dom}for(r=i?i.nextSibling:t.firstChild,o&&r&&(o.written=!0);r;)r=uG(r);this.length=s}}function uG(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class EB extends SB{constructor(e,t){super(t),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let t=Wu.get(e);if(t&&this.owns(t))return t;e=e.parentNode}}blockTiles(e){for(let t=[],i=this,r=0,o=0;;)if(r==i.children.length){if(!t.length)return;i=i.parent,i.breakAfter&&o++,r=t.pop()}else{let s=i.children[r++];if(s instanceof Sv)t.push(r),i=s,r=0;else{let a=o+s.length,c=e(s,o);if(c!==void 0)return c;o=a+s.breakAfter}}}resolveBlock(e,t){let i,r=-1,o,s=-1;if(this.blockTiles((a,c)=>{let d=c+a.length;if(e>=c&&e<=d){if(a.isWidget()&&t>=-1&&t<=1){if(a.flags&32)return!0;a.flags&16&&(i=void 0)}(c<e||e==d&&(t<-1?a.length:a.covers(1)))&&(!i||!a.isWidget()&&i.isWidget())&&(i=a,r=e-c),(d>e||e==c&&(t>1?a.length:a.covers(-1)))&&(!o||!a.isWidget()&&o.isWidget())&&(o=a,s=e-c)}}),!i&&!o)throw new Error("No tile at position "+e);return i&&t<0||!o?{tile:i,offset:r}:{tile:o,offset:s}}}class Sv extends SB{constructor(e,t){super(e),this.wrapper=t}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,t){let i=new Sv(t||document.createElement(e.tagName),e);return t||(i.flags|=4),i}}class b2 extends SB{constructor(e,t){super(e),this.attrs=t}isLine(){return!0}static start(e,t,i){let r=new b2(t||document.createElement("div"),e);return(!t||!i)&&(r.flags|=4),r}get domAttrs(){return this.attrs}resolveInline(e,t,i){let r=null,o=-1,s=null,a=-1;function c(m,v){for(let M=0,B=0;M<m.children.length&&B<=v;M++){let P=m.children[M],U=B+P.length;U>=v&&(P.isComposite()?c(P,v-B):(!s||s.isHidden&&(t>0||i&&sxe(s,P)))&&(U>v||P.flags&32)?(s=P,a=v-B):(B<v||P.flags&16&&!P.isHidden)&&(r=P,o=v-B)),B=U}}c(this,e);let d=(t<0?r:s)||r||s;return d?{tile:d,offset:d==r?o:a}:null}coordsIn(e,t){let i=this.resolveInline(e,t,!0);return i?i.tile.coordsIn(Math.max(0,i.offset),t):oxe(this)}domIn(e,t){let i=this.resolveInline(e,t);if(i){let{tile:r,offset:o}=i;if(this.dom.contains(r.dom))return r.isText()?new Tm(r.dom,Math.min(r.dom.nodeValue.length,o)):r.domPosFor(o,r.flags&16?1:r.flags&32?-1:t);let s=i.tile.parent,a=!1;for(let c of s.children){if(a)return new Tm(c.dom,0);c==i.tile&&(a=!0)}}return new Tm(this.dom,0)}}function oxe(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=MS(e);return t[t.length-1]||null}function sxe(n,e){let t=n.coordsIn(0,1),i=e.coordsIn(0,1);return t&&i&&i.top<t.bottom}class Sd extends SB{constructor(e,t){super(e),this.mark=t}get domAttrs(){return this.mark.attrs}static of(e,t){let i=new Sd(t||document.createElement(e.tagName),e);return t||(i.flags|=4),i}}class uC extends Wu{constructor(e,t){super(e,t.length),this.text=t}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,t){let i=this.dom.nodeValue.length;e>i&&(e=i);let r=e,o=e,s=0;e==0&&t<0||e==i&&t>=0?Ti.chrome||Ti.gecko||(e?(r--,s=1):o<i&&(o++,s=-1)):t<0?r--:o<i&&o++;let a=y5(this.dom,r,o).getClientRects();if(!a.length)return null;let c=a[(s?s<0:t>=0)?0:a.length-1];return Ti.safari&&!s&&c.width==0&&(c=Array.prototype.find.call(a,d=>d.width)||c),s?RE(c,s<0):c||null}static of(e,t){let i=new uC(t||document.createTextNode(e),e);return t||(i.flags|=2),i}}class UC extends Wu{constructor(e,t,i,r){super(e,t,r),this.widget=i}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,t){return this.coordsInWidget(e,t,!1)}coordsInWidget(e,t,i){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;if(i)return RE(this.dom.getBoundingClientRect(),this.length?e==0:t<=0);{let o=this.dom.getClientRects(),s=null;if(!o.length)return null;let a=this.flags&16?!0:this.flags&32?!1:e>0;for(let c=a?o.length-1:0;s=o[c],!(e>0?c==0:c==o.length-1||s.top<s.bottom);c+=a?-1:1);return RE(s,!a)}}get overrideDOMText(){if(!this.length)return As.empty;let{root:e}=this;if(!e)return As.empty;let t=this.posAtStart;return e.view.state.doc.slice(t,t+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,t,i,r,o){return o||(o=e.toDOM(t),e.editable||(o.contentEditable="false")),new UC(o,i,e,r)}}class LE extends Wu{constructor(e){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),super(t,0,e)}get isHidden(){return!0}get overrideDOMText(){return As.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class axe{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,t,i){let{tile:r,index:o,beforeBreak:s,parents:a}=this;for(;e||t>0;)if(r.isComposite())if(s){if(!e)break;i&&i.break(),e--,s=!1}else if(o==r.children.length){if(!e&&!a.length)break;i&&i.leave(r),s=!!r.breakAfter,{tile:r,index:o}=a.pop(),o++}else{let c=r.children[o],d=c.breakAfter;(t>0?c.length<=e:c.length<e)&&(!i||i.skip(c,0,c.length)!==!1||!c.isComposite)?(s=!!d,o++,e-=c.length):(a.push({tile:r,index:o}),r=c,o=0,i&&c.isComposite()&&i.enter(c))}else if(o==r.length)s=!!r.breakAfter,{tile:r,index:o}=a.pop(),o++;else if(e){let c=Math.min(e,r.length-o);i&&i.skip(r,o,o+c),e-=c,o+=c}else break;return this.tile=r,this.index=o,this.beforeBreak=s,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class lxe{constructor(e,t,i,r){this.from=e,this.to=t,this.wrapper=i,this.rank=r}}class uxe{constructor(e,t,i){this.cache=e,this.root=t,this.blockWrappers=i,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,t,i,r){var o;this.flushBuffer();let s=this.ensureMarks(t,i),a=s.lastChild;if(a&&a.isText()&&!(a.flags&8)){this.cache.reused.set(a,2);let c=s.children[s.children.length-1]=new uC(a.dom,a.text+e);c.parent=s}else s.append(r||uC.of(e,(o=this.cache.find(uC))===null||o===void 0?void 0:o.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,t){let i=this.curLine;i.dom!=t.line.dom&&(i.setDOM(this.cache.reused.has(t.line)?Z8(t.line.dom):t.line.dom),this.cache.reused.set(t.line,2));let r=i;for(let a=t.marks.length-1;a>=0;a--){let c=t.marks[a],d=r.lastChild;if(d instanceof Sd&&d.mark.eq(c.mark))d.dom!=c.dom&&d.setDOM(Z8(c.dom)),r=d;else{if(this.cache.reused.get(c)){let v=Wu.get(c.dom);v&&v.setDOM(Z8(c.dom))}let m=Sd.of(c.mark,c.dom);r.append(m),r=m}this.cache.reused.set(c,2)}let o=Wu.get(e.text);o&&this.cache.reused.set(o,2);let s=new uC(e.text,e.text.nodeValue);s.flags|=8,r.append(s)}addInlineWidget(e,t,i){let r=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);r||this.flushBuffer();let o=this.ensureMarks(t,i);!r&&!(e.flags&16)&&o.append(this.getBuffer(1)),o.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,t,i){this.flushBuffer(),this.ensureMarks(t,i).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let t=this.afterWidget||this.lastBlock;t.length+=e,this.pos+=e}addLineStart(e,t){var i;e||(e=rne);let r=b2.start(e,t||((i=this.cache.find(b2))===null||i===void 0?void 0:i.dom),!!t);this.getBlockPos().append(this.lastBlock=this.curLine=r)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,t){var i;let r=this.curLine;for(let o=e.length-1;o>=0;o--){let s=e[o],a;if(t>0&&(a=r.lastChild)&&a instanceof Sd&&a.mark.eq(s))r=a,t--;else{let c=Sd.of(s,(i=this.cache.find(Sd,d=>d.mark.eq(s)))===null||i===void 0?void 0:i.dom);r.append(c),r=c,t=0}}return r}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!cG(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(Ti.ios&&cG(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(X8,0,32)||new UC(X8.toDOM(),0,X8,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let t=new lxe(e.from,e.to,e.value,e.rank),i=this.wrappers.length;for(;i>0&&(this.wrappers[i-1].rank-t.rank||this.wrappers[i-1].to-t.to)<0;)i--;this.wrappers.splice(i,0,t)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let t=this.root;for(let i of this.wrappers){let r=t.lastChild;if(i.from<this.pos&&r instanceof Sv&&r.wrapper.eq(i.wrapper))t=r;else{let o=Sv.of(i.wrapper,(e=this.cache.find(Sv,s=>s.wrapper.eq(i.wrapper)))===null||e===void 0?void 0:e.dom);t.append(o),t=o}}return t}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let t=2|(e<0?16:32),i=this.cache.find(LE,void 0,1);return i&&(i.flags=t),i||new LE(t)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class cxe{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:r,lineBreak:o,done:s}=this.cursor.next(this.skipCount);if(this.skipCount=0,s)throw new Error("Ran out of text content when drawing inline views");this.text=r;let a=this.textOff=Math.min(e,r.length);return o?null:r.slice(0,a)}let t=Math.min(this.text.length,this.textOff+e),i=this.text.slice(this.textOff,t);return this.textOff=t,i}}const UE=[UC,b2,uC,Sd,LE,Sv,EB];for(let n=0;n<UE.length;n++)UE[n].bucket=n;class Axe{constructor(e){this.view=e,this.buckets=UE.map(()=>[]),this.index=UE.map(()=>0),this.reused=new Map}add(e){let t=e.constructor.bucket,i=this.buckets[t];i.length<6?i.push(e):i[this.index[t]=(this.index[t]+1)%6]=e}find(e,t,i=2){let r=e.bucket,o=this.buckets[r],s=this.index[r];for(let a=o.length-1;a>=0;a--){let c=(a+s)%o.length,d=o[c];if((!t||t(d))&&!this.reused.has(d))return o.splice(c,1),c<s&&this.index[r]--,this.reused.set(d,i),d}return null}findWidget(e,t,i){let r=this.buckets[0];if(r.length)for(let o=0,s=0;;o++){if(o==r.length){if(s)return null;s=1,o=0}let a=r[o];if(!this.reused.has(a)&&(s==0?a.widget.compare(e):a.widget.constructor==e.constructor&&e.updateDOM(a.dom,this.view)))return r.splice(o,1),o<this.index[0]&&this.index[0]--,a.widget==e&&a.length==t&&(a.flags&497)==i?(this.reused.set(a,1),a):(this.reused.set(a,2),new UC(a.dom,t,e,a.flags&-498|i))}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,t=2){if(!this.reused.has(e))return this.reused.set(e,t),e.dom}clear(){for(let e=0;e<this.buckets.length;e++)this.buckets[e].length=this.index[e]=0}}class hxe{constructor(e,t,i,r,o){this.view=e,this.decorations=r,this.disallowBlockEffectsFor=o,this.openWidget=!1,this.openMarks=0,this.cache=new Axe(e),this.text=new cxe(e.state.doc),this.builder=new uxe(this.cache,new EB(e,e.contentDOM),mo.iter(i)),this.cache.reused.set(t,2),this.old=new axe(t),this.reuseWalker={skip:(s,a,c)=>{if(this.cache.add(s),s.isComposite())return!1},enter:s=>this.cache.add(s),leave:()=>{},break:()=>{}}}run(e,t){let i=t&&this.getCompositionContext(t.text);for(let r=0,o=0,s=0;;){let a=s<e.length?e[s++]:null,c=a?a.fromA:this.old.root.length;if(c>r){let d=c-r;this.preserve(d,!s,!a),r=c,o+=d}if(!a)break;t&&a.fromA<=t.range.fromA&&a.toA>=t.range.toA?(this.forward(a.fromA,t.range.fromA,t.range.fromA<t.range.toA?1:-1),this.emit(o,t.range.fromB),this.cache.clear(),this.builder.addComposition(t,i),this.text.skip(t.range.toB-t.range.fromB),this.forward(t.range.fromA,a.toA),this.emit(t.range.toB,a.toB)):(this.forward(a.fromA,a.toA),this.emit(o,a.toB)),o=a.toB,r=a.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,t,i){let r=pxe(this.old),o=this.openMarks;this.old.advance(e,i?1:-1,{skip:(s,a,c)=>{if(s.isWidget())if(this.openWidget)this.builder.continueWidget(c-a);else{let d=c>0||a<s.length?UC.of(s.widget,this.view,c-a,s.flags&496,this.cache.maybeReuse(s)):this.cache.reuse(s);d.flags&256?(d.flags&=-2,this.builder.addBlockWidget(d)):(this.builder.ensureLine(null),this.builder.addInlineWidget(d,r,o),o=r.length)}else if(s.isText())this.builder.ensureLine(null),!a&&c==s.length?this.builder.addText(s.text,r,o,this.cache.reuse(s)):(this.cache.add(s),this.builder.addText(s.text.slice(a,c),r,o)),o=r.length;else if(s.isLine())s.flags&=-2,this.cache.reused.set(s,1),this.builder.addLine(s);else if(s instanceof LE)this.cache.add(s);else if(s instanceof Sd)this.builder.ensureLine(null),this.builder.addMark(s,r,o),this.cache.reused.set(s,1),o=r.length;else return!1;this.openWidget=!1},enter:s=>{s.isLine()?this.builder.addLineStart(s.attrs,this.cache.maybeReuse(s)):(this.cache.add(s),s instanceof Sd&&r.unshift(s.mark)),this.openWidget=!1},leave:s=>{s.isLine()?r.length&&(r.length=o=0):s instanceof Sd&&(r.shift(),o=Math.min(o,r.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,t){let i=null,r=this.builder,o=0,s=mo.spans(this.decorations,e,t,{point:(a,c,d,m,v,M)=>{if(d instanceof PC){if(this.disallowBlockEffectsFor[M]){if(d.block)throw new RangeError("Block decorations may not be specified via plugins");if(c>this.view.state.doc.lineAt(a).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(o=m.length,v>m.length)r.continueWidget(c-a);else{let B=d.widget||(d.block?C2.block:C2.inline),P=dxe(d),U=this.cache.findWidget(B,c-a,P)||UC.of(B,this.view,c-a,P);d.block?(d.startSide>0&&r.addLineStartIfNotCovered(i),r.addBlockWidget(U)):(r.ensureLine(i),r.addInlineWidget(U,m,v))}i=null}else i=fxe(i,d);c>a&&this.text.skip(c-a)},span:(a,c,d,m)=>{for(let v=a;v<c;){let M=this.text.next(Math.min(512,c-v));M==null?(r.addLineStartIfNotCovered(i),r.addBreak(),v++):(r.ensureLine(i),r.addText(M,d,m),v+=M.length),i=null}}});r.addLineStartIfNotCovered(i),this.openWidget=s>o,this.openMarks=s}forward(e,t,i=1){t-e<=10?this.old.advance(t-e,i,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(t-e-10,-1),this.old.advance(5,i,this.reuseWalker))}getCompositionContext(e){let t=[],i=null;for(let r=e.parentNode;;r=r.parentNode){let o=Wu.get(r);if(r==this.view.contentDOM)break;o instanceof Sd?t.push(o):o?.isLine()?i=o:r.nodeName=="DIV"&&!i&&r!=this.view.contentDOM?i=new b2(r,rne):t.push(Sd.of(new CM({tagName:r.nodeName.toLowerCase(),attributes:z_e(r)}),r))}return{line:i,marks:t}}}function cG(n,e){let t=i=>{for(let r of i.children)if((e?r.isText():r.length)||t(r))return!0;return!1};return t(n)}function dxe(n){let e=n.isReplace?(n.startSide<0?64:0)|(n.endSide>0?128:0):n.startSide>0?32:16;return n.block&&(e|=256),e}const rne={class:"cm-line"};function fxe(n,e){let t=e.spec.attributes,i=e.spec.class;return!t&&!i||(n||(n={class:"cm-line"}),t&&bU(t,n),i&&(n.class+=" "+i)),n}function pxe(n){let e=[];for(let t=n.parents.length;t>1;t--){let i=t==n.parents.length?n.tile:n.parents[t].tile;i instanceof Sd&&e.push(i.mark)}return e}function Z8(n){let e=Wu.get(n);return e&&e.setDOM(n.cloneNode()),n}class C2 extends q1{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}C2.inline=new C2("span");C2.block=new C2("div");const X8=new class extends q1{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class AG{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=vr.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new EB(e,e.contentDOM),this.updateInner([new bp(0,0,0,e.state.doc.length)],null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:m,toA:v})=>v<this.minWidthFrom||m>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?r=this.domChanged.newSel.head:!Mxe(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let o=r>-1?gxe(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){let{from:m,to:v}=this.hasComposition;i=new bp(m,v,e.changes.mapPos(m,-1),e.changes.mapPos(v,1)).addToSet(i.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(Ti.ie||Ti.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=this.decorations,a=this.blockWrappers;this.updateDeco();let c=bxe(s,this.decorations,e.changes);c.length&&(i=bp.extendWithRanges(i,c));let d=_xe(a,this.blockWrappers,e.changes);return d.length&&(i=bp.extendWithRanges(i,d)),o&&!i.some(m=>m.fromA<=o.range.fromA&&m.toA>=o.range.toA)&&(i=o.range.addToSet(i.slice())),this.tile.flags&2&&i.length==0?!1:(this.updateInner(i,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0;let{observer:i}=this.view;i.ignore(()=>{if(t||e.length){let s=this.tile,a=new hxe(this.view,s,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=a.run(e,t),vR(s,a.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Ti.chrome||Ti.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(o),o&&(o.written||i.selectionRange.focusNode!=o.node||!this.tile.dom.contains(o.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.tile.children)o.isWidget()&&o.widget instanceof J8&&r.push(o.dom);i.updateGaps(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(Jte)&&(this.editContextFormatting=i.value)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:i}=this.tile,r=this.view.root.activeElement,o=r==i,s=!o&&!(this.view.state.facet(B1)||i.tabIndex>-1)&&xS(i,this.view.observer.selectionRange)&&!(r&&i.contains(r));if(!(o||t||s))return;let a=this.forceSelection;this.forceSelection=!1;let c=this.view.state.selection.main,d,m;if(c.empty?m=d=this.inlineDOMNearPos(c.anchor,c.assoc||1):(m=this.inlineDOMNearPos(c.head,c.head==c.from?1:-1),d=this.inlineDOMNearPos(c.anchor,c.anchor==c.from?1:-1)),Ti.gecko&&c.empty&&!this.hasComposition&&mxe(d)){let M=document.createTextNode("");this.view.observer.ignore(()=>d.node.insertBefore(M,d.node.childNodes[d.offset]||null)),d=m=new Tm(M,0),a=!0}let v=this.view.observer.selectionRange;(a||!v.focusNode||(!x4(d.node,d.offset,v.anchorNode,v.anchorOffset)||!x4(m.node,m.offset,v.focusNode,v.focusOffset))&&!this.suppressWidgetCursorChange(v,c))&&(this.view.observer.ignore(()=>{Ti.android&&Ti.chrome&&i.contains(v.focusNode)&&xxe(v.focusNode,i)&&(i.blur(),i.focus({preventScroll:!0}));let M=g5(this.view.root);if(M)if(c.empty){if(Ti.gecko){let B=yxe(d.node,d.offset);if(B&&B!=3){let P=(B==1?Ute:Kte)(d.node,d.offset);P&&(d=new Tm(P.node,P.offset))}}M.collapse(d.node,d.offset),c.bidiLevel!=null&&M.caretBidiLevel!==void 0&&(M.caretBidiLevel=c.bidiLevel)}else if(M.extend){M.collapse(d.node,d.offset);try{M.extend(m.node,m.offset)}catch{}}else{let B=document.createRange();c.anchor>c.head&&([d,m]=[m,d]),B.setEnd(m.node,m.offset),B.setStart(d.node,d.offset),M.removeAllRanges(),M.addRange(B)}s&&this.view.root.activeElement==i&&(i.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(d,m)),this.impreciseAnchor=d.precise?null:new Tm(v.anchorNode,v.anchorOffset),this.impreciseHead=m.precise?null:new Tm(v.focusNode,v.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&x4(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=g5(e.root),{anchorNode:r,anchorOffset:o}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let s=this.lineAt(t.head,t.assoc);if(!s)return;let a=s.posAtStart;if(t.head==a||t.head==a+s.length)return;let c=this.coordsAt(t.head,-1),d=this.coordsAt(t.head,1);if(!c||!d||c.bottom>d.top)return;let m=this.domAtPos(t.head+t.assoc,t.assoc);i.collapse(m.node,m.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let v=e.observer.selectionRange;e.docView.posFromDOM(v.anchorNode,v.anchorOffset)!=t.from&&i.collapse(r,o)}posFromDOM(e,t){let i=this.tile.nearest(e);if(!i)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let r=i.posAtStart;if(i.isComposite()){let o;if(e==i.dom)o=i.dom.childNodes[t];else{let s=j1(e)==0?0:t==0?-1:1;for(;;){let a=e.parentNode;if(a==i.dom)break;s==0&&a.firstChild!=a.lastChild&&(e==a.firstChild?s=-1:s=1),e=a}s<0?o=e:o=e.nextSibling}if(o==i.dom.firstChild)return r;for(;o&&!Wu.get(o);)o=o.nextSibling;if(!o)return r+i.length;for(let s=0,a=r;;s++){let c=i.children[s];if(c.dom==o)return a;a+=c.length+c.breakAfter}}else return i.isText()?e==i.dom?r+t:r+(t?i.length:0):r}domAtPos(e,t){let{tile:i,offset:r}=this.tile.resolveBlock(e,t);return i.isWidget()?i.domPosFor(e,t):i.domIn(r,t)}inlineDOMNearPos(e,t){let i,r=-1,o=!1,s,a=-1,c=!1;return this.tile.blockTiles((d,m)=>{if(d.isWidget()){if(d.flags&32&&m>=e)return!0;d.flags&16&&(o=!0)}else{let v=m+d.length;if(m<=e&&(i=d,r=e-m,o=v<e),v>=e&&!s&&(s=d,a=e-m,c=m>e),m>e&&s)return!0}}),!i&&!s?this.domAtPos(e,t):(o&&s?i=null:c&&i&&(s=null),i&&t<0||!s?i.domIn(r,t):s.domIn(a,t))}coordsAt(e,t){let{tile:i,offset:r}=this.tile.resolveBlock(e,t);return i.isWidget()?i.widget instanceof J8?null:i.coordsInWidget(r,t,!0):i.coordsIn(r,t)}lineAt(e,t){let{tile:i}=this.tile.resolveBlock(e,t);return i.isLine()?i:null}coordsForChar(e){let{tile:t,offset:i}=this.tile.resolveBlock(e,1);if(!t.isLine())return null;function r(o,s){if(o.isComposite())for(let a of o.children){if(a.length>=s){let c=r(a,s);if(c)return c}if(s-=a.length,s<0)break}else if(o.isText()&&s<o.length){let a=fc(o.text,s);if(a==s)return null;let c=y5(o.dom,s,a).getClientRects();for(let d=0;d<c.length;d++){let m=c[d];if(d==c.length-1||m.top<m.bottom&&m.left<m.right)return m}}return null}return r(t,i)}measureVisibleLineHeights(e){let t=[],{from:i,to:r}=e,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,c=this.view.textDirection==Ca.LTR,d=0,m=(v,M,B)=>{for(let P=0;P<v.children.length&&!(M>r);P++){let U=v.children[P],z=M+U.length,V=U.dom.getBoundingClientRect(),{height:Z}=V;if(B&&!P&&(d+=V.top-B.top),U instanceof Sv)z>i&&m(U,M,V);else if(M>=i&&(d>0&&t.push(-d),t.push(Z+d),d=0,s)){let X=U.dom.lastChild,re=X?MS(X):[];if(re.length){let ie=re[re.length-1],te=c?ie.right-V.left:V.right-ie.left;te>a&&(a=te,this.minWidth=o,this.minWidthFrom=M,this.minWidthTo=z)}}B&&P==v.children.length-1&&(d+=B.bottom-V.bottom),M=z+U.breakAfter}};return m(this.tile,0,null),t}textDirectionAt(e){let{tile:t}=this.tile.resolveBlock(e,1);return getComputedStyle(t.dom).direction=="rtl"?Ca.RTL:Ca.LTR}measureTextSize(){let e=this.tile.blockTiles(s=>{if(s.isLine()&&s.children.length&&s.length<=20){let a=0,c;for(let d of s.children){if(!d.isText()||/[^ -~]/.test(d.text))return;let m=MS(d.dom);if(m.length!=1)return;a+=m[0].width,c=m[0].height}if(a)return{lineHeight:s.dom.getBoundingClientRect().height,charWidth:a/s.length,textHeight:c}}});if(e)return e;let t=document.createElement("div"),i,r,o;return t.className="cm-line",t.style.width="99999px",t.style.position="absolute",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(t);let s=MS(t.firstChild)[0];i=t.getBoundingClientRect().height,r=s&&s.width?s.width/27:7,o=s&&s.height?s.height:i,t.remove()}),{lineHeight:i,charWidth:r,textHeight:o}}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,r=0;;r++){let o=r==t.viewports.length?null:t.viewports[r],s=o?o.from-1:this.view.state.doc.length;if(s>i){let a=(t.lineBlockAt(s).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(vr.replace({widget:new J8(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,s))}if(!o)break;i=o.to+1}return vr.set(e)}updateDeco(){let e=1,t=this.view.state.facet(wB).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),i=!1,r=this.view.state.facet(SU).map((o,s)=>{let a=typeof o=="function";return a&&(i=!0),a?o(this.view):o});for(r.length&&(this.dynamicDecorationMap[e++]=i,t.push(mo.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(tne).map(o=>typeof o=="function"?o(this.view):o)}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let d of this.view.state.facet(Xte))try{if(d(this.view,e.range,e))return!0}catch(m){kh(this.view.state,m,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!i)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let o=EU(this.view),s={left:i.left-o.left,top:i.top-o.top,right:i.right+o.right,bottom:i.bottom+o.bottom},{offsetWidth:a,offsetHeight:c}=this.view.scrollDOM;G_e(this.view.scrollDOM,s,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,c),-c),this.view.textDirection==Ca.LTR)}lineHasWidget(e){let t=i=>i.isWidget()||i.children.some(t);return t(this.tile.resolveBlock(e,1).tile)}destroy(){vR(this.tile)}}function vR(n,e){let t=e?.get(n);if(t!=1){t==null&&n.destroy();for(let i of n.children)vR(i,e)}}function mxe(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function one(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let i=Ute(t.focusNode,t.focusOffset),r=Kte(t.focusNode,t.focusOffset),o=i||r;if(r&&i&&r.node!=i.node){let a=Wu.get(r.node);if(!a||a.isText()&&a.text!=r.node.nodeValue)o=r;else if(n.docView.lastCompositionAfterCursor){let c=Wu.get(i.node);!c||c.isText()&&c.text!=i.node.nodeValue||(o=r)}}if(n.docView.lastCompositionAfterCursor=o!=i,!o)return null;let s=e-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}function gxe(n,e,t){let i=one(n,t);if(!i)return null;let{node:r,from:o,to:s}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||n.state.doc.sliceString(i.from,i.to)!=a)return null;let c=e.invertedDesc;return{range:new bp(c.mapPos(o),c.mapPos(s),o,s),text:r}}function yxe(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let vxe=class{constructor(){this.changes=[]}compareRange(e,t){qx(e,t,this.changes)}comparePoint(e,t){qx(e,t,this.changes)}boundChange(e){qx(e,e,this.changes)}};function bxe(n,e,t){let i=new vxe;return mo.compare(n,e,t,i),i.changes}class Cxe{constructor(){this.changes=[]}compareRange(e,t){qx(e,t,this.changes)}comparePoint(){}boundChange(e){qx(e,e,this.changes)}}function _xe(n,e,t){let i=new Cxe;return mo.compare(n,e,t,i),i.changes}function xxe(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function Mxe(n,e){let t=!1;return e&&n.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(t=!0)}),t}class J8 extends q1{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function wxe(n,e,t=1){let i=n.charCategorizer(e),r=n.doc.lineAt(e),o=e-r.from;if(r.length==0)return Sn.cursor(e);o==0?t=1:o==r.length&&(t=-1);let s=o,a=o;t<0?s=fc(r.text,o,!1):a=fc(r.text,o);let c=i(r.text.slice(s,a));for(;s>0;){let d=fc(r.text,s,!1);if(i(r.text.slice(d,s))!=c)break;s=d}for(;a<r.length;){let d=fc(r.text,a);if(i(r.text.slice(a,d))!=c)break;a=d}return Sn.range(s+r.from,a+r.from)}function Sxe(n,e,t,i,r){let o=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,c=Math.floor((r-t.top-(n.defaultLineHeight-a)*.5)/a);o+=c*n.viewState.heightOracle.lineLength}let s=n.state.sliceDoc(t.from,t.to);return t.from+aR(s,o,n.state.tabSize)}function bR(n,e,t){let i=n.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let o of i.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!r||o.type==gA.Text&&(r.type!=o.type||(t<0?o.from<e:o.to>e)))&&(r=o)}}return r||i}return i}function Exe(n,e,t,i){let r=bR(n,e.head,e.assoc||-1),o=!i||r.type!=gA.Text||!(n.lineWrapping||r.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(o){let s=n.dom.getBoundingClientRect(),a=n.textDirectionAt(r.from),c=n.posAtCoords({x:t==(a==Ca.LTR)?s.right-1:s.left+1,y:(o.top+o.bottom)/2});if(c!=null)return Sn.cursor(c,t?-1:1)}return Sn.cursor(t?r.to:r.from,t?-1:1)}function hG(n,e,t,i){let r=n.state.doc.lineAt(e.head),o=n.bidiSpans(r),s=n.textDirectionAt(r.from);for(let a=e,c=null;;){let d=txe(r,o,s,a,t),m=Gte;if(!d){if(r.number==(t?n.state.doc.lines:1))return a;m=`
`,r=n.state.doc.line(r.number+(t?1:-1)),o=n.bidiSpans(r),d=n.visualLineSide(r,!t)}if(c){if(!c(m))return a}else{if(!i)return d;c=i(m)}a=d}}function Bxe(n,e,t){let i=n.state.charCategorizer(e),r=i(t);return o=>{let s=i(o);return r==ll.Space&&(r=s),r==s}}function Oxe(n,e,t,i){let r=e.head,o=t?1:-1;if(r==(t?n.state.doc.length:0))return Sn.cursor(r,e.assoc);let s=e.goalColumn,a,c=n.contentDOM.getBoundingClientRect(),d=n.coordsAtPos(r,e.assoc||-1),m=n.documentTop;if(d)s==null&&(s=d.left-c.left),a=o<0?d.top:d.bottom;else{let B=n.viewState.lineBlockAt(r);s==null&&(s=Math.min(c.right-c.left,n.defaultCharacterWidth*(r-B.from))),a=(o<0?B.top:B.bottom)+m}let v=c.left+s,M=i??n.viewState.heightOracle.textHeight>>1;for(let B=0;;B+=10){let P=a+(M+B)*o,U=CR(n,{x:v,y:P},!1,o);return Sn.cursor(U.pos,U.assoc,void 0,s)}}function M4(n,e,t){for(;;){let i=0;for(let r of n)r.between(e-1,e+1,(o,s,a)=>{if(e>o&&e<s){let c=i||t||(e-o<s-e?-1:1);e=c<0?o:s,i=c}});if(!i)return e}}function sne(n,e){let t=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],o=null;if(r.empty){let s=M4(n,r.from,0);s!=r.from&&(o=Sn.cursor(s,-1))}else{let s=M4(n,r.from,-1),a=M4(n,r.to,1);(s!=r.from||a!=r.to)&&(o=Sn.range(r.from==r.anchor?s:a,r.from==r.head?s:a))}o&&(t||(t=e.ranges.slice()),t[i]=o)}return t?Sn.create(t,e.mainIndex):e}function eI(n,e,t){let i=M4(n.state.facet(xM).map(r=>r(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:Sn.cursor(i,i<t.from?1:-1)}class rg{constructor(e,t){this.pos=e,this.assoc=t}}function CR(n,e,t,i){let r=n.contentDOM.getBoundingClientRect(),o=r.top+n.viewState.paddingTop,{x:s,y:a}=e,c=a-o,d;for(;;){if(c<0)return new rg(0,1);if(c>n.viewState.docHeight)return new rg(n.state.doc.length,-1);if(d=n.elementAtHeight(c),i==null)break;if(d.type==gA.Text){let M=n.docView.coordsAt(i<0?d.from:d.to,i);if(M&&(i<0?M.top<=c+o:M.bottom>=c+o))break}let v=n.viewState.heightOracle.textHeight/2;c=i>0?d.bottom+v:d.top-v}if(n.viewport.from>=d.to||n.viewport.to<=d.from){if(t)return null;if(d.type==gA.Text){let v=Sxe(n,r,d,s,a);return new rg(v,v==d.from?1:-1)}}if(d.type!=gA.Text)return c<(d.top+d.bottom)/2?new rg(d.from,1):new rg(d.to,-1);let m=n.docView.lineAt(d.from,2);return(!m||m.length!=d.length)&&(m=n.docView.lineAt(d.from,-2)),ane(n,m,d.from,s,a)}function ane(n,e,t,i,r){let o=-1,s=null,a=1e9,c=1e9,d=r,m=r,v=(M,B)=>{for(let P=0;P<M.length;P++){let U=M[P];if(U.top==U.bottom)continue;let z=U.left>i?U.left-i:U.right<i?i-U.right:0,V=U.top>r?U.top-r:U.bottom<r?r-U.bottom:0;U.top<=m&&U.bottom>=d&&(d=Math.min(U.top,d),m=Math.max(U.bottom,m),V=0),(o<0||(V-c||z-a)<0)&&(o>=0&&c&&a<z&&s.top<=m-2&&s.bottom>=d+2?c=0:(o=B,a=z,c=V,s=U))}};if(e.isText()){for(let B=0;B<e.length;){let P=fc(e.text,B);if(v(y5(e.dom,B,P).getClientRects(),B),!a&&!c)break;B=P}return i>(s.left+s.right)/2==(dG(n,o+t)==Ca.LTR)?new rg(t+fc(e.text,o),-1):new rg(t+o,1)}else{if(!e.length)return new rg(t,1);for(let U=0;U<e.children.length;U++){let z=e.children[U];if(z.flags&48)continue;let V=(z.dom.nodeType==1?z.dom:y5(z.dom,0,z.length)).getClientRects();if(v(V,U),!a&&!c)break}let M=e.children[o],B=e.posBefore(M,t);return M.isComposite()||M.isText()?ane(n,M,B,Math.max(s.left,Math.min(s.right,i)),r):i>(s.left+s.right)/2==(dG(n,o+t)==Ca.LTR)?new rg(B+M.length,-1):new rg(B,1)}}function dG(n,e){let t=n.state.doc.lineAt(e);return n.bidiSpans(t)[O1.find(n.bidiSpans(t),e-t.from,-1,1)].dir}const e4="";class Ixe{constructor(e,t){this.points=e,this.view=t,this.text="",this.lineSeparator=t.state.facet(as.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=e4}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let o=this.text.length;this.readNode(r);let s=Wu.get(r),a=r.nextSibling;if(a==t){s?.breakAfter&&!a&&i!=this.view.contentDOM&&this.lineBreak();break}let c=Wu.get(a);(s&&c?s.breakAfter:(s?s.breakAfter:DE(r))||DE(a)&&(r.nodeName!="BR"||s?.isWidget())&&this.text.length>o)&&!kxe(a,t)&&this.lineBreak(),r=a}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,a;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,i),s=this.lineSeparator.length):(a=r.exec(t))&&(o=a.index,s=a[0].length),this.append(t.slice(i,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let c of this.points)c.node==e&&c.pos>this.text.length&&(c.pos-=s-1);i=o+s}}readNode(e){let t=Wu.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(Txe(e,i.node,i.offset)?t:0))}}function Txe(n,e,t){for(;;){if(!e||t<j1(e))return!1;if(e==n)return!0;t=Rv(e)+1,e=e.parentNode}}function kxe(n,e){let t;for(;!(n==e||!n);n=n.nextSibling){let i=Wu.get(n);if(!i?.isWidget())return!1;i&&(t||(t=[])).push(i)}if(t)for(let i of t){let r=i.overrideDOMText;if(r?.length)return!1}return!0}class fG{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Dxe{constructor(e,t,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=lne(e.docView.tile,t,i,0))){let a=o||s?[]:Pxe(e),c=new Ixe(a,e);c.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=c.text,this.newSel=Lxe(a,this.bounds.from)}else{let a=e.observer.selectionRange,c=o&&o.node==a.focusNode&&o.offset==a.focusOffset||!fR(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),d=s&&s.node==a.anchorNode&&s.offset==a.anchorOffset||!fR(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),m=e.viewport;if((Ti.ios||Ti.chrome)&&e.state.selection.main.empty&&c!=d&&(m.from>0||m.to<e.state.doc.length)){let v=Math.min(c,d),M=Math.max(c,d),B=m.from-v,P=m.to-M;(B==0||B==1||v==0)&&(P==0||P==-1||M==e.state.doc.length)&&(c=0,d=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(Sn.range(d,c)):this.newSel=Sn.single(d,c)}}}function lne(n,e,t,i){if(n.isComposite()){let r=-1,o=-1,s=-1,a=-1;for(let c=0,d=i,m=i;c<n.children.length;c++){let v=n.children[c],M=d+v.length;if(d<e&&M>t)return lne(v,e,t,d);if(M>=e&&r==-1&&(r=c,o=d),d>t&&v.dom.parentNode==n.dom){s=c,a=m;break}m=M,d=M+v.breakAfter}return{from:o,to:a<0?i+n.length:a,startDOM:(r?n.children[r-1].dom.nextSibling:null)||n.dom.firstChild,endDOM:s<n.children.length&&s>=0?n.children[s].dom:null}}else return n.isText()?{from:i,to:i+n.length,startDOM:n.dom,endDOM:n.dom.nextSibling}:null}function une(n,e){let t,{newSel:i}=e,r=n.state.selection.main,o=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:s,to:a}=e.bounds,c=r.from,d=null;(o===8||Ti.android&&e.text.length<a-s)&&(c=r.to,d="end");let m=cne(n.state.doc.sliceString(s,a,e4),e.text,c-s,d);m&&(Ti.chrome&&o==13&&m.toB==m.from+2&&e.text.slice(m.from,m.toB)==e4+e4&&m.toB--,t={from:s+m.from,to:s+m.toA,insert:As.of(e.text.slice(m.from,m.toB).split(e4))})}else i&&(!n.hasFocus&&n.state.facet(B1)||i.main.eq(r))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!r.empty&&i&&i.main.empty?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,r.to)}:(Ti.mac||Ti.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=Sn.single(i.main.anchor-1,i.main.head-1)),t={from:t.from,to:t.to,insert:As.of([t.insert.toString().replace("."," ")])}):t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,r.to))}:n.state.doc.lineAt(r.from).to<r.to&&n.docView.lineHasWidget(r.to)&&n.inputState.insertingTextAt>Date.now()-50?t={from:r.from,to:r.to,insert:n.state.toText(n.inputState.insertingText)}:Ti.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=Sn.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:As.of([" "])}),t)return BU(n,t,i,o);if(i&&!i.main.eq(r)){let s=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(s=!0),a=n.inputState.lastSelectionOrigin,a=="select.pointer"&&(i=sne(n.state.facet(xM).map(c=>c(n)),i))),n.dispatch({selection:i,scrollIntoView:s,userEvent:a}),!0}else return!1}function BU(n,e,t,i=-1){if(Ti.ios&&n.inputState.flushIOSKey(e))return!0;let r=n.state.selection.main;if(Ti.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&n.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Yx(n.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&Yx(n.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&Yx(n.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let s,a=()=>s||(s=Rxe(n,e,t));return n.state.facet(Vte).some(c=>c(n,e.from,e.to,o,a))||n.dispatch(a()),!0}function Rxe(n,e,t){let i,r=n.state,o=r.selection.main,s=-1;if(e.from==e.to&&e.from<o.from||e.from>o.to){let c=e.from<o.from?-1:1,d=c<0?o.from:o.to,m=M4(r.facet(xM).map(v=>v(n)),d,c);e.from==m&&(s=m)}if(s>-1)i={changes:e,selection:Sn.cursor(e.from+e.insert.length,-1)};else if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let c=o.from<e.from?r.sliceDoc(o.from,e.from):"",d=o.to>e.to?r.sliceDoc(e.to,o.to):"";i=r.replaceSelection(n.state.toText(c+e.insert.sliceString(0,void 0,n.state.lineBreak)+d))}else{let c=r.changes(e),d=t&&t.main.to<=c.newLength?t.main:void 0;if(r.selection.ranges.length>1&&(n.inputState.composing>=0||n.inputState.compositionPendingChange)&&e.to<=o.to+10&&e.to>=o.to-10){let m=n.state.sliceDoc(e.from,e.to),v,M=t&&one(n,t.main.head);if(M){let P=e.insert.length-(e.to-e.from);v={from:M.from,to:M.to-P}}else v=n.state.doc.lineAt(o.head);let B=o.to-e.to;i=r.changeByRange(P=>{if(P.from==o.from&&P.to==o.to)return{changes:c,range:d||P.map(c)};let U=P.to-B,z=U-m.length;if(n.state.sliceDoc(z,U)!=m||U>=v.from&&z<=v.to)return{range:P};let V=r.changes({from:z,to:U,insert:e.insert}),Z=P.to-o.to;return{changes:V,range:d?Sn.range(Math.max(0,d.anchor+Z),Math.max(0,d.head+Z)):P.map(V)}})}else i={changes:c,selection:d&&r.selection.replaceRange(d)}}let a="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,a+=".compose",n.inputState.compositionFirstChange&&(a+=".start",n.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:a,scrollIntoView:!0})}function cne(n,e,t,i){let r=Math.min(n.length,e.length),o=0;for(;o<r&&n.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&n.length==e.length)return null;let s=n.length,a=e.length;for(;s>0&&a>0&&n.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;if(i=="end"){let c=Math.max(0,o-Math.min(s,a));t-=s+c-o}if(s<o&&n.length<e.length){let c=t<=o&&t>=s?o-t:0;o-=c,a=o+(a-s),s=o}else if(a<o){let c=t<=o&&t>=a?o-t:0;o-=c,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}function Pxe(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:o}=n.observer.selectionRange;return t&&(e.push(new fG(t,i)),(r!=t||o!=i)&&e.push(new fG(r,o))),e}function Lxe(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?Sn.single(t+e,i+e):null}class Uxe{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ti.safari&&e.contentDOM.addEventListener("input",()=>null),Ti.gecko&&Xxe(e.contentDOM.ownerDocument)}handleEvent(e){!Qxe(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,t);for(let r of i.handlers){if(t.defaultPrevented)break;if(r(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=Kxe(e),i=this.handlers,r=this.view.contentDOM;for(let o in t)if(o!="scroll"){let s=!t[o].handlers.length,a=i[o];a&&s!=!a.handlers.length&&(r.removeEventListener(o,this.handleEvent),a=null),a||r.addEventListener(o,this.handleEvent,{passive:s})}for(let o in i)o!="scroll"&&!t[o]&&r.removeEventListener(o,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&hne.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Ti.android&&Ti.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Ti.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=Ane.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||Fxe.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Yx(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:Ti.safari&&!Ti.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function pG(n,e){return(t,i)=>{try{return e.call(n,i,t)}catch(r){kh(t.state,r)}}}function Kxe(n){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of n){let r=i.spec,o=r&&r.plugin.domEventHandlers,s=r&&r.plugin.domEventObservers;if(o)for(let a in o){let c=o[a];c&&t(a).handlers.push(pG(i.value,c))}if(s)for(let a in s){let c=s[a];c&&t(a).observers.push(pG(i.value,c))}}for(let i in Um)t(i).handlers.push(Um[i]);for(let i in Ep)t(i).observers.push(Ep[i]);return e}const Ane=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Fxe="dthko",hne=[16,17,18,20,91,92,224,225],xw=6;function Mw(n){return Math.max(0,n)*.7+8}function zxe(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class jxe{constructor(e,t,i,r){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=W_e(e.contentDOM),this.atoms=e.state.facet(xM).map(s=>s(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(as.allowMultipleSelections)&&Nxe(e,t),this.dragging=Wxe(e,t)&&pne(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&zxe(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,r=0,o=0,s=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:a}=this.scrollParents.y.getBoundingClientRect());let c=EU(this.view);e.clientX-c.left<=r+xw?t=-Mw(r-e.clientX):e.clientX+c.right>=s-xw&&(t=Mw(e.clientX-s)),e.clientY-c.top<=o+xw?i=-Mw(o-e.clientY):e.clientY+c.bottom>=a-xw&&(i=Mw(e.clientY-a)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,i=sne(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Nxe(n,e){let t=n.state.facet(Wte);return t.length?t[0](e):Ti.mac?e.metaKey:e.ctrlKey}function Gxe(n,e){let t=n.state.facet(Qte);return t.length?t[0](e):Ti.mac?!e.altKey:!e.ctrlKey}function Wxe(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=g5(n.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let o=0;o<r.length;o++){let s=r[o];if(s.left<=e.clientX&&s.right>=e.clientX&&s.top<=e.clientY&&s.bottom>=e.clientY)return!0}return!1}function Qxe(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=Wu.get(t))&&i.isWidget()&&!i.isHidden&&i.widget.ignoreEvent(e))return!1;return!0}const Um=Object.create(null),Ep=Object.create(null),dne=Ti.ie&&Ti.ie_version<15||Ti.ios&&Ti.webkit_version<604;function qxe(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),fne(n,t.value)},50)}function BB(n,e,t){for(let i of n.facet(e))t=i(t,n);return t}function fne(n,e){e=BB(n.state,xU,e);let{state:t}=n,i,r=1,o=t.toText(e),s=o.lines==t.selection.ranges.length;if(_R!=null&&t.selection.ranges.every(c=>c.empty)&&_R==o.toString()){let c=-1;i=t.changeByRange(d=>{let m=t.doc.lineAt(d.from);if(m.from==c)return{range:d};c=m.from;let v=t.toText((s?o.line(r++).text:e)+t.lineBreak);return{changes:{from:m.from,insert:v},range:Sn.cursor(d.from+v.length)}})}else s?i=t.changeByRange(c=>{let d=o.line(r++);return{changes:{from:c.from,to:c.to,insert:d.text},range:Sn.cursor(c.from+d.length)}}):i=t.replaceSelection(o);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Ep.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Um.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);Ep.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Ep.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Um.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of n.state.facet(qte))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=Vxe(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new jxe(n,e,t,i)),i&&n.observer.ignore(()=>{Pte(n.contentDOM);let o=n.root.activeElement;o&&!o.contains(n.contentDOM)&&o.blur()});let r=n.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function mG(n,e,t,i){if(i==1)return Sn.cursor(e,t);if(i==2)return wxe(n.state,e,t);{let r=n.docView.lineAt(e,t),o=n.state.doc.lineAt(r?r.posAtEnd:e),s=r?r.posAtStart:o.from,a=r?r.posAtEnd:o.to;return a<n.state.doc.length&&a==o.to&&a++,Sn.range(s,a)}}const Yxe=Ti.ie&&Ti.ie_version<=11;let gG=null,yG=0,vG=0;function pne(n){if(!Yxe)return n.detail;let e=gG,t=vG;return gG=n,vG=Date.now(),yG=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(yG+1)%3:1}function Vxe(n,e){let t=n.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),i=pne(e),r=n.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),r=r.map(o.changes))},get(o,s,a){let c=n.posAndSideAtCoords({x:o.clientX,y:o.clientY},!1),d,m=mG(n,c.pos,c.assoc,i);if(t.pos!=c.pos&&!s){let v=mG(n,t.pos,t.assoc,i),M=Math.min(v.from,m.from),B=Math.max(v.to,m.to);m=M<m.from?Sn.range(M,B):Sn.range(B,M)}return s?r.replaceRange(r.main.extend(m.from,m.to)):a&&i==1&&r.ranges.length>1&&(d=$xe(r,c.pos))?d:a?r.addRange(m):Sn.create([m])}}}function $xe(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:r}=n.ranges[t];if(i<=e&&r>=e)return Sn.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Um.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let r=n.docView.tile.nearest(e.target);if(r&&r.isWidget()){let o=r.posAtStart,s=o+r.length;(o>=t.to||s<=t.from)&&(t=Sn.range(o,s))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",BB(n.state,MU,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Um.dragend=n=>(n.inputState.draggedContent=null,!1);function bG(n,e,t,i){if(t=BB(n.state,xU,t),!t)return;let r=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=n.inputState,s=i&&o&&Gxe(n,e)?{from:o.from,to:o.to}:null,a={from:r,insert:t},c=n.state.changes(s?[s,a]:a);n.focus(),n.dispatch({changes:c,selection:{anchor:c.mapPos(r,-1),head:c.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Um.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),r=0,o=()=>{++r==t.length&&bG(n,e,i.filter(s=>s!=null).join(n.state.lineBreak),!1)};for(let s=0;s<t.length;s++){let a=new FileReader;a.onerror=o,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[s]=a.result),o()},a.readAsText(t[s])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return bG(n,e,i,!0),!0}return!1};Um.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=dne?null:e.clipboardData;return t?(fne(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(qxe(n),!1)};function Hxe(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function Zxe(n){let e=[],t=[],i=!1;for(let r of n.selection.ranges)r.empty||(e.push(n.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:o}of n.selection.ranges){let s=n.doc.lineAt(o);s.number>r&&(e.push(s.text),t.push({from:s.from,to:Math.min(n.doc.length,s.to+1)})),r=s.number}i=!0}return{text:BB(n,MU,e.join(n.lineBreak)),ranges:t,linewise:i}}let _R=null;Um.copy=Um.cut=(n,e)=>{let{text:t,ranges:i,linewise:r}=Zxe(n.state);if(!t&&!r)return!1;_R=r?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=dne?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",t),!0):(Hxe(n,t),!1)};const mne=Q1.define();function gne(n,e){let t=[];for(let i of n.facet($te)){let r=i(n,e);r&&t.push(r)}return t.length?n.update({effects:t,annotations:mne.of(!0)}):null}function yne(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=gne(n.state,e);t?n.dispatch(t):n.update([])}},10)}Ep.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),yne(n)};Ep.blur=n=>{n.observer.clearSelectionRange(),yne(n)};Ep.compositionstart=Ep.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};Ep.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,Ti.chrome&&Ti.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};Ep.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Um.beforeinput=(n,e)=>{var t,i;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(n.inputState.insertingText=e.data,n.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&n.observer.editContext){let o=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),s=e.getTargetRanges();if(o&&s.length){let a=s[0],c=n.posAtDOM(a.startContainer,a.startOffset),d=n.posAtDOM(a.endContainer,a.endOffset);return BU(n,{from:c,to:d,insert:n.state.toText(o)},null),!0}}let r;if(Ti.chrome&&Ti.android&&(r=Ane.find(o=>o.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let o=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return Ti.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),Ti.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>Ep.compositionend(n,e),20),!1};const CG=new Set;function Xxe(n){CG.has(n)||(CG.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const _G=["pre-wrap","normal","pre-line","break-spaces"];let _2=!1;function xG(){_2=!1}class Jxe{constructor(e){this.lineWrapping=e,this.doc=As.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return _G.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,i,r,o,s){let a=_G.indexOf(e)>-1,c=Math.abs(t-this.lineHeight)>.3||this.lineWrapping!=a||Math.abs(i-this.charWidth)>.1;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=i,this.textHeight=r,this.lineLength=o,c){this.heightSamples={};for(let d=0;d<s.length;d++){let m=s[d];m<0?d++:this.heightSamples[Math.floor(m*10)]=!0}}return c}}class e2e{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Bm{constructor(e,t,i,r,o){this.from=e,this.length=t,this.top=i,this.height=r,this._content=o}get type(){return typeof this._content=="number"?gA.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PC?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Bm(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var La=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(La||(La={}));const wS=.001;class Dh{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>wS&&(_2=!0),this.height=e)}replace(e,t,i){return Dh.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,r){let o=this,s=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:c,toA:d,fromB:m,toB:v}=r[a],M=o.lineAt(c,La.ByPosNoHeight,i.setDoc(t),0,0),B=M.to>=d?M:o.lineAt(d,La.ByPosNoHeight,i,0,0);for(v+=B.to-d,d=B.to;a>0&&M.from<=r[a-1].toA;)c=r[a-1].fromA,m=r[a-1].fromB,a--,c<M.from&&(M=o.lineAt(c,La.ByPosNoHeight,i,0,0));m+=M.from-c,c=M.from;let P=OU.build(i.setDoc(s),e,m,v);o=KE(o,o.replace(c,d,P))}return o.updateHeight(i,0)}static empty(){return new hf(0,0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,r=0,o=0;for(;;)if(t==i)if(r>o*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(o>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,o-=a.size}else break;else if(r<o){let a=e[t++];a&&(r+=a.size)}else{let a=e[--i];a&&(o+=a.size)}let s=0;return e[t-1]==null?(s=1,t--):e[t]==null&&(s=1,i++),new n2e(Dh.of(e.slice(0,t)),s,Dh.of(e.slice(i)))}}function KE(n,e){return n==e?n:(n.constructor!=e.constructor&&(_2=!0),e)}Dh.prototype.size=1;const t2e=vr.replace({});class vne extends Dh{constructor(e,t,i){super(e,t),this.deco=i,this.spaceAbove=0}mainBlock(e,t){return new Bm(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,t,i,r){return this.spaceAbove&&e<i+this.spaceAbove?new Bm(r,0,i,this.spaceAbove,t2e):this.mainBlock(i,r)}lineAt(e,t,i,r,o){let s=this.mainBlock(r,o);return this.spaceAbove?this.blockAt(0,i,r,o).join(s):s}forEachLine(e,t,i,r,o,s){e<=o+this.length&&t>=o&&s(this.lineAt(0,La.ByPos,i,r,o))}setMeasuredHeight(e){let t=e.heights[e.index++];t<0?(this.spaceAbove=-t,t=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(t)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more&&this.setMeasuredHeight(r),this.outdated=!1,this}toString(){return`block(${this.length})`}}class hf extends vne{constructor(e,t,i){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=i}mainBlock(e,t){return new Bm(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,t,i){let r=i[0];return i.length==1&&(r instanceof hf||r instanceof fA&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof fA?r=new hf(r.length,this.height,this.spaceAbove):r.height=this.height,this.outdated||(r.outdated=!1),r):Dh.of(i)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more?this.setMeasuredHeight(r):(i||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class fA extends Dh{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,o=r-i+1,s,a=0;if(e.lineWrapping){let c=Math.min(this.height,e.lineHeight*o);s=c/o,this.length>o+1&&(a=(this.height-c)/(this.length-o-1))}else s=this.height/o;return{firstLine:i,lastLine:r,perLine:s,perChar:a}}blockAt(e,t,i,r){let{firstLine:o,lastLine:s,perLine:a,perChar:c}=this.heightMetrics(t,r);if(t.lineWrapping){let d=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),m=t.doc.lineAt(d),v=a+m.length*c,M=Math.max(i,e-v/2);return new Bm(m.from,m.length,M,v,0)}else{let d=Math.max(0,Math.min(s-o,Math.floor((e-i)/a))),{from:m,length:v}=t.doc.line(o+d);return new Bm(m,v,i+a*d,a,0)}}lineAt(e,t,i,r,o){if(t==La.ByHeight)return this.blockAt(e,i,r,o);if(t==La.ByPosNoHeight){let{from:B,to:P}=i.doc.lineAt(e);return new Bm(B,P-B,0,0,0)}let{firstLine:s,perLine:a,perChar:c}=this.heightMetrics(i,o),d=i.doc.lineAt(e),m=a+d.length*c,v=d.number-s,M=r+a*v+c*(d.from-o-v);return new Bm(d.from,d.length,Math.max(r,Math.min(M,r+this.height-m)),m,0)}forEachLine(e,t,i,r,o,s){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:a,perLine:c,perChar:d}=this.heightMetrics(i,o);for(let m=e,v=r;m<=t;){let M=i.doc.lineAt(m);if(m==e){let P=M.number-a;v+=c*P+d*(e-o-P)}let B=c+d*M.length;s(new Bm(M.from,M.length,v,B,0)),v+=B,m=M.to+1}}replace(e,t,i){let r=this.length-t;if(r>0){let o=i[i.length-1];o instanceof fA?i[i.length-1]=new fA(o.length+r):i.push(null,new fA(r-1))}if(e>0){let o=i[0];o instanceof fA?i[0]=new fA(e+o.length):i.unshift(new fA(e-1),null)}return Dh.of(i)}decomposeLeft(e,t){t.push(new fA(e-1),null)}decomposeRight(e,t){t.push(null,new fA(this.length-e-1))}updateHeight(e,t=0,i=!1,r){let o=t+this.length;if(r&&r.from<=t+this.length&&r.more){let s=[],a=Math.max(t,r.from),c=-1;for(r.from>t&&s.push(new fA(r.from-t-1).updateHeight(e,t));a<=o&&r.more;){let m=e.doc.lineAt(a).length;s.length&&s.push(null);let v=r.heights[r.index++],M=0;v<0&&(M=-v,v=r.heights[r.index++]),c==-1?c=v:Math.abs(v-c)>=wS&&(c=-2);let B=new hf(m,v,M);B.outdated=!1,s.push(B),a+=m+1}a<=o&&s.push(null,new fA(o-a).updateHeight(e,a));let d=Dh.of(s);return(c<0||Math.abs(d.height-this.height)>=wS||Math.abs(c-this.heightMetrics(e,t).perLine)>=wS)&&(_2=!0),KE(this,d)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class n2e extends Dh{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,r){let o=i+this.left.height;return e<o?this.left.blockAt(e,t,i,r):this.right.blockAt(e,t,o,r+this.left.length+this.break)}lineAt(e,t,i,r,o){let s=r+this.left.height,a=o+this.left.length+this.break,c=t==La.ByHeight?e<s:e<a,d=c?this.left.lineAt(e,t,i,r,o):this.right.lineAt(e,t,i,s,a);if(this.break||(c?d.to<a:d.from>a))return d;let m=t==La.ByPosNoHeight?La.ByPosNoHeight:La.ByPos;return c?d.join(this.right.lineAt(a,m,i,s,a)):this.left.lineAt(a,m,i,r,o).join(d)}forEachLine(e,t,i,r,o,s){let a=r+this.left.height,c=o+this.left.length+this.break;if(this.break)e<c&&this.left.forEachLine(e,t,i,r,o,s),t>=c&&this.right.forEachLine(e,t,i,a,c,s);else{let d=this.lineAt(c,La.ByPos,i,r,o);e<d.from&&this.left.forEachLine(e,d.from-1,i,r,o,s),d.to>=e&&d.from<=t&&s(d),t>d.to&&this.right.forEachLine(d.to+1,t,i,a,c,s)}}replace(e,t,i){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,i));let o=[];e>0&&this.decomposeLeft(e,o);let s=o.length;for(let a of i)o.push(a);if(e>0&&MG(o,s-1),t<this.length){let a=o.length;this.decomposeRight(t,o),MG(o,a)}return Dh.of(o)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Dh.of(this.break?[e,null,t]:[e,t]):(this.left=KE(this.left,e),this.right=KE(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,r){let{left:o,right:s}=this,a=t+o.length+this.break,c=null;return r&&r.from<=t+o.length&&r.more?c=o=o.updateHeight(e,t,i,r):o.updateHeight(e,t,i),r&&r.from<=a+s.length&&r.more?c=s=s.updateHeight(e,a,i,r):s.updateHeight(e,a,i),c?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function MG(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof fA&&(i=n[e+1])instanceof fA&&n.splice(e-1,3,new fA(t.length+1+i.length))}const i2e=5;class OU{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof hf?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new hf(i-this.pos,-1,0)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,o=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let s=t-e;i.block?this.addBlock(new vne(s,r,i)):(s||o||r>=i2e)&&this.addLineDeco(r,o,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new hf(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,t){let i=new fA(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof hf)return e;let t=new hf(0,-1,0);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof hf)&&!this.isCovered?this.nodes.push(new hf(0,-1,0)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof hf&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,t,i,r){let o=new OU(i,e);return mo.spans(t,i,r,o,0),o.finish(i)}}function r2e(n,e,t){let i=new o2e;return mo.compare(n,e,t,i,0),i.changes}class o2e{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,r){(e<t||i&&i.heightRelevant||r&&r.heightRelevant)&&qx(e,t,this.changes,5)}}function s2e(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,r=i.defaultView||window,o=Math.max(0,t.left),s=Math.min(r.innerWidth,t.right),a=Math.max(0,t.top),c=Math.min(r.innerHeight,t.bottom);for(let d=n.parentNode;d&&d!=i.body;)if(d.nodeType==1){let m=d,v=window.getComputedStyle(m);if((m.scrollHeight>m.clientHeight||m.scrollWidth>m.clientWidth)&&v.overflow!="visible"){let M=m.getBoundingClientRect();o=Math.max(o,M.left),s=Math.min(s,M.right),a=Math.max(a,M.top),c=Math.min(d==n.parentNode?r.innerHeight:c,M.bottom)}d=v.position=="absolute"||v.position=="fixed"?m.offsetParent:m.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:o-t.left,right:Math.max(o,s)-t.left,top:a-(t.top+e),bottom:Math.max(a,c)-(t.top+e)}}function a2e(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function l2e(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class tI{constructor(e,t,i,r){this.from=e,this.to=t,this.size=i,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=t[i];if(r.from!=o.from||r.to!=o.to||r.size!=o.size)return!1}return!0}draw(e,t){return vr.replace({widget:new u2e(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class u2e extends q1{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class wG{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=SG,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ca.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(wU).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new Jxe(t),this.stateDeco=EG(e),this.heightMap=Dh.empty().applyChanges(this.stateDeco,As.empty,this.heightOracle.setDoc(e.doc),[new bp(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=vr.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let r=i?t.head:t.anchor;if(!e.some(({from:o,to:s})=>r>=o&&r<=s)){let{from:o,to:s}=this.lineBlockAt(r);e.push(new ww(o,s))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?SG:new IU(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(t4(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=EG(this.state);let r=e.changedRanges,o=bp.extendWithRanges(r,r2e(i,this.stateDeco,e?e.changes:Ac.empty(this.state.doc.length))),s=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);xG(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=s||_2)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=s);let c=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<c.from||t.range.head>c.to)||!this.viewportIsAppropriate(c))&&(c=this.getViewport(0,t));let d=c.from!=this.viewport.from||c.to!=this.viewport.to;this.viewport=c,e.flags|=this.updateForViewport(),(d||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&(e.selectionSet||e.focusChanged)&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Zte)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),r=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Ca.RTL:Ca.LTR;let s=this.heightOracle.mustRefreshForWrapping(o)||this.mustMeasureContent,a=t.getBoundingClientRect(),c=s||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let d=0,m=0;if(a.width&&a.height){let{scaleX:re,scaleY:ie}=Rte(t,a);(re>.005&&Math.abs(this.scaleX-re)>.005||ie>.005&&Math.abs(this.scaleY-ie)>.005)&&(this.scaleX=re,this.scaleY=ie,d|=16,s=c=!0)}let v=(parseInt(i.paddingTop)||0)*this.scaleY,M=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=v||this.paddingBottom!=M)&&(this.paddingTop=v,this.paddingBottom=M,d|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(c=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=16);let B=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=B&&(this.scrollAnchorHeight=-1,this.scrollTop=B),this.scrolledToBottom=Lte(e.scrollDOM);let P=(this.printing?l2e:s2e)(t,this.paddingTop),U=P.top-this.pixelViewport.top,z=P.bottom-this.pixelViewport.bottom;this.pixelViewport=P;let V=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(V!=this.inView&&(this.inView=V,V&&(c=!0)),!this.inView&&!this.scrollTarget&&!a2e(e.dom))return 0;let Z=a.width;if((this.contentDOMWidth!=Z||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,d|=16),c){let re=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(re)&&(s=!0),s||r.lineWrapping&&Math.abs(Z-this.contentDOMWidth)>r.charWidth){let{lineHeight:ie,charWidth:te,textHeight:q}=e.docView.measureTextSize();s=ie>0&&r.refresh(o,ie,te,q,Math.max(5,Z/te),re),s&&(e.docView.minWidth=0,d|=16)}U>0&&z>0?m=Math.max(U,z):U<0&&z<0&&(m=Math.min(U,z)),xG();for(let ie of this.viewports){let te=ie.from==this.viewport.from?re:e.docView.measureVisibleLineHeights(ie);this.heightMap=(s?Dh.empty().applyChanges(this.stateDeco,As.empty,this.heightOracle,[new bp(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,s,new e2e(ie.from,te))}_2&&(d|=2)}let X=!this.viewportIsAppropriate(this.viewport,m)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return X&&(d&2&&(d|=this.updateScaler()),this.viewport=this.getViewport(m,this.scrollTarget),d|=this.updateForViewport()),(d&2||X)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,o=this.heightOracle,{visibleTop:s,visibleBottom:a}=this,c=new ww(r.lineAt(s-i*1e3,La.ByHeight,o,0,0).from,r.lineAt(a+(1-i)*1e3,La.ByHeight,o,0,0).to);if(t){let{head:d}=t.range;if(d<c.from||d>c.to){let m=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),v=r.lineAt(d,La.ByPos,o,0,0),M;t.y=="center"?M=(v.top+v.bottom)/2-m/2:t.y=="start"||t.y=="nearest"&&d<c.from?M=v.top:M=v.bottom-m,c=new ww(r.lineAt(M-1e3/2,La.ByHeight,o,0,0).from,r.lineAt(M+m+1e3/2,La.ByHeight,o,0,0).to)}}return c}mapViewport(e,t){let i=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new ww(this.heightMap.lineAt(i,La.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,La.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,La.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,La.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:a}=this;return(e==0||r<=s-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||o>=a+Math.max(10,Math.min(i,250)))&&r>s-2*1e3&&o<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let r of e)t.touchesRange(r.from,r.to)||i.push(new tI(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,o=r>>1,s=r<<1;if(this.defaultTextDirection!=Ca.LTR&&!i)return[];let a=[],c=(m,v,M,B)=>{if(v-m<o)return;let P=this.state.selection.main,U=[P.from];P.empty||U.push(P.to);for(let V of U)if(V>m&&V<v){c(m,V-10,M,B),c(V+10,v,M,B);return}let z=A2e(e,V=>V.from>=M.from&&V.to<=M.to&&Math.abs(V.from-m)<o&&Math.abs(V.to-v)<o&&!U.some(Z=>V.from<Z&&V.to>Z));if(!z){if(v<M.to&&t&&i&&t.visibleRanges.some(X=>X.from<=v&&X.to>=v)){let X=t.moveToLineBoundary(Sn.cursor(v),!1,!0).head;X>m&&(v=X)}let V=this.gapSize(M,m,v,B),Z=i||V<2e6?V:2e6;z=new tI(m,v,V,Z)}a.push(z)},d=m=>{if(m.length<s||m.type!=gA.Text)return;let v=c2e(m.from,m.to,this.stateDeco);if(v.total<s)return;let M=this.scrollTarget?this.scrollTarget.range.head:null,B,P;if(i){let U=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,z,V;if(M!=null){let Z=Ew(v,M),X=((this.visibleBottom-this.visibleTop)/2+U)/m.height;z=Z-X,V=Z+X}else z=(this.visibleTop-m.top-U)/m.height,V=(this.visibleBottom-m.top+U)/m.height;B=Sw(v,z),P=Sw(v,V)}else{let U=v.total*this.heightOracle.charWidth,z=r*this.heightOracle.charWidth,V=0;if(U>2e6)for(let te of e)te.from>=m.from&&te.from<m.to&&te.size!=te.displaySize&&te.from*this.heightOracle.charWidth+V<this.pixelViewport.left&&(V=te.size-te.displaySize);let Z=this.pixelViewport.left+V,X=this.pixelViewport.right+V,re,ie;if(M!=null){let te=Ew(v,M),q=((X-Z)/2+z)/U;re=te-q,ie=te+q}else re=(Z-z)/U,ie=(X+z)/U;B=Sw(v,re),P=Sw(v,ie)}B>m.from&&c(m.from,B,m,v),P<m.to&&c(P,m.to,m,v)};for(let m of this.viewportLines)Array.isArray(m.type)?m.type.forEach(d):d(m);return a}gapSize(e,t,i,r){let o=Ew(r,i)-Ew(r,t);return this.heightOracle.lineWrapping?e.height*o:r.total*this.heightOracle.charWidth*o}updateLineGaps(e){tI.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=vr.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];mo.spans(t,this.viewport.from,this.viewport.to,{span(o,s){i.push({from:o,to:s})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let o=0;o<i.length&&!(r&8);o++){let s=this.visibleRanges[o],a=i[o];(s.from!=a.from||s.to!=a.to)&&(r|=4,e&&e.mapPos(s.from,-1)==a.from&&e.mapPos(s.to,1)==a.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||t4(this.heightMap.lineAt(e,La.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||t4(this.heightMap.lineAt(this.scaler.fromDOM(e),La.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return t4(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ww{constructor(e,t){this.from=e,this.to=t}}function c2e(n,e,t){let i=[],r=n,o=0;return mo.spans(t,n,e,{span(){},point(s,a){s>r&&(i.push({from:r,to:s}),o+=s-r),r=a}},20),r<e&&(i.push({from:r,to:e}),o+=e-r),{total:o,ranges:i}}function Sw({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let r=0;;r++){let{from:o,to:s}=e[r],a=s-o;if(i<=a)return o+i;i-=a}}function Ew(n,e){let t=0;for(let{from:i,to:r}of n.ranges){if(e<=r){t+=e-i;break}t+=r-i}return t/n.total}function A2e(n,e){for(let t of n)if(e(t))return t}const SG={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};function EG(n){let e=n.facet(wB).filter(i=>typeof i!="function"),t=n.facet(SU).filter(i=>typeof i!="function");return t.length&&e.push(mo.join(t)),e}class IU{constructor(e,t,i){let r=0,o=0,s=0;this.viewports=i.map(({from:a,to:c})=>{let d=t.lineAt(a,La.ByPos,e,0,0).top,m=t.lineAt(c,La.ByPos,e,0,0).bottom;return r+=m-d,{from:a,to:c,top:d,bottom:m,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let a of this.viewports)a.domTop=s+(a.top-o)*this.scale,s=a.domBottom=a.domTop+(a.bottom-a.top),o=a.bottom}toDOM(e){for(let t=0,i=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return r+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,r=o.domBottom}}fromDOM(e){for(let t=0,i=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return i+(e-r)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,r=o.domBottom}}eq(e){return e instanceof IU?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function t4(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new Bm(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(r=>t4(r,e)):n._content)}const Bw=Bi.define({combine:n=>n.join(" ")}),xR=Bi.define({combine:n=>n.indexOf(!0)>-1}),MR=kv.newName(),bne=kv.newName(),Cne=kv.newName(),_ne={"&light":"."+bne,"&dark":"."+Cne};function wR(n,e,t){return new kv(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return n;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):n+" "+i}})}const h2e=wR("."+MR,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},_ne),d2e={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},nI=Ti.ie&&Ti.ie_version<=11;class f2e{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Q_e,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(Ti.ie&&Ti.ie_version<=11||Ti.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Ti.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Ti.chrome&&Ti.chrome_version<126)&&(this.editContext=new m2e(e),e.state.facet(B1)&&(e.contentDOM.editContext=this.editContext.editContext)),nI&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(B1)?i.root.activeElement!=this.dom:!xS(this.dom,r))return;let o=r.anchorNode&&i.docView.tile.nearest(r.anchorNode);if(o&&o.isWidget()&&o.widget.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Ti.ie&&Ti.ie_version<=11||Ti.android&&Ti.chrome)&&!i.state.selection.main.empty&&r.focusNode&&x4(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=g5(e.root);if(!t)return!1;let i=Ti.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&p2e(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let r=xS(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Y_e(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,d2e),nI&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),nI&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let r=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&Yx(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,r=!1;for(let o of e){let s=this.readMutation(o);s&&(s.typeOver&&(r=!0),t==-1?{from:t,to:i}=s:(t=Math.min(s.from,t),i=Math.max(s.to,i)))}return{from:t,to:i,typeOver:r}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),r=this.selectionChanged&&xS(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new Dxe(this.view,e,t,i);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,r=une(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.tile.nearest(e.target);if(!t||t.isWidget())return null;if(t.markDirty(e.type=="attributes"),e.type=="childList"){let i=BG(t,e.previousSibling||e.target.previousSibling,-1),r=BG(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(B1)!=e.state.facet(B1)&&(e.view.contentDOM.editContext=e.state.facet(B1)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function BG(n,e,t){for(;e;){let i=Wu.get(e);if(i&&i.parent==n)return i;let r=e.parentNode;e=r!=n.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function OG(n,e){let t=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,s=n.docView.domAtPos(n.state.selection.main.anchor,1);return x4(s.node,s.offset,r,o)&&([t,i,r,o]=[r,o,t,i]),{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:o}}function p2e(n,e){if(e.getComposedRanges){let r=e.getComposedRanges(n.root)[0];if(r)return OG(n,r)}let t=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),t?OG(n,t):null}class m2e{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:o,head:s}=r,a=this.toEditorPos(i.updateRangeStart),c=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let d=c-a>i.text.length;a==this.from&&o<this.from?a=o:c==this.to&&o>this.to&&(c=o);let m=cne(e.state.sliceDoc(a,c),i.text,(d?r.from:r.to)-a,d?"end":null);if(!m){let M=Sn.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));M.main.eq(r)||e.dispatch({selection:M,userEvent:"select"});return}let v={from:m.from+a,to:m.toA+a,insert:As.of(i.text.slice(m.from,m.toB).split(`
`))};if((Ti.mac||Ti.android)&&v.from==s-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(v={from:a,to:c,insert:As.of([i.text.replace("."," ")])}),this.pendingContextChange=v,!e.state.readOnly){let M=this.to-this.from+(v.to-v.from+v.insert.length);BU(e,v,Sn.single(this.toEditorPos(i.selectionStart,M),this.toEditorPos(i.selectionEnd,M)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),v.from<v.to&&!v.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(t.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let r=[],o=null;for(let s=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);s<a;s++){let c=e.coordsForChar(s);o=c&&new DOMRect(c.left,c.top,c.right-c.left,c.bottom-c.top)||o||new DOMRect,r.push(o)}t.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let o of i.getTextFormats()){let s=o.underlineStyle,a=o.underlineThickness;if(!/none/i.test(s)&&!/none/i.test(a)){let c=this.toEditorPos(o.rangeStart),d=this.toEditorPos(o.rangeEnd);if(c<d){let m=`text-decoration: underline ${/^[a-z]/.test(s)?s+" ":s=="Dashed"?"dashed ":s=="Squiggle"?"wavy ":""}${/thin/i.test(a)?1:2}px`;r.push(vr.mark({attributes:{style:m}}).range(c,d))}}}e.dispatch({effects:Jte.of(vr.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=g5(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((o,s,a,c,d)=>{if(i)return;let m=d.length-(s-o);if(r&&s>=r.to)if(r.from==o&&r.to==s&&r.insert.eq(d)){r=this.pendingContextChange=null,t+=m,this.to+=m;return}else r=null,this.revertPending(e.state);if(o+=t,s+=t,s<=this.from)this.from+=m,this.to+=m;else if(o<this.to){if(o<this.from||s>this.to||this.to-this.from+d.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(s),d.toString()),this.to+=m}t+=m}),r&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class wi{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(o=>i(o,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||q_e(e.parent)||document,this.viewState=new wG(e.state||as.create(e)),e.scrollTo&&e.scrollTo.is(_w)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Bx).map(r=>new H8(r));for(let r of this.plugins)r.update(this);this.observer=new f2e(this),this.inputState=new Uxe(this),this.inputState.ensureHandlers(this.plugins),this.docView=new AG(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>{this.viewState.mustMeasureContent=!0,this.requestMeasure()})}dispatch(...e){let t=e.length==1&&e[0]instanceof pc?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,r,o=this.state;for(let M of e){if(M.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=M.state}if(this.destroyed){this.viewState.state=o;return}let s=this.hasFocus,a=0,c=null;e.some(M=>M.annotation(mne))?(this.inputState.notifiedFocused=s,a=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,c=gne(o,s),c||(a=1));let d=this.observer.delayedAndroidKey,m=null;if(d?(this.observer.clearDelayedAndroidKey(),m=this.observer.readChange(),(m&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(m=null)):this.observer.clear(),o.facet(as.phrases)!=this.state.facet(as.phrases))return this.setState(o);r=PE.create(this,o,e),r.flags|=a;let v=this.viewState.scrollTarget;try{this.updateState=2;for(let M of e){if(v&&(v=v.map(M.changes)),M.scrollIntoView){let{main:B}=M.state.selection;v=new Vx(B.empty?B:Sn.cursor(B.head,B.head>B.anchor?-1:1))}for(let B of M.effects)B.is(_w)&&(v=B.value.clip(this.state))}this.viewState.update(r,v),this.bidiCache=FE.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(J3)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(M=>M.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Bw)!=r.state.facet(Bw)&&(this.viewState.mustMeasureContent=!0),(t||i||v||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!r.empty)for(let M of this.state.facet(yR))try{M(r)}catch(B){kh(this.state,B,"update listener")}(c||m)&&Promise.resolve().then(()=>{c&&this.state==c.startState&&this.dispatch(c),m&&!une(this,m)&&d.force&&Yx(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new wG(e),this.plugins=e.facet(Bx).map(i=>new H8(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new AG(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Bx),i=e.state.facet(Bx);if(t!=i){let r=[];for(let o of i){let s=t.indexOf(o);if(s<0)r.push(new H8(o));else{let a=this.plugins[s];a.mustUpdate=e,r.push(a)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){kh(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:s}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(s=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(s<0)if(Lte(i))o=-1,s=this.viewState.heightMap.height;else{let B=this.viewState.scrollAnchorAt(r);o=B.from,s=B.top}this.updateState=1;let c=this.viewState.measure(this);if(!c&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];c&4||([this.measureRequests,d]=[d,this.measureRequests]);let m=d.map(B=>{try{return B.read(this)}catch(P){return kh(this.state,P),IG}}),v=PE.create(this,this.state,[]),M=!1;v.flags|=c,t?t.flags|=c:t=v,this.updateState=2,v.empty||(this.updatePlugins(v),this.inputState.update(v),this.updateAttrs(),M=this.docView.update(v),M&&this.docViewUpdate());for(let B=0;B<d.length;B++)if(m[B]!=IG)try{let P=d[B];P.write&&P.write(m[B],this)}catch(P){kh(this.state,P)}if(M&&this.docView.updateSelection(!0),!v.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,s=-1;continue}else{let P=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-s;if(P>1||P<-1){r=r+P,i.scrollTop=r/this.scaleY,s=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(yR))a(t)}get themeClasses(){return MR+" "+(this.state.facet(xR)?Cne:bne)+" "+this.state.facet(Bw)}updateAttrs(){let e=TG(this,ene,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(B1)?"true":"false",class:"cm-content",style:`${Ti.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),TG(this,wU,t);let i=this.observer.ignore(()=>{let r=oG(this.contentDOM,this.contentAttrs,t),o=oG(this.dom,this.editorAttrs,e);return r||o});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let r of i.effects)if(r.is(wi.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(J3);let e=this.state.facet(wi.cspNonce);kv.mount(this.root,this.styleModules.concat(h2e).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return eI(this,e,hG(this,e,t,i))}moveByGroup(e,t){return eI(this,e,hG(this,e,t,i=>Bxe(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),o=i[t?i.length-1:0];return Sn.cursor(o.side(t,r)+e.from,o.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,i=!0){return Exe(this,e,t,i)}moveVertically(e,t,i){return eI(this,e,Oxe(this,e,t,i))}domAtPos(e,t=1){return this.docView.domAtPos(e,t)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){this.readMeasured();let i=CR(this,e,t);return i&&i.pos}posAndSideAtCoords(e,t=!0){return this.readMeasured(),CR(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),o=this.bidiSpans(r),s=o[O1.find(o,e-r.from,-1,t)];return RE(i,s.dir==Ca.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Hte)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>g2e)return Nte(e.length);let t=this.textDirectionAt(e.from),i;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t&&(o.fresh||jte(o.isolates,i=lG(this,e))))return o.order;i||(i=lG(this,e));let r=exe(e.text,t,i);return this.bidiCache.push(new FE(e.from,e.to,t,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ti.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Pte(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return _w.of(new Vx(typeof e=="number"?Sn.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return _w.of(new Vx(Sn.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return yu.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return yu.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=kv.newName(),r=[Bw.of(i),J3.of(wR(`.${i}`,e))];return t&&t.dark&&r.push(xR.of(!0)),r}static baseTheme(e){return VC.lowest(J3.of(wR("."+MR,e,_ne)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),r=i&&Wu.get(i)||Wu.get(e);return((t=r?.root)===null||t===void 0?void 0:t.view)||null}}wi.styleModule=J3;wi.inputHandler=Vte;wi.clipboardInputFilter=xU;wi.clipboardOutputFilter=MU;wi.scrollHandler=Xte;wi.focusChangeEffect=$te;wi.perLineTextDirection=Hte;wi.exceptionSink=Yte;wi.updateListener=yR;wi.editable=B1;wi.mouseSelectionStyle=qte;wi.dragMovesSelection=Qte;wi.clickAddsSelectionRange=Wte;wi.decorations=wB;wi.blockWrappers=tne;wi.outerDecorations=SU;wi.atomicRanges=xM;wi.bidiIsolatedRanges=nne;wi.scrollMargins=ine;wi.darkTheme=xR;wi.cspNonce=Bi.define({combine:n=>n.length?n[0]:""});wi.contentAttributes=wU;wi.editorAttributes=ene;wi.lineWrapping=wi.contentAttributes.of({class:"cm-lineWrapping"});wi.announce=eo.define();const g2e=4096,IG={};class FE{constructor(e,t,i,r,o,s){this.from=e,this.to=t,this.dir=i,this.isolates=r,this.fresh=o,this.order=s}static update(e,t){if(t.empty&&!e.some(o=>o.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:Ca.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let s=e[o];s.dir==r&&!t.touchesRange(s.from,s.to)&&i.push(new FE(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return i}}function TG(n,e,t){for(let i=n.state.facet(e),r=i.length-1;r>=0;r--){let o=i[r],s=typeof o=="function"?o(n):o;s&&bU(s,t)}return t}const y2e=Ti.mac?"mac":Ti.windows?"win":Ti.linux?"linux":"key";function v2e(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let r,o,s,a;for(let c=0;c<t.length-1;++c){const d=t[c];if(/^(cmd|meta|m)$/i.test(d))a=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))o=!0;else if(/^s(hift)?$/i.test(d))s=!0;else if(/^mod$/i.test(d))e=="mac"?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(i="Alt-"+i),o&&(i="Ctrl-"+i),a&&(i="Meta-"+i),s&&(i="Shift-"+i),i}function Ow(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const b2e=VC.default(wi.domEventHandlers({keydown(n,e){return Mne(xne(e.state),n,e,"editor")}})),TU=Bi.define({enables:b2e}),kG=new WeakMap;function xne(n){let e=n.facet(TU),t=kG.get(e);return t||kG.set(e,t=x2e(e.reduce((i,r)=>i.concat(r),[]))),t}function C2e(n,e,t){return Mne(xne(n.state),e,n,t)}let av=null;const _2e=4e3;function x2e(n,e=y2e){let t=Object.create(null),i=Object.create(null),r=(s,a)=>{let c=i[s];if(c==null)i[s]=a;else if(c!=a)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,a,c,d,m)=>{var v,M;let B=t[s]||(t[s]=Object.create(null)),P=a.split(/ (?!$)/).map(V=>v2e(V,e));for(let V=1;V<P.length;V++){let Z=P.slice(0,V).join(" ");r(Z,!0),B[Z]||(B[Z]={preventDefault:!0,stopPropagation:!1,run:[X=>{let re=av={view:X,prefix:Z,scope:s};return setTimeout(()=>{av==re&&(av=null)},_2e),!0}]})}let U=P.join(" ");r(U,!1);let z=B[U]||(B[U]={preventDefault:!1,stopPropagation:!1,run:((M=(v=B._any)===null||v===void 0?void 0:v.run)===null||M===void 0?void 0:M.slice())||[]});c&&z.run.push(c),d&&(z.preventDefault=!0),m&&(z.stopPropagation=!0)};for(let s of n){let a=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let d of a){let m=t[d]||(t[d]=Object.create(null));m._any||(m._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:v}=s;for(let M in m)m[M].run.push(B=>v(B,SR))}let c=s[e]||s.key;if(c)for(let d of a)o(d,c,s.run,s.preventDefault,s.stopPropagation),s.shift&&o(d,"Shift-"+c,s.shift,s.preventDefault,s.stopPropagation)}return t}let SR=null;function Mne(n,e,t,i){SR=e;let r=U_e(e),o=xd(r,0),s=ig(o)==r.length&&r!=" ",a="",c=!1,d=!1,m=!1;av&&av.view==t&&av.scope==i&&(a=av.prefix+" ",hne.indexOf(e.keyCode)<0&&(d=!0,av=null));let v=new Set,M=z=>{if(z){for(let V of z.run)if(!v.has(V)&&(v.add(V),V(t)))return z.stopPropagation&&(m=!0),!0;z.preventDefault&&(z.stopPropagation&&(m=!0),d=!0)}return!1},B=n[i],P,U;return B&&(M(B[a+Ow(r,e,!s)])?c=!0:s&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ti.windows&&e.ctrlKey&&e.altKey)&&!(Ti.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(P=Dv[e.keyCode])&&P!=r?(M(B[a+Ow(P,e,!0)])||e.shiftKey&&(U=p5[e.keyCode])!=r&&U!=P&&M(B[a+Ow(U,e,!1)]))&&(c=!0):s&&e.shiftKey&&M(B[a+Ow(r,e,!0)])&&(c=!0),!c&&M(B._any)&&(c=!0)),d&&(c=!0),c&&m&&e.stopPropagation(),SR=null,c}class MM{constructor(e,t,i,r,o){this.className=e,this.left=t,this.top=i,this.width=r,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let o=wne(e);return[new MM(t,r.left-o.left,r.top-o.top,null,r.bottom-r.top)]}else return M2e(e,t,i)}}function wne(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Ca.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function DG(n,e,t,i){let r=n.coordsAtPos(e,t*2);if(!r)return i;let o=n.dom.getBoundingClientRect(),s=(r.top+r.bottom)/2,a=n.posAtCoords({x:o.left+1,y:s}),c=n.posAtCoords({x:o.right-1,y:s});return a==null||c==null?i:{from:Math.max(i.from,Math.min(a,c)),to:Math.min(i.to,Math.max(a,c))}}function M2e(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),r=Math.min(t.to,n.viewport.to),o=n.textDirection==Ca.LTR,s=n.contentDOM,a=s.getBoundingClientRect(),c=wne(n),d=s.querySelector(".cm-line"),m=d&&window.getComputedStyle(d),v=a.left+(m?parseInt(m.paddingLeft)+Math.min(0,parseInt(m.textIndent)):0),M=a.right-(m?parseInt(m.paddingRight):0),B=bR(n,i,1),P=bR(n,r,-1),U=B.type==gA.Text?B:null,z=P.type==gA.Text?P:null;if(U&&(n.lineWrapping||B.widgetLineBreaks)&&(U=DG(n,i,1,U)),z&&(n.lineWrapping||P.widgetLineBreaks)&&(z=DG(n,r,-1,z)),U&&z&&U.from==z.from&&U.to==z.to)return Z(X(t.from,t.to,U));{let ie=U?X(t.from,null,U):re(B,!1),te=z?X(null,t.to,z):re(P,!0),q=[];return(U||B).to<(z||P).from-(U&&z?1:0)||B.widgetLineBreaks>1&&ie.bottom+n.defaultLineHeight/2<te.top?q.push(V(v,ie.bottom,M,te.top)):ie.bottom<te.top&&n.elementAtHeight((ie.bottom+te.top)/2).type==gA.Text&&(ie.bottom=te.top=(ie.bottom+te.top)/2),Z(ie).concat(q).concat(Z(te))}function V(ie,te,q,le){return new MM(e,ie-c.left,te-c.top,q-ie,le-te)}function Z({top:ie,bottom:te,horizontal:q}){let le=[];for(let ce=0;ce<q.length;ce+=2)le.push(V(q[ce],ie,q[ce+1],te));return le}function X(ie,te,q){let le=1e9,ce=-1e9,ve=[];function ge(Te,Fe,Ie,Ye,At){let mt=n.coordsAtPos(Te,Te==q.to?-2:2),Ue=n.coordsAtPos(Ie,Ie==q.from?2:-2);!mt||!Ue||(le=Math.min(mt.top,Ue.top,le),ce=Math.max(mt.bottom,Ue.bottom,ce),At==Ca.LTR?ve.push(o&&Fe?v:mt.left,o&&Ye?M:Ue.right):ve.push(!o&&Ye?v:Ue.left,!o&&Fe?M:mt.right))}let Ee=ie??q.from,xe=te??q.to;for(let Te of n.visibleRanges)if(Te.to>Ee&&Te.from<xe)for(let Fe=Math.max(Te.from,Ee),Ie=Math.min(Te.to,xe);;){let Ye=n.state.doc.lineAt(Fe);for(let At of n.bidiSpans(Ye)){let mt=At.from+Ye.from,Ue=At.to+Ye.from;if(mt>=Ie)break;Ue>Fe&&ge(Math.max(mt,Fe),ie==null&&mt<=Ee,Math.min(Ue,Ie),te==null&&Ue>=xe,At.dir)}if(Fe=Ye.to+1,Fe>=Ie)break}return ve.length==0&&ge(Ee,ie==null,xe,te==null,n.textDirection),{top:le,bottom:ce,horizontal:ve}}function re(ie,te){let q=a.top+(te?ie.top:ie.bottom);return{top:q,bottom:q,horizontal:[]}}}function w2e(n,e){return n.constructor==e.constructor&&n.eq(e)}class S2e{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(SS)!=e.state.facet(SS)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(SS);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!w2e(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[i].constructor&&r.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(r.draw(),t);for(;t;){let r=t.nextSibling;t.remove(),t=r}this.drawn=e,Ti.safari&&Ti.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const SS=Bi.define();function Sne(n){return[yu.define(e=>new S2e(e,n)),SS.of(n)]}const v5=Bi.define({combine(n){return Wm(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function E2e(n={}){return[v5.of(n),B2e,O2e,I2e,Zte.of(!0)]}function Ene(n){return n.startState.facet(v5)!=n.state.facet(v5)}const B2e=Sne({above:!0,markers(n){let{state:e}=n,t=e.facet(v5),i=[];for(let r of e.selection.ranges){let o=r==e.selection.main;if(r.empty||t.drawRangeCursor){let s=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:Sn.cursor(r.head,r.head>r.anchor?-1:1);for(let c of MM.forRange(n,s,a))i.push(c)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Ene(n);return t&&RG(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){RG(e.state,n)},class:"cm-cursorLayer"});function RG(n,e){e.style.animationDuration=n.facet(v5).cursorBlinkRate+"ms"}const O2e=Sne({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:MM.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||Ene(n)},class:"cm-selectionLayer"}),I2e=VC.highest(wi.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),Bne=eo.define({map(n,e){return n==null?null:e.mapPos(n)}}),n4=mc.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(Bne)?i.value:t,n)}}),T2e=yu.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(n4);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(n4)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(n4),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(n4)!=n&&this.view.dispatch({effects:Bne.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function k2e(){return[n4,T2e]}function PG(n,e,t,i,r){e.lastIndex=0;for(let o=n.iterRange(t,i),s=t,a;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;a=e.exec(o.value);)r(s+a.index,a)}function D2e(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:r,to:o}of t)r=Math.max(n.state.doc.lineAt(r).from,r-e),o=Math.min(n.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=o:i.push({from:r,to:o});return i}class R2e{constructor(e){const{regexp:t,decoration:i,decorate:r,boundary:o,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(a,c,d,m)=>r(m,d,d+a[0].length,a,c);else if(typeof i=="function")this.addMatch=(a,c,d,m)=>{let v=i(a,c,d);v&&m(d,d+a[0].length,v)};else if(i)this.addMatch=(a,c,d,m)=>m(d,d+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(e){let t=new z1,i=t.add.bind(t);for(let{from:r,to:o}of D2e(e,this.maxLength))PG(e.state.doc,this.regexp,r,o,(s,a)=>this.addMatch(a,e,s,i));return t.finish()}updateDeco(e,t){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((o,s,a,c)=>{c>=e.view.viewport.from&&a<=e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(c,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),i,r):t}updateRange(e,t,i,r){for(let o of e.visibleRanges){let s=Math.max(o.from,i),a=Math.min(o.to,r);if(a>=s){let c=e.state.doc.lineAt(s),d=c.to<a?e.state.doc.lineAt(a):c,m=Math.max(o.from,c.from),v=Math.min(o.to,d.to);if(this.boundary){for(;s>c.from;s--)if(this.boundary.test(c.text[s-1-c.from])){m=s;break}for(;a<d.to;a++)if(this.boundary.test(d.text[a-d.from])){v=a;break}}let M=[],B,P=(U,z,V)=>M.push(V.range(U,z));if(c==d)for(this.regexp.lastIndex=m-c.from;(B=this.regexp.exec(c.text))&&B.index<v-c.from;)this.addMatch(B,e,B.index+c.from,P);else PG(e.state.doc,this.regexp,m,v,(U,z)=>this.addMatch(z,e,U,P));t=t.update({filterFrom:m,filterTo:v,filter:(U,z)=>U<m||z>v,add:M})}}return t}}const ER=/x/.unicode!=null?"gu":"g",P2e=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,ER),L2e={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let iI=null;function U2e(){var n;if(iI==null&&typeof document<"u"&&document.body){let e=document.body.style;iI=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return iI||!1}const ES=Bi.define({combine(n){let e=Wm(n,{render:null,specialChars:P2e,addSpecialChars:null});return(e.replaceTabs=!U2e())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,ER)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,ER)),e}});function K2e(n={}){return[ES.of(n),F2e()]}let LG=null;function F2e(){return LG||(LG=yu.fromClass(class{constructor(n){this.view=n,this.decorations=vr.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(ES)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new R2e({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:r}=t.state,o=xd(e[0],0);if(o==9){let s=r.lineAt(i),a=t.state.tabSize,c=z2(s.text,a,i-s.from);return vr.replace({widget:new G2e((a-c%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=vr.replace({widget:new N2e(n,o)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(ES);n.startState.facet(ES)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const z2e="";function j2e(n){return n>=32?z2e:n==10?"":String.fromCharCode(9216+n)}class N2e extends q1{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=j2e(this.code),i=e.state.phrase("Control character")+" "+(L2e[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,t);if(r)return r;let o=document.createElement("span");return o.textContent=t,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class G2e extends q1{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function W2e(){return q2e}const Q2e=vr.line({class:"cm-activeLine"}),q2e=yu.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let r=n.lineBlockAt(i.head);r.from>e&&(t.push(Q2e.range(r.from)),e=r.from)}return vr.set(t)}},{decorations:n=>n.decorations}),BR=2e3;function Y2e(n,e,t){let i=Math.min(e.line,t.line),r=Math.max(e.line,t.line),o=[];if(e.off>BR||t.off>BR||e.col<0||t.col<0){let s=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let c=i;c<=r;c++){let d=n.doc.line(c);d.length<=a&&o.push(Sn.range(d.from+s,d.to+a))}}else{let s=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let c=i;c<=r;c++){let d=n.doc.line(c),m=aR(d.text,s,n.tabSize,!0);if(m<0)o.push(Sn.cursor(d.to));else{let v=aR(d.text,a,n.tabSize);o.push(Sn.range(d.from+m,d.from+v))}}}return o}function V2e(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function UG(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),r=t-i.from,o=r>BR?-1:r==i.length?V2e(n,e.clientX):z2(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:o,off:r}}function $2e(n,e){let t=UG(n,e),i=n.state.selection;return t?{update(r){if(r.docChanged){let o=r.changes.mapPos(r.startState.doc.line(t.line).from),s=r.state.doc.lineAt(o);t={line:s.number,col:t.col,off:Math.min(t.off,s.length)},i=i.map(r.changes)}},get(r,o,s){let a=UG(n,r);if(!a)return i;let c=Y2e(n.state,t,a);return c.length?s?Sn.create(c.concat(i.ranges)):Sn.create(c):i}}:null}function H2e(n){let e=(t=>t.altKey&&t.button==0);return wi.mouseSelectionStyle.of((t,i)=>e(i)?$2e(t,i):null)}const Z2e={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},X2e={style:"cursor: crosshair"};function J2e(n={}){let[e,t]=Z2e[n.key||"Alt"],i=yu.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)},mousemove(r){this.set(t(r))}}});return[i,wi.contentAttributes.of(r=>{var o;return!((o=r.plugin(i))===null||o===void 0)&&o.isDown?X2e:null})]}const Iw="-10000px";class One{constructor(e,t,i,r){this.facet=t,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(s=>s);let o=null;this.tooltipViews=this.tooltips.map(s=>o=i(s,o))}update(e,t){var i;let r=e.state.facet(this.facet),o=r.filter(c=>c);if(r===this.input){for(let c of this.tooltipViews)c.update&&c.update(e);return!1}let s=[],a=t?[]:null;for(let c=0;c<o.length;c++){let d=o[c],m=-1;if(d){for(let v=0;v<this.tooltips.length;v++){let M=this.tooltips[v];M&&M.create==d.create&&(m=v)}if(m<0)s[c]=this.createTooltipView(d,c?s[c-1]:null),a&&(a[c]=!!d.above);else{let v=s[c]=this.tooltipViews[m];a&&(a[c]=t[m]),v.update&&v.update(e)}}}for(let c of this.tooltipViews)s.indexOf(c)<0&&(this.removeTooltipView(c),(i=c.destroy)===null||i===void 0||i.call(c));return t&&(a.forEach((c,d)=>t[d]=c),t.length=a.length),this.input=r,this.tooltips=o,this.tooltipViews=s,!0}}function e3e(n){let e=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const rI=Bi.define({combine:n=>{var e,t,i;return{position:Ti.ios?"absolute":((e=n.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||e3e}}}),KG=new WeakMap,kU=yu.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(rI);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new One(n,OB,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(rI);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",t.dom.appendChild(r)}return t.dom.style.position=this.position,t.dom.style.top=Iw,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(Ti.safari){let s=o.getBoundingClientRect();t=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}else t=!!o.offsetParent&&o.offsetParent!=this.container.ownerDocument.body}if(t||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(n=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=EU(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,s)=>{let a=this.manager.tooltipViews[s];return a.getCoords?a.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(rI).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:t,space:i,scaleX:r,scaleY:o}=n,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let c=this.manager.tooltips[a],d=this.manager.tooltipViews[a],{dom:m}=d,v=n.pos[a],M=n.size[a];if(!v||c.clip!==!1&&(v.bottom<=Math.max(t.top,i.top)||v.top>=Math.min(t.bottom,i.bottom)||v.right<Math.max(t.left,i.left)-.1||v.left>Math.min(t.right,i.right)+.1)){m.style.top=Iw;continue}let B=c.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,P=B?7:0,U=M.right-M.left,z=(e=KG.get(d))!==null&&e!==void 0?e:M.bottom-M.top,V=d.offset||n3e,Z=this.view.textDirection==Ca.LTR,X=M.width>i.right-i.left?Z?i.left:i.right-M.width:Z?Math.max(i.left,Math.min(v.left-(B?14:0)+V.x,i.right-U)):Math.min(Math.max(i.left,v.left-U+(B?14:0)-V.x),i.right-U),re=this.above[a];!c.strictSide&&(re?v.top-z-P-V.y<i.top:v.bottom+z+P+V.y>i.bottom)&&re==i.bottom-v.bottom>v.top-i.top&&(re=this.above[a]=!re);let ie=(re?v.top-i.top:i.bottom-v.bottom)-P;if(ie<z&&d.resize!==!1){if(ie<this.view.defaultLineHeight){m.style.top=Iw;continue}KG.set(d,z),m.style.height=(z=ie)/o+"px"}else m.style.height&&(m.style.height="");let te=re?v.top-z-P-V.y:v.bottom+P+V.y,q=X+U;if(d.overlap!==!0)for(let le of s)le.left<q&&le.right>X&&le.top<te+z&&le.bottom>te&&(te=re?le.top-z-2-P:le.bottom+P+2);if(this.position=="absolute"?(m.style.top=(te-n.parent.top)/o+"px",FG(m,(X-n.parent.left)/r)):(m.style.top=te/o+"px",FG(m,X/r)),B){let le=v.left+(Z?V.x:-V.x)-(X+14-7);B.style.left=le/r+"px"}d.overlap!==!0&&s.push({left:X,top:te,right:q,bottom:te+z}),m.classList.toggle("cm-tooltip-above",re),m.classList.toggle("cm-tooltip-below",!re),d.positioned&&d.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Iw}},{eventObservers:{scroll(){this.maybeMeasure()}}});function FG(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}const t3e=wi.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),n3e={x:0,y:0},OB=Bi.define({enables:[kU,t3e]}),zE=Bi.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class IB{static create(e){return new IB(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new One(e,zE,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(t===void 0)t=r;else if(t!==r)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const i3e=OB.compute([zE],n=>{let e=n.facet(zE);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:IB.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class r3e{constructor(e,t,i,r,o){this.view=e,this.source=t,this.field=i,this.setHover=r,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.tile.nearest(t.target);if(!i)return;let r,o=1;if(i.isWidget())r=i.posAtStart;else{if(r=e.posAtCoords(t),r==null)return;let a=e.coordsAtPos(r);if(!a||t.y<a.top||t.y>a.bottom||t.x<a.left-e.defaultCharacterWidth||t.x>a.right+e.defaultCharacterWidth)return;let c=e.bidiSpans(e.state.doc.lineAt(r)).find(m=>m.from<=r&&m.to>=r),d=c&&c.dir==Ca.RTL?-1:1;o=t.x<a.left?-d:d}let s=this.source(e,r,o);if(s?.then){let a=this.pending={pos:r};s.then(c=>{this.pending==a&&(this.pending=null,c&&!(Array.isArray(c)&&!c.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(c)?c:[c])}))},c=>kh(e.state,c,"hover tooltip"))}else s&&!(Array.isArray(s)&&!s.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(s)?s:[s])})}get tooltip(){let e=this.view.plugin(kU),t=e?e.manager.tooltips.findIndex(i=>i.create==IB.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:o}=this;if(r.length&&o&&!o3e(o.dom,e)||this.pending){let{pos:s}=r[0]||this.pending,a=(i=(t=r[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:s;(s==a?this.view.posAtCoords(this.lastMove)!=s:!s3e(this.view,s,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),clearTimeout(this.restartTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Tw=4;function o3e(n,e){let{left:t,right:i,top:r,bottom:o}=n.getBoundingClientRect(),s;if(s=n.querySelector(".cm-tooltip-arrow")){let a=s.getBoundingClientRect();r=Math.min(a.top,r),o=Math.max(a.bottom,o)}return e.clientX>=t-Tw&&e.clientX<=i+Tw&&e.clientY>=r-Tw&&e.clientY<=o+Tw}function s3e(n,e,t,i,r,o){let s=n.scrollDOM.getBoundingClientRect(),a=n.documentTop+n.documentPadding.top+n.contentHeight;if(s.left>i||s.right<i||s.top>r||Math.min(s.bottom,a)<r)return!1;let c=n.posAtCoords({x:i,y:r},!1);return c>=e&&c<=t}function a3e(n,e={}){let t=eo.define(),i=mc.define({create(){return[]},update(r,o){if(r.length&&(e.hideOnChange&&(o.docChanged||o.selection)?r=[]:e.hideOn&&(r=r.filter(s=>!e.hideOn(o,s))),o.docChanged)){let s=[];for(let a of r){let c=o.changes.mapPos(a.pos,-1,Oh.TrackDel);if(c!=null){let d=Object.assign(Object.create(null),a);d.pos=c,d.end!=null&&(d.end=o.changes.mapPos(d.end)),s.push(d)}}r=s}for(let s of o.effects)s.is(t)&&(r=s.value),s.is(l3e)&&(r=[]);return r},provide:r=>zE.from(r)});return{active:i,extension:[i,yu.define(r=>new r3e(r,n,i,t,e.hoverTime||300)),i3e]}}function Ine(n,e){let t=n.plugin(kU);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const l3e=eo.define(),zG=Bi.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function b5(n,e){let t=n.plugin(Tne),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const Tne=yu.fromClass(class{constructor(n){this.input=n.state.facet(C5),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(zG);this.top=new kw(n,!0,e.topContainer),this.bottom=new kw(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(zG);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new kw(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new kw(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(C5);if(t!=this.input){let i=t.filter(c=>c),r=[],o=[],s=[],a=[];for(let c of i){let d=this.specs.indexOf(c),m;d<0?(m=c(n.view),a.push(m)):(m=this.panels[d],m.update&&m.update(n)),r.push(m),(m.top?o:s).push(m)}this.specs=i,this.panels=r,this.top.sync(o),this.bottom.sync(s);for(let c of a)c.dom.classList.add("cm-panel"),c.mount&&c.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>wi.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class kw{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=jG(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=jG(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function jG(n){let e=n.nextSibling;return n.remove(),e}const C5=Bi.define({enables:Tne});class Mg extends Tv{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Mg.prototype.elementClass="";Mg.prototype.toDOM=void 0;Mg.prototype.mapMode=Oh.TrackBefore;Mg.prototype.startSide=Mg.prototype.endSide=-1;Mg.prototype.point=!0;const BS=Bi.define(),u3e=Bi.define(),c3e={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>mo.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},w4=Bi.define();function kne(n){return[Dne(),w4.of({...c3e,...n})]}const NG=Bi.define({combine:n=>n.some(e=>e)});function Dne(n){return[A3e]}const A3e=yu.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(w4).map(e=>new WG(n,e)),this.fixed=!n.state.facet(NG);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(NG)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=mo.iter(this.view.state.facet(BS),this.view.viewport.from),i=[],r=this.gutters.map(o=>new h3e(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(o.type)){let s=!0;for(let a of o.type)if(a.type==gA.Text&&s){OR(t,i,a.from);for(let c of r)c.line(this.view,a,i);s=!1}else if(a.widget)for(let c of r)c.widget(this.view,a)}else if(o.type==gA.Text){OR(t,i,o.from);for(let s of r)s.line(this.view,o,i)}else if(o.widget)for(let s of r)s.widget(this.view,o);for(let o of r)o.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet(w4),t=n.state.facet(w4),i=n.docChanged||n.heightChanged||n.viewportChanged||!mo.eq(n.startState.facet(BS),n.state.facet(BS),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(n)&&(i=!0);else{i=!0;let r=[];for(let o of t){let s=e.indexOf(o);s<0?r.push(new WG(this.view,o)):(this.gutters[s].update(n),r.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),r.indexOf(o)<0&&o.destroy();for(let o of r)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=r}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>wi.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let i=t.dom.offsetWidth*e.scaleX,r=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Ca.LTR?{left:i,right:r}:{right:i,left:r}})});function GG(n){return Array.isArray(n)?n:[n]}function OR(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class h3e{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=mo.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:r}=this,o=(t.top-this.height)/e.scaleY,s=t.height/e.scaleY;if(this.i==r.elements.length){let a=new Rne(e,s,o,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,s,o,i);this.height=t.bottom,this.i++}line(e,t,i){let r=[];OR(this.cursor,r,t.from),i.length&&(r=r.concat(i));let o=this.gutter.config.lineMarker(e,t,r);o&&r.unshift(o);let s=this.gutter;r.length==0&&!s.config.renderEmptyElements||this.addElement(e,t,r)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),r=i?[i]:null;for(let o of e.state.facet(u3e)){let s=o(e,t.widget,t);s&&(r||(r=[])).push(s)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class WG{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,r=>{let o=r.target,s;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let c=o.getBoundingClientRect();s=(c.top+c.bottom)/2}else s=r.clientY;let a=e.lineBlockAtHeight(s-e.documentTop);t.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=GG(t.markers(e)),t.initialSpacer&&(this.spacer=new Rne(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=GG(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!mo.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Rne{constructor(e,t,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,r)}update(e,t,i,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),d3e(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let i="cm-gutterElement",r=this.dom.firstChild;for(let o=0,s=0;;){let a=s,c=o<t.length?t[o++]:null,d=!1;if(c){let m=c.elementClass;m&&(i+=" "+m);for(let v=s;v<this.markers.length;v++)if(this.markers[v].compare(c)){a=v,d=!0;break}}else a=this.markers.length;for(;s<a;){let m=this.markers[s++];if(m.toDOM){m.destroy(r);let v=r.nextSibling;r.remove(),r=v}}if(!c)break;c.toDOM&&(d?r=r.nextSibling:this.dom.insertBefore(c.toDOM(e),r)),d&&s++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function d3e(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const f3e=Bi.define(),p3e=Bi.define(),Ox=Bi.define({combine(n){return Wm(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let r in t){let o=i[r],s=t[r];i[r]=o?(a,c,d)=>o(a,c,d)||s(a,c,d):s}return i}})}});class oI extends Mg{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function sI(n,e){return n.state.facet(Ox).formatNumber(e,n.state)}const m3e=w4.compute([Ox],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(f3e)},lineMarker(e,t,i){return i.some(r=>r.toDOM)?null:new oI(sI(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let r of e.state.facet(p3e)){let o=r(e,t,i);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(Ox)!=e.state.facet(Ox),initialSpacer(e){return new oI(sI(e,QG(e.state.doc.lines)))},updateSpacer(e,t){let i=sI(t.view,QG(t.view.state.doc.lines));return i==e.number?e:new oI(i)},domEventHandlers:n.facet(Ox).domEventHandlers,side:"before"}));function g3e(n={}){return[Ox.of(n),Dne(),m3e]}function QG(n){let e=9;for(;e<n;)e=e*10+9;return e}const y3e=new class extends Mg{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},v3e=BS.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.head).from;r>t&&(t=r,e.push(y3e.range(r)))}return mo.of(e)});function b3e(){return v3e}const Pne=1024;let C3e=0;class aI{constructor(e,t){this.from=e,this.to=t}}class Co{constructor(e={}){this.id=C3e++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Td.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}Co.closedBy=new Co({deserialize:n=>n.split(" ")});Co.openedBy=new Co({deserialize:n=>n.split(" ")});Co.group=new Co({deserialize:n=>n.split(" ")});Co.isolate=new Co({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Co.contextHash=new Co({perNode:!0});Co.lookAhead=new Co({perNode:!0});Co.mounted=new Co({perNode:!0});class jE{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[Co.mounted.id]}}const _3e=Object.create(null);class Td{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):_3e,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Td(e.name||"",t,e.id,i);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(r)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Co.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return i=>{for(let r=i.prop(Co.group),o=-1;o<(r?r.length:0);o++){let s=t[o<0?i.name:r[o]];if(s)return s}}}}Td.none=new Td("",Object.create(null),0,8);class DU{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let r=null;for(let o of e){let s=o(i);if(s){r||(r=Object.assign({},i.props));let a=s[1],c=s[0];c.combine&&c.id in r&&(a=c.combine(r[c.id],a)),r[c.id]=a}}t.push(r?new Td(i.name,r,i.id,i.flags):i)}return new DU(t)}}const Dw=new WeakMap,qG=new WeakMap;var Qc;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Qc||(Qc={}));class Gu{constructor(e,t,i,r,o){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,a]of o)this.props[typeof s=="number"?s:s.id]=a}}toString(){let e=jE.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let r=i.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new TR(this.topNode,e)}cursorAt(e,t=0,i=0){let r=Dw.get(this)||this.topNode,o=new TR(r);return o.moveTo(e,t),Dw.set(this,o._tree),o}get topNode(){return new wp(this,0,0,null)}resolve(e,t=0){let i=_5(Dw.get(this)||this.topNode,e,t,!1);return Dw.set(this,i),i}resolveInner(e,t=0){let i=_5(qG.get(this)||this.topNode,e,t,!0);return qG.set(this,i),i}resolveStack(e,t=0){return w3e(this,e,t)}iterate(e){let{enter:t,leave:i,from:r=0,to:o=this.length}=e,s=e.mode||0,a=(s&Qc.IncludeAnonymous)>0;for(let c=this.cursor(s|Qc.IncludeAnonymous);;){let d=!1;if(c.from<=o&&c.to>=r&&(!a&&c.type.isAnonymous||t(c)!==!1)){if(c.firstChild())continue;d=!0}for(;d&&i&&(a||!c.type.isAnonymous)&&i(c),!c.nextSibling();){if(!c.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:LU(Td.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,r)=>new Gu(this.type,t,i,r,this.propValues),e.makeTree||((t,i,r)=>new Gu(Td.none,t,i,r)))}static build(e){return S3e(e)}}Gu.empty=new Gu(Td.none,[],[],0);class RU{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new RU(this.buffer,this.index)}}class Pv{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Td.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],o=r.name;if(/\W/.test(o)&&!r.isError&&(o=JSON.stringify(o)),e+=4,i==e)return o;let s=[];for(;e<i;)s.push(this.childString(e)),e=this.buffer[e+3];return o+"("+s.join(",")+")"}findChild(e,t,i,r,o){let{buffer:s}=this,a=-1;for(let c=e;c!=t&&!(Lne(o,r,s[c+1],s[c+2])&&(a=c,i>0));c=s[c+3]);return a}slice(e,t,i){let r=this.buffer,o=new Uint16Array(t-e),s=0;for(let a=e,c=0;a<t;){o[c++]=r[a++],o[c++]=r[a++]-i;let d=o[c++]=r[a++]-i;o[c++]=r[a++]-e,s=Math.max(s,d)}return new Pv(o,s,this.set)}}function Lne(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function _5(n,e,t,i){for(var r;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let s=!i&&n instanceof wp&&n.index<0?null:n.parent;if(!s)return n;n=s}let o=i?0:Qc.IgnoreOverlays;if(i)for(let s=n,a=s.parent;a;s=a,a=s.parent)s instanceof wp&&s.index<0&&((r=a.enter(e,t,o))===null||r===void 0?void 0:r.from)!=s.from&&(n=a);for(;;){let s=n.enter(e,t,o);if(!s)return n;n=s}}class Une{cursor(e=0){return new TR(this,e)}getChild(e,t=null,i=null){let r=YG(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return YG(this,e,t,i)}resolve(e,t=0){return _5(this,e,t,!1)}resolveInner(e,t=0){return _5(this,e,t,!0)}matchContext(e){return IR(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(i=t,t=r.prevSibling):t=r}return i}get node(){return this}get next(){return this.parent}}class wp extends Une{constructor(e,t,i,r){super(),this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,o=0){for(let s=this;;){for(let{children:a,positions:c}=s._tree,d=t>0?a.length:-1;e!=d;e+=t){let m=a[e],v=c[e]+s.from;if(Lne(r,i,v,v+m.length)){if(m instanceof Pv){if(o&Qc.ExcludeBuffers)continue;let M=m.findChild(0,m.buffer.length,t,i-v,r);if(M>-1)return new vv(new x3e(s,m,e,v),null,M)}else if(o&Qc.IncludeAnonymous||!m.type.isAnonymous||PU(m)){let M;if(!(o&Qc.IgnoreMounts)&&(M=jE.get(m))&&!M.overlay)return new wp(M.tree,v,e,s);let B=new wp(m,v,e,s);return o&Qc.IncludeAnonymous||!B.type.isAnonymous?B:B.nextChild(t<0?m.children.length-1:0,t,i,r)}}}if(o&Qc.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+t:e=t<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let r;if(!(i&Qc.IgnoreOverlays)&&(r=jE.get(this._tree))&&r.overlay){let o=e-this.from;for(let{from:s,to:a}of r.overlay)if((t>0?s<=o:s<o)&&(t<0?a>=o:a>o))return new wp(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function YG(n,e,t,i){let r=n.cursor(),o=[];if(!r.firstChild())return o;if(t!=null){for(let s=!1;!s;)if(s=r.type.is(t),!r.nextSibling())return o}for(;;){if(i!=null&&r.type.is(i))return o;if(r.type.is(e)&&o.push(r.node),!r.nextSibling())return i==null?o:[]}}function IR(n,e,t=e.length-1){for(let i=n;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class x3e{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}}class vv extends Une{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return o<0?null:new vv(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Qc.ExcludeBuffers)return null;let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new vv(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new vv(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new vv(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,o=i.buffer[this.index+3];if(o>r){let s=i.buffer[this.index+1];e.push(i.slice(r,o,s)),t.push(0)}return new Gu(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Kne(n){if(!n.length)return null;let e=0,t=n[0];for(let o=1;o<n.length;o++){let s=n[o];(s.from>t.from||s.to<t.to)&&(t=s,e=o)}let i=t instanceof wp&&t.index<0?null:t.parent,r=n.slice();return i?r[e]=i:r.splice(e,1),new M3e(r,t)}class M3e{constructor(e,t){this.heads=e,this.node=t}get next(){return Kne(this.heads)}}function w3e(n,e,t){let i=n.resolveInner(e,t),r=null;for(let o=i instanceof wp?i:i.context.parent;o;o=o.parent)if(o.index<0){let s=o.parent;(r||(r=[i])).push(s.resolve(e,t)),o=s}else{let s=jE.get(o.tree);if(s&&s.overlay&&s.overlay[0].from<=e&&s.overlay[s.overlay.length-1].to>=e){let a=new wp(s.tree,s.overlay[0].from+o.from,-1,o);(r||(r=[i])).push(_5(a,e,t,!1))}}return r?Kne(r):i}class TR{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof wp)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof wp?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Qc.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Qc.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Qc.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(r.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let o=t+e,s=e<0?-1:i._tree.children.length;o!=s;o+=e){let a=i._tree.children[o];if(this.mode&Qc.IncludeAnonymous||a instanceof Pv||!a.type.isAnonymous||PU(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,o=this.stack.length;o>=0;){for(let s=e;s;s=s._parent)if(s.index==r){if(r==this.index)return s;t=s,i=o+1;break e}r=this.stack[--o]}for(let r=i;r<this.stack.length;r++)t=new vv(this.buffer,t,this.stack[r]);return this.bufferNode=new vv(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return IR(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,o=this.stack.length-1;r>=0;o--){if(o<0)return IR(this._tree,e,r);let s=i[t.buffer[this.stack[o]]];if(!s.isAnonymous){if(e[r]&&e[r]!=s.name)return!1;r--}}return!0}}function PU(n){return n.children.some(e=>e instanceof Pv||!e.type.isAnonymous||PU(e))}function S3e(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:r=Pne,reused:o=[],minRepeatType:s=i.types.length}=n,a=Array.isArray(t)?new RU(t,t.length):t,c=i.types,d=0,m=0;function v(ie,te,q,le,ce,ve){let{id:ge,start:Ee,end:xe,size:Te}=a,Fe=m,Ie=d;if(Te<0)if(a.next(),Te==-1){let De=o[ge];q.push(De),le.push(Ee-ie);return}else if(Te==-3){d=ge;return}else if(Te==-4){m=ge;return}else throw new RangeError(`Unrecognized record size: ${Te}`);let Ye=c[ge],At,mt,Ue=Ee-ie;if(xe-Ee<=r&&(mt=z(a.pos-te,ce))){let De=new Uint16Array(mt.size-mt.skip),Ge=a.pos-mt.size,Re=De.length;for(;a.pos>Ge;)Re=V(mt.start,De,Re);At=new Pv(De,xe-mt.start,i),Ue=mt.start-ie}else{let De=a.pos-Te;a.next();let Ge=[],Re=[],St=ge>=s?ge:-1,ut=0,kt=xe;for(;a.pos>De;)St>=0&&a.id==St&&a.size>=0?(a.end<=kt-r&&(P(Ge,Re,Ee,ut,a.end,kt,St,Fe,Ie),ut=Ge.length,kt=a.end),a.next()):ve>2500?M(Ee,De,Ge,Re):v(Ee,De,Ge,Re,St,ve+1);if(St>=0&&ut>0&&ut<Ge.length&&P(Ge,Re,Ee,ut,Ee,kt,St,Fe,Ie),Ge.reverse(),Re.reverse(),St>-1&&ut>0){let Ut=B(Ye,Ie);At=LU(Ye,Ge,Re,0,Ge.length,0,xe-Ee,Ut,Ut)}else At=U(Ye,Ge,Re,xe-Ee,Fe-xe,Ie)}q.push(At),le.push(Ue)}function M(ie,te,q,le){let ce=[],ve=0,ge=-1;for(;a.pos>te;){let{id:Ee,start:xe,end:Te,size:Fe}=a;if(Fe>4)a.next();else{if(ge>-1&&xe<ge)break;ge<0&&(ge=Te-r),ce.push(Ee,xe,Te),ve++,a.next()}}if(ve){let Ee=new Uint16Array(ve*4),xe=ce[ce.length-2];for(let Te=ce.length-3,Fe=0;Te>=0;Te-=3)Ee[Fe++]=ce[Te],Ee[Fe++]=ce[Te+1]-xe,Ee[Fe++]=ce[Te+2]-xe,Ee[Fe++]=Fe;q.push(new Pv(Ee,ce[2]-xe,i)),le.push(xe-ie)}}function B(ie,te){return(q,le,ce)=>{let ve=0,ge=q.length-1,Ee,xe;if(ge>=0&&(Ee=q[ge])instanceof Gu){if(!ge&&Ee.type==ie&&Ee.length==ce)return Ee;(xe=Ee.prop(Co.lookAhead))&&(ve=le[ge]+Ee.length+xe)}return U(ie,q,le,ce,ve,te)}}function P(ie,te,q,le,ce,ve,ge,Ee,xe){let Te=[],Fe=[];for(;ie.length>le;)Te.push(ie.pop()),Fe.push(te.pop()+q-ce);ie.push(U(i.types[ge],Te,Fe,ve-ce,Ee-ve,xe)),te.push(ce-q)}function U(ie,te,q,le,ce,ve,ge){if(ve){let Ee=[Co.contextHash,ve];ge=ge?[Ee].concat(ge):[Ee]}if(ce>25){let Ee=[Co.lookAhead,ce];ge=ge?[Ee].concat(ge):[Ee]}return new Gu(ie,te,q,le,ge)}function z(ie,te){let q=a.fork(),le=0,ce=0,ve=0,ge=q.end-r,Ee={size:0,start:0,skip:0};e:for(let xe=q.pos-ie;q.pos>xe;){let Te=q.size;if(q.id==te&&Te>=0){Ee.size=le,Ee.start=ce,Ee.skip=ve,ve+=4,le+=4,q.next();continue}let Fe=q.pos-Te;if(Te<0||Fe<xe||q.start<ge)break;let Ie=q.id>=s?4:0,Ye=q.start;for(q.next();q.pos>Fe;){if(q.size<0)if(q.size==-3)Ie+=4;else break e;else q.id>=s&&(Ie+=4);q.next()}ce=Ye,le+=Te,ve+=Ie}return(te<0||le==ie)&&(Ee.size=le,Ee.start=ce,Ee.skip=ve),Ee.size>4?Ee:void 0}function V(ie,te,q){let{id:le,start:ce,end:ve,size:ge}=a;if(a.next(),ge>=0&&le<s){let Ee=q;if(ge>4){let xe=a.pos-(ge-4);for(;a.pos>xe;)q=V(ie,te,q)}te[--q]=Ee,te[--q]=ve-ie,te[--q]=ce-ie,te[--q]=le}else ge==-3?d=le:ge==-4&&(m=le);return q}let Z=[],X=[];for(;a.pos>0;)v(n.start||0,n.bufferStart||0,Z,X,-1,0);let re=(e=n.length)!==null&&e!==void 0?e:Z.length?X[0]+Z[0].length:0;return new Gu(c[n.topID],Z.reverse(),X.reverse(),re)}const VG=new WeakMap;function OS(n,e){if(!n.isAnonymous||e instanceof Pv||e.type!=n)return 1;let t=VG.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof Gu)){t=1;break}t+=OS(n,i)}VG.set(e,t)}return t}function LU(n,e,t,i,r,o,s,a,c){let d=0;for(let P=i;P<r;P++)d+=OS(n,e[P]);let m=Math.ceil(d*1.5/8),v=[],M=[];function B(P,U,z,V,Z){for(let X=z;X<V;){let re=X,ie=U[X],te=OS(n,P[X]);for(X++;X<V;X++){let q=OS(n,P[X]);if(te+q>=m)break;te+=q}if(X==re+1){if(te>m){let q=P[re];B(q.children,q.positions,0,q.children.length,U[re]+Z);continue}v.push(P[re])}else{let q=U[X-1]+P[X-1].length-ie;v.push(LU(n,P,U,re,X,ie,q,null,c))}M.push(ie+Z-o)}}return B(e,t,i,r,0),(a||c)(v,M,s)}class _C{constructor(e,t,i,r,o=!1,s=!1){this.from=e,this.to=t,this.tree=i,this.offset=r,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let r=[new _C(0,e.length,e,0,!1,i)];for(let o of t)o.to>e.length&&r.push(o);return r}static applyChanges(e,t,i=128){if(!t.length)return e;let r=[],o=1,s=e.length?e[0]:null;for(let a=0,c=0,d=0;;a++){let m=a<t.length?t[a]:null,v=m?m.fromA:1e9;if(v-c>=i)for(;s&&s.from<v;){let M=s;if(c>=M.from||v<=M.to||d){let B=Math.max(M.from,c)-d,P=Math.min(M.to,v)-d;M=B>=P?null:new _C(B,P,M.tree,M.offset+d,a>0,!!m)}if(M&&r.push(M),s.to>v)break;s=o<e.length?e[o++]:null}if(!m)break;c=m.toA,d=m.toA-m.toB}return r}}class Fne{startParse(e,t,i){return typeof e=="string"&&(e=new E3e(e)),i=i?i.length?i.map(r=>new aI(r.from,r.to)):[new aI(0,0)]:[new aI(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let o=r.advance();if(o)return o}}}class E3e{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Co({perNode:!0});let B3e=0;class dp{constructor(e,t,i,r){this.name=e,this.set=t,this.base=i,this.modified=r,this.id=B3e++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof dp&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let r=new dp(i,[],null,[]);if(r.set.push(r),t)for(let o of t.set)r.set.push(o);return r}static defineModifier(e){let t=new NE(e);return i=>i.modified.indexOf(t)>-1?i:NE.get(i.base||i,i.modified.concat(t).sort((r,o)=>r.id-o.id))}}let O3e=0;class NE{constructor(e){this.name=e,this.instances=[],this.id=O3e++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(a=>a.base==e&&I3e(t,a.modified));if(i)return i;let r=[],o=new dp(e.name,r,e,t);for(let a of t)a.instances.push(o);let s=T3e(t);for(let a of e.set)if(!a.modified.length)for(let c of s)r.push(NE.get(a,c));return o}}function I3e(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function T3e(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function zne(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let r of t.split(" "))if(r){let o=[],s=2,a=r;for(let v=0;;){if(a=="..."&&v>0&&v+3==r.length){s=1;break}let M=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!M)throw new RangeError("Invalid path: "+r);if(o.push(M[0]=="*"?"":M[0][0]=='"'?JSON.parse(M[0]):M[0]),v+=M[0].length,v==r.length)break;let B=r[v++];if(v==r.length&&B=="!"){s=0;break}if(B!="/")throw new RangeError("Invalid path: "+r);a=r.slice(v)}let c=o.length-1,d=o[c];if(!d)throw new RangeError("Invalid path: "+r);let m=new x5(i,s,c>0?o.slice(0,c):null);e[d]=m.sort(e[d])}}return jne.add(e)}const jne=new Co({combine(n,e){let t,i,r;for(;n||e;){if(!n||e&&n.depth>=e.depth?(r=e,e=e.next):(r=n,n=n.next),t&&t.mode==r.mode&&!r.context&&!t.context)continue;let o=new x5(r.tags,r.mode,r.context);t?t.next=o:i=o,t=o}return i}});class x5{constructor(e,t,i,r){this.tags=e,this.mode=t,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}x5.empty=new x5([],2,null);function Nne(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let s of o.tag)t[s.id]=o.class;let{scope:i,all:r=null}=e||{};return{style:o=>{let s=r;for(let a of o)for(let c of a.set){let d=t[c.id];if(d){s=s?s+" "+d:d;break}}return s},scope:i}}function k3e(n,e){let t=null;for(let i of n){let r=i.style(e);r&&(t=t?t+" "+r:r)}return t}function D3e(n,e,t,i=0,r=n.length){let o=new R3e(i,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),i,r,"",o.highlighters),o.flush(r)}class R3e{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,r,o){let{type:s,from:a,to:c}=e;if(a>=i||c<=t)return;s.isTop&&(o=this.highlighters.filter(B=>!B.scope||B.scope(s)));let d=r,m=P3e(e)||x5.empty,v=k3e(o,m.tags);if(v&&(d&&(d+=" "),d+=v,m.mode==1&&(r+=(r?" ":"")+v)),this.startSpan(Math.max(t,a),d),m.opaque)return;let M=e.tree&&e.tree.prop(Co.mounted);if(M&&M.overlay){let B=e.node.enter(M.overlay[0].from+a,1),P=this.highlighters.filter(z=>!z.scope||z.scope(M.tree.type)),U=e.firstChild();for(let z=0,V=a;;z++){let Z=z<M.overlay.length?M.overlay[z]:null,X=Z?Z.from+a:c,re=Math.max(t,V),ie=Math.min(i,X);if(re<ie&&U)for(;e.from<ie&&(this.highlightRange(e,re,ie,r,o),this.startSpan(Math.min(ie,e.to),d),!(e.to>=X||!e.nextSibling())););if(!Z||X>i)break;V=Z.to+a,V>t&&(this.highlightRange(B.cursor(),Math.max(t,Z.from+a),Math.min(i,V),"",P),this.startSpan(Math.min(i,V),d))}U&&e.parent()}else if(e.firstChild()){M&&(r="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,r,o),this.startSpan(Math.min(i,e.to),d)}while(e.nextSibling());e.parent()}}}function P3e(n){let e=n.type.prop(jne);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const hi=dp.define,Rw=hi(),rv=hi(),$G=hi(rv),HG=hi(rv),ov=hi(),Pw=hi(ov),lI=hi(ov),V0=hi(),qb=hi(V0),q0=hi(),Y0=hi(),kR=hi(),E3=hi(kR),Lw=hi(),cn={comment:Rw,lineComment:hi(Rw),blockComment:hi(Rw),docComment:hi(Rw),name:rv,variableName:hi(rv),typeName:$G,tagName:hi($G),propertyName:HG,attributeName:hi(HG),className:hi(rv),labelName:hi(rv),namespace:hi(rv),macroName:hi(rv),literal:ov,string:Pw,docString:hi(Pw),character:hi(Pw),attributeValue:hi(Pw),number:lI,integer:hi(lI),float:hi(lI),bool:hi(ov),regexp:hi(ov),escape:hi(ov),color:hi(ov),url:hi(ov),keyword:q0,self:hi(q0),null:hi(q0),atom:hi(q0),unit:hi(q0),modifier:hi(q0),operatorKeyword:hi(q0),controlKeyword:hi(q0),definitionKeyword:hi(q0),moduleKeyword:hi(q0),operator:Y0,derefOperator:hi(Y0),arithmeticOperator:hi(Y0),logicOperator:hi(Y0),bitwiseOperator:hi(Y0),compareOperator:hi(Y0),updateOperator:hi(Y0),definitionOperator:hi(Y0),typeOperator:hi(Y0),controlOperator:hi(Y0),punctuation:kR,separator:hi(kR),bracket:E3,angleBracket:hi(E3),squareBracket:hi(E3),paren:hi(E3),brace:hi(E3),content:V0,heading:qb,heading1:hi(qb),heading2:hi(qb),heading3:hi(qb),heading4:hi(qb),heading5:hi(qb),heading6:hi(qb),contentSeparator:hi(V0),list:hi(V0),quote:hi(V0),emphasis:hi(V0),strong:hi(V0),link:hi(V0),monospace:hi(V0),strikethrough:hi(V0),inserted:hi(),deleted:hi(),changed:hi(),invalid:hi(),meta:Lw,documentMeta:hi(Lw),annotation:hi(Lw),processingInstruction:hi(Lw),definition:dp.defineModifier("definition"),constant:dp.defineModifier("constant"),function:dp.defineModifier("function"),standard:dp.defineModifier("standard"),local:dp.defineModifier("local"),special:dp.defineModifier("special")};for(let n in cn){let e=cn[n];e instanceof dp&&(e.name=n)}Nne([{tag:cn.link,class:"tok-link"},{tag:cn.heading,class:"tok-heading"},{tag:cn.emphasis,class:"tok-emphasis"},{tag:cn.strong,class:"tok-strong"},{tag:cn.keyword,class:"tok-keyword"},{tag:cn.atom,class:"tok-atom"},{tag:cn.bool,class:"tok-bool"},{tag:cn.url,class:"tok-url"},{tag:cn.labelName,class:"tok-labelName"},{tag:cn.inserted,class:"tok-inserted"},{tag:cn.deleted,class:"tok-deleted"},{tag:cn.literal,class:"tok-literal"},{tag:cn.string,class:"tok-string"},{tag:cn.number,class:"tok-number"},{tag:[cn.regexp,cn.escape,cn.special(cn.string)],class:"tok-string2"},{tag:cn.variableName,class:"tok-variableName"},{tag:cn.local(cn.variableName),class:"tok-variableName tok-local"},{tag:cn.definition(cn.variableName),class:"tok-variableName tok-definition"},{tag:cn.special(cn.variableName),class:"tok-variableName2"},{tag:cn.definition(cn.propertyName),class:"tok-propertyName tok-definition"},{tag:cn.typeName,class:"tok-typeName"},{tag:cn.namespace,class:"tok-namespace"},{tag:cn.className,class:"tok-className"},{tag:cn.macroName,class:"tok-macroName"},{tag:cn.propertyName,class:"tok-propertyName"},{tag:cn.operator,class:"tok-operator"},{tag:cn.comment,class:"tok-comment"},{tag:cn.meta,class:"tok-meta"},{tag:cn.invalid,class:"tok-invalid"},{tag:cn.punctuation,class:"tok-punctuation"}]);var uI;const Ix=new Co;function L3e(n){return Bi.define({combine:n?e=>e.concat(n):void 0})}const U3e=new Co;class km{constructor(e,t,i=[],r=""){this.data=e,this.name=r,as.prototype.hasOwnProperty("tree")||Object.defineProperty(as.prototype,"tree",{get(){return HA(this)}}),this.parser=t,this.extension=[Lv.of(this),as.languageData.of((o,s,a)=>{let c=ZG(o,s,a),d=c.type.prop(Ix);if(!d)return[];let m=o.facet(d),v=c.type.prop(U3e);if(v){let M=c.resolve(s-c.from,a);for(let B of v)if(B.test(M,o)){let P=o.facet(B.facet);return B.type=="replace"?P:P.concat(m)}}return m})].concat(i)}isActiveAt(e,t,i=-1){return ZG(e,t,i).type.prop(Ix)==this.data}findRegions(e){let t=e.facet(Lv);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=(o,s)=>{if(o.prop(Ix)==this.data){i.push({from:s,to:s+o.length});return}let a=o.prop(Co.mounted);if(a){if(a.tree.prop(Ix)==this.data){if(a.overlay)for(let c of a.overlay)i.push({from:c.from+s,to:c.to+s});else i.push({from:s,to:s+o.length});return}else if(a.overlay){let c=i.length;if(r(a.tree,a.overlay[0].from+s),i.length>c)return}}for(let c=0;c<o.children.length;c++){let d=o.children[c];d instanceof Gu&&r(d,o.positions[c]+s)}};return r(HA(e),0),i}get allowsNesting(){return!0}}km.setState=eo.define();function ZG(n,e,t){let i=n.facet(Lv),r=HA(n).topNode;if(!i||i.allowsNesting)for(let o=r;o;o=o.enter(e,t,Qc.ExcludeBuffers))o.type.isTop&&(r=o);return r}class GE extends km{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=L3e(e.languageData);return new GE(t,e.parser.configure({props:[Ix.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new GE(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function HA(n){let e=n.field(km.state,!1);return e?e.tree:Gu.empty}class K3e{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let B3=null;class WE{constructor(e,t,i=[],r,o,s,a,c){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=o,this.viewport=s,this.skipped=a,this.scheduleOn=c,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new WE(e,t,[],Gu.empty,0,i,[],null)}startParse(){return this.parser.startParse(new K3e(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Gu.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(_C.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(_C.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=B3;B3=this;try{return e()}finally{B3=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=XG(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:o,viewport:s,skipped:a}=this;if(this.takeTree(),!e.empty){let c=[];if(e.iterChangedRanges((d,m,v,M)=>c.push({fromA:d,toA:m,fromB:v,toB:M})),i=_C.applyChanges(i,c),r=Gu.empty,o=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){a=[];for(let d of this.skipped){let m=e.mapPos(d.from,1),v=e.mapPos(d.to,-1);m<v&&a.push({from:m,to:v})}}}return new WE(this.parser,t,i,r,o,s,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:o}=this.skipped[i];r<e.to&&o>e.from&&(this.fragments=XG(this.fragments,r,o),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Fne{createParse(t,i,r){let o=r[0].from,s=r[r.length-1].to;return{parsedPos:o,advance(){let c=B3;if(c){for(let d of r)c.tempSkipped.push(d);e&&(c.scheduleOn=c.scheduleOn?Promise.all([c.scheduleOn,e]):e)}return this.parsedPos=s,new Gu(Td.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return B3}}function XG(n,e,t){return _C.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class x2{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new x2(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=WE.create(e.facet(Lv).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new x2(i)}}km.state=mc.define({create:x2.init,update(n,e){for(let t of e.effects)if(t.is(km.setState))return t.value;return e.startState.facet(Lv)!=e.state.facet(Lv)?x2.init(e.state):n.apply(e)}});let Gne=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Gne=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const cI=typeof navigator<"u"&&(!((uI=navigator.scheduling)===null||uI===void 0)&&uI.isInputPending)?()=>navigator.scheduling.isInputPending():null,F3e=yu.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(km.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(km.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Gne(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,o=i.field(km.state);if(o.tree==o.context.tree&&o.context.isDone(r+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!cI?Math.max(25,e.timeRemaining()-5):1e9),a=o.context.treeLen<r&&i.doc.length>r+1e3,c=o.context.work(()=>cI&&cI()||Date.now()>s,r+(a?0:1e5));this.chunkBudget-=Date.now()-t,(c||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:km.setState.of(new x2(o.context))})),this.chunkBudget>0&&!(c&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>kh(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Lv=Bi.define({combine(n){return n.length?n[0]:null},enables:n=>[km.state,F3e,wi.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class z3e{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const j3e=Bi.define(),UU=Bi.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function QE(n){let e=n.facet(UU);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function M5(n,e){let t="",i=n.tabSize,r=n.facet(UU)[0];if(r=="	"){for(;e>=i;)t+="	",e-=i;r=" "}for(let o=0;o<e;o++)t+=r;return t}function KU(n,e){n instanceof as&&(n=new TB(n));for(let i of n.state.facet(j3e)){let r=i(n,e);if(r!==void 0)return r}let t=HA(n.state);return t.length>=e?N3e(n,t,e):null}class TB{constructor(e,t={}){this.state=e,this.options=t,this.unit=QE(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:o}=this.options;return r!=null&&r>=i.from&&r<=i.to?o&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),o=this.countColumn(i,e-r),s=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return s>-1&&(o+=s-this.countColumn(i,i.search(/\S|$/))),o}countColumn(e,t=e.length){return z2(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let s=o(r);if(s>-1)return s}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Wne=new Co;function N3e(n,e,t){let i=e.resolveStack(t),r=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(r!=i.node){let o=[];for(let s=r;s&&!(s.from<i.node.from||s.to>i.node.to||s.from==i.node.from&&s.type==i.node.type);s=s.parent)o.push(s);for(let s=o.length-1;s>=0;s--)i={node:o[s],next:i}}return Qne(i,n,t)}function Qne(n,e,t){for(let i=n;i;i=i.next){let r=W3e(i.node);if(r)return r(FU.create(e,t,i))}return 0}function G3e(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function W3e(n){let e=n.type.prop(Wne);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(Co.closedBy))){let r=n.lastChild,o=r&&i.indexOf(r.name)>-1;return s=>V3e(s,!0,1,void 0,o&&!G3e(s)?r.from:void 0)}return n.parent==null?Q3e:null}function Q3e(){return 0}class FU extends TB{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new FU(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(q3e(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return Qne(this.context.next,this.base,this.pos)}}function q3e(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function Y3e(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let r=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),s=r==null||r<=o.from?o.to:Math.min(o.to,r);for(let a=t.to;;){let c=e.childAfter(a);if(!c||c==i)return null;if(!c.type.isSkipped){if(c.from>=s)return null;let d=/^ */.exec(o.text.slice(t.to-o.from))[0].length;return{from:t.from,to:t.to+d}}a=c.to}}function V3e(n,e,t,i,r){let o=n.textAfter,s=o.match(/^\s*/)[0].length,a=i&&o.slice(s,s+i.length)==i||r==n.pos+s,c=Y3e(n);return c?a?n.column(c.from):n.column(c.to):n.baseIndent+(a?0:n.unit*t)}function JG({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const $3e=200;function H3e(){return as.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,r=t.lineAt(i);if(i>r.from+$3e)return n;let o=t.sliceString(r.from,i);if(!e.some(d=>d.test(o)))return n;let{state:s}=n,a=-1,c=[];for(let{head:d}of s.selection.ranges){let m=s.doc.lineAt(d);if(m.from==a)continue;a=m.from;let v=KU(s,m.from);if(v==null)continue;let M=/^\s*/.exec(m.text)[0],B=M5(s,v);M!=B&&c.push({from:m.from,to:m.from+M.length,insert:B})}return c.length?[n,{changes:c,sequential:!0}]:n})}const Z3e=Bi.define(),qne=new Co;function X3e(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function J3e(n,e,t){let i=HA(n);if(i.length<t)return null;let r=i.resolveStack(t,1),o=null;for(let s=r;s;s=s.next){let a=s.node;if(a.to<=t||a.from>t)continue;if(o&&a.from<e)break;let c=a.type.prop(qne);if(c&&(a.to<i.length-50||i.length==n.doc.length||!e4e(a))){let d=c(a,n);d&&d.from<=t&&d.from>=e&&d.to>t&&(o=d)}}return o}function e4e(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function qE(n,e,t){for(let i of n.facet(Z3e)){let r=i(n,e,t);if(r)return r}return J3e(n,e,t)}function Yne(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const kB=eo.define({map:Yne}),wM=eo.define({map:Yne});function Vne(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const KC=mc.define({create(){return vr.none},update(n,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,i)=>n=eW(n,t,i)),n=n.map(e.changes);for(let t of e.effects)if(t.is(kB)&&!t4e(n,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(Zne),r=i?vr.replace({widget:new l4e(i(e.state,t.value))}):tW;n=n.update({add:[r.range(t.value.from,t.value.to)]})}else t.is(wM)&&(n=n.update({filter:(i,r)=>t.value.from!=i||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(n=eW(n,e.selection.main.head)),n},provide:n=>wi.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,r)=>{t.push(i,r)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],r=n[t++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(tW.range(i,r))}return vr.set(e,!0)}});function eW(n,e,t=e){let i=!1;return n.between(e,t,(r,o)=>{r<t&&o>e&&(i=!0)}),i?n.update({filterFrom:e,filterTo:t,filter:(r,o)=>r>=t||o<=e}):n}function YE(n,e,t){var i;let r=null;return(i=n.field(KC,!1))===null||i===void 0||i.between(e,t,(o,s)=>{(!r||r.from>o)&&(r={from:o,to:s})}),r}function t4e(n,e,t){let i=!1;return n.between(e,e,(r,o)=>{r==e&&o==t&&(i=!0)}),i}function $ne(n,e){return n.field(KC,!1)?e:e.concat(eo.appendConfig.of(Xne()))}const n4e=n=>{for(let e of Vne(n)){let t=qE(n.state,e.from,e.to);if(t)return n.dispatch({effects:$ne(n.state,[kB.of(t),Hne(n,t)])}),!0}return!1},i4e=n=>{if(!n.state.field(KC,!1))return!1;let e=[];for(let t of Vne(n)){let i=YE(n.state,t.from,t.to);i&&e.push(wM.of(i),Hne(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function Hne(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,r=n.state.doc.lineAt(e.to).number;return wi.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${r}.`)}const r4e=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let r=n.lineBlockAt(i),o=qE(e,r.from,r.to);o&&t.push(kB.of(o)),i=(o?n.lineBlockAt(o.to):r).to+1}return t.length&&n.dispatch({effects:$ne(n.state,t)}),!!t.length},o4e=n=>{let e=n.state.field(KC,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,r)=>{t.push(wM.of({from:i,to:r}))}),n.dispatch({effects:t}),!0},s4e=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:n4e},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:i4e},{key:"Ctrl-Alt-[",run:r4e},{key:"Ctrl-Alt-]",run:o4e}],a4e={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Zne=Bi.define({combine(n){return Wm(n,a4e)}});function Xne(n){return[KC,A4e]}function Jne(n,e){let{state:t}=n,i=t.facet(Zne),r=s=>{let a=n.lineBlockAt(n.posAtDOM(s.target)),c=YE(n.state,a.from,a.to);c&&n.dispatch({effects:wM.of(c)}),s.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,r,e);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",t.phrase("folded code")),o.title=t.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=r,o}const tW=vr.replace({widget:new class extends q1{toDOM(n){return Jne(n,null)}}});class l4e extends q1{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Jne(e,this.value)}}const u4e={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class AI extends Mg{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function c4e(n={}){let e={...u4e,...n},t=new AI(e,!0),i=new AI(e,!1),r=yu.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(Lv)!=s.state.facet(Lv)||s.startState.field(KC,!1)!=s.state.field(KC,!1)||HA(s.startState)!=HA(s.state)||e.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let a=new z1;for(let c of s.viewportLineBlocks){let d=YE(s.state,c.from,c.to)?i:qE(s.state,c.from,c.to)?t:null;d&&a.add(c.from,c.from,d)}return a.finish()}}),{domEventHandlers:o}=e;return[r,kne({class:"cm-foldGutter",markers(s){var a;return((a=s.plugin(r))===null||a===void 0?void 0:a.markers)||mo.empty},initialSpacer(){return new AI(e,!1)},domEventHandlers:{...o,click:(s,a,c)=>{if(o.click&&o.click(s,a,c))return!0;let d=YE(s.state,a.from,a.to);if(d)return s.dispatch({effects:wM.of(d)}),!0;let m=qE(s.state,a.from,a.to);return m?(s.dispatch({effects:kB.of(m)}),!0):!1}}}),Xne()]}const A4e=wi.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class SM{constructor(e,t){this.specs=e;let i;function r(a){let c=kv.newName();return(i||(i=Object.create(null)))["."+c]=a,c}const o=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,s=t.scope;this.scope=s instanceof km?a=>a.prop(Ix)==s.data:s?a=>a==s:void 0,this.style=Nne(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:o}).style,this.module=i?new kv(i):null,this.themeType=t.themeType}static define(e,t){return new SM(e,t||{})}}const DR=Bi.define(),eie=Bi.define({combine(n){return n.length?[n[0]]:null}});function hI(n){let e=n.facet(DR);return e.length?e:n.facet(eie)}function tie(n,e){let t=[d4e],i;return n instanceof SM&&(n.module&&t.push(wi.styleModule.of(n.module)),i=n.themeType),e?.fallback?t.push(eie.of(n)):i?t.push(DR.computeN([wi.darkTheme],r=>r.facet(wi.darkTheme)==(i=="dark")?[n]:[])):t.push(DR.of(n)),t}class h4e{constructor(e){this.markCache=Object.create(null),this.tree=HA(e.state),this.decorations=this.buildDeco(e,hI(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=HA(e.state),i=hI(e.state),r=i!=hI(e.startState),{viewport:o}=e.view,s=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!r&&t.type==this.tree.type&&s>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return vr.none;let i=new z1;for(let{from:r,to:o}of e.visibleRanges)D3e(this.tree,t,(s,a,c)=>{i.add(s,a,this.markCache[c]||(this.markCache[c]=vr.mark({class:c})))},r,o);return i.finish()}}const d4e=VC.high(yu.fromClass(h4e,{decorations:n=>n.decorations})),f4e=SM.define([{tag:cn.meta,color:"#404740"},{tag:cn.link,textDecoration:"underline"},{tag:cn.heading,textDecoration:"underline",fontWeight:"bold"},{tag:cn.emphasis,fontStyle:"italic"},{tag:cn.strong,fontWeight:"bold"},{tag:cn.strikethrough,textDecoration:"line-through"},{tag:cn.keyword,color:"#708"},{tag:[cn.atom,cn.bool,cn.url,cn.contentSeparator,cn.labelName],color:"#219"},{tag:[cn.literal,cn.inserted],color:"#164"},{tag:[cn.string,cn.deleted],color:"#a11"},{tag:[cn.regexp,cn.escape,cn.special(cn.string)],color:"#e40"},{tag:cn.definition(cn.variableName),color:"#00f"},{tag:cn.local(cn.variableName),color:"#30a"},{tag:[cn.typeName,cn.namespace],color:"#085"},{tag:cn.className,color:"#167"},{tag:[cn.special(cn.variableName),cn.macroName],color:"#256"},{tag:cn.definition(cn.propertyName),color:"#00c"},{tag:cn.comment,color:"#940"},{tag:cn.invalid,color:"#f00"}]),p4e=wi.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),nie=1e4,iie="()[]{}",rie=Bi.define({combine(n){return Wm(n,{afterCursor:!0,brackets:iie,maxScanDistance:nie,renderMatch:y4e})}}),m4e=vr.mark({class:"cm-matchingBracket"}),g4e=vr.mark({class:"cm-nonmatchingBracket"});function y4e(n){let e=[],t=n.matched?m4e:g4e;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const v4e=mc.define({create(){return vr.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(rie);for(let r of e.state.selection.ranges){if(!r.empty)continue;let o=Ag(e.state,r.head,-1,i)||r.head>0&&Ag(e.state,r.head-1,1,i)||i.afterCursor&&(Ag(e.state,r.head,1,i)||r.head<e.state.doc.length&&Ag(e.state,r.head+1,-1,i));o&&(t=t.concat(i.renderMatch(o,e.state)))}return vr.set(t,!0)},provide:n=>wi.decorations.from(n)}),b4e=[v4e,p4e];function C4e(n={}){return[rie.of(n),b4e]}const _4e=new Co;function RR(n,e,t){let i=n.prop(e<0?Co.openedBy:Co.closedBy);if(i)return i;if(n.name.length==1){let r=t.indexOf(n.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function PR(n){let e=n.type.prop(_4e);return e?e(n.node):n}function Ag(n,e,t,i={}){let r=i.maxScanDistance||nie,o=i.brackets||iie,s=HA(n),a=s.resolveInner(e,t);for(let c=a;c;c=c.parent){let d=RR(c.type,t,o);if(d&&c.from<c.to){let m=PR(c);if(m&&(t>0?e>=m.from&&e<m.to:e>m.from&&e<=m.to))return x4e(n,e,t,c,m,d,o)}}return M4e(n,e,t,s,a.type,r,o)}function x4e(n,e,t,i,r,o,s){let a=i.parent,c={from:r.from,to:r.to},d=0,m=a?.cursor();if(m&&(t<0?m.childBefore(i.from):m.childAfter(i.to)))do if(t<0?m.to<=i.from:m.from>=i.to){if(d==0&&o.indexOf(m.type.name)>-1&&m.from<m.to){let v=PR(m);return{start:c,end:v?{from:v.from,to:v.to}:void 0,matched:!0}}else if(RR(m.type,t,s))d++;else if(RR(m.type,-t,s)){if(d==0){let v=PR(m);return{start:c,end:v&&v.from<v.to?{from:v.from,to:v.to}:void 0,matched:!1}}d--}}while(t<0?m.prevSibling():m.nextSibling());return{start:c,matched:!1}}function M4e(n,e,t,i,r,o,s){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),c=s.indexOf(a);if(c<0||c%2==0!=t>0)return null;let d={from:t<0?e-1:e,to:t>0?e+1:e},m=n.doc.iterRange(e,t>0?n.doc.length:0),v=0;for(let M=0;!m.next().done&&M<=o;){let B=m.value;t<0&&(M+=B.length);let P=e+M*t;for(let U=t>0?0:B.length-1,z=t>0?B.length:-1;U!=z;U+=t){let V=s.indexOf(B[U]);if(!(V<0||i.resolveInner(P+U,1).type!=r))if(V%2==0==t>0)v++;else{if(v==1)return{start:d,end:{from:P+U,to:P+U+1},matched:V>>1==c>>1};v--}}t>0&&(M+=B.length)}return m.done?{start:d,matched:!1}:null}const w4e=Object.create(null),nW=[Td.none],iW=[],rW=Object.create(null),S4e=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])S4e[n]=E4e(w4e,e);function dI(n,e){iW.indexOf(n)>-1||(iW.push(n),console.warn(e))}function E4e(n,e){let t=[];for(let a of e.split(" ")){let c=[];for(let d of a.split(".")){let m=n[d]||cn[d];m?typeof m=="function"?c.length?c=c.map(m):dI(d,`Modifier ${d} used at start of tag`):c.length?dI(d,`Tag ${d} used as modifier`):c=Array.isArray(m)?m:[m]:dI(d,`Unknown highlighting tag ${d}`)}for(let d of c)t.push(d)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+t.map(a=>a.id),o=rW[r];if(o)return o.id;let s=rW[r]=Td.define({id:nW.length,name:i,props:[zne({[i]:t})]});return nW.push(s),s.id}Ca.RTL,Ca.LTR;const B4e=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=jU(n.state,t.from);return i.line?O4e(n):i.block?T4e(n):!1};function zU(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=n(e,t);return r?(i(t.update(r)),!0):!1}}const O4e=zU(R4e,0),I4e=zU(oie,0),T4e=zU((n,e)=>oie(n,e,D4e(e)),0);function jU(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const O3=50;function k4e(n,{open:e,close:t},i,r){let o=n.sliceDoc(i-O3,i),s=n.sliceDoc(r,r+O3),a=/\s*$/.exec(o)[0].length,c=/^\s*/.exec(s)[0].length,d=o.length-a;if(o.slice(d-e.length,d)==e&&s.slice(c,c+t.length)==t)return{open:{pos:i-a,margin:a&&1},close:{pos:r+c,margin:c&&1}};let m,v;r-i<=2*O3?m=v=n.sliceDoc(i,r):(m=n.sliceDoc(i,i+O3),v=n.sliceDoc(r-O3,r));let M=/^\s*/.exec(m)[0].length,B=/\s*$/.exec(v)[0].length,P=v.length-B-t.length;return m.slice(M,M+e.length)==e&&v.slice(P,P+t.length)==t?{open:{pos:i+M+e.length,margin:/\s/.test(m.charAt(M+e.length))?1:0},close:{pos:r-B-t.length,margin:/\s/.test(v.charAt(P-1))?1:0}}:null}function D4e(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),r=t.to<=i.to?i:n.doc.lineAt(t.to);r.from>i.from&&r.from==t.to&&(r=t.to==i.to+1?i:n.doc.lineAt(t.to-1));let o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function oie(n,e,t=e.selection.ranges){let i=t.map(o=>jU(e,o.from).block);if(!i.every(o=>o))return null;let r=t.map((o,s)=>k4e(e,i[s],o.from,o.to));if(n!=2&&!r.every(o=>o))return{changes:e.changes(t.map((o,s)=>r[s]?[]:[{from:o.from,insert:i[s].open+" "},{from:o.to,insert:" "+i[s].close}]))};if(n!=1&&r.some(o=>o)){let o=[];for(let s=0,a;s<r.length;s++)if(a=r[s]){let c=i[s],{open:d,close:m}=a;o.push({from:d.pos-c.open.length,to:d.pos+d.margin},{from:m.pos-m.margin,to:m.pos+c.close.length})}return{changes:o}}return null}function R4e(n,e,t=e.selection.ranges){let i=[],r=-1;for(let{from:o,to:s}of t){let a=i.length,c=1e9,d=jU(e,o).line;if(d){for(let m=o;m<=s;){let v=e.doc.lineAt(m);if(v.from>r&&(o==s||s>v.from)){r=v.from;let M=/^\s*/.exec(v.text)[0].length,B=M==v.length,P=v.text.slice(M,M+d.length)==d?M:-1;M<v.text.length&&M<c&&(c=M),i.push({line:v,comment:P,token:d,indent:M,empty:B,single:!1})}m=v.to+1}if(c<1e9)for(let m=a;m<i.length;m++)i[m].indent<i[m].line.text.length&&(i[m].indent=c);i.length==a+1&&(i[a].single=!0)}}if(n!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:a,token:c,indent:d,empty:m,single:v}of i)(v||!m)&&o.push({from:a.from+d,insert:c+" "});let s=e.changes(o);return{changes:s,selection:e.selection.map(s,1)}}else if(n!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:a,token:c}of i)if(a>=0){let d=s.from+a,m=d+c.length;s.text[m-s.from]==" "&&m++,o.push({from:d,to:m})}return{changes:o}}return null}const LR=Q1.define(),P4e=Q1.define(),L4e=Bi.define(),sie=Bi.define({combine(n){return Wm(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,r)=>e(i,r)||t(i,r)})}}),aie=mc.define({create(){return hg.empty},update(n,e){let t=e.state.facet(sie),i=e.annotation(LR);if(i){let c=Ed.fromTransaction(e,i.selection),d=i.side,m=d==0?n.undone:n.done;return c?m=VE(m,m.length,t.minDepth,c):m=cie(m,e.startState.selection),new hg(d==0?i.rest:m,d==0?m:i.rest)}let r=e.annotation(P4e);if((r=="full"||r=="before")&&(n=n.isolate()),e.annotation(pc.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=Ed.fromTransaction(e),s=e.annotation(pc.time),a=e.annotation(pc.userEvent);return o?n=n.addChanges(o,s,a,t,e):e.selection&&(n=n.addSelection(e.startState.selection,s,a,t.newGroupDelay)),(r=="full"||r=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new hg(n.done.map(Ed.fromJSON),n.undone.map(Ed.fromJSON))}});function U4e(n={}){return[aie,sie.of(n),wi.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?lie:e.inputType=="historyRedo"?UR:null;return i?(e.preventDefault(),i(t)):!1}})]}function DB(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let r=t.field(aie,!1);if(!r)return!1;let o=r.pop(n,t,e);return o?(i(o),!0):!1}}const lie=DB(0,!1),UR=DB(1,!1),K4e=DB(0,!0),F4e=DB(1,!0);class Ed{constructor(e,t,i,r,o){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=r,this.selectionsAfter=o}setSelAfter(e){return new Ed(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Ed(e.changes&&Ac.fromJSON(e.changes),[],e.mapped&&_g.fromJSON(e.mapped),e.startSelection&&Sn.fromJSON(e.startSelection),e.selectionsAfter.map(Sn.fromJSON))}static fromTransaction(e,t){let i=Cp;for(let r of e.startState.facet(L4e)){let o=r(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new Ed(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,Cp)}static selection(e){return new Ed(void 0,Cp,void 0,void 0,e)}}function VE(n,e,t,i){let r=e+1>t+20?e-t-1:0,o=n.slice(r,e);return o.push(i),o}function z4e(n,e){let t=[],i=!1;return n.iterChangedRanges((r,o)=>t.push(r,o)),e.iterChangedRanges((r,o,s,a)=>{for(let c=0;c<t.length;){let d=t[c++],m=t[c++];a>=d&&s<=m&&(i=!0)}}),i}function j4e(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function uie(n,e){return n.length?e.length?n.concat(e):n:e}const Cp=[],N4e=200;function cie(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-N4e));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),VE(n,n.length-1,1e9,t.setSelAfter(i)))}else return[Ed.selection([e])]}function G4e(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function fI(n,e){if(!n.length)return n;let t=n.length,i=Cp;for(;t;){let r=W4e(n[t-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let o=n.slice(0,t);return o[t-1]=r,o}else e=r.mapped,t--,i=r.selectionsAfter}return i.length?[Ed.selection(i)]:Cp}function W4e(n,e,t){let i=uie(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):Cp,t);if(!n.changes)return Ed.selection(i);let r=n.changes.map(e),o=e.mapDesc(n.changes,!0),s=n.mapped?n.mapped.composeDesc(o):o;return new Ed(r,eo.mapEffects(n.effects,e),s,n.startSelection.map(o),i)}const Q4e=/^(input\.type|delete)($|\.)/;class hg{constructor(e,t,i=0,r=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new hg(this.done,this.undone):this}addChanges(e,t,i,r,o){let s=this.done,a=s[s.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||Q4e.test(i))&&(!a.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(o,z4e(a.changes,e.changes))||i=="input.type.compose")?s=VE(s,s.length-1,r.minDepth,new Ed(e.changes.compose(a.changes),uie(eo.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Cp)):s=VE(s,s.length,r.minDepth,e),new hg(s,Cp,t,i)}addSelection(e,t,i,r){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:Cp;return o.length>0&&t-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&j4e(o[o.length-1],e)?this:new hg(cie(this.done,e),this.undone,t,i)}addMapping(e){return new hg(fI(this.done,e),fI(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let o=r[r.length-1],s=o.selectionsAfter[0]||t.selection;if(i&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:LR.of({side:e,rest:G4e(r),selection:s}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let a=r.length==1?Cp:r.slice(0,r.length-1);return o.mapped&&(a=fI(a,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:LR.of({side:e,rest:a,selection:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}hg.empty=new hg(Cp,Cp);const q4e=[{key:"Mod-z",run:lie,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:UR,preventDefault:!0},{linux:"Ctrl-Shift-z",run:UR,preventDefault:!0},{key:"Mod-u",run:K4e,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:F4e,preventDefault:!0}];function j2(n,e){return Sn.create(n.ranges.map(e),n.mainIndex)}function Qm(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function qm({state:n,dispatch:e},t){let i=j2(n.selection,t);return i.eq(n.selection,!0)?!1:(e(Qm(n,i)),!0)}function RB(n,e){return Sn.cursor(e?n.to:n.from)}function Aie(n,e){return qm(n,t=>t.empty?n.moveByChar(t,e):RB(t,e))}function XA(n){return n.textDirectionAt(n.state.selection.main.head)==Ca.LTR}const hie=n=>Aie(n,!XA(n)),die=n=>Aie(n,XA(n));function fie(n,e){return qm(n,t=>t.empty?n.moveByGroup(t,e):RB(t,e))}const Y4e=n=>fie(n,!XA(n)),V4e=n=>fie(n,XA(n));function $4e(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function PB(n,e,t){let i=HA(n).resolveInner(e.head),r=t?Co.closedBy:Co.openedBy;for(let c=e.head;;){let d=t?i.childAfter(c):i.childBefore(c);if(!d)break;$4e(n,d,r)?i=d:c=t?d.to:d.from}let o=i.type.prop(r),s,a;return o&&(s=t?Ag(n,i.from,1):Ag(n,i.to,-1))&&s.matched?a=t?s.end.to:s.end.from:a=t?i.to:i.from,Sn.cursor(a,t?-1:1)}const H4e=n=>qm(n,e=>PB(n.state,e,!XA(n))),Z4e=n=>qm(n,e=>PB(n.state,e,XA(n)));function pie(n,e){return qm(n,t=>{if(!t.empty)return RB(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const mie=n=>pie(n,!1),gie=n=>pie(n,!0);function yie(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,r;if(e){for(let o of n.state.facet(wi.scrollMargins)){let s=o(n);s?.top&&(t=Math.max(s?.top,t)),s?.bottom&&(i=Math.max(s?.bottom,i))}r=n.scrollDOM.clientHeight-t-i}else r=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,r-5)}}function vie(n,e){let t=yie(n),{state:i}=n,r=j2(i.selection,s=>s.empty?n.moveVertically(s,e,t.height):RB(s,e));if(r.eq(i.selection))return!1;let o;if(t.selfScroll){let s=n.coordsAtPos(i.selection.main.head),a=n.scrollDOM.getBoundingClientRect(),c=a.top+t.marginTop,d=a.bottom-t.marginBottom;s&&s.top>c&&s.bottom<d&&(o=wi.scrollIntoView(r.main.head,{y:"start",yMargin:s.top-c}))}return n.dispatch(Qm(i,r),{effects:o}),!0}const oW=n=>vie(n,!1),KR=n=>vie(n,!0);function zv(n,e,t){let i=n.lineBlockAt(e.head),r=n.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?i.to:i.from)&&(r=n.moveToLineBoundary(e,t,!1)),!t&&r.head==i.from&&i.length){let o=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&e.head!=i.from+o&&(r=Sn.cursor(i.from+o))}return r}const X4e=n=>qm(n,e=>zv(n,e,!0)),J4e=n=>qm(n,e=>zv(n,e,!1)),e5e=n=>qm(n,e=>zv(n,e,!XA(n))),t5e=n=>qm(n,e=>zv(n,e,XA(n))),n5e=n=>qm(n,e=>Sn.cursor(n.lineBlockAt(e.head).from,1)),i5e=n=>qm(n,e=>Sn.cursor(n.lineBlockAt(e.head).to,-1));function r5e(n,e,t){let i=!1,r=j2(n.selection,o=>{let s=Ag(n,o.head,-1)||Ag(n,o.head,1)||o.head>0&&Ag(n,o.head-1,1)||o.head<n.doc.length&&Ag(n,o.head+1,-1);if(!s||!s.end)return o;i=!0;let a=s.start.from==o.head?s.end.to:s.end.from;return Sn.cursor(a)});return i?(e(Qm(n,r)),!0):!1}const o5e=({state:n,dispatch:e})=>r5e(n,e);function Bp(n,e){let t=j2(n.state.selection,i=>{let r=e(i);return Sn.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Qm(n.state,t)),!0)}function bie(n,e){return Bp(n,t=>n.moveByChar(t,e))}const Cie=n=>bie(n,!XA(n)),_ie=n=>bie(n,XA(n));function xie(n,e){return Bp(n,t=>n.moveByGroup(t,e))}const s5e=n=>xie(n,!XA(n)),a5e=n=>xie(n,XA(n)),l5e=n=>Bp(n,e=>PB(n.state,e,!XA(n))),u5e=n=>Bp(n,e=>PB(n.state,e,XA(n)));function Mie(n,e){return Bp(n,t=>n.moveVertically(t,e))}const wie=n=>Mie(n,!1),Sie=n=>Mie(n,!0);function Eie(n,e){return Bp(n,t=>n.moveVertically(t,e,yie(n).height))}const sW=n=>Eie(n,!1),aW=n=>Eie(n,!0),c5e=n=>Bp(n,e=>zv(n,e,!0)),A5e=n=>Bp(n,e=>zv(n,e,!1)),h5e=n=>Bp(n,e=>zv(n,e,!XA(n))),d5e=n=>Bp(n,e=>zv(n,e,XA(n))),f5e=n=>Bp(n,e=>Sn.cursor(n.lineBlockAt(e.head).from)),p5e=n=>Bp(n,e=>Sn.cursor(n.lineBlockAt(e.head).to)),lW=({state:n,dispatch:e})=>(e(Qm(n,{anchor:0})),!0),uW=({state:n,dispatch:e})=>(e(Qm(n,{anchor:n.doc.length})),!0),cW=({state:n,dispatch:e})=>(e(Qm(n,{anchor:n.selection.main.anchor,head:0})),!0),AW=({state:n,dispatch:e})=>(e(Qm(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),m5e=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),g5e=({state:n,dispatch:e})=>{let t=LB(n).map(({from:i,to:r})=>Sn.range(i,Math.min(r+1,n.doc.length)));return e(n.update({selection:Sn.create(t),userEvent:"select"})),!0},y5e=({state:n,dispatch:e})=>{let t=j2(n.selection,i=>{let r=HA(n),o=r.resolveStack(i.from,1);if(i.empty){let s=r.resolveStack(i.from,-1);s.node.from>=o.node.from&&s.node.to<=o.node.to&&(o=s)}for(let s=o;s;s=s.next){let{node:a}=s;if((a.from<i.from&&a.to>=i.to||a.to>i.to&&a.from<=i.from)&&s.next)return Sn.range(a.to,a.from)}return i});return t.eq(n.selection)?!1:(e(Qm(n,t)),!0)};function Bie(n,e){let{state:t}=n,i=t.selection,r=t.selection.ranges.slice();for(let o of t.selection.ranges){let s=t.doc.lineAt(o.head);if(e?s.to<n.state.doc.length:s.from>0)for(let a=o;;){let c=n.moveVertically(a,e);if(c.head<s.from||c.head>s.to){r.some(d=>d.head==c.head)||r.push(c);break}else{if(c.head==a.head)break;a=c}}}return r.length==i.ranges.length?!1:(n.dispatch(Qm(t,Sn.create(r,r.length-1))),!0)}const v5e=n=>Bie(n,!1),b5e=n=>Bie(n,!0),C5e=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=Sn.create([t.main]):t.main.empty||(i=Sn.create([Sn.cursor(t.main.head)])),i?(e(Qm(n,i)),!0):!1};function EM(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,r=i.changeByRange(o=>{let{from:s,to:a}=o;if(s==a){let c=e(o);c<s?(t="delete.backward",c=Uw(n,c,!1)):c>s&&(t="delete.forward",c=Uw(n,c,!0)),s=Math.min(s,c),a=Math.max(a,c)}else s=Uw(n,s,!1),a=Uw(n,a,!0);return s==a?{range:o}:{changes:{from:s,to:a},range:Sn.cursor(s,s<o.head?-1:1)}});return r.changes.empty?!1:(n.dispatch(i.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?wi.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Uw(n,e,t){if(n instanceof wi)for(let i of n.state.facet(wi.atomicRanges).map(r=>r(n)))i.between(e,e,(r,o)=>{r<e&&o>e&&(e=t?o:r)});return e}const Oie=(n,e,t)=>EM(n,i=>{let r=i.from,{state:o}=n,s=o.doc.lineAt(r),a,c;if(t&&!e&&r>s.from&&r<s.from+200&&!/[^ \t]/.test(a=s.text.slice(0,r-s.from))){if(a[a.length-1]=="	")return r-1;let d=z2(a,o.tabSize),m=d%QE(o)||QE(o);for(let v=0;v<m&&a[a.length-1-v]==" ";v++)r--;c=r}else c=fc(s.text,r-s.from,e,e)+s.from,c==r&&s.number!=(e?o.doc.lines:1)?c+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(s.text.slice(c-s.from,r-s.from))&&(c=fc(s.text,c-s.from,!1,!1)+s.from);return c}),FR=n=>Oie(n,!1,!0),Iie=n=>Oie(n,!0,!1),Tie=(n,e)=>EM(n,t=>{let i=t.head,{state:r}=n,o=r.doc.lineAt(i),s=r.charCategorizer(i);for(let a=null;;){if(i==(e?o.to:o.from)){i==t.head&&o.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let c=fc(o.text,i-o.from,e)+o.from,d=o.text.slice(Math.min(i,c)-o.from,Math.max(i,c)-o.from),m=s(d);if(a!=null&&m!=a)break;(d!=" "||i!=t.head)&&(a=m),i=c}return i}),kie=n=>Tie(n,!1),_5e=n=>Tie(n,!0),x5e=n=>EM(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),M5e=n=>EM(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),w5e=n=>EM(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),S5e=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:As.of(["",""])},range:Sn.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},E5e=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let r=i.from,o=n.doc.lineAt(r),s=r==o.from?r-1:fc(o.text,r-o.from,!1)+o.from,a=r==o.to?r+1:fc(o.text,r-o.from,!0)+o.from;return{changes:{from:s,to:a,insert:n.doc.slice(r,a).append(n.doc.slice(s,r))},range:Sn.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function LB(n){let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.from),o=n.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=n.doc.lineAt(i.to-1)),t>=r.number){let s=e[e.length-1];s.to=o.to,s.ranges.push(i)}else e.push({from:r.from,to:o.to,ranges:[i]});t=o.number+1}return e}function Die(n,e,t){if(n.readOnly)return!1;let i=[],r=[];for(let o of LB(n)){if(t?o.to==n.doc.length:o.from==0)continue;let s=n.doc.lineAt(t?o.to+1:o.from-1),a=s.length+1;if(t){i.push({from:o.to,to:s.to},{from:o.from,insert:s.text+n.lineBreak});for(let c of o.ranges)r.push(Sn.range(Math.min(n.doc.length,c.anchor+a),Math.min(n.doc.length,c.head+a)))}else{i.push({from:s.from,to:o.from},{from:o.to,insert:n.lineBreak+s.text});for(let c of o.ranges)r.push(Sn.range(c.anchor-a,c.head-a))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:Sn.create(r,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const B5e=({state:n,dispatch:e})=>Die(n,e,!1),O5e=({state:n,dispatch:e})=>Die(n,e,!0);function Rie(n,e,t){if(n.readOnly)return!1;let i=[];for(let r of LB(n))t?i.push({from:r.from,insert:n.doc.slice(r.from,r.to)+n.lineBreak}):i.push({from:r.to,insert:n.lineBreak+n.doc.slice(r.from,r.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const I5e=({state:n,dispatch:e})=>Rie(n,e,!1),T5e=({state:n,dispatch:e})=>Rie(n,e,!0),k5e=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(LB(e).map(({from:r,to:o})=>(r>0?r--:o<e.doc.length&&o++,{from:r,to:o}))),i=j2(e.selection,r=>{let o;if(n.lineWrapping){let s=n.lineBlockAt(r.head),a=n.coordsAtPos(r.head,r.assoc||1);a&&(o=s.bottom+n.documentTop-a.bottom+n.defaultLineHeight/2)}return n.moveVertically(r,!0,o)}).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function D5e(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=HA(n).resolveInner(e),i=t.childBefore(e),r=t.childAfter(e),o;return i&&r&&i.to<=e&&r.from>=e&&(o=i.type.prop(Co.closedBy))&&o.indexOf(r.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(r.from).from&&!/\S/.test(n.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const hW=Pie(!1),R5e=Pie(!0);function Pie(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:o,to:s}=r,a=e.doc.lineAt(o),c=!n&&o==s&&D5e(e,o);n&&(o=s=(s<=a.to?a:e.doc.lineAt(s)).to);let d=new TB(e,{simulateBreak:o,simulateDoubleBreak:!!c}),m=KU(d,o);for(m==null&&(m=z2(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));s<a.to&&/\s/.test(a.text[s-a.from]);)s++;c?{from:o,to:s}=c:o>a.from&&o<a.from+100&&!/\S/.test(a.text.slice(0,o))&&(o=a.from);let v=["",M5(e,m)];return c&&v.push(M5(e,d.lineIndent(a.from,-1))),{changes:{from:o,to:s,insert:As.of(v)},range:Sn.cursor(o+1+v[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function NU(n,e){let t=-1;return n.changeByRange(i=>{let r=[];for(let s=i.from;s<=i.to;){let a=n.doc.lineAt(s);a.number>t&&(i.empty||i.to>a.from)&&(e(a,r,i),t=a.number),s=a.to+1}let o=n.changes(r);return{changes:r,range:Sn.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const P5e=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new TB(n,{overrideIndentation:o=>{let s=t[o];return s??-1}}),r=NU(n,(o,s,a)=>{let c=KU(i,o.from);if(c==null)return;/\S/.test(o.text)||(c=0);let d=/^\s*/.exec(o.text)[0],m=M5(n,c);(d!=m||a.from<o.from+d.length)&&(t[o.from]=c,s.push({from:o.from,to:o.from+d.length,insert:m}))});return r.changes.empty||e(n.update(r,{userEvent:"indent"})),!0},L5e=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(NU(n,(t,i)=>{i.push({from:t.from,insert:n.facet(UU)})}),{userEvent:"input.indent"})),!0),U5e=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(NU(n,(t,i)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let o=z2(r,n.tabSize),s=0,a=M5(n,Math.max(0,o-QE(n)));for(;s<r.length&&s<a.length&&r.charCodeAt(s)==a.charCodeAt(s);)s++;i.push({from:t.from+s,to:t.from+r.length,insert:a.slice(s)})}),{userEvent:"delete.dedent"})),!0),K5e=n=>(n.setTabFocusMode(),!0),F5e=[{key:"Ctrl-b",run:hie,shift:Cie,preventDefault:!0},{key:"Ctrl-f",run:die,shift:_ie},{key:"Ctrl-p",run:mie,shift:wie},{key:"Ctrl-n",run:gie,shift:Sie},{key:"Ctrl-a",run:n5e,shift:f5e},{key:"Ctrl-e",run:i5e,shift:p5e},{key:"Ctrl-d",run:Iie},{key:"Ctrl-h",run:FR},{key:"Ctrl-k",run:x5e},{key:"Ctrl-Alt-h",run:kie},{key:"Ctrl-o",run:S5e},{key:"Ctrl-t",run:E5e},{key:"Ctrl-v",run:KR}],z5e=[{key:"ArrowLeft",run:hie,shift:Cie,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Y4e,shift:s5e,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:e5e,shift:h5e,preventDefault:!0},{key:"ArrowRight",run:die,shift:_ie,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:V4e,shift:a5e,preventDefault:!0},{mac:"Cmd-ArrowRight",run:t5e,shift:d5e,preventDefault:!0},{key:"ArrowUp",run:mie,shift:wie,preventDefault:!0},{mac:"Cmd-ArrowUp",run:lW,shift:cW},{mac:"Ctrl-ArrowUp",run:oW,shift:sW},{key:"ArrowDown",run:gie,shift:Sie,preventDefault:!0},{mac:"Cmd-ArrowDown",run:uW,shift:AW},{mac:"Ctrl-ArrowDown",run:KR,shift:aW},{key:"PageUp",run:oW,shift:sW},{key:"PageDown",run:KR,shift:aW},{key:"Home",run:J4e,shift:A5e,preventDefault:!0},{key:"Mod-Home",run:lW,shift:cW},{key:"End",run:X4e,shift:c5e,preventDefault:!0},{key:"Mod-End",run:uW,shift:AW},{key:"Enter",run:hW,shift:hW},{key:"Mod-a",run:m5e},{key:"Backspace",run:FR,shift:FR,preventDefault:!0},{key:"Delete",run:Iie,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:kie,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:_5e,preventDefault:!0},{mac:"Mod-Backspace",run:M5e,preventDefault:!0},{mac:"Mod-Delete",run:w5e,preventDefault:!0}].concat(F5e.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),j5e=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:H4e,shift:l5e},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Z4e,shift:u5e},{key:"Alt-ArrowUp",run:B5e},{key:"Shift-Alt-ArrowUp",run:I5e},{key:"Alt-ArrowDown",run:O5e},{key:"Shift-Alt-ArrowDown",run:T5e},{key:"Mod-Alt-ArrowUp",run:v5e},{key:"Mod-Alt-ArrowDown",run:b5e},{key:"Escape",run:C5e},{key:"Mod-Enter",run:R5e},{key:"Alt-l",mac:"Ctrl-l",run:g5e},{key:"Mod-i",run:y5e,preventDefault:!0},{key:"Mod-[",run:U5e},{key:"Mod-]",run:L5e},{key:"Mod-Alt-\\",run:P5e},{key:"Shift-Mod-k",run:k5e},{key:"Shift-Mod-\\",run:o5e},{key:"Mod-/",run:B4e},{key:"Alt-A",run:I4e},{key:"Ctrl-m",mac:"Shift-Alt-m",run:K5e}].concat(z5e),dW=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class M2{constructor(e,t,i=0,r=e.length,o,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=o?a=>o(dW(a)):dW,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return xd(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=pU(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=ig(e);let r=this.normalize(t);if(r.length)for(let o=0,s=i;;o++){let a=r.charCodeAt(o),c=this.match(a,s,this.bufferPos+this.bufferStart);if(o==r.length-1){if(c)return this.value=c,this;break}s==i&&o<t.length&&t.charCodeAt(o)==a&&s++}}}match(e,t,i){let r=null;for(let o=0;o<this.matches.length;o+=2){let s=this.matches[o],a=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?r={from:this.matches[o+1],to:i}:(this.matches[o]++,a=!0)),a||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:t,to:i}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(M2.prototype[Symbol.iterator]=function(){return this});const Lie={from:-1,to:-1,match:/.*/.exec("")},GU="gm"+(/x/.unicode==null?"":"u");class Uie{constructor(e,t,i,r=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=Lie,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Kie(e,t,i,r,o);this.re=new RegExp(t,GU+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let s=e.lineAt(r);this.curLineStart=s.from,this.matchPos=$E(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,r=i+t[0].length;if(this.matchPos=$E(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const pI=new WeakMap;class $x{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let r=pI.get(e);if(!r||r.from>=i||r.to<=t){let a=new $x(t,e.sliceString(t,i));return pI.set(e,a),a}if(r.from==t&&r.to==i)return r;let{text:o,from:s}=r;return s>t&&(o=e.sliceString(t,s)+o,s=t),r.to<i&&(o+=e.sliceString(r.to,i)),pI.set(e,new $x(s,o)),new $x(t,o.slice(t-s,i-s))}}class Kie{constructor(e,t,i,r,o){this.text=e,this.to=o,this.done=!1,this.value=Lie,this.matchPos=$E(e,r),this.re=new RegExp(t,GU+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=$x.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,r=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this.matchPos=$E(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=$x.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Uie.prototype[Symbol.iterator]=Kie.prototype[Symbol.iterator]=function(){return this});function N5e(n){try{return new RegExp(n,GU),!0}catch{return!1}}function $E(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function zR(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=ya("input",{class:"cm-textfield",name:"line",value:e}),i=ya("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),n.dispatch({effects:S4.of(!1)}),n.focus()):o.keyCode==13&&(o.preventDefault(),r())},onsubmit:o=>{o.preventDefault(),r()}},ya("label",n.state.phrase("Go to line"),": ",t)," ",ya("button",{class:"cm-button",type:"submit"},n.state.phrase("go")),ya("button",{name:"close",onclick:()=>{n.dispatch({effects:S4.of(!1)}),n.focus()},"aria-label":n.state.phrase("close"),type:"button"},[""]));function r(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!o)return;let{state:s}=n,a=s.doc.lineAt(s.selection.main.head),[,c,d,m,v]=o,M=m?+m.slice(1):0,B=d?+d:a.number;if(d&&v){let z=B/100;c&&(z=z*(c=="-"?-1:1)+a.number/s.doc.lines),B=Math.round(s.doc.lines*z)}else d&&c&&(B=B*(c=="-"?-1:1)+a.number);let P=s.doc.line(Math.max(1,Math.min(s.doc.lines,B))),U=Sn.cursor(P.from+Math.max(0,Math.min(M,P.length)));n.dispatch({effects:[S4.of(!1),wi.scrollIntoView(U.from,{y:"center"})],selection:U}),n.focus()}return{dom:i}}const S4=eo.define(),fW=mc.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(S4)&&(n=t.value);return n},provide:n=>C5.from(n,e=>e?zR:null)}),G5e=n=>{let e=b5(n,zR);if(!e){let t=[S4.of(!0)];n.state.field(fW,!1)==null&&t.push(eo.appendConfig.of([fW,W5e])),n.dispatch({effects:t}),e=b5(n,zR)}return e&&e.dom.querySelector("input").select(),!0},W5e=wi.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Q5e={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},q5e=Bi.define({combine(n){return Wm(n,Q5e,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function Y5e(n){return[X5e,Z5e]}const V5e=vr.mark({class:"cm-selectionMatch"}),$5e=vr.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function pW(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=ll.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=ll.Word)}function H5e(n,e,t,i){return n(e.sliceDoc(t,t+1))==ll.Word&&n(e.sliceDoc(i-1,i))==ll.Word}const Z5e=yu.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(q5e),{state:t}=n,i=t.selection;if(i.ranges.length>1)return vr.none;let r=i.main,o,s=null;if(r.empty){if(!e.highlightWordAroundCursor)return vr.none;let c=t.wordAt(r.head);if(!c)return vr.none;s=t.charCategorizer(r.head),o=t.sliceDoc(c.from,c.to)}else{let c=r.to-r.from;if(c<e.minSelectionLength||c>200)return vr.none;if(e.wholeWords){if(o=t.sliceDoc(r.from,r.to),s=t.charCategorizer(r.head),!(pW(s,t,r.from,r.to)&&H5e(s,t,r.from,r.to)))return vr.none}else if(o=t.sliceDoc(r.from,r.to),!o)return vr.none}let a=[];for(let c of n.visibleRanges){let d=new M2(t.doc,o,c.from,c.to);for(;!d.next().done;){let{from:m,to:v}=d.value;if((!s||pW(s,t,m,v))&&(r.empty&&m<=r.from&&v>=r.to?a.push($5e.range(m,v)):(m>=r.to||v<=r.from)&&a.push(V5e.range(m,v)),a.length>e.maxMatches))return vr.none}}return vr.set(a)}},{decorations:n=>n.decorations}),X5e=wi.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),J5e=({state:n,dispatch:e})=>{let{selection:t}=n,i=Sn.create(t.ranges.map(r=>n.wordAt(r.head)||Sn.cursor(r.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function eMe(n,e){let{main:t,ranges:i}=n.selection,r=n.wordAt(t.head),o=r&&r.from==t.from&&r.to==t.to;for(let s=!1,a=new M2(n.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(s)return null;a=new M2(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),s=!0}else{if(s&&i.some(c=>c.from==a.value.from))continue;if(o){let c=n.wordAt(a.value.from);if(!c||c.from!=a.value.from||c.to!=a.value.to)continue}return a.value}}const tMe=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(o=>o.from===o.to))return J5e({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=i))return!1;let r=eMe(n,i);return r?(e(n.update({selection:n.selection.addRange(Sn.range(r.from,r.to),!1),effects:wi.scrollIntoView(r.to)})),!0):!1},N2=Bi.define({combine(n){return Wm(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new dMe(e),scrollToMatch:e=>wi.scrollIntoView(e)})}});class Fie{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||N5e(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new oMe(this):new iMe(this)}getCursor(e,t=0,i){let r=e.doc?e:as.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?xx(this,r,t,i):_x(this,r,t,i)}}class zie{constructor(e){this.spec=e}}function _x(n,e,t,i){return new M2(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:r=>r.toLowerCase(),n.wholeWord?nMe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function nMe(n,e){return(t,i,r,o)=>((o>t||o+r.length<i)&&(o=Math.max(0,t-2),r=n.sliceString(o,Math.min(n.length,i+2))),(e(HE(r,t-o))!=ll.Word||e(ZE(r,t-o))!=ll.Word)&&(e(ZE(r,i-o))!=ll.Word||e(HE(r,i-o))!=ll.Word))}class iMe extends zie{constructor(e){super(e)}nextMatch(e,t,i){let r=_x(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let o=Math.min(e.doc.length,t+this.spec.unquoted.length);r=_x(this.spec,e,0,o).nextOverlapping()}return r.done||r.value.from==t&&r.value.to==i?null:r.value}prevMatchInRange(e,t,i){for(let r=i;;){let o=Math.max(t,r-1e4-this.spec.unquoted.length),s=_x(this.spec,e,o,r),a=null;for(;!s.nextOverlapping().done;)a=s.value;if(a)return a;if(o==t)return null;r-=1e4}}prevMatch(e,t,i){let r=this.prevMatchInRange(e,0,t);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=t||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=_x(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let o=_x(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}function xx(n,e,t,i){return new Uie(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?rMe(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function HE(n,e){return n.slice(fc(n,e,!1),e)}function ZE(n,e){return n.slice(e,fc(n,e))}function rMe(n){return(e,t,i)=>!i[0].length||(n(HE(i.input,i.index))!=ll.Word||n(ZE(i.input,i.index))!=ll.Word)&&(n(ZE(i.input,i.index+i[0].length))!=ll.Word||n(HE(i.input,i.index+i[0].length))!=ll.Word)}class oMe extends zie{nextMatch(e,t,i){let r=xx(this.spec,e,i,e.doc.length).next();return r.done&&(r=xx(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=1;;r++){let o=Math.max(t,i-r*1e4),s=xx(this.spec,e,o,i),a=null;for(;!s.next().done;)a=s.value;if(a&&(o==t||a.from>o+10))return a;if(o==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let o=+i.slice(0,r);if(o>0&&o<e.match.length)return e.match[o]+i.slice(r)}return t})}matchAll(e,t){let i=xx(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let o=xx(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}const w5=eo.define(),WU=eo.define(),Ev=mc.define({create(n){return new mI(jR(n).create(),null)},update(n,e){for(let t of e.effects)t.is(w5)?n=new mI(t.value.create(),n.panel):t.is(WU)&&(n=new mI(n.query,t.value?QU:null));return n},provide:n=>C5.from(n,e=>e.panel)});class mI{constructor(e,t){this.query=e,this.panel=t}}const sMe=vr.mark({class:"cm-searchMatch"}),aMe=vr.mark({class:"cm-searchMatch cm-searchMatch-selected"}),lMe=yu.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Ev))}update(n){let e=n.state.field(Ev);(e!=n.startState.field(Ev)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return vr.none;let{view:t}=this,i=new z1;for(let r=0,o=t.visibleRanges,s=o.length;r<s;r++){let{from:a,to:c}=o[r];for(;r<s-1&&c>o[r+1].from-500;)c=o[++r].to;n.highlight(t.state,a,c,(d,m)=>{let v=t.state.selection.ranges.some(M=>M.from==d&&M.to==m);i.add(d,m,v?aMe:sMe)})}return i.finish()}},{decorations:n=>n.decorations});function BM(n){return e=>{let t=e.state.field(Ev,!1);return t&&t.query.spec.valid?n(e,t):Gie(e)}}const XE=BM((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);if(!i)return!1;let r=Sn.single(i.from,i.to),o=n.state.facet(N2);return n.dispatch({selection:r,effects:[qU(n,i),o.scrollToMatch(r.main,n)],userEvent:"select.search"}),Nie(n),!0}),JE=BM((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,r=e.prevMatch(t,i,i);if(!r)return!1;let o=Sn.single(r.from,r.to),s=n.state.facet(N2);return n.dispatch({selection:o,effects:[qU(n,r),s.scrollToMatch(o.main,n)],userEvent:"select.search"}),Nie(n),!0}),uMe=BM((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:Sn.create(t.map(i=>Sn.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),cMe=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:r}=t.main,o=[],s=0;for(let a=new M2(n.doc,n.sliceDoc(i,r));!a.next().done;){if(o.length>1e3)return!1;a.value.from==i&&(s=o.length),o.push(Sn.range(a.value.from,a.value.to))}return e(n.update({selection:Sn.create(o,s),userEvent:"select.search.matches"})),!0},mW=BM((n,{query:e})=>{let{state:t}=n,{from:i,to:r}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,i,i);if(!o)return!1;let s=o,a=[],c,d,m=[];s.from==i&&s.to==r&&(d=t.toText(e.getReplacement(s)),a.push({from:s.from,to:s.to,insert:d}),s=e.nextMatch(t,s.from,s.to),m.push(wi.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+".")));let v=n.state.changes(a);return s&&(c=Sn.single(s.from,s.to).map(v),m.push(qU(n,s)),m.push(t.facet(N2).scrollToMatch(c.main,n))),n.dispatch({changes:v,selection:c,effects:m,userEvent:"input.replace"}),!0}),AMe=BM((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(r=>{let{from:o,to:s}=r;return{from:o,to:s,insert:e.getReplacement(r)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:wi.announce.of(i),userEvent:"input.replace.all"}),!0});function QU(n){return n.state.facet(N2).createPanel(n)}function jR(n,e){var t,i,r,o,s;let a=n.selection.main,c=a.empty||a.to>a.from+100?"":n.sliceDoc(a.from,a.to);if(e&&!c)return e;let d=n.facet(N2);return new Fie({search:((t=e?.literal)!==null&&t!==void 0?t:d.literal)?c:c.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:d.caseSensitive,literal:(r=e?.literal)!==null&&r!==void 0?r:d.literal,regexp:(o=e?.regexp)!==null&&o!==void 0?o:d.regexp,wholeWord:(s=e?.wholeWord)!==null&&s!==void 0?s:d.wholeWord})}function jie(n){let e=b5(n,QU);return e&&e.dom.querySelector("[main-field]")}function Nie(n){let e=jie(n);e&&e==n.root.activeElement&&e.select()}const Gie=n=>{let e=n.state.field(Ev,!1);if(e&&e.panel){let t=jie(n);if(t&&t!=n.root.activeElement){let i=jR(n.state,e.query.spec);i.valid&&n.dispatch({effects:w5.of(i)}),t.focus(),t.select()}}else n.dispatch({effects:[WU.of(!0),e?w5.of(jR(n.state,e.query.spec)):eo.appendConfig.of(pMe)]});return!0},Wie=n=>{let e=n.state.field(Ev,!1);if(!e||!e.panel)return!1;let t=b5(n,QU);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:WU.of(!1)}),!0},hMe=[{key:"Mod-f",run:Gie,scope:"editor search-panel"},{key:"F3",run:XE,shift:JE,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:XE,shift:JE,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Wie,scope:"editor search-panel"},{key:"Mod-Shift-l",run:cMe},{key:"Mod-Alt-g",run:G5e},{key:"Mod-d",run:tMe,preventDefault:!0}];class dMe{constructor(e){this.view=e;let t=this.query=e.state.field(Ev).query.spec;this.commit=this.commit.bind(this),this.searchField=ya("input",{value:t.search,placeholder:lf(e,"Find"),"aria-label":lf(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ya("input",{value:t.replace,placeholder:lf(e,"Replace"),"aria-label":lf(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=ya("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=ya("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=ya("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(r,o,s){return ya("button",{class:"cm-button",name:r,onclick:o,type:"button"},s)}this.dom=ya("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>XE(e),[lf(e,"next")]),i("prev",()=>JE(e),[lf(e,"previous")]),i("select",()=>uMe(e),[lf(e,"all")]),ya("label",null,[this.caseField,lf(e,"match case")]),ya("label",null,[this.reField,lf(e,"regexp")]),ya("label",null,[this.wordField,lf(e,"by word")]),...e.state.readOnly?[]:[ya("br"),this.replaceField,i("replace",()=>mW(e),[lf(e,"replace")]),i("replaceAll",()=>AMe(e),[lf(e,"replace all")])],ya("button",{name:"close",onclick:()=>Wie(e),"aria-label":lf(e,"close"),type:"button"},[""])])}commit(){let e=new Fie({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:w5.of(e)}))}keydown(e){C2e(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?JE:XE)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),mW(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(w5)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(N2).top}}function lf(n,e){return n.state.phrase(e)}const Kw=30,Fw=/[\s\.,:;?!]/;function qU(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),r=n.state.doc.lineAt(t).to,o=Math.max(i.from,e-Kw),s=Math.min(r,t+Kw),a=n.state.sliceDoc(o,s);if(o!=i.from){for(let c=0;c<Kw;c++)if(!Fw.test(a[c+1])&&Fw.test(a[c])){a=a.slice(c);break}}if(s!=r){for(let c=a.length-1;c>a.length-Kw;c--)if(!Fw.test(a[c-1])&&Fw.test(a[c])){a=a.slice(0,c);break}}return wi.announce.of(`${n.state.phrase("current match")}. ${a} ${n.state.phrase("on line")} ${i.number}.`)}const fMe=wi.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),pMe=[Ev,VC.low(lMe),fMe];class Qie{constructor(e,t,i,r){this.state=e,this.pos=t,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=HA(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),r=t.text.slice(i-t.from,this.pos-t.from),o=r.search(qie(e,!1));return o<0?null:{from:i+o,to:this.pos,text:r.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function gW(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function mMe(n){let e=Object.create(null),t=Object.create(null);for(let{label:r}of n){e[r[0]]=!0;for(let o=1;o<r.length;o++)t[r[o]]=!0}let i=gW(e)+gW(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function gMe(n){let e=n.map(r=>typeof r=="string"?{label:r}:r),[t,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:mMe(e);return r=>{let o=r.matchBefore(i);return o||r.explicit?{from:o?o.from:r.pos,options:e,validFor:t}:null}}class yW{constructor(e,t,i,r){this.completion=e,this.source=t,this.match=i,this.score=r}}function xC(n){return n.selection.main.from}function qie(n,e){var t;let{source:i}=n,r=e&&i[0]!="^",o=i[i.length-1]!="$";return!r&&!o?n:new RegExp(`${r?"^":""}(?:${i})${o?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const Yie=Q1.define();function yMe(n,e,t,i){let{main:r}=n.selection,o=t-r.from,s=i-r.from;return{...n.changeByRange(a=>{if(a!=r&&t!=i&&n.sliceDoc(a.from+o,a.from+s)!=n.sliceDoc(t,i))return{range:a};let c=n.toText(e);return{changes:{from:a.from+o,to:i==r.from?a.to:a.from+s,insert:c},range:Sn.cursor(a.from+o+c.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const vW=new WeakMap;function vMe(n){if(!Array.isArray(n))return n;let e=vW.get(n);return e||vW.set(n,e=gMe(n)),e}const e6=eo.define(),S5=eo.define();class bMe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=xd(e,t),r=ig(i);this.chars.push(i);let o=e.slice(t,t+r),s=o.toUpperCase();this.folded.push(xd(s==o?o.toLowerCase():s,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:r,precise:o,byWord:s}=this;if(t.length==1){let Z=xd(e,0),X=ig(Z),re=X==e.length?0:-100;if(Z!=t[0])if(Z==i[0])re+=-200;else return null;return this.ret(re,[0,X])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let c=t.length,d=0;if(a<0){for(let Z=0,X=Math.min(e.length,200);Z<X&&d<c;){let re=xd(e,Z);(re==t[d]||re==i[d])&&(r[d++]=Z),Z+=ig(re)}if(d<c)return null}let m=0,v=0,M=!1,B=0,P=-1,U=-1,z=/[a-z]/.test(e),V=!0;for(let Z=0,X=Math.min(e.length,200),re=0;Z<X&&v<c;){let ie=xd(e,Z);a<0&&(m<c&&ie==t[m]&&(o[m++]=Z),B<c&&(ie==t[B]||ie==i[B]?(B==0&&(P=Z),U=Z+1,B++):B=0));let te,q=ie<255?ie>=48&&ie<=57||ie>=97&&ie<=122?2:ie>=65&&ie<=90?1:0:(te=pU(ie))!=te.toLowerCase()?1:te!=te.toUpperCase()?2:0;(!Z||q==1&&z||re==0&&q!=0)&&(t[v]==ie||i[v]==ie&&(M=!0)?s[v++]=Z:s.length&&(V=!1)),re=q,Z+=ig(ie)}return v==c&&s[0]==0&&V?this.result(-100+(M?-200:0),s,e):B==c&&P==0?this.ret(-200-e.length+(U==e.length?0:-100),[0,U]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):B==c?this.ret(-900-e.length,[P,U]):v==c?this.result(-100+(M?-200:0)+-700+(V?0:-1100),s,e):t.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,i){let r=[],o=0;for(let s of t){let a=s+(this.astral?ig(xd(i,s)):1);o&&r[o-1]==s?r[o-1]=a:(r[o++]=s,r[o++]=a)}return this.ret(e-i.length,r)}}class CMe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Yc=Bi.define({combine(n){return Wm(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:_Me,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>bW(e(i),t(i)),optionClass:(e,t)=>i=>bW(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function bW(n,e){return n?e?n+" "+e:n:e}function _Me(n,e,t,i,r,o){let s=n.textDirection==Ca.RTL,a=s,c=!1,d="top",m,v,M=e.left-r.left,B=r.right-e.right,P=i.right-i.left,U=i.bottom-i.top;if(a&&M<Math.min(P,B)?a=!1:!a&&B<Math.min(P,M)&&(a=!0),P<=(a?M:B))m=Math.max(r.top,Math.min(t.top,r.bottom-U))-e.top,v=Math.min(400,a?M:B);else{c=!0,v=Math.min(400,(s?e.right:r.right-e.left)-30);let Z=r.bottom-e.bottom;Z>=U||Z>e.top?m=t.bottom-e.top:(d="bottom",m=e.bottom-t.top)}let z=(e.bottom-e.top)/o.offsetHeight,V=(e.right-e.left)/o.offsetWidth;return{style:`${d}: ${m/z}px; max-width: ${v/V}px`,class:"cm-completionInfo-"+(c?s?"left-narrow":"right-narrow":a?"left":"right")}}function xMe(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,r,o){let s=document.createElement("span");s.className="cm-completionLabel";let a=t.displayLabel||t.label,c=0;for(let d=0;d<o.length;){let m=o[d++],v=o[d++];m>c&&s.appendChild(document.createTextNode(a.slice(c,m)));let M=s.appendChild(document.createElement("span"));M.appendChild(document.createTextNode(a.slice(m,v))),M.className="cm-completionMatchedText",c=v}return c<a.length&&s.appendChild(document.createTextNode(a.slice(c))),s},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function gI(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class MMe{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:c=>this.placeInfo(c),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:o,selected:s}=r.open,a=e.state.facet(Yc);this.optionContent=xMe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=gI(o.length,s,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",c=>{let{options:d}=e.state.field(t).open;for(let m=c.target,v;m&&m!=this.dom;m=m.parentNode)if(m.nodeName=="LI"&&(v=/-(\d+)$/.exec(m.id))&&+v[1]<d.length){this.applyCompletion(e,d[+v[1]]),c.preventDefault();return}}),this.dom.addEventListener("focusout",c=>{let d=e.state.field(this.stateField,!1);d&&d.tooltip&&e.state.facet(Yc).closeOnBlur&&c.relatedTarget!=e.contentDOM&&e.dispatch({effects:S5.of(null)})}),this.showOptions(o,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:o,selected:s,disabled:a}=i.open;(!r.open||r.open.options!=o)&&(this.range=gI(o.length,s,e.state.facet(Yc).maxRenderedOptions),this.showOptions(o,i.id)),this.updateSel(),a!=((t=r.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;(t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=gI(t.options.length,t.selected,this.view.state.facet(Yc).maxRenderedOptions),this.showOptions(t.options,e.id));let i=this.updateSelectedOption(t.selected);if(i){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:o}=r;if(!o)return;let s=typeof o=="string"?document.createTextNode(o):o(r);if(!s)return;"then"in s?s.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,r)}).catch(a=>kh(this.view.state,a,"completion info")):(this.addInfoPane(s,r),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:o}=e;i.appendChild(r),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return t&&SMe(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),o=this.space;if(!o){let s=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:s.clientWidth,bottom:s.clientHeight}}return r.top>Math.min(o.bottom,t.bottom)-10||r.bottom<Math.max(o.top,t.top)+10?null:this.view.state.facet(Yc).positionInfo(this.view,t,r,i,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",s=>{s.target==r&&s.preventDefault()});let o=null;for(let s=i.from;s<i.to;s++){let{completion:a,match:c}=e[s],{section:d}=a;if(d){let M=typeof d=="string"?d:d.name;if(M!=o&&(s>i.from||i.from==0))if(o=M,typeof d!="string"&&d.header)r.appendChild(d.header(d));else{let B=r.appendChild(document.createElement("completion-section"));B.textContent=M}}const m=r.appendChild(document.createElement("li"));m.id=t+"-"+s,m.setAttribute("role","option");let v=this.optionClass(a);v&&(m.className=v);for(let M of this.optionContent){let B=M(a,this.view.state,this.view,c);B&&m.appendChild(B)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function wMe(n,e){return t=>new MMe(t,n,e)}function SMe(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),r=t.height/n.offsetHeight;i.top<t.top?n.scrollTop-=(t.top-i.top)/r:i.bottom>t.bottom&&(n.scrollTop+=(i.bottom-t.bottom)/r)}function CW(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function EMe(n,e){let t=[],i=null,r=null,o=m=>{t.push(m);let{section:v}=m.completion;if(v){i||(i=[]);let M=typeof v=="string"?v:v.name;i.some(B=>B.name==M)||i.push(typeof v=="string"?{name:M}:v)}},s=e.facet(Yc);for(let m of n)if(m.hasResult()){let v=m.result.getMatch;if(m.result.filter===!1)for(let M of m.result.options)o(new yW(M,m.source,v?v(M):[],1e9-t.length));else{let M=e.sliceDoc(m.from,m.to),B,P=s.filterStrict?new CMe(M):new bMe(M);for(let U of m.result.options)if(B=P.match(U.label)){let z=U.displayLabel?v?v(U,B.matched):[]:B.matched,V=B.score+(U.boost||0);if(o(new yW(U,m.source,z,V)),typeof U.section=="object"&&U.section.rank==="dynamic"){let{name:Z}=U.section;r||(r=Object.create(null)),r[Z]=Math.max(V,r[Z]||-1e9)}}}}if(i){let m=Object.create(null),v=0,M=(B,P)=>(B.rank==="dynamic"&&P.rank==="dynamic"?r[P.name]-r[B.name]:0)||(typeof B.rank=="number"?B.rank:1e9)-(typeof P.rank=="number"?P.rank:1e9)||(B.name<P.name?-1:1);for(let B of i.sort(M))v-=1e5,m[B.name]=v;for(let B of t){let{section:P}=B.completion;P&&(B.score+=m[typeof P=="string"?P:P.name])}}let a=[],c=null,d=s.compareCompletions;for(let m of t.sort((v,M)=>M.score-v.score||d(v.completion,M.completion))){let v=m.completion;!c||c.label!=v.label||c.detail!=v.detail||c.type!=null&&v.type!=null&&c.type!=v.type||c.apply!=v.apply||c.boost!=v.boost?a.push(m):CW(m.completion)>CW(c)&&(a[a.length-1]=m),c=m.completion}return a}class Tx{constructor(e,t,i,r,o,s){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=r,this.selected=o,this.disabled=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Tx(this.options,_W(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,r,o,s){if(r&&!s&&e.some(d=>d.isPending))return r.setDisabled();let a=EMe(e,t);if(!a.length)return r&&e.some(d=>d.isPending)?r.setDisabled():null;let c=t.facet(Yc).selectOnOpen?0:-1;if(r&&r.selected!=c&&r.selected!=-1){let d=r.options[r.selected].completion;for(let m=0;m<a.length;m++)if(a[m].completion==d){c=m;break}}return new Tx(a,_W(i,c),{pos:e.reduce((d,m)=>m.hasResult()?Math.min(d,m.from):d,1e8),create:DMe,above:o.aboveCursor},r?r.timestamp:Date.now(),c,!1)}map(e){return new Tx(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new Tx(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class t6{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new t6(TMe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Yc),o=(i.override||t.languageDataAt("autocomplete",xC(t)).map(vMe)).map(c=>(this.active.find(m=>m.source==c)||new _p(c,this.active.some(m=>m.state!=0)?1:0)).update(e,i));o.length==this.active.length&&o.every((c,d)=>c==this.active[d])&&(o=this.active);let s=this.open,a=e.effects.some(c=>c.is(YU));s&&e.docChanged&&(s=s.map(e.changes)),e.selection||o.some(c=>c.hasResult()&&e.changes.touchesRange(c.from,c.to))||!BMe(o,this.active)||a?s=Tx.build(o,t,this.id,s,i,a):s&&s.disabled&&!o.some(c=>c.isPending)&&(s=null),!s&&o.every(c=>!c.isPending)&&o.some(c=>c.hasResult())&&(o=o.map(c=>c.hasResult()?new _p(c.source,0):c));for(let c of e.effects)c.is($ie)&&(s=s&&s.setSelected(c.value,this.id));return o==this.active&&s==this.open?this:new t6(o,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?OMe:IMe}}function BMe(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;i<e.length&&!e[i].hasResult();)i++;let r=t==n.length,o=i==e.length;if(r||o)return r==o;if(n[t++].result!=e[i++].result)return!1}}const OMe={"aria-autocomplete":"list"},IMe={};function _W(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const TMe=[];function Vie(n,e){if(n.isUserEvent("input.complete")){let i=n.annotation(Yie);if(i&&e.activateOnCompletion(i))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class _p{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let i=Vie(e,t),r=this;(i&8||i&16&&this.touches(e))&&(r=new _p(r.source,0)),i&4&&r.state==0&&(r=new _p(this.source,1)),r=r.updateFor(e,i);for(let o of e.effects)if(o.is(e6))r=new _p(r.source,1,o.value);else if(o.is(S5))r=new _p(r.source,0);else if(o.is(YU))for(let s of o.value)s.source==r.source&&(r=s);return r}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(xC(e.state))}}class Hx extends _p{constructor(e,t,i,r,o,s){super(e,3,t),this.limit=i,this.result=r,this.from=o,this.to=s}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),a=xC(e.state);if(a>s||!r||t&2&&(xC(e.startState)==this.from||a<this.limit))return new _p(this.source,t&4?1:0);let c=e.changes.mapPos(this.limit);return kMe(r.validFor,e.state,o,s)?new Hx(this.source,this.explicit,c,r,o,s):r.update&&(r=r.update(r,o,s,new Qie(e.state,a,!1)))?new Hx(this.source,this.explicit,c,r,r.from,(i=r.to)!==null&&i!==void 0?i:xC(e.state)):new _p(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Hx(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new _p(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function kMe(n,e,t,i){if(!n)return!1;let r=e.sliceDoc(t,i);return typeof n=="function"?n(r,t,i,e):qie(n,!0).test(r)}const YU=eo.define({map(n,e){return n.map(t=>t.map(e))}}),$ie=eo.define(),Md=mc.define({create(){return t6.start()},update(n,e){return n.update(e)},provide:n=>[OB.from(n,e=>e.tooltip),wi.contentAttributes.from(n,e=>e.attrs)]});function VU(n,e){const t=e.completion.apply||e.completion.label;let i=n.state.field(Md).active.find(r=>r.source==e.source);return i instanceof Hx?(typeof t=="string"?n.dispatch({...yMe(n.state,t,i.from,i.to),annotations:Yie.of(e.completion)}):t(n,e.completion,i.from,i.to),!0):!1}const DMe=wMe(Md,VU);function zw(n,e="option"){return t=>{let i=t.state.field(Md,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(Yc).interactionDelay)return!1;let r=1,o;e=="page"&&(o=Ine(t,i.open.tooltip))&&(r=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(n?1:-1):n?0:s-1;return a<0?a=e=="page"?0:s-1:a>=s&&(a=e=="page"?s-1:0),t.dispatch({effects:$ie.of(a)}),!0}}const RMe=n=>{let e=n.state.field(Md,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(Yc).interactionDelay?!1:VU(n,e.open.options[e.open.selected])},yI=n=>n.state.field(Md,!1)?(n.dispatch({effects:e6.of(!0)}),!0):!1,PMe=n=>{let e=n.state.field(Md,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:S5.of(null)}),!0)};class LMe{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const UMe=50,KMe=1e3,FMe=yu.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(Md).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(Md),t=n.state.facet(Yc);if(!n.selectionSet&&!n.docChanged&&n.startState.field(Md)==e)return;let i=n.transactions.some(o=>{let s=Vie(o,t);return s&8||(o.selection||o.docChanged)&&!(s&3)});for(let o=0;o<this.running.length;o++){let s=this.running[o];if(i||s.context.abortOnDocChange&&n.docChanged||s.updates.length+n.transactions.length>UMe&&Date.now()-s.time>KMe){for(let a of s.context.abortListeners)try{a()}catch(c){kh(this.view.state,c)}s.context.abortListeners=null,this.running.splice(o--,1)}else s.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(o=>o.effects.some(s=>s.is(e6)))&&(this.pendingStart=!0);let r=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(s=>s.active.source==o.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let o of n.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(Md);for(let t of e.active)t.isPending&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Yc).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=xC(e),i=new Qie(e,t,n.explicit,this.view),r=new LMe(n,i);this.running.push(r),Promise.resolve(n.source(i)).then(o=>{r.context.aborted||(r.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:S5.of(null)}),kh(this.view.state,o)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Yc).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Yc),i=this.view.state.field(Md);for(let r=0;r<this.running.length;r++){let o=this.running[r];if(o.done===void 0)continue;if(this.running.splice(r--,1),o.done){let a=xC(o.updates.length?o.updates[0].startState:this.view.state),c=Math.min(a,o.done.from+(o.active.explicit?0:1)),d=new Hx(o.active.source,o.active.explicit,c,o.done,o.done.from,(n=o.done.to)!==null&&n!==void 0?n:a);for(let m of o.updates)d=d.update(m,t);if(d.hasResult()){e.push(d);continue}}let s=i.active.find(a=>a.source==o.active.source);if(s&&s.isPending)if(o.done==null){let a=new _p(o.active.source,0);for(let c of o.updates)a=a.update(c,t);a.isPending||e.push(a)}else this.startQuery(s)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:YU.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(Md,!1);if(e&&e.tooltip&&this.view.state.facet(Yc).closeOnBlur){let t=e.open&&Ine(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:S5.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:e6.of(!1)}),20),this.composing=0}}}),zMe=typeof navigator=="object"&&/Win/.test(navigator.platform),jMe=VC.highest(wi.domEventHandlers({keydown(n,e){let t=e.state.field(Md,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(zMe&&n.altKey)||n.metaKey)return!1;let i=t.open.options[t.open.selected],r=t.active.find(s=>s.source==i.source),o=i.completion.commitCharacters||r.result.commitCharacters;return o&&o.indexOf(n.key)>-1&&VU(e,i),!1}})),NMe=wi.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),E5={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},cC=eo.define({map(n,e){let t=e.mapPos(n,-1,Oh.TrackAfter);return t??void 0}}),$U=new class extends Tv{};$U.startSide=1;$U.endSide=-1;const Hie=mc.define({create(){return mo.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(cC)&&(n=n.update({add:[$U.range(t.value,t.value+1)]}));return n}});function GMe(){return[QMe,Hie]}const vI="()[]{}<>";function Zie(n){for(let e=0;e<vI.length;e+=2)if(vI.charCodeAt(e)==n)return vI.charAt(e+1);return pU(n<128?n:n+1)}function Xie(n,e){return n.languageDataAt("closeBrackets",e)[0]||E5}const WMe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),QMe=wi.inputHandler.of((n,e,t,i)=>{if((WMe?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let r=n.state.selection.main;if(i.length>2||i.length==2&&ig(xd(i,0))==1||e!=r.from||t!=r.to)return!1;let o=VMe(n.state,i);return o?(n.dispatch(o),!0):!1}),qMe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=Xie(n,n.selection.main.head).brackets||E5.brackets,r=null,o=n.changeByRange(s=>{if(s.empty){let a=$Me(n.doc,s.head);for(let c of i)if(c==a&&UB(n.doc,s.head)==Zie(xd(c,0)))return{changes:{from:s.head-c.length,to:s.head+c.length},range:Sn.cursor(s.head-c.length)}}return{range:r=s}});return r||e(n.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},YMe=[{key:"Backspace",run:qMe}];function VMe(n,e){let t=Xie(n,n.selection.main.head),i=t.brackets||E5.brackets;for(let r of i){let o=Zie(xd(r,0));if(e==r)return o==r?XMe(n,r,i.indexOf(r+r+r)>-1,t):HMe(n,r,o,t.before||E5.before);if(e==o&&Jie(n,n.selection.main.from))return ZMe(n,r,o)}return null}function Jie(n,e){let t=!1;return n.field(Hie).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function UB(n,e){let t=n.sliceString(e,e+2);return t.slice(0,ig(xd(t,0)))}function $Me(n,e){let t=n.sliceString(e-2,e);return ig(xd(t,0))==t.length?t:t.slice(1)}function HMe(n,e,t,i){let r=null,o=n.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:t,from:s.to}],effects:cC.of(s.to+e.length),range:Sn.range(s.anchor+e.length,s.head+e.length)};let a=UB(n.doc,s.head);return!a||/\s/.test(a)||i.indexOf(a)>-1?{changes:{insert:e+t,from:s.head},effects:cC.of(s.head+e.length),range:Sn.cursor(s.head+e.length)}:{range:r=s}});return r?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function ZMe(n,e,t){let i=null,r=n.changeByRange(o=>o.empty&&UB(n.doc,o.head)==t?{changes:{from:o.head,to:o.head+t.length,insert:t},range:Sn.cursor(o.head+t.length)}:i={range:o});return i?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function XMe(n,e,t,i){let r=i.stringPrefixes||E5.stringPrefixes,o=null,s=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:cC.of(a.to+e.length),range:Sn.range(a.anchor+e.length,a.head+e.length)};let c=a.head,d=UB(n.doc,c),m;if(d==e){if(xW(n,c))return{changes:{insert:e+e,from:c},effects:cC.of(c+e.length),range:Sn.cursor(c+e.length)};if(Jie(n,c)){let M=t&&n.sliceDoc(c,c+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:c,to:c+M.length,insert:M},range:Sn.cursor(c+M.length)}}}else{if(t&&n.sliceDoc(c-2*e.length,c)==e+e&&(m=MW(n,c-2*e.length,r))>-1&&xW(n,m))return{changes:{insert:e+e+e+e,from:c},effects:cC.of(c+e.length),range:Sn.cursor(c+e.length)};if(n.charCategorizer(c)(d)!=ll.Word&&MW(n,c,r)>-1&&!JMe(n,c,e,r))return{changes:{insert:e+e,from:c},effects:cC.of(c+e.length),range:Sn.cursor(c+e.length)}}return{range:o=a}});return o?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function xW(n,e){let t=HA(n).resolveInner(e+1);return t.parent&&t.from==e}function JMe(n,e,t,i){let r=HA(n).resolveInner(e,-1),o=i.reduce((s,a)=>Math.max(s,a.length),0);for(let s=0;s<5;s++){let a=n.sliceDoc(r.from,Math.min(r.to,r.from+t.length+o)),c=a.indexOf(t);if(!c||c>-1&&i.indexOf(a.slice(0,c))>-1){let m=r.firstChild;for(;m&&m.from==r.from&&m.to-m.from>t.length+c;){if(n.sliceDoc(m.to-t.length,m.to)==t)return!1;m=m.firstChild}return!0}let d=r.to==e&&r.parent;if(!d)break;r=d}return!1}function MW(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=ll.Word)return e;for(let r of t){let o=e-r.length;if(n.sliceDoc(o,e)==r&&i(n.sliceDoc(o-1,o))!=ll.Word)return o}return-1}function ewe(n={}){return[jMe,Md,Yc.of(n),FMe,twe,NMe]}const ere=[{key:"Ctrl-Space",run:yI},{mac:"Alt-`",run:yI},{mac:"Alt-i",run:yI},{key:"Escape",run:PMe},{key:"ArrowDown",run:zw(!0)},{key:"ArrowUp",run:zw(!1)},{key:"PageDown",run:zw(!0,"page")},{key:"PageUp",run:zw(!1,"page")},{key:"Enter",run:RMe}],twe=VC.highest(TU.computeN([Yc],n=>n.facet(Yc).defaultKeymap?[ere]:[]));class wW{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class eC{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let r=i.facet(dg).markerFilter;r&&(e=r(e,i));let o=e.slice().sort((B,P)=>B.from-P.from||B.to-P.to),s=new z1,a=[],c=0,d=i.doc.iter(),m=0,v=i.doc.length;for(let B=0;;){let P=B==o.length?null:o[B];if(!P&&!a.length)break;let U,z;if(a.length)U=c,z=a.reduce((X,re)=>Math.min(X,re.to),P&&P.from>U?P.from:1e8);else{if(U=P.from,U>v)break;z=P.to,a.push(P),B++}for(;B<o.length;){let X=o[B];if(X.from==U&&(X.to>X.from||X.to==U))a.push(X),B++,z=Math.min(X.to,z);else{z=Math.min(X.from,z);break}}z=Math.min(z,v);let V=!1;if(a.some(X=>X.from==U&&(X.to==z||z==v))&&(V=U==z,!V&&z-U<10)){let X=U-(m+d.value.length);X>0&&(d.next(X),m=U);for(let re=U;;){if(re>=z){V=!0;break}if(!d.lineBreak&&m+d.value.length>re)break;re=m+d.value.length,m+=d.value.length,d.next()}}let Z=are(a);if(V)s.add(U,U,vr.widget({widget:new Awe(Z),diagnostics:a.slice()}));else{let X=a.reduce((re,ie)=>ie.markClass?re+" "+ie.markClass:re,"");s.add(U,z,vr.mark({class:"cm-lintRange cm-lintRange-"+Z+X,diagnostics:a.slice(),inclusiveEnd:a.some(re=>re.to>z)}))}if(c=z,c==v)break;for(let X=0;X<a.length;X++)a[X].to<=c&&a.splice(X--,1)}let M=s.finish();return new eC(M,t,w2(M))}}function w2(n,e=null,t=0){let i=null;return n.between(t,1e9,(r,o,{spec:s})=>{if(!(e&&s.diagnostics.indexOf(e)<0))if(!i)i=new wW(r,o,e||s.diagnostics[0]);else{if(s.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new wW(i.from,o,i.diagnostic)}}),i}function tre(n,e){let t=e.pos,i=e.end||t,r=n.state.facet(dg).hideOn(n,t,i);if(r!=null)return r;let o=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(s=>s.is(KB))||n.changes.touchesRange(o.from,Math.max(o.to,i)))}function nre(n,e){return n.field(Cf,!1)?e:e.concat(eo.appendConfig.of(cre))}function nwe(n,e){return{effects:nre(n,[KB.of(e)])}}const KB=eo.define(),HU=eo.define(),ire=eo.define(),Cf=mc.define({create(){return new eC(vr.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),i=null,r=n.panel;if(n.selected){let o=e.changes.mapPos(n.selected.from,1);i=w2(t,n.selected.diagnostic,o)||w2(t,null,o)}!t.size&&r&&e.state.facet(dg).autoPanel&&(r=null),n=new eC(t,r,i)}for(let t of e.effects)if(t.is(KB)){let i=e.state.facet(dg).autoPanel?t.value.length?B5.open:null:n.panel;n=eC.init(t.value,i,e.state)}else t.is(HU)?n=new eC(n.diagnostics,t.value?B5.open:null,n.selected):t.is(ire)&&(n=new eC(n.diagnostics,n.panel,t.value));return n},provide:n=>[C5.from(n,e=>e.panel),wi.decorations.from(n,e=>e.diagnostics)]}),iwe=vr.mark({class:"cm-lintRange cm-lintRange-active"});function rwe(n,e,t){let{diagnostics:i}=n.state.field(Cf),r,o=-1,s=-1;i.between(e-(t<0?1:0),e+(t>0?1:0),(c,d,{spec:m})=>{if(e>=c&&e<=d&&(c==d||(e>c||t>0)&&(e<d||t<0)))return r=m.diagnostics,o=c,s=d,!1});let a=n.state.facet(dg).tooltipFilter;return r&&a&&(r=a(r,n.state)),r?{pos:o,end:s,above:n.state.doc.lineAt(o).to<s,create(){return{dom:rre(n,r)}}}:null}function rre(n,e){return ya("ul",{class:"cm-tooltip-lint"},e.map(t=>sre(n,t,!1)))}const owe=n=>{let e=n.state.field(Cf,!1);(!e||!e.panel)&&n.dispatch({effects:nre(n.state,[HU.of(!0)])});let t=b5(n,B5.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},SW=n=>{let e=n.state.field(Cf,!1);return!e||!e.panel?!1:(n.dispatch({effects:HU.of(!1)}),!0)},swe=n=>{let e=n.state.field(Cf,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},awe=[{key:"Mod-Shift-m",run:owe,preventDefault:!0},{key:"F8",run:swe}],lwe=yu.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(dg);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let n=Date.now();if(n<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(dg);t.length&&uwe(t.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(nwe(this.view.state,i.reduce((r,o)=>r.concat(o))))},i=>{kh(this.view.state,i)})}}update(n){let e=n.state.facet(dg);(n.docChanged||e!=n.startState.facet(dg)||e.needsRefresh&&e.needsRefresh(n))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function uwe(n,e,t){let i=[],r=-1;for(let o of n)o.then(s=>{i.push(s),clearTimeout(r),i.length==n.length?e(i):r=setTimeout(()=>e(i),200)},t)}const dg=Bi.define({combine(n){return{sources:n.map(e=>e.source).filter(e=>e!=null),...Wm(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:EW,tooltipFilter:EW,needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t,hideOn:(e,t)=>e?t?(i,r,o)=>e(i,r,o)||t(i,r,o):e:t,autoPanel:(e,t)=>e||t})}}});function EW(n,e){return n?e?(t,i)=>e(n(t,i),i):n:e}function cwe(n,e={}){return[dg.of({source:n,config:e}),lwe,cre]}function ore(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let r=t[i];if(/[a-zA-Z]/.test(r)&&!e.some(o=>o.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function sre(n,e,t){var i;let r=t?ore(e.actions):[];return ya("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},ya("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((o,s)=>{let a=!1,c=B=>{if(B.preventDefault(),a)return;a=!0;let P=w2(n.state.field(Cf).diagnostics,e);P&&o.apply(n,P.from,P.to)},{name:d}=o,m=r[s]?d.indexOf(r[s]):-1,v=m<0?d:[d.slice(0,m),ya("u",d.slice(m,m+1)),d.slice(m+1)],M=o.markClass?" "+o.markClass:"";return ya("button",{type:"button",class:"cm-diagnosticAction"+M,onclick:c,onmousedown:c,"aria-label":` Action: ${d}${m<0?"":` (access key "${r[s]})"`}.`},v)}),e.source&&ya("div",{class:"cm-diagnosticSource"},e.source))}class Awe extends q1{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return ya("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class BW{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=sre(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class B5{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)SW(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=ore(o.actions);for(let a=0;a<s.length;a++)if(s[a].toUpperCase().charCodeAt(0)==r.keyCode){let c=w2(this.view.state.field(Cf).diagnostics,o);c&&o.actions[a].apply(e,c.from,c.to)}}else return;r.preventDefault()},i=r=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(r.target)&&this.moveSelection(o)};this.list=ya("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=ya("div",{class:"cm-panel-lint"},this.list,ya("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>SW(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Cf).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Cf),i=0,r=!1,o=null,s=new Set;for(e.between(0,this.view.state.doc.length,(a,c,{spec:d})=>{for(let m of d.diagnostics){if(s.has(m))continue;s.add(m);let v=-1,M;for(let B=i;B<this.items.length;B++)if(this.items[B].diagnostic==m){v=B;break}v<0?(M=new BW(this.view,m),this.items.splice(i,0,M),r=!0):(M=this.items[v],v>i&&(this.items.splice(i,v-i),r=!0)),t&&M.diagnostic==t.diagnostic?M.dom.hasAttribute("aria-selected")||(M.dom.setAttribute("aria-selected","true"),o=M):M.dom.hasAttribute("aria-selected")&&M.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new BW(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:c})=>{let d=c.height/this.list.offsetHeight;a.top<c.top?this.list.scrollTop-=(c.top-a.top)/d:a.bottom>c.bottom&&(this.list.scrollTop+=(a.bottom-c.bottom)/d)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Cf),i=w2(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:ire.of(i)})}static open(e){return new B5(e)}}function IS(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function jw(n){return IS(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const hwe=wi.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:jw("#d11")},".cm-lintRange-warning":{backgroundImage:jw("orange")},".cm-lintRange-info":{backgroundImage:jw("#999")},".cm-lintRange-hint":{backgroundImage:jw("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function dwe(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function are(n){let e="hint",t=1;for(let i of n){let r=dwe(i.severity);r>t&&(t=r,e=i.severity)}return e}class lre extends Mg{constructor(e){super(),this.diagnostics=e,this.severity=are(e)}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let i=this.diagnostics,r=e.state.facet(FB).tooltipFilter;return r&&(i=r(i,e.state)),i.length&&(t.onmouseover=()=>pwe(e,t,i)),t}}function fwe(n,e){let t=i=>{let r=e.getBoundingClientRect();if(!(i.clientX>r.left-10&&i.clientX<r.right+10&&i.clientY>r.top-10&&i.clientY<r.bottom+10)){for(let o=i.target;o;o=o.parentNode)if(o.nodeType==1&&o.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",t),n.state.field(ure)&&n.dispatch({effects:ZU.of(null)})}};window.addEventListener("mousemove",t)}function pwe(n,e,t){function i(){let s=n.elementAtHeight(e.getBoundingClientRect().top+5-n.documentTop);n.coordsAtPos(s.from)&&n.dispatch({effects:ZU.of({pos:s.from,above:!1,clip:!1,create(){return{dom:rre(n,t),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,fwe(n,e)}let{hoverTime:r}=n.state.facet(FB),o=setTimeout(i,r);e.onmouseout=()=>{clearTimeout(o),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(o),o=setTimeout(i,r)}}function mwe(n,e){let t=Object.create(null);for(let r of e){let o=n.lineAt(r.from);(t[o.from]||(t[o.from]=[])).push(r)}let i=[];for(let r in t)i.push(new lre(t[r]).range(+r));return mo.of(i,!0)}const gwe=kne({class:"cm-gutter-lint",markers:n=>n.state.field(NR),widgetMarker:(n,e,t)=>{let i=[];return n.state.field(NR).between(t.from,t.to,(r,o,s)=>{r>t.from&&r<t.to&&i.push(...s.diagnostics)}),i.length?new lre(i):null}}),NR=mc.define({create(){return mo.empty},update(n,e){n=n.map(e.changes);let t=e.state.facet(FB).markerFilter;for(let i of e.effects)if(i.is(KB)){let r=i.value;t&&(r=t(r||[],e.state)),n=mwe(e.state.doc,r.slice(0))}return n}}),ZU=eo.define(),ure=mc.define({create(){return null},update(n,e){return n&&e.docChanged&&(n=tre(e,n)?null:{...n,pos:e.changes.mapPos(n.pos)}),e.effects.reduce((t,i)=>i.is(ZU)?i.value:t,n)},provide:n=>OB.from(n)}),ywe=wi.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:IS('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:IS('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:IS('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),cre=[Cf,wi.decorations.compute([Cf],n=>{let{selected:e,panel:t}=n.field(Cf);return!e||!t||e.from==e.to?vr.none:vr.set([iwe.range(e.from,e.to)])}),a3e(rwe,{hideOn:tre}),hwe],FB=Bi.define({combine(n){return Wm(n,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function vwe(n={}){return[FB.of(n),NR,gwe,ywe,ure]}const bwe=[g3e(),b3e(),K2e(),U4e(),c4e(),E2e(),k2e(),as.allowMultipleSelections.of(!0),H3e(),tie(f4e,{fallback:!0}),C4e(),GMe(),ewe(),H2e(),J2e(),W2e(),Y5e(),TU.of([...YMe,...j5e,...hMe,...q4e,...s4e,...ere,...awe])];var OW={};class n6{constructor(e,t,i,r,o,s,a,c,d,m=0,v){this.p=e,this.stack=t,this.state=i,this.reducePos=r,this.pos=o,this.score=s,this.buffer=a,this.bufferBase=c,this.curContext=d,this.lookAhead=m,this.parent=v}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let r=e.parser.context;return new n6(e,[],t,i,i,0,[],0,r?new IW(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,r=e&65535,{parser:o}=this.p,s=this.reducePos<this.pos-25;s&&this.setLookAhead(this.pos);let a=o.dynamicPrecedence(r);if(a&&(this.score+=a),i==0){this.pushState(o.getGoto(this.state,r,!0),this.reducePos),r<o.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,s?8:4,!0),this.reduceContext(r,this.reducePos);return}let c=this.stack.length-(i-1)*3-(e&262144?6:0),d=c?this.stack[c-2]:this.p.ranges[0].from,m=this.reducePos-d;m>=2e3&&!(!((t=this.p.parser.nodeSet.types[r])===null||t===void 0)&&t.isAnonymous)&&(d==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=m):this.p.lastBigReductionSize<m&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=d,this.p.lastBigReductionSize=m));let v=c?this.stack[c-1]:0,M=this.bufferBase+this.buffer.length-v;if(r<o.minRepeatTerm||e&131072){let B=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,d,B,M+4,!0)}if(e&262144)this.state=this.stack[c];else{let B=this.stack[c-3];this.state=o.getGoto(B,r,!0)}for(;this.stack.length>c;)this.stack.pop();this.reduceContext(r,d)}storeNode(e,t,i,r=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let s=this,a=this.buffer.length;if(a==0&&s.parent&&(a=s.bufferBase-s.parent.bufferBase,s=s.parent),a>0&&s.buffer[a-4]==0&&s.buffer[a-1]>-1){if(t==i)return;if(s.buffer[a-2]>=t){s.buffer[a-2]=i;return}}}if(!o||this.pos==i)this.buffer.push(e,t,i,r);else{let s=this.buffer.length;if(s>0&&this.buffer[s-4]!=0){let a=!1;for(let c=s;c>0&&this.buffer[c-2]>i;c-=4)if(this.buffer[c-1]>=0){a=!0;break}if(a)for(;s>0&&this.buffer[s-2]>i;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,r>4&&(r-=4)}this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=i,this.buffer[s+3]=r}}shift(e,t,i,r){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let o=e,{parser:s}=this.p;(r>this.pos||t<=s.maxNode)&&(this.pos=r,s.stateFlag(o,1)||(this.reducePos=r)),this.pushState(o,i),this.shiftContext(t,i),t<=s.maxNode&&this.buffer.push(t,i,r,4)}else this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4)}apply(e,t,i,r){e&65536?this.reduce(e):this.shift(e,t,i,r)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new n6(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Cwe(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if((i&65536)==0)return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let o=0,s;o<t.length;o+=2)(s=t[o+1])!=this.state&&this.p.parser.hasAction(s,e)&&r.push(t[o],s);if(this.stack.length<120)for(let o=0;r.length<8&&o<t.length;o+=2){let s=t[o+1];r.some((a,c)=>c&1&&a==s)||r.push(t[o],s)}t=r}let i=[];for(let r=0;r<t.length&&i.length<4;r+=2){let o=t[r+1];if(o==this.state)continue;let s=this.split();s.pushState(o,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(t[r],this.pos),s.reducePos=this.pos,s.score-=200,i.push(s)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let i=t>>19,r=t&65535,o=this.stack.length-i*3;if(o<0||e.getGoto(this.stack[o],r,!1)<0){let s=this.findForcedReduction();if(s==null)return!1;t=s}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(r,o)=>{if(!t.includes(r))return t.push(r),e.allActions(r,s=>{if(!(s&393216))if(s&65536){let a=(s>>19)-o;if(a>1){let c=s&65535,d=this.stack.length-a*3;if(d>=0&&e.getGoto(this.stack[d],c,!1)>=0)return a<<19|65536|c}}else{let a=i(s,o+1);if(a!=null)return a}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new IW(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class IW{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class Cwe{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class i6{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new i6(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new i6(this.stack,this.pos,this.index)}}function Nw(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,r=0;i<n.length;){let o=0;for(;;){let s=n.charCodeAt(i++),a=!1;if(s==126){o=65535;break}s>=92&&s--,s>=34&&s--;let c=s-32;if(c>=46&&(c-=46,a=!0),o+=c,a)break;o*=46}t?t[r++]=o:t=new e(o)}return t}class TS{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const TW=new TS;class _we{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=TW,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,r=this.rangeIndex,o=this.pos+e;for(;o<i.from;){if(!r)return null;let s=this.ranges[--r];o-=i.from-s.to,i=s}for(;t<0?o>i.to:o>=i.to;){if(r==this.ranges.length-1)return null;let s=this.ranges[++r];o+=s.from-i.to,i=s}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,r;if(t>=0&&t<this.chunk.length)i=this.pos+e,r=this.chunk.charCodeAt(t);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(i=o,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let s=this.rangeIndex,a=this.range;for(;a.to<=i;)a=this.ranges[++s];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=TW,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return i}}class Zx{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;xwe(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}Zx.prototype.contextual=Zx.prototype.fallback=Zx.prototype.extend=!1;Zx.prototype.fallback=Zx.prototype.extend=!1;function xwe(n,e,t,i,r,o){let s=0,a=1<<i,{dialect:c}=t.p.parser;e:for(;(a&n[s])!=0;){let d=n[s+1];for(let B=s+3;B<d;B+=2)if((n[B+1]&a)>0){let P=n[B];if(c.allows(P)&&(e.token.value==-1||e.token.value==P||Mwe(P,e.token.value,r,o))){e.acceptToken(P);break}}let m=e.next,v=0,M=n[s+2];if(e.next<0&&M>v&&n[d+M*3-3]==65535){s=n[d+M*3-1];continue e}for(;v<M;){let B=v+M>>1,P=d+B+(B<<1),U=n[P],z=n[P+1]||65536;if(m<U)M=B;else if(m>=z)v=B+1;else{s=n[P+2],e.advance();continue e}}break}}function kW(n,e,t){for(let i=e,r;(r=n[i])!=65535;i++)if(r==t)return i-e;return-1}function Mwe(n,e,t,i){let r=kW(t,i,e);return r<0||kW(t,i,n)<r}const uf=typeof process<"u"&&OW&&/\bparse\b/.test(OW.LOG);let bI=null;function DW(n,e,t){let i=n.cursor(Qc.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class wwe{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?DW(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?DW(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],r=this.index[t];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=i.children[r],s=this.start[t]+i.positions[r];if(s>e)return this.nextStart=s,null;if(o instanceof Gu){if(s==e){if(s<this.safeFrom)return null;let a=s+o.length;if(a<=this.safeTo){let c=o.prop(Co.lookAhead);if(!c||a+c<this.fragment.to)return o}}this.index[t]++,s+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+o.length}}}class Swe{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new TS)}getActions(e){let t=0,i=null,{parser:r}=e.p,{tokenizers:o}=r,s=r.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,c=0;for(let d=0;d<o.length;d++){if((1<<d&s)==0)continue;let m=o[d],v=this.tokens[d];if(!(i&&!m.fallback)&&((m.contextual||v.start!=e.pos||v.mask!=s||v.context!=a)&&(this.updateCachedToken(v,m,e),v.mask=s,v.context=a),v.lookAhead>v.end+25&&(c=Math.max(v.lookAhead,c)),v.value!=0)){let M=t;if(v.extended>-1&&(t=this.addActions(e,v.extended,v.end,t)),t=this.addActions(e,v.value,v.end,t),!m.extend&&(i=v,t>M))break}}for(;this.actions.length>t;)this.actions.pop();return c&&e.setLookAhead(c),!i&&e.pos==this.stream.end&&(i=new TS,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new TS,{pos:i,p:r}=e;return t.start=i,t.end=Math.min(i+1,r.stream.end),t.value=i==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,i){let r=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(r,e),i),e.value>-1){let{parser:o}=i.p;for(let s=0;s<o.specialized.length;s++)if(o.specialized[s]==e.value){let a=o.specializers[s](this.stream.read(e.start,e.end),i);if(a>=0&&i.p.parser.dialect.allows(a>>1)){(a&1)==0?e.value=a>>1:e.extended=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,i,r){for(let o=0;o<r;o+=3)if(this.actions[o]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=i,r}addActions(e,t,i,r){let{state:o}=e,{parser:s}=e.p,{data:a}=s;for(let c=0;c<2;c++)for(let d=s.stateSlot(o,c?2:1);;d+=3){if(a[d]==65535)if(a[d+1]==1)d=S1(a,d+2);else{r==0&&a[d+1]==2&&(r=this.putAction(S1(a,d+2),t,i,r));break}a[d]==t&&(r=this.putAction(S1(a,d+1),t,i,r))}return r}}class Ewe{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new _we(t,r),this.tokens=new Swe(e,this.stream),this.topTerm=e.top[1];let{from:o}=r[0];this.stacks=[n6.start(this,e.top[0],o)],this.fragments=i.length&&this.stream.end-o>e.bufferLength*4?new wwe(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],r,o;if(this.bigReductionCount>300&&e.length==1){let[s]=e;for(;s.forceReduce()&&s.stack.length&&s.stack[s.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let s=0;s<e.length;s++){let a=e[s];for(;;){if(this.tokens.mainToken=null,a.pos>t)i.push(a);else{if(this.advanceStack(a,i,e))continue;{r||(r=[],o=[]),r.push(a);let c=this.tokens.getMainToken(a);o.push(c.value,c.end)}}break}}if(!i.length){let s=r&&Owe(r);if(s)return uf&&console.log("Finish with "+this.stackID(s)),this.stackToTree(s);if(this.parser.strict)throw uf&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&r){let s=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,o,i);if(s)return uf&&console.log("Force-finish "+this.stackID(s)),this.stackToTree(s.forceAll())}if(this.recovering){let s=this.recovering==1?1:this.recovering*3;if(i.length>s)for(i.sort((a,c)=>c.score-a.score);i.length>s;)i.pop();i.some(a=>a.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let s=0;s<i.length-1;s++){let a=i[s];for(let c=s+1;c<i.length;c++){let d=i[c];if(a.sameState(d)||a.buffer.length>500&&d.buffer.length>500)if((a.score-d.score||a.buffer.length-d.buffer.length)>0)i.splice(c--,1);else{i.splice(s--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let s=1;s<i.length;s++)i[s].pos<this.minStackPos&&(this.minStackPos=i[s].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let r=e.pos,{parser:o}=this,s=uf?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let d=e.curContext&&e.curContext.tracker.strict,m=d?e.curContext.hash:0;for(let v=this.fragments.nodeAt(r);v;){let M=this.parser.nodeSet.types[v.type.id]==v.type?o.getGoto(e.state,v.type.id):-1;if(M>-1&&v.length&&(!d||(v.prop(Co.contextHash)||0)==m))return e.useNode(v,M),uf&&console.log(s+this.stackID(e)+` (via reuse of ${o.getName(v.type.id)})`),!0;if(!(v instanceof Gu)||v.children.length==0||v.positions[0]>0)break;let B=v.children[0];if(B instanceof Gu&&v.positions[0]==0)v=B;else break}}let a=o.stateSlot(e.state,4);if(a>0)return e.reduce(a),uf&&console.log(s+this.stackID(e)+` (via always-reduce ${o.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let c=this.tokens.getActions(e);for(let d=0;d<c.length;){let m=c[d++],v=c[d++],M=c[d++],B=d==c.length||!i,P=B?e:e.split(),U=this.tokens.mainToken;if(P.apply(m,v,U?U.start:P.pos,M),uf&&console.log(s+this.stackID(P)+` (via ${(m&65536)==0?"shift":`reduce of ${o.getName(m&65535)}`} for ${o.getName(v)} @ ${r}${P==e?"":", split"})`),B)return!0;P.pos>r?t.push(P):i.push(P)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return RW(e,t),!0}}runRecovery(e,t,i){let r=null,o=!1;for(let s=0;s<e.length;s++){let a=e[s],c=t[s<<1],d=t[(s<<1)+1],m=uf?this.stackID(a)+" -> ":"";if(a.deadEnd&&(o||(o=!0,a.restart(),uf&&console.log(m+this.stackID(a)+" (restarted)"),this.advanceFully(a,i))))continue;let v=a.split(),M=m;for(let B=0;v.forceReduce()&&B<10&&(uf&&console.log(M+this.stackID(v)+" (via force-reduce)"),!this.advanceFully(v,i));B++)uf&&(M=this.stackID(v)+" -> ");for(let B of a.recoverByInsert(c))uf&&console.log(m+this.stackID(B)+" (via recover-insert)"),this.advanceFully(B,i);this.stream.end>a.pos?(d==a.pos&&(d++,c=0),a.recoverByDelete(c,d),uf&&console.log(m+this.stackID(a)+` (via recover-delete ${this.parser.getName(c)})`),RW(a,i)):(!r||r.score<a.score)&&(r=a)}return r}stackToTree(e){return e.close(),Gu.build({buffer:i6.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(bI||(bI=new WeakMap)).get(e);return t||bI.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function RW(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class Bwe{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class r6 extends Fne{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let i=Object.keys(e.topRules).map(a=>e.topRules[a][1]),r=[];for(let a=0;a<t.length;a++)r.push([]);function o(a,c,d){r[a].push([c,c.deserialize(String(d))])}if(e.nodeProps)for(let a of e.nodeProps){let c=a[0];typeof c=="string"&&(c=Co[c]);for(let d=1;d<a.length;){let m=a[d++];if(m>=0)o(m,c,a[d++]);else{let v=a[d+-m];for(let M=-m;M>0;M--)o(a[d++],c,v);d++}}}this.nodeSet=new DU(t.map((a,c)=>Td.define({name:c>=this.minRepeatTerm?void 0:a,id:c,props:r[c],top:i.indexOf(c)>-1,error:c==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(c)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Pne;let s=Nw(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(PW),this.states=Nw(e.states,Uint32Array),this.data=Nw(e.stateData),this.goto=Nw(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new Zx(s,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let r=new Ewe(this,e,t,i);for(let o of this.wrappers)r=o(r,e,t,i);return r}getGoto(e,t,i=!1){let r=this.goto;if(t>=r[0])return-1;for(let o=r[t+1];;){let s=r[o++],a=s&1,c=r[o++];if(a&&i)return c;for(let d=o+(s>>1);o<d;o++)if(r[o]==e)return c;if(a)return-1}}hasAction(e,t){let i=this.data;for(let r=0;r<2;r++)for(let o=this.stateSlot(e,r?2:1),s;;o+=3){if((s=i[o])==65535)if(i[o+1]==1)s=i[o=S1(i,o+2)];else{if(i[o+1]==2)return S1(i,o+2);break}if(s==t||s==0)return S1(i,o+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),r=i?t(i):void 0;for(let o=this.stateSlot(e,1);r==null;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=S1(this.data,o+2);else break;r=t(S1(this.data,o+1))}return r}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=S1(this.data,i+2);else break;if((this.data[i+2]&1)==0){let r=this.data[i+1];t.some((o,s)=>s&1&&o==r)||t.push(this.data[i],r)}}return t}configure(e){let t=Object.assign(Object.create(r6.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let r=e.tokenizers.find(o=>o.from==i);return r?r.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,r)=>{let o=e.specializers.find(a=>a.from==i.external);if(!o)return i;let s=Object.assign(Object.assign({},i),{external:o.to});return t.specializers[r]=PW(s),s})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let o of e.split(" ")){let s=t.indexOf(o);s>=0&&(i[s]=!0)}let r=null;for(let o=0;o<t.length;o++)if(!i[o])for(let s=this.dialects[t[o]],a;(a=this.data[s++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[a]=1;return new Bwe(e,i,r)}static deserialize(e){return new r6(e)}}function S1(n,e){return n[e]|n[e+1]<<16}function Owe(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function PW(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const Iwe=zne({String:cn.string,Number:cn.number,"True False":cn.bool,PropertyName:cn.propertyName,Null:cn.null,", :":cn.separator,"[ ]":cn.squareBracket,"{ }":cn.brace}),Twe=r6.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[Iwe],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),kwe=()=>n=>{try{JSON.parse(n.state.doc.toString())}catch(e){if(!(e instanceof SyntaxError))throw e;const t=Dwe(e,n.state.doc);return[{from:t,message:e.message,severity:"error",to:t}]}return[]};function Dwe(n,e){let t;return(t=n.message.match(/at position (\d+)/))?Math.min(+t[1],e.length):(t=n.message.match(/at line (\d+) column (\d+)/))?Math.min(e.line(+t[1]).from+ +t[2]-1,e.length):0}const Rwe=GE.define({name:"json",parser:Twe.configure({props:[Wne.add({Object:JG({except:/^\s*\}/}),Array:JG({except:/^\s*\]/})}),qne.add({"Object Array":X3e})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Pwe(){return new z3e(Rwe)}const Lwe="#e5c07b",LW="#e06c75",Uwe="#56b6c2",Kwe="#ffffff",kS="#abb2bf",GR="#7d8799",Fwe="#61afef",zwe="#98c379",UW="#d19a66",jwe="#c678dd",Nwe="#21252b",KW="#2c313a",FW="#282c34",CI="#353a42",Gwe="#3E4451",zW="#528bff",Wwe=wi.theme({"&":{color:kS,backgroundColor:FW},".cm-content":{caretColor:zW},".cm-cursor, .cm-dropCursor":{borderLeftColor:zW},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Gwe},".cm-panels":{backgroundColor:Nwe,color:kS},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:FW,color:GR,border:"none"},".cm-activeLineGutter":{backgroundColor:KW},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:CI},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:CI,borderBottomColor:CI},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:KW,color:kS}}},{dark:!0}),Qwe=SM.define([{tag:cn.keyword,color:jwe},{tag:[cn.name,cn.deleted,cn.character,cn.propertyName,cn.macroName],color:LW},{tag:[cn.function(cn.variableName),cn.labelName],color:Fwe},{tag:[cn.color,cn.constant(cn.name),cn.standard(cn.name)],color:UW},{tag:[cn.definition(cn.name),cn.separator],color:kS},{tag:[cn.typeName,cn.className,cn.number,cn.changed,cn.annotation,cn.modifier,cn.self,cn.namespace],color:Lwe},{tag:[cn.operator,cn.operatorKeyword,cn.url,cn.escape,cn.regexp,cn.link,cn.special(cn.string)],color:Uwe},{tag:[cn.meta,cn.comment],color:GR},{tag:cn.strong,fontWeight:"bold"},{tag:cn.emphasis,fontStyle:"italic"},{tag:cn.strikethrough,textDecoration:"line-through"},{tag:cn.link,color:GR,textDecoration:"underline"},{tag:cn.heading,fontWeight:"bold",color:LW},{tag:[cn.atom,cn.bool,cn.special(cn.variableName)],color:UW},{tag:[cn.processingInstruction,cn.string,cn.inserted],color:zwe},{tag:cn.invalid,color:Kwe}]),qwe=[Wwe,tie(Qwe)];var DS={exports:{}},Ywe=DS.exports,jW;function Vwe(){return jW||(jW=1,(function(n,e){(function(t,i){n.exports=i()})(Ywe,(function(){var t=typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function i(ke,Oe){return Oe={exports:{}},ke(Oe,Oe.exports),Oe.exports}var r=i(function(ke){function Oe(){var Ze=0,bt=1,yt=2,Mt=3,Kt=4,Dt=5,en=6,Gn=7,Nn=8,Si=9,Un=10,Ln=11,Tn=12,ti=13,Bn=14,je=15,H=16,j=17,Q=0,he=1,Me=2,Ne=3,Qe=4;function it(b,Rt){return 55296<=b.charCodeAt(Rt)&&b.charCodeAt(Rt)<=56319&&56320<=b.charCodeAt(Rt+1)&&b.charCodeAt(Rt+1)<=57343}function vt(b,Rt){Rt===void 0&&(Rt=0);var mn=b.charCodeAt(Rt);if(55296<=mn&&mn<=56319&&Rt<b.length-1){var bn=mn,Cn=b.charCodeAt(Rt+1);return 56320<=Cn&&Cn<=57343?(bn-55296)*1024+(Cn-56320)+65536:bn}if(56320<=mn&&mn<=57343&&Rt>=1){var bn=b.charCodeAt(Rt-1),Cn=mn;return 55296<=bn&&bn<=56319?(bn-55296)*1024+(Cn-56320)+65536:Cn}return mn}function $e(b,Rt,mn){var bn=[b].concat(Rt).concat([mn]),Cn=bn[bn.length-2],xt=mn,Ci=bn.lastIndexOf(Bn);if(Ci>1&&bn.slice(1,Ci).every(function(Hn){return Hn==Mt})&&[Mt,ti,j].indexOf(b)==-1)return Me;var Ki=bn.lastIndexOf(Kt);if(Ki>0&&bn.slice(1,Ki).every(function(Hn){return Hn==Kt})&&[Tn,Kt].indexOf(Cn)==-1)return bn.filter(function(Hn){return Hn==Kt}).length%2==1?Ne:Qe;if(Cn==Ze&&xt==bt)return Q;if(Cn==yt||Cn==Ze||Cn==bt)return xt==Bn&&Rt.every(function(Hn){return Hn==Mt})?Me:he;if(xt==yt||xt==Ze||xt==bt)return he;if(Cn==en&&(xt==en||xt==Gn||xt==Si||xt==Un))return Q;if((Cn==Si||Cn==Gn)&&(xt==Gn||xt==Nn))return Q;if((Cn==Un||Cn==Nn)&&xt==Nn)return Q;if(xt==Mt||xt==je)return Q;if(xt==Dt)return Q;if(Cn==Tn)return Q;var Wn=bn.indexOf(Mt)!=-1?bn.lastIndexOf(Mt)-1:bn.length-2;return[ti,j].indexOf(bn[Wn])!=-1&&bn.slice(Wn+1,-1).every(function(Hn){return Hn==Mt})&&xt==Bn||Cn==je&&[H,j].indexOf(xt)!=-1?Q:Rt.indexOf(Kt)!=-1?Me:Cn==Kt&&xt==Kt?Q:he}this.nextBreak=function(b,Rt){if(Rt===void 0&&(Rt=0),Rt<0)return 0;if(Rt>=b.length-1)return b.length;for(var mn=ot(vt(b,Rt)),bn=[],Cn=Rt+1;Cn<b.length;Cn++)if(!it(b,Cn-1)){var xt=ot(vt(b,Cn));if($e(mn,bn,xt))return Cn;bn.push(xt)}return b.length},this.splitGraphemes=function(b){for(var Rt=[],mn=0,bn;(bn=this.nextBreak(b,mn))<b.length;)Rt.push(b.slice(mn,bn)),mn=bn;return mn<b.length&&Rt.push(b.slice(mn)),Rt},this.iterateGraphemes=function(b){var Rt=0,mn={next:(function(){var bn,Cn;return(Cn=this.nextBreak(b,Rt))<b.length?(bn=b.slice(Rt,Cn),Rt=Cn,{value:bn,done:!1}):Rt<b.length?(bn=b.slice(Rt),Rt=b.length,{value:bn,done:!1}):{value:void 0,done:!0}}).bind(this)};return typeof Symbol<"u"&&Symbol.iterator&&(mn[Symbol.iterator]=function(){return mn}),mn},this.countGraphemes=function(b){for(var Rt=0,mn=0,bn;(bn=this.nextBreak(b,mn))<b.length;)mn=bn,Rt++;return mn<b.length&&Rt++,Rt};function ot(b){return 1536<=b&&b<=1541||b==1757||b==1807||b==2274||b==3406||b==69821||70082<=b&&b<=70083||b==72250||72326<=b&&b<=72329||b==73030?Tn:b==13?Ze:b==10?bt:0<=b&&b<=9||11<=b&&b<=12||14<=b&&b<=31||127<=b&&b<=159||b==173||b==1564||b==6158||b==8203||8206<=b&&b<=8207||b==8232||b==8233||8234<=b&&b<=8238||8288<=b&&b<=8292||b==8293||8294<=b&&b<=8303||55296<=b&&b<=57343||b==65279||65520<=b&&b<=65528||65529<=b&&b<=65531||113824<=b&&b<=113827||119155<=b&&b<=119162||b==917504||b==917505||917506<=b&&b<=917535||917632<=b&&b<=917759||918e3<=b&&b<=921599?yt:768<=b&&b<=879||1155<=b&&b<=1159||1160<=b&&b<=1161||1425<=b&&b<=1469||b==1471||1473<=b&&b<=1474||1476<=b&&b<=1477||b==1479||1552<=b&&b<=1562||1611<=b&&b<=1631||b==1648||1750<=b&&b<=1756||1759<=b&&b<=1764||1767<=b&&b<=1768||1770<=b&&b<=1773||b==1809||1840<=b&&b<=1866||1958<=b&&b<=1968||2027<=b&&b<=2035||2070<=b&&b<=2073||2075<=b&&b<=2083||2085<=b&&b<=2087||2089<=b&&b<=2093||2137<=b&&b<=2139||2260<=b&&b<=2273||2275<=b&&b<=2306||b==2362||b==2364||2369<=b&&b<=2376||b==2381||2385<=b&&b<=2391||2402<=b&&b<=2403||b==2433||b==2492||b==2494||2497<=b&&b<=2500||b==2509||b==2519||2530<=b&&b<=2531||2561<=b&&b<=2562||b==2620||2625<=b&&b<=2626||2631<=b&&b<=2632||2635<=b&&b<=2637||b==2641||2672<=b&&b<=2673||b==2677||2689<=b&&b<=2690||b==2748||2753<=b&&b<=2757||2759<=b&&b<=2760||b==2765||2786<=b&&b<=2787||2810<=b&&b<=2815||b==2817||b==2876||b==2878||b==2879||2881<=b&&b<=2884||b==2893||b==2902||b==2903||2914<=b&&b<=2915||b==2946||b==3006||b==3008||b==3021||b==3031||b==3072||3134<=b&&b<=3136||3142<=b&&b<=3144||3146<=b&&b<=3149||3157<=b&&b<=3158||3170<=b&&b<=3171||b==3201||b==3260||b==3263||b==3266||b==3270||3276<=b&&b<=3277||3285<=b&&b<=3286||3298<=b&&b<=3299||3328<=b&&b<=3329||3387<=b&&b<=3388||b==3390||3393<=b&&b<=3396||b==3405||b==3415||3426<=b&&b<=3427||b==3530||b==3535||3538<=b&&b<=3540||b==3542||b==3551||b==3633||3636<=b&&b<=3642||3655<=b&&b<=3662||b==3761||3764<=b&&b<=3769||3771<=b&&b<=3772||3784<=b&&b<=3789||3864<=b&&b<=3865||b==3893||b==3895||b==3897||3953<=b&&b<=3966||3968<=b&&b<=3972||3974<=b&&b<=3975||3981<=b&&b<=3991||3993<=b&&b<=4028||b==4038||4141<=b&&b<=4144||4146<=b&&b<=4151||4153<=b&&b<=4154||4157<=b&&b<=4158||4184<=b&&b<=4185||4190<=b&&b<=4192||4209<=b&&b<=4212||b==4226||4229<=b&&b<=4230||b==4237||b==4253||4957<=b&&b<=4959||5906<=b&&b<=5908||5938<=b&&b<=5940||5970<=b&&b<=5971||6002<=b&&b<=6003||6068<=b&&b<=6069||6071<=b&&b<=6077||b==6086||6089<=b&&b<=6099||b==6109||6155<=b&&b<=6157||6277<=b&&b<=6278||b==6313||6432<=b&&b<=6434||6439<=b&&b<=6440||b==6450||6457<=b&&b<=6459||6679<=b&&b<=6680||b==6683||b==6742||6744<=b&&b<=6750||b==6752||b==6754||6757<=b&&b<=6764||6771<=b&&b<=6780||b==6783||6832<=b&&b<=6845||b==6846||6912<=b&&b<=6915||b==6964||6966<=b&&b<=6970||b==6972||b==6978||7019<=b&&b<=7027||7040<=b&&b<=7041||7074<=b&&b<=7077||7080<=b&&b<=7081||7083<=b&&b<=7085||b==7142||7144<=b&&b<=7145||b==7149||7151<=b&&b<=7153||7212<=b&&b<=7219||7222<=b&&b<=7223||7376<=b&&b<=7378||7380<=b&&b<=7392||7394<=b&&b<=7400||b==7405||b==7412||7416<=b&&b<=7417||7616<=b&&b<=7673||7675<=b&&b<=7679||b==8204||8400<=b&&b<=8412||8413<=b&&b<=8416||b==8417||8418<=b&&b<=8420||8421<=b&&b<=8432||11503<=b&&b<=11505||b==11647||11744<=b&&b<=11775||12330<=b&&b<=12333||12334<=b&&b<=12335||12441<=b&&b<=12442||b==42607||42608<=b&&b<=42610||42612<=b&&b<=42621||42654<=b&&b<=42655||42736<=b&&b<=42737||b==43010||b==43014||b==43019||43045<=b&&b<=43046||43204<=b&&b<=43205||43232<=b&&b<=43249||43302<=b&&b<=43309||43335<=b&&b<=43345||43392<=b&&b<=43394||b==43443||43446<=b&&b<=43449||b==43452||b==43493||43561<=b&&b<=43566||43569<=b&&b<=43570||43573<=b&&b<=43574||b==43587||b==43596||b==43644||b==43696||43698<=b&&b<=43700||43703<=b&&b<=43704||43710<=b&&b<=43711||b==43713||43756<=b&&b<=43757||b==43766||b==44005||b==44008||b==44013||b==64286||65024<=b&&b<=65039||65056<=b&&b<=65071||65438<=b&&b<=65439||b==66045||b==66272||66422<=b&&b<=66426||68097<=b&&b<=68099||68101<=b&&b<=68102||68108<=b&&b<=68111||68152<=b&&b<=68154||b==68159||68325<=b&&b<=68326||b==69633||69688<=b&&b<=69702||69759<=b&&b<=69761||69811<=b&&b<=69814||69817<=b&&b<=69818||69888<=b&&b<=69890||69927<=b&&b<=69931||69933<=b&&b<=69940||b==70003||70016<=b&&b<=70017||70070<=b&&b<=70078||70090<=b&&b<=70092||70191<=b&&b<=70193||b==70196||70198<=b&&b<=70199||b==70206||b==70367||70371<=b&&b<=70378||70400<=b&&b<=70401||b==70460||b==70462||b==70464||b==70487||70502<=b&&b<=70508||70512<=b&&b<=70516||70712<=b&&b<=70719||70722<=b&&b<=70724||b==70726||b==70832||70835<=b&&b<=70840||b==70842||b==70845||70847<=b&&b<=70848||70850<=b&&b<=70851||b==71087||71090<=b&&b<=71093||71100<=b&&b<=71101||71103<=b&&b<=71104||71132<=b&&b<=71133||71219<=b&&b<=71226||b==71229||71231<=b&&b<=71232||b==71339||b==71341||71344<=b&&b<=71349||b==71351||71453<=b&&b<=71455||71458<=b&&b<=71461||71463<=b&&b<=71467||72193<=b&&b<=72198||72201<=b&&b<=72202||72243<=b&&b<=72248||72251<=b&&b<=72254||b==72263||72273<=b&&b<=72278||72281<=b&&b<=72283||72330<=b&&b<=72342||72344<=b&&b<=72345||72752<=b&&b<=72758||72760<=b&&b<=72765||b==72767||72850<=b&&b<=72871||72874<=b&&b<=72880||72882<=b&&b<=72883||72885<=b&&b<=72886||73009<=b&&b<=73014||b==73018||73020<=b&&b<=73021||73023<=b&&b<=73029||b==73031||92912<=b&&b<=92916||92976<=b&&b<=92982||94095<=b&&b<=94098||113821<=b&&b<=113822||b==119141||119143<=b&&b<=119145||119150<=b&&b<=119154||119163<=b&&b<=119170||119173<=b&&b<=119179||119210<=b&&b<=119213||119362<=b&&b<=119364||121344<=b&&b<=121398||121403<=b&&b<=121452||b==121461||b==121476||121499<=b&&b<=121503||121505<=b&&b<=121519||122880<=b&&b<=122886||122888<=b&&b<=122904||122907<=b&&b<=122913||122915<=b&&b<=122916||122918<=b&&b<=122922||125136<=b&&b<=125142||125252<=b&&b<=125258||917536<=b&&b<=917631||917760<=b&&b<=917999?Mt:127462<=b&&b<=127487?Kt:b==2307||b==2363||2366<=b&&b<=2368||2377<=b&&b<=2380||2382<=b&&b<=2383||2434<=b&&b<=2435||2495<=b&&b<=2496||2503<=b&&b<=2504||2507<=b&&b<=2508||b==2563||2622<=b&&b<=2624||b==2691||2750<=b&&b<=2752||b==2761||2763<=b&&b<=2764||2818<=b&&b<=2819||b==2880||2887<=b&&b<=2888||2891<=b&&b<=2892||b==3007||3009<=b&&b<=3010||3014<=b&&b<=3016||3018<=b&&b<=3020||3073<=b&&b<=3075||3137<=b&&b<=3140||3202<=b&&b<=3203||b==3262||3264<=b&&b<=3265||3267<=b&&b<=3268||3271<=b&&b<=3272||3274<=b&&b<=3275||3330<=b&&b<=3331||3391<=b&&b<=3392||3398<=b&&b<=3400||3402<=b&&b<=3404||3458<=b&&b<=3459||3536<=b&&b<=3537||3544<=b&&b<=3550||3570<=b&&b<=3571||b==3635||b==3763||3902<=b&&b<=3903||b==3967||b==4145||4155<=b&&b<=4156||4182<=b&&b<=4183||b==4228||b==6070||6078<=b&&b<=6085||6087<=b&&b<=6088||6435<=b&&b<=6438||6441<=b&&b<=6443||6448<=b&&b<=6449||6451<=b&&b<=6456||6681<=b&&b<=6682||b==6741||b==6743||6765<=b&&b<=6770||b==6916||b==6965||b==6971||6973<=b&&b<=6977||6979<=b&&b<=6980||b==7042||b==7073||7078<=b&&b<=7079||b==7082||b==7143||7146<=b&&b<=7148||b==7150||7154<=b&&b<=7155||7204<=b&&b<=7211||7220<=b&&b<=7221||b==7393||7410<=b&&b<=7411||b==7415||43043<=b&&b<=43044||b==43047||43136<=b&&b<=43137||43188<=b&&b<=43203||43346<=b&&b<=43347||b==43395||43444<=b&&b<=43445||43450<=b&&b<=43451||43453<=b&&b<=43456||43567<=b&&b<=43568||43571<=b&&b<=43572||b==43597||b==43755||43758<=b&&b<=43759||b==43765||44003<=b&&b<=44004||44006<=b&&b<=44007||44009<=b&&b<=44010||b==44012||b==69632||b==69634||b==69762||69808<=b&&b<=69810||69815<=b&&b<=69816||b==69932||b==70018||70067<=b&&b<=70069||70079<=b&&b<=70080||70188<=b&&b<=70190||70194<=b&&b<=70195||b==70197||70368<=b&&b<=70370||70402<=b&&b<=70403||b==70463||70465<=b&&b<=70468||70471<=b&&b<=70472||70475<=b&&b<=70477||70498<=b&&b<=70499||70709<=b&&b<=70711||70720<=b&&b<=70721||b==70725||70833<=b&&b<=70834||b==70841||70843<=b&&b<=70844||b==70846||b==70849||71088<=b&&b<=71089||71096<=b&&b<=71099||b==71102||71216<=b&&b<=71218||71227<=b&&b<=71228||b==71230||b==71340||71342<=b&&b<=71343||b==71350||71456<=b&&b<=71457||b==71462||72199<=b&&b<=72200||b==72249||72279<=b&&b<=72280||b==72343||b==72751||b==72766||b==72873||b==72881||b==72884||94033<=b&&b<=94078||b==119142||b==119149?Dt:4352<=b&&b<=4447||43360<=b&&b<=43388?en:4448<=b&&b<=4519||55216<=b&&b<=55238?Gn:4520<=b&&b<=4607||55243<=b&&b<=55291?Nn:b==44032||b==44060||b==44088||b==44116||b==44144||b==44172||b==44200||b==44228||b==44256||b==44284||b==44312||b==44340||b==44368||b==44396||b==44424||b==44452||b==44480||b==44508||b==44536||b==44564||b==44592||b==44620||b==44648||b==44676||b==44704||b==44732||b==44760||b==44788||b==44816||b==44844||b==44872||b==44900||b==44928||b==44956||b==44984||b==45012||b==45040||b==45068||b==45096||b==45124||b==45152||b==45180||b==45208||b==45236||b==45264||b==45292||b==45320||b==45348||b==45376||b==45404||b==45432||b==45460||b==45488||b==45516||b==45544||b==45572||b==45600||b==45628||b==45656||b==45684||b==45712||b==45740||b==45768||b==45796||b==45824||b==45852||b==45880||b==45908||b==45936||b==45964||b==45992||b==46020||b==46048||b==46076||b==46104||b==46132||b==46160||b==46188||b==46216||b==46244||b==46272||b==46300||b==46328||b==46356||b==46384||b==46412||b==46440||b==46468||b==46496||b==46524||b==46552||b==46580||b==46608||b==46636||b==46664||b==46692||b==46720||b==46748||b==46776||b==46804||b==46832||b==46860||b==46888||b==46916||b==46944||b==46972||b==47e3||b==47028||b==47056||b==47084||b==47112||b==47140||b==47168||b==47196||b==47224||b==47252||b==47280||b==47308||b==47336||b==47364||b==47392||b==47420||b==47448||b==47476||b==47504||b==47532||b==47560||b==47588||b==47616||b==47644||b==47672||b==47700||b==47728||b==47756||b==47784||b==47812||b==47840||b==47868||b==47896||b==47924||b==47952||b==47980||b==48008||b==48036||b==48064||b==48092||b==48120||b==48148||b==48176||b==48204||b==48232||b==48260||b==48288||b==48316||b==48344||b==48372||b==48400||b==48428||b==48456||b==48484||b==48512||b==48540||b==48568||b==48596||b==48624||b==48652||b==48680||b==48708||b==48736||b==48764||b==48792||b==48820||b==48848||b==48876||b==48904||b==48932||b==48960||b==48988||b==49016||b==49044||b==49072||b==49100||b==49128||b==49156||b==49184||b==49212||b==49240||b==49268||b==49296||b==49324||b==49352||b==49380||b==49408||b==49436||b==49464||b==49492||b==49520||b==49548||b==49576||b==49604||b==49632||b==49660||b==49688||b==49716||b==49744||b==49772||b==49800||b==49828||b==49856||b==49884||b==49912||b==49940||b==49968||b==49996||b==50024||b==50052||b==50080||b==50108||b==50136||b==50164||b==50192||b==50220||b==50248||b==50276||b==50304||b==50332||b==50360||b==50388||b==50416||b==50444||b==50472||b==50500||b==50528||b==50556||b==50584||b==50612||b==50640||b==50668||b==50696||b==50724||b==50752||b==50780||b==50808||b==50836||b==50864||b==50892||b==50920||b==50948||b==50976||b==51004||b==51032||b==51060||b==51088||b==51116||b==51144||b==51172||b==51200||b==51228||b==51256||b==51284||b==51312||b==51340||b==51368||b==51396||b==51424||b==51452||b==51480||b==51508||b==51536||b==51564||b==51592||b==51620||b==51648||b==51676||b==51704||b==51732||b==51760||b==51788||b==51816||b==51844||b==51872||b==51900||b==51928||b==51956||b==51984||b==52012||b==52040||b==52068||b==52096||b==52124||b==52152||b==52180||b==52208||b==52236||b==52264||b==52292||b==52320||b==52348||b==52376||b==52404||b==52432||b==52460||b==52488||b==52516||b==52544||b==52572||b==52600||b==52628||b==52656||b==52684||b==52712||b==52740||b==52768||b==52796||b==52824||b==52852||b==52880||b==52908||b==52936||b==52964||b==52992||b==53020||b==53048||b==53076||b==53104||b==53132||b==53160||b==53188||b==53216||b==53244||b==53272||b==53300||b==53328||b==53356||b==53384||b==53412||b==53440||b==53468||b==53496||b==53524||b==53552||b==53580||b==53608||b==53636||b==53664||b==53692||b==53720||b==53748||b==53776||b==53804||b==53832||b==53860||b==53888||b==53916||b==53944||b==53972||b==54e3||b==54028||b==54056||b==54084||b==54112||b==54140||b==54168||b==54196||b==54224||b==54252||b==54280||b==54308||b==54336||b==54364||b==54392||b==54420||b==54448||b==54476||b==54504||b==54532||b==54560||b==54588||b==54616||b==54644||b==54672||b==54700||b==54728||b==54756||b==54784||b==54812||b==54840||b==54868||b==54896||b==54924||b==54952||b==54980||b==55008||b==55036||b==55064||b==55092||b==55120||b==55148||b==55176?Si:44033<=b&&b<=44059||44061<=b&&b<=44087||44089<=b&&b<=44115||44117<=b&&b<=44143||44145<=b&&b<=44171||44173<=b&&b<=44199||44201<=b&&b<=44227||44229<=b&&b<=44255||44257<=b&&b<=44283||44285<=b&&b<=44311||44313<=b&&b<=44339||44341<=b&&b<=44367||44369<=b&&b<=44395||44397<=b&&b<=44423||44425<=b&&b<=44451||44453<=b&&b<=44479||44481<=b&&b<=44507||44509<=b&&b<=44535||44537<=b&&b<=44563||44565<=b&&b<=44591||44593<=b&&b<=44619||44621<=b&&b<=44647||44649<=b&&b<=44675||44677<=b&&b<=44703||44705<=b&&b<=44731||44733<=b&&b<=44759||44761<=b&&b<=44787||44789<=b&&b<=44815||44817<=b&&b<=44843||44845<=b&&b<=44871||44873<=b&&b<=44899||44901<=b&&b<=44927||44929<=b&&b<=44955||44957<=b&&b<=44983||44985<=b&&b<=45011||45013<=b&&b<=45039||45041<=b&&b<=45067||45069<=b&&b<=45095||45097<=b&&b<=45123||45125<=b&&b<=45151||45153<=b&&b<=45179||45181<=b&&b<=45207||45209<=b&&b<=45235||45237<=b&&b<=45263||45265<=b&&b<=45291||45293<=b&&b<=45319||45321<=b&&b<=45347||45349<=b&&b<=45375||45377<=b&&b<=45403||45405<=b&&b<=45431||45433<=b&&b<=45459||45461<=b&&b<=45487||45489<=b&&b<=45515||45517<=b&&b<=45543||45545<=b&&b<=45571||45573<=b&&b<=45599||45601<=b&&b<=45627||45629<=b&&b<=45655||45657<=b&&b<=45683||45685<=b&&b<=45711||45713<=b&&b<=45739||45741<=b&&b<=45767||45769<=b&&b<=45795||45797<=b&&b<=45823||45825<=b&&b<=45851||45853<=b&&b<=45879||45881<=b&&b<=45907||45909<=b&&b<=45935||45937<=b&&b<=45963||45965<=b&&b<=45991||45993<=b&&b<=46019||46021<=b&&b<=46047||46049<=b&&b<=46075||46077<=b&&b<=46103||46105<=b&&b<=46131||46133<=b&&b<=46159||46161<=b&&b<=46187||46189<=b&&b<=46215||46217<=b&&b<=46243||46245<=b&&b<=46271||46273<=b&&b<=46299||46301<=b&&b<=46327||46329<=b&&b<=46355||46357<=b&&b<=46383||46385<=b&&b<=46411||46413<=b&&b<=46439||46441<=b&&b<=46467||46469<=b&&b<=46495||46497<=b&&b<=46523||46525<=b&&b<=46551||46553<=b&&b<=46579||46581<=b&&b<=46607||46609<=b&&b<=46635||46637<=b&&b<=46663||46665<=b&&b<=46691||46693<=b&&b<=46719||46721<=b&&b<=46747||46749<=b&&b<=46775||46777<=b&&b<=46803||46805<=b&&b<=46831||46833<=b&&b<=46859||46861<=b&&b<=46887||46889<=b&&b<=46915||46917<=b&&b<=46943||46945<=b&&b<=46971||46973<=b&&b<=46999||47001<=b&&b<=47027||47029<=b&&b<=47055||47057<=b&&b<=47083||47085<=b&&b<=47111||47113<=b&&b<=47139||47141<=b&&b<=47167||47169<=b&&b<=47195||47197<=b&&b<=47223||47225<=b&&b<=47251||47253<=b&&b<=47279||47281<=b&&b<=47307||47309<=b&&b<=47335||47337<=b&&b<=47363||47365<=b&&b<=47391||47393<=b&&b<=47419||47421<=b&&b<=47447||47449<=b&&b<=47475||47477<=b&&b<=47503||47505<=b&&b<=47531||47533<=b&&b<=47559||47561<=b&&b<=47587||47589<=b&&b<=47615||47617<=b&&b<=47643||47645<=b&&b<=47671||47673<=b&&b<=47699||47701<=b&&b<=47727||47729<=b&&b<=47755||47757<=b&&b<=47783||47785<=b&&b<=47811||47813<=b&&b<=47839||47841<=b&&b<=47867||47869<=b&&b<=47895||47897<=b&&b<=47923||47925<=b&&b<=47951||47953<=b&&b<=47979||47981<=b&&b<=48007||48009<=b&&b<=48035||48037<=b&&b<=48063||48065<=b&&b<=48091||48093<=b&&b<=48119||48121<=b&&b<=48147||48149<=b&&b<=48175||48177<=b&&b<=48203||48205<=b&&b<=48231||48233<=b&&b<=48259||48261<=b&&b<=48287||48289<=b&&b<=48315||48317<=b&&b<=48343||48345<=b&&b<=48371||48373<=b&&b<=48399||48401<=b&&b<=48427||48429<=b&&b<=48455||48457<=b&&b<=48483||48485<=b&&b<=48511||48513<=b&&b<=48539||48541<=b&&b<=48567||48569<=b&&b<=48595||48597<=b&&b<=48623||48625<=b&&b<=48651||48653<=b&&b<=48679||48681<=b&&b<=48707||48709<=b&&b<=48735||48737<=b&&b<=48763||48765<=b&&b<=48791||48793<=b&&b<=48819||48821<=b&&b<=48847||48849<=b&&b<=48875||48877<=b&&b<=48903||48905<=b&&b<=48931||48933<=b&&b<=48959||48961<=b&&b<=48987||48989<=b&&b<=49015||49017<=b&&b<=49043||49045<=b&&b<=49071||49073<=b&&b<=49099||49101<=b&&b<=49127||49129<=b&&b<=49155||49157<=b&&b<=49183||49185<=b&&b<=49211||49213<=b&&b<=49239||49241<=b&&b<=49267||49269<=b&&b<=49295||49297<=b&&b<=49323||49325<=b&&b<=49351||49353<=b&&b<=49379||49381<=b&&b<=49407||49409<=b&&b<=49435||49437<=b&&b<=49463||49465<=b&&b<=49491||49493<=b&&b<=49519||49521<=b&&b<=49547||49549<=b&&b<=49575||49577<=b&&b<=49603||49605<=b&&b<=49631||49633<=b&&b<=49659||49661<=b&&b<=49687||49689<=b&&b<=49715||49717<=b&&b<=49743||49745<=b&&b<=49771||49773<=b&&b<=49799||49801<=b&&b<=49827||49829<=b&&b<=49855||49857<=b&&b<=49883||49885<=b&&b<=49911||49913<=b&&b<=49939||49941<=b&&b<=49967||49969<=b&&b<=49995||49997<=b&&b<=50023||50025<=b&&b<=50051||50053<=b&&b<=50079||50081<=b&&b<=50107||50109<=b&&b<=50135||50137<=b&&b<=50163||50165<=b&&b<=50191||50193<=b&&b<=50219||50221<=b&&b<=50247||50249<=b&&b<=50275||50277<=b&&b<=50303||50305<=b&&b<=50331||50333<=b&&b<=50359||50361<=b&&b<=50387||50389<=b&&b<=50415||50417<=b&&b<=50443||50445<=b&&b<=50471||50473<=b&&b<=50499||50501<=b&&b<=50527||50529<=b&&b<=50555||50557<=b&&b<=50583||50585<=b&&b<=50611||50613<=b&&b<=50639||50641<=b&&b<=50667||50669<=b&&b<=50695||50697<=b&&b<=50723||50725<=b&&b<=50751||50753<=b&&b<=50779||50781<=b&&b<=50807||50809<=b&&b<=50835||50837<=b&&b<=50863||50865<=b&&b<=50891||50893<=b&&b<=50919||50921<=b&&b<=50947||50949<=b&&b<=50975||50977<=b&&b<=51003||51005<=b&&b<=51031||51033<=b&&b<=51059||51061<=b&&b<=51087||51089<=b&&b<=51115||51117<=b&&b<=51143||51145<=b&&b<=51171||51173<=b&&b<=51199||51201<=b&&b<=51227||51229<=b&&b<=51255||51257<=b&&b<=51283||51285<=b&&b<=51311||51313<=b&&b<=51339||51341<=b&&b<=51367||51369<=b&&b<=51395||51397<=b&&b<=51423||51425<=b&&b<=51451||51453<=b&&b<=51479||51481<=b&&b<=51507||51509<=b&&b<=51535||51537<=b&&b<=51563||51565<=b&&b<=51591||51593<=b&&b<=51619||51621<=b&&b<=51647||51649<=b&&b<=51675||51677<=b&&b<=51703||51705<=b&&b<=51731||51733<=b&&b<=51759||51761<=b&&b<=51787||51789<=b&&b<=51815||51817<=b&&b<=51843||51845<=b&&b<=51871||51873<=b&&b<=51899||51901<=b&&b<=51927||51929<=b&&b<=51955||51957<=b&&b<=51983||51985<=b&&b<=52011||52013<=b&&b<=52039||52041<=b&&b<=52067||52069<=b&&b<=52095||52097<=b&&b<=52123||52125<=b&&b<=52151||52153<=b&&b<=52179||52181<=b&&b<=52207||52209<=b&&b<=52235||52237<=b&&b<=52263||52265<=b&&b<=52291||52293<=b&&b<=52319||52321<=b&&b<=52347||52349<=b&&b<=52375||52377<=b&&b<=52403||52405<=b&&b<=52431||52433<=b&&b<=52459||52461<=b&&b<=52487||52489<=b&&b<=52515||52517<=b&&b<=52543||52545<=b&&b<=52571||52573<=b&&b<=52599||52601<=b&&b<=52627||52629<=b&&b<=52655||52657<=b&&b<=52683||52685<=b&&b<=52711||52713<=b&&b<=52739||52741<=b&&b<=52767||52769<=b&&b<=52795||52797<=b&&b<=52823||52825<=b&&b<=52851||52853<=b&&b<=52879||52881<=b&&b<=52907||52909<=b&&b<=52935||52937<=b&&b<=52963||52965<=b&&b<=52991||52993<=b&&b<=53019||53021<=b&&b<=53047||53049<=b&&b<=53075||53077<=b&&b<=53103||53105<=b&&b<=53131||53133<=b&&b<=53159||53161<=b&&b<=53187||53189<=b&&b<=53215||53217<=b&&b<=53243||53245<=b&&b<=53271||53273<=b&&b<=53299||53301<=b&&b<=53327||53329<=b&&b<=53355||53357<=b&&b<=53383||53385<=b&&b<=53411||53413<=b&&b<=53439||53441<=b&&b<=53467||53469<=b&&b<=53495||53497<=b&&b<=53523||53525<=b&&b<=53551||53553<=b&&b<=53579||53581<=b&&b<=53607||53609<=b&&b<=53635||53637<=b&&b<=53663||53665<=b&&b<=53691||53693<=b&&b<=53719||53721<=b&&b<=53747||53749<=b&&b<=53775||53777<=b&&b<=53803||53805<=b&&b<=53831||53833<=b&&b<=53859||53861<=b&&b<=53887||53889<=b&&b<=53915||53917<=b&&b<=53943||53945<=b&&b<=53971||53973<=b&&b<=53999||54001<=b&&b<=54027||54029<=b&&b<=54055||54057<=b&&b<=54083||54085<=b&&b<=54111||54113<=b&&b<=54139||54141<=b&&b<=54167||54169<=b&&b<=54195||54197<=b&&b<=54223||54225<=b&&b<=54251||54253<=b&&b<=54279||54281<=b&&b<=54307||54309<=b&&b<=54335||54337<=b&&b<=54363||54365<=b&&b<=54391||54393<=b&&b<=54419||54421<=b&&b<=54447||54449<=b&&b<=54475||54477<=b&&b<=54503||54505<=b&&b<=54531||54533<=b&&b<=54559||54561<=b&&b<=54587||54589<=b&&b<=54615||54617<=b&&b<=54643||54645<=b&&b<=54671||54673<=b&&b<=54699||54701<=b&&b<=54727||54729<=b&&b<=54755||54757<=b&&b<=54783||54785<=b&&b<=54811||54813<=b&&b<=54839||54841<=b&&b<=54867||54869<=b&&b<=54895||54897<=b&&b<=54923||54925<=b&&b<=54951||54953<=b&&b<=54979||54981<=b&&b<=55007||55009<=b&&b<=55035||55037<=b&&b<=55063||55065<=b&&b<=55091||55093<=b&&b<=55119||55121<=b&&b<=55147||55149<=b&&b<=55175||55177<=b&&b<=55203?Un:b==9757||b==9977||9994<=b&&b<=9997||b==127877||127938<=b&&b<=127940||b==127943||127946<=b&&b<=127948||128066<=b&&b<=128067||128070<=b&&b<=128080||b==128110||128112<=b&&b<=128120||b==128124||128129<=b&&b<=128131||128133<=b&&b<=128135||b==128170||128372<=b&&b<=128373||b==128378||b==128400||128405<=b&&b<=128406||128581<=b&&b<=128583||128587<=b&&b<=128591||b==128675||128692<=b&&b<=128694||b==128704||b==128716||129304<=b&&b<=129308||129310<=b&&b<=129311||b==129318||129328<=b&&b<=129337||129341<=b&&b<=129342||129489<=b&&b<=129501?ti:127995<=b&&b<=127999?Bn:b==8205?je:b==9792||b==9794||9877<=b&&b<=9878||b==9992||b==10084||b==127752||b==127806||b==127859||b==127891||b==127908||b==127912||b==127979||b==127981||b==128139||128187<=b&&b<=128188||b==128295||b==128300||b==128488||b==128640||b==128658?H:128102<=b&&b<=128105?j:Ln}return this}ke.exports&&(ke.exports=Oe)}),o=new r,s=function(Oe,Ze,bt){for(var yt=o.iterateGraphemes(Oe.substring(Ze)),Mt="",Kt=0;Kt<bt-Ze;Kt++){var Dt=yt.next();if(Mt+=Dt.value,Dt.done)break}return Mt},a=(function(ke,Oe,Ze,bt,yt,Mt,Kt){return{start:{line:ke,column:Oe,offset:Ze},end:{line:bt,column:yt,offset:Mt},source:Kt||null}}),c=i(function(ke,Oe){(function(Ze,bt){ke.exports=bt()})(t,function(){var Ze="",bt,yt=Mt;function Mt(Un,Ln){if(typeof Un!="string")throw new TypeError("expected a string");if(Ln===1)return Un;if(Ln===2)return Un+Un;var Tn=Un.length*Ln;if(bt!==Un||typeof bt>"u")bt=Un,Ze="";else if(Ze.length>=Tn)return Ze.substr(0,Tn);for(;Tn>Ze.length&&Ln>1;)Ln&1&&(Ze+=Un),Ln>>=1,Un+=Un;return Ze+=Un,Ze=Ze.substr(0,Tn),Ze}var Kt=function(Ln,Tn,ti){if(Ln==null||Tn==null)return Ln;var Bn=String(Ln),je=typeof Tn=="number"?Tn:parseInt(Tn,10);if(isNaN(je)||!isFinite(je))return Bn;var H=Bn.length;if(H>=je)return Bn;var j=String(ti);j===""&&(j=" ");for(var Q=je-H;j.length<Q;)j+=j;var he=j.length>Q?j.substr(0,Q):j;return he+Bn},Dt=Object.assign||function(Un){for(var Ln=1;Ln<arguments.length;Ln++){var Tn=arguments[Ln];for(var ti in Tn)Object.prototype.hasOwnProperty.call(Tn,ti)&&(Un[ti]=Tn[ti])}return Un};function en(Un,Ln,Tn,ti){var Bn=String(Ln),je=Kt(Bn,Tn," "),H=yt(" ",ti.tabSize);return je+" | "+Un.replace(/\t/g,H)}function Gn(Un,Ln,Tn,ti,Bn){return Un.slice(Ln,Tn).map(function(je,H){return en(je,Ln+H+1,ti,Bn)}).join(`
`)}var Nn={extraLines:2,tabSize:4},Si=function(Ln,Tn,ti,Bn){Bn=Dt({},Nn,Bn);var je=Ln.split(/\r\n?|\n|\f/),H=Math.max(1,Tn-Bn.extraLines)-1,j=Math.min(Tn+Bn.extraLines,je.length),Q=String(j).length,he=Gn(je,H,Tn,Q,Bn),Me=en(je[Tn-1].substring(0,ti-1),Tn,Q,Bn),Ne=yt(" ",Me.length)+"^",Qe=Gn(je,Tn,j,Q,Bn);return[he,Ne,Qe].filter(Boolean).join(`
`)};return Si})}),d=new Error().stack,m=(function(ke){var Oe=Object.create(SyntaxError.prototype);return Object.assign(Oe,ke,{name:"SyntaxError"}),Object.defineProperty(Oe,"stack",{get:function(){return d?d.replace(/^(.+\n){1,3}/,String(Oe)+`
`):""}}),Oe}),v=(function(ke,Oe,Ze,bt,yt){throw m({message:bt?ke+`
`+c(Oe,bt,yt):ke,rawMessage:ke,source:Ze,line:bt,column:yt})}),M={unexpectedEnd:function(){return"Unexpected end of input"},unexpectedToken:function(Oe){for(var Ze=arguments.length,bt=Array(Ze>1?Ze-1:0),yt=1;yt<Ze;yt++)bt[yt-1]=arguments[yt];return"Unexpected token <"+Oe+"> at "+bt.filter(Boolean).join(":")}},B={unexpectedSymbol:function(Oe){for(var Ze=arguments.length,bt=Array(Ze>1?Ze-1:0),yt=1;yt<Ze;yt++)bt[yt-1]=arguments[yt];return"Unexpected symbol <"+Oe+"> at "+bt.filter(Boolean).join(":")}},P={LEFT_BRACE:0,RIGHT_BRACE:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,COLON:4,COMMA:5,STRING:6,NUMBER:7,TRUE:8,FALSE:9,NULL:10},U={"{":P.LEFT_BRACE,"}":P.RIGHT_BRACE,"[":P.LEFT_BRACKET,"]":P.RIGHT_BRACKET,":":P.COLON,",":P.COMMA},z={true:P.TRUE,false:P.FALSE,null:P.NULL},V={_START_:0,START_QUOTE_OR_CHAR:1,ESCAPE:2},Z={'"':0,"\\":1,"/":2,b:3,f:4,n:5,r:6,t:7,u:8},X={_START_:0,MINUS:1,ZERO:2,DIGIT:3,POINT:4,DIGIT_FRACTION:5,EXP:6,EXP_DIGIT_OR_SIGN:7};function re(ke){return ke>="1"&&ke<="9"}function ie(ke){return ke>="0"&&ke<="9"}function te(ke){return ie(ke)||ke>="a"&&ke<="f"||ke>="A"&&ke<="F"}function q(ke){return ke==="e"||ke==="E"}function le(ke,Oe,Ze,bt){var yt=ke.charAt(Oe);if(yt==="\r")Oe++,Ze++,bt=1,ke.charAt(Oe)===`
`&&Oe++;else if(yt===`
`)Oe++,Ze++,bt=1;else if(yt==="	"||yt===" ")Oe++,bt++;else return null;return{index:Oe,line:Ze,column:bt}}function ce(ke,Oe,Ze,bt){var yt=ke.charAt(Oe);return yt in U?{type:U[yt],line:Ze,column:bt+1,index:Oe+1,value:null}:null}function ve(ke,Oe,Ze,bt){for(var yt in z)if(z.hasOwnProperty(yt)&&ke.substr(Oe,yt.length)===yt)return{type:z[yt],line:Ze,column:bt+yt.length,index:Oe+yt.length,value:yt};return null}function ge(ke,Oe,Ze,bt){for(var yt=Oe,Mt=V._START_;Oe<ke.length;){var Kt=ke.charAt(Oe);switch(Mt){case V._START_:{if(Kt==='"')Oe++,Mt=V.START_QUOTE_OR_CHAR;else return null;break}case V.START_QUOTE_OR_CHAR:{if(Kt==="\\")Oe++,Mt=V.ESCAPE;else{if(Kt==='"')return Oe++,{type:P.STRING,line:Ze,column:bt+Oe-yt,index:Oe,value:ke.slice(yt,Oe)};Oe++}break}case V.ESCAPE:{if(Kt in Z){if(Oe++,Kt==="u")for(var Dt=0;Dt<4;Dt++){var en=ke.charAt(Oe);if(en&&te(en))Oe++;else return null}Mt=V.START_QUOTE_OR_CHAR}else return null;break}}}}function Ee(ke,Oe,Ze,bt){var yt=Oe,Mt=Oe,Kt=X._START_;e:for(;Oe<ke.length;){var Dt=ke.charAt(Oe);switch(Kt){case X._START_:{if(Dt==="-")Kt=X.MINUS;else if(Dt==="0")Mt=Oe+1,Kt=X.ZERO;else if(re(Dt))Mt=Oe+1,Kt=X.DIGIT;else return null;break}case X.MINUS:{if(Dt==="0")Mt=Oe+1,Kt=X.ZERO;else if(re(Dt))Mt=Oe+1,Kt=X.DIGIT;else return null;break}case X.ZERO:{if(Dt===".")Kt=X.POINT;else if(q(Dt))Kt=X.EXP;else break e;break}case X.DIGIT:{if(ie(Dt))Mt=Oe+1;else if(Dt===".")Kt=X.POINT;else if(q(Dt))Kt=X.EXP;else break e;break}case X.POINT:{if(ie(Dt))Mt=Oe+1,Kt=X.DIGIT_FRACTION;else break e;break}case X.DIGIT_FRACTION:{if(ie(Dt))Mt=Oe+1;else if(q(Dt))Kt=X.EXP;else break e;break}case X.EXP:{if(Dt==="+"||Dt==="-")Kt=X.EXP_DIGIT_OR_SIGN;else if(ie(Dt))Mt=Oe+1,Kt=X.EXP_DIGIT_OR_SIGN;else break e;break}case X.EXP_DIGIT_OR_SIGN:{if(ie(Dt))Mt=Oe+1;else break e;break}}Oe++}return Mt>0?{type:P.NUMBER,line:Ze,column:bt+Mt-yt,index:Mt,value:ke.slice(yt,Mt)}:null}var xe=function(Oe,Ze){for(var bt=1,yt=1,Mt=0,Kt=[];Mt<Oe.length;){var Dt=[Oe,Mt,bt,yt],en=le.apply(void 0,Dt);if(en){Mt=en.index,bt=en.line,yt=en.column;continue}var Gn=ce.apply(void 0,Dt)||ve.apply(void 0,Dt)||ge.apply(void 0,Dt)||Ee.apply(void 0,Dt);if(Gn){var Nn={type:Gn.type,value:Gn.value,loc:a(bt,yt,Mt,Gn.line,Gn.column,Gn.index,Ze.source)};Kt.push(Nn),Mt=Gn.index,bt=Gn.line,yt=Gn.column}else v(B.unexpectedSymbol(s(Oe,Mt,Mt+1),Ze.source,bt,yt),Oe,Ze.source,bt,yt)}return Kt},Te={_START_:0,OPEN_OBJECT:1,PROPERTY:2,COMMA:3},Fe={_START_:0,KEY:1,COLON:2},Ie={_START_:0,OPEN_ARRAY:1,VALUE:2,COMMA:3},Ye={loc:!0,source:null};function At(ke,Oe,Ze){var bt=Oe.length>0?Oe[Oe.length-1].loc.end:{line:1,column:1};v(M.unexpectedEnd(),ke,Ze.source,bt.line,bt.column)}function mt(ke){for(var Oe=0,Ze=0;Ze<4;Ze++)Oe=Oe*16+parseInt(ke[Ze],16);return String.fromCharCode(Oe)}var Ue={b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},De=['"',"\\","/"];function Ge(ke){for(var Oe="",Ze=0;Ze<ke.length;Ze++){var bt=ke.charAt(Ze);if(bt==="\\"){Ze++;var yt=ke.charAt(Ze);if(yt==="u")Oe+=mt(ke.substr(Ze+1,4)),Ze+=4;else if(De.indexOf(yt)!==-1)Oe+=yt;else if(yt in Ue)Oe+=Ue[yt];else break}else Oe+=bt}return Oe}function Re(ke,Oe,Ze,bt){for(var yt=void 0,Mt={type:"Object",children:[]},Kt=Te._START_;Ze<Oe.length;){var Dt=Oe[Ze];switch(Kt){case Te._START_:{if(Dt.type===P.LEFT_BRACE)yt=Dt,Kt=Te.OPEN_OBJECT,Ze++;else return null;break}case Te.OPEN_OBJECT:{if(Dt.type===P.RIGHT_BRACE)return bt.loc&&(Mt.loc=a(yt.loc.start.line,yt.loc.start.column,yt.loc.start.offset,Dt.loc.end.line,Dt.loc.end.column,Dt.loc.end.offset,bt.source)),{value:Mt,index:Ze+1};var en=St(ke,Oe,Ze,bt);Mt.children.push(en.value),Kt=Te.PROPERTY,Ze=en.index;break}case Te.PROPERTY:{if(Dt.type===P.RIGHT_BRACE)return bt.loc&&(Mt.loc=a(yt.loc.start.line,yt.loc.start.column,yt.loc.start.offset,Dt.loc.end.line,Dt.loc.end.column,Dt.loc.end.offset,bt.source)),{value:Mt,index:Ze+1};Dt.type===P.COMMA?(Kt=Te.COMMA,Ze++):v(M.unexpectedToken(s(ke,Dt.loc.start.offset,Dt.loc.end.offset),bt.source,Dt.loc.start.line,Dt.loc.start.column),ke,bt.source,Dt.loc.start.line,Dt.loc.start.column);break}case Te.COMMA:{var Gn=St(ke,Oe,Ze,bt);Gn?(Ze=Gn.index,Mt.children.push(Gn.value),Kt=Te.PROPERTY):v(M.unexpectedToken(s(ke,Dt.loc.start.offset,Dt.loc.end.offset),bt.source,Dt.loc.start.line,Dt.loc.start.column),ke,bt.source,Dt.loc.start.line,Dt.loc.start.column);break}}}At(ke,Oe,bt)}function St(ke,Oe,Ze,bt){for(var yt=void 0,Mt={type:"Property",key:null,value:null},Kt=Fe._START_;Ze<Oe.length;){var Dt=Oe[Ze];switch(Kt){case Fe._START_:{if(Dt.type===P.STRING){var en={type:"Identifier",value:Ge(ke.slice(Dt.loc.start.offset+1,Dt.loc.end.offset-1)),raw:Dt.value};bt.loc&&(en.loc=Dt.loc),yt=Dt,Mt.key=en,Kt=Fe.KEY,Ze++}else return null;break}case Fe.KEY:{Dt.type===P.COLON?(Kt=Fe.COLON,Ze++):v(M.unexpectedToken(s(ke,Dt.loc.start.offset,Dt.loc.end.offset),bt.source,Dt.loc.start.line,Dt.loc.start.column),ke,bt.source,Dt.loc.start.line,Dt.loc.start.column);break}case Fe.COLON:{var Gn=Ut(ke,Oe,Ze,bt);return Mt.value=Gn.value,bt.loc&&(Mt.loc=a(yt.loc.start.line,yt.loc.start.column,yt.loc.start.offset,Gn.value.loc.end.line,Gn.value.loc.end.column,Gn.value.loc.end.offset,bt.source)),{value:Mt,index:Gn.index}}}}}function ut(ke,Oe,Ze,bt){for(var yt=void 0,Mt={type:"Array",children:[]},Kt=Ie._START_,Dt=void 0;Ze<Oe.length;)switch(Dt=Oe[Ze],Kt){case Ie._START_:{if(Dt.type===P.LEFT_BRACKET)yt=Dt,Kt=Ie.OPEN_ARRAY,Ze++;else return null;break}case Ie.OPEN_ARRAY:{if(Dt.type===P.RIGHT_BRACKET)return bt.loc&&(Mt.loc=a(yt.loc.start.line,yt.loc.start.column,yt.loc.start.offset,Dt.loc.end.line,Dt.loc.end.column,Dt.loc.end.offset,bt.source)),{value:Mt,index:Ze+1};var en=Ut(ke,Oe,Ze,bt);Ze=en.index,Mt.children.push(en.value),Kt=Ie.VALUE;break}case Ie.VALUE:{if(Dt.type===P.RIGHT_BRACKET)return bt.loc&&(Mt.loc=a(yt.loc.start.line,yt.loc.start.column,yt.loc.start.offset,Dt.loc.end.line,Dt.loc.end.column,Dt.loc.end.offset,bt.source)),{value:Mt,index:Ze+1};Dt.type===P.COMMA?(Kt=Ie.COMMA,Ze++):v(M.unexpectedToken(s(ke,Dt.loc.start.offset,Dt.loc.end.offset),bt.source,Dt.loc.start.line,Dt.loc.start.column),ke,bt.source,Dt.loc.start.line,Dt.loc.start.column);break}case Ie.COMMA:{var Gn=Ut(ke,Oe,Ze,bt);Ze=Gn.index,Mt.children.push(Gn.value),Kt=Ie.VALUE;break}}At(ke,Oe,bt)}function kt(ke,Oe,Ze,bt){var yt=Oe[Ze],Mt=null;switch(yt.type){case P.STRING:{Mt=Ge(ke.slice(yt.loc.start.offset+1,yt.loc.end.offset-1));break}case P.NUMBER:{Mt=Number(yt.value);break}case P.TRUE:{Mt=!0;break}case P.FALSE:{Mt=!1;break}case P.NULL:{Mt=null;break}default:return null}var Kt={type:"Literal",value:Mt,raw:yt.value};return bt.loc&&(Kt.loc=yt.loc),{value:Kt,index:Ze+1}}function Ut(ke,Oe,Ze,bt){var yt=Oe[Ze],Mt=kt.apply(void 0,arguments)||Re.apply(void 0,arguments)||ut.apply(void 0,arguments);if(Mt)return Mt;v(M.unexpectedToken(s(ke,yt.loc.start.offset,yt.loc.end.offset),bt.source,yt.loc.start.line,yt.loc.start.column),ke,bt.source,yt.loc.start.line,yt.loc.start.column)}var Le=(function(ke,Oe){Oe=Object.assign({},Ye,Oe);var Ze=xe(ke,Oe);Ze.length===0&&At(ke,Ze,Oe);var bt=Ut(ke,Ze,0,Oe);if(bt.index===Ze.length)return bt.value;var yt=Ze[bt.index];v(M.unexpectedToken(s(ke,yt.loc.start.offset,yt.loc.end.offset),Oe.source,yt.loc.start.line,yt.loc.start.column),ke,Oe.source,yt.loc.start.line,yt.loc.start.column)});return Le}))})(DS)),DS.exports}var $we=Vwe();const XU=vu($we);function ma(){var n="/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts",e="68bf9a3bcb07bd54be36702e0c3494ce552968d6",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:18}},2:{start:{line:5,column:2},end:{line:7,column:3}},3:{start:{line:6,column:4},end:{line:6,column:16}},4:{start:{line:8,column:2},end:{line:10,column:3}},5:{start:{line:9,column:4},end:{line:9,column:18}},6:{start:{line:11,column:14},end:{line:11,column:21}},7:{start:{line:12,column:2},end:{line:14,column:3}},8:{start:{line:13,column:4},end:{line:13,column:70}},9:{start:{line:15,column:18},end:{line:17,column:4}},10:{start:{line:16,column:4},end:{line:16,column:100}},11:{start:{line:18,column:2},end:{line:18,column:59}}},fnMap:{0:{name:"jsonPathToPosition",decl:{start:{line:1,column:16},end:{line:1,column:34}},loc:{start:{line:1,column:47},end:{line:19,column:1}},line:1},1:{name:"(anonymous_1)",decl:{start:{line:15,column:37},end:{line:15,column:38}},loc:{start:{line:15,column:52},end:{line:17,column:3}},line:15}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:5,column:2},end:{line:7,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:7,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},2:{loc:{start:{line:8,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:8,column:2},end:{line:10,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},3:{loc:{start:{line:12,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},4:{loc:{start:{line:16,column:11},end:{line:16,column:99}},type:"binary-expr",locations:[{start:{line:16,column:11},end:{line:16,column:29}},{start:{line:16,column:33},end:{line:16,column:68}},{start:{line:16,column:72},end:{line:16,column:99}}],line:16}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts"],names:[],mappings:"AAEO,gBAAS,mBAAmB,MAAgB,MAA6C;AAC9F,MAAI,CAAC,MAAM;AACT,WAAO;AAAA,EACT;AACA,MAAI,KAAK,SAAS,GAAG;AACnB,WAAO;AAAA,EACT;AACA,MAAI,EAAE,cAAc,OAAO;AACzB,WAAO;AAAA,EACT;AACA,QAAM,MAAM,KAAK,CAAC;AAClB,MAAI,IAAI,MAAM,UAAU,GAAG;AACzB,WAAO,mBAAmB,KAAK,MAAM,CAAC,GAAG,KAAK,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;AAAA,EAClE;AACA,QAAM,UAAU,KAAK,SAAS,KAAK,CAAC,cAAc;AAChD,WACE,SAAS,aACT,UAAU,IAAI,SAAS,gBACvB,UAAU,IAAI,UAAU;AAAA,EAE5B,CAAC;AACD,SAAO,mBAAmB,KAAK,MAAM,CAAC,GAAG,SAAS,KAAK;AACzD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"68bf9a3bcb07bd54be36702e0c3494ce552968d6"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ma=function(){return s},s}ma();function WR(n,e){if(ma().f[0]++,ma().s[0]++,e)ma().b[0][1]++;else{ma().b[0][0]++,ma().s[1]++;return}if(ma().s[2]++,n.length<1)return ma().b[1][0]++,ma().s[3]++,e;if(ma().b[1][1]++,ma().s[4]++,"children"in e)ma().b[2][1]++;else{ma().b[2][0]++,ma().s[5]++;return}const t=(ma().s[6]++,n[0]);if(ma().s[7]++,t.match(/^[0-9]+$/))return ma().b[3][0]++,ma().s[8]++,WR(n.slice(1),e.children[+n[0]]);ma().b[3][1]++;const i=(ma().s[9]++,e.children.find(r=>(ma().f[1]++,ma().s[10]++,ma().b[4][0]++,"key"in r&&(ma().b[4][1]++,r.key.type==="Identifier")&&(ma().b[4][2]++,r.key.value===t))));return ma().s[11]++,WR(n.slice(1),i?.value)}function Pn(){var n="/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts",e="fed5a4f9200b6a5cf90f61b2c7f89f45308868c6",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts",statementMap:{0:{start:{line:11,column:22},end:{line:11,column:24}},1:{start:{line:12,column:2},end:{line:37,column:3}},2:{start:{line:13,column:29},end:{line:13,column:34}},3:{start:{line:14,column:4},end:{line:36,column:5}},4:{start:{line:15,column:6},end:{line:20,column:9}},5:{start:{line:22,column:19},end:{line:22,column:81}},6:{start:{line:23,column:19},end:{line:23,column:48}},7:{start:{line:24,column:6},end:{line:27,column:7}},8:{start:{line:25,column:8},end:{line:25,column:67}},9:{start:{line:26,column:8},end:{line:26,column:17}},10:{start:{line:28,column:6},end:{line:35,column:7}},11:{start:{line:29,column:8},end:{line:34,column:11}},12:{start:{line:38,column:2},end:{line:38,column:21}},13:{start:{line:41,column:2},end:{line:70,column:4}},14:{start:{line:42,column:17},end:{line:42,column:42}},15:{start:{line:43,column:4},end:{line:68,column:5}},16:{start:{line:44,column:25},end:{line:44,column:41}},17:{start:{line:45,column:18},end:{line:45,column:33}},18:{start:{line:46,column:31},end:{line:56,column:8}},19:{start:{line:57,column:27},end:{line:65,column:8}},20:{start:{line:58,column:8},end:{line:58,column:74}},21:{start:{line:60,column:32},end:{line:60,column:83}},22:{start:{line:61,column:8},end:{line:64,column:10}},23:{start:{line:66,column:6},end:{line:66,column:67}},24:{start:{line:69,column:4},end:{line:69,column:14}},25:{start:{line:73,column:2},end:{line:89,column:4}},26:{start:{line:74,column:17},end:{line:74,column:42}},27:{start:{line:75,column:4},end:{line:87,column:5}},28:{start:{line:76,column:25},end:{line:76,column:41}},29:{start:{line:77,column:18},end:{line:77,column:33}},30:{start:{line:78,column:31},end:{line:78,column:59}},31:{start:{line:79,column:27},end:{line:84,column:8}},32:{start:{line:80,column:8},end:{line:83,column:10}},33:{start:{line:85,column:6},end:{line:85,column:67}},34:{start:{line:88,column:4},end:{line:88,column:14}},35:{start:{line:92,column:2},end:{line:102,column:4}},36:{start:{line:93,column:17},end:{line:93,column:42}},37:{start:{line:94,column:23},end:{line:94,column:39}},38:{start:{line:95,column:16},end:{line:95,column:31}},39:{start:{line:96,column:16},end:{line:96,column:61}},40:{start:{line:97,column:4},end:{line:99,column:5}},41:{start:{line:98,column:6},end:{line:98,column:16}},42:{start:{line:100,column:19},end:{line:100,column:28}},43:{start:{line:101,column:4},end:{line:101,column:59}},44:{start:{line:105,column:23},end:{line:105,column:31}},45:{start:{line:105,column:29},end:{line:105,column:31}},46:{start:{line:106,column:2},end:{line:119,column:3}},47:{start:{line:108,column:6},end:{line:108,column:51}},48:{start:{line:109,column:6},end:{line:109,column:12}},49:{start:{line:111,column:6},end:{line:111,column:51}},50:{start:{line:112,column:6},end:{line:112,column:12}},51:{start:{line:114,column:6},end:{line:114,column:66}},52:{start:{line:115,column:6},end:{line:115,column:12}},53:{start:{line:117,column:6},end:{line:117,column:32}},54:{start:{line:117,column:29},end:{line:117,column:31}},55:{start:{line:118,column:6},end:{line:118,column:12}},56:{start:{line:120,column:2},end:{line:156,column:5}},57:{start:{line:133,column:8},end:{line:137,column:9}},58:{start:{line:134,column:22},end:{line:134,column:38}},59:{start:{line:135,column:24},end:{line:135,column:38}},60:{start:{line:136,column:10},end:{line:136,column:32}},61:{start:{line:138,column:8},end:{line:144,column:9}},62:{start:{line:139,column:10},end:{line:143,column:11}},63:{start:{line:140,column:12},end:{line:140,column:28}},64:{start:{line:142,column:12},end:{line:142,column:27}},65:{start:{line:148,column:27},end:{line:148,column:50}},66:{start:{line:149,column:8},end:{line:151,column:9}},67:{start:{line:150,column:10},end:{line:150,column:28}},68:{start:{line:152,column:8},end:{line:152,column:36}}},fnMap:{0:{name:"getDiagnosticsFromExpressionErrors",decl:{start:{line:10,column:9},end:{line:10,column:43}},loc:{start:{line:10,column:57},end:{line:39,column:1}},line:10},1:{name:"createMaplibreLayerLinter",decl:{start:{line:40,column:9},end:{line:40,column:34}},loc:{start:{line:40,column:37},end:{line:71,column:1}},line:40},2:{name:"(anonymous_2)",decl:{start:{line:41,column:9},end:{line:41,column:10}},loc:{start:{line:41,column:19},end:{line:70,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:57,column:51},end:{line:57,column:52}},loc:{start:{line:57,column:60},end:{line:59,column:7}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:59,column:13},end:{line:59,column:14}},loc:{start:{line:59,column:22},end:{line:65,column:7}},line:59},5:{name:"createMaplibreStyleLinter",decl:{start:{line:72,column:9},end:{line:72,column:34}},loc:{start:{line:72,column:37},end:{line:90,column:1}},line:72},6:{name:"(anonymous_6)",decl:{start:{line:73,column:9},end:{line:73,column:10}},loc:{start:{line:73,column:19},end:{line:89,column:3}},line:73},7:{name:"(anonymous_7)",decl:{start:{line:79,column:48},end:{line:79,column:49}},loc:{start:{line:79,column:57},end:{line:84,column:7}},line:79},8:{name:"createMaplibreExpressionLinter",decl:{start:{line:91,column:9},end:{line:91,column:39}},loc:{start:{line:91,column:46},end:{line:103,column:1}},line:91},9:{name:"(anonymous_9)",decl:{start:{line:92,column:9},end:{line:92,column:10}},loc:{start:{line:92,column:19},end:{line:102,column:3}},line:92},10:{name:"createEditor",decl:{start:{line:104,column:16},end:{line:104,column:28}},loc:{start:{line:104,column:36},end:{line:157,column:1}},line:104},11:{name:"(anonymous_11)",decl:{start:{line:105,column:23},end:{line:105,column:24}},loc:{start:{line:105,column:29},end:{line:105,column:31}},line:105},12:{name:"(anonymous_12)",decl:{start:{line:117,column:23},end:{line:117,column:24}},loc:{start:{line:117,column:29},end:{line:117,column:31}},line:117},13:{name:"(anonymous_13)",decl:{start:{line:132,column:35},end:{line:132,column:36}},loc:{start:{line:132,column:47},end:{line:145,column:7}},line:132},14:{name:"(anonymous_14)",decl:{start:{line:147,column:13},end:{line:147,column:14}},loc:{start:{line:147,column:23},end:{line:153,column:7}},line:147}},branchMap:{0:{loc:{start:{line:14,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:14,column:4},end:{line:36,column:5}},{start:{line:21,column:11},end:{line:36,column:5}}],line:14},1:{loc:{start:{line:17,column:12},end:{line:17,column:44}},type:"cond-expr",locations:[{start:{line:17,column:22},end:{line:17,column:40}},{start:{line:17,column:43},end:{line:17,column:44}}],line:17},2:{loc:{start:{line:24,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:24,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:28,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:97,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:99,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},5:{loc:{start:{line:106,column:2},end:{line:119,column:3}},type:"switch",locations:[{start:{line:107,column:4},end:{line:109,column:12}},{start:{line:110,column:4},end:{line:112,column:12}},{start:{line:113,column:4},end:{line:115,column:12}},{start:{line:116,column:4},end:{line:118,column:12}}],line:106},6:{loc:{start:{line:133,column:8},end:{line:137,column:9}},type:"if",locations:[{start:{line:133,column:8},end:{line:137,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:133},7:{loc:{start:{line:138,column:8},end:{line:144,column:9}},type:"if",locations:[{start:{line:138,column:8},end:{line:144,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:138},8:{loc:{start:{line:139,column:10},end:{line:143,column:11}},type:"if",locations:[{start:{line:139,column:10},end:{line:143,column:11}},{start:{line:141,column:17},end:{line:143,column:11}}],line:139},9:{loc:{start:{line:149,column:8},end:{line:151,column:9}},type:"if",locations:[{start:{line:149,column:8},end:{line:151,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:149}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts"],names:[],mappings:"AAAA,SAAS,kBAAkB;AAC3B,SAAS,kBAAkB;AAC3B,SAAS,aAAa,mBAAmB;AACzC,SAAS,MAAM,uBAAuB;AACtC,SAAS,QAAQ,kBAAmC;AACpD,SAAS,eAAe;AACxB,SAAS,YAA6C,wBAAwB;AAC9E,OAAO,eAAsD;AAC7D,SAAS,0BAA0B;AASnC,SAAS,mCAAmC,QAAuB,KAA+B;AAChG,QAAM,cAA4B,CAAC;AACnC,aAAW,SAAS,QAAQ;AAC1B,UAAM,EAAC,KAAK,QAAO,IAAI;AACvB,QAAI,CAAC,KAAK;AACR,kBAAY,KAAK;AAAA,QACf,MAAM;AAAA,QACN,IAAI,IAAI,MAAM,IAAI,IAAI,IAAI,SAAS;AAAA,QACnC,UAAU;AAAA,QACV;AAAA,MACF,CAAC;AAAA,IACH,OAAO;AACL,YAAM,OAAO,IAAI,QAAQ,YAAY,EAAE,EAAE,MAAM,WAAW,EAAE,OAAO,OAAO;AAC1E,YAAM,OAAO,mBAAmB,MAAM,GAAG;AACzC,UAAI,CAAC,MAAM;AACT,gBAAQ,KAAK,uCAAuC,KAAK;AACzD;AAAA,MACF;AACA,UAAI,KAAK,KAAK;AACZ,oBAAY,KAAK;AAAA,UACf,MAAM,KAAK,IAAI,MAAM;AAAA,UACrB,IAAI,KAAK,IAAI,IAAI;AAAA,UACjB,UAAU;AAAA,UACV;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,4BAA4B;AACnC,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AAErC,QAAI;AAEF,YAAM,aAAa,KAAK,MAAM,IAAI;AAClC,YAAM,MAAM,UAAU,IAAI;AAG1B,YAAM,mBAAmB,iBAAiB;AAAA,QACxC,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,YAAY,CAAC;AAAA,QACb,WAAW,CAAC;AAAA,QACZ,UAAU;AAAA,QACV,UAAU;AAAA,QACV,UAAU;AAAA,UACR;AAAA,QACF;AAAA,MACF,CAAC;AAED,YAAM,eAAe,iBAClB,OAAO,SAAO;AAEb,eAAO,CAAC,IAAI,QAAQ,MAAM,sCAAsC;AAAA,MAClE,CAAC,EACA,IAAI,SAAO;AAEV,cAAM,kBAAkB,IAAI,QAAQ,QAAQ,iBAAiB,EAAE,EAAE,MAAM,GAAG;AAC1E,eAAO;AAAA,UACL,KAAK,gBAAgB,CAAC;AAAA,UACtB,SAAS,gBAAgB,CAAC;AAAA,QAC5B;AAAA,MACF,CAAC;AACH,aAAO,mCAAmC,cAAc,GAAG;AAAA,IAC7D,QAAQ;AAAA,IAER;AACA,WAAO,CAAC;AAAA,EACV;AACF;AAEA,SAAS,4BAA4B;AACnC,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AAErC,QAAI;AAEF,YAAM,aAAa,KAAK,MAAM,IAAI;AAClC,YAAM,MAAM,UAAU,IAAI;AAG1B,YAAM,mBAAmB,iBAAiB,UAAU;AACpD,YAAM,eAAe,iBAAiB,IAAI,SAAO;AAC/C,eAAO;AAAA,UACL,KAAK,IAAI,QAAQ,MAAM,GAAG,EAAE,CAAC;AAAA,UAC7B,SAAS,IAAI;AAAA,QACf;AAAA,MACF,CAAC;AACD,aAAO,mCAAmC,cAAc,GAAG;AAAA,IAC7D,QAAQ;AAAA,IAER;AACA,WAAO,CAAC;AAAA,EACV;AACF;AAEA,SAAS,+BAA+B,MAAmC;AACzE,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AACrC,UAAM,aAAa,KAAK,MAAM,IAAI;AAClC,UAAM,MAAM,UAAU,IAAI;AAC1B,UAAM,MAAM,WAAW,iBAAiB,YAAY,IAAI;AACxD,QAAI,KAAK,WAAW,SAAS;AAC3B,aAAO,CAAC;AAAA,IACV;AACA,UAAM,SAAS,IAAI;AACnB,WAAO,mCAAmC,QAAQ,GAAG;AAAA,EACvD;AACF;AAEO,gBAAS,aAAa,OAQd;AACb,MAAI,iBAAqD,MAAM,CAAC;AAChE,UAAQ,MAAM,UAAU;AAAA,IACtB,KAAK;AACH,uBAAiB,0BAA0B;AAC3C;AAAA,IACF,KAAK;AACH,uBAAiB,0BAA0B;AAC3C;AAAA,IACF,KAAK;AACH,uBAAiB,+BAA+B,MAAM,IAAI;AAC1D;AAAA,IACF,KAAK;AACH,uBAAiB,MAAM,CAAC;AACxB;AAAA,EACJ;AAEA,SAAO,IAAI,WAAW;AAAA,IACpB,KAAK,MAAM;AAAA,IACX,YAAY;AAAA,MACV;AAAA,MACA,KAAK;AAAA,MACL;AAAA,MACA,IAAI,YAAY,EAAE,GAAG,YAAY,QAAQ,GAAG,CAAC,CAAC;AAAA,MAC9C,WAAW,MAAM;AAAA,QACf,KAAK;AAAA,UACH,UAAU;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,MACD,WAAW,eAAe,GAAG,CAAC,WAAW;AACvC,YAAI,OAAO,YAAY;AACrB,gBAAM,MAAM,OAAO,MAAM;AACzB,gBAAM,QAAQ,IAAI,SAAS;AAC3B,gBAAM,SAAS,KAAK;AAAA,QACtB;AACA,YAAI,OAAO,cAAc;AACvB,cAAI,OAAO,KAAK,UAAU;AACxB,kBAAM,QAAQ;AAAA,UAChB,OAAO;AACL,kBAAM,OAAO;AAAA,UACf;AAAA,QACF;AAAA,MACF,CAAC;AAAA,MACD,WAAW;AAAA,MACX,OAAO,CAAC,SAAqB;AAC3B,cAAM,aAAa,gBAAgB,EAAE,IAAI;AACzC,YAAI,WAAW,SAAS,GAAG;AACzB,iBAAO;AAAA,QACT;AACA,eAAO,eAAe,IAAI;AAAA,MAC5B,CAAC;AAAA,IACH;AAAA,IACA,QAAQ,MAAM;AAAA,EAChB,CAAC;AACH;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fed5a4f9200b6a5cf90f61b2c7f89f45308868c6"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Pn=function(){return s},s}Pn();function JU(n,e){Pn().f[0]++;const t=(Pn().s[0]++,[]);Pn().s[1]++;for(const i of n){const{key:r,message:o}=(Pn().s[2]++,i);if(Pn().s[3]++,!r)Pn().b[0][0]++,Pn().s[4]++,t.push({from:0,to:e.loc?(Pn().b[1][0]++,e.loc.end.offset):(Pn().b[1][1]++,0),severity:"error",message:o});else{Pn().b[0][1]++;const s=(Pn().s[5]++,r.replace(/^\[|\]$/g,"").split(/\.|[[\]]+/).filter(Boolean)),a=(Pn().s[6]++,WR(s,e));if(Pn().s[7]++,a)Pn().b[2][1]++;else{Pn().b[2][0]++,Pn().s[8]++,console.warn("Something went wrong parsing error:",i),Pn().s[9]++;continue}Pn().s[10]++,a.loc?(Pn().b[3][0]++,Pn().s[11]++,t.push({from:a.loc.start.offset,to:a.loc.end.offset,severity:"error",message:o})):Pn().b[3][1]++}}return Pn().s[12]++,t}function Hwe(){return Pn().f[1]++,Pn().s[13]++,n=>{Pn().f[2]++;const e=(Pn().s[14]++,n.state.doc.toString());Pn().s[15]++;try{const t=(Pn().s[16]++,JSON.parse(e)),i=(Pn().s[17]++,XU(e)),r=(Pn().s[18]++,kd({version:8,name:"Empty Style",metadata:{},sources:{},sprite:"",glyphs:"https://example.com/glyphs/{fontstack}/{range}.pbf",layers:[t]})),o=(Pn().s[19]++,r.filter(s=>(Pn().f[3]++,Pn().s[20]++,!s.message.match(/^layers\[0\]: source ".*" not found$/))).map(s=>{Pn().f[4]++;const a=(Pn().s[21]++,s.message.replace(/^layers\[0\]./,"").split(":"));return Pn().s[22]++,{key:a[0],message:a[1]}}));return Pn().s[23]++,JU(o,i)}catch{}return Pn().s[24]++,[]}}function Zwe(){return Pn().f[5]++,Pn().s[25]++,n=>{Pn().f[6]++;const e=(Pn().s[26]++,n.state.doc.toString());Pn().s[27]++;try{const t=(Pn().s[28]++,JSON.parse(e)),i=(Pn().s[29]++,XU(e)),r=(Pn().s[30]++,kd(t)),o=(Pn().s[31]++,r.map(s=>(Pn().f[7]++,Pn().s[32]++,{key:s.message.split(":")[0],message:s.message})));return Pn().s[33]++,JU(o,i)}catch{}return Pn().s[34]++,[]}}function Xwe(n){return Pn().f[8]++,Pn().s[35]++,e=>{Pn().f[9]++;const t=(Pn().s[36]++,e.state.doc.toString()),i=(Pn().s[37]++,JSON.parse(t)),r=(Pn().s[38]++,XU(t)),o=(Pn().s[39]++,Vhe.createExpression(i,n));if(Pn().s[40]++,o?.result!=="error")return Pn().b[4][0]++,Pn().s[41]++,[];Pn().b[4][1]++;const s=(Pn().s[42]++,o.value);return Pn().s[43]++,JU(s,r)}}function Jwe(n){Pn().f[10]++,Pn().s[44]++;let e=()=>(Pn().f[11]++,Pn().s[45]++,[]);switch(Pn().s[46]++,n.lintType){case"style":Pn().b[5][0]++,Pn().s[47]++,e=Zwe(),Pn().s[48]++;break;case"layer":Pn().b[5][1]++,Pn().s[49]++,e=Hwe(),Pn().s[50]++;break;case"expression":Pn().b[5][2]++,Pn().s[51]++,e=Xwe(n.spec),Pn().s[52]++;break;case"json":Pn().b[5][3]++,Pn().s[53]++,e=()=>(Pn().f[12]++,Pn().s[54]++,[]),Pn().s[55]++;break}return Pn().s[56]++,new wi({doc:n.value,extensions:[bwe,Pwe(),qwe,new bM().of(as.tabSize.of(2)),wi.theme({"&":{fontSize:"9pt"}}),wi.updateListener.of(t=>{if(Pn().f[13]++,Pn().s[57]++,t.docChanged){Pn().b[6][0]++;const i=(Pn().s[58]++,t.state.doc),r=(Pn().s[59]++,i.toString());Pn().s[60]++,n.onChange(r)}else Pn().b[6][1]++;Pn().s[61]++,t.focusChanged?(Pn().b[7][0]++,Pn().s[62]++,t.view.hasFocus?(Pn().b[8][0]++,Pn().s[63]++,n.onFocus()):(Pn().b[8][1]++,Pn().s[64]++,n.onBlur())):Pn().b[7][1]++}),vwe(),cwe(t=>{Pn().f[14]++;const i=(Pn().s[65]++,kwe()(t));return Pn().s[66]++,i.length>0?(Pn().b[9][0]++,Pn().s[67]++,i):(Pn().b[9][1]++,Pn().s[68]++,e(t))})],parent:n.parent})}function ci(){var n="/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",e="e7ca120656f943a515aa911b15fec84f46dcc658",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:14,column:3}},1:{start:{line:16,column:8},end:{line:16,column:12}},2:{start:{line:17,column:22},end:{line:17,column:27}},3:{start:{line:19,column:4},end:{line:19,column:17}},4:{start:{line:20,column:4},end:{line:23,column:6}},5:{start:{line:26,column:4},end:{line:26,column:63}},6:{start:{line:29,column:4},end:{line:37,column:7}},7:{start:{line:33,column:27},end:{line:33,column:47}},8:{start:{line:34,column:21},end:{line:34,column:35}},9:{start:{line:35,column:20},end:{line:35,column:33}},10:{start:{line:39,column:12},end:{line:44,column:3}},11:{start:{line:40,column:4},end:{line:40,column:49}},12:{start:{line:40,column:28},end:{line:40,column:49}},13:{start:{line:41,column:4},end:{line:43,column:7}},14:{start:{line:45,column:11},end:{line:50,column:3}},15:{start:{line:46,column:4},end:{line:46,column:47}},16:{start:{line:46,column:27},end:{line:46,column:47}},17:{start:{line:47,column:4},end:{line:49,column:7}},18:{start:{line:52,column:4},end:{line:66,column:5}},19:{start:{line:53,column:6},end:{line:53,column:36}},20:{start:{line:54,column:30},end:{line:60,column:7}},21:{start:{line:61,column:6},end:{line:64,column:7}},22:{start:{line:62,column:8},end:{line:62,column:63}},23:{start:{line:63,column:8},end:{line:63,column:46}},24:{start:{line:65,column:6},end:{line:65,column:43}},25:{start:{line:68,column:13},end:{line:92,column:3}},26:{start:{line:69,column:4},end:{line:75,column:5}},27:{start:{line:70,column:6},end:{line:70,column:37}},28:{start:{line:71,column:6},end:{line:73,column:9}},29:{start:{line:74,column:6},end:{line:74,column:13}},30:{start:{line:76,column:20},end:{line:76,column:51}},31:{start:{line:77,column:4},end:{line:88,column:5}},32:{start:{line:79,column:6},end:{line:84,column:7}},33:{start:{line:80,column:8},end:{line:80,column:42}},34:{start:{line:82,column:8},end:{line:82,column:19}},35:{start:{line:83,column:8},end:{line:83,column:27}},36:{start:{line:85,column:6},end:{line:87,column:7}},37:{start:{line:86,column:8},end:{line:86,column:66}},38:{start:{line:86,column:33},end:{line:86,column:66}},39:{start:{line:89,column:4},end:{line:91,column:7}},40:{start:{line:94,column:4},end:{line:102,column:9}},41:{start:{line:99,column:10},end:{line:99,column:24}},42:{start:{line:105,column:18},end:{line:105,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:13},end:{line:9,column:14}},loc:{start:{line:9,column:19},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:11,column:12},end:{line:11,column:13}},loc:{start:{line:11,column:18},end:{line:12,column:5}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:21},end:{line:24,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:22},end:{line:27,column:3}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:22},end:{line:38,column:3}},line:28},5:{name:"(anonymous_5)",decl:{start:{line:33,column:16},end:{line:33,column:17}},loc:{start:{line:33,column:27},end:{line:33,column:47}},line:33},6:{name:"(anonymous_6)",decl:{start:{line:34,column:15},end:{line:34,column:16}},loc:{start:{line:34,column:21},end:{line:34,column:35}},line:34},7:{name:"(anonymous_7)",decl:{start:{line:35,column:14},end:{line:35,column:15}},loc:{start:{line:35,column:20},end:{line:35,column:33}},line:35},8:{name:"(anonymous_8)",decl:{start:{line:39,column:12},end:{line:39,column:13}},loc:{start:{line:39,column:18},end:{line:44,column:3}},line:39},9:{name:"(anonymous_9)",decl:{start:{line:45,column:11},end:{line:45,column:12}},loc:{start:{line:45,column:17},end:{line:50,column:3}},line:45},10:{name:"(anonymous_10)",decl:{start:{line:51,column:2},end:{line:51,column:3}},loc:{start:{line:51,column:32},end:{line:67,column:3}},line:51},11:{name:"(anonymous_11)",decl:{start:{line:68,column:13},end:{line:68,column:14}},loc:{start:{line:68,column:21},end:{line:92,column:3}},line:68},12:{name:"(anonymous_12)",decl:{start:{line:93,column:2},end:{line:93,column:3}},loc:{start:{line:93,column:11},end:{line:103,column:3}},line:93},13:{name:"(anonymous_13)",decl:{start:{line:98,column:13},end:{line:98,column:14}},loc:{start:{line:98,column:21},end:{line:100,column:9}},line:98}},branchMap:{0:{loc:{start:{line:32,column:16},end:{line:32,column:46}},type:"binary-expr",locations:[{start:{line:32,column:16},end:{line:32,column:35}},{start:{line:32,column:39},end:{line:32,column:46}}],line:32},1:{loc:{start:{line:40,column:4},end:{line:40,column:49}},type:"if",locations:[{start:{line:40,column:4},end:{line:40,column:49}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},2:{loc:{start:{line:46,column:4},end:{line:46,column:47}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:47}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},3:{loc:{start:{line:52,column:4},end:{line:66,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:66,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},4:{loc:{start:{line:52,column:8},end:{line:52,column:69}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:29}},{start:{line:52,column:33},end:{line:52,column:69}}],line:52},5:{loc:{start:{line:61,column:6},end:{line:64,column:7}},type:"if",locations:[{start:{line:61,column:6},end:{line:64,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},6:{loc:{start:{line:69,column:4},end:{line:75,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:75,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},7:{loc:{start:{line:77,column:4},end:{line:88,column:5}},type:"if",locations:[{start:{line:77,column:4},end:{line:88,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:77},8:{loc:{start:{line:85,column:6},end:{line:87,column:7}},type:"if",locations:[{start:{line:85,column:6},end:{line:87,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:85},9:{loc:{start:{line:86,column:8},end:{line:86,column:66}},type:"if",locations:[{start:{line:86,column:8},end:{line:86,column:66}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:86}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx"],names:[],mappings:"AAiIM;AAjIN,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAA+B,uBAAuB;AAGtD,OAAO,qBAAqB;AAE5B,SAAQ,oBAAmB;AAyB3B,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,IACf,YAAY;AAAA,EACd;AAAA,EACA;AAAA,EACA,MAA6B;AAAA,EAC7B,oBAA6B;AAAA,EAE7B,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,MACX,WAAW,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,IAChD;AAAA,EACF;AAAA,EAEA,cAAc,MAAW;AACvB,WAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,EACzD;AAAA,EAEA,oBAAqB;AACnB,SAAK,QAAQ,aAAa;AAAA,MACxB,QAAQ,KAAK;AAAA,MACb,OAAO,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,MAC1C,UAAU,KAAK,MAAM,YAAY;AAAA,MACjC,UAAU,CAAC,UAAiB,KAAK,SAAS,KAAK;AAAA,MAC/C,SAAS,MAAM,KAAK,QAAQ;AAAA,MAC5B,QAAQ,MAAM,KAAK,OAAO;AAAA,MAC1B,MAAM,KAAK,MAAM;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,UAAU,MAAM;AACd,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ;AAC3C,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,QAAI,KAAK,MAAM,OAAQ,MAAK,MAAM,OAAO;AACzC,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,mBAAmB,WAA2B;AAC5C,QAAI,CAAC,KAAK,MAAM,aAAa,UAAU,UAAU,KAAK,MAAM,OAAO;AACjE,WAAK,oBAAoB;AACzB,YAAM,kBAAmC;AAAA,QACvC,SAAS;AAAA,UACP,MAAM;AAAA,UACN,IAAI,KAAK,MAAO,MAAM,IAAI;AAAA,UAC1B,QAAQ,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,QAC7C;AAAA,MACF;AACA,UAAI,KAAK,MAAM,YAAY;AACzB,wBAAgB,YAAY,KAAK,MAAO,MAAM;AAC9C,wBAAgB,iBAAiB;AAAA,MACnC;AACA,WAAK,MAAO,SAAS,eAAe;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,WAAW,CAAC,OAAgB;AAC1B,QAAI,KAAK,mBAAmB;AAC1B,WAAK,oBAAoB;AACzB,WAAK,SAAS;AAAA,QACZ,WAAW,KAAK,MAAO,MAAM,IAAI,SAAS;AAAA,MAC5C,CAAC;AACD;AAAA,IACF;AACA,UAAM,UAAU,KAAK,MAAO,MAAM,IAAI,SAAS;AAE/C,QAAI,KAAK,MAAM,cAAc,SAAS;AACpC,UAAI,aAAa;AACjB,UAAI;AACF,sBAAc,KAAK,MAAM,OAAO;AAAA,MAClC,SAAQ,MAAM;AACZ,cAAM;AACN,gBAAQ,KAAK,IAAI;AAAA,MACnB;AAEA,UAAI,CAAC,KAAK;AACR,YAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,WAAW;AAAA,MAC1D;AAAA,IACF;AAEA,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,eAAc,eAAY,eAAc,eAAY,QAAO,OAAO,EAAC,QAAQ,OAAM,GACrG;AAAA,MAAC;AAAA;AAAA,QACC,WAAW,WAAW,wBAAwB,KAAK,MAAM,SAAS;AAAA,QAClE,KAAK,CAAC,OAAO;AAAC,eAAK,MAAM;AAAA,QAAG;AAAA;AAAA,IAC9B,GACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e7ca120656f943a515aa911b15fec84f46dcc658"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ci=function(){return s},s}ci();class eSe extends In.Component{static defaultProps=(ci().s[0]++,{onFocus:()=>{ci().f[0]++},onBlur:()=>{ci().f[1]++},withScroll:!1});_view;_el=(ci().s[1]++,null);_cancelNextChange=(ci().s[2]++,!1);constructor(e){ci().f[2]++,ci().s[3]++,super(e),ci().s[4]++,this.state={isEditing:!1,prevValue:this.getPrettyJson(this.props.value)}}getPrettyJson(e){return ci().f[3]++,ci().s[5]++,f_e(e,{indent:2,maxLength:40})}componentDidMount(){ci().f[4]++,ci().s[6]++,this._view=Jwe({parent:this._el,value:this.getPrettyJson(this.props.value),lintType:(ci().b[0][0]++,this.props.lintType||(ci().b[0][1]++,"layer")),onChange:e=>(ci().f[5]++,ci().s[7]++,this.onChange(e)),onFocus:()=>(ci().f[6]++,ci().s[8]++,this.onFocus()),onBlur:()=>(ci().f[7]++,ci().s[9]++,this.onBlur()),spec:this.props.spec})}onFocus=(ci().s[10]++,()=>{ci().f[8]++,ci().s[11]++,this.props.onFocus?(ci().b[1][0]++,ci().s[12]++,this.props.onFocus()):ci().b[1][1]++,ci().s[13]++,this.setState({isEditing:!0})});onBlur=(ci().s[14]++,()=>{ci().f[9]++,ci().s[15]++,this.props.onBlur?(ci().b[2][0]++,ci().s[16]++,this.props.onBlur()):ci().b[2][1]++,ci().s[17]++,this.setState({isEditing:!1})});componentDidUpdate(e){if(ci().f[10]++,ci().s[18]++,ci().b[4][0]++,!this.state.isEditing&&(ci().b[4][1]++,e.value!==this.props.value)){ci().b[3][0]++,ci().s[19]++,this._cancelNextChange=!0;const t=(ci().s[20]++,{changes:{from:0,to:this._view.state.doc.length,insert:this.getPrettyJson(this.props.value)}});ci().s[21]++,this.props.withScroll?(ci().b[5][0]++,ci().s[22]++,t.selection=this._view.state.selection,ci().s[23]++,t.scrollIntoView=!0):ci().b[5][1]++,ci().s[24]++,this._view.dispatch(t)}else ci().b[3][1]++}onChange=(ci().s[25]++,e=>{if(ci().f[11]++,ci().s[26]++,this._cancelNextChange){ci().b[6][0]++,ci().s[27]++,this._cancelNextChange=!1,ci().s[28]++,this.setState({prevValue:this._view.state.doc.toString()}),ci().s[29]++;return}else ci().b[6][1]++;const t=(ci().s[30]++,this._view.state.doc.toString());if(ci().s[31]++,this.state.prevValue!==t){ci().b[7][0]++;let i,r;ci().s[32]++;try{ci().s[33]++,i=JSON.parse(t)}catch(o){ci().s[34]++,r=o,ci().s[35]++,console.warn(o)}ci().s[36]++,r?ci().b[8][1]++:(ci().b[8][0]++,ci().s[37]++,this.props.onChange?(ci().b[9][0]++,ci().s[38]++,this.props.onChange(i)):ci().b[9][1]++)}else ci().b[7][1]++;ci().s[39]++,this.setState({prevValue:t})});render(){return ci().f[12]++,ci().s[40]++,oe.jsx("div",{className:"json-editor","data-wd-key":"json-editor","aria-hidden":"true",style:{cursor:"text"},children:oe.jsx("div",{className:Ig("codemirror-container",this.props.className),ref:e=>{ci().f[13]++,ci().s[41]++,this._el=e}})})}}const Are=(ci().s[42]++,Do()(eSe));function S2(){var n="/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx",e="528ce6ccdf2ca316a82073d06d75ca2a10ac08df",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx",statementMap:{0:{start:{line:4,column:27},end:{line:19,column:1}},1:{start:{line:5,column:2},end:{line:18,column:7}},2:{start:{line:20,column:19},end:{line:20,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:27},end:{line:4,column:28}},loc:{start:{line:4,column:38},end:{line:19,column:1}},line:4}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx"],names:[],mappings:"AAcS,mBACL,KADK;AAdT,OAAO,eAAe;AAEtB,SAAS,uBAA6C;AAUtD,MAAM,qBAAgD,CAAC,UAAU;AAE/D,SAAO,iCACL;AAAA,wBAAC,YAAO,WAAU,mBAAkB,SAAS,MAAM,SAAS,cAAY,MAAM,EAAE,OAAO,GAAG,OAAO,EAAE,UAAU,UAAU,KAAK,KAAK,QAAQ,EAAE,GAAI,gBAAM,EAAE,2BAA2B,GAAE;AAAA,IACpL;AAAA,MAAC;AAAA;AAAA,QACC,UAAS;AAAA,QACT,OAAO,MAAM;AAAA,QACb,UAAU,MAAM;AAAA,QAChB,WAAW;AAAA,QACX,YAAY;AAAA;AAAA,IACd;AAAA,IAAE;AAAA,KACJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AAEvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"528ce6ccdf2ca316a82073d06d75ca2a10ac08df"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return S2=function(){return s},s}S2();S2().s[0]++;const tSe=n=>(S2().f[0]++,S2().s[1]++,oe.jsxs(oe.Fragment,{children:[oe.jsx("button",{className:"maputnik-button",onClick:n.onClose,"aria-label":n.t("Close"),style:{position:"sticky",top:"0",zIndex:1},children:n.t("Click to close the editor")}),oe.jsx(Are,{lintType:"style",value:n.value,onChange:n.onChange,className:"maputnik-code-editor",withScroll:!0}),";"]})),nSe=(S2().s[2]++,Do()(tSe));var i4=vP();function iSe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return wt.useMemo(()=>i=>{e.forEach(r=>r(i))},e)}const zB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function G2(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function eK(n){return"nodeType"in n}function Dd(n){var e,t;return n?G2(n)?n:eK(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function tK(n){const{Document:e}=Dd(n);return n instanceof e}function OM(n){return G2(n)?!1:n instanceof Dd(n).HTMLElement}function hre(n){return n instanceof Dd(n).SVGElement}function W2(n){return n?G2(n)?n.document:eK(n)?tK(n)?n:OM(n)||hre(n)?n.ownerDocument:document:document:document}const wg=zB?wt.useLayoutEffect:wt.useEffect;function nK(n){const e=wt.useRef(n);return wg(()=>{e.current=n}),wt.useCallback(function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.current==null?void 0:e.current(...i)},[])}function rSe(){const n=wt.useRef(null),e=wt.useCallback((i,r)=>{n.current=setInterval(i,r)},[]),t=wt.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function O5(n,e){e===void 0&&(e=[n]);const t=wt.useRef(n);return wg(()=>{t.current!==n&&(t.current=n)},e),t}function IM(n,e){const t=wt.useRef();return wt.useMemo(()=>{const i=n(t.current);return t.current=i,i},[...e])}function o6(n){const e=nK(n),t=wt.useRef(null),i=wt.useCallback(r=>{r!==t.current&&e?.(r,t.current),t.current=r},[]);return[t,i]}function QR(n){const e=wt.useRef();return wt.useEffect(()=>{e.current=n},[n]),e.current}let _I={};function TM(n,e){return wt.useMemo(()=>{if(e)return e;const t=_I[n]==null?0:_I[n]+1;return _I[n]=t,n+"-"+t},[n,e])}function dre(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return i.reduce((o,s)=>{const a=Object.entries(s);for(const[c,d]of a){const m=o[c];m!=null&&(o[c]=m+n*d)}return o},{...e})}}const Xx=dre(1),s6=dre(-1);function oSe(n){return"clientX"in n&&"clientY"in n}function iK(n){if(!n)return!1;const{KeyboardEvent:e}=Dd(n.target);return e&&n instanceof e}function sSe(n){if(!n)return!1;const{TouchEvent:e}=Dd(n.target);return e&&n instanceof e}function qR(n){if(sSe(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return oSe(n)?{x:n.clientX,y:n.clientY}:null}const I5=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[I5.Translate.toString(n),I5.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:i}=n;return e+" "+t+"ms "+i}}}),NW="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function aSe(n){return n.matches(NW)?n:n.querySelector(NW)}const lSe={display:"none"};function uSe(n){let{id:e,value:t}=n;return In.createElement("div",{id:e,style:lSe},t)}function cSe(n){let{id:e,announcement:t,ariaLiveType:i="assertive"}=n;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return In.createElement("div",{id:e,style:r,role:"status","aria-live":i,"aria-atomic":!0},t)}function ASe(){const[n,e]=wt.useState("");return{announce:wt.useCallback(i=>{i!=null&&e(i)},[]),announcement:n}}const fre=wt.createContext(null);function hSe(n){const e=wt.useContext(fre);wt.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function dSe(){const[n]=wt.useState(()=>new Set),e=wt.useCallback(i=>(n.add(i),()=>n.delete(i)),[n]);return[wt.useCallback(i=>{let{type:r,event:o}=i;n.forEach(s=>{var a;return(a=s[r])==null?void 0:a.call(s,o)})},[n]),e]}const fSe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},pSe={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function mSe(n){let{announcements:e=pSe,container:t,hiddenTextDescribedById:i,screenReaderInstructions:r=fSe}=n;const{announce:o,announcement:s}=ASe(),a=TM("DndLiveRegion"),[c,d]=wt.useState(!1);if(wt.useEffect(()=>{d(!0)},[]),hSe(wt.useMemo(()=>({onDragStart(v){let{active:M}=v;o(e.onDragStart({active:M}))},onDragMove(v){let{active:M,over:B}=v;e.onDragMove&&o(e.onDragMove({active:M,over:B}))},onDragOver(v){let{active:M,over:B}=v;o(e.onDragOver({active:M,over:B}))},onDragEnd(v){let{active:M,over:B}=v;o(e.onDragEnd({active:M,over:B}))},onDragCancel(v){let{active:M,over:B}=v;o(e.onDragCancel({active:M,over:B}))}}),[o,e])),!c)return null;const m=In.createElement(In.Fragment,null,In.createElement(uSe,{id:i,value:r.draggable}),In.createElement(cSe,{id:a,announcement:s}));return t?i4.createPortal(m,t):m}var hc;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(hc||(hc={}));function a6(){}function gSe(n,e){return wt.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function ySe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return wt.useMemo(()=>[...e].filter(i=>i!=null),[...e])}const Km=Object.freeze({x:0,y:0});function vSe(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function bSe(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return t-i}function CSe(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return i-t}function _Se(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function GW(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const xSe=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const r=GW(e,e.left,e.top),o=[];for(const s of i){const{id:a}=s,c=t.get(a);if(c){const d=vSe(GW(c),r);o.push({id:a,data:{droppableContainer:s,value:d}})}}return o.sort(bSe)};function MSe(n,e){const t=Math.max(e.top,n.top),i=Math.max(e.left,n.left),r=Math.min(e.left+e.width,n.left+n.width),o=Math.min(e.top+e.height,n.top+n.height),s=r-i,a=o-t;if(i<r&&t<o){const c=e.width*e.height,d=n.width*n.height,m=s*a,v=m/(c+d-m);return Number(v.toFixed(4))}return 0}const wSe=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const r=[];for(const o of i){const{id:s}=o,a=t.get(s);if(a){const c=MSe(a,e);c>0&&r.push({id:s,data:{droppableContainer:o,value:c}})}}return r.sort(CSe)};function SSe(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function pre(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:Km}function ESe(n){return function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return r.reduce((s,a)=>({...s,top:s.top+n*a.y,bottom:s.bottom+n*a.y,left:s.left+n*a.x,right:s.right+n*a.x}),{...t})}}const BSe=ESe(1);function OSe(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function ISe(n,e,t){const i=OSe(e);if(!i)return n;const{scaleX:r,scaleY:o,x:s,y:a}=i,c=n.left-s-(1-r)*parseFloat(t),d=n.top-a-(1-o)*parseFloat(t.slice(t.indexOf(" ")+1)),m=r?n.width/r:n.width,v=o?n.height/o:n.height;return{width:m,height:v,top:d,right:c+m,bottom:d+v,left:c}}const TSe={ignoreTransform:!1};function Q2(n,e){e===void 0&&(e=TSe);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:m}=Dd(n).getComputedStyle(n);d&&(t=ISe(t,d,m))}const{top:i,left:r,width:o,height:s,bottom:a,right:c}=t;return{top:i,left:r,width:o,height:s,bottom:a,right:c}}function WW(n){return Q2(n,{ignoreTransform:!0})}function kSe(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function DSe(n,e){return e===void 0&&(e=Dd(n).getComputedStyle(n)),e.position==="fixed"}function RSe(n,e){e===void 0&&(e=Dd(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const o=e[r];return typeof o=="string"?t.test(o):!1})}function rK(n,e){const t=[];function i(r){if(e!=null&&t.length>=e||!r)return t;if(tK(r)&&r.scrollingElement!=null&&!t.includes(r.scrollingElement))return t.push(r.scrollingElement),t;if(!OM(r)||hre(r)||t.includes(r))return t;const o=Dd(n).getComputedStyle(r);return r!==n&&RSe(r,o)&&t.push(r),DSe(r,o)?t:i(r.parentNode)}return n?i(n):t}function mre(n){const[e]=rK(n,1);return e??null}function xI(n){return!zB||!n?null:G2(n)?n:eK(n)?tK(n)||n===W2(n).scrollingElement?window:OM(n)?n:null:null}function gre(n){return G2(n)?n.scrollX:n.scrollLeft}function yre(n){return G2(n)?n.scrollY:n.scrollTop}function YR(n){return{x:gre(n),y:yre(n)}}var Gc;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(Gc||(Gc={}));function vre(n){return!zB||!n?!1:n===document.scrollingElement}function bre(n){const e={x:0,y:0},t=vre(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},i={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},r=n.scrollTop<=e.y,o=n.scrollLeft<=e.x,s=n.scrollTop>=i.y,a=n.scrollLeft>=i.x;return{isTop:r,isLeft:o,isBottom:s,isRight:a,maxScroll:i,minScroll:e}}const PSe={x:.2,y:.2};function LSe(n,e,t,i,r){let{top:o,left:s,right:a,bottom:c}=t;i===void 0&&(i=10),r===void 0&&(r=PSe);const{isTop:d,isBottom:m,isLeft:v,isRight:M}=bre(n),B={x:0,y:0},P={x:0,y:0},U={height:e.height*r.y,width:e.width*r.x};return!d&&o<=e.top+U.height?(B.y=Gc.Backward,P.y=i*Math.abs((e.top+U.height-o)/U.height)):!m&&c>=e.bottom-U.height&&(B.y=Gc.Forward,P.y=i*Math.abs((e.bottom-U.height-c)/U.height)),!M&&a>=e.right-U.width?(B.x=Gc.Forward,P.x=i*Math.abs((e.right-U.width-a)/U.width)):!v&&s<=e.left+U.width&&(B.x=Gc.Backward,P.x=i*Math.abs((e.left+U.width-s)/U.width)),{direction:B,speed:P}}function USe(n){if(n===document.scrollingElement){const{innerWidth:o,innerHeight:s}=window;return{top:0,left:0,right:o,bottom:s,width:o,height:s}}const{top:e,left:t,right:i,bottom:r}=n.getBoundingClientRect();return{top:e,left:t,right:i,bottom:r,width:n.clientWidth,height:n.clientHeight}}function Cre(n){return n.reduce((e,t)=>Xx(e,YR(t)),Km)}function KSe(n){return n.reduce((e,t)=>e+gre(t),0)}function FSe(n){return n.reduce((e,t)=>e+yre(t),0)}function zSe(n,e){if(e===void 0&&(e=Q2),!n)return;const{top:t,left:i,bottom:r,right:o}=e(n);mre(n)&&(r<=0||o<=0||t>=window.innerHeight||i>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const jSe=[["x",["left","right"],KSe],["y",["top","bottom"],FSe]];class oK{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=rK(t),r=Cre(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,s,a]of jSe)for(const c of s)Object.defineProperty(this,c,{get:()=>{const d=a(i),m=r[o]-d;return this.rect[c]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class E4{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...t)})},this.target=e}add(e,t,i){var r;(r=this.target)==null||r.addEventListener(e,t,i),this.listeners.push([e,t,i])}}function NSe(n){const{EventTarget:e}=Dd(n);return n instanceof e?n:W2(n)}function MI(n,e){const t=Math.abs(n.x),i=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+i**2)>e:"x"in e&&"y"in e?t>e.x&&i>e.y:"x"in e?t>e.x:"y"in e?i>e.y:!1}var hp;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(hp||(hp={}));function QW(n){n.preventDefault()}function GSe(n){n.stopPropagation()}var Ms;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(Ms||(Ms={}));const _re={start:[Ms.Space,Ms.Enter],cancel:[Ms.Esc],end:[Ms.Space,Ms.Enter,Ms.Tab]},WSe=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case Ms.Right:return{...t,x:t.x+25};case Ms.Left:return{...t,x:t.x-25};case Ms.Down:return{...t,y:t.y+25};case Ms.Up:return{...t,y:t.y-25}}};class xre{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new E4(W2(t)),this.windowListeners=new E4(Dd(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(hp.Resize,this.handleCancel),this.windowListeners.add(hp.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(hp.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,i=e.node.current;i&&zSe(i),t(Km)}handleKeyDown(e){if(iK(e)){const{active:t,context:i,options:r}=this.props,{keyboardCodes:o=_re,coordinateGetter:s=WSe,scrollBehavior:a="smooth"}=r,{code:c}=e;if(o.end.includes(c)){this.handleEnd(e);return}if(o.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:d}=i.current,m=d?{x:d.left,y:d.top}:Km;this.referenceCoordinates||(this.referenceCoordinates=m);const v=s(e,{active:t,context:i.current,currentCoordinates:m});if(v){const M=s6(v,m),B={x:0,y:0},{scrollableAncestors:P}=i.current;for(const U of P){const z=e.code,{isTop:V,isRight:Z,isLeft:X,isBottom:re,maxScroll:ie,minScroll:te}=bre(U),q=USe(U),le={x:Math.min(z===Ms.Right?q.right-q.width/2:q.right,Math.max(z===Ms.Right?q.left:q.left+q.width/2,v.x)),y:Math.min(z===Ms.Down?q.bottom-q.height/2:q.bottom,Math.max(z===Ms.Down?q.top:q.top+q.height/2,v.y))},ce=z===Ms.Right&&!Z||z===Ms.Left&&!X,ve=z===Ms.Down&&!re||z===Ms.Up&&!V;if(ce&&le.x!==v.x){const ge=U.scrollLeft+M.x,Ee=z===Ms.Right&&ge<=ie.x||z===Ms.Left&&ge>=te.x;if(Ee&&!M.y){U.scrollTo({left:ge,behavior:a});return}Ee?B.x=U.scrollLeft-ge:B.x=z===Ms.Right?U.scrollLeft-ie.x:U.scrollLeft-te.x,B.x&&U.scrollBy({left:-B.x,behavior:a});break}else if(ve&&le.y!==v.y){const ge=U.scrollTop+M.y,Ee=z===Ms.Down&&ge<=ie.y||z===Ms.Up&&ge>=te.y;if(Ee&&!M.x){U.scrollTo({top:ge,behavior:a});return}Ee?B.y=U.scrollTop-ge:B.y=z===Ms.Down?U.scrollTop-ie.y:U.scrollTop-te.y,B.y&&U.scrollBy({top:-B.y,behavior:a});break}}this.handleMove(e,Xx(s6(v,this.referenceCoordinates),B))}}}handleMove(e,t){const{onMove:i}=this.props;e.preventDefault(),i(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}xre.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:i=_re,onActivation:r}=e,{active:o}=t;const{code:s}=n.nativeEvent;if(i.start.includes(s)){const a=o.activatorNode.current;return a&&n.target!==a?!1:(n.preventDefault(),r?.({event:n.nativeEvent}),!0)}return!1}}];function qW(n){return!!(n&&"distance"in n)}function YW(n){return!!(n&&"delay"in n)}class sK{constructor(e,t,i){var r;i===void 0&&(i=NSe(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:s}=o;this.props=e,this.events=t,this.document=W2(s),this.documentListeners=new E4(this.document),this.listeners=new E4(i),this.windowListeners=new E4(Dd(s)),this.initialCoordinates=(r=qR(o))!=null?r:Km,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(hp.Resize,this.handleCancel),this.windowListeners.add(hp.DragStart,QW),this.windowListeners.add(hp.VisibilityChange,this.handleCancel),this.windowListeners.add(hp.ContextMenu,QW),this.documentListeners.add(hp.Keydown,this.handleKeydown),t){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(YW(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(qW(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:i,onPending:r}=this.props;r(i,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(hp.Click,GSe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(hp.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:i,initialCoordinates:r,props:o}=this,{onMove:s,options:{activationConstraint:a}}=o;if(!r)return;const c=(t=qR(e))!=null?t:Km,d=s6(r,c);if(!i&&a){if(qW(a)){if(a.tolerance!=null&&MI(d,a.tolerance))return this.handleCancel();if(MI(d,a.distance))return this.handleStart()}if(YW(a)&&MI(d,a.tolerance))return this.handleCancel();this.handlePending(a,d);return}e.cancelable&&e.preventDefault(),s(c)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Ms.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const QSe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class aK extends sK{constructor(e){const{event:t}=e,i=W2(t.target);super(e,QSe,i)}}aK.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return!t.isPrimary||t.button!==0?!1:(i?.({event:t}),!0)}}];const qSe={move:{name:"mousemove"},end:{name:"mouseup"}};var VR;(function(n){n[n.RightClick=2]="RightClick"})(VR||(VR={}));class YSe extends sK{constructor(e){super(e,qSe,W2(e.event.target))}}YSe.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return t.button===VR.RightClick?!1:(i?.({event:t}),!0)}}];const wI={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class VSe extends sK{constructor(e){super(e,wI)}static setup(){return window.addEventListener(wI.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(wI.move.name,e)};function e(){}}}VSe.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;const{touches:r}=t;return r.length>1?!1:(i?.({event:t}),!0)}}];var B4;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(B4||(B4={}));var l6;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(l6||(l6={}));function $Se(n){let{acceleration:e,activator:t=B4.Pointer,canScroll:i,draggingRect:r,enabled:o,interval:s=5,order:a=l6.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:m,delta:v,threshold:M}=n;const B=ZSe({delta:v,disabled:!o}),[P,U]=rSe(),z=wt.useRef({x:0,y:0}),V=wt.useRef({x:0,y:0}),Z=wt.useMemo(()=>{switch(t){case B4.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case B4.DraggableRect:return r}},[t,r,c]),X=wt.useRef(null),re=wt.useCallback(()=>{const te=X.current;if(!te)return;const q=z.current.x*V.current.x,le=z.current.y*V.current.y;te.scrollBy(q,le)},[]),ie=wt.useMemo(()=>a===l6.TreeOrder?[...d].reverse():d,[a,d]);wt.useEffect(()=>{if(!o||!d.length||!Z){U();return}for(const te of ie){if(i?.(te)===!1)continue;const q=d.indexOf(te),le=m[q];if(!le)continue;const{direction:ce,speed:ve}=LSe(te,le,Z,e,M);for(const ge of["x","y"])B[ge][ce[ge]]||(ve[ge]=0,ce[ge]=0);if(ve.x>0||ve.y>0){U(),X.current=te,P(re,s),z.current=ve,V.current=ce;return}}z.current={x:0,y:0},V.current={x:0,y:0},U()},[e,re,i,U,o,s,JSON.stringify(Z),JSON.stringify(B),P,d,ie,m,JSON.stringify(M)])}const HSe={x:{[Gc.Backward]:!1,[Gc.Forward]:!1},y:{[Gc.Backward]:!1,[Gc.Forward]:!1}};function ZSe(n){let{delta:e,disabled:t}=n;const i=QR(e);return IM(r=>{if(t||!i||!r)return HSe;const o={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[Gc.Backward]:r.x[Gc.Backward]||o.x===-1,[Gc.Forward]:r.x[Gc.Forward]||o.x===1},y:{[Gc.Backward]:r.y[Gc.Backward]||o.y===-1,[Gc.Forward]:r.y[Gc.Forward]||o.y===1}}},[t,e,i])}function XSe(n,e){const t=e!=null?n.get(e):void 0,i=t?t.node.current:null;return IM(r=>{var o;return e==null?null:(o=i??r)!=null?o:null},[i,e])}function JSe(n,e){return wt.useMemo(()=>n.reduce((t,i)=>{const{sensor:r}=i,o=r.activators.map(s=>({eventName:s.eventName,handler:e(s.handler,i)}));return[...t,...o]},[]),[n,e])}var T5;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(T5||(T5={}));var $R;(function(n){n.Optimized="optimized"})($R||($R={}));const VW=new Map;function eEe(n,e){let{dragging:t,dependencies:i,config:r}=e;const[o,s]=wt.useState(null),{frequency:a,measure:c,strategy:d}=r,m=wt.useRef(n),v=z(),M=O5(v),B=wt.useCallback(function(V){V===void 0&&(V=[]),!M.current&&s(Z=>Z===null?V:Z.concat(V.filter(X=>!Z.includes(X))))},[M]),P=wt.useRef(null),U=IM(V=>{if(v&&!t)return VW;if(!V||V===VW||m.current!==n||o!=null){const Z=new Map;for(let X of n){if(!X)continue;if(o&&o.length>0&&!o.includes(X.id)&&X.rect.current){Z.set(X.id,X.rect.current);continue}const re=X.node.current,ie=re?new oK(c(re),re):null;X.rect.current=ie,ie&&Z.set(X.id,ie)}return Z}return V},[n,o,t,v,c]);return wt.useEffect(()=>{m.current=n},[n]),wt.useEffect(()=>{v||B()},[t,v]),wt.useEffect(()=>{o&&o.length>0&&s(null)},[JSON.stringify(o)]),wt.useEffect(()=>{v||typeof a!="number"||P.current!==null||(P.current=setTimeout(()=>{B(),P.current=null},a))},[a,v,B,...i]),{droppableRects:U,measureDroppableContainers:B,measuringScheduled:o!=null};function z(){switch(d){case T5.Always:return!1;case T5.BeforeDragging:return t;default:return!t}}}function Mre(n,e){return IM(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function tEe(n,e){return Mre(n,e)}function nEe(n){let{callback:e,disabled:t}=n;const i=nK(e),r=wt.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(i)},[i,t]);return wt.useEffect(()=>()=>r?.disconnect(),[r]),r}function jB(n){let{callback:e,disabled:t}=n;const i=nK(e),r=wt.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(i)},[t]);return wt.useEffect(()=>()=>r?.disconnect(),[r]),r}function iEe(n){return new oK(Q2(n),n)}function $W(n,e,t){e===void 0&&(e=iEe);const[i,r]=wt.useState(null);function o(){r(c=>{if(!n)return null;if(n.isConnected===!1){var d;return(d=c??t)!=null?d:null}const m=e(n);return JSON.stringify(c)===JSON.stringify(m)?c:m})}const s=nEe({callback(c){if(n)for(const d of c){const{type:m,target:v}=d;if(m==="childList"&&v instanceof HTMLElement&&v.contains(n)){o();break}}}}),a=jB({callback:o});return wg(()=>{o(),n?(a?.observe(n),s?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),s?.disconnect())},[n]),i}function rEe(n){const e=Mre(n);return pre(n,e)}const HW=[];function oEe(n){const e=wt.useRef(n),t=IM(i=>n?i&&i!==HW&&n&&e.current&&n.parentNode===e.current.parentNode?i:rK(n):HW,[n]);return wt.useEffect(()=>{e.current=n},[n]),t}function sEe(n){const[e,t]=wt.useState(null),i=wt.useRef(n),r=wt.useCallback(o=>{const s=xI(o.target);s&&t(a=>a?(a.set(s,YR(s)),new Map(a)):null)},[]);return wt.useEffect(()=>{const o=i.current;if(n!==o){s(o);const a=n.map(c=>{const d=xI(c);return d?(d.addEventListener("scroll",r,{passive:!0}),[d,YR(d)]):null}).filter(c=>c!=null);t(a.length?new Map(a):null),i.current=n}return()=>{s(n),s(o)};function s(a){a.forEach(c=>{const d=xI(c);d?.removeEventListener("scroll",r)})}},[r,n]),wt.useMemo(()=>n.length?e?Array.from(e.values()).reduce((o,s)=>Xx(o,s),Km):Cre(n):Km,[n,e])}function ZW(n,e){e===void 0&&(e=[]);const t=wt.useRef(null);return wt.useEffect(()=>{t.current=null},e),wt.useEffect(()=>{const i=n!==Km;i&&!t.current&&(t.current=n),!i&&t.current&&(t.current=null)},[n]),t.current?s6(n,t.current):Km}function aEe(n){wt.useEffect(()=>{if(!zB)return;const e=n.map(t=>{let{sensor:i}=t;return i.setup==null?void 0:i.setup()});return()=>{for(const t of e)t?.()}},n.map(e=>{let{sensor:t}=e;return t}))}function lEe(n,e){return wt.useMemo(()=>n.reduce((t,i)=>{let{eventName:r,handler:o}=i;return t[r]=s=>{o(s,e)},t},{}),[n,e])}function wre(n){return wt.useMemo(()=>n?kSe(n):null,[n])}const XW=[];function uEe(n,e){e===void 0&&(e=Q2);const[t]=n,i=wre(t?Dd(t):null),[r,o]=wt.useState(XW);function s(){o(()=>n.length?n.map(c=>vre(c)?i:new oK(e(c),c)):XW)}const a=jB({callback:s});return wg(()=>{a?.disconnect(),s(),n.forEach(c=>a?.observe(c))},[n]),r}function cEe(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return OM(e)?e:n}function AEe(n){let{measure:e}=n;const[t,i]=wt.useState(null),r=wt.useCallback(d=>{for(const{target:m}of d)if(OM(m)){i(v=>{const M=e(m);return v?{...v,width:M.width,height:M.height}:M});break}},[e]),o=jB({callback:r}),s=wt.useCallback(d=>{const m=cEe(d);o?.disconnect(),m&&o?.observe(m),i(m?e(m):null)},[e,o]),[a,c]=o6(s);return wt.useMemo(()=>({nodeRef:a,rect:t,setRef:c}),[t,a,c])}const hEe=[{sensor:aK,options:{}},{sensor:xre,options:{}}],dEe={current:{}},RS={draggable:{measure:WW},droppable:{measure:WW,strategy:T5.WhileDragging,frequency:$R.Optimized},dragOverlay:{measure:Q2}};class O4 extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,i;return(t=(i=this.get(e))==null?void 0:i.node.current)!=null?t:void 0}}const fEe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new O4,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:a6},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:RS,measureDroppableContainers:a6,windowRect:null,measuringScheduled:!1},pEe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:a6,draggableNodes:new Map,over:null,measureDroppableContainers:a6},NB=wt.createContext(pEe),Sre=wt.createContext(fEe);function mEe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new O4}}}function gEe(n,e){switch(e.type){case hc.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case hc.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case hc.DragEnd:case hc.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case hc.RegisterDroppable:{const{element:t}=e,{id:i}=t,r=new O4(n.droppable.containers);return r.set(i,t),{...n,droppable:{...n.droppable,containers:r}}}case hc.SetDroppableDisabled:{const{id:t,key:i,disabled:r}=e,o=n.droppable.containers.get(t);if(!o||i!==o.key)return n;const s=new O4(n.droppable.containers);return s.set(t,{...o,disabled:r}),{...n,droppable:{...n.droppable,containers:s}}}case hc.UnregisterDroppable:{const{id:t,key:i}=e,r=n.droppable.containers.get(t);if(!r||i!==r.key)return n;const o=new O4(n.droppable.containers);return o.delete(t),{...n,droppable:{...n.droppable,containers:o}}}default:return n}}function yEe(n){let{disabled:e}=n;const{active:t,activatorEvent:i,draggableNodes:r}=wt.useContext(NB),o=QR(i),s=QR(t?.id);return wt.useEffect(()=>{if(!e&&!i&&o&&s!=null){if(!iK(o)||document.activeElement===o.target)return;const a=r.get(s);if(!a)return;const{activatorNode:c,node:d}=a;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const m of[c.current,d.current]){if(!m)continue;const v=aSe(m);if(v){v.focus();break}}})}},[i,e,r,s,o]),null}function vEe(n,e){let{transform:t,...i}=e;return n!=null&&n.length?n.reduce((r,o)=>o({transform:r,...i}),t):t}function bEe(n){return wt.useMemo(()=>({draggable:{...RS.draggable,...n?.draggable},droppable:{...RS.droppable,...n?.droppable},dragOverlay:{...RS.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function CEe(n){let{activeNode:e,measure:t,initialRect:i,config:r=!0}=n;const o=wt.useRef(!1),{x:s,y:a}=typeof r=="boolean"?{x:r,y:r}:r;wg(()=>{if(!s&&!a||!e){o.current=!1;return}if(o.current||!i)return;const d=e?.node.current;if(!d||d.isConnected===!1)return;const m=t(d),v=pre(m,i);if(s||(v.x=0),a||(v.y=0),o.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const M=mre(d);M&&M.scrollBy({top:v.y,left:v.x})}},[e,s,a,i,t])}const Ere=wt.createContext({...Km,scaleX:1,scaleY:1});var sv;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(sv||(sv={}));const _Ee=wt.memo(function(e){var t,i,r,o;let{id:s,accessibility:a,autoScroll:c=!0,children:d,sensors:m=hEe,collisionDetection:v=wSe,measuring:M,modifiers:B,...P}=e;const U=wt.useReducer(gEe,void 0,mEe),[z,V]=U,[Z,X]=dSe(),[re,ie]=wt.useState(sv.Uninitialized),te=re===sv.Initialized,{draggable:{active:q,nodes:le,translate:ce},droppable:{containers:ve}}=z,ge=q!=null?le.get(q):null,Ee=wt.useRef({initial:null,translated:null}),xe=wt.useMemo(()=>{var Cn;return q!=null?{id:q,data:(Cn=ge?.data)!=null?Cn:dEe,rect:Ee}:null},[q,ge]),Te=wt.useRef(null),[Fe,Ie]=wt.useState(null),[Ye,At]=wt.useState(null),mt=O5(P,Object.values(P)),Ue=TM("DndDescribedBy",s),De=wt.useMemo(()=>ve.getEnabled(),[ve]),Ge=bEe(M),{droppableRects:Re,measureDroppableContainers:St,measuringScheduled:ut}=eEe(De,{dragging:te,dependencies:[ce.x,ce.y],config:Ge.droppable}),kt=XSe(le,q),Ut=wt.useMemo(()=>Ye?qR(Ye):null,[Ye]),Le=bn(),ke=tEe(kt,Ge.draggable.measure);CEe({activeNode:q!=null?le.get(q):null,config:Le.layoutShiftCompensation,initialRect:ke,measure:Ge.draggable.measure});const Oe=$W(kt,Ge.draggable.measure,ke),Ze=$W(kt?kt.parentElement:null),bt=wt.useRef({activatorEvent:null,active:null,activeNode:kt,collisionRect:null,collisions:null,droppableRects:Re,draggableNodes:le,draggingNode:null,draggingNodeRect:null,droppableContainers:ve,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),yt=ve.getNodeFor((t=bt.current.over)==null?void 0:t.id),Mt=AEe({measure:Ge.dragOverlay.measure}),Kt=(i=Mt.nodeRef.current)!=null?i:kt,Dt=te?(r=Mt.rect)!=null?r:Oe:null,en=!!(Mt.nodeRef.current&&Mt.rect),Gn=rEe(en?null:Oe),Nn=wre(Kt?Dd(Kt):null),Si=oEe(te?yt??kt:null),Un=uEe(Si),Ln=vEe(B,{transform:{x:ce.x-Gn.x,y:ce.y-Gn.y,scaleX:1,scaleY:1},activatorEvent:Ye,active:xe,activeNodeRect:Oe,containerNodeRect:Ze,draggingNodeRect:Dt,over:bt.current.over,overlayNodeRect:Mt.rect,scrollableAncestors:Si,scrollableAncestorRects:Un,windowRect:Nn}),Tn=Ut?Xx(Ut,ce):null,ti=sEe(Si),Bn=ZW(ti),je=ZW(ti,[Oe]),H=Xx(Ln,Bn),j=Dt?BSe(Dt,Ln):null,Q=xe&&j?v({active:xe,collisionRect:j,droppableRects:Re,droppableContainers:De,pointerCoordinates:Tn}):null,he=_Se(Q,"id"),[Me,Ne]=wt.useState(null),Qe=en?Ln:Xx(Ln,je),it=SSe(Qe,(o=Me?.rect)!=null?o:null,Oe),vt=wt.useRef(null),$e=wt.useCallback((Cn,xt)=>{let{sensor:Ci,options:Ki}=xt;if(Te.current==null)return;const Wn=le.get(Te.current);if(!Wn)return;const Hn=Cn.nativeEvent,Qi=new Ci({active:Te.current,activeNode:Wn,event:Hn,options:Ki,context:bt,onAbort(Ri){if(!le.get(Ri))return;const{onDragAbort:Li}=mt.current,Er={id:Ri};Li?.(Er),Z({type:"onDragAbort",event:Er})},onPending(Ri,qi,Li,Er){if(!le.get(Ri))return;const{onDragPending:un}=mt.current,tr={id:Ri,constraint:qi,initialCoordinates:Li,offset:Er};un?.(tr),Z({type:"onDragPending",event:tr})},onStart(Ri){const qi=Te.current;if(qi==null)return;const Li=le.get(qi);if(!Li)return;const{onDragStart:Er}=mt.current,xo={activatorEvent:Hn,active:{id:qi,data:Li.data,rect:Ee}};i4.unstable_batchedUpdates(()=>{Er?.(xo),ie(sv.Initializing),V({type:hc.DragStart,initialCoordinates:Ri,active:qi}),Z({type:"onDragStart",event:xo}),Ie(vt.current),At(Hn)})},onMove(Ri){V({type:hc.DragMove,coordinates:Ri})},onEnd:Wi(hc.DragEnd),onCancel:Wi(hc.DragCancel)});vt.current=Qi;function Wi(Ri){return async function(){const{active:Li,collisions:Er,over:xo,scrollAdjustedTranslate:un}=bt.current;let tr=null;if(Li&&un){const{cancelDrop:Wo}=mt.current;tr={activatorEvent:Hn,active:Li,collisions:Er,delta:un,over:xo},Ri===hc.DragEnd&&typeof Wo=="function"&&await Promise.resolve(Wo(tr))&&(Ri=hc.DragCancel)}Te.current=null,i4.unstable_batchedUpdates(()=>{V({type:Ri}),ie(sv.Uninitialized),Ne(null),Ie(null),At(null),vt.current=null;const Wo=Ri===hc.DragEnd?"onDragEnd":"onDragCancel";if(tr){const ra=mt.current[Wo];ra?.(tr),Z({type:Wo,event:tr})}})}}},[le]),ot=wt.useCallback((Cn,xt)=>(Ci,Ki)=>{const Wn=Ci.nativeEvent,Hn=le.get(Ki);if(Te.current!==null||!Hn||Wn.dndKit||Wn.defaultPrevented)return;const Qi={active:Hn};Cn(Ci,xt.options,Qi)===!0&&(Wn.dndKit={capturedBy:xt.sensor},Te.current=Ki,$e(Ci,xt))},[le,$e]),b=JSe(m,ot);aEe(m),wg(()=>{Oe&&re===sv.Initializing&&ie(sv.Initialized)},[Oe,re]),wt.useEffect(()=>{const{onDragMove:Cn}=mt.current,{active:xt,activatorEvent:Ci,collisions:Ki,over:Wn}=bt.current;if(!xt||!Ci)return;const Hn={active:xt,activatorEvent:Ci,collisions:Ki,delta:{x:H.x,y:H.y},over:Wn};i4.unstable_batchedUpdates(()=>{Cn?.(Hn),Z({type:"onDragMove",event:Hn})})},[H.x,H.y]),wt.useEffect(()=>{const{active:Cn,activatorEvent:xt,collisions:Ci,droppableContainers:Ki,scrollAdjustedTranslate:Wn}=bt.current;if(!Cn||Te.current==null||!xt||!Wn)return;const{onDragOver:Hn}=mt.current,Qi=Ki.get(he),Wi=Qi&&Qi.rect.current?{id:Qi.id,rect:Qi.rect.current,data:Qi.data,disabled:Qi.disabled}:null,Ri={active:Cn,activatorEvent:xt,collisions:Ci,delta:{x:Wn.x,y:Wn.y},over:Wi};i4.unstable_batchedUpdates(()=>{Ne(Wi),Hn?.(Ri),Z({type:"onDragOver",event:Ri})})},[he]),wg(()=>{bt.current={activatorEvent:Ye,active:xe,activeNode:kt,collisionRect:j,collisions:Q,droppableRects:Re,draggableNodes:le,draggingNode:Kt,draggingNodeRect:Dt,droppableContainers:ve,over:Me,scrollableAncestors:Si,scrollAdjustedTranslate:H},Ee.current={initial:Dt,translated:j}},[xe,kt,Q,j,le,Kt,Dt,Re,ve,Me,Si,H]),$Se({...Le,delta:ce,draggingRect:j,pointerCoordinates:Tn,scrollableAncestors:Si,scrollableAncestorRects:Un});const Rt=wt.useMemo(()=>({active:xe,activeNode:kt,activeNodeRect:Oe,activatorEvent:Ye,collisions:Q,containerNodeRect:Ze,dragOverlay:Mt,draggableNodes:le,droppableContainers:ve,droppableRects:Re,over:Me,measureDroppableContainers:St,scrollableAncestors:Si,scrollableAncestorRects:Un,measuringConfiguration:Ge,measuringScheduled:ut,windowRect:Nn}),[xe,kt,Oe,Ye,Q,Ze,Mt,le,ve,Re,Me,St,Si,Un,Ge,ut,Nn]),mn=wt.useMemo(()=>({activatorEvent:Ye,activators:b,active:xe,activeNodeRect:Oe,ariaDescribedById:{draggable:Ue},dispatch:V,draggableNodes:le,over:Me,measureDroppableContainers:St}),[Ye,b,xe,Oe,V,Ue,le,Me,St]);return In.createElement(fre.Provider,{value:X},In.createElement(NB.Provider,{value:mn},In.createElement(Sre.Provider,{value:Rt},In.createElement(Ere.Provider,{value:it},d)),In.createElement(yEe,{disabled:a?.restoreFocus===!1})),In.createElement(mSe,{...a,hiddenTextDescribedById:Ue}));function bn(){const Cn=Fe?.autoScrollEnabled===!1,xt=typeof c=="object"?c.enabled===!1:c===!1,Ci=te&&!Cn&&!xt;return typeof c=="object"?{...c,enabled:Ci}:{enabled:Ci}}}),xEe=wt.createContext(null),JW="button",MEe="Draggable";function wEe(n){let{id:e,data:t,disabled:i=!1,attributes:r}=n;const o=TM(MEe),{activators:s,activatorEvent:a,active:c,activeNodeRect:d,ariaDescribedById:m,draggableNodes:v,over:M}=wt.useContext(NB),{role:B=JW,roleDescription:P="draggable",tabIndex:U=0}=r??{},z=c?.id===e,V=wt.useContext(z?Ere:xEe),[Z,X]=o6(),[re,ie]=o6(),te=lEe(s,e),q=O5(t);wg(()=>(v.set(e,{id:e,key:o,node:Z,activatorNode:re,data:q}),()=>{const ce=v.get(e);ce&&ce.key===o&&v.delete(e)}),[v,e]);const le=wt.useMemo(()=>({role:B,tabIndex:U,"aria-disabled":i,"aria-pressed":z&&B===JW?!0:void 0,"aria-roledescription":P,"aria-describedby":m.draggable}),[i,B,U,z,P,m.draggable]);return{active:c,activatorEvent:a,activeNodeRect:d,attributes:le,isDragging:z,listeners:i?void 0:te,node:Z,over:M,setNodeRef:X,setActivatorNodeRef:ie,transform:V}}function SEe(){return wt.useContext(Sre)}const EEe="Droppable",BEe={timeout:25};function OEe(n){let{data:e,disabled:t=!1,id:i,resizeObserverConfig:r}=n;const o=TM(EEe),{active:s,dispatch:a,over:c,measureDroppableContainers:d}=wt.useContext(NB),m=wt.useRef({disabled:t}),v=wt.useRef(!1),M=wt.useRef(null),B=wt.useRef(null),{disabled:P,updateMeasurementsFor:U,timeout:z}={...BEe,...r},V=O5(U??i),Z=wt.useCallback(()=>{if(!v.current){v.current=!0;return}B.current!=null&&clearTimeout(B.current),B.current=setTimeout(()=>{d(Array.isArray(V.current)?V.current:[V.current]),B.current=null},z)},[z]),X=jB({callback:Z,disabled:P||!s}),re=wt.useCallback((le,ce)=>{X&&(ce&&(X.unobserve(ce),v.current=!1),le&&X.observe(le))},[X]),[ie,te]=o6(re),q=O5(e);return wt.useEffect(()=>{!X||!ie.current||(X.disconnect(),v.current=!1,X.observe(ie.current))},[ie,X]),wt.useEffect(()=>(a({type:hc.RegisterDroppable,element:{id:i,key:o,disabled:t,node:ie,rect:M,data:q}}),()=>a({type:hc.UnregisterDroppable,key:o,id:i})),[i]),wt.useEffect(()=>{t!==m.current.disabled&&(a({type:hc.SetDroppableDisabled,id:i,key:o,disabled:t}),m.current.disabled=t)},[i,o,t,a]),{active:s,rect:M,isOver:c?.id===i,node:ie,over:c,setNodeRef:te}}function Bre(n,e,t){const i=n.slice();return i.splice(t<0?i.length+t:t,0,i.splice(e,1)[0]),i}function IEe(n,e){return n.reduce((t,i,r)=>{const o=e.get(i);return o&&(t[r]=o),t},Array(n.length))}function Gw(n){return n!==null&&n>=0}function TEe(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function kEe(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const Ore=n=>{let{rects:e,activeIndex:t,overIndex:i,index:r}=n;const o=Bre(e,i,t),s=e[r],a=o[r];return!a||!s?null:{x:a.left-s.left,y:a.top-s.top,scaleX:a.width/s.width,scaleY:a.height/s.height}},Ww={scaleX:1,scaleY:1},DEe=n=>{var e;let{activeIndex:t,activeNodeRect:i,index:r,rects:o,overIndex:s}=n;const a=(e=o[t])!=null?e:i;if(!a)return null;if(r===t){const d=o[s];return d?{x:0,y:t<s?d.top+d.height-(a.top+a.height):d.top-a.top,...Ww}:null}const c=REe(o,r,t);return r>t&&r<=s?{x:0,y:-a.height-c,...Ww}:r<t&&r>=s?{x:0,y:a.height+c,...Ww}:{x:0,y:0,...Ww}};function REe(n,e,t){const i=n[e],r=n[e-1],o=n[e+1];return i?t<e?r?i.top-(r.top+r.height):o?o.top-(i.top+i.height):0:o?o.top-(i.top+i.height):r?i.top-(r.top+r.height):0:0}const Ire="Sortable",Tre=In.createContext({activeIndex:-1,containerId:Ire,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Ore,disabled:{draggable:!1,droppable:!1}});function PEe(n){let{children:e,id:t,items:i,strategy:r=Ore,disabled:o=!1}=n;const{active:s,dragOverlay:a,droppableRects:c,over:d,measureDroppableContainers:m}=SEe(),v=TM(Ire,t),M=a.rect!==null,B=wt.useMemo(()=>i.map(te=>typeof te=="object"&&"id"in te?te.id:te),[i]),P=s!=null,U=s?B.indexOf(s.id):-1,z=d?B.indexOf(d.id):-1,V=wt.useRef(B),Z=!TEe(B,V.current),X=z!==-1&&U===-1||Z,re=kEe(o);wg(()=>{Z&&P&&m(B)},[Z,B,P,m]),wt.useEffect(()=>{V.current=B},[B]);const ie=wt.useMemo(()=>({activeIndex:U,containerId:v,disabled:re,disableTransforms:X,items:B,overIndex:z,useDragOverlay:M,sortedRects:IEe(B,c),strategy:r}),[U,v,re.draggable,re.droppable,X,B,z,c,M,r]);return In.createElement(Tre.Provider,{value:ie},e)}const LEe=n=>{let{id:e,items:t,activeIndex:i,overIndex:r}=n;return Bre(t,i,r).indexOf(e)},UEe=n=>{let{containerId:e,isSorting:t,wasDragging:i,index:r,items:o,newIndex:s,previousItems:a,previousContainerId:c,transition:d}=n;return!d||!i||a!==o&&r===s?!1:t?!0:s!==r&&e===c},KEe={duration:200,easing:"ease"},kre="transform",FEe=I5.Transition.toString({property:kre,duration:0,easing:"linear"}),zEe={roleDescription:"sortable"};function jEe(n){let{disabled:e,index:t,node:i,rect:r}=n;const[o,s]=wt.useState(null),a=wt.useRef(t);return wg(()=>{if(!e&&t!==a.current&&i.current){const c=r.current;if(c){const d=Q2(i.current,{ignoreTransform:!0}),m={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(m.x||m.y)&&s(m)}}t!==a.current&&(a.current=t)},[e,t,i,r]),wt.useEffect(()=>{o&&s(null)},[o]),o}function NEe(n){let{animateLayoutChanges:e=UEe,attributes:t,disabled:i,data:r,getNewIndex:o=LEe,id:s,strategy:a,resizeObserverConfig:c,transition:d=KEe}=n;const{items:m,containerId:v,activeIndex:M,disabled:B,disableTransforms:P,sortedRects:U,overIndex:z,useDragOverlay:V,strategy:Z}=wt.useContext(Tre),X=GEe(i,B),re=m.indexOf(s),ie=wt.useMemo(()=>({sortable:{containerId:v,index:re,items:m},...r}),[v,r,re,m]),te=wt.useMemo(()=>m.slice(m.indexOf(s)),[m,s]),{rect:q,node:le,isOver:ce,setNodeRef:ve}=OEe({id:s,data:ie,disabled:X.droppable,resizeObserverConfig:{updateMeasurementsFor:te,...c}}),{active:ge,activatorEvent:Ee,activeNodeRect:xe,attributes:Te,setNodeRef:Fe,listeners:Ie,isDragging:Ye,over:At,setActivatorNodeRef:mt,transform:Ue}=wEe({id:s,data:ie,attributes:{...zEe,...t},disabled:X.draggable}),De=iSe(ve,Fe),Ge=!!ge,Re=Ge&&!P&&Gw(M)&&Gw(z),St=!V&&Ye,ut=St&&Re?Ue:null,Ut=Re?ut??(a??Z)({rects:U,activeNodeRect:xe,activeIndex:M,overIndex:z,index:re}):null,Le=Gw(M)&&Gw(z)?o({id:s,items:m,activeIndex:M,overIndex:z}):re,ke=ge?.id,Oe=wt.useRef({activeId:ke,items:m,newIndex:Le,containerId:v}),Ze=m!==Oe.current.items,bt=e({active:ge,containerId:v,isDragging:Ye,isSorting:Ge,id:s,index:re,items:m,newIndex:Oe.current.newIndex,previousItems:Oe.current.items,previousContainerId:Oe.current.containerId,transition:d,wasDragging:Oe.current.activeId!=null}),yt=jEe({disabled:!bt,index:re,node:le,rect:q});return wt.useEffect(()=>{Ge&&Oe.current.newIndex!==Le&&(Oe.current.newIndex=Le),v!==Oe.current.containerId&&(Oe.current.containerId=v),m!==Oe.current.items&&(Oe.current.items=m)},[Ge,Le,v,m]),wt.useEffect(()=>{if(ke===Oe.current.activeId)return;if(ke!=null&&Oe.current.activeId==null){Oe.current.activeId=ke;return}const Kt=setTimeout(()=>{Oe.current.activeId=ke},50);return()=>clearTimeout(Kt)},[ke]),{active:ge,activeIndex:M,attributes:Te,data:ie,rect:q,index:re,newIndex:Le,items:m,isOver:ce,isSorting:Ge,isDragging:Ye,listeners:Ie,node:le,overIndex:z,over:At,setNodeRef:De,setActivatorNodeRef:mt,setDroppableNodeRef:ve,setDraggableNodeRef:Fe,transform:yt??Ut,transition:Mt()};function Mt(){if(yt||Ze&&Oe.current.newIndex===re)return FEe;if(!(St&&!iK(Ee)||!d)&&(Ge||bt))return I5.Transition.toString({...d,property:kre})}}function GEe(n,e){var t,i;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n?.draggable)!=null?t:e.draggable,droppable:(i=n?.droppable)!=null?i:e.droppable}}Ms.Down,Ms.Right,Ms.Up,Ms.Left;function tC(){var n="/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",e="e73e8fb606fcd7318a8222b2e50c576ed3ad8702",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",statementMap:{0:{start:{line:6,column:22},end:{line:10,column:5}},1:{start:{line:11,column:4},end:{line:11,column:154}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:12,column:3}},line:5}},branchMap:{0:{loc:{start:{line:11,column:11},end:{line:11,column:153}},type:"cond-expr",locations:[{start:{line:11,column:52},end:{line:11,column:92}},{start:{line:11,column:111},end:{line:11,column:153}}],line:11}},s:{0:0,1:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx"],names:[],mappings:"AAeoC;AAfpC,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAO7C,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY;AAAA,MAChB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,GAAG,KAAK,MAAM;AAAA,IAChB;AACA,WAAO,KAAK,MAAM,cAAc,oBAAC,iBAAc,OAAO,WAAU,IAAK,oBAAC,mBAAgB,OAAO,WAAW;AAAA,EAC1G;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e73e8fb606fcd7318a8222b2e50c576ed3ad8702"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return tC=function(){return s},s}tC();class WEe extends In.Component{render(){tC().f[0]++;const e=(tC().s[0]++,{width:20,height:20,...this.props.style});return tC().s[1]++,this.props.isCollapsed?(tC().b[0][0]++,oe.jsx(zX,{style:e})):(tC().b[0][1]++,oe.jsx(FX,{style:e}))}}function kx(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",e="b04bfec534013c327fd210571832bbd2813a944a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:32,column:9}},1:{start:{line:11,column:25},end:{line:11,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:33,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:25},end:{line:11,column:72}},line:11}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx"],names:[],mappings:"AAcM,SAIE,KAJF;AAdN,OAAO,WAAW;AAClB,OAAO,eAAe;AAUtB,qBAAqB,uBAAuB,MAAM,UAA+B;AAAA,EAC/E,SAAS;AACP,WAAO,oBAAC,QAAG,WAAU,6BACnB;AAAA,MAAC;AAAA;AAAA,QAAI,WAAU;AAAA,QACb,eAAa,sBAAoB,KAAK,MAAM,aAAa;AAAA,QACzD,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,QAE7D;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,iBAAe,KAAK,MAAM,eAAe;AAAA,cACzC,iBAAe,KAAK,MAAM;AAAA,cAEzB,eAAK,MAAM;AAAA;AAAA,UACd;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ,IAAI,OAAO,GAAG;AAAA,cAC/B,aAAa,KAAK,MAAM;AAAA;AAAA,UAC1B;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b04bfec534013c327fd210571832bbd2813a944a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return kx=function(){return s},s}kx();class QEe extends In.Component{render(){return kx().f[0]++,kx().s[0]++,oe.jsx("li",{className:"maputnik-layer-list-group",children:oe.jsxs("div",{className:"maputnik-layer-list-group-header","data-wd-key":"layer-list-group:"+this.props["data-wd-key"],onClick:e=>(kx().f[1]++,kx().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:[oe.jsx("button",{className:"maputnik-layer-list-group-title","aria-controls":this.props["aria-controls"],"aria-expanded":this.props.isActive,children:this.props.title}),oe.jsx("span",{className:"maputnik-space"}),oe.jsx(WEe,{style:{height:14,width:14},isCollapsed:this.props.isActive})]})})}}function Yi(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",e="65a9cb0d1a08cfab21a14c1632991e31e3063aa8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",statementMap:{0:{start:{line:9,column:23},end:{line:22,column:1}},1:{start:{line:10,column:44},end:{line:10,column:49}},2:{start:{line:11,column:2},end:{line:21,column:7}},3:{start:{line:25,column:4},end:{line:34,column:5}},4:{start:{line:27,column:8},end:{line:27,column:54}},5:{start:{line:29,column:8},end:{line:29,column:53}},6:{start:{line:31,column:8},end:{line:31,column:56}},7:{start:{line:33,column:8},end:{line:33,column:49}},8:{start:{line:37,column:51},end:{line:37,column:61}},9:{start:{line:38,column:25},end:{line:38,column:27}},10:{start:{line:39,column:4},end:{line:44,column:5}},11:{start:{line:40,column:6},end:{line:40,column:76}},12:{start:{line:41,column:6},end:{line:43,column:7}},13:{start:{line:42,column:8},end:{line:42,column:103}},14:{start:{line:45,column:4},end:{line:56,column:6}},15:{start:{line:59,column:22},end:{line:145,column:2}},16:{start:{line:69,column:6},end:{line:69,column:11}},17:{start:{line:77,column:6},end:{line:77,column:40}},18:{start:{line:78,column:16},end:{line:82,column:3}},19:{start:{line:83,column:27},end:{line:83,column:69}},20:{start:{line:84,column:20},end:{line:84,column:23}},21:{start:{line:85,column:2},end:{line:144,column:7}},22:{start:{line:89,column:8},end:{line:89,column:25}},23:{start:{line:90,column:8},end:{line:92,column:9}},24:{start:{line:91,column:10},end:{line:91,column:35}},25:{start:{line:96,column:23},end:{line:96,column:60}},26:{start:{line:120,column:29},end:{line:120,column:61}},27:{start:{line:129,column:29},end:{line:129,column:58}},28:{start:{line:139,column:29},end:{line:139,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:23},end:{line:9,column:24}},loc:{start:{line:9,column:34},end:{line:22,column:1}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:35,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:57,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:59,column:39},end:{line:59,column:40}},loc:{start:{line:59,column:55},end:{line:145,column:1}},line:59},4:{name:"(anonymous_4)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:24},end:{line:64,column:5}},line:63},5:{name:"(anonymous_5)",decl:{start:{line:65,column:21},end:{line:65,column:22}},loc:{start:{line:65,column:27},end:{line:66,column:5}},line:65},6:{name:"(anonymous_6)",decl:{start:{line:67,column:30},end:{line:67,column:31}},loc:{start:{line:67,column:36},end:{line:68,column:5}},line:67},7:{name:"(anonymous_7)",decl:{start:{line:88,column:11},end:{line:88,column:12}},loc:{start:{line:88,column:21},end:{line:93,column:7}},line:88},8:{name:"(anonymous_8)",decl:{start:{line:96,column:15},end:{line:96,column:16}},loc:{start:{line:96,column:23},end:{line:96,column:60}},line:96},9:{name:"(anonymous_9)",decl:{start:{line:120,column:21},end:{line:120,column:22}},loc:{start:{line:120,column:29},end:{line:120,column:61}},line:120},10:{name:"(anonymous_10)",decl:{start:{line:129,column:21},end:{line:129,column:22}},loc:{start:{line:129,column:29},end:{line:129,column:58}},line:129},11:{name:"(anonymous_11)",decl:{start:{line:139,column:21},end:{line:139,column:22}},loc:{start:{line:139,column:29},end:{line:139,column:70}},line:139}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:34,column:5}},type:"switch",locations:[{start:{line:26,column:6},end:{line:27,column:54}},{start:{line:28,column:6},end:{line:29,column:53}},{start:{line:30,column:6},end:{line:31,column:56}},{start:{line:32,column:6},end:{line:33,column:49}}],line:25},1:{loc:{start:{line:39,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:44,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:41,column:6},end:{line:43,column:7}},type:"if",locations:[{start:{line:41,column:6},end:{line:43,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:61,column:4},end:{line:61,column:22}},type:"default-arg",locations:[{start:{line:61,column:17},end:{line:61,column:22}}],line:61},4:{loc:{start:{line:62,column:4},end:{line:62,column:26}},type:"default-arg",locations:[{start:{line:62,column:17},end:{line:62,column:26}}],line:62},5:{loc:{start:{line:63,column:4},end:{line:64,column:5}},type:"default-arg",locations:[{start:{line:63,column:18},end:{line:64,column:5}}],line:63},6:{loc:{start:{line:65,column:4},end:{line:66,column:5}},type:"default-arg",locations:[{start:{line:65,column:21},end:{line:66,column:5}}],line:65},7:{loc:{start:{line:67,column:4},end:{line:68,column:5}},type:"default-arg",locations:[{start:{line:67,column:30},end:{line:68,column:5}}],line:67},8:{loc:{start:{line:81,column:13},end:{line:81,column:33}},type:"cond-expr",locations:[{start:{line:81,column:26},end:{line:81,column:29}},{start:{line:81,column:32},end:{line:81,column:33}}],line:81},9:{loc:{start:{line:83,column:27},end:{line:83,column:69}},type:"cond-expr",locations:[{start:{line:83,column:54},end:{line:83,column:60}},{start:{line:83,column:63},end:{line:83,column:69}}],line:83},10:{loc:{start:{line:90,column:8},end:{line:92,column:9}},type:"if",locations:[{start:{line:90,column:8},end:{line:92,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0,0,0],1:[0,0],2:[0,0],3:[0],4:[0],5:[0],6:[0],7:[0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx"],names:[],mappings:"AAmBS,SACL,KADK;AAnBT,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,eAAe,cAAc,iBAAiB,gBAAe;AACrE,SAAS,mBAAmB;AAC5B,SAAQ,mBAAkB;AAC1B,SAAQ,WAAU;AAElB,OAAO,eAAe;AAUtB,MAAM,iBAAgD,CAAC,UAAU;AAC/D,QAAM,EAAC,gBAAgB,cAAa,IAAI;AACxC,SAAO,qBAAC,SAAI,WAAU,mCAAmC,GAAG,gBAAiB,GAAG,eAC9E;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,MAAM,MAAM;AAAA,QACZ,OAAO,EAAE,OAAO,OAAO,QAAQ,OAAO,eAAe,SAAS;AAAA;AAAA,IAChE;AAAA,IACA,oBAAC,YAAO,WAAU,+BACf,gBAAM,SACT;AAAA,KACF;AACF;AAUA,MAAM,mBAAmB,MAAM,UAA2B;AAAA,EACxD,aAAa;AACX,YAAO,KAAK,MAAM,QAAQ;AAAA,MACxB,KAAK;AAAa,eAAO,oBAAC,iBAAc;AAAA,MACxC,KAAK;AAAQ,eAAO,oBAAC,gBAAa;AAAA,MAClC,KAAK;AAAQ,eAAO,oBAAC,mBAAgB;AAAA,MACrC,KAAK;AAAU,eAAO,oBAAC,YAAS;AAAA,IAClC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,gBAAgB,mBAAkB,IAAI,KAAK;AAElD,QAAI,iBAAiB;AACrB,QAAI,gBAAgB;AAClB,uBAAiB,oCAAoC,cAAc;AAEnE,UAAI,oBAAoB;AACtB,0BAAkB,qCAAqC,cAAc,KAAK,kBAAkB;AAAA,MAC9F;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,UAAU;AAAA,QACV,OAAO,KAAK,MAAM;AAAA,QAClB,WAAW,mCAAmC,cAAc;AAAA,QAC5D,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QACpB,eAAY;AAAA,QAEX,eAAK,WAAW;AAAA;AAAA,IACnB;AAAA,EACF;AACF;AAgBA,MAAM,gBAAgB,MAAM,WAA8C,CAAC,OAAO,QAAQ;AACxF,QAAM;AAAA,IACJ,aAAa;AAAA,IACb,aAAa;AAAA,IACb,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,0BAA0B,MAAM;AAAA,IAAC;AAAA,EACnC,IAAI;AAEJ,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY,EAAC,IAAI,MAAM,QAAO,CAAC;AAEnC,QAAM,QAAQ;AAAA,IACZ,WAAW,IAAI,UAAU,SAAS,SAAS;AAAA,IAC3C;AAAA,IACA,SAAS,aAAa,MAAM;AAAA,EAC9B;AAEA,QAAM,mBAAmB,eAAe,YAAY,SAAS;AAG7D,QAAM,YAAY;AAElB,SAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C;AAAA,IAAC;AAAA;AAAA,MACC,KAAK,CAAC,SAAS;AACb,mBAAW,IAAI;AACf,YAAI,WAAW;AACb,oBAAU,UAAU;AAAA,QACtB;AAAA,MACF;AAAA,MACA;AAAA,MACA,IAAI,MAAM;AAAA,MACV,SAAS,QAAM,MAAM,cAAc,MAAM,UAAU;AAAA,MACnD,eAAa,qBAAqB,MAAM;AAAA,MACxC,WAAW,WAAW;AAAA,QACpB,4BAA4B;AAAA,QAC5B,qCAAqC;AAAA,QACrC,CAAC,MAAM,SAAU,GAAG;AAAA,MACtB,CAAC;AAAA,MACD;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,MAAM;AAAA,YACf,WAAW,MAAM;AAAA,YACjB,gBAAgB;AAAA,YAChB,eAAe;AAAA;AAAA,QACjB;AAAA,QACA,oBAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAG;AAAA,QAC5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAqB,MAAM,UAAQ;AAAA,YAC1C,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,SAAS,QAAM,eAAgB,MAAM,UAAU;AAAA;AAAA,QACjD;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAqB,MAAM,UAAQ;AAAA,YAC1C,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,SAAS,QAAM,YAAa,MAAM,UAAU;AAAA;AAAA,QAC9C;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAmB,MAAM,UAAQ;AAAA,YACxC,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,oBAAoB;AAAA,YACpB,SAAS,QAAM,wBAAyB,MAAM,UAAU;AAAA;AAAA,QAC1D;AAAA;AAAA;AAAA,EACF,GACF;AACF,CAAC;AAED,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"65a9cb0d1a08cfab21a14c1632991e31e3063aa8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Yi=function(){return s},s}Yi();Yi().s[0]++;const qEe=n=>{Yi().f[0]++;const{dragAttributes:e,dragListeners:t}=(Yi().s[1]++,n);return Yi().s[2]++,oe.jsxs("div",{className:"maputnik-layer-list-item-handle",...e,...t,children:[oe.jsx(jX,{className:"layer-handle__icon",type:n.layerType,style:{width:"1em",height:"1em",verticalAlign:"middle"}}),oe.jsx("button",{className:"maputnik-layer-list-item-id",children:n.layerId})]})};class SI extends In.Component{renderIcon(){switch(Yi().f[1]++,Yi().s[3]++,this.props.action){case"duplicate":return Yi().b[0][0]++,Yi().s[4]++,oe.jsx(xfe,{});case"show":return Yi().b[0][1]++,Yi().s[5]++,oe.jsx(_fe,{});case"hide":return Yi().b[0][2]++,Yi().s[6]++,oe.jsx(Cfe,{});case"delete":return Yi().b[0][3]++,Yi().s[7]++,oe.jsx(jC,{})}}render(){Yi().f[2]++;const{classBlockName:e,classBlockModifier:t}=(Yi().s[8]++,this.props);let i=(Yi().s[9]++,"");return Yi().s[10]++,e?(Yi().b[1][0]++,Yi().s[11]++,i=`maputnik-layer-list-icon-action__${e}`,Yi().s[12]++,t?(Yi().b[2][0]++,Yi().s[13]++,i+=` maputnik-layer-list-icon-action__${e}--${t}`):Yi().b[2][1]++):Yi().b[1][1]++,Yi().s[14]++,oe.jsx("button",{tabIndex:-1,title:this.props.action,className:`maputnik-layer-list-icon-action ${i}`,"data-wd-key":this.props.wdKey,onClick:this.props.onClick,"aria-hidden":"true",children:this.renderIcon()})}}const YEe=(Yi().s[15]++,In.forwardRef((n,e)=>{Yi().f[3]++;const{isSelected:t=(Yi().b[3][0]++,!1),visibility:i=(Yi().b[4][0]++,"visible"),onLayerCopy:r=(Yi().b[5][0]++,()=>{Yi().f[4]++}),onLayerDestroy:o=(Yi().b[6][0]++,()=>{Yi().f[5]++}),onLayerVisibilityToggle:s=(Yi().b[7][0]++,()=>{Yi().f[6]++})}=(Yi().s[16]++,n),{attributes:a,listeners:c,setNodeRef:d,transform:m,transition:v,isDragging:M}=(Yi().s[17]++,NEe({id:n.layerId})),B=(Yi().s[18]++,{transform:I5.Transform.toString(m),transition:v,opacity:M?(Yi().b[8][0]++,.5):(Yi().b[8][1]++,1)}),P=(Yi().s[19]++,i==="visible"?(Yi().b[9][0]++,"show"):(Yi().b[9][1]++,"hide")),U=(Yi().s[20]++,e);return Yi().s[21]++,oe.jsx(o2.Provider,{value:{size:"14px"},children:oe.jsxs("li",{ref:z=>{Yi().f[7]++,Yi().s[22]++,d(z),Yi().s[23]++,U?(Yi().b[10][0]++,Yi().s[24]++,U.current=z):Yi().b[10][1]++},style:B,id:n.id,onClick:z=>(Yi().f[8]++,Yi().s[25]++,n.onLayerSelect(n.layerIndex)),"data-wd-key":"layer-list-item:"+n.layerId,className:Ig({"maputnik-layer-list-item":!0,"maputnik-layer-list-item-selected":t,[n.className]:!0}),children:[oe.jsx(qEe,{layerId:n.layerId,layerType:n.layerType,dragAttributes:a,dragListeners:c}),oe.jsx("span",{style:{flexGrow:1}}),oe.jsx(SI,{wdKey:"layer-list-item:"+n.layerId+":delete",action:"delete",classBlockName:"delete",onClick:z=>(Yi().f[9]++,Yi().s[26]++,o(n.layerIndex))}),oe.jsx(SI,{wdKey:"layer-list-item:"+n.layerId+":copy",action:"duplicate",classBlockName:"duplicate",onClick:z=>(Yi().f[10]++,Yi().s[27]++,r(n.layerIndex))}),oe.jsx(SI,{wdKey:"layer-list-item:"+n.layerId+":toggle-visibility",action:P,classBlockName:"visibility",classBlockModifier:P,onClick:z=>(Yi().f[11]++,Yi().s[28]++,s(n.layerIndex))})]})})}));function u6(){var n="/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",e="522bfc6b8aacbfd03b55d947af2897dc69beb570",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:20,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:21,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx"],names:[],mappings:"AAkBW;AAlBX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAevB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QACf,OAAO,KAAK,MAAM;AAAA,QAClB,MAAM,KAAK,MAAM;AAAA,QACjB,SAAS,KAAK,MAAM;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,cAAY,KAAK,MAAM,YAAY;AAAA,QACnC,WAAW,WAAW,mBAAmB,KAAK,MAAM,SAAS;AAAA,QAC7D,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAEjB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"522bfc6b8aacbfd03b55d947af2897dc69beb570"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return u6=function(){return s},s}u6();class Ks extends In.Component{render(){return u6().f[0]++,u6().s[0]++,oe.jsx("button",{id:this.props.id,title:this.props.title,type:this.props.type,onClick:this.props.onClick,disabled:this.props.disabled,"aria-label":this.props["aria-label"],className:Ig("maputnik-button",this.props.className),"data-wd-key":this.props["data-wd-key"],style:this.props.style,children:this.props.children})}}var EI={exports:{}},BI,eQ;function VEe(){if(eQ)return BI;eQ=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return BI=n,BI}var OI,tQ;function $Ee(){if(tQ)return OI;tQ=1;var n=VEe();function e(){}function t(){}return t.resetWarningCache=e,OI=function(){function i(s,a,c,d,m,v){if(v!==n){var M=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw M.name="Invariant Violation",M}}i.isRequired=i;function r(){return i}var o={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},OI}var nQ;function Y1(){return nQ||(nQ=1,EI.exports=$Ee()()),EI.exports}var Dre=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],c6=Dre.join(","),Rre=typeof Element>"u",FC=Rre?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,A6=!Rre&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n?.ownerDocument},k5=function(e,t){var i;t===void 0&&(t=!0);var r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"inert"),o=r===""||r==="true",s=o||t&&e&&k5(e.parentNode);return s},HEe=function(e){var t,i=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return i===""||i==="true"},Pre=function(e,t,i){if(k5(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(c6));return t&&FC.call(e,c6)&&r.unshift(e),r=r.filter(i),r},h6=function(e,t,i){for(var r=[],o=Array.from(e);o.length;){var s=o.shift();if(!k5(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),c=a.length?a:s.children,d=h6(c,!0,i);i.flatten?r.push.apply(r,d):r.push({scopeParent:s,candidates:d})}else{var m=FC.call(s,c6);m&&i.filter(s)&&(t||!e.includes(s))&&r.push(s);var v=s.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(s),M=!k5(v,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(s));if(v&&M){var B=h6(v===!0?s.children:v.children,!0,i);i.flatten?r.push.apply(r,B):r.push({scopeParent:s,candidates:B})}else o.unshift.apply(o,s.children)}}return r},Lre=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},lv=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||HEe(e))&&!Lre(e)?0:e.tabIndex},ZEe=function(e,t){var i=lv(e);return i<0&&t&&!Lre(e)?0:i},XEe=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},Ure=function(e){return e.tagName==="INPUT"},JEe=function(e){return Ure(e)&&e.type==="hidden"},e6e=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return t},t6e=function(e,t){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===t)return e[i]},n6e=function(e){if(!e.name)return!0;var t=e.form||A6(e),i=function(a){return t.querySelectorAll('input[type="radio"][name="'+a+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=i(window.CSS.escape(e.name));else try{r=i(e.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var o=t6e(r,e.form);return!o||o===e},i6e=function(e){return Ure(e)&&e.type==="radio"},r6e=function(e){return i6e(e)&&!n6e(e)},o6e=function(e){var t,i=e&&A6(e),r=(t=i)===null||t===void 0?void 0:t.host,o=!1;if(i&&i!==e){var s,a,c;for(o=!!((s=r)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(r)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!o&&r;){var d,m,v;i=A6(r),r=(d=i)===null||d===void 0?void 0:d.host,o=!!((m=r)!==null&&m!==void 0&&(v=m.ownerDocument)!==null&&v!==void 0&&v.contains(r))}}return o},iQ=function(e){var t=e.getBoundingClientRect(),i=t.width,r=t.height;return i===0&&r===0},s6e=function(e,t){var i=t.displayCheck,r=t.getShadowRoot;if(i==="full-native"&&"checkVisibility"in e){var o=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!o}if(getComputedStyle(e).visibility==="hidden")return!0;var s=FC.call(e,"details>summary:first-of-type"),a=s?e.parentElement:e;if(FC.call(a,"details:not([open]) *"))return!0;if(!i||i==="full"||i==="full-native"||i==="legacy-full"){if(typeof r=="function"){for(var c=e;e;){var d=e.parentElement,m=A6(e);if(d&&!d.shadowRoot&&r(d)===!0)return iQ(e);e.assignedSlot?e=e.assignedSlot:!d&&m!==e.ownerDocument?e=m.host:e=d}e=c}if(o6e(e))return!e.getClientRects().length;if(i!=="legacy-full")return!0}else if(i==="non-zero-area")return iQ(e);return!1},a6e=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var i=0;i<t.children.length;i++){var r=t.children.item(i);if(r.tagName==="LEGEND")return FC.call(t,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}t=t.parentElement}return!1},d6=function(e,t){return!(t.disabled||k5(t)||JEe(t)||s6e(t,e)||e6e(t)||a6e(t))},HR=function(e,t){return!(r6e(t)||lv(t)<0||!d6(e,t))},l6e=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},Kre=function(e){var t=[],i=[];return e.forEach(function(r,o){var s=!!r.scopeParent,a=s?r.scopeParent:r,c=ZEe(a,s),d=s?Kre(r.candidates):a;c===0?s?t.push.apply(t,d):t.push(a):i.push({documentOrder:o,tabIndex:c,item:r,isScope:s,content:d})}),i.sort(XEe).reduce(function(r,o){return o.isScope?r.push.apply(r,o.content):r.push(o.content),r},[]).concat(t)},Fre=function(e,t){t=t||{};var i;return t.getShadowRoot?i=h6([e],t.includeContainer,{filter:HR.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:l6e}):i=Pre(e,t.includeContainer,HR.bind(null,t)),Kre(i)},zre=function(e,t){t=t||{};var i;return t.getShadowRoot?i=h6([e],t.includeContainer,{filter:d6.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):i=Pre(e,t.includeContainer,d6.bind(null,t)),i},Hb=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return FC.call(e,c6)===!1?!1:HR(t,e)},u6e=Dre.concat("iframe").join(","),PS=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return FC.call(e,u6e)===!1?!1:d6(t,e)};const c6e=Object.freeze(Object.defineProperty({__proto__:null,focusable:zre,getTabIndex:lv,isFocusable:PS,isTabbable:Hb,tabbable:Fre},Symbol.toStringTag,{value:"Module"}));function ZR(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function A6e(n){if(Array.isArray(n))return ZR(n)}function h6e(n,e,t){return(e=g6e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function d6e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function f6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rQ(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function oQ(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rQ(Object(t),!0).forEach(function(i){h6e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):rQ(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function p6e(n){return A6e(n)||d6e(n)||y6e(n)||f6e()}function m6e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function g6e(n){var e=m6e(n,"string");return typeof e=="symbol"?e:e+""}function y6e(n,e){if(n){if(typeof n=="string")return ZR(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ZR(n,e):void 0}}var sQ={activateTrap:function(e,t){if(e.length>0){var i=e[e.length-1];i!==t&&i._setPausedState(!0)}var r=e.indexOf(t);r===-1||e.splice(r,1),e.push(t)},deactivateTrap:function(e,t){var i=e.indexOf(t);i!==-1&&e.splice(i,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},v6e=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},b6e=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},I4=function(e){return e?.key==="Tab"||e?.keyCode===9},C6e=function(e){return I4(e)&&!e.shiftKey},_6e=function(e){return I4(e)&&e.shiftKey},aQ=function(e){return setTimeout(e,0)},I3=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,i):e},Qw=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},x6e=[],M6e=function(e,t){var i=t?.document||document,r=t?.trapStack||x6e,o=oQ({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:C6e,isKeyBackward:_6e},t),s={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,c=function(xe,Te,Fe){return xe&&xe[Te]!==void 0?xe[Te]:o[Fe||Te]},d=function(xe,Te){var Fe=typeof Te?.composedPath=="function"?Te.composedPath():void 0;return s.containerGroups.findIndex(function(Ie){var Ye=Ie.container,At=Ie.tabbableNodes;return Ye.contains(xe)||Fe?.includes(Ye)||At.find(function(mt){return mt===xe})})},m=function(xe){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Fe=Te.hasFallback,Ie=Fe===void 0?!1:Fe,Ye=Te.params,At=Ye===void 0?[]:Ye,mt=o[xe];if(typeof mt=="function"&&(mt=mt.apply(void 0,p6e(At))),mt===!0&&(mt=void 0),!mt){if(mt===void 0||mt===!1)return mt;throw new Error("`".concat(xe,"` was specified but was not a node, or did not return a node"))}var Ue=mt;if(typeof mt=="string"){try{Ue=i.querySelector(mt)}catch(De){throw new Error("`".concat(xe,'` appears to be an invalid selector; error="').concat(De.message,'"'))}if(!Ue&&!Ie)throw new Error("`".concat(xe,"` as selector refers to no known node"))}return Ue},v=function(){var xe=m("initialFocus",{hasFallback:!0});if(xe===!1)return!1;if(xe===void 0||xe&&!PS(xe,o.tabbableOptions))if(d(i.activeElement)>=0)xe=i.activeElement;else{var Te=s.tabbableGroups[0],Fe=Te&&Te.firstTabbableNode;xe=Fe||m("fallbackFocus")}else xe===null&&(xe=m("fallbackFocus"));if(!xe)throw new Error("Your focus-trap needs to have at least one focusable element");return xe},M=function(){if(s.containerGroups=s.containers.map(function(xe){var Te=Fre(xe,o.tabbableOptions),Fe=zre(xe,o.tabbableOptions),Ie=Te.length>0?Te[0]:void 0,Ye=Te.length>0?Te[Te.length-1]:void 0,At=Fe.find(function(De){return Hb(De)}),mt=Fe.slice().reverse().find(function(De){return Hb(De)}),Ue=!!Te.find(function(De){return lv(De)>0});return{container:xe,tabbableNodes:Te,focusableNodes:Fe,posTabIndexesFound:Ue,firstTabbableNode:Ie,lastTabbableNode:Ye,firstDomTabbableNode:At,lastDomTabbableNode:mt,nextTabbableNode:function(Ge){var Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,St=Te.indexOf(Ge);return St<0?Re?Fe.slice(Fe.indexOf(Ge)+1).find(function(ut){return Hb(ut)}):Fe.slice(0,Fe.indexOf(Ge)).reverse().find(function(ut){return Hb(ut)}):Te[St+(Re?1:-1)]}}}),s.tabbableGroups=s.containerGroups.filter(function(xe){return xe.tabbableNodes.length>0}),s.tabbableGroups.length<=0&&!m("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(s.containerGroups.find(function(xe){return xe.posTabIndexesFound})&&s.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},B=function(xe){var Te=xe.activeElement;if(Te)return Te.shadowRoot&&Te.shadowRoot.activeElement!==null?B(Te.shadowRoot):Te},P=function(xe){if(xe!==!1&&xe!==B(document)){if(!xe||!xe.focus){P(v());return}xe.focus({preventScroll:!!o.preventScroll}),s.mostRecentlyFocusedNode=xe,v6e(xe)&&xe.select()}},U=function(xe){var Te=m("setReturnFocus",{params:[xe]});return Te||(Te===!1?!1:xe)},z=function(xe){var Te=xe.target,Fe=xe.event,Ie=xe.isBackward,Ye=Ie===void 0?!1:Ie;Te=Te||Qw(Fe),M();var At=null;if(s.tabbableGroups.length>0){var mt=d(Te,Fe),Ue=mt>=0?s.containerGroups[mt]:void 0;if(mt<0)Ye?At=s.tabbableGroups[s.tabbableGroups.length-1].lastTabbableNode:At=s.tabbableGroups[0].firstTabbableNode;else if(Ye){var De=s.tabbableGroups.findIndex(function(Ut){var Le=Ut.firstTabbableNode;return Te===Le});if(De<0&&(Ue.container===Te||PS(Te,o.tabbableOptions)&&!Hb(Te,o.tabbableOptions)&&!Ue.nextTabbableNode(Te,!1))&&(De=mt),De>=0){var Ge=De===0?s.tabbableGroups.length-1:De-1,Re=s.tabbableGroups[Ge];At=lv(Te)>=0?Re.lastTabbableNode:Re.lastDomTabbableNode}else I4(Fe)||(At=Ue.nextTabbableNode(Te,!1))}else{var St=s.tabbableGroups.findIndex(function(Ut){var Le=Ut.lastTabbableNode;return Te===Le});if(St<0&&(Ue.container===Te||PS(Te,o.tabbableOptions)&&!Hb(Te,o.tabbableOptions)&&!Ue.nextTabbableNode(Te))&&(St=mt),St>=0){var ut=St===s.tabbableGroups.length-1?0:St+1,kt=s.tabbableGroups[ut];At=lv(Te)>=0?kt.firstTabbableNode:kt.firstDomTabbableNode}else I4(Fe)||(At=Ue.nextTabbableNode(Te))}}else At=m("fallbackFocus");return At},V=function(xe){var Te=Qw(xe);if(!(d(Te,xe)>=0)){if(I3(o.clickOutsideDeactivates,xe)){a.deactivate({returnFocus:o.returnFocusOnDeactivate});return}I3(o.allowOutsideClick,xe)||xe.preventDefault()}},Z=function(xe){var Te=Qw(xe),Fe=d(Te,xe)>=0;if(Fe||Te instanceof Document)Fe&&(s.mostRecentlyFocusedNode=Te);else{xe.stopImmediatePropagation();var Ie,Ye=!0;if(s.mostRecentlyFocusedNode)if(lv(s.mostRecentlyFocusedNode)>0){var At=d(s.mostRecentlyFocusedNode),mt=s.containerGroups[At].tabbableNodes;if(mt.length>0){var Ue=mt.findIndex(function(De){return De===s.mostRecentlyFocusedNode});Ue>=0&&(o.isKeyForward(s.recentNavEvent)?Ue+1<mt.length&&(Ie=mt[Ue+1],Ye=!1):Ue-1>=0&&(Ie=mt[Ue-1],Ye=!1))}}else s.containerGroups.some(function(De){return De.tabbableNodes.some(function(Ge){return lv(Ge)>0})})||(Ye=!1);else Ye=!1;Ye&&(Ie=z({target:s.mostRecentlyFocusedNode,isBackward:o.isKeyBackward(s.recentNavEvent)})),P(Ie||s.mostRecentlyFocusedNode||v())}s.recentNavEvent=void 0},X=function(xe){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;s.recentNavEvent=xe;var Fe=z({event:xe,isBackward:Te});Fe&&(I4(xe)&&xe.preventDefault(),P(Fe))},re=function(xe){(o.isKeyForward(xe)||o.isKeyBackward(xe))&&X(xe,o.isKeyBackward(xe))},ie=function(xe){b6e(xe)&&I3(o.escapeDeactivates,xe)!==!1&&(xe.preventDefault(),a.deactivate())},te=function(xe){var Te=Qw(xe);d(Te,xe)>=0||I3(o.clickOutsideDeactivates,xe)||I3(o.allowOutsideClick,xe)||(xe.preventDefault(),xe.stopImmediatePropagation())},q=function(){if(s.active)return sQ.activateTrap(r,a),s.delayInitialFocusTimer=o.delayInitialFocus?aQ(function(){P(v())}):P(v()),i.addEventListener("focusin",Z,!0),i.addEventListener("mousedown",V,{capture:!0,passive:!1}),i.addEventListener("touchstart",V,{capture:!0,passive:!1}),i.addEventListener("click",te,{capture:!0,passive:!1}),i.addEventListener("keydown",re,{capture:!0,passive:!1}),i.addEventListener("keydown",ie),a},le=function(){if(s.active)return i.removeEventListener("focusin",Z,!0),i.removeEventListener("mousedown",V,!0),i.removeEventListener("touchstart",V,!0),i.removeEventListener("click",te,!0),i.removeEventListener("keydown",re,!0),i.removeEventListener("keydown",ie),a},ce=function(xe){var Te=xe.some(function(Fe){var Ie=Array.from(Fe.removedNodes);return Ie.some(function(Ye){return Ye===s.mostRecentlyFocusedNode})});Te&&P(v())},ve=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(ce):void 0,ge=function(){ve&&(ve.disconnect(),s.active&&!s.paused&&s.containers.map(function(xe){ve.observe(xe,{subtree:!0,childList:!0})}))};return a={get active(){return s.active},get paused(){return s.paused},activate:function(xe){if(s.active)return this;var Te=c(xe,"onActivate"),Fe=c(xe,"onPostActivate"),Ie=c(xe,"checkCanFocusTrap");Ie||M(),s.active=!0,s.paused=!1,s.nodeFocusedBeforeActivation=B(i),Te?.();var Ye=function(){Ie&&M(),q(),ge(),Fe?.()};return Ie?(Ie(s.containers.concat()).then(Ye,Ye),this):(Ye(),this)},deactivate:function(xe){if(!s.active)return this;var Te=oQ({onDeactivate:o.onDeactivate,onPostDeactivate:o.onPostDeactivate,checkCanReturnFocus:o.checkCanReturnFocus},xe);clearTimeout(s.delayInitialFocusTimer),s.delayInitialFocusTimer=void 0,le(),s.active=!1,s.paused=!1,ge(),sQ.deactivateTrap(r,a);var Fe=c(Te,"onDeactivate"),Ie=c(Te,"onPostDeactivate"),Ye=c(Te,"checkCanReturnFocus"),At=c(Te,"returnFocus","returnFocusOnDeactivate");Fe?.();var mt=function(){aQ(function(){At&&P(U(s.nodeFocusedBeforeActivation)),Ie?.()})};return At&&Ye?(Ye(U(s.nodeFocusedBeforeActivation)).then(mt,mt),this):(mt(),this)},pause:function(xe){return s.active?(s.manuallyPaused=!0,this._setPausedState(!0,xe)):this},unpause:function(xe){return s.active?(s.manuallyPaused=!1,r[r.length-1]!==this?this:this._setPausedState(!1,xe)):this},updateContainerElements:function(xe){var Te=[].concat(xe).filter(Boolean);return s.containers=Te.map(function(Fe){return typeof Fe=="string"?i.querySelector(Fe):Fe}),s.active&&M(),ge(),this}},Object.defineProperties(a,{_isManuallyPaused:{value:function(){return s.manuallyPaused}},_setPausedState:{value:function(xe,Te){if(s.paused===xe)return this;if(s.paused=xe,xe){var Fe=c(Te,"onPause"),Ie=c(Te,"onPostPause");Fe?.(),le(),ge(),Ie?.()}else{var Ye=c(Te,"onUnpause"),At=c(Te,"onPostUnpause");Ye?.(),M(),q(),ge(),At?.()}return this}}}),a.updateContainerElements(e),a};const w6e=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:M6e},Symbol.toStringTag,{value:"Module"})),S6e=GH(w6e),E6e=GH(c6e);var II,lQ;function B6e(){if(lQ)return II;lQ=1;function n(te){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},n(te)}function e(te,q){if(!(te instanceof q))throw new TypeError("Cannot call a class as a function")}function t(te,q){for(var le=0;le<q.length;le++){var ce=q[le];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(te,M(ce.key),ce)}}function i(te,q,le){return q&&t(te.prototype,q),Object.defineProperty(te,"prototype",{writable:!1}),te}function r(te,q,le){return q=c(q),o(te,a()?Reflect.construct(q,le||[],c(te).constructor):q.apply(te,le))}function o(te,q){if(q&&(n(q)=="object"||typeof q=="function"))return q;if(q!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s(te)}function s(te){if(te===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te}function a(){try{var te=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a=function(){return!!te})()}function c(te){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(q){return q.__proto__||Object.getPrototypeOf(q)},c(te)}function d(te,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");te.prototype=Object.create(q&&q.prototype,{constructor:{value:te,writable:!0,configurable:!0}}),Object.defineProperty(te,"prototype",{writable:!1}),q&&m(te,q)}function m(te,q){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(le,ce){return le.__proto__=ce,le},m(te,q)}function v(te,q,le){return(q=M(q))in te?Object.defineProperty(te,q,{value:le,enumerable:!0,configurable:!0,writable:!0}):te[q]=le,te}function M(te){var q=B(te,"string");return n(q)=="symbol"?q:q+""}function B(te,q){if(n(te)!="object"||!te)return te;var le=te[Symbol.toPrimitive];if(le!==void 0){var ce=le.call(te,q);if(n(ce)!="object")return ce;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(te)}var P=_a(),U=Y1(),z=S6e,V=z.createFocusTrap,Z=E6e,X=Z.isFocusable,re=(function(te){function q(le){var ce;e(this,q),ce=r(this,q,[le]),v(ce,"getNodeForOption",function(Ee){var xe,Te=(xe=this.internalOptions[Ee])!==null&&xe!==void 0?xe:this.originalOptions[Ee];if(typeof Te=="function"){for(var Fe=arguments.length,Ie=new Array(Fe>1?Fe-1:0),Ye=1;Ye<Fe;Ye++)Ie[Ye-1]=arguments[Ye];Te=Te.apply(void 0,Ie)}if(Te===!0&&(Te=void 0),!Te){if(Te===void 0||Te===!1)return Te;throw new Error("`".concat(Ee,"` was specified but was not a node, or did not return a node"))}var At=Te;if(typeof Te=="string"){var mt;if(At=(mt=this.getDocument())===null||mt===void 0?void 0:mt.querySelector(Te),!At)throw new Error("`".concat(Ee,"` as selector refers to no known node"))}return At}),ce.handleDeactivate=ce.handleDeactivate.bind(ce),ce.handlePostDeactivate=ce.handlePostDeactivate.bind(ce),ce.handleClickOutsideDeactivates=ce.handleClickOutsideDeactivates.bind(ce),ce.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:ce.handleDeactivate,onPostDeactivate:ce.handlePostDeactivate,clickOutsideDeactivates:ce.handleClickOutsideDeactivates},ce.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var ve=le.focusTrapOptions;for(var ge in ve)if(Object.prototype.hasOwnProperty.call(ve,ge)){if(ge==="returnFocusOnDeactivate"||ge==="onDeactivate"||ge==="onPostDeactivate"||ge==="checkCanReturnFocus"||ge==="clickOutsideDeactivates"){ce.originalOptions[ge]=ve[ge];continue}ce.internalOptions[ge]=ve[ge]}return ce.outsideClick=null,ce.focusTrapElements=le.containerElements||[],ce.updatePreviousElement(),ce}return d(q,te),i(q,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var ce=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return ce||(ce===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var ce=this.getDocument();ce&&(this.previouslyFocusedElement=ce.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(ce){var ve=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,ce):this.originalOptions.clickOutsideDeactivates;return ve&&(this.outsideClick={target:ce.target,allowDeactivation:ve}),ve}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var ce=this,ve=function(){var Ee=ce.getReturnFocusNode(),xe=!!(ce.originalOptions.returnFocusOnDeactivate&&Ee!==null&&Ee!==void 0&&Ee.focus&&(!ce.outsideClick||ce.outsideClick.allowDeactivation&&!X(ce.outsideClick.target,ce.internalOptions.tabbableOptions))),Te=ce.internalOptions.preventScroll,Fe=Te===void 0?!1:Te;xe&&Ee.focus({preventScroll:Fe}),ce.originalOptions.onPostDeactivate&&ce.originalOptions.onPostDeactivate.call(null),ce.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(ve,ve):ve()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var ce=this.focusTrapElements.some(Boolean);ce&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(ce){if(this.focusTrap){ce.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var ve=!ce.active&&this.props.active,ge=ce.active&&!this.props.active,Ee=!ce.paused&&this.props.paused,xe=ce.paused&&!this.props.paused;if(ve&&(this.updatePreviousElement(),this.focusTrap.activate()),ge){this.deactivateTrap();return}Ee&&this.focusTrap.pause(),xe&&this.focusTrap.unpause()}else ce.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var ce=this,ve=this.props.children?P.Children.only(this.props.children):void 0;if(ve){if(ve.type&&ve.type===P.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var ge=function(Te){var Fe=ce.props.containerElements;ve&&(typeof ve.ref=="function"?ve.ref(Te):ve.ref&&(ve.ref.current=Te)),ce.focusTrapElements=Fe||[Te]},Ee=P.cloneElement(ve,{ref:ge});return Ee}return null}}])})(P.Component),ie=typeof Element>"u"?Function:Element;return re.propTypes={active:U.bool,paused:U.bool,focusTrapOptions:U.shape({document:U.object,onActivate:U.func,onPostActivate:U.func,checkCanFocusTrap:U.func,onPause:U.func,onPostPause:U.func,onUnpause:U.func,onPostUnpause:U.func,onDeactivate:U.func,onPostDeactivate:U.func,checkCanReturnFocus:U.func,initialFocus:U.oneOfType([U.instanceOf(ie),U.string,U.bool,U.func]),fallbackFocus:U.oneOfType([U.instanceOf(ie),U.string,U.func]),escapeDeactivates:U.oneOfType([U.bool,U.func]),clickOutsideDeactivates:U.oneOfType([U.bool,U.func]),returnFocusOnDeactivate:U.bool,setReturnFocus:U.oneOfType([U.instanceOf(ie),U.string,U.bool,U.func]),allowOutsideClick:U.oneOfType([U.bool,U.func]),preventScroll:U.bool,tabbableOptions:U.shape({displayCheck:U.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:U.oneOfType([U.bool,U.func])}),trapStack:U.array,isKeyForward:U.func,isKeyBackward:U.func}),containerElements:U.arrayOf(U.instanceOf(ie)),children:U.oneOfType([U.element,U.instanceOf(ie)])},re.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:V},II=re,II}var TI={exports:{}},uQ;function O6e(){return uQ||(uQ=1,(function(n){(function(e){var t=!1,i,r;function o(){if(typeof i<"u")return i;var v=document.documentElement,M=document.createElement("div");return M.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),v.appendChild(M),i=M.offsetWidth-M.clientWidth,v.removeChild(M),i}function s(){return document.documentElement.scrollHeight>window.innerHeight}function a(v){if(!(typeof document>"u"||t)){var M=document.documentElement;r=window.pageYOffset,s()?M.style.width="calc(100% - "+o()+"px)":M.style.width="100%",M.style.position="fixed",M.style.top=-r+"px",M.style.overflow="hidden",t=!0}}function c(){if(!(typeof document>"u"||!t)){var v=document.documentElement;v.style.width="",v.style.position="",v.style.top="",v.style.overflow="",window.scroll(0,r),t=!1}}function d(){if(t){c();return}a()}var m={on:a,off:c,toggle:d};n.exports=m})()})(TI)),TI.exports}var kI,cQ;function I6e(){if(cQ)return kI;cQ=1;function n(X){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(re){return typeof re}:function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},n(X)}function e(X,re){if(!(X instanceof re))throw new TypeError("Cannot call a class as a function")}function t(X,re){for(var ie=0;ie<re.length;ie++){var te=re[ie];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(X,te.key,te)}}function i(X,re,ie){return re&&t(X.prototype,re),Object.defineProperty(X,"prototype",{writable:!1}),X}function r(X,re){if(typeof re!="function"&&re!==null)throw new TypeError("Super expression must either be null or a function");X.prototype=Object.create(re&&re.prototype,{constructor:{value:X,writable:!0,configurable:!0}}),Object.defineProperty(X,"prototype",{writable:!1}),re&&o(X,re)}function o(X,re){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(te,q){return te.__proto__=q,te},o(X,re)}function s(X){var re=d();return function(){var te=m(X),q;if(re){var le=m(this).constructor;q=Reflect.construct(te,arguments,le)}else q=te.apply(this,arguments);return a(this,q)}}function a(X,re){if(re&&(n(re)==="object"||typeof re=="function"))return re;if(re!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c(X)}function c(X){if(X===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X}function d(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function m(X){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},m(X)}function v(X,re,ie){return re in X?Object.defineProperty(X,re,{value:ie,enumerable:!0,configurable:!0,writable:!0}):X[re]=ie,X}var M=_a(),B=vP(),P=B6e(),U=O6e(),z=(function(X){r(ie,X);var re=s(ie);function ie(te){var q;if(e(this,ie),q=re.call(this,te),v(c(q),"getApplicationNode",function(){return q.props.getApplicationNode?q.props.getApplicationNode():q.props.applicationNode}),v(c(q),"checkUnderlayClick",function(le){q.dialogNode&&q.dialogNode.contains(le.target)||le.pageX>le.target.ownerDocument.documentElement.offsetWidth||le.pageY>le.target.ownerDocument.documentElement.offsetHeight||q.exit(le)}),v(c(q),"checkDocumentKeyDown",function(le){q.props.escapeExits&&(le.key==="Escape"||le.key==="Esc"||le.keyCode===27)&&q.exit(le)}),v(c(q),"exit",function(le){q.props.onExit&&q.props.onExit(le)}),!te.titleText&&!te.titleId)throw new Error("react-aria-modal instances should have a `titleText` or `titleId`");return q}return i(ie,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter();var q=this.getApplicationNode();setTimeout(function(){q&&q.setAttribute("aria-hidden","true")},0),this.props.escapeExits&&this.addKeyDownListener(),this.props.scrollDisabled&&U.on()}},{key:"componentDidUpdate",value:function(q){q.scrollDisabled&&!this.props.scrollDisabled?U.off():!q.scrollDisabled&&this.props.scrollDisabled&&U.on(),this.props.escapeExits&&!q.escapeExits?this.addKeyDownListener():!this.props.escapeExits&&q.escapeExits&&this.removeKeyDownListener()}},{key:"componentWillUnmount",value:function(){this.props.scrollDisabled&&U.off();var q=this.getApplicationNode();q&&q.setAttribute("aria-hidden","false"),this.removeKeyDownListener()}},{key:"addKeyDownListener",value:function(){var q=this;setTimeout(function(){document.addEventListener("keydown",q.checkDocumentKeyDown)})}},{key:"removeKeyDownListener",value:function(){var q=this;setTimeout(function(){document.removeEventListener("keydown",q.checkDocumentKeyDown)})}},{key:"render",value:function(){var q=this.props,le={};if(q.includeDefaultStyles&&(le={position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1050,overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch",textAlign:"center"},q.underlayColor&&(le.background=q.underlayColor),q.underlayClickExits&&(le.cursor="pointer")),q.underlayStyle)for(var ce in q.underlayStyle)q.underlayStyle.hasOwnProperty(ce)&&(le[ce]=q.underlayStyle[ce]);var ve={className:q.underlayClass,style:le};q.underlayClickExits&&(ve.onMouseDown=this.checkUnderlayClick);for(var ge in this.props.underlayProps)ve[ge]=this.props.underlayProps[ge];var Ee={};q.includeDefaultStyles&&(Ee={display:"inline-block",height:"100%",verticalAlign:"middle"});var xe={key:"a",style:Ee},Te={};if(q.includeDefaultStyles&&(Te={display:"inline-block",textAlign:"left",top:0,maxWidth:"100%",cursor:"auto",outline:q.focusDialog?0:null},q.verticallyCenter&&(Te.verticalAlign="middle",Te.top=0)),q.dialogStyle)for(var Fe in q.dialogStyle)q.dialogStyle.hasOwnProperty(Fe)&&(Te[Fe]=q.dialogStyle[Fe]);var Ie={key:"b",ref:(function(Ue){this.dialogNode=Ue}).bind(this),role:q.alert?"alertdialog":"dialog",id:q.dialogId,className:q.dialogClass,style:Te};q.titleId?Ie["aria-labelledby"]=q.titleId:q.titleText&&(Ie["aria-label"]=q.titleText),q.focusDialog&&(Ie.tabIndex="-1");for(var Ye in q)/^(data-|aria-)/.test(Ye)&&(Ie[Ye]=q[Ye]);var At=[M.createElement("div",Ie,q.children)];q.verticallyCenter&&At.unshift(M.createElement("div",xe));var mt=q.focusTrapOptions||{};return(q.focusDialog||q.initialFocus)&&(mt.initialFocus=q.focusDialog?"#".concat(this.props.dialogId):q.initialFocus),mt.escapeDeactivates=q.escapeExits,M.createElement(P,{focusTrapOptions:mt,paused:q.focusTrapPaused},M.createElement("div",ve,At))}}]),ie})(M.Component);v(z,"defaultProps",{underlayProps:{},dialogId:"react-aria-modal-dialog",underlayClickExits:!0,escapeExits:!0,underlayColor:"rgba(0,0,0,0.5)",includeDefaultStyles:!0,focusTrapPaused:!1,scrollDisabled:!0});function V(X,re){if(!window.document)return function(){return null};re=re||{};var ie=(function(te){r(le,te);var q=s(le);function le(){var ce;e(this,le);for(var ve=arguments.length,ge=new Array(ve),Ee=0;Ee<ve;Ee++)ge[Ee]=arguments[Ee];return ce=q.call.apply(q,[this].concat(ge)),v(c(ce),"container",null),ce}return i(le,[{key:"componentDidMount",value:function(){re.renderTo?this.container=typeof re.renderTo=="string"?document.querySelector(re.renderTo):re.renderTo:(this.container=document.createElement("div"),document.body.appendChild(this.container)),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){re.renderTo||this.container.parentNode.removeChild(this.container)}},{key:"render",value:function(){return this.container===null||!this.props.mounted?null:B.createPortal(M.createElement(X,this.props,this.props.children),this.container)}}]),le})(M.Component);return v(ie,"defaultProps",{mounted:!0}),ie}var Z=V(z);return Z.renderTo=function(X){return V(z,{renderTo:X})},kI=Z,kI}var T6e=I6e();const k6e=vu(T6e);function Lu(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx",e="b56a3b702e6eec99855202d1cfe05d2ba4d6a2ce",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:10,column:3}},1:{start:{line:12,column:12},end:{line:19,column:3}},2:{start:{line:13,column:4},end:{line:15,column:5}},3:{start:{line:14,column:6},end:{line:14,column:36}},4:{start:{line:16,column:4},end:{line:18,column:10}},5:{start:{line:17,column:6},end:{line:17,column:32}},6:{start:{line:21,column:14},end:{line:21,column:26}},7:{start:{line:22,column:4},end:{line:60,column:5}},8:{start:{line:23,column:6},end:{line:57,column:8}},9:{start:{line:59,column:6},end:{line:59,column:19}},10:{start:{line:63,column:14},end:{line:63,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:12},end:{line:12,column:13}},loc:{start:{line:12,column:18},end:{line:19,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:15},end:{line:16,column:16}},loc:{start:{line:16,column:21},end:{line:18,column:5}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:61,column:3}},line:20}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx"],names:[],mappings:"AA8CU,SACE,KADF;AA9CV,OAAO,WAAuC;AAC9C,SAAQ,eAAc;AACtB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,SAA+B,uBAAuB;AAYtD,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,oBAAoB;AAAA,EACtB;AAAA;AAAA,EAGA,UAAU,MAAM;AACd,QAAI,SAAS,eAAe;AAC1B,MAAC,SAAS,cAA8B,KAAK;AAAA,IAC/C;AAEA,eAAW,MAAM;AACf,WAAK,MAAM,aAAa;AAAA,IAC1B,GAAG,CAAC;AAAA,EACN;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAG,KAAK,MAAM,QAAQ;AACpB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,WAAW,KAAK,MAAM;AAAA,UACtB,oBAAoB,KAAK,MAAM;AAAA,UAC/B,eAAa,KAAK,MAAM,aAAa;AAAA,UACrC,kBAAkB;AAAA,UAClB,QAAQ,KAAK;AAAA,UACb,aAAY;AAAA,UAEZ;AAAA,YAAC;AAAA;AAAA,cAAI,WAAW,WAAW,kBAAkB,KAAK,MAAM,SAAS;AAAA,cAC/D,eAAa,KAAK,MAAM,aAAa;AAAA,cAErC;AAAA,qCAAC,YAAO,WAAU,yBAChB;AAAA,sCAAC,QAAG,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,kBAC9D,oBAAC,UAAK,WAAU,kBAAiB;AAAA,kBACjC;AAAA,oBAAC;AAAA;AAAA,sBAAO,WAAU;AAAA,sBAChB,OAAO,EAAE,aAAa;AAAA,sBACtB,SAAS,KAAK;AAAA,sBACd,eAAa,KAAK,MAAM,aAAa,IAAE;AAAA,sBAEvC,8BAAC,WAAQ;AAAA;AAAA,kBACX;AAAA,mBACF;AAAA,gBACA,oBAAC,SAAI,WAAU,2BACb,8BAAC,SAAI,WAAU,0BAA0B,eAAK,MAAM,UAAS,GAC/D;AAAA;AAAA;AAAA,UACF;AAAA;AAAA,MACF;AAAA,IACF,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,MAAM,QAAQ,gBAAgB,EAAE,aAAa;AAC7C,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b56a3b702e6eec99855202d1cfe05d2ba4d6a2ce"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Lu=function(){return s},s}Lu();class D6e extends In.Component{static defaultProps=(Lu().s[0]++,{underlayClickExits:!0});onClose=(Lu().s[1]++,()=>{Lu().f[0]++,Lu().s[2]++,document.activeElement?(Lu().b[0][0]++,Lu().s[3]++,document.activeElement.blur()):Lu().b[0][1]++,Lu().s[4]++,setTimeout(()=>{Lu().f[1]++,Lu().s[5]++,this.props.onOpenToggle()},0)});render(){Lu().f[2]++;const e=(Lu().s[6]++,this.props.t);return Lu().s[7]++,this.props.isOpen?(Lu().b[1][0]++,Lu().s[8]++,oe.jsx(k6e,{titleText:this.props.title,underlayClickExits:this.props.underlayClickExits,"data-wd-key":this.props["data-wd-key"],verticallyCenter:!0,onExit:this.onClose,dialogClass:"maputnik-modal-container",children:oe.jsxs("div",{className:Ig("maputnik-modal",this.props.className),"data-wd-key":this.props["data-wd-key"],children:[oe.jsxs("header",{className:"maputnik-modal-header",children:[oe.jsx("h1",{className:"maputnik-modal-header-title",children:this.props.title}),oe.jsx("span",{className:"maputnik-space"}),oe.jsx("button",{className:"maputnik-modal-header-toggle",title:e("Close modal"),onClick:this.onClose,"data-wd-key":this.props["data-wd-key"]+".close-modal",children:oe.jsx(kfe,{})})]}),oe.jsx("div",{className:"maputnik-modal-scroller",children:oe.jsx("div",{className:"maputnik-modal-content",children:this.props.children})})]})})):(Lu().b[1][1]++,Lu().s[9]++,!1)}}const V1=(Lu().s[10]++,Do()(D6e));function ss(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",e="227136badbf4464e3a73e0852e3bc3d4b9112a08",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:33,column:1}},1:{start:{line:5,column:26},end:{line:5,column:47}},2:{start:{line:6,column:22},end:{line:11,column:3}},3:{start:{line:7,column:4},end:{line:7,column:19}},4:{start:{line:8,column:4},end:{line:10,column:5}},5:{start:{line:9,column:6},end:{line:9,column:31}},6:{start:{line:12,column:31},end:{line:12,column:36}},7:{start:{line:13,column:18},end:{line:13,column:33}},8:{start:{line:14,column:2},end:{line:31,column:3}},9:{start:{line:15,column:4},end:{line:28,column:12}},10:{start:{line:23,column:25},end:{line:23,column:43}},11:{start:{line:29,column:9},end:{line:31,column:3}},12:{start:{line:30,column:4},end:{line:30,column:172}},13:{start:{line:32,column:2},end:{line:32,column:40}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:33,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:6,column:22},end:{line:6,column:23}},loc:{start:{line:6,column:33},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:23,column:43}},line:23}},branchMap:{0:{loc:{start:{line:8,column:4},end:{line:10,column:5}},type:"if",locations:[{start:{line:8,column:4},end:{line:10,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:13,column:18},end:{line:13,column:33}},type:"binary-expr",locations:[{start:{line:13,column:18},end:{line:13,column:27}},{start:{line:13,column:31},end:{line:13,column:33}}],line:13},2:{loc:{start:{line:14,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:31,column:3}},{start:{line:29,column:9},end:{line:31,column:3}}],line:14},3:{loc:{start:{line:21,column:24},end:{line:21,column:93}},type:"cond-expr",locations:[{start:{line:21,column:31},end:{line:21,column:61}},{start:{line:21,column:64},end:{line:21,column:93}}],line:21},4:{loc:{start:{line:22,column:65},end:{line:22,column:89}},type:"cond-expr",locations:[{start:{line:22,column:72},end:{line:22,column:78}},{start:{line:22,column:81},end:{line:22,column:89}}],line:22},5:{loc:{start:{line:25,column:20},end:{line:25,column:107}},type:"cond-expr",locations:[{start:{line:25,column:43},end:{line:25,column:66}},{start:{line:25,column:85},end:{line:25,column:107}}],line:25},6:{loc:{start:{line:29,column:9},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:9},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx"],names:[],mappings:"AA4BQ,SASY,KATZ;AA5BR,OAAO,WAAyB;AAChC,SAAQ,eAAe,sBAAqB;AAW5C,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,MAAM,OAAO,IAAI,MAAM,SAAS,KAAK;AAE5C,QAAM,cAAc,CAAC,UAAmB;AACtC,YAAQ,KAAK;AACb,QAAI,MAAM,aAAa;AACrB,YAAM,YAAY,KAAK;AAAA,IACzB;AAAA,EACF;AAEA,QAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAM,EAAE,IAAI,IAAI,aAAa,CAAC;AAE9B,MAAI,KAAK;AACP,WACE,oBAAC,WAAM,WAAU,wBACf,+BAAC,SAAI,WAAU,uBACZ;AAAA;AAAA,MACA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,OAAO,iCAAiC;AAAA,UACpD,WAAW,4CAA4C,OAAO,SAAS,QAAQ;AAAA,UAC/E,SAAS,MAAM,YAAY,CAAC,IAAI;AAAA,UAChC,eAAa,sBAAsB;AAAA,UAElC,iBAAO,oBAAC,kBAAe,IAAK,oBAAC,iBAAc;AAAA;AAAA,MAC9C;AAAA,OACF,GACF;AAAA,EAEJ,WAAW,OAAO;AAChB,WACE,oBAAC,WAAM,WAAU,wBACf,8BAAC,SAAI,WAAU,uBAAuB,iBAAM,GAC9C;AAAA,EAEJ;AACA,SAAO,oBAAC,SAAI;AACd;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"227136badbf4464e3a73e0852e3bc3d4b9112a08"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ss=function(){return s},s}ss();ss().s[0]++;const lK=n=>{ss().f[0]++;const[e,t]=(ss().s[1]++,In.useState(!1));ss().s[2]++;const i=a=>{ss().f[1]++,ss().s[3]++,t(a),ss().s[4]++,n.onToggleDoc?(ss().b[0][0]++,ss().s[5]++,n.onToggleDoc(a)):ss().b[0][1]++},{label:r,fieldSpec:o}=(ss().s[6]++,n),{doc:s}=(ss().s[7]++,ss().b[1][0]++,o||(ss().b[1][1]++,{}));return ss().s[8]++,s?(ss().b[2][0]++,ss().s[9]++,oe.jsx("label",{className:"maputnik-doc-wrapper",children:oe.jsxs("div",{className:"maputnik-doc-target",children:[r,"",oe.jsx("button",{"aria-label":e?(ss().b[3][0]++,"close property documentation"):(ss().b[3][1]++,"open property documentation"),className:`maputnik-doc-button maputnik-doc-button--${e?(ss().b[4][0]++,"open"):(ss().b[4][1]++,"closed")}`,onClick:()=>(ss().f[2]++,ss().s[10]++,i(!e)),"data-wd-key":"field-doc-button-"+r,children:e?(ss().b[5][0]++,oe.jsx(mfe,{})):(ss().b[5][1]++,oe.jsx(gfe,{}))})]})})):(ss().b[2][1]++,ss().s[11]++,r?(ss().b[6][0]++,ss().s[12]++,oe.jsx("label",{className:"maputnik-doc-wrapper",children:oe.jsx("div",{className:"maputnik-doc-target",children:r})})):(ss().b[6][1]++,ss().s[13]++,oe.jsx("div",{})))};function R6e(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const P6e=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,L6e=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,U6e={};function AQ(n,e){return(U6e.jsx?L6e:P6e).test(n)}const K6e=/[ \t\n\f\r]/g;function F6e(n){return typeof n=="object"?n.type==="text"?hQ(n.value):!1:hQ(n)}function hQ(n){return n.replace(K6e,"")===""}class kM{constructor(e,t,i){this.normal=t,this.property=e,i&&(this.space=i)}}kM.prototype.normal={};kM.prototype.property={};kM.prototype.space=void 0;function jre(n,e){const t={},i={};for(const r of n)Object.assign(t,r.property),Object.assign(i,r.normal);return new kM(t,i,e)}function XR(n){return n.toLowerCase()}class Rd{constructor(e,t){this.attribute=t,this.property=e}}Rd.prototype.attribute="";Rd.prototype.booleanish=!1;Rd.prototype.boolean=!1;Rd.prototype.commaOrSpaceSeparated=!1;Rd.prototype.commaSeparated=!1;Rd.prototype.defined=!1;Rd.prototype.mustUseProperty=!1;Rd.prototype.number=!1;Rd.prototype.overloadedBoolean=!1;Rd.prototype.property="";Rd.prototype.spaceSeparated=!1;Rd.prototype.space=void 0;let z6e=0;const ro=$C(),Uu=$C(),JR=$C(),Vn=$C(),Pa=$C(),Jx=$C(),cf=$C();function $C(){return 2**++z6e}const eP=Object.freeze(Object.defineProperty({__proto__:null,boolean:ro,booleanish:Uu,commaOrSpaceSeparated:cf,commaSeparated:Jx,number:Vn,overloadedBoolean:JR,spaceSeparated:Pa},Symbol.toStringTag,{value:"Module"})),DI=Object.keys(eP);class uK extends Rd{constructor(e,t,i,r){let o=-1;if(super(e,t),dQ(this,"space",r),typeof i=="number")for(;++o<DI.length;){const s=DI[o];dQ(this,DI[o],(i&eP[s])===eP[s])}}}uK.prototype.defined=!0;function dQ(n,e,t){t&&(n[e]=t)}function q2(n){const e={},t={};for(const[i,r]of Object.entries(n.properties)){const o=new uK(i,n.transform(n.attributes||{},i),r,n.space);n.mustUseProperty&&n.mustUseProperty.includes(i)&&(o.mustUseProperty=!0),e[i]=o,t[XR(i)]=i,t[XR(o.attribute)]=i}return new kM(e,t,n.space)}const Nre=q2({properties:{ariaActiveDescendant:null,ariaAtomic:Uu,ariaAutoComplete:null,ariaBusy:Uu,ariaChecked:Uu,ariaColCount:Vn,ariaColIndex:Vn,ariaColSpan:Vn,ariaControls:Pa,ariaCurrent:null,ariaDescribedBy:Pa,ariaDetails:null,ariaDisabled:Uu,ariaDropEffect:Pa,ariaErrorMessage:null,ariaExpanded:Uu,ariaFlowTo:Pa,ariaGrabbed:Uu,ariaHasPopup:null,ariaHidden:Uu,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Pa,ariaLevel:Vn,ariaLive:null,ariaModal:Uu,ariaMultiLine:Uu,ariaMultiSelectable:Uu,ariaOrientation:null,ariaOwns:Pa,ariaPlaceholder:null,ariaPosInSet:Vn,ariaPressed:Uu,ariaReadOnly:Uu,ariaRelevant:null,ariaRequired:Uu,ariaRoleDescription:Pa,ariaRowCount:Vn,ariaRowIndex:Vn,ariaRowSpan:Vn,ariaSelected:Uu,ariaSetSize:Vn,ariaSort:null,ariaValueMax:Vn,ariaValueMin:Vn,ariaValueNow:Vn,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Gre(n,e){return e in n?n[e]:e}function Wre(n,e){return Gre(n,e.toLowerCase())}const j6e=q2({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Jx,acceptCharset:Pa,accessKey:Pa,action:null,allow:null,allowFullScreen:ro,allowPaymentRequest:ro,allowUserMedia:ro,alt:null,as:null,async:ro,autoCapitalize:null,autoComplete:Pa,autoFocus:ro,autoPlay:ro,blocking:Pa,capture:null,charSet:null,checked:ro,cite:null,className:Pa,cols:Vn,colSpan:null,content:null,contentEditable:Uu,controls:ro,controlsList:Pa,coords:Vn|Jx,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ro,defer:ro,dir:null,dirName:null,disabled:ro,download:JR,draggable:Uu,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ro,formTarget:null,headers:Pa,height:Vn,hidden:JR,high:Vn,href:null,hrefLang:null,htmlFor:Pa,httpEquiv:Pa,id:null,imageSizes:null,imageSrcSet:null,inert:ro,inputMode:null,integrity:null,is:null,isMap:ro,itemId:null,itemProp:Pa,itemRef:Pa,itemScope:ro,itemType:Pa,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ro,low:Vn,manifest:null,max:null,maxLength:Vn,media:null,method:null,min:null,minLength:Vn,multiple:ro,muted:ro,name:null,nonce:null,noModule:ro,noValidate:ro,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ro,optimum:Vn,pattern:null,ping:Pa,placeholder:null,playsInline:ro,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ro,referrerPolicy:null,rel:Pa,required:ro,reversed:ro,rows:Vn,rowSpan:Vn,sandbox:Pa,scope:null,scoped:ro,seamless:ro,selected:ro,shadowRootClonable:ro,shadowRootDelegatesFocus:ro,shadowRootMode:null,shape:null,size:Vn,sizes:null,slot:null,span:Vn,spellCheck:Uu,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Vn,step:null,style:null,tabIndex:Vn,target:null,title:null,translate:null,type:null,typeMustMatch:ro,useMap:null,value:Uu,width:Vn,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Pa,axis:null,background:null,bgColor:null,border:Vn,borderColor:null,bottomMargin:Vn,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ro,declare:ro,event:null,face:null,frame:null,frameBorder:null,hSpace:Vn,leftMargin:Vn,link:null,longDesc:null,lowSrc:null,marginHeight:Vn,marginWidth:Vn,noResize:ro,noHref:ro,noShade:ro,noWrap:ro,object:null,profile:null,prompt:null,rev:null,rightMargin:Vn,rules:null,scheme:null,scrolling:Uu,standby:null,summary:null,text:null,topMargin:Vn,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Vn,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ro,disableRemotePlayback:ro,prefix:null,property:null,results:Vn,security:null,unselectable:null},space:"html",transform:Wre}),N6e=q2({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:cf,accentHeight:Vn,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Vn,amplitude:Vn,arabicForm:null,ascent:Vn,attributeName:null,attributeType:null,azimuth:Vn,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Vn,by:null,calcMode:null,capHeight:Vn,className:Pa,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Vn,diffuseConstant:Vn,direction:null,display:null,dur:null,divisor:Vn,dominantBaseline:null,download:ro,dx:null,dy:null,edgeMode:null,editable:null,elevation:Vn,enableBackground:null,end:null,event:null,exponent:Vn,externalResourcesRequired:null,fill:null,fillOpacity:Vn,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Jx,g2:Jx,glyphName:Jx,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Vn,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Vn,horizOriginX:Vn,horizOriginY:Vn,id:null,ideographic:Vn,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Vn,k:Vn,k1:Vn,k2:Vn,k3:Vn,k4:Vn,kernelMatrix:cf,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Vn,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Vn,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Vn,overlineThickness:Vn,paintOrder:null,panose1:null,path:null,pathLength:Vn,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Pa,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Vn,pointsAtY:Vn,pointsAtZ:Vn,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:cf,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:cf,rev:cf,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:cf,requiredFeatures:cf,requiredFonts:cf,requiredFormats:cf,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Vn,specularExponent:Vn,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Vn,strikethroughThickness:Vn,string:null,stroke:null,strokeDashArray:cf,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Vn,strokeOpacity:Vn,strokeWidth:null,style:null,surfaceScale:Vn,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:cf,tabIndex:Vn,tableValues:null,target:null,targetX:Vn,targetY:Vn,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:cf,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Vn,underlineThickness:Vn,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Vn,values:null,vAlphabetic:Vn,vMathematical:Vn,vectorEffect:null,vHanging:Vn,vIdeographic:Vn,version:null,vertAdvY:Vn,vertOriginX:Vn,vertOriginY:Vn,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Vn,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Gre}),Qre=q2({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),qre=q2({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Wre}),Yre=q2({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),G6e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},W6e=/[A-Z]/g,fQ=/-[a-z]/g,Q6e=/^data[-\w.:]+$/i;function q6e(n,e){const t=XR(e);let i=e,r=Rd;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&Q6e.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(fQ,V6e);i="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!fQ.test(o)){let s=o.replace(W6e,Y6e);s.charAt(0)!=="-"&&(s="-"+s),e="data"+s}}r=uK}return new r(i,e)}function Y6e(n){return"-"+n.toLowerCase()}function V6e(n){return n.charAt(1).toUpperCase()}const $6e=jre([Nre,j6e,Qre,qre,Yre],"html"),cK=jre([Nre,N6e,Qre,qre,Yre],"svg");function H6e(n){return n.join(" ").trim()}var Q_={},RI,pQ;function Z6e(){if(pQ)return RI;pQ=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,a=/^\s+|\s+$/g,c=`
`,d="/",m="*",v="",M="comment",B="declaration";RI=function(U,z){if(typeof U!="string")throw new TypeError("First argument must be a string");if(!U)return[];z=z||{};var V=1,Z=1;function X(xe){var Te=xe.match(e);Te&&(V+=Te.length);var Fe=xe.lastIndexOf(c);Z=~Fe?xe.length-Fe:Z+xe.length}function re(){var xe={line:V,column:Z};return function(Te){return Te.position=new ie(xe),le(),Te}}function ie(xe){this.start=xe,this.end={line:V,column:Z},this.source=z.source}ie.prototype.content=U;function te(xe){var Te=new Error(z.source+":"+V+":"+Z+": "+xe);if(Te.reason=xe,Te.filename=z.source,Te.line=V,Te.column=Z,Te.source=U,!z.silent)throw Te}function q(xe){var Te=xe.exec(U);if(Te){var Fe=Te[0];return X(Fe),U=U.slice(Fe.length),Te}}function le(){q(t)}function ce(xe){var Te;for(xe=xe||[];Te=ve();)Te!==!1&&xe.push(Te);return xe}function ve(){var xe=re();if(!(d!=U.charAt(0)||m!=U.charAt(1))){for(var Te=2;v!=U.charAt(Te)&&(m!=U.charAt(Te)||d!=U.charAt(Te+1));)++Te;if(Te+=2,v===U.charAt(Te-1))return te("End of comment missing");var Fe=U.slice(2,Te-2);return Z+=2,X(Fe),U=U.slice(Te),Z+=2,xe({type:M,comment:Fe})}}function ge(){var xe=re(),Te=q(i);if(Te){if(ve(),!q(r))return te("property missing ':'");var Fe=q(o),Ie=xe({type:B,property:P(Te[0].replace(n,v)),value:Fe?P(Fe[0].replace(n,v)):v});return q(s),Ie}}function Ee(){var xe=[];ce(xe);for(var Te;Te=ge();)Te!==!1&&(xe.push(Te),ce(xe));return xe}return le(),Ee()};function P(U){return U?U.replace(a,v):v}return RI}var mQ;function X6e(){if(mQ)return Q_;mQ=1;var n=Q_&&Q_.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Q_,"__esModule",{value:!0}),Q_.default=t;const e=n(Z6e());function t(i,r){let o=null;if(!i||typeof i!="string")return o;const s=(0,e.default)(i),a=typeof r=="function";return s.forEach(c=>{if(c.type!=="declaration")return;const{property:d,value:m}=c;a?r(d,m,c):m&&(o=o||{},o[d]=m)}),o}return Q_}var T3={},gQ;function J6e(){if(gQ)return T3;gQ=1,Object.defineProperty(T3,"__esModule",{value:!0}),T3.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,o=function(d){return!d||t.test(d)||n.test(d)},s=function(d,m){return m.toUpperCase()},a=function(d,m){return"".concat(m,"-")},c=function(d,m){return m===void 0&&(m={}),o(d)?d:(d=d.toLowerCase(),m.reactCompat?d=d.replace(r,a):d=d.replace(i,a),d.replace(e,s))};return T3.camelCase=c,T3}var k3,yQ;function eBe(){if(yQ)return k3;yQ=1;var n=k3&&k3.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=n(X6e()),t=J6e();function i(r,o){var s={};return!r||typeof r!="string"||(0,e.default)(r,function(a,c){a&&c&&(s[(0,t.camelCase)(a,o)]=c)}),s}return i.default=i,k3=i,k3}var tBe=eBe();const nBe=vu(tBe),Vre=$re("end"),AK=$re("start");function $re(n){return e;function e(t){const i=t&&t.position&&t.position[n]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function iBe(n){const e=AK(n),t=Vre(n);if(e&&t)return{start:e,end:t}}function T4(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?vQ(n.position):"start"in n||"end"in n?vQ(n):"line"in n||"column"in n?tP(n):""}function tP(n){return bQ(n&&n.line)+":"+bQ(n&&n.column)}function vQ(n){return tP(n&&n.start)+"-"+tP(n&&n.end)}function bQ(n){return n&&typeof n=="number"?n:1}class JA extends Error{constructor(e,t,i){super(),typeof t=="string"&&(i=t,t=void 0);let r="",o={},s=!1;if(t&&("line"in t&&"column"in t?o={place:t}:"start"in t&&"end"in t?o={place:t}:"type"in t?o={ancestors:[t],place:t.position}:o={...t}),typeof e=="string"?r=e:!o.cause&&e&&(s=!0,r=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof i=="string"){const c=i.indexOf(":");c===-1?o.ruleId=i:(o.source=i.slice(0,c),o.ruleId=i.slice(c+1))}if(!o.place&&o.ancestors&&o.ancestors){const c=o.ancestors[o.ancestors.length-1];c&&(o.place=c.position)}const a=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=a?a.line:void 0,this.name=T4(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=s&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}JA.prototype.file="";JA.prototype.name="";JA.prototype.reason="";JA.prototype.message="";JA.prototype.stack="";JA.prototype.column=void 0;JA.prototype.line=void 0;JA.prototype.ancestors=void 0;JA.prototype.cause=void 0;JA.prototype.fatal=void 0;JA.prototype.place=void 0;JA.prototype.ruleId=void 0;JA.prototype.source=void 0;const hK={}.hasOwnProperty,rBe=new Map,oBe=/[A-Z]/g,sBe=new Set(["table","tbody","thead","tfoot","tr"]),aBe=new Set(["td","th"]),Hre="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function lBe(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=mBe(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=pBe(t,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?cK:$6e,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=Zre(r,n,void 0);return o&&typeof o!="string"?o:r.create(n,r.Fragment,{children:o||void 0},void 0)}function Zre(n,e,t){if(e.type==="element")return uBe(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return cBe(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return hBe(n,e,t);if(e.type==="mdxjsEsm")return ABe(n,e);if(e.type==="root")return dBe(n,e,t);if(e.type==="text")return fBe(n,e)}function uBe(n,e,t){const i=n.schema;let r=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=cK,n.schema=r),n.ancestors.push(e);const o=Jre(n,e.tagName,!1),s=gBe(n,e);let a=fK(n,e);return sBe.has(e.tagName)&&(a=a.filter(function(c){return typeof c=="string"?!F6e(c):!0})),Xre(n,s,o,e),dK(s,a),n.ancestors.pop(),n.schema=i,n.create(e,o,s,t)}function cBe(n,e){if(e.data&&e.data.estree&&n.evaluater){const i=e.data.estree.body[0];return i.type,n.evaluater.evaluateExpression(i.expression)}D5(n,e.position)}function ABe(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);D5(n,e.position)}function hBe(n,e,t){const i=n.schema;let r=i;e.name==="svg"&&i.space==="html"&&(r=cK,n.schema=r),n.ancestors.push(e);const o=e.name===null?n.Fragment:Jre(n,e.name,!0),s=yBe(n,e),a=fK(n,e);return Xre(n,s,o,e),dK(s,a),n.ancestors.pop(),n.schema=i,n.create(e,o,s,t)}function dBe(n,e,t){const i={};return dK(i,fK(n,e)),n.create(e,n.Fragment,i,t)}function fBe(n,e){return e.value}function Xre(n,e,t,i){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=i)}function dK(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function pBe(n,e,t){return i;function i(r,o,s,a){const d=Array.isArray(s.children)?t:e;return a?d(o,s,a):d(o,s)}}function mBe(n,e){return t;function t(i,r,o,s){const a=Array.isArray(o.children),c=AK(i);return e(r,o,s,a,{columnNumber:c?c.column-1:void 0,fileName:n,lineNumber:c?c.line:void 0},void 0)}}function gBe(n,e){const t={};let i,r;for(r in e.properties)if(r!=="children"&&hK.call(e.properties,r)){const o=vBe(n,r,e.properties[r]);if(o){const[s,a]=o;n.tableCellAlignToStyle&&s==="align"&&typeof a=="string"&&aBe.has(e.tagName)?i=a:t[s]=a}}if(i){const o=t.style||(t.style={});o[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return t}function yBe(n,e){const t={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&n.evaluater){const o=i.data.estree.body[0];o.type;const s=o.expression;s.type;const a=s.properties[0];a.type,Object.assign(t,n.evaluater.evaluateExpression(a.argument))}else D5(n,e.position);else{const r=i.name;let o;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&n.evaluater){const a=i.value.data.estree.body[0];a.type,o=n.evaluater.evaluateExpression(a.expression)}else D5(n,e.position);else o=i.value===null?!0:i.value;t[r]=o}return t}function fK(n,e){const t=[];let i=-1;const r=n.passKeys?new Map:rBe;for(;++i<e.children.length;){const o=e.children[i];let s;if(n.passKeys){const c=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(c){const d=r.get(c)||0;s=c+"-"+d,r.set(c,d+1)}}const a=Zre(n,o,s);a!==void 0&&t.push(a)}return t}function vBe(n,e,t){const i=q6e(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=i.commaSeparated?R6e(t):H6e(t)),i.property==="style"){let r=typeof t=="object"?t:bBe(n,String(t));return n.stylePropertyNameCase==="css"&&(r=CBe(r)),["style",r]}return[n.elementAttributeNameCase==="react"&&i.space?G6e[i.property]||i.property:i.attribute,t]}}function bBe(n,e){try{return nBe(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const i=t,r=new JA("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=n.filePath||void 0,r.url=Hre+"#cannot-parse-style-attribute",r}}function Jre(n,e,t){let i;if(!t)i={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let o=-1,s;for(;++o<r.length;){const a=AQ(r[o])?{type:"Identifier",name:r[o]}:{type:"Literal",value:r[o]};s=s?{type:"MemberExpression",object:s,property:a,computed:!!(o&&a.type==="Literal"),optional:!1}:a}i=s}else i=AQ(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const r=i.value;return hK.call(n.components,r)?n.components[r]:r}if(n.evaluater)return n.evaluater.evaluateExpression(i);D5(n)}function D5(n,e){const t=new JA("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=Hre+"#cannot-handle-mdx-estrees-without-createevaluater",t}function CBe(n){const e={};let t;for(t in n)hK.call(n,t)&&(e[_Be(t)]=n[t]);return e}function _Be(n){let e=n.replace(oBe,xBe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function xBe(n){return"-"+n.toLowerCase()}const PI={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},MBe={};function wBe(n,e){const t=MBe,i=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,r=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return eoe(n,i,r)}function eoe(n,e,t){if(SBe(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return CQ(n.children,e,t)}return Array.isArray(n)?CQ(n,e,t):""}function CQ(n,e,t){const i=[];let r=-1;for(;++r<n.length;)i[r]=eoe(n[r],e,t);return i.join("")}function SBe(n){return!!(n&&typeof n=="object")}const _Q=document.createElement("i");function pK(n){const e="&"+n+";";_Q.innerHTML=e;const t=_Q.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function Sg(n,e,t,i){const r=n.length;let o=0,s;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,t=t>0?t:0,i.length<1e4)s=Array.from(i),s.unshift(e,t),n.splice(...s);else for(t&&n.splice(e,t);o<i.length;)s=i.slice(o,o+1e4),s.unshift(e,0),n.splice(...s),o+=1e4,e+=1e4}function fp(n,e){return n.length>0?(Sg(n,n.length,0,e),n):e}const xQ={}.hasOwnProperty;function EBe(n){const e={};let t=-1;for(;++t<n.length;)BBe(e,n[t]);return e}function BBe(n,e){let t;for(t in e){const r=(xQ.call(n,t)?n[t]:void 0)||(n[t]={}),o=e[t];let s;if(o)for(s in o){xQ.call(r,s)||(r[s]=[]);const a=o[s];OBe(r[s],Array.isArray(a)?a:a?[a]:[])}}}function OBe(n,e){let t=-1;const i=[];for(;++t<e.length;)(e[t].add==="after"?n:i).push(e[t]);Sg(n,0,0,i)}function toe(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function e2(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const og=jv(/[A-Za-z]/),_f=jv(/[\dA-Za-z]/),IBe=jv(/[#-'*+\--9=?A-Z^-~]/);function nP(n){return n!==null&&(n<32||n===127)}const iP=jv(/\d/),TBe=jv(/[\dA-Fa-f]/),kBe=jv(/[!-/:-@[-`{-~]/);function Sr(n){return n!==null&&n<-2}function Od(n){return n!==null&&(n<0||n===32)}function ws(n){return n===-2||n===-1||n===32}const DBe=jv(new RegExp("\\p{P}|\\p{S}","u")),RBe=jv(/\s/);function jv(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function Y2(n){const e=[];let t=-1,i=0,r=0;for(;++t<n.length;){const o=n.charCodeAt(t);let s="";if(o===37&&_f(n.charCodeAt(t+1))&&_f(n.charCodeAt(t+2)))r=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(s=String.fromCharCode(o));else if(o>55295&&o<57344){const a=n.charCodeAt(t+1);o<56320&&a>56319&&a<57344?(s=String.fromCharCode(o,a),r=1):s=""}else s=String.fromCharCode(o);s&&(e.push(n.slice(i,t),encodeURIComponent(s)),i=t+r+1,s=""),r&&(t+=r,r=0)}return e.join("")+n.slice(i)}function Ua(n,e,t,i){const r=i?i-1:Number.POSITIVE_INFINITY;let o=0;return s;function s(c){return ws(c)?(n.enter(t),a(c)):e(c)}function a(c){return ws(c)&&o++<r?(n.consume(c),a):(n.exit(t),e(c))}}const PBe={tokenize:LBe};function LBe(n){const e=n.attempt(this.parser.constructs.contentInitial,i,r);let t;return e;function i(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),Ua(n,e,"linePrefix")}function r(a){return n.enter("paragraph"),o(a)}function o(a){const c=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=c),t=c,s(a)}function s(a){if(a===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(a);return}return Sr(a)?(n.consume(a),n.exit("chunkText"),o):(n.consume(a),s)}}const UBe={tokenize:KBe},MQ={tokenize:FBe};function KBe(n){const e=this,t=[];let i=0,r,o,s;return a;function a(X){if(i<t.length){const re=t[i];return e.containerState=re[1],n.attempt(re[0].continuation,c,d)(X)}return d(X)}function c(X){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&Z();const re=e.events.length;let ie=re,te;for(;ie--;)if(e.events[ie][0]==="exit"&&e.events[ie][1].type==="chunkFlow"){te=e.events[ie][1].end;break}V(i);let q=re;for(;q<e.events.length;)e.events[q][1].end={...te},q++;return Sg(e.events,ie+1,0,e.events.slice(re)),e.events.length=q,d(X)}return a(X)}function d(X){if(i===t.length){if(!r)return M(X);if(r.currentConstruct&&r.currentConstruct.concrete)return P(X);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(MQ,m,v)(X)}function m(X){return r&&Z(),V(i),M(X)}function v(X){return e.parser.lazy[e.now().line]=i!==t.length,s=e.now().offset,P(X)}function M(X){return e.containerState={},n.attempt(MQ,B,P)(X)}function B(X){return i++,t.push([e.currentConstruct,e.containerState]),M(X)}function P(X){if(X===null){r&&Z(),V(0),n.consume(X);return}return r=r||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:o}),U(X)}function U(X){if(X===null){z(n.exit("chunkFlow"),!0),V(0),n.consume(X);return}return Sr(X)?(n.consume(X),z(n.exit("chunkFlow")),i=0,e.interrupt=void 0,a):(n.consume(X),U)}function z(X,re){const ie=e.sliceStream(X);if(re&&ie.push(null),X.previous=o,o&&(o.next=X),o=X,r.defineSkip(X.start),r.write(ie),e.parser.lazy[X.start.line]){let te=r.events.length;for(;te--;)if(r.events[te][1].start.offset<s&&(!r.events[te][1].end||r.events[te][1].end.offset>s))return;const q=e.events.length;let le=q,ce,ve;for(;le--;)if(e.events[le][0]==="exit"&&e.events[le][1].type==="chunkFlow"){if(ce){ve=e.events[le][1].end;break}ce=!0}for(V(i),te=q;te<e.events.length;)e.events[te][1].end={...ve},te++;Sg(e.events,le+1,0,e.events.slice(q)),e.events.length=te}}function V(X){let re=t.length;for(;re-- >X;){const ie=t[re];e.containerState=ie[1],ie[0].exit.call(e,n)}t.length=X}function Z(){r.write([null]),o=void 0,r=void 0,e.containerState._closeFlow=void 0}}function FBe(n,e,t){return Ua(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function wQ(n){if(n===null||Od(n)||RBe(n))return 1;if(DBe(n))return 2}function mK(n,e,t){const i=[];let r=-1;for(;++r<n.length;){const o=n[r].resolveAll;o&&!i.includes(o)&&(e=o(e,t),i.push(o))}return e}const rP={name:"attention",resolveAll:zBe,tokenize:jBe};function zBe(n,e){let t=-1,i,r,o,s,a,c,d,m;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(i=t;i--;)if(n[i][0]==="exit"&&n[i][1].type==="attentionSequence"&&n[i][1]._open&&e.sliceSerialize(n[i][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[i][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[i][1].end.offset-n[i][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;c=n[i][1].end.offset-n[i][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const v={...n[i][1].end},M={...n[t][1].start};SQ(v,-c),SQ(M,c),s={type:c>1?"strongSequence":"emphasisSequence",start:v,end:{...n[i][1].end}},a={type:c>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:M},o={type:c>1?"strongText":"emphasisText",start:{...n[i][1].end},end:{...n[t][1].start}},r={type:c>1?"strong":"emphasis",start:{...s.start},end:{...a.end}},n[i][1].end={...s.start},n[t][1].start={...a.end},d=[],n[i][1].end.offset-n[i][1].start.offset&&(d=fp(d,[["enter",n[i][1],e],["exit",n[i][1],e]])),d=fp(d,[["enter",r,e],["enter",s,e],["exit",s,e],["enter",o,e]]),d=fp(d,mK(e.parser.constructs.insideSpan.null,n.slice(i+1,t),e)),d=fp(d,[["exit",o,e],["enter",a,e],["exit",a,e],["exit",r,e]]),n[t][1].end.offset-n[t][1].start.offset?(m=2,d=fp(d,[["enter",n[t][1],e],["exit",n[t][1],e]])):m=0,Sg(n,i-1,t-i+3,d),t=i+d.length-m-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function jBe(n,e){const t=this.parser.constructs.attentionMarkers.null,i=this.previous,r=wQ(i);let o;return s;function s(c){return o=c,n.enter("attentionSequence"),a(c)}function a(c){if(c===o)return n.consume(c),a;const d=n.exit("attentionSequence"),m=wQ(c),v=!m||m===2&&r||t.includes(c),M=!r||r===2&&m||t.includes(i);return d._open=!!(o===42?v:v&&(r||!M)),d._close=!!(o===42?M:M&&(m||!v)),e(c)}}function SQ(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const NBe={name:"autolink",tokenize:GBe};function GBe(n,e,t){let i=0;return r;function r(B){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(B),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),o}function o(B){return og(B)?(n.consume(B),s):B===64?t(B):d(B)}function s(B){return B===43||B===45||B===46||_f(B)?(i=1,a(B)):d(B)}function a(B){return B===58?(n.consume(B),i=0,c):(B===43||B===45||B===46||_f(B))&&i++<32?(n.consume(B),a):(i=0,d(B))}function c(B){return B===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(B),n.exit("autolinkMarker"),n.exit("autolink"),e):B===null||B===32||B===60||nP(B)?t(B):(n.consume(B),c)}function d(B){return B===64?(n.consume(B),m):IBe(B)?(n.consume(B),d):t(B)}function m(B){return _f(B)?v(B):t(B)}function v(B){return B===46?(n.consume(B),i=0,m):B===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(B),n.exit("autolinkMarker"),n.exit("autolink"),e):M(B)}function M(B){if((B===45||_f(B))&&i++<63){const P=B===45?M:v;return n.consume(B),P}return t(B)}}const GB={partial:!0,tokenize:WBe};function WBe(n,e,t){return i;function i(o){return ws(o)?Ua(n,r,"linePrefix")(o):r(o)}function r(o){return o===null||Sr(o)?e(o):t(o)}}const noe={continuation:{tokenize:qBe},exit:YBe,name:"blockQuote",tokenize:QBe};function QBe(n,e,t){const i=this;return r;function r(s){if(s===62){const a=i.containerState;return a.open||(n.enter("blockQuote",{_container:!0}),a.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(s),n.exit("blockQuoteMarker"),o}return t(s)}function o(s){return ws(s)?(n.enter("blockQuotePrefixWhitespace"),n.consume(s),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(s))}}function qBe(n,e,t){const i=this;return r;function r(s){return ws(s)?Ua(n,o,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):o(s)}function o(s){return n.attempt(noe,e,t)(s)}}function YBe(n){n.exit("blockQuote")}const ioe={name:"characterEscape",tokenize:VBe};function VBe(n,e,t){return i;function i(o){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(o),n.exit("escapeMarker"),r}function r(o){return kBe(o)?(n.enter("characterEscapeValue"),n.consume(o),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(o)}}const roe={name:"characterReference",tokenize:$Be};function $Be(n,e,t){const i=this;let r=0,o,s;return a;function a(v){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(v),n.exit("characterReferenceMarker"),c}function c(v){return v===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(v),n.exit("characterReferenceMarkerNumeric"),d):(n.enter("characterReferenceValue"),o=31,s=_f,m(v))}function d(v){return v===88||v===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(v),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),o=6,s=TBe,m):(n.enter("characterReferenceValue"),o=7,s=iP,m(v))}function m(v){if(v===59&&r){const M=n.exit("characterReferenceValue");return s===_f&&!pK(i.sliceSerialize(M))?t(v):(n.enter("characterReferenceMarker"),n.consume(v),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return s(v)&&r++<o?(n.consume(v),m):t(v)}}const EQ={partial:!0,tokenize:ZBe},BQ={concrete:!0,name:"codeFenced",tokenize:HBe};function HBe(n,e,t){const i=this,r={partial:!0,tokenize:ie};let o=0,s=0,a;return c;function c(te){return d(te)}function d(te){const q=i.events[i.events.length-1];return o=q&&q[1].type==="linePrefix"?q[2].sliceSerialize(q[1],!0).length:0,a=te,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),m(te)}function m(te){return te===a?(s++,n.consume(te),m):s<3?t(te):(n.exit("codeFencedFenceSequence"),ws(te)?Ua(n,v,"whitespace")(te):v(te))}function v(te){return te===null||Sr(te)?(n.exit("codeFencedFence"),i.interrupt?e(te):n.check(EQ,U,re)(te)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),M(te))}function M(te){return te===null||Sr(te)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),v(te)):ws(te)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),Ua(n,B,"whitespace")(te)):te===96&&te===a?t(te):(n.consume(te),M)}function B(te){return te===null||Sr(te)?v(te):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),P(te))}function P(te){return te===null||Sr(te)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),v(te)):te===96&&te===a?t(te):(n.consume(te),P)}function U(te){return n.attempt(r,re,z)(te)}function z(te){return n.enter("lineEnding"),n.consume(te),n.exit("lineEnding"),V}function V(te){return o>0&&ws(te)?Ua(n,Z,"linePrefix",o+1)(te):Z(te)}function Z(te){return te===null||Sr(te)?n.check(EQ,U,re)(te):(n.enter("codeFlowValue"),X(te))}function X(te){return te===null||Sr(te)?(n.exit("codeFlowValue"),Z(te)):(n.consume(te),X)}function re(te){return n.exit("codeFenced"),e(te)}function ie(te,q,le){let ce=0;return ve;function ve(Fe){return te.enter("lineEnding"),te.consume(Fe),te.exit("lineEnding"),ge}function ge(Fe){return te.enter("codeFencedFence"),ws(Fe)?Ua(te,Ee,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Fe):Ee(Fe)}function Ee(Fe){return Fe===a?(te.enter("codeFencedFenceSequence"),xe(Fe)):le(Fe)}function xe(Fe){return Fe===a?(ce++,te.consume(Fe),xe):ce>=s?(te.exit("codeFencedFenceSequence"),ws(Fe)?Ua(te,Te,"whitespace")(Fe):Te(Fe)):le(Fe)}function Te(Fe){return Fe===null||Sr(Fe)?(te.exit("codeFencedFence"),q(Fe)):le(Fe)}}}function ZBe(n,e,t){const i=this;return r;function r(s){return s===null?t(s):(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),o)}function o(s){return i.parser.lazy[i.now().line]?t(s):e(s)}}const LI={name:"codeIndented",tokenize:JBe},XBe={partial:!0,tokenize:eOe};function JBe(n,e,t){const i=this;return r;function r(d){return n.enter("codeIndented"),Ua(n,o,"linePrefix",5)(d)}function o(d){const m=i.events[i.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?s(d):t(d)}function s(d){return d===null?c(d):Sr(d)?n.attempt(XBe,s,c)(d):(n.enter("codeFlowValue"),a(d))}function a(d){return d===null||Sr(d)?(n.exit("codeFlowValue"),s(d)):(n.consume(d),a)}function c(d){return n.exit("codeIndented"),e(d)}}function eOe(n,e,t){const i=this;return r;function r(s){return i.parser.lazy[i.now().line]?t(s):Sr(s)?(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),r):Ua(n,o,"linePrefix",5)(s)}function o(s){const a=i.events[i.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(s):Sr(s)?r(s):t(s)}}const tOe={name:"codeText",previous:iOe,resolve:nOe,tokenize:rOe};function nOe(n){let e=n.length-4,t=3,i,r;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(i=t;++i<e;)if(n[i][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(i=t-1,e++;++i<=e;)r===void 0?i!==e&&n[i][1].type!=="lineEnding"&&(r=i):(i===e||n[i][1].type==="lineEnding")&&(n[r][1].type="codeTextData",i!==r+2&&(n[r][1].end=n[i-1][1].end,n.splice(r+2,i-r-2),e-=i-r-2,i=r+2),r=void 0);return n}function iOe(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function rOe(n,e,t){let i=0,r,o;return s;function s(v){return n.enter("codeText"),n.enter("codeTextSequence"),a(v)}function a(v){return v===96?(n.consume(v),i++,a):(n.exit("codeTextSequence"),c(v))}function c(v){return v===null?t(v):v===32?(n.enter("space"),n.consume(v),n.exit("space"),c):v===96?(o=n.enter("codeTextSequence"),r=0,m(v)):Sr(v)?(n.enter("lineEnding"),n.consume(v),n.exit("lineEnding"),c):(n.enter("codeTextData"),d(v))}function d(v){return v===null||v===32||v===96||Sr(v)?(n.exit("codeTextData"),c(v)):(n.consume(v),d)}function m(v){return v===96?(n.consume(v),r++,m):r===i?(n.exit("codeTextSequence"),n.exit("codeText"),e(v)):(o.type="codeTextData",d(v))}}class oOe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const i=t??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,t,i){const r=t||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&D3(this.left,i),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),D3(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),D3(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);D3(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);D3(this.left,t.reverse())}}}function D3(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function ooe(n){const e={};let t=-1,i,r,o,s,a,c,d;const m=new oOe(n);for(;++t<m.length;){for(;t in e;)t=e[t];if(i=m.get(t),t&&i[1].type==="chunkFlow"&&m.get(t-1)[1].type==="listItemPrefix"&&(c=i[1]._tokenizer.events,o=0,o<c.length&&c[o][1].type==="lineEndingBlank"&&(o+=2),o<c.length&&c[o][1].type==="content"))for(;++o<c.length&&c[o][1].type!=="content";)c[o][1].type==="chunkText"&&(c[o][1]._isInFirstContentOfListItem=!0,o++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,sOe(m,t)),t=e[t],d=!0);else if(i[1]._container){for(o=t,r=void 0;o--;)if(s=m.get(o),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(r&&(m.get(r)[1].type="lineEndingBlank"),s[1].type="lineEnding",r=o);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;r&&(i[1].end={...m.get(r)[1].start},a=m.slice(r,t),a.unshift(i),m.splice(r,t-r+1,a))}}return Sg(n,0,Number.POSITIVE_INFINITY,m.slice(0)),!d}function sOe(n,e){const t=n.get(e)[1],i=n.get(e)[2];let r=e-1;const o=[];let s=t._tokenizer;s||(s=i.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const a=s.events,c=[],d={};let m,v,M=-1,B=t,P=0,U=0;const z=[U];for(;B;){for(;n.get(++r)[1]!==B;);o.push(r),B._tokenizer||(m=i.sliceStream(B),B.next||m.push(null),v&&s.defineSkip(B.start),B._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(m),B._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),v=B,B=B.next}for(B=t;++M<a.length;)a[M][0]==="exit"&&a[M-1][0]==="enter"&&a[M][1].type===a[M-1][1].type&&a[M][1].start.line!==a[M][1].end.line&&(U=M+1,z.push(U),B._tokenizer=void 0,B.previous=void 0,B=B.next);for(s.events=[],B?(B._tokenizer=void 0,B.previous=void 0):z.pop(),M=z.length;M--;){const V=a.slice(z[M],z[M+1]),Z=o.pop();c.push([Z,Z+V.length-1]),n.splice(Z,2,V)}for(c.reverse(),M=-1;++M<c.length;)d[P+c[M][0]]=P+c[M][1],P+=c[M][1]-c[M][0]-1;return d}const aOe={resolve:uOe,tokenize:cOe},lOe={partial:!0,tokenize:AOe};function uOe(n){return ooe(n),n}function cOe(n,e){let t;return i;function i(a){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),r(a)}function r(a){return a===null?o(a):Sr(a)?n.check(lOe,s,o)(a):(n.consume(a),r)}function o(a){return n.exit("chunkContent"),n.exit("content"),e(a)}function s(a){return n.consume(a),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,r}}function AOe(n,e,t){const i=this;return r;function r(s){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),Ua(n,o,"linePrefix")}function o(s){if(s===null||Sr(s))return t(s);const a=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(s):n.interrupt(i.parser.constructs.flow,t,e)(s)}}function soe(n,e,t,i,r,o,s,a,c){const d=c||Number.POSITIVE_INFINITY;let m=0;return v;function v(V){return V===60?(n.enter(i),n.enter(r),n.enter(o),n.consume(V),n.exit(o),M):V===null||V===32||V===41||nP(V)?t(V):(n.enter(i),n.enter(s),n.enter(a),n.enter("chunkString",{contentType:"string"}),U(V))}function M(V){return V===62?(n.enter(o),n.consume(V),n.exit(o),n.exit(r),n.exit(i),e):(n.enter(a),n.enter("chunkString",{contentType:"string"}),B(V))}function B(V){return V===62?(n.exit("chunkString"),n.exit(a),M(V)):V===null||V===60||Sr(V)?t(V):(n.consume(V),V===92?P:B)}function P(V){return V===60||V===62||V===92?(n.consume(V),B):B(V)}function U(V){return!m&&(V===null||V===41||Od(V))?(n.exit("chunkString"),n.exit(a),n.exit(s),n.exit(i),e(V)):m<d&&V===40?(n.consume(V),m++,U):V===41?(n.consume(V),m--,U):V===null||V===32||V===40||nP(V)?t(V):(n.consume(V),V===92?z:U)}function z(V){return V===40||V===41||V===92?(n.consume(V),U):U(V)}}function aoe(n,e,t,i,r,o){const s=this;let a=0,c;return d;function d(B){return n.enter(i),n.enter(r),n.consume(B),n.exit(r),n.enter(o),m}function m(B){return a>999||B===null||B===91||B===93&&!c||B===94&&!a&&"_hiddenFootnoteSupport"in s.parser.constructs?t(B):B===93?(n.exit(o),n.enter(r),n.consume(B),n.exit(r),n.exit(i),e):Sr(B)?(n.enter("lineEnding"),n.consume(B),n.exit("lineEnding"),m):(n.enter("chunkString",{contentType:"string"}),v(B))}function v(B){return B===null||B===91||B===93||Sr(B)||a++>999?(n.exit("chunkString"),m(B)):(n.consume(B),c||(c=!ws(B)),B===92?M:v)}function M(B){return B===91||B===92||B===93?(n.consume(B),a++,v):v(B)}}function loe(n,e,t,i,r,o){let s;return a;function a(M){return M===34||M===39||M===40?(n.enter(i),n.enter(r),n.consume(M),n.exit(r),s=M===40?41:M,c):t(M)}function c(M){return M===s?(n.enter(r),n.consume(M),n.exit(r),n.exit(i),e):(n.enter(o),d(M))}function d(M){return M===s?(n.exit(o),c(s)):M===null?t(M):Sr(M)?(n.enter("lineEnding"),n.consume(M),n.exit("lineEnding"),Ua(n,d,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),m(M))}function m(M){return M===s||M===null||Sr(M)?(n.exit("chunkString"),d(M)):(n.consume(M),M===92?v:m)}function v(M){return M===s||M===92?(n.consume(M),m):m(M)}}function k4(n,e){let t;return i;function i(r){return Sr(r)?(n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),t=!0,i):ws(r)?Ua(n,i,t?"linePrefix":"lineSuffix")(r):e(r)}}const hOe={name:"definition",tokenize:fOe},dOe={partial:!0,tokenize:pOe};function fOe(n,e,t){const i=this;let r;return o;function o(B){return n.enter("definition"),s(B)}function s(B){return aoe.call(i,n,a,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(B)}function a(B){return r=e2(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),B===58?(n.enter("definitionMarker"),n.consume(B),n.exit("definitionMarker"),c):t(B)}function c(B){return Od(B)?k4(n,d)(B):d(B)}function d(B){return soe(n,m,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(B)}function m(B){return n.attempt(dOe,v,v)(B)}function v(B){return ws(B)?Ua(n,M,"whitespace")(B):M(B)}function M(B){return B===null||Sr(B)?(n.exit("definition"),i.parser.defined.push(r),e(B)):t(B)}}function pOe(n,e,t){return i;function i(a){return Od(a)?k4(n,r)(a):t(a)}function r(a){return loe(n,o,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function o(a){return ws(a)?Ua(n,s,"whitespace")(a):s(a)}function s(a){return a===null||Sr(a)?e(a):t(a)}}const mOe={name:"hardBreakEscape",tokenize:gOe};function gOe(n,e,t){return i;function i(o){return n.enter("hardBreakEscape"),n.consume(o),r}function r(o){return Sr(o)?(n.exit("hardBreakEscape"),e(o)):t(o)}}const yOe={name:"headingAtx",resolve:vOe,tokenize:bOe};function vOe(n,e){let t=n.length-2,i=3,r,o;return n[i][1].type==="whitespace"&&(i+=2),t-2>i&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(i===t-1||t-4>i&&n[t-2][1].type==="whitespace")&&(t-=i+1===t?2:4),t>i&&(r={type:"atxHeadingText",start:n[i][1].start,end:n[t][1].end},o={type:"chunkText",start:n[i][1].start,end:n[t][1].end,contentType:"text"},Sg(n,i,t-i+1,[["enter",r,e],["enter",o,e],["exit",o,e],["exit",r,e]])),n}function bOe(n,e,t){let i=0;return r;function r(m){return n.enter("atxHeading"),o(m)}function o(m){return n.enter("atxHeadingSequence"),s(m)}function s(m){return m===35&&i++<6?(n.consume(m),s):m===null||Od(m)?(n.exit("atxHeadingSequence"),a(m)):t(m)}function a(m){return m===35?(n.enter("atxHeadingSequence"),c(m)):m===null||Sr(m)?(n.exit("atxHeading"),e(m)):ws(m)?Ua(n,a,"whitespace")(m):(n.enter("atxHeadingText"),d(m))}function c(m){return m===35?(n.consume(m),c):(n.exit("atxHeadingSequence"),a(m))}function d(m){return m===null||m===35||Od(m)?(n.exit("atxHeadingText"),a(m)):(n.consume(m),d)}}const COe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],OQ=["pre","script","style","textarea"],_Oe={concrete:!0,name:"htmlFlow",resolveTo:wOe,tokenize:SOe},xOe={partial:!0,tokenize:BOe},MOe={partial:!0,tokenize:EOe};function wOe(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function SOe(n,e,t){const i=this;let r,o,s,a,c;return d;function d(Re){return m(Re)}function m(Re){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(Re),v}function v(Re){return Re===33?(n.consume(Re),M):Re===47?(n.consume(Re),o=!0,U):Re===63?(n.consume(Re),r=3,i.interrupt?e:Ue):og(Re)?(n.consume(Re),s=String.fromCharCode(Re),z):t(Re)}function M(Re){return Re===45?(n.consume(Re),r=2,B):Re===91?(n.consume(Re),r=5,a=0,P):og(Re)?(n.consume(Re),r=4,i.interrupt?e:Ue):t(Re)}function B(Re){return Re===45?(n.consume(Re),i.interrupt?e:Ue):t(Re)}function P(Re){const St="CDATA[";return Re===St.charCodeAt(a++)?(n.consume(Re),a===St.length?i.interrupt?e:Ee:P):t(Re)}function U(Re){return og(Re)?(n.consume(Re),s=String.fromCharCode(Re),z):t(Re)}function z(Re){if(Re===null||Re===47||Re===62||Od(Re)){const St=Re===47,ut=s.toLowerCase();return!St&&!o&&OQ.includes(ut)?(r=1,i.interrupt?e(Re):Ee(Re)):COe.includes(s.toLowerCase())?(r=6,St?(n.consume(Re),V):i.interrupt?e(Re):Ee(Re)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?t(Re):o?Z(Re):X(Re))}return Re===45||_f(Re)?(n.consume(Re),s+=String.fromCharCode(Re),z):t(Re)}function V(Re){return Re===62?(n.consume(Re),i.interrupt?e:Ee):t(Re)}function Z(Re){return ws(Re)?(n.consume(Re),Z):ve(Re)}function X(Re){return Re===47?(n.consume(Re),ve):Re===58||Re===95||og(Re)?(n.consume(Re),re):ws(Re)?(n.consume(Re),X):ve(Re)}function re(Re){return Re===45||Re===46||Re===58||Re===95||_f(Re)?(n.consume(Re),re):ie(Re)}function ie(Re){return Re===61?(n.consume(Re),te):ws(Re)?(n.consume(Re),ie):X(Re)}function te(Re){return Re===null||Re===60||Re===61||Re===62||Re===96?t(Re):Re===34||Re===39?(n.consume(Re),c=Re,q):ws(Re)?(n.consume(Re),te):le(Re)}function q(Re){return Re===c?(n.consume(Re),c=null,ce):Re===null||Sr(Re)?t(Re):(n.consume(Re),q)}function le(Re){return Re===null||Re===34||Re===39||Re===47||Re===60||Re===61||Re===62||Re===96||Od(Re)?ie(Re):(n.consume(Re),le)}function ce(Re){return Re===47||Re===62||ws(Re)?X(Re):t(Re)}function ve(Re){return Re===62?(n.consume(Re),ge):t(Re)}function ge(Re){return Re===null||Sr(Re)?Ee(Re):ws(Re)?(n.consume(Re),ge):t(Re)}function Ee(Re){return Re===45&&r===2?(n.consume(Re),Ie):Re===60&&r===1?(n.consume(Re),Ye):Re===62&&r===4?(n.consume(Re),De):Re===63&&r===3?(n.consume(Re),Ue):Re===93&&r===5?(n.consume(Re),mt):Sr(Re)&&(r===6||r===7)?(n.exit("htmlFlowData"),n.check(xOe,Ge,xe)(Re)):Re===null||Sr(Re)?(n.exit("htmlFlowData"),xe(Re)):(n.consume(Re),Ee)}function xe(Re){return n.check(MOe,Te,Ge)(Re)}function Te(Re){return n.enter("lineEnding"),n.consume(Re),n.exit("lineEnding"),Fe}function Fe(Re){return Re===null||Sr(Re)?xe(Re):(n.enter("htmlFlowData"),Ee(Re))}function Ie(Re){return Re===45?(n.consume(Re),Ue):Ee(Re)}function Ye(Re){return Re===47?(n.consume(Re),s="",At):Ee(Re)}function At(Re){if(Re===62){const St=s.toLowerCase();return OQ.includes(St)?(n.consume(Re),De):Ee(Re)}return og(Re)&&s.length<8?(n.consume(Re),s+=String.fromCharCode(Re),At):Ee(Re)}function mt(Re){return Re===93?(n.consume(Re),Ue):Ee(Re)}function Ue(Re){return Re===62?(n.consume(Re),De):Re===45&&r===2?(n.consume(Re),Ue):Ee(Re)}function De(Re){return Re===null||Sr(Re)?(n.exit("htmlFlowData"),Ge(Re)):(n.consume(Re),De)}function Ge(Re){return n.exit("htmlFlow"),e(Re)}}function EOe(n,e,t){const i=this;return r;function r(s){return Sr(s)?(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),o):t(s)}function o(s){return i.parser.lazy[i.now().line]?t(s):e(s)}}function BOe(n,e,t){return i;function i(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),n.attempt(GB,e,t)}}const OOe={name:"htmlText",tokenize:IOe};function IOe(n,e,t){const i=this;let r,o,s;return a;function a(Ue){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(Ue),c}function c(Ue){return Ue===33?(n.consume(Ue),d):Ue===47?(n.consume(Ue),ie):Ue===63?(n.consume(Ue),X):og(Ue)?(n.consume(Ue),le):t(Ue)}function d(Ue){return Ue===45?(n.consume(Ue),m):Ue===91?(n.consume(Ue),o=0,P):og(Ue)?(n.consume(Ue),Z):t(Ue)}function m(Ue){return Ue===45?(n.consume(Ue),B):t(Ue)}function v(Ue){return Ue===null?t(Ue):Ue===45?(n.consume(Ue),M):Sr(Ue)?(s=v,Ye(Ue)):(n.consume(Ue),v)}function M(Ue){return Ue===45?(n.consume(Ue),B):v(Ue)}function B(Ue){return Ue===62?Ie(Ue):Ue===45?M(Ue):v(Ue)}function P(Ue){const De="CDATA[";return Ue===De.charCodeAt(o++)?(n.consume(Ue),o===De.length?U:P):t(Ue)}function U(Ue){return Ue===null?t(Ue):Ue===93?(n.consume(Ue),z):Sr(Ue)?(s=U,Ye(Ue)):(n.consume(Ue),U)}function z(Ue){return Ue===93?(n.consume(Ue),V):U(Ue)}function V(Ue){return Ue===62?Ie(Ue):Ue===93?(n.consume(Ue),V):U(Ue)}function Z(Ue){return Ue===null||Ue===62?Ie(Ue):Sr(Ue)?(s=Z,Ye(Ue)):(n.consume(Ue),Z)}function X(Ue){return Ue===null?t(Ue):Ue===63?(n.consume(Ue),re):Sr(Ue)?(s=X,Ye(Ue)):(n.consume(Ue),X)}function re(Ue){return Ue===62?Ie(Ue):X(Ue)}function ie(Ue){return og(Ue)?(n.consume(Ue),te):t(Ue)}function te(Ue){return Ue===45||_f(Ue)?(n.consume(Ue),te):q(Ue)}function q(Ue){return Sr(Ue)?(s=q,Ye(Ue)):ws(Ue)?(n.consume(Ue),q):Ie(Ue)}function le(Ue){return Ue===45||_f(Ue)?(n.consume(Ue),le):Ue===47||Ue===62||Od(Ue)?ce(Ue):t(Ue)}function ce(Ue){return Ue===47?(n.consume(Ue),Ie):Ue===58||Ue===95||og(Ue)?(n.consume(Ue),ve):Sr(Ue)?(s=ce,Ye(Ue)):ws(Ue)?(n.consume(Ue),ce):Ie(Ue)}function ve(Ue){return Ue===45||Ue===46||Ue===58||Ue===95||_f(Ue)?(n.consume(Ue),ve):ge(Ue)}function ge(Ue){return Ue===61?(n.consume(Ue),Ee):Sr(Ue)?(s=ge,Ye(Ue)):ws(Ue)?(n.consume(Ue),ge):ce(Ue)}function Ee(Ue){return Ue===null||Ue===60||Ue===61||Ue===62||Ue===96?t(Ue):Ue===34||Ue===39?(n.consume(Ue),r=Ue,xe):Sr(Ue)?(s=Ee,Ye(Ue)):ws(Ue)?(n.consume(Ue),Ee):(n.consume(Ue),Te)}function xe(Ue){return Ue===r?(n.consume(Ue),r=void 0,Fe):Ue===null?t(Ue):Sr(Ue)?(s=xe,Ye(Ue)):(n.consume(Ue),xe)}function Te(Ue){return Ue===null||Ue===34||Ue===39||Ue===60||Ue===61||Ue===96?t(Ue):Ue===47||Ue===62||Od(Ue)?ce(Ue):(n.consume(Ue),Te)}function Fe(Ue){return Ue===47||Ue===62||Od(Ue)?ce(Ue):t(Ue)}function Ie(Ue){return Ue===62?(n.consume(Ue),n.exit("htmlTextData"),n.exit("htmlText"),e):t(Ue)}function Ye(Ue){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(Ue),n.exit("lineEnding"),At}function At(Ue){return ws(Ue)?Ua(n,mt,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Ue):mt(Ue)}function mt(Ue){return n.enter("htmlTextData"),s(Ue)}}const gK={name:"labelEnd",resolveAll:ROe,resolveTo:POe,tokenize:LOe},TOe={tokenize:UOe},kOe={tokenize:KOe},DOe={tokenize:FOe};function ROe(n){let e=-1;const t=[];for(;++e<n.length;){const i=n[e][1];if(t.push(n[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",e+=r}}return n.length!==t.length&&Sg(n,0,n.length,t),n}function POe(n,e){let t=n.length,i=0,r,o,s,a;for(;t--;)if(r=n[t][1],o){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;n[t][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(s){if(n[t][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(o=t,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(s=t);const c={type:n[o][1].type==="labelLink"?"link":"image",start:{...n[o][1].start},end:{...n[n.length-1][1].end}},d={type:"label",start:{...n[o][1].start},end:{...n[s][1].end}},m={type:"labelText",start:{...n[o+i+2][1].end},end:{...n[s-2][1].start}};return a=[["enter",c,e],["enter",d,e]],a=fp(a,n.slice(o+1,o+i+3)),a=fp(a,[["enter",m,e]]),a=fp(a,mK(e.parser.constructs.insideSpan.null,n.slice(o+i+4,s-3),e)),a=fp(a,[["exit",m,e],n[s-2],n[s-1],["exit",d,e]]),a=fp(a,n.slice(s+1)),a=fp(a,[["exit",c,e]]),Sg(n,o,n.length,a),n}function LOe(n,e,t){const i=this;let r=i.events.length,o,s;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){o=i.events[r][1];break}return a;function a(M){return o?o._inactive?v(M):(s=i.parser.defined.includes(e2(i.sliceSerialize({start:o.end,end:i.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(M),n.exit("labelMarker"),n.exit("labelEnd"),c):t(M)}function c(M){return M===40?n.attempt(TOe,m,s?m:v)(M):M===91?n.attempt(kOe,m,s?d:v)(M):s?m(M):v(M)}function d(M){return n.attempt(DOe,m,v)(M)}function m(M){return e(M)}function v(M){return o._balanced=!0,t(M)}}function UOe(n,e,t){return i;function i(v){return n.enter("resource"),n.enter("resourceMarker"),n.consume(v),n.exit("resourceMarker"),r}function r(v){return Od(v)?k4(n,o)(v):o(v)}function o(v){return v===41?m(v):soe(n,s,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(v)}function s(v){return Od(v)?k4(n,c)(v):m(v)}function a(v){return t(v)}function c(v){return v===34||v===39||v===40?loe(n,d,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(v):m(v)}function d(v){return Od(v)?k4(n,m)(v):m(v)}function m(v){return v===41?(n.enter("resourceMarker"),n.consume(v),n.exit("resourceMarker"),n.exit("resource"),e):t(v)}}function KOe(n,e,t){const i=this;return r;function r(a){return aoe.call(i,n,o,s,"reference","referenceMarker","referenceString")(a)}function o(a){return i.parser.defined.includes(e2(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(a):t(a)}function s(a){return t(a)}}function FOe(n,e,t){return i;function i(o){return n.enter("reference"),n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),r}function r(o){return o===93?(n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),n.exit("reference"),e):t(o)}}const zOe={name:"labelStartImage",resolveAll:gK.resolveAll,tokenize:jOe};function jOe(n,e,t){const i=this;return r;function r(a){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(a),n.exit("labelImageMarker"),o}function o(a){return a===91?(n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelImage"),s):t(a)}function s(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(a):e(a)}}const NOe={name:"labelStartLink",resolveAll:gK.resolveAll,tokenize:GOe};function GOe(n,e,t){const i=this;return r;function r(s){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(s),n.exit("labelMarker"),n.exit("labelLink"),o}function o(s){return s===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(s):e(s)}}const UI={name:"lineEnding",tokenize:WOe};function WOe(n,e){return t;function t(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),Ua(n,e,"linePrefix")}}const LS={name:"thematicBreak",tokenize:QOe};function QOe(n,e,t){let i=0,r;return o;function o(d){return n.enter("thematicBreak"),s(d)}function s(d){return r=d,a(d)}function a(d){return d===r?(n.enter("thematicBreakSequence"),c(d)):i>=3&&(d===null||Sr(d))?(n.exit("thematicBreak"),e(d)):t(d)}function c(d){return d===r?(n.consume(d),i++,c):(n.exit("thematicBreakSequence"),ws(d)?Ua(n,a,"whitespace")(d):a(d))}}const gd={continuation:{tokenize:$Oe},exit:ZOe,name:"list",tokenize:VOe},qOe={partial:!0,tokenize:XOe},YOe={partial:!0,tokenize:HOe};function VOe(n,e,t){const i=this,r=i.events[i.events.length-1];let o=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,s=0;return a;function a(B){const P=i.containerState.type||(B===42||B===43||B===45?"listUnordered":"listOrdered");if(P==="listUnordered"?!i.containerState.marker||B===i.containerState.marker:iP(B)){if(i.containerState.type||(i.containerState.type=P,n.enter(P,{_container:!0})),P==="listUnordered")return n.enter("listItemPrefix"),B===42||B===45?n.check(LS,t,d)(B):d(B);if(!i.interrupt||B===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),c(B)}return t(B)}function c(B){return iP(B)&&++s<10?(n.consume(B),c):(!i.interrupt||s<2)&&(i.containerState.marker?B===i.containerState.marker:B===41||B===46)?(n.exit("listItemValue"),d(B)):t(B)}function d(B){return n.enter("listItemMarker"),n.consume(B),n.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||B,n.check(GB,i.interrupt?t:m,n.attempt(qOe,M,v))}function m(B){return i.containerState.initialBlankLine=!0,o++,M(B)}function v(B){return ws(B)?(n.enter("listItemPrefixWhitespace"),n.consume(B),n.exit("listItemPrefixWhitespace"),M):t(B)}function M(B){return i.containerState.size=o+i.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(B)}}function $Oe(n,e,t){const i=this;return i.containerState._closeFlow=void 0,n.check(GB,r,o);function r(a){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,Ua(n,e,"listItemIndent",i.containerState.size+1)(a)}function o(a){return i.containerState.furtherBlankLines||!ws(a)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,s(a)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,n.attempt(YOe,e,s)(a))}function s(a){return i.containerState._closeFlow=!0,i.interrupt=void 0,Ua(n,n.attempt(gd,e,t),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function HOe(n,e,t){const i=this;return Ua(n,r,"listItemIndent",i.containerState.size+1);function r(o){const s=i.events[i.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===i.containerState.size?e(o):t(o)}}function ZOe(n){n.exit(this.containerState.type)}function XOe(n,e,t){const i=this;return Ua(n,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(o){const s=i.events[i.events.length-1];return!ws(o)&&s&&s[1].type==="listItemPrefixWhitespace"?e(o):t(o)}}const IQ={name:"setextUnderline",resolveTo:JOe,tokenize:e8e};function JOe(n,e){let t=n.length,i,r,o;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){i=t;break}n[t][1].type==="paragraph"&&(r=t)}else n[t][1].type==="content"&&n.splice(t,1),!o&&n[t][1].type==="definition"&&(o=t);const s={type:"setextHeading",start:{...n[i][1].start},end:{...n[n.length-1][1].end}};return n[r][1].type="setextHeadingText",o?(n.splice(r,0,["enter",s,e]),n.splice(o+1,0,["exit",n[i][1],e]),n[i][1].end={...n[o][1].end}):n[i][1]=s,n.push(["exit",s,e]),n}function e8e(n,e,t){const i=this;let r;return o;function o(d){let m=i.events.length,v;for(;m--;)if(i.events[m][1].type!=="lineEnding"&&i.events[m][1].type!=="linePrefix"&&i.events[m][1].type!=="content"){v=i.events[m][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||v)?(n.enter("setextHeadingLine"),r=d,s(d)):t(d)}function s(d){return n.enter("setextHeadingLineSequence"),a(d)}function a(d){return d===r?(n.consume(d),a):(n.exit("setextHeadingLineSequence"),ws(d)?Ua(n,c,"lineSuffix")(d):c(d))}function c(d){return d===null||Sr(d)?(n.exit("setextHeadingLine"),e(d)):t(d)}}const t8e={tokenize:n8e};function n8e(n){const e=this,t=n.attempt(GB,i,n.attempt(this.parser.constructs.flowInitial,r,Ua(n,n.attempt(this.parser.constructs.flow,r,n.attempt(aOe,r)),"linePrefix")));return t;function i(o){if(o===null){n.consume(o);return}return n.enter("lineEndingBlank"),n.consume(o),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function r(o){if(o===null){n.consume(o);return}return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const i8e={resolveAll:coe()},r8e=uoe("string"),o8e=uoe("text");function uoe(n){return{resolveAll:coe(n==="text"?s8e:void 0),tokenize:e};function e(t){const i=this,r=this.parser.constructs[n],o=t.attempt(r,s,a);return s;function s(m){return d(m)?o(m):a(m)}function a(m){if(m===null){t.consume(m);return}return t.enter("data"),t.consume(m),c}function c(m){return d(m)?(t.exit("data"),o(m)):(t.consume(m),c)}function d(m){if(m===null)return!0;const v=r[m];let M=-1;if(v)for(;++M<v.length;){const B=v[M];if(!B.previous||B.previous.call(i,i.previous))return!0}return!1}}}function coe(n){return e;function e(t,i){let r=-1,o;for(;++r<=t.length;)o===void 0?t[r]&&t[r][1].type==="data"&&(o=r,r++):(!t[r]||t[r][1].type!=="data")&&(r!==o+2&&(t[o][1].end=t[r-1][1].end,t.splice(o+2,r-o-2),r=o+2),o=void 0);return n?n(t,i):t}}function s8e(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const i=n[t-1][1],r=e.sliceStream(i);let o=r.length,s=-1,a=0,c;for(;o--;){const d=r[o];if(typeof d=="string"){for(s=d.length;d.charCodeAt(s-1)===32;)a++,s--;if(s)break;s=-1}else if(d===-2)c=!0,a++;else if(d!==-1){o++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(a=0),a){const d={type:t===n.length||c||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?s:i.start._bufferIndex+s,_index:i.start._index+o,line:i.end.line,column:i.end.column-a,offset:i.end.offset-a},end:{...i.end}};i.end={...d.start},i.start.offset===i.end.offset?Object.assign(i,d):(n.splice(t,0,["enter",d,e],["exit",d,e]),t+=2)}t++}return n}const a8e={42:gd,43:gd,45:gd,48:gd,49:gd,50:gd,51:gd,52:gd,53:gd,54:gd,55:gd,56:gd,57:gd,62:noe},l8e={91:hOe},u8e={[-2]:LI,[-1]:LI,32:LI},c8e={35:yOe,42:LS,45:[IQ,LS],60:_Oe,61:IQ,95:LS,96:BQ,126:BQ},A8e={38:roe,92:ioe},h8e={[-5]:UI,[-4]:UI,[-3]:UI,33:zOe,38:roe,42:rP,60:[NBe,OOe],91:NOe,92:[mOe,ioe],93:gK,95:rP,96:tOe},d8e={null:[rP,i8e]},f8e={null:[42,95]},p8e={null:[]},m8e=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:f8e,contentInitial:l8e,disable:p8e,document:a8e,flow:c8e,flowInitial:u8e,insideSpan:d8e,string:A8e,text:h8e},Symbol.toStringTag,{value:"Module"}));function g8e(n,e,t){let i={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const r={},o=[];let s=[],a=[];const c={attempt:q(ie),check:q(te),consume:Z,enter:X,exit:re,interrupt:q(te,{interrupt:!0})},d={code:null,containerState:{},defineSkip:U,events:[],now:P,parser:n,previous:null,sliceSerialize:M,sliceStream:B,write:v};let m=e.tokenize.call(d,c);return e.resolveAll&&o.push(e),d;function v(ge){return s=fp(s,ge),z(),s[s.length-1]!==null?[]:(le(e,0),d.events=mK(o,d.events,d),d.events)}function M(ge,Ee){return v8e(B(ge),Ee)}function B(ge){return y8e(s,ge)}function P(){const{_bufferIndex:ge,_index:Ee,line:xe,column:Te,offset:Fe}=i;return{_bufferIndex:ge,_index:Ee,line:xe,column:Te,offset:Fe}}function U(ge){r[ge.line]=ge.column,ve()}function z(){let ge;for(;i._index<s.length;){const Ee=s[i._index];if(typeof Ee=="string")for(ge=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===ge&&i._bufferIndex<Ee.length;)V(Ee.charCodeAt(i._bufferIndex));else V(Ee)}}function V(ge){m=m(ge)}function Z(ge){Sr(ge)?(i.line++,i.column=1,i.offset+=ge===-3?2:1,ve()):ge!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===s[i._index].length&&(i._bufferIndex=-1,i._index++)),d.previous=ge}function X(ge,Ee){const xe=Ee||{};return xe.type=ge,xe.start=P(),d.events.push(["enter",xe,d]),a.push(xe),xe}function re(ge){const Ee=a.pop();return Ee.end=P(),d.events.push(["exit",Ee,d]),Ee}function ie(ge,Ee){le(ge,Ee.from)}function te(ge,Ee){Ee.restore()}function q(ge,Ee){return xe;function xe(Te,Fe,Ie){let Ye,At,mt,Ue;return Array.isArray(Te)?Ge(Te):"tokenize"in Te?Ge([Te]):De(Te);function De(kt){return Ut;function Ut(Le){const ke=Le!==null&&kt[Le],Oe=Le!==null&&kt.null,Ze=[...Array.isArray(ke)?ke:ke?[ke]:[],...Array.isArray(Oe)?Oe:Oe?[Oe]:[]];return Ge(Ze)(Le)}}function Ge(kt){return Ye=kt,At=0,kt.length===0?Ie:Re(kt[At])}function Re(kt){return Ut;function Ut(Le){return Ue=ce(),mt=kt,kt.partial||(d.currentConstruct=kt),kt.name&&d.parser.constructs.disable.null.includes(kt.name)?ut():kt.tokenize.call(Ee?Object.assign(Object.create(d),Ee):d,c,St,ut)(Le)}}function St(kt){return ge(mt,Ue),Fe}function ut(kt){return Ue.restore(),++At<Ye.length?Re(Ye[At]):Ie}}}function le(ge,Ee){ge.resolveAll&&!o.includes(ge)&&o.push(ge),ge.resolve&&Sg(d.events,Ee,d.events.length-Ee,ge.resolve(d.events.slice(Ee),d)),ge.resolveTo&&(d.events=ge.resolveTo(d.events,d))}function ce(){const ge=P(),Ee=d.previous,xe=d.currentConstruct,Te=d.events.length,Fe=Array.from(a);return{from:Te,restore:Ie};function Ie(){i=ge,d.previous=Ee,d.currentConstruct=xe,d.events.length=Te,a=Fe,ve()}}function ve(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function y8e(n,e){const t=e.start._index,i=e.start._bufferIndex,r=e.end._index,o=e.end._bufferIndex;let s;if(t===r)s=[n[t].slice(i,o)];else{if(s=n.slice(t,r),i>-1){const a=s[0];typeof a=="string"?s[0]=a.slice(i):s.shift()}o>0&&s.push(n[r].slice(0,o))}return s}function v8e(n,e){let t=-1;const i=[];let r;for(;++t<n.length;){const o=n[t];let s;if(typeof o=="string")s=o;else switch(o){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=e?" ":"	";break}case-1:{if(!e&&r)continue;s=" ";break}default:s=String.fromCharCode(o)}r=o===-2,i.push(s)}return i.join("")}function b8e(n){const i={constructs:EBe([m8e,...(n||{}).extensions||[]]),content:r(PBe),defined:[],document:r(UBe),flow:r(t8e),lazy:{},string:r(r8e),text:r(o8e)};return i;function r(o){return s;function s(a){return g8e(i,o,a)}}}function C8e(n){for(;!ooe(n););return n}const TQ=/[\0\t\n\r]/g;function _8e(){let n=1,e="",t=!0,i;return r;function r(o,s,a){const c=[];let d,m,v,M,B;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(s||void 0).decode(o)),v=0,e="",t&&(o.charCodeAt(0)===65279&&v++,t=void 0);v<o.length;){if(TQ.lastIndex=v,d=TQ.exec(o),M=d&&d.index!==void 0?d.index:o.length,B=o.charCodeAt(M),!d){e=o.slice(v);break}if(B===10&&v===M&&i)c.push(-3),i=void 0;else switch(i&&(c.push(-5),i=void 0),v<M&&(c.push(o.slice(v,M)),n+=M-v),B){case 0:{c.push(65533),n++;break}case 9:{for(m=Math.ceil(n/4)*4,c.push(-2);n++<m;)c.push(-1);break}case 10:{c.push(-4),n=1;break}default:i=!0,n=1}v=M+1}return a&&(i&&c.push(-5),e&&c.push(e),c.push(null)),c}}const x8e=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function M8e(n){return n.replace(x8e,w8e)}function w8e(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const r=t.charCodeAt(1),o=r===120||r===88;return toe(t.slice(o?2:1),o?16:10)}return pK(t)||n}const Aoe={}.hasOwnProperty;function S8e(n,e,t){return typeof e!="string"&&(t=e,e=void 0),E8e(t)(C8e(b8e(t).document().write(_8e()(n,e,!0))))}function E8e(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Nn),autolinkProtocol:ce,autolinkEmail:ce,atxHeading:o(Kt),blockQuote:o(Oe),characterEscape:ce,characterReference:ce,codeFenced:o(Ze),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:o(Ze,s),codeText:o(bt,s),codeTextData:ce,data:ce,codeFlowValue:ce,definition:o(yt),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:o(Mt),hardBreakEscape:o(Dt),hardBreakTrailing:o(Dt),htmlFlow:o(en,s),htmlFlowData:ce,htmlText:o(en,s),htmlTextData:ce,image:o(Gn),label:s,link:o(Nn),listItem:o(Un),listItemValue:M,listOrdered:o(Si,v),listUnordered:o(Si),paragraph:o(Ln),reference:Re,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:o(Kt),strong:o(Tn),thematicBreak:o(Bn)},exit:{atxHeading:c(),atxHeadingSequence:ie,autolink:c(),autolinkEmail:ke,autolinkProtocol:Le,blockQuote:c(),characterEscapeValue:ve,characterReferenceMarkerHexadecimal:ut,characterReferenceMarkerNumeric:ut,characterReferenceValue:kt,characterReference:Ut,codeFenced:c(z),codeFencedFence:U,codeFencedFenceInfo:B,codeFencedFenceMeta:P,codeFlowValue:ve,codeIndented:c(V),codeText:c(Fe),codeTextData:ve,data:ve,definition:c(),definitionDestinationString:re,definitionLabelString:Z,definitionTitleString:X,emphasis:c(),hardBreakEscape:c(Ee),hardBreakTrailing:c(Ee),htmlFlow:c(xe),htmlFlowData:ve,htmlText:c(Te),htmlTextData:ve,image:c(Ye),label:mt,labelText:At,lineEnding:ge,link:c(Ie),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:St,resourceDestinationString:Ue,resourceTitleString:De,resource:Ge,setextHeading:c(le),setextHeadingLineSequence:q,setextHeadingText:te,strong:c(),thematicBreak:c()}};hoe(e,(n||{}).mdastExtensions||[]);const t={};return i;function i(je){let H={type:"root",children:[]};const j={stack:[H],tokenStack:[],config:e,enter:a,exit:d,buffer:s,resume:m,data:t},Q=[];let he=-1;for(;++he<je.length;)if(je[he][1].type==="listOrdered"||je[he][1].type==="listUnordered")if(je[he][0]==="enter")Q.push(he);else{const Me=Q.pop();he=r(je,Me,he)}for(he=-1;++he<je.length;){const Me=e[je[he][0]];Aoe.call(Me,je[he][1].type)&&Me[je[he][1].type].call(Object.assign({sliceSerialize:je[he][2].sliceSerialize},j),je[he][1])}if(j.tokenStack.length>0){const Me=j.tokenStack[j.tokenStack.length-1];(Me[1]||kQ).call(j,void 0,Me[0])}for(H.position={start:Jy(je.length>0?je[0][1].start:{line:1,column:1,offset:0}),end:Jy(je.length>0?je[je.length-2][1].end:{line:1,column:1,offset:0})},he=-1;++he<e.transforms.length;)H=e.transforms[he](H)||H;return H}function r(je,H,j){let Q=H-1,he=-1,Me=!1,Ne,Qe,it,vt;for(;++Q<=j;){const $e=je[Q];switch($e[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{$e[0]==="enter"?he++:he--,vt=void 0;break}case"lineEndingBlank":{$e[0]==="enter"&&(Ne&&!vt&&!he&&!it&&(it=Q),vt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:vt=void 0}if(!he&&$e[0]==="enter"&&$e[1].type==="listItemPrefix"||he===-1&&$e[0]==="exit"&&($e[1].type==="listUnordered"||$e[1].type==="listOrdered")){if(Ne){let ot=Q;for(Qe=void 0;ot--;){const b=je[ot];if(b[1].type==="lineEnding"||b[1].type==="lineEndingBlank"){if(b[0]==="exit")continue;Qe&&(je[Qe][1].type="lineEndingBlank",Me=!0),b[1].type="lineEnding",Qe=ot}else if(!(b[1].type==="linePrefix"||b[1].type==="blockQuotePrefix"||b[1].type==="blockQuotePrefixWhitespace"||b[1].type==="blockQuoteMarker"||b[1].type==="listItemIndent"))break}it&&(!Qe||it<Qe)&&(Ne._spread=!0),Ne.end=Object.assign({},Qe?je[Qe][1].start:$e[1].end),je.splice(Qe||Q,0,["exit",Ne,$e[2]]),Q++,j++}if($e[1].type==="listItemPrefix"){const ot={type:"listItem",_spread:!1,start:Object.assign({},$e[1].start),end:void 0};Ne=ot,je.splice(Q,0,["enter",ot,$e[2]]),Q++,j++,it=void 0,vt=!0}}}return je[H][1]._spread=Me,j}function o(je,H){return j;function j(Q){a.call(this,je(Q),Q),H&&H.call(this,Q)}}function s(){this.stack.push({type:"fragment",children:[]})}function a(je,H,j){this.stack[this.stack.length-1].children.push(je),this.stack.push(je),this.tokenStack.push([H,j||void 0]),je.position={start:Jy(H.start),end:void 0}}function c(je){return H;function H(j){je&&je.call(this,j),d.call(this,j)}}function d(je,H){const j=this.stack.pop(),Q=this.tokenStack.pop();if(Q)Q[0].type!==je.type&&(H?H.call(this,je,Q[0]):(Q[1]||kQ).call(this,je,Q[0]));else throw new Error("Cannot close `"+je.type+"` ("+T4({start:je.start,end:je.end})+"): its not open");j.position.end=Jy(je.end)}function m(){return wBe(this.stack.pop())}function v(){this.data.expectingFirstListItemValue=!0}function M(je){if(this.data.expectingFirstListItemValue){const H=this.stack[this.stack.length-2];H.start=Number.parseInt(this.sliceSerialize(je),10),this.data.expectingFirstListItemValue=void 0}}function B(){const je=this.resume(),H=this.stack[this.stack.length-1];H.lang=je}function P(){const je=this.resume(),H=this.stack[this.stack.length-1];H.meta=je}function U(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function z(){const je=this.resume(),H=this.stack[this.stack.length-1];H.value=je.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function V(){const je=this.resume(),H=this.stack[this.stack.length-1];H.value=je.replace(/(\r?\n|\r)$/g,"")}function Z(je){const H=this.resume(),j=this.stack[this.stack.length-1];j.label=H,j.identifier=e2(this.sliceSerialize(je)).toLowerCase()}function X(){const je=this.resume(),H=this.stack[this.stack.length-1];H.title=je}function re(){const je=this.resume(),H=this.stack[this.stack.length-1];H.url=je}function ie(je){const H=this.stack[this.stack.length-1];if(!H.depth){const j=this.sliceSerialize(je).length;H.depth=j}}function te(){this.data.setextHeadingSlurpLineEnding=!0}function q(je){const H=this.stack[this.stack.length-1];H.depth=this.sliceSerialize(je).codePointAt(0)===61?1:2}function le(){this.data.setextHeadingSlurpLineEnding=void 0}function ce(je){const j=this.stack[this.stack.length-1].children;let Q=j[j.length-1];(!Q||Q.type!=="text")&&(Q=ti(),Q.position={start:Jy(je.start),end:void 0},j.push(Q)),this.stack.push(Q)}function ve(je){const H=this.stack.pop();H.value+=this.sliceSerialize(je),H.position.end=Jy(je.end)}function ge(je){const H=this.stack[this.stack.length-1];if(this.data.atHardBreak){const j=H.children[H.children.length-1];j.position.end=Jy(je.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(H.type)&&(ce.call(this,je),ve.call(this,je))}function Ee(){this.data.atHardBreak=!0}function xe(){const je=this.resume(),H=this.stack[this.stack.length-1];H.value=je}function Te(){const je=this.resume(),H=this.stack[this.stack.length-1];H.value=je}function Fe(){const je=this.resume(),H=this.stack[this.stack.length-1];H.value=je}function Ie(){const je=this.stack[this.stack.length-1];if(this.data.inReference){const H=this.data.referenceType||"shortcut";je.type+="Reference",je.referenceType=H,delete je.url,delete je.title}else delete je.identifier,delete je.label;this.data.referenceType=void 0}function Ye(){const je=this.stack[this.stack.length-1];if(this.data.inReference){const H=this.data.referenceType||"shortcut";je.type+="Reference",je.referenceType=H,delete je.url,delete je.title}else delete je.identifier,delete je.label;this.data.referenceType=void 0}function At(je){const H=this.sliceSerialize(je),j=this.stack[this.stack.length-2];j.label=M8e(H),j.identifier=e2(H).toLowerCase()}function mt(){const je=this.stack[this.stack.length-1],H=this.resume(),j=this.stack[this.stack.length-1];if(this.data.inReference=!0,j.type==="link"){const Q=je.children;j.children=Q}else j.alt=H}function Ue(){const je=this.resume(),H=this.stack[this.stack.length-1];H.url=je}function De(){const je=this.resume(),H=this.stack[this.stack.length-1];H.title=je}function Ge(){this.data.inReference=void 0}function Re(){this.data.referenceType="collapsed"}function St(je){const H=this.resume(),j=this.stack[this.stack.length-1];j.label=H,j.identifier=e2(this.sliceSerialize(je)).toLowerCase(),this.data.referenceType="full"}function ut(je){this.data.characterReferenceType=je.type}function kt(je){const H=this.sliceSerialize(je),j=this.data.characterReferenceType;let Q;j?(Q=toe(H,j==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Q=pK(H);const he=this.stack[this.stack.length-1];he.value+=Q}function Ut(je){const H=this.stack.pop();H.position.end=Jy(je.end)}function Le(je){ve.call(this,je);const H=this.stack[this.stack.length-1];H.url=this.sliceSerialize(je)}function ke(je){ve.call(this,je);const H=this.stack[this.stack.length-1];H.url="mailto:"+this.sliceSerialize(je)}function Oe(){return{type:"blockquote",children:[]}}function Ze(){return{type:"code",lang:null,meta:null,value:""}}function bt(){return{type:"inlineCode",value:""}}function yt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Mt(){return{type:"emphasis",children:[]}}function Kt(){return{type:"heading",depth:0,children:[]}}function Dt(){return{type:"break"}}function en(){return{type:"html",value:""}}function Gn(){return{type:"image",title:null,url:"",alt:null}}function Nn(){return{type:"link",title:null,url:"",children:[]}}function Si(je){return{type:"list",ordered:je.type==="listOrdered",start:null,spread:je._spread,children:[]}}function Un(je){return{type:"listItem",spread:je._spread,checked:null,children:[]}}function Ln(){return{type:"paragraph",children:[]}}function Tn(){return{type:"strong",children:[]}}function ti(){return{type:"text",value:""}}function Bn(){return{type:"thematicBreak"}}}function Jy(n){return{line:n.line,column:n.column,offset:n.offset}}function hoe(n,e){let t=-1;for(;++t<e.length;){const i=e[t];Array.isArray(i)?hoe(n,i):B8e(n,i)}}function B8e(n,e){let t;for(t in e)if(Aoe.call(e,t))switch(t){case"canContainEols":{const i=e[t];i&&n[t].push(...i);break}case"transforms":{const i=e[t];i&&n[t].push(...i);break}case"enter":case"exit":{const i=e[t];i&&Object.assign(n[t],i);break}}}function kQ(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+T4({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+T4({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+T4({start:e.start,end:e.end})+") is still open")}function O8e(n){const e=this;e.parser=t;function t(i){return S8e(i,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function I8e(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function T8e(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function k8e(n,e){const t=e.value?e.value+`
`:"",i={},r=e.lang?e.lang.split(/\s+/):[];r.length>0&&(i.className=["language-"+r[0]]);let o={type:"element",tagName:"code",properties:i,children:[{type:"text",value:t}]};return e.meta&&(o.data={meta:e.meta}),n.patch(e,o),o=n.applyData(e,o),o={type:"element",tagName:"pre",properties:{},children:[o]},n.patch(e,o),o}function D8e(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function R8e(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function P8e(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),r=Y2(i.toLowerCase()),o=n.footnoteOrder.indexOf(i);let s,a=n.footnoteCounts.get(i);a===void 0?(a=0,n.footnoteOrder.push(i),s=n.footnoteOrder.length):s=o+1,a+=1,n.footnoteCounts.set(i,a);const c={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+r,id:t+"fnref-"+r+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};n.patch(e,c);const d={type:"element",tagName:"sup",properties:{},children:[c]};return n.patch(e,d),n.applyData(e,d)}function L8e(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function U8e(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function doe(n,e){const t=e.referenceType;let i="]";if(t==="collapsed"?i+="[]":t==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const r=n.all(e),o=r[0];o&&o.type==="text"?o.value="["+o.value:r.unshift({type:"text",value:"["});const s=r[r.length-1];return s&&s.type==="text"?s.value+=i:r.push({type:"text",value:i}),r}function K8e(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return doe(n,e);const r={src:Y2(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const o={type:"element",tagName:"img",properties:r,children:[]};return n.patch(e,o),n.applyData(e,o)}function F8e(n,e){const t={src:Y2(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,i),n.applyData(e,i)}function z8e(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const i={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,i),n.applyData(e,i)}function j8e(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return doe(n,e);const r={href:Y2(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const o={type:"element",tagName:"a",properties:r,children:n.all(e)};return n.patch(e,o),n.applyData(e,o)}function N8e(n,e){const t={href:Y2(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function G8e(n,e,t){const i=n.all(e),r=t?W8e(t):foe(e),o={},s=[];if(typeof e.checked=="boolean"){const m=i[0];let v;m&&m.type==="element"&&m.tagName==="p"?v=m:(v={type:"element",tagName:"p",properties:{},children:[]},i.unshift(v)),v.children.length>0&&v.children.unshift({type:"text",value:" "}),v.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let a=-1;for(;++a<i.length;){const m=i[a];(r||a!==0||m.type!=="element"||m.tagName!=="p")&&s.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!r?s.push(...m.children):s.push(m)}const c=i[i.length-1];c&&(r||c.type!=="element"||c.tagName!=="p")&&s.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:o,children:s};return n.patch(e,d),n.applyData(e,d)}function W8e(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let i=-1;for(;!e&&++i<t.length;)e=foe(t[i])}return e}function foe(n){const e=n.spread;return e??n.children.length>1}function Q8e(n,e){const t={},i=n.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++r<i.length;){const s=i[r];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(i,!0)};return n.patch(e,o),n.applyData(e,o)}function q8e(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function Y8e(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function V8e(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function $8e(n,e){const t=n.all(e),i=t.shift(),r=[];if(i){const s={type:"element",tagName:"thead",properties:{},children:n.wrap([i],!0)};n.patch(e.children[0],s),r.push(s)}if(t.length>0){const s={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},a=AK(e.children[1]),c=Vre(e.children[e.children.length-1]);a&&c&&(s.position={start:a,end:c}),r.push(s)}const o={type:"element",tagName:"table",properties:{},children:n.wrap(r,!0)};return n.patch(e,o),n.applyData(e,o)}function H8e(n,e,t){const i=t?t.children:void 0,o=(i?i.indexOf(e):1)===0?"th":"td",s=t&&t.type==="table"?t.align:void 0,a=s?s.length:e.children.length;let c=-1;const d=[];for(;++c<a;){const v=e.children[c],M={},B=s?s[c]:void 0;B&&(M.align=B);let P={type:"element",tagName:o,properties:M,children:[]};v&&(P.children=n.all(v),n.patch(v,P),P=n.applyData(v,P)),d.push(P)}const m={type:"element",tagName:"tr",properties:{},children:n.wrap(d,!0)};return n.patch(e,m),n.applyData(e,m)}function Z8e(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const DQ=9,RQ=32;function X8e(n){const e=String(n),t=/\r?\n|\r/g;let i=t.exec(e),r=0;const o=[];for(;i;)o.push(PQ(e.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=t.exec(e);return o.push(PQ(e.slice(r),r>0,!1)),o.join("")}function PQ(n,e,t){let i=0,r=n.length;if(e){let o=n.codePointAt(i);for(;o===DQ||o===RQ;)i++,o=n.codePointAt(i)}if(t){let o=n.codePointAt(r-1);for(;o===DQ||o===RQ;)r--,o=n.codePointAt(r-1)}return r>i?n.slice(i,r):""}function J8e(n,e){const t={type:"text",value:X8e(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function eIe(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const tIe={blockquote:I8e,break:T8e,code:k8e,delete:D8e,emphasis:R8e,footnoteReference:P8e,heading:L8e,html:U8e,imageReference:K8e,image:F8e,inlineCode:z8e,linkReference:j8e,link:N8e,listItem:G8e,list:Q8e,paragraph:q8e,root:Y8e,strong:V8e,table:$8e,tableCell:Z8e,tableRow:H8e,text:J8e,thematicBreak:eIe,toml:qw,yaml:qw,definition:qw,footnoteDefinition:qw};function qw(){}const poe=-1,WB=0,D4=1,f6=2,yK=3,vK=4,bK=5,CK=6,moe=7,goe=8,LQ=typeof self=="object"?self:globalThis,nIe=(n,e)=>{const t=(r,o)=>(n.set(o,r),r),i=r=>{if(n.has(r))return n.get(r);const[o,s]=e[r];switch(o){case WB:case poe:return t(s,r);case D4:{const a=t([],r);for(const c of s)a.push(i(c));return a}case f6:{const a=t({},r);for(const[c,d]of s)a[i(c)]=i(d);return a}case yK:return t(new Date(s),r);case vK:{const{source:a,flags:c}=s;return t(new RegExp(a,c),r)}case bK:{const a=t(new Map,r);for(const[c,d]of s)a.set(i(c),i(d));return a}case CK:{const a=t(new Set,r);for(const c of s)a.add(i(c));return a}case moe:{const{name:a,message:c}=s;return t(new LQ[a](c),r)}case goe:return t(BigInt(s),r);case"BigInt":return t(Object(BigInt(s)),r);case"ArrayBuffer":return t(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:a}=new Uint8Array(s);return t(new DataView(a),s)}}return t(new LQ[o](s),r)};return i},UQ=n=>nIe(new Map,n)(0),q_="",{toString:iIe}={},{keys:rIe}=Object,R3=n=>{const e=typeof n;if(e!=="object"||!n)return[WB,e];const t=iIe.call(n).slice(8,-1);switch(t){case"Array":return[D4,q_];case"Object":return[f6,q_];case"Date":return[yK,q_];case"RegExp":return[vK,q_];case"Map":return[bK,q_];case"Set":return[CK,q_];case"DataView":return[D4,t]}return t.includes("Array")?[D4,t]:t.includes("Error")?[moe,t]:[f6,t]},Yw=([n,e])=>n===WB&&(e==="function"||e==="symbol"),oIe=(n,e,t,i)=>{const r=(s,a)=>{const c=i.push(s)-1;return t.set(a,c),c},o=s=>{if(t.has(s))return t.get(s);let[a,c]=R3(s);switch(a){case WB:{let m=s;switch(c){case"bigint":a=goe,m=s.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+c);m=null;break;case"undefined":return r([poe],s)}return r([a,m],s)}case D4:{if(c){let M=s;return c==="DataView"?M=new Uint8Array(s.buffer):c==="ArrayBuffer"&&(M=new Uint8Array(s)),r([c,[...M]],s)}const m=[],v=r([a,m],s);for(const M of s)m.push(o(M));return v}case f6:{if(c)switch(c){case"BigInt":return r([c,s.toString()],s);case"Boolean":case"Number":case"String":return r([c,s.valueOf()],s)}if(e&&"toJSON"in s)return o(s.toJSON());const m=[],v=r([a,m],s);for(const M of rIe(s))(n||!Yw(R3(s[M])))&&m.push([o(M),o(s[M])]);return v}case yK:return r([a,s.toISOString()],s);case vK:{const{source:m,flags:v}=s;return r([a,{source:m,flags:v}],s)}case bK:{const m=[],v=r([a,m],s);for(const[M,B]of s)(n||!(Yw(R3(M))||Yw(R3(B))))&&m.push([o(M),o(B)]);return v}case CK:{const m=[],v=r([a,m],s);for(const M of s)(n||!Yw(R3(M)))&&m.push(o(M));return v}}const{message:d}=s;return r([a,{name:c,message:d}],s)};return o},KQ=(n,{json:e,lossy:t}={})=>{const i=[];return oIe(!(e||t),!!e,new Map,i)(n),i},p6=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?UQ(KQ(n,e)):structuredClone(n):(n,e)=>UQ(KQ(n,e));function sIe(n,e){const t=[{type:"text",value:""}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function aIe(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function lIe(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||sIe,i=n.options.footnoteBackLabel||aIe,r=n.options.footnoteLabel||"Footnotes",o=n.options.footnoteLabelTagName||"h2",s=n.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let c=-1;for(;++c<n.footnoteOrder.length;){const d=n.footnoteById.get(n.footnoteOrder[c]);if(!d)continue;const m=n.all(d),v=String(d.identifier).toUpperCase(),M=Y2(v.toLowerCase());let B=0;const P=[],U=n.footnoteCounts.get(v);for(;U!==void 0&&++B<=U;){P.length>0&&P.push({type:"text",value:" "});let Z=typeof t=="string"?t:t(c,B);typeof Z=="string"&&(Z={type:"text",value:Z}),P.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+M+(B>1?"-"+B:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(c,B),className:["data-footnote-backref"]},children:Array.isArray(Z)?Z:[Z]})}const z=m[m.length-1];if(z&&z.type==="element"&&z.tagName==="p"){const Z=z.children[z.children.length-1];Z&&Z.type==="text"?Z.value+=" ":z.children.push({type:"text",value:" "}),z.children.push(...P)}else m.push(...P);const V={type:"element",tagName:"li",properties:{id:e+"fn-"+M},children:n.wrap(m,!0)};n.patch(d,V),a.push(V)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...p6(s),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(a,!0)},{type:"text",value:`
`}]}}const yoe=(function(n){if(n==null)return hIe;if(typeof n=="function")return QB(n);if(typeof n=="object")return Array.isArray(n)?uIe(n):cIe(n);if(typeof n=="string")return AIe(n);throw new Error("Expected function, string, or object as test")});function uIe(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=yoe(n[t]);return QB(i);function i(...r){let o=-1;for(;++o<e.length;)if(e[o].apply(this,r))return!0;return!1}}function cIe(n){const e=n;return QB(t);function t(i){const r=i;let o;for(o in n)if(r[o]!==e[o])return!1;return!0}}function AIe(n){return QB(e);function e(t){return t&&t.type===n}}function QB(n){return e;function e(t,i,r){return!!(dIe(t)&&n.call(this,t,typeof i=="number"?i:void 0,r||void 0))}}function hIe(){return!0}function dIe(n){return n!==null&&typeof n=="object"&&"type"in n}const voe=[],fIe=!0,FQ=!1,pIe="skip";function mIe(n,e,t,i){let r;typeof e=="function"&&typeof t!="function"?(i=t,t=e):r=e;const o=yoe(r),s=i?-1:1;a(n,void 0,[])();function a(c,d,m){const v=c&&typeof c=="object"?c:{};if(typeof v.type=="string"){const B=typeof v.tagName=="string"?v.tagName:typeof v.name=="string"?v.name:void 0;Object.defineProperty(M,"name",{value:"node ("+(c.type+(B?"<"+B+">":""))+")"})}return M;function M(){let B=voe,P,U,z;if((!e||o(c,d,m[m.length-1]||void 0))&&(B=gIe(t(c,m)),B[0]===FQ))return B;if("children"in c&&c.children){const V=c;if(V.children&&B[0]!==pIe)for(U=(i?V.children.length:-1)+s,z=m.concat(V);U>-1&&U<V.children.length;){const Z=V.children[U];if(P=a(Z,U,z)(),P[0]===FQ)return P;U=typeof P[1]=="number"?P[1]:U+s}}return B}}}function gIe(n){return Array.isArray(n)?n:typeof n=="number"?[fIe,n]:n==null?voe:[n]}function boe(n,e,t,i){let r,o,s;typeof e=="function"&&typeof t!="function"?(o=void 0,s=e,r=t):(o=e,s=t,r=i),mIe(n,o,a,r);function a(c,d){const m=d[d.length-1],v=m?m.children.indexOf(c):void 0;return s(c,v,m)}}const oP={}.hasOwnProperty,yIe={};function vIe(n,e){const t=e||yIe,i=new Map,r=new Map,o=new Map,s={...tIe,...t.handlers},a={all:d,applyData:CIe,definitionById:i,footnoteById:r,footnoteCounts:o,footnoteOrder:[],handlers:s,one:c,options:t,patch:bIe,wrap:xIe};return boe(n,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const v=m.type==="definition"?i:r,M=String(m.identifier).toUpperCase();v.has(M)||v.set(M,m)}}),a;function c(m,v){const M=m.type,B=a.handlers[M];if(oP.call(a.handlers,M)&&B)return B(a,m,v);if(a.options.passThrough&&a.options.passThrough.includes(M)){if("children"in m){const{children:U,...z}=m,V=p6(z);return V.children=a.all(m),V}return p6(m)}return(a.options.unknownHandler||_Ie)(a,m,v)}function d(m){const v=[];if("children"in m){const M=m.children;let B=-1;for(;++B<M.length;){const P=a.one(M[B],m);if(P){if(B&&M[B-1].type==="break"&&(!Array.isArray(P)&&P.type==="text"&&(P.value=zQ(P.value)),!Array.isArray(P)&&P.type==="element")){const U=P.children[0];U&&U.type==="text"&&(U.value=zQ(U.value))}Array.isArray(P)?v.push(...P):v.push(P)}}}return v}}function bIe(n,e){n.position&&(e.position=iBe(n))}function CIe(n,e){let t=e;if(n&&n.data){const i=n.data.hName,r=n.data.hChildren,o=n.data.hProperties;if(typeof i=="string")if(t.type==="element")t.tagName=i;else{const s="children"in t?t.children:[t];t={type:"element",tagName:i,properties:{},children:s}}t.type==="element"&&o&&Object.assign(t.properties,p6(o)),"children"in t&&t.children&&r!==null&&r!==void 0&&(t.children=r)}return t}function _Ie(n,e){const t=e.data||{},i="value"in e&&!(oP.call(t,"hProperties")||oP.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function xIe(n,e){const t=[];let i=-1;for(e&&t.push({type:"text",value:`
`});++i<n.length;)i&&t.push({type:"text",value:`
`}),t.push(n[i]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function zQ(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function jQ(n,e){const t=vIe(n,e),i=t.one(n,void 0),r=lIe(t),o=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&o.children.push({type:"text",value:`
`},r),o}function MIe(n,e){return n&&"run"in n?async function(t,i){const r=jQ(t,{file:i,...e});await n.run(r,i)}:function(t,i){return jQ(t,{file:i,...n||e})}}function NQ(n){if(n)throw n}var KI,GQ;function wIe(){if(GQ)return KI;GQ=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},o=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var m=n.call(d,"constructor"),v=d.constructor&&d.constructor.prototype&&n.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!m&&!v)return!1;var M;for(M in d);return typeof M>"u"||n.call(d,M)},s=function(d,m){t&&m.name==="__proto__"?t(d,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):d[m.name]=m.newValue},a=function(d,m){if(m==="__proto__")if(n.call(d,m)){if(i)return i(d,m).value}else return;return d[m]};return KI=function c(){var d,m,v,M,B,P,U=arguments[0],z=1,V=arguments.length,Z=!1;for(typeof U=="boolean"&&(Z=U,U=arguments[1]||{},z=2),(U==null||typeof U!="object"&&typeof U!="function")&&(U={});z<V;++z)if(d=arguments[z],d!=null)for(m in d)v=a(U,m),M=a(d,m),U!==M&&(Z&&M&&(o(M)||(B=r(M)))?(B?(B=!1,P=v&&r(v)?v:[]):P=v&&o(v)?v:{},s(U,{name:m,newValue:c(Z,P,M)})):typeof M<"u"&&s(U,{name:m,newValue:M}));return U},KI}var SIe=wIe();const FI=vu(SIe);function sP(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function EIe(){const n=[],e={run:t,use:i};return e;function t(...r){let o=-1;const s=r.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);a(null,...r);function a(c,...d){const m=n[++o];let v=-1;if(c){s(c);return}for(;++v<r.length;)(d[v]===null||d[v]===void 0)&&(d[v]=r[v]);r=d,m?BIe(m,a)(...d):s(null,...d)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return n.push(r),e}}function BIe(n,e){let t;return i;function i(...s){const a=n.length>s.length;let c;a&&s.push(r);try{c=n.apply(this,s)}catch(d){const m=d;if(a&&t)throw m;return r(m)}a||(c&&c.then&&typeof c.then=="function"?c.then(o,r):c instanceof Error?r(c):o(c))}function r(s,...a){t||(t=!0,e(s,...a))}function o(s){r(null,s)}}const $0={basename:OIe,dirname:IIe,extname:TIe,join:kIe,sep:"/"};function OIe(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');DM(n);let t=0,i=-1,r=n.length,o;if(e===void 0||e.length===0||e.length>n.length){for(;r--;)if(n.codePointAt(r)===47){if(o){t=r+1;break}}else i<0&&(o=!0,i=r+1);return i<0?"":n.slice(t,i)}if(e===n)return"";let s=-1,a=e.length-1;for(;r--;)if(n.codePointAt(r)===47){if(o){t=r+1;break}}else s<0&&(o=!0,s=r+1),a>-1&&(n.codePointAt(r)===e.codePointAt(a--)?a<0&&(i=r):(a=-1,i=s));return t===i?i=s:i<0&&(i=n.length),n.slice(t,i)}function IIe(n){if(DM(n),n.length===0)return".";let e=-1,t=n.length,i;for(;--t;)if(n.codePointAt(t)===47){if(i){e=t;break}}else i||(i=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function TIe(n){DM(n);let e=n.length,t=-1,i=0,r=-1,o=0,s;for(;e--;){const a=n.codePointAt(e);if(a===47){if(s){i=e+1;break}continue}t<0&&(s=!0,t=e+1),a===46?r<0?r=e:o!==1&&(o=1):r>-1&&(o=-1)}return r<0||t<0||o===0||o===1&&r===t-1&&r===i+1?"":n.slice(r,t)}function kIe(...n){let e=-1,t;for(;++e<n.length;)DM(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":DIe(t)}function DIe(n){DM(n);const e=n.codePointAt(0)===47;let t=RIe(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function RIe(n,e){let t="",i=0,r=-1,o=0,s=-1,a,c;for(;++s<=n.length;){if(s<n.length)a=n.codePointAt(s);else{if(a===47)break;a=47}if(a===47){if(!(r===s-1||o===1))if(r!==s-1&&o===2){if(t.length<2||i!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(c=t.lastIndexOf("/"),c!==t.length-1){c<0?(t="",i=0):(t=t.slice(0,c),i=t.length-1-t.lastIndexOf("/")),r=s,o=0;continue}}else if(t.length>0){t="",i=0,r=s,o=0;continue}}e&&(t=t.length>0?t+"/..":"..",i=2)}else t.length>0?t+="/"+n.slice(r+1,s):t=n.slice(r+1,s),i=s-r-1;r=s,o=0}else a===46&&o>-1?o++:o=-1}return t}function DM(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const PIe={cwd:LIe};function LIe(){return"/"}function aP(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function UIe(n){if(typeof n=="string")n=new URL(n);else if(!aP(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return KIe(n)}function KIe(n){if(n.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const i=e.codePointAt(t+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const zI=["history","path","basename","stem","extname","dirname"];class Coe{constructor(e){let t;e?aP(e)?t={path:e}:typeof e=="string"||FIe(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":PIe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<zI.length;){const o=zI[i];o in t&&t[o]!==void 0&&t[o]!==null&&(this[o]=o==="history"?[...t[o]]:t[o])}let r;for(r in t)zI.includes(r)||(this[r]=t[r])}get basename(){return typeof this.path=="string"?$0.basename(this.path):void 0}set basename(e){NI(e,"basename"),jI(e,"basename"),this.path=$0.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?$0.dirname(this.path):void 0}set dirname(e){WQ(this.basename,"dirname"),this.path=$0.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?$0.extname(this.path):void 0}set extname(e){if(jI(e,"extname"),WQ(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=$0.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){aP(e)&&(e=UIe(e)),NI(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?$0.basename(this.path,this.extname):void 0}set stem(e){NI(e,"stem"),jI(e,"stem"),this.path=$0.join(this.dirname||"",e+(this.extname||""))}fail(e,t,i){const r=this.message(e,t,i);throw r.fatal=!0,r}info(e,t,i){const r=this.message(e,t,i);return r.fatal=void 0,r}message(e,t,i){const r=new JA(e,t,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function jI(n,e){if(n&&n.includes($0.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+$0.sep+"`")}function NI(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function WQ(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function FIe(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const zIe=(function(n){const i=this.constructor.prototype,r=i[n],o=function(){return r.apply(o,arguments)};return Object.setPrototypeOf(o,i),o}),jIe={}.hasOwnProperty;class _K extends zIe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=EIe()}copy(){const e=new _K;let t=-1;for(;++t<this.attachers.length;){const i=this.attachers[t];e.use(...i)}return e.data(FI(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(QI("data",this.frozen),this.namespace[e]=t,this):jIe.call(this.namespace,e)&&this.namespace[e]||void 0:e?(QI("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=t.call(e,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=Vw(e),i=this.parser||this.Parser;return GI("parse",i),i(String(t),t)}process(e,t){const i=this;return this.freeze(),GI("process",this.parser||this.Parser),WI("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(o,s){const a=Vw(e),c=i.parse(a);i.run(c,a,function(m,v,M){if(m||!v||!M)return d(m);const B=v,P=i.stringify(B,M);WIe(P)?M.value=P:M.result=P,d(m,M)});function d(m,v){m||!v?s(m):o?o(v):t(void 0,v)}}}processSync(e){let t=!1,i;return this.freeze(),GI("processSync",this.parser||this.Parser),WI("processSync",this.compiler||this.Compiler),this.process(e,r),qQ("processSync","process",t),i;function r(o,s){t=!0,NQ(o),i=s}}run(e,t,i){QQ(e),this.freeze();const r=this.transformers;return!i&&typeof t=="function"&&(i=t,t=void 0),i?o(void 0,i):new Promise(o);function o(s,a){const c=Vw(t);r.run(e,c,d);function d(m,v,M){const B=v||e;m?a(m):s?s(B):i(void 0,B,M)}}}runSync(e,t){let i=!1,r;return this.run(e,t,o),qQ("runSync","run",i),r;function o(s,a){NQ(s),r=a,i=!0}}stringify(e,t){this.freeze();const i=Vw(t),r=this.compiler||this.Compiler;return WI("stringify",r),QQ(e),r(e,i)}use(e,...t){const i=this.attachers,r=this.namespace;if(QI("use",this.frozen),e!=null)if(typeof e=="function")c(e,t);else if(typeof e=="object")Array.isArray(e)?a(e):s(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(d){if(typeof d=="function")c(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[m,...v]=d;c(m,v)}else s(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function s(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(d.plugins),d.settings&&(r.settings=FI(!0,r.settings,d.settings))}function a(d){let m=-1;if(d!=null)if(Array.isArray(d))for(;++m<d.length;){const v=d[m];o(v)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function c(d,m){let v=-1,M=-1;for(;++v<i.length;)if(i[v][0]===d){M=v;break}if(M===-1)i.push([d,...m]);else if(m.length>0){let[B,...P]=m;const U=i[M][1];sP(U)&&sP(B)&&(B=FI(!0,U,B)),i[M]=[d,B,...P]}}}}const NIe=new _K().freeze();function GI(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function WI(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function QI(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function QQ(n){if(!sP(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function qQ(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function Vw(n){return GIe(n)?n:new Coe(n)}function GIe(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function WIe(n){return typeof n=="string"||QIe(n)}function QIe(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const qIe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",YQ=[],VQ={allowDangerousHtml:!0},YIe=/^(https?|ircs?|mailto|xmpp)$/i,VIe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function $Ie(n){const e=HIe(n),t=ZIe(n);return XIe(e.runSync(e.parse(t),t),n)}function HIe(n){const e=n.rehypePlugins||YQ,t=n.remarkPlugins||YQ,i=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...VQ}:VQ;return NIe().use(O8e).use(t).use(MIe,i).use(e)}function ZIe(n){const e=n.children||"",t=new Coe;return typeof e=="string"&&(t.value=e),t}function XIe(n,e){const t=e.allowedElements,i=e.allowElement,r=e.components,o=e.disallowedElements,s=e.skipHtml,a=e.unwrapDisallowed,c=e.urlTransform||JIe;for(const m of VIe)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+qIe+m.id,void 0);return boe(n,d),lBe(n,{Fragment:oe.Fragment,components:r,ignoreInvalidStyle:!0,jsx:oe.jsx,jsxs:oe.jsxs,passKeys:!0,passNode:!0});function d(m,v,M){if(m.type==="raw"&&M&&typeof v=="number")return s?M.children.splice(v,1):M.children[v]={type:"text",value:m.value},v;if(m.type==="element"){let B;for(B in PI)if(Object.hasOwn(PI,B)&&Object.hasOwn(m.properties,B)){const P=m.properties[B],U=PI[B];(U===null||U.includes(m.tagName))&&(m.properties[B]=c(String(P||""),B,m))}}if(m.type==="element"){let B=t?!t.includes(m.tagName):o?o.includes(m.tagName):!1;if(!B&&i&&typeof v=="number"&&(B=!i(m,v,M)),B&&M&&typeof v=="number")return a&&m.children?M.children.splice(v,1,...m.children):M.children.splice(v,1),v}}}function JIe(n){const e=n.indexOf(":"),t=n.indexOf("?"),i=n.indexOf("#"),r=n.indexOf("/");return e===-1||r!==-1&&e>r||t!==-1&&e>t||i!==-1&&e>i||YIe.test(n.slice(0,e))?n:""}function Zr(){var n="/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",e="a7edc49bc306eb20f0cc16abd4c84f78b7cc6807",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",statementMap:{0:{start:{line:4,column:16},end:{line:8,column:1}},1:{start:{line:11,column:26},end:{line:11,column:36}},2:{start:{line:12,column:52},end:{line:12,column:61}},3:{start:{line:13,column:23},end:{line:13,column:47}},4:{start:{line:14,column:25},end:{line:16,column:26}},5:{start:{line:17,column:28},end:{line:23,column:5}},6:{start:{line:18,column:27},end:{line:18,column:46}},7:{start:{line:19,column:6},end:{line:21,column:7}},8:{start:{line:20,column:8},end:{line:20,column:148}},9:{start:{line:22,column:6},end:{line:22,column:19}},10:{start:{line:24,column:4},end:{line:57,column:9}},11:{start:{line:27,column:76},end:{line:27,column:132}},12:{start:{line:30,column:10},end:{line:33,column:20}},13:{start:{line:40,column:12},end:{line:40,column:75}},14:{start:{line:44,column:10},end:{line:53,column:20}},15:{start:{line:47,column:14},end:{line:51,column:15}},16:{start:{line:48,column:16},end:{line:48,column:98}},17:{start:{line:50,column:16},end:{line:50,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:58,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:17,column:28},end:{line:17,column:29}},loc:{start:{line:17,column:39},end:{line:23,column:5}},line:17},2:{name:"(anonymous_2)",decl:{start:{line:27,column:13},end:{line:27,column:14}},loc:{start:{line:27,column:76},end:{line:27,column:132}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:29,column:119},end:{line:29,column:120}},loc:{start:{line:29,column:137},end:{line:34,column:9}},line:29},4:{name:"(anonymous_4)",decl:{start:{line:39,column:37},end:{line:39,column:38}},loc:{start:{line:39,column:49},end:{line:41,column:11}},line:39},5:{name:"(anonymous_5)",decl:{start:{line:43,column:80},end:{line:43,column:81}},loc:{start:{line:43,column:103},end:{line:54,column:9}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:46,column:37},end:{line:46,column:38}},loc:{start:{line:46,column:44},end:{line:52,column:13}},line:46}},branchMap:{0:{loc:{start:{line:14,column:25},end:{line:16,column:26}},type:"binary-expr",locations:[{start:{line:14,column:25},end:{line:14,column:33}},{start:{line:16,column:4},end:{line:16,column:26}}],line:14},1:{loc:{start:{line:19,column:6},end:{line:21,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:21,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:25,column:6},end:{line:35,column:10}},type:"binary-expr",locations:[{start:{line:25,column:6},end:{line:25,column:9}},{start:{line:25,column:29},end:{line:35,column:10}}],line:25},3:{loc:{start:{line:29,column:8},end:{line:34,column:13}},type:"binary-expr",locations:[{start:{line:29,column:8},end:{line:29,column:20}},{start:{line:29,column:40},end:{line:34,column:13}}],line:29},4:{loc:{start:{line:36,column:6},end:{line:55,column:13}},type:"binary-expr",locations:[{start:{line:36,column:6},end:{line:36,column:16}},{start:{line:36,column:36},end:{line:55,column:13}}],line:36},5:{loc:{start:{line:47,column:14},end:{line:51,column:15}},type:"if",locations:[{start:{line:47,column:14},end:{line:51,column:15}},{start:{line:49,column:21},end:{line:51,column:15}}],line:47},6:{loc:{start:{line:56,column:6},end:{line:56,column:215}},type:"binary-expr",locations:[{start:{line:56,column:6},end:{line:56,column:12}},{start:{line:56,column:16},end:{line:56,column:30}},{start:{line:56,column:50},end:{line:56,column:215}}],line:56}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Doc.tsx"],names:[],mappings:"AA0Ce,SAMT,UANS,KAkBK,YAlBL;AA1Cf,OAAO,WAAW;AAClB,OAAO,cAAc;AAErB,MAAM,UAAU;AAAA,EACd,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,KAAK;AACP;AAkBA,qBAAqB,YAAY,MAAM,UAAoB;AAAA,EACzD,SAAU;AACR,UAAM,EAAC,UAAS,IAAI,KAAK;AAEzB,UAAM,EAAC,KAAK,QAAQ,QAAQ,eAAc,IAAI;AAC9C,UAAM,aAAa,UAAU,aAAa;AAE1C,UAAM,eACJ,CAAC,CAAC;AAAA;AAAA,IAGF,CAAC,MAAM,QAAQ,MAAM;AAGvB,UAAM,kBAAkB,CAAC,UAAkB;AACzC,YAAM,eAAe,MAAM,YAAY;AACvC,UAAI,aAAa,WAAW,UAAU,GAAG;AACvC,eAAO,oBAAC,OAAE,MAAM,cAAc,QAAO,UAAS,KAAI,cAAc,gBAAM,aAAa,MAAM,GAAG,EAAE,IAAI,GAAE;AAAA,MACtG;AACA,aAAO;AAAA,IACT;AAEA,WACE,iCACG;AAAA,aACC,qBAAC,SAAI,WAAU,WACb;AAAA,4BAAC,SAAI,WAAU,gBAAe,eAAY,kBACxC,8BAAC,YAAS,YAAY;AAAA,UACpB,GAAG,CAAC,EAAC,MAAM,OAAO,MAAM,UAAU,GAAG,MAAK,MAAM,oBAAC,OAAE,MAAY,QAAO,UAAU,GAAG,OAAQ,UAAS;AAAA,QACtG,GAAI,eAAI,GACV;AAAA,QACC,gBACC,oBAAC,QAAG,WAAU,mBACX,iBAAO,QAAQ,MAAM,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM;AAC5C,iBACE,qBAAC,QACC;AAAA,gCAAC,UAAM,eAAK,UAAU,GAAG,GAAE;AAAA,YAC3B,oBAAC,SAAK,gBAAM,KAAI;AAAA,eAFT,GAGT;AAAA,QAEJ,CAAC,GACH;AAAA,SAEJ;AAAA,MAED,cACC,oBAAC,SAAI,WAAU,wBACb,+BAAC,WAAM,WAAU,+BACf;AAAA,4BAAC,WACC,+BAAC,QACC;AAAA,8BAAC,QAAG;AAAA,UACH,OAAO,OAAO,OAAO,EAAE,IAAI,YAAU;AACpC,mBAAO,oBAAC,QAAiB,oBAAT,MAAgB;AAAA,UAClC,CAAC;AAAA,WACH,GACF;AAAA,QACA,oBAAC,WACE,iBAAO,QAAQ,UAAU,EAAE,IAAI,CAAC,CAAC,KAAK,UAAU,MAAM;AACrD,iBACE,qBAAC,QACC;AAAA,gCAAC,QAAI,eAAI;AAAA,YACR,OAAO,KAAK,OAAO,EAAE,IAAI,CAAC,MAAM;AAC/B,kBAAI,OAAO,UAAU,eAAe,KAAK,YAAY,CAAC,GAAG;AACvD,uBAAO,oBAAC,QAAY,0BAAgB,WAAW,CAAyB,CAAC,KAAzD,CAA2D;AAAA,cAC7E,OACK;AACH,uBAAO,oBAAC,QAAW,kBAAH,CAAK;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,eATM,GAUT;AAAA,QAEJ,CAAC,GACH;AAAA,SACF,GACF;AAAA,MAED,UAAU,kBACT,oBAAC,SAAI,WAAU,uBACb,8BAAC,OAAE,MAAM,QAAS,QAAO,UAAS,KAAI,cAAc,0BAAe,GACrE;AAAA,OAEJ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a7edc49bc306eb20f0cc16abd4c84f78b7cc6807"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Zr=function(){return s},s}Zr();const $Q=(Zr().s[0]++,{js:"JS",android:"Android",ios:"iOS"});class qB extends In.Component{render(){Zr().f[0]++;const{fieldSpec:e}=(Zr().s[1]++,this.props),{doc:t,values:i,docUrl:r,docUrlLinkText:o}=(Zr().s[2]++,e),s=(Zr().s[3]++,e["sdk-support"]),a=(Zr().s[4]++,Zr().b[0][0]++,!!i&&(Zr().b[0][1]++,!Array.isArray(i)));Zr().s[5]++;const c=d=>{Zr().f[1]++;const m=(Zr().s[6]++,d.toLowerCase());return Zr().s[7]++,m.startsWith("https://")?(Zr().b[1][0]++,Zr().s[8]++,oe.jsx("a",{href:m,target:"_blank",rel:"noreferrer",children:"#"+m.split("/").pop()})):(Zr().b[1][1]++,Zr().s[9]++,d)};return Zr().s[10]++,oe.jsxs(oe.Fragment,{children:[(Zr().b[2][0]++,t&&(Zr().b[2][1]++,oe.jsxs("div",{className:"SpecDoc",children:[oe.jsx("div",{className:"SpecDoc__doc","data-wd-key":"spec-field-doc",children:oe.jsx($Ie,{components:{a:({node:d,href:m,children:v,...M})=>(Zr().f[2]++,Zr().s[11]++,oe.jsx("a",{href:m,target:"_blank",...M,children:v}))},children:t})}),(Zr().b[3][0]++,a&&(Zr().b[3][1]++,oe.jsx("ul",{className:"SpecDoc__values",children:Object.entries(i).map(([d,m])=>(Zr().f[3]++,Zr().s[12]++,oe.jsxs("li",{children:[oe.jsx("code",{children:JSON.stringify(d)}),oe.jsx("div",{children:m.doc})]},d)))})))]}))),(Zr().b[4][0]++,s&&(Zr().b[4][1]++,oe.jsx("div",{className:"SpecDoc__sdk-support",children:oe.jsxs("table",{className:"SpecDoc__sdk-support__table",children:[oe.jsx("thead",{children:oe.jsxs("tr",{children:[oe.jsx("th",{}),Object.values($Q).map(d=>(Zr().f[4]++,Zr().s[13]++,oe.jsx("th",{children:d},d)))]})}),oe.jsx("tbody",{children:Object.entries(s).map(([d,m])=>(Zr().f[5]++,Zr().s[14]++,oe.jsxs("tr",{children:[oe.jsx("td",{children:d}),Object.keys($Q).map(v=>(Zr().f[6]++,Zr().s[15]++,Object.prototype.hasOwnProperty.call(m,v)?(Zr().b[5][0]++,Zr().s[16]++,oe.jsx("td",{children:c(m[v])},v)):(Zr().b[5][1]++,Zr().s[17]++,oe.jsx("td",{children:"no"},v))))]},d)))})]})}))),(Zr().b[6][0]++,r&&(Zr().b[6][1]++,o)&&(Zr().b[6][2]++,oe.jsx("div",{className:"SpecDoc__learn-more",children:oe.jsx("a",{href:r,target:"_blank",rel:"noreferrer",children:o})})))]})}}function Gr(){var n="/home/runner/work/maputnik/maputnik/src/components/Block.tsx",e="a026f5c10cd11169be04acaaf924d5e996792a37",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Block.tsx",statementMap:{0:{start:{line:7,column:13},end:{line:7,column:17}},1:{start:{line:9,column:4},end:{line:9,column:17}},2:{start:{line:10,column:4},end:{line:12,column:6}},3:{start:{line:15,column:18},end:{line:15,column:32}},4:{start:{line:16,column:4},end:{line:18,column:5}},5:{start:{line:17,column:6},end:{line:17,column:64}},6:{start:{line:20,column:16},end:{line:24,column:3}},7:{start:{line:21,column:4},end:{line:23,column:7}},8:{start:{line:31,column:17},end:{line:40,column:3}},9:{start:{line:32,column:15},end:{line:32,column:39}},10:{start:{line:33,column:21},end:{line:33,column:48}},11:{start:{line:34,column:4},end:{line:36,column:5}},12:{start:{line:35,column:6},end:{line:35,column:30}},13:{start:{line:37,column:4},end:{line:39,column:5}},14:{start:{line:38,column:6},end:{line:38,column:29}},15:{start:{line:42,column:4},end:{line:78,column:6}},16:{start:{line:66,column:12},end:{line:66,column:31}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:13,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:14},end:{line:19,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:20,column:16},end:{line:20,column:17}},loc:{start:{line:20,column:25},end:{line:24,column:3}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:31,column:17},end:{line:31,column:18}},loc:{start:{line:31,column:28},end:{line:40,column:3}},line:31},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:79,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:65,column:87},end:{line:65,column:88}},loc:{start:{line:65,column:95},end:{line:67,column:11}},line:65}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:17,column:33},end:{line:17,column:62}},type:"cond-expr",locations:[{start:{line:17,column:48},end:{line:17,column:54}},{start:{line:17,column:57},end:{line:17,column:62}}],line:17},2:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},3:{loc:{start:{line:34,column:8},end:{line:34,column:66}},type:"binary-expr",locations:[{start:{line:34,column:8},end:{line:34,column:53}},{start:{line:34,column:57},end:{line:34,column:66}}],line:34},4:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:55,column:10},end:{line:62,column:14}},type:"binary-expr",locations:[{start:{line:55,column:10},end:{line:55,column:30}},{start:{line:55,column:50},end:{line:62,column:14}}],line:55},6:{loc:{start:{line:63,column:10},end:{line:63,column:134}},type:"binary-expr",locations:[{start:{line:63,column:10},end:{line:63,column:31}},{start:{line:63,column:51},end:{line:63,column:134}}],line:63},7:{loc:{start:{line:68,column:10},end:{line:75,column:11}},type:"binary-expr",locations:[{start:{line:68,column:10},end:{line:68,column:30}},{start:{line:68,column:50},end:{line:75,column:11}}],line:68},8:{loc:{start:{line:72,column:32},end:{line:72,column:64}},type:"cond-expr",locations:[{start:{line:72,column:53},end:{line:72,column:55}},{start:{line:72,column:58},end:{line:72,column:64}}],line:72}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Block.tsx"],names:[],mappings:"AA+DW,SAYD,KAZC;AA/DX,OAAO,WAA8E;AACrF,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAkBhB,qBAAqB,cAAc,MAAM,UAAkC;AAAA,EACzE,WAAkC;AAAA,EAElC,YAAa,OAAmB;AAC9B,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS,GAAwE;AAC/E,UAAM,QAAQ,EAAE,OAAO;AACvB,QAAI,KAAK,MAAM,UAAU;AACvB,aAAO,KAAK,MAAM,SAAS,UAAU,KAAK,SAAY,KAAK;AAAA,IAC7D;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,eAAe,CAAC,UAAoC;AAClD,UAAM,KAAK,MAAM,YAAY;AAC7B,UAAM,WAAW,KAAK,UAAU,SAAS,EAAE;AAE3C,QAAI,MAAM,YAAY,OAAO,aAAa,WAAW,CAAC,UAAU;AAC9D,YAAM,gBAAgB;AAAA,IACxB;AACA,QAAI,MAAM,YAAY,OAAO,aAAa,KAAK;AAC7C,YAAM,eAAe;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,KAAK,MAAM;AAAA,QAC9B,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,WAAW,WAAW;AAAA,UACpB,wBAAwB;AAAA,UACxB,8BAA8B,KAAK,MAAM;AAAA,UACzC,yBAAyB,KAAK,MAAM;AAAA,UACpC,+BAA+B,KAAK,MAAM;AAAA,QAC5C,CAAC;AAAA,QACD,SAAS,KAAK;AAAA,QAEb;AAAA,eAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,aAAa,KAAK;AAAA,cAClB,WAAW,KAAK,MAAM;AAAA;AAAA,UACxB,GACF;AAAA,UAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,UAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,UACA,oBAAC,SAAI,WAAU,gCAA+B,KAAK,QAAM;AAAC,iBAAK,WAAW;AAAA,UAAG,GAC1E,eAAK,MAAM,UACd;AAAA,UACC,KAAK,MAAM,aACV;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,cAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,UACxC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a026f5c10cd11169be04acaaf924d5e996792a37"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Gr=function(){return s},s}Gr();class cs extends In.Component{_blockEl=(Gr().s[0]++,null);constructor(e){Gr().f[0]++,Gr().s[1]++,super(e),Gr().s[2]++,this.state={showDoc:!1}}onChange(e){Gr().f[1]++;const t=(Gr().s[3]++,e.target.value);if(Gr().s[4]++,this.props.onChange)return Gr().b[0][0]++,Gr().s[5]++,this.props.onChange(t===""?(Gr().b[1][0]++,void 0):(Gr().b[1][1]++,t));Gr().b[0][1]++}onToggleDoc=(Gr().s[6]++,e=>{Gr().f[2]++,Gr().s[7]++,this.setState({showDoc:e})});onLabelClick=(Gr().s[8]++,e=>{Gr().f[3]++;const t=(Gr().s[9]++,e.nativeEvent.target),i=(Gr().s[10]++,this._blockEl?.contains(t));Gr().s[11]++,Gr().b[3][0]++,e.nativeEvent.target.nodeName!=="INPUT"&&(Gr().b[3][1]++,!i)?(Gr().b[2][0]++,Gr().s[12]++,e.stopPropagation()):Gr().b[2][1]++,Gr().s[13]++,e.nativeEvent.target.nodeName!=="A"?(Gr().b[4][0]++,Gr().s[14]++,e.preventDefault()):Gr().b[4][1]++});render(){return Gr().f[4]++,Gr().s[15]++,oe.jsxs("label",{style:this.props.style,"data-wd-key":this.props["data-wd-key"],className:Ig({"maputnik-input-block":!0,"maputnik-input-block--wide":this.props.wideMode,"maputnik-action-block":this.props.action,"maputnik-input-block--error":this.props.error}),onClick:this.onLabelClick,children:[(Gr().b[5][0]++,this.props.fieldSpec&&(Gr().b[5][1]++,oe.jsx("div",{className:"maputnik-input-block-label",children:oe.jsx(lK,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(Gr().b[6][0]++,!this.props.fieldSpec&&(Gr().b[6][1]++,oe.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),oe.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),oe.jsx("div",{className:"maputnik-input-block-content",ref:e=>{Gr().f[5]++,Gr().s[16]++,this._blockEl=e},children:this.props.children}),(Gr().b[7][0]++,this.props.fieldSpec&&(Gr().b[7][1]++,oe.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Gr().b[8][0]++,""):(Gr().b[8][1]++,"none")},children:oe.jsx(qB,{fieldSpec:this.props.fieldSpec})})))]})}}function dA(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",e="1b99a181d4a9dd7b629113889cbb71c3a4bb4d42",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:36}},1:{start:{line:6,column:4},end:{line:8,column:5}},2:{start:{line:7,column:6},end:{line:7,column:43}},3:{start:{line:7,column:35},end:{line:7,column:41}},4:{start:{line:9,column:4},end:{line:21,column:6}},5:{start:{line:17,column:25},end:{line:17,column:60}},6:{start:{line:19,column:64},end:{line:19,column:115}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:22,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:28},end:{line:7,column:29}},loc:{start:{line:7,column:35},end:{line:7,column:41}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:25},end:{line:17,column:60}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:64},end:{line:19,column:115}},line:19}},branchMap:{0:{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},1:{loc:{start:{line:6,column:8},end:{line:6,column:56}},type:"binary-expr",locations:[{start:{line:6,column:8},end:{line:6,column:26}},{start:{line:6,column:30},end:{line:6,column:56}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx"],names:[],mappings:"AA4BsC;AA5BtC,OAAO,WAAW;AAYlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA,IACrC;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,OAAK,KAAK,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,QACjD,cAAY,KAAK,MAAM,YAAY;AAAA,QAEjC,kBAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,oBAAC,YAAiB,OAAO,KAAM,mBAAlB,GAAwB,CAAS;AAAA;AAAA,IAChF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1b99a181d4a9dd7b629113889cbb71c3a4bb4d42"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return dA=function(){return s},s}dA();class HC extends In.Component{render(){dA().f[0]++;let e=(dA().s[0]++,this.props.options);return dA().s[1]++,dA().b[1][0]++,e.length>0&&(dA().b[1][1]++,!Array.isArray(e[0]))?(dA().b[0][0]++,dA().s[2]++,e=e.map(t=>(dA().f[1]++,dA().s[3]++,[t,t]))):dA().b[0][1]++,dA().s[4]++,oe.jsx("select",{className:"maputnik-select","data-wd-key":this.props["data-wd-key"],style:this.props.style,title:this.props.title,value:this.props.value,onChange:t=>(dA().f[2]++,dA().s[5]++,this.props.onChange(t.target.value)),"aria-label":this.props["aria-label"],children:e.map(([t,i])=>(dA().f[3]++,dA().s[6]++,oe.jsx("option",{value:t,children:i},t)))})}}function rr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",e="ffe977722e3215b5f6718c464b93680839810a41",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",statementMap:{0:{start:{line:3,column:24},end:{line:6,column:3}},1:{start:{line:8,column:4},end:{line:8,column:17}},2:{start:{line:9,column:4},end:{line:12,column:6}},3:{start:{line:15,column:4},end:{line:19,column:5}},4:{start:{line:16,column:6},end:{line:18,column:8}},5:{start:{line:20,column:4},end:{line:20,column:14}},6:{start:{line:25,column:4},end:{line:36,column:5}},7:{start:{line:26,column:6},end:{line:26,column:23}},8:{start:{line:27,column:6},end:{line:30,column:8}},9:{start:{line:32,column:6},end:{line:32,column:20}},10:{start:{line:33,column:6},end:{line:35,column:8}},11:{start:{line:37,column:4},end:{line:39,column:5}},12:{start:{line:38,column:6},end:{line:38,column:48}},13:{start:{line:40,column:4},end:{line:70,column:7}},14:{start:{line:51,column:8},end:{line:56,column:11}},15:{start:{line:55,column:10},end:{line:55,column:71}},16:{start:{line:55,column:34},end:{line:55,column:71}},17:{start:{line:59,column:8},end:{line:62,column:9}},18:{start:{line:60,column:10},end:{line:60,column:44}},19:{start:{line:61,column:10},end:{line:61,column:73}},20:{start:{line:61,column:35},end:{line:61,column:73}},21:{start:{line:65,column:8},end:{line:67,column:9}},22:{start:{line:66,column:10},end:{line:66,column:48}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:13},end:{line:4,column:14}},loc:{start:{line:4,column:19},end:{line:5,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:13,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:48},end:{line:21,column:3}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:71,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:50,column:16},end:{line:50,column:17}},loc:{start:{line:50,column:23},end:{line:57,column:7}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:54,column:11},end:{line:54,column:12}},loc:{start:{line:54,column:17},end:{line:56,column:9}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:63,column:7}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:64,column:17},end:{line:64,column:18}},loc:{start:{line:64,column:24},end:{line:68,column:7}},line:64}},branchMap:{0:{loc:{start:{line:11,column:13},end:{line:11,column:30}},type:"binary-expr",locations:[{start:{line:11,column:13},end:{line:11,column:24}},{start:{line:11,column:28},end:{line:11,column:30}}],line:11},1:{loc:{start:{line:15,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:19,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:25,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:36,column:5}},{start:{line:31,column:11},end:{line:36,column:5}}],line:25},3:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},4:{loc:{start:{line:43,column:18},end:{line:43,column:125}},type:"cond-expr",locations:[{start:{line:43,column:83},end:{line:43,column:104}},{start:{line:43,column:107},end:{line:43,column:125}}],line:43},5:{loc:{start:{line:47,column:13},end:{line:47,column:64}},type:"cond-expr",locations:[{start:{line:47,column:43},end:{line:47,column:45}},{start:{line:47,column:48},end:{line:47,column:64}}],line:47},6:{loc:{start:{line:55,column:10},end:{line:55,column:71}},type:"if",locations:[{start:{line:55,column:10},end:{line:55,column:71}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},7:{loc:{start:{line:59,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:59,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59},8:{loc:{start:{line:61,column:10},end:{line:61,column:73}},type:"if",locations:[{start:{line:61,column:10},end:{line:61,column:73}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},9:{loc:{start:{line:65,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:65,column:8},end:{line:67,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},10:{loc:{start:{line:65,column:12},end:{line:65,column:51}},type:"binary-expr",locations:[{start:{line:65,column:12},end:{line:65,column:28}},{start:{line:65,column:32},end:{line:65,column:51}}],line:65}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputString.tsx"],names:[],mappings:"AAAA,OAAO,WAAW;AAsBlB,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,OAAO,MAAM,SAAS;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,SAAS;AAClB,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,MACf;AAAA,IACF;AACA,WAAO,CAAC;AAAA,EACV;AAAA,EAEA,SAAS;AACP,QAAI;AACJ,QAAI;AAEJ,QAAG,KAAK,MAAM,OAAO;AACnB,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,QACA;AAAA,MACF;AAAA,IACF,OACK;AACH,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,QAAG,KAAK,MAAM,UAAU;AACtB,cAAQ,KAAK,2BAA2B;AAAA,IAC1C;AAEA,WAAO,MAAM,cAAc,KAAK;AAAA,MAC9B,cAAc,KAAK,MAAM,YAAY;AAAA,MACrC,eAAe,KAAK,MAAM,aAAa;AAAA,MACvC,YAAY,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,YAAY,IAAI,KAAK,MAAM,aAAa,EAAE,QAAQ;AAAA,MAC/G,UAAU,KAAK,MAAM;AAAA,MACrB,WAAW,QAAQ,KAAK,GAAG;AAAA,MAC3B,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM,UAAU,SAAY,KAAK,KAAK,MAAM;AAAA,MACxD,aAAa,KAAK,MAAM;AAAA,MACxB,OAAO,KAAK,MAAM;AAAA,MAClB,UAAU,CAAC,MAA2E;AACpF,aAAK,SAAS;AAAA,UACZ,SAAS;AAAA,UACT,OAAO,EAAE,OAAO;AAAA,QAClB,GAAG,MAAM;AACP,cAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,KAAK,MAAM,KAAK;AAAA,QAC7D,CAAC;AAAA,MACH;AAAA,MACA,QAAQ,MAAM;AACZ,YAAG,KAAK,MAAM,UAAQ,KAAK,MAAM,OAAO;AACtC,eAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,cAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QAC/D;AAAA,MACF;AAAA,MACA,WAAW,CAAC,MAAM;AAChB,YAAI,EAAE,YAAY,MAAM,KAAK,MAAM,UAAU;AAC3C,eAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QACtC;AAAA,MACF;AAAA,MACA,UAAU,KAAK,MAAM;AAAA,IACvB,CAAC;AAAA,EACH;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ffe977722e3215b5f6718c464b93680839810a41"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return rr=function(){return s},s}rr();class Fm extends In.Component{static defaultProps=(rr().s[0]++,{onInput:()=>{rr().f[0]++}});constructor(e){rr().f[1]++,rr().s[1]++,super(e),rr().s[2]++,this.state={editing:!1,value:(rr().b[0][0]++,e.value||(rr().b[0][1]++,""))}}static getDerivedStateFromProps(e,t){if(rr().f[2]++,rr().s[3]++,t.editing)rr().b[1][1]++;else return rr().b[1][0]++,rr().s[4]++,{value:e.value};return rr().s[5]++,{}}render(){rr().f[3]++;let e,t;return rr().s[6]++,this.props.multi?(rr().b[2][0]++,rr().s[7]++,e="textarea",rr().s[8]++,t=["maputnik-string","maputnik-string--multi"]):(rr().b[2][1]++,rr().s[9]++,e="input",rr().s[10]++,t=["maputnik-string"]),rr().s[11]++,this.props.disabled?(rr().b[3][0]++,rr().s[12]++,t.push("maputnik-string--disabled")):rr().b[3][1]++,rr().s[13]++,In.createElement(e,{"aria-label":this.props["aria-label"],"data-wd-key":this.props["data-wd-key"],spellCheck:Object.prototype.hasOwnProperty.call(this.props,"spellCheck")?(rr().b[4][0]++,this.props.spellCheck):(rr().b[4][1]++,e!=="input"),disabled:this.props.disabled,className:t.join(" "),style:this.props.style,value:this.state.value===void 0?(rr().b[5][0]++,""):(rr().b[5][1]++,this.state.value),placeholder:this.props.default,title:this.props.title,onChange:i=>{rr().f[4]++,rr().s[14]++,this.setState({editing:!0,value:i.target.value},()=>{rr().f[5]++,rr().s[15]++,this.props.onInput?(rr().b[6][0]++,rr().s[16]++,this.props.onInput(this.state.value)):rr().b[6][1]++})},onBlur:()=>{rr().f[6]++,rr().s[17]++,this.state.value!==this.props.value?(rr().b[7][0]++,rr().s[18]++,this.setState({editing:!1}),rr().s[19]++,this.props.onChange?(rr().b[8][0]++,rr().s[20]++,this.props.onChange(this.state.value)):rr().b[8][1]++):rr().b[7][1]++},onKeyDown:i=>{rr().f[7]++,rr().s[21]++,rr().b[10][0]++,i.keyCode===13&&(rr().b[10][1]++,this.props.onChange)?(rr().b[9][0]++,rr().s[22]++,this.props.onChange(this.state.value)):rr().b[9][1]++},required:this.props.required})}}function GA(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",e="599a12b14a1057b6bb554b629d0d81238d4af16c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",statementMap:{0:{start:{line:8,column:26},end:{line:38,column:1}},1:{start:{line:16,column:22},end:{line:16,column:110}},2:{start:{line:16,column:73},end:{line:16,column:109}},3:{start:{line:17,column:2},end:{line:37,column:4}},4:{start:{line:39,column:18},end:{line:39,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:26},end:{line:8,column:27}},loc:{start:{line:15,column:6},end:{line:38,column:1}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:16,column:66},end:{line:16,column:67}},loc:{start:{line:16,column:73},end:{line:16,column:109}},line:16}},branchMap:{0:{loc:{start:{line:14,column:2},end:{line:14,column:18}},type:"default-arg",locations:[{start:{line:14,column:13},end:{line:14,column:18}}],line:14},1:{loc:{start:{line:16,column:34},end:{line:16,column:60}},type:"binary-expr",locations:[{start:{line:16,column:34},end:{line:16,column:54}},{start:{line:16,column:58},end:{line:16,column:60}}],line:16},2:{loc:{start:{line:25,column:8},end:{line:25,column:79}},type:"binary-expr",locations:[{start:{line:25,column:8},end:{line:25,column:16}},{start:{line:25,column:36},end:{line:25,column:79}}],line:25},3:{loc:{start:{line:26,column:8},end:{line:34,column:9}},type:"binary-expr",locations:[{start:{line:26,column:8},end:{line:26,column:17}},{start:{line:26,column:37},end:{line:34,column:9}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx"],names:[],mappings:"AA0BI,SAKI,KALJ;AAzBJ,SAAQ,UAAS;AACjB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AACtD,SAAS,iBAAiB;AAU1B,MAAM,oBAAsD,CAAC;AAAA,EAC3D;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,WAAW;AACb,MAAM;AACJ,QAAM,cAAkC,OAAO,KAAK,GAAG,MAAM,KAAK,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,UAAU,EAAE,QAAQ,MAAM,GAAG,CAAC,CAAC,CAAC;AAC7H,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,MAAM;AAAA,MAAG,WAAW,GAAG,MAAM;AAAA,MAC3C,eAAa;AAAA,MACb;AAAA,MAEC;AAAA,oBACC,oBAAC,eAAY,OAAc,UAAU,MAAM;AAAA,QAE5C,CAAC,YACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS;AAAA,YACT;AAAA,YACA;AAAA,YACA,eAAa,QAAQ;AAAA;AAAA,QACvB;AAAA;AAAA;AAAA,EAEJ;AAEJ;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"599a12b14a1057b6bb554b629d0d81238d4af16c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return GA=function(){return s},s}GA();GA().s[0]++;const eTe=({t:n,value:e,wdKey:t,onChange:i,error:r,disabled:o=(GA().b[0][0]++,!1)})=>{GA().f[0]++;const s=(GA().s[1]++,Object.keys((GA().b[1][0]++,pp.layer.type.values||(GA().b[1][1]++,{}))).map(a=>(GA().f[1]++,GA().s[2]++,[a,$5.startCase(a.replace(/-/g," "))])));return GA().s[3]++,oe.jsxs(cs,{label:n("Type"),fieldSpec:pp.layer.type,"data-wd-key":t,error:r,children:[(GA().b[2][0]++,o&&(GA().b[2][1]++,oe.jsx(Fm,{value:e,disabled:!0}))),(GA().b[3][0]++,!o&&(GA().b[3][1]++,oe.jsx(HC,{options:s,onChange:i,value:e,"data-wd-key":t+".select"})))]})},_oe=(GA().s[4]++,Do()(eTe));function R5(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",e="faa51332e301a2db02ecf3d9679788ae744c6d26",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",statementMap:{0:{start:{line:5,column:16},end:{line:23,column:1}},1:{start:{line:6,column:2},end:{line:22,column:4}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:16},end:{line:5,column:17}},loc:{start:{line:5,column:27},end:{line:23,column:1}},line:5}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx"],names:[],mappings:"AAkBM;AAjBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AASxB,MAAM,UAAkC,CAAC,UAAU;AACjD,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAM;AAAA,MAAK,WAAW,OAAO,MAAM;AAAA,MACxC,eAAa,MAAM;AAAA,MACnB,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,MAAM;AAAA,UACb,SAAS,MAAM;AAAA,UACf,eAAa,MAAM,QAAQ;AAAA;AAAA,MAC7B;AAAA;AAAA,EACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"faa51332e301a2db02ecf3d9679788ae744c6d26"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return R5=function(){return s},s}R5();R5().s[0]++;const xoe=n=>(R5().f[0]++,R5().s[1]++,oe.jsx(cs,{label:"ID",fieldSpec:Wr.layer.id,"data-wd-key":n.wdKey,error:n.error,children:oe.jsx(Fm,{value:n.value,onInput:n.onChange,"data-wd-key":n.wdKey+".input"})}));function $w(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function yl(){return yl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},yl.apply(null,arguments)}var tTe=Y1();const dr=vu(tTe);var qI={exports:{}},Rs={};var HQ;function nTe(){if(HQ)return Rs;HQ=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),B=Symbol.for("react.offscreen"),P;P=Symbol.for("react.module.reference");function U(z){if(typeof z=="object"&&z!==null){var V=z.$$typeof;switch(V){case n:switch(z=z.type,z){case t:case r:case i:case d:case m:return z;default:switch(z=z&&z.$$typeof,z){case a:case s:case c:case M:case v:case o:return z;default:return V}}case e:return V}}}return Rs.ContextConsumer=s,Rs.ContextProvider=o,Rs.Element=n,Rs.ForwardRef=c,Rs.Fragment=t,Rs.Lazy=M,Rs.Memo=v,Rs.Portal=e,Rs.Profiler=r,Rs.StrictMode=i,Rs.Suspense=d,Rs.SuspenseList=m,Rs.isAsyncMode=function(){return!1},Rs.isConcurrentMode=function(){return!1},Rs.isContextConsumer=function(z){return U(z)===s},Rs.isContextProvider=function(z){return U(z)===o},Rs.isElement=function(z){return typeof z=="object"&&z!==null&&z.$$typeof===n},Rs.isForwardRef=function(z){return U(z)===c},Rs.isFragment=function(z){return U(z)===t},Rs.isLazy=function(z){return U(z)===M},Rs.isMemo=function(z){return U(z)===v},Rs.isPortal=function(z){return U(z)===e},Rs.isProfiler=function(z){return U(z)===r},Rs.isStrictMode=function(z){return U(z)===i},Rs.isSuspense=function(z){return U(z)===d},Rs.isSuspenseList=function(z){return U(z)===m},Rs.isValidElementType=function(z){return typeof z=="string"||typeof z=="function"||z===t||z===r||z===i||z===d||z===m||z===B||typeof z=="object"&&z!==null&&(z.$$typeof===M||z.$$typeof===v||z.$$typeof===o||z.$$typeof===s||z.$$typeof===c||z.$$typeof===P||z.getModuleId!==void 0)},Rs.typeOf=U,Rs}var ZQ;function iTe(){return ZQ||(ZQ=1,qI.exports=nTe()),qI.exports}iTe();const XQ=n=>typeof n=="object"&&n!=null&&n.nodeType===1,JQ=(n,e)=>(!e||n!=="hidden")&&n!=="visible"&&n!=="clip",Hw=(n,e)=>{if(n.clientHeight<n.scrollHeight||n.clientWidth<n.scrollWidth){const t=getComputedStyle(n,null);return JQ(t.overflowY,e)||JQ(t.overflowX,e)||(i=>{const r=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(i);return!!r&&(r.clientHeight<i.scrollHeight||r.clientWidth<i.scrollWidth)})(n)}return!1},Zw=(n,e,t,i,r,o,s,a)=>o<n&&s>e||o>n&&s<e?0:o<=n&&a<=t||s>=e&&a>=t?o-n-i:s>e&&a<t||o<n&&a>t?s-e+r:0,rTe=n=>{const e=n.parentElement;return e??(n.getRootNode().host||null)},oTe=(n,e)=>{var t,i,r,o;if(typeof document>"u")return[];const{inline:s,boundary:a,skipOverflowHiddenElements:c}=e,d=typeof a=="function"?a:xe=>xe!==a;if(!XQ(n))throw new TypeError("Invalid target");const m=document.scrollingElement||document.documentElement,v=[];let M=n;for(;XQ(M)&&d(M);){if(M=rTe(M),M===m){v.push(M);break}M!=null&&M===document.body&&Hw(M)&&!Hw(document.documentElement)||M!=null&&Hw(M,c)&&v.push(M)}const B=(i=(t=window.visualViewport)==null?void 0:t.width)!=null?i:innerWidth,P=(o=(r=window.visualViewport)==null?void 0:r.height)!=null?o:innerHeight,{scrollX:U,scrollY:z}=window,{height:V,width:Z,top:X,right:re,bottom:ie,left:te}=n.getBoundingClientRect(),{top:q,right:le,left:ce}=(xe=>{const Te=window.getComputedStyle(xe);return{top:parseFloat(Te.scrollMarginTop)||0,right:parseFloat(Te.scrollMarginRight)||0,bottom:parseFloat(Te.scrollMarginBottom)||0,left:parseFloat(Te.scrollMarginLeft)||0}})(n);let ve=X-q,ge=s==="center"?te+Z/2-ce+le:s==="end"?re+le:te-ce;const Ee=[];for(let xe=0;xe<v.length;xe++){const Te=v[xe],{height:Fe,width:Ie,top:Ye,right:At,bottom:mt,left:Ue}=Te.getBoundingClientRect();if(X>=0&&te>=0&&ie<=P&&re<=B&&(Te===m&&!Hw(Te)||X>=Ye&&ie<=mt&&te>=Ue&&re<=At))return Ee;const De=getComputedStyle(Te),Ge=parseInt(De.borderLeftWidth,10),Re=parseInt(De.borderTopWidth,10),St=parseInt(De.borderRightWidth,10),ut=parseInt(De.borderBottomWidth,10);let kt=0,Ut=0;const Le="offsetWidth"in Te?Te.offsetWidth-Te.clientWidth-Ge-St:0,ke="offsetHeight"in Te?Te.offsetHeight-Te.clientHeight-Re-ut:0,Oe="offsetWidth"in Te?Te.offsetWidth===0?0:Ie/Te.offsetWidth:0,Ze="offsetHeight"in Te?Te.offsetHeight===0?0:Fe/Te.offsetHeight:0;if(m===Te)kt=Zw(z,z+P,P,Re,ut,z+ve,z+ve+V,V),Ut=s==="start"?ge:s==="center"?ge-B/2:s==="end"?ge-B:Zw(U,U+B,B,Ge,St,U+ge,U+ge+Z,Z),kt=Math.max(0,kt+z),Ut=Math.max(0,Ut+U);else{kt=Zw(Ye,mt,Fe,Re,ut+ke,ve,ve+V,V),Ut=s==="start"?ge-Ue-Ge:s==="center"?ge-(Ue+Ie/2)+Le/2:s==="end"?ge-At+St+Le:Zw(Ue,At,Ie,Ge,St+Le,ge,ge+Z,Z);const{scrollLeft:bt,scrollTop:yt}=Te;kt=Ze===0?0:Math.max(0,Math.min(yt+kt/Ze,Te.scrollHeight-Fe/Ze+ke)),Ut=Oe===0?0:Math.max(0,Math.min(bt+Ut/Oe,Te.scrollWidth-Ie/Oe+Le)),ve+=yt-kt,ge+=bt-Ut}Ee.push({el:Te,top:kt,left:Ut})}return Ee};var E2=function(){return E2=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},E2.apply(this,arguments)};var sTe=0;function Moe(){}function aTe(n,e){if(n){var t=oTe(n,{boundary:e});t.forEach(function(i){var r=i.el,o=i.top,s=i.left;r.scrollTop=o,r.scrollLeft=s})}}function eq(n,e,t){var i=n===e||e instanceof t.Node&&n.contains&&n.contains(e);return i}function woe(n,e){var t;function i(){t&&clearTimeout(t)}function r(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];i(),t=setTimeout(function(){t=null,n.apply(void 0,s)},e)}return r.cancel=i,r}function b1(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return e.some(function(a){return a&&a.apply(void 0,[i].concat(o)),i.preventDownshiftDefault||i.hasOwnProperty("nativeEvent")&&i.nativeEvent.preventDownshiftDefault})}}function Xw(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){e.forEach(function(r){typeof r=="function"?r(i):r&&(r.current=i)})}}function lTe(){return String(sTe++)}function lP(n,e){return!n||!e?n:Object.keys(n).reduce(function(t,i){return t[i]=Soe(e,i)?e[i]:n[i],t},{})}function Soe(n,e){return n[e]!==void 0}function uTe(n){var e=n.key,t=n.keyCode;return t>=37&&t<=40&&e.indexOf("Arrow")!==0?"Arrow"+e:e}function Jw(n,e,t,i,r){var o=t.length;if(o===0)return-1;var s=o-1;(typeof n!="number"||n<0||n>s)&&(n=e>0?-1:s+1);var a=n+e;a<0?a=s:a>s&&(a=0);var c=m6(a,e<0,t,i,r);return c===-1?n>=o?-1:n:c}function m6(n,e,t,i,r){r===void 0&&(r=!1);var o=t.length;if(e){for(var s=n;s>=0;s--)if(!i(t[s],s))return s}else for(var a=n;a<o;a++)if(!i(t[a],a))return a;return r?m6(e?o-1:0,e,t,i):-1}function tq(n,e,t,i){return i===void 0&&(i=!0),t&&e.some(function(r){return r&&(eq(r,n,t)||i&&eq(r,t.document.activeElement,t))})}var cTe=woe(function(n){Eoe(n).textContent=""},500);function Eoe(n){var e=n.getElementById("a11y-status-message");return e||(e=n.createElement("div"),e.setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),n.body.appendChild(e),e)}function ATe(n,e){if(!(!n||!e)){var t=Eoe(e);t.textContent=n,cTe(e)}}function hTe(n){var e=n?.getElementById("a11y-status-message");e&&e.remove()}var Boe={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function dTe(n,e,t){var i=n.props,r=n.type,o={};Object.keys(e).forEach(function(s){fTe(s,n,e,t),t[s]!==e[s]&&(o[s]=t[s])}),i.onStateChange&&Object.keys(o).length&&i.onStateChange(yl({type:r},o))}function fTe(n,e,t,i){var r=e.props,o=e.type,s="on"+xK(n)+"Change";r[s]&&i[n]!==void 0&&i[n]!==t[n]&&r[s](yl({type:o},i))}function pTe(n,e){return e.changes}var nq=woe(function(n,e){ATe(n,e)},200),mTe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?wt.useLayoutEffect:wt.useEffect,gTe="useId"in In?function(e){var t=e.id,i=e.labelId,r=e.menuId,o=e.getItemId,s=e.toggleButtonId,a=e.inputId,c="downshift-"+In.useId();t||(t=c);var d=wt.useMemo(function(){return{labelId:i||t+"-label",menuId:r||t+"-menu",getItemId:o||function(m){return t+"-item-"+m},toggleButtonId:s||t+"-toggle-button",inputId:a||t+"-input"}},[o,t,a,i,r,s]);return d}:function(e){var t=e.id,i=t===void 0?"downshift-"+lTe():t,r=e.labelId,o=e.menuId,s=e.getItemId,a=e.toggleButtonId,c=e.inputId,d=wt.useMemo(function(){return{labelId:r||i+"-label",menuId:o||i+"-menu",getItemId:s||function(m){return i+"-item-"+m},toggleButtonId:a||i+"-toggle-button",inputId:c||i+"-input"}},[s,i,c,r,o,a]);return d};function yTe(n,e,t,i){var r,o;if(n===void 0){if(e===void 0)throw new Error(i);r=t[e],o=e}else o=e===void 0?t.indexOf(n):e,r=n;return[r,o]}function xK(n){return""+n.slice(0,1).toUpperCase()+n.slice(1)}function Ooe(n){var e=wt.useRef(n);return e.current=n,e}function vTe(n,e,t,i){var r=wt.useRef(),o=wt.useRef(),s=wt.useCallback(function(B,P){o.current=P,B=lP(B,P.props);var U=n(B,P),z=P.props.stateReducer(B,yl({},P,{changes:U}));return z},[n]),a=wt.useReducer(s,e,t),c=a[0],d=a[1],m=Ooe(e),v=wt.useCallback(function(B){return d(yl({props:m.current},B))},[m]),M=o.current;return wt.useEffect(function(){var B=lP(r.current,M?.props),P=M&&r.current&&!i(B,c);P&&dTe(M,B,c),r.current=c},[c,M,i]),[c,v]}var R4={itemToString:function(e){return e?String(e):""},itemToKey:function(e){return e},stateReducer:pTe,scrollIntoView:aTe,environment:typeof window>"u"?void 0:window};function Bv(n,e,t){t===void 0&&(t=Boe);var i=n["default"+xK(e)];return i!==void 0?i:t[e]}function P4(n,e,t){t===void 0&&(t=Boe);var i=n[e];if(i!==void 0)return i;var r=n["initial"+xK(e)];return r!==void 0?r:Bv(n,e,t)}function bTe(n){var e=P4(n,"selectedItem"),t=P4(n,"isOpen"),i=STe(n),r=P4(n,"inputValue");return{highlightedIndex:i<0&&e&&t?n.items.findIndex(function(o){return n.itemToKey(o)===n.itemToKey(e)}):i,isOpen:t,selectedItem:e,inputValue:r}}function L4(n,e,t){var i=n.items,r=n.initialHighlightedIndex,o=n.defaultHighlightedIndex,s=n.isItemDisabled,a=n.itemToKey,c=e.selectedItem,d=e.highlightedIndex;return i.length===0?-1:r!==void 0&&d===r&&!s(i[r],r)?r:o!==void 0&&!s(i[o],o)?o:c?i.findIndex(function(m){return a(c)===a(m)}):t<0&&!s(i[i.length-1],i.length-1)?i.length-1:t>0&&!s(i[0],0)?0:-1}function CTe(n,e,t){var i=wt.useRef({isMouseDown:!1,isTouchMove:!1,isTouchEnd:!1});function r(){return t.map(function(o){return o.current})}return wt.useEffect(function(){if(!n)return Moe;function o(){i.current.isTouchEnd=!1,i.current.isMouseDown=!0}function s(m){i.current.isMouseDown=!1,tq(m.target,r(),n)||e()}function a(){i.current.isTouchEnd=!1,i.current.isTouchMove=!1}function c(){i.current.isTouchMove=!0}function d(m){i.current.isTouchEnd=!0,!i.current.isTouchMove&&!tq(m.target,r(),n,!1)&&e()}return n.addEventListener("mousedown",o),n.addEventListener("mouseup",s),n.addEventListener("touchstart",a),n.addEventListener("touchmove",c),n.addEventListener("touchend",d),function(){n.removeEventListener("mousedown",o),n.removeEventListener("mouseup",s),n.removeEventListener("touchstart",a),n.removeEventListener("touchmove",c),n.removeEventListener("touchend",d)}},[t,n,e]),i.current}var _Te=function(){return Moe};function xTe(n,e,t,i){i===void 0&&(i={});var r=i.document,o=MK();wt.useEffect(function(){if(!(!n||o||!r)){var s=n(e);nq(s,r)}},t),wt.useEffect(function(){return function(){nq.cancel(),hTe(r)}},[r])}function MTe(n){var e=n.highlightedIndex,t=n.isOpen,i=n.itemRefs,r=n.getItemNodeFromIndex,o=n.menuElement,s=n.scrollIntoView,a=wt.useRef(!0);return mTe(function(){e<0||!t||!Object.keys(i.current).length||(a.current===!1?a.current=!0:s(r(e),o))},[e]),a}function iq(n,e,t){var i;t===void 0&&(t=!0);var r=((i=n.items)==null?void 0:i.length)&&e>=0;return yl({isOpen:!1,highlightedIndex:-1},r&&yl({selectedItem:n.items[e],isOpen:Bv(n,"isOpen"),highlightedIndex:Bv(n,"highlightedIndex")},t&&{inputValue:n.itemToString(n.items[e])}))}function wTe(n,e){return n.isOpen===e.isOpen&&n.inputValue===e.inputValue&&n.highlightedIndex===e.highlightedIndex&&n.selectedItem===e.selectedItem}function MK(){var n=In.useRef(!0);return In.useEffect(function(){return n.current=!1,function(){n.current=!0}},[]),n.current}function uP(n){var e=Bv(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}function STe(n){var e=P4(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}var US={environment:dr.shape({addEventListener:dr.func.isRequired,removeEventListener:dr.func.isRequired,document:dr.shape({createElement:dr.func.isRequired,getElementById:dr.func.isRequired,activeElement:dr.any.isRequired,body:dr.any.isRequired}).isRequired,Node:dr.func.isRequired}),itemToString:dr.func,itemToKey:dr.func,stateReducer:dr.func},Ioe=yl({},US,{getA11yStatusMessage:dr.func,highlightedIndex:dr.number,defaultHighlightedIndex:dr.number,initialHighlightedIndex:dr.number,isOpen:dr.bool,defaultIsOpen:dr.bool,initialIsOpen:dr.bool,selectedItem:dr.any,initialSelectedItem:dr.any,defaultSelectedItem:dr.any,id:dr.string,labelId:dr.string,menuId:dr.string,getItemId:dr.func,toggleButtonId:dr.string,onSelectedItemChange:dr.func,onHighlightedIndexChange:dr.func,onStateChange:dr.func,onIsOpenChange:dr.func,scrollIntoView:dr.func});function ETe(n,e,t){var i=e.type,r=e.props,o;switch(i){case t.ItemMouseMove:o={highlightedIndex:e.disabled?-1:e.index};break;case t.MenuMouseLeave:o={highlightedIndex:-1};break;case t.ToggleButtonClick:case t.FunctionToggleMenu:o={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:L4(r,n,0)};break;case t.FunctionOpenMenu:o={isOpen:!0,highlightedIndex:L4(r,n,0)};break;case t.FunctionCloseMenu:o={isOpen:!1};break;case t.FunctionSetHighlightedIndex:o={highlightedIndex:r.isItemDisabled(r.items[e.highlightedIndex],e.highlightedIndex)?-1:e.highlightedIndex};break;case t.FunctionSetInputValue:o={inputValue:e.inputValue};break;case t.FunctionReset:o={highlightedIndex:uP(r),isOpen:Bv(r,"isOpen"),selectedItem:Bv(r,"selectedItem"),inputValue:Bv(r,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return yl({},n,o)}E2(E2({},Ioe),{items:dr.array.isRequired,isItemDisabled:dr.func});E2(E2({},R4),{isItemDisabled:function(){return!1}});var wK=0,SK=1,EK=2,BK=3,OK=4,IK=5,TK=6,kK=7,DK=8,g6=9,RK=10,Toe=11,koe=12,PK=13,Doe=14,Roe=15,Poe=16,Loe=17,Uoe=18,LK=19,Koe=20,Foe=21,UK=22,zoe=Object.freeze({__proto__:null,ControlledPropUpdatedSelectedItem:UK,FunctionCloseMenu:Loe,FunctionOpenMenu:Poe,FunctionReset:Foe,FunctionSelectItem:LK,FunctionSetHighlightedIndex:Uoe,FunctionSetInputValue:Koe,FunctionToggleMenu:Roe,InputBlur:g6,InputChange:DK,InputClick:RK,InputKeyDownArrowDown:wK,InputKeyDownArrowUp:SK,InputKeyDownEnd:OK,InputKeyDownEnter:kK,InputKeyDownEscape:EK,InputKeyDownHome:BK,InputKeyDownPageDown:TK,InputKeyDownPageUp:IK,ItemClick:PK,ItemMouseMove:koe,MenuMouseLeave:Toe,ToggleButtonClick:Doe});function BTe(n){var e=bTe(n),t=e.selectedItem,i=e.inputValue;return i===""&&t&&n.defaultInputValue===void 0&&n.initialInputValue===void 0&&n.inputValue===void 0&&(i=n.itemToString(t)),yl({},e,{inputValue:i})}yl({},Ioe,{items:dr.array.isRequired,isItemDisabled:dr.func,inputValue:dr.string,defaultInputValue:dr.string,initialInputValue:dr.string,inputId:dr.string,onInputValueChange:dr.func});function OTe(n,e,t,i){var r=wt.useRef(),o=vTe(n,e,t,i),s=o[0],a=o[1],c=MK();return wt.useEffect(function(){if(Soe(e,"selectedItem")){if(!c){var d=e.itemToKey(e.selectedItem)!==e.itemToKey(r.current);d&&a({type:UK,inputValue:e.itemToString(e.selectedItem)})}r.current=s.selectedItem===r.current?e.selectedItem:s.selectedItem}},[s.selectedItem,e.selectedItem]),[lP(s,e),a]}var ITe=yl({},R4,{isItemDisabled:function(){return!1}});function TTe(n,e){var t,i=e.type,r=e.props,o=e.altKey,s;switch(i){case PK:s={isOpen:Bv(r,"isOpen"),highlightedIndex:uP(r),selectedItem:r.items[e.index],inputValue:r.itemToString(r.items[e.index])};break;case wK:n.isOpen?s={highlightedIndex:Jw(n.highlightedIndex,1,r.items,r.isItemDisabled,!0)}:s={highlightedIndex:o&&n.selectedItem==null?-1:L4(r,n,1),isOpen:r.items.length>=0};break;case SK:n.isOpen?o?s=iq(r,n.highlightedIndex):s={highlightedIndex:Jw(n.highlightedIndex,-1,r.items,r.isItemDisabled,!0)}:s={highlightedIndex:L4(r,n,-1),isOpen:r.items.length>=0};break;case kK:s=iq(r,n.highlightedIndex);break;case EK:s=yl({isOpen:!1,highlightedIndex:-1},!n.isOpen&&{selectedItem:null,inputValue:""});break;case IK:s={highlightedIndex:Jw(n.highlightedIndex,-10,r.items,r.isItemDisabled,!0)};break;case TK:s={highlightedIndex:Jw(n.highlightedIndex,10,r.items,r.isItemDisabled,!0)};break;case BK:s={highlightedIndex:m6(0,!1,r.items,r.isItemDisabled)};break;case OK:s={highlightedIndex:m6(r.items.length-1,!0,r.items,r.isItemDisabled)};break;case g6:s=yl({isOpen:!1,highlightedIndex:-1},n.highlightedIndex>=0&&((t=r.items)==null?void 0:t.length)&&e.selectItem&&{selectedItem:r.items[n.highlightedIndex],inputValue:r.itemToString(r.items[n.highlightedIndex])});break;case DK:s={isOpen:!0,highlightedIndex:uP(r),inputValue:e.inputValue};break;case RK:s={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:L4(r,n,0)};break;case LK:s={selectedItem:e.selectedItem,inputValue:r.itemToString(e.selectedItem)};break;case UK:s={inputValue:e.inputValue};break;default:return ETe(n,e,zoe)}return yl({},n,s)}var kTe=["onMouseLeave","refKey","ref"],DTe=["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"],RTe=["onClick","onPress","refKey","ref"],PTe=["onKeyDown","onChange","onInput","onBlur","onChangeText","onClick","refKey","ref"];cP.stateChangeTypes=zoe;function cP(n){n===void 0&&(n={});var e=yl({},ITe,n),t=e.items,i=e.scrollIntoView,r=e.environment,o=e.getA11yStatusMessage,s=OTe(TTe,e,BTe,wTe),a=s[0],c=s[1],d=a.isOpen,m=a.highlightedIndex,v=a.selectedItem,M=a.inputValue,B=wt.useRef(null),P=wt.useRef({}),U=wt.useRef(null),z=wt.useRef(null),V=MK(),Z=gTe(e),X=wt.useRef(),re=Ooe({state:a,props:e}),ie=wt.useCallback(function(Ge){return P.current[Z.getItemId(Ge)]},[Z]);xTe(o,a,[d,m,v,M],r);var te=MTe({menuElement:B.current,highlightedIndex:m,isOpen:d,itemRefs:P,scrollIntoView:i,getItemNodeFromIndex:ie});wt.useEffect(function(){var Ge=P4(e,"isOpen");Ge&&U.current&&U.current.focus()},[]),wt.useEffect(function(){V||(X.current=t.length)});var q=CTe(r,wt.useCallback(function(){re.current.state.isOpen&&c({type:g6,selectItem:!1})},[c,re]),wt.useMemo(function(){return[B,z,U]},[])),le=_Te();wt.useEffect(function(){d||(P.current={})},[d]),wt.useEffect(function(){var Ge;!d||!(r!=null&&r.document)||!(U!=null&&(Ge=U.current)!=null&&Ge.focus)||r.document.activeElement!==U.current&&U.current.focus()},[d,r]);var ce=wt.useMemo(function(){return{ArrowDown:function(Re){Re.preventDefault(),c({type:wK,altKey:Re.altKey})},ArrowUp:function(Re){Re.preventDefault(),c({type:SK,altKey:Re.altKey})},Home:function(Re){re.current.state.isOpen&&(Re.preventDefault(),c({type:BK}))},End:function(Re){re.current.state.isOpen&&(Re.preventDefault(),c({type:OK}))},Escape:function(Re){var St=re.current.state;(St.isOpen||St.inputValue||St.selectedItem||St.highlightedIndex>-1)&&(Re.preventDefault(),c({type:EK}))},Enter:function(Re){var St=re.current.state;!St.isOpen||Re.which===229||(Re.preventDefault(),c({type:kK}))},PageUp:function(Re){re.current.state.isOpen&&(Re.preventDefault(),c({type:IK}))},PageDown:function(Re){re.current.state.isOpen&&(Re.preventDefault(),c({type:TK}))}}},[c,re]),ve=wt.useCallback(function(Ge){return yl({id:Z.labelId,htmlFor:Z.inputId},Ge)},[Z]),ge=wt.useCallback(function(Ge,Re){var St,ut=Ge===void 0?{}:Ge,kt=ut.onMouseLeave,Ut=ut.refKey,Le=Ut===void 0?"ref":Ut,ke=ut.ref,Oe=$w(ut,kTe),Ze=Re===void 0?{}:Re;return Ze.suppressRefError,yl((St={},St[Le]=Xw(ke,function(bt){B.current=bt}),St.id=Z.menuId,St.role="listbox",St["aria-labelledby"]=Oe&&Oe["aria-label"]?void 0:""+Z.labelId,St.onMouseLeave=b1(kt,function(){c({type:Toe})}),St),Oe)},[c,le,Z]),Ee=wt.useCallback(function(Ge){var Re,St,ut=Ge===void 0?{}:Ge,kt=ut.item,Ut=ut.index,Le=ut.refKey,ke=Le===void 0?"ref":Le,Oe=ut.ref,Ze=ut.onMouseMove,bt=ut.onMouseDown,yt=ut.onClick;ut.onPress;var Mt=ut.disabled,Kt=$w(ut,DTe);Mt!==void 0&&console.warn('Passing "disabled" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useCombobox.');var Dt=re.current,en=Dt.props,Gn=Dt.state,Nn=yTe(kt,Ut,en.items,"Pass either item or index to getItemProps!"),Si=Nn[0],Un=Nn[1],Ln=en.isItemDisabled(Si,Un),Tn="onClick",ti=yt,Bn=function(){q.isTouchEnd||Un===Gn.highlightedIndex||(te.current=!1,c({type:koe,index:Un,disabled:Ln}))},je=function(){c({type:PK,index:Un})},H=function(Q){return Q.preventDefault()};return yl((Re={},Re[ke]=Xw(Oe,function(j){j&&(P.current[Z.getItemId(Un)]=j)}),Re["aria-disabled"]=Ln,Re["aria-selected"]=Un===Gn.highlightedIndex,Re.id=Z.getItemId(Un),Re.role="option",Re),!Ln&&(St={},St[Tn]=b1(ti,je),St),{onMouseMove:b1(Ze,Bn),onMouseDown:b1(bt,H)},Kt)},[c,Z,re,q,te]),xe=wt.useCallback(function(Ge){var Re,St=Ge===void 0?{}:Ge,ut=St.onClick;St.onPress;var kt=St.refKey,Ut=kt===void 0?"ref":kt,Le=St.ref,ke=$w(St,RTe),Oe=re.current.state,Ze=function(){c({type:Doe})};return yl((Re={},Re[Ut]=Xw(Le,function(bt){z.current=bt}),Re["aria-controls"]=Z.menuId,Re["aria-expanded"]=Oe.isOpen,Re.id=Z.toggleButtonId,Re.tabIndex=-1,Re),!ke.disabled&&yl({},{onClick:b1(ut,Ze)}),ke)},[c,re,Z]),Te=wt.useCallback(function(Ge,Re){var St,ut=Ge===void 0?{}:Ge,kt=ut.onKeyDown,Ut=ut.onChange,Le=ut.onInput,ke=ut.onBlur;ut.onChangeText;var Oe=ut.onClick,Ze=ut.refKey,bt=Ze===void 0?"ref":Ze,yt=ut.ref,Mt=$w(ut,PTe),Kt=Re===void 0?{}:Re;Kt.suppressRefError;var Dt=re.current.state,en=function(Bn){var je=uTe(Bn);je&&ce[je]&&ce[je](Bn)},Gn=function(Bn){c({type:DK,inputValue:Bn.target.value})},Nn=function(Bn){if(r!=null&&r.document&&Dt.isOpen&&!q.isMouseDown){var je=Bn.relatedTarget===null&&r.document.activeElement!==r.document.body;c({type:g6,selectItem:!je})}},Si=function(){c({type:RK})},Un="onChange",Ln={};if(!Mt.disabled){var Tn;Ln=(Tn={},Tn[Un]=b1(Ut,Le,Gn),Tn.onKeyDown=b1(kt,en),Tn.onBlur=b1(ke,Nn),Tn.onClick=b1(Oe,Si),Tn)}return yl((St={},St[bt]=Xw(yt,function(ti){U.current=ti}),St["aria-activedescendant"]=Dt.isOpen&&Dt.highlightedIndex>-1?Z.getItemId(Dt.highlightedIndex):"",St["aria-autocomplete"]="list",St["aria-controls"]=Z.menuId,St["aria-expanded"]=Dt.isOpen,St["aria-labelledby"]=Mt&&Mt["aria-label"]?void 0:Z.labelId,St.autoComplete="off",St.id=Z.inputId,St.role="combobox",St.value=Dt.inputValue,St),Ln,Mt)},[c,Z,r,ce,re,q,le]),Fe=wt.useCallback(function(){c({type:Roe})},[c]),Ie=wt.useCallback(function(){c({type:Loe})},[c]),Ye=wt.useCallback(function(){c({type:Poe})},[c]),At=wt.useCallback(function(Ge){c({type:Uoe,highlightedIndex:Ge})},[c]),mt=wt.useCallback(function(Ge){c({type:LK,selectedItem:Ge})},[c]),Ue=wt.useCallback(function(Ge){c({type:Koe,inputValue:Ge})},[c]),De=wt.useCallback(function(){c({type:Foe})},[c]);return{getItemProps:Ee,getLabelProps:ve,getMenuProps:ge,getInputProps:Te,getToggleButtonProps:xe,toggleMenu:Fe,openMenu:Ye,closeMenu:Ie,setHighlightedIndex:At,setInputValue:Ue,selectItem:mt,reset:De,highlightedIndex:m,isOpen:d,selectedItem:v,inputValue:M}}US.stateReducer,US.itemToKey,US.environment,dr.array,dr.array,dr.array,dr.func,dr.number,dr.number,dr.number,dr.func,dr.func,dr.string,dr.string;R4.itemToKey,R4.stateReducer,R4.environment;function fi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",e="73020a5a2032027cc342d42db613082f6da43a81",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:22}},1:{start:{line:13,column:28},end:{line:13,column:55}},2:{start:{line:14,column:18},end:{line:14,column:36}},3:{start:{line:15,column:36},end:{line:15,column:62}},4:{start:{line:16,column:24},end:{line:19,column:22}},5:{start:{line:17,column:15},end:{line:17,column:34}},6:{start:{line:18,column:4},end:{line:18,column:72}},7:{start:{line:18,column:36},end:{line:18,column:70}},8:{start:{line:20,column:24},end:{line:25,column:8}},9:{start:{line:21,column:4},end:{line:24,column:5}},10:{start:{line:22,column:20},end:{line:22,column:84}},11:{start:{line:23,column:6},end:{line:23,column:48}},12:{start:{line:33,column:6},end:{line:55,column:4}},13:{start:{line:36,column:28},end:{line:36,column:47}},14:{start:{line:38,column:6},end:{line:40,column:7}},15:{start:{line:39,column:8},end:{line:39,column:51}},16:{start:{line:41,column:6},end:{line:41,column:28}},17:{start:{line:44,column:16},end:{line:44,column:51}},18:{start:{line:45,column:6},end:{line:45,column:18}},19:{start:{line:46,column:6},end:{line:46,column:56}},20:{start:{line:49,column:6},end:{line:53,column:7}},21:{start:{line:50,column:8},end:{line:50,column:20}},22:{start:{line:51,column:8},end:{line:51,column:40}},23:{start:{line:52,column:8},end:{line:52,column:19}},24:{start:{line:56,column:2},end:{line:60,column:30}},25:{start:{line:57,column:4},end:{line:59,column:5}},26:{start:{line:58,column:6},end:{line:58,column:22}},27:{start:{line:61,column:2},end:{line:64,column:22}},28:{start:{line:62,column:4},end:{line:62,column:53}},29:{start:{line:63,column:4},end:{line:63,column:69}},30:{start:{line:63,column:17},end:{line:63,column:68}},31:{start:{line:65,column:2},end:{line:67,column:14}},32:{start:{line:66,column:4},end:{line:66,column:26}},33:{start:{line:68,column:2},end:{line:103,column:7}},34:{start:{line:76,column:25},end:{line:76,column:35}},35:{start:{line:87,column:79},end:{line:100,column:9}}},fnMap:{0:{name:"InputAutocomplete",decl:{start:{line:6,column:24},end:{line:6,column:41}},loc:{start:{line:12,column:3},end:{line:104,column:1}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:9,column:13},end:{line:9,column:14}},loc:{start:{line:9,column:19},end:{line:10,column:3}},line:9},2:{name:"(anonymous_2)",decl:{start:{line:16,column:38},end:{line:16,column:39}},loc:{start:{line:16,column:44},end:{line:19,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:18,column:26},end:{line:18,column:27}},loc:{start:{line:18,column:36},end:{line:18,column:70}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:42},end:{line:20,column:43}},loc:{start:{line:20,column:48},end:{line:25,column:3}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:36,column:47}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:18},end:{line:37,column:19}},loc:{start:{line:37,column:38},end:{line:42,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:43,column:26},end:{line:43,column:27}},loc:{start:{line:43,column:48},end:{line:47,column:5}},line:43},8:{name:"(anonymous_8)",decl:{start:{line:48,column:24},end:{line:48,column:25}},loc:{start:{line:48,column:47},end:{line:54,column:5}},line:48},9:{name:"(anonymous_9)",decl:{start:{line:56,column:18},end:{line:56,column:19}},loc:{start:{line:56,column:24},end:{line:60,column:3}},line:56},10:{name:"(anonymous_10)",decl:{start:{line:61,column:18},end:{line:61,column:19}},loc:{start:{line:61,column:24},end:{line:64,column:3}},line:61},11:{name:"(anonymous_11)",decl:{start:{line:63,column:11},end:{line:63,column:12}},loc:{start:{line:63,column:17},end:{line:63,column:68}},line:63},12:{name:"(anonymous_12)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},13:{name:"(anonymous_13)",decl:{start:{line:76,column:19},end:{line:76,column:20}},loc:{start:{line:76,column:25},end:{line:76,column:35}},line:76},14:{name:"(anonymous_14)",decl:{start:{line:87,column:46},end:{line:87,column:47}},loc:{start:{line:87,column:79},end:{line:100,column:9}},line:87}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:14}},type:"default-arg",locations:[{start:{line:8,column:12},end:{line:8,column:14}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:10,column:3}},type:"default-arg",locations:[{start:{line:9,column:13},end:{line:10,column:3}}],line:9},2:{loc:{start:{line:13,column:43},end:{line:13,column:54}},type:"binary-expr",locations:[{start:{line:13,column:43},end:{line:13,column:48}},{start:{line:13,column:52},end:{line:13,column:54}}],line:13},3:{loc:{start:{line:21,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},4:{loc:{start:{line:36,column:28},end:{line:36,column:47}},type:"cond-expr",locations:[{start:{line:36,column:35},end:{line:36,column:42}},{start:{line:36,column:45},end:{line:36,column:47}}],line:36},5:{loc:{start:{line:38,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:38,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},6:{loc:{start:{line:44,column:16},end:{line:44,column:51}},type:"cond-expr",locations:[{start:{line:44,column:31},end:{line:44,column:46}},{start:{line:44,column:49},end:{line:44,column:51}}],line:44},7:{loc:{start:{line:46,column:15},end:{line:46,column:54}},type:"cond-expr",locations:[{start:{line:46,column:30},end:{line:46,column:45}},{start:{line:46,column:48},end:{line:46,column:54}}],line:46},8:{loc:{start:{line:49,column:6},end:{line:53,column:7}},type:"if",locations:[{start:{line:49,column:6},end:{line:53,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},9:{loc:{start:{line:51,column:17},end:{line:51,column:38}},type:"cond-expr",locations:[{start:{line:51,column:28},end:{line:51,column:34}},{start:{line:51,column:37},end:{line:51,column:38}}],line:51},10:{loc:{start:{line:57,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:59,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:66,column:13},end:{line:66,column:24}},type:"binary-expr",locations:[{start:{line:66,column:13},end:{line:66,column:18}},{start:{line:66,column:22},end:{line:66,column:24}}],line:66},12:{loc:{start:{line:87,column:18},end:{line:100,column:10}},type:"binary-expr",locations:[{start:{line:87,column:18},end:{line:87,column:24}},{start:{line:87,column:28},end:{line:100,column:10}}],line:87}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0],1:[0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx"],names:[],mappings:"AAkFI,SACE,KADF;AAlFJ,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,mBAAkB;AAE1B,MAAM,aAAa;AASnB,wBAAwB,kBAAkB;AAAA,EACxC;AAAA,EACA,UAAU,CAAC;AAAA,EACX,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,cAAc;AAChB,GAA2B;AACzB,QAAM,CAAC,OAAO,QAAQ,IAAI,MAAM,SAAS,SAAS,EAAE;AACpD,QAAM,UAAU,MAAM,OAAuB,IAAI;AACjD,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,UAAU;AAE3D,QAAM,gBAAgB,MAAM,QAAQ,MAAM;AACxC,UAAM,KAAK,MAAM,YAAY;AAC7B,WAAO,QAAQ,OAAO,CAAC,SAAS,KAAK,CAAC,EAAE,YAAY,EAAE,SAAS,EAAE,CAAC;AAAA,EACpE,GAAG,CAAC,SAAS,KAAK,CAAC;AAEnB,QAAM,gBAAgB,MAAM,YAAY,MAAM;AAC5C,QAAI,QAAQ,SAAS;AACnB,YAAM,QAAQ,OAAO,cAAc,QAAQ,QAAQ,sBAAsB,EAAE;AAC3E,mBAAa,KAAK,IAAI,OAAO,UAAU,CAAC;AAAA,IAC1C;AAAA,EACF,GAAG,CAAC,CAAC;AAEL,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY;AAAA,IACd,OAAO;AAAA,IACP,YAAY;AAAA,IACZ,cAAc,CAAC,SAAU,OAAO,KAAK,CAAC,IAAI;AAAA,IAC1C,cAAc,CAAC,QAAQ,WAAW;AAChC,UAAI,OAAO,SAAS,YAAY,iBAAiB,YAAY;AAC3D,eAAO,EAAC,GAAG,OAAO,SAAS,QAAQ,KAAI;AAAA,MACzC;AACA,aAAO,OAAO;AAAA,IAChB;AAAA,IACA,sBAAsB,CAAC,EAAC,aAAY,MAAM;AACxC,YAAM,IAAI,eAAe,aAAa,CAAC,IAAI;AAC3C,eAAS,CAAC;AACV,eAAS,eAAe,aAAa,CAAC,IAAI,MAAS;AAAA,IACrD;AAAA,IACA,oBAAoB,CAAC,EAAC,YAAY,EAAC,MAAM;AACvC,UAAI,OAAO,MAAM,UAAU;AACzB,iBAAS,CAAC;AACV,iBAAS,MAAM,KAAK,SAAY,CAAC;AACjC,iBAAS;AAAA,MACX;AAAA,IACF;AAAA,EACF,CAAC;AAED,QAAM,UAAU,MAAM;AACpB,QAAI,QAAQ;AACV,oBAAc;AAAA,IAChB;AAAA,EACF,GAAG,CAAC,QAAQ,aAAa,CAAC;AAE1B,QAAM,UAAU,MAAM;AACpB,WAAO,iBAAiB,UAAU,aAAa;AAC/C,WAAO,MAAM,OAAO,oBAAoB,UAAU,aAAa;AAAA,EACjE,GAAG,CAAC,aAAa,CAAC;AAElB,QAAM,UAAU,MAAM;AACpB,aAAS,SAAS,EAAE;AAAA,EACtB,GAAG,CAAC,KAAK,CAAC;AAEV,SACE,qBAAC,SAAI,WAAU,yBACb;AAAA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,cAAc;AAAA,UAChB,cAAc;AAAA,UACd,WAAW;AAAA,UACX,YAAY;AAAA,UACZ,SAAS,MAAM,SAAS;AAAA,QAC1B,CAAC;AAAA;AAAA,IACH;AAAA,IACA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,aAAa,CAAC,GAAG,EAAC,kBAAkB,KAAI,CAAC;AAAA,QAC7C,KAAK;AAAA,QACL,OAAO,EAAC,UAAU,SAAS,UAAU,QAAQ,WAAW,QAAQ,IAAG;AAAA,QACnE,WAAU;AAAA,QAET,oBACC,cAAc,IAAI,CAAC,MAAM,UACvB;AAAA,UAAC;AAAA;AAAA,YAEE,GAAG,aAAa;AAAA,cACf;AAAA,cACA;AAAA,cACA,WAAW,WAAW,mCAAmC;AAAA,gBACvD,4CAA4C,qBAAqB;AAAA,cACnE,CAAC;AAAA,YACH,CAAC;AAAA,YAEA,eAAK,CAAC;AAAA;AAAA,UATF,KAAK,CAAC;AAAA,QAUb,CACD;AAAA;AAAA,IACL;AAAA,KACF;AAEJ;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"73020a5a2032027cc342d42db613082f6da43a81"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return fi=function(){return s},s}fi();const rq=(fi().s[0]++,140);function RM({value:n,options:e=(fi().b[0][0]++,[]),onChange:t=(fi().b[1][0]++,()=>{fi().f[1]++}),"aria-label":i}){fi().f[0]++;const[r,o]=(fi().s[1]++,In.useState((fi().b[2][0]++,n||(fi().b[2][1]++,"")))),s=(fi().s[2]++,In.useRef(null)),[a,c]=(fi().s[3]++,In.useState(rq)),d=(fi().s[4]++,In.useMemo(()=>{fi().f[2]++;const V=(fi().s[5]++,r.toLowerCase());return fi().s[6]++,e.filter(Z=>(fi().f[3]++,fi().s[7]++,Z[0].toLowerCase().includes(V)))},[e,r])),m=(fi().s[8]++,In.useCallback(()=>{if(fi().f[4]++,fi().s[9]++,s.current){fi().b[3][0]++;const V=(fi().s[10]++,window.innerHeight-s.current.getBoundingClientRect().top);fi().s[11]++,c(Math.min(V,rq))}else fi().b[3][1]++},[])),{isOpen:v,getMenuProps:M,getInputProps:B,getItemProps:P,highlightedIndex:U,openMenu:z}=(fi().s[12]++,cP({items:d,inputValue:r,itemToString:V=>(fi().f[5]++,fi().s[13]++,V?(fi().b[4][0]++,V[0]):(fi().b[4][1]++,"")),stateReducer:(V,Z)=>(fi().f[6]++,fi().s[14]++,Z.type===cP.stateChangeTypes.InputClick?(fi().b[5][0]++,fi().s[15]++,{...Z.changes,isOpen:!0}):(fi().b[5][1]++,fi().s[16]++,Z.changes)),onSelectedItemChange:({selectedItem:V})=>{fi().f[7]++;const Z=(fi().s[17]++,V?(fi().b[6][0]++,V[0]):(fi().b[6][1]++,""));fi().s[18]++,o(Z),fi().s[19]++,t(V?(fi().b[7][0]++,V[0]):(fi().b[7][1]++,void 0))},onInputValueChange:({inputValue:V})=>{fi().f[8]++,fi().s[20]++,typeof V=="string"?(fi().b[8][0]++,fi().s[21]++,o(V),fi().s[22]++,t(V===""?(fi().b[9][0]++,void 0):(fi().b[9][1]++,V)),fi().s[23]++,z()):fi().b[8][1]++}}));return fi().s[24]++,In.useEffect(()=>{fi().f[9]++,fi().s[25]++,v?(fi().b[10][0]++,fi().s[26]++,m()):fi().b[10][1]++},[v,m]),fi().s[27]++,In.useEffect(()=>(fi().f[10]++,fi().s[28]++,window.addEventListener("resize",m),fi().s[29]++,()=>(fi().f[11]++,fi().s[30]++,window.removeEventListener("resize",m))),[m]),fi().s[31]++,In.useEffect(()=>{fi().f[12]++,fi().s[32]++,o((fi().b[11][0]++,n||(fi().b[11][1]++,"")))},[n]),fi().s[33]++,oe.jsxs("div",{className:"maputnik-autocomplete",children:[oe.jsx("input",{...B({"aria-label":i,className:"maputnik-string",spellCheck:!1,onFocus:()=>(fi().f[13]++,fi().s[34]++,z())})}),oe.jsx("div",{...M({},{suppressRefError:!0}),ref:s,style:{position:"fixed",overflow:"auto",maxHeight:a,zIndex:998},className:"maputnik-autocomplete-menu",children:(fi().b[12][0]++,v&&(fi().b[12][1]++,d.map((V,Z)=>(fi().f[14]++,fi().s[35]++,oe.jsx("div",{...P({item:V,index:Z,className:Ig("maputnik-autocomplete-menu-item",{"maputnik-autocomplete-menu-item-selected":U===Z})}),children:V[1]},V[0])))))})]})}function bm(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",e="787db584cc9becf4089365283e16f9ba747f4840",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",statementMap:{0:{start:{line:6,column:28},end:{line:32,column:1}},1:{start:{line:15,column:2},end:{line:31,column:4}},2:{start:{line:27,column:43},end:{line:27,column:53}},3:{start:{line:33,column:20},end:{line:33,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:28},end:{line:6,column:29}},loc:{start:{line:14,column:6},end:{line:32,column:1}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:8,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:27,column:34},end:{line:27,column:35}},loc:{start:{line:27,column:43},end:{line:27,column:53}},line:27}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:8,column:3}},type:"default-arg",locations:[{start:{line:7,column:13},end:{line:8,column:3}}],line:7},1:{loc:{start:{line:9,column:2},end:{line:9,column:16}},type:"default-arg",locations:[{start:{line:9,column:14},end:{line:9,column:16}}],line:9}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0,2:0},b:{0:[0],1:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx"],names:[],mappings:"AA8BM;AA5BN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA+B,uBAAuB;AAUtD,MAAM,sBAA0D,CAAC;AAAA,EAC/D,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,YAAY,CAAC;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,QAAQ;AAAA,MACjB,WAAW,OAAO,MAAM;AAAA,MACxB;AAAA,MACA,eAAa;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,SAAS,WAAW,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC;AAAA;AAAA,MAC7C;AAAA;AAAA,EACF;AAEJ;AAGA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"787db584cc9becf4089365283e16f9ba747f4840"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return bm=function(){return s},s}bm();bm().s[0]++;const LTe=({onChange:n=(bm().b[0][0]++,()=>{bm().f[1]++}),sourceIds:e=(bm().b[1][0]++,[]),wdKey:t,value:i,error:r,t:o})=>(bm().f[0]++,bm().s[1]++,oe.jsx(cs,{label:o("Source"),fieldSpec:Wr.layer.source,error:r,"data-wd-key":t,children:oe.jsx(RM,{value:i,onChange:n,options:e?.map(s=>(bm().f[2]++,bm().s[2]++,[s,s]))})})),joe=(bm().s[3]++,Do()(LTe));function Cm(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",e="61cb059654b456e27f782356448ebd0362f3cb6a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",statementMap:{0:{start:{line:6,column:33},end:{line:31,column:1}},1:{start:{line:14,column:2},end:{line:30,column:4}},2:{start:{line:26,column:46},end:{line:26,column:52}},3:{start:{line:32,column:25},end:{line:32,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:33},end:{line:6,column:34}},loc:{start:{line:13,column:6},end:{line:31,column:1}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:8,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:26,column:39},end:{line:26,column:40}},loc:{start:{line:26,column:46},end:{line:26,column:52}},line:26}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:8,column:3}},type:"default-arg",locations:[{start:{line:7,column:13},end:{line:8,column:3}}],line:7},1:{loc:{start:{line:9,column:2},end:{line:9,column:21}},type:"default-arg",locations:[{start:{line:9,column:19},end:{line:9,column:21}}],line:9}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0,2:0},b:{0:[0],1:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx"],names:[],mappings:"AA4BM;AA1BN,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA+B,uBAAuB;AAStD,MAAM,2BAAoE,CAAC;AAAA,EACzE,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,iBAAiB,CAAC;AAAA,EAClB;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,cAAc;AAAA,MACvB,WAAW,OAAO,MAAM,cAAc;AAAA,MACtC,eAAY;AAAA,MACZ;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,SAAS,gBAAgB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,MAC5C;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"61cb059654b456e27f782356448ebd0362f3cb6a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Cm=function(){return s},s}Cm();Cm().s[0]++;const UTe=({onChange:n=(Cm().b[0][0]++,()=>{Cm().f[1]++}),sourceLayerIds:e=(Cm().b[1][0]++,[]),value:t,error:i,t:r})=>(Cm().f[0]++,Cm().s[1]++,oe.jsx(cs,{label:r("Source Layer"),fieldSpec:$o.layer["source-layer"],"data-wd-key":"layer-source-layer",error:i,children:oe.jsx(RM,{value:t,onChange:n,options:e?.map(o=>(Cm().f[2]++,Cm().s[2]++,[o,o]))})})),Noe=(Cm().s[3]++,Do()(UTe));function KK(){var n="/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts",e="674dcf7f1706a4f312a810bdf5e5997ddaf065e0",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts",statementMap:{0:{start:{line:1,column:33},end:{line:1,column:97}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts"],names:[],mappings:"AAAO,aAAM,oBAAoB,CAAC,cAAc,UAAU,aAAa,WAAW,cAAc;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"674dcf7f1706a4f312a810bdf5e5997ddaf065e0"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return KK=function(){return s},s}KK();const AP=(KK().s[0]++,["background","raster","hillshade","heatmap","color-relief"]);function _n(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx",e="90da8e5ee6bdbe488a5f45bfae015ac94b0d70a9",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx",statementMap:{0:{start:{line:12,column:13},end:{line:33,column:3}},1:{start:{line:13,column:4},end:{line:16,column:5}},2:{start:{line:13,column:38},end:{line:13,column:60}},3:{start:{line:14,column:6},end:{line:14,column:72}},4:{start:{line:15,column:6},end:{line:15,column:13}},5:{start:{line:17,column:26},end:{line:17,column:52}},6:{start:{line:18,column:18},end:{line:21,column:5}},7:{start:{line:22,column:4},end:{line:27,column:5}},8:{start:{line:23,column:6},end:{line:23,column:39}},9:{start:{line:24,column:6},end:{line:26,column:7}},10:{start:{line:25,column:8},end:{line:25,column:59}},11:{start:{line:28,column:4},end:{line:28,column:30}},12:{start:{line:29,column:4},end:{line:32,column:7}},13:{start:{line:30,column:6},end:{line:30,column:47}},14:{start:{line:31,column:6},end:{line:31,column:32}},15:{start:{line:35,column:4},end:{line:35,column:17}},16:{start:{line:36,column:18},end:{line:40,column:5}},17:{start:{line:41,column:4},end:{line:47,column:5}},18:{start:{line:42,column:6},end:{line:42,column:56}},19:{start:{line:43,column:27},end:{line:43,column:72}},20:{start:{line:44,column:6},end:{line:46,column:7}},21:{start:{line:45,column:8},end:{line:45,column:48}},22:{start:{line:48,column:4},end:{line:48,column:23}},23:{start:{line:51,column:20},end:{line:51,column:34}},24:{start:{line:52,column:20},end:{line:52,column:35}},25:{start:{line:53,column:32},end:{line:53,column:56}},26:{start:{line:54,column:32},end:{line:54,column:56}},27:{start:{line:55,column:4},end:{line:62,column:5}},28:{start:{line:59,column:6},end:{line:61,column:9}},29:{start:{line:65,column:22},end:{line:65,column:54}},30:{start:{line:66,column:4},end:{line:66,column:34}},31:{start:{line:69,column:4},end:{line:86,column:5}},32:{start:{line:71,column:8},end:{line:71,column:18}},33:{start:{line:74,column:8},end:{line:74,column:113}},34:{start:{line:74,column:69},end:{line:74,column:92}},35:{start:{line:74,column:110},end:{line:74,column:111}},36:{start:{line:76,column:8},end:{line:76,column:109}},37:{start:{line:76,column:69},end:{line:76,column:88}},38:{start:{line:76,column:106},end:{line:76,column:107}},39:{start:{line:83,column:8},end:{line:83,column:133}},40:{start:{line:83,column:69},end:{line:83,column:112}},41:{start:{line:83,column:130},end:{line:83,column:131}},42:{start:{line:85,column:8},end:{line:85,column:18}},43:{start:{line:89,column:14},end:{line:89,column:26}},44:{start:{line:90,column:20},end:{line:90,column:52}},45:{start:{line:91,column:19},end:{line:91,column:61}},46:{start:{line:93,column:4},end:{line:106,column:5}},47:{start:{line:94,column:6},end:{line:105,column:11}},48:{start:{line:100,column:27},end:{line:100,column:57}},49:{start:{line:107,column:4},end:{line:165,column:6}},50:{start:{line:124,column:18},end:{line:124,column:56}},51:{start:{line:133,column:33},end:{line:133,column:59}},52:{start:{line:142,column:33},end:{line:142,column:61}},53:{start:{line:150,column:33},end:{line:150,column:69}},54:{start:{line:168,column:17},end:{line:168,column:52}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:13},end:{line:12,column:14}},loc:{start:{line:12,column:19},end:{line:33,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:13,column:31},end:{line:13,column:32}},loc:{start:{line:13,column:38},end:{line:13,column:60}},line:13},2:{name:"(anonymous_2)",decl:{start:{line:29,column:35},end:{line:29,column:36}},loc:{start:{line:29,column:41},end:{line:32,column:5}},line:29},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:49,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:44},end:{line:63,column:3}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:29},end:{line:67,column:3}},line:64},6:{name:"(anonymous_6)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:19},end:{line:87,column:3}},line:68},7:{name:"(anonymous_7)",decl:{start:{line:74,column:57},end:{line:74,column:58}},loc:{start:{line:74,column:69},end:{line:74,column:92}},line:74},8:{name:"(anonymous_8)",decl:{start:{line:74,column:98},end:{line:74,column:99}},loc:{start:{line:74,column:110},end:{line:74,column:111}},line:74},9:{name:"(anonymous_9)",decl:{start:{line:76,column:57},end:{line:76,column:58}},loc:{start:{line:76,column:69},end:{line:76,column:88}},line:76},10:{name:"(anonymous_10)",decl:{start:{line:76,column:94},end:{line:76,column:95}},loc:{start:{line:76,column:106},end:{line:76,column:107}},line:76},11:{name:"(anonymous_11)",decl:{start:{line:83,column:57},end:{line:83,column:58}},loc:{start:{line:83,column:69},end:{line:83,column:112}},line:83},12:{name:"(anonymous_12)",decl:{start:{line:83,column:118},end:{line:83,column:119}},loc:{start:{line:83,column:130},end:{line:83,column:131}},line:83},13:{name:"(anonymous_13)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:11},end:{line:166,column:3}},line:88},14:{name:"(anonymous_14)",decl:{start:{line:100,column:21},end:{line:100,column:22}},loc:{start:{line:100,column:27},end:{line:100,column:57}},line:100},15:{name:"(anonymous_15)",decl:{start:{line:123,column:26},end:{line:123,column:27}},loc:{start:{line:123,column:33},end:{line:125,column:17}},line:123},16:{name:"(anonymous_16)",decl:{start:{line:133,column:26},end:{line:133,column:27}},loc:{start:{line:133,column:33},end:{line:133,column:59}},line:133},17:{name:"(anonymous_17)",decl:{start:{line:142,column:26},end:{line:142,column:27}},loc:{start:{line:142,column:33},end:{line:142,column:61}},line:142},18:{name:"(anonymous_18)",decl:{start:{line:150,column:26},end:{line:150,column:27}},loc:{start:{line:150,column:33},end:{line:150,column:69}},line:150}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:16,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:16,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:27,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},2:{loc:{start:{line:24,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:24,column:6},end:{line:26,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:24,column:10},end:{line:24,column:84}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:54}},{start:{line:24,column:58},end:{line:24,column:84}}],line:24},4:{loc:{start:{line:41,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},5:{loc:{start:{line:43,column:27},end:{line:43,column:72}},type:"binary-expr",locations:[{start:{line:43,column:27},end:{line:43,column:66}},{start:{line:43,column:70},end:{line:43,column:72}}],line:43},6:{loc:{start:{line:44,column:6},end:{line:46,column:7}},type:"if",locations:[{start:{line:44,column:6},end:{line:46,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},7:{loc:{start:{line:55,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:62,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:57,column:6},end:{line:57,column:160}},type:"binary-expr",locations:[{start:{line:57,column:6},end:{line:57,column:25}},{start:{line:57,column:29},end:{line:57,column:52}},{start:{line:57,column:56},end:{line:57,column:106}},{start:{line:57,column:110},end:{line:57,column:160}}],line:57},9:{loc:{start:{line:65,column:22},end:{line:65,column:54}},type:"binary-expr",locations:[{start:{line:65,column:22},end:{line:65,column:48}},{start:{line:65,column:52},end:{line:65,column:54}}],line:65},10:{loc:{start:{line:66,column:11},end:{line:66,column:33}},type:"binary-expr",locations:[{start:{line:66,column:11},end:{line:66,column:27}},{start:{line:66,column:31},end:{line:66,column:33}}],line:66},11:{loc:{start:{line:69,column:4},end:{line:86,column:5}},type:"switch",locations:[{start:{line:70,column:6},end:{line:71,column:18}},{start:{line:72,column:6},end:{line:72,column:23}},{start:{line:73,column:6},end:{line:74,column:113}},{start:{line:75,column:6},end:{line:76,column:109}},{start:{line:77,column:6},end:{line:77,column:21}},{start:{line:78,column:6},end:{line:78,column:20}},{start:{line:79,column:6},end:{line:79,column:18}},{start:{line:80,column:6},end:{line:80,column:28}},{start:{line:81,column:6},end:{line:81,column:18}},{start:{line:82,column:6},end:{line:83,column:133}},{start:{line:84,column:6},end:{line:85,column:18}}],line:69},12:{loc:{start:{line:83,column:69},end:{line:83,column:112}},type:"binary-expr",locations:[{start:{line:83,column:69},end:{line:83,column:88}},{start:{line:83,column:92},end:{line:83,column:112}}],line:83},13:{loc:{start:{line:93,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},14:{loc:{start:{line:136,column:12},end:{line:144,column:13}},type:"binary-expr",locations:[{start:{line:136,column:12},end:{line:136,column:44}},{start:{line:136,column:64},end:{line:144,column:13}}],line:136},15:{loc:{start:{line:145,column:12},end:{line:152,column:13}},type:"binary-expr",locations:[{start:{line:145,column:12},end:{line:145,column:56}},{start:{line:145,column:76},end:{line:152,column:13}}],line:145}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0,0,0],9:[0,0],10:[0,0],11:[0,0,0,0,0,0,0,0,0,0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx"],names:[],mappings:"AAqIQ,SAEE,KAFF;AArIR,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AAGtD,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB;AAmBlC,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,WAAW,MAAM;AACf,QAAI,KAAK,MAAM,OAAO,KAAK,OAAK,EAAE,OAAO,KAAK,MAAM,EAAE,GAAG;AACvD,WAAK,SAAS,EAAE,OAAO,KAAK,MAAM,EAAE,yBAAyB,EAAE,CAAC;AAChE;AAAA,IACF;AAEA,UAAM,gBAAgB,KAAK,MAAM,OAAO,MAAM,CAAC;AAC/C,UAAM,QAAuB;AAAA,MAC3B,IAAI,KAAK,MAAM;AAAA,MACf,MAAM,KAAK,MAAM;AAAA,IACnB;AAEA,QAAG,KAAK,MAAM,SAAS,cAAc;AACnC,YAAM,SAAS,KAAK,MAAM;AAC1B,UAAG,CAAC,kBAAkB,SAAS,KAAK,MAAM,IAAI,KAAK,KAAK,MAAM,cAAc,GAAG;AAC7E,cAAM,cAAc,IAAI,KAAK,MAAM,cAAc;AAAA,MACnD;AAAA,IACF;AAEA,kBAAc,KAAK,KAA2B;AAC9C,SAAK,SAAS,EAAE,OAAO,KAAK,GAAG,MAAM;AACnC,WAAK,MAAM,eAAe,aAAa;AACvC,WAAK,MAAM,aAAa;AAAA,IAC1B,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,OAA8B;AACxC,UAAM,KAAK;AACX,UAAM,QAAuB;AAAA,MAC3B,MAAM;AAAA,MACN,IAAI;AAAA,MACJ,OAAO;AAAA,IACT;AAEA,QAAG,OAAO,KAAK,MAAM,OAAO,EAAE,SAAS,GAAG;AACxC,YAAM,SAAS,OAAO,KAAK,KAAK,MAAM,OAAO,EAAE,CAAC;AAChD,YAAM,eAAe,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAE,UAAU,CAAC;AACjE,UAAI,aAAa,SAAS,GAAG;AAC3B,cAAM,cAAc,IAAI,aAAa,CAAC;AAAA,MACxC;AAAA,IACF;AACA,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,mBAAmB,YAAmC,WAA0B;AAE9E,UAAM,UAAU,UAAU;AAC1B,UAAM,UAAU,KAAK,MAAM;AAE3B,UAAM,sBAAsB,KAAK,WAAW,OAAO;AACnD,UAAM,sBAAsB,KAAK,WAAW,OAAO;AAEnD;AAAA;AAAA,MAEE,YAAY,WACT,UAAU,WAAW,MAErB,oBAAoB,QAAQ,UAAU,MAAO,IAAI,MAEjD,oBAAoB,QAAQ,KAAK,MAAM,MAAO,IAAI;AAAA,MACrD;AAEA,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,MACV,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,QAAgB;AACjC,UAAM,YAAY,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAC;AACjD,WAAO,UAAU,UAAU,CAAC;AAAA,EAC9B;AAAA,EAEA,WAAW,MAAkC;AAE3C,YAAO,MAAM;AAAA,MACX,KAAK;AACH,eAAO,CAAC;AAAA,MACV,KAAK;AAAA,MACL,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,YAAY,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MACzG,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,QAAQ,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MACrG,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,YAAY,EAAE,SAAS,SAAS,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MAC7H;AACE,eAAO,CAAC;AAAA,IACZ;AAAA,EACF;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,UAAU,KAAK,WAAW,KAAK,MAAM,IAAI;AAC/C,UAAM,SAAS,KAAK,mBAAmB,KAAK,MAAM,MAAO;AACzD,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO;AACpB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ;AAAA,UAAC;AAAA;AAAA,YACC,MAAK;AAAA,YACL,SAAS,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK,CAAC;AAAA,YAC5C,WAAU;AAAA,YACX;AAAA;AAAA,QAED;AAAA,SACF;AAAA,IAEJ;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QACpB,eAAY;AAAA,QACZ,WAAU;AAAA,QAET;AAAA;AAAA,UACD,qBAAC,SAAI,WAAU,sBACb;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAc;AACvB,uBAAK,SAAS,EAAE,IAAI,GAAG,OAAO,KAAK,CAAC;AAAA,gBACtC;AAAA;AAAA,YACF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAkC,KAAK,SAAS,EAAE,MAAM,EAAE,CAAC;AAAA;AAAA,YACxE;AAAA,YACC,KAAK,MAAM,SAAS,gBACvB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,OAAM;AAAA,gBACN,OAAO,KAAK,MAAM;AAAA,gBAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,QAAQ,EAAE,CAAC;AAAA;AAAA,YACtD;AAAA,YAEG,CAAC,kBAAkB,SAAS,KAAK,MAAM,IAAI,KAC9C;AAAA,cAAC;AAAA;AAAA,gBACC,gBAAgB;AAAA,gBAChB,OAAO,KAAK,MAAM,cAAc;AAAA,gBAChC,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,gBAAgB,EAAE,CAAC;AAAA;AAAA,YAC9D;AAAA,YAEE;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,eAAY;AAAA,gBAEX,YAAE,WAAW;AAAA;AAAA,YAChB;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"90da8e5ee6bdbe488a5f45bfae015ac94b0d70a9"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return _n=function(){return s},s}_n();class KTe extends In.Component{addLayer=(_n().s[0]++,()=>{if(_n().f[0]++,_n().s[1]++,this.props.layers.some(i=>(_n().f[1]++,_n().s[2]++,i.id===this.state.id))){_n().b[0][0]++,_n().s[3]++,this.setState({error:this.props.t("Layer ID already exists")}),_n().s[4]++;return}else _n().b[0][1]++;const e=(_n().s[5]++,this.props.layers.slice(0)),t=(_n().s[6]++,{id:this.state.id,type:this.state.type});_n().s[7]++,this.state.type!=="background"?(_n().b[1][0]++,_n().s[8]++,t.source=this.state.source,_n().s[9]++,_n().b[3][0]++,!AP.includes(this.state.type)&&(_n().b[3][1]++,this.state["source-layer"])?(_n().b[2][0]++,_n().s[10]++,t["source-layer"]=this.state["source-layer"]):_n().b[2][1]++):_n().b[1][1]++,_n().s[11]++,e.push(t),_n().s[12]++,this.setState({error:null},()=>{_n().f[2]++,_n().s[13]++,this.props.onLayersChange(e),_n().s[14]++,this.props.onOpenToggle()})});constructor(e){_n().f[3]++,_n().s[15]++,super(e);const t=(_n().s[16]++,{type:"fill",id:"",error:null});if(_n().s[17]++,Object.keys(e.sources).length>0){_n().b[4][0]++,_n().s[18]++,t.source=Object.keys(this.props.sources)[0];const i=(_n().s[19]++,_n().b[5][0]++,this.props.sources[t.source].layers||(_n().b[5][1]++,[]));_n().s[20]++,i.length>0?(_n().b[6][0]++,_n().s[21]++,t["source-layer"]=i[0]):_n().b[6][1]++}else _n().b[4][1]++;_n().s[22]++,this.state=t}componentDidUpdate(e,t){_n().f[4]++;const i=(_n().s[23]++,t.type),r=(_n().s[24]++,this.state.type),o=(_n().s[25]++,this.getSources(i)),s=(_n().s[26]++,this.getSources(r));_n().s[27]++,_n().b[8][0]++,i!==r&&(_n().b[8][1]++,t.source!=="")&&(_n().b[8][2]++,o.indexOf(t.source)>-1)&&(_n().b[8][3]++,s.indexOf(this.state.source)<0)?(_n().b[7][0]++,_n().s[28]++,this.setState({source:""})):_n().b[7][1]++}getLayersForSource(e){_n().f[5]++;const t=(_n().s[29]++,_n().b[9][0]++,this.props.sources[e]||(_n().b[9][1]++,{}));return _n().s[30]++,_n().b[10][0]++,t.layers||(_n().b[10][1]++,[])}getSources(e){switch(_n().f[6]++,_n().s[31]++,e){case"background":return _n().b[11][0]++,_n().s[32]++,[];case"hillshade":_n().b[11][1]++;case"color-relief":return _n().b[11][2]++,_n().s[33]++,Object.entries(this.props.sources).filter(([t,i])=>(_n().f[7]++,_n().s[34]++,i.type==="raster-dem")).map(([t,i])=>(_n().f[8]++,_n().s[35]++,t));case"raster":return _n().b[11][3]++,_n().s[36]++,Object.entries(this.props.sources).filter(([t,i])=>(_n().f[9]++,_n().s[37]++,i.type==="raster")).map(([t,i])=>(_n().f[10]++,_n().s[38]++,t));case"heatmap":_n().b[11][4]++;case"circle":_n().b[11][5]++;case"fill":_n().b[11][6]++;case"fill-extrusion":_n().b[11][7]++;case"line":_n().b[11][8]++;case"symbol":return _n().b[11][9]++,_n().s[39]++,Object.entries(this.props.sources).filter(([t,i])=>(_n().f[11]++,_n().s[40]++,_n().b[12][0]++,i.type==="vector"||(_n().b[12][1]++,i.type==="geojson"))).map(([t,i])=>(_n().f[12]++,_n().s[41]++,t));default:return _n().b[11][10]++,_n().s[42]++,[]}}render(){_n().f[13]++;const e=(_n().s[43]++,this.props.t),t=(_n().s[44]++,this.getSources(this.state.type)),i=(_n().s[45]++,this.getLayersForSource(this.state.source));let r;return _n().s[46]++,this.state.error?(_n().b[13][0]++,_n().s[47]++,r=oe.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,oe.jsx("a",{href:"#",onClick:()=>(_n().f[14]++,_n().s[48]++,this.setState({error:null})),className:"maputnik-modal-error-close",children:""})]})):_n().b[13][1]++,_n().s[49]++,oe.jsxs(V1,{isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Add Layer"),"data-wd-key":"modal:add-layer",className:"maputnik-add-modal",children:[r,oe.jsxs("div",{className:"maputnik-add-layer",children:[oe.jsx(xoe,{value:this.state.id,wdKey:"add-layer.layer-id",onChange:o=>{_n().f[15]++,_n().s[50]++,this.setState({id:o,error:null})}}),oe.jsx(_oe,{value:this.state.type,wdKey:"add-layer.layer-type",onChange:o=>(_n().f[16]++,_n().s[51]++,this.setState({type:o}))}),(_n().b[14][0]++,this.state.type!=="background"&&(_n().b[14][1]++,oe.jsx(joe,{sourceIds:t,wdKey:"add-layer.layer-source-block",value:this.state.source,onChange:o=>(_n().f[17]++,_n().s[52]++,this.setState({source:o}))}))),(_n().b[15][0]++,!AP.includes(this.state.type)&&(_n().b[15][1]++,oe.jsx(Noe,{sourceLayerIds:i,value:this.state["source-layer"],onChange:o=>(_n().f[18]++,_n().s[53]++,this.setState({"source-layer":o}))}))),oe.jsx(Ks,{className:"maputnik-add-layer-button",onClick:this.addLayer,"data-wd-key":"add-layer",children:e("Add Layer")})]})]})}}const FTe=(_n().s[54]++,Do()(KTe));function AC(){var n="/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",e="a991ed6da2a27b46f1adbb88a645aa2ee0df375e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",statementMap:{0:{start:{line:1,column:10},end:{line:1,column:11}},1:{start:{line:3,column:2},end:{line:3,column:8}},2:{start:{line:4,column:2},end:{line:4,column:22}}},fnMap:{0:{name:"generateUniqueId",decl:{start:{line:2,column:24},end:{line:2,column:40}},loc:{start:{line:2,column:54},end:{line:5,column:1}},line:2}},branchMap:{0:{loc:{start:{line:2,column:41},end:{line:2,column:52}},type:"default-arg",locations:[{start:{line:2,column:50},end:{line:2,column:52}}],line:2}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts"],names:[],mappings:"AAGA,IAAI,MAAM;AAEV,wBAAwB,iBAAiB,SAAO,IAAI;AAClD;AACA,SAAO,SAAO;AAChB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a991ed6da2a27b46f1adbb88a645aa2ee0df375e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return AC=function(){return s},s}AC();let oq=(AC().s[0]++,0);function B2(n=(AC().b[0][0]++,"")){return AC().f[0]++,AC().s[1]++,oq++,AC().s[2]++,n+oq}function ar(){var n="/home/runner/work/maputnik/maputnik/src/libs/layer.ts",e="6a81b3c8ffc06f88598225aa1f9b90e3bb6da08e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/layer.ts",statementMap:{0:{start:{line:3,column:28},end:{line:3,column:46}},1:{start:{line:4,column:2},end:{line:8,column:5}},2:{start:{line:5,column:4},end:{line:7,column:5}},3:{start:{line:6,column:6},end:{line:6,column:45}},4:{start:{line:9,column:29},end:{line:9,column:48}},5:{start:{line:10,column:2},end:{line:14,column:5}},6:{start:{line:11,column:4},end:{line:13,column:5}},7:{start:{line:12,column:6},end:{line:12,column:46}},8:{start:{line:15,column:2},end:{line:20,column:4}},9:{start:{line:23,column:2},end:{line:59,column:3}},10:{start:{line:24,column:4},end:{line:43,column:5}},11:{start:{line:25,column:23},end:{line:31,column:7}},12:{start:{line:32,column:6},end:{line:32,column:39}},13:{start:{line:33,column:6},end:{line:35,column:7}},14:{start:{line:34,column:8},end:{line:34,column:31}},15:{start:{line:36,column:6},end:{line:36,column:22}},16:{start:{line:38,column:23},end:{line:40,column:7}},17:{start:{line:41,column:6},end:{line:41,column:32}},18:{start:{line:42,column:6},end:{line:42,column:22}},19:{start:{line:45,column:4},end:{line:58,column:5}},20:{start:{line:46,column:6},end:{line:52,column:8}},21:{start:{line:54,column:6},end:{line:57,column:8}},22:{start:{line:62,column:2},end:{line:62,column:64}},23:{start:{line:65,column:29},end:{line:65,column:56}},24:{start:{line:66,column:19},end:{line:66,column:22}},25:{start:{line:67,column:2},end:{line:74,column:3}},26:{start:{line:67,column:15},end:{line:67,column:18}},27:{start:{line:68,column:32},end:{line:68,column:61}},28:{start:{line:69,column:4},end:{line:73,column:5}},29:{start:{line:70,column:6},end:{line:70,column:25}},30:{start:{line:72,column:6},end:{line:72,column:24}},31:{start:{line:75,column:2},end:{line:75,column:20}}},fnMap:{0:{name:"changeType",decl:{start:{line:2,column:16},end:{line:2,column:26}},loc:{start:{line:2,column:43},end:{line:21,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:41},end:{line:4,column:42}},loc:{start:{line:4,column:59},end:{line:8,column:3}},line:4},2:{name:"(anonymous_2)",decl:{start:{line:10,column:42},end:{line:10,column:43}},loc:{start:{line:10,column:60},end:{line:14,column:3}},line:10},3:{name:"changeProperty",decl:{start:{line:22,column:16},end:{line:22,column:30}},loc:{start:{line:22,column:65},end:{line:60,column:1}},line:22},4:{name:"layerPrefix",decl:{start:{line:61,column:16},end:{line:61,column:27}},loc:{start:{line:61,column:34},end:{line:63,column:1}},line:61},5:{name:"findClosestCommonPrefix",decl:{start:{line:64,column:16},end:{line:64,column:39}},loc:{start:{line:64,column:53},end:{line:76,column:1}},line:64}},branchMap:{0:{loc:{start:{line:5,column:4},end:{line:7,column:5}},type:"if",locations:[{start:{line:5,column:4},end:{line:7,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:11,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:13,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:11},2:{loc:{start:{line:23,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:59,column:3}},{start:{line:44,column:9},end:{line:59,column:3}}],line:23},3:{loc:{start:{line:24,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:43,column:5}},{start:{line:37,column:11},end:{line:43,column:5}}],line:24},4:{loc:{start:{line:33,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:33,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},5:{loc:{start:{line:45,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:58,column:5}},{start:{line:53,column:11},end:{line:58,column:5}}],line:45},6:{loc:{start:{line:69,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:73,column:5}},{start:{line:71,column:11},end:{line:73,column:5}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layer.ts"],names:[],mappings:"AAAA,SAAQ,cAAa;AAId,gBAAS,WAAW,OAA2B,SAAqC;AACzF,QAAM,oBAAiD,EAAE,GAAG,MAAM,MAAM;AACxE,SAAO,KAAK,iBAAiB,EAAE,QAAQ,kBAAgB;AACrD,QAAG,EAAE,gBAAgB,OAAO,WAAW,OAAO,IAAI;AAChD,aAAO,kBAAkB,YAAiD;AAAA,IAC5E;AAAA,EACF,CAAC;AAED,QAAM,qBAAmD,EAAE,GAAG,MAAM,OAAO;AAC3E,SAAO,KAAK,kBAAkB,EAAE,QAAQ,kBAAgB;AACtD,QAAG,EAAE,gBAAgB,OAAO,YAAY,OAAO,IAAI;AACjD,aAAO,mBAAmB,YAAkD;AAAA,IAC9E;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACR;AACF;AAKO,gBAAS,eAAe,OAA2B,OAAwC,UAAkB,UAAe;AAEjI,MAAG,aAAa,QAAW;AACzB,QAAG,OAAO;AACR,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA;AAAA,QAEH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,QAChB;AAAA,MACF;AACA,aAAO,SAAS,KAAK,EAAE,QAAQ;AAG/B,UAAG,OAAO,KAAK,SAAS,KAAK,CAAC,EAAE,SAAS,GAAG;AAC1C,eAAO,SAAS,KAAK;AAAA,MACvB;AACA,aAAO;AAAA,IACT,OAAO;AACL,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA,MACL;AACA,aAAO,SAAS,QAAQ;AACxB,aAAO;AAAA,IACT;AAAA,EACF,OACK;AACH,QAAG,OAAO;AACR,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,UACd,CAAC,QAAQ,GAAG;AAAA,QACd;AAAA,MACF;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAAA,EACF;AACF;AAEO,gBAAS,YAAY,MAAc;AACxC,SAAO,KAAK,QAAQ,KAAK,GAAG,EAAE,QAAQ,KAAK,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC;AAC9D;AAEO,gBAAS,wBAAwB,QAA8B,KAAa;AACjF,QAAM,qBAAqB,YAAY,OAAO,GAAG,EAAE,EAAE;AACrD,MAAI,aAAa;AACjB,WAAS,IAAI,KAAK,IAAI,GAAG,KAAK;AAC5B,UAAM,sBAAsB,YAAY,OAAO,IAAE,CAAC,EAAE,EAAE;AACtD,QAAG,wBAAwB,oBAAoB;AAC7C,mBAAa,IAAI;AAAA,IACnB,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6a81b3c8ffc06f88598225aa1f9b90e3bb6da08e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ar=function(){return s},s}ar();function zTe(n,e){ar().f[0]++;const t=(ar().s[0]++,{...n.paint});ar().s[1]++,Object.keys(t).forEach(r=>{ar().f[1]++,ar().s[2]++,r in $o["paint_"+e]?ar().b[0][1]++:(ar().b[0][0]++,ar().s[3]++,delete t[r])});const i=(ar().s[4]++,{...n.layout});return ar().s[5]++,Object.keys(i).forEach(r=>{ar().f[2]++,ar().s[6]++,r in $o["layout_"+e]?ar().b[1][1]++:(ar().b[1][0]++,ar().s[7]++,delete i[r])}),ar().s[8]++,{...n,paint:t,layout:i,type:e}}function jTe(n,e,t,i){if(ar().f[3]++,ar().s[9]++,i===void 0)if(ar().b[2][0]++,ar().s[10]++,e){ar().b[3][0]++;const r=(ar().s[11]++,{...n,[e]:{...n[e]}});return ar().s[12]++,delete r[e][t],ar().s[13]++,Object.keys(r[e]).length<1?(ar().b[4][0]++,ar().s[14]++,delete r[e]):ar().b[4][1]++,ar().s[15]++,r}else{ar().b[3][1]++;const r=(ar().s[16]++,{...n});return ar().s[17]++,delete r[t],ar().s[18]++,r}else return ar().b[2][1]++,ar().s[19]++,e?(ar().b[5][0]++,ar().s[20]++,{...n,[e]:{...n[e],[t]:i}}):(ar().b[5][1]++,ar().s[21]++,{...n,[t]:i})}function Dx(n){return ar().f[4]++,ar().s[22]++,n.replace(" ","-").replace("_","-").split("-")[0]}function NTe(n,e){ar().f[5]++;const t=(ar().s[23]++,Dx(n[e].id));let i=(ar().s[24]++,e);ar().s[25]++;for(let r=(ar().s[26]++,e);r>0;r--){const o=(ar().s[27]++,Dx(n[r-1].id));if(ar().s[28]++,o===t)ar().b[6][0]++,ar().s[29]++,i=r-1;else return ar().b[6][1]++,ar().s[30]++,i}return ar().s[31]++,i}function jt(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",e="3031fd34f43c8d651f443f714d2dfaaa5f809423",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",statementMap:{0:{start:{line:23,column:24},end:{line:26,column:3}},1:{start:{line:30,column:4},end:{line:30,column:17}},2:{start:{line:31,column:4},end:{line:31,column:45}},3:{start:{line:32,column:4},end:{line:32,column:48}},4:{start:{line:33,column:4},end:{line:42,column:6}},5:{start:{line:45,column:4},end:{line:54,column:7}},6:{start:{line:56,column:17},end:{line:73,column:3}},7:{start:{line:57,column:14},end:{line:57,column:15}},8:{start:{line:58,column:22},end:{line:58,column:24}},9:{start:{line:59,column:4},end:{line:68,column:7}},10:{start:{line:60,column:26},end:{line:60,column:51}},11:{start:{line:61,column:24},end:{line:61,column:52}},12:{start:{line:62,column:6},end:{line:64,column:7}},13:{start:{line:63,column:8},end:{line:63,column:63}},14:{start:{line:65,column:6},end:{line:67,column:9}},15:{start:{line:66,column:8},end:{line:66,column:17}},16:{start:{line:69,column:4},end:{line:72,column:7}},17:{start:{line:75,column:19},end:{line:75,column:21}},18:{start:{line:76,column:41},end:{line:76,column:50}},19:{start:{line:77,column:4},end:{line:94,column:5}},20:{start:{line:77,column:17},end:{line:77,column:18}},21:{start:{line:78,column:24},end:{line:78,column:44}},22:{start:{line:79,column:28},end:{line:79,column:52}},23:{start:{line:80,column:6},end:{line:83,column:8}},24:{start:{line:84,column:20},end:{line:87,column:7}},25:{start:{line:88,column:6},end:{line:93,column:7}},26:{start:{line:89,column:26},end:{line:89,column:51}},27:{start:{line:90,column:8},end:{line:90,column:30}},28:{start:{line:92,column:8},end:{line:92,column:29}},29:{start:{line:95,column:4},end:{line:95,column:18}},30:{start:{line:98,column:22},end:{line:98,column:50}},31:{start:{line:99,column:22},end:{line:99,column:55}},32:{start:{line:100,column:4},end:{line:104,column:5}},33:{start:{line:101,column:6},end:{line:101,column:68}},34:{start:{line:103,column:6},end:{line:103,column:35}},35:{start:{line:105,column:4},end:{line:107,column:7}},36:{start:{line:110,column:22},end:{line:110,column:78}},37:{start:{line:111,column:4},end:{line:111,column:51}},38:{start:{line:114,column:4},end:{line:116,column:5}},39:{start:{line:115,column:6},end:{line:115,column:18}},40:{start:{line:118,column:18},end:{line:120,column:7}},41:{start:{line:121,column:6},end:{line:125,column:7}},42:{start:{line:122,column:8},end:{line:124,column:10}},43:{start:{line:126,column:6},end:{line:126,column:17}},44:{start:{line:128,column:24},end:{line:131,column:5}},45:{start:{line:133,column:18},end:{line:135,column:7}},46:{start:{line:136,column:6},end:{line:136,column:27}},47:{start:{line:137,column:6},end:{line:137,column:17}},48:{start:{line:139,column:23},end:{line:142,column:5}},49:{start:{line:143,column:25},end:{line:143,column:53}},50:{start:{line:144,column:4},end:{line:144,column:24}},51:{start:{line:147,column:4},end:{line:163,column:5}},52:{start:{line:148,column:31},end:{line:148,column:59}},53:{start:{line:149,column:6},end:{line:162,column:7}},54:{start:{line:150,column:23},end:{line:150,column:44}},55:{start:{line:151,column:24},end:{line:154,column:9}},56:{start:{line:155,column:25},end:{line:160,column:19}},57:{start:{line:156,column:10},end:{line:156,column:37}},58:{start:{line:157,column:10},end:{line:159,column:11}},59:{start:{line:158,column:12},end:{line:158,column:36}},60:{start:{line:161,column:8},end:{line:161,column:33}},61:{start:{line:166,column:22},end:{line:166,column:24}},62:{start:{line:167,column:14},end:{line:167,column:15}},63:{start:{line:168,column:26},end:{line:168,column:46}},64:{start:{line:169,column:4},end:{line:219,column:7}},65:{start:{line:170,column:26},end:{line:170,column:51}},66:{start:{line:171,column:6},end:{line:184,column:7}},67:{start:{line:172,column:36},end:{line:182,column:9}},68:{start:{line:176,column:47},end:{line:176,column:52}},69:{start:{line:183,column:8},end:{line:183,column:28}},70:{start:{line:185,column:6},end:{line:218,column:9}},71:{start:{line:186,column:25},end:{line:186,column:72}},72:{start:{line:187,column:27},end:{line:189,column:10}},73:{start:{line:188,column:10},end:{line:188,column:97}},74:{start:{line:190,column:32},end:{line:190,column:34}},75:{start:{line:191,column:8},end:{line:193,column:9}},76:{start:{line:192,column:10},end:{line:192,column:53}},77:{start:{line:194,column:41},end:{line:215,column:9}},78:{start:{line:216,column:8},end:{line:216,column:33}},79:{start:{line:217,column:8},end:{line:217,column:17}},80:{start:{line:220,column:14},end:{line:220,column:26}},81:{start:{line:221,column:4},end:{line:274,column:6}},82:{start:{line:277,column:27},end:{line:277,column:72}},83:{start:{line:278,column:18},end:{line:291,column:1}},84:{start:{line:279,column:18},end:{line:279,column:97}},85:{start:{line:280,column:24},end:{line:288,column:3}},86:{start:{line:281,column:29},end:{line:281,column:34}},87:{start:{line:282,column:4},end:{line:282,column:22}},88:{start:{line:282,column:15},end:{line:282,column:22}},89:{start:{line:283,column:21},end:{line:283,column:78}},90:{start:{line:283,column:55},end:{line:283,column:77}},91:{start:{line:284,column:21},end:{line:284,column:76}},92:{start:{line:284,column:55},end:{line:284,column:75}},93:{start:{line:285,column:4},end:{line:287,column:5}},94:{start:{line:286,column:6},end:{line:286,column:48}},95:{start:{line:289,column:19},end:{line:289,column:56}},96:{start:{line:289,column:47},end:{line:289,column:55}},97:{start:{line:290,column:2},end:{line:290,column:288}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:24,column:19},end:{line:24,column:20}},loc:{start:{line:24,column:25},end:{line:25,column:5}},line:24},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:21},end:{line:43,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:25},end:{line:55,column:3}},line:44},3:{name:"(anonymous_3)",decl:{start:{line:56,column:17},end:{line:56,column:18}},loc:{start:{line:56,column:23},end:{line:73,column:3}},line:56},4:{name:"(anonymous_4)",decl:{start:{line:59,column:33},end:{line:59,column:34}},loc:{start:{line:59,column:45},end:{line:68,column:5}},line:59},5:{name:"(anonymous_5)",decl:{start:{line:65,column:21},end:{line:65,column:22}},loc:{start:{line:65,column:33},end:{line:67,column:7}},line:65},6:{name:"(anonymous_6)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:18},end:{line:96,column:3}},line:74},7:{name:"(anonymous_7)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:37},end:{line:108,column:3}},line:97},8:{name:"(anonymous_8)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:32},end:{line:112,column:3}},line:109},9:{name:"(anonymous_9)",decl:{start:{line:113,column:2},end:{line:113,column:3}},loc:{start:{line:113,column:46},end:{line:145,column:3}},line:113},10:{name:"getRequiredProps",decl:{start:{line:117,column:13},end:{line:117,column:29}},loc:{start:{line:117,column:37},end:{line:127,column:5}},line:117},11:{name:"withoutLayers",decl:{start:{line:132,column:13},end:{line:132,column:26}},loc:{start:{line:132,column:34},end:{line:138,column:5}},line:132},12:{name:"(anonymous_12)",decl:{start:{line:146,column:2},end:{line:146,column:3}},loc:{start:{line:146,column:32},end:{line:164,column:3}},line:146},13:{name:"(anonymous_13)",decl:{start:{line:155,column:50},end:{line:155,column:51}},loc:{start:{line:155,column:63},end:{line:160,column:9}},line:155},14:{name:"(anonymous_14)",decl:{start:{line:165,column:2},end:{line:165,column:3}},loc:{start:{line:165,column:11},end:{line:275,column:3}},line:165},15:{name:"(anonymous_15)",decl:{start:{line:169,column:26},end:{line:169,column:27}},loc:{start:{line:169,column:38},end:{line:219,column:5}},line:169},16:{name:"(anonymous_16)",decl:{start:{line:176,column:40},end:{line:176,column:41}},loc:{start:{line:176,column:47},end:{line:176,column:52}},line:176},17:{name:"(anonymous_17)",decl:{start:{line:185,column:21},end:{line:185,column:22}},loc:{start:{line:185,column:44},end:{line:218,column:7}},line:185},18:{name:"(anonymous_18)",decl:{start:{line:187,column:50},end:{line:187,column:51}},loc:{start:{line:187,column:61},end:{line:189,column:9}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:278,column:18},end:{line:278,column:19}},loc:{start:{line:278,column:29},end:{line:291,column:1}},line:278},20:{name:"(anonymous_20)",decl:{start:{line:280,column:24},end:{line:280,column:25}},loc:{start:{line:280,column:35},end:{line:288,column:3}},line:280},21:{name:"(anonymous_21)",decl:{start:{line:283,column:44},end:{line:283,column:45}},loc:{start:{line:283,column:55},end:{line:283,column:77}},line:283},22:{name:"(anonymous_22)",decl:{start:{line:284,column:44},end:{line:284,column:45}},loc:{start:{line:284,column:55},end:{line:284,column:75}},line:284},23:{name:"(anonymous_23)",decl:{start:{line:289,column:36},end:{line:289,column:37}},loc:{start:{line:289,column:47},end:{line:289,column:55}},line:289}},branchMap:{0:{loc:{start:{line:62,column:6},end:{line:64,column:7}},type:"if",locations:[{start:{line:62,column:6},end:{line:64,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},1:{loc:{start:{line:82,column:8},end:{line:82,column:79}},type:"cond-expr",locations:[{start:{line:82,column:41},end:{line:82,column:75}},{start:{line:82,column:78},end:{line:82,column:79}}],line:82},2:{loc:{start:{line:88,column:6},end:{line:93,column:7}},type:"if",locations:[{start:{line:88,column:6},end:{line:93,column:7}},{start:{line:91,column:13},end:{line:93,column:7}}],line:88},3:{loc:{start:{line:88,column:10},end:{line:88,column:81}},type:"binary-expr",locations:[{start:{line:88,column:10},end:{line:88,column:23}},{start:{line:88,column:27},end:{line:88,column:81}}],line:88},4:{loc:{start:{line:100,column:4},end:{line:104,column:5}},type:"if",locations:[{start:{line:100,column:4},end:{line:104,column:5}},{start:{line:102,column:11},end:{line:104,column:5}}],line:100},5:{loc:{start:{line:111,column:11},end:{line:111,column:50}},type:"cond-expr",locations:[{start:{line:111,column:34},end:{line:111,column:38}},{start:{line:111,column:41},end:{line:111,column:50}}],line:111},6:{loc:{start:{line:114,column:4},end:{line:116,column:5}},type:"if",locations:[{start:{line:114,column:4},end:{line:116,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},7:{loc:{start:{line:121,column:6},end:{line:125,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:125,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},8:{loc:{start:{line:143,column:27},end:{line:143,column:52}},type:"binary-expr",locations:[{start:{line:143,column:27},end:{line:143,column:38}},{start:{line:143,column:42},end:{line:143,column:52}}],line:143},9:{loc:{start:{line:147,column:4},end:{line:163,column:5}},type:"if",locations:[{start:{line:147,column:4},end:{line:163,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},10:{loc:{start:{line:149,column:6},end:{line:162,column:7}},type:"if",locations:[{start:{line:149,column:6},end:{line:162,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:149},11:{loc:{start:{line:149,column:10},end:{line:149,column:51}},type:"binary-expr",locations:[{start:{line:149,column:10},end:{line:149,column:26}},{start:{line:149,column:30},end:{line:149,column:51}}],line:149},12:{loc:{start:{line:157,column:10},end:{line:159,column:11}},type:"if",locations:[{start:{line:157,column:10},end:{line:159,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:157},13:{loc:{start:{line:157,column:14},end:{line:157,column:68}},type:"binary-expr",locations:[{start:{line:157,column:14},end:{line:157,column:32}},{start:{line:157,column:36},end:{line:157,column:68}}],line:157},14:{loc:{start:{line:171,column:6},end:{line:184,column:7}},type:"if",locations:[{start:{line:171,column:6},end:{line:184,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:171},15:{loc:{start:{line:178,column:22},end:{line:178,column:98}},type:"binary-expr",locations:[{start:{line:178,column:22},end:{line:178,column:57}},{start:{line:178,column:61},end:{line:178,column:98}}],line:178},16:{loc:{start:{line:188,column:17},end:{line:188,column:96}},type:"binary-expr",locations:[{start:{line:188,column:17},end:{line:188,column:29}},{start:{line:188,column:33},end:{line:188,column:62}},{start:{line:188,column:66},end:{line:188,column:96}}],line:188},17:{loc:{start:{line:191,column:8},end:{line:193,column:9}},type:"if",locations:[{start:{line:191,column:8},end:{line:193,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:191},18:{loc:{start:{line:198,column:52},end:{line:198,column:153}},type:"binary-expr",locations:[{start:{line:198,column:52},end:{line:198,column:69}},{start:{line:198,column:73},end:{line:198,column:112}},{start:{line:198,column:116},end:{line:198,column:153}}],line:198},19:{loc:{start:{line:199,column:53},end:{line:199,column:105}},type:"binary-expr",locations:[{start:{line:199,column:53},end:{line:199,column:84}},{start:{line:199,column:88},end:{line:199,column:105}}],line:199},20:{loc:{start:{line:206,column:25},end:{line:206,column:43}},type:"binary-expr",locations:[{start:{line:206,column:25},end:{line:206,column:37}},{start:{line:206,column:41},end:{line:206,column:43}}],line:206},21:{loc:{start:{line:251,column:26},end:{line:251,column:96}},type:"cond-expr",locations:[{start:{line:251,column:69},end:{line:251,column:82}},{start:{line:251,column:85},end:{line:251,column:96}}],line:251},22:{loc:{start:{line:282,column:4},end:{line:282,column:22}},type:"if",locations:[{start:{line:282,column:4},end:{line:282,column:22}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:282},23:{loc:{start:{line:285,column:4},end:{line:287,column:5}},type:"if",locations:[{start:{line:285,column:4},end:{line:287,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:285},24:{loc:{start:{line:285,column:8},end:{line:285,column:67}},type:"binary-expr",locations:[{start:{line:285,column:8},end:{line:285,column:23}},{start:{line:285,column:27},end:{line:285,column:42}},{start:{line:285,column:46},end:{line:285,column:67}}],line:285}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0,0],17:[0,0],18:[0,0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx"],names:[],mappings:"AA+NoB,cAoEd,YApEc;AA/NpB,OAAO,WAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,YAAY;AACnB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OAEK;AACP;AAAA,EACE;AAAA,EACA;AAAA,OACK;AAEP,OAAO,oBAAoB;AAC3B,OAAO,mBAAmB;AAC1B,OAAO,cAAc;AAGrB,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB,mBAAmB;AACrD,SAA+B,uBAAuB;AAwBtD,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,kBAAkB,MAAM,UAAU;AACvC,SAAK,qBAAqB,MAAM,UAAU;AAC1C,SAAK,QAAQ;AAAA,MACX,iBAAiB,CAAC;AAAA,MAClB,sBAAsB;AAAA,MACtB,MAAM;AAAA,QACJ,KAAK,CAAC,iBAAiB;AAAA,MACzB;AAAA,MACA,QAAQ;AAAA,QACN,KAAK;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAAA,EAEA,YAAY,WAAmB;AAC7B,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,QACJ,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,iBAAiB;AAAA,MACjC;AAAA,MACA,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,KAAK,MAAM,OAAO,SAAS;AAAA,MAC3C;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,eAAe,MAAM;AACnB,QAAI,MAAM;AAEV,UAAM,YAAqC,CAAC;AAE5C,SAAK,cAAc,EAAE,QAAQ,YAAU;AACrC,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,YAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAG7C,UAAI,OAAO,SAAS,GAAG;AACrB,kBAAU,SAAS,IAAI,KAAK,MAAM;AAAA,MACpC;AAEA,aAAO,QAAQ,CAAC,WAAW;AACzB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,MACjB,sBAAsB,CAAC,KAAK,MAAM;AAAA,IACpC,CAAC;AAAA,EACH;AAAA,EAEA,gBAA0D;AACxD,UAAM,SAAS,CAAC;AAChB,UAAM,eAAe,oBAAI,IAAI;AAE7B,aAAS,IAAI,GAAG,IAAI,KAAK,MAAM,OAAO,QAAQ,KAAK;AACjD,YAAM,YAAY,KAAK,MAAM,OAAO,CAAC;AACrC,YAAM,gBAAgB,KAAK,MAAM,OAAO,IAAE,CAAC;AAC3C,mBAAa;AAAA,QAAI,UAAU;AAAA,QACzB,aAAa,IAAI,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,IAAI,IAAI;AAAA,MACxE;AACA,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,KAAK,eAAe,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,CAAC;AAAA,MACpE;AACA,UAAG,iBAAiB,YAAY,cAAc,EAAE,KAAK,YAAY,MAAM,EAAE,GAAG;AAC1E,cAAM,YAAY,OAAO,OAAO,SAAS,CAAC;AAC1C,kBAAU,KAAK,KAAK;AAAA,MACtB,OAAO;AACL,eAAO,KAAK,CAAC,KAAK,CAAC;AAAA,MACrB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,iBAAiB,aAAqB,KAAa;AACjD,UAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAC7C,UAAM,YAAY,EAAE,GAAG,KAAK,MAAM,gBAAgB;AAClD,QAAG,aAAa,KAAK,MAAM,iBAAiB;AAC1C,gBAAU,SAAS,IAAI,CAAC,KAAK,MAAM,gBAAgB,SAAS;AAAA,IAC9D,OAAO;AACL,gBAAU,SAAS,IAAI;AAAA,IACzB;AACA,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,aAAqB,KAAa;AAC5C,UAAM,YAAY,KAAK,MAAM,gBAAgB,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG,CAAC;AACzE,WAAO,cAAc,SAAY,OAAO;AAAA,EAC1C;AAAA,EAEA,sBAAuB,WAAoC,WAAoC;AAE7F,QAAI,KAAK,UAAU,WAAW;AAC5B,aAAO;AAAA,IACT;AAIA,aAAS,iBAAiB,OAA2B;AACnD,YAAM,MAAiD;AAAA,QACrD,IAAI,MAAM;AAAA,MACZ;AAEA,UAAI,MAAM,QAAQ;AAChB,YAAI,SAAS;AAAA,UACX,YAAY,MAAM,OAAO;AAAA,QAC3B;AAAA,MACF;AACA,aAAO;AAAA,IACT;AACA,UAAM,cAAc,OAAO;AAAA,MACzB,UAAU,OAAO,IAAI,gBAAgB;AAAA,MACrC,KAAK,MAAM,OAAO,IAAI,gBAAgB;AAAA,IACxC;AAEA,aAAS,cAAc,OAAgC;AACrD,YAAM,MAAM;AAAA,QACV,GAAG;AAAA,MACL;AACA,aAAO,IAAI,QAAQ;AACnB,aAAO;AAAA,IACT;AAIA,UAAM,aAAa,OAAO;AAAA,MACxB,cAAc,KAAK,KAAK;AAAA,MACxB,cAAc,SAAS;AAAA,IACzB;AAEA,UAAM,eAAe,EAAE,eAAe;AACtC,WAAO;AAAA,EACT;AAAA,EAEA,mBAAoB,WAAoC;AACtD,QAAI,UAAU,uBAAuB,KAAK,MAAM,oBAAoB;AAClE,YAAM,mBAAmB,KAAK,gBAAgB;AAC9C,UAAI,oBAAoB,iBAAiB,MAAM;AAC7C,cAAM,SAAS,iBAAiB;AAChC,cAAM,UAAU;AAAA,UACd,MAAM,KAAK,mBAAmB;AAAA,UAC9B,WAAW;AAAA,QACb;AACA,cAAM,WAAW,IAAI,qBAAqB,aAAW;AACnD,mBAAS,UAAU,MAAM;AACzB,cAAI,QAAQ,SAAS,KAAK,QAAQ,CAAC,EAAE,oBAAoB,GAAG;AAC1D,mBAAO,eAAe;AAAA,UACxB;AAAA,QACF,GAAG,OAAO;AAEV,iBAAS,QAAQ,MAAM;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AAEP,UAAM,YAA2B,CAAC;AAClC,QAAI,MAAM;AACV,UAAM,gBAAgB,KAAK,cAAc;AACzC,kBAAc,QAAQ,YAAU;AAC9B,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,UAAG,OAAO,SAAS,GAAG;AACpB,cAAM,MAAM;AAAA,UAAC;AAAA;AAAA,YACX,eAAa,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAAA,YACxC,iBAAe,OAAO,IAAI,OAAK,EAAE,GAAG,EAAE,KAAK,GAAG;AAAA,YAE9C,OAAO;AAAA,YACP,UAAU,CAAC,KAAK,YAAY,aAAa,GAAG,KAAK,QAAQ,KAAK,MAAM;AAAA,YACpE,gBAAgB,KAAK,iBAAiB,KAAK,MAAM,aAAa,GAAG;AAAA;AAAA,UAH5D,SAAS,WAAW,IAAI,GAAG;AAAA,QAIlC;AACA,kBAAU,KAAK,GAAG;AAAA,MACpB;AAEA,aAAO,QAAQ,CAAC,OAAO,eAAe;AACpC,cAAM,WAAW,wBAAwB,KAAK,MAAM,QAAQ,GAAG;AAE/D,cAAM,aAAa,KAAK,MAAM,OAAO,KAAK,WAAS;AACjD,iBACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS;AAAA,QAE/B,CAAC;AAED,cAAM,kBAAgD,CAAC;AACvD,YAAI,QAAQ,KAAK,MAAM,oBAAoB;AACzC,0BAAgB,MAAM,KAAK;AAAA,QAC7B;AAEA,cAAM,WAAW;AAAA,UAAC;AAAA;AAAA,YAChB,WAAW,WAAW;AAAA,cACpB,sCAAsC,OAAO,SAAS,KAAK,KAAK,YAAY,aAAa,QAAQ,KAAK,QAAQ,KAAK,MAAM;AAAA,cACzH,uCAAuC,cAAc,OAAO,SAAS,KAAK,OAAO,SAAS;AAAA,cAC1F,mCAAmC,CAAC,CAAC;AAAA,YACvC,CAAC;AAAA,YAED,IAAI,MAAM;AAAA,YACV,SAAS,MAAM;AAAA,YACf,YAAY;AAAA,YACZ,WAAW,MAAM;AAAA,YACjB,aAAa,MAAM,UAAU,CAAC,GAAG;AAAA,YACjC,YAAY,QAAQ,KAAK,MAAM;AAAA,YAC/B,eAAe,KAAK,MAAM;AAAA,YAC1B,gBAAgB,KAAK,MAAM,gBAAgB,KAAK,IAAI;AAAA,YACpD,aAAa,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,YAC7C,yBAAyB,KAAK,MAAM,wBAAwB,KAAK,IAAI;AAAA,YACpE,GAAG;AAAA;AAAA,UAXC,MAAM;AAAA,QAYb;AACA,kBAAU,KAAK,QAAQ;AACvB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,UAAM,IAAI,KAAK,MAAM;AAErB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAY;AAAA,QACZ,MAAK;AAAA,QACL,cAAY,EAAE,aAAa;AAAA,QAC3B,KAAK,KAAK;AAAA,QAEV;AAAA;AAAA,YAAC;AAAA;AAAA,cAEC,QAAQ,KAAK,MAAM;AAAA,cACnB,SAAS,KAAK,MAAM;AAAA,cACpB,QAAQ,KAAK,MAAM,OAAO;AAAA,cAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,cAC/C,gBAAgB,KAAK,MAAM;AAAA;AAAA,YALtB,KAAK,MAAM,KAAK;AAAA,UAMvB;AAAA,UACA,qBAAC,YAAO,WAAU,8BAA6B,eAAY,qBACzD;AAAA,gCAAC,UAAK,WAAU,oCAAoC,YAAE,QAAQ,GAAE;AAAA,YAChE,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,IAAG;AAAA,gBACH,eAAY;AAAA,gBACZ,SAAS,KAAK;AAAA,gBACd,WAAU;AAAA,gBACT,eAAK,MAAM,yBAAyB,OACnC,EAAE,UAAU,IAEZ,EAAE,QAAQ;AAAA;AAAA,YAEd,GACF,GACF;AAAA,YACA,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,SAAS,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,gBAC1C,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACT,YAAE,WAAW;AAAA;AAAA,YAChB,GACF,GACF;AAAA,aACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,cAAY,EAAE,aAAa;AAAA,cAE3B,8BAAC,QAAG,WAAU,iCACX,qBACH;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AAMvE,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,UAAU,WAAW,UAAU,eAAe,EAAE,sBAAsB,EAAE,UAAU,EAAE,EAAE,CAAC,CAAC;AAE9F,QAAM,gBAAgB,CAAC,UAAwB;AAC7C,UAAM,EAAC,QAAQ,KAAI,IAAI;AACvB,QAAI,CAAC,KAAM;AAEX,UAAM,WAAW,MAAM,OAAO,UAAU,WAAS,MAAM,OAAO,OAAO,EAAE;AACvE,UAAM,WAAW,MAAM,OAAO,UAAU,WAAS,MAAM,OAAO,KAAK,EAAE;AAErE,QAAI,aAAa,MAAM,aAAa,MAAM,aAAa,UAAU;AAC/D,YAAM,YAAY,EAAC,UAAU,SAAQ,CAAC;AAAA,IACxC;AAAA,EACF;AAEA,QAAM,WAAW,MAAM,OAAO,IAAI,WAAS,MAAM,EAAE;AAEnD,SACE,oBAAC,cAAW,SAAkB,oBAAoB,eAAe,WAAW,eAC1E,8BAAC,mBAAgB,OAAO,UAAU,UAAU,6BAC1C,8BAAC,sBAAoB,GAAG,OAAO,GACjC,GACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3031fd34f43c8d651f443f714d2dfaaa5f809423"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return jt=function(){return s},s}jt();class GTe extends In.Component{static defaultProps=(jt().s[0]++,{onLayerSelect:()=>{jt().f[0]++}});selectedItemRef;scrollContainerRef;constructor(e){jt().f[1]++,jt().s[1]++,super(e),jt().s[2]++,this.selectedItemRef=In.createRef(),jt().s[3]++,this.scrollContainerRef=In.createRef(),jt().s[4]++,this.state={collapsedGroups:{},areAllGroupsExpanded:!1,keys:{add:+B2()},isOpen:{add:!1}}}toggleModal(e){jt().f[2]++,jt().s[5]++,this.setState({keys:{...this.state.keys,[e]:+B2()},isOpen:{...this.state.isOpen,[e]:!this.state.isOpen[e]}})}toggleLayers=(jt().s[6]++,()=>{jt().f[3]++;let e=(jt().s[7]++,0);const t=(jt().s[8]++,{});jt().s[9]++,this.groupedLayers().forEach(i=>{jt().f[4]++;const r=(jt().s[10]++,Dx(i[0].id)),o=(jt().s[11]++,[r,e].join("-"));jt().s[12]++,i.length>1?(jt().b[0][0]++,jt().s[13]++,t[o]=this.state.areAllGroupsExpanded):jt().b[0][1]++,jt().s[14]++,i.forEach(s=>{jt().f[5]++,jt().s[15]++,e+=1})}),jt().s[16]++,this.setState({collapsedGroups:t,areAllGroupsExpanded:!this.state.areAllGroupsExpanded})});groupedLayers(){jt().f[6]++;const e=(jt().s[17]++,[]),t=(jt().s[18]++,new Map);jt().s[19]++;for(let i=(jt().s[20]++,0);i<this.props.layers.length;i++){const r=(jt().s[21]++,this.props.layers[i]),o=(jt().s[22]++,this.props.layers[i-1]);jt().s[23]++,t.set(r.id,t.has(r.id)?(jt().b[1][0]++,t.get(r.id)+1):(jt().b[1][1]++,0));const s=(jt().s[24]++,{...r,key:`layers-list-${r.id}-${t.get(r.id)}`});if(jt().s[25]++,jt().b[3][0]++,o&&(jt().b[3][1]++,Dx(o.id)==Dx(s.id))){jt().b[2][0]++;const a=(jt().s[26]++,e[e.length-1]);jt().s[27]++,a.push(s)}else jt().b[2][1]++,jt().s[28]++,e.push([s])}return jt().s[29]++,e}toggleLayerGroup(e,t){jt().f[7]++;const i=(jt().s[30]++,[e,t].join("-")),r=(jt().s[31]++,{...this.state.collapsedGroups});jt().s[32]++,i in this.state.collapsedGroups?(jt().b[4][0]++,jt().s[33]++,r[i]=!this.state.collapsedGroups[i]):(jt().b[4][1]++,jt().s[34]++,r[i]=!1),jt().s[35]++,this.setState({collapsedGroups:r})}isCollapsed(e,t){jt().f[8]++;const i=(jt().s[36]++,this.state.collapsedGroups[[e,t].join("-")]);return jt().s[37]++,i===void 0?(jt().b[5][0]++,!0):(jt().b[5][1]++,i)}shouldComponentUpdate(e,t){if(jt().f[9]++,jt().s[38]++,this.state!==t)return jt().b[6][0]++,jt().s[39]++,!0;jt().b[6][1]++;function i(c){jt().f[10]++;const d=(jt().s[40]++,{id:c.id});return jt().s[41]++,c.layout?(jt().b[7][0]++,jt().s[42]++,d.layout={visibility:c.layout.visibility}):jt().b[7][1]++,jt().s[43]++,d}const r=(jt().s[44]++,D9.isEqual(e.layers.map(i),this.props.layers.map(i)));function o(c){jt().f[11]++;const d=(jt().s[45]++,{...c});return jt().s[46]++,delete d.layers,jt().s[47]++,d}const s=(jt().s[48]++,D9.isEqual(o(this.props),o(e))),a=(jt().s[49]++,jt().b[8][0]++,!(r&&(jt().b[8][1]++,s)));return jt().s[50]++,a}componentDidUpdate(e){if(jt().f[12]++,jt().s[51]++,e.selectedLayerIndex!==this.props.selectedLayerIndex){jt().b[9][0]++;const t=(jt().s[52]++,this.selectedItemRef.current);if(jt().s[53]++,jt().b[11][0]++,t&&(jt().b[11][1]++,t.node)){jt().b[10][0]++;const i=(jt().s[54]++,t.node),r=(jt().s[55]++,{root:this.scrollContainerRef.current,threshold:1}),o=(jt().s[56]++,new IntersectionObserver(s=>{jt().f[13]++,jt().s[57]++,o.unobserve(i),jt().s[58]++,jt().b[13][0]++,s.length>0&&(jt().b[13][1]++,s[0].intersectionRatio<1)?(jt().b[12][0]++,jt().s[59]++,i.scrollIntoView()):jt().b[12][1]++},r));jt().s[60]++,o.observe(i)}else jt().b[10][1]++}else jt().b[9][1]++}render(){jt().f[14]++;const e=(jt().s[61]++,[]);let t=(jt().s[62]++,0);const i=(jt().s[63]++,this.groupedLayers());jt().s[64]++,i.forEach(o=>{jt().f[15]++;const s=(jt().s[65]++,Dx(o[0].id));if(jt().s[66]++,o.length>1){jt().b[14][0]++;const a=(jt().s[67]++,oe.jsx(QEe,{"data-wd-key":[s,t].join("-"),"aria-controls":o.map(c=>(jt().f[16]++,jt().s[68]++,c.key)).join(" "),title:s,isActive:(jt().b[15][0]++,!this.isCollapsed(s,t)||(jt().b[15][1]++,t===this.props.selectedLayerIndex)),onActiveToggle:this.toggleLayerGroup.bind(this,s,t)},`group-${s}-${t}`));jt().s[69]++,e.push(a)}else jt().b[14][1]++;jt().s[70]++,o.forEach((a,c)=>{jt().f[17]++;const d=(jt().s[71]++,NTe(this.props.layers,t)),m=(jt().s[72]++,this.props.errors.find(B=>(jt().f[18]++,jt().s[73]++,jt().b[16][0]++,B.parsed&&(jt().b[16][1]++,B.parsed.type==="layer")&&(jt().b[16][2]++,B.parsed.data.index==t)))),v=(jt().s[74]++,{});jt().s[75]++,t===this.props.selectedLayerIndex?(jt().b[17][0]++,jt().s[76]++,v.ref=this.selectedItemRef):jt().b[17][1]++;const M=(jt().s[77]++,oe.jsx(YEe,{className:Ig({"maputnik-layer-list-item-collapsed":(jt().b[18][0]++,o.length>1&&(jt().b[18][1]++,this.isCollapsed(s,d))&&(jt().b[18][2]++,t!==this.props.selectedLayerIndex)),"maputnik-layer-list-item-group-last":(jt().b[19][0]++,c==o.length-1&&(jt().b[19][1]++,o.length>1)),"maputnik-layer-list-item--error":!!m}),id:a.key,layerId:a.id,layerIndex:t,layerType:a.type,visibility:(jt().b[20][0]++,a.layout||(jt().b[20][1]++,{})).visibility,isSelected:t===this.props.selectedLayerIndex,onLayerSelect:this.props.onLayerSelect,onLayerDestroy:this.props.onLayerDestroy?.bind(this),onLayerCopy:this.props.onLayerCopy.bind(this),onLayerVisibilityToggle:this.props.onLayerVisibilityToggle.bind(this),...v},a.key));jt().s[78]++,e.push(M),jt().s[79]++,t+=1})});const r=(jt().s[80]++,this.props.t);return jt().s[81]++,oe.jsxs("section",{className:"maputnik-layer-list","data-wd-key":"layer-list",role:"complementary","aria-label":r("Layers list"),ref:this.scrollContainerRef,children:[oe.jsx(FTe,{layers:this.props.layers,sources:this.props.sources,isOpen:this.state.isOpen.add,onOpenToggle:this.toggleModal.bind(this,"add"),onLayersChange:this.props.onLayersChange},this.state.keys.add),oe.jsxs("header",{className:"maputnik-layer-list-header","data-wd-key":"layer-list.header",children:[oe.jsx("span",{className:"maputnik-layer-list-header-title",children:r("Layers")}),oe.jsx("span",{className:"maputnik-space"}),oe.jsx("div",{className:"maputnik-default-property",children:oe.jsx("div",{className:"maputnik-multibutton",children:oe.jsx("button",{id:"skip-target-layer-list","data-wd-key":"skip-target-layer-list",onClick:this.toggleLayers,className:"maputnik-button",children:this.state.areAllGroupsExpanded===!0?(jt().b[21][0]++,r("Collapse")):(jt().b[21][1]++,r("Expand"))})})}),oe.jsx("div",{className:"maputnik-default-property",children:oe.jsx("div",{className:"maputnik-multibutton",children:oe.jsx("button",{onClick:this.toggleModal.bind(this,"add"),"data-wd-key":"layer-list:add-layer",className:"maputnik-button maputnik-button-selected",children:r("Add Layer")})})})]}),oe.jsx("div",{role:"navigation","aria-label":r("Layers list"),children:oe.jsx("ul",{className:"maputnik-layer-list-container",children:e})})]})}}const WTe=(jt().s[82]++,Do()(GTe));jt().s[83]++;const QTe=n=>{jt().f[19]++;const e=(jt().s[84]++,ySe(gSe(aK,{activationConstraint:{distance:5}})));jt().s[85]++;const t=r=>{jt().f[20]++;const{active:o,over:s}=(jt().s[86]++,r);if(jt().s[87]++,s)jt().b[22][1]++;else{jt().b[22][0]++,jt().s[88]++;return}const a=(jt().s[89]++,n.layers.findIndex(d=>(jt().f[21]++,jt().s[90]++,d.id===o.id))),c=(jt().s[91]++,n.layers.findIndex(d=>(jt().f[22]++,jt().s[92]++,d.id===s.id)));jt().s[93]++,jt().b[24][0]++,a!==-1&&(jt().b[24][1]++,c!==-1)&&(jt().b[24][2]++,a!==c)?(jt().b[23][0]++,jt().s[94]++,n.onMoveLayer({oldIndex:a,newIndex:c})):jt().b[23][1]++},i=(jt().s[95]++,n.layers.map(r=>(jt().f[23]++,jt().s[96]++,r.id)));return jt().s[97]++,oe.jsx(_Ee,{sensors:e,collisionDetection:xSe,onDragEnd:t,children:oe.jsx(PEe,{items:i,strategy:DEe,children:oe.jsx(WTe,{...n})})})};var YI,sq;function Goe(){if(sq)return YI;sq=1;var n={},e="a menu outside a mounted Wrapper with an id, or a menu that does not exist";function t(s,a){n[s]=a}function i(s){delete n[s]}function r(s,a){var c=n[s];if(!c)throw new Error("Cannot open "+e);c.openMenu(a)}function o(s,a){var c=n[s];if(!c)throw new Error("Cannot close "+e);c.closeMenu(a)}return YI={registerManager:t,unregisterManager:i,openMenu:r,closeMenu:o},YI}var VI,aq;function qTe(){if(aq)return VI;aq=1;function n(r){r=r||{};var o=r.keybindings||{};this._settings={keybindings:{next:o.next||{keyCode:40},prev:o.prev||{keyCode:38},first:o.first,last:o.last},wrap:r.wrap,stringSearch:r.stringSearch,stringSearchDelay:800},this._keybindingsLookup=[];var s,a;for(s in this._settings.keybindings)a=this._settings.keybindings[s],a&&[].concat(a).forEach((function(c){c.metaKey=c.metaKey||!1,c.ctrlKey=c.ctrlKey||!1,c.altKey=c.altKey||!1,c.shiftKey=c.shiftKey||!1,this._keybindingsLookup.push({action:s,eventMatcher:c})}).bind(this));this._searchString="",this._members=[],r.members&&this.setMembers(r.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}n.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},n.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},n.prototype._handleKeydownEvent=function(r){var o=this._getActiveElementIndex();if(o!==-1){var s=!1;this._keybindingsLookup.forEach((function(a){if(e(a.eventMatcher,r))switch(s=!0,r.preventDefault(),a.action){case"next":this.moveFocusForward();break;case"prev":this.moveFocusBack();break;case"first":this.moveFocusToFirst();break;case"last":this.moveFocusToLast();break;default:return}}).bind(this)),s||this._handleUnboundKey(r)}},n.prototype.moveFocusForward=function(){var r=this._getActiveElementIndex(),o;return r<this._members.length-1?o=r+1:this._settings.wrap?o=0:o=r,this.focusNodeAtIndex(o),o},n.prototype.moveFocusBack=function(){var r=this._getActiveElementIndex(),o;return r>0?o=r-1:this._settings.wrap?o=this._members.length-1:o=r,this.focusNodeAtIndex(o),o},n.prototype.moveFocusToFirst=function(){this.focusNodeAtIndex(0)},n.prototype.moveFocusToLast=function(){this.focusNodeAtIndex(this._members.length-1)},n.prototype._handleUnboundKey=function(r){if(this._settings.stringSearch){if(this._searchString!==""&&(r.key===" "||r.keyCode===32))return r.preventDefault(),-1;if(!t(r.keyCode)||r.ctrlKey||r.metaKey||r.altKey)return-1;r.preventDefault(),this._addToSearchString(String.fromCharCode(r.keyCode)),this._runStringSearch()}},n.prototype._clearSearchString=function(){this._searchString=""},n.prototype._addToSearchString=function(r){this._searchString+=r.toLowerCase()},n.prototype._startSearchStringRefreshTimer=function(){var r=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){r._clearSearchString()},this._settings.stringSearchDelay)},n.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},n.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},n.prototype.moveFocusByString=function(r){for(var o,s=0,a=this._members.length;s<a;s++)if(o=this._members[s],!!o.text&&o.text.indexOf(r)===0)return i(o.node)},n.prototype._findIndexOfNode=function(r){for(var o=0,s=this._members.length;o<s;o++)if(this._members[o].node===r)return o;return-1},n.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},n.prototype.focusNodeAtIndex=function(r){var o=this._members[r];return o&&i(o.node),this},n.prototype.addMember=function(r,o){var s=r.node||r,a=r.text||s.getAttribute("data-focus-group-text")||s.textContent||"";this._checkNode(s);var c=a.replace(/[\W_]/g,"").toLowerCase(),d={node:s,text:c};return o!=null?this._members.splice(o,0,d):this._members.push(d),this},n.prototype.removeMember=function(r){var o=typeof r=="number"?r:this._findIndexOfNode(r);if(o!==-1)return this._members.splice(o,1),this},n.prototype.clearMembers=function(){return this._members=[],this},n.prototype.setMembers=function(r){this.clearMembers();for(var o=0,s=r.length;o<s;o++)this.addMember(r[o]);return this},n.prototype.getMembers=function(){return this._members},n.prototype._checkNode=function(r){if(!r.nodeType||r.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return r};function e(r,o){for(var s in r)if(o[s]!==void 0&&r[s]!==o[s])return!1;return!0}function t(r){return r>=65&&r<=90}function i(r){!r||!r.focus||(r.focus(),r.tagName.toLowerCase()==="input"&&r.select())}return VI=function(o){return new n(o)},VI}var $I,lq;function YTe(){if(lq)return $I;lq=1;var n=qTe(),e=Goe(),t={wrap:!0,stringSearch:!0},i={init:function(c){this.updateOptions(c),this.handleBlur=r.bind(this),this.handleSelection=o.bind(this),this.handleMenuKey=s.bind(this),this.focusGroup=n(t),this.button=null,this.menu=null,this.isOpen=!1},updateOptions:function(c){var d=this.options;this.options=c||this.options||{},typeof this.options.closeOnSelection>"u"&&(this.options.closeOnSelection=!0),typeof this.options.closeOnBlur>"u"&&(this.options.closeOnBlur=!0),this.options.id&&e.registerManager(this.options.id,this),d&&d.id&&d.id!==this.options.id&&e.unregisterManager(this.options.id,this)},focusItem:function(c){this.focusGroup.focusNodeAtIndex(c)},addItem:function(c){this.focusGroup.addMember(c)},clearItems:function(){this.focusGroup.clearMembers()},handleButtonNonArrowKey:function(c){this.focusGroup._handleUnboundKey(c)},destroy:function(){this.button=null,this.menu=null,this.focusGroup.deactivate(),clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},update:function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen}),this.options.onMenuToggle&&this.options.onMenuToggle({isOpen:this.isOpen})},openMenu:function(c){if(!this.isOpen&&(c=c||{},c.focusMenu===void 0&&(c.focusMenu=!0),this.isOpen=!0,this.update(),this.focusGroup.activate(),c.focusMenu)){var d=this;this.moveFocusTimer=setTimeout(function(){d.focusItem(0)},0)}},closeMenu:function(c){this.isOpen&&(c=c||{},this.isOpen=!1,this.update(),c.focusButton&&this.button.ref.current.focus())},toggleMenu:function(c,d){c=c||{},d=d||{},this.isOpen?this.closeMenu(c):this.openMenu(d)}};function r(){var a=this;a.blurTimer=setTimeout(function(){if(a.button){var c=a.button.ref.current;if(c){var d=c.ownerDocument.activeElement;if(!(c&&d===c)){var m=a.menu.ref.current;if(m===d){a.focusItem(0);return}m&&m.contains(d)||a.isOpen&&a.closeMenu({focusButton:!1})}}}},0)}function o(a,c){this.options.closeOnSelection&&this.closeMenu({focusButton:!0}),this.options.onSelection&&this.options.onSelection(a,c)}function s(a){if(this.isOpen)switch(a.key){case"Escape":a.preventDefault(),this.closeMenu({focusButton:!0});break;case"Home":a.preventDefault(),this.focusGroup.moveFocusToFirst();break;case"End":a.preventDefault(),this.focusGroup.moveFocusToLast();break}}return $I=function(a){var c=Object.create(i);return c.init(a),c},$I}var HI,uq;function YB(){if(uq)return HI;uq=1;var n=_a(),e=n.createContext();return HI=e,HI}var ZI,cq;function VB(){if(cq)return ZI;cq=1;var n=Y1();return ZI={refType:n.oneOfType([n.func,n.shape({current:n.elementType})])},ZI}var XI,Aq;function $B(){return Aq||(Aq=1,XI=function(n,e,t){t=t||{};for(var i in e)e.hasOwnProperty(i)&&(t[i]||(n[i]=e[i]))}),XI}var JI,hq;function VTe(){if(hq)return JI;hq=1;function n(B,P){if(!(B instanceof P))throw new TypeError("Cannot call a class as a function")}function e(B,P){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:B}function t(B,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);B.prototype=Object.create(P&&P.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(B,P):B.__proto__=P)}var i=_a(),r=Y1(),o=YTe(),s=YB(),a=VB(),c=a.refType,d=$B(),m={children:r.node.isRequired,forwardedRef:c,onMenuToggle:r.func,onSelection:r.func,closeOnSelection:r.bool,closeOnBlur:r.bool,tag:r.string},v=function(P){return{onMenuToggle:P.onMenuToggle,onSelection:P.onSelection,closeOnSelection:P.closeOnSelection,closeOnBlur:P.closeOnBlur,id:P.id}},M=(function(B){t(P,B);function P(U){n(this,P);var z=e(this,B.call(this,U));return z.manager=o(v(U)),z}return P.prototype.componentDidUpdate=function(){this.manager.updateOptions(v(this.props))},P.prototype.render=function(){var z={};return d(z,this.props,m),i.createElement(s.Provider,{value:this.manager},i.createElement(this.props.tag,z,this.props.children))},P})(i.Component);return M.propTypes=m,M.defaultProps={tag:"div"},JI=i.forwardRef(function(B,P){var U={forwardedRef:P};return d(U,B,{children:m.children,forwardedRef:m.forwardedRef}),d(U,{forwardedRef:P}),i.createElement(M,U,B.children)}),JI}var eT,dq;function $Te(){if(dq)return eT;dq=1;function n(M,B){if(!(M instanceof B))throw new TypeError("Cannot call a class as a function")}function e(M,B){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:M}function t(M,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);M.prototype=Object.create(B&&B.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(M,B):M.__proto__=B)}var i=_a(),r=Y1(),o=YB(),s=VB(),a=s.refType,c=$B(),d={ambManager:r.object.isRequired,children:r.node.isRequired,disabled:r.bool,forwardedRef:a,tag:r.string},m=function(){return["button","fieldset","input","optgroup","option","select","textarea"]},v=(function(M){t(B,M);function B(){var P,U,z;n(this,B);for(var V=arguments.length,Z=Array(V),X=0;X<V;X++)Z[X]=arguments[X];return z=(P=(U=e(this,M.call.apply(M,[this].concat(Z))),U),U.ref=i.createRef(),U.handleKeyDown=function(re){if(!U.props.disabled){var ie=U.props.ambManager;switch(re.key){case"ArrowDown":re.preventDefault(),ie.isOpen?ie.focusItem(0):ie.openMenu();break;case"Enter":case" ":re.preventDefault(),ie.toggleMenu();break;case"Escape":ie.handleMenuKey(re);break;default:ie.handleButtonNonArrowKey(re)}}},U.handleClick=function(){U.props.disabled||U.props.ambManager.toggleMenu({},{focusMenu:!1})},U.setRef=function(re){U.ref.current=re,typeof U.props.forwardedRef=="function"?U.props.forwardedRef(re):U.props.forwardedRef&&(U.props.forwardedRef.current=re)},P),e(U,z)}return B.prototype.componentDidMount=function(){this.props.ambManager.button=this},B.prototype.componentWillUnmount=function(){this.props.ambManager.destroy()},B.prototype.render=function(){var U=this.props,z=this.props.ambManager,V={role:"button",tabIndex:U.disabled?"":"0","aria-haspopup":!0,"aria-expanded":z.isOpen,"aria-disabled":U.disabled,onKeyDown:this.handleKeyDown,onClick:this.handleClick},Z={};return c(Z,d),m().indexOf(U.tag)>=0&&delete Z.disabled,z.options.closeOnBlur&&(V.onBlur=z.handleBlur),c(V,U,Z),c(V,{ref:this.setRef}),i.createElement(U.tag,V,U.children)},B})(i.Component);return v.propTypes=d,v.defaultProps={tag:"span"},eT=i.forwardRef(function(M,B){return i.createElement(o.Consumer,null,function(P){var U={ambManager:P,forwardedRef:B};return c(U,M,{ambManager:d.ambManager,children:d.children,forwardedRef:d.forwardedRef}),i.createElement(v,U,M.children)})}),eT}var tT,fq;function HTe(){return fq||(fq=1,tT=function(e,t,i){var r=0,o=0,s=!1,a=!1,c=!1;e.addEventListener("click",d,i),e.addEventListener("touchstart",m,i);function d(z){c||t(z)}function m(z){c=!0,!s&&(s=!0,e.addEventListener("touchmove",v,i),e.addEventListener("touchend",M,i),e.addEventListener("touchcancel",B,i),a=!1,r=z.touches[0].clientX,o=z.touches[0].clientY)}function v(z){a||Math.abs(z.touches[0].clientX-r)<=10&&Math.abs(z.touches[0].clientY-o)<=10||(a=!0)}function M(z){s=!1,P(),a||t(z)}function B(){s=!1,a=!1,r=0,o=0}function P(){e.removeEventListener("touchmove",v,i),e.removeEventListener("touchend",M,i),e.removeEventListener("touchcancel",B,i)}function U(){e.removeEventListener("click",d,i),e.removeEventListener("touchstart",m,i),P()}return{remove:U}}),tT}var nT,pq;function ZTe(){if(pq)return nT;pq=1;function n(M,B){if(!(M instanceof B))throw new TypeError("Cannot call a class as a function")}function e(M,B){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:M}function t(M,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);M.prototype=Object.create(B&&B.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(M,B):M.__proto__=B)}var i=_a(),r=Y1(),o=HTe(),s=YB(),a=VB(),c=a.refType,d=$B(),m={ambManager:r.object.isRequired,children:r.oneOfType([r.func,r.node]).isRequired,forwardedRef:c,tag:r.string},v=(function(M){t(B,M);function B(){var P,U,z;n(this,B);for(var V=arguments.length,Z=Array(V),X=0;X<V;X++)Z[X]=arguments[X];return z=(P=(U=e(this,M.call.apply(M,[this].concat(Z))),U),U.ref=i.createRef(),U.addTapListener=function(){var re=U.ref.current;if(re){var ie=re.ownerDocument;ie&&(U.tapListener=o(ie.documentElement,U.handleTap))}},U.handleTap=function(re){U.ref.current.contains(re.target)||U.props.ambManager.button.ref.current.contains(re.target)||U.props.ambManager.closeMenu()},U.setRef=function(re){U.ref.current=re,typeof U.props.forwardedRef=="function"?U.props.forwardedRef(re):U.props.forwardedRef&&(U.props.forwardedRef.current=re)},P),e(U,z)}return B.prototype.componentDidMount=function(){this.props.ambManager.menu=this},B.prototype.componentDidUpdate=function(){var U=this.props.ambManager;U.options.closeOnBlur&&(U.isOpen&&!this.tapListener?this.addTapListener():!U.isOpen&&this.tapListener&&(this.tapListener.remove(),delete this.tapListener),U.isOpen||U.clearItems())},B.prototype.componentWillUnmount=function(){this.tapListener&&this.tapListener.remove(),this.props.ambManager.destroy()},B.prototype.render=function(){var U=this.props,z=this.props.ambManager,V=(function(){return typeof U.children=="function"?U.children({isOpen:z.isOpen}):z.isOpen?U.children:!1})();if(!V)return!1;var Z={onKeyDown:z.handleMenuKey,role:"menu",tabIndex:-1};return z.options.closeOnBlur&&(Z.onBlur=z.handleBlur),d(Z,U,m),d(Z,{ref:this.setRef}),i.createElement(U.tag,Z,V)},B})(i.Component);return v.propTypes=m,v.defaultProps={tag:"div"},nT=i.forwardRef(function(M,B){return i.createElement(s.Consumer,null,function(P){var U={ambManager:P,forwardedRef:B};return d(U,M,{ambManager:m.ambManager,children:m.children,forwardedRef:m.forwardedRef}),i.createElement(v,U,M.children)})}),nT}var iT,mq;function XTe(){if(mq)return iT;mq=1;function n(v,M){if(!(v instanceof M))throw new TypeError("Cannot call a class as a function")}function e(v,M){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:v}function t(v,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);v.prototype=Object.create(M&&M.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(v,M):v.__proto__=M)}var i=_a(),r=Y1(),o=YB(),s=VB(),a=s.refType,c=$B(),d={ambManager:r.object.isRequired,children:r.node.isRequired,forwardedRef:a,tag:r.string,text:r.string,value:r.any},m=(function(v){t(M,v);function M(){var B,P,U;n(this,M);for(var z=arguments.length,V=Array(z),Z=0;Z<z;Z++)V[Z]=arguments[Z];return U=(B=(P=e(this,v.call.apply(v,[this].concat(V))),P),P.ref=i.createRef(),P.handleKeyDown=function(X){X.key!=="Enter"&&X.key!==" "||P.props.tag==="a"&&P.props.href||(X.preventDefault(),P.selectItem(X))},P.selectItem=function(X){var re=typeof P.props.value<"u"?P.props.value:P.props.children;P.props.ambManager.handleSelection(re,X)},P.setRef=function(X){P.ref.current=X,typeof P.props.forwardedRef=="function"?P.props.forwardedRef(X):P.props.forwardedRef&&(P.props.forwardedRef.current=X)},B),e(P,U)}return M.prototype.componentDidMount=function(){this.props.ambManager.addItem({node:this.ref.current,text:this.props.text})},M.prototype.render=function(){var P={onClick:this.selectItem,onKeyDown:this.handleKeyDown,role:"menuitem",tabIndex:"-1",ref:this.setRef};return c(P,this.props,d),i.createElement(this.props.tag,P,this.props.children)},M})(i.Component);return m.propTypes=d,m.defaultProps={tag:"div"},iT=i.forwardRef(function(v,M){return i.createElement(o.Consumer,null,function(B){var P={ambManager:B,forwardedRef:M};return c(P,v,{ambManager:d.ambManager,children:d.children,forwardedRef:d.forwardedRef}),i.createElement(m,P,v.children)})}),iT}var rT,gq;function JTe(){if(gq)return rT;gq=1;var n=Goe();return rT={Wrapper:VTe(),Button:$Te(),Menu:ZTe(),MenuItem:XTe(),openMenu:n.openMenu,closeMenu:n.closeMenu},rT}var eS=JTe();function yq(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function hP(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yq(Object(t),!0).forEach(function(i){Ya(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yq(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function HB(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function vq(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function ZB(n,e,t){return e&&vq(n.prototype,e),t&&vq(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Ya(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Eg(){return Eg=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Eg.apply(this,arguments)}function FK(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&dP(n,e)}function y6(n){return y6=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},y6(n)}function dP(n,e){return dP=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},dP(n,e)}function e7e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function t7e(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function XB(n,e){if(n==null)return{};var t=t7e(n,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function _m(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function n7e(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _m(n)}function zK(n){var e=e7e();return function(){var i=y6(n),r;if(e){var o=y6(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return n7e(this,r)}}function i7e(n,e){return s7e(n)||l7e(n,e)||Woe(n,e)||c7e()}function r7e(n){return o7e(n)||a7e(n)||Woe(n)||u7e()}function o7e(n){if(Array.isArray(n))return fP(n)}function s7e(n){if(Array.isArray(n))return n}function a7e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function l7e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,o=!1,s,a;try{for(t=t.call(n);!(r=(s=t.next()).done)&&(i.push(s.value),!(e&&i.length===e));r=!0);}catch(c){o=!0,a=c}finally{try{!r&&t.return!=null&&t.return()}finally{if(o)throw a}}return i}}function Woe(n,e){if(n){if(typeof n=="string")return fP(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return fP(n,e)}}function fP(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function u7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var A7e=ZB(function n(e){var t=this,i=e.expanded,r=i===void 0?[]:i,o=e.allowMultipleExpanded,s=o===void 0?!1:o,a=e.allowZeroExpanded,c=a===void 0?!1:a;HB(this,n),Ya(this,"expanded",void 0),Ya(this,"allowMultipleExpanded",void 0),Ya(this,"allowZeroExpanded",void 0),Ya(this,"toggleExpanded",function(d){if(t.isItemDisabled(d))return t;var m=t.isItemExpanded(d);return m?t.augment({expanded:t.expanded.filter(function(v){return v!==d})}):t.augment({expanded:t.allowMultipleExpanded?[].concat(r7e(t.expanded),[d]):[d]})}),Ya(this,"isItemDisabled",function(d){var m=t.isItemExpanded(d),v=t.expanded.length===1;return!!(m&&!t.allowZeroExpanded&&v)}),Ya(this,"isItemExpanded",function(d){return t.expanded.indexOf(d)!==-1}),Ya(this,"getPanelAttributes",function(d,m){var v=m??t.isItemExpanded(d);return{role:t.allowMultipleExpanded?void 0:"region","aria-hidden":t.allowMultipleExpanded?!v:void 0,"aria-labelledby":t.getButtonId(d),id:t.getPanelId(d),hidden:v?void 0:!0}}),Ya(this,"getHeadingAttributes",function(){return{role:"heading"}}),Ya(this,"getButtonAttributes",function(d,m){var v=m??t.isItemExpanded(d),M=t.isItemDisabled(d);return{id:t.getButtonId(d),"aria-disabled":M,"aria-expanded":v,"aria-controls":t.getPanelId(d),role:"button",tabIndex:0}}),Ya(this,"getPanelId",function(d){return"accordion__panel-".concat(d)}),Ya(this,"getButtonId",function(d){return"accordion__heading-".concat(d)}),Ya(this,"augment",function(d){return new n(hP({expanded:t.expanded,allowMultipleExpanded:t.allowMultipleExpanded,allowZeroExpanded:t.allowZeroExpanded},d))}),this.expanded=r,this.allowMultipleExpanded=s,this.allowZeroExpanded=c}),Qoe=wt.createContext(null),qoe=(function(n){FK(t,n);var e=zK(t);function t(){var i;HB(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),Ya(_m(i),"state",new A7e({expanded:i.props.preExpanded,allowMultipleExpanded:i.props.allowMultipleExpanded,allowZeroExpanded:i.props.allowZeroExpanded})),Ya(_m(i),"toggleExpanded",function(a){i.setState(function(c){return c.toggleExpanded(a)},function(){i.props.onChange&&i.props.onChange(i.state.expanded)})}),Ya(_m(i),"isItemDisabled",function(a){return i.state.isItemDisabled(a)}),Ya(_m(i),"isItemExpanded",function(a){return i.state.isItemExpanded(a)}),Ya(_m(i),"getPanelAttributes",function(a,c){return i.state.getPanelAttributes(a,c)}),Ya(_m(i),"getHeadingAttributes",function(){return i.state.getHeadingAttributes()}),Ya(_m(i),"getButtonAttributes",function(a,c){return i.state.getButtonAttributes(a,c)}),i}return ZB(t,[{key:"render",value:function(){var r=this.state,o=r.allowZeroExpanded,s=r.allowMultipleExpanded;return wt.createElement(Qoe.Provider,{value:{allowMultipleExpanded:s,allowZeroExpanded:o,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),t})(wt.PureComponent);Ya(qoe,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var Yoe=(function(n){FK(t,n);var e=zK(t);function t(){var i;HB(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),Ya(_m(i),"renderChildren",function(a){return a?i.props.children(a):null}),i}return ZB(t,[{key:"render",value:function(){return wt.createElement(Qoe.Consumer,null,this.renderChildren)}}]),t})(wt.PureComponent),h7e=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],d7e=function(e){var t=e.className,i=t===void 0?"accordion":t,r=e.allowMultipleExpanded,o=e.allowZeroExpanded,s=e.onChange,a=e.preExpanded,c=XB(e,h7e);return wt.createElement(qoe,{preExpanded:a,allowMultipleExpanded:r,allowZeroExpanded:o,onChange:s},wt.createElement("div",Eg({"data-accordion-component":"Accordion",className:i},c)))},pP;(function(n){n.Accordion="Accordion",n.AccordionItem="AccordionItem",n.AccordionItemButton="AccordionItemButton",n.AccordionItemHeading="AccordionItemHeading",n.AccordionItemPanel="AccordionItemPanel"})(pP||(pP={}));var Voe=pP,oT=0;function f7e(){var n=oT;return oT=oT+1,"raa-".concat(n)}var p7e=wt.useId||f7e,m7e=/[\u0009\u000a\u000c\u000d\u0020]/g;function P5(n){return n===""||m7e.test(n)?(console.error('uuid must be a valid HTML5 id but was given "'.concat(n,'", ASCII whitespaces are forbidden')),!1):!0}var $oe=wt.createContext(null),g7e=function(e){var t=e.children,i=e.uuid,r=e.accordionContext,o=e.dangerouslySetExpanded,s=function(){r.toggleExpanded(i)},a=function(d){var m=o??d.isItemExpanded(i),v=d.isItemDisabled(i),M=d.getPanelAttributes(i,o),B=d.getHeadingAttributes(i),P=d.getButtonAttributes(i,o);return wt.createElement($oe.Provider,{value:{uuid:i,expanded:m,disabled:v,toggleExpanded:s,panelAttributes:M,headingAttributes:B,buttonAttributes:P}},t)};return wt.createElement(Yoe,null,a)},y7e=function(e){return wt.createElement(Yoe,null,function(t){return wt.createElement(g7e,Eg({},e,{accordionContext:t}))})},JB=function(e){var t=e.children,i=function(o){return o?t(o):null};return wt.createElement($oe.Consumer,null,i)},v7e=["uuid","dangerouslySetExpanded","className","activeClassName"],Hoe=function(e){var t=e.uuid,i=e.dangerouslySetExpanded,r=e.className,o=r===void 0?"accordion__item":r,s=e.activeClassName,a=XB(e,v7e),c=wt.useState(p7e()),d=i7e(c,1),m=d[0],v=t??m,M=function(P){var U=P.expanded,z=U&&s?s:o;return wt.createElement("div",Eg({"data-accordion-component":"AccordionItem",className:z},a))};return P5(v.toString()),a.id&&P5(a.id),wt.createElement(y7e,{uuid:v,dangerouslySetExpanded:i},wt.createElement(JB,null,M))};Hoe.displayName=Voe.AccordionItem;function Zoe(n){return n&&(n.matches('[data-accordion-component="Accordion"]')?n:Zoe(n.parentElement))}function eO(n){var e=Zoe(n);return e&&Array.from(e.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function b7e(n){var e=eO(n)||[],t=e[0];t&&t.focus()}function C7e(n){var e=eO(n)||[],t=e[e.length-1];t&&t.focus()}function _7e(n){var e=eO(n)||[],t=e.indexOf(n);if(t!==-1){var i=e[t+1];i&&i.focus()}}function x7e(n){var e=eO(n)||[],t=e.indexOf(n);if(t!==-1){var i=e[t-1];i&&i.focus()}}var C1={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},M7e=["toggleExpanded","className"],w7e=function(e){var t=e.toggleExpanded,i=e.className,r=i===void 0?"accordion__button":i,o=XB(e,M7e),s=function(c){var d=c.key;if((d===C1.ENTER||d===C1.SPACE||d===C1.SPACE_DEPRECATED)&&(c.preventDefault(),t()),c.target instanceof HTMLElement)switch(d){case C1.HOME:{c.preventDefault(),b7e(c.target);break}case C1.END:{c.preventDefault(),C7e(c.target);break}case C1.LEFT:case C1.UP:{c.preventDefault(),x7e(c.target);break}case C1.RIGHT:case C1.DOWN:{c.preventDefault(),_7e(c.target);break}}};return o.id&&P5(o.id),wt.createElement("div",Eg({className:r},o,{role:"button",tabIndex:0,onClick:t,onKeyDown:s,"data-accordion-component":"AccordionItemButton"}))},S7e=function(e){return wt.createElement(JB,null,function(t){var i=t.toggleExpanded,r=t.buttonAttributes;return wt.createElement(w7e,Eg({toggleExpanded:i},e,r))})},E7e={className:"accordion__heading","aria-level":3},B7e=`AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.

From the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):

The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.

`,Xoe=(function(n){FK(t,n);var e=zK(t);function t(){var i;HB(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),Ya(_m(i),"ref",void 0),Ya(_m(i),"setRef",function(a){i.ref=a}),i}return ZB(t,[{key:"componentDidUpdate",value:function(){t.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){t.VALIDATE(this.ref)}},{key:"render",value:function(){return wt.createElement("div",Eg({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(r){if(r===void 0)throw new Error("ref is undefined");if(!(r.childElementCount===1&&r.firstElementChild&&r.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton"))throw new Error(B7e)}}]),t})(wt.PureComponent);Ya(Xoe,"defaultProps",E7e);var Joe=function(e){return wt.createElement(JB,null,function(t){var i=t.headingAttributes;return e.id&&P5(e.id),wt.createElement(Xoe,Eg({},e,i))})};Joe.displayName=Voe.AccordionItemHeading;var O7e=["className","region","id"],I7e=function(e){var t=e.className,i=t===void 0?"accordion__panel":t,r=e.region,o=e.id,s=XB(e,O7e),a=function(d){var m=d.panelAttributes;o&&P5(o);var v=hP(hP({},m),{},{"aria-labelledby":r?m["aria-labelledby"]:void 0});return wt.createElement("div",Eg({"data-accordion-component":"AccordionItemPanel",className:i},s,v,{role:r?"region":void 0}))};return wt.createElement(JB,null,a)};function L5(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",e="ee4be309accf3b6f15b0a988cbdadd67c7132608",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",statementMap:{0:{start:{line:3,column:18},end:{line:5,column:1}},1:{start:{line:4,column:2},end:{line:4,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:3,column:18},end:{line:3,column:19}},loc:{start:{line:3,column:29},end:{line:5,column:1}},line:3}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx"],names:[],mappings:"AAOS;AAPT,OAAO,eAAsC;AAM7C,MAAM,YAAsC,CAAC,UAAU;AACrD,SAAO,oBAAC,aAAW,GAAG,OAAO;AAC/B;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ee4be309accf3b6f15b0a988cbdadd67c7132608"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return L5=function(){return s},s}L5();L5().s[0]++;const tO=n=>(L5().f[0]++,L5().s[1]++,oe.jsx(Are,{...n}));function U5(n){return _o({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 19a2 2 0 0 0 2 2c2 0 2 -4 3 -9s1 -9 3 -9a2 2 0 0 1 2 2"},child:[]},{tag:"path",attr:{d:"M5 12h6"},child:[]},{tag:"path",attr:{d:"M15 12l6 6"},child:[]},{tag:"path",attr:{d:"M15 18l6 -6"},child:[]}]})(n)}function nO(n){return _o({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M28,64A12,12,0,0,1,40,52H216a12,12,0,0,1,0,24H40A12,12,0,0,1,28,64Zm12,76H216a12,12,0,0,0,0-24H40a12,12,0,0,0,0,24Zm104,40H40a12,12,0,0,0,0,24H144a12,12,0,0,0,0-24Zm88,0H220V168a12,12,0,0,0-24,0v12H184a12,12,0,0,0,0,24h12v12a12,12,0,0,0,24,0V204h12a12,12,0,0,0,0-24Z"},child:[]}]})(n)}function MC(){var n="/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",e="99dad9631fbee5fc23be2dafaf7c7eea92c38eac",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",statementMap:{0:{start:{line:2,column:34},end:{line:2,column:56}},1:{start:{line:3,column:28},end:{line:3,column:41}},2:{start:{line:4,column:30},end:{line:4,column:123}},3:{start:{line:4,column:88},end:{line:4,column:122}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:80},end:{line:4,column:81}},loc:{start:{line:4,column:88},end:{line:4,column:122}},line:4}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/filterops.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEZ,aAAM,qBAAqB,CAAC,OAAO,OAAO,MAAM;AAChD,aAAM,eAAe,CAAC,MAAM,KAAK;AACjC,aAAM,iBAAiB,OAC3B,KAAK,OAAO,gBAAgB,MAAM,EAClC,OAAO,QAAM,mBAAmB,QAAQ,EAAE,IAAI,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99dad9631fbee5fc23be2dafaf7c7eea92c38eac"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return MC=function(){return s},s}MC();const jK=(MC().s[0]++,["all","any","none"]);MC().s[1]++;const T7e=(MC().s[2]++,Object.keys(Wr.filter_operator.values).filter(n=>(MC().f[0]++,MC().s[3]++,jK.indexOf(n)<0)));function Zi(){var n="/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",e="d18e3b448d830733ac17bcacd45f7c08e364baa2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:8,column:25}},1:{start:{line:8,column:16},end:{line:8,column:25}},2:{start:{line:9,column:2},end:{line:9,column:25}},3:{start:{line:9,column:16},end:{line:9,column:25}},4:{start:{line:10,column:2},end:{line:10,column:23}},5:{start:{line:13,column:19},end:{line:13,column:40}},6:{start:{line:14,column:2},end:{line:16,column:3}},7:{start:{line:15,column:4},end:{line:15,column:13}},8:{start:{line:17,column:2},end:{line:23,column:3}},9:{start:{line:18,column:4},end:{line:18,column:16}},10:{start:{line:19,column:9},end:{line:23,column:3}},11:{start:{line:20,column:4},end:{line:20,column:17}},12:{start:{line:22,column:4},end:{line:22,column:13}},13:{start:{line:26,column:2},end:{line:26,column:21}},14:{start:{line:27,column:2},end:{line:27,column:22}},15:{start:{line:28,column:2},end:{line:28,column:11}},16:{start:{line:31,column:24},end:{line:33,column:3}},17:{start:{line:35,column:20},end:{line:35,column:76}},18:{start:{line:36,column:4},end:{line:40,column:5}},19:{start:{line:37,column:6},end:{line:37,column:43}},20:{start:{line:38,column:11},end:{line:40,column:5}},21:{start:{line:39,column:6},end:{line:39,column:47}},22:{start:{line:41,column:4},end:{line:41,column:35}},23:{start:{line:44,column:14},end:{line:44,column:31}},24:{start:{line:45,column:21},end:{line:45,column:25}},25:{start:{line:46,column:25},end:{line:46,column:29}},26:{start:{line:47,column:23},end:{line:47,column:33}},27:{start:{line:48,column:4},end:{line:75,column:9}},28:{start:{line:54,column:72},end:{line:54,column:92}},29:{start:{line:55,column:41},end:{line:55,column:104}},30:{start:{line:63,column:37},end:{line:63,column:100}},31:{start:{line:72,column:27},end:{line:72,column:89}}},fnMap:{0:{name:"tryParseInt",decl:{start:{line:7,column:9},end:{line:7,column:20}},loc:{start:{line:7,column:24},end:{line:11,column:1}},line:7},1:{name:"tryParseBool",decl:{start:{line:12,column:9},end:{line:12,column:21}},loc:{start:{line:12,column:25},end:{line:24,column:1}},line:12},2:{name:"parseFilter",decl:{start:{line:25,column:9},end:{line:25,column:20}},loc:{start:{line:25,column:24},end:{line:29,column:1}},line:25},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:58},end:{line:42,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:76,column:3}},line:43},5:{name:"(anonymous_5)",decl:{start:{line:54,column:58},end:{line:54,column:59}},loc:{start:{line:54,column:72},end:{line:54,column:92}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:55,column:20},end:{line:55,column:21}},loc:{start:{line:55,column:41},end:{line:55,column:104}},line:55},7:{name:"(anonymous_7)",decl:{start:{line:63,column:20},end:{line:63,column:21}},loc:{start:{line:63,column:37},end:{line:63,column:100}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:72,column:20},end:{line:72,column:21}},loc:{start:{line:72,column:27},end:{line:72,column:89}},line:72}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:25}},type:"if",locations:[{start:{line:8,column:2},end:{line:8,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:9,column:25}},type:"if",locations:[{start:{line:9,column:2},end:{line:9,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},2:{loc:{start:{line:14,column:2},end:{line:16,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:16,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:14},3:{loc:{start:{line:17,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:23,column:3}},{start:{line:19,column:9},end:{line:23,column:3}}],line:17},4:{loc:{start:{line:19,column:9},end:{line:23,column:3}},type:"if",locations:[{start:{line:19,column:9},end:{line:23,column:3}},{start:{line:21,column:9},end:{line:23,column:3}}],line:19},5:{loc:{start:{line:36,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:40,column:5}},{start:{line:38,column:11},end:{line:40,column:5}}],line:36},6:{loc:{start:{line:36,column:8},end:{line:36,column:49}},type:"binary-expr",locations:[{start:{line:36,column:8},end:{line:36,column:26}},{start:{line:36,column:30},end:{line:36,column:49}}],line:36},7:{loc:{start:{line:38,column:11},end:{line:40,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:40,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},8:{loc:{start:{line:67,column:6},end:{line:74,column:10}},type:"binary-expr",locations:[{start:{line:67,column:6},end:{line:67,column:27}},{start:{line:67,column:47},end:{line:74,column:10}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx"],names:[],mappings:"AA+DW,SAEH,KAFG;AA/DX,OAAO,WAAW;AAElB,SAAQ,sBAAqB;AAC7B,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AAExB,SAAS,YAAY,GAAoB;AACvC,MAAI,MAAM,GAAI,QAAO;AACrB,MAAI,MAAM,CAAW,EAAG,QAAO;AAC/B,SAAO,WAAW,CAAW;AAC/B;AAEA,SAAS,aAAa,GAAqB;AACzC,QAAM,WAAY,OAAO,MAAO;AAChC,MAAG,CAAC,UAAU;AACZ,WAAO;AAAA,EACT;AAEA,MAAG,EAAE,MAAM,cAAc,GAAG;AAC1B,WAAO;AAAA,EACT,WACQ,EAAE,MAAM,eAAe,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,YAAY,GAA8B;AACjD,MAAI,YAAY,CAAQ;AACxB,MAAI,aAAa,CAAQ;AACzB,SAAO;AACT;AAQA,qBAAqB,2BAA2B,MAAM,UAAmC;AAAA,EACvF,OAAO,eAAe;AAAA,IACpB,YAAY,CAAC;AAAA,EACf;AAAA,EAEA,oBAAoB,UAAkB,cAAsB,YAAsB;AAChF,QAAI,YAAY,CAAC,UAAU,cAAc,GAAG,WAAW,IAAI,WAAW,CAAC;AACvE,QAAG,aAAa,SAAS,aAAa,QAAQ;AAC5C,kBAAY,CAAC,UAAU,YAAY;AAAA,IACrC,WAAU,WAAW,WAAW,GAAG;AACjC,kBAAY,CAAC,UAAU,cAAc,EAAE;AAAA,IACzC;AACA,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,WAAW,EAAE,CAAC;AACpB,UAAM,eAAe,EAAE,CAAC;AACxB,UAAM,aAAa,EAAE,MAAM,CAAC;AAE5B,WAAO,qBAAC,SAAI,WAAU,iCACpB;AAAA,0BAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,OAAO,KAAK,KAAK,MAAM,UAAW,EAAE,IAAI,cAAY,CAAC,UAAU,QAAQ,CAAC;AAAA,UACjF,UAAU,CAAC,oBAA4B,KAAK,oBAAoB,UAAU,iBAAiB,UAAU;AAAA;AAAA,MACvG,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,UAAU,CAAC,gBAAwB,KAAK,oBAAoB,aAAa,cAAc,UAAU;AAAA,UACjG,SAAS;AAAA;AAAA,MACX,GACF;AAAA,MACC,WAAW,SAAS,KACrB,oBAAC,SAAI,WAAU,+BACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO,WAAW,KAAK,GAAG;AAAA,UAC1B,UAAU,CAAC,MAAc,KAAK,oBAAoB,UAAU,cAAc,EAAE,MAAM,GAAG,CAAC;AAAA;AAAA,MACxF,GACF;AAAA,OAEF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d18e3b448d830733ac17bcacd45f7c08e364baa2"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Zi=function(){return s},s}Zi();function k7e(n){return Zi().f[0]++,Zi().s[0]++,n===""?(Zi().b[0][0]++,Zi().s[1]++,n):(Zi().b[0][1]++,Zi().s[2]++,isNaN(n)?(Zi().b[1][0]++,Zi().s[3]++,n):(Zi().b[1][1]++,Zi().s[4]++,parseFloat(n)))}function D7e(n){Zi().f[1]++;const e=(Zi().s[5]++,typeof n=="string");if(Zi().s[6]++,e)Zi().b[2][1]++;else return Zi().b[2][0]++,Zi().s[7]++,n;return Zi().s[8]++,n.match(/^\s*true\s*$/)?(Zi().b[3][0]++,Zi().s[9]++,!0):(Zi().b[3][1]++,Zi().s[10]++,n.match(/^\s*false\s*$/)?(Zi().b[4][0]++,Zi().s[11]++,!1):(Zi().b[4][1]++,Zi().s[12]++,n))}function R7e(n){return Zi().f[2]++,Zi().s[13]++,n=k7e(n),Zi().s[14]++,n=D7e(n),Zi().s[15]++,n}class P7e extends In.Component{static defaultProps=(Zi().s[16]++,{properties:{}});onFilterPartChanged(e,t,i){Zi().f[3]++;let r=(Zi().s[17]++,[e,t,...i.map(R7e)]);Zi().s[18]++,Zi().b[6][0]++,e==="has"||(Zi().b[6][1]++,e==="!has")?(Zi().b[5][0]++,Zi().s[19]++,r=[e,t]):(Zi().b[5][1]++,Zi().s[20]++,i.length===0?(Zi().b[7][0]++,Zi().s[21]++,r=[e,t,""]):Zi().b[7][1]++),Zi().s[22]++,this.props.onChange(r)}render(){Zi().f[4]++;const e=(Zi().s[23]++,this.props.filter),t=(Zi().s[24]++,e[0]),i=(Zi().s[25]++,e[1]),r=(Zi().s[26]++,e.slice(2));return Zi().s[27]++,oe.jsxs("div",{className:"maputnik-filter-editor-single",children:[oe.jsx("div",{className:"maputnik-filter-editor-property",children:oe.jsx(RM,{"aria-label":"key",value:i,options:Object.keys(this.props.properties).map(o=>(Zi().f[5]++,Zi().s[28]++,[o,o])),onChange:o=>(Zi().f[6]++,Zi().s[29]++,this.onFilterPartChanged(t,o,r))})}),oe.jsx("div",{className:"maputnik-filter-editor-operator",children:oe.jsx(HC,{"aria-label":"function",value:t,onChange:o=>(Zi().f[7]++,Zi().s[30]++,this.onFilterPartChanged(o,i,r)),options:T7e})}),(Zi().b[8][0]++,r.length>0&&(Zi().b[8][1]++,oe.jsx("div",{className:"maputnik-filter-editor-args",children:oe.jsx(Fm,{"aria-label":"value",value:r.join(","),onChange:o=>(Zi().f[8]++,Zi().s[31]++,this.onFilterPartChanged(t,i,o.split(",")))})})))]})}}function t2(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",e="1beba484bbe354357d7ce4f43a423306cbd22032",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:20,column:9}},2:{start:{line:23,column:26},end:{line:23,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:21,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx"],names:[],mappings:"AAYW,SACL,KADK;AAZX,OAAO,WAAuC;AAC9C,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAMtD,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,gCACpB;AAAA,0BAAC,SAAI,WAAU,wCACZ,eAAK,MAAM,UACd;AAAA,MACA,oBAAC,SAAI,WAAU,uCACb;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,qBAAqB;AAAA,UAE9B,8BAAC,YAAS;AAAA;AAAA,MACZ,GACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1beba484bbe354357d7ce4f43a423306cbd22032"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return t2=function(){return s},s}t2();class L7e extends In.Component{render(){t2().f[0]++;const e=(t2().s[0]++,this.props.t);return t2().s[1]++,oe.jsxs("div",{className:"maputnik-filter-editor-block",children:[oe.jsx("div",{className:"maputnik-filter-editor-block-content",children:this.props.children}),oe.jsx("div",{className:"maputnik-filter-editor-block-action",children:oe.jsx(Ks,{className:"maputnik-icon-button",onClick:this.props.onDelete,title:e("Delete filter block"),children:oe.jsx(jC,{})})})]})}}const U7e=(t2().s[2]++,Do()(L7e));var sT,bq;function K7e(){if(bq)return sT;bq=1;var n="[object Symbol]",e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe23",i="\\u20d0-\\u20f0",r="\\ufe0e\\ufe0f",o="["+e+"]",s="["+t+i+"]",a="\\ud83c[\\udffb-\\udfff]",c="(?:"+s+"|"+a+")",d="[^"+e+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",v="[\\ud800-\\udbff][\\udc00-\\udfff]",M="\\u200d",B=c+"?",P="["+r+"]?",U="(?:"+M+"(?:"+[d,m,v].join("|")+")"+P+B+")*",z=P+B+U,V="(?:"+[d+s+"?",s,m,v,o].join("|")+")",Z=RegExp(a+"(?="+a+")|"+V+z,"g"),X=RegExp("["+M+e+t+i+r+"]"),re=typeof window=="object"&&window&&window.Object===Object&&window,ie=typeof self=="object"&&self&&self.Object===Object&&self,te=re||ie||Function("return this")();function q(ut){return ut.split("")}function le(ut){return X.test(ut)}function ce(ut){return le(ut)?ve(ut):q(ut)}function ve(ut){return ut.match(Z)||[]}var ge=Object.prototype,Ee=ge.toString,xe=te.Symbol,Te=xe?xe.prototype:void 0,Fe=Te?Te.toString:void 0;function Ie(ut,kt,Ut){var Le=-1,ke=ut.length;kt<0&&(kt=-kt>ke?0:ke+kt),Ut=Ut>ke?ke:Ut,Ut<0&&(Ut+=ke),ke=kt>Ut?0:Ut-kt>>>0,kt>>>=0;for(var Oe=Array(ke);++Le<ke;)Oe[Le]=ut[Le+kt];return Oe}function Ye(ut){if(typeof ut=="string")return ut;if(De(ut))return Fe?Fe.call(ut):"";var kt=ut+"";return kt=="0"&&1/ut==-1/0?"-0":kt}function At(ut,kt,Ut){var Le=ut.length;return Ut=Ut===void 0?Le:Ut,!kt&&Ut>=Le?ut:Ie(ut,kt,Ut)}function mt(ut){return function(kt){kt=Ge(kt);var Ut=le(kt)?ce(kt):void 0,Le=Ut?Ut[0]:kt.charAt(0),ke=Ut?At(Ut,1).join(""):kt.slice(1);return Le[ut]()+ke}}function Ue(ut){return!!ut&&typeof ut=="object"}function De(ut){return typeof ut=="symbol"||Ue(ut)&&Ee.call(ut)==n}function Ge(ut){return ut==null?"":Ye(ut)}function Re(ut){return St(Ge(ut).toLowerCase())}var St=mt("toUpperCase");return sT=Re,sT}var F7e=K7e();const NK=vu(F7e);function H0(){var n="/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",e="8b86d889d32efa9a6cc667b2fa3579002dfb58fc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",statementMap:{0:{start:{line:4,column:16},end:{line:4,column:36}},1:{start:{line:5,column:2},end:{line:9,column:3}},2:{start:{line:6,column:4},end:{line:6,column:52}},3:{start:{line:8,column:4},end:{line:8,column:22}},4:{start:{line:10,column:2},end:{line:10,column:27}}},fnMap:{0:{name:"labelFromFieldName",decl:{start:{line:2,column:24},end:{line:2,column:42}},loc:{start:{line:2,column:54},end:{line:11,column:1}},line:2}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,wBAAwB,mBAAmB,WAAmB;AAC5D,MAAI;AACJ,QAAM,QAAQ,UAAU,MAAM,GAAG;AACjC,MAAI,MAAM,SAAS,GAAG;AACpB,YAAQ,UAAU,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AAAA,EAChD,OACK;AACH,YAAQ;AAAA,EACV;AACA,SAAO,WAAW,KAAK;AACzB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b86d889d32efa9a6cc667b2fa3579002dfb58fc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return H0=function(){return s},s}H0();function iO(n){H0().f[0]++;let e;const t=(H0().s[0]++,n.split("-"));return H0().s[1]++,t.length>1?(H0().b[0][0]++,H0().s[2]++,e=n.split("-").slice(1).join(" ")):(H0().b[0][1]++,H0().s[3]++,e=n),H0().s[4]++,NK(e)}function Ra(){var n="/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",e="421a194a894795caa98e9aaeb6be503f0178c030",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",statementMap:{0:{start:{line:10,column:24},end:{line:16,column:3}},1:{start:{line:18,column:4},end:{line:18,column:17}},2:{start:{line:19,column:4},end:{line:21,column:6}},3:{start:{line:24,column:34},end:{line:24,column:44}},4:{start:{line:25,column:25},end:{line:25,column:52}},5:{start:{line:26,column:42},end:{line:48,column:8}},6:{start:{line:49,column:16},end:{line:49,column:22}},7:{start:{line:50,column:4},end:{line:53,column:5}},8:{start:{line:51,column:23},end:{line:51,column:118}},9:{start:{line:52,column:6},end:{line:52,column:42}},10:{start:{line:54,column:4},end:{line:75,column:6}},11:{start:{line:78,column:27},end:{line:78,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:13},end:{line:12,column:14}},loc:{start:{line:12,column:19},end:{line:13,column:5}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:14,column:12},end:{line:14,column:13}},loc:{start:{line:14,column:18},end:{line:15,column:5}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:21},end:{line:22,column:3}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:23,column:2},end:{line:23,column:3}},loc:{start:{line:23,column:11},end:{line:76,column:3}},line:23}},branchMap:{0:{loc:{start:{line:25,column:25},end:{line:25,column:52}},type:"cond-expr",locations:[{start:{line:25,column:35},end:{line:25,column:45}},{start:{line:25,column:48},end:{line:25,column:52}}],line:25},1:{loc:{start:{line:27,column:6},end:{line:37,column:7}},type:"binary-expr",locations:[{start:{line:27,column:6},end:{line:27,column:23}},{start:{line:27,column:43},end:{line:37,column:7}}],line:27},2:{loc:{start:{line:50,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:50,column:4},end:{line:53,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},3:{loc:{start:{line:51,column:23},end:{line:51,column:118}},type:"cond-expr",locations:[{start:{line:51,column:46},end:{line:51,column:95}},{start:{line:51,column:98},end:{line:51,column:118}}],line:51}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx"],names:[],mappings:"AA6CM,mBASM,KATN;AA7CN,OAAO,WAAW;AAClB,SAAQ,UAAU,cAAa;AAC/B,SAA+B,uBAAuB;AAEtD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,wBAAwB;AAC/B,OAAO,eAAe;AAmBtB,MAAM,mCAAmC,MAAM,UAA2C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,IACT,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,OAAO,QAAO,IAAI,KAAK;AACjC,UAAM,eAAe,UAAU,CAAC,QAAQ,IAAI;AAE5C,UAAM,gBACJ,iCACG;AAAA,WAAK,MAAM,UACV;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,UAAU;AAAA,UACV,WAAU;AAAA,UACV,OAAO,EAAE,wBAAwB;AAAA,UAEjC,8BAAC,UAAO;AAAA;AAAA,QANJ;AAAA,MAON;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,WAAU;AAAA,UACV,OAAO,EAAE,mBAAmB;AAAA,UAE5B,8BAAC,YAAS;AAAA;AAAA,QALN;AAAA,MAMN;AAAA,OACF;AAEF,QAAI,QAAQ;AACZ,QAAI,KAAK,MAAM,QAAQ;AACrB,YAAM,WAAW,KAAK,MAAM,YAAY,KAAK,MAAM,YAAY,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM;AACvG,cAAQ,KAAK,MAAM,OAAO,QAAQ;AAAA,IACpC;AACA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,EAAE,mBAAmB,KAAK,MAAM,SAAS,CAAC;AAAA,QACjD,QAAQ;AAAA,QACR,UAAU;AAAA,QACV;AAAA,QAEA;AAAA,UAAC;AAAA;AAAA,YACC,UAAS;AAAA,YACT,MAAM,KAAK,MAAM;AAAA,YACjB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,QAAQ,KAAK,MAAM;AAAA,YACnB;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"421a194a894795caa98e9aaeb6be503f0178c030"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ra=function(){return s},s}Ra();class z7e extends In.Component{static defaultProps=(Ra().s[0]++,{errors:{},onFocus:()=>{Ra().f[0]++},onBlur:()=>{Ra().f[1]++}});constructor(e){Ra().f[2]++,Ra().s[1]++,super(e),Ra().s[2]++,this.state={jsonError:!1}}render(){Ra().f[3]++;const{t:e,value:t,canUndo:i}=(Ra().s[3]++,this.props),r=(Ra().s[4]++,i?(Ra().b[0][0]++,!i()):(Ra().b[0][1]++,!0)),o=(Ra().s[5]++,oe.jsxs(oe.Fragment,{children:[(Ra().b[1][0]++,this.props.onUndo&&(Ra().b[1][1]++,oe.jsx(Ks,{onClick:this.props.onUndo,disabled:r,className:"maputnik-delete-stop",title:e("Revert from expression"),children:oe.jsx(Mfe,{})},"undo_action"))),oe.jsx(Ks,{onClick:this.props.onDelete,className:"maputnik-delete-stop",title:e("Delete expression"),children:oe.jsx(jC,{})},"delete_action")]}));let s=(Ra().s[6]++,void 0);if(Ra().s[7]++,this.props.errors){Ra().b[2][0]++;const a=(Ra().s[8]++,this.props.fieldType?(Ra().b[3][0]++,this.props.fieldType+"."+this.props.fieldName):(Ra().b[3][1]++,this.props.fieldName));Ra().s[9]++,s=this.props.errors[a]}else Ra().b[2][1]++;return Ra().s[10]++,oe.jsx(cs,{fieldSpec:this.props.fieldSpec,label:e(iO(this.props.fieldName)),action:o,wideMode:!0,error:s,children:oe.jsx(tO,{lintType:"expression",spec:this.props.fieldSpec,className:"maputnik-expression-editor",onFocus:this.props.onFocus,onBlur:this.props.onBlur,value:t,onChange:this.props.onChange})})}}const ese=(Ra().s[11]++,Do()(z7e));function pn(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",e="e47fcaaf47a881c798f8d8c8b2982ffb5ed75681",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",statementMap:{0:{start:{line:18,column:17},end:{line:18,column:40}},1:{start:{line:19,column:2},end:{line:21,column:3}},2:{start:{line:20,column:4},end:{line:20,column:18}},3:{start:{line:22,column:20},end:{line:22,column:29}},4:{start:{line:23,column:16},end:{line:23,column:31}},5:{start:{line:24,column:2},end:{line:27,column:3}},6:{start:{line:25,column:4},end:{line:25,column:24}},7:{start:{line:26,column:4},end:{line:26,column:32}},8:{start:{line:28,column:2},end:{line:28,column:35}},9:{start:{line:31,column:2},end:{line:31,column:65}},10:{start:{line:34,column:2},end:{line:55,column:4}},11:{start:{line:57,column:19},end:{line:61,column:1}},12:{start:{line:63,column:2},end:{line:65,column:3}},13:{start:{line:64,column:4},end:{line:64,column:16}},14:{start:{line:66,column:21},end:{line:66,column:42}},15:{start:{line:67,column:2},end:{line:67,column:38}},16:{start:{line:70,column:2},end:{line:70,column:52}},17:{start:{line:73,column:2},end:{line:75,column:3}},18:{start:{line:74,column:4},end:{line:74,column:97}},19:{start:{line:74,column:38},end:{line:74,column:59}},20:{start:{line:74,column:75},end:{line:74,column:84}},21:{start:{line:76,column:2},end:{line:76,column:15}},22:{start:{line:79,column:24},end:{line:81,column:3}},23:{start:{line:83,column:4},end:{line:83,column:17}},24:{start:{line:84,column:4},end:{line:87,column:6}},25:{start:{line:91,column:22},end:{line:91,column:58}},26:{start:{line:92,column:4},end:{line:92,column:35}},27:{start:{line:93,column:4},end:{line:93,column:35}},28:{start:{line:96,column:22},end:{line:96,column:58}},29:{start:{line:97,column:4},end:{line:97,column:39}},30:{start:{line:98,column:4},end:{line:98,column:35}},31:{start:{line:100,column:18},end:{line:104,column:3}},32:{start:{line:101,column:26},end:{line:101,column:62}},33:{start:{line:102,column:4},end:{line:102,column:43}},34:{start:{line:103,column:4},end:{line:103,column:39}},35:{start:{line:105,column:16},end:{line:109,column:3}},36:{start:{line:106,column:4},end:{line:108,column:7}},37:{start:{line:110,column:15},end:{line:114,column:3}},38:{start:{line:111,column:4},end:{line:113,column:7}},39:{start:{line:115,column:19},end:{line:121,column:3}},40:{start:{line:116,column:19},end:{line:116,column:46}},41:{start:{line:117,column:4},end:{line:117,column:47}},42:{start:{line:118,column:4},end:{line:120,column:7}},43:{start:{line:123,column:32},end:{line:123,column:75}},44:{start:{line:124,column:4},end:{line:137,column:5}},45:{start:{line:125,column:6},end:{line:128,column:8}},46:{start:{line:129,column:11},end:{line:137,column:5}},47:{start:{line:130,column:6},end:{line:132,column:8}},48:{start:{line:134,column:6},end:{line:136,column:8}},49:{start:{line:140,column:26},end:{line:140,column:36}},50:{start:{line:141,column:36},end:{line:141,column:46}},51:{start:{line:142,column:22},end:{line:144,column:5}},52:{start:{line:145,column:26},end:{line:145,column:33}},53:{start:{line:146,column:36},end:{line:146,column:112}},54:{start:{line:147,column:4},end:{line:270,column:5}},55:{start:{line:148,column:6},end:{line:161,column:11}},56:{start:{line:162,column:11},end:{line:270,column:5}},57:{start:{line:163,column:21},end:{line:163,column:48}},58:{start:{line:164,column:26},end:{line:164,column:35}},59:{start:{line:165,column:22},end:{line:165,column:37}},60:{start:{line:166,column:38},end:{line:174,column:10}},61:{start:{line:175,column:27},end:{line:188,column:8}},62:{start:{line:176,column:22},end:{line:176,column:50}},63:{start:{line:177,column:8},end:{line:187,column:29}},64:{start:{line:189,column:6},end:{line:240,column:11}},65:{start:{line:200,column:33},end:{line:200,column:63}},66:{start:{line:242,column:25},end:{line:242,column:35}},67:{start:{line:243,column:6},end:{line:269,column:11}},68:{start:{line:248,column:14},end:{line:248,column:59}},69:{start:{line:249,column:14},end:{line:249,column:49}},70:{start:{line:273,column:21},end:{line:273,column:60}}},fnMap:{0:{name:"combiningFilter",decl:{start:{line:17,column:9},end:{line:17,column:24}},loc:{start:{line:17,column:32},end:{line:29,column:1}},line:17},1:{name:"migrateFilter",decl:{start:{line:30,column:9},end:{line:30,column:22}},loc:{start:{line:30,column:31},end:{line:32,column:1}},line:30},2:{name:"createStyleFromFilter",decl:{start:{line:33,column:9},end:{line:33,column:30}},loc:{start:{line:33,column:39},end:{line:56,column:1}},line:33},3:{name:"checkIfSimpleFilter",decl:{start:{line:62,column:9},end:{line:62,column:28}},loc:{start:{line:62,column:37},end:{line:68,column:1}},line:62},4:{name:"hasCombiningFilter",decl:{start:{line:69,column:9},end:{line:69,column:27}},loc:{start:{line:69,column:36},end:{line:71,column:1}},line:69},5:{name:"hasNestedCombiningFilter",decl:{start:{line:72,column:9},end:{line:72,column:33}},loc:{start:{line:72,column:42},end:{line:77,column:1}},line:72},6:{name:"(anonymous_6)",decl:{start:{line:74,column:31},end:{line:74,column:32}},loc:{start:{line:74,column:38},end:{line:74,column:59}},line:74},7:{name:"(anonymous_7)",decl:{start:{line:74,column:68},end:{line:74,column:69}},loc:{start:{line:74,column:75},end:{line:74,column:84}},line:74},8:{name:"(anonymous_8)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:21},end:{line:88,column:3}},line:82},9:{name:"(anonymous_9)",decl:{start:{line:90,column:2},end:{line:90,column:3}},loc:{start:{line:90,column:42},end:{line:94,column:3}},line:90},10:{name:"(anonymous_10)",decl:{start:{line:95,column:2},end:{line:95,column:3}},loc:{start:{line:95,column:30},end:{line:99,column:3}},line:95},11:{name:"(anonymous_11)",decl:{start:{line:100,column:18},end:{line:100,column:19}},loc:{start:{line:100,column:24},end:{line:104,column:3}},line:100},12:{name:"(anonymous_12)",decl:{start:{line:105,column:16},end:{line:105,column:17}},loc:{start:{line:105,column:25},end:{line:109,column:3}},line:105},13:{name:"(anonymous_13)",decl:{start:{line:110,column:15},end:{line:110,column:16}},loc:{start:{line:110,column:21},end:{line:114,column:3}},line:110},14:{name:"(anonymous_14)",decl:{start:{line:115,column:19},end:{line:115,column:20}},loc:{start:{line:115,column:25},end:{line:121,column:3}},line:115},15:{name:"(anonymous_15)",decl:{start:{line:122,column:2},end:{line:122,column:3}},loc:{start:{line:122,column:48},end:{line:138,column:3}},line:122},16:{name:"(anonymous_16)",decl:{start:{line:139,column:2},end:{line:139,column:3}},loc:{start:{line:139,column:11},end:{line:271,column:3}},line:139},17:{name:"(anonymous_17)",decl:{start:{line:175,column:39},end:{line:175,column:40}},loc:{start:{line:175,column:51},end:{line:188,column:7}},line:175},18:{name:"(anonymous_18)",decl:{start:{line:200,column:26},end:{line:200,column:27}},loc:{start:{line:200,column:33},end:{line:200,column:63}},line:200},19:{name:"(anonymous_19)",decl:{start:{line:247,column:22},end:{line:247,column:23}},loc:{start:{line:247,column:28},end:{line:250,column:13}},line:247}},branchMap:{0:{loc:{start:{line:18,column:17},end:{line:18,column:40}},type:"binary-expr",locations:[{start:{line:18,column:17},end:{line:18,column:29}},{start:{line:18,column:33},end:{line:18,column:40}}],line:18},1:{loc:{start:{line:19,column:2},end:{line:21,column:3}},type:"if",locations:[{start:{line:19,column:2},end:{line:21,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:24,column:2},end:{line:27,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:27,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:63,column:2},end:{line:65,column:3}},type:"if",locations:[{start:{line:63,column:2},end:{line:65,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},4:{loc:{start:{line:63,column:6},end:{line:63,column:59}},type:"binary-expr",locations:[{start:{line:63,column:6},end:{line:63,column:25}},{start:{line:63,column:29},end:{line:63,column:59}}],line:63},5:{loc:{start:{line:73,column:2},end:{line:75,column:3}},type:"if",locations:[{start:{line:73,column:2},end:{line:75,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:73},6:{loc:{start:{line:124,column:4},end:{line:137,column:5}},type:"if",locations:[{start:{line:124,column:4},end:{line:137,column:5}},{start:{line:129,column:11},end:{line:137,column:5}}],line:124},7:{loc:{start:{line:124,column:8},end:{line:124,column:66}},type:"binary-expr",locations:[{start:{line:124,column:8},end:{line:124,column:28}},{start:{line:124,column:32},end:{line:124,column:66}}],line:124},8:{loc:{start:{line:129,column:11},end:{line:137,column:5}},type:"if",locations:[{start:{line:129,column:11},end:{line:137,column:5}},{start:{line:133,column:11},end:{line:137,column:5}}],line:129},9:{loc:{start:{line:129,column:15},end:{line:129,column:73}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:34}},{start:{line:129,column:38},end:{line:129,column:73}}],line:129},10:{loc:{start:{line:146,column:36},end:{line:146,column:112}},type:"binary-expr",locations:[{start:{line:146,column:36},end:{line:146,column:55}},{start:{line:146,column:59},end:{line:146,column:112}}],line:146},11:{loc:{start:{line:147,column:4},end:{line:270,column:5}},type:"if",locations:[{start:{line:147,column:4},end:{line:270,column:5}},{start:{line:162,column:11},end:{line:270,column:5}}],line:147},12:{loc:{start:{line:162,column:11},end:{line:270,column:5}},type:"if",locations:[{start:{line:162,column:11},end:{line:270,column:5}},{start:{line:241,column:11},end:{line:270,column:5}}],line:162},13:{loc:{start:{line:186,column:10},end:{line:186,column:119}},type:"binary-expr",locations:[{start:{line:186,column:10},end:{line:186,column:15}},{start:{line:186,column:35},end:{line:186,column:119}}],line:186},14:{loc:{start:{line:235,column:30},end:{line:235,column:62}},type:"cond-expr",locations:[{start:{line:235,column:51},end:{line:235,column:53}},{start:{line:235,column:56},end:{line:235,column:62}}],line:235},15:{loc:{start:{line:257,column:8},end:{line:268,column:12}},type:"binary-expr",locations:[{start:{line:257,column:8},end:{line:257,column:38}},{start:{line:257,column:58},end:{line:268,column:12}}],line:257}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx"],names:[],mappings:"AAkMQ,SAkDA,UAlDA,KAGA,YAHA;AAlMR,OAAO,WAAW;AAClB,SAAS,sBAAsB;AAC/B,SAAS,sBAAsB;AAC/B,SAAQ,eAAc;AAEtB,SAAQ,SAAS,qBAAoB;AACrC,OAAO,YAAY;AAEnB,SAAQ,0BAAyB;AACjC,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,wBAAwB;AAC/B,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AACxB,OAAO,SAAS;AAChB,OAAO,wBAAwB;AAC/B,SAA+B,uBAAuB;AAItD,SAAS,gBAAgB,OAAuF;AAC9G,QAAM,SAAS,MAAM,UAAU,CAAC,KAAK;AAErC,MAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,WAAO;AAAA,EACT;AAEA,MAAI,cAAc,OAAO,CAAC;AAC1B,MAAI,UAAU,OAAO,MAAM,CAAC;AAE5B,MAAG,mBAAmB,QAAQ,WAAW,IAAI,GAAG;AAC9C,kBAAc;AACd,cAAU,CAAC,OAAO,MAAM,CAAC,CAAC;AAAA,EAC5B;AAEA,SAAO,CAAC,aAAa,GAAG,OAAO;AACjC;AAEA,SAAS,cAAc,QAA6D;AAElF,SAAQ,QAAQ,sBAAsB,MAAM,CAAQ,EAAE,OAAO,CAAC,EAAU;AAC1E;AAEA,SAAS,sBAAsB,QAAuF;AACpH,SAAO;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,YAAY,EAAC,qBAAqB,SAAQ;AAAA,IAC1C,WAAW;AAAA,MACT,OAAO;AAAA,QACL,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,IACA,UAAU;AAAA,IACV,UAAU;AAAA,IACV,UAAU;AAAA,MACR;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,QAAQ;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AACF;AAGA,SAAS,oBAAqB,QAA6D;AACzF,MAAI,OAAO,WAAW,KAAK,WAAW,SAAS,OAAO,CAAC,CAAC,GAAG;AACzD,WAAO;AAAA,EACT;AACA,QAAM,aAAa,cAAc,MAAM;AACvC,SAAO,CAAC,QAAQ,YAAY,MAAM;AACpC;AAEA,SAAS,mBAAmB,QAA6D;AACvF,SAAO,mBAAmB,QAAQ,OAAO,CAAC,CAAC,KAAK;AAClD;AAEA,SAAS,yBAAyB,QAA6D;AAC7F,MAAG,mBAAmB,MAAM,GAAG;AAC7B,WAAO,OAAO,MAAM,CAAC,EAAE,IAAI,OAAK,mBAAmB,CAAQ,CAAC,EAAE,OAAO,OAAK,KAAK,IAAI,EAAE,SAAS;AAAA,EAChG;AACA,SAAO;AACT;AAgBA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC,KAAK;AAAA,EAChB;AAAA,EAEA,YAAa,OAAkC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,qBAAqB,oBAAoB,gBAAgB,KAAK,CAAC;AAAA,IACjE;AAAA,EACF;AAAA;AAAA,EAGA,oBAAoB,WAAmB,SAAgB;AACrD,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,SAAS,IAAI;AACvB,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,iBAAiB,WAAmB;AAClC,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,OAAO,YAAY,GAAG,CAAC;AACjC,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,gBAAgB,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACzD,IAAC,cAAwB,KAAK,CAAC,MAAM,QAAQ,EAAE,CAAC;AAChD,SAAK,MAAM,SAAS,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,SAAK,MAAM,SAAS,cAAc,MAAM,CAAC;AACzC,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,sBAAsB,oBAAoB,gBAAgB,KAAK,CAAC;AAGtE,QAAI,CAAC,uBAAuB,MAAM,wBAAwB,MAAM;AAC9D,aAAO;AAAA,QACL,qBAAqB;AAAA,QACrB,qBAAqB;AAAA,MACvB;AAAA,IACF,WACS,uBAAuB,MAAM,wBAAwB,OAAO;AACnE,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF,OACK;AACH,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,EAAC,IAAI,KAAK;AACzB,UAAM,EAAC,oBAAmB,IAAI,KAAK;AACnC,UAAM,YAAU;AAAA,MACd,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,IACjC;AACA,UAAM,gBAAgB,CAAC,KAAK;AAE5B,UAAM,0BAA0B,uBAAuB,yBAAyB,gBAAgB,KAAK,KAAK,CAAC;AAE3G,QAAI,yBAAyB;AAC3B,aAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,4BAAC,OACE,YAAE,mCAAmC,GACxC;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,KAAK;AAAA,YACd,OAAO,EAAE,uBAAuB;AAAA,YAEhC;AAAA,kCAAC,kBAAe;AAAA,cACf,EAAE,uBAAuB;AAAA;AAAA;AAAA,QAC5B;AAAA,SACF;AAAA,IACF,WACS,qBAAqB;AAC5B,YAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,YAAM,cAAc,OAAO,CAAC;AAC5B,YAAM,UAAU,OAAO,MAAM,CAAC;AAE9B,YAAM,UACJ,oBAAC,SACC;AAAA,QAAC;AAAA;AAAA,UACC,SAAS,KAAK;AAAA,UACd,OAAO,EAAE,uBAAuB;AAAA,UAChC,WAAU;AAAA,UAEV,8BAAC,kBAAe;AAAA;AAAA,MAClB,GACF;AAGF,YAAM,eAAe,QAAQ,IAAI,CAAC,GAAG,QAAQ;AAC3C,cAAM,QAAQ,OAAQ,UAAU,MAAI,CAAC,GAAG;AAExC,eACE,qBAAC,SACC;AAAA,8BAAC,qBAA4B,UAAU,KAAK,iBAAiB,KAAK,MAAM,GAAG,GACzE;AAAA,YAAC;AAAA;AAAA,cACC,YAAY,KAAK,MAAM;AAAA,cACvB,QAAQ;AAAA,cACR,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM,CAAC;AAAA;AAAA,UACvD,KALsB,GAMxB;AAAA,UACC,SACC,oBAAC,SAAgB,WAAU,yBAAyB,gBAAM,WAAjD,OAAyD;AAAA,aAT5D,SAAS,GAAG,EAWtB;AAAA,MAEJ,CAAC;AAGD,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YAEC;AAAA,YACA,OAAO,EAAE,QAAQ;AAAA,YACjB,QAAQ;AAAA,YAER;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,MAAqB,KAAK,oBAAoB,GAAG,CAAC;AAAA,gBAC7D,SAAS;AAAA,kBACP,CAAC,OAAO,EAAE,sBAAsB,CAAC;AAAA,kBACjC,CAAC,QAAQ,EAAE,mBAAmB,CAAC;AAAA,kBAC/B,CAAC,OAAO,EAAE,oBAAoB,CAAC;AAAA,gBACjC;AAAA;AAAA,YACF;AAAA;AAAA,UAbI;AAAA,QAcN;AAAA,QACC;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YAEV;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBAEd;AAAA,sCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,kBACxD,EAAE,YAAY;AAAA;AAAA;AAAA,YACjB;AAAA;AAAA,UAVI;AAAA,QAWN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,YAEjD,8BAAC,OAAI,WAAsB;AAAA;AAAA,UAJvB;AAAA,QAKN;AAAA,SACF;AAAA,IAEJ,OACK;AACH,YAAM,EAAC,OAAM,IAAI,KAAK;AAEtB,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,UAAU,MAAM;AACd,mBAAK,SAAS,EAAC,qBAAqB,KAAI,CAAC;AACzC,mBAAK,MAAM,SAAS,aAAa;AAAA,YACnC;AAAA,YACA,WAAU;AAAA,YACV,OAAO;AAAA,YACP;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA,QACC,KAAK,MAAM,uBACV,qBAAC,SAAI,WAAU,yBACZ;AAAA,YAAE,qCAAqC;AAAA,UACvC;AAAA,UACD;AAAA,YAAC;AAAA;AAAA,cACC,SAAS,KAAK;AAAA,cACd,WAAU;AAAA,cAET,YAAE,0BAA0B;AAAA;AAAA,UAC/B;AAAA,WACF;AAAA,SAEJ;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e47fcaaf47a881c798f8d8c8b2982ffb5ed75681"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return pn=function(){return s},s}pn();function ev(n){pn().f[0]++;const e=(pn().s[0]++,pn().b[0][0]++,n.filter||(pn().b[0][1]++,["all"]));if(pn().s[1]++,Array.isArray(e))pn().b[1][1]++;else return pn().b[1][0]++,pn().s[2]++,e;let t=(pn().s[3]++,e[0]),i=(pn().s[4]++,e.slice(1));return pn().s[5]++,jK.indexOf(t)<0?(pn().b[2][0]++,pn().s[6]++,t="all",pn().s[7]++,i=[e.slice(0)]):pn().b[2][1]++,pn().s[8]++,[t,...i]}function j7e(n){return pn().f[1]++,pn().s[9]++,Yhe(N7e(n)).layers[0].filter}function N7e(n){return pn().f[2]++,pn().s[10]++,{id:"tmp",version:8,name:"Empty Style",metadata:{"maputnik:renderer":"mlgljs"},sources:{tmp:{type:"geojson",data:""}},sprite:"",glyphs:"https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",layers:[{id:"tmp",type:"fill",source:"tmp",filter:n}]}}const G7e=(pn().s[11]++,["all","any","none"]);function Cq(n){if(pn().f[3]++,pn().s[12]++,pn().b[4][0]++,n.length===1&&(pn().b[4][1]++,G7e.includes(n[0])))return pn().b[3][0]++,pn().s[13]++,!0;pn().b[3][1]++;const e=(pn().s[14]++,f4(n));return pn().s[15]++,!$5.isEqual(e,n)}function _q(n){return pn().f[4]++,pn().s[16]++,jK.indexOf(n[0])>=0}function W7e(n){return pn().f[5]++,pn().s[17]++,_q(n)?(pn().b[5][0]++,pn().s[18]++,n.slice(1).map(e=>(pn().f[6]++,pn().s[19]++,_q(e))).filter(e=>(pn().f[7]++,pn().s[20]++,e==!0)).length>0):(pn().b[5][1]++,pn().s[21]++,!1)}class Q7e extends In.Component{static defaultProps=(pn().s[22]++,{filter:["all"]});constructor(e){pn().f[8]++,pn().s[23]++,super(e),pn().s[24]++,this.state={showDoc:!1,displaySimpleFilter:Cq(ev(e))}}onFilterPartChanged(e,t){pn().f[9]++;const i=(pn().s[25]++,ev(this.props).slice(0));pn().s[26]++,i[e]=t,pn().s[27]++,this.props.onChange(i)}deleteFilterItem(e){pn().f[10]++;const t=(pn().s[28]++,ev(this.props).slice(0));pn().s[29]++,t.splice(e+1,1),pn().s[30]++,this.props.onChange(t)}addFilterItem=(pn().s[31]++,()=>{pn().f[11]++;const e=(pn().s[32]++,ev(this.props).slice(0));pn().s[33]++,e.push(["==","name",""]),pn().s[34]++,this.props.onChange(e)});onToggleDoc=(pn().s[35]++,e=>{pn().f[12]++,pn().s[36]++,this.setState({showDoc:e})});makeFilter=(pn().s[37]++,()=>{pn().f[13]++,pn().s[38]++,this.setState({displaySimpleFilter:!0})});makeExpression=(pn().s[39]++,()=>{pn().f[14]++;const e=(pn().s[40]++,ev(this.props));pn().s[41]++,this.props.onChange(j7e(e)),pn().s[42]++,this.setState({displaySimpleFilter:!1})});static getDerivedStateFromProps(e,t){pn().f[15]++;const i=(pn().s[43]++,Cq(ev(e)));return pn().s[44]++,pn().b[7][0]++,!i&&(pn().b[7][1]++,t.displaySimpleFilter===!0)?(pn().b[6][0]++,pn().s[45]++,{displaySimpleFilter:!1,valueIsSimpleFilter:!1}):(pn().b[6][1]++,pn().s[46]++,pn().b[9][0]++,i&&(pn().b[9][1]++,t.displaySimpleFilter===!1)?(pn().b[8][0]++,pn().s[47]++,{valueIsSimpleFilter:!0}):(pn().b[8][1]++,pn().s[48]++,{valueIsSimpleFilter:!1}))}render(){pn().f[16]++;const{errors:e,t}=(pn().s[49]++,this.props),{displaySimpleFilter:i}=(pn().s[50]++,this.state),r=(pn().s[51]++,{doc:Wr.layer.filter.doc+" Combine multiple filters together by using a compound filter."}),o=(pn().s[52]++,["all"]),s=(pn().s[53]++,pn().b[10][0]++,i&&(pn().b[10][1]++,W7e(ev(this.props))));if(pn().s[54]++,s)return pn().b[11][0]++,pn().s[55]++,oe.jsxs("div",{className:"maputnik-filter-editor-unsupported",children:[oe.jsx("p",{children:t("Nested filters are not supported.")}),oe.jsxs(Ks,{onClick:this.makeExpression,title:t("Convert to expression"),children:[oe.jsx(U5,{}),t("Upgrade to expression")]})]});if(pn().b[11][1]++,pn().s[56]++,i){pn().b[12][0]++;const a=(pn().s[57]++,ev(this.props)),c=(pn().s[58]++,a[0]),d=(pn().s[59]++,a.slice(1)),m=(pn().s[60]++,oe.jsx("div",{children:oe.jsx(Ks,{onClick:this.makeExpression,title:t("Convert to expression"),className:"maputnik-make-zoom-function",children:oe.jsx(U5,{})})})),v=(pn().s[61]++,d.map((M,B)=>{pn().f[17]++;const P=(pn().s[62]++,e[`filter[${B+1}]`]);return pn().s[63]++,oe.jsxs("div",{children:[oe.jsx(U7e,{onDelete:this.deleteFilterItem.bind(this,B),children:oe.jsx(P7e,{properties:this.props.properties,filter:M,onChange:this.onFilterPartChanged.bind(this,B+1)})},B),(pn().b[13][0]++,P&&(pn().b[13][1]++,oe.jsx("div",{className:"maputnik-inline-error",children:P.message},"error")))]},`block-${B}`)}));return pn().s[64]++,oe.jsxs(oe.Fragment,{children:[oe.jsx(cs,{fieldSpec:r,label:t("Filter"),action:m,children:oe.jsx(HC,{value:c,onChange:M=>(pn().f[18]++,pn().s[65]++,this.onFilterPartChanged(0,M)),options:[["all",t("every filter matches")],["none",t("no filter matches")],["any",t("any filter matches")]]})},"top"),v,oe.jsx("div",{className:"maputnik-filter-editor-add-wrapper",children:oe.jsxs(Ks,{"data-wd-key":"layer-filter-button",className:"maputnik-add-filter",onClick:this.addFilterItem,children:[oe.jsx(nO,{style:{verticalAlign:"text-bottom"}}),t("Add filter")]})},"buttons"),oe.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(pn().b[14][0]++,""):(pn().b[14][1]++,"none")},children:oe.jsx(qB,{fieldSpec:r})},"doc")]})}else{pn().b[12][1]++;const{filter:a}=(pn().s[66]++,this.props);return pn().s[67]++,oe.jsxs(oe.Fragment,{children:[oe.jsx(ese,{onDelete:()=>{pn().f[19]++,pn().s[68]++,this.setState({displaySimpleFilter:!0}),pn().s[69]++,this.props.onChange(o)},fieldName:"filter",value:a,errors:e,onChange:this.props.onChange}),(pn().b[15][0]++,this.state.valueIsSimpleFilter&&(pn().b[15][1]++,oe.jsxs("div",{className:"maputnik-expr-infobox",children:[t("You've entered an old style filter.")," ",oe.jsx("button",{onClick:this.makeFilter,className:"maputnik-expr-infobox__button",children:t("Switch to filter editor.")})]})))]})}}}const q7e=(pn().s[70]++,Do()(Q7e));var Y_={},md={},V_={},aT,xq;function tse(){if(xq)return aT;xq=1;var n=typeof window=="object"&&window&&window.Object===Object&&window;return aT=n,aT}var lT,Mq;function Ym(){if(Mq)return lT;Mq=1;var n=tse(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return lT=t,lT}var uT,wq;function PM(){if(wq)return uT;wq=1;var n=Ym(),e=n.Symbol;return uT=e,uT}var cT,Sq;function Y7e(){if(Sq)return cT;Sq=1;var n=PM(),e=Object.prototype,t=e.hasOwnProperty,i=e.toString,r=n?n.toStringTag:void 0;function o(s){var a=t.call(s,r),c=s[r];try{s[r]=void 0;var d=!0}catch{}var m=i.call(s);return d&&(a?s[r]=c:delete s[r]),m}return cT=o,cT}var AT,Eq;function V7e(){if(Eq)return AT;Eq=1;var n=Object.prototype,e=n.toString;function t(i){return e.call(i)}return AT=t,AT}var hT,Bq;function ZC(){if(Bq)return hT;Bq=1;var n=PM(),e=Y7e(),t=V7e(),i="[object Null]",r="[object Undefined]",o=n?n.toStringTag:void 0;function s(a){return a==null?a===void 0?r:i:o&&o in Object(a)?e(a):t(a)}return hT=s,hT}var dT,Oq;function wf(){if(Oq)return dT;Oq=1;var n=Array.isArray;return dT=n,dT}var fT,Iq;function Tg(){if(Iq)return fT;Iq=1;function n(e){return e!=null&&typeof e=="object"}return fT=n,fT}var pT,Tq;function $7e(){if(Tq)return pT;Tq=1;var n=ZC(),e=wf(),t=Tg(),i="[object String]";function r(o){return typeof o=="string"||!e(o)&&t(o)&&n(o)==i}return pT=r,pT}var mT,kq;function H7e(){if(kq)return mT;kq=1;function n(e){return function(t,i,r){for(var o=-1,s=Object(t),a=r(t),c=a.length;c--;){var d=a[e?c:++o];if(i(s[d],d,s)===!1)break}return t}}return mT=n,mT}var gT,Dq;function nse(){if(Dq)return gT;Dq=1;var n=H7e(),e=n();return gT=e,gT}var yT,Rq;function Z7e(){if(Rq)return yT;Rq=1;function n(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}return yT=n,yT}var vT,Pq;function X7e(){if(Pq)return vT;Pq=1;var n=ZC(),e=Tg(),t="[object Arguments]";function i(r){return e(r)&&n(r)==t}return vT=i,vT}var bT,Lq;function GK(){if(Lq)return bT;Lq=1;var n=X7e(),e=Tg(),t=Object.prototype,i=t.hasOwnProperty,r=t.propertyIsEnumerable,o=n((function(){return arguments})())?n:function(s){return e(s)&&i.call(s,"callee")&&!r.call(s,"callee")};return bT=o,bT}var r4={exports:{}},CT,Uq;function J7e(){if(Uq)return CT;Uq=1;function n(){return!1}return CT=n,CT}r4.exports;var Kq;function rO(){return Kq||(Kq=1,(function(n,e){var t=Ym(),i=J7e(),r=e&&!e.nodeType&&e,o=r&&!0&&n&&!n.nodeType&&n,s=o&&o.exports===r,a=s?t.Buffer:void 0,c=a?a.isBuffer:void 0,d=c||i;n.exports=d})(r4,r4.exports)),r4.exports}var _T,Fq;function WK(){if(Fq)return _T;Fq=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(i,r){var o=typeof i;return r=r??n,!!r&&(o=="number"||o!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<r}return _T=t,_T}var xT,zq;function QK(){if(zq)return xT;zq=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return xT=e,xT}var MT,jq;function eke(){if(jq)return MT;jq=1;var n=ZC(),e=QK(),t=Tg(),i="[object Arguments]",r="[object Array]",o="[object Boolean]",s="[object Date]",a="[object Error]",c="[object Function]",d="[object Map]",m="[object Number]",v="[object Object]",M="[object RegExp]",B="[object Set]",P="[object String]",U="[object WeakMap]",z="[object ArrayBuffer]",V="[object DataView]",Z="[object Float32Array]",X="[object Float64Array]",re="[object Int8Array]",ie="[object Int16Array]",te="[object Int32Array]",q="[object Uint8Array]",le="[object Uint8ClampedArray]",ce="[object Uint16Array]",ve="[object Uint32Array]",ge={};ge[Z]=ge[X]=ge[re]=ge[ie]=ge[te]=ge[q]=ge[le]=ge[ce]=ge[ve]=!0,ge[i]=ge[r]=ge[z]=ge[o]=ge[V]=ge[s]=ge[a]=ge[c]=ge[d]=ge[m]=ge[v]=ge[M]=ge[B]=ge[P]=ge[U]=!1;function Ee(xe){return t(xe)&&e(xe.length)&&!!ge[n(xe)]}return MT=Ee,MT}var wT,Nq;function qK(){if(Nq)return wT;Nq=1;function n(e){return function(t){return e(t)}}return wT=n,wT}var o4={exports:{}};o4.exports;var Gq;function YK(){return Gq||(Gq=1,(function(n,e){var t=tse(),i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,o=r&&r.exports===i,s=o&&t.process,a=(function(){try{var c=r&&r.require&&r.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}})();n.exports=a})(o4,o4.exports)),o4.exports}var ST,Wq;function VK(){if(Wq)return ST;Wq=1;var n=eke(),e=qK(),t=YK(),i=t&&t.isTypedArray,r=i?e(i):n;return ST=r,ST}var ET,Qq;function ise(){if(Qq)return ET;Qq=1;var n=Z7e(),e=GK(),t=wf(),i=rO(),r=WK(),o=VK(),s=Object.prototype,a=s.hasOwnProperty;function c(d,m){var v=t(d),M=!v&&e(d),B=!v&&!M&&i(d),P=!v&&!M&&!B&&o(d),U=v||M||B||P,z=U?n(d.length,String):[],V=z.length;for(var Z in d)(m||a.call(d,Z))&&!(U&&(Z=="length"||B&&(Z=="offset"||Z=="parent")||P&&(Z=="buffer"||Z=="byteLength"||Z=="byteOffset")||r(Z,V)))&&z.push(Z);return z}return ET=c,ET}var BT,qq;function $K(){if(qq)return BT;qq=1;var n=Object.prototype;function e(t){var i=t&&t.constructor,r=typeof i=="function"&&i.prototype||n;return t===r}return BT=e,BT}var OT,Yq;function rse(){if(Yq)return OT;Yq=1;function n(e,t){return function(i){return e(t(i))}}return OT=n,OT}var IT,Vq;function tke(){if(Vq)return IT;Vq=1;var n=rse(),e=n(Object.keys,Object);return IT=e,IT}var TT,$q;function nke(){if($q)return TT;$q=1;var n=$K(),e=tke(),t=Object.prototype,i=t.hasOwnProperty;function r(o){if(!n(o))return e(o);var s=[];for(var a in Object(o))i.call(o,a)&&a!="constructor"&&s.push(a);return s}return TT=r,TT}var kT,Hq;function Op(){if(Hq)return kT;Hq=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return kT=n,kT}var DT,Zq;function HK(){if(Zq)return DT;Zq=1;var n=ZC(),e=Op(),t="[object AsyncFunction]",i="[object Function]",r="[object GeneratorFunction]",o="[object Proxy]";function s(a){if(!e(a))return!1;var c=n(a);return c==i||c==r||c==t||c==o}return DT=s,DT}var RT,Xq;function V2(){if(Xq)return RT;Xq=1;var n=HK(),e=QK();function t(i){return i!=null&&e(i.length)&&!n(i)}return RT=t,RT}var PT,Jq;function LM(){if(Jq)return PT;Jq=1;var n=ise(),e=nke(),t=V2();function i(r){return t(r)?n(r):e(r)}return PT=i,PT}var LT,eY;function ose(){if(eY)return LT;eY=1;var n=nse(),e=LM();function t(i,r){return i&&n(i,r,e)}return LT=t,LT}var UT,tY;function oO(){if(tY)return UT;tY=1;function n(e){return e}return UT=n,UT}var KT,nY;function sse(){if(nY)return KT;nY=1;var n=oO();function e(t){return typeof t=="function"?t:n}return KT=e,KT}var FT,iY;function ZK(){if(iY)return FT;iY=1;var n=ose(),e=sse();function t(i,r){return i&&n(i,e(r))}return FT=t,FT}var zT,rY;function XK(){if(rY)return zT;rY=1;var n=rse(),e=n(Object.getPrototypeOf,Object);return zT=e,zT}var jT,oY;function ase(){if(oY)return jT;oY=1;var n=ZC(),e=XK(),t=Tg(),i="[object Object]",r=Function.prototype,o=Object.prototype,s=r.toString,a=o.hasOwnProperty,c=s.call(Object);function d(m){if(!t(m)||n(m)!=i)return!1;var v=e(m);if(v===null)return!0;var M=a.call(v,"constructor")&&v.constructor;return typeof M=="function"&&M instanceof M&&s.call(M)==c}return jT=d,jT}var NT,sY;function lse(){if(sY)return NT;sY=1;function n(e,t){for(var i=-1,r=e==null?0:e.length,o=Array(r);++i<r;)o[i]=t(e[i],i,e);return o}return NT=n,NT}var GT,aY;function ike(){if(aY)return GT;aY=1;function n(){this.__data__=[],this.size=0}return GT=n,GT}var WT,lY;function UM(){if(lY)return WT;lY=1;function n(e,t){return e===t||e!==e&&t!==t}return WT=n,WT}var QT,uY;function sO(){if(uY)return QT;uY=1;var n=UM();function e(t,i){for(var r=t.length;r--;)if(n(t[r][0],i))return r;return-1}return QT=e,QT}var qT,cY;function rke(){if(cY)return qT;cY=1;var n=sO(),e=Array.prototype,t=e.splice;function i(r){var o=this.__data__,s=n(o,r);if(s<0)return!1;var a=o.length-1;return s==a?o.pop():t.call(o,s,1),--this.size,!0}return qT=i,qT}var YT,AY;function oke(){if(AY)return YT;AY=1;var n=sO();function e(t){var i=this.__data__,r=n(i,t);return r<0?void 0:i[r][1]}return YT=e,YT}var VT,hY;function ske(){if(hY)return VT;hY=1;var n=sO();function e(t){return n(this.__data__,t)>-1}return VT=e,VT}var $T,dY;function ake(){if(dY)return $T;dY=1;var n=sO();function e(t,i){var r=this.__data__,o=n(r,t);return o<0?(++this.size,r.push([t,i])):r[o][1]=i,this}return $T=e,$T}var HT,fY;function aO(){if(fY)return HT;fY=1;var n=ike(),e=rke(),t=oke(),i=ske(),r=ake();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var d=s[a];this.set(d[0],d[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,HT=o,HT}var ZT,pY;function lke(){if(pY)return ZT;pY=1;var n=aO();function e(){this.__data__=new n,this.size=0}return ZT=e,ZT}var XT,mY;function uke(){if(mY)return XT;mY=1;function n(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}return XT=n,XT}var JT,gY;function cke(){if(gY)return JT;gY=1;function n(e){return this.__data__.get(e)}return JT=n,JT}var e7,yY;function Ake(){if(yY)return e7;yY=1;function n(e){return this.__data__.has(e)}return e7=n,e7}var t7,vY;function hke(){if(vY)return t7;vY=1;var n=Ym(),e=n["__core-js_shared__"];return t7=e,t7}var n7,bY;function dke(){if(bY)return n7;bY=1;var n=hke(),e=(function(){var i=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function t(i){return!!e&&e in i}return n7=t,n7}var i7,CY;function use(){if(CY)return i7;CY=1;var n=Function.prototype,e=n.toString;function t(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return i7=t,i7}var r7,_Y;function fke(){if(_Y)return r7;_Y=1;var n=HK(),e=dke(),t=Op(),i=use(),r=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,s=Function.prototype,a=Object.prototype,c=s.toString,d=a.hasOwnProperty,m=RegExp("^"+c.call(d).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function v(M){if(!t(M)||e(M))return!1;var B=n(M)?m:o;return B.test(i(M))}return r7=v,r7}var o7,xY;function pke(){if(xY)return o7;xY=1;function n(e,t){return e?.[t]}return o7=n,o7}var s7,MY;function XC(){if(MY)return s7;MY=1;var n=fke(),e=pke();function t(i,r){var o=e(i,r);return n(o)?o:void 0}return s7=t,s7}var a7,wY;function JK(){if(wY)return a7;wY=1;var n=XC(),e=Ym(),t=n(e,"Map");return a7=t,a7}var l7,SY;function lO(){if(SY)return l7;SY=1;var n=XC(),e=n(Object,"create");return l7=e,l7}var u7,EY;function mke(){if(EY)return u7;EY=1;var n=lO();function e(){this.__data__=n?n(null):{},this.size=0}return u7=e,u7}var c7,BY;function gke(){if(BY)return c7;BY=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return c7=n,c7}var A7,OY;function yke(){if(OY)return A7;OY=1;var n=lO(),e="__lodash_hash_undefined__",t=Object.prototype,i=t.hasOwnProperty;function r(o){var s=this.__data__;if(n){var a=s[o];return a===e?void 0:a}return i.call(s,o)?s[o]:void 0}return A7=r,A7}var h7,IY;function vke(){if(IY)return h7;IY=1;var n=lO(),e=Object.prototype,t=e.hasOwnProperty;function i(r){var o=this.__data__;return n?o[r]!==void 0:t.call(o,r)}return h7=i,h7}var d7,TY;function bke(){if(TY)return d7;TY=1;var n=lO(),e="__lodash_hash_undefined__";function t(i,r){var o=this.__data__;return this.size+=this.has(i)?0:1,o[i]=n&&r===void 0?e:r,this}return d7=t,d7}var f7,kY;function Cke(){if(kY)return f7;kY=1;var n=mke(),e=gke(),t=yke(),i=vke(),r=bke();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var d=s[a];this.set(d[0],d[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,f7=o,f7}var p7,DY;function _ke(){if(DY)return p7;DY=1;var n=Cke(),e=aO(),t=JK();function i(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return p7=i,p7}var m7,RY;function xke(){if(RY)return m7;RY=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return m7=n,m7}var g7,PY;function uO(){if(PY)return g7;PY=1;var n=xke();function e(t,i){var r=t.__data__;return n(i)?r[typeof i=="string"?"string":"hash"]:r.map}return g7=e,g7}var y7,LY;function Mke(){if(LY)return y7;LY=1;var n=uO();function e(t){var i=n(this,t).delete(t);return this.size-=i?1:0,i}return y7=e,y7}var v7,UY;function wke(){if(UY)return v7;UY=1;var n=uO();function e(t){return n(this,t).get(t)}return v7=e,v7}var b7,KY;function Ske(){if(KY)return b7;KY=1;var n=uO();function e(t){return n(this,t).has(t)}return b7=e,b7}var C7,FY;function Eke(){if(FY)return C7;FY=1;var n=uO();function e(t,i){var r=n(this,t),o=r.size;return r.set(t,i),this.size+=r.size==o?0:1,this}return C7=e,C7}var _7,zY;function eF(){if(zY)return _7;zY=1;var n=_ke(),e=Mke(),t=wke(),i=Ske(),r=Eke();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var d=s[a];this.set(d[0],d[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,_7=o,_7}var x7,jY;function Bke(){if(jY)return x7;jY=1;var n=aO(),e=JK(),t=eF(),i=200;function r(o,s){var a=this.__data__;if(a instanceof n){var c=a.__data__;if(!e||c.length<i-1)return c.push([o,s]),this.size=++a.size,this;a=this.__data__=new t(c)}return a.set(o,s),this.size=a.size,this}return x7=r,x7}var M7,NY;function cO(){if(NY)return M7;NY=1;var n=aO(),e=lke(),t=uke(),i=cke(),r=Ake(),o=Bke();function s(a){var c=this.__data__=new n(a);this.size=c.size}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=i,s.prototype.has=r,s.prototype.set=o,M7=s,M7}var w7,GY;function Oke(){if(GY)return w7;GY=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return w7=e,w7}var S7,WY;function Ike(){if(WY)return S7;WY=1;function n(e){return this.__data__.has(e)}return S7=n,S7}var E7,QY;function Tke(){if(QY)return E7;QY=1;var n=eF(),e=Oke(),t=Ike();function i(r){var o=-1,s=r==null?0:r.length;for(this.__data__=new n;++o<s;)this.add(r[o])}return i.prototype.add=i.prototype.push=e,i.prototype.has=t,E7=i,E7}var B7,qY;function kke(){if(qY)return B7;qY=1;function n(e,t){for(var i=-1,r=e==null?0:e.length;++i<r;)if(t(e[i],i,e))return!0;return!1}return B7=n,B7}var O7,YY;function Dke(){if(YY)return O7;YY=1;function n(e,t){return e.has(t)}return O7=n,O7}var I7,VY;function cse(){if(VY)return I7;VY=1;var n=Tke(),e=kke(),t=Dke(),i=1,r=2;function o(s,a,c,d,m,v){var M=c&i,B=s.length,P=a.length;if(B!=P&&!(M&&P>B))return!1;var U=v.get(s),z=v.get(a);if(U&&z)return U==a&&z==s;var V=-1,Z=!0,X=c&r?new n:void 0;for(v.set(s,a),v.set(a,s);++V<B;){var re=s[V],ie=a[V];if(d)var te=M?d(ie,re,V,a,s,v):d(re,ie,V,s,a,v);if(te!==void 0){if(te)continue;Z=!1;break}if(X){if(!e(a,function(q,le){if(!t(X,le)&&(re===q||m(re,q,c,d,v)))return X.push(le)})){Z=!1;break}}else if(!(re===ie||m(re,ie,c,d,v))){Z=!1;break}}return v.delete(s),v.delete(a),Z}return I7=o,I7}var T7,$Y;function Ase(){if($Y)return T7;$Y=1;var n=Ym(),e=n.Uint8Array;return T7=e,T7}var k7,HY;function Rke(){if(HY)return k7;HY=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(r,o){i[++t]=[o,r]}),i}return k7=n,k7}var D7,ZY;function Pke(){if(ZY)return D7;ZY=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(r){i[++t]=r}),i}return D7=n,D7}var R7,XY;function Lke(){if(XY)return R7;XY=1;var n=PM(),e=Ase(),t=UM(),i=cse(),r=Rke(),o=Pke(),s=1,a=2,c="[object Boolean]",d="[object Date]",m="[object Error]",v="[object Map]",M="[object Number]",B="[object RegExp]",P="[object Set]",U="[object String]",z="[object Symbol]",V="[object ArrayBuffer]",Z="[object DataView]",X=n?n.prototype:void 0,re=X?X.valueOf:void 0;function ie(te,q,le,ce,ve,ge,Ee){switch(le){case Z:if(te.byteLength!=q.byteLength||te.byteOffset!=q.byteOffset)return!1;te=te.buffer,q=q.buffer;case V:return!(te.byteLength!=q.byteLength||!ge(new e(te),new e(q)));case c:case d:case M:return t(+te,+q);case m:return te.name==q.name&&te.message==q.message;case B:case U:return te==q+"";case v:var xe=r;case P:var Te=ce&s;if(xe||(xe=o),te.size!=q.size&&!Te)return!1;var Fe=Ee.get(te);if(Fe)return Fe==q;ce|=a,Ee.set(te,q);var Ie=i(xe(te),xe(q),ce,ve,ge,Ee);return Ee.delete(te),Ie;case z:if(re)return re.call(te)==re.call(q)}return!1}return R7=ie,R7}var P7,JY;function hse(){if(JY)return P7;JY=1;function n(e,t){for(var i=-1,r=t.length,o=e.length;++i<r;)e[o+i]=t[i];return e}return P7=n,P7}var L7,eV;function dse(){if(eV)return L7;eV=1;var n=hse(),e=wf();function t(i,r,o){var s=r(i);return e(i)?s:n(s,o(i))}return L7=t,L7}var U7,tV;function Uke(){if(tV)return U7;tV=1;function n(e,t){for(var i=-1,r=e==null?0:e.length,o=0,s=[];++i<r;){var a=e[i];t(a,i,e)&&(s[o++]=a)}return s}return U7=n,U7}var K7,nV;function fse(){if(nV)return K7;nV=1;function n(){return[]}return K7=n,K7}var F7,iV;function tF(){if(iV)return F7;iV=1;var n=Uke(),e=fse(),t=Object.prototype,i=t.propertyIsEnumerable,r=Object.getOwnPropertySymbols,o=r?function(s){return s==null?[]:(s=Object(s),n(r(s),function(a){return i.call(s,a)}))}:e;return F7=o,F7}var z7,rV;function pse(){if(rV)return z7;rV=1;var n=dse(),e=tF(),t=LM();function i(r){return n(r,t,e)}return z7=i,z7}var j7,oV;function Kke(){if(oV)return j7;oV=1;var n=pse(),e=1,t=Object.prototype,i=t.hasOwnProperty;function r(o,s,a,c,d,m){var v=a&e,M=n(o),B=M.length,P=n(s),U=P.length;if(B!=U&&!v)return!1;for(var z=B;z--;){var V=M[z];if(!(v?V in s:i.call(s,V)))return!1}var Z=m.get(o),X=m.get(s);if(Z&&X)return Z==s&&X==o;var re=!0;m.set(o,s),m.set(s,o);for(var ie=v;++z<B;){V=M[z];var te=o[V],q=s[V];if(c)var le=v?c(q,te,V,s,o,m):c(te,q,V,o,s,m);if(!(le===void 0?te===q||d(te,q,a,c,m):le)){re=!1;break}ie||(ie=V=="constructor")}if(re&&!ie){var ce=o.constructor,ve=s.constructor;ce!=ve&&"constructor"in o&&"constructor"in s&&!(typeof ce=="function"&&ce instanceof ce&&typeof ve=="function"&&ve instanceof ve)&&(re=!1)}return m.delete(o),m.delete(s),re}return j7=r,j7}var N7,sV;function Fke(){if(sV)return N7;sV=1;var n=XC(),e=Ym(),t=n(e,"DataView");return N7=t,N7}var G7,aV;function zke(){if(aV)return G7;aV=1;var n=XC(),e=Ym(),t=n(e,"Promise");return G7=t,G7}var W7,lV;function jke(){if(lV)return W7;lV=1;var n=XC(),e=Ym(),t=n(e,"Set");return W7=t,W7}var Q7,uV;function Nke(){if(uV)return Q7;uV=1;var n=XC(),e=Ym(),t=n(e,"WeakMap");return Q7=t,Q7}var q7,cV;function AO(){if(cV)return q7;cV=1;var n=Fke(),e=JK(),t=zke(),i=jke(),r=Nke(),o=ZC(),s=use(),a="[object Map]",c="[object Object]",d="[object Promise]",m="[object Set]",v="[object WeakMap]",M="[object DataView]",B=s(n),P=s(e),U=s(t),z=s(i),V=s(r),Z=o;return(n&&Z(new n(new ArrayBuffer(1)))!=M||e&&Z(new e)!=a||t&&Z(t.resolve())!=d||i&&Z(new i)!=m||r&&Z(new r)!=v)&&(Z=function(X){var re=o(X),ie=re==c?X.constructor:void 0,te=ie?s(ie):"";if(te)switch(te){case B:return M;case P:return a;case U:return d;case z:return m;case V:return v}return re}),q7=Z,q7}var Y7,AV;function Gke(){if(AV)return Y7;AV=1;var n=cO(),e=cse(),t=Lke(),i=Kke(),r=AO(),o=wf(),s=rO(),a=VK(),c=1,d="[object Arguments]",m="[object Array]",v="[object Object]",M=Object.prototype,B=M.hasOwnProperty;function P(U,z,V,Z,X,re){var ie=o(U),te=o(z),q=ie?m:r(U),le=te?m:r(z);q=q==d?v:q,le=le==d?v:le;var ce=q==v,ve=le==v,ge=q==le;if(ge&&s(U)){if(!s(z))return!1;ie=!0,ce=!1}if(ge&&!ce)return re||(re=new n),ie||a(U)?e(U,z,V,Z,X,re):t(U,z,q,V,Z,X,re);if(!(V&c)){var Ee=ce&&B.call(U,"__wrapped__"),xe=ve&&B.call(z,"__wrapped__");if(Ee||xe){var Te=Ee?U.value():U,Fe=xe?z.value():z;return re||(re=new n),X(Te,Fe,V,Z,re)}}return ge?(re||(re=new n),i(U,z,V,Z,X,re)):!1}return Y7=P,Y7}var V7,hV;function mse(){if(hV)return V7;hV=1;var n=Gke(),e=Tg();function t(i,r,o,s,a){return i===r?!0:i==null||r==null||!e(i)&&!e(r)?i!==i&&r!==r:n(i,r,o,s,t,a)}return V7=t,V7}var $7,dV;function Wke(){if(dV)return $7;dV=1;var n=cO(),e=mse(),t=1,i=2;function r(o,s,a,c){var d=a.length,m=d,v=!c;if(o==null)return!m;for(o=Object(o);d--;){var M=a[d];if(v&&M[2]?M[1]!==o[M[0]]:!(M[0]in o))return!1}for(;++d<m;){M=a[d];var B=M[0],P=o[B],U=M[1];if(v&&M[2]){if(P===void 0&&!(B in o))return!1}else{var z=new n;if(c)var V=c(P,U,B,o,s,z);if(!(V===void 0?e(U,P,t|i,c,z):V))return!1}}return!0}return $7=r,$7}var H7,fV;function gse(){if(fV)return H7;fV=1;var n=Op();function e(t){return t===t&&!n(t)}return H7=e,H7}var Z7,pV;function Qke(){if(pV)return Z7;pV=1;var n=gse(),e=LM();function t(i){for(var r=e(i),o=r.length;o--;){var s=r[o],a=i[s];r[o]=[s,a,n(a)]}return r}return Z7=t,Z7}var X7,mV;function yse(){if(mV)return X7;mV=1;function n(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==void 0||e in Object(i))}}return X7=n,X7}var J7,gV;function qke(){if(gV)return J7;gV=1;var n=Wke(),e=Qke(),t=yse();function i(r){var o=e(r);return o.length==1&&o[0][2]?t(o[0][0],o[0][1]):function(s){return s===r||n(s,r,o)}}return J7=i,J7}var ek,yV;function hO(){if(yV)return ek;yV=1;var n=ZC(),e=Tg(),t="[object Symbol]";function i(r){return typeof r=="symbol"||e(r)&&n(r)==t}return ek=i,ek}var tk,vV;function nF(){if(vV)return tk;vV=1;var n=wf(),e=hO(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(o,s){if(n(o))return!1;var a=typeof o;return a=="number"||a=="symbol"||a=="boolean"||o==null||e(o)?!0:i.test(o)||!t.test(o)||s!=null&&o in Object(s)}return tk=r,tk}var nk,bV;function Yke(){if(bV)return nk;bV=1;var n=eF(),e="Expected a function";function t(i,r){if(typeof i!="function"||r!=null&&typeof r!="function")throw new TypeError(e);var o=function(){var s=arguments,a=r?r.apply(this,s):s[0],c=o.cache;if(c.has(a))return c.get(a);var d=i.apply(this,s);return o.cache=c.set(a,d)||c,d};return o.cache=new(t.Cache||n),o}return t.Cache=n,nk=t,nk}var ik,CV;function Vke(){if(CV)return ik;CV=1;var n=Yke(),e=500;function t(i){var r=n(i,function(s){return o.size===e&&o.clear(),s}),o=r.cache;return r}return ik=t,ik}var rk,_V;function $ke(){if(_V)return rk;_V=1;var n=Vke(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,i=n(function(r){var o=[];return r.charCodeAt(0)===46&&o.push(""),r.replace(e,function(s,a,c,d){o.push(c?d.replace(t,"$1"):a||s)}),o});return rk=i,rk}var ok,xV;function Hke(){if(xV)return ok;xV=1;var n=PM(),e=lse(),t=wf(),i=hO(),r=n?n.prototype:void 0,o=r?r.toString:void 0;function s(a){if(typeof a=="string")return a;if(t(a))return e(a,s)+"";if(i(a))return o?o.call(a):"";var c=a+"";return c=="0"&&1/a==-1/0?"-0":c}return ok=s,ok}var sk,MV;function Zke(){if(MV)return sk;MV=1;var n=Hke();function e(t){return t==null?"":n(t)}return sk=e,sk}var ak,wV;function vse(){if(wV)return ak;wV=1;var n=wf(),e=nF(),t=$ke(),i=Zke();function r(o,s){return n(o)?o:e(o,s)?[o]:t(i(o))}return ak=r,ak}var lk,SV;function dO(){if(SV)return lk;SV=1;var n=hO();function e(t){if(typeof t=="string"||n(t))return t;var i=t+"";return i=="0"&&1/t==-1/0?"-0":i}return lk=e,lk}var uk,EV;function bse(){if(EV)return uk;EV=1;var n=vse(),e=dO();function t(i,r){r=n(r,i);for(var o=0,s=r.length;i!=null&&o<s;)i=i[e(r[o++])];return o&&o==s?i:void 0}return uk=t,uk}var ck,BV;function Xke(){if(BV)return ck;BV=1;var n=bse();function e(t,i,r){var o=t==null?void 0:n(t,i);return o===void 0?r:o}return ck=e,ck}var Ak,OV;function Jke(){if(OV)return Ak;OV=1;function n(e,t){return e!=null&&t in Object(e)}return Ak=n,Ak}var hk,IV;function e9e(){if(IV)return hk;IV=1;var n=vse(),e=GK(),t=wf(),i=WK(),r=QK(),o=dO();function s(a,c,d){c=n(c,a);for(var m=-1,v=c.length,M=!1;++m<v;){var B=o(c[m]);if(!(M=a!=null&&d(a,B)))break;a=a[B]}return M||++m!=v?M:(v=a==null?0:a.length,!!v&&r(v)&&i(B,v)&&(t(a)||e(a)))}return hk=s,hk}var dk,TV;function t9e(){if(TV)return dk;TV=1;var n=Jke(),e=e9e();function t(i,r){return i!=null&&e(i,r,n)}return dk=t,dk}var fk,kV;function n9e(){if(kV)return fk;kV=1;var n=mse(),e=Xke(),t=t9e(),i=nF(),r=gse(),o=yse(),s=dO(),a=1,c=2;function d(m,v){return i(m)&&r(v)?o(s(m),v):function(M){var B=e(M,m);return B===void 0&&B===v?t(M,m):n(v,B,a|c)}}return fk=d,fk}var pk,DV;function i9e(){if(DV)return pk;DV=1;function n(e){return function(t){return t?.[e]}}return pk=n,pk}var mk,RV;function r9e(){if(RV)return mk;RV=1;var n=bse();function e(t){return function(i){return n(i,t)}}return mk=e,mk}var gk,PV;function o9e(){if(PV)return gk;PV=1;var n=i9e(),e=r9e(),t=nF(),i=dO();function r(o){return t(o)?n(i(o)):e(o)}return gk=r,gk}var yk,LV;function s9e(){if(LV)return yk;LV=1;var n=qke(),e=n9e(),t=oO(),i=wf(),r=o9e();function o(s){return typeof s=="function"?s:s==null?t:typeof s=="object"?i(s)?e(s[0],s[1]):n(s):r(s)}return yk=o,yk}var vk,UV;function a9e(){if(UV)return vk;UV=1;var n=V2();function e(t,i){return function(r,o){if(r==null)return r;if(!n(r))return t(r,o);for(var s=r.length,a=i?s:-1,c=Object(r);(i?a--:++a<s)&&o(c[a],a,c)!==!1;);return r}}return vk=e,vk}var bk,KV;function Cse(){if(KV)return bk;KV=1;var n=ose(),e=a9e(),t=e(n);return bk=t,bk}var Ck,FV;function l9e(){if(FV)return Ck;FV=1;var n=Cse(),e=V2();function t(i,r){var o=-1,s=e(i)?Array(i.length):[];return n(i,function(a,c,d){s[++o]=r(a,c,d)}),s}return Ck=t,Ck}var _k,zV;function u9e(){if(zV)return _k;zV=1;var n=lse(),e=s9e(),t=l9e(),i=wf();function r(o,s){var a=i(o)?n:t;return a(o,e(s,3))}return _k=r,_k}var jV;function c9e(){if(jV)return V_;jV=1,Object.defineProperty(V_,"__esModule",{value:!0}),V_.flattenNames=void 0;var n=$7e(),e=c(n),t=ZK(),i=c(t),r=ase(),o=c(r),s=u9e(),a=c(s);function c(m){return m&&m.__esModule?m:{default:m}}var d=V_.flattenNames=function m(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],M=[];return(0,a.default)(v,function(B){Array.isArray(B)?m(B).map(function(P){return M.push(P)}):(0,o.default)(B)?(0,i.default)(B,function(P,U){P===!0&&M.push(U),M.push(U+"-"+P)}):(0,e.default)(B)&&M.push(B)}),M};return V_.default=d,V_}var $_={},xk,NV;function _se(){if(NV)return xk;NV=1;function n(e,t){for(var i=-1,r=e==null?0:e.length;++i<r&&t(e[i],i,e)!==!1;);return e}return xk=n,xk}var Mk,GV;function xse(){if(GV)return Mk;GV=1;var n=XC(),e=(function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}})();return Mk=e,Mk}var wk,WV;function iF(){if(WV)return wk;WV=1;var n=xse();function e(t,i,r){i=="__proto__"&&n?n(t,i,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[i]=r}return wk=e,wk}var Sk,QV;function Mse(){if(QV)return Sk;QV=1;var n=iF(),e=UM(),t=Object.prototype,i=t.hasOwnProperty;function r(o,s,a){var c=o[s];(!(i.call(o,s)&&e(c,a))||a===void 0&&!(s in o))&&n(o,s,a)}return Sk=r,Sk}var Ek,qV;function KM(){if(qV)return Ek;qV=1;var n=Mse(),e=iF();function t(i,r,o,s){var a=!o;o||(o={});for(var c=-1,d=r.length;++c<d;){var m=r[c],v=s?s(o[m],i[m],m,o,i):void 0;v===void 0&&(v=i[m]),a?e(o,m,v):n(o,m,v)}return o}return Ek=t,Ek}var Bk,YV;function A9e(){if(YV)return Bk;YV=1;var n=KM(),e=LM();function t(i,r){return i&&n(r,e(r),i)}return Bk=t,Bk}var Ok,VV;function h9e(){if(VV)return Ok;VV=1;function n(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}return Ok=n,Ok}var Ik,$V;function d9e(){if($V)return Ik;$V=1;var n=Op(),e=$K(),t=h9e(),i=Object.prototype,r=i.hasOwnProperty;function o(s){if(!n(s))return t(s);var a=e(s),c=[];for(var d in s)d=="constructor"&&(a||!r.call(s,d))||c.push(d);return c}return Ik=o,Ik}var Tk,HV;function FM(){if(HV)return Tk;HV=1;var n=ise(),e=d9e(),t=V2();function i(r){return t(r)?n(r,!0):e(r)}return Tk=i,Tk}var kk,ZV;function f9e(){if(ZV)return kk;ZV=1;var n=KM(),e=FM();function t(i,r){return i&&n(r,e(r),i)}return kk=t,kk}var s4={exports:{}};s4.exports;var XV;function wse(){return XV||(XV=1,(function(n,e){var t=Ym(),i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,o=r&&r.exports===i,s=o?t.Buffer:void 0,a=s?s.allocUnsafe:void 0;function c(d,m){if(m)return d.slice();var v=d.length,M=a?a(v):new d.constructor(v);return d.copy(M),M}n.exports=c})(s4,s4.exports)),s4.exports}var Dk,JV;function Sse(){if(JV)return Dk;JV=1;function n(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}return Dk=n,Dk}var Rk,e$;function p9e(){if(e$)return Rk;e$=1;var n=KM(),e=tF();function t(i,r){return n(i,e(i),r)}return Rk=t,Rk}var Pk,t$;function Ese(){if(t$)return Pk;t$=1;var n=hse(),e=XK(),t=tF(),i=fse(),r=Object.getOwnPropertySymbols,o=r?function(s){for(var a=[];s;)n(a,t(s)),s=e(s);return a}:i;return Pk=o,Pk}var Lk,n$;function m9e(){if(n$)return Lk;n$=1;var n=KM(),e=Ese();function t(i,r){return n(i,e(i),r)}return Lk=t,Lk}var Uk,i$;function g9e(){if(i$)return Uk;i$=1;var n=dse(),e=Ese(),t=FM();function i(r){return n(r,t,e)}return Uk=i,Uk}var Kk,r$;function y9e(){if(r$)return Kk;r$=1;var n=Object.prototype,e=n.hasOwnProperty;function t(i){var r=i.length,o=new i.constructor(r);return r&&typeof i[0]=="string"&&e.call(i,"index")&&(o.index=i.index,o.input=i.input),o}return Kk=t,Kk}var Fk,o$;function rF(){if(o$)return Fk;o$=1;var n=Ase();function e(t){var i=new t.constructor(t.byteLength);return new n(i).set(new n(t)),i}return Fk=e,Fk}var zk,s$;function v9e(){if(s$)return zk;s$=1;var n=rF();function e(t,i){var r=i?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}return zk=e,zk}var jk,a$;function b9e(){if(a$)return jk;a$=1;var n=/\w*$/;function e(t){var i=new t.constructor(t.source,n.exec(t));return i.lastIndex=t.lastIndex,i}return jk=e,jk}var Nk,l$;function C9e(){if(l$)return Nk;l$=1;var n=PM(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function i(r){return t?Object(t.call(r)):{}}return Nk=i,Nk}var Gk,u$;function Bse(){if(u$)return Gk;u$=1;var n=rF();function e(t,i){var r=i?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}return Gk=e,Gk}var Wk,c$;function _9e(){if(c$)return Wk;c$=1;var n=rF(),e=v9e(),t=b9e(),i=C9e(),r=Bse(),o="[object Boolean]",s="[object Date]",a="[object Map]",c="[object Number]",d="[object RegExp]",m="[object Set]",v="[object String]",M="[object Symbol]",B="[object ArrayBuffer]",P="[object DataView]",U="[object Float32Array]",z="[object Float64Array]",V="[object Int8Array]",Z="[object Int16Array]",X="[object Int32Array]",re="[object Uint8Array]",ie="[object Uint8ClampedArray]",te="[object Uint16Array]",q="[object Uint32Array]";function le(ce,ve,ge){var Ee=ce.constructor;switch(ve){case B:return n(ce);case o:case s:return new Ee(+ce);case P:return e(ce,ge);case U:case z:case V:case Z:case X:case re:case ie:case te:case q:return r(ce,ge);case a:return new Ee;case c:case v:return new Ee(ce);case d:return t(ce);case m:return new Ee;case M:return i(ce)}}return Wk=le,Wk}var Qk,A$;function x9e(){if(A$)return Qk;A$=1;var n=Op(),e=Object.create,t=(function(){function i(){}return function(r){if(!n(r))return{};if(e)return e(r);i.prototype=r;var o=new i;return i.prototype=void 0,o}})();return Qk=t,Qk}var qk,h$;function Ose(){if(h$)return qk;h$=1;var n=x9e(),e=XK(),t=$K();function i(r){return typeof r.constructor=="function"&&!t(r)?n(e(r)):{}}return qk=i,qk}var Yk,d$;function M9e(){if(d$)return Yk;d$=1;var n=AO(),e=Tg(),t="[object Map]";function i(r){return e(r)&&n(r)==t}return Yk=i,Yk}var Vk,f$;function w9e(){if(f$)return Vk;f$=1;var n=M9e(),e=qK(),t=YK(),i=t&&t.isMap,r=i?e(i):n;return Vk=r,Vk}var $k,p$;function S9e(){if(p$)return $k;p$=1;var n=AO(),e=Tg(),t="[object Set]";function i(r){return e(r)&&n(r)==t}return $k=i,$k}var Hk,m$;function E9e(){if(m$)return Hk;m$=1;var n=S9e(),e=qK(),t=YK(),i=t&&t.isSet,r=i?e(i):n;return Hk=r,Hk}var Zk,g$;function B9e(){if(g$)return Zk;g$=1;var n=cO(),e=_se(),t=Mse(),i=A9e(),r=f9e(),o=wse(),s=Sse(),a=p9e(),c=m9e(),d=pse(),m=g9e(),v=AO(),M=y9e(),B=_9e(),P=Ose(),U=wf(),z=rO(),V=w9e(),Z=Op(),X=E9e(),re=LM(),ie=FM(),te=1,q=2,le=4,ce="[object Arguments]",ve="[object Array]",ge="[object Boolean]",Ee="[object Date]",xe="[object Error]",Te="[object Function]",Fe="[object GeneratorFunction]",Ie="[object Map]",Ye="[object Number]",At="[object Object]",mt="[object RegExp]",Ue="[object Set]",De="[object String]",Ge="[object Symbol]",Re="[object WeakMap]",St="[object ArrayBuffer]",ut="[object DataView]",kt="[object Float32Array]",Ut="[object Float64Array]",Le="[object Int8Array]",ke="[object Int16Array]",Oe="[object Int32Array]",Ze="[object Uint8Array]",bt="[object Uint8ClampedArray]",yt="[object Uint16Array]",Mt="[object Uint32Array]",Kt={};Kt[ce]=Kt[ve]=Kt[St]=Kt[ut]=Kt[ge]=Kt[Ee]=Kt[kt]=Kt[Ut]=Kt[Le]=Kt[ke]=Kt[Oe]=Kt[Ie]=Kt[Ye]=Kt[At]=Kt[mt]=Kt[Ue]=Kt[De]=Kt[Ge]=Kt[Ze]=Kt[bt]=Kt[yt]=Kt[Mt]=!0,Kt[xe]=Kt[Te]=Kt[Re]=!1;function Dt(en,Gn,Nn,Si,Un,Ln){var Tn,ti=Gn&te,Bn=Gn&q,je=Gn&le;if(Nn&&(Tn=Un?Nn(en,Si,Un,Ln):Nn(en)),Tn!==void 0)return Tn;if(!Z(en))return en;var H=U(en);if(H){if(Tn=M(en),!ti)return s(en,Tn)}else{var j=v(en),Q=j==Te||j==Fe;if(z(en))return o(en,ti);if(j==At||j==ce||Q&&!Un){if(Tn=Bn||Q?{}:P(en),!ti)return Bn?c(en,r(Tn,en)):a(en,i(Tn,en))}else{if(!Kt[j])return Un?en:{};Tn=B(en,j,ti)}}Ln||(Ln=new n);var he=Ln.get(en);if(he)return he;Ln.set(en,Tn),X(en)?en.forEach(function(Qe){Tn.add(Dt(Qe,Gn,Nn,Qe,en,Ln))}):V(en)&&en.forEach(function(Qe,it){Tn.set(it,Dt(Qe,Gn,Nn,it,en,Ln))});var Me=je?Bn?m:d:Bn?ie:re,Ne=H?void 0:Me(en);return e(Ne||en,function(Qe,it){Ne&&(it=Qe,Qe=en[it]),t(Tn,it,Dt(Qe,Gn,Nn,it,en,Ln))}),Tn}return Zk=Dt,Zk}var Xk,y$;function O9e(){if(y$)return Xk;y$=1;var n=B9e(),e=1,t=4;function i(r){return n(r,e|t)}return Xk=i,Xk}var v$;function I9e(){if(v$)return $_;v$=1,Object.defineProperty($_,"__esModule",{value:!0}),$_.mergeClasses=void 0;var n=ZK(),e=o(n),t=O9e(),i=o(t),r=Object.assign||function(a){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(a[m]=d[m])}return a};function o(a){return a&&a.__esModule?a:{default:a}}var s=$_.mergeClasses=function(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],m=c.default&&(0,i.default)(c.default)||{};return d.map(function(v){var M=c[v];return M&&(0,e.default)(M,function(B,P){m[P]||(m[P]={}),m[P]=r({},m[P],M[P])}),v}),m};return $_.default=s,$_}var H_={},b$;function T9e(){if(b$)return H_;b$=1,Object.defineProperty(H_,"__esModule",{value:!0}),H_.autoprefix=void 0;var n=ZK(),e=i(n),t=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(s[d]=c[d])}return s};function i(s){return s&&s.__esModule?s:{default:s}}var r={borderRadius:function(a){return{msBorderRadius:a,MozBorderRadius:a,OBorderRadius:a,WebkitBorderRadius:a,borderRadius:a}},boxShadow:function(a){return{msBoxShadow:a,MozBoxShadow:a,OBoxShadow:a,WebkitBoxShadow:a,boxShadow:a}},userSelect:function(a){return{WebkitTouchCallout:a,KhtmlUserSelect:a,MozUserSelect:a,msUserSelect:a,WebkitUserSelect:a,userSelect:a}},flex:function(a){return{WebkitBoxFlex:a,MozBoxFlex:a,WebkitFlex:a,msFlex:a,flex:a}},flexBasis:function(a){return{WebkitFlexBasis:a,flexBasis:a}},justifyContent:function(a){return{WebkitJustifyContent:a,justifyContent:a}},transition:function(a){return{msTransition:a,MozTransition:a,OTransition:a,WebkitTransition:a,transition:a}},transform:function(a){return{msTransform:a,MozTransform:a,OTransform:a,WebkitTransform:a,transform:a}},absolute:function(a){var c=a&&a.split(" ");return{position:"absolute",top:c&&c[0],right:c&&c[1],bottom:c&&c[2],left:c&&c[3]}},extend:function(a,c){var d=c[a];return d||{extend:a}}},o=H_.autoprefix=function(a){var c={};return(0,e.default)(a,function(d,m){var v={};(0,e.default)(d,function(M,B){var P=r[B];P?v=t({},v,P(M)):v[B]=M}),c[m]=v}),c};return H_.default=o,H_}var Z_={},C$;function k9e(){if(C$)return Z_;C$=1,Object.defineProperty(Z_,"__esModule",{value:!0}),Z_.hover=void 0;var n=Object.assign||function(c){for(var d=1;d<arguments.length;d++){var m=arguments[d];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(c[v]=m[v])}return c},e=_a(),t=i(e);function i(c){return c&&c.__esModule?c:{default:c}}function r(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function o(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function s(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var a=Z_.hover=function(d){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){s(M,v);function M(){var B,P,U,z;r(this,M);for(var V=arguments.length,Z=Array(V),X=0;X<V;X++)Z[X]=arguments[X];return z=(P=(U=o(this,(B=M.__proto__||Object.getPrototypeOf(M)).call.apply(B,[this].concat(Z))),U),U.state={hover:!1},U.handleMouseOver=function(){return U.setState({hover:!0})},U.handleMouseOut=function(){return U.setState({hover:!1})},U.render=function(){return t.default.createElement(m,{onMouseOver:U.handleMouseOver,onMouseOut:U.handleMouseOut},t.default.createElement(d,n({},U.props,U.state)))},P),o(U,z)}return M})(t.default.Component)};return Z_.default=a,Z_}var X_={},_$;function D9e(){if(_$)return X_;_$=1,Object.defineProperty(X_,"__esModule",{value:!0}),X_.active=void 0;var n=Object.assign||function(c){for(var d=1;d<arguments.length;d++){var m=arguments[d];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(c[v]=m[v])}return c},e=_a(),t=i(e);function i(c){return c&&c.__esModule?c:{default:c}}function r(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function o(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function s(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var a=X_.active=function(d){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){s(M,v);function M(){var B,P,U,z;r(this,M);for(var V=arguments.length,Z=Array(V),X=0;X<V;X++)Z[X]=arguments[X];return z=(P=(U=o(this,(B=M.__proto__||Object.getPrototypeOf(M)).call.apply(B,[this].concat(Z))),U),U.state={active:!1},U.handleMouseDown=function(){return U.setState({active:!0})},U.handleMouseUp=function(){return U.setState({active:!1})},U.render=function(){return t.default.createElement(m,{onMouseDown:U.handleMouseDown,onMouseUp:U.handleMouseUp},t.default.createElement(d,n({},U.props,U.state)))},P),o(U,z)}return M})(t.default.Component)};return X_.default=a,X_}var tS={},x$;function R9e(){if(x$)return tS;x$=1,Object.defineProperty(tS,"__esModule",{value:!0});var n=function(t,i){var r={},o=function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r[a]=c};return t===0&&o("first-child"),t===i-1&&o("last-child"),(t===0||t%2===0)&&o("even"),Math.abs(t%2)===1&&o("odd"),o("nth-child",t),r};return tS.default=n,tS}var M$;function Vm(){if(M$)return md;M$=1,Object.defineProperty(md,"__esModule",{value:!0}),md.ReactCSS=md.loop=md.handleActive=md.handleHover=md.hover=void 0;var n=c9e(),e=M(n),t=I9e(),i=M(t),r=T9e(),o=M(r),s=k9e(),a=M(s),c=D9e(),d=M(c),m=R9e(),v=M(m);function M(P){return P&&P.__esModule?P:{default:P}}md.hover=a.default,md.handleHover=a.default,md.handleActive=d.default,md.loop=v.default;var B=md.ReactCSS=function(U){for(var z=arguments.length,V=Array(z>1?z-1:0),Z=1;Z<z;Z++)V[Z-1]=arguments[Z];var X=(0,e.default)(V),re=(0,i.default)(U,X);return(0,o.default)(re)};return md.default=B,md}var Jk,w$;function Ise(){if(w$)return Jk;w$=1;var n=iF(),e=UM();function t(i,r,o){(o!==void 0&&!e(i[r],o)||o===void 0&&!(r in i))&&n(i,r,o)}return Jk=t,Jk}var e9,S$;function P9e(){if(S$)return e9;S$=1;var n=V2(),e=Tg();function t(i){return e(i)&&n(i)}return e9=t,e9}var t9,E$;function Tse(){if(E$)return t9;E$=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return t9=n,t9}var n9,B$;function L9e(){if(B$)return n9;B$=1;var n=KM(),e=FM();function t(i){return n(i,e(i))}return n9=t,n9}var i9,O$;function U9e(){if(O$)return i9;O$=1;var n=Ise(),e=wse(),t=Bse(),i=Sse(),r=Ose(),o=GK(),s=wf(),a=P9e(),c=rO(),d=HK(),m=Op(),v=ase(),M=VK(),B=Tse(),P=L9e();function U(z,V,Z,X,re,ie,te){var q=B(z,Z),le=B(V,Z),ce=te.get(le);if(ce){n(z,Z,ce);return}var ve=ie?ie(q,le,Z+"",z,V,te):void 0,ge=ve===void 0;if(ge){var Ee=s(le),xe=!Ee&&c(le),Te=!Ee&&!xe&&M(le);ve=le,Ee||xe||Te?s(q)?ve=q:a(q)?ve=i(q):xe?(ge=!1,ve=e(le,!0)):Te?(ge=!1,ve=t(le,!0)):ve=[]:v(le)||o(le)?(ve=q,o(q)?ve=P(q):(!m(q)||d(q))&&(ve=r(le))):ge=!1}ge&&(te.set(le,ve),re(ve,le,X,ie,te),te.delete(le)),n(z,Z,ve)}return i9=U,i9}var r9,I$;function K9e(){if(I$)return r9;I$=1;var n=cO(),e=Ise(),t=nse(),i=U9e(),r=Op(),o=FM(),s=Tse();function a(c,d,m,v,M){c!==d&&t(d,function(B,P){if(M||(M=new n),r(B))i(c,d,P,m,a,v,M);else{var U=v?v(s(c,P),B,P+"",c,d,M):void 0;U===void 0&&(U=B),e(c,P,U)}},o)}return r9=a,r9}var o9,T$;function F9e(){if(T$)return o9;T$=1;function n(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}return o9=n,o9}var s9,k$;function z9e(){if(k$)return s9;k$=1;var n=F9e(),e=Math.max;function t(i,r,o){return r=e(r===void 0?i.length-1:r,0),function(){for(var s=arguments,a=-1,c=e(s.length-r,0),d=Array(c);++a<c;)d[a]=s[r+a];a=-1;for(var m=Array(r+1);++a<r;)m[a]=s[a];return m[r]=o(d),n(i,this,m)}}return s9=t,s9}var a9,D$;function j9e(){if(D$)return a9;D$=1;function n(e){return function(){return e}}return a9=n,a9}var l9,R$;function N9e(){if(R$)return l9;R$=1;var n=j9e(),e=xse(),t=oO(),i=e?function(r,o){return e(r,"toString",{configurable:!0,enumerable:!1,value:n(o),writable:!0})}:t;return l9=i,l9}var u9,P$;function G9e(){if(P$)return u9;P$=1;var n=800,e=16,t=Date.now;function i(r){var o=0,s=0;return function(){var a=t(),c=e-(a-s);if(s=a,c>0){if(++o>=n)return arguments[0]}else o=0;return r.apply(void 0,arguments)}}return u9=i,u9}var c9,L$;function W9e(){if(L$)return c9;L$=1;var n=N9e(),e=G9e(),t=e(n);return c9=t,c9}var A9,U$;function Q9e(){if(U$)return A9;U$=1;var n=oO(),e=z9e(),t=W9e();function i(r,o){return t(e(r,o,n),r+"")}return A9=i,A9}var h9,K$;function q9e(){if(K$)return h9;K$=1;var n=UM(),e=V2(),t=WK(),i=Op();function r(o,s,a){if(!i(a))return!1;var c=typeof s;return(c=="number"?e(a)&&t(s,a.length):c=="string"&&s in a)?n(a[s],o):!1}return h9=r,h9}var d9,F$;function Y9e(){if(F$)return d9;F$=1;var n=Q9e(),e=q9e();function t(i){return n(function(r,o){var s=-1,a=o.length,c=a>1?o[a-1]:void 0,d=a>2?o[2]:void 0;for(c=i.length>3&&typeof c=="function"?(a--,c):void 0,d&&e(o[0],o[1],d)&&(c=a<3?void 0:c,a=1),r=Object(r);++s<a;){var m=o[s];m&&i(r,m,s,c)}return r})}return d9=t,d9}var f9,z$;function kse(){if(z$)return f9;z$=1;var n=K9e(),e=Y9e(),t=e(function(i,r,o){n(i,r,o)});return f9=t,f9}var p9={},J_={},nS={},j$;function V9e(){return j$||(j$=1,Object.defineProperty(nS,"__esModule",{value:!0}),nS.calculateChange=function(e,t,i,r,o){var s=o.clientWidth,a=o.clientHeight,c=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,d=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,m=c-(o.getBoundingClientRect().left+window.pageXOffset),v=d-(o.getBoundingClientRect().top+window.pageYOffset);if(i==="vertical"){var M=void 0;if(v<0?M=0:v>a?M=1:M=Math.round(v*100/a)/100,t.a!==M)return{h:t.h,s:t.s,l:t.l,a:M,source:"rgb"}}else{var B=void 0;if(m<0?B=0:m>s?B=1:B=Math.round(m*100/s)/100,r!==B)return{h:t.h,s:t.s,l:t.l,a:B,source:"rgb"}}return null}),nS}var ex={},P3={},N$;function $9e(){if(N$)return P3;N$=1,Object.defineProperty(P3,"__esModule",{value:!0});var n={},e=P3.render=function(i,r,o,s){if(typeof document>"u"&&!s)return null;var a=s?new s:document.createElement("canvas");a.width=o*2,a.height=o*2;var c=a.getContext("2d");return c?(c.fillStyle=i,c.fillRect(0,0,a.width,a.height),c.fillStyle=r,c.fillRect(0,0,o,o),c.translate(o,o),c.fillRect(0,0,o,o),a.toDataURL()):null};return P3.get=function(i,r,o,s){var a=i+"-"+r+"-"+o+(s?"-server":"");if(n[a])return n[a];var c=e(i,r,o,s);return n[a]=c,c},P3}var G$;function oF(){if(G$)return ex;G$=1,Object.defineProperty(ex,"__esModule",{value:!0}),ex.Checkboard=void 0;var n=Object.assign||function(m){for(var v=1;v<arguments.length;v++){var M=arguments[v];for(var B in M)Object.prototype.hasOwnProperty.call(M,B)&&(m[B]=M[B])}return m},e=_a(),t=c(e),i=Vm(),r=c(i),o=$9e(),s=a(o);function a(m){if(m&&m.__esModule)return m;var v={};if(m!=null)for(var M in m)Object.prototype.hasOwnProperty.call(m,M)&&(v[M]=m[M]);return v.default=m,v}function c(m){return m&&m.__esModule?m:{default:m}}var d=ex.Checkboard=function(v){var M=v.white,B=v.grey,P=v.size,U=v.renderers,z=v.borderRadius,V=v.boxShadow,Z=v.children,X=(0,r.default)({default:{grid:{borderRadius:z,boxShadow:V,absolute:"0px 0px 0px 0px",background:"url("+s.get(M,B,P,U.canvas)+") center left"}}});return(0,e.isValidElement)(Z)?t.default.cloneElement(Z,n({},Z.props,{style:n({},Z.props.style,X.grid)})):t.default.createElement("div",{style:X.grid})};return d.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},ex.default=d,ex}var W$;function H9e(){if(W$)return J_;W$=1,Object.defineProperty(J_,"__esModule",{value:!0}),J_.Alpha=void 0;var n=Object.assign||function(z){for(var V=1;V<arguments.length;V++){var Z=arguments[V];for(var X in Z)Object.prototype.hasOwnProperty.call(Z,X)&&(z[X]=Z[X])}return z},e=(function(){function z(V,Z){for(var X=0;X<Z.length;X++){var re=Z[X];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(V,re.key,re)}}return function(V,Z,X){return Z&&z(V.prototype,Z),X&&z(V,X),V}})(),t=_a(),i=v(t),r=Vm(),o=v(r),s=V9e(),a=m(s),c=oF(),d=v(c);function m(z){if(z&&z.__esModule)return z;var V={};if(z!=null)for(var Z in z)Object.prototype.hasOwnProperty.call(z,Z)&&(V[Z]=z[Z]);return V.default=z,V}function v(z){return z&&z.__esModule?z:{default:z}}function M(z,V){if(!(z instanceof V))throw new TypeError("Cannot call a class as a function")}function B(z,V){if(!z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:z}function P(z,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);z.prototype=Object.create(V&&V.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(z,V):z.__proto__=V)}var U=J_.Alpha=(function(z){P(V,z);function V(){var Z,X,re,ie;M(this,V);for(var te=arguments.length,q=Array(te),le=0;le<te;le++)q[le]=arguments[le];return ie=(X=(re=B(this,(Z=V.__proto__||Object.getPrototypeOf(V)).call.apply(Z,[this].concat(q))),re),re.handleChange=function(ce){var ve=a.calculateChange(ce,re.props.hsl,re.props.direction,re.props.a,re.container);ve&&typeof re.props.onChange=="function"&&re.props.onChange(ve,ce)},re.handleMouseDown=function(ce){re.handleChange(ce),window.addEventListener("mousemove",re.handleChange),window.addEventListener("mouseup",re.handleMouseUp)},re.handleMouseUp=function(){re.unbindEventListeners()},re.unbindEventListeners=function(){window.removeEventListener("mousemove",re.handleChange),window.removeEventListener("mouseup",re.handleMouseUp)},X),B(re,ie)}return e(V,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var X=this,re=this.props.rgb,ie=(0,o.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+re.r+","+re.g+","+re.b+`, 0) 0%,
           rgba(`+re.r+","+re.g+","+re.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:re.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+re.r+","+re.g+","+re.b+`, 0) 0%,
           rgba(`+re.r+","+re.g+","+re.b+", 1) 100%)"},pointer:{left:0,top:re.a*100+"%"}},overwrite:n({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return i.default.createElement("div",{style:ie.alpha},i.default.createElement("div",{style:ie.checkboard},i.default.createElement(d.default,{renderers:this.props.renderers})),i.default.createElement("div",{style:ie.gradient}),i.default.createElement("div",{style:ie.container,ref:function(q){return X.container=q},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.default.createElement("div",{style:ie.pointer},this.props.pointer?i.default.createElement(this.props.pointer,this.props):i.default.createElement("div",{style:ie.slider}))))}}]),V})(t.PureComponent||t.Component);return J_.default=U,J_}var tx={},Q$;function Z9e(){if(Q$)return tx;Q$=1,Object.defineProperty(tx,"__esModule",{value:!0}),tx.EditableInput=void 0;var n=(function(){function Z(X,re){for(var ie=0;ie<re.length;ie++){var te=re[ie];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(X,te.key,te)}}return function(X,re,ie){return re&&Z(X.prototype,re),ie&&Z(X,ie),X}})(),e=_a(),t=o(e),i=Vm(),r=o(i);function o(Z){return Z&&Z.__esModule?Z:{default:Z}}function s(Z,X,re){return X in Z?Object.defineProperty(Z,X,{value:re,enumerable:!0,configurable:!0,writable:!0}):Z[X]=re,Z}function a(Z,X){if(!(Z instanceof X))throw new TypeError("Cannot call a class as a function")}function c(Z,X){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X&&(typeof X=="object"||typeof X=="function")?X:Z}function d(Z,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof X);Z.prototype=Object.create(X&&X.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,X):Z.__proto__=X)}var m=1,v=38,M=40,B=[v,M],P=function(X){return B.indexOf(X)>-1},U=function(X){return Number(String(X).replace(/%/g,""))},z=1,V=tx.EditableInput=(function(Z){d(X,Z);function X(re){a(this,X);var ie=c(this,(X.__proto__||Object.getPrototypeOf(X)).call(this));return ie.handleBlur=function(){ie.state.blurValue&&ie.setState({value:ie.state.blurValue,blurValue:null})},ie.handleChange=function(te){ie.setUpdatedValue(te.target.value,te)},ie.handleKeyDown=function(te){var q=U(te.target.value);if(!isNaN(q)&&P(te.keyCode)){var le=ie.getArrowOffset(),ce=te.keyCode===v?q+le:q-le;ie.setUpdatedValue(ce,te)}},ie.handleDrag=function(te){if(ie.props.dragLabel){var q=Math.round(ie.props.value+te.movementX);q>=0&&q<=ie.props.dragMax&&ie.props.onChange&&ie.props.onChange(ie.getValueObjectWithLabel(q),te)}},ie.handleMouseDown=function(te){ie.props.dragLabel&&(te.preventDefault(),ie.handleDrag(te),window.addEventListener("mousemove",ie.handleDrag),window.addEventListener("mouseup",ie.handleMouseUp))},ie.handleMouseUp=function(){ie.unbindEventListeners()},ie.unbindEventListeners=function(){window.removeEventListener("mousemove",ie.handleDrag),window.removeEventListener("mouseup",ie.handleMouseUp)},ie.state={value:String(re.value).toUpperCase(),blurValue:String(re.value).toUpperCase()},ie.inputId="rc-editable-input-"+z++,ie}return n(X,[{key:"componentDidUpdate",value:function(ie,te){this.props.value!==this.state.value&&(ie.value!==this.props.value||te.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(ie){return s({},this.props.label,ie)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||m}},{key:"setUpdatedValue",value:function(ie,te){var q=this.props.label?this.getValueObjectWithLabel(ie):ie;this.props.onChange&&this.props.onChange(q,te),this.setState({value:ie})}},{key:"render",value:function(){var ie=this,te=(0,r.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return t.default.createElement("div",{style:te.wrap},t.default.createElement("input",{id:this.inputId,style:te.input,ref:function(le){return ie.input=le},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?t.default.createElement("label",{htmlFor:this.inputId,style:te.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),X})(e.PureComponent||e.Component);return tx.default=V,tx}var nx={},iS={},q$;function X9e(){return q$||(q$=1,Object.defineProperty(iS,"__esModule",{value:!0}),iS.calculateChange=function(e,t,i,r){var o=r.clientWidth,s=r.clientHeight,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,d=a-(r.getBoundingClientRect().left+window.pageXOffset),m=c-(r.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var v=void 0;if(m<0)v=359;else if(m>s)v=0;else{var M=-(m*100/s)+100;v=360*M/100}if(i.h!==v)return{h:v,s:i.s,l:i.l,a:i.a,source:"hsl"}}else{var B=void 0;if(d<0)B=0;else if(d>o)B=359;else{var P=d*100/o;B=360*P/100}if(i.h!==B)return{h:B,s:i.s,l:i.l,a:i.a,source:"hsl"}}return null}),iS}var Y$;function J9e(){if(Y$)return nx;Y$=1,Object.defineProperty(nx,"__esModule",{value:!0}),nx.Hue=void 0;var n=(function(){function B(P,U){for(var z=0;z<U.length;z++){var V=U[z];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(P,V.key,V)}}return function(P,U,z){return U&&B(P.prototype,U),z&&B(P,z),P}})(),e=_a(),t=c(e),i=Vm(),r=c(i),o=X9e(),s=a(o);function a(B){if(B&&B.__esModule)return B;var P={};if(B!=null)for(var U in B)Object.prototype.hasOwnProperty.call(B,U)&&(P[U]=B[U]);return P.default=B,P}function c(B){return B&&B.__esModule?B:{default:B}}function d(B,P){if(!(B instanceof P))throw new TypeError("Cannot call a class as a function")}function m(B,P){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:B}function v(B,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);B.prototype=Object.create(P&&P.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(B,P):B.__proto__=P)}var M=nx.Hue=(function(B){v(P,B);function P(){var U,z,V,Z;d(this,P);for(var X=arguments.length,re=Array(X),ie=0;ie<X;ie++)re[ie]=arguments[ie];return Z=(z=(V=m(this,(U=P.__proto__||Object.getPrototypeOf(P)).call.apply(U,[this].concat(re))),V),V.handleChange=function(te){var q=s.calculateChange(te,V.props.direction,V.props.hsl,V.container);q&&typeof V.props.onChange=="function"&&V.props.onChange(q,te)},V.handleMouseDown=function(te){V.handleChange(te),window.addEventListener("mousemove",V.handleChange),window.addEventListener("mouseup",V.handleMouseUp)},V.handleMouseUp=function(){V.unbindEventListeners()},z),m(V,Z)}return n(P,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var z=this,V=this.props.direction,Z=V===void 0?"horizontal":V,X=(0,r.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:Z==="vertical"});return t.default.createElement("div",{style:X.hue},t.default.createElement("div",{className:"hue-"+Z,style:X.container,ref:function(ie){return z.container=ie},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),t.default.createElement("div",{style:X.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:X.slider}))))}}]),P})(e.PureComponent||e.Component);return nx.default=M,nx}var ix={},V$;function eDe(){if(V$)return ix;V$=1,Object.defineProperty(ix,"__esModule",{value:!0}),ix.Raised=void 0;var n=_a(),e=c(n),t=Y1(),i=c(t),r=Vm(),o=c(r),s=kse(),a=c(s);function c(m){return m&&m.__esModule?m:{default:m}}var d=ix.Raised=function(v){var M=v.zDepth,B=v.radius,P=v.background,U=v.children,z=v.styles,V=z===void 0?{}:z,Z=(0,o.default)((0,a.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+M+"px "+M*4+"px rgba(0,0,0,.24)",borderRadius:B,background:P}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},V),{"zDepth-1":M===1});return e.default.createElement("div",{style:Z.wrap},e.default.createElement("div",{style:Z.bg}),e.default.createElement("div",{style:Z.content},U))};return d.propTypes={background:i.default.string,zDepth:i.default.oneOf([0,1,2,3,4,5]),radius:i.default.number,styles:i.default.object},d.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},ix.default=d,ix}var rx={},m9,$$;function tDe(){if($$)return m9;$$=1;var n=Ym(),e=function(){return n.Date.now()};return m9=e,m9}var g9,H$;function nDe(){if(H$)return g9;H$=1;var n=/\s/;function e(t){for(var i=t.length;i--&&n.test(t.charAt(i)););return i}return g9=e,g9}var y9,Z$;function iDe(){if(Z$)return y9;Z$=1;var n=nDe(),e=/^\s+/;function t(i){return i&&i.slice(0,n(i)+1).replace(e,"")}return y9=t,y9}var v9,X$;function rDe(){if(X$)return v9;X$=1;var n=iDe(),e=Op(),t=hO(),i=NaN,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt;function c(d){if(typeof d=="number")return d;if(t(d))return i;if(e(d)){var m=typeof d.valueOf=="function"?d.valueOf():d;d=e(m)?m+"":m}if(typeof d!="string")return d===0?d:+d;d=n(d);var v=o.test(d);return v||s.test(d)?a(d.slice(2),v?2:8):r.test(d)?i:+d}return v9=c,v9}var b9,J$;function Dse(){if(J$)return b9;J$=1;var n=Op(),e=tDe(),t=rDe(),i="Expected a function",r=Math.max,o=Math.min;function s(a,c,d){var m,v,M,B,P,U,z=0,V=!1,Z=!1,X=!0;if(typeof a!="function")throw new TypeError(i);c=t(c)||0,n(d)&&(V=!!d.leading,Z="maxWait"in d,M=Z?r(t(d.maxWait)||0,c):M,X="trailing"in d?!!d.trailing:X);function re(xe){var Te=m,Fe=v;return m=v=void 0,z=xe,B=a.apply(Fe,Te),B}function ie(xe){return z=xe,P=setTimeout(le,c),V?re(xe):B}function te(xe){var Te=xe-U,Fe=xe-z,Ie=c-Te;return Z?o(Ie,M-Fe):Ie}function q(xe){var Te=xe-U,Fe=xe-z;return U===void 0||Te>=c||Te<0||Z&&Fe>=M}function le(){var xe=e();if(q(xe))return ce(xe);P=setTimeout(le,te(xe))}function ce(xe){return P=void 0,X&&m?re(xe):(m=v=void 0,B)}function ve(){P!==void 0&&clearTimeout(P),z=0,m=U=v=P=void 0}function ge(){return P===void 0?B:ce(e())}function Ee(){var xe=e(),Te=q(xe);if(m=arguments,v=this,U=xe,Te){if(P===void 0)return ie(U);if(Z)return clearTimeout(P),P=setTimeout(le,c),re(U)}return P===void 0&&(P=setTimeout(le,c)),B}return Ee.cancel=ve,Ee.flush=ge,Ee}return b9=s,b9}var C9,eH;function oDe(){if(eH)return C9;eH=1;var n=Dse(),e=Op(),t="Expected a function";function i(r,o,s){var a=!0,c=!0;if(typeof r!="function")throw new TypeError(t);return e(s)&&(a="leading"in s?!!s.leading:a,c="trailing"in s?!!s.trailing:c),n(r,o,{leading:a,maxWait:o,trailing:c})}return C9=i,C9}var rS={},tH;function sDe(){return tH||(tH=1,Object.defineProperty(rS,"__esModule",{value:!0}),rS.calculateChange=function(e,t,i){var r=i.getBoundingClientRect(),o=r.width,s=r.height,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,d=a-(i.getBoundingClientRect().left+window.pageXOffset),m=c-(i.getBoundingClientRect().top+window.pageYOffset);d<0?d=0:d>o&&(d=o),m<0?m=0:m>s&&(m=s);var v=d/o,M=1-m/s;return{h:t.h,s:v,v:M,a:t.a,source:"hsv"}}),rS}var nH;function aDe(){if(nH)return rx;nH=1,Object.defineProperty(rx,"__esModule",{value:!0}),rx.Saturation=void 0;var n=(function(){function U(z,V){for(var Z=0;Z<V.length;Z++){var X=V[Z];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(z,X.key,X)}}return function(z,V,Z){return V&&U(z.prototype,V),Z&&U(z,Z),z}})(),e=_a(),t=m(e),i=Vm(),r=m(i),o=oDe(),s=m(o),a=sDe(),c=d(a);function d(U){if(U&&U.__esModule)return U;var z={};if(U!=null)for(var V in U)Object.prototype.hasOwnProperty.call(U,V)&&(z[V]=U[V]);return z.default=U,z}function m(U){return U&&U.__esModule?U:{default:U}}function v(U,z){if(!(U instanceof z))throw new TypeError("Cannot call a class as a function")}function M(U,z){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:U}function B(U,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);U.prototype=Object.create(z&&z.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(U,z):U.__proto__=z)}var P=rx.Saturation=(function(U){B(z,U);function z(V){v(this,z);var Z=M(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,V));return Z.handleChange=function(X){typeof Z.props.onChange=="function"&&Z.throttle(Z.props.onChange,c.calculateChange(X,Z.props.hsl,Z.container),X)},Z.handleMouseDown=function(X){Z.handleChange(X);var re=Z.getContainerRenderWindow();re.addEventListener("mousemove",Z.handleChange),re.addEventListener("mouseup",Z.handleMouseUp)},Z.handleMouseUp=function(){Z.unbindEventListeners()},Z.throttle=(0,s.default)(function(X,re,ie){X(re,ie)},50),Z}return n(z,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var Z=this.container,X=window;!X.document.contains(Z)&&X.parent!==X;)X=X.parent;return X}},{key:"unbindEventListeners",value:function(){var Z=this.getContainerRenderWindow();Z.removeEventListener("mousemove",this.handleChange),Z.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var Z=this,X=this.props.style||{},re=X.color,ie=X.white,te=X.black,q=X.pointer,le=X.circle,ce=(0,r.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:re,white:ie,black:te,pointer:q,circle:le}},{custom:!!this.props.style});return t.default.createElement("div",{style:ce.color,ref:function(ge){return Z.container=ge},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),t.default.createElement("div",{style:ce.white,className:"saturation-white"},t.default.createElement("div",{style:ce.black,className:"saturation-black"}),t.default.createElement("div",{style:ce.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:ce.circle}))))}}]),z})(e.PureComponent||e.Component);return rx.default=P,rx}var ox={},wh={},_9,iH;function lDe(){if(iH)return _9;iH=1;var n=_se(),e=Cse(),t=sse(),i=wf();function r(o,s){var a=i(o)?n:e;return a(o,t(s))}return _9=r,_9}var x9,rH;function uDe(){return rH||(rH=1,x9=lDe()),x9}var KS={exports:{}},cDe=KS.exports,oH;function ADe(){return oH||(oH=1,(function(n,e){(function(t,i){n.exports=i()})(cDe,(function(){function t(Le){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ke){return typeof ke}:function(ke){return ke&&typeof Symbol=="function"&&ke.constructor===Symbol&&ke!==Symbol.prototype?"symbol":typeof ke},t(Le)}var i=/^\s+/,r=/\s+$/;function o(Le,ke){if(Le=Le||"",ke=ke||{},Le instanceof o)return Le;if(!(this instanceof o))return new o(Le,ke);var Oe=s(Le);this._originalInput=Le,this._r=Oe.r,this._g=Oe.g,this._b=Oe.b,this._a=Oe.a,this._roundA=Math.round(100*this._a)/100,this._format=ke.format||Oe.format,this._gradientType=ke.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=Oe.ok}o.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ke=this.toRgb();return(ke.r*299+ke.g*587+ke.b*114)/1e3},getLuminance:function(){var ke=this.toRgb(),Oe,Ze,bt,yt,Mt,Kt;return Oe=ke.r/255,Ze=ke.g/255,bt=ke.b/255,Oe<=.03928?yt=Oe/12.92:yt=Math.pow((Oe+.055)/1.055,2.4),Ze<=.03928?Mt=Ze/12.92:Mt=Math.pow((Ze+.055)/1.055,2.4),bt<=.03928?Kt=bt/12.92:Kt=Math.pow((bt+.055)/1.055,2.4),.2126*yt+.7152*Mt+.0722*Kt},setAlpha:function(ke){return this._a=Te(ke),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var ke=m(this._r,this._g,this._b);return{h:ke.h*360,s:ke.s,v:ke.v,a:this._a}},toHsvString:function(){var ke=m(this._r,this._g,this._b),Oe=Math.round(ke.h*360),Ze=Math.round(ke.s*100),bt=Math.round(ke.v*100);return this._a==1?"hsv("+Oe+", "+Ze+"%, "+bt+"%)":"hsva("+Oe+", "+Ze+"%, "+bt+"%, "+this._roundA+")"},toHsl:function(){var ke=c(this._r,this._g,this._b);return{h:ke.h*360,s:ke.s,l:ke.l,a:this._a}},toHslString:function(){var ke=c(this._r,this._g,this._b),Oe=Math.round(ke.h*360),Ze=Math.round(ke.s*100),bt=Math.round(ke.l*100);return this._a==1?"hsl("+Oe+", "+Ze+"%, "+bt+"%)":"hsla("+Oe+", "+Ze+"%, "+bt+"%, "+this._roundA+")"},toHex:function(ke){return M(this._r,this._g,this._b,ke)},toHexString:function(ke){return"#"+this.toHex(ke)},toHex8:function(ke){return B(this._r,this._g,this._b,this._a,ke)},toHex8String:function(ke){return"#"+this.toHex8(ke)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Fe(this._r,255)*100)+"%",g:Math.round(Fe(this._g,255)*100)+"%",b:Math.round(Fe(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Fe(this._r,255)*100)+"%, "+Math.round(Fe(this._g,255)*100)+"%, "+Math.round(Fe(this._b,255)*100)+"%)":"rgba("+Math.round(Fe(this._r,255)*100)+"%, "+Math.round(Fe(this._g,255)*100)+"%, "+Math.round(Fe(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Ee[M(this._r,this._g,this._b,!0)]||!1},toFilter:function(ke){var Oe="#"+P(this._r,this._g,this._b,this._a),Ze=Oe,bt=this._gradientType?"GradientType = 1, ":"";if(ke){var yt=o(ke);Ze="#"+P(yt._r,yt._g,yt._b,yt._a)}return"progid:DXImageTransform.Microsoft.gradient("+bt+"startColorstr="+Oe+",endColorstr="+Ze+")"},toString:function(ke){var Oe=!!ke;ke=ke||this._format;var Ze=!1,bt=this._a<1&&this._a>=0,yt=!Oe&&bt&&(ke==="hex"||ke==="hex6"||ke==="hex3"||ke==="hex4"||ke==="hex8"||ke==="name");return yt?ke==="name"&&this._a===0?this.toName():this.toRgbString():(ke==="rgb"&&(Ze=this.toRgbString()),ke==="prgb"&&(Ze=this.toPercentageRgbString()),(ke==="hex"||ke==="hex6")&&(Ze=this.toHexString()),ke==="hex3"&&(Ze=this.toHexString(!0)),ke==="hex4"&&(Ze=this.toHex8String(!0)),ke==="hex8"&&(Ze=this.toHex8String()),ke==="name"&&(Ze=this.toName()),ke==="hsl"&&(Ze=this.toHslString()),ke==="hsv"&&(Ze=this.toHsvString()),Ze||this.toHexString())},clone:function(){return o(this.toString())},_applyModification:function(ke,Oe){var Ze=ke.apply(null,[this].concat([].slice.call(Oe)));return this._r=Ze._r,this._g=Ze._g,this._b=Ze._b,this.setAlpha(Ze._a),this},lighten:function(){return this._applyModification(Z,arguments)},brighten:function(){return this._applyModification(X,arguments)},darken:function(){return this._applyModification(re,arguments)},desaturate:function(){return this._applyModification(U,arguments)},saturate:function(){return this._applyModification(z,arguments)},greyscale:function(){return this._applyModification(V,arguments)},spin:function(){return this._applyModification(ie,arguments)},_applyCombination:function(ke,Oe){return ke.apply(null,[this].concat([].slice.call(Oe)))},analogous:function(){return this._applyCombination(ce,arguments)},complement:function(){return this._applyCombination(te,arguments)},monochromatic:function(){return this._applyCombination(ve,arguments)},splitcomplement:function(){return this._applyCombination(le,arguments)},triad:function(){return this._applyCombination(q,[3])},tetrad:function(){return this._applyCombination(q,[4])}},o.fromRatio=function(Le,ke){if(t(Le)=="object"){var Oe={};for(var Ze in Le)Le.hasOwnProperty(Ze)&&(Ze==="a"?Oe[Ze]=Le[Ze]:Oe[Ze]=De(Le[Ze]));Le=Oe}return o(Le,ke)};function s(Le){var ke={r:0,g:0,b:0},Oe=1,Ze=null,bt=null,yt=null,Mt=!1,Kt=!1;return typeof Le=="string"&&(Le=kt(Le)),t(Le)=="object"&&(ut(Le.r)&&ut(Le.g)&&ut(Le.b)?(ke=a(Le.r,Le.g,Le.b),Mt=!0,Kt=String(Le.r).substr(-1)==="%"?"prgb":"rgb"):ut(Le.h)&&ut(Le.s)&&ut(Le.v)?(Ze=De(Le.s),bt=De(Le.v),ke=v(Le.h,Ze,bt),Mt=!0,Kt="hsv"):ut(Le.h)&&ut(Le.s)&&ut(Le.l)&&(Ze=De(Le.s),yt=De(Le.l),ke=d(Le.h,Ze,yt),Mt=!0,Kt="hsl"),Le.hasOwnProperty("a")&&(Oe=Le.a)),Oe=Te(Oe),{ok:Mt,format:Le.format||Kt,r:Math.min(255,Math.max(ke.r,0)),g:Math.min(255,Math.max(ke.g,0)),b:Math.min(255,Math.max(ke.b,0)),a:Oe}}function a(Le,ke,Oe){return{r:Fe(Le,255)*255,g:Fe(ke,255)*255,b:Fe(Oe,255)*255}}function c(Le,ke,Oe){Le=Fe(Le,255),ke=Fe(ke,255),Oe=Fe(Oe,255);var Ze=Math.max(Le,ke,Oe),bt=Math.min(Le,ke,Oe),yt,Mt,Kt=(Ze+bt)/2;if(Ze==bt)yt=Mt=0;else{var Dt=Ze-bt;switch(Mt=Kt>.5?Dt/(2-Ze-bt):Dt/(Ze+bt),Ze){case Le:yt=(ke-Oe)/Dt+(ke<Oe?6:0);break;case ke:yt=(Oe-Le)/Dt+2;break;case Oe:yt=(Le-ke)/Dt+4;break}yt/=6}return{h:yt,s:Mt,l:Kt}}function d(Le,ke,Oe){var Ze,bt,yt;Le=Fe(Le,360),ke=Fe(ke,100),Oe=Fe(Oe,100);function Mt(en,Gn,Nn){return Nn<0&&(Nn+=1),Nn>1&&(Nn-=1),Nn<1/6?en+(Gn-en)*6*Nn:Nn<1/2?Gn:Nn<2/3?en+(Gn-en)*(2/3-Nn)*6:en}if(ke===0)Ze=bt=yt=Oe;else{var Kt=Oe<.5?Oe*(1+ke):Oe+ke-Oe*ke,Dt=2*Oe-Kt;Ze=Mt(Dt,Kt,Le+1/3),bt=Mt(Dt,Kt,Le),yt=Mt(Dt,Kt,Le-1/3)}return{r:Ze*255,g:bt*255,b:yt*255}}function m(Le,ke,Oe){Le=Fe(Le,255),ke=Fe(ke,255),Oe=Fe(Oe,255);var Ze=Math.max(Le,ke,Oe),bt=Math.min(Le,ke,Oe),yt,Mt,Kt=Ze,Dt=Ze-bt;if(Mt=Ze===0?0:Dt/Ze,Ze==bt)yt=0;else{switch(Ze){case Le:yt=(ke-Oe)/Dt+(ke<Oe?6:0);break;case ke:yt=(Oe-Le)/Dt+2;break;case Oe:yt=(Le-ke)/Dt+4;break}yt/=6}return{h:yt,s:Mt,v:Kt}}function v(Le,ke,Oe){Le=Fe(Le,360)*6,ke=Fe(ke,100),Oe=Fe(Oe,100);var Ze=Math.floor(Le),bt=Le-Ze,yt=Oe*(1-ke),Mt=Oe*(1-bt*ke),Kt=Oe*(1-(1-bt)*ke),Dt=Ze%6,en=[Oe,Mt,yt,yt,Kt,Oe][Dt],Gn=[Kt,Oe,Oe,Mt,yt,yt][Dt],Nn=[yt,yt,Kt,Oe,Oe,Mt][Dt];return{r:en*255,g:Gn*255,b:Nn*255}}function M(Le,ke,Oe,Ze){var bt=[Ue(Math.round(Le).toString(16)),Ue(Math.round(ke).toString(16)),Ue(Math.round(Oe).toString(16))];return Ze&&bt[0].charAt(0)==bt[0].charAt(1)&&bt[1].charAt(0)==bt[1].charAt(1)&&bt[2].charAt(0)==bt[2].charAt(1)?bt[0].charAt(0)+bt[1].charAt(0)+bt[2].charAt(0):bt.join("")}function B(Le,ke,Oe,Ze,bt){var yt=[Ue(Math.round(Le).toString(16)),Ue(Math.round(ke).toString(16)),Ue(Math.round(Oe).toString(16)),Ue(Ge(Ze))];return bt&&yt[0].charAt(0)==yt[0].charAt(1)&&yt[1].charAt(0)==yt[1].charAt(1)&&yt[2].charAt(0)==yt[2].charAt(1)&&yt[3].charAt(0)==yt[3].charAt(1)?yt[0].charAt(0)+yt[1].charAt(0)+yt[2].charAt(0)+yt[3].charAt(0):yt.join("")}function P(Le,ke,Oe,Ze){var bt=[Ue(Ge(Ze)),Ue(Math.round(Le).toString(16)),Ue(Math.round(ke).toString(16)),Ue(Math.round(Oe).toString(16))];return bt.join("")}o.equals=function(Le,ke){return!Le||!ke?!1:o(Le).toRgbString()==o(ke).toRgbString()},o.random=function(){return o.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function U(Le,ke){ke=ke===0?0:ke||10;var Oe=o(Le).toHsl();return Oe.s-=ke/100,Oe.s=Ie(Oe.s),o(Oe)}function z(Le,ke){ke=ke===0?0:ke||10;var Oe=o(Le).toHsl();return Oe.s+=ke/100,Oe.s=Ie(Oe.s),o(Oe)}function V(Le){return o(Le).desaturate(100)}function Z(Le,ke){ke=ke===0?0:ke||10;var Oe=o(Le).toHsl();return Oe.l+=ke/100,Oe.l=Ie(Oe.l),o(Oe)}function X(Le,ke){ke=ke===0?0:ke||10;var Oe=o(Le).toRgb();return Oe.r=Math.max(0,Math.min(255,Oe.r-Math.round(255*-(ke/100)))),Oe.g=Math.max(0,Math.min(255,Oe.g-Math.round(255*-(ke/100)))),Oe.b=Math.max(0,Math.min(255,Oe.b-Math.round(255*-(ke/100)))),o(Oe)}function re(Le,ke){ke=ke===0?0:ke||10;var Oe=o(Le).toHsl();return Oe.l-=ke/100,Oe.l=Ie(Oe.l),o(Oe)}function ie(Le,ke){var Oe=o(Le).toHsl(),Ze=(Oe.h+ke)%360;return Oe.h=Ze<0?360+Ze:Ze,o(Oe)}function te(Le){var ke=o(Le).toHsl();return ke.h=(ke.h+180)%360,o(ke)}function q(Le,ke){if(isNaN(ke)||ke<=0)throw new Error("Argument to polyad must be a positive number");for(var Oe=o(Le).toHsl(),Ze=[o(Le)],bt=360/ke,yt=1;yt<ke;yt++)Ze.push(o({h:(Oe.h+yt*bt)%360,s:Oe.s,l:Oe.l}));return Ze}function le(Le){var ke=o(Le).toHsl(),Oe=ke.h;return[o(Le),o({h:(Oe+72)%360,s:ke.s,l:ke.l}),o({h:(Oe+216)%360,s:ke.s,l:ke.l})]}function ce(Le,ke,Oe){ke=ke||6,Oe=Oe||30;var Ze=o(Le).toHsl(),bt=360/Oe,yt=[o(Le)];for(Ze.h=(Ze.h-(bt*ke>>1)+720)%360;--ke;)Ze.h=(Ze.h+bt)%360,yt.push(o(Ze));return yt}function ve(Le,ke){ke=ke||6;for(var Oe=o(Le).toHsv(),Ze=Oe.h,bt=Oe.s,yt=Oe.v,Mt=[],Kt=1/ke;ke--;)Mt.push(o({h:Ze,s:bt,v:yt})),yt=(yt+Kt)%1;return Mt}o.mix=function(Le,ke,Oe){Oe=Oe===0?0:Oe||50;var Ze=o(Le).toRgb(),bt=o(ke).toRgb(),yt=Oe/100,Mt={r:(bt.r-Ze.r)*yt+Ze.r,g:(bt.g-Ze.g)*yt+Ze.g,b:(bt.b-Ze.b)*yt+Ze.b,a:(bt.a-Ze.a)*yt+Ze.a};return o(Mt)},o.readability=function(Le,ke){var Oe=o(Le),Ze=o(ke);return(Math.max(Oe.getLuminance(),Ze.getLuminance())+.05)/(Math.min(Oe.getLuminance(),Ze.getLuminance())+.05)},o.isReadable=function(Le,ke,Oe){var Ze=o.readability(Le,ke),bt,yt;switch(yt=!1,bt=Ut(Oe),bt.level+bt.size){case"AAsmall":case"AAAlarge":yt=Ze>=4.5;break;case"AAlarge":yt=Ze>=3;break;case"AAAsmall":yt=Ze>=7;break}return yt},o.mostReadable=function(Le,ke,Oe){var Ze=null,bt=0,yt,Mt,Kt,Dt;Oe=Oe||{},Mt=Oe.includeFallbackColors,Kt=Oe.level,Dt=Oe.size;for(var en=0;en<ke.length;en++)yt=o.readability(Le,ke[en]),yt>bt&&(bt=yt,Ze=o(ke[en]));return o.isReadable(Le,Ze,{level:Kt,size:Dt})||!Mt?Ze:(Oe.includeFallbackColors=!1,o.mostReadable(Le,["#fff","#000"],Oe))};var ge=o.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ee=o.hexNames=xe(ge);function xe(Le){var ke={};for(var Oe in Le)Le.hasOwnProperty(Oe)&&(ke[Le[Oe]]=Oe);return ke}function Te(Le){return Le=parseFloat(Le),(isNaN(Le)||Le<0||Le>1)&&(Le=1),Le}function Fe(Le,ke){At(Le)&&(Le="100%");var Oe=mt(Le);return Le=Math.min(ke,Math.max(0,parseFloat(Le))),Oe&&(Le=parseInt(Le*ke,10)/100),Math.abs(Le-ke)<1e-6?1:Le%ke/parseFloat(ke)}function Ie(Le){return Math.min(1,Math.max(0,Le))}function Ye(Le){return parseInt(Le,16)}function At(Le){return typeof Le=="string"&&Le.indexOf(".")!=-1&&parseFloat(Le)===1}function mt(Le){return typeof Le=="string"&&Le.indexOf("%")!=-1}function Ue(Le){return Le.length==1?"0"+Le:""+Le}function De(Le){return Le<=1&&(Le=Le*100+"%"),Le}function Ge(Le){return Math.round(parseFloat(Le)*255).toString(16)}function Re(Le){return Ye(Le)/255}var St=(function(){var Le="[-\\+]?\\d+%?",ke="[-\\+]?\\d*\\.\\d+%?",Oe="(?:"+ke+")|(?:"+Le+")",Ze="[\\s|\\(]+("+Oe+")[,|\\s]+("+Oe+")[,|\\s]+("+Oe+")\\s*\\)?",bt="[\\s|\\(]+("+Oe+")[,|\\s]+("+Oe+")[,|\\s]+("+Oe+")[,|\\s]+("+Oe+")\\s*\\)?";return{CSS_UNIT:new RegExp(Oe),rgb:new RegExp("rgb"+Ze),rgba:new RegExp("rgba"+bt),hsl:new RegExp("hsl"+Ze),hsla:new RegExp("hsla"+bt),hsv:new RegExp("hsv"+Ze),hsva:new RegExp("hsva"+bt),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function ut(Le){return!!St.CSS_UNIT.exec(Le)}function kt(Le){Le=Le.replace(i,"").replace(r,"").toLowerCase();var ke=!1;if(ge[Le])Le=ge[Le],ke=!0;else if(Le=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Oe;return(Oe=St.rgb.exec(Le))?{r:Oe[1],g:Oe[2],b:Oe[3]}:(Oe=St.rgba.exec(Le))?{r:Oe[1],g:Oe[2],b:Oe[3],a:Oe[4]}:(Oe=St.hsl.exec(Le))?{h:Oe[1],s:Oe[2],l:Oe[3]}:(Oe=St.hsla.exec(Le))?{h:Oe[1],s:Oe[2],l:Oe[3],a:Oe[4]}:(Oe=St.hsv.exec(Le))?{h:Oe[1],s:Oe[2],v:Oe[3]}:(Oe=St.hsva.exec(Le))?{h:Oe[1],s:Oe[2],v:Oe[3],a:Oe[4]}:(Oe=St.hex8.exec(Le))?{r:Ye(Oe[1]),g:Ye(Oe[2]),b:Ye(Oe[3]),a:Re(Oe[4]),format:ke?"name":"hex8"}:(Oe=St.hex6.exec(Le))?{r:Ye(Oe[1]),g:Ye(Oe[2]),b:Ye(Oe[3]),format:ke?"name":"hex"}:(Oe=St.hex4.exec(Le))?{r:Ye(Oe[1]+""+Oe[1]),g:Ye(Oe[2]+""+Oe[2]),b:Ye(Oe[3]+""+Oe[3]),a:Re(Oe[4]+""+Oe[4]),format:ke?"name":"hex8"}:(Oe=St.hex3.exec(Le))?{r:Ye(Oe[1]+""+Oe[1]),g:Ye(Oe[2]+""+Oe[2]),b:Ye(Oe[3]+""+Oe[3]),format:ke?"name":"hex"}:!1}function Ut(Le){var ke,Oe;return Le=Le||{level:"AA",size:"small"},ke=(Le.level||"AA").toUpperCase(),Oe=(Le.size||"small").toLowerCase(),ke!=="AA"&&ke!=="AAA"&&(ke="AA"),Oe!=="small"&&Oe!=="large"&&(Oe="small"),{level:ke,size:Oe}}return o}))})(KS)),KS.exports}var sH;function Rse(){if(sH)return wh;sH=1,Object.defineProperty(wh,"__esModule",{value:!0}),wh.isvalidColorString=wh.red=wh.getContrastingColor=wh.isValidHex=wh.toState=wh.simpleCheckForValidColor=void 0;var n=uDe(),e=r(n),t=ADe(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}wh.simpleCheckForValidColor=function(a){var c=["r","g","b","a","h","s","l","v"],d=0,m=0;return(0,e.default)(c,function(v){if(a[v]&&(d+=1,isNaN(a[v])||(m+=1),v==="s"||v==="l")){var M=/^\d+%$/;M.test(a[v])&&(m+=1)}}),d===m?a:!1};var o=wh.toState=function(a,c){var d=a.hex?(0,i.default)(a.hex):(0,i.default)(a),m=d.toHsl(),v=d.toHsv(),M=d.toRgb(),B=d.toHex();m.s===0&&(m.h=c||0,v.h=c||0);var P=B==="000000"&&M.a===0;return{hsl:m,hex:P?"transparent":"#"+B,rgb:M,hsv:v,oldHue:a.h||c||m.h,source:a.source}};return wh.isValidHex=function(a){if(a==="transparent")return!0;var c=String(a).charAt(0)==="#"?1:0;return a.length!==4+c&&a.length<7+c&&(0,i.default)(a).isValid()},wh.getContrastingColor=function(a){if(!a)return"#fff";var c=o(a);if(c.hex==="transparent")return"rgba(0,0,0,0.4)";var d=(c.rgb.r*299+c.rgb.g*587+c.rgb.b*114)/1e3;return d>=128?"#000":"#fff"},wh.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},wh.isvalidColorString=function(a,c){var d=a.replace("","");return(0,i.default)(c+" ("+d+")")._ok},wh}var aH;function hDe(){if(aH)return ox;aH=1,Object.defineProperty(ox,"__esModule",{value:!0}),ox.ColorWrap=void 0;var n=Object.assign||function(P){for(var U=1;U<arguments.length;U++){var z=arguments[U];for(var V in z)Object.prototype.hasOwnProperty.call(z,V)&&(P[V]=z[V])}return P},e=(function(){function P(U,z){for(var V=0;V<z.length;V++){var Z=z[V];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(U,Z.key,Z)}}return function(U,z,V){return z&&P(U.prototype,z),V&&P(U,V),U}})(),t=_a(),i=d(t),r=Dse(),o=d(r),s=Rse(),a=c(s);function c(P){if(P&&P.__esModule)return P;var U={};if(P!=null)for(var z in P)Object.prototype.hasOwnProperty.call(P,z)&&(U[z]=P[z]);return U.default=P,U}function d(P){return P&&P.__esModule?P:{default:P}}function m(P,U){if(!(P instanceof U))throw new TypeError("Cannot call a class as a function")}function v(P,U){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:P}function M(P,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);P.prototype=Object.create(U&&U.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(P,U):P.__proto__=U)}var B=ox.ColorWrap=function(U){var z=(function(V){M(Z,V);function Z(X){m(this,Z);var re=v(this,(Z.__proto__||Object.getPrototypeOf(Z)).call(this));return re.handleChange=function(ie,te){var q=a.simpleCheckForValidColor(ie);if(q){var le=a.toState(ie,ie.h||re.state.oldHue);re.setState(le),re.props.onChangeComplete&&re.debounce(re.props.onChangeComplete,le,te),re.props.onChange&&re.props.onChange(le,te)}},re.handleSwatchHover=function(ie,te){var q=a.simpleCheckForValidColor(ie);if(q){var le=a.toState(ie,ie.h||re.state.oldHue);re.props.onSwatchHover&&re.props.onSwatchHover(le,te)}},re.state=n({},a.toState(X.color,0)),re.debounce=(0,o.default)(function(ie,te,q){ie(te,q)},100),re}return e(Z,[{key:"render",value:function(){var re={};return this.props.onSwatchHover&&(re.onSwatchHover=this.handleSwatchHover),i.default.createElement(U,n({},this.props,this.state,{onChange:this.handleChange},re))}}],[{key:"getDerivedStateFromProps",value:function(re,ie){return n({},a.toState(re.color,ie.oldHue))}}]),Z})(t.PureComponent||t.Component);return z.propTypes=n({},U.propTypes),z.defaultProps=n({},U.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),z};return ox.default=B,ox}var sx={},L3={},lH;function dDe(){if(lH)return L3;lH=1,Object.defineProperty(L3,"__esModule",{value:!0}),L3.handleFocus=void 0;var n=Object.assign||function(c){for(var d=1;d<arguments.length;d++){var m=arguments[d];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(c[v]=m[v])}return c},e=(function(){function c(d,m){for(var v=0;v<m.length;v++){var M=m[v];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(d,M.key,M)}}return function(d,m,v){return m&&c(d.prototype,m),v&&c(d,v),d}})(),t=_a(),i=r(t);function r(c){return c&&c.__esModule?c:{default:c}}function o(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function s(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function a(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}return L3.handleFocus=function(d){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){a(M,v);function M(){var B,P,U,z;o(this,M);for(var V=arguments.length,Z=Array(V),X=0;X<V;X++)Z[X]=arguments[X];return z=(P=(U=s(this,(B=M.__proto__||Object.getPrototypeOf(M)).call.apply(B,[this].concat(Z))),U),U.state={focus:!1},U.handleFocus=function(){return U.setState({focus:!0})},U.handleBlur=function(){return U.setState({focus:!1})},P),s(U,z)}return e(M,[{key:"render",value:function(){return i.default.createElement(m,{onFocus:this.handleFocus,onBlur:this.handleBlur},i.default.createElement(d,n({},this.props,this.state)))}}]),M})(i.default.Component)},L3}var uH;function fDe(){if(uH)return sx;uH=1,Object.defineProperty(sx,"__esModule",{value:!0}),sx.Swatch=void 0;var n=Object.assign||function(v){for(var M=1;M<arguments.length;M++){var B=arguments[M];for(var P in B)Object.prototype.hasOwnProperty.call(B,P)&&(v[P]=B[P])}return v},e=_a(),t=c(e),i=Vm(),r=c(i),o=dDe(),s=oF(),a=c(s);function c(v){return v&&v.__esModule?v:{default:v}}var d=13,m=sx.Swatch=function(M){var B=M.color,P=M.style,U=M.onClick,z=U===void 0?function(){}:U,V=M.onHover,Z=M.title,X=Z===void 0?B:Z,re=M.children,ie=M.focus,te=M.focusStyle,q=te===void 0?{}:te,le=B==="transparent",ce=(0,r.default)({default:{swatch:n({background:B,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},P,ie?q:{})}}),ve=function(Fe){return z(B,Fe)},ge=function(Fe){return Fe.keyCode===d&&z(B,Fe)},Ee=function(Fe){return V(B,Fe)},xe={};return V&&(xe.onMouseOver=Ee),t.default.createElement("div",n({style:ce.swatch,onClick:ve,title:X,tabIndex:0,onKeyDown:ge},xe),re,le&&t.default.createElement(a.default,{borderRadius:ce.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};return sx.default=(0,o.handleFocus)(m),sx}var cH;function Pse(){return cH||(cH=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=H9e();Object.defineProperty(n,"Alpha",{enumerable:!0,get:function(){return d(e).default}});var t=oF();Object.defineProperty(n,"Checkboard",{enumerable:!0,get:function(){return d(t).default}});var i=Z9e();Object.defineProperty(n,"EditableInput",{enumerable:!0,get:function(){return d(i).default}});var r=J9e();Object.defineProperty(n,"Hue",{enumerable:!0,get:function(){return d(r).default}});var o=eDe();Object.defineProperty(n,"Raised",{enumerable:!0,get:function(){return d(o).default}});var s=aDe();Object.defineProperty(n,"Saturation",{enumerable:!0,get:function(){return d(s).default}});var a=hDe();Object.defineProperty(n,"ColorWrap",{enumerable:!0,get:function(){return d(a).default}});var c=fDe();Object.defineProperty(n,"Swatch",{enumerable:!0,get:function(){return d(c).default}});function d(m){return m&&m.__esModule?m:{default:m}}})(p9)),p9}var ax={},M9,AH;function pDe(){if(AH)return M9;AH=1;function n(e){return e===void 0}return M9=n,M9}var oS={},hH;function mDe(){if(hH)return oS;hH=1,Object.defineProperty(oS,"__esModule",{value:!0});var n=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(s[d]=c[d])}return s},e=_a(),t=i(e);function i(s){return s&&s.__esModule?s:{default:s}}function r(s,a){var c={};for(var d in s)a.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(s,d)&&(c[d]=s[d]);return c}var o=24;return oS.default=function(s){var a=s.fill,c=a===void 0?"currentColor":a,d=s.width,m=d===void 0?o:d,v=s.height,M=v===void 0?o:v,B=s.style,P=B===void 0?{}:B,U=r(s,["fill","width","height","style"]);return t.default.createElement("svg",n({viewBox:"0 0 "+o+" "+o,style:n({fill:c,width:m,height:M},P)},U),t.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},oS}var dH;function gDe(){if(dH)return ax;dH=1,Object.defineProperty(ax,"__esModule",{value:!0}),ax.ChromeFields=void 0;var n=(function(){function Z(X,re){for(var ie=0;ie<re.length;ie++){var te=re[ie];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(X,te.key,te)}}return function(X,re,ie){return re&&Z(X.prototype,re),ie&&Z(X,ie),X}})(),e=_a(),t=B(e),i=Vm(),r=B(i),o=Rse(),s=M(o),a=pDe(),c=B(a),d=Pse(),m=mDe(),v=B(m);function M(Z){if(Z&&Z.__esModule)return Z;var X={};if(Z!=null)for(var re in Z)Object.prototype.hasOwnProperty.call(Z,re)&&(X[re]=Z[re]);return X.default=Z,X}function B(Z){return Z&&Z.__esModule?Z:{default:Z}}function P(Z,X){if(!(Z instanceof X))throw new TypeError("Cannot call a class as a function")}function U(Z,X){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X&&(typeof X=="object"||typeof X=="function")?X:Z}function z(Z,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof X);Z.prototype=Object.create(X&&X.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,X):Z.__proto__=X)}var V=ax.ChromeFields=(function(Z){z(X,Z);function X(re){P(this,X);var ie=U(this,(X.__proto__||Object.getPrototypeOf(X)).call(this));return ie.toggleViews=function(){ie.state.view==="hex"?ie.setState({view:"rgb"}):ie.state.view==="rgb"?ie.setState({view:"hsl"}):ie.state.view==="hsl"&&(ie.props.hsl.a===1?ie.setState({view:"hex"}):ie.setState({view:"rgb"}))},ie.handleChange=function(te,q){te.hex?s.isValidHex(te.hex)&&ie.props.onChange({hex:te.hex,source:"hex"},q):te.r||te.g||te.b?ie.props.onChange({r:te.r||ie.props.rgb.r,g:te.g||ie.props.rgb.g,b:te.b||ie.props.rgb.b,source:"rgb"},q):te.a?(te.a<0?te.a=0:te.a>1&&(te.a=1),ie.props.onChange({h:ie.props.hsl.h,s:ie.props.hsl.s,l:ie.props.hsl.l,a:Math.round(te.a*100)/100,source:"rgb"},q)):(te.h||te.s||te.l)&&(typeof te.s=="string"&&te.s.includes("%")&&(te.s=te.s.replace("%","")),typeof te.l=="string"&&te.l.includes("%")&&(te.l=te.l.replace("%","")),te.s==1?te.s=.01:te.l==1&&(te.l=.01),ie.props.onChange({h:te.h||ie.props.hsl.h,s:Number((0,c.default)(te.s)?ie.props.hsl.s:te.s),l:Number((0,c.default)(te.l)?ie.props.hsl.l:te.l),source:"hsl"},q))},ie.showHighlight=function(te){te.currentTarget.style.background="#eee"},ie.hideHighlight=function(te){te.currentTarget.style.background="transparent"},re.hsl.a!==1&&re.view==="hex"?ie.state={view:"rgb"}:ie.state={view:re.view},ie}return n(X,[{key:"render",value:function(){var ie=this,te=(0,r.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),q=void 0;return this.state.view==="hex"?q=t.default.createElement("div",{style:te.fields,className:"flexbox-fix"},t.default.createElement("div",{style:te.field},t.default.createElement(d.EditableInput,{style:{input:te.input,label:te.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?q=t.default.createElement("div",{style:te.fields,className:"flexbox-fix"},t.default.createElement("div",{style:te.field},t.default.createElement(d.EditableInput,{style:{input:te.input,label:te.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),t.default.createElement("div",{style:te.field},t.default.createElement(d.EditableInput,{style:{input:te.input,label:te.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),t.default.createElement("div",{style:te.field},t.default.createElement(d.EditableInput,{style:{input:te.input,label:te.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),t.default.createElement("div",{style:te.alpha},t.default.createElement(d.EditableInput,{style:{input:te.input,label:te.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(q=t.default.createElement("div",{style:te.fields,className:"flexbox-fix"},t.default.createElement("div",{style:te.field},t.default.createElement(d.EditableInput,{style:{input:te.input,label:te.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),t.default.createElement("div",{style:te.field},t.default.createElement(d.EditableInput,{style:{input:te.input,label:te.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:te.field},t.default.createElement(d.EditableInput,{style:{input:te.input,label:te.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:te.alpha},t.default.createElement(d.EditableInput,{style:{input:te.input,label:te.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),t.default.createElement("div",{style:te.wrap,className:"flexbox-fix"},q,t.default.createElement("div",{style:te.toggle},t.default.createElement("div",{style:te.icon,onClick:this.toggleViews,ref:function(ce){return ie.icon=ce}},t.default.createElement(v.default,{style:te.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(ie,te){return ie.hsl.a!==1&&te.view==="hex"?{view:"rgb"}:null}}]),X})(t.default.Component);return V.defaultProps={view:"hex"},ax.default=V,ax}var lx={},fH;function yDe(){if(fH)return lx;fH=1,Object.defineProperty(lx,"__esModule",{value:!0}),lx.ChromePointer=void 0;var n=_a(),e=r(n),t=Vm(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}var o=lx.ChromePointer=function(){var a=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return e.default.createElement("div",{style:a.picker})};return lx.default=o,lx}var ux={},pH;function vDe(){if(pH)return ux;pH=1,Object.defineProperty(ux,"__esModule",{value:!0}),ux.ChromePointerCircle=void 0;var n=_a(),e=r(n),t=Vm(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}var o=ux.ChromePointerCircle=function(){var a=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return e.default.createElement("div",{style:a.picker})};return ux.default=o,ux}var mH;function bDe(){if(mH)return Y_;mH=1,Object.defineProperty(Y_,"__esModule",{value:!0}),Y_.Chrome=void 0;var n=_a(),e=U(n),t=Y1(),i=U(t),r=Vm(),o=U(r),s=kse(),a=U(s),c=Pse(),d=gDe(),m=U(d),v=yDe(),M=U(v),B=vDe(),P=U(B);function U(V){return V&&V.__esModule?V:{default:V}}var z=Y_.Chrome=function(Z){var X=Z.width,re=Z.onChange,ie=Z.disableAlpha,te=Z.rgb,q=Z.hsl,le=Z.hsv,ce=Z.hex,ve=Z.renderers,ge=Z.styles,Ee=ge===void 0?{}:ge,xe=Z.className,Te=xe===void 0?"":xe,Fe=Z.defaultView,Ie=(0,o.default)((0,a.default)({default:{picker:{width:X,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+te.r+", "+te.g+", "+te.b+", "+te.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},Ee),{disableAlpha:ie});return e.default.createElement("div",{style:Ie.picker,className:"chrome-picker "+Te},e.default.createElement("div",{style:Ie.saturation},e.default.createElement(c.Saturation,{style:Ie.Saturation,hsl:q,hsv:le,pointer:P.default,onChange:re})),e.default.createElement("div",{style:Ie.body},e.default.createElement("div",{style:Ie.controls,className:"flexbox-fix"},e.default.createElement("div",{style:Ie.color},e.default.createElement("div",{style:Ie.swatch},e.default.createElement("div",{style:Ie.active}),e.default.createElement(c.Checkboard,{renderers:ve}))),e.default.createElement("div",{style:Ie.toggles},e.default.createElement("div",{style:Ie.hue},e.default.createElement(c.Hue,{style:Ie.Hue,hsl:q,pointer:M.default,onChange:re})),e.default.createElement("div",{style:Ie.alpha},e.default.createElement(c.Alpha,{style:Ie.Alpha,rgb:te,hsl:q,pointer:M.default,renderers:ve,onChange:re})))),e.default.createElement(m.default,{rgb:te,hsl:q,hex:ce,view:Fe,onChange:re,disableAlpha:ie})))};return z.propTypes={width:i.default.oneOfType([i.default.string,i.default.number]),disableAlpha:i.default.bool,styles:i.default.object,defaultView:i.default.oneOf(["hex","rgb","hsl"])},z.defaultProps={width:225,disableAlpha:!1,styles:{}},Y_.default=(0,c.ColorWrap)(z),Y_}var CDe=bDe();const _De=vu(CDe);function yr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",e="04cff10f573f4461c1718b34a830d9c914f6fa95",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:23}},1:{start:{line:8,column:2},end:{line:8,column:56}},2:{start:{line:11,column:10},end:{line:13,column:3}},3:{start:{line:14,column:15},end:{line:14,column:19}},4:{start:{line:16,column:4},end:{line:16,column:17}},5:{start:{line:17,column:4},end:{line:17,column:75}},6:{start:{line:20,column:4},end:{line:20,column:27}},7:{start:{line:25,column:21},end:{line:39,column:3}},8:{start:{line:26,column:17},end:{line:26,column:32}},9:{start:{line:27,column:4},end:{line:38,column:5}},10:{start:{line:28,column:18},end:{line:28,column:46}},11:{start:{line:29,column:6},end:{line:32,column:8}},12:{start:{line:34,column:6},end:{line:37,column:8}},13:{start:{line:40,column:17},end:{line:42,column:3}},14:{start:{line:41,column:4},end:{line:41,column:62}},15:{start:{line:44,column:4},end:{line:49,column:5}},16:{start:{line:45,column:6},end:{line:45,column:43}},17:{start:{line:47,column:6},end:{line:47,column:49}},18:{start:{line:48,column:6},end:{line:48,column:39}},19:{start:{line:52,column:4},end:{line:52,column:47}},20:{start:{line:55,column:19},end:{line:55,column:42}},21:{start:{line:56,column:25},end:{line:56,column:44}},22:{start:{line:57,column:31},end:{line:63,column:5}},23:{start:{line:64,column:35},end:{line:99,column:5}},24:{start:{line:79,column:31},end:{line:79,column:67}},25:{start:{line:100,column:24},end:{line:102,column:5}},26:{start:{line:103,column:4},end:{line:124,column:9}},27:{start:{line:114,column:12},end:{line:114,column:36}},28:{start:{line:121,column:27},end:{line:121,column:56}}},fnMap:{0:{name:"formatColor",decl:{start:{line:6,column:9},end:{line:6,column:20}},loc:{start:{line:6,column:28},end:{line:9,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:21},end:{line:18,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:21,column:3}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:25,column:21},end:{line:25,column:22}},loc:{start:{line:25,column:27},end:{line:39,column:3}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:40,column:17},end:{line:40,column:18}},loc:{start:{line:40,column:23},end:{line:42,column:3}},line:40},5:{name:"(anonymous_5)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:14},end:{line:50,column:3}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:51,column:2},end:{line:51,column:3}},loc:{start:{line:51,column:14},end:{line:53,column:3}},line:51},7:{name:"(anonymous_7)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:125,column:3}},line:54},8:{name:"(anonymous_8)",decl:{start:{line:79,column:24},end:{line:79,column:25}},loc:{start:{line:79,column:31},end:{line:79,column:67}},line:79},9:{name:"(anonymous_9)",decl:{start:{line:113,column:15},end:{line:113,column:16}},loc:{start:{line:113,column:26},end:{line:115,column:11}},line:113},10:{name:"(anonymous_10)",decl:{start:{line:121,column:20},end:{line:121,column:21}},loc:{start:{line:121,column:27},end:{line:121,column:56}},line:121}},branchMap:{0:{loc:{start:{line:27,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:27,column:4},end:{line:38,column:5}},{start:{line:33,column:11},end:{line:38,column:5}}],line:27},1:{loc:{start:{line:52,column:24},end:{line:52,column:45}},type:"cond-expr",locations:[{start:{line:52,column:35},end:{line:52,column:41}},{start:{line:52,column:44},end:{line:52,column:45}}],line:52},2:{loc:{start:{line:104,column:6},end:{line:104,column:39}},type:"binary-expr",locations:[{start:{line:104,column:6},end:{line:104,column:29}},{start:{line:104,column:33},end:{line:104,column:39}}],line:104},3:{loc:{start:{line:120,column:17},end:{line:120,column:57}},type:"cond-expr",locations:[{start:{line:120,column:36},end:{line:120,column:52}},{start:{line:120,column:55},end:{line:120,column:57}}],line:120}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx"],names:[],mappings:"AAsFmB,SAQb,KARa;AAtFnB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AAEzB,OAAO,YAAY;AAEnB,SAAS,YAAY,OAA4B;AAC/C,QAAM,MAAM,MAAM;AAClB,SAAO,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC;AACpD;AAaA,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,QAAQ;AAAA,IACN,cAAc;AAAA,EAChB;AAAA,EACA,aAAsC;AAAA,EAEtC,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,kBAAkB,OAAO,SAAS,KAAK,iBAAiB,MAAK,EAAE;AAAA,EACtE;AAAA,EAEA,gBAAgB,GAAW;AACzB,SAAK,MAAM,SAAS,CAAC;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmB,MAAM;AACvB,UAAM,OAAO,KAAK;AAClB,QAAG,MAAM;AACP,YAAM,MAAM,KAAK,sBAAsB;AACvC,aAAO;AAAA,QACL,KAAK,IAAI;AAAA,QACT,MAAM,IAAI,OAAO;AAAA,MACnB;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,KAAK;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,MAAM;AACnB,SAAK,SAAS,EAAE,cAAc,CAAC,KAAK,MAAM,aAAa,CAAC;AAAA,EAC1D;AAAA,EAEA,IAAI,QAAQ;AAEV,QAAI;AACF,aAAO,MAAM,KAAK,MAAM,KAAK,EAAE,IAAI;AAAA,IACrC,SACM,KAAK;AACT,cAAQ,KAAK,yBAAyB,GAAG;AACzC,aAAO,MAAM,kBAAkB;AAAA,IACjC;AAAA,EACF;AAAA,EAEA,SAAU,GAAW;AACnB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,iBAAiB;AACrC,UAAM,eAAe,KAAK,MAAM,OAAO;AACvC,UAAM,qBAAqB;AAAA,MACzB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA;AAAA,MAEhB,GAAG,aAAa;AAAA,IAClB;AAEA,UAAM,SAAS;AAAA,MAAC;AAAA;AAAA,QACd,WAAU;AAAA,QACV,OAAO;AAAA,UACL,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,MAAM,OAAO;AAAA,UACb,KAAK,OAAO;AAAA,QACd;AAAA,QACA;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,gBAAgB,YAAY,CAAC,CAAC;AAAA;AAAA,UACpD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,OAAO;AAAA,gBACL,QAAQ;AAAA,gBACR,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,OAAO;AAAA,gBACP,QAAQ;AAAA,gBACR,MAAM;AAAA,cACR;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAEA,UAAM,cAAc;AAAA,MAClB,iBAAiB,KAAK,MAAM;AAAA,IAC9B;AAEA,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA,WAAK,MAAM,gBAAgB;AAAA,MAC5B,oBAAC,SAAI,WAAU,yBAAwB,OAAO,aAAa;AAAA,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,cAAa;AAAA,UACb,WAAU;AAAA,UACV,KAAK,CAAC,UAAU;AAAC,iBAAK,aAAa;AAAA,UAAM;AAAA,UACzC,SAAS,KAAK;AAAA,UACd,OAAO,KAAK,MAAM;AAAA,UAClB,MAAM,KAAK,MAAM;AAAA,UACjB,aAAa,KAAK,MAAM;AAAA,UACxB,OAAO,KAAK,MAAM,QAAQ,KAAK,MAAM,QAAQ;AAAA,UAC7C,UAAU,CAAC,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK;AAAA;AAAA,MAC/C;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"04cff10f573f4461c1718b34a830d9c914f6fa95"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return yr=function(){return s},s}yr();function xDe(n){yr().f[0]++;const e=(yr().s[0]++,n.rgb);return yr().s[1]++,`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}class sF extends In.Component{state=(yr().s[2]++,{pickerOpened:!1});colorInput=(yr().s[3]++,null);constructor(e){yr().f[1]++,yr().s[4]++,super(e),yr().s[5]++,this.onChangeNoCheck=D9.throttle(this.onChangeNoCheck,1e3/30)}onChangeNoCheck(e){yr().f[2]++,yr().s[6]++,this.props.onChange(e)}calcPickerOffset=(yr().s[7]++,()=>{yr().f[3]++;const e=(yr().s[8]++,this.colorInput);if(yr().s[9]++,e){yr().b[0][0]++;const t=(yr().s[10]++,e.getBoundingClientRect());return yr().s[11]++,{top:t.top,left:t.left+196}}else return yr().b[0][1]++,yr().s[12]++,{top:160,left:555}});togglePicker=(yr().s[13]++,()=>{yr().f[4]++,yr().s[14]++,this.setState({pickerOpened:!this.state.pickerOpened})});get color(){yr().f[5]++,yr().s[15]++;try{return yr().s[16]++,Ku(this.props.value).rgb()}catch(e){return yr().s[17]++,console.warn("Error parsing color: ",e),yr().s[18]++,Ku("rgb(255,255,255)")}}onChange(e){yr().f[6]++,yr().s[19]++,this.props.onChange(e===""?(yr().b[1][0]++,void 0):(yr().b[1][1]++,e))}render(){yr().f[7]++;const e=(yr().s[20]++,this.calcPickerOffset()),t=(yr().s[21]++,this.color.object()),i=(yr().s[22]++,{r:t.r,g:t.g,b:t.b,a:t.alpha}),r=(yr().s[23]++,oe.jsxs("div",{className:"maputnik-color-picker-offset",style:{position:"fixed",zIndex:1,left:e.left,top:e.top},children:[oe.jsx(_De,{color:i,onChange:s=>(yr().f[8]++,yr().s[24]++,this.onChangeNoCheck(xDe(s)))}),oe.jsx("div",{className:"maputnik-color-picker-offset",onClick:this.togglePicker,style:{zIndex:-1,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}})]})),o=(yr().s[25]++,{backgroundColor:this.props.value});return yr().s[26]++,oe.jsxs("div",{className:"maputnik-color-wrapper",children:[(yr().b[2][0]++,this.state.pickerOpened&&(yr().b[2][1]++,r)),oe.jsx("div",{className:"maputnik-color-swatch",style:o}),oe.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",autoComplete:"off",className:"maputnik-color",ref:s=>{yr().f[9]++,yr().s[27]++,this.colorInput=s},onClick:this.togglePicker,style:this.props.style,name:this.props.name,placeholder:this.props.default,value:this.props.value?(yr().b[3][0]++,this.props.value):(yr().b[3][1]++,""),onChange:s=>(yr().f[10]++,yr().s[28]++,this.onChange(s.target.value))})]})}}function Xt(){var n="/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",e="4f1ef08718bb93faa62aae09b5e3576a9aa3bb04",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:8,column:19},end:{line:8,column:24}},2:{start:{line:10,column:4},end:{line:10,column:17}},3:{start:{line:11,column:4},end:{line:16,column:6}},4:{start:{line:19,column:4},end:{line:24,column:5}},5:{start:{line:20,column:6},end:{line:23,column:8}},6:{start:{line:25,column:4},end:{line:25,column:16}},7:{start:{line:28,column:18},end:{line:28,column:77}},8:{start:{line:29,column:23},end:{line:29,column:49}},9:{start:{line:30,column:4},end:{line:39,column:5}},10:{start:{line:31,column:6},end:{line:31,column:58}},11:{start:{line:31,column:31},end:{line:31,column:58}},12:{start:{line:32,column:6},end:{line:34,column:9}},13:{start:{line:35,column:11},end:{line:39,column:5}},14:{start:{line:36,column:6},end:{line:38,column:9}},15:{start:{line:40,column:4},end:{line:42,column:7}},16:{start:{line:45,column:4},end:{line:47,column:5}},17:{start:{line:46,column:6},end:{line:46,column:18}},18:{start:{line:48,column:18},end:{line:48,column:20}},19:{start:{line:49,column:4},end:{line:51,column:5}},20:{start:{line:50,column:6},end:{line:50,column:19}},21:{start:{line:52,column:4},end:{line:54,column:5}},22:{start:{line:53,column:6},end:{line:53,column:19}},23:{start:{line:55,column:4},end:{line:57,column:5}},24:{start:{line:56,column:6},end:{line:56,column:19}},25:{start:{line:58,column:4},end:{line:58,column:16}},26:{start:{line:60,column:15},end:{line:74,column:3}},27:{start:{line:61,column:4},end:{line:61,column:38}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:13}},30:{start:{line:65,column:4},end:{line:73,column:5}},31:{start:{line:66,column:6},end:{line:72,column:7}},32:{start:{line:67,column:8},end:{line:67,column:43}},33:{start:{line:68,column:8},end:{line:68,column:56}},34:{start:{line:70,column:8},end:{line:70,column:33}},35:{start:{line:71,column:8},end:{line:71,column:46}},36:{start:{line:75,column:18},end:{line:100,column:3}},37:{start:{line:76,column:16},end:{line:76,column:42}},38:{start:{line:77,column:17},end:{line:77,column:37}},39:{start:{line:78,column:21},end:{line:78,column:26}},40:{start:{line:79,column:4},end:{line:95,column:5}},41:{start:{line:80,column:19},end:{line:80,column:31}},42:{start:{line:81,column:6},end:{line:94,column:7}},43:{start:{line:82,column:8},end:{line:86,column:9}},44:{start:{line:83,column:10},end:{line:83,column:42}},45:{start:{line:85,column:10},end:{line:85,column:42}},46:{start:{line:87,column:8},end:{line:87,column:27}},47:{start:{line:89,column:8},end:{line:93,column:9}},48:{start:{line:90,column:10},end:{line:90,column:31}},49:{start:{line:92,column:10},end:{line:92,column:40}},50:{start:{line:96,column:4},end:{line:96,column:32}},51:{start:{line:97,column:4},end:{line:97,column:70}},52:{start:{line:98,column:4},end:{line:98,column:41}},53:{start:{line:99,column:4},end:{line:99,column:56}},54:{start:{line:99,column:29},end:{line:99,column:56}},55:{start:{line:102,column:4},end:{line:185,column:5}},56:{start:{line:103,column:20},end:{line:103,column:81}},57:{start:{line:104,column:27},end:{line:104,column:82}},58:{start:{line:106,column:6},end:{line:110,column:7}},59:{start:{line:107,column:8},end:{line:107,column:38}},60:{start:{line:109,column:8},end:{line:109,column:27}},61:{start:{line:111,column:6},end:{line:165,column:11}},62:{start:{line:124,column:14},end:{line:124,column:41}},63:{start:{line:127,column:14},end:{line:127,column:67}},64:{start:{line:130,column:14},end:{line:130,column:69}},65:{start:{line:133,column:14},end:{line:137,column:17}},66:{start:{line:152,column:14},end:{line:152,column:47}},67:{start:{line:155,column:14},end:{line:155,column:47}},68:{start:{line:158,column:14},end:{line:158,column:48}},69:{start:{line:159,column:14},end:{line:159,column:32}},70:{start:{line:167,column:20},end:{line:167,column:81}},71:{start:{line:168,column:6},end:{line:184,column:8}},72:{start:{line:176,column:27},end:{line:176,column:59}},73:{start:{line:178,column:12},end:{line:178,column:45}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:21},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:26,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:24},end:{line:43,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:13},end:{line:59,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:60,column:15},end:{line:60,column:16}},loc:{start:{line:60,column:21},end:{line:74,column:3}},line:60},5:{name:"(anonymous_5)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:25},end:{line:100,column:3}},line:75},6:{name:"(anonymous_6)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:11},end:{line:186,column:3}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:123,column:23},end:{line:123,column:24}},loc:{start:{line:123,column:29},end:{line:125,column:13}},line:123},8:{name:"(anonymous_8)",decl:{start:{line:126,column:27},end:{line:126,column:28}},loc:{start:{line:126,column:33},end:{line:128,column:13}},line:126},9:{name:"(anonymous_9)",decl:{start:{line:129,column:25},end:{line:129,column:26}},loc:{start:{line:129,column:31},end:{line:131,column:13}},line:129},10:{name:"(anonymous_10)",decl:{start:{line:132,column:20},end:{line:132,column:21}},loc:{start:{line:132,column:26},end:{line:138,column:13}},line:132},11:{name:"(anonymous_11)",decl:{start:{line:151,column:21},end:{line:151,column:22}},loc:{start:{line:151,column:29},end:{line:153,column:13}},line:151},12:{name:"(anonymous_12)",decl:{start:{line:154,column:22},end:{line:154,column:23}},loc:{start:{line:154,column:29},end:{line:156,column:13}},line:154},13:{name:"(anonymous_13)",decl:{start:{line:157,column:20},end:{line:157,column:21}},loc:{start:{line:157,column:28},end:{line:160,column:13}},line:157},14:{name:"(anonymous_14)",decl:{start:{line:176,column:20},end:{line:176,column:21}},loc:{start:{line:176,column:27},end:{line:176,column:59}},line:176},15:{name:"(anonymous_15)",decl:{start:{line:177,column:19},end:{line:177,column:20}},loc:{start:{line:177,column:25},end:{line:179,column:11}},line:177}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:8},end:{line:19,column:53}},type:"binary-expr",locations:[{start:{line:19,column:8},end:{line:19,column:22}},{start:{line:19,column:26},end:{line:19,column:53}}],line:19},2:{loc:{start:{line:28,column:18},end:{line:28,column:77}},type:"cond-expr",locations:[{start:{line:28,column:59},end:{line:28,column:65}},{start:{line:28,column:68},end:{line:28,column:77}}],line:28},3:{loc:{start:{line:28,column:18},end:{line:28,column:56}},type:"binary-expr",locations:[{start:{line:28,column:18},end:{line:28,column:33}},{start:{line:28,column:37},end:{line:28,column:56}}],line:28},4:{loc:{start:{line:30,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:39,column:5}},{start:{line:35,column:11},end:{line:39,column:5}}],line:30},5:{loc:{start:{line:30,column:8},end:{line:30,column:41}},type:"binary-expr",locations:[{start:{line:30,column:8},end:{line:30,column:27}},{start:{line:30,column:31},end:{line:30,column:41}}],line:30},6:{loc:{start:{line:31,column:6},end:{line:31,column:58}},type:"if",locations:[{start:{line:31,column:6},end:{line:31,column:58}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},7:{loc:{start:{line:35,column:11},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:11},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},8:{loc:{start:{line:35,column:15},end:{line:35,column:49}},type:"binary-expr",locations:[{start:{line:35,column:15},end:{line:35,column:35}},{start:{line:35,column:39},end:{line:35,column:49}}],line:35},9:{loc:{start:{line:41,column:18},end:{line:41,column:53}},type:"cond-expr",locations:[{start:{line:41,column:36},end:{line:41,column:42}},{start:{line:41,column:45},end:{line:41,column:53}}],line:41},10:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},11:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},12:{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},13:{loc:{start:{line:52,column:8},end:{line:52,column:56}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:30}},{start:{line:52,column:34},end:{line:52,column:56}}],line:52},14:{loc:{start:{line:55,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:57,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},15:{loc:{start:{line:55,column:8},end:{line:55,column:56}},type:"binary-expr",locations:[{start:{line:55,column:8},end:{line:55,column:30}},{start:{line:55,column:34},end:{line:55,column:56}}],line:55},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:65,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:73,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},18:{loc:{start:{line:66,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:72,column:7}},{start:{line:69,column:13},end:{line:72,column:7}}],line:66},19:{loc:{start:{line:79,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},20:{loc:{start:{line:81,column:6},end:{line:94,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:94,column:7}},{start:{line:88,column:13},end:{line:94,column:7}}],line:81},21:{loc:{start:{line:82,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:82,column:8},end:{line:86,column:9}},{start:{line:84,column:15},end:{line:86,column:9}}],line:82},22:{loc:{start:{line:89,column:8},end:{line:93,column:9}},type:"if",locations:[{start:{line:89,column:8},end:{line:93,column:9}},{start:{line:91,column:15},end:{line:93,column:9}}],line:89},23:{loc:{start:{line:99,column:4},end:{line:99,column:56}},type:"if",locations:[{start:{line:99,column:4},end:{line:99,column:56}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:99},24:{loc:{start:{line:102,column:4},end:{line:185,column:5}},type:"if",locations:[{start:{line:102,column:4},end:{line:185,column:5}},{start:{line:166,column:11},end:{line:185,column:5}}],line:102},25:{loc:{start:{line:102,column:8},end:{line:102,column:205}},type:"binary-expr",locations:[{start:{line:102,column:8},end:{line:102,column:63}},{start:{line:102,column:67},end:{line:102,column:122}},{start:{line:102,column:126},end:{line:102,column:151}},{start:{line:102,column:155},end:{line:102,column:180}},{start:{line:102,column:184},end:{line:102,column:205}}],line:102},26:{loc:{start:{line:103,column:20},end:{line:103,column:81}},type:"cond-expr",locations:[{start:{line:103,column:41},end:{line:103,column:62}},{start:{line:103,column:65},end:{line:103,column:81}}],line:103},27:{loc:{start:{line:104,column:27},end:{line:104,column:82}},type:"cond-expr",locations:[{start:{line:104,column:59},end:{line:104,column:61}},{start:{line:104,column:64},end:{line:104,column:82}}],line:104},28:{loc:{start:{line:106,column:6},end:{line:110,column:7}},type:"if",locations:[{start:{line:106,column:6},end:{line:110,column:7}},{start:{line:108,column:13},end:{line:110,column:7}}],line:106},29:{loc:{start:{line:121,column:19},end:{line:121,column:58}},type:"cond-expr",locations:[{start:{line:121,column:38},end:{line:121,column:50}},{start:{line:121,column:53},end:{line:121,column:58}}],line:121},30:{loc:{start:{line:150,column:19},end:{line:150,column:58}},type:"cond-expr",locations:[{start:{line:150,column:43},end:{line:150,column:45}},{start:{line:150,column:48},end:{line:150,column:58}}],line:150},31:{loc:{start:{line:167,column:20},end:{line:167,column:81}},type:"cond-expr",locations:[{start:{line:167,column:41},end:{line:167,column:62}},{start:{line:167,column:65},end:{line:167,column:81}}],line:167},32:{loc:{start:{line:175,column:17},end:{line:175,column:46}},type:"cond-expr",locations:[{start:{line:175,column:36},end:{line:175,column:38}},{start:{line:175,column:41},end:{line:175,column:46}}],line:175}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0,0,0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx"],names:[],mappings:"AA8Ka,SACL,KADK;AA9Kb,OAAO,WAAwC;AAC/C,OAAO,sBAAsB;AA0B7B,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,WAAW;AAAA,EACb;AAAA,EACA,iBAA0B;AAAA,EAE1B,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM,CAAC,iBAAiB;AAAA,MACxB,SAAS;AAAA,MACT,OAAO,MAAM;AAAA,MACb,YAAY,MAAM;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,WAAW,MAAM,UAAU,MAAM,OAAO;AACjD,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,QACb,YAAY,MAAM;AAAA,MACpB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,YAAY,UAAuC;AACjD,UAAM,QAAS,aAAa,MAAM,aAAa,SAC7C,SAAY,CAAC;AAEf,UAAM,aAAa,KAAK,MAAM,UAAU;AACxC,QAAG,KAAK,QAAQ,KAAK,KAAK,YAAY;AACpC,UAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAClD,WAAK,SAAS;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH,WACS,CAAC,KAAK,QAAQ,KAAK,KAAK,YAAY;AAC3C,WAAK,SAAS;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,SAAK,SAAS;AAAA,MACZ,YAAY,aAAa,KAAK,SAAY;AAAA,IAC5C,CAAC;AAAA,EACH;AAAA,EAEA,QAAQ,GAAgC;AACtC,QAAI,MAAM,QAAW;AACnB,aAAO;AAAA,IACT;AAEA,UAAM,QAAQ,CAAC;AACf,QAAG,MAAM,KAAK,GAAG;AACf,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAE9B,QAAG,CAAC,KAAK,MAAM,OAAO;AACpB;AAAA,IACF;AAGA,QAAI,CAAC,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACnC,UAAG,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACjC,aAAK,YAAY,KAAK,MAAM,KAAK;AACjC,aAAK,SAAS,EAAC,YAAY,KAAK,MAAM,MAAK,CAAC;AAAA,MAC9C,OAAO;AACL,aAAK,YAAY,MAAS;AAC1B,aAAK,SAAS,EAAC,YAAY,OAAS,CAAC;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,MAAqE;AACpF,QAAI,QAAQ,WAAW,EAAE,OAAO,KAAK;AACrC,UAAM,OAAO,KAAK,MAAM;AACxB,QAAI,aAAa;AAEjB,QAAG,MAAM;AAEP,YAAM,OAAO,QAAQ;AAGrB,UAAI,KAAK,gBAAgB;AAKvB,YAAI,QAAQ,CAAC,KAAK,MAAM,YAAa;AACnC,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B,OACK;AACH,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B;AACA,qBAAa;AAAA,MACf,OACK;AACH,YAAI,OAAO,OAAK,GAAG;AACjB,kBAAQ,QAAQ;AAAA,QAClB,OACK;AACH,kBAAQ,SAAS,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,SAAK,iBAAiB;AAGtB,YAAQ,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,CAAC;AAElE,SAAK,SAAS,EAAC,OAAO,WAAU,CAAC;AACjC,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAAA,EACpD;AAAA,EAEA,SAAS;AACP,QACE,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,KAAK,MAAM,QAAQ,UAAa,KAAK,MAAM,QAAQ,UACnD,KAAK,MAAM,YACX;AACA,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AACtE,YAAM,eAAe,KAAK,MAAM,YAAY,SAAY,KAAK,KAAK,MAAM;AACxE,UAAI;AACJ,UAAI,KAAK,MAAM,cAAc;AAC3B,qBAAa,KAAK,MAAM;AAAA,MAC1B,OACK;AACH,qBAAa;AAAA,MACf;AAEA,aAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YAEV,MAAK;AAAA,YACL,KAAK,KAAK,MAAM;AAAA,YAChB,KAAK,KAAK,MAAM;AAAA,YAChB,MAAK;AAAA,YACL,YAAW;AAAA,YACX,OAAO,UAAU,SAAY,eAAe;AAAA,YAC5C,UAAU,KAAK;AAAA,YACf,WAAW,MAAM;AACf,mBAAK,iBAAiB;AAAA,YACxB;AAAA,YACA,eAAe,MAAM;AACnB,mBAAK,SAAS,EAAC,SAAS,MAAM,cAAc,KAAI,CAAC;AAAA,YACnD;AAAA,YACA,aAAa,MAAM;AAEjB,mBAAK,SAAS,EAAC,SAAS,OAAO,cAAc,MAAK,CAAC;AAAA,YACrD;AAAA,YACA,QAAQ,MAAM;AACZ,mBAAK,SAAS;AAAA,gBACZ,SAAS;AAAA,gBACT,cAAc;AAAA,gBACd,YAAY,KAAK,MAAM;AAAA,cACzB,CAAC;AAAA,YACH;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAzBrC;AAAA,QA0BN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,MAAK;AAAA,YACL,YAAW;AAAA,YACX,WAAU;AAAA,YACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,YAC1C,OAAO,eAAe,SAAY,KAAK;AAAA,YACvC,SAAS,QAAM;AACb,mBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,YAC/B;AAAA,YACA,UAAU,OAAK;AACb,mBAAK,YAAY,EAAE,OAAO,KAAK;AAAA,YACjC;AAAA,YACA,QAAQ,QAAM;AACZ,mBAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,mBAAK,WAAW;AAAA,YAClB;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAhBrC;AAAA,QAkBN;AAAA,SACF;AAAA,IACF,OACK;AACH,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AAEtE,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,WAAU;AAAA,UACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,UAC1C,OAAO,UAAU,SAAY,KAAK;AAAA,UAClC,UAAU,OAAK,KAAK,YAAY,EAAE,OAAO,KAAK;AAAA,UAC9C,SAAS,MAAM;AACb,iBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,UAC/B;AAAA,UACA,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK,MAAM;AAAA,UACrB,eAAa,KAAK,MAAM,aAAa;AAAA;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4f1ef08718bb93faa62aae09b5e3576a9aa3bb04"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Xt=function(){return s},s}Xt();class N1 extends In.Component{static defaultProps=(Xt().s[0]++,{rangeStep:1});_keyboardEvent=(Xt().s[1]++,!1);constructor(e){Xt().f[0]++,Xt().s[2]++,super(e),Xt().s[3]++,this.state={uuid:+B2(),editing:!1,value:e.value,dirtyValue:e.value}}static getDerivedStateFromProps(e,t){return Xt().f[1]++,Xt().s[4]++,Xt().b[1][0]++,!t.editing&&(Xt().b[1][1]++,e.value!==t.value)?(Xt().b[0][0]++,Xt().s[5]++,{value:e.value,dirtyValue:e.value}):(Xt().b[0][1]++,Xt().s[6]++,null)}changeValue(e){Xt().f[2]++;const t=(Xt().s[7]++,Xt().b[3][0]++,e===""||(Xt().b[3][1]++,e===void 0)?(Xt().b[2][0]++,void 0):(Xt().b[2][1]++,+e)),i=(Xt().s[8]++,this.props.value!==t);Xt().s[9]++,Xt().b[5][0]++,this.isValid(t)&&(Xt().b[5][1]++,i)?(Xt().b[4][0]++,Xt().s[10]++,this.props.onChange?(Xt().b[6][0]++,Xt().s[11]++,this.props.onChange(t)):Xt().b[6][1]++,Xt().s[12]++,this.setState({value:t})):(Xt().b[4][1]++,Xt().s[13]++,Xt().b[8][0]++,!this.isValid(t)&&(Xt().b[8][1]++,i)?(Xt().b[7][0]++,Xt().s[14]++,this.setState({value:void 0})):Xt().b[7][1]++),Xt().s[15]++,this.setState({dirtyValue:e===""?(Xt().b[9][0]++,void 0):(Xt().b[9][1]++,e)})}isValid(e){if(Xt().f[3]++,Xt().s[16]++,e===void 0)return Xt().b[10][0]++,Xt().s[17]++,!0;Xt().b[10][1]++;const t=(Xt().s[18]++,+e);return Xt().s[19]++,isNaN(t)?(Xt().b[11][0]++,Xt().s[20]++,!1):(Xt().b[11][1]++,Xt().s[21]++,Xt().b[13][0]++,!isNaN(this.props.min)&&(Xt().b[13][1]++,t<this.props.min)?(Xt().b[12][0]++,Xt().s[22]++,!1):(Xt().b[12][1]++,Xt().s[23]++,Xt().b[15][0]++,!isNaN(this.props.max)&&(Xt().b[15][1]++,t>this.props.max)?(Xt().b[14][0]++,Xt().s[24]++,!1):(Xt().b[14][1]++,Xt().s[25]++,!0)))}resetValue=(Xt().s[26]++,()=>{if(Xt().f[4]++,Xt().s[27]++,this.setState({editing:!1}),Xt().s[28]++,this.state.value)Xt().b[16][1]++;else{Xt().b[16][0]++,Xt().s[29]++;return}Xt().s[30]++,this.isValid(this.state.value)?Xt().b[17][1]++:(Xt().b[17][0]++,Xt().s[31]++,this.isValid(this.props.value)?(Xt().b[18][0]++,Xt().s[32]++,this.changeValue(this.props.value),Xt().s[33]++,this.setState({dirtyValue:this.props.value})):(Xt().b[18][1]++,Xt().s[34]++,this.changeValue(void 0),Xt().s[35]++,this.setState({dirtyValue:void 0})))});onChangeRange=(Xt().s[36]++,e=>{Xt().f[5]++;let t=(Xt().s[37]++,parseFloat(e.target.value));const i=(Xt().s[38]++,this.props.rangeStep);let r=(Xt().s[39]++,t);if(Xt().s[40]++,i){Xt().b[19][0]++;const o=(Xt().s[41]++,t%i);Xt().s[42]++,this._keyboardEvent?(Xt().b[20][0]++,Xt().s[43]++,t<+this.state.dirtyValue?(Xt().b[21][0]++,Xt().s[44]++,t=this.state.value-i):(Xt().b[21][1]++,Xt().s[45]++,t=this.state.value+i),Xt().s[46]++,r=t):(Xt().b[20][1]++,Xt().s[47]++,o<i/2?(Xt().b[22][0]++,Xt().s[48]++,t=t-o):(Xt().b[22][1]++,Xt().s[49]++,t=t+(i-o)))}else Xt().b[19][1]++;Xt().s[50]++,this._keyboardEvent=!1,Xt().s[51]++,t=Math.max(this.props.min,Math.min(this.props.max,t)),Xt().s[52]++,this.setState({value:t,dirtyValue:r}),Xt().s[53]++,this.props.onChange?(Xt().b[23][0]++,Xt().s[54]++,this.props.onChange(t)):Xt().b[23][1]++});render(){if(Xt().f[6]++,Xt().s[55]++,Xt().b[25][0]++,Object.prototype.hasOwnProperty.call(this.props,"min")&&(Xt().b[25][1]++,Object.prototype.hasOwnProperty.call(this.props,"max"))&&(Xt().b[25][2]++,this.props.min!==void 0)&&(Xt().b[25][3]++,this.props.max!==void 0)&&(Xt().b[25][4]++,this.props.allowRange)){Xt().b[24][0]++;const e=(Xt().s[56]++,this.state.editing?(Xt().b[26][0]++,this.state.dirtyValue):(Xt().b[26][1]++,this.state.value)),t=(Xt().s[57]++,this.props.default===void 0?(Xt().b[27][0]++,""):(Xt().b[27][1]++,this.props.default));let i;return Xt().s[58]++,this.state.editingRange?(Xt().b[28][0]++,Xt().s[59]++,i=this.state.value):(Xt().b[28][1]++,Xt().s[60]++,i=e),Xt().s[61]++,oe.jsxs("div",{className:"maputnik-number-container",children:[oe.jsx("input",{className:"maputnik-number-range",type:"range",max:this.props.max,min:this.props.min,step:"any",spellCheck:"false",value:e===void 0?(Xt().b[29][0]++,t):(Xt().b[29][1]++,e),onChange:this.onChangeRange,onKeyDown:()=>{Xt().f[7]++,Xt().s[62]++,this._keyboardEvent=!0},onPointerDown:()=>{Xt().f[8]++,Xt().s[63]++,this.setState({editing:!0,editingRange:!0})},onPointerUp:()=>{Xt().f[9]++,Xt().s[64]++,this.setState({editing:!1,editingRange:!1})},onBlur:()=>{Xt().f[10]++,Xt().s[65]++,this.setState({editing:!1,editingRange:!1,dirtyValue:this.state.value})},"data-wd-key":this.props["data-wd-key"]+"-range"},"range"),oe.jsx("input",{type:"text",spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:i===void 0?(Xt().b[30][0]++,""):(Xt().b[30][1]++,i),onFocus:r=>{Xt().f[11]++,Xt().s[66]++,this.setState({editing:!0})},onChange:r=>{Xt().f[12]++,Xt().s[67]++,this.changeValue(r.target.value)},onBlur:r=>{Xt().f[13]++,Xt().s[68]++,this.setState({editing:!1}),Xt().s[69]++,this.resetValue()},"data-wd-key":this.props["data-wd-key"]+"-text"},"text")]})}else{Xt().b[24][1]++;const e=(Xt().s[70]++,this.state.editing?(Xt().b[31][0]++,this.state.dirtyValue):(Xt().b[31][1]++,this.state.value));return Xt().s[71]++,oe.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:e===void 0?(Xt().b[32][0]++,""):(Xt().b[32][1]++,e),onChange:t=>(Xt().f[14]++,Xt().s[72]++,this.changeValue(t.target.value)),onFocus:()=>{Xt().f[15]++,Xt().s[73]++,this.setState({editing:!0})},onBlur:this.resetValue,required:this.props.required,"data-wd-key":this.props["data-wd-key"]})}}}function Z0(){var n="/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",e="e85f7924976070cbab7795bce9cf0e191e4a6b5e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",statementMap:{0:{start:{line:4,column:24},end:{line:6,column:3}},1:{start:{line:7,column:13},end:{line:9,column:3}},2:{start:{line:8,column:4},end:{line:8,column:43}},3:{start:{line:11,column:4},end:{line:26,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:27,column:3}},line:10}},branchMap:{0:{loc:{start:{line:24,column:17},end:{line:24,column:53}},type:"cond-expr",locations:[{start:{line:24,column:36},end:{line:24,column:44}},{start:{line:24,column:47},end:{line:24,column:53}}],line:24}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx"],names:[],mappings:"AAkBW,SACL,KADK;AAlBX,OAAO,WAAW;AAQlB,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,OAAO,eAAe;AAAA,IACpB,OAAO;AAAA,EACT;AAAA,EAEA,WAAW,MAAM;AACf,SAAK,MAAM,SAAS,CAAC,KAAK,MAAM,KAAK;AAAA,EACvC;AAAA,EAEA,SAAS;AACP,WAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,MAAK;AAAA,UACL,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,KAAK;AAAA,UACf,SAAS,KAAK;AAAA,UACd,SAAS,KAAK,MAAM;AAAA;AAAA,MACtB;AAAA,MACA,oBAAC,SAAI,WAAU,yBACb,8BAAC,SAAI,OAAO;AAAA,QACV,SAAS,KAAK,MAAM,QAAQ,WAAW;AAAA,MACzC,GAAG,WAAU,0BAAyB,SAAQ,aAC5C,8BAAC,UAAK,GAAE,2CAA0C,GACpD,GACF;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e85f7924976070cbab7795bce9cf0e191e4a6b5e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Z0=function(){return s},s}Z0();class Lse extends In.Component{static defaultProps=(Z0().s[0]++,{value:!1});onChange=(Z0().s[1]++,()=>{Z0().f[0]++,Z0().s[2]++,this.props.onChange(!this.props.value)});render(){return Z0().f[1]++,Z0().s[3]++,oe.jsxs("div",{className:"maputnik-checkbox-wrapper",children:[oe.jsx("input",{className:"maputnik-checkbox",type:"checkbox",style:this.props.style,onChange:this.onChange,onClick:this.onChange,checked:this.props.value}),oe.jsx("div",{className:"maputnik-checkbox-box",children:oe.jsx("svg",{style:{display:this.props.value?(Z0().b[0][0]++,"inline"):(Z0().b[0][1]++,"none")},className:"maputnik-checkbox-icon",viewBox:"0 0 32 32",children:oe.jsx("path",{d:"M1 14 L5 10 L13 18 L27 4 L31 8 L13 26 z"})})})]})}}function yi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",e="9ed81d69001830f70ea45ac1502cde5125167d89",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:11,column:17}},2:{start:{line:12,column:4},end:{line:16,column:6}},3:{start:{line:19,column:18},end:{line:19,column:20}},4:{start:{line:20,column:30},end:{line:20,column:62}},5:{start:{line:21,column:4},end:{line:28,column:7}},6:{start:{line:22,column:6},end:{line:27,column:7}},7:{start:{line:23,column:8},end:{line:23,column:34}},8:{start:{line:25,column:8},end:{line:25,column:34}},9:{start:{line:26,column:8},end:{line:26,column:46}},10:{start:{line:29,column:4},end:{line:32,column:6}},11:{start:{line:35,column:4},end:{line:38,column:7}},12:{start:{line:36,column:18},end:{line:36,column:26}},13:{start:{line:37,column:6},end:{line:37,column:45}},14:{start:{line:41,column:18},end:{line:41,column:43}},15:{start:{line:42,column:4},end:{line:42,column:26}},16:{start:{line:43,column:4},end:{line:51,column:7}},17:{start:{line:46,column:6},end:{line:50,column:7}},18:{start:{line:47,column:8},end:{line:47,column:35}},19:{start:{line:48,column:13},end:{line:50,column:7}},20:{start:{line:49,column:8},end:{line:49,column:36}},21:{start:{line:54,column:22},end:{line:54,column:32}},22:{start:{line:55,column:27},end:{line:57,column:6}},23:{start:{line:56,column:6},end:{line:56,column:42}},24:{start:{line:58,column:19},end:{line:84,column:6}},25:{start:{line:59,column:6},end:{line:83,column:7}},26:{start:{line:60,column:8},end:{line:70,column:10}},27:{start:{line:66,column:29},end:{line:66,column:51}},28:{start:{line:72,column:8},end:{line:82,column:10}},29:{start:{line:85,column:4},end:{line:85,column:89}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:21},end:{line:17,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:33,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:39},end:{line:21,column:40}},loc:{start:{line:21,column:49},end:{line:28,column:5}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:20},end:{line:39,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:35,column:53},end:{line:35,column:54}},loc:{start:{line:35,column:63},end:{line:38,column:5}},line:35},5:{name:"(anonymous_5)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:29},end:{line:52,column:3}},line:40},6:{name:"(anonymous_6)",decl:{start:{line:45,column:7},end:{line:45,column:8}},loc:{start:{line:45,column:13},end:{line:51,column:5}},line:45},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:86,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:55,column:60},end:{line:55,column:61}},loc:{start:{line:55,column:69},end:{line:57,column:5}},line:55},9:{name:"(anonymous_9)",decl:{start:{line:58,column:59},end:{line:58,column:60}},loc:{start:{line:58,column:69},end:{line:84,column:5}},line:58},10:{name:"(anonymous_10)",decl:{start:{line:66,column:22},end:{line:66,column:23}},loc:{start:{line:66,column:29},end:{line:66,column:51}},line:66}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:24,column:13},end:{line:27,column:7}}],line:22},1:{loc:{start:{line:37,column:15},end:{line:37,column:43}},type:"binary-expr",locations:[{start:{line:37,column:15},end:{line:37,column:29}},{start:{line:37,column:33},end:{line:37,column:43}}],line:37},2:{loc:{start:{line:46,column:6},end:{line:50,column:7}},type:"if",locations:[{start:{line:46,column:6},end:{line:50,column:7}},{start:{line:48,column:13},end:{line:50,column:7}}],line:46},3:{loc:{start:{line:46,column:10},end:{line:46,column:55}},type:"binary-expr",locations:[{start:{line:46,column:10},end:{line:46,column:32}},{start:{line:46,column:36},end:{line:46,column:55}}],line:46},4:{loc:{start:{line:48,column:13},end:{line:50,column:7}},type:"if",locations:[{start:{line:48,column:13},end:{line:50,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:55,column:27},end:{line:57,column:6}},type:"binary-expr",locations:[{start:{line:55,column:27},end:{line:55,column:43}},{start:{line:55,column:47},end:{line:57,column:6}}],line:55},6:{loc:{start:{line:56,column:13},end:{line:56,column:41}},type:"binary-expr",locations:[{start:{line:56,column:13},end:{line:56,column:23}},{start:{line:56,column:27},end:{line:56,column:41}}],line:56},7:{loc:{start:{line:59,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:59,column:6},end:{line:83,column:7}},{start:{line:71,column:13},end:{line:83,column:7}}],line:59},8:{loc:{start:{line:63,column:21},end:{line:63,column:91}},type:"cond-expr",locations:[{start:{line:63,column:61},end:{line:63,column:67}},{start:{line:63,column:70},end:{line:63,column:91}}],line:63},9:{loc:{start:{line:63,column:21},end:{line:63,column:58}},type:"binary-expr",locations:[{start:{line:63,column:21},end:{line:63,column:35}},{start:{line:63,column:39},end:{line:63,column:58}}],line:63},10:{loc:{start:{line:65,column:22},end:{line:65,column:51}},type:"cond-expr",locations:[{start:{line:65,column:39},end:{line:65,column:43}},{start:{line:65,column:46},end:{line:65,column:51}}],line:65},11:{loc:{start:{line:67,column:26},end:{line:67,column:70}},type:"binary-expr",locations:[{start:{line:67,column:26},end:{line:67,column:50}},{start:{line:67,column:54},end:{line:67,column:70}}],line:67},12:{loc:{start:{line:75,column:21},end:{line:75,column:91}},type:"cond-expr",locations:[{start:{line:75,column:61},end:{line:75,column:67}},{start:{line:75,column:70},end:{line:75,column:91}}],line:75},13:{loc:{start:{line:75,column:21},end:{line:75,column:58}},type:"binary-expr",locations:[{start:{line:75,column:21},end:{line:75,column:35}},{start:{line:75,column:39},end:{line:75,column:58}}],line:75},14:{loc:{start:{line:77,column:22},end:{line:77,column:51}},type:"cond-expr",locations:[{start:{line:77,column:39},end:{line:77,column:43}},{start:{line:77,column:46},end:{line:77,column:51}}],line:77},15:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx"],names:[],mappings:"AA0Fe;AA1Ff,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AAiBxB,qBAAqB,mBAAmB,MAAM,UAA4C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,IACR,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA;AAAA,MAE/B,mBAAmB,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAkC,OAAwB;AACxF,UAAM,QAAe,CAAC;AACtB,UAAM,oBAAoB,MAAM,kBAAkB,MAAM,CAAC;AAEzD,UAAM,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC3C,UAAI,MAAM,MAAM,CAAC,MAAM,MAAM,kBAAkB,CAAC,GAAG;AACjD,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MAC1B,OACK;AACH,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AACxB,0BAAkB,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MACtC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,OAAkB;AAC3B,WAAO,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,MAAM,CAAC,GAAG,MAAM;AACzD,YAAM,MAAM,MAAM,CAAC;AACnB,aAAO,EAAE,QAAQ,UAAa,QAAQ;AAAA,IACxC,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,KAAa,UAAuC;AAC9D,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,CAAC;AACtC,UAAM,GAAG,IAAI;AAEb,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,UAAU;AACjD,aAAK,MAAM,SAAS,KAAK;AAAA,MAC3B,WACS,KAAK,MAAM,UAAS;AAE3B,aAAK,MAAM,SAAS,MAAS;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,UAAM,iBACJ,MAAM,SAAS,KACf,CAAC,MAAM,MAAM,SAAO;AAClB,aAAQ,QAAQ,MAAM,QAAQ;AAAA,IAChC,CAAC;AAGH,UAAM,SAAS,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC/D,UAAG,KAAK,MAAM,SAAS,UAAU;AAC/B,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,CAAC,MAAM,KAAK,YAAY,GAAG,CAAC;AAAA,YACtC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF,OAAO;AACL,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF;AAAA,IACF,CAAC;AAED,WACE,oBAAC,SAAI,WAAU,kBACZ,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9ed81d69001830f70ea45ac1502cde5125167d89"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return yi=function(){return s},s}yi();class mP extends In.Component{static defaultProps=(yi().s[0]++,{value:[],default:[]});constructor(e){yi().f[0]++,yi().s[1]++,super(e),yi().s[2]++,this.state={value:this.props.value.slice(0),initialPropsValue:this.props.value.slice(0)}}static getDerivedStateFromProps(e,t){yi().f[1]++;const i=(yi().s[3]++,[]),r=(yi().s[4]++,t.initialPropsValue.slice(0));return yi().s[5]++,Array(e.length).fill(null).map((o,s)=>{yi().f[2]++,yi().s[6]++,e.value[s]===t.initialPropsValue[s]?(yi().b[0][0]++,yi().s[7]++,i[s]=t.value[s]):(yi().b[0][1]++,yi().s[8]++,i[s]=t.value[s],yi().s[9]++,r[s]=t.value[s])}),yi().s[10]++,{value:i,initialPropsValue:r}}isComplete(e){return yi().f[3]++,yi().s[11]++,Array(this.props.length).fill(null).every((t,i)=>{yi().f[4]++;const r=(yi().s[12]++,e[i]);return yi().s[13]++,yi().b[1][0]++,!(r===void 0||(yi().b[1][1]++,r===""))})}changeValue(e,t){yi().f[5]++;const i=(yi().s[14]++,this.state.value.slice(0));yi().s[15]++,i[e]=t,yi().s[16]++,this.setState({value:i},()=>{yi().f[6]++,yi().s[17]++,yi().b[3][0]++,this.isComplete(i)&&(yi().b[3][1]++,this.props.onChange)?(yi().b[2][0]++,yi().s[18]++,this.props.onChange(i)):(yi().b[2][1]++,yi().s[19]++,this.props.onChange?(yi().b[4][0]++,yi().s[20]++,this.props.onChange(void 0)):yi().b[4][1]++)})}render(){yi().f[7]++;const{value:e}=(yi().s[21]++,this.state),t=(yi().s[22]++,yi().b[5][0]++,e.length>0&&(yi().b[5][1]++,!e.every(r=>(yi().f[8]++,yi().s[23]++,yi().b[6][0]++,r===""||(yi().b[6][1]++,r===void 0))))),i=(yi().s[24]++,Array(this.props.length).fill(null).map((r,o)=>(yi().f[9]++,yi().s[25]++,this.props.type==="number"?(yi().b[7][0]++,yi().s[26]++,oe.jsx(N1,{default:(yi().b[9][0]++,t||(yi().b[9][1]++,!this.props.default)?(yi().b[8][0]++,void 0):(yi().b[8][1]++,this.props.default[o])),value:e[o],required:t?(yi().b[10][0]++,!0):(yi().b[10][1]++,!1),onChange:s=>(yi().f[10]++,yi().s[27]++,this.changeValue(o,s)),"aria-label":(yi().b[11][0]++,this.props["aria-label"]||(yi().b[11][1]++,this.props.label))},o)):(yi().b[7][1]++,yi().s[28]++,oe.jsx(Fm,{default:(yi().b[13][0]++,t||(yi().b[13][1]++,!this.props.default)?(yi().b[12][0]++,void 0):(yi().b[12][1]++,this.props.default[o])),value:e[o],required:t?(yi().b[14][0]++,!0):(yi().b[14][1]++,!1),onChange:this.changeValue.bind(this,o),"aria-label":(yi().b[15][0]++,this.props["aria-label"]||(yi().b[15][1]++,this.props.label))},o)))));return yi().s[29]++,oe.jsx("div",{className:"maputnik-array",children:i})}}function fu(){var n="/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",e="bdd7d8430a2c43402b1b125b74a343e39aea6a6c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",statementMap:{0:{start:{line:6,column:18},end:{line:6,column:36}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:43}},3:{start:{line:8,column:35},end:{line:8,column:41}},4:{start:{line:10,column:26},end:{line:10,column:59}},5:{start:{line:11,column:19},end:{line:32,column:6}},6:{start:{line:12,column:6},end:{line:31,column:8}},7:{start:{line:22,column:34},end:{line:22,column:58}},8:{start:{line:33,column:4},end:{line:33,column:140}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:34,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:8,column:28},end:{line:8,column:29}},loc:{start:{line:8,column:35},end:{line:8,column:41}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:31},end:{line:11,column:32}},loc:{start:{line:11,column:49},end:{line:32,column:5}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:26},end:{line:22,column:27}},loc:{start:{line:22,column:34},end:{line:22,column:58}},line:22}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:7,column:8},end:{line:7,column:56}},type:"binary-expr",locations:[{start:{line:7,column:8},end:{line:7,column:26}},{start:{line:7,column:30},end:{line:7,column:56}}],line:7},2:{loc:{start:{line:10,column:26},end:{line:10,column:59}},type:"binary-expr",locations:[{start:{line:10,column:26},end:{line:10,column:42}},{start:{line:10,column:46},end:{line:10,column:59}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx"],names:[],mappings:"AAoBa,SAIL,KAJK;AApBb,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAUvB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,IACnC;AAEA,UAAM,gBAAgB,KAAK,MAAM,SAAS,QAAQ,CAAC,EAAE,CAAC;AACtD,UAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAK;AAC1C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,WAAW,WAAW,mBAAmB,4BAA4B,EAAC,4BAA4B,QAAQ,cAAa,CAAC;AAAA,UAExH;AAAA;AAAA,cAAC;AAAA;AAAA,gBAAM,MAAK;AAAA,gBACV,MAAM,KAAK,MAAM;AAAA,gBACjB,UAAU,QAAM,KAAK,MAAM,SAAS,GAAG;AAAA,gBACvC,OAAO;AAAA,gBACP,SAAS,QAAQ;AAAA;AAAA,YACnB;AAAA,YACC;AAAA;AAAA;AAAA,QATI;AAAA,MAUP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,cAAS,WAAU,wBAAuB,cAAY,KAAK,MAAM,YAAY,GAClF,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bdd7d8430a2c43402b1b125b74a343e39aea6a6c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return fu=function(){return s},s}fu();class MDe extends In.Component{render(){fu().f[0]++;let e=(fu().s[0]++,this.props.options);fu().s[1]++,fu().b[1][0]++,e.length>0&&(fu().b[1][1]++,!Array.isArray(e[0]))?(fu().b[0][0]++,fu().s[2]++,e=e.map(r=>(fu().f[1]++,fu().s[3]++,[r,r]))):fu().b[0][1]++;const t=(fu().s[4]++,fu().b[2][0]++,this.props.value||(fu().b[2][1]++,e[0][0])),i=(fu().s[5]++,e.map(([r,o])=>(fu().f[2]++,fu().s[6]++,oe.jsxs("label",{className:Ig("maputnik-button","maputnik-radio-as-button",{"maputnik-button-selected":r===t}),children:[oe.jsx("input",{type:"radio",name:this.props.name,onChange:s=>(fu().f[3]++,fu().s[7]++,this.props.onChange(r)),value:r,checked:r===t}),o]},r))));return fu().s[8]++,oe.jsx("fieldset",{className:"maputnik-multibutton","aria-label":this.props["aria-label"],children:i})}}function qa(){var n="/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",e="d905b5da4422f2b84d44f87b04fda3de421542f5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",statementMap:{0:{start:{line:6,column:12},end:{line:6,column:13}},1:{start:{line:7,column:2},end:{line:9,column:5}},2:{start:{line:8,column:4},end:{line:8,column:24}},3:{start:{line:10,column:2},end:{line:10,column:13}},4:{start:{line:14,column:54},end:{line:14,column:64}},5:{start:{line:15,column:4},end:{line:36,column:5}},6:{start:{line:16,column:6},end:{line:25,column:8}},7:{start:{line:27,column:6},end:{line:35,column:8}}},fnMap:{0:{name:"optionsLabelLength",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:37},end:{line:11,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:34},end:{line:9,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:37,column:3}},line:13}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:15},1:{loc:{start:{line:15,column:8},end:{line:15,column:64}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:27}},{start:{line:15,column:31},end:{line:15,column:64}}],line:15},2:{loc:{start:{line:21,column:17},end:{line:21,column:44}},type:"binary-expr",locations:[{start:{line:21,column:17},end:{line:21,column:22}},{start:{line:21,column:26},end:{line:21,column:44}}],line:21},3:{loc:{start:{line:23,column:24},end:{line:23,column:57}},type:"binary-expr",locations:[{start:{line:23,column:24},end:{line:23,column:48}},{start:{line:23,column:52},end:{line:23,column:57}}],line:23},4:{loc:{start:{line:31,column:17},end:{line:31,column:44}},type:"binary-expr",locations:[{start:{line:31,column:17},end:{line:31,column:22}},{start:{line:31,column:26},end:{line:31,column:44}}],line:31},5:{loc:{start:{line:33,column:24},end:{line:33,column:57}},type:"binary-expr",locations:[{start:{line:33,column:24},end:{line:33,column:48}},{start:{line:33,column:52},end:{line:33,column:57}}],line:33}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx"],names:[],mappings:"AAgCa;AAhCb,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,qBAAqB;AAG5B,SAAS,mBAAmB,SAAgB;AAC1C,MAAI,MAAM;AACV,UAAQ,QAAQ,CAAC,CAAC,GAAG,KAAK,MAAM;AAC9B,WAAO,MAAM;AAAA,EACf,CAAC;AACD,SAAO;AACT;AAgBA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,EAAC,SAAS,OAAO,UAAU,MAAM,MAAK,IAAI,KAAK;AAErD,QAAG,QAAQ,UAAU,KAAK,mBAAmB,OAAO,KAAK,IAAI;AAC3D,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d905b5da4422f2b84d44f87b04fda3de421542f5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return qa=function(){return s},s}qa();function wDe(n){qa().f[0]++;let e=(qa().s[0]++,0);return qa().s[1]++,n.forEach(([t,i])=>{qa().f[1]++,qa().s[2]++,e+=i.length}),qa().s[3]++,e}class aF extends In.Component{render(){qa().f[2]++;const{options:e,value:t,onChange:i,name:r,label:o}=(qa().s[4]++,this.props);return qa().s[5]++,qa().b[1][0]++,e.length<=3&&(qa().b[1][1]++,wDe(e)<=20)?(qa().b[0][0]++,qa().s[6]++,oe.jsx(MDe,{name:r,options:e,value:(qa().b[2][0]++,t||(qa().b[2][1]++,this.props.default)),onChange:i,"aria-label":(qa().b[3][0]++,this.props["aria-label"]||(qa().b[3][1]++,o))})):(qa().b[0][1]++,qa().s[7]++,oe.jsx(HC,{options:e,value:(qa().b[4][0]++,t||(qa().b[4][1]++,this.props.default)),onChange:i,"aria-label":(qa().b[5][0]++,this.props["aria-label"]||(qa().b[5][1]++,o))}))}}function n2(){var n="/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",e="f693e5bbe9d7e0de15b6fd90f13b77a5ebfddf0e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:4},end:{line:12,column:9}},2:{start:{line:15,column:19},end:{line:15,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:13,column:3}},line:6}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AACtD,OAAO;AAOP,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAU;AACR,UAAM,IAAI,KAAK,MAAM;AACrB,WACE,qBAAC,SAAI,WAAU,cACZ;AAAA,QAAE,QAAQ;AAAA,MAAE;AAAA,MAAE,KAAK,MAAM;AAAA,OAC5B;AAAA,EAEJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f693e5bbe9d7e0de15b6fd90f13b77a5ebfddf0e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return n2=function(){return s},s}n2();class SDe extends In.Component{render(){n2().f[0]++;const e=(n2().s[0]++,this.props.t);return n2().s[1]++,oe.jsxs("div",{className:"SmallError",children:[e("Error:")," ",this.props.children]})}}const w9=(n2().s[2]++,Do()(SDe)),EDe="get_your_own_OpIi9ZULNHzrESv6T2vL",BDe="b71f7f0ba4064f5eb9e903859a9cf5c6",ODe="pk.put_your_api_key_here7bb23dffeb4",Use={openmaptiles:EDe,thunderforest:BDe,locationiq:ODe};function En(){var n="/home/runner/work/maputnik/maputnik/src/libs/style.ts",e="16e079a55cdd4175ffeada8708d6c49d219f1229",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/style.ts",statementMap:{0:{start:{line:3,column:19},end:{line:7,column:2}},1:{start:{line:9,column:2},end:{line:9,column:52}},2:{start:{line:12,column:2},end:{line:14,column:3}},3:{start:{line:13,column:4},end:{line:13,column:28}},4:{start:{line:15,column:2},end:{line:15,column:15}},5:{start:{line:18,column:24},end:{line:22,column:4}},6:{start:{line:19,column:25},end:{line:19,column:37}},7:{start:{line:20,column:4},end:{line:20,column:36}},8:{start:{line:21,column:4},end:{line:21,column:24}},9:{start:{line:23,column:2},end:{line:26,column:4}},10:{start:{line:29,column:2},end:{line:32,column:4}},11:{start:{line:35,column:2},end:{line:35,column:69}},12:{start:{line:38,column:2},end:{line:42,column:3}},13:{start:{line:38,column:15},end:{line:38,column:16}},14:{start:{line:39,column:4},end:{line:41,column:5}},15:{start:{line:40,column:6},end:{line:40,column:15}},16:{start:{line:43,column:2},end:{line:43,column:14}},17:{start:{line:46,column:19},end:{line:46,column:42}},18:{start:{line:47,column:20},end:{line:47,column:67}},19:{start:{line:48,column:2},end:{line:50,column:3}},20:{start:{line:49,column:4},end:{line:49,column:37}},21:{start:{line:51,column:2},end:{line:51,column:21}},22:{start:{line:54,column:17},end:{line:54,column:45}},23:{start:{line:55,column:2},end:{line:55,column:31}},24:{start:{line:55,column:15},end:{line:55,column:31}},25:{start:{line:56,column:2},end:{line:56,column:57}},26:{start:{line:56,column:41},end:{line:56,column:57}},27:{start:{line:57,column:23},end:{line:57,column:33}},28:{start:{line:58,column:2},end:{line:64,column:3}},29:{start:{line:59,column:4},end:{line:59,column:37}},30:{start:{line:60,column:9},end:{line:64,column:3}},31:{start:{line:61,column:4},end:{line:61,column:30}},32:{start:{line:62,column:9},end:{line:64,column:3}},33:{start:{line:63,column:4},end:{line:63,column:34}},34:{start:{line:65,column:22},end:{line:65,column:68}},35:{start:{line:66,column:2},end:{line:68,column:3}},36:{start:{line:67,column:4},end:{line:67,column:20}},37:{start:{line:70,column:2},end:{line:74,column:3}},38:{start:{line:71,column:4},end:{line:71,column:55}},39:{start:{line:73,column:4},end:{line:73,column:57}},40:{start:{line:75,column:25},end:{line:81,column:3}},41:{start:{line:82,column:23},end:{line:85,column:3}},42:{start:{line:86,column:2},end:{line:86,column:22}},43:{start:{line:89,column:21},end:{line:89,column:29}},44:{start:{line:90,column:2},end:{line:92,column:5}},45:{start:{line:91,column:4},end:{line:91,column:76}},46:{start:{line:93,column:2},end:{line:101,column:3}},47:{start:{line:94,column:27},end:{line:94,column:73}},48:{start:{line:95,column:4},end:{line:100,column:5}},49:{start:{line:96,column:6},end:{line:99,column:8}},50:{start:{line:102,column:2},end:{line:102,column:22}},51:{start:{line:105,column:26},end:{line:107,column:3}},52:{start:{line:108,column:2},end:{line:108,column:63}},53:{start:{line:109,column:2},end:{line:109,column:64}},54:{start:{line:110,column:2},end:{line:110,column:57}},55:{start:{line:111,column:2},end:{line:111,column:61}},56:{start:{line:112,column:2},end:{line:115,column:4}}},fnMap:{0:{name:"generateId",decl:{start:{line:8,column:9},end:{line:8,column:19}},loc:{start:{line:8,column:22},end:{line:10,column:1}},line:8},1:{name:"ensureHasId",decl:{start:{line:11,column:9},end:{line:11,column:20}},loc:{start:{line:11,column:28},end:{line:16,column:1}},line:11},2:{name:"ensureHasNoInteractive",decl:{start:{line:17,column:9},end:{line:17,column:31}},loc:{start:{line:17,column:39},end:{line:27,column:1}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:18,column:41},end:{line:18,column:42}},loc:{start:{line:18,column:52},end:{line:22,column:3}},line:18},4:{name:"ensureHasNoRefs",decl:{start:{line:28,column:9},end:{line:28,column:24}},loc:{start:{line:28,column:32},end:{line:33,column:1}},line:28},5:{name:"ensureStyleValidity",decl:{start:{line:34,column:9},end:{line:34,column:28}},loc:{start:{line:34,column:36},end:{line:36,column:1}},line:34},6:{name:"indexOfLayer",decl:{start:{line:37,column:9},end:{line:37,column:21}},loc:{start:{line:37,column:39},end:{line:44,column:1}},line:37},7:{name:"getAccessToken",decl:{start:{line:45,column:9},end:{line:45,column:23}},loc:{start:{line:45,column:52},end:{line:52,column:1}},line:45},8:{name:"replaceSourceAccessToken",decl:{start:{line:53,column:9},end:{line:53,column:33}},loc:{start:{line:53,column:67},end:{line:87,column:1}},line:53},9:{name:"replaceAccessTokens",decl:{start:{line:88,column:9},end:{line:88,column:28}},loc:{start:{line:88,column:50},end:{line:103,column:1}},line:88},10:{name:"(anonymous_10)",decl:{start:{line:90,column:40},end:{line:90,column:41}},loc:{start:{line:90,column:56},end:{line:92,column:3}},line:90},11:{name:"stripAccessTokens",decl:{start:{line:104,column:9},end:{line:104,column:26}},loc:{start:{line:104,column:37},end:{line:116,column:1}},line:104}},branchMap:{0:{loc:{start:{line:12,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},1:{loc:{start:{line:12,column:6},end:{line:12,column:35}},type:"binary-expr",locations:[{start:{line:12,column:6},end:{line:12,column:22}},{start:{line:12,column:26},end:{line:12,column:35}}],line:12},2:{loc:{start:{line:39,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},3:{loc:{start:{line:46,column:19},end:{line:46,column:42}},type:"binary-expr",locations:[{start:{line:46,column:19},end:{line:46,column:36}},{start:{line:46,column:40},end:{line:46,column:42}}],line:46},4:{loc:{start:{line:48,column:2},end:{line:50,column:3}},type:"if",locations:[{start:{line:48,column:2},end:{line:50,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:48,column:6},end:{line:48,column:40}},type:"binary-expr",locations:[{start:{line:48,column:6},end:{line:48,column:24}},{start:{line:48,column:28},end:{line:48,column:40}}],line:48},6:{loc:{start:{line:53,column:56},end:{line:53,column:65}},type:"default-arg",locations:[{start:{line:53,column:63},end:{line:53,column:65}}],line:53},7:{loc:{start:{line:55,column:2},end:{line:55,column:31}},type:"if",locations:[{start:{line:55,column:2},end:{line:55,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:56,column:2},end:{line:56,column:57}},type:"if",locations:[{start:{line:56,column:2},end:{line:56,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},9:{loc:{start:{line:56,column:6},end:{line:56,column:39}},type:"binary-expr",locations:[{start:{line:56,column:6},end:{line:56,column:24}},{start:{line:56,column:28},end:{line:56,column:39}}],line:56},10:{loc:{start:{line:58,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:64,column:3}},{start:{line:60,column:9},end:{line:64,column:3}}],line:58},11:{loc:{start:{line:58,column:6},end:{line:58,column:89}},type:"binary-expr",locations:[{start:{line:58,column:6},end:{line:58,column:46}},{start:{line:58,column:50},end:{line:58,column:89}}],line:58},12:{loc:{start:{line:60,column:9},end:{line:64,column:3}},type:"if",locations:[{start:{line:60,column:9},end:{line:64,column:3}},{start:{line:62,column:9},end:{line:64,column:3}}],line:60},13:{loc:{start:{line:60,column:13},end:{line:60,column:70}},type:"binary-expr",locations:[{start:{line:60,column:13},end:{line:60,column:28}},{start:{line:60,column:32},end:{line:60,column:70}}],line:60},14:{loc:{start:{line:62,column:9},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:9},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},15:{loc:{start:{line:62,column:13},end:{line:62,column:70}},type:"binary-expr",locations:[{start:{line:62,column:13},end:{line:62,column:28}},{start:{line:62,column:32},end:{line:62,column:70}}],line:62},16:{loc:{start:{line:66,column:2},end:{line:68,column:3}},type:"if",locations:[{start:{line:66,column:2},end:{line:68,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66},17:{loc:{start:{line:70,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:70,column:2},end:{line:74,column:3}},{start:{line:72,column:9},end:{line:74,column:3}}],line:70},18:{loc:{start:{line:88,column:39},end:{line:88,column:48}},type:"default-arg",locations:[{start:{line:88,column:46},end:{line:88,column:48}}],line:88},19:{loc:{start:{line:93,column:2},end:{line:101,column:3}},type:"if",locations:[{start:{line:93,column:2},end:{line:101,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},20:{loc:{start:{line:93,column:6},end:{line:93,column:114}},type:"binary-expr",locations:[{start:{line:93,column:6},end:{line:93,column:21}},{start:{line:93,column:26},end:{line:93,column:69}},{start:{line:93,column:73},end:{line:93,column:113}}],line:93},21:{loc:{start:{line:95,column:4},end:{line:100,column:5}},type:"if",locations:[{start:{line:95,column:4},end:{line:100,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:95}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0],19:[0,0],20:[0,0,0],21:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/style.ts"],names:[],mappings:"AAAA,SAAQ,mBAAkB;AAE1B,OAAO,YAAY;AAInB,MAAM,aAAa,oBAAoB;AAAA,EACrC,SAAS;AAAA,EACT,SAAS,CAAC;AAAA,EACV,QAAQ,CAAC;AACX,CAAC;AAED,SAAS,aAAa;AACpB,SAAO,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC;AAClD;AAEA,SAAS,YAAY,OAAuE;AAC1F,MAAG,EAAE,QAAQ,UAAU,CAAC,MAAM,IAAI;AAChC,UAAM,KAAK,WAAW;AAAA,EACxB;AACA,SAAO;AACT;AAEA,SAAS,uBAAuB,OAAiC;AAC/D,QAAM,gBAAgB,MAAM,OAAO,IAAI,WAAS;AAC9C,UAAM,eAA2D,EAAE,GAAG,MAAM;AAC5E,WAAO,aAAa;AACpB,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AACF;AAEA,SAAS,gBAAgB,OAAiC;AACxD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ,YAAY,MAAM,MAAM;AAAA,EAClC;AACF;AAEA,SAAS,oBAAoB,OAAqD;AAChF,SAAO,uBAAuB,gBAAgB,YAAY,KAAK,CAAC,CAAC;AACnE;AAEA,SAAS,aAAa,QAA8B,SAAiB;AACnE,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,QAAG,OAAO,CAAC,EAAE,OAAO,SAAS;AAC3B,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,eAAe,YAAoB,UAA8B,MAAiC;AACzG,QAAM,WAAW,SAAS,YAAY,CAAC;AACvC,MAAI,cAAc,SAAS,YAAY,UAAU,eAAe;AAEhE,MAAG,KAAK,iBAAiB,CAAC,aAAa;AACrC,kBAAc,OAAO,UAAiC;AAAA,EACxD;AAEA,SAAO;AACT;AAEA,SAAS,yBAAyB,UAA8B,YAAoB,OAAK,CAAC,GAAG;AAC3F,QAAM,SAAS,SAAS,QAAQ,UAAU;AAC1C,MAAG,CAAC,OAAQ,QAAO;AACnB,MAAG,EAAE,SAAS,WAAW,CAAC,OAAO,IAAK,QAAO;AAE7C,MAAI,iBAAiB;AACrB,MAAG,eAAe,6BAA6B,eAAe,0BAA0B;AACtF,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AAGpE,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AACpE,qBAAiB;AAAA,EACnB;AAEA,QAAM,cAAc,eAAe,gBAAgB,UAAU,IAAI;AAEjE,MAAG,CAAC,aAAa;AAEf,WAAO;AAAA,EACT;AAEA,MAAI;AACJ,MAAI,kBAAkB,UAAU;AAI9B,gBAAY,GAAG,OAAO,GAAG,YAAY,WAAW;AAAA,EAClD,OAAO;AACL,gBAAY,OAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,EACrD;AAEA,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,UAAU,GAAG;AAAA,MACZ,GAAG;AAAA,MACH,KAAK;AAAA,IACP;AAAA,EACF;AACA,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACA,SAAO;AACT;AAEA,SAAS,oBAAoB,UAA8B,OAAK,CAAC,GAAG;AAClE,MAAI,eAAe;AAEnB,SAAO,KAAK,SAAS,OAAO,EAAE,QAAQ,CAAC,eAAe;AACpD,mBAAe,yBAAyB,cAAc,YAAY,IAAI;AAAA,EACxE,CAAC;AAED,MAAI,SAAS,WAAW,SAAS,OAAO,MAAM,oBAAoB,KAAK,SAAS,OAAO,MAAM,iBAAiB,IAAI;AAChH,UAAM,iBAAiB,eAAe,gBAAgB,UAAU,IAAI;AACpE,QAAI,gBAAgB;AAClB,qBAAe;AAAA,QACb,GAAG;AAAA,QACH,QAAQ,SAAS,OAAO,QAAQ,SAAS,cAAc;AAAA,MACzD;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,kBAAkB,UAA8B;AACvD,QAAM,kBAAkB;AAAA,IACtB,GAAG,SAAS;AAAA,EACd;AACA,SAAO,gBAAgB,oCAAoC;AAC3D,SAAO,gBAAgB,qCAAqC;AAC5D,SAAO,gBAAgB,8BAA8B;AACrD,SAAO,gBAAgB,kCAAkC;AACzD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,UAAU;AAAA,EACZ;AACF;AAEA,eAAe;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"16e079a55cdd4175ffeada8708d6c49d219f1229"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return En=function(){return s},s}En();const IDe=(En().s[0]++,Fse({version:8,sources:{},layers:[]}));function Kse(){return En().f[0]++,En().s[1]++,Math.random().toString(36).substring(2,9)}function TDe(n){return En().f[1]++,En().s[2]++,En().b[1][0]++,!("id"in n)||(En().b[1][1]++,!n.id)?(En().b[0][0]++,En().s[3]++,n.id=Kse()):En().b[0][1]++,En().s[4]++,n}function kDe(n){En().f[2]++;const e=(En().s[5]++,n.layers.map(t=>{En().f[3]++;const i=(En().s[6]++,{...t});return En().s[7]++,delete i.interactive,En().s[8]++,i}));return En().s[9]++,{...n,layers:e}}function DDe(n){return En().f[4]++,En().s[10]++,{...n,layers:Dce(n.layers)}}function Fse(n){return En().f[5]++,En().s[11]++,kDe(DDe(TDe(n)))}function RDe(n,e){En().f[6]++,En().s[12]++;for(let t=(En().s[13]++,0);t<n.length;t++){if(En().s[14]++,n[t].id===e)return En().b[2][0]++,En().s[15]++,t;En().b[2][1]++}return En().s[16]++,null}function lF(n,e,t){En().f[7]++;const i=(En().s[17]++,En().b[3][0]++,e.metadata||(En().b[3][1]++,{}));let r=(En().s[18]++,i[`maputnik:${n}_access_token`]);return En().s[19]++,En().b[5][0]++,t.allowFallback&&(En().b[5][1]++,!r)?(En().b[4][0]++,En().s[20]++,r=Use[n]):En().b[4][1]++,En().s[21]++,r}function PDe(n,e,t=(En().b[6][0]++,{})){En().f[8]++;const i=(En().s[22]++,n.sources[e]);if(En().s[23]++,i)En().b[7][1]++;else return En().b[7][0]++,En().s[24]++,n;if(En().s[25]++,En().b[9][0]++,!("url"in i)||(En().b[9][1]++,!i.url))return En().b[8][0]++,En().s[26]++,n;En().b[8][1]++;let r=(En().s[27]++,e);En().s[28]++,En().b[11][0]++,e==="thunderforest_transport"||(En().b[11][1]++,e==="thunderforest_outdoors")?(En().b[10][0]++,En().s[29]++,r="thunderforest"):(En().b[10][1]++,En().s[30]++,En().b[13][0]++,"url"in i&&(En().b[13][1]++,i.url?.match(/\.stadiamaps\.com/))?(En().b[12][0]++,En().s[31]++,r="stadia"):(En().b[12][1]++,En().s[32]++,En().b[15][0]++,"url"in i&&(En().b[15][1]++,i.url?.match(/\.locationiq\.com/))?(En().b[14][0]++,En().s[33]++,r="locationiq"):En().b[14][1]++));const o=(En().s[34]++,lF(r,n,t));if(En().s[35]++,o)En().b[16][1]++;else return En().b[16][0]++,En().s[36]++,n;let s;En().s[37]++,r=="stadia"?(En().b[17][0]++,En().s[38]++,s=`${i.url}?api_key=${o}`):(En().b[17][1]++,En().s[39]++,s=i.url.replace("{key}",o));const a=(En().s[40]++,{...n.sources,[e]:{...i,url:s}}),c=(En().s[41]++,{...n,sources:a});return En().s[42]++,c}function LDe(n,e=(En().b[18][0]++,{})){En().f[9]++;let t=(En().s[43]++,n);if(En().s[44]++,Object.keys(n.sources).forEach(i=>{En().f[10]++,En().s[45]++,t=PDe(t,i,e)}),En().s[46]++,En().b[20][0]++,n.glyphs&&(En().b[20][1]++,n.glyphs.match(/\.tilehosting\.com/)||(En().b[20][2]++,n.glyphs.match(/\.maptiler\.com/)))){En().b[19][0]++;const i=(En().s[47]++,lF("openmaptiles",n,e));En().s[48]++,i?(En().b[21][0]++,En().s[49]++,t={...t,glyphs:n.glyphs.replace("{key}",i)}):En().b[21][1]++}else En().b[19][1]++;return En().s[50]++,t}function UDe(n){En().f[11]++;const e=(En().s[51]++,{...n.metadata});return En().s[52]++,delete e["maputnik:openmaptiles_access_token"],En().s[53]++,delete e["maputnik:thunderforest_access_token"],En().s[54]++,delete e["maputnik:stadia_access_token"],En().s[55]++,delete e["maputnik:locationiq_access_token"],En().s[56]++,{...n,metadata:e}}const Id={ensureStyleValidity:Fse,emptyStyle:IDe,indexOfLayer:RDe,generateId:Kse,getAccessToken:lF,replaceAccessTokens:LDe,stripAccessTokens:UDe};function Ui(){var n="/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",e="7e619cc067ee5afec3d59ae042f82a0a4a37e5ad",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",statementMap:{0:{start:{line:3,column:21},end:{line:3,column:50}},1:{start:{line:4,column:19},end:{line:4,column:55}},2:{start:{line:5,column:2},end:{line:8,column:3}},3:{start:{line:6,column:4},end:{line:6,column:44}},4:{start:{line:7,column:4},end:{line:7,column:75}},5:{start:{line:9,column:2},end:{line:9,column:18}},6:{start:{line:12,column:2},end:{line:12,column:41}},7:{start:{line:13,column:2},end:{line:23,column:3}},8:{start:{line:14,column:21},end:{line:17,column:6}},9:{start:{line:18,column:17},end:{line:18,column:38}},10:{start:{line:19,column:4},end:{line:19,column:43}},11:{start:{line:21,column:4},end:{line:21,column:63}},12:{start:{line:22,column:4},end:{line:22,column:28}},13:{start:{line:25,column:39},end:{line:31,column:19}},14:{start:{line:26,column:2},end:{line:26,column:46}},15:{start:{line:27,column:2},end:{line:27,column:74}},16:{start:{line:28,column:2},end:{line:28,column:86}},17:{start:{line:29,column:2},end:{line:29,column:56}},18:{start:{line:30,column:2},end:{line:30,column:20}},19:{start:{line:33,column:2},end:{line:40,column:3}},20:{start:{line:34,column:19},end:{line:34,column:31}},21:{start:{line:35,column:35},end:{line:35,column:41}},22:{start:{line:36,column:20},end:{line:36,column:78}},23:{start:{line:37,column:4},end:{line:37,column:33}},24:{start:{line:39,column:4},end:{line:39,column:14}},25:{start:{line:44,column:2},end:{line:46,column:3}},26:{start:{line:45,column:4},end:{line:45,column:24}},27:{start:{line:47,column:2},end:{line:49,column:3}},28:{start:{line:48,column:4},end:{line:48,column:24}},29:{start:{line:50,column:32},end:{line:50,column:52}},30:{start:{line:51,column:16},end:{line:51,column:53}},31:{start:{line:52,column:2},end:{line:54,column:3}},32:{start:{line:53,column:4},end:{line:53,column:38}},33:{start:{line:55,column:2},end:{line:57,column:3}},34:{start:{line:56,column:4},end:{line:56,column:44}},35:{start:{line:58,column:2},end:{line:60,column:3}},36:{start:{line:59,column:4},end:{line:59,column:29}},37:{start:{line:61,column:2},end:{line:61,column:22}}},fnMap:{0:{name:"getStyleUrlFromAddressbarAndRemoveItIfNeeded",decl:{start:{line:2,column:16},end:{line:2,column:60}},loc:{start:{line:2,column:63},end:{line:10,column:1}},line:2},1:{name:"loadStyleUrl",decl:{start:{line:11,column:22},end:{line:11,column:34}},loc:{start:{line:11,column:45},end:{line:24,column:1}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:25,column:40},end:{line:25,column:41}},loc:{start:{line:25,column:56},end:{line:31,column:1}},line:25},3:{name:"getProtocolSafe",decl:{start:{line:32,column:9},end:{line:32,column:24}},loc:{start:{line:32,column:30},end:{line:41,column:1}},line:32},4:{name:"validate",decl:{start:{line:43,column:16},end:{line:43,column:24}},loc:{start:{line:43,column:30},end:{line:62,column:1}},line:43}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:31,column:3},end:{line:31,column:18}},type:"binary-expr",locations:[{start:{line:31,column:3},end:{line:31,column:12}},{start:{line:31,column:16},end:{line:31,column:18}}],line:31},2:{loc:{start:{line:44,column:2},end:{line:46,column:3}},type:"if",locations:[{start:{line:44,column:2},end:{line:46,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},3:{loc:{start:{line:47,column:2},end:{line:49,column:3}},type:"if",locations:[{start:{line:47,column:2},end:{line:49,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},4:{loc:{start:{line:47,column:6},end:{line:47,column:50}},type:"binary-expr",locations:[{start:{line:47,column:6},end:{line:47,column:25}},{start:{line:47,column:29},end:{line:47,column:50}}],line:47},5:{loc:{start:{line:52,column:2},end:{line:54,column:3}},type:"if",locations:[{start:{line:52,column:2},end:{line:54,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},6:{loc:{start:{line:52,column:6},end:{line:52,column:24}},type:"binary-expr",locations:[{start:{line:52,column:6},end:{line:52,column:15}},{start:{line:52,column:19},end:{line:52,column:24}}],line:52},7:{loc:{start:{line:55,column:2},end:{line:57,column:3}},type:"if",locations:[{start:{line:55,column:2},end:{line:57,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:58,column:2},end:{line:60,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:60,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:58},9:{loc:{start:{line:58,column:6},end:{line:58,column:91}},type:"binary-expr",locations:[{start:{line:58,column:6},end:{line:58,column:14}},{start:{line:58,column:18},end:{line:58,column:38}},{start:{line:58,column:42},end:{line:58,column:79}},{start:{line:58,column:83},end:{line:58,column:91}}],line:58}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts"],names:["ErrorType"],mappings:"AAAA,OAAO,WAAW;AAGX,gBAAS,+CAA8D;AAC5E,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,QAAM,WAAW,WAAW,aAAa,IAAI,OAAO;AACpD,MAAI,UAAU;AACZ,eAAW,aAAa,OAAO,OAAO;AACtC,WAAO,QAAQ,aAAa,CAAC,GAAG,SAAS,OAAO,WAAW,SAAS,CAAC;AAAA,EACvE;AACA,SAAO;AACT;AAEA,sBAAsB,aAAa,UAAqD;AACtF,UAAQ,IAAI,iBAAiB,QAAQ;AACrC,MAAI;AACF,UAAM,WAAW,MAAM,MAAM,UAAU;AAAA,MACrC,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC;AACD,UAAM,OAAO,MAAM,SAAS,KAAK;AACjC,WAAO,MAAM,oBAAoB,IAAI;AAAA,EACvC,QAAQ;AACN,YAAQ,KAAK,oCAAoC,QAAQ;AACzD,WAAO,MAAM;AAAA,EACf;AACF;AAEO,WAAW,YAAX,kBAAWA,eAAX;AACL,EAAAA,sBAAA;AACA,EAAAA,sBAAA;AACA,EAAAA,sBAAA;AACA,EAAAA,sBAAA;AAJgB,SAAAA;AAAA,GAAA;AAOlB,SAAS,gBAAgB,KAAuD;AAC9E,MAAI;AACF,UAAM,SAAS,IAAI,IAAI,GAAG;AAC1B,UAAM,EAAE,UAAU,SAAS,IAAI;AAC/B,UAAM,UAAU,4CAA4C,KAAK,QAAQ;AACzE,WAAO,EAAE,UAAU,QAAQ;AAAA,EAC7B,SACO,MAAM;AACX,WAAO,CAAC;AAAA,EACV;AACF;AAAC;AAEM,gBAAS,SAAS,KAAyB;AAChD,MAAI,CAAC,KAAK;AACR,WAAO;AAAA,EACT;AAGA,MAAI,IAAI,WAAW,GAAG,KAAK,CAAC,IAAI,WAAW,IAAI,GAAG;AAChD,WAAO;AAAA,EACT;AAEA,QAAM,EAAE,UAAU,QAAQ,IAAI,gBAAgB,GAAG;AACjD,QAAM,QAAQ,OAAO,SAAS,aAAa;AAE3C,MAAI,CAAC,YAAY,OAAO;AACtB,WAAO;AAAA,EACT;AACA,MAAI,CAAC,UAAU;AACb,WAAO;AAAA,EACT;AACA,MAAI,YACF,aAAa,WACb,OAAO,SAAS,aAAa,YAC7B,CAAC,SAAS;AACV,WAAO;AAAA,EACT;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7e619cc067ee5afec3d59ae042f82a0a4a37e5ad"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ui=function(){return s},s}Ui();function KDe(){Ui().f[0]++;const n=(Ui().s[0]++,new URL(window.location.href)),e=(Ui().s[1]++,n.searchParams.get("style"));return Ui().s[2]++,e?(Ui().b[0][0]++,Ui().s[3]++,n.searchParams.delete("style"),Ui().s[4]++,window.history.replaceState({},document.title,n.toString())):Ui().b[0][1]++,Ui().s[5]++,e}async function zse(n){Ui().f[1]++,Ui().s[6]++,console.log("Loading style",n),Ui().s[7]++;try{const e=(Ui().s[8]++,await fetch(n,{mode:"cors",credentials:"same-origin"})),t=(Ui().s[9]++,await e.json());return Ui().s[10]++,Id.ensureStyleValidity(t)}catch{return Ui().s[11]++,console.warn("Could not fetch default style: "+n),Ui().s[12]++,Id.emptyStyle}}var FS=(Ui().s[13]++,(n=>(Ui().f[2]++,Ui().s[14]++,n[n.None=0]="None",Ui().s[15]++,n[n.EmptyHttpsProtocol=1]="EmptyHttpsProtocol",Ui().s[16]++,n[n.EmptyHttpOrHttpsProtocol=2]="EmptyHttpOrHttpsProtocol",Ui().s[17]++,n[n.CorsError=3]="CorsError",Ui().s[18]++,n))((Ui().b[1][0]++,FS||(Ui().b[1][1]++,{}))));function FDe(n){Ui().f[3]++,Ui().s[19]++;try{const e=(Ui().s[20]++,new URL(n)),{protocol:t,hostname:i}=(Ui().s[21]++,e),r=(Ui().s[22]++,/^(localhost|\[::1\]|127(.[0-9]{1,3}){3})/i.test(i));return Ui().s[23]++,{protocol:t,isLocal:r}}catch{return Ui().s[24]++,{}}}function S9(n){if(Ui().f[4]++,Ui().s[25]++,n)Ui().b[2][1]++;else return Ui().b[2][0]++,Ui().s[26]++,0;if(Ui().s[27]++,Ui().b[4][0]++,n.startsWith("/")&&(Ui().b[4][1]++,!n.startsWith("//")))return Ui().b[3][0]++,Ui().s[28]++,0;Ui().b[3][1]++;const{protocol:e,isLocal:t}=(Ui().s[29]++,FDe(n)),i=(Ui().s[30]++,window.location.protocol==="https:");if(Ui().s[31]++,Ui().b[6][0]++,!e&&(Ui().b[6][1]++,i))return Ui().b[5][0]++,Ui().s[32]++,1;if(Ui().b[5][1]++,Ui().s[33]++,e)Ui().b[7][1]++;else return Ui().b[7][0]++,Ui().s[34]++,2;return Ui().s[35]++,Ui().b[9][0]++,e&&(Ui().b[9][1]++,e==="http:")&&(Ui().b[9][2]++,window.location.protocol==="https:")&&(Ui().b[9][3]++,!t)?(Ui().b[8][0]++,Ui().s[36]++,3):(Ui().b[8][1]++,Ui().s[37]++,0)}function _s(){var n="/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",e="10bb41cd0b7b737b3850572eca04f957b2d429f2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:29,column:3}},1:{start:{line:10,column:6},end:{line:13,column:14}},2:{start:{line:15,column:6},end:{line:20,column:14}},3:{start:{line:22,column:6},end:{line:26,column:14}},4:{start:{line:28,column:6},end:{line:28,column:20}},5:{start:{line:32,column:24},end:{line:35,column:3}},6:{start:{line:37,column:4},end:{line:37,column:17}},7:{start:{line:38,column:4},end:{line:40,column:6}},8:{start:{line:42,column:12},end:{line:47,column:3}},9:{start:{line:43,column:4},end:{line:45,column:7}},10:{start:{line:46,column:4},end:{line:46,column:52}},11:{start:{line:46,column:28},end:{line:46,column:52}},12:{start:{line:48,column:13},end:{line:53,column:3}},13:{start:{line:49,column:4},end:{line:51,column:7}},14:{start:{line:52,column:4},end:{line:52,column:29}},15:{start:{line:55,column:4},end:{line:66,column:9}},16:{start:{line:69,column:17},end:{line:69,column:52}}},fnMap:{0:{name:"errorTypeToJsx",decl:{start:{line:7,column:9},end:{line:7,column:23}},loc:{start:{line:7,column:38},end:{line:30,column:1}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:33,column:13},end:{line:33,column:14}},loc:{start:{line:33,column:19},end:{line:34,column:5}},line:33},2:{name:"(anonymous_2)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:21},end:{line:41,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:42,column:12},end:{line:42,column:13}},loc:{start:{line:42,column:21},end:{line:47,column:3}},line:42},4:{name:"(anonymous_4)",decl:{start:{line:48,column:13},end:{line:48,column:14}},loc:{start:{line:48,column:22},end:{line:53,column:3}},line:48},5:{name:"(anonymous_5)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:67,column:3}},line:54}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:29,column:3}},type:"switch",locations:[{start:{line:9,column:4},end:{line:13,column:14}},{start:{line:14,column:4},end:{line:20,column:14}},{start:{line:21,column:4},end:{line:26,column:14}},{start:{line:27,column:4},end:{line:28,column:20}}],line:8},1:{loc:{start:{line:46,column:4},end:{line:46,column:52}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0,0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx"],names:[],mappings:"AAYU,SAAoC,KAApC;AAZV,OAAO,WAAyB;AAChC,OAAO,iBAAiB;AACxB,OAAO,gBAAgB;AACvB,SAAS,OAA6B,uBAAuB;AAE7D,SAAS,WAAW,gBAAgB;AAEpC,SAAS,eAAe,WAAkC,GAAuC;AAC/F,UAAQ,WAAW;AAAA,IACjB,KAAK,UAAU;AACb,aACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GAC3D;AAAA,IAEJ,KAAK,UAAU;AACb,aACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,qBAAO;AAAA,QAAO;AAAA,QAAI,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GACnF;AAAA,IAEJ,KAAK,UAAU;AACb,aACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAmF,oBAAC,UAAK,sBAAQ;AAAA,QAAO;AAAA,SAAO,GAC9H;AAAA,IAEJ;AACE,aAAO;AAAA,EACX;AACF;AAsBA,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAa,OAA8B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,SAAS,MAAM,KAAK;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,UAAU,CAAC,QAAgB;AACzB,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,GAAG;AAAA,IACrB,CAAC;AACD,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,GAAG;AAAA,EAChD;AAAA,EAEA,WAAW,CAAC,QAAgB;AAC1B,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,GAAG;AAAA,IACrB,CAAC;AACD,SAAK,MAAM,SAAS,GAAG;AAAA,EACzB;AAAA,EAEA,SAAU;AACR,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACE,GAAG,KAAK;AAAA,UACT,SAAS,KAAK;AAAA,UACd,UAAU,KAAK;AAAA,UACf,cAAY,KAAK,MAAM,YAAY;AAAA;AAAA,MACrC;AAAA,MACC,eAAe,KAAK,MAAM,OAAO,KAAK,MAAM,CAAC;AAAA,OAChD;AAAA,EAEJ;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"10bb41cd0b7b737b3850572eca04f957b2d429f2"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return _s=function(){return s},s}_s();function zDe(n,e){switch(_s().f[0]++,_s().s[0]++,n){case FS.EmptyHttpsProtocol:return _s().b[0][0]++,_s().s[1]++,oe.jsx(w9,{children:oe.jsxs(hC,{t:e,children:["Must provide protocol: ",oe.jsx("code",{children:"https://"})]})});case FS.EmptyHttpOrHttpsProtocol:return _s().b[0][1]++,_s().s[2]++,oe.jsx(w9,{children:oe.jsxs(hC,{t:e,children:["Must provide protocol: ",oe.jsx("code",{children:"http://"})," or ",oe.jsx("code",{children:"https://"})]})});case FS.CorsError:return _s().b[0][2]++,_s().s[3]++,oe.jsx(w9,{children:oe.jsxs(hC,{t:e,children:["CORS policy won't allow fetching resources served over http from https, use a ",oe.jsx("code",{children:"https://"})," domain"]})});default:_s().b[0][3]++,_s().s[4]++;return}}class jDe extends In.Component{static defaultProps=(_s().s[5]++,{onInput:()=>{_s().f[1]++}});constructor(e){_s().f[2]++,_s().s[6]++,super(e),_s().s[7]++,this.state={error:S9(e.value)}}onInput=(_s().s[8]++,e=>{_s().f[3]++,_s().s[9]++,this.setState({error:S9(e)}),_s().s[10]++,this.props.onInput?(_s().b[1][0]++,_s().s[11]++,this.props.onInput(e)):_s().b[1][1]++});onChange=(_s().s[12]++,e=>{_s().f[4]++,_s().s[13]++,this.setState({error:S9(e)}),_s().s[14]++,this.props.onChange(e)});render(){return _s().f[5]++,_s().s[15]++,oe.jsxs("div",{children:[oe.jsx(Fm,{...this.props,onInput:this.onInput,onChange:this.onChange,"aria-label":this.props["aria-label"]}),zDe(this.state.error,this.props.t)]})}}const uF=(_s().s[16]++,Do()(jDe));function Yn(){var n="/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",e="705ac9c8c3dcb0aff320a53fac9b80bc280b1cbf",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",statementMap:{0:{start:{line:15,column:19},end:{line:15,column:39}},1:{start:{line:16,column:4},end:{line:16,column:27}},2:{start:{line:17,column:4},end:{line:17,column:57}},3:{start:{line:17,column:29},end:{line:17,column:57}},4:{start:{line:20,column:4},end:{line:20,column:56}},5:{start:{line:22,column:13},end:{line:38,column:3}},6:{start:{line:23,column:19},end:{line:23,column:39}},7:{start:{line:24,column:4},end:{line:36,column:5}},8:{start:{line:25,column:6},end:{line:25,column:21}},9:{start:{line:26,column:11},end:{line:36,column:5}},10:{start:{line:27,column:6},end:{line:27,column:22}},11:{start:{line:28,column:11},end:{line:36,column:5}},12:{start:{line:29,column:28},end:{line:29,column:38}},13:{start:{line:30,column:27},end:{line:30,column:59}},14:{start:{line:31,column:6},end:{line:31,column:32}},15:{start:{line:32,column:11},end:{line:36,column:5}},16:{start:{line:33,column:6},end:{line:33,column:29}},17:{start:{line:35,column:6},end:{line:35,column:22}},18:{start:{line:37,column:4},end:{line:37,column:57}},19:{start:{line:37,column:29},end:{line:37,column:57}},20:{start:{line:40,column:19},end:{line:40,column:39}},21:{start:{line:41,column:4},end:{line:41,column:31}},22:{start:{line:42,column:4},end:{line:42,column:86}},23:{start:{line:42,column:29},end:{line:42,column:86}},24:{start:{line:45,column:14},end:{line:45,column:26}},25:{start:{line:46,column:22},end:{line:46,column:77}},26:{start:{line:47,column:19},end:{line:116,column:6}},27:{start:{line:48,column:45},end:{line:54,column:7}},28:{start:{line:56,column:6},end:{line:103,column:7}},29:{start:{line:57,column:8},end:{line:64,column:10}},30:{start:{line:65,column:13},end:{line:103,column:7}},31:{start:{line:66,column:8},end:{line:73,column:10}},32:{start:{line:74,column:13},end:{line:103,column:7}},33:{start:{line:75,column:24},end:{line:75,column:99}},34:{start:{line:75,column:78},end:{line:75,column:98}},35:{start:{line:76,column:8},end:{line:84,column:10}},36:{start:{line:85,column:13},end:{line:103,column:7}},37:{start:{line:86,column:8},end:{line:93,column:10}},38:{start:{line:95,column:8},end:{line:102,column:10}},39:{start:{line:104,column:6},end:{line:115,column:8}},40:{start:{line:117,column:4},end:{line:127,column:9}},41:{start:{line:130,column:26},end:{line:130,column:70}},42:{start:{line:134,column:14},end:{line:134,column:26}},43:{start:{line:135,column:4},end:{line:148,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:29},end:{line:18,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:15},end:{line:21,column:3}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:22,column:13},end:{line:22,column:14}},loc:{start:{line:22,column:19},end:{line:38,column:3}},line:22},3:{name:"(anonymous_3)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:24},end:{line:43,column:3}},line:39},4:{name:"(anonymous_4)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:11},end:{line:128,column:3}},line:44},5:{name:"(anonymous_5)",decl:{start:{line:47,column:35},end:{line:47,column:36}},loc:{start:{line:47,column:45},end:{line:116,column:5}},line:47},6:{name:"(anonymous_6)",decl:{start:{line:75,column:70},end:{line:75,column:71}},loc:{start:{line:75,column:78},end:{line:75,column:98}},line:75},7:{name:"(anonymous_7)",decl:{start:{line:133,column:2},end:{line:133,column:3}},loc:{start:{line:133,column:11},end:{line:149,column:3}},line:133}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:17,column:57}},type:"if",locations:[{start:{line:17,column:4},end:{line:17,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:20,column:11},end:{line:20,column:55}},type:"binary-expr",locations:[{start:{line:20,column:11},end:{line:20,column:27}},{start:{line:20,column:31},end:{line:20,column:49}},{start:{line:20,column:53},end:{line:20,column:55}}],line:20},2:{loc:{start:{line:24,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:24},3:{loc:{start:{line:26,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:26,column:11},end:{line:36,column:5}},{start:{line:28,column:11},end:{line:36,column:5}}],line:26},4:{loc:{start:{line:28,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:28,column:11},end:{line:36,column:5}},{start:{line:32,column:11},end:{line:36,column:5}}],line:28},5:{loc:{start:{line:32,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:32,column:11},end:{line:36,column:5}},{start:{line:34,column:11},end:{line:36,column:5}}],line:32},6:{loc:{start:{line:37,column:4},end:{line:37,column:57}},type:"if",locations:[{start:{line:37,column:4},end:{line:37,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},7:{loc:{start:{line:42,column:4},end:{line:42,column:86}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:86}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},8:{loc:{start:{line:42,column:49},end:{line:42,column:84}},type:"cond-expr",locations:[{start:{line:42,column:69},end:{line:42,column:75}},{start:{line:42,column:78},end:{line:42,column:84}}],line:42},9:{loc:{start:{line:56,column:6},end:{line:103,column:7}},type:"if",locations:[{start:{line:56,column:6},end:{line:103,column:7}},{start:{line:65,column:13},end:{line:103,column:7}}],line:56},10:{loc:{start:{line:62,column:26},end:{line:62,column:70}},type:"binary-expr",locations:[{start:{line:62,column:26},end:{line:62,column:50}},{start:{line:62,column:54},end:{line:62,column:70}}],line:62},11:{loc:{start:{line:65,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:65,column:13},end:{line:103,column:7}},{start:{line:74,column:13},end:{line:103,column:7}}],line:65},12:{loc:{start:{line:71,column:26},end:{line:71,column:70}},type:"binary-expr",locations:[{start:{line:71,column:26},end:{line:71,column:50}},{start:{line:71,column:54},end:{line:71,column:70}}],line:71},13:{loc:{start:{line:74,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:74,column:13},end:{line:103,column:7}},{start:{line:85,column:13},end:{line:103,column:7}}],line:74},14:{loc:{start:{line:82,column:26},end:{line:82,column:70}},type:"binary-expr",locations:[{start:{line:82,column:26},end:{line:82,column:50}},{start:{line:82,column:54},end:{line:82,column:70}}],line:82},15:{loc:{start:{line:85,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:85,column:13},end:{line:103,column:7}},{start:{line:94,column:13},end:{line:103,column:7}}],line:85},16:{loc:{start:{line:91,column:26},end:{line:91,column:70}},type:"binary-expr",locations:[{start:{line:91,column:26},end:{line:91,column:50}},{start:{line:91,column:54},end:{line:91,column:70}}],line:91},17:{loc:{start:{line:100,column:26},end:{line:100,column:70}},type:"binary-expr",locations:[{start:{line:100,column:26},end:{line:100,column:50}},{start:{line:100,column:54},end:{line:100,column:70}}],line:100}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx"],names:["v"],mappings:"AAwE4B,cA2Cf,YA3Ce;AAxE5B,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,cAAc;AACrB,OAAO,gBAAgB;AAkBvB,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,YAAY,KAAa,UAAuC;AAC9D,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,GAAG,IAAI;AACd,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAAA,EACpD;AAAA,EAEA,WAAW,MAAM;AACf,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,QAAI,KAAK,MAAM,SAAS,UAAU;AAChC,aAAO,KAAK,CAAC;AAAA,IACf,WACS,KAAK,MAAM,SAAS,OAAO;AAClC,aAAO,KAAK,EAAE;AAAA,IAChB,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,YAAM,EAAC,UAAS,IAAI,KAAK;AACzB,YAAM,eAAe,OAAO,KAAK,UAAW,MAAM,EAAE,CAAC;AACrD,aAAO,KAAK,YAAY;AAAA,IAC1B,WAAW,KAAK,MAAM,SAAS,SAAS;AACtC,aAAO,KAAK,SAAS;AAAA,IACvB,OAAO;AACL,aAAO,KAAK,EAAE;AAAA,IAChB;AAEA,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,YAAY,UAAkB;AAC5B,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,OAAO,UAAU,CAAC;AAEzB,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,OAAO,SAAS,IAAI,SAAS,MAAS;AAAA,EACrF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY,EAAE,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAO;AACxE,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,GAAG,MAAM;AACvC,YAAM,iBAAgB;AAAA,QAAC;AAAA;AAAA,UACrB,SAAS,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,UACrC,GAAG;AAAA;AAAA,MACN;AACA,UAAI;AACJ,UAAG,KAAK,MAAM,SAAS,OAAO;AAC5B,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,UAAU;AACrC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,WAAW,MAAM,EAAE,IAAI,CAAAA,OAAK,CAACA,IAAG,WAAWA,EAAC,CAAC,CAAC;AACrF,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP;AAAA,YACA,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,SAAS;AACpC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,OACK;AACH,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF;AAEA,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,OAAO,KAAK,MAAM;AAAA,UAElB,WAAU;AAAA,UAEV;AAAA,gCAAC,SAAI,WAAU,+BACZ,0BACH;AAAA,YACA,oBAAC,SAAI,WAAU,gCACZ,iBACH;AAAA;AAAA;AAAA,QARK;AAAA,MASP;AAAA,IACF,CAAC;AAED,WACE,qBAAC,SAAI,WAAU,kBACZ;AAAA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UAEb,YAAE,WAAW;AAAA;AAAA,MAChB;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;AAMf,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,mBAAmB;AAAA,QAE5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,oBAAC,YAAS;AAAA;AAAA,QACnB;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"705ac9c8c3dcb0aff320a53fac9b80bc280b1cbf"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Yn=function(){return s},s}Yn();class NDe extends In.Component{changeValue(e,t){Yn().f[0]++;const i=(Yn().s[0]++,this.values.slice(0));Yn().s[1]++,i[e]=t,Yn().s[2]++,this.props.onChange?(Yn().b[0][0]++,Yn().s[3]++,this.props.onChange(i)):Yn().b[0][1]++}get values(){return Yn().f[1]++,Yn().s[4]++,Yn().b[1][0]++,this.props.value||(Yn().b[1][1]++,this.props.default)||(Yn().b[1][2]++,[])}addValue=(Yn().s[5]++,()=>{Yn().f[2]++;const e=(Yn().s[6]++,this.values.slice(0));if(Yn().s[7]++,this.props.type==="number")Yn().b[2][0]++,Yn().s[8]++,e.push(0);else if(Yn().b[2][1]++,Yn().s[9]++,this.props.type==="url")Yn().b[3][0]++,Yn().s[10]++,e.push("");else if(Yn().b[3][1]++,Yn().s[11]++,this.props.type==="enum"){Yn().b[4][0]++;const{fieldSpec:t}=(Yn().s[12]++,this.props),i=(Yn().s[13]++,Object.keys(t.values)[0]);Yn().s[14]++,e.push(i)}else Yn().b[4][1]++,Yn().s[15]++,this.props.type==="color"?(Yn().b[5][0]++,Yn().s[16]++,e.push("#000000")):(Yn().b[5][1]++,Yn().s[17]++,e.push(""));Yn().s[18]++,this.props.onChange?(Yn().b[6][0]++,Yn().s[19]++,this.props.onChange(e)):Yn().b[6][1]++});deleteValue(e){Yn().f[3]++;const t=(Yn().s[20]++,this.values.slice(0));Yn().s[21]++,t.splice(e,1),Yn().s[22]++,this.props.onChange?(Yn().b[7][0]++,Yn().s[23]++,this.props.onChange(t.length>0?(Yn().b[8][0]++,t):(Yn().b[8][1]++,void 0))):Yn().b[7][1]++}render(){Yn().f[4]++;const e=(Yn().s[24]++,this.props.t),t=(Yn().s[25]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),i=(Yn().s[26]++,this.values.map((r,o)=>{Yn().f[5]++;const s=(Yn().s[27]++,oe.jsx(GDe,{onClick:this.deleteValue.bind(this,o),...t}));let a;if(Yn().s[28]++,this.props.type==="url")Yn().b[9][0]++,Yn().s[29]++,a=oe.jsx(uF,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Yn().b[10][0]++,this.props["aria-label"]||(Yn().b[10][1]++,this.props.label))});else if(Yn().b[9][1]++,Yn().s[30]++,this.props.type==="number")Yn().b[11][0]++,Yn().s[31]++,a=oe.jsx(N1,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Yn().b[12][0]++,this.props["aria-label"]||(Yn().b[12][1]++,this.props.label))});else if(Yn().b[11][1]++,Yn().s[32]++,this.props.type==="enum"){Yn().b[13][0]++;const c=(Yn().s[33]++,Object.keys(this.props.fieldSpec?.values).map(d=>(Yn().f[6]++,Yn().s[34]++,[d,NK(d)])));Yn().s[35]++,a=oe.jsx(aF,{options:c,value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Yn().b[14][0]++,this.props["aria-label"]||(Yn().b[14][1]++,this.props.label))})}else Yn().b[13][1]++,Yn().s[36]++,this.props.type==="color"?(Yn().b[15][0]++,Yn().s[37]++,a=oe.jsx(sF,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Yn().b[16][0]++,this.props["aria-label"]||(Yn().b[16][1]++,this.props.label))})):(Yn().b[15][1]++,Yn().s[38]++,a=oe.jsx(Fm,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Yn().b[17][0]++,this.props["aria-label"]||(Yn().b[17][1]++,this.props.label))}));return Yn().s[39]++,oe.jsxs("div",{style:this.props.style,className:"maputnik-array-block",children:[oe.jsx("div",{className:"maputnik-array-block-action",children:s}),oe.jsx("div",{className:"maputnik-array-block-content",children:a})]},o)}));return Yn().s[40]++,oe.jsxs("div",{className:"maputnik-array",children:[i,oe.jsx(Ks,{className:"maputnik-array-add-value",onClick:this.addValue,children:e("Add value")})]})}}const zS=(Yn().s[41]++,Do()(NDe));class GDe extends In.Component{render(){Yn().f[7]++;const e=(Yn().s[42]++,this.props.t);return Yn().s[43]++,oe.jsx(Ks,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove array item"),children:oe.jsx(lK,{label:oe.jsx(jC,{})})})}}function Cs(){var n="/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",e="cd16dc68fc42c219caf080518fd74984d4f8d81e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:9,column:16},end:{line:9,column:60}},2:{start:{line:10,column:4},end:{line:14,column:5}},3:{start:{line:11,column:6},end:{line:11,column:28}},4:{start:{line:13,column:6},end:{line:13,column:17}},5:{start:{line:17,column:26},end:{line:17,column:46}},6:{start:{line:18,column:4},end:{line:18,column:34}},7:{start:{line:19,column:27},end:{line:19,column:92}},8:{start:{line:19,column:55},end:{line:19,column:67}},9:{start:{line:19,column:83},end:{line:19,column:91}},10:{start:{line:20,column:4},end:{line:20,column:40}},11:{start:{line:23,column:19},end:{line:39,column:6}},12:{start:{line:24,column:6},end:{line:38,column:8}},13:{start:{line:32,column:52},end:{line:32,column:58}},14:{start:{line:40,column:4},end:{line:40,column:87}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:15,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:28},end:{line:21,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:48},end:{line:19,column:49}},loc:{start:{line:19,column:55},end:{line:19,column:67}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:76},end:{line:19,column:77}},loc:{start:{line:19,column:83},end:{line:19,column:91}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:41,column:3}},line:22},5:{name:"(anonymous_5)",decl:{start:{line:23,column:35},end:{line:23,column:36}},loc:{start:{line:23,column:49},end:{line:39,column:5}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:32,column:45},end:{line:32,column:46}},loc:{start:{line:32,column:52},end:{line:32,column:58}},line:32}},branchMap:{0:{loc:{start:{line:9,column:16},end:{line:9,column:60}},type:"binary-expr",locations:[{start:{line:9,column:16},end:{line:9,column:32}},{start:{line:9,column:36},end:{line:9,column:54}},{start:{line:9,column:58},end:{line:9,column:60}}],line:9},1:{loc:{start:{line:10,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:14,column:5}},{start:{line:12,column:11},end:{line:14,column:5}}],line:10},2:{loc:{start:{line:30,column:28},end:{line:30,column:71}},type:"binary-expr",locations:[{start:{line:30,column:28},end:{line:30,column:52}},{start:{line:30,column:56},end:{line:30,column:71}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx"],names:[],mappings:"AA6CQ;AA7CR,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAY9B,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,EACV;AAAA,EAEA,IAAI,SAAS;AACX,UAAM,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAGvD,QAAI,IAAI,IAAI,SAAO,CAAC,MAAM,IAAG;AAC3B,aAAO,IAAI,OAAO,EAAE;AAAA,IACtB,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,WAAW,KAAa,UAAkB;AACxC,UAAM,gBAAgB,KAAK,OAAO,MAAM,CAAC;AACzC,kBAAc,GAAG,IAAI;AACrB,UAAM,iBAAiB,cACpB,OAAO,OAAK,MAAM,MAAS,EAC3B,OAAO,OAAK,MAAM,EAAE;AAEvB,SAAK,MAAM,SAAS,cAAc;AAAA,EACpC;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,OAAO,MAAM;AAC3C,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA,cACnD;AAAA,cACA,SAAS,KAAK,MAAM,OAAO,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,cAC1C,UAAU,KAAK,WAAW,KAAK,MAAM,CAAC;AAAA;AAAA,UACxC;AAAA;AAAA,QAPK;AAAA,MAQP;AAAA,IACF,CAAC;AAED,WACE,oBAAC,QAAG,WAAU,iBACX,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cd16dc68fc42c219caf080518fd74984d4f8d81e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Cs=function(){return s},s}Cs();class WDe extends In.Component{static defaultProps=(Cs().s[0]++,{fonts:[]});get values(){Cs().f[0]++;const e=(Cs().s[1]++,Cs().b[0][0]++,this.props.value||(Cs().b[0][1]++,this.props.default)||(Cs().b[0][2]++,[]));return Cs().s[2]++,e[e.length-1]!==""?(Cs().b[1][0]++,Cs().s[3]++,e.concat("")):(Cs().b[1][1]++,Cs().s[4]++,e)}changeFont(e,t){Cs().f[1]++;const i=(Cs().s[5]++,this.values.slice(0));Cs().s[6]++,i[e]=t;const r=(Cs().s[7]++,i.filter(o=>(Cs().f[2]++,Cs().s[8]++,o!==void 0)).filter(o=>(Cs().f[3]++,Cs().s[9]++,o!=="")));Cs().s[10]++,this.props.onChange(r)}render(){Cs().f[4]++;const e=(Cs().s[11]++,this.values.map((t,i)=>(Cs().f[5]++,Cs().s[12]++,oe.jsx("li",{children:oe.jsx(RM,{"aria-label":(Cs().b[2][0]++,this.props["aria-label"]||(Cs().b[2][1]++,this.props.name)),value:t,options:this.props.fonts?.map(r=>(Cs().f[6]++,Cs().s[13]++,[r,r])),onChange:this.changeFont.bind(this,i)})},i))));return Cs().s[14]++,oe.jsx("ul",{className:"maputnik-font",children:e})}}function Hi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",e="123acbe81166b3a98d021f01f94ef258a8456edf",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",statementMap:{0:{start:{line:13,column:23},end:{line:13,column:117}},1:{start:{line:16,column:24},end:{line:27,column:5}},2:{start:{line:25,column:30},end:{line:25,column:81}},3:{start:{line:28,column:4},end:{line:145,column:5}},4:{start:{line:30,column:8},end:{line:37,column:10}},5:{start:{line:39,column:24},end:{line:39,column:101}},6:{start:{line:39,column:82},end:{line:39,column:100}},7:{start:{line:40,column:8},end:{line:46,column:10}},8:{start:{line:51,column:8},end:{line:67,column:9}},9:{start:{line:52,column:26},end:{line:52,column:59}},10:{start:{line:53,column:10},end:{line:59,column:12}},11:{start:{line:57,column:42},end:{line:57,column:48}},12:{start:{line:61,column:10},end:{line:66,column:12}},13:{start:{line:69,column:8},end:{line:74,column:10}},14:{start:{line:76,column:8},end:{line:81,column:10}},15:{start:{line:83,column:8},end:{line:111,column:9}},16:{start:{line:84,column:10},end:{line:90,column:12}},17:{start:{line:92,column:10},end:{line:110,column:11}},18:{start:{line:93,column:12},end:{line:100,column:14}},19:{start:{line:102,column:12},end:{line:109,column:14}},20:{start:{line:113,column:8},end:{line:121,column:10}},21:{start:{line:123,column:8},end:{line:131,column:10}},22:{start:{line:133,column:8},end:{line:141,column:10}},23:{start:{line:143,column:8},end:{line:143,column:110}},24:{start:{line:144,column:8},end:{line:144,column:20}},25:{start:{line:148,column:4},end:{line:148,column:124}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:15},end:{line:146,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:25,column:16},end:{line:25,column:17}},loc:{start:{line:25,column:30},end:{line:25,column:81}},line:25},2:{name:"(anonymous_2)",decl:{start:{line:39,column:75},end:{line:39,column:76}},loc:{start:{line:39,column:82},end:{line:39,column:100}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:57,column:35},end:{line:57,column:36}},loc:{start:{line:57,column:42},end:{line:57,column:48}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:147,column:2},end:{line:147,column:3}},loc:{start:{line:147,column:11},end:{line:149,column:3}},line:147}},branchMap:{0:{loc:{start:{line:28,column:4},end:{line:145,column:5}},type:"switch",locations:[{start:{line:29,column:6},end:{line:37,column:10}},{start:{line:38,column:6},end:{line:47,column:7}},{start:{line:48,column:6},end:{line:48,column:27}},{start:{line:49,column:6},end:{line:49,column:23}},{start:{line:50,column:6},end:{line:67,column:9}},{start:{line:68,column:6},end:{line:74,column:10}},{start:{line:75,column:6},end:{line:81,column:10}},{start:{line:82,column:6},end:{line:111,column:9}},{start:{line:112,column:6},end:{line:121,column:10}},{start:{line:122,column:6},end:{line:131,column:10}},{start:{line:132,column:6},end:{line:141,column:10}},{start:{line:142,column:6},end:{line:144,column:20}}],line:28},1:{loc:{start:{line:39,column:36},end:{line:39,column:69}},type:"binary-expr",locations:[{start:{line:39,column:36},end:{line:39,column:63}},{start:{line:39,column:67},end:{line:39,column:69}}],line:39},2:{loc:{start:{line:51,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:51,column:8},end:{line:67,column:9}},{start:{line:60,column:15},end:{line:67,column:9}}],line:51},3:{loc:{start:{line:52,column:26},end:{line:52,column:59}},type:"binary-expr",locations:[{start:{line:52,column:26},end:{line:52,column:53}},{start:{line:52,column:57},end:{line:52,column:59}}],line:52},4:{loc:{start:{line:83,column:8},end:{line:111,column:9}},type:"if",locations:[{start:{line:83,column:8},end:{line:111,column:9}},{start:{line:91,column:15},end:{line:111,column:9}}],line:83},5:{loc:{start:{line:92,column:10},end:{line:110,column:11}},type:"if",locations:[{start:{line:92,column:10},end:{line:110,column:11}},{start:{line:101,column:17},end:{line:110,column:11}}],line:92},6:{loc:{start:{line:119,column:19},end:{line:119,column:90}},type:"cond-expr",locations:[{start:{line:119,column:53},end:{line:119,column:69}},{start:{line:119,column:72},end:{line:119,column:90}}],line:119},7:{loc:{start:{line:129,column:19},end:{line:129,column:90}},type:"cond-expr",locations:[{start:{line:129,column:53},end:{line:129,column:69}},{start:{line:129,column:72},end:{line:129,column:90}}],line:129},8:{loc:{start:{line:138,column:19},end:{line:138,column:90}},type:"cond-expr",locations:[{start:{line:138,column:53},end:{line:138,column:69}},{start:{line:138,column:72},end:{line:138,column:90}}],line:138}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx"],names:[],mappings:"AAyDQ;AAzDR,OAAO,WAAkC;AAEzC,OAAO,gBAA0C;AACjD,OAAO,iBAA4C;AACnD,OAAO,mBAAgD;AACvD,OAAO,iBAA4C;AACnD,OAAO,gBAA0C;AACjD,OAAO,uBAAwD;AAC/D,OAAO,eAAwC;AAC/C,OAAO,uBAAwD;AAC/D,OAAO,eAAwC;AAC/C,OAAO,gBAAgB;AAEvB,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AA2BpH,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EAErE,aAAa;AACX,UAAM,cAAc;AAAA,MAClB,WAAW,KAAK,MAAM;AAAA,MACtB,OAAO,KAAK,MAAM;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,SAAS,KAAK,MAAM,WAAW;AAAA,MAC/B,MAAM,KAAK,MAAM;AAAA,MACjB,eAAe,sBAAsB,KAAK,MAAM;AAAA,MAChD,UAAU,CAAC,aAAmE,KAAK,MAAM,SAAU,KAAK,MAAM,WAAW,QAAQ;AAAA,MACjI,cAAc,KAAK,MAAM,YAAY;AAAA,IACvC;AACA,YAAO,KAAK,MAAM,WAAW,MAAM;AAAA,MACjC,KAAK;AAAU,eACb;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,KAAK,KAAK,MAAM,UAAU;AAAA,YAC1B,KAAK,KAAK,MAAM,UAAU;AAAA;AAAA,QAC5B;AAAA,MAEF,KAAK,QAAQ;AACX,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,UAAU,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAE1F,eAAO;AAAA,UAAC;AAAA;AAAA,YACL,GAAG;AAAA,YACJ;AAAA;AAAA,QACF;AAAA,MACF;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,YAAI,eAAe,QAAQ,KAAK,MAAM,SAAU,KAAK,GAAG;AACtD,gBAAM,UAAU,KAAK,MAAM,UAAU,UAAU,CAAC;AAChD,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,SAAS,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,UAClC;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA;AAAA,UACN;AAAA,QACF;AAAA,MACF,KAAK;AAAS,eACZ;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AACH,YAAG,KAAK,MAAM,cAAc,aAAa;AACvC,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,OAAO,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9B;AAAA,QACF,OAAO;AACL,cAAI,KAAK,MAAM,UAAU,QAAQ;AAC/B,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,MAAM,KAAK,MAAM,UAAU;AAAA,gBAC3B,QAAQ,KAAK,MAAM,UAAU;AAAA;AAAA,YAC/B;AAAA,UACF,OAAO;AACL,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,WAAW,KAAK,MAAM;AAAA,gBACtB,MAAM,KAAK,MAAM,UAAU;AAAA;AAAA,YAC7B;AAAA,UACF;AAAA,QACF;AAAA,MACF,KAAK;AAAe,eAClB;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,WAAW,KAAK,MAAM;AAAA,YACtB,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA;AAAA,QAChF;AAAA,MAEF,KAAK;AAAc,eACjB;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,WAAW,KAAK,MAAM;AAAA,YACtB,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA;AAAA,QAChF;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA,YAC9E,QAAQ;AAAA;AAAA,QACV;AAAA,MAEF;AACE,gBAAQ,KAAK,6BAA6B,KAAK,MAAM,SAAS,UAAU,KAAK,MAAM,WAAW,IAAI,EAAE;AACpG,eAAO;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WACE,oBAAC,SAAI,eAAa,gBAAc,KAAK,MAAM,WACxC,eAAK,WAAW,GACnB;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"123acbe81166b3a98d021f01f94ef258a8456edf"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Hi=function(){return s},s}Hi();const QDe=(Hi().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);class i2 extends In.Component{childNodes(){Hi().f[0]++;const e=(Hi().s[1]++,{fieldSpec:this.props.fieldSpec,label:this.props.label,action:this.props.action,style:this.props.style,value:this.props.value,default:this.props.fieldSpec?.default,name:this.props.fieldName,"data-wd-key":"spec-field-input:"+this.props.fieldName,onChange:t=>(Hi().f[1]++,Hi().s[2]++,this.props.onChange(this.props.fieldName,t)),"aria-label":this.props["aria-label"]});switch(Hi().s[3]++,this.props.fieldSpec?.type){case"number":return Hi().b[0][0]++,Hi().s[4]++,oe.jsx(N1,{...e,min:this.props.fieldSpec.minimum,max:this.props.fieldSpec.maximum});case"enum":Hi().b[0][1]++;{const t=(Hi().s[5]++,Object.keys((Hi().b[1][0]++,this.props.fieldSpec.values||(Hi().b[1][1]++,[]))).map(i=>(Hi().f[2]++,Hi().s[6]++,[i,NK(i)])));return Hi().s[7]++,oe.jsx(aF,{...e,options:t})}case"resolvedImage":Hi().b[0][2]++;case"formatted":Hi().b[0][3]++;case"string":if(Hi().b[0][4]++,Hi().s[8]++,QDe.indexOf(this.props.fieldName)>=0){Hi().b[2][0]++;const t=(Hi().s[9]++,Hi().b[3][0]++,this.props.fieldSpec.values||(Hi().b[3][1]++,[]));return Hi().s[10]++,oe.jsx(RM,{...e,options:t.map(i=>(Hi().f[3]++,Hi().s[11]++,[i,i]))})}else return Hi().b[2][1]++,Hi().s[12]++,oe.jsx(Fm,{...e});case"color":return Hi().b[0][5]++,Hi().s[13]++,oe.jsx(sF,{...e});case"boolean":return Hi().b[0][6]++,Hi().s[14]++,oe.jsx(Lse,{...e});case"array":return Hi().b[0][7]++,Hi().s[15]++,this.props.fieldName==="text-font"?(Hi().b[4][0]++,Hi().s[16]++,oe.jsx(WDe,{...e,fonts:this.props.fieldSpec.values})):(Hi().b[4][1]++,Hi().s[17]++,this.props.fieldSpec.length?(Hi().b[5][0]++,Hi().s[18]++,oe.jsx(mP,{...e,type:this.props.fieldSpec.value,length:this.props.fieldSpec.length})):(Hi().b[5][1]++,Hi().s[19]++,oe.jsx(zS,{...e,fieldSpec:this.props.fieldSpec,type:this.props.fieldSpec.value})));case"numberArray":return Hi().b[0][8]++,Hi().s[20]++,oe.jsx(zS,{...e,fieldSpec:this.props.fieldSpec,type:"number",value:Array.isArray(this.props.value)?(Hi().b[6][0]++,this.props.value):(Hi().b[6][1]++,[this.props.value])});case"colorArray":return Hi().b[0][9]++,Hi().s[21]++,oe.jsx(zS,{...e,fieldSpec:this.props.fieldSpec,type:"color",value:Array.isArray(this.props.value)?(Hi().b[7][0]++,this.props.value):(Hi().b[7][1]++,[this.props.value])});case"padding":return Hi().b[0][10]++,Hi().s[22]++,oe.jsx(mP,{...e,type:"number",value:Array.isArray(this.props.value)?(Hi().b[8][0]++,this.props.value):(Hi().b[8][1]++,[this.props.value]),length:4});default:return Hi().b[0][11]++,Hi().s[23]++,console.warn(`No proper field input for ${this.props.fieldName} type: ${this.props.fieldSpec?.type}`),Hi().s[24]++,null}}render(){return Hi().f[4]++,Hi().s[25]++,oe.jsx("div",{"data-wd-key":"spec-field:"+this.props.fieldName,children:this.childNodes()})}}function jc(){var n="/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",e="92ea2bb9889070368abe40f809481200c126aae8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",statementMap:{0:{start:{line:7,column:17},end:{line:30,column:1}},1:{start:{line:8,column:32},end:{line:8,column:53}},2:{start:{line:9,column:18},end:{line:9,column:67}},3:{start:{line:10,column:22},end:{line:12,column:3}},4:{start:{line:11,column:4},end:{line:11,column:20}},5:{start:{line:13,column:2},end:{line:29,column:7}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:17},end:{line:7,column:18}},loc:{start:{line:7,column:28},end:{line:30,column:1}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:22},end:{line:10,column:23}},loc:{start:{line:10,column:31},end:{line:12,column:3}},line:10}},branchMap:{0:{loc:{start:{line:14,column:4},end:{line:21,column:8}},type:"binary-expr",locations:[{start:{line:14,column:4},end:{line:14,column:19}},{start:{line:14,column:39},end:{line:21,column:8}}],line:14},1:{loc:{start:{line:22,column:4},end:{line:25,column:32}},type:"binary-expr",locations:[{start:{line:22,column:4},end:{line:22,column:20}},{start:{line:22,column:40},end:{line:25,column:32}}],line:22},2:{loc:{start:{line:28,column:4},end:{line:28,column:198}},type:"binary-expr",locations:[{start:{line:28,column:4},end:{line:28,column:19}},{start:{line:28,column:39},end:{line:28,column:198}}],line:28},3:{loc:{start:{line:28,column:104},end:{line:28,column:125}},type:"cond-expr",locations:[{start:{line:28,column:114},end:{line:28,column:116}},{start:{line:28,column:119},end:{line:28,column:125}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx"],names:[],mappings:"AAuBI,SAGM,KAHN;AAvBJ,OAAO,WAA0D;AACjE,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAChB,OAAO,sBAAsB;AAU7B,MAAM,WAAoC,CAAC,UAAU;AACnD,QAAM,CAAC,SAAS,UAAU,IAAI,MAAM,SAAS,KAAK;AAClD,QAAM,UAAU,MAAM,OAAO,iBAAiB,iBAAiB,CAAC;AAEhE,QAAM,cAAc,CAAC,QAAiB;AACpC,eAAW,GAAG;AAAA,EAChB;AAEA,SACE,qBAAC,SAAI,WAAU,wBAAuB,MAAK,SAAQ,mBAAiB,QAAQ,SACzE;AAAA,UAAM,aACL,oBAAC,SAAI,WAAU,8BACb;AAAA,MAAC;AAAA;AAAA,QACC,OAAO,MAAM;AAAA,QACb;AAAA,QACA,WAAW,MAAM;AAAA;AAAA,IACnB,GACF;AAAA,IAED,CAAC,MAAM,aACN,oBAAC,SAAI,WAAW,WAAW;AAAA,MACzB,8BAA8B;AAAA,MAC9B,+BAA+B,MAAM;AAAA,IACvC,CAAC,GACE,gBAAM,OACT;AAAA,IAEF,oBAAC,SAAI,WAAU,+BAA+B,gBAAM,QAAO;AAAA,IAC3D,oBAAC,SAAI,WAAU,gCAAgC,gBAAM,UAAS;AAAA,IAC7D,MAAM,aACL,oBAAC,SAAI,WAAU,uBAAsB,OAAO,EAAE,SAAS,UAAU,KAAK,OAAO,GAC3E,8BAAC,OAAI,WAAW,MAAM,WAAW,GACnC;AAAA,KAEJ;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"92ea2bb9889070368abe40f809481200c126aae8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return jc=function(){return s},s}jc();jc().s[0]++;const uv=n=>{jc().f[0]++;const[e,t]=(jc().s[1]++,In.useState(!1)),i=(jc().s[2]++,In.useRef(B2("fieldset_label_")));jc().s[3]++;const r=o=>{jc().f[1]++,jc().s[4]++,t(o)};return jc().s[5]++,oe.jsxs("div",{className:"maputnik-input-block",role:"group","aria-labelledby":i.current,children:[(jc().b[0][0]++,n.fieldSpec&&(jc().b[0][1]++,oe.jsx("div",{className:"maputnik-input-block-label",children:oe.jsx(lK,{label:n.label,onToggleDoc:r,fieldSpec:n.fieldSpec})}))),(jc().b[1][0]++,!n.fieldSpec&&(jc().b[1][1]++,oe.jsx("div",{className:Ig({"maputnik-input-block-label":!0,"maputnik-input-block--error":n.error}),children:n.label}))),oe.jsx("div",{className:"maputnik-input-block-action",children:n.action}),oe.jsx("div",{className:"maputnik-input-block-content",children:n.children}),(jc().b[2][0]++,n.fieldSpec&&(jc().b[2][1]++,oe.jsx("div",{className:"maputnik-doc-inline",style:{display:e?(jc().b[3][0]++,""):(jc().b[3][1]++,"none")},children:oe.jsx(qB,{fieldSpec:n.fieldSpec})})))]})};function So(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx",e="93d4690989e2b2b09b13eab9ee3382c32a103823",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx",statementMap:{0:{start:{line:6,column:2},end:{line:34,column:3}},1:{start:{line:8,column:6},end:{line:8,column:19}},2:{start:{line:10,column:6},end:{line:10,column:74}},3:{start:{line:12,column:6},end:{line:12,column:19}},4:{start:{line:14,column:6},end:{line:14,column:22}},5:{start:{line:16,column:6},end:{line:16,column:19}},6:{start:{line:18,column:6},end:{line:18,column:19}},7:{start:{line:20,column:6},end:{line:20,column:19}},8:{start:{line:22,column:6},end:{line:22,column:19}},9:{start:{line:24,column:6},end:{line:24,column:19}},10:{start:{line:26,column:6},end:{line:26,column:22}},11:{start:{line:28,column:6},end:{line:28,column:22}},12:{start:{line:30,column:6},end:{line:30,column:22}},13:{start:{line:32,column:6},end:{line:32,column:58}},14:{start:{line:33,column:6},end:{line:33,column:19}},15:{start:{line:36,column:18},end:{line:39,column:1}},16:{start:{line:37,column:20},end:{line:37,column:55}},17:{start:{line:38,column:2},end:{line:38,column:190}}},fnMap:{0:{name:"getElementFromType",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:39},end:{line:35,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:29},end:{line:39,column:1}},line:36}},branchMap:{0:{loc:{start:{line:6,column:2},end:{line:34,column:3}},type:"switch",locations:[{start:{line:7,column:4},end:{line:8,column:19}},{start:{line:9,column:4},end:{line:10,column:74}},{start:{line:11,column:4},end:{line:12,column:19}},{start:{line:13,column:4},end:{line:14,column:22}},{start:{line:15,column:4},end:{line:16,column:19}},{start:{line:17,column:4},end:{line:18,column:19}},{start:{line:19,column:4},end:{line:20,column:19}},{start:{line:21,column:4},end:{line:22,column:19}},{start:{line:23,column:4},end:{line:24,column:19}},{start:{line:25,column:4},end:{line:26,column:22}},{start:{line:27,column:4},end:{line:28,column:22}},{start:{line:29,column:4},end:{line:30,column:22}},{start:{line:31,column:4},end:{line:33,column:19}}],line:6},1:{loc:{start:{line:10,column:13},end:{line:10,column:73}},type:"cond-expr",locations:[{start:{line:10,column:57},end:{line:10,column:65}},{start:{line:10,column:68},end:{line:10,column:73}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx"],names:[],mappings:"AA2CM;AA3CN,OAAO,WAAgC;AACvC,OAAO,eAA4D;AACnE,OAAO,cAAsC;AAE7C,SAAS,mBAAmB,WAAyF;AACnH,UAAO,UAAU,MAAM;AAAA,IACrB,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAQ,OAAO,KAAK,UAAU,MAAO,EAAE,UAAU,IAAI,WAAW;AAAA,IAClE,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT;AACE,cAAQ,KAAK,uBAAuB,UAAU,IAAI;AAClD,aAAO;AAAA,EACX;AACF;AAIA,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,YAAY,mBAAmB,MAAM,SAAU;AAErD,SACE,oBAAC,aAAU,OAAO,MAAM,OAAO,QAAQ,MAAM,QAAQ,WAAW,MAAM,WAAW,OAAO,MAAM,OAC5F,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"93d4690989e2b2b09b13eab9ee3382c32a103823"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return So=function(){return s},s}So();function qDe(n){switch(So().f[0]++,So().s[0]++,n.type){case"color":return So().b[0][0]++,So().s[1]++,cs;case"enum":return So().b[0][1]++,So().s[2]++,Object.keys(n.values).length<=3?(So().b[1][0]++,uv):(So().b[1][1]++,cs);case"boolean":return So().b[0][2]++,So().s[3]++,cs;case"array":return So().b[0][3]++,So().s[4]++,uv;case"resolvedImage":return So().b[0][4]++,So().s[5]++,cs;case"number":return So().b[0][5]++,So().s[6]++,cs;case"string":return So().b[0][6]++,So().s[7]++,cs;case"formatted":return So().b[0][7]++,So().s[8]++,cs;case"padding":return So().b[0][8]++,So().s[9]++,cs;case"numberArray":return So().b[0][9]++,So().s[10]++,uv;case"colorArray":return So().b[0][10]++,So().s[11]++,uv;case"variableAnchorOffsetCollection":return So().b[0][11]++,So().s[12]++,uv;default:return So().b[0][12]++,So().s[13]++,console.warn("No such type for: "+n.type),So().s[14]++,cs}}So().s[15]++;const YDe=n=>{So().f[1]++;const e=(So().s[16]++,qDe(n.fieldSpec));return So().s[17]++,oe.jsx(e,{label:n.label,action:n.action,fieldSpec:n.fieldSpec,error:n.error,children:oe.jsx(i2,{...n})})};function pu(){var n="/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",e="8e77c8fbe0fbc5796ba925837fc7526418b4854b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:60,column:5}},2:{start:{line:11,column:52},end:{line:19,column:7}},3:{start:{line:20,column:50},end:{line:28,column:7}},4:{start:{line:30,column:6},end:{line:40,column:7}},5:{start:{line:31,column:8},end:{line:39,column:10}},6:{start:{line:41,column:6},end:{line:45,column:11}},7:{start:{line:46,column:11},end:{line:60,column:5}},8:{start:{line:47,column:51},end:{line:56,column:7}},9:{start:{line:57,column:6},end:{line:57,column:76}},10:{start:{line:59,column:6},end:{line:59,column:44}},11:{start:{line:63,column:29},end:{line:63,column:76}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:61,column:3}},line:8}},branchMap:{0:{loc:{start:{line:10,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:60,column:5}},{start:{line:46,column:11},end:{line:60,column:5}}],line:10},1:{loc:{start:{line:30,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30},2:{loc:{start:{line:46,column:11},end:{line:60,column:5}},type:"if",locations:[{start:{line:46,column:11},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:46}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx"],names:[],mappings:"AA0BU,cAsBG,YAtBH;AA1BV,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,aAAa,qBAAoB;AACzC,SAAS,sBAAsB;AAC/B,SAA+B,uBAAuB;AAUtD,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,KAAK,MAAM,UAAU,YAAY,WAAW,SAAS,MAAM,GAAG;AAChE,YAAM,wBACJ;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uBAAuB;AAAA,UAEhC,8BAAC,kBAAe;AAAA;AAAA,MAClB;AAGF,YAAM,sBAAsB;AAAA,QAAC;AAAA;AAAA,UAC3B,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uCAAuC;AAAA,UAEhD,8BAAC,eAAY;AAAA;AAAA,MACf;AAEA,UAAI;AACJ,UAAI,KAAK,MAAM,UAAU,eAAe,MAAM,eAAe;AAC3D,8BAAsB;AAAA,UAAC;AAAA;AAAA,YACrB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,OAAO,EAAE,mCAAmC;AAAA,YAE5C,8BAAC,iBAAc;AAAA;AAAA,QACjB;AAAA,MACF;AACA,aAAO,qBAAC,SACL;AAAA;AAAA,QACA;AAAA,QACA;AAAA,SACH;AAAA,IACF,WAAW,KAAK,MAAM,UAAU,YAAY,WAAW,SAAS,WAAW,GAAG;AAC5E,YAAM,uBAAuB;AAAA,QAAC;AAAA;AAAA,UAC5B,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,4CAA4C;AAAA,UACrD,eAAY;AAAA,UAEZ,8BAAC,eAAY;AAAA;AAAA,MACf;AACA,aAAO,oBAAC,SAAK,gCAAqB;AAAA,IACpC,OAAO;AACL,aAAO,oBAAC,SAAI;AAAA,IACd;AAAA,EACF;AACF;AAEA,MAAM,uBAAuB,gBAAgB,EAAE,4BAA4B;AAC3E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8e77c8fbe0fbc5796ba925837fc7526418b4854b"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return pu=function(){return s},s}pu();class VDe extends In.Component{render(){pu().f[0]++;const e=(pu().s[0]++,this.props.t);if(pu().s[1]++,this.props.fieldSpec.expression?.parameters.includes("zoom")){pu().b[0][0]++;const t=(pu().s[2]++,oe.jsx(Ks,{className:"maputnik-make-zoom-function",onClick:this.props.onExpressionClick,title:e("Convert to expression"),children:oe.jsx(U5,{})})),i=(pu().s[3]++,oe.jsx(Ks,{className:"maputnik-make-zoom-function",onClick:this.props.onZoomClick,title:e("Convert property into a zoom function"),children:oe.jsx(Gz,{})}));let r;return pu().s[4]++,this.props.fieldSpec["property-type"]==="data-driven"?(pu().b[1][0]++,pu().s[5]++,r=oe.jsx(Ks,{className:"maputnik-make-data-function",onClick:this.props.onDataClick,title:e("Convert property to data function"),children:oe.jsx(Sfe,{})})):pu().b[1][1]++,pu().s[6]++,oe.jsxs("div",{children:[t,r,i]})}else if(pu().b[0][1]++,pu().s[7]++,this.props.fieldSpec.expression?.parameters.includes("elevation")){pu().b[2][0]++;const t=(pu().s[8]++,oe.jsx(Ks,{className:"maputnik-make-elevation-function",onClick:this.props.onElevationClick,title:e("Convert property into a elevation function"),"data-wd-key":"make-elevation-function",children:oe.jsx(Gz,{})}));return pu().s[9]++,oe.jsx("div",{children:t})}else return pu().b[2][1]++,pu().s[10]++,oe.jsx("div",{})}}const $De=(pu().s[11]++,Do()(VDe));function X0(){var n="/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",e="3e6c7200aa37e60f3f49ecaa91bce3a63befeb7e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",statementMap:{0:{start:{line:7,column:24},end:{line:9,column:3}},1:{start:{line:11,column:45},end:{line:11,column:55}},2:{start:{line:12,column:40},end:{line:21,column:5}},3:{start:{line:22,column:18},end:{line:22,column:53}},4:{start:{line:23,column:4},end:{line:32,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:33,column:3}},line:10}},branchMap:{0:{loc:{start:{line:29,column:34},end:{line:29,column:60}},type:"binary-expr",locations:[{start:{line:29,column:34},end:{line:29,column:54}},{start:{line:29,column:58},end:{line:29,column:60}}],line:29}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx"],names:[],mappings:"AA6BwB;AA7BxB,OAAO,WAAW;AAElB,OAAO,eAAsC;AAC7C,OAAO,qBAAqB;AAE5B,OAAO,wBAAwB;AAgB/B,qBAAqB,qBAAqB,MAAM,UAA6B;AAAA,EAC3E,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,WAAW,UAAS,IAAI,KAAK;AAE5C,UAAM,cAAc;AAAA,MAAC;AAAA;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QACtB,aAAa,KAAK,MAAM;AAAA,QACxB,aAAa,KAAK,MAAM;AAAA,QACxB,mBAAmB,KAAK,MAAM;AAAA,QAC9B,kBAAkB,KAAK,MAAM;AAAA;AAAA,IAC/B;AAEA,UAAM,QAAQ,OAAQ,YAAU,MAAI,SAAgB;AAEpD,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT;AAAA,QACA,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,mBAAmB,KAAK,MAAM,aAAa,EAAE;AAAA,QACpD,QAAQ;AAAA;AAAA,IACV;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3e6c7200aa37e60f3f49ecaa91bce3a63befeb7e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return X0=function(){return s},s}X0();class HDe extends In.Component{static defaultProps=(X0().s[0]++,{errors:{}});render(){X0().f[0]++;const{errors:e,fieldName:t,fieldType:i}=(X0().s[1]++,this.props),r=(X0().s[2]++,oe.jsx($De,{fieldSpec:this.props.fieldSpec,onZoomClick:this.props.onZoomClick,onDataClick:this.props.onDataClick,onExpressionClick:this.props.onExpressionClick,onElevationClick:this.props.onElevationClick})),o=(X0().s[3]++,e[i+"."+t]);return X0().s[4]++,oe.jsx(YDe,{...this.props,error:o,fieldSpec:this.props.fieldSpec,label:iO((X0().b[0][0]++,this.props.fieldName||(X0().b[0][1]++,""))),action:r})}}function yd(){var n="/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",e="e8906f642b33ab7d7a780fc0db870f7e4872d29c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",statementMap:{0:{start:{line:2,column:12},end:{line:2,column:17}},1:{start:{line:3,column:12},end:{line:3,column:17}},2:{start:{line:4,column:2},end:{line:10,column:3}},3:{start:{line:5,column:4},end:{line:5,column:14}},4:{start:{line:6,column:9},end:{line:10,column:3}},5:{start:{line:7,column:4},end:{line:7,column:13}},6:{start:{line:9,column:4},end:{line:9,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:15},end:{line:1,column:16}},loc:{start:{line:1,column:36},end:{line:11,column:1}},line:1}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:10,column:3}},{start:{line:6,column:9},end:{line:10,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:10,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:10,column:3}},{start:{line:8,column:9},end:{line:10,column:3}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts"],names:[],mappings:"AAAA,wBAAwB,MAAuB,MAAsB;AACnE,QAAM,IAAI,CAAC;AACX,QAAM,IAAI,CAAC;AAEX,MAAG,IAAI,GAAG;AACR,WAAO;AAAA,EACT,WACQ,IAAI,GAAG;AACb,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e8906f642b33ab7d7a780fc0db870f7e4872d29c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return yd=function(){return s},s}yd();function jse(n,e){yd().f[0]++;const t=(yd().s[0]++,+n),i=(yd().s[1]++,+e);return yd().s[2]++,t<i?(yd().b[0][0]++,yd().s[3]++,-1):(yd().b[0][1]++,yd().s[4]++,t>i?(yd().b[1][0]++,yd().s[5]++,1):(yd().b[1][1]++,yd().s[6]++,0))}function vm(){var n="/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",e="2f98128f0f990b67a049c58486c1fab4310fbcfa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:24}},2:{start:{line:5,column:19},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:12,column:35}}},fnMap:{0:{name:"findDefaultFromSpec",decl:{start:{line:1,column:16},end:{line:1,column:35}},loc:{start:{line:1,column:42},end:{line:13,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:12,column:9},end:{line:12,column:34}},type:"binary-expr",locations:[{start:{line:12,column:9},end:{line:12,column:28}},{start:{line:12,column:32},end:{line:12,column:34}}],line:12}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts"],names:[],mappings:"AAGO,gBAAS,oBAAoB,MAAyE;AAC3G,MAAI,OAAO,UAAU,eAAe,KAAK,MAAM,SAAS,GAAG;AACzD,WAAO,KAAK;AAAA,EACd;AAEA,QAAM,WAAW;AAAA,IACf,SAAS;AAAA,IACT,UAAU;AAAA,IACV,WAAW;AAAA,IACX,UAAU;AAAA,IACV,SAAS,CAAC;AAAA,EACZ;AAEA,SAAO,SAAS,KAAK,IAAI,KAAK;AAChC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f98128f0f990b67a049c58486c1fab4310fbcfa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return vm=function(){return s},s}vm();function lp(n){if(vm().f[0]++,vm().s[0]++,Object.prototype.hasOwnProperty.call(n,"default"))return vm().b[0][0]++,vm().s[1]++,n.default;vm().b[0][1]++;const e=(vm().s[2]++,{color:"#000000",string:"",boolean:!1,number:0,array:[]});return vm().s[3]++,vm().b[1][0]++,e[n.type]||(vm().b[1][1]++,"")}function r2(){var n="/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",e="03de18cded5f486201afd886787bbdda710eafe3",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:17,column:6}},2:{start:{line:20,column:25},end:{line:20,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:18,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAQtD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,6BAA6B;AAAA,QAEtC,8BAAC,YAAS;AAAA;AAAA,IACZ;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"03de18cded5f486201afd886787bbdda710eafe3"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return r2=function(){return s},s}r2();class ZDe extends In.Component{render(){r2().f[0]++;const e=(r2().s[0]++,this.props.t);return r2().s[1]++,oe.jsx(Ks,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove zoom level from stop"),children:oe.jsx(jC,{})})}}const Nse=(r2().s[2]++,Do()(ZDe));function Ht(){var n="/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",e="a1f2034e8330e69a4f4de946d81cea8ff55472f7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",statementMap:{0:{start:{line:20,column:2},end:{line:29,column:3}},1:{start:{line:21,column:4},end:{line:28,column:7}},2:{start:{line:22,column:6},end:{line:27,column:7}},3:{start:{line:23,column:8},end:{line:25,column:9}},4:{start:{line:24,column:10},end:{line:24,column:33}},5:{start:{line:26,column:8},end:{line:26,column:39}},6:{start:{line:30,column:2},end:{line:30,column:17}},7:{start:{line:33,column:10},end:{line:35,column:3}},8:{start:{line:37,column:20},end:{line:37,column:55}},9:{start:{line:38,column:4},end:{line:42,column:5}},10:{start:{line:39,column:6},end:{line:41,column:9}},11:{start:{line:45,column:20},end:{line:45,column:45}},12:{start:{line:46,column:4},end:{line:50,column:5}},13:{start:{line:47,column:6},end:{line:49,column:8}},14:{start:{line:51,column:4},end:{line:51,column:16}},15:{start:{line:54,column:4},end:{line:56,column:5}},16:{start:{line:55,column:6},end:{line:55,column:27}},17:{start:{line:57,column:4},end:{line:59,column:5}},18:{start:{line:58,column:6},end:{line:58,column:24}},19:{start:{line:60,column:4},end:{line:60,column:25}},20:{start:{line:63,column:4},end:{line:67,column:5}},21:{start:{line:64,column:6},end:{line:64,column:83}},22:{start:{line:66,column:6},end:{line:66,column:53}},23:{start:{line:71,column:26},end:{line:76,column:70}},24:{start:{line:72,column:6},end:{line:75,column:8}},25:{start:{line:76,column:22},end:{line:76,column:69}},26:{start:{line:77,column:20},end:{line:77,column:22}},27:{start:{line:78,column:4},end:{line:80,column:7}},28:{start:{line:79,column:6},end:{line:79,column:30}},29:{start:{line:81,column:4},end:{line:83,column:7}},30:{start:{line:84,column:4},end:{line:84,column:50}},31:{start:{line:84,column:39},end:{line:84,column:48}},32:{start:{line:86,column:13},end:{line:106,column:3}},33:{start:{line:87,column:4},end:{line:104,column:5}},34:{start:{line:88,column:6},end:{line:91,column:8}},35:{start:{line:93,column:24},end:{line:93,column:61}},36:{start:{line:94,column:6},end:{line:103,column:8}},37:{start:{line:105,column:4},end:{line:105,column:42}},38:{start:{line:108,column:18},end:{line:108,column:56}},39:{start:{line:109,column:4},end:{line:115,column:6}},40:{start:{line:116,column:25},end:{line:116,column:53}},41:{start:{line:117,column:25},end:{line:120,column:5}},42:{start:{line:121,column:4},end:{line:121,column:54}},43:{start:{line:124,column:25},end:{line:127,column:5}},44:{start:{line:128,column:4},end:{line:130,column:5}},45:{start:{line:129,column:6},end:{line:129,column:34}},46:{start:{line:131,column:4},end:{line:131,column:60}},47:{start:{line:134,column:4},end:{line:141,column:5}},48:{start:{line:135,column:6},end:{line:135,column:42}},49:{start:{line:137,column:6},end:{line:140,column:9}},50:{start:{line:144,column:4},end:{line:148,column:5}},51:{start:{line:145,column:6},end:{line:145,column:43}},52:{start:{line:147,column:6},end:{line:147,column:40}},53:{start:{line:149,column:4},end:{line:149,column:58}},54:{start:{line:152,column:14},end:{line:152,column:26}},55:{start:{line:153,column:4},end:{line:155,column:5}},56:{start:{line:154,column:6},end:{line:154,column:78}},57:{start:{line:157,column:4},end:{line:205,column:5}},58:{start:{line:158,column:6},end:{line:204,column:9}},59:{start:{line:159,column:26},end:{line:159,column:77}},60:{start:{line:160,column:20},end:{line:160,column:40}},61:{start:{line:161,column:26},end:{line:161,column:79}},62:{start:{line:162,column:22},end:{line:162,column:29}},63:{start:{line:163,column:46},end:{line:163,column:122}},64:{start:{line:164,column:26},end:{line:169,column:9}},65:{start:{line:168,column:33},end:{line:168,column:97}},66:{start:{line:171,column:8},end:{line:175,column:9}},67:{start:{line:172,column:10},end:{line:172,column:73}},68:{start:{line:174,column:10},end:{line:174,column:73}},69:{start:{line:176,column:24},end:{line:176,column:28}},70:{start:{line:177,column:8},end:{line:188,column:9}},71:{start:{line:178,column:10},end:{line:187,column:15}},72:{start:{line:183,column:37},end:{line:183,column:101}},73:{start:{line:189,column:8},end:{line:203,column:18}},74:{start:{line:199,column:41},end:{line:199,column:110}},75:{start:{line:206,column:4},end:{line:306,column:12}},76:{start:{line:217,column:39},end:{line:217,column:67}},77:{start:{line:235,column:43},end:{line:235,column:68}},78:{start:{line:250,column:39},end:{line:250,column:83}},79:{start:{line:266,column:42},end:{line:266,column:85}},80:{start:{line:309,column:21},end:{line:309,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:18,column:9},end:{line:18,column:20}},loc:{start:{line:18,column:35},end:{line:31,column:1}},line:18},1:{name:"(anonymous_1)",decl:{start:{line:21,column:30},end:{line:21,column:31}},loc:{start:{line:21,column:45},end:{line:28,column:5}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:22},end:{line:43,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:48},end:{line:52,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:34},end:{line:61,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:62,column:2},end:{line:62,column:3}},loc:{start:{line:62,column:34},end:{line:68,column:3}},line:62},6:{name:"(anonymous_6)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:26},end:{line:85,column:3}},line:70},7:{name:"(anonymous_7)",decl:{start:{line:71,column:36},end:{line:71,column:37}},loc:{start:{line:71,column:51},end:{line:76,column:5}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:76,column:12},end:{line:76,column:13}},loc:{start:{line:76,column:22},end:{line:76,column:69}},line:76},9:{name:"(anonymous_9)",decl:{start:{line:78,column:26},end:{line:78,column:27}},loc:{start:{line:78,column:41},end:{line:80,column:5}},line:78},10:{name:"(anonymous_10)",decl:{start:{line:84,column:29},end:{line:84,column:30}},loc:{start:{line:84,column:39},end:{line:84,column:48}},line:84},11:{name:"(anonymous_11)",decl:{start:{line:86,column:13},end:{line:86,column:14}},loc:{start:{line:86,column:35},end:{line:106,column:3}},line:86},12:{name:"(anonymous_12)",decl:{start:{line:107,column:2},end:{line:107,column:3}},loc:{start:{line:107,column:41},end:{line:122,column:3}},line:107},13:{name:"(anonymous_13)",decl:{start:{line:123,column:2},end:{line:123,column:3}},loc:{start:{line:123,column:23},end:{line:132,column:3}},line:123},14:{name:"(anonymous_14)",decl:{start:{line:133,column:2},end:{line:133,column:3}},loc:{start:{line:133,column:26},end:{line:142,column:3}},line:133},15:{name:"(anonymous_15)",decl:{start:{line:143,column:2},end:{line:143,column:3}},loc:{start:{line:143,column:40},end:{line:150,column:3}},line:143},16:{name:"(anonymous_16)",decl:{start:{line:151,column:2},end:{line:151,column:3}},loc:{start:{line:151,column:11},end:{line:307,column:3}},line:151},17:{name:"(anonymous_17)",decl:{start:{line:158,column:46},end:{line:158,column:47}},loc:{start:{line:158,column:61},end:{line:204,column:7}},line:158},18:{name:"(anonymous_18)",decl:{start:{line:168,column:20},end:{line:168,column:21}},loc:{start:{line:168,column:33},end:{line:168,column:97}},line:168},19:{name:"(anonymous_19)",decl:{start:{line:183,column:24},end:{line:183,column:25}},loc:{start:{line:183,column:37},end:{line:183,column:101}},line:183},20:{name:"(anonymous_20)",decl:{start:{line:199,column:24},end:{line:199,column:25}},loc:{start:{line:199,column:41},end:{line:199,column:110}},line:199},21:{name:"(anonymous_21)",decl:{start:{line:217,column:26},end:{line:217,column:27}},loc:{start:{line:217,column:39},end:{line:217,column:67}},line:217},22:{name:"(anonymous_22)",decl:{start:{line:235,column:26},end:{line:235,column:27}},loc:{start:{line:235,column:43},end:{line:235,column:68}},line:235},23:{name:"(anonymous_23)",decl:{start:{line:250,column:26},end:{line:250,column:27}},loc:{start:{line:250,column:39},end:{line:250,column:83}},line:250},24:{name:"(anonymous_24)",decl:{start:{line:266,column:26},end:{line:266,column:27}},loc:{start:{line:266,column:42},end:{line:266,column:85}},line:266}},branchMap:{0:{loc:{start:{line:20,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:20,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},1:{loc:{start:{line:20,column:6},end:{line:20,column:38}},type:"binary-expr",locations:[{start:{line:20,column:6},end:{line:20,column:17}},{start:{line:20,column:21},end:{line:20,column:38}}],line:20},2:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},3:{loc:{start:{line:23,column:8},end:{line:25,column:9}},type:"if",locations:[{start:{line:23,column:8},end:{line:25,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:38,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:38,column:4},end:{line:42,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},5:{loc:{start:{line:46,column:4},end:{line:50,column:5}},type:"if",locations:[{start:{line:46,column:4},end:{line:50,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:54,column:4},end:{line:56,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:56,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},7:{loc:{start:{line:57,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:59,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},8:{loc:{start:{line:63,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:67,column:5}},{start:{line:65,column:11},end:{line:67,column:5}}],line:63},9:{loc:{start:{line:87,column:4},end:{line:104,column:5}},type:"if",locations:[{start:{line:87,column:4},end:{line:104,column:5}},{start:{line:92,column:11},end:{line:104,column:5}}],line:87},10:{loc:{start:{line:93,column:24},end:{line:93,column:61}},type:"cond-expr",locations:[{start:{line:93,column:55},end:{line:93,column:57}},{start:{line:93,column:60},end:{line:93,column:61}}],line:93},11:{loc:{start:{line:108,column:18},end:{line:108,column:56}},type:"binary-expr",locations:[{start:{line:108,column:18},end:{line:108,column:50}},{start:{line:108,column:54},end:{line:108,column:56}}],line:108},12:{loc:{start:{line:112,column:14},end:{line:112,column:58}},type:"cond-expr",locations:[{start:{line:112,column:41},end:{line:112,column:42}},{start:{line:112,column:45},end:{line:112,column:58}}],line:112},13:{loc:{start:{line:128,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:130,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:128},14:{loc:{start:{line:134,column:4},end:{line:141,column:5}},type:"if",locations:[{start:{line:134,column:4},end:{line:141,column:5}},{start:{line:136,column:11},end:{line:141,column:5}}],line:134},15:{loc:{start:{line:134,column:8},end:{line:134,column:70}},type:"binary-expr",locations:[{start:{line:134,column:8},end:{line:134,column:33}},{start:{line:134,column:37},end:{line:134,column:70}}],line:134},16:{loc:{start:{line:144,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:144,column:4},end:{line:148,column:5}},{start:{line:146,column:11},end:{line:148,column:5}}],line:144},17:{loc:{start:{line:153,column:4},end:{line:155,column:5}},type:"if",locations:[{start:{line:153,column:4},end:{line:155,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:153},18:{loc:{start:{line:157,column:4},end:{line:205,column:5}},type:"if",locations:[{start:{line:157,column:4},end:{line:205,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:157},19:{loc:{start:{line:159,column:26},end:{line:159,column:77}},type:"cond-expr",locations:[{start:{line:159,column:56},end:{line:159,column:68}},{start:{line:159,column:71},end:{line:159,column:77}}],line:159},20:{loc:{start:{line:161,column:26},end:{line:161,column:79}},type:"cond-expr",locations:[{start:{line:161,column:56},end:{line:161,column:69}},{start:{line:161,column:72},end:{line:161,column:79}}],line:161},21:{loc:{start:{line:171,column:8},end:{line:175,column:9}},type:"if",locations:[{start:{line:171,column:8},end:{line:175,column:9}},{start:{line:173,column:15},end:{line:175,column:9}}],line:171},22:{loc:{start:{line:177,column:8},end:{line:188,column:9}},type:"if",locations:[{start:{line:177,column:8},end:{line:188,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:177},23:{loc:{start:{line:225,column:8},end:{line:240,column:9}},type:"binary-expr",locations:[{start:{line:225,column:8},end:{line:225,column:45}},{start:{line:225,column:65},end:{line:240,column:9}}],line:225},24:{loc:{start:{line:256,column:8},end:{line:271,column:9}},type:"binary-expr",locations:[{start:{line:256,column:8},end:{line:256,column:18}},{start:{line:256,column:38},end:{line:271,column:9}}],line:256},25:{loc:{start:{line:272,column:8},end:{line:280,column:15}},type:"binary-expr",locations:[{start:{line:272,column:8},end:{line:272,column:18}},{start:{line:272,column:38},end:{line:280,column:15}}],line:272},26:{loc:{start:{line:282,column:10},end:{line:292,column:11}},type:"binary-expr",locations:[{start:{line:282,column:10},end:{line:282,column:20}},{start:{line:282,column:40},end:{line:292,column:11}}],line:282}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx"],names:[],mappings:"AAuO8B,cA8Bf,YA9Be;AAvO9B,OAAO,WAAW;AAClB,SAAQ,sBAAqB;AAC7B,SAAQ,sBAAqB;AAC7B,OAAO,YAAY;AAEnB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAC5B,SAAQ,2BAA0B;AAClC,SAA+B,uBAAuB;AAEtD,OAAO,wBAAwB;AAC/B,OAAO,sBAAsB;AAK7B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI;AAEJ,MAAG,MAAM,SAAS,MAAM,MAAM,OAAO;AACnC,UAAM,MAAM,MAAM,QAAQ,CAAC,MAAM,QAAQ;AACvC,UAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAgCA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,eAAe,YAAY,UAAU;AAAA,IAC/C;AAAA,EACF;AAAA;AAAA,EAGA,iBAAiB,OAAe;AAC9B,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC;AAGjE,UAAM,UAAU,CAAC;AACjB,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,WAAW,CAAC,WAAmB,UAAe;AAC5C,QAAI,MAAM,SAAS,YAAY;AAC7B,cAAQ;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,UAAU,MAAM;AAAA,MAClB;AAAA,IACF,OACK;AACH,YAAM,YAAY,MAAM,SAAS,gBAAgB,KAAK;AACtD,cAAQ;AAAA,QACN,UAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,QAEZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,UAC9E,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,QACjF;AAAA,QACA,GAAG;AAAA,MACL;AAAA,IACF;AACA,SAAK,MAAM,SAAU,WAAW,KAAK;AAAA,EACvC;AAAA,EAEA,WAAW,WAAmB,UAAuD,OAAe;AAClG,UAAM,QAAQ,KAAK,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC;AAEnD,UAAM,SAAS,IAAI;AAAA,MACjB;AAAA,QACE,OAAO,SAAS;AAAA,QAChB,MAAO,SAAS,SAAS,SAAa,IAAI,SAAS;AAAA,MACrD;AAAA,MACA;AAAA,IACF;AAEA,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EAClD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,eAAe,SAAiB;AAC9B,QAAI,YAAY,iBAAiB,KAAK,MAAM,wBAAwB;AAClE,WAAK,MAAM,uBAAuB;AAAA,IACpC,OACK;AACH,WAAK,SAAS,KAAK,MAAM,WAAW;AAAA,QAClC,GAAG,KAAK,MAAM;AAAA,QACd,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,UAAkC,SAAc;AACjE,QAAI,SAAS;AACX,WAAK,MAAM,MAAO,QAAQ,IAAI;AAAA,IAChC,OACK;AACH,aAAO,KAAK,MAAM,MAAO,QAAQ;AAAA,IACnC;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,KAAK,MAAM,KAAK;AAAA,EACtD;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,OAAO,KAAK,MAAM,OAAO,SAAS,aAAa;AACjD,WAAK,MAAM,MAAO,OAAO,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA,IACzE;AAEA,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO,OAAO;AAC3B,mBAAa,KAAK,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,QAAQ;AACrD,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,OAAO;AAC/D,cAAM,MAAO,KAAK,MAAM,KAAK,GAAG;AAChC,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,QAAQ,KAAK,CAAC;AACtE,cAAM,QAAQ,KAAK,CAAC;AACpB,cAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAE3F,cAAM,YAAY;AAAA,UAChB,cAAc,EAAE,aAAa;AAAA,UAC7B,OAAO,EAAE,YAAY;AAAA,UACrB,OAAO;AAAA,UACP,UAAU,CAAC,YAAyC,KAAK,WAAW,KAAK,EAAE,MAAM,WAAW,OAAO,QAAkB,GAAG,KAAK;AAAA,QAC/H;AAEA,YAAI;AACJ,YAAG,KAAK,MAAM,OAAO,SAAS,eAAe;AAC3C,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C,OACK;AACH,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C;AAEA,YAAI,YAAY;AAChB,YAAG,cAAc,QAAW;AAC1B,sBAAY,oBAAC,SACX;AAAA,YAAC;AAAA;AAAA,cACC,cAAW;AAAA,cACX,OAAO;AAAA,cACP,UAAU,aAAW,KAAK,WAAW,KAAK,EAAC,MAAM,SAAS,OAAO,UAAS,GAAG,KAAK;AAAA,cAClF,KAAK;AAAA,cACL,KAAK;AAAA;AAAA,UACP,GACF;AAAA,QACF;AAEA,eAAO,qBAAC,QACN;AAAA,8BAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACC;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,EAAE,cAAc;AAAA,cAC5B,WAAW,KAAK,MAAM;AAAA,cACtB,WAAW,KAAK,MAAM;AAAA,cACtB;AAAA,cACA,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,KAAK,EAAC,MAAM,WAAW,OAAO,UAAS,GAAG,QAAkB;AAAA;AAAA,UACzG,GACF;AAAA,UACA,oBAAC,QACE,yBACH;AAAA,aAlBc,GAmBhB;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAGnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,MAAO;AAAA,gBACzB,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA;AAAA,YACzD,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QACC,KAAK,MAAM,OAAO,SAAS,cAC1B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAGf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAAkB;AAAA;AAAA,YAC/D,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QAEF;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YAGP,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,OAAO,EAAE,8CAA8C;AAAA,gBACvD,UAAU,aAAW,KAAK,mBAAmB,YAAY,OAAO;AAAA;AAAA,YAClE,GACF;AAAA;AAAA,UARI;AAAA,QASN;AAAA,QACC,cACC;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,SAAS;AAAA,YAGlB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,YAAY,KAAK,mBAAmB,WAAW,OAAO;AAAA;AAAA,YACtE;AAAA;AAAA,UAPI;AAAA,QAQN;AAAA,QAED,cACC,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,gCACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAI,YAAE,aAAa,GAAE;AAAA,YACtB,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QAEF,qBAAC,SAAI,WAAU,oBACZ;AAAA,wBACC;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,UAAU;AAAA;AAAA;AAAA,UACf;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,uBAAuB;AAAA;AAAA;AAAA,UAC5B;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a1f2034e8330e69a4f4de946d81cea8ff55472f7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ht=function(){return s},s}Ht();function gH(n,e){Ht().f[0]++;let t;return Ht().s[0]++,Ht().b[1][0]++,n.value&&(Ht().b[1][1]++,n.value.stops)?(Ht().b[0][0]++,Ht().s[1]++,n.value.stops.forEach((i,r)=>{Ht().f[1]++,Ht().s[2]++,Object.prototype.hasOwnProperty.call(e.refs,r)?Ht().b[2][1]++:(Ht().b[2][0]++,Ht().s[3]++,t?Ht().b[3][1]++:(Ht().b[3][0]++,Ht().s[4]++,t={...e}),Ht().s[5]++,t[r]=B2("stop-"))})):Ht().b[0][1]++,Ht().s[6]++,t}class XDe extends In.Component{state=(Ht().s[7]++,{refs:{}});componentDidMount(){Ht().f[2]++;const e=(Ht().s[8]++,gH(this.props,this.state));Ht().s[9]++,e?(Ht().b[4][0]++,Ht().s[10]++,this.setState({refs:e})):Ht().b[4][1]++}static getDerivedStateFromProps(e,t){Ht().f[3]++;const i=(Ht().s[11]++,gH(e,t));return Ht().s[12]++,i?(Ht().b[5][0]++,Ht().s[13]++,{refs:i}):(Ht().b[5][1]++,Ht().s[14]++,null)}getFieldFunctionType(e){return Ht().f[4]++,Ht().s[15]++,e.expression.interpolated?(Ht().b[6][0]++,Ht().s[16]++,"exponential"):(Ht().b[6][1]++,Ht().s[17]++,e.type==="number"?(Ht().b[7][0]++,Ht().s[18]++,"interval"):(Ht().b[7][1]++,Ht().s[19]++,"categorical"))}getDataFunctionTypes(e){return Ht().f[5]++,Ht().s[20]++,e.expression.interpolated?(Ht().b[8][0]++,Ht().s[21]++,["interpolate","categorical","interval","exponential","identity"]):(Ht().b[8][1]++,Ht().s[22]++,["categorical","interval","identity"])}orderStopsByZoom(e){Ht().f[6]++;const t=(Ht().s[23]++,e.map((r,o)=>(Ht().f[7]++,Ht().s[24]++,{ref:this.state.refs[o],data:r})).sort((r,o)=>(Ht().f[8]++,Ht().s[25]++,jse(r.data[0].zoom,o.data[0].zoom)))),i=(Ht().s[26]++,{});return Ht().s[27]++,t.forEach((r,o)=>{Ht().f[9]++,Ht().s[28]++,i[o]=r.ref}),Ht().s[29]++,this.setState({refs:i}),Ht().s[30]++,t.map(r=>(Ht().f[10]++,Ht().s[31]++,r.data))}onChange=(Ht().s[32]++,(e,t)=>{if(Ht().f[11]++,Ht().s[33]++,t.type==="identity")Ht().b[9][0]++,Ht().s[34]++,t={type:t.type,property:t.property};else{Ht().b[9][1]++;const i=(Ht().s[35]++,t.type==="categorical"?(Ht().b[10][0]++,""):(Ht().b[10][1]++,0));Ht().s[36]++,t={property:"",type:t.type,stops:[[{zoom:6,value:i},lp(this.props.fieldSpec)],[{zoom:10,value:i},lp(this.props.fieldSpec)]],...t}}Ht().s[37]++,this.props.onChange(e,t)});changeStop(e,t,i){Ht().f[12]++;const r=(Ht().s[38]++,Ht().b[11][0]++,this.props.value?.stops.slice(0)||(Ht().b[11][1]++,[]));Ht().s[39]++,r[e]=[{value:t.value,zoom:t.zoom===void 0?(Ht().b[12][0]++,0):(Ht().b[12][1]++,t.zoom)},i];const o=(Ht().s[40]++,this.orderStopsByZoom(r)),s=(Ht().s[41]++,{...this.props.value,stops:o});Ht().s[42]++,this.onChange(this.props.fieldName,s)}changeBase(e){Ht().f[13]++;const t=(Ht().s[43]++,{...this.props.value,base:e});Ht().s[44]++,t.base===void 0?(Ht().b[13][0]++,Ht().s[45]++,delete t.base):Ht().b[13][1]++,Ht().s[46]++,this.props.onChange(this.props.fieldName,t)}changeDataType(e){Ht().f[14]++,Ht().s[47]++,Ht().b[15][0]++,e==="interpolate"&&(Ht().b[15][1]++,this.props.onChangeToZoomFunction)?(Ht().b[14][0]++,Ht().s[48]++,this.props.onChangeToZoomFunction()):(Ht().b[14][1]++,Ht().s[49]++,this.onChange(this.props.fieldName,{...this.props.value,type:e}))}changeDataProperty(e,t){Ht().f[15]++,Ht().s[50]++,t?(Ht().b[16][0]++,Ht().s[51]++,this.props.value[e]=t):(Ht().b[16][1]++,Ht().s[52]++,delete this.props.value[e]),Ht().s[53]++,this.onChange(this.props.fieldName,this.props.value)}render(){Ht().f[16]++;const e=(Ht().s[54]++,this.props.t);Ht().s[55]++,typeof this.props.value?.type>"u"?(Ht().b[17][0]++,Ht().s[56]++,this.props.value.type=this.getFieldFunctionType(this.props.fieldSpec)):Ht().b[17][1]++;let t;return Ht().s[57]++,this.props.value?.stops?(Ht().b[18][0]++,Ht().s[58]++,t=this.props.value.stops.map((i,r)=>{Ht().f[17]++;const o=(Ht().s[59]++,typeof i[0]=="object"?(Ht().b[19][0]++,i[0].zoom):(Ht().b[19][1]++,void 0)),s=(Ht().s[60]++,this.state.refs[r]),a=(Ht().s[61]++,typeof i[0]=="object"?(Ht().b[20][0]++,i[0].value):(Ht().b[20][1]++,i[0])),c=(Ht().s[62]++,i[1]),d=(Ht().s[63]++,oe.jsx(Nse,{onClick:this.props.onDeleteStop?.bind(this,r)})),m=(Ht().s[64]++,{"aria-label":e("Input value"),label:e("Data value"),value:a,onChange:B=>(Ht().f[18]++,Ht().s[65]++,this.changeStop(r,{zoom:o,value:B},c))});let v;Ht().s[66]++,this.props.value?.type==="categorical"?(Ht().b[21][0]++,Ht().s[67]++,v=oe.jsx(Fm,{...m})):(Ht().b[21][1]++,Ht().s[68]++,v=oe.jsx(N1,{...m}));let M=(Ht().s[69]++,null);return Ht().s[70]++,o!==void 0?(Ht().b[22][0]++,Ht().s[71]++,M=oe.jsx("div",{children:oe.jsx(N1,{"aria-label":"Zoom",value:o,onChange:B=>(Ht().f[19]++,Ht().s[72]++,this.changeStop(r,{zoom:B,value:a},c)),min:0,max:22})})):Ht().b[22][1]++,Ht().s[73]++,oe.jsxs("tr",{children:[oe.jsx("td",{children:M}),oe.jsx("td",{children:v}),oe.jsx("td",{children:oe.jsx(i2,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:c,onChange:(B,P)=>(Ht().f[20]++,Ht().s[74]++,this.changeStop(r,{zoom:o,value:a},P))})}),oe.jsx("td",{children:d})]},s)})):Ht().b[18][1]++,Ht().s[75]++,oe.jsx("div",{className:"maputnik-data-spec-block",children:oe.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[oe.jsx("legend",{children:iO(this.props.fieldName)}),oe.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[oe.jsx(cs,{label:e("Function"),children:oe.jsx("div",{className:"maputnik-data-spec-property-input",children:oe.jsx(HC,{value:this.props.value.type,onChange:i=>(Ht().f[21]++,Ht().s[76]++,this.changeDataType(i)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})},"function"),(Ht().b[23][0]++,this.props.value?.type!=="identity"&&(Ht().b[23][1]++,oe.jsx(cs,{label:e("Base"),children:oe.jsx("div",{className:"maputnik-data-spec-property-input",children:oe.jsx(i2,{fieldName:"base",fieldSpec:Wr.function.base,value:this.props.value?.base,onChange:(i,r)=>(Ht().f[22]++,Ht().s[77]++,this.changeBase(r))})})},"base"))),oe.jsx(cs,{label:"Property",children:oe.jsx("div",{className:"maputnik-data-spec-property-input",children:oe.jsx(Fm,{value:this.props.value?.property,title:e("Input a data property to base styles off of."),onChange:i=>(Ht().f[23]++,Ht().s[78]++,this.changeDataProperty("property",i))})})},"property"),(Ht().b[24][0]++,t&&(Ht().b[24][1]++,oe.jsx(cs,{label:e("Default"),children:oe.jsx(i2,{fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value?.default,onChange:(i,r)=>(Ht().f[24]++,Ht().s[79]++,this.changeDataProperty("default",r))})},"default"))),(Ht().b[25][0]++,t&&(Ht().b[25][1]++,oe.jsx("div",{className:"maputnik-function-stop",children:oe.jsxs("table",{className:"maputnik-function-stop-table",children:[oe.jsx("caption",{children:e("Stops")}),oe.jsx("thead",{children:oe.jsxs("tr",{children:[oe.jsx("th",{children:e("Zoom")}),oe.jsx("th",{children:e("Input value")}),oe.jsx("th",{rowSpan:2,children:e("Output value")})]})}),oe.jsx("tbody",{children:t})]})}))),oe.jsxs("div",{className:"maputnik-toolbox",children:[(Ht().b[26][0]++,t&&(Ht().b[26][1]++,oe.jsxs(Ks,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[oe.jsx(nO,{style:{verticalAlign:"text-bottom"}}),e("Add stop")]}))),oe.jsxs(Ks,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[oe.jsx(U5,{style:{verticalAlign:"text-bottom"}}),e("Convert to expression")]})]})]})]})})}}const JDe=(Ht().s[80]++,Do()(XDe));function zn(){var n="/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",e="374899057a1493811ae396622fb1b276448ec163",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",statementMap:{0:{start:{line:17,column:16},end:{line:17,column:18}},1:{start:{line:18,column:2},end:{line:29,column:3}},2:{start:{line:19,column:4},end:{line:28,column:7}},3:{start:{line:20,column:6},end:{line:27,column:7}},4:{start:{line:21,column:8},end:{line:23,column:9}},5:{start:{line:22,column:10},end:{line:22,column:33}},6:{start:{line:24,column:8},end:{line:24,column:39}},7:{start:{line:26,column:8},end:{line:26,column:39}},8:{start:{line:30,column:2},end:{line:30,column:17}},9:{start:{line:33,column:24},end:{line:35,column:3}},10:{start:{line:36,column:10},end:{line:38,column:3}},11:{start:{line:40,column:20},end:{line:40,column:55}},12:{start:{line:41,column:4},end:{line:45,column:5}},13:{start:{line:42,column:6},end:{line:44,column:9}},14:{start:{line:48,column:20},end:{line:48,column:45}},15:{start:{line:49,column:4},end:{line:53,column:5}},16:{start:{line:50,column:6},end:{line:52,column:8}},17:{start:{line:54,column:4},end:{line:54,column:16}},18:{start:{line:58,column:26},end:{line:63,column:60}},19:{start:{line:59,column:6},end:{line:62,column:8}},20:{start:{line:63,column:22},end:{line:63,column:59}},21:{start:{line:64,column:20},end:{line:64,column:22}},22:{start:{line:65,column:4},end:{line:67,column:7}},23:{start:{line:66,column:6},end:{line:66,column:30}},24:{start:{line:68,column:4},end:{line:70,column:7}},25:{start:{line:71,column:4},end:{line:71,column:50}},26:{start:{line:71,column:39},end:{line:71,column:48}},27:{start:{line:74,column:18},end:{line:74,column:49}},28:{start:{line:75,column:4},end:{line:75,column:41}},29:{start:{line:76,column:25},end:{line:76,column:53}},30:{start:{line:77,column:25},end:{line:80,column:5}},31:{start:{line:81,column:4},end:{line:81,column:60}},32:{start:{line:84,column:25},end:{line:87,column:5}},33:{start:{line:88,column:4},end:{line:90,column:5}},34:{start:{line:89,column:6},end:{line:89,column:34}},35:{start:{line:91,column:4},end:{line:91,column:60}},36:{start:{line:93,column:19},end:{line:97,column:3}},37:{start:{line:94,column:4},end:{line:96,column:5}},38:{start:{line:95,column:6},end:{line:95,column:46}},39:{start:{line:99,column:14},end:{line:99,column:26}},40:{start:{line:100,column:23},end:{line:133,column:6}},41:{start:{line:101,column:24},end:{line:101,column:31}},42:{start:{line:102,column:20},end:{line:102,column:27}},43:{start:{line:103,column:44},end:{line:103,column:120}},44:{start:{line:104,column:6},end:{line:132,column:8}},45:{start:{line:113,column:43},end:{line:113,column:87}},46:{start:{line:125,column:43},end:{line:125,column:88}},47:{start:{line:134,column:4},end:{line:200,column:12}},48:{start:{line:145,column:39},end:{line:145,column:67}},49:{start:{line:162,column:43},end:{line:162,column:68}},50:{start:{line:203,column:4},end:{line:207,column:5}},51:{start:{line:204,column:6},end:{line:204,column:83}},52:{start:{line:206,column:6},end:{line:206,column:29}},53:{start:{line:210,column:21},end:{line:210,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:16,column:9},end:{line:16,column:20}},loc:{start:{line:16,column:35},end:{line:31,column:1}},line:16},1:{name:"(anonymous_1)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:45},end:{line:28,column:5}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:22},end:{line:46,column:3}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:48},end:{line:55,column:3}},line:47},4:{name:"(anonymous_4)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:26},end:{line:72,column:3}},line:57},5:{name:"(anonymous_5)",decl:{start:{line:58,column:36},end:{line:58,column:37}},loc:{start:{line:58,column:51},end:{line:63,column:5}},line:58},6:{name:"(anonymous_6)",decl:{start:{line:63,column:12},end:{line:63,column:13}},loc:{start:{line:63,column:22},end:{line:63,column:59}},line:63},7:{name:"(anonymous_7)",decl:{start:{line:65,column:26},end:{line:65,column:27}},loc:{start:{line:65,column:41},end:{line:67,column:5}},line:65},8:{name:"(anonymous_8)",decl:{start:{line:71,column:29},end:{line:71,column:30}},loc:{start:{line:71,column:39},end:{line:71,column:48}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:73,column:2},end:{line:73,column:3}},loc:{start:{line:73,column:45},end:{line:82,column:3}},line:73},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:23},end:{line:92,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:93,column:19},end:{line:93,column:20}},loc:{start:{line:93,column:29},end:{line:97,column:3}},line:93},12:{name:"(anonymous_12)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:11},end:{line:201,column:3}},line:98},13:{name:"(anonymous_13)",decl:{start:{line:100,column:51},end:{line:100,column:52}},loc:{start:{line:100,column:66},end:{line:133,column:5}},line:100},14:{name:"(anonymous_14)",decl:{start:{line:113,column:26},end:{line:113,column:27}},loc:{start:{line:113,column:43},end:{line:113,column:87}},line:113},15:{name:"(anonymous_15)",decl:{start:{line:125,column:26},end:{line:125,column:27}},loc:{start:{line:125,column:43},end:{line:125,column:88}},line:125},16:{name:"(anonymous_16)",decl:{start:{line:145,column:26},end:{line:145,column:27}},loc:{start:{line:145,column:39},end:{line:145,column:67}},line:145},17:{name:"(anonymous_17)",decl:{start:{line:162,column:26},end:{line:162,column:27}},loc:{start:{line:162,column:43},end:{line:162,column:68}},line:162},18:{name:"(anonymous_18)",decl:{start:{line:202,column:2},end:{line:202,column:3}},loc:{start:{line:202,column:34},end:{line:208,column:3}},line:202}},branchMap:{0:{loc:{start:{line:18,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:18,column:6},end:{line:18,column:38}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:17}},{start:{line:18,column:21},end:{line:18,column:38}}],line:18},2:{loc:{start:{line:20,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:20,column:6},end:{line:27,column:7}},{start:{line:25,column:13},end:{line:27,column:7}}],line:20},3:{loc:{start:{line:21,column:8},end:{line:23,column:9}},type:"if",locations:[{start:{line:21,column:8},end:{line:23,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},4:{loc:{start:{line:41,column:4},end:{line:45,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:45,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},5:{loc:{start:{line:49,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:53,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},6:{loc:{start:{line:88,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:88,column:4},end:{line:90,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:88},7:{loc:{start:{line:94,column:4},end:{line:96,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:96,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94},8:{loc:{start:{line:94,column:8},end:{line:94,column:67}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:30}},{start:{line:94,column:34},end:{line:94,column:67}}],line:94},9:{loc:{start:{line:203,column:4},end:{line:207,column:5}},type:"if",locations:[{start:{line:203,column:4},end:{line:207,column:5}},{start:{line:205,column:11},end:{line:207,column:5}}],line:203}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx"],names:[],mappings:"AAiK4B,cACf,YADe;AAjK5B,OAAO,WAAW;AAClB,SAAS,sBAAsB;AAC/B,SAAS,sBAAsB;AAC/B,OAAO,YAAY;AACnB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAElB,OAAO,sBAAsB;AAC7B,OAAO,wBAAwB;AAE/B,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAS5B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI,UAAmC,CAAC;AAExC,MAAG,MAAM,SAAU,MAAM,MAAwB,OAAO;AACtD,IAAC,MAAM,MAAwB,MAAM,QAAQ,CAAC,MAAM,QAAgB;AAClE,UAAG,OAAO,UAAU,eAAe,KAAK,CAAC,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B,OAAO;AACL,gBAAQ,GAAG,IAAI,MAAM,KAAK,GAAG;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO;AACT;AA4BA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,iBAAiB,OAA+B;AAC9C,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,GAAI,EAAE,KAAK,CAAC,CAAE,CAAC;AAGzD,UAAM,UAAkC,CAAC;AACzC,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,eAAe,WAAmB,UAA8B,OAAe;AAC7E,UAAM,QAAS,KAAK,MAAM,MAAwB,MAAM,MAAM,CAAC;AAC/D,UAAM,SAAS,IAAI,CAAC,UAAU,KAAK;AAEnC,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,iBAAiB,CAAC,SAAiB;AACjC,QAAI,SAAS,iBAAiB,KAAK,MAAM,wBAAwB;AAC/D,WAAK,MAAM,uBAAuB,IAAI;AAAA,IACxC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,aAAa,KAAK,MAAM,OAAO,MAAM,IAAI,CAAC,MAAM,QAAQ;AAC5D,YAAM,YAAY,KAAK,CAAC;AACxB,YAAM,QAAQ,KAAK,CAAC;AACpB,YAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAC3F,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,gCAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,MAAM;AAAA,gBACpB,OAAO;AAAA,gBACP,UAAU,iBAAe,KAAK,eAAe,KAAK,aAAa,KAAK;AAAA,gBACpE,KAAK;AAAA,gBACL,KAAK;AAAA;AAAA,YACP,GACF;AAAA,YACA,oBAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,cAAc;AAAA,gBAC5B,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB;AAAA,gBACA,UAAU,CAAC,GAAG,aAAa,KAAK,eAAe,KAAK,WAAW,QAAkB;AAAA;AAAA,YACnF,GACF;AAAA,YACA,oBAAC,QACE,yBACH;AAAA;AAAA;AAAA,QAtBK,GAAG,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;AAAA,MAuB5B;AAAA,IACF,CAAC;AAGD,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAEnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAU;AAAA;AAAA,YAC1D,GACF;AAAA;AAAA,QACF;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAEf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAA8B;AAAA;AAAA,YAC3E,GACF;AAAA;AAAA,QACF;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,mEACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QACA,qBAAC,SAAI,WAAU,oBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,UAAU;AAAA;AAAA;AAAA,UACf;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,uBAAuB;AAAA;AAAA;AAAA,UAC5B;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAGlB;AACD,QAAI,UAAU,eAAe,MAAM,eAAe;AAChD,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,aAAa;AAAA,IACvB;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"374899057a1493811ae396622fb1b276448ec163"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return zn=function(){return s},s}zn();function yH(n,e){zn().f[0]++;let t=(zn().s[0]++,{});return zn().s[1]++,zn().b[1][0]++,n.value&&(zn().b[1][1]++,n.value.stops)?(zn().b[0][0]++,zn().s[2]++,n.value.stops.forEach((i,r)=>{zn().f[1]++,zn().s[3]++,Object.prototype.hasOwnProperty.call(!e.refs,r)?(zn().b[2][0]++,zn().s[4]++,t?zn().b[3][1]++:(zn().b[3][0]++,zn().s[5]++,t={...e}),zn().s[6]++,t[r]=B2("stop-")):(zn().b[2][1]++,zn().s[7]++,t[r]=e.refs[r])})):zn().b[0][1]++,zn().s[8]++,t}class eRe extends In.Component{static defaultProps=(zn().s[9]++,{errors:{}});state=(zn().s[10]++,{refs:{}});componentDidMount(){zn().f[2]++;const e=(zn().s[11]++,yH(this.props,this.state));zn().s[12]++,e?(zn().b[4][0]++,zn().s[13]++,this.setState({refs:e})):zn().b[4][1]++}static getDerivedStateFromProps(e,t){zn().f[3]++;const i=(zn().s[14]++,yH(e,t));return zn().s[15]++,i?(zn().b[5][0]++,zn().s[16]++,{refs:i}):(zn().b[5][1]++,zn().s[17]++,null)}orderStopsByZoom(e){zn().f[4]++;const t=(zn().s[18]++,e.map((r,o)=>(zn().f[5]++,zn().s[19]++,{ref:this.state.refs[o],data:r})).sort((r,o)=>(zn().f[6]++,zn().s[20]++,jse(r.data[0],o.data[0])))),i=(zn().s[21]++,{});return zn().s[22]++,t.forEach((r,o)=>{zn().f[7]++,zn().s[23]++,i[o]=r.ref}),zn().s[24]++,this.setState({refs:i}),zn().s[25]++,t.map(r=>(zn().f[8]++,zn().s[26]++,r.data))}changeZoomStop(e,t,i){zn().f[9]++;const r=(zn().s[27]++,this.props.value.stops.slice(0));zn().s[28]++,r[e]=[t,i];const o=(zn().s[29]++,this.orderStopsByZoom(r)),s=(zn().s[30]++,{...this.props.value,stops:o});zn().s[31]++,this.props.onChange(this.props.fieldName,s)}changeBase(e){zn().f[10]++;const t=(zn().s[32]++,{...this.props.value,base:e});zn().s[33]++,t.base===void 0?(zn().b[6][0]++,zn().s[34]++,delete t.base):zn().b[6][1]++,zn().s[35]++,this.props.onChange(this.props.fieldName,t)}changeDataType=(zn().s[36]++,e=>{zn().f[11]++,zn().s[37]++,zn().b[8][0]++,e!=="interpolate"&&(zn().b[8][1]++,this.props.onChangeToDataFunction)?(zn().b[7][0]++,zn().s[38]++,this.props.onChangeToDataFunction(e)):zn().b[7][1]++});render(){zn().f[12]++;const e=(zn().s[39]++,this.props.t),t=(zn().s[40]++,this.props.value?.stops.map((i,r)=>{zn().f[13]++;const o=(zn().s[41]++,i[0]),s=(zn().s[42]++,i[1]),a=(zn().s[43]++,oe.jsx(Nse,{onClick:this.props.onDeleteStop?.bind(this,r)}));return zn().s[44]++,oe.jsxs("tr",{children:[oe.jsx("td",{children:oe.jsx(N1,{"aria-label":e("Zoom"),value:o,onChange:c=>(zn().f[14]++,zn().s[45]++,this.changeZoomStop(r,c,s)),min:0,max:22})}),oe.jsx("td",{children:oe.jsx(i2,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:s,onChange:(c,d)=>(zn().f[15]++,zn().s[46]++,this.changeZoomStop(r,o,d))})}),oe.jsx("td",{children:a})]},`${i[0]}-${i[1]}`)}));return zn().s[47]++,oe.jsx("div",{className:"maputnik-data-spec-block",children:oe.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[oe.jsx("legend",{children:iO(this.props.fieldName)}),oe.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[oe.jsx(cs,{label:e("Function"),children:oe.jsx("div",{className:"maputnik-data-spec-property-input",children:oe.jsx(HC,{value:"interpolate",onChange:i=>(zn().f[16]++,zn().s[48]++,this.changeDataType(i)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})}),oe.jsx(cs,{label:e("Base"),children:oe.jsx("div",{className:"maputnik-data-spec-property-input",children:oe.jsx(i2,{fieldName:"base",fieldSpec:Wr.function.base,value:this.props.value?.base,onChange:(i,r)=>(zn().f[17]++,zn().s[49]++,this.changeBase(r))})})}),oe.jsx("div",{className:"maputnik-function-stop",children:oe.jsxs("table",{className:"maputnik-function-stop-table maputnik-function-stop-table--zoom",children:[oe.jsx("caption",{children:e("Stops")}),oe.jsx("thead",{children:oe.jsxs("tr",{children:[oe.jsx("th",{children:e("Zoom")}),oe.jsx("th",{rowSpan:2,children:e("Output value")})]})}),oe.jsx("tbody",{children:t})]})}),oe.jsxs("div",{className:"maputnik-toolbox",children:[oe.jsxs(Ks,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[oe.jsx(nO,{style:{verticalAlign:"text-bottom"}}),e("Add stop")]}),oe.jsxs(Ks,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[oe.jsx(U5,{style:{verticalAlign:"text-bottom"}}),e("Convert to expression")]})]})]})]})})}getDataFunctionTypes(e){return zn().f[18]++,zn().s[50]++,e["property-type"]==="data-driven"?(zn().b[9][0]++,zn().s[51]++,["interpolate","categorical","interval","exponential","identity"]):(zn().b[9][1]++,zn().s[52]++,["interpolate"])}}const tRe=(zn().s[53]++,Do()(eRe));function ht(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",e="cec93a709e0799aecc929100cb853febe363652d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",statementMap:{0:{start:{line:10,column:2},end:{line:10,column:78}},1:{start:{line:13,column:2},end:{line:13,column:74}},2:{start:{line:16,column:2},end:{line:18,column:5}},3:{start:{line:17,column:4},end:{line:17,column:52}},4:{start:{line:21,column:2},end:{line:21,column:123}},5:{start:{line:24,column:2},end:{line:26,column:5}},6:{start:{line:25,column:4},end:{line:25,column:83}},7:{start:{line:29,column:2},end:{line:29,column:64}},8:{start:{line:32,column:16},end:{line:32,column:47}},9:{start:{line:33,column:2},end:{line:33,column:38}},10:{start:{line:36,column:2},end:{line:38,column:3}},11:{start:{line:37,column:4},end:{line:37,column:37}},12:{start:{line:39,column:2},end:{line:39,column:15}},13:{start:{line:42,column:2},end:{line:62,column:3}},14:{start:{line:43,column:4},end:{line:43,column:19}},15:{start:{line:44,column:9},end:{line:62,column:3}},16:{start:{line:45,column:4},end:{line:45,column:19}},17:{start:{line:46,column:9},end:{line:62,column:3}},18:{start:{line:47,column:4},end:{line:47,column:19}},19:{start:{line:48,column:9},end:{line:62,column:3}},20:{start:{line:49,column:4},end:{line:49,column:19}},21:{start:{line:50,column:9},end:{line:62,column:3}},22:{start:{line:51,column:4},end:{line:51,column:19}},23:{start:{line:52,column:9},end:{line:62,column:3}},24:{start:{line:53,column:4},end:{line:53,column:19}},25:{start:{line:54,column:9},end:{line:62,column:3}},26:{start:{line:55,column:4},end:{line:55,column:19}},27:{start:{line:56,column:9},end:{line:62,column:3}},28:{start:{line:57,column:4},end:{line:57,column:27}},29:{start:{line:58,column:9},end:{line:62,column:3}},30:{start:{line:59,column:4},end:{line:59,column:27}},31:{start:{line:61,column:4},end:{line:61,column:24}},32:{start:{line:64,column:22},end:{line:302,column:1}},33:{start:{line:65,column:34},end:{line:67,column:3}},34:{start:{line:68,column:36},end:{line:68,column:57}},35:{start:{line:69,column:2},end:{line:73,column:48}},36:{start:{line:70,column:4},end:{line:72,column:5}},37:{start:{line:71,column:6},end:{line:71,column:61}},38:{start:{line:74,column:31},end:{line:82,column:3}},39:{start:{line:75,column:4},end:{line:77,column:5}},40:{start:{line:76,column:6},end:{line:76,column:27}},41:{start:{line:78,column:4},end:{line:80,column:5}},42:{start:{line:79,column:6},end:{line:79,column:24}},43:{start:{line:81,column:4},end:{line:81,column:25}},44:{start:{line:83,column:18},end:{line:99,column:3}},45:{start:{line:84,column:18},end:{line:84,column:44}},46:{start:{line:85,column:21},end:{line:85,column:44}},47:{start:{line:86,column:4},end:{line:93,column:5}},48:{start:{line:87,column:6},end:{line:90,column:9}},49:{start:{line:92,column:6},end:{line:92,column:49}},50:{start:{line:94,column:25},end:{line:97,column:5}},51:{start:{line:98,column:4},end:{line:98,column:50}},52:{start:{line:100,column:27},end:{line:104,column:3}},53:{start:{line:101,column:37},end:{line:101,column:42}},54:{start:{line:102,column:4},end:{line:102,column:49}},55:{start:{line:103,column:4},end:{line:103,column:25}},56:{start:{line:105,column:21},end:{line:116,column:3}},57:{start:{line:106,column:18},end:{line:106,column:44}},58:{start:{line:107,column:4},end:{line:107,column:29}},59:{start:{line:108,column:23},end:{line:111,column:5}},60:{start:{line:112,column:4},end:{line:114,column:5}},61:{start:{line:113,column:6},end:{line:113,column:33}},62:{start:{line:115,column:4},end:{line:115,column:50}},63:{start:{line:117,column:27},end:{line:146,column:3}},64:{start:{line:118,column:22},end:{line:118,column:27}},65:{start:{line:120,column:4},end:{line:144,column:5}},66:{start:{line:121,column:6},end:{line:136,column:7}},67:{start:{line:122,column:8},end:{line:127,column:10}},68:{start:{line:125,column:12},end:{line:125,column:83}},69:{start:{line:129,column:8},end:{line:135,column:10}},70:{start:{line:138,column:6},end:{line:143,column:8}},71:{start:{line:145,column:4},end:{line:145,column:46}},72:{start:{line:147,column:25},end:{line:159,column:3}},73:{start:{line:148,column:33},end:{line:148,column:38}},74:{start:{line:149,column:4},end:{line:158,column:5}},75:{start:{line:150,column:6},end:{line:153,column:9}},76:{start:{line:154,column:6},end:{line:154,column:27}},77:{start:{line:155,column:11},end:{line:158,column:5}},78:{start:{line:156,column:6},end:{line:156,column:42}},79:{start:{line:157,column:6},end:{line:157,column:27}},80:{start:{line:160,column:18},end:{line:163,column:3}},81:{start:{line:161,column:33},end:{line:161,column:38}},82:{start:{line:162,column:4},end:{line:162,column:140}},83:{start:{line:164,column:25},end:{line:175,column:3}},84:{start:{line:165,column:33},end:{line:165,column:38}},85:{start:{line:167,column:4},end:{line:173,column:5}},86:{start:{line:168,column:6},end:{line:168,column:67}},87:{start:{line:169,column:11},end:{line:173,column:5}},88:{start:{line:170,column:6},end:{line:170,column:43}},89:{start:{line:172,column:6},end:{line:172,column:65}},90:{start:{line:174,column:4},end:{line:174,column:48}},91:{start:{line:176,column:27},end:{line:214,column:3}},92:{start:{line:177,column:25},end:{line:177,column:62}},93:{start:{line:178,column:22},end:{line:178,column:61}},94:{start:{line:179,column:22},end:{line:179,column:27}},95:{start:{line:181,column:4},end:{line:212,column:5}},96:{start:{line:182,column:6},end:{line:201,column:7}},97:{start:{line:183,column:8},end:{line:190,column:10}},98:{start:{line:188,column:12},end:{line:188,column:106}},99:{start:{line:192,column:8},end:{line:200,column:10}},100:{start:{line:203,column:6},end:{line:211,column:8}},101:{start:{line:213,column:4},end:{line:213,column:46}},102:{start:{line:215,column:32},end:{line:226,column:3}},103:{start:{line:216,column:23},end:{line:224,column:5}},104:{start:{line:225,column:4},end:{line:225,column:48}},105:{start:{line:227,column:24},end:{line:229,column:3}},106:{start:{line:228,column:4},end:{line:228,column:23}},107:{start:{line:230,column:26},end:{line:232,column:3}},108:{start:{line:231,column:4},end:{line:231,column:24}},109:{start:{line:233,column:20},end:{line:233,column:120}},110:{start:{line:235,column:2},end:{line:300,column:3}},111:{start:{line:236,column:4},end:{line:251,column:6}},112:{start:{line:252,column:9},end:{line:300,column:3}},113:{start:{line:253,column:4},end:{line:267,column:6}},114:{start:{line:268,column:9},end:{line:300,column:3}},115:{start:{line:269,column:4},end:{line:283,column:6}},116:{start:{line:285,column:4},end:{line:299,column:6}},117:{start:{line:301,column:2},end:{line:301,column:141}}},fnMap:{0:{name:"isLiteralExpression",decl:{start:{line:9,column:9},end:{line:9,column:28}},loc:{start:{line:9,column:36},end:{line:11,column:1}},line:9},1:{name:"isGetExpression",decl:{start:{line:12,column:9},end:{line:12,column:24}},loc:{start:{line:12,column:32},end:{line:14,column:1}},line:12},2:{name:"isZoomField",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:28},end:{line:19,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:16,column:168},end:{line:16,column:169}},loc:{start:{line:16,column:178},end:{line:18,column:3}},line:16},4:{name:"isIdentityProperty",decl:{start:{line:20,column:9},end:{line:20,column:27}},loc:{start:{line:20,column:35},end:{line:22,column:1}},line:20},5:{name:"isDataStopProperty",decl:{start:{line:23,column:9},end:{line:23,column:27}},loc:{start:{line:23,column:35},end:{line:27,column:1}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:24,column:168},end:{line:24,column:169}},loc:{start:{line:24,column:178},end:{line:26,column:3}},line:24},7:{name:"isDataField",decl:{start:{line:28,column:9},end:{line:28,column:20}},loc:{start:{line:28,column:28},end:{line:30,column:1}},line:28},8:{name:"isPrimative",decl:{start:{line:31,column:9},end:{line:31,column:20}},loc:{start:{line:31,column:28},end:{line:34,column:1}},line:31},9:{name:"isArrayOfPrimatives",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:37},end:{line:40,column:1}},line:35},10:{name:"getDataType",decl:{start:{line:41,column:9},end:{line:41,column:20}},loc:{start:{line:41,column:44},end:{line:63,column:1}},line:41},11:{name:"(anonymous_11)",decl:{start:{line:64,column:22},end:{line:64,column:23}},loc:{start:{line:64,column:33},end:{line:302,column:1}},line:64},12:{name:"(anonymous_12)",decl:{start:{line:69,column:18},end:{line:69,column:19}},loc:{start:{line:69,column:24},end:{line:73,column:3}},line:69},13:{name:"(anonymous_13)",decl:{start:{line:74,column:31},end:{line:74,column:32}},loc:{start:{line:74,column:46},end:{line:82,column:3}},line:74},14:{name:"(anonymous_14)",decl:{start:{line:83,column:18},end:{line:83,column:19}},loc:{start:{line:83,column:24},end:{line:99,column:3}},line:83},15:{name:"(anonymous_15)",decl:{start:{line:100,column:27},end:{line:100,column:28}},loc:{start:{line:100,column:33},end:{line:104,column:3}},line:100},16:{name:"(anonymous_16)",decl:{start:{line:105,column:21},end:{line:105,column:22}},loc:{start:{line:105,column:34},end:{line:116,column:3}},line:105},17:{name:"(anonymous_17)",decl:{start:{line:117,column:27},end:{line:117,column:28}},loc:{start:{line:117,column:33},end:{line:146,column:3}},line:117},18:{name:"(anonymous_18)",decl:{start:{line:124,column:33},end:{line:124,column:34}},loc:{start:{line:124,column:43},end:{line:126,column:11}},line:124},19:{name:"(anonymous_19)",decl:{start:{line:147,column:25},end:{line:147,column:26}},loc:{start:{line:147,column:31},end:{line:159,column:3}},line:147},20:{name:"(anonymous_20)",decl:{start:{line:160,column:18},end:{line:160,column:19}},loc:{start:{line:160,column:24},end:{line:163,column:3}},line:160},21:{name:"(anonymous_21)",decl:{start:{line:164,column:25},end:{line:164,column:26}},loc:{start:{line:164,column:31},end:{line:175,column:3}},line:164},22:{name:"(anonymous_22)",decl:{start:{line:176,column:27},end:{line:176,column:28}},loc:{start:{line:176,column:33},end:{line:214,column:3}},line:176},23:{name:"(anonymous_23)",decl:{start:{line:187,column:33},end:{line:187,column:34}},loc:{start:{line:187,column:43},end:{line:189,column:11}},line:187},24:{name:"(anonymous_24)",decl:{start:{line:215,column:32},end:{line:215,column:33}},loc:{start:{line:215,column:38},end:{line:226,column:3}},line:215},25:{name:"(anonymous_25)",decl:{start:{line:227,column:24},end:{line:227,column:25}},loc:{start:{line:227,column:30},end:{line:229,column:3}},line:227},26:{name:"(anonymous_26)",decl:{start:{line:230,column:26},end:{line:230,column:27}},loc:{start:{line:230,column:32},end:{line:232,column:3}},line:230}},branchMap:{0:{loc:{start:{line:10,column:9},end:{line:10,column:77}},type:"binary-expr",locations:[{start:{line:10,column:9},end:{line:10,column:29}},{start:{line:10,column:33},end:{line:10,column:51}},{start:{line:10,column:55},end:{line:10,column:77}}],line:10},1:{loc:{start:{line:13,column:9},end:{line:13,column:73}},type:"binary-expr",locations:[{start:{line:13,column:9},end:{line:13,column:29}},{start:{line:13,column:33},end:{line:13,column:51}},{start:{line:13,column:55},end:{line:13,column:73}}],line:13},2:{loc:{start:{line:16,column:9},end:{line:18,column:4}},type:"binary-expr",locations:[{start:{line:16,column:9},end:{line:16,column:34}},{start:{line:16,column:38},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:90}},{start:{line:16,column:94},end:{line:16,column:120}},{start:{line:16,column:124},end:{line:16,column:146}},{start:{line:16,column:150},end:{line:18,column:4}}],line:16},3:{loc:{start:{line:17,column:11},end:{line:17,column:51}},type:"binary-expr",locations:[{start:{line:17,column:11},end:{line:17,column:30}},{start:{line:17,column:34},end:{line:17,column:51}}],line:17},4:{loc:{start:{line:21,column:9},end:{line:21,column:122}},type:"binary-expr",locations:[{start:{line:21,column:9},end:{line:21,column:34}},{start:{line:21,column:38},end:{line:21,column:63}},{start:{line:21,column:67},end:{line:21,column:122}}],line:21},5:{loc:{start:{line:24,column:9},end:{line:26,column:4}},type:"binary-expr",locations:[{start:{line:24,column:9},end:{line:24,column:34}},{start:{line:24,column:38},end:{line:24,column:49}},{start:{line:24,column:53},end:{line:24,column:90}},{start:{line:24,column:94},end:{line:24,column:116}},{start:{line:24,column:120},end:{line:24,column:146}},{start:{line:24,column:150},end:{line:26,column:4}}],line:24},6:{loc:{start:{line:25,column:11},end:{line:25,column:82}},type:"binary-expr",locations:[{start:{line:25,column:11},end:{line:25,column:30}},{start:{line:25,column:34},end:{line:25,column:51}},{start:{line:25,column:55},end:{line:25,column:82}}],line:25},7:{loc:{start:{line:29,column:9},end:{line:29,column:63}},type:"binary-expr",locations:[{start:{line:29,column:9},end:{line:29,column:34}},{start:{line:29,column:38},end:{line:29,column:63}}],line:29},8:{loc:{start:{line:36,column:2},end:{line:38,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:38,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},9:{loc:{start:{line:41,column:28},end:{line:41,column:42}},type:"default-arg",locations:[{start:{line:41,column:40},end:{line:41,column:42}}],line:41},10:{loc:{start:{line:42,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:62,column:3}},{start:{line:44,column:9},end:{line:62,column:3}}],line:42},11:{loc:{start:{line:44,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:44,column:9},end:{line:62,column:3}},{start:{line:46,column:9},end:{line:62,column:3}}],line:44},12:{loc:{start:{line:46,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:46,column:9},end:{line:62,column:3}},{start:{line:48,column:9},end:{line:62,column:3}}],line:46},13:{loc:{start:{line:46,column:13},end:{line:46,column:69}},type:"binary-expr",locations:[{start:{line:46,column:13},end:{line:46,column:39}},{start:{line:46,column:43},end:{line:46,column:69}}],line:46},14:{loc:{start:{line:48,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:48,column:9},end:{line:62,column:3}},{start:{line:50,column:9},end:{line:62,column:3}}],line:48},15:{loc:{start:{line:48,column:13},end:{line:48,column:75}},type:"binary-expr",locations:[{start:{line:48,column:13},end:{line:48,column:45}},{start:{line:48,column:49},end:{line:48,column:75}}],line:48},16:{loc:{start:{line:50,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:50,column:9},end:{line:62,column:3}},{start:{line:52,column:9},end:{line:62,column:3}}],line:50},17:{loc:{start:{line:52,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:52,column:9},end:{line:62,column:3}},{start:{line:54,column:9},end:{line:62,column:3}}],line:52},18:{loc:{start:{line:54,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:54,column:9},end:{line:62,column:3}},{start:{line:56,column:9},end:{line:62,column:3}}],line:54},19:{loc:{start:{line:56,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:56,column:9},end:{line:62,column:3}},{start:{line:58,column:9},end:{line:62,column:3}}],line:56},20:{loc:{start:{line:58,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:58,column:9},end:{line:62,column:3}},{start:{line:60,column:9},end:{line:62,column:3}}],line:58},21:{loc:{start:{line:70,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:70,column:4},end:{line:72,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:70},22:{loc:{start:{line:75,column:4},end:{line:77,column:5}},type:"if",locations:[{start:{line:75,column:4},end:{line:77,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},23:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},24:{loc:{start:{line:86,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:93,column:5}},{start:{line:91,column:11},end:{line:93,column:5}}],line:86},25:{loc:{start:{line:112,column:4},end:{line:114,column:5}},type:"if",locations:[{start:{line:112,column:4},end:{line:114,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:112},26:{loc:{start:{line:120,column:4},end:{line:144,column:5}},type:"if",locations:[{start:{line:120,column:4},end:{line:144,column:5}},{start:{line:137,column:11},end:{line:144,column:5}}],line:120},27:{loc:{start:{line:121,column:6},end:{line:136,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:136,column:7}},{start:{line:128,column:13},end:{line:136,column:7}}],line:121},28:{loc:{start:{line:125,column:34},end:{line:125,column:81}},type:"binary-expr",locations:[{start:{line:125,column:34},end:{line:125,column:41}},{start:{line:125,column:45},end:{line:125,column:81}}],line:125},29:{loc:{start:{line:140,column:14},end:{line:140,column:59}},type:"binary-expr",locations:[{start:{line:140,column:14},end:{line:140,column:19}},{start:{line:140,column:23},end:{line:140,column:59}}],line:140},30:{loc:{start:{line:141,column:15},end:{line:141,column:60}},type:"binary-expr",locations:[{start:{line:141,column:15},end:{line:141,column:20}},{start:{line:141,column:24},end:{line:141,column:60}}],line:141},31:{loc:{start:{line:149,column:4},end:{line:158,column:5}},type:"if",locations:[{start:{line:149,column:4},end:{line:158,column:5}},{start:{line:155,column:11},end:{line:158,column:5}}],line:149},32:{loc:{start:{line:155,column:11},end:{line:158,column:5}},type:"if",locations:[{start:{line:155,column:11},end:{line:158,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:155},33:{loc:{start:{line:162,column:11},end:{line:162,column:139}},type:"binary-expr",locations:[{start:{line:162,column:11},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:63}},{start:{line:162,column:67},end:{line:162,column:85}},{start:{line:162,column:89},end:{line:162,column:109}},{start:{line:162,column:113},end:{line:162,column:139}}],line:162},34:{loc:{start:{line:167,column:4},end:{line:173,column:5}},type:"if",locations:[{start:{line:167,column:4},end:{line:173,column:5}},{start:{line:169,column:11},end:{line:173,column:5}}],line:167},35:{loc:{start:{line:167,column:8},end:{line:167,column:53}},type:"binary-expr",locations:[{start:{line:167,column:8},end:{line:167,column:33}},{start:{line:167,column:37},end:{line:167,column:53}}],line:167},36:{loc:{start:{line:169,column:11},end:{line:173,column:5}},type:"if",locations:[{start:{line:169,column:11},end:{line:173,column:5}},{start:{line:171,column:11},end:{line:173,column:5}}],line:169},37:{loc:{start:{line:172,column:31},end:{line:172,column:63}},type:"binary-expr",locations:[{start:{line:172,column:31},end:{line:172,column:36}},{start:{line:172,column:40},end:{line:172,column:63}}],line:172},38:{loc:{start:{line:178,column:22},end:{line:178,column:61}},type:"cond-expr",locations:[{start:{line:178,column:55},end:{line:178,column:57}},{start:{line:178,column:60},end:{line:178,column:61}}],line:178},39:{loc:{start:{line:181,column:4},end:{line:212,column:5}},type:"if",locations:[{start:{line:181,column:4},end:{line:212,column:5}},{start:{line:202,column:11},end:{line:212,column:5}}],line:181},40:{loc:{start:{line:182,column:6},end:{line:201,column:7}},type:"if",locations:[{start:{line:182,column:6},end:{line:201,column:7}},{start:{line:191,column:13},end:{line:201,column:7}}],line:182},41:{loc:{start:{line:188,column:57},end:{line:188,column:104}},type:"binary-expr",locations:[{start:{line:188,column:57},end:{line:188,column:64}},{start:{line:188,column:68},end:{line:188,column:104}}],line:188},42:{loc:{start:{line:208,column:42},end:{line:208,column:93}},type:"binary-expr",locations:[{start:{line:208,column:42},end:{line:208,column:53}},{start:{line:208,column:57},end:{line:208,column:93}}],line:208},43:{loc:{start:{line:209,column:43},end:{line:209,column:94}},type:"binary-expr",locations:[{start:{line:209,column:43},end:{line:209,column:54}},{start:{line:209,column:58},end:{line:209,column:94}}],line:209},44:{loc:{start:{line:233,column:20},end:{line:233,column:120}},type:"cond-expr",locations:[{start:{line:233,column:62},end:{line:233,column:89}},{start:{line:233,column:92},end:{line:233,column:120}}],line:233},45:{loc:{start:{line:235,column:2},end:{line:300,column:3}},type:"if",locations:[{start:{line:235,column:2},end:{line:300,column:3}},{start:{line:252,column:9},end:{line:300,column:3}}],line:235},46:{loc:{start:{line:252,column:9},end:{line:300,column:3}},type:"if",locations:[{start:{line:252,column:9},end:{line:300,column:3}},{start:{line:268,column:9},end:{line:300,column:3}}],line:252},47:{loc:{start:{line:268,column:9},end:{line:300,column:3}},type:"if",locations:[{start:{line:268,column:9},end:{line:300,column:3}},{start:{line:284,column:9},end:{line:300,column:3}}],line:268}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0,0],1:[0,0,0],2:[0,0,0,0,0,0],3:[0,0],4:[0,0,0],5:[0,0,0,0,0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0,0,0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx"],names:[],mappings:"AAiVM;AAjVN,OAAO,WAAW;AAElB,OAAO,kBAAkB;AACzB,OAAO,kBAAiC;AACxC,OAAO,kBAAkB;AACzB,OAAO,wBAAwB;AAC/B,SAAQ,YAAY,qBAAoB;AACxC,SAAQ,2BAA0B;AAIlC,SAAS,oBAAoB,OAAY;AACvC,SAAQ,MAAM,QAAQ,KAAK,KAAK,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM;AACrE;AAEA,SAAS,gBAAgB,OAAY;AACnC,SACE,MAAM,QAAQ,KAAK,KACnB,MAAM,WAAW,KACjB,MAAM,CAAC,MAAM;AAEjB;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,SAAS,KACrB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW;AAAA,EAEpB,CAAC;AAEL;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SAAS,cACf,OAAO,UAAU,eAAe,KAAK,OAAO,UAAU;AAE1D;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,MAAM,SAAS,KACrB,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW,KAChB,OAAO,KAAK,CAAC,MAAO;AAAA,EAExB,CAAC;AAEL;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,mBAAmB,KAAK,KACxB,mBAAmB,KAAK;AAE5B;AAEA,SAAS,YAAY,OAAgD;AACnE,QAAM,QAAQ,CAAC,UAAU,WAAW,QAAQ;AAC5C,SAAO,MAAM,SAAS,OAAO,KAAM;AACrC;AAEA,SAAS,oBAAoB,QAAyD;AACpF,MAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,WAAO,OAAO,MAAM,WAAW;AAAA,EACjC;AACA,SAAO;AACT;AAEA,SAAS,YAAY,OAAY,YAAU,CAAC,GAAU;AACpD,MAAI,UAAU,QAAW;AACvB,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW,oBAAoB,KAAK,GAAG;AACjE,WAAO;AAAA,EACT,WACS,UAAU,SAAS,iBAAiB,oBAAoB,KAAK,GAAG;AACvE,WAAO;AAAA,EACT,WACS,UAAU,SAAS,cAAc;AACxC,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW;AACrC,WAAO;AAAA,EACT,WACS,UAAU,SAAS,kCAAkC;AAC5D,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAgBA,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,UAAU,WAAW,IAAI,MAAM;AAAA,IACpC,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,EAC1C;AACA,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,KAAK;AAEtD,QAAM,UAAU,MAAM;AACpB,QAAI,CAAC,WAAW;AACd,kBAAY,YAAY,MAAM,OAAO,MAAM,SAAS,CAAC;AAAA,IACvD;AAAA,EACF,GAAG,CAAC,MAAM,OAAO,MAAM,WAAW,SAAS,CAAC;AAE5C,QAAM,uBAAuB,CAAC,cAAmB;AAC/C,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,QAAI,OAAO,SAAS,CAAC,MAAM,UAAU;AACnC,YAAM,KAAK;AAAA,QACT,EAAE,MAAM,SAAS,CAAC,EAAE,OAAO,GAAG,OAAO,SAAS,CAAC,EAAE,MAAM;AAAA,QACvD,SAAS,CAAC;AAAA,MACZ,CAAC;AAAA,IACH,OAAO;AACL,YAAM,KAAK,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;AAAA,IAC3C;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,WAAW,UAAU,IAAI;AACjC,UAAM,SAAS,WAAW,UAAU,OAAO;AAC3C,gBAAY,OAAO;AAAA,EACrB;AAEA,QAAM,aAAa,CAAC,YAAoB;AACtC,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,OAAO,SAAS,CAAC;AAEvB,QAAI,eAAoB;AAAA,MACtB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,QAAI,MAAM,WAAW,GAAG;AACtB,qBAAe,MAAM,CAAC,EAAE,CAAC;AAAA,IAC3B;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,MAAM,IAAI;AAElB,QAAI;AACJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,KAAK,CAAC,EAAE,MAAM,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACxC,CAAC,IAAI,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC3C;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,OAAO;AAAA,UACL,CAAC,GAAG,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACjD,CAAC,IAAI,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACpD;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAE7B,QAAI,gBAAgB,KAAK,GAAG;AAC1B,YAAM,SAAS,WAAW;AAAA,QACxB,MAAM;AAAA,QACN,UAAU,MAAM,CAAC;AAAA,MACnB,CAAC;AACD,kBAAY,OAAO;AAAA,IACrB,WAAW,oBAAoB,KAAK,GAAG;AACrC,YAAM,SAAS,WAAW,MAAM,CAAC,CAAC;AAClC,kBAAY,OAAO;AAAA,IACrB;AAAA,EACF;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,WACE,gBAAgB,KAAK,KACrB,oBAAoB,KAAK,KACzB,YAAY,KAAK,KAChB,MAAM,QAAQ,KAAK,KAAK,UAAU,SAAS;AAAA,EAEhD;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAI;AAEJ,QAAI,OAAO,UAAU,YAAY,WAAW,OAAO;AACjD,mBAAa,cAAc,gBAAgB,OAAO,SAAS;AAAA,IAC7D,WAAW,mBAAmB,KAAK,GAAG;AACpC,mBAAa,CAAC,OAAO,MAAM,QAAQ;AAAA,IACrC,OAAO;AACL,mBAAa,CAAC,WAAW,SAAS,MAAM,UAAU,OAAO;AAAA,IAC3D;AACA,UAAM,SAAS,MAAM,WAAW,UAAU;AAAA,EAC5C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,eAAe,qBAAqB,MAAM,SAAS;AACzD,UAAM,YAAY,iBAAiB,gBAAgB,KAAK;AACxD,UAAM,EAAE,MAAM,IAAI;AAClB,QAAI;AAEJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,EAAE,MAAM,KAAK,CAAC,GAAG,OAAO,UAAU,GAAG,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC9F,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACpE,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,UAAU;AAAA,QACV,MAAM;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,OAAO;AAAA,UACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACnF,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACtF;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,wBAAwB,MAAM;AAClC,UAAM,aAAa;AAAA,MACjB;AAAA,MACA,CAAC,QAAQ;AAAA,MACT,CAAC,WAAW;AAAA,MACZ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,UAAU;AAAA,EAC5C;AAEA,QAAM,gBAAgB,MAAM;AAC1B,iBAAa,IAAI;AAAA,EACnB;AAEA,QAAM,kBAAkB,MAAM;AAC5B,iBAAa,KAAK;AAAA,EACpB;AAEA,QAAM,YACJ,MAAM,UAAU,YAAY,MAAM,QAAQ,8BAA8B;AAE1E,MAAI;AAEJ,MAAI,aAAa,cAAc;AAC7B,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,MAAM,MAAM,SAAS;AAAA,QACnD;AAAA,QACA,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,SAAS;AAAA,QACT,QAAQ;AAAA;AAAA,IACV;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,OAAO;AACL,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,aAAa;AAAA,QACb,aAAa;AAAA,QACb,mBAAmB;AAAA,QACnB,kBAAkB;AAAA;AAAA,IACpB;AAAA,EAEJ;AAEA,SACE,oBAAC,SAAI,WAAW,WAAW,eAAa,0BAA0B,MAAM,WACrE,qBACH;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cec93a709e0799aecc929100cb853febe363652d"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ht=function(){return s},s}ht();function vH(n){return ht().f[0]++,ht().s[0]++,ht().b[0][0]++,Array.isArray(n)&&(ht().b[0][1]++,n.length===2)&&(ht().b[0][2]++,n[0]==="literal")}function bH(n){return ht().f[1]++,ht().s[1]++,ht().b[1][0]++,Array.isArray(n)&&(ht().b[1][1]++,n.length===2)&&(ht().b[1][2]++,n[0]==="get")}function nRe(n){return ht().f[2]++,ht().s[2]++,ht().b[2][0]++,typeof n=="object"&&(ht().b[2][1]++,n.stops)&&(ht().b[2][2]++,typeof n.property>"u")&&(ht().b[2][3]++,Array.isArray(n.stops))&&(ht().b[2][4]++,n.stops.length>1)&&(ht().b[2][5]++,n.stops.every(e=>(ht().f[3]++,ht().s[3]++,ht().b[3][0]++,Array.isArray(e)&&(ht().b[3][1]++,e.length===2))))}function Gse(n){return ht().f[4]++,ht().s[4]++,ht().b[4][0]++,typeof n=="object"&&(ht().b[4][1]++,n.type==="identity")&&(ht().b[4][2]++,Object.prototype.hasOwnProperty.call(n,"property"))}function iRe(n){return ht().f[5]++,ht().s[5]++,ht().b[5][0]++,typeof n=="object"&&(ht().b[5][1]++,n.stops)&&(ht().b[5][2]++,typeof n.property<"u")&&(ht().b[5][3]++,n.stops.length>1)&&(ht().b[5][4]++,Array.isArray(n.stops))&&(ht().b[5][5]++,n.stops.every(e=>(ht().f[6]++,ht().s[6]++,ht().b[6][0]++,Array.isArray(e)&&(ht().b[6][1]++,e.length===2)&&(ht().b[6][2]++,typeof e[0]=="object"))))}function rRe(n){return ht().f[7]++,ht().s[7]++,ht().b[7][0]++,Gse(n)||(ht().b[7][1]++,iRe(n))}function cF(n){ht().f[8]++;const e=(ht().s[8]++,["string","boolean","number"]);return ht().s[9]++,e.includes(typeof n)}function CH(n){return ht().f[9]++,ht().s[10]++,Array.isArray(n)?(ht().b[8][0]++,ht().s[11]++,n.every(cF)):(ht().b[8][1]++,ht().s[12]++,!1)}function _H(n,e=(ht().b[9][0]++,{})){return ht().f[10]++,ht().s[13]++,n===void 0?(ht().b[10][0]++,ht().s[14]++,"value"):(ht().b[10][1]++,ht().s[15]++,cF(n)?(ht().b[11][0]++,ht().s[16]++,"value"):(ht().b[11][1]++,ht().s[17]++,ht().b[13][0]++,e.type==="array"&&(ht().b[13][1]++,CH(n))?(ht().b[12][0]++,ht().s[18]++,"value"):(ht().b[12][1]++,ht().s[19]++,ht().b[15][0]++,e.type==="numberArray"&&(ht().b[15][1]++,CH(n))?(ht().b[14][0]++,ht().s[20]++,"value"):(ht().b[14][1]++,ht().s[21]++,e.type==="colorArray"?(ht().b[16][0]++,ht().s[22]++,"value"):(ht().b[16][1]++,ht().s[23]++,e.type==="padding"?(ht().b[17][0]++,ht().s[24]++,"value"):(ht().b[17][1]++,ht().s[25]++,e.type==="variableAnchorOffsetCollection"?(ht().b[18][0]++,ht().s[26]++,"value"):(ht().b[18][1]++,ht().s[27]++,nRe(n)?(ht().b[19][0]++,ht().s[28]++,"zoom_function"):(ht().b[19][1]++,ht().s[29]++,rRe(n)?(ht().b[20][0]++,ht().s[30]++,"data_function"):(ht().b[20][1]++,ht().s[31]++,"expression")))))))))}ht().s[32]++;const oRe=n=>{ht().f[11]++;const[e,t]=(ht().s[33]++,In.useState(_H(n.value,n.fieldSpec))),[i,r]=(ht().s[34]++,In.useState(!1));ht().s[35]++,In.useEffect(()=>{ht().f[12]++,ht().s[36]++,i?ht().b[21][1]++:(ht().b[21][0]++,ht().s[37]++,t(_H(n.value,n.fieldSpec)))},[n.value,n.fieldSpec,i]),ht().s[38]++;const o=X=>(ht().f[13]++,ht().s[39]++,X.expression.interpolated?(ht().b[22][0]++,ht().s[40]++,"exponential"):(ht().b[22][1]++,ht().s[41]++,X.type==="number"?(ht().b[23][0]++,ht().s[42]++,"interval"):(ht().b[23][1]++,ht().s[43]++,"categorical")));ht().s[44]++;const s=()=>{ht().f[14]++;const X=(ht().s[45]++,n.value.stops.slice(0)),re=(ht().s[46]++,X[X.length-1]);ht().s[47]++,typeof re[0]=="object"?(ht().b[24][0]++,ht().s[48]++,X.push([{zoom:re[0].zoom+1,value:re[0].value},re[1]])):(ht().b[24][1]++,ht().s[49]++,X.push([re[0]+1,re[1]]));const ie=(ht().s[50]++,{...n.value,stops:X});ht().s[51]++,n.onChange(n.fieldName,ie)};ht().s[52]++;const a=()=>{ht().f[15]++;const{fieldSpec:X,fieldName:re}=(ht().s[53]++,n);ht().s[54]++,n.onChange(re,X.default),ht().s[55]++,t("value")};ht().s[56]++;const c=X=>{ht().f[16]++;const re=(ht().s[57]++,n.value.stops.slice(0));ht().s[58]++,re.splice(X,1);let ie=(ht().s[59]++,{...n.value,stops:re});ht().s[60]++,re.length===1?(ht().b[25][0]++,ht().s[61]++,ie=re[0][1]):ht().b[25][1]++,ht().s[62]++,n.onChange(n.fieldName,ie)};ht().s[63]++;const d=()=>{ht().f[17]++;const{value:X}=(ht().s[64]++,n);let re;ht().s[65]++,typeof X=="object"?(ht().b[26][0]++,ht().s[66]++,X.stops?(ht().b[27][0]++,ht().s[67]++,re={base:X.base,stops:X.stops.map(ie=>(ht().f[18]++,ht().s[68]++,[ie[0].zoom,(ht().b[28][0]++,ie[1]||(ht().b[28][1]++,lp(n.fieldSpec)))]))}):(ht().b[27][1]++,ht().s[69]++,re={base:X.base,stops:[[6,lp(n.fieldSpec)],[10,lp(n.fieldSpec)]]})):(ht().b[26][1]++,ht().s[70]++,re={stops:[[6,(ht().b[29][0]++,X||(ht().b[29][1]++,lp(n.fieldSpec)))],[10,(ht().b[30][0]++,X||(ht().b[30][1]++,lp(n.fieldSpec)))]]}),ht().s[71]++,n.onChange(n.fieldName,re)};ht().s[72]++;const m=()=>{ht().f[19]++;const{value:X,fieldName:re}=(ht().s[73]++,n);ht().s[74]++,bH(X)?(ht().b[31][0]++,ht().s[75]++,n.onChange(re,{type:"identity",property:X[1]}),ht().s[76]++,t("value")):(ht().b[31][1]++,ht().s[77]++,vH(X)?(ht().b[32][0]++,ht().s[78]++,n.onChange(re,X[1]),ht().s[79]++,t("value")):ht().b[32][1]++)};ht().s[80]++;const v=()=>{ht().f[20]++;const{value:X,fieldSpec:re}=(ht().s[81]++,n);return ht().s[82]++,ht().b[33][0]++,bH(X)||(ht().b[33][1]++,vH(X))||(ht().b[33][2]++,cF(X))||(ht().b[33][3]++,Array.isArray(X)&&(ht().b[33][4]++,re.type==="array"))};ht().s[83]++;const M=()=>{ht().f[21]++;const{value:X,fieldSpec:re}=(ht().s[84]++,n);let ie;ht().s[85]++,ht().b[35][0]++,typeof X=="object"&&(ht().b[35][1]++,"stops"in X)?(ht().b[34][0]++,ht().s[86]++,ie=$he.convertFunction(X,re)):(ht().b[34][1]++,ht().s[87]++,Gse(X)?(ht().b[36][0]++,ht().s[88]++,ie=["get",X.property]):(ht().b[36][1]++,ht().s[89]++,ie=["literal",(ht().b[37][0]++,X||(ht().b[37][1]++,n.fieldSpec.default))])),ht().s[90]++,n.onChange(n.fieldName,ie)};ht().s[91]++;const B=()=>{ht().f[22]++;const X=(ht().s[92]++,o(n.fieldSpec)),re=(ht().s[93]++,X==="categorical"?(ht().b[38][0]++,""):(ht().b[38][1]++,0)),{value:ie}=(ht().s[94]++,n);let te;ht().s[95]++,typeof ie=="object"?(ht().b[39][0]++,ht().s[96]++,ie.stops?(ht().b[40][0]++,ht().s[97]++,te={property:"",type:X,base:ie.base,stops:ie.stops.map(q=>(ht().f[23]++,ht().s[98]++,[{zoom:q[0],value:re},(ht().b[41][0]++,q[1]||(ht().b[41][1]++,lp(n.fieldSpec)))]))}):(ht().b[40][1]++,ht().s[99]++,te={property:"",type:X,base:ie.base,stops:[[{zoom:6,value:re},lp(n.fieldSpec)],[{zoom:10,value:re},lp(n.fieldSpec)]]})):(ht().b[39][1]++,ht().s[100]++,te={property:"",type:X,base:ie.base,stops:[[{zoom:6,value:re},(ht().b[42][0]++,n.value||(ht().b[42][1]++,lp(n.fieldSpec)))],[{zoom:10,value:re},(ht().b[43][0]++,n.value||(ht().b[43][1]++,lp(n.fieldSpec)))]]}),ht().s[101]++,n.onChange(n.fieldName,te)};ht().s[102]++;const P=()=>{ht().f[24]++;const X=(ht().s[103]++,["interpolate",["linear"],["elevation"],0,"black",2e3,"white"]);ht().s[104]++,n.onChange(n.fieldName,X)};ht().s[105]++;const U=()=>{ht().f[25]++,ht().s[106]++,r(!0)};ht().s[107]++;const z=()=>{ht().f[26]++,ht().s[108]++,r(!1)},V=(ht().s[109]++,n.fieldSpec.default===n.value?(ht().b[44][0]++,"maputnik-default-property"):(ht().b[44][1]++,"maputnik-modified-property"));let Z;return ht().s[110]++,e==="expression"?(ht().b[45][0]++,ht().s[111]++,Z=oe.jsx(ese,{errors:n.errors,onChange:n.onChange.bind(null,n.fieldName),canUndo:v,onUndo:m,onDelete:a,fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onFocus:U,onBlur:z})):(ht().b[45][1]++,ht().s[112]++,e==="zoom_function"?(ht().b[46][0]++,ht().s[113]++,Z=oe.jsx(tRe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:c,onAddStop:s,onChangeToDataFunction:B,onExpressionClick:M})):(ht().b[46][1]++,ht().s[114]++,e==="data_function"?(ht().b[47][0]++,ht().s[115]++,Z=oe.jsx(JDe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:c,onAddStop:s,onChangeToZoomFunction:d,onExpressionClick:M})):(ht().b[47][1]++,ht().s[116]++,Z=oe.jsx(HDe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onZoomClick:d,onDataClick:B,onExpressionClick:M,onElevationClick:P})))),ht().s[117]++,oe.jsx("div",{className:V,"data-wd-key":"spec-field-container:"+n.fieldName,children:Z})};function Or(){var n="/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",e="2b5da791871b9b38760c659b15188ae0aee85eaa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",statementMap:{0:{start:{line:4,column:23},end:{line:4,column:117}},1:{start:{line:6,column:20},end:{line:6,column:60}},2:{start:{line:7,column:16},end:{line:7,column:49}},3:{start:{line:8,column:20},end:{line:8,column:36}},4:{start:{line:9,column:2},end:{line:14,column:3}},5:{start:{line:10,column:4},end:{line:13,column:6}},6:{start:{line:15,column:2},end:{line:20,column:3}},7:{start:{line:16,column:4},end:{line:19,column:6}},8:{start:{line:21,column:2},end:{line:21,column:19}},9:{start:{line:24,column:16},end:{line:24,column:48}},10:{start:{line:25,column:2},end:{line:25,column:49}},11:{start:{line:28,column:21},end:{line:31,column:3}},12:{start:{line:29,column:18},end:{line:29,column:80}},13:{start:{line:30,column:4},end:{line:30,column:51}},14:{start:{line:33,column:23},end:{line:33,column:33}},15:{start:{line:34,column:19},end:{line:52,column:6}},16:{start:{line:35,column:24},end:{line:35,column:87}},17:{start:{line:36,column:20},end:{line:36,column:48}},18:{start:{line:37,column:21},end:{line:37,column:50}},19:{start:{line:38,column:25},end:{line:38,column:82}},20:{start:{line:39,column:24},end:{line:39,column:63}},21:{start:{line:40,column:6},end:{line:51,column:8}},22:{start:{line:53,column:4},end:{line:53,column:98}}},fnMap:{0:{name:"getFieldSpec",decl:{start:{line:5,column:9},end:{line:5,column:21}},loc:{start:{line:5,column:50},end:{line:22,column:1}},line:5},1:{name:"getGroupName",decl:{start:{line:23,column:9},end:{line:23,column:21}},loc:{start:{line:23,column:50},end:{line:26,column:1}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:28,column:21},end:{line:28,column:22}},loc:{start:{line:28,column:45},end:{line:31,column:3}},line:28},3:{name:"(anonymous_3)",decl:{start:{line:32,column:2},end:{line:32,column:3}},loc:{start:{line:32,column:11},end:{line:54,column:3}},line:32},4:{name:"(anonymous_4)",decl:{start:{line:34,column:46},end:{line:34,column:47}},loc:{start:{line:34,column:61},end:{line:52,column:5}},line:34}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},1:{loc:{start:{line:15,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:24,column:16},end:{line:24,column:48}},type:"binary-expr",locations:[{start:{line:24,column:16},end:{line:24,column:42}},{start:{line:24,column:46},end:{line:24,column:48}}],line:24},3:{loc:{start:{line:25,column:9},end:{line:25,column:48}},type:"cond-expr",locations:[{start:{line:25,column:30},end:{line:25,column:37}},{start:{line:25,column:40},end:{line:25,column:48}}],line:25},4:{loc:{start:{line:36,column:20},end:{line:36,column:48}},type:"binary-expr",locations:[{start:{line:36,column:20},end:{line:36,column:42}},{start:{line:36,column:46},end:{line:36,column:48}}],line:36},5:{loc:{start:{line:37,column:21},end:{line:37,column:50}},type:"binary-expr",locations:[{start:{line:37,column:21},end:{line:37,column:44}},{start:{line:37,column:48},end:{line:37,column:50}}],line:37},6:{loc:{start:{line:38,column:25},end:{line:38,column:82}},type:"cond-expr",locations:[{start:{line:38,column:46},end:{line:38,column:62}},{start:{line:38,column:65},end:{line:38,column:82}}],line:38},7:{loc:{start:{line:39,column:24},end:{line:39,column:63}},type:"cond-expr",locations:[{start:{line:39,column:45},end:{line:39,column:52}},{start:{line:39,column:55},end:{line:39,column:63}}],line:39}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx"],names:[],mappings:"AA4Da;AA5Db,OAAO,WAAW;AAElB,OAAO,mBAAmB;AAI1B,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AAIpH,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,YAAY,aAAa,MAAM,WAAW,SAAS;AACzD,QAAM,QAAQ,KAAK,YAAY,MAAM,SAAS;AAC9C,QAAM,YAAY,MAAM,SAAS;AACjC,MAAG,eAAe,QAAQ,SAAS,KAAK,GAAG;AACzC,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,MAAG,cAAc,aAAa;AAC5B,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,aAAa,MAAW,WAAuC,WAAuC;AAC7G,QAAM,QAAQ,KAAK,WAAW,SAAS,KAAK,CAAC;AAC7C,SAAQ,aAAa,QAAS,UAAU;AAC1C;AAUA,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,mBAAmB,CAAC,UAAkB,aAAkB;AACtD,UAAM,QAAQ,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,QAAQ;AAC3E,SAAK,MAAM,SAAS,OAAO,UAAU,QAAQ;AAAA,EAC/C;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAM,IAAI,KAAK;AACtB,UAAM,SAAS,KAAK,MAAM,YAAY,IAAI,eAAa;AACrD,YAAM,YAAY,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,SAAS;AAEhF,YAAM,QAAQ,KAAK,MAAM,MAAM,SAAS,CAAC;AACzC,YAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAC3C,YAAM,aAAa,aAAa,QAC5B,MAAM,SAA+B,IACrC,OAAO,SAAgC;AAC3C,YAAM,YAAY,aAAa,QAAQ,UAAU;AAEjD,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,UAAU,KAAK;AAAA,UAEf;AAAA,UACA,OAAO;AAAA,UACP;AAAA,UACA;AAAA;AAAA,QAJK;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,2BACnB,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2b5da791871b9b38760c659b15188ae0aee85eaa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Or=function(){return s},s}Or();const sRe=(Or().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);function aRe(n,e,t){Or().f[0]++;const i=(Or().s[1]++,Wse(n,e,t)),r=(Or().s[2]++,n[i+"_"+e]),o=(Or().s[3]++,r[t]);return Or().s[4]++,sRe.indexOf(t)>=0?(Or().b[0][0]++,Or().s[5]++,{...o,values:n.$root.sprite.values}):(Or().b[0][1]++,Or().s[6]++,t==="text-font"?(Or().b[1][0]++,Or().s[7]++,{...o,values:n.$root.glyphs.values}):(Or().b[1][1]++,Or().s[8]++,o))}function Wse(n,e,t){Or().f[1]++;const i=(Or().s[9]++,Or().b[2][0]++,n["paint_"+e]||(Or().b[2][1]++,{}));return Or().s[10]++,t in i?(Or().b[3][0]++,"paint"):(Or().b[3][1]++,"layout")}class lRe extends In.Component{onPropertyChange=(Or().s[11]++,(e,t)=>{Or().f[2]++;const i=(Or().s[12]++,Wse(this.props.spec,this.props.layer.type,e));Or().s[13]++,this.props.onChange(i,e,t)});render(){Or().f[3]++;const{errors:e}=(Or().s[14]++,this.props),t=(Or().s[15]++,this.props.groupFields.map(i=>{Or().f[4]++;const r=(Or().s[16]++,aRe(this.props.spec,this.props.layer.type,i)),o=(Or().s[17]++,Or().b[4][0]++,this.props.layer.paint||(Or().b[4][1]++,{})),s=(Or().s[18]++,Or().b[5][0]++,this.props.layer.layout||(Or().b[5][1]++,{})),a=(Or().s[19]++,i in o?(Or().b[6][0]++,o[i]):(Or().b[6][1]++,s[i])),c=(Or().s[20]++,i in o?(Or().b[7][0]++,"paint"):(Or().b[7][1]++,"layout"));return Or().s[21]++,oe.jsx(oRe,{errors:e,onChange:this.onPropertyChange,fieldName:i,value:a,fieldType:c,fieldSpec:r},i)}));return Or().s[22]++,oe.jsx("div",{className:"maputnik-property-group",children:t})}}function Rx(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",e="6c9e07ebeb2e5c7112c0b70e483a0c61cf0ea981",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",statementMap:{0:{start:{line:12,column:4},end:{line:27,column:9}},1:{start:{line:18,column:27},end:{line:18,column:74}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:11},end:{line:28,column:3}},line:11},1:{name:"(anonymous_1)",decl:{start:{line:18,column:19},end:{line:18,column:20}},loc:{start:{line:18,column:27},end:{line:18,column:74}},line:18}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx"],names:[],mappings:"AA2BQ,SACE,KADF;AA3BR,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAC7C;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAaP,qBAAqB,yBAAyB,MAAM,UAAiC;AAAA,EACnF,SAAS;AACP,WAAO,qBAAC,iBAAc,MAAM,KAAK,MAAM,IACrC;AAAA;AAAA,QAAC;AAAA;AAAA,UAAqB,WAAU;AAAA,UAC9B,eAAa,wBAAsB,KAAK,MAAM,aAAa;AAAA,UAC3D,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,UAE7D,+BAAC,uBAAoB,WAAU,uCAC7B;AAAA,gCAAC,UAAK,OAAO,EAAC,UAAU,GAAG,cAAc,SAAQ,GAAI,eAAK,MAAM,OAAM;AAAA,YACtE,oBAAC,iBAAc,MAAM,OAAO,WAAU,2FAA0F;AAAA,YAChI,oBAAC,mBAAgB,MAAM,OAAO,WAAU,6FAA4F;AAAA,aACtI;AAAA;AAAA,MACF;AAAA,MACA,oBAAC,sBACE,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6c9e07ebeb2e5c7112c0b70e483a0c61cf0ea981"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Rx=function(){return s},s}Rx();class uRe extends In.Component{render(){return Rx().f[0]++,Rx().s[0]++,oe.jsxs(Hoe,{uuid:this.props.id,children:[oe.jsx(Joe,{className:"maputnik-layer-editor-group","data-wd-key":"layer-editor-group:"+this.props["data-wd-key"],onClick:e=>(Rx().f[1]++,Rx().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:oe.jsxs(S7e,{className:"maputnik-layer-editor-group__button",children:[oe.jsx("span",{style:{flexGrow:1,alignContent:"center"},children:this.props.title}),oe.jsx(zX,{size:"2em",className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--up"}),oe.jsx(FX,{size:"2em",className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--down"})]})}),oe.jsx(I7e,{children:this.props.children})]})}}function wC(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",e="331998a9ac6b18663bcbca1301c32952f465e1af",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"331998a9ac6b18663bcbca1301c32952f465e1af"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return wC=function(){return s},s}wC();wC().s[0]++;const cRe=n=>{wC().f[0]++;const e=(wC().s[1]++,n.t);return wC().s[2]++,oe.jsx(cs,{label:e("Min Zoom"),fieldSpec:Wr.layer.minzoom,error:n.error,"data-wd-key":"min-zoom",children:oe.jsx(N1,{allowRange:!0,value:n.value,onChange:n.onChange,min:Wr.layer.minzoom.minimum,max:Wr.layer.minzoom.maximum,default:Wr.layer.minzoom.minimum,"data-wd-key":"min-zoom.input"})})},ARe=(wC().s[3]++,Do()(cRe));function SC(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",e="030101242d82e9c9c34c00cb0f1ee3a368ba29e3",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"030101242d82e9c9c34c00cb0f1ee3a368ba29e3"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return SC=function(){return s},s}SC();SC().s[0]++;const hRe=n=>{SC().f[0]++;const e=(SC().s[1]++,n.t);return SC().s[2]++,oe.jsx(cs,{label:e("Max Zoom"),fieldSpec:Wr.layer.maxzoom,error:n.error,"data-wd-key":"max-zoom",children:oe.jsx(N1,{allowRange:!0,value:n.value,onChange:n.onChange,min:Wr.layer.maxzoom.minimum,max:Wr.layer.maxzoom.maximum,default:Wr.layer.maxzoom.maximum,"data-wd-key":"max-zoom.input"})})},dRe=(SC().s[3]++,Do()(hRe));function bv(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",e="bbd273b6557a5df907fed987aa83b7e8030607a2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",statementMap:{0:{start:{line:5,column:29},end:{line:31,column:1}},1:{start:{line:6,column:12},end:{line:6,column:19}},2:{start:{line:7,column:20},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:30,column:4}},4:{start:{line:32,column:21},end:{line:32,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:40},end:{line:31,column:1}},line:5}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx"],names:[],mappings:"AA2BM;AAzBN,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,QAAM,YAAY;AAAA,IAChB,KAAK;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAEA,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,UAAU;AAAA,MACnB;AAAA,MACA,eAAY;AAAA,MACZ,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO;AAAA,UACP,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,SAAS,EAAE,YAAY;AAAA,UACvB,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bbd273b6557a5df907fed987aa83b7e8030607a2"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return bv=function(){return s},s}bv();bv().s[0]++;const fRe=n=>{bv().f[0]++;const e=(bv().s[1]++,n.t),t=(bv().s[2]++,{doc:e("Comments for the current layer. This is non-standard and not in the spec.")});return bv().s[3]++,oe.jsx(cs,{label:e("Comments"),fieldSpec:t,"data-wd-key":"layer-comment",error:n.error,children:oe.jsx(Fm,{multi:!0,value:n.value,onChange:n.onChange,default:e("Comment..."),"data-wd-key":"layer-comment.input"})})},pRe=(bv().s[4]++,Do()(fRe));function Px(){var n="/home/runner/work/maputnik/maputnik/src/libs/format.ts",e="c45fbfac66e994b59070a295e5a7f219cd5d66ac",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/format.ts",statementMap:{0:{start:{line:2,column:2},end:{line:2,column:50}}},fnMap:{0:{name:"formatLayerId",decl:{start:{line:1,column:16},end:{line:1,column:29}},loc:{start:{line:1,column:34},end:{line:3,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:9},end:{line:2,column:49}},type:"cond-expr",locations:[{start:{line:2,column:21},end:{line:2,column:37}},{start:{line:2,column:40},end:{line:2,column:49}}],line:2}},s:{0:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/format.ts"],names:[],mappings:"AAAO,gBAAS,cAAe,IAAwB;AACrD,SAAO,OAAO,KAAK,mBAAmB,IAAI,EAAE;AAC9C;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c45fbfac66e994b59070a295e5a7f219cd5d66ac"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Px=function(){return s},s}Px();function Qse(n){return Px().f[0]++,Px().s[0]++,n===""?(Px().b[0][0]++,"[empty_string]"):(Px().b[0][1]++,`'${n}'`)}function Vt(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",e="838074c1cccc813ecacd0208f5f23e782debdabc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",statementMap:{0:{start:{line:24,column:17},end:{line:24,column:19}},1:{start:{line:25,column:2},end:{line:30,column:5}},2:{start:{line:29,column:59},end:{line:29,column:82}},3:{start:{line:31,column:2},end:{line:36,column:5}},4:{start:{line:35,column:59},end:{line:35,column:80}},5:{start:{line:37,column:2},end:{line:42,column:5}},6:{start:{line:41,column:59},end:{line:41,column:80}},7:{start:{line:43,column:2},end:{line:48,column:5}},8:{start:{line:47,column:58},end:{line:47,column:79}},9:{start:{line:49,column:2},end:{line:54,column:5}},10:{start:{line:53,column:58},end:{line:53,column:79}},11:{start:{line:55,column:2},end:{line:55,column:16}},12:{start:{line:58,column:2},end:{line:60,column:3}},13:{start:{line:59,column:4},end:{line:59,column:14}},14:{start:{line:61,column:2},end:{line:63,column:3}},15:{start:{line:62,column:4},end:{line:62,column:37}},16:{start:{line:64,column:17},end:{line:64,column:19}},17:{start:{line:65,column:2},end:{line:72,column:3}},18:{start:{line:66,column:4},end:{line:71,column:7}},19:{start:{line:73,column:2},end:{line:80,column:3}},20:{start:{line:74,column:4},end:{line:79,column:7}},21:{start:{line:81,column:2},end:{line:81,column:16}},22:{start:{line:84,column:21},end:{line:88,column:3}},23:{start:{line:89,column:22},end:{line:93,column:3}},24:{start:{line:94,column:22},end:{line:98,column:3}},25:{start:{line:99,column:2},end:{line:99,column:96}},26:{start:{line:102,column:24},end:{line:109,column:3}},27:{start:{line:111,column:4},end:{line:111,column:17}},28:{start:{line:112,column:25},end:{line:112,column:27}},29:{start:{line:113,column:4},end:{line:115,column:5}},30:{start:{line:114,column:6},end:{line:114,column:39}},31:{start:{line:116,column:4},end:{line:116,column:34}},32:{start:{line:119,column:29},end:{line:119,column:54}},33:{start:{line:120,column:4},end:{line:124,column:5}},34:{start:{line:121,column:6},end:{line:123,column:7}},35:{start:{line:122,column:8},end:{line:122,column:45}},36:{start:{line:125,column:4},end:{line:127,column:6}},37:{start:{line:130,column:4},end:{line:133,column:6}},38:{start:{line:136,column:32},end:{line:139,column:5}},39:{start:{line:140,column:4},end:{line:142,column:7}},40:{start:{line:145,column:18},end:{line:145,column:20}},41:{start:{line:146,column:4},end:{line:148,column:5}},42:{start:{line:147,column:6},end:{line:147,column:62}},43:{start:{line:149,column:35},end:{line:149,column:45}},44:{start:{line:150,column:22},end:{line:150,column:24}},45:{start:{line:151,column:4},end:{line:157,column:7}},46:{start:{line:152,column:6},end:{line:156,column:7}},47:{start:{line:153,column:8},end:{line:155,column:10}},48:{start:{line:159,column:18},end:{line:159,column:34}},49:{start:{line:160,column:4},end:{line:162,column:5}},50:{start:{line:161,column:6},end:{line:161,column:63}},51:{start:{line:163,column:4},end:{line:267,column:5}},52:{start:{line:165,column:8},end:{line:229,column:13}},53:{start:{line:172,column:35},end:{line:172,column:112}},54:{start:{line:181,column:37},end:{line:184,column:15}},55:{start:{line:193,column:31},end:{line:193,column:69}},56:{start:{line:202,column:31},end:{line:202,column:75}},57:{start:{line:210,column:31},end:{line:210,column:70}},58:{start:{line:218,column:31},end:{line:218,column:70}},59:{start:{line:226,column:31},end:{line:226,column:104}},60:{start:{line:231,column:8},end:{line:239,column:16}},61:{start:{line:237,column:29},end:{line:237,column:67}},62:{start:{line:241,column:8},end:{line:250,column:10}},63:{start:{line:252,column:8},end:{line:264,column:10}},64:{start:{line:258,column:14},end:{line:261,column:16}},65:{start:{line:266,column:8},end:{line:266,column:49}},66:{start:{line:270,column:4},end:{line:273,column:7}},67:{start:{line:276,column:14},end:{line:276,column:26}},68:{start:{line:277,column:21},end:{line:277,column:23}},69:{start:{line:278,column:22},end:{line:278,column:43}},70:{start:{line:279,column:19},end:{line:296,column:6}},71:{start:{line:280,column:6},end:{line:280,column:70}},72:{start:{line:282,column:22},end:{line:282,column:30}},73:{start:{line:283,column:6},end:{line:283,column:29}},74:{start:{line:284,column:6},end:{line:295,column:8}},75:{start:{line:297,column:19},end:{line:297,column:48}},76:{start:{line:298,column:18},end:{line:326,column:5}},77:{start:{line:301,column:23},end:{line:301,column:71}},78:{start:{line:306,column:23},end:{line:306,column:68}},79:{start:{line:311,column:23},end:{line:311,column:80}},80:{start:{line:317,column:23},end:{line:317,column:41}},81:{start:{line:323,column:23},end:{line:323,column:40}},82:{start:{line:328,column:6},end:{line:328,column:30}},83:{start:{line:329,column:6},end:{line:329,column:26}},84:{start:{line:331,column:4},end:{line:377,column:9}},85:{start:{line:359,column:33},end:{line:359,column:42}},86:{start:{line:360,column:20},end:{line:360,column:201}},87:{start:{line:380,column:20},end:{line:380,column:58}}},fnMap:{0:{name:"getLayoutForSymbolType",decl:{start:{line:23,column:9},end:{line:23,column:31}},loc:{start:{line:23,column:35},end:{line:56,column:1}},line:23},1:{name:"(anonymous_1)",decl:{start:{line:29,column:52},end:{line:29,column:53}},loc:{start:{line:29,column:59},end:{line:29,column:82}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:35,column:52},end:{line:35,column:53}},loc:{start:{line:35,column:59},end:{line:35,column:80}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:41,column:52},end:{line:41,column:53}},loc:{start:{line:41,column:59},end:{line:41,column:80}},line:41},4:{name:"(anonymous_4)",decl:{start:{line:47,column:51},end:{line:47,column:52}},loc:{start:{line:47,column:58},end:{line:47,column:79}},line:47},5:{name:"(anonymous_5)",decl:{start:{line:53,column:51},end:{line:53,column:52}},loc:{start:{line:53,column:58},end:{line:53,column:79}},line:53},6:{name:"getLayoutForType",decl:{start:{line:57,column:9},end:{line:57,column:25}},loc:{start:{line:57,column:35},end:{line:82,column:1}},line:57},7:{name:"layoutGroups",decl:{start:{line:83,column:9},end:{line:83,column:21}},loc:{start:{line:83,column:36},end:{line:100,column:1}},line:83},8:{name:"(anonymous_8)",decl:{start:{line:103,column:20},end:{line:103,column:21}},loc:{start:{line:103,column:26},end:{line:104,column:5}},line:103},9:{name:"(anonymous_9)",decl:{start:{line:105,column:21},end:{line:105,column:22}},loc:{start:{line:105,column:27},end:{line:106,column:5}},line:105},10:{name:"(anonymous_10)",decl:{start:{line:107,column:22},end:{line:107,column:23}},loc:{start:{line:107,column:28},end:{line:108,column:5}},line:107},11:{name:"(anonymous_11)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:21},end:{line:117,column:3}},line:110},12:{name:"(anonymous_12)",decl:{start:{line:118,column:2},end:{line:118,column:3}},loc:{start:{line:118,column:48},end:{line:128,column:3}},line:118},13:{name:"(anonymous_13)",decl:{start:{line:129,column:2},end:{line:129,column:3}},loc:{start:{line:129,column:44},end:{line:134,column:3}},line:129},14:{name:"(anonymous_14)",decl:{start:{line:135,column:2},end:{line:135,column:3}},loc:{start:{line:135,column:36},end:{line:143,column:3}},line:135},15:{name:"(anonymous_15)",decl:{start:{line:144,column:2},end:{line:144,column:3}},loc:{start:{line:144,column:32},end:{line:268,column:3}},line:144},16:{name:"(anonymous_16)",decl:{start:{line:151,column:19},end:{line:151,column:20}},loc:{start:{line:151,column:30},end:{line:157,column:5}},line:151},17:{name:"(anonymous_17)",decl:{start:{line:172,column:24},end:{line:172,column:25}},loc:{start:{line:172,column:35},end:{line:172,column:112}},line:172},18:{name:"(anonymous_18)",decl:{start:{line:181,column:24},end:{line:181,column:25}},loc:{start:{line:181,column:37},end:{line:184,column:15}},line:181},19:{name:"(anonymous_19)",decl:{start:{line:193,column:24},end:{line:193,column:25}},loc:{start:{line:193,column:31},end:{line:193,column:69}},line:193},20:{name:"(anonymous_20)",decl:{start:{line:202,column:24},end:{line:202,column:25}},loc:{start:{line:202,column:31},end:{line:202,column:75}},line:202},21:{name:"(anonymous_21)",decl:{start:{line:210,column:24},end:{line:210,column:25}},loc:{start:{line:210,column:31},end:{line:210,column:70}},line:210},22:{name:"(anonymous_22)",decl:{start:{line:218,column:24},end:{line:218,column:25}},loc:{start:{line:218,column:31},end:{line:218,column:70}},line:218},23:{name:"(anonymous_23)",decl:{start:{line:226,column:24},end:{line:226,column:25}},loc:{start:{line:226,column:31},end:{line:226,column:104}},line:226},24:{name:"(anonymous_24)",decl:{start:{line:237,column:22},end:{line:237,column:23}},loc:{start:{line:237,column:29},end:{line:237,column:67}},line:237},25:{name:"(anonymous_25)",decl:{start:{line:257,column:22},end:{line:257,column:23}},loc:{start:{line:257,column:34},end:{line:262,column:13}},line:257},26:{name:"(anonymous_26)",decl:{start:{line:269,column:2},end:{line:269,column:3}},loc:{start:{line:269,column:20},end:{line:274,column:3}},line:269},27:{name:"(anonymous_27)",decl:{start:{line:275,column:2},end:{line:275,column:3}},loc:{start:{line:275,column:11},end:{line:378,column:3}},line:275},28:{name:"(anonymous_28)",decl:{start:{line:279,column:53},end:{line:279,column:54}},loc:{start:{line:279,column:64},end:{line:281,column:5}},line:279},29:{name:"(anonymous_29)",decl:{start:{line:281,column:11},end:{line:281,column:12}},loc:{start:{line:281,column:22},end:{line:296,column:5}},line:281},30:{name:"(anonymous_30)",decl:{start:{line:301,column:17},end:{line:301,column:18}},loc:{start:{line:301,column:23},end:{line:301,column:71}},line:301},31:{name:"(anonymous_31)",decl:{start:{line:306,column:17},end:{line:306,column:18}},loc:{start:{line:306,column:23},end:{line:306,column:68}},line:306},32:{name:"(anonymous_32)",decl:{start:{line:311,column:17},end:{line:311,column:18}},loc:{start:{line:311,column:23},end:{line:311,column:80}},line:311},33:{name:"(anonymous_33)",decl:{start:{line:317,column:17},end:{line:317,column:18}},loc:{start:{line:317,column:23},end:{line:317,column:41}},line:317},34:{name:"(anonymous_34)",decl:{start:{line:323,column:17},end:{line:323,column:18}},loc:{start:{line:323,column:23},end:{line:323,column:40}},line:323},35:{name:"handleSelection",decl:{start:{line:327,column:13},end:{line:327,column:28}},loc:{start:{line:327,column:40},end:{line:330,column:5}},line:327},36:{name:"(anonymous_36)",decl:{start:{line:358,column:147},end:{line:358,column:148}},loc:{start:{line:358,column:155},end:{line:361,column:19}},line:358}},branchMap:{0:{loc:{start:{line:58,column:2},end:{line:60,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:60,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:58},1:{loc:{start:{line:61,column:2},end:{line:63,column:3}},type:"if",locations:[{start:{line:61,column:2},end:{line:63,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},2:{loc:{start:{line:65,column:2},end:{line:72,column:3}},type:"if",locations:[{start:{line:65,column:2},end:{line:72,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},3:{loc:{start:{line:73,column:2},end:{line:80,column:3}},type:"if",locations:[{start:{line:73,column:2},end:{line:80,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:73},4:{loc:{start:{line:121,column:6},end:{line:123,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:123,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},5:{loc:{start:{line:146,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:148,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:146},6:{loc:{start:{line:152,column:6},end:{line:156,column:7}},type:"if",locations:[{start:{line:152,column:6},end:{line:156,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:152},7:{loc:{start:{line:152,column:10},end:{line:152,column:96}},type:"binary-expr",locations:[{start:{line:152,column:10},end:{line:152,column:22}},{start:{line:152,column:26},end:{line:152,column:55}},{start:{line:152,column:59},end:{line:152,column:96}}],line:152},8:{loc:{start:{line:160,column:4},end:{line:162,column:5}},type:"if",locations:[{start:{line:160,column:4},end:{line:162,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:160},9:{loc:{start:{line:163,column:4},end:{line:267,column:5}},type:"switch",locations:[{start:{line:164,column:6},end:{line:229,column:13}},{start:{line:230,column:6},end:{line:239,column:16}},{start:{line:240,column:6},end:{line:250,column:10}},{start:{line:251,column:6},end:{line:264,column:10}},{start:{line:265,column:6},end:{line:266,column:49}}],line:163},10:{loc:{start:{line:187,column:10},end:{line:195,column:11}},type:"binary-expr",locations:[{start:{line:187,column:10},end:{line:187,column:48}},{start:{line:187,column:68},end:{line:195,column:11}}],line:187},11:{loc:{start:{line:196,column:10},end:{line:204,column:11}},type:"binary-expr",locations:[{start:{line:196,column:10},end:{line:196,column:60}},{start:{line:196,column:80},end:{line:204,column:11}}],line:196},12:{loc:{start:{line:226,column:83},end:{line:226,column:103}},type:"cond-expr",locations:[{start:{line:226,column:93},end:{line:226,column:99}},{start:{line:226,column:102},end:{line:226,column:103}}],line:226},13:{loc:{start:{line:280,column:15},end:{line:280,column:68}},type:"binary-expr",locations:[{start:{line:280,column:15},end:{line:280,column:41}},{start:{line:280,column:45},end:{line:280,column:68}}],line:280},14:{loc:{start:{line:297,column:19},end:{line:297,column:48}},type:"binary-expr",locations:[{start:{line:297,column:19},end:{line:297,column:42}},{start:{line:297,column:46},end:{line:297,column:48}}],line:297},15:{loc:{start:{line:310,column:14},end:{line:310,column:66}},type:"cond-expr",locations:[{start:{line:310,column:45},end:{line:310,column:54}},{start:{line:310,column:57},end:{line:310,column:66}}],line:310}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0],8:[0,0],9:[0,0,0,0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx"],names:["layer"],mappings:"AAuN2B,SA4EL,UA3Ed,KADmB;AAvN3B,OAAO,WAAuB;AAC9B,SAAS,SAAS,QAAQ,MAAM,gBAAgB;AAChD,SAAQ,iBAAgB;AACxB,SAAQ,kBAAiB;AACzB,SAAS,mBAAmB;AAE5B,SAAQ,UAAS;AAEjB,OAAO,eAAe;AACtB,OAAO,kBAAkB;AACzB,OAAO,mBAAmB;AAC1B,OAAO,sBAAsB;AAC7B,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,YAAY,sBAAsB;AAC3C,SAAQ,qBAAoB;AAC5B,SAA+B,uBAAuB;AAEtD,SAAS,yBAAyB;AAUlC,SAAS,uBAAuB,GAAqC;AACnE,QAAM,SAAgC,CAAC;AACvC,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,2BAA2B;AAAA,IACpC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,SAAS,CAAC;AAAA,EAC9E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,wBAAwB;AAAA,IACjC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC5E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,wBAAwB;AAAA,IACjC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC5E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,uBAAuB;AAAA,IAChC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC3E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,uBAAuB;AAAA,IAChC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC3E,CAAC;AACD,SAAO;AACT;AAEA,SAAS,iBAAiB,MAAkC,GAAqC;AAC/F,MAAI,OAAO,KAAK,GAAG,MAAM,KAAK,MAAM,EAAE,QAAQ,IAAI,IAAI,GAAG;AACvD,WAAO,CAAC;AAAA,EACV;AACA,MAAI,SAAS,UAAU;AACrB,WAAO,uBAAuB,CAAC;AAAA,EACjC;AACA,QAAM,SAAgC,CAAC;AACvC,MAAI,OAAO,KAAK,GAAG,WAAW,IAAI,CAAC,EAAE,SAAS,GAAG;AAC/C,WAAO,KAAK;AAAA,MACV,OAAO,EAAE,kBAAkB;AAAA,MAC3B,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,OAAO,KAAK,GAAG,WAAW,IAAI,CAAC;AAAA,IACzC,CAAC;AAAA,EACH;AACA,MAAI,OAAO,KAAK,GAAG,YAAY,IAAI,CAAC,EAAE,SAAS,GAAG;AAChD,WAAO,KAAK;AAAA,MACV,OAAO,EAAE,mBAAmB;AAAA,MAC5B,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,OAAO,KAAK,GAAG,YAAY,IAAI,CAAC;AAAA,IAC1C,CAAC;AAAA,EACH;AACA,SAAO;AACT;AAEA,SAAS,aAAa,WAAuC,GAA8E;AACzI,QAAM,aAAa;AAAA,IACjB,IAAI;AAAA,IACJ,OAAO,EAAE,OAAO;AAAA,IAChB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,QAAQ;AAAA,IACjB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,aAAa;AAAA,IACtB,MAAM;AAAA,EACR;AACA,SAAO,CAAC,YAAY,WAAW,EAC5B,OAAO,iBAAiB,WAAW,CAAC,CAAC,EACrC,OAAO,CAAC,WAAW,CAAC;AACzB;AAwBA,MAAM,4BAA4B,MAAM,UAAsD;AAAA,EAC5F,OAAO,eAAe;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,kBAAkB,MAAM;AAAA,IAAC;AAAA,EAC3B;AAAA,EAEA,YAAY,OAAiC;AAC3C,UAAM,KAAK;AAEX,UAAM,eAAyC,CAAC;AAChD,eAAW,SAAS,aAAa,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC,GAAG;AAChE,mBAAa,MAAM,KAAK,IAAI;AAAA,IAC9B;AAEA,SAAK,QAAQ,EAAE,aAAa;AAAA,EAC9B;AAAA,EAEA,OAAO,yBAAyB,OAA2C,OAAyB;AAClG,UAAM,mBAAmB,EAAE,GAAG,MAAM,aAAa;AAEjD,eAAW,SAAS,iBAAiB,MAAM,MAAM,MAAM,MAAM,CAAC,GAAG;AAC/D,UAAG,EAAE,MAAM,SAAS,mBAAmB;AACrC,yBAAiB,MAAM,KAAK,IAAI;AAAA,MAClC;AAAA,IACF;AAEA,WAAO;AAAA,MACL,cAAc;AAAA,IAChB;AAAA,EACF;AAAA,EAGA,eAAe,OAAwC,UAAkB,UAAe;AACtF,SAAK,MAAM;AAAA,MACT,KAAK,MAAM;AAAA,MACX,eAAe,KAAK,MAAM,OAAO,OAAO,UAAU,QAAQ;AAAA,IAC5D;AAAA,EACF;AAAA,EAEA,cAAc,YAAoB,QAAiB;AACjD,UAAM,sBAAsB;AAAA,MAC1B,GAAG,KAAK,MAAM;AAAA,MACd,CAAC,UAAU,GAAG;AAAA,IAChB;AACA,SAAK,SAAS;AAAA,MACZ,cAAc;AAAA,IAChB,CAAC;AAAA,EACH;AAAA,EAEA,gBAAgB,MAAc,QAAgC;AAC5D,QAAI,UAAU;AACd,QAAG,KAAK,MAAM,MAAM,UAAU;AAC5B,gBAAW,KAAK,MAAM,MAAM,SAAiB,kBAAkB;AAAA,IACjE;AACA,UAAM,EAAC,QAAQ,WAAU,IAAI,KAAK;AAElC,UAAM,YAA+B,CAAC;AACtC,WAAQ,QAAQ,WAAS;AACvB,UACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS,YAC3B;AACA,kBAAU,MAAM,OAAO,KAAK,GAAG,IAAI;AAAA,UACjC,SAAS,MAAM,OAAO,KAAK;AAAA,QAC7B;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI;AACJ,UAAM,QAAQ,KAAK,MAAM;AACzB,QAAG,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,MAAM,MAAM,GAAG;AACzE,uBAAiB,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAE;AAAA,IACpD;AAEA,YAAO,MAAM;AAAA,MACX,KAAK;AAAS,eAAO,qBAAC,SACpB;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,OAAM;AAAA,cACN,OAAO,UAAU;AAAA,cACjB,UAAU,WAAS,KAAK,MAAM,gBAAgB,KAAK,MAAM,YAAY,KAAK,MAAM,MAAM,IAAI,KAAK;AAAA;AAAA,UACjG;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,UAAU;AAAA,cACV,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,aAAW,KAAK,MAAM;AAAA,gBAC9B,KAAK,MAAM;AAAA,gBACX,WAAW,KAAK,MAAM,OAAO,OAAO;AAAA,cACtC;AAAA;AAAA,UACF;AAAA,UACC,KAAK,MAAM,MAAM,SAAS,gBAAgB;AAAA,YAAC;AAAA;AAAA,cAC1C,OAAO,UAAU;AAAA,cACjB,WAAW,OAAO,KAAK,KAAK,MAAM,OAAQ;AAAA,cAC1C,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,UACtD;AAAA,UAEC,CAAC,kBAAkB,SAAS,KAAK,MAAM,MAAM,IAAI,KAClD;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU,cAAc;AAAA,cAC/B;AAAA,cACA,OAAQ,KAAK,MAAM,MAAc,cAAc;AAAA,cAC/C,UAAU,OAAK,KAAK,eAAe,MAAM,gBAAgB,CAAC;AAAA;AAAA,UAC5D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,eAAe,YAAY,oBAAoB,KAAK,KAAM,SAAY,CAAC;AAAA;AAAA,UAC7F;AAAA,WACF;AAAA,MACA,KAAK;AAAU,eAAO,oBAAC,SACrB,8BAAC,SAAI,WAAU,kCACb;AAAA,UAAC;AAAA;AAAA,YACC,QAAQ;AAAA,YACR,QAAS,KAAK,MAAM,MAAc;AAAA,YAClC,YAAY,KAAK,MAAM,aAAc,KAAK,MAAM,MAAc,cAAc,CAAC;AAAA,YAC7E,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,QACtD,GACF,GACF;AAAA,MACA,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,QAAQ;AAAA,YACR,OAAO,KAAK,MAAM;AAAA,YAClB,aAAa;AAAA,YACb,MAAM,KAAK,MAAM;AAAA,YACjB,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,QACzC;AAAA,MACF,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,UAAS;AAAA,YACT,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,CAACA,WAA8B;AACvC,mBAAK,MAAM;AAAA,gBACT,KAAK,MAAM;AAAA,gBACXA;AAAA,cACF;AAAA,YACF;AAAA;AAAA,QACF;AAAA,MACF;AAAS,eAAO,gCAAE;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,UAAU,QAAgB;AACxB,SAAK,MAAM,YAAY;AAAA,MACrB,UAAU,KAAK,MAAM;AAAA,MACrB,UAAU,KAAK,MAAM,aAAW;AAAA,IAClC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,UAAM,WAAqB,CAAC;AAC5B,UAAM,YAAY,KAAK,MAAM,MAAM;AACnC,UAAM,SAAS,aAAa,WAAW,CAAC,EAAE,OAAO,WAAS;AACxD,aAAO,EAAE,cAAc,gBAAgB,MAAM,SAAS;AAAA,IACxD,CAAC,EAAE,IAAI,WAAS;AACd,YAAM,UAAU,MAAM;AACtB,eAAS,KAAK,OAAO;AACrB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,eAAa,MAAM;AAAA,UACnB,IAAI;AAAA,UAEJ,OAAO,MAAM;AAAA,UACb,UAAU,KAAK,MAAM,aAAa,MAAM,KAAK;AAAA,UAC7C,gBAAgB,KAAK,cAAc,KAAK,MAAM,MAAM,KAAK;AAAA,UAExD,eAAK,gBAAgB,MAAM,MAAM,MAAM,MAAM;AAAA;AAAA,QALzC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAE3C,UAAM,QAKD;AAAA,MACH,QAAQ;AAAA,QACN,MAAM,EAAE,QAAQ;AAAA,QAChB,SAAS,MAAM,KAAK,MAAM,eAAe,KAAK,MAAM,UAAU;AAAA,QAC9D,OAAO;AAAA,MACT;AAAA,MACA,WAAW;AAAA,QACT,MAAM,EAAE,WAAW;AAAA,QACnB,SAAS,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM,UAAU;AAAA,QAC3D,OAAO;AAAA,MACT;AAAA,MACA,MAAM;AAAA,QACJ,MAAO,OAAO,eAAe,SAAU,EAAE,MAAM,IAAI,EAAE,MAAM;AAAA,QAC3D,SAAS,MAAM,KAAK,MAAM,wBAAwB,KAAK,MAAM,UAAU;AAAA,QACvE,OAAO;AAAA,MACT;AAAA,MACA,aAAa;AAAA,QACX,MAAM,EAAE,eAAe;AAAA,QACvB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,EAAE;AAAA,QAChC,OAAO;AAAA,MACT;AAAA,MACA,eAAe;AAAA,QACb,MAAM,EAAE,iBAAiB;AAAA,QACzB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,CAAE;AAAA,QAChC,OAAO;AAAA,MACT;AAAA,IACF;AAEA,aAAS,gBAAgB,IAAY,OAA6B;AAChE,YAAM,gBAAgB;AACtB,YAAM,EAAE,EAAE,QAAQ;AAAA,IACpB;AAEA,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,QAAQ,OAAO,UAAS,GACjE;AAAA,MAAC;AAAA;AAAA,QAAQ,WAAU;AAAA,QACjB,MAAK;AAAA,QACL,cAAY,EAAE,cAAc;AAAA,QAC5B,eAAY;AAAA,QAEZ;AAAA,8BAAC,YAAO,eAAY,uBAClB,+BAAC,SAAI,WAAU,gBACb;AAAA,gCAAC,QAAG,WAAU,uBACX,YAAE,sBAAsB,EAAE,SAAS,cAAc,KAAK,MAAM,MAAM,EAAE,EAAE,CAAC,GAC1E;AAAA,YACA,oBAAC,SAAI,WAAU,sBACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,aAAa;AAAA,gBACb,kBAAkB;AAAA,gBAElB;AAAA;AAAA,oBAAC;AAAA;AAAA,sBACC,IAAG;AAAA,sBACH,eAAY;AAAA,sBACZ,WAAU;AAAA,sBACV,OAAO;AAAA,sBACP,8BAAC,cAAW,WAAU,0BAAyB;AAAA;AAAA,kBACjD;AAAA,kBACA,oBAAC,QACC,8BAAC,QAAG,WAAU,mBACX,iBAAO,KAAK,KAAK,EAAE,IAAI,CAAC,OAAO;AAC9B,0BAAM,OAAO,MAAM,EAAE;AACrB,2BAAO,oBAAC,QACN,8BAAC,YAAS,OAAO,IAAI,WAAU,yBAAwB,eAAa,KAAK,OACtE,eAAK,MACR,KAHc,EAIhB;AAAA,kBACF,CAAC,GACH,GACF;AAAA;AAAA;AAAA,YACF,GACF;AAAA,aACF,GAEF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,uBAAuB;AAAA,cACvB,mBAAmB;AAAA,cACnB,aAAa;AAAA,cAEZ;AAAA;AAAA,UACH;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"838074c1cccc813ecacd0208f5f23e782debdabc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Vt=function(){return s},s}Vt();function mRe(n){Vt().f[0]++;const e=(Vt().s[0]++,[]);return Vt().s[1]++,e.push({title:n("General layout properties"),id:"General_layout_properties",type:"properties",fields:Object.keys(pp.layout_symbol).filter(t=>(Vt().f[1]++,Vt().s[2]++,t.startsWith("symbol-")))}),Vt().s[3]++,e.push({title:n("Text layout properties"),id:"Text_layout_properties",type:"properties",fields:Object.keys(pp.layout_symbol).filter(t=>(Vt().f[2]++,Vt().s[4]++,t.startsWith("text-")))}),Vt().s[5]++,e.push({title:n("Icon layout properties"),id:"Icon_layout_properties",type:"properties",fields:Object.keys(pp.layout_symbol).filter(t=>(Vt().f[3]++,Vt().s[6]++,t.startsWith("icon-")))}),Vt().s[7]++,e.push({title:n("Text paint properties"),id:"Text_paint_properties",type:"properties",fields:Object.keys(pp.paint_symbol).filter(t=>(Vt().f[4]++,Vt().s[8]++,t.startsWith("text-")))}),Vt().s[9]++,e.push({title:n("Icon paint properties"),id:"Icon_paint_properties",type:"properties",fields:Object.keys(pp.paint_symbol).filter(t=>(Vt().f[5]++,Vt().s[10]++,t.startsWith("icon-")))}),Vt().s[11]++,e}function qse(n,e){if(Vt().f[6]++,Vt().s[12]++,Object.keys(pp.layer.type.values).indexOf(n)<0)return Vt().b[0][0]++,Vt().s[13]++,[];if(Vt().b[0][1]++,Vt().s[14]++,n==="symbol")return Vt().b[1][0]++,Vt().s[15]++,mRe(e);Vt().b[1][1]++;const t=(Vt().s[16]++,[]);return Vt().s[17]++,Object.keys(pp["paint_"+n]).length>0?(Vt().b[2][0]++,Vt().s[18]++,t.push({title:e("Paint properties"),id:"Paint_properties",type:"properties",fields:Object.keys(pp["paint_"+n])})):Vt().b[2][1]++,Vt().s[19]++,Object.keys(pp["layout_"+n]).length>0?(Vt().b[3][0]++,Vt().s[20]++,t.push({title:e("Layout properties"),id:"Layout_properties",type:"properties",fields:Object.keys(pp["layout_"+n])})):Vt().b[3][1]++,Vt().s[21]++,t}function xH(n,e){Vt().f[7]++;const t=(Vt().s[22]++,{id:"layer",title:e("Layer"),type:"layer"}),i=(Vt().s[23]++,{id:"filter",title:e("Filter"),type:"filter"}),r=(Vt().s[24]++,{id:"jsoneditor",title:e("JSON Editor"),type:"jsoneditor"});return Vt().s[25]++,[t,i].concat(qse(n,e)).concat([r])}class gRe extends In.Component{static defaultProps=(Vt().s[26]++,{onLayerChanged:()=>{Vt().f[8]++},onLayerIdChange:()=>{Vt().f[9]++},onLayerDestroyed:()=>{Vt().f[10]++}});constructor(e){Vt().f[11]++,Vt().s[27]++,super(e);const t=(Vt().s[28]++,{});Vt().s[29]++;for(const i of xH(this.props.layer.type,e.t))Vt().s[30]++,t[i.title]=!0;Vt().s[31]++,this.state={editorGroups:t}}static getDerivedStateFromProps(e,t){Vt().f[12]++;const i=(Vt().s[32]++,{...t.editorGroups});Vt().s[33]++;for(const r of qse(e.layer.type,e.t))Vt().s[34]++,r.title in i?Vt().b[4][1]++:(Vt().b[4][0]++,Vt().s[35]++,i[r.title]=!0);return Vt().s[36]++,{editorGroups:i}}changeProperty(e,t,i){Vt().f[13]++,Vt().s[37]++,this.props.onLayerChanged(this.props.layerIndex,jTe(this.props.layer,e,t,i))}onGroupToggle(e,t){Vt().f[14]++;const i=(Vt().s[38]++,{...this.state.editorGroups,[e]:t});Vt().s[39]++,this.setState({editorGroups:i})}renderGroupType(e,t){Vt().f[15]++;let i=(Vt().s[40]++,"");Vt().s[41]++,this.props.layer.metadata?(Vt().b[5][0]++,Vt().s[42]++,i=this.props.layer.metadata["maputnik:comment"]):Vt().b[5][1]++;const{errors:r,layerIndex:o}=(Vt().s[43]++,this.props),s=(Vt().s[44]++,{});Vt().s[45]++,r.forEach(d=>{Vt().f[16]++,Vt().s[46]++,Vt().b[7][0]++,d.parsed&&(Vt().b[7][1]++,d.parsed.type==="layer")&&(Vt().b[7][2]++,d.parsed.data.index==o)?(Vt().b[6][0]++,Vt().s[47]++,s[d.parsed.data.key]={message:d.parsed.data.message}):Vt().b[6][1]++});let a;const c=(Vt().s[48]++,this.props.layer);switch(Vt().s[49]++,Object.prototype.hasOwnProperty.call(this.props.sources,c.source)?(Vt().b[8][0]++,Vt().s[50]++,a=this.props.sources[c.source].layers):Vt().b[8][1]++,Vt().s[51]++,e){case"layer":return Vt().b[9][0]++,Vt().s[52]++,oe.jsxs("div",{children:[oe.jsx(xoe,{value:this.props.layer.id,wdKey:"layer-editor.layer-id",error:s.id,onChange:d=>(Vt().f[17]++,Vt().s[53]++,this.props.onLayerIdChange(this.props.layerIndex,this.props.layer.id,d))}),oe.jsx(_oe,{disabled:!0,error:s.type,value:this.props.layer.type,onChange:d=>(Vt().f[18]++,Vt().s[54]++,this.props.onLayerChanged(this.props.layerIndex,zTe(this.props.layer,d)))}),(Vt().b[10][0]++,this.props.layer.type!=="background"&&(Vt().b[10][1]++,oe.jsx(joe,{error:s.source,sourceIds:Object.keys(this.props.sources),value:this.props.layer.source,onChange:d=>(Vt().f[19]++,Vt().s[55]++,this.changeProperty(null,"source",d))}))),(Vt().b[11][0]++,!AP.includes(this.props.layer.type)&&(Vt().b[11][1]++,oe.jsx(Noe,{error:s["source-layer"],sourceLayerIds:a,value:this.props.layer["source-layer"],onChange:d=>(Vt().f[20]++,Vt().s[56]++,this.changeProperty(null,"source-layer",d))}))),oe.jsx(ARe,{error:s.minzoom,value:this.props.layer.minzoom,onChange:d=>(Vt().f[21]++,Vt().s[57]++,this.changeProperty(null,"minzoom",d))}),oe.jsx(dRe,{error:s.maxzoom,value:this.props.layer.maxzoom,onChange:d=>(Vt().f[22]++,Vt().s[58]++,this.changeProperty(null,"maxzoom",d))}),oe.jsx(pRe,{error:s.comment,value:i,onChange:d=>(Vt().f[23]++,Vt().s[59]++,this.changeProperty("metadata","maputnik:comment",d==""?(Vt().b[12][0]++,void 0):(Vt().b[12][1]++,d)))})]});case"filter":return Vt().b[9][1]++,Vt().s[60]++,oe.jsx("div",{children:oe.jsx("div",{className:"maputnik-filter-editor-wrapper",children:oe.jsx(q7e,{errors:s,filter:this.props.layer.filter,properties:this.props.vectorLayers[this.props.layer["source-layer"]],onChange:d=>(Vt().f[24]++,Vt().s[61]++,this.changeProperty(null,"filter",d))})})});case"properties":return Vt().b[9][2]++,Vt().s[62]++,oe.jsx(lRe,{errors:s,layer:this.props.layer,groupFields:t,spec:this.props.spec,onChange:this.changeProperty.bind(this)});case"jsoneditor":return Vt().b[9][3]++,Vt().s[63]++,oe.jsx(tO,{lintType:"layer",value:this.props.layer,onChange:d=>{Vt().f[25]++,Vt().s[64]++,this.props.onLayerChanged(this.props.layerIndex,d)}});default:return Vt().b[9][4]++,Vt().s[65]++,oe.jsx(oe.Fragment,{})}}moveLayer(e){Vt().f[26]++,Vt().s[66]++,this.props.onMoveLayer({oldIndex:this.props.layerIndex,newIndex:this.props.layerIndex+e})}render(){Vt().f[27]++;const e=(Vt().s[67]++,this.props.t),t=(Vt().s[68]++,[]),i=(Vt().s[69]++,this.props.layer.type),r=(Vt().s[70]++,xH(i,e).filter(c=>(Vt().f[28]++,Vt().s[71]++,Vt().b[13][0]++,!(i==="background"&&(Vt().b[13][1]++,c.type==="source")))).map(c=>{Vt().f[29]++;const d=(Vt().s[72]++,c.id);return Vt().s[73]++,t.push(d),Vt().s[74]++,oe.jsx(uRe,{"data-wd-key":c.title,id:d,title:c.title,isActive:this.state.editorGroups[c.title],onActiveToggle:this.onGroupToggle.bind(this,c.title),children:this.renderGroupType(c.type,c.fields)},d)})),o=(Vt().s[75]++,Vt().b[14][0]++,this.props.layer.layout||(Vt().b[14][1]++,{})),s=(Vt().s[76]++,{delete:{text:e("Delete"),handler:()=>(Vt().f[30]++,Vt().s[77]++,this.props.onLayerDestroy(this.props.layerIndex)),wdKey:"menu-delete-layer"},duplicate:{text:e("Duplicate"),handler:()=>(Vt().f[31]++,Vt().s[78]++,this.props.onLayerCopy(this.props.layerIndex)),wdKey:"menu-duplicate-layer"},hide:{text:o.visibility==="none"?(Vt().b[15][0]++,e("Show")):(Vt().b[15][1]++,e("Hide")),handler:()=>(Vt().f[32]++,Vt().s[79]++,this.props.onLayerVisibilityToggle(this.props.layerIndex)),wdKey:"menu-hide-layer"},moveLayerUp:{text:e("Move layer up"),disabled:this.props.isFirstLayer,handler:()=>(Vt().f[33]++,Vt().s[80]++,this.moveLayer(-1)),wdKey:"menu-move-layer-up"},moveLayerDown:{text:e("Move layer down"),disabled:this.props.isLastLayer,handler:()=>(Vt().f[34]++,Vt().s[81]++,this.moveLayer(1)),wdKey:"menu-move-layer-down"}});function a(c,d){Vt().f[35]++,Vt().s[82]++,d.stopPropagation(),Vt().s[83]++,s[c].handler()}return Vt().s[84]++,oe.jsx(o2.Provider,{value:{size:"14px",color:"#8e8e8e"},children:oe.jsxs("section",{className:"maputnik-layer-editor",role:"main","aria-label":e("Layer editor"),"data-wd-key":"layer-editor",children:[oe.jsx("header",{"data-wd-key":"layer-editor.header",children:oe.jsxs("div",{className:"layer-header",children:[oe.jsx("h2",{className:"layer-header__title",children:e("Layer: {{layerId}}",{layerId:Qse(this.props.layer.id)})}),oe.jsx("div",{className:"layer-header__info",children:oe.jsxs(eS.Wrapper,{className:"more-menu",onSelection:a,closeOnSelection:!1,children:[oe.jsx(eS.Button,{id:"skip-target-layer-editor","data-wd-key":"skip-target-layer-editor",className:"more-menu__button",title:"Layer options",children:oe.jsx(Dfe,{className:"more-menu__button__svg"})}),oe.jsx(eS.Menu,{children:oe.jsx("ul",{className:"more-menu__menu",children:Object.keys(s).map(c=>{Vt().f[36]++;const d=(Vt().s[85]++,s[c]);return Vt().s[86]++,oe.jsx("li",{children:oe.jsx(eS.MenuItem,{value:c,className:"more-menu__menu__item","data-wd-key":d.wdKey,children:d.text})},c)})})})]})})]})}),oe.jsx(d7e,{allowMultipleExpanded:!0,allowZeroExpanded:!0,preExpanded:t,children:r})]})})}}const yRe=(Vt().s[87]++,Do()(gRe));var MH=function(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))},vRe=(function(){function n(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"}return n})(),bRe=(function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n})(),CRe=(function(){function n(e,t,i,r){this.name=e,this.version=t,this.os=i,this.bot=r,this.type="bot-device"}return n})(),_Re=(function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n})(),xRe=(function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n})(),MRe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,wRe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,wH=3,SRe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",MRe]],SH=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ERe(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new xRe:typeof navigator<"u"?ORe(navigator.userAgent):TRe()}function BRe(n){return n!==""&&SRe.reduce(function(e,t){var i=t[0],r=t[1];if(e)return e;var o=r.exec(n);return!!o&&[i,o]},!1)}function ORe(n){var e=BRe(n);if(!e)return null;var t=e[0],i=e[1];if(t==="searchbot")return new _Re;var r=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);r?r.length<wH&&(r=MH(MH([],r,!0),kRe(wH-r.length),!0)):r=[];var o=r.join("."),s=IRe(n),a=wRe.exec(n);return a&&a[1]?new CRe(t,o,s,a[1]):new vRe(t,o,s)}function IRe(n){for(var e=0,t=SH.length;e<t;e++){var i=SH[e],r=i[0],o=i[1],s=o.exec(n);if(s)return r}return null}function TRe(){var n=typeof process<"u"&&process.version;return n?new bRe(process.version.slice(1)):null}function kRe(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}const DRe="maputnik",RRe="3.0.0",EH={name:DRe,version:RRe},PRe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='1200'%20height='1200'%20viewBox='0%200%20100%20100'%3e%3cg%20class='map'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--map__main'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line1'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line2'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line3'%20fill='none'%3e%3c/use%3e%3c/g%3e%3cg%20class='palette'%3e%3cuse%20xlink:href='%23ref-1--palette__main'%20fill='%23fff'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__inner'%20fill='none'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle5'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle4'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle3'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle2'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle1'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle0'%20fill='%234eba6f'%3e%3c/use%3e%3c/g%3e%3cg%20class='brush'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--brush__bottom'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--brush__top'%20fill='%23fff'%3e%3c/use%3e%3c/g%3e%3cdefs%3e%3cpath%20id='ref-1--map__main'%20stroke-width='2.366'%20stroke-linejoin='round'%20d='M18.84%207.717l15.44%207.542%2015.75-7.762%2015.7%207.857L81.005%207.67%2096.31%2054.052%2073.598%2062.12%2050.93%2053.872l-25.1%208.066-22.668-8.066z'%3e%3c/path%3e%3cpath%20id='ref-1--map__line1'%20d='M65.556%2015.07l7.647%2046.838'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line2'%20d='M50.261%207.422l.717%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line3'%20d='M34.011%2015.07l-8.603%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--palette__main'%20stroke-width='2.3'%20d='M47.352%2030.887c7.993.226%2016.934%209.725%2017.954%2015.25%201.02%205.527-.743%2011.125-4.298%2013.875-3.554%202.75-8.6%202.905-8.723%208.302-.097%204.237%208.457%208.5%208.088%2015.653-.406%207.857-15.508%2013.15-30.943%206.102-8.556-3.906-14.249-13.653-13.385-26.238C16.833%2052.334%2022.32%2043.658%2027.382%2039c5.977-5.503%2011.977-8.337%2019.97-8.112z'%3e%3c/path%3e%3ccircle%20id='ref-1--palette__inner'%20stroke-width='2.3'%20cx='41.873'%20cy='61.901'%20r='6.389'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle5'%20cy='44.56'%20cx='54.347'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle4'%20cx='40.443'%20cy='41.555'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle3'%20r='4.336'%20cy='51.102'%20cx='29.651'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle2'%20cx='25.293'%20cy='65.836'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle1'%20r='4.336'%20cy='79.326'%20cx='32.764'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle0'%20cx='46.669'%20cy='80.571'%20r='4.336'%3e%3c/circle%3e%3cpath%20id='ref-1--brush__bottom'%20d='M76.333%2089.333c-1.645-9.794-4.375-35.26-4.32-37.887.056-2.627%202.52-4.34%205.36-4.317%202.842.022%205.098%201.87%205.314%204.27.107%201.2-1.576%2028.06-2.318%2037.844-.332%204.374-3.31%204.413-4.036.09z'%20stroke-width='2.3'%20stroke-linejoin='round'%3e%3c/path%3e%3cpath%20id='ref-1--brush__top'%20stroke-linejoin='round'%20stroke-width='2.3'%20d='M77.184%2026.428s-5.621%207.02-5.621%2011.978c0%204.957%202.206%206.878%205.81%206.878%203.606%200%205.148-1.708%205.29-6.736.142-5.028-5.479-12.12-5.479-12.12z'%3e%3c/path%3e%3c/defs%3e%3c/svg%3e";function Gi(){var n="/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",e="d581519332bdff74d3cb5001df8051c24d7c7191",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",statementMap:{0:{start:{line:20,column:16},end:{line:20,column:24}},1:{start:{line:21,column:41},end:{line:21,column:89}},2:{start:{line:24,column:4},end:{line:24,column:107}},3:{start:{line:29,column:4},end:{line:39,column:6}},4:{start:{line:44,column:4},end:{line:51,column:6}},5:{start:{line:56,column:4},end:{line:64,column:6}},6:{start:{line:68,column:10},end:{line:76,column:3}},7:{start:{line:78,column:4},end:{line:78,column:34}},8:{start:{line:81,column:4},end:{line:81,column:40}},9:{start:{line:83,column:11},end:{line:90,column:3}},10:{start:{line:84,column:4},end:{line:89,column:5}},11:{start:{line:85,column:6},end:{line:85,column:59}},12:{start:{line:87,column:17},end:{line:87,column:65}},13:{start:{line:88,column:6},end:{line:88,column:17}},14:{start:{line:92,column:14},end:{line:92,column:26}},15:{start:{line:93,column:18},end:{line:129,column:5}},16:{start:{line:130,column:24},end:{line:132,column:6}},17:{start:{line:131,column:6},end:{line:131,column:45}},18:{start:{line:133,column:4},end:{line:259,column:12}},19:{start:{line:144,column:33},end:{line:144,column:58}},20:{start:{line:153,column:33},end:{line:153,column:60}},21:{start:{line:162,column:33},end:{line:162,column:51}},22:{start:{line:189,column:80},end:{line:189,column:112}},23:{start:{line:193,column:82},end:{line:193,column:116}},24:{start:{line:197,column:87},end:{line:197,column:125}},25:{start:{line:201,column:83},end:{line:201,column:118}},26:{start:{line:205,column:84},end:{line:205,column:120}},27:{start:{line:209,column:88},end:{line:209,column:127}},28:{start:{line:222,column:33},end:{line:222,column:69}},29:{start:{line:225,column:38},end:{line:225,column:59}},30:{start:{line:226,column:20},end:{line:226,column:157}},31:{start:{line:228,column:115},end:{line:228,column:148}},32:{start:{line:229,column:20},end:{line:229,column:133}},33:{start:{line:245,column:33},end:{line:245,column:74}},34:{start:{line:248,column:18},end:{line:248,column:94}},35:{start:{line:262,column:19},end:{line:262,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:23,column:2},end:{line:23,column:3}},loc:{start:{line:23,column:11},end:{line:25,column:3}},line:23},1:{name:"(anonymous_1)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:11},end:{line:40,column:3}},line:28},2:{name:"(anonymous_2)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:52,column:3}},line:43},3:{name:"(anonymous_3)",decl:{start:{line:55,column:2},end:{line:55,column:3}},loc:{start:{line:55,column:11},end:{line:65,column:3}},line:55},4:{name:"(anonymous_4)",decl:{start:{line:77,column:2},end:{line:77,column:3}},loc:{start:{line:77,column:23},end:{line:79,column:3}},line:77},5:{name:"(anonymous_5)",decl:{start:{line:80,column:2},end:{line:80,column:3}},loc:{start:{line:80,column:28},end:{line:82,column:3}},line:80},6:{name:"(anonymous_6)",decl:{start:{line:83,column:11},end:{line:83,column:12}},loc:{start:{line:83,column:23},end:{line:90,column:3}},line:83},7:{name:"(anonymous_7)",decl:{start:{line:91,column:2},end:{line:91,column:3}},loc:{start:{line:91,column:11},end:{line:260,column:3}},line:91},8:{name:"(anonymous_8)",decl:{start:{line:130,column:35},end:{line:130,column:36}},loc:{start:{line:130,column:45},end:{line:132,column:5}},line:130},9:{name:"(anonymous_9)",decl:{start:{line:144,column:25},end:{line:144,column:26}},loc:{start:{line:144,column:33},end:{line:144,column:58}},line:144},10:{name:"(anonymous_10)",decl:{start:{line:153,column:25},end:{line:153,column:26}},loc:{start:{line:153,column:33},end:{line:153,column:60}},line:153},11:{name:"(anonymous_11)",decl:{start:{line:162,column:25},end:{line:162,column:26}},loc:{start:{line:162,column:33},end:{line:162,column:51}},line:162},12:{name:"(anonymous_12)",decl:{start:{line:189,column:74},end:{line:189,column:75}},loc:{start:{line:189,column:80},end:{line:189,column:112}},line:189},13:{name:"(anonymous_13)",decl:{start:{line:193,column:76},end:{line:193,column:77}},loc:{start:{line:193,column:82},end:{line:193,column:116}},line:193},14:{name:"(anonymous_14)",decl:{start:{line:197,column:81},end:{line:197,column:82}},loc:{start:{line:197,column:87},end:{line:197,column:125}},line:197},15:{name:"(anonymous_15)",decl:{start:{line:201,column:77},end:{line:201,column:78}},loc:{start:{line:201,column:83},end:{line:201,column:118}},line:201},16:{name:"(anonymous_16)",decl:{start:{line:205,column:78},end:{line:205,column:79}},loc:{start:{line:205,column:84},end:{line:205,column:120}},line:205},17:{name:"(anonymous_17)",decl:{start:{line:209,column:82},end:{line:209,column:83}},loc:{start:{line:209,column:88},end:{line:209,column:127}},line:209},18:{name:"(anonymous_18)",decl:{start:{line:222,column:26},end:{line:222,column:27}},loc:{start:{line:222,column:33},end:{line:222,column:69}},line:222},19:{name:"(anonymous_19)",decl:{start:{line:225,column:31},end:{line:225,column:32}},loc:{start:{line:225,column:38},end:{line:225,column:59}},line:225},20:{name:"(anonymous_20)",decl:{start:{line:225,column:65},end:{line:225,column:66}},loc:{start:{line:225,column:75},end:{line:227,column:19}},line:225},21:{name:"(anonymous_21)",decl:{start:{line:228,column:108},end:{line:228,column:109}},loc:{start:{line:228,column:115},end:{line:228,column:148}},line:228},22:{name:"(anonymous_22)",decl:{start:{line:228,column:154},end:{line:228,column:155}},loc:{start:{line:228,column:164},end:{line:230,column:19}},line:228},23:{name:"(anonymous_23)",decl:{start:{line:245,column:26},end:{line:245,column:27}},loc:{start:{line:245,column:33},end:{line:245,column:74}},line:245},24:{name:"(anonymous_24)",decl:{start:{line:247,column:65},end:{line:247,column:66}},loc:{start:{line:247,column:83},end:{line:249,column:17}},line:247}},branchMap:{0:{loc:{start:{line:84,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:84,column:4},end:{line:89,column:5}},{start:{line:86,column:11},end:{line:89,column:5}}],line:84}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx"],names:[],mappings:"AAmCW,SAAA,KAwLG,YAxLH;AAnCX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,cAAa;AAErB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP,OAAO,aAAa;AAEpB,OAAO,kBAAkB;AACzB,SAAS,uBAA6C;AACtD,SAAS,0BAA0B;AAInC,MAAM,UAAU,OAAO;AACvB,MAAM,mCAAmC,CAAC,UAAU,SAAS,EAAE,QAAQ,QAAS,IAAI,IAAI;AASxF,MAAM,iBAAiB,MAAM,UAAyB;AAAA,EACpD,SAAS;AACP,+BAAQ,QAAA,EAAK,WAAU,sBAAsB,UAAA,KAAK,MAAM,SAAA,CAAS;AAAA,EACnE;AACF;AAQA,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAW,WAAW,yBAAyB,KAAK,MAAM,SAAS;AAAA,QACnE,MAAM,KAAK,MAAM;AAAA,QACjB,KAAI;AAAA,QACJ,QAAO;AAAA,QACP,eAAY;AAAA,QAEX,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAOA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QAEvB,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAQA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QAEnB,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAmBA,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,QAAQ;AAAA,IACN,QAAQ;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,MAAM;AAAA,MACN,KAAK;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,EACF;AAAA,EAEA,gBAAgB,KAAe;AAC7B,SAAK,MAAM,cAAc,GAAG;AAAA,EAC9B;AAAA,EAEA,qBAAqB,KAAa;AAChC,SAAK,MAAM,KAAK,eAAe,GAAG;AAAA,EACpC;AAAA,EAEA,SAAS,CAAC,WAAmB;AAC3B,QAAI,WAAW,OAAO;AACnB,eAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,IAC5E,OACK;AACH,YAAM,KAAK,SAAS,cAAc,kBAAgB,MAAM;AACxD,SAAG,MAAM;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,QAAQ;AAAA,MACZ;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,KAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,SAAS;AAAA,QAClB,UAAU,KAAK,MAAM,aAAa;AAAA,MACpC;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,qBAAqB;AAAA,QAC9B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,sBAAsB;AAAA,QAC/B,UAAU,CAAC;AAAA,MACb;AAAA,IACF;AAEA,UAAM,cAAc,MAAM,KAAK,CAAC,SAAS;AACvC,aAAO,KAAK,OAAO,KAAK,MAAM;AAAA,IAChC,CAAC;AAED,+BAAQ,OAAA,EAAI,WAAU,oBACpB,UAAA,qBAAC,OAAA,EAAI,WAAU,2BACb,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,WAAU;AAAA,UAGV,UAAA;AAAA,YAAA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,YAAY;AAAA,gBAEtC,YAAE,aAAa;AAAA,cAAA;AAAA,YAClB;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,cAAc;AAAA,gBAExC,YAAE,cAAc;AAAA,cAAA;AAAA,YACnB;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,KAAK;AAAA,gBAE/B,YAAE,UAAU;AAAA,cAAA;AAAA,YACf;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,QAAO;AAAA,gBACP,KAAI;AAAA,gBACJ,MAAK;AAAA,gBAEL,UAAA;AAAA,kBAAA,oBAAC,SAAI,KAAK,cAAc,KAAK,EAAE,oBAAoB,EAAA,CAAG;AAAA,uCACrD,MAAA,EACC,UAAA;AAAA,oBAAA,oBAAC,QAAA,EAAK,WAAU,yBAAyB,UAAA,QAAQ,KAAA,CAAK;AAAA,oBACtD,qBAAC,QAAA,EAAK,WAAU,4BAA2B,UAAA;AAAA,sBAAA;AAAA,sBAAE,QAAQ;AAAA,oBAAA,EAAA,CAAQ;AAAA,kBAAA,EAAA,CAC/D;AAAA,gBAAA;AAAA,cAAA;AAAA,YACF;AAAA,UAAA;AAAA,QAAA;AAAA,MACF;AAAA,2BACC,OAAA,EAAI,WAAU,6BAA4B,MAAK,cAAa,cAAW,WACtE,UAAA;AAAA,QAAA,qBAAC,eAAA,EAAc,OAAM,YAAW,SAAS,MAAM,KAAK,MAAM,cAAc,MAAM,GAC5E,UAAA;AAAA,UAAA,oBAAC,iBAAA,CAAA,CAAgB;AAAA,UACjB,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,cAAa,SAAS,MAAM,KAAK,MAAM,cAAc,QAAQ,GAChF,UAAA;AAAA,UAAA,oBAAC,QAAA,CAAA,CAAO;AAAA,UACR,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,mBAAkB,SAAS,MAAM,KAAK,MAAM,cAAc,YAAY,GACzF,UAAA;AAAA,UAAA,oBAAC,QAAA,CAAA,CAAO;AAAA,UACR,oBAAC,UAAA,EAAU,UAAA,EAAE,aAAa,EAAA,CAAE;AAAA,QAAA,EAAA,CAC9B;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,eAAc,SAAS,MAAM,KAAK,MAAM,cAAc,SAAS,GAClF,UAAA;AAAA,UAAA,oBAAC,UAAA,CAAA,CAAS;AAAA,UACV,oBAAC,UAAA,EAAU,UAAA,EAAE,cAAc,EAAA,CAAE;AAAA,QAAA,EAAA,CAC/B;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,gBAAe,SAAS,MAAM,KAAK,MAAM,cAAc,UAAU,GACpF,UAAA;AAAA,UAAA,oBAAC,YAAA,CAAA,CAAW;AAAA,UACZ,oBAAC,UAAA,EAAU,UAAA,EAAE,gBAAgB,EAAA,CAAE;AAAA,QAAA,EAAA,CACjC;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,oBAAmB,SAAS,MAAM,KAAK,MAAM,cAAc,aAAa,GAC3F,UAAA;AAAA,UAAA,oBAAC,UAAA,CAAA,CAAS;AAAA,UACV,oBAAC,UAAA,EAAU,UAAA,EAAE,cAAc,EAAA,CAAE;AAAA,QAAA,EAAA,CAC/B;AAAA,QAEA,qBAAC,eAAA,EAAc,OAAM,eACnB,UAAA;AAAA,UAAA,oBAAC,cAAA,CAAA,CAAa;AAAA,+BACb,UAAA,EAAU,UAAA;AAAA,YAAA,EAAE,MAAM;AAAA,YACjB;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,gBAAgB,EAAE,OAAO,KAAiB;AAAA,gBAChE,OAAO,aAAa;AAAA,gBAEnB,UAAA;AAAA,kBAAA,MAAM,OAAO,OAAK,EAAE,UAAU,SAAS,EAAE,IAAI,CAAC,SAAS;AACtD,2BACE,oBAAC,UAAA,EAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAAU,eAAa,KAAK,IAC9E,UAAA,KAAK,MAAA,GADK,KAAK,EAElB;AAAA,kBAEJ,CAAC;AAAA,kBACD,oBAAC,YAAA,EAAS,OAAO,EAAE,qBAAqB,GACrC,UAAA,MAAM,OAAO,CAAA,MAAK,EAAE,UAAU,qBAAqB,EAAE,IAAI,CAAC,SAAS;AAClE,2BACE,oBAAC,UAAA,EAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAClD,UAAA,KAAK,MAAA,GADK,KAAK,EAElB;AAAA,kBAEJ,CAAC,EAAA,CACH;AAAA,gBAAA;AAAA,cAAA;AAAA,YACF;AAAA,UAAA,EAAA,CACF;AAAA,QAAA,EAAA,CACF;AAAA,QAEA,qBAAC,eAAA,EAAc,OAAM,gBACnB,UAAA;AAAA,UAAA,oBAAC,YAAA,CAAA,CAAW;AAAA,+BACX,UAAA,EAAS,UAAA;AAAA,YAAA;AAAA,YACR;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,qBAAqB,EAAE,OAAO,KAAK;AAAA,gBACzD,OAAO,KAAK,MAAM,KAAK;AAAA,gBAEtB,UAAA,OAAO,QAAQ,kBAAkB,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM;AACxD,yBACE,oBAAC,UAAA,EAAkB,OAAO,MACvB,kBADU,IAEb;AAAA,gBAEJ,CAAC;AAAA,cAAA;AAAA,YACH;AAAA,UAAA,EAAA,CACF;AAAA,QAAA,EAAA,CACF;AAAA,QAEA,qBAAC,aAAA,EAAY,MAAM,6CACjB,UAAA;AAAA,UAAA,oBAAC,eAAA,CAAA,CAAc;AAAA,UACf,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,MAAA,EAAA,CACF;AAAA,IAAA,EAAA,CACF,EAAA,CACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d581519332bdff74d3cb5001df8051c24d7c7191"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Gi=function(){return s},s}Gi();const LRe=(Gi().s[0]++,ERe()),sS=(Gi().s[1]++,["chrome","firefox"].indexOf(LRe.name)>-1);class _1 extends In.Component{render(){return Gi().f[0]++,Gi().s[2]++,oe.jsx("span",{className:"maputnik-icon-text",children:this.props.children})}}class URe extends In.Component{render(){return Gi().f[1]++,Gi().s[3]++,oe.jsx("a",{className:Ig("maputnik-toolbar-link",this.props.className),href:this.props.href,rel:"noopener noreferrer",target:"_blank","data-wd-key":"toolbar:link",children:this.props.children})}}class BH extends In.Component{render(){return Gi().f[2]++,Gi().s[4]++,oe.jsx("div",{className:"maputnik-toolbar-select","data-wd-key":this.props.wdKey,children:this.props.children})}}class cx extends In.Component{render(){return Gi().f[3]++,Gi().s[5]++,oe.jsx("button",{className:"maputnik-toolbar-action","data-wd-key":this.props.wdKey,onClick:this.props.onClick,children:this.props.children})}}class KRe extends In.Component{state=(Gi().s[6]++,{isOpen:{settings:!1,sources:!1,open:!1,add:!1,export:!1}});handleSelection(e){Gi().f[4]++,Gi().s[7]++,this.props.onSetMapState(e)}handleLanguageChange(e){Gi().f[5]++,Gi().s[8]++,this.props.i18n.changeLanguage(e)}onSkip=(Gi().s[9]++,e=>{if(Gi().f[6]++,Gi().s[10]++,e==="map")Gi().b[0][0]++,Gi().s[11]++,document.querySelector(".maplibregl-canvas").focus();else{Gi().b[0][1]++;const t=(Gi().s[12]++,document.querySelector("#skip-target-"+e));Gi().s[13]++,t.focus()}});render(){Gi().f[7]++;const e=(Gi().s[14]++,this.props.t),t=(Gi().s[15]++,[{id:"map",group:"general",title:e("Map")},{id:"inspect",group:"general",title:e("Inspect"),disabled:this.props.renderer==="ol"},{id:"filter-deuteranopia",group:"color-accessibility",title:e("Deuteranopia filter"),disabled:!sS},{id:"filter-protanopia",group:"color-accessibility",title:e("Protanopia filter"),disabled:!sS},{id:"filter-tritanopia",group:"color-accessibility",title:e("Tritanopia filter"),disabled:!sS},{id:"filter-achromatopsia",group:"color-accessibility",title:e("Achromatopsia filter"),disabled:!sS}]),i=(Gi().s[16]++,t.find(r=>(Gi().f[8]++,Gi().s[17]++,r.id===this.props.mapState)));return Gi().s[18]++,oe.jsx("nav",{className:"maputnik-toolbar",children:oe.jsxs("div",{className:"maputnik-toolbar__inner",children:[oe.jsxs("div",{className:"maputnik-toolbar-logo-container",children:[oe.jsx("button",{"data-wd-key":"root:skip:layer-list",className:"maputnik-toolbar-skip",onClick:r=>(Gi().f[9]++,Gi().s[19]++,this.onSkip("layer-list")),children:e("Layers list")}),oe.jsx("button",{"data-wd-key":"root:skip:layer-editor",className:"maputnik-toolbar-skip",onClick:r=>(Gi().f[10]++,Gi().s[20]++,this.onSkip("layer-editor")),children:e("Layer editor")}),oe.jsx("button",{"data-wd-key":"root:skip:map-view",className:"maputnik-toolbar-skip",onClick:r=>(Gi().f[11]++,Gi().s[21]++,this.onSkip("map")),children:e("Map view")}),oe.jsxs("a",{className:"maputnik-toolbar-logo",target:"blank",rel:"noreferrer noopener",href:"https://github.com/maplibre/maputnik",children:[oe.jsx("img",{src:PRe,alt:e("Maputnik on GitHub")}),oe.jsxs("h1",{children:[oe.jsx("span",{className:"maputnik-toolbar-name",children:EH.name}),oe.jsxs("span",{className:"maputnik-toolbar-version",children:["v",EH.version]})]})]})]}),oe.jsxs("div",{className:"maputnik-toolbar__actions",role:"navigation","aria-label":"Toolbar",children:[oe.jsxs(cx,{wdKey:"nav:open",onClick:()=>(Gi().f[12]++,Gi().s[22]++,this.props.onToggleModal("open")),children:[oe.jsx(vfe,{}),oe.jsx(_1,{children:e("Open")})]}),oe.jsxs(cx,{wdKey:"nav:export",onClick:()=>(Gi().f[13]++,Gi().s[23]++,this.props.onToggleModal("export")),children:[oe.jsx(nD,{}),oe.jsx(_1,{children:e("Save")})]}),oe.jsxs(cx,{wdKey:"nav:code-editor",onClick:()=>(Gi().f[14]++,Gi().s[24]++,this.props.onToggleModal("codeEditor")),children:[oe.jsx(dfe,{}),oe.jsx(_1,{children:e("Code Editor")})]}),oe.jsxs(cx,{wdKey:"nav:sources",onClick:()=>(Gi().f[15]++,Gi().s[25]++,this.props.onToggleModal("sources")),children:[oe.jsx(Ofe,{}),oe.jsx(_1,{children:e("Data Sources")})]}),oe.jsxs(cx,{wdKey:"nav:settings",onClick:()=>(Gi().f[16]++,Gi().s[26]++,this.props.onToggleModal("settings")),children:[oe.jsx(bfe,{}),oe.jsx(_1,{children:e("Style Settings")})]}),oe.jsxs(cx,{wdKey:"nav:global-state",onClick:()=>(Gi().f[17]++,Gi().s[27]++,this.props.onToggleModal("globalState")),children:[oe.jsx(Pfe,{}),oe.jsx(_1,{children:e("Global State")})]}),oe.jsxs(BH,{wdKey:"nav:inspect",children:[oe.jsx(ffe,{}),oe.jsxs(_1,{children:[e("View"),oe.jsxs("select",{className:"maputnik-select","data-wd-key":"maputnik-select",onChange:r=>(Gi().f[18]++,Gi().s[28]++,this.handleSelection(r.target.value)),value:i?.id,children:[t.filter(r=>(Gi().f[19]++,Gi().s[29]++,r.group==="general")).map(r=>(Gi().f[20]++,Gi().s[30]++,oe.jsx("option",{value:r.id,disabled:r.disabled,"data-wd-key":r.id,children:r.title},r.id))),oe.jsx("optgroup",{label:e("Color accessibility"),children:t.filter(r=>(Gi().f[21]++,Gi().s[31]++,r.group==="color-accessibility")).map(r=>(Gi().f[22]++,Gi().s[32]++,oe.jsx("option",{value:r.id,disabled:r.disabled,children:r.title},r.id)))})]})]})]}),oe.jsxs(BH,{wdKey:"nav:language",children:[oe.jsx(yfe,{}),oe.jsxs(_1,{children:["Language",oe.jsx("select",{className:"maputnik-select","data-wd-key":"maputnik-lang-select",onChange:r=>(Gi().f[23]++,Gi().s[33]++,this.handleLanguageChange(r.target.value)),value:this.props.i18n.language,children:Object.entries(sZ).map(([r,o])=>(Gi().f[24]++,Gi().s[34]++,oe.jsx("option",{value:r,children:o},r)))})]})]}),oe.jsxs(URe,{href:"https://github.com/maplibre/maputnik/wiki",children:[oe.jsx(pfe,{}),oe.jsx(_1,{children:e("Help")})]})]})]})})}}const FRe=(Gi().s[35]++,Do()(KRe));function v6(){var n="/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",e="d17a642b15310eb6111b086bd920c67ec86a8271",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:6,column:3}},line:4}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx"],names:[],mappings:"AAQW;AARX,OAAO,WAAW;AAMlB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,6BACnB,eAAK,MAAM,UACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17a642b15310eb6111b086bd920c67ec86a8271"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return v6=function(){return s},s}v6();class OH extends In.Component{render(){return v6().f[0]++,v6().s[0]++,oe.jsx("div",{className:"maputnik-scroll-container",children:this.props.children})}}function cp(){var n="/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",e="d10f2b4393c64530a7dc27936dc2b0d9d69d1ee7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:8,column:46}},1:{start:{line:9,column:4},end:{line:21,column:12}},2:{start:{line:24,column:18},end:{line:24,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:22,column:3}},line:7}},branchMap:{0:{loc:{start:{line:12,column:8},end:{line:12,column:190}},type:"binary-expr",locations:[{start:{line:12,column:8},end:{line:12,column:29}},{start:{line:12,column:49},end:{line:12,column:190}}],line:12},1:{loc:{start:{line:13,column:8},end:{line:16,column:12}},type:"binary-expr",locations:[{start:{line:13,column:8},end:{line:13,column:30}},{start:{line:13,column:50},end:{line:16,column:12}}],line:13},2:{loc:{start:{line:19,column:6},end:{line:19,column:123}},type:"binary-expr",locations:[{start:{line:19,column:6},end:{line:19,column:23}},{start:{line:19,column:43},end:{line:19,column:123}}],line:19}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx"],names:[],mappings:"AAyBY,SAKyB,UALzB,KAKyB,YALzB;AAzBZ,OAAO,WAAW;AAClB,OAAO,qBAAqB;AAC5B,SAA+B,uBAAuB;AACtD,SAAS,mBAAmB;AAY5B,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EAEtE,SAAS;AACP,aAAS,KAAK,MAAM,KAAK,MAAM,KAAK,IAAI;AAExC,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C,+BAAC,SAAI,WAAU,mBACZ;AAAA,WAAK,MAAM;AAAA,MACZ,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM,cAAc,oBAAC,SAAI,WAAU,+BACvC,8BAAC,mBACE,eAAK,MAAM,YACd,GACF;AAAA,QAEC,CAAC,KAAK,MAAM,cAAc,iCACzB;AAAA,8BAAC,SAAI,WAAU,wBACZ,eAAK,MAAM,WACd;AAAA,UACA,oBAAC,SAAI,WAAU,0BACb,8BAAC,mBACE,eAAK,MAAM,aACd,GACF;AAAA,WACF;AAAA,QACC,KAAK,MAAM;AAAA,SACd;AAAA,MACC,KAAK,MAAM,UAAU,oBAAC,SAAI,WAAU,0BAClC,eAAK,MAAM,QACd;AAAA,MAEC,KAAK,MAAM;AAAA,OACd,GACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d10f2b4393c64530a7dc27936dc2b0d9d69d1ee7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return cp=function(){return s},s}cp();class zRe extends In.Component{render(){return cp().f[0]++,cp().s[0]++,document.body.dir=this.props.i18n.dir(),cp().s[1]++,oe.jsx(o2.Provider,{value:{size:"14px"},children:oe.jsxs("div",{className:"maputnik-layout",children:[this.props.toolbar,oe.jsxs("div",{className:"maputnik-layout-main",children:[(cp().b[0][0]++,this.props.codeEditor&&(cp().b[0][1]++,oe.jsx("div",{className:"maputnik-layout-code-editor",children:oe.jsx(OH,{children:this.props.codeEditor})}))),(cp().b[1][0]++,!this.props.codeEditor&&(cp().b[1][1]++,oe.jsxs(oe.Fragment,{children:[oe.jsx("div",{className:"maputnik-layout-list",children:this.props.layerList}),oe.jsx("div",{className:"maputnik-layout-drawer",children:oe.jsx(OH,{children:this.props.layerEditor})})]}))),this.props.map]}),(cp().b[2][0]++,this.props.bottom&&(cp().b[2][1]++,oe.jsx("div",{className:"maputnik-layout-bottom",children:this.props.bottom}))),this.props.modals]})})}}const jRe=(cp().s[2]++,Do()(zRe));function ga(){var n="/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",e="35d9aec71cb86113da5d8ac4f197fbf609a8818e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:38},end:{line:11,column:48}},2:{start:{line:12,column:19},end:{line:40,column:6}},3:{start:{line:14,column:6},end:{line:38,column:7}},4:{start:{line:15,column:27},end:{line:15,column:32}},5:{start:{line:16,column:24},end:{line:16,column:73}},6:{start:{line:17,column:8},end:{line:35,column:13}},7:{start:{line:30,column:31},end:{line:30,column:74}},8:{start:{line:37,column:8},end:{line:37,column:32}},9:{start:{line:39,column:6},end:{line:39,column:120}},10:{start:{line:41,column:18},end:{line:43,column:6}},11:{start:{line:42,column:6},end:{line:42,column:68}},12:{start:{line:44,column:4},end:{line:47,column:9}},13:{start:{line:50,column:24},end:{line:50,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:25},end:{line:8,column:5}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:48,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:42},end:{line:12,column:43}},loc:{start:{line:12,column:58},end:{line:40,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:31},end:{line:30,column:74}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:41,column:40},end:{line:41,column:41}},loc:{start:{line:41,column:50},end:{line:43,column:5}},line:41}},branchMap:{0:{loc:{start:{line:14,column:6},end:{line:38,column:7}},type:"if",locations:[{start:{line:14,column:6},end:{line:38,column:7}},{start:{line:36,column:13},end:{line:38,column:7}}],line:14},1:{loc:{start:{line:14,column:10},end:{line:14,column:55}},type:"binary-expr",locations:[{start:{line:14,column:10},end:{line:14,column:22}},{start:{line:14,column:26},end:{line:14,column:55}}],line:14},2:{loc:{start:{line:24,column:10},end:{line:34,column:14}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:50}},{start:{line:24,column:70},end:{line:34,column:14}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx"],names:[],mappings:"AA6BY,SAIE,UAHM,KADR;AA7BZ,OAAO,WAAW;AAClB,SAAQ,qBAAoB;AAE5B,SAAS,OAA6B,uBAAuB;AAY7D,MAAM,gCAAgC,MAAM,UAAwC;AAAA,EAClF,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,mBAAkB,IAAI,KAAK;AACrC,UAAM,SAAS,KAAK,MAAM,QAAQ,IAAI,CAAC,OAAO,QAAQ;AACpD,UAAI;AACJ,UAAI,MAAM,UAAU,MAAM,OAAO,SAAS,SAAS;AACjD,cAAM,EAAC,OAAM,IAAI;AACjB,cAAM,UAAU,KAAK,MAAM,UAAU,OAAO,OAAO,KAAK,KAAK,EAAE;AAC/D,kBACE,iCACE;AAAA,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAM,wBAAc,OAAO,GAAE;AAAA,YAAO;AAAA,YAAG,OAAO,KAAK;AAAA,aAC5D;AAAA,UACC,uBAAuB,OAAO,KAAK,SAClC,iCAAE;AAAA;AAAA,YAEA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,MAAM,KAAK,MAAM,cAAe,OAAO,KAAK,KAAK;AAAA,gBAEzD,YAAE,iBAAiB;AAAA;AAAA,YACtB;AAAA,aACF;AAAA,WAEJ;AAAA,MAEJ,OACK;AACH,kBAAU,MAAM;AAAA,MAClB;AACA,aAAO,oBAAC,OAAqB,WAAU,gCACpC,qBADY,WAAS,GAExB;AAAA,IACF,CAAC;AAED,UAAM,QAAQ,KAAK,MAAM,OAAO,IAAI,CAAC,GAAG,MAAM;AAC5C,aAAO,oBAAC,OAAmB,eAAZ,UAAQ,CAAM;AAAA,IAC/B,CAAC;AAED,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA;AAAA,MACA;AAAA,OACH;AAAA,EACF;AACF;AAEA,MAAM,kBAAkB,gBAAgB,EAAE,uBAAuB;AACjE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"35d9aec71cb86113da5d8ac4f197fbf609a8818e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ga=function(){return s},s}ga();class NRe extends In.Component{static defaultProps=(ga().s[0]++,{onLayerSelect:()=>{ga().f[0]++}});render(){ga().f[1]++;const{t:e,selectedLayerIndex:t}=(ga().s[1]++,this.props),i=(ga().s[2]++,this.props.errors?.map((o,s)=>{ga().f[2]++;let a;if(ga().s[3]++,ga().b[1][0]++,o.parsed&&(ga().b[1][1]++,o.parsed.type==="layer")){ga().b[0][0]++;const{parsed:c}=(ga().s[4]++,o),d=(ga().s[5]++,this.props.mapStyle?.layers[c.data.index].id);ga().s[6]++,a=oe.jsxs(oe.Fragment,{children:[oe.jsxs(hC,{t:e,children:["Layer ",oe.jsx("span",{children:Qse(d)}),": ",c.data.message]}),(ga().b[2][0]++,t!==c.data.index&&(ga().b[2][1]++,oe.jsxs(oe.Fragment,{children:["",oe.jsx("button",{className:"maputnik-message-panel__switch-button",onClick:()=>(ga().f[3]++,ga().s[7]++,this.props.onLayerSelect(c.data.index)),children:e("switch to layer")})]})))]})}else ga().b[0][1]++,ga().s[8]++,a=o.message;return ga().s[9]++,oe.jsx("p",{className:"maputnik-message-panel-error",children:a},"error-"+s)})),r=(ga().s[10]++,this.props.infos?.map((o,s)=>(ga().f[4]++,ga().s[11]++,oe.jsx("p",{children:o},"info-"+s))));return ga().s[12]++,oe.jsxs("div",{className:"maputnik-message-panel",children:[i,r]})}}const GRe=(ga().s[13]++,Do()(NRe));function K5(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",e="6904abccc922d01222214bca1ee3bdee75077020",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:148}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,gBAA0C;AACjD,OAAO,cAAc;AASrB,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6904abccc922d01222214bca1ee3bdee75077020"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return K5=function(){return s},s}K5();K5().s[0]++;const b6=n=>(K5().f[0]++,K5().s[1]++,oe.jsx(uv,{label:n.label,fieldSpec:n.fieldSpec,children:oe.jsx(mP,{...n})}));function F5(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",e="4d2523cd21b202fb5e80e08624becdbab30e967f",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,iBAA0C;AACjD,OAAO,WAAW;AAWlB,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4d2523cd21b202fb5e80e08624becdbab30e967f"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return F5=function(){return s},s}F5();F5().s[0]++;const xm=n=>(F5().f[0]++,F5().s[1]++,oe.jsx(cs,{label:n.label,fieldSpec:n.fieldSpec,children:oe.jsx(N1,{...n})}));function z5(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",e="5d41bf44c48c380a773c8c6219651c4348518afa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx"],names:[],mappings:"AAcM;AAdN,OAAO,WAAW;AAClB,OAAO,iBAA0C;AAUjD,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5d41bf44c48c380a773c8c6219651c4348518afa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return z5=function(){return s},s}z5();z5().s[0]++;const vd=n=>(z5().f[0]++,z5().s[1]++,oe.jsx(cs,{label:n.label,fieldSpec:n.fieldSpec,children:oe.jsx(Fm,{...n})}));function j5(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",e="6e4f23f735ab05a9622545421c68df85e4603d43",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",statementMap:{0:{start:{line:4,column:17},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:143}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:17},end:{line:4,column:18}},loc:{start:{line:4,column:28},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,cAAqD;AAC5D,OAAO,WAAW;AAWlB,MAAM,WAAoC,CAAC,UAAU;AACnD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,YAAU,GAAG,OAAO,GACvB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6e4f23f735ab05a9622545421c68df85e4603d43"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return j5=function(){return s},s}j5();j5().s[0]++;const zM=n=>(j5().f[0]++,j5().s[1]++,oe.jsx(cs,{label:n.label,fieldSpec:n.fieldSpec,children:oe.jsx(uF,{...n})}));function N5(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",e="245ef066962174fcd1012332d28af93e7b97872c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,iBAA0C;AAWjD,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"245ef066962174fcd1012332d28af93e7b97872c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return N5=function(){return s},s}N5();N5().s[0]++;const G5=n=>(N5().f[0]++,N5().s[1]++,oe.jsx(cs,{label:n.label,fieldSpec:n.fieldSpec,children:oe.jsx(HC,{...n})}));function W5(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",e="c3637509a0af6618b52e814bed4254c2e3fa3b7a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",statementMap:{0:{start:{line:4,column:18},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:147}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:18},end:{line:4,column:19}},loc:{start:{line:4,column:29},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,eAAsC;AAC7C,OAAO,cAAc;AAWrB,MAAM,YAAsC,CAAC,UAAU;AACrD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c3637509a0af6618b52e814bed4254c2e3fa3b7a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return W5=function(){return s},s}W5();W5().s[0]++;const WRe=n=>(W5().f[0]++,W5().s[1]++,oe.jsx(uv,{label:n.label,fieldSpec:n.fieldSpec,children:oe.jsx(aF,{...n})}));function Q5(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",e="81b03af9ad032d255df7823d843b73e8fa5e3f61",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:145}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,gBAAwC;AAW/C,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"81b03af9ad032d255df7823d843b73e8fa5e3f61"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Q5=function(){return s},s}Q5();Q5().s[0]++;const QRe=n=>(Q5().f[0]++,Q5().s[1]++,oe.jsx(cs,{label:n.label,fieldSpec:n.fieldSpec,children:oe.jsx(sF,{...n})}));function q5(){var n="/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",e="3fd72cd1ec4be346f0d6d854a97e371e1b9c2997",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",statementMap:{0:{start:{line:1,column:13},end:{line:32,column:2}},1:{start:{line:1,column:21},end:{line:32,column:1}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:13},end:{line:1,column:14}},loc:{start:{line:1,column:21},end:{line:32,column:1}},line:1}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts"],names:[],mappings:"AAEA,MAAM,OAAO,CAAC,OAAkB;AAAA,EAC9B,UAAU;AAAA,IACR,uBAAuB;AAAA,MACrB,OAAO,EAAE,uBAAuB;AAAA,MAChC,KAAK,EAAE,yCAAyC;AAAA,MAChD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,4BAA4B;AAAA,MAC1B,OAAO,EAAE,4BAA4B;AAAA,MACrC,KAAK,EAAE,iDAAiD;AAAA,MACxD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,qBAAqB;AAAA,MACnB,OAAO,EAAE,qBAAqB;AAAA,MAC9B,KAAK,EAAE,0BAA0B;AAAA,MACjC,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,yBAAyB;AAAA,MACvB,OAAO,EAAE,yBAAyB;AAAA,MAClC,KAAK,EAAE,8CAA8C;AAAA,MACrD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,gBAAgB;AAAA,MACd,OAAO,EAAE,gBAAgB;AAAA,MACzB,KAAK,EAAE,sDAAsD;AAAA,IAC/D;AAAA,EACF;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3fd72cd1ec4be346f0d6d854a97e371e1b9c2997"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return q5=function(){return s},s}q5();q5().s[0]++;const Yse=n=>(q5().f[0]++,q5().s[1]++,{maputnik:{maptiler_access_token:{label:n("MapTiler Access Token"),doc:n("Public access token for MapTiler Cloud."),docUrl:"https://docs.maptiler.com/cloud/api/authentication-key/",docUrlLinkText:n("Learn More")},thunderforest_access_token:{label:n("Thunderforest Access Token"),doc:n("Public access token for Thunderforest services."),docUrl:"https://www.thunderforest.com/docs/apikeys/",docUrlLinkText:n("Learn More")},stadia_access_token:{label:n("Stadia Maps API Key"),doc:n("API key for Stadia Maps."),docUrl:"https://docs.stadiamaps.com/authentication/",docUrlLinkText:n("Learn More")},locationiq_access_token:{label:n("LocationIQ Access Token"),doc:n("Public access token for LocationIQ services."),docUrl:"https://docs.locationiq.com/docs/maps",docUrlLinkText:n("Learn More")},style_renderer:{label:n("Style Renderer"),doc:n("Choose the default Maputnik renderer for this style.")}}});function On(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx",e="88fb94a6f90f9fea29b8036f99aee1df40b81df7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx",statementMap:{0:{start:{line:18,column:23},end:{line:20,column:5}},1:{start:{line:21,column:4},end:{line:25,column:5}},2:{start:{line:22,column:6},end:{line:22,column:34}},3:{start:{line:24,column:6},end:{line:24,column:35}},4:{start:{line:26,column:4},end:{line:29,column:7}},5:{start:{line:32,column:18},end:{line:34,column:5}},6:{start:{line:35,column:4},end:{line:39,column:5}},7:{start:{line:36,column:6},end:{line:36,column:29}},8:{start:{line:38,column:6},end:{line:38,column:30}},9:{start:{line:40,column:4},end:{line:43,column:7}},10:{start:{line:46,column:20},end:{line:48,column:5}},11:{start:{line:49,column:4},end:{line:53,column:5}},12:{start:{line:50,column:6},end:{line:50,column:31}},13:{start:{line:52,column:6},end:{line:52,column:32}},14:{start:{line:54,column:4},end:{line:57,column:7}},15:{start:{line:60,column:23},end:{line:62,column:5}},16:{start:{line:63,column:4},end:{line:67,column:5}},17:{start:{line:64,column:6},end:{line:64,column:29}},18:{start:{line:66,column:6},end:{line:66,column:30}},19:{start:{line:68,column:4},end:{line:71,column:7}},20:{start:{line:74,column:25},end:{line:76,column:5}},21:{start:{line:77,column:4},end:{line:81,column:5}},22:{start:{line:78,column:6},end:{line:78,column:36}},23:{start:{line:80,column:6},end:{line:80,column:37}},24:{start:{line:82,column:4},end:{line:82,column:44}},25:{start:{line:85,column:21},end:{line:85,column:55}},26:{start:{line:86,column:54},end:{line:86,column:64}},27:{start:{line:87,column:16},end:{line:87,column:38}},28:{start:{line:88,column:18},end:{line:88,column:49}},29:{start:{line:89,column:23},end:{line:89,column:59}},30:{start:{line:90,column:20},end:{line:90,column:53}},31:{start:{line:91,column:23},end:{line:91,column:59}},32:{start:{line:92,column:4},end:{line:335,column:6}},33:{start:{line:107,column:35},end:{line:107,column:74}},34:{start:{line:117,column:35},end:{line:117,column:75}},35:{start:{line:125,column:35},end:{line:125,column:76}},36:{start:{line:135,column:35},end:{line:135,column:76}},37:{start:{line:145,column:35},end:{line:145,column:104}},38:{start:{line:155,column:35},end:{line:155,column:105}},39:{start:{line:165,column:35},end:{line:165,column:98}},40:{start:{line:175,column:35},end:{line:175,column:102}},41:{start:{line:187,column:35},end:{line:187,column:76}},42:{start:{line:197,column:35},end:{line:197,column:74}},43:{start:{line:207,column:35},end:{line:207,column:77}},44:{start:{line:217,column:35},end:{line:217,column:75}},45:{start:{line:229,column:35},end:{line:229,column:76}},46:{start:{line:239,column:35},end:{line:239,column:75}},47:{start:{line:249,column:35},end:{line:249,column:79}},48:{start:{line:261,column:35},end:{line:261,column:78}},49:{start:{line:271,column:35},end:{line:271,column:78}},50:{start:{line:281,column:35},end:{line:281,column:84}},51:{start:{line:291,column:35},end:{line:291,column:80}},52:{start:{line:301,column:35},end:{line:301,column:83}},53:{start:{line:316,column:35},end:{line:316,column:67}},54:{start:{line:330,column:35},end:{line:330,column:87}},55:{start:{line:338,column:22},end:{line:338,column:62}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:44},end:{line:30,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:39},end:{line:44,column:3}},line:31},2:{name:"(anonymous_2)",decl:{start:{line:45,column:2},end:{line:45,column:3}},loc:{start:{line:45,column:41},end:{line:58,column:3}},line:45},3:{name:"(anonymous_3)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:30},end:{line:72,column:3}},line:59},4:{name:"(anonymous_4)",decl:{start:{line:73,column:2},end:{line:73,column:3}},loc:{start:{line:73,column:39},end:{line:83,column:3}},line:73},5:{name:"(anonymous_5)",decl:{start:{line:84,column:2},end:{line:84,column:3}},loc:{start:{line:84,column:11},end:{line:336,column:3}},line:84},6:{name:"(anonymous_6)",decl:{start:{line:107,column:24},end:{line:107,column:25}},loc:{start:{line:107,column:35},end:{line:107,column:74}},line:107},7:{name:"(anonymous_7)",decl:{start:{line:117,column:24},end:{line:117,column:25}},loc:{start:{line:117,column:35},end:{line:117,column:75}},line:117},8:{name:"(anonymous_8)",decl:{start:{line:125,column:24},end:{line:125,column:25}},loc:{start:{line:125,column:35},end:{line:125,column:76}},line:125},9:{name:"(anonymous_9)",decl:{start:{line:135,column:24},end:{line:135,column:25}},loc:{start:{line:135,column:35},end:{line:135,column:76}},line:135},10:{name:"(anonymous_10)",decl:{start:{line:145,column:24},end:{line:145,column:25}},loc:{start:{line:145,column:35},end:{line:145,column:104}},line:145},11:{name:"(anonymous_11)",decl:{start:{line:155,column:24},end:{line:155,column:25}},loc:{start:{line:155,column:35},end:{line:155,column:105}},line:155},12:{name:"(anonymous_12)",decl:{start:{line:165,column:24},end:{line:165,column:25}},loc:{start:{line:165,column:35},end:{line:165,column:98}},line:165},13:{name:"(anonymous_13)",decl:{start:{line:175,column:24},end:{line:175,column:25}},loc:{start:{line:175,column:35},end:{line:175,column:102}},line:175},14:{name:"(anonymous_14)",decl:{start:{line:187,column:24},end:{line:187,column:25}},loc:{start:{line:187,column:35},end:{line:187,column:76}},line:187},15:{name:"(anonymous_15)",decl:{start:{line:197,column:24},end:{line:197,column:25}},loc:{start:{line:197,column:35},end:{line:197,column:74}},line:197},16:{name:"(anonymous_16)",decl:{start:{line:207,column:24},end:{line:207,column:25}},loc:{start:{line:207,column:35},end:{line:207,column:77}},line:207},17:{name:"(anonymous_17)",decl:{start:{line:217,column:24},end:{line:217,column:25}},loc:{start:{line:217,column:35},end:{line:217,column:75}},line:217},18:{name:"(anonymous_18)",decl:{start:{line:229,column:24},end:{line:229,column:25}},loc:{start:{line:229,column:35},end:{line:229,column:76}},line:229},19:{name:"(anonymous_19)",decl:{start:{line:239,column:24},end:{line:239,column:25}},loc:{start:{line:239,column:35},end:{line:239,column:75}},line:239},20:{name:"(anonymous_20)",decl:{start:{line:249,column:24},end:{line:249,column:25}},loc:{start:{line:249,column:35},end:{line:249,column:79}},line:249},21:{name:"(anonymous_21)",decl:{start:{line:261,column:24},end:{line:261,column:25}},loc:{start:{line:261,column:35},end:{line:261,column:78}},line:261},22:{name:"(anonymous_22)",decl:{start:{line:271,column:24},end:{line:271,column:25}},loc:{start:{line:271,column:35},end:{line:271,column:78}},line:271},23:{name:"(anonymous_23)",decl:{start:{line:281,column:24},end:{line:281,column:25}},loc:{start:{line:281,column:35},end:{line:281,column:84}},line:281},24:{name:"(anonymous_24)",decl:{start:{line:291,column:24},end:{line:291,column:25}},loc:{start:{line:291,column:35},end:{line:291,column:80}},line:291},25:{name:"(anonymous_25)",decl:{start:{line:301,column:24},end:{line:301,column:25}},loc:{start:{line:301,column:35},end:{line:301,column:83}},line:301},26:{name:"(anonymous_26)",decl:{start:{line:316,column:24},end:{line:316,column:25}},loc:{start:{line:316,column:35},end:{line:316,column:67}},line:316},27:{name:"(anonymous_27)",decl:{start:{line:330,column:24},end:{line:330,column:25}},loc:{start:{line:330,column:35},end:{line:330,column:87}},line:330}},branchMap:{0:{loc:{start:{line:21,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:25,column:5}},{start:{line:23,column:11},end:{line:25,column:5}}],line:21},1:{loc:{start:{line:35,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:39,column:5}},{start:{line:37,column:11},end:{line:39,column:5}}],line:35},2:{loc:{start:{line:49,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:53,column:5}},{start:{line:51,column:11},end:{line:53,column:5}}],line:49},3:{loc:{start:{line:63,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:67,column:5}},{start:{line:65,column:11},end:{line:67,column:5}}],line:63},4:{loc:{start:{line:77,column:4},end:{line:81,column:5}},type:"if",locations:[{start:{line:77,column:4},end:{line:81,column:5}},{start:{line:79,column:11},end:{line:81,column:5}}],line:77},5:{loc:{start:{line:85,column:21},end:{line:85,column:55}},type:"binary-expr",locations:[{start:{line:85,column:21},end:{line:85,column:49}},{start:{line:85,column:53},end:{line:85,column:55}}],line:85},6:{loc:{start:{line:88,column:18},end:{line:88,column:49}},type:"binary-expr",locations:[{start:{line:88,column:18},end:{line:88,column:43}},{start:{line:88,column:47},end:{line:88,column:49}}],line:88},7:{loc:{start:{line:89,column:23},end:{line:89,column:59}},type:"binary-expr",locations:[{start:{line:89,column:23},end:{line:89,column:53}},{start:{line:89,column:57},end:{line:89,column:59}}],line:89},8:{loc:{start:{line:90,column:20},end:{line:90,column:53}},type:"binary-expr",locations:[{start:{line:90,column:20},end:{line:90,column:47}},{start:{line:90,column:51},end:{line:90,column:53}}],line:90},9:{loc:{start:{line:91,column:23},end:{line:91,column:59}},type:"binary-expr",locations:[{start:{line:91,column:23},end:{line:91,column:53}},{start:{line:91,column:57},end:{line:91,column:59}}],line:91},10:{loc:{start:{line:185,column:21},end:{line:185,column:42}},type:"binary-expr",locations:[{start:{line:185,column:21},end:{line:185,column:36}},{start:{line:185,column:40},end:{line:185,column:42}}],line:185},11:{loc:{start:{line:315,column:21},end:{line:315,column:55}},type:"binary-expr",locations:[{start:{line:315,column:21},end:{line:315,column:49}},{start:{line:315,column:53},end:{line:315,column:55}}],line:315},12:{loc:{start:{line:329,column:21},end:{line:329,column:62}},type:"binary-expr",locations:[{start:{line:329,column:21},end:{line:329,column:50}},{start:{line:329,column:54},end:{line:329,column:62}}],line:329}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx"],names:[],mappings:"AAqIM,SACE,KADF;AArIN,OAAO,WAAW;AAClB,OAAO,YAAY;AAEnB,SAA+B,uBAAuB;AAEtD,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAWhC,MAAM,8BAA8B,MAAM,UAAsC;AAAA,EAC9E,yBAAyB,UAAyC,OAA2B;AAC3F,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW,QAAQ;AAAA,IAC5B,OACK;AACH,iBAAW,QAAQ,IAAI;AAAA,IACzB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAAoC,OAAY;AAClE,UAAM,QAAQ;AAAA,MACZ,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,MAAM,QAAQ;AAAA,IACvB,OACK;AAEH,YAAM,QAAQ,IAAI;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,UAAsC,OAAY;AACtE,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,QAAQ,QAAQ;AAAA,IACzB,OACK;AAEH,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,qBAAqB,OAAY;AAC/B,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW;AAAA,IACpB,OACK;AACH,iBAAW,OAAO;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAA8C,OAAY;AAC5E,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,IAChB;AAEA,QAAI,UAAU,QAAW;AAEvB,aAAO,aAAa,QAAQ;AAAA,IAC9B,OACK;AAEH,mBAAa,QAAQ,IAAI;AAAA,IAC3B;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAEA,SAAS;AACP,UAAM,WAAW,KAAK,MAAM,SAAS,YAAY,CAAC;AAClD,UAAM,EAAC,GAAG,0BAA0B,SAAQ,IAAI,KAAK;AACrD,UAAM,MAAM,oBAAoB,CAAC;AAEjC,UAAM,QAAQ,KAAK,MAAM,SAAS,SAAS,CAAC;AAC5C,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AACtD,UAAM,UAAU,KAAK,MAAM,SAAS,WAAW,CAAC;AAChD,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AAEtD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,gBAAgB;AAAA,QAEzB,+BAAC,SAAI,WAAU,kBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,QAAQ,KAAK;AAAA;AAAA,UAC7D;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,EAAC,KAAK,EAAE,6DAA6D,EAAC;AAAA,cACjF,eAAY;AAAA,cACZ,OAAQ,KAAK,MAAM,SAAiB;AAAA,cACpC,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UACA,oBAAC,SAAM,OAAO,EAAE,YAAY,GAAG,WAAW,OAAO,MAAM,QAAQ,eAAY,yBACzE;AAAA,YAAC;AAAA;AAAA,cACC,UAAS;AAAA,cACT,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D,GACF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,cAC1C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,oCAAoC;AAAA,cACpD,UAAU,CAAC,UAAU,yBAAyB,sCAAsC,KAAK;AAAA;AAAA,UAC3F;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,cAC/C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,qCAAqC;AAAA,cACrD,UAAU,CAAC,UAAU,yBAAyB,uCAAuC,KAAK;AAAA;AAAA,UAC5F;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,cACxC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,8BAA8B;AAAA,cAC9C,UAAU,CAAC,UAAU,yBAAyB,gCAAgC,KAAK;AAAA;AAAA,UACrF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,cAC5C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,kCAAkC;AAAA,cAClD,UAAU,CAAC,UAAU,yBAAyB,oCAAoC,KAAK;AAAA;AAAA,UACzF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ;AAAA,cACjB,WAAW,OAAO,MAAM;AAAA,cACxB,QAAQ;AAAA,cACR,MAAK;AAAA,cACL,OAAO,SAAS,UAAU,CAAC;AAAA,cAC3B,SAAS,CAAC,GAAG,CAAC;AAAA,cACd,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS;AAAA,cACT,UAAU,CAAC,UAAU,KAAK,oBAAoB,QAAQ,KAAK;AAAA;AAAA,UAC7D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,SAAS;AAAA,cAClB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,QAAQ;AAAA,cAC9B,UAAU,CAAC,UAAU,KAAK,oBAAoB,WAAW,KAAK;AAAA;AAAA,UAChE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,cAAc;AAAA,cACvB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,cAC/C,SAAS,OAAO,MAAM,OAAO;AAAA,cAC7B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,aAAa;AAAA,cACtB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,iBAAiB;AAAA,cAC1B,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,UAAU;AAAA,cAChC,UAAU,CAAC,UAAU,KAAK,oBAAoB,aAAa,KAAK;AAAA;AAAA,UAClE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,QAAQ,OAAO,MAAM,SAAS;AAAA,cAC9B,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,SAAS;AAAA,cAC/B,UAAU,CAAC,UAAU,KAAK,oBAAoB,YAAY,KAAK;AAAA;AAAA,UACjE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,QAAQ;AAAA,cAC1B,eAAY;AAAA,cACZ,OAAO,QAAQ;AAAA,cACf,UAAU,CAAC,UAAU,KAAK,sBAAsB,UAAU,KAAK;AAAA;AAAA,UACjE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,sBAAsB;AAAA,cAC/B,WAAW,OAAO,QAAQ;AAAA,cAC1B,OAAO,QAAQ;AAAA,cACf,SAAS,OAAO,QAAQ,aAAa;AAAA,cACrC,UAAU,CAAC,UAAU,KAAK,sBAAsB,gBAAgB,KAAK;AAAA;AAAA,UACvE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,kBAAkB;AAAA,cAC3B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,MAAM;AAAA,cACjC,UAAU,CAAC,UAAU,KAAK,yBAAyB,SAAS,KAAK;AAAA;AAAA,UACnE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,qBAAqB;AAAA,cAC9B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,SAAS;AAAA,cACpC,UAAU,CAAC,UAAU,KAAK,yBAAyB,YAAY,KAAK;AAAA;AAAA,UACtE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,IAAI,WAAW;AAAA,gBAChB,CAAC,YAAY,UAAU;AAAA,gBACvB,CAAC,SAAS,OAAO;AAAA,gBACjB,CAAC,wBAAwB,sBAAsB;AAAA,cACjD;AAAA,cACA,OAAO,YAAY,MAAM,SAAS,KAAK;AAAA,cACvC,UAAU,CAAC,UAAU,KAAK,qBAAqB,KAAK;AAAA;AAAA,UACtD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,eAAe;AAAA,cACnC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,UAAU,eAAe;AAAA,gBAC1B,CAAC,MAAM,EAAE,4BAA4B,CAAC;AAAA,cACxC;AAAA,cACA,OAAO,SAAS,mBAAmB,KAAK;AAAA,cACxC,UAAU,CAAC,UAAU,yBAAyB,qBAAqB,KAAK;AAAA;AAAA,UAC1E;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"88fb94a6f90f9fea29b8036f99aee1df40b81df7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return On=function(){return s},s}On();class qRe extends In.Component{changeTransitionProperty(e,t){On().f[0]++;const i=(On().s[0]++,{...this.props.mapStyle.transition});On().s[1]++,t===void 0?(On().b[0][0]++,On().s[2]++,delete i[e]):(On().b[0][1]++,On().s[3]++,i[e]=t),On().s[4]++,this.props.onStyleChanged({...this.props.mapStyle,transition:i})}changeLightProperty(e,t){On().f[1]++;const i=(On().s[5]++,{...this.props.mapStyle.light});On().s[6]++,t===void 0?(On().b[1][0]++,On().s[7]++,delete i[e]):(On().b[1][1]++,On().s[8]++,i[e]=t),On().s[9]++,this.props.onStyleChanged({...this.props.mapStyle,light:i})}changeTerrainProperty(e,t){On().f[2]++;const i=(On().s[10]++,{...this.props.mapStyle.terrain});On().s[11]++,t===void 0?(On().b[2][0]++,On().s[12]++,delete i[e]):(On().b[2][1]++,On().s[13]++,i[e]=t),On().s[14]++,this.props.onStyleChanged({...this.props.mapStyle,terrain:i})}changeProjectionType(e){On().f[3]++;const t=(On().s[15]++,{...this.props.mapStyle.projection});On().s[16]++,e===void 0?(On().b[3][0]++,On().s[17]++,delete t.type):(On().b[3][1]++,On().s[18]++,t.type=e),On().s[19]++,this.props.onStyleChanged({...this.props.mapStyle,projection:t})}changeStyleProperty(e,t){On().f[4]++;const i=(On().s[20]++,{...this.props.mapStyle});On().s[21]++,t===void 0?(On().b[4][0]++,On().s[22]++,delete i[e]):(On().b[4][1]++,On().s[23]++,i[e]=t),On().s[24]++,this.props.onStyleChanged(i)}render(){On().f[5]++;const e=(On().s[25]++,On().b[5][0]++,this.props.mapStyle.metadata||(On().b[5][1]++,{})),{t,onChangeMetadataProperty:i,mapStyle:r}=(On().s[26]++,this.props),o=(On().s[27]++,Yse(t)),s=(On().s[28]++,On().b[6][0]++,this.props.mapStyle.light||(On().b[6][1]++,{})),a=(On().s[29]++,On().b[7][0]++,this.props.mapStyle.transition||(On().b[7][1]++,{})),c=(On().s[30]++,On().b[8][0]++,this.props.mapStyle.terrain||(On().b[8][1]++,{})),d=(On().s[31]++,On().b[9][0]++,this.props.mapStyle.projection||(On().b[9][1]++,{}));return On().s[32]++,oe.jsx(V1,{"data-wd-key":"modal:settings",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Style Settings"),children:oe.jsxs("div",{className:"modal:settings",children:[oe.jsx(vd,{label:t("Name"),fieldSpec:Wr.$root.name,"data-wd-key":"modal:settings.name",value:this.props.mapStyle.name,onChange:m=>(On().f[6]++,On().s[33]++,this.changeStyleProperty("name",m))}),oe.jsx(vd,{label:t("Owner"),fieldSpec:{doc:t("Owner ID of the style. Used by Mapbox or future style APIs.")},"data-wd-key":"modal:settings.owner",value:this.props.mapStyle.owner,onChange:m=>(On().f[7]++,On().s[34]++,this.changeStyleProperty("owner",m))}),oe.jsx(cs,{label:t("Sprite URL"),fieldSpec:Wr.$root.sprite,"data-wd-key":"modal:settings.sprite",children:oe.jsx(tO,{lintType:"json",value:this.props.mapStyle.sprite,onChange:m=>(On().f[8]++,On().s[35]++,this.changeStyleProperty("sprite",m))})}),oe.jsx(zM,{label:t("Glyphs URL"),fieldSpec:Wr.$root.glyphs,"data-wd-key":"modal:settings.glyphs",value:this.props.mapStyle.glyphs,onChange:m=>(On().f[9]++,On().s[36]++,this.changeStyleProperty("glyphs",m))}),oe.jsx(vd,{label:o.maputnik.maptiler_access_token.label,fieldSpec:o.maputnik.maptiler_access_token,"data-wd-key":"modal:settings.maputnik:openmaptiles_access_token",value:e["maputnik:openmaptiles_access_token"],onChange:m=>(On().f[10]++,On().s[37]++,i("maputnik:openmaptiles_access_token",m))}),oe.jsx(vd,{label:o.maputnik.thunderforest_access_token.label,fieldSpec:o.maputnik.thunderforest_access_token,"data-wd-key":"modal:settings.maputnik:thunderforest_access_token",value:e["maputnik:thunderforest_access_token"],onChange:m=>(On().f[11]++,On().s[38]++,i("maputnik:thunderforest_access_token",m))}),oe.jsx(vd,{label:o.maputnik.stadia_access_token.label,fieldSpec:o.maputnik.stadia_access_token,"data-wd-key":"modal:settings.maputnik:stadia_access_token",value:e["maputnik:stadia_access_token"],onChange:m=>(On().f[12]++,On().s[39]++,i("maputnik:stadia_access_token",m))}),oe.jsx(vd,{label:o.maputnik.locationiq_access_token.label,fieldSpec:o.maputnik.locationiq_access_token,"data-wd-key":"modal:settings.maputnik:locationiq_access_token",value:e["maputnik:locationiq_access_token"],onChange:m=>(On().f[13]++,On().s[40]++,i("maputnik:locationiq_access_token",m))}),oe.jsx(b6,{label:t("Center"),fieldSpec:Wr.$root.center,length:2,type:"number",value:(On().b[10][0]++,r.center||(On().b[10][1]++,[])),default:[0,0],onChange:m=>(On().f[14]++,On().s[41]++,this.changeStyleProperty("center",m))}),oe.jsx(xm,{label:t("Zoom"),fieldSpec:Wr.$root.zoom,value:r.zoom,default:0,onChange:m=>(On().f[15]++,On().s[42]++,this.changeStyleProperty("zoom",m))}),oe.jsx(xm,{label:t("Bearing"),fieldSpec:Wr.$root.bearing,value:r.bearing,default:Wr.$root.bearing.default,onChange:m=>(On().f[16]++,On().s[43]++,this.changeStyleProperty("bearing",m))}),oe.jsx(xm,{label:t("Pitch"),fieldSpec:Wr.$root.pitch,value:r.pitch,default:Wr.$root.pitch.default,onChange:m=>(On().f[17]++,On().s[44]++,this.changeStyleProperty("pitch",m))}),oe.jsx(WRe,{label:t("Light anchor"),fieldSpec:Wr.light.anchor,name:"light-anchor",value:s.anchor,options:Object.keys(Wr.light.anchor.values),default:Wr.light.anchor.default,onChange:m=>(On().f[18]++,On().s[45]++,this.changeLightProperty("anchor",m))}),oe.jsx(QRe,{label:t("Light color"),fieldSpec:Wr.light.color,value:s.color,default:Wr.light.color.default,onChange:m=>(On().f[19]++,On().s[46]++,this.changeLightProperty("color",m))}),oe.jsx(xm,{label:t("Light intensity"),fieldSpec:Wr.light.intensity,value:s.intensity,default:Wr.light.intensity.default,onChange:m=>(On().f[20]++,On().s[47]++,this.changeLightProperty("intensity",m))}),oe.jsx(b6,{label:t("Light position"),fieldSpec:Wr.light.position,type:"number",length:Wr.light.position.length,value:s.position,default:Wr.light.position.default,onChange:m=>(On().f[21]++,On().s[48]++,this.changeLightProperty("position",m))}),oe.jsx(vd,{label:t("Terrain source"),fieldSpec:Wr.terrain.source,"data-wd-key":"modal:settings.maputnik:terrain_source",value:c.source,onChange:m=>(On().f[22]++,On().s[49]++,this.changeTerrainProperty("source",m))}),oe.jsx(xm,{label:t("Terrain exaggeration"),fieldSpec:Wr.terrain.exaggeration,value:c.exaggeration,default:Wr.terrain.exaggeration.default,onChange:m=>(On().f[23]++,On().s[50]++,this.changeTerrainProperty("exaggeration",m))}),oe.jsx(xm,{label:t("Transition delay"),fieldSpec:Wr.transition.delay,value:a.delay,default:Wr.transition.delay.default,onChange:m=>(On().f[24]++,On().s[51]++,this.changeTransitionProperty("delay",m))}),oe.jsx(xm,{label:t("Transition duration"),fieldSpec:Wr.transition.duration,value:a.duration,default:Wr.transition.duration.default,onChange:m=>(On().f[25]++,On().s[52]++,this.changeTransitionProperty("duration",m))}),oe.jsx(G5,{label:t("Projection"),"data-wd-key":"modal:settings.projection",options:[["","Undefined"],["mercator","Mercator"],["globe","Globe"],["vertical-perspective","Vertical Perspective"]],value:(On().b[11][0]++,d?.type?.toString()||(On().b[11][1]++,"")),onChange:m=>(On().f[26]++,On().s[53]++,this.changeProjectionType(m))}),oe.jsx(G5,{label:o.maputnik.style_renderer.label,fieldSpec:o.maputnik.style_renderer,"data-wd-key":"modal:settings.maputnik:renderer",options:[["mlgljs","MapLibreGL JS"],["ol",t("Open Layers (experimental)")]],value:(On().b[12][0]++,e["maputnik:renderer"]||(On().b[12][1]++,"mlgljs")),onChange:m=>(On().f[27]++,On().s[54]++,i("maputnik:renderer",m))})]})})}}const YRe=(On().s[55]++,Do()(qRe));var jS={exports:{}},VRe=jS.exports,IH;function $Re(){return IH||(IH=1,(function(n,e){(function(t,i,r){n.exports=r(),n.exports.default=r()})("slugify",VRe,function(){var t=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","":"cent","":"pound","":"currency","":"yen","":"(c)","":"a","":"(r)","":"o","":"A","":"A","":"A","":"A","":"A","":"A","":"AE","":"C","":"E","":"E","":"E","":"E","":"I","":"I","":"I","":"I","":"D","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"U","":"U","":"U","":"U","":"Y","":"TH","":"ss","":"a","":"a","":"a","":"a","":"a","":"a","":"ae","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"d","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"u","":"u","":"u","":"u","":"y","":"th","":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"D","":"d","":"DJ","":"dj","":"E","":"e","":"E","":"e","":"e","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"I","":"i","":"i","":"i","":"I","":"i","":"I","":"i","":"k","":"k","":"L","":"l","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"O","":"o","":"OE","":"oe","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"U","":"u","":"u","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"z","":"Z","":"z","":"Z","":"z","":"E","":"f","":"O","":"o","":"U","":"u","":"LJ","":"lj","":"NJ","":"nj","":"S","":"s","":"T","":"t","":"e","":"o","":"A","":"E","":"H","":"I","":"O","":"Y","":"W","":"i","":"A","":"B","":"G","":"D","":"E","":"Z","":"H","":"8","":"I","":"K","":"L","":"M","":"N","":"3","":"O","":"P","":"R","":"S","":"T","":"Y","":"F","":"X","":"PS","":"W","":"I","":"Y","":"a","":"e","":"h","":"i","":"y","":"a","":"b","":"g","":"d","":"e","":"z","":"h","":"8","":"i","":"k","":"l","":"m","":"n","":"3","":"o","":"p","":"r","":"s","":"s","":"t","":"y","":"f","":"x","":"ps","":"w","":"i","":"y","":"o","":"y","":"w","":"Yo","":"DJ","":"Ye","":"I","":"Yi","":"J","":"LJ","":"NJ","":"C","":"DZ","":"A","":"B","":"V","":"G","":"D","":"E","":"Zh","":"Z","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"S","":"T","":"U","":"F","":"H","":"C","":"Ch","":"Sh","":"Sh","":"U","":"Y","":"","":"E","":"Yu","":"Ya","":"a","":"b","":"v","":"g","":"d","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":"u","":"y","":"","":"e","":"yu","":"ya","":"yo","":"dj","":"ye","":"i","":"yi","":"j","":"lj","":"nj","":"c","":"u","":"dz","":"G","":"g","":"GH","":"gh","":"KH","":"kh","":"NG","":"ng","":"UE","":"ue","":"U","":"u","":"H","":"h","":"AE","":"ae","":"OE","":"oe","":"A","":"B","":"G","":"D","":"E","":"Z","":"E'","":"Y'","":"T'","":"JH","":"I","":"L","":"X","":"C'","":"K","":"H","":"D'","":"GH","":"TW","":"M","":"Y","":"N","":"SH","":"CH","":"P","":"J","":"R'","":"S","":"V","":"T","":"R","":"C","":"P'","":"Q'","":"O''","":"F","":"EV","":"a","":"aa","":"a","":"u","":"i","":"e","":"a","":"b","":"h","":"t","":"th","":"j","":"h","":"kh","":"d","":"th","":"r","":"z","":"s","":"sh","":"s","":"dh","":"t","":"z","":"a","":"gh","":"f","":"q","":"k","":"l","":"m","":"n","":"h","":"w","":"a","":"y","":"an","":"on","":"en","":"a","":"u","":"e","":"","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"p","":"ch","":"zh","":"k","":"g","":"y","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"baht","":"a","":"b","":"g","":"d","":"e","":"v","":"z","":"t","":"i","":"k","":"l","":"m","":"n","":"o","":"p","":"zh","":"r","":"s","":"t","":"u","":"f","":"k","":"gh","":"q","":"sh","":"ch","":"ts","":"dz","":"ts","":"ch","":"kh","":"j","":"h","":"S","":"s","":"W","":"w","":"W","":"w","":"W","":"w","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"-","":"'","":"'","":"\\"","":"\\"","":"\\"","":"+","":"*","":"...","":"ecu","":"cruzeiro","":"french franc","":"lira","":"mill","":"naira","":"peseta","":"rupee","":"won","":"new shequel","":"dong","":"euro","":"kip","":"tugrik","":"drachma","":"penny","":"peso","":"guarani","":"austral","":"hryvnia","":"cedi","":"kazakhstani tenge","":"indian rupee","":"turkish lira","":"russian ruble","":"bitcoin","":"sm","":"tm","":"d","":"delta","":"sum","":"infinity","":"love","":"yuan","":"yen","":"rial","":"laa","":"laa","":"lai","":"la"}`),i=JSON.parse('{"bg":{"":"Y","":"Ts","":"Sht","":"A","":"Y","":"y","":"ts","":"sht","":"a","":"y"},"de":{"":"AE","":"ae","":"OE","":"oe","":"UE","":"ue","":"ss","%":"prozent","&":"und","|":"oder","":"summe","":"unendlich","":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","":"centavos","":"libras","":"moneda","":"francos","":"suma","":"infinito","":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","":"centime","":"livre","":"devise","":"franc","":"somme","":"infini","":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","":"centavo","":"soma","":"libra","":"infinito","":"amor"},"uk":{"":"Y","":"y","":"Y","":"y","":"Ts","":"ts","":"Kh","":"kh","":"Shch","":"shch","":"H","":"h"},"vi":{"":"D","":"d"},"da":{"":"OE","":"oe","":"AA","":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"strre end"},"nb":{"&":"og","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"}}');function r(o,s){if(typeof o!="string")throw new Error("slugify: string argument expected");s=typeof s=="string"?{replacement:s}:s||{};var a=i[s.locale]||{},c=s.replacement===void 0?"-":s.replacement,d=s.trim===void 0?!0:s.trim,m=o.normalize().split("").reduce(function(v,M){var B=a[M];return B===void 0&&(B=t[M]),B===void 0&&(B=M),B===c&&(B=" "),v+B.replace(s.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return s.strict&&(m=m.replace(/[^A-Za-z0-9\s]/g,"")),d&&(m=m.trim()),m=m.replace(/\s+/g,c),s.lower&&(m=m.toLowerCase()),m}return r.extend=function(o){Object.assign(t,o)},r})})(jS)),jS.exports}var HRe=$Re();const ZRe=vu(HRe);var NS={exports:{}},XRe=NS.exports,TH;function JRe(){return TH||(TH=1,(function(n,e){(function(t,i){i()})(XRe,function(){function t(d,m){return typeof m>"u"?m={autoBom:!1}:typeof m!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function i(d,m,v){var M=new XMLHttpRequest;M.open("GET",d),M.responseType="blob",M.onload=function(){c(M.response,m,v)},M.onerror=function(){console.error("could not download file")},M.send()}function r(d){var m=new XMLHttpRequest;m.open("HEAD",d,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function o(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(m)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof window=="object"&&window.global===window?window:void 0,a=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(d,m,v){var M=s.URL||s.webkitURL,B=document.createElement("a");m=m||d.name||"download",B.download=m,B.rel="noopener",typeof d=="string"?(B.href=d,B.origin===location.origin?o(B):r(B.href)?i(d,m,v):o(B,B.target="_blank")):(B.href=M.createObjectURL(d),setTimeout(function(){M.revokeObjectURL(B.href)},4e4),setTimeout(function(){o(B)},0))}:"msSaveOrOpenBlob"in navigator?function(d,m,v){if(m=m||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(t(d,v),m);else if(r(d))i(d,m,v);else{var M=document.createElement("a");M.href=d,M.target="_blank",setTimeout(function(){o(M)})}}:function(d,m,v,M){if(M=M||open("","_blank"),M&&(M.document.title=M.document.body.innerText="downloading..."),typeof d=="string")return i(d,m,v);var B=d.type==="application/octet-stream",P=/constructor/i.test(s.HTMLElement)||s.safari,U=/CriOS\/[\d]+/.test(navigator.userAgent);if((U||B&&P||a)&&typeof FileReader<"u"){var z=new FileReader;z.onloadend=function(){var X=z.result;X=U?X:X.replace(/^data:[^;]*;/,"data:attachment/file;"),M?M.location.href=X:location=X,M=null},z.readAsDataURL(d)}else{var V=s.URL||s.webkitURL,Z=V.createObjectURL(d);M?M.location=Z:location.href=Z,M=null,setTimeout(function(){V.revokeObjectURL(Z)},4e4)}});s.saveAs=c.saveAs=c,n.exports=c})})(NS)),NS.exports}var kH=JRe();const ePe="5.14.0";function Ai(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx",e="0479ae849bf143a83f826f9fdcad7b323ec1b109",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx",statementMap:{0:{start:{line:14,column:28},end:{line:14,column:35}},1:{start:{line:15,column:36},end:{line:15,column:83}},2:{start:{line:18,column:4},end:{line:22,column:6}},3:{start:{line:25,column:4},end:{line:33,column:5}},4:{start:{line:26,column:6},end:{line:30,column:9}},5:{start:{line:32,column:6},end:{line:32,column:36}},6:{start:{line:36,column:23},end:{line:36,column:44}},7:{start:{line:37,column:22},end:{line:37,column:69}},8:{start:{line:38,column:17},end:{line:62,column:1}},9:{start:{line:63,column:17},end:{line:63,column:70}},10:{start:{line:64,column:23},end:{line:64,column:40}},11:{start:{line:65,column:4},end:{line:65,column:39}},12:{start:{line:68,column:23},end:{line:68,column:44}},13:{start:{line:69,column:4},end:{line:74,column:5}},14:{start:{line:70,column:19},end:{line:70,column:85}},15:{start:{line:71,column:25},end:{line:71,column:42}},16:{start:{line:72,column:6},end:{line:72,column:41}},17:{start:{line:73,column:6},end:{line:73,column:13}},18:{start:{line:75,column:21},end:{line:75,column:42}},19:{start:{line:76,column:4},end:{line:80,column:5}},20:{start:{line:77,column:6},end:{line:77,column:49}},21:{start:{line:78,column:6},end:{line:78,column:45}},22:{start:{line:79,column:6},end:{line:79,column:37}},23:{start:{line:79,column:30},end:{line:79,column:37}},24:{start:{line:81,column:21},end:{line:81,column:54}},25:{start:{line:82,column:4},end:{line:82,column:37}},26:{start:{line:83,column:4},end:{line:83,column:27}},27:{start:{line:84,column:4},end:{line:84,column:30}},28:{start:{line:87,column:23},end:{line:87,column:44}},29:{start:{line:88,column:23},end:{line:88,column:52}},30:{start:{line:89,column:4},end:{line:89,column:43}},31:{start:{line:90,column:4},end:{line:90,column:35}},32:{start:{line:90,column:28},end:{line:90,column:35}},33:{start:{line:91,column:21},end:{line:91,column:54}},34:{start:{line:92,column:4},end:{line:92,column:37}},35:{start:{line:93,column:4},end:{line:93,column:27}},36:{start:{line:94,column:4},end:{line:94,column:30}},37:{start:{line:97,column:23},end:{line:105,column:5}},38:{start:{line:106,column:23},end:{line:106,column:66}},39:{start:{line:107,column:4},end:{line:107,column:43}},40:{start:{line:108,column:4},end:{line:108,column:22}},41:{start:{line:111,column:25},end:{line:117,column:5}},42:{start:{line:118,column:4},end:{line:118,column:44}},43:{start:{line:121,column:14},end:{line:121,column:26}},44:{start:{line:122,column:16},end:{line:122,column:38}},45:{start:{line:123,column:4},end:{line:188,column:6}},46:{start:{line:191,column:20},end:{line:191,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:19},end:{line:23,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:34,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:15},end:{line:66,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:20},end:{line:85,column:3}},line:67},4:{name:"(anonymous_4)",decl:{start:{line:86,column:2},end:{line:86,column:3}},loc:{start:{line:86,column:22},end:{line:95,column:3}},line:86},5:{name:"(anonymous_5)",decl:{start:{line:96,column:2},end:{line:96,column:3}},loc:{start:{line:96,column:27},end:{line:109,column:3}},line:96},6:{name:"(anonymous_6)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:42},end:{line:119,column:3}},line:110},7:{name:"(anonymous_7)",decl:{start:{line:120,column:2},end:{line:120,column:3}},loc:{start:{line:120,column:11},end:{line:189,column:3}},line:120}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:25},1:{loc:{start:{line:37,column:22},end:{line:37,column:69}},type:"binary-expr",locations:[{start:{line:37,column:22},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:69}}],line:37},2:{loc:{start:{line:69,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:74,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:76,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76},4:{loc:{start:{line:79,column:6},end:{line:79,column:37}},type:"if",locations:[{start:{line:79,column:6},end:{line:79,column:37}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},5:{loc:{start:{line:90,column:4},end:{line:90,column:35}},type:"if",locations:[{start:{line:90,column:4},end:{line:90,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90},6:{loc:{start:{line:140,column:24},end:{line:140,column:58}},type:"binary-expr",locations:[{start:{line:140,column:24},end:{line:140,column:52}},{start:{line:140,column:56},end:{line:140,column:58}}],line:140},7:{loc:{start:{line:149,column:24},end:{line:149,column:58}},type:"binary-expr",locations:[{start:{line:149,column:24},end:{line:149,column:52}},{start:{line:149,column:56},end:{line:149,column:58}}],line:149},8:{loc:{start:{line:158,column:24},end:{line:158,column:58}},type:"binary-expr",locations:[{start:{line:158,column:24},end:{line:158,column:52}},{start:{line:158,column:56},end:{line:158,column:58}}],line:158},9:{loc:{start:{line:167,column:24},end:{line:167,column:58}},type:"binary-expr",locations:[{start:{line:167,column:24},end:{line:167,column:52}},{start:{line:167,column:56},end:{line:167,column:58}}],line:167},10:{loc:{start:{line:177,column:12},end:{line:180,column:16}},type:"binary-expr",locations:[{start:{line:177,column:12},end:{line:177,column:39}},{start:{line:177,column:59},end:{line:180,column:16}}],line:177}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx"],names:[],mappings:"AAoKQ,cAKA,YALA;AApKR,OAAO,WAAW;AAClB,OAAO,aAAa;AACpB,SAAQ,cAAa;AACrB,SAAQ,eAAc;AACtB,SAAQ,cAAa;AACrB,SAAQ,OAAO,cAAa;AAC5B,SAA8B,uBAAsB;AAEpD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAIhC,MAAM,sBAAsB;AAC5B,MAAM,8BAA8B,OAAO,OAAO,uBAAuB;AAazE,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAE1E,iBAAiB;AACf,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,QAAI,KAAK,MAAM,SAAS,MAAM;AAC5B,aAAO,QAAQ,KAAK,MAAM,SAAS,MAAM;AAAA,QACvC,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,OAAO;AAAA,MACT,CAAC;AAAA,IACH,OAAO;AACL,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,aAAa;AACX,UAAM,aAAa,KAAK,eAAe;AACvC,UAAM,YAAY,KAAK,MAAM,SAAS,QAAQ,KAAK,MAAM,EAAE,KAAK;AAChE,UAAM,OAAO;AAAA;AAAA;AAAA;AAAA,WAIN,SAAS;AAAA;AAAA,+CAE2B,mBAAmB;AAAA,8CACpB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAW/C,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQxB,UAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,EAAC,MAAM,0BAAyB,CAAC;AAC/D,UAAM,aAAa,KAAK,WAAW;AACnC,WAAO,MAAM,aAAa,OAAO;AAAA,EACnC;AAAA,EAEA,MAAM,YAAY;AAChB,UAAM,aAAa,KAAK,eAAe;AAIvC,QAAI,CAAC,6BAA6B;AAChC,YAAM,OAAO,IAAI,KAAK,CAAC,UAAU,GAAG,EAAC,MAAM,iCAAgC,CAAC;AAC5E,YAAM,aAAa,KAAK,WAAW;AACnC,aAAO,MAAM,aAAa,OAAO;AACjC;AAAA,IACF;AAEA,QAAI,aAAa,KAAK,MAAM;AAC5B,QAAI,cAAc,MAAM;AACtB,mBAAa,MAAM,KAAK,iBAAiB;AACzC,WAAK,MAAM,gBAAgB,UAAU;AACrC,UAAI,cAAc,KAAM;AAAA,IAC1B;AAEA,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,cAAc;AAClB,UAAM,aAAa,KAAK,eAAe;AAEvC,UAAM,aAAa,MAAM,KAAK,iBAAiB;AAC/C,SAAK,MAAM,gBAAgB,UAAU;AACrC,QAAI,cAAc,KAAM;AAExB,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,mBAAyD;AAC7D,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAC,oBAAoB,CAAC,OAAO,EAAC;AAAA,QACxC;AAAA,MACF;AAAA,MACA,eAAe,KAAK,WAAW;AAAA,IACjC;AAEA,UAAM,aAAa,MAAM,OAAO,mBAAmB,UAAU;AAC7D,SAAK,MAAM,gBAAgB,UAAU;AACrC,WAAO;AAAA,EACT;AAAA,EAEA,uBAAuB,UAAkB,OAAY;AACnD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,MAAM,oBAAoB,CAAC;AACjC,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,YAAY;AAAA,QACrB,WAAU;AAAA,QAGV,+BAAC,aAAQ,WAAU,0BACjB;AAAA,8BAAC,QAAI,YAAE,YAAY,GAAE;AAAA,UACrB,oBAAC,OACE,YAAE,uCAAuC,GAC5C;AAAA,UAEA,qBAAC,SACC;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,gBAC1C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,oCAAoC;AAAA,gBACvF,UAAU,KAAK,uBAAuB,KAAK,MAAM,oCAAoC;AAAA;AAAA,YACvF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,gBAC/C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,qCAAqC;AAAA,gBACxF,UAAU,KAAK,uBAAuB,KAAK,MAAM,qCAAqC;AAAA;AAAA,YACxF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,gBACxC,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,8BAA8B;AAAA,gBACjF,UAAU,KAAK,uBAAuB,KAAK,MAAM,8BAA8B;AAAA;AAAA,YACjF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,gBAC5C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,kCAAkC;AAAA,gBACrF,UAAU,KAAK,uBAAuB,KAAK,MAAM,kCAAkC;AAAA;AAAA,YACrF;AAAA,aACF;AAAA,UAEA,qBAAC,SAAI,WAAU,iCACb;AAAA,iCAAC,eAAY,SAAS,KAAK,UAAU,KAAK,IAAI,GAC5C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,MAAM;AAAA,eACX;AAAA,YACC,+BACC,qBAAC,eAAY,SAAS,KAAK,YAAY,KAAK,IAAI,GAC9C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,SAAS;AAAA,eACd;AAAA,YAGF,qBAAC,eAAY,SAAS,KAAK,WAAW,KAAK,IAAI,GAC7C;AAAA,kCAAC,SAAK;AAAA,cACL,EAAE,aAAa;AAAA,eAClB;AAAA,aACF;AAAA,WACF;AAAA;AAAA,IAEF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0479ae849bf143a83f826f9fdcad7b323ec1b109"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ai=function(){return s},s}Ai();const DH=(Ai().s[0]++,ePe),RH=(Ai().s[1]++,typeof window.showSaveFilePicker=="function");class tPe extends In.Component{tokenizedStyle(){return Ai().f[0]++,Ai().s[2]++,jhe(Id.stripAccessTokens(Id.replaceAccessTokens(this.props.mapStyle)))}exportName(){return Ai().f[1]++,Ai().s[3]++,this.props.mapStyle.name?(Ai().b[0][0]++,Ai().s[4]++,ZRe(this.props.mapStyle.name,{replacement:"_",remove:/[*\-+~.()'"!:]/g,lower:!0})):(Ai().b[0][1]++,Ai().s[5]++,this.props.mapStyle.id)}createHtml(){Ai().f[2]++;const e=(Ai().s[6]++,this.tokenizedStyle()),t=(Ai().s[7]++,Ai().b[1][0]++,this.props.mapStyle.name||(Ai().b[1][1]++,this.props.t("Map"))),i=(Ai().s[8]++,`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${t}</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://unpkg.com/maplibre-gl@${DH}/dist/maplibre-gl.js"><\/script>
  <link href="https://unpkg.com/maplibre-gl@${DH}/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
      const map = new maplibregl.Map({
         container: 'map',
         style: ${e},
      });
      map.addControl(new maplibregl.NavigationControl());
  <\/script>
</body>
</html>
`),r=(Ai().s[9]++,new Blob([i],{type:"text/html;charset=utf-8"})),o=(Ai().s[10]++,this.exportName());Ai().s[11]++,kH.saveAs(r,o+".html")}async saveStyle(){Ai().f[3]++;const e=(Ai().s[12]++,this.tokenizedStyle());if(Ai().s[13]++,RH)Ai().b[2][1]++;else{Ai().b[2][0]++;const r=(Ai().s[14]++,new Blob([e],{type:"application/json;charset=utf-8"})),o=(Ai().s[15]++,this.exportName());Ai().s[16]++,kH.saveAs(r,o+".json"),Ai().s[17]++;return}let t=(Ai().s[18]++,this.props.fileHandle);if(Ai().s[19]++,t==null)if(Ai().b[3][0]++,Ai().s[20]++,t=await this.createFileHandle(),Ai().s[21]++,this.props.onSetFileHandle(t),Ai().s[22]++,t==null){Ai().b[4][0]++,Ai().s[23]++;return}else Ai().b[4][1]++;else Ai().b[3][1]++;const i=(Ai().s[24]++,await t.createWritable());Ai().s[25]++,await i.write(e),Ai().s[26]++,await i.close(),Ai().s[27]++,this.props.onOpenToggle()}async saveStyleAs(){Ai().f[4]++;const e=(Ai().s[28]++,this.tokenizedStyle()),t=(Ai().s[29]++,await this.createFileHandle());if(Ai().s[30]++,this.props.onSetFileHandle(t),Ai().s[31]++,t==null){Ai().b[5][0]++,Ai().s[32]++;return}else Ai().b[5][1]++;const i=(Ai().s[33]++,await t.createWritable());Ai().s[34]++,await i.write(e),Ai().s[35]++,await i.close(),Ai().s[36]++,this.props.onOpenToggle()}async createFileHandle(){Ai().f[5]++;const e=(Ai().s[37]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],suggestedName:this.exportName()}),t=(Ai().s[38]++,await window.showSaveFilePicker(e));return Ai().s[39]++,this.props.onSetFileHandle(t),Ai().s[40]++,t}changeMetadataProperty(e,t){Ai().f[6]++;const i=(Ai().s[41]++,{...this.props.mapStyle,metadata:{...this.props.mapStyle.metadata,[e]:t}});Ai().s[42]++,this.props.onStyleChanged(i)}render(){Ai().f[7]++;const e=(Ai().s[43]++,this.props.t),t=(Ai().s[44]++,Yse(e));return Ai().s[45]++,oe.jsx(V1,{"data-wd-key":"modal:export",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Save Style"),className:"maputnik-export-modal",children:oe.jsxs("section",{className:"maputnik-modal-section",children:[oe.jsx("h1",{children:e("Save Style")}),oe.jsx("p",{children:e("Save the JSON style to your computer.")}),oe.jsxs("div",{children:[oe.jsx(vd,{label:t.maputnik.maptiler_access_token.label,fieldSpec:t.maputnik.maptiler_access_token,value:(Ai().b[6][0]++,this.props.mapStyle.metadata||(Ai().b[6][1]++,{}))["maputnik:openmaptiles_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:openmaptiles_access_token")}),oe.jsx(vd,{label:t.maputnik.thunderforest_access_token.label,fieldSpec:t.maputnik.thunderforest_access_token,value:(Ai().b[7][0]++,this.props.mapStyle.metadata||(Ai().b[7][1]++,{}))["maputnik:thunderforest_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:thunderforest_access_token")}),oe.jsx(vd,{label:t.maputnik.stadia_access_token.label,fieldSpec:t.maputnik.stadia_access_token,value:(Ai().b[8][0]++,this.props.mapStyle.metadata||(Ai().b[8][1]++,{}))["maputnik:stadia_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:stadia_access_token")}),oe.jsx(vd,{label:t.maputnik.locationiq_access_token.label,fieldSpec:t.maputnik.locationiq_access_token,value:(Ai().b[9][0]++,this.props.mapStyle.metadata||(Ai().b[9][1]++,{}))["maputnik:locationiq_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:locationiq_access_token")})]}),oe.jsxs("div",{className:"maputnik-modal-export-buttons",children:[oe.jsxs(Ks,{onClick:this.saveStyle.bind(this),children:[oe.jsx(nD,{}),e("Save")]}),(Ai().b[10][0]++,RH&&(Ai().b[10][1]++,oe.jsxs(Ks,{onClick:this.saveStyleAs.bind(this),children:[oe.jsx(nD,{}),e("Save as")]}))),oe.jsxs(Ks,{onClick:this.createHtml.bind(this),children:[oe.jsx(Tfe,{}),e("Create HTML")]})]})]})})}}const nPe=(Ai().s[46]++,Do()(tPe));function Y5(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",e="d4204cb1114c57682afd09034f9cc8268e27db52",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",statementMap:{0:{start:{line:4,column:26},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:127}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:26},end:{line:4,column:27}},loc:{start:{line:4,column:37},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx"],names:[],mappings:"AAUM;AAVN,OAAO,uBAAsD;AAC7D,OAAO,cAAc;AAMrB,MAAM,oBAAsD,CAAC,UAAU;AACrE,SACE,oBAAC,YAAS,OAAO,MAAM,OACrB,8BAAC,qBAAmB,GAAG,OAAO,GAChC;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d4204cb1114c57682afd09034f9cc8268e27db52"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Y5=function(){return s},s}Y5();Y5().s[0]++;const Vse=n=>(Y5().f[0]++,Y5().s[1]++,oe.jsx(uv,{label:n.label,children:oe.jsx(zS,{...n})}));function V5(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",e="10be4a5b6db1d1fa2555f9b6247244050c0b65b8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:120}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx"],names:[],mappings:"AAYM;AAZN,OAAO,WAAW;AAClB,OAAO,mBAA8C;AAQrD,MAAM,gBAA8C,CAAC,UAAU;AAC7D,SACE,oBAAC,SAAM,OAAO,MAAM,OAClB,8BAAC,iBAAe,GAAG,OAAO,GAC5B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"10be4a5b6db1d1fa2555f9b6247244050c0b65b8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return V5=function(){return s},s}V5();V5().s[0]++;const iPe=n=>(V5().f[0]++,V5().s[1]++,oe.jsx(cs,{label:n.label,children:oe.jsx(Lse,{...n})}));function xn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx",e="18323b845fc84e69550b153f838c0967a64d83cc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx",statementMap:{0:{start:{line:15,column:14},end:{line:15,column:26}},1:{start:{line:16,column:4},end:{line:30,column:9}},2:{start:{line:23,column:29},end:{line:26,column:12}},3:{start:{line:35,column:4},end:{line:38,column:7}},4:{start:{line:41,column:18},end:{line:41,column:47}},5:{start:{line:42,column:4},end:{line:51,column:6}},6:{start:{line:54,column:14},end:{line:54,column:26}},7:{start:{line:55,column:4},end:{line:99,column:9}},8:{start:{line:66,column:32},end:{line:69,column:12}},9:{start:{line:80,column:33},end:{line:83,column:12}},10:{start:{line:92,column:33},end:{line:95,column:12}},11:{start:{line:102,column:27},end:{line:107,column:1}},12:{start:{line:102,column:34},end:{line:107,column:1}},13:{start:{line:110,column:14},end:{line:110,column:26}},14:{start:{line:111,column:24},end:{line:118,column:5}},15:{start:{line:112,column:26},end:{line:112,column:64}},16:{start:{line:113,column:6},end:{line:113,column:29}},17:{start:{line:114,column:6},end:{line:117,column:9}},18:{start:{line:119,column:4},end:{line:146,column:9}},19:{start:{line:126,column:29},end:{line:129,column:12}},20:{start:{line:133,column:8},end:{line:144,column:10}},21:{start:{line:141,column:31},end:{line:141,column:52}},22:{start:{line:151,column:14},end:{line:151,column:26}},23:{start:{line:152,column:24},end:{line:159,column:5}},24:{start:{line:153,column:26},end:{line:153,column:64}},25:{start:{line:154,column:6},end:{line:154,column:29}},26:{start:{line:155,column:6},end:{line:158,column:9}},27:{start:{line:160,column:23},end:{line:165,column:5}},28:{start:{line:161,column:6},end:{line:164,column:9}},29:{start:{line:166,column:4},end:{line:192,column:9}},30:{start:{line:179,column:8},end:{line:190,column:10}},31:{start:{line:187,column:31},end:{line:187,column:52}},32:{start:{line:197,column:14},end:{line:197,column:26}},33:{start:{line:198,column:4},end:{line:209,column:6}},34:{start:{line:204,column:28},end:{line:207,column:10}},35:{start:{line:214,column:14},end:{line:214,column:26}},36:{start:{line:215,column:4},end:{line:242,column:9}},37:{start:{line:222,column:12},end:{line:225,column:15}},38:{start:{line:235,column:12},end:{line:238,column:15}},39:{start:{line:247,column:14},end:{line:247,column:26}},40:{start:{line:248,column:4},end:{line:263,column:9}},41:{start:{line:256,column:29},end:{line:259,column:12}},42:{start:{line:268,column:14},end:{line:268,column:26}},43:{start:{line:269,column:24},end:{line:275,column:5}},44:{start:{line:276,column:4},end:{line:340,column:5}},45:{start:{line:278,column:8},end:{line:278,column:79}},46:{start:{line:280,column:8},end:{line:280,column:85}},47:{start:{line:282,column:8},end:{line:282,column:77}},48:{start:{line:284,column:8},end:{line:284,column:76}},49:{start:{line:286,column:8},end:{line:286,column:77}},50:{start:{line:288,column:8},end:{line:300,column:13}},51:{start:{line:293,column:36},end:{line:296,column:14}},52:{start:{line:302,column:8},end:{line:302,column:77}},53:{start:{line:304,column:8},end:{line:331,column:13}},54:{start:{line:310,column:38},end:{line:313,column:16}},55:{start:{line:324,column:38},end:{line:327,column:16}},56:{start:{line:333,column:8},end:{line:333,column:76}},57:{start:{line:335,column:8},end:{line:335,column:74}},58:{start:{line:337,column:8},end:{line:337,column:74}},59:{start:{line:339,column:8},end:{line:339,column:20}},60:{start:{line:343,column:31},end:{line:343,column:80}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:31,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:23,column:20},end:{line:23,column:21}},loc:{start:{line:23,column:29},end:{line:26,column:12}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:24},end:{line:39,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:19},end:{line:52,column:3}},line:40},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:100,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:66,column:20},end:{line:66,column:21}},loc:{start:{line:66,column:32},end:{line:69,column:12}},line:66},6:{name:"(anonymous_6)",decl:{start:{line:80,column:20},end:{line:80,column:21}},loc:{start:{line:80,column:33},end:{line:83,column:12}},line:80},7:{name:"(anonymous_7)",decl:{start:{line:92,column:20},end:{line:92,column:21}},loc:{start:{line:92,column:33},end:{line:95,column:12}},line:92},8:{name:"(anonymous_8)",decl:{start:{line:102,column:27},end:{line:102,column:28}},loc:{start:{line:102,column:34},end:{line:107,column:1}},line:102},9:{name:"(anonymous_9)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:11},end:{line:147,column:3}},line:109},10:{name:"(anonymous_10)",decl:{start:{line:111,column:24},end:{line:111,column:25}},loc:{start:{line:111,column:38},end:{line:118,column:5}},line:111},11:{name:"(anonymous_11)",decl:{start:{line:126,column:20},end:{line:126,column:21}},loc:{start:{line:126,column:29},end:{line:129,column:12}},line:126},12:{name:"(anonymous_12)",decl:{start:{line:132,column:32},end:{line:132,column:33}},loc:{start:{line:132,column:57},end:{line:145,column:7}},line:132},13:{name:"(anonymous_13)",decl:{start:{line:141,column:22},end:{line:141,column:23}},loc:{start:{line:141,column:31},end:{line:141,column:52}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:193,column:3}},line:150},15:{name:"(anonymous_15)",decl:{start:{line:152,column:24},end:{line:152,column:25}},loc:{start:{line:152,column:38},end:{line:159,column:5}},line:152},16:{name:"(anonymous_16)",decl:{start:{line:160,column:23},end:{line:160,column:24}},loc:{start:{line:160,column:33},end:{line:165,column:5}},line:160},17:{name:"(anonymous_17)",decl:{start:{line:178,column:32},end:{line:178,column:33}},loc:{start:{line:178,column:57},end:{line:191,column:7}},line:178},18:{name:"(anonymous_18)",decl:{start:{line:187,column:22},end:{line:187,column:23}},loc:{start:{line:187,column:31},end:{line:187,column:52}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:196,column:2},end:{line:196,column:3}},loc:{start:{line:196,column:11},end:{line:210,column:3}},line:196},20:{name:"(anonymous_20)",decl:{start:{line:204,column:18},end:{line:204,column:19}},loc:{start:{line:204,column:28},end:{line:207,column:10}},line:204},21:{name:"(anonymous_21)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:11},end:{line:243,column:3}},line:213},22:{name:"(anonymous_22)",decl:{start:{line:221,column:20},end:{line:221,column:21}},loc:{start:{line:221,column:30},end:{line:226,column:11}},line:221},23:{name:"(anonymous_23)",decl:{start:{line:234,column:20},end:{line:234,column:21}},loc:{start:{line:234,column:33},end:{line:239,column:11}},line:234},24:{name:"(anonymous_24)",decl:{start:{line:246,column:2},end:{line:246,column:3}},loc:{start:{line:246,column:11},end:{line:264,column:3}},line:246},25:{name:"(anonymous_25)",decl:{start:{line:256,column:20},end:{line:256,column:21}},loc:{start:{line:256,column:29},end:{line:259,column:12}},line:256},26:{name:"(anonymous_26)",decl:{start:{line:267,column:2},end:{line:267,column:3}},loc:{start:{line:267,column:11},end:{line:341,column:3}},line:267},27:{name:"(anonymous_27)",decl:{start:{line:293,column:22},end:{line:293,column:23}},loc:{start:{line:293,column:36},end:{line:296,column:14}},line:293},28:{name:"(anonymous_28)",decl:{start:{line:310,column:24},end:{line:310,column:25}},loc:{start:{line:310,column:38},end:{line:313,column:16}},line:310},29:{name:"(anonymous_29)",decl:{start:{line:324,column:24},end:{line:324,column:25}},loc:{start:{line:324,column:38},end:{line:327,column:16}},line:324}},branchMap:{0:{loc:{start:{line:41,column:18},end:{line:41,column:47}},type:"binary-expr",locations:[{start:{line:41,column:18},end:{line:41,column:41}},{start:{line:41,column:45},end:{line:41,column:47}}],line:41},1:{loc:{start:{line:79,column:17},end:{line:79,column:47}},type:"binary-expr",locations:[{start:{line:79,column:17},end:{line:79,column:42}},{start:{line:79,column:46},end:{line:79,column:47}}],line:79},2:{loc:{start:{line:91,column:17},end:{line:91,column:48}},type:"binary-expr",locations:[{start:{line:91,column:17},end:{line:91,column:42}},{start:{line:91,column:46},end:{line:91,column:48}}],line:91},3:{loc:{start:{line:258,column:17},end:{line:258,column:72}},type:"cond-expr",locations:[{start:{line:258,column:48},end:{line:258,column:51}},{start:{line:258,column:54},end:{line:258,column:72}}],line:258},4:{loc:{start:{line:276,column:4},end:{line:340,column:5}},type:"switch",locations:[{start:{line:277,column:6},end:{line:278,column:79}},{start:{line:279,column:6},end:{line:280,column:85}},{start:{line:281,column:6},end:{line:282,column:77}},{start:{line:283,column:6},end:{line:284,column:76}},{start:{line:285,column:6},end:{line:286,column:77}},{start:{line:287,column:6},end:{line:300,column:13}},{start:{line:301,column:6},end:{line:302,column:77}},{start:{line:303,column:6},end:{line:331,column:13}},{start:{line:332,column:6},end:{line:333,column:76}},{start:{line:334,column:6},end:{line:335,column:74}},{start:{line:336,column:6},end:{line:337,column:74}},{start:{line:338,column:6},end:{line:339,column:20}}],line:276},5:{loc:{start:{line:297,column:19},end:{line:297,column:86}},type:"binary-expr",locations:[{start:{line:297,column:19},end:{line:297,column:45}},{start:{line:297,column:49},end:{line:297,column:86}}],line:297},6:{loc:{start:{line:314,column:21},end:{line:314,column:92}},type:"binary-expr",locations:[{start:{line:314,column:21},end:{line:314,column:47}},{start:{line:314,column:51},end:{line:314,column:92}}],line:314},7:{loc:{start:{line:328,column:21},end:{line:328,column:92}},type:"binary-expr",locations:[{start:{line:328,column:21},end:{line:328,column:47}},{start:{line:328,column:51},end:{line:328,column:92}}],line:328}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx"],names:[],mappings:"AA6BW,SACL,KADK;AA7BX,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,SAA+B,uBAAuB;AAGtD,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,mBAAmB;AAc1B,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,cAAc;AAAA,UACvB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAaA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,eAAe,OAAiB;AAC9B,SAAK,MAAM,SAAS;AAAA,MAClB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB;AACf,UAAM,QAAQ,KAAK,MAAM,OAAO,SAAS,CAAC;AAC1C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM,EAAE,UAAU;AAAA,QAC9B,WAAW,OAAO,cAAc;AAAA,QAChC,MAAK;AAAA,QACL,OAAO;AAAA,QACP,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,IACzC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACL;AAAA,WAAK,eAAe;AAAA,MACrB;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,SAAS;AAAA,YACP,CAAC,OAAO,mCAAmC;AAAA,YAC3C,CAAC,OAAO,yBAAyB;AAAA,UACnC;AAAA,UACA,UAAU,YAAU,KAAK,MAAM,SAAS;AAAA,YACtC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA,UACD,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEF;AACF;AAEA,MAAM,qBAAyE,CAAC,MAAO;AAAA,EACrF,EAAE,OAAO,EAAE,gBAAgB,GAAG,KAAK,WAAW;AAAA,EAC9C,EAAE,OAAO,EAAE,iBAAiB,GAAG,KAAK,YAAY;AAAA,EAChD,EAAE,OAAO,EAAE,oBAAoB,GAAG,KAAK,eAAe;AAAA,EACtD,EAAE,OAAO,EAAE,mBAAmB,GAAG,KAAK,cAAc;AACtD;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,SAAmB;AACrC,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,MAAK;AAAA,UACL,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,SAAS,CAAC;AAAA,UACV,UAAU;AAAA;AAAA,MACZ;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AASA,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,aAAa;AAAA,QACtB,WAAW,OAAO,eAAe;AAAA,QACjC,OAAO,KAAK,MAAM,OAAO;AAAA,QACzB,UAAU,UAAQ,KAAK,MAAM,SAAS;AAAA,UACpC,GAAG,KAAK,MAAM;AAAA,UACd;AAAA,QACF,CAAC;AAAA;AAAA,IACH;AAAA,EACF;AACF;AAUA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA,0BAAC,SAAM,OAAO,EAAE,SAAS,GAAG,WAAW,OAAO,eAAe,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAS;AAAA,UACT,UAAU,UAAQ;AAChB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,SAAS;AAAA,UAClB,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,aAAW;AACnB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAUA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA,UACZ,UAAU,CAAC,QAAgB,KAAK,MAAM,SAAS;AAAA,YAC7C,GAAG,KAAK,MAAM;AAAA,YACd,KAAK,IAAI,WAAW,YAAY,IAAI,MAAM,aAAa,GAAG;AAAA,UAC5D,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAQA,MAAM,uCAAuC,MAAM,UAA+C;AAAA,EAChG,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,UAAU,KAAK,MAAM;AAAA,MACrB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM,KAAK,MAAM;AAAA,MACjB,QAAQ,KAAK,MAAM;AAAA,IACrB;AACA,YAAO,KAAK,MAAM,MAAM;AAAA,MACtB,KAAK;AAAe,eAAO,oBAAC,0BAAwB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAgB,eAAO,oBAAC,gCAA8B,GAAG,aAAa;AAAA,MAC3E,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACjE,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAClD;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,WAAW;AAAA,YACpB,WAAW,OAAO,cAAc;AAAA,YAChC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,cACxC,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,YACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,cAAc,SAAS;AAAA,YACnE,eAAY;AAAA;AAAA,QACd,GACF;AAAA,MACA,KAAK;AAAuB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MAC1E,KAAK;AAAsB,eAAO,qBAAC,uBAAqB,GAAG,aACzD;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,WAAW;AAAA,cACpB,WAAW,OAAO,kBAAkB;AAAA,cACpC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA,cACvE,eAAY;AAAA;AAAA,UACd;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,UAAU;AAAA,cACnB,WAAW,OAAO,kBAAkB;AAAA,cACpC,SAAS,OAAO,KAAK,OAAO,kBAAkB,SAAS,MAAM;AAAA,cAC7D,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA;AAAA,UACzE;AAAA,WACF;AAAA,MACA,KAAK;AAAkB,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD;AAAS,eAAO;AAAA,IAClB;AAAA,EACF;AACF;AAEA,MAAM,yBAAyB,gBAAgB,EAAE,8BAA8B;AAC/E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"18323b845fc84e69550b153f838c0967a64d83cc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return xn=function(){return s},s}xn();class E9 extends In.Component{render(){xn().f[0]++;const e=(xn().s[0]++,this.props.t);return xn().s[1]++,oe.jsxs("div",{children:[oe.jsx(zM,{label:e("TileJSON URL"),fieldSpec:$o.source_vector.url,value:this.props.source.url,onChange:t=>(xn().f[1]++,xn().s[2]++,this.props.onChange({...this.props.source,url:t}))}),this.props.children]})}}class B9 extends In.Component{changeTileUrls(e){xn().f[2]++,xn().s[3]++,this.props.onChange({...this.props.source,tiles:e})}renderTileUrls(){xn().f[3]++;const e=(xn().s[4]++,xn().b[0][0]++,this.props.source.tiles||(xn().b[0][1]++,[]));return xn().s[5]++,oe.jsx(Vse,{label:this.props.t("Tile URL"),fieldSpec:$o.source_vector.tiles,type:"url",value:e,onChange:this.changeTileUrls.bind(this)})}render(){xn().f[4]++;const e=(xn().s[6]++,this.props.t);return xn().s[7]++,oe.jsxs("div",{children:[this.renderTileUrls(),oe.jsx(G5,{label:e("Scheme Type"),fieldSpec:$o.source_vector.scheme,options:[["xyz","xyz (Slippy map tilenames scheme)"],["tms","tms (OSGeo spec scheme)"]],onChange:t=>(xn().f[5]++,xn().s[8]++,this.props.onChange({...this.props.source,scheme:t})),value:this.props.source.scheme,"data-wd-key":"modal:sources.add.scheme_type"}),oe.jsx(xm,{label:e("Min Zoom"),fieldSpec:$o.source_vector.minzoom,value:(xn().b[1][0]++,this.props.source.minzoom||(xn().b[1][1]++,0)),onChange:t=>(xn().f[6]++,xn().s[9]++,this.props.onChange({...this.props.source,minzoom:t}))}),oe.jsx(xm,{label:e("Max Zoom"),fieldSpec:$o.source_vector.maxzoom,value:(xn().b[2][0]++,this.props.source.maxzoom||(xn().b[2][1]++,22)),onChange:t=>(xn().f[7]++,xn().s[10]++,this.props.onChange({...this.props.source,maxzoom:t}))}),this.props.children]})}}xn().s[11]++;const $se=n=>(xn().f[8]++,xn().s[12]++,[{label:n("Coord top left"),key:"top left"},{label:n("Coord top right"),key:"top right"},{label:n("Coord bottom right"),key:"bottom right"},{label:n("Coord bottom left"),key:"bottom left"}]);class rPe extends In.Component{render(){xn().f[9]++;const e=(xn().s[13]++,this.props.t);xn().s[14]++;const t=(i,r)=>{xn().f[10]++;const o=(xn().s[15]++,this.props.source.coordinates.slice(0));xn().s[16]++,o[i]=r,xn().s[17]++,this.props.onChange({...this.props.source,coordinates:o})};return xn().s[18]++,oe.jsxs("div",{children:[oe.jsx(zM,{label:e("Image URL"),fieldSpec:$o.source_image.url,value:this.props.source.url,onChange:i=>(xn().f[11]++,xn().s[19]++,this.props.onChange({...this.props.source,url:i}))}),$se(e).map(({label:i,key:r},o)=>(xn().f[12]++,xn().s[20]++,oe.jsx(b6,{label:i,length:2,type:"number",value:this.props.source.coordinates[o],default:[0,0],onChange:s=>(xn().f[13]++,xn().s[21]++,t(o,s))},r)))]})}}class oPe extends In.Component{render(){xn().f[14]++;const e=(xn().s[22]++,this.props.t);xn().s[23]++;const t=(r,o)=>{xn().f[15]++;const s=(xn().s[24]++,this.props.source.coordinates.slice(0));xn().s[25]++,s[r]=o,xn().s[26]++,this.props.onChange({...this.props.source,coordinates:s})};xn().s[27]++;const i=r=>{xn().f[16]++,xn().s[28]++,this.props.onChange({...this.props.source,urls:r})};return xn().s[29]++,oe.jsxs("div",{children:[oe.jsx(Vse,{label:e("Video URL"),fieldSpec:$o.source_video.urls,type:"string",value:this.props.source.urls,default:[],onChange:i}),$se(e).map(({label:r,key:o},s)=>(xn().f[17]++,xn().s[30]++,oe.jsx(b6,{label:r,length:2,type:"number",value:this.props.source.coordinates[s],default:[0,0],onChange:a=>(xn().f[18]++,xn().s[31]++,t(s,a))},o)))]})}}class sPe extends In.Component{render(){xn().f[19]++;const e=(xn().s[32]++,this.props.t);return xn().s[33]++,oe.jsx(zM,{label:e("GeoJSON URL"),fieldSpec:$o.source_geojson.data,value:this.props.source.data,onChange:t=>(xn().f[20]++,xn().s[34]++,this.props.onChange({...this.props.source,data:t}))})}}class aPe extends In.Component{render(){xn().f[21]++;const e=(xn().s[35]++,this.props.t);return xn().s[36]++,oe.jsxs("div",{children:[oe.jsx(cs,{label:e("GeoJSON"),fieldSpec:$o.source_geojson.data,children:oe.jsx(tO,{value:this.props.source.data,lintType:"json",onChange:t=>{xn().f[22]++,xn().s[37]++,this.props.onChange({...this.props.source,data:t})}})}),oe.jsx(iPe,{label:e("Cluster"),value:this.props.source.cluster,onChange:t=>{xn().f[23]++,xn().s[38]++,this.props.onChange({...this.props.source,cluster:t})}})]})}}class lPe extends In.Component{render(){xn().f[24]++;const e=(xn().s[39]++,this.props.t);return xn().s[40]++,oe.jsxs("div",{children:[oe.jsx(zM,{label:e("PMTiles URL"),fieldSpec:$o.source_vector.url,value:this.props.source.url,"data-wd-key":"modal:sources.add.source_url",onChange:t=>(xn().f[25]++,xn().s[41]++,this.props.onChange({...this.props.source,url:t.startsWith("pmtiles://")?(xn().b[3][0]++,t):(xn().b[3][1]++,`pmtiles://${t}`)}))}),this.props.children]})}}class uPe extends In.Component{render(){xn().f[26]++;const e=(xn().s[42]++,this.props.t),t=(xn().s[43]++,{source:this.props.source,onChange:this.props.onChange,t:this.props.t,i18n:this.props.i18n,tReady:this.props.tReady});switch(xn().s[44]++,this.props.mode){case"geojson_url":return xn().b[4][0]++,xn().s[45]++,oe.jsx(sPe,{...t});case"geojson_json":return xn().b[4][1]++,xn().s[46]++,oe.jsx(aPe,{...t});case"tilejson_vector":return xn().b[4][2]++,xn().s[47]++,oe.jsx(E9,{...t});case"tile_vector":return xn().b[4][3]++,xn().s[48]++,oe.jsx(B9,{...t});case"tilejson_raster":return xn().b[4][4]++,xn().s[49]++,oe.jsx(E9,{...t});case"tile_raster":return xn().b[4][5]++,xn().s[50]++,oe.jsx(B9,{...t,children:oe.jsx(xm,{label:e("Tile Size"),fieldSpec:$o.source_raster.tileSize,onChange:i=>(xn().f[27]++,xn().s[51]++,this.props.onChange({...this.props.source,tileSize:i})),value:(xn().b[5][0]++,this.props.source.tileSize||(xn().b[5][1]++,$o.source_raster.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"})});case"tilejson_raster-dem":return xn().b[4][6]++,xn().s[52]++,oe.jsx(E9,{...t});case"tilexyz_raster-dem":return xn().b[4][7]++,xn().s[53]++,oe.jsxs(B9,{...t,children:[oe.jsx(xm,{label:e("Tile Size"),fieldSpec:$o.source_raster_dem.tileSize,onChange:i=>(xn().f[28]++,xn().s[54]++,this.props.onChange({...this.props.source,tileSize:i})),value:(xn().b[6][0]++,this.props.source.tileSize||(xn().b[6][1]++,$o.source_raster_dem.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"}),oe.jsx(G5,{label:e("Encoding"),fieldSpec:$o.source_raster_dem.encoding,options:Object.keys($o.source_raster_dem.encoding.values),onChange:i=>(xn().f[29]++,xn().s[55]++,this.props.onChange({...this.props.source,encoding:i})),value:(xn().b[7][0]++,this.props.source.encoding||(xn().b[7][1]++,$o.source_raster_dem.encoding.default))})]});case"pmtiles_vector":return xn().b[4][8]++,xn().s[56]++,oe.jsx(lPe,{...t});case"image":return xn().b[4][9]++,xn().s[57]++,oe.jsx(rPe,{...t});case"video":return xn().b[4][10]++,xn().s[58]++,oe.jsx(oPe,{...t});default:return xn().b[4][11]++,xn().s[59]++,null}}}const Hse=(xn().s[60]++,Do()(uPe));function Dm(){var n="/home/runner/work/maputnik/maputnik/src/libs/source.ts",e="871503159abbdc3b3ae7b24cdaefb6478172c58b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/source.ts",statementMap:{0:{start:{line:2,column:27},end:{line:2,column:50}},1:{start:{line:3,column:2},end:{line:3,column:36}},2:{start:{line:4,column:2},end:{line:7,column:4}},3:{start:{line:10,column:2},end:{line:10,column:50}},4:{start:{line:13,column:25},end:{line:16,column:3}},5:{start:{line:17,column:2},end:{line:20,column:4}}},fnMap:{0:{name:"deleteSource",decl:{start:{line:1,column:16},end:{line:1,column:28}},loc:{start:{line:1,column:49},end:{line:8,column:1}},line:1},1:{name:"addSource",decl:{start:{line:9,column:16},end:{line:9,column:25}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},2:{name:"changeSource",decl:{start:{line:12,column:16},end:{line:12,column:28}},loc:{start:{line:12,column:57},end:{line:21,column:1}},line:12}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/source.ts"],names:[],mappings:"AAGO,gBAAS,aAAa,UAAoC,UAAkB;AACjF,QAAM,mBAAmB,EAAE,GAAG,SAAS,QAAO;AAC9C,SAAO,iBAAiB,QAAQ;AAChC,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;AAGO,gBAAS,UAAU,UAAoC,UAAkB,QAA6B;AAC3G,SAAO,aAAa,UAAU,UAAU,MAAM;AAChD;AAEO,gBAAS,aAAa,UAAoC,UAAkB,QAA6B;AAC9G,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,QAAQ,GAAG;AAAA,EACd;AACA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"871503159abbdc3b3ae7b24cdaefb6478172c58b"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Dm=function(){return s},s}Dm();function cPe(n,e){Dm().f[0]++;const t=(Dm().s[0]++,{...n.sources});return Dm().s[1]++,delete t[e],Dm().s[2]++,{...n,sources:t}}function PH(n,e,t){return Dm().f[1]++,Dm().s[3]++,Zse(n,e,t)}function Zse(n,e,t){Dm().f[2]++;const i=(Dm().s[4]++,{...n.sources,[e]:t});return Dm().s[5]++,{...n,sources:i}}const APe={type:"vector",url:"https://api.maptiler.com/tiles/v3-openmaptiles/tiles.json?key={key}",title:"OpenMapTiles v3"},hPe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.transport-v2.json?apikey={key}",title:"Thunderforest Transport v2"},dPe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.outdoors-v2.json?apikey={key}",title:"Thunderforest Outdoors v2"},fPe={type:"vector",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/data/vector/open-zoomstack/config.json",title:"OS Open Zoomstack v2"},pPe={type:"vector",url:"https://tiles.locationiq.com/v3/pbf/tiles.json?key={key}",title:"LocationIQ"},LH={openmaptiles:APe,thunderforest_transport:hPe,thunderforest_outdoors:dPe,open_zoomstack:fPe,locationiq:pPe};function Wt(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx",e="30dc2f79b5d8eab063b35a7a783386d299d39465",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:33,column:9}},1:{start:{line:20,column:23},end:{line:20,column:57}},2:{start:{line:37,column:2},end:{line:40,column:3}},3:{start:{line:38,column:4},end:{line:38,column:43}},4:{start:{line:38,column:22},end:{line:38,column:43}},5:{start:{line:39,column:4},end:{line:39,column:29}},6:{start:{line:41,column:2},end:{line:44,column:3}},7:{start:{line:42,column:4},end:{line:42,column:50}},8:{start:{line:42,column:22},end:{line:42,column:50}},9:{start:{line:43,column:4},end:{line:43,column:33}},10:{start:{line:45,column:2},end:{line:49,column:3}},11:{start:{line:46,column:4},end:{line:46,column:43}},12:{start:{line:46,column:22},end:{line:46,column:43}},13:{start:{line:47,column:4},end:{line:47,column:83}},14:{start:{line:47,column:59},end:{line:47,column:83}},15:{start:{line:48,column:4},end:{line:48,column:29}},16:{start:{line:50,column:2},end:{line:56,column:3}},17:{start:{line:51,column:4},end:{line:55,column:5}},18:{start:{line:52,column:6},end:{line:52,column:27}},19:{start:{line:54,column:6},end:{line:54,column:28}},20:{start:{line:57,column:2},end:{line:59,column:3}},21:{start:{line:58,column:4},end:{line:58,column:19}},22:{start:{line:60,column:2},end:{line:62,column:3}},23:{start:{line:61,column:4},end:{line:61,column:19}},24:{start:{line:63,column:2},end:{line:63,column:14}},25:{start:{line:67,column:14},end:{line:67,column:26}},26:{start:{line:68,column:4},end:{line:94,column:9}},27:{start:{line:80,column:27},end:{line:80,column:67}},28:{start:{line:99,column:4},end:{line:99,column:17}},29:{start:{line:100,column:4},end:{line:104,column:6}},30:{start:{line:107,column:19},end:{line:107,column:50}},31:{start:{line:108,column:25},end:{line:108,column:40}},32:{start:{line:109,column:4},end:{line:192,column:5}},33:{start:{line:111,column:8},end:{line:114,column:10}},34:{start:{line:116,column:8},end:{line:119,column:10}},35:{start:{line:121,column:8},end:{line:125,column:10}},36:{start:{line:127,column:8},end:{line:130,column:10}},37:{start:{line:132,column:8},end:{line:138,column:10}},38:{start:{line:140,column:8},end:{line:143,column:10}},39:{start:{line:145,column:8},end:{line:152,column:10}},40:{start:{line:154,column:8},end:{line:157,column:10}},41:{start:{line:159,column:8},end:{line:165,column:10}},42:{start:{line:167,column:8},end:{line:176,column:10}},43:{start:{line:178,column:8},end:{line:189,column:10}},44:{start:{line:191,column:8},end:{line:191,column:18}},45:{start:{line:194,column:10},end:{line:197,column:3}},46:{start:{line:195,column:33},end:{line:195,column:43}},47:{start:{line:196,column:4},end:{line:196,column:39}},48:{start:{line:198,column:19},end:{line:200,column:3}},49:{start:{line:199,column:4},end:{line:199,column:30}},50:{start:{line:202,column:14},end:{line:202,column:26}},51:{start:{line:203,column:32},end:{line:205,column:5}},52:{start:{line:206,column:4},end:{line:257,column:9}},53:{start:{line:213,column:27},end:{line:213,column:57}},54:{start:{line:235,column:30},end:{line:235,column:87}},55:{start:{line:262,column:27},end:{line:262,column:40}},56:{start:{line:263,column:4},end:{line:263,column:35}},57:{start:{line:264,column:4},end:{line:264,column:26}},58:{start:{line:267,column:28},end:{line:267,column:38}},59:{start:{line:268,column:22},end:{line:268,column:77}},60:{start:{line:269,column:26},end:{line:282,column:6}},61:{start:{line:270,column:21},end:{line:270,column:47}},62:{start:{line:271,column:6},end:{line:281,column:8}},63:{start:{line:276,column:29},end:{line:276,column:93}},64:{start:{line:277,column:26},end:{line:277,column:85}},65:{start:{line:283,column:27},end:{line:295,column:6}},66:{start:{line:283,column:75},end:{line:283,column:106}},67:{start:{line:284,column:21},end:{line:284,column:44}},68:{start:{line:285,column:6},end:{line:294,column:8}},69:{start:{line:291,column:26},end:{line:291,column:107}},70:{start:{line:296,column:4},end:{line:326,column:6}},71:{start:{line:319,column:45},end:{line:319,column:109}},72:{start:{line:329,column:21},end:{line:329,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:34,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:57}},line:20},2:{name:"editorMode",decl:{start:{line:36,column:9},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:64,column:1}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:66,column:2},end:{line:66,column:3}},loc:{start:{line:66,column:11},end:{line:95,column:3}},line:66},4:{name:"(anonymous_4)",decl:{start:{line:80,column:21},end:{line:80,column:22}},loc:{start:{line:80,column:27},end:{line:80,column:67}},line:80},5:{name:"(anonymous_5)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:21},end:{line:105,column:3}},line:98},6:{name:"(anonymous_6)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:22},end:{line:193,column:3}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:194,column:10},end:{line:194,column:11}},loc:{start:{line:194,column:16},end:{line:197,column:3}},line:194},8:{name:"(anonymous_8)",decl:{start:{line:198,column:19},end:{line:198,column:20}},loc:{start:{line:198,column:31},end:{line:200,column:3}},line:198},9:{name:"(anonymous_9)",decl:{start:{line:201,column:2},end:{line:201,column:3}},loc:{start:{line:201,column:11},end:{line:258,column:3}},line:201},10:{name:"(anonymous_10)",decl:{start:{line:213,column:20},end:{line:213,column:21}},loc:{start:{line:213,column:27},end:{line:213,column:57}},line:213},11:{name:"(anonymous_11)",decl:{start:{line:235,column:20},end:{line:235,column:21}},loc:{start:{line:235,column:30},end:{line:235,column:87}},line:235},12:{name:"(anonymous_12)",decl:{start:{line:261,column:2},end:{line:261,column:3}},loc:{start:{line:261,column:21},end:{line:265,column:3}},line:261},13:{name:"(anonymous_13)",decl:{start:{line:266,column:2},end:{line:266,column:3}},loc:{start:{line:266,column:11},end:{line:327,column:3}},line:266},14:{name:"(anonymous_14)",decl:{start:{line:269,column:60},end:{line:269,column:61}},loc:{start:{line:269,column:74},end:{line:282,column:5}},line:269},15:{name:"(anonymous_15)",decl:{start:{line:276,column:20},end:{line:276,column:21}},loc:{start:{line:276,column:29},end:{line:276,column:93}},line:276},16:{name:"(anonymous_16)",decl:{start:{line:277,column:20},end:{line:277,column:21}},loc:{start:{line:277,column:26},end:{line:277,column:85}},line:277},17:{name:"(anonymous_17)",decl:{start:{line:283,column:61},end:{line:283,column:62}},loc:{start:{line:283,column:75},end:{line:283,column:106}},line:283},18:{name:"(anonymous_18)",decl:{start:{line:283,column:112},end:{line:283,column:113}},loc:{start:{line:283,column:126},end:{line:295,column:5}},line:283},19:{name:"(anonymous_19)",decl:{start:{line:291,column:20},end:{line:291,column:21}},loc:{start:{line:291,column:26},end:{line:291,column:107}},line:291},20:{name:"(anonymous_20)",decl:{start:{line:319,column:23},end:{line:319,column:24}},loc:{start:{line:319,column:45},end:{line:319,column:109}},line:319}},branchMap:{0:{loc:{start:{line:37,column:2},end:{line:40,column:3}},type:"if",locations:[{start:{line:37,column:2},end:{line:40,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},1:{loc:{start:{line:38,column:4},end:{line:38,column:43}},type:"if",locations:[{start:{line:38,column:4},end:{line:38,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:41,column:2},end:{line:44,column:3}},type:"if",locations:[{start:{line:41,column:2},end:{line:44,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:42,column:4},end:{line:42,column:50}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:50}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},4:{loc:{start:{line:45,column:2},end:{line:49,column:3}},type:"if",locations:[{start:{line:45,column:2},end:{line:49,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},5:{loc:{start:{line:46,column:4},end:{line:46,column:43}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:47,column:4},end:{line:47,column:83}},type:"if",locations:[{start:{line:47,column:4},end:{line:47,column:83}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},7:{loc:{start:{line:47,column:8},end:{line:47,column:57}},type:"binary-expr",locations:[{start:{line:47,column:8},end:{line:47,column:18}},{start:{line:47,column:22},end:{line:47,column:57}}],line:47},8:{loc:{start:{line:50,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:50,column:2},end:{line:56,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},9:{loc:{start:{line:51,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:55,column:5}},{start:{line:53,column:11},end:{line:55,column:5}}],line:51},10:{loc:{start:{line:57,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:57,column:2},end:{line:59,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:60,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:60,column:2},end:{line:62,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},12:{loc:{start:{line:107,column:19},end:{line:107,column:50}},type:"binary-expr",locations:[{start:{line:107,column:19},end:{line:107,column:44}},{start:{line:107,column:48},end:{line:107,column:50}}],line:107},13:{loc:{start:{line:107,column:20},end:{line:107,column:36}},type:"binary-expr",locations:[{start:{line:107,column:20},end:{line:107,column:30}},{start:{line:107,column:34},end:{line:107,column:36}}],line:107},14:{loc:{start:{line:109,column:4},end:{line:192,column:5}},type:"switch",locations:[{start:{line:110,column:6},end:{line:114,column:10}},{start:{line:115,column:6},end:{line:119,column:10}},{start:{line:120,column:6},end:{line:125,column:10}},{start:{line:126,column:6},end:{line:130,column:10}},{start:{line:131,column:6},end:{line:138,column:10}},{start:{line:139,column:6},end:{line:143,column:10}},{start:{line:144,column:6},end:{line:152,column:10}},{start:{line:153,column:6},end:{line:157,column:10}},{start:{line:158,column:6},end:{line:165,column:10}},{start:{line:166,column:6},end:{line:176,column:10}},{start:{line:177,column:6},end:{line:189,column:10}},{start:{line:190,column:6},end:{line:191,column:18}}],line:109},15:{loc:{start:{line:123,column:19},end:{line:123,column:42}},type:"binary-expr",locations:[{start:{line:123,column:19},end:{line:123,column:33}},{start:{line:123,column:37},end:{line:123,column:42}}],line:123},16:{loc:{start:{line:129,column:15},end:{line:129,column:72}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:25}},{start:{line:129,column:29},end:{line:129,column:72}}],line:129},17:{loc:{start:{line:134,column:17},end:{line:134,column:80}},type:"binary-expr",locations:[{start:{line:134,column:17},end:{line:134,column:29}},{start:{line:134,column:33},end:{line:134,column:80}}],line:134},18:{loc:{start:{line:135,column:19},end:{line:135,column:38}},type:"binary-expr",locations:[{start:{line:135,column:19},end:{line:135,column:33}},{start:{line:135,column:37},end:{line:135,column:38}}],line:135},19:{loc:{start:{line:136,column:19},end:{line:136,column:39}},type:"binary-expr",locations:[{start:{line:136,column:19},end:{line:136,column:33}},{start:{line:136,column:37},end:{line:136,column:39}}],line:136},20:{loc:{start:{line:137,column:18},end:{line:137,column:40}},type:"binary-expr",locations:[{start:{line:137,column:18},end:{line:137,column:31}},{start:{line:137,column:35},end:{line:137,column:40}}],line:137},21:{loc:{start:{line:142,column:15},end:{line:142,column:72}},type:"binary-expr",locations:[{start:{line:142,column:15},end:{line:142,column:25}},{start:{line:142,column:29},end:{line:142,column:72}}],line:142},22:{loc:{start:{line:147,column:17},end:{line:147,column:80}},type:"binary-expr",locations:[{start:{line:147,column:17},end:{line:147,column:29}},{start:{line:147,column:33},end:{line:147,column:80}}],line:147},23:{loc:{start:{line:148,column:19},end:{line:148,column:38}},type:"binary-expr",locations:[{start:{line:148,column:19},end:{line:148,column:33}},{start:{line:148,column:37},end:{line:148,column:38}}],line:148},24:{loc:{start:{line:149,column:19},end:{line:149,column:39}},type:"binary-expr",locations:[{start:{line:149,column:19},end:{line:149,column:33}},{start:{line:149,column:37},end:{line:149,column:39}}],line:149},25:{loc:{start:{line:150,column:18},end:{line:150,column:40}},type:"binary-expr",locations:[{start:{line:150,column:18},end:{line:150,column:31}},{start:{line:150,column:35},end:{line:150,column:40}}],line:150},26:{loc:{start:{line:151,column:20},end:{line:151,column:42}},type:"binary-expr",locations:[{start:{line:151,column:20},end:{line:151,column:35}},{start:{line:151,column:39},end:{line:151,column:42}}],line:151},27:{loc:{start:{line:156,column:15},end:{line:156,column:72}},type:"binary-expr",locations:[{start:{line:156,column:15},end:{line:156,column:25}},{start:{line:156,column:29},end:{line:156,column:72}}],line:156},28:{loc:{start:{line:161,column:17},end:{line:161,column:80}},type:"binary-expr",locations:[{start:{line:161,column:17},end:{line:161,column:29}},{start:{line:161,column:33},end:{line:161,column:80}}],line:161},29:{loc:{start:{line:162,column:19},end:{line:162,column:38}},type:"binary-expr",locations:[{start:{line:162,column:19},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:38}}],line:162},30:{loc:{start:{line:163,column:19},end:{line:163,column:39}},type:"binary-expr",locations:[{start:{line:163,column:19},end:{line:163,column:33}},{start:{line:163,column:37},end:{line:163,column:39}}],line:163},31:{loc:{start:{line:164,column:20},end:{line:164,column:42}},type:"binary-expr",locations:[{start:{line:164,column:20},end:{line:164,column:35}},{start:{line:164,column:39},end:{line:164,column:42}}],line:164}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0,0,0,0,0,0,0,0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx"],names:[],mappings:"AAiCU,cACA,YADA;AAjCV,OAAO,WAAW;AAClB,SAAQ,oBAAoB,gBAAe;AAC3C,OAAO,YAAY;AAEnB,SAA+B,uBAAuB;AAEtD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,4BAAiD;AAExD,OAAO,WAAW;AAClB,SAAS,cAAc,WAAW,oBAAoB;AACtD,OAAO,mBAAmB;AAW1B,MAAM,qBAAqB,MAAM,UAA6B;AAAA,EAC5D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,0BACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,EAAE;AAAA,QAEhD;AAAA,+BAAC,SAAI,WAAU,+BACb;AAAA,gCAAC,OAAE,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,YAC7D,qBAAC,OAAE,WAAU,6BAA4B;AAAA;AAAA,cAAE,KAAK,MAAM;AAAA,eAAG;AAAA,aAC3D;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC,oBAAC,sBAAmB;AAAA;AAAA;AAAA,IACtB,GACF;AAAA,EACF;AACF;AAEA,SAAS,WAAW,QAA6B;AAC/C,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,cAAc;AAC/B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,QAAG,OAAO,OAAO,OAAO,IAAI,WAAW,YAAY,EAAG,QAAO;AAC7D,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,WAAW;AAC5B,QAAI,OAAO,OAAO,SAAU,UAAU;AACpC,aAAO;AAAA,IACT,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,SAAO;AACT;AASA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,2BAAC,SAAI,WAAU,6CACb;AAAA,6BAAC,UAAK,WAAU,gDAA+C;AAAA;AAAA,UAAE,KAAK,MAAM;AAAA,WAAS;AAAA,QACrF,oBAAC,UAAK,WAAU,kBAAiB;AAAA,QACjC;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,EAAE,gCAAgC,EAAC,UAAU,KAAK,MAAM,SAAQ,CAAC;AAAA,YAC7E,WAAU;AAAA,YACV,SAAS,MAAK,KAAK,MAAM,SAAS,KAAK,MAAM,QAAQ;AAAA,YACrD,OAAO,EAAC,iBAAiB,cAAa;AAAA,YAEtC,8BAAC,YAAS;AAAA;AAAA,QACZ;AAAA,SACF;AAAA,MACA,oBAAC,SAAI,WAAU,8CACb;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,MAAM,WAAW,KAAK,MAAM,MAAM;AAAA,UAClC,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB,GACF;AAAA,OACF;AAAA,EACF;AACF;AAYA,MAAM,kBAAkB,MAAM,UAA0C;AAAA,EACtE,YAAY,OAAuB;AACjC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU,MAAM,WAAW;AAAA,MAC3B,QAAQ,KAAK,cAAc,iBAAiB;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,cAAc,MAAuC;AACnD,UAAM,UAAU,KAAK,SAAS,CAAC,GAAG,UAAU,CAAC;AAC7C,UAAM,EAAC,SAAQ,IAAI,OAAO;AAE1B,YAAO,MAAM;AAAA,MACX,KAAK;AAAkB,eAAO;AAAA,UAC5B,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,QAClB;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,MAAM,GAAG,QAAQ;AAAA,QACnB;AAAA,MACA,KAAK;AAAgB,eAAO;AAAA,UAC1B,MAAM;AAAA,UACN,SAAU,OAAsC,WAAW;AAAA,UAC3D,MAAM;AAAA,QACR;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,QAC1D;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,UACxD,UAAW,OAAqC,YAAY;AAAA,QAC9D;AAAA,MACA,KAAK;AAAuB,eAAO;AAAA,UACjC,MAAM;AAAA,UACN,KAAM,OAAwC,OAAO,GAAG,QAAQ;AAAA,QAClE;AAAA,MACA,KAAK;AAAsB,eAAO;AAAA,UAChC,MAAM;AAAA,UACN,OAAQ,OAAwC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACvG,SAAU,OAAwC,WAAW;AAAA,UAC7D,SAAU,OAAwC,WAAW;AAAA,UAC7D,UAAW,OAAwC,YAAY;AAAA,QACjE;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,UAChB,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,GAAG,QAAQ;AAAA,UACb;AAAA,UACA,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA;AAAS,eAAO,CAAC;AAAA,IACnB;AAAA,EACF;AAAA,EAEA,QAAQ,MAAM;AACZ,UAAM,EAAC,QAAQ,SAAQ,IAAI,KAAK;AAChC,SAAK,MAAM,MAAM,UAAU,MAAM;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,WAAgC;AAChD,SAAK,SAAS,EAAC,OAAM,CAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAQrB,UAAM,sBAAsB;AAAA,MAC1B,KAAK,OAAO,cAAc,KAAK;AAAA,IACjC;AAEA,WAAO,qBAAC,SAAI,WAAU,uBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,EAAC,KAAK,EAAE,wFAAwF,EAAC;AAAA,UAC5G,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,UAAU,EAAC,CAAC;AAAA,UACrD,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW;AAAA,UACX,SAAS;AAAA,YACP,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;AAAA,YACpC,CAAC,eAAe,EAAE,eAAe,CAAC;AAAA,YAClC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,uBAAuB,EAAE,2BAA2B,CAAC;AAAA,YACtD,CAAC,sBAAsB,EAAE,uBAAuB,CAAC;AAAA,YACjD,CAAC,kBAAkB,EAAE,kBAAkB,CAAC;AAAA,YACxC,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,YACpB,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,UACtB;AAAA,UACA,UAAU,UAAQ,KAAK,SAAS,EAAC,MAA0B,QAAQ,KAAK,cAAc,IAAkB,EAAC,CAAC;AAAA,UAC1G,OAAO,KAAK,MAAM;AAAA,UAClB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK;AAAA,UACf,MAAM,KAAK,MAAM;AAAA,UACjB,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UACd,eAAY;AAAA,UAEX,YAAE,YAAY;AAAA;AAAA,MACjB;AAAA,OACF;AAAA,EACF;AACF;AASA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,WAAW,QAAqE;AAC9E,UAAM,iBAAiB,EAAC,GAAG,OAAM;AACjC,WAAO,eAAe,OAAO;AAC7B,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,SAAQ,IAAI,KAAK;AAC3B,UAAM,YAAY,EAAC,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAM;AACtE,UAAM,gBAAgB,OAAO,KAAK,SAAS,OAAO,EAAE,IAAI,cAAY;AAClE,YAAM,SAAS,SAAS,QAAQ,QAAQ;AACxC,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN;AAAA,UACA;AAAA,UACA,UAAU,CAAC,QAA6B,KAAK,MAAM,eAAe,aAAa,UAAU,UAAU,GAAG,CAAC;AAAA,UACvG,UAAU,MAAM,KAAK,MAAM,eAAe,aAAa,UAAU,QAAQ,CAAC;AAAA,UACzE,GAAG;AAAA;AAAA,QALC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,iBAAiB,OAAO,KAAK,aAAa,EAAE,OAAO,CAAC,aAAqB,EAAE,YAAY,SAAS,QAAQ,EAAE,IAAI,CAAC,aAAqB;AACxI,YAAM,SAAS,cAAc,QAAsC;AACnE,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,IAAI;AAAA,UACJ,MAAM,OAAO;AAAA,UACb,OAAO,OAAO;AAAA,UACd,UAAU,MAAM,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,KAAK,WAAW,MAAM,CAAC,CAAC;AAAA;AAAA,QAJ3F;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,SAAS;AAAA,QAElB;AAAA,+BAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACxB;AAAA,aACH;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,sBAAsB,GAAE;AAAA,YAC/B,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,YACA,oBAAC,SAAI,WAAU,2BAA0B,OAAO,EAAC,UAAU,IAAG,GAC3D,0BACH;AAAA,aACF;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACzB,oBAAC,OAAG,YAAE,8FAA8F,GAAE;AAAA,YACtG;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,CAAC,UAAkB,WAAgC,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,MAAM,CAAC;AAAA,gBACxH,GAAG;AAAA;AAAA,YACN;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"30dc2f79b5d8eab063b35a7a783386d299d39465"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Wt=function(){return s},s}Wt();class mPe extends In.Component{render(){return Wt().f[0]++,Wt().s[0]++,oe.jsx("div",{className:"maputnik-public-source",children:oe.jsxs(Ks,{className:"maputnik-public-source-select",onClick:()=>(Wt().f[1]++,Wt().s[1]++,this.props.onSelect(this.props.id)),children:[oe.jsxs("div",{className:"maputnik-public-source-info",children:[oe.jsx("p",{className:"maputnik-public-source-name",children:this.props.title}),oe.jsxs("p",{className:"maputnik-public-source-id",children:["#",this.props.id]})]}),oe.jsx("span",{className:"maputnik-space"}),oe.jsx(KX,{})]})})}}function gPe(n){return Wt().f[2]++,Wt().s[2]++,n.type==="raster"?(Wt().b[0][0]++,Wt().s[3]++,n.tiles?(Wt().b[1][0]++,Wt().s[4]++,"tile_raster"):(Wt().b[1][1]++,Wt().s[5]++,"tilejson_raster")):(Wt().b[0][1]++,Wt().s[6]++,n.type==="raster-dem"?(Wt().b[2][0]++,Wt().s[7]++,n.tiles?(Wt().b[3][0]++,Wt().s[8]++,"tilexyz_raster-dem"):(Wt().b[3][1]++,Wt().s[9]++,"tilejson_raster-dem")):(Wt().b[2][1]++,Wt().s[10]++,n.type==="vector"?(Wt().b[4][0]++,Wt().s[11]++,n.tiles?(Wt().b[5][0]++,Wt().s[12]++,"tile_vector"):(Wt().b[5][1]++,Wt().s[13]++,Wt().b[7][0]++,n.url&&(Wt().b[7][1]++,n.url.startsWith("pmtiles://"))?(Wt().b[6][0]++,Wt().s[14]++,"pmtiles_vector"):(Wt().b[6][1]++,Wt().s[15]++,"tilejson_vector"))):(Wt().b[4][1]++,Wt().s[16]++,n.type==="geojson"?(Wt().b[8][0]++,Wt().s[17]++,typeof n.data=="string"?(Wt().b[9][0]++,Wt().s[18]++,"geojson_url"):(Wt().b[9][1]++,Wt().s[19]++,"geojson_json")):(Wt().b[8][1]++,Wt().s[20]++,n.type==="image"?(Wt().b[10][0]++,Wt().s[21]++,"image"):(Wt().b[10][1]++,Wt().s[22]++,n.type==="video"?(Wt().b[11][0]++,Wt().s[23]++,"video"):(Wt().b[11][1]++,Wt().s[24]++,null))))))}class yPe extends In.Component{render(){Wt().f[3]++;const e=(Wt().s[25]++,this.props.t);return Wt().s[26]++,oe.jsxs("div",{className:"maputnik-active-source-type-editor",children:[oe.jsxs("div",{className:"maputnik-active-source-type-editor-header",children:[oe.jsxs("span",{className:"maputnik-active-source-type-editor-header-id",children:["#",this.props.sourceId]}),oe.jsx("span",{className:"maputnik-space"}),oe.jsx(Ks,{"aria-label":e("Remove '{{sourceId}}' source",{sourceId:this.props.sourceId}),className:"maputnik-active-source-type-editor-header-delete",onClick:()=>(Wt().f[4]++,Wt().s[27]++,this.props.onDelete(this.props.sourceId)),style:{backgroundColor:"transparent"},children:oe.jsx(jC,{})})]}),oe.jsx("div",{className:"maputnik-active-source-type-editor-content",children:oe.jsx(Hse,{onChange:this.props.onChange,mode:gPe(this.props.source),source:this.props.source})})]})}}class vPe extends In.Component{constructor(e){Wt().f[5]++,Wt().s[28]++,super(e),Wt().s[29]++,this.state={mode:"tilejson_vector",sourceId:Id.generateId(),source:this.defaultSource("tilejson_vector")}}defaultSource(e){Wt().f[6]++;const t=(Wt().s[30]++,Wt().b[12][0]++,(Wt().b[13][0]++,this.state||(Wt().b[13][1]++,{})).source||(Wt().b[12][1]++,{})),{protocol:i}=(Wt().s[31]++,window.location);switch(Wt().s[32]++,e){case"pmtiles_vector":return Wt().b[14][0]++,Wt().s[33]++,{type:"vector",url:`${i}//localhost:3000/file.pmtiles`};case"geojson_url":return Wt().b[14][1]++,Wt().s[34]++,{type:"geojson",data:`${i}//localhost:3000/geojson.json`};case"geojson_json":return Wt().b[14][2]++,Wt().s[35]++,{type:"geojson",cluster:(Wt().b[15][0]++,t.cluster||(Wt().b[15][1]++,!1)),data:""};case"tilejson_vector":return Wt().b[14][3]++,Wt().s[36]++,{type:"vector",url:(Wt().b[16][0]++,t.url||(Wt().b[16][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_vector":return Wt().b[14][4]++,Wt().s[37]++,{type:"vector",tiles:(Wt().b[17][0]++,t.tiles||(Wt().b[17][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.pbf`])),minzoom:(Wt().b[18][0]++,t.minzoom||(Wt().b[18][1]++,0)),maxzoom:(Wt().b[19][0]++,t.maxzoom||(Wt().b[19][1]++,14)),scheme:(Wt().b[20][0]++,t.scheme||(Wt().b[20][1]++,"xyz"))};case"tilejson_raster":return Wt().b[14][5]++,Wt().s[38]++,{type:"raster",url:(Wt().b[21][0]++,t.url||(Wt().b[21][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_raster":return Wt().b[14][6]++,Wt().s[39]++,{type:"raster",tiles:(Wt().b[22][0]++,t.tiles||(Wt().b[22][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(Wt().b[23][0]++,t.minzoom||(Wt().b[23][1]++,0)),maxzoom:(Wt().b[24][0]++,t.maxzoom||(Wt().b[24][1]++,14)),scheme:(Wt().b[25][0]++,t.scheme||(Wt().b[25][1]++,"xyz")),tileSize:(Wt().b[26][0]++,t.tileSize||(Wt().b[26][1]++,512))};case"tilejson_raster-dem":return Wt().b[14][7]++,Wt().s[40]++,{type:"raster-dem",url:(Wt().b[27][0]++,t.url||(Wt().b[27][1]++,`${i}//localhost:3000/tilejson.json`))};case"tilexyz_raster-dem":return Wt().b[14][8]++,Wt().s[41]++,{type:"raster-dem",tiles:(Wt().b[28][0]++,t.tiles||(Wt().b[28][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(Wt().b[29][0]++,t.minzoom||(Wt().b[29][1]++,0)),maxzoom:(Wt().b[30][0]++,t.maxzoom||(Wt().b[30][1]++,14)),tileSize:(Wt().b[31][0]++,t.tileSize||(Wt().b[31][1]++,512))};case"image":return Wt().b[14][9]++,Wt().s[42]++,{type:"image",url:`${i}//localhost:3000/image.png`,coordinates:[[0,0],[0,0],[0,0],[0,0]]};case"video":return Wt().b[14][10]++,Wt().s[43]++,{type:"video",urls:[`${i}//localhost:3000/movie.mp4`],coordinates:[[0,0],[0,0],[0,0],[0,0]]};default:return Wt().b[14][11]++,Wt().s[44]++,{}}}onAdd=(Wt().s[45]++,()=>{Wt().f[7]++;const{source:e,sourceId:t}=(Wt().s[46]++,this.state);Wt().s[47]++,this.props.onAdd(t,e)});onChangeSource=(Wt().s[48]++,e=>{Wt().f[8]++,Wt().s[49]++,this.setState({source:e})});render(){Wt().f[9]++;const e=(Wt().s[50]++,this.props.t),t=(Wt().s[51]++,{doc:Wr.source_vector.type.doc});return Wt().s[52]++,oe.jsxs("div",{className:"maputnik-add-source",children:[oe.jsx(vd,{label:e("Source ID"),fieldSpec:{doc:e("Unique ID that identifies the source and is used in the layer to reference the source.")},value:this.state.sourceId,onChange:i=>(Wt().f[10]++,Wt().s[53]++,this.setState({sourceId:i})),"data-wd-key":"modal:sources.add.source_id"}),oe.jsx(G5,{label:e("Source Type"),fieldSpec:t,options:[["geojson_json",e("GeoJSON (JSON)")],["geojson_url",e("GeoJSON (URL)")],["tilejson_vector",e("Vector (TileJSON URL)")],["tile_vector",e("Vector (Tile URLs)")],["tilejson_raster",e("Raster (TileJSON URL)")],["tile_raster",e("Raster (Tile URLs)")],["tilejson_raster-dem",e("Raster DEM (TileJSON URL)")],["tilexyz_raster-dem",e("Raster DEM (XYZ URLs)")],["pmtiles_vector",e("Vector (PMTiles)")],["image",e("Image")],["video",e("Video")]],onChange:i=>(Wt().f[11]++,Wt().s[54]++,this.setState({mode:i,source:this.defaultSource(i)})),value:this.state.mode,"data-wd-key":"modal:sources.add.source_type"}),oe.jsx(Hse,{onChange:this.onChangeSource,mode:this.state.mode,source:this.state.source}),oe.jsx(Ks,{className:"maputnik-add-source-button",onClick:this.onAdd,"data-wd-key":"modal:sources.add.add_source",children:e("Add Source")})]})}}class bPe extends In.Component{stripTitle(e){Wt().f[12]++;const t=(Wt().s[55]++,{...e});return Wt().s[56]++,delete t.title,Wt().s[57]++,t}render(){Wt().f[13]++;const{t:e,mapStyle:t}=(Wt().s[58]++,this.props),i=(Wt().s[59]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),r=(Wt().s[60]++,Object.keys(t.sources).map(s=>{Wt().f[14]++;const a=(Wt().s[61]++,t.sources[s]);return Wt().s[62]++,oe.jsx(yPe,{sourceId:s,source:a,onChange:c=>(Wt().f[15]++,Wt().s[63]++,this.props.onStyleChanged(Zse(t,s,c))),onDelete:()=>(Wt().f[16]++,Wt().s[64]++,this.props.onStyleChanged(cPe(t,s))),...i},s)})),o=(Wt().s[65]++,Object.keys(LH).filter(s=>(Wt().f[17]++,Wt().s[66]++,!(s in t.sources))).map(s=>{Wt().f[18]++;const a=(Wt().s[67]++,LH[s]);return Wt().s[68]++,oe.jsx(mPe,{id:s,type:a.type,title:a.title,onSelect:()=>(Wt().f[19]++,Wt().s[69]++,this.props.onStyleChanged(PH(t,s,this.stripTitle(a))))},s)}));return Wt().s[70]++,oe.jsxs(V1,{"data-wd-key":"modal:sources",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Sources"),children:[oe.jsxs("section",{className:"maputnik-modal-section",children:[oe.jsx("h1",{children:e("Active Sources")}),r]}),oe.jsxs("section",{className:"maputnik-modal-section",children:[oe.jsx("h1",{children:e("Choose Public Source")}),oe.jsx("p",{children:e("Add one of the publicly available sources to your style.")}),oe.jsx("div",{className:"maputnik-public-sources",style:{maxWidth:500},children:o})]}),oe.jsxs("section",{className:"maputnik-modal-section",children:[oe.jsx("h1",{children:e("Add New Source")}),oe.jsx("p",{children:e("Add a new source to your style. You can only choose the source type and id at creation time!")}),oe.jsx(vPe,{onAdd:(s,a)=>(Wt().f[20]++,Wt().s[71]++,this.props.onStyleChanged(PH(t,s,a))),...i})]})]})}}const CPe=(Wt().s[72]++,Do()(bPe));function J0(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx",e="14882741b03cd24dba8e21fe7c0f0c38039a7560",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:22,column:6}},2:{start:{line:16,column:28},end:{line:16,column:49}},3:{start:{line:19,column:137},end:{line:19,column:159}},4:{start:{line:25,column:21},end:{line:25,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:23,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:16,column:22},end:{line:16,column:23}},loc:{start:{line:16,column:28},end:{line:16,column:49}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:130},end:{line:19,column:131}},loc:{start:{line:19,column:137},end:{line:19,column:159}},line:19}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx"],names:[],mappings:"AAkBW,SAOL,KAPK;AAlBX,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAWlB,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,oBAAoB;AAAA,QACpB,OAAO,KAAK,MAAM;AAAA,QAClB,cAAc,MAAM,KAAK,MAAM,SAAS;AAAA,QAExC;AAAA,8BAAC,OACE,eAAK,MAAM,SACd;AAAA,UACA,oBAAC,OAAE,WAAU,4BACX,8BAAC,eAAY,SAAS,CAAC,MAAM,KAAK,MAAM,SAAS,CAAC,GAC/C,YAAE,QAAQ,GACb,GACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"14882741b03cd24dba8e21fe7c0f0c38039a7560"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return J0=function(){return s},s}J0();class _Pe extends In.Component{render(){J0().f[0]++;const e=(J0().s[0]++,this.props.t);return J0().s[1]++,oe.jsxs(V1,{"data-wd-key":"modal:loading",isOpen:this.props.isOpen,underlayClickExits:!1,title:this.props.title,onOpenToggle:()=>(J0().f[1]++,J0().s[2]++,this.props.onCancel()),children:[oe.jsx("p",{children:this.props.message}),oe.jsx("p",{className:"maputnik-dialog__buttons",children:oe.jsx(Ks,{onClick:t=>(J0().f[2]++,J0().s[3]++,this.props.onCancel(t)),children:e("Cancel")})})]})}}const xPe=(J0().s[4]++,Do()(_Pe)),Xse=[{id:"0-empty-style",title:"Empty Style",url:"https://cdn.jsdelivr.net/gh/maputnik/editor@9cf74ca405d2be0608b57db8109cf3a6af5b9f49/src/config/empty-style.json",thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAQAAAAHDYbIAAAAEUlEQVR42mP8/58BDhiJ4wAA974H/U5Xe1oAAAAASUVORK5CYII="},{id:"americana",title:"Americana",url:"https://americanamap.org/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/23fa75ad-63e6-43f5-8837-03cdb0428bac"},{id:"aws-hybrid",title:"AWS Hybrid",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Hybrid/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-hybrid.jpg"},{id:"aws-standard",title:"AWS Standard",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Standard/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-standard.jpg"},{id:"dark-matter",title:"Dark Matter",url:"https://cdn.jsdelivr.net/gh/openmaptiles/dark-matter-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/dark-matter.png"},{id:"locationiq-streets",title:"LocationIQ Streets",url:"https://tiles.locationiq.com/v3/streets/vector.json?key={key}",thumbnail:"https://static-assets.locationiq.com/maputnik/locationiq-streets.png"},{id:"maptiler-basic-gl-style",title:"MapTiler Basic",url:"https://cdn.jsdelivr.net/gh/openmaptiles/klokantech-basic-gl-style@v1.10/style.json",thumbnail:"https://maputnik.github.io/thumbnails/klokantech-basic.png"},{id:"maptiler-toner-gl-style",title:"Toner",url:"https://cdn.jsdelivr.net/gh/openmaptiles/toner-gl-style@v1.0/style.json",thumbnail:"https://maputnik.github.io/thumbnails/toner.png"},{id:"osm-bright",title:"OSM Bright",url:"https://cdn.jsdelivr.net/gh/openmaptiles/osm-bright-gl-style@v1.11/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-bright.png"},{id:"osm-liberty",title:"OSM Liberty",url:"https://maputnik.github.io/osm-liberty/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-liberty.png"},{id:"osm-openmaptiles",title:"OSM OpenMapTiles",url:"https://api.maptiler.com/maps/openstreetmap/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",thumbnail:"https://openmaptiles.org/img/styles/openmaptiles.png"},{id:"positron",title:"Positron",url:"https://cdn.jsdelivr.net/gh/openmaptiles/positron-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/positron.png"},{id:"protomaps-light",title:"Protomaps Light",url:"https://api.protomaps.com/styles/v4/light/en.json?key=d828297496b11844",thumbnail:"https://github.com/user-attachments/assets/911f9765-4a7d-4736-9ec0-f2d4c90ae587"},{id:"stadia-outdoors",title:"Stadia Outdoors",url:"https://tiles.stadiamaps.com/styles/outdoors.json",thumbnail:"https://tiles.stadiamaps.com/static/outdoors.png?size=480x320&center=47.350259,8.49035&zoom=16"},{id:"versatiles-colorful",title:"Versatiles Colorful",url:"https://tiles.versatiles.org/assets/styles/colorful/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/6cd69818-c541-46e4-a920-65fb4f654931"}];function Mn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx",e="f3a6249e96d42fc8e59bc18fb123f3ec8de2b220",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx",statementMap:{0:{start:{line:14,column:4},end:{line:37,column:9}},1:{start:{line:19,column:23},end:{line:19,column:58}},2:{start:{line:42,column:4},end:{line:42,column:17}},3:{start:{line:43,column:4},end:{line:45,column:6}},4:{start:{line:48,column:4},end:{line:50,column:7}},5:{start:{line:53,column:4},end:{line:53,column:31}},6:{start:{line:53,column:11},end:{line:53,column:31}},7:{start:{line:54,column:4},end:{line:60,column:5}},8:{start:{line:55,column:6},end:{line:55,column:39}},9:{start:{line:56,column:6},end:{line:59,column:9}},10:{start:{line:62,column:18},end:{line:99,column:3}},11:{start:{line:63,column:4},end:{line:63,column:22}},12:{start:{line:64,column:19},end:{line:64,column:24}},13:{start:{line:65,column:4},end:{line:90,column:7}},14:{start:{line:69,column:6},end:{line:69,column:29}},15:{start:{line:71,column:6},end:{line:73,column:7}},16:{start:{line:72,column:8},end:{line:72,column:15}},17:{start:{line:74,column:6},end:{line:77,column:9}},18:{start:{line:78,column:23},end:{line:78,column:54}},19:{start:{line:79,column:6},end:{line:79,column:48}},20:{start:{line:80,column:6},end:{line:80,column:39}},21:{start:{line:81,column:6},end:{line:81,column:26}},22:{start:{line:83,column:6},end:{line:87,column:9}},23:{start:{line:88,column:6},end:{line:88,column:25}},24:{start:{line:89,column:6},end:{line:89,column:61}},25:{start:{line:91,column:4},end:{line:98,column:7}},26:{start:{line:94,column:10},end:{line:94,column:26}},27:{start:{line:100,column:16},end:{line:103,column:3}},28:{start:{line:101,column:4},end:{line:101,column:23}},29:{start:{line:102,column:4},end:{line:102,column:44}},30:{start:{line:104,column:15},end:{line:131,column:3}},31:{start:{line:105,column:4},end:{line:105,column:22}},32:{start:{line:106,column:23},end:{line:114,column:5}},33:{start:{line:115,column:25},end:{line:115,column:68}},34:{start:{line:116,column:17},end:{line:116,column:43}},35:{start:{line:117,column:20},end:{line:117,column:37}},36:{start:{line:119,column:4},end:{line:126,column:5}},37:{start:{line:120,column:6},end:{line:120,column:37}},38:{start:{line:122,column:6},end:{line:124,column:9}},39:{start:{line:125,column:6},end:{line:125,column:13}},40:{start:{line:127,column:4},end:{line:127,column:51}},41:{start:{line:128,column:4},end:{line:128,column:49}},42:{start:{line:129,column:4},end:{line:129,column:24}},43:{start:{line:130,column:4},end:{line:130,column:16}},44:{start:{line:134,column:18},end:{line:156,column:3}},45:{start:{line:135,column:4},end:{line:135,column:23}},46:{start:{line:135,column:16},end:{line:135,column:23}},47:{start:{line:136,column:4},end:{line:136,column:35}},48:{start:{line:136,column:28},end:{line:136,column:35}},49:{start:{line:137,column:17},end:{line:137,column:25}},50:{start:{line:138,column:19},end:{line:138,column:35}},51:{start:{line:139,column:4},end:{line:139,column:22}},52:{start:{line:140,column:4},end:{line:140,column:37}},53:{start:{line:141,column:4},end:{line:154,column:6}},54:{start:{line:143,column:6},end:{line:150,column:7}},55:{start:{line:144,column:8},end:{line:144,column:48}},56:{start:{line:146,column:8},end:{line:148,column:11}},57:{start:{line:149,column:8},end:{line:149,column:15}},58:{start:{line:151,column:6},end:{line:151,column:53}},59:{start:{line:152,column:6},end:{line:152,column:39}},60:{start:{line:153,column:6},end:{line:153,column:26}},61:{start:{line:155,column:4},end:{line:155,column:50}},62:{start:{line:155,column:28},end:{line:155,column:49}},63:{start:{line:158,column:4},end:{line:160,column:7}},64:{start:{line:161,column:4},end:{line:161,column:22}},65:{start:{line:162,column:4},end:{line:162,column:30}},66:{start:{line:164,column:16},end:{line:168,column:3}},67:{start:{line:165,column:4},end:{line:167,column:7}},68:{start:{line:170,column:14},end:{line:170,column:26}},69:{start:{line:171,column:25},end:{line:182,column:6}},70:{start:{line:172,column:6},end:{line:181,column:8}},71:{start:{line:184,column:4},end:{line:189,column:5}},72:{start:{line:185,column:6},end:{line:188,column:11}},73:{start:{line:187,column:61},end:{line:187,column:78}},74:{start:{line:190,column:4},end:{line:272,column:9}},75:{start:{line:196,column:30},end:{line:196,column:49}},76:{start:{line:221,column:146},end:{line:221,column:180}},77:{start:{line:268,column:27},end:{line:268,column:56}},78:{start:{line:275,column:18},end:{line:275,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:38,column:3}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:19,column:58}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:21},end:{line:46,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:15},end:{line:51,column:3}},line:47},4:{name:"(anonymous_4)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:27},end:{line:61,column:3}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:62,column:18},end:{line:62,column:19}},loc:{start:{line:62,column:32},end:{line:99,column:3}},line:62},6:{name:"(anonymous_6)",decl:{start:{line:68,column:12},end:{line:68,column:13}},loc:{start:{line:68,column:31},end:{line:70,column:5}},line:68},7:{name:"(anonymous_7)",decl:{start:{line:70,column:12},end:{line:70,column:13}},loc:{start:{line:70,column:22},end:{line:82,column:5}},line:70},8:{name:"(anonymous_8)",decl:{start:{line:82,column:13},end:{line:82,column:14}},loc:{start:{line:82,column:22},end:{line:90,column:5}},line:82},9:{name:"(anonymous_9)",decl:{start:{line:93,column:15},end:{line:93,column:16}},loc:{start:{line:93,column:26},end:{line:95,column:9}},line:93},10:{name:"(anonymous_10)",decl:{start:{line:100,column:16},end:{line:100,column:17}},loc:{start:{line:100,column:23},end:{line:103,column:3}},line:100},11:{name:"(anonymous_11)",decl:{start:{line:104,column:15},end:{line:104,column:16}},loc:{start:{line:104,column:27},end:{line:131,column:3}},line:104},12:{name:"(anonymous_12)",decl:{start:{line:134,column:18},end:{line:134,column:19}},loc:{start:{line:134,column:29},end:{line:156,column:3}},line:134},13:{name:"(anonymous_13)",decl:{start:{line:141,column:20},end:{line:141,column:21}},loc:{start:{line:141,column:27},end:{line:154,column:5}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:155,column:21},end:{line:155,column:22}},loc:{start:{line:155,column:28},end:{line:155,column:49}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:157,column:2},end:{line:157,column:3}},loc:{start:{line:157,column:17},end:{line:163,column:3}},line:157},16:{name:"(anonymous_16)",decl:{start:{line:164,column:16},end:{line:164,column:17}},loc:{start:{line:164,column:25},end:{line:168,column:3}},line:164},17:{name:"(anonymous_17)",decl:{start:{line:169,column:2},end:{line:169,column:3}},loc:{start:{line:169,column:11},end:{line:273,column:3}},line:169},18:{name:"(anonymous_18)",decl:{start:{line:171,column:42},end:{line:171,column:43}},loc:{start:{line:171,column:54},end:{line:182,column:5}},line:171},19:{name:"(anonymous_19)",decl:{start:{line:187,column:55},end:{line:187,column:56}},loc:{start:{line:187,column:61},end:{line:187,column:78}},line:187},20:{name:"(anonymous_20)",decl:{start:{line:196,column:24},end:{line:196,column:25}},loc:{start:{line:196,column:30},end:{line:196,column:49}},line:196},21:{name:"(anonymous_21)",decl:{start:{line:221,column:139},end:{line:221,column:140}},loc:{start:{line:221,column:146},end:{line:221,column:180}},line:221},22:{name:"(anonymous_22)",decl:{start:{line:268,column:20},end:{line:268,column:21}},loc:{start:{line:268,column:27},end:{line:268,column:56}},line:268}},branchMap:{0:{loc:{start:{line:53,column:4},end:{line:53,column:31}},type:"if",locations:[{start:{line:53,column:4},end:{line:53,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},1:{loc:{start:{line:54,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:60,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},2:{loc:{start:{line:71,column:6},end:{line:73,column:7}},type:"if",locations:[{start:{line:71,column:6},end:{line:73,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71},3:{loc:{start:{line:135,column:4},end:{line:135,column:23}},type:"if",locations:[{start:{line:135,column:4},end:{line:135,column:23}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:135},4:{loc:{start:{line:136,column:4},end:{line:136,column:35}},type:"if",locations:[{start:{line:136,column:4},end:{line:136,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:136},5:{loc:{start:{line:184,column:4},end:{line:189,column:5}},type:"if",locations:[{start:{line:184,column:4},end:{line:189,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:184},6:{loc:{start:{line:203,column:53},end:{line:222,column:18}},type:"cond-expr",locations:[{start:{line:203,column:119},end:{line:215,column:15}},{start:{line:215,column:34},end:{line:222,column:18}}],line:203}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx"],names:["style"],mappings:"AA4BQ,SACE,KADF;AA5BR,OAAO,WAA+B;AACtC,SAAQ,oBAAmB;AAC3B,SAAQ,0BAAyB;AACjC,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,kBAAkB;AACzB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AAErB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AASzB,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,yBACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,cAAY,KAAK,MAAM;AAAA,QACvB,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,GAAG;AAAA,QAEjD;AAAA,+BAAC,SAAI,WAAU,gCACb;AAAA,gCAAC,SAAK,eAAK,MAAM,OAAM;AAAA,YACvB,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,sBAAmB;AAAA,aACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO;AAAA,gBACL,iBAAiB,OAAO,KAAK,MAAM,YAAY;AAAA,cACjD;AAAA;AAAA,UACD;AAAA;AAAA;AAAA,IACH,GACF;AAAA,EACF;AACF;AAgBA,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,aAAa;AACX,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,GAAU;AAE9B,QAAG,EAAG,GAAE,gBAAgB;AAExB,QAAG,KAAK,MAAM,eAAe;AAC3B,WAAK,MAAM,cAAc,MAAM;AAC/B,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,aAAqB;AACpC,SAAK,WAAW;AAEhB,QAAI,WAAoB;AAExB,UAAM,UAAU;AAAA,MACd,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,UAAG,UAAU;AACX;AAAA,MACF;AAEA,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAED,YAAM,WAAW,MAAM,oBAAoB,IAAI;AAC/C,cAAQ,IAAI,iBAAiB,SAAS,EAAE;AACxC,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB,CAAC,EACA,MAAM,CAAC,QAAQ;AACd,WAAK,SAAS;AAAA,QACZ,OAAO,oBAAoB,QAAQ;AAAA,QACnC,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AACD,cAAQ,MAAM,GAAG;AACjB,cAAQ,KAAK,gCAAgC,QAAQ;AAAA,IACvD,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,eAAe;AAAA,QACb,OAAO,WAAW;AAChB,qBAAW;AAAA,QACb;AAAA,MACF;AAAA,MACA,kBAAkB;AAAA,IACpB,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,MAAkC;AAC/C,MAAE,eAAe;AACjB,SAAK,cAAc,KAAK,MAAM,QAAQ;AAAA,EACxC;AAAA,EAEA,aAAa,YAAY;AACvB,SAAK,WAAW;AAEhB,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAE,oBAAoB,CAAC,OAAO,EAAE;AAAA,QAC1C;AAAA,MACF;AAAA,MACA,UAAU;AAAA,IACZ;AAEA,UAAM,CAAC,UAAU,IAAI,MAAM,OAAO,mBAAmB,UAAU;AAC/D,UAAM,OAAO,MAAM,WAAW,QAAQ;AACtC,UAAM,UAAU,MAAM,KAAK,KAAK;AAEhC,QAAI;AACJ,QAAI;AACF,iBAAW,KAAK,MAAM,OAAO;AAAA,IAC/B,SAAS,KAAK;AACZ,WAAK,SAAS;AAAA,QACZ,OAAQ,IAAc,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,eAAW,MAAM,oBAAoB,QAAQ;AAE7C,SAAK,MAAM,YAAY,UAAU,UAAU;AAC3C,SAAK,aAAa;AAClB,WAAO;AAAA,EACT;AAAA;AAAA;AAAA,EAIA,gBAAgB,CAAC,UAA2B;AAC1C,QAAI,CAAC,MAAO;AACZ,QAAI,MAAM,WAAW,EAAG;AACxB,UAAM,OAAO,MAAM,CAAC;AACpB,UAAM,SAAS,IAAI,WAAW;AAC9B,SAAK,WAAW;AAEhB,WAAO,WAAW,MAAM,OAAO;AAC/B,WAAO,SAAS,OAAK;AACnB,UAAI;AACJ,UAAI;AACF,mBAAW,KAAK,MAAM,EAAE,QAAQ,MAAgB;AAAA,MAClD,SACM,KAAK;AACT,aAAK,SAAS;AAAA,UACZ,OAAQ,IAAc,SAAS;AAAA,QACjC,CAAC;AACD;AAAA,MACF;AACA,iBAAW,MAAM,oBAAoB,QAAQ;AAC7C,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB;AACA,WAAO,UAAU,OAAK,QAAQ,IAAI,EAAE,MAAM;AAAA,EAC5C;AAAA,EAEA,eAAe;AACb,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AACD,SAAK,WAAW;AAChB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,cAAc,CAAC,QAAgB;AAC7B,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,eAAe,aAAa,IAAI,CAAAA,WAAS;AAC7C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,KAAKA,OAAM;AAAA,UACX,OAAOA,OAAM;AAAA,UACb,cAAcA,OAAM;AAAA,UACpB,UAAU,KAAK;AAAA;AAAA,QAJVA,OAAM;AAAA,MAKb;AAAA,IACF,CAAC;AAED,QAAI;AACJ,QAAG,KAAK,MAAM,OAAO;AACnB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ,oBAAC,OAAE,MAAK,KAAI,SAAS,MAAM,KAAK,WAAW,GAAG,WAAU,8BAA6B,eAAC;AAAA,SACxF;AAAA,IAEJ;AAEA,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,eAAY;AAAA,UACZ,QAAQ,KAAK,MAAM;AAAA,UACnB,cAAc,MAAM,KAAK,aAAa;AAAA,UACtC,OAAO,EAAE,YAAY;AAAA,UAEpB;AAAA;AAAA,YACD,qBAAC,aAAQ,WAAU,0BACjB;AAAA,kCAAC,QAAI,YAAE,kBAAkB,GAAE;AAAA,cAC3B,oBAAC,OAAG,YAAE,6CAA6C,GAAE;AAAA,cACrD,oBAAC,SACE,iBAAO,OAAO,uBAAuB,aACpC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,WAAU;AAAA,kBACV,SAAS,KAAK;AAAA,kBAAY;AAAA,wCAAC,gBAAY;AAAA,oBAAE;AAAA,oBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,cAC3D,IAEA,qBAAC,WACC;AAAA,qCAAC,OAAE,WAAU,0CAAyC,cAAY,EAAE,YAAY,GAAG;AAAA,sCAAC,gBAAa;AAAA,kBAAE;AAAA,kBAAE,EAAE,YAAY;AAAA,mBAAE;AAAA,gBACrH,oBAAC,WAAM,eAAY,yBAAwB,MAAK,QAAO,OAAO,EAAE,SAAS,OAAO,GAAG,UAAU,CAAC,MAAM,KAAK,cAAc,EAAE,OAAO,KAAK,GAAG;AAAA,iBAC1I,GAEJ;AAAA,eACF;AAAA,YAEA,oBAAC,aAAQ,WAAU,0BACjB,+BAAC,UAAK,UAAU,KAAK,aACnB;AAAA,kCAAC,QAAI,YAAE,eAAe,GAAE;AAAA,cACxB,oBAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,gBACkC,oBAAC,OAAE,MAAK,2BAA0B,QAAO,UAAS,KAAI,uBAAsB,0BAAY;AAAA,gBAAI;AAAA,iBAC3I,GACF;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,cAAY,EAAE,WAAW;AAAA,kBACzB,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,SAAS,EAAE,cAAc;AAAA,kBACzB,OAAO,KAAK,MAAM;AAAA,kBAClB,SAAS,KAAK;AAAA,kBACd,UAAU,KAAK;AAAA;AAAA,cACjB;AAAA,cACA,oBAAC,SACC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,UAAU,KAAK,MAAM,SAAS,SAAS;AAAA,kBACxC;AAAA;AAAA,cAAa,GAChB;AAAA,eACF,GACF;AAAA,YAEA,qBAAC,aAAQ,WAAU,yDACjB;AAAA,kCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,cACzB,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,cACA,oBAAC,SAAI,WAAU,oCACZ,wBACH;AAAA,eACF;AAAA;AAAA;AAAA,MACF;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,CAAC,CAAC,KAAK,MAAM;AAAA,UACrB,OAAO,EAAE,eAAe;AAAA,UACxB,UAAU,CAAC,MAAa,KAAK,sBAAsB,CAAC;AAAA,UACpD,SAAS,EAAE,2BAA2B,EAAE,YAAY,KAAK,MAAM,iBAAiB,CAAC;AAAA;AAAA,MACnF;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f3a6249e96d42fc8e59bc18fb123f3ec8de2b220"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Mn=function(){return s},s}Mn();class MPe extends In.Component{render(){return Mn().f[0]++,Mn().s[0]++,oe.jsx("div",{className:"maputnik-public-style",children:oe.jsxs(Ks,{className:"maputnik-public-style-button","aria-label":this.props.title,onClick:()=>(Mn().f[1]++,Mn().s[1]++,this.props.onSelect(this.props.url)),children:[oe.jsxs("div",{className:"maputnik-public-style-header",children:[oe.jsx("div",{children:this.props.title}),oe.jsx("span",{className:"maputnik-space"}),oe.jsx(KX,{})]}),oe.jsx("div",{className:"maputnik-public-style-thumbnail",style:{backgroundImage:`url(${this.props.thumbnailUrl})`}})]})})}}class wPe extends In.Component{constructor(e){Mn().f[2]++,Mn().s[2]++,super(e),Mn().s[3]++,this.state={styleUrl:""}}clearError(){Mn().f[3]++,Mn().s[4]++,this.setState({error:null})}onCancelActiveRequest(e){Mn().f[4]++,Mn().s[5]++,e?(Mn().b[0][0]++,Mn().s[6]++,e.stopPropagation()):Mn().b[0][1]++,Mn().s[7]++,this.state.activeRequest?(Mn().b[1][0]++,Mn().s[8]++,this.state.activeRequest.abort(),Mn().s[9]++,this.setState({activeRequest:null,activeRequestUrl:null})):Mn().b[1][1]++}onStyleSelect=(Mn().s[10]++,e=>{Mn().f[5]++,Mn().s[11]++,this.clearError();let t=(Mn().s[12]++,!1);Mn().s[13]++,fetch(e,{mode:"cors",credentials:"same-origin"}).then(function(i){return Mn().f[6]++,Mn().s[14]++,i.json()}).then(i=>{if(Mn().f[7]++,Mn().s[15]++,t){Mn().b[2][0]++,Mn().s[16]++;return}else Mn().b[2][1]++;Mn().s[17]++,this.setState({activeRequest:null,activeRequestUrl:null});const r=(Mn().s[18]++,Id.ensureStyleValidity(i));Mn().s[19]++,console.log("Loaded style ",r.id),Mn().s[20]++,this.props.onStyleOpen(r),Mn().s[21]++,this.onOpenToggle()}).catch(i=>{Mn().f[8]++,Mn().s[22]++,this.setState({error:`Failed to load: '${e}'`,activeRequest:null,activeRequestUrl:null}),Mn().s[23]++,console.error(i),Mn().s[24]++,console.warn("Could not open the style URL",e)}),Mn().s[25]++,this.setState({activeRequest:{abort:function(){Mn().f[9]++,Mn().s[26]++,t=!0}},activeRequestUrl:e})});onSubmitUrl=(Mn().s[27]++,e=>{Mn().f[10]++,Mn().s[28]++,e.preventDefault(),Mn().s[29]++,this.onStyleSelect(this.state.styleUrl)});onOpenFile=(Mn().s[30]++,async()=>{Mn().f[11]++,Mn().s[31]++,this.clearError();const e=(Mn().s[32]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],multiple:!1}),[t]=(Mn().s[33]++,await window.showOpenFilePicker(e)),i=(Mn().s[34]++,await t.getFile()),r=(Mn().s[35]++,await i.text());let o;Mn().s[36]++;try{Mn().s[37]++,o=JSON.parse(r)}catch(s){Mn().s[38]++,this.setState({error:s.toString()}),Mn().s[39]++;return}return Mn().s[40]++,o=Id.ensureStyleValidity(o),Mn().s[41]++,this.props.onStyleOpen(o,t),Mn().s[42]++,this.onOpenToggle(),Mn().s[43]++,i});onFileChanged=(Mn().s[44]++,e=>{if(Mn().f[12]++,Mn().s[45]++,e)Mn().b[3][1]++;else{Mn().b[3][0]++,Mn().s[46]++;return}if(Mn().s[47]++,e.length===0){Mn().b[4][0]++,Mn().s[48]++;return}else Mn().b[4][1]++;const t=(Mn().s[49]++,e[0]),i=(Mn().s[50]++,new FileReader);Mn().s[51]++,this.clearError(),Mn().s[52]++,i.readAsText(t,"UTF-8"),Mn().s[53]++,i.onload=r=>{Mn().f[13]++;let o;Mn().s[54]++;try{Mn().s[55]++,o=JSON.parse(r.target?.result)}catch(s){Mn().s[56]++,this.setState({error:s.toString()}),Mn().s[57]++;return}Mn().s[58]++,o=Id.ensureStyleValidity(o),Mn().s[59]++,this.props.onStyleOpen(o),Mn().s[60]++,this.onOpenToggle()},Mn().s[61]++,i.onerror=r=>(Mn().f[14]++,Mn().s[62]++,console.log(r.target))});onOpenToggle(){Mn().f[15]++,Mn().s[63]++,this.setState({styleUrl:""}),Mn().s[64]++,this.clearError(),Mn().s[65]++,this.props.onOpenToggle()}onChangeUrl=(Mn().s[66]++,e=>{Mn().f[16]++,Mn().s[67]++,this.setState({styleUrl:e})});render(){Mn().f[17]++;const e=(Mn().s[68]++,this.props.t),t=(Mn().s[69]++,Xse.map(r=>(Mn().f[18]++,Mn().s[70]++,oe.jsx(MPe,{url:r.url,title:r.title,thumbnailUrl:r.thumbnail,onSelect:this.onStyleSelect},r.id))));let i;return Mn().s[71]++,this.state.error?(Mn().b[5][0]++,Mn().s[72]++,i=oe.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,oe.jsx("a",{href:"#",onClick:()=>(Mn().f[19]++,Mn().s[73]++,this.clearError()),className:"maputnik-modal-error-close",children:""})]})):Mn().b[5][1]++,Mn().s[74]++,oe.jsxs("div",{children:[oe.jsxs(V1,{"data-wd-key":"modal:open",isOpen:this.props.isOpen,onOpenToggle:()=>(Mn().f[20]++,Mn().s[75]++,this.onOpenToggle()),title:e("Open Style"),children:[i,oe.jsxs("section",{className:"maputnik-modal-section",children:[oe.jsx("h1",{children:e("Open local Style")}),oe.jsx("p",{children:e("Open a local JSON style from your computer.")}),oe.jsx("div",{children:typeof window.showOpenFilePicker=="function"?(Mn().b[6][0]++,oe.jsxs(Ks,{"data-wd-key":"modal:open.file.button",className:"maputnik-big-button",onClick:this.onOpenFile,children:[oe.jsx(Wz,{})," ",e("Open Style")]})):(Mn().b[6][1]++,oe.jsxs("label",{children:[oe.jsxs("a",{className:"maputnik-button maputnik-upload-button","aria-label":e("Open Style"),children:[oe.jsx(Wz,{})," ",e("Open Style")]}),oe.jsx("input",{"data-wd-key":"modal:open.file.input",type:"file",style:{display:"none"},onChange:r=>(Mn().f[21]++,Mn().s[76]++,this.onFileChanged(r.target.files))})]}))})]}),oe.jsx("section",{className:"maputnik-modal-section",children:oe.jsxs("form",{onSubmit:this.onSubmitUrl,children:[oe.jsx("h1",{children:e("Load from URL")}),oe.jsx("p",{children:oe.jsxs(hC,{t:e,children:["Load from a URL. Note that the URL must have ",oe.jsx("a",{href:"https://enable-cors.org",target:"_blank",rel:"noopener noreferrer",children:"CORS enabled"}),"."]})}),oe.jsx(uF,{"aria-label":e("Style URL"),"data-wd-key":"modal:open.url.input",type:"text",className:"maputnik-input",default:e("Enter URL..."),value:this.state.styleUrl,onInput:this.onChangeUrl,onChange:this.onChangeUrl}),oe.jsx("div",{children:oe.jsx(Ks,{"data-wd-key":"modal:open.url.button",type:"submit",className:"maputnik-big-button",disabled:this.state.styleUrl.length<1,children:"Load from URL"})})]})}),oe.jsxs("section",{className:"maputnik-modal-section maputnik-modal-section--shrink",children:[oe.jsx("h1",{children:e("Gallery Styles")}),oe.jsx("p",{children:e("Open one of the publicly available styles to start from.")}),oe.jsx("div",{className:"maputnik-style-gallery-container",children:t})]})]}),oe.jsx(xPe,{isOpen:!!this.state.activeRequest,title:e("Loading style"),onCancel:r=>(Mn().f[22]++,Mn().s[77]++,this.onCancelActiveRequest(r)),message:e("Loading: {{requestUrl}}",{requestUrl:this.state.activeRequestUrl})})]})}}const SPe=(Mn().s[78]++,Do()(wPe));function Ap(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx",e="56c3984d0ef3534e088a574117d91f5af2db0afb",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:17},end:{line:41,column:5}},2:{start:{line:42,column:25},end:{line:115,column:5}},3:{start:{line:116,column:4},end:{line:145,column:6}},4:{start:{line:130,column:12},end:{line:133,column:22}},5:{start:{line:137,column:12},end:{line:141,column:22}},6:{start:{line:148,column:23},end:{line:148,column:64}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:146,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:129,column:57},end:{line:129,column:58}},loc:{start:{line:129,column:72},end:{line:134,column:11}},line:129},2:{name:"(anonymous_2)",decl:{start:{line:136,column:65},end:{line:136,column:66}},loc:{start:{line:136,column:80},end:{line:142,column:11}},line:136}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx"],names:[],mappings:"AAiBa,SAwCA,UAxCA,KAwCA,YAxCA;AAjBb,OAAO,WAAW;AAClB,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,WAAW;AASlB,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,OAAO;AAAA,MACX;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,YAAY;AAAA,MACtB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,cAAc;AAAA,MACxB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,oBAAoB;AAAA,MAC9B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,sBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,WAAW;AAAA,MACrB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,aAAa;AAAA,MACvB;AAAA,IACF;AAGA,UAAM,eAAe;AAAA,MACnB;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,gBAAE;AAAA,QACZ,MAAM,EAAE,uBAAwB;AAAA,MAClC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,mBAAK;AAAA,QACf,MAAM,EAAE,0BAA2B;AAAA,MACrC;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,mBAAK;AAAA,WAAM;AAAA,QAC1C,MAAM,EAAE,sCAAuC;AAAA,MACjD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,sCAAsC;AAAA,MAChD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,gBAAE;AAAA,WAAM;AAAA,QACvC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,IACF;AAGA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QAEpB,+BAAC,aAAQ,WAAU,mDACjB;AAAA,8BAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAK,iBAAG;AAAA,YAAO;AAAA,aACxB,GACF;AAAA,UACA,oBAAC,QACE,eAAK,IAAI,CAAC,MAAM,QAAQ;AACvB,mBAAO,qBAAC,SAAc,WAAU,sCAC9B;AAAA,kCAAC,QAAmB,eAAK,OAAhB,OAAK,GAAe;AAAA,cAC7B,oBAAC,QAAmB,eAAK,QAAhB,OAAK,GAAgB;AAAA,iBAFf,GAGjB;AAAA,UACF,CAAC,GACH;AAAA,UACA,oBAAC,OAAG,YAAE,8DAA8D,GAAE;AAAA,UACtE,oBAAC,QACE,uBAAa,IAAI,CAAC,MAAM,QAAQ;AAC/B,mBAAO,qBAAC,QACN;AAAA,kCAAC,UAAM,eAAK,KAAI;AAAA,cAAO;AAAA,cAAE,KAAK;AAAA,iBADhB,GAEhB;AAAA,UACF,CAAC,GACH;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,iBAAiB,gBAAgB,EAAE,sBAAsB;AAC/D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"56c3984d0ef3534e088a574117d91f5af2db0afb"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ap=function(){return s},s}Ap();class EPe extends In.Component{render(){Ap().f[0]++;const e=(Ap().s[0]++,this.props.t),t=(Ap().s[1]++,[{key:oe.jsx("kbd",{children:"?"}),text:e("Shortcuts menu")},{key:oe.jsx("kbd",{children:"o"}),text:e("Open modal")},{key:oe.jsx("kbd",{children:"e"}),text:e("Export modal")},{key:oe.jsx("kbd",{children:"d"}),text:e("Data Sources modal")},{key:oe.jsx("kbd",{children:"s"}),text:e("Style Settings modal")},{key:oe.jsx("kbd",{children:"i"}),text:e("Toggle inspect")},{key:oe.jsx("kbd",{children:"m"}),text:e("Focus map")},{key:oe.jsx("kbd",{children:"!"}),text:e("Debug modal")}]),i=(Ap().s[2]++,[{key:oe.jsx("kbd",{children:"+"}),text:e("Increase the zoom level by 1.")},{key:oe.jsxs(oe.Fragment,{children:[oe.jsx("kbd",{children:"Shift"})," + ",oe.jsx("kbd",{children:"+"})]}),text:e("Increase the zoom level by 2.")},{key:oe.jsx("kbd",{children:"-"}),text:e("Decrease the zoom level by 1.")},{key:oe.jsxs(oe.Fragment,{children:[oe.jsx("kbd",{children:"Shift"})," + ",oe.jsx("kbd",{children:"-"})]}),text:e("Decrease the zoom level by 2.")},{key:oe.jsx("kbd",{children:"Up"}),text:e("Pan up by 100 pixels.")},{key:oe.jsx("kbd",{children:"Down"}),text:e("Pan down by 100 pixels.")},{key:oe.jsx("kbd",{children:"Left"}),text:e("Pan left by 100 pixels.")},{key:oe.jsx("kbd",{children:"Right"}),text:e("Pan right by 100 pixels.")},{key:oe.jsxs(oe.Fragment,{children:[oe.jsx("kbd",{children:"Shift"})," + ",oe.jsx("kbd",{children:"Right"})]}),text:e("Increase the rotation by 15 degrees.")},{key:oe.jsxs(oe.Fragment,{children:[oe.jsx("kbd",{children:"Shift"})," + ",oe.jsx("kbd",{children:"Left"})]}),text:e("Decrease the rotation by 15 degrees.")},{key:oe.jsxs(oe.Fragment,{children:[oe.jsx("kbd",{children:"Shift"})," + ",oe.jsx("kbd",{children:"Up"})]}),text:e("Increase the pitch by 10 degrees.")},{key:oe.jsxs(oe.Fragment,{children:[oe.jsx("kbd",{children:"Shift"})," + ",oe.jsx("kbd",{children:"Down"})]}),text:e("Decrease the pitch by 10 degrees.")}]);return Ap().s[3]++,oe.jsx(V1,{"data-wd-key":"modal:shortcuts",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Shortcuts"),children:oe.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[oe.jsx("p",{children:oe.jsxs(hC,{t:e,children:["Press ",oe.jsx("code",{children:"ESC"})," to lose focus of any active elements, then press one of:"]})}),oe.jsx("dl",{children:t.map((r,o)=>(Ap().f[1]++,Ap().s[4]++,oe.jsxs("div",{className:"maputnik-modal-shortcuts__shortcut",children:[oe.jsx("dt",{children:r.key},"dt"+o),oe.jsx("dd",{children:r.text},"dd"+o)]},o)))}),oe.jsx("p",{children:e("If the Map is in focused you can use the following shortcuts")}),oe.jsx("ul",{children:i.map((r,o)=>(Ap().f[2]++,Ap().s[5]++,oe.jsxs("li",{children:[oe.jsx("span",{children:r.key})," ",r.text]},o)))})]})})}}const BPe=(Ap().s[6]++,Do()(EPe));function mu(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx",e="c09f0bfde95742e69af0d091b2de9baefbfef43a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx",statementMap:{0:{start:{line:7,column:27},end:{line:7,column:37}},1:{start:{line:8,column:20},end:{line:8,column:48}},2:{start:{line:9,column:19},end:{line:9,column:49}},3:{start:{line:10,column:19},end:{line:10,column:49}},4:{start:{line:11,column:4},end:{line:53,column:6}},5:{start:{line:22,column:14},end:{line:26,column:27}},6:{start:{line:23,column:96},end:{line:23,column:153}},7:{start:{line:29,column:14},end:{line:33,column:27}},8:{start:{line:30,column:96},end:{line:30,column:153}},9:{start:{line:56,column:19},end:{line:56,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:54,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:21,column:140},end:{line:21,column:141}},loc:{start:{line:21,column:156},end:{line:27,column:13}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:89},end:{line:23,column:90}},loc:{start:{line:23,column:96},end:{line:23,column:153}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:28,column:136},end:{line:28,column:137}},loc:{start:{line:28,column:152},end:{line:34,column:13}},line:28},4:{name:"(anonymous_4)",decl:{start:{line:30,column:89},end:{line:30,column:90}},loc:{start:{line:30,column:96},end:{line:30,column:153}},line:30}},branchMap:{0:{loc:{start:{line:21,column:12},end:{line:27,column:17}},type:"binary-expr",locations:[{start:{line:21,column:12},end:{line:21,column:44}},{start:{line:21,column:64},end:{line:27,column:17}}],line:21},1:{loc:{start:{line:28,column:12},end:{line:34,column:17}},type:"binary-expr",locations:[{start:{line:28,column:12},end:{line:28,column:40}},{start:{line:28,column:60},end:{line:34,column:17}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx"],names:[],mappings:"AAuCQ,cAKQ,YALR;AAvCR,OAAO,WAAW;AAClB,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,WAAW;AAqBlB,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAS;AACP,UAAM,EAAC,GAAG,QAAO,IAAI,KAAK;AAE1B,UAAM,UAAU,KAAK,MAAM,QAAQ,IAAI,IAAE;AACzC,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAC9C,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAE9C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,OAAO;AAAA,QAEhB;AAAA,+BAAC,aAAQ,WAAU,mDACjB;AAAA,gCAAC,QAAI,YAAE,SAAS,GAAE;AAAA,YACjB,KAAK,MAAM,aAAa,YACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,YAED,KAAK,MAAM,aAAa,QACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,aAEJ;AAAA,UACA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,OAAO,GAAE;AAAA,YAChB,oBAAC,OACC,+BAAC,SAAM,GACL;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,QAAO;AAAA,kBACP,KAAI;AAAA,kBACJ,MAAM,sCAAsC,OAAO,IAAI,MAAM,IAAI,MAAM;AAAA,kBACxE;AAAA;AAAA,cAED;AAAA,cAAI;AAAA,eACN,GACF;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c09f0bfde95742e69af0d091b2de9baefbfef43a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return mu=function(){return s},s}mu();class OPe extends In.Component{render(){mu().f[0]++;const{t:e,mapView:t}=(mu().s[0]++,this.props),i=(mu().s[1]++,Math.round(t.zoom)+1),r=(mu().s[2]++,+t.center.lng.toFixed(5)),o=(mu().s[3]++,+t.center.lat.toFixed(5));return mu().s[4]++,oe.jsxs(V1,{"data-wd-key":"modal:debug",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Debug"),children:[oe.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[oe.jsx("h1",{children:e("Options")}),(mu().b[0][0]++,this.props.renderer==="mlgljs"&&(mu().b[0][1]++,oe.jsx("ul",{children:Object.entries(this.props.maplibreGlDebugOptions).map(([s,a])=>(mu().f[1]++,mu().s[5]++,oe.jsx("li",{children:oe.jsxs("label",{children:[oe.jsx("input",{type:"checkbox",checked:a,onChange:c=>(mu().f[2]++,mu().s[6]++,this.props.onChangeMaplibreGlDebug(s,c.target.checked))})," ",s]})},s)))}))),(mu().b[1][0]++,this.props.renderer==="ol"&&(mu().b[1][1]++,oe.jsx("ul",{children:Object.entries(this.props.openlayersDebugOptions).map(([s,a])=>(mu().f[3]++,mu().s[7]++,oe.jsx("li",{children:oe.jsxs("label",{children:[oe.jsx("input",{type:"checkbox",checked:a,onChange:c=>(mu().f[4]++,mu().s[8]++,this.props.onChangeOpenlayersDebug(s,c.target.checked))})," ",s]})},s)))})))]}),oe.jsxs("section",{className:"maputnik-modal-section",children:[oe.jsx("h1",{children:e("Links")}),oe.jsx("p",{children:oe.jsxs(hC,{t:e,children:[oe.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:`https://www.openstreetmap.org/#map=${i}/${o}/${r}`,children:"Open in OSM"}),". Opens the current view on openstreetmap.org"]})})]})]})}}const IPe=(mu().s[9]++,Do()(OPe));function vi(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx",e="681e0b3080d4effb89e735abebd0878f77572d27",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx",statementMap:{0:{start:{line:10,column:33},end:{line:116,column:1}},1:{start:{line:11,column:34},end:{line:18,column:3}},2:{start:{line:12,column:18},end:{line:12,column:32}},3:{start:{line:13,column:24},end:{line:13,column:41}},4:{start:{line:14,column:4},end:{line:17,column:8}},5:{start:{line:14,column:62},end:{line:17,column:5}},6:{start:{line:19,column:34},end:{line:31,column:3}},7:{start:{line:20,column:18},end:{line:20,column:39}},8:{start:{line:21,column:24},end:{line:21,column:26}},9:{start:{line:22,column:4},end:{line:28,column:5}},10:{start:{line:23,column:6},end:{line:27,column:7}},11:{start:{line:24,column:8},end:{line:26,column:10}},12:{start:{line:29,column:4},end:{line:29,column:77}},13:{start:{line:30,column:4},end:{line:30,column:32}},14:{start:{line:32,column:24},end:{line:40,column:3}},15:{start:{line:33,column:23},end:{line:33,column:48}},16:{start:{line:34,column:16},end:{line:34,column:17}},17:{start:{line:35,column:4},end:{line:37,column:5}},18:{start:{line:35,column:34},end:{line:35,column:57}},19:{start:{line:36,column:6},end:{line:36,column:14}},20:{start:{line:38,column:4},end:{line:38,column:60}},21:{start:{line:39,column:4},end:{line:39,column:40}},22:{start:{line:41,column:27},end:{line:45,column:3}},23:{start:{line:42,column:23},end:{line:42,column:48}},24:{start:{line:43,column:4},end:{line:43,column:32}},25:{start:{line:44,column:4},end:{line:44,column:40}},26:{start:{line:46,column:30},end:{line:50,column:3}},27:{start:{line:47,column:23},end:{line:47,column:48}},28:{start:{line:48,column:4},end:{line:48,column:41}},29:{start:{line:49,column:4},end:{line:49,column:40}},30:{start:{line:51,column:32},end:{line:55,column:3}},31:{start:{line:52,column:23},end:{line:52,column:48}},32:{start:{line:53,column:4},end:{line:53,column:45}},33:{start:{line:54,column:4},end:{line:54,column:40}},34:{start:{line:56,column:20},end:{line:56,column:45}},35:{start:{line:57,column:25},end:{line:85,column:14}},36:{start:{line:57,column:76},end:{line:85,column:13}},37:{start:{line:63,column:29},end:{line:63,column:68}},38:{start:{line:72,column:29},end:{line:72,column:70}},39:{start:{line:79,column:23},end:{line:79,column:46}},40:{start:{line:86,column:2},end:{line:115,column:4}},41:{start:{line:117,column:25},end:{line:117,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:33},end:{line:10,column:34}},loc:{start:{line:10,column:44},end:{line:116,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:11,column:34},end:{line:11,column:35}},loc:{start:{line:11,column:40},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:14,column:43},end:{line:14,column:44}},loc:{start:{line:14,column:62},end:{line:17,column:5}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:19,column:34},end:{line:19,column:35}},loc:{start:{line:19,column:50},end:{line:31,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:32,column:24},end:{line:32,column:25}},loc:{start:{line:32,column:30},end:{line:40,column:3}},line:32},5:{name:"(anonymous_5)",decl:{start:{line:35,column:27},end:{line:35,column:28}},loc:{start:{line:35,column:34},end:{line:35,column:57}},line:35},6:{name:"(anonymous_6)",decl:{start:{line:41,column:27},end:{line:41,column:28}},loc:{start:{line:41,column:38},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:30},end:{line:46,column:31}},loc:{start:{line:46,column:49},end:{line:50,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:51,column:32},end:{line:51,column:33}},loc:{start:{line:51,column:53},end:{line:55,column:3}},line:51},9:{name:"(anonymous_9)",decl:{start:{line:57,column:39},end:{line:57,column:40}},loc:{start:{line:57,column:76},end:{line:85,column:13}},line:57},10:{name:"(anonymous_10)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:29},end:{line:63,column:68}},line:63},11:{name:"(anonymous_11)",decl:{start:{line:72,column:18},end:{line:72,column:19}},loc:{start:{line:72,column:29},end:{line:72,column:70}},line:72},12:{name:"(anonymous_12)",decl:{start:{line:79,column:17},end:{line:79,column:18}},loc:{start:{line:79,column:23},end:{line:79,column:46}},line:79}},branchMap:{0:{loc:{start:{line:13,column:24},end:{line:13,column:41}},type:"binary-expr",locations:[{start:{line:13,column:24},end:{line:13,column:35}},{start:{line:13,column:39},end:{line:13,column:41}}],line:13},1:{loc:{start:{line:23,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:23,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},2:{loc:{start:{line:29,column:18},end:{line:29,column:76}},type:"cond-expr",locations:[{start:{line:29,column:56},end:{line:29,column:67}},{start:{line:29,column:70},end:{line:29,column:76}}],line:29},3:{loc:{start:{line:48,column:28},end:{line:48,column:40}},type:"binary-expr",locations:[{start:{line:48,column:28},end:{line:48,column:34}},{start:{line:48,column:38},end:{line:48,column:40}}],line:48},4:{loc:{start:{line:53,column:30},end:{line:53,column:44}},type:"binary-expr",locations:[{start:{line:53,column:30},end:{line:53,column:38}},{start:{line:53,column:42},end:{line:53,column:44}}],line:53},5:{loc:{start:{line:63,column:56},end:{line:63,column:67}},type:"binary-expr",locations:[{start:{line:63,column:56},end:{line:63,column:61}},{start:{line:63,column:65},end:{line:63,column:67}}],line:63},6:{loc:{start:{line:72,column:58},end:{line:72,column:69}},type:"binary-expr",locations:[{start:{line:72,column:58},end:{line:72,column:63}},{start:{line:72,column:67},end:{line:72,column:69}}],line:72},7:{loc:{start:{line:94,column:8},end:{line:97,column:12}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:30}},{start:{line:94,column:50},end:{line:97,column:12}}],line:94},8:{loc:{start:{line:98,column:8},end:{line:101,column:12}},type:"binary-expr",locations:[{start:{line:98,column:8},end:{line:98,column:28}},{start:{line:98,column:48},end:{line:101,column:12}}],line:98}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx"],names:["variables"],mappings:"AAsFI,SAEI,KAFJ,YAAA;AArFJ,SAAS,uBAA6C;AACtD,SAAS,gBAAgB;AACzB,OAAO,YAAY;AAEnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAAS,sBAAsB;AAG/B,OAAO,SAAS;AAchB,MAAM,2BAAoE,CAAC,UAAU;AACnF,QAAM,0BAA0B,MAA6B;AAC3D,UAAM,QAAQ,MAAM;AACpB,UAAM,cAAc,MAAM,SAAS,CAAC;AAEpC,WAAO,OAAO,QAAQ,WAAW,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,OAAO;AAAA,MACxD;AAAA,MACA,OAAO,MAAM;AAAA,IACf,EAAE;AAAA,EACJ;AAEA,QAAM,0BAA0B,CAACA,eAAqC;AACpE,UAAM,QAAQ,EAAE,GAAG,MAAM,SAAS;AAGlC,UAAM,cAAmD,CAAC;AAC1D,eAAW,YAAYA,YAAW;AAChC,UAAI,SAAS,IAAI,KAAK,MAAM,IAAI;AAC9B,oBAAY,SAAS,GAAG,IAAI;AAAA,UAC1B,SAAS,SAAS;AAAA,QACpB;AAAA,MACF;AAAA,IACF;AAEA,UAAM,QAAQ,OAAO,KAAK,WAAW,EAAE,SAAS,IAAI,cAAc;AAElE,UAAM,eAAe,KAAK;AAAA,EAC5B;AAEA,QAAM,gBAAgB,MAAM;AAC1B,UAAMA,aAAY,wBAAwB;AAC1C,QAAI,QAAQ;AACZ,WAAOA,WAAU,KAAK,CAAA,MAAK,EAAE,QAAQ,MAAM,KAAK,EAAE,GAAG;AACnD;AAAA,IACF;AACAA,eAAU,KAAK,EAAE,KAAK,MAAM,KAAK,IAAI,OAAO,QAAQ,CAAC;AACrD,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,mBAAmB,CAAC,UAAkB;AAC1C,UAAMA,aAAY,wBAAwB;AAC1CA,eAAU,OAAO,OAAO,CAAC;AACzB,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,sBAAsB,CAAC,OAAe,WAAmB;AAC7D,UAAMA,aAAY,wBAAwB;AAC1CA,eAAU,KAAK,EAAE,MAAM,UAAU;AACjC,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,wBAAwB,CAAC,OAAe,aAAqB;AACjE,UAAMA,aAAY,wBAAwB;AAE1CA,eAAU,KAAK,EAAE,QAAQ,YAAY;AACrC,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,YAAY,wBAAwB;AAE1C,QAAM,iBAAiB,UAAU,IAAI,CAAC,UAAU,+BAC7C,MAAA,EACC,UAAA;AAAA,IAAA,oBAAC,MAAA,EACC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,OAAO,MAAM,EAAE,KAAK;AAAA,QACpB,OAAO,SAAS;AAAA,QAChB,UAAU,CAAC,UAAU,oBAAoB,OAAO,SAAS,EAAE;AAAA,QAC3D,eAAa,+BAA+B;AAAA,MAAA;AAAA,IAC9C,EAAA,CACF;AAAA,wBACC,MAAA,EACC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,OAAO,MAAM,EAAE,OAAO;AAAA,QACtB,OAAO,SAAS;AAAA,QAChB,UAAU,CAAC,UAAU,sBAAsB,OAAO,SAAS,EAAE;AAAA,QAC7D,eAAa,iCAAiC;AAAA,MAAA;AAAA,IAChD,EAAA,CACF;AAAA,wBACC,MAAA,EAAG,OAAO,EAAE,eAAe,SAAQ,GAClC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,SAAS,MAAM,iBAAiB,KAAK;AAAA,QACrC,OAAO,MAAM,EAAE,iBAAiB;AAAA,QAChC,eAAY;AAAA,QAEZ,8BAAC,UAAA,CAAA,CAAS;AAAA,MAAA;AAAA,IACZ,EAAA,CACF;AAAA,EAAA,EAAA,GAzBO,KA0BT,CACD;AAED,SACE;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,eAAY;AAAA,MACZ,QAAQ,MAAM;AAAA,MACd,cAAc,MAAM;AAAA,MACpB,OAAO,MAAM,EAAE,wBAAwB;AAAA,MAGtC,UAAA;AAAA,QAAA,UAAU,WAAW,KAChB,qBAAC,OAAA,EACC,UAAA;AAAA,UAAA,oBAAC,KAAA,EAAG,UAAA,MAAM,EAAE,2FAA2F,EAAA,CAAE;AAAA,UACzG,oBAAC,OAAA,EAAc,WAAU,uBACvB,UAAA,oBAAC,KAAA,EAAI,WAAW,OAAO,MAAM,MAAA,CAAO,EAAA,GAD7B,KAET;AAAA,QAAA,EAAA,CACF;AAAA,QAEL,UAAU,SAAS,KACpB,qBAAC,SAAA,EACC,UAAA;AAAA,UAAA,oBAAC,SAAA,CAAA,CACD;AAAA,UACA,oBAAC,WACE,UAAA,eAAA,CACH;AAAA,QAAA,EAAA,CACF;AAAA,4BAEC,OAAA,EACC,UAAA;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,SAAS;AAAA,YACT,eAAY;AAAA,YAEZ,UAAA;AAAA,cAAA,oBAAC,gBAAA,CAAA,CAAe;AAAA,cACf,MAAM,EAAE,cAAc;AAAA,YAAA;AAAA,UAAA;AAAA,QACzB,EAAA,CACF;AAAA,MAAA;AAAA,IAAA;AAAA,EACF;AAEJ;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"681e0b3080d4effb89e735abebd0878f77572d27"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return vi=function(){return s},s}vi();vi().s[0]++;const TPe=n=>{vi().f[0]++,vi().s[1]++;const e=()=>{vi().f[1]++;const d=(vi().s[2]++,n.mapStyle),m=(vi().s[3]++,vi().b[0][0]++,d.state||(vi().b[0][1]++,{}));return vi().s[4]++,Object.entries(m).map(([v,M])=>(vi().f[2]++,vi().s[5]++,{key:v,value:M.default}))};vi().s[6]++;const t=d=>{vi().f[3]++;const m=(vi().s[7]++,{...n.mapStyle}),v=(vi().s[8]++,{});vi().s[9]++;for(const M of d)vi().s[10]++,M.key.trim()!==""?(vi().b[1][0]++,vi().s[11]++,v[M.key]={default:M.value}):vi().b[1][1]++;vi().s[12]++,m.state=Object.keys(v).length>0?(vi().b[2][0]++,v):(vi().b[2][1]++,void 0),vi().s[13]++,n.onStyleChanged(m)};vi().s[14]++;const i=()=>{vi().f[4]++;const d=(vi().s[15]++,e());let m=(vi().s[16]++,1);for(vi().s[17]++;d.find(v=>(vi().f[5]++,vi().s[18]++,v.key===`key${m}`));)vi().s[19]++,m++;vi().s[20]++,d.push({key:`key${m}`,value:"value"}),vi().s[21]++,t(d)};vi().s[22]++;const r=d=>{vi().f[6]++;const m=(vi().s[23]++,e());vi().s[24]++,m.splice(d,1),vi().s[25]++,t(m)};vi().s[26]++;const o=(d,m)=>{vi().f[7]++;const v=(vi().s[27]++,e());vi().s[28]++,v[d].key=(vi().b[3][0]++,m||(vi().b[3][1]++,"")),vi().s[29]++,t(v)};vi().s[30]++;const s=(d,m)=>{vi().f[8]++;const v=(vi().s[31]++,e());vi().s[32]++,v[d].value=(vi().b[4][0]++,m||(vi().b[4][1]++,"")),vi().s[33]++,t(v)},a=(vi().s[34]++,e()),c=(vi().s[35]++,a.map((d,m)=>(vi().f[9]++,vi().s[36]++,oe.jsxs("tr",{children:[oe.jsx("td",{children:oe.jsx(vd,{label:n.t("Key"),value:d.key,onChange:v=>(vi().f[10]++,vi().s[37]++,o(m,(vi().b[5][0]++,v||(vi().b[5][1]++,"")))),"data-wd-key":"global-state-variable-key:"+m})}),oe.jsx("td",{children:oe.jsx(vd,{label:n.t("Value"),value:d.value,onChange:v=>(vi().f[11]++,vi().s[38]++,s(m,(vi().b[6][0]++,v||(vi().b[6][1]++,"")))),"data-wd-key":"global-state-variable-value:"+m})}),oe.jsx("td",{style:{verticalAlign:"middle"},children:oe.jsx(Ks,{onClick:()=>(vi().f[12]++,vi().s[39]++,r(m)),title:n.t("Remove variable"),"data-wd-key":"global-state-remove-variable",children:oe.jsx(jC,{})})})]},m))));return vi().s[40]++,oe.jsxs(V1,{"data-wd-key":"modal:global-state",isOpen:n.isOpen,onOpenToggle:n.onOpenToggle,title:n.t("Global State Variables"),children:[(vi().b[7][0]++,a.length===0&&(vi().b[7][1]++,oe.jsxs("div",{children:[oe.jsx("p",{children:n.t("No global state variables defined. Add variables to create reusable values in your style.")}),oe.jsx("div",{className:"maputnik-doc-inline",children:oe.jsx(qB,{fieldSpec:Wr.$root.state})},"doc")]}))),(vi().b[8][0]++,a.length>0&&(vi().b[8][1]++,oe.jsxs("table",{children:[oe.jsx("thead",{}),oe.jsx("tbody",{children:c})]}))),oe.jsx("div",{children:oe.jsxs(Ks,{onClick:i,"data-wd-key":"global-state-add-variable",children:[oe.jsx(nO,{}),n.t("Add Variable")]})})]})},kPe=(vi().s[41]++,Do()(TPe));function No(){var n="/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",e="5a9c2665b160f40983faeb4cc69ad8e0d0d449de",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",statementMap:{0:{start:{line:2,column:2},end:{line:14,column:3}},1:{start:{line:3,column:21},end:{line:6,column:6}},2:{start:{line:7,column:4},end:{line:9,column:5}},3:{start:{line:8,column:6},end:{line:8,column:60}},4:{start:{line:10,column:4},end:{line:10,column:33}},5:{start:{line:12,column:4},end:{line:12,column:95}},6:{start:{line:13,column:4},end:{line:13,column:24}},7:{start:{line:17,column:2},end:{line:17,column:30}},8:{start:{line:17,column:20},end:{line:17,column:30}},9:{start:{line:18,column:17},end:{line:18,column:37}},10:{start:{line:19,column:23},end:{line:19,column:109}},11:{start:{line:20,column:2},end:{line:24,column:3}},12:{start:{line:21,column:4},end:{line:21,column:41}},13:{start:{line:23,column:4},end:{line:23,column:69}},14:{start:{line:25,column:14},end:{line:25,column:31}},15:{start:{line:26,column:16},end:{line:26,column:39}},16:{start:{line:27,column:2},end:{line:27,column:29}},17:{start:{line:30,column:2},end:{line:30,column:26}},18:{start:{line:30,column:16},end:{line:30,column:26}},19:{start:{line:31,column:14},end:{line:31,column:31}},20:{start:{line:32,column:17},end:{line:32,column:40}},21:{start:{line:33,column:2},end:{line:33,column:29}}},fnMap:{0:{name:"loadJSON",decl:{start:{line:1,column:15},end:{line:1,column:23}},loc:{start:{line:1,column:43},end:{line:15,column:1}},line:1},1:{name:"downloadGlyphsMetadata",decl:{start:{line:16,column:22},end:{line:16,column:44}},loc:{start:{line:16,column:58},end:{line:28,column:1}},line:16},2:{name:"downloadSpriteMetadata",decl:{start:{line:29,column:22},end:{line:29,column:44}},loc:{start:{line:29,column:54},end:{line:34,column:1}},line:29}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:17,column:2},end:{line:17,column:30}},type:"if",locations:[{start:{line:17,column:2},end:{line:17,column:30}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},2:{loc:{start:{line:20,column:2},end:{line:24,column:3}},type:"if",locations:[{start:{line:20,column:2},end:{line:24,column:3}},{start:{line:22,column:9},end:{line:24,column:3}}],line:20},3:{loc:{start:{line:30,column:2},end:{line:30,column:26}},type:"if",locations:[{start:{line:30,column:2},end:{line:30,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/metadata.ts"],names:[],mappings:"AAAA,eAAe,SAAY,KAAa,cAA6B;AACnE,MAAI;AACF,UAAM,WAAW,MAAM,MAAM,KAAK;AAAA,MAChC,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC;AACD,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,iCAAiC,GAAG;AAAA,IACtD;AACA,WAAO,MAAM,SAAS,KAAK;AAAA,EAC7B,QAAQ;AACN,YAAQ,KAAK,+BAA+B,MAAM,2BAA2B,YAAY;AACzF,WAAO;AAAA,EACT;AACF;AAEA,sBAAsB,uBAAuB,aAAwC;AACnF,MAAG,CAAC,YAAa,QAAO,CAAC;AAIzB,QAAM,SAAS,IAAI,IAAI,WAAW;AAClC,QAAM,eAAe,MAAM,mBAAmB,aAAa,IAAI,MAAM,mBAAmB,SAAS,IAAI;AACrG,MAAG,OAAO,aAAa,cAAc;AACnC,WAAO,WAAW;AAAA,EACpB,OAAO;AACL,WAAO,WAAW,OAAO,SAAU,QAAQ,cAAc,OAAO;AAAA,EAClE;AACA,QAAM,MAAM,OAAO,SAAS;AAC5B,QAAM,QAAQ,MAAM,SAAS,KAAK,CAAC,CAAa;AAChD,SAAO,CAAC,GAAG,IAAI,IAAI,KAAK,CAAC;AAC3B;AAEA,sBAAsB,uBAAuB,SAAoC;AAC/E,MAAG,CAAC,QAAS,QAAO,CAAC;AACrB,QAAM,MAAM,UAAU;AACtB,QAAM,SAAS,MAAM,SAAS,KAAK,CAAC,CAA2B;AAC/D,SAAO,OAAO,KAAK,MAAM;AAC3B;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5a9c2665b160f40983faeb4cc69ad8e0d0d449de"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return No=function(){return s},s}No();async function Jse(n,e){No().f[0]++,No().s[0]++;try{const t=(No().s[1]++,await fetch(n,{mode:"cors",credentials:"same-origin"}));if(No().s[2]++,t.ok)No().b[0][1]++;else throw No().b[0][0]++,No().s[3]++,new Error("Failed to load metadata for "+n);return No().s[4]++,await t.json()}catch{return No().s[5]++,console.warn("Can not load metadata for "+n+", using default value "+e),No().s[6]++,e}}async function DPe(n){if(No().f[1]++,No().s[7]++,n)No().b[1][1]++;else return No().b[1][0]++,No().s[8]++,[];const e=(No().s[9]++,new URL(n)),t=(No().s[10]++,"/"+encodeURIComponent("{fontstack}")+"/"+encodeURIComponent("{range}")+".pbf");No().s[11]++,e.pathname===t?(No().b[2][0]++,No().s[12]++,e.pathname="/fontstacks.json"):(No().b[2][1]++,No().s[13]++,e.pathname=e.pathname.replace(t,".json"));const i=(No().s[14]++,e.toString()),r=(No().s[15]++,await Jse(i,[]));return No().s[16]++,[...new Set(r)]}async function RPe(n){if(No().f[2]++,No().s[17]++,n)No().b[3][1]++;else return No().b[3][0]++,No().s[18]++,[];const e=(No().s[19]++,n+".json"),t=(No().s[20]++,await Jse(e,{}));return No().s[21]++,Object.keys(t)}function Ih(){var n="/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",e="f92fa2abb31199d99fd3ae02d967dc6702faf862",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",statementMap:{0:{start:{line:3,column:18},end:{line:3,column:47}},1:{start:{line:4,column:2},end:{line:4,column:70}},2:{start:{line:4,column:30},end:{line:4,column:68}},3:{start:{line:7,column:2},end:{line:7,column:71}},4:{start:{line:7,column:58},end:{line:7,column:69}},5:{start:{line:10,column:2},end:{line:10,column:71}},6:{start:{line:10,column:58},end:{line:10,column:69}}},fnMap:{0:{name:"diffMessages",decl:{start:{line:2,column:9},end:{line:2,column:21}},loc:{start:{line:2,column:47},end:{line:5,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:21},end:{line:4,column:22}},loc:{start:{line:4,column:30},end:{line:4,column:68}},line:4},2:{name:"undoMessages",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:54},end:{line:8,column:1}},line:6},3:{name:"(anonymous_3)",decl:{start:{line:7,column:51},end:{line:7,column:52}},loc:{start:{line:7,column:58},end:{line:7,column:69}},line:7},4:{name:"redoMessages",decl:{start:{line:9,column:16},end:{line:9,column:28}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},5:{name:"(anonymous_5)",decl:{start:{line:10,column:51},end:{line:10,column:52}},loc:{start:{line:10,column:58},end:{line:10,column:69}},line:10}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts"],names:[],mappings:"AAAA,SAAQ,YAAW;AAGnB,SAAS,aAAa,aAAiC,YAAgC;AACrF,QAAM,UAAU,KAAK,aAAa,UAAU;AAC5C,SAAO,QAAQ,IAAI,SAAO,IAAI,UAAU,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC;AAClE;AAEO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;AACO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f92fa2abb31199d99fd3ae02d967dc6702faf862"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ih=function(){return s},s}Ih();function eae(n,e){Ih().f[0]++;const t=(Ih().s[0]++,Kce(n,e));return Ih().s[1]++,t.map(i=>(Ih().f[1]++,Ih().s[2]++,i.command+" "+i.args.join(" ")))}function PPe(n,e){return Ih().f[2]++,Ih().s[3]++,eae(n,e).map(t=>(Ih().f[3]++,Ih().s[4]++,"Undo "+t))}function LPe(n,e){return Ih().f[4]++,Ih().s[5]++,eae(n,e).map(t=>(Ih().f[5]++,Ih().s[6]++,"Redo "+t))}var gP=function(n,e){return gP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])},gP(n,e)};function tae(n,e){gP(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function UPe(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function KPe(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,o=[],s;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(s)throw s.error}}return o}function FPe(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(KPe(arguments[e]));return n}var nae=(function(){function n(e,t){this.target=t,this.type=e}return n})(),zPe=(function(n){tae(e,n);function e(t,i){var r=n.call(this,"error",i)||this;return r.message=t.message,r.error=t,r}return e})(nae),jPe=(function(n){tae(e,n);function e(t,i,r){t===void 0&&(t=1e3),i===void 0&&(i="");var o=n.call(this,"close",r)||this;return o.wasClean=!0,o.code=t,o.reason=i,o}return e})(nae);var NPe=function(){if(typeof WebSocket<"u")return WebSocket},GPe=function(n){return typeof n<"u"&&!!n&&n.CLOSING===2},Yb={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0};(function(){function n(e,t,i){var r=this;i===void 0&&(i={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(o){r._debug("open event");var s=r._options.minUptime,a=s===void 0?Yb.minUptime:s;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout(function(){return r._acceptOpen()},a),r._ws.binaryType=r._binaryType,r._messageQueue.forEach(function(c){return r._ws.send(c)}),r._messageQueue=[],r.onopen&&r.onopen(o),r._listeners.open.forEach(function(c){return r._callEventListener(o,c)})},this._handleMessage=function(o){r._debug("message event"),r.onmessage&&r.onmessage(o),r._listeners.message.forEach(function(s){return r._callEventListener(o,s)})},this._handleError=function(o){r._debug("error event",o.message),r._disconnect(void 0,o.message==="TIMEOUT"?"timeout":void 0),r.onerror&&r.onerror(o),r._debug("exec error listeners"),r._listeners.error.forEach(function(s){return r._callEventListener(o,s)}),r._connect()},this._handleClose=function(o){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(o),r._listeners.close.forEach(function(s){return r._callEventListener(o,s)})},this._url=e,this._protocols=t,this._options=i,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(n,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CONNECTING",{get:function(){return n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OPEN",{get:function(){return n.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSING",{get:function(){return n.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSED",{get:function(){return n.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(t,i){return typeof i=="string"?t+=i.length:i instanceof Blob?t+=i.size:t+=i.byteLength,t},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?n.CLOSED:n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),n.prototype.close=function(e,t){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,t)},n.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,t),this._connect())},n.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,i=t===void 0?Yb.maxEnqueuedMessages:t;this._messageQueue.length<i&&(this._debug("enqueue",e),this._messageQueue.push(e))}},n.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},n.prototype.dispatchEvent=function(e){var t,i,r=this._listeners[e.type];if(r)try{for(var o=UPe(r),s=o.next();!s.done;s=o.next()){var a=s.value;this._callEventListener(e,a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!0},n.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(i){return i!==t}))},n.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,FPe(["RWS>"],e))},n.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,i=t===void 0?Yb.reconnectionDelayGrowFactor:t,r=e.minReconnectionDelay,o=r===void 0?Yb.minReconnectionDelay:r,s=e.maxReconnectionDelay,a=s===void 0?Yb.maxReconnectionDelay:s,c=0;return this._retryCount>0&&(c=o*Math.pow(i,this._retryCount-1),c>a&&(c=a)),this._debug("next delay",c),c},n.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},n.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var t=e();if(typeof t=="string")return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},n.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var t=this._options,i=t.maxRetries,r=i===void 0?Yb.maxRetries:i,o=t.connectionTimeout,s=o===void 0?Yb.connectionTimeout:o,a=t.WebSocket,c=a===void 0?NPe():a;if(this._retryCount>=r){this._debug("max retries reached",this._retryCount,">=",r);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!GPe(c))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(d){e._closeCalled||(e._debug("connect",{url:d,protocols:e._protocols}),e._ws=e._protocols?new c(d,e._protocols):new c(d),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},s))})}},n.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new zPe(Error("TIMEOUT"),this))},n.prototype._disconnect=function(e,t){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new jPe(e,t,this))}catch{}}},n.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},n.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},n.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},n.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},n.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},n})();function iae(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts",e="511b7cd31edca7d05c4852901896ddb82085d1f5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts",statementMap:{0:{start:{line:7,column:18},end:{line:7,column:24}},1:{start:{line:10,column:4},end:{line:11,column:7}},2:{start:{line:12,column:17},end:{line:12,column:37}},3:{start:{line:13,column:17},end:{line:13,column:28}},4:{start:{line:14,column:4},end:{line:14,column:45}},5:{start:{line:15,column:4},end:{line:15,column:50}},6:{start:{line:16,column:4},end:{line:16,column:37}},7:{start:{line:19,column:4},end:{line:27,column:5}},8:{start:{line:20,column:23},end:{line:20,column:79}},9:{start:{line:21,column:19},end:{line:21,column:40}},10:{start:{line:22,column:23},end:{line:22,column:27}},11:{start:{line:23,column:6},end:{line:23,column:39}},12:{start:{line:24,column:6},end:{line:24,column:32}},13:{start:{line:26,column:6},end:{line:26,column:54}},14:{start:{line:30,column:23},end:{line:30,column:67}},15:{start:{line:31,column:4},end:{line:42,column:6}},16:{start:{line:32,column:6},end:{line:32,column:26}},17:{start:{line:32,column:19},end:{line:32,column:26}},18:{start:{line:33,column:6},end:{line:33,column:52}},19:{start:{line:34,column:24},end:{line:34,column:40}},20:{start:{line:35,column:6},end:{line:39,column:7}},21:{start:{line:36,column:8},end:{line:36,column:41}},22:{start:{line:38,column:8},end:{line:38,column:27}},23:{start:{line:40,column:27},end:{line:40,column:65}},24:{start:{line:41,column:6},end:{line:41,column:44}},25:{start:{line:45,column:4},end:{line:53,column:5}},26:{start:{line:46,column:23},end:{line:48,column:8}},27:{start:{line:49,column:19},end:{line:49,column:40}},28:{start:{line:50,column:6},end:{line:50,column:45}},29:{start:{line:52,column:6},end:{line:52,column:92}},30:{start:{line:57,column:22},end:{line:61,column:5}},31:{start:{line:62,column:15},end:{line:62,column:26}},32:{start:{line:63,column:4},end:{line:72,column:7}},33:{start:{line:71,column:6},end:{line:71,column:38}},34:{start:{line:71,column:17},end:{line:71,column:38}},35:{start:{line:73,column:4},end:{line:73,column:20}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:20},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:58},end:{line:10,column:59}},loc:{start:{line:10,column:64},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:15},end:{line:28,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:23},end:{line:43,column:3}},line:29},4:{name:"(anonymous_4)",decl:{start:{line:31,column:27},end:{line:31,column:28}},loc:{start:{line:31,column:34},end:{line:42,column:5}},line:31},5:{name:"(anonymous_5)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:25},end:{line:54,column:3}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:17},end:{line:74,column:3}},line:56},7:{name:"(anonymous_7)",decl:{start:{line:70,column:13},end:{line:70,column:14}},loc:{start:{line:70,column:29},end:{line:72,column:5}},line:70}},branchMap:{0:{loc:{start:{line:10,column:30},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:30},end:{line:10,column:53}},{start:{line:10,column:58},end:{line:11,column:5}}],line:10},1:{loc:{start:{line:32,column:6},end:{line:32,column:26}},type:"if",locations:[{start:{line:32,column:6},end:{line:32,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:32},2:{loc:{start:{line:45,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:53,column:5}},{start:{line:51,column:11},end:{line:53,column:5}}],line:45},3:{loc:{start:{line:71,column:6},end:{line:71,column:38}},type:"if",locations:[{start:{line:71,column:6},end:{line:71,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,OAAO,2BAA2B;AAO3B,aAAM,cAAqC;AAAA,EAEhD;AAAA,EACA;AAAA,EACA,gBAAoC;AAAA,EACpC;AAAA,EAEA,YAAY,MAA4B;AACtC,SAAK,qBAAqB,KAAK,uBAAuB,MAAM;AAAA,IAAC;AAC7D,UAAM,OAAO,OAAO,SAAS;AAC7B,UAAM,OAAO;AACb,SAAK,WAAW,UAAU,IAAI,IAAI,IAAI;AACtC,SAAK,eAAe,QAAQ,IAAI,IAAI,IAAI;AACxC,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAAA,EACjC;AAAA,EAEA,MAAM,OAAsB;AAC1B,QAAI;AACF,YAAM,WAAW,MAAM,MAAM,KAAK,WAAW,WAAW,EAAC,MAAM,OAAM,CAAC;AACtE,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,YAAM,WAAW;AACjB,WAAK,gBAAgB,SAAS,CAAC;AAC/B,WAAK,mBAAmB;AAAA,IAC1B,QAAQ;AACN,YAAM,IAAI,MAAM,8BAA8B;AAAA,IAChD;AAAA,EACF;AAAA,EAEA,qBAAqB;AACnB,UAAM,aAAa,IAAI,sBAAsB,KAAK,YAAY;AAC9D,eAAW,YAAY,OAAK;AAC1B,UAAG,CAAC,EAAE,KAAM;AACZ,cAAQ,IAAI,gCAAgC;AAC5C,UAAI,cAAc,MAAM;AACxB,UAAI;AACF,sBAAc,KAAK,MAAM,EAAE,IAAI;AAAA,MACjC,SAAQ,KAAK;AACX,gBAAQ,MAAM,GAAG;AAAA,MACnB;AACA,YAAM,eAAe,MAAM,oBAAoB,WAAW;AAC1D,WAAK,mBAAmB,YAAY;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,MAAM,iBAAoD;AACxD,QAAG,KAAK,eAAe;AACrB,YAAM,WAAW,MAAM,MAAM,KAAK,WAAW,aAAa,KAAK,eAAe;AAAA,QAC5E,MAAM;AAAA,MACR,CAAC;AACD,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,aAAO,MAAM,oBAAoB,IAAI;AAAA,IACvC,OAAO;AACL,YAAM,IAAI,MAAM,oEAAoE;AAAA,IACtF;AAAA,EACF;AAAA;AAAA,EAGA,KAAK,UAAoC;AACvC,UAAM,YAAY;AAAA,MAChB,MAAM;AAAA,QACJ,MAAM,oBAAoB,QAAQ;AAAA,MACpC;AAAA,IACF;AAEA,UAAM,KAAK,SAAS;AACpB,UAAM,KAAK,WAAW,aAAa,IAAI;AAAA,MACrC,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM;AAAA,IACR,CAAC,EACE,MAAM,SAAS,OAAO;AACrB,UAAG,MAAO,SAAQ,MAAM,KAAK;AAAA,IAC/B,CAAC;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"511b7cd31edca7d05c4852901896ddb82085d1f5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return iae=function(){return s},s}iae();function pi(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts",e="1506dd6f3469e4801b7fd940c02682bf4ad7b098",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts",statementMap:{0:{start:{line:4,column:22},end:{line:4,column:32}},1:{start:{line:5,column:20},end:{line:5,column:27}},2:{start:{line:6,column:20},end:{line:9,column:1}},3:{start:{line:10,column:24},end:{line:10,column:44}},4:{start:{line:12,column:2},end:{line:12,column:39}},5:{start:{line:15,column:17},end:{line:15,column:19}},6:{start:{line:16,column:2},end:{line:21,column:3}},7:{start:{line:16,column:15},end:{line:16,column:16}},8:{start:{line:17,column:16},end:{line:17,column:42}},9:{start:{line:18,column:4},end:{line:20,column:5}},10:{start:{line:19,column:6},end:{line:19,column:32}},11:{start:{line:22,column:2},end:{line:22,column:16}},12:{start:{line:25,column:16},end:{line:25,column:30}},13:{start:{line:26,column:2},end:{line:26,column:86}},14:{start:{line:29,column:2},end:{line:31,column:3}},15:{start:{line:30,column:4},end:{line:30,column:41}},16:{start:{line:32,column:16},end:{line:32,column:30}},17:{start:{line:33,column:18},end:{line:33,column:26}},18:{start:{line:34,column:2},end:{line:34,column:17}},19:{start:{line:37,column:2},end:{line:37,column:57}},20:{start:{line:47,column:4},end:{line:47,column:40}},21:{start:{line:51,column:4},end:{line:56,column:5}},22:{start:{line:51,column:17},end:{line:51,column:18}},23:{start:{line:52,column:18},end:{line:52,column:44}},24:{start:{line:53,column:6},end:{line:55,column:7}},25:{start:{line:54,column:8},end:{line:54,column:44}},26:{start:{line:60,column:4},end:{line:62,column:5}},27:{start:{line:61,column:6},end:{line:61,column:32}},28:{start:{line:63,column:20},end:{line:63,column:67}},29:{start:{line:64,column:22},end:{line:64,column:68}},30:{start:{line:65,column:4},end:{line:67,column:5}},31:{start:{line:66,column:6},end:{line:66,column:35}},32:{start:{line:68,column:4},end:{line:68,column:30}},33:{start:{line:72,column:4},end:{line:72,column:51}},34:{start:{line:73,column:16},end:{line:73,column:37}},35:{start:{line:74,column:19},end:{line:77,column:5}},36:{start:{line:75,column:6},end:{line:75,column:65}},37:{start:{line:76,column:6},end:{line:76,column:67}},38:{start:{line:78,column:4},end:{line:89,column:5}},39:{start:{line:79,column:6},end:{line:79,column:15}},40:{start:{line:81,column:6},end:{line:88,column:7}},41:{start:{line:84,column:8},end:{line:84,column:21}},42:{start:{line:85,column:8},end:{line:85,column:17}},43:{start:{line:87,column:8},end:{line:87,column:16}},44:{start:{line:90,column:4},end:{line:90,column:20}}},fnMap:{0:{name:"loadDefaultStyle",decl:{start:{line:11,column:16},end:{line:11,column:32}},loc:{start:{line:11,column:35},end:{line:13,column:1}},line:11},1:{name:"loadStoredStyles",decl:{start:{line:14,column:9},end:{line:14,column:25}},loc:{start:{line:14,column:28},end:{line:23,column:1}},line:14},2:{name:"isStyleKey",decl:{start:{line:24,column:9},end:{line:24,column:19}},loc:{start:{line:24,column:25},end:{line:27,column:1}},line:24},3:{name:"fromKey",decl:{start:{line:28,column:9},end:{line:28,column:16}},loc:{start:{line:28,column:22},end:{line:35,column:1}},line:28},4:{name:"styleKey",decl:{start:{line:36,column:9},end:{line:36,column:17}},loc:{start:{line:36,column:27},end:{line:38,column:1}},line:36},5:{name:"(anonymous_5)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:16},end:{line:48,column:3}},line:46},6:{name:"(anonymous_6)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:10},end:{line:57,column:3}},line:50},7:{name:"(anonymous_7)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:25},end:{line:69,column:3}},line:59},8:{name:"(anonymous_8)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:17},end:{line:91,column:3}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:74,column:19},end:{line:74,column:20}},loc:{start:{line:74,column:25},end:{line:77,column:5}},line:74}},branchMap:{0:{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:26,column:9},end:{line:26,column:85}},type:"binary-expr",locations:[{start:{line:26,column:9},end:{line:26,column:27}},{start:{line:26,column:31},end:{line:26,column:57}},{start:{line:26,column:61},end:{line:26,column:85}}],line:26},2:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},3:{loc:{start:{line:53,column:6},end:{line:55,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:55,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},4:{loc:{start:{line:60,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:60,column:4},end:{line:62,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},5:{loc:{start:{line:65,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:67,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},6:{loc:{start:{line:81,column:6},end:{line:88,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:88,column:7}},{start:{line:86,column:13},end:{line:88,column:7}}],line:81},7:{loc:{start:{line:81,column:10},end:{line:83,column:81}},type:"binary-expr",locations:[{start:{line:81,column:10},end:{line:81,column:35}},{start:{line:81,column:40},end:{line:81,column:53}},{start:{line:82,column:6},end:{line:82,column:21}},{start:{line:83,column:6},end:{line:83,column:37}},{start:{line:83,column:41},end:{line:83,column:80}}],line:81}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,oBAAmB;AAC3B,OAAO,mBAAmB;AAG1B,MAAM,gBAAgB;AACtB,MAAM,cAAc;AACpB,MAAM,cAAc;AAAA,EAClB,QAAQ,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AAAA,EAChD,aAAa,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AACvD;AAEA,MAAM,kBAAkB,cAAc,CAAC,EAAE;AAGlC,gBAAS,mBAAsD;AACpE,SAAO,aAAa,eAAe;AACrC;AAGA,SAAS,mBAAmB;AAC1B,QAAM,SAAS,CAAC;AAChB,WAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,UAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,QAAG,WAAW,GAAI,GAAG;AACnB,aAAO,KAAK,QAAQ,GAAI,CAAC;AAAA,IAC3B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,WAAW,KAAa;AAC/B,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,SAAO,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM,iBAAiB,MAAM,CAAC,MAAM;AAC1E;AAGA,SAAS,QAAQ,KAAa;AAC5B,MAAG,CAAC,WAAW,GAAG,GAAG;AACnB,UAAM;AAAA,EACR;AAEA,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,QAAM,UAAU,MAAM,CAAC;AACvB,SAAO;AACT;AAGA,SAAS,SAAS,SAAiB;AACjC,SAAO,CAAC,eAAe,aAAa,OAAO,EAAE,KAAK,GAAG;AACvD;AAGO,aAAM,WAAkC;AAAA;AAAA;AAAA;AAAA,EAI7C;AAAA;AAAA;AAAA,EAIA,cAAc;AACZ,SAAK,YAAY,iBAAiB;AAAA,EACpC;AAAA;AAAA,EAGA,QAAQ;AACN,aAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,YAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,UAAG,IAAI,WAAW,aAAa,GAAG;AAChC,eAAO,aAAa,WAAW,GAAG;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGA,MAAM,iBAAoD;AACxD,QAAG,KAAK,UAAU,WAAW,GAAG;AAC9B,aAAO,iBAAiB;AAAA,IAC1B;AACA,UAAM,UAAU,OAAO,aAAa,QAAQ,YAAY,MAAM;AAC9D,UAAM,YAAY,OAAO,aAAa,QAAQ,SAAS,OAAO,CAAC;AAE/D,QAAI,WAAW;AACb,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AACA,WAAO,iBAAiB;AAAA,EAC1B;AAAA;AAAA,EAGA,KAAK,UAAoC;AACvC,eAAW,MAAM,oBAAoB,QAAQ;AAC7C,UAAM,MAAM,SAAS,SAAS,EAAE;AAEhC,UAAM,SAAS,MAAM;AACnB,aAAO,aAAa,QAAQ,KAAK,KAAK,UAAU,QAAQ,CAAC;AACzD,aAAO,aAAa,QAAQ,YAAY,QAAQ,SAAS,EAAE;AAAA,IAC7D;AAEA,QAAI;AACF,aAAO;AAAA,IACT,SAAS,GAAG;AAEV,UAAI,aAAa,iBACf,EAAE,SAAS;AAAA,MACX,EAAE,SAAS;AAAA,MACX,EAAE,SAAS,wBACX,EAAE,SAAS,+BACV;AACD,aAAK,MAAM;AACX,eAAO;AAAA,MACT,OAAO;AACL,cAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1506dd6f3469e4801b7fd940c02682bf4ad7b098"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return pi=function(){return s},s}pi();const fO=(pi().s[0]++,"maputnik"),rae=(pi().s[1]++,"style"),UH=(pi().s[2]++,{latest:[fO,"latest_style"].join(":")}),WPe=(pi().s[3]++,Xse[0].url);function KH(){return pi().f[0]++,pi().s[4]++,zse(WPe)}function QPe(){pi().f[1]++;const n=(pi().s[5]++,[]);pi().s[6]++;for(let e=(pi().s[7]++,0);e<window.localStorage.length;e++){const t=(pi().s[8]++,window.localStorage.key(e));pi().s[9]++,oae(t)?(pi().b[0][0]++,pi().s[10]++,n.push(qPe(t))):pi().b[0][1]++}return pi().s[11]++,n}function oae(n){pi().f[2]++;const e=(pi().s[12]++,n.split(":"));return pi().s[13]++,pi().b[1][0]++,e.length===3&&(pi().b[1][1]++,e[0]===fO)&&(pi().b[1][2]++,e[1]===rae)}function qPe(n){if(pi().f[3]++,pi().s[14]++,oae(n))pi().b[2][1]++;else throw pi().b[2][0]++,pi().s[15]++,"Key is not a valid style key";const e=(pi().s[16]++,n.split(":")),t=(pi().s[17]++,e[2]);return pi().s[18]++,t}function FH(n){return pi().f[4]++,pi().s[19]++,[fO,rae,n].join(":")}class YPe{mapStyles;constructor(){pi().f[5]++,pi().s[20]++,this.mapStyles=QPe()}purge(){pi().f[6]++,pi().s[21]++;for(let e=(pi().s[22]++,0);e<window.localStorage.length;e++){const t=(pi().s[23]++,window.localStorage.key(e));pi().s[24]++,t.startsWith(fO)?(pi().b[3][0]++,pi().s[25]++,window.localStorage.removeItem(t)):pi().b[3][1]++}}async getLatestStyle(){if(pi().f[7]++,pi().s[26]++,this.mapStyles.length===0)return pi().b[4][0]++,pi().s[27]++,KH();pi().b[4][1]++;const e=(pi().s[28]++,window.localStorage.getItem(UH.latest)),t=(pi().s[29]++,window.localStorage.getItem(FH(e)));return pi().s[30]++,t?(pi().b[5][0]++,pi().s[31]++,JSON.parse(t)):(pi().b[5][1]++,pi().s[32]++,KH())}save(e){pi().f[8]++,pi().s[33]++,e=Id.ensureStyleValidity(e);const t=(pi().s[34]++,FH(e.id));pi().s[35]++;const i=()=>{pi().f[9]++,pi().s[36]++,window.localStorage.setItem(t,JSON.stringify(e)),pi().s[37]++,window.localStorage.setItem(UH.latest,e.id)};pi().s[38]++;try{pi().s[39]++,i()}catch(r){if(pi().s[40]++,pi().b[7][0]++,r instanceof DOMException&&(pi().b[7][1]++,r.code===22||(pi().b[7][2]++,r.code===1014)||(pi().b[7][3]++,r.name==="QuotaExceededError")||(pi().b[7][4]++,r.name==="NS_ERROR_DOM_QUOTA_REACHED")))pi().b[6][0]++,pi().s[41]++,this.purge(),pi().s[42]++,i();else throw pi().b[6][1]++,pi().s[43]++,r}return pi().s[44]++,e}}function Sh(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts",e="2de8d55bfe17551e08818e39ce7b23b7139f970e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:65}},1:{start:{line:6,column:22},end:{line:6,column:118}},2:{start:{line:8,column:2},end:{line:20,column:3}},3:{start:{line:9,column:26},end:{line:11,column:6}},4:{start:{line:10,column:40},end:{line:10,column:81}},5:{start:{line:12,column:4},end:{line:17,column:5}},6:{start:{line:13,column:6},end:{line:13,column:33}},7:{start:{line:14,column:6},end:{line:14,column:33}},8:{start:{line:16,column:6},end:{line:16,column:36}},9:{start:{line:19,column:4},end:{line:19,column:34}},10:{start:{line:21,column:22},end:{line:21,column:100}},11:{start:{line:22,column:2},end:{line:22,column:66}},12:{start:{line:23,column:2},end:{line:23,column:20}}},fnMap:{0:{name:"createStyleStore",decl:{start:{line:4,column:22},end:{line:4,column:38}},loc:{start:{line:4,column:55},end:{line:24,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:10,column:26},end:{line:10,column:27}},loc:{start:{line:10,column:40},end:{line:10,column:81}},line:10}},branchMap:{0:{loc:{start:{line:6,column:22},end:{line:6,column:118}},type:"binary-expr",locations:[{start:{line:6,column:22},end:{line:6,column:30}},{start:{line:6,column:34},end:{line:6,column:118}}],line:6},1:{loc:{start:{line:8,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:8,column:2},end:{line:20,column:3}},{start:{line:18,column:9},end:{line:20,column:3}}],line:8},2:{loc:{start:{line:21,column:22},end:{line:21,column:100}},type:"cond-expr",locations:[{start:{line:21,column:36},end:{line:21,column:64}},{start:{line:21,column:67},end:{line:21,column:100}}],line:21}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts"],names:[],mappings:"AAEA,SAAS,8CAA8C,oBAAoB;AAC3E,SAAS,qBAAqB;AAC9B,SAAS,kBAAkB;AAE3B,sBAAsB,iBAAiB,gBAA8D;AACnG,QAAM,WAAW,6CAA6C;AAC9D,QAAM,cAAc,YAAY,OAAO,QAAQ,0BAA0B,WAAW,+BAA+B;AACnH,MAAI;AACJ,MAAI,OAAoD;AACtD,UAAM,gBAAgB,IAAI,cAAc;AAAA,MACtC,oBAAoB,CAAA,aAAY,eAAe,UAAU,EAAC,MAAM,MAAK,CAAC;AAAA,IACxE,CAAC;AACD,QAAI;AACF,YAAM,cAAc,KAAK;AACzB,mBAAa;AAAA,IACf,QAAQ;AACN,mBAAa,IAAI,WAAW;AAAA,IAC9B;AAAA,EACF,OAAO;AACL,iBAAa,IAAI,WAAW;AAAA,EAC9B;AACA,QAAM,cAAc,cAAc,MAAM,aAAa,QAAQ,IAAI,MAAM,WAAW,eAAe;AACjG,iBAAe,aAAa,EAAC,aAAa,MAAM,MAAM,MAAK,CAAC;AAC5D,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2de8d55bfe17551e08818e39ce7b23b7139f970e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Sh=function(){return s},s}Sh();async function VPe(n){Sh().f[0]++;const e=(Sh().s[0]++,KDe()),t=(Sh().s[1]++,Sh().b[0][0]++,e&&(Sh().b[0][1]++,window.confirm("Load style from URL: "+e+" and discard current changes?")));let i;Sh().s[2]++,Sh().b[1][1]++,Sh().s[9]++,i=new YPe;const r=(Sh().s[10]++,t?(Sh().b[2][0]++,await zse(e)):(Sh().b[2][1]++,await i.getLatestStyle()));return Sh().s[11]++,n(r,{initialLoad:!0,save:!1}),Sh().s[12]++,i}function Da(){var n="/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",e="2443d70bd38cc3b176918d5f84a8a7d35a1ef2fe",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:38}},1:{start:{line:6,column:4},end:{line:6,column:50}},2:{start:{line:9,column:4},end:{line:9,column:53}},3:{start:{line:12,column:4},end:{line:12,column:43}},4:{start:{line:15,column:4},end:{line:15,column:66}},5:{start:{line:16,column:4},end:{line:16,column:34}},6:{start:{line:17,column:4},end:{line:17,column:22}},7:{start:{line:20,column:4},end:{line:22,column:5}},8:{start:{line:21,column:6},end:{line:21,column:24}},9:{start:{line:23,column:4},end:{line:23,column:24}},10:{start:{line:26,column:4},end:{line:28,column:5}},11:{start:{line:27,column:6},end:{line:27,column:24}},12:{start:{line:29,column:4},end:{line:29,column:24}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:37},end:{line:7,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:10,column:3}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:16},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:24},end:{line:18,column:3}},line:14},4:{name:"(anonymous_4)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:9},end:{line:24,column:3}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:9},end:{line:30,column:3}},line:25}},branchMap:{0:{loc:{start:{line:4,column:14},end:{line:4,column:35}},type:"default-arg",locations:[{start:{line:4,column:33},end:{line:4,column:35}}],line:4},1:{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/revisions.ts"],names:[],mappings:"AAEO,aAAM,cAAc;AAAA,EACzB;AAAA,EACA;AAAA,EAGA,YAAY,mBAAiB,CAAC,GAAG;AAC/B,SAAK,YAAY;AACjB,SAAK,aAAa,iBAAiB,SAAS;AAAA,EAC9C;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,UAAU,KAAK,UAAU,SAAS,CAAC;AAAA,EACjD;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,UAAU,KAAK,UAAU;AAAA,EACvC;AAAA,EAEA,YAAY,UAAoC;AAG9C,SAAK,YAAY,KAAK,UAAU,MAAM,GAAG,KAAK,aAAa,CAAC;AAE5D,SAAK,UAAU,KAAK,QAAQ;AAC5B,SAAK;AAAA,EAEP;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,GAAG;AACtB,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,KAAK,UAAU,SAAS,GAAG;AAC9C,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2443d70bd38cc3b176918d5f84a8a7d35a1ef2fe"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Da=function(){return s},s}Da();class $Pe{revisions;currentIdx;constructor(e=(Da().b[0][0]++,[])){Da().f[0]++,Da().s[0]++,this.revisions=e,Da().s[1]++,this.currentIdx=e.length-1}get latest(){return Da().f[1]++,Da().s[2]++,this.revisions[this.revisions.length-1]}get current(){return Da().f[2]++,Da().s[3]++,this.revisions[this.currentIdx]}addRevision(e){Da().f[3]++,Da().s[4]++,this.revisions=this.revisions.slice(0,this.currentIdx+1),Da().s[5]++,this.revisions.push(e),Da().s[6]++,this.currentIdx++}undo(){return Da().f[4]++,Da().s[7]++,this.currentIdx>0?(Da().b[1][0]++,Da().s[8]++,this.currentIdx--):Da().b[1][1]++,Da().s[9]++,this.current}redo(){return Da().f[5]++,Da().s[10]++,this.currentIdx<this.revisions.length-1?(Da().b[2][0]++,Da().s[11]++,this.currentIdx++):Da().b[2][1]++,Da().s[12]++,this.current}}var O9,zH;function HPe(){if(zH)return O9;zH=1;var n="Expected a function",e=NaN,t="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,c=typeof window=="object"&&window&&window.Object===Object&&window,d=typeof self=="object"&&self&&self.Object===Object&&self,m=c||d||Function("return this")(),v=Object.prototype,M=v.toString,B=Math.max,P=Math.min,U=function(){return m.Date.now()};function z(te,q,le){var ce,ve,ge,Ee,xe,Te,Fe=0,Ie=!1,Ye=!1,At=!0;if(typeof te!="function")throw new TypeError(n);q=ie(q)||0,Z(le)&&(Ie=!!le.leading,Ye="maxWait"in le,ge=Ye?B(ie(le.maxWait)||0,q):ge,At="trailing"in le?!!le.trailing:At);function mt(Le){var ke=ce,Oe=ve;return ce=ve=void 0,Fe=Le,Ee=te.apply(Oe,ke),Ee}function Ue(Le){return Fe=Le,xe=setTimeout(Re,q),Ie?mt(Le):Ee}function De(Le){var ke=Le-Te,Oe=Le-Fe,Ze=q-ke;return Ye?P(Ze,ge-Oe):Ze}function Ge(Le){var ke=Le-Te,Oe=Le-Fe;return Te===void 0||ke>=q||ke<0||Ye&&Oe>=ge}function Re(){var Le=U();if(Ge(Le))return St(Le);xe=setTimeout(Re,De(Le))}function St(Le){return xe=void 0,At&&ce?mt(Le):(ce=ve=void 0,Ee)}function ut(){xe!==void 0&&clearTimeout(xe),Fe=0,ce=Te=ve=xe=void 0}function kt(){return xe===void 0?Ee:St(U())}function Ut(){var Le=U(),ke=Ge(Le);if(ce=arguments,ve=this,Te=Le,ke){if(xe===void 0)return Ue(Te);if(Ye)return xe=setTimeout(Re,q),mt(Te)}return xe===void 0&&(xe=setTimeout(Re,q)),Ee}return Ut.cancel=ut,Ut.flush=kt,Ut}function V(te,q,le){var ce=!0,ve=!0;if(typeof te!="function")throw new TypeError(n);return Z(le)&&(ce="leading"in le?!!le.leading:ce,ve="trailing"in le?!!le.trailing:ve),z(te,q,{leading:ce,maxWait:q,trailing:ve})}function Z(te){var q=typeof te;return!!te&&(q=="object"||q=="function")}function X(te){return!!te&&typeof te=="object"}function re(te){return typeof te=="symbol"||X(te)&&M.call(te)==t}function ie(te){if(typeof te=="number")return te;if(re(te))return e;if(Z(te)){var q=typeof te.valueOf=="function"?te.valueOf():te;te=Z(q)?q+"":q}if(typeof te!="string")return te===0?te:+te;te=te.replace(i,"");var le=o.test(te);return le||s.test(te)?a(te.slice(2),le?2:8):r.test(te)?e:+te}return O9=V,O9}var ZPe=HPe();const XPe=vu(ZPe);var a4={exports:{}};a4.exports;var jH;function JPe(){return jH||(jH=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=1,o=2,s=9007199254740991,a="[object Arguments]",c="[object Array]",d="[object AsyncFunction]",m="[object Boolean]",v="[object Date]",M="[object Error]",B="[object Function]",P="[object GeneratorFunction]",U="[object Map]",z="[object Number]",V="[object Null]",Z="[object Object]",X="[object Promise]",re="[object Proxy]",ie="[object RegExp]",te="[object Set]",q="[object String]",le="[object Symbol]",ce="[object Undefined]",ve="[object WeakMap]",ge="[object ArrayBuffer]",Ee="[object DataView]",xe="[object Float32Array]",Te="[object Float64Array]",Fe="[object Int8Array]",Ie="[object Int16Array]",Ye="[object Int32Array]",At="[object Uint8Array]",mt="[object Uint8ClampedArray]",Ue="[object Uint16Array]",De="[object Uint32Array]",Ge=/[\\^$.*+?()[\]{}|]/g,Re=/^\[object .+?Constructor\]$/,St=/^(?:0|[1-9]\d*)$/,ut={};ut[xe]=ut[Te]=ut[Fe]=ut[Ie]=ut[Ye]=ut[At]=ut[mt]=ut[Ue]=ut[De]=!0,ut[a]=ut[c]=ut[ge]=ut[m]=ut[Ee]=ut[v]=ut[M]=ut[B]=ut[U]=ut[z]=ut[Z]=ut[ie]=ut[te]=ut[q]=ut[ve]=!1;var kt=typeof window=="object"&&window&&window.Object===Object&&window,Ut=typeof self=="object"&&self&&self.Object===Object&&self,Le=kt||Ut||Function("return this")(),ke=e&&!e.nodeType&&e,Oe=ke&&!0&&n&&!n.nodeType&&n,Ze=Oe&&Oe.exports===ke,bt=Ze&&kt.process,yt=(function(){try{return bt&&bt.binding&&bt.binding("util")}catch{}})(),Mt=yt&&yt.isTypedArray;function Kt(ne,Ce){for(var He=-1,Et=ne==null?0:ne.length,Qn=0,Dn=[];++He<Et;){var Oi=ne[He];Ce(Oi,He,ne)&&(Dn[Qn++]=Oi)}return Dn}function Dt(ne,Ce){for(var He=-1,Et=Ce.length,Qn=ne.length;++He<Et;)ne[Qn+He]=Ce[He];return ne}function en(ne,Ce){for(var He=-1,Et=ne==null?0:ne.length;++He<Et;)if(Ce(ne[He],He,ne))return!0;return!1}function Gn(ne,Ce){for(var He=-1,Et=Array(ne);++He<ne;)Et[He]=Ce(He);return Et}function Nn(ne){return function(Ce){return ne(Ce)}}function Si(ne,Ce){return ne.has(Ce)}function Un(ne,Ce){return ne?.[Ce]}function Ln(ne){var Ce=-1,He=Array(ne.size);return ne.forEach(function(Et,Qn){He[++Ce]=[Qn,Et]}),He}function Tn(ne,Ce){return function(He){return ne(Ce(He))}}function ti(ne){var Ce=-1,He=Array(ne.size);return ne.forEach(function(Et){He[++Ce]=Et}),He}var Bn=Array.prototype,je=Function.prototype,H=Object.prototype,j=Le["__core-js_shared__"],Q=je.toString,he=H.hasOwnProperty,Me=(function(){var ne=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||"");return ne?"Symbol(src)_1."+ne:""})(),Ne=H.toString,Qe=RegExp("^"+Q.call(he).replace(Ge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),it=Ze?Le.Buffer:void 0,vt=Le.Symbol,$e=Le.Uint8Array,ot=H.propertyIsEnumerable,b=Bn.splice,Rt=vt?vt.toStringTag:void 0,mn=Object.getOwnPropertySymbols,bn=it?it.isBuffer:void 0,Cn=Tn(Object.keys,Object),xt=Mo(Le,"DataView"),Ci=Mo(Le,"Map"),Ki=Mo(Le,"Promise"),Wn=Mo(Le,"Set"),Hn=Mo(Le,"WeakMap"),Qi=Mo(Object,"create"),Wi=Xo(xt),Ri=Xo(Ci),qi=Xo(Ki),Li=Xo(Wn),Er=Xo(Hn),xo=vt?vt.prototype:void 0,un=xo?xo.valueOf:void 0;function tr(ne){var Ce=-1,He=ne==null?0:ne.length;for(this.clear();++Ce<He;){var Et=ne[Ce];this.set(Et[0],Et[1])}}function Wo(){this.__data__=Qi?Qi(null):{},this.size=0}function ra(ne){var Ce=this.has(ne)&&delete this.__data__[ne];return this.size-=Ce?1:0,Ce}function oo(ne){var Ce=this.__data__;if(Qi){var He=Ce[ne];return He===i?void 0:He}return he.call(Ce,ne)?Ce[ne]:void 0}function kn(ne){var Ce=this.__data__;return Qi?Ce[ne]!==void 0:he.call(Ce,ne)}function Xi(ne,Ce){var He=this.__data__;return this.size+=this.has(ne)?0:1,He[ne]=Qi&&Ce===void 0?i:Ce,this}tr.prototype.clear=Wo,tr.prototype.delete=ra,tr.prototype.get=oo,tr.prototype.has=kn,tr.prototype.set=Xi;function ui(ne){var Ce=-1,He=ne==null?0:ne.length;for(this.clear();++Ce<He;){var Et=ne[Ce];this.set(Et[0],Et[1])}}function Ka(){this.__data__=[],this.size=0}function yA(ne){var Ce=this.__data__,He=lr(Ce,ne);if(He<0)return!1;var Et=Ce.length-1;return He==Et?Ce.pop():b.call(Ce,He,1),--this.size,!0}function xl(ne){var Ce=this.__data__,He=lr(Ce,ne);return He<0?void 0:Ce[He][1]}function Vi(ne){return lr(this.__data__,ne)>-1}function Qu(ne,Ce){var He=this.__data__,Et=lr(He,ne);return Et<0?(++this.size,He.push([ne,Ce])):He[Et][1]=Ce,this}ui.prototype.clear=Ka,ui.prototype.delete=yA,ui.prototype.get=xl,ui.prototype.has=Vi,ui.prototype.set=Qu;function co(ne){var Ce=-1,He=ne==null?0:ne.length;for(this.clear();++Ce<He;){var Et=ne[Ce];this.set(Et[0],Et[1])}}function $a(){this.size=0,this.__data__={hash:new tr,map:new(Ci||ui),string:new tr}}function Ml(ne){var Ce=hs(this,ne).delete(ne);return this.size-=Ce?1:0,Ce}function Fa(ne){return hs(this,ne).get(ne)}function Ro(ne){return hs(this,ne).has(ne)}function gc(ne,Ce){var He=hs(this,ne),Et=He.size;return He.set(ne,Ce),this.size+=He.size==Et?0:1,this}co.prototype.clear=$a,co.prototype.delete=Ml,co.prototype.get=Fa,co.prototype.has=Ro,co.prototype.set=gc;function Qo(ne){var Ce=-1,He=ne==null?0:ne.length;for(this.__data__=new co;++Ce<He;)this.add(ne[Ce])}function mr(ne){return this.__data__.set(ne,i),this}function za(ne){return this.__data__.has(ne)}Qo.prototype.add=Qo.prototype.push=mr,Qo.prototype.has=za;function Zo(ne){var Ce=this.__data__=new ui(ne);this.size=Ce.size}function bu(){this.__data__=new ui,this.size=0}function Cu(ne){var Ce=this.__data__,He=Ce.delete(ne);return this.size=Ce.size,He}function ul(ne){return this.__data__.get(ne)}function Vc(ne){return this.__data__.has(ne)}function cl(ne,Ce){var He=this.__data__;if(He instanceof ui){var Et=He.__data__;if(!Ci||Et.length<t-1)return Et.push([ne,Ce]),this.size=++He.size,this;He=this.__data__=new co(Et)}return He.set(ne,Ce),this.size=He.size,this}Zo.prototype.clear=bu,Zo.prototype.delete=Cu,Zo.prototype.get=ul,Zo.prototype.has=Vc,Zo.prototype.set=cl;function ja(ne,Ce){var He=Ao(ne),Et=!He&&Jo(ne),Qn=!He&&!Et&&_i(ne),Dn=!He&&!Et&&!Qn&&oa(ne),Oi=He||Et||Qn||Dn,Fi=Oi?Gn(ne.length,String):[],qn=Fi.length;for(var Ei in ne)he.call(ne,Ei)&&!(Oi&&(Ei=="length"||Qn&&(Ei=="offset"||Ei=="parent")||Dn&&(Ei=="buffer"||Ei=="byteLength"||Ei=="byteOffset")||Mu(Ei,qn)))&&Fi.push(Ei);return Fi}function lr(ne,Ce){for(var He=ne.length;He--;)if(Vu(ne[He][0],Ce))return He;return-1}function qu(ne,Ce,He){var Et=Ce(ne);return Ao(ne)?Et:Dt(Et,He(ne))}function wl(ne){return ne==null?ne===void 0?ce:V:Rt&&Rt in Object(ne)?Hl(ne):Ha(ne)}function Sl(ne){return Yr(ne)&&wl(ne)==a}function _u(ne,Ce,He,Et,Qn){return ne===Ce?!0:ne==null||Ce==null||!Yr(ne)&&!Yr(Ce)?ne!==ne&&Ce!==Ce:yc(ne,Ce,He,Et,_u,Qn)}function yc(ne,Ce,He,Et,Qn,Dn){var Oi=Ao(ne),Fi=Ao(Ce),qn=Oi?c:Es(ne),Ei=Fi?c:Es(Ce);qn=qn==a?Z:qn,Ei=Ei==a?Z:Ei;var ei=qn==Z,ri=Ei==Z,hr=qn==Ei;if(hr&&_i(ne)){if(!_i(Ce))return!1;Oi=!0,ei=!1}if(hr&&!ei)return Dn||(Dn=new Zo),Oi||oa(ne)?Yl(ne,Ce,He,Et,Qn,Dn):$c(ne,Ce,qn,He,Et,Qn,Dn);if(!(He&r)){var ni=ei&&he.call(ne,"__wrapped__"),Kr=ri&&he.call(Ce,"__wrapped__");if(ni||Kr){var wo=ni?ne.value():ne,Po=Kr?Ce.value():Ce;return Dn||(Dn=new Zo),Qn(wo,Po,He,Et,Dn)}}return hr?(Dn||(Dn=new Zo),Vl(ne,Ce,He,Et,Qn,Dn)):!1}function Rh(ne){if(!Fs(ne)||Yu(ne))return!1;var Ce=$s(ne)?Qe:Re;return Ce.test(Xo(ne))}function Vs(ne){return Yr(ne)&&go(ne.length)&&!!ut[wl(ne)]}function vc(ne){if(!Ji(ne))return Cn(ne);var Ce=[];for(var He in Object(ne))he.call(ne,He)&&He!="constructor"&&Ce.push(He);return Ce}function Yl(ne,Ce,He,Et,Qn,Dn){var Oi=He&r,Fi=ne.length,qn=Ce.length;if(Fi!=qn&&!(Oi&&qn>Fi))return!1;var Ei=Dn.get(ne);if(Ei&&Dn.get(Ce))return Ei==Ce;var ei=-1,ri=!0,hr=He&o?new Qo:void 0;for(Dn.set(ne,Ce),Dn.set(Ce,ne);++ei<Fi;){var ni=ne[ei],Kr=Ce[ei];if(Et)var wo=Oi?Et(Kr,ni,ei,Ce,ne,Dn):Et(ni,Kr,ei,ne,Ce,Dn);if(wo!==void 0){if(wo)continue;ri=!1;break}if(hr){if(!en(Ce,function(Po,ds){if(!Si(hr,ds)&&(ni===Po||Qn(ni,Po,He,Et,Dn)))return hr.push(ds)})){ri=!1;break}}else if(!(ni===Kr||Qn(ni,Kr,He,Et,Dn))){ri=!1;break}}return Dn.delete(ne),Dn.delete(Ce),ri}function $c(ne,Ce,He,Et,Qn,Dn,Oi){switch(He){case Ee:if(ne.byteLength!=Ce.byteLength||ne.byteOffset!=Ce.byteOffset)return!1;ne=ne.buffer,Ce=Ce.buffer;case ge:return!(ne.byteLength!=Ce.byteLength||!Dn(new $e(ne),new $e(Ce)));case m:case v:case z:return Vu(+ne,+Ce);case M:return ne.name==Ce.name&&ne.message==Ce.message;case ie:case q:return ne==Ce+"";case U:var Fi=Ln;case te:var qn=Et&r;if(Fi||(Fi=ti),ne.size!=Ce.size&&!qn)return!1;var Ei=Oi.get(ne);if(Ei)return Ei==Ce;Et|=o,Oi.set(ne,Ce);var ei=Yl(Fi(ne),Fi(Ce),Et,Qn,Dn,Oi);return Oi.delete(ne),ei;case le:if(un)return un.call(ne)==un.call(Ce)}return!1}function Vl(ne,Ce,He,Et,Qn,Dn){var Oi=He&r,Fi=$l(ne),qn=Fi.length,Ei=$l(Ce),ei=Ei.length;if(qn!=ei&&!Oi)return!1;for(var ri=qn;ri--;){var hr=Fi[ri];if(!(Oi?hr in Ce:he.call(Ce,hr)))return!1}var ni=Dn.get(ne);if(ni&&Dn.get(Ce))return ni==Ce;var Kr=!0;Dn.set(ne,Ce),Dn.set(Ce,ne);for(var wo=Oi;++ri<qn;){hr=Fi[ri];var Po=ne[hr],ds=Ce[hr];if(Et)var eh=Oi?Et(ds,Po,hr,Ce,ne,Dn):Et(Po,ds,hr,ne,Ce,Dn);if(!(eh===void 0?Po===ds||Qn(Po,ds,He,Et,Dn):eh)){Kr=!1;break}wo||(wo=hr=="constructor")}if(Kr&&!wo){var El=ne.constructor,fs=Ce.constructor;El!=fs&&"constructor"in ne&&"constructor"in Ce&&!(typeof El=="function"&&El instanceof El&&typeof fs=="function"&&fs instanceof fs)&&(Kr=!1)}return Dn.delete(ne),Dn.delete(Ce),Kr}function $l(ne){return qu(ne,Za,xu)}function hs(ne,Ce){var He=ne.__data__;return Zl(Ce)?He[typeof Ce=="string"?"string":"hash"]:He.map}function Mo(ne,Ce){var He=Un(ne,Ce);return Rh(He)?He:void 0}function Hl(ne){var Ce=he.call(ne,Rt),He=ne[Rt];try{ne[Rt]=void 0;var Et=!0}catch{}var Qn=Ne.call(ne);return Et&&(Ce?ne[Rt]=He:delete ne[Rt]),Qn}var xu=mn?function(ne){return ne==null?[]:(ne=Object(ne),Kt(mn(ne),function(Ce){return ot.call(ne,Ce)}))}:$i,Es=wl;(xt&&Es(new xt(new ArrayBuffer(1)))!=Ee||Ci&&Es(new Ci)!=U||Ki&&Es(Ki.resolve())!=X||Wn&&Es(new Wn)!=te||Hn&&Es(new Hn)!=ve)&&(Es=function(ne){var Ce=wl(ne),He=Ce==Z?ne.constructor:void 0,Et=He?Xo(He):"";if(Et)switch(Et){case Wi:return Ee;case Ri:return U;case qi:return X;case Li:return te;case Er:return ve}return Ce});function Mu(ne,Ce){return Ce=Ce??s,!!Ce&&(typeof ne=="number"||St.test(ne))&&ne>-1&&ne%1==0&&ne<Ce}function Zl(ne){var Ce=typeof ne;return Ce=="string"||Ce=="number"||Ce=="symbol"||Ce=="boolean"?ne!=="__proto__":ne===null}function Yu(ne){return!!Me&&Me in ne}function Ji(ne){var Ce=ne&&ne.constructor,He=typeof Ce=="function"&&Ce.prototype||H;return ne===He}function Ha(ne){return Ne.call(ne)}function Xo(ne){if(ne!=null){try{return Q.call(ne)}catch{}try{return ne+""}catch{}}return""}function Vu(ne,Ce){return ne===Ce||ne!==ne&&Ce!==Ce}var Jo=Sl((function(){return arguments})())?Sl:function(ne){return Yr(ne)&&he.call(ne,"callee")&&!ot.call(ne,"callee")},Ao=Array.isArray;function ho(ne){return ne!=null&&go(ne.length)&&!$s(ne)}var _i=bn||Tr;function to(ne,Ce){return _u(ne,Ce)}function $s(ne){if(!Fs(ne))return!1;var Ce=wl(ne);return Ce==B||Ce==P||Ce==d||Ce==re}function go(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=s}function Fs(ne){var Ce=typeof ne;return ne!=null&&(Ce=="object"||Ce=="function")}function Yr(ne){return ne!=null&&typeof ne=="object"}var oa=Mt?Nn(Mt):Vs;function Za(ne){return ho(ne)?ja(ne):vc(ne)}function $i(){return[]}function Tr(){return!1}n.exports=to})(a4,a4.exports)),a4.exports}var eLe=JPe();const yP=vu(eLe);function sr(){var n="/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",e="f697c030ede0efa960b33f85ca9652efe882c805",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",statementMap:{0:{start:{line:10,column:4},end:{line:11,column:7}},1:{start:{line:12,column:4},end:{line:13,column:7}},2:{start:{line:14,column:4},end:{line:14,column:23}},3:{start:{line:15,column:4},end:{line:15,column:28}},4:{start:{line:16,column:4},end:{line:16,column:90}},5:{start:{line:19,column:28},end:{line:19,column:48}},6:{start:{line:20,column:4},end:{line:22,column:5}},7:{start:{line:21,column:6},end:{line:21,column:88}},8:{start:{line:24,column:4},end:{line:26,column:5}},9:{start:{line:25,column:6},end:{line:25,column:42}},10:{start:{line:27,column:4},end:{line:27,column:48}},11:{start:{line:30,column:33},end:{line:30,column:58}},12:{start:{line:31,column:4},end:{line:44,column:7}},13:{start:{line:32,column:6},end:{line:43,column:9}},14:{start:{line:33,column:32},end:{line:33,column:71}},15:{start:{line:34,column:23},end:{line:34,column:53}},16:{start:{line:35,column:8},end:{line:41,column:11}},17:{start:{line:36,column:10},end:{line:40,column:13}},18:{start:{line:37,column:40},end:{line:37,column:75}},19:{start:{line:38,column:12},end:{line:38,column:71}},20:{start:{line:39,column:12},end:{line:39,column:64}},21:{start:{line:42,column:8},end:{line:42,column:60}},22:{start:{line:45,column:4},end:{line:47,column:5}},23:{start:{line:46,column:6},end:{line:46,column:52}},24:{start:{line:51,column:4},end:{line:51,column:25}},25:{start:{line:54,column:4},end:{line:54,column:30}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:25},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:52},end:{line:10,column:53}},loc:{start:{line:10,column:58},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:62},end:{line:12,column:63}},loc:{start:{line:12,column:68},end:{line:13,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:18},end:{line:28,column:3}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:32},end:{line:48,column:3}},line:29},5:{name:"(anonymous_5)",decl:{start:{line:31,column:39},end:{line:31,column:40}},loc:{start:{line:31,column:53},end:{line:44,column:5}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:32,column:46},end:{line:32,column:47}},loc:{start:{line:32,column:65},end:{line:43,column:7}},line:32},7:{name:"(anonymous_7)",decl:{start:{line:35,column:58},end:{line:35,column:59}},loc:{start:{line:35,column:71},end:{line:41,column:9}},line:35},8:{name:"(anonymous_8)",decl:{start:{line:36,column:50},end:{line:36,column:51}},loc:{start:{line:36,column:68},end:{line:40,column:11}},line:36},9:{name:"(anonymous_9)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:16},end:{line:52,column:3}},line:50},10:{name:"(anonymous_10)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:21},end:{line:55,column:3}},line:53}},branchMap:{0:{loc:{start:{line:9,column:14},end:{line:9,column:23}},type:"default-arg",locations:[{start:{line:9,column:21},end:{line:9,column:23}}],line:9},1:{loc:{start:{line:10,column:27},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:27},end:{line:10,column:47}},{start:{line:10,column:52},end:{line:11,column:5}}],line:10},2:{loc:{start:{line:12,column:32},end:{line:13,column:6}},type:"binary-expr",locations:[{start:{line:12,column:32},end:{line:12,column:57}},{start:{line:12,column:62},end:{line:13,column:5}}],line:12},3:{loc:{start:{line:24,column:4},end:{line:26,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:26,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},4:{loc:{start:{line:32,column:7},end:{line:32,column:36}},type:"binary-expr",locations:[{start:{line:32,column:7},end:{line:32,column:30}},{start:{line:32,column:34},end:{line:32,column:36}}],line:32},5:{loc:{start:{line:33,column:32},end:{line:33,column:71}},type:"binary-expr",locations:[{start:{line:33,column:32},end:{line:33,column:65}},{start:{line:33,column:69},end:{line:33,column:71}}],line:33},6:{loc:{start:{line:37,column:40},end:{line:37,column:75}},type:"binary-expr",locations:[{start:{line:37,column:40},end:{line:37,column:69}},{start:{line:37,column:73},end:{line:37,column:75}}],line:37},7:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,aAAa;AAUpB,qBAAqB,aAAa;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAA4B,CAAC,GAAG;AAC1C,SAAK,kBAAkB,KAAK,oBAAoB,MAAM;AAAA,IAAC;AACvD,SAAK,uBAAuB,KAAK,yBAAyB,MAAM;AAAA,IAAC;AAEjE,SAAK,WAAW,CAAC;AACjB,SAAK,gBAAgB,CAAC;AAKtB,SAAK,oCAAoC,SAAS,KAAK,0BAA0B,GAAI;AAAA,EACvF;AAAA,EAEA,WAAW,KAAU;AACnB,UAAM,kBAAkB,EAAE,GAAG,KAAK,SAAS;AAE3C,eAAW,YAAY,OAAO,KAAK,IAAI,MAAM,YAAY,GAAG;AAG1D,WAAK,SAAS,QAAQ,IAAI,IAAI,MAAM,aAAa,QAAQ,EAAE,QAAQ;AAAA,IACrE;AAAC;AAED,QAAG,CAAC,QAAQ,iBAAiB,KAAK,QAAQ,GAAG;AAC3C,WAAK,gBAAgB,KAAK,QAAQ;AAAA,IACpC;AAEA,SAAK,kCAAkC,GAAG;AAAA,EAC5C;AAAA,EAEA,yBAAyB,KAAU;AACjC,UAAM,uBAAuB,EAAE,GAAG,KAAK,cAAc;AAErD,WAAO,KAAK,KAAK,QAAQ,EAAE,QAAQ,cAAY;AAC7C,OAAC,KAAK,SAAS,QAAQ,KAAK,CAAC,GAAG,QAAQ,mBAAiB;AACvD,cAAM,kBAAkB,KAAK,cAAc,aAAa,KAAK,CAAC;AAC9D,cAAM,SAAS,EAAE,aAAa,cAAc;AAC5C,YAAI,oBAAoB,UAAU,MAAa,EAAE,QAAQ,aAAW;AAClE,iBAAO,KAAK,QAAQ,UAAU,EAAE,QAAQ,kBAAgB;AACtD,kBAAM,sBAAsB,gBAAgB,YAAY,KAAK,CAAC;AAC9D,gCAAoB,QAAQ,WAAW,YAAY,CAAC,IAAI,CAAC;AACzD,4BAAgB,YAAY,IAAI;AAAA,UAClC,CAAC;AAAA,QACH,CAAC;AAED,aAAK,cAAc,aAAa,IAAI;AAAA,MACtC,CAAC;AAAA,IACH,CAAC;AAED,QAAG,CAAC,QAAQ,sBAAsB,KAAK,aAAa,GAAG;AACrD,WAAK,qBAAqB,KAAK,aAAa;AAAA,IAC9C;AAAA,EAEF;AAAA;AAAA,EAGA,IAAI,UAAU;AACZ,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f697c030ede0efa960b33f85ca9652efe882c805"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return sr=function(){return s},s}sr();class tLe{onSourcesChange;onVectorLayersChange;throttledAnalyzeVectorLayerFields;_sources;_vectorLayers;constructor(e=(sr().b[0][0]++,{})){sr().f[0]++,sr().s[0]++,this.onSourcesChange=(sr().b[1][0]++,e.onSourcesChange||(sr().b[1][1]++,()=>{sr().f[1]++})),sr().s[1]++,this.onVectorLayersChange=(sr().b[2][0]++,e.onVectorLayersChange||(sr().b[2][1]++,()=>{sr().f[2]++})),sr().s[2]++,this._sources={},sr().s[3]++,this._vectorLayers={},sr().s[4]++,this.throttledAnalyzeVectorLayerFields=XPe(this.analyzeVectorLayerFields,5e3)}analyzeMap(e){sr().f[3]++;const t=(sr().s[5]++,{...this._sources});sr().s[6]++;for(const i of Object.keys(e.style.tileManagers))sr().s[7]++,this._sources[i]=e.style.tileManagers[i]._source.vectorLayerIds;sr().s[8]++,yP(t,this._sources)?sr().b[3][1]++:(sr().b[3][0]++,sr().s[9]++,this.onSourcesChange(this._sources)),sr().s[10]++,this.throttledAnalyzeVectorLayerFields(e)}analyzeVectorLayerFields(e){sr().f[4]++;const t=(sr().s[11]++,{...this._vectorLayers});sr().s[12]++,Object.keys(this._sources).forEach(i=>{sr().f[5]++,sr().s[13]++,(sr().b[4][0]++,this._sources[i]||(sr().b[4][1]++,[])).forEach(r=>{sr().f[6]++;const o=(sr().s[14]++,sr().b[5][0]++,this._vectorLayers[r]||(sr().b[5][1]++,{})),s=(sr().s[15]++,{sourceLayer:r});sr().s[16]++,e.querySourceFeatures(i,s).forEach(a=>{sr().f[7]++,sr().s[17]++,Object.keys(a.properties).forEach(c=>{sr().f[8]++;const d=(sr().s[18]++,sr().b[6][0]++,o[c]||(sr().b[6][1]++,{}));sr().s[19]++,d[a.properties[c]]={},sr().s[20]++,o[c]=d})}),sr().s[21]++,this._vectorLayers[r]=o})}),sr().s[22]++,yP(t,this._vectorLayers)?sr().b[7][1]++:(sr().b[7][0]++,sr().s[23]++,this.onVectorLayersChange(this._vectorLayers))}get sources(){return sr().f[9]++,sr().s[24]++,this._sources}get vectorLayers(){return sr().f[10]++,sr().s[25]++,this._vectorLayers}}function pe(){var n="/home/runner/work/maputnik/maputnik/src/components/App.tsx",e="8a07c2afbabbb0ad6515959638246d740e8d9d6d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/App.tsx",statementMap:{0:{start:{line:36,column:0},end:{line:36,column:30}},1:{start:{line:38,column:29},end:{line:38,column:60}},2:{start:{line:39,column:26},end:{line:39,column:54}},3:{start:{line:40,column:31},end:{line:40,column:64}},4:{start:{line:41,column:28},end:{line:41,column:58}},5:{start:{line:42,column:2},end:{line:59,column:3}},6:{start:{line:43,column:24},end:{line:43,column:95}},7:{start:{line:44,column:4},end:{line:46,column:5}},8:{start:{line:45,column:6},end:{line:45,column:47}},9:{start:{line:47,column:9},end:{line:59,column:3}},10:{start:{line:48,column:24},end:{line:48,column:96}},11:{start:{line:49,column:4},end:{line:51,column:5}},12:{start:{line:50,column:6},end:{line:50,column:47}},13:{start:{line:52,column:9},end:{line:59,column:3}},14:{start:{line:53,column:24},end:{line:53,column:93}},15:{start:{line:54,column:4},end:{line:56,column:5}},16:{start:{line:55,column:6},end:{line:55,column:47}},17:{start:{line:58,column:4},end:{line:58,column:15}},18:{start:{line:62,column:2},end:{line:71,column:4}},19:{start:{line:75,column:15},end:{line:75,column:19}},20:{start:{line:78,column:4},end:{line:78,column:17}},21:{start:{line:79,column:4},end:{line:79,column:45}},22:{start:{line:80,column:4},end:{line:80,column:38}},23:{start:{line:81,column:4},end:{line:116,column:6}},24:{start:{line:117,column:4},end:{line:119,column:7}},25:{start:{line:118,column:35},end:{line:118,column:69}},26:{start:{line:121,column:31},end:{line:194,column:3}},27:{start:{line:122,column:22},end:{line:179,column:5}},28:{start:{line:126,column:10},end:{line:126,column:40}},29:{start:{line:132,column:10},end:{line:132,column:35}},30:{start:{line:138,column:10},end:{line:138,column:37}},31:{start:{line:144,column:10},end:{line:144,column:38}},32:{start:{line:150,column:10},end:{line:150,column:39}},33:{start:{line:156,column:10},end:{line:156,column:42}},34:{start:{line:162,column:10},end:{line:164,column:12}},35:{start:{line:170,column:10},end:{line:170,column:63}},36:{start:{line:176,column:10},end:{line:176,column:36}},37:{start:{line:180,column:4},end:{line:193,column:7}},38:{start:{line:181,column:6},end:{line:192,column:7}},39:{start:{line:182,column:8},end:{line:182,column:24}},40:{start:{line:183,column:8},end:{line:183,column:30}},41:{start:{line:184,column:13},end:{line:192,column:7}},42:{start:{line:185,column:25},end:{line:187,column:10}},43:{start:{line:186,column:10},end:{line:186,column:41}},44:{start:{line:188,column:8},end:{line:191,column:9}},45:{start:{line:189,column:10},end:{line:189,column:44}},46:{start:{line:190,column:10},end:{line:190,column:29}},47:{start:{line:195,column:19},end:{line:213,column:3}},48:{start:{line:196,column:4},end:{line:212,column:5}},49:{start:{line:197,column:6},end:{line:203,column:7}},50:{start:{line:198,column:8},end:{line:198,column:27}},51:{start:{line:199,column:8},end:{line:199,column:22}},52:{start:{line:200,column:13},end:{line:203,column:7}},53:{start:{line:201,column:8},end:{line:201,column:27}},54:{start:{line:202,column:8},end:{line:202,column:22}},55:{start:{line:205,column:6},end:{line:211,column:7}},56:{start:{line:206,column:8},end:{line:206,column:27}},57:{start:{line:207,column:8},end:{line:207,column:22}},58:{start:{line:208,column:13},end:{line:211,column:7}},59:{start:{line:209,column:8},end:{line:209,column:27}},60:{start:{line:210,column:8},end:{line:210,column:22}},61:{start:{line:215,column:4},end:{line:215,column:102}},62:{start:{line:215,column:65},end:{line:215,column:100}},63:{start:{line:216,column:4},end:{line:216,column:60}},64:{start:{line:219,column:4},end:{line:219,column:63}},65:{start:{line:222,column:4},end:{line:222,column:41}},66:{start:{line:225,column:21},end:{line:225,column:55}},67:{start:{line:226,column:24},end:{line:226,column:93}},68:{start:{line:227,column:21},end:{line:227,column:110}},69:{start:{line:228,column:4},end:{line:230,column:7}},70:{start:{line:229,column:6},end:{line:229,column:80}},71:{start:{line:233,column:4},end:{line:235,column:7}},72:{start:{line:234,column:6},end:{line:234,column:80}},73:{start:{line:237,column:29},end:{line:251,column:3}},74:{start:{line:238,column:4},end:{line:242,column:5}},75:{start:{line:239,column:6},end:{line:241,column:9}},76:{start:{line:243,column:25},end:{line:249,column:5}},77:{start:{line:250,column:4},end:{line:250,column:38}},78:{start:{line:252,column:19},end:{line:375,column:3}},79:{start:{line:253,column:4},end:{line:258,column:6}},80:{start:{line:259,column:4},end:{line:261,column:5}},81:{start:{line:260,column:6},end:{line:260,column:71}},82:{start:{line:262,column:4},end:{line:264,column:5}},83:{start:{line:263,column:6},end:{line:263,column:71}},84:{start:{line:265,column:4},end:{line:269,column:5}},85:{start:{line:266,column:6},end:{line:268,column:7}},86:{start:{line:267,column:8},end:{line:267,column:63}},87:{start:{line:270,column:4},end:{line:272,column:5}},88:{start:{line:271,column:6},end:{line:271,column:44}},89:{start:{line:273,column:19},end:{line:273,column:51}},90:{start:{line:274,column:24},end:{line:274,column:26}},91:{start:{line:275,column:4},end:{line:286,column:5}},92:{start:{line:276,column:26},end:{line:276,column:42}},93:{start:{line:277,column:6},end:{line:285,column:9}},94:{start:{line:278,column:8},end:{line:283,column:9}},95:{start:{line:279,column:24},end:{line:281,column:11}},96:{start:{line:282,column:10},end:{line:282,column:34}},97:{start:{line:284,column:8},end:{line:284,column:40}},98:{start:{line:287,column:25},end:{line:338,column:6}},99:{start:{line:288,column:23},end:{line:288,column:109}},100:{start:{line:289,column:6},end:{line:302,column:7}},101:{start:{line:290,column:35},end:{line:290,column:43}},102:{start:{line:291,column:8},end:{line:301,column:10}},103:{start:{line:303,column:33},end:{line:303,column:100}},104:{start:{line:304,column:6},end:{line:317,column:7}},105:{start:{line:305,column:35},end:{line:305,column:53}},106:{start:{line:306,column:8},end:{line:316,column:10}},107:{start:{line:318,column:25},end:{line:318,column:88}},108:{start:{line:319,column:6},end:{line:337,column:7}},109:{start:{line:320,column:52},end:{line:320,column:62}},110:{start:{line:321,column:20},end:{line:321,column:78}},111:{start:{line:322,column:8},end:{line:332,column:10}},112:{start:{line:334,column:8},end:{line:336,column:10}},113:{start:{line:339,column:24},end:{line:339,column:30}},114:{start:{line:340,column:4},end:{line:354,column:5}},115:{start:{line:341,column:6},end:{line:341,column:42}},116:{start:{line:342,column:6},end:{line:353,column:7}},117:{start:{line:343,column:28},end:{line:343,column:33}},118:{start:{line:344,column:8},end:{line:352,column:9}},119:{start:{line:345,column:10},end:{line:351,column:11}},120:{start:{line:346,column:28},end:{line:346,column:49}},121:{start:{line:347,column:30},end:{line:347,column:69}},122:{start:{line:348,column:12},end:{line:348,column:44}},123:{start:{line:350,column:12},end:{line:350,column:46}},124:{start:{line:355,column:4},end:{line:357,column:5}},125:{start:{line:356,column:6},end:{line:356,column:40}},126:{start:{line:358,column:4},end:{line:360,column:5}},127:{start:{line:359,column:6},end:{line:359,column:40}},128:{start:{line:361,column:4},end:{line:363,column:5}},129:{start:{line:362,column:6},end:{line:362,column:47}},130:{start:{line:364,column:4},end:{line:366,column:5}},131:{start:{line:365,column:6},end:{line:365,column:31}},132:{start:{line:367,column:4},end:{line:374,column:7}},133:{start:{line:372,column:6},end:{line:372,column:26}},134:{start:{line:373,column:6},end:{line:373,column:27}},135:{start:{line:376,column:11},end:{line:383,column:3}},136:{start:{line:377,column:24},end:{line:377,column:49}},137:{start:{line:378,column:21},end:{line:378,column:67}},138:{start:{line:379,column:4},end:{line:379,column:61}},139:{start:{line:380,column:4},end:{line:382,column:7}},140:{start:{line:384,column:11},end:{line:391,column:3}},141:{start:{line:385,column:24},end:{line:385,column:49}},142:{start:{line:386,column:21},end:{line:386,column:67}},143:{start:{line:387,column:4},end:{line:387,column:61}},144:{start:{line:388,column:4},end:{line:390,column:7}},145:{start:{line:392,column:16},end:{line:406,column:3}},146:{start:{line:393,column:33},end:{line:393,column:37}},147:{start:{line:394,column:17},end:{line:394,column:43}},148:{start:{line:395,column:4},end:{line:395,column:53}},149:{start:{line:396,column:4},end:{line:396,column:53}},150:{start:{line:397,column:4},end:{line:397,column:38}},151:{start:{line:397,column:31},end:{line:397,column:38}},152:{start:{line:398,column:4},end:{line:402,column:5}},153:{start:{line:399,column:6},end:{line:401,column:9}},154:{start:{line:403,column:4},end:{line:403,column:29}},155:{start:{line:404,column:4},end:{line:404,column:49}},156:{start:{line:405,column:4},end:{line:405,column:32}},157:{start:{line:407,column:19},end:{line:413,column:3}},158:{start:{line:408,column:25},end:{line:411,column:5}},159:{start:{line:412,column:4},end:{line:412,column:38}},160:{start:{line:414,column:19},end:{line:419,column:3}},161:{start:{line:415,column:19},end:{line:415,column:45}},162:{start:{line:416,column:28},end:{line:416,column:43}},163:{start:{line:417,column:4},end:{line:417,column:37}},164:{start:{line:418,column:4},end:{line:418,column:41}},165:{start:{line:420,column:16},end:{line:427,column:3}},166:{start:{line:421,column:19},end:{line:421,column:45}},167:{start:{line:422,column:26},end:{line:422,column:41}},168:{start:{line:423,column:24},end:{line:423,column:55}},169:{start:{line:424,column:4},end:{line:424,column:46}},170:{start:{line:425,column:4},end:{line:425,column:48}},171:{start:{line:426,column:4},end:{line:426,column:39}},172:{start:{line:428,column:28},end:{line:437,column:3}},173:{start:{line:429,column:19},end:{line:429,column:45}},174:{start:{line:430,column:26},end:{line:430,column:41}},175:{start:{line:431,column:18},end:{line:431,column:45}},176:{start:{line:432,column:26},end:{line:432,column:70}},177:{start:{line:433,column:4},end:{line:433,column:88}},178:{start:{line:434,column:4},end:{line:434,column:33}},179:{start:{line:435,column:4},end:{line:435,column:33}},180:{start:{line:436,column:4},end:{line:436,column:39}},181:{start:{line:438,column:20},end:{line:445,column:3}},182:{start:{line:439,column:26},end:{line:439,column:61}},183:{start:{line:440,column:4},end:{line:443,column:6}},184:{start:{line:444,column:4},end:{line:444,column:39}},185:{start:{line:446,column:19},end:{line:450,column:3}},186:{start:{line:447,column:26},end:{line:447,column:61}},187:{start:{line:448,column:4},end:{line:448,column:33}},188:{start:{line:449,column:4},end:{line:449,column:39}},189:{start:{line:451,column:16},end:{line:455,column:3}},190:{start:{line:452,column:4},end:{line:454,column:27}},191:{start:{line:456,column:21},end:{line:470,column:3}},192:{start:{line:457,column:21},end:{line:457,column:44}},193:{start:{line:458,column:4},end:{line:469,column:5}},194:{start:{line:459,column:27},end:{line:465,column:7}},195:{start:{line:466,column:6},end:{line:466,column:26}},196:{start:{line:468,column:6},end:{line:468,column:22}},197:{start:{line:471,column:14},end:{line:475,column:3}},198:{start:{line:472,column:4},end:{line:472,column:34}},199:{start:{line:473,column:4},end:{line:473,column:47}},200:{start:{line:474,column:4},end:{line:474,column:34}},201:{start:{line:477,column:23},end:{line:477,column:25}},202:{start:{line:478,column:4},end:{line:517,column:5}},203:{start:{line:479,column:21},end:{line:479,column:53}},204:{start:{line:480,column:6},end:{line:516,column:7}},205:{start:{line:481,column:8},end:{line:481,column:93}},206:{start:{line:482,column:8},end:{line:484,column:9}},207:{start:{line:483,column:10},end:{line:483,column:38}},208:{start:{line:486,column:8},end:{line:489,column:10}},209:{start:{line:490,column:18},end:{line:490,column:28}},210:{start:{line:491,column:8},end:{line:495,column:9}},211:{start:{line:492,column:10},end:{line:492,column:62}},212:{start:{line:494,column:10},end:{line:494,column:63}},213:{start:{line:496,column:32},end:{line:503,column:9}},214:{start:{line:497,column:10},end:{line:499,column:11}},215:{start:{line:498,column:12},end:{line:498,column:19}},216:{start:{line:500,column:10},end:{line:502,column:11}},217:{start:{line:501,column:12},end:{line:501,column:50}},218:{start:{line:504,column:8},end:{line:515,column:9}},219:{start:{line:505,column:10},end:{line:512,column:11}},220:{start:{line:506,column:25},end:{line:506,column:77}},221:{start:{line:507,column:12},end:{line:507,column:34}},222:{start:{line:509,column:29},end:{line:509,column:63}},223:{start:{line:510,column:25},end:{line:510,column:46}},224:{start:{line:511,column:12},end:{line:511,column:34}},225:{start:{line:514,column:10},end:{line:514,column:78}},226:{start:{line:518,column:4},end:{line:523,column:5}},227:{start:{line:519,column:6},end:{line:519,column:51}},228:{start:{line:520,column:6},end:{line:522,column:9}},229:{start:{line:526,column:21},end:{line:526,column:55}},230:{start:{line:527,column:4},end:{line:527,column:53}},231:{start:{line:529,column:16},end:{line:533,column:3}},232:{start:{line:530,column:4},end:{line:532,column:7}},233:{start:{line:535,column:40},end:{line:535,column:50}},234:{start:{line:536,column:21},end:{line:547,column:5}},235:{start:{line:539,column:8},end:{line:541,column:11}},236:{start:{line:544,column:8},end:{line:544,column:44}},237:{start:{line:545,column:8},end:{line:545,column:28}},238:{start:{line:548,column:21},end:{line:548,column:40}},239:{start:{line:550,column:4},end:{line:572,column:5}},240:{start:{line:551,column:6},end:{line:559,column:8}},241:{start:{line:557,column:38},end:{line:557,column:66}},242:{start:{line:561,column:6},end:{line:571,column:8}},243:{start:{line:574,column:4},end:{line:576,column:5}},244:{start:{line:575,column:6},end:{line:575,column:63}},245:{start:{line:577,column:25},end:{line:577,column:27}},246:{start:{line:578,column:4},end:{line:580,column:5}},247:{start:{line:579,column:6},end:{line:579,column:52}},248:{start:{line:581,column:4},end:{line:581,column:160}},249:{start:{line:583,column:18},end:{line:601,column:3}},250:{start:{line:584,column:43},end:{line:584,column:53}},251:{start:{line:585,column:35},end:{line:585,column:45}},252:{start:{line:586,column:16},end:{line:586,column:38}},253:{start:{line:587,column:20},end:{line:587,column:50}},254:{start:{line:588,column:4},end:{line:588,column:70}},255:{start:{line:589,column:23},end:{line:589,column:122}},256:{start:{line:589,column:66},end:{line:589,column:91}},257:{start:{line:589,column:109},end:{line:589,column:121}},258:{start:{line:590,column:4},end:{line:594,column:5}},259:{start:{line:591,column:6},end:{line:591,column:58}},260:{start:{line:593,column:6},end:{line:593,column:39}},261:{start:{line:595,column:4},end:{line:599,column:5}},262:{start:{line:596,column:6},end:{line:596,column:38}},263:{start:{line:597,column:11},end:{line:599,column:5}},264:{start:{line:598,column:6},end:{line:598,column:46}},265:{start:{line:600,column:4},end:{line:600,column:71}},266:{start:{line:602,column:27},end:{line:647,column:3}},267:{start:{line:603,column:16},end:{line:603,column:38}},268:{start:{line:604,column:23},end:{line:604,column:52}},269:{start:{line:605,column:4},end:{line:617,column:5}},270:{start:{line:606,column:21},end:{line:606,column:42}},271:{start:{line:607,column:23},end:{line:607,column:25}},272:{start:{line:608,column:6},end:{line:610,column:9}},273:{start:{line:609,column:8},end:{line:609,column:35}},274:{start:{line:611,column:6},end:{line:616,column:9}},275:{start:{line:618,column:17},end:{line:618,column:45}},276:{start:{line:619,column:4},end:{line:621,column:5}},277:{start:{line:620,column:6},end:{line:620,column:29}},278:{start:{line:622,column:17},end:{line:622,column:46}},279:{start:{line:623,column:4},end:{line:646,column:5}},280:{start:{line:624,column:6},end:{line:645,column:7}},281:{start:{line:625,column:22},end:{line:625,column:37}},282:{start:{line:626,column:46},end:{line:629,column:9}},283:{start:{line:630,column:20},end:{line:630,column:24}},284:{start:{line:631,column:8},end:{line:636,column:9}},285:{start:{line:632,column:33},end:{line:632,column:63}},286:{start:{line:633,column:10},end:{line:635,column:11}},287:{start:{line:634,column:12},end:{line:634,column:26}},288:{start:{line:637,column:8},end:{line:642,column:9}},289:{start:{line:638,column:10},end:{line:641,column:13}},290:{start:{line:644,column:8},end:{line:644,column:26}},291:{start:{line:648,column:18},end:{line:653,column:3}},292:{start:{line:649,column:4},end:{line:652,column:27}},293:{start:{line:655,column:4},end:{line:660,column:27}},294:{start:{line:663,column:4},end:{line:663,column:60}},295:{start:{line:665,column:20},end:{line:667,column:3}},296:{start:{line:666,column:4},end:{line:666,column:34}},297:{start:{line:668,column:28},end:{line:675,column:3}},298:{start:{line:669,column:4},end:{line:674,column:7}},299:{start:{line:676,column:28},end:{line:683,column:3}},300:{start:{line:677,column:4},end:{line:682,column:7}},301:{start:{line:685,column:19},end:{line:685,column:51}},302:{start:{line:686,column:26},end:{line:686,column:92}},303:{start:{line:687,column:36},end:{line:700,column:5}},304:{start:{line:698,column:34},end:{line:698,column:57}},305:{start:{line:701,column:23},end:{line:708,column:14}},306:{start:{line:705,column:30},end:{line:705,column:57}},307:{start:{line:706,column:23},end:{line:706,column:57}},308:{start:{line:709,column:38},end:{line:723,column:5}},309:{start:{line:724,column:24},end:{line:743,column:14}},310:{start:{line:744,column:24},end:{line:754,column:14}},311:{start:{line:755,column:35},end:{line:824,column:8}},312:{start:{line:765,column:30},end:{line:765,column:55}},313:{start:{line:773,column:30},end:{line:773,column:59}},314:{start:{line:783,column:30},end:{line:783,column:58}},315:{start:{line:792,column:30},end:{line:792,column:56}},316:{start:{line:802,column:30},end:{line:802,column:54}},317:{start:{line:812,column:30},end:{line:812,column:57}},318:{start:{line:821,column:30},end:{line:821,column:61}},319:{start:{line:825,column:4},end:{line:836,column:6}}},fnMap:{0:{name:"setFetchAccessToken",decl:{start:{line:37,column:9},end:{line:37,column:28}},loc:{start:{line:37,column:44},end:{line:60,column:1}},line:37},1:{name:"updateRootSpec",decl:{start:{line:61,column:9},end:{line:61,column:23}},loc:{start:{line:61,column:52},end:{line:72,column:1}},line:61},2:{name:"(anonymous_2)",decl:{start:{line:77,column:2},end:{line:77,column:3}},loc:{start:{line:77,column:21},end:{line:120,column:3}},line:77},3:{name:"(anonymous_3)",decl:{start:{line:118,column:28},end:{line:118,column:29}},loc:{start:{line:118,column:35},end:{line:118,column:69}},line:118},4:{name:"(anonymous_4)",decl:{start:{line:121,column:31},end:{line:121,column:32}},loc:{start:{line:121,column:37},end:{line:194,column:3}},line:121},5:{name:"(anonymous_5)",decl:{start:{line:125,column:17},end:{line:125,column:18}},loc:{start:{line:125,column:23},end:{line:127,column:9}},line:125},6:{name:"(anonymous_6)",decl:{start:{line:131,column:17},end:{line:131,column:18}},loc:{start:{line:131,column:23},end:{line:133,column:9}},line:131},7:{name:"(anonymous_7)",decl:{start:{line:137,column:17},end:{line:137,column:18}},loc:{start:{line:137,column:23},end:{line:139,column:9}},line:137},8:{name:"(anonymous_8)",decl:{start:{line:143,column:17},end:{line:143,column:18}},loc:{start:{line:143,column:23},end:{line:145,column:9}},line:143},9:{name:"(anonymous_9)",decl:{start:{line:149,column:17},end:{line:149,column:18}},loc:{start:{line:149,column:23},end:{line:151,column:9}},line:149},10:{name:"(anonymous_10)",decl:{start:{line:155,column:17},end:{line:155,column:18}},loc:{start:{line:155,column:23},end:{line:157,column:9}},line:155},11:{name:"(anonymous_11)",decl:{start:{line:161,column:17},end:{line:161,column:18}},loc:{start:{line:161,column:23},end:{line:165,column:9}},line:161},12:{name:"(anonymous_12)",decl:{start:{line:169,column:17},end:{line:169,column:18}},loc:{start:{line:169,column:23},end:{line:171,column:9}},line:169},13:{name:"(anonymous_13)",decl:{start:{line:175,column:17},end:{line:175,column:18}},loc:{start:{line:175,column:23},end:{line:177,column:9}},line:175},14:{name:"(anonymous_14)",decl:{start:{line:180,column:44},end:{line:180,column:45}},loc:{start:{line:180,column:51},end:{line:193,column:5}},line:180},15:{name:"(anonymous_15)",decl:{start:{line:185,column:40},end:{line:185,column:41}},loc:{start:{line:185,column:55},end:{line:187,column:9}},line:185},16:{name:"(anonymous_16)",decl:{start:{line:195,column:19},end:{line:195,column:20}},loc:{start:{line:195,column:26},end:{line:213,column:3}},line:195},17:{name:"(anonymous_17)",decl:{start:{line:214,column:2},end:{line:214,column:3}},loc:{start:{line:214,column:28},end:{line:217,column:3}},line:214},18:{name:"(anonymous_18)",decl:{start:{line:215,column:45},end:{line:215,column:46}},loc:{start:{line:215,column:65},end:{line:215,column:100}},line:215},19:{name:"(anonymous_19)",decl:{start:{line:218,column:2},end:{line:218,column:3}},loc:{start:{line:218,column:25},end:{line:220,column:3}},line:218},20:{name:"(anonymous_20)",decl:{start:{line:221,column:2},end:{line:221,column:3}},loc:{start:{line:221,column:27},end:{line:223,column:3}},line:221},21:{name:"(anonymous_21)",decl:{start:{line:224,column:2},end:{line:224,column:3}},loc:{start:{line:224,column:27},end:{line:231,column:3}},line:224},22:{name:"(anonymous_22)",decl:{start:{line:228,column:42},end:{line:228,column:43}},loc:{start:{line:228,column:53},end:{line:230,column:5}},line:228},23:{name:"(anonymous_23)",decl:{start:{line:232,column:2},end:{line:232,column:3}},loc:{start:{line:232,column:23},end:{line:236,column:3}},line:232},24:{name:"(anonymous_24)",decl:{start:{line:233,column:41},end:{line:233,column:42}},loc:{start:{line:233,column:52},end:{line:235,column:5}},line:233},25:{name:"(anonymous_25)",decl:{start:{line:237,column:29},end:{line:237,column:30}},loc:{start:{line:237,column:50},end:{line:251,column:3}},line:237},26:{name:"(anonymous_26)",decl:{start:{line:252,column:19},end:{line:252,column:20}},loc:{start:{line:252,column:44},end:{line:375,column:3}},line:252},27:{name:"(anonymous_27)",decl:{start:{line:277,column:30},end:{line:277,column:31}},loc:{start:{line:277,column:48},end:{line:285,column:7}},line:277},28:{name:"(anonymous_28)",decl:{start:{line:287,column:56},end:{line:287,column:57}},loc:{start:{line:287,column:67},end:{line:338,column:5}},line:287},29:{name:"(anonymous_29)",decl:{start:{line:371,column:7},end:{line:371,column:8}},loc:{start:{line:371,column:13},end:{line:374,column:5}},line:371},30:{name:"(anonymous_30)",decl:{start:{line:376,column:11},end:{line:376,column:12}},loc:{start:{line:376,column:17},end:{line:383,column:3}},line:376},31:{name:"(anonymous_31)",decl:{start:{line:384,column:11},end:{line:384,column:12}},loc:{start:{line:384,column:17},end:{line:391,column:3}},line:384},32:{name:"(anonymous_32)",decl:{start:{line:392,column:16},end:{line:392,column:17}},loc:{start:{line:392,column:26},end:{line:406,column:3}},line:392},33:{name:"(anonymous_33)",decl:{start:{line:407,column:19},end:{line:407,column:20}},loc:{start:{line:407,column:38},end:{line:413,column:3}},line:407},34:{name:"(anonymous_34)",decl:{start:{line:414,column:19},end:{line:414,column:20}},loc:{start:{line:414,column:30},end:{line:419,column:3}},line:414},35:{name:"(anonymous_35)",decl:{start:{line:420,column:16},end:{line:420,column:17}},loc:{start:{line:420,column:27},end:{line:427,column:3}},line:420},36:{name:"(anonymous_36)",decl:{start:{line:428,column:28},end:{line:428,column:29}},loc:{start:{line:428,column:39},end:{line:437,column:3}},line:428},37:{name:"(anonymous_37)",decl:{start:{line:438,column:20},end:{line:438,column:21}},loc:{start:{line:438,column:46},end:{line:445,column:3}},line:438},38:{name:"(anonymous_38)",decl:{start:{line:446,column:19},end:{line:446,column:20}},loc:{start:{line:446,column:37},end:{line:450,column:3}},line:446},39:{name:"(anonymous_39)",decl:{start:{line:451,column:16},end:{line:451,column:17}},loc:{start:{line:451,column:30},end:{line:455,column:3}},line:451},40:{name:"(anonymous_40)",decl:{start:{line:456,column:21},end:{line:456,column:22}},loc:{start:{line:456,column:35},end:{line:470,column:3}},line:456},41:{name:"(anonymous_41)",decl:{start:{line:471,column:14},end:{line:471,column:15}},loc:{start:{line:471,column:40},end:{line:475,column:3}},line:471},42:{name:"(anonymous_42)",decl:{start:{line:476,column:2},end:{line:476,column:3}},loc:{start:{line:476,column:23},end:{line:524,column:3}},line:476},43:{name:"(anonymous_43)",decl:{start:{line:496,column:32},end:{line:496,column:33}},loc:{start:{line:496,column:42},end:{line:503,column:9}},line:496},44:{name:"(anonymous_44)",decl:{start:{line:525,column:2},end:{line:525,column:3}},loc:{start:{line:525,column:17},end:{line:528,column:3}},line:525},45:{name:"(anonymous_45)",decl:{start:{line:529,column:16},end:{line:529,column:17}},loc:{start:{line:529,column:29},end:{line:533,column:3}},line:529},46:{name:"(anonymous_46)",decl:{start:{line:534,column:2},end:{line:534,column:3}},loc:{start:{line:534,column:16},end:{line:582,column:3}},line:534},47:{name:"(anonymous_47)",decl:{start:{line:538,column:27},end:{line:538,column:28}},loc:{start:{line:538,column:42},end:{line:542,column:7}},line:538},48:{name:"(anonymous_48)",decl:{start:{line:543,column:20},end:{line:543,column:21}},loc:{start:{line:543,column:27},end:{line:546,column:7}},line:543},49:{name:"(anonymous_49)",decl:{start:{line:557,column:25},end:{line:557,column:26}},loc:{start:{line:557,column:38},end:{line:557,column:66}},line:557},50:{name:"(anonymous_50)",decl:{start:{line:583,column:18},end:{line:583,column:19}},loc:{start:{line:583,column:24},end:{line:601,column:3}},line:583},51:{name:"(anonymous_51)",decl:{start:{line:589,column:50},end:{line:589,column:51}},loc:{start:{line:589,column:66},end:{line:589,column:91}},line:589},52:{name:"(anonymous_52)",decl:{start:{line:589,column:100},end:{line:589,column:101}},loc:{start:{line:589,column:109},end:{line:589,column:121}},line:589},53:{name:"(anonymous_53)",decl:{start:{line:602,column:27},end:{line:602,column:28}},loc:{start:{line:602,column:41},end:{line:647,column:3}},line:602},54:{name:"(anonymous_54)",decl:{start:{line:608,column:21},end:{line:608,column:22}},loc:{start:{line:608,column:36},end:{line:610,column:7}},line:608},55:{name:"(anonymous_55)",decl:{start:{line:648,column:18},end:{line:648,column:19}},loc:{start:{line:648,column:29},end:{line:653,column:3}},line:648},56:{name:"(anonymous_56)",decl:{start:{line:654,column:2},end:{line:654,column:3}},loc:{start:{line:654,column:29},end:{line:661,column:3}},line:654},57:{name:"(anonymous_57)",decl:{start:{line:662,column:2},end:{line:662,column:3}},loc:{start:{line:662,column:25},end:{line:664,column:3}},line:662},58:{name:"(anonymous_58)",decl:{start:{line:665,column:20},end:{line:665,column:21}},loc:{start:{line:665,column:36},end:{line:667,column:3}},line:665},59:{name:"(anonymous_59)",decl:{start:{line:668,column:28},end:{line:668,column:29}},loc:{start:{line:668,column:44},end:{line:675,column:3}},line:668},60:{name:"(anonymous_60)",decl:{start:{line:676,column:28},end:{line:676,column:29}},loc:{start:{line:676,column:44},end:{line:683,column:3}},line:676},61:{name:"(anonymous_61)",decl:{start:{line:684,column:2},end:{line:684,column:3}},loc:{start:{line:684,column:11},end:{line:837,column:3}},line:684},62:{name:"(anonymous_62)",decl:{start:{line:698,column:23},end:{line:698,column:24}},loc:{start:{line:698,column:34},end:{line:698,column:57}},line:698},63:{name:"(anonymous_63)",decl:{start:{line:705,column:18},end:{line:705,column:19}},loc:{start:{line:705,column:30},end:{line:705,column:57}},line:705},64:{name:"(anonymous_64)",decl:{start:{line:706,column:17},end:{line:706,column:18}},loc:{start:{line:706,column:23},end:{line:706,column:57}},line:706},65:{name:"(anonymous_65)",decl:{start:{line:765,column:24},end:{line:765,column:25}},loc:{start:{line:765,column:30},end:{line:765,column:55}},line:765},66:{name:"(anonymous_66)",decl:{start:{line:773,column:24},end:{line:773,column:25}},loc:{start:{line:773,column:30},end:{line:773,column:59}},line:773},67:{name:"(anonymous_67)",decl:{start:{line:783,column:24},end:{line:783,column:25}},loc:{start:{line:783,column:30},end:{line:783,column:58}},line:783},68:{name:"(anonymous_68)",decl:{start:{line:792,column:24},end:{line:792,column:25}},loc:{start:{line:792,column:30},end:{line:792,column:56}},line:792},69:{name:"(anonymous_69)",decl:{start:{line:802,column:24},end:{line:802,column:25}},loc:{start:{line:802,column:30},end:{line:802,column:54}},line:802},70:{name:"(anonymous_70)",decl:{start:{line:812,column:24},end:{line:812,column:25}},loc:{start:{line:812,column:30},end:{line:812,column:57}},line:812},71:{name:"(anonymous_71)",decl:{start:{line:821,column:24},end:{line:821,column:25}},loc:{start:{line:821,column:30},end:{line:821,column:61}},line:821}},branchMap:{0:{loc:{start:{line:42,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:59,column:3}},{start:{line:47,column:9},end:{line:59,column:3}}],line:42},1:{loc:{start:{line:42,column:6},end:{line:42,column:43}},type:"binary-expr",locations:[{start:{line:42,column:6},end:{line:42,column:24}},{start:{line:42,column:28},end:{line:42,column:43}}],line:42},2:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},3:{loc:{start:{line:47,column:9},end:{line:59,column:3}},type:"if",locations:[{start:{line:47,column:9},end:{line:59,column:3}},{start:{line:52,column:9},end:{line:59,column:3}}],line:47},4:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:52,column:9},end:{line:59,column:3}},type:"if",locations:[{start:{line:52,column:9},end:{line:59,column:3}},{start:{line:57,column:9},end:{line:59,column:3}}],line:52},6:{loc:{start:{line:54,column:4},end:{line:56,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:56,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},7:{loc:{start:{line:163,column:12},end:{line:163,column:61}},type:"cond-expr",locations:[{start:{line:163,column:44},end:{line:163,column:53}},{start:{line:163,column:56},end:{line:163,column:61}}],line:163},8:{loc:{start:{line:181,column:6},end:{line:192,column:7}},type:"if",locations:[{start:{line:181,column:6},end:{line:192,column:7}},{start:{line:184,column:13},end:{line:192,column:7}}],line:181},9:{loc:{start:{line:184,column:13},end:{line:192,column:7}},type:"if",locations:[{start:{line:184,column:13},end:{line:192,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:184},10:{loc:{start:{line:184,column:17},end:{line:184,column:88}},type:"binary-expr",locations:[{start:{line:184,column:17},end:{line:184,column:44}},{start:{line:184,column:48},end:{line:184,column:88}}],line:184},11:{loc:{start:{line:188,column:8},end:{line:191,column:9}},type:"if",locations:[{start:{line:188,column:8},end:{line:191,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:188},12:{loc:{start:{line:196,column:4},end:{line:212,column:5}},type:"if",locations:[{start:{line:196,column:4},end:{line:212,column:5}},{start:{line:204,column:11},end:{line:212,column:5}}],line:196},13:{loc:{start:{line:197,column:6},end:{line:203,column:7}},type:"if",locations:[{start:{line:197,column:6},end:{line:203,column:7}},{start:{line:200,column:13},end:{line:203,column:7}}],line:197},14:{loc:{start:{line:197,column:10},end:{line:197,column:53}},type:"binary-expr",locations:[{start:{line:197,column:10},end:{line:197,column:19}},{start:{line:197,column:23},end:{line:197,column:33}},{start:{line:197,column:37},end:{line:197,column:53}}],line:197},15:{loc:{start:{line:200,column:13},end:{line:203,column:7}},type:"if",locations:[{start:{line:200,column:13},end:{line:203,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:200},16:{loc:{start:{line:200,column:17},end:{line:200,column:46}},type:"binary-expr",locations:[{start:{line:200,column:17},end:{line:200,column:26}},{start:{line:200,column:30},end:{line:200,column:46}}],line:200},17:{loc:{start:{line:205,column:6},end:{line:211,column:7}},type:"if",locations:[{start:{line:205,column:6},end:{line:211,column:7}},{start:{line:208,column:13},end:{line:211,column:7}}],line:205},18:{loc:{start:{line:205,column:10},end:{line:205,column:39}},type:"binary-expr",locations:[{start:{line:205,column:10},end:{line:205,column:19}},{start:{line:205,column:23},end:{line:205,column:39}}],line:205},19:{loc:{start:{line:208,column:13},end:{line:211,column:7}},type:"if",locations:[{start:{line:208,column:13},end:{line:211,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:208},20:{loc:{start:{line:208,column:17},end:{line:208,column:46}},type:"binary-expr",locations:[{start:{line:208,column:17},end:{line:208,column:26}},{start:{line:208,column:30},end:{line:208,column:46}}],line:208},21:{loc:{start:{line:225,column:21},end:{line:225,column:55}},type:"binary-expr",locations:[{start:{line:225,column:21},end:{line:225,column:49}},{start:{line:225,column:53},end:{line:225,column:55}}],line:225},22:{loc:{start:{line:226,column:24},end:{line:226,column:93}},type:"binary-expr",locations:[{start:{line:226,column:24},end:{line:226,column:70}},{start:{line:226,column:74},end:{line:226,column:93}}],line:226},23:{loc:{start:{line:227,column:21},end:{line:227,column:110}},type:"cond-expr",locations:[{start:{line:227,column:55},end:{line:227,column:96}},{start:{line:227,column:99},end:{line:227,column:110}}],line:227},24:{loc:{start:{line:238,column:4},end:{line:242,column:5}},type:"if",locations:[{start:{line:238,column:4},end:{line:242,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:238},25:{loc:{start:{line:238,column:8},end:{line:238,column:123}},type:"binary-expr",locations:[{start:{line:238,column:8},end:{line:238,column:40}},{start:{line:238,column:44},end:{line:238,column:123}}],line:238},26:{loc:{start:{line:252,column:30},end:{line:252,column:39}},type:"default-arg",locations:[{start:{line:252,column:37},end:{line:252,column:39}}],line:252},27:{loc:{start:{line:259,column:4},end:{line:261,column:5}},type:"if",locations:[{start:{line:259,column:4},end:{line:261,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:259},28:{loc:{start:{line:259,column:8},end:{line:259,column:62}},type:"binary-expr",locations:[{start:{line:259,column:8},end:{line:259,column:23}},{start:{line:259,column:27},end:{line:259,column:62}}],line:259},29:{loc:{start:{line:262,column:4},end:{line:264,column:5}},type:"if",locations:[{start:{line:262,column:4},end:{line:264,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:262},30:{loc:{start:{line:262,column:8},end:{line:262,column:62}},type:"binary-expr",locations:[{start:{line:262,column:8},end:{line:262,column:23}},{start:{line:262,column:27},end:{line:262,column:62}}],line:262},31:{loc:{start:{line:266,column:6},end:{line:268,column:7}},type:"if",locations:[{start:{line:266,column:6},end:{line:268,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:266},32:{loc:{start:{line:266,column:10},end:{line:266,column:69}},type:"binary-expr",locations:[{start:{line:266,column:10},end:{line:266,column:16}},{start:{line:266,column:20},end:{line:266,column:35}},{start:{line:266,column:39},end:{line:266,column:69}}],line:266},33:{loc:{start:{line:270,column:4},end:{line:272,column:5}},type:"if",locations:[{start:{line:270,column:4},end:{line:272,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:270},34:{loc:{start:{line:273,column:19},end:{line:273,column:51}},type:"binary-expr",locations:[{start:{line:273,column:19},end:{line:273,column:45}},{start:{line:273,column:49},end:{line:273,column:51}}],line:273},35:{loc:{start:{line:275,column:4},end:{line:286,column:5}},type:"if",locations:[{start:{line:275,column:4},end:{line:286,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:275},36:{loc:{start:{line:275,column:8},end:{line:275,column:35}},type:"binary-expr",locations:[{start:{line:275,column:8},end:{line:275,column:16}},{start:{line:275,column:20},end:{line:275,column:35}}],line:275},37:{loc:{start:{line:278,column:8},end:{line:283,column:9}},type:"if",locations:[{start:{line:278,column:8},end:{line:283,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:278},38:{loc:{start:{line:278,column:12},end:{line:278,column:56}},type:"binary-expr",locations:[{start:{line:278,column:12},end:{line:278,column:27}},{start:{line:278,column:31},end:{line:278,column:56}}],line:278},39:{loc:{start:{line:289,column:6},end:{line:302,column:7}},type:"if",locations:[{start:{line:289,column:6},end:{line:302,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:289},40:{loc:{start:{line:304,column:6},end:{line:317,column:7}},type:"if",locations:[{start:{line:304,column:6},end:{line:317,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:304},41:{loc:{start:{line:319,column:6},end:{line:337,column:7}},type:"if",locations:[{start:{line:319,column:6},end:{line:337,column:7}},{start:{line:333,column:13},end:{line:337,column:7}}],line:319},42:{loc:{start:{line:321,column:20},end:{line:321,column:78}},type:"cond-expr",locations:[{start:{line:321,column:40},end:{line:321,column:67}},{start:{line:321,column:70},end:{line:321,column:78}}],line:321},43:{loc:{start:{line:321,column:20},end:{line:321,column:37}},type:"binary-expr",locations:[{start:{line:321,column:20},end:{line:321,column:25}},{start:{line:321,column:29},end:{line:321,column:37}}],line:321},44:{loc:{start:{line:340,column:4},end:{line:354,column:5}},type:"if",locations:[{start:{line:340,column:4},end:{line:354,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:340},45:{loc:{start:{line:344,column:8},end:{line:352,column:9}},type:"if",locations:[{start:{line:344,column:8},end:{line:352,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:344},46:{loc:{start:{line:355,column:4},end:{line:357,column:5}},type:"if",locations:[{start:{line:355,column:4},end:{line:357,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:355},47:{loc:{start:{line:358,column:4},end:{line:360,column:5}},type:"if",locations:[{start:{line:358,column:4},end:{line:360,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:358},48:{loc:{start:{line:361,column:4},end:{line:363,column:5}},type:"if",locations:[{start:{line:361,column:4},end:{line:363,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:361},49:{loc:{start:{line:364,column:4},end:{line:366,column:5}},type:"if",locations:[{start:{line:364,column:4},end:{line:366,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:364},50:{loc:{start:{line:397,column:4},end:{line:397,column:38}},type:"if",locations:[{start:{line:397,column:4},end:{line:397,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:397},51:{loc:{start:{line:398,column:4},end:{line:402,column:5}},type:"if",locations:[{start:{line:398,column:4},end:{line:402,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:398},52:{loc:{start:{line:432,column:26},end:{line:432,column:70}},type:"cond-expr",locations:[{start:{line:432,column:46},end:{line:432,column:65}},{start:{line:432,column:68},end:{line:432,column:70}}],line:432},53:{loc:{start:{line:433,column:31},end:{line:433,column:87}},type:"cond-expr",locations:[{start:{line:433,column:69},end:{line:433,column:78}},{start:{line:433,column:81},end:{line:433,column:87}}],line:433},54:{loc:{start:{line:457,column:21},end:{line:457,column:44}},type:"binary-expr",locations:[{start:{line:457,column:21},end:{line:457,column:38}},{start:{line:457,column:42},end:{line:457,column:44}}],line:457},55:{loc:{start:{line:458,column:4},end:{line:469,column:5}},type:"if",locations:[{start:{line:458,column:4},end:{line:469,column:5}},{start:{line:467,column:11},end:{line:469,column:5}}],line:458},56:{loc:{start:{line:480,column:6},end:{line:516,column:7}},type:"if",locations:[{start:{line:480,column:6},end:{line:516,column:7}},{start:{line:485,column:13},end:{line:516,column:7}}],line:480},57:{loc:{start:{line:480,column:10},end:{line:480,column:56}},type:"binary-expr",locations:[{start:{line:480,column:10},end:{line:480,column:34}},{start:{line:480,column:38},end:{line:480,column:56}}],line:480},58:{loc:{start:{line:481,column:26},end:{line:481,column:92}},type:"binary-expr",locations:[{start:{line:481,column:26},end:{line:481,column:49}},{start:{line:481,column:53},end:{line:481,column:92}}],line:481},59:{loc:{start:{line:482,column:8},end:{line:484,column:9}},type:"if",locations:[{start:{line:482,column:8},end:{line:484,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:482},60:{loc:{start:{line:497,column:10},end:{line:499,column:11}},type:"if",locations:[{start:{line:497,column:10},end:{line:499,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:497},61:{loc:{start:{line:505,column:10},end:{line:512,column:11}},type:"if",locations:[{start:{line:505,column:10},end:{line:512,column:11}},{start:{line:508,column:17},end:{line:512,column:11}}],line:505},62:{loc:{start:{line:518,column:4},end:{line:523,column:5}},type:"if",locations:[{start:{line:518,column:4},end:{line:523,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:518},63:{loc:{start:{line:526,column:21},end:{line:526,column:55}},type:"binary-expr",locations:[{start:{line:526,column:21},end:{line:526,column:49}},{start:{line:526,column:53},end:{line:526,column:55}}],line:526},64:{loc:{start:{line:527,column:11},end:{line:527,column:52}},type:"binary-expr",locations:[{start:{line:527,column:11},end:{line:527,column:40}},{start:{line:527,column:44},end:{line:527,column:52}}],line:527},65:{loc:{start:{line:537,column:16},end:{line:537,column:41}},type:"binary-expr",locations:[{start:{line:537,column:16},end:{line:537,column:29}},{start:{line:537,column:33},end:{line:537,column:41}}],line:537},66:{loc:{start:{line:550,column:4},end:{line:572,column:5}},type:"if",locations:[{start:{line:550,column:4},end:{line:572,column:5}},{start:{line:560,column:11},end:{line:572,column:5}}],line:550},67:{loc:{start:{line:574,column:4},end:{line:576,column:5}},type:"if",locations:[{start:{line:574,column:4},end:{line:576,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:574},68:{loc:{start:{line:578,column:4},end:{line:580,column:5}},type:"if",locations:[{start:{line:578,column:4},end:{line:580,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:578},69:{loc:{start:{line:589,column:66},end:{line:589,column:91}},type:"cond-expr",locations:[{start:{line:589,column:81},end:{line:589,column:84}},{start:{line:589,column:87},end:{line:589,column:91}}],line:589},70:{loc:{start:{line:590,column:4},end:{line:594,column:5}},type:"if",locations:[{start:{line:590,column:4},end:{line:594,column:5}},{start:{line:592,column:11},end:{line:594,column:5}}],line:590},71:{loc:{start:{line:595,column:4},end:{line:599,column:5}},type:"if",locations:[{start:{line:595,column:4},end:{line:599,column:5}},{start:{line:597,column:11},end:{line:599,column:5}}],line:595},72:{loc:{start:{line:597,column:11},end:{line:599,column:5}},type:"if",locations:[{start:{line:597,column:11},end:{line:599,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:597},73:{loc:{start:{line:605,column:4},end:{line:617,column:5}},type:"if",locations:[{start:{line:605,column:4},end:{line:617,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:605},74:{loc:{start:{line:605,column:8},end:{line:605,column:39}},type:"binary-expr",locations:[{start:{line:605,column:8},end:{line:605,column:18}},{start:{line:605,column:22},end:{line:605,column:39}}],line:605},75:{loc:{start:{line:619,column:4},end:{line:621,column:5}},type:"if",locations:[{start:{line:619,column:4},end:{line:621,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:619},76:{loc:{start:{line:619,column:8},end:{line:619,column:27}},type:"binary-expr",locations:[{start:{line:619,column:8},end:{line:619,column:12}},{start:{line:619,column:16},end:{line:619,column:27}}],line:619},77:{loc:{start:{line:623,column:4},end:{line:646,column:5}},type:"if",locations:[{start:{line:623,column:4},end:{line:646,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:623},78:{loc:{start:{line:631,column:8},end:{line:636,column:9}},type:"if",locations:[{start:{line:631,column:8},end:{line:636,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:631},79:{loc:{start:{line:633,column:10},end:{line:635,column:11}},type:"if",locations:[{start:{line:633,column:10},end:{line:635,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:633},80:{loc:{start:{line:637,column:8},end:{line:642,column:9}},type:"if",locations:[{start:{line:637,column:8},end:{line:642,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:637},81:{loc:{start:{line:685,column:19},end:{line:685,column:51}},type:"binary-expr",locations:[{start:{line:685,column:19},end:{line:685,column:45}},{start:{line:685,column:49},end:{line:685,column:51}}],line:685},82:{loc:{start:{line:686,column:26},end:{line:686,column:92}},type:"cond-expr",locations:[{start:{line:686,column:46},end:{line:686,column:83}},{start:{line:686,column:86},end:{line:686,column:92}}],line:686},83:{loc:{start:{line:701,column:23},end:{line:708,column:14}},type:"cond-expr",locations:[{start:{line:701,column:70},end:{line:708,column:5}},{start:{line:708,column:8},end:{line:708,column:14}}],line:701},84:{loc:{start:{line:724,column:24},end:{line:743,column:14}},type:"cond-expr",locations:[{start:{line:724,column:56},end:{line:743,column:5}},{start:{line:743,column:8},end:{line:743,column:14}}],line:724},85:{loc:{start:{line:744,column:24},end:{line:754,column:14}},type:"cond-expr",locations:[{start:{line:744,column:97},end:{line:754,column:5}},{start:{line:754,column:8},end:{line:754,column:14}}],line:744}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0,153:0,154:0,155:0,156:0,157:0,158:0,159:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,168:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,179:0,180:0,181:0,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:0,190:0,191:0,192:0,193:0,194:0,195:0,196:0,197:0,198:0,199:0,200:0,201:0,202:0,203:0,204:0,205:0,206:0,207:0,208:0,209:0,210:0,211:0,212:0,213:0,214:0,215:0,216:0,217:0,218:0,219:0,220:0,221:0,222:0,223:0,224:0,225:0,226:0,227:0,228:0,229:0,230:0,231:0,232:0,233:0,234:0,235:0,236:0,237:0,238:0,239:0,240:0,241:0,242:0,243:0,244:0,245:0,246:0,247:0,248:0,249:0,250:0,251:0,252:0,253:0,254:0,255:0,256:0,257:0,258:0,259:0,260:0,261:0,262:0,263:0,264:0,265:0,266:0,267:0,268:0,269:0,270:0,271:0,272:0,273:0,274:0,275:0,276:0,277:0,278:0,279:0,280:0,281:0,282:0,283:0,284:0,285:0,286:0,287:0,288:0,289:0,290:0,291:0,292:0,293:0,294:0,295:0,296:0,297:0,298:0,299:0,300:0,301:0,302:0,303:0,304:0,305:0,306:0,307:0,308:0,309:0,310:0,311:0,312:0,313:0,314:0,315:0,316:0,317:0,318:0,319:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0,0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0],48:[0,0],49:[0,0],50:[0,0],51:[0,0],52:[0,0],53:[0,0],54:[0,0],55:[0,0],56:[0,0],57:[0,0],58:[0,0],59:[0,0],60:[0,0],61:[0,0],62:[0,0],63:[0,0],64:[0,0],65:[0,0],66:[0,0],67:[0,0],68:[0,0],69:[0,0],70:[0,0],71:[0,0],72:[0,0],73:[0,0],74:[0,0],75:[0,0],76:[0,0],77:[0,0],78:[0,0],79:[0,0],80:[0,0],81:[0,0],82:[0,0],83:[0,0],84:[0,0],85:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/App.tsx"],names:["shortcut","mapStyle","style"],mappings:"AAurBmB,SAAA,KAwNA,YAxNA;AAvrBnB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,SAAS;AAChB,SAAQ,aAAY;AACpB,SAAQ,wBAAuB;AAC/B,OAAO,UAAU;AACjB,SAAS,eAAe;AAExB,SAAQ,wBAAuB;AAC/B,OAAO,YAAY;AAEnB,OAAO,mBAAmB;AAC1B,OAAO,mBAAmB;AAC1B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,gBAAmC;AAC1C,OAAO,eAAe;AACtB,OAAO,kBAAkB;AAEzB,OAAO,mBAAmB;AAC1B,OAAO,iBAAiB;AACxB,OAAO,kBAAkB;AACzB,OAAO,eAAe;AACtB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AACvB,OAAO,sBAAsB;AAE7B,SAAQ,wBAAwB,8BAA6B;AAC7D,OAAO,WAAW;AAClB,SAAS,cAAc,oBAAoB;AAC3C,SAAS,wBAA0C;AACnD,SAAS,qBAAqB;AAC9B,OAAO,kBAAkB;AACzB,OAAO,YAAY;AACnB,OAAO,aAAa;AAKpB,OAAO,SAAS,OAAO;AAEvB,SAAS,oBAAoB,KAAa,UAA8B;AACtE,QAAM,qBAAqB,IAAI,MAAM,oBAAoB;AACzD,QAAM,kBAAkB,IAAI,MAAM,iBAAiB;AACnD,QAAM,uBAAuB,IAAI,MAAM,sBAAsB;AAC7D,QAAM,oBAAoB,IAAI,MAAM,mBAAmB;AACvD,MAAI,sBAAsB,iBAAiB;AACzC,UAAM,cAAc,MAAM,eAAe,gBAAgB,UAAU,EAAC,eAAe,KAAI,CAAC;AACxF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,sBAAsB;AAC7B,UAAM,cAAc,MAAM,eAAe,iBAAiB,UAAU,EAAC,eAAe,KAAI,CAAC;AACzF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,mBAAmB;AAC1B,UAAM,cAAc,MAAM,eAAe,cAAc,UAAU,EAAC,eAAe,KAAI,CAAC;AACtF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,eAAe,MAAW,WAAmB,WAAgB;AACpE,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,MACL,GAAG,KAAK;AAAA,MACR,CAAC,SAAS,GAAG;AAAA,QACX,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACF;AACF;AAyCA,qBAAqB,YAAY,MAAM,UAAyB;AAAA,EAC9D;AAAA,EACA,aAAiC;AAAA,EACjC;AAAA,EAEA,YAAY,OAAY;AACtB,UAAM,KAAK;AAEX,SAAK,gBAAgB,IAAI,cAAc;AACvC,SAAK,2BAA2B;AAEhC,SAAK,QAAQ;AAAA,MACX,QAAQ,CAAC;AAAA,MACT,OAAO,CAAC;AAAA,MACR,UAAU,MAAM;AAAA,MAChB,oBAAoB;AAAA,MACpB,SAAS,CAAC;AAAA,MACV,cAAc,CAAC;AAAA,MACf,UAAU;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,UACN,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,aAAa;AAAA,QACb,YAAY;AAAA,MACd;AAAA,MACA,wBAAwB;AAAA,QACtB,oBAAoB;AAAA,QACpB,oBAAoB;AAAA,QACpB,uBAAuB;AAAA,MACzB;AAAA,MACA,wBAAwB;AAAA,QACtB,cAAc;AAAA,MAChB;AAAA,MACA,YAAY;AAAA,IACd;AAEA,SAAK,eAAe,IAAI,aAAa;AAAA,MACnC,sBAAsB,CAAA,MAAK,KAAK,SAAS,EAAE,cAAc,EAAE,CAAC;AAAA,IAC9D,CAAC;AAAA,EACH;AAAA,EAEA,6BAA6B,MAAM;AACjC,UAAM,YAAY;AAAA,MAChB;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,WAAW;AAAA,QAC9B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,MAAM;AAAA,QACzB;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,QAAQ;AAAA,QAC3B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,UAAU;AAAA,QAC7B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,aAAa;AAAA,QAChC;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK;AAAA,YACH,KAAK,MAAM,aAAa,QAAQ,YAAY;AAAA,UAC9C;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACZ,mBAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,QAC5E;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,aAAS,KAAK,iBAAiB,SAAS,CAAC,MAAM;AAC7C,UAAG,EAAE,QAAQ,UAAU;AACpB,UAAE,OAAuB,KAAK;AAC/B,iBAAS,KAAK,MAAM;AAAA,MACtB,WACQ,KAAK,MAAM,OAAO,aAAa,SAAS,kBAAkB,SAAS,MAAM;AAC/E,cAAM,WAAW,UAAU,KAAK,CAACA,cAAa;AAC5C,iBAAQA,UAAS,QAAQ,EAAE;AAAA,QAC7B,CAAC;AAED,YAAG,UAAU;AACX,eAAK,SAAS,aAAa,KAAK;AAChC,mBAAS,QAAQ;AAAA,QACnB;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,CAAC,MAAqB;AACrC,QAAG,UAAU,SAAS,YAAY,EAAE,QAAQ,KAAK,KAAK,GAAG;AACvD,UAAG,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,IAAI;AAC9C,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF,OACK;AACH,UAAG,EAAE,WAAW,EAAE,YAAY,IAAI;AAChC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF;AAAA,EACF;AAAA,EAEA,MAAM,oBAAoB;AACxB,SAAK,aAAa,MAAM,iBAAiB,CAAC,UAAU,SAAS,KAAK,eAAe,UAAU,IAAI,CAAC;AAChG,WAAO,iBAAiB,WAAW,KAAK,cAAc;AAAA,EACxD;AAAA,EAEA,uBAAuB;AACrB,WAAO,oBAAoB,WAAW,KAAK,cAAc;AAAA,EAC3D;AAAA,EAEA,UAAU,eAAyC;AACjD,SAAK,YAAY,KAAK,aAAa;AAAA,EACrC;AAAA,EAEA,YAAY,aAAqB;AAC/B,UAAM,WAAoC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC3E,UAAM,cAAc,SAAS,oCAAoC,KAAK,OAAO;AAE7E,UAAM,WAAY,OAAO,gBAAgB,WAAW,YAAY,QAAQ,SAAS,WAAW,IAAG;AAC/F,2BAAuB,QAAQ,EAAE,KAAK,CAAA,UAAS;AAC7C,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,SAAiB;AAC3B,2BAAuB,OAAO,EAAE,KAAK,CAAA,UAAS;AAC5C,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,2BAA2B,CAAC,UAAkB,UAAe;AAE3D,QACE,aAAa,uBACb,UAAU,IAAI,KAAK,MAAM,UAAU,CAAC,YAAY,mBAAmB,GAAG,QAAQ,GAC9E;AACA,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAI,KAAK,MAAM,SAAiB;AAAA,QAChC,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAEA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAoC,OAAyB,CAAC,MAAY;AAC1F,WAAO;AAAA,MACL,MAAM;AAAA,MACN,aAAa;AAAA,MACb,aAAa;AAAA,MACb,GAAG;AAAA,IACL;AAKA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,eAAW,CAAC,WAAW,MAAM,KAAK,OAAO,QAAQ,SAAS,OAAO,GAAG;AAClE,UAAI,UAAU,SAAS,UAAU,OAAO,OAAO,QAAQ,UAAU;AAC/D,eAAO,MAAM,oBAAoB,OAAO,KAAK,QAAQ;AAAA,MACvD;AAAA,IACF;AAGA,QAAI,KAAK,aAAa;AACpB,WAAK,uBAAuB,QAAQ;AAAA,IACtC;AAEA,UAAM,SAA4B,iBAAiB,QAAQ,KAAK,CAAC;AAGjE,UAAM,cAA2C,CAAC;AAClD,QAAI,YAAY,SAAS,QAAQ;AAC/B,YAAM,cAAc,IAAI,OAAO,IAAI;AACnC,eAAS,OAAO,QAAQ,CAAC,OAAO,UAAU;AACxC,YAAI,MAAM,OAAO,MAAM,YAAY,IAAI,MAAM,EAAE,GAAG;AAChD,gBAAM,QAAQ,IAAI;AAAA,YAChB,UAAU,KAAK;AAAA,UACjB;AACA,sBAAY,KAAK,KAAK;AAAA,QACxB;AACA,oBAAY,IAAI,MAAM,IAAI,IAAI;AAAA,MAChC,CAAC;AAAA,IACH;AAEA,UAAM,eAA8B,YAAY,OAAO,MAAM,EAAE,IAAI,CAAA,UAAS;AAE1E,YAAM,WAAW,MAAM,QAAQ,MAAM,iEAAiE;AACtG,UAAI,UAAU;AACZ,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAGA,YAAM,qBAAqB,MAAM,QAAQ,MAAM,8CAA8C;AAC7F,UAAI,oBAAoB;AACtB,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,aAAa,MAAM,QAAQ,MAAM,0CAA0C;AACjF,UAAI,YAAY;AACd,cAAM,CAAC,EAAE,OAAO,OAAO,UAAU,OAAO,IAAI;AAC5C,cAAM,MAAO,SAAS,WAAY,CAAC,OAAO,QAAQ,EAAE,KAAK,GAAG,IAAI;AAChE,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,OACK;AACH,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,QACjB;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,gBAAgD;AACpD,QAAI,OAAO,SAAS,GAAG;AACrB,sBAAgB,UAAU,QAAQ;AAElC,iBAAW,SAAS,QAAQ;AAC1B,cAAM,EAAC,QAAO,IAAI;AAClB,YAAI,SAAS;AACX,cAAI;AACF,kBAAM,UAAU,QAAQ,MAAM,GAAG,EAAE,CAAC;AAEpC,kBAAM,YAAY,QAAQ,MAAM,qBAAqB,EAAG,CAAC;AACzD,kBAAM,eAAe,SAAS;AAAA,UAChC,SACO,KAAK;AACV,oBAAQ,KAAK,UAAU,MAAM,GAAG;AAAA,UAClC;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AACA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AAEA,QAAI,KAAK,aAAa;AACpB,WAAK,cAAc,YAAY,QAAQ;AAAA,IACzC;AACA,QAAI,KAAK,MAAM;AACb,WAAK,UAAU,QAAQ;AAAA,IACzB;AAEA,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,MACV;AAAA,MACA,QAAQ;AAAA,IACV,GAAG,MAAM;AACP,WAAK,aAAa;AAClB,WAAK,cAAc;AAAA,IACrB,CAAC;AAAA,EAEH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAE5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAC5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,SAA+C;AAC5D,QAAI,EAAE,UAAU,SAAS,IAAI;AAC7B,QAAI,SAAS,KAAK,MAAM,SAAS;AACjC,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,QAAG,aAAa,SAAU;AAE1B,QAAI,aAAa,KAAK,MAAM,oBAAoB;AAC9C,WAAK,SAAS;AAAA,QACZ,oBAAoB;AAAA,MACtB,CAAC;AAAA,IACH;AAEA,aAAS,OAAO,MAAM,CAAC;AACvB,qBAAiB,QAAQ,UAAU,QAAQ;AAC3C,SAAK,eAAe,MAAM;AAAA,EAC5B;AAAA,EAEA,iBAAiB,CAAC,kBAAwC;AACxD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,QAAQ;AAAA,IACV;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAkB;AAClC,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,kBAAkB,OAAO,MAAM,CAAC;AACtC,oBAAgB,OAAO,OAAO,CAAC;AAC/B,SAAK,eAAe,eAAe;AAAA,EACrC;AAAA,EAEA,cAAc,CAAC,UAAkB;AAC/B,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,cAAc,UAAU,cAAc,KAAK,CAAC;AAClD,gBAAY,KAAK,YAAY,KAAK;AAClC,kBAAc,OAAO,OAAO,GAAG,WAAW;AAC1C,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,0BAA0B,CAAC,UAAkB;AAC3C,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,QAAQ,EAAE,GAAG,cAAc,KAAK,EAAE;AACxC,UAAM,gBAAgB,YAAY,QAAQ,EAAC,GAAG,MAAM,OAAM,IAAI,CAAC;AAC/D,kBAAc,aAAa,cAAc,eAAe,SAAS,YAAY;AAE7E,UAAM,SAAS;AACf,kBAAc,KAAK,IAAI;AACvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAGA,kBAAkB,CAAC,OAAe,QAAgB,UAAkB;AAClE,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAAA,MACrB,GAAG,cAAc,KAAK;AAAA,MACtB,IAAI;AAAA,IACN;AAEA,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,OAAe,UAA8B;AAC7D,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAEvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,aAAuB;AACpC,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,mBAAmB,CAAC,aAAuC;AACzD,UAAM,WAAoC,SAAS,YAAY,CAAC;AAChE,QAAG,SAAS,mBAAmB,MAAM,QAAW;AAC9C,YAAM,eAAe;AAAA,QACnB,GAAG;AAAA,QACH,UAAU;AAAA,UACR,GAAG,SAAS;AAAA,UACZ,qBAAqB;AAAA,QACvB;AAAA,MACF;AACA,aAAO;AAAA,IACT,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,YAAY,CAAC,UAAoC,eAA4C;AAC3F,SAAK,SAAS,EAAC,WAAsB,CAAC;AACtC,eAAW,KAAK,iBAAiB,QAAQ;AACzC,SAAK,eAAe,QAAQ;AAAA,EAC9B;AAAA,EAEA,MAAM,eAAe;AACnB,UAAM,aAAwE,CAAC;AAC/E,eAAU,OAAO,OAAO,KAAK,KAAK,MAAM,SAAS,OAAO,GAAG;AACzD,YAAM,SAAS,KAAK,MAAM,SAAS,QAAQ,GAAG;AAC9C,UAAG,OAAO,SAAS,YAAY,EAAE,SAAS,SAAS;AACjD,mBAAW,GAAG,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,EAAC,GAAG,KAAK,MAAM,SAAS,QAAQ,GAAG,EAAC;AACjF,YAAI,WAAW,GAAG,EAAE,WAAW,QAAW;AACxC,qBAAW,GAAG,EAAE,SAAS,CAAC;AAAA,QAC5B;AAAA,MACF,OAAO;AACL,mBAAW,GAAG,IAAI;AAAA,UAChB,MAAM,OAAO;AAAA,UACb,QAAQ,CAAC;AAAA,QACX;AAEA,YAAI,MAAM,OAAO;AAEjB,YAAI;AACF,gBAAM,oBAAoB,KAAM,KAAK,MAAM,QAAQ;AAAA,QACrD,SAAQ,KAAK;AACX,kBAAQ,KAAK,mCAAmC,GAAG;AAAA,QACrD;AAEA,cAAM,kBAAkB,CAAC,SAAa;AACpC,cAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,eAAe,GAAG;AAC/D;AAAA,UACF;AAEA,qBAAU,SAAS,KAAK,eAAe;AACrC,uBAAW,GAAG,EAAE,OAAO,KAAK,MAAM,EAAE;AAAA,UACtC;AAAA,QACF;AAEA,YAAI;AACF,cAAI,IAAK,WAAW,YAAY,GAAG;AACjC,kBAAM,OAAO,MAAO,IAAI,QAAQ,IAAK,UAAU,EAAE,CAAC,EAAG,YAAY,EAAE;AACnE,4BAAgB,IAAI;AAAA,UACtB,OAAO;AACL,kBAAM,WAAW,MAAM,MAAM,KAAM,EAAE,MAAM,OAAO,CAAC;AACnD,kBAAM,OAAO,MAAM,SAAS,KAAK;AACjC,4BAAgB,IAAI;AAAA,UACtB;AAAA,QACF,SAAQ,KAAK;AACX,kBAAQ,MAAM,sCAAsC,GAAG,MAAM,GAAG,EAAE;AAAA,QACpE;AAAA,MACF;AAAA,IACF;AAEA,QAAG,CAAC,QAAQ,KAAK,MAAM,SAAS,UAAU,GAAG;AAC3C,cAAQ,MAAM,mBAAmB,UAAU;AAC3C,WAAK,SAAS;AAAA,QACZ,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,eAAgB;AACd,UAAM,WAAmC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC1E,WAAO,SAAS,mBAAmB,KAAK;AAAA,EAC1C;AAAA,EAEA,cAAc,CAAC,YAMT;AACJ,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,cAAc;AACZ,UAAM,EAAC,UAAU,cAAa,IAAI,KAAK;AAEvC,UAAM,WAAW;AAAA,MACf,UAAW,iBAAiB;AAAA,MAC5B,qBAAqB,CAACC,cAAiC;AACrD,eAAO,MAAM,oBAAoBA,WAAU;AAAA,UACzC,eAAe;AAAA,QACjB,CAAC;AAAA,MACH;AAAA,MACA,cAAc,CAAC,MAAkB;AAC/B,aAAK,aAAa,WAAW,EAAE,GAAG;AAClC,aAAK,aAAa;AAAA,MACpB;AAAA,IACF;AAEA,UAAM,WAAW,KAAK,aAAa;AAEnC,QAAI;AAGJ,QAAG,aAAa,MAAM;AACpB,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UACX,GAAG;AAAA,UACJ,UAAU,KAAK;AAAA,UACf,cAAc,KAAK,MAAM,uBAAuB;AAAA,UAChD,eAAe,CAAC,YAAY,KAAK,cAAc,CAAC,OAAO;AAAA,QAAA;AAAA,MACzD;AAAA,IACF,OAAO;AAEL,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UAAe,GAAG;AAAA,UAC9B,UAAU,KAAK;AAAA,UACf,SAAS,KAAK,MAAM;AAAA,UACpB,oBAAoB,KAAK,MAAM,aAAa;AAAA,UAC5C,kBAAkB,KAAK,MAAM,SAAS,OAAO,KAAK,MAAM,kBAAkB;AAAA,UAC1E,eAAe,KAAK;AAAA,QAAA;AAAA,MAAe;AAAA,IACvC;AAEA,QAAI;AACJ,QAAG,KAAK,MAAM,SAAS,MAAM,UAAU,GAAG;AACxC,mBAAa,KAAK,MAAM,SAAS,QAAQ,YAAY,EAAE;AAAA,IACzD;AACA,UAAM,eAAkC,CAAC;AACzC,QAAI,YAAY;AACd,mBAAa,SAAS,SAAS,UAAU;AAAA,IAC3C;AAEA,WAAO,oBAAC,SAAI,OAAO,cAAc,WAAU,2BAA0B,eAAY,sBAC9E,UAAA,WAAA,CACH;AAAA,EACF;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,EAAC,UAAU,UAAU,OAAM,IAAI,KAAK;AAC1C,UAAM,EAAC,mBAAkB,IAAI,KAAK;AAClC,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,UAAU,KAAK,KAAK,UAAU,QAAQ,CAAC;AAC7C,QAAI,aAAa,IAAI,SAAS,GAAG,OAAO,IAAI,kBAAkB,EAAE;AAEhE,UAAM,aAAa,OAAO,QAAQ,MAAM,EACrC,IAAI,CAAC,CAAC,KAAK,GAAG,MAAO,QAAQ,OAAO,MAAM,IAAK,EAC/C,OAAO,CAAA,QAAO,QAAQ,IAAI;AAE7B,QAAI,WAAW,SAAS,GAAG;AACzB,UAAI,aAAa,IAAI,SAAS,WAAW,KAAK,GAAG,CAAC;AAAA,IACpD,OACK;AACH,UAAI,aAAa,OAAO,OAAO;AAAA,IACjC;AAEA,QAAI,aAAa,OAAO;AACtB,UAAI,aAAa,OAAO,MAAM;AAAA,IAChC,WACS,aAAa,WAAW;AAC/B,UAAI,aAAa,IAAI,QAAQ,SAAS;AAAA,IACxC;AAEA,YAAQ,aAAa,EAAC,mBAAkB,GAAG,YAAY,IAAI,IAAI;AAAA,EACjE;AAAA,EAEA,yBAAyB,CAAC,aAAiC;AACzD,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,aAAa,IAAI,aAAa,IAAI,OAAO;AAE/C,QAAI,cAAc,eAAe,IAAI;AACnC,YAAM,SAAS,WAAW,MAAM,GAAG;AACnC,YAAM,WAAqC,CAAC;AAC5C,aAAO,QAAQ,CAAA,cAAa;AAC1B,iBAAS,SAAS,IAAI;AAAA,MACxB,CAAC;AAED,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,GAAG,KAAK,MAAM;AAAA,UACd,GAAG;AAAA,QACL;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACxC,QAAI,QAAQ,SAAS,IAAI;AACvB,WAAK,YAAY,IAAgB;AAAA,IACnC;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,OAAO;AACzC,QAAI,MAAM;AACR,UAAI;AACF,cAAM,QAAQ,KAAK,MAAM,GAAG;AAC5B,cAAM,CAAC,SAAS,kBAAkB,IAAI;AAAA,UACpC,MAAM,CAAC;AAAA,UACP,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,QACvB;AAEA,YAAI,QAAQ;AACZ,YAAI,YAAY,KAAK;AACnB,gBAAM,iBAAiB,KAAK,KAAK,UAAU,QAAQ,CAAC;AACpD,cAAI,mBAAmB,SAAS,SAAS,EAAE,GAAG;AAC5C,oBAAQ;AAAA,UACV;AAAA,QACF;AACA,YAAI,OAAO;AACT,eAAK,SAAS;AAAA,YACZ;AAAA,YACA,yBAAyB,SAAS,OAAO,kBAAkB,EAAE;AAAA,UAC/D,CAAC;AAAA,QACH;AAAA,MACF,SACO,KAAK;AACV,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,UAAkB;AACjC,SAAK,SAAS;AAAA,MACZ,oBAAoB;AAAA,MACpB,yBAAyB,KAAK,MAAM,SAAS,OAAO,KAAK,EAAE;AAAA,IAC7D,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,SAAS,WAAqC,OAAgB;AAC5D,SAAK,SAAS;AAAA,MACZ,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG;AAAA,MACf;AAAA,IACF,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,YAAY,WAAqC;AAC/C,SAAK,SAAS,WAAW,CAAC,KAAK,MAAM,OAAO,SAAS,CAAC;AAAA,EACxD;AAAA,EAEA,kBAAkB,CAAC,eAA4C;AAC7D,SAAK,SAAS,EAAE,WAAW,CAAC;AAAA,EAC9B;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAmB;AAC3F,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAe;AACvF,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,MAAM,SAAS,UAAU,CAAC;AAC9C,UAAM,gBAAgB,OAAO,SAAS,IAAI,OAAO,KAAK,MAAM,kBAAkB,IAAI;AAElF,UAAM,UAAU;AAAA,MAAC;AAAA,MAAA;AAAA,QACf,UAAU,KAAK,aAAa;AAAA,QAC5B,UAAU,KAAK,MAAM;AAAA,QACrB,UAAU,KAAK,MAAM;AAAA,QACrB,oBAAoB,KAAK,MAAM,aAAa;AAAA,QAC5C,SAAS,KAAK,MAAM;AAAA,QACpB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,eAAe,KAAK;AAAA,QACpB,eAAe,CAAC,UAAoC,KAAK,YAAY,KAAK;AAAA,MAAA;AAAA,IAC5E;AAEA,UAAM,aAAa,KAAK,MAAM,OAAO,aAAa;AAAA,MAAC;AAAA,MAAA;AAAA,QACjD,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,CAACC,WAAU,KAAK,eAAeA,MAAK;AAAA,QAC9C,SAAS,MAAM,KAAK,SAAS,cAAc,KAAK;AAAA,MAAA;AAAA,IAClD,IAAK;AAEL,UAAM,YAAY;AAAA,MAAC;AAAA,MAAA;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,gBAAgB,KAAK;AAAA,QACrB,eAAe,KAAK;AAAA,QACpB,oBAAoB,KAAK,MAAM;AAAA,QAC/B;AAAA,QACA,SAAS,KAAK,MAAM;AAAA,QACpB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,IACrB;AAEA,UAAM,cAAc,gBAAgB;AAAA,MAAC;AAAA,MAAA;AAAA,QAEnC,OAAO;AAAA,QACP,YAAY,KAAK,MAAM;AAAA,QACvB,cAAc,KAAK,MAAM,qBAAqB;AAAA,QAC9C,aAAa,KAAK,MAAM,uBAAuB,KAAK,MAAM,SAAS,OAAO,SAAO;AAAA,QACjF,SAAS,KAAK,MAAM;AAAA,QACpB,cAAc,KAAK,MAAM;AAAA,QACzB,MAAM,KAAK,MAAM;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,iBAAiB,KAAK;AAAA,QACtB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,MAdd,KAAK,MAAM;AAAA,IAelB,IAAK;AAEL,UAAM,cAAe,KAAK,MAAM,OAAO,SAAS,KAAK,MAAM,MAAM,SAAU,IAAI;AAAA,MAAC;AAAA,MAAA;AAAA,QAC9E,cAAc;AAAA,QACd,oBAAoB,KAAK,MAAM;AAAA,QAC/B,eAAe,KAAK;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,QAAQ,KAAK,MAAM;AAAA,QACnB,OAAO,KAAK,MAAM;AAAA,MAAA;AAAA,IACpB,IAAK;AAGL,UAAM,8BAAU,OAAA,EACd,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,aAAa;AAAA,UAC5B,wBAAwB,KAAK,MAAM;AAAA,UACnC,wBAAwB,KAAK,MAAM;AAAA,UACnC,yBAAyB,KAAK;AAAA,UAC9B,yBAAyB,KAAK;AAAA,UAC9B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,OAAO;AAAA,UAC5C,SAAS,KAAK,MAAM;AAAA,QAAA;AAAA,MACtB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,WAAW;AAAA,QAAA;AAAA,MAClD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,0BAA0B,KAAK;AAAA,UAC/B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,UAAU;AAAA,QAAA;AAAA,MACjD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,QAAQ;AAAA,UAC7C,YAAY,KAAK,MAAM;AAAA,UACvB,iBAAiB,KAAK;AAAA,QAAA;AAAA,MACxB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,aAAa,KAAK;AAAA,UAClB,cAAc,MAAM,KAAK,YAAY,MAAM;AAAA,UAC3C,YAAY,KAAK,MAAM;AAAA,QAAA;AAAA,MACzB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,SAAS;AAAA,QAAA;AAAA,MAChD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,aAAa;AAAA,QAAA;AAAA,MACpD;AAAA,IAAA,EAAA,CACF;AAEA,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,KAAK,KAAK,YAAY;AAAA,QACtB,QAAQ;AAAA,QACR;AAAA,MAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8a07c2afbabbb0ad6515959638246d740e8d9d6d"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return pe=function(){return s},s}pe();pe().s[0]++;window.Buffer=rue.Buffer;function aS(n,e){pe().f[0]++;const t=(pe().s[1]++,n.match(/\.tilehosting\.com/)),i=(pe().s[2]++,n.match(/\.maptiler\.com/)),r=(pe().s[3]++,n.match(/\.thunderforest\.com/)),o=(pe().s[4]++,n.match(/\.locationiq\.com/));if(pe().s[5]++,pe().b[1][0]++,t||(pe().b[1][1]++,i)){pe().b[0][0]++;const s=(pe().s[6]++,Id.getAccessToken("openmaptiles",e,{allowFallback:!0}));if(pe().s[7]++,s)return pe().b[2][0]++,pe().s[8]++,n.replace("{key}",s);pe().b[2][1]++}else if(pe().b[0][1]++,pe().s[9]++,r){pe().b[3][0]++;const s=(pe().s[10]++,Id.getAccessToken("thunderforest",e,{allowFallback:!0}));if(pe().s[11]++,s)return pe().b[4][0]++,pe().s[12]++,n.replace("{key}",s);pe().b[4][1]++}else if(pe().b[3][1]++,pe().s[13]++,o){pe().b[5][0]++;const s=(pe().s[14]++,Id.getAccessToken("locationiq",e,{allowFallback:!0}));if(pe().s[15]++,s)return pe().b[6][0]++,pe().s[16]++,n.replace("{key}",s);pe().b[6][1]++}else return pe().b[5][1]++,pe().s[17]++,n}function NH(n,e,t){return pe().f[1]++,pe().s[18]++,{...n,$root:{...n.$root,[e]:{...n.$root[e],values:t}}}}class nLe extends In.Component{revisionStore;styleStore=(pe().s[19]++,null);layerWatcher;constructor(e){pe().f[2]++,pe().s[20]++,super(e),pe().s[21]++,this.revisionStore=new $Pe,pe().s[22]++,this.configureKeyboardShortcuts(),pe().s[23]++,this.state={errors:[],infos:[],mapStyle:Id.emptyStyle,selectedLayerIndex:0,sources:{},vectorLayers:{},mapState:"map",spec:Wr,mapView:{zoom:0,center:{lng:0,lat:0}},isOpen:{settings:!1,sources:!1,open:!1,shortcuts:!1,export:!1,debug:!1,globalState:!1,codeEditor:!1},maplibreGlDebugOptions:{showTileBoundaries:!1,showCollisionBoxes:!1,showOverdrawInspector:!1},openlayersDebugOptions:{debugToolbox:!1},fileHandle:null},pe().s[24]++,this.layerWatcher=new tLe({onVectorLayersChange:t=>(pe().f[3]++,pe().s[25]++,this.setState({vectorLayers:t}))})}configureKeyboardShortcuts=(pe().s[26]++,()=>{pe().f[4]++;const e=(pe().s[27]++,[{key:"?",handler:()=>{pe().f[5]++,pe().s[28]++,this.toggleModal("shortcuts")}},{key:"o",handler:()=>{pe().f[6]++,pe().s[29]++,this.toggleModal("open")}},{key:"e",handler:()=>{pe().f[7]++,pe().s[30]++,this.toggleModal("export")}},{key:"d",handler:()=>{pe().f[8]++,pe().s[31]++,this.toggleModal("sources")}},{key:"s",handler:()=>{pe().f[9]++,pe().s[32]++,this.toggleModal("settings")}},{key:"g",handler:()=>{pe().f[10]++,pe().s[33]++,this.toggleModal("globalState")}},{key:"i",handler:()=>{pe().f[11]++,pe().s[34]++,this.setMapState(this.state.mapState==="map"?(pe().b[7][0]++,"inspect"):(pe().b[7][1]++,"map"))}},{key:"m",handler:()=>{pe().f[12]++,pe().s[35]++,document.querySelector(".maplibregl-canvas").focus()}},{key:"!",handler:()=>{pe().f[13]++,pe().s[36]++,this.toggleModal("debug")}}]);pe().s[37]++,document.body.addEventListener("keyup",t=>{if(pe().f[14]++,pe().s[38]++,t.key==="Escape")pe().b[8][0]++,pe().s[39]++,t.target.blur(),pe().s[40]++,document.body.focus();else if(pe().b[8][1]++,pe().s[41]++,pe().b[10][0]++,this.state.isOpen.shortcuts||(pe().b[10][1]++,document.activeElement===document.body)){pe().b[9][0]++;const i=(pe().s[42]++,e.find(r=>(pe().f[15]++,pe().s[43]++,r.key===t.key)));pe().s[44]++,i?(pe().b[11][0]++,pe().s[45]++,this.setModal("shortcuts",!1),pe().s[46]++,i.handler()):pe().b[11][1]++}else pe().b[9][1]++})});handleKeyPress=(pe().s[47]++,e=>{pe().f[16]++,pe().s[48]++,navigator.platform.toUpperCase().indexOf("MAC")>=0?(pe().b[12][0]++,pe().s[49]++,pe().b[14][0]++,e.metaKey&&(pe().b[14][1]++,e.shiftKey)&&(pe().b[14][2]++,e.keyCode===90)?(pe().b[13][0]++,pe().s[50]++,e.preventDefault(),pe().s[51]++,this.onRedo()):(pe().b[13][1]++,pe().s[52]++,pe().b[16][0]++,e.metaKey&&(pe().b[16][1]++,e.keyCode===90)?(pe().b[15][0]++,pe().s[53]++,e.preventDefault(),pe().s[54]++,this.onUndo()):pe().b[15][1]++)):(pe().b[12][1]++,pe().s[55]++,pe().b[18][0]++,e.ctrlKey&&(pe().b[18][1]++,e.keyCode===90)?(pe().b[17][0]++,pe().s[56]++,e.preventDefault(),pe().s[57]++,this.onUndo()):(pe().b[17][1]++,pe().s[58]++,pe().b[20][0]++,e.ctrlKey&&(pe().b[20][1]++,e.keyCode===89)?(pe().b[19][0]++,pe().s[59]++,e.preventDefault(),pe().s[60]++,this.onRedo()):pe().b[19][1]++))});async componentDidMount(){pe().f[17]++,pe().s[61]++,this.styleStore=await VPe((e,t)=>(pe().f[18]++,pe().s[62]++,this.onStyleChanged(e,t))),pe().s[63]++,window.addEventListener("keydown",this.handleKeyPress)}componentWillUnmount(){pe().f[19]++,pe().s[64]++,window.removeEventListener("keydown",this.handleKeyPress)}saveStyle(e){pe().f[20]++,pe().s[65]++,this.styleStore?.save(e)}updateFonts(e){pe().f[21]++;const t=(pe().s[66]++,pe().b[21][0]++,this.state.mapStyle.metadata||(pe().b[21][1]++,{})),i=(pe().s[67]++,pe().b[22][0]++,t["maputnik:openmaptiles_access_token"]||(pe().b[22][1]++,Use.openmaptiles)),r=(pe().s[68]++,typeof e=="string"?(pe().b[23][0]++,e.replace("{key}",i)):(pe().b[23][1]++,e));pe().s[69]++,DPe(r).then(o=>{pe().f[22]++,pe().s[70]++,this.setState({spec:NH(this.state.spec,"glyphs",o)})})}updateIcons(e){pe().f[23]++,pe().s[71]++,RPe(e).then(t=>{pe().f[24]++,pe().s[72]++,this.setState({spec:NH(this.state.spec,"sprite",t)})})}onChangeMetadataProperty=(pe().s[73]++,(e,t)=>{pe().f[25]++,pe().s[74]++,pe().b[25][0]++,e==="maputnik:renderer"&&(pe().b[25][1]++,t!==aue(this.state.mapStyle,["metadata","maputnik:renderer"],"mlgljs"))?(pe().b[24][0]++,pe().s[75]++,this.setState({mapState:"map"})):pe().b[24][1]++;const i=(pe().s[76]++,{...this.state.mapStyle,metadata:{...this.state.mapStyle.metadata,[e]:t}});pe().s[77]++,this.onStyleChanged(i)});onStyleChanged=(pe().s[78]++,(e,t=(pe().b[26][0]++,{}))=>{pe().f[26]++,pe().s[79]++,t={save:!0,addRevision:!0,initialLoad:!1,...t},pe().s[80]++,pe().b[28][0]++,e.glyphs&&(pe().b[28][1]++,typeof e.glyphs=="string")?(pe().b[27][0]++,pe().s[81]++,e.glyphs=aS(e.glyphs,e)):pe().b[27][1]++,pe().s[82]++,pe().b[30][0]++,e.sprite&&(pe().b[30][1]++,typeof e.sprite=="string")?(pe().b[29][0]++,pe().s[83]++,e.sprite=aS(e.sprite,e)):pe().b[29][1]++,pe().s[84]++;for(const[a,c]of Object.entries(e.sources))pe().s[85]++,pe().b[32][0]++,c&&(pe().b[32][1]++,"url"in c)&&(pe().b[32][2]++,typeof c.url=="string")?(pe().b[31][0]++,pe().s[86]++,c.url=aS(c.url,e)):pe().b[31][1]++;pe().s[87]++,t.initialLoad?(pe().b[33][0]++,pe().s[88]++,this.getInitialStateFromUrl(e)):pe().b[33][1]++;const i=(pe().s[89]++,pe().b[34][0]++,kd(e)||(pe().b[34][1]++,[])),r=(pe().s[90]++,[]);if(pe().s[91]++,pe().b[36][0]++,e&&(pe().b[36][1]++,e.layers)){pe().b[35][0]++;const a=(pe().s[92]++,new window.Map);pe().s[93]++,e.layers.forEach((c,d)=>{if(pe().f[27]++,pe().s[94]++,pe().b[38][0]++,c.id===""&&(pe().b[38][1]++,a.has(c.id))){pe().b[37][0]++;const m=(pe().s[95]++,new Error(`layers[${d}]: duplicate layer id [empty_string], previously used`));pe().s[96]++,r.push(m)}else pe().b[37][1]++;pe().s[97]++,a.set(c.id,!0)})}else pe().b[35][1]++;const o=(pe().s[98]++,r.concat(i).map(a=>{pe().f[28]++;const c=(pe().s[99]++,a.message.match(/layers\[(\d+)\]: (duplicate layer id "?(.*)"?, previously used)/));if(pe().s[100]++,c){pe().b[39][0]++;const[,v,M]=(pe().s[101]++,c);return pe().s[102]++,{message:a.message,parsed:{type:"layer",data:{index:parseInt(v,10),key:"id",message:M}}}}else pe().b[39][1]++;const d=(pe().s[103]++,a.message.match(/layers\[(\d+)\]: (source "(?:.*)" not found)/));if(pe().s[104]++,d){pe().b[40][0]++;const[,v,M]=(pe().s[105]++,d);return pe().s[106]++,{message:a.message,parsed:{type:"layer",data:{index:parseInt(v,10),key:"source",message:M}}}}else pe().b[40][1]++;const m=(pe().s[107]++,a.message.match(/layers\[(\d+)\]\.(?:(\S+)\.)?(\S+): (.*)/));if(pe().s[108]++,m){pe().b[41][0]++;const[,v,M,B,P]=(pe().s[109]++,m),U=(pe().s[110]++,pe().b[43][0]++,M&&(pe().b[43][1]++,B)?(pe().b[42][0]++,[M,B].join(".")):(pe().b[42][1]++,B));return pe().s[111]++,{message:a.message,parsed:{type:"layer",data:{index:parseInt(v,10),key:U,message:P}}}}else return pe().b[41][1]++,pe().s[112]++,{message:a.message}}));let s=(pe().s[113]++,void 0);if(pe().s[114]++,i.length>0){pe().b[44][0]++,pe().s[115]++,s=tz(e),pe().s[116]++;for(const a of i){const{message:c}=(pe().s[117]++,a);if(pe().s[118]++,c){pe().b[45][0]++,pe().s[119]++;try{const d=(pe().s[120]++,c.split(":")[0]),m=(pe().s[121]++,d.match(/^\S+?\[\d+\]\.[^[]+/)[0]);pe().s[122]++,$5.unset(s,m)}catch(d){pe().s[123]++,console.warn(c+" "+d)}}else pe().b[45][1]++}}else pe().b[44][1]++;pe().s[124]++,e.glyphs!==this.state.mapStyle.glyphs?(pe().b[46][0]++,pe().s[125]++,this.updateFonts(e.glyphs)):pe().b[46][1]++,pe().s[126]++,e.sprite!==this.state.mapStyle.sprite?(pe().b[47][0]++,pe().s[127]++,this.updateIcons(e.sprite)):pe().b[47][1]++,pe().s[128]++,t.addRevision?(pe().b[48][0]++,pe().s[129]++,this.revisionStore.addRevision(e)):pe().b[48][1]++,pe().s[130]++,t.save?(pe().b[49][0]++,pe().s[131]++,this.saveStyle(e)):pe().b[49][1]++,pe().s[132]++,this.setState({mapStyle:e,dirtyMapStyle:s,errors:o},()=>{pe().f[29]++,pe().s[133]++,this.fetchSources(),pe().s[134]++,this.setStateInUrl()})});onUndo=(pe().s[135]++,()=>{pe().f[30]++;const e=(pe().s[136]++,this.revisionStore.undo()),t=(pe().s[137]++,PPe(this.state.mapStyle,e));pe().s[138]++,this.onStyleChanged(e,{addRevision:!1}),pe().s[139]++,this.setState({infos:t})});onRedo=(pe().s[140]++,()=>{pe().f[31]++;const e=(pe().s[141]++,this.revisionStore.redo()),t=(pe().s[142]++,LPe(this.state.mapStyle,e));pe().s[143]++,this.onStyleChanged(e,{addRevision:!1}),pe().s[144]++,this.setState({infos:t})});onMoveLayer=(pe().s[145]++,e=>{pe().f[32]++;let{oldIndex:t,newIndex:i}=(pe().s[146]++,e),r=(pe().s[147]++,this.state.mapStyle.layers);if(pe().s[148]++,t=iz(t,0,r.length-1),pe().s[149]++,i=iz(i,0,r.length-1),pe().s[150]++,t===i){pe().b[50][0]++,pe().s[151]++;return}else pe().b[50][1]++;pe().s[152]++,t===this.state.selectedLayerIndex?(pe().b[51][0]++,pe().s[153]++,this.setState({selectedLayerIndex:i})):pe().b[51][1]++,pe().s[154]++,r=r.slice(0),pe().s[155]++,cue(r,t,i),pe().s[156]++,this.onLayersChange(r)});onLayersChange=(pe().s[157]++,e=>{pe().f[33]++;const t=(pe().s[158]++,{...this.state.mapStyle,layers:e});pe().s[159]++,this.onStyleChanged(t)});onLayerDestroy=(pe().s[160]++,e=>{pe().f[34]++;const t=(pe().s[161]++,this.state.mapStyle.layers),i=(pe().s[162]++,t.slice(0));pe().s[163]++,i.splice(e,1),pe().s[164]++,this.onLayersChange(i)});onLayerCopy=(pe().s[165]++,e=>{pe().f[35]++;const t=(pe().s[166]++,this.state.mapStyle.layers),i=(pe().s[167]++,t.slice(0)),r=(pe().s[168]++,tz(i[e]));pe().s[169]++,r.id=r.id+"-copy",pe().s[170]++,i.splice(e,0,r),pe().s[171]++,this.onLayersChange(i)});onLayerVisibilityToggle=(pe().s[172]++,e=>{pe().f[36]++;const t=(pe().s[173]++,this.state.mapStyle.layers),i=(pe().s[174]++,t.slice(0)),r=(pe().s[175]++,{...i[e]}),o=(pe().s[176]++,"layout"in r?(pe().b[52][0]++,{...r.layout}):(pe().b[52][1]++,{}));pe().s[177]++,o.visibility=o.visibility==="none"?(pe().b[53][0]++,"visible"):(pe().b[53][1]++,"none"),pe().s[178]++,r.layout=o,pe().s[179]++,i[e]=r,pe().s[180]++,this.onLayersChange(i)});onLayerIdChange=(pe().s[181]++,(e,t,i)=>{pe().f[37]++;const r=(pe().s[182]++,this.state.mapStyle.layers.slice(0));pe().s[183]++,r[e]={...r[e],id:i},pe().s[184]++,this.onLayersChange(r)});onLayerChanged=(pe().s[185]++,(e,t)=>{pe().f[38]++;const i=(pe().s[186]++,this.state.mapStyle.layers.slice(0));pe().s[187]++,i[e]=t,pe().s[188]++,this.onLayersChange(i)});setMapState=(pe().s[189]++,e=>{pe().f[39]++,pe().s[190]++,this.setState({mapState:e},this.setStateInUrl)});setDefaultValues=(pe().s[191]++,e=>{pe().f[40]++;const t=(pe().s[192]++,pe().b[54][0]++,e.metadata||(pe().b[54][1]++,{}));if(pe().s[193]++,t["maputnik:renderer"]===void 0){pe().b[55][0]++;const i=(pe().s[194]++,{...e,metadata:{...e.metadata,"maputnik:renderer":"mlgljs"}});return pe().s[195]++,i}else return pe().b[55][1]++,pe().s[196]++,e});openStyle=(pe().s[197]++,(e,t)=>{pe().f[41]++,pe().s[198]++,this.setState({fileHandle:t}),pe().s[199]++,e=this.setDefaultValues(e),pe().s[200]++,this.onStyleChanged(e)});async fetchSources(){pe().f[42]++;const e=(pe().s[201]++,{});pe().s[202]++;for(const t of Object.keys(this.state.mapStyle.sources)){const i=(pe().s[203]++,this.state.mapStyle.sources[t]);if(pe().s[204]++,pe().b[57][0]++,i.type!=="vector"||(pe().b[57][1]++,!("url"in i)))pe().b[56][0]++,pe().s[205]++,e[t]=(pe().b[58][0]++,this.state.sources[t]||(pe().b[58][1]++,{...this.state.mapStyle.sources[t]})),pe().s[206]++,e[t].layers===void 0?(pe().b[59][0]++,pe().s[207]++,e[t].layers=[]):pe().b[59][1]++;else{pe().b[56][1]++,pe().s[208]++,e[t]={type:i.type,layers:[]};let r=(pe().s[209]++,i.url);pe().s[210]++;try{pe().s[211]++,r=aS(r,this.state.mapStyle)}catch(s){pe().s[212]++,console.warn("Failed to setFetchAccessToken: ",s)}pe().s[213]++;const o=s=>{if(pe().f[43]++,pe().s[214]++,Object.prototype.hasOwnProperty.call(s,"vector_layers"))pe().b[60][1]++;else{pe().b[60][0]++,pe().s[215]++;return}pe().s[216]++;for(const a of s.vector_layers)pe().s[217]++,e[t].layers.push(a.id)};pe().s[218]++;try{if(pe().s[219]++,r.startsWith("pmtiles://")){pe().b[61][0]++;const s=(pe().s[220]++,await new L9(r.substring(10)).getTileJson(""));pe().s[221]++,o(s)}else{pe().b[61][1]++;const s=(pe().s[222]++,await fetch(r,{mode:"cors"})),a=(pe().s[223]++,await s.json());pe().s[224]++,o(a)}}catch(s){pe().s[225]++,console.error(`Failed to process source for url: '${r}', ${s}`)}}}pe().s[226]++,yP(this.state.sources,e)?pe().b[62][1]++:(pe().b[62][0]++,pe().s[227]++,console.debug("Setting sources",e),pe().s[228]++,this.setState({sources:e}))}_getRenderer(){pe().f[44]++;const e=(pe().s[229]++,pe().b[63][0]++,this.state.mapStyle.metadata||(pe().b[63][1]++,{}));return pe().s[230]++,pe().b[64][0]++,e["maputnik:renderer"]||(pe().b[64][1]++,"mlgljs")}onMapChange=(pe().s[231]++,e=>{pe().f[45]++,pe().s[232]++,this.setState({mapView:e})});mapRenderer(){pe().f[46]++;const{mapStyle:e,dirtyMapStyle:t}=(pe().s[233]++,this.state),i=(pe().s[234]++,{mapStyle:(pe().b[65][0]++,t||(pe().b[65][1]++,e)),replaceAccessTokens:c=>(pe().f[47]++,pe().s[235]++,Id.replaceAccessTokens(c,{allowFallback:!0})),onDataChange:c=>{pe().f[48]++,pe().s[236]++,this.layerWatcher.analyzeMap(c.map),pe().s[237]++,this.fetchSources()}}),r=(pe().s[238]++,this._getRenderer());let o;pe().s[239]++,r==="ol"?(pe().b[66][0]++,pe().s[240]++,o=oe.jsx(c_e,{...i,onChange:this.onMapChange,debugToolbox:this.state.openlayersDebugOptions.debugToolbox,onLayerSelect:c=>(pe().f[49]++,pe().s[241]++,this.onLayerSelect(+c))})):(pe().b[66][1]++,pe().s[242]++,o=oe.jsx(Bpe,{...i,onChange:this.onMapChange,options:this.state.maplibreGlDebugOptions,inspectModeEnabled:this.state.mapState==="inspect",highlightedLayer:this.state.mapStyle.layers[this.state.selectedLayerIndex],onLayerSelect:this.onLayerSelect}));let s;pe().s[243]++,this.state.mapState.match(/^filter-/)?(pe().b[67][0]++,pe().s[244]++,s=this.state.mapState.replace(/^filter-/,"")):pe().b[67][1]++;const a=(pe().s[245]++,{});return pe().s[246]++,s?(pe().b[68][0]++,pe().s[247]++,a.filter=`url('#${s}')`):pe().b[68][1]++,pe().s[248]++,oe.jsx("div",{style:a,className:"maputnik-map__container","data-wd-key":"maplibre:container",children:o})}setStateInUrl=(pe().s[249]++,()=>{pe().f[50]++;const{mapState:e,mapStyle:t,isOpen:i}=(pe().s[250]++,this.state),{selectedLayerIndex:r}=(pe().s[251]++,this.state),o=(pe().s[252]++,new URL(location.href)),s=(pe().s[253]++,cz(JSON.stringify(t)));pe().s[254]++,o.searchParams.set("layer",`${s}~${r}`);const a=(pe().s[255]++,Object.entries(i).map(([c,d])=>(pe().f[51]++,pe().s[256]++,d===!0?(pe().b[69][0]++,c):(pe().b[69][1]++,null))).filter(c=>(pe().f[52]++,pe().s[257]++,c!==null)));pe().s[258]++,a.length>0?(pe().b[70][0]++,pe().s[259]++,o.searchParams.set("modal",a.join(","))):(pe().b[70][1]++,pe().s[260]++,o.searchParams.delete("modal")),pe().s[261]++,e==="map"?(pe().b[71][0]++,pe().s[262]++,o.searchParams.delete("view")):(pe().b[71][1]++,pe().s[263]++,e==="inspect"?(pe().b[72][0]++,pe().s[264]++,o.searchParams.set("view","inspect")):pe().b[72][1]++),pe().s[265]++,history.replaceState({selectedLayerIndex:r},"Maputnik",o.href)});getInitialStateFromUrl=(pe().s[266]++,e=>{pe().f[53]++;const t=(pe().s[267]++,new URL(location.href)),i=(pe().s[268]++,t.searchParams.get("modal"));if(pe().s[269]++,pe().b[74][0]++,i&&(pe().b[74][1]++,i!=="")){pe().b[73][0]++;const s=(pe().s[270]++,i.split(",")),a=(pe().s[271]++,{});pe().s[272]++,s.forEach(c=>{pe().f[54]++,pe().s[273]++,a[c]=!0}),pe().s[274]++,this.setState({isOpen:{...this.state.isOpen,...a}})}else pe().b[73][1]++;const r=(pe().s[275]++,t.searchParams.get("view"));pe().s[276]++,pe().b[76][0]++,r&&(pe().b[76][1]++,r!=="")?(pe().b[75][0]++,pe().s[277]++,this.setMapState(r)):pe().b[75][1]++;const o=(pe().s[278]++,t.searchParams.get("layer"));if(pe().s[279]++,o){pe().b[77][0]++,pe().s[280]++;try{const s=(pe().s[281]++,o.split("~")),[a,c]=(pe().s[282]++,[s[0],parseInt(s[1],10)]);let d=(pe().s[283]++,!0);if(pe().s[284]++,a!=="-"){pe().b[78][0]++;const m=(pe().s[285]++,cz(JSON.stringify(e)));pe().s[286]++,m!==parseInt(a,10)?(pe().b[79][0]++,pe().s[287]++,d=!1):pe().b[79][1]++}else pe().b[78][1]++;pe().s[288]++,d?(pe().b[80][0]++,pe().s[289]++,this.setState({selectedLayerIndex:c,selectedLayerOriginalId:e.layers[c].id})):pe().b[80][1]++}catch(s){pe().s[290]++,console.warn(s)}}else pe().b[77][1]++});onLayerSelect=(pe().s[291]++,e=>{pe().f[55]++,pe().s[292]++,this.setState({selectedLayerIndex:e,selectedLayerOriginalId:this.state.mapStyle.layers[e].id},this.setStateInUrl)});setModal(e,t){pe().f[56]++,pe().s[293]++,this.setState({isOpen:{...this.state.isOpen,[e]:t}},this.setStateInUrl)}toggleModal(e){pe().f[57]++,pe().s[294]++,this.setModal(e,!this.state.isOpen[e])}onSetFileHandle=(pe().s[295]++,e=>{pe().f[58]++,pe().s[296]++,this.setState({fileHandle:e})});onChangeOpenlayersDebug=(pe().s[297]++,(e,t)=>{pe().f[59]++,pe().s[298]++,this.setState({openlayersDebugOptions:{...this.state.openlayersDebugOptions,[e]:t}})});onChangeMaplibreGlDebug=(pe().s[299]++,(e,t)=>{pe().f[60]++,pe().s[300]++,this.setState({maplibreGlDebugOptions:{...this.state.maplibreGlDebugOptions,[e]:t}})});render(){pe().f[61]++;const e=(pe().s[301]++,pe().b[81][0]++,this.state.mapStyle.layers||(pe().b[81][1]++,[])),t=(pe().s[302]++,e.length>0?(pe().b[82][0]++,e[this.state.selectedLayerIndex]):(pe().b[82][1]++,void 0)),i=(pe().s[303]++,oe.jsx(FRe,{renderer:this._getRenderer(),mapState:this.state.mapState,mapStyle:this.state.mapStyle,inspectModeEnabled:this.state.mapState==="inspect",sources:this.state.sources,onStyleChanged:this.onStyleChanged,onStyleOpen:this.onStyleChanged,onSetMapState:this.setMapState,onToggleModal:d=>(pe().f[62]++,pe().s[304]++,this.toggleModal(d))})),r=(pe().s[305]++,this.state.isOpen.codeEditor?(pe().b[83][0]++,oe.jsx(nSe,{value:this.state.mapStyle,onChange:d=>(pe().f[63]++,pe().s[306]++,this.onStyleChanged(d)),onClose:()=>(pe().f[64]++,pe().s[307]++,this.setModal("codeEditor",!1))})):(pe().b[83][1]++,void 0)),o=(pe().s[308]++,oe.jsx(QTe,{onMoveLayer:this.onMoveLayer,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayersChange:this.onLayersChange,onLayerSelect:this.onLayerSelect,selectedLayerIndex:this.state.selectedLayerIndex,layers:e,sources:this.state.sources,errors:this.state.errors})),s=(pe().s[309]++,t?(pe().b[84][0]++,oe.jsx(yRe,{layer:t,layerIndex:this.state.selectedLayerIndex,isFirstLayer:this.state.selectedLayerIndex<1,isLastLayer:this.state.selectedLayerIndex===this.state.mapStyle.layers.length-1,sources:this.state.sources,vectorLayers:this.state.vectorLayers,spec:this.state.spec,onMoveLayer:this.onMoveLayer,onLayerChanged:this.onLayerChanged,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayerIdChange:this.onLayerIdChange,errors:this.state.errors},this.state.selectedLayerOriginalId)):(pe().b[84][1]++,void 0)),a=(pe().s[310]++,this.state.errors.length+this.state.infos.length>0?(pe().b[85][0]++,oe.jsx(GRe,{currentLayer:t,selectedLayerIndex:this.state.selectedLayerIndex,onLayerSelect:this.onLayerSelect,mapStyle:this.state.mapStyle,errors:this.state.errors,infos:this.state.infos})):(pe().b[85][1]++,void 0)),c=(pe().s[311]++,oe.jsxs("div",{children:[oe.jsx(IPe,{renderer:this._getRenderer(),maplibreGlDebugOptions:this.state.maplibreGlDebugOptions,openlayersDebugOptions:this.state.openlayersDebugOptions,onChangeMaplibreGlDebug:this.onChangeMaplibreGlDebug,onChangeOpenlayersDebug:this.onChangeOpenlayersDebug,isOpen:this.state.isOpen.debug,onOpenToggle:()=>(pe().f[65]++,pe().s[312]++,this.toggleModal("debug")),mapView:this.state.mapView}),oe.jsx(BPe,{isOpen:this.state.isOpen.shortcuts,onOpenToggle:()=>(pe().f[66]++,pe().s[313]++,this.toggleModal("shortcuts"))}),oe.jsx(YRe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,onChangeMetadataProperty:this.onChangeMetadataProperty,isOpen:this.state.isOpen.settings,onOpenToggle:()=>(pe().f[67]++,pe().s[314]++,this.toggleModal("settings"))}),oe.jsx(nPe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.export,onOpenToggle:()=>(pe().f[68]++,pe().s[315]++,this.toggleModal("export")),fileHandle:this.state.fileHandle,onSetFileHandle:this.onSetFileHandle}),oe.jsx(SPe,{isOpen:this.state.isOpen.open,onStyleOpen:this.openStyle,onOpenToggle:()=>(pe().f[69]++,pe().s[316]++,this.toggleModal("open")),fileHandle:this.state.fileHandle}),oe.jsx(CPe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.sources,onOpenToggle:()=>(pe().f[70]++,pe().s[317]++,this.toggleModal("sources"))}),oe.jsx(kPe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.globalState,onOpenToggle:()=>(pe().f[71]++,pe().s[318]++,this.toggleModal("globalState"))})]}));return pe().s[319]++,oe.jsx(jRe,{toolbar:i,layerList:o,layerEditor:s,codeEditor:r,map:this.mapRenderer(),bottom:a,modals:c})}}const iLe=qH.createRoot(document.querySelector("#app"));iLe.render(oe.jsx(o2.Provider,{value:{className:"react-icons"},children:oe.jsx(nLe,{})}));document.querySelector(".loading").style.display="none";
//# sourceMappingURL=index-BvteS-mA.js.map
